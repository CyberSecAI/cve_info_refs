=== Content from www.postgresql.org_401495fd_20250124_170459.html ===


[![PostgreSQL Elephant Logo](/media/img/about/press/elephant.png)](/)

* [Home](/ "Home")
* [About](/about/ "About")
* [Download](/download/ "Download")
* [Documentation](/docs/ "Documentation")
* [Community](/community/ "Community")
* [Developers](/developer/ "Developers")
* [Support](/support/ "Support")
* [Donate](/about/donate/ "Donate")
* [Your account](/account/ "Your account")

November 21, 2024: [PostgreSQL 17.2, 16.6, 15.10, 14.15, 13.18, and 12.22 Released!](/about/news/postgresql-172-166-1510-1415-1318-and-1222-released-2965/)

[Documentation](/docs/ "Documentation") ‚Üí [PostgreSQL 9.2](/docs/9.2/index.html)

Unsupported versions:
[9.3](/docs/9.3/release-9-2-10.html "PostgreSQL 9.3 - Release 9.2.10")
/
[9.2](/docs/9.2/release-9-2-10.html "PostgreSQL 9.2 - Release 9.2.10")

This documentation is for an unsupported version of PostgreSQL.

You may want to view the same page for the
[current](/docs/current/release-9-2-10.html "PostgreSQL  - Release 9.2.10")
version, or one of the other supported versions listed above instead.

| [PostgreSQL 9.2.24 Documentation](index.html) | | | | |
| --- | --- | --- | --- | --- |
| [Prev](release-9-2-11.html "Release 9.2.11") | [Up](release.html) | Appendix E. Release Notes | [Next](release-9-2-9.html "Release 9.2.9") |

---

# E.15. Release 9.2.10

**Release date:** 2015-02-05

This release contains a variety of fixes from 9.2.9. For
information about new features in the 9.2 major release, see
[Section E.25](release-9-2.html).

## E.15.1. Migration to Version 9.2.10

A dump/restore is not required for those running 9.2.X.

However, if you are a Windows user and are using the
"Norwegian (Bokm√•l)" locale, manual
action is needed after the upgrade to replace any "Norwegian (Bokm√•l)\_Norway" locale names stored
in PostgreSQL system catalogs
with the plain-ASCII alias "Norwegian\_Norway". For details see <http://wiki.postgresql.org/wiki/Changes_To_Norwegian_Locale>

Also, if you are upgrading from a version earlier than
9.2.9, see [Section E.16](release-9-2-9.html).

## E.15.2. Changes

* Fix buffer overruns in `to_char()` (Bruce Momjian)

  When `to_char()` processes a
  numeric formatting template calling for a large number of
  digits, PostgreSQL would
  read past the end of a buffer. When processing a crafted
  timestamp formatting template, PostgreSQL would write past the end of
  a buffer. Either case could crash the server. We have not
  ruled out the possibility of attacks that lead to privilege
  escalation, though they seem unlikely. (CVE-2015-0241)
* Fix buffer overrun in replacement `*printf()` functions (Tom Lane)

  PostgreSQL includes a
  replacement implementation of `printf` and related functions. This code
  will overrun a stack buffer when formatting a floating
  point number (conversion specifiers e, E, f, F, g or G) with
  requested precision greater than about 500. This will crash
  the server, and we have not ruled out the possibility of
  attacks that lead to privilege escalation. A database user
  can trigger such a buffer overrun through the `to_char()` SQL function. While that is the
  only affected core PostgreSQL functionality, extension
  modules that use printf-family functions may be at risk as
  well.

  This issue primarily affects PostgreSQL on Windows. PostgreSQL uses the system
  implementation of these functions where adequate, which it
  is on other modern platforms. (CVE-2015-0242)
* Fix buffer overruns in contrib/pgcrypto (Marko Tiikkaja, Noah
  Misch)

  Errors in memory size tracking within the pgcrypto module permitted stack buffer
  overruns and improper dependence on the contents of
  uninitialized memory. The buffer overrun cases can crash
  the server, and we have not ruled out the possibility of
  attacks that lead to privilege escalation.
  (CVE-2015-0243)
* Fix possible loss of frontend/backend protocol
  synchronization after an error (Heikki Linnakangas)

  If any error occurred while the server was in the middle
  of reading a protocol message from the client, it could
  lose synchronization and incorrectly try to interpret part
  of the message's data as a new protocol message. An
  attacker able to submit crafted binary data within a
  command parameter might succeed in injecting his own SQL
  commands this way. Statement timeout and query cancellation
  are the most likely sources of errors triggering this
  scenario. Particularly vulnerable are applications that use
  a timeout and also submit arbitrary user-crafted data as
  binary query parameters. Disabling statement timeout will
  reduce, but not eliminate, the risk of exploit. Our thanks
  to Emil Lenngren for reporting this issue.
  (CVE-2015-0244)
* Fix information leak via constraint-violation error
  messages (Stephen Frost)

  Some server error messages show the values of columns
  that violate a constraint, such as a unique constraint. If
  the user does not have SELECT
  privilege on all columns of the table, this could mean
  exposing values that the user should not be able to see.
  Adjust the code so that values are displayed only when they
  came from the SQL command or could be selected by the user.
  (CVE-2014-8161)
* Lock down regression testing's temporary installations
  on Windows (Noah Misch)

  Use SSPI authentication to allow connections only from
  the OS user who launched the test suite. This closes on
  Windows the same vulnerability previously closed on other
  platforms, namely that other users might be able to connect
  to the test postmaster. (CVE-2014-0067)
* Cope with the Windows locale named "Norwegian (Bokm√•l)" (Heikki
  Linnakangas)

  Non-ASCII locale names are problematic since it's not
  clear what encoding they should be represented in. Map the
  troublesome locale name to a plain-ASCII alias,
  "Norwegian\_Norway".
* Avoid possible data corruption if ALTER DATABASE SET TABLESPACE is used to
  move a database to a new tablespace and then shortly later
  move it back to its original tablespace (Tom Lane)
* Avoid corrupting tables when ANALYZE inside a transaction is rolled back
  (Andres Freund, Tom Lane, Michael Paquier)

  If the failing transaction had earlier removed the last
  index, rule, or trigger from the table, the table would be
  left in a corrupted state with the relevant pg\_class flags not set though they should
  be.
* Ensure that unlogged tables are copied correctly during
  CREATE DATABASE or ALTER DATABASE SET TABLESPACE (Pavan
  Deolasee, Andres Freund)
* Fix DROP's dependency searching
  to correctly handle the case where a table column is
  recursively visited before its table (Petr Jelinek, Tom
  Lane)

  This case is only known to arise when an extension
  creates both a datatype and a table using that datatype.
  The faulty code might refuse a DROP
  EXTENSION unless CASCADE is
  specified, which should not be required.
* Fix use-of-already-freed-memory problem in EvalPlanQual
  processing (Tom Lane)

  In READ COMMITTED mode, queries
  that lock or update recently-updated rows could crash as a
  result of this bug.
* Fix planning of SELECT FOR
  UPDATE when using a partial index on a child table
  (Kyotaro Horiguchi)

  In READ COMMITTED mode,
  SELECT FOR UPDATE must also
  recheck the partial index's WHERE
  condition when rechecking a recently-updated row to see if
  it still satisfies the query's WHERE condition. This requirement was missed
  if the index belonged to an inheritance child table, so
  that it was possible to incorrectly return rows that no
  longer satisfy the query condition.
* Fix corner case wherein SELECT FOR
  UPDATE could return a row twice, and possibly miss
  returning other rows (Tom Lane)

  In READ COMMITTED mode, a
  SELECT FOR UPDATE that is scanning
  an inheritance tree could incorrectly return a row from a
  prior child table instead of the one it should return from
  a later child table.
* Reject duplicate column names in the referenced-columns
  list of a FOREIGN KEY declaration
  (David Rowley)

  This restriction is per SQL standard. Previously we did
  not reject the case explicitly, but later on the code would
  fail with bizarre-looking errors.
* Restore previous behavior of conversion of domains to
  JSON (Tom Lane)

  This change causes domains over numeric and boolean to
  be treated like their base types for purposes of conversion
  to JSON. It worked like that before 9.3.5 and 9.2.9, but
  was unintentionally changed while fixing a related
  problem.
* Fix bugs in raising a numeric
  value to a large integral power (Tom Lane)

  The previous code could get a wrong answer, or consume
  excessive amounts of time and memory before realizing that
  the answer must overflow.
* In `numeric_recv()`,
  truncate away any fractional digits that would be hidden
  according to the value's dscale
  field (Tom Lane)

  A numeric value's display scale
  (dscale) should never be less than
  the number of nonzero fractional digits; but apparently
  there's at least one broken client application that
  transmits binary numeric values in
  which that's true. This leads to strange behavior since the
  extra digits are taken into account by arithmetic
  operations even though they aren't printed. The least risky
  fix seems to be to truncate away such "hidden" digits on receipt, so that the
  value is indeed what it prints as.
* Fix incorrect search for shortest-first regular
  expression matches (Tom Lane)

  Matching would often fail when the number of allowed
  iterations is limited by a ?
  quantifier or a bound expression.
* Reject out-of-range numeric timezone specifications (Tom
  Lane)

  Simple numeric timezone specifications exceeding +/- 168
  hours (one week) would be accepted, but could then cause
  null-pointer dereference crashes in certain operations.
  There's no use-case for such large UTC offsets, so reject
  them.
* Fix bugs in tsquery @> tsquery operator
  (Heikki Linnakangas)

  Two different terms would be considered to match if they
  had the same CRC. Also, if the second operand had more
  terms than the first, it would be assumed not to be
  contained in the first; which is wrong since it might
  contain duplicate terms.
* Improve ispell dictionary's defenses against bad affix
  files (Tom Lane)
* Allow more than 64K phrases in a thesaurus dictionary
  (David Boutin)

  The previous coding could crash on an oversize
  dictionary, so this was deemed a back-patchable bug fix
  rather than a feature addition.
* Fix namespace handling in `xpath()` (Ali Akbar)

  Previously, the xml value
  resulting from an `xpath()`
  call would not have namespace declarations if the namespace
  declarations were attached to an ancestor element in the
  input xml value, rather than to the
  specific element being returned. Propagate the ancestral
  declaration so that the result is correct when considered
  in isolation.
* Ensure that whole-row variables expose nonempty column
  names to functions that pay attention to column names
  within composite arguments (Tom Lane)

  In some contexts, constructs like row\_to\_json(tab.\*) may not produce the
  expected column names. This is fixed properly as of 9.4; in
  older branches, just ensure that we produce some nonempty
  name. (In some cases this will be the underlying table's
  column name rather than the query-assigned alias that
  should theoretically be visible.)
* Fix mishandling of system columns, particularly
  tableoid, in FDW queries
  (Etsuro Fujita)
* Avoid doing indexed\_column = ANY (array) as an index qualifier if
  that leads to an inferior plan (Andrew Gierth)

  In some cases, = ANY conditions
  applied to non-first index columns would be done as index
  conditions even though it would be better to use them as
  simple filter conditions.
* Fix planner problems with nested append relations, such
  as inherited tables within UNION
  ALL subqueries (Tom Lane)
* Fail cleanly when a GiST index tuple doesn't fit on a
  page, rather than going into infinite recursion (Andrew
  Gierth)
* Exempt tables that have per-table cost\_limit and/or cost\_delay settings from autovacuum's global
  cost balancing rules (√Ålvaro Herrera)

  The previous behavior resulted in basically ignoring
  these per-table settings, which was unintended. Now, a
  table having such settings will be vacuumed using those
  settings, independently of what is going on in other
  autovacuum workers. This may result in heavier total I/O
  load than before, so such settings should be re-examined
  for sanity.
* Avoid wholesale autovacuuming when autovacuum is
  nominally off (Tom Lane)

  Even when autovacuum is nominally off, we will still
  launch autovacuum worker processes to vacuum tables that
  are at risk of XID wraparound. However, such a worker
  process then proceeded to vacuum all tables in the target
  database, if they met the usual thresholds for
  autovacuuming. This is at best pretty unexpected; at worst
  it delays response to the wraparound threat. Fix it so that
  if autovacuum is turned off, workers only do anti-wraparound
  vacuums and not any other work.
* During crash recovery, ensure that unlogged relations
  are rewritten as empty and are synced to disk before
  recovery is considered complete (Abhijit Menon-Sen, Andres
  Freund)

  This prevents scenarios in which unlogged relations
  might contain garbage data following database crash
  recovery.
* Fix race condition between hot standby queries and
  replaying a full-page image (Heikki Linnakangas)

  This mistake could result in transient errors in queries
  being executed in hot standby.
* Fix several cases where recovery logic improperly
  ignored WAL records for COMMIT/ABORT
  PREPARED (Heikki Linnakangas)

  The most notable oversight was that recovery\_target\_xid could not be used to
  stop at a two-phase commit.
* Prevent latest WAL file from being archived a second
  time at completion of crash recovery (Fujii Masao)
* Avoid creating unnecessary .ready marker files for timeline history
  files (Fujii Masao)
* Fix possible null pointer dereference when an empty
  prepared statement is used and the log\_statement setting is mod or ddl (Fujii
  Masao)
* Change "pgstat wait timeout"
  warning message to be LOG level, and rephrase it to be more
  understandable (Tom Lane)

  This message was originally thought to be essentially a
  can't-happen case, but it occurs often enough on our slower
  buildfarm members to be a nuisance. Reduce it to LOG level,
  and expend a bit more effort on the wording: it now reads
  "using stale statistics instead of
  current ones because stats collector is not
  responding".
* Fix SPARC spinlock implementation to ensure correctness
  if the CPU is being run in a non-TSO coherency mode, as
  some non-Solaris kernels do (Andres Freund)
* Warn if macOS's `setlocale()` starts an unwanted extra
  thread inside the postmaster (Noah Misch)
* Fix processing of repeated dbname parameters in `PQconnectdbParams()` (Alex Shulgin)

  Unexpected behavior ensued if the first occurrence of
  dbname contained a connection
  string or URI to be expanded.
* Ensure that libpq
  reports a suitable error message on unexpected socket EOF
  (Marko Tiikkaja, Tom Lane)

  Depending on kernel behavior, libpq might return an empty error
  string rather than something useful when the server
  unexpectedly closed the socket.
* Clear any old error message during `PQreset()` (Heikki Linnakangas)

  If `PQreset()` is called
  repeatedly, and the connection cannot be re-established,
  error messages from the failed connection attempts kept
  accumulating in the PGconn's
  error string.
* Properly handle out-of-memory conditions while parsing
  connection options in libpq (Alex Shulgin, Heikki
  Linnakangas)
* Fix array overrun in ecpg's version of `ParseDateTime()` (Michael Paquier)
* In initdb, give a
  clearer error message if a password file is specified but
  is empty (Mats Erik Andersson)
* Fix psql's \s command to work nicely with libedit, and
  add pager support (Stepan Rutz, Tom Lane)

  When using libedit rather than readline, \s printed the command history in a fairly
  unreadable encoded format, and on recent libedit versions
  might fail altogether. Fix that by printing the history
  ourselves rather than having the library do it. A pleasant
  side-effect is that the pager is used if appropriate.

  This patch also fixes a bug that caused newline encoding
  to be applied inconsistently when saving the command
  history with libedit. Multiline history entries written by
  older psql versions will
  be read cleanly with this patch, but perhaps not vice
  versa, depending on the exact libedit versions
  involved.
* Improve consistency of parsing of psql's special variables (Tom
  Lane)

  Allow variant spellings of on
  and off (such as 1/0) for ECHO\_HIDDEN and ON\_ERROR\_ROLLBACK. Report a warning for
  unrecognized values for COMP\_KEYWORD\_CASE, ECHO, ECHO\_HIDDEN,
  HISTCONTROL, ON\_ERROR\_ROLLBACK, and VERBOSITY. Recognize all values for all
  these variables case-insensitively; previously there was a
  mishmash of case-sensitive and case-insensitive
  behaviors.
* Fix psql's
  expanded-mode display to work consistently when using
  border = 3 and linestyle = ascii
  or unicode (Stephen Frost)
* Improve performance of pg\_dump when the database contains
  many instances of multiple dependency paths between the
  same two objects (Tom Lane)
* Fix pg\_dumpall to
  restore its ability to dump from pre-8.1 servers (Gilles
  Darold)
* Fix possible deadlock during parallel restore of a
  schema-only dump (Robert Haas, Tom Lane)
* Fix core dump in pg\_dump
  --binary-upgrade on zero-column composite type
  (Rushabh Lathia)
* Prevent WAL files created by pg\_basebackup -x/-X from being archived
  again when the standby is promoted (Andres Freund)
* Fix failure of contrib/auto\_explain to print per-node
  timing information when doing EXPLAIN
  ANALYZE (Tom Lane)
* Fix upgrade-from-unpackaged script for contrib/citext (Tom Lane)
* Fix block number checking in contrib/pageinspect's `get_raw_page()` (Tom Lane)

  The incorrect checking logic could prevent access to
  some pages in non-main relation forks.
* Fix contrib/pgcrypto's
  `pgp_sym_decrypt()` to not fail
  on messages whose length is 6 less than a power of 2 (Marko
  Tiikkaja)
* Fix file descriptor leak in contrib/pg\_test\_fsync (Jeff Janes)

  This could cause failure to remove temporary files on
  Windows.
* Handle unexpected query results, especially NULLs,
  safely in contrib/tablefunc's
  `connectby()` (Michael
  Paquier)

  `connectby()` previously
  crashed if it encountered a NULL key value. It now prints
  that row but doesn't recurse further.
* Avoid a possible crash in contrib/xml2's `xslt_process()` (Mark Simonetti)

  libxslt seems to have
  an undocumented dependency on the order in which resources
  are freed; reorder our calls to avoid a crash.
* Mark some contrib I/O
  functions with correct volatility properties (Tom Lane)

  The previous over-conservative marking was immaterial in
  normal use, but could cause optimization problems or
  rejection of valid index expression definitions. Since the
  consequences are not large, we've just adjusted the
  function definitions in the extension modules' scripts,
  without changing version numbers.
* Numerous cleanups of warnings from Coverity static code
  analyzer (Andres Freund, Tatsuo Ishii, Marko Kreen, Tom
  Lane, Michael Paquier)

  These changes are mostly cosmetic but in some cases fix
  corner-case bugs, for example a crash rather than a proper
  error report after an out-of-memory failure. None are
  believed to represent security issues.
* Detect incompatible OpenLDAP versions during build (Noah
  Misch)

  With OpenLDAP versions 2.4.24 through 2.4.31, inclusive,
  PostgreSQL backends can
  crash at exit. Raise a warning during configure based on the compile-time
  OpenLDAP version number, and test the crashing scenario in
  the contrib/dblink regression
  test.
* In non-MSVC Windows builds, ensure libpq.dll is installed with execute
  permissions (Noah Misch)
* Make pg\_regress remove
  any temporary installation it created upon successful exit
  (Tom Lane)

  This results in a very substantial reduction in disk
  space usage during make
  check-world, since that sequence involves creation of
  numerous temporary installations.
* Support time zone abbreviations that change UTC offset
  from time to time (Tom Lane)

  Previously, PostgreSQL
  assumed that the UTC offset associated with a time zone
  abbreviation (such as EST) never
  changes in the usage of any particular locale. However this
  assumption fails in the real world, so introduce the
  ability for a zone abbreviation to represent a UTC offset
  that sometimes changes. Update the zone abbreviation
  definition files to make use of this feature in timezone
  locales that have changed the UTC offset of their
  abbreviations since 1970 (according to the IANA timezone
  database). In such timezones, PostgreSQL will now associate the
  correct UTC offset with the abbreviation depending on the
  given date.
* Update time zone abbreviations lists (Tom Lane)

  Add CST (China Standard Time) to our lists. Remove
  references to ADT as "Arabia Daylight
  Time", an abbreviation that's been out of use since
  2007; therefore, claiming there is a conflict with
  "Atlantic Daylight Time" doesn't
  seem especially helpful. Fix entirely incorrect GMT offsets
  for CKT (Cook Islands), FJT, and FJST (Fiji); we didn't
  even have them on the proper side of the date line.
* Update time zone data files to tzdata release 2015a.

  The IANA timezone database has adopted abbreviations of
  the form AxST/AxDT for all
  Australian time zones, reflecting what they believe to be
  current majority practice Down Under. These names do not
  conflict with usage elsewhere (other than ACST for Acre
  Summer Time, which has been in disuse since 1994).
  Accordingly, adopt these names into our "Default" timezone abbreviation set. The
  "Australia" abbreviation set now
  contains only CST, EAST, EST, SAST, SAT, and WST, all of
  which are thought to be mostly historical usage. Note that
  SAST has also been changed to be South Africa Standard Time
  in the "Default" abbreviation
  set.

  Also, add zone abbreviations SRET (Asia/Srednekolymsk)
  and XJT (Asia/Urumqi), and use WSST/WSDT for western Samoa.
  Also, there were DST law changes in Chile, Mexico, the
  Turks & Caicos Islands (America/Grand\_Turk), and Fiji.
  There is a new zone Pacific/Bougainville for portions of
  Papua New Guinea. Also, numerous corrections for historical
  (pre-1970) time zone data.

---

| [Prev](release-9-2-11.html) | [Home](index.html) | [Next](release-9-2-9.html) |
| --- | --- | --- |
| Release 9.2.11 | [Up](release.html) | Release 9.2.9 |

* [![@postgresql](/media/img/atpostgresql.png)](https://twitter.com/postgresql)
* [![Git](/media/img/git.png)](https://git.postgresql.org/gitweb/?p=postgresql.git)

[Privacy Policy](/about/privacypolicy) |
[Code of Conduct](/about/policies/coc/) |
[About PostgreSQL](/about/) |
[Contact](/about/contact/)

Copyright ¬© 1996-2025 The PostgreSQL Global Development Group



=== Content from www.debian.org_343b8558_20250124_170457.html ===


---

[[Date Prev](msg00037.html)][[Date Next](msg00039.html)]
[[Thread Prev](msg00037.html)][[Thread Next](msg00039.html)]
[[Date Index](maillist.html#00038)]
[[Thread Index](threads.html#00038)]

# [SECURITY] [DSA 3155-1] postgresql-9.1 security update

---

* *To*: debian-security-announce@lists.debian.org
* *Subject*: [SECURITY] [DSA 3155-1] postgresql-9.1 security update
* *From*: Luciano Bello <luciano@debian.org>
* *Date*: Fri, 06 Feb 2015 14:30:32 +0100
* *Message-id*: <[[üîé]](/msgid-search/5299631.XgMNGYR2BM%40box)¬†[5299631.XgMNGYR2BM@box](msg00038.html)>
* *Reply-to*: debian-security@lists.debian.org

---

```
-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA256

- -------------------------------------------------------------------------
Debian Security Advisory DSA-3155-1                   security@debian.org
<http://www.debian.org/security/>                             Luciano Bello
February 06, 2015                      <http://www.debian.org/security/faq>
- -------------------------------------------------------------------------

Package        : postgresql-9.1
CVE ID         : CVE-2014-8161 CVE-2015-0241 CVE-2015-0243 CVE-2015-0244

Several vulnerabilities have been found in PostgreSQL-9.1, a SQL database
system.

CVE-2014-8161: Information leak
A user with limited clearance on a table might have access to information
in columns without SELECT rights on through server error messages.

CVE-2015-0241: Out of boundaries read/write
The function to_char() might read/write past the end of a buffer. This
might crash the server when a formatting template is processed.

CVE-2015-0243: Buffer overruns in contrib/pgcrypto
The pgcrypto module is vulnerable to stack buffer overrun that might
crash the server.

CVE-2015-0244: SQL command injection
Emil Lenngren reported that an attacker can inject SQL commands when the
synchronization between client and server is lost.

For the stable distribution (wheezy), these problems have been fixed in
version 9.1.15-0+deb7u1.

For the upcoming stable distribution (jessie), these problems have been
fixed in version 9.1.14-0+deb8u1.

For the unstable distribution (sid), these problems have been fixed in
version 9.1.15-0+deb8u1.

We recommend that you upgrade your postgresql-9.1 packages.

Further information about Debian Security Advisories, how to apply
these updates to your system and frequently asked questions can be
found at: <https://www.debian.org/security/>

Mailing list: debian-security-announce@lists.debian.org
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2

iQIcBAEBCAAGBQJU1MH9AAoJEG7C3vaP/jd0aWkP/3sTR8/jF3dNJPa9+zslaV3c
KW71N+njtj9ewdTY9W+RAgSS8eGdaQh0SymmxRHNUrOk6uMYkF3hVhSDrxUsS6Ch
dE4yVQ4RHmaoxh+2w9GSX6/tAl6XzR6z1p+Wael3dfPgdMt81mM7ejkng1Egp+2E
SrxhMNIuXCGrvnLKBh+4B8vZFM0OMDqRNyN6rxIBOBFyFUJ4Qycvy6itJub95pSd
T3TPp1blOvbJGwLlsIkgdFsZqBFBeLnTPZx2v9ohOFAkyMP7kQH3nz9kihuz00G5
Jl0MEiLEVNZam9YgO/Wze+s4Mj1o/1cQp4/WAVDUIKBoUPmCYFH3GlBzXQ3dlDAE
RhajIfN/gZawEi4VPeAWdByv7n9YVcRl+7t/0XmgPzEXNywjfYKOOAWdnvO9JDID
SBy1FyHgRzRT4hyhCV3A6mZGVWkKbC6X7feoehgLaN7383AZGG3lFEdKFHHlBy6I
2hY27g91i+iUNOsVbO6SoOqKyIXzXWKTMAW4u5dwqz+3A71W35lCRuJPoAGulM+K
fgd+9ZPngPBRsZLB0RPC79kVHGPpiXjML8HkxYLnOQ1s7+hznWwGQrNCsoi84b2K
rkqTzh/WwbC3p44M9nEWFjGPaVhPKuT7Mcn+PJG6LwgzudYGvPL0OYPB32ZZ1mVJ
DSgbf9YCiS5Gx6mISwDr
=uGFO
-----END PGP SIGNATURE-----

```

---



=== Content from www.postgresql.org_49e723af_20250124_170459.html ===


[![PostgreSQL Elephant Logo](/media/img/about/press/elephant.png)](/)

* [Home](/ "Home")
* [About](/about/ "About")
* [Download](/download/ "Download")
* [Documentation](/docs/ "Documentation")
* [Community](/community/ "Community")
* [Developers](/developer/ "Developers")
* [Support](/support/ "Support")
* [Donate](/about/donate/ "Donate")
* [Your account](/account/ "Your account")

November 21, 2024: [PostgreSQL 17.2, 16.6, 15.10, 14.15, 13.18, and 12.22 Released!](/about/news/postgresql-172-166-1510-1415-1318-and-1222-released-2965/)

[Documentation](/docs/ "Documentation") ‚Üí [PostgreSQL 9.1](/docs/9.1/index.html)

Unsupported versions:
[9.3](/docs/9.3/release-9-1-15.html "PostgreSQL 9.3 - Release 9.1.15")
/
[9.2](/docs/9.2/release-9-1-15.html "PostgreSQL 9.2 - Release 9.1.15")
/
[9.1](/docs/9.1/release-9-1-15.html "PostgreSQL 9.1 - Release 9.1.15")

This documentation is for an unsupported version of PostgreSQL.

You may want to view the same page for the
[current](/docs/current/release-9-1-15.html "PostgreSQL  - Release 9.1.15")
version, or one of the other supported versions listed above instead.

| [PostgreSQL 9.1.24 Documentation](index.html) | | | | |
| --- | --- | --- | --- | --- |
| [Prev](release-9-1-16.html "Release 9.1.16") | [Up](release.html) | Appendix E. Release Notes | [Next](release-9-1-14.html "Release 9.1.14") |

---

# E.10. Release 9.1.15

> **Release Date:** 2015-02-05

This release contains a variety of fixes from 9.1.14. For
information about new features in the 9.1 major release, see
[Section E.25](release-9-1.html).

## E.10.1. Migration to Version 9.1.15

A dump/restore is not required for those running 9.1.X.

However, if you are upgrading from a version earlier than
9.1.14, see [Section E.11](release-9-1-14.html).

## E.10.2. Changes

* Fix buffer overruns in `to_char()` (Bruce Momjian)

  When `to_char()` processes a
  numeric formatting template calling for a large number of
  digits, PostgreSQL would
  read past the end of a buffer. When processing a crafted
  timestamp formatting template, PostgreSQL would write past the end of
  a buffer. Either case could crash the server. We have not
  ruled out the possibility of attacks that lead to privilege
  escalation, though they seem unlikely. (CVE-2015-0241)
* Fix buffer overrun in replacement `*printf()` functions (Tom Lane)

  PostgreSQL includes a
  replacement implementation of `printf` and related functions. This code
  will overrun a stack buffer when formatting a floating
  point number (conversion specifiers e, E, f, F, g or G) with
  requested precision greater than about 500. This will crash
  the server, and we have not ruled out the possibility of
  attacks that lead to privilege escalation. A database user
  can trigger such a buffer overrun through the `to_char()` SQL function. While that is the
  only affected core PostgreSQL functionality, extension
  modules that use printf-family functions may be at risk as
  well.

  This issue primarily affects PostgreSQL on Windows. PostgreSQL uses the system
  implementation of these functions where adequate, which it
  is on other modern platforms. (CVE-2015-0242)
* Fix buffer overruns in contrib/pgcrypto (Marko Tiikkaja, Noah
  Misch)

  Errors in memory size tracking within the pgcrypto module permitted stack buffer
  overruns and improper dependence on the contents of
  uninitialized memory. The buffer overrun cases can crash
  the server, and we have not ruled out the possibility of
  attacks that lead to privilege escalation.
  (CVE-2015-0243)
* Fix possible loss of frontend/backend protocol
  synchronization after an error (Heikki Linnakangas)

  If any error occurred while the server was in the middle
  of reading a protocol message from the client, it could
  lose synchronization and incorrectly try to interpret part
  of the message's data as a new protocol message. An
  attacker able to submit crafted binary data within a
  command parameter might succeed in injecting his own SQL
  commands this way. Statement timeout and query cancellation
  are the most likely sources of errors triggering this
  scenario. Particularly vulnerable are applications that use
  a timeout and also submit arbitrary user-crafted data as
  binary query parameters. Disabling statement timeout will
  reduce, but not eliminate, the risk of exploit. Our thanks
  to Emil Lenngren for reporting this issue.
  (CVE-2015-0244)
* Fix information leak via constraint-violation error
  messages (Stephen Frost)

  Some server error messages show the values of columns
  that violate a constraint, such as a unique constraint. If
  the user does not have SELECT
  privilege on all columns of the table, this could mean
  exposing values that the user should not be able to see.
  Adjust the code so that values are displayed only when they
  came from the SQL command or could be selected by the user.
  (CVE-2014-8161)
* Lock down regression testing's temporary installations
  on Windows (Noah Misch)

  Use SSPI authentication to allow connections only from
  the OS user who launched the test suite. This closes on
  Windows the same vulnerability previously closed on other
  platforms, namely that other users might be able to connect
  to the test postmaster. (CVE-2014-0067)
* Avoid possible data corruption if ALTER DATABASE SET TABLESPACE is used to
  move a database to a new tablespace and then shortly later
  move it back to its original tablespace (Tom Lane)
* Avoid corrupting tables when ANALYZE inside a transaction is rolled back
  (Andres Freund, Tom Lane, Michael Paquier)

  If the failing transaction had earlier removed the last
  index, rule, or trigger from the table, the table would be
  left in a corrupted state with the relevant pg\_class flags not set though they should
  be.
* Ensure that unlogged tables are copied correctly during
  CREATE DATABASE or ALTER DATABASE SET TABLESPACE (Pavan
  Deolasee, Andres Freund)
* Fix DROP's dependency searching
  to correctly handle the case where a table column is
  recursively visited before its table (Petr Jelinek, Tom
  Lane)

  This case is only known to arise when an extension
  creates both a datatype and a table using that datatype.
  The faulty code might refuse a DROP
  EXTENSION unless CASCADE is
  specified, which should not be required.
* Fix use-of-already-freed-memory problem in EvalPlanQual
  processing (Tom Lane)

  In READ COMMITTED mode, queries
  that lock or update recently-updated rows could crash as a
  result of this bug.
* Fix planning of SELECT FOR
  UPDATE when using a partial index on a child table
  (Kyotaro Horiguchi)

  In READ COMMITTED mode,
  SELECT FOR UPDATE must also
  recheck the partial index's WHERE
  condition when rechecking a recently-updated row to see if
  it still satisfies the query's WHERE condition. This requirement was missed
  if the index belonged to an inheritance child table, so
  that it was possible to incorrectly return rows that no
  longer satisfy the query condition.
* Fix corner case wherein SELECT FOR
  UPDATE could return a row twice, and possibly miss
  returning other rows (Tom Lane)

  In READ COMMITTED mode, a
  SELECT FOR UPDATE that is scanning
  an inheritance tree could incorrectly return a row from a
  prior child table instead of the one it should return from
  a later child table.
* Reject duplicate column names in the referenced-columns
  list of a FOREIGN KEY declaration
  (David Rowley)

  This restriction is per SQL standard. Previously we did
  not reject the case explicitly, but later on the code would
  fail with bizarre-looking errors.
* Fix bugs in raising a numeric
  value to a large integral power (Tom Lane)

  The previous code could get a wrong answer, or consume
  excessive amounts of time and memory before realizing that
  the answer must overflow.
* In `numeric_recv()`,
  truncate away any fractional digits that would be hidden
  according to the value's dscale
  field (Tom Lane)

  A numeric value's display scale
  (dscale) should never be less than
  the number of nonzero fractional digits; but apparently
  there's at least one broken client application that
  transmits binary numeric values in
  which that's true. This leads to strange behavior since the
  extra digits are taken into account by arithmetic
  operations even though they aren't printed. The least risky
  fix seems to be to truncate away such "hidden" digits on receipt, so that the
  value is indeed what it prints as.
* Reject out-of-range numeric timezone specifications (Tom
  Lane)

  Simple numeric timezone specifications exceeding +/- 168
  hours (one week) would be accepted, but could then cause
  null-pointer dereference crashes in certain operations.
  There's no use-case for such large UTC offsets, so reject
  them.
* Fix bugs in tsquery @> tsquery operator
  (Heikki Linnakangas)

  Two different terms would be considered to match if they
  had the same CRC. Also, if the second operand had more
  terms than the first, it would be assumed not to be
  contained in the first; which is wrong since it might
  contain duplicate terms.
* Improve ispell dictionary's defenses against bad affix
  files (Tom Lane)
* Allow more than 64K phrases in a thesaurus dictionary
  (David Boutin)

  The previous coding could crash on an oversize
  dictionary, so this was deemed a back-patchable bug fix
  rather than a feature addition.
* Fix namespace handling in `xpath()` (Ali Akbar)

  Previously, the xml value
  resulting from an `xpath()`
  call would not have namespace declarations if the namespace
  declarations were attached to an ancestor element in the
  input xml value, rather than to the
  specific element being returned. Propagate the ancestral
  declaration so that the result is correct when considered
  in isolation.
* Fix planner problems with nested append relations, such
  as inherited tables within UNION
  ALL subqueries (Tom Lane)
* Fail cleanly when a GiST index tuple doesn't fit on a
  page, rather than going into infinite recursion (Andrew
  Gierth)
* Exempt tables that have per-table cost\_limit and/or cost\_delay settings from autovacuum's global
  cost balancing rules (√Ålvaro Herrera)

  The previous behavior resulted in basically ignoring
  these per-table settings, which was unintended. Now, a
  table having such settings will be vacuumed using those
  settings, independently of what is going on in other
  autovacuum workers. This may result in heavier total I/O
  load than before, so such settings should be re-examined
  for sanity.
* Avoid wholesale autovacuuming when autovacuum is
  nominally off (Tom Lane)

  Even when autovacuum is nominally off, we will still
  launch autovacuum worker processes to vacuum tables that
  are at risk of XID wraparound. However, such a worker
  process then proceeded to vacuum all tables in the target
  database, if they met the usual thresholds for
  autovacuuming. This is at best pretty unexpected; at worst
  it delays response to the wraparound threat. Fix it so that
  if autovacuum is turned off, workers only do anti-wraparound
  vacuums and not any other work.
* During crash recovery, ensure that unlogged relations
  are rewritten as empty and are synced to disk before
  recovery is considered complete (Abhijit Menon-Sen, Andres
  Freund)

  This prevents scenarios in which unlogged relations
  might contain garbage data following database crash
  recovery.
* Fix race condition between hot standby queries and
  replaying a full-page image (Heikki Linnakangas)

  This mistake could result in transient errors in queries
  being executed in hot standby.
* Fix several cases where recovery logic improperly
  ignored WAL records for COMMIT/ABORT
  PREPARED (Heikki Linnakangas)

  The most notable oversight was that recovery\_target\_xid could not be used to
  stop at a two-phase commit.
* Avoid creating unnecessary .ready marker files for timeline history
  files (Fujii Masao)
* Fix possible null pointer dereference when an empty
  prepared statement is used and the log\_statement setting is mod or ddl (Fujii
  Masao)
* Change "pgstat wait timeout"
  warning message to be LOG level, and rephrase it to be more
  understandable (Tom Lane)

  This message was originally thought to be essentially a
  can't-happen case, but it occurs often enough on our slower
  buildfarm members to be a nuisance. Reduce it to LOG level,
  and expend a bit more effort on the wording: it now reads
  "using stale statistics instead of
  current ones because stats collector is not
  responding".
* Fix SPARC spinlock implementation to ensure correctness
  if the CPU is being run in a non-TSO coherency mode, as
  some non-Solaris kernels do (Andres Freund)
* Warn if macOS's `setlocale()` starts an unwanted extra
  thread inside the postmaster (Noah Misch)
* Fix processing of repeated dbname parameters in `PQconnectdbParams()` (Alex Shulgin)

  Unexpected behavior ensued if the first occurrence of
  dbname contained a connection
  string or URI to be expanded.
* Ensure that libpq
  reports a suitable error message on unexpected socket EOF
  (Marko Tiikkaja, Tom Lane)

  Depending on kernel behavior, libpq might return an empty error
  string rather than something useful when the server
  unexpectedly closed the socket.
* Clear any old error message during `PQreset()` (Heikki Linnakangas)

  If `PQreset()` is called
  repeatedly, and the connection cannot be re-established,
  error messages from the failed connection attempts kept
  accumulating in the PGconn's
  error string.
* Properly handle out-of-memory conditions while parsing
  connection options in libpq (Alex Shulgin, Heikki
  Linnakangas)
* Fix array overrun in ecpg's version of `ParseDateTime()` (Michael Paquier)
* In initdb, give a
  clearer error message if a password file is specified but
  is empty (Mats Erik Andersson)
* Fix psql's \s command to work nicely with libedit, and
  add pager support (Stepan Rutz, Tom Lane)

  When using libedit rather than readline, \s printed the command history in a fairly
  unreadable encoded format, and on recent libedit versions
  might fail altogether. Fix that by printing the history
  ourselves rather than having the library do it. A pleasant
  side-effect is that the pager is used if appropriate.

  This patch also fixes a bug that caused newline encoding
  to be applied inconsistently when saving the command
  history with libedit. Multiline history entries written by
  older psql versions will
  be read cleanly with this patch, but perhaps not vice
  versa, depending on the exact libedit versions
  involved.
* Improve consistency of parsing of psql's special variables (Tom
  Lane)

  Allow variant spellings of on
  and off (such as 1/0) for ECHO\_HIDDEN and ON\_ERROR\_ROLLBACK. Report a warning for
  unrecognized values for COMP\_KEYWORD\_CASE, ECHO, ECHO\_HIDDEN,
  HISTCONTROL, ON\_ERROR\_ROLLBACK, and VERBOSITY. Recognize all values for all
  these variables case-insensitively; previously there was a
  mishmash of case-sensitive and case-insensitive
  behaviors.
* Fix psql's
  expanded-mode display to work consistently when using
  border = 3 and linestyle = ascii
  or unicode (Stephen Frost)
* Improve performance of pg\_dump when the database contains
  many instances of multiple dependency paths between the
  same two objects (Tom Lane)
* Fix possible deadlock during parallel restore of a
  schema-only dump (Robert Haas, Tom Lane)
* Fix core dump in pg\_dump
  --binary-upgrade on zero-column composite type
  (Rushabh Lathia)
* Prevent WAL files created by pg\_basebackup -x/-X from being archived
  again when the standby is promoted (Andres Freund)
* Fix upgrade-from-unpackaged script for contrib/citext (Tom Lane)
* Fix block number checking in contrib/pageinspect's `get_raw_page()` (Tom Lane)

  The incorrect checking logic could prevent access to
  some pages in non-main relation forks.
* Fix contrib/pgcrypto's
  `pgp_sym_decrypt()` to not fail
  on messages whose length is 6 less than a power of 2 (Marko
  Tiikkaja)
* Fix file descriptor leak in contrib/pg\_test\_fsync (Jeff Janes)

  This could cause failure to remove temporary files on
  Windows.
* Handle unexpected query results, especially NULLs,
  safely in contrib/tablefunc's
  `connectby()` (Michael
  Paquier)

  `connectby()` previously
  crashed if it encountered a NULL key value. It now prints
  that row but doesn't recurse further.
* Avoid a possible crash in contrib/xml2's `xslt_process()` (Mark Simonetti)

  libxslt seems to have
  an undocumented dependency on the order in which resources
  are freed; reorder our calls to avoid a crash.
* Mark some contrib I/O
  functions with correct volatility properties (Tom Lane)

  The previous over-conservative marking was immaterial in
  normal use, but could cause optimization problems or
  rejection of valid index expression definitions. Since the
  consequences are not large, we've just adjusted the
  function definitions in the extension modules' scripts,
  without changing version numbers.
* Numerous cleanups of warnings from Coverity static code
  analyzer (Andres Freund, Tatsuo Ishii, Marko Kreen, Tom
  Lane, Michael Paquier)

  These changes are mostly cosmetic but in some cases fix
  corner-case bugs, for example a crash rather than a proper
  error report after an out-of-memory failure. None are
  believed to represent security issues.
* Detect incompatible OpenLDAP versions during build (Noah
  Misch)

  With OpenLDAP versions 2.4.24 through 2.4.31, inclusive,
  PostgreSQL backends can
  crash at exit. Raise a warning during configure based on the compile-time
  OpenLDAP version number, and test the crashing scenario in
  the contrib/dblink regression
  test.
* In non-MSVC Windows builds, ensure libpq.dll is installed with execute
  permissions (Noah Misch)
* Make pg\_regress remove
  any temporary installation it created upon successful exit
  (Tom Lane)

  This results in a very substantial reduction in disk
  space usage during make
  check-world, since that sequence involves creation of
  numerous temporary installations.
* Support time zone abbreviations that change UTC offset
  from time to time (Tom Lane)

  Previously, PostgreSQL
  assumed that the UTC offset associated with a time zone
  abbreviation (such as EST) never
  changes in the usage of any particular locale. However this
  assumption fails in the real world, so introduce the
  ability for a zone abbreviation to represent a UTC offset
  that sometimes changes. Update the zone abbreviation
  definition files to make use of this feature in timezone
  locales that have changed the UTC offset of their
  abbreviations since 1970 (according to the IANA timezone
  database). In such timezones, PostgreSQL will now associate the
  correct UTC offset with the abbreviation depending on the
  given date.
* Update time zone abbreviations lists (Tom Lane)

  Add CST (China Standard Time) to our lists. Remove
  references to ADT as "Arabia Daylight
  Time", an abbreviation that's been out of use since
  2007; therefore, claiming there is a conflict with
  "Atlantic Daylight Time" doesn't
  seem especially helpful. Fix entirely incorrect GMT offsets
  for CKT (Cook Islands), FJT, and FJST (Fiji); we didn't
  even have them on the proper side of the date line.
* Update time zone data files to tzdata release 2015a.

  The IANA timezone database has adopted abbreviations of
  the form AxST/AxDT for all
  Australian time zones, reflecting what they believe to be
  current majority practice Down Under. These names do not
  conflict with usage elsewhere (other than ACST for Acre
  Summer Time, which has been in disuse since 1994).
  Accordingly, adopt these names into our "Default" timezone abbreviation set. The
  "Australia" abbreviation set now
  contains only CST, EAST, EST, SAST, SAT, and WST, all of
  which are thought to be mostly historical usage. Note that
  SAST has also been changed to be South Africa Standard Time
  in the "Default" abbreviation
  set.

  Also, add zone abbreviations SRET (Asia/Srednekolymsk)
  and XJT (Asia/Urumqi), and use WSST/WSDT for western Samoa.
  Also, there were DST law changes in Chile, Mexico, the
  Turks & Caicos Islands (America/Grand\_Turk), and Fiji.
  There is a new zone Pacific/Bougainville for portions of
  Papua New Guinea. Also, numerous corrections for historical
  (pre-1970) time zone data.

---

| [Prev](release-9-1-16.html) | [Home](index.html) | [Next](release-9-1-14.html) |
| --- | --- | --- |
| Release 9.1.16 | [Up](release.html) | Release 9.1.14 |

* [![@postgresql](/media/img/atpostgresql.png)](https://twitter.com/postgresql)
* [![Git](/media/img/git.png)](https://git.postgresql.org/gitweb/?p=postgresql.git)

[Privacy Policy](/about/privacypolicy) |
[Code of Conduct](/about/policies/coc/) |
[About PostgreSQL](/about/) |
[Contact](/about/contact/)

Copyright ¬© 1996-2025 The PostgreSQL Global Development Group



=== Content from www.postgresql.org_adac5a39_20250124_170458.html ===


[![PostgreSQL Elephant Logo](/media/img/about/press/elephant.png)](/)

* [Home](/ "Home")
* [About](/about/ "About")
* [Download](/download/ "Download")
* [Documentation](/docs/ "Documentation")
* [Community](/community/ "Community")
* [Developers](/developer/ "Developers")
* [Support](/support/ "Support")
* [Donate](/about/donate/ "Donate")
* [Your account](/account/ "Your account")

November 21, 2024: [PostgreSQL 17.2, 16.6, 15.10, 14.15, 13.18, and 12.22 Released!](/about/news/postgresql-172-166-1510-1415-1318-and-1222-released-2965/)

[Documentation](/docs/ "Documentation") ‚Üí [PostgreSQL 9.4](/docs/9.4/index.html)

Unsupported versions:
[9.4](/docs/9.4/release-9-4-1.html "PostgreSQL 9.4 - Release 9.4.1")

This documentation is for an unsupported version of PostgreSQL.

You may want to view the same page for the
[current](/docs/current/release-9-4-1.html "PostgreSQL  - Release 9.4.1")
version, or one of the other supported versions listed above instead.

| [PostgreSQL 9.4.26 Documentation](index.html) | | | |
| --- | --- | --- | --- |
| [Prev](release-9-4-2.html "Release 9.4.2") | [Up](release.html) | Appendix E. Release Notes | [Next](release-9-4.html "Release 9.4") |

---

# E.26. Release 9.4.1

**Release date:** 2015-02-05

This release contains a variety of fixes from 9.4.0. For information about new features in the 9.4 major release, see [Section E.27](release-9-4.html).

## E.26.1. Migration to Version 9.4.1

A dump/restore is not required for those running 9.4.X.

However, if you are a Windows user and are using the "Norwegian (Bokm√•l)" locale, manual action is needed after the upgrade to replace any "Norwegian (Bokm√•l)\_Norway" or "norwegian-bokmal" locale names stored in PostgreSQL system catalogs with the plain-ASCII alias "Norwegian\_Norway". For details see <http://wiki.postgresql.org/wiki/Changes_To_Norwegian_Locale>

## E.26.2. Changes

* Fix buffer overruns in `to_char()` (Bruce Momjian)

  When `to_char()` processes a numeric formatting template calling for a large number of digits, PostgreSQL would read past the end of a buffer. When processing a crafted timestamp formatting template, PostgreSQL would write past the end of a buffer. Either case could crash the server. We have not ruled out the possibility of attacks that lead to privilege escalation, though they seem unlikely. (CVE-2015-0241)
* Fix buffer overrun in replacement `*printf()` functions (Tom Lane)

  PostgreSQL includes a replacement implementation of `printf` and related functions. This code will overrun a stack buffer when formatting a floating point number (conversion specifiers e, E, f, F, g or G) with requested precision greater than about 500. This will crash the server, and we have not ruled out the possibility of attacks that lead to privilege escalation. A database user can trigger such a buffer overrun through the `to_char()` SQL function. While that is the only affected core PostgreSQL functionality, extension modules that use printf-family functions may be at risk as well.

  This issue primarily affects PostgreSQL on Windows. PostgreSQL uses the system implementation of these functions where adequate, which it is on other modern platforms. (CVE-2015-0242)
* Fix buffer overruns in contrib/pgcrypto (Marko Tiikkaja, Noah Misch)

  Errors in memory size tracking within the pgcrypto module permitted stack buffer overruns and improper dependence on the contents of uninitialized memory. The buffer overrun cases can crash the server, and we have not ruled out the possibility of attacks that lead to privilege escalation. (CVE-2015-0243)
* Fix possible loss of frontend/backend protocol synchronization after an error (Heikki Linnakangas)

  If any error occurred while the server was in the middle of reading a protocol message from the client, it could lose synchronization and incorrectly try to interpret part of the message's data as a new protocol message. An attacker able to submit crafted binary data within a command parameter might succeed in injecting his own SQL commands this way. Statement timeout and query cancellation are the most likely sources of errors triggering this scenario. Particularly vulnerable are applications that use a timeout and also submit arbitrary user-crafted data as binary query parameters. Disabling statement timeout will reduce, but not eliminate, the risk of exploit. Our thanks to Emil Lenngren for reporting this issue. (CVE-2015-0244)
* Fix information leak via constraint-violation error messages (Stephen Frost)

  Some server error messages show the values of columns that violate a constraint, such as a unique constraint. If the user does not have SELECT privilege on all columns of the table, this could mean exposing values that the user should not be able to see. Adjust the code so that values are displayed only when they came from the SQL command or could be selected by the user. (CVE-2014-8161)
* Lock down regression testing's temporary installations on Windows (Noah Misch)

  Use SSPI authentication to allow connections only from the OS user who launched the test suite. This closes on Windows the same vulnerability previously closed on other platforms, namely that other users might be able to connect to the test postmaster. (CVE-2014-0067)
* Cope with the Windows locale named "Norwegian (Bokm√•l)" (Heikki Linnakangas)

  Non-ASCII locale names are problematic since it's not clear what encoding they should be represented in. Map the troublesome locale name to a plain-ASCII alias, "Norwegian\_Norway".

  9.4.0 mapped the troublesome name to "norwegian-bokmal", but that turns out not to work on all Windows configurations. "Norwegian\_Norway" is now recommended instead.
* Fix use-of-already-freed-memory problem in EvalPlanQual processing (Tom Lane)

  In READ COMMITTED mode, queries that lock or update recently-updated rows could crash as a result of this bug.
* Avoid possible deadlock while trying to acquire tuple locks in EvalPlanQual processing (√Ålvaro Herrera, Mark Kirkwood)
* Fix failure to wait when a transaction tries to acquire a FOR NO KEY EXCLUSIVE tuple lock, while multiple other transactions currently hold FOR SHARE locks (√Ålvaro Herrera)
* Improve performance of EXPLAIN with large range tables (Tom Lane)
* Fix jsonb Unicode escape processing, and in consequence disallow \u0000 (Tom Lane)

  Previously, the JSON Unicode escape \u0000 was accepted and was stored as those six characters; but that is indistinguishable from what is stored for the input \\u0000, resulting in ambiguity. Moreover, in cases where de-escaped textual output is expected, such as the ->> operator, the sequence was printed as \u0000, which does not meet the expectation that JSON escaping would be removed. (Consistent behavior would require emitting a zero byte, but PostgreSQL does not support zero bytes embedded in text strings.) 9.4.0 included an ill-advised attempt to improve this situation by adjusting JSON output conversion rules; but of course that could not fix the fundamental ambiguity, and it turned out to break other usages of Unicode escape sequences. Revert that, and to avoid the core problem, reject \u0000 in jsonb input.

  If a jsonb column contains a \u0000 value stored with 9.4.0, it will henceforth read out as though it were \\u0000, which is the other valid interpretation of the data stored by 9.4.0 for this case.

  The json type did not have the storage-ambiguity problem, but it did have the problem of inconsistent de-escaped textual output. Therefore \u0000 will now also be rejected in json values when conversion to de-escaped form is required. This change does not break the ability to store \u0000 in json columns so long as no processing is done on the values. This is exactly parallel to the cases in which non-ASCII Unicode escapes are allowed when the database encoding is not UTF8.
* Fix namespace handling in `xpath()` (Ali Akbar)

  Previously, the xml value resulting from an `xpath()` call would not have namespace declarations if the namespace declarations were attached to an ancestor element in the input xml value, rather than to the specific element being returned. Propagate the ancestral declaration so that the result is correct when considered in isolation.
* Fix assorted oversights in range-operator selectivity estimation (Emre Hasegeli)

  This patch fixes corner-case "unexpected operator NNNN" planner errors, and improves the selectivity estimates for some other cases.
* Revert unintended reduction in maximum size of a GIN index item (Heikki Linnakangas)

  9.4.0 could fail with "index row size exceeds maximum" errors for data that previous versions would accept.
* Fix query-duration memory leak during repeated GIN index rescans (Heikki Linnakangas)
* Fix possible crash when using nonzero gin\_fuzzy\_search\_limit (Heikki Linnakangas)
* Assorted fixes for logical decoding (Andres Freund)
* Fix incorrect replay of WAL parameter change records that report changes in the wal\_log\_hints setting (Petr Jelinek)
* Change "pgstat wait timeout" warning message to be LOG level, and rephrase it to be more understandable (Tom Lane)

  This message was originally thought to be essentially a can't-happen case, but it occurs often enough on our slower buildfarm members to be a nuisance. Reduce it to LOG level, and expend a bit more effort on the wording: it now reads "using stale statistics instead of current ones because stats collector is not responding".
* Warn if macOS's `setlocale()` starts an unwanted extra thread inside the postmaster (Noah Misch)
* Fix libpq's behavior when /etc/passwd isn't readable (Tom Lane)

  While doing `PQsetdbLogin()`, libpq attempts to ascertain the user's operating system name, which on most Unix platforms involves reading /etc/passwd. As of 9.4, failure to do that was treated as a hard error. Restore the previous behavior, which was to fail only if the application does not provide a database role name to connect as. This supports operation in chroot environments that lack an /etc/passwd file.
* Improve consistency of parsing of psql's special variables (Tom Lane)

  Allow variant spellings of on and off (such as 1/0) for ECHO\_HIDDEN and ON\_ERROR\_ROLLBACK. Report a warning for unrecognized values for COMP\_KEYWORD\_CASE, ECHO, ECHO\_HIDDEN, HISTCONTROL, ON\_ERROR\_ROLLBACK, and VERBOSITY. Recognize all values for all these variables case-insensitively; previously there was a mishmash of case-sensitive and case-insensitive behaviors.
* Fix pg\_dump to handle comments on event triggers without failing (Tom Lane)
* Allow parallel pg\_dump to use --serializable-deferrable (Kevin Grittner)
* Prevent WAL files created by pg\_basebackup -x/-X from being archived again when the standby is promoted (Andres Freund)
* Handle unexpected query results, especially NULLs, safely in contrib/tablefunc's `connectby()` (Michael Paquier)

  `connectby()` previously crashed if it encountered a NULL key value. It now prints that row but doesn't recurse further.
* Numerous cleanups of warnings from Coverity static code analyzer (Andres Freund, Tatsuo Ishii, Marko Kreen, Tom Lane, Michael Paquier)

  These changes are mostly cosmetic but in some cases fix corner-case bugs, for example a crash rather than a proper error report after an out-of-memory failure. None are believed to represent security issues.
* Allow CFLAGS from configure's environment to override automatically-supplied CFLAGS (Tom Lane)

  Previously, configure would add any switches that it chose of its own accord to the end of the user-specified CFLAGS string. Since most compilers process switches left-to-right, this meant that configure's choices would override the user-specified flags in case of conflicts. That should work the other way around, so adjust the logic to put the user's string at the end not the beginning.
* Make pg\_regress remove any temporary installation it created upon successful exit (Tom Lane)

  This results in a very substantial reduction in disk space usage during make check-world, since that sequence involves creation of numerous temporary installations.
* Add CST (China Standard Time) to our lists of timezone abbreviations (Tom Lane)
* Update time zone data files to tzdata release 2015a for DST law changes in Chile and Mexico, plus historical changes in Iceland.

---

| [Prev](release-9-4-2.html) | [Home](index.html) | [Next](release-9-4.html) |
| --- | --- | --- |
| Release 9.4.2 | [Up](release.html) | Release 9.4 |

* [![@postgresql](/media/img/atpostgresql.png)](https://twitter.com/postgresql)
* [![Git](/media/img/git.png)](https://git.postgresql.org/gitweb/?p=postgresql.git)

[Privacy Policy](/about/privacypolicy) |
[Code of Conduct](/about/policies/coc/) |
[About PostgreSQL](/about/) |
[Contact](/about/contact/)

Copyright ¬© 1996-2025 The PostgreSQL Global Development Group



=== Content from www.postgresql.org_9770f19e_20250124_170500.html ===


[![PostgreSQL Elephant Logo](/media/img/about/press/elephant.png)](/)

* [Home](/ "Home")
* [About](/about/ "About")
* [Download](/download/ "Download")
* [Documentation](/docs/ "Documentation")
* [Community](/community/ "Community")
* [Developers](/developer/ "Developers")
* [Support](/support/ "Support")
* [Donate](/about/donate/ "Donate")
* [Your account](/account/ "Your account")

November 21, 2024: [PostgreSQL 17.2, 16.6, 15.10, 14.15, 13.18, and 12.22 Released!](/about/news/postgresql-172-166-1510-1415-1318-and-1222-released-2965/)

[Documentation](/docs/ "Documentation") ‚Üí [PostgreSQL 9.3](/docs/9.3/index.html)

Unsupported versions:
[9.3](/docs/9.3/release-9-3-6.html "PostgreSQL 9.3 - Release 9.3.6")

This documentation is for an unsupported version of PostgreSQL.

You may want to view the same page for the
[current](/docs/current/release-9-3-6.html "PostgreSQL  - Release 9.3.6")
version, or one of the other supported versions listed above instead.

| [PostgreSQL 9.3.25 Documentation](index.html) | | | | |
| --- | --- | --- | --- | --- |
| [Prev](release-9-3-7.html "Release 9.3.7") | [Up](release.html) | Appendix E. Release Notes | [Next](release-9-3-5.html "Release 9.3.5") |

---

# E.20. Release 9.3.6

**Release date:** 2015-02-05

This release contains a variety of fixes from 9.3.5. For
information about new features in the 9.3 major release, see
[Section E.26](release-9-3.html).

## E.20.1. Migration to Version 9.3.6

A dump/restore is not required for those running 9.3.X.

However, if you are a Windows user and are using the
"Norwegian (Bokm√•l)" locale, manual
action is needed after the upgrade to replace any "Norwegian (Bokm√•l)\_Norway" locale names stored in
PostgreSQL system catalogs with
the plain-ASCII alias "Norwegian\_Norway". For details see <http://wiki.postgresql.org/wiki/Changes_To_Norwegian_Locale>

Also, if you are upgrading from a version earlier than 9.3.5,
see [Section E.21](release-9-3-5.html).

## E.20.2. Changes

* Fix buffer overruns in `to_char()`
  (Bruce Momjian)

  When `to_char()` processes a numeric
  formatting template calling for a large number of digits,
  PostgreSQL would read past the end
  of a buffer. When processing a crafted timestamp formatting
  template, PostgreSQL would write
  past the end of a buffer. Either case could crash the server. We
  have not ruled out the possibility of attacks that lead to
  privilege escalation, though they seem unlikely.
  (CVE-2015-0241)
* Fix buffer overrun in replacement `*printf()` functions (Tom Lane)

  PostgreSQL includes a
  replacement implementation of `printf`
  and related functions. This code will overrun a stack buffer when
  formatting a floating point number (conversion specifiers
  e, E, f, F, g or G) with requested
  precision greater than about 500. This will crash the server, and
  we have not ruled out the possibility of attacks that lead to
  privilege escalation. A database user can trigger such a buffer
  overrun through the `to_char()` SQL
  function. While that is the only affected core PostgreSQL functionality, extension modules
  that use printf-family functions may be at risk as well.

  This issue primarily affects PostgreSQL on Windows. PostgreSQL uses the system implementation of
  these functions where adequate, which it is on other modern
  platforms. (CVE-2015-0242)
* Fix buffer overruns in contrib/pgcrypto (Marko Tiikkaja, Noah Misch)

  Errors in memory size tracking within the pgcrypto module permitted stack buffer overruns and
  improper dependence on the contents of uninitialized memory. The
  buffer overrun cases can crash the server, and we have not ruled
  out the possibility of attacks that lead to privilege escalation.
  (CVE-2015-0243)
* Fix possible loss of frontend/backend protocol synchronization
  after an error (Heikki Linnakangas)

  If any error occurred while the server was in the middle of
  reading a protocol message from the client, it could lose
  synchronization and incorrectly try to interpret part of the
  message's data as a new protocol message. An attacker able to
  submit crafted binary data within a command parameter might succeed
  in injecting his own SQL commands this way. Statement timeout and
  query cancellation are the most likely sources of errors triggering
  this scenario. Particularly vulnerable are applications that use a
  timeout and also submit arbitrary user-crafted data as binary query
  parameters. Disabling statement timeout will reduce, but not
  eliminate, the risk of exploit. Our thanks to Emil Lenngren for
  reporting this issue. (CVE-2015-0244)
* Fix information leak via constraint-violation error messages
  (Stephen Frost)

  Some server error messages show the values of columns that
  violate a constraint, such as a unique constraint. If the user does
  not have SELECT privilege on all columns
  of the table, this could mean exposing values that the user should
  not be able to see. Adjust the code so that values are displayed
  only when they came from the SQL command or could be selected by
  the user. (CVE-2014-8161)
* Lock down regression testing's temporary installations on
  Windows (Noah Misch)

  Use SSPI authentication to allow connections only from the OS
  user who launched the test suite. This closes on Windows the same
  vulnerability previously closed on other platforms, namely that
  other users might be able to connect to the test postmaster.
  (CVE-2014-0067)
* Cope with the Windows locale named "Norwegian (Bokm√•l)" (Heikki Linnakangas)

  Non-ASCII locale names are problematic since it's not clear what
  encoding they should be represented in. Map the troublesome locale
  name to a plain-ASCII alias, "Norwegian\_Norway".
* Avoid possible data corruption if ALTER
  DATABASE SET TABLESPACE is used to move a database to a new
  tablespace and then shortly later move it back to its original
  tablespace (Tom Lane)
* Avoid corrupting tables when ANALYZE
  inside a transaction is rolled back (Andres Freund, Tom Lane,
  Michael Paquier)

  If the failing transaction had earlier removed the last index,
  rule, or trigger from the table, the table would be left in a
  corrupted state with the relevant pg\_class flags not set though they should be.
* Ensure that unlogged tables are copied correctly during
  CREATE DATABASE or ALTER DATABASE SET TABLESPACE (Pavan Deolasee,
  Andres Freund)
* Fix incorrect processing of CreateEventTrigStmt.eventname (Petr Jelinek)

  This could result in misbehavior if CREATE
  EVENT TRIGGER were executed as a prepared query, or via
  extended query protocol.
* Fix DROP's dependency searching to
  correctly handle the case where a table column is recursively
  visited before its table (Petr Jelinek, Tom Lane)

  This case is only known to arise when an extension creates both
  a datatype and a table using that datatype. The faulty code might
  refuse a DROP EXTENSION unless CASCADE is specified, which should not be
  required.
* Fix use-of-already-freed-memory problem in EvalPlanQual
  processing (Tom Lane)

  In READ COMMITTED mode, queries that
  lock or update recently-updated rows could crash as a result of
  this bug.
* Avoid possible deadlock while trying to acquire tuple locks in
  EvalPlanQual processing (√Ålvaro Herrera, Mark Kirkwood)
* Fix failure to wait when a transaction tries to acquire a
  FOR NO KEY EXCLUSIVE tuple lock, while
  multiple other transactions currently hold FOR
  SHARE locks (√Ålvaro Herrera)
* Fix planning of SELECT FOR UPDATE when
  using a partial index on a child table (Kyotaro Horiguchi)

  In READ COMMITTED mode, SELECT FOR UPDATE must also recheck the partial
  index's WHERE condition when rechecking a
  recently-updated row to see if it still satisfies the query's
  WHERE condition. This requirement was
  missed if the index belonged to an inheritance child table, so that
  it was possible to incorrectly return rows that no longer satisfy
  the query condition.
* Fix corner case wherein SELECT FOR
  UPDATE could return a row twice, and possibly miss returning
  other rows (Tom Lane)

  In READ COMMITTED mode, a SELECT FOR UPDATE that is scanning an inheritance
  tree could incorrectly return a row from a prior child table
  instead of the one it should return from a later child table.
* Improve performance of EXPLAIN with
  large range tables (Tom Lane)
* Reject duplicate column names in the referenced-columns list of
  a FOREIGN KEY declaration (David
  Rowley)

  This restriction is per SQL standard. Previously we did not
  reject the case explicitly, but later on the code would fail with
  bizarre-looking errors.
* Re-enable error for SELECT ... OFFSET
  -1 (Tom Lane)

  A negative offset value has been an error since 8.4, but an
  optimization added in 9.3 accidentally turned the case into a
  no-op. Restore the expected behavior.
* Restore previous behavior of conversion of domains to JSON (Tom
  Lane)

  This change causes domains over numeric and boolean to be
  treated like their base types for purposes of conversion to JSON.
  It worked like that before 9.3.5 and 9.2.9, but was unintentionally
  changed while fixing a related problem.
* Fix `json_agg()` to not return extra
  trailing right brackets in its result (Tom Lane)
* Fix bugs in raising a numeric value to a
  large integral power (Tom Lane)

  The previous code could get a wrong answer, or consume excessive
  amounts of time and memory before realizing that the answer must
  overflow.
* In `numeric_recv()`, truncate away
  any fractional digits that would be hidden according to the value's
  dscale field (Tom Lane)

  A numeric value's display scale
  (dscale) should never be less than the
  number of nonzero fractional digits; but apparently there's at
  least one broken client application that transmits binary
  numeric values in which that's true. This
  leads to strange behavior since the extra digits are taken into
  account by arithmetic operations even though they aren't printed.
  The least risky fix seems to be to truncate away such "hidden" digits on receipt, so that the value is
  indeed what it prints as.
* Fix incorrect search for shortest-first regular expression
  matches (Tom Lane)

  Matching would often fail when the number of allowed iterations
  is limited by a ? quantifier or a bound
  expression.
* Reject out-of-range numeric timezone specifications (Tom
  Lane)

  Simple numeric timezone specifications exceeding +/- 168 hours
  (one week) would be accepted, but could then cause null-pointer
  dereference crashes in certain operations. There's no use-case for
  such large UTC offsets, so reject them.
* Fix bugs in tsquery @> tsquery operator (Heikki
  Linnakangas)

  Two different terms would be considered to match if they had the
  same CRC. Also, if the second operand had more terms than the
  first, it would be assumed not to be contained in the first; which
  is wrong since it might contain duplicate terms.
* Improve ispell dictionary's defenses against bad affix files
  (Tom Lane)
* Allow more than 64K phrases in a thesaurus dictionary (David
  Boutin)

  The previous coding could crash on an oversize dictionary, so
  this was deemed a back-patchable bug fix rather than a feature
  addition.
* Fix namespace handling in `xpath()`
  (Ali Akbar)

  Previously, the xml value resulting from
  an `xpath()` call would not have
  namespace declarations if the namespace declarations were attached
  to an ancestor element in the input xml
  value, rather than to the specific element being returned.
  Propagate the ancestral declaration so that the result is correct
  when considered in isolation.
* Ensure that whole-row variables expose nonempty column names to
  functions that pay attention to column names within composite
  arguments (Tom Lane)

  In some contexts, constructs like row\_to\_json(tab.\*) may not produce the expected
  column names. This is fixed properly as of 9.4; in older branches,
  just ensure that we produce some nonempty name. (In some cases this
  will be the underlying table's column name rather than the
  query-assigned alias that should theoretically be visible.)
* Fix mishandling of system columns, particularly tableoid, in FDW queries (Etsuro Fujita)
* Fix assorted oversights in range-operator selectivity estimation
  (Emre Hasegeli)

  This patch fixes corner-case "unexpected
  operator NNNN" planner errors, and improves the selectivity
  estimates for some other cases.
* Avoid doing indexed\_column = ANY (array) as an index qualifier if that
  leads to an inferior plan (Andrew Gierth)

  In some cases, = ANY conditions applied
  to non-first index columns would be done as index conditions even
  though it would be better to use them as simple filter
  conditions.
* Fix "variable not found in subplan target
  list" planner failure when an inline-able SQL function
  taking a composite argument is used in a LATERAL subselect and the composite argument is a
  lateral reference (Tom Lane)
* Fix planner problems with nested append relations, such as
  inherited tables within UNION ALL
  subqueries (Tom Lane)
* Fail cleanly when a GiST index tuple doesn't fit on a page,
  rather than going into infinite recursion (Andrew Gierth)
* Exempt tables that have per-table cost\_limit and/or cost\_delay settings from autovacuum's global cost
  balancing rules (√Ålvaro Herrera)

  The previous behavior resulted in basically ignoring these
  per-table settings, which was unintended. Now, a table having such
  settings will be vacuumed using those settings, independently of
  what is going on in other autovacuum workers. This may result in
  heavier total I/O load than before, so such settings should be
  re-examined for sanity.
* Avoid wholesale autovacuuming when autovacuum is nominally off
  (Tom Lane)

  Even when autovacuum is nominally off, we will still launch
  autovacuum worker processes to vacuum tables that are at risk of
  XID wraparound. However, such a worker process then proceeded to
  vacuum all tables in the target database, if they met the usual
  thresholds for autovacuuming. This is at best pretty unexpected; at
  worst it delays response to the wraparound threat. Fix it so that
  if autovacuum is turned off, workers only do anti-wraparound vacuums and
  not any other work.
* During crash recovery, ensure that unlogged relations are
  rewritten as empty and are synced to disk before recovery is
  considered complete (Abhijit Menon-Sen, Andres Freund)

  This prevents scenarios in which unlogged relations might
  contain garbage data following database crash recovery.
* Fix race condition between hot standby queries and replaying a
  full-page image (Heikki Linnakangas)

  This mistake could result in transient errors in queries being
  executed in hot standby.
* Fix several cases where recovery logic improperly ignored WAL
  records for COMMIT/ABORT PREPARED (Heikki
  Linnakangas)

  The most notable oversight was that recovery\_target\_xid could not be used to stop at a
  two-phase commit.
* Prevent latest WAL file from being archived a second time at
  completion of crash recovery (Fujii Masao)
* Avoid creating unnecessary .ready
  marker files for timeline history files (Fujii Masao)
* Fix possible null pointer dereference when an empty prepared
  statement is used and the log\_statement
  setting is mod or ddl (Fujii Masao)
* Change "pgstat wait timeout" warning
  message to be LOG level, and rephrase it to be more understandable
  (Tom Lane)

  This message was originally thought to be essentially a
  can't-happen case, but it occurs often enough on our slower
  buildfarm members to be a nuisance. Reduce it to LOG level, and
  expend a bit more effort on the wording: it now reads "using stale statistics instead of current ones because
  stats collector is not responding".
* Fix possible corruption of postmaster's list of dynamic
  background workers (Andres Freund)
* Fix SPARC spinlock implementation to ensure correctness if the
  CPU is being run in a non-TSO coherency mode, as some non-Solaris
  kernels do (Andres Freund)
* Warn if macOS's `setlocale()` starts
  an unwanted extra thread inside the postmaster (Noah Misch)
* Fix processing of repeated dbname
  parameters in `PQconnectdbParams()`
  (Alex Shulgin)

  Unexpected behavior ensued if the first occurrence of dbname contained a connection string or URI to be
  expanded.
* Ensure that libpq reports a
  suitable error message on unexpected socket EOF (Marko Tiikkaja,
  Tom Lane)

  Depending on kernel behavior, libpq might return an empty error string
  rather than something useful when the server unexpectedly closed
  the socket.
* Clear any old error message during `PQreset()` (Heikki Linnakangas)

  If `PQreset()` is called repeatedly,
  and the connection cannot be re-established, error messages from
  the failed connection attempts kept accumulating in the PGconn's error string.
* Properly handle out-of-memory conditions while parsing
  connection options in libpq (Alex
  Shulgin, Heikki Linnakangas)
* Fix array overrun in ecpg's
  version of `ParseDateTime()` (Michael
  Paquier)
* In initdb, give a clearer error
  message if a password file is specified but is empty (Mats Erik
  Andersson)
* Fix psql's \s command to work nicely with libedit, and add
  pager support (Stepan Rutz, Tom Lane)

  When using libedit rather than readline, \s printed the command history in a fairly
  unreadable encoded format, and on recent libedit versions might
  fail altogether. Fix that by printing the history ourselves rather
  than having the library do it. A pleasant side-effect is that the
  pager is used if appropriate.

  This patch also fixes a bug that caused newline encoding to be
  applied inconsistently when saving the command history with
  libedit. Multiline history entries written by older psql versions will be read cleanly with this
  patch, but perhaps not vice versa, depending on the exact libedit
  versions involved.
* Improve consistency of parsing of psql's special variables (Tom Lane)

  Allow variant spellings of on and
  off (such as 1/0) for ECHO\_HIDDEN and ON\_ERROR\_ROLLBACK. Report a warning for unrecognized
  values for COMP\_KEYWORD\_CASE, ECHO, ECHO\_HIDDEN,
  HISTCONTROL, ON\_ERROR\_ROLLBACK, and VERBOSITY. Recognize all values for all these
  variables case-insensitively; previously there was a mishmash of
  case-sensitive and case-insensitive behaviors.
* Make psql's \watch command display nulls as specified by
  \pset null (Fujii Masao)
* Fix psql's expanded-mode
  display to work consistently when using border = 3 and linestyle =
  ascii or unicode
  (Stephen Frost)
* Fix pg\_dump to handle comments
  on event triggers without failing (Tom Lane)
* Allow parallel pg\_dump to use
  --serializable-deferrable (Kevin
  Grittner)
* Improve performance of pg\_dump
  when the database contains many instances of multiple dependency
  paths between the same two objects (Tom Lane)
* Fix pg\_dumpall to restore its
  ability to dump from pre-8.1 servers (Gilles Darold)
* Fix possible deadlock during parallel restore of a schema-only
  dump (Robert Haas, Tom Lane)
* Fix core dump in pg\_dump
  --binary-upgrade on zero-column composite type (Rushabh
  Lathia)
* Fix failure to fsync tables in nondefault tablespaces during
  pg\_upgrade (Abhijit Menon-Sen,
  Andres Freund)

  With an operating system crash and some bad luck, this could
  result in data loss during an upgrade.
* In pg\_upgrade, cope with cases
  where the new cluster creates a TOAST table for a table that didn't
  previously have one (Bruce Momjian)

  Previously this could result in failures due to OID
  conflicts.
* In pg\_upgrade, don't try to set
  autovacuum\_multixact\_freeze\_max\_age for
  the old cluster (Bruce Momjian)

  This could result in failure because not all 9.3.X versions have
  that parameter. Fortunately, we don't actually need to set it at
  all.
* In pg\_upgrade, preserve the
  transaction ID epoch (Bruce Momjian)

  This oversight did not bother PostgreSQL proper, but could confuse some
  external replication tools.
* Prevent WAL files created by pg\_basebackup
  -x/-X from being archived again when the standby is promoted
  (Andres Freund)
* Fix memory leak in pg\_receivexlog (Fujii Masao)
* Fix unintended suppression of pg\_receivexlog verbose messages (Fujii
  Masao)
* Fix failure of contrib/auto\_explain to
  print per-node timing information when doing EXPLAIN ANALYZE (Tom Lane)
* Fix upgrade-from-unpackaged script for contrib/citext (Tom Lane)
* Avoid integer overflow and buffer overrun in contrib/hstore's `hstore_to_json()` (Heikki Linnakangas)
* Fix recognition of numbers in `hstore_to_json_loose()`, so that JSON numbers and
  strings are correctly distinguished (Andrew Dunstan)
* Fix block number checking in contrib/pageinspect's `get_raw_page()` (Tom Lane)

  The incorrect checking logic could prevent access to some pages
  in non-main relation forks.
* Fix contrib/pgcrypto's `pgp_sym_decrypt()` to not fail on messages whose
  length is 6 less than a power of 2 (Marko Tiikkaja)
* Fix file descriptor leak in contrib/pg\_test\_fsync (Jeff Janes)

  This could cause failure to remove temporary files on
  Windows.
* Handle unexpected query results, especially NULLs, safely in
  contrib/tablefunc's `connectby()` (Michael Paquier)

  `connectby()` previously crashed if
  it encountered a NULL key value. It now prints that row but doesn't
  recurse further.
* Avoid a possible crash in contrib/xml2's `xslt_process()` (Mark Simonetti)

  libxslt seems to have an
  undocumented dependency on the order in which resources are freed;
  reorder our calls to avoid a crash.
* Mark some contrib I/O functions with
  correct volatility properties (Tom Lane)

  The previous over-conservative marking was immaterial in normal
  use, but could cause optimization problems or rejection of valid
  index expression definitions. Since the consequences are not large,
  we've just adjusted the function definitions in the extension
  modules' scripts, without changing version numbers.
* Numerous cleanups of warnings from Coverity static code analyzer
  (Andres Freund, Tatsuo Ishii, Marko Kreen, Tom Lane, Michael
  Paquier)

  These changes are mostly cosmetic but in some cases fix
  corner-case bugs, for example a crash rather than a proper error
  report after an out-of-memory failure. None are believed to
  represent security issues.
* Fix setup of background workers in EXEC\_BACKEND builds, eg
  Windows (Robert Haas)
* Detect incompatible OpenLDAP versions during build (Noah
  Misch)

  With OpenLDAP versions 2.4.24 through 2.4.31, inclusive,
  PostgreSQL backends can crash at
  exit. Raise a warning during configure based on the compile-time OpenLDAP
  version number, and test the crashing scenario in the contrib/dblink regression test.
* In non-MSVC Windows builds, ensure libpq.dll is installed with execute permissions
  (Noah Misch)
* Make pg\_regress remove any
  temporary installation it created upon successful exit (Tom
  Lane)

  This results in a very substantial reduction in disk space usage
  during make check-world, since that
  sequence involves creation of numerous temporary installations.
* Support time zone abbreviations that change UTC offset from time
  to time (Tom Lane)

  Previously, PostgreSQL assumed
  that the UTC offset associated with a time zone abbreviation (such
  as EST) never changes in the usage of any
  particular locale. However this assumption fails in the real world,
  so introduce the ability for a zone abbreviation to represent a UTC
  offset that sometimes changes. Update the zone abbreviation
  definition files to make use of this feature in timezone locales
  that have changed the UTC offset of their abbreviations since 1970
  (according to the IANA timezone database). In such timezones,
  PostgreSQL will now associate the
  correct UTC offset with the abbreviation depending on the given
  date.
* Update time zone abbreviations lists (Tom Lane)

  Add CST (China Standard Time) to our lists. Remove references to
  ADT as "Arabia Daylight Time", an
  abbreviation that's been out of use since 2007; therefore, claiming
  there is a conflict with "Atlantic Daylight
  Time" doesn't seem especially helpful. Fix entirely
  incorrect GMT offsets for CKT (Cook Islands), FJT, and FJST (Fiji);
  we didn't even have them on the proper side of the date line.
* Update time zone data files to tzdata release 2015a.

  The IANA timezone database has adopted abbreviations of the form
  AxST/AxDT for all Australian time zones,
  reflecting what they believe to be current majority practice Down
  Under. These names do not conflict with usage elsewhere (other than
  ACST for Acre Summer Time, which has been in disuse since 1994).
  Accordingly, adopt these names into our "Default" timezone abbreviation set. The
  "Australia" abbreviation set now
  contains only CST, EAST, EST, SAST, SAT, and WST, all of which are
  thought to be mostly historical usage. Note that SAST has also been
  changed to be South Africa Standard Time in the "Default" abbreviation set.

  Also, add zone abbreviations SRET (Asia/Srednekolymsk) and XJT
  (Asia/Urumqi), and use WSST/WSDT for western Samoa. Also, there
  were DST law changes in Chile, Mexico, the Turks & Caicos
  Islands (America/Grand\_Turk), and Fiji. There is a new zone
  Pacific/Bougainville for portions of Papua New Guinea. Also,
  numerous corrections for historical (pre-1970) time zone data.

---

| [Prev](release-9-3-7.html) | [Home](index.html) | [Next](release-9-3-5.html) |
| --- | --- | --- |
| Release 9.3.7 | [Up](release.html) | Release 9.3.5 |

* [![@postgresql](/media/img/atpostgresql.png)](https://twitter.com/postgresql)
* [![Git](/media/img/git.png)](https://git.postgresql.org/gitweb/?p=postgresql.git)

[Privacy Policy](/about/privacypolicy) |
[Code of Conduct](/about/policies/coc/) |
[About PostgreSQL](/about/) |
[Contact](/about/contact/)

Copyright ¬© 1996-2025 The PostgreSQL Global Development Group



=== Content from www.postgresql.org_263d3795_20250124_170457.html ===


[![PostgreSQL Elephant Logo](/media/img/about/press/elephant.png)](/)

* [Home](/ "Home")
* [About](/about/ "About")
* [Download](/download/ "Download")
* [Documentation](/docs/ "Documentation")
* [Community](/community/ "Community")
* [Developers](/developer/ "Developers")
* [Support](/support/ "Support")
* [Donate](/about/donate/ "Donate")
* [Your account](/account/ "Your account")

November 21, 2024: [PostgreSQL 17.2, 16.6, 15.10, 14.15, 13.18, and 12.22 Released!](/about/news/postgresql-172-166-1510-1415-1318-and-1222-released-2965/)

## Quick Links

* [About](/about/)
* [Governance](/about/governance/)
* [Policies](/about/policies/)
* [Feature Matrix](/about/featurematrix/)
* [Donate](/about/donate/)
* [History](/docs/current/history.html)
* [Sponsors](/about/sponsors/)
  + [Contributing](/about/contributing/)
  + [Financial](/about/financial/)
  + [Servers](/about/servers/)
* [Latest News](/about/newsarchive/)
* [Upcoming Events](/about/events/)
  + [Past events](/about/eventarchive/)
* [Press](/about/press/)
* [Licence](/about/licence/)

# PostgreSQL 9.4.1, 9.3.6, 9.2.10, 9.1.15 & 9.0.19 Released

Posted on **2015-02-05** by PostgreSQL Global Development Group

The PostgreSQL Global Development Group has released an important update with fixes for multiple security issues to all supported versions of the PostgreSQL database system, which includes minor versions 9.4.1, 9.3.6, 9.2.10, 9.1.15, and 9.0.19. This update includes both security fixes and fixes for issues discovered since the last release. In particular for the 9.4 update, there is a change to the way unicode strings are escaped for the JSON and JSONB data types.

All users should update their PostgreSQL installation at the next opportunity.

## Security Fixes

This update fixes multiple security issues reported in PostgreSQL over the past few months. All of these issues require prior authentication, and some require additional conditions, and as such are not considered generally urgent. However, users should examine the list of security holes patched below in case they are particularly vulnerable.

* [CVE-2015-0241](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2015-0241) Buffer overruns in "to\_char" functions.
* [CVE-2015-0242](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2015-0242) Buffer overrun in replacement printf family of functions.
* [CVE-2015-0243](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2015-0243) Memory errors in functions in the pgcrypto extension.
* [CVE-2015-0244](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2015-0244) An error in extended protocol message reading.
* [CVE-2014-8161](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-8161) Constraint violation errors can cause display of values in columns which the user would not normally have rights to see.

This update also fixes the previously reported problem that, during regression testing on Windows, the test postmaster process was vulnerable to unauthorized connections. This vulnerability was fixed on non-Windows platforms in the prior update releases.

More information about these issues, as well as older patched issues, is available on the [PostgreSQL Security Page](http://www.postgresql.org/support/security/).

## JSON and JSONB Unicode Escapes

The handling of Unicode escape strings for JSON and JSONB in PostgreSQL 9.4.0 has been changed in a way which may break compatibility for some users. To fix some inconsistencies, type JSONB no longer accepts the escape sequence "\u0000". Type JSON accepts "\u0000" only in contexts where it does not need to be converted to de-escaped form. See the release notes for more detail.

## Other Fixes and Improvements

In addition to the above, more than 60 reported issues have been fixed in this cumulative update release. Some of them affect only version 9.4, but many of them fix problems present in older versions. These fixes include:

* Cope with the non-ASCII Norwegian Windows locale name.
* Avoid data corruption when databases are moved to new tablespaces and back again.
* Ensure that UNLOGGED tables are correctly copied during ALTER DATABASE operations.
* Avoid deadlocks when locking recently modified rows.
* Fix two SELECT FOR UPDATE query issues.
* Prevent false negative for shortest-first regular expression matches.
* Fix false positives and negatives in tsquery contains operator.
* Fix namespace handling in xpath().
* Prevent row-producing functions from creating empty column names.
* Make autovacuum use per-table cost\_limit and cost\_delay settings.
* When autovacuum=off, limit autovacuum work to wraparound prevention only.
* Multiple fixes for logical decoding in 9.4.
* Fix transient errors on hot standby queries due to page replacement.
* Prevent duplicate WAL file archiving at end of recovery or standby promotion.
* Prevent deadlock in parallel restore of schema-only dump.

In addition to the fixes above, the following contrib modules and extensions have had bugs fixed in this release: pg\_upgrade, auto\_explain, hstore, pageinspect, pgcrypto, pg\_test\_fsync, tablefunc, and xml2. Also, multiple functions across several contrib modules have been modified with the correct level of volatility. There are also multiple cleanup fixes based on minor issues found by the Coverity Scan static analyzer.

This update also contains many changes to PostgreSQL's timezone files. This includes an update to tzdata release 2015a, with updates to Chile, Mexico, Caicos Islands, and Fiji. PostgreSQL now takes date into account when assigning an offset based on a timezone abbreviation for historically changeable timezones. We have also done a general cleanup on timezone abbreviations, and added "CST" as an abbreviation for China Standard Time.

As with other minor releases, users are not required to dump and reload their database or use pg\_upgrade in order to apply this update release; you may simply shut down PostgreSQL and update its binaries. Users who have skipped multiple update releases may need to perform additional post-update steps; see the Release Notes for details.

Links:
\* [Download](http://www.postgresql.org/download)
\* [Release Notes](http://www.postgresql.org/docs/current/static/release.html)
\* [Security Page](http://www.postgresql.org/support/security/)

* [![@postgresql](/media/img/atpostgresql.png)](https://twitter.com/postgresql)
* [![Git](/media/img/git.png)](https://git.postgresql.org/gitweb/?p=postgresql.git)

[Policies](/about/policies/) |
[Code of Conduct](/about/policies/coc/) |
[About PostgreSQL](/about/) |
[Contact](/about/contact/)

Copyright ¬© 1996-2025 The PostgreSQL Global Development Group



=== Content from www.postgresql.org_0fbb0440_20250124_170459.html ===


[![PostgreSQL Elephant Logo](/media/img/about/press/elephant.png)](/)

* [Home](/ "Home")
* [About](/about/ "About")
* [Download](/download/ "Download")
* [Documentation](/docs/ "Documentation")
* [Community](/community/ "Community")
* [Developers](/developer/ "Developers")
* [Support](/support/ "Support")
* [Donate](/about/donate/ "Donate")
* [Your account](/account/ "Your account")

November 21, 2024: [PostgreSQL 17.2, 16.6, 15.10, 14.15, 13.18, and 12.22 Released!](/about/news/postgresql-172-166-1510-1415-1318-and-1222-released-2965/)

[Documentation](/docs/ "Documentation") ‚Üí [PostgreSQL 9.0](/docs/9.0/index.html)

Unsupported versions:
[9.3](/docs/9.3/release-9-0-19.html "PostgreSQL 9.3 - Release 9.0.19")
/
[9.2](/docs/9.2/release-9-0-19.html "PostgreSQL 9.2 - Release 9.0.19")
/
[9.1](/docs/9.1/release-9-0-19.html "PostgreSQL 9.1 - Release 9.0.19")
/
[9.0](/docs/9.0/release-9-0-19.html "PostgreSQL 9.0 - Release 9.0.19")

This documentation is for an unsupported version of PostgreSQL.

You may want to view the same page for the
[current](/docs/current/release-9-0-19.html "PostgreSQL  - Release 9.0.19")
version, or one of the other supported versions listed above instead.

| [PostgreSQL 9.0.23 Documentation](index.html) | | | | |
| --- | --- | --- | --- | --- |
| [Prev](release-9-0-20.html "Release 9.0.20") | [Up](release.html) | Appendix E. Release Notes | [Next](release-9-0-18.html "Release 9.0.18") |

---

# E.5. Release 9.0.19

> **Release Date:** 2015-02-05

This release contains a variety of fixes from 9.0.18. For
information about new features in the 9.0 major release, see
[Section E.24](release-9-0.html).

## E.5.1. Migration to Version 9.0.19

A dump/restore is not required for those running 9.0.X.

However, if you are upgrading from a version earlier than
9.0.18, see [Section E.6](release-9-0-18.html).

## E.5.2. Changes

* Fix buffer overruns in `to_char()` (Bruce Momjian)

  When `to_char()` processes a
  numeric formatting template calling for a large number of
  digits, PostgreSQL would
  read past the end of a buffer. When processing a crafted
  timestamp formatting template, PostgreSQL would write past the end of
  a buffer. Either case could crash the server. We have not
  ruled out the possibility of attacks that lead to privilege
  escalation, though they seem unlikely. (CVE-2015-0241)
* Fix buffer overrun in replacement `*printf()` functions (Tom Lane)

  PostgreSQL includes a
  replacement implementation of `printf` and related functions. This code
  will overrun a stack buffer when formatting a floating
  point number (conversion specifiers e, E, f, F, g or G) with
  requested precision greater than about 500. This will crash
  the server, and we have not ruled out the possibility of
  attacks that lead to privilege escalation. A database user
  can trigger such a buffer overrun through the `to_char()` SQL function. While that is the
  only affected core PostgreSQL functionality, extension
  modules that use printf-family functions may be at risk as
  well.

  This issue primarily affects PostgreSQL on Windows. PostgreSQL uses the system
  implementation of these functions where adequate, which it
  is on other modern platforms. (CVE-2015-0242)
* Fix buffer overruns in contrib/pgcrypto (Marko Tiikkaja, Noah
  Misch)

  Errors in memory size tracking within the pgcrypto module permitted stack buffer
  overruns and improper dependence on the contents of
  uninitialized memory. The buffer overrun cases can crash
  the server, and we have not ruled out the possibility of
  attacks that lead to privilege escalation.
  (CVE-2015-0243)
* Fix possible loss of frontend/backend protocol
  synchronization after an error (Heikki Linnakangas)

  If any error occurred while the server was in the middle
  of reading a protocol message from the client, it could
  lose synchronization and incorrectly try to interpret part
  of the message's data as a new protocol message. An
  attacker able to submit crafted binary data within a
  command parameter might succeed in injecting his own SQL
  commands this way. Statement timeout and query cancellation
  are the most likely sources of errors triggering this
  scenario. Particularly vulnerable are applications that use
  a timeout and also submit arbitrary user-crafted data as
  binary query parameters. Disabling statement timeout will
  reduce, but not eliminate, the risk of exploit. Our thanks
  to Emil Lenngren for reporting this issue.
  (CVE-2015-0244)
* Fix information leak via constraint-violation error
  messages (Stephen Frost)

  Some server error messages show the values of columns
  that violate a constraint, such as a unique constraint. If
  the user does not have SELECT
  privilege on all columns of the table, this could mean
  exposing values that the user should not be able to see.
  Adjust the code so that values are displayed only when they
  came from the SQL command or could be selected by the user.
  (CVE-2014-8161)
* Lock down regression testing's temporary installations
  on Windows (Noah Misch)

  Use SSPI authentication to allow connections only from
  the OS user who launched the test suite. This closes on
  Windows the same vulnerability previously closed on other
  platforms, namely that other users might be able to connect
  to the test postmaster. (CVE-2014-0067)
* Avoid possible data corruption if ALTER DATABASE SET TABLESPACE is used to
  move a database to a new tablespace and then shortly later
  move it back to its original tablespace (Tom Lane)
* Avoid corrupting tables when ANALYZE inside a transaction is rolled back
  (Andres Freund, Tom Lane, Michael Paquier)

  If the failing transaction had earlier removed the last
  index, rule, or trigger from the table, the table would be
  left in a corrupted state with the relevant pg\_class flags not set though they should
  be.
* Fix use-of-already-freed-memory problem in EvalPlanQual
  processing (Tom Lane)

  In READ COMMITTED mode, queries
  that lock or update recently-updated rows could crash as a
  result of this bug.
* Fix planning of SELECT FOR
  UPDATE when using a partial index on a child table
  (Kyotaro Horiguchi)

  In READ COMMITTED mode,
  SELECT FOR UPDATE must also
  recheck the partial index's WHERE
  condition when rechecking a recently-updated row to see if
  it still satisfies the query's WHERE condition. This requirement was missed
  if the index belonged to an inheritance child table, so
  that it was possible to incorrectly return rows that no
  longer satisfy the query condition.
* Fix corner case wherein SELECT FOR
  UPDATE could return a row twice, and possibly miss
  returning other rows (Tom Lane)

  In READ COMMITTED mode, a
  SELECT FOR UPDATE that is scanning
  an inheritance tree could incorrectly return a row from a
  prior child table instead of the one it should return from
  a later child table.
* Reject duplicate column names in the referenced-columns
  list of a FOREIGN KEY declaration
  (David Rowley)

  This restriction is per SQL standard. Previously we did
  not reject the case explicitly, but later on the code would
  fail with bizarre-looking errors.
* Fix bugs in raising a numeric
  value to a large integral power (Tom Lane)

  The previous code could get a wrong answer, or consume
  excessive amounts of time and memory before realizing that
  the answer must overflow.
* In `numeric_recv()`,
  truncate away any fractional digits that would be hidden
  according to the value's dscale
  field (Tom Lane)

  A numeric value's display scale
  (dscale) should never be less than
  the number of nonzero fractional digits; but apparently
  there's at least one broken client application that
  transmits binary numeric values in
  which that's true. This leads to strange behavior since the
  extra digits are taken into account by arithmetic
  operations even though they aren't printed. The least risky
  fix seems to be to truncate away such "hidden" digits on receipt, so that the
  value is indeed what it prints as.
* Reject out-of-range numeric timezone specifications (Tom
  Lane)

  Simple numeric timezone specifications exceeding +/- 168
  hours (one week) would be accepted, but could then cause
  null-pointer dereference crashes in certain operations.
  There's no use-case for such large UTC offsets, so reject
  them.
* Fix bugs in tsquery @> tsquery operator
  (Heikki Linnakangas)

  Two different terms would be considered to match if they
  had the same CRC. Also, if the second operand had more
  terms than the first, it would be assumed not to be
  contained in the first; which is wrong since it might
  contain duplicate terms.
* Improve ispell dictionary's defenses against bad affix
  files (Tom Lane)
* Allow more than 64K phrases in a thesaurus dictionary
  (David Boutin)

  The previous coding could crash on an oversize
  dictionary, so this was deemed a back-patchable bug fix
  rather than a feature addition.
* Fix namespace handling in `xpath()` (Ali Akbar)

  Previously, the xml value
  resulting from an `xpath()`
  call would not have namespace declarations if the namespace
  declarations were attached to an ancestor element in the
  input xml value, rather than to the
  specific element being returned. Propagate the ancestral
  declaration so that the result is correct when considered
  in isolation.
* Fix planner problems with nested append relations, such
  as inherited tables within UNION
  ALL subqueries (Tom Lane)
* Fail cleanly when a GiST index tuple doesn't fit on a
  page, rather than going into infinite recursion (Andrew
  Gierth)
* Exempt tables that have per-table cost\_limit and/or cost\_delay settings from autovacuum's global
  cost balancing rules (√Ålvaro Herrera)

  The previous behavior resulted in basically ignoring
  these per-table settings, which was unintended. Now, a
  table having such settings will be vacuumed using those
  settings, independently of what is going on in other
  autovacuum workers. This may result in heavier total I/O
  load than before, so such settings should be re-examined
  for sanity.
* Avoid wholesale autovacuuming when autovacuum is
  nominally off (Tom Lane)

  Even when autovacuum is nominally off, we will still
  launch autovacuum worker processes to vacuum tables that
  are at risk of XID wraparound. However, such a worker
  process then proceeded to vacuum all tables in the target
  database, if they met the usual thresholds for
  autovacuuming. This is at best pretty unexpected; at worst
  it delays response to the wraparound threat. Fix it so that
  if autovacuum is turned off, workers only do anti-wraparound
  vacuums and not any other work.
* Fix race condition between hot standby queries and
  replaying a full-page image (Heikki Linnakangas)

  This mistake could result in transient errors in queries
  being executed in hot standby.
* Fix several cases where recovery logic improperly
  ignored WAL records for COMMIT/ABORT
  PREPARED (Heikki Linnakangas)

  The most notable oversight was that recovery\_min\_apply\_delay failed to delay
  application of a two-phase commit.
* Avoid creating unnecessary .ready marker files for timeline history
  files (Fujii Masao)
* Fix possible null pointer dereference when an empty
  prepared statement is used and the log\_statement setting is mod or ddl (Fujii
  Masao)
* Change "pgstat wait timeout"
  warning message to be LOG level, and rephrase it to be more
  understandable (Tom Lane)

  This message was originally thought to be essentially a
  can't-happen case, but it occurs often enough on our slower
  buildfarm members to be a nuisance. Reduce it to LOG level,
  and expend a bit more effort on the wording: it now reads
  "using stale statistics instead of
  current ones because stats collector is not
  responding".
* Fix SPARC spinlock implementation to ensure correctness
  if the CPU is being run in a non-TSO coherency mode, as
  some non-Solaris kernels do (Andres Freund)
* Warn if OS X's `setlocale()`
  starts an unwanted extra thread inside the postmaster (Noah
  Misch)
* Fix processing of repeated dbname parameters in `PQconnectdbParams()` (Alex Shulgin)

  Unexpected behavior ensued if the first occurrence of
  dbname contained a connection
  string or URI to be expanded.
* Ensure that libpq
  reports a suitable error message on unexpected socket EOF
  (Marko Tiikkaja, Tom Lane)

  Depending on kernel behavior, libpq might return an empty error
  string rather than something useful when the server
  unexpectedly closed the socket.
* Clear any old error message during `PQreset()` (Heikki Linnakangas)

  If `PQreset()` is called
  repeatedly, and the connection cannot be re-established,
  error messages from the failed connection attempts kept
  accumulating in the PGconn's
  error string.
* Properly handle out-of-memory conditions while parsing
  connection options in libpq (Alex Shulgin, Heikki
  Linnakangas)
* Fix array overrun in ecpg's version of `ParseDateTime()` (Michael Paquier)
* In initdb, give a
  clearer error message if a password file is specified but
  is empty (Mats Erik Andersson)
* Fix psql's \s command to work nicely with libedit, and
  add pager support (Stepan Rutz, Tom Lane)

  When using libedit rather than readline, \s printed the command history in a fairly
  unreadable encoded format, and on recent libedit versions
  might fail altogether. Fix that by printing the history
  ourselves rather than having the library do it. A pleasant
  side-effect is that the pager is used if appropriate.

  This patch also fixes a bug that caused newline encoding
  to be applied inconsistently when saving the command
  history with libedit. Multiline history entries written by
  older psql versions will
  be read cleanly with this patch, but perhaps not vice
  versa, depending on the exact libedit versions
  involved.
* Improve consistency of parsing of psql's special variables (Tom
  Lane)

  Allow variant spellings of on
  and off (such as 1/0) for ECHO\_HIDDEN and ON\_ERROR\_ROLLBACK. Report a warning for
  unrecognized values for COMP\_KEYWORD\_CASE, ECHO, ECHO\_HIDDEN,
  HISTCONTROL, ON\_ERROR\_ROLLBACK, and VERBOSITY. Recognize all values for all
  these variables case-insensitively; previously there was a
  mishmash of case-sensitive and case-insensitive
  behaviors.
* Fix psql's
  expanded-mode display to work consistently when using
  border = 3 and linestyle = ascii
  or unicode (Stephen Frost)
* Fix possible deadlock during parallel restore of a
  schema-only dump (Robert Haas, Tom Lane)
* Fix core dump in pg\_dump
  --binary-upgrade on zero-column composite type
  (Rushabh Lathia)
* Fix block number checking in contrib/pageinspect's `get_raw_page()` (Tom Lane)

  The incorrect checking logic could prevent access to
  some pages in non-main relation forks.
* Fix contrib/pgcrypto's
  `pgp_sym_decrypt()` to not fail
  on messages whose length is 6 less than a power of 2 (Marko
  Tiikkaja)
* Handle unexpected query results, especially NULLs,
  safely in contrib/tablefunc's
  `connectby()` (Michael
  Paquier)

  `connectby()` previously
  crashed if it encountered a NULL key value. It now prints
  that row but doesn't recurse further.
* Avoid a possible crash in contrib/xml2's `xslt_process()` (Mark Simonetti)

  libxslt seems to have
  an undocumented dependency on the order in which resources
  are freed; reorder our calls to avoid a crash.
* Numerous cleanups of warnings from Coverity static code
  analyzer (Andres Freund, Tatsuo Ishii, Marko Kreen, Tom
  Lane, Michael Paquier)

  These changes are mostly cosmetic but in some cases fix
  corner-case bugs, for example a crash rather than a proper
  error report after an out-of-memory failure. None are
  believed to represent security issues.
* Detect incompatible OpenLDAP versions during build (Noah
  Misch)

  With OpenLDAP versions 2.4.24 through 2.4.31, inclusive,
  PostgreSQL backends can
  crash at exit. Raise a warning during configure based on the compile-time
  OpenLDAP version number, and test the crashing scenario in
  the contrib/dblink regression
  test.
* In non-MSVC Windows builds, ensure libpq.dll is installed with execute
  permissions (Noah Misch)
* Make pg\_regress remove
  any temporary installation it created upon successful exit
  (Tom Lane)

  This results in a very substantial reduction in disk
  space usage during make
  check-world, since that sequence involves creation of
  numerous temporary installations.
* Support time zone abbreviations that change UTC offset
  from time to time (Tom Lane)

  Previously, PostgreSQL
  assumed that the UTC offset associated with a time zone
  abbreviation (such as EST) never
  changes in the usage of any particular locale. However this
  assumption fails in the real world, so introduce the
  ability for a zone abbreviation to represent a UTC offset
  that sometimes changes. Update the zone abbreviation
  definition files to make use of this feature in timezone
  locales that have changed the UTC offset of their
  abbreviations since 1970 (according to the IANA timezone
  database). In such timezones, PostgreSQL will now associate the
  correct UTC offset with the abbreviation depending on the
  given date.
* Update time zone abbreviations lists (Tom Lane)

  Add CST (China Standard Time) to our lists. Remove
  references to ADT as "Arabia Daylight
  Time", an abbreviation that's been out of use since
  2007; therefore, claiming there is a conflict with
  "Atlantic Daylight Time" doesn't
  seem especially helpful. Fix entirely incorrect GMT offsets
  for CKT (Cook Islands), FJT, and FJST (Fiji); we didn't
  even have them on the proper side of the date line.
* Update time zone data files to tzdata release 2015a.

  The IANA timezone database has adopted abbreviations of
  the form AxST/AxDT for all
  Australian time zones, reflecting what they believe to be
  current majority practice Down Under. These names do not
  conflict with usage elsewhere (other than ACST for Acre
  Summer Time, which has been in disuse since 1994).
  Accordingly, adopt these names into our "Default" timezone abbreviation set. The
  "Australia" abbreviation set now
  contains only CST, EAST, EST, SAST, SAT, and WST, all of
  which are thought to be mostly historical usage. Note that
  SAST has also been changed to be South Africa Standard Time
  in the "Default" abbreviation
  set.

  Also, add zone abbreviations SRET (Asia/Srednekolymsk)
  and XJT (Asia/Urumqi), and use WSST/WSDT for western Samoa.
  Also, there were DST law changes in Chile, Mexico, the
  Turks & Caicos Islands (America/Grand\_Turk), and Fiji.
  There is a new zone Pacific/Bougainville for portions of
  Papua New Guinea. Also, numerous corrections for historical
  (pre-1970) time zone data.

---

| [Prev](release-9-0-20.html) | [Home](index.html) | [Next](release-9-0-18.html) |
| --- | --- | --- |
| Release 9.0.20 | [Up](release.html) | Release 9.0.18 |

* [![@postgresql](/media/img/atpostgresql.png)](https://twitter.com/postgresql)
* [![Git](/media/img/git.png)](https://git.postgresql.org/gitweb/?p=postgresql.git)

[Privacy Policy](/about/privacypolicy) |
[Code of Conduct](/about/policies/coc/) |
[About PostgreSQL](/about/) |
[Contact](/about/contact/)

Copyright ¬© 1996-2025 The PostgreSQL Global Development Group


