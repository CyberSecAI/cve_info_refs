=== Content from bugzilla.suse.com_647cb756_20250126_064056.html ===


| Bugzilla – Bug 935338 | VUL-0: CVE-2015-0794: dracut: uses hardcoded /tmp/dracut\_block\_uuid.map filename - symlink attack | Last modified: 2021-03-02 16:44:35 UTC |
| --- | --- | --- |

|  |
| --- |

* [Home](./)
* | [New](enter_bug.cgi)
* | [Browse](describecomponents.cgi)
* | [Search](query.cgi)
* |

  [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
* | [Reports](report.cgi)
* |
  [Requests](request.cgi)
* |
  [IDP Log In](/saml2_login.cgi?idp=IDP&target=show_bug.cgi%3Fid%3D935338)
* |
  [Forgot Password](https://idp-portal.suse.com/univention/self-service/#page=passwordreset)

[**Bug 935338**](show_bug.cgi?id=935338)
(CVE-2015-0794)
- VUL-0: CVE-2015-0794: dracut: uses hardcoded /tmp/dracut\_block\_uuid.map filename - symlink attack

[Summary:](page.cgi?id=glossary.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
VUL-0: CVE-2015-0794: dracut: uses hardcoded /tmp/dracut\_block\_uuid.map filen...

| | [Status](page.cgi?id=status_resolution_matrix.html): | RESOLVED FIXED | | --- | --- | |  | | | [Alias:](page.cgi?id=glossary.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | CVE-2015-0794 | |  | | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components. Select a Classification to narrow down this list.") | SUSE Security Incidents | | [Classification:](page.cgi?id=glossary.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Novell Products | | [Component:](describecomponents.cgi?product=SUSE Security Incidents "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | Incidents ([show other bugs](buglist.cgi?component=Incidents&product=SUSE%20Security%20Incidents&bug_status=__open__)) | | [Version:](page.cgi?id=glossary.html#version "The version field defines the version of the software the bug was found in.") | unspecified | | [Hardware:](page.cgi?id=glossary.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Other Other | |  | | | [Priority](page.cgi?id=glossary.html#priority): | P3 - Medium **Severity**: Normal | | [Target Milestone:](page.cgi?id=glossary.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | --- | | [Assignee:](page.cgi?id=glossary.html#assigned_to "The person in charge of resolving the bug.") | Thomas Renninger | | [QA Contact:](page.cgi?id=glossary.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") | Security Team bot | |  | | | [URL:](page.cgi?id=glossary.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=glossary.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | [Keywords:](describekeywords.cgi "You can add keywords from a defined list to bugs, in order to easily identify and group them.") |  | |  | | | [Depends on:](page.cgi?id=glossary.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") |  | | [Blocks:](page.cgi?id=glossary.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") |  | |  | | Reported: | 2015-06-18 23:41 UTC by Christian Boltz | | --- | --- | | Modified: | 2021-03-02 16:44 UTC ([History](show_activity.cgi?id=935338)) | | CC List: | 6 users (show)  forgotten\_lNYeazqpWh fvogt hare meissner stefan.fent trenn | |  | | | [See Also:](page.cgi?id=glossary.html#see_also "This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with whitespace. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields.") |  | | [Found By:](page.cgi?id=glossary.html#cf_foundby "A custom Drop Down field in this installation of Bugzilla.") | Beta-Customer | | [Services Priority:](page.cgi?id=glossary.html#cf_nts_priority "A custom Free Text field in this installation of Bugzilla.") |  | | [Business Priority:](page.cgi?id=glossary.html#cf_biz_priority "A custom Free Text field in this installation of Bugzilla.") |  | | [Blocker:](page.cgi?id=glossary.html#cf_blocker "A custom Drop Down field in this installation of Bugzilla.") | --- | | [Marketing QA Status:](page.cgi?id=glossary.html#cf_marketing_qa_status "A custom Drop Down field in this installation of Bugzilla.") | --- | | [IT Deployment:](page.cgi?id=glossary.html#cf_it_deployment "A custom Drop Down field in this installation of Bugzilla.") | --- | |  | |  * [Clone This Bug](enter_bug.cgi?cloned_bug_id=935338) |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | | | --- | --- | | [Add an attachment](attachment.cgi?bugid=935338&action=enter) (proposed patch, testcase, etc.) | |   | Note You need to [log in](show_bug.cgi?id=935338&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. | | --- | |  |
| --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=935338#c0)  Christian Boltz   2015-06-18 23:41:07 UTC  ``` dracut uses /tmp/dracut_block_uuid.map as hardcoded filename.  This allows symlink attacks. An attacker (local non-root user) can create /tmp/dracut_block_uuid.map as symlink pointing to any file, and that file will be destroyed/overwritten when mkinitrd runs the next time. ``` [Comment 1](show_bug.cgi?id=935338#c1)  Marcus Meissner   2015-06-19 06:37:21 UTC  ``` in /usr/lib/dracut/modules.d/90crypt/module-setup.sh ``` [Comment 2](show_bug.cgi?id=935338#c2)  Marcus Meissner   2015-06-19 06:39:26 UTC  ``` is in SUSE specific patch:  commit 7f4dea242398cc369ff3fecd599faa00d81a522c Author: Julian Wolf <juwolf@suse.de> Date:   Tue Aug 19 16:23:59 2014 +0200      90crypt: Fixed crypttab_contains() to also work with device path in /etc/crypttab          blkid is not available when this function is called, so block_uuid.map is put into     the initrd, mapping block devices from /etc/crypttab to UUIDs.          This fixes a bug where udev rules were created by mistake as crypttab_contains()     returned false for devices specified by path in /etc/crypttab which resulted in     error messages during boot.          Signed-off-by: Julian Wolf <juwolf@suse.de> ``` [Comment 3](show_bug.cgi?id=935338#c3)  Marcus Meissner   2015-06-19 06:52:03 UTC  ``` Assigned CVE-2015-0794 from SUSE CVE Pool. ``` [Comment 4](show_bug.cgi?id=935338#c4)  Christian Boltz   2015-06-19 11:54:19 UTC  ``` Don't (only) blame Julian - instead, sit down (important safety measure!) and     grep -r /tmp /usr/lib/dracut/modules.d/  This brings up lots of hardcoded filenames in /tmp. Besides allowing more symlink attacks, I even found examples that might allow attackers to get code executed as root (". /tmp/bridge.info") :-/  To get only the code execution listed,     grep -r '\. /tmp' /usr/lib/dracut/modules.d/ ``` [Comment 5](show_bug.cgi?id=935338#c5)  Swamp Workflow Management   2015-06-19 22:00:19 UTC  ``` bugbot adjusting priority ``` [Comment 6](show_bug.cgi?id=935338#c6)  Marcus Meissner   2015-10-13 09:25:17 UTC  ``` is this fixed in the current dracut submission for SLE12? please submit if not. ``` [Comment 7](show_bug.cgi?id=935338#c7)  Thomas Renninger   2015-10-13 11:51:00 UTC  ``` /tmp/bridge.info is in the initrd. You cannot open the initrd and create links in the /tmp directory of the initrd as normal user. So this needs no fixing, but is correct.  /tmp/dracut_block_uuid.map needs adjusting, though. ``` [Comment 8](show_bug.cgi?id=935338#c8)  Fabian Vogt   2015-11-10 10:12:23 UTC  ``` There's also a similiar issue, introduced by 0169-Enabled-Warning-for-failed-kernel-modules-per-defaul.patch with /tmp/dracut_failed_drivers:   From dbcb0516d9c3270138849f444f40237d1b14797e Mon Sep 17 00:00:00 2001  From: Julian Wolf <juwolf@suse.de>  Date: Fri, 24 Oct 2014 17:07:07 +0200  Subject: Enable warning for failed kernel moduiles   Enabled Warning for failed kernel modules per default  and added summary of those to the end of dracut output   References: [bnc#886839](http://bugzilla.suse.com/show_bug.cgi?id=886839)  I fixed those issued by converting the fixed names to mktemp generated ones, fix is currently being prepared for SLE, 13.2 and Factory. ``` [Comment 9](show_bug.cgi?id=935338#c9)  Bernhard Wiedemann   2015-11-10 12:00:09 UTC  ``` This is an autogenerated message for OBS integration: This bug (935338) was mentioned in <https://build.opensuse.org/request/show/343394> 13.2 / dracut ``` [Comment 10](show_bug.cgi?id=935338#c10)  Bernhard Wiedemann   2015-11-10 16:00:25 UTC  ``` This is an autogenerated message for OBS integration: This bug (935338) was mentioned in <https://build.opensuse.org/request/show/343477> 13.2 / dracut ``` [Comment 11](show_bug.cgi?id=935338#c11)  Swamp Workflow Management   2015-11-18 13:16:00 UTC  ``` openSUSE-SU-2015:2022-1: An update that solves one vulnerability and has two fixes is now available.  Category: security (moderate) Bug References: 935338,935993,952491 CVE References: CVE-2015-0794 Sources used: openSUSE 13.2 (src):    dracut-037-17.30.1 ``` [Comment 12](show_bug.cgi?id=935338#c12)  Bernhard Wiedemann   2015-11-19 18:00:09 UTC  ``` This is an autogenerated message for OBS integration: This bug (935338) was mentioned in <https://build.opensuse.org/request/show/345214> Leap:42.1 / dracut ``` [Comment 13](show_bug.cgi?id=935338#c13)  Swamp Workflow Management   2015-11-20 17:10:28 UTC  ``` SUSE-SU-2015:2065-1: An update that solves one vulnerability and has three fixes is now available.  Category: security (moderate) Bug References: 935338,935993,947518,952491 CVE References: CVE-2015-0794 Sources used: SUSE Linux Enterprise Server 12 (src):    dracut-037-51.17.3 SUSE Linux Enterprise Desktop 12 (src):    dracut-037-51.17.3 ``` [Comment 14](show_bug.cgi?id=935338#c14)  Thomas Renninger   2015-11-27 10:00:26 UTC  ``` Fixes available for some days already, see above. ``` [Comment 15](show_bug.cgi?id=935338#c15)  Swamp Workflow Management   2015-12-02 02:10:38 UTC  ``` openSUSE-SU-2015:2165-1: An update that contains security fixes can now be installed.  Category: security (moderate) Bug References: 935338,935563,952491,953035,953361 CVE References:  Sources used: openSUSE Leap 42.1 (src):    dracut-037-68.1 ``` |  |
| --- | --- |

---

* [Format For Printing](show_bug.cgi?format=multiple&id=935338)
* - [XML](show_bug.cgi?ctype=xml&id=935338)
* - [Clone This Bug](enter_bug.cgi?cloned_bug_id=935338)
* - Top of page

* + [Home](./)
  + | [New](enter_bug.cgi)
  + | [Browse](describecomponents.cgi)
  + | [Search](query.cgi)
  + |

    [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
  + | [Reports](report.cgi)
  + |
    [Requests](request.cgi)
  + |
    [IDP Log In](/saml2_login.cgi?idp=IDP&target=show_bug.cgi%3Fid%3D935338)
  + |
    [Forgot Password](https://idp-portal.suse.com/univention/self-service/#page=passwordreset)

+ Legal:
+ [openSUSE](http://en.opensuse.org/Terms_of_site)
+ [SUSE](https://www.suse.com/company/legal/)



=== Content from lists.opensuse.org_a3c0de0a_20250125_061913.html ===


[![openSUSE](https://static.opensuse.org/favicon.svg)
Mailing Lists](/archives/ "openSUSE Mailing Lists")

[Sign In](/accounts/login/?next=/archives/list/bugs%40lists.opensuse.org/message/FFV5ZPQTCS6PV3AJHVHM6Y7DLLPNFANB/)
[Sign Up](/accounts/signup/?next=/archives/list/bugs%40lists.opensuse.org/message/FFV5ZPQTCS6PV3AJHVHM6Y7DLLPNFANB/)

[Manage this list](/manage/lists/bugs.lists.opensuse.org/)
[Sign In](/accounts/login/?next=/archives/list/bugs%40lists.opensuse.org/message/FFV5ZPQTCS6PV3AJHVHM6Y7DLLPNFANB/)
[Sign Up](/accounts/signup/?next=/archives/list/bugs%40lists.opensuse.org/message/FFV5ZPQTCS6PV3AJHVHM6Y7DLLPNFANB/)

×
#### Keyboard Shortcuts

### Thread View

* `j`: Next unread message
* `k`: Previous unread message
* `j a`: Jump to all threads* `j l`: Jump to MailingList overview

[thread](/archives/list/bugs%40lists.opensuse.org/thread/FFV5ZPQTCS6PV3AJHVHM6Y7DLLPNFANB/#FFV5ZPQTCS6PV3AJHVHM6Y7DLLPNFANB)

# [Bug 923486] find utils test-lock

![](https://seccdn.libravatar.org/avatar/3035b38ff33cf86f480bb169b8500b80.jpg?s=120&d=mm&r=g)
## [bugzilla\_noreply＠novell.com](/archives/users/91513b88fb904782975c23b54f2df641/ "See the profile for bugzilla_noreply＠novell.com")

26 Jun
2015

26 Jun
'15

08:50

<http://bugzilla.suse.com/show_bug.cgi?id=923486>
<http://bugzilla.suse.com/show_bug.cgi?id=923486#c26>
--- Comment #26 from Michel Normand <normand@linux.vnet.ibm.com> ---
(In reply to Takashi Iwai from comment #25)

...
> This looks to me more like a problem of glibc. Or possibly kernel, but
> glibc is the first suspect.
>
> Could you check whether the older glibc (e.g. SLE12) causes the same problem?

\* on my opensuse\_13\_2\_ppc64le guest do an osc build of findutils
and used generated test-lock outside and inside chroot environment
as detailed below.
\* Conclusion:
with glibc-2.19-16.2.2 pass with old libraries.
with glibc-2.21-6.25 failure with last tumbleweed libraries.
===
=== old libraries:
===
[michel@opensuse\_13\_2\_ppc64le :~/work/openSUSE:Factory:PowerPC/findutils]
$rpm -qa |grep glibc
glibc-2.19-16.2.2.ppc64le
glibc-devel-2.19-16.2.2.ppc64le
glibc-extra-2.19-16.2.2.ppc64le
glibc-locale-2.19-16.2.2.ppc64le
linux-glibc-devel-3.16-2.3.1.noarch
$cd $target/home/abuild/rpmbuild/BUILD/findutils-4.5.14/tests/
[michel@opensuse\_13\_2\_ppc64le:/mnt/disk3/build-root/standard-ppc64le/home/abuild/rpmbuild/BUILD/findutils-4.5.14/tests]
$idx=1; while test 1 ; do echo "=== trial: $idx"; ./test-lock || break;
((idx++)); done
...
=== trial: 268
set pragma: USE\_POSIX\_THREADS, USE\_POSIX\_THREADS\_WEAK, HAVE\_PTHREAD\_RWLOCK,
PTHREAD\_RWLOCK\_INITIALIZER, HAVE\_PTHREAD\_MUTEX\_RECURSIVE,
Starting test\_lock ... OK
Starting test\_rwlock ... OK
Starting test\_recursive\_lock ...^C <= stopped manually
===
=== new libraries (in chroot env)
===
abuild@opensuse\_13\_2\_ppc64le:~/rpmbuild/BUILD/findutils-4.5.14/tests> ldd
./test-lock
linux-vdso64.so.1 (0x00003fff81ef0000)
libpthread.so.0 => /lib64/libpthread.so.0 (0x00003fff81ea0000)
libc.so.6 => /lib64/libc.so.6 (0x00003fff81cd0000)
/lib64/ld64.so.2 (0x0000000052400000)
abuild@opensuse\_13\_2\_ppc64le:~/rpmbuild/BUILD/findutils-4.5.14/tests> rpm -qa
|grep glibc
glibc-2.21-6.25.ppc64le
glibc-devel-2.21-6.25.ppc64le
glibc-locale-2.21-6.25.ppc64le
linux-glibc-devel-4.0-1.74.noarch
abuild@opensuse\_13\_2\_ppc64le:~/rpmbuild/BUILD/findutils-4.5.14/tests> idx=1;
while test 1 ; do echo "=== trial: $idx:"; ./test-lock || break; ((idx++));
done
...
=== trial: 14:
set pragma: USE\_POSIX\_THREADS, USE\_POSIX\_THREADS\_WEAK, HAVE\_PTHREAD\_RWLOCK,
PTHREAD\_RWLOCK\_INITIALIZER, HAVE\_PTHREAD\_MUTEX\_RECURSIVE,
Starting test\_lock ... OK
Starting test\_rwlock ...check\_accounts: sum=4006, expected 4000
check\_accounts: sum=4006, expected 4000
check\_accounts: sum=4006, expected 4000
check\_accounts: sum=4006, expected 4000
check\_accounts: sum=4006, expected 4000
Aborted
===
--
You are receiving this mail because:
You are on the CC list for the bug.

Attachments:

* [attachment.htm](/archives/list/bugs%40lists.opensuse.org/message/FFV5ZPQTCS6PV3AJHVHM6Y7DLLPNFANB/attachment/2/attachment.htm)
  (text/html — 3.4 KB)

[0](#like "You must be logged-in to vote.")
[0](#dislike "You must be logged-in to vote.")

Reply

[Sign in to reply online](/accounts/login/?next=/archives/list/bugs%40lists.opensuse.org/message/FFV5ZPQTCS6PV3AJHVHM6Y7DLLPNFANB/)
Use email software

[Back to the thread](/archives/list/bugs%40lists.opensuse.org/thread/FFV5ZPQTCS6PV3AJHVHM6Y7DLLPNFANB/#FFV5ZPQTCS6PV3AJHVHM6Y7DLLPNFANB)

[Back to the list](/archives/list/bugs%40lists.opensuse.org/)

![HyperKitty](/static/hyperkitty/img/logo.png)
Powered by [HyperKitty](http://hyperkitty.readthedocs.org) version 1.3.12.



=== Content from lists.opensuse.org_297fa2bf_20250125_061914.html ===


[![openSUSE](https://static.opensuse.org/favicon.svg)
Mailing Lists](/archives/ "openSUSE Mailing Lists")

[Sign In](/accounts/login/?next=/archives/list/updates%40lists.opensuse.org/message/UMB2O2Q7V3RPXMJOGSBAOIXDOIM3VACD/)
[Sign Up](/accounts/signup/?next=/archives/list/updates%40lists.opensuse.org/message/UMB2O2Q7V3RPXMJOGSBAOIXDOIM3VACD/)

[Manage this list](/manage/lists/updates.lists.opensuse.org/)
[Sign In](/accounts/login/?next=/archives/list/updates%40lists.opensuse.org/message/UMB2O2Q7V3RPXMJOGSBAOIXDOIM3VACD/)
[Sign Up](/accounts/signup/?next=/archives/list/updates%40lists.opensuse.org/message/UMB2O2Q7V3RPXMJOGSBAOIXDOIM3VACD/)

×
#### Keyboard Shortcuts

### Thread View

* `j`: Next unread message
* `k`: Previous unread message
* `j a`: Jump to all threads* `j l`: Jump to MailingList overview

[thread](/archives/list/updates%40lists.opensuse.org/thread/UMB2O2Q7V3RPXMJOGSBAOIXDOIM3VACD/#UMB2O2Q7V3RPXMJOGSBAOIXDOIM3VACD)

# openSUSE-SU-2015:2022-1: moderate: Security update for dracut

![](https://seccdn.libravatar.org/avatar/099a17325bdf082b643d1a6bbacde279.jpg?s=120&d=mm&r=g)
## [opensuse-security＠opensuse.org](/archives/users/1b72def497ef4503896cd7a5fe9fb8e0/ "See the profile for opensuse-security＠opensuse.org")

18 Nov
2015

18 Nov
'15

13:15

openSUSE Security Update: Security update for dracut
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
Announcement ID: openSUSE-SU-2015:2022-1
Rating: moderate
References: #935338 #935993 #952491
Cross-References: CVE-2015-0794
Affected Products:
openSUSE 13.2
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
An update that solves one vulnerability and has two fixes
is now available.
Description:
The dracut package was updated to fix the following security and non
security issues:
- CVE-2015-0794: Use mktemp instead of hardcoded filenames, possible
vulnerability (bnc#935338).
- Always install mdraid modules (boo#935993).
- Add notice when dracut failed to install modules (bsc#952491).
Patch Instructions:
To install this openSUSE Security Update use YaST online\_update.
Alternatively you can run the command listed for your product:
- openSUSE 13.2:
zypper in -t patch openSUSE-2015-765=1
To bring your system up-to-date, use "zypper patch".
Package List:
- openSUSE 13.2 (i586 x86\_64):
dracut-037-17.30.1
dracut-debuginfo-037-17.30.1
dracut-debugsource-037-17.30.1
dracut-fips-037-17.30.1
References:
<https://www.suse.com/security/cve/CVE-2015-0794.html>
<https://bugzilla.suse.com/935338>
<https://bugzilla.suse.com/935993>
<https://bugzilla.suse.com/952491>

[0](#like "You must be logged-in to vote.")
[0](#dislike "You must be logged-in to vote.")

Reply

[Sign in to reply online](/accounts/login/?next=/archives/list/updates%40lists.opensuse.org/message/UMB2O2Q7V3RPXMJOGSBAOIXDOIM3VACD/)
Use email software

[Back to the thread](/archives/list/updates%40lists.opensuse.org/thread/UMB2O2Q7V3RPXMJOGSBAOIXDOIM3VACD/#UMB2O2Q7V3RPXMJOGSBAOIXDOIM3VACD)

[Back to the list](/archives/list/updates%40lists.opensuse.org/)

![HyperKitty](/static/hyperkitty/img/logo.png)
Powered by [HyperKitty](http://hyperkitty.readthedocs.org) version 1.3.12.



=== Content from lists.opensuse.org_af5dc5c7_20250125_061914.html ===


[![openSUSE](https://static.opensuse.org/favicon.svg)
Mailing Lists](/archives/ "openSUSE Mailing Lists")

[Sign In](/accounts/login/?next=/archives/list/bugs%40lists.opensuse.org/message/OSEIHD7IA2L377XK5YKULT5PZA2EAT52/)
[Sign Up](/accounts/signup/?next=/archives/list/bugs%40lists.opensuse.org/message/OSEIHD7IA2L377XK5YKULT5PZA2EAT52/)

[Manage this list](/manage/lists/bugs.lists.opensuse.org/)
[Sign In](/accounts/login/?next=/archives/list/bugs%40lists.opensuse.org/message/OSEIHD7IA2L377XK5YKULT5PZA2EAT52/)
[Sign Up](/accounts/signup/?next=/archives/list/bugs%40lists.opensuse.org/message/OSEIHD7IA2L377XK5YKULT5PZA2EAT52/)

×
#### Keyboard Shortcuts

### Thread View

* `j`: Next unread message
* `k`: Previous unread message
* `j a`: Jump to all threads* `j l`: Jump to MailingList overview

[thread](/archives/list/bugs%40lists.opensuse.org/thread/QQRJRMWLXYW3TO656LTKWFFIHORSZU3X/#OSEIHD7IA2L377XK5YKULT5PZA2EAT52)

# [Bug 936206] accounts-daemon segfault when inccorrect passwd provided

![](https://seccdn.libravatar.org/avatar/3035b38ff33cf86f480bb169b8500b80.jpg?s=120&d=mm&r=g)
## [bugzilla\_noreply＠novell.com](/archives/users/91513b88fb904782975c23b54f2df641/ "See the profile for bugzilla_noreply＠novell.com")

26 Jun
2015

26 Jun
'15

09:13

<http://bugzilla.opensuse.org/show_bug.cgi?id=936206>
<http://bugzilla.opensuse.org/show_bug.cgi?id=936206#c1>
--- Comment #1 from Martin Pluskal <mpluskal@suse.com> ---
Created attachment 639343
--> <http://bugzilla.opensuse.org/attachment.cgi?id=639343&action=edit>
core
--
You are receiving this mail because:
You are on the CC list for the bug.

Attachments:

* [attachment.htm](/archives/list/bugs%40lists.opensuse.org/message/OSEIHD7IA2L377XK5YKULT5PZA2EAT52/attachment/2/attachment.htm)
  (text/html — 1.1 KB)

[0](#like "You must be logged-in to vote.")
[0](#dislike "You must be logged-in to vote.")

Reply

[Sign in to reply online](/accounts/login/?next=/archives/list/bugs%40lists.opensuse.org/message/OSEIHD7IA2L377XK5YKULT5PZA2EAT52/)
Use email software

[Back to the thread](/archives/list/bugs%40lists.opensuse.org/thread/QQRJRMWLXYW3TO656LTKWFFIHORSZU3X/#OSEIHD7IA2L377XK5YKULT5PZA2EAT52)

[Back to the list](/archives/list/bugs%40lists.opensuse.org/)

![HyperKitty](/static/hyperkitty/img/logo.png)
Powered by [HyperKitty](http://hyperkitty.readthedocs.org) version 1.3.12.



=== Content from www.suse.com_1cc2ac38_20250126_064056.html ===

![](/assets/img/1px-transparent.gif)
![](/assets/img/1px-transparent.gif)

[![SUSE Logo](https://www.suse.com/assets/img/suse-white-logo-green.svg)
![SUSE Federal Logo](https://www.suse.com/assets/img/fed_logo.png)](https://www.suse.com)
Exit SUSE Federal  >

[Customer Center](https://scc.suse.com/home)

Account

Hello
[Update Your Account](https://www.suse.com/account/update/)
[Log Out](https://www.suse.com/saml2/logout/)

[Login](https://www.suse.com/saml2/login/)
[Create Account](https://www.suse.com/account/create/)
[Update Your Account](https://www.suse.com/account/update/)

English

Language
[Deutsch](https://www.suse.com/de-de/security/cve/CVE-2015-0794.html)
[English](https://www.suse.com/security/cve/CVE-2015-0794.html)
[EspaÃ±ol](https://www.suse.com/es-es/security/cve/CVE-2015-0794.html)
[FranÃ§ais](https://www.suse.com/fr-fr/security/cve/CVE-2015-0794.html)
[ä¸­æ(ç®ä½)](https://www.suse.com/zh-cn/security/cve/CVE-2015-0794.html)
[æ¥æ¬èª](https://www.suse.com/ja-jp/security/cve/CVE-2015-0794.html)
[íêµ­ì´](https://www.suse.com/ko-kr/security/cve/CVE-2015-0794.html)
[PortuguÃªs (Brasil)](https://www.suse.com/pt-br/security/cve/CVE-2015-0794.html)

[Shop](https://www.suse.com/shop/)

[View Cart](https://buy.suse.com/store?Action=DisplayPage&Env=BASE&SiteID=suse&id=ThreePgCheckoutShoppingCartPage)

[![SUSE Logo](https://www.suse.com/assets/img/suse-white-logo-green.svg)](https://www.suse.com)
Exit SUSE Federal  >

[Shop](https://www.suse.com/shop/)
[SUSECON 25](https://www.suse.com/susecon/)
[Customer](https://scc.suse.com/home)

Federal Solutions

Products

Solutions

Support

Partners

Communities

About

[Contact Us](https://www.suse.com/contact/)

[Free Downloads](https://www.suse.com/products/)

 Back

 Back
[![Icon](https://www.suse.com/assets/img/icons/Linux-one-color.svg)
Linux](https://www.suse.com/solutions/business-critical-linux/ "Linux")

* [SUSE Linux Enterprise Server](https://www.suse.com/products/server/)
* [SUSE Linux Enterprise Server

  for SAP Applications](https://www.suse.com/products/sles-for-sap/)
* [SUSE Linux Micro](https://www.suse.com/products/micro/)
* [SUSE Multi-Linux Support](https://www.suse.com/products/multi-linux-support/)
* [SUSE Multi-Linux Manager](https://www.suse.com/products/multi-linux-manager/)

[![Icon](https://www.suse.com/assets/img/icons/Cloud-native-one-color.svg)
Cloud Native](https://www.suse.com/solutions/enterprise-container-management/ "Cloud Native")

* [SUSE Rancher Prime](https://www.suse.com/products/rancher/)
* [Virtualization (Harvester)](https://www.suse.com/products/rancher/virtualization/)
* [Storage (Longhorn)](https://www.suse.com/products/rancher/storage/)
* [Security (NeuVector)](https://www.suse.com/products/rancher/security/)
* [Observability](https://www.suse.com/solutions/observability/)
* [SUSE Cloud Observability](https://www.suse.com/products/cloud/observability/)

[![Icon](https://www.suse.com/assets/img/icons/Edge-one-color.svg)
Edge](https://www.suse.com/solutions/edge-computing/ "Edge")

* [SUSE Edge](https://www.suse.com/products/edge/)
* [SUSE Edge for Telco](https://www.suse.com/products/edge-for-telco/)

[![Icon](https://www.suse.com/assets/img/icons/AI-one-color.svg)
AI](https://www.suse.com/solutions/edge-computing/ "AI")

* [SUSE AI](https://www.suse.com/products/ai/)

[All Products](https://www.suse.com/products/)

 Back
Foundational

* [![Linux](https://www.suse.com/assets/img/icons/Linux-one-color.svg)](https://www.suse.com/solutions/linux/)
* [![Cloud Native](https://www.suse.com/assets/img/icons/Cloud-native-one-color.svg)](https://www.suse.com/solutions/cloud-native/)
* [![Edge](https://www.suse.com/assets/img/icons/Edge-one-color.svg)](https://www.suse.com/solutions/edge/)
* [![AI](https://www.suse.com/assets/img/icons/AI-one-color.svg)](https://www.suse.com/solutions/ai/)

Solutions

* [Run SAP

  Run & secure cloud and on-prem workloads](https://www.suse.com/solutions/run-sap-solutions/)
* [Public Cloud

  Accelerate and innovate across your cloud environment](https://www.suse.com/solutions/public-cloud/)
* [Observability

  Rapid, full-stack visibility in under 5 minutes](https://www.suse.com/solutions/observability/)
* [Security

  Secure your digital enterprise](https://www.suse.com/solutions/security/)

Industries

* [Automotive](https://www.suse.com/sector/automotive/)
* [Telecom](https://www.suse.com/sector/telco/)
* [Banking and Financial Systems](https://www.suse.com/sector/banking-financial-services/)
* [Healthcare](https://www.suse.com/sector/healthcare/)
* [Manufacturing](https://www.suse.com/sector/manufacturing/)
* [Retail](https://www.suse.com/sector/retail/)
* [Technology & Software](https://www.suse.com/sector/technology/)
* [Federal](https://www.ranchergovernment.com/)
* [Pharma](https://www.suse.com/sector/pharma/)
* [Energy](https://www.suse.com/sector/energy/)

 Back
Support

* [Product Support

  SUSE Customer Center](https://scc.suse.com/home)
* [Premium Support Services

  Dedicated support services from a premium team](https://www.suse.com/services/premium/)
* [Long Term Services Support

  Stay on your existing product version](https://www.suse.com/products/long-term-service-pack-support/)
* [Renew Your Support Subscription

  Partners with cloud providers](https://www.suse.com/renewals/)
* [![AWS](https://www.suse.com/assets/img/icons/320px-Amazon3.svg)](https://aws.amazon.com/marketplace/search/results?searchTerms=suse)
* [![Microsoft Azure](https://www.suse.com/assets/img/icons/Microsoft_Azure3.svg)](https://azure.microsoft.com/solutions/linux-on-azure/suse/)
* [![Google](https://www.suse.com/assets/img/icons/lockup_GoogleCloud_FullColor_rgb_139x24px 1.svg)](https://console.cloud.google.com/marketplace/browse?q=SUSE)

Services

* [Consulting Services](https://www.suse.com/services/)
* [Training & Certification](https://www.suse.com/training/)
* [Premium Technical Advisory Services](https://www.suse.com/services/premium-technical-advisory/)

Resources

* [SUSE Support User Guide](https://www.suse.com/support/handbook/)
* [Patches & Updates](https://download.suse.com/patch/finder/)
* [Product Documentation](https://documentation.suse.com/)
* [Knowledgebase](https://www.suse.com/support/kb/)
* [Product Support Life Cycle](https://www.suse.com/lifecycle/)
* [Package Hub

  Community packages for SUSE Linux Enterprise Server](https://packagehub.suse.com/)
* [Driver Search](https://drivers.suse.com/)
* [Support Forums](https://forums.suse.com/forum.php)
* [Developer Services](https://www.suse.com/services/support-offerings/developer-services/)
* [Beta Program](https://www.suse.com/betaprogram/)
* [Security](https://www.suse.com/support/security/)

 Back
Partners

* [Partner Program](https://www.suse.com/partners/)
* [Find a Partner](https://www.suse.com/partners/find-partner/)
* [Become a Partner](https://www.suse.com/partners/become-partner/)
* [Login to the SUSE Partner Portal](https://partner.suse.com/)

 Back
Communities

* [Blog](https://www.suse.com/c/blog/)
* [Forum](https://forums.suse.com/forum.php)
* [Open Source Projects](http://opensource.suse.com/)
* [openSUSE.org](https://www.opensuse.org/)

 Back
About

* [About](https://www.suse.com/company/about/)
* [Leadership](https://www.suse.com/leadership/)
* [Careers](https://jobs.suse.com/)
* [Newsroom](https://www.suse.com/news/)
* [Success Stories](https://www.suse.com/success/)
* [Investor Relations](https://ir.suse.com/)
* [Social Impact](https://www.suse.com/esg/)
* [SUSE Logo and Brand](https://brand.suse.com/)
* [Events](https://www.suse.com/events/)
* [Merchandise Store](https://www.susemerchandise.com/)

# CVE-2015-0794

## Common Vulnerabilities and Exposures

[[Previous]](CVE-2015-0787.html) [[Index]](index.html) [[Next]](CVE-2015-0796.html)

### Upstream information

[CVE-2015-0794 at MITRE](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2015-0794)

#### Description

modules.d/90crypt/module-setup.sh in the dracut package before 037-17.30.1 in openSUSE 13.2 allows local users to have unspecified impact via a symlink attack on /tmp/dracut\_block\_uuid.map.

---

### [SUSE information](https://www.suse.com/c/cve-pages-self-help-security-issues-suse-linux-enterprise/)

Overall state of this security issue: Resolved

This issue is currently rated as having [moderate](https://www.suse.com/support/security/rating/) severity.

[CVSS v2 Scores](https://nvd.nist.gov/cvss.cfm)
|  | National Vulnerability Database |
| Base Score | 3.6 |
| Vector | AV:L/AC:L/Au:N/C:N/I:P/A:P |
| Access Vector | Local |
| Access Complexity | Low |
| Authentication | None |
| Confidentiality Impact | None |
| Integrity Impact | Partial |
| Availability Impact | Partial |

SUSE Bugzilla entries: [923755](https://bugzilla.suse.com/show_bug.cgi?id=923755) [RESOLVED / FIXED], [935338](https://bugzilla.suse.com/show_bug.cgi?id=935338) [RESOLVED / FIXED], [963976](https://bugzilla.suse.com/show_bug.cgi?id=963976) [RESOLVED / FIXED]
### SUSE Security Advisories:

* [SUSE-SU-2015:2065-1](https://lists.suse.com/pipermail/sle-security-updates/2015-November/001690.html), published Fri Nov 20 10:10:17 MST 2015
openSUSE-SU-2015:2022-1
### List of released packages

| Product(s) | Fixed package version(s) | References |
| --- | --- | --- |
| SUSE Linux Enterprise Desktop 12 | * `dracut >= 037-51.17.3` | Patchnames: SUSE-SLE-DESKTOP-12-2015-877 |
| SUSE Linux Enterprise Server 12 SUSE Linux Enterprise Server for SAP Applications 12 | * `dracut >= 037-51.17.3` * `dracut-fips >= 037-51.17.3` | Patchnames: SUSE-SLE-SERVER-12-2015-877 |

---

### Status of this issue by product and package

Please note that this evaluation state might be work in progress, incomplete or outdated. Also information for service packs in the LTSS phase is only included for issues meeting the LTSS criteria. If in doubt, feel free to contact us for clarification. The updates are grouped by state of their lifecycle. SUSE product lifecycles are documented [on the lifecycle page](https://www.suse.com/lifecycle/).

| Product(s) | Source package | State |
| --- | --- | --- |
| Products under Long Term Service Pack support and receiving important and critical security fixes. | | |
| SLES15-EC2-CHOST-HVM-BYOS | dracut | Affected |
| SLES15-SP1-CHOST-BYOS-Azure | dracut | Affected |
| SLES15-SP1-CHOST-BYOS-EC2 | dracut | Affected |
| SLES15-SP1-CHOST-BYOS-GCE | dracut | Affected |
| SUSE Linux Enterprise Server 15-ESPOS | dracut | Unsupported |
| SUSE Linux Enterprise Server Business Critical Linux 15 SP1 | dracut | Unsupported |
| Products past their end of life and not receiving proactive updates anymore. | | |
| SUSE CaaS Platform 4.0 | dracut | Affected |
| SUSE Enterprise Storage 6 | dracut | Affected |
| SUSE Linux Enterprise Desktop 12 | dracut | Released |
| SUSE Linux Enterprise Desktop 12 SP1 | dracut | Already fixed |
| SUSE Linux Enterprise Desktop 12 SP2 | dracut | Already fixed |
| SUSE Linux Enterprise Desktop 12 SP4 | dracut | Affected |
| SUSE Linux Enterprise Desktop 15 | dracut | Affected |
| SUSE Linux Enterprise Desktop 15 SP1 | dracut | Affected |
| SUSE Linux Enterprise High Performance Computing 15 | dracut | Affected |
| SUSE Linux Enterprise High Performance Computing 15 SP1 | dracut | Affected |
| SUSE Linux Enterprise High Performance Computing 15 SP1-ESPOS | dracut | Affected |
| SUSE Linux Enterprise High Performance Computing 15 SP1-LTSS | dracut | Affected |
| SUSE Linux Enterprise High Performance Computing 15-ESPOS | dracut | Affected |
| SUSE Linux Enterprise High Performance Computing 15-LTSS | dracut | Unsupported |
| SUSE Linux Enterprise Module for Basesystem 15 | dracut | Affected |
| SUSE Linux Enterprise Module for Basesystem 15 SP1 | dracut | Affected |
| SUSE Linux Enterprise Point of Sale 12 SP2-CLIENT | dracut | Already fixed |
| SUSE Linux Enterprise Server 12 | dracut | Released |
| SUSE Linux Enterprise Server 12 SP1 | dracut | Already fixed |
| SUSE Linux Enterprise Server 12 SP1-LTSS | dracut | Already fixed |
| SUSE Linux Enterprise Server 12 SP2 | dracut | Already fixed |
| SUSE Linux Enterprise Server 12 SP2-BCL | dracut | Already fixed |
| SUSE Linux Enterprise Server 12 SP2-ESPOS | dracut | Already fixed |
| SUSE Linux Enterprise Server 12 SP2-LTSS | dracut | Already fixed |
| SUSE Linux Enterprise Server 12 SP4 | dracut | Affected |
| SUSE Linux Enterprise Server 12 SP4-ESPOS | dracut | Affected |
| SUSE Linux Enterprise Server 12 SP4-LTSS | dracut | Affected |
| SUSE Linux Enterprise Server 12-LTSS | dracut | Released |
| SUSE Linux Enterprise Server 15 | dracut | Affected |
| SUSE Linux Enterprise Server 15 SP1 | dracut | Affected |
| SUSE Linux Enterprise Server 15 SP1-BCL | dracut | Affected |
| SUSE Linux Enterprise Server 15 SP1-LTSS | dracut | Affected |
| SUSE Linux Enterprise Server 15-LTSS | dracut | Unsupported |
| SUSE Linux Enterprise Server for Raspberry Pi 12 SP2 | dracut | Already fixed |
| SUSE Linux Enterprise Server for SAP Applications 12 | dracut | Released |
| SUSE Linux Enterprise Server for SAP Applications 12 SP1 | dracut | Already fixed |
| SUSE Linux Enterprise Server for SAP Applications 12 SP2 | dracut | Already fixed |
| SUSE Linux Enterprise Server for SAP Applications 12 SP4 | dracut | Affected |
| SUSE Linux Enterprise Server for SAP Applications 15 | dracut | Unsupported |
| SUSE Linux Enterprise Server for SAP Applications 15 SP1 | dracut | Affected |
| SUSE Manager Proxy 4.0 | dracut | Unsupported |
| SUSE Manager Retail Branch Server 4.0 | dracut | Unsupported |
| SUSE Manager Server 4.0 | dracut | Unsupported |
| SUSE OpenStack Cloud 7 | dracut | Already fixed |
| SUSE OpenStack Cloud 9 | dracut | Affected |
| SUSE OpenStack Cloud Crowbar 9 | dracut | Affected |

---

### SUSE Timeline for this CVE

CVE page created: Fri Jun 19 09:23:23 2015

CVE page last modified: Tue Dec 17 19:55:43 2024

![SUSE Logo](https://www.suse.com/assets/img/suse-white-logo-green.svg)

* [Careers](https://jobs.suse.com/ "Careers")
* [Legal](https://www.suse.com/company/legal/ "Legal")
* [Anti-Slavery Statement](https://links.imagerelay.com/cdn/3404/ql/811b4f2364b94ff18eb15e315b3e263d/suse_anti_slavery_statement.pdf "Anti-Slavery Statement")
* [Anti-slavery](https://www.suse.com/legal/anti-slavery/ "Anti-slavery")
* [About](https://www.suse.com/company/about/ "About")
* [Communications Preferences](https://www.suse.com/company/subscribe/ "Communications Preferences")
* [Contact Us](https://www.suse.com/contact/ "Contact Us")
* [Let's Chat](#footer-chat-now "Let's Chat")

* [![](https://www.suse.com/assets/img/youtube.png)](https://www.youtube.com/channel/UCHTfqIzPKz4f_dri36lAQGA%20)
* [![](https://www.suse.com/assets/img/fn-fbook-ico-white.png)](https://www.facebook.com/SUSEWorldwide)
* [![](https://www.suse.com/assets/img/logo-black.png)](https://www.twitter.com/SUSE)
* [![](https://www.suse.com/assets/img/fn-link-ico-white.png)](https://www.linkedin.com/company/suse)
* ![WeChat](https://www.suse.com/assets/img/icons/WeChat.png)

![WeChat QR](https://www.suse.com/assets/img/icons/qrcode_for_gh_91d12717ed53_430.jpg)

Support: [Open a Support Case](https://www.suse.com/support/handbook/#open)

©  ©SUSE, All Rights Reserved

Cookie Settings

[Privacy Policy](https://www.suse.com/company/legal/) and
[Cookie Policy](https://www.suse.com/company/legal/cookies-policy/)

X

×



=== Content from bugzilla.suse.com_8076354b_20250126_064055.html ===


| Bugzilla – Bug 935993 | Kernel-desktop x86\_64 4.1 freezes at beginning of boot process | Last modified: 2021-03-02 16:44:45 UTC |
| --- | --- | --- |

|  |
| --- |

* [Home](./)
* | [New](enter_bug.cgi)
* | [Browse](describecomponents.cgi)
* | [Search](query.cgi)
* |

  [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
* | [Reports](report.cgi)
* |
  [Requests](request.cgi)
* |
  [IDP Log In](/saml2_login.cgi?idp=IDP&target=show_bug.cgi%3Fid%3D935993)
* |
  [Forgot Password](https://idp-portal.suse.com/univention/self-service/#page=passwordreset)

[**Bug 935993**](show_bug.cgi?id=935993)
- Kernel-desktop x86\_64 4.1 freezes at beginning of boot process

[Summary:](page.cgi?id=glossary.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
Kernel-desktop x86\_64 4.1 freezes at beginning of boot process

| | [Status](page.cgi?id=status_resolution_matrix.html): | RESOLVED FIXED | | --- | --- | |  | | | [Alias:](page.cgi?id=glossary.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | None | |  | | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components. Select a Classification to narrow down this list.") | openSUSE Tumbleweed | | [Classification:](page.cgi?id=glossary.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | openSUSE | | [Component:](describecomponents.cgi?product=openSUSE Tumbleweed "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | Kernel ([show other bugs](buglist.cgi?component=Kernel&product=openSUSE%20Tumbleweed&bug_status=__open__)) | | [Version:](page.cgi?id=glossary.html#version "The version field defines the version of the software the bug was found in.") | Current | | [Hardware:](page.cgi?id=glossary.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | x86-64 SUSE Other | |  | | | [Priority](page.cgi?id=glossary.html#priority): | P5 - None **Severity**: Critical ([vote](page.cgi?id=voting/user.html&bug_id=935993#vote_935993)) | | [Target Milestone:](page.cgi?id=glossary.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | --- | | [Assignee:](page.cgi?id=glossary.html#assigned_to "The person in charge of resolving the bug.") | Thomas Renninger | | [QA Contact:](page.cgi?id=glossary.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") | E-mail List | |  | | | [URL:](page.cgi?id=glossary.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=glossary.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | [Keywords:](describekeywords.cgi "You can add keywords from a defined list to bugs, in order to easily identify and group them.") |  | |  | | | [Depends on:](page.cgi?id=glossary.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") |  | | [Blocks:](page.cgi?id=glossary.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") |  | |  | | Reported: | 2015-06-25 06:35 UTC by Walther Pelser | | --- | --- | | Modified: | 2021-03-02 16:44 UTC ([History](show_activity.cgi?id=935993)) | | CC List: | 5 users (show)  fvogt nfbrown tiwai trenn w.pelser | |  | | | [See Also:](page.cgi?id=glossary.html#see_also "This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with whitespace. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields.") |  | | [Found By:](page.cgi?id=glossary.html#cf_foundby "A custom Drop Down field in this installation of Bugzilla.") | --- | | [Services Priority:](page.cgi?id=glossary.html#cf_nts_priority "A custom Free Text field in this installation of Bugzilla.") |  | | [Business Priority:](page.cgi?id=glossary.html#cf_biz_priority "A custom Free Text field in this installation of Bugzilla.") |  | | [Blocker:](page.cgi?id=glossary.html#cf_blocker "A custom Drop Down field in this installation of Bugzilla.") | --- | | [Marketing QA Status:](page.cgi?id=glossary.html#cf_marketing_qa_status "A custom Drop Down field in this installation of Bugzilla.") | --- | | [IT Deployment:](page.cgi?id=glossary.html#cf_it_deployment "A custom Drop Down field in this installation of Bugzilla.") | --- | |  | |  * [Clone This Bug](enter_bug.cgi?cloned_bug_id=935993) |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | | | --- | --- | | [**boot message**](attachment.cgi?id=639414 "View the content of the attachment") (115.30 KB, text/plain)  [2015-06-27 08:16 UTC](#attach_639414 "Go to the comment associated with the attachment"), Walther Pelser | [Details](attachment.cgi?id=639414&action=edit) | | [**USB-Stick lugged in later**](attachment.cgi?id=639415 "View the content of the attachment") (115.67 KB, text/plain)  [2015-06-27 08:18 UTC](#attach_639415 "Go to the comment associated with the attachment"), Walther Pelser | [Details](attachment.cgi?id=639415&action=edit) | | [**hwinfo how?**](attachment.cgi?id=639416 "View the content of the attachment") (2.07 KB, text/plain)  [2015-06-27 08:20 UTC](#attach_639416 "Go to the comment associated with the attachment"), Walther Pelser | [Details](attachment.cgi?id=639416&action=edit) | | [**Yast-hwinfo**](attachment.cgi?id=639417 "View the content of the attachment") (538.09 KB, text/plain)  [2015-06-27 08:22 UTC](#attach_639417 "Go to the comment associated with the attachment"), Walther Pelser | [Details](attachment.cgi?id=639417&action=edit) | | [**recovery mode.jpeg**](attachment.cgi?id=639423 "View the content of the attachment") (488.74 KB, image/jpeg)  [2015-06-27 13:17 UTC](#attach_639423 "Go to the comment associated with the attachment"), Walther Pelser | [Details](attachment.cgi?id=639423&action=edit) | | [**journalctl.jpeg**](attachment.cgi?id=639424 "View the content of the attachment") (792.42 KB, image/jpeg)  [2015-06-27 13:18 UTC](#attach_639424 "Go to the comment associated with the attachment"), Walther Pelser | [Details](attachment.cgi?id=639424&action=edit) | | [**".config"**](attachment.cgi?id=639425 "View the content of the attachment") (124.24 KB, application/x-config)  [2015-06-27 15:18 UTC](#attach_639425 "Go to the comment associated with the attachment"), Walther Pelser | [Details](attachment.cgi?id=639425&action=edit) | | [**config-4.1.0-1-desktop.old**](attachment.cgi?id=639426 "View the content of the attachment") (124.24 KB, application/x-trash)  [2015-06-27 15:19 UTC](#attach_639426 "Go to the comment associated with the attachment"), Walther Pelser | [Details](attachment.cgi?id=639426&action=edit) | | [**partitions.txt**](attachment.cgi?id=639427 "View the content of the attachment") (734 bytes, text/plain)  [2015-06-27 15:20 UTC](#attach_639427 "Go to the comment associated with the attachment"), Walther Pelser | [Details](attachment.cgi?id=639427&action=edit) | | [**dracut.log-20150625**](attachment.cgi?id=639553 "View the content of the attachment") (80.22 KB, text/plain)  [2015-06-29 14:44 UTC](#attach_639553 "Go to the comment associated with the attachment"), Walther Pelser | [Details](attachment.cgi?id=639553&action=edit) | | [**journalctl screenshot**](attachment.cgi?id=640107 "View the content of the attachment") (794.16 KB, image/jpeg)  [2015-07-03 16:57 UTC](#attach_640107 "Go to the comment associated with the attachment"), Walther Pelser | [Details](attachment.cgi?id=640107&action=edit) | | [**journalctl screenshot 2**](attachment.cgi?id=640108 "View the content of the attachment") (777.48 KB, image/jpeg)  [2015-07-03 16:58 UTC](#attach_640108 "Go to the comment associated with the attachment"), Walther Pelser | [Details](attachment.cgi?id=640108&action=edit) | | [**journalctl screenshot 3**](attachment.cgi?id=640109 "View the content of the attachment") (419.44 KB, image/jpeg)  [2015-07-03 16:59 UTC](#attach_640109 "Go to the comment associated with the attachment"), Walther Pelser | [Details](attachment.cgi?id=640109&action=edit) | | [**localmodconfig**](attachment.cgi?id=640124 "View the content of the attachment") (103.62 KB, application/x-config)  [2015-07-04 08:54 UTC](#attach_640124 "Go to the comment associated with the attachment"), Walther Pelser | [Details](attachment.cgi?id=640124&action=edit) | | [**Screenshot during "freeze"**](attachment.cgi?id=640499 "View the content of the attachment") (375.87 KB, image/jpeg)  [2015-07-09 13:08 UTC](#attach_640499 "Go to the comment associated with the attachment"), Walther Pelser | [Details](attachment.cgi?id=640499&action=edit) | | [**required data from comment 42**](attachment.cgi?id=640588 "View the content of the attachment") (15.14 KB, text/plain)  [2015-07-10 12:11 UTC](#attach_640588 "Go to the comment associated with the attachment"), Walther Pelser | [Details](attachment.cgi?id=640588&action=edit) | | [**Forfotten file from comment #42**](attachment.cgi?id=640603 "View the content of the attachment") (1.46 KB, text/plain)  [2015-07-10 14:02 UTC](#attach_640603 "Go to the comment associated with the attachment"), Walther Pelser | [Details](attachment.cgi?id=640603&action=edit) | | [**dracut log file**](attachment.cgi?id=651200 "View the content of the attachment") (3.31 KB, text/plain)  [2015-10-12 15:11 UTC](#attach_651200 "Go to the comment associated with the attachment"), Walther Pelser | [Details](attachment.cgi?id=651200&action=edit) | | [**lsinitrd 1**](attachment.cgi?id=653623 "View the content of the attachment") (65.19 KB, application/octet-stream)  [2015-10-28 15:51 UTC](#attach_653623 "Go to the comment associated with the attachment"), Walther Pelser | [Details](attachment.cgi?id=653623&action=edit) | | [**lsinitrd 2**](attachment.cgi?id=653624 "View the content of the attachment") (65.19 KB, text/plain)  [2015-10-28 15:52 UTC](#attach_653624 "Go to the comment associated with the attachment"), Walther Pelser | [Details](attachment.cgi?id=653624&action=edit) | | [**lsinitrd 3**](attachment.cgi?id=653626 "View the content of the attachment") (89.53 KB, text/plain)  [2015-10-28 15:52 UTC](#attach_653626 "Go to the comment associated with the attachment"), Walther Pelser | [Details](attachment.cgi?id=653626&action=edit) | | [View All](attachment.cgi?bugid=935993&action=viewall)  [Add an attachment](attachment.cgi?bugid=935993&action=enter) (proposed patch, testcase, etc.) | |   | Note You need to [log in](show_bug.cgi?id=935993&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. | | --- | |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=935993#c0)  Walther Pelser   2015-06-25 06:35:14 UTC  ``` At the early beginning of the boot process kernel freezes with "found device innostor". Next line should be "Found device /dev/disk/by-uuid/0bcdd615-1001-476e-abd6-89e1f0559259" (here copied from a normal boot process) , but nothing happens.  Innostor is an USB 3.0 Stick.  I tried to reboot several times, but nothing changes. So I had to delete the new kernel.. There is no log-file for this event.  System is intel 945 GTP  Self-compiled  kernel from 4.1.tar.xz works fine! ``` [Comment 1](show_bug.cgi?id=935993#c1)  Takashi Iwai   2015-06-25 07:10:59 UTC  ``` Does the boot succeed without USB stick? And, is the kernel freeze, or does it still react to magic sysrq? Also, could you try with kernel-debug kernel (and without quiet bot option)?  In anyway, it'd be helpful if you can get kernel logs at the hang.  Thanks. ``` [Comment 2](show_bug.cgi?id=935993#c2)  Walther Pelser   2015-06-26 15:22:11 UTC  ``` Boot does succeed without USB-Stick. There are no logs. I can't find anything. The boot process stops too early. Also my attempts with magic sysrq and kernel-debug 4.1.0-4.1.gbab8328 (in fact, I don't now to use this kernel ) failed to get new information.  But there happened some strange things: - If I tried to boot my PC without the USB-Stick, my other kernels can't boot anymore. There are freezing in the very beginning, same point as the new SUSE-kernel. This could be seen after pressing F2 during boot. Only if I start my computer again with the USB-Stick plugged in, I can can boot the machine. There are 2 partitions on it, one is formatted as swap and the other with NTFS. - kernel-debug 4.1.0-4.1.gbab8328 and my attempts with magic sysrq produced a lot of rows of kernel-messages with only groups of 00 on my screen. Maybe only caused by abuse of this functions. ``` [Comment 3](show_bug.cgi?id=935993#c3)  Takashi Iwai   2015-06-26 15:39:53 UTC  ``` At least you can give the full kernel messages when you could boot normally. And please give "hwinfo --full" output, too.  Last but not least, once after you succeed the boot without USB stick, what happens if you plug in the USB stick there?  Does it freeze? ``` [Comment 4](show_bug.cgi?id=935993#c4)  Walther Pelser   2015-06-27 08:14:04 UTC  ``` First: Thanks for your always quick replies. This is encouraging!  A normal boot with usb-stick plugged in. The result is in "boot messages.txt" Then a boot without the stick. Kernel freezes, but remains boot after the stick is plugged in. Look into "boot messages plugged in later.txt".  It looks like a resume/swap-partition thing.  "hwinfo --full" has no result. See "hwinfo.txt". So I tried it with YAST: "YAST-hwinfo.txt". ``` [Comment 5](show_bug.cgi?id=935993#c5)  Walther Pelser   2015-06-27 08:16:48 UTC  ``` Created [attachment 639414](attachment.cgi?id=639414 "boot message") [[details]](attachment.cgi?id=639414&action=edit "boot message") boot message ``` [Comment 6](show_bug.cgi?id=935993#c6)  Walther Pelser   2015-06-27 08:18:25 UTC  ``` Created [attachment 639415](attachment.cgi?id=639415 "USB-Stick lugged in later") [[details]](attachment.cgi?id=639415&action=edit "USB-Stick lugged in later") USB-Stick lugged in later ``` [Comment 7](show_bug.cgi?id=935993#c7)  Walther Pelser   2015-06-27 08:20:26 UTC  ``` Created [attachment 639416](attachment.cgi?id=639416 "hwinfo how?") [[details]](attachment.cgi?id=639416&action=edit "hwinfo how?") hwinfo how? ``` [Comment 8](show_bug.cgi?id=935993#c8)  Walther Pelser   2015-06-27 08:22:05 UTC  ``` Created [attachment 639417](attachment.cgi?id=639417 "Yast-hwinfo") [[details]](attachment.cgi?id=639417&action=edit "Yast-hwinfo") Yast-hwinfo ``` [Comment 9](show_bug.cgi?id=935993#c9)  Walther Pelser   2015-06-27 08:30:18 UTC  ``` Sorry for the changes of the names of the attachments. "boot messages" is "boot messages.txt", "USB-Stick (p)lugged in later" is "boot messages plugged in later.txt", "hwinfo how?" is "hwinfo.txt", "YAST-hwinfo" is "YAST-hwinfo.txt". ``` [Comment 10](show_bug.cgi?id=935993#c10)  Takashi Iwai   2015-06-27 09:02:47 UTC  ``` Hmm, really weird.  Could you try some wild shots below?  - Boot with "noresume" boot option.  This should skip the hibernation thing, at least.  - Blacklist uas module.  usb_storage will be used instead. ``` [Comment 11](show_bug.cgi?id=935993#c11)  Walther Pelser   2015-06-27 13:16:41 UTC  ``` Recovery-mode has the no-resume option. But it could not boot too. 2 screenshots are added from this. First from the boot screen, after waiting a lot; second from sysctl, which could be called from the switched on konsole.  I guess, that the rpms are build in different ways, one from kernel.org, the other from SUSE. So there are different initrds.(There is no symvers build by kernel.org. kernel)  Kernel 4.1 seemes to have a lot of timing problems f. e.: -DVB-T is stored in lib/firmware, but kernel could not find it, because he searches too early. Disconnecting the DVB-T stick, and then connecting it again helps. -Similar: See journalctl.jpeg, the raid-partitions could not be found, maybe the raid subsystem is not yet activated? -wicked is only randomly started completely. In most cases I had to start it after wards with YAST.   My USB 3.0 controller is a PCIe card with a renesas chip on it. In kernel 4.1 there are a lot of changes for several renesas chips. ...... ``` [Comment 12](show_bug.cgi?id=935993#c12)  Walther Pelser   2015-06-27 13:17:59 UTC  ``` Created [attachment 639423](attachment.cgi?id=639423 "recovery mode.jpeg") [[details]](attachment.cgi?id=639423&action=edit "recovery mode.jpeg") recovery mode.jpeg ``` [Comment 13](show_bug.cgi?id=935993#c13)  Walther Pelser   2015-06-27 13:18:46 UTC  ``` Created [attachment 639424](attachment.cgi?id=639424 "journalctl.jpeg") [[details]](attachment.cgi?id=639424&action=edit "journalctl.jpeg") journalctl.jpeg ``` [Comment 14](show_bug.cgi?id=935993#c14)  Takashi Iwai   2015-06-27 14:51:22 UTC  ``` OK, thanks.  The root device is MD, right?  Maybe Neil has some clue, let's add him to Cc.  Also, could you give the working kernel config you built manually for comparison? ``` [Comment 15](show_bug.cgi?id=935993#c15)  Walther Pelser   2015-06-27 15:16:53 UTC  ``` Here comes  config-4.1.0-1-desktop.old from /boot  and .config, which is used during kernel build. partitions.txt is from /proc/partitions ``` [Comment 16](show_bug.cgi?id=935993#c16)  Walther Pelser   2015-06-27 15:18:22 UTC  ``` Created [attachment 639425](attachment.cgi?id=639425 "\".config\"") [[details]](attachment.cgi?id=639425&action=edit "\".config\"") ".config" ``` [Comment 17](show_bug.cgi?id=935993#c17)  Walther Pelser   2015-06-27 15:19:28 UTC  ``` Created [attachment 639426](attachment.cgi?id=639426 "config-4.1.0-1-desktop.old") [[details]](attachment.cgi?id=639426&action=edit "config-4.1.0-1-desktop.old") config-4.1.0-1-desktop.old ``` [Comment 18](show_bug.cgi?id=935993#c18)  Walther Pelser   2015-06-27 15:20:12 UTC  ``` Created [attachment 639427](attachment.cgi?id=639427 "partitions.txt") [[details]](attachment.cgi?id=639427&action=edit "partitions.txt") partitions.txt ``` [Comment 19](show_bug.cgi?id=935993#c19)  Neil Brown   2015-06-29 00:14:46 UTC  ``` Could you please confirm precisely which versions of dracut and mdadm you have installed?  rpm -q dracut mdadm ``` [Comment 20](show_bug.cgi?id=935993#c20)  Walther Pelser   2015-06-29 14:41:01 UTC  ``` mdadm-3.3.1-11.1.x86_64  dracut-041-262.32.x86_64   dracut version used to install self compiled kernel 4.1.0-1-desktop-1.x86_64.rpm: dracut-041-265.1x86_64  added as an attachment from var/log/dracut.log-20150625, which belongs to the kernel mentioned above.  If I boot kernel 4.1.0-4.1 from /repositories/Kernel:/HEAD/standard in recovery mode, there comes up a line how to store the result of the incomplete boot on an USB stick (see recovery mode.jpeg below), but I didn't know, how to do so. So if you need this info, please tell me, how to save it. After the next normal boot, I searched for run/initramfs/rdsosreport.txt, but couldn't find it. ``` [Comment 21](show_bug.cgi?id=935993#c21)  Walther Pelser   2015-06-29 14:44:26 UTC  ``` Created [attachment 639553](attachment.cgi?id=639553 "dracut.log-20150625") [[details]](attachment.cgi?id=639553&action=edit "dracut.log-20150625") dracut.log-20150625 ``` [Comment 22](show_bug.cgi?id=935993#c22)  Neil Brown   2015-07-01 00:47:16 UTC  ``` > dracut-041-262.32.x86_64  Thanks... unfortunately  that version doesn't seem to exist for download any more so I cannot confirm what patches are in it ... and while the build service does contain change logs and history, I cannot quite make out what is what.  I *think* that the particular patch that I think might solve the problem is only in dracut 042 or later.  Certainly that is when it got into upstream and I cannot find clear evidence that it was ever backported to a 041 opensuse release.  So please install dracut-042-1.1.x86_64.rpm   (or later - that is the one I currently see in [http://download.opensuse.org/repositories/Base:/System/openSUSE_Factory/x86_64/](http://download.opensuse.org/repositories/Base%3A/System/openSUSE_Factory/x86_64/)) and see if the problem is fixed.  If not I'll certainly try to find the problem.  I'll probably need the rdsosreport.txt but I might be able to help you find it. ``` [Comment 23](show_bug.cgi?id=935993#c23)  Walther Pelser   2015-07-02 13:48:35 UTC  ``` No change with new dracut! In the meantime I compiled kernel 4.1.1. This kernel is running only with little problems. ``` [Comment 24](show_bug.cgi?id=935993#c24)  Takashi Iwai   2015-07-02 14:11:03 UTC  ``` Then another interesting test would be to check which kernel config difference triggers the problem.  For example, what if you rebuild your kernel with CONFIG_MD_*=m instead of =y?  Or CONFIG_USB_STORAGE=m?  Maybe you can start from creating a minimal config via "make localmodconfig" while running the SUSE kernel, then compare and check with the working config. ``` [Comment 25](show_bug.cgi?id=935993#c25)  Neil Brown   2015-07-03 06:31:01 UTC  ``` I've had a look over all the details again.   As you said there is a swap partition on the USB stick.  When you try to boot without that plugged in, the initrd waits for it - because it really wants all swap partitions.  To help with testing, it would be good to tell the system to ignore that swap partition.  So boot with the USB plugged in (using any kernel that works), then turn of the swap to /dev/sdd2 (swapoff /dev/sdd2) and unplug the USB.  Then make sure it isn't mentioned in /etc/fstab (maybe by uuid) and rerun mkinitrd.  This should rebuild all initrds without any knowledge of the USB. Then you should be able to boot everything without the USB plugged in.  So then boot the problematic kernel, plug in the USB, and try to see what happens. If the system locks up completely we will need to try to get information from sysrq.  If it doesn't, then using 'ps' to find the process that has hung (probably in D state), and the "cat /proc/$PID/stack" to find out what it is doing.  Hopefully some of those steps will get us nearer at least. ``` [Comment 26](show_bug.cgi?id=935993#c26)  Walther Pelser   2015-07-03 16:56:53 UTC  ``` As I expected, it is not caused by the second swap partition. YAST partitioner is broken, so I deleted the swap partition with a tool from KDE. Then I deleted this partition fstab and installed the latest version of dracut (043-1.5). But nothing changed. SUSE kernel in recovery mode shows after waiting an emergency shell of dracut. After typing Journalctl it shows about 900 lines of messages. IMG_0181.JPG , IMG_0182.JPG and IMG_0183.JPG show only the interesting messages as screenshots. Please look at the [systemd-udev] messages. They do not appear during normal boot. udev: 221-5.1 systemd: 221-5.1 ``` [Comment 27](show_bug.cgi?id=935993#c27)  Walther Pelser   2015-07-03 16:57:43 UTC  ``` Created [attachment 640107](attachment.cgi?id=640107 "journalctl screenshot") [[details]](attachment.cgi?id=640107&action=edit "journalctl screenshot") journalctl screenshot ``` [Comment 28](show_bug.cgi?id=935993#c28)  Walther Pelser   2015-07-03 16:58:39 UTC  ``` Created [attachment 640108](attachment.cgi?id=640108 "journalctl screenshot 2") [[details]](attachment.cgi?id=640108&action=edit "journalctl screenshot 2") journalctl screenshot 2 ``` [Comment 29](show_bug.cgi?id=935993#c29)  Walther Pelser   2015-07-03 16:59:09 UTC  ``` Created [attachment 640109](attachment.cgi?id=640109 "journalctl screenshot 3") [[details]](attachment.cgi?id=640109&action=edit "journalctl screenshot 3") journalctl screenshot 3 ``` [Comment 30](show_bug.cgi?id=935993#c30)  Walther Pelser   2015-07-04 08:53:00 UTC  ``` (In reply to Takashi Iwai from [comment #24](show_bug.cgi?id=935993#c24)) > Then another interesting test would be to check which kernel config > difference triggers the problem.  For example, what if you rebuild your > kernel with CONFIG_MD_*=m instead of =y?  Or CONFIG_USB_STORAGE=m? >  > Maybe you can start from creating a minimal config via "make localmodconfig" > while running the SUSE kernel, then compare and check with the working > config.  Do yyou want me to download a src version of the SUSE kernel? And then change the .config of thiS version? The kernel 4.1.1, I actually use, is from kernel.org and compiled as "oldconfig". I have done "make localmodconfig" with this kernel and atttached it as "localmodconfig". But comparison even with kcompare seems to be to difficult for me. I have no running SUSE kernel only self compiled. Kernel 3.18.xx is only as a fallback.  If you look into IMG_0182.JPG, you can find, that md: bind *sda* and md: *sdb* are shown twice (* is only the placeholder for a  which is not on my keyboard). This is very interesting for me, but I do not know, whether it is important or not. ``` [Comment 31](show_bug.cgi?id=935993#c31)  Walther Pelser   2015-07-04 08:54:11 UTC  ``` Created [attachment 640124](attachment.cgi?id=640124 "localmodconfig") [[details]](attachment.cgi?id=640124&action=edit "localmodconfig") localmodconfig ``` [Comment 32](show_bug.cgi?id=935993#c32)  Walther Pelser   2015-07-04 10:11:27 UTC  ``` line CONFIG_MD_AUTODETECT=y is missing in SUSE kernel. Does that mean anything??? part of localmodconfig: # # Generic fallback / legacy drivers # CONFIG_PATA_ACPI=m CONFIG_ATA_GENERIC=m # CONFIG_PATA_LEGACY is not set CONFIG_MD=y CONFIG_BLK_DEV_MD=y CONFIG_MD_AUTODETECT=y CONFIG_MD_LINEAR=y CONFIG_MD_RAID0=y CONFIG_MD_RAID1=y CONFIG_MD_RAID10=m CONFIG_MD_RAID456=m CONFIG_MD_MULTIPATH=m CONFIG_MD_FAULTY=m # CONFIG_MD_CLUSTER is not set  taken from config-4.1.1-1.ga46abf6-desktop: # # Generic fallback / legacy drivers # CONFIG_PATA_ACPI=m CONFIG_ATA_GENERIC=m # CONFIG_PATA_LEGACY is not set CONFIG_MD=y CONFIG_BLK_DEV_MD=m CONFIG_MD_LINEAR=m CONFIG_MD_RAID0=m CONFIG_MD_RAID1=m CONFIG_MD_RAID10=m CONFIG_MD_RAID456=m CONFIG_MD_MULTIPATH=m CONFIG_MD_FAULTY=m CONFIG_MD_CLUSTER=m ``` [Comment 33](show_bug.cgi?id=935993#c33)  Walther Pelser   2015-07-05 12:53:55 UTC  ``` Part of messages from a normal boot: 2015-07-05T12:07:05.493348+02:00 linux-z24t kernel: [    2.644478] md: linear personality registered for level -1 2015-07-05T12:07:05.493350+02:00 linux-z24t kernel: [    2.644484] md: raid0 personality registered for level 0 2015-07-05T12:07:05.493351+02:00 linux-z24t kernel: [    2.644489] md: raid1 personality registered for level 1  Part of dracut emergency shell journalctl (taken from recovery mode.JPG): [ 7.559338] md: personality for level raid0 is not loaded!  If this could not be loaded, partitions could not be read. ``` [Comment 34](show_bug.cgi?id=935993#c34)  Neil Brown   2015-07-06 05:20:54 UTC  ``` > md: personality for level raid0 is not loaded!  That's weird, isn't it.  Thanks for noticing it.  If I look at the "dracut-log" attachment I see  I: *** Including module: mdraid ***  which is good, and in the list of files added to the initramfs there are lots of files in the   lib/modules/4.1.0-1-desktop/kernel/drivers/md  directory, but no raid*.ko files!! The dracut mdraid module should include everything from there.  I can only assume that all the raid modules are missing from your root filesystem. Can you check?   ls -l /lib/modules/4.1.0-1-desktop/kernel/drivers/md  and look for "raid0.ko".  You said "Factory" and "4.1", but Factory only has "4.0" at the moment. Maybe you installed a kernel from Kernel:Stable ??  Do you have the rpm that you installed?  e.g. kernel-desktop-4.1.......x86_64.rpm???  If so can you   rpm2cpio RPMFILE | cpio -itv | grep md/raid  and see what it reports.  If there are no md/raid files, then download a new kernel rpm.  If there are, then try "rpm -U --force RPMFILE" to reinstall it (I hope I got the options correct) and see if that places files in the /lib/modules/.... directory. ``` [Comment 35](show_bug.cgi?id=935993#c35)  Walther Pelser   2015-07-06 14:15:55 UTC  ``` Let me try to do some logical things.  My kernel is now 4.1.1-2.g998afec-desktop from repositories/Kernel/Head/standard/ kernel-desktop-4.1.1-2.g998afec-x86_64.rpm . He is freezing. Running kernel is 4.1.1-1 desktop self comp. From kernel.org. 4.1.1 tar.xz  If I compare  /lib/modules/4.1.1-2.g998afec-desktop/kernel/drivers/md  and  /lib/modules/4.1.1-1-desktop/kernel/drivers/md ,  there are four drivers missing, because they are builtin (linear.ko and raid0.ko and raid1.ko and md-mod.ko), as I configured it and can find it in modules.builtin. (see [comment #32](show_bug.cgi?id=935993#c32))    There are some added:  dm-least-pending.ko and dm-log-writes.ko and dm-multipath.ko and dm-queue-length.ko and dm-service-time.ko. and  md-cluster.ko . (due to config file)  Takashi Iwai asked me, to change the config file, but I cannot see, how this should be helpful. The SUSE kernel kernel-deshtop-4.1.1-2.g998afec-x86_64.rpm is the generic one. And he should run in most cases also in mine too.  What's about the line CONFIG_MD_AUTODETECT=y , which is missing in SUSE kernel , as you can see in [comment #32](show_bug.cgi?id=935993#c32) . Does this line have any function? This is the only difference, I could find. I would like to try a SUSE kernel with this line added. Possible?  (I have to delete the SUSE kernel after such attempts, because grub2 tries always to resume with the highest kernel and this causes problems for me, as I often use the hibernate function.) ``` [Comment 36](show_bug.cgi?id=935993#c36)  Walther Pelser   2015-07-07 13:22:11 UTC  ``` Today I have another idea about the cause of the different behavior of the two kernels. My self compiled kernel has brtfs as builtin. The SUSE kernel only as a module. Kernel can not read raid personality, if btrfs is not or too late loaded, because my root fs is btrfs.  There are more timing problems in this 4.xx kernel during boot. ``` [Comment 37](show_bug.cgi?id=935993#c37)  Walther Pelser   2015-07-08 13:56:31 UTC  ``` Last, but not .... I tried kernel 4.0.5-3.2, which comes up with tumbleweed 20150705-1.2. Same problems. ``` [Comment 38](show_bug.cgi?id=935993#c38)  Neil Brown   2015-07-08 23:01:54 UTC  ``` > What's about the line CONFIG_MD_AUTODETECT=y ,  That setting does nothing useful (I would like to get rid of it completely ... but some people still use it).  It won't affect this issue.  Providing the btrfs module is in the initramfs (which I suspect it is) there should be no problems find it so that a btrfs filesystem can be mounted.  Can you provide me with a copy of the initrd that gets created to work with the opensuse kernel? If it is too big to attach here, maybe put it somewhere that I can download from.   Have you tried the things I suggested in [comment #25](show_bug.cgi?id=935993#c25) to remove the dependency on the usb stick? ``` [Comment 39](show_bug.cgi?id=935993#c39)  Walther Pelser   2015-07-09 13:07:00 UTC  ``` Thank you for your answer. Now i got the information, you might have looked for!!!!!!!!  First: it has nothing to do with the USB stick. I deleted the swap partition, from fstab too. I attached during boot nothing changed. But is has definitely something to do with the other swap partition!  As it has something to with dracut and the SUSE version of it, I changed in /etc/dracut.conf.d/01-dist.conf the last line: # add_dracutmodules+=debug to add_dracutmodules+=debug. kernel 4.0.5-3.2 was installed with this new settings and booted and after some waiting, there came up the line, you can see on timeout.JPG( which is attached).  After having downgraded YAST the partitioner is working again! So I can look into the partition table:   The swap partition is part of an extended partition! SUSE kernel seems not to be able, to open this.  Data of the extended partition shown by YAST(German version):  Gerät: /dev/md126p2 Größe: 250.00 GiB Verschlüsselt: Nein Gerätepfad:  Geräte-ID 1: md-uuid-b054006e:7e450d85:de257e42:4a16c54e-part2 FS-ID: 0x0F Extended Dateisystem: Dateisystem:  Einhängepunkt:  UUID:  Kennung:               Gerät: /dev/md126p5   Größe: 5.00 GiB   Verschlüsselt: Nein   Gerätepfad:    Geräte-ID 1: md-uuid-b054006e:7e450d85:de257e42:4a16c54e-part5   FS-ID: 0x82 Linux swap   Dateisystem:   Dateisystem: Swap   Einhängepunkt: swap   UUID: df0343ee-74e3-4124-a8b2-7349d946e6a8   Kennung: swap      Gerät: /dev/md126p6   Größe: 20.01 GiB   Verschlüsselt: Nein   Gerätepfad:    Geräte-ID 1: md-uuid-b054006e:7e450d85:de257e42:4a16c54e-part6   FS-ID: 0x0C Win95 FAT32 LBA   Dateisystem:   Dateisystem: FAT   Einhängepunkt:    UUID: 2F8B-210D   Kennung:          Gerät: /dev/md126p7   Größe: 224.98 GiB   Verschlüsselt: Nein   Gerätepfad:    Geräte-ID 1: md-uuid-b054006e:7e450d85:de257e42:4a16c54e-part7   FS-ID: 0x83 Linux native   Dateisystem:   Dateisystem: Ext4   Einhängepunkt: /home   UUID: 70177251-9d78-4c95-ae66-7d829c8e6038   Kennung: home   mp126p2 is mp126p5+mp126p6+mp126p7  So kernel has to add x2 in this case to the uuid, but there seems something to be wrong with it. The self compiled kernel has no problem with it, maybe I have builtin something? Or should be loaded to the SUSE kernel by dracut?  I'm VERY interested in your reaction.  Do you still need the initrd? In that case I have no idea, where to upload it, be maybe a compression should be possible? ``` [Comment 40](show_bug.cgi?id=935993#c40)  Walther Pelser   2015-07-09 13:08:24 UTC  ``` Created [attachment 640499](attachment.cgi?id=640499 "Screenshot during \"freeze\"") [[details]](attachment.cgi?id=640499&action=edit "Screenshot during \"freeze\"") Screenshot during "freeze" ``` [Comment 41](show_bug.cgi?id=935993#c41)  Walther Pelser   2015-07-09 13:12:58 UTC  ``` Attachment "Screenshot during "freeze"" is my "timeout.JPG". I do always expect, that the name of my file is copied too. ``` [Comment 42](show_bug.cgi?id=935993#c42)  Neil Brown   2015-07-10 00:25:06 UTC  ``` Hmm... I've seen something a bit like this recently.  I just worked around it rather than digging it to find the real problem.  Maybe I should try harder.  Meanwhile, could you provide the following files or command outputs please?  /etc/fstab /etc/mdadm.conf /proc/mdstat /boot/grub2/grub.cfg /proc/mounts /proc/swaps  blkid  That will hopefully give me enough that I can pick out the detail that is particular to your setup. ``` [Comment 43](show_bug.cgi?id=935993#c43)  Walther Pelser   2015-07-10 12:11:23 UTC  ``` Created [attachment 640588](attachment.cgi?id=640588 "required data from comment 42") [[details]](attachment.cgi?id=640588&action=edit "required data from comment 42") required data from [comment 42](show_bug.cgi?id=935993#c42) ``` [Comment 44](show_bug.cgi?id=935993#c44)  Walther Pelser   2015-07-10 14:02:21 UTC  ``` Created [attachment 640603](attachment.cgi?id=640603 "Forfotten file from comment #42") [[details]](attachment.cgi?id=640603&action=edit "Forfotten file from comment #42") Forfotten file from [comment #42](show_bug.cgi?id=935993#c42) ``` [Comment 45](show_bug.cgi?id=935993#c45)  Walther Pelser   2015-07-22 19:23:08 UTC  ``` Hallo! There is another bug, I have filed. Probably there is a connection between them?  [Bug 938048](show_bug.cgi?id=938048 "RESOLVED FIXED - Installer and partitioner crash because of (possibly) corrupted partition table"). Here [comment #6](show_bug.cgi?id=935993#c6) from Stefan Hundhammer.  In my eyes it could be a possible explanation of the reaction of the SUSE-kernel. ``` [Comment 46](show_bug.cgi?id=935993#c46)  Neil Brown   2015-10-09 04:04:10 UTC  ``` Sorry It's been so long ... I have had leave and a conference and ...  I don't think the other bug is particularly related.  parted should not be used during the boot process at all.  My best guess is still that something is going wrong with the raid0.ko module - it isn't on the initrd.  In my testing I cannot make this fail though.  I assume you are booted with the RAID0 active when you install the new kernel???  The extra files you attached at my request all look perfectly normal and correct - I cannot see any problem there.  So I'm at a loss .... does the problem still occur with the latest 4.3.0-rc4 kernel?? ``` [Comment 47](show_bug.cgi?id=935993#c47)  Walther Pelser   2015-10-11 06:37:35 UTC  ``` Thanks for your answer! 1. There are no "desktop"-kernels in repsitory/Kernel/Head or /Kernel/standard anymore. So I will wait or try a default-kernel later on.  2. Now I am used to built my own kernel (act. version 4.1.10, localyesconfig, size 20,7 MB, built-time 27 min) and this kernel is always working fine (with some timing-problems caused by systemd). So it must be a SUSE-specific problem and not a raid0.ko one. But, as I seem to be the only one with it, it should be dropped or closed.  3. [Bug 938048](show_bug.cgi?id=938048 "RESOLVED FIXED - Installer and partitioner crash because of (possibly) corrupted partition table") showed that my partition-table is "semi"-corrupt or with some faults, so that parted can not deal with it. Luckily I could reach some changes in YAST-storage, so that I could use it again.  The booting-problem occurred at the same time, so I guessed, there could have been a policy-change in SUSE-tumbleweed.  I'm not so familiar with changings in a working raid-system, but sooner or later I will have to change it into raid1 or drop raid completely. I have no idea how to do it yet, so I prefer, to do nothing. ``` [Comment 48](show_bug.cgi?id=935993#c48)  Takashi Iwai   2015-10-11 07:24:44 UTC  ``` (In reply to Walther Pelser from [comment #47](show_bug.cgi?id=935993#c47)) > Thanks for your answer! > 1. There are no "desktop"-kernels in repsitory/Kernel/Head or > /Kernel/standard anymore. So I will wait or try a default-kernel later on.  Right, we deprecated kernel-desktop flavor.  It's replaced with kernel-default now.   > 2. Now I am used to built my own kernel (act. version 4.1.10, > localyesconfig, size 20,7 MB, built-time 27 min) and this kernel is always > working fine (with some timing-problems caused by systemd). So it must be a > SUSE-specific problem and not a raid0.ko one. But, as I seem to be the only > one with it, it should be dropped or closed.  You should try localmodconfig instead of localyesconfig.  We take only few SUSE-specific patches (except for ARM64 and Xen ones).  The possible difference is rather whether it's a built-in or a module -- which influences on the timing. ``` [Comment 49](show_bug.cgi?id=935993#c49)  Walther Pelser   2015-10-11 14:54:00 UTC  ``` I tried kernel 4.3.rc4-2.1.gefc53bd-default, but boot stopped again. In journalctl I found: "could not load Kernel modules". In    /user/lib/modules-load.d   I found: sg.conf (# load sg module at boot time   sg) All other "modules-load.d"-files, mentioned in "systemd-modules-load.service", are empty or can not to be found on my computer.  Can this cause my problems? Can I try to comment it out or delete it?  This is my last attempt and I do not want to waste Your time with such archeological problems.   Far earlier kernels skipped starting services, if there were dependencies, and started them later with success. Now systemd deletes them and they must be started by hand (YAST). Is this true? I can see his timing-problems for a long time and I don't have the idea, that this is related to localmodconfig or localyesconfig, but I will try it with my next kernel. Thanks to Takashi Iwai for his always quick and involved replies. ``` [Comment 50](show_bug.cgi?id=935993#c50)  Neil Brown   2015-10-11 23:19:07 UTC  ``` The contents of modules-load.d is not particularly relevant here.  More relevant is the content of    /lib/modules/4.3.rc4-2*-default/kernel/drivers/md/  This should have md-mod.ko and raid0.ko. If it doesn't (which I suspect to be the case), then that is the problem. You can easily test by running e.g.  lsinitrd =boot/initrd-4.3.rc4-2*-default | grep raid0  .... Ah, I think I might know what is going wrong.  You are booted with your all-yes-config kernel when you install the openSUSE kernel, aren't you?  dracut (which builds the initrd) has some slightly complicated logic to decide whether to actually include a module in the initrd or not.  The 'mdraid' dracut module asks the 'instmods' function (in /usr/lib/dracut somewhere) to install all modules in drivers/md/. instmods tries to be clever.  For example if each module is currently loaded in the running kernel, it will be added to the initrd.  If it could be loaded, but currently isn't, then it is not added to the initrd.  Then there is some fairly complicated logic that only applies to modules with aliases (and raid0.ko does have aliases).  I'm not 100% sure, but I think this logic is making unfounded assumptions (it is the checks in host_modalias[] in modules_is_host_only() in dracut_functions.sh)  In any case, we can bypass all this logic by passing the "-A" flag to mkinitrd.  This suppresses the 'hostonly' checks.... or at least that it what the documentation says.  It seems that it lies.  But we can call dracut directly  So: as one final test, can you please run   dracut -N --force /boot/initrd-$VERSION $VERSION  where $VERSION is your kernel version, presumably 4.3.0-rc4-2.gefc53bd-default  and then try to boot the openSUSE kernel.  If you don't want to that is fine.  I've managed to duplicate the bug now so I'm sure I can get it fixed.  But having confirmation from you that this fixes your problem would be nice. ``` [Comment 51](show_bug.cgi?id=935993#c51)  Neil Brown   2015-10-12 03:54:36 UTC  ``` Hi Thomas,  reassigning to you (are you still the right person?) as this is a dracut problem.  2 issues: 1/ "man mkinitrd" claims that "-A" creates a "monster initrd" but as far as I can see it has no effect.  2/ The host_modalias stuff in dracut doesn't handle md/raid modules.  I've tested the code fragment I posted to initramfs@vger.kernel.org and it appears to work.  Thanks.   Code fragment:  if [ -f /proc/mdstat ]; then   while read _d _c _a _m _x; do    if [ "$_c" = ':' -a "$_a" = 'active' ]; then       host_modalias["md-$_m"]=1    fi   done < /proc/mdstat fi ``` [Comment 52](show_bug.cgi?id=935993#c52)  Walther Pelser   2015-10-12 15:10:35 UTC  ``` So I did: (See latest attachment) But: It didn't boot!  You are on the right way, I think. I noticed earlier, that dracut had changed all my older SUSE-kernels. In the beginning they were booting fine. Then I installed my own kernel and I could boot all my installed kernels. But one day there came a new dracut version or something else, I noticed that all initrds from all installed kernels were rewritten. From that time I could only boot with my own kernel. No older SUSE-kernel even after deleting and re-installation did work anymore. And no new SUSE-kernel did work too. And I also tried to rewrite dracut with force by choosing the SUSE-kernel. This did not change anything.  So I could offer to delete all kernels from /boot and then install only the one mentioned above. It should work because dracut can no longer look into other kernels. ``` [Comment 53](show_bug.cgi?id=935993#c53)  Walther Pelser   2015-10-12 15:11:53 UTC  ``` Created [attachment 651200](attachment.cgi?id=651200 "dracut log file") [[details]](attachment.cgi?id=651200&action=edit "dracut log file") dracut log file ``` [Comment 54](show_bug.cgi?id=935993#c54)  Neil Brown   2015-10-12 20:42:58 UTC  ``` That is disappointing, and surprising. Deleting other kernels wouldn't help.  dracut isn't looking into other kernels, it is looking into the currently running kernel.  What does  lsinitrd /boot/initrd-4.3.0-rc4-2.gefc53bd-default | grep drivers/md/raid  show? I get  raid0.ko raid1.ko raid10.ko raid456.ko listed.  If you don't get that, then the "-N" flag to dracut isn't working.  If you do get those, then there must be some other problem, other than not being able to load the raid0 module. We would need to get logs from the failed boot attempt like you did for [comment #33](show_bug.cgi?id=935993#c33). ``` [Comment 55](show_bug.cgi?id=935993#c55)  Walther Pelser   2015-10-19 13:44:13 UTC  ``` (In reply to Takashi Iwai from [comment #48](show_bug.cgi?id=935993#c48)) > (In reply to Walther Pelser from [comment #47](show_bug.cgi?id=935993#c47)) > > Thanks for your answer! > > 1. There are no "desktop"-kernels in repsitory/Kernel/Head or > > /Kernel/standard anymore. So I will wait or try a default-kernel later on. >  > Right, we deprecated kernel-desktop flavor.  It's replaced with > kernel-default now. >   > > 2. Now I am used to built my own kernel (act. version 4.1.10, > > localyesconfig, size 20,7 MB, built-time 27 min) and this kernel is always > > working fine (with some timing-problems caused by systemd). So it must be a > > SUSE-specific problem and not a raid0.ko one. But, as I seem to be the only > > one with it, it should be dropped or closed. >  > You should try localmodconfig instead of localyesconfig.  We take only few > SUSE-specific patches (except for ARM64 and Xen ones).  The possible > difference is rather whether it's a built-in or a module -- which influences > on the timing.  Two days ago I had to install a complete new tumbleweed-OS because of massive data-corruption. F.i. /proc was indicated with asize of 150 TB! This new system shows the same booting-problem with with wicked (randomly  only parts of wicked are started, mostly parts of wicked are deleted by systemd because of dependencies). There is obviously no relation to the kind of kernel, which is used. And there occurs a similar problem: Only after hibernation my DVB-USB-Stick is not correctly installed. I avoid this by my own kernel with built- module and built-in firmware. ``` [Comment 56](show_bug.cgi?id=935993#c56)  Walther Pelser   2015-10-19 14:04:55 UTC  ``` Now a normal comment  My Os was broken. So I had to install a new tumbleweed-OS. As expected it is booting normally. Because of problems with my DVB-USB-Stick after hibernation I have to use again a self-compiled kernel with built-in module and built-in firmware. Which dracut-loglevel should I use, to get all changes in dracut. if there is there are changes during installation of a new kernel, while my own kernel is booted. It is obvious for me that dracut works fine, if a new own kernel is installed from a booted SUSE-Kernel. But the problems came up, when a SUSE-kernel was installed from a booted own kernel. So the SUSE-specifications in systemd and dracut may cause the problems. Dracut seems to have problems with them, when installing a new kernel, when the system was booted by my own kernel. So there should be some visible changes in the dracut-logs, if I have to to do so.  The requested logs from [comment 54](show_bug.cgi?id=935993#c54) are impossible right now, but maybe seen sometime later on.  I am open for another kind of approach to this problem, if You have a better one. ``` [Comment 57](show_bug.cgi?id=935993#c57)  Thomas Renninger   2015-10-19 14:29:38 UTC  ``` > I am open for another kind of approach to this problem, > if You have a better one. Debugging at boot time is much more cumbersome... If I understand this correctly, the bad thing already happens when the initrd is built. And this might be about missing kernel modules, depending on the kernel config. So best is to compare the modules integrated in the initrd: lsinitrd /boot/initrd-xy-default >/tmp/initrd_default_files lsinitrd /boot/initrd-xy-own     >/tmp/initrd_own_kernel_files  You can then compare with your kernel config: zcat /proc/config.gz > /tmp/kernel_booted_config  Hm, the pitty is you need some knowledge about the dm drivers. Which modules have to be there and which are compiled in with which .config compile setting.  I still have some other urgent stuff to look at, but this one is high on my prio list. Neil already provided a patch which is only half way working if I understood this correctly? It helps, but not always? ``` [Comment 58](show_bug.cgi?id=935993#c58)  Walther Pelser   2015-10-28 15:50:33 UTC  ``` Now I have tried to follow the process of the changes in initrd caused by dracut. I copied the 3 actual version of initrd-4.2.1.-1-desktop. So I got 3 versions of initrd-4.2.1-1-desktop. First originally installed from tumbleweed. (Booting normally)(attachment: lsinitrd 1). Second after installation of my own kernel 4.1.10-2a-desktop. (Both booting normally)(attachment: lsinitrd 2) Third after upgrading to tumbleweed 20151022-1.2. (only my own kernel can boot)(attachment: lsinitrd 3) After having compared them the most important thing is for me, that raid0.ko is lost in version 3. Other md-things are installed instead. ``` [Comment 59](show_bug.cgi?id=935993#c59)  Walther Pelser   2015-10-28 15:51:34 UTC  ``` Created [attachment 653623](attachment.cgi?id=653623 "lsinitrd 1") [[details]](attachment.cgi?id=653623&action=edit "lsinitrd 1") lsinitrd 1 ``` [Comment 60](show_bug.cgi?id=935993#c60)  Walther Pelser   2015-10-28 15:52:13 UTC  ``` Created [attachment 653624](attachment.cgi?id=653624 "lsinitrd 2") [[details]](attachment.cgi?id=653624&action=edit "lsinitrd 2") lsinitrd 2 ``` [Comment 61](show_bug.cgi?id=935993#c61)  Walther Pelser   2015-10-28 15:52:49 UTC  ``` Created [attachment 653626](attachment.cgi?id=653626 "lsinitrd 3") [[details]](attachment.cgi?id=653626&action=edit "lsinitrd 3") lsinitrd 3 ``` [Comment 62](show_bug.cgi?id=935993#c62)  Walther Pelser   2015-10-28 16:06:29 UTC  ``` Addition to [comment # 58](show_bug.cgi?id=935993#c58): Upgrading to tumbleweed 20151022-1.2. was made, when system was booted by my own kernel. As Neil Brown wrote in [comment # 50](show_bug.cgi?id=935993#c50). ``` [Comment 63](show_bug.cgi?id=935993#c63)  Walther Pelser   2015-11-03 15:02:05 UTC  ``` Workaround is:  dracut --kver 4.2.1-1-desktop --add-drivers raid0 --force This adds the dropped riad0.ko and I can get a bootable SUSE-kernel. I will add this to dracut.conf to avoid that this will be lost again, when initramrd is updated or another new kernel is installed.  But a patch, which solves this bug, would be the better solution, I think. ``` [Comment 64](show_bug.cgi?id=935993#c64)  Fabian Vogt   2015-11-04 16:04:15 UTC  ``` (In reply to Neil Brown from [comment #51](show_bug.cgi?id=935993#c51)) > Hi Thomas, >  reassigning to you (are you still the right person?) as this is a dracut > problem. >  > 2 issues: > 1/ "man mkinitrd" claims that "-A" creates a "monster initrd" but as far as > I can see it has no effect. Indeed, "-A" sets host_only to 0, but that variable isn't used anywhere... Fix is underway.  > 2/ The host_modalias stuff in dracut doesn't handle md/raid modules. >  I've tested the code fragment I posted to initramfs@vger.kernel.org and it > appears to work. Wouldn't it be better to use the     hostonly='' instmods <mod> trick here, together with your parsing of /proc/mdstat? That's IMO much more straightforward.  The dracut.modules manpage says:      instmods will not install the kernel module, if $hostonly is set and the kernel module is not currently needed by any /sys/.../uevent MODALIAS.     To install a kernel module regardless of the hostonly mode use the form: hostonly='' instmods <kernelmodule>  As the uevent modalias doesn't make much sense for RAID (if md0 is available, the module is already loaded and working), ignoring the aliases makes most sense here. ``` [Comment 65](show_bug.cgi?id=935993#c65)  Bernhard Wiedemann   2015-11-10 12:00:18 UTC  ``` This is an autogenerated message for OBS integration: This bug (935993) was mentioned in <https://build.opensuse.org/request/show/343394> 13.2 / dracut ``` [Comment 66](show_bug.cgi?id=935993#c66)  Bernhard Wiedemann   2015-11-10 16:00:33 UTC  ``` This is an autogenerated message for OBS integration: This bug (935993) was mentioned in <https://build.opensuse.org/request/show/343477> 13.2 / dracut ``` [Comment 67](show_bug.cgi?id=935993#c67)  Walther Pelser   2015-11-11 14:57:16 UTC  ``` Solved with dracut 043-17.1 ``` [Comment 68](show_bug.cgi?id=935993#c68)  Fabian Vogt   2015-11-11 15:04:32 UTC  ``` Ok, thanks. ``` [Comment 69](show_bug.cgi?id=935993#c69)  Swamp Workflow Management   2015-11-18 13:16:18 UTC  ``` openSUSE-SU-2015:2022-1: An update that solves one vulnerability and has two fixes is now available.  Category: security (moderate) Bug References: 935338,935993,952491 CVE References: CVE-2015-0794 Sources used: openSUSE 13.2 (src):    dracut-037-17.30.1 ``` [Comment 70](show_bug.cgi?id=935993#c70)  Swamp Workflow Management   2015-11-20 17:10:42 UTC  ``` SUSE-SU-2015:2065-1: An update that solves one vulnerability and has three fixes is now available.  Category: security (moderate) Bug References: 935338,935993,947518,952491 CVE References: CVE-2015-0794 Sources used: SUSE Linux Enterprise Server 12 (src):    dracut-037-51.17.3 SUSE Linux Enterprise Desktop 12 (src):    dracut-037-51.17.3 ``` |  |
| --- | --- |

---

* [Format For Printing](show_bug.cgi?format=multiple&id=935993)
* - [XML](show_bug.cgi?ctype=xml&id=935993)
* - [Clone This Bug](enter_bug.cgi?cloned_bug_id=935993)
* - Top of page

* + [Home](./)
  + | [New](enter_bug.cgi)
  + | [Browse](describecomponents.cgi)
  + | [Search](query.cgi)
  + |

    [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
  + | [Reports](report.cgi)
  + |
    [Requests](request.cgi)
  + |
    [IDP Log In](/saml2_login.cgi?idp=IDP&target=show_bug.cgi%3Fid%3D935993)
  + |
    [Forgot Password](https://idp-portal.suse.com/univention/self-service/#page=passwordreset)

+ Legal:
+ [openSUSE](http://en.opensuse.org/Terms_of_site)
+ [SUSE](https://www.suse.com/company/legal/)



=== Content from bugzilla.suse.com_9d5dfb65_20250126_064059.html ===


| Bugzilla – Bug Access Denied |
| --- |

|  |
| --- |

* [Home](./)
* | [New](enter_bug.cgi)
* | [Browse](describecomponents.cgi)
* | [Search](query.cgi)
* |

  [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
* | [Reports](report.cgi)
* |
  [Requests](request.cgi)
* |
  [IDP Log In](/saml2_login.cgi?idp=IDP&target=show_bug.cgi%3Fid%3D952491)
* |
  [Forgot Password](https://idp-portal.suse.com/univention/self-service/#page=passwordreset)

## Related documentation

* [Creating an account](https://bugzilla.readthedocs.org/en/5.0/administering/users.html#creating-new-users)

You are not authorized to access bug #952491.
To see this bug, you must
first [log
in to an account](show_bug.cgi?id=952491&GoAheadAndLogIn=1) with the appropriate permissions.

Please press **Back** and try again.

* + [Home](./)
  + | [New](enter_bug.cgi)
  + | [Browse](describecomponents.cgi)
  + | [Search](query.cgi)
  + |

    [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
  + | [Reports](report.cgi)
  + |
    [Requests](request.cgi)
  + |
    [IDP Log In](/saml2_login.cgi?idp=IDP&target=show_bug.cgi%3Fid%3D952491)
  + |
    [Forgot Password](https://idp-portal.suse.com/univention/self-service/#page=passwordreset)

+ Legal:
+ [openSUSE](http://en.opensuse.org/Terms_of_site)
+ [SUSE](https://www.suse.com/company/legal/)


