=== Content from www.postgresql.org_a230dc90_20250124_212252.html ===


[![PostgreSQL Elephant Logo](/media/img/about/press/elephant.png)](/)

* [Home](/ "Home")
* [About](/about/ "About")
* [Download](/download/ "Download")
* [Documentation](/docs/ "Documentation")
* [Community](/community/ "Community")
* [Developers](/developer/ "Developers")
* [Support](/support/ "Support")
* [Donate](/about/donate/ "Donate")
* [Your account](/account/ "Your account")

November 21, 2024: [PostgreSQL 17.2, 16.6, 15.10, 14.15, 13.18, and 12.22 Released!](/about/news/postgresql-172-166-1510-1415-1318-and-1222-released-2965/)

[Documentation](/docs/ "Documentation") → [PostgreSQL 9.1](/docs/9.1/index.html)

Unsupported versions:
[9.3](/docs/9.3/release-9-1-16.html "PostgreSQL 9.3 - Release 9.1.16")
/
[9.2](/docs/9.2/release-9-1-16.html "PostgreSQL 9.2 - Release 9.1.16")
/
[9.1](/docs/9.1/release-9-1-16.html "PostgreSQL 9.1 - Release 9.1.16")

This documentation is for an unsupported version of PostgreSQL.

You may want to view the same page for the
[current](/docs/current/release-9-1-16.html "PostgreSQL  - Release 9.1.16")
version, or one of the other supported versions listed above instead.

| [PostgreSQL 9.1.24 Documentation](index.html) | | | | |
| --- | --- | --- | --- | --- |
| [Prev](release-9-1-17.html "Release 9.1.17") | [Up](release.html) | Appendix E. Release Notes | [Next](release-9-1-15.html "Release 9.1.15") |

---

# E.9. Release 9.1.16

> **Release Date:** 2015-05-22

This release contains a variety of fixes from 9.1.15. For
information about new features in the 9.1 major release, see
[Section E.25](release-9-1.html).

## E.9.1. Migration to Version 9.1.16

A dump/restore is not required for those running 9.1.X.

However, if you use contrib/citext's `regexp_matches()` functions, see the changelog
entry below about that.

Also, if you are upgrading from a version earlier than
9.1.14, see [Section E.11](release-9-1-14.html).

## E.9.2. Changes

* Avoid possible crash when client disconnects just before
  the authentication timeout expires (Benkocs Norbert
  Attila)

  If the timeout interrupt fired partway through the
  session shutdown sequence, SSL-related state would be freed
  twice, typically causing a crash and hence denial of
  service to other sessions. Experimentation shows that an
  unauthenticated remote attacker could trigger the bug
  somewhat consistently, hence treat as security issue.
  (CVE-2015-3165)
* Improve detection of system-call failures (Noah
  Misch)

  Our replacement implementation of `snprintf()` failed to check for errors
  reported by the underlying system library calls; the main
  case that might be missed is out-of-memory situations. In
  the worst case this might lead to information exposure, due
  to our code assuming that a buffer had been overwritten
  when it hadn't been. Also, there were a few places in which
  security-relevant calls of other system library functions
  did not check for failure.

  It remains possible that some calls of the `*printf()` family of functions are
  vulnerable to information disclosure if an out-of-memory
  error occurs at just the wrong time. We judge the risk to
  not be large, but will continue analysis in this area.
  (CVE-2015-3166)
* In contrib/pgcrypto, uniformly
  report decryption failures as "Wrong
  key or corrupt data" (Noah Misch)

  Previously, some cases of decryption with an incorrect
  key could report other error message texts. It has been
  shown that such variance in error reports can aid attackers
  in recovering keys from other systems. While it's unknown
  whether pgcrypto's specific
  behaviors are likewise exploitable, it seems better to
  avoid the risk by using a one-size-fits-all message.
  (CVE-2015-3167)
* Fix incorrect declaration of contrib/citext's `regexp_matches()` functions (Tom Lane)

  These functions should return setof
  text[], like the core functions they are wrappers for;
  but they were incorrectly declared as returning just
  text[]. This mistake had two results:
  first, if there was no match you got a scalar null result,
  whereas what you should get is an empty set (zero rows).
  Second, the g flag was effectively
  ignored, since you would get only one result array even if
  there were multiple matches.

  While the latter behavior is clearly a bug, there might
  be applications depending on the former behavior; therefore
  the function declarations will not be changed by default
  until PostgreSQL 9.5. In
  pre-9.5 branches, the old behavior exists in version 1.0 of
  the citext extension, while we
  have provided corrected declarations in version 1.1 (which
  is not installed
  by default). To adopt the fix in pre-9.5 branches, execute
  ALTER EXTENSION citext UPDATE TO
  '1.1' in each database in which citext is installed. (You can also
  "update" back to 1.0 if you need
  to undo that.) Be aware that either update direction will
  require dropping and recreating any views or rules that use
  citext's `regexp_matches()` functions.
* Fix incorrect checking of deferred exclusion constraints
  after a HOT update (Tom Lane)

  If a new row that potentially violates a deferred
  exclusion constraint is HOT-updated (that is, no indexed
  columns change and the row can be stored back onto the same
  table page) later in the same transaction, the exclusion
  constraint would be reported as violated when the check
  finally occurred, even if the row(s) the new row originally
  conflicted with had been deleted.
* Prevent improper reordering of antijoins (NOT EXISTS
  joins) versus other outer joins (Tom Lane)

  This oversight in the planner has been observed to cause
  "could not find RelOptInfo for given
  relids" errors, but it seems possible that sometimes
  an incorrect query plan might get past that consistency
  check and result in silently-wrong query output.
* Fix incorrect matching of subexpressions in outer-join
  plan nodes (Tom Lane)

  Previously, if textually identical non-strict
  subexpressions were used both above and below an outer
  join, the planner might try to re-use the value computed
  below the join, which would be incorrect because the
  executor would force the value to NULL in case of an
  unmatched outer row.
* Fix GEQO planner to cope with failure of its join order
  heuristic (Tom Lane)

  This oversight has been seen to lead to "failed to join all relations together"
  errors in queries involving LATERAL, and that might happen in other
  cases as well.
* Fix possible deadlock at startup when max\_prepared\_transactions is too small
  (Heikki Linnakangas)
* Don't archive useless preallocated WAL files after a
  timeline switch (Heikki Linnakangas)
* Avoid "cannot
  GetMultiXactIdMembers() during recovery" error
  (Álvaro Herrera)
* Recursively `fsync()` the
  data directory after a crash (Abhijit Menon-Sen, Robert
  Haas)

  This ensures consistency if another crash occurs shortly
  later. (The second crash would have to be a system-level
  crash, not just a database crash, for there to be a
  problem.)
* Fix autovacuum launcher's possible failure to shut down,
  if an error occurs after it receives SIGTERM (Álvaro
  Herrera)
* Cope with unexpected signals in `LockBufferForCleanup()` (Andres
  Freund)

  This oversight could result in spurious errors about
  "multiple backends attempting to wait
  for pincount 1".
* Avoid waiting for WAL flush or synchronous replication
  during commit of a transaction that was read-only so far as
  the user is concerned (Andres Freund)

  Previously, a delay could occur at commit in
  transactions that had written WAL due to HOT page pruning,
  leading to undesirable effects such as sessions getting
  stuck at startup if all synchronous replicas are down.
  Sessions have also been observed to get stuck in catchup
  interrupt processing when using synchronous replication;
  this will fix that problem as well.
* Fix crash when manipulating hash indexes on temporary
  tables (Heikki Linnakangas)
* Fix possible failure during hash index bucket split, if
  other processes are modifying the index concurrently (Tom
  Lane)
* Check for interrupts while analyzing index expressions
  (Jeff Janes)

  ANALYZE executes index
  expressions many times; if there are slow functions in such
  an expression, it's desirable to be able to cancel the
  ANALYZE before that loop
  finishes.
* Ensure tableoid of a
  foreign table is reported correctly when a READ COMMITTED recheck occurs after locking
  rows in SELECT FOR UPDATE,
  UPDATE, or DELETE (Etsuro Fujita)
* Add the name of the target server to object description
  strings for foreign-server user mappings (Álvaro
  Herrera)
* Recommend setting include\_realm
  to 1 when using Kerberos/GSSAPI/SSPI authentication
  (Stephen Frost)

  Without this, identically-named users from different
  realms cannot be distinguished. For the moment this is only
  a documentation change, but it will become the default
  setting in PostgreSQL
  9.5.
* Remove code for matching IPv4 pg\_hba.conf entries to IPv4-in-IPv6
  addresses (Tom Lane)

  This hack was added in 2003 in response to a report that
  some Linux kernels of the time would report IPv4
  connections as having IPv4-in-IPv6 addresses. However, the
  logic was accidentally broken in 9.0. The lack of any field
  complaints since then shows that it's not needed anymore.
  Now we have reports that the broken code causes crashes on
  some systems, so let's just remove it rather than fix it.
  (Had we chosen to fix it, that would make for a subtle and
  potentially security-sensitive change in the effective
  meaning of IPv4 pg\_hba.conf
  entries, which does not seem like a good thing to do in
  minor releases.)
* Report WAL flush, not insert, position in IDENTIFY\_SYSTEM replication command (Heikki
  Linnakangas)

  This avoids a possible startup failure in pg\_receivexlog.
* While shutting down service on Windows, periodically
  send status updates to the Service Control Manager to
  prevent it from killing the service too soon; and ensure
  that pg\_ctl will wait for
  shutdown (Krystian Bigaj)
* Reduce risk of network deadlock when using libpq's non-blocking mode (Heikki
  Linnakangas)

  When sending large volumes of data, it's important to
  drain the input buffer every so often, in case the server
  has sent enough response data to cause it to block on
  output. (A typical scenario is that the server is sending a
  stream of NOTICE messages during COPY
  FROM STDIN.) This worked properly in the normal
  blocking mode, but not so much in non-blocking mode. We've
  modified libpq to
  opportunistically drain input when it can, but a full
  defense against this problem requires application
  cooperation: the application should watch for socket
  read-ready as well as write-ready conditions, and be sure
  to call `PQconsumeInput()` upon
  read-ready.
* Fix array handling in ecpg (Michael Meskes)
* Fix psql to sanely
  handle URIs and conninfo strings as the first parameter to
  \connect (David Fetter, Andrew
  Dunstan, Álvaro Herrera)

  This syntax has been accepted (but undocumented) for a
  long time, but previously some parameters might be taken
  from the old connection instead of the given string, which
  was agreed to be undesirable.
* Suppress incorrect complaints from psql on some platforms that it failed
  to write ~/.psql\_history at exit
  (Tom Lane)

  This misbehavior was caused by a workaround for a bug in
  very old (pre-2006) versions of libedit. We fixed it by removing the
  workaround, which will cause a similar failure to appear
  for anyone still using such versions of libedit. Recommendation: upgrade that
  library, or use libreadline.
* Fix pg\_dump's rule for
  deciding which casts are system-provided casts that should
  not be dumped (Tom Lane)
* In pg\_dump, fix failure
  to honor -Z compression level
  option together with -Fd (Michael
  Paquier)
* Make pg\_dump consider
  foreign key relationships between extension configuration
  tables while choosing dump order (Gilles Darold, Michael
  Paquier, Stephen Frost)

  This oversight could result in producing dumps that fail
  to reload because foreign key constraints are transiently
  violated.
* Fix dumping of views that are just VALUES(...) but have column aliases (Tom
  Lane)
* In pg\_upgrade, force
  timeline 1 in the new cluster (Bruce Momjian)

  This change prevents upgrade failures caused by bogus
  complaints about missing WAL history files.
* In pg\_upgrade, check
  for improperly non-connectable databases before proceeding
  (Bruce Momjian)
* In pg\_upgrade, quote
  directory paths properly in the generated delete\_old\_cluster script (Bruce
  Momjian)
* In pg\_upgrade, preserve
  database-level freezing info properly (Bruce Momjian)

  This oversight could cause missing-clog-file errors for
  tables within the postgres and
  template1 databases.
* Run pg\_upgrade and
  pg\_resetxlog with
  restricted privileges on Windows, so that they don't fail
  when run by an administrator (Muhammad Asif Naeem)
* Improve handling of `readdir()` failures when scanning
  directories in initdb and
  pg\_basebackup (Marco
  Nenciarini)
* Fix slow sorting algorithm in contrib/intarray (Tom Lane)
* Fix compile failure on Sparc V8 machines (Rob Rowan)
* Update time zone data files to tzdata release 2015d for DST law
  changes in Egypt, Mongolia, and Palestine, plus historical
  changes in Canada and Chile. Also adopt revised zone
  abbreviations for the America/Adak zone (HST/HDT not
  HAST/HADT).

---

| [Prev](release-9-1-17.html) | [Home](index.html) | [Next](release-9-1-15.html) |
| --- | --- | --- |
| Release 9.1.17 | [Up](release.html) | Release 9.1.15 |

* [![@postgresql](/media/img/atpostgresql.png)](https://twitter.com/postgresql)
* [![Git](/media/img/git.png)](https://git.postgresql.org/gitweb/?p=postgresql.git)

[Privacy Policy](/about/privacypolicy) |
[Code of Conduct](/about/policies/coc/) |
[About PostgreSQL](/about/) |
[Contact](/about/contact/)

Copyright © 1996-2025 The PostgreSQL Global Development Group



=== Content from www.postgresql.org_8c8f59e2_20250124_212220.html ===


[![PostgreSQL Elephant Logo](/media/img/about/press/elephant.png)](/)

* [Home](/ "Home")
* [About](/about/ "About")
* [Download](/download/ "Download")
* [Documentation](/docs/ "Documentation")
* [Community](/community/ "Community")
* [Developers](/developer/ "Developers")
* [Support](/support/ "Support")
* [Donate](/about/donate/ "Donate")
* [Your account](/account/ "Your account")

November 21, 2024: [PostgreSQL 17.2, 16.6, 15.10, 14.15, 13.18, and 12.22 Released!](/about/news/postgresql-172-166-1510-1415-1318-and-1222-released-2965/)

## Quick Links

* [About](/about/)
* [Governance](/about/governance/)
* [Policies](/about/policies/)
* [Feature Matrix](/about/featurematrix/)
* [Donate](/about/donate/)
* [History](/docs/current/history.html)
* [Sponsors](/about/sponsors/)
  + [Contributing](/about/contributing/)
  + [Financial](/about/financial/)
  + [Servers](/about/servers/)
* [Latest News](/about/newsarchive/)
* [Upcoming Events](/about/events/)
  + [Past events](/about/eventarchive/)
* [Press](/about/press/)
* [Licence](/about/licence/)

# PostgreSQL 9.4.2, 9.3.7, 9.2.11, 9.1.16, and 9.0.20 released!

Posted on **2015-05-22** by PostgreSQL Global Development Group

The PostgreSQL Global Development Group has released an update with multiple functionality and security fixes to all supported versions of the PostgreSQL database system, which includes minor versions 9.4.2, 9.3.7, 9.2.11, 9.1.16, and 9.0.20. The update contains a critical fix for a potential data corruption issue in PostgreSQL 9.3 and 9.4; users of those versions should update their servers at the next possible opportunity.

Please see [the FAQ about a potential issue](https://wiki.postgresql.org/wiki/May_2015_Fsync_Permissions_Bug) with this update for some users before applying it.

## Data Corruption Fix

For users of PostgreSQL versions 9.3 or 9.4, this release fixes a problem where the database will fail to protect against "multixact wraparound", resulting in data corruption or loss. Users with a high transaction rate (1 million or more per hour) in a database with many foreign keys are especially vulnerable. We strongly urge all users of 9.4 and 9.3 to update their installations in the next few days.

Users of versions 9.2 and earlier are not affected by this issue.

## Security Fixes

This update fixes three security vulnerabilities reported in PostgreSQL over the past few months. None of these issues are seen as particularly urgent. However, users should examine them in case their installations are vulnerable:

* [CVE-2015-3165](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2015-3165) Double "free" after authentication timeout.
* [CVE-2015-3166](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2015-3166) Unanticipated errors from the standard library.
* [CVE-2015-3167](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2015-3167) pgcrypto has multiple error messages for decryption with an incorrect key.

Additionally, we are recommending that all users who use Kerberos, GSSAPI, or SSPI authentication set include\_realm to 1 in pg\_hba.conf, which will become the default in future versions.

More information about these issues, as well as older patched issues, is available on the PostgreSQL Security Page.

## Other Fixes and Improvements

A new, non-default version of the citext extension fixes its previously undocumented regexp\_matches() functions to align with the ordinary text version of those functions. The fixed version has a different return type than the old version, so users of CIText should test their applications before updating the function by running "ALTER EXTENSION citext UPDATE".

In addition to the above, more than 50 reported issues have been fixed in this cumulative update release. Most of the issues named affect all supported versions. These fixes include:

* Render infinite dates and timestamps as infinity when converting to json
* Fix json/jsonb's populate\_record() and to\_record()
* Fix incorrect checking of deferred exclusion constraints
* Improve planning of star-schema-style queries
* Fix three issues with planning joins
* Ensure correct locking with security barrier views
* Fix deadlock at startup when max\_prepared\_transactions is too small
* Recursively fsync() the data directory after a crash
* Fix autovacuum launcher's possible failure to shut down
* Cope with unexpected signals in LockBufferForCleanup()
* Fix crash when doing COPY IN to a table with check constraints
* Avoid waiting for synchronous replication of read-only transactions
* Fix two issues with hash indexes
* Prevent memory leaks in GIN index vacuum
* Fix two issues with background workers
* Several fixes to Logical Decoding replication
* Fix several minor issues with pg\_dump and pg\_upgrade

This release includes an update to tzdata release 2015d, with updates to Egypt, Mongolia, and Palestine, plus historical changes in Canada and Chile.

## 9.0 EOL Soon

Version 9.0 will become End-Of-Life in September 2015. This means that this update is likely to be the next-to-last update for that version. Users of PostgreSQL 9.0 should start planning to upgrade to a more current version before then. See our [versioning policy](http://www.postgresql.org/support/versioning/) for more information about EOL dates.

## Updating

As with other minor releases, users are not required to dump and reload their database or use pg\_upgrade in order to apply this update release; you may simply shut down PostgreSQL and update its binaries. Users who have skipped multiple update releases may need to perform additional post-update steps; see the Release Notes for details.

Links:

* [Download](http://www.postgresql.org/download)
* [Release Notes](http://www.postgresql.org/docs/current/static/release.html)
* [Security Page](http://www.postgresql.org/support/security/)

* [![@postgresql](/media/img/atpostgresql.png)](https://twitter.com/postgresql)
* [![Git](/media/img/git.png)](https://git.postgresql.org/gitweb/?p=postgresql.git)

[Policies](/about/policies/) |
[Code of Conduct](/about/policies/coc/) |
[About PostgreSQL](/about/) |
[Contact](/about/contact/)

Copyright © 1996-2025 The PostgreSQL Global Development Group



=== Content from lists.ubuntu.com_be8ed54b_20250126_033605.html ===


| **ubuntu-hardened -- Ubuntu security discussion** | |
| --- | --- |
|  | |
| **About ubuntu-hardened** | English (USA)   Chinese (Taiwan) |
| Discussion on Ubuntu security updates, development of new security technologies, and general "hardening" of the operating system.  A place to talk about MAC systems (SELinux, AppArmor, Smack) in Ubuntu, about both kernel-level and user-land security improvements and technologies, etc.  To see the collection of prior postings to the list, visit the [ubuntu-hardened Archives](https://lists.ubuntu.com/archives/ubuntu-hardened). | |
| **Using ubuntu-hardened** | |
| To post a message to all the list members, send email to ubuntu-hardened@lists.ubuntu.com. You can subscribe to the list, or change your existing subscription, in the sections below. | |
| **Subscribing to ubuntu-hardened** | |
| Subscribe to ubuntu-hardened by filling out the following form. You will be sent email requesting confirmation, to prevent others from gratuitously subscribing you. This is a hidden list, which means that the list of members is available only to the list administrator.    | Your email address: |  |  | | --- | --- | --- | | Your name (optional): |  |  | | You may enter a privacy password below. This provides only mild security, but should prevent others from messing with your subscription. **Do not use a valuable password** as it will occasionally be emailed back to you in cleartext. If you choose not to enter a password, one will be automatically generated for you, and it will be sent to you once you've confirmed your subscription. You can always request a mail-back of your password when you edit your personal options. | | | | Pick a password: |  |  | | Reenter password to confirm: |  |  | | Which language do you prefer to display your messages? | English (USA)   Chinese (Taiwan) |  | | Would you like to receive list mail batched in a daily digest? | No  Yes | |  | | | | |

| **ubuntu-hardened Subscribers** | |
| (*The subscribers list is only available to the list administrator.*) Enter your admin address and password to visit the subscribers list: Admin address: Password:  To unsubscribe from ubuntu-hardened, get a password reminder, or change your subscription options enter your subscription email address: If you leave the field blank, you will be prompted for your email address | |

---

[ubuntu-hardened](../listinfo/ubuntu-hardened) list run by jamie at ubuntu.com, mdeslaur at ubuntu.com, sbeattie at ubuntu.com, alex.murray at canonical.com
[ubuntu-hardened administrative interface](../admin/ubuntu-hardened) (requires authorization)
[Overview of all lists.ubuntu.com mailing lists](../listinfo)

| [Delivered by Mailmanversion 2.1.20](http://www.gnu.org/software/mailman/index.html) | [Python Powered](http://www.python.org/) | [GNU's Not Unix](http://www.gnu.org/) | [Debian Powered](http://www.debian.org/) |
| --- | --- | --- | --- |

[![](http://tuxedo-es.org/images/hardened_debian.png)](http://www.debian-hardened.org)



=== Content from www.postgresql.org_da8ccc01_20250124_212252.html ===


[![PostgreSQL Elephant Logo](/media/img/about/press/elephant.png)](/)

* [Home](/ "Home")
* [About](/about/ "About")
* [Download](/download/ "Download")
* [Documentation](/docs/ "Documentation")
* [Community](/community/ "Community")
* [Developers](/developer/ "Developers")
* [Support](/support/ "Support")
* [Donate](/about/donate/ "Donate")
* [Your account](/account/ "Your account")

November 21, 2024: [PostgreSQL 17.2, 16.6, 15.10, 14.15, 13.18, and 12.22 Released!](/about/news/postgresql-172-166-1510-1415-1318-and-1222-released-2965/)

[Documentation](/docs/ "Documentation") → [PostgreSQL 9.0](/docs/9.0/index.html)

Unsupported versions:
[9.3](/docs/9.3/release-9-0-20.html "PostgreSQL 9.3 - Release 9.0.20")
/
[9.2](/docs/9.2/release-9-0-20.html "PostgreSQL 9.2 - Release 9.0.20")
/
[9.1](/docs/9.1/release-9-0-20.html "PostgreSQL 9.1 - Release 9.0.20")
/
[9.0](/docs/9.0/release-9-0-20.html "PostgreSQL 9.0 - Release 9.0.20")

This documentation is for an unsupported version of PostgreSQL.

You may want to view the same page for the
[current](/docs/current/release-9-0-20.html "PostgreSQL  - Release 9.0.20")
version, or one of the other supported versions listed above instead.

| [PostgreSQL 9.0.23 Documentation](index.html) | | | | |
| --- | --- | --- | --- | --- |
| [Prev](release-9-0-21.html "Release 9.0.21") | [Up](release.html) | Appendix E. Release Notes | [Next](release-9-0-19.html "Release 9.0.19") |

---

# E.4. Release 9.0.20

> **Release Date:** 2015-05-22

This release contains a variety of fixes from 9.0.19. For
information about new features in the 9.0 major release, see
[Section E.24](release-9-0.html).

The PostgreSQL community will
stop releasing updates for the 9.0.X release series in September
2015. Users are encouraged to update to a newer release branch
soon.

## E.4.1. Migration to Version 9.0.20

A dump/restore is not required for those running 9.0.X.

However, if you are upgrading from a version earlier than
9.0.18, see [Section E.6](release-9-0-18.html).

## E.4.2. Changes

* Avoid possible crash when client disconnects just before
  the authentication timeout expires (Benkocs Norbert
  Attila)

  If the timeout interrupt fired partway through the
  session shutdown sequence, SSL-related state would be freed
  twice, typically causing a crash and hence denial of
  service to other sessions. Experimentation shows that an
  unauthenticated remote attacker could trigger the bug
  somewhat consistently, hence treat as security issue.
  (CVE-2015-3165)
* Improve detection of system-call failures (Noah
  Misch)

  Our replacement implementation of `snprintf()` failed to check for errors
  reported by the underlying system library calls; the main
  case that might be missed is out-of-memory situations. In
  the worst case this might lead to information exposure, due
  to our code assuming that a buffer had been overwritten
  when it hadn't been. Also, there were a few places in which
  security-relevant calls of other system library functions
  did not check for failure.

  It remains possible that some calls of the `*printf()` family of functions are
  vulnerable to information disclosure if an out-of-memory
  error occurs at just the wrong time. We judge the risk to
  not be large, but will continue analysis in this area.
  (CVE-2015-3166)
* In contrib/pgcrypto, uniformly
  report decryption failures as "Wrong
  key or corrupt data" (Noah Misch)

  Previously, some cases of decryption with an incorrect
  key could report other error message texts. It has been
  shown that such variance in error reports can aid attackers
  in recovering keys from other systems. While it's unknown
  whether pgcrypto's specific
  behaviors are likewise exploitable, it seems better to
  avoid the risk by using a one-size-fits-all message.
  (CVE-2015-3167)
* Fix incorrect checking of deferred exclusion constraints
  after a HOT update (Tom Lane)

  If a new row that potentially violates a deferred
  exclusion constraint is HOT-updated (that is, no indexed
  columns change and the row can be stored back onto the same
  table page) later in the same transaction, the exclusion
  constraint would be reported as violated when the check
  finally occurred, even if the row(s) the new row originally
  conflicted with had been deleted.
* Prevent improper reordering of antijoins (NOT EXISTS
  joins) versus other outer joins (Tom Lane)

  This oversight in the planner has been observed to cause
  "could not find RelOptInfo for given
  relids" errors, but it seems possible that sometimes
  an incorrect query plan might get past that consistency
  check and result in silently-wrong query output.
* Fix incorrect matching of subexpressions in outer-join
  plan nodes (Tom Lane)

  Previously, if textually identical non-strict
  subexpressions were used both above and below an outer
  join, the planner might try to re-use the value computed
  below the join, which would be incorrect because the
  executor would force the value to NULL in case of an
  unmatched outer row.
* Fix GEQO planner to cope with failure of its join order
  heuristic (Tom Lane)

  This oversight has been seen to lead to "failed to join all relations together"
  errors in queries involving LATERAL, and that might happen in other
  cases as well.
* Fix possible deadlock at startup when max\_prepared\_transactions is too small
  (Heikki Linnakangas)
* Don't archive useless preallocated WAL files after a
  timeline switch (Heikki Linnakangas)
* Avoid "cannot
  GetMultiXactIdMembers() during recovery" error
  (Álvaro Herrera)
* Recursively `fsync()` the
  data directory after a crash (Abhijit Menon-Sen, Robert
  Haas)

  This ensures consistency if another crash occurs shortly
  later. (The second crash would have to be a system-level
  crash, not just a database crash, for there to be a
  problem.)
* Fix autovacuum launcher's possible failure to shut down,
  if an error occurs after it receives SIGTERM (Álvaro
  Herrera)
* Cope with unexpected signals in `LockBufferForCleanup()` (Andres
  Freund)

  This oversight could result in spurious errors about
  "multiple backends attempting to wait
  for pincount 1".
* Avoid waiting for WAL flush or synchronous replication
  during commit of a transaction that was read-only so far as
  the user is concerned (Andres Freund)

  Previously, a delay could occur at commit in
  transactions that had written WAL due to HOT page pruning,
  leading to undesirable effects such as sessions getting
  stuck at startup if all synchronous replicas are down.
  Sessions have also been observed to get stuck in catchup
  interrupt processing when using synchronous replication;
  this will fix that problem as well.
* Fix crash when manipulating hash indexes on temporary
  tables (Heikki Linnakangas)
* Fix possible failure during hash index bucket split, if
  other processes are modifying the index concurrently (Tom
  Lane)
* Check for interrupts while analyzing index expressions
  (Jeff Janes)

  ANALYZE executes index
  expressions many times; if there are slow functions in such
  an expression, it's desirable to be able to cancel the
  ANALYZE before that loop
  finishes.
* Add the name of the target server to object description
  strings for foreign-server user mappings (Álvaro
  Herrera)
* Recommend setting include\_realm
  to 1 when using Kerberos/GSSAPI/SSPI authentication
  (Stephen Frost)

  Without this, identically-named users from different
  realms cannot be distinguished. For the moment this is only
  a documentation change, but it will become the default
  setting in PostgreSQL
  9.5.
* Remove code for matching IPv4 pg\_hba.conf entries to IPv4-in-IPv6
  addresses (Tom Lane)

  This hack was added in 2003 in response to a report that
  some Linux kernels of the time would report IPv4
  connections as having IPv4-in-IPv6 addresses. However, the
  logic was accidentally broken in 9.0. The lack of any field
  complaints since then shows that it's not needed anymore.
  Now we have reports that the broken code causes crashes on
  some systems, so let's just remove it rather than fix it.
  (Had we chosen to fix it, that would make for a subtle and
  potentially security-sensitive change in the effective
  meaning of IPv4 pg\_hba.conf
  entries, which does not seem like a good thing to do in
  minor releases.)
* While shutting down service on Windows, periodically
  send status updates to the Service Control Manager to
  prevent it from killing the service too soon; and ensure
  that pg\_ctl will wait for
  shutdown (Krystian Bigaj)
* Reduce risk of network deadlock when using libpq's non-blocking mode (Heikki
  Linnakangas)

  When sending large volumes of data, it's important to
  drain the input buffer every so often, in case the server
  has sent enough response data to cause it to block on
  output. (A typical scenario is that the server is sending a
  stream of NOTICE messages during COPY
  FROM STDIN.) This worked properly in the normal
  blocking mode, but not so much in non-blocking mode. We've
  modified libpq to
  opportunistically drain input when it can, but a full
  defense against this problem requires application
  cooperation: the application should watch for socket
  read-ready as well as write-ready conditions, and be sure
  to call `PQconsumeInput()` upon
  read-ready.
* Fix array handling in ecpg (Michael Meskes)
* Fix psql to sanely
  handle URIs and conninfo strings as the first parameter to
  \connect (David Fetter, Andrew
  Dunstan, Álvaro Herrera)

  This syntax has been accepted (but undocumented) for a
  long time, but previously some parameters might be taken
  from the old connection instead of the given string, which
  was agreed to be undesirable.
* Suppress incorrect complaints from psql on some platforms that it failed
  to write ~/.psql\_history at exit
  (Tom Lane)

  This misbehavior was caused by a workaround for a bug in
  very old (pre-2006) versions of libedit. We fixed it by removing the
  workaround, which will cause a similar failure to appear
  for anyone still using such versions of libedit. Recommendation: upgrade that
  library, or use libreadline.
* Fix pg\_dump's rule for
  deciding which casts are system-provided casts that should
  not be dumped (Tom Lane)
* Fix dumping of views that are just VALUES(...) but have column aliases (Tom
  Lane)
* In pg\_upgrade, force
  timeline 1 in the new cluster (Bruce Momjian)

  This change prevents upgrade failures caused by bogus
  complaints about missing WAL history files.
* In pg\_upgrade, check
  for improperly non-connectable databases before proceeding
  (Bruce Momjian)
* In pg\_upgrade, quote
  directory paths properly in the generated delete\_old\_cluster script (Bruce
  Momjian)
* In pg\_upgrade, preserve
  database-level freezing info properly (Bruce Momjian)

  This oversight could cause missing-clog-file errors for
  tables within the postgres and
  template1 databases.
* Run pg\_upgrade and
  pg\_resetxlog with
  restricted privileges on Windows, so that they don't fail
  when run by an administrator (Muhammad Asif Naeem)
* Fix slow sorting algorithm in contrib/intarray (Tom Lane)
* Fix compile failure on Sparc V8 machines (Rob Rowan)
* Update time zone data files to tzdata release 2015d for DST law
  changes in Egypt, Mongolia, and Palestine, plus historical
  changes in Canada and Chile. Also adopt revised zone
  abbreviations for the America/Adak zone (HST/HDT not
  HAST/HADT).

---

| [Prev](release-9-0-21.html) | [Home](index.html) | [Next](release-9-0-19.html) |
| --- | --- | --- |
| Release 9.0.21 | [Up](release.html) | Release 9.0.19 |

* [![@postgresql](/media/img/atpostgresql.png)](https://twitter.com/postgresql)
* [![Git](/media/img/git.png)](https://git.postgresql.org/gitweb/?p=postgresql.git)

[Privacy Policy](/about/privacypolicy) |
[Code of Conduct](/about/policies/coc/) |
[About PostgreSQL](/about/) |
[Contact](/about/contact/)

Copyright © 1996-2025 The PostgreSQL Global Development Group



=== Content from www.postgresql.org_25a2edbc_20250124_212254.html ===


[![PostgreSQL Elephant Logo](/media/img/about/press/elephant.png)](/)

* [Home](/ "Home")
* [About](/about/ "About")
* [Download](/download/ "Download")
* [Documentation](/docs/ "Documentation")
* [Community](/community/ "Community")
* [Developers](/developer/ "Developers")
* [Support](/support/ "Support")
* [Donate](/about/donate/ "Donate")
* [Your account](/account/ "Your account")

November 21, 2024: [PostgreSQL 17.2, 16.6, 15.10, 14.15, 13.18, and 12.22 Released!](/about/news/postgresql-172-166-1510-1415-1318-and-1222-released-2965/)

[Documentation](/docs/ "Documentation") → [PostgreSQL 9.4](/docs/9.4/index.html)

Unsupported versions:
[9.4](/docs/9.4/release-9-4-2.html "PostgreSQL 9.4 - Release 9.4.2")

This documentation is for an unsupported version of PostgreSQL.

You may want to view the same page for the
[current](/docs/current/release-9-4-2.html "PostgreSQL  - Release 9.4.2")
version, or one of the other supported versions listed above instead.

| [PostgreSQL 9.4.26 Documentation](index.html) | | | |
| --- | --- | --- | --- |
| [Prev](release-9-4-3.html "Release 9.4.3") | [Up](release.html) | Appendix E. Release Notes | [Next](release-9-4-1.html "Release 9.4.1") |

---

# E.25. Release 9.4.2

**Release date:** 2015-05-22

This release contains a variety of fixes from 9.4.1. For information about new features in the 9.4 major release, see [Section E.27](release-9-4.html).

## E.25.1. Migration to Version 9.4.2

A dump/restore is not required for those running 9.4.X.

However, if you use contrib/citext's `regexp_matches()` functions, see the changelog entry below about that.

Also, if you are upgrading from a version earlier than 9.4.1, see [Section E.26](release-9-4-1.html).

## E.25.2. Changes

* Avoid possible crash when client disconnects just before the authentication timeout expires (Benkocs Norbert Attila)

  If the timeout interrupt fired partway through the session shutdown sequence, SSL-related state would be freed twice, typically causing a crash and hence denial of service to other sessions. Experimentation shows that an unauthenticated remote attacker could trigger the bug somewhat consistently, hence treat as security issue. (CVE-2015-3165)
* Improve detection of system-call failures (Noah Misch)

  Our replacement implementation of `snprintf()` failed to check for errors reported by the underlying system library calls; the main case that might be missed is out-of-memory situations. In the worst case this might lead to information exposure, due to our code assuming that a buffer had been overwritten when it hadn't been. Also, there were a few places in which security-relevant calls of other system library functions did not check for failure.

  It remains possible that some calls of the `*printf()` family of functions are vulnerable to information disclosure if an out-of-memory error occurs at just the wrong time. We judge the risk to not be large, but will continue analysis in this area. (CVE-2015-3166)
* In contrib/pgcrypto, uniformly report decryption failures as "Wrong key or corrupt data" (Noah Misch)

  Previously, some cases of decryption with an incorrect key could report other error message texts. It has been shown that such variance in error reports can aid attackers in recovering keys from other systems. While it's unknown whether pgcrypto's specific behaviors are likewise exploitable, it seems better to avoid the risk by using a one-size-fits-all message. (CVE-2015-3167)
* Protect against wraparound of multixact member IDs (Álvaro Herrera, Robert Haas, Thomas Munro)

  Under certain usage patterns, the existing defenses against this might be insufficient, allowing pg\_multixact/members files to be removed too early, resulting in data loss. The fix for this includes modifying the server to fail transactions that would result in overwriting old multixact member ID data, and improving autovacuum to ensure it will act proactively to prevent multixact member ID wraparound, as it does for transaction ID wraparound.
* Fix incorrect declaration of contrib/citext's `regexp_matches()` functions (Tom Lane)

  These functions should return setof text[], like the core functions they are wrappers for; but they were incorrectly declared as returning just text[]. This mistake had two results: first, if there was no match you got a scalar null result, whereas what you should get is an empty set (zero rows). Second, the g flag was effectively ignored, since you would get only one result array even if there were multiple matches.

  While the latter behavior is clearly a bug, there might be applications depending on the former behavior; therefore the function declarations will not be changed by default until PostgreSQL 9.5. In pre-9.5 branches, the old behavior exists in version 1.0 of the citext extension, while we have provided corrected declarations in version 1.1 (which is not installed by default). To adopt the fix in pre-9.5 branches, execute ALTER EXTENSION citext UPDATE TO '1.1' in each database in which citext is installed. (You can also "update" back to 1.0 if you need to undo that.) Be aware that either update direction will require dropping and recreating any views or rules that use citext's `regexp_matches()` functions.
* Render infinite dates and timestamps as infinity when converting to json, rather than throwing an error (Andrew Dunstan)
* Fix json/jsonb's `populate_record()` and `to_record()` functions to handle empty input properly (Andrew Dunstan)
* Fix incorrect checking of deferred exclusion constraints after a HOT update (Tom Lane)

  If a new row that potentially violates a deferred exclusion constraint is HOT-updated (that is, no indexed columns change and the row can be stored back onto the same table page) later in the same transaction, the exclusion constraint would be reported as violated when the check finally occurred, even if the row(s) the new row originally conflicted with had been deleted.
* Fix behavior when changing foreign key constraint deferrability status with ALTER TABLE ... ALTER CONSTRAINT (Tom Lane)

  Operations later in the same session or concurrent sessions might not honor the status change promptly.
* Fix planning of star-schema-style queries (Tom Lane)

  Sometimes, efficient scanning of a large table requires that index parameters be provided from more than one other table (commonly, dimension tables whose keys are needed to index a large fact table). The planner should be able to find such plans, but an overly restrictive search heuristic prevented it.
* Prevent improper reordering of antijoins (NOT EXISTS joins) versus other outer joins (Tom Lane)

  This oversight in the planner has been observed to cause "could not find RelOptInfo for given relids" errors, but it seems possible that sometimes an incorrect query plan might get past that consistency check and result in silently-wrong query output.
* Fix incorrect matching of subexpressions in outer-join plan nodes (Tom Lane)

  Previously, if textually identical non-strict subexpressions were used both above and below an outer join, the planner might try to re-use the value computed below the join, which would be incorrect because the executor would force the value to NULL in case of an unmatched outer row.
* Fix GEQO planner to cope with failure of its join order heuristic (Tom Lane)

  This oversight has been seen to lead to "failed to join all relations together" errors in queries involving LATERAL, and that might happen in other cases as well.
* Ensure that row locking occurs properly when the target of an UPDATE or DELETE is a security-barrier view (Stephen Frost)
* Use a file opened for read/write when syncing replication slot data during database startup (Andres Freund)

  On some platforms, the previous coding could result in errors like "could not fsync file "pg\_replslot/...": Bad file descriptor".
* Fix possible deadlock at startup when max\_prepared\_transactions is too small (Heikki Linnakangas)
* Don't archive useless preallocated WAL files after a timeline switch (Heikki Linnakangas)
* Recursively `fsync()` the data directory after a crash (Abhijit Menon-Sen, Robert Haas)

  This ensures consistency if another crash occurs shortly later. (The second crash would have to be a system-level crash, not just a database crash, for there to be a problem.)
* Fix autovacuum launcher's possible failure to shut down, if an error occurs after it receives SIGTERM (Álvaro Herrera)
* Fix failure to handle invalidation messages for system catalogs early in session startup (Tom Lane)

  This oversight could result in failures in sessions that start concurrently with a VACUUM FULL on a system catalog.
* Fix crash in `BackendIdGetTransactionIds()` when trying to get status for a backend process that just exited (Tom Lane)
* Cope with unexpected signals in `LockBufferForCleanup()` (Andres Freund)

  This oversight could result in spurious errors about "multiple backends attempting to wait for pincount 1".
* Fix crash when doing COPY IN to a table with check constraints that contain whole-row references (Tom Lane)

  The known failure case only crashes in 9.4 and up, but there is very similar code in 9.3 and 9.2, so back-patch those branches as well.
* Avoid waiting for WAL flush or synchronous replication during commit of a transaction that was read-only so far as the user is concerned (Andres Freund)

  Previously, a delay could occur at commit in transactions that had written WAL due to HOT page pruning, leading to undesirable effects such as sessions getting stuck at startup if all synchronous replicas are down. Sessions have also been observed to get stuck in catchup interrupt processing when using synchronous replication; this will fix that problem as well.
* Avoid busy-waiting with short recovery\_min\_apply\_delay values (Andres Freund)
* Fix crash when manipulating hash indexes on temporary tables (Heikki Linnakangas)
* Fix possible failure during hash index bucket split, if other processes are modifying the index concurrently (Tom Lane)
* Fix memory leaks in GIN index vacuum (Heikki Linnakangas)
* Check for interrupts while analyzing index expressions (Jeff Janes)

  ANALYZE executes index expressions many times; if there are slow functions in such an expression, it's desirable to be able to cancel the ANALYZE before that loop finishes.
* Ensure tableoid of a foreign table is reported correctly when a READ COMMITTED recheck occurs after locking rows in SELECT FOR UPDATE, UPDATE, or DELETE (Etsuro Fujita)
* Add the name of the target server to object description strings for foreign-server user mappings (Álvaro Herrera)
* Include the schema name in object identity strings for conversions (Álvaro Herrera)
* Recommend setting include\_realm to 1 when using Kerberos/GSSAPI/SSPI authentication (Stephen Frost)

  Without this, identically-named users from different realms cannot be distinguished. For the moment this is only a documentation change, but it will become the default setting in PostgreSQL 9.5.
* Remove code for matching IPv4 pg\_hba.conf entries to IPv4-in-IPv6 addresses (Tom Lane)

  This hack was added in 2003 in response to a report that some Linux kernels of the time would report IPv4 connections as having IPv4-in-IPv6 addresses. However, the logic was accidentally broken in 9.0. The lack of any field complaints since then shows that it's not needed anymore. Now we have reports that the broken code causes crashes on some systems, so let's just remove it rather than fix it. (Had we chosen to fix it, that would make for a subtle and potentially security-sensitive change in the effective meaning of IPv4 pg\_hba.conf entries, which does not seem like a good thing to do in minor releases.)
* Fix status reporting for terminated background workers that were never actually started (Robert Haas)
* After a database crash, don't restart background workers that are marked BGW\_NEVER\_RESTART (Amit Khandekar)
* Report WAL flush, not insert, position in IDENTIFY\_SYSTEM replication command (Heikki Linnakangas)

  This avoids a possible startup failure in pg\_receivexlog.
* While shutting down service on Windows, periodically send status updates to the Service Control Manager to prevent it from killing the service too soon; and ensure that pg\_ctl will wait for shutdown (Krystian Bigaj)
* Reduce risk of network deadlock when using libpq's non-blocking mode (Heikki Linnakangas)

  When sending large volumes of data, it's important to drain the input buffer every so often, in case the server has sent enough response data to cause it to block on output. (A typical scenario is that the server is sending a stream of NOTICE messages during COPY FROM STDIN.) This worked properly in the normal blocking mode, but not so much in non-blocking mode. We've modified libpq to opportunistically drain input when it can, but a full defense against this problem requires application cooperation: the application should watch for socket read-ready as well as write-ready conditions, and be sure to call `PQconsumeInput()` upon read-ready.
* In libpq, fix misparsing of empty values in URI connection strings (Thomas Fanghaenel)
* Fix array handling in ecpg (Michael Meskes)
* Fix psql to sanely handle URIs and conninfo strings as the first parameter to \connect (David Fetter, Andrew Dunstan, Álvaro Herrera)

  This syntax has been accepted (but undocumented) for a long time, but previously some parameters might be taken from the old connection instead of the given string, which was agreed to be undesirable.
* Suppress incorrect complaints from psql on some platforms that it failed to write ~/.psql\_history at exit (Tom Lane)

  This misbehavior was caused by a workaround for a bug in very old (pre-2006) versions of libedit. We fixed it by removing the workaround, which will cause a similar failure to appear for anyone still using such versions of libedit. Recommendation: upgrade that library, or use libreadline.
* Fix pg\_dump's rule for deciding which casts are system-provided casts that should not be dumped (Tom Lane)
* In pg\_dump, fix failure to honor -Z compression level option together with -Fd (Michael Paquier)
* Make pg\_dump consider foreign key relationships between extension configuration tables while choosing dump order (Gilles Darold, Michael Paquier, Stephen Frost)

  This oversight could result in producing dumps that fail to reload because foreign key constraints are transiently violated.
* Avoid possible pg\_dump failure when concurrent sessions are creating and dropping temporary functions (Tom Lane)
* Fix dumping of views that are just VALUES(...) but have column aliases (Tom Lane)
* Ensure that a view's replication identity is correctly set to nothing during dump/restore (Marko Tiikkaja)

  Previously, if the view was involved in a circular dependency, it might wind up with an incorrect replication identity property.
* In pg\_upgrade, force timeline 1 in the new cluster (Bruce Momjian)

  This change prevents upgrade failures caused by bogus complaints about missing WAL history files.
* In pg\_upgrade, check for improperly non-connectable databases before proceeding (Bruce Momjian)
* In pg\_upgrade, quote directory paths properly in the generated delete\_old\_cluster script (Bruce Momjian)
* In pg\_upgrade, preserve database-level freezing info properly (Bruce Momjian)

  This oversight could cause missing-clog-file errors for tables within the postgres and template1 databases.
* Run pg\_upgrade and pg\_resetxlog with restricted privileges on Windows, so that they don't fail when run by an administrator (Muhammad Asif Naeem)
* Improve handling of `readdir()` failures when scanning directories in initdb and pg\_basebackup (Marco Nenciarini)
* Fix slow sorting algorithm in contrib/intarray (Tom Lane)
* Fix compile failure on Sparc V8 machines (Rob Rowan)
* Silence some build warnings on macOS (Tom Lane)
* Update time zone data files to tzdata release 2015d for DST law changes in Egypt, Mongolia, and Palestine, plus historical changes in Canada and Chile. Also adopt revised zone abbreviations for the America/Adak zone (HST/HDT not HAST/HADT).

---

| [Prev](release-9-4-3.html) | [Home](index.html) | [Next](release-9-4-1.html) |
| --- | --- | --- |
| Release 9.4.3 | [Up](release.html) | Release 9.4.1 |

* [![@postgresql](/media/img/atpostgresql.png)](https://twitter.com/postgresql)
* [![Git](/media/img/git.png)](https://git.postgresql.org/gitweb/?p=postgresql.git)

[Privacy Policy](/about/privacypolicy) |
[Code of Conduct](/about/policies/coc/) |
[About PostgreSQL](/about/) |
[Contact](/about/contact/)

Copyright © 1996-2025 The PostgreSQL Global Development Group



=== Content from www.debian.org_fb8300d3_20250124_212116.html ===


---

[[Date Prev](msg00159.html)][[Date Next](msg00161.html)]
[[Thread Prev](msg00159.html)][[Thread Next](msg00161.html)]
[[Date Index](maillist.html#00160)]
[[Thread Index](threads.html#00160)]

# [SECURITY] [DSA 3269-1] postgresql-9.1 security update

---

* *To*: debian-security-announce@lists.debian.org
* *Subject*: [SECURITY] [DSA 3269-1] postgresql-9.1 security update
* *From*: Christoph Berg <myon@debian.org>
* *Date*: Fri, 22 May 2015 15:09:19 +0000
* *Message-id*: <[[🔎]](/msgid-search/E1YvoZb-0003S5-Ef%40master.debian.org) [E1YvoZb-0003S5-Ef@master.debian.org](msg00160.html)>
* *Reply-to*: debian-security@lists.debian.org

---

```
-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA512

- -------------------------------------------------------------------------
Debian Security Advisory DSA-3269-1                   security@debian.org
<http://www.debian.org/security/>                            Christoph Berg
May 22, 2015                           <http://www.debian.org/security/faq>
- -------------------------------------------------------------------------

Package        : postgresql-9.1
CVE ID         : CVE-2015-3165 CVE-2015-3166 CVE-2015-3167

Several vulnerabilities have been found in PostgreSQL-9.1, a SQL
database system.

CVE-2015-3165 (Remote crash)

    SSL clients disconnecting just before the authentication timeout
    expires can cause the server to crash.

CVE-2015-3166 (Information exposure)

    The replacement implementation of snprintf() failed to check for
    errors reported by the underlying system library calls; the main
    case that might be missed is out-of-memory situations. In the worst
    case this might lead to information exposure.

CVE-2015-3167 (Possible side-channel key exposure)

    In contrib/pgcrypto, some cases of decryption with an incorrect key
    could report other error message texts. Fix by using a
    one-size-fits-all message.

For the oldstable distribution (wheezy), these problems have been fixed
in version 9.1.16-0+deb7u1.

For the stable distribution (jessie), these problems have been fixed in
version 9.1.16-0+deb8u1. (Jessie contains a reduced postgresql-9.1
package; only CVE-2015-3166 is fixed in the produced binary package
postgresql-plperl-9.1. We recommend to upgrade to postgresql-9.4 to get
the full set of fixes. See the Jessie release notes for details.)

The testing distribution (stretch) and the unstable distribution (sid)
do not contain the postgresql-9.1 package.

We recommend that you upgrade your postgresql-9.1 packages.

Further information about Debian Security Advisories, how to apply
these updates to your system and frequently asked questions can be
found at: <https://www.debian.org/security/>

Mailing list: debian-security-announce@lists.debian.org
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1

iQIcBAEBCgAGBQJVX0Y1AAoJEAVMuPMTQ89EVJYP/3KmCAo+qajcPllCtIqJ+Bxa
072iEGPz2QId5AOsAlWJ6Oi0iOSTPltrY/Mch8WLGovchBrpRpZNQpcGnRAWMst9
BbA3teZtFpeDuWk82rXAkIztquvsJfbzD9BKSuzmYNK5N+bCmcTGu024LA1qyG/M
xFeE72tcWcUySL3sUkWnVrJqWhU5u5kodpBT1mtjLOwX+GF1DkZV1dwr7NiaEs4A
qMYv+xi+ZZrEdKQ2UYUuGcPY4Z5/4XIj4/qaap5p8cv7yJ/MBr7+G7UM/bYpQ4dz
qfCyGIXARAcT21bjIRVOl8K45nSDzEDk3D4DLrlIGgqOKz1+72dv4P/fJcUsUVhN
kUkK1qX2Ef2nSXgzedoy+M+MiAP+B0NbCf/48ORazXiVkI6eojjJYO6TXmCZ+M6E
uyt+ff4AkVm3qVRahj6JI7RW8qbTDUsQWtrCb7pZa9Dfkv3lAq7kC+q+QLTQxl9e
IkIGAT1sKLCpwVI1K6qqPp8s2Jg8pQLScxsKUN0PX0OJ++AhCYqtUymf6YgCtXbF
I7PZP915LniPpNsM/VUtEkHJ8thYGvQ+DZOBBb9g4KVsZdcb+xDbCOnuojOyRVt0
4IEpx6AOcCnEnCwsyGek/j+9fTej1jf227dM17XofER9zArK/re5g6GKw9fqJSq6
bJoIGcHHP1SYqFW8omHS
=G0/U
-----END PGP SIGNATURE-----

```

---



=== Content from ubuntu.com_c9396253_20250124_212115.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# USN-2621-1: PostgreSQL vulnerabilities

25 May 2015

Several security issues were fixed in PostgreSQL.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Releases

* [Ubuntu 15.04](/security/notices?release=vivid)
* [Ubuntu 14.10](/security/notices?release=utopic)
* [Ubuntu 14.04 ESM](/security/notices?release=trusty)
* [Ubuntu 12.04](/security/notices?release=precise)

## Packages

* [postgresql-9.1](/security/cves?package=postgresql-9.1) - Object-relational SQL database
* [postgresql-9.3](/security/cves?package=postgresql-9.3) - Object-relational SQL database
* [postgresql-9.4](/security/cves?package=postgresql-9.4) - Object-relational SQL database

## Details

Benkocs Norbert Attila discovered that PostgreSQL incorrectly handled

authentication timeouts. A remote attacker could use this flaw to cause the

unauthenticated session to crash, possibly leading to a security issue.

([CVE-2015-3165](/security/CVE-2015-3165))

Noah Misch discovered that PostgreSQL incorrectly handled certain standard

library function return values, possibly leading to security issues.

([CVE-2015-3166](/security/CVE-2015-3166))

Noah Misch discovered that the pgcrypto function could return different

error messages when decrypting using an incorrect key, possibly leading to

a security issue. ([CVE-2015-3167](/security/CVE-2015-3167))

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Update instructions

The problem can be corrected by updating your system to the following package versions:

##### Ubuntu 15.04

* [postgresql-9.4](https://launchpad.net/ubuntu/%2Bsource/postgresql-9.4)
  -
  [9.4.2-0ubuntu0.15.04](https://launchpad.net/ubuntu/%2Bsource/postgresql-9.4/9.4.2-0ubuntu0.15.04)

##### Ubuntu 14.10

* [postgresql-9.4](https://launchpad.net/ubuntu/%2Bsource/postgresql-9.4)
  -
  [9.4.2-0ubuntu0.14.10](https://launchpad.net/ubuntu/%2Bsource/postgresql-9.4/9.4.2-0ubuntu0.14.10)

##### Ubuntu 14.04

* [postgresql-9.3](https://launchpad.net/ubuntu/%2Bsource/postgresql-9.3)
  -
  [9.3.7-0ubuntu0.14.04](https://launchpad.net/ubuntu/%2Bsource/postgresql-9.3/9.3.7-0ubuntu0.14.04)

##### Ubuntu 12.04

* [postgresql-9.1](https://launchpad.net/ubuntu/%2Bsource/postgresql-9.1)
  -
  [9.1.16-0ubuntu0.12.04](https://launchpad.net/ubuntu/%2Bsource/postgresql-9.1/9.1.16-0ubuntu0.12.04)

This update uses a new upstream release, which includes additional bug

fixes. In general, a standard system update will make all the necessary

changes.

## References

* [CVE-2015-3165](/security/CVE-2015-3165)
* [CVE-2015-3166](/security/CVE-2015-3166)
* [CVE-2015-3167](/security/CVE-2015-3167)

### Join the discussion

* [Ubuntu security updates mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened)
* [Security announcements mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-security-announce)

### Need help with your security needs?

Ubuntu Pro provides up to ten-year security coverage for over 23,000 open-source packages within the Ubuntu Main and Universe repositories.

[Talk to an expert to find out what would work best for you](/contact-us/form?product=pro)

### Further reading

* *Loading...*

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page



=== Content from www.debian.org_64fdabff_20250124_212117.html ===


---

[[Date Prev](msg00160.html)][[Date Next](msg00162.html)]
[[Thread Prev](msg00160.html)][[Thread Next](msg00162.html)]
[[Date Index](maillist.html#00161)]
[[Thread Index](threads.html#00161)]

# [SECURITY] [DSA 3270-1] postgresql-9.4 security update

---

* *To*: debian-security-announce@lists.debian.org
* *Subject*: [SECURITY] [DSA 3270-1] postgresql-9.4 security update
* *From*: Christoph Berg <myon@debian.org>
* *Date*: Fri, 22 May 2015 15:18:39 +0000
* *Message-id*: <[[🔎]](/msgid-search/E1Yvoid-0003tY-6O%40master.debian.org) [E1Yvoid-0003tY-6O@master.debian.org](msg00161.html)>
* *Reply-to*: debian-security@lists.debian.org

---

```
-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA512

- -------------------------------------------------------------------------
Debian Security Advisory DSA-3270-1                   security@debian.org
<http://www.debian.org/security/>                            Christoph Berg
May 22, 2015                           <http://www.debian.org/security/faq>
- -------------------------------------------------------------------------

Package        : postgresql-9.4
CVE ID         : CVE-2015-3165 CVE-2015-3166 CVE-2015-3167

Several vulnerabilities have been found in PostgreSQL-9.4, a SQL
database system.

CVE-2015-3165 (Remote crash)

    SSL clients disconnecting just before the authentication timeout
    expires can cause the server to crash.

CVE-2015-3166 (Information exposure)

    The replacement implementation of snprintf() failed to check for
    errors reported by the underlying system library calls; the main
    case that might be missed is out-of-memory situations. In the worst
    case this might lead to information exposure.

CVE-2015-3167 (Possible side-channel key exposure)

    In contrib/pgcrypto, some cases of decryption with an incorrect key
    could report other error message texts. Fix by using a
    one-size-fits-all message.

For the stable distribution (jessie), these problems have been fixed in
version 9.4.2-0+deb8u1.

For the testing distribution (stretch), these problems will be fixed
soon.

For the unstable distribution (sid), these problems have been fixed in
version 9.4.2-1.

We recommend that you upgrade your postgresql-9.4 packages.

Further information about Debian Security Advisories, how to apply
these updates to your system and frequently asked questions can be
found at: <https://www.debian.org/security/>

Mailing list: debian-security-announce@lists.debian.org
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1

iQIcBAEBCgAGBQJVX0iTAAoJEAVMuPMTQ89EOo4P/08xy75M/fh+SGhqc2BHHlYz
rw2R0p52t6ijS+zt6Z9klLvcFE+tuJNB/cr8CnW1PNuOcejwsUkyHahmxXROG4Y4
wg89EJ/e2kVtZxNGiTMDpspwmOKLqZSf4UI3E/xCmxU6tiHJL/Ihn/MJUr3WwEZS
yiUs6fZUpuxo9X8Hoi419fpby5Saefx5pYgQ+i3Za4cD90pWi8t/zPUfwpfaIPMS
s1z0165j7pKdevLUCVhKLsZF2CEcykrVdXASEscbGWoqeH2+Hf9l7A0rW1QRL1eE
CJyFOg3O/Git4JmnmV5A/uI5YVEUALzJYweuSilZg3gRz6sLV9/CI5IRirZlyGSA
JYiFjJZMtCjmjPaMoBnCH5RhPh7jkDO2KJ/8UkvH9M/8AMwy1ex4aixGCjPvJeUL
PM4sShtUe9jJszfkJliX1KtyXyvyUbCQl2gATFQUJlOnn5HvWE7J5R3mxKR+k12P
SyF+C6Exzd90UjYPNwaFkIf54Pgmwd90wutO3wf63zyQxPVMGyTuMVHW0Kc5phI7
GGxgQjMFKOi7QMDBhVoIcdyEJndqKZOwpmTUi7NlbDGPx0RiExKIzC5DSnz0VYoX
uRdRPF/jQqdbnVnHAv79BJT9QtyjUNVNXIccSdZiG33bLSiSZNxw4btY/npuDCTN
7zkVlxdUQcdTogIM2OAG
=CFYg
-----END PGP SIGNATURE-----

```

---



=== Content from www.postgresql.org_eb70babc_20250124_212252.html ===


[![PostgreSQL Elephant Logo](/media/img/about/press/elephant.png)](/)

* [Home](/ "Home")
* [About](/about/ "About")
* [Download](/download/ "Download")
* [Documentation](/docs/ "Documentation")
* [Community](/community/ "Community")
* [Developers](/developer/ "Developers")
* [Support](/support/ "Support")
* [Donate](/about/donate/ "Donate")
* [Your account](/account/ "Your account")

November 21, 2024: [PostgreSQL 17.2, 16.6, 15.10, 14.15, 13.18, and 12.22 Released!](/about/news/postgresql-172-166-1510-1415-1318-and-1222-released-2965/)

[Documentation](/docs/ "Documentation") → [PostgreSQL 9.2](/docs/9.2/index.html)

Unsupported versions:
[9.3](/docs/9.3/release-9-2-11.html "PostgreSQL 9.3 - Release 9.2.11")
/
[9.2](/docs/9.2/release-9-2-11.html "PostgreSQL 9.2 - Release 9.2.11")

This documentation is for an unsupported version of PostgreSQL.

You may want to view the same page for the
[current](/docs/current/release-9-2-11.html "PostgreSQL  - Release 9.2.11")
version, or one of the other supported versions listed above instead.

| [PostgreSQL 9.2.24 Documentation](index.html) | | | | |
| --- | --- | --- | --- | --- |
| [Prev](release-9-2-12.html "Release 9.2.12") | [Up](release.html) | Appendix E. Release Notes | [Next](release-9-2-10.html "Release 9.2.10") |

---

# E.14. Release 9.2.11

**Release date:** 2015-05-22

This release contains a variety of fixes from 9.2.10. For
information about new features in the 9.2 major release, see
[Section E.25](release-9-2.html).

## E.14.1. Migration to Version 9.2.11

A dump/restore is not required for those running 9.2.X.

However, if you use contrib/citext's `regexp_matches()` functions, see the changelog
entry below about that.

Also, if you are upgrading from a version earlier than
9.2.10, see [Section E.15](release-9-2-10.html).

## E.14.2. Changes

* Avoid possible crash when client disconnects just before
  the authentication timeout expires (Benkocs Norbert
  Attila)

  If the timeout interrupt fired partway through the
  session shutdown sequence, SSL-related state would be freed
  twice, typically causing a crash and hence denial of
  service to other sessions. Experimentation shows that an
  unauthenticated remote attacker could trigger the bug
  somewhat consistently, hence treat as security issue.
  (CVE-2015-3165)
* Improve detection of system-call failures (Noah
  Misch)

  Our replacement implementation of `snprintf()` failed to check for errors
  reported by the underlying system library calls; the main
  case that might be missed is out-of-memory situations. In
  the worst case this might lead to information exposure, due
  to our code assuming that a buffer had been overwritten
  when it hadn't been. Also, there were a few places in which
  security-relevant calls of other system library functions
  did not check for failure.

  It remains possible that some calls of the `*printf()` family of functions are
  vulnerable to information disclosure if an out-of-memory
  error occurs at just the wrong time. We judge the risk to
  not be large, but will continue analysis in this area.
  (CVE-2015-3166)
* In contrib/pgcrypto, uniformly
  report decryption failures as "Wrong
  key or corrupt data" (Noah Misch)

  Previously, some cases of decryption with an incorrect
  key could report other error message texts. It has been
  shown that such variance in error reports can aid attackers
  in recovering keys from other systems. While it's unknown
  whether pgcrypto's specific
  behaviors are likewise exploitable, it seems better to
  avoid the risk by using a one-size-fits-all message.
  (CVE-2015-3167)
* Fix incorrect declaration of contrib/citext's `regexp_matches()` functions (Tom Lane)

  These functions should return setof
  text[], like the core functions they are wrappers for;
  but they were incorrectly declared as returning just
  text[]. This mistake had two results:
  first, if there was no match you got a scalar null result,
  whereas what you should get is an empty set (zero rows).
  Second, the g flag was effectively
  ignored, since you would get only one result array even if
  there were multiple matches.

  While the latter behavior is clearly a bug, there might
  be applications depending on the former behavior; therefore
  the function declarations will not be changed by default
  until PostgreSQL 9.5. In
  pre-9.5 branches, the old behavior exists in version 1.0 of
  the citext extension, while we
  have provided corrected declarations in version 1.1 (which
  is not installed
  by default). To adopt the fix in pre-9.5 branches, execute
  ALTER EXTENSION citext UPDATE TO
  '1.1' in each database in which citext is installed. (You can also
  "update" back to 1.0 if you need
  to undo that.) Be aware that either update direction will
  require dropping and recreating any views or rules that use
  citext's `regexp_matches()` functions.
* Fix incorrect checking of deferred exclusion constraints
  after a HOT update (Tom Lane)

  If a new row that potentially violates a deferred
  exclusion constraint is HOT-updated (that is, no indexed
  columns change and the row can be stored back onto the same
  table page) later in the same transaction, the exclusion
  constraint would be reported as violated when the check
  finally occurred, even if the row(s) the new row originally
  conflicted with had been deleted.
* Fix planning of star-schema-style queries (Tom Lane)

  Sometimes, efficient scanning of a large table requires
  that index parameters be provided from more than one other
  table (commonly, dimension tables whose keys are needed to
  index a large fact table). The planner should be able to
  find such plans, but an overly restrictive search heuristic
  prevented it.
* Prevent improper reordering of antijoins (NOT EXISTS
  joins) versus other outer joins (Tom Lane)

  This oversight in the planner has been observed to cause
  "could not find RelOptInfo for given
  relids" errors, but it seems possible that sometimes
  an incorrect query plan might get past that consistency
  check and result in silently-wrong query output.
* Fix incorrect matching of subexpressions in outer-join
  plan nodes (Tom Lane)

  Previously, if textually identical non-strict
  subexpressions were used both above and below an outer
  join, the planner might try to re-use the value computed
  below the join, which would be incorrect because the
  executor would force the value to NULL in case of an
  unmatched outer row.
* Fix GEQO planner to cope with failure of its join order
  heuristic (Tom Lane)

  This oversight has been seen to lead to "failed to join all relations together"
  errors in queries involving LATERAL, and that might happen in other
  cases as well.
* Fix possible deadlock at startup when max\_prepared\_transactions is too small
  (Heikki Linnakangas)
* Don't archive useless preallocated WAL files after a
  timeline switch (Heikki Linnakangas)
* Avoid "cannot
  GetMultiXactIdMembers() during recovery" error
  (Álvaro Herrera)
* Recursively `fsync()` the
  data directory after a crash (Abhijit Menon-Sen, Robert
  Haas)

  This ensures consistency if another crash occurs shortly
  later. (The second crash would have to be a system-level
  crash, not just a database crash, for there to be a
  problem.)
* Fix autovacuum launcher's possible failure to shut down,
  if an error occurs after it receives SIGTERM (Álvaro
  Herrera)
* Cope with unexpected signals in `LockBufferForCleanup()` (Andres
  Freund)

  This oversight could result in spurious errors about
  "multiple backends attempting to wait
  for pincount 1".
* Fix crash when doing COPY IN to
  a table with check constraints that contain whole-row
  references (Tom Lane)

  The known failure case only crashes in 9.4 and up, but
  there is very similar code in 9.3 and 9.2, so back-patch
  those branches as well.
* Avoid waiting for WAL flush or synchronous replication
  during commit of a transaction that was read-only so far as
  the user is concerned (Andres Freund)

  Previously, a delay could occur at commit in
  transactions that had written WAL due to HOT page pruning,
  leading to undesirable effects such as sessions getting
  stuck at startup if all synchronous replicas are down.
  Sessions have also been observed to get stuck in catchup
  interrupt processing when using synchronous replication;
  this will fix that problem as well.
* Fix crash when manipulating hash indexes on temporary
  tables (Heikki Linnakangas)
* Fix possible failure during hash index bucket split, if
  other processes are modifying the index concurrently (Tom
  Lane)
* Check for interrupts while analyzing index expressions
  (Jeff Janes)

  ANALYZE executes index
  expressions many times; if there are slow functions in such
  an expression, it's desirable to be able to cancel the
  ANALYZE before that loop
  finishes.
* Ensure tableoid of a
  foreign table is reported correctly when a READ COMMITTED recheck occurs after locking
  rows in SELECT FOR UPDATE,
  UPDATE, or DELETE (Etsuro Fujita)
* Add the name of the target server to object description
  strings for foreign-server user mappings (Álvaro
  Herrera)
* Recommend setting include\_realm
  to 1 when using Kerberos/GSSAPI/SSPI authentication
  (Stephen Frost)

  Without this, identically-named users from different
  realms cannot be distinguished. For the moment this is only
  a documentation change, but it will become the default
  setting in PostgreSQL
  9.5.
* Remove code for matching IPv4 pg\_hba.conf entries to IPv4-in-IPv6
  addresses (Tom Lane)

  This hack was added in 2003 in response to a report that
  some Linux kernels of the time would report IPv4
  connections as having IPv4-in-IPv6 addresses. However, the
  logic was accidentally broken in 9.0. The lack of any field
  complaints since then shows that it's not needed anymore.
  Now we have reports that the broken code causes crashes on
  some systems, so let's just remove it rather than fix it.
  (Had we chosen to fix it, that would make for a subtle and
  potentially security-sensitive change in the effective
  meaning of IPv4 pg\_hba.conf
  entries, which does not seem like a good thing to do in
  minor releases.)
* Report WAL flush, not insert, position in IDENTIFY\_SYSTEM replication command (Heikki
  Linnakangas)

  This avoids a possible startup failure in pg\_receivexlog.
* While shutting down service on Windows, periodically
  send status updates to the Service Control Manager to
  prevent it from killing the service too soon; and ensure
  that pg\_ctl will wait for
  shutdown (Krystian Bigaj)
* Reduce risk of network deadlock when using libpq's non-blocking mode (Heikki
  Linnakangas)

  When sending large volumes of data, it's important to
  drain the input buffer every so often, in case the server
  has sent enough response data to cause it to block on
  output. (A typical scenario is that the server is sending a
  stream of NOTICE messages during COPY
  FROM STDIN.) This worked properly in the normal
  blocking mode, but not so much in non-blocking mode. We've
  modified libpq to
  opportunistically drain input when it can, but a full
  defense against this problem requires application
  cooperation: the application should watch for socket
  read-ready as well as write-ready conditions, and be sure
  to call `PQconsumeInput()` upon
  read-ready.
* In libpq, fix
  misparsing of empty values in URI connection strings
  (Thomas Fanghaenel)
* Fix array handling in ecpg (Michael Meskes)
* Fix psql to sanely
  handle URIs and conninfo strings as the first parameter to
  \connect (David Fetter, Andrew
  Dunstan, Álvaro Herrera)

  This syntax has been accepted (but undocumented) for a
  long time, but previously some parameters might be taken
  from the old connection instead of the given string, which
  was agreed to be undesirable.
* Suppress incorrect complaints from psql on some platforms that it failed
  to write ~/.psql\_history at exit
  (Tom Lane)

  This misbehavior was caused by a workaround for a bug in
  very old (pre-2006) versions of libedit. We fixed it by removing the
  workaround, which will cause a similar failure to appear
  for anyone still using such versions of libedit. Recommendation: upgrade that
  library, or use libreadline.
* Fix pg\_dump's rule for
  deciding which casts are system-provided casts that should
  not be dumped (Tom Lane)
* In pg\_dump, fix failure
  to honor -Z compression level
  option together with -Fd (Michael
  Paquier)
* Make pg\_dump consider
  foreign key relationships between extension configuration
  tables while choosing dump order (Gilles Darold, Michael
  Paquier, Stephen Frost)

  This oversight could result in producing dumps that fail
  to reload because foreign key constraints are transiently
  violated.
* Fix dumping of views that are just VALUES(...) but have column aliases (Tom
  Lane)
* In pg\_upgrade, force
  timeline 1 in the new cluster (Bruce Momjian)

  This change prevents upgrade failures caused by bogus
  complaints about missing WAL history files.
* In pg\_upgrade, check
  for improperly non-connectable databases before proceeding
  (Bruce Momjian)
* In pg\_upgrade, quote
  directory paths properly in the generated delete\_old\_cluster script (Bruce
  Momjian)
* In pg\_upgrade, preserve
  database-level freezing info properly (Bruce Momjian)

  This oversight could cause missing-clog-file errors for
  tables within the postgres and
  template1 databases.
* Run pg\_upgrade and
  pg\_resetxlog with
  restricted privileges on Windows, so that they don't fail
  when run by an administrator (Muhammad Asif Naeem)
* Improve handling of `readdir()` failures when scanning
  directories in initdb and
  pg\_basebackup (Marco
  Nenciarini)
* Fix failure in pg\_receivexlog (Andres Freund)

  A patch merge mistake in 9.2.10 led to "could not create archive status file"
  errors.
* Fix slow sorting algorithm in contrib/intarray (Tom Lane)
* Fix compile failure on Sparc V8 machines (Rob Rowan)
* Update time zone data files to tzdata release 2015d for DST law
  changes in Egypt, Mongolia, and Palestine, plus historical
  changes in Canada and Chile. Also adopt revised zone
  abbreviations for the America/Adak zone (HST/HDT not
  HAST/HADT).

---

| [Prev](release-9-2-12.html) | [Home](index.html) | [Next](release-9-2-10.html) |
| --- | --- | --- |
| Release 9.2.12 | [Up](release.html) | Release 9.2.10 |

* [![@postgresql](/media/img/atpostgresql.png)](https://twitter.com/postgresql)
* [![Git](/media/img/git.png)](https://git.postgresql.org/gitweb/?p=postgresql.git)

[Privacy Policy](/about/privacypolicy) |
[Code of Conduct](/about/policies/coc/) |
[About PostgreSQL](/about/) |
[Contact](/about/contact/)

Copyright © 1996-2025 The PostgreSQL Global Development Group



=== Content from www.postgresql.org_6276846f_20250124_212253.html ===


[![PostgreSQL Elephant Logo](/media/img/about/press/elephant.png)](/)

* [Home](/ "Home")
* [About](/about/ "About")
* [Download](/download/ "Download")
* [Documentation](/docs/ "Documentation")
* [Community](/community/ "Community")
* [Developers](/developer/ "Developers")
* [Support](/support/ "Support")
* [Donate](/about/donate/ "Donate")
* [Your account](/account/ "Your account")

November 21, 2024: [PostgreSQL 17.2, 16.6, 15.10, 14.15, 13.18, and 12.22 Released!](/about/news/postgresql-172-166-1510-1415-1318-and-1222-released-2965/)

[Documentation](/docs/ "Documentation") → [PostgreSQL 9.3](/docs/9.3/index.html)

Unsupported versions:
[9.3](/docs/9.3/release-9-3-7.html "PostgreSQL 9.3 - Release 9.3.7")

This documentation is for an unsupported version of PostgreSQL.

You may want to view the same page for the
[current](/docs/current/release-9-3-7.html "PostgreSQL  - Release 9.3.7")
version, or one of the other supported versions listed above instead.

| [PostgreSQL 9.3.25 Documentation](index.html) | | | | |
| --- | --- | --- | --- | --- |
| [Prev](release-9-3-8.html "Release 9.3.8") | [Up](release.html) | Appendix E. Release Notes | [Next](release-9-3-6.html "Release 9.3.6") |

---

# E.19. Release 9.3.7

**Release date:** 2015-05-22

This release contains a variety of fixes from 9.3.6. For
information about new features in the 9.3 major release, see
[Section E.26](release-9-3.html).

## E.19.1. Migration to Version 9.3.7

A dump/restore is not required for those running 9.3.X.

However, if you use contrib/citext's
`regexp_matches()` functions, see the
changelog entry below about that.

Also, if you are upgrading from a version earlier than 9.3.6,
see [Section E.20](release-9-3-6.html).

## E.19.2. Changes

* Avoid possible crash when client disconnects just before the
  authentication timeout expires (Benkocs Norbert Attila)

  If the timeout interrupt fired partway through the session
  shutdown sequence, SSL-related state would be freed twice,
  typically causing a crash and hence denial of service to other
  sessions. Experimentation shows that an unauthenticated remote
  attacker could trigger the bug somewhat consistently, hence treat
  as security issue. (CVE-2015-3165)
* Improve detection of system-call failures (Noah Misch)

  Our replacement implementation of `snprintf()` failed to check for errors reported by
  the underlying system library calls; the main case that might be
  missed is out-of-memory situations. In the worst case this might
  lead to information exposure, due to our code assuming that a
  buffer had been overwritten when it hadn't been. Also, there were a
  few places in which security-relevant calls of other system library
  functions did not check for failure.

  It remains possible that some calls of the `*printf()` family of functions are vulnerable to
  information disclosure if an out-of-memory error occurs at just the
  wrong time. We judge the risk to not be large, but will continue
  analysis in this area. (CVE-2015-3166)
* In contrib/pgcrypto, uniformly report
  decryption failures as "Wrong key or corrupt
  data" (Noah Misch)

  Previously, some cases of decryption with an incorrect key could
  report other error message texts. It has been shown that such
  variance in error reports can aid attackers in recovering keys from
  other systems. While it's unknown whether pgcrypto's specific behaviors are likewise
  exploitable, it seems better to avoid the risk by using a
  one-size-fits-all message. (CVE-2015-3167)
* Protect against wraparound of multixact member IDs (Álvaro
  Herrera, Robert Haas, Thomas Munro)

  Under certain usage patterns, the existing defenses against this
  might be insufficient, allowing pg\_multixact/members files to be removed too early,
  resulting in data loss. The fix for this includes modifying the
  server to fail transactions that would result in overwriting old
  multixact member ID data, and improving autovacuum to ensure it
  will act proactively to prevent multixact member ID wraparound, as
  it does for transaction ID wraparound.
* Fix incorrect declaration of contrib/citext's `regexp_matches()` functions (Tom Lane)

  These functions should return setof
  text[], like the core functions they are wrappers for; but
  they were incorrectly declared as returning just text[]. This mistake had two results: first, if there
  was no match you got a scalar null result, whereas what you should
  get is an empty set (zero rows). Second, the g flag was effectively ignored, since you would get
  only one result array even if there were multiple matches.

  While the latter behavior is clearly a bug, there might be
  applications depending on the former behavior; therefore the
  function declarations will not be changed by default until
  PostgreSQL 9.5. In pre-9.5
  branches, the old behavior exists in version 1.0 of the citext extension, while we have provided corrected
  declarations in version 1.1 (which is not installed by default). To adopt
  the fix in pre-9.5 branches, execute ALTER
  EXTENSION citext UPDATE TO '1.1' in each database in which
  citext is installed. (You can also
  "update" back to 1.0 if you need to undo
  that.) Be aware that either update direction will require dropping
  and recreating any views or rules that use citext's `regexp_matches()` functions.
* Fix incorrect checking of deferred exclusion constraints after a
  HOT update (Tom Lane)

  If a new row that potentially violates a deferred exclusion
  constraint is HOT-updated (that is, no indexed columns change and
  the row can be stored back onto the same table page) later in the
  same transaction, the exclusion constraint would be reported as
  violated when the check finally occurred, even if the row(s) the
  new row originally conflicted with had been deleted.
* Fix planning of star-schema-style queries (Tom Lane)

  Sometimes, efficient scanning of a large table requires that
  index parameters be provided from more than one other table
  (commonly, dimension tables whose keys are needed to index a large
  fact table). The planner should be able to find such plans, but an
  overly restrictive search heuristic prevented it.
* Prevent improper reordering of antijoins (NOT EXISTS joins)
  versus other outer joins (Tom Lane)

  This oversight in the planner has been observed to cause
  "could not find RelOptInfo for given
  relids" errors, but it seems possible that sometimes an
  incorrect query plan might get past that consistency check and
  result in silently-wrong query output.
* Fix incorrect matching of subexpressions in outer-join plan
  nodes (Tom Lane)

  Previously, if textually identical non-strict subexpressions
  were used both above and below an outer join, the planner might try
  to re-use the value computed below the join, which would be
  incorrect because the executor would force the value to NULL in
  case of an unmatched outer row.
* Fix GEQO planner to cope with failure of its join order
  heuristic (Tom Lane)

  This oversight has been seen to lead to "failed to join all relations together" errors in
  queries involving LATERAL, and that might
  happen in other cases as well.
* Fix possible deadlock at startup when max\_prepared\_transactions is too small (Heikki
  Linnakangas)
* Don't archive useless preallocated WAL files after a timeline
  switch (Heikki Linnakangas)
* Recursively `fsync()` the data
  directory after a crash (Abhijit Menon-Sen, Robert Haas)

  This ensures consistency if another crash occurs shortly later.
  (The second crash would have to be a system-level crash, not just a
  database crash, for there to be a problem.)
* Fix autovacuum launcher's possible failure to shut down, if an
  error occurs after it receives SIGTERM (Álvaro Herrera)
* Cope with unexpected signals in `LockBufferForCleanup()` (Andres Freund)

  This oversight could result in spurious errors about
  "multiple backends attempting to wait for
  pincount 1".
* Fix crash when doing COPY IN to a table
  with check constraints that contain whole-row references (Tom
  Lane)

  The known failure case only crashes in 9.4 and up, but there is
  very similar code in 9.3 and 9.2, so back-patch those branches as
  well.
* Avoid waiting for WAL flush or synchronous replication during
  commit of a transaction that was read-only so far as the user is
  concerned (Andres Freund)

  Previously, a delay could occur at commit in transactions that
  had written WAL due to HOT page pruning, leading to undesirable
  effects such as sessions getting stuck at startup if all
  synchronous replicas are down. Sessions have also been observed to
  get stuck in catchup interrupt processing when using synchronous
  replication; this will fix that problem as well.
* Fix crash when manipulating hash indexes on temporary tables
  (Heikki Linnakangas)
* Fix possible failure during hash index bucket split, if other
  processes are modifying the index concurrently (Tom Lane)
* Check for interrupts while analyzing index expressions (Jeff
  Janes)

  ANALYZE executes index expressions many
  times; if there are slow functions in such an expression, it's
  desirable to be able to cancel the ANALYZE
  before that loop finishes.
* Ensure tableoid of a foreign table
  is reported correctly when a READ
  COMMITTED recheck occurs after locking rows in SELECT FOR UPDATE, UPDATE,
  or DELETE (Etsuro Fujita)
* Add the name of the target server to object description strings
  for foreign-server user mappings (Álvaro Herrera)
* Include the schema name in object identity strings for
  conversions (Álvaro Herrera)
* Recommend setting include\_realm to 1
  when using Kerberos/GSSAPI/SSPI authentication (Stephen Frost)

  Without this, identically-named users from different realms
  cannot be distinguished. For the moment this is only a
  documentation change, but it will become the default setting in
  PostgreSQL 9.5.
* Remove code for matching IPv4 pg\_hba.conf entries to IPv4-in-IPv6 addresses (Tom
  Lane)

  This hack was added in 2003 in response to a report that some
  Linux kernels of the time would report IPv4 connections as having
  IPv4-in-IPv6 addresses. However, the logic was accidentally broken
  in 9.0. The lack of any field complaints since then shows that it's
  not needed anymore. Now we have reports that the broken code causes
  crashes on some systems, so let's just remove it rather than fix
  it. (Had we chosen to fix it, that would make for a subtle and
  potentially security-sensitive change in the effective meaning of
  IPv4 pg\_hba.conf entries, which does not
  seem like a good thing to do in minor releases.)
* Report WAL flush, not insert, position in IDENTIFY\_SYSTEM replication command (Heikki
  Linnakangas)

  This avoids a possible startup failure in pg\_receivexlog.
* While shutting down service on Windows, periodically send status
  updates to the Service Control Manager to prevent it from killing
  the service too soon; and ensure that pg\_ctl will wait for shutdown (Krystian
  Bigaj)
* Reduce risk of network deadlock when using libpq's non-blocking mode (Heikki
  Linnakangas)

  When sending large volumes of data, it's important to drain the
  input buffer every so often, in case the server has sent enough
  response data to cause it to block on output. (A typical scenario
  is that the server is sending a stream of NOTICE messages during
  COPY FROM STDIN.) This worked properly in
  the normal blocking mode, but not so much in non-blocking mode.
  We've modified libpq to
  opportunistically drain input when it can, but a full defense
  against this problem requires application cooperation: the
  application should watch for socket read-ready as well as
  write-ready conditions, and be sure to call `PQconsumeInput()` upon read-ready.
* In libpq, fix misparsing of
  empty values in URI connection strings (Thomas Fanghaenel)
* Fix array handling in ecpg
  (Michael Meskes)
* Fix psql to sanely handle URIs
  and conninfo strings as the first parameter to \connect (David Fetter, Andrew Dunstan, Álvaro
  Herrera)

  This syntax has been accepted (but undocumented) for a long
  time, but previously some parameters might be taken from the old
  connection instead of the given string, which was agreed to be
  undesirable.
* Suppress incorrect complaints from psql on some platforms that it failed to write
  ~/.psql\_history at exit (Tom Lane)

  This misbehavior was caused by a workaround for a bug in very
  old (pre-2006) versions of libedit. We fixed it by removing the
  workaround, which will cause a similar failure to appear for anyone
  still using such versions of libedit. Recommendation: upgrade that library,
  or use libreadline.
* Fix pg\_dump's rule for deciding
  which casts are system-provided casts that should not be dumped
  (Tom Lane)
* In pg\_dump, fix failure to
  honor -Z compression level option together
  with -Fd (Michael Paquier)
* Make pg\_dump consider foreign
  key relationships between extension configuration tables while
  choosing dump order (Gilles Darold, Michael Paquier, Stephen
  Frost)

  This oversight could result in producing dumps that fail to
  reload because foreign key constraints are transiently
  violated.
* Avoid possible pg\_dump failure
  when concurrent sessions are creating and dropping temporary
  functions (Tom Lane)
* Fix dumping of views that are just VALUES(...) but have column aliases (Tom Lane)
* In pg\_upgrade, force timeline 1
  in the new cluster (Bruce Momjian)

  This change prevents upgrade failures caused by bogus complaints
  about missing WAL history files.
* In pg\_upgrade, check for
  improperly non-connectable databases before proceeding (Bruce
  Momjian)
* In pg\_upgrade, quote directory
  paths properly in the generated delete\_old\_cluster script (Bruce Momjian)
* In pg\_upgrade, preserve
  database-level freezing info properly (Bruce Momjian)

  This oversight could cause missing-clog-file errors for tables
  within the postgres and template1 databases.
* Run pg\_upgrade and pg\_resetxlog with restricted privileges on
  Windows, so that they don't fail when run by an administrator
  (Muhammad Asif Naeem)
* Improve handling of `readdir()`
  failures when scanning directories in initdb and pg\_basebackup (Marco Nenciarini)
* Fix slow sorting algorithm in contrib/intarray (Tom Lane)
* Fix compile failure on Sparc V8 machines (Rob Rowan)
* Silence some build warnings on macOS (Tom Lane)
* Update time zone data files to tzdata release 2015d for DST law changes in
  Egypt, Mongolia, and Palestine, plus historical changes in Canada
  and Chile. Also adopt revised zone abbreviations for the
  America/Adak zone (HST/HDT not HAST/HADT).

---

| [Prev](release-9-3-8.html) | [Home](index.html) | [Next](release-9-3-6.html) |
| --- | --- | --- |
| Release 9.3.8 | [Up](release.html) | Release 9.3.6 |

* [![@postgresql](/media/img/atpostgresql.png)](https://twitter.com/postgresql)
* [![Git](/media/img/git.png)](https://git.postgresql.org/gitweb/?p=postgresql.git)

[Privacy Policy](/about/privacypolicy) |
[Code of Conduct](/about/policies/coc/) |
[About PostgreSQL](/about/) |
[Contact](/about/contact/)

Copyright © 1996-2025 The PostgreSQL Global Development Group


