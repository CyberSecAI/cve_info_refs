=== Content from www.openwall.com_8a2ebdf7_20250125_080026.html ===


| [Openwall](/) * [Products](/)   + [Openwall GNU/\*/Linux   *server OS*](/Owl/)+ [Linux Kernel Runtime Guard](/lkrg/)+ [John the Ripper   *password cracker*](/john/)         - [Free & Open Source for any platform](/john/)- [in the cloud](/john/cloud/)- [Pro for Linux](/john/pro/linux/)- [Pro for macOS](/john/pro/macosx/)+ [Wordlists   *for password cracking*](/wordlists/)+ [passwdqc   *policy enforcement*](/passwdqc/)             - [Free & Open Source for Unix](/passwdqc/)- [Pro for Windows (Active Directory)](/passwdqc/windows/)+ [yescrypt   *KDF & password hashing*](/yescrypt/)+ [yespower   *Proof-of-Work (PoW)*](/yespower/)+ [crypt\_blowfish   *password hashing*](/crypt/)+ [phpass   *ditto in PHP*](/phpass/)+ [tcb   *better password shadowing*](/tcb/)+ [Pluggable Authentication Modules](/pam/)+ [scanlogd   *port scan detector*](/scanlogd/)+ [popa3d   *tiny POP3 daemon*](/popa3d/)+ [blists   *web interface to mailing lists*](/blists/)+ [msulogin   *single user mode login*](/msulogin/)+ [php\_mt\_seed   *mt\_rand() cracker*](/php_mt_seed/)* [Services](/services/)* Publications       + [Articles](/articles/)+ [Presentations](/presentations/)* Resources         + [Mailing lists](/lists/)+ [Community wiki](https://openwall.info/wiki/)+ [Source code repositories (GitHub)](https://github.com/openwall)+ [Source code repositories (CVSweb)](https://cvsweb.openwall.com)+ [File archive & mirrors](/mirrors/)+ [How to verify digital signatures](/signatures/)+ [OVE IDs](/ove/)* [What's new](/news) | |
| --- | --- |

| | [Follow @Openwall on Twitter for new release announcements and other news](https://twitter.com/openwall) | | --- | |
| --- | --- |

[[<prev]](../../../2015/05/07/10) [[next>]](2) [[day]](.) [[month]](..) [[year]](../..) [[list]](../../..)
```

Message-ID: <554C3D5C.3070304@redhat.com>
Date: Thu, 07 May 2015 22:36:44 -0600
From: Kurt Seifried <kseifried@...hat.com>
To: "oss-security@...ts.openwall.com" <oss-security@...ts.openwall.com>
Subject: beaker vulns fixed in version 20.1

So some flaws were found in Beaker and fixed in version 20.1:

<https://beaker-project.org/download.html>

In Red Hat Bugzilla:

CVE-2015-3160 - 1215020 Beaker is vulnerable to "XXE" attacks from
authenticated  users, due to external entity expansion in job XML

CVE-2015-3161 - 1215024 search bar does not escape </script> tags when
producing JSON

CVE-2015-3162 - 1215030 HTML tags in recipe set comments are not escaped
in the "edit comment" dialog

CVE-2015-3163 - 1215034 anonymous users can modify key types and power types

--
Kurt Seifried -- Red Hat -- Product Security -- Cloud
PGP A90B F995 7350 148F 66BF 7554 160D 4553 5E26 7993

Download attachment "[signature.asc](1/1)" of type "application/pgp-signature" (837 bytes)

```

[Powered by blists](https://www.openwall.com/blists/) - [more mailing lists](https://lists.openwall.net)

Please check out the
[Open Source Software Security Wiki](https://oss-security.openwall.org/wiki/), which is counterpart to this
[mailing list](https://oss-security.openwall.org/wiki/mailing-lists/oss-security).

Confused about [mailing lists](/lists/) and their use?
[Read about mailing lists on Wikipedia](https://en.wikipedia.org/wiki/Electronic_mailing_list)
and check out these
[guidelines on proper formatting of your messages](https://www.complang.tuwien.ac.at/anton/mail-news-errors.html).



=== Content from bugzilla.redhat.com_9af919e9_20250125_080029.html ===


* Login
  + Log in using an SSO provider:- [Fedora Account System](saml2_login.cgi?idp=Fedora%20Account%20System&target=show_bug.cgi%3Fid%3D1215030)
    - [Red Hat Associate](saml2_login.cgi?idp=Red%20Hat%20Associate&target=show_bug.cgi%3Fid%3D1215030)
    - [Red Hat Customer](saml2_login.cgi?idp=Red%20Hat%20Customer&target=show_bug.cgi%3Fid%3D1215030)+ Login using a Red Hat Bugzilla account
  + Forgot Password
  + [Create an Account](createaccount.cgi)

Red Hat Bugzilla – Bug 1215030

* [Home](./)
* [New](enter_bug.cgi)
* Search
  + [Simple Search](query.cgi?format=specific)
  + [Advanced Search](query.cgi?format=advanced)
* My Links
  + [Browse](describecomponents.cgi)
  + [Requests](request.cgi)
  + Reports
  + Current State
    - [Search](query.cgi)
    - [Tabular reports](query.cgi?format=report-table)
    - [Graphical reports](query.cgi?format=report-graph)
    - [Duplicates](duplicates.cgi)
  + Other Reports
    - [User Changes](https://bugzilla.redhat.com/page.cgi?id=user_activity.html)
  + Plotly Reports
    - [Bug Status](https://bugzilla.redhat.com/page.cgi?id=bug_status.html)
    - [Bug Severity](https://bugzilla.redhat.com/page.cgi?id=bug_severity.html)
    - [Non-Defaults](https://bugzilla.redhat.com/page.cgi?id=non_defaults.html)
* [Product Dashboard](page.cgi?id=productdashboard.html)

- Help
  * [Page Help!](docs/en/html/using/understanding.html)
  * [Bug Writing Guidelines](page.cgi?id=bug-writing.html)
  * [What's new](page.cgi?id=whats-new.html)
  * [Browser Support Policy](https://access.redhat.com/help/browsers)
  * [5.0.4.rh103 Release notes](page.cgi?id=release-notes.html)
  * [FAQ](page.cgi?id=faq.html)
  * [Guides index](docs/en/html/index.html)
  * [User guide](docs/en/html/using/index.html)
  * [Web Services](docs/en/html/integrating/api/Bugzilla/WebService/Bug.html)
  * [Contact](page.cgi?id=redhat/contact.html)
  * [Legal](page.cgi?id=terms-conditions.html)
- [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")

This site requires JavaScript to be enabled to function correctly, please enable it.

[**Bug 1215030**](show_bug.cgi?id=1215030)
(CVE-2015-3162)
- HTML tags in recipe set comments are not escaped in the "edit comment" dialog

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
HTML tags in recipe set comments are not escaped in the "edit comment" dialog

| | [Keywords](describekeywords.cgi): | Patch  Security | | --- | --- | | [Status](page.cgi?id=fields.html#bug_status): | CLOSED CURRENTRELEASE | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | CVE-2015-3162 | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components. Select a Classification to narrow down this list.") | Beaker | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Retired | | [Component:](describecomponents.cgi?product=Beaker "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | general | | [Sub Component:](page.cgi?id=fields.html#rh_sub_components "The sub component of a specific component") | --- | | [Version:](page.cgi?id=fields.html#version "The version field defines the version of the software the bug was found in.") | 19 | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Unspecified | | [OS:](page.cgi?id=fields.html#op_sys "The operating system the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Unspecified | | [Priority:](page.cgi?id=fields.html#priority) | unspecified | | [Severity:](page.cgi?id=fields.html#bug_severity) | unspecified | | [Target Milestone:](page.cgi?id=fields.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | 20.1 | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Dan Callaghan | | [QA Contact:](page.cgi?id=fields.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") | tools-bugs | | [Docs Contact:](page.cgi?id=fields.html#docs_contact "The person responsible for documenting once the bug has been resolved.") |  | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | [Depends On:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") |  | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") | [1215894](show_bug.cgi?id=1215894) | | TreeView+ | [depends on](buglist.cgi?bug_id=1215030&bug_id_type=anddependson&format=tvp) / [blocked](buglist.cgi?bug_id=1215030&bug_id_type=andblocked&format=tvp&tvp_dir=blocked) |  | |  | | [Reported:](page.cgi?id=fields.html#reporter) | 2015-04-24 07:23 UTC by Dan Callaghan | | --- | --- | | [Modified:](page.cgi?id=fields.html#modified) | 2023-07-06 16:52 UTC ([History](show_activity.cgi?id=1215030)) | | [CC List:](page.cgi?id=fields.html#cclist) | 19 users (show)  aigao asaha dcallagh dowang drewbinskyn ebaak huiwang ineilsen jskeoch junichi.nomura kueda lzhuang mjia naoya.horiguchi pen-test rpotts security-response-team tatsu-ab1 tflink | | Fixed In Version: |  | | | Doc Type: | Bug Fix | | | Doc Text: |  | | | Clone Of: |  | | | Environment: |  | | | Last Closed: | 2015-05-08 04:06:03 UTC | | | Embargoed: |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | [(Terms of Use)](page.cgi?id=terms-conditions.html) | | | --- | --- | --- | | [**proposed patch**](attachment.cgi?id=1020005 "View the content of the attachment") (3.90 KB, patch)  [2015-04-29 07:22 UTC](#attach_1020005 "Go to the comment associated with the attachment"), Dan Callaghan | *no flags* | [Details](attachment.cgi?id=1020005&action=edit) | [Diff](attachment.cgi?id=1020005&action=diff) | | [**proposed patch v2**](attachment.cgi?id=1021565 "View the content of the attachment") (5.24 KB, patch)  [2015-05-04 07:51 UTC](#attach_1021565 "Go to the comment associated with the attachment"), Dan Callaghan | *no flags* | [Details](attachment.cgi?id=1021565&action=edit) | [Diff](attachment.cgi?id=1021565&action=diff) | | [Show Obsolete](#a0) (1) [View All](attachment.cgi?bugid=1215030&action=viewall&hide_obsolete=1) | | |    Links | System | ID | Private | Priority | Status | Summary | Last Updated | | Red Hat Issue Tracker | [BKR-2941](https://issues.redhat.com/browse/BKR-2941) | 0 | None | None | None | 2023-03-16 07:12:21 UTC | |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=1215030#c0)  Dan Callaghan    2015-04-24 07:23:48 UTC  ``` Description of problem: The "edit comment" dialog on the job page does not escape HTML characters in the comment correctly after fetching it.  Version-Release number of selected component (if applicable): probably all Beaker versions  How reproducible: easily  Steps to Reproduce: 1. Submit a job, then cancel it 2. On the job page, ack or nack your job 3. Click "comment" and edit the comment to be: <script>alert('xss')</script> 4. Refresh the job page, and click "comment" again  Actual results: <script> is executed  Expected results: HTML characters should be escaped in the comment value   ```  [Comment 1](show_bug.cgi?id=1215030#c1)  Dan Callaghan    2015-04-29 07:22:36 UTC  ``` Created [attachment 1020005](attachment.cgi?id=1020005&action=diff "proposed patch") [[details]](attachment.cgi?id=1020005&action=edit "proposed patch") proposed patch   ```  [Comment 4](show_bug.cgi?id=1215030#c4)  Hui Wang    2015-05-04 07:16:40 UTC  ``` Verified this issue. The result is FAILED. Version: Beaker 20.1.git.5.24dc482  Steps to Reproduce: 1. Submit a job, then cancel it 2. On the job page, ack or nack your job 3. Click "comment" and edit the comment to be: <script>alert('xss')</script>  Result: The script still be executed.   ```  [Comment 5](show_bug.cgi?id=1215030#c5)  Dan Callaghan    2015-05-04 07:21:37 UTC  ``` Ah yes, there is another one I missed... full steps to reproduce are:  1. Submit a job, then cancel it 2. On the job page, ack or nack your job 3. Click "comment" 4. Click "edit" and change the comment to: <script>alert('xss')</script>, then click "save" 5. Refresh the job page 6. Click "comment" 7. Click "edit"  Script is executed.   ```  [Comment 6](show_bug.cgi?id=1215030#c6)  Dan Callaghan    2015-05-04 07:51:17 UTC  ``` Created [attachment 1021565](attachment.cgi?id=1021565&action=diff "proposed patch v2") [[details]](attachment.cgi?id=1021565&action=edit "proposed patch v2") proposed patch v2  This patch addresses the other missed escaping, in the edit comment dialog. (Sigh, that code makes me very sad.)   ```  [Comment 10](show_bug.cgi?id=1215030#c10)  Hui Wang    2015-05-05 02:31:47 UTC  ``` Verified this issue. The result is PASS. Version: Beaker 20.1.git.5.fd65027   ```  [Comment 11](show_bug.cgi?id=1215030#c11)  Dan Callaghan    2015-05-08 04:06:03 UTC  ``` Beaker 20.1 has been released.   ```   [Comment 12](show_bug.cgi?id=1215030#c12)  Timothy Sykes    2023-03-16 07:11:56 UTC  Comment hidden (spam)  ``` This comment was flagged a spam, view the edit history to see the original text if required.   ```   [Comment 13](show_bug.cgi?id=1215030#c13)  Timothy Sykes    2023-03-16 07:15:08 UTC  Comment hidden (spam)  ``` This comment was flagged a spam, view the edit history to see the original text if required.   ```   [Comment 14](show_bug.cgi?id=1215030#c14)  Drew Binsky    2023-03-17 02:20:18 UTC  Comment hidden (spam)  ``` My suggestion is that you should reset or review your comment settings <https://ovo-game.com>   ```   [Comment 15](show_bug.cgi?id=1215030#c15)  emmausa    2023-06-27 07:24:02 UTC  Comment hidden (spam)  ``` This comment was flagged a spam, view the edit history to see the original text if required.   ```   [Comment 16](show_bug.cgi?id=1215030#c16)  Timothy Ferriss    2023-07-06 08:22:18 UTC  Comment hidden (spam)  ``` This comment was flagged a spam, view the edit history to see the original text if required.   ``` |  |
| --- | --- |

---

| Note You need to [log in](show_bug.cgi?id=1215030&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. |
| --- |

---

[Privacy](page.cgi?id=redhat/privacy.html)
[Contact](page.cgi?id=redhat/contact.html)
[FAQ](page.cgi?id=faq.html)
[Legal](page.cgi?id=terms-conditions.html)



=== Content from beaker-project.org_62639c81_20250125_080027.html ===

[![Beaker](../../images/logo.png)](../../)

[docs](../../docs/)
[develop](../../dev/)
[download](../../download.html)

* [Beaker](../index.html)
* [What’s New](index.html)

* [previous](release-21.html "What’s New in Beaker 21?")
* [next](release-19.html "What’s New in Beaker 19?")

# What’s New in Beaker 20?[¶](#what-s-new-in-beaker-20 "Permalink to this headline")

Beaker 20 introduces system pools, and the ability to apply the same access
policy across many systems.
This release also brings support for configurable netboot loaders and several
other enhancements.

## System pools and shared system access policies[¶](#system-pools-and-shared-system-access-policies "Permalink to this headline")

Beaker 20 introduces “system pools” as arbitrary collections of systems.

Previously, a group in Beaker could contain both users and systems. However,
groups are primarily a way of managing Beaker users. With the introduction of
system pools, the existing group mechanism becomes exclusively “user groups”.
It is no longer possible to add systems to user groups.

As part of the upgrade to Beaker 20, for each group which contained one or more
systems, a new system pool will be created with the same name and containing
the same systems. Pools created during this migration process will have their
initial description set to “Pool migrated from group <name>” and will be owned
by the corresponding user group.

Building on the system pools feature, Beaker 20 also makes it possible to share
a single access policy across a large number of systems. System owners can now
choose to apply the access policy from a pool, rather than defining the policy
rules explicitly on their system.

For example, if you own the hardware for the fictional Project Unicorn
development team, you can create a new Beaker pool named “Project Unicorn”. In
the pool access policy, you can grant reserve permission to the Project Unicorn
developers. Then you can add each system to the pool, and set them to use the
access policy from the “Project Unicorn” pool.

Refer to [*System pools*](../user-guide/interface/pools.html#system-pools) and [*Shared access policies*](../user-guide/systems/sharing.html#shared-access-policies) for more
details.
See also the original *design proposal* for further background and
rationale.

(Contributed by Amit Saha, Matt Jia, and Dan Callaghan in [#%s1057463](https://bugzilla.redhat.com/show_bug.cgi?id=1057463).)

## Other new features and enhancements[¶](#other-new-features-and-enhancements "Permalink to this headline")

### Configurable netboot loader[¶](#configurable-netboot-loader "Permalink to this headline")

Beaker now supports configuring the netboot loader used on a per-recipe basis,
by passing netbootloader= in the kernel options. For example, in ppc64
recipes Beaker can use yaboot when provisioning older distros and GRUB2 when
provisioning newer distros. This feature requires that the DHCP configuration
for the system is updated appropriately.

Refer to [*Kernel options*](../user-guide/customizing-installation.html#kernel-options) for details about the netbootloader= option,
and to [*Boot loader images*](../admin-guide/tftp.html#boot-loader-images) for details about the new TFTP directory
layout.

(Contributed by Amit Saha in [#%s1156036](https://bugzilla.redhat.com/show_bug.cgi?id=1156036).)

### Workflow commands accept [*--reserve*](../man/bkr.html#cmdoption-bkr--reserve)[¶](#workflow-commands-accept-reserve "Permalink to this headline")

A new option [*--reserve*](../man/bkr.html#cmdoption-bkr--reserve) is now accepted by
**bkr** workflow commands. This option adds the <reservesys/>
element to each recipe in the job, causing Beaker to reserve the system after
all tasks have finished executing (or if the recipe is aborted). The duration
can be controlled using [*--reserve-duration*](../man/bkr.html#cmdoption-bkr--reserve-duration).

For more details about the <reservesys/> element, refer to
[*Using the <reservesys/> element*](../user-guide/system-reservation.html#reservesys).

(Contributed by Dan Callaghan in [#%s1186719](https://bugzilla.redhat.com/show_bug.cgi?id=1186719).)

### Workflow commands accept wildcards in [*--distro*](../man/bkr.html#cmdoption-bkr--distro)[¶](#workflow-commands-accept-wildcards-in-distro "Permalink to this headline")

The **bkr** workflow commands now treat the value of the
[*--distro*](../man/bkr.html#cmdoption-bkr--distro) option as a SQL LIKE pattern (the % character
matches any substring).

(Contributed by Bill Peck in [#%s1200427](https://bugzilla.redhat.com/show_bug.cgi?id=1200427).)

### **bkr system-modify** can update host hypervisor field[¶](#bkr-system-modify-can-update-host-hypervisor-field "Permalink to this headline")

Using [*bkr system-modify --host-hypervisor*](../man/bkr-system-modify.html#cmdoption-bkr-system-modify--host-hypervisor) you can update the host
hypervisor field for a system.

(Contributed by Dan Callaghan in [#%s1206978](https://bugzilla.redhat.com/show_bug.cgi?id=1206978).)

### New [*--proxy-user*](../man/bkr.html#cmdoption-bkr--proxy-user) option, to authenticate as other users[¶](#new-proxy-user-option-to-authenticate-as-other-users "Permalink to this headline")

This option can only be used when the authenticating user is a member of
a group which has been granted “proxy\_user” permission by the Beaker
administrator. Typically this permission is granted to service accounts so that
a trusted script can perform actions on behalf of any other Beaker user.

(Contributed by Ján Stanček in [#%s1199853](https://bugzilla.redhat.com/show_bug.cgi?id=1199853).)

## Notable changes[¶](#notable-changes "Permalink to this headline")

### Task roles are now visible between host and guest recipes[¶](#task-roles-are-now-visible-between-host-and-guest-recipes "Permalink to this headline")

In previous Beaker releases, task roles were not visible between the guest
recipes and the host recipes in a recipe set.

For example, in the following recipe set:

```
<recipeSet>
  <recipe system="hostA">
    <task role="SERVERS" />
    <guestrecipe system="guest1">
      <task role="SERVERS" />
    </guestrecipe>
  </recipe>
  <recipe system="hostB">
    <task role="CLIENTS" />
    <guestrecipe system="guest2">
      <task role="CLIENTS" />
    </guestrecipe>
  </recipe>
</recipeSet>
```

the role environment variables in both host recipes would have previously
been:

```
SERVERS=hostA
CLIENTS=hostB

```

and in both guest recipes they would have been:

```
SERVERS=guest1
CLIENTS=guest2

```

However, this separation between host and guest recipes has been removed. In
the above example, all four recipes would see the same role environment
variables:

```
SERVERS=hostA guest1
CLIENTS=hostB guest2
```

(Contributed by Dan Callaghan in [#%s960434](https://bugzilla.redhat.com/show_bug.cgi?id=960434).)

### BIOS boot partition is defined in kickstarts[¶](#bios-boot-partition-is-defined-in-kickstarts "Permalink to this headline")

Beaker’s kickstart templates now define a 1MB “BIOS boot” partition when:

* the recipe uses custom partitioning (<partition/> or a related
  kickstart metadata variable);
* the system is x86 with BIOS firmware (or EFI firmware running in BIOS
  compatibility mode); and
* the distro supports GPT format disks for BIOS systems (Fedora, CentOS 7,
  RHEL 7).

The BIOS boot partition is needed in case the boot disk is larger than 2TB,
which causes Anaconda to use GPT instead of MBR when formatting the disk. If
the boot disk is smaller than 2TB, the BIOS boot partition is still created but
it will be empty and unused.

(Contributed by Dan Callaghan in [#%s1108393](https://bugzilla.redhat.com/show_bug.cgi?id=1108393).)

### **bkr workflow-installer-test** is deprecated[¶](#bkr-workflow-installer-test-is-deprecated "Permalink to this headline")

This workflow command was used for submitting jobs to test the Anaconda
installer. It included support for rendering custom kickstarts on the client
side using template variables.

Use the [*--kickstart*](../man/bkr.html#cmdoption-bkr--kickstart) option for **bkr
workflow-simple** (or any other workflow command) instead. This option lets you
pass a kickstart template which is rendered on the server using Beaker’s
existing kickstart templating mechanisms.

Beaker’s server-side templating has been expanded to cover all use cases which
were supported by **bkr workflow-installer-test**, and is now fully
documented. Refer to [*Custom kickstart templates*](../user-guide/customizing-installation.html#custom-kickstarts).

(Contributed by Alexander Todorov and Dan Callaghan in [#%s1184720](https://bugzilla.redhat.com/show_bug.cgi?id=1184720),
[#%s966348](https://bugzilla.redhat.com/show_bug.cgi?id=966348), [#%s1077251](https://bugzilla.redhat.com/show_bug.cgi?id=1077251).)

### New <pool/> host filter replacing <group/>[¶](#new-pool-host-filter-replacing-group "Permalink to this headline")

With the introduction of system pools, a new XML host filter <pool/> has
been added for filtering by pool membership. It follows the behaviour of the
previous <group/> element, which allowed filtering systems by group
membership.

For backwards compatibility, the <group/> element will remain as
a deprecated alias for <pool/>.

### **bkr policy-list** shows active policy by default[¶](#bkr-policy-list-shows-active-policy-by-default "Permalink to this headline")

The **bkr policy-list** command now retrieves and prints the rules from
the system’s currently active access policy, which may be a pool policy. If you
want to retrieve the rules from the system’s custom access policy, use the
[*--custom*](../man/bkr-policy-list.html#cmdoption-bkr-policy-list--custom) option.

### Changes to reporting queries using system\_access\_policy[¶](#changes-to-reporting-queries-using-system-access-policy "Permalink to this headline")

As part of the support for pool access policies described above, the database
structure for representing system access policies has changed.

If you are running Beaker database queries which join the
system\_access\_policy table in order to filter by access policy rules, you
must update the join condition. Previously the join condition was:

```
JOIN system_access_policy
ON system.id = system_access_policy.system_id
```

Replace this with:

```
JOIN system_access_policy
ON system.active_access_policy_id = system_access_policy.id
```

## Task and harness updates[¶](#task-and-harness-updates "Permalink to this headline")

A new task /distribution/rebuild has been published, for experimental mass
rebuilds of the entire distribution from source. See
[*/distribution/rebuild*](../user-guide/beaker-provided-tasks.html#distribution-rebuild-task).
(Contributed by Dan Callaghan in [#%s1183913](https://bugzilla.redhat.com/show_bug.cgi?id=1183913).)

## Bug fixes[¶](#bug-fixes "Permalink to this headline")

A number of bug fixes are also included in this release:

* [#%s1207727](https://bugzilla.redhat.com/show_bug.cgi?id=1207727): Fixed a regression in Beaker 19.3 with advanced search,
  causing some fields to be incorrectly treated as date fields. (Contributed by
  Matt Jia)
* [#%s1109614](https://bugzilla.redhat.com/show_bug.cgi?id=1109614): The “post-install done” check-in step in Beaker recipe
  kickstarts now always appears at the very end of the kickstart. Previously in
  some circumstances it would be performed before all post-install actions were
  done. (Contributed by Dan Callaghan)
* [#%s1101817](https://bugzilla.redhat.com/show_bug.cgi?id=1101817): Activity pages no longer display a total count of all
  activity records in Beaker, because this is too expensive to compute.
  (Contributed by Dan Callaghan)
* [#%s1122464](https://bugzilla.redhat.com/show_bug.cgi?id=1122464): The *Executed Tasks* tab on the system page now
  cancels previous AJAX requests before submitting new ones. (Contributed by
  Matt Jia)
* [#%s1173376](https://bugzilla.redhat.com/show_bug.cgi?id=1173376): The scheduler now correctly clears the candidate system
  mapping for a recipe when it is cancelled or aborted. This prevents a large
  number of rows needlessly accumulating in the system\_recipe\_map database
  table. (Contributed by Matt Jia)
* [#%s1149944](https://bugzilla.redhat.com/show_bug.cgi?id=1149944): The administration guide now includes a complete copy of
  the server.cfg and labcontroller.conf configuration files,
  showing an explanation for each option and its default value. (Contributed by
  Dan Callaghan)

## Maintenance updates[¶](#maintenance-updates "Permalink to this headline")

The following fixes have been included in Beaker 20 maintenance updates.

### Beaker 20.1[¶](#beaker-20-1 "Permalink to this headline")

This release fixes four security vulnerabilities:

* [#%s1215034](https://bugzilla.redhat.com/show_bug.cgi?id=1215034): Modifying key types and power types is now properly
  restricted to Beaker administrators. Previously these operations were
  unintentionally available to all users, including anonymous users.
  (Contributed by Matt Jia)
* [#%s1215020](https://bugzilla.redhat.com/show_bug.cgi?id=1215020): DTDs and XML entities are no longer accepted in job XML
  submitted to Beaker. This prevents a type of attack called “XXE” where an
  authenticated user can cause Beaker to disclose the contents of files on the
  server’s filesystem. (Contributed by Dan Callaghan)
* [#%s1215030](https://bugzilla.redhat.com/show_bug.cgi?id=1215030): Recipe set comments are no longer interpreted as HTML,
  they are now interpreted as plain text and HTML characters are escaped. This
  prevents authenticated users from performing <script> injection attacks
  using recipe set comments. (Contributed by Dan Callaghan)
* [#%s1215024](https://bugzilla.redhat.com/show_bug.cgi?id=1215024): Closing </script> tags are now properly escaped in the
  JavaScript source for the advanced search bar. (Contributed by Dan Callaghan)

### Beaker 20.2[¶](#beaker-20-2 "Permalink to this headline")

* [#%s1226076](https://bugzilla.redhat.com/show_bug.cgi?id=1226076): Fixed a problem with the handling of <group/> and
  <pool/> elements in <hostRequires/> which would cause the filter to
  match incorrect systems, and in some cases exhaust temp table space on the
  database. (Contributed by Matt Jia)
* [#%s1212517](https://bugzilla.redhat.com/show_bug.cgi?id=1212517): The **bkr** client is now compatible with the
  SSL-related changes in Python 2.7.9. (Contributed by Dan Callaghan)
* [#%s1102442](https://bugzilla.redhat.com/show_bug.cgi?id=1102442): The **bkr system-release** command can now also
  release a system which is held by a recipe in Reserved status (using
  <reservesys/>). (Contributed by Matt Jia)
* [#%s1181700](https://bugzilla.redhat.com/show_bug.cgi?id=1181700): The **bkr system-power** command now accepts
  [*--action=none*](../man/bkr-system-power.html#cmdoption-bkr-system-power--action) in conjunction with
  [*--clear-netboot*](../man/bkr-system-power.html#cmdoption-bkr-system-power--clear-netboot) to allow
  clearing a system’s netboot configuration without rebooting it. (Contributed
  by Matt Jia)
* [#%s1128002](https://bugzilla.redhat.com/show_bug.cgi?id=1128002), [#%s1128004](https://bugzilla.redhat.com/show_bug.cgi?id=1128004): Beaker can now perform automatic hardware
  scanning on aarch64 and ppc64le distros. (Contributed by Amit Saha)
* [#%s1217695](https://bugzilla.redhat.com/show_bug.cgi?id=1217695): The pre-defined host filters for the [*--host-filter*](../man/bkr.html#cmdoption-bkr--host-filter) option have been updated to exclude virtualized systems
  for CPU-based filters, and a number of new CPU-based filters have been added.
  (Contributed by Michael Petlan)
* [#%s1235317](https://bugzilla.redhat.com/show_bug.cgi?id=1235317): Beaker now treats Red Hat Gluster Storage 3 like Red Hat
  Enterprise Linux 6 for kickstart templating purposes. (Contributed by Dan
  Callaghan)
* [#%s1197074](https://bugzilla.redhat.com/show_bug.cgi?id=1197074): The <or/> and <and/> elements now have their
  expected effect inside the <disk/> element in <hostRequires/>.
  Previously they were ignored. (Contributed by Matt Jia)
* [#%s1217158](https://bugzilla.redhat.com/show_bug.cgi?id=1217158): The [*--pool*](../man/bkr-system-list.html#cmdoption-bkr-system-list--pool) option
  replaces the [*--group*](../man/bkr-system-list.html#cmdoption-bkr-system-list--group) option for
  **bkr list-systems <bkr system-list>**. The old option is still
  accepted as an alias for compatibility. (Contributed by Dan Callaghan)
* [#%s1219965](https://bugzilla.redhat.com/show_bug.cgi?id=1219965): The kickstart templates now define an EFI System Partition
  when using custom partitioning on aarch64, for compatibility with systems
  which have UEFI firmware. (Contributed by Matt Jia)
* [#%s1217283](https://bugzilla.redhat.com/show_bug.cgi?id=1217283): When a user views the list of systems on the pool page,
  systems which they do not have permission to view will now appear as
  *(system with restricted visibility)*. (Contributed by Matt Jia)
* [#%s1213203](https://bugzilla.redhat.com/show_bug.cgi?id=1213203): In the list of systems on the pool page, the Remove button
  now correctly appears only when the user has permission to remove the system.
  Previously the button would always appear. (Contributed by Matt Jia)
* [#%s1212725](https://bugzilla.redhat.com/show_bug.cgi?id=1212725): The **bkr** client now reports a meaningful error
  message when no configuration file was loaded, rather than attempting to
  connect to localhost. (Contributed by Matt Jia)

Version 1.2-6 of the /distribution/inventory task has also been released:

* [#%s1211850](https://bugzilla.redhat.com/show_bug.cgi?id=1211850): Fixed false positives in checking if virtualization
  features are disabled by the BIOS, which could occur if the system has “kvm”
  in its hostname. (Contributed by Amit Saha)

Version 4.66 of the rhts test development and execution library has also
been released:

* [#%s1219920](https://bugzilla.redhat.com/show_bug.cgi?id=1219920): The **rhts-lint** command (invoked when building and
  uploading task RPMs) now ignores unrecognised fields in testinfo.desc
  rather than reporting a warning and failing the build. (Contributed by Dan
  Callaghan)
* [#%s1219971](https://bugzilla.redhat.com/show_bug.cgi?id=1219971): Fixed an issue which would cause **make rpm** to
  incorrectly attempt to upload the task to Beaker when invoked on a Beaker
  test system. (Contributed by Dan Callaghan)

* [Beaker](../index.html)
* [What’s New](index.html)

* [previous](release-21.html "What’s New in Beaker 21?")
* [next](release-19.html "What’s New in Beaker 19?")



=== Content from bugzilla.redhat.com_7ad20de5_20250125_080028.html ===
From 36809a80741d572af124f2a15b1fdf5c581cde46 Mon Sep 17 00:00:00 2001
From: Dan Callaghan
Date: Mon, 4 May 2015 17:50:00 +1000
Subject: [PATCH 3/4] recipe set comments are text, not HTML
Bug: 1215030
---
.../bkr/inttest/server/selenium/test\_job\_ack.py | 26 ++++++++++++++++++++++
.../javascript/{response\_v4.js => response\_v6.js} | 6 ++---
Server/bkr/server/widgets.py | 2 +-
3 files changed, 30 insertions(+), 4 deletions(-)
rename Server/bkr/server/static/javascript/{response\_v4.js => response\_v6.js} (97%)
diff --git a/IntegrationTests/src/bkr/inttest/server/selenium/test\_job\_ack.py b/IntegrationTests/src/bkr/inttest/server/selenium/test\_job\_ack.py
index 242a36a..ceed197 100644
--- a/IntegrationTests/src/bkr/inttest/server/selenium/test\_job\_ack.py
+++ b/IntegrationTests/src/bkr/inttest/server/selenium/test\_job\_ack.py
@@ -188,3 +188,29 @@ def test\_record\_ack\_change(self):
self.assertEquals(job.recipesets[0].activity[0].object\_name(), 'RecipeSet: %s' % job.recipesets[0].id)
self.assertEquals(job.recipesets[0].activity[0].old\_value, u'ack')
self.assertEquals(job.recipesets[0].activity[0].new\_value, u'nak')
+
+ # https://bugzilla.redhat.com/show\_bug.cgi?id=1215030
+ def test\_html\_in\_comments\_is\_escaped(self):
+ with session.begin():
+ owner = data\_setup.create\_user(password=u'owner')
+ job = data\_setup.create\_job(owner=owner)
+ data\_setup.mark\_job\_complete(job)
+ bad\_comment = ''
+ b = self.browser
+ login(b, user=owner.user\_name, password='owner')
+ b.get(get\_server\_base() + 'jobs/%s' % job.id)
+ self.review(job.recipesets[0], comment=bad\_comment)
+ # reload the page, showing the comment should not execute a script
+ b.get(get\_server\_base() + 'jobs/%s' % job.id)
+ rs = b.find\_element\_by\_xpath('//\*[@id="RS\_%s"]' % job.recipesets[0].id)
+ # click comment link
+ rs.find\_element\_by\_link\_text('comment').click()
+ # check dialog contents
+ dialog\_content = b.find\_element\_by\_xpath('//\*[contains(@class, "ui-dialog-content")]')
+ self.assertEquals(dialog\_content.text, bad\_comment)
+ # click edit button in modal
+ b.find\_element\_by\_xpath('//\*[contains(@class, "ui-dialog")]'
+ '//button[text()="Edit"]').click()
+ # check textarea contents
+ textarea = b.find\_element\_by\_xpath('//\*[contains(@class, "ui-dialog")]//textarea')
+ self.assertEquals(textarea.text, bad\_comment)
diff --git a/Server/bkr/server/static/javascript/response\_v4.js b/Server/bkr/server/static/javascript/response\_v6.js
similarity index 97%
rename from Server/bkr/server/static/javascript/response\_v4.js
rename to Server/bkr/server/static/javascript/response\_v6.js
index c9aa389..6aedea5 100644
--- a/Server/bkr/server/static/javascript/response\_v4.js
+++ b/Server/bkr/server/static/javascript/response\_v6.js
@@ -94,7 +94,7 @@ AckPanel.prototype.get\_response\_comment = function (id) {
AckPanel.prototype.show\_comment = function(result) {
var rs\_id = result.rs\_id
var comment = result.comment
- var newspan = $('').attr('id','comment\_remote\_response\_text\_' + rs\_id).attr('title','Comment for RS# ' + rs\_id).html(comment)
+ var newspan = $('').attr('id','comment\_remote\_response\_text\_' + rs\_id).attr('title','Comment for RS# ' + rs\_id).text(comment)
$('#response\_'+rs\_id).after(newspan)
$('#comment\_remote\_response\_text\_' + rs\_id).dialog({height:200,
@@ -103,8 +103,8 @@ AckPanel.prototype.show\_comment = function(result) {
'Edit' : function() {
$(this).dialog('close')
var t\_box = $("").
- html(newspan.
- text()).attr('title','Edit RS# '+ rs\_id+' comment').
+ text(comment).
+ attr('title','Edit RS# '+ rs\_id+' comment').
attr('id','comment\_textbox\_' + rs\_id)
//addClass('hidden');
diff --git a/Server/bkr/server/widgets.py b/Server/bkr/server/widgets.py
index dc44a91..161f432 100644
--- a/Server/bkr/server/widgets.py
+++ b/Server/bkr/server/widgets.py
@@ -525,7 +525,7 @@ class AckPanel(RadioButtonList):
javascript = [LocalJSLink('bkr','/static/javascript/jquery-ui-1.9.2.min.js', order=3),
LocalJSLink('bkr','/static/javascript/loader\_v2.js'),
- LocalJSLink('bkr','/static/javascript/response\_v4.js')]
+ LocalJSLink('bkr','/static/javascript/response\_v6.js')]
css = [LocalCSSLink('bkr', '/static/css/smoothness/jquery-ui.css')]
params = ['widget\_name','unreal\_response','comment\_id','comment\_class']
--
1.9.3

