=== Content from access.redhat.com_83d26c49_20250126_083808.html ===


[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

**We're sorry but cve-details doesn't work properly without JavaScript enabled. Please enable it to continue.**

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from bugzilla.redhat.com_dbd4ace9_20250125_124514.html ===


* Login
  + Log in using an SSO provider:- [Fedora Account System](saml2_login.cgi?idp=Fedora%20Account%20System&target=show_bug.cgi%3Fid%3D1216073)
    - [Red Hat Associate](saml2_login.cgi?idp=Red%20Hat%20Associate&target=show_bug.cgi%3Fid%3D1216073)
    - [Red Hat Customer](saml2_login.cgi?idp=Red%20Hat%20Customer&target=show_bug.cgi%3Fid%3D1216073)+ Login using a Red Hat Bugzilla account
  + Forgot Password
  + [Create an Account](createaccount.cgi)

Red Hat Bugzilla – Bug 1216073

* [Home](./)
* [New](enter_bug.cgi)
* Search
  + [Simple Search](query.cgi?format=specific)
  + [Advanced Search](query.cgi?format=advanced)
* My Links
  + [Browse](describecomponents.cgi)
  + [Requests](request.cgi)
  + Reports
  + Current State
    - [Search](query.cgi)
    - [Tabular reports](query.cgi?format=report-table)
    - [Graphical reports](query.cgi?format=report-graph)
    - [Duplicates](duplicates.cgi)
  + Other Reports
    - [User Changes](https://bugzilla.redhat.com/page.cgi?id=user_activity.html)
  + Plotly Reports
    - [Bug Status](https://bugzilla.redhat.com/page.cgi?id=bug_status.html)
    - [Bug Severity](https://bugzilla.redhat.com/page.cgi?id=bug_severity.html)
    - [Non-Defaults](https://bugzilla.redhat.com/page.cgi?id=non_defaults.html)
* [Product Dashboard](page.cgi?id=productdashboard.html)

- Help
  * [Page Help!](docs/en/html/using/understanding.html)
  * [Bug Writing Guidelines](page.cgi?id=bug-writing.html)
  * [What's new](page.cgi?id=whats-new.html)
  * [Browser Support Policy](https://access.redhat.com/help/browsers)
  * [5.0.4.rh103 Release notes](page.cgi?id=release-notes.html)
  * [FAQ](page.cgi?id=faq.html)
  * [Guides index](docs/en/html/index.html)
  * [User guide](docs/en/html/using/index.html)
  * [Web Services](docs/en/html/integrating/api/Bugzilla/WebService/Bug.html)
  * [Contact](page.cgi?id=redhat/contact.html)
  * [Legal](page.cgi?id=terms-conditions.html)
- [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")

This site requires JavaScript to be enabled to function correctly, please enable it.

[**Bug 1216073**](show_bug.cgi?id=1216073)
(CVE-2015-3156)
- [CVE-2015-3156](https://access.redhat.com/security/cve/CVE-2015-3156) openstack-trove: multiple insecure /tmp file usage issues

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
CVE-2015-3156 openstack-trove: multiple insecure /tmp file usage issues

| | [Keywords](describekeywords.cgi): | Security | | --- | --- | | [Status](page.cgi?id=fields.html#bug_status): | CLOSED WONTFIX | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | CVE-2015-3156 | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components. Select a Classification to narrow down this list.") | Security Response | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Other | | [Component:](describecomponents.cgi?product=Security Response "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | vulnerability | | [Sub Component:](page.cgi?id=fields.html#rh_sub_components "The sub component of a specific component") | --- | | [Version:](page.cgi?id=fields.html#version "The version field defines the version of the software the bug was found in.") | unspecified | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | All | | [OS:](page.cgi?id=fields.html#op_sys "The operating system the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Linux | | [Priority:](page.cgi?id=fields.html#priority) | low | | [Severity:](page.cgi?id=fields.html#bug_severity) | low | | [Target Milestone:](page.cgi?id=fields.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | --- | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Red Hat Product Security | | [QA Contact:](page.cgi?id=fields.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") |  | | [Docs Contact:](page.cgi?id=fields.html#docs_contact "The person responsible for documenting once the bug has been resolved.") |  | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | [Depends On:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") | [1247447](show_bug.cgi?id=1247447 "CLOSED EOL - CVE-2015-3156 openstack-trove: multiple insecure /tmp file usage issues [fedora-all]") [1247448](show_bug.cgi?id=1247448) | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") | [1216080](show_bug.cgi?id=1216080) | | TreeView+ | [depends on](buglist.cgi?bug_id=1216073&bug_id_type=anddependson&format=tvp) / [blocked](buglist.cgi?bug_id=1216073&bug_id_type=andblocked&format=tvp&tvp_dir=blocked) |  | |  | | [Reported:](page.cgi?id=fields.html#reporter) | 2015-04-28 12:51 UTC by Vasyl Kaigorodov | | --- | --- | | [Modified:](page.cgi?id=fields.html#modified) | 2021-02-17 05:21 UTC ([History](show_activity.cgi?id=1216073)) | | [CC List:](page.cgi?id=fields.html#cclist) | 19 users (show)  abaron aortega apevec ayoung chrisw dallan gkotton gmollett jrusnack lhh lpeer markmc pmackinn rbryant sclewis security-response-team sgotliv vimartin yeylon | | Fixed In Version: |  | | | Doc Type: | Bug Fix | | | Doc Text: |  | | | Clone Of: |  | | | Environment: |  | | | Last Closed: | 2015-07-28 03:12:27 UTC | | | Embargoed: |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | [(Terms of Use)](page.cgi?id=terms-conditions.html) | | | --- | --- | --- | |  | | | |  |
| --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=1216073#c0)  Vasyl Kaigorodov    2015-04-28 12:51:03 UTC  ``` Michael Scherer of Red Hat reported multiple issues in OpenStack Trove where temporary files are used in an insecure way in different modules:    trove: MongoDB datastore module in guestagent insecure /tmp file usage in _write_config()   <https://github.com/openstack/trove/blob/master/trove/guestagent/datastore/experimental/mongodb/service.py#L176>    trove: PostgreSQL datastore module in guestagent insecure /tmp file usage in reset_configuration()   <https://github.com/openstack/trove/blob/master/trove/guestagent/datastore/experimental/postgresql/service/config.py#L70>    trove: Redis datastore module in guestagent insecure /tmp file usage in write_config()   <https://github.com/openstack/trove/blob/master/trove/guestagent/datastore/experimental/redis/service.py#L236>    trove: MySQL datastore module in guestagent insecure /tmp file usage in _write_mycnf()   <https://github.com/openstack/trove/blob/master/trove/guestagent/datastore/mysql/service.py#L790>    trove: MySQL restore strategy in guestagent insecure /tmp file usage in InnoBackupEx::_run_prepare()   <https://github.com/openstack/trove/blob/master/trove/guestagent/strategies/restore/mysql_impl.py#L194>    trove: MySQL backup strategy in guestagent insecure /tmp file usage in InnoBackupEx::cmd()   <https://github.com/openstack/trove/blob/master/trove/guestagent/strategies/backup/mysql_impl.py#L55>    trove: MySQL backup strategy in guestagent insecure /tmp file usage in MySQLDump::cmd()   <https://github.com/openstack/trove/blob/master/trove/guestagent/strategies/backup/mysql_impl.py#L36>    trove: MySQL backup strategy in guestagent insecure /tmp file usage in InnoBackupExIncremental::cmd()   <https://github.com/openstack/trove/blob/master/trove/guestagent/strategies/backup/mysql_impl.py#L110>    trove: Cassandra datastore module insecure /tmp file usage in _get_actual_db_status()   <https://github.com/openstack/trove/blob/master/trove/guestagent/datastore/experimental/cassandra/system.py#L33>   <https://github.com/openstack/trove/blob/master/trove/guestagent/datastore/experimental/cassandra/service.py#L230>    trove: Couchbase backup strategy insecure /tmp file usage in multiple class CbBackup methods   <https://github.com/openstack/trove/blob/master/trove/guestagent/strategies/backup/experimental/couchbase_impl.py#L30>   ```  [Comment 1](show_bug.cgi?id=1216073#c1)  Vasyl Kaigorodov    2015-04-30 14:54:54 UTC  ``` Upstream does not consider this as a security issue, from [https://bugs.launchpad.net/trove/+bug/1398195](https://bugs.launchpad.net/trove/%2Bbug/1398195) :  Due to the need for access to the instance filesystem and the limited exposure (basically anyone with shell access to a Trove instance is going to be the administrator of the infrastructure on which it's running) along with the fact that it's only slated to be fixed in the master branch for inclusion in the upcoming Kilo release, the VMT will not be publishing a security advisory nor requesting a CVE for this bug.   ```  [Comment 3](show_bug.cgi?id=1216073#c3)  Garth Mollett    2015-07-28 03:11:47 UTC  ```  Created openstack-trove tracking bugs for this issue:  Affects: fedora-all [[bug 1247447](show_bug.cgi?id=1247447 "CLOSED EOL - CVE-2015-3156 openstack-trove: multiple insecure /tmp file usage issues [fedora-all]")] Affects: openstack-rdo [[bug 1247448](show_bug.cgi?id=1247448)]   ``` |  |
| --- | --- |

---

| Note You need to [log in](show_bug.cgi?id=1216073&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. |
| --- |

---

[Privacy](page.cgi?id=redhat/privacy.html)
[Contact](page.cgi?id=redhat/contact.html)
[FAQ](page.cgi?id=faq.html)
[Legal](page.cgi?id=terms-conditions.html)



=== Content from bugs.launchpad.net_d8a5b724_20250125_124508.html ===

[Log in / Register](https://bugs.launchpad.net/trove/%2Bbug/1398195/%2Blogin)

[![](https://launchpadlibrarian.net/173621608/os64.png)](https://launchpad.net/trove)

## [OpenStack DBaaS (Trove)](https://launchpad.net/trove)

* [Overview](https://launchpad.net/trove)
* [Code](https://code.launchpad.net/trove)
* [Bugs](https://bugs.launchpad.net/trove)
* [Blueprints](https://blueprints.launchpad.net/trove)
* [Translations](https://translations.launchpad.net/trove)
* [Answers](https://answers.launchpad.net/trove)

# Insecure temporary file usage in Cassandra datastore

Bug #1398195 reported by
[Travis McPeak](https://launchpad.net/~travis-mcpeak)
on 2014-12-01

[260](/%2Bhelp-bugs/bug-heat.html)

This bug affects 1 person

| Affects | | Status | Importance | Assigned to | Milestone |
| --- | --- | --- | --- | --- | --- |
|  | [OpenStack DBaaS (Trove)](https://bugs.launchpad.net/trove) | Fix Released | High | [Amrith Kumar](https://launchpad.net/~amrith) | [OpenStack DBaaS (Trove) 2015.1.0 "kilo"](https://launchpad.net/trove/%2Bmilestone/2015.1.0) |
|  | [OpenStack Security Advisory](https://bugs.launchpad.net/ossa) | Won't Fix | Undecided | Unassigned |  |

### Bug Description

This code in the Cassandra datastore for Trove uses temporary files insecurely here:

<https://github.com/openstack/trove/blob/master/trove/guestagent/datastore/cassandra/service.py#L130>

Around the above line, config is written to a hardcoded file in /tmp and then copied (with sudo) to another hardcoded path. Since this path is hardcoded and in tmp (with no special permissions set on it), an attacker may be able to tamper with the contents of the file, or beat the legitimate code to the creation of the file. In either case, the attacker controlled config will be copied to the protected (as evidenced by the need for sudo) Cassandra config file path.

If temporary files are required, secure libraries/functions should be used instead. Potentially sensitive config data should be protected with adequate access controls at all times.

[Jeremy Stanley (fungi)](https://launchpad.net/~fungi)
on 2014-12-02

| Changed in ossa: | |
| --- | --- |
| **status**: | New → Incomplete |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jeremy Stanley (fungi)](https://launchpad.net/~fungi) wrote on 2014-12-02: |  |  | [#1](/trove/%2Bbug/1398195/comments/1) |
| --- | --- | --- | --- |

I agree this sounds like a classic "predictable temporary file" vulnerability. Risk is likely low since the trove guest agent runs on trove instances which typically don't have untrusted local users in a typical deployment, though I suppose there might be some accessible database features capable of coaxing symlink creation to perform an overwrite attack on systems lacking sufficient in-kernel safeguards against that.

I've subscribed Trove core security reviewers to weigh in on the bug report and potential fixes.

I agree this sounds like a classic "predictable temporary file" vulnerability. Risk is likely low since the trove guest agent runs on trove instances which typically don't have untrusted local users in a typical deployment, though I suppose there might be some accessible database features capable of coaxing symlink creation to perform an overwrite attack on systems lacking sufficient in-kernel safeguards against that.
I've subscribed Trove core security reviewers to weigh in on the bug report and potential fixes.

[Amrith Kumar (amrith)](https://launchpad.net/~amrith)
on 2014-12-02

| Changed in trove: | |
| --- | --- |
| **assignee**: | nobody → Amrith (amrith) |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Amrith Kumar (amrith)](https://launchpad.net/~amrith) wrote on 2014-12-03: |  |  | [#2](/trove/%2Bbug/1398195/comments/2) |
| --- | --- | --- | --- |

See <https://review.openstack.org/#/c/138719/>

See https://review.openstack.org/#/c/138719/

| Changed in trove: | |
| --- | --- |
| **status**: | New → In Progress |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jeremy Stanley (fungi)](https://launchpad.net/~fungi) wrote on 2014-12-03: |  |  | [#3](/trove/%2Bbug/1398195/comments/3) |
| --- | --- | --- | --- |

I was hoping to at least get some exploitability discussion out of the way before this became public, but since it's now referenced in a public code review there's no longer any reason to maintain an embargo.

In the future, fixes for private security bugs should be proposed as attachments so that the discussion around them can remain private while a coordinated disclosure is being prepared.

I was hoping to at least get some exploitability discussion out of the way before this became public, but since it's now referenced in a public code review there's no longer any reason to maintain an embargo.
In the future, fixes for private security bugs should be proposed as attachments so that the discussion around them can remain private while a coordinated disclosure is being prepared.

| **information type**: | Private Security → Public Security |
| --- | --- |

[OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack)
on 2014-12-04

| Changed in trove: | |
| --- | --- |
| **assignee**: | Amrith (amrith) → Denis M. (dmakogon) |

[Denis M. (dmakogon)](https://launchpad.net/~dmakogon)
on 2014-12-04

| Changed in trove: | |
| --- | --- |
| **assignee**: | Denis M. (dmakogon) → Amrith (amrith) |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Travis McPeak (travis-mcpeak)](https://launchpad.net/~travis-mcpeak) wrote on 2014-12-04: |  |  | [#4](/trove/%2Bbug/1398195/comments/4) |
| --- | --- | --- | --- |

Is this the right CVE? It looks like it refers to POODLE.

Is this the right CVE? It looks like it refers to POODLE.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jeremy Stanley (fungi)](https://launchpad.net/~fungi) wrote on 2014-12-05: |  |  | [#5](/trove/%2Bbug/1398195/comments/5) |
| --- | --- | --- | --- |

The OpenStack vulnerability management team hasn't requested a CVE yet since we're still waiting on one of the Trove core security reviewers to weigh in on impact and exploitability first.

The OpenStack vulnerability management team hasn't requested a CVE yet since we're still waiting on one of the Trove core security reviewers to weigh in on impact and exploitability first.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2014-12-08: |  |  | [#6](/trove/%2Bbug/1398195/comments/6) |
| --- | --- | --- | --- |

OK, let's wait for Trove folks. I think it's highly unexploitable in Trove normal mode of operation, but better safe than sorry.

OK, let's wait for Trove folks. I think it's highly unexploitable in Trove normal mode of operation, but better safe than sorry.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Nikhil Manchanda (slicknik)](https://launchpad.net/~slicknik) wrote on 2014-12-08: |  |  | [#7](/trove/%2Bbug/1398195/comments/7) |
| --- | --- | --- | --- |

The impact of this is pretty minimal. From a deployment perspective, datastores are deployed so that file access is not allowed. Coupling that with the fact that SSH access to the Trove instance is also restricted, this vulnerability seems very hard to exploit. However, regardless of these mitigations, we're planning on having a fix for this in Trove during kilo.

The impact of this is pretty minimal. From a deployment perspective, datastores are deployed so that file access is not allowed. Coupling that with the fact that SSH access to the Trove instance is also restricted, this vulnerability seems very hard to exploit. However, regardless of these mitigations, we're planning on having a fix for this in Trove during kilo.

| Changed in trove: | |
| --- | --- |
| **importance**: | Undecided → High |

[Amrith Kumar (amrith)](https://launchpad.net/~amrith)
on 2014-12-16

| Changed in trove: | |
| --- | --- |
| **milestone**: | none → kilo-2 |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jeremy Stanley (fungi)](https://launchpad.net/~fungi) wrote on 2014-12-22: |  |  | [#8](/trove/%2Bbug/1398195/comments/8) |
| --- | --- | --- | --- |

Due to the need for access to the instance filesystem and the limited exposure (basically anyone with shell access to a Trove instance is going to be the administrator of the infrastructure on which it's running) along with the fact that it's only slated to be fixed in the master branch for inclusion in the upcoming Kilo release, the VMT will not be publishing a security advisory nor requesting a CVE for this bug.

Due to the need for access to the instance filesystem and the limited exposure (basically anyone with shell access to a Trove instance is going to be the administrator of the infrastructure on which it's running) along with the fact that it's only slated to be fixed in the master branch for inclusion in the upcoming Kilo release, the VMT will not be publishing a security advisory nor requesting a CVE for this bug.

| Changed in ossa: | |
| --- | --- |
| **status**: | Incomplete → Won't Fix |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2015-01-21:  [**Fix merged to trove (master)**](/trove/%2Bbug/1398195/comments/9) |  |  | [#9](/trove/%2Bbug/1398195/comments/9) |
| --- | --- | --- | --- |

Reviewed: <https://review.openstack.org/138719>

Committed: <https://git.openstack.org/cgit/openstack/trove/commit/?id=61774984aa2bacfe89867fc39a402a6a4cfb8f33>

Submitter: Jenkins

Branch: master

commit 61774984aa2bacfe89867fc39a402a6a4cfb8f33

Author: Amrith Kumar <email address hidden>

Date: Thu Dec 4 10:26:24 2014 +0200

Address predictable temp file vulnerability

This change addresses a predictable temporary file vulnerability in

    the code path that writes the cassandra configuration. Unit tests have

    been added.

Since there is a problem with Mock()'ing a shared entry point (like

    os.unlink or utils.execute\_with\_timeout) there is an inherent

    instability in these tests. The safe way around this is to make

    write\_config() accept arguments that can be Mock()'ed for the purpose

    of testing.

A lengthy explanation of the rationale for this change is on the

    openstack-trove IRC channel at about 10:40AM on 12/29/2014.

Also, there was a redundant test that has been eliminated.

Change-Id: I760b937b6714b2b2b366cd8bdb700bece6055fba

    Closes-Bug: #1398195

    Partial-Bug: #1398966

Reviewed: https://review.openstack.org/138719
Committed: https://git.openstack.org/cgit/openstack/trove/commit/?id=61774984aa2bacfe89867fc39a402a6a4cfb8f33
Submitter: Jenkins
Branch: master
commit 61774984aa2bacfe89867fc39a402a6a4cfb8f33
Author: Amrith Kumar <amrith@tesora.com>
Date: Thu Dec 4 10:26:24 2014 +0200
Address predictable temp file vulnerability
This change addresses a predictable temporary file vulnerability in
the code path that writes the cassandra configuration. Unit tests have
been added.
Since there is a problem with Mock()'ing a shared entry point (like
os.unlink or utils.execute\_with\_timeout) there is an inherent
instability in these tests. The safe way around this is to make
write\_config() accept arguments that can be Mock()'ed for the purpose
of testing.
A lengthy explanation of the rationale for this change is on the
openstack-trove IRC channel at about 10:40AM on 12/29/2014.
Also, there was a redundant test that has been eliminated.
Change-Id: I760b937b6714b2b2b366cd8bdb700bece6055fba
Closes-Bug: #1398195
Partial-Bug: #1398966

| Changed in trove: | |
| --- | --- |
| **status**: | In Progress → Fix Committed |

[Thierry Carrez (ttx)](https://launchpad.net/~ttx)
on 2015-02-03

| Changed in trove: | |
| --- | --- |
| **status**: | Fix Committed → Fix Released |

[Thierry Carrez (ttx)](https://launchpad.net/~ttx)
on 2015-04-30

| Changed in trove: | |
| --- | --- |
| **milestone**: | kilo-2 → 2015.1.0 |

[See full activity log](https://bugs.launchpad.net/trove/%2Bbug/1398195/%2Bactivity)

To post a comment you must [log in](%2Blogin?comments=all).

* [Report a bug](/trove/%2Bfilebug)

This report contains
**Public Security**
information

Everyone can see this security related information.

You are
[not directly subscribed to this bug's notifications.](/trove/%2Bbug/1398195/%2Bsubscribe)

Subscribing...

* [Edit bug mail](https://bugs.launchpad.net/trove/%2Bbug/1398195/%2Bsubscriptions "View and change your subscriptions to this bug")

## Other bug subscribers

[Subscribe someone else](https://bugs.launchpad.net/trove/%2Bbug/1398195/%2Baddsubscriber "Launchpad will email that person whenever this bugs changes")

## Remote bug watches

Bug watches keep track of this bug in other bug trackers.

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
4d55102
([Get the code!](https://dev.launchpad.net/))



=== Content from github.com_0f29d3cd_20250125_124518.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fopenstack%2Ftrove%2Fblob%2Fmaster%2Ftrove%2Fguestagent%2Fdatastore%2Fmysql%2Fservice.py)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fopenstack%2Ftrove%2Fblob%2Fmaster%2Ftrove%2Fguestagent%2Fdatastore%2Fmysql%2Fservice.py)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fblob%2Fshow&source=header-repo&source_repo=openstack%2Ftrove)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[openstack](/openstack)
/
**[trove](/openstack/trove)**
Public

* [Notifications](/login?return_to=%2Fopenstack%2Ftrove) You must be signed in to change notification settings
* [Fork
  228](/login?return_to=%2Fopenstack%2Ftrove)
* [Star
   304](/login?return_to=%2Fopenstack%2Ftrove)

* [Code](/openstack/trove)
* [Pull requests
  0](/openstack/trove/pulls)
* [Actions](/openstack/trove/actions)
* [Security](/openstack/trove/security)
* [Insights](/openstack/trove/pulse)

Additional navigation options

* [Code](/openstack/trove)
* [Pull requests](/openstack/trove/pulls)
* [Actions](/openstack/trove/actions)
* [Security](/openstack/trove/security)
* [Insights](/openstack/trove/pulse)

## Files

 master
## Breadcrumbs

1. [trove](/openstack/trove/tree/master)
2. /[trove](/openstack/trove/tree/master/trove)
3. /[guestagent](/openstack/trove/tree/master/trove/guestagent)
4. /[datastore](/openstack/trove/tree/master/trove/guestagent/datastore)
5. /[mysql](/openstack/trove/tree/master/trove/guestagent/datastore/mysql)
/
# service.py

Copy path Blame  Blame
## Latest commit

## History

[History](/openstack/trove/commits/master/trove/guestagent/datastore/mysql/service.py)108 lines (84 loc) · 3.79 KB master
## Breadcrumbs

1. [trove](/openstack/trove/tree/master)
2. /[trove](/openstack/trove/tree/master/trove)
3. /[guestagent](/openstack/trove/tree/master/trove/guestagent)
4. /[datastore](/openstack/trove/tree/master/trove/guestagent/datastore)
5. /[mysql](/openstack/trove/tree/master/trove/guestagent/datastore/mysql)
/
# service.py

Top
## File metadata and controls

* Code
* Blame

108 lines (84 loc) · 3.79 KB[Raw](https://github.com/openstack/trove/raw/refs/heads/master/trove/guestagent/datastore/mysql/service.py)123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108# Copyright 2020 Catalyst Cloud## Licensed under the Apache License, Version 2.0 (the "License");# you may not use this file except in compliance with the License.# You may obtain a copy of the License at## http://www.apache.org/licenses/LICENSE-2.0## Unless required by applicable law or agreed to in writing, software# distributed under the License is distributed on an "AS IS" BASIS,# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.# See the License for the specific language governing permissions and# limitations under the License.import semantic\_version
from sqlalchemy.sql.expression import text
from trove.common import cfgfrom trove.guestagent.datastore.mysql\_common import servicefrom trove.guestagent.utils import mysql as mysql\_util
CONF = cfg.CONF
class MySqlAppStatus(service.BaseMySqlAppStatus): def \_\_init\_\_(self, docker\_client): super(MySqlAppStatus, self).\_\_init\_\_(docker\_client)
class MySqlApp(service.BaseMySqlApp): def \_\_init\_\_(self, status, docker\_client): super(MySqlApp, self).\_\_init\_\_(status, docker\_client)
 def \_get\_gtid\_executed(self): with mysql\_util.SqlClient(self.get\_engine()) as client: return client.execute( text('SELECT @@global.gtid\_executed')).first()[0]
 def \_get\_slave\_status(self): with mysql\_util.SqlClient(self.get\_engine()) as client: return client.execute(text('SHOW SLAVE STATUS')).first()
 def \_get\_master\_UUID(self): slave\_status = self.\_get\_slave\_status() return slave\_status and slave\_status.\_mapping['Master\_UUID'] or None
 def get\_latest\_txn\_id(self): return self.\_get\_gtid\_executed()
 def get\_last\_txn(self): master\_UUID = self.\_get\_master\_UUID() last\_txn\_id = '0' gtid\_executed = self.\_get\_gtid\_executed() for gtid\_set in gtid\_executed.split(','): uuid\_set = gtid\_set.split(':') if str(uuid\_set[0]) == str(master\_UUID): last\_txn\_id = uuid\_set[-1].split('-')[-1] break return master\_UUID, int(last\_txn\_id)
 def wait\_for\_txn(self, txn): with mysql\_util.SqlClient(self.get\_engine()) as client: client.execute( text("SELECT WAIT\_UNTIL\_SQL\_THREAD\_AFTER\_GTIDS('%s')" % txn))
 def get\_backup\_image(self): """Get the actual container image based on datastore version.
 For example, this method converts openstacktrove/db-backup-mysql:1.0.0 to openstacktrove/db-backup-mysql5.7:1.0.0
 \*\*deprecated\*\*: this function is for backward compatibility. """ image = cfg.get\_configuration\_property('backup\_docker\_image') if not self.\_image\_has\_tag(image): return super().get\_backup\_image() else: name, tag = image.rsplit(':', 1) # Get minor version cur\_ver = semantic\_version.Version.coerce(CONF.datastore\_version) minor\_ver = f"{cur\_ver.major}.{cur\_ver.minor}" return f"{name}{minor\_ver}:{tag}"
 def get\_backup\_strategy(self): """Get backup strategy.
 innobackupex was removed in Percona XtraBackup 8.0, use xtrabackup instead. """ strategy = cfg.get\_configuration\_property('backup\_strategy')
 mysql\_8 = semantic\_version.Version('8.0.0') cur\_ver = semantic\_version.Version.coerce(CONF.datastore\_version) if cur\_ver >= mysql\_8: strategy = 'xtrabackup'
 return strategy
class MySqlRootAccess(service.BaseMySqlRootAccess): def \_\_init\_\_(self, app): super(MySqlRootAccess, self).\_\_init\_\_(app)
class MySqlAdmin(service.BaseMySqlAdmin): def \_\_init\_\_(self, app): root\_access = MySqlRootAccess(app) super(MySqlAdmin, self).\_\_init\_\_(root\_access, app)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


