=== Content from launchpad.net_1d0b4763_20250126_020300.html ===

[Log in / Register](https://launchpad.net/~ttx/%2Blogin)

[![](https://launchpadlibrarian.net/116816327/ttx64.jpg)](https://launchpad.net/~ttx)

## [Thierry Carrez](https://launchpad.net/~ttx)

* Overview
* [Code](https://code.launchpad.net/~ttx)
* [Bugs](https://bugs.launchpad.net/~ttx)
* [Blueprints](https://blueprints.launchpad.net/~ttx)
* [Translations](https://translations.launchpad.net/~ttx)
* [Answers](https://answers.launchpad.net/~ttx)

Chair of the Technical Committee and Release Manager for OpenStack.

Python Software Foundation member.

Ubuntu core developer.

* [Related packages](https://launchpad.net/~ttx/%2Brelated-packages)
* [Related projects](https://launchpad.net/~ttx/%2Brelated-projects)

## User information

Launchpad Id:
ttx

Email:
[Log in](%2Blogin) for email information.

Member since:
2008-05-12

[![Icon of Cassandra Ubuntu Packaging](https://launchpadlibrarian.net/59580596/cassandra-ubuntu-icon.png "Member of Cassandra Ubuntu Packaging")](/~cassandra-ubuntu)
[![Icon of (deprecated) OpenStack PPA maintainers](https://launchpadlibrarian.net/87891894/ppa.gif "Member of (deprecated) OpenStack PPA maintainers")](/~openstack-ppa)
[![Icon of Designate Drivers](https://launchpadlibrarian.net/360468067/designate_14.jpg "Member of Designate Drivers")](/~designate-drivers)
[![Icon of Launchpad Beta Testers](https://launchpadlibrarian.net/600856498/Canonical_Launchpad_icon_14px.png "Member of Launchpad Beta Testers")](/~launchpad-beta-testers)
[![Icon of Martin Pitt's fan](https://launchpadlibrarian.net/16410730/immaginexz0.png "Member of Martin Pitt's fan")](/~we-love-pitti)
[![Icon of Nova](https://launchpadlibrarian.net/52560219/os14.png "Member of Nova")](/~nova)
[![Icon of OpenStack release team](https://launchpadlibrarian.net/73211233/openstack-release.png "Member of OpenStack release team")](/~openstack-release)
[![Icon of OpenStack Security SIG](https://launchpadlibrarian.net/203991792/os14.png "Member of OpenStack Security SIG")](/~openstack-ossg)
[![Icon of OpenStack Team](https://launchpadlibrarian.net/52313052/os14.png "Member of OpenStack Team")](/~openstack)
[![Icon of Python OpenStack Client Drivers](https://launchpadlibrarian.net/697274978/osc-icon.png "Member of Python OpenStack Client Drivers")](/~python-openstackclient-drivers)
[![Icon of Python OpenStack Client](https://launchpadlibrarian.net/697274843/osc-icon.png "Member of Python OpenStack Client")](/~python-openstackclient)
[![Icon of Soren's Target Audience](https://launchpadlibrarian.net/20548684/golf.png "Member of Soren's Target Audience")](/~sorens-target-audience)
[![Icon of Ubuntu Contributing Developers](https://launchpadlibrarian.net/17290192/wrench_emblem-trans.png "Member of Ubuntu Contributing Developers")](/~ubuntu-developer-members)
[![Icon of Ubuntu Members](https://launchpadlibrarian.net/606495581/CoF%2014px.png "Member of Ubuntu Members")](/~ubuntumembers)
[![Icon of Ubuntu Server papercutters](https://launchpadlibrarian.net/38078797/14.png "Member of Ubuntu Server papercutters")](/~server-papercutters)

Signed Ubuntu Code of Conduct:
Yes

Languages:

English, French

OpenPGP keys:

22A7943050DB1E67EC2B641A507AF89025B10423

SSH keys:

[ttx@stardust](%2Bsshkeys)

[ttx@mercury](%2Bsshkeys)

Time zone:

Europe/Paris
(UTC+0100)

Karma:
[0](https://launchpad.net/~ttx/%2Bkarma)
[Karma help](/%2Bhelp-registry/karma.html)

Social accounts:
![IRC](/@@/social-irc "IRC")
**ttx**
 on
**FreeNode**

## [All bugs in progress](https://launchpad.net/~ttx/%2Bassignedbugs?search=Search&field.status=In+Progress) Assigned bugs

||  | #1473369 [new mock release broke a bunch of unit tests](https://bugs.launchpad.net/python-muranoclient/kilo/%2Bbug/1473369) |  |
| --- | --- | --- |
| in [python-muranoclient](/python-muranoclient), [Glance](/glance), [glance\_store](/glance-store), [Murano](/murano), [neutron](/neutron), [OpenStack Object Storage (swift)](/swift) | | |

| --- | --- | --- | --- | --- | --- |

## Personal package archives

| [Test Openstack 2011.3](/~ttx/%2Barchive/ubuntu/2011.3) |
| --- |
| [Extra packages](/~ttx/%2Barchive/ubuntu/extras) |
| [Bexar update candidates](/~ttx/%2Barchive/ubuntu/nova-bexar-updates) |
| [Junk PPA](/~ttx/%2Barchive/ubuntu/ppa) |
| [Terracotta stack](/~ttx/%2Barchive/ubuntu/terracotta) |

## [All memberships](https://launchpad.net/~ttx/%2Bparticipation) Latest memberships

| [kata-containers](/~kata-containers)  Joined on 2018-10-09 | |
| --- | --- |
| [OpenStack Folsom Stable Maintainers](/~openstack-folsom-maint)  Joined on 2013-04-11 | |
| [OpenStack Python3 Migration Team](/~openstack-py3-team)  Joined on 2013-03-20 | |
| [OpenStack Security SIG](/~openstack-ossg)  Joined on 2012-05-25 | |
| [Swift Drivers](/~swift-drivers)  Joined on 2012-04-06 | |

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
4d55102
([Get the code!](https://dev.launchpad.net/))



=== Content from answers.launchpad.net_da5dcf83_20250126_020300.html ===

[Log in / Register](https://answers.launchpad.net/keystone/%2Blogin)

[![](https://launchpadlibrarian.net/359059841/OpenStack_Project_Keystone_mascot%20%281%29.png)](https://launchpad.net/keystone)

## [OpenStack Identity (keystone)](https://launchpad.net/keystone)

* [Overview](https://launchpad.net/keystone)
* [Code](https://code.launchpad.net/keystone)
* [Bugs](https://bugs.launchpad.net/keystone)
* [Blueprints](https://blueprints.launchpad.net/keystone)
* [Translations](https://translations.launchpad.net/keystone)
* Answers

# Questions for OpenStack Identity (keystone)

**Launchpad does not know where
OpenStack Identity (keystone)
tracks support requests.**

OpenStack Identity (keystone) questions are
tracked in:
[keystone in Ubuntu](/ubuntu/%2Bsource/keystone).

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
4d55102
([Get the code!](https://dev.launchpad.net/))



=== Content from bugs.launchpad.net_e036243d_20250124_155139.html ===

[Log in / Register](https://bugs.launchpad.net/keystone/%2Bbug/1309228/%2Blogin)

[![](https://launchpadlibrarian.net/359059841/OpenStack_Project_Keystone_mascot%20%281%29.png)](https://launchpad.net/keystone)

## [OpenStack Identity (keystone)](https://launchpad.net/keystone)

* [Overview](https://launchpad.net/keystone)
* [Code](https://code.launchpad.net/keystone)
* [Bugs](https://bugs.launchpad.net/keystone)
* [Blueprints](https://blueprints.launchpad.net/keystone)
* [Translations](https://translations.launchpad.net/keystone)
* [Answers](https://answers.launchpad.net/keystone)

# [OSSA 2014-015] User gets group auth if same id (CVE-2014-0204)

Bug #1309228 reported by
[Brant Knudson](https://launchpad.net/~blk-u)
on 2014-04-17

[264](/%2Bhelp-bugs/bug-heat.html)

This bug affects 1 person

| Affects | | Status | Importance | Assigned to | Milestone |
| --- | --- | --- | --- | --- | --- |
|  | [OpenStack Identity (keystone)](https://bugs.launchpad.net/keystone) | Fix Released | High | [Brant Knudson](https://launchpad.net/~blk-u) | [OpenStack Identity (keystone) 2014.2 "juno"](https://launchpad.net/keystone/%2Bmilestone/2014.2) |
|  | [Icehouse](https://bugs.launchpad.net/keystone/icehouse) | Fix Released | High | [Brant Knudson](https://launchpad.net/~blk-u) | [OpenStack Identity (keystone) 2014.1.1](https://launchpad.net/keystone/%2Bmilestone/2014.1.1) |
|  | [OpenStack Security Advisory](https://bugs.launchpad.net/ossa) | Fix Released | Medium | [Tristan Cacqueray](https://launchpad.net/~tristan-cacqueray) |  |

### Bug Description

If a user has the same ID as a group and that group has roles granted to it, the user gets the roles (even if they're not in the group).

Note that Keystone typically assigns IDs and with uuid4 you're not going to get a user with the same ID as a group, but some setups use LDAP so the IDs come from the LDAP entries.

Here's instructions on how to recreate:

1) Start with LDAP system (set up with devstack)

2) Create a user with an id of suspectid

$ ldapadd -D "cn=Manager,dc=openstack,dc=org" -w "ofs5dac"

dn: cn=suspectid,ou=Users,dc=openstack,dc=org

objectclass: inetorgperson

sn: suspect

userPassword: blkpwd

3) Create a group with an id of suspectid

$ ldapadd -D "cn=Manager,dc=openstack,dc=org" -w "ofs5dac"

dn: cn=suspectid,ou=UserGroups,dc=openstack,dc=org

objectclass: groupOfNames

ou: suspect

member: cn=dumb,dc=nonexistent

$ openstack --os-identity-api=3 --os-auth-url <http://localhost:5000/v3> group list

4) Grant a role to the group on a project

$ openstack --os-identity-api=3 --os-auth-url <http://localhost:5000/v3> role add --group suspect --project demo admin

5) Get a token as the user, notice that the user has the group's access.

$ curl -s \

  -H "Content-Type: application/json" \

  -d '

{ "auth": {

    "passwordCredentials": {

      "username": "suspect",

      "password": "blkpwd"

    },

    "tenantName": "demo"

  }

}' \

  <http://localhost:35357/v2.0/tokens> | python -m json.tool

---

     "roles": [

                {

                    "name": "admin"

                }

            ],

## CVE References

* [2014-0204](/bugs/cve/2014-0204 "OpenStack Identity (Keystone) before ...")

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Dolph Mathews (dolph)](https://launchpad.net/~dolph) wrote on 2014-04-18: |  |  | [#1](/keystone/%2Bbug/1309228/comments/1) |
| --- | --- | --- | --- |

I suppose this would also be possible with a SQL identity backend, but the odds of a collision between system-assigned UUIDs is astronomically low. If this is due to the assignment SQL refactor, this should only affect master & icehouse - not havana.

I suppose this would also be possible with a SQL identity backend, but the odds of a collision between system-assigned UUIDs is astronomically low. If this is due to the assignment SQL refactor, this should only affect master & icehouse - not havana.

| **tags**: | added: icehouse-backport-potential |
| --- | --- |
| Changed in keystone: | |
| **importance**: | Undecided → High |

[Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray)
on 2014-04-18

| Changed in ossa: | |
| --- | --- |
| **status**: | New → Incomplete |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2014-04-18: |  |  | [#2](/keystone/%2Bbug/1309228/comments/2) |
| --- | --- | --- | --- |

Looks valid to me

Looks valid to me

| Changed in ossa: | |
| --- | --- |
| **status**: | Incomplete → Confirmed |
| Changed in keystone: | |
| **status**: | New → Confirmed |

[Thierry Carrez (ttx)](https://launchpad.net/~ttx)
on 2014-04-18

| Changed in ossa: | |
| --- | --- |
| **importance**: | Undecided → High |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2014-04-18: |  |  | [#3](/keystone/%2Bbug/1309228/comments/3) |
| --- | --- | --- | --- |

Impact description draft #1:

Title: Keystone user and group id mismatch.

Reporter: Brant Knudson (IBM)

Products: Keystone

Versions: 2014.1

Description:

Brant Knudson from IBM reported a vulnerability in Keystone. Someone with write access to the Auth backend may willingly or unwillingly grant additional rights by picking the same IDs for users and groups, resulting in roles assigned to a group being assigned to the affected user even if he is not a member of this group.

Only Keystone setups using LDAP backend are likely affected.

Impact description draft #1:
Title: Keystone user and group id mismatch.
Reporter: Brant Knudson (IBM)
Products: Keystone
Versions: 2014.1
Description:
Brant Knudson from IBM reported a vulnerability in Keystone. Someone with write access to the Auth backend may willingly or unwillingly grant additional rights by picking the same IDs for users and groups, resulting in roles assigned to a group being assigned to the affected user even if he is not a member of this group.
Only Keystone setups using LDAP backend are likely affected.

| Changed in ossa: | |
| --- | --- |
| **assignee**: | nobody → Tristan Cacqueray (tristan-cacqueray) |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Brant Knudson (blk-u)](https://launchpad.net/~blk-u) wrote on 2014-04-18: |  |  | [#4](/keystone/%2Bbug/1309228/comments/4) |
| --- | --- | --- | --- |

Looks like the problem code is keystone.assignment.backends.sql.Assignment:\_get\_metadata. You pass in a user\_id or group\_id and it treats them the same: <http://git.openstack.org/cgit/openstack/keystone/tree/keystone/assignment/backends/sql.py?id=2fea9c560a6d8c4fc5522795624ac9a84bd40450#n81>

The likely fix is to calculate the role type based on the arguments and include that in the query. Here's the table:

mysql> select \* from assignment;

+--------------+----------------------------------+----------------------------------+----------------------------------+-----------+

| type | actor\_id | target\_id | role\_id | inherited |

+--------------+----------------------------------+----------------------------------+----------------------------------+-----------+

| UserProject | f4d347ad6e2b46109d3b8c98dc53db61 | ce9a1366f8294daa80e3dc432b416c2c | 9e262162c0c24b73906a8171a787dc10 | 0 |

| GroupProject | suspectid | 79edaf3db5634de681db106103c81b81 | a77bec4d368a4a819e59ad364b793d85 | 0 |

+--------------+----------------------------------+----------------------------------+----------------------------------+-----------+

So the query should also have q.filter\_by(type='UserProject') (group project because the args are user\_id=xxx,tenant\_id=yyy rather than group\_id=xxx,tenant\_id=yyy.

I tried writing a quick test in test\_auth but that uses the kvs backend which apparently handles this correctly.

It should be good enough to write a test for get\_roles\_for\_user\_and\_project, since that's what's called when the token is created.

Looks like the problem code is keystone.assignment.backends.sql.Assignment:\_get\_metadata. You pass in a user\_id or group\_id and it treats them the same: http://git.openstack.org/cgit/openstack/keystone/tree/keystone/assignment/backends/sql.py?id=2fea9c560a6d8c4fc5522795624ac9a84bd40450#n81
The likely fix is to calculate the role type based on the arguments and include that in the query. Here's the table:
mysql> select \* from assignment;
+--------------+----------------------------------+----------------------------------+----------------------------------+-----------+
| type | actor\_id | target\_id | role\_id | inherited |
+--------------+----------------------------------+----------------------------------+----------------------------------+-----------+
| UserProject | f4d347ad6e2b46109d3b8c98dc53db61 | ce9a1366f8294daa80e3dc432b416c2c | 9e262162c0c24b73906a8171a787dc10 | 0 |
| GroupProject | suspectid | 79edaf3db5634de681db106103c81b81 | a77bec4d368a4a819e59ad364b793d85 | 0 |
+--------------+----------------------------------+----------------------------------+----------------------------------+-----------+
So the query should also have q.filter\_by(type='UserProject') (group project because the args are user\_id=xxx,tenant\_id=yyy rather than group\_id=xxx,tenant\_id=yyy.
I tried writing a quick test in test\_auth but that uses the kvs backend which apparently handles this correctly.
It should be good enough to write a test for get\_roles\_for\_user\_and\_project, since that's what's called when the token is created.

[Brant Knudson (blk-u)](https://launchpad.net/~blk-u)
on 2014-04-18

| Changed in keystone: | |
| --- | --- |
| **assignee**: | nobody → Brant Knudson (blk-u) |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Brant Knudson (blk-u)](https://launchpad.net/~blk-u) wrote on 2014-04-18: |  |  | [#5](/keystone/%2Bbug/1309228/comments/5) |
| --- | --- | --- | --- |

* [0001-Enhance-tests-for-get\_roles\_for\_user\_and\_project-for.patch](https://bugs.launchpad.net/keystone/%2Bbug/1309228/%2Battachment/4087694/%2Bfiles/0001-Enhance-tests-for-get_roles_for_user_and_project-for.patch)
  [Edit](/keystone/%2Bbug/1309228/%2Battachment/4087694)
  (7.2 KiB,
  text/plain)

Here's a patch with a test showing the problem.

Looks like the SQL and LDAP assignment backends are not doing this correctly.

Here's a patch with a test showing the problem.
Looks like the SQL and LDAP assignment backends are not doing this correctly.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Brant Knudson (blk-u)](https://launchpad.net/~blk-u) wrote on 2014-04-18: |  |  | [#6](/keystone/%2Bbug/1309228/comments/6) |
| --- | --- | --- | --- |

* [0001-Fix-get\_roles\_for\_user\_and\_project-user-group-ID-for.patch](https://bugs.launchpad.net/keystone/%2Bbug/1309228/%2Battachment/4087807/%2Bfiles/0001-Fix-get_roles_for_user_and_project-user-group-ID-for.patch)
  [Edit](/keystone/%2Bbug/1309228/%2Battachment/4087807)
  (8.1 KiB,
  text/plain)

Here's a follow-on patch with the fix for the SQL backend.

Here's a follow-on patch with the fix for the SQL backend.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Brant Knudson (blk-u)](https://launchpad.net/~blk-u) wrote on 2014-04-18: |  |  | [#7](/keystone/%2Bbug/1309228/comments/7) |
| --- | --- | --- | --- |

The fix for the LDAP backend is trickier... the entry for the role assignments has a member attribute containing the DNs for both users and groups. If it was easy to compare DNs then this would be an easy check, just see if the entry is in the user tree or the group tree. Unfortunately, LDAP DNs cannot be compared with a simple string comparison, or even case-insensitive comparison.

The fix for the LDAP backend is trickier... the entry for the role assignments has a member attribute containing the DNs for both users and groups. If it was easy to compare DNs then this would be an easy check, just see if the entry is in the user tree or the group tree. Unfortunately, LDAP DNs cannot be compared with a simple string comparison, or even case-insensitive comparison.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Brant Knudson (blk-u)](https://launchpad.net/~blk-u) wrote on 2014-04-18: |  |  | [#8](/keystone/%2Bbug/1309228/comments/8) |
| --- | --- | --- | --- |

* [0001-Enhance-tests-for-get\_roles\_for\_user\_and\_project-for.patch](https://bugs.launchpad.net/keystone/%2Bbug/1309228/%2Battachment/4087926/%2Bfiles/0001-Enhance-tests-for-get_roles_for_user_and_project-for.patch)
  [Edit](/keystone/%2Bbug/1309228/%2Battachment/4087926)
  (7.2 KiB,
  text/plain)

Here's the patches for adding the test, the SQL fix, and the LDAP fix. I fixed a comment error in the test patch.

Here's the patches for adding the test, the SQL fix, and the LDAP fix. I fixed a comment error in the test patch.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Brant Knudson (blk-u)](https://launchpad.net/~blk-u) wrote on 2014-04-18: |  |  | [#9](/keystone/%2Bbug/1309228/comments/9) |
| --- | --- | --- | --- |

* [0002-SQL-fix-for-get\_roles\_for\_user\_and\_project-user-grou.patch](https://bugs.launchpad.net/keystone/%2Bbug/1309228/%2Battachment/4087927/%2Bfiles/0002-SQL-fix-for-get_roles_for_user_and_project-user-grou.patch)
  [Edit](/keystone/%2Bbug/1309228/%2Battachment/4087927)
  (8.1 KiB,
  text/plain)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Brant Knudson (blk-u)](https://launchpad.net/~blk-u) wrote on 2014-04-18: |  |  | [#10](/keystone/%2Bbug/1309228/comments/10) |
| --- | --- | --- | --- |

* [0003-LDAP-fix-for-get\_roles\_for\_user\_and\_project-user-gro.patch](https://bugs.launchpad.net/keystone/%2Bbug/1309228/%2Battachment/4087928/%2Bfiles/0003-LDAP-fix-for-get_roles_for_user_and_project-user-gro.patch)
  [Edit](/keystone/%2Bbug/1309228/%2Battachment/4087928)
  (6.5 KiB,
  text/plain)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Brant Knudson (blk-u)](https://launchpad.net/~blk-u) wrote on 2014-04-18: |  |  | [#11](/keystone/%2Bbug/1309228/comments/11) |
| --- | --- | --- | --- |

My opinion is that this doesn't affect havana.

The SQL query used different tables: <http://git.openstack.org/cgit/openstack/keystone/tree/keystone/assignment/backends/sql.py?h=stable/havana#n70>

Apparently LDAP didn't support groups: <http://git.openstack.org/cgit/openstack/keystone/tree/keystone/assignment/backends/ldap.py?h=stable/havana>

My opinion is that this doesn't affect havana.
The SQL query used different tables: http://git.openstack.org/cgit/openstack/keystone/tree/keystone/assignment/backends/sql.py?h=stable/havana#n70
Apparently LDAP didn't support groups: http://git.openstack.org/cgit/openstack/keystone/tree/keystone/assignment/backends/ldap.py?h=stable/havana

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Brant Knudson (blk-u)](https://launchpad.net/~blk-u) wrote on 2014-04-18: |  |  | [#12](/keystone/%2Bbug/1309228/comments/12) |
| --- | --- | --- | --- |

I think I'll re-do these patches so that they apply cleanly on stable/icehouse. All it should is moving the test\_backend\_ldap code so that it's not at the end of the class where it causes a conflict with new tests.

I think I'll re-do these patches so that they apply cleanly on stable/icehouse. All it should is moving the test\_backend\_ldap code so that it's not at the end of the class where it causes a conflict with new tests.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Brant Knudson (blk-u)](https://launchpad.net/~blk-u) wrote on 2014-04-18: |  |  | [#13](/keystone/%2Bbug/1309228/comments/13) |
| --- | --- | --- | --- |

* [bug-1309228.patches.tgz](https://bugs.launchpad.net/keystone/%2Bbug/1309228/%2Battachment/4087996/%2Bfiles/bug-1309228.patches.tgz)
  [Edit](/keystone/%2Bbug/1309228/%2Battachment/4087996)
  (3.4 KiB,
  application/x-tar)

These patches applied cleanly to both master and stable/icehouse (as they are now).

These patches applied cleanly to both master and stable/icehouse (as they are now).

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2014-04-22: |  |  | [#14](/keystone/%2Bbug/1309228/comments/14) |
| --- | --- | --- | --- |

keystone coresec please review proposed patch.

keystone coresec please review proposed patch.

| Changed in ossa: | |
| --- | --- |
| **importance**: | High → Medium |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2014-04-22: |  |  | [#15](/keystone/%2Bbug/1309228/comments/15) |
| --- | --- | --- | --- |

Impact desc looks good, just remove the trailing dot in the Title line, and put the "Only..." sentence on the same paragraph as the rest.

Impact desc looks good, just remove the trailing dot in the Title line, and put the "Only..." sentence on the same paragraph as the rest.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Brant Knudson (blk-u)](https://launchpad.net/~blk-u) wrote on 2014-04-22: |  |  | [#16](/keystone/%2Bbug/1309228/comments/16) |
| --- | --- | --- | --- |

Please change the reporter in the impact description from "Brant Knudson" to "Michael Stancampiano". I just opened the bug, it was Mike who told me about it.

Otherwise the impact descrption in comment 3 looks good to me.

Please change the reporter in the impact description from "Brant Knudson" to "Michael Stancampiano". I just opened the bug, it was Mike who told me about it.
Otherwise the impact descrption in comment 3 looks good to me.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2014-04-22: |  |  | [#17](/keystone/%2Bbug/1309228/comments/17) |
| --- | --- | --- | --- |

@Brant Thanks for the review! Do you know what, if any, company should I credit too ?

@Brant Thanks for the review! Do you know what, if any, company should I credit too ?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Brant Knudson (blk-u)](https://launchpad.net/~blk-u) wrote on 2014-04-22: |  |  | [#18](/keystone/%2Bbug/1309228/comments/18) |
| --- | --- | --- | --- |

@Tristan - IBM is correct for the company. It was found during internal testing.

@Tristan - IBM is correct for the company. It was found during internal testing.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2014-04-22: |  |  | [#19](/keystone/%2Bbug/1309228/comments/19) |
| --- | --- | --- | --- |

Alright, so here is impact description draft #2:

Title: Keystone user and group id mismatch

Reporter: Michael Stancampiano (IBM)

Products: Keystone

Versions: 2014.1

Description:

Michael Stancampiano from IBM reported a vulnerability in Keystone. Someone with write access to the Auth backend may willingly or unwillingly grant additional rights by picking the same IDs for users and groups, resulting in roles assigned to a group being assigned to the affected user even if he is not a member of this group. Only Keystone setups using LDAP backend are likely affected.

Alright, so here is impact description draft #2:
Title: Keystone user and group id mismatch
Reporter: Michael Stancampiano (IBM)
Products: Keystone
Versions: 2014.1
Description:
Michael Stancampiano from IBM reported a vulnerability in Keystone. Someone with write access to the Auth backend may willingly or unwillingly grant additional rights by picking the same IDs for users and groups, resulting in roles assigned to a group being assigned to the affected user even if he is not a member of this group. Only Keystone setups using LDAP backend are likely affected.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2014-04-24: |  |  | [#20](/keystone/%2Bbug/1309228/comments/20) |
| --- | --- | --- | --- |

I would remove "likely" since it sounds like we think it may impact other backends but have no clue. Otherwise looks good.

I would remove "likely" since it sounds like we think it may impact other backends but have no clue. Otherwise looks good.

| Changed in ossa: | |
| --- | --- |
| **status**: | Confirmed → Triaged |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Brant Knudson (blk-u)](https://launchpad.net/~blk-u) wrote on 2014-04-25: |  |  | [#21](/keystone/%2Bbug/1309228/comments/21) |
| --- | --- | --- | --- |

A couple of nits

- change "Auth backend" to "user and group repository (such as the LDAP directory server)" -- we have auth plugins so someone might be confused by this.

- change "LDAP backend" to "LDAP for the Identity driver" -- the setting in the config file is like [identity].driver = keystone.identity.backends.ldap.Identity ( <http://git.openstack.org/cgit/openstack/keystone/tree/etc/keystone.conf.sample#n754> ), so maybe this would be more consistent with how we refer to things.

A couple of nits
- change "Auth backend" to "user and group repository (such as the LDAP directory server)" -- we have auth plugins so someone might be confused by this.
- change "LDAP backend" to "LDAP for the Identity driver" -- the setting in the config file is like [identity].driver = keystone.identity.backends.ldap.Identity ( http://git.openstack.org/cgit/openstack/keystone/tree/etc/keystone.conf.sample#n754 ), so maybe this would be more consistent with how we refer to things.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2014-04-25: |  |  | [#22](/keystone/%2Bbug/1309228/comments/22) |
| --- | --- | --- | --- |

Thanks you for the comments!

Here is impact description draft #3:

Title: Keystone user and group id mismatch

Reporter: Michael Stancampiano (IBM)

Products: Keystone

Versions: 2014.1

Description:

Michael Stancampiano from IBM reported a vulnerability in Keystone. Someone with write access to the user and group repository (such as the LDAP directory server) may willingly or unwillingly grant additional rights by picking the same IDs for users and groups, resulting in roles assigned to a group being assigned to the affected user even if he is not a member of this group. Only Keystone setups using LDAP for the Identity driver are affected.

Thanks you for the comments!
Here is impact description draft #3:
Title: Keystone user and group id mismatch
Reporter: Michael Stancampiano (IBM)
Products: Keystone
Versions: 2014.1
Description:
Michael Stancampiano from IBM reported a vulnerability in Keystone. Someone with write access to the user and group repository (such as the LDAP directory server) may willingly or unwillingly grant additional rights by picking the same IDs for users and groups, resulting in roles assigned to a group being assigned to the affected user even if he is not a member of this group. Only Keystone setups using LDAP for the Identity driver are affected.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Brant Knudson (blk-u)](https://launchpad.net/~blk-u) wrote on 2014-04-25: |  |  | [#23](/keystone/%2Bbug/1309228/comments/23) |
| --- | --- | --- | --- |

The text in comment 22 looks good to me.

The text in comment 22 looks good to me.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2014-04-25: |  |  | [#24](/keystone/%2Bbug/1309228/comments/24) |
| --- | --- | --- | --- |

+1

+1

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Adam Young (ayoung)](https://launchpad.net/~ayoung) wrote on 2014-04-26: |  |  | [#25](/keystone/%2Bbug/1309228/comments/25) |
| --- | --- | --- | --- |

There is a way to do Comparisons with DN's. John Dennis wrote up a fairly long treatise on it.

There is a way to do Comparisons with DN's. John Dennis wrote up a fairly long treatise on it.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Dolph Mathews (dolph)](https://launchpad.net/~dolph) wrote on 2014-04-28: |  |  | [#26](/keystone/%2Bbug/1309228/comments/26) |
| --- | --- | --- | --- |

+1 for impact description in comment 22

+1 for impact description in comment 22

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Dolph Mathews (dolph)](https://launchpad.net/~dolph) wrote on 2014-04-28: |  |  | [#27](/keystone/%2Bbug/1309228/comments/27) |
| --- | --- | --- | --- |

* [bug-1309228.patch](https://bugs.launchpad.net/keystone/%2Bbug/1309228/%2Battachment/4099601/%2Bfiles/bug-1309228.patch)
  [Edit](/keystone/%2Bbug/1309228/%2Battachment/4099601)
  (7.6 KiB,
  text/plain)

+1 for the patches in comment #13.

I squashed all three patches into a single .patch (attached), which should be quicker to merge when this is opened. The only change here is the combining of Brant's commit messages. I'd encourage other reviewers to review comment 13 first and then commit message here.

+1 for the patches in comment #13.
I squashed all three patches into a single .patch (attached), which should be quicker to merge when this is opened. The only change here is the combining of Brant's commit messages. I'd encourage other reviewers to review comment 13 first and then commit message here.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jeremy Stanley (fungi)](https://launchpad.net/~fungi) wrote on 2014-05-04: |  |  | [#28](/keystone/%2Bbug/1309228/comments/28) |
| --- | --- | --- | --- |

I'm good with Tristan's impact description in comment #22. We should plan a disclosure date and send downstream advance notifications at the earliest opportunity.

I'm good with Tristan's impact description in comment #22. We should plan a disclosure date and send downstream advance notifications at the earliest opportunity.

[Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray)
on 2014-05-06

| **summary**: | - User gets group auth if same id+ User gets group auth if same id (CVE-2014-0204) |
| --- | --- |

[Thierry Carrez (ttx)](https://launchpad.net/~ttx)
on 2014-05-06

| Changed in ossa: | |
| --- | --- |
| **status**: | Triaged → In Progress |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2014-05-08:  [**Re: User gets group auth if same id (CVE-2014-0204)**](/keystone/%2Bbug/1309228/comments/29) |  |  | [#29](/keystone/%2Bbug/1309228/comments/29) |
| --- | --- | --- | --- |

@dolph, running ./run\_tests.sh with the patch attached to comment #27 produces this error with stable/icehouse branch:

AssertionError: There is no script for 45 version

see <http://paste.openstack.org/show/YTbHqEMnSmjSzPBUwx4R/>

This may be related to my devstack or something...

If it's ok for you, we will send the pre-OSSA with a disclosure date set to:

2014-05-20, 1500UTC

Thanks.

@dolph, running ./run\_tests.sh with the patch attached to comment #27 produces this error with stable/icehouse branch:
AssertionError: There is no script for 45 version
see http://paste.openstack.org/show/YTbHqEMnSmjSzPBUwx4R/
This may be related to my devstack or something...
If it's ok for you, we will send the pre-OSSA with a disclosure date set to:
2014-05-20, 1500UTC
Thanks.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Brant Knudson (blk-u)](https://launchpad.net/~blk-u) wrote on 2014-05-08: |  |  | [#30](/keystone/%2Bbug/1309228/comments/30) |
| --- | --- | --- | --- |

Tristan - that error happens if you don't clean up the .pyc files, so the migration process finds a pyc file for migration 45 and the py isn't there anymore. Clean out the pyc files when checking out a branch with different migrations -- find keystone -name "\*.pyc" | xargs rm

Tristan - that error happens if you don't clean up the .pyc files, so the migration process finds a pyc file for migration 45 and the py isn't there anymore. Clean out the pyc files when checking out a branch with different migrations -- find keystone -name "\*.pyc" | xargs rm

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2014-05-08: |  |  | [#31](/keystone/%2Bbug/1309228/comments/31) |
| --- | --- | --- | --- |

Thanks you Brant, that was it!

Tests succeed for both master and stable/icehouse branch.

The pre-OSSA have been sent.

Proposed public disclosure date/time:

2014-05-20, 15:00 UTC

Thanks you Brant, that was it!
Tests succeed for both master and stable/icehouse branch.
The pre-OSSA have been sent.
Proposed public disclosure date/time:
2014-05-20, 15:00 UTC

| Changed in ossa: | |
| --- | --- |
| **status**: | In Progress → Fix Committed |

[Thierry Carrez (ttx)](https://launchpad.net/~ttx)
on 2014-05-19

| Changed in keystone: | |
| --- | --- |
| **status**: | Confirmed → In Progress |

[Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray)
on 2014-05-20

| **information type**: | Private Security → Public Security |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2014-05-20:  [**Fix proposed to keystone (master)**](/keystone/%2Bbug/1309228/comments/32) |  |  | [#32](/keystone/%2Bbug/1309228/comments/32) |
| --- | --- | --- | --- |

Fix proposed to branch: master

Review: <https://review.openstack.org/94396>

Fix proposed to branch: master
Review: https://review.openstack.org/94396

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2014-05-20:  [**Fix proposed to keystone (stable/icehouse)**](/keystone/%2Bbug/1309228/comments/33) |  |  | [#33](/keystone/%2Bbug/1309228/comments/33) |
| --- | --- | --- | --- |

Fix proposed to branch: stable/icehouse

Review: <https://review.openstack.org/94397>

Fix proposed to branch: stable/icehouse
Review: https://review.openstack.org/94397

[Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray)
on 2014-05-20

| **summary**: | - User gets group auth if same id (CVE-2014-0204)+ [OSSA 2014-015] User gets group auth if same id (CVE-2014-0204) |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2014-05-20:  [**Fix proposed to keystone (master)**](/keystone/%2Bbug/1309228/comments/34) |  |  | [#34](/keystone/%2Bbug/1309228/comments/34) |
| --- | --- | --- | --- |

Fix proposed to branch: master

Review: <https://review.openstack.org/94470>

Fix proposed to branch: master
Review: https://review.openstack.org/94470

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2014-05-21:  [**Fix merged to keystone (master)**](/keystone/%2Bbug/1309228/comments/35) |  |  | [#35](/keystone/%2Bbug/1309228/comments/35) |
| --- | --- | --- | --- |

Reviewed: <https://review.openstack.org/94396>

Committed: <https://git.openstack.org/cgit/openstack/keystone/commit/?id=97dfd55ad1b40365754dcbfce856f7ffae280a44>

Submitter: Jenkins

Branch: master

commit 97dfd55ad1b40365754dcbfce856f7ffae280a44

Author: Brant Knudson <email address hidden>

Date: Fri Apr 18 11:18:42 2014 -0500

SQL fix for get\_roles\_for\_user\_and\_project user=group ID

When there was a role assigned to a group with the same ID as a

    user, the SQL assignment backend would incorrectly return the

    assignment to the group when requesting roles for the user via

    the get\_roles\_for\_user\_and\_project method.

With this change, assignments to a group with the same ID are not

    returned for the user when calling get\_roles\_for\_user\_and\_project.

Change-Id: Id3d6f66c995e65e37d909359420d71ecdde86b69

    Partial-Bug: #1309228

Reviewed: https://review.openstack.org/94396
Committed: https://git.openstack.org/cgit/openstack/keystone/commit/?id=97dfd55ad1b40365754dcbfce856f7ffae280a44
Submitter: Jenkins
Branch: master
commit 97dfd55ad1b40365754dcbfce856f7ffae280a44
Author: Brant Knudson <bknudson@us.ibm.com>
Date: Fri Apr 18 11:18:42 2014 -0500
SQL fix for get\_roles\_for\_user\_and\_project user=group ID
When there was a role assigned to a group with the same ID as a
user, the SQL assignment backend would incorrectly return the
assignment to the group when requesting roles for the user via
the get\_roles\_for\_user\_and\_project method.
With this change, assignments to a group with the same ID are not
returned for the user when calling get\_roles\_for\_user\_and\_project.
Change-Id: Id3d6f66c995e65e37d909359420d71ecdde86b69
Partial-Bug: #1309228

[OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack)
on 2014-05-21

| Changed in keystone: | |
| --- | --- |
| **assignee**: | Brant Knudson (blk-u) → Adam Young (ayoung) |

[OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack)
on 2014-05-21

| Changed in keystone: | |
| --- | --- |
| **assignee**: | Adam Young (ayoung) → Brant Knudson (blk-u) |

[Alan Pevec (apevec)](https://launchpad.net/~apevec)
on 2014-05-21

| **tags**: | removed: icehouse-backport-potential |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2014-05-23:  [**Fix proposed to keystone (stable/icehouse)**](/keystone/%2Bbug/1309228/comments/36) |  |  | [#36](/keystone/%2Bbug/1309228/comments/36) |
| --- | --- | --- | --- |

Fix proposed to branch: stable/icehouse

Review: <https://review.openstack.org/95251>

Fix proposed to branch: stable/icehouse
Review: https://review.openstack.org/95251

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2014-05-23:  [**Fix merged to keystone (master)**](/keystone/%2Bbug/1309228/comments/37) |  |  | [#37](/keystone/%2Bbug/1309228/comments/37) |
| --- | --- | --- | --- |

Reviewed: <https://review.openstack.org/94470>

Committed: <https://git.openstack.org/cgit/openstack/keystone/commit/?id=729dcad7384ba66ee7494154969cdd7ae90d86ee>

Submitter: Jenkins

Branch: master

commit 729dcad7384ba66ee7494154969cdd7ae90d86ee

Author: Brant Knudson <email address hidden>

Date: Wed May 21 17:30:42 2014 -0500

LDAP fix for get\_roles\_for\_user\_and\_project user=group ID

When there was a role assigned to a group with the same ID as a

    user, the LDAP assignment backend would incorrectly return the

    assignment to the group when requesting roles for the user via

    the get\_roles\_for\_user\_and\_project method.

With this change, assignments to a group with the same ID are not

    returned for the user when calling get\_roles\_for\_user\_and\_project.

Functions were added to compare DNs more accurately based on the

    LDAP RFCs.

The fakeldap code was changed to normalize the values when

    comparing values for checking if the values match the filter.

Co-Authored By: Nathan Kinder <email address hidden>

    Co-Authored By: Adam Young <email address hidden>

Change-Id: Ia6f1ae2e3af1e968f1a393bd4f2f38812a88a5d0

    Closes-Bug: #1309228

Reviewed: https://review.openstack.org/94470
Committed: https://git.openstack.org/cgit/openstack/keystone/commit/?id=729dcad7384ba66ee7494154969cdd7ae90d86ee
Submitter: Jenkins
Branch: master
commit 729dcad7384ba66ee7494154969cdd7ae90d86ee
Author: Brant Knudson <bknudson@us.ibm.com>
Date: Wed May 21 17:30:42 2014 -0500
LDAP fix for get\_roles\_for\_user\_and\_project user=group ID
When there was a role assigned to a group with the same ID as a
user, the LDAP assignment backend would incorrectly return the
assignment to the group when requesting roles for the user via
the get\_roles\_for\_user\_and\_project method.
With this change, assignments to a group with the same ID are not
returned for the user when calling get\_roles\_for\_user\_and\_project.
Functions were added to compare DNs more accurately based on the
LDAP RFCs.
The fakeldap code was changed to normalize the values when
comparing values for checking if the values match the filter.
Co-Authored By: Nathan Kinder <nkinder@redhat.com>
Co-Authored By: Adam Young <ayoung@redhat.com>
Change-Id: Ia6f1ae2e3af1e968f1a393bd4f2f38812a88a5d0
Closes-Bug: #1309228

| Changed in keystone: | |
| --- | --- |
| **status**: | In Progress → Fix Committed |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2014-05-23:  [**Related fix proposed to keystone (master)**](/keystone/%2Bbug/1309228/comments/38) |  |  | [#38](/keystone/%2Bbug/1309228/comments/38) |
| --- | --- | --- | --- |

Related fix proposed to branch: master

Review: <https://review.openstack.org/95263>

Related fix proposed to branch: master
Review: https://review.openstack.org/95263

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2014-05-26: |  |  | [#39](/keystone/%2Bbug/1309228/comments/39) |
| --- | --- | --- | --- |

Only missing stable/icehouse:

<https://review.openstack.org/#/c/94397/>

Only missing stable/icehouse:
https://review.openstack.org/#/c/94397/

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Matthew Thode (prometheanfire)](https://launchpad.net/~prometheanfire) wrote on 2014-05-29: |  |  | [#40](/keystone/%2Bbug/1309228/comments/40) |
| --- | --- | --- | --- |

still missing stable/icehouse :(

<https://review.openstack.org/#/c/94397/>

still missing stable/icehouse :(
https://review.openstack.org/#/c/94397/

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2014-05-29:  [**Fix merged to keystone (stable/icehouse)**](/keystone/%2Bbug/1309228/comments/41) |  |  | [#41](/keystone/%2Bbug/1309228/comments/41) |
| --- | --- | --- | --- |

Reviewed: <https://review.openstack.org/94397>

Committed: <https://git.openstack.org/cgit/openstack/keystone/commit/?id=786af9829c5329a982e3451f77afebbfb21850bd>

Submitter: Jenkins

Branch: stable/icehouse

commit 786af9829c5329a982e3451f77afebbfb21850bd

Author: Brant Knudson <email address hidden>

Date: Fri Apr 18 11:18:42 2014 -0500

SQL and LDAP fixes for get\_roles\_for\_user\_and\_project user=group ID

When there was a role assigned to a group with the same ID as a user,

    the SQL and LDAP assignment backends would incorrectly return the

    assignment to the group when requesting roles for the user via the

    get\_roles\_for\_user\_and\_project method.

With this change, assignments to a group with the same ID are not

    returned for the user when calling get\_roles\_for\_user\_and\_project.

Functions were added to compare DNs more accurately based on the

    LDAP RFCs.

The fakeldap code was changed to normalize the values when

    comparing values for checking if the values match the filter.

Co-Authored By: Nathan Kinder <email address hidden>

    Co-Authored By: Adam Young <email address hidden>

Change-Id: Id3d6f66c995e65e37d909359420d71ecdde86b69

    Closes-Bug: #1309228

Reviewed: https://review.openstack.org/94397
Committed: https://git.openstack.org/cgit/openstack/keystone/commit/?id=786af9829c5329a982e3451f77afebbfb21850bd
Submitter: Jenkins
Branch: stable/icehouse
commit 786af9829c5329a982e3451f77afebbfb21850bd
Author: Brant Knudson <bknudson@us.ibm.com>
Date: Fri Apr 18 11:18:42 2014 -0500
SQL and LDAP fixes for get\_roles\_for\_user\_and\_project user=group ID
When there was a role assigned to a group with the same ID as a user,
the SQL and LDAP assignment backends would incorrectly return the
assignment to the group when requesting roles for the user via the
get\_roles\_for\_user\_and\_project method.
With this change, assignments to a group with the same ID are not
returned for the user when calling get\_roles\_for\_user\_and\_project.
Functions were added to compare DNs more accurately based on the
LDAP RFCs.
The fakeldap code was changed to normalize the values when
comparing values for checking if the values match the filter.
Co-Authored By: Nathan Kinder <nkinder@redhat.com>
Co-Authored By: Adam Young <ayoung@redhat.com>
Change-Id: Id3d6f66c995e65e37d909359420d71ecdde86b69
Closes-Bug: #1309228

[Thierry Carrez (ttx)](https://launchpad.net/~ttx)
on 2014-05-30

| Changed in ossa: | |
| --- | --- |
| **status**: | Fix Committed → Fix Released |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2014-06-09:  [**Related fix merged to keystone (master)**](/keystone/%2Bbug/1309228/comments/42) |  |  | [#42](/keystone/%2Bbug/1309228/comments/42) |
| --- | --- | --- | --- |

Reviewed: <https://review.openstack.org/95263>

Committed: <https://git.openstack.org/cgit/openstack/keystone/commit/?id=f0eee2f3b48dd0cffb9f75e396da2d914925cba5>

Submitter: Jenkins

Branch: master

commit f0eee2f3b48dd0cffb9f75e396da2d914925cba5

Author: Brant Knudson <email address hidden>

Date: Fri May 23 15:44:05 2014 -0500

Remove obsolete note from ldap

There was a note in the ldap assignment backend about normalizing

    a DN using .upper(). This note is obsolete with the recent change

    to use a DN compare function.

Change-Id: I34c69573498b5f2d2103ea485160df421c6f2b03

    Related-Bug: #1309228

Reviewed: https://review.openstack.org/95263
Committed: https://git.openstack.org/cgit/openstack/keystone/commit/?id=f0eee2f3b48dd0cffb9f75e396da2d914925cba5
Submitter: Jenkins
Branch: master
commit f0eee2f3b48dd0cffb9f75e396da2d914925cba5
Author: Brant Knudson <bknudson@us.ibm.com>
Date: Fri May 23 15:44:05 2014 -0500
Remove obsolete note from ldap
There was a note in the ldap assignment backend about normalizing
a DN using .upper(). This note is obsolete with the recent change
to use a DN compare function.
Change-Id: I34c69573498b5f2d2103ea485160df421c6f2b03
Related-Bug: #1309228

[Thierry Carrez (ttx)](https://launchpad.net/~ttx)
on 2014-06-11

| Changed in keystone: | |
| --- | --- |
| **milestone**: | none → juno-1 |
| **status**: | Fix Committed → Fix Released |

[Thierry Carrez (ttx)](https://launchpad.net/~ttx)
on 2014-10-16

| Changed in keystone: | |
| --- | --- |
| **milestone**: | juno-1 → 2014.2 |

[See full activity log](https://bugs.launchpad.net/keystone/%2Bbug/1309228/%2Bactivity)

To post a comment you must [log in](%2Blogin?comments=all).

* [Report a bug](/keystone/%2Bfilebug)

This report contains
**Public Security**
information

Everyone can see this security related information.

You are
[not directly subscribed to this bug's notifications.](/keystone/%2Bbug/1309228/%2Bsubscribe)

Subscribing...

* [Edit bug mail](https://bugs.launchpad.net/keystone/%2Bbug/1309228/%2Bsubscriptions "View and change your subscriptions to this bug")

## Other bug subscribers

[Subscribe someone else](https://bugs.launchpad.net/keystone/%2Bbug/1309228/%2Baddsubscriber "Launchpad will email that person whenever this bugs changes")

## Patches

* [0001-Enhance-tests-for-get\_roles\_for\_user\_and\_project-for.patch](https://bugs.launchpad.net/keystone/%2Bbug/1309228/%2Battachment/4087694/%2Bfiles/0001-Enhance-tests-for-get_roles_for_user_and_project-for.patch)
  [Edit](/keystone/%2Bbug/1309228/%2Battachment/4087694 "Change patch details")
* [0001-Fix-get\_roles\_for\_user\_and\_project-user-group-ID-for.patch](https://bugs.launchpad.net/keystone/%2Bbug/1309228/%2Battachment/4087807/%2Bfiles/0001-Fix-get_roles_for_user_and_project-user-group-ID-for.patch)
  [Edit](/keystone/%2Bbug/1309228/%2Battachment/4087807 "Change patch details")
* [0001-Enhance-tests-for-get\_roles\_for\_user\_and\_project-for.patch](https://bugs.launchpad.net/keystone/%2Bbug/1309228/%2Battachment/4087926/%2Bfiles/0001-Enhance-tests-for-get_roles_for_user_and_project-for.patch)
  [Edit](/keystone/%2Bbug/1309228/%2Battachment/4087926 "Change patch details")
* [0002-SQL-fix-for-get\_roles\_for\_user\_and\_project-user-grou.patch](https://bugs.launchpad.net/keystone/%2Bbug/1309228/%2Battachment/4087927/%2Bfiles/0002-SQL-fix-for-get_roles_for_user_and_project-user-grou.patch)
  [Edit](/keystone/%2Bbug/1309228/%2Battachment/4087927 "Change patch details")
* [0003-LDAP-fix-for-get\_roles\_for\_user\_and\_project-user-gro.patch](https://bugs.launchpad.net/keystone/%2Bbug/1309228/%2Battachment/4087928/%2Bfiles/0003-LDAP-fix-for-get_roles_for_user_and_project-user-gro.patch)
  [Edit](/keystone/%2Bbug/1309228/%2Battachment/4087928 "Change patch details")
* [bug-1309228.patch](https://bugs.launchpad.net/keystone/%2Bbug/1309228/%2Battachment/4099601/%2Bfiles/bug-1309228.patch)
  [Edit](/keystone/%2Bbug/1309228/%2Battachment/4099601 "Change patch details")

* [Add patch](/keystone/%2Bbug/1309228/%2Baddcomment?field.patch=on)

## Bug attachments

* [bug-1309228.patches.tgz](https://bugs.launchpad.net/keystone/%2Bbug/1309228/%2Battachment/4087996/%2Bfiles/bug-1309228.patches.tgz)
  [Edit](/keystone/%2Bbug/1309228/%2Battachment/4087996 "Change attachment details")

* [Add attachment](/keystone/%2Bbug/1309228/%2Baddcomment)

## Remote bug watches

Bug watches keep track of this bug in other bug trackers.

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
4d55102
([Get the code!](https://dev.launchpad.net/))



=== Content from launchpad.net_5d4fc337_20250126_020302.html ===

[Log in / Register](https://bugs.launchpad.net/keystone/%2Bbug/1309228/%2Blogin)

[![](https://launchpadlibrarian.net/359059841/OpenStack_Project_Keystone_mascot%20%281%29.png)](https://launchpad.net/keystone)

## [OpenStack Identity (keystone)](https://launchpad.net/keystone)

* [Overview](https://launchpad.net/keystone)
* [Code](https://code.launchpad.net/keystone)
* [Bugs](https://bugs.launchpad.net/keystone)
* [Blueprints](https://blueprints.launchpad.net/keystone)
* [Translations](https://translations.launchpad.net/keystone)
* [Answers](https://answers.launchpad.net/keystone)

# [OSSA 2014-015] User gets group auth if same id (CVE-2014-0204)

Bug #1309228 reported by
[Brant Knudson](https://launchpad.net/~blk-u)
on 2014-04-17

[264](/%2Bhelp-bugs/bug-heat.html)

This bug affects 1 person

| Affects | | Status | Importance | Assigned to | Milestone |
| --- | --- | --- | --- | --- | --- |
|  | [OpenStack Identity (keystone)](https://bugs.launchpad.net/keystone) | Fix Released | High | [Brant Knudson](https://launchpad.net/~blk-u) | [OpenStack Identity (keystone) 2014.2 "juno"](https://launchpad.net/keystone/%2Bmilestone/2014.2) |
|  | [Icehouse](https://bugs.launchpad.net/keystone/icehouse) | Fix Released | High | [Brant Knudson](https://launchpad.net/~blk-u) | [OpenStack Identity (keystone) 2014.1.1](https://launchpad.net/keystone/%2Bmilestone/2014.1.1) |
|  | [OpenStack Security Advisory](https://bugs.launchpad.net/ossa) | Fix Released | Medium | [Tristan Cacqueray](https://launchpad.net/~tristan-cacqueray) |  |

### Bug Description

If a user has the same ID as a group and that group has roles granted to it, the user gets the roles (even if they're not in the group).

Note that Keystone typically assigns IDs and with uuid4 you're not going to get a user with the same ID as a group, but some setups use LDAP so the IDs come from the LDAP entries.

Here's instructions on how to recreate:

1) Start with LDAP system (set up with devstack)

2) Create a user with an id of suspectid

$ ldapadd -D "cn=Manager,dc=openstack,dc=org" -w "ofs5dac"

dn: cn=suspectid,ou=Users,dc=openstack,dc=org

objectclass: inetorgperson

sn: suspect

userPassword: blkpwd

3) Create a group with an id of suspectid

$ ldapadd -D "cn=Manager,dc=openstack,dc=org" -w "ofs5dac"

dn: cn=suspectid,ou=UserGroups,dc=openstack,dc=org

objectclass: groupOfNames

ou: suspect

member: cn=dumb,dc=nonexistent

$ openstack --os-identity-api=3 --os-auth-url <http://localhost:5000/v3> group list

4) Grant a role to the group on a project

$ openstack --os-identity-api=3 --os-auth-url <http://localhost:5000/v3> role add --group suspect --project demo admin

5) Get a token as the user, notice that the user has the group's access.

$ curl -s \

  -H "Content-Type: application/json" \

  -d '

{ "auth": {

    "passwordCredentials": {

      "username": "suspect",

      "password": "blkpwd"

    },

    "tenantName": "demo"

  }

}' \

  <http://localhost:35357/v2.0/tokens> | python -m json.tool

---

     "roles": [

                {

                    "name": "admin"

                }

            ],

## CVE References

* [2014-0204](/bugs/cve/2014-0204 "OpenStack Identity (Keystone) before ...")

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Dolph Mathews (dolph)](https://launchpad.net/~dolph) wrote on 2014-04-18: |  |  | [#1](/keystone/%2Bbug/1309228/comments/1) |
| --- | --- | --- | --- |

I suppose this would also be possible with a SQL identity backend, but the odds of a collision between system-assigned UUIDs is astronomically low. If this is due to the assignment SQL refactor, this should only affect master & icehouse - not havana.

I suppose this would also be possible with a SQL identity backend, but the odds of a collision between system-assigned UUIDs is astronomically low. If this is due to the assignment SQL refactor, this should only affect master & icehouse - not havana.

| **tags**: | added: icehouse-backport-potential |
| --- | --- |
| Changed in keystone: | |
| **importance**: | Undecided → High |

[Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray)
on 2014-04-18

| Changed in ossa: | |
| --- | --- |
| **status**: | New → Incomplete |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2014-04-18: |  |  | [#2](/keystone/%2Bbug/1309228/comments/2) |
| --- | --- | --- | --- |

Looks valid to me

Looks valid to me

| Changed in ossa: | |
| --- | --- |
| **status**: | Incomplete → Confirmed |
| Changed in keystone: | |
| **status**: | New → Confirmed |

[Thierry Carrez (ttx)](https://launchpad.net/~ttx)
on 2014-04-18

| Changed in ossa: | |
| --- | --- |
| **importance**: | Undecided → High |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2014-04-18: |  |  | [#3](/keystone/%2Bbug/1309228/comments/3) |
| --- | --- | --- | --- |

Impact description draft #1:

Title: Keystone user and group id mismatch.

Reporter: Brant Knudson (IBM)

Products: Keystone

Versions: 2014.1

Description:

Brant Knudson from IBM reported a vulnerability in Keystone. Someone with write access to the Auth backend may willingly or unwillingly grant additional rights by picking the same IDs for users and groups, resulting in roles assigned to a group being assigned to the affected user even if he is not a member of this group.

Only Keystone setups using LDAP backend are likely affected.

Impact description draft #1:
Title: Keystone user and group id mismatch.
Reporter: Brant Knudson (IBM)
Products: Keystone
Versions: 2014.1
Description:
Brant Knudson from IBM reported a vulnerability in Keystone. Someone with write access to the Auth backend may willingly or unwillingly grant additional rights by picking the same IDs for users and groups, resulting in roles assigned to a group being assigned to the affected user even if he is not a member of this group.
Only Keystone setups using LDAP backend are likely affected.

| Changed in ossa: | |
| --- | --- |
| **assignee**: | nobody → Tristan Cacqueray (tristan-cacqueray) |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Brant Knudson (blk-u)](https://launchpad.net/~blk-u) wrote on 2014-04-18: |  |  | [#4](/keystone/%2Bbug/1309228/comments/4) |
| --- | --- | --- | --- |

Looks like the problem code is keystone.assignment.backends.sql.Assignment:\_get\_metadata. You pass in a user\_id or group\_id and it treats them the same: <http://git.openstack.org/cgit/openstack/keystone/tree/keystone/assignment/backends/sql.py?id=2fea9c560a6d8c4fc5522795624ac9a84bd40450#n81>

The likely fix is to calculate the role type based on the arguments and include that in the query. Here's the table:

mysql> select \* from assignment;

+--------------+----------------------------------+----------------------------------+----------------------------------+-----------+

| type | actor\_id | target\_id | role\_id | inherited |

+--------------+----------------------------------+----------------------------------+----------------------------------+-----------+

| UserProject | f4d347ad6e2b46109d3b8c98dc53db61 | ce9a1366f8294daa80e3dc432b416c2c | 9e262162c0c24b73906a8171a787dc10 | 0 |

| GroupProject | suspectid | 79edaf3db5634de681db106103c81b81 | a77bec4d368a4a819e59ad364b793d85 | 0 |

+--------------+----------------------------------+----------------------------------+----------------------------------+-----------+

So the query should also have q.filter\_by(type='UserProject') (group project because the args are user\_id=xxx,tenant\_id=yyy rather than group\_id=xxx,tenant\_id=yyy.

I tried writing a quick test in test\_auth but that uses the kvs backend which apparently handles this correctly.

It should be good enough to write a test for get\_roles\_for\_user\_and\_project, since that's what's called when the token is created.

Looks like the problem code is keystone.assignment.backends.sql.Assignment:\_get\_metadata. You pass in a user\_id or group\_id and it treats them the same: http://git.openstack.org/cgit/openstack/keystone/tree/keystone/assignment/backends/sql.py?id=2fea9c560a6d8c4fc5522795624ac9a84bd40450#n81
The likely fix is to calculate the role type based on the arguments and include that in the query. Here's the table:
mysql> select \* from assignment;
+--------------+----------------------------------+----------------------------------+----------------------------------+-----------+
| type | actor\_id | target\_id | role\_id | inherited |
+--------------+----------------------------------+----------------------------------+----------------------------------+-----------+
| UserProject | f4d347ad6e2b46109d3b8c98dc53db61 | ce9a1366f8294daa80e3dc432b416c2c | 9e262162c0c24b73906a8171a787dc10 | 0 |
| GroupProject | suspectid | 79edaf3db5634de681db106103c81b81 | a77bec4d368a4a819e59ad364b793d85 | 0 |
+--------------+----------------------------------+----------------------------------+----------------------------------+-----------+
So the query should also have q.filter\_by(type='UserProject') (group project because the args are user\_id=xxx,tenant\_id=yyy rather than group\_id=xxx,tenant\_id=yyy.
I tried writing a quick test in test\_auth but that uses the kvs backend which apparently handles this correctly.
It should be good enough to write a test for get\_roles\_for\_user\_and\_project, since that's what's called when the token is created.

[Brant Knudson (blk-u)](https://launchpad.net/~blk-u)
on 2014-04-18

| Changed in keystone: | |
| --- | --- |
| **assignee**: | nobody → Brant Knudson (blk-u) |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Brant Knudson (blk-u)](https://launchpad.net/~blk-u) wrote on 2014-04-18: |  |  | [#5](/keystone/%2Bbug/1309228/comments/5) |
| --- | --- | --- | --- |

* [0001-Enhance-tests-for-get\_roles\_for\_user\_and\_project-for.patch](https://bugs.launchpad.net/keystone/%2Bbug/1309228/%2Battachment/4087694/%2Bfiles/0001-Enhance-tests-for-get_roles_for_user_and_project-for.patch)
  [Edit](/keystone/%2Bbug/1309228/%2Battachment/4087694)
  (7.2 KiB,
  text/plain)

Here's a patch with a test showing the problem.

Looks like the SQL and LDAP assignment backends are not doing this correctly.

Here's a patch with a test showing the problem.
Looks like the SQL and LDAP assignment backends are not doing this correctly.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Brant Knudson (blk-u)](https://launchpad.net/~blk-u) wrote on 2014-04-18: |  |  | [#6](/keystone/%2Bbug/1309228/comments/6) |
| --- | --- | --- | --- |

* [0001-Fix-get\_roles\_for\_user\_and\_project-user-group-ID-for.patch](https://bugs.launchpad.net/keystone/%2Bbug/1309228/%2Battachment/4087807/%2Bfiles/0001-Fix-get_roles_for_user_and_project-user-group-ID-for.patch)
  [Edit](/keystone/%2Bbug/1309228/%2Battachment/4087807)
  (8.1 KiB,
  text/plain)

Here's a follow-on patch with the fix for the SQL backend.

Here's a follow-on patch with the fix for the SQL backend.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Brant Knudson (blk-u)](https://launchpad.net/~blk-u) wrote on 2014-04-18: |  |  | [#7](/keystone/%2Bbug/1309228/comments/7) |
| --- | --- | --- | --- |

The fix for the LDAP backend is trickier... the entry for the role assignments has a member attribute containing the DNs for both users and groups. If it was easy to compare DNs then this would be an easy check, just see if the entry is in the user tree or the group tree. Unfortunately, LDAP DNs cannot be compared with a simple string comparison, or even case-insensitive comparison.

The fix for the LDAP backend is trickier... the entry for the role assignments has a member attribute containing the DNs for both users and groups. If it was easy to compare DNs then this would be an easy check, just see if the entry is in the user tree or the group tree. Unfortunately, LDAP DNs cannot be compared with a simple string comparison, or even case-insensitive comparison.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Brant Knudson (blk-u)](https://launchpad.net/~blk-u) wrote on 2014-04-18: |  |  | [#8](/keystone/%2Bbug/1309228/comments/8) |
| --- | --- | --- | --- |

* [0001-Enhance-tests-for-get\_roles\_for\_user\_and\_project-for.patch](https://bugs.launchpad.net/keystone/%2Bbug/1309228/%2Battachment/4087926/%2Bfiles/0001-Enhance-tests-for-get_roles_for_user_and_project-for.patch)
  [Edit](/keystone/%2Bbug/1309228/%2Battachment/4087926)
  (7.2 KiB,
  text/plain)

Here's the patches for adding the test, the SQL fix, and the LDAP fix. I fixed a comment error in the test patch.

Here's the patches for adding the test, the SQL fix, and the LDAP fix. I fixed a comment error in the test patch.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Brant Knudson (blk-u)](https://launchpad.net/~blk-u) wrote on 2014-04-18: |  |  | [#9](/keystone/%2Bbug/1309228/comments/9) |
| --- | --- | --- | --- |

* [0002-SQL-fix-for-get\_roles\_for\_user\_and\_project-user-grou.patch](https://bugs.launchpad.net/keystone/%2Bbug/1309228/%2Battachment/4087927/%2Bfiles/0002-SQL-fix-for-get_roles_for_user_and_project-user-grou.patch)
  [Edit](/keystone/%2Bbug/1309228/%2Battachment/4087927)
  (8.1 KiB,
  text/plain)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Brant Knudson (blk-u)](https://launchpad.net/~blk-u) wrote on 2014-04-18: |  |  | [#10](/keystone/%2Bbug/1309228/comments/10) |
| --- | --- | --- | --- |

* [0003-LDAP-fix-for-get\_roles\_for\_user\_and\_project-user-gro.patch](https://bugs.launchpad.net/keystone/%2Bbug/1309228/%2Battachment/4087928/%2Bfiles/0003-LDAP-fix-for-get_roles_for_user_and_project-user-gro.patch)
  [Edit](/keystone/%2Bbug/1309228/%2Battachment/4087928)
  (6.5 KiB,
  text/plain)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Brant Knudson (blk-u)](https://launchpad.net/~blk-u) wrote on 2014-04-18: |  |  | [#11](/keystone/%2Bbug/1309228/comments/11) |
| --- | --- | --- | --- |

My opinion is that this doesn't affect havana.

The SQL query used different tables: <http://git.openstack.org/cgit/openstack/keystone/tree/keystone/assignment/backends/sql.py?h=stable/havana#n70>

Apparently LDAP didn't support groups: <http://git.openstack.org/cgit/openstack/keystone/tree/keystone/assignment/backends/ldap.py?h=stable/havana>

My opinion is that this doesn't affect havana.
The SQL query used different tables: http://git.openstack.org/cgit/openstack/keystone/tree/keystone/assignment/backends/sql.py?h=stable/havana#n70
Apparently LDAP didn't support groups: http://git.openstack.org/cgit/openstack/keystone/tree/keystone/assignment/backends/ldap.py?h=stable/havana

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Brant Knudson (blk-u)](https://launchpad.net/~blk-u) wrote on 2014-04-18: |  |  | [#12](/keystone/%2Bbug/1309228/comments/12) |
| --- | --- | --- | --- |

I think I'll re-do these patches so that they apply cleanly on stable/icehouse. All it should is moving the test\_backend\_ldap code so that it's not at the end of the class where it causes a conflict with new tests.

I think I'll re-do these patches so that they apply cleanly on stable/icehouse. All it should is moving the test\_backend\_ldap code so that it's not at the end of the class where it causes a conflict with new tests.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Brant Knudson (blk-u)](https://launchpad.net/~blk-u) wrote on 2014-04-18: |  |  | [#13](/keystone/%2Bbug/1309228/comments/13) |
| --- | --- | --- | --- |

* [bug-1309228.patches.tgz](https://bugs.launchpad.net/keystone/%2Bbug/1309228/%2Battachment/4087996/%2Bfiles/bug-1309228.patches.tgz)
  [Edit](/keystone/%2Bbug/1309228/%2Battachment/4087996)
  (3.4 KiB,
  application/x-tar)

These patches applied cleanly to both master and stable/icehouse (as they are now).

These patches applied cleanly to both master and stable/icehouse (as they are now).

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2014-04-22: |  |  | [#14](/keystone/%2Bbug/1309228/comments/14) |
| --- | --- | --- | --- |

keystone coresec please review proposed patch.

keystone coresec please review proposed patch.

| Changed in ossa: | |
| --- | --- |
| **importance**: | High → Medium |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2014-04-22: |  |  | [#15](/keystone/%2Bbug/1309228/comments/15) |
| --- | --- | --- | --- |

Impact desc looks good, just remove the trailing dot in the Title line, and put the "Only..." sentence on the same paragraph as the rest.

Impact desc looks good, just remove the trailing dot in the Title line, and put the "Only..." sentence on the same paragraph as the rest.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Brant Knudson (blk-u)](https://launchpad.net/~blk-u) wrote on 2014-04-22: |  |  | [#16](/keystone/%2Bbug/1309228/comments/16) |
| --- | --- | --- | --- |

Please change the reporter in the impact description from "Brant Knudson" to "Michael Stancampiano". I just opened the bug, it was Mike who told me about it.

Otherwise the impact descrption in comment 3 looks good to me.

Please change the reporter in the impact description from "Brant Knudson" to "Michael Stancampiano". I just opened the bug, it was Mike who told me about it.
Otherwise the impact descrption in comment 3 looks good to me.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2014-04-22: |  |  | [#17](/keystone/%2Bbug/1309228/comments/17) |
| --- | --- | --- | --- |

@Brant Thanks for the review! Do you know what, if any, company should I credit too ?

@Brant Thanks for the review! Do you know what, if any, company should I credit too ?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Brant Knudson (blk-u)](https://launchpad.net/~blk-u) wrote on 2014-04-22: |  |  | [#18](/keystone/%2Bbug/1309228/comments/18) |
| --- | --- | --- | --- |

@Tristan - IBM is correct for the company. It was found during internal testing.

@Tristan - IBM is correct for the company. It was found during internal testing.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2014-04-22: |  |  | [#19](/keystone/%2Bbug/1309228/comments/19) |
| --- | --- | --- | --- |

Alright, so here is impact description draft #2:

Title: Keystone user and group id mismatch

Reporter: Michael Stancampiano (IBM)

Products: Keystone

Versions: 2014.1

Description:

Michael Stancampiano from IBM reported a vulnerability in Keystone. Someone with write access to the Auth backend may willingly or unwillingly grant additional rights by picking the same IDs for users and groups, resulting in roles assigned to a group being assigned to the affected user even if he is not a member of this group. Only Keystone setups using LDAP backend are likely affected.

Alright, so here is impact description draft #2:
Title: Keystone user and group id mismatch
Reporter: Michael Stancampiano (IBM)
Products: Keystone
Versions: 2014.1
Description:
Michael Stancampiano from IBM reported a vulnerability in Keystone. Someone with write access to the Auth backend may willingly or unwillingly grant additional rights by picking the same IDs for users and groups, resulting in roles assigned to a group being assigned to the affected user even if he is not a member of this group. Only Keystone setups using LDAP backend are likely affected.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2014-04-24: |  |  | [#20](/keystone/%2Bbug/1309228/comments/20) |
| --- | --- | --- | --- |

I would remove "likely" since it sounds like we think it may impact other backends but have no clue. Otherwise looks good.

I would remove "likely" since it sounds like we think it may impact other backends but have no clue. Otherwise looks good.

| Changed in ossa: | |
| --- | --- |
| **status**: | Confirmed → Triaged |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Brant Knudson (blk-u)](https://launchpad.net/~blk-u) wrote on 2014-04-25: |  |  | [#21](/keystone/%2Bbug/1309228/comments/21) |
| --- | --- | --- | --- |

A couple of nits

- change "Auth backend" to "user and group repository (such as the LDAP directory server)" -- we have auth plugins so someone might be confused by this.

- change "LDAP backend" to "LDAP for the Identity driver" -- the setting in the config file is like [identity].driver = keystone.identity.backends.ldap.Identity ( <http://git.openstack.org/cgit/openstack/keystone/tree/etc/keystone.conf.sample#n754> ), so maybe this would be more consistent with how we refer to things.

A couple of nits
- change "Auth backend" to "user and group repository (such as the LDAP directory server)" -- we have auth plugins so someone might be confused by this.
- change "LDAP backend" to "LDAP for the Identity driver" -- the setting in the config file is like [identity].driver = keystone.identity.backends.ldap.Identity ( http://git.openstack.org/cgit/openstack/keystone/tree/etc/keystone.conf.sample#n754 ), so maybe this would be more consistent with how we refer to things.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2014-04-25: |  |  | [#22](/keystone/%2Bbug/1309228/comments/22) |
| --- | --- | --- | --- |

Thanks you for the comments!

Here is impact description draft #3:

Title: Keystone user and group id mismatch

Reporter: Michael Stancampiano (IBM)

Products: Keystone

Versions: 2014.1

Description:

Michael Stancampiano from IBM reported a vulnerability in Keystone. Someone with write access to the user and group repository (such as the LDAP directory server) may willingly or unwillingly grant additional rights by picking the same IDs for users and groups, resulting in roles assigned to a group being assigned to the affected user even if he is not a member of this group. Only Keystone setups using LDAP for the Identity driver are affected.

Thanks you for the comments!
Here is impact description draft #3:
Title: Keystone user and group id mismatch
Reporter: Michael Stancampiano (IBM)
Products: Keystone
Versions: 2014.1
Description:
Michael Stancampiano from IBM reported a vulnerability in Keystone. Someone with write access to the user and group repository (such as the LDAP directory server) may willingly or unwillingly grant additional rights by picking the same IDs for users and groups, resulting in roles assigned to a group being assigned to the affected user even if he is not a member of this group. Only Keystone setups using LDAP for the Identity driver are affected.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Brant Knudson (blk-u)](https://launchpad.net/~blk-u) wrote on 2014-04-25: |  |  | [#23](/keystone/%2Bbug/1309228/comments/23) |
| --- | --- | --- | --- |

The text in comment 22 looks good to me.

The text in comment 22 looks good to me.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2014-04-25: |  |  | [#24](/keystone/%2Bbug/1309228/comments/24) |
| --- | --- | --- | --- |

+1

+1

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Adam Young (ayoung)](https://launchpad.net/~ayoung) wrote on 2014-04-26: |  |  | [#25](/keystone/%2Bbug/1309228/comments/25) |
| --- | --- | --- | --- |

There is a way to do Comparisons with DN's. John Dennis wrote up a fairly long treatise on it.

There is a way to do Comparisons with DN's. John Dennis wrote up a fairly long treatise on it.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Dolph Mathews (dolph)](https://launchpad.net/~dolph) wrote on 2014-04-28: |  |  | [#26](/keystone/%2Bbug/1309228/comments/26) |
| --- | --- | --- | --- |

+1 for impact description in comment 22

+1 for impact description in comment 22

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Dolph Mathews (dolph)](https://launchpad.net/~dolph) wrote on 2014-04-28: |  |  | [#27](/keystone/%2Bbug/1309228/comments/27) |
| --- | --- | --- | --- |

* [bug-1309228.patch](https://bugs.launchpad.net/keystone/%2Bbug/1309228/%2Battachment/4099601/%2Bfiles/bug-1309228.patch)
  [Edit](/keystone/%2Bbug/1309228/%2Battachment/4099601)
  (7.6 KiB,
  text/plain)

+1 for the patches in comment #13.

I squashed all three patches into a single .patch (attached), which should be quicker to merge when this is opened. The only change here is the combining of Brant's commit messages. I'd encourage other reviewers to review comment 13 first and then commit message here.

+1 for the patches in comment #13.
I squashed all three patches into a single .patch (attached), which should be quicker to merge when this is opened. The only change here is the combining of Brant's commit messages. I'd encourage other reviewers to review comment 13 first and then commit message here.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jeremy Stanley (fungi)](https://launchpad.net/~fungi) wrote on 2014-05-04: |  |  | [#28](/keystone/%2Bbug/1309228/comments/28) |
| --- | --- | --- | --- |

I'm good with Tristan's impact description in comment #22. We should plan a disclosure date and send downstream advance notifications at the earliest opportunity.

I'm good with Tristan's impact description in comment #22. We should plan a disclosure date and send downstream advance notifications at the earliest opportunity.

[Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray)
on 2014-05-06

| **summary**: | - User gets group auth if same id+ User gets group auth if same id (CVE-2014-0204) |
| --- | --- |

[Thierry Carrez (ttx)](https://launchpad.net/~ttx)
on 2014-05-06

| Changed in ossa: | |
| --- | --- |
| **status**: | Triaged → In Progress |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2014-05-08:  [**Re: User gets group auth if same id (CVE-2014-0204)**](/keystone/%2Bbug/1309228/comments/29) |  |  | [#29](/keystone/%2Bbug/1309228/comments/29) |
| --- | --- | --- | --- |

@dolph, running ./run\_tests.sh with the patch attached to comment #27 produces this error with stable/icehouse branch:

AssertionError: There is no script for 45 version

see <http://paste.openstack.org/show/YTbHqEMnSmjSzPBUwx4R/>

This may be related to my devstack or something...

If it's ok for you, we will send the pre-OSSA with a disclosure date set to:

2014-05-20, 1500UTC

Thanks.

@dolph, running ./run\_tests.sh with the patch attached to comment #27 produces this error with stable/icehouse branch:
AssertionError: There is no script for 45 version
see http://paste.openstack.org/show/YTbHqEMnSmjSzPBUwx4R/
This may be related to my devstack or something...
If it's ok for you, we will send the pre-OSSA with a disclosure date set to:
2014-05-20, 1500UTC
Thanks.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Brant Knudson (blk-u)](https://launchpad.net/~blk-u) wrote on 2014-05-08: |  |  | [#30](/keystone/%2Bbug/1309228/comments/30) |
| --- | --- | --- | --- |

Tristan - that error happens if you don't clean up the .pyc files, so the migration process finds a pyc file for migration 45 and the py isn't there anymore. Clean out the pyc files when checking out a branch with different migrations -- find keystone -name "\*.pyc" | xargs rm

Tristan - that error happens if you don't clean up the .pyc files, so the migration process finds a pyc file for migration 45 and the py isn't there anymore. Clean out the pyc files when checking out a branch with different migrations -- find keystone -name "\*.pyc" | xargs rm

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2014-05-08: |  |  | [#31](/keystone/%2Bbug/1309228/comments/31) |
| --- | --- | --- | --- |

Thanks you Brant, that was it!

Tests succeed for both master and stable/icehouse branch.

The pre-OSSA have been sent.

Proposed public disclosure date/time:

2014-05-20, 15:00 UTC

Thanks you Brant, that was it!
Tests succeed for both master and stable/icehouse branch.
The pre-OSSA have been sent.
Proposed public disclosure date/time:
2014-05-20, 15:00 UTC

| Changed in ossa: | |
| --- | --- |
| **status**: | In Progress → Fix Committed |

[Thierry Carrez (ttx)](https://launchpad.net/~ttx)
on 2014-05-19

| Changed in keystone: | |
| --- | --- |
| **status**: | Confirmed → In Progress |

[Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray)
on 2014-05-20

| **information type**: | Private Security → Public Security |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2014-05-20:  [**Fix proposed to keystone (master)**](/keystone/%2Bbug/1309228/comments/32) |  |  | [#32](/keystone/%2Bbug/1309228/comments/32) |
| --- | --- | --- | --- |

Fix proposed to branch: master

Review: <https://review.openstack.org/94396>

Fix proposed to branch: master
Review: https://review.openstack.org/94396

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2014-05-20:  [**Fix proposed to keystone (stable/icehouse)**](/keystone/%2Bbug/1309228/comments/33) |  |  | [#33](/keystone/%2Bbug/1309228/comments/33) |
| --- | --- | --- | --- |

Fix proposed to branch: stable/icehouse

Review: <https://review.openstack.org/94397>

Fix proposed to branch: stable/icehouse
Review: https://review.openstack.org/94397

[Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray)
on 2014-05-20

| **summary**: | - User gets group auth if same id (CVE-2014-0204)+ [OSSA 2014-015] User gets group auth if same id (CVE-2014-0204) |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2014-05-20:  [**Fix proposed to keystone (master)**](/keystone/%2Bbug/1309228/comments/34) |  |  | [#34](/keystone/%2Bbug/1309228/comments/34) |
| --- | --- | --- | --- |

Fix proposed to branch: master

Review: <https://review.openstack.org/94470>

Fix proposed to branch: master
Review: https://review.openstack.org/94470

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2014-05-21:  [**Fix merged to keystone (master)**](/keystone/%2Bbug/1309228/comments/35) |  |  | [#35](/keystone/%2Bbug/1309228/comments/35) |
| --- | --- | --- | --- |

Reviewed: <https://review.openstack.org/94396>

Committed: <https://git.openstack.org/cgit/openstack/keystone/commit/?id=97dfd55ad1b40365754dcbfce856f7ffae280a44>

Submitter: Jenkins

Branch: master

commit 97dfd55ad1b40365754dcbfce856f7ffae280a44

Author: Brant Knudson <email address hidden>

Date: Fri Apr 18 11:18:42 2014 -0500

SQL fix for get\_roles\_for\_user\_and\_project user=group ID

When there was a role assigned to a group with the same ID as a

    user, the SQL assignment backend would incorrectly return the

    assignment to the group when requesting roles for the user via

    the get\_roles\_for\_user\_and\_project method.

With this change, assignments to a group with the same ID are not

    returned for the user when calling get\_roles\_for\_user\_and\_project.

Change-Id: Id3d6f66c995e65e37d909359420d71ecdde86b69

    Partial-Bug: #1309228

Reviewed: https://review.openstack.org/94396
Committed: https://git.openstack.org/cgit/openstack/keystone/commit/?id=97dfd55ad1b40365754dcbfce856f7ffae280a44
Submitter: Jenkins
Branch: master
commit 97dfd55ad1b40365754dcbfce856f7ffae280a44
Author: Brant Knudson <bknudson@us.ibm.com>
Date: Fri Apr 18 11:18:42 2014 -0500
SQL fix for get\_roles\_for\_user\_and\_project user=group ID
When there was a role assigned to a group with the same ID as a
user, the SQL assignment backend would incorrectly return the
assignment to the group when requesting roles for the user via
the get\_roles\_for\_user\_and\_project method.
With this change, assignments to a group with the same ID are not
returned for the user when calling get\_roles\_for\_user\_and\_project.
Change-Id: Id3d6f66c995e65e37d909359420d71ecdde86b69
Partial-Bug: #1309228

[OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack)
on 2014-05-21

| Changed in keystone: | |
| --- | --- |
| **assignee**: | Brant Knudson (blk-u) → Adam Young (ayoung) |

[OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack)
on 2014-05-21

| Changed in keystone: | |
| --- | --- |
| **assignee**: | Adam Young (ayoung) → Brant Knudson (blk-u) |

[Alan Pevec (apevec)](https://launchpad.net/~apevec)
on 2014-05-21

| **tags**: | removed: icehouse-backport-potential |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2014-05-23:  [**Fix proposed to keystone (stable/icehouse)**](/keystone/%2Bbug/1309228/comments/36) |  |  | [#36](/keystone/%2Bbug/1309228/comments/36) |
| --- | --- | --- | --- |

Fix proposed to branch: stable/icehouse

Review: <https://review.openstack.org/95251>

Fix proposed to branch: stable/icehouse
Review: https://review.openstack.org/95251

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2014-05-23:  [**Fix merged to keystone (master)**](/keystone/%2Bbug/1309228/comments/37) |  |  | [#37](/keystone/%2Bbug/1309228/comments/37) |
| --- | --- | --- | --- |

Reviewed: <https://review.openstack.org/94470>

Committed: <https://git.openstack.org/cgit/openstack/keystone/commit/?id=729dcad7384ba66ee7494154969cdd7ae90d86ee>

Submitter: Jenkins

Branch: master

commit 729dcad7384ba66ee7494154969cdd7ae90d86ee

Author: Brant Knudson <email address hidden>

Date: Wed May 21 17:30:42 2014 -0500

LDAP fix for get\_roles\_for\_user\_and\_project user=group ID

When there was a role assigned to a group with the same ID as a

    user, the LDAP assignment backend would incorrectly return the

    assignment to the group when requesting roles for the user via

    the get\_roles\_for\_user\_and\_project method.

With this change, assignments to a group with the same ID are not

    returned for the user when calling get\_roles\_for\_user\_and\_project.

Functions were added to compare DNs more accurately based on the

    LDAP RFCs.

The fakeldap code was changed to normalize the values when

    comparing values for checking if the values match the filter.

Co-Authored By: Nathan Kinder <email address hidden>

    Co-Authored By: Adam Young <email address hidden>

Change-Id: Ia6f1ae2e3af1e968f1a393bd4f2f38812a88a5d0

    Closes-Bug: #1309228

Reviewed: https://review.openstack.org/94470
Committed: https://git.openstack.org/cgit/openstack/keystone/commit/?id=729dcad7384ba66ee7494154969cdd7ae90d86ee
Submitter: Jenkins
Branch: master
commit 729dcad7384ba66ee7494154969cdd7ae90d86ee
Author: Brant Knudson <bknudson@us.ibm.com>
Date: Wed May 21 17:30:42 2014 -0500
LDAP fix for get\_roles\_for\_user\_and\_project user=group ID
When there was a role assigned to a group with the same ID as a
user, the LDAP assignment backend would incorrectly return the
assignment to the group when requesting roles for the user via
the get\_roles\_for\_user\_and\_project method.
With this change, assignments to a group with the same ID are not
returned for the user when calling get\_roles\_for\_user\_and\_project.
Functions were added to compare DNs more accurately based on the
LDAP RFCs.
The fakeldap code was changed to normalize the values when
comparing values for checking if the values match the filter.
Co-Authored By: Nathan Kinder <nkinder@redhat.com>
Co-Authored By: Adam Young <ayoung@redhat.com>
Change-Id: Ia6f1ae2e3af1e968f1a393bd4f2f38812a88a5d0
Closes-Bug: #1309228

| Changed in keystone: | |
| --- | --- |
| **status**: | In Progress → Fix Committed |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2014-05-23:  [**Related fix proposed to keystone (master)**](/keystone/%2Bbug/1309228/comments/38) |  |  | [#38](/keystone/%2Bbug/1309228/comments/38) |
| --- | --- | --- | --- |

Related fix proposed to branch: master

Review: <https://review.openstack.org/95263>

Related fix proposed to branch: master
Review: https://review.openstack.org/95263

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2014-05-26: |  |  | [#39](/keystone/%2Bbug/1309228/comments/39) |
| --- | --- | --- | --- |

Only missing stable/icehouse:

<https://review.openstack.org/#/c/94397/>

Only missing stable/icehouse:
https://review.openstack.org/#/c/94397/

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Matthew Thode (prometheanfire)](https://launchpad.net/~prometheanfire) wrote on 2014-05-29: |  |  | [#40](/keystone/%2Bbug/1309228/comments/40) |
| --- | --- | --- | --- |

still missing stable/icehouse :(

<https://review.openstack.org/#/c/94397/>

still missing stable/icehouse :(
https://review.openstack.org/#/c/94397/

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2014-05-29:  [**Fix merged to keystone (stable/icehouse)**](/keystone/%2Bbug/1309228/comments/41) |  |  | [#41](/keystone/%2Bbug/1309228/comments/41) |
| --- | --- | --- | --- |

Reviewed: <https://review.openstack.org/94397>

Committed: <https://git.openstack.org/cgit/openstack/keystone/commit/?id=786af9829c5329a982e3451f77afebbfb21850bd>

Submitter: Jenkins

Branch: stable/icehouse

commit 786af9829c5329a982e3451f77afebbfb21850bd

Author: Brant Knudson <email address hidden>

Date: Fri Apr 18 11:18:42 2014 -0500

SQL and LDAP fixes for get\_roles\_for\_user\_and\_project user=group ID

When there was a role assigned to a group with the same ID as a user,

    the SQL and LDAP assignment backends would incorrectly return the

    assignment to the group when requesting roles for the user via the

    get\_roles\_for\_user\_and\_project method.

With this change, assignments to a group with the same ID are not

    returned for the user when calling get\_roles\_for\_user\_and\_project.

Functions were added to compare DNs more accurately based on the

    LDAP RFCs.

The fakeldap code was changed to normalize the values when

    comparing values for checking if the values match the filter.

Co-Authored By: Nathan Kinder <email address hidden>

    Co-Authored By: Adam Young <email address hidden>

Change-Id: Id3d6f66c995e65e37d909359420d71ecdde86b69

    Closes-Bug: #1309228

Reviewed: https://review.openstack.org/94397
Committed: https://git.openstack.org/cgit/openstack/keystone/commit/?id=786af9829c5329a982e3451f77afebbfb21850bd
Submitter: Jenkins
Branch: stable/icehouse
commit 786af9829c5329a982e3451f77afebbfb21850bd
Author: Brant Knudson <bknudson@us.ibm.com>
Date: Fri Apr 18 11:18:42 2014 -0500
SQL and LDAP fixes for get\_roles\_for\_user\_and\_project user=group ID
When there was a role assigned to a group with the same ID as a user,
the SQL and LDAP assignment backends would incorrectly return the
assignment to the group when requesting roles for the user via the
get\_roles\_for\_user\_and\_project method.
With this change, assignments to a group with the same ID are not
returned for the user when calling get\_roles\_for\_user\_and\_project.
Functions were added to compare DNs more accurately based on the
LDAP RFCs.
The fakeldap code was changed to normalize the values when
comparing values for checking if the values match the filter.
Co-Authored By: Nathan Kinder <nkinder@redhat.com>
Co-Authored By: Adam Young <ayoung@redhat.com>
Change-Id: Id3d6f66c995e65e37d909359420d71ecdde86b69
Closes-Bug: #1309228

[Thierry Carrez (ttx)](https://launchpad.net/~ttx)
on 2014-05-30

| Changed in ossa: | |
| --- | --- |
| **status**: | Fix Committed → Fix Released |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2014-06-09:  [**Related fix merged to keystone (master)**](/keystone/%2Bbug/1309228/comments/42) |  |  | [#42](/keystone/%2Bbug/1309228/comments/42) |
| --- | --- | --- | --- |

Reviewed: <https://review.openstack.org/95263>

Committed: <https://git.openstack.org/cgit/openstack/keystone/commit/?id=f0eee2f3b48dd0cffb9f75e396da2d914925cba5>

Submitter: Jenkins

Branch: master

commit f0eee2f3b48dd0cffb9f75e396da2d914925cba5

Author: Brant Knudson <email address hidden>

Date: Fri May 23 15:44:05 2014 -0500

Remove obsolete note from ldap

There was a note in the ldap assignment backend about normalizing

    a DN using .upper(). This note is obsolete with the recent change

    to use a DN compare function.

Change-Id: I34c69573498b5f2d2103ea485160df421c6f2b03

    Related-Bug: #1309228

Reviewed: https://review.openstack.org/95263
Committed: https://git.openstack.org/cgit/openstack/keystone/commit/?id=f0eee2f3b48dd0cffb9f75e396da2d914925cba5
Submitter: Jenkins
Branch: master
commit f0eee2f3b48dd0cffb9f75e396da2d914925cba5
Author: Brant Knudson <bknudson@us.ibm.com>
Date: Fri May 23 15:44:05 2014 -0500
Remove obsolete note from ldap
There was a note in the ldap assignment backend about normalizing
a DN using .upper(). This note is obsolete with the recent change
to use a DN compare function.
Change-Id: I34c69573498b5f2d2103ea485160df421c6f2b03
Related-Bug: #1309228

[Thierry Carrez (ttx)](https://launchpad.net/~ttx)
on 2014-06-11

| Changed in keystone: | |
| --- | --- |
| **milestone**: | none → juno-1 |
| **status**: | Fix Committed → Fix Released |

[Thierry Carrez (ttx)](https://launchpad.net/~ttx)
on 2014-10-16

| Changed in keystone: | |
| --- | --- |
| **milestone**: | juno-1 → 2014.2 |

[See full activity log](https://bugs.launchpad.net/keystone/%2Bbug/1309228/%2Bactivity)

To post a comment you must [log in](%2Blogin?comments=all).

* [Report a bug](/keystone/%2Bfilebug)

This report contains
**Public Security**
information

Everyone can see this security related information.

You are
[not directly subscribed to this bug's notifications.](/keystone/%2Bbug/1309228/%2Bsubscribe)

Subscribing...

* [Edit bug mail](https://bugs.launchpad.net/keystone/%2Bbug/1309228/%2Bsubscriptions "View and change your subscriptions to this bug")

## Other bug subscribers

[Subscribe someone else](https://bugs.launchpad.net/keystone/%2Bbug/1309228/%2Baddsubscriber "Launchpad will email that person whenever this bugs changes")

## Patches

* [0001-Enhance-tests-for-get\_roles\_for\_user\_and\_project-for.patch](https://bugs.launchpad.net/keystone/%2Bbug/1309228/%2Battachment/4087694/%2Bfiles/0001-Enhance-tests-for-get_roles_for_user_and_project-for.patch)
  [Edit](/keystone/%2Bbug/1309228/%2Battachment/4087694 "Change patch details")
* [0001-Fix-get\_roles\_for\_user\_and\_project-user-group-ID-for.patch](https://bugs.launchpad.net/keystone/%2Bbug/1309228/%2Battachment/4087807/%2Bfiles/0001-Fix-get_roles_for_user_and_project-user-group-ID-for.patch)
  [Edit](/keystone/%2Bbug/1309228/%2Battachment/4087807 "Change patch details")
* [0001-Enhance-tests-for-get\_roles\_for\_user\_and\_project-for.patch](https://bugs.launchpad.net/keystone/%2Bbug/1309228/%2Battachment/4087926/%2Bfiles/0001-Enhance-tests-for-get_roles_for_user_and_project-for.patch)
  [Edit](/keystone/%2Bbug/1309228/%2Battachment/4087926 "Change patch details")
* [0002-SQL-fix-for-get\_roles\_for\_user\_and\_project-user-grou.patch](https://bugs.launchpad.net/keystone/%2Bbug/1309228/%2Battachment/4087927/%2Bfiles/0002-SQL-fix-for-get_roles_for_user_and_project-user-grou.patch)
  [Edit](/keystone/%2Bbug/1309228/%2Battachment/4087927 "Change patch details")
* [0003-LDAP-fix-for-get\_roles\_for\_user\_and\_project-user-gro.patch](https://bugs.launchpad.net/keystone/%2Bbug/1309228/%2Battachment/4087928/%2Bfiles/0003-LDAP-fix-for-get_roles_for_user_and_project-user-gro.patch)
  [Edit](/keystone/%2Bbug/1309228/%2Battachment/4087928 "Change patch details")
* [bug-1309228.patch](https://bugs.launchpad.net/keystone/%2Bbug/1309228/%2Battachment/4099601/%2Bfiles/bug-1309228.patch)
  [Edit](/keystone/%2Bbug/1309228/%2Battachment/4099601 "Change patch details")

* [Add patch](/keystone/%2Bbug/1309228/%2Baddcomment?field.patch=on)

## Bug attachments

* [bug-1309228.patches.tgz](https://bugs.launchpad.net/keystone/%2Bbug/1309228/%2Battachment/4087996/%2Bfiles/bug-1309228.patches.tgz)
  [Edit](/keystone/%2Bbug/1309228/%2Battachment/4087996 "Change attachment details")

* [Add attachment](/keystone/%2Bbug/1309228/%2Baddcomment)

## Remote bug watches

Bug watches keep track of this bug in other bug trackers.

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
4d55102
([Get the code!](https://dev.launchpad.net/))



=== Content from www.openwall.com_fc65b4ca_20250124_155137.html ===


| [Openwall](/) * [Products](/)   + [Openwall GNU/\*/Linux   *server OS*](/Owl/)+ [Linux Kernel Runtime Guard](/lkrg/)+ [John the Ripper   *password cracker*](/john/)         - [Free & Open Source for any platform](/john/)- [in the cloud](/john/cloud/)- [Pro for Linux](/john/pro/linux/)- [Pro for macOS](/john/pro/macosx/)+ [Wordlists   *for password cracking*](/wordlists/)+ [passwdqc   *policy enforcement*](/passwdqc/)             - [Free & Open Source for Unix](/passwdqc/)- [Pro for Windows (Active Directory)](/passwdqc/windows/)+ [yescrypt   *KDF & password hashing*](/yescrypt/)+ [yespower   *Proof-of-Work (PoW)*](/yespower/)+ [crypt\_blowfish   *password hashing*](/crypt/)+ [phpass   *ditto in PHP*](/phpass/)+ [tcb   *better password shadowing*](/tcb/)+ [Pluggable Authentication Modules](/pam/)+ [scanlogd   *port scan detector*](/scanlogd/)+ [popa3d   *tiny POP3 daemon*](/popa3d/)+ [blists   *web interface to mailing lists*](/blists/)+ [msulogin   *single user mode login*](/msulogin/)+ [php\_mt\_seed   *mt\_rand() cracker*](/php_mt_seed/)* [Services](/services/)* Publications       + [Articles](/articles/)+ [Presentations](/presentations/)* Resources         + [Mailing lists](/lists/)+ [Community wiki](https://openwall.info/wiki/)+ [Source code repositories (GitHub)](https://github.com/openwall)+ [Source code repositories (CVSweb)](https://cvsweb.openwall.com)+ [File archive & mirrors](/mirrors/)+ [How to verify digital signatures](/signatures/)+ [OVE IDs](/ove/)* [What's new](/news) | |
| --- | --- |

| | [Follow @Openwall on Twitter for new release announcements and other news](https://twitter.com/openwall) | | --- | |
| --- | --- |

[[<prev]](2) [[next>]](../../../2014/05/22/1) [[day]](.) [[month]](..) [[year]](../..) [[list]](../../..)
```

Message-ID: <537D051B.2020504@enovance.com>
Date: Wed, 21 May 2014 15:57:15 -0400
From: Tristan Cacqueray <tristan.cacqueray@...vance.com>
To: oss-security@...ts.openwall.com
Subject: [OSSA 2014-015] Keystone user and group id mismatch (CVE-2014-0204)

OpenStack Security Advisory: 2014-015
CVE: CVE-2014-0204
Date: May 21, 2014
Title: Keystone user and group id mismatch
Reporter: Michael Stancampiano (IBM)
Products: Keystone
Versions: 2014.1

Description:
Michael Stancampiano from IBM reported a vulnerability in Keystone.
Someone with write access to the user and group repository (such as the
LDAP directory server) may willingly or unwillingly grant additional
rights by picking the same IDs for users and groups, resulting in roles
assigned to a group being assigned to the affected user even if he is
not a member of this group. Only Keystone setups using LDAP for the
Identity driver are affected.

Juno (development branch) fixes:
<https://review.openstack.org/94396>
<https://review.openstack.org/94470>

Icehouse fix:
<https://review.openstack.org/94397>

Notes:
This fix will be included in the juno-1 development milestone and in
a future 2014.1.1 release.

References:
<http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-0204>
<https://launchpad.net/bugs/1309228>

--
Tristan Cacqueray
OpenStack Vulnerability Management Team

Download attachment "[signature.asc](3/1)" of type "application/pgp-signature" (556 bytes)

```

[Powered by blists](https://www.openwall.com/blists/) - [more mailing lists](https://lists.openwall.net)

Please check out the
[Open Source Software Security Wiki](https://oss-security.openwall.org/wiki/), which is counterpart to this
[mailing list](https://oss-security.openwall.org/wiki/mailing-lists/oss-security).

Confused about [mailing lists](/lists/) and their use?
[Read about mailing lists on Wikipedia](https://en.wikipedia.org/wiki/Electronic_mailing_list)
and check out these
[guidelines on proper formatting of your messages](https://www.complang.tuwien.ac.at/anton/mail-news-errors.html).



=== Content from launchpad.net_9e50c715_20250126_020301.html ===

[Log in / Register](https://launchpad.net/~tristan-cacqueray/%2Blogin)

[![](/@@/person-logo)](https://launchpad.net/~tristan-cacqueray)

## [Tristan Cacqueray](https://launchpad.net/~tristan-cacqueray)

* Overview
* [Code](https://code.launchpad.net/~tristan-cacqueray)
* [Bugs](https://bugs.launchpad.net/~tristan-cacqueray)
* [Blueprints](https://blueprints.launchpad.net/~tristan-cacqueray)
* [Translations](https://translations.launchpad.net/~tristan-cacqueray)
* [Answers](https://answers.launchpad.net/~tristan-cacqueray)

* [Related packages](https://launchpad.net/~tristan-cacqueray/%2Brelated-packages)
* [Related projects](https://launchpad.net/~tristan-cacqueray/%2Brelated-projects)

## User information

Launchpad Id:
tristan-cacqueray

Email:
[Log in](%2Blogin) for email information.

Member since:
2013-10-25

[![Icon of OpenStack Security SIG](https://launchpadlibrarian.net/203991792/os14.png "Member of OpenStack Security SIG")](/~openstack-ossg)

Signed Ubuntu Code of Conduct:
Yes

Languages:

English

OpenPGP keys:

EB103DE8B5E69E631C6FF17922B9A05C925CC5D8

SSH keys:

[localadmin@controller](%2Bsshkeys)

Time zone:

UTC
(UTC+0000)

Karma:
[0](https://launchpad.net/~tristan-cacqueray/%2Bkarma)
[Karma help](/%2Bhelp-registry/karma.html)

Social accounts:
![IRC](/@@/social-irc "IRC")
**tristanC**
 on
**irc.freenode.net**

## [All memberships](https://launchpad.net/~tristan-cacqueray/%2Bparticipation) Latest memberships

| [Swiftsync dev](/~swiftsync-devteam)  Joined on 2014-02-13 | |
| --- | --- |
| [OpenStack Security SIG](/~openstack-ossg)  Joined on 2013-12-12 | |

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
4d55102
([Get the code!](https://dev.launchpad.net/))



=== Content from launchpad.net_cfd31fe3_20250126_020300.html ===

[Log in / Register](https://launchpad.net/~blk-u/%2Blogin)

[![](/@@/person-logo)](https://launchpad.net/~blk-u)

## [Brant Knudson](https://launchpad.net/~blk-u)

* Overview
* [Code](https://code.launchpad.net/~blk-u)
* [Bugs](https://bugs.launchpad.net/~blk-u)
* [Blueprints](https://blueprints.launchpad.net/~blk-u)
* [Translations](https://translations.launchpad.net/~blk-u)
* [Answers](https://answers.launchpad.net/~blk-u)

* [Related packages](https://launchpad.net/~blk-u/%2Brelated-packages)
* [Related projects](https://launchpad.net/~blk-u/%2Brelated-projects)

## User information

Launchpad Id:
blk-u

Email:
[Log in](%2Blogin) for email information.

Member since:
2012-11-08

[![Icon of OpenStack Security SIG](https://launchpadlibrarian.net/203991792/os14.png "Member of OpenStack Security SIG")](/~openstack-ossg)
[![Icon of OpenStack Team](https://launchpadlibrarian.net/52313052/os14.png "Member of OpenStack Team")](/~openstack)

Languages:

English

Time zone:

UTC
(UTC+0000)

Karma:
[0](https://launchpad.net/~blk-u/%2Bkarma)
[Karma help](/%2Bhelp-registry/karma.html)

Social accounts:
![IRC](/@@/social-irc "IRC")
**bknudson**
 on
**chat.freenode.net**

## [All assigned blueprints](/~blk-u/%2Bspecs?role=assignee) Assigned blueprints

| **[Deprecations Cleanup](https://blueprints.launchpad.net/python-keystoneclient/%2Bspec/deprecations "deprecations")** for **python-keystoneclient**  There is a lot of code that is marked throughout keystoneclient as deprecated, however doesn't necessarily tell users of that fact. Particularly a lot of the session work has now been merged into keystone for a number of cycles. It's time to start being more agressive and popping up warnings when users are using o... | |
| --- | --- |

## [All memberships](https://launchpad.net/~blk-u/%2Bparticipation) Latest memberships

| [Oslo Policy Core](/~oslo-policy-core)  Joined on 2015-01-12 | |
| --- | --- |
| [OpenStack Security SIG](/~openstack-ossg)  Joined on 2013-10-29 | |
| [OpenStack Contributors](/~openstack-cla)  Joined on 2012-12-11 | |
| [Keystone Devs](/~keystone)  Joined on 2012-11-08 | |

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
4d55102
([Get the code!](https://dev.launchpad.net/))



=== Content from translations.launchpad.net_4db0e6d1_20250126_020258.html ===

[Log in / Register](https://translations.launchpad.net/keystone/%2Blogin)

[![](https://launchpadlibrarian.net/359059841/OpenStack_Project_Keystone_mascot%20%281%29.png)](https://launchpad.net/keystone)

## [OpenStack Identity (keystone)](https://launchpad.net/keystone)

* [Overview](https://launchpad.net/keystone)
* [Code](https://code.launchpad.net/keystone)
* [Bugs](https://bugs.launchpad.net/keystone)
* [Blueprints](https://blueprints.launchpad.net/keystone)
* Translations
* [Answers](https://answers.launchpad.net/keystone)

# Translation overview

[Help for translations](https://help.launchpad.net/Translations)

There are no translations for this project.

### Translation details

To see all the translation files that are waiting to be
imported, please look at
[OpenStack Identity (keystone) import queue](/keystone/%2Bimports).

### Permissions

[OpenStack Identity (keystone)](https://launchpad.net/keystone) is translated
with [Open](/%2Bhelp-translations/permissions-policies.html)
permissions.

### All translatable distribution packages

* [keystone source package in Plucky](/ubuntu/plucky/%2Bsources/keystone/%2Btranslations)
* [keystone source package in Oracular](/ubuntu/oracular/%2Bsources/keystone/%2Btranslations)
* [keystone source package in Noble](/ubuntu/noble/%2Bsources/keystone/%2Btranslations)
* [keystone source package in Mantic](/ubuntu/mantic/%2Bsources/keystone/%2Btranslations)
* [keystone source package in Lunar](/ubuntu/lunar/%2Bsources/keystone/%2Btranslations)
* [keystone source package in Kinetic](/ubuntu/kinetic/%2Bsources/keystone/%2Btranslations)
* [keystone source package in Jammy](/ubuntu/jammy/%2Bsources/keystone/%2Btranslations)
* [keystone source package in Impish](/ubuntu/impish/%2Bsources/keystone/%2Btranslations)
* [keystone source package in Hirsute](/ubuntu/hirsute/%2Bsources/keystone/%2Btranslations)
* [keystone source package in Groovy](/ubuntu/groovy/%2Bsources/keystone/%2Btranslations)
* [keystone source package in Focal](/ubuntu/focal/%2Bsources/keystone/%2Btranslations)
* [keystone source package in Eoan](/ubuntu/eoan/%2Bsources/keystone/%2Btranslations)
* [keystone source package in Disco](/ubuntu/disco/%2Bsources/keystone/%2Btranslations)
* [keystone source package in Cosmic](/ubuntu/cosmic/%2Bsources/keystone/%2Btranslations)
* [keystone source package in Bionic](/ubuntu/bionic/%2Bsources/keystone/%2Btranslations)
* [keystone source package in Artful](/ubuntu/artful/%2Bsources/keystone/%2Btranslations)
* [keystone source package in Zesty](/ubuntu/zesty/%2Bsources/keystone/%2Btranslations)
* [keystone source package in Yakkety](/ubuntu/yakkety/%2Bsources/keystone/%2Btranslations)
* [keystone source package in Xenial](/ubuntu/xenial/%2Bsources/keystone/%2Btranslations)
* [keystone source package in Wily](/ubuntu/wily/%2Bsources/keystone/%2Btranslations)
* [keystone source package in Vivid](/ubuntu/vivid/%2Bsources/keystone/%2Btranslations)
* [keystone source package in Utopic](/ubuntu/utopic/%2Bsources/keystone/%2Btranslations)
* [keystone source package in Trusty](/ubuntu/trusty/%2Bsources/keystone/%2Btranslations)
* [keystone source package in Saucy](/ubuntu/saucy/%2Bsources/keystone/%2Btranslations)
* [keystone source package in Raring](/ubuntu/raring/%2Bsources/keystone/%2Btranslations)
* [keystone source package in Quantal](/ubuntu/quantal/%2Bsources/keystone/%2Btranslations)

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
4d55102
([Get the code!](https://dev.launchpad.net/))



=== Content from launchpad.net_358978c3_20250126_020259.html ===

[Log in / Register](https://launchpad.net/~hudson-openstack/%2Blogin)

[![](/@@/person-logo)](https://launchpad.net/~hudson-openstack)

## [OpenStack Infra](https://launchpad.net/~hudson-openstack)

* Overview
* [Code](https://code.launchpad.net/~hudson-openstack)
* [Bugs](https://bugs.launchpad.net/~hudson-openstack)
* [Blueprints](https://blueprints.launchpad.net/~hudson-openstack)
* [Translations](https://translations.launchpad.net/~hudson-openstack)
* [Answers](https://answers.launchpad.net/~hudson-openstack)

* [Related packages](https://launchpad.net/~hudson-openstack/%2Brelated-packages)
* [Related projects](https://launchpad.net/~hudson-openstack/%2Brelated-projects)

## User information

Launchpad Id:
hudson-openstack

Email:
[Log in](%2Blogin) for email information.

Member since:
2010-07-14

[![Icon of Burrow](https://launchpadlibrarian.net/67728214/os14.png "Member of Burrow")](/~burrow)
[![Icon of Citrix OpenStack development team](https://launchpadlibrarian.net/64472709/Citrix%2014.png "Member of Citrix OpenStack development team")](/~citrix-openstack)
[![Icon of (deprecated) OpenStack PPA maintainers](https://launchpadlibrarian.net/87891894/ppa.gif "Member of (deprecated) OpenStack PPA maintainers")](/~openstack-ppa)
[![Icon of Designate Core](https://launchpadlibrarian.net/360468328/designate_14.jpg "Member of Designate Core")](/~designate-core)
[![Icon of Designate Drivers](https://launchpadlibrarian.net/360468067/designate_14.jpg "Member of Designate Drivers")](/~designate-drivers)
[![Icon of MidoNet Bugs](https://launchpadlibrarian.net/228074955/midonet_14x14.png "Member of MidoNet Bugs")](/~midonet-bugs)
[![Icon of Nova Bug Team](https://launchpadlibrarian.net/108832444/bug.gif "Member of Nova Bug Team")](/~nova-bugs)
[![Icon of Nova](https://launchpadlibrarian.net/52560219/os14.png "Member of Nova")](/~nova)
[![Icon of OpenStack Team](https://launchpadlibrarian.net/52313052/os14.png "Member of OpenStack Team")](/~openstack)

Languages:

English

OpenPGP keys:

72571ACC301E6FE900837F5CDF85501232EE128C

SSH keys:

[hudson@hudson](%2Bsshkeys)

[jenkins@vpcslave](%2Bsshkeys)

Time zone:

UTC
(UTC+0000)

Karma:
[6535](https://launchpad.net/~hudson-openstack/%2Bkarma)
[Karma help](/%2Bhelp-registry/karma.html)

## [All memberships](https://launchpad.net/~hudson-openstack/%2Bparticipation) Latest memberships

| [Compute Hyper-V Bugs](/~compute-hyperv-bugs)  Joined on 2019-08-28 | |
| --- | --- |
| [OS-Win Bugs](/~os-win-bugs)  Joined on 2019-08-28 | |
| [Networking Hyper-V Bugs](/~networking-hyperv-bugs)  Joined on 2019-08-28 | |
| [kolla-drivers](/~kolla-drivers)  Joined on 2019-05-20 | |
| [fixtures-git-bugs](/~fixtures-git-bugs)  Joined on 2018-03-25 | |

## [Recent activities](https://launchpad.net/~hudson-openstack/%2Bkarma) Most active in

| [StarlingX](/starlingx) |  |
| --- | --- |
| [kolla-ansible](/kolla-ansible) |  |
| [kolla](/kolla) |  |
| [kayobe](/kayobe) |  |
| [OpenStack Compute (nova)](/nova) |  |

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
4d55102
([Get the code!](https://dev.launchpad.net/))



=== Content from review.openstack.org_81f760f3_20250124_155140.html ===




=== Content from review.openstack.org_1ad0ccbf_20250126_020303.html ===



