=== Content from launchpad.net_9e50c715_20250126_124615.html ===

[Log in / Register](https://launchpad.net/~tristan-cacqueray/%2Blogin)

[![](/@@/person-logo)](https://launchpad.net/~tristan-cacqueray)

## [Tristan Cacqueray](https://launchpad.net/~tristan-cacqueray)

* Overview
* [Code](https://code.launchpad.net/~tristan-cacqueray)
* [Bugs](https://bugs.launchpad.net/~tristan-cacqueray)
* [Blueprints](https://blueprints.launchpad.net/~tristan-cacqueray)
* [Translations](https://translations.launchpad.net/~tristan-cacqueray)
* [Answers](https://answers.launchpad.net/~tristan-cacqueray)

* [Related packages](https://launchpad.net/~tristan-cacqueray/%2Brelated-packages)
* [Related projects](https://launchpad.net/~tristan-cacqueray/%2Brelated-projects)

## User information

Launchpad Id:
tristan-cacqueray

Email:
[Log in](%2Blogin) for email information.

Member since:
2013-10-25

[![Icon of OpenStack Security SIG](https://launchpadlibrarian.net/203991792/os14.png "Member of OpenStack Security SIG")](/~openstack-ossg)

Signed Ubuntu Code of Conduct:
Yes

Languages:

English

OpenPGP keys:

EB103DE8B5E69E631C6FF17922B9A05C925CC5D8

SSH keys:

[localadmin@controller](%2Bsshkeys)

Time zone:

UTC
(UTC+0000)

Karma:
[0](https://launchpad.net/~tristan-cacqueray/%2Bkarma)
[Karma help](/%2Bhelp-registry/karma.html)

Social accounts:
![IRC](/@@/social-irc "IRC")
**tristanC**
 on
**irc.freenode.net**

## [All memberships](https://launchpad.net/~tristan-cacqueray/%2Bparticipation) Latest memberships

| [Swiftsync dev](/~swiftsync-devteam)  Joined on 2014-02-13 | |
| --- | --- |
| [OpenStack Security SIG](/~openstack-ossg)  Joined on 2013-12-12 | |

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
4d55102
([Get the code!](https://dev.launchpad.net/))



=== Content from access.redhat.com_f3632052_20250126_124619.html ===


[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)

  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Product Documentation](https://access.redhat.com/documentation)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)

  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform)
  [All Product Docs](//docs.redhat.com/en/products/)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)

  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Classifications](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Severety Ratings](https://access.redhat.com/security/security-updates/#/cve)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)

  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

 Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

# Severity ratings

## Understanding Red Hat security ratings

Red Hat Product Security rates the severity of security issues found
in Red Hat products using a four-point scale (Low, Moderate,
Important, and Critical), as well as including a separate Common
Vulnerability Scoring System (CVSS) base score. These scoring systems
provide a prioritized risk assessment to help you understand and
schedule upgrades to your systems, enabling informed decisions on the
risk each issue places on your unique environment.

The four-point scale tells you how serious Red Hat considers an issue
to be, helping you judge the severity and determine the most important
updates. The scale takes into account the potential risk based on a technical analysis of the exact flaw and its type. The risk level of a flaw does not change if an exploit or worm is later released for a flaw, or if one is available before the release of a fix. A flaw will only be re-evaluated if new technical details emerge.

The following table provides severity ratings for Red Hat products and systems. For flaws specific to AI models, see [Red Hat security ratings for AI models](https://access.redhat.com/security/ai).

| **Severity ratings** | **Security flaw description** |
| --- | --- |
| **Critical impact** | This rating is given to flaws that could be easily exploited by a remote unauthenticated attacker and lead to system compromise (arbitrary code execution) without requiring user interaction, or easily cause system compromise via inference end points on AI systems. Flaws that require authentication, local or physical access to a system, or an unlikely configuration are not classified as Critical impact. These are the types of vulnerabilities that can be exploited by worms. |
| **Important impact** | This rating is given to flaws that can easily compromise the confidentiality, integrity or availability of resources. These are the types of vulnerabilities that allow local or authenticated users to gain additional privileges, allow unauthenticated remote users to view resources that should otherwise be protected by authentication or other controls, allow authenticated remote users to execute arbitrary code, allow remote users to cause a denial of service, or can cause system compromise via inference end points on AI systems. |
| **Moderate impact** | This rating is given to flaws that may be more difficult to exploit but could still lead to some compromise of the confidentiality, integrity or availability of resources under certain circumstances. It is also given to flaws that could be exploited to cause denial of service-like conditions on AI systems via an inference end point, or allow attackers to steal other users’ data from the AI system without authorization. These are the types of vulnerabilities that could have had a Critical or Important impact but are less easily exploited based on a technical evaluation of the flaw and/or affect unlikely configurations. || **Low impact** | This rating is given to all other issues that may have a security impact. These are the types of vulnerabilities that are believed to require unlikely circumstances to be able to be exploited, or where a successful exploit would give minimal consequences. This includes flaws that are present in a program’s source code but to which no current or theoretically possible, but unproven, exploitation vectors exist or were found during the technical analysis of the flaw. |

A Red Hat security advisory can contain fixes for more than one
vulnerability and for packages for more than one product (such as both
Red Hat Enterprise Linux 7 and 8). Each issue in an advisory has a
severity rating for each product. The overall severity of an advisory
is the highest severity out of all the individual issues, across all
the products the advisory targets. For simplicity, advisories only
show the overall severity. The advisories contain links to the
relevant entries in Red Hat's bug-tracking system, where you can
examine individual severity ratings and additional commentary, as well
as links to the relevant pages in Red Hat’s CVE database.

When a technology—enabled and most likely used by default—completely
blocks the exploitation of a particular vulnerability across all
architectures, we will adjust the severity level. When a technology
reduces the risk of a vulnerability, we may adjust the severity level
and give an explanation of the decision in the bug-tracking  and CVE
database entries.

## Common Vulnerability Scoring System (CVSS)

Common Vulnerability Scoring System (CVSS) base scores provide
additional guidance about a vulnerability, giving a detailed severity
rating by scoring the constant aspects of a vulnerability: Attack
Vector, Attack Complexity, User Interaction, Privileges Required,
Scope, Confidentiality, Integrity, and Availability.

CVSS version 2 base metrics are available for all vulnerabilities from
2009-2016, as well as selected earlier vulnerabilities. In 2016, Red
Hat adopted the CVSS v3 standard, and all vulnerabilities going
forward will use version 3.1 for scoring. These scores are found on
the
[CVE pages](https://access.redhat.com/security/security-updates/#/cve)
(linked from the References section of each Red Hat Security Advisory).

Red Hat does not solely use the CVSS rating to determine the priority
with which flaws are fixed, or to determine the severity rating of the
vulnerability. It is used as a guideline to identify and describe key
metrics of a flaw, however the priority for which flaws are fixed is
determined by the overall severity of the flaw using the
aforementioned four-point scale.  CVSS is meant to help customers
prioritize the order in which they remediate flaws.

### CVSS v3 Base Metrics

The CVSS v3 base metrics group covers the constant aspects of a
vulnerability:

* Attack Vector (AV) - Expresses the "remoteness" of the attack and
  how the vulnerability is exploited.
* Attack Complexity (AC) - Speaks to the difficulty of executing an
  attack and what factors are needed for it to be successful. (Along
  with User Interaction, Attack Complexity was formerly part of the
  Access Complexity metric.).
* User Interaction (UI) - Determines whether the attack requires an
  active human to participate or if the attack can be automated.
* Privileges Required (PR) - Documents the level of user
  authentication required for the attack to be successful. (This
  replaces the former Authentication metric.).
* Scope (S) - Determines whether an attacker can impact a component
  beyond its security scope/authority.
* Confidentiality (C) - Determines whether unauthorized parties can
  access data and to what extent.
* Integrity (I) - Measures the impact to the trustworthiness and
  veracity of data.
* Availability (A) - Refers to the impact to accessibility of data or
  services for authorized users.

A formula translates these measurements into a single, numerical base
score, ranging from 0.0 (no risk) to 10.0 (highest risk). Refer to
[Common Vulnerability Scoring System v3.1: User Guide](https://www.first.org/cvss/user-guide)
for detailed descriptions of the base metrics. It is important to note
that the CVSS base metrics were designed to be used with the other
CVSS metric groups, notably the Temporal and Environmental metrics, to
provide an accurate representation of risk in customer environments.
Alone, the Base metrics offer a shallow view of the vulnerability
itself without accounting for deployment or the environment.

### How Red Hat Uses CVSS v3 Base Metrics

We aim to comply with the CVSS v3 standard when assigning base scores,
and Red Hat uses base metrics that reflect how a vulnerability affects
our products specifically.  In addition, we do not use the Qualitative
Severity Rating Scale in the CVSS v3.1 User Guide to rate severity,
and our severity ratings are always based on the aforementioned
four-point scale.  In some circumstances, it may not be obvious why a
flaw received a particular score. The following are some common
vulnerability types with our interpretation and typical scoring:

#### Libraries

It is not always possible to know how third-party applications use
libraries, making it difficult to give accurate CVSS v3 base metrics
for flaws in system libraries. When rating these flaws, we take into
account the way the library is used by applications that we ship, and
also look at other popular software that may use the library in a way
that would cause an issue to be of higher severity, and adjust the
score appropriately.

#### Other Common Scores

Flaws where a local, unprivileged user can cause a kernel to crash
(denial of service) typically score 5.5 (for example,
[CVE-2019-9213](https://access.redhat.com/security/cve/CVE-2019-9213)).

Flaws that allow a local, unprivileged user to escalate their
privileges to root typically score 7.8 (for example,
[CVE-2019-18634](https://access.redhat.com/security/cve/CVE-2019-18634)).

Cross-site scripting flaws are generally scored as having Low impact
to Integrity and/or Confidentiality, with no impact to Availability,
in line with scoring from other vendors and NVD. A typical score for
these flaws is 6.1 (for example,
[CVE-2020-11023](https://access.redhat.com/security/cve/CVE-2020-11023)).

### Base Score Variations Across Products

It is common for a given CVE-named vulnerability to have several
different CVSS base metrics, depending on the product, version, and
architecture. Examples of this include:

* A vulnerability that only affected some architectures. For example,
  [CVE-2019-15031](https://access.redhat.com/security/cve/CVE-2019-15031)
  only affected PowerPC.
* A vulnerability that is mitigated by source code protection
  mechanisms on some platforms. For example,
  [CVE-2018-1125](https://access.redhat.com/security/cve/CVE-2018-1125)
  could have led to arbitrary code execution on Red Hat Enterprise
  Linux, but it is only a denial of service because it was compiled
  with FORTIFY protections.
* A vulnerability that affected more than one product.  For example,
  [CVE-2020-14060](https://access.redhat.com/security/cve/CVE-2020-14060)
  affected a component in both OpenShift and OpenStack.  The severity
  to OpenStack was lower (Low) as compared to OpenShift (Moderate)
  based on its usage; the overall vulnerability itself was rated
  Important.

If CVSS v3 base scores are significantly different across products, we
note that separately wherever possible. If we do not split the score,
we report the metric that gives the highest CVSS v3 base score (the
worst-case outcome).

### Differences Between NVD and Red Hat Scores

For open source software shipped by multiple vendors, the CVSS base
scores may vary for each vendor's version, depending on the version
they ship, how they ship it, the platform, and even how the software
is compiled. This makes scoring vulnerabilities difficult for
third-party vulnerability databases, such as NVD, who can give only a
single CVSS base score to each vulnerability, or when comparing to
other vendors who score based on the characteristics of use in their
own products. See the
[National Vulnerability Database](https://nvd.nist.gov/vuln-metrics/cvss)
for more information regarding NVD security ratings.

These differences can cause the scores to vary widely. Other reasons
may include how the source code was compiled with certain compiler
flags or hardening technologies that reduce or eliminate the security
severity of a flaw, or how the software is used within the product.
Software running standalone may suffer from a flaw, but its use within
a product may preclude the vulnerable code from ever being used in a
way that could be exploited.

For example, NVD may rate a flaw in a particular service as having
High Impact on the CVSS CIA Triad (Confidentiality, Integrity,
Availability) where the service in question is typically run as the
root user with full privileges on a system. However, in a Red Hat
product, the service may be specifically configured to run as a
dedicated non-privileged user running entirely in a SELinux sandbox,
greatly reducing the immediate impact from compromise, resulting in
Low impact.

For these reasons, we recommend that, whenever possible, you use a
CVSS base score provided by Red Hat in preference to a score from a
third party. Please
[let us know](https://access.redhat.com/site/security/team/contact/)
if you believe we have given an incorrect CVSS v3 base score for a
particular vulnerability. We are happy to discuss and update if
needed.

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com)

### Help

* [Contact Customer Portal](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Systems Status

### About

* [Red Hat Subscription Value](https://access.redhat.com/subscription-value)
* [About Red Hat](https://www.redhat.com/about/)
* [Red Hat Jobs](http://jobs.redhat.com)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

Copyright © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)

×
### Formatting Tips

Here are the common uses of Markdown.

Code blocks
```
~~~
Code surrounded in tildes is easier to read
~~~
```

Links/URLs`[Red Hat Customer Portal](https://access.redhat.com)`

[Learn more](/help/markdown)
Close



=== Content from rhn.redhat.com_ade71479_20250125_232555.html ===

Note: Our personalized web services require that your browser be enabled for JavaScript and cookies

[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

[Red Hat Product Errata](/errata)
RHSA-2014:0409 - Security Advisory

Issued:
2014-04-17
Updated:
2014-04-17
# RHSA-2014:0409 - Security Advisory

* [Overview](#overview)
* [Updated Packages](#packages)

## Synopsis

Important: python-keystoneclient security update

## Type/Severity

Security Advisory: Important

## Red Hat Insights patch analysis

Identify and remediate systems affected by this advisory.

[View affected systems](https://console.redhat.com/insights/patch/advisories/RHSA-2014%3A0409)

## Topic

Updated python-keystoneclient packages that fix one security issue are now
available for Red Hat Storage 2.1.

The Red Hat Security Response Team has rated this update as having
Important security impact. A Common Vulnerability Scoring System (CVSS)
base score, which gives a detailed severity rating, is available from the
CVE link in the References section.

## Description

Python-keystoneclient is a client library and a command line utility for
interacting with the OpenStack Identity API. The OpenStack Identity
auth\_token middleware component handles the authentication of tokens with
keystone. The gluster-swift component, provided by Red Hat Storage,
requires the auth\_token middleware.

When using the auth\_token middleware with the memcached token cache
enabled, a token for a different identity could be returned. An
authenticated user could use this flaw to escalate their privileges by
making repeated requests that could eventually allow the user to acquire
the administrator's identity. Note that only OpenStack Identity setups
using auth\_token with memcached were affected. (CVE-2014-0105)

Red Hat would like to thank the OpenStack project for reporting this issue.
Upstream acknowledges Kieran Spear from the University of Melbourne as the
original reporter.

The python-keystoneclient package has been upgraded to version 0.7.1.
Additionally, the python-six package has been upgraded to version 1.5.2, as
required by the updated python-keystoneclient package.

All python-keystoneclient users are advised to upgrade to these updated
packages, which correct this issue. After installing this update, the
gluster-swift proxy, or any other services using auth\_token, must be
restarted for this update to take effect.

## Solution

Before applying this update, make sure all previously released errata
relevant to your system have been applied.

This update is available via the Red Hat Network. Details on how to
use the Red Hat Network to apply this update are available at
<https://access.redhat.com/site/articles/11258>

## Affected Products

* Red Hat Gluster Storage Server for On-premise 2.1 x86\_64
* Red Hat Storage for Public Cloud (via RHUI) 2.1 x86\_64

## Fixes

* [BZ - 1082165](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=1082165)
  - CVE-2014-0105 python-keystoneclient: Potential context confusion in Keystone middleware

## CVEs

* [CVE-2014-0105](https://www.redhat.com/security/data/cve/CVE-2014-0105.html)

## References

* <https://access.redhat.com/security/updates/classification/#important>

**Note:**
More recent versions of these packages may be available.
Click a package name for more details.
## Red Hat Gluster Storage Server for On-premise 2.1

| SRPM | |
| --- | --- |
| python-keystoneclient-0.7.1-2.el6ost.src.rpm | SHA-256: 36247d97acd70651952a6cc45c94e63a78e1661c39cf8acbaed18ff2c2778064 |
| python-six-1.5.2-1.el6.src.rpm | SHA-256: d6073321575495897426e34da7b3c953f207babef37776341867503578a1b771 |
| x86\_64 | |
| python-keystoneclient-0.7.1-2.el6ost.noarch.rpm | SHA-256: 03e48e9ff8ece01b7b8ca7def340c55527283b63f4bacb56fbf0c9ebf6956e4b |
| python-keystoneclient-doc-0.7.1-2.el6ost.noarch.rpm | SHA-256: bfb9cfd2b9b87eac1a35abd3a22e123107e253d01336c27eca02816fa71fa1f2 |
| python-six-1.5.2-1.el6.noarch.rpm | SHA-256: d20cb9360975c627aa6792e11568f591449bf35a8c4e1ee6bc0f30bb302ceadd |

## Red Hat Storage for Public Cloud (via RHUI) 2.1

| SRPM | |
| --- | --- |
| python-keystoneclient-0.7.1-2.el6ost.src.rpm | SHA-256: 36247d97acd70651952a6cc45c94e63a78e1661c39cf8acbaed18ff2c2778064 |
| python-six-1.5.2-1.el6.src.rpm | SHA-256: d6073321575495897426e34da7b3c953f207babef37776341867503578a1b771 |
| x86\_64 | |
| python-keystoneclient-0.7.1-2.el6ost.noarch.rpm | SHA-256: 03e48e9ff8ece01b7b8ca7def340c55527283b63f4bacb56fbf0c9ebf6956e4b |
| python-keystoneclient-doc-0.7.1-2.el6ost.noarch.rpm | SHA-256: bfb9cfd2b9b87eac1a35abd3a22e123107e253d01336c27eca02816fa71fa1f2 |
| python-six-1.5.2-1.el6.noarch.rpm | SHA-256: d20cb9360975c627aa6792e11568f591449bf35a8c4e1ee6bc0f30bb302ceadd |

The Red Hat security contact is secalert@redhat.com.
More contact details at <https://access.redhat.com/security/team/contact/>.

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from bugzilla.redhat.com_98774739_20250126_124617.html ===


* Login
  + Log in using an SSO provider:- [Fedora Account System](saml2_login.cgi?idp=Fedora%20Account%20System&target=show_bug.cgi%3Fid%3D1082165)
    - [Red Hat Associate](saml2_login.cgi?idp=Red%20Hat%20Associate&target=show_bug.cgi%3Fid%3D1082165)
    - [Red Hat Customer](saml2_login.cgi?idp=Red%20Hat%20Customer&target=show_bug.cgi%3Fid%3D1082165)+ Login using a Red Hat Bugzilla account
  + Forgot Password
  + [Create an Account](createaccount.cgi)

Red Hat Bugzilla – Bug 1082165

* [Home](./)
* [New](enter_bug.cgi)
* Search
  + [Simple Search](query.cgi?format=specific)
  + [Advanced Search](query.cgi?format=advanced)
* My Links
  + [Browse](describecomponents.cgi)
  + [Requests](request.cgi)
  + Reports
  + Current State
    - [Search](query.cgi)
    - [Tabular reports](query.cgi?format=report-table)
    - [Graphical reports](query.cgi?format=report-graph)
    - [Duplicates](duplicates.cgi)
  + Other Reports
    - [User Changes](https://bugzilla.redhat.com/page.cgi?id=user_activity.html)
  + Plotly Reports
    - [Bug Status](https://bugzilla.redhat.com/page.cgi?id=bug_status.html)
    - [Bug Severity](https://bugzilla.redhat.com/page.cgi?id=bug_severity.html)
    - [Non-Defaults](https://bugzilla.redhat.com/page.cgi?id=non_defaults.html)
* [Product Dashboard](page.cgi?id=productdashboard.html)

- Help
  * [Page Help!](docs/en/html/using/understanding.html)
  * [Bug Writing Guidelines](page.cgi?id=bug-writing.html)
  * [What's new](page.cgi?id=whats-new.html)
  * [Browser Support Policy](https://access.redhat.com/help/browsers)
  * [5.0.4.rh103 Release notes](page.cgi?id=release-notes.html)
  * [FAQ](page.cgi?id=faq.html)
  * [Guides index](docs/en/html/index.html)
  * [User guide](docs/en/html/using/index.html)
  * [Web Services](docs/en/html/integrating/api/Bugzilla/WebService/Bug.html)
  * [Contact](page.cgi?id=redhat/contact.html)
  * [Legal](page.cgi?id=terms-conditions.html)
- [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")

This site requires JavaScript to be enabled to function correctly, please enable it.

[**Bug 1082165**](show_bug.cgi?id=1082165)
(CVE-2014-0105)
- [CVE-2014-0105](https://access.redhat.com/security/cve/CVE-2014-0105) python-keystoneclient: Potential context confusion in Keystone middleware

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
CVE-2014-0105 python-keystoneclient: Potential context confusion in Keystone ...

| | [Keywords](describekeywords.cgi): | Security | | --- | --- | | [Status](page.cgi?id=fields.html#bug_status): | CLOSED ERRATA | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | CVE-2014-0105 | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components. Select a Classification to narrow down this list.") | Security Response | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Other | | [Component:](describecomponents.cgi?product=Security Response "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | vulnerability | | [Sub Component:](page.cgi?id=fields.html#rh_sub_components "The sub component of a specific component") | --- | | [Version:](page.cgi?id=fields.html#version "The version field defines the version of the software the bug was found in.") | unspecified | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | All | | [OS:](page.cgi?id=fields.html#op_sys "The operating system the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Linux | | [Priority:](page.cgi?id=fields.html#priority) | high | | [Severity:](page.cgi?id=fields.html#bug_severity) | high | | [Target Milestone:](page.cgi?id=fields.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | --- | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Red Hat Product Security | | [QA Contact:](page.cgi?id=fields.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") |  | | [Docs Contact:](page.cgi?id=fields.html#docs_contact "The person responsible for documenting once the bug has been resolved.") |  | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | [Depends On:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") | [1082172](show_bug.cgi?id=1082172 "CLOSED ERRATA - CVE-2014-0105 python-keystoneclient: Potential context confusion in Keystone middleware [fedora-all]") [1082173](show_bug.cgi?id=1082173 "CLOSED CANTFIX - CVE-2014-0105 python-keystoneclient: Potential context confusion in Keystone middleware [epel-6]") [1083754](show_bug.cgi?id=1083754) [1083755](show_bug.cgi?id=1083755) [1087172](show_bug.cgi?id=1087172) [1087181](show_bug.cgi?id=1087181) | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") | [1082166](show_bug.cgi?id=1082166) | | TreeView+ | [depends on](buglist.cgi?bug_id=1082165&bug_id_type=anddependson&format=tvp) / [blocked](buglist.cgi?bug_id=1082165&bug_id_type=andblocked&format=tvp&tvp_dir=blocked) |  | |  | | [Reported:](page.cgi?id=fields.html#reporter) | 2014-03-28 21:11 UTC by Vincent Danen | | --- | --- | | [Modified:](page.cgi?id=fields.html#modified) | 2023-05-12 03:05 UTC ([History](show_activity.cgi?id=1082165)) | | [CC List:](page.cgi?id=fields.html#cclist) | 26 users (show)  aavati abaron aortega apevec apevec ayoung chrisw dallan gkotton gmollett Jan.van.Eldik jose.castro.leon jruzicka lhh markmc nlevinki rbryant rfortier rhos-maint rhs-bugs sclewis ssaha vagarwal vbellur vdanen yeylon | | Fixed In Version: | python-keystone-client 0.7.0 | | | Doc Type: | Bug Fix | | | Doc Text: |  | | | Clone Of: |  | | | Environment: |  | | | Last Closed: | 2014-05-09 21:19:39 UTC | | | Embargoed: |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | [(Terms of Use)](page.cgi?id=terms-conditions.html) | | | --- | --- | --- | |  | | |    Links | System | ID | Private | Priority | Status | Summary | Last Updated | | OpenStack gerrit | [81078](https://review.opendev.org/81078) | 0 | None | None | None | Never | | Red Hat Product Errata | [RHSA-2014:0382](https://access.redhat.com/errata/RHSA-2014%3A0382) | 0 | normal | SHIPPED\_LIVE | Important: python-keystoneclient security update | 2014-04-09 23:03:24 UTC | | Red Hat Product Errata | [RHSA-2014:0409](https://access.redhat.com/errata/RHSA-2014%3A0409) | 0 | normal | SHIPPED\_LIVE | Important: python-keystoneclient security update | 2014-04-17 05:41:42 UTC | | Red Hat Product Errata | [RHSA-2014:0442](https://access.redhat.com/errata/RHSA-2014%3A0442) | 0 | normal | SHIPPED\_LIVE | Important: python-keystoneclient security update | 2014-04-29 00:06:17 UTC | |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=1082165#c0)  Vincent Danen    2014-03-28 21:11:47 UTC  ``` Kieran Spear from the University of Melbourne reported [1] a vulnerability in Keystone auth_token middleware (shipped in python-keystoneclient). By doing repeated requests, with sufficient load on the target system, an authenticated user may in certain situations assume another authenticated user's complete identity and multi-tenant authorizations, potentially resulting in a privilege escalation. Note that it is related to a bad interaction between eventlet and python-memcached that should be avoided if the calling process already monkey-patches "thread" to use eventlet. Only keystone middleware setups using auth_token with memcache are vulnerable.  python-keystoneclient fix (included in 0.7.0 release): <https://review.openstack.org/81078>  [1] <https://bugs.launchpad.net/bugs/1282865>   Acknowledgements:  Red Hat would like to thank the OpenStack project for reporting this issue. Upstream acknowledges Kieran Spear from the University of Melbourne as the original reporter.   ```  [Comment 1](show_bug.cgi?id=1082165#c1)  Vincent Danen    2014-03-28 21:51:08 UTC  ```  Created python-keystoneclient tracking bugs for this issue:  Affects: fedora-all [[bug 1082172](show_bug.cgi?id=1082172 "CLOSED ERRATA - CVE-2014-0105 python-keystoneclient: Potential context confusion in Keystone middleware [fedora-all]")] Affects: epel-6 [[bug 1082173](show_bug.cgi?id=1082173 "CLOSED CANTFIX - CVE-2014-0105 python-keystoneclient: Potential context confusion in Keystone middleware [epel-6]")]   ```  [Comment 5](show_bug.cgi?id=1082165#c5)  errata-xmlrpc    2014-04-09 17:31:01 UTC  ``` This issue has been addressed in following products:    OpenStack 4 for RHEL 6  Via RHSA-2014:0382 <https://rhn.redhat.com/errata/RHSA-2014-0382.html>   ```  [Comment 9](show_bug.cgi?id=1082165#c9)  errata-xmlrpc    2014-04-17 01:42:01 UTC  ``` This issue has been addressed in following products:    Red Hat Storage 2.1  Via RHSA-2014:0409 <https://rhn.redhat.com/errata/RHSA-2014-0409.html>   ```  [Comment 10](show_bug.cgi?id=1082165#c10)  errata-xmlrpc    2014-04-28 20:06:31 UTC  ``` This issue has been addressed in following products:    OpenStack 3 for RHEL 6  Via RHSA-2014:0442 <https://rhn.redhat.com/errata/RHSA-2014-0442.html>   ``` |  |
| --- | --- |

---

| Note You need to [log in](show_bug.cgi?id=1082165&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. |
| --- |

---

[Privacy](page.cgi?id=redhat/privacy.html)
[Contact](page.cgi?id=redhat/contact.html)
[FAQ](page.cgi?id=faq.html)
[Legal](page.cgi?id=terms-conditions.html)



=== Content from bugs.launchpad.net_8b2f1193_20250125_232602.html ===

[Log in / Register](https://bugs.launchpad.net/python-keystoneclient/%2Bbug/1282865/%2Blogin)

[![](https://launchpadlibrarian.net/109253197/os64.png)](https://launchpad.net/python-keystoneclient)

## [python-keystoneclient](https://launchpad.net/python-keystoneclient)

* [Overview](https://launchpad.net/python-keystoneclient)
* [Code](https://code.launchpad.net/python-keystoneclient)
* [Bugs](https://bugs.launchpad.net/python-keystoneclient)
* [Blueprints](https://blueprints.launchpad.net/python-keystoneclient)
* [Translations](https://translations.launchpad.net/python-keystoneclient)
* [Answers](https://answers.launchpad.net/python-keystoneclient)

# [OSSA 2014-007] Keystone middleware may confuse contexts (CVE-2014-0105)

Bug #1282865 reported by
[Kieran Spear](https://launchpad.net/~kspear)
on 2014-02-21

[274](/%2Bhelp-bugs/bug-heat.html)

This bug affects 1 person

| Affects | | Status | Importance | Assigned to | Milestone |
| --- | --- | --- | --- | --- | --- |
|  | [OpenStack Security Advisory](https://bugs.launchpad.net/ossa) | Fix Released | Critical | [Tristan Cacqueray](https://launchpad.net/~tristan-cacqueray) |  |
|  | [python-keystoneclient](https://bugs.launchpad.net/python-keystoneclient) | Fix Released | Critical | [Dolph Mathews](https://launchpad.net/~dolph) | [python-keystoneclient 0.7.0](https://launchpad.net/python-keystoneclient/%2Bmilestone/0.7.0) |

### Bug Description

tl;dr: Occasionally a request from a regular user appears to Glance-registry as an admin user:

We have a server with 12 glance-registry processes running, with auth\_token middleware handling authentication.

If I run a python script that sets up Glanceclient:

glance = glanceclient.Client('1', token=xxx)

and makes the following call over and over:

glance.images.get(<private\_image\_id\_from\_another\_tenant>)

Most calls 404 because the calling tenant doesn't have access to the image. Eventually though, an image get request will succeed.

When this happens, glance-registry logs something like:

INFO glance.registry.api.v1.images [9b88678e-f606-4016-a39a-bb1ac150c029 2d474f5d54e24a56978c0332df1c36d6 e183df4e2bd045f7a9cbdb37a99929a5] Successfully retrieved image 32101b45-461e-452c-b065-4e07391c806e

User 2d474f5d54e24a56978c0332df1c36d6 and tenant e183df4e2bd045f7a9cbdb37a99929a5 are completely unrelated to the user's credentials in the python script I'm running. They're actually the user/tenant of our ceilometer admin user. Ceilometer is doing a few image GET requests per second.

The reverse of this also happens. Occasionally a request from ceilometer will assume the identity of the user in my script. Glance-registry logs the request as if it had come from my user, and denies the image GET because my user does not have the appropriate permission for the image ceilometer was trying to query.

If I comment out the "memcached\_servers" line from our log file, the problem goes away. This makes me suspect that something is going on in auth\_token middleware. When I watch the memcache entry for the token used by my script, the token data never appears to change.

What on earth is going on here? :)

## CVE References

* [2014-0105](/bugs/cve/2014-0105 "The auth_token middleware in the Open...")

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Kieran Spear (kspear)](https://launchpad.net/~kspear) wrote on 2014-02-21: |  |  | [#1](/python-keystoneclient/%2Bbug/1282865/comments/1) |
| --- | --- | --- | --- |

auth\_token middleware thinks it is retrieving the user's token from memcache, but ends up returning the token data for the admin user:

2014-02-21 16:41:56.868 28193 DEBUG keystoneclient.middleware.auth\_token [-] Returning cached token 46b4e15e0bf1bef6655dbee733867972. Token data:

{u'access': {u'token': {u'issued\_at': u'2014-02-21T05:41:51.816330', u'expires': u'2014-02-21T11:41:51Z', u'id': u'placeholder', u'tenant': {u'id': u'e4eee8dbc16a49dcbc76edac96674e96', u'enabled': True, u'description': None, u'name': u'admin'}}

46b4e15e0bf1bef6655dbee733867972 is the hash of the user's PKI token. But the token data is from another user's token!

auth\_token middleware thinks it is retrieving the user's token from memcache, but ends up returning the token data for the admin user:
2014-02-21 16:41:56.868 28193 DEBUG keystoneclient.middleware.auth\_token [-] Returning cached token 46b4e15e0bf1bef6655dbee733867972. Token data:
{u'access': {u'token': {u'issued\_at': u'2014-02-21T05:41:51.816330', u'expires': u'2014-02-21T11:41:51Z', u'id': u'placeholder', u'tenant': {u'id': u'e4eee8dbc16a49dcbc76edac96674e96', u'enabled': True, u'description': None, u'name': u'admin'}}
46b4e15e0bf1bef6655dbee733867972 is the hash of the user's PKI token. But the token data is from another user's token!

| **affects**: | glance → python-keystoneclient |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Kieran Spear (kspear)](https://launchpad.net/~kspear) wrote on 2014-02-21: |  |  | [#2](/python-keystoneclient/%2Bbug/1282865/comments/2) |
| --- | --- | --- | --- |

Looks like eventlet doesn't play nicely with python-memcache. Monkey patching 'thread' in cmd/registry.py fixes this.

Looks like eventlet doesn't play nicely with python-memcache. Monkey patching 'thread' in cmd/registry.py fixes this.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2014-02-21:  [**Re: Keystone middleware may confuse contexts**](/python-keystoneclient/%2Bbug/1282865/comments/3) |  |  | [#3](/python-keystoneclient/%2Bbug/1282865/comments/3) |
| --- | --- | --- | --- |

Looks like it's not Glance-specific at all.

Looks like it's not Glance-specific at all.

| **summary**: | - Glance-registry context leak+ Keystone middleware may confuse contexts |
| --- | --- |
| Changed in glance: | |
| **status**: | New → Invalid |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2014-02-21: |  |  | [#4](/python-keystoneclient/%2Bbug/1282865/comments/4) |
| --- | --- | --- | --- |

It's a bit random as an attack vector, but I suspect you can still trigger it using load, so probably needs an OSSA

It's a bit random as an attack vector, but I suspect you can still trigger it using load, so probably needs an OSSA

| Changed in ossa: | |
| --- | --- |
| **status**: | New → Incomplete |

[Dolph Mathews (dolph)](https://launchpad.net/~dolph)
on 2014-02-21

| Changed in python-keystoneclient: | |
| --- | --- |
| **importance**: | Undecided → Critical |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Dolph Mathews (dolph)](https://launchpad.net/~dolph) wrote on 2014-02-21: |  |  | [#5](/python-keystoneclient/%2Bbug/1282865/comments/5) |
| --- | --- | --- | --- |

I'm able to reproduce this consistently, and it does appear to be entirely dependent on eventlet monkey patching "thread". In my test, 100,000 requests through auth\_token split between two users with different authorization, their authorization gets swapped about 0.2% of the time.

With sufficient load, python-memcached enabled in auth\_token, and an unpatched thread module, eventlet produces this failure:

Traceback (most recent call last):

  File ".../lib/python2.7/site-packages/eventlet/wsgi.py", line 414, in handle\_one\_response

    write('')

  File ".../lib/python2.7/site-packages/eventlet/wsgi.py", line 354, in write

    \_writelines(towrite)

  File ".../python/2.7.6/Frameworks/Python.framework/Versions/2.7/lib/python2.7/socket.py", line 334, in writelines

    self.flush()

  File ".../python/2.7.6/Frameworks/Python.framework/Versions/2.7/lib/python2.7/socket.py", line 303, in flush

    self.\_sock.sendall(view[write\_offset:write\_offset+buffer\_size])

  File ".../lib/python2.7/site-packages/eventlet/greenio.py", line 309, in sendall

    tail = self.send(data, flags)

  File ".../lib/python2.7/site-packages/eventlet/greenio.py", line 295, in send

    total\_sent += fd.send(data[total\_sent:], flags)

error: [Errno 32] Broken pipe

And python-memcached warns about unexpected responses from memcached:

MemCached: while expecting 'STORED', got unexpected response 'VALUE tokens/acfaaff23f1576cb8485a797beb60ff4 0 1282'

  MemCached: while expecting 'STORED', got unexpected response 'END'

Given that auth\_token does not depend on eventlet itself, but instead can be run by eventlet in another service, then all services depending on eventlet and relying on auth\_token should be the ones to monkeypatch thread. That said, monkeypatching thread in keystoneclient/openstack/common/memorycache.py appears to resolve the problem as well.

Glance stable/havana appears to be affected:

<https://github.com/openstack/glance/blob/stable/havana/glance/cmd/registry.py#L30>

Glance master does not appear to be affected:

<https://github.com/openstack/glance/blob/master/glance/cmd/registry.py#L29>

I'm able to reproduce this consistently, and it does appear to be entirely dependent on eventlet monkey patching "thread". In my test, 100,000 requests through auth\_token split between two users with different authorization, their authorization gets swapped about 0.2% of the time.
With sufficient load, python-memcached enabled in auth\_token, and an unpatched thread module, eventlet produces this failure:
Traceback (most recent call last):
File ".../lib/python2.7/site-packages/eventlet/wsgi.py", line 414, in handle\_one\_response
write('')
File ".../lib/python2.7/site-packages/eventlet/wsgi.py", line 354, in write
\_writelines(towrite)
File ".../python/2.7.6/Frameworks/Python.framework/Versions/2.7/lib/python2.7/socket.py", line 334, in writelines
self.flush()
File ".../python/2.7.6/Frameworks/Python.framework/Versions/2.7/lib/python2.7/socket.py", line 303, in flush
self.\_sock.sendall(view[write\_offset:write\_offset+buffer\_size])
File ".../lib/python2.7/site-packages/eventlet/greenio.py", line 309, in sendall
tail = self.send(data, flags)
File ".../lib/python2.7/site-packages/eventlet/greenio.py", line 295, in send
total\_sent += fd.send(data[total\_sent:], flags)
error: [Errno 32] Broken pipe
And python-memcached warns about unexpected responses from memcached:
MemCached: while expecting 'STORED', got unexpected response 'VALUE tokens/acfaaff23f1576cb8485a797beb60ff4 0 1282'
MemCached: while expecting 'STORED', got unexpected response 'END'
Given that auth\_token does not depend on eventlet itself, but instead can be run by eventlet in another service, then all services depending on eventlet and relying on auth\_token should be the ones to monkeypatch thread. That said, monkeypatching thread in keystoneclient/openstack/common/memorycache.py appears to resolve the problem as well.
Glance stable/havana appears to be affected:
https://github.com/openstack/glance/blob/stable/havana/glance/cmd/registry.py#L30
Glance master does not appear to be affected:
https://github.com/openstack/glance/blob/master/glance/cmd/registry.py#L29

| Changed in python-keystoneclient: | |
| --- | --- |
| **status**: | New → Confirmed |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Dolph Mathews (dolph)](https://launchpad.net/~dolph) wrote on 2014-02-21: |  |  | [#6](/python-keystoneclient/%2Bbug/1282865/comments/6) |
| --- | --- | --- | --- |

* [keystoneclient-repro-bug-1282865.diff](https://bugs.launchpad.net/python-keystoneclient/%2Bbug/1282865/%2Battachment/3990345/%2Bfiles/keystoneclient-repro-bug-1282865.diff)
  [Edit](/python-keystoneclient/%2Bbug/1282865/%2Battachment/3990345)
  (1.1 KiB,
  text/plain)

To reproduce the issue in isolation, I wrote a simple echo service to run behind auth\_token which can inform the client if the service's perceived tenancy does not reflect the user's expectation. <https://review.openstack.org/#/c/75529/>

Patchset 1 of the above review depends on wsgiref from stdlib instead of eventlet. `keystoneclient-repro-[bug-1282865](/bugs/1282865).diff` modifies that patchset to use eventlet, and monkeypatches with eventlet similarly to how glance stable/havana does (without also monkeypatching thread).

To reproduce the issue in isolation, I wrote a simple echo service to run behind auth\_token which can inform the client if the service's perceived tenancy does not reflect the user's expectation. https://review.openstack.org/#/c/75529/
Patchset 1 of the above review depends on wsgiref from stdlib instead of eventlet. `keystoneclient-repro-bug-1282865.diff` modifies that patchset to use eventlet, and monkeypatches with eventlet similarly to how glance stable/havana does (without also monkeypatching thread).

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Dolph Mathews (dolph)](https://launchpad.net/~dolph) wrote on 2014-02-22: |  |  | [#7](/python-keystoneclient/%2Bbug/1282865/comments/7) |
| --- | --- | --- | --- |

* [repro\_bug\_1282865.py](https://bugs.launchpad.net/python-keystoneclient/%2Bbug/1282865/%2Battachment/3990374/%2Bfiles/repro_bug_1282865.py)
  [Edit](/python-keystoneclient/%2Bbug/1282865/%2Battachment/3990374)
  (3.6 KiB,
  text/x-python)

This attachment demonstrates the issue by acting as a API client to bootstrap some data in keystone, generate valid tokens and produce load against a service protected by auth\_token.

This attachment demonstrates the issue by acting as a API client to bootstrap some data in keystone, generate valid tokens and produce load against a service protected by auth\_token.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Dolph Mathews (dolph)](https://launchpad.net/~dolph) wrote on 2014-02-22: |  |  | [#8](/python-keystoneclient/%2Bbug/1282865/comments/8) |
| --- | --- | --- | --- |

* [keystoneclient-fix-bug-1282865.diff](https://bugs.launchpad.net/python-keystoneclient/%2Bbug/1282865/%2Battachment/3990378/%2Bfiles/keystoneclient-fix-bug-1282865.diff)
  [Edit](/python-keystoneclient/%2Bbug/1282865/%2Battachment/3990378)
  (982 bytes,
  text/plain)

This avoids the issue in keystoneclient by patching keystoneclient.openstack.common.memorycache (oslo)

This avoids the issue in keystoneclient by patching keystoneclient.openstack.common.memorycache (oslo)

[Dolph Mathews (dolph)](https://launchpad.net/~dolph)
on 2014-02-22

| Changed in python-keystoneclient: | |
| --- | --- |
| **assignee**: | nobody → Dolph Mathews (dolph) |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2014-02-24: |  |  | [#9](/python-keystoneclient/%2Bbug/1282865/comments/9) |
| --- | --- | --- | --- |

@Dolph: nice work. I wa

@Dolph: nice work. I wa

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2014-02-24: |  |  | [#10](/python-keystoneclient/%2Bbug/1282865/comments/10) |
| --- | --- | --- | --- |

(damn LP)

...s wondering if that could not explain the two reports we had in the past of context confusion ("Tenant A is seeing the VNC Consoles of Tenant B!")

(damn LP)
...s wondering if that could not explain the two reports we had in the past of context confusion ("Tenant A is seeing the VNC Consoles of Tenant B!")

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2014-02-24: |  |  | [#11](/python-keystoneclient/%2Bbug/1282865/comments/11) |
| --- | --- | --- | --- |

I am a bit confused as to the extent of the issue.

IIUC fixing it in python-keystoneclient is enough to cover all cases -- and then \*some\* middleware consumers that already patched eventlet.thread might be safe already (like Glance master).

Kieran: are you running Glance master or havana ?

I am a bit confused as to the extent of the issue.
IIUC fixing it in python-keystoneclient is enough to cover all cases -- and then \*some\* middleware consumers that already patched eventlet.thread might be safe already (like Glance master).
Kieran: are you running Glance master or havana ?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Dolph Mathews (dolph)](https://launchpad.net/~dolph) wrote on 2014-02-24: |  |  | [#12](/python-keystoneclient/%2Bbug/1282865/comments/12) |
| --- | --- | --- | --- |

A single fix in python-keystoneclient would be sufficient to protect any deployments carrying the patch, but I'm not familiar enough with the vulnerability management & packaging process for clients to make a recommendation against patching any affected services as well.

A single fix in python-keystoneclient would be sufficient to protect any deployments carrying the patch, but I'm not familiar enough with the vulnerability management & packaging process for clients to make a recommendation against patching any affected services as well.

[Thierry Carrez (ttx)](https://launchpad.net/~ttx)
on 2014-02-24

| Changed in ossa: | |
| --- | --- |
| **status**: | Incomplete → Confirmed |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2014-02-24: |  |  | [#13](/python-keystoneclient/%2Bbug/1282865/comments/13) |
| --- | --- | --- | --- |

I assumed any authenticated requests could results in context swap.

Memcached\_server appeared in 0.2.3 (git grep memcached\_servers 0.2.2 0.2.3).

@Kieran: Please correct me if I'm wrong about the University of Melbourne credit.

Draft impact description #1 -

Title: Privilege escalation in auth\_token middleware

Reporter: Kieran Spear (University of Melbourne)

Products: python-keystoneclient

Versions: 0.2.3 version up to 0.6.0

Description:

Kieran Spear from the University of Melbourne reported a vulnerability in python-keystoneclient auth\_token middleware. By doing repeated authenticated requests, with sufficient load on the target system, an authenticated user can inherit another authenticated user's role resulting in a privilege escalation. Note that it is related to a bad interaction between auth\_token and eventlet that is fixed if the process used eventlet thread monkey patching. Only setups using auth\_token with memcache are vulnerable.

I assumed any authenticated requests could results in context swap.
Memcached\_server appeared in 0.2.3 (git grep memcached\_servers 0.2.2 0.2.3).
@Kieran: Please correct me if I'm wrong about the University of Melbourne credit.
Draft impact description #1 -
Title: Privilege escalation in auth\_token middleware
Reporter: Kieran Spear (University of Melbourne)
Products: python-keystoneclient
Versions: 0.2.3 version up to 0.6.0
Description:
Kieran Spear from the University of Melbourne reported a vulnerability in python-keystoneclient auth\_token middleware. By doing repeated authenticated requests, with sufficient load on the target system, an authenticated user can inherit another authenticated user's role resulting in a privilege escalation. Note that it is related to a bad interaction between auth\_token and eventlet that is fixed if the process used eventlet thread monkey patching. Only setups using auth\_token with memcache are vulnerable.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Kieran Spear (kspear)](https://launchpad.net/~kspear) wrote on 2014-02-25: |  |  | [#14](/python-keystoneclient/%2Bbug/1282865/comments/14) |
| --- | --- | --- | --- |

@Dolph: Thanks for the great analysis. I suspect you'd find a higher failure rate if you change the ratio of requests. When I tested using the clients I used 1 endlessly looping user client and 5 admin clients, and saw the bug a few times per second.

@Thierry: I'm running Havana. I always forget to mention that...

@Tristan

I think this has been an issue since 0.2.0 (and before that the code was in Keystone itself):

<https://github.com/openstack/python-keystoneclient/commit/7920899af119d1697c333d202ca3272f167c19b0>

I would list the OpenStack services/versions affected too. Most of the other projects except Ceilometer [1] seem to be patching thread already (at least on master). We don't have memcache enabled for Ceilometer so I can't check whether it is vulnerable in practice.

[1] <https://github.com/openstack/ceilometer/search?q=monkey_patch&type=Code>

@Dolph: Thanks for the great analysis. I suspect you'd find a higher failure rate if you change the ratio of requests. When I tested using the clients I used 1 endlessly looping user client and 5 admin clients, and saw the bug a few times per second.
@Thierry: I'm running Havana. I always forget to mention that...
@Tristan
I think this has been an issue since 0.2.0 (and before that the code was in Keystone itself):
https://github.com/openstack/python-keystoneclient/commit/7920899af119d1697c333d202ca3272f167c19b0
I would list the OpenStack services/versions affected too. Most of the other projects except Ceilometer [1] seem to be patching thread already (at least on master). We don't have memcache enabled for Ceilometer so I can't check whether it is vulnerable in practice.
[1] https://github.com/openstack/ceilometer/search?q=monkey\_patch&type=Code

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Dolph Mathews (dolph)](https://launchpad.net/~dolph) wrote on 2014-02-25: |  |  | [#15](/python-keystoneclient/%2Bbug/1282865/comments/15) |
| --- | --- | --- | --- |

Suggested revisions to impact description:

"Note that it is related to a bad interaction between auth\_token and eventlet that is fixed if the process used eventlet thread monkey patching." -> "Note that it is related to a bad interaction between eventlet and python-memcached that is fixed if the process uses eventlet to monkey patch 'thread'."

- it's really an issue between the python-memcached and eventlet; auth\_token just happens to optionally consume python-memcached while being (typically) served by eventlet (\*\*this may affect any other service using memcached + eventlet\*\*)

- thread is worth putting in quotes IMO, because it actually results in 3 modules being patched (thread, threading and Queue) [1]

"inherit another authenticated user's role resulting in a privilege escalation" -> "assume another authenticated user's complete identity and multi-tenant authorization, potentially resulting in a privilege escalation"

- "role" is a little too narrow if I'm being pedantic -- it's not just role confusion, or authorization confusion, but completely picking up another user's authentication + authorization

- "inherit" seems to imply that it's added on to the existing (valid) authn + authz, when it fact it just replaces it

- "resulting in privilege escalation" is just a potential / likelihood, but it's not a guaranteed outcome, i suppose

[1] <http://eventlet.net/doc/patching.html#monkeypatching-the-standard-library>

Suggested revisions to impact description:
"Note that it is related to a bad interaction between auth\_token and eventlet that is fixed if the process used eventlet thread monkey patching." -> "Note that it is related to a bad interaction between eventlet and python-memcached that is fixed if the process uses eventlet to monkey patch 'thread'."
- it's really an issue between the python-memcached and eventlet; auth\_token just happens to optionally consume python-memcached while being (typically) served by eventlet (\*\*this may affect any other service using memcached + eventlet\*\*)
- thread is worth putting in quotes IMO, because it actually results in 3 modules being patched (thread, threading and Queue) [1]
"inherit another authenticated user's role resulting in a privilege escalation" -> "assume another authenticated user's complete identity and multi-tenant authorization, potentially resulting in a privilege escalation"
- "role" is a little too narrow if I'm being pedantic -- it's not just role confusion, or authorization confusion, but completely picking up another user's authentication + authorization
- "inherit" seems to imply that it's added on to the existing (valid) authn + authz, when it fact it just replaces it
- "resulting in privilege escalation" is just a potential / likelihood, but it's not a guaranteed outcome, i suppose
[1] http://eventlet.net/doc/patching.html#monkeypatching-the-standard-library

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2014-02-25: |  |  | [#16](/python-keystoneclient/%2Bbug/1282865/comments/16) |
| --- | --- | --- | --- |

I would use "Potential context confusion in Keystone middleware" as the title.

Also : "...that is fixed if the process used eventlet..." -> "...that is avoided if the calling process already used eventlet..."

-> the issue is not fixed if the process already monkey-patched 'thread', it is not vulnerable in the first place

-> "calling" process makes it IMHO clearer that we are talking about the server project using the middleware.

If we precisely analyze the grizzly/havana affected server software, we could end with something like: "In Grizzly and Havana, only Glance and Ceilometer were found to be affected. Also note that only keystone middleware setups using auth\_token with memcache are vulnerable."

I would use "Potential context confusion in Keystone middleware" as the title.
Also : "...that is fixed if the process used eventlet..." -> "...that is avoided if the calling process already used eventlet..."
-> the issue is not fixed if the process already monkey-patched 'thread', it is not vulnerable in the first place
-> "calling" process makes it IMHO clearer that we are talking about the server project using the middleware.
If we precisely analyze the grizzly/havana affected server software, we could end with something like: "In Grizzly and Havana, only Glance and Ceilometer were found to be affected. Also note that only keystone middleware setups using auth\_token with memcache are vulnerable."

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2014-02-25: |  |  | [#17](/python-keystoneclient/%2Bbug/1282865/comments/17) |
| --- | --- | --- | --- |

Many thanks for your suggestions guys!

This is the revised draft, I did not include the comprehensive affected services list because it might be overkill here and a bit risky if we miss something...

For example Nova have three differents strategies to cope with eventlet monkey patching:

\* In grizzly, some services are not monkey patched at all (like the novncproxy that Thierry mentioned)

\* In havanna, all services are monkey patched by default

\* In icehouse, if "--remote-debug" switches are used, then "thread" is not monkey patched...

What do you think if we just say that "Only keystone middleware setups using auth\_token with memcache are vulnerable" ?

@Dolph: do you know if the fix (comment #8) need to be backported for grizzly and havanna or will it works as-is ?

Draft impact description #2 -

Title: Potential context confusion in Keystone middleware

Reporter: Kieran Spear (University of Melbourne)

Products: python-keystoneclient

Versions: 0.2.0 version up to 0.6.0

Description:

Kieran Spear from the University of Melbourne reported a vulnerability in python-keystoneclient auth\_token middleware. By doing repeated authenticated requests, with sufficient load on the target system, an authenticated user can assume another authenticated user's complete identity and multi-tenant authorizations, potentially resulting in a privilege escalation. Note that it is related to a bad interaction between eventlet and python-memcached that may be avoided if the calling process already uses eventlet to monkey patch "thread". Only keystone middleware setups using auth\_token with memcache are vulnerable.

Many thanks for your suggestions guys!
This is the revised draft, I did not include the comprehensive affected services list because it might be overkill here and a bit risky if we miss something...
For example Nova have three differents strategies to cope with eventlet monkey patching:
\* In grizzly, some services are not monkey patched at all (like the novncproxy that Thierry mentioned)
\* In havanna, all services are monkey patched by default
\* In icehouse, if "--remote-debug" switches are used, then "thread" is not monkey patched...
What do you think if we just say that "Only keystone middleware setups using auth\_token with memcache are vulnerable" ?
@Dolph: do you know if the fix (comment #8) need to be backported for grizzly and havanna or will it works as-is ?
Draft impact description #2 -
Title: Potential context confusion in Keystone middleware
Reporter: Kieran Spear (University of Melbourne)
Products: python-keystoneclient
Versions: 0.2.0 version up to 0.6.0
Description:
Kieran Spear from the University of Melbourne reported a vulnerability in python-keystoneclient auth\_token middleware. By doing repeated authenticated requests, with sufficient load on the target system, an authenticated user can assume another authenticated user's complete identity and multi-tenant authorizations, potentially resulting in a privilege escalation. Note that it is related to a bad interaction between eventlet and python-memcached that may be avoided if the calling process already uses eventlet to monkey patch "thread". Only keystone middleware setups using auth\_token with memcache are vulnerable.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2014-02-25: |  |  | [#18](/python-keystoneclient/%2Bbug/1282865/comments/18) |
| --- | --- | --- | --- |

A few suggestions:

'vulnerability in python-keystoneclient auth\_token middleware' -> 'vulnerability in Keystone auth\_token middleware (shipped in python-keystoneclient)'

'can' -> 'may in certain situations'

'already uses eventlet to monkey patch "thread"' -> 'already monkey-patches "thread" to use eventlet'

Versions: I would say "all versions up to 0.6.0" -- the middleware was shipped within Keystone before, so the issue didn't start with 0.2.0.

Note that there is no need to backport the patch at all, since there is only one branch in python-keystoneclient. We may have to play tricks if we pinned python-keystoneclient to a certain version in the grizzly gate, though (a bit like the recent python-swiftclient debacle).

A few suggestions:
'vulnerability in python-keystoneclient auth\_token middleware' -> 'vulnerability in Keystone auth\_token middleware (shipped in python-keystoneclient)'
'can' -> 'may in certain situations'
'already uses eventlet to monkey patch "thread"' -> 'already monkey-patches "thread" to use eventlet'
Versions: I would say "all versions up to 0.6.0" -- the middleware was shipped within Keystone before, so the issue didn't start with 0.2.0.
Note that there is no need to backport the patch at all, since there is only one branch in python-keystoneclient. We may have to play tricks if we pinned python-keystoneclient to a certain version in the grizzly gate, though (a bit like the recent python-swiftclient debacle).

| Changed in ossa: | |
| --- | --- |
| **importance**: | Undecided → Critical |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2014-02-25: |  |  | [#19](/python-keystoneclient/%2Bbug/1282865/comments/19) |
| --- | --- | --- | --- |

With latests suggestions:

Draft impact description #3 -

Title: Potential context confusion in Keystone middleware

Reporter: Kieran Spear (University of Melbourne)

Products: python-keystoneclient

Versions: all version up to 0.6.0

Description:

Kieran Spear from the University of Melbourne reported a vulnerability in Keystone auth\_token middleware (shipped in python-keystoneclient). By doing repeated authenticated requests, with sufficient load on the target system, an authenticated user may in certain situations assume another authenticated user's complete identity and multi-tenant authorizations, potentially resulting in a privilege escalation. Note that it is related to a bad interaction between eventlet and python-memcached that may be avoided if the calling process already monkey-patches "thread" to use eventlet. Only keystone middleware setups using auth\_token with memcache are vulnerable.

With latests suggestions:
Draft impact description #3 -
Title: Potential context confusion in Keystone middleware
Reporter: Kieran Spear (University of Melbourne)
Products: python-keystoneclient
Versions: all version up to 0.6.0
Description:
Kieran Spear from the University of Melbourne reported a vulnerability in Keystone auth\_token middleware (shipped in python-keystoneclient). By doing repeated authenticated requests, with sufficient load on the target system, an authenticated user may in certain situations assume another authenticated user's complete identity and multi-tenant authorizations, potentially resulting in a privilege escalation. Note that it is related to a bad interaction between eventlet and python-memcached that may be avoided if the calling process already monkey-patches "thread" to use eventlet. Only keystone middleware setups using auth\_token with memcache are vulnerable.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2014-02-25: |  |  | [#20](/python-keystoneclient/%2Bbug/1282865/comments/20) |
| --- | --- | --- | --- |

Last-minute nitpicking (but we need to get this one right, as it's pretty massive):

all version -> All versions

By doing repeated authenticated requests -> By doing repeated requests

(we already mention that the user is authenticated later in the same sentence)

may be avoided -> should be avoided

(conveys slightly more certainty that thread-monkey-patching consumers are safe)

Last-minute nitpicking (but we need to get this one right, as it's pretty massive):
all version -> All versions
By doing repeated authenticated requests -> By doing repeated requests
(we already mention that the user is authenticated later in the same sentence)
may be avoided -> should be avoided
(conveys slightly more certainty that thread-monkey-patching consumers are safe)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2014-02-25: |  |  | [#21](/python-keystoneclient/%2Bbug/1282865/comments/21) |
| --- | --- | --- | --- |

Agree, this bug deserve much attention!

Draft impact description #4 -

Title: Potential context confusion in Keystone middleware

Reporter: Kieran Spear (University of Melbourne)

Products: python-keystoneclient

Versions: All versions up to 0.6.0

Description:

Kieran Spear from the University of Melbourne reported a vulnerability in Keystone auth\_token middleware (shipped in python-keystoneclient). By doing repeated requests, with sufficient load on the target system, an authenticated user may in certain situations assume another authenticated user's complete identity and multi-tenant authorizations, potentially resulting in a privilege escalation. Note that it is related to a bad interaction between eventlet and python-memcached that should be avoided if the calling process already monkey-patches "thread" to use eventlet. Only keystone middleware setups using auth\_token with memcache are vulnerable.

Agree, this bug deserve much attention!
Draft impact description #4 -
Title: Potential context confusion in Keystone middleware
Reporter: Kieran Spear (University of Melbourne)
Products: python-keystoneclient
Versions: All versions up to 0.6.0
Description:
Kieran Spear from the University of Melbourne reported a vulnerability in Keystone auth\_token middleware (shipped in python-keystoneclient). By doing repeated requests, with sufficient load on the target system, an authenticated user may in certain situations assume another authenticated user's complete identity and multi-tenant authorizations, potentially resulting in a privilege escalation. Note that it is related to a bad interaction between eventlet and python-memcached that should be avoided if the calling process already monkey-patches "thread" to use eventlet. Only keystone middleware setups using auth\_token with memcache are vulnerable.

| Changed in ossa: | |
| --- | --- |
| **assignee**: | nobody → Tristan Cacqueray (tristan-cacqueray) |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2014-02-25: |  |  | [#22](/python-keystoneclient/%2Bbug/1282865/comments/22) |
| --- | --- | --- | --- |

+1 on version 4 of impact description, great work!

+1 on version 4 of impact description, great work!

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Dolph Mathews (dolph)](https://launchpad.net/~dolph) wrote on 2014-02-25: |  |  | [#23](/python-keystoneclient/%2Bbug/1282865/comments/23) |
| --- | --- | --- | --- |

+1 for impact description

+1 for impact description

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2014-02-26: |  |  | [#24](/python-keystoneclient/%2Bbug/1282865/comments/24) |
| --- | --- | --- | --- |

@Dolph: could you round up some keystone-core reviews of your proposed patch ?

@Dolph: could you round up some keystone-core reviews of your proposed patch ?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Brant Knudson (blk-u)](https://launchpad.net/~blk-u) wrote on 2014-02-28: |  |  | [#25](/python-keystoneclient/%2Bbug/1282865/comments/25) |
| --- | --- | --- | --- |

@Dolph: looking at the patch in comment #8 -- it looks like the code is assuming that auth\_token is running in eventlet if it can import eventlet.patcher... but won't the work even if the server isn't running in eventlet, if eventlet is installed somewhere that it can be found?

@Dolph: looking at the patch in comment #8 -- it looks like the code is assuming that auth\_token is running in eventlet if it can import eventlet.patcher... but won't the work even if the server isn't running in eventlet, if eventlet is installed somewhere that it can be found?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Brant Knudson (blk-u)](https://launchpad.net/~blk-u) wrote on 2014-02-28: |  |  | [#26](/python-keystoneclient/%2Bbug/1282865/comments/26) |
| --- | --- | --- | --- |

Another concern is that this is going to monkeypatch threads in the middle of handling a request... isn't that supposed to happen early on in the application, like before any threads are started?

Another concern is that this is going to monkeypatch threads in the middle of handling a request... isn't that supposed to happen early on in the application, like before any threads are started?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Brant Knudson (blk-u)](https://launchpad.net/~blk-u) wrote on 2014-02-28: |  |  | [#27](/python-keystoneclient/%2Bbug/1282865/comments/27) |
| --- | --- | --- | --- |

I would rather that we said that if an application is using auth\_token middleware in eventlet then the application needs to monkeypatch threads.

I would rather that we said that if an application is using auth\_token middleware in eventlet then the application needs to monkeypatch threads.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Brant Knudson (blk-u)](https://launchpad.net/~blk-u) wrote on 2014-02-28: |  |  | [#28](/python-keystoneclient/%2Bbug/1282865/comments/28) |
| --- | --- | --- | --- |

Here's from the eventlet documentation[1]: "It is important to call monkey\_patch() as early in the lifetime of the application as possible. Try to do it as one of the first lines in the main module." So I don't think it's safe to wait until an incoming request is received to do the monkey-patching.

[1] <http://eventlet.net/doc/patching.html#monkeypatching-the-standard-library>

Here's from the eventlet documentation[1]: "It is important to call monkey\_patch() as early in the lifetime of the application as possible. Try to do it as one of the first lines in the main module." So I don't think it's safe to wait until an incoming request is received to do the monkey-patching.
[1] http://eventlet.net/doc/patching.html#monkeypatching-the-standard-library

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Dolph Mathews (dolph)](https://launchpad.net/~dolph) wrote on 2014-02-28: |  |  | [#29](/python-keystoneclient/%2Bbug/1282865/comments/29) |
| --- | --- | --- | --- |

Brant: I agree with all your concerns, and my patch is making the assumption that nothing needs to load thread / threading / Queue before python-memcached does (in which case, the monkey patch will work correctly, as happens in my test).

The only other alternative I can think of is for auth\_token to completely bail on using touching memcached if the required monkey patching hasn't already taken place? (and emit a warning)

Brant: I agree with all your concerns, and my patch is making the assumption that nothing needs to load thread / threading / Queue before python-memcached does (in which case, the monkey patch will work correctly, as happens in my test).
The only other alternative I can think of is for auth\_token to completely bail on using touching memcached if the required monkey patching hasn't already taken place? (and emit a warning)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Brant Knudson (blk-u)](https://launchpad.net/~blk-u) wrote on 2014-02-28: |  |  | [#30](/python-keystoneclient/%2Bbug/1282865/comments/30) |
| --- | --- | --- | --- |

Dolph - A patch for keystoneclient that verifies that thread was monkey patched as required in eventlet would be a good one to have. Maybe keystoneclient could use is\_monkey\_patched to see if anything else was monkeypatched and if so require that thread is monkeypatched? I don't know if you can tell that the application is running under eventlet?

The other projects that use eventlet would have to change to do the thread monkeypatching.

Dolph - A patch for keystoneclient that verifies that thread was monkey patched as required in eventlet would be a good one to have. Maybe keystoneclient could use is\_monkey\_patched to see if anything else was monkeypatched and if so require that thread is monkeypatched? I don't know if you can tell that the application is running under eventlet?
The other projects that use eventlet would have to change to do the thread monkeypatching.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Brant Knudson (blk-u)](https://launchpad.net/~blk-u) wrote on 2014-02-28: |  |  | [#31](/python-keystoneclient/%2Bbug/1282865/comments/31) |
| --- | --- | --- | --- |

Looks like auth\_token could check if any eventlet modules have been imported already, by looking at sys.modules...

import sys

 any(mod\_name for mod\_name in sys.modules.keys() if mod\_name.startswith('eventlet.'))

Looks like auth\_token could check if any eventlet modules have been imported already, by looking at sys.modules...
import sys
any(mod\_name for mod\_name in sys.modules.keys() if mod\_name.startswith('eventlet.'))

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jamie Lennox (jamielennox)](https://launchpad.net/~jamielennox) wrote on 2014-02-28: |  |  | [#32](/python-keystoneclient/%2Bbug/1282865/comments/32) |
| --- | --- | --- | --- |

Sorry, this is the first i've seen this bug. I agree with brant here that i don't want to assume that auth\_token is always running under eventlet. It's definetly not always the case.

I'd prefer to put the change in at top of openstack.common.memorycache that says:

if eventlet.already\_patched and not patcher.is\_monkey\_patched('thread'):

    raise ConfigError("You have incorrectly configured eventlet")

This should inform all servers of the problems of mixing eventlet and memcache - i'm getting kind of sick of eventlet's magic and would just prefer to raise the error. If not the same auto-patch that you proposed above for keystoneclient but in the memorycache module should be ok.

The main problem i see with that is is it possible for a server to load auth\_token middleware prior to having called the monkey patch function? In keystone and others that have a bin/keystone-all that manages the paste file internally it should be fine, however anyone that wanted to use a more pure paste deployment would load auth\_token first - is this a situation that happens in any servers? Does it need to be like a on first memcache get check thread patched and then flag it as done?

Sorry, this is the first i've seen this bug. I agree with brant here that i don't want to assume that auth\_token is always running under eventlet. It's definetly not always the case.
I'd prefer to put the change in at top of openstack.common.memorycache that says:
if eventlet.already\_patched and not patcher.is\_monkey\_patched('thread'):
raise ConfigError("You have incorrectly configured eventlet")
This should inform all servers of the problems of mixing eventlet and memcache - i'm getting kind of sick of eventlet's magic and would just prefer to raise the error. If not the same auto-patch that you proposed above for keystoneclient but in the memorycache module should be ok.
The main problem i see with that is is it possible for a server to load auth\_token middleware prior to having called the monkey patch function? In keystone and others that have a bin/keystone-all that manages the paste file internally it should be fine, however anyone that wanted to use a more pure paste deployment would load auth\_token first - is this a situation that happens in any servers? Does it need to be like a on first memcache get check thread patched and then flag it as done?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jamie Lennox (jamielennox)](https://launchpad.net/~jamielennox) wrote on 2014-02-28: |  |  | [#33](/python-keystoneclient/%2Bbug/1282865/comments/33) |
| --- | --- | --- | --- |

Ah skimmed throught that quickly and didn't realize that keystoneclient-fix-[bug-1282865](/bugs/1282865).diff was against memoryclient.

I think i prefer the ConfigError, but see that it may break existing servers so i'm happy with that.

Ah skimmed throught that quickly and didn't realize that keystoneclient-fix-bug-1282865.diff was against memoryclient.
I think i prefer the ConfigError, but see that it may break existing servers so i'm happy with that.

[Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray)
on 2014-03-03

| **summary**: | - Keystone middleware may confuse contexts+ Keystone middleware may confuse contexts (CVE-2014-0105) |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Brant Knudson (blk-u)](https://launchpad.net/~blk-u) wrote on 2014-03-03:  [**Re: Keystone middleware may confuse contexts (CVE-2014-0105)**](/python-keystoneclient/%2Bbug/1282865/comments/34) |  |  | [#34](/python-keystoneclient/%2Bbug/1282865/comments/34) |
| --- | --- | --- | --- |

I think we need to come to an agreement on the approach to take, and then we can implement it. I think the approach to take is to both:

a) change auth\_token to fail if it's configured for memcached and it's running in eventlet and 'thread' isn't monkey-patched.

b) eventlet servers that use auth\_token are changed to monkey-patch eventlet 'thread' in addition to their other monkey-patching.

I think we need to come to an agreement on the approach to take, and then we can implement it. I think the approach to take is to both:
a) change auth\_token to fail if it's configured for memcached and it's running in eventlet and 'thread' isn't monkey-patched.
b) eventlet servers that use auth\_token are changed to monkey-patch eventlet 'thread' in addition to their other monkey-patching.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2014-03-03: |  |  | [#35](/python-keystoneclient/%2Bbug/1282865/comments/35) |
| --- | --- | --- | --- |

@Brant: we should first estimate what services are actually impacted, see how easy it will be to fix server-side as a security patch.

@Brant: we should first estimate what services are actually impacted, see how easy it will be to fix server-side as a security patch.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2014-03-04: |  |  | [#36](/python-keystoneclient/%2Bbug/1282865/comments/36) |
| --- | --- | --- | --- |

My tests[1] found those services using auth\_token without "thread" patched:

\* Havana:

  glance-registry ({'socket': True, 'time': True})

\* Icehouse

  ceilometer-api ({'socket': True})

  swift

Nova in master is also vulnerable when "--remote\_debug" switches are used: "# turn off thread patching to enable the remote debugger"

[1]: <http://paste.openstack.org/show/72103/>

My tests[1] found those services using auth\_token without "thread" patched:
\* Havana:
glance-registry ({'socket': True, 'time': True})
\* Icehouse
ceilometer-api ({'socket': True})
swift
Nova in master is also vulnerable when "--remote\_debug" switches are used: "# turn off thread patching to enable the remote debugger"
[1]: http://paste.openstack.org/show/72103/

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2014-03-04: |  |  | [#37](/python-keystoneclient/%2Bbug/1282865/comments/37) |
| --- | --- | --- | --- |

* [Havana fix for glance](https://bugs.launchpad.net/python-keystoneclient/%2Bbug/1282865/%2Battachment/4006636/%2Bfiles/0001-Fix-glance-registry-eventlet-monkey-patchs.patch)
  [Edit](/python-keystoneclient/%2Bbug/1282865/%2Battachment/4006636)
  (850 bytes,
  text/plain)

While I'm not sure my tests are comprehensive (ie shouldn't the nova vncproxy also use the auth\_token middleware ?), here is an attempt at fixing glance-registry in Havana.

While I'm not sure my tests are comprehensive (ie shouldn't the nova vncproxy also use the auth\_token middleware ?), here is an attempt at fixing glance-registry in Havana.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2014-03-04: |  |  | [#38](/python-keystoneclient/%2Bbug/1282865/comments/38) |
| --- | --- | --- | --- |

* [Icehouse fix for ceilometer](https://bugs.launchpad.net/python-keystoneclient/%2Bbug/1282865/%2Battachment/4006653/%2Bfiles/0001-Fix-ceilometer-eventlet-monkey-patchs.patch)
  [Edit](/python-keystoneclient/%2Bbug/1282865/%2Battachment/4006653)
  (920 bytes,
  text/plain)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2014-03-04: |  |  | [#39](/python-keystoneclient/%2Bbug/1282865/comments/39) |
| --- | --- | --- | --- |

* [Icehouse fix for swift](https://bugs.launchpad.net/python-keystoneclient/%2Bbug/1282865/%2Battachment/4006654/%2Bfiles/0001-Fix-swift-eventlet-monkey-patchs.patch)
  [Edit](/python-keystoneclient/%2Bbug/1282865/%2Battachment/4006654)
  (962 bytes,
  text/plain)

[Thierry Carrez (ttx)](https://launchpad.net/~ttx)
on 2014-03-04

| Changed in glance: | |
| --- | --- |
| **status**: | Invalid → Confirmed |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Dolph Mathews (dolph)](https://launchpad.net/~dolph) wrote on 2014-03-10: |  |  | [#40](/python-keystoneclient/%2Bbug/1282865/comments/40) |
| --- | --- | --- | --- |

The same underlying issue was independently and publicly reported against python-keystoneclient in [bug 1289074](/bugs/1289074).

The same underlying issue was independently and publicly reported against python-keystoneclient in bug 1289074.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2014-03-12: |  |  | [#41](/python-keystoneclient/%2Bbug/1282865/comments/41) |
| --- | --- | --- | --- |

I think a security-minded read of [bug 1289074](/bugs/1289074) (ie: Garbage in tokens' cache) would lead to this issue.

So if you guys agree, I propose to open this bug and mark 1289074 as a duplicate of this one. This should also help having a fix more quickly.

I think a security-minded read of bug 1289074 (ie: Garbage in tokens' cache) would lead to this issue.
So if you guys agree, I propose to open this bug and mark 1289074 as a duplicate of this one. This should also help having a fix more quickly.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Dolph Mathews (dolph)](https://launchpad.net/~dolph) wrote on 2014-03-13: |  |  | [#42](/python-keystoneclient/%2Bbug/1282865/comments/42) |
| --- | --- | --- | --- |

[https://bugs.launchpad.net/python-keystoneclient/+bug/1289074/comments/3](https://bugs.launchpad.net/python-keystoneclient/%2Bbug/1289074/comments/3)

https://bugs.launchpad.net/python-keystoneclient/+bug/1289074/comments/3

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [gordon chung (chungg)](https://launchpad.net/~chungg) wrote on 2014-03-14: |  |  | [#43](/python-keystoneclient/%2Bbug/1282865/comments/43) |
| --- | --- | --- | --- |

haven't verified this bug in Ceilometer yet but regarding monkey\_patching eventlets... that solution won't work in Ceilometer as it causes issues (see Julien's comment in [https://bugs.launchpad.net/ceilometer/+bug/1291054](https://bugs.launchpad.net/ceilometer/%2Bbug/1291054))

if monkey\_patching eventlets is the solution, we'll need to do something differently in Ceilometer.

haven't verified this bug in Ceilometer yet but regarding monkey\_patching eventlets... that solution won't work in Ceilometer as it causes issues (see Julien's comment in https://bugs.launchpad.net/ceilometer/+bug/1291054)
if monkey\_patching eventlets is the solution, we'll need to do something differently in Ceilometer.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2014-03-17: |  |  | [#44](/python-keystoneclient/%2Bbug/1282865/comments/44) |
| --- | --- | --- | --- |

OK, if the patch proposed in [bug 1289074](/bugs/1289074) fixes this issue, we should push it in ASAP and issue an OSSA about it. We can keep this bug private (since it gives a lot more detail on exploitability) until the ossa is out.

OK, if the patch proposed in bug 1289074 fixes this issue, we should push it in ASAP and issue an OSSA about it. We can keep this bug private (since it gives a lot more detail on exploitability) until the ossa is out.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2014-03-19: |  |  | [#45](/python-keystoneclient/%2Bbug/1282865/comments/45) |
| --- | --- | --- | --- |

Cleanroom implementation of patch at <https://review.openstack.org/#/c/81078/>

Cleanroom implementation of patch at https://review.openstack.org/#/c/81078/

| Changed in ossa: | |
| --- | --- |
| **status**: | Confirmed → Triaged |
| Changed in python-keystoneclient: | |
| **status**: | Confirmed → In Progress |

[Thierry Carrez (ttx)](https://launchpad.net/~ttx)
on 2014-03-19

| **no longer affects**: | ceilometer |
| --- | --- |
| **no longer affects**: | glance |
| **no longer affects**: | swift |
| Changed in python-keystoneclient: | |
| **status**: | In Progress → Triaged |
| **status**: | Triaged → In Progress |
| Changed in ossa: | |
| **status**: | Triaged → In Progress |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Dolph Mathews (dolph)](https://launchpad.net/~dolph) wrote on 2014-03-23: |  |  | [#46](/python-keystoneclient/%2Bbug/1282865/comments/46) |
| --- | --- | --- | --- |

Reviewed: <https://review.openstack.org/81078>

Committed: <https://git.openstack.org/cgit/openstack/python-keystoneclient/commit/?id=d11553a72ee8febc26e4a76ba900984d1b778f59>

Submitter: Jenkins

Branch: master

commit d11553a72ee8febc26e4a76ba900984d1b778f59

Author: Dolph Mathews <email address hidden>

Date: Mon Mar 17 15:56:28 2014 -0500

add pooling for cache references

Change-Id: Iffb1d1bff5dc4437544a5aefef3bca0e5b17cc81

    Closes-Bug: 1289074

Reviewed: https://review.openstack.org/81078
Committed: https://git.openstack.org/cgit/openstack/python-keystoneclient/commit/?id=d11553a72ee8febc26e4a76ba900984d1b778f59
Submitter: Jenkins
Branch: master
commit d11553a72ee8febc26e4a76ba900984d1b778f59
Author: Dolph Mathews <dolph.mathews@gmail.com>
Date: Mon Mar 17 15:56:28 2014 -0500
add pooling for cache references
Change-Id: Iffb1d1bff5dc4437544a5aefef3bca0e5b17cc81
Closes-Bug: 1289074

| Changed in python-keystoneclient: | |
| --- | --- |
| **status**: | In Progress → Fix Committed |
| **milestone**: | none → 0.7.0 |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2014-03-24: |  |  | [#47](/python-keystoneclient/%2Bbug/1282865/comments/47) |
| --- | --- | --- | --- |

Thank you dolph for such a quick fix!

We are still issuing a pre-OSSA before opening this bug.

Proposed public disclosure date/time:

2014-03-27 15:00 UTC

Thank you dolph for such a quick fix!
We are still issuing a pre-OSSA before opening this bug.
Proposed public disclosure date/time:
2014-03-27 15:00 UTC

| Changed in ossa: | |
| --- | --- |
| **status**: | In Progress → Fix Committed |

[Dolph Mathews (dolph)](https://launchpad.net/~dolph)
on 2014-03-26

| Changed in python-keystoneclient: | |
| --- | --- |
| **status**: | Fix Committed → Fix Released |

[Thierry Carrez (ttx)](https://launchpad.net/~ttx)
on 2014-03-27

| **information type**: | Private Security → Public Security |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2014-03-27: |  |  | [#48](/python-keystoneclient/%2Bbug/1282865/comments/48) |
| --- | --- | --- | --- |

[OSSA 2014-007]

[OSSA 2014-007]

| **summary**: | - Keystone middleware may confuse contexts (CVE-2014-0105)+ [OSSA 2014-007] Keystone middleware may confuse contexts (CVE-2014-0105) |
| --- | --- |
| Changed in ossa: | |
| **status**: | Fix Committed → Fix Released |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Matthew Thode (prometheanfire)](https://launchpad.net/~prometheanfire) wrote on 2014-03-27: |  |  | [#49](/python-keystoneclient/%2Bbug/1282865/comments/49) |
| --- | --- | --- | --- |

Please release a patchset that matches the requirements that keystone imposes on keystoneclient

<https://github.com/openstack/keystone/blob/2013.1.5/tools/pip-requires>

python-keystoneclient>=0.2.1,<0.3

At this time I see no patch that fixes this issue for keystoneclient 0.2.5

Please release a patchset that matches the requirements that keystone imposes on keystoneclient
https://github.com/openstack/keystone/blob/2013.1.5/tools/pip-requires
python-keystoneclient>=0.2.1,<0.3
At this time I see no patch that fixes this issue for keystoneclient 0.2.5

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2014-03-28: |  |  | [#50](/python-keystoneclient/%2Bbug/1282865/comments/50) |
| --- | --- | --- | --- |

We only provide one release channel for client libraries (no stable branches). Furthermore grizzly is now unsupported.

That said, that dep capping is a bit weird, since it prevents you from actually following that release channel. I'll see if (1) that capping is abusive and (2) the patch could be backported to the 0.2.x series

We only provide one release channel for client libraries (no stable branches). Furthermore grizzly is now unsupported.
That said, that dep capping is a bit weird, since it prevents you from actually following that release channel. I'll see if (1) that capping is abusive and (2) the patch could be backported to the 0.2.x series

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Dolph Mathews (dolph)](https://launchpad.net/~dolph) wrote on 2014-03-28: |  |  | [#51](/python-keystoneclient/%2Bbug/1282865/comments/51) |
| --- | --- | --- | --- |

I believe the pin was just a cautionary convention, and not strictly necessary.

python-keystoneclient 0.3.0 didn't even exist (released Sun Jun 23 16:20:39 2013) when the pin was created (Sat Nov 17 14:45:18 2012) in pip requires:

<https://github.com/openstack/keystone/commit/e59360da677c4cd3f6a6391cfebb973c11e2ee47>

Backporting to 0.2.5 looks to be fairly ugly, but I'm playing around with it now.

I believe the pin was just a cautionary convention, and not strictly necessary.
python-keystoneclient 0.3.0 didn't even exist (released Sun Jun 23 16:20:39 2013) when the pin was created (Sat Nov 17 14:45:18 2012) in pip requires:
https://github.com/openstack/keystone/commit/e59360da677c4cd3f6a6391cfebb973c11e2ee47
Backporting to 0.2.5 looks to be fairly ugly, but I'm playing around with it now.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Dolph Mathews (dolph)](https://launchpad.net/~dolph) wrote on 2014-03-28: |  |  | [#52](/python-keystoneclient/%2Bbug/1282865/comments/52) |
| --- | --- | --- | --- |

Even better news, I'm unable to reproduce against 0.2.5! 0.3.0 appears to be the first release that is vulnerable.

Even better news, I'm unable to reproduce against 0.2.5! 0.3.0 appears to be the first release that is vulnerable.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Dolph Mathews (dolph)](https://launchpad.net/~dolph) wrote on 2014-03-28: |  |  | [#53](/python-keystoneclient/%2Bbug/1282865/comments/53) |
| --- | --- | --- | --- |

* [bug-1282865-0.2.5-backport.diff](https://bugs.launchpad.net/python-keystoneclient/%2Bbug/1282865/%2Battachment/4049114/%2Bfiles/bug-1282865-0.2.5-backport.diff)
  [Edit](/python-keystoneclient/%2Bbug/1282865/%2Battachment/4049114)
  (6.9 KiB,
  text/plain)

CORRECTION: I'm able to reproduce in 0.2.5

As it turns out, I was backporting my configuration for auth\_token which did not have the desired effect of enabling memcached in 0.2.5) due to memcache\_servers being renamed to memcached\_servers in 0.3.0 (I was setting memcached\_servers for testing).

This patch appears to fix 0.2.5 but I haven't done any integration testing, so I can't recommend it's use over 0.7.x

CORRECTION: I'm able to reproduce in 0.2.5
As it turns out, I was backporting my configuration for auth\_token which did not have the desired effect of enabling memcached in 0.2.5) due to memcache\_servers being renamed to memcached\_servers in 0.3.0 (I was setting memcached\_servers for testing).
This patch appears to fix 0.2.5 but I haven't done any integration testing, so I can't recommend it's use over 0.7.x

[See full activity log](https://bugs.launchpad.net/python-keystoneclient/%2Bbug/1282865/%2Bactivity)

To post a comment you must [log in](%2Blogin?comments=all).

* [Report a bug](/python-keystoneclient/%2Bfilebug)

This report contains
**Public Security**
information

Everyone can see this security related information.

You are
[not directly subscribed to this bug's notifications.](/python-keystoneclient/%2Bbug/1282865/%2Bsubscribe)

Subscribing...

* [Edit bug mail](https://bugs.launchpad.net/python-keystoneclient/%2Bbug/1282865/%2Bsubscriptions "View and change your subscriptions to this bug")

## Other bug subscribers

[Subscribe someone else](https://bugs.launchpad.net/python-keystoneclient/%2Bbug/1282865/%2Baddsubscriber "Launchpad will email that person whenever this bugs changes")

## Patches

* [keystoneclient-repro-bug-1282865.diff](https://bugs.launchpad.net/python-keystoneclient/%2Bbug/1282865/%2Battachment/3990345/%2Bfiles/keystoneclient-repro-bug-1282865.diff)
  [Edit](/python-keystoneclient/%2Bbug/1282865/%2Battachment/3990345 "Change patch details")
* [keystoneclient-fix-bug-1282865.diff](https://bugs.launchpad.net/python-keystoneclient/%2Bbug/1282865/%2Battachment/3990378/%2Bfiles/keystoneclient-fix-bug-1282865.diff)
  [Edit](/python-keystoneclient/%2Bbug/1282865/%2Battachment/3990378 "Change patch details")
* [Havana fix for glance](https://bugs.launchpad.net/python-keystoneclient/%2Bbug/1282865/%2Battachment/4006636/%2Bfiles/0001-Fix-glance-registry-eventlet-monkey-patchs.patch)
  [Edit](/python-keystoneclient/%2Bbug/1282865/%2Battachment/4006636 "Change patch details")
* [Icehouse fix for ceilometer](https://bugs.launchpad.net/python-keystoneclient/%2Bbug/1282865/%2Battachment/4006653/%2Bfiles/0001-Fix-ceilometer-eventlet-monkey-patchs.patch)
  [Edit](/python-keystoneclient/%2Bbug/1282865/%2Battachment/4006653 "Change patch details")
* [Icehouse fix for swift](https://bugs.launchpad.net/python-keystoneclient/%2Bbug/1282865/%2Battachment/4006654/%2Bfiles/0001-Fix-swift-eventlet-monkey-patchs.patch)
  [Edit](/python-keystoneclient/%2Bbug/1282865/%2Battachment/4006654 "Change patch details")
* [bug-1282865-0.2.5-backport.diff](https://bugs.launchpad.net/python-keystoneclient/%2Bbug/1282865/%2Battachment/4049114/%2Bfiles/bug-1282865-0.2.5-backport.diff)
  [Edit](/python-keystoneclient/%2Bbug/1282865/%2Battachment/4049114 "Change patch details")

* [Add patch](/python-keystoneclient/%2Bbug/1282865/%2Baddcomment?field.patch=on)

## Bug attachments

* [repro\_bug\_1282865.py](https://bugs.launchpad.net/python-keystoneclient/%2Bbug/1282865/%2Battachment/3990374/%2Bfiles/repro_bug_1282865.py)
  [Edit](/python-keystoneclient/%2Bbug/1282865/%2Battachment/3990374 "Change attachment details")

* [Add attachment](/python-keystoneclient/%2Bbug/1282865/%2Baddcomment)

## Remote bug watches

Bug watches keep track of this bug in other bug trackers.

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
4d55102
([Get the code!](https://dev.launchpad.net/))



=== Content from launchpad.net_9463a73d_20250126_124612.html ===

[Log in / Register](https://launchpad.net/~kspear/%2Blogin)

[![](/@@/person-logo)](https://launchpad.net/~kspear)

## [Kieran Spear](https://launchpad.net/~kspear)

* Overview
* [Code](https://code.launchpad.net/~kspear)
* [Bugs](https://bugs.launchpad.net/~kspear)
* [Blueprints](https://blueprints.launchpad.net/~kspear)
* [Translations](https://translations.launchpad.net/~kspear)
* [Answers](https://answers.launchpad.net/~kspear)

* [Related packages](https://launchpad.net/~kspear/%2Brelated-packages)
* [Related projects](https://launchpad.net/~kspear/%2Brelated-projects)

## User information

Launchpad Id:
kspear

Email:
[Log in](%2Blogin) for email information.

Member since:
2012-10-01

[![Icon of Nova](https://launchpadlibrarian.net/52560219/os14.png "Member of Nova")](/~nova)
[![Icon of OpenStack Team](https://launchpadlibrarian.net/52313052/os14.png "Member of OpenStack Team")](/~openstack)

Signed Ubuntu Code of Conduct:
Yes

Languages:

English

OpenPGP keys:

6B0DF1636CE8099A99E3C1E1143FFAF30651ACDE

SSH keys:

[kieran@here](%2Bsshkeys)

Time zone:

UTC
(UTC+0000)

Karma:
[0](https://launchpad.net/~kspear/%2Bkarma)
[Karma help](/%2Bhelp-registry/karma.html)

Social accounts:
![IRC](/@@/social-irc "IRC")
**kspear**
 on
**irc.freenode.net**

![Jabber](/@@/social-jabber "Jabber")
<email address hidden>

## [All memberships](https://launchpad.net/~kspear/%2Bparticipation) Latest memberships

| [Horizon Developers](/~horizon)  Joined on 2012-10-16 | |
| --- | --- |
| [OpenStack Contributors](/~openstack-cla)  Joined on 2012-10-12 | |
| [Nova](/~nova)  Joined on 2012-10-01 | |

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
4d55102
([Get the code!](https://dev.launchpad.net/))



=== Content from review.openstack.org_61cf3070_20250126_124621.html ===




=== Content from translations.launchpad.net_12d70809_20250126_124615.html ===

[Log in / Register](https://translations.launchpad.net/python-keystoneclient/%2Blogin)

[![](https://launchpadlibrarian.net/109253197/os64.png)](https://launchpad.net/python-keystoneclient)

## [python-keystoneclient](https://launchpad.net/python-keystoneclient)

* [Overview](https://launchpad.net/python-keystoneclient)
* [Code](https://code.launchpad.net/python-keystoneclient)
* [Bugs](https://bugs.launchpad.net/python-keystoneclient)
* [Blueprints](https://blueprints.launchpad.net/python-keystoneclient)
* Translations
* [Answers](https://answers.launchpad.net/python-keystoneclient)

# Translation overview

[Help for translations](https://help.launchpad.net/Translations)

**Launchpad does not know where
python-keystoneclient translates its messages.**

python-keystoneclient messages are
translated in:
[python-keystoneclient in Ubuntu Saucy](/ubuntu/saucy/%2Bsource/python-keystoneclient)
,
[python-keystoneclient in Ubuntu Raring](/ubuntu/raring/%2Bsource/python-keystoneclient)
.

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
4d55102
([Get the code!](https://dev.launchpad.net/))



=== Content from rhn.redhat.com_a814268d_20250125_232553.html ===

Note: Our personalized web services require that your browser be enabled for JavaScript and cookies

[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

[Red Hat Product Errata](/errata)
RHSA-2014:0382 - Security Advisory

Issued:
2014-04-09
Updated:
2014-04-09
# RHSA-2014:0382 - Security Advisory

* [Overview](#overview)
* [Updated Packages](#packages)

## Synopsis

Important: python-keystoneclient security update

## Type/Severity

Security Advisory: Important

## Red Hat Insights patch analysis

Identify and remediate systems affected by this advisory.

[View affected systems](https://console.redhat.com/insights/patch/advisories/RHSA-2014%3A0382)

## Topic

Updated python-keystoneclient packages that fix one security issue are now
available for Red Hat Enterprise Linux OpenStack Platform 4.0.

The Red Hat Security Response Team has rated this update as having
Important security impact. A Common Vulnerability Scoring System (CVSS)
base score, which gives a detailed severity rating, is available from the
CVE link in the References section.

## Description

Python-keystoneclient is a client library and a command line utility for
interacting with the OpenStack Identity API. The OpenStack Identity
auth\_token middleware component handles the authentication of tokens
with keystone.

When using the auth\_token middleware with the memcached token cache
enabled, a token for a different identity could be returned. An
authenticated user could use this flaw to escalate their privileges by
making repeated requests that could eventually allow the user to acquire
the administrator's identity. Note that only OpenStack Identity setups
using auth\_token with memcached were affected. (CVE-2014-0105)

Red Hat would like to thank the OpenStack project for reporting this issue.
Upstream acknowledges Kieran Spear from the University of Melbourne as the
original reporter.

The python-keystoneclient package has been upgraded to version 0.7.1.
Additionally, the python-six package has been upgraded to version 1.5.2,
required by the updated python-keystoneclient package.

All python-keystoneclient users are advised to upgrade to these updated
packages, which correct this issue. After installing this update, all
OpenStack services using auth\_token must be restarted for this update to
take effect.

## Solution

Before applying this update, make sure all previously released errata
relevant to your system have been applied.

This update is available via the Red Hat Network. Details on how to
use the Red Hat Network to apply this update are available at
<https://access.redhat.com/site/articles/11258>

## Affected Products

* Red Hat OpenStack 4.0 x86\_64

## Fixes

* [BZ - 1082165](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=1082165)
  - CVE-2014-0105 python-keystoneclient: Potential context confusion in Keystone middleware

## CVEs

* [CVE-2014-0105](https://www.redhat.com/security/data/cve/CVE-2014-0105.html)

## References

* <https://access.redhat.com/security/updates/classification/#important>

**Note:**
More recent versions of these packages may be available.
Click a package name for more details.
## Red Hat OpenStack 4.0

| SRPM | |
| --- | --- |
| python-keystoneclient-0.7.1-2.el6ost.src.rpm | SHA-256: 36247d97acd70651952a6cc45c94e63a78e1661c39cf8acbaed18ff2c2778064 |
| python-six-1.5.2-1.el6.src.rpm | SHA-256: d6073321575495897426e34da7b3c953f207babef37776341867503578a1b771 |
| x86\_64 | |
| python-keystoneclient-0.7.1-2.el6ost.noarch.rpm | SHA-256: 03e48e9ff8ece01b7b8ca7def340c55527283b63f4bacb56fbf0c9ebf6956e4b |
| python-keystoneclient-doc-0.7.1-2.el6ost.noarch.rpm | SHA-256: bfb9cfd2b9b87eac1a35abd3a22e123107e253d01336c27eca02816fa71fa1f2 |
| python-six-1.5.2-1.el6.noarch.rpm | SHA-256: d20cb9360975c627aa6792e11568f591449bf35a8c4e1ee6bc0f30bb302ceadd |

The Red Hat security contact is secalert@redhat.com.
More contact details at <https://access.redhat.com/security/team/contact/>.

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from answers.launchpad.net_15845101_20250126_124613.html ===

[Log in / Register](https://answers.launchpad.net/python-keystoneclient/%2Blogin)

[![](https://launchpadlibrarian.net/109253197/os64.png)](https://launchpad.net/python-keystoneclient)

## [python-keystoneclient](https://launchpad.net/python-keystoneclient)

* [Overview](https://launchpad.net/python-keystoneclient)
* [Code](https://code.launchpad.net/python-keystoneclient)
* [Bugs](https://bugs.launchpad.net/python-keystoneclient)
* [Blueprints](https://blueprints.launchpad.net/python-keystoneclient)
* [Translations](https://translations.launchpad.net/python-keystoneclient)
* Answers

# Questions for python-keystoneclient

**Launchpad does not know where
python-keystoneclient
tracks support requests.**

python-keystoneclient questions are
tracked in:
[python-keystoneclient in Ubuntu](/ubuntu/%2Bsource/python-keystoneclient).

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
4d55102
([Get the code!](https://dev.launchpad.net/))



=== Content from www.openwall.com_59185e0d_20250125_232558.html ===


| [Openwall](/) * [Products](/)   + [Openwall GNU/\*/Linux   *server OS*](/Owl/)+ [Linux Kernel Runtime Guard](/lkrg/)+ [John the Ripper   *password cracker*](/john/)         - [Free & Open Source for any platform](/john/)- [in the cloud](/john/cloud/)- [Pro for Linux](/john/pro/linux/)- [Pro for macOS](/john/pro/macosx/)+ [Wordlists   *for password cracking*](/wordlists/)+ [passwdqc   *policy enforcement*](/passwdqc/)             - [Free & Open Source for Unix](/passwdqc/)- [Pro for Windows (Active Directory)](/passwdqc/windows/)+ [yescrypt   *KDF & password hashing*](/yescrypt/)+ [yespower   *Proof-of-Work (PoW)*](/yespower/)+ [crypt\_blowfish   *password hashing*](/crypt/)+ [phpass   *ditto in PHP*](/phpass/)+ [tcb   *better password shadowing*](/tcb/)+ [Pluggable Authentication Modules](/pam/)+ [scanlogd   *port scan detector*](/scanlogd/)+ [popa3d   *tiny POP3 daemon*](/popa3d/)+ [blists   *web interface to mailing lists*](/blists/)+ [msulogin   *single user mode login*](/msulogin/)+ [php\_mt\_seed   *mt\_rand() cracker*](/php_mt_seed/)* [Services](/services/)* Publications       + [Articles](/articles/)+ [Presentations](/presentations/)* Resources         + [Mailing lists](/lists/)+ [Community wiki](https://openwall.info/wiki/)+ [Source code repositories (GitHub)](https://github.com/openwall)+ [Source code repositories (CVSweb)](https://cvsweb.openwall.com)+ [File archive & mirrors](/mirrors/)+ [How to verify digital signatures](/signatures/)+ [OVE IDs](/ove/)* [What's new](/news) | |
| --- | --- |

| | [Hash Suite - Windows password security audit tool. GUI, reports in PDF.](https://hashsuite.openwall.net) | | --- | |
| --- | --- |

[[<prev]](3) [[next>]](5) [[day]](.) [[month]](..) [[year]](../..) [[list]](../../..)
```

Message-ID: <53343D02.7080904@enovance.com>
Date: Thu, 27 Mar 2014 16:00:18 +0100
From: Tristan Cacqueray <tristan.cacqueray@...vance.com>
To: oss-security@...ts.openwall.com
Subject: [OSSA 2014-007] Potential context confusion in Keystone middleware
 (CVE-2014-0105)

OpenStack Security Advisory: 2014-007
CVE: CVE-2014-0105
Date: March 27, 2014
Title: Potential context confusion in Keystone middleware
Reporter: Kieran Spear (University of Melbourne)
Products: python-keystoneclient
Versions: All versions up to 0.6.0

Description:
Kieran Spear from the University of Melbourne reported a vulnerability
in Keystone auth_token middleware (shipped in python-keystoneclient). By
doing repeated requests, with sufficient load on the target system, an
authenticated user may in certain situations assume another
authenticated user's complete identity and multi-tenant authorizations,
potentially resulting in a privilege escalation. Note that it is related
to a bad interaction between eventlet and python-memcached that should
be avoided if the calling process already monkey-patches "thread" to use
eventlet. Only keystone middleware setups using auth_token with memcache
are vulnerable.

python-keystoneclient fix (included in 0.7.0 release):
<https://review.openstack.org/81078>

References:
<http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-0105>
<https://bugs.launchpad.net/bugs/1282865>

--
Tristan Cacqueray
OpenStack Vulnerability Management Team

Download attachment "[signature.asc](4/1)" of type "application/pgp-signature" (556 bytes)

```

[Powered by blists](https://www.openwall.com/blists/) - [more mailing lists](https://lists.openwall.net)

Please check out the
[Open Source Software Security Wiki](https://oss-security.openwall.org/wiki/), which is counterpart to this
[mailing list](https://oss-security.openwall.org/wiki/mailing-lists/oss-security).

Confused about [mailing lists](/lists/) and their use?
[Read about mailing lists on Wikipedia](https://en.wikipedia.org/wiki/Electronic_mailing_list)
and check out these
[guidelines on proper formatting of your messages](https://www.complang.tuwien.ac.at/anton/mail-news-errors.html).



=== Content from www.redhat.com_61628bc7_20250126_124617.html ===


[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

**We're sorry but cve-details doesn't work properly without JavaScript enabled. Please enable it to continue.**

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from access.redhat.com_2fcbb989_20250126_124617.html ===


[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)

  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Product Documentation](https://access.redhat.com/documentation)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)

  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform)
  [All Product Docs](//docs.redhat.com/en/products/)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)

  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Classifications](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Severety Ratings](https://access.redhat.com/security/security-updates/#/cve)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)

  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

 Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

# How do I apply package updates to my RHEL system?

Updated 2023-06-08T17:44:17+00:00 -
English

* [English](https://access.redhat.com/articles/11258)
* [Japanese](https://access.redhat.com/ja/articles/17461)
* [Chinese](https://access.redhat.com/zh-hans/articles/7047073)

## Table of Contents

* [Environment considerations](#environment-considerations-1)
* [Prerequisites](#prerequisites-2)
* [Registering the system with the Subscription Manager](#rhsm)
* [Graphical interface](#graphical-interface-4)
* [Command line](#command-line-5)

* [Applying package updates on Red Hat Enterprise Linux 9](#rhel9)
* [Applying package updates on Red Hat Enterprise Linux 8](#rhel8)
* [Applying package updates on Red Hat Enterprise Linux 7](#rhel7)
* [Applying package updates on Red Hat Enterprise Linux 6](#rhel6)
* [Applying package updates on Red Hat Enterprise Linux 5](#rhel5)

## Environment considerations

Red Hat Enterprise Linux starting with versions 6.1 and 5.7 introduced a new Red Hat Subscription Management (RHSM) service. Red Hat Network (RHN) has been decommissioned.

Users that are new to Red Hat or would like the enhanced subscription information and improved content access should use RHSM. If you are still using Red Hat Network, we advise you to [migrate to RHSM as soon as possible](https://access.redhat.com/products/red-hat-subscription-management#migration). Customers using older versions of Red Hat Enterprise Linux must continue using RHN Classic. Refer to [FAQ for Changes to Red Hat's Entitlement Platform with RHEL 6.1 and 5.7](https://access.redhat.com/articles/47844) and [What's the difference between management services provided by Red Hat Network (RHN) Classic and Red Hat Subscription Management (RHSM)?](https://access.redhat.com/articles/63269) for more information on benefits of RHSM over RHN.

* For **Red Hat Enterprise Linux 9**, register the system using RHSM as described in [Registering the system with the Subscription Manager](#rhsm). Then update the system according to instructions in [Applying package updates on Red Hat Enterprise Linux 9](#rhel9).
* For **Red Hat Enterprise Linux 8**, register the system using RHSM as described in [Registering the system with the Subscription Manager](#rhsm). Then update the system according to instructions in [Applying package updates on Red Hat Enterprise Linux 8](#rhel8).
* For **Red Hat Enterprise Linux 7**, register the system using RHSM as described in [Registering the system with the Subscription Manager](#rhsm). Then update the system according to instructions in [Applying package updates on Red Hat Enterprise Linux 7](#rhel7).
* For **Red Hat Enterprise Linux 6**, register the system using RHSM (if RHEL 6.1 or above) as described in [Registering the system with the Subscription Manager](#rhsm). Then update the system according to instructions in [Applying package updates on Red Hat Enterprise Linux 6](#rhel6).
* For **Red Hat Enterprise Linux 5**, register the system using RHSM (if RHEL 5.7 or above) as described in [Registering the system with the Subscription Manager](#rhsm). After registration, update the system according to instructions in [Applying package updates on Red Hat Enterprise Linux 5](#rhel5).
* If your system cannot connect to the Internet directly, our [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/) offering may be of interest.

## Prerequisites

### Registering the system with the Subscription Manager

#### Graphical interface

Access the Subscription Management GUI client in Red Hat Enterprise Linux 9 via **Activities** and then **Show Applications** which is visible in the Favorites dock by default.

Access the Subscription Management GUI client in Red Hat Enterprise Linux 8 via **Activities**, then select **Show Applications** and click **All**. Then select **Red Hat Subscription Manager**.

In Red Hat Enterprise Linux 7 open **Applications** -> **System Tools** -> **Red Hat Subscription Manager** and in Red Hat Enterprise Linux 6 via **System** -> **Administration** -> **Red Hat Subscription Manager**.

#### Command line

A system can also be registered via the command line by using the "subscription-manager" command. To register your system, either through the GUI or from the command line, follow the instructions in the [Using and Configuring Red Hat Subscription Manager](https://access.redhat.com/documentation/en-US/Red_Hat_Subscription_Management/1/html-single/RHSM/index.html) guide.

Make sure that your firewall allows configuring RHSM, for more information see [How do I access RHSM (yum) through a firewall?](https://access.redhat.com/solutions/65300).

General information on RHSM can be found in [Red Hat Network Subscription Management](https://access.redhat.com/documentation/en-US/Red_Hat_Customer_Portal/1/html/Red_Hat_Network_Certificate-based_Subscription_Management/index.html), while [FAQ for Changes to Red Hat's Entitlement Platform with RHEL 6.1 and 5.7](/knowledge/node/47844) provides a quick overview and a comparison with RHN.

## Applying package updates on Red Hat Enterprise Linux 9

Before installing an update, make sure all previously released errata relevant to the system have been applied.

To access updates when using Red Hat Enterprise Linux 9, launch the graphical update tool through **Applications** and then **Software** which is visible in the Favorites dock (by default).

```
# gnome-software

```

Within the graphical interface, select **Updates**.

For a command line interface, use the following command to update the operating system:

```
# dnf upgrade

```

To install a specific package, such as vsftpd, use the following command:

```
# dnf install vsftpd

```

To update a specific package, such as bind, use the following command:

```
# dnf upgrade bind

```

To find more information about the command line options available for `yum`, use the following command:

```
# man dnf

```
## Applying package updates on Red Hat Enterprise Linux 8

Before installing an update, make sure all previously released errata relevant to the system have been applied.

To access updates when using Red Hat Enterprise Linux 8, launch the graphical update tool through **Applications** -> **Show Applications** -> **All** -> **Software**, or from the command line via the following command:

```
# gnome-software

```

Within the graphical interface, select **Updates**.

For a command line interface, use the following command to update the operating system:

```
# dnf update

```

To install a specific package, such as vsftpd, use the following command:

```
# dnf install vsftpd

```

To update a specific package, such as bind, use the following command:

```
# dnf update bind

```

To find more information about the command line options available for `yum`, use the following command:

```
# man dnf

```
## Applying package updates on Red Hat Enterprise Linux 7

Before installing an update, make sure all previously released errata relevant to the system have been applied.

To access updates when using Red Hat Enterprise Linux 7, launch the graphical update tool through **Applications** -> **System Tools** -> **Software Update**, or from the command line via the following command:

```
# gpk-update-viewer

```

For a command line interface, use the following command to update the operating system:

```
# yum update

```

To install a specific package, such as vsftpd, use the following command:

```
# yum install vsftpd

```

To update a specific package, such as bind, use the following command:

```
# yum update bind

```

To find more information about the command line options available for `yum`, use the following command:

```
# man yum

```
## Applying package updates on Red Hat Enterprise Linux 6

Before installing an update, make sure all previously released errata relevant to the system have been applied.

To access updates when using Red Hat Enterprise Linux 6, launch the graphical update tool through **System** -> **Administration** -> **Software Update**, or from the command line via the following command:

```
# gpk-update-viewer

```

For a command line interface, use the following command to update the operating system:

```
# yum update

```

To install a specific package, such as vsftpd, use the following command:

```
# yum install vsftpd

```

To update a specific package, such as bind, use the following command:

```
# yum update bind

```

To find more information about the command line options available for `yum`, use the following command:

```
# man yum

```
## Applying package updates on Red Hat Enterprise Linux 5

Before installing an update, make sure all previously released errata relevant to the system have been applied.

To access updates when using Red Hat Enterprise Linux 5, launch the graphical update tool through **Applications** -> **System Tools** -> **Software Updater**, or from the command line via the following command:

```
# pup

```

For a command line interface, use the following command to update the operating system:

```
# yum update

```

To install a specific package, such as vsftpd, use the following command:

```
# yum install vsftpd

```

To update a specific package, such as bind, use the following command:

```
# yum update bind

```

To find more information about the command line options available for `yum`, use the following command:

```
# man yum

```

* **Product(s)**
* [Red Hat Network](https://access.redhat.com/search?q=Red+Hat+Network&documentKind=Article%26Solution)
* [Red Hat Subscription Management](https://access.redhat.com/search?q=Red+Hat+Subscription+Management&documentKind=Article%26Solution)

* **Category**
* [Learn more](https://access.redhat.com/search?q=Learn+more&documentKind=Article%26Solution)

* **Component**
* [rhn\_register](https://access.redhat.com/search?q=rhn_register&documentKind=Article%26Solution)
* [subscription-manager](https://access.redhat.com/search?q=subscription-manager&documentKind=Article%26Solution)

* **Tags**
* [customer\_portal](https://access.redhat.com/search?q=customer_portal&documentKind=Article%26Solution)

* **Article Type**
* [General](https://access.redhat.com/search?q=General&documentKind=Article%26Solution)

## Comments

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com)

### Help

* [Contact Customer Portal](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Systems Status

### About

* [Red Hat Subscription Value](https://access.redhat.com/subscription-value)
* [About Red Hat](https://www.redhat.com/about/)
* [Red Hat Jobs](http://jobs.redhat.com)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

Copyright © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)

×
### Formatting Tips

Here are the common uses of Markdown.

Code blocks
```
~~~
Code surrounded in tildes is easier to read
~~~
```

Links/URLs`[Red Hat Customer Portal](https://access.redhat.com)`

[Learn more](/help/markdown)
Close

×
#### Request a English Translation

Are you sure you want to update a translation?
It seems an existing [English Translation](%40url) exists already.
We appreciate your interest in having Red Hat content localized to your language. Please note that excessive use of this feature could cause delays in getting specific content you are interested in translated.
Close
 [Request Japanese Translation](/articles/11258?rate=4KpVk2OisoRoaBCC1xAYYu2EqqVd-hs-lWbo3UiEzrI "Request Japanese Translation") [Request Chinese Translation](/articles/11258?rate=Djff6xI-V_Ac9jkgVml5Zy46vWj-_DUy2x9AY3QVlmM "Request Chinese Translation") [Request Korean Translation](/articles/11258?rate=Jlnc4lh8Dy-a-VpnQ5nujpRwH0WyxQjy0mAR7wwUHTU "Request Korean Translation")

×
#### Generating Machine Translation

Loading…
We are generating a machine translation for this content. Depending on the length of the content, this process could take a while.

Cancel



=== Content from launchpad.net_cfd31fe3_20250126_124614.html ===

[Log in / Register](https://launchpad.net/~blk-u/%2Blogin)

[![](/@@/person-logo)](https://launchpad.net/~blk-u)

## [Brant Knudson](https://launchpad.net/~blk-u)

* Overview
* [Code](https://code.launchpad.net/~blk-u)
* [Bugs](https://bugs.launchpad.net/~blk-u)
* [Blueprints](https://blueprints.launchpad.net/~blk-u)
* [Translations](https://translations.launchpad.net/~blk-u)
* [Answers](https://answers.launchpad.net/~blk-u)

* [Related packages](https://launchpad.net/~blk-u/%2Brelated-packages)
* [Related projects](https://launchpad.net/~blk-u/%2Brelated-projects)

## User information

Launchpad Id:
blk-u

Email:
[Log in](%2Blogin) for email information.

Member since:
2012-11-08

[![Icon of OpenStack Security SIG](https://launchpadlibrarian.net/203991792/os14.png "Member of OpenStack Security SIG")](/~openstack-ossg)
[![Icon of OpenStack Team](https://launchpadlibrarian.net/52313052/os14.png "Member of OpenStack Team")](/~openstack)

Languages:

English

Time zone:

UTC
(UTC+0000)

Karma:
[0](https://launchpad.net/~blk-u/%2Bkarma)
[Karma help](/%2Bhelp-registry/karma.html)

Social accounts:
![IRC](/@@/social-irc "IRC")
**bknudson**
 on
**chat.freenode.net**

## [All assigned blueprints](/~blk-u/%2Bspecs?role=assignee) Assigned blueprints

| **[Deprecations Cleanup](https://blueprints.launchpad.net/python-keystoneclient/%2Bspec/deprecations "deprecations")** for **python-keystoneclient**  There is a lot of code that is marked throughout keystoneclient as deprecated, however doesn't necessarily tell users of that fact. Particularly a lot of the session work has now been merged into keystone for a number of cycles. It's time to start being more agressive and popping up warnings when users are using o... | |
| --- | --- |

## [All memberships](https://launchpad.net/~blk-u/%2Bparticipation) Latest memberships

| [Oslo Policy Core](/~oslo-policy-core)  Joined on 2015-01-12 | |
| --- | --- |
| [OpenStack Security SIG](/~openstack-ossg)  Joined on 2013-10-29 | |
| [OpenStack Contributors](/~openstack-cla)  Joined on 2012-12-11 | |
| [Keystone Devs](/~keystone)  Joined on 2012-11-08 | |

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
4d55102
([Get the code!](https://dev.launchpad.net/))



=== Content from bugs.launchpad.net_984d9e37_20250126_124620.html ===

[Log in / Register](https://bugs.launchpad.net/python-keystoneclient/%2Bbug/1282865/%2Blogin)

[![](https://launchpadlibrarian.net/109253197/os64.png)](https://launchpad.net/python-keystoneclient)

## [python-keystoneclient](https://launchpad.net/python-keystoneclient)

* [Overview](https://launchpad.net/python-keystoneclient)
* [Code](https://code.launchpad.net/python-keystoneclient)
* [Bugs](https://bugs.launchpad.net/python-keystoneclient)
* [Blueprints](https://blueprints.launchpad.net/python-keystoneclient)
* [Translations](https://translations.launchpad.net/python-keystoneclient)
* [Answers](https://answers.launchpad.net/python-keystoneclient)

# [OSSA 2014-007] Keystone middleware may confuse contexts (CVE-2014-0105)

Bug #1282865 reported by
[Kieran Spear](https://launchpad.net/~kspear)
on 2014-02-21

[274](/%2Bhelp-bugs/bug-heat.html)

This bug affects 1 person

| Affects | | Status | Importance | Assigned to | Milestone |
| --- | --- | --- | --- | --- | --- |
|  | [OpenStack Security Advisory](https://bugs.launchpad.net/ossa) | Fix Released | Critical | [Tristan Cacqueray](https://launchpad.net/~tristan-cacqueray) |  |
|  | [python-keystoneclient](https://bugs.launchpad.net/python-keystoneclient) | Fix Released | Critical | [Dolph Mathews](https://launchpad.net/~dolph) | [python-keystoneclient 0.7.0](https://launchpad.net/python-keystoneclient/%2Bmilestone/0.7.0) |

### Bug Description

tl;dr: Occasionally a request from a regular user appears to Glance-registry as an admin user:

We have a server with 12 glance-registry processes running, with auth\_token middleware handling authentication.

If I run a python script that sets up Glanceclient:

glance = glanceclient.Client('1', token=xxx)

and makes the following call over and over:

glance.images.get(<private\_image\_id\_from\_another\_tenant>)

Most calls 404 because the calling tenant doesn't have access to the image. Eventually though, an image get request will succeed.

When this happens, glance-registry logs something like:

INFO glance.registry.api.v1.images [9b88678e-f606-4016-a39a-bb1ac150c029 2d474f5d54e24a56978c0332df1c36d6 e183df4e2bd045f7a9cbdb37a99929a5] Successfully retrieved image 32101b45-461e-452c-b065-4e07391c806e

User 2d474f5d54e24a56978c0332df1c36d6 and tenant e183df4e2bd045f7a9cbdb37a99929a5 are completely unrelated to the user's credentials in the python script I'm running. They're actually the user/tenant of our ceilometer admin user. Ceilometer is doing a few image GET requests per second.

The reverse of this also happens. Occasionally a request from ceilometer will assume the identity of the user in my script. Glance-registry logs the request as if it had come from my user, and denies the image GET because my user does not have the appropriate permission for the image ceilometer was trying to query.

If I comment out the "memcached\_servers" line from our log file, the problem goes away. This makes me suspect that something is going on in auth\_token middleware. When I watch the memcache entry for the token used by my script, the token data never appears to change.

What on earth is going on here? :)

## CVE References

* [2014-0105](/bugs/cve/2014-0105 "The auth_token middleware in the Open...")

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Kieran Spear (kspear)](https://launchpad.net/~kspear) wrote on 2014-02-21: |  |  | [#1](/python-keystoneclient/%2Bbug/1282865/comments/1) |
| --- | --- | --- | --- |

auth\_token middleware thinks it is retrieving the user's token from memcache, but ends up returning the token data for the admin user:

2014-02-21 16:41:56.868 28193 DEBUG keystoneclient.middleware.auth\_token [-] Returning cached token 46b4e15e0bf1bef6655dbee733867972. Token data:

{u'access': {u'token': {u'issued\_at': u'2014-02-21T05:41:51.816330', u'expires': u'2014-02-21T11:41:51Z', u'id': u'placeholder', u'tenant': {u'id': u'e4eee8dbc16a49dcbc76edac96674e96', u'enabled': True, u'description': None, u'name': u'admin'}}

46b4e15e0bf1bef6655dbee733867972 is the hash of the user's PKI token. But the token data is from another user's token!

auth\_token middleware thinks it is retrieving the user's token from memcache, but ends up returning the token data for the admin user:
2014-02-21 16:41:56.868 28193 DEBUG keystoneclient.middleware.auth\_token [-] Returning cached token 46b4e15e0bf1bef6655dbee733867972. Token data:
{u'access': {u'token': {u'issued\_at': u'2014-02-21T05:41:51.816330', u'expires': u'2014-02-21T11:41:51Z', u'id': u'placeholder', u'tenant': {u'id': u'e4eee8dbc16a49dcbc76edac96674e96', u'enabled': True, u'description': None, u'name': u'admin'}}
46b4e15e0bf1bef6655dbee733867972 is the hash of the user's PKI token. But the token data is from another user's token!

| **affects**: | glance → python-keystoneclient |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Kieran Spear (kspear)](https://launchpad.net/~kspear) wrote on 2014-02-21: |  |  | [#2](/python-keystoneclient/%2Bbug/1282865/comments/2) |
| --- | --- | --- | --- |

Looks like eventlet doesn't play nicely with python-memcache. Monkey patching 'thread' in cmd/registry.py fixes this.

Looks like eventlet doesn't play nicely with python-memcache. Monkey patching 'thread' in cmd/registry.py fixes this.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2014-02-21:  [**Re: Keystone middleware may confuse contexts**](/python-keystoneclient/%2Bbug/1282865/comments/3) |  |  | [#3](/python-keystoneclient/%2Bbug/1282865/comments/3) |
| --- | --- | --- | --- |

Looks like it's not Glance-specific at all.

Looks like it's not Glance-specific at all.

| **summary**: | - Glance-registry context leak+ Keystone middleware may confuse contexts |
| --- | --- |
| Changed in glance: | |
| **status**: | New → Invalid |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2014-02-21: |  |  | [#4](/python-keystoneclient/%2Bbug/1282865/comments/4) |
| --- | --- | --- | --- |

It's a bit random as an attack vector, but I suspect you can still trigger it using load, so probably needs an OSSA

It's a bit random as an attack vector, but I suspect you can still trigger it using load, so probably needs an OSSA

| Changed in ossa: | |
| --- | --- |
| **status**: | New → Incomplete |

[Dolph Mathews (dolph)](https://launchpad.net/~dolph)
on 2014-02-21

| Changed in python-keystoneclient: | |
| --- | --- |
| **importance**: | Undecided → Critical |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Dolph Mathews (dolph)](https://launchpad.net/~dolph) wrote on 2014-02-21: |  |  | [#5](/python-keystoneclient/%2Bbug/1282865/comments/5) |
| --- | --- | --- | --- |

I'm able to reproduce this consistently, and it does appear to be entirely dependent on eventlet monkey patching "thread". In my test, 100,000 requests through auth\_token split between two users with different authorization, their authorization gets swapped about 0.2% of the time.

With sufficient load, python-memcached enabled in auth\_token, and an unpatched thread module, eventlet produces this failure:

Traceback (most recent call last):

  File ".../lib/python2.7/site-packages/eventlet/wsgi.py", line 414, in handle\_one\_response

    write('')

  File ".../lib/python2.7/site-packages/eventlet/wsgi.py", line 354, in write

    \_writelines(towrite)

  File ".../python/2.7.6/Frameworks/Python.framework/Versions/2.7/lib/python2.7/socket.py", line 334, in writelines

    self.flush()

  File ".../python/2.7.6/Frameworks/Python.framework/Versions/2.7/lib/python2.7/socket.py", line 303, in flush

    self.\_sock.sendall(view[write\_offset:write\_offset+buffer\_size])

  File ".../lib/python2.7/site-packages/eventlet/greenio.py", line 309, in sendall

    tail = self.send(data, flags)

  File ".../lib/python2.7/site-packages/eventlet/greenio.py", line 295, in send

    total\_sent += fd.send(data[total\_sent:], flags)

error: [Errno 32] Broken pipe

And python-memcached warns about unexpected responses from memcached:

MemCached: while expecting 'STORED', got unexpected response 'VALUE tokens/acfaaff23f1576cb8485a797beb60ff4 0 1282'

  MemCached: while expecting 'STORED', got unexpected response 'END'

Given that auth\_token does not depend on eventlet itself, but instead can be run by eventlet in another service, then all services depending on eventlet and relying on auth\_token should be the ones to monkeypatch thread. That said, monkeypatching thread in keystoneclient/openstack/common/memorycache.py appears to resolve the problem as well.

Glance stable/havana appears to be affected:

<https://github.com/openstack/glance/blob/stable/havana/glance/cmd/registry.py#L30>

Glance master does not appear to be affected:

<https://github.com/openstack/glance/blob/master/glance/cmd/registry.py#L29>

I'm able to reproduce this consistently, and it does appear to be entirely dependent on eventlet monkey patching "thread". In my test, 100,000 requests through auth\_token split between two users with different authorization, their authorization gets swapped about 0.2% of the time.
With sufficient load, python-memcached enabled in auth\_token, and an unpatched thread module, eventlet produces this failure:
Traceback (most recent call last):
File ".../lib/python2.7/site-packages/eventlet/wsgi.py", line 414, in handle\_one\_response
write('')
File ".../lib/python2.7/site-packages/eventlet/wsgi.py", line 354, in write
\_writelines(towrite)
File ".../python/2.7.6/Frameworks/Python.framework/Versions/2.7/lib/python2.7/socket.py", line 334, in writelines
self.flush()
File ".../python/2.7.6/Frameworks/Python.framework/Versions/2.7/lib/python2.7/socket.py", line 303, in flush
self.\_sock.sendall(view[write\_offset:write\_offset+buffer\_size])
File ".../lib/python2.7/site-packages/eventlet/greenio.py", line 309, in sendall
tail = self.send(data, flags)
File ".../lib/python2.7/site-packages/eventlet/greenio.py", line 295, in send
total\_sent += fd.send(data[total\_sent:], flags)
error: [Errno 32] Broken pipe
And python-memcached warns about unexpected responses from memcached:
MemCached: while expecting 'STORED', got unexpected response 'VALUE tokens/acfaaff23f1576cb8485a797beb60ff4 0 1282'
MemCached: while expecting 'STORED', got unexpected response 'END'
Given that auth\_token does not depend on eventlet itself, but instead can be run by eventlet in another service, then all services depending on eventlet and relying on auth\_token should be the ones to monkeypatch thread. That said, monkeypatching thread in keystoneclient/openstack/common/memorycache.py appears to resolve the problem as well.
Glance stable/havana appears to be affected:
https://github.com/openstack/glance/blob/stable/havana/glance/cmd/registry.py#L30
Glance master does not appear to be affected:
https://github.com/openstack/glance/blob/master/glance/cmd/registry.py#L29

| Changed in python-keystoneclient: | |
| --- | --- |
| **status**: | New → Confirmed |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Dolph Mathews (dolph)](https://launchpad.net/~dolph) wrote on 2014-02-21: |  |  | [#6](/python-keystoneclient/%2Bbug/1282865/comments/6) |
| --- | --- | --- | --- |

* [keystoneclient-repro-bug-1282865.diff](https://bugs.launchpad.net/python-keystoneclient/%2Bbug/1282865/%2Battachment/3990345/%2Bfiles/keystoneclient-repro-bug-1282865.diff)
  [Edit](/python-keystoneclient/%2Bbug/1282865/%2Battachment/3990345)
  (1.1 KiB,
  text/plain)

To reproduce the issue in isolation, I wrote a simple echo service to run behind auth\_token which can inform the client if the service's perceived tenancy does not reflect the user's expectation. <https://review.openstack.org/#/c/75529/>

Patchset 1 of the above review depends on wsgiref from stdlib instead of eventlet. `keystoneclient-repro-[bug-1282865](/bugs/1282865).diff` modifies that patchset to use eventlet, and monkeypatches with eventlet similarly to how glance stable/havana does (without also monkeypatching thread).

To reproduce the issue in isolation, I wrote a simple echo service to run behind auth\_token which can inform the client if the service's perceived tenancy does not reflect the user's expectation. https://review.openstack.org/#/c/75529/
Patchset 1 of the above review depends on wsgiref from stdlib instead of eventlet. `keystoneclient-repro-bug-1282865.diff` modifies that patchset to use eventlet, and monkeypatches with eventlet similarly to how glance stable/havana does (without also monkeypatching thread).

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Dolph Mathews (dolph)](https://launchpad.net/~dolph) wrote on 2014-02-22: |  |  | [#7](/python-keystoneclient/%2Bbug/1282865/comments/7) |
| --- | --- | --- | --- |

* [repro\_bug\_1282865.py](https://bugs.launchpad.net/python-keystoneclient/%2Bbug/1282865/%2Battachment/3990374/%2Bfiles/repro_bug_1282865.py)
  [Edit](/python-keystoneclient/%2Bbug/1282865/%2Battachment/3990374)
  (3.6 KiB,
  text/x-python)

This attachment demonstrates the issue by acting as a API client to bootstrap some data in keystone, generate valid tokens and produce load against a service protected by auth\_token.

This attachment demonstrates the issue by acting as a API client to bootstrap some data in keystone, generate valid tokens and produce load against a service protected by auth\_token.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Dolph Mathews (dolph)](https://launchpad.net/~dolph) wrote on 2014-02-22: |  |  | [#8](/python-keystoneclient/%2Bbug/1282865/comments/8) |
| --- | --- | --- | --- |

* [keystoneclient-fix-bug-1282865.diff](https://bugs.launchpad.net/python-keystoneclient/%2Bbug/1282865/%2Battachment/3990378/%2Bfiles/keystoneclient-fix-bug-1282865.diff)
  [Edit](/python-keystoneclient/%2Bbug/1282865/%2Battachment/3990378)
  (982 bytes,
  text/plain)

This avoids the issue in keystoneclient by patching keystoneclient.openstack.common.memorycache (oslo)

This avoids the issue in keystoneclient by patching keystoneclient.openstack.common.memorycache (oslo)

[Dolph Mathews (dolph)](https://launchpad.net/~dolph)
on 2014-02-22

| Changed in python-keystoneclient: | |
| --- | --- |
| **assignee**: | nobody → Dolph Mathews (dolph) |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2014-02-24: |  |  | [#9](/python-keystoneclient/%2Bbug/1282865/comments/9) |
| --- | --- | --- | --- |

@Dolph: nice work. I wa

@Dolph: nice work. I wa

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2014-02-24: |  |  | [#10](/python-keystoneclient/%2Bbug/1282865/comments/10) |
| --- | --- | --- | --- |

(damn LP)

...s wondering if that could not explain the two reports we had in the past of context confusion ("Tenant A is seeing the VNC Consoles of Tenant B!")

(damn LP)
...s wondering if that could not explain the two reports we had in the past of context confusion ("Tenant A is seeing the VNC Consoles of Tenant B!")

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2014-02-24: |  |  | [#11](/python-keystoneclient/%2Bbug/1282865/comments/11) |
| --- | --- | --- | --- |

I am a bit confused as to the extent of the issue.

IIUC fixing it in python-keystoneclient is enough to cover all cases -- and then \*some\* middleware consumers that already patched eventlet.thread might be safe already (like Glance master).

Kieran: are you running Glance master or havana ?

I am a bit confused as to the extent of the issue.
IIUC fixing it in python-keystoneclient is enough to cover all cases -- and then \*some\* middleware consumers that already patched eventlet.thread might be safe already (like Glance master).
Kieran: are you running Glance master or havana ?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Dolph Mathews (dolph)](https://launchpad.net/~dolph) wrote on 2014-02-24: |  |  | [#12](/python-keystoneclient/%2Bbug/1282865/comments/12) |
| --- | --- | --- | --- |

A single fix in python-keystoneclient would be sufficient to protect any deployments carrying the patch, but I'm not familiar enough with the vulnerability management & packaging process for clients to make a recommendation against patching any affected services as well.

A single fix in python-keystoneclient would be sufficient to protect any deployments carrying the patch, but I'm not familiar enough with the vulnerability management & packaging process for clients to make a recommendation against patching any affected services as well.

[Thierry Carrez (ttx)](https://launchpad.net/~ttx)
on 2014-02-24

| Changed in ossa: | |
| --- | --- |
| **status**: | Incomplete → Confirmed |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2014-02-24: |  |  | [#13](/python-keystoneclient/%2Bbug/1282865/comments/13) |
| --- | --- | --- | --- |

I assumed any authenticated requests could results in context swap.

Memcached\_server appeared in 0.2.3 (git grep memcached\_servers 0.2.2 0.2.3).

@Kieran: Please correct me if I'm wrong about the University of Melbourne credit.

Draft impact description #1 -

Title: Privilege escalation in auth\_token middleware

Reporter: Kieran Spear (University of Melbourne)

Products: python-keystoneclient

Versions: 0.2.3 version up to 0.6.0

Description:

Kieran Spear from the University of Melbourne reported a vulnerability in python-keystoneclient auth\_token middleware. By doing repeated authenticated requests, with sufficient load on the target system, an authenticated user can inherit another authenticated user's role resulting in a privilege escalation. Note that it is related to a bad interaction between auth\_token and eventlet that is fixed if the process used eventlet thread monkey patching. Only setups using auth\_token with memcache are vulnerable.

I assumed any authenticated requests could results in context swap.
Memcached\_server appeared in 0.2.3 (git grep memcached\_servers 0.2.2 0.2.3).
@Kieran: Please correct me if I'm wrong about the University of Melbourne credit.
Draft impact description #1 -
Title: Privilege escalation in auth\_token middleware
Reporter: Kieran Spear (University of Melbourne)
Products: python-keystoneclient
Versions: 0.2.3 version up to 0.6.0
Description:
Kieran Spear from the University of Melbourne reported a vulnerability in python-keystoneclient auth\_token middleware. By doing repeated authenticated requests, with sufficient load on the target system, an authenticated user can inherit another authenticated user's role resulting in a privilege escalation. Note that it is related to a bad interaction between auth\_token and eventlet that is fixed if the process used eventlet thread monkey patching. Only setups using auth\_token with memcache are vulnerable.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Kieran Spear (kspear)](https://launchpad.net/~kspear) wrote on 2014-02-25: |  |  | [#14](/python-keystoneclient/%2Bbug/1282865/comments/14) |
| --- | --- | --- | --- |

@Dolph: Thanks for the great analysis. I suspect you'd find a higher failure rate if you change the ratio of requests. When I tested using the clients I used 1 endlessly looping user client and 5 admin clients, and saw the bug a few times per second.

@Thierry: I'm running Havana. I always forget to mention that...

@Tristan

I think this has been an issue since 0.2.0 (and before that the code was in Keystone itself):

<https://github.com/openstack/python-keystoneclient/commit/7920899af119d1697c333d202ca3272f167c19b0>

I would list the OpenStack services/versions affected too. Most of the other projects except Ceilometer [1] seem to be patching thread already (at least on master). We don't have memcache enabled for Ceilometer so I can't check whether it is vulnerable in practice.

[1] <https://github.com/openstack/ceilometer/search?q=monkey_patch&type=Code>

@Dolph: Thanks for the great analysis. I suspect you'd find a higher failure rate if you change the ratio of requests. When I tested using the clients I used 1 endlessly looping user client and 5 admin clients, and saw the bug a few times per second.
@Thierry: I'm running Havana. I always forget to mention that...
@Tristan
I think this has been an issue since 0.2.0 (and before that the code was in Keystone itself):
https://github.com/openstack/python-keystoneclient/commit/7920899af119d1697c333d202ca3272f167c19b0
I would list the OpenStack services/versions affected too. Most of the other projects except Ceilometer [1] seem to be patching thread already (at least on master). We don't have memcache enabled for Ceilometer so I can't check whether it is vulnerable in practice.
[1] https://github.com/openstack/ceilometer/search?q=monkey\_patch&type=Code

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Dolph Mathews (dolph)](https://launchpad.net/~dolph) wrote on 2014-02-25: |  |  | [#15](/python-keystoneclient/%2Bbug/1282865/comments/15) |
| --- | --- | --- | --- |

Suggested revisions to impact description:

"Note that it is related to a bad interaction between auth\_token and eventlet that is fixed if the process used eventlet thread monkey patching." -> "Note that it is related to a bad interaction between eventlet and python-memcached that is fixed if the process uses eventlet to monkey patch 'thread'."

- it's really an issue between the python-memcached and eventlet; auth\_token just happens to optionally consume python-memcached while being (typically) served by eventlet (\*\*this may affect any other service using memcached + eventlet\*\*)

- thread is worth putting in quotes IMO, because it actually results in 3 modules being patched (thread, threading and Queue) [1]

"inherit another authenticated user's role resulting in a privilege escalation" -> "assume another authenticated user's complete identity and multi-tenant authorization, potentially resulting in a privilege escalation"

- "role" is a little too narrow if I'm being pedantic -- it's not just role confusion, or authorization confusion, but completely picking up another user's authentication + authorization

- "inherit" seems to imply that it's added on to the existing (valid) authn + authz, when it fact it just replaces it

- "resulting in privilege escalation" is just a potential / likelihood, but it's not a guaranteed outcome, i suppose

[1] <http://eventlet.net/doc/patching.html#monkeypatching-the-standard-library>

Suggested revisions to impact description:
"Note that it is related to a bad interaction between auth\_token and eventlet that is fixed if the process used eventlet thread monkey patching." -> "Note that it is related to a bad interaction between eventlet and python-memcached that is fixed if the process uses eventlet to monkey patch 'thread'."
- it's really an issue between the python-memcached and eventlet; auth\_token just happens to optionally consume python-memcached while being (typically) served by eventlet (\*\*this may affect any other service using memcached + eventlet\*\*)
- thread is worth putting in quotes IMO, because it actually results in 3 modules being patched (thread, threading and Queue) [1]
"inherit another authenticated user's role resulting in a privilege escalation" -> "assume another authenticated user's complete identity and multi-tenant authorization, potentially resulting in a privilege escalation"
- "role" is a little too narrow if I'm being pedantic -- it's not just role confusion, or authorization confusion, but completely picking up another user's authentication + authorization
- "inherit" seems to imply that it's added on to the existing (valid) authn + authz, when it fact it just replaces it
- "resulting in privilege escalation" is just a potential / likelihood, but it's not a guaranteed outcome, i suppose
[1] http://eventlet.net/doc/patching.html#monkeypatching-the-standard-library

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2014-02-25: |  |  | [#16](/python-keystoneclient/%2Bbug/1282865/comments/16) |
| --- | --- | --- | --- |

I would use "Potential context confusion in Keystone middleware" as the title.

Also : "...that is fixed if the process used eventlet..." -> "...that is avoided if the calling process already used eventlet..."

-> the issue is not fixed if the process already monkey-patched 'thread', it is not vulnerable in the first place

-> "calling" process makes it IMHO clearer that we are talking about the server project using the middleware.

If we precisely analyze the grizzly/havana affected server software, we could end with something like: "In Grizzly and Havana, only Glance and Ceilometer were found to be affected. Also note that only keystone middleware setups using auth\_token with memcache are vulnerable."

I would use "Potential context confusion in Keystone middleware" as the title.
Also : "...that is fixed if the process used eventlet..." -> "...that is avoided if the calling process already used eventlet..."
-> the issue is not fixed if the process already monkey-patched 'thread', it is not vulnerable in the first place
-> "calling" process makes it IMHO clearer that we are talking about the server project using the middleware.
If we precisely analyze the grizzly/havana affected server software, we could end with something like: "In Grizzly and Havana, only Glance and Ceilometer were found to be affected. Also note that only keystone middleware setups using auth\_token with memcache are vulnerable."

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2014-02-25: |  |  | [#17](/python-keystoneclient/%2Bbug/1282865/comments/17) |
| --- | --- | --- | --- |

Many thanks for your suggestions guys!

This is the revised draft, I did not include the comprehensive affected services list because it might be overkill here and a bit risky if we miss something...

For example Nova have three differents strategies to cope with eventlet monkey patching:

\* In grizzly, some services are not monkey patched at all (like the novncproxy that Thierry mentioned)

\* In havanna, all services are monkey patched by default

\* In icehouse, if "--remote-debug" switches are used, then "thread" is not monkey patched...

What do you think if we just say that "Only keystone middleware setups using auth\_token with memcache are vulnerable" ?

@Dolph: do you know if the fix (comment #8) need to be backported for grizzly and havanna or will it works as-is ?

Draft impact description #2 -

Title: Potential context confusion in Keystone middleware

Reporter: Kieran Spear (University of Melbourne)

Products: python-keystoneclient

Versions: 0.2.0 version up to 0.6.0

Description:

Kieran Spear from the University of Melbourne reported a vulnerability in python-keystoneclient auth\_token middleware. By doing repeated authenticated requests, with sufficient load on the target system, an authenticated user can assume another authenticated user's complete identity and multi-tenant authorizations, potentially resulting in a privilege escalation. Note that it is related to a bad interaction between eventlet and python-memcached that may be avoided if the calling process already uses eventlet to monkey patch "thread". Only keystone middleware setups using auth\_token with memcache are vulnerable.

Many thanks for your suggestions guys!
This is the revised draft, I did not include the comprehensive affected services list because it might be overkill here and a bit risky if we miss something...
For example Nova have three differents strategies to cope with eventlet monkey patching:
\* In grizzly, some services are not monkey patched at all (like the novncproxy that Thierry mentioned)
\* In havanna, all services are monkey patched by default
\* In icehouse, if "--remote-debug" switches are used, then "thread" is not monkey patched...
What do you think if we just say that "Only keystone middleware setups using auth\_token with memcache are vulnerable" ?
@Dolph: do you know if the fix (comment #8) need to be backported for grizzly and havanna or will it works as-is ?
Draft impact description #2 -
Title: Potential context confusion in Keystone middleware
Reporter: Kieran Spear (University of Melbourne)
Products: python-keystoneclient
Versions: 0.2.0 version up to 0.6.0
Description:
Kieran Spear from the University of Melbourne reported a vulnerability in python-keystoneclient auth\_token middleware. By doing repeated authenticated requests, with sufficient load on the target system, an authenticated user can assume another authenticated user's complete identity and multi-tenant authorizations, potentially resulting in a privilege escalation. Note that it is related to a bad interaction between eventlet and python-memcached that may be avoided if the calling process already uses eventlet to monkey patch "thread". Only keystone middleware setups using auth\_token with memcache are vulnerable.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2014-02-25: |  |  | [#18](/python-keystoneclient/%2Bbug/1282865/comments/18) |
| --- | --- | --- | --- |

A few suggestions:

'vulnerability in python-keystoneclient auth\_token middleware' -> 'vulnerability in Keystone auth\_token middleware (shipped in python-keystoneclient)'

'can' -> 'may in certain situations'

'already uses eventlet to monkey patch "thread"' -> 'already monkey-patches "thread" to use eventlet'

Versions: I would say "all versions up to 0.6.0" -- the middleware was shipped within Keystone before, so the issue didn't start with 0.2.0.

Note that there is no need to backport the patch at all, since there is only one branch in python-keystoneclient. We may have to play tricks if we pinned python-keystoneclient to a certain version in the grizzly gate, though (a bit like the recent python-swiftclient debacle).

A few suggestions:
'vulnerability in python-keystoneclient auth\_token middleware' -> 'vulnerability in Keystone auth\_token middleware (shipped in python-keystoneclient)'
'can' -> 'may in certain situations'
'already uses eventlet to monkey patch "thread"' -> 'already monkey-patches "thread" to use eventlet'
Versions: I would say "all versions up to 0.6.0" -- the middleware was shipped within Keystone before, so the issue didn't start with 0.2.0.
Note that there is no need to backport the patch at all, since there is only one branch in python-keystoneclient. We may have to play tricks if we pinned python-keystoneclient to a certain version in the grizzly gate, though (a bit like the recent python-swiftclient debacle).

| Changed in ossa: | |
| --- | --- |
| **importance**: | Undecided → Critical |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2014-02-25: |  |  | [#19](/python-keystoneclient/%2Bbug/1282865/comments/19) |
| --- | --- | --- | --- |

With latests suggestions:

Draft impact description #3 -

Title: Potential context confusion in Keystone middleware

Reporter: Kieran Spear (University of Melbourne)

Products: python-keystoneclient

Versions: all version up to 0.6.0

Description:

Kieran Spear from the University of Melbourne reported a vulnerability in Keystone auth\_token middleware (shipped in python-keystoneclient). By doing repeated authenticated requests, with sufficient load on the target system, an authenticated user may in certain situations assume another authenticated user's complete identity and multi-tenant authorizations, potentially resulting in a privilege escalation. Note that it is related to a bad interaction between eventlet and python-memcached that may be avoided if the calling process already monkey-patches "thread" to use eventlet. Only keystone middleware setups using auth\_token with memcache are vulnerable.

With latests suggestions:
Draft impact description #3 -
Title: Potential context confusion in Keystone middleware
Reporter: Kieran Spear (University of Melbourne)
Products: python-keystoneclient
Versions: all version up to 0.6.0
Description:
Kieran Spear from the University of Melbourne reported a vulnerability in Keystone auth\_token middleware (shipped in python-keystoneclient). By doing repeated authenticated requests, with sufficient load on the target system, an authenticated user may in certain situations assume another authenticated user's complete identity and multi-tenant authorizations, potentially resulting in a privilege escalation. Note that it is related to a bad interaction between eventlet and python-memcached that may be avoided if the calling process already monkey-patches "thread" to use eventlet. Only keystone middleware setups using auth\_token with memcache are vulnerable.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2014-02-25: |  |  | [#20](/python-keystoneclient/%2Bbug/1282865/comments/20) |
| --- | --- | --- | --- |

Last-minute nitpicking (but we need to get this one right, as it's pretty massive):

all version -> All versions

By doing repeated authenticated requests -> By doing repeated requests

(we already mention that the user is authenticated later in the same sentence)

may be avoided -> should be avoided

(conveys slightly more certainty that thread-monkey-patching consumers are safe)

Last-minute nitpicking (but we need to get this one right, as it's pretty massive):
all version -> All versions
By doing repeated authenticated requests -> By doing repeated requests
(we already mention that the user is authenticated later in the same sentence)
may be avoided -> should be avoided
(conveys slightly more certainty that thread-monkey-patching consumers are safe)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2014-02-25: |  |  | [#21](/python-keystoneclient/%2Bbug/1282865/comments/21) |
| --- | --- | --- | --- |

Agree, this bug deserve much attention!

Draft impact description #4 -

Title: Potential context confusion in Keystone middleware

Reporter: Kieran Spear (University of Melbourne)

Products: python-keystoneclient

Versions: All versions up to 0.6.0

Description:

Kieran Spear from the University of Melbourne reported a vulnerability in Keystone auth\_token middleware (shipped in python-keystoneclient). By doing repeated requests, with sufficient load on the target system, an authenticated user may in certain situations assume another authenticated user's complete identity and multi-tenant authorizations, potentially resulting in a privilege escalation. Note that it is related to a bad interaction between eventlet and python-memcached that should be avoided if the calling process already monkey-patches "thread" to use eventlet. Only keystone middleware setups using auth\_token with memcache are vulnerable.

Agree, this bug deserve much attention!
Draft impact description #4 -
Title: Potential context confusion in Keystone middleware
Reporter: Kieran Spear (University of Melbourne)
Products: python-keystoneclient
Versions: All versions up to 0.6.0
Description:
Kieran Spear from the University of Melbourne reported a vulnerability in Keystone auth\_token middleware (shipped in python-keystoneclient). By doing repeated requests, with sufficient load on the target system, an authenticated user may in certain situations assume another authenticated user's complete identity and multi-tenant authorizations, potentially resulting in a privilege escalation. Note that it is related to a bad interaction between eventlet and python-memcached that should be avoided if the calling process already monkey-patches "thread" to use eventlet. Only keystone middleware setups using auth\_token with memcache are vulnerable.

| Changed in ossa: | |
| --- | --- |
| **assignee**: | nobody → Tristan Cacqueray (tristan-cacqueray) |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2014-02-25: |  |  | [#22](/python-keystoneclient/%2Bbug/1282865/comments/22) |
| --- | --- | --- | --- |

+1 on version 4 of impact description, great work!

+1 on version 4 of impact description, great work!

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Dolph Mathews (dolph)](https://launchpad.net/~dolph) wrote on 2014-02-25: |  |  | [#23](/python-keystoneclient/%2Bbug/1282865/comments/23) |
| --- | --- | --- | --- |

+1 for impact description

+1 for impact description

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2014-02-26: |  |  | [#24](/python-keystoneclient/%2Bbug/1282865/comments/24) |
| --- | --- | --- | --- |

@Dolph: could you round up some keystone-core reviews of your proposed patch ?

@Dolph: could you round up some keystone-core reviews of your proposed patch ?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Brant Knudson (blk-u)](https://launchpad.net/~blk-u) wrote on 2014-02-28: |  |  | [#25](/python-keystoneclient/%2Bbug/1282865/comments/25) |
| --- | --- | --- | --- |

@Dolph: looking at the patch in comment #8 -- it looks like the code is assuming that auth\_token is running in eventlet if it can import eventlet.patcher... but won't the work even if the server isn't running in eventlet, if eventlet is installed somewhere that it can be found?

@Dolph: looking at the patch in comment #8 -- it looks like the code is assuming that auth\_token is running in eventlet if it can import eventlet.patcher... but won't the work even if the server isn't running in eventlet, if eventlet is installed somewhere that it can be found?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Brant Knudson (blk-u)](https://launchpad.net/~blk-u) wrote on 2014-02-28: |  |  | [#26](/python-keystoneclient/%2Bbug/1282865/comments/26) |
| --- | --- | --- | --- |

Another concern is that this is going to monkeypatch threads in the middle of handling a request... isn't that supposed to happen early on in the application, like before any threads are started?

Another concern is that this is going to monkeypatch threads in the middle of handling a request... isn't that supposed to happen early on in the application, like before any threads are started?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Brant Knudson (blk-u)](https://launchpad.net/~blk-u) wrote on 2014-02-28: |  |  | [#27](/python-keystoneclient/%2Bbug/1282865/comments/27) |
| --- | --- | --- | --- |

I would rather that we said that if an application is using auth\_token middleware in eventlet then the application needs to monkeypatch threads.

I would rather that we said that if an application is using auth\_token middleware in eventlet then the application needs to monkeypatch threads.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Brant Knudson (blk-u)](https://launchpad.net/~blk-u) wrote on 2014-02-28: |  |  | [#28](/python-keystoneclient/%2Bbug/1282865/comments/28) |
| --- | --- | --- | --- |

Here's from the eventlet documentation[1]: "It is important to call monkey\_patch() as early in the lifetime of the application as possible. Try to do it as one of the first lines in the main module." So I don't think it's safe to wait until an incoming request is received to do the monkey-patching.

[1] <http://eventlet.net/doc/patching.html#monkeypatching-the-standard-library>

Here's from the eventlet documentation[1]: "It is important to call monkey\_patch() as early in the lifetime of the application as possible. Try to do it as one of the first lines in the main module." So I don't think it's safe to wait until an incoming request is received to do the monkey-patching.
[1] http://eventlet.net/doc/patching.html#monkeypatching-the-standard-library

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Dolph Mathews (dolph)](https://launchpad.net/~dolph) wrote on 2014-02-28: |  |  | [#29](/python-keystoneclient/%2Bbug/1282865/comments/29) |
| --- | --- | --- | --- |

Brant: I agree with all your concerns, and my patch is making the assumption that nothing needs to load thread / threading / Queue before python-memcached does (in which case, the monkey patch will work correctly, as happens in my test).

The only other alternative I can think of is for auth\_token to completely bail on using touching memcached if the required monkey patching hasn't already taken place? (and emit a warning)

Brant: I agree with all your concerns, and my patch is making the assumption that nothing needs to load thread / threading / Queue before python-memcached does (in which case, the monkey patch will work correctly, as happens in my test).
The only other alternative I can think of is for auth\_token to completely bail on using touching memcached if the required monkey patching hasn't already taken place? (and emit a warning)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Brant Knudson (blk-u)](https://launchpad.net/~blk-u) wrote on 2014-02-28: |  |  | [#30](/python-keystoneclient/%2Bbug/1282865/comments/30) |
| --- | --- | --- | --- |

Dolph - A patch for keystoneclient that verifies that thread was monkey patched as required in eventlet would be a good one to have. Maybe keystoneclient could use is\_monkey\_patched to see if anything else was monkeypatched and if so require that thread is monkeypatched? I don't know if you can tell that the application is running under eventlet?

The other projects that use eventlet would have to change to do the thread monkeypatching.

Dolph - A patch for keystoneclient that verifies that thread was monkey patched as required in eventlet would be a good one to have. Maybe keystoneclient could use is\_monkey\_patched to see if anything else was monkeypatched and if so require that thread is monkeypatched? I don't know if you can tell that the application is running under eventlet?
The other projects that use eventlet would have to change to do the thread monkeypatching.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Brant Knudson (blk-u)](https://launchpad.net/~blk-u) wrote on 2014-02-28: |  |  | [#31](/python-keystoneclient/%2Bbug/1282865/comments/31) |
| --- | --- | --- | --- |

Looks like auth\_token could check if any eventlet modules have been imported already, by looking at sys.modules...

import sys

 any(mod\_name for mod\_name in sys.modules.keys() if mod\_name.startswith('eventlet.'))

Looks like auth\_token could check if any eventlet modules have been imported already, by looking at sys.modules...
import sys
any(mod\_name for mod\_name in sys.modules.keys() if mod\_name.startswith('eventlet.'))

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jamie Lennox (jamielennox)](https://launchpad.net/~jamielennox) wrote on 2014-02-28: |  |  | [#32](/python-keystoneclient/%2Bbug/1282865/comments/32) |
| --- | --- | --- | --- |

Sorry, this is the first i've seen this bug. I agree with brant here that i don't want to assume that auth\_token is always running under eventlet. It's definetly not always the case.

I'd prefer to put the change in at top of openstack.common.memorycache that says:

if eventlet.already\_patched and not patcher.is\_monkey\_patched('thread'):

    raise ConfigError("You have incorrectly configured eventlet")

This should inform all servers of the problems of mixing eventlet and memcache - i'm getting kind of sick of eventlet's magic and would just prefer to raise the error. If not the same auto-patch that you proposed above for keystoneclient but in the memorycache module should be ok.

The main problem i see with that is is it possible for a server to load auth\_token middleware prior to having called the monkey patch function? In keystone and others that have a bin/keystone-all that manages the paste file internally it should be fine, however anyone that wanted to use a more pure paste deployment would load auth\_token first - is this a situation that happens in any servers? Does it need to be like a on first memcache get check thread patched and then flag it as done?

Sorry, this is the first i've seen this bug. I agree with brant here that i don't want to assume that auth\_token is always running under eventlet. It's definetly not always the case.
I'd prefer to put the change in at top of openstack.common.memorycache that says:
if eventlet.already\_patched and not patcher.is\_monkey\_patched('thread'):
raise ConfigError("You have incorrectly configured eventlet")
This should inform all servers of the problems of mixing eventlet and memcache - i'm getting kind of sick of eventlet's magic and would just prefer to raise the error. If not the same auto-patch that you proposed above for keystoneclient but in the memorycache module should be ok.
The main problem i see with that is is it possible for a server to load auth\_token middleware prior to having called the monkey patch function? In keystone and others that have a bin/keystone-all that manages the paste file internally it should be fine, however anyone that wanted to use a more pure paste deployment would load auth\_token first - is this a situation that happens in any servers? Does it need to be like a on first memcache get check thread patched and then flag it as done?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jamie Lennox (jamielennox)](https://launchpad.net/~jamielennox) wrote on 2014-02-28: |  |  | [#33](/python-keystoneclient/%2Bbug/1282865/comments/33) |
| --- | --- | --- | --- |

Ah skimmed throught that quickly and didn't realize that keystoneclient-fix-[bug-1282865](/bugs/1282865).diff was against memoryclient.

I think i prefer the ConfigError, but see that it may break existing servers so i'm happy with that.

Ah skimmed throught that quickly and didn't realize that keystoneclient-fix-bug-1282865.diff was against memoryclient.
I think i prefer the ConfigError, but see that it may break existing servers so i'm happy with that.

[Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray)
on 2014-03-03

| **summary**: | - Keystone middleware may confuse contexts+ Keystone middleware may confuse contexts (CVE-2014-0105) |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Brant Knudson (blk-u)](https://launchpad.net/~blk-u) wrote on 2014-03-03:  [**Re: Keystone middleware may confuse contexts (CVE-2014-0105)**](/python-keystoneclient/%2Bbug/1282865/comments/34) |  |  | [#34](/python-keystoneclient/%2Bbug/1282865/comments/34) |
| --- | --- | --- | --- |

I think we need to come to an agreement on the approach to take, and then we can implement it. I think the approach to take is to both:

a) change auth\_token to fail if it's configured for memcached and it's running in eventlet and 'thread' isn't monkey-patched.

b) eventlet servers that use auth\_token are changed to monkey-patch eventlet 'thread' in addition to their other monkey-patching.

I think we need to come to an agreement on the approach to take, and then we can implement it. I think the approach to take is to both:
a) change auth\_token to fail if it's configured for memcached and it's running in eventlet and 'thread' isn't monkey-patched.
b) eventlet servers that use auth\_token are changed to monkey-patch eventlet 'thread' in addition to their other monkey-patching.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2014-03-03: |  |  | [#35](/python-keystoneclient/%2Bbug/1282865/comments/35) |
| --- | --- | --- | --- |

@Brant: we should first estimate what services are actually impacted, see how easy it will be to fix server-side as a security patch.

@Brant: we should first estimate what services are actually impacted, see how easy it will be to fix server-side as a security patch.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2014-03-04: |  |  | [#36](/python-keystoneclient/%2Bbug/1282865/comments/36) |
| --- | --- | --- | --- |

My tests[1] found those services using auth\_token without "thread" patched:

\* Havana:

  glance-registry ({'socket': True, 'time': True})

\* Icehouse

  ceilometer-api ({'socket': True})

  swift

Nova in master is also vulnerable when "--remote\_debug" switches are used: "# turn off thread patching to enable the remote debugger"

[1]: <http://paste.openstack.org/show/72103/>

My tests[1] found those services using auth\_token without "thread" patched:
\* Havana:
glance-registry ({'socket': True, 'time': True})
\* Icehouse
ceilometer-api ({'socket': True})
swift
Nova in master is also vulnerable when "--remote\_debug" switches are used: "# turn off thread patching to enable the remote debugger"
[1]: http://paste.openstack.org/show/72103/

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2014-03-04: |  |  | [#37](/python-keystoneclient/%2Bbug/1282865/comments/37) |
| --- | --- | --- | --- |

* [Havana fix for glance](https://bugs.launchpad.net/python-keystoneclient/%2Bbug/1282865/%2Battachment/4006636/%2Bfiles/0001-Fix-glance-registry-eventlet-monkey-patchs.patch)
  [Edit](/python-keystoneclient/%2Bbug/1282865/%2Battachment/4006636)
  (850 bytes,
  text/plain)

While I'm not sure my tests are comprehensive (ie shouldn't the nova vncproxy also use the auth\_token middleware ?), here is an attempt at fixing glance-registry in Havana.

While I'm not sure my tests are comprehensive (ie shouldn't the nova vncproxy also use the auth\_token middleware ?), here is an attempt at fixing glance-registry in Havana.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2014-03-04: |  |  | [#38](/python-keystoneclient/%2Bbug/1282865/comments/38) |
| --- | --- | --- | --- |

* [Icehouse fix for ceilometer](https://bugs.launchpad.net/python-keystoneclient/%2Bbug/1282865/%2Battachment/4006653/%2Bfiles/0001-Fix-ceilometer-eventlet-monkey-patchs.patch)
  [Edit](/python-keystoneclient/%2Bbug/1282865/%2Battachment/4006653)
  (920 bytes,
  text/plain)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2014-03-04: |  |  | [#39](/python-keystoneclient/%2Bbug/1282865/comments/39) |
| --- | --- | --- | --- |

* [Icehouse fix for swift](https://bugs.launchpad.net/python-keystoneclient/%2Bbug/1282865/%2Battachment/4006654/%2Bfiles/0001-Fix-swift-eventlet-monkey-patchs.patch)
  [Edit](/python-keystoneclient/%2Bbug/1282865/%2Battachment/4006654)
  (962 bytes,
  text/plain)

[Thierry Carrez (ttx)](https://launchpad.net/~ttx)
on 2014-03-04

| Changed in glance: | |
| --- | --- |
| **status**: | Invalid → Confirmed |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Dolph Mathews (dolph)](https://launchpad.net/~dolph) wrote on 2014-03-10: |  |  | [#40](/python-keystoneclient/%2Bbug/1282865/comments/40) |
| --- | --- | --- | --- |

The same underlying issue was independently and publicly reported against python-keystoneclient in [bug 1289074](/bugs/1289074).

The same underlying issue was independently and publicly reported against python-keystoneclient in bug 1289074.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2014-03-12: |  |  | [#41](/python-keystoneclient/%2Bbug/1282865/comments/41) |
| --- | --- | --- | --- |

I think a security-minded read of [bug 1289074](/bugs/1289074) (ie: Garbage in tokens' cache) would lead to this issue.

So if you guys agree, I propose to open this bug and mark 1289074 as a duplicate of this one. This should also help having a fix more quickly.

I think a security-minded read of bug 1289074 (ie: Garbage in tokens' cache) would lead to this issue.
So if you guys agree, I propose to open this bug and mark 1289074 as a duplicate of this one. This should also help having a fix more quickly.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Dolph Mathews (dolph)](https://launchpad.net/~dolph) wrote on 2014-03-13: |  |  | [#42](/python-keystoneclient/%2Bbug/1282865/comments/42) |
| --- | --- | --- | --- |

[https://bugs.launchpad.net/python-keystoneclient/+bug/1289074/comments/3](https://bugs.launchpad.net/python-keystoneclient/%2Bbug/1289074/comments/3)

https://bugs.launchpad.net/python-keystoneclient/+bug/1289074/comments/3

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [gordon chung (chungg)](https://launchpad.net/~chungg) wrote on 2014-03-14: |  |  | [#43](/python-keystoneclient/%2Bbug/1282865/comments/43) |
| --- | --- | --- | --- |

haven't verified this bug in Ceilometer yet but regarding monkey\_patching eventlets... that solution won't work in Ceilometer as it causes issues (see Julien's comment in [https://bugs.launchpad.net/ceilometer/+bug/1291054](https://bugs.launchpad.net/ceilometer/%2Bbug/1291054))

if monkey\_patching eventlets is the solution, we'll need to do something differently in Ceilometer.

haven't verified this bug in Ceilometer yet but regarding monkey\_patching eventlets... that solution won't work in Ceilometer as it causes issues (see Julien's comment in https://bugs.launchpad.net/ceilometer/+bug/1291054)
if monkey\_patching eventlets is the solution, we'll need to do something differently in Ceilometer.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2014-03-17: |  |  | [#44](/python-keystoneclient/%2Bbug/1282865/comments/44) |
| --- | --- | --- | --- |

OK, if the patch proposed in [bug 1289074](/bugs/1289074) fixes this issue, we should push it in ASAP and issue an OSSA about it. We can keep this bug private (since it gives a lot more detail on exploitability) until the ossa is out.

OK, if the patch proposed in bug 1289074 fixes this issue, we should push it in ASAP and issue an OSSA about it. We can keep this bug private (since it gives a lot more detail on exploitability) until the ossa is out.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2014-03-19: |  |  | [#45](/python-keystoneclient/%2Bbug/1282865/comments/45) |
| --- | --- | --- | --- |

Cleanroom implementation of patch at <https://review.openstack.org/#/c/81078/>

Cleanroom implementation of patch at https://review.openstack.org/#/c/81078/

| Changed in ossa: | |
| --- | --- |
| **status**: | Confirmed → Triaged |
| Changed in python-keystoneclient: | |
| **status**: | Confirmed → In Progress |

[Thierry Carrez (ttx)](https://launchpad.net/~ttx)
on 2014-03-19

| **no longer affects**: | ceilometer |
| --- | --- |
| **no longer affects**: | glance |
| **no longer affects**: | swift |
| Changed in python-keystoneclient: | |
| **status**: | In Progress → Triaged |
| **status**: | Triaged → In Progress |
| Changed in ossa: | |
| **status**: | Triaged → In Progress |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Dolph Mathews (dolph)](https://launchpad.net/~dolph) wrote on 2014-03-23: |  |  | [#46](/python-keystoneclient/%2Bbug/1282865/comments/46) |
| --- | --- | --- | --- |

Reviewed: <https://review.openstack.org/81078>

Committed: <https://git.openstack.org/cgit/openstack/python-keystoneclient/commit/?id=d11553a72ee8febc26e4a76ba900984d1b778f59>

Submitter: Jenkins

Branch: master

commit d11553a72ee8febc26e4a76ba900984d1b778f59

Author: Dolph Mathews <email address hidden>

Date: Mon Mar 17 15:56:28 2014 -0500

add pooling for cache references

Change-Id: Iffb1d1bff5dc4437544a5aefef3bca0e5b17cc81

    Closes-Bug: 1289074

Reviewed: https://review.openstack.org/81078
Committed: https://git.openstack.org/cgit/openstack/python-keystoneclient/commit/?id=d11553a72ee8febc26e4a76ba900984d1b778f59
Submitter: Jenkins
Branch: master
commit d11553a72ee8febc26e4a76ba900984d1b778f59
Author: Dolph Mathews <dolph.mathews@gmail.com>
Date: Mon Mar 17 15:56:28 2014 -0500
add pooling for cache references
Change-Id: Iffb1d1bff5dc4437544a5aefef3bca0e5b17cc81
Closes-Bug: 1289074

| Changed in python-keystoneclient: | |
| --- | --- |
| **status**: | In Progress → Fix Committed |
| **milestone**: | none → 0.7.0 |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2014-03-24: |  |  | [#47](/python-keystoneclient/%2Bbug/1282865/comments/47) |
| --- | --- | --- | --- |

Thank you dolph for such a quick fix!

We are still issuing a pre-OSSA before opening this bug.

Proposed public disclosure date/time:

2014-03-27 15:00 UTC

Thank you dolph for such a quick fix!
We are still issuing a pre-OSSA before opening this bug.
Proposed public disclosure date/time:
2014-03-27 15:00 UTC

| Changed in ossa: | |
| --- | --- |
| **status**: | In Progress → Fix Committed |

[Dolph Mathews (dolph)](https://launchpad.net/~dolph)
on 2014-03-26

| Changed in python-keystoneclient: | |
| --- | --- |
| **status**: | Fix Committed → Fix Released |

[Thierry Carrez (ttx)](https://launchpad.net/~ttx)
on 2014-03-27

| **information type**: | Private Security → Public Security |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2014-03-27: |  |  | [#48](/python-keystoneclient/%2Bbug/1282865/comments/48) |
| --- | --- | --- | --- |

[OSSA 2014-007]

[OSSA 2014-007]

| **summary**: | - Keystone middleware may confuse contexts (CVE-2014-0105)+ [OSSA 2014-007] Keystone middleware may confuse contexts (CVE-2014-0105) |
| --- | --- |
| Changed in ossa: | |
| **status**: | Fix Committed → Fix Released |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Matthew Thode (prometheanfire)](https://launchpad.net/~prometheanfire) wrote on 2014-03-27: |  |  | [#49](/python-keystoneclient/%2Bbug/1282865/comments/49) |
| --- | --- | --- | --- |

Please release a patchset that matches the requirements that keystone imposes on keystoneclient

<https://github.com/openstack/keystone/blob/2013.1.5/tools/pip-requires>

python-keystoneclient>=0.2.1,<0.3

At this time I see no patch that fixes this issue for keystoneclient 0.2.5

Please release a patchset that matches the requirements that keystone imposes on keystoneclient
https://github.com/openstack/keystone/blob/2013.1.5/tools/pip-requires
python-keystoneclient>=0.2.1,<0.3
At this time I see no patch that fixes this issue for keystoneclient 0.2.5

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2014-03-28: |  |  | [#50](/python-keystoneclient/%2Bbug/1282865/comments/50) |
| --- | --- | --- | --- |

We only provide one release channel for client libraries (no stable branches). Furthermore grizzly is now unsupported.

That said, that dep capping is a bit weird, since it prevents you from actually following that release channel. I'll see if (1) that capping is abusive and (2) the patch could be backported to the 0.2.x series

We only provide one release channel for client libraries (no stable branches). Furthermore grizzly is now unsupported.
That said, that dep capping is a bit weird, since it prevents you from actually following that release channel. I'll see if (1) that capping is abusive and (2) the patch could be backported to the 0.2.x series

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Dolph Mathews (dolph)](https://launchpad.net/~dolph) wrote on 2014-03-28: |  |  | [#51](/python-keystoneclient/%2Bbug/1282865/comments/51) |
| --- | --- | --- | --- |

I believe the pin was just a cautionary convention, and not strictly necessary.

python-keystoneclient 0.3.0 didn't even exist (released Sun Jun 23 16:20:39 2013) when the pin was created (Sat Nov 17 14:45:18 2012) in pip requires:

<https://github.com/openstack/keystone/commit/e59360da677c4cd3f6a6391cfebb973c11e2ee47>

Backporting to 0.2.5 looks to be fairly ugly, but I'm playing around with it now.

I believe the pin was just a cautionary convention, and not strictly necessary.
python-keystoneclient 0.3.0 didn't even exist (released Sun Jun 23 16:20:39 2013) when the pin was created (Sat Nov 17 14:45:18 2012) in pip requires:
https://github.com/openstack/keystone/commit/e59360da677c4cd3f6a6391cfebb973c11e2ee47
Backporting to 0.2.5 looks to be fairly ugly, but I'm playing around with it now.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Dolph Mathews (dolph)](https://launchpad.net/~dolph) wrote on 2014-03-28: |  |  | [#52](/python-keystoneclient/%2Bbug/1282865/comments/52) |
| --- | --- | --- | --- |

Even better news, I'm unable to reproduce against 0.2.5! 0.3.0 appears to be the first release that is vulnerable.

Even better news, I'm unable to reproduce against 0.2.5! 0.3.0 appears to be the first release that is vulnerable.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Dolph Mathews (dolph)](https://launchpad.net/~dolph) wrote on 2014-03-28: |  |  | [#53](/python-keystoneclient/%2Bbug/1282865/comments/53) |
| --- | --- | --- | --- |

* [bug-1282865-0.2.5-backport.diff](https://bugs.launchpad.net/python-keystoneclient/%2Bbug/1282865/%2Battachment/4049114/%2Bfiles/bug-1282865-0.2.5-backport.diff)
  [Edit](/python-keystoneclient/%2Bbug/1282865/%2Battachment/4049114)
  (6.9 KiB,
  text/plain)

CORRECTION: I'm able to reproduce in 0.2.5

As it turns out, I was backporting my configuration for auth\_token which did not have the desired effect of enabling memcached in 0.2.5) due to memcache\_servers being renamed to memcached\_servers in 0.3.0 (I was setting memcached\_servers for testing).

This patch appears to fix 0.2.5 but I haven't done any integration testing, so I can't recommend it's use over 0.7.x

CORRECTION: I'm able to reproduce in 0.2.5
As it turns out, I was backporting my configuration for auth\_token which did not have the desired effect of enabling memcached in 0.2.5) due to memcache\_servers being renamed to memcached\_servers in 0.3.0 (I was setting memcached\_servers for testing).
This patch appears to fix 0.2.5 but I haven't done any integration testing, so I can't recommend it's use over 0.7.x

[See full activity log](https://bugs.launchpad.net/python-keystoneclient/%2Bbug/1282865/%2Bactivity)

To post a comment you must [log in](%2Blogin?comments=all).

* [Report a bug](/python-keystoneclient/%2Bfilebug)

This report contains
**Public Security**
information

Everyone can see this security related information.

You are
[not directly subscribed to this bug's notifications.](/python-keystoneclient/%2Bbug/1282865/%2Bsubscribe)

Subscribing...

* [Edit bug mail](https://bugs.launchpad.net/python-keystoneclient/%2Bbug/1282865/%2Bsubscriptions "View and change your subscriptions to this bug")

## Other bug subscribers

[Subscribe someone else](https://bugs.launchpad.net/python-keystoneclient/%2Bbug/1282865/%2Baddsubscriber "Launchpad will email that person whenever this bugs changes")

## Patches

* [keystoneclient-repro-bug-1282865.diff](https://bugs.launchpad.net/python-keystoneclient/%2Bbug/1282865/%2Battachment/3990345/%2Bfiles/keystoneclient-repro-bug-1282865.diff)
  [Edit](/python-keystoneclient/%2Bbug/1282865/%2Battachment/3990345 "Change patch details")
* [keystoneclient-fix-bug-1282865.diff](https://bugs.launchpad.net/python-keystoneclient/%2Bbug/1282865/%2Battachment/3990378/%2Bfiles/keystoneclient-fix-bug-1282865.diff)
  [Edit](/python-keystoneclient/%2Bbug/1282865/%2Battachment/3990378 "Change patch details")
* [Havana fix for glance](https://bugs.launchpad.net/python-keystoneclient/%2Bbug/1282865/%2Battachment/4006636/%2Bfiles/0001-Fix-glance-registry-eventlet-monkey-patchs.patch)
  [Edit](/python-keystoneclient/%2Bbug/1282865/%2Battachment/4006636 "Change patch details")
* [Icehouse fix for ceilometer](https://bugs.launchpad.net/python-keystoneclient/%2Bbug/1282865/%2Battachment/4006653/%2Bfiles/0001-Fix-ceilometer-eventlet-monkey-patchs.patch)
  [Edit](/python-keystoneclient/%2Bbug/1282865/%2Battachment/4006653 "Change patch details")
* [Icehouse fix for swift](https://bugs.launchpad.net/python-keystoneclient/%2Bbug/1282865/%2Battachment/4006654/%2Bfiles/0001-Fix-swift-eventlet-monkey-patchs.patch)
  [Edit](/python-keystoneclient/%2Bbug/1282865/%2Battachment/4006654 "Change patch details")
* [bug-1282865-0.2.5-backport.diff](https://bugs.launchpad.net/python-keystoneclient/%2Bbug/1282865/%2Battachment/4049114/%2Bfiles/bug-1282865-0.2.5-backport.diff)
  [Edit](/python-keystoneclient/%2Bbug/1282865/%2Battachment/4049114 "Change patch details")

* [Add patch](/python-keystoneclient/%2Bbug/1282865/%2Baddcomment?field.patch=on)

## Bug attachments

* [repro\_bug\_1282865.py](https://bugs.launchpad.net/python-keystoneclient/%2Bbug/1282865/%2Battachment/3990374/%2Bfiles/repro_bug_1282865.py)
  [Edit](/python-keystoneclient/%2Bbug/1282865/%2Battachment/3990374 "Change attachment details")

* [Add attachment](/python-keystoneclient/%2Bbug/1282865/%2Baddcomment)

## Remote bug watches

Bug watches keep track of this bug in other bug trackers.

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
4d55102
([Get the code!](https://dev.launchpad.net/))


