=== Content from ubuntu.com_8a5557d4_20250125_124443.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# USN-2184-1: Unity vulnerabilities

29 April 2014

The Unity lock screen could be bypassed.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Releases

* [Ubuntu 14.04 ESM](/security/notices?release=trusty)

## Packages

* [unity](/security/cves?package=unity) - Interface designed for efficiency of space and interaction.

## Details

Frédéric Bardy discovered that Unity incorrectly filtered keyboard

shortcuts when the screen was locked. A local attacker could possibly use

this issue to run commands, and unlock the current session.

Giovanni Mellini discovered that Unity could display the Dash in certain

conditions when the screen was locked. A local attacker could possibly use

this issue to run commands, and unlock the current session.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Update instructions

The problem can be corrected by updating your system to the following package versions:

##### Ubuntu 14.04

* [unity](https://launchpad.net/ubuntu/%2Bsource/unity)
  -
  [7.2.0+14.04.20140423-0ubuntu1.1](https://launchpad.net/ubuntu/%2Bsource/unity/7.2.0%2B14.04.20140423-0ubuntu1.1)

After a standard system update you need to restart your session to make all

the necessary changes.

## References

* <https://launchpad.net/bugs/1313885>
* <https://launchpad.net/bugs/1308850>

### Join the discussion

* [Ubuntu security updates mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened)
* [Security announcements mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-security-announce)

### Need help with your security needs?

Ubuntu Pro provides up to ten-year security coverage for over 23,000 open-source packages within the Ubuntu Main and Universe repositories.

[Talk to an expert to find out what would work best for you](/contact-us/form?product=pro)

### Further reading

* *Loading...*

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page



=== Content from www.openwall.com_3a78b214_20250125_124444.html ===


| [Openwall](/) * [Products](/)   + [Openwall GNU/\*/Linux   *server OS*](/Owl/)+ [Linux Kernel Runtime Guard](/lkrg/)+ [John the Ripper   *password cracker*](/john/)         - [Free & Open Source for any platform](/john/)- [in the cloud](/john/cloud/)- [Pro for Linux](/john/pro/linux/)- [Pro for macOS](/john/pro/macosx/)+ [Wordlists   *for password cracking*](/wordlists/)+ [passwdqc   *policy enforcement*](/passwdqc/)             - [Free & Open Source for Unix](/passwdqc/)- [Pro for Windows (Active Directory)](/passwdqc/windows/)+ [yescrypt   *KDF & password hashing*](/yescrypt/)+ [yespower   *Proof-of-Work (PoW)*](/yespower/)+ [crypt\_blowfish   *password hashing*](/crypt/)+ [phpass   *ditto in PHP*](/phpass/)+ [tcb   *better password shadowing*](/tcb/)+ [Pluggable Authentication Modules](/pam/)+ [scanlogd   *port scan detector*](/scanlogd/)+ [popa3d   *tiny POP3 daemon*](/popa3d/)+ [blists   *web interface to mailing lists*](/blists/)+ [msulogin   *single user mode login*](/msulogin/)+ [php\_mt\_seed   *mt\_rand() cracker*](/php_mt_seed/)* [Services](/services/)* Publications       + [Articles](/articles/)+ [Presentations](/presentations/)* Resources         + [Mailing lists](/lists/)+ [Community wiki](https://openwall.info/wiki/)+ [Source code repositories (GitHub)](https://github.com/openwall)+ [Source code repositories (CVSweb)](https://cvsweb.openwall.com)+ [File archive & mirrors](/mirrors/)+ [How to verify digital signatures](/signatures/)+ [OVE IDs](/ove/)* [What's new](/news) | |
| --- | --- |

| | [Follow @Openwall on Twitter for new release announcements and other news](https://twitter.com/openwall) | | --- | |
| --- | --- |

[[<prev]](1) [[next>]](3) [[<thread-prev]](../../../2014/04/26/2) [[thread-next>]](../../../2014/05/03/1) [[day]](.) [[month]](..) [[year]](../..) [[list]](../../..)
```

Message-ID: <535F9A59.3060107@canonical.com>
Date: Tue, 29 Apr 2014 08:26:01 -0400
From: Marc Deslauriers <marc.deslauriers@...onical.com>
To: oss-security@...ts.openwall.com
Subject: Re: Ubuntu 14.04: security problem in the lock screen

Hi,

On 14-04-26 11:06 AM, Kurt Seifried wrote:
> [https://bugs.launchpad.net/ubuntu/+source/unity/+bug/1308572](https://bugs.launchpad.net/ubuntu/%2Bsource/unity/%2Bbug/1308572)
>
> Probably needs a CVE.
>

While that particular bug was fixed before 14.04 was released, it's probably
worth assigning a CVE to it anyway for tracking purposes, since I have now
published a security update that corrects two more lock screen bugs.

Here's a summary:

Issue #1 (Before 14.04 came out):

Marco Agnese discovered that Unity 7.2.0 incorrectly handled entry activation on
the lock screen, resulting in the lock screen crashing and the session becoming
unlocked.

Reference:
[https://bugs.launchpad.net/ubuntu/+source/unity/+bug/1308572](https://bugs.launchpad.net/ubuntu/%2Bsource/unity/%2Bbug/1308572)
<http://bazaar.launchpad.net/~unity-team/unity/trunk/revision/3787>

Issue #2:

Giovanni Mellini discovered that Unity 7.2.0 could display the Dash in certain
conditions when the screen was locked. A local attacker could possibly use
this issue to run commands, and unlock the current session.

Reference:
[https://bugs.launchpad.net/ubuntu/+source/unity/+bug/1308850](https://bugs.launchpad.net/ubuntu/%2Bsource/unity/%2Bbug/1308850)
<http://bazaar.launchpad.net/~unity-team/unity/trunk/revision/3789>
<http://www.ubuntu.com/usn/usn-2184-1/>

Issue #3:

Frédéric Bardy discovered that Unity 7.2.0 incorrectly filtered keyboard
shortcuts when the screen was locked. A local attacker could possibly use
this issue to run commands, and unlock the current session.

Reference:
[https://bugs.launchpad.net/ubuntu/+source/unity/+bug/1313885](https://bugs.launchpad.net/ubuntu/%2Bsource/unity/%2Bbug/1313885)
[https://code.launchpad.net/~3v1n0/unity/lockscreen-keys-disable/+merge/217528](https://code.launchpad.net/~3v1n0/unity/lockscreen-keys-disable/%2Bmerge/217528)
<http://www.ubuntu.com/usn/usn-2184-1/>

Could CVEs please be assigned to these three issues?

Thanks!

Marc.

--
Marc Deslauriers
Ubuntu Security Engineer     | <http://www.ubuntu.com/>
Canonical Ltd.               | <http://www.canonical.com/>

```

[Powered by blists](https://www.openwall.com/blists/) - [more mailing lists](https://lists.openwall.net)

Please check out the
[Open Source Software Security Wiki](https://oss-security.openwall.org/wiki/), which is counterpart to this
[mailing list](https://oss-security.openwall.org/wiki/mailing-lists/oss-security).

Confused about [mailing lists](/lists/) and their use?
[Read about mailing lists on Wikipedia](https://en.wikipedia.org/wiki/Electronic_mailing_list)
and check out these
[guidelines on proper formatting of your messages](https://www.complang.tuwien.ac.at/anton/mail-news-errors.html).



=== Content from bugs.launchpad.net_abce6491_20250125_124446.html ===

[Log in / Register](https://bugs.launchpad.net/ubuntu/%2Bsource/unity/%2Bbug/1313885/%2Blogin)

[![](https://launchpadlibrarian.net/606381979/CoF%2064px.png)](https://launchpad.net/ubuntu)

## [Ubuntu](https://launchpad.net/ubuntu)[unity package](https://launchpad.net/ubuntu/%2Bsource/unity)

* [Overview](https://launchpad.net/ubuntu/%2Bsource/unity)
* [Code](https://code.launchpad.net/ubuntu/%2Bsource/unity)
* [Bugs](https://bugs.launchpad.net/ubuntu/%2Bsource/unity)
* Blueprints
* [Translations](https://translations.launchpad.net/ubuntu/%2Bsource/unity)
* [Answers](https://answers.launchpad.net/ubuntu/%2Bsource/unity)

# lock screen bypass

Bug #1313885 reported by
[Frederic BARDY](https://launchpad.net/~frederic-bardy)
on 2014-04-28

[322](/%2Bhelp-bugs/bug-heat.html)

This bug affects 14 people

| Affects | | Status | Importance | Assigned to | Milestone |
| --- | --- | --- | --- | --- | --- |
|  | [Unity](https://bugs.launchpad.net/unity) | Fix Released | Critical | [Irfan Fauzan](https://launchpad.net/~irfan-it2988) | [Unity 7.2.1 "14.04 SRU 1"](https://launchpad.net/unity/%2Bmilestone/7.2.1) |
|  | [unity (Ubuntu)](https://bugs.launchpad.net/ubuntu/%2Bsource/unity "Latest release: 7.7.0+23.04.20230222.2-0ubuntu8, uploaded to universe on 2025-01-03 20:38:39.973379+00:00 by Matthias Klose (doko), maintained by Ubuntu Developers (ubuntu-devel-discuss-lists)") | Fix Released | Critical | [Marco Trevisan (Treviño)](https://launchpad.net/~3v1n0) |  |
|  | [Trusty](https://bugs.launchpad.net/ubuntu/trusty/%2Bsource/unity) | Fix Released | Critical | [Marc Deslauriers](https://launchpad.net/~mdeslaur) |  |
|  | [Utopic](https://bugs.launchpad.net/ubuntu/utopic/%2Bsource/unity) | Fix Released | Critical | [Marco Trevisan (Treviño)](https://launchpad.net/~3v1n0) |  |

### Bug Description

I found a bug allowing a user to bypass the new lock screen of Ubuntu 14.04

1 - When the screen is locked just right click multiple times on the indicator bar (for example on the battery indicator), then shortcuts are available.

2 - Press ALT+F2

3 - you can execute the command you whant on behalf of the logged user.

Here is a video demonstrating this bug : <http://www.youtube.com/watch?v=d4UUB0sI5Fc>

lsb\_release -rd

Description: Ubuntu 14.04 LTS

Release: 14.04

Ubuntu version updated the 04/28/2014

apt-cache policy unity

unity:

  Installed: 7.2.0+14.04.20140416-0ubuntu1

  Candidate: 7.2.0+14.04.20140416-0ubuntu1

  Version table:

 \*\*\* 7.2.0+14.04.20140416-0ubuntu1 0

        500 <http://fr.archive.ubuntu.com/ubuntu/> trusty/main amd64 Packages

        100 /var/lib/dpkg/status

Tags:

[lockscreen](/ubuntu/%2Bsource/unity/%2Bbugs?field.tag=lockscreen)

## Related branches

[lp:~brandontschaefer/unity/lp.1313885-fix](https://code.launchpad.net/~brandontschaefer/unity/lp.1313885-fix)
![](/@@/merge-proposal-icon)
[Rejected](https://code.launchpad.net/~brandontschaefer/unity/lp.1313885-fix/%2Bmerge/217519 "Brandon Schaefer on 2014-04-29")
for merging
into
[lp:unity](https://code.launchpad.net/~unity-team/unity/trunk)

[PS Jenkins bot](https://launchpad.net/~ps-jenkins)
(community):
Approve
(continuous-integration)
on 2014-04-28

[Andrea Azzarone](https://launchpad.net/~azzar1)
(community):
Approve
on 2014-04-28

Diff: [73 lines (+18/-3)](https://code.launchpad.net/~brandontschaefer/unity/lp.1313885-fix/%2Bmerge/217519/%2Bpreview-diff/510307/%2Bfiles/preview.diff)1 file modifiedplugins/unityshell/src/unityshell.cpp (+18/-3)
[api](/~brandontschaefer/unity/lp.1313885-fix/%2Bmerge/217519/%2Bpreview-diff/510307)

[lp:~3v1n0/unity/lockscreen-keys-disable](https://code.launchpad.net/~3v1n0/unity/lockscreen-keys-disable)
![](/@@/merge-proposal-icon)
[Merged](https://code.launchpad.net/~3v1n0/unity/lockscreen-keys-disable/%2Bmerge/217528)
into
[lp:unity](https://code.launchpad.net/~unity-team/unity/trunk)
at
[revision 3792](https://bazaar.launchpad.net/~unity-team/unity/trunk/revision/3792)

[PS Jenkins bot](https://launchpad.net/~ps-jenkins)
(community):
Approve
(continuous-integration)
on 2014-04-29

[Brandon Schaefer](https://launchpad.net/~brandontschaefer)
(community):
Approve
on 2014-04-29

Diff: [311 lines (+93/-26)](https://code.launchpad.net/~3v1n0/unity/lockscreen-keys-disable/%2Bmerge/217528/%2Bpreview-diff/511156/%2Bfiles/preview.diff)8 files modifiedlockscreen/LockScreenController.cpp (+12/-3)
lockscreen/LockScreenController.h (+1/-0)
lockscreen/LockScreenShield.cpp (+14/-2)
lockscreen/LockScreenShield.h (+1/-0)
plugins/unityshell/src/unityshell.cpp (+54/-15)
plugins/unityshell/src/unityshell.h (+2/-0)
shutdown/SessionController.cpp (+7/-5)
tests/test\_session\_controller.cpp (+2/-1)
[api](/~3v1n0/unity/lockscreen-keys-disable/%2Bmerge/217528/%2Bpreview-diff/511156)

[Frederic BARDY (frederic-bardy)](https://launchpad.net/~frederic-bardy)
on 2014-04-28

| **information type**: | Private Security → Public Security |
| --- | --- |

[Marc Deslauriers (mdeslaur)](https://launchpad.net/~mdeslaur)
on 2014-04-28

| Changed in unity (Ubuntu): | |
| --- | --- |
| **status**: | New → Confirmed |
| **importance**: | Undecided → Critical |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Brandon Schaefer (brandontschaefer)](https://launchpad.net/~brandontschaefer) wrote on 2014-04-28: |  |  | [#1](/ubuntu/%2Bsource/unity/%2Bbug/1313885/comments/1) |
| --- | --- | --- | --- |

I can get the dash to pop up (which is an issue), but I cant input anything into the dash. It goes to the input for the lockscreen.

Either way, the command lens shouldn't be popping up.

I can get the dash to pop up (which is an issue), but I cant input anything into the dash. It goes to the input for the lockscreen.
Either way, the command lens shouldn't be popping up.

| Changed in unity (Ubuntu): | |
| --- | --- |
| **assignee**: | nobody → Brandon Schaefer (brandontschaefer) |
| **status**: | Confirmed → In Progress |
| Changed in unity: | |
| **status**: | New → In Progress |
| **importance**: | Undecided → Critical |
| **assignee**: | nobody → Brandon Schaefer (brandontschaefer) |

[Marco Trevisan (Treviño) (3v1n0)](https://launchpad.net/~3v1n0)
on 2014-04-29

| Changed in unity: | |
| --- | --- |
| **milestone**: | none → 7.2.1 |

[Marco Trevisan (Treviño) (3v1n0)](https://launchpad.net/~3v1n0)
on 2014-04-29

| Changed in unity: | |
| --- | --- |
| **assignee**: | Brandon Schaefer (brandontschaefer) → Marco Trevisan (Treviño) (3v1n0) |
| Changed in unity (Ubuntu): | |
| **assignee**: | Brandon Schaefer (brandontschaefer) → Marco Trevisan (Treviño) (3v1n0) |

[Marco Trevisan (Treviño) (3v1n0)](https://launchpad.net/~3v1n0)
on 2014-04-29

| **tags**: | added: lockscreen |
| --- | --- |

[Marc Deslauriers (mdeslaur)](https://launchpad.net/~mdeslaur)
on 2014-04-29

| Changed in unity (Ubuntu): | |
| --- | --- |
| **assignee**: | Marco Trevisan (Treviño) (3v1n0) → Marc Deslauriers (mdeslaur) |
| Changed in unity (Ubuntu Trusty): | |
| **status**: | New → In Progress |
| **importance**: | Undecided → Critical |
| **assignee**: | nobody → Marc Deslauriers (mdeslaur) |

[Marc Deslauriers (mdeslaur)](https://launchpad.net/~mdeslaur)
on 2014-04-29

| Changed in unity (Ubuntu Utopic): | |
| --- | --- |
| **assignee**: | Marc Deslauriers (mdeslaur) → Marco Trevisan (Treviño) (3v1n0) |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Launchpad Janitor (janitor)](https://launchpad.net/~janitor) wrote on 2014-04-29: |  |  | [#2](/ubuntu/%2Bsource/unity/%2Bbug/1313885/comments/2) |
| --- | --- | --- | --- |

This bug was fixed in the package unity - 7.2.0+14.04.20140423-0ubuntu1.1

---------------

unity (7.2.0+14.04.20140423-0ubuntu1.1) trusty-security; urgency=medium

\* SECURITY UPDATE: lock screen bypass (LP: [#1313885](/bugs/1313885))

    - debian/patches/lp1313885.patch: improve lockscreen logic in

      lockscreen/LockScreenController.cpp, lockscreen/LockScreenShield.\*,

      plugins/unityshell/src/unityshell.\*.

 -- Marc Deslauriers <email address hidden> Mon, 28 Apr 2014 22:29:13 -0400

This bug was fixed in the package unity - 7.2.0+14.04.20140423-0ubuntu1.1
---------------
unity (7.2.0+14.04.20140423-0ubuntu1.1) trusty-security; urgency=medium
\* SECURITY UPDATE: lock screen bypass (LP: #1313885)
- debian/patches/lp1313885.patch: improve lockscreen logic in
lockscreen/LockScreenController.cpp, lockscreen/LockScreenShield.\*,
plugins/unityshell/src/unityshell.\*.
-- Marc Deslauriers <marc.deslauriers@ubuntu.com> Mon, 28 Apr 2014 22:29:13 -0400

| Changed in unity (Ubuntu Trusty): | |
| --- | --- |
| **status**: | In Progress → Fix Released |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Marc Deslauriers (mdeslaur)](https://launchpad.net/~mdeslaur) wrote on 2014-04-29: |  |  | [#3](/ubuntu/%2Bsource/unity/%2Bbug/1313885/comments/3) |
| --- | --- | --- | --- |

<http://www.ubuntu.com/usn/usn-2184-1/>

http://www.ubuntu.com/usn/usn-2184-1/

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [azul (azul)](https://launchpad.net/~azul) wrote on 2014-04-29: |  |  | [#4](/ubuntu/%2Bsource/unity/%2Bbug/1313885/comments/4) |
| --- | --- | --- | --- |

I can still bypass the logscreen by rightclicking the indicators.

In order to reproduce:

Open a Terminal

Press CTRL+ALT+L to lock the screen

right click the indicators some times

type and you will enter into the terminal not the password field

The easiest way to reproduce this is to play some music with mplayer in the terminal. If you can stop the music, skip a song etc. with your keys press CTRL+c to quit mplayer. Now you can type whatever you want and it will be executed.

This probably affects other Programs. I can even switch the terminal with the default shortcuts. I guess i could also start one with CTRL+ALT+T but i need to confirm that.

I just installed the fix above. Have not rebooted though. So that might fix it.

I can still bypass the logscreen by rightclicking the indicators.
In order to reproduce:
Open a Terminal
Press CTRL+ALT+L to lock the screen
right click the indicators some times
type and you will enter into the terminal not the password field
The easiest way to reproduce this is to play some music with mplayer in the terminal. If you can stop the music, skip a song etc. with your keys press CTRL+c to quit mplayer. Now you can type whatever you want and it will be executed.
This probably affects other Programs. I can even switch the terminal with the default shortcuts. I guess i could also start one with CTRL+ALT+T but i need to confirm that.
I just installed the fix above. Have not rebooted though. So that might fix it.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [azul (azul)](https://launchpad.net/~azul) wrote on 2014-04-29: |  |  | [#5](/ubuntu/%2Bsource/unity/%2Bbug/1313885/comments/5) |
| --- | --- | --- | --- |

Confirmed that CTRL+ALT+T for a new terminal works.

Confirmed that CTRL+ALT+T for a new terminal works.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [azul (azul)](https://launchpad.net/~azul) wrote on 2014-04-29: |  |  | [#6](/ubuntu/%2Bsource/unity/%2Bbug/1313885/comments/6) |
| --- | --- | --- | --- |

reboot did not fix it.

reboot did not fix it.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Marc Deslauriers (mdeslaur)](https://launchpad.net/~mdeslaur) wrote on 2014-04-29: |  |  | [#7](/ubuntu/%2Bsource/unity/%2Bbug/1313885/comments/7) |
| --- | --- | --- | --- |

@azul: please file a new bug, that is likely a different issue.

@azul: please file a new bug, that is likely a different issue.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Mateusz Stachowski (stachowski-mateusz)](https://launchpad.net/~stachowski-mateusz) wrote on 2014-04-29: |  |  | [#8](/ubuntu/%2Bsource/unity/%2Bbug/1313885/comments/8) |
| --- | --- | --- | --- |

@azul and @Marc I reported a new bug for the problem discovered by azul.

[https://bugs.launchpad.net/ubuntu/+source/unity/+bug/1314294](https://bugs.launchpad.net/ubuntu/%2Bsource/unity/%2Bbug/1314294)

@azul and @Marc I reported a new bug for the problem discovered by azul.
https://bugs.launchpad.net/ubuntu/+source/unity/+bug/1314294

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Launchpad Janitor (janitor)](https://launchpad.net/~janitor) wrote on 2014-04-30: |  |  | [#9](/ubuntu/%2Bsource/unity/%2Bbug/1313885/comments/9) |
| --- | --- | --- | --- |

This bug was fixed in the package unity - 7.2.0+14.04.20140423-0ubuntu1.1

---------------

unity (7.2.0+14.04.20140423-0ubuntu1.1) trusty-security; urgency=medium

\* SECURITY UPDATE: lock screen bypass (LP: [#1313885](/bugs/1313885))

    - debian/patches/lp1313885.patch: improve lockscreen logic in

      lockscreen/LockScreenController.cpp, lockscreen/LockScreenShield.\*,

      plugins/unityshell/src/unityshell.\*.

 -- Marc Deslauriers <email address hidden> Mon, 28 Apr 2014 22:29:13 -0400

This bug was fixed in the package unity - 7.2.0+14.04.20140423-0ubuntu1.1
---------------
unity (7.2.0+14.04.20140423-0ubuntu1.1) trusty-security; urgency=medium
\* SECURITY UPDATE: lock screen bypass (LP: #1313885)
- debian/patches/lp1313885.patch: improve lockscreen logic in
lockscreen/LockScreenController.cpp, lockscreen/LockScreenShield.\*,
plugins/unityshell/src/unityshell.\*.
-- Marc Deslauriers <marc.deslauriers@ubuntu.com> Mon, 28 Apr 2014 22:29:13 -0400

| Changed in unity (Ubuntu Utopic): | |
| --- | --- |
| **status**: | In Progress → Fix Released |

[Marco Trevisan (Treviño) (3v1n0)](https://launchpad.net/~3v1n0)
on 2014-05-02

| Changed in unity: | |
| --- | --- |
| **status**: | In Progress → Fix Committed |

[Irfan Fauzan (irfan-it2988)](https://launchpad.net/~irfan-it2988)
on 2014-05-11

| Changed in unity: | |
| --- | --- |
| **assignee**: | Marco Trevisan (Treviño) (3v1n0) → Irfan Fauzan (irfan-it2988) |

[Stephen M. Webb (bregma)](https://launchpad.net/~bregma)
on 2014-06-04

| Changed in unity: | |
| --- | --- |
| **status**: | Fix Committed → Fix Released |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Ariel Gerardo Crespín (thematrixnmt)](https://launchpad.net/~thematrixnmt) wrote on 2015-03-22: |  |  | [#10](/ubuntu/%2Bsource/unity/%2Bbug/1313885/comments/10) |
| --- | --- | --- | --- |

Hello.

When i tried to unlock the lockscreen,i enter with any password and with no password.

The same is when i log in my session.

My account has a very strong password made during installation.

Thanks for your help.

Hello.
When i tried to unlock the lockscreen,i enter with any password and with no password.
The same is when i log in my session.
My account has a very strong password made during installation.
Thanks for your help.

[See full activity log](https://bugs.launchpad.net/ubuntu/%2Bsource/unity/%2Bbug/1313885/%2Bactivity)

To post a comment you must [log in](%2Blogin?comments=all).

* [Report a bug](/ubuntu/%2Bsource/unity/%2Bfilebug)

This report contains
**Public Security**
information

Everyone can see this security related information.

You are
[not directly subscribed to this bug's notifications.](/ubuntu/%2Bsource/unity/%2Bbug/1313885/%2Bsubscribe)

Subscribing...

* [Edit bug mail](https://bugs.launchpad.net/ubuntu/%2Bsource/unity/%2Bbug/1313885/%2Bsubscriptions "View and change your subscriptions to this bug")

## Other bug subscribers

[Subscribe someone else](https://bugs.launchpad.net/ubuntu/%2Bsource/unity/%2Bbug/1313885/%2Baddsubscriber "Launchpad will email that person whenever this bugs changes")

## Remote bug watches

Bug watches keep track of this bug in other bug trackers.

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
4d55102
([Get the code!](https://dev.launchpad.net/))



=== Content from code.launchpad.net_8f0aa2fd_20250126_083818.html ===

[Log in / Register](https://code.launchpad.net/~3v1n0/unity/lockscreen-keys-disable/%2Bmerge/217528/%2Blogin)

[![](https://launchpadlibrarian.net/53981966/unity-logo-64.png)](https://launchpad.net/unity)

## [Unity](https://launchpad.net/unity)

* [Overview](https://launchpad.net/unity)
* [Code](https://code.launchpad.net/unity)
* [Bugs](https://bugs.launchpad.net/unity)
* [Blueprints](https://blueprints.launchpad.net/unity)
* [Translations](https://translations.launchpad.net/unity)
* [Answers](https://answers.launchpad.net/unity)

# Merge lp:~3v1n0/unity/lockscreen-keys-disable into lp:unity

1. [lockscreen-keys-disable](https://code.launchpad.net/~3v1n0/unity/lockscreen-keys-disable)
2. Merge into trunk

Proposed by
[Marco Trevisan (Treviño)](https://launchpad.net/~3v1n0)
on 2014-04-29

| Status: | Merged |
| --- | --- |
| Approved by: | [Brandon Schaefer](https://launchpad.net/~brandontschaefer) on 2014-04-29 |
| Approved revision: | no longer in the source branch. |
| Merged at revision: | 3792 |
| Proposed branch: | [lp:~3v1n0/unity/lockscreen-keys-disable](/~3v1n0/unity/lockscreen-keys-disable) |
| Merge into: | [lp:unity](/~unity-team/unity/trunk) |
| Diff against target: | [311 lines (+93/-26)](https://code.launchpad.net/~3v1n0/unity/lockscreen-keys-disable/%2Bmerge/217528/%2Bpreview-diff/511156/%2Bfiles/preview.diff)8 files modifiedlockscreen/LockScreenController.cpp (+12/-3)lockscreen/LockScreenController.h (+1/-0)lockscreen/LockScreenShield.cpp (+14/-2)lockscreen/LockScreenShield.h (+1/-0)plugins/unityshell/src/unityshell.cpp (+54/-15)plugins/unityshell/src/unityshell.h (+2/-0)shutdown/SessionController.cpp (+7/-5)tests/test\_session\_controller.cpp (+2/-1) |
| To merge this branch: | bzr merge lp:~3v1n0/unity/lockscreen-keys-disable |
| Related bugs: | | [Bug #1313885: lock screen bypass](https://bugs.launchpad.net/unity/%2Bbug/1313885 "Critical - Fix Released") | Critical | Fix Released | [Remove](%2Bunlinkbug?field.bugs=1313885 "Remove link") | | --- | --- | --- | --- |   [Link a bug report](https://code.launchpad.net/~3v1n0/unity/lockscreen-keys-disable/%2Bmerge/217528/%2Blinkbug) |

| Reviewer | Review Type | Date Requested | Status |
| --- | --- | --- | --- |
| [PS Jenkins bot](https://launchpad.net/~ps-jenkins) (community) | continuous-integration |  | Approve on 2014-04-29 |
| [Brandon Schaefer](https://launchpad.net/~brandontschaefer) (community) |  | 2014-04-29 | Approve on 2014-04-29 |
| Review [via email](https://help.launchpad.net/Code/Review):  mp+217528@code.launchpad.net | | | |

### Commit message

UnityScreen: toggle activation of all the unity compiz actions when locking the screen

Also, make sure that the lockscreen views are treated as "always-on-front" windows by nux

(and this applies to both visibility and events).

### Description of the change

To post a comment you must [log in](%2Blogin).

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Brandon Schaefer (brandontschaefer)](https://launchpad.net/~brandontschaefer) wrote on 2014-04-29: |  |  | [#](/~3v1n0/unity/lockscreen-keys-disable/%2Bmerge/217528/comments/517436) |
| --- | --- | --- | --- |

Sweet. Confirmed working, and way better then my workaround. This will work for all possibly compiz actions, so this is now impossible to happen!

Sweet. Confirmed working, and way better then my workaround. This will work for all possibly compiz actions, so this is now impossible to happen!

**review:**
Approve

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [PS Jenkins bot (ps-jenkins)](https://launchpad.net/~ps-jenkins) wrote on 2014-04-29: |  |  | [#](/~3v1n0/unity/lockscreen-keys-disable/%2Bmerge/217528/comments/517453) |
| --- | --- | --- | --- |

PASSED: Continuous integration, rev:3793

<http://jenkins.qa.ubuntu.com/job/unity-ci/904/>

Executed test runs:

    SUCCESS: <http://jenkins.qa.ubuntu.com/job/unity-trusty-amd64-ci/440>

    SUCCESS: <http://jenkins.qa.ubuntu.com/job/unity-trusty-armhf-ci/436>

    SUCCESS: <http://jenkins.qa.ubuntu.com/job/unity-trusty-i386-ci/438>

Click here to trigger a rebuild:

<http://s-jenkins.ubuntu-ci:8080/job/unity-ci/904/rebuild>

PASSED: Continuous integration, rev:3793
http://jenkins.qa.ubuntu.com/job/unity-ci/904/
Executed test runs:
SUCCESS: http://jenkins.qa.ubuntu.com/job/unity-trusty-amd64-ci/440
SUCCESS: http://jenkins.qa.ubuntu.com/job/unity-trusty-armhf-ci/436
SUCCESS: http://jenkins.qa.ubuntu.com/job/unity-trusty-i386-ci/438
Click here to trigger a rebuild:
http://s-jenkins.ubuntu-ci:8080/job/unity-ci/904/rebuild

**review:**
Approve
(continuous-integration)

## Preview Diff

[H/L] Next/Prev Comment, [J/K] Next/Prev File, [N/P] Next/Prev Hunk

* [![](/@@/download)
  Download diff](https://code.launchpad.net/~3v1n0/unity/lockscreen-keys-disable/%2Bmerge/217528/%2Bpreview-diff/511156/%2Bfiles/preview.diff)
* [Side-by-side diff](?ss=1)

| 1 | === modified file 'lockscreen/LockScreenController.cpp' |
| --- | --- |
| 2 | --- lockscreen/LockScreenController.cpp 2014-04-11 07:26:11 +0000 |
| 3 | +++ lockscreen/LockScreenController.cpp 2014-04-30 15:34:13 +0000 |
| 4 | @@ -69,9 +69,14 @@ |
| 5 | EnsureShields(monitors); |
| 6 | EnsureBlankWindow(); |
| 7 | }); |
| 8 | - |
| 9 | uscreen\_connection\_->block(); |
| 10 |  |
| 11 | + hidden\_window\_connection\_ = nux::GetWindowCompositor().sigHiddenViewWindow.connect([this] (nux::BaseWindow\*) { |
| 12 | + // Another view (i.e. the shutdown dialog) might have taken the role of AlwaysOnFront window |
| 13 | + nux::GetWindowCompositor().SetAlwaysOnFrontWindow(primary\_shield\_.GetPointer()); |
| 14 | + }); |
| 15 | + hidden\_window\_connection\_->block(); |
| 16 | + |
| 17 | suspend\_connection\_ = uscreen->suspending.connect([this] { |
| 18 | if (Settings::Instance().lock\_on\_suspend()) |
| 19 | session\_manager\_->PromptLockScreen(); |
| 20 | @@ -98,6 +103,7 @@ |
| 21 | motion\_connection\_->disconnect(); |
| 22 | key\_connection\_->disconnect(); |
| 23 | uscreen\_connection\_->block(); |
| 24 | + hidden\_window\_connection\_->block(); |
| 25 | session\_manager\_->unlocked.emit(); |
| 26 |  |
| 27 | std::for\_each(shields\_.begin(), shields\_.end(), [](nux::ObjectPtr<Shield> const& shield) { |
| 28 | @@ -160,6 +166,7 @@ |
| 29 | primary\_shield\_ = shield; |
| 30 | primary\_shield\_->CheckCapsLockPrompt(); |
| 31 | shield->primary = true; |
| 32 | + nux::GetWindowCompositor().SetAlwaysOnFrontWindow(primary\_shield\_.GetPointer()); |
| 33 | auto move\_cb = sigc::mem\_fun(this, &Controller::OnPrimaryShieldMotion); |
| 34 | motion\_connection\_ = shield->grab\_motion.connect(move\_cb); |
| 35 | auto key\_cb = sigc::hide(sigc::hide(sigc::mem\_fun(this, &Controller::ResetPostLockScreenSaver))); |
| 36 | @@ -220,7 +227,7 @@ |
| 37 | blank\_window\_->SetBackgroundLayer(new nux::ColorLayer(nux::color::Black, true)); |
| 38 | blank\_window\_->SetOpacity(blank\_window\_animator\_.GetCurrentValue()); |
| 39 | blank\_window\_->ShowWindow(true); |
| 40 | - blank\_window\_->PushToFront(); |
| 41 | + nux::GetWindowCompositor().SetAlwaysOnFrontWindow(blank\_window\_.GetPointer()); |
| 42 | } |
| 43 |  |
| 44 | blank\_window\_->SetGeometry(screen\_geo); |
| 45 | @@ -264,7 +271,7 @@ |
| 46 | blank\_window\_->EnableInputWindow(true); |
| 47 | blank\_window\_->GrabPointer(); |
| 48 | blank\_window\_->GrabKeyboard(); |
| 49 | - blank\_window\_->PushToFront(); |
| 50 | + nux::GetWindowCompositor().SetAlwaysOnFrontWindow(blank\_window\_.GetPointer()); |
| 51 |  |
| 52 | blank\_window\_->mouse\_move.connect([this](int, int, int dx, int dy, unsigned long, unsigned long) { |
| 53 | if ((dx || dy) && !lockscreen\_timeout\_) HideBlankWindow(); |
| 54 | @@ -401,6 +408,7 @@ |
| 55 | WindowManager::Default().SaveInputFocus(); |
| 56 | EnsureShields(UScreen::GetDefault()->GetMonitors()); |
| 57 | uscreen\_connection\_->unblock(); |
| 58 | + hidden\_window\_connection\_->unblock(); |
| 59 |  |
| 60 | std::for\_each(shields\_.begin(), shields\_.end(), [] (nux::ObjectPtr<Shield> const& shield) { |
| 61 | shield->SetOpacity(0.0f); |
| 62 | @@ -408,6 +416,7 @@ |
| 63 | shield->PushToFront(); |
| 64 | }); |
| 65 |  |
| 66 | + nux::GetWindowCompositor().SetAlwaysOnFrontWindow(primary\_shield\_.GetPointer()); |
| 67 | animation::StartOrReverse(fade\_animator\_, animation::Direction::FORWARD); |
| 68 | } |
| 69 |  |
| 70 |  |
| 71 | === modified file 'lockscreen/LockScreenController.h' |
| 72 | --- lockscreen/LockScreenController.h 2014-04-10 06:36:43 +0000 |
| 73 | +++ lockscreen/LockScreenController.h 2014-04-30 15:34:13 +0000 |
| 74 | @@ -86,6 +86,7 @@ |
| 75 |  |
| 76 | connection::Wrapper uscreen\_connection\_; |
| 77 | connection::Wrapper suspend\_connection\_; |
| 78 | + connection::Wrapper hidden\_window\_connection\_; |
| 79 | connection::Wrapper motion\_connection\_; |
| 80 | connection::Wrapper key\_connection\_; |
| 81 |  |
| 82 |  |
| 83 | === modified file 'lockscreen/LockScreenShield.cpp' |
| 84 | --- lockscreen/LockScreenShield.cpp 2014-04-10 17:43:34 +0000 |
| 85 | +++ lockscreen/LockScreenShield.cpp 2014-04-30 15:34:13 +0000 |
| 86 | @@ -149,13 +149,25 @@ |
| 87 | { |
| 88 | if (active) |
| 89 | { |
| 90 | + regrab\_conn\_->disconnect(); |
| 91 | UnGrabPointer(); |
| 92 | UnGrabKeyboard(); |
| 93 | } |
| 94 | else |
| 95 | { |
| 96 | - GrabPointer(); |
| 97 | - GrabKeyboard(); |
| 98 | + auto& wc = nux::GetWindowCompositor(); |
| 99 | + |
| 100 | + if (!wc.GrabPointerAdd(this) || !wc.GrabKeyboardAdd(this)) |
| 101 | + { |
| 102 | + regrab\_conn\_ = WindowManager::Default().screen\_ungrabbed.connect([this] { |
| 103 | + if (primary()) |
| 104 | + { |
| 105 | + GrabPointer(); |
| 106 | + GrabKeyboard(); |
| 107 | + } |
| 108 | + regrab\_conn\_->disconnect(); |
| 109 | + }); |
| 110 | + } |
| 111 | } |
| 112 | } |
| 113 | }); |
| 114 |  |
| 115 | === modified file 'lockscreen/LockScreenShield.h' |
| 116 | --- lockscreen/LockScreenShield.h 2014-04-09 17:09:18 +0000 |
| 117 | +++ lockscreen/LockScreenShield.h 2014-04-30 15:34:13 +0000 |
| 118 | @@ -58,6 +58,7 @@ |
| 119 | nux::ObjectPtr<nux::Layout> primary\_layout\_; |
| 120 | nux::ObjectPtr<nux::Layout> cof\_layout\_; |
| 121 | connection::Wrapper panel\_active\_conn\_; |
| 122 | + connection::Wrapper regrab\_conn\_; |
| 123 | UserPromptView\* prompt\_view\_; |
| 124 | Panel\* panel\_view\_; |
| 125 | }; |
| 126 |  |
| 127 | === modified file 'plugins/unityshell/src/unityshell.cpp' |
| 128 | --- plugins/unityshell/src/unityshell.cpp 2014-04-17 18:53:52 +0000 |
| 129 | +++ plugins/unityshell/src/unityshell.cpp 2014-04-30 15:34:13 +0000 |
| 130 | @@ -2027,9 +2027,6 @@ |
| 131 | CompAction::State state, |
| 132 | CompOption::Vector& options) |
| 133 | { |
| 134 | - if (lockscreen\_controller\_->IsLocked()) |
| 135 | - return true; |
| 136 | - |
| 137 | // to receive the Terminate event |
| 138 | if (state & CompAction::StateInitKey) |
| 139 | action->setState(action->state() | CompAction::StateTermKey); |
| 140 | @@ -2226,9 +2223,6 @@ |
| 141 |  |
| 142 | void UnityScreen::SetUpAndShowSwitcher(switcher::ShowMode show\_mode) |
| 143 | { |
| 144 | - if(lockscreen\_controller\_->IsLocked()) |
| 145 | - return; |
| 146 | - |
| 147 | RaiseInputWindows(); |
| 148 |  |
| 149 | if (!optionGetAltTabBiasViewport()) |
| 150 | @@ -2481,8 +2475,7 @@ |
| 151 | return false; // early exit if the switcher is open |
| 152 | } |
| 153 |  |
| 154 | - if (PluginAdapter::Default().IsTopWindowFullscreenOnMonitorWithMouse() || |
| 155 | - lockscreen\_controller\_->IsLocked()) |
| 156 | + if (PluginAdapter::Default().IsTopWindowFullscreenOnMonitorWithMouse()) |
| 157 | { |
| 158 | return false; |
| 159 | } |
| 160 | @@ -3734,24 +3727,70 @@ |
| 161 | void UnityScreen::OnLockScreenRequested() |
| 162 | { |
| 163 | if (switcher\_controller\_->Visible()) |
| 164 | - { |
| 165 | switcher\_controller\_->Hide(false); |
| 166 | - } |
| 167 | - else if (launcher\_controller\_->IsOverlayOpen()) |
| 168 | - { |
| 169 | + |
| 170 | + if (dash\_controller\_->IsVisible()) |
| 171 | dash\_controller\_->HideDash(); |
| 172 | + |
| 173 | + if (hud\_controller\_->IsVisible()) |
| 174 | hud\_controller\_->HideHud(); |
| 175 | - } |
| 176 |  |
| 177 | launcher\_controller\_->ClearTooltips(); |
| 178 |  |
| 179 | + if (launcher\_controller\_->KeyNavIsActive()) |
| 180 | + launcher\_controller\_->KeyNavTerminate(false); |
| 181 | + |
| 182 | + if (QuicklistManager::Default()->Current()) |
| 183 | + QuicklistManager::Default()->Current()->Hide(); |
| 184 | + |
| 185 | auto& wm = WindowManager::Default(); |
| 186 | + |
| 187 | if (wm.IsScaleActive()) |
| 188 | wm.TerminateScale(); |
| 189 |  |
| 190 | + if (wm.IsExpoActive()) |
| 191 | + wm.TerminateExpo(); |
| 192 | + |
| 193 | RaiseOSK(); |
| 194 | } |
| 195 |  |
| 196 | +void UnityScreen::OnScreenLocked() |
| 197 | +{ |
| 198 | + SaveLockStamp(true); |
| 199 | + |
| 200 | + for (auto& option : getOptions()) |
| 201 | + { |
| 202 | + if (option.isAction()) |
| 203 | + { |
| 204 | + auto& value = option.value(); |
| 205 | + |
| 206 | + if (value != mOptions[UnityshellOptions::PanelFirstMenu].value()) |
| 207 | + screen->removeAction(&value.action()); |
| 208 | + } |
| 209 | + } |
| 210 | + |
| 211 | + for (auto& action : getActions()) |
| 212 | + screen->removeAction(&action); |
| 213 | + |
| 214 | + // We notify that super/alt have been released, to avoid to leave unity in inconsistent state |
| 215 | + showLauncherKeyTerminate(&optionGetShowLauncher(), CompAction::StateTermKey, getOptions()); |
| 216 | + showMenuBarTerminate(&optionGetShowMenuBar(), CompAction::StateTermKey, getOptions()); |
| 217 | +} |
| 218 | + |
| 219 | +void UnityScreen::OnScreenUnlocked() |
| 220 | +{ |
| 221 | + SaveLockStamp(false); |
| 222 | + |
| 223 | + for (auto& option : getOptions()) |
| 224 | + { |
| 225 | + if (option.isAction()) |
| 226 | + screen->addAction(&option.value().action()); |
| 227 | + } |
| 228 | + |
| 229 | + for (auto& action : getActions()) |
| 230 | + screen->addAction(&action); |
| 231 | +} |
| 232 | + |
| 233 | void UnityScreen::SaveLockStamp(bool save) |
| 234 | { |
| 235 | auto const& cache\_dir = DesktopUtilities::GetUserRuntimeDirectory(); |
| 236 | @@ -3845,8 +3884,8 @@ |
| 237 | auto manager = std::make\_shared<session::GnomeManager>(); |
| 238 | manager->lock\_requested.connect(sigc::mem\_fun(this, &UnityScreen::OnLockScreenRequested)); |
| 239 | manager->prompt\_lock\_requested.connect(sigc::mem\_fun(this, &UnityScreen::OnLockScreenRequested)); |
| 240 | - manager->locked.connect(sigc::bind(sigc::mem\_fun(this, &UnityScreen::SaveLockStamp), true)); |
| 241 | - manager->unlocked.connect(sigc::bind(sigc::mem\_fun(this, &UnityScreen::SaveLockStamp), false)); |
| 242 | + manager->locked.connect(sigc::mem\_fun(this, &UnityScreen::OnScreenLocked)); |
| 243 | + manager->unlocked.connect(sigc::mem\_fun(this, &UnityScreen::OnScreenUnlocked)); |
| 244 | session\_dbus\_manager\_ = std::make\_shared<session::DBusManager>(manager); |
| 245 | session\_controller\_ = std::make\_shared<session::Controller>(manager); |
| 246 | AddChild(session\_controller\_.get()); |
| 247 |  |
| 248 | === modified file 'plugins/unityshell/src/unityshell.h' |
| 249 | --- plugins/unityshell/src/unityshell.h 2014-04-16 22:17:50 +0000 |
| 250 | +++ plugins/unityshell/src/unityshell.h 2014-04-30 15:34:13 +0000 |
| 251 | @@ -233,6 +233,8 @@ |
| 252 | void OnMinimizeDurationChanged(); |
| 253 |  |
| 254 | void OnLockScreenRequested(); |
| 255 | + void OnScreenLocked(); |
| 256 | + void OnScreenUnlocked(); |
| 257 | void SaveLockStamp(bool); |
| 258 |  |
| 259 | switcher::Controller::Ptr switcher\_controller(); |
| 260 |  |
| 261 | === modified file 'shutdown/SessionController.cpp' |
| 262 | --- shutdown/SessionController.cpp 2014-01-06 19:50:53 +0000 |
| 263 | +++ shutdown/SessionController.cpp 2014-04-30 15:34:13 +0000 |
| 264 | @@ -101,8 +101,8 @@ |
| 265 | view\_->live\_background = true; |
| 266 |  |
| 267 | view\_window\_->ShowWindow(true); |
| 268 | - view\_window\_->PushToFront(); |
| 269 | view\_window\_->SetInputFocus(); |
| 270 | + nux::GetWindowCompositor().SetAlwaysOnFrontWindow(view\_window\_.GetPointer()); |
| 271 | nux::GetWindowCompositor().SetKeyFocusArea(view\_->key\_focus\_area()); |
| 272 | animation::StartOrReverse(fade\_animator\_, animation::Direction::FORWARD); |
| 273 | } |
| 274 | @@ -175,17 +175,19 @@ |
| 275 |  |
| 276 | void Controller::Hide() |
| 277 | { |
| 278 | - animation::StartOrReverse(fade\_animator\_, animation::Direction::BACKWARD); |
| 279 | + if (view\_window\_) |
| 280 | + animation::StartOrReverse(fade\_animator\_, animation::Direction::BACKWARD); |
| 281 | } |
| 282 |  |
| 283 | void Controller::CloseWindow() |
| 284 | { |
| 285 | - view\_window\_->PushToBack(); |
| 286 | - view\_window\_->ShowWindow(false); |
| 287 | view\_window\_->UnGrabPointer(); |
| 288 | view\_window\_->UnGrabKeyboard(); |
| 289 | + view\_window\_->ShowWindow(false); |
| 290 | view\_window\_->EnableInputWindow(false); |
| 291 | - view\_->live\_background = false; |
| 292 | + |
| 293 | + view\_ = nullptr; |
| 294 | + view\_window\_ = nullptr; |
| 295 |  |
| 296 | nux::GetWindowCompositor().SetKeyFocusArea(nullptr); |
| 297 | WindowManager::Default().RestoreInputFocus(); |
| 298 |  |
| 299 | === modified file 'tests/test\_session\_controller.cpp' |
| 300 | --- tests/test\_session\_controller.cpp 2014-03-21 04:40:12 +0000 |
| 301 | +++ tests/test\_session\_controller.cpp 2014-04-30 15:34:13 +0000 |
| 302 | @@ -105,7 +105,8 @@ |
| 303 | tick\_source.tick(ANIMATION\_DURATION); |
| 304 |  |
| 305 | EXPECT\_FALSE(controller.Visible()); |
| 306 | - EXPECT\_FALSE(controller.view\_->live\_background()); |
| 307 | + EXPECT\_FALSE(controller.view\_window\_.IsValid()); |
| 308 | + EXPECT\_FALSE(controller.view\_.IsValid()); |
| 309 | } |
| 310 |  |
| 311 | struct Inhibited : TestSessionController, testing::WithParamInterface<bool> {}; |

## Subscribers

People
subscribed via source and target branches

![](/@@/mail) to all changes:

* [Alin Andrei](https://launchpad.net/~nilarimogard)

* [Alvaro Leal (Effenberg0x0)](https://launchpad.net/~effenberg0x0)

* [Andrea Azzarone](https://launchpad.net/~azzar1)

* [Brandon Schaefer](https://launchpad.net/~brandontschaefer)

* [Christopher Townsend](https://launchpad.net/~townsend)

* [DX Unity Bugs](https://launchpad.net/~dx-unity-bugs)

* [Jason Armstrong](https://launchpad.net/~mercurymod)

* [Joey-Elijah Sneddon](https://launchpad.net/~joey-elijah)

* [Kai-Heng Feng](https://launchpad.net/~kaihengfeng)

* [Loïc Molinari](https://launchpad.net/~loic.molinari)

* [MC Return](https://launchpad.net/~mc-return)

* [Marco Trevisan (Treviño)](https://launchpad.net/~3v1n0)

* [Olli Ries](https://launchpad.net/~ories)

* [Rahul](https://launchpad.net/~rahul.chaudhary)

* [Sathishkumar D](https://launchpad.net/~sathishkumarbe)

* [Stephen Matthews](https://launchpad.net/~scmsable)

* [Unity Team](https://launchpad.net/~unity-team)

* [deaunapaul](https://launchpad.net/~waxmigs2902)

![](/@@/mail) to status/vote changes:

* [Jim Romines](https://launchpad.net/~jimromines-gmail)

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
4d55102
([Get the code!](https://dev.launchpad.net/))



=== Content from www.openwall.com_993cd605_20250125_124444.html ===


| [Openwall](/) * [Products](/)   + [Openwall GNU/\*/Linux   *server OS*](/Owl/)+ [Linux Kernel Runtime Guard](/lkrg/)+ [John the Ripper   *password cracker*](/john/)         - [Free & Open Source for any platform](/john/)- [in the cloud](/john/cloud/)- [Pro for Linux](/john/pro/linux/)- [Pro for macOS](/john/pro/macosx/)+ [Wordlists   *for password cracking*](/wordlists/)+ [passwdqc   *policy enforcement*](/passwdqc/)             - [Free & Open Source for Unix](/passwdqc/)- [Pro for Windows (Active Directory)](/passwdqc/windows/)+ [yescrypt   *KDF & password hashing*](/yescrypt/)+ [yespower   *Proof-of-Work (PoW)*](/yespower/)+ [crypt\_blowfish   *password hashing*](/crypt/)+ [phpass   *ditto in PHP*](/phpass/)+ [tcb   *better password shadowing*](/tcb/)+ [Pluggable Authentication Modules](/pam/)+ [scanlogd   *port scan detector*](/scanlogd/)+ [popa3d   *tiny POP3 daemon*](/popa3d/)+ [blists   *web interface to mailing lists*](/blists/)+ [msulogin   *single user mode login*](/msulogin/)+ [php\_mt\_seed   *mt\_rand() cracker*](/php_mt_seed/)* [Services](/services/)* Publications       + [Articles](/articles/)+ [Presentations](/presentations/)* Resources         + [Mailing lists](/lists/)+ [Community wiki](https://openwall.info/wiki/)+ [Source code repositories (GitHub)](https://github.com/openwall)+ [Source code repositories (CVSweb)](https://cvsweb.openwall.com)+ [File archive & mirrors](/mirrors/)+ [How to verify digital signatures](/signatures/)+ [OVE IDs](/ove/)* [What's new](/news) | |
| --- | --- |

| | [Follow @Openwall on Twitter for new release announcements and other news](https://twitter.com/openwall) | | --- | |
| --- | --- |

[[<prev]](../../../2014/05/02/8) [[next>]](2) [[<thread-prev]](../../../2014/04/29/2) [[day]](.) [[month]](..) [[year]](../..) [[list]](../../..)
```

Message-Id: <201405030710.s437AZ3n010816@linus.mitre.org>
Date: Sat, 3 May 2014 03:10:35 -0400 (EDT)
From: cve-assign@...re.org
To: marc.deslauriers@...onical.com
Cc: cve-assign@...re.org, oss-security@...ts.openwall.com
Subject: Re: Ubuntu 14.04: security problem in the lock screen

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Issues #1, #2, and #3 are clearly within the scope of CVE, and have
their CVE IDs below. The common theme is "the user intended to lock
the screen, the UI indicates that the screen is successfully locked,
the user physically leaves, but this locking can then be bypassed by a
physically present attacker."

Two of the other bugs referenced within pages for #1, #2, and #3 are

  [https://bugs.launchpad.net/ubuntu/+source/unity/+bug/1308572/comments/6](https://bugs.launchpad.net/ubuntu/%2Bsource/unity/%2Bbug/1308572/comments/6)

and

  [https://bugs.launchpad.net/ubuntu/+source/gnome-screensaver/+bug/49579](https://bugs.launchpad.net/ubuntu/%2Bsource/gnome-screensaver/%2Bbug/49579)

Quite possibly, these should also have CVE IDs, but there are
potentially valid counterarguments. First, at a high level, neither of
these matches the "common theme" described above.

For 1308572/comments/6, one counterargument is that a user isn't
entitled to expect that screen locking will continue to work
flawlessly if he decides to kill arbitrary processes that are, more or
less, related to screen/display functionality. Also, the risk is very
low in the sense that, before a user physically left, it would usually
be obvious that the screen was not successfully locked. However, there
is conceivably a scenario in which killing compiz is a supported (or,
at least, reasonable) user activity, and the user must leave
immediately after a screen-locking attempt without waiting even a few
seconds.

For 49579, there are many ways to summarize the long discussion: here
is one of them. A typical end user may expect that automatic screen
locking succeeds regardless of what the user had been doing (e.g., if
the user was in the middle of a menu operation). A developer may
expect that automatic screen locking succeeds in cases where the
implementation is achievable in a reasonable amount of time. There are
(at least) three possible conclusions:

  1. The end user wins. This is a vulnerability regardless of what
     documentation exists, because it is unreasonable to expect an end
     user to learn about the failure conditions.

  2. This is a vulnerability if the documentation is not "good
     enough." For example, if the only documentation is bug 49579
     itself, maybe that's not enough.

  3. The developer wins. This is never a vulnerability. Yes, it would
     be nice for automatic screen locking to succeed in more cases,
     but this is not a high-value security feature for all users, and
     it's OK for development to use a "reasonable effort" approach
     rather than a "must cover every possible case at all costs"
     approach.

> Issue #1 (Before 14.04 came out):
>
> Marco Agnese discovered that Unity 7.2.0 incorrectly handled entry activation on
> the lock screen, resulting in the lock screen crashing and the session becoming
> unlocked.
>
> Reference:
> [https://bugs.launchpad.net/ubuntu/+source/unity/+bug/1308572](https://bugs.launchpad.net/ubuntu/%2Bsource/unity/%2Bbug/1308572)
> <http://bazaar.launchpad.net/~unity-team/unity/trunk/revision/3787>

Use CVE-2014-3202.

> Issue #2:
>
> Giovanni Mellini discovered that Unity 7.2.0 could display the Dash in certain
> conditions when the screen was locked. A local attacker could possibly use
> this issue to run commands, and unlock the current session.
>
> Reference:
> [https://bugs.launchpad.net/ubuntu/+source/unity/+bug/1308850](https://bugs.launchpad.net/ubuntu/%2Bsource/unity/%2Bbug/1308850)
> <http://bazaar.launchpad.net/~unity-team/unity/trunk/revision/3789>
> <http://www.ubuntu.com/usn/usn-2184-1/>

Use CVE-2014-3203.

> Issue #3:
>
> Frederic Bardy discovered that Unity 7.2.0 incorrectly filtered keyboard
> shortcuts when the screen was locked. A local attacker could possibly use
> this issue to run commands, and unlock the current session.
>
> Reference:
> [https://bugs.launchpad.net/ubuntu/+source/unity/+bug/1313885](https://bugs.launchpad.net/ubuntu/%2Bsource/unity/%2Bbug/1313885)
> [https://code.launchpad.net/~3v1n0/unity/lockscreen-keys-disable/+merge/217528](https://code.launchpad.net/~3v1n0/unity/lockscreen-keys-disable/%2Bmerge/217528)
> <http://www.ubuntu.com/usn/usn-2184-1/>

Use CVE-2014-3204.

- --
CVE assignment team, MITRE CVE Numbering Authority
M/S M300
202 Burlington Road, Bedford, MA 01730 USA
[ PGP key available through <http://cve.mitre.org/cve/request_id.html> ]
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.14 (SunOS)

iQEcBAEBAgAGBQJTZJVNAAoJEKllVAevmvms96YH/iwHSHG581FZ0v2fAjEEqXlP
aAi1Fy65ejwxP1mEnpgw15p9mu8OTD1vYNn4+ibdvQ/MuGKuS/uSsTeH6vixhB/f
U4SmcOqTGc0ejEiRIG9Pf1CoLZnP8fYuwPRYKuF4ah8AZKNbfnwmL3AO8/SaUtN2
7E/f+KuajcUOvbKBTcANPffILUufyNSzXWc+DxsRcNYjaDs9K4B5VDLZbT8NbquB
rUFWPPhiAWFlKq+XAz6uLLcKug8L775xhbB60iPzhYa6tqatuJSuHm9CGb/5HwJT
NXK8VyfaPfg+/iTzyjNHNO8wKq6QdlM9C3Qn6hyBIhUTa37WjnSqVBpPtQMwCzg=
=kdSf
-----END PGP SIGNATURE-----

```

[Powered by blists](https://www.openwall.com/blists/) - [more mailing lists](https://lists.openwall.net)

Please check out the
[Open Source Software Security Wiki](https://oss-security.openwall.org/wiki/), which is counterpart to this
[mailing list](https://oss-security.openwall.org/wiki/mailing-lists/oss-security).

Confused about [mailing lists](/lists/) and their use?
[Read about mailing lists on Wikipedia](https://en.wikipedia.org/wiki/Electronic_mailing_list)
and check out these
[guidelines on proper formatting of your messages](https://www.complang.tuwien.ac.at/anton/mail-news-errors.html).


