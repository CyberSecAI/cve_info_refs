=== Content from bugs.launchpad.net_3e20c69d_20250126_044436.html ===

[Log in / Register](https://bugs.launchpad.net/horizon/%2Bbugs/%2Blogin)

[![](https://launchpadlibrarian.net/62132867/os64.png)](https://launchpad.net/horizon)

## [OpenStack Dashboard (Horizon)](https://launchpad.net/horizon)

* [Overview](https://launchpad.net/horizon)
* [Code](https://code.launchpad.net/horizon)
* Bugs
* [Blueprints](https://blueprints.launchpad.net/horizon)
* [Translations](https://translations.launchpad.net/horizon)
* [Answers](https://answers.launchpad.net/horizon)

[Advanced search](?advanced=1)

Ubuntu
also
tracks bugs for packages derived from this project:
[horizon in Ubuntu](/ubuntu/%2Bsource/horizon),
[openstack-dashboard in Ubuntu](/ubuntu/%2Bsource/openstack-dashboard).

| **1** → **75** of 559 results | First • Previous • [**Next**](https://bugs.launchpad.net/horizon/%2Bbugs?memo=75&start=75) • [Last](https://bugs.launchpad.net/horizon/%2Bbugs?direction=backwards&start=525) |
| --- | --- |

High

In Progress

#1746184
[Table of networks or routers does't support pagination](https://bugs.launchpad.net/horizon/%2Bbug/1746184)

OpenStack Dashboard (Horizon)

28

High

Confirmed

#1913447
[AngularJS form does not work when COMPRESS\_ENABLED=False](https://bugs.launchpad.net/horizon/%2Bbug/1913447)

OpenStack Dashboard (Horizon)

6

High

Triaged

#1926345
[Horizon should use the authorization API in keystone to build authorization targets for users](https://bugs.launchpad.net/horizon/%2Bbug/1926345)

OpenStack Dashboard (Horizon)

6

High

Triaged

#1926347
[Add a configuration option so that horizon can be deployed to enforce scope](https://bugs.launchpad.net/horizon/%2Bbug/1926347)

OpenStack Dashboard (Horizon)

6

High

New

#1947847
[Horizon selenium-headless/integration-tests job start failing after updating selenium version to4.0.0](https://bugs.launchpad.net/horizon/%2Bbug/1947847)

OpenStack Dashboard (Horizon)

6

Medium

Confirmed

#1301374
[Failure in workflows cause the message to be displayed twice](https://bugs.launchpad.net/horizon/%2Bbug/1301374)

OpenStack Dashboard (Horizon)

26

Medium

Confirmed

#1318407
[horizon.tables.js update function needs tests](https://bugs.launchpad.net/horizon/%2Bbug/1318407)

OpenStack Dashboard (Horizon)

6

Medium

Confirmed

#1321865
[Project panels (like Networks panel) can't be actually disabled](https://bugs.launchpad.net/horizon/%2Bbug/1321865)

OpenStack Dashboard (Horizon)

6

Medium

In Progress

#1330461
[Project list is not sorted usefully](https://bugs.launchpad.net/horizon/%2Bbug/1330461)

OpenStack Dashboard (Horizon)

14

Medium

Confirmed

#1331391
[Usage overview page time's out with a large number of tenants and instances](https://bugs.launchpad.net/horizon/%2Bbug/1331391)

OpenStack Dashboard (Horizon)

20

Medium

Triaged

#1333240
[filter project doesn't work per all pages](https://bugs.launchpad.net/horizon/%2Bbug/1333240)

OpenStack Dashboard (Horizon)

34

Medium

In Progress

#1400568
[Metadata widget should deal with non-unique properties](https://bugs.launchpad.net/horizon/%2Bbug/1400568)

OpenStack Dashboard (Horizon)

6

Medium

In Progress

#1411239
[Policy checks for get\_image, get\_images not enforced when launching instances](https://bugs.launchpad.net/horizon/%2Bbug/1411239)

OpenStack Dashboard (Horizon)

16

Medium

New

#1417762
[XSS in network create error reporting](https://bugs.launchpad.net/horizon/%2Bbug/1417762)

OpenStack Dashboard (Horizon)

12

Medium

In Progress

#1420894
[Filter in Project page works in only current page.](https://bugs.launchpad.net/horizon/%2Bbug/1420894)

OpenStack Dashboard (Horizon)

8

Medium

In Progress

#1426415
[policy should support AND and OR checks for panels](https://bugs.launchpad.net/horizon/%2Bbug/1426415)

OpenStack Dashboard (Horizon)

6

Medium

Confirmed

#1431407
[dashboard won't let in user without access to default panel](https://bugs.launchpad.net/horizon/%2Bbug/1431407)

OpenStack Dashboard (Horizon)

12

Medium

In Progress

#1433847
[Horizon crashes when a non-admin user try to resize a locked instance](https://bugs.launchpad.net/horizon/%2Bbug/1433847)

OpenStack Dashboard (Horizon)

6

Medium

In Progress

#1441522
[Downtime for one of nodes with memcached causes delays in Horizon](https://bugs.launchpad.net/horizon/%2Bbug/1441522)

OpenStack Dashboard (Horizon)

10

Medium

Confirmed

#1442310
[Nova API in Horizon sometimes act as a bottleneck](https://bugs.launchpad.net/horizon/%2Bbug/1442310)

OpenStack Dashboard (Horizon)

18

Medium

New

#1450550
[User ID string escape in Manage Projects](https://bugs.launchpad.net/horizon/%2Bbug/1450550)

OpenStack Dashboard (Horizon)

10

Medium

Confirmed

#1451659
[Federated user cannot select domain for project creation](https://bugs.launchpad.net/horizon/%2Bbug/1451659)

OpenStack Dashboard (Horizon)

20

Medium

In Progress

#1451960
[Building Dashboard Tutorial test fails](https://bugs.launchpad.net/horizon/%2Bbug/1451960)

OpenStack Dashboard (Horizon)

10

Medium

New

#1455976
[admin user is not logged into Primary Project by default](https://bugs.launchpad.net/horizon/%2Bbug/1455976)

OpenStack Dashboard (Horizon)

6

Medium

Confirmed

#1483639
[Nova and Horizon allow inappropriate actions to be performed on baremetal nodes](https://bugs.launchpad.net/horizon/%2Bbug/1483639)

OpenStack Dashboard (Horizon)

34

Medium

Triaged

#1487590
[IMAGE\_CUSTOM\_PROPERTY\_TITLES is not available for Angular JS](https://bugs.launchpad.net/horizon/%2Bbug/1487590)

OpenStack Dashboard (Horizon)

6

Medium

In Progress

#1496627
[hz-magic-search-bar does not honor isServer property](https://bugs.launchpad.net/horizon/%2Bbug/1496627)

OpenStack Dashboard (Horizon)

6

Medium

Confirmed

#1502304
[Auto dismiss angular alerts using user settings](https://bugs.launchpad.net/horizon/%2Bbug/1502304)

OpenStack Dashboard (Horizon)

6

Medium

In Progress

#1519560
[unify volume type extra specs dialogue](https://bugs.launchpad.net/horizon/%2Bbug/1519560)

OpenStack Dashboard (Horizon)

6

Medium

In Progress

#1519892
[There is now way to pass custom redirect url as success/failure url to modal forms](https://bugs.launchpad.net/horizon/%2Bbug/1519892)

OpenStack Dashboard (Horizon)

6

Medium

New

#1521595
[Each page refresh always trigger a get on nova extensions](https://bugs.launchpad.net/horizon/%2Bbug/1521595)

OpenStack Dashboard (Horizon)

6

Medium

In Progress

#1533910
[Relocating panel to a different dashboard via Pluggable Settings causes TemplateDoesNotExist](https://bugs.launchpad.net/horizon/%2Bbug/1533910)

OpenStack Dashboard (Horizon)

18

Medium

New

#1541489
[Tests fail if a panel is disabled](https://bugs.launchpad.net/horizon/%2Bbug/1541489)

OpenStack Dashboard (Horizon)

6

Medium

In Progress

#1544990
[Python table JS polling is borked - multiple errors](https://bugs.launchpad.net/horizon/%2Bbug/1544990)

OpenStack Dashboard (Horizon)

6

Medium

Confirmed

#1545724
[Pages are not refilled when the first page becomes empty](https://bugs.launchpad.net/horizon/%2Bbug/1545724)

OpenStack Dashboard (Horizon)

12

Medium

In Progress

#1547290
[We currently do not generate Javascript API docs](https://bugs.launchpad.net/horizon/%2Bbug/1547290)

OpenStack Dashboard (Horizon)

6

Medium

Confirmed

#1552895
[new launch instance breaks if instances are lauched quickly](https://bugs.launchpad.net/horizon/%2Bbug/1552895)

OpenStack Dashboard (Horizon)

6

Medium

Confirmed

#1558773
[new launch instance isn't tab key friendly](https://bugs.launchpad.net/horizon/%2Bbug/1558773)

OpenStack Dashboard (Horizon)

6

Medium

Confirmed

#1568809
[Add new fixed IP to existing Neutron port, if one is attached](https://bugs.launchpad.net/horizon/%2Bbug/1568809)

OpenStack Dashboard (Horizon)

12

Medium

Confirmed

#1573433
[Finding 2 networks in the networks page even though the items per page setting is set to 1](https://bugs.launchpad.net/horizon/%2Bbug/1573433)

OpenStack Dashboard (Horizon)

6

Medium

Confirmed

#1573869
[Redirect to a modal-like panel after a new volume type extra specs is created](https://bugs.launchpad.net/horizon/%2Bbug/1573869)

OpenStack Dashboard (Horizon)

10

Medium

Confirmed

#1592965
[i18n: babel\_extract\_angular should trim whitespaces in AngularJS templates](https://bugs.launchpad.net/horizon/%2Bbug/1592965)

OpenStack Dashboard (Horizon)

14

Medium

New

#1597458
[Branding: New LI should use themable selects](https://bugs.launchpad.net/horizon/%2Bbug/1597458)

OpenStack Dashboard (Horizon)

6

Medium

Confirmed

#1598047
[Admin panel should be displayed only Cloud admin](https://bugs.launchpad.net/horizon/%2Bbug/1598047)

OpenStack Dashboard (Horizon)

14

Medium

Confirmed

#1600383
[domain information of the selected project on create network modal should be provided](https://bugs.launchpad.net/horizon/%2Bbug/1600383)

OpenStack Dashboard (Horizon)

14

Medium

In Progress

#1615104
[Chart doesn't reflect the changes when creating a volume from an image](https://bugs.launchpad.net/horizon/%2Bbug/1615104)

OpenStack Dashboard (Horizon)

6

Medium

Confirmed

#1616669
[Policy check target is inconsistent in use of domain\_id](https://bugs.launchpad.net/horizon/%2Bbug/1616669)

OpenStack Dashboard (Horizon)

16

Medium

In Progress

#1624748
[Admin image table: wrong visibility for private images which are not shared with the current project](https://bugs.launchpad.net/horizon/%2Bbug/1624748)

OpenStack Dashboard (Horizon)

10

Medium

Confirmed

#1626379
[Truncated tooltip Japanese text found in Detach Volume dialog](https://bugs.launchpad.net/horizon/%2Bbug/1626379)

OpenStack Dashboard (Horizon)

6

Medium

Confirmed

#1634277
[dhcp should be set to enabled when an ipv6 address mode is selected](https://bugs.launchpad.net/horizon/%2Bbug/1634277)

OpenStack Dashboard (Horizon)

6

Medium

Confirmed

#1635562
[Federated ephemeral users should not be managed](https://bugs.launchpad.net/horizon/%2Bbug/1635562)

OpenStack Dashboard (Horizon)

6

Medium

Triaged

#1640239
[Unit test code installed in deployment](https://bugs.launchpad.net/horizon/%2Bbug/1640239)

OpenStack Dashboard (Horizon)

6

Medium

Confirmed

#1640537
[Federated users should not see change password page](https://bugs.launchpad.net/horizon/%2Bbug/1640537)

OpenStack Dashboard (Horizon)

6

Medium

Confirmed

#1646305
[Federation URL is public, but AUTH\_URL is private](https://bugs.launchpad.net/horizon/%2Bbug/1646305)

OpenStack Dashboard (Horizon)

6

Medium

Triaged

#1647399
[issue with non listing snapshots in images list in rebuild instance window](https://bugs.launchpad.net/horizon/%2Bbug/1647399)

OpenStack Dashboard (Horizon)

26

Medium

Confirmed

#1649183
[image category buttons don't appear in newton](https://bugs.launchpad.net/horizon/%2Bbug/1649183)

OpenStack Dashboard (Horizon)

6

Medium

Triaged

#1655560
[Horizon doesn't obtain domain scoped tokens for users coming through websso](https://bugs.launchpad.net/horizon/%2Bbug/1655560)

OpenStack Dashboard (Horizon)

6

Medium

Confirmed

#1678204
[User logged out when transitioning to a project with non-admin role](https://bugs.launchpad.net/horizon/%2Bbug/1678204)

OpenStack Dashboard (Horizon)

8

Medium

In Progress

#1702833
[Image page filter with "Visibility" should not executed against an API](https://bugs.launchpad.net/horizon/%2Bbug/1702833)

OpenStack Dashboard (Horizon)

6

Medium

New

#1703313
[DataTable column level policy\_rules doesn't work.](https://bugs.launchpad.net/horizon/%2Bbug/1703313)

OpenStack Dashboard (Horizon)

10

Medium

Confirmed

#1705013
[Opening of Console screen for a VM from horizon takes huge amount of time](https://bugs.launchpad.net/horizon/%2Bbug/1705013)

OpenStack Dashboard (Horizon)

10

Medium

Confirmed

#1716834
[Network Topology graph "twitches"](https://bugs.launchpad.net/horizon/%2Bbug/1716834)

OpenStack Dashboard (Horizon)

6

Medium

Confirmed

#1732741
[Image Create Sets Property architecture=''](https://bugs.launchpad.net/horizon/%2Bbug/1732741)

OpenStack Dashboard (Horizon)

6

Medium

In Progress

#1736636
[When launch an instance, selecting the source gets the volume snapshot list incorrectly](https://bugs.launchpad.net/horizon/%2Bbug/1736636)

OpenStack Dashboard (Horizon)

6

Medium

Confirmed

#1741007
[project table supports no pagination](https://bugs.launchpad.net/horizon/%2Bbug/1741007)

OpenStack Dashboard (Horizon)

6

Medium

Confirmed

#1741009
[use ram to filter specific flavor when launch instance has error](https://bugs.launchpad.net/horizon/%2Bbug/1741009)

OpenStack Dashboard (Horizon)

6

Medium

Confirmed

#1746973
[image format not filled(once again)](https://bugs.launchpad.net/horizon/%2Bbug/1746973)

OpenStack Dashboard (Horizon)

10

Medium

Confirmed

#1768821
[[Safari browser] Menu bar on 'Identity / Projects' page is moved down when selecting filter type](https://bugs.launchpad.net/horizon/%2Bbug/1768821)

OpenStack Dashboard (Horizon)

6

Medium

Confirmed

#1772232
[User gets logged out when editing a snapshot](https://bugs.launchpad.net/horizon/%2Bbug/1772232)

OpenStack Dashboard (Horizon)

6

Medium

Confirmed

#1775227
["Create Role" and "Delete Role" buttons are missing for a domain admin user](https://bugs.launchpad.net/horizon/%2Bbug/1775227)

OpenStack Dashboard (Horizon)

16

Medium

Confirmed

#1782732
[Sorting of items in panels is not done correctly when there is huge list](https://bugs.launchpad.net/horizon/%2Bbug/1782732)

OpenStack Dashboard (Horizon)

10

Medium

In Progress

#1788367
[Live migration invoked from Horizon skips scheduler while using metadata](https://bugs.launchpad.net/horizon/%2Bbug/1788367)

OpenStack Dashboard (Horizon)

14

Medium

Confirmed

#1794661
[Cannot delete attachment for an orphan volume](https://bugs.launchpad.net/horizon/%2Bbug/1794661)

OpenStack Dashboard (Horizon)

10

Medium

Confirmed

#1803486
[Floating and negative values accepted in volume size field.](https://bugs.launchpad.net/horizon/%2Bbug/1803486)

OpenStack Dashboard (Horizon)

6

Medium

Confirmed

#1803500
[Image list in Launch Instance form doesn't do dynamic API requests](https://bugs.launchpad.net/horizon/%2Bbug/1803500)

OpenStack Dashboard (Horizon)

10

| **1** → **75** of 559 results | First • Previous • [**Next**](https://bugs.launchpad.net/horizon/%2Bbugs?memo=75&start=75) • [Last](https://bugs.launchpad.net/horizon/%2Bbugs?direction=backwards&start=525) |
| --- | --- |

* [Report a bug](%2Bfilebug)

Bug supervisor:
[Horizon Bugs](https://launchpad.net/~horizon-bugs)

* [New bugs](%2Bbugs?search=Search&field.status=New)
* [Open bugs](https://bugs.launchpad.net/horizon/%2Bbugs)
* [In-progress bugs](%2Bbugs?search=Search&field.status=In+Progress)
* [Critical bugs](%2Bbugs?search=Search&field.importance=Critical&field.status=New&field.status=Incomplete&field.status=Confirmed&field.status=Triaged&field.status=In+Progress&field.status=Fix+Committed)
* [High importance bugs](%2Bbugs?search=Search&field.importance=High&field.status=New&field.status=Incomplete&field.status=Confirmed&field.status=Triaged&field.status=In+Progress&field.status=Fix+Committed)
* [Incomplete bugs](https://bugs.launchpad.net/horizon/%2Bexpirable-bugs)
  (can expire)
* [Bugs fixed elsewhere](https://bugs.launchpad.net/horizon/%2Bbugs?field.status_upstream=resolved_upstream)
* [Bugs with patches](/horizon/%2Bpatches)
* [Open CVE bugs](https://bugs.launchpad.net/horizon/%2Bbugs?field.has_cve=on)
  - [CVE reports](/horizon/%2Bcve)

![](/@@/spinner)

Show more tags…
Show fewer tags…

## Milestone-targeted bugs

* 82
  [next](https://launchpad.net/horizon/%2Bmilestone/next)

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
4d55102
([Get the code!](https://dev.launchpad.net/))



=== Content from launchpad.net_9e50c715_20250126_044442.html ===

[Log in / Register](https://launchpad.net/~tristan-cacqueray/%2Blogin)

[![](/@@/person-logo)](https://launchpad.net/~tristan-cacqueray)

## [Tristan Cacqueray](https://launchpad.net/~tristan-cacqueray)

* Overview
* [Code](https://code.launchpad.net/~tristan-cacqueray)
* [Bugs](https://bugs.launchpad.net/~tristan-cacqueray)
* [Blueprints](https://blueprints.launchpad.net/~tristan-cacqueray)
* [Translations](https://translations.launchpad.net/~tristan-cacqueray)
* [Answers](https://answers.launchpad.net/~tristan-cacqueray)

* [Related packages](https://launchpad.net/~tristan-cacqueray/%2Brelated-packages)
* [Related projects](https://launchpad.net/~tristan-cacqueray/%2Brelated-projects)

## User information

Launchpad Id:
tristan-cacqueray

Email:
[Log in](%2Blogin) for email information.

Member since:
2013-10-25

[![Icon of OpenStack Security SIG](https://launchpadlibrarian.net/203991792/os14.png "Member of OpenStack Security SIG")](/~openstack-ossg)

Signed Ubuntu Code of Conduct:
Yes

Languages:

English

OpenPGP keys:

EB103DE8B5E69E631C6FF17922B9A05C925CC5D8

SSH keys:

[localadmin@controller](%2Bsshkeys)

Time zone:

UTC
(UTC+0000)

Karma:
[0](https://launchpad.net/~tristan-cacqueray/%2Bkarma)
[Karma help](/%2Bhelp-registry/karma.html)

Social accounts:
![IRC](/@@/social-irc "IRC")
**tristanC**
 on
**irc.freenode.net**

## [All memberships](https://launchpad.net/~tristan-cacqueray/%2Bparticipation) Latest memberships

| [Swiftsync dev](/~swiftsync-devteam)  Joined on 2014-02-13 | |
| --- | --- |
| [OpenStack Security SIG](/~openstack-ossg)  Joined on 2013-12-12 | |

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
4d55102
([Get the code!](https://dev.launchpad.net/))



=== Content from launchpad.net_6569c874_20250126_044446.html ===

[Log in / Register](https://bugs.launchpad.net/horizon/%2Bbug/1308727/%2Blogin)

[![](https://launchpadlibrarian.net/62132867/os64.png)](https://launchpad.net/horizon)

## [OpenStack Dashboard (Horizon)](https://launchpad.net/horizon)

* [Overview](https://launchpad.net/horizon)
* [Code](https://code.launchpad.net/horizon)
* [Bugs](https://bugs.launchpad.net/horizon)
* [Blueprints](https://blueprints.launchpad.net/horizon)
* [Translations](https://translations.launchpad.net/horizon)
* [Answers](https://answers.launchpad.net/horizon)

# [OSSA 2014-023] XSS in Horizon Heat template - resource name (CVE-2014-3473)

Bug #1308727 reported by
[Jason Hullinger](https://launchpad.net/~jason-hullinger)
on 2014-04-16

[266](/%2Bhelp-bugs/bug-heat.html)

This bug affects 1 person

| Affects | | Status | Importance | Assigned to | Milestone |
| --- | --- | --- | --- | --- | --- |
|  | [OpenStack Dashboard (Horizon)](https://bugs.launchpad.net/horizon) | Fix Released | High | [Julie Pichon](https://launchpad.net/~jpichon) | [OpenStack Dashboard (Horizon) 2014.2 "juno"](https://launchpad.net/horizon/%2Bmilestone/2014.2) |
|  | [Havana](https://bugs.launchpad.net/horizon/havana) | Fix Released | High | [Julie Pichon](https://launchpad.net/~jpichon) | [OpenStack Dashboard (Horizon) 2013.2.4](https://launchpad.net/horizon/%2Bmilestone/2013.2.4) |
|  | [Icehouse](https://bugs.launchpad.net/horizon/icehouse) | Fix Released | High | [Julie Pichon](https://launchpad.net/~jpichon) | [OpenStack Dashboard (Horizon) 2014.1.2](https://launchpad.net/horizon/%2Bmilestone/2014.1.2) |
|  | [OpenStack Security Advisory](https://bugs.launchpad.net/ossa) | Fix Released | Medium | [Tristan Cacqueray](https://launchpad.net/~tristan-cacqueray) |  |

### Bug Description

The attached yaml will result in a Cross Site Script when viewing the resources or events of an Orchestration stack in the following paths:

/project/stacks/stack/{stack\_id}/?tab=stack\_details\_\_resources

/project/stacks/stack/{stack\_id}/?tab=stack\_details\_\_events

The A tag's href attribute does not properly URL encode the name of the resource string resulting in escaping out of the attribute and arbitrary HTML written to the page.

Tags:

[heat](/horizon/%2Bbugs?field.tag=heat)
[security](/horizon/%2Bbugs?field.tag=security)
[horizon](/horizon/%2Bbugs?field.tag=horizon)
[xss](/horizon/%2Bbugs?field.tag=xss)

## Related branches

[lp:ubuntu/trusty-security/horizon](https://code.launchpad.net/~ubuntu-branches/ubuntu/trusty/horizon/trusty-security)

## CVE References

* [2014-3473](/bugs/cve/2014-3473 "Cross-site scripting (XSS) vulnerabil...")

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jason Hullinger (jason-hullinger)](https://launchpad.net/~jason-hullinger) wrote on 2014-04-16: |  |  | [#1](/horizon/%2Bbug/1308727/comments/1) |
| --- | --- | --- | --- |

* [xss\_resource\_name.yaml](https://bugs.launchpad.net/horizon/%2Bbug/1308727/%2Battachment/4085696/%2Bfiles/xss_resource_name.yaml)
  [Edit](/horizon/%2Bbug/1308727/%2Battachment/4085696)
  (282 bytes,
  text/plain)

[Jason Hullinger (jason-hullinger)](https://launchpad.net/~jason-hullinger)
on 2014-04-16

| **information type**: | Private Security → Private |
| --- | --- |
| **information type**: | Private → Private Security |

[Grant Murphy (gmurphy)](https://launchpad.net/~gmurphy)
on 2014-04-16

| Changed in ossa: | |
| --- | --- |
| **status**: | New → Incomplete |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jason Hullinger (jason-hullinger)](https://launchpad.net/~jason-hullinger) wrote on 2014-04-17: |  |  | [#2](/horizon/%2Bbug/1308727/comments/2) |
| --- | --- | --- | --- |

What additional information would you like? Are you unable to reproduce? I'm running DevStack on Ubuntu 12.04.4 LTS. Steps to reproduce:

Upload the attached template file in Orchestration->Stacks and create a new instance. Click on the Stack Name and go to the Resources or Events tab. The HTML output is:

<a href="my\_instance"><img src="zz" onerror="alert(1)">" class=""&gt;my\_instance"&gt;&lt;img src=zz onerror=alert(1)&gt;</a>

This is due to the resource name in the attached yaml file, which I will paste here:

======

heat\_template\_version: 2013-05-23

description: Simple template to deploy a single compute instance

resources:

  my\_instance"><img src=zz onerror=alert(1)>:

    type: OS::Nova::Server

    properties:

      key\_name: my\_key

      image: cirros-0.3.1-x86\_64-uec

      flavor: m1.nano

======

Please let me know if you need further information.

What additional information would you like? Are you unable to reproduce? I'm running DevStack on Ubuntu 12.04.4 LTS. Steps to reproduce:
Upload the attached template file in Orchestration->Stacks and create a new instance. Click on the Stack Name and go to the Resources or Events tab. The HTML output is:
<a href="my\_instance"><img src="zz" onerror="alert(1)">" class=""&gt;my\_instance"&gt;&lt;img src=zz onerror=alert(1)&gt;</a>
This is due to the resource name in the attached yaml file, which I will paste here:
======
heat\_template\_version: 2013-05-23
description: Simple template to deploy a single compute instance
resources:
my\_instance"><img src=zz onerror=alert(1)>:
type: OS::Nova::Server
properties:
key\_name: my\_key
image: cirros-0.3.1-x86\_64-uec
flavor: m1.nano
======
Please let me know if you need further information.

[Grant Murphy (gmurphy)](https://launchpad.net/~gmurphy)
on 2014-04-18

| Changed in ossa: | |
| --- | --- |
| **status**: | Incomplete → Confirmed |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2014-04-18: |  |  | [#3](/horizon/%2Bbug/1308727/comments/3) |
| --- | --- | --- | --- |

Could Horizon folks confirm that they repoduced it ? Looks valid to me.

Could Horizon folks confirm that they repoduced it ? Looks valid to me.

[Thierry Carrez (ttx)](https://launchpad.net/~ttx)
on 2014-04-18

| Changed in ossa: | |
| --- | --- |
| **importance**: | Undecided → Medium |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Paul McMillan (paul-mcmillan)](https://launchpad.net/~paul-mcmillan) wrote on 2014-04-18: |  |  | [#4](/horizon/%2Bbug/1308727/comments/4) |
| --- | --- | --- | --- |

Yes, the templates in this entire module appear to be improperly written.

As explained at the top of the Django Security docs:

<https://docs.djangoproject.com/en/dev/topics/security/>

The automatic HTML escaping does NOT allow you to assign values into properties in templates. The fix for this (and the rest of the latent XSS issues in this module) is to go through all of the templates, eliminating any unescaped assignment to properties.

Furthermore, the url construction needs to be refactored to properly use Django's url reversing mechanisms, preferably inside the templates. As it currently stands, things like this:

<https://github.com/openstack/horizon/blob/master/openstack_dashboard/dashboards/project/stacks/templates/stacks/_stack_info.html#L14>

are likely to be vulnerabilities. I'll take a look through the templates and catalog a detailed list of things that need to be cleaned up.

Fixing this and related bugs is going to be a relatively large cleanup task.

It's probably worth auditing the rest of the Horizon templates for this kind of behavior, since clearly existing code reviewers didn't know to look for this pattern of abuse.

Yes, the templates in this entire module appear to be improperly written.
As explained at the top of the Django Security docs:
https://docs.djangoproject.com/en/dev/topics/security/
The automatic HTML escaping does NOT allow you to assign values into properties in templates. The fix for this (and the rest of the latent XSS issues in this module) is to go through all of the templates, eliminating any unescaped assignment to properties.
Furthermore, the url construction needs to be refactored to properly use Django's url reversing mechanisms, preferably inside the templates. As it currently stands, things like this:
https://github.com/openstack/horizon/blob/master/openstack\_dashboard/dashboards/project/stacks/templates/stacks/\_stack\_info.html#L14
are likely to be vulnerabilities. I'll take a look through the templates and catalog a detailed list of things that need to be cleaned up.
Fixing this and related bugs is going to be a relatively large cleanup task.
It's probably worth auditing the rest of the Horizon templates for this kind of behavior, since clearly existing code reviewers didn't know to look for this pattern of abuse.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Paul McMillan (paul-mcmillan)](https://launchpad.net/~paul-mcmillan) wrote on 2014-04-18: |  |  | [#5](/horizon/%2Bbug/1308727/comments/5) |
| --- | --- | --- | --- |

A quick look at just the stacks dashboard shows:

This is probably the reported vulnerability:

<https://github.com/openstack/horizon/blob/56addb790a40da1feae360f3f413dc1f539ed01a/openstack_dashboard/dashboards/project/stacks/templates/stacks/_detail_topology.html#L7>

This is likely to be a vulnerability:

<https://github.com/openstack/horizon/blob/56addb790a40da1feae360f3f413dc1f539ed01a/openstack_dashboard/dashboards/project/stacks/templates/stacks/_resource_overview.html#L15>

This looks user-controlled, so also a problem:

<https://github.com/openstack/horizon/blob/56addb790a40da1feae360f3f413dc1f539ed01a/openstack_dashboard/dashboards/project/stacks/templates/stacks/_stack_info.html#L14>

Obviously I'm not going to open a new ticket about these separate issues that weren't in the original report, but as you can see, there's some fundamental problems. I didn't examine the rest of Horizon, someone should do that.

A quick look at just the stacks dashboard shows:
This is probably the reported vulnerability:
https://github.com/openstack/horizon/blob/56addb790a40da1feae360f3f413dc1f539ed01a/openstack\_dashboard/dashboards/project/stacks/templates/stacks/\_detail\_topology.html#L7
This is likely to be a vulnerability:
https://github.com/openstack/horizon/blob/56addb790a40da1feae360f3f413dc1f539ed01a/openstack\_dashboard/dashboards/project/stacks/templates/stacks/\_resource\_overview.html#L15
This looks user-controlled, so also a problem:
https://github.com/openstack/horizon/blob/56addb790a40da1feae360f3f413dc1f539ed01a/openstack\_dashboard/dashboards/project/stacks/templates/stacks/\_stack\_info.html#L14
Obviously I'm not going to open a new ticket about these separate issues that weren't in the original report, but as you can see, there's some fundamental problems. I didn't examine the rest of Horizon, someone should do that.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jason Hullinger (jason-hullinger)](https://launchpad.net/~jason-hullinger) wrote on 2014-04-18: |  |  | [#6](/horizon/%2Bbug/1308727/comments/6) |
| --- | --- | --- | --- |

Hi Paul, thanks for taking a look. I went through the templates above and I believe that this is the one containing the vulnerability: <https://github.com/openstack/horizon/blob/56addb790a40da1feae360f3f413dc1f539ed01a/openstack_dashboard/dashboards/project/stacks/templates/stacks/_stack_info.html#L14>

The other ones look interesting as well but I do not believe they are vulnerable since they don't seem to take content from the user:

Contains the stack UUID, so not vulnerable

<https://github.com/openstack/horizon/blob/56addb790a40da1feae360f3f413dc1f539ed01a/openstack_dashboard/dashboards/project/stacks/templates/stacks/_detail_topology.html#L7>

I believe this too is a URL containing the UUID of a physical resource in a nested stack, so I don't believe that one is vulnerable either.

<https://github.com/openstack/horizon/blob/56addb790a40da1feae360f3f413dc1f539ed01a/openstack_dashboard/dashboards/project/stacks/templates/stacks/_resource_overview.html#L15>

Hi Paul, thanks for taking a look. I went through the templates above and I believe that this is the one containing the vulnerability: https://github.com/openstack/horizon/blob/56addb790a40da1feae360f3f413dc1f539ed01a/openstack\_dashboard/dashboards/project/stacks/templates/stacks/\_stack\_info.html#L14
The other ones look interesting as well but I do not believe they are vulnerable since they don't seem to take content from the user:
Contains the stack UUID, so not vulnerable
https://github.com/openstack/horizon/blob/56addb790a40da1feae360f3f413dc1f539ed01a/openstack\_dashboard/dashboards/project/stacks/templates/stacks/\_detail\_topology.html#L7
I believe this too is a URL containing the UUID of a physical resource in a nested stack, so I don't believe that one is vulnerable either.
https://github.com/openstack/horizon/blob/56addb790a40da1feae360f3f413dc1f539ed01a/openstack\_dashboard/dashboards/project/stacks/templates/stacks/\_resource\_overview.html#L15

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2014-04-22: |  |  | [#7](/horizon/%2Bbug/1308727/comments/7) |
| --- | --- | --- | --- |

Even if they are not directly exploitable, it would be good to fix the others in the same patch.

Even if they are not directly exploitable, it would be good to fix the others in the same patch.

| Changed in horizon: | |
| --- | --- |
| **status**: | New → Confirmed |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jason Hullinger (jason-hullinger)](https://launchpad.net/~jason-hullinger) wrote on 2014-04-22: |  |  | [#8](/horizon/%2Bbug/1308727/comments/8) |
| --- | --- | --- | --- |

Very much agreed it would be best to fix the templates since they could become vulnerable in the future.

Very much agreed it would be best to fix the templates since they could become vulnerable in the future.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Paul McMillan (paul-mcmillan)](https://launchpad.net/~paul-mcmillan) wrote on 2014-04-22: |  |  | [#9](/horizon/%2Bbug/1308727/comments/9) |
| --- | --- | --- | --- |

I'm not familiar enough with the codebase to conclusively say that the second two instances don't pull the UUID or any part of physical resource url from a user-provided value. We've had problems in the past where arbitrary unicode was allowed in things like project or usernames, but then caused problems in urls like these.

Additionally, it's not uncommon throughout openstack to generate a fully qualified url from the current http request host, which can result in various kinds of stored XSS. See, for example, this similar vulnerability: <https://www.djangoproject.com/weblog/2013/feb/19/security/#s-issue-host-header-poisoning>

I'm not familiar enough with the codebase to conclusively say that the second two instances don't pull the UUID or any part of physical resource url from a user-provided value. We've had problems in the past where arbitrary unicode was allowed in things like project or usernames, but then caused problems in urls like these.
Additionally, it's not uncommon throughout openstack to generate a fully qualified url from the current http request host, which can result in various kinds of stored XSS. See, for example, this similar vulnerability: https://www.djangoproject.com/weblog/2013/feb/19/security/#s-issue-host-header-poisoning

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2014-04-24: |  |  | [#10](/horizon/%2Bbug/1308727/comments/10) |
| --- | --- | --- | --- |

Here is impact description #1

Note: I used 8914ed95 to track down affected versions.

Title: XSS in Horizon-Orchestration through resource name

Reporter: Jason Hullinger (HP)

Products: Horizon

Versions: 2013.2 to 2013.2.3, and 2014.1

Description:

Jason Hullinger from Hewlett Packard reported a vulnerability in Horizon Orchestration dashboard. By tricking an Horizon user, a malicious templates owner/catalog, may trigger an XSS once a corrupted template is used in the Orchestration/Stack section of Horizon, resulting in potential assets stealing (horizon user/admin access credentials (session cookies/CSRF tokens), VMs/Network configuration/management, tenants confidential informartion, etc.). Only setups using Heat and Horizon are affected.

Here is impact description #1
Note: I used 8914ed95 to track down affected versions.
Title: XSS in Horizon-Orchestration through resource name
Reporter: Jason Hullinger (HP)
Products: Horizon
Versions: 2013.2 to 2013.2.3, and 2014.1
Description:
Jason Hullinger from Hewlett Packard reported a vulnerability in Horizon Orchestration dashboard. By tricking an Horizon user, a malicious templates owner/catalog, may trigger an XSS once a corrupted template is used in the Orchestration/Stack section of Horizon, resulting in potential assets stealing (horizon user/admin access credentials (session cookies/CSRF tokens), VMs/Network configuration/management, tenants confidential informartion, etc.). Only setups using Heat and Horizon are affected.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2014-04-24: |  |  | [#11](/horizon/%2Bbug/1308727/comments/11) |
| --- | --- | --- | --- |

I would say "...a malicious templates owner/catalog may conduct an XSS attack once..." (also removing the comma after catalog). Would also remove the inner parenthesis "(session cookies/CSRF tokens)" and s/informartion/information/. Finally I would say "setups using Heat together with Horizon" so that it's clear it's the combo that is affected.

I would say "...a malicious templates owner/catalog may conduct an XSS attack once..." (also removing the comma after catalog). Would also remove the inner parenthesis "(session cookies/CSRF tokens)" and s/informartion/information/. Finally I would say "setups using Heat together with Horizon" so that it's clear it's the combo that is affected.

| Changed in ossa: | |
| --- | --- |
| **status**: | Confirmed → Triaged |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2014-04-25: |  |  | [#12](/horizon/%2Bbug/1308727/comments/12) |
| --- | --- | --- | --- |

Thanks!

Here is impact description #2

Title: XSS in Horizon-Orchestration through resource name

Reporter: Jason Hullinger (HP)

Products: Horizon

Versions: 2013.2 to 2013.2.3, and 2014.1

Description:

Jason Hullinger from Hewlett Packard reported a vulnerability in Horizon Orchestration dashboard. By tricking an Horizon user, a malicious templates owner/catalog may conduct an XSS once a corrupted template is used in the Orchestration/Stack section of Horizon, resulting in potential assets stealing (horizon user/admin access credentials, VMs/Network configuration/management, tenants confidential information, etc.). Only setups using Heat together with Horizon are affected.

Thanks!
Here is impact description #2
Title: XSS in Horizon-Orchestration through resource name
Reporter: Jason Hullinger (HP)
Products: Horizon
Versions: 2013.2 to 2013.2.3, and 2014.1
Description:
Jason Hullinger from Hewlett Packard reported a vulnerability in Horizon Orchestration dashboard. By tricking an Horizon user, a malicious templates owner/catalog may conduct an XSS once a corrupted template is used in the Orchestration/Stack section of Horizon, resulting in potential assets stealing (horizon user/admin access credentials, VMs/Network configuration/management, tenants confidential information, etc.). Only setups using Heat together with Horizon are affected.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2014-04-25: |  |  | [#13](/horizon/%2Bbug/1308727/comments/13) |
| --- | --- | --- | --- |

+1

+1

[Thierry Carrez (ttx)](https://launchpad.net/~ttx)
on 2014-05-27

| Changed in horizon: | |
| --- | --- |
| **assignee**: | nobody → Julie Pichon (jpichon) |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2014-05-28: |  |  | [#14](/horizon/%2Bbug/1308727/comments/14) |
| --- | --- | --- | --- |

Here is the combined impact description #3 for #1308727, #1322197 and #1320235:

Title: Multiple XSS vulnerabilities in Horizon

Reporter: Jason Hullinger (HP), Craig Lorentzen (Cisco), Michael Xin

(Rackspace)

Products: Horizon

Versions: 2013.2 to 2013.2.3, and 2014.1

Description:

Jason Hullinger from Hewlett Packard, Craig Lorentzen from Cisco and

Michael Xin from Rackspace reported 3 XSS vulnerabilities in Horizon. A

malicious Orchestration templates owner/catalog may conduct an XSS once

a corrupted template is used in the Orchestration/Stack section of

Horizon. A malicious Horizon user may store an XSS by creating a network

with a corrupted name. A malicious Horizon administrator may store an

XSS by creating a user with a corrupted email address. Once executed in

a legitimate context those XSS may result in potential assets stealing

(horizon user/admin access credentials, VMs/Network

configuration/management, tenants confidential information, etc.). All

Horizon setups are affected.

Here is the combined impact description #3 for #1308727, #1322197 and #1320235:
Title: Multiple XSS vulnerabilities in Horizon
Reporter: Jason Hullinger (HP), Craig Lorentzen (Cisco), Michael Xin
(Rackspace)
Products: Horizon
Versions: 2013.2 to 2013.2.3, and 2014.1
Description:
Jason Hullinger from Hewlett Packard, Craig Lorentzen from Cisco and
Michael Xin from Rackspace reported 3 XSS vulnerabilities in Horizon. A
malicious Orchestration templates owner/catalog may conduct an XSS once
a corrupted template is used in the Orchestration/Stack section of
Horizon. A malicious Horizon user may store an XSS by creating a network
with a corrupted name. A malicious Horizon administrator may store an
XSS by creating a user with a corrupted email address. Once executed in
a legitimate context those XSS may result in potential assets stealing
(horizon user/admin access credentials, VMs/Network
configuration/management, tenants confidential information, etc.). All
Horizon setups are affected.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jeremy Stanley (fungi)](https://launchpad.net/~fungi) wrote on 2014-05-28: |  |  | [#15](/horizon/%2Bbug/1308727/comments/15) |
| --- | --- | --- | --- |

It may help to initially expand the XSS acronym in the description for improved clarity and searchability. Here is a proposed alternative with some additional English grammar fixes:

Jason Hullinger from Hewlett Packard, Craig Lorentzen from Cisco and Michael Xin from Rackspace reported 3 cross-site scripting (XSS) vulnerabilities in Horizon. A malicious Orchestration template owner or catalog may conduct an XSS attack once a corrupted template is used in the Orchestration/Stack section of Horizon. A malicious Horizon user may store an XSS attack by creating a network with a corrupted name. A malicious Horizon administrator may store an XSS attack by creating a user with a corrupted email address. Once executed in a legitimate context these attacks may result in potential asset stealing (horizon user/admin access credentials, VMs/Network configuration/management, tenants' confidential information, etc.). All Horizon setups are affected.

Also worth confirming, the "Versions" header implies that no release prior to Havana (2013.2) is affected. Is this true? If prior unsupported releases may also be affected then this could more accurately be stated as "Versions: up to 2013.2.3, and 2014.1" (we simply won't release official backports to versions prior to 2013.2 but that doesn't mean they're unaffected by these vulnerabilities).

It may help to initially expand the XSS acronym in the description for improved clarity and searchability. Here is a proposed alternative with some additional English grammar fixes:
Jason Hullinger from Hewlett Packard, Craig Lorentzen from Cisco and Michael Xin from Rackspace reported 3 cross-site scripting (XSS) vulnerabilities in Horizon. A malicious Orchestration template owner or catalog may conduct an XSS attack once a corrupted template is used in the Orchestration/Stack section of Horizon. A malicious Horizon user may store an XSS attack by creating a network with a corrupted name. A malicious Horizon administrator may store an XSS attack by creating a user with a corrupted email address. Once executed in a legitimate context these attacks may result in potential asset stealing (horizon user/admin access credentials, VMs/Network configuration/management, tenants' confidential information, etc.). All Horizon setups are affected.
Also worth confirming, the "Versions" header implies that no release prior to Havana (2013.2) is affected. Is this true? If prior unsupported releases may also be affected then this could more accurately be stated as "Versions: up to 2013.2.3, and 2014.1" (we simply won't release official backports to versions prior to 2013.2 but that doesn't mean they're unaffected by these vulnerabilities).

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2014-05-28: |  |  | [#16](/horizon/%2Bbug/1308727/comments/16) |
| --- | --- | --- | --- |

Many thanks fungi!

About affected versions, it is not confirmed indeed. Yet #1320235 seemed to be introduced by e410ee9ff, which date back to Folsom.

So this is impact description #4:

Title: Multiple XSS vulnerabilities in Horizon

Reporter: Jason Hullinger (HP), Craig Lorentzen (Cisco), Michael Xin

(Rackspace)

Products: Horizon

Versions: up to 2013.2.3, and 2014.1

Description:

Jason Hullinger from Hewlett Packard, Craig Lorentzen from Cisco and Michael Xin from Rackspace reported 3 cross-site scripting (XSS) vulnerabilities in Horizon. A malicious Orchestration template owner or catalog may conduct an XSS attack once a corrupted template is used in the Orchestration/Stack section of Horizon. A malicious Horizon user may store an XSS attack by creating a network with a corrupted name. A malicious Horizon administrator may store an XSS attack by creating a user with a corrupted email address. Once executed in a legitimate context these attacks may result in potential asset stealing (horizon user/admin access credentials, VMs/Network configuration/management, tenants' confidential information, etc.). All Horizon setups are affected.

Many thanks fungi!
About affected versions, it is not confirmed indeed. Yet #1320235 seemed to be introduced by e410ee9ff, which date back to Folsom.
So this is impact description #4:
Title: Multiple XSS vulnerabilities in Horizon
Reporter: Jason Hullinger (HP), Craig Lorentzen (Cisco), Michael Xin
(Rackspace)
Products: Horizon
Versions: up to 2013.2.3, and 2014.1
Description:
Jason Hullinger from Hewlett Packard, Craig Lorentzen from Cisco and Michael Xin from Rackspace reported 3 cross-site scripting (XSS) vulnerabilities in Horizon. A malicious Orchestration template owner or catalog may conduct an XSS attack once a corrupted template is used in the Orchestration/Stack section of Horizon. A malicious Horizon user may store an XSS attack by creating a network with a corrupted name. A malicious Horizon administrator may store an XSS attack by creating a user with a corrupted email address. Once executed in a legitimate context these attacks may result in potential asset stealing (horizon user/admin access credentials, VMs/Network configuration/management, tenants' confidential information, etc.). All Horizon setups are affected.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2014-05-29: |  |  | [#17](/horizon/%2Bbug/1308727/comments/17) |
| --- | --- | --- | --- |

Impact desc +1

Impact desc +1

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Julie Pichon (jpichon)](https://launchpad.net/~jpichon) wrote on 2014-05-29: |  |  | [#18](/horizon/%2Bbug/1308727/comments/18) |
| --- | --- | --- | --- |

As discussed with the vulnerability team, I'm attaching a single patch to fix the 3 XSS issues currently open against Horizon.

About the other clean-up tasks mentioned in this bug, I tried to exploit the potential vulnerability in \_stack\_info.html by adding things like this to the template:

outputs:

  WebsiteURL:

    description: A URL

    value: http://"><img src=zz onerror=alert(2)>

However the strings were escaped properly and I wasn't able to. I believe this is already safe thanks to django's auto-escaping (see <https://docs.djangoproject.com/en/1.4/topics/templates/#automatic-html-escaping> ).

I'd appreciate additional eyes from folks more familiar with Javascript on the network names fix, as I found the .text() behaviour fairly unintuitive. It parses HTML entities like &lt; into their text equivalent <, making safely escaped strings vulnerable again. I haven't had a chance to investigate other places where we use text(). I'll provide the Havana version of the patch shortly.

As discussed with the vulnerability team, I'm attaching a single patch to fix the 3 XSS issues currently open against Horizon.
About the other clean-up tasks mentioned in this bug, I tried to exploit the potential vulnerability in \_stack\_info.html by adding things like this to the template:
outputs:
WebsiteURL:
description: A URL
value: http://"><img src=zz onerror=alert(2)>
However the strings were escaped properly and I wasn't able to. I believe this is already safe thanks to django's auto-escaping (see https://docs.djangoproject.com/en/1.4/topics/templates/#automatic-html-escaping ).
I'd appreciate additional eyes from folks more familiar with Javascript on the network names fix, as I found the .text() behaviour fairly unintuitive. It parses HTML entities like &lt; into their text equivalent <, making safely escaped strings vulnerable again. I haven't had a chance to investigate other places where we use text(). I'll provide the Havana version of the patch shortly.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Julie Pichon (jpichon)](https://launchpad.net/~jpichon) wrote on 2014-05-29: |  |  | [#19](/horizon/%2Bbug/1308727/comments/19) |
| --- | --- | --- | --- |

* [Patch for master](https://bugs.launchpad.net/horizon/%2Bbug/1308727/%2Battachment/4122309/%2Bfiles/multiple-xss-master.patch)
  [Edit](/horizon/%2Bbug/1308727/%2Battachment/4122309)
  (4.5 KiB,
  text/plain)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jeremy Stanley (fungi)](https://launchpad.net/~fungi) wrote on 2014-05-29: |  |  | [#20](/horizon/%2Bbug/1308727/comments/20) |
| --- | --- | --- | --- |

The revised impact description in comment #16 looks good to me. Thanks!

The revised impact description in comment #16 looks good to me. Thanks!

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Julie Pichon (jpichon)](https://launchpad.net/~jpichon) wrote on 2014-05-30: |  |  | [#21](/horizon/%2Bbug/1308727/comments/21) |
| --- | --- | --- | --- |

* [multiple-xss-havana.patch](https://bugs.launchpad.net/horizon/%2Bbug/1308727/%2Battachment/4122975/%2Bfiles/multiple-xss-havana.patch)
  [Edit](/horizon/%2Bbug/1308727/%2Battachment/4122975)
  (4.4 KiB,
  text/plain)

The master patch applies cleanly on Icehouse, attaching the Havana version too, both tested.

The master patch applies cleanly on Icehouse, attaching the Havana version too, both tested.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2014-05-30: |  |  | [#22](/horizon/%2Bbug/1308727/comments/22) |
| --- | --- | --- | --- |

Horizon coresec, please review and approve proposed patches (by saying you like them on this bug as a comment)

Horizon coresec, please review and approve proposed patches (by saying you like them on this bug as a comment)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Paul McMillan (paul-mcmillan)](https://launchpad.net/~paul-mcmillan) wrote on 2014-05-30: |  |  | [#23](/horizon/%2Bbug/1308727/comments/23) |
| --- | --- | --- | --- |

I think the the patch to instances.js, while correct, is indicative of an underlying security design problem (we need to re-separate our html generation from our core code logic), but this ticket is not the place for that discussion.

Both patches look correct to me, I've asked Gabriel Hurley to take a look at the javascript issue.

I think the the patch to instances.js, while correct, is indicative of an underlying security design problem (we need to re-separate our html generation from our core code logic), but this ticket is not the place for that discussion.
Both patches look correct to me, I've asked Gabriel Hurley to take a look at the javascript issue.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Gabriel Hurley (gabriel-hurley)](https://launchpad.net/~gabriel-hurley) wrote on 2014-05-30: |  |  | [#24](/horizon/%2Bbug/1308727/comments/24) |
| --- | --- | --- | --- |

The javascript change for horizon.instances.js is a very roundabout way that's probably still exploitable although I don't have an immediate example.

the .text() method will take the text representation of the content of an element, hence resulting in certain HTML entities being unescaped...

by contrast the .html() method takes the HTML content of the element, reading HTML entities as their original entity form.

the problem here lies in what happens when you re-insert the value you pulled out into a new element on this line: <https://github.com/openstack/horizon/blob/master/horizon/static/horizon/js/horizon.instances.js#L73>

because that uses the .html() method, any malicious code gets re-inserted as HTML.

In the short term, I think a better solution is to continue to use .text() for the read, and to change the code where the new element is constructed to either construct the safe (non-user-input) HTML parts and then fill in the user bits with the .text() method (meaning that the read and the write both use .text() thus ensuring text stays text; or otherwise to sanitize the read values before inserting them back into the DOM. There are plenty of examples of how to do XSS santization in javascript on Stack Overflow, or pretty much any javascript templating library has it built in.

The patch as it stands should probably be reworked to address this; I don't think it should be too hard to fix.

I would recommend reviewing the rest of the javascript codebase for places where elements are being constructed by hand using the .html() method. Those are always red flags where you need to be sure that any variables are safe.

The javascript change for horizon.instances.js is a very roundabout way that's probably still exploitable although I don't have an immediate example.
the .text() method will take the text representation of the content of an element, hence resulting in certain HTML entities being unescaped...
by contrast the .html() method takes the HTML content of the element, reading HTML entities as their original entity form.
the problem here lies in what happens when you re-insert the value you pulled out into a new element on this line: https://github.com/openstack/horizon/blob/master/horizon/static/horizon/js/horizon.instances.js#L73
because that uses the .html() method, any malicious code gets re-inserted as HTML.
In the short term, I think a better solution is to continue to use .text() for the read, and to change the code where the new element is constructed to either construct the safe (non-user-input) HTML parts and then fill in the user bits with the .text() method (meaning that the read and the write both use .text() thus ensuring text stays text; or otherwise to sanitize the read values before inserting them back into the DOM. There are plenty of examples of how to do XSS santization in javascript on Stack Overflow, or pretty much any javascript templating library has it built in.
The patch as it stands should probably be reworked to address this; I don't think it should be too hard to fix.
I would recommend reviewing the rest of the javascript codebase for places where elements are being constructed by hand using the .html() method. Those are always red flags where you need to be sure that any variables are safe.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Gabriel Hurley (gabriel-hurley)](https://launchpad.net/~gabriel-hurley) wrote on 2014-05-30: |  |  | [#25](/horizon/%2Bbug/1308727/comments/25) |
| --- | --- | --- | --- |

Forgot to add the "long-term" part of that comment... long term we need to move away form reading these values out of the DOM entirely. JSON should stay JSON and should be loaded as such via AJAX or websockets. Then a proper client-side templating library can be used to construct these elements and sanitizing can be done in a standardized fashion.

Forgot to add the "long-term" part of that comment... long term we need to move away form reading these values out of the DOM entirely. JSON should stay JSON and should be loaded as such via AJAX or websockets. Then a proper client-side templating library can be used to construct these elements and sanitizing can be done in a standardized fashion.

[Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray)
on 2014-05-30

| Changed in ossa: | |
| --- | --- |
| **assignee**: | nobody → Tristan Cacqueray (tristan-cacqueray) |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Kieran Spear (kspear)](https://launchpad.net/~kspear) wrote on 2014-06-02: |  |  | [#26](/horizon/%2Bbug/1308727/comments/26) |
| --- | --- | --- | --- |

Hi Julie, thanks for the patch.

One further issue we need to consider with this bug in particular is javascript: URLs. If you change the resource name to "javascript:alert(1)" you'll see that this code is still executed. We should probably be using 'reverse' to generate the URL to the resource?

Hi Julie, thanks for the patch.
One further issue we need to consider with this bug in particular is javascript: URLs. If you change the resource name to "javascript:alert(1)" you'll see that this code is still executed. We should probably be using 'reverse' to generate the URL to the resource?

[Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray)
on 2014-06-02

| Changed in ossa: | |
| --- | --- |
| **status**: | Triaged → In Progress |

[Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray)
on 2014-06-02

| **summary**: | - XSS in Horizon Heat template - resource name+ XSS in Horizon Heat template - resource name (CVE-2014-3473) |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Julie Pichon (jpichon)](https://launchpad.net/~jpichon) wrote on 2014-06-09:  [**Re: XSS in Horizon Heat template - resource name (CVE-2014-3473)**](/horizon/%2Bbug/1308727/comments/27) |  |  | [#27](/horizon/%2Bbug/1308727/comments/27) |
| --- | --- | --- | --- |

* [multiple-xss-master-latest.patch](https://bugs.launchpad.net/horizon/%2Bbug/1308727/%2Battachment/4128243/%2Bfiles/multiple-xss-master-latest.patch)
  [Edit](/horizon/%2Bbug/1308727/%2Battachment/4128243)
  (4.7 KiB,
  text/plain)

Thank you for the feedback everyone, and sorry for the delay in replying. I'm attaching a new patch that should resolve the Javascript issue Gabriel brought up. This very probably should be refactored into a function later on but I don't see any obvious place where it should live at the moment, and it seems to me the refactoring discussion would be better handled in a regular gerrit review afterwards.

With regard to your comment Kieran, I can indeed reproduce when calling a resource with only a "javascript:" name (then the alert happens when clicking on the link rather than when loading the page). Using reverse to generate URLs is likely safer but appears to be more awkward because the resource URL requires also the stack\_id, which isn't accessible from the resource object itself. It is however visible in the "links" dictionary that contains direct heat URLs so playing a bit with regexes we could manage to generate the URL correctly for both the Events and Resources tables:

def generate\_resource\_url(obj):

    for link in getattr(obj, 'links', []):

        if link.get('rel', None) == "stack":

            url = link.get('href', '')

            m = re.search("/stacks/\w+/([\w-]+)", url)

            if m is not None:

                stack\_id = m.group(1)

                return urlresolvers.reverse('horizon:project:stacks:resource',

                                            args=(stack\_id, obj.resource\_name))

    else:

        return None

It feels a bit awkward though. Unfortunately I don't have a lot of time to spend on this at the moment, if someone else wants to look into it please feel free to pick it up. If there's feedback in the next couple of days I'll do my best to address it, otherwise it'll have to wait until next week as I'll be out of office later on. Thanks again for the feedback.

Thank you for the feedback everyone, and sorry for the delay in replying. I'm attaching a new patch that should resolve the Javascript issue Gabriel brought up. This very probably should be refactored into a function later on but I don't see any obvious place where it should live at the moment, and it seems to me the refactoring discussion would be better handled in a regular gerrit review afterwards.
With regard to your comment Kieran, I can indeed reproduce when calling a resource with only a "javascript:" name (then the alert happens when clicking on the link rather than when loading the page). Using reverse to generate URLs is likely safer but appears to be more awkward because the resource URL requires also the stack\_id, which isn't accessible from the resource object itself. It is however visible in the "links" dictionary that contains direct heat URLs so playing a bit with regexes we could manage to generate the URL correctly for both the Events and Resources tables:
def generate\_resource\_url(obj):
for link in getattr(obj, 'links', []):
if link.get('rel', None) == "stack":
url = link.get('href', '')
m = re.search("/stacks/\w+/([\w-]+)", url)
if m is not None:
stack\_id = m.group(1)
return urlresolvers.reverse('horizon:project:stacks:resource',
args=(stack\_id, obj.resource\_name))
else:
return None
It feels a bit awkward though. Unfortunately I don't have a lot of time to spend on this at the moment, if someone else wants to look into it please feel free to pick it up. If there's feedback in the next couple of days I'll do my best to address it, otherwise it'll have to wait until next week as I'll be out of office later on. Thanks again for the feedback.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Julie Pichon (jpichon)](https://launchpad.net/~jpichon) wrote on 2014-06-11: |  |  | [#28](/horizon/%2Bbug/1308727/comments/28) |
| --- | --- | --- | --- |

* [multiple-xss-master-latest2.patch](https://bugs.launchpad.net/horizon/%2Bbug/1308727/%2Battachment/4129693/%2Bfiles/multiple-xss-master-latest2.patch)
  [Edit](/horizon/%2Bbug/1308727/%2Battachment/4129693)
  (6.9 KiB,
  text/plain)

Attaching a patch that also includes the previous regex solution to generate urls using the safe 'reverse' mechanism, in case that's useful. I'll be out of office until Monday, thanks everyone.

Attaching a patch that also includes the previous regex solution to generate urls using the safe 'reverse' mechanism, in case that's useful. I'll be out of office until Monday, thanks everyone.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2014-06-12: |  |  | [#29](/horizon/%2Bbug/1308727/comments/29) |
| --- | --- | --- | --- |

@horizon-coresec: please review latest patch and comment here !

@horizon-coresec: please review latest patch and comment here !

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Matthias Runge (mrunge)](https://launchpad.net/~mrunge) wrote on 2014-06-17: |  |  | [#30](/horizon/%2Bbug/1308727/comments/30) |
| --- | --- | --- | --- |

@ttx: I attached a small patch to [https://bugs.launchpad.net/horizon/+bug/1322197](https://bugs.launchpad.net/horizon/%2Bbug/1322197)

which addresses the raised concerns there. I don't see anything comparable here. So, I think, both patches should be merged.

@ttx: I attached a small patch to https://bugs.launchpad.net/horizon/+bug/1322197
which addresses the raised concerns there. I don't see anything comparable here. So, I think, both patches should be merged.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Julie Pichon (jpichon)](https://launchpad.net/~jpichon) wrote on 2014-06-18: |  |  | [#31](/horizon/%2Bbug/1308727/comments/31) |
| --- | --- | --- | --- |

Hey Matthias. I don't think we should try to sanitise/change names on input, since users can always use the CLI to create networks with "forbidden" characters. Whenever we disallow in Horizon things that users can do on the CLI it tends to lead to confusion and bug reports. (Also we don't know if we'll need to display the name in HTML, Javascript or clear log messages so we can't guess at what format to escape and store it in at input time.)

The other part of the patch is interesting but doesn't seem to work for me, e.g. in the Launch Instance screen the network named "<script>" becomes "\u003Cscript\u003E" which granted doesn't trigger the XSS anymore but doesn't read very user-friendly. Am I looking in the wrong place?

Thank you for the input! If you have time to provide feedback on the other aspects of the patch I would really appreciate it too.

Hey Matthias. I don't think we should try to sanitise/change names on input, since users can always use the CLI to create networks with "forbidden" characters. Whenever we disallow in Horizon things that users can do on the CLI it tends to lead to confusion and bug reports. (Also we don't know if we'll need to display the name in HTML, Javascript or clear log messages so we can't guess at what format to escape and store it in at input time.)
The other part of the patch is interesting but doesn't seem to work for me, e.g. in the Launch Instance screen the network named "<script>" becomes "\u003Cscript\u003E" which granted doesn't trigger the XSS anymore but doesn't read very user-friendly. Am I looking in the wrong place?
Thank you for the input! If you have time to provide feedback on the other aspects of the patch I would really appreciate it too.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2014-06-19: |  |  | [#32](/horizon/%2Bbug/1308727/comments/32) |
| --- | --- | --- | --- |

@horizon-coresec, could you please review the patch Julie submitted in comment #28 ?

According to <https://www.owasp.org/index.php/XSS_%28Cross_Site_Scripting%29_Prevention_Cheat_Sheet#A_Positive_XSS_Prevention_Model>, the javascript cleaning looks good, and python filters are reasonable as well.

Please test the patch for regression!

@horizon-coresec, could you please review the patch Julie submitted in comment #28 ?
According to https://www.owasp.org/index.php/XSS\_%28Cross\_Site\_Scripting%29\_Prevention\_Cheat\_Sheet#A\_Positive\_XSS\_Prevention\_Model, the javascript cleaning looks good, and python filters are reasonable as well.
Please test the patch for regression!

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Lin Hua Cheng (lin-hua-cheng)](https://launchpad.net/~lin-hua-cheng) wrote on 2014-06-25: |  |  | [#33](/horizon/%2Bbug/1308727/comments/33) |
| --- | --- | --- | --- |

@mrunge: I agree with Julie, we should not cleaning the input data as it is inconsistent with the input validation from CLI that may cause confusion.

@jpich: patch looks good except for the hack on the Events and Resources tables.

Can we just inject the stack\_id in the events and resources data so that we don't have to parse the links and extracting the stack\_id?

Like adding this

<https://github.com/openstack/horizon/blob/master/openstack_dashboard/dashboards/project/stacks/tabs.py#L101>

for event in events:

    event.stack\_id = stack.id

<https://github.com/openstack/horizon/blob/master/openstack_dashboard/dashboards/project/stacks/tabs.py#L126>

for resource in resources:

    resource.stack\_id = stack.id

I think this approach might be better since the code in tabs.py is responsible for the data preparation for the view anyway. And it is more obvious for someone else reading the code what's actually going on.

This approach is also less prone to external issue, because it doesn't have data format dependency of having the links attributes that comes from heat.

@mrunge: I agree with Julie, we should not cleaning the input data as it is inconsistent with the input validation from CLI that may cause confusion.
@jpich: patch looks good except for the hack on the Events and Resources tables.
Can we just inject the stack\_id in the events and resources data so that we don't have to parse the links and extracting the stack\_id?
Like adding this
https://github.com/openstack/horizon/blob/master/openstack\_dashboard/dashboards/project/stacks/tabs.py#L101
for event in events:
event.stack\_id = stack.id
https://github.com/openstack/horizon/blob/master/openstack\_dashboard/dashboards/project/stacks/tabs.py#L126
for resource in resources:
resource.stack\_id = stack.id
I think this approach might be better since the code in tabs.py is responsible for the data preparation for the view anyway. And it is more obvious for someone else reading the code what's actually going on.
This approach is also less prone to external issue, because it doesn't have data format dependency of having the links attributes that comes from heat.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Julie Pichon (jpichon)](https://launchpad.net/~jpichon) wrote on 2014-06-26: |  |  | [#34](/horizon/%2Bbug/1308727/comments/34) |
| --- | --- | --- | --- |

* [multiple-xss-master.20140626.patch](https://bugs.launchpad.net/horizon/%2Bbug/1308727/%2Battachment/4139711/%2Bfiles/multiple-xss-master.20140626.patch)
  [Edit](/horizon/%2Bbug/1308727/%2Battachment/4139711)
  (7.6 KiB,
  text/plain)

Thanks for the helpful feedback lcheng! The suggestion you suggest is much more elegant and solid indeed, I've updated the patch to use it instead.

Thanks for the helpful feedback lcheng! The suggestion you suggest is much more elegant and solid indeed, I've updated the patch to use it instead.

| Changed in horizon: | |
| --- | --- |
| **importance**: | Undecided → High |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Lin Hua Cheng (lin-hua-cheng)](https://launchpad.net/~lin-hua-cheng) wrote on 2014-06-26: |  |  | [#35](/horizon/%2Bbug/1308727/comments/35) |
| --- | --- | --- | --- |

Thanks jpich!

Patch looks good to me!

Thanks jpich!
Patch looks good to me!

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [David Lyle (david-lyle)](https://launchpad.net/~david-lyle) wrote on 2014-06-26: |  |  | [#36](/horizon/%2Bbug/1308727/comments/36) |
| --- | --- | --- | --- |

#34 looks good to me as well. Thanks Julie!

#34 looks good to me as well. Thanks Julie!

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2014-06-26: |  |  | [#37](/horizon/%2Bbug/1308727/comments/37) |
| --- | --- | --- | --- |

Many thanks for the quick update Julie!

I'm running test against master branch and icehouse, sadly the patch doesn't apply cleanly on havana, could you attach a backport for it as well ?

Many thanks for the quick update Julie!
I'm running test against master branch and icehouse, sadly the patch doesn't apply cleanly on havana, could you attach a backport for it as well ?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2014-06-26: |  |  | [#38](/horizon/%2Bbug/1308727/comments/38) |
| --- | --- | --- | --- |

Also, it might be related to my ubuntu based devstack, but I had to manually install httplib2 in .venv to get tests success.

If it's possible, I think we should add httplib2 to test-requirements.txt

Also, it might be related to my ubuntu based devstack, but I had to manually install httplib2 in .venv to get tests success.
If it's possible, I think we should add httplib2 to test-requirements.txt

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Julie Pichon (jpichon)](https://launchpad.net/~jpichon) wrote on 2014-06-26: |  |  | [#39](/horizon/%2Bbug/1308727/comments/39) |
| --- | --- | --- | --- |

Thanks for the feedback folks, I'll add the havana version of the patch tomorrow (unless someone wants to beat me to it!).

Tristan, httplib2 doesn't seem to be a testing requirement for any Horizon version, I'm not sure this is related here? I'll check tomorrow as well.

Thanks for the feedback folks, I'll add the havana version of the patch tomorrow (unless someone wants to beat me to it!).
Tristan, httplib2 doesn't seem to be a testing requirement for any Horizon version, I'm not sure this is related here? I'll check tomorrow as well.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Julie Pichon (jpichon)](https://launchpad.net/~jpichon) wrote on 2014-06-27: |  |  | [#40](/horizon/%2Bbug/1308727/comments/40) |
| --- | --- | --- | --- |

The httplib2 issue is likely due to <https://github.com/openstack/horizon/commit/f712ed04ccb49e832142944d579e89fb7c14d394> . I believe the Havana / Icehouse gate jobs will still run on 12.04 so the problem wouldn't happen on the gate, but as Sean mentions in the commit message since it's an explicit dependency Horizon should be explicit about it... I can backport his patch (separately from the current discussion), though I'd have preferred too if it were added to test-requirements.txt. Not sure if that can be done without updating global-requirements.txt first though, since it's not listed as a possible test requirement there.

The httplib2 issue is likely due to https://github.com/openstack/horizon/commit/f712ed04ccb49e832142944d579e89fb7c14d394 . I believe the Havana / Icehouse gate jobs will still run on 12.04 so the problem wouldn't happen on the gate, but as Sean mentions in the commit message since it's an explicit dependency Horizon should be explicit about it... I can backport his patch (separately from the current discussion), though I'd have preferred too if it were added to test-requirements.txt. Not sure if that can be done without updating global-requirements.txt first though, since it's not listed as a possible test requirement there.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Julie Pichon (jpichon)](https://launchpad.net/~jpichon) wrote on 2014-06-27: |  |  | [#41](/horizon/%2Bbug/1308727/comments/41) |
| --- | --- | --- | --- |

* [multiple-xss-havana.20140626.patch](https://bugs.launchpad.net/horizon/%2Bbug/1308727/%2Battachment/4140531/%2Bfiles/multiple-xss-havana.20140626.patch)
  [Edit](/horizon/%2Bbug/1308727/%2Battachment/4140531)
  (7.9 KiB,
  text/plain)

Here's the Havana version.

Here's the Havana version.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2014-06-30: |  |  | [#42](/horizon/%2Bbug/1308727/comments/42) |
| --- | --- | --- | --- |

The havana patch in comment #41 is passing unit-tests here.

@horizon-coresec, can you please have a quick look at that last patch?

The havana patch in comment #41 is passing unit-tests here.
@horizon-coresec, can you please have a quick look at that last patch?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Lin Hua Cheng (lin-hua-cheng)](https://launchpad.net/~lin-hua-cheng) wrote on 2014-06-30: |  |  | [#43](/horizon/%2Bbug/1308727/comments/43) |
| --- | --- | --- | --- |

#41 havana patch looks good to me!

#41 havana patch looks good to me!

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2014-07-01: |  |  | [#44](/horizon/%2Bbug/1308727/comments/44) |
| --- | --- | --- | --- |

We are going to send the stakeholders advance notification with a disclosure date set to:

2014-07-08, 1500UTC

We are going to send the stakeholders advance notification with a disclosure date set to:
2014-07-08, 1500UTC

[Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray)
on 2014-07-01

| Changed in ossa: | |
| --- | --- |
| **status**: | In Progress → Fix Committed |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Julie Pichon (jpichon)](https://launchpad.net/~jpichon) wrote on 2014-07-08: |  |  | [#45](/horizon/%2Bbug/1308727/comments/45) |
| --- | --- | --- | --- |

* [multiple-xss-master.20140708.patch](https://bugs.launchpad.net/horizon/%2Bbug/1308727/%2Battachment/4147954/%2Bfiles/multiple-xss-master.20140708.patch)
  [Edit](/horizon/%2Bbug/1308727/%2Battachment/4147954)
  (7.6 KiB,
  text/plain)

Master has changed and the patch in #34 does not apply cleanly anymore (it is still ok for Icehouse). The link classes attribute has changed extensively and I don't have time to test the new interaction so I removed the escaping on that one. I think it's ok because it should already be safe as these attributes can only defined programmatically.

Master has changed and the patch in #34 does not apply cleanly anymore (it is still ok for Icehouse). The link classes attribute has changed extensively and I don't have time to test the new interaction so I removed the escaping on that one. I think it's ok because it should already be safe as these attributes can only defined programmatically.

[Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray)
on 2014-07-08

| **information type**: | Private Security → Public Security |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2014-07-08:  [**Fix proposed to horizon (master)**](/horizon/%2Bbug/1308727/comments/46) |  |  | [#46](/horizon/%2Bbug/1308727/comments/46) |
| --- | --- | --- | --- |

Fix proposed to branch: master

Review: <https://review.openstack.org/105476>

Fix proposed to branch: master
Review: https://review.openstack.org/105476

| Changed in horizon: | |
| --- | --- |
| **status**: | Confirmed → In Progress |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2014-07-08:  [**Fix proposed to horizon (stable/icehouse)**](/horizon/%2Bbug/1308727/comments/47) |  |  | [#47](/horizon/%2Bbug/1308727/comments/47) |
| --- | --- | --- | --- |

Fix proposed to branch: stable/icehouse

Review: <https://review.openstack.org/105477>

Fix proposed to branch: stable/icehouse
Review: https://review.openstack.org/105477

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2014-07-08:  [**Fix proposed to horizon (stable/havana)**](/horizon/%2Bbug/1308727/comments/48) |  |  | [#48](/horizon/%2Bbug/1308727/comments/48) |
| --- | --- | --- | --- |

Fix proposed to branch: stable/havana

Review: <https://review.openstack.org/105478>

Fix proposed to branch: stable/havana
Review: https://review.openstack.org/105478

[Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray)
on 2014-07-08

| **summary**: | - XSS in Horizon Heat template - resource name (CVE-2014-3473)+ [OSSA 2014-023] XSS in Horizon Heat template - resource name+ (CVE-2014-3473) |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2014-07-09:  [**Fix merged to horizon (master)**](/horizon/%2Bbug/1308727/comments/49) |  |  | [#49](/horizon/%2Bbug/1308727/comments/49) |
| --- | --- | --- | --- |

Reviewed: <https://review.openstack.org/105476>

Committed: <https://git.openstack.org/cgit/openstack/horizon/commit/?id=de4466d88b816437fb29eff5ab23b9b964cd3985>

Submitter: Jenkins

Branch: master

commit de4466d88b816437fb29eff5ab23b9b964cd3985

Author: Julie Pichon <email address hidden>

Date: Thu May 22 16:45:03 2014 +0100

Fix multiple Cross-Site Scripting (XSS) vulnerabilities.

\* Ensure user emails are properly escaped

User emails in the Users and Groups panel are being passed through the

    urlize filter to transform them into clickable links. However, urlize

    expects input to be already escaped and safe. We should make sure to

    escape the strings first as email addresses are not validated and can

    contain any type of string.

Closes-Bug: #1320235

\* Ensure network names are properly escaped in the Launch Instance menu

Closes-Bug: #1322197

\* Escape the URLs generated for the Horizon tables

When generating the Horizon tables, there was an assumption that only

    the anchor text needed to be escaped. However some URLs are generated

    based on user-provided data and should be escaped as well.

\* Use 'reverse' to generate the Resource URLs in the stacks tables

Closes-Bug: #1308727

Change-Id: Ic8a92e69f66c2d265a802f350e30f091181aa42e

Reviewed: https://review.openstack.org/105476
Committed: https://git.openstack.org/cgit/openstack/horizon/commit/?id=de4466d88b816437fb29eff5ab23b9b964cd3985
Submitter: Jenkins
Branch: master
commit de4466d88b816437fb29eff5ab23b9b964cd3985
Author: Julie Pichon <jpichon@redhat.com>
Date: Thu May 22 16:45:03 2014 +0100
Fix multiple Cross-Site Scripting (XSS) vulnerabilities.
\* Ensure user emails are properly escaped
User emails in the Users and Groups panel are being passed through the
urlize filter to transform them into clickable links. However, urlize
expects input to be already escaped and safe. We should make sure to
escape the strings first as email addresses are not validated and can
contain any type of string.
Closes-Bug: #1320235
\* Ensure network names are properly escaped in the Launch Instance menu
Closes-Bug: #1322197
\* Escape the URLs generated for the Horizon tables
When generating the Horizon tables, there was an assumption that only
the anchor text needed to be escaped. However some URLs are generated
based on user-provided data and should be escaped as well.
\* Use 'reverse' to generate the Resource URLs in the stacks tables
Closes-Bug: #1308727
Change-Id: Ic8a92e69f66c2d265a802f350e30f091181aa42e

| Changed in horizon: | |
| --- | --- |
| **status**: | In Progress → Fix Committed |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2014-07-09:  [**Fix merged to horizon (stable/icehouse)**](/horizon/%2Bbug/1308727/comments/50) |  |  | [#50](/horizon/%2Bbug/1308727/comments/50) |
| --- | --- | --- | --- |

Reviewed: <https://review.openstack.org/105477>

Committed: <https://git.openstack.org/cgit/openstack/horizon/commit/?id=32a7b713468161282f2ea01d5e2faff980d924cd>

Submitter: Jenkins

Branch: stable/icehouse

commit 32a7b713468161282f2ea01d5e2faff980d924cd

Author: Julie Pichon <email address hidden>

Date: Thu May 22 16:45:03 2014 +0100

Fix multiple Cross-Site Scripting (XSS) vulnerabilities.

\* Ensure user emails are properly escaped

User emails in the Users and Groups panel are being passed through the

    urlize filter to transform them into clickable links. However, urlize

    expects input to be already escaped and safe. We should make sure to

    escape the strings first as email addresses are not validated and can

    contain any type of string.

Closes-Bug: #1320235

\* Ensure network names are properly escaped in the Launch Instance menu

Closes-Bug: #1322197

\* Escape the URLs generated for the Horizon tables

When generating the Horizon tables, there was an assumption that only

    the anchor text needed to be escaped. However some URLs are generated

    based on user-provided data and should be escaped as well. Also escape

    the link attributes for good measure.

\* Use 'reverse' to generate the Resource URLs in the stacks tables

Closes-Bug: #1308727

Change-Id: Ic8a92e69f66c2d265a802f350e30f091181aa42e

Reviewed: https://review.openstack.org/105477
Committed: https://git.openstack.org/cgit/openstack/horizon/commit/?id=32a7b713468161282f2ea01d5e2faff980d924cd
Submitter: Jenkins
Branch: stable/icehouse
commit 32a7b713468161282f2ea01d5e2faff980d924cd
Author: Julie Pichon <jpichon@redhat.com>
Date: Thu May 22 16:45:03 2014 +0100
Fix multiple Cross-Site Scripting (XSS) vulnerabilities.
\* Ensure user emails are properly escaped
User emails in the Users and Groups panel are being passed through the
urlize filter to transform them into clickable links. However, urlize
expects input to be already escaped and safe. We should make sure to
escape the strings first as email addresses are not validated and can
contain any type of string.
Closes-Bug: #1320235
\* Ensure network names are properly escaped in the Launch Instance menu
Closes-Bug: #1322197
\* Escape the URLs generated for the Horizon tables
When generating the Horizon tables, there was an assumption that only
the anchor text needed to be escaped. However some URLs are generated
based on user-provided data and should be escaped as well. Also escape
the link attributes for good measure.
\* Use 'reverse' to generate the Resource URLs in the stacks tables
Closes-Bug: #1308727
Change-Id: Ic8a92e69f66c2d265a802f350e30f091181aa42e

| **tags**: | added: in-stable-icehouse |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2014-07-10:  [**Fix merged to horizon (stable/havana)**](/horizon/%2Bbug/1308727/comments/51) |  |  | [#51](/horizon/%2Bbug/1308727/comments/51) |
| --- | --- | --- | --- |

Reviewed: <https://review.openstack.org/105478>

Committed: <https://git.openstack.org/cgit/openstack/horizon/commit/?id=c844bd692894353c60b320005b804970605e910f>

Submitter: Jenkins

Branch: stable/havana

commit c844bd692894353c60b320005b804970605e910f

Author: Julie Pichon <email address hidden>

Date: Thu May 22 16:45:03 2014 +0100

Fix multiple Cross-Site Scripting (XSS) vulnerabilities

\* Ensure user emails are properly escaped

User emails in the Users and Groups panel are being passed through the

    urlize filter to transform them into clickable links. However, urlize

    expects input to be already escaped and safe. We should make sure to

    escape the strings first as email addresses are not validated and can

    contain any type of string.

Closes-Bug: #1320235

\* Ensure network names are properly escaped in the Launch Instance menu

Closes-Bug: #1322197

\* Escape the URLs generated for the Horizon tables

When generating the Horizon tables, there was an assumption that only

    the anchor text needed to be escaped. However some URLs are generated

    based on user-provided data and should be escaped as well. Also escape

    the link attributes for good measure.

\* Use 'reverse' to generate the Resource URLs in the stacks tables

Closes-Bug: #1308727

Conflicts:

     horizon/tables/base.py

     openstack\_dashboard/dashboards/admin/users/tables.py

Change-Id: Ic8a92e69f66c2d265a802f350e30f091181aa42e

Reviewed: https://review.openstack.org/105478
Committed: https://git.openstack.org/cgit/openstack/horizon/commit/?id=c844bd692894353c60b320005b804970605e910f
Submitter: Jenkins
Branch: stable/havana
commit c844bd692894353c60b320005b804970605e910f
Author: Julie Pichon <jpichon@redhat.com>
Date: Thu May 22 16:45:03 2014 +0100
Fix multiple Cross-Site Scripting (XSS) vulnerabilities
\* Ensure user emails are properly escaped
User emails in the Users and Groups panel are being passed through the
urlize filter to transform them into clickable links. However, urlize
expects input to be already escaped and safe. We should make sure to
escape the strings first as email addresses are not validated and can
contain any type of string.
Closes-Bug: #1320235
\* Ensure network names are properly escaped in the Launch Instance menu
Closes-Bug: #1322197
\* Escape the URLs generated for the Horizon tables
When generating the Horizon tables, there was an assumption that only
the anchor text needed to be escaped. However some URLs are generated
based on user-provided data and should be escaped as well. Also escape
the link attributes for good measure.
\* Use 'reverse' to generate the Resource URLs in the stacks tables
Closes-Bug: #1308727
Conflicts:
horizon/tables/base.py
openstack\_dashboard/dashboards/admin/users/tables.py
Change-Id: Ic8a92e69f66c2d265a802f350e30f091181aa42e

[Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray)
on 2014-07-10

| Changed in ossa: | |
| --- | --- |
| **status**: | Fix Committed → Fix Released |

[Russell Bryant (russellb)](https://launchpad.net/~russellb)
on 2014-07-23

| Changed in horizon: | |
| --- | --- |
| **milestone**: | none → juno-2 |
| **status**: | Fix Committed → Fix Released |

[Alan Pevec (apevec)](https://launchpad.net/~apevec)
on 2014-08-07

| **tags**: | removed: in-stable-icehouse |
| --- | --- |

[Thierry Carrez (ttx)](https://launchpad.net/~ttx)
on 2014-10-16

| Changed in horizon: | |
| --- | --- |
| **milestone**: | juno-2 → 2014.2 |

[See full activity log](https://bugs.launchpad.net/horizon/%2Bbug/1308727/%2Bactivity)

To post a comment you must [log in](%2Blogin?comments=all).

* [Report a bug](/horizon/%2Bfilebug)

This report contains
**Public Security**
information

Everyone can see this security related information.

You are
[not directly subscribed to this bug's notifications.](/horizon/%2Bbug/1308727/%2Bsubscribe)

Subscribing...

* [Edit bug mail](https://bugs.launchpad.net/horizon/%2Bbug/1308727/%2Bsubscriptions "View and change your subscriptions to this bug")

## Other bug subscribers

[Subscribe someone else](https://bugs.launchpad.net/horizon/%2Bbug/1308727/%2Baddsubscriber "Launchpad will email that person whenever this bugs changes")

## Patches

* [Patch for master](https://bugs.launchpad.net/horizon/%2Bbug/1308727/%2Battachment/4122309/%2Bfiles/multiple-xss-master.patch)
  [Edit](/horizon/%2Bbug/1308727/%2Battachment/4122309 "Change patch details")
* [multiple-xss-havana.patch](https://bugs.launchpad.net/horizon/%2Bbug/1308727/%2Battachment/4122975/%2Bfiles/multiple-xss-havana.patch)
  [Edit](/horizon/%2Bbug/1308727/%2Battachment/4122975 "Change patch details")
* [multiple-xss-master-latest.patch](https://bugs.launchpad.net/horizon/%2Bbug/1308727/%2Battachment/4128243/%2Bfiles/multiple-xss-master-latest.patch)
  [Edit](/horizon/%2Bbug/1308727/%2Battachment/4128243 "Change patch details")
* [multiple-xss-master-latest2.patch](https://bugs.launchpad.net/horizon/%2Bbug/1308727/%2Battachment/4129693/%2Bfiles/multiple-xss-master-latest2.patch)
  [Edit](/horizon/%2Bbug/1308727/%2Battachment/4129693 "Change patch details")
* [multiple-xss-master.20140626.patch](https://bugs.launchpad.net/horizon/%2Bbug/1308727/%2Battachment/4139711/%2Bfiles/multiple-xss-master.20140626.patch)
  [Edit](/horizon/%2Bbug/1308727/%2Battachment/4139711 "Change patch details")
* [multiple-xss-havana.20140626.patch](https://bugs.launchpad.net/horizon/%2Bbug/1308727/%2Battachment/4140531/%2Bfiles/multiple-xss-havana.20140626.patch)
  [Edit](/horizon/%2Bbug/1308727/%2Battachment/4140531 "Change patch details")
* [multiple-xss-master.20140708.patch](https://bugs.launchpad.net/horizon/%2Bbug/1308727/%2Battachment/4147954/%2Bfiles/multiple-xss-master.20140708.patch)
  [Edit](/horizon/%2Bbug/1308727/%2Battachment/4147954 "Change patch details")

* [Add patch](/horizon/%2Bbug/1308727/%2Baddcomment?field.patch=on)

## Bug attachments

* [xss\_resource\_name.yaml](https://bugs.launchpad.net/horizon/%2Bbug/1308727/%2Battachment/4085696/%2Bfiles/xss_resource_name.yaml)
  [Edit](/horizon/%2Bbug/1308727/%2Battachment/4085696 "Change attachment details")

* [Add attachment](/horizon/%2Bbug/1308727/%2Baddcomment)

## Remote bug watches

Bug watches keep track of this bug in other bug trackers.

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
4d55102
([Get the code!](https://dev.launchpad.net/))



=== Content from bugs.launchpad.net_d40959f1_20250125_001314.html ===

[Log in / Register](https://bugs.launchpad.net/horizon/%2Bbug/1308727/%2Blogin)

[![](https://launchpadlibrarian.net/62132867/os64.png)](https://launchpad.net/horizon)

## [OpenStack Dashboard (Horizon)](https://launchpad.net/horizon)

* [Overview](https://launchpad.net/horizon)
* [Code](https://code.launchpad.net/horizon)
* [Bugs](https://bugs.launchpad.net/horizon)
* [Blueprints](https://blueprints.launchpad.net/horizon)
* [Translations](https://translations.launchpad.net/horizon)
* [Answers](https://answers.launchpad.net/horizon)

# [OSSA 2014-023] XSS in Horizon Heat template - resource name (CVE-2014-3473)

Bug #1308727 reported by
[Jason Hullinger](https://launchpad.net/~jason-hullinger)
on 2014-04-16

[266](/%2Bhelp-bugs/bug-heat.html)

This bug affects 1 person

| Affects | | Status | Importance | Assigned to | Milestone |
| --- | --- | --- | --- | --- | --- |
|  | [OpenStack Dashboard (Horizon)](https://bugs.launchpad.net/horizon) | Fix Released | High | [Julie Pichon](https://launchpad.net/~jpichon) | [OpenStack Dashboard (Horizon) 2014.2 "juno"](https://launchpad.net/horizon/%2Bmilestone/2014.2) |
|  | [Havana](https://bugs.launchpad.net/horizon/havana) | Fix Released | High | [Julie Pichon](https://launchpad.net/~jpichon) | [OpenStack Dashboard (Horizon) 2013.2.4](https://launchpad.net/horizon/%2Bmilestone/2013.2.4) |
|  | [Icehouse](https://bugs.launchpad.net/horizon/icehouse) | Fix Released | High | [Julie Pichon](https://launchpad.net/~jpichon) | [OpenStack Dashboard (Horizon) 2014.1.2](https://launchpad.net/horizon/%2Bmilestone/2014.1.2) |
|  | [OpenStack Security Advisory](https://bugs.launchpad.net/ossa) | Fix Released | Medium | [Tristan Cacqueray](https://launchpad.net/~tristan-cacqueray) |  |

### Bug Description

The attached yaml will result in a Cross Site Script when viewing the resources or events of an Orchestration stack in the following paths:

/project/stacks/stack/{stack\_id}/?tab=stack\_details\_\_resources

/project/stacks/stack/{stack\_id}/?tab=stack\_details\_\_events

The A tag's href attribute does not properly URL encode the name of the resource string resulting in escaping out of the attribute and arbitrary HTML written to the page.

Tags:

[heat](/horizon/%2Bbugs?field.tag=heat)
[security](/horizon/%2Bbugs?field.tag=security)
[horizon](/horizon/%2Bbugs?field.tag=horizon)
[xss](/horizon/%2Bbugs?field.tag=xss)

## Related branches

[lp:ubuntu/trusty-security/horizon](https://code.launchpad.net/~ubuntu-branches/ubuntu/trusty/horizon/trusty-security)

## CVE References

* [2014-3473](/bugs/cve/2014-3473 "Cross-site scripting (XSS) vulnerabil...")

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jason Hullinger (jason-hullinger)](https://launchpad.net/~jason-hullinger) wrote on 2014-04-16: |  |  | [#1](/horizon/%2Bbug/1308727/comments/1) |
| --- | --- | --- | --- |

* [xss\_resource\_name.yaml](https://bugs.launchpad.net/horizon/%2Bbug/1308727/%2Battachment/4085696/%2Bfiles/xss_resource_name.yaml)
  [Edit](/horizon/%2Bbug/1308727/%2Battachment/4085696)
  (282 bytes,
  text/plain)

[Jason Hullinger (jason-hullinger)](https://launchpad.net/~jason-hullinger)
on 2014-04-16

| **information type**: | Private Security → Private |
| --- | --- |
| **information type**: | Private → Private Security |

[Grant Murphy (gmurphy)](https://launchpad.net/~gmurphy)
on 2014-04-16

| Changed in ossa: | |
| --- | --- |
| **status**: | New → Incomplete |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jason Hullinger (jason-hullinger)](https://launchpad.net/~jason-hullinger) wrote on 2014-04-17: |  |  | [#2](/horizon/%2Bbug/1308727/comments/2) |
| --- | --- | --- | --- |

What additional information would you like? Are you unable to reproduce? I'm running DevStack on Ubuntu 12.04.4 LTS. Steps to reproduce:

Upload the attached template file in Orchestration->Stacks and create a new instance. Click on the Stack Name and go to the Resources or Events tab. The HTML output is:

<a href="my\_instance"><img src="zz" onerror="alert(1)">" class=""&gt;my\_instance"&gt;&lt;img src=zz onerror=alert(1)&gt;</a>

This is due to the resource name in the attached yaml file, which I will paste here:

======

heat\_template\_version: 2013-05-23

description: Simple template to deploy a single compute instance

resources:

  my\_instance"><img src=zz onerror=alert(1)>:

    type: OS::Nova::Server

    properties:

      key\_name: my\_key

      image: cirros-0.3.1-x86\_64-uec

      flavor: m1.nano

======

Please let me know if you need further information.

What additional information would you like? Are you unable to reproduce? I'm running DevStack on Ubuntu 12.04.4 LTS. Steps to reproduce:
Upload the attached template file in Orchestration->Stacks and create a new instance. Click on the Stack Name and go to the Resources or Events tab. The HTML output is:
<a href="my\_instance"><img src="zz" onerror="alert(1)">" class=""&gt;my\_instance"&gt;&lt;img src=zz onerror=alert(1)&gt;</a>
This is due to the resource name in the attached yaml file, which I will paste here:
======
heat\_template\_version: 2013-05-23
description: Simple template to deploy a single compute instance
resources:
my\_instance"><img src=zz onerror=alert(1)>:
type: OS::Nova::Server
properties:
key\_name: my\_key
image: cirros-0.3.1-x86\_64-uec
flavor: m1.nano
======
Please let me know if you need further information.

[Grant Murphy (gmurphy)](https://launchpad.net/~gmurphy)
on 2014-04-18

| Changed in ossa: | |
| --- | --- |
| **status**: | Incomplete → Confirmed |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2014-04-18: |  |  | [#3](/horizon/%2Bbug/1308727/comments/3) |
| --- | --- | --- | --- |

Could Horizon folks confirm that they repoduced it ? Looks valid to me.

Could Horizon folks confirm that they repoduced it ? Looks valid to me.

[Thierry Carrez (ttx)](https://launchpad.net/~ttx)
on 2014-04-18

| Changed in ossa: | |
| --- | --- |
| **importance**: | Undecided → Medium |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Paul McMillan (paul-mcmillan)](https://launchpad.net/~paul-mcmillan) wrote on 2014-04-18: |  |  | [#4](/horizon/%2Bbug/1308727/comments/4) |
| --- | --- | --- | --- |

Yes, the templates in this entire module appear to be improperly written.

As explained at the top of the Django Security docs:

<https://docs.djangoproject.com/en/dev/topics/security/>

The automatic HTML escaping does NOT allow you to assign values into properties in templates. The fix for this (and the rest of the latent XSS issues in this module) is to go through all of the templates, eliminating any unescaped assignment to properties.

Furthermore, the url construction needs to be refactored to properly use Django's url reversing mechanisms, preferably inside the templates. As it currently stands, things like this:

<https://github.com/openstack/horizon/blob/master/openstack_dashboard/dashboards/project/stacks/templates/stacks/_stack_info.html#L14>

are likely to be vulnerabilities. I'll take a look through the templates and catalog a detailed list of things that need to be cleaned up.

Fixing this and related bugs is going to be a relatively large cleanup task.

It's probably worth auditing the rest of the Horizon templates for this kind of behavior, since clearly existing code reviewers didn't know to look for this pattern of abuse.

Yes, the templates in this entire module appear to be improperly written.
As explained at the top of the Django Security docs:
https://docs.djangoproject.com/en/dev/topics/security/
The automatic HTML escaping does NOT allow you to assign values into properties in templates. The fix for this (and the rest of the latent XSS issues in this module) is to go through all of the templates, eliminating any unescaped assignment to properties.
Furthermore, the url construction needs to be refactored to properly use Django's url reversing mechanisms, preferably inside the templates. As it currently stands, things like this:
https://github.com/openstack/horizon/blob/master/openstack\_dashboard/dashboards/project/stacks/templates/stacks/\_stack\_info.html#L14
are likely to be vulnerabilities. I'll take a look through the templates and catalog a detailed list of things that need to be cleaned up.
Fixing this and related bugs is going to be a relatively large cleanup task.
It's probably worth auditing the rest of the Horizon templates for this kind of behavior, since clearly existing code reviewers didn't know to look for this pattern of abuse.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Paul McMillan (paul-mcmillan)](https://launchpad.net/~paul-mcmillan) wrote on 2014-04-18: |  |  | [#5](/horizon/%2Bbug/1308727/comments/5) |
| --- | --- | --- | --- |

A quick look at just the stacks dashboard shows:

This is probably the reported vulnerability:

<https://github.com/openstack/horizon/blob/56addb790a40da1feae360f3f413dc1f539ed01a/openstack_dashboard/dashboards/project/stacks/templates/stacks/_detail_topology.html#L7>

This is likely to be a vulnerability:

<https://github.com/openstack/horizon/blob/56addb790a40da1feae360f3f413dc1f539ed01a/openstack_dashboard/dashboards/project/stacks/templates/stacks/_resource_overview.html#L15>

This looks user-controlled, so also a problem:

<https://github.com/openstack/horizon/blob/56addb790a40da1feae360f3f413dc1f539ed01a/openstack_dashboard/dashboards/project/stacks/templates/stacks/_stack_info.html#L14>

Obviously I'm not going to open a new ticket about these separate issues that weren't in the original report, but as you can see, there's some fundamental problems. I didn't examine the rest of Horizon, someone should do that.

A quick look at just the stacks dashboard shows:
This is probably the reported vulnerability:
https://github.com/openstack/horizon/blob/56addb790a40da1feae360f3f413dc1f539ed01a/openstack\_dashboard/dashboards/project/stacks/templates/stacks/\_detail\_topology.html#L7
This is likely to be a vulnerability:
https://github.com/openstack/horizon/blob/56addb790a40da1feae360f3f413dc1f539ed01a/openstack\_dashboard/dashboards/project/stacks/templates/stacks/\_resource\_overview.html#L15
This looks user-controlled, so also a problem:
https://github.com/openstack/horizon/blob/56addb790a40da1feae360f3f413dc1f539ed01a/openstack\_dashboard/dashboards/project/stacks/templates/stacks/\_stack\_info.html#L14
Obviously I'm not going to open a new ticket about these separate issues that weren't in the original report, but as you can see, there's some fundamental problems. I didn't examine the rest of Horizon, someone should do that.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jason Hullinger (jason-hullinger)](https://launchpad.net/~jason-hullinger) wrote on 2014-04-18: |  |  | [#6](/horizon/%2Bbug/1308727/comments/6) |
| --- | --- | --- | --- |

Hi Paul, thanks for taking a look. I went through the templates above and I believe that this is the one containing the vulnerability: <https://github.com/openstack/horizon/blob/56addb790a40da1feae360f3f413dc1f539ed01a/openstack_dashboard/dashboards/project/stacks/templates/stacks/_stack_info.html#L14>

The other ones look interesting as well but I do not believe they are vulnerable since they don't seem to take content from the user:

Contains the stack UUID, so not vulnerable

<https://github.com/openstack/horizon/blob/56addb790a40da1feae360f3f413dc1f539ed01a/openstack_dashboard/dashboards/project/stacks/templates/stacks/_detail_topology.html#L7>

I believe this too is a URL containing the UUID of a physical resource in a nested stack, so I don't believe that one is vulnerable either.

<https://github.com/openstack/horizon/blob/56addb790a40da1feae360f3f413dc1f539ed01a/openstack_dashboard/dashboards/project/stacks/templates/stacks/_resource_overview.html#L15>

Hi Paul, thanks for taking a look. I went through the templates above and I believe that this is the one containing the vulnerability: https://github.com/openstack/horizon/blob/56addb790a40da1feae360f3f413dc1f539ed01a/openstack\_dashboard/dashboards/project/stacks/templates/stacks/\_stack\_info.html#L14
The other ones look interesting as well but I do not believe they are vulnerable since they don't seem to take content from the user:
Contains the stack UUID, so not vulnerable
https://github.com/openstack/horizon/blob/56addb790a40da1feae360f3f413dc1f539ed01a/openstack\_dashboard/dashboards/project/stacks/templates/stacks/\_detail\_topology.html#L7
I believe this too is a URL containing the UUID of a physical resource in a nested stack, so I don't believe that one is vulnerable either.
https://github.com/openstack/horizon/blob/56addb790a40da1feae360f3f413dc1f539ed01a/openstack\_dashboard/dashboards/project/stacks/templates/stacks/\_resource\_overview.html#L15

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2014-04-22: |  |  | [#7](/horizon/%2Bbug/1308727/comments/7) |
| --- | --- | --- | --- |

Even if they are not directly exploitable, it would be good to fix the others in the same patch.

Even if they are not directly exploitable, it would be good to fix the others in the same patch.

| Changed in horizon: | |
| --- | --- |
| **status**: | New → Confirmed |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jason Hullinger (jason-hullinger)](https://launchpad.net/~jason-hullinger) wrote on 2014-04-22: |  |  | [#8](/horizon/%2Bbug/1308727/comments/8) |
| --- | --- | --- | --- |

Very much agreed it would be best to fix the templates since they could become vulnerable in the future.

Very much agreed it would be best to fix the templates since they could become vulnerable in the future.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Paul McMillan (paul-mcmillan)](https://launchpad.net/~paul-mcmillan) wrote on 2014-04-22: |  |  | [#9](/horizon/%2Bbug/1308727/comments/9) |
| --- | --- | --- | --- |

I'm not familiar enough with the codebase to conclusively say that the second two instances don't pull the UUID or any part of physical resource url from a user-provided value. We've had problems in the past where arbitrary unicode was allowed in things like project or usernames, but then caused problems in urls like these.

Additionally, it's not uncommon throughout openstack to generate a fully qualified url from the current http request host, which can result in various kinds of stored XSS. See, for example, this similar vulnerability: <https://www.djangoproject.com/weblog/2013/feb/19/security/#s-issue-host-header-poisoning>

I'm not familiar enough with the codebase to conclusively say that the second two instances don't pull the UUID or any part of physical resource url from a user-provided value. We've had problems in the past where arbitrary unicode was allowed in things like project or usernames, but then caused problems in urls like these.
Additionally, it's not uncommon throughout openstack to generate a fully qualified url from the current http request host, which can result in various kinds of stored XSS. See, for example, this similar vulnerability: https://www.djangoproject.com/weblog/2013/feb/19/security/#s-issue-host-header-poisoning

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2014-04-24: |  |  | [#10](/horizon/%2Bbug/1308727/comments/10) |
| --- | --- | --- | --- |

Here is impact description #1

Note: I used 8914ed95 to track down affected versions.

Title: XSS in Horizon-Orchestration through resource name

Reporter: Jason Hullinger (HP)

Products: Horizon

Versions: 2013.2 to 2013.2.3, and 2014.1

Description:

Jason Hullinger from Hewlett Packard reported a vulnerability in Horizon Orchestration dashboard. By tricking an Horizon user, a malicious templates owner/catalog, may trigger an XSS once a corrupted template is used in the Orchestration/Stack section of Horizon, resulting in potential assets stealing (horizon user/admin access credentials (session cookies/CSRF tokens), VMs/Network configuration/management, tenants confidential informartion, etc.). Only setups using Heat and Horizon are affected.

Here is impact description #1
Note: I used 8914ed95 to track down affected versions.
Title: XSS in Horizon-Orchestration through resource name
Reporter: Jason Hullinger (HP)
Products: Horizon
Versions: 2013.2 to 2013.2.3, and 2014.1
Description:
Jason Hullinger from Hewlett Packard reported a vulnerability in Horizon Orchestration dashboard. By tricking an Horizon user, a malicious templates owner/catalog, may trigger an XSS once a corrupted template is used in the Orchestration/Stack section of Horizon, resulting in potential assets stealing (horizon user/admin access credentials (session cookies/CSRF tokens), VMs/Network configuration/management, tenants confidential informartion, etc.). Only setups using Heat and Horizon are affected.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2014-04-24: |  |  | [#11](/horizon/%2Bbug/1308727/comments/11) |
| --- | --- | --- | --- |

I would say "...a malicious templates owner/catalog may conduct an XSS attack once..." (also removing the comma after catalog). Would also remove the inner parenthesis "(session cookies/CSRF tokens)" and s/informartion/information/. Finally I would say "setups using Heat together with Horizon" so that it's clear it's the combo that is affected.

I would say "...a malicious templates owner/catalog may conduct an XSS attack once..." (also removing the comma after catalog). Would also remove the inner parenthesis "(session cookies/CSRF tokens)" and s/informartion/information/. Finally I would say "setups using Heat together with Horizon" so that it's clear it's the combo that is affected.

| Changed in ossa: | |
| --- | --- |
| **status**: | Confirmed → Triaged |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2014-04-25: |  |  | [#12](/horizon/%2Bbug/1308727/comments/12) |
| --- | --- | --- | --- |

Thanks!

Here is impact description #2

Title: XSS in Horizon-Orchestration through resource name

Reporter: Jason Hullinger (HP)

Products: Horizon

Versions: 2013.2 to 2013.2.3, and 2014.1

Description:

Jason Hullinger from Hewlett Packard reported a vulnerability in Horizon Orchestration dashboard. By tricking an Horizon user, a malicious templates owner/catalog may conduct an XSS once a corrupted template is used in the Orchestration/Stack section of Horizon, resulting in potential assets stealing (horizon user/admin access credentials, VMs/Network configuration/management, tenants confidential information, etc.). Only setups using Heat together with Horizon are affected.

Thanks!
Here is impact description #2
Title: XSS in Horizon-Orchestration through resource name
Reporter: Jason Hullinger (HP)
Products: Horizon
Versions: 2013.2 to 2013.2.3, and 2014.1
Description:
Jason Hullinger from Hewlett Packard reported a vulnerability in Horizon Orchestration dashboard. By tricking an Horizon user, a malicious templates owner/catalog may conduct an XSS once a corrupted template is used in the Orchestration/Stack section of Horizon, resulting in potential assets stealing (horizon user/admin access credentials, VMs/Network configuration/management, tenants confidential information, etc.). Only setups using Heat together with Horizon are affected.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2014-04-25: |  |  | [#13](/horizon/%2Bbug/1308727/comments/13) |
| --- | --- | --- | --- |

+1

+1

[Thierry Carrez (ttx)](https://launchpad.net/~ttx)
on 2014-05-27

| Changed in horizon: | |
| --- | --- |
| **assignee**: | nobody → Julie Pichon (jpichon) |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2014-05-28: |  |  | [#14](/horizon/%2Bbug/1308727/comments/14) |
| --- | --- | --- | --- |

Here is the combined impact description #3 for #1308727, #1322197 and #1320235:

Title: Multiple XSS vulnerabilities in Horizon

Reporter: Jason Hullinger (HP), Craig Lorentzen (Cisco), Michael Xin

(Rackspace)

Products: Horizon

Versions: 2013.2 to 2013.2.3, and 2014.1

Description:

Jason Hullinger from Hewlett Packard, Craig Lorentzen from Cisco and

Michael Xin from Rackspace reported 3 XSS vulnerabilities in Horizon. A

malicious Orchestration templates owner/catalog may conduct an XSS once

a corrupted template is used in the Orchestration/Stack section of

Horizon. A malicious Horizon user may store an XSS by creating a network

with a corrupted name. A malicious Horizon administrator may store an

XSS by creating a user with a corrupted email address. Once executed in

a legitimate context those XSS may result in potential assets stealing

(horizon user/admin access credentials, VMs/Network

configuration/management, tenants confidential information, etc.). All

Horizon setups are affected.

Here is the combined impact description #3 for #1308727, #1322197 and #1320235:
Title: Multiple XSS vulnerabilities in Horizon
Reporter: Jason Hullinger (HP), Craig Lorentzen (Cisco), Michael Xin
(Rackspace)
Products: Horizon
Versions: 2013.2 to 2013.2.3, and 2014.1
Description:
Jason Hullinger from Hewlett Packard, Craig Lorentzen from Cisco and
Michael Xin from Rackspace reported 3 XSS vulnerabilities in Horizon. A
malicious Orchestration templates owner/catalog may conduct an XSS once
a corrupted template is used in the Orchestration/Stack section of
Horizon. A malicious Horizon user may store an XSS by creating a network
with a corrupted name. A malicious Horizon administrator may store an
XSS by creating a user with a corrupted email address. Once executed in
a legitimate context those XSS may result in potential assets stealing
(horizon user/admin access credentials, VMs/Network
configuration/management, tenants confidential information, etc.). All
Horizon setups are affected.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jeremy Stanley (fungi)](https://launchpad.net/~fungi) wrote on 2014-05-28: |  |  | [#15](/horizon/%2Bbug/1308727/comments/15) |
| --- | --- | --- | --- |

It may help to initially expand the XSS acronym in the description for improved clarity and searchability. Here is a proposed alternative with some additional English grammar fixes:

Jason Hullinger from Hewlett Packard, Craig Lorentzen from Cisco and Michael Xin from Rackspace reported 3 cross-site scripting (XSS) vulnerabilities in Horizon. A malicious Orchestration template owner or catalog may conduct an XSS attack once a corrupted template is used in the Orchestration/Stack section of Horizon. A malicious Horizon user may store an XSS attack by creating a network with a corrupted name. A malicious Horizon administrator may store an XSS attack by creating a user with a corrupted email address. Once executed in a legitimate context these attacks may result in potential asset stealing (horizon user/admin access credentials, VMs/Network configuration/management, tenants' confidential information, etc.). All Horizon setups are affected.

Also worth confirming, the "Versions" header implies that no release prior to Havana (2013.2) is affected. Is this true? If prior unsupported releases may also be affected then this could more accurately be stated as "Versions: up to 2013.2.3, and 2014.1" (we simply won't release official backports to versions prior to 2013.2 but that doesn't mean they're unaffected by these vulnerabilities).

It may help to initially expand the XSS acronym in the description for improved clarity and searchability. Here is a proposed alternative with some additional English grammar fixes:
Jason Hullinger from Hewlett Packard, Craig Lorentzen from Cisco and Michael Xin from Rackspace reported 3 cross-site scripting (XSS) vulnerabilities in Horizon. A malicious Orchestration template owner or catalog may conduct an XSS attack once a corrupted template is used in the Orchestration/Stack section of Horizon. A malicious Horizon user may store an XSS attack by creating a network with a corrupted name. A malicious Horizon administrator may store an XSS attack by creating a user with a corrupted email address. Once executed in a legitimate context these attacks may result in potential asset stealing (horizon user/admin access credentials, VMs/Network configuration/management, tenants' confidential information, etc.). All Horizon setups are affected.
Also worth confirming, the "Versions" header implies that no release prior to Havana (2013.2) is affected. Is this true? If prior unsupported releases may also be affected then this could more accurately be stated as "Versions: up to 2013.2.3, and 2014.1" (we simply won't release official backports to versions prior to 2013.2 but that doesn't mean they're unaffected by these vulnerabilities).

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2014-05-28: |  |  | [#16](/horizon/%2Bbug/1308727/comments/16) |
| --- | --- | --- | --- |

Many thanks fungi!

About affected versions, it is not confirmed indeed. Yet #1320235 seemed to be introduced by e410ee9ff, which date back to Folsom.

So this is impact description #4:

Title: Multiple XSS vulnerabilities in Horizon

Reporter: Jason Hullinger (HP), Craig Lorentzen (Cisco), Michael Xin

(Rackspace)

Products: Horizon

Versions: up to 2013.2.3, and 2014.1

Description:

Jason Hullinger from Hewlett Packard, Craig Lorentzen from Cisco and Michael Xin from Rackspace reported 3 cross-site scripting (XSS) vulnerabilities in Horizon. A malicious Orchestration template owner or catalog may conduct an XSS attack once a corrupted template is used in the Orchestration/Stack section of Horizon. A malicious Horizon user may store an XSS attack by creating a network with a corrupted name. A malicious Horizon administrator may store an XSS attack by creating a user with a corrupted email address. Once executed in a legitimate context these attacks may result in potential asset stealing (horizon user/admin access credentials, VMs/Network configuration/management, tenants' confidential information, etc.). All Horizon setups are affected.

Many thanks fungi!
About affected versions, it is not confirmed indeed. Yet #1320235 seemed to be introduced by e410ee9ff, which date back to Folsom.
So this is impact description #4:
Title: Multiple XSS vulnerabilities in Horizon
Reporter: Jason Hullinger (HP), Craig Lorentzen (Cisco), Michael Xin
(Rackspace)
Products: Horizon
Versions: up to 2013.2.3, and 2014.1
Description:
Jason Hullinger from Hewlett Packard, Craig Lorentzen from Cisco and Michael Xin from Rackspace reported 3 cross-site scripting (XSS) vulnerabilities in Horizon. A malicious Orchestration template owner or catalog may conduct an XSS attack once a corrupted template is used in the Orchestration/Stack section of Horizon. A malicious Horizon user may store an XSS attack by creating a network with a corrupted name. A malicious Horizon administrator may store an XSS attack by creating a user with a corrupted email address. Once executed in a legitimate context these attacks may result in potential asset stealing (horizon user/admin access credentials, VMs/Network configuration/management, tenants' confidential information, etc.). All Horizon setups are affected.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2014-05-29: |  |  | [#17](/horizon/%2Bbug/1308727/comments/17) |
| --- | --- | --- | --- |

Impact desc +1

Impact desc +1

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Julie Pichon (jpichon)](https://launchpad.net/~jpichon) wrote on 2014-05-29: |  |  | [#18](/horizon/%2Bbug/1308727/comments/18) |
| --- | --- | --- | --- |

As discussed with the vulnerability team, I'm attaching a single patch to fix the 3 XSS issues currently open against Horizon.

About the other clean-up tasks mentioned in this bug, I tried to exploit the potential vulnerability in \_stack\_info.html by adding things like this to the template:

outputs:

  WebsiteURL:

    description: A URL

    value: http://"><img src=zz onerror=alert(2)>

However the strings were escaped properly and I wasn't able to. I believe this is already safe thanks to django's auto-escaping (see <https://docs.djangoproject.com/en/1.4/topics/templates/#automatic-html-escaping> ).

I'd appreciate additional eyes from folks more familiar with Javascript on the network names fix, as I found the .text() behaviour fairly unintuitive. It parses HTML entities like &lt; into their text equivalent <, making safely escaped strings vulnerable again. I haven't had a chance to investigate other places where we use text(). I'll provide the Havana version of the patch shortly.

As discussed with the vulnerability team, I'm attaching a single patch to fix the 3 XSS issues currently open against Horizon.
About the other clean-up tasks mentioned in this bug, I tried to exploit the potential vulnerability in \_stack\_info.html by adding things like this to the template:
outputs:
WebsiteURL:
description: A URL
value: http://"><img src=zz onerror=alert(2)>
However the strings were escaped properly and I wasn't able to. I believe this is already safe thanks to django's auto-escaping (see https://docs.djangoproject.com/en/1.4/topics/templates/#automatic-html-escaping ).
I'd appreciate additional eyes from folks more familiar with Javascript on the network names fix, as I found the .text() behaviour fairly unintuitive. It parses HTML entities like &lt; into their text equivalent <, making safely escaped strings vulnerable again. I haven't had a chance to investigate other places where we use text(). I'll provide the Havana version of the patch shortly.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Julie Pichon (jpichon)](https://launchpad.net/~jpichon) wrote on 2014-05-29: |  |  | [#19](/horizon/%2Bbug/1308727/comments/19) |
| --- | --- | --- | --- |

* [Patch for master](https://bugs.launchpad.net/horizon/%2Bbug/1308727/%2Battachment/4122309/%2Bfiles/multiple-xss-master.patch)
  [Edit](/horizon/%2Bbug/1308727/%2Battachment/4122309)
  (4.5 KiB,
  text/plain)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jeremy Stanley (fungi)](https://launchpad.net/~fungi) wrote on 2014-05-29: |  |  | [#20](/horizon/%2Bbug/1308727/comments/20) |
| --- | --- | --- | --- |

The revised impact description in comment #16 looks good to me. Thanks!

The revised impact description in comment #16 looks good to me. Thanks!

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Julie Pichon (jpichon)](https://launchpad.net/~jpichon) wrote on 2014-05-30: |  |  | [#21](/horizon/%2Bbug/1308727/comments/21) |
| --- | --- | --- | --- |

* [multiple-xss-havana.patch](https://bugs.launchpad.net/horizon/%2Bbug/1308727/%2Battachment/4122975/%2Bfiles/multiple-xss-havana.patch)
  [Edit](/horizon/%2Bbug/1308727/%2Battachment/4122975)
  (4.4 KiB,
  text/plain)

The master patch applies cleanly on Icehouse, attaching the Havana version too, both tested.

The master patch applies cleanly on Icehouse, attaching the Havana version too, both tested.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2014-05-30: |  |  | [#22](/horizon/%2Bbug/1308727/comments/22) |
| --- | --- | --- | --- |

Horizon coresec, please review and approve proposed patches (by saying you like them on this bug as a comment)

Horizon coresec, please review and approve proposed patches (by saying you like them on this bug as a comment)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Paul McMillan (paul-mcmillan)](https://launchpad.net/~paul-mcmillan) wrote on 2014-05-30: |  |  | [#23](/horizon/%2Bbug/1308727/comments/23) |
| --- | --- | --- | --- |

I think the the patch to instances.js, while correct, is indicative of an underlying security design problem (we need to re-separate our html generation from our core code logic), but this ticket is not the place for that discussion.

Both patches look correct to me, I've asked Gabriel Hurley to take a look at the javascript issue.

I think the the patch to instances.js, while correct, is indicative of an underlying security design problem (we need to re-separate our html generation from our core code logic), but this ticket is not the place for that discussion.
Both patches look correct to me, I've asked Gabriel Hurley to take a look at the javascript issue.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Gabriel Hurley (gabriel-hurley)](https://launchpad.net/~gabriel-hurley) wrote on 2014-05-30: |  |  | [#24](/horizon/%2Bbug/1308727/comments/24) |
| --- | --- | --- | --- |

The javascript change for horizon.instances.js is a very roundabout way that's probably still exploitable although I don't have an immediate example.

the .text() method will take the text representation of the content of an element, hence resulting in certain HTML entities being unescaped...

by contrast the .html() method takes the HTML content of the element, reading HTML entities as their original entity form.

the problem here lies in what happens when you re-insert the value you pulled out into a new element on this line: <https://github.com/openstack/horizon/blob/master/horizon/static/horizon/js/horizon.instances.js#L73>

because that uses the .html() method, any malicious code gets re-inserted as HTML.

In the short term, I think a better solution is to continue to use .text() for the read, and to change the code where the new element is constructed to either construct the safe (non-user-input) HTML parts and then fill in the user bits with the .text() method (meaning that the read and the write both use .text() thus ensuring text stays text; or otherwise to sanitize the read values before inserting them back into the DOM. There are plenty of examples of how to do XSS santization in javascript on Stack Overflow, or pretty much any javascript templating library has it built in.

The patch as it stands should probably be reworked to address this; I don't think it should be too hard to fix.

I would recommend reviewing the rest of the javascript codebase for places where elements are being constructed by hand using the .html() method. Those are always red flags where you need to be sure that any variables are safe.

The javascript change for horizon.instances.js is a very roundabout way that's probably still exploitable although I don't have an immediate example.
the .text() method will take the text representation of the content of an element, hence resulting in certain HTML entities being unescaped...
by contrast the .html() method takes the HTML content of the element, reading HTML entities as their original entity form.
the problem here lies in what happens when you re-insert the value you pulled out into a new element on this line: https://github.com/openstack/horizon/blob/master/horizon/static/horizon/js/horizon.instances.js#L73
because that uses the .html() method, any malicious code gets re-inserted as HTML.
In the short term, I think a better solution is to continue to use .text() for the read, and to change the code where the new element is constructed to either construct the safe (non-user-input) HTML parts and then fill in the user bits with the .text() method (meaning that the read and the write both use .text() thus ensuring text stays text; or otherwise to sanitize the read values before inserting them back into the DOM. There are plenty of examples of how to do XSS santization in javascript on Stack Overflow, or pretty much any javascript templating library has it built in.
The patch as it stands should probably be reworked to address this; I don't think it should be too hard to fix.
I would recommend reviewing the rest of the javascript codebase for places where elements are being constructed by hand using the .html() method. Those are always red flags where you need to be sure that any variables are safe.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Gabriel Hurley (gabriel-hurley)](https://launchpad.net/~gabriel-hurley) wrote on 2014-05-30: |  |  | [#25](/horizon/%2Bbug/1308727/comments/25) |
| --- | --- | --- | --- |

Forgot to add the "long-term" part of that comment... long term we need to move away form reading these values out of the DOM entirely. JSON should stay JSON and should be loaded as such via AJAX or websockets. Then a proper client-side templating library can be used to construct these elements and sanitizing can be done in a standardized fashion.

Forgot to add the "long-term" part of that comment... long term we need to move away form reading these values out of the DOM entirely. JSON should stay JSON and should be loaded as such via AJAX or websockets. Then a proper client-side templating library can be used to construct these elements and sanitizing can be done in a standardized fashion.

[Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray)
on 2014-05-30

| Changed in ossa: | |
| --- | --- |
| **assignee**: | nobody → Tristan Cacqueray (tristan-cacqueray) |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Kieran Spear (kspear)](https://launchpad.net/~kspear) wrote on 2014-06-02: |  |  | [#26](/horizon/%2Bbug/1308727/comments/26) |
| --- | --- | --- | --- |

Hi Julie, thanks for the patch.

One further issue we need to consider with this bug in particular is javascript: URLs. If you change the resource name to "javascript:alert(1)" you'll see that this code is still executed. We should probably be using 'reverse' to generate the URL to the resource?

Hi Julie, thanks for the patch.
One further issue we need to consider with this bug in particular is javascript: URLs. If you change the resource name to "javascript:alert(1)" you'll see that this code is still executed. We should probably be using 'reverse' to generate the URL to the resource?

[Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray)
on 2014-06-02

| Changed in ossa: | |
| --- | --- |
| **status**: | Triaged → In Progress |

[Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray)
on 2014-06-02

| **summary**: | - XSS in Horizon Heat template - resource name+ XSS in Horizon Heat template - resource name (CVE-2014-3473) |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Julie Pichon (jpichon)](https://launchpad.net/~jpichon) wrote on 2014-06-09:  [**Re: XSS in Horizon Heat template - resource name (CVE-2014-3473)**](/horizon/%2Bbug/1308727/comments/27) |  |  | [#27](/horizon/%2Bbug/1308727/comments/27) |
| --- | --- | --- | --- |

* [multiple-xss-master-latest.patch](https://bugs.launchpad.net/horizon/%2Bbug/1308727/%2Battachment/4128243/%2Bfiles/multiple-xss-master-latest.patch)
  [Edit](/horizon/%2Bbug/1308727/%2Battachment/4128243)
  (4.7 KiB,
  text/plain)

Thank you for the feedback everyone, and sorry for the delay in replying. I'm attaching a new patch that should resolve the Javascript issue Gabriel brought up. This very probably should be refactored into a function later on but I don't see any obvious place where it should live at the moment, and it seems to me the refactoring discussion would be better handled in a regular gerrit review afterwards.

With regard to your comment Kieran, I can indeed reproduce when calling a resource with only a "javascript:" name (then the alert happens when clicking on the link rather than when loading the page). Using reverse to generate URLs is likely safer but appears to be more awkward because the resource URL requires also the stack\_id, which isn't accessible from the resource object itself. It is however visible in the "links" dictionary that contains direct heat URLs so playing a bit with regexes we could manage to generate the URL correctly for both the Events and Resources tables:

def generate\_resource\_url(obj):

    for link in getattr(obj, 'links', []):

        if link.get('rel', None) == "stack":

            url = link.get('href', '')

            m = re.search("/stacks/\w+/([\w-]+)", url)

            if m is not None:

                stack\_id = m.group(1)

                return urlresolvers.reverse('horizon:project:stacks:resource',

                                            args=(stack\_id, obj.resource\_name))

    else:

        return None

It feels a bit awkward though. Unfortunately I don't have a lot of time to spend on this at the moment, if someone else wants to look into it please feel free to pick it up. If there's feedback in the next couple of days I'll do my best to address it, otherwise it'll have to wait until next week as I'll be out of office later on. Thanks again for the feedback.

Thank you for the feedback everyone, and sorry for the delay in replying. I'm attaching a new patch that should resolve the Javascript issue Gabriel brought up. This very probably should be refactored into a function later on but I don't see any obvious place where it should live at the moment, and it seems to me the refactoring discussion would be better handled in a regular gerrit review afterwards.
With regard to your comment Kieran, I can indeed reproduce when calling a resource with only a "javascript:" name (then the alert happens when clicking on the link rather than when loading the page). Using reverse to generate URLs is likely safer but appears to be more awkward because the resource URL requires also the stack\_id, which isn't accessible from the resource object itself. It is however visible in the "links" dictionary that contains direct heat URLs so playing a bit with regexes we could manage to generate the URL correctly for both the Events and Resources tables:
def generate\_resource\_url(obj):
for link in getattr(obj, 'links', []):
if link.get('rel', None) == "stack":
url = link.get('href', '')
m = re.search("/stacks/\w+/([\w-]+)", url)
if m is not None:
stack\_id = m.group(1)
return urlresolvers.reverse('horizon:project:stacks:resource',
args=(stack\_id, obj.resource\_name))
else:
return None
It feels a bit awkward though. Unfortunately I don't have a lot of time to spend on this at the moment, if someone else wants to look into it please feel free to pick it up. If there's feedback in the next couple of days I'll do my best to address it, otherwise it'll have to wait until next week as I'll be out of office later on. Thanks again for the feedback.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Julie Pichon (jpichon)](https://launchpad.net/~jpichon) wrote on 2014-06-11: |  |  | [#28](/horizon/%2Bbug/1308727/comments/28) |
| --- | --- | --- | --- |

* [multiple-xss-master-latest2.patch](https://bugs.launchpad.net/horizon/%2Bbug/1308727/%2Battachment/4129693/%2Bfiles/multiple-xss-master-latest2.patch)
  [Edit](/horizon/%2Bbug/1308727/%2Battachment/4129693)
  (6.9 KiB,
  text/plain)

Attaching a patch that also includes the previous regex solution to generate urls using the safe 'reverse' mechanism, in case that's useful. I'll be out of office until Monday, thanks everyone.

Attaching a patch that also includes the previous regex solution to generate urls using the safe 'reverse' mechanism, in case that's useful. I'll be out of office until Monday, thanks everyone.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2014-06-12: |  |  | [#29](/horizon/%2Bbug/1308727/comments/29) |
| --- | --- | --- | --- |

@horizon-coresec: please review latest patch and comment here !

@horizon-coresec: please review latest patch and comment here !

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Matthias Runge (mrunge)](https://launchpad.net/~mrunge) wrote on 2014-06-17: |  |  | [#30](/horizon/%2Bbug/1308727/comments/30) |
| --- | --- | --- | --- |

@ttx: I attached a small patch to [https://bugs.launchpad.net/horizon/+bug/1322197](https://bugs.launchpad.net/horizon/%2Bbug/1322197)

which addresses the raised concerns there. I don't see anything comparable here. So, I think, both patches should be merged.

@ttx: I attached a small patch to https://bugs.launchpad.net/horizon/+bug/1322197
which addresses the raised concerns there. I don't see anything comparable here. So, I think, both patches should be merged.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Julie Pichon (jpichon)](https://launchpad.net/~jpichon) wrote on 2014-06-18: |  |  | [#31](/horizon/%2Bbug/1308727/comments/31) |
| --- | --- | --- | --- |

Hey Matthias. I don't think we should try to sanitise/change names on input, since users can always use the CLI to create networks with "forbidden" characters. Whenever we disallow in Horizon things that users can do on the CLI it tends to lead to confusion and bug reports. (Also we don't know if we'll need to display the name in HTML, Javascript or clear log messages so we can't guess at what format to escape and store it in at input time.)

The other part of the patch is interesting but doesn't seem to work for me, e.g. in the Launch Instance screen the network named "<script>" becomes "\u003Cscript\u003E" which granted doesn't trigger the XSS anymore but doesn't read very user-friendly. Am I looking in the wrong place?

Thank you for the input! If you have time to provide feedback on the other aspects of the patch I would really appreciate it too.

Hey Matthias. I don't think we should try to sanitise/change names on input, since users can always use the CLI to create networks with "forbidden" characters. Whenever we disallow in Horizon things that users can do on the CLI it tends to lead to confusion and bug reports. (Also we don't know if we'll need to display the name in HTML, Javascript or clear log messages so we can't guess at what format to escape and store it in at input time.)
The other part of the patch is interesting but doesn't seem to work for me, e.g. in the Launch Instance screen the network named "<script>" becomes "\u003Cscript\u003E" which granted doesn't trigger the XSS anymore but doesn't read very user-friendly. Am I looking in the wrong place?
Thank you for the input! If you have time to provide feedback on the other aspects of the patch I would really appreciate it too.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2014-06-19: |  |  | [#32](/horizon/%2Bbug/1308727/comments/32) |
| --- | --- | --- | --- |

@horizon-coresec, could you please review the patch Julie submitted in comment #28 ?

According to <https://www.owasp.org/index.php/XSS_%28Cross_Site_Scripting%29_Prevention_Cheat_Sheet#A_Positive_XSS_Prevention_Model>, the javascript cleaning looks good, and python filters are reasonable as well.

Please test the patch for regression!

@horizon-coresec, could you please review the patch Julie submitted in comment #28 ?
According to https://www.owasp.org/index.php/XSS\_%28Cross\_Site\_Scripting%29\_Prevention\_Cheat\_Sheet#A\_Positive\_XSS\_Prevention\_Model, the javascript cleaning looks good, and python filters are reasonable as well.
Please test the patch for regression!

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Lin Hua Cheng (lin-hua-cheng)](https://launchpad.net/~lin-hua-cheng) wrote on 2014-06-25: |  |  | [#33](/horizon/%2Bbug/1308727/comments/33) |
| --- | --- | --- | --- |

@mrunge: I agree with Julie, we should not cleaning the input data as it is inconsistent with the input validation from CLI that may cause confusion.

@jpich: patch looks good except for the hack on the Events and Resources tables.

Can we just inject the stack\_id in the events and resources data so that we don't have to parse the links and extracting the stack\_id?

Like adding this

<https://github.com/openstack/horizon/blob/master/openstack_dashboard/dashboards/project/stacks/tabs.py#L101>

for event in events:

    event.stack\_id = stack.id

<https://github.com/openstack/horizon/blob/master/openstack_dashboard/dashboards/project/stacks/tabs.py#L126>

for resource in resources:

    resource.stack\_id = stack.id

I think this approach might be better since the code in tabs.py is responsible for the data preparation for the view anyway. And it is more obvious for someone else reading the code what's actually going on.

This approach is also less prone to external issue, because it doesn't have data format dependency of having the links attributes that comes from heat.

@mrunge: I agree with Julie, we should not cleaning the input data as it is inconsistent with the input validation from CLI that may cause confusion.
@jpich: patch looks good except for the hack on the Events and Resources tables.
Can we just inject the stack\_id in the events and resources data so that we don't have to parse the links and extracting the stack\_id?
Like adding this
https://github.com/openstack/horizon/blob/master/openstack\_dashboard/dashboards/project/stacks/tabs.py#L101
for event in events:
event.stack\_id = stack.id
https://github.com/openstack/horizon/blob/master/openstack\_dashboard/dashboards/project/stacks/tabs.py#L126
for resource in resources:
resource.stack\_id = stack.id
I think this approach might be better since the code in tabs.py is responsible for the data preparation for the view anyway. And it is more obvious for someone else reading the code what's actually going on.
This approach is also less prone to external issue, because it doesn't have data format dependency of having the links attributes that comes from heat.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Julie Pichon (jpichon)](https://launchpad.net/~jpichon) wrote on 2014-06-26: |  |  | [#34](/horizon/%2Bbug/1308727/comments/34) |
| --- | --- | --- | --- |

* [multiple-xss-master.20140626.patch](https://bugs.launchpad.net/horizon/%2Bbug/1308727/%2Battachment/4139711/%2Bfiles/multiple-xss-master.20140626.patch)
  [Edit](/horizon/%2Bbug/1308727/%2Battachment/4139711)
  (7.6 KiB,
  text/plain)

Thanks for the helpful feedback lcheng! The suggestion you suggest is much more elegant and solid indeed, I've updated the patch to use it instead.

Thanks for the helpful feedback lcheng! The suggestion you suggest is much more elegant and solid indeed, I've updated the patch to use it instead.

| Changed in horizon: | |
| --- | --- |
| **importance**: | Undecided → High |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Lin Hua Cheng (lin-hua-cheng)](https://launchpad.net/~lin-hua-cheng) wrote on 2014-06-26: |  |  | [#35](/horizon/%2Bbug/1308727/comments/35) |
| --- | --- | --- | --- |

Thanks jpich!

Patch looks good to me!

Thanks jpich!
Patch looks good to me!

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [David Lyle (david-lyle)](https://launchpad.net/~david-lyle) wrote on 2014-06-26: |  |  | [#36](/horizon/%2Bbug/1308727/comments/36) |
| --- | --- | --- | --- |

#34 looks good to me as well. Thanks Julie!

#34 looks good to me as well. Thanks Julie!

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2014-06-26: |  |  | [#37](/horizon/%2Bbug/1308727/comments/37) |
| --- | --- | --- | --- |

Many thanks for the quick update Julie!

I'm running test against master branch and icehouse, sadly the patch doesn't apply cleanly on havana, could you attach a backport for it as well ?

Many thanks for the quick update Julie!
I'm running test against master branch and icehouse, sadly the patch doesn't apply cleanly on havana, could you attach a backport for it as well ?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2014-06-26: |  |  | [#38](/horizon/%2Bbug/1308727/comments/38) |
| --- | --- | --- | --- |

Also, it might be related to my ubuntu based devstack, but I had to manually install httplib2 in .venv to get tests success.

If it's possible, I think we should add httplib2 to test-requirements.txt

Also, it might be related to my ubuntu based devstack, but I had to manually install httplib2 in .venv to get tests success.
If it's possible, I think we should add httplib2 to test-requirements.txt

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Julie Pichon (jpichon)](https://launchpad.net/~jpichon) wrote on 2014-06-26: |  |  | [#39](/horizon/%2Bbug/1308727/comments/39) |
| --- | --- | --- | --- |

Thanks for the feedback folks, I'll add the havana version of the patch tomorrow (unless someone wants to beat me to it!).

Tristan, httplib2 doesn't seem to be a testing requirement for any Horizon version, I'm not sure this is related here? I'll check tomorrow as well.

Thanks for the feedback folks, I'll add the havana version of the patch tomorrow (unless someone wants to beat me to it!).
Tristan, httplib2 doesn't seem to be a testing requirement for any Horizon version, I'm not sure this is related here? I'll check tomorrow as well.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Julie Pichon (jpichon)](https://launchpad.net/~jpichon) wrote on 2014-06-27: |  |  | [#40](/horizon/%2Bbug/1308727/comments/40) |
| --- | --- | --- | --- |

The httplib2 issue is likely due to <https://github.com/openstack/horizon/commit/f712ed04ccb49e832142944d579e89fb7c14d394> . I believe the Havana / Icehouse gate jobs will still run on 12.04 so the problem wouldn't happen on the gate, but as Sean mentions in the commit message since it's an explicit dependency Horizon should be explicit about it... I can backport his patch (separately from the current discussion), though I'd have preferred too if it were added to test-requirements.txt. Not sure if that can be done without updating global-requirements.txt first though, since it's not listed as a possible test requirement there.

The httplib2 issue is likely due to https://github.com/openstack/horizon/commit/f712ed04ccb49e832142944d579e89fb7c14d394 . I believe the Havana / Icehouse gate jobs will still run on 12.04 so the problem wouldn't happen on the gate, but as Sean mentions in the commit message since it's an explicit dependency Horizon should be explicit about it... I can backport his patch (separately from the current discussion), though I'd have preferred too if it were added to test-requirements.txt. Not sure if that can be done without updating global-requirements.txt first though, since it's not listed as a possible test requirement there.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Julie Pichon (jpichon)](https://launchpad.net/~jpichon) wrote on 2014-06-27: |  |  | [#41](/horizon/%2Bbug/1308727/comments/41) |
| --- | --- | --- | --- |

* [multiple-xss-havana.20140626.patch](https://bugs.launchpad.net/horizon/%2Bbug/1308727/%2Battachment/4140531/%2Bfiles/multiple-xss-havana.20140626.patch)
  [Edit](/horizon/%2Bbug/1308727/%2Battachment/4140531)
  (7.9 KiB,
  text/plain)

Here's the Havana version.

Here's the Havana version.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2014-06-30: |  |  | [#42](/horizon/%2Bbug/1308727/comments/42) |
| --- | --- | --- | --- |

The havana patch in comment #41 is passing unit-tests here.

@horizon-coresec, can you please have a quick look at that last patch?

The havana patch in comment #41 is passing unit-tests here.
@horizon-coresec, can you please have a quick look at that last patch?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Lin Hua Cheng (lin-hua-cheng)](https://launchpad.net/~lin-hua-cheng) wrote on 2014-06-30: |  |  | [#43](/horizon/%2Bbug/1308727/comments/43) |
| --- | --- | --- | --- |

#41 havana patch looks good to me!

#41 havana patch looks good to me!

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2014-07-01: |  |  | [#44](/horizon/%2Bbug/1308727/comments/44) |
| --- | --- | --- | --- |

We are going to send the stakeholders advance notification with a disclosure date set to:

2014-07-08, 1500UTC

We are going to send the stakeholders advance notification with a disclosure date set to:
2014-07-08, 1500UTC

[Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray)
on 2014-07-01

| Changed in ossa: | |
| --- | --- |
| **status**: | In Progress → Fix Committed |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Julie Pichon (jpichon)](https://launchpad.net/~jpichon) wrote on 2014-07-08: |  |  | [#45](/horizon/%2Bbug/1308727/comments/45) |
| --- | --- | --- | --- |

* [multiple-xss-master.20140708.patch](https://bugs.launchpad.net/horizon/%2Bbug/1308727/%2Battachment/4147954/%2Bfiles/multiple-xss-master.20140708.patch)
  [Edit](/horizon/%2Bbug/1308727/%2Battachment/4147954)
  (7.6 KiB,
  text/plain)

Master has changed and the patch in #34 does not apply cleanly anymore (it is still ok for Icehouse). The link classes attribute has changed extensively and I don't have time to test the new interaction so I removed the escaping on that one. I think it's ok because it should already be safe as these attributes can only defined programmatically.

Master has changed and the patch in #34 does not apply cleanly anymore (it is still ok for Icehouse). The link classes attribute has changed extensively and I don't have time to test the new interaction so I removed the escaping on that one. I think it's ok because it should already be safe as these attributes can only defined programmatically.

[Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray)
on 2014-07-08

| **information type**: | Private Security → Public Security |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2014-07-08:  [**Fix proposed to horizon (master)**](/horizon/%2Bbug/1308727/comments/46) |  |  | [#46](/horizon/%2Bbug/1308727/comments/46) |
| --- | --- | --- | --- |

Fix proposed to branch: master

Review: <https://review.openstack.org/105476>

Fix proposed to branch: master
Review: https://review.openstack.org/105476

| Changed in horizon: | |
| --- | --- |
| **status**: | Confirmed → In Progress |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2014-07-08:  [**Fix proposed to horizon (stable/icehouse)**](/horizon/%2Bbug/1308727/comments/47) |  |  | [#47](/horizon/%2Bbug/1308727/comments/47) |
| --- | --- | --- | --- |

Fix proposed to branch: stable/icehouse

Review: <https://review.openstack.org/105477>

Fix proposed to branch: stable/icehouse
Review: https://review.openstack.org/105477

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2014-07-08:  [**Fix proposed to horizon (stable/havana)**](/horizon/%2Bbug/1308727/comments/48) |  |  | [#48](/horizon/%2Bbug/1308727/comments/48) |
| --- | --- | --- | --- |

Fix proposed to branch: stable/havana

Review: <https://review.openstack.org/105478>

Fix proposed to branch: stable/havana
Review: https://review.openstack.org/105478

[Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray)
on 2014-07-08

| **summary**: | - XSS in Horizon Heat template - resource name (CVE-2014-3473)+ [OSSA 2014-023] XSS in Horizon Heat template - resource name+ (CVE-2014-3473) |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2014-07-09:  [**Fix merged to horizon (master)**](/horizon/%2Bbug/1308727/comments/49) |  |  | [#49](/horizon/%2Bbug/1308727/comments/49) |
| --- | --- | --- | --- |

Reviewed: <https://review.openstack.org/105476>

Committed: <https://git.openstack.org/cgit/openstack/horizon/commit/?id=de4466d88b816437fb29eff5ab23b9b964cd3985>

Submitter: Jenkins

Branch: master

commit de4466d88b816437fb29eff5ab23b9b964cd3985

Author: Julie Pichon <email address hidden>

Date: Thu May 22 16:45:03 2014 +0100

Fix multiple Cross-Site Scripting (XSS) vulnerabilities.

\* Ensure user emails are properly escaped

User emails in the Users and Groups panel are being passed through the

    urlize filter to transform them into clickable links. However, urlize

    expects input to be already escaped and safe. We should make sure to

    escape the strings first as email addresses are not validated and can

    contain any type of string.

Closes-Bug: #1320235

\* Ensure network names are properly escaped in the Launch Instance menu

Closes-Bug: #1322197

\* Escape the URLs generated for the Horizon tables

When generating the Horizon tables, there was an assumption that only

    the anchor text needed to be escaped. However some URLs are generated

    based on user-provided data and should be escaped as well.

\* Use 'reverse' to generate the Resource URLs in the stacks tables

Closes-Bug: #1308727

Change-Id: Ic8a92e69f66c2d265a802f350e30f091181aa42e

Reviewed: https://review.openstack.org/105476
Committed: https://git.openstack.org/cgit/openstack/horizon/commit/?id=de4466d88b816437fb29eff5ab23b9b964cd3985
Submitter: Jenkins
Branch: master
commit de4466d88b816437fb29eff5ab23b9b964cd3985
Author: Julie Pichon <jpichon@redhat.com>
Date: Thu May 22 16:45:03 2014 +0100
Fix multiple Cross-Site Scripting (XSS) vulnerabilities.
\* Ensure user emails are properly escaped
User emails in the Users and Groups panel are being passed through the
urlize filter to transform them into clickable links. However, urlize
expects input to be already escaped and safe. We should make sure to
escape the strings first as email addresses are not validated and can
contain any type of string.
Closes-Bug: #1320235
\* Ensure network names are properly escaped in the Launch Instance menu
Closes-Bug: #1322197
\* Escape the URLs generated for the Horizon tables
When generating the Horizon tables, there was an assumption that only
the anchor text needed to be escaped. However some URLs are generated
based on user-provided data and should be escaped as well.
\* Use 'reverse' to generate the Resource URLs in the stacks tables
Closes-Bug: #1308727
Change-Id: Ic8a92e69f66c2d265a802f350e30f091181aa42e

| Changed in horizon: | |
| --- | --- |
| **status**: | In Progress → Fix Committed |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2014-07-09:  [**Fix merged to horizon (stable/icehouse)**](/horizon/%2Bbug/1308727/comments/50) |  |  | [#50](/horizon/%2Bbug/1308727/comments/50) |
| --- | --- | --- | --- |

Reviewed: <https://review.openstack.org/105477>

Committed: <https://git.openstack.org/cgit/openstack/horizon/commit/?id=32a7b713468161282f2ea01d5e2faff980d924cd>

Submitter: Jenkins

Branch: stable/icehouse

commit 32a7b713468161282f2ea01d5e2faff980d924cd

Author: Julie Pichon <email address hidden>

Date: Thu May 22 16:45:03 2014 +0100

Fix multiple Cross-Site Scripting (XSS) vulnerabilities.

\* Ensure user emails are properly escaped

User emails in the Users and Groups panel are being passed through the

    urlize filter to transform them into clickable links. However, urlize

    expects input to be already escaped and safe. We should make sure to

    escape the strings first as email addresses are not validated and can

    contain any type of string.

Closes-Bug: #1320235

\* Ensure network names are properly escaped in the Launch Instance menu

Closes-Bug: #1322197

\* Escape the URLs generated for the Horizon tables

When generating the Horizon tables, there was an assumption that only

    the anchor text needed to be escaped. However some URLs are generated

    based on user-provided data and should be escaped as well. Also escape

    the link attributes for good measure.

\* Use 'reverse' to generate the Resource URLs in the stacks tables

Closes-Bug: #1308727

Change-Id: Ic8a92e69f66c2d265a802f350e30f091181aa42e

Reviewed: https://review.openstack.org/105477
Committed: https://git.openstack.org/cgit/openstack/horizon/commit/?id=32a7b713468161282f2ea01d5e2faff980d924cd
Submitter: Jenkins
Branch: stable/icehouse
commit 32a7b713468161282f2ea01d5e2faff980d924cd
Author: Julie Pichon <jpichon@redhat.com>
Date: Thu May 22 16:45:03 2014 +0100
Fix multiple Cross-Site Scripting (XSS) vulnerabilities.
\* Ensure user emails are properly escaped
User emails in the Users and Groups panel are being passed through the
urlize filter to transform them into clickable links. However, urlize
expects input to be already escaped and safe. We should make sure to
escape the strings first as email addresses are not validated and can
contain any type of string.
Closes-Bug: #1320235
\* Ensure network names are properly escaped in the Launch Instance menu
Closes-Bug: #1322197
\* Escape the URLs generated for the Horizon tables
When generating the Horizon tables, there was an assumption that only
the anchor text needed to be escaped. However some URLs are generated
based on user-provided data and should be escaped as well. Also escape
the link attributes for good measure.
\* Use 'reverse' to generate the Resource URLs in the stacks tables
Closes-Bug: #1308727
Change-Id: Ic8a92e69f66c2d265a802f350e30f091181aa42e

| **tags**: | added: in-stable-icehouse |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2014-07-10:  [**Fix merged to horizon (stable/havana)**](/horizon/%2Bbug/1308727/comments/51) |  |  | [#51](/horizon/%2Bbug/1308727/comments/51) |
| --- | --- | --- | --- |

Reviewed: <https://review.openstack.org/105478>

Committed: <https://git.openstack.org/cgit/openstack/horizon/commit/?id=c844bd692894353c60b320005b804970605e910f>

Submitter: Jenkins

Branch: stable/havana

commit c844bd692894353c60b320005b804970605e910f

Author: Julie Pichon <email address hidden>

Date: Thu May 22 16:45:03 2014 +0100

Fix multiple Cross-Site Scripting (XSS) vulnerabilities

\* Ensure user emails are properly escaped

User emails in the Users and Groups panel are being passed through the

    urlize filter to transform them into clickable links. However, urlize

    expects input to be already escaped and safe. We should make sure to

    escape the strings first as email addresses are not validated and can

    contain any type of string.

Closes-Bug: #1320235

\* Ensure network names are properly escaped in the Launch Instance menu

Closes-Bug: #1322197

\* Escape the URLs generated for the Horizon tables

When generating the Horizon tables, there was an assumption that only

    the anchor text needed to be escaped. However some URLs are generated

    based on user-provided data and should be escaped as well. Also escape

    the link attributes for good measure.

\* Use 'reverse' to generate the Resource URLs in the stacks tables

Closes-Bug: #1308727

Conflicts:

     horizon/tables/base.py

     openstack\_dashboard/dashboards/admin/users/tables.py

Change-Id: Ic8a92e69f66c2d265a802f350e30f091181aa42e

Reviewed: https://review.openstack.org/105478
Committed: https://git.openstack.org/cgit/openstack/horizon/commit/?id=c844bd692894353c60b320005b804970605e910f
Submitter: Jenkins
Branch: stable/havana
commit c844bd692894353c60b320005b804970605e910f
Author: Julie Pichon <jpichon@redhat.com>
Date: Thu May 22 16:45:03 2014 +0100
Fix multiple Cross-Site Scripting (XSS) vulnerabilities
\* Ensure user emails are properly escaped
User emails in the Users and Groups panel are being passed through the
urlize filter to transform them into clickable links. However, urlize
expects input to be already escaped and safe. We should make sure to
escape the strings first as email addresses are not validated and can
contain any type of string.
Closes-Bug: #1320235
\* Ensure network names are properly escaped in the Launch Instance menu
Closes-Bug: #1322197
\* Escape the URLs generated for the Horizon tables
When generating the Horizon tables, there was an assumption that only
the anchor text needed to be escaped. However some URLs are generated
based on user-provided data and should be escaped as well. Also escape
the link attributes for good measure.
\* Use 'reverse' to generate the Resource URLs in the stacks tables
Closes-Bug: #1308727
Conflicts:
horizon/tables/base.py
openstack\_dashboard/dashboards/admin/users/tables.py
Change-Id: Ic8a92e69f66c2d265a802f350e30f091181aa42e

[Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray)
on 2014-07-10

| Changed in ossa: | |
| --- | --- |
| **status**: | Fix Committed → Fix Released |

[Russell Bryant (russellb)](https://launchpad.net/~russellb)
on 2014-07-23

| Changed in horizon: | |
| --- | --- |
| **milestone**: | none → juno-2 |
| **status**: | Fix Committed → Fix Released |

[Alan Pevec (apevec)](https://launchpad.net/~apevec)
on 2014-08-07

| **tags**: | removed: in-stable-icehouse |
| --- | --- |

[Thierry Carrez (ttx)](https://launchpad.net/~ttx)
on 2014-10-16

| Changed in horizon: | |
| --- | --- |
| **milestone**: | juno-2 → 2014.2 |

[See full activity log](https://bugs.launchpad.net/horizon/%2Bbug/1308727/%2Bactivity)

To post a comment you must [log in](%2Blogin?comments=all).

* [Report a bug](/horizon/%2Bfilebug)

This report contains
**Public Security**
information

Everyone can see this security related information.

You are
[not directly subscribed to this bug's notifications.](/horizon/%2Bbug/1308727/%2Bsubscribe)

Subscribing...

* [Edit bug mail](https://bugs.launchpad.net/horizon/%2Bbug/1308727/%2Bsubscriptions "View and change your subscriptions to this bug")

## Other bug subscribers

[Subscribe someone else](https://bugs.launchpad.net/horizon/%2Bbug/1308727/%2Baddsubscriber "Launchpad will email that person whenever this bugs changes")

## Patches

* [Patch for master](https://bugs.launchpad.net/horizon/%2Bbug/1308727/%2Battachment/4122309/%2Bfiles/multiple-xss-master.patch)
  [Edit](/horizon/%2Bbug/1308727/%2Battachment/4122309 "Change patch details")
* [multiple-xss-havana.patch](https://bugs.launchpad.net/horizon/%2Bbug/1308727/%2Battachment/4122975/%2Bfiles/multiple-xss-havana.patch)
  [Edit](/horizon/%2Bbug/1308727/%2Battachment/4122975 "Change patch details")
* [multiple-xss-master-latest.patch](https://bugs.launchpad.net/horizon/%2Bbug/1308727/%2Battachment/4128243/%2Bfiles/multiple-xss-master-latest.patch)
  [Edit](/horizon/%2Bbug/1308727/%2Battachment/4128243 "Change patch details")
* [multiple-xss-master-latest2.patch](https://bugs.launchpad.net/horizon/%2Bbug/1308727/%2Battachment/4129693/%2Bfiles/multiple-xss-master-latest2.patch)
  [Edit](/horizon/%2Bbug/1308727/%2Battachment/4129693 "Change patch details")
* [multiple-xss-master.20140626.patch](https://bugs.launchpad.net/horizon/%2Bbug/1308727/%2Battachment/4139711/%2Bfiles/multiple-xss-master.20140626.patch)
  [Edit](/horizon/%2Bbug/1308727/%2Battachment/4139711 "Change patch details")
* [multiple-xss-havana.20140626.patch](https://bugs.launchpad.net/horizon/%2Bbug/1308727/%2Battachment/4140531/%2Bfiles/multiple-xss-havana.20140626.patch)
  [Edit](/horizon/%2Bbug/1308727/%2Battachment/4140531 "Change patch details")
* [multiple-xss-master.20140708.patch](https://bugs.launchpad.net/horizon/%2Bbug/1308727/%2Battachment/4147954/%2Bfiles/multiple-xss-master.20140708.patch)
  [Edit](/horizon/%2Bbug/1308727/%2Battachment/4147954 "Change patch details")

* [Add patch](/horizon/%2Bbug/1308727/%2Baddcomment?field.patch=on)

## Bug attachments

* [xss\_resource\_name.yaml](https://bugs.launchpad.net/horizon/%2Bbug/1308727/%2Battachment/4085696/%2Bfiles/xss_resource_name.yaml)
  [Edit](/horizon/%2Bbug/1308727/%2Battachment/4085696 "Change attachment details")

* [Add attachment](/horizon/%2Bbug/1308727/%2Baddcomment)

## Remote bug watches

Bug watches keep track of this bug in other bug trackers.

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
4d55102
([Get the code!](https://dev.launchpad.net/))



=== Content from translations.launchpad.net_d69d012a_20250126_044440.html ===

[Log in / Register](https://translations.launchpad.net/horizon/%2Blogin)

[![](https://launchpadlibrarian.net/62132867/os64.png)](https://launchpad.net/horizon)

## [OpenStack Dashboard (Horizon)](https://launchpad.net/horizon)

* [Overview](https://launchpad.net/horizon)
* [Code](https://code.launchpad.net/horizon)
* [Bugs](https://bugs.launchpad.net/horizon)
* [Blueprints](https://blueprints.launchpad.net/horizon)
* Translations
* [Answers](https://answers.launchpad.net/horizon)

# Translation overview

[Help for translations](https://help.launchpad.net/Translations)

**OpenStack Dashboard (Horizon) does not use Launchpad
to translate its messages.**

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
4d55102
([Get the code!](https://dev.launchpad.net/))



=== Content from www.openwall.com_3601195d_20250125_001312.html ===


| [Openwall](/) * [Products](/)   + [Openwall GNU/\*/Linux   *server OS*](/Owl/)+ [Linux Kernel Runtime Guard](/lkrg/)+ [John the Ripper   *password cracker*](/john/)         - [Free & Open Source for any platform](/john/)- [in the cloud](/john/cloud/)- [Pro for Linux](/john/pro/linux/)- [Pro for macOS](/john/pro/macosx/)+ [Wordlists   *for password cracking*](/wordlists/)+ [passwdqc   *policy enforcement*](/passwdqc/)             - [Free & Open Source for Unix](/passwdqc/)- [Pro for Windows (Active Directory)](/passwdqc/windows/)+ [yescrypt   *KDF & password hashing*](/yescrypt/)+ [yespower   *Proof-of-Work (PoW)*](/yespower/)+ [crypt\_blowfish   *password hashing*](/crypt/)+ [phpass   *ditto in PHP*](/phpass/)+ [tcb   *better password shadowing*](/tcb/)+ [Pluggable Authentication Modules](/pam/)+ [scanlogd   *port scan detector*](/scanlogd/)+ [popa3d   *tiny POP3 daemon*](/popa3d/)+ [blists   *web interface to mailing lists*](/blists/)+ [msulogin   *single user mode login*](/msulogin/)+ [php\_mt\_seed   *mt\_rand() cracker*](/php_mt_seed/)* [Services](/services/)* Publications       + [Articles](/articles/)+ [Presentations](/presentations/)* Resources         + [Mailing lists](/lists/)+ [Community wiki](https://openwall.info/wiki/)+ [Source code repositories (GitHub)](https://github.com/openwall)+ [Source code repositories (CVSweb)](https://cvsweb.openwall.com)+ [File archive & mirrors](/mirrors/)+ [How to verify digital signatures](/signatures/)+ [OVE IDs](/ove/)* [What's new](/news) | |
| --- | --- |

| | [Hash Suite - Windows password security audit tool. GUI, reports in PDF.](https://hashsuite.openwall.net) | | --- | |
| --- | --- |

[[<prev]](5) [[next>]](7) [[day]](.) [[month]](..) [[year]](../..) [[list]](../../..)
```

Message-ID: <53BC181E.40908@enovance.com>
Date: Tue, 08 Jul 2014 12:11:10 -0400
From: Tristan Cacqueray <tristan.cacqueray@...vance.com>
To: oss-security@...ts.openwall.com
Subject: [OSSA 2014-023] Multiple XSS vulnerabilities in Horizon (CVE-2014-3473,
 CVE-2014-3474, and CVE-2014-3475)

OpenStack Security Advisory: 2014-023
CVE: CVE-2014-3473, CVE-2014-3474, and CVE-2014-3475
Date: July 08, 2014
Title: Multiple XSS vulnerabilities in Horizon
Reporter: Jason Hullinger (HP)    - CVE-2014-3473
          Craig Lorentzen (Cisco) - CVE-2014-3474
          Michael Xin (Rackspace) - CVE-2014-3475
Products: Horizon
Versions: up to 2013.2.3, and 2014.1 versions up to 2014.1.1

Description:
Jason Hullinger from Hewlett Packard, Craig Lorentzen from Cisco and
Michael Xin from Rackspace reported 3 cross-site scripting (XSS)
vulnerabilities in Horizon. A malicious Orchestration template owner or
catalog may conduct an XSS attack once a corrupted template is used in
the Orchestration/Stack section of Horizon. A malicious Horizon user may
store an XSS attack by creating a network with a corrupted name. A
malicious Horizon administrator may store an XSS attack by creating a
user with a corrupted email address. Once executed in a legitimate
context these attacks may result in potential asset stealing (horizon
user/admin access credentials, VMs/Network configuration/management,
tenants' confidential information, etc.). All Horizon setups are affected.

Juno (development branch) fix:
<https://review.openstack.org/105476>

Icehouse fix:
<https://review.openstack.org/105477>

Havana fix:
<https://review.openstack.org/105478>

Notes:
This fix will be included in the Juno-2 development milestone and in
future 2013.2.4 and 2014.1.2 releases.

References:
<http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-3473>
<http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-3474>
<http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-3475>
<https://launchpad.net/bugs/1308727>
<https://launchpad.net/bugs/1320235>
<https://launchpad.net/bugs/1322197>

--
Tristan Cacqueray
OpenStack Vulnerability Management Team

Download attachment "[signature.asc](6/1)" of type "application/pgp-signature" (539 bytes)

```

[Powered by blists](https://www.openwall.com/blists/) - [more mailing lists](https://lists.openwall.net)

Please check out the
[Open Source Software Security Wiki](https://oss-security.openwall.org/wiki/), which is counterpart to this
[mailing list](https://oss-security.openwall.org/wiki/mailing-lists/oss-security).

Confused about [mailing lists](/lists/) and their use?
[Read about mailing lists on Wikipedia](https://en.wikipedia.org/wiki/Electronic_mailing_list)
and check out these
[guidelines on proper formatting of your messages](https://www.complang.tuwien.ac.at/anton/mail-news-errors.html).



=== Content from answers.launchpad.net_fdd36dbe_20250126_044440.html ===

[Log in / Register](https://answers.launchpad.net/horizon/%2Blogin)

[![](https://launchpadlibrarian.net/62132867/os64.png)](https://launchpad.net/horizon)

## [OpenStack Dashboard (Horizon)](https://launchpad.net/horizon)

* [Overview](https://launchpad.net/horizon)
* [Code](https://code.launchpad.net/horizon)
* [Bugs](https://bugs.launchpad.net/horizon)
* [Blueprints](https://blueprints.launchpad.net/horizon)
* [Translations](https://translations.launchpad.net/horizon)
* Answers

# Questions for OpenStack Dashboard (Horizon)

**Launchpad does not know where
OpenStack Dashboard (Horizon)
tracks support requests.**

OpenStack Dashboard (Horizon) questions are
tracked in:
[horizon in Ubuntu](/ubuntu/%2Bsource/horizon),
[openstack-dashboard in Ubuntu](/ubuntu/%2Bsource/openstack-dashboard).

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
4d55102
([Get the code!](https://dev.launchpad.net/))



=== Content from launchpad.net_358978c3_20250126_044438.html ===

[Log in / Register](https://launchpad.net/~hudson-openstack/%2Blogin)

[![](/@@/person-logo)](https://launchpad.net/~hudson-openstack)

## [OpenStack Infra](https://launchpad.net/~hudson-openstack)

* Overview
* [Code](https://code.launchpad.net/~hudson-openstack)
* [Bugs](https://bugs.launchpad.net/~hudson-openstack)
* [Blueprints](https://blueprints.launchpad.net/~hudson-openstack)
* [Translations](https://translations.launchpad.net/~hudson-openstack)
* [Answers](https://answers.launchpad.net/~hudson-openstack)

* [Related packages](https://launchpad.net/~hudson-openstack/%2Brelated-packages)
* [Related projects](https://launchpad.net/~hudson-openstack/%2Brelated-projects)

## User information

Launchpad Id:
hudson-openstack

Email:
[Log in](%2Blogin) for email information.

Member since:
2010-07-14

[![Icon of Burrow](https://launchpadlibrarian.net/67728214/os14.png "Member of Burrow")](/~burrow)
[![Icon of Citrix OpenStack development team](https://launchpadlibrarian.net/64472709/Citrix%2014.png "Member of Citrix OpenStack development team")](/~citrix-openstack)
[![Icon of (deprecated) OpenStack PPA maintainers](https://launchpadlibrarian.net/87891894/ppa.gif "Member of (deprecated) OpenStack PPA maintainers")](/~openstack-ppa)
[![Icon of Designate Core](https://launchpadlibrarian.net/360468328/designate_14.jpg "Member of Designate Core")](/~designate-core)
[![Icon of Designate Drivers](https://launchpadlibrarian.net/360468067/designate_14.jpg "Member of Designate Drivers")](/~designate-drivers)
[![Icon of MidoNet Bugs](https://launchpadlibrarian.net/228074955/midonet_14x14.png "Member of MidoNet Bugs")](/~midonet-bugs)
[![Icon of Nova Bug Team](https://launchpadlibrarian.net/108832444/bug.gif "Member of Nova Bug Team")](/~nova-bugs)
[![Icon of Nova](https://launchpadlibrarian.net/52560219/os14.png "Member of Nova")](/~nova)
[![Icon of OpenStack Team](https://launchpadlibrarian.net/52313052/os14.png "Member of OpenStack Team")](/~openstack)

Languages:

English

OpenPGP keys:

72571ACC301E6FE900837F5CDF85501232EE128C

SSH keys:

[hudson@hudson](%2Bsshkeys)

[jenkins@vpcslave](%2Bsshkeys)

Time zone:

UTC
(UTC+0000)

Karma:
[6535](https://launchpad.net/~hudson-openstack/%2Bkarma)
[Karma help](/%2Bhelp-registry/karma.html)

## [All memberships](https://launchpad.net/~hudson-openstack/%2Bparticipation) Latest memberships

| [Compute Hyper-V Bugs](/~compute-hyperv-bugs)  Joined on 2019-08-28 | |
| --- | --- |
| [OS-Win Bugs](/~os-win-bugs)  Joined on 2019-08-28 | |
| [Networking Hyper-V Bugs](/~networking-hyperv-bugs)  Joined on 2019-08-28 | |
| [kolla-drivers](/~kolla-drivers)  Joined on 2019-05-20 | |
| [fixtures-git-bugs](/~fixtures-git-bugs)  Joined on 2018-03-25 | |

## [Recent activities](https://launchpad.net/~hudson-openstack/%2Bkarma) Most active in

| [StarlingX](/starlingx) |  |
| --- | --- |
| [kolla-ansible](/kolla-ansible) |  |
| [kolla](/kolla) |  |
| [kayobe](/kayobe) |  |
| [OpenStack Compute (nova)](/nova) |  |

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
4d55102
([Get the code!](https://dev.launchpad.net/))



=== Content from lists.opensuse.org_8e407673_20250125_001311.html ===


[![openSUSE](https://static.opensuse.org/favicon.svg)
Mailing Lists](/archives/ "openSUSE Mailing Lists")

[Sign In](/accounts/login/?next=/archives/list/updates%40lists.opensuse.org/message/BFYJJTPGBZCGRTMLKQE27EDVLH7JLUL2/)
[Sign Up](/accounts/signup/?next=/archives/list/updates%40lists.opensuse.org/message/BFYJJTPGBZCGRTMLKQE27EDVLH7JLUL2/)

[Manage this list](/manage/lists/updates.lists.opensuse.org/)
[Sign In](/accounts/login/?next=/archives/list/updates%40lists.opensuse.org/message/BFYJJTPGBZCGRTMLKQE27EDVLH7JLUL2/)
[Sign Up](/accounts/signup/?next=/archives/list/updates%40lists.opensuse.org/message/BFYJJTPGBZCGRTMLKQE27EDVLH7JLUL2/)

×
#### Keyboard Shortcuts

### Thread View

* `j`: Next unread message
* `k`: Previous unread message
* `j a`: Jump to all threads* `j l`: Jump to MailingList overview

[thread](/archives/list/updates%40lists.opensuse.org/thread/BFYJJTPGBZCGRTMLKQE27EDVLH7JLUL2/#BFYJJTPGBZCGRTMLKQE27EDVLH7JLUL2)

# openSUSE-SU-2015:0078-1: moderate: Security Update for openstack-dashboard

![](https://seccdn.libravatar.org/avatar/099a17325bdf082b643d1a6bbacde279.jpg?s=120&d=mm&r=g)
## [opensuse-security＠opensuse.org](/archives/users/1b72def497ef4503896cd7a5fe9fb8e0/ "See the profile for opensuse-security＠opensuse.org")

19 Jan
2015

19 Jan
'15

13:05

openSUSE Security Update: Security Update for openstack-dashboard
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
Announcement ID: openSUSE-SU-2015:0078-1
Rating: moderate
References: #852175 #869696 #871855 #885588 #891815 #908199
Cross-References: CVE-2013-6858 CVE-2014-0157 CVE-2014-3473
CVE-2014-3474 CVE-2014-3475 CVE-2014-3594
CVE-2014-8124
Affected Products:
openSUSE 13.1
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
An update that fixes 7 vulnerabilities is now available.
Description:
OpenStack Dashboard was updated to fix bugs and security issues.
Full changes:
- Update to version horizon-2013.2.5.dev2.g9ee7273:
\* fix Horizon login page DOS attack (bnc#908199, CVE-2014-8124)
\* update version to 2013.2.5
\* Updated from global requirements
\* Pin docutils to 0.9.1
\* Set python hash seed to 0 in tox.ini
\* Check host is not none in each availability zone
\* Fix XSS issue with the unordered\_list filter (bnc#891815,
CVE-2014-3594)
+ 0001-Use-default\_project\_id-for-v3-users.patch (manually)
\* Replace UserManager with None in tests
\* Update test-requirements to fix sphinx build\_doc
\* Fix multiple Cross-Site Scripting (XSS) vulnerabilities (bnc#885588,
CVE-2014-3473, CVE-2014-3474, CVE-2014-3475)
\* Fix issues with importing the Login form
Bug 869696 - Admin password injection on Horizon Dashboard is broken.
- Update to version horizon-2013.2.4.dev8.g07c097f:
\* Bug fix on neutron's API to return the correct target ID
\* Fix display of images in Rebuild Instance
\* Get instance networking information from Neutron
\* Bump stable/havana next version to 2013.2.4
\* Do not release FIP on disassociate action
\* Introduces escaping in Horizon/Orchestration 2013.2.3 (bnc#871855,
CVE-2014-0157)
- Update to version horizon-2013.2.3.dev8.g3d04c3c:
\* Reduce number of novaclient calls
\* Don't copy the flavorid when updating flavors
\* Allow snapshots of paused and suspended instances
\* Fixing tests to work with keystoneclient 0.6.0
\* Bump stable/havana next version to 2013.2.3
+ Use upstream URL as source (enables verification)
+ Import translations for Havana 2013.2.2 udpate
- Update to version 2013.2.2.dev29.g96bd650:
+ Update Transifex resource name for havana
+ Fix inappropriate logouts on load-balanced Horizon
- Update to version 2013.2.2.dev25.g6508afd:
+ disable volume creation, when cinder is disabled
+ Bad workflow-steps check: has\_required\_fields
+ Specify tenant\_id when retrieving LBaaS/VPNaaS resource
- Update to version 2013.2.2.dev19.g7a8eadc:
+ Give HealthMonitor a proper display name
- Update to version 2013.2.2.dev17.gaa55b24:
+ Common keystone version fallback
- Move settings.py (default settings) to branding-upstream subpackage: a
branding package might want to change some default settings.
- add 0001-Common-keystone-version-fallback.patch,
0001-Use-default\_project\_id-for-v3-users.patch
- Update to version 2013.2.2.dev15.g2b6dfa7:
+ fix help text in "Create An image" window
+ Change how scrollShift is calculated
+ unify keypair name handling
- Add 0001-Give-no-background-color-to-the-pie-charts.patch: do not give a
background color to pie charts.
- Update to version 2013.2.2.dev9.gc6d38a1:
+ Wrong marker sent to keystone
- Update to version 2013.2.2.dev7.g2e11482:
+ Adding management\_url to test mock client
- add 0001-Bad-workflow-steps-check-has\_required\_fields.patch
- Make python-horizon require the 2013.2 version of
python-horizon-branding (and not the 2013.2.xyz version). This makes it
easier to create non-upstream branding; we already do this for the other
branding subpackage.
- Update to version 2013.2.2.dev6.g2c1f1f3:
+ Add check for BlockDeviceMappingV2 nova extension
+ Gracefully handle Users with no email attribute
+ Import install\_venv from oslo
+ Bump stable/havana next version to 2013.2.2
- Update to version 2013.2.1.dev41.g9668e80:
+ Updated from global requirements
- put everything under /srv/www/openstack-dashboard
- Update to version 2013.2.1.dev40.g852e5c8:
+ Import translations for Havana 2013.2.1 udpate
+ Deleting statistics tables from resource usage page
+ Allow "Working" in spinner to be translatable
+ lbaas/horizon - adds tcp protocol choice when create lb
+ Fix a bug some optional field in LBaaS are mandatory
+ Fix bug so that escaped html is not shown in volume detach dialog
+ Role name should not be translated in Domain Groups dialog
+ Fix incomplete translation of "Update members" widget
+ Fix translatable string for "Injected File Path Bytes"
+ Add extra extension file to makemessage command line
+ Add contextual markers to BatchAction messages
+ Logging user out after self password change
+ Add logging configuration for iso8601 module
+ Ensure all compute meters are listed in dropdown
+ Fix bug by escaping strings from Nova before displaying them
(bnc#852175, CVE-2013-6858)
- add/use generic openstack-branding provides
- Update to version 2013.2.1.dev9.g842ba5f:
+ Fix default port of MS SQL in security group template
+ Provide missing hover hints for instance:<type> meters
+ translate text: "subnet"/"subnet details"
+ Change "Tenant" to "Project"
+ Avoid discarding precision of metering data
- Use Django's signed\_cookies session backend like upstream and drop the
usage of cache\_db
- No need to set SECRET\_KEY anymore, upstream learned it too
python-django\_openstack\_auth was updated to 1.1.3:
- Various i18n fixes
- Revoke tokens when logging out or changing the tenant
- Run tests locally, therefore merge test package back into main
- Properly build HTML documentation and install it
- Add pt\_BR locale
- Updated (build) requirements
- Add django\_openstack\_auth-hacking-requires.patch: hacking dep is nonsense
- include tests runner
- add -test subpackage
Patch Instructions:
To install this openSUSE Security Update use YaST online\_update.
Alternatively you can run the command listed for your product:
- openSUSE 13.1:
zypper in -t patch openSUSE-2015-39
To bring your system up-to-date, use "zypper patch".
Package List:
- openSUSE 13.1 (noarch):
openstack-dashboard-2013.2.5.dev2.g9ee7273-4.1
openstack-dashboard-branding-upstream-2013.2.5.dev2.g9ee7273-4.1
openstack-dashboard-test-2013.2.5.dev2.g9ee7273-4.1
python-django\_openstack\_auth-1.1.3-4.1
python-horizon-2013.2.5.dev2.g9ee7273-4.1
python-horizon-branding-upstream-2013.2.5.dev2.g9ee7273-4.1
References:
<http://support.novell.com/security/cve/CVE-2013-6858.html>
<http://support.novell.com/security/cve/CVE-2014-0157.html>
<http://support.novell.com/security/cve/CVE-2014-3473.html>
<http://support.novell.com/security/cve/CVE-2014-3474.html>
<http://support.novell.com/security/cve/CVE-2014-3475.html>
<http://support.novell.com/security/cve/CVE-2014-3594.html>
<http://support.novell.com/security/cve/CVE-2014-8124.html>
<https://bugzilla.suse.com/show_bug.cgi?id=852175>
<https://bugzilla.suse.com/show_bug.cgi?id=869696>
<https://bugzilla.suse.com/show_bug.cgi?id=871855>
<https://bugzilla.suse.com/show_bug.cgi?id=885588>
<https://bugzilla.suse.com/show_bug.cgi?id=891815>
<https://bugzilla.suse.com/show_bug.cgi?id=908199>

[0](#like "You must be logged-in to vote.")
[0](#dislike "You must be logged-in to vote.")

Reply

[Sign in to reply online](/accounts/login/?next=/archives/list/updates%40lists.opensuse.org/message/BFYJJTPGBZCGRTMLKQE27EDVLH7JLUL2/)
Use email software

[Back to the thread](/archives/list/updates%40lists.opensuse.org/thread/BFYJJTPGBZCGRTMLKQE27EDVLH7JLUL2/#BFYJJTPGBZCGRTMLKQE27EDVLH7JLUL2)

[Back to the list](/archives/list/updates%40lists.opensuse.org/)

![HyperKitty](/static/hyperkitty/img/logo.png)
Powered by [HyperKitty](http://hyperkitty.readthedocs.org) version 1.3.12.



=== Content from launchpad.net_72ecde44_20250126_044439.html ===

[Log in / Register](https://launchpad.net/~jpichon/%2Blogin)

[![](/@@/person-logo)](https://launchpad.net/~jpichon)

## [Julie Pichon](https://launchpad.net/~jpichon)

* Overview
* [Code](https://code.launchpad.net/~jpichon)
* [Bugs](https://bugs.launchpad.net/~jpichon)
* [Blueprints](https://blueprints.launchpad.net/~jpichon)
* [Translations](https://translations.launchpad.net/~jpichon)
* [Answers](https://answers.launchpad.net/~jpichon)

* [Related packages](https://launchpad.net/~jpichon/%2Brelated-packages)
* [Related projects](https://launchpad.net/~jpichon/%2Brelated-projects)

## User information

Launchpad Id:
jpichon

Email:
[Log in](%2Blogin) for email information.

Member since:
2007-12-01

[![Icon of 5 A Day Participants](https://launchpadlibrarian.net/38926872/5-thin.png "Member of 5 A Day Participants")](/~5-a-day-participants)
[![Icon of OpenStack Team](https://launchpadlibrarian.net/52313052/os14.png "Member of OpenStack Team")](/~openstack)
[![Icon of Ubuntu Ireland](https://launchpadlibrarian.net/10171823/ie_14_14.png "Member of Ubuntu Ireland")](/~ubuntu-ie)
[![Icon of Ubuntu Local Community Teams](https://launchpadlibrarian.net/162222905/locoteams-icon.png "Member of Ubuntu Local Community Teams")](/~locoteams)
[![Icon of Ubuntu-Women Project](https://launchpadlibrarian.net/51651803/ubuntu-women-cof_tn.png "Member of Ubuntu-Women Project")](/~ubuntu-women)

Signed Ubuntu Code of Conduct:
Yes

Languages:

English, English (United Kingdom)

OpenPGP keys:

94E10205A594B69B1569FD343B9A66C43DAD49E4

SSH keys:

[jpichon@dan](%2Bsshkeys)

Time zone:

Europe/Dublin
(UTC+0000)

Karma:
[0](https://launchpad.net/~jpichon/%2Bkarma)
[Karma help](/%2Bhelp-registry/karma.html)

Social accounts:
![IRC](/@@/social-irc "IRC")
**jpich**
 on
**irc.freenode.net**

## [All memberships](https://launchpad.net/~jpichon/%2Bparticipation) Latest memberships

| [tripleo](/~tripleo)  Joined on 2016-12-08 | |
| --- | --- |
| [TripleO Drivers](/~tripleo-drivers)  Joined on 2016-09-06 | |
| [Horizon Developers](/~horizon)  Joined on 2012-07-29 | |
| [OpenStack Contributors](/~openstack-cla)  Joined on 2012-07-18 | |
| [Ubuntu-Women Project](/~ubuntu-women)  Joined on 2008-08-02 | |

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
4d55102
([Get the code!](https://dev.launchpad.net/))



=== Content from launchpad.net_fb632375_20250126_044444.html ===

[Log in / Register](https://bugs.launchpad.net/horizon/%2Bbug/1320235/%2Blogin)

[![](https://launchpadlibrarian.net/62132867/os64.png)](https://launchpad.net/horizon)

## [OpenStack Dashboard (Horizon)](https://launchpad.net/horizon)

* [Overview](https://launchpad.net/horizon)
* [Code](https://code.launchpad.net/horizon)
* [Bugs](https://bugs.launchpad.net/horizon)
* [Blueprints](https://blueprints.launchpad.net/horizon)
* [Translations](https://translations.launchpad.net/horizon)
* [Answers](https://answers.launchpad.net/horizon)

# [OSSA 2014-023] Stored XSS for /admin/users/ (CVE-2014-3475)

Bug #1320235 reported by
[michael xin](https://launchpad.net/~jqxin2006)
on 2014-05-16

[266](/%2Bhelp-bugs/bug-heat.html)

This bug affects 1 person

| Affects | | Status | Importance | Assigned to | Milestone |
| --- | --- | --- | --- | --- | --- |
|  | [OpenStack Dashboard (Horizon)](https://bugs.launchpad.net/horizon) | Fix Released | High | [Julie Pichon](https://launchpad.net/~jpichon) | [OpenStack Dashboard (Horizon) 2014.2 "juno"](https://launchpad.net/horizon/%2Bmilestone/2014.2) |
|  | [Havana](https://bugs.launchpad.net/horizon/havana) | Fix Released | High | [Julie Pichon](https://launchpad.net/~jpichon) | [OpenStack Dashboard (Horizon) 2013.2.4](https://launchpad.net/horizon/%2Bmilestone/2013.2.4) |
|  | [Icehouse](https://bugs.launchpad.net/horizon/icehouse) | Fix Released | High | [Julie Pichon](https://launchpad.net/~jpichon) | [OpenStack Dashboard (Horizon) 2014.1.2](https://launchpad.net/horizon/%2Bmilestone/2014.1.2) |
|  | [OpenStack Security Advisory](https://bugs.launchpad.net/ossa) | Fix Released | Medium | [Tristan Cacqueray](https://launchpad.net/~tristan-cacqueray) |  |

### Bug Description

The /admin/users/ page does not output encode users' email addresses correctly. Since there is no user input validation for the users' email address during creation process. It is possible to inject script tag into the email address. This is a stored cross site scripting issue.

The issue can be abused to hijack user's session and implant malware, etc.

For example, attached is a screen copy of Horizon for users with stored XSS in action.

Tags:

[bug](/horizon/%2Bbugs?field.tag=bug)
[stored](/horizon/%2Bbugs?field.tag=stored)
[xss](/horizon/%2Bbugs?field.tag=xss)

## Related branches

[lp:ubuntu/trusty-security/horizon](https://code.launchpad.net/~ubuntu-branches/ubuntu/trusty/horizon/trusty-security)

## CVE References

* [2014-3475](/bugs/cve/2014-3475 "Cross-site scripting (XSS) vulnerabil...")
* [2014-8578](/bugs/cve/2014-8578 "Cross-site scripting (XSS) vulnerabil...")

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [michael xin (jqxin2006)](https://launchpad.net/~jqxin2006) wrote on 2014-05-16: |  |  | [#1](/horizon/%2Bbug/1320235/comments/1) |
| --- | --- | --- | --- |

* [screen copy of XSS in action](https://bugs.launchpad.net/horizon/%2Bbug/1320235/%2Battachment/4113892/%2Bfiles/Screen%20Shot%202014-05-16%20at%209.34.51%20AM.png)
  [Edit](/horizon/%2Bbug/1320235/%2Battachment/4113892)
  (162.4 KiB,
  image/png)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2014-05-16: |  |  | [#2](/horizon/%2Bbug/1320235/comments/2) |
| --- | --- | --- | --- |

The OSSA task is incomplete pending additional details from security reviewers. Also I marked 1320233 as a duplicate of this one.

The OSSA task is incomplete pending additional details from security reviewers. Also I marked 1320233 as a duplicate of this one.

| Changed in ossa: | |
| --- | --- |
| **status**: | New → Incomplete |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2014-05-22: |  |  | [#3](/horizon/%2Bbug/1320235/comments/3) |
| --- | --- | --- | --- |

Looks valid to me at first glance... Malicious user could specify crafted email address which then would XSS the admin... Waiting on horizon-coresec to confirm, though.

Looks valid to me at first glance... Malicious user could specify crafted email address which then would XSS the admin... Waiting on horizon-coresec to confirm, though.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Julie Pichon (jpichon)](https://launchpad.net/~jpichon) wrote on 2014-05-22: |  |  | [#4](/horizon/%2Bbug/1320235/comments/4) |
| --- | --- | --- | --- |

I can reproduce the problem and Horizon should be escaping the data. Havana and possibly previous versions are also affected.

With regard to the security impact, I think it depends on whether one is using an external system to manage users or has modified the default Keystone permissions. If I understand correctly, by default the Keystone policy doesn't allow users to modify their own email. User creation and update appear to require admin rights ("You are not authorized to perform the requested action, admin\_required. (HTTP 403)").

In itself, the problem is due to the use of the "urlize" filter to make the email address clickable. urlize expects the data to already be escaped. It looks like the filter is used in 2 places across the codebase, for users and groups management. I'll propose a fix.

I can reproduce the problem and Horizon should be escaping the data. Havana and possibly previous versions are also affected.
With regard to the security impact, I think it depends on whether one is using an external system to manage users or has modified the default Keystone permissions. If I understand correctly, by default the Keystone policy doesn't allow users to modify their own email. User creation and update appear to require admin rights ("You are not authorized to perform the requested action, admin\_required. (HTTP 403)").
In itself, the problem is due to the use of the "urlize" filter to make the email address clickable. urlize expects the data to already be escaped. It looks like the filter is used in 2 places across the codebase, for users and groups management. I'll propose a fix.

| Changed in horizon: | |
| --- | --- |
| **status**: | New → Confirmed |
| **assignee**: | nobody → Julie Pichon (jpichon) |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Julie Pichon (jpichon)](https://launchpad.net/~jpichon) wrote on 2014-05-22: |  |  | [#5](/horizon/%2Bbug/1320235/comments/5) |
| --- | --- | --- | --- |

* [bug1320235-master.patch](https://bugs.launchpad.net/horizon/%2Bbug/1320235/%2Battachment/4117706/%2Bfiles/bug1320235-master.patch)
  [Edit](/horizon/%2Bbug/1320235/%2Battachment/4117706)
  (2.5 KiB,
  text/plain)

I'm attaching a patch that applies cleanly on both master and Icehouse and was tested in both environments.

I'm attaching a patch that applies cleanly on both master and Icehouse and was tested in both environments.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Julie Pichon (jpichon)](https://launchpad.net/~jpichon) wrote on 2014-05-22: |  |  | [#6](/horizon/%2Bbug/1320235/comments/6) |
| --- | --- | --- | --- |

* [Havana version](https://bugs.launchpad.net/horizon/%2Bbug/1320235/%2Battachment/4117707/%2Bfiles/bug1320235-havana.patch)
  [Edit](/horizon/%2Bbug/1320235/%2Battachment/4117707)
  (2.5 KiB,
  text/plain)

Adding the Havana version of the patch (minor conflict), tested in devstack Havana.

Adding the Havana version of the patch (minor conflict), tested in devstack Havana.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Paul McMillan (paul-mcmillan)](https://launchpad.net/~paul-mcmillan) wrote on 2014-05-23: |  |  | [#7](/horizon/%2Bbug/1320235/comments/7) |
| --- | --- | --- | --- |

I can confirm that Julie's patch looks good. Thanks for tracking that down.

I can confirm that Julie's patch looks good. Thanks for tracking that down.

[Thierry Carrez (ttx)](https://launchpad.net/~ttx)
on 2014-05-26

| Changed in ossa: | |
| --- | --- |
| **importance**: | Undecided → Medium |
| **status**: | Incomplete → Confirmed |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2014-05-27: |  |  | [#8](/horizon/%2Bbug/1320235/comments/8) |
| --- | --- | --- | --- |

@michael xin, I'm not sure what company should I credit in this OSSA, your Openstack community profile mention Rackspace, is this still correct ?

@michael xin, I'm not sure what company should I credit in this OSSA, your Openstack community profile mention Rackspace, is this still correct ?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [michael xin (jqxin2006)](https://launchpad.net/~jqxin2006) wrote on 2014-05-27:  [**Re: [Bug 1320235] Re: Stored XSS for /admin/users/**](/horizon/%2Bbug/1320235/comments/9) |  |  | [#9](/horizon/%2Bbug/1320235/comments/9) |
| --- | --- | --- | --- |

Tristan:

Thanks. Please use rackspace. Have a great day.

Michael

Sent from my iPhone

> On May 27, 2014, at 3:48 PM, Tristan Cacqueray <email address hidden> wrote:

>

> @michael xin, I'm not sure what company should I credit in this OSSA,

> your Openstack community profile mention Rackspace, is this still

> correct ?

>

> --

> You received this bug notification because you are subscribed to the bug

> report.

> <https://bugs.launchpad.net/bugs/1320235>

>

> Title:

> Stored XSS for /admin/users/

>

> Status in OpenStack Dashboard (Horizon):

> Confirmed

> Status in OpenStack Security Advisories:

> Confirmed

>

> Bug description:

> The /admin/users/ page does not output encode users' email addresses

> correctly. Since there is no user input validation for the users'

> email address during creation process. It is possible to inject script

> tag into the email address. This is a stored cross site scripting

> issue.

>

> The issue can be abused to hijack user's session and implant malware,

> etc.

>

>

> For example, attached is a screen copy of Horizon for users with stored XSS in action.

>

> To manage notifications about this bug go to:

> [https://bugs.launchpad.net/horizon/+bug/1320235/+subscriptions](https://bugs.launchpad.net/horizon/%2Bbug/1320235/%2Bsubscriptions)

Tristan:
Thanks. Please use rackspace. Have a great day.
Michael
Sent from my iPhone
> On May 27, 2014, at 3:48 PM, Tristan Cacqueray <tristan.cacqueray@enovance.com> wrote:
>
> @michael xin, I'm not sure what company should I credit in this OSSA,
> your Openstack community profile mention Rackspace, is this still
> correct ?
>
> --
> You received this bug notification because you are subscribed to the bug
> report.
> https://bugs.launchpad.net/bugs/1320235
>
> Title:
> Stored XSS for /admin/users/
>
> Status in OpenStack Dashboard (Horizon):
> Confirmed
> Status in OpenStack Security Advisories:
> Confirmed
>
> Bug description:
> The /admin/users/ page does not output encode users' email addresses
> correctly. Since there is no user input validation for the users'
> email address during creation process. It is possible to inject script
> tag into the email address. This is a stored cross site scripting
> issue.
>
> The issue can be abused to hijack user's session and implant malware,
> etc.
>
>
> For example, attached is a screen copy of Horizon for users with stored XSS in action.
>
> To manage notifications about this bug go to:
> https://bugs.launchpad.net/horizon/+bug/1320235/+subscriptions

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2014-05-28:  [**Re: Stored XSS for /admin/users/**](/horizon/%2Bbug/1320235/comments/10) |  |  | [#10](/horizon/%2Bbug/1320235/comments/10) |
| --- | --- | --- | --- |

Alright, thanks you!

We'll be coordinating a common advisory with the bug [https://bugs.launchpad.net/ossa/+bug/1308727](https://bugs.launchpad.net/ossa/%2Bbug/1308727) (which you are now subscribed)

Alright, thanks you!
We'll be coordinating a common advisory with the bug https://bugs.launchpad.net/ossa/+bug/1308727 (which you are now subscribed)

[Thierry Carrez (ttx)](https://launchpad.net/~ttx)
on 2014-05-29

| Changed in ossa: | |
| --- | --- |
| **status**: | Confirmed → Triaged |

[Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray)
on 2014-05-30

| Changed in ossa: | |
| --- | --- |
| **assignee**: | nobody → Tristan Cacqueray (tristan-cacqueray) |

[Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray)
on 2014-06-02

| **summary**: | - Stored XSS for /admin/users/+ Stored XSS for /admin/users/ (CVE-2014-3475) |
| --- | --- |

[Thierry Carrez (ttx)](https://launchpad.net/~ttx)
on 2014-06-09

| Changed in ossa: | |
| --- | --- |
| **status**: | Triaged → In Progress |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2014-07-01:  [**Re: Stored XSS for /admin/users/ (CVE-2014-3475)**](/horizon/%2Bbug/1320235/comments/11) |  |  | [#11](/horizon/%2Bbug/1320235/comments/11) |
| --- | --- | --- | --- |

Disclosure date is set to:

2014-07-08, 1500UTC

Disclosure date is set to:
2014-07-08, 1500UTC

| Changed in ossa: | |
| --- | --- |
| **status**: | In Progress → Fix Committed |

[Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray)
on 2014-07-08

| **information type**: | Private Security → Public Security |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2014-07-08:  [**Fix proposed to horizon (master)**](/horizon/%2Bbug/1320235/comments/12) |  |  | [#12](/horizon/%2Bbug/1320235/comments/12) |
| --- | --- | --- | --- |

Fix proposed to branch: master

Review: <https://review.openstack.org/105476>

Fix proposed to branch: master
Review: https://review.openstack.org/105476

| Changed in horizon: | |
| --- | --- |
| **status**: | Confirmed → In Progress |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2014-07-08:  [**Fix proposed to horizon (stable/icehouse)**](/horizon/%2Bbug/1320235/comments/13) |  |  | [#13](/horizon/%2Bbug/1320235/comments/13) |
| --- | --- | --- | --- |

Fix proposed to branch: stable/icehouse

Review: <https://review.openstack.org/105477>

Fix proposed to branch: stable/icehouse
Review: https://review.openstack.org/105477

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2014-07-08:  [**Fix proposed to horizon (stable/havana)**](/horizon/%2Bbug/1320235/comments/14) |  |  | [#14](/horizon/%2Bbug/1320235/comments/14) |
| --- | --- | --- | --- |

Fix proposed to branch: stable/havana

Review: <https://review.openstack.org/105478>

Fix proposed to branch: stable/havana
Review: https://review.openstack.org/105478

[Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray)
on 2014-07-08

| **summary**: | - Stored XSS for /admin/users/ (CVE-2014-3475)+ [OSSA 2014-023] Stored XSS for /admin/users/ (CVE-2014-3475) |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2014-07-09:  [**Fix merged to horizon (master)**](/horizon/%2Bbug/1320235/comments/15) |  |  | [#15](/horizon/%2Bbug/1320235/comments/15) |
| --- | --- | --- | --- |

Reviewed: <https://review.openstack.org/105476>

Committed: <https://git.openstack.org/cgit/openstack/horizon/commit/?id=de4466d88b816437fb29eff5ab23b9b964cd3985>

Submitter: Jenkins

Branch: master

commit de4466d88b816437fb29eff5ab23b9b964cd3985

Author: Julie Pichon <email address hidden>

Date: Thu May 22 16:45:03 2014 +0100

Fix multiple Cross-Site Scripting (XSS) vulnerabilities.

\* Ensure user emails are properly escaped

User emails in the Users and Groups panel are being passed through the

    urlize filter to transform them into clickable links. However, urlize

    expects input to be already escaped and safe. We should make sure to

    escape the strings first as email addresses are not validated and can

    contain any type of string.

Closes-Bug: #1320235

\* Ensure network names are properly escaped in the Launch Instance menu

Closes-Bug: #1322197

\* Escape the URLs generated for the Horizon tables

When generating the Horizon tables, there was an assumption that only

    the anchor text needed to be escaped. However some URLs are generated

    based on user-provided data and should be escaped as well.

\* Use 'reverse' to generate the Resource URLs in the stacks tables

Closes-Bug: #1308727

Change-Id: Ic8a92e69f66c2d265a802f350e30f091181aa42e

Reviewed: https://review.openstack.org/105476
Committed: https://git.openstack.org/cgit/openstack/horizon/commit/?id=de4466d88b816437fb29eff5ab23b9b964cd3985
Submitter: Jenkins
Branch: master
commit de4466d88b816437fb29eff5ab23b9b964cd3985
Author: Julie Pichon <jpichon@redhat.com>
Date: Thu May 22 16:45:03 2014 +0100
Fix multiple Cross-Site Scripting (XSS) vulnerabilities.
\* Ensure user emails are properly escaped
User emails in the Users and Groups panel are being passed through the
urlize filter to transform them into clickable links. However, urlize
expects input to be already escaped and safe. We should make sure to
escape the strings first as email addresses are not validated and can
contain any type of string.
Closes-Bug: #1320235
\* Ensure network names are properly escaped in the Launch Instance menu
Closes-Bug: #1322197
\* Escape the URLs generated for the Horizon tables
When generating the Horizon tables, there was an assumption that only
the anchor text needed to be escaped. However some URLs are generated
based on user-provided data and should be escaped as well.
\* Use 'reverse' to generate the Resource URLs in the stacks tables
Closes-Bug: #1308727
Change-Id: Ic8a92e69f66c2d265a802f350e30f091181aa42e

| Changed in horizon: | |
| --- | --- |
| **status**: | In Progress → Fix Committed |

[Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray)
on 2014-07-09

| Changed in ossa: | |
| --- | --- |
| **status**: | Fix Committed → Fix Released |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2014-07-09:  [**Fix merged to horizon (stable/icehouse)**](/horizon/%2Bbug/1320235/comments/16) |  |  | [#16](/horizon/%2Bbug/1320235/comments/16) |
| --- | --- | --- | --- |

Reviewed: <https://review.openstack.org/105477>

Committed: <https://git.openstack.org/cgit/openstack/horizon/commit/?id=32a7b713468161282f2ea01d5e2faff980d924cd>

Submitter: Jenkins

Branch: stable/icehouse

commit 32a7b713468161282f2ea01d5e2faff980d924cd

Author: Julie Pichon <email address hidden>

Date: Thu May 22 16:45:03 2014 +0100

Fix multiple Cross-Site Scripting (XSS) vulnerabilities.

\* Ensure user emails are properly escaped

User emails in the Users and Groups panel are being passed through the

    urlize filter to transform them into clickable links. However, urlize

    expects input to be already escaped and safe. We should make sure to

    escape the strings first as email addresses are not validated and can

    contain any type of string.

Closes-Bug: #1320235

\* Ensure network names are properly escaped in the Launch Instance menu

Closes-Bug: #1322197

\* Escape the URLs generated for the Horizon tables

When generating the Horizon tables, there was an assumption that only

    the anchor text needed to be escaped. However some URLs are generated

    based on user-provided data and should be escaped as well. Also escape

    the link attributes for good measure.

\* Use 'reverse' to generate the Resource URLs in the stacks tables

Closes-Bug: #1308727

Change-Id: Ic8a92e69f66c2d265a802f350e30f091181aa42e

Reviewed: https://review.openstack.org/105477
Committed: https://git.openstack.org/cgit/openstack/horizon/commit/?id=32a7b713468161282f2ea01d5e2faff980d924cd
Submitter: Jenkins
Branch: stable/icehouse
commit 32a7b713468161282f2ea01d5e2faff980d924cd
Author: Julie Pichon <jpichon@redhat.com>
Date: Thu May 22 16:45:03 2014 +0100
Fix multiple Cross-Site Scripting (XSS) vulnerabilities.
\* Ensure user emails are properly escaped
User emails in the Users and Groups panel are being passed through the
urlize filter to transform them into clickable links. However, urlize
expects input to be already escaped and safe. We should make sure to
escape the strings first as email addresses are not validated and can
contain any type of string.
Closes-Bug: #1320235
\* Ensure network names are properly escaped in the Launch Instance menu
Closes-Bug: #1322197
\* Escape the URLs generated for the Horizon tables
When generating the Horizon tables, there was an assumption that only
the anchor text needed to be escaped. However some URLs are generated
based on user-provided data and should be escaped as well. Also escape
the link attributes for good measure.
\* Use 'reverse' to generate the Resource URLs in the stacks tables
Closes-Bug: #1308727
Change-Id: Ic8a92e69f66c2d265a802f350e30f091181aa42e

| **tags**: | added: in-stable-icehouse |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2014-07-10:  [**Fix merged to horizon (stable/havana)**](/horizon/%2Bbug/1320235/comments/17) |  |  | [#17](/horizon/%2Bbug/1320235/comments/17) |
| --- | --- | --- | --- |

Reviewed: <https://review.openstack.org/105478>

Committed: <https://git.openstack.org/cgit/openstack/horizon/commit/?id=c844bd692894353c60b320005b804970605e910f>

Submitter: Jenkins

Branch: stable/havana

commit c844bd692894353c60b320005b804970605e910f

Author: Julie Pichon <email address hidden>

Date: Thu May 22 16:45:03 2014 +0100

Fix multiple Cross-Site Scripting (XSS) vulnerabilities

\* Ensure user emails are properly escaped

User emails in the Users and Groups panel are being passed through the

    urlize filter to transform them into clickable links. However, urlize

    expects input to be already escaped and safe. We should make sure to

    escape the strings first as email addresses are not validated and can

    contain any type of string.

Closes-Bug: #1320235

\* Ensure network names are properly escaped in the Launch Instance menu

Closes-Bug: #1322197

\* Escape the URLs generated for the Horizon tables

When generating the Horizon tables, there was an assumption that only

    the anchor text needed to be escaped. However some URLs are generated

    based on user-provided data and should be escaped as well. Also escape

    the link attributes for good measure.

\* Use 'reverse' to generate the Resource URLs in the stacks tables

Closes-Bug: #1308727

Conflicts:

     horizon/tables/base.py

     openstack\_dashboard/dashboards/admin/users/tables.py

Change-Id: Ic8a92e69f66c2d265a802f350e30f091181aa42e

Reviewed: https://review.openstack.org/105478
Committed: https://git.openstack.org/cgit/openstack/horizon/commit/?id=c844bd692894353c60b320005b804970605e910f
Submitter: Jenkins
Branch: stable/havana
commit c844bd692894353c60b320005b804970605e910f
Author: Julie Pichon <jpichon@redhat.com>
Date: Thu May 22 16:45:03 2014 +0100
Fix multiple Cross-Site Scripting (XSS) vulnerabilities
\* Ensure user emails are properly escaped
User emails in the Users and Groups panel are being passed through the
urlize filter to transform them into clickable links. However, urlize
expects input to be already escaped and safe. We should make sure to
escape the strings first as email addresses are not validated and can
contain any type of string.
Closes-Bug: #1320235
\* Ensure network names are properly escaped in the Launch Instance menu
Closes-Bug: #1322197
\* Escape the URLs generated for the Horizon tables
When generating the Horizon tables, there was an assumption that only
the anchor text needed to be escaped. However some URLs are generated
based on user-provided data and should be escaped as well. Also escape
the link attributes for good measure.
\* Use 'reverse' to generate the Resource URLs in the stacks tables
Closes-Bug: #1308727
Conflicts:
horizon/tables/base.py
openstack\_dashboard/dashboards/admin/users/tables.py
Change-Id: Ic8a92e69f66c2d265a802f350e30f091181aa42e

| **tags**: | added: in-stable-havana |
| --- | --- |

[Russell Bryant (russellb)](https://launchpad.net/~russellb)
on 2014-07-23

| Changed in horizon: | |
| --- | --- |
| **milestone**: | none → juno-2 |
| **status**: | Fix Committed → Fix Released |

[Alan Pevec (apevec)](https://launchpad.net/~apevec)
on 2014-08-07

| **tags**: | removed: in-stable-havana in-stable-icehouse |
| --- | --- |

[Alan Pevec (apevec)](https://launchpad.net/~apevec)
on 2014-08-07

| Changed in horizon: | |
| --- | --- |
| **importance**: | Undecided → High |

[Thierry Carrez (ttx)](https://launchpad.net/~ttx)
on 2014-10-16

| Changed in horizon: | |
| --- | --- |
| **milestone**: | juno-2 → 2014.2 |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Grant Murphy (gmurphy)](https://launchpad.net/~gmurphy) wrote on 2014-11-03: |  |  | [#18](/horizon/%2Bbug/1320235/comments/18) |
| --- | --- | --- | --- |

Mitre looks to be splitting this into two CVE assignments. See: <http://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2014-8578>

Mitre looks to be splitting this into two CVE assignments. See: http://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2014-8578

[See full activity log](https://bugs.launchpad.net/horizon/%2Bbug/1320235/%2Bactivity)

To post a comment you must [log in](%2Blogin?comments=all).

* [Report a bug](/horizon/%2Bfilebug)

This report contains
**Public Security**
information

Everyone can see this security related information.

## Duplicates of this bug

* [Bug #1320233](https://bugs.launchpad.net/horizon/%2Bbug/1320233 "Stored XSS for /admin/users/")

You are
[not directly subscribed to this bug's notifications.](/horizon/%2Bbug/1320235/%2Bsubscribe)

Subscribing...

* [Edit bug mail](https://bugs.launchpad.net/horizon/%2Bbug/1320235/%2Bsubscriptions "View and change your subscriptions to this bug")

## Other bug subscribers

[Subscribe someone else](https://bugs.launchpad.net/horizon/%2Bbug/1320235/%2Baddsubscriber "Launchpad will email that person whenever this bugs changes")

## Patches

* [bug1320235-master.patch](https://bugs.launchpad.net/horizon/%2Bbug/1320235/%2Battachment/4117706/%2Bfiles/bug1320235-master.patch)
  [Edit](/horizon/%2Bbug/1320235/%2Battachment/4117706 "Change patch details")
* [Havana version](https://bugs.launchpad.net/horizon/%2Bbug/1320235/%2Battachment/4117707/%2Bfiles/bug1320235-havana.patch)
  [Edit](/horizon/%2Bbug/1320235/%2Battachment/4117707 "Change patch details")

* [Add patch](/horizon/%2Bbug/1320235/%2Baddcomment?field.patch=on)

## Bug attachments

* [screen copy of XSS in action](https://bugs.launchpad.net/horizon/%2Bbug/1320235/%2Battachment/4113892/%2Bfiles/Screen%20Shot%202014-05-16%20at%209.34.51%20AM.png)
  [Edit](/horizon/%2Bbug/1320235/%2Battachment/4113892 "Change attachment details")

* [Add attachment](/horizon/%2Bbug/1320235/%2Baddcomment)

## Remote bug watches

Bug watches keep track of this bug in other bug trackers.

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
4d55102
([Get the code!](https://dev.launchpad.net/))



=== Content from launchpad.net_dad94acd_20250126_044441.html ===

[Log in / Register](https://launchpad.net/~jason-hullinger/%2Blogin)

[![](/@@/person-logo)](https://launchpad.net/~jason-hullinger)

## [Jason Hullinger](https://launchpad.net/~jason-hullinger)

* Overview
* [Code](https://code.launchpad.net/~jason-hullinger)
* [Bugs](https://bugs.launchpad.net/~jason-hullinger)
* [Blueprints](https://blueprints.launchpad.net/~jason-hullinger)
* [Translations](https://translations.launchpad.net/~jason-hullinger)
* [Answers](https://answers.launchpad.net/~jason-hullinger)

* [Related packages](https://launchpad.net/~jason-hullinger/%2Brelated-packages)
* [Related projects](https://launchpad.net/~jason-hullinger/%2Brelated-projects)

## User information

Launchpad Id:
jason-hullinger

Email:
[Log in](%2Blogin) for email information.

Member since:
2012-01-26

[![Icon of OpenStack Security SIG](https://launchpadlibrarian.net/203991792/os14.png "Member of OpenStack Security SIG")](/~openstack-ossg)

Languages:

English

SSH keys:

[jason.hullinger@hp.com](%2Bsshkeys)

Time zone:

UTC
(UTC+0000)

Karma:
[0](https://launchpad.net/~jason-hullinger/%2Bkarma)
[Karma help](/%2Bhelp-registry/karma.html)

## [All memberships](https://launchpad.net/~jason-hullinger/%2Bparticipation) Latest memberships

| [OpenStack Security SIG](/~openstack-ossg)  Joined on 2012-10-24 | |
| --- | --- |

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
4d55102
([Get the code!](https://dev.launchpad.net/))



=== Content from review.openstack.org_db47f125_20250126_044437.html ===



