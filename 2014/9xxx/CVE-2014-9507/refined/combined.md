=== Content from lists.wikimedia.org_f350d240_20250124_205103.html ===


[lists.wikimedia.org](/hyperkitty/)

[Sign In](/accounts/login/?next=/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/message/4XQZ3IXAGFKZXLL5FJAO2GPI3PJSH2TE/)
[Sign Up](/accounts/signup/?next=/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/message/4XQZ3IXAGFKZXLL5FJAO2GPI3PJSH2TE/)

* [Sign In](/accounts/login/?next=/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/message/4XQZ3IXAGFKZXLL5FJAO2GPI3PJSH2TE/)
* [Sign Up](/accounts/signup/?next=/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/message/4XQZ3IXAGFKZXLL5FJAO2GPI3PJSH2TE/)

* [Manage this list](/postorius/lists/mediawiki-announce.lists.wikimedia.org/)

Ã—
#### Keyboard Shortcuts

### Thread View

* `j`: Next unread message
* `k`: Previous unread message
* `j a`: Jump to all threads* `j l`: Jump to MailingList overview

### 2025

* [January](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2025/1/)

### 2024

* [December](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2024/12/)
* [November](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2024/11/)
* [October](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2024/10/)
* [September](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2024/9/)
* [August](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2024/8/)
* [July](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2024/7/)
* [June](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2024/6/)
* [May](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2024/5/)
* [April](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2024/4/)
* [March](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2024/3/)
* [February](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2024/2/)
* [January](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2024/1/)

### 2023

* [December](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2023/12/)
* [November](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2023/11/)
* [October](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2023/10/)
* [September](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2023/9/)
* [August](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2023/8/)
* [July](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2023/7/)
* [June](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2023/6/)
* [May](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2023/5/)
* [April](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2023/4/)
* [March](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2023/3/)
* [February](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2023/2/)
* [January](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2023/1/)

### 2022

* [December](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2022/12/)
* [November](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2022/11/)
* [October](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2022/10/)
* [September](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2022/9/)
* [August](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2022/8/)
* [July](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2022/7/)
* [June](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2022/6/)
* [May](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2022/5/)
* [April](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2022/4/)
* [March](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2022/3/)
* [February](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2022/2/)
* [January](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2022/1/)

### 2021

* [December](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2021/12/)
* [November](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2021/11/)
* [October](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2021/10/)
* [September](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2021/9/)
* [August](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2021/8/)
* [July](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2021/7/)
* [June](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2021/6/)
* [May](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2021/5/)
* [April](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2021/4/)
* [March](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2021/3/)
* [February](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2021/2/)
* [January](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2021/1/)

### 2020

* [December](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2020/12/)
* [November](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2020/11/)
* [October](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2020/10/)
* [September](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2020/9/)
* [August](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2020/8/)
* [July](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2020/7/)
* [June](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2020/6/)
* [May](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2020/5/)
* [April](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2020/4/)
* [March](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2020/3/)
* [February](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2020/2/)
* [January](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2020/1/)

### 2019

* [December](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2019/12/)
* [November](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2019/11/)
* [October](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2019/10/)
* [September](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2019/9/)
* [August](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2019/8/)
* [July](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2019/7/)
* [June](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2019/6/)
* [May](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2019/5/)
* [April](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2019/4/)
* [March](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2019/3/)
* [February](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2019/2/)
* [January](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2019/1/)

### 2018

* [December](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2018/12/)
* [November](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2018/11/)
* [October](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2018/10/)
* [September](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2018/9/)
* [August](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2018/8/)
* [July](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2018/7/)
* [June](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2018/6/)
* [May](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2018/5/)
* [April](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2018/4/)
* [March](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2018/3/)
* [February](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2018/2/)
* [January](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2018/1/)

### 2017

* [December](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2017/12/)
* [November](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2017/11/)
* [October](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2017/10/)
* [September](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2017/9/)
* [August](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2017/8/)
* [July](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2017/7/)
* [June](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2017/6/)
* [May](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2017/5/)
* [April](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2017/4/)
* [March](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2017/3/)
* [February](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2017/2/)
* [January](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2017/1/)

### 2016

* [December](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2016/12/)
* [November](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2016/11/)
* [October](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2016/10/)
* [September](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2016/9/)
* [August](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2016/8/)
* [July](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2016/7/)
* [June](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2016/6/)
* [May](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2016/5/)
* [April](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2016/4/)
* [March](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2016/3/)
* [February](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2016/2/)
* [January](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2016/1/)

### 2015

* [December](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2015/12/)
* [November](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2015/11/)
* [October](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2015/10/)
* [September](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2015/9/)
* [August](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2015/8/)
* [July](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2015/7/)
* [June](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2015/6/)
* [May](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2015/5/)
* [April](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2015/4/)
* [March](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2015/3/)
* [February](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2015/2/)
* [January](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2015/1/)

### 2014

* [December](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2014/12/)
* [November](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2014/11/)
* [October](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2014/10/)
* [September](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2014/9/)
* [August](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2014/8/)
* [July](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2014/7/)
* [June](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2014/6/)
* [May](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2014/5/)
* [April](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2014/4/)
* [March](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2014/3/)
* [February](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2014/2/)
* [January](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2014/1/)

### 2013

* [December](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2013/12/)
* [November](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2013/11/)
* [October](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2013/10/)
* [September](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2013/9/)
* [August](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2013/8/)
* [July](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2013/7/)
* [June](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2013/6/)
* [May](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2013/5/)
* [April](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2013/4/)
* [March](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2013/3/)
* [February](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2013/2/)
* [January](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2013/1/)

### 2012

* [December](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2012/12/)
* [November](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2012/11/)
* [October](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2012/10/)
* [September](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2012/9/)
* [August](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2012/8/)
* [July](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2012/7/)
* [June](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2012/6/)
* [May](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2012/5/)
* [April](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2012/4/)
* [March](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2012/3/)
* [February](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2012/2/)
* [January](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2012/1/)

### 2011

* [December](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2011/12/)
* [November](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2011/11/)
* [October](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2011/10/)
* [September](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2011/9/)
* [August](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2011/8/)
* [July](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2011/7/)
* [June](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2011/6/)
* [May](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2011/5/)
* [April](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2011/4/)
* [March](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2011/3/)
* [February](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2011/2/)
* [January](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2011/1/)

### 2010

* [December](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2010/12/)
* [November](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2010/11/)
* [October](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2010/10/)
* [September](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2010/9/)
* [August](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2010/8/)
* [July](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2010/7/)
* [June](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2010/6/)
* [May](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2010/5/)
* [April](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2010/4/)
* [March](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2010/3/)
* [February](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2010/2/)
* [January](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2010/1/)

### 2009

* [December](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2009/12/)
* [November](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2009/11/)
* [October](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2009/10/)
* [September](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2009/9/)
* [August](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2009/8/)
* [July](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2009/7/)
* [June](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2009/6/)
* [May](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2009/5/)
* [April](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2009/4/)
* [March](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2009/3/)
* [February](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2009/2/)
* [January](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2009/1/)

### 2008

* [December](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2008/12/)
* [November](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2008/11/)
* [October](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2008/10/)
* [September](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2008/9/)
* [August](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2008/8/)
* [July](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2008/7/)
* [June](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2008/6/)
* [May](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2008/5/)
* [April](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2008/4/)
* [March](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2008/3/)
* [February](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2008/2/)
* [January](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2008/1/)

### 2007

* [December](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2007/12/)
* [November](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2007/11/)
* [October](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2007/10/)
* [September](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2007/9/)
* [August](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2007/8/)
* [July](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2007/7/)
* [June](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2007/6/)
* [May](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2007/5/)
* [April](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2007/4/)
* [March](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2007/3/)
* [February](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2007/2/)
* [January](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2007/1/)

### 2006

* [December](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2006/12/)
* [November](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2006/11/)
* [October](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2006/10/)
* [September](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2006/9/)
* [August](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2006/8/)
* [July](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2006/7/)
* [June](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2006/6/)
* [May](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2006/5/)
* [April](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2006/4/)
* [March](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2006/3/)
* [February](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2006/2/)
* [January](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2006/1/)

### 2005

* [December](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2005/12/)
* [November](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2005/11/)
* [October](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2005/10/)
* [September](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2005/9/)
* [August](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2005/8/)
* [July](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2005/7/)
* [June](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2005/6/)
* [May](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2005/5/)
* [April](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2005/4/)
* [March](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2005/3/)
* [February](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2005/2/)
* [January](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2005/1/)

### 2004

* [December](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2004/12/)

[List overview](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/)

[Download](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/export/mediawiki-announce%40lists.wikimedia.org-4XQZ3IXAGFKZXLL5FJAO2GPI3PJSH2TE.mbox.gz?message=4XQZ3IXAGFKZXLL5FJAO2GPI3PJSH2TE "This message in gzipped mbox format")

[thread](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/thread/4XQZ3IXAGFKZXLL5FJAO2GPI3PJSH2TE/#4XQZ3IXAGFKZXLL5FJAO2GPI3PJSH2TE)

# [MediaWiki-announce] MediaWiki Security and Maintenance Releases: 1.23.7, 1.22.14 and 1.19.22

[Markus Glaser](/hyperkitty/users/44a5eb4e928b4d70bb0a4dbb5f7e1e0c/ "See the profile for Markus Glaser")

27 Nov
2014

27 Nov
'14

4:40 a.m.

Hello everyone,

I would like to announce the release of MediaWiki 1.23.7, 1.22.14 and 1.19.22. This is a regular security and maintenance release. Download links are given at the end of this email.

== Security fixes ==
\* (bugs 66776, 71478) SECURITY: User PleaseStand reported a way to inject code into API clients that used format=php to process pages that underwent flash policy mangling. This was fixed along with improving how the mangling was done for format=json, and allowing sites to disable the mangling using $wgMangleFlashPolicy.
<https://phabricator.wikimedia.org/T68776>
<https://phabricator.wikimedia.org/T73478>

\* (bug 70901) SECURITY: User Jackmcbarn reported that the ability to update the content model for a page could allow an unprivileged attacker to edit another user's common.js under certain circumstances. The user right "editcontentmodel" was added, and is needed to change a revision's content model.
<https://phabricator.wikimedia.org/T72901>

\* (bug 71111) SECURITY: User PleaseStand reported that on wikis that allow raw HTML, it is not safe to preview wikitext coming from an untrusted source such as a cross-site request. Thus add an edit token to the form, and when raw HTML is allowed, ensure the token is provided before showing the preview. This check is not performed on wikis that both allow raw HTML and anonymous editing, since there are easier ways to exploit that scenario.
<https://phabricator.wikimedia.org/T73111>

\* (bug 72222) SECURITY: Do not show log action when the entry is revdeleted with DELETED\_ACTION. NOTICE: this may be reverted in a future release pending a public RFC about the desired functionality. This issue was reported by user Bawolff.
<https://phabricator.wikimedia.org/T74222>

== Bugfixes ==
\* (bug 71621) Make allowing site-wide styles on restricted special pages a config option.
<https://phabricator.wikimedia.org/T73621>

\* (bug 42723) Added updated version history from 1.19.2 to 1.22.13
<https://phabricator.wikimedia.org/T44723>

\* $wgMangleFlashPolicy was added to make MediaWiki's mangling of anything that might be a flash policy directive configurable.

Full release notes for 1.23.7:
<https://www.mediawiki.org/wiki/Release_notes/1.23>

Full release notes for 1.22.14:
<https://www.mediawiki.org/wiki/Release_notes/1.22>

Full release notes for 1.19.22:
<https://www.mediawiki.org/wiki/Release_notes/1.19>

Public keys:
<https://www.mediawiki.org/keys/keys.html>

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*
1.23.7
\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*
Download:
<https://releases.wikimedia.org/mediawiki/1.23/mediawiki-1.23.7.tar.gz>
<https://releases.wikimedia.org/mediawiki/1.23/mediawiki-core-1.23.7.tar.gz>

Patch to previous version (1.23.6):
<https://releases.wikimedia.org/mediawiki/1.23/mediawiki-1.23.7.patch.gz>

GPG signatures:
[https://releases.wikimedia.org/mediawiki/1.23/mediawiki-core-1.23.7.tar.gz.s...](https://releases.wikimedia.org/mediawiki/1.23/mediawiki-core-1.23.7.tar.gz.sig)
<https://releases.wikimedia.org/mediawiki/1.23/mediawiki-1.23.7.tar.gz.sig>
<https://releases.wikimedia.org/mediawiki/1.23/mediawiki-1.23.7.patch.gz.sig>

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*
1.22.14
\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*
Download:
<https://releases.wikimedia.org/mediawiki/1.22/mediawiki-1.22.14.tar.gz>

Patch to previous version (1.22.13):
<https://releases.wikimedia.org/mediawiki/1.22/mediawiki-1.22.14.patch.gz>

GPG signatures:
[https://releases.wikimedia.org/mediawiki/1.22/mediawiki-core-1.22.14.tar.gz....](https://releases.wikimedia.org/mediawiki/1.22/mediawiki-core-1.22.14.tar.gz.sig)
<https://releases.wikimedia.org/mediawiki/1.22/mediawiki-1.22.14.tar.gz.sig>
<https://releases.wikimedia.org/mediawiki/1.22/mediawiki-1.22.14.patch.gz.sig>

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*
1.19.22
\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*
Download:
<https://releases.wikimedia.org/mediawiki/1.19/mediawiki-1.19.22.tar.gz>

Patch to previous version (1.19.21):
<https://releases.wikimedia.org/mediawiki/1.19/mediawiki-1.19.22.patch.gz>

GPG signatures:
[https://releases.wikimedia.org/mediawiki/1.19/mediawiki-core-1.19.22.tar.gz....](https://releases.wikimedia.org/mediawiki/1.19/mediawiki-core-1.19.22.tar.gz.sig)
<https://releases.wikimedia.org/mediawiki/1.19/mediawiki-1.19.22.tar.gz.sig>
<https://releases.wikimedia.org/mediawiki/1.19/mediawiki-1.19.22.patch.gz.sig>

Mark Hershberger and Markus Glaser
(Wiki Release Team)

[0](#like "You must be logged-in to vote.")
[0](#dislike "You must be logged-in to vote.")

Reply

[Back to the thread](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/thread/4XQZ3IXAGFKZXLL5FJAO2GPI3PJSH2TE/#4XQZ3IXAGFKZXLL5FJAO2GPI3PJSH2TE)

[Back to the list](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/)

Powered by [HyperKitty](http://hyperkitty.readthedocs.org) version 1.3.7.



=== Content from phabricator.wikimedia.org_652a9cda_20250124_205106.html ===
Page Menu[HomePhabricator](/)

* SearchConfigure Global Search

[Log In](https://phabricator.wikimedia.org/auth/start/?next=%2FT72901)[Create Task](/maniphest/task/edit/nocreate/) [Maniphest](/maniphest/)  T72901
# Users can change the content model of other users' user pages to CSS or JSClosed, Resolved[Public](/policy/explain/PHID-TASK-tkeak7liy4eiubilb26d/view/)Actions

* [Edit Task](/maniphest/task/edit/72901/)
* Edit Related Tasks...
* [Create Subtask](/maniphest/task/subtask/72901/)
* [Edit Parent Tasks](/search/rel/task.has-parent/PHID-TASK-tkeak7liy4eiubilb26d/)
* [Edit Subtasks](/search/rel/task.has-subtask/PHID-TASK-tkeak7liy4eiubilb26d/)
* [Merge Duplicates In](/search/rel/task.merge-in/PHID-TASK-tkeak7liy4eiubilb26d/)
* [Close As Duplicate](/search/rel/task.close-as-duplicate/PHID-TASK-tkeak7liy4eiubilb26d/)
* Edit Related Objects...
* [Edit Commits](/search/rel/task.has-commit/PHID-TASK-tkeak7liy4eiubilb26d/)
* [Edit Mocks](/search/rel/task.has-mock/PHID-TASK-tkeak7liy4eiubilb26d/)
* Subscribe
* [Mute Notifications](/subscriptions/mute/PHID-TASK-tkeak7liy4eiubilb26d/)
* [Protect as security issue](/wmf/escalate-task/72901/)
* [Award Token](/token/give/PHID-TASK-tkeak7liy4eiubilb26d/)
* [Flag For Later](/flag/edit/PHID-TASK-tkeak7liy4eiubilb26d/)

Assigned To

|  | [â€¢ csteipp](/p/csteipp/) |
| --- | --- |

Authored By

|  | [Jackmcbarn](/p/Jackmcbarn/) |
| --- | --- |
| Sep 16 2014, 8:03 PM2014-09-16 20:03:00 (UTC+0) |

Tags

* [Security-Core](/tag/security-core/) [(Backlog)](/project/board/427/)
* [Vuln-XSS](/tag/vuln-xss/)
* [Patch-For-Review](/tag/patch-for-review/)
* [Security](/tag/security/)
Referenced Files

|  | [F16328: bug70901-REL1\_22.patch](/F16328) |
| --- | --- |
| Nov 26 2014, 1:22 PM2014-11-26 13:22:32 (UTC+0) |

|  | [F16329: bug70901-REL1\_23.patch](/F16329) |
| --- | --- |
| Nov 26 2014, 1:22 PM2014-11-26 13:22:32 (UTC+0) |

|  | [F14855: bug70901-newright-b.patch](/F14855) |
| --- | --- |
| Nov 22 2014, 3:47 AM2014-11-22 03:47:37 (UTC+0) |

Subscribers

|  | [â€¢ csteipp](/p/csteipp/) |
| --- | --- |

|  | [daniel](/p/daniel/) |
| --- | --- |

|  | [â€¢ DannyH](/p/DannyH/) |
| --- | --- |

|  | [EBernhardson](/p/EBernhardson/) |
| --- | --- |

|  | [gerritbot](/p/gerritbot/) |
| --- | --- |

|  | [greg](/p/greg/) |
| --- | --- |

|  | [Grunny](/p/Grunny/) |
| --- | --- |

[View All 20 Subscribers](/subscriptions/list/PHID-TASK-tkeak7liy4eiubilb26d/)Tokens"Haypence" token, awarded by RandomDSdevel.
# Description

If $wgContentHandlerUseDB is enabled, it's possible for a user to change the content model of a page in another user's userspace to CSS or JS. There are two problems with this: One is that a user could be a nuisance by mass-changing the pages, since once they're changed like that, only the userspace's owner or an admin can fix them. Another is that if a user accidentally sets their common.js to wikitext, a malicious user could add bad code to it and change its content model back to JS, so it would get executed. To fix this, when checking if a page is a protected user settings page, we need to check both the old and the new content model, rather than just the old one as we do now.

---

**Version**: unspecified

**Severity**: blocker

**See Also**:

<https://bugzilla.wikimedia.org/show_bug.cgi?id=73490>

<https://bugzilla.wikimedia.org/show_bug.cgi?id=71163>

# Details

Reference bz70901
# Related ObjectsSearch...

* Task Graph
* Mentions

|  |  | Status | Subtype | Assigned | Task |
| --- | --- | --- | --- | --- | --- |
|  |  | Resolved |  | [Trizek-WMF](/p/Trizek-WMF/) | T115110 [Track Flow activation](/T115110) |
|  |  | Open |  | *None* | T63747 [Flow should be able to enumerate all flow enabled pages on a wiki](/T63747) |
|  |  | Resolved |  | *None* | T67604 [Flow: enabling Flow on a LiquidThreads talk page doesn't work (LQT conversion)](/T67604) |
|  |  | Declined |  | [EBernhardson](/p/EBernhardson/) | T63730 [MediaWiki delete action doesn't work with pages that have been occupied by Flow](/T63730) |
|  |  | Resolved |  | [SBisson](/p/SBisson/) | T72073 [U4. Special page to enable Flow on existing wikitext talk pages, auto-archiving the wikitext page (v2)](/T72073) |
|  |  | Resolved |  | [â€¢ Mattflaschen-WMF](/p/Mattflaschen-WMF/) | T76781 [future of wgFlowOccupyNamespaces](/T76781) |
|  |  | Resolved |  | [EBernhardson](/p/EBernhardson/) | T76778 [Co-op: respect contentmodel in the page DB.](/T76778) |
|  |  | Declined |  | [Vogone](/p/Vogone/) | T202597 ['editcontentmodel' missing in metawiki's MassMessage sender group](/T202597) |
|  |  | Open |  | *None* | T92795 [Users without 'editcontentmodel' user right cannot create MassMessage delivery lists](/T92795) |
|  |  | Open |  | *None* | T85847 [Grant editcontentmodel right to all logged in users](/T85847) |
|  |  | Resolved |  | [wctaiwan](/p/wctaiwan/) | T63255 [Use ContentHandler based spamlist for MassMessage instead of parserfunction](/T63255) |
|  |  | Invalid |  | *None* | T51188 [[DO NOT USE] Schema changes for Wikimedia wikis (tracking) [superseded by #Blocked-on-schema-change]](/T51188) |
|  |  | Duplicate |  | *None* | T64780 [XML import problem in Page namespace](/T64780) |
|  |  | Resolved |  | [Glaisher](/p/Glaisher/) | T65885 [Please enable $wgContentHandlerUseDB at Bengali Wikisource](/T65885) |
|  |  | Open | Feature | *None* | T70846 [Flow: support Topic:OldPagename as a #REDIRECT](/T70846) |
|  |  | Declined |  | *None* | T78640 [Co-op: bot can create a Flow board for each new mentored editor (tracking)](/T78640) |
|  |  | Resolved |  | *None* | T51193 [Set $wgContentHandlerUseDB = true on all WMF wikis](/T51193) |
|  |  | Resolved |  | [â€¢ csteipp](/p/csteipp/) | T72901 [Users can change the content model of other users' user pages to CSS or JS](/T72901) |

Mentioned In [T85847: Grant editcontentmodel right to all logged in users](/T85847)
[T106177: Implement Gadget and Gadget definition namespaces plus their content models](/T106177)
[T92795: Users without 'editcontentmodel' user right cannot create MassMessage delivery lists](/T92795)
[T92794: Remove 'editcontentmodel' user right and restriction on editing content models](/T92794)
[T73163: Cannot edit old revisions if the content model of those revisions are different from the page's current revision](/T73163)
[T51193: Set $wgContentHandlerUseDB = true on all WMF wikis](/T51193) Mentioned Here [T145316: It is possible to create a different user's subpage with a JavaScript or CSS content model, so only that user or a sysop can edit or revert](/T145316)
[T73163: Cannot edit old revisions if the content model of those revisions are different from the page's current revision](/T73163)
[T85847: Grant editcontentmodel right to all logged in users](/T85847)
[T106195: MediaWiki gives error, when press undo after a contentmodelchange](/T106195)
[T145044: Clicking undo on an edit that changed the content model results in a MWException](/T145044)
### Event Timeline

[â€¢ bzimport](/p/bzimport/) raised the priority of this task from  to Medium.[Nov 22 2014, 3:47 AM2014-11-22 03:47:27 (UTC+0)](#752793)[â€¢ bzimport](/p/bzimport/) added a project: [Security-Core](/tag/security-core/).[â€¢ bzimport](/p/bzimport/) set Reference to bz70901.[â€¢ bzimport](/p/bzimport/) changed Security from none to Software security bug.Restricted Application changed the visibility from "Public (No Login Required)" to "[acl\*security](/tag/acl_security/) (Project)".  Â· [View Herald Transcript](/herald/transcript/405526/)[Nov 22 2014, 3:47 AM2014-11-22 03:47:27 (UTC+0)](#752796)Restricted Application changed the edit policy from "All Users" to "[acl\*security](/tag/acl_security/) (Project)".  Â· [View Herald Transcript](/herald/transcript/405526/)[Jackmcbarn](/p/Jackmcbarn/) created this task.[Sep 16 2014, 8:03 PM2014-09-16 20:03:00 (UTC+0)](#752810)[â€¢ csteipp](/p/csteipp/) added a comment.[Sep 17 2014, 1:09 AM2014-09-17 01:09:23 (UTC+0)](#752820)Comment Actions

Thanks Jackmcbarn. S mentioned this too earlier this week, since they saw something similar while testing flow. But thanks for calling out these specific issues.

Let me duplicate these.. I don't feel like I have a good understanding of all the changes we done in this area the past few months.

[â€¢ csteipp](/p/csteipp/) added a comment.[Sep 17 2014, 8:06 PM2014-09-17 20:06:29 (UTC+0)](#752826)Comment Actions

Confirmed the second scenario is definitely exploitable.

* Being able to set a user's page content type to javascript or css without edituserjs/editusercss rights seems like a bug.
* Being able to update another user's common.js and skin .js subpages without edituserjs rights, even when the content type isn't javascript, doesn't seem right to me. But I understand why we're doing it, so as long as we fix this first issue, I think we can continue allowing it.

On the vandalism side, this definitely needs a lot more testing before we enable $wgContentHandlerUseDB on more wikis. Rollback seems to work ok, but undo seems broken when undoing revisions that change the content type.

From a product standpoint, do we really want to allow other users to change the content type of another user's subpages at all? For that matter, should there be an 'editcontenttype' right that is needed to change the content type of any existing page?

[Jackmcbarn](/p/Jackmcbarn/) added a comment.[Sep 17 2014, 10:23 PM2014-09-17 22:23:39 (UTC+0)](#752835)Comment Actions

(In reply to Chris Steipp from comment #2)

> * Being able to set a user's page content type to javascript or css without
>
> edituserjs/editusercss rights seems like a bug.

Only for pages in the User namespace (and even of them, only subpages). It's fine elsewhere.

> * Being able to update another user's common.js and skin .js subpages
>
> without edituserjs rights, even when the content type isn't javascript,
>
> doesn't seem right to me. But I understand why we're doing it, so as long as
>
> we fix this first issue, I think we can continue allowing it.

Agreed.

> On the vandalism side, this definitely needs a lot more testing before we
>
> enable $wgContentHandlerUseDB on more wikis. Rollback seems to work ok, but
>
> undo seems broken when undoing revisions that change the content type.

I haven't looked at this in detail.

> From a product standpoint, do we really want to allow other users to change
>
> the content type of another user's subpages at all? For that matter, should
>
> there be an 'editcontenttype' right that is needed to change the content
>
> type of any existing page?

I don't see any reason to restrict that whatsoever.

[Krinkle](/p/Krinkle/) added a comment.[Oct 15 2014, 6:55 PM2014-10-15 18:55:55 (UTC+0)](#752857)Comment Actions

(In reply to Chris Steipp from comment #2)

> Confirmed the second scenario is definitely exploitable.
>
> * Being able to set a user's page content type to javascript or css without
>
> edituserjs/editusercss rights seems like a bug.
>
> * Being able to update another user's common.js and skin .js subpages
>
> without edituserjs rights, even when the content type isn't javascript,
>
> doesn't seem right to me. But I understand why we're doing it, so as long as
>
> we fix this first issue, I think we can continue allowing it.

In theory that second point seems innocent indeed, however we shouldn't because of current reality. The reality is that the two ways of loading scripts and styles (ResourceLoader modules and importScript/action=raw) do not pay attention to the content model. So content is executable regardless of the content model. The content model is merely a meaningless front-end flag at the moment for having a pretty editor, source highlighting (and in theory syntax validation).

[Legoktm](/p/Legoktm/) added a comment.[Oct 15 2014, 8:03 PM2014-10-15 20:03:17 (UTC+0)](#752869)Comment Actions

(In reply to Krinkle from comment #4)

> In theory that second point seems innocent indeed, however we shouldn't
>
> because of current reality. The reality is that the two ways of loading
>
> scripts and styles (ResourceLoader modules and importScript/action=raw) do
>
> not pay attention to the content model. So content is executable regardless
>
> of the content model. The content model is merely a meaningless front-end
>
> flag at the moment for having a pretty editor, source highlighting (and in
>
> theory syntax validation).

Well, actually RL does pay attention to the content format: <https://github.com/wikimedia/mediawiki-core/blob/master/includes/resourceloader/ResourceLoaderWikiModule.php#L84>. If it's not a JS or CSS format page, it'll ignore it.

[Jackmcbarn](/p/Jackmcbarn/) added a comment.[Oct 16 2014, 12:12 AM2014-10-16 00:12:28 (UTC+0)](#752877)Comment Actions

(In reply to Krinkle from comment #4)

> (In reply to Chris Steipp from comment #2)
>
> > Confirmed the second scenario is definitely exploitable.
> >
> > * Being able to set a user's page content type to javascript or css without
> >
> > edituserjs/editusercss rights seems like a bug.
> >
> > * Being able to update another user's common.js and skin .js subpages
> >
> > without edituserjs rights, even when the content type isn't javascript,
> >
> > doesn't seem right to me. But I understand why we're doing it, so as long as
> >
> > we fix this first issue, I think we can continue allowing it.
>
> In theory that second point seems innocent indeed, however we shouldn't
>
> because of current reality. The reality is that the two ways of loading
>
> scripts and styles (ResourceLoader modules and importScript/action=raw) do
>
> not pay attention to the content model. So content is executable regardless
>
> of the content model. The content model is merely a meaningless front-end
>
> flag at the moment for having a pretty editor, source highlighting (and in
>
> theory syntax validation).

I'm not too concerned about that, since attack is impossible in that scenario unless a user deliberately weakens their own security. Also what Legoktm said.

[â€¢ csteipp](/p/csteipp/) added a comment.[Nov 4 2014, 5:33 AM2014-11-04 05:33:49 (UTC+0)](#752883)Comment Actions

Created attachment 17009

Check css/js permissions on content type change

I didn't see a good way to check title permissions for an alternate content type in the existing Title class, so this patch starts what I'm intending to be longer-term work, pulling permission checking out of the Title class, so we can call the checks in other parts of the code.

There's some duplicated logic, and any extensions that implement userCan/getUserPermissionsErrors, and make a decision based on content type won't get to give input. But I'd like to get this specific case fixed up so we can have a larger discussion about how to handle updating content types going foward.

Daniel Kinzler, I'd especially appreciate your thoughts on if there is a better approach, since this is closely tied to a lot of your work.

*attachment bug70901.patch ignored as obsolete*

[Krinkle](/p/Krinkle/) added a comment.[Nov 5 2014, 2:57 PM2014-11-05 14:57:59 (UTC+0)](#752891)Comment Actions

(from attachment 17009)

+ public static function checkCSSandJSPermissions( $title, $action, $user, $errors,

+ $isCssSubpage = null, $isJsSubpage = null

+ ) {

(from attachment 17009)

+ ) {

+ # Protect css/js subpages of user pages

+ # XXX: this might be better using restrictions

+ # XXX: right 'editusercssjs' is deprecated, for backward compatibility only

+ if ( $isCssSubpage === null ) {

These three lines of comment were moved from another part of the code. I think they belong to the following code however:

(from attachment 17009)

+

+ if ( $action != 'patrol' && !$user->isAllowed( 'editusercssjs' ) ) {

[Krinkle](/p/Krinkle/) added a comment.[Nov 5 2014, 2:58 PM2014-11-05 14:58:48 (UTC+0)](#752895)Comment Actions

(from attachment 17009)

+ public static function checkCSSandJSPermissions( $title, $action, $user, $errors,

+ $isCssSubpage = null, $isJsSubpage = null

+ ) {

Hm... boolean parameters.

(from attachment 17009)

+ ) {

+ # Protect css/js subpages of user pages

+ # XXX: this might be better using restrictions

+ # XXX: right 'editusercssjs' is deprecated, for backward compatibility only

+ if ( $isCssSubpage === null ) {

These three lines of comment were moved from another part of the code. I think they belong to the following code however:

(from attachment 17009)

+

+ if ( $action != 'patrol' && !$user->isAllowed( 'editusercssjs' ) ) {

[Jackmcbarn](/p/Jackmcbarn/) added a comment.[Nov 6 2014, 2:02 AM2014-11-06 02:02:48 (UTC+0)](#752910)Comment Actions

I notice that the patch makes the (currently correct) assumption that the content model can only be changed through the API. I don't think that'll always be the case, though. Can we worry about that later when/if we change it, or should we worry about it now?

[â€¢ csteipp](/p/csteipp/) added a comment.[Nov 7 2014, 12:54 AM2014-11-07 00:54:05 (UTC+0)](#752925)Comment Actions

(In reply to Jackmcbarn from comment #10)

> I notice that the patch makes the (currently correct) assumption that the
>
> content model can only be changed through the API. I don't think that'll
>
> always be the case, though. Can we worry about that later when/if we change
>
> it, or should we worry about it now?

I'd like to fix the current issue with as minimal of a patch as we can, then have a broader discussion on wikitech-l to make sure the assumptions behind $wgContentHandlerUseDB are sound.

[Jackmcbarn](/p/Jackmcbarn/) added a comment.[Nov 7 2014, 1:57 AM2014-11-07 01:57:26 (UTC+0)](#752941)Comment Actions

Okay, sounds good.

[â€¢ csteipp](/p/csteipp/) added a comment.[Nov 7 2014, 6:00 PM2014-11-07 18:00:50 (UTC+0)](#752955)Comment Actions

Created attachment 17072

Check css/js permissions on content type change

Updated for Krinkle's comments

*attachment bug70901b.patch ignored as obsolete*

[daniel](/p/daniel/) added a comment.[Nov 10 2014, 11:44 AM2014-11-10 11:44:13 (UTC+0)](#752972)Comment Actions

@Chris: can you put that patch on gerrit, so we can comment inline?

To recap the two scenarios originally described by Jackmcbarn:

"it's possible for a user to change the content model of a page in another

user's userspace to CSS or JS."

1. "One is that a user could be a nuisance by mass-changing the pages, since once they're changed like that, only the userspace's owner or an admin can fix them."

2. "Another is that if a user accidentally sets their common.js to wikitext, a malicious user could add bad code to it and change its content model back to JS, so it would get executed."

The brackground is that with $wgContentHandlerUseDB set to true, the content model attributed to subpages in the User namespace is not dictated by the ".js" and ".css" extensions; the default model can then be overwritten when creating or editing a page (via the API).

From what I can see (I have not tested), attachment 17072 will prevent unauthorized users to create or edit user-subpages with content model JS or CSS. This should fix both scenarios.

While that would definitely be an improvement, I see some remaining issues:

1. as far as I can tell, any user can change the content model of a user JS/CSS page to something else, like wikitext, effectively but silently "disabling" these pages (if RL indeed ignored subpages with the "wrong" model). Or worse, it would lead to "active" JS/CSS pages editable by anyone.

2. with $wgContentHandlerUseDB off, wouldn't it be possible for an attacker to move an arbitrary page to User:Foo/Common.js, making it an active user JS page? I have not tried, but even if it's not possible in the most obvious way, we should safeguard against this "deeper" in the code.

Basically: with $wgContentHandlerUseDB enabled, editing can change the content model (and thus the permissions that apply). With $wgContentHandlerUseDB disabled, moving a page can change the content model (and thus permissions). Permisswion checks are currently based on the current model, not the "targeted" model.

As Jackmcbarn suggests, this should be addressed by always checking permissions for the old \*and\* the new state of the page (Chris' current patch only checks the new state, as far as I can see, allowing the model to be changed "away" from JS/CSS).

This is further complicated by the fact that Title::userCan for a non-existing page will check against the title's default model, which may not be the model actually being used to create the page.

So, we'll have to be smarter when checking permissions, and I agree this logic could go into a TitlePermissionChecks class (which ideally would operate on TitleValue objects, but let's think about that later). However, I feel that the checkCSSandJSPermissions() method proposed by Chris exposes too much of the internal logic of checking permissions. The calling code shouldn't need to know about special cases for JS/CSS pages. Instead, there should be methods that are only slightly more specific than the current Title::userCan:

* TitlePermissionChecks::userCan( $title, $action ) // for completeness
* TitlePermissionChecks::userCanEdit( $title, $newModel )
* TitlePermissionChecks::userCanMove( $title, $newTitle, $newModel )
* ...

Any special logic for JS/CSS would be hidden in these methods.

Note that $user is missing from the signatures, because, in my thinking, the TitlePermissionChecks object would know the user it checks permissions for (and would also know whether "expensive checks" should be done).

[Jackmcbarn](/p/Jackmcbarn/) added a comment.[Nov 10 2014, 1:04 PM2014-11-10 13:04:59 (UTC+0)](#752980)Comment Actions

(In reply to Daniel Kinzler from comment #14)

> 1. as far as I can tell, any user can change the content model of a user
>
> JS/CSS page to something else, like wikitext, effectively but silently
>
> "disabling" these pages (if RL indeed ignored subpages with the "wrong"
>
> model). Or worse, it would lead to "active" JS/CSS pages editable by anyone.

We're safe against this, since we test against the old and new model.

> 2. with $wgContentHandlerUseDB off, wouldn't it be possible for an attacker
>
> to move an arbitrary page to User:Foo/Common.js, making it an active user JS
>
> page? I have not tried, but even if it's not possible in the most obvious
>
> way, we should safeguard against this "deeper" in the code.

We're safe against this, since with $wgContentHandlerUseDB off, nobody (not even admins) can move a wikitext page to JS or vice versa.

> As Jackmcbarn suggests, this should be addressed by always checking
>
> permissions for the old \*and\* the new state of the page (Chris' current
>
> patch only checks the new state, as far as I can see, allowing the model to
>
> be changed "away" from JS/CSS).

It was already checking the old state, and he added a check for the new state.

I don't think there's any remaining security issues with this patch.

[â€¢ csteipp](/p/csteipp/) added a comment.[Nov 10 2014, 7:43 PM2014-11-10 19:43:26 (UTC+0)](#752992)Comment Actions

(In reply to Daniel Kinzler from comment #14)

> @Chris: can you put that patch on gerrit, so we can comment inline?

Sadly no. Gerrit can't do private patches :(. The glorious phabricator phuture has some hope...

> To recap the two scenarios originally described by Jackmcbarn:
>
> "it's possible for a user to change the content model of a page in another
>
> user's userspace to CSS or JS."
>
> 1. "One is that a user could be a nuisance by mass-changing the pages, since
>
> once they're changed like that, only the userspace's owner or an admin can
>
> fix them."
>
> 2. "Another is that if a user accidentally sets their common.js to wikitext,
>
> a malicious user could add bad code to it and change its content model back
>
> to JS, so it would get executed."
>
> The brackground is that with $wgContentHandlerUseDB set to true, the content
>
> model attributed to subpages in the User namespace is not dictated by the
>
> ".js" and ".css" extensions; the default model can then be overwritten when
>
> creating or editing a page (via the API).
>
> From what I can see (I have not tested), attachment 17072 [details] will
>
> prevent unauthorized users to create or edit user-subpages with content
>
> model JS or CSS. This should fix both scenarios.
>
> While that would definitely be an improvement, I see some remaining issues:
>
> 1. as far as I can tell, any user can change the content model of a user
>
> JS/CSS page to something else, like wikitext, effectively but silently
>
> "disabling" these pages (if RL indeed ignored subpages with the "wrong"
>
> model). Or worse, it would lead to "active" JS/CSS pages editable by anyone.

That shouldn't be possible (as Jackmcbarn said), for existing pages. E.g., on every edit ApiEditPage does:

$errors = $titleObj->getUserPermissionsErrors( 'edit', $user );

For editing a user's common.js, $titleObj has it's content type set to Javascript, and is a subpage, so Title::isJsSubpage() is true, and checkCSSandJSPermissions won't let other users edit the page, including changing the content type.

> 2. with $wgContentHandlerUseDB off, wouldn't it be possible for an attacker
>
> to move an arbitrary page to User:Foo/Common.js, making it an active user JS
>
> page? I have not tried, but even if it's not possible in the most obvious
>
> way, we should safeguard against this "deeper" in the code.
>
> Basically: with $wgContentHandlerUseDB enabled, editing can change the
>
> content model (and thus the permissions that apply). With
>
> $wgContentHandlerUseDB disabled, moving a page can change the content model
>
> (and thus permissions). Permisswion checks are currently based on the
>
> current model, not the "targeted" model.
>
> As Jackmcbarn suggests, this should be addressed by always checking
>
> permissions for the old \*and\* the new state of the page (Chris' current
>
> patch only checks the new state, as far as I can see, allowing the model to
>
> be changed "away" from JS/CSS).
>
> This is further complicated by the fact that Title::userCan for a
>
> non-existing page will check against the title's default model, which may
>
> not be the model actually being used to create the page.

This definitely concerns me. In this specific case, ContentHandler::getDefaultModelFor will correctly identify common.js as a javascript file ( "preg\_match( '!\.(css|js)$!u', $title->getText()" ), but it seems too easy to miss another case.

For other files that might be included as javascript, we should correctly mark them as javascript content type, and make sure that loading them fails (I think we already handle that correctly) if they are changed to anything else. Further restricting which namespaces can have javascript content types I think would help.. but that's part of the larger discussion I'd like to have once this particular issue is patched.

> So, we'll have to be smarter when checking permissions, and I agree this
>
> logic could go into a TitlePermissionChecks class (which ideally would
>
> operate on TitleValue objects, but let's think about that later). However, I
>
> feel that the checkCSSandJSPermissions() method proposed by Chris exposes
>
> too much of the internal logic of checking permissions. The calling code
>
> shouldn't need to know about special cases for JS/CSS pages. Instead, there
>
> should be methods that are only slightly more specific than the current
>
> Title::userCan:
>
> * TitlePermissionChecks::userCan( $title, $action ) // for completeness
> * TitlePermissionChecks::userCanEdit( $title, $newModel )
> * TitlePermissionChecks::userCanMove( $title, $newTitle, $newModel )
> * ...

I had started out trying to implement TitlePermissionChecks::userCan, but with just TitleValue, all of the logic for handling a Title's content model, and whether it's a subpage had to get pulled either into TitleValue, TitlePermissionChecks, or another new abstraction, which was a larger rewrite than I wanted to do in a private security patch.

Something like TitlePermissionChecks::userCanEdit( $title, $newModel ) should be possible, although keeping it specific to content model checking (userCanEditModel, or something like that) feels appropriate to me since changing the content model should be a relatively rare case?

> Any special logic for JS/CSS would be hidden in these methods.
>
> Note that $user is missing from the signatures, because, in my thinking, the
>
> TitlePermissionChecks object would know the user it checks permissions for
>
> (and would also know whether "expensive checks" should be done).

[daniel](/p/daniel/) added a comment.[Nov 12 2014, 11:12 AM2014-11-12 11:12:14 (UTC+0)](#752999)Comment Actions

@Chris: Please do not bind permissions (only) to the content model. Tehre should not be any extra restrictions on editing pages with the Javascript content model. There \*should\* be extra restrictions on executable ("active") content. Identifying executable content involves looking at the content model, but it's not generally determined by the content model.

I agree that basing TitlePermissionChecks on TitleValue would need quite a bit of refactoring, which should be done only after a broader discussion.

PS: Gerrit can do private patches: use the "draft" feature. Be careful to \*always\* use the -D option with git review then, though.

[â€¢ csteipp](/p/csteipp/) added a comment.[Nov 12 2014, 8:07 PM2014-11-12 20:07:50 (UTC+0)](#753008)Comment Actions

(In reply to Daniel Kinzler from comment #17)

> PS: Gerrit can do private patches: use the "draft" feature. Be careful to
>
> \*always\* use the -D option with git review then, though.

Unfortunately this is a common myth. Gerrit's ssh server doesn't respect the draft marker, and will happily give you draft changes if you ask it the right way.

[â€¢ csteipp](/p/csteipp/) added a comment.[Nov 13 2014, 11:08 PM2014-11-13 23:08:42 (UTC+0)](#753011)Comment Actions

Created attachment 17123

Add user right to change the content model of a page

This adds a new user right, and requires it for changing the content model of a page.

For pages without extra rights (User css/js subpages), this will still allow a user to move a page with one content model to another name. But there shouldn't be a way to escalate privileges from that.

*attachment bug70901-newright.patch ignored as obsolete*

[Jackmcbarn](/p/Jackmcbarn/) added a comment.[Nov 14 2014, 4:09 AM2014-11-14 04:09:13 (UTC+0)](#753019)Comment Actions

(In reply to Chris Steipp from comment #19)

> Created attachment 17123 [details]
>
> Add user right to change the content model of a page
>
> This adds a new user right, and requires it for changing the content model
>
> of a page.
>
> For pages without extra rights (User css/js subpages), this will still allow
>
> a user to move a page with one content model to another name. But there
>
> shouldn't be a way to escalate privileges from that.

I don't see a point to doing this. It seems to impair usability for no good reason.

*attachment bug70901-newright.patch ignored as obsolete*

[â€¢ csteipp](/p/csteipp/) added a comment.[Nov 14 2014, 7:26 PM2014-11-14 19:26:13 (UTC+0)](#753033)Comment Actions

(In reply to Jackmcbarn from comment #20)

> I don't see a point to doing this. It seems to impair usability for no good
>
> reason.

This came out of an internal email discussion, let me try to summarize it:

Robla initially flagged this for product review because of the broader effects of doing this. The major concerns he brought up were security (like this bug), that reverting them is non-trivial ("undo" throws an exception, bug 71163), and that the diff handling doesn't really have a way to indicate that the content model is changing.

In conversation, Robla and I have also talked about the lack of spam tool integration, and effect on product if, e.g., users revert Flow talk pages back to wikitext.

From products perspective (James F, Danny Horn), the ability to change a page's content type is something we're planning to use for Flow and maybe the Graph extension, so the flag needs to be enabled on wmf sites by next month.

In the end, James F, Robla, and Daniel Kinzler, and I basically agreed that adding a right (which would be given to a relatively small number of accounts) mitigates most of the the current issues, allows the current plans for Flow to move forward, and let's us get into a position where we can safely publicly discuss the more complex issues.

Anyone else involved, please speak up if I'm misrepresenting the views you shared via email.

[Jdforrester-WMF](/p/Jdforrester-WMF/) added a comment.[Nov 14 2014, 7:32 PM2014-11-14 19:32:32 (UTC+0)](#753048)Comment Actions

(In reply to Chris Steipp from comment #21)

> (In reply to Jackmcbarn from comment #20)
>
> > I don't see a point to doing this. It seems to impair usability for no good
> >
> > reason.
>
> This came out of an internal email discussion, let me try to summarize it:

[Snip]

> Anyone else involved, please speak up if I'm misrepresenting the views you
>
> shared via email.

LGTM.

[Jackmcbarn](/p/Jackmcbarn/) added a comment.[Nov 14 2014, 8:50 PM2014-11-14 20:50:28 (UTC+0)](#753055)Comment Actions

(In reply to Chris Steipp from comment #21)

> Robla initially flagged this for product review because of the broader
>
> effects of doing this. The major concerns he brought up were security (like
>
> this bug), that reverting them is non-trivial ("undo" throws an exception,
>
> bug 71163), and that the diff handling doesn't really have a way to indicate
>
> that the content model is changing.

I think we should handle each of those issues the "right" way.

> In conversation, Robla and I have also talked about the lack of spam tool
>
> integration, and effect on product if, e.g., users revert Flow talk pages
>
> back to wikitext.

How does this relate to spam tool integration? Also, doesn't Flow have hardcoded rules for changing its content model?

> In the end, James F, Robla, and Daniel Kinzler, and I basically agreed that
>
> adding a right (which would be given to a relatively small number of
>
> accounts) mitigates most of the the current issues, allows the current plans
>
> for Flow to move forward, and let's us get into a position where we can
>
> safely publicly discuss the more complex issues.

I guess that would be fine as a stopgap, but it should be made clear that the right will go away once all of the issues are properly addressed.

[â€¢ csteipp](/p/csteipp/) added a comment.[Nov 17 2014, 11:43 PM2014-11-17 23:43:13 (UTC+0)](#753072)Comment Actions

I'm planning to deploy the permission this week, and the patch will go out with the 1.23.7 release (sometime next week, I should have the exact date soon). Then we can discuss broader issues publicly.

Brad, I didn't realize you weren't already on this bug. Does this plan make sense from your perspective?

[Anomie](/p/Anomie/) added a comment.[Nov 18 2014, 3:03 AM2014-11-18 03:03:49 (UTC+0)](#753093)Comment Actions

(In reply to Jackmcbarn from comment #10)

> I notice that the patch makes the (currently correct) assumption that the
>
> content model can only be changed through the API.

That assumption is not correct. The web UI has hidden fields for model and format, and changing these to appropriate values will save the page with the specified model and format.

This snippet entered in the browser's JS console should reveal the fields (works in Firefox anyway; may blow up in IE):

$( 'input[name=model], input[name=format]' ).attr( 'type', 'text' );

(In reply to Chris Steipp from comment #24)

> Brad, I didn't realize you weren't already on this bug. Does this plan make
>
> sense from your perspective?

Requiring a permission to change content type (at least temporarily) seems sane, if it catches all the relevant code paths. Do we need to worry about someone moving their own common.js to other places as a way to spam content-JS pages into someone else's user space?

For the other patch (attachment #17072), I don't really like the duplication of the "isCssSubpage" and "isJsSubpage" logic inside ApiEditPage.

[â€¢ csteipp](/p/csteipp/) added a comment.[Nov 19 2014, 12:11 AM2014-11-19 00:11:41 (UTC+0)](#753100)Comment Actions

(In reply to Brad Jorsch from comment #25)

> (In reply to Jackmcbarn from comment #10)
>
> > I notice that the patch makes the (currently correct) assumption that the
> >
> > content model can only be changed through the API.
>
> That assumption is not correct. The web UI has hidden fields for model and
>
> format, and changing these to appropriate values will save the page with the
>
> specified model and format.
>
> This snippet entered in the browser's JS console should reveal the fields
>
> (works in Firefox anyway; may blow up in IE):
>
> $( 'input[name=model], input[name=format]' ).attr( 'type', 'text' );

Thanks for pointing that out Brad, I missed that. I updated the patch to do the check in EditPage, which seems like the last place any permissions are checked.

> (In reply to Chris Steipp from comment #24)
>
> > Brad, I didn't realize you weren't already on this bug. Does this plan make
> >
> > sense from your perspective?
>
> Requiring a permission to change content type (at least temporarily) seems
>
> sane, if it catches all the relevant code paths. Do we need to worry about
>
> someone moving their own common.js to other places as a way to spam
>
> content-JS pages into someone else's user space?

The target name of the move couldn't end in .js, but yeah, someone could put pages into your user space that had a javascript content model. The user would be able to edit them, while the person moving them in couldn't after the move (without edituserjs rights).

I can't think of a way to exploit that unless some existing javascript tries to load a (non .js-named) page from the user's namespace and executed it as javascript. Or did you have anything else in mind?

[â€¢ csteipp](/p/csteipp/) added a comment.[Nov 19 2014, 12:12 AM2014-11-19 00:12:38 (UTC+0)](#753108)Comment Actions

Comment on attachment 17072

Check css/js permissions on content type change

Let's do this as a larger refactor of Title, and do it publicly.

[â€¢ csteipp](/p/csteipp/) added a comment.[Nov 19 2014, 12:13 AM2014-11-19 00:13:22 (UTC+0)](#753111)Comment Actions

Created attachment 17165

Add user right and require it to change the content model of a page

**Attached**: bug70901-newright-b.patch6 KB[Download](https://phab.wmfusercontent.org/file/download/7bn6xkfee4orcvlpy4xo/PHID-FILE-fns35vupdkm2giovsv5t/bug70901-newright-b.patch)

[Anomie](/p/Anomie/) added a comment.[Nov 19 2014, 6:27 PM2014-11-19 18:27:54 (UTC+0)](#753119)Comment Actions

(In reply to Chris Steipp from comment #26)

> I can't think of a way to exploit that unless some existing javascript tries
>
> to load a (non .js-named) page from the user's namespace and executed it as
>
> javascript. Or did you have anything else in mind?

Just the annoyance of being able to shove pages into someone's userspace that can't be reverted or edited by anyone other than the user involved or admins.

(In reply to Chris Steipp from comment #28)

> Created attachment 17165 [details]
>
> Add user right and require it to change the content model of a page

+1: Looks good, haven't tested.

**Attached**: bug70901-newright-b.patch6 KB[Download](https://phab.wmfusercontent.org/file/download/7bn6xkfee4orcvlpy4xo/PHID-FILE-fns35vupdkm2giovsv5t/bug70901-newright-b.patch)

[â€¢ Mattflaschen-WMF](/p/Mattflaschen-WMF/) added a comment.[Nov 19 2014, 7:03 PM2014-11-19 19:03:57 (UTC+0)](#753124)Comment Actions

This is a little orthogonal, but related, and I just want to put it on the radar:

With the Flow content models, the page is not purely one blob of text.

It doesn't make sense to simply mark that a wikitext talk page is now Flow. The transition is more complicated than that.

So initially we are probably not going to allow changing the content model of an existing page to Flow using the standard ContentHandler API.

However, we will probably soon allow creating new Flow boards with the normal ContentHandler mechanism, as long as you have the proper permission.

[EBernhardson](/p/EBernhardson/) added a comment.[Nov 19 2014, 9:57 PM2014-11-19 21:57:55 (UTC+0)](#753128)Comment Actions

to follow up matt, within Flow we are implementing additional restrictions through the ContentHandler::canBeUsedOn method which is checked on every call to WikiPage::doEditContent.

The Current implementation checks a whitelist defined in mediawiki-config, but we've been wanting to get rid of that for some time. To get rid of the whitelist requires $wgContentHandlerUseDB to be enabled.

With the whitelist removed the implementation will change, our current gerrit patch involves creating a bit of shared state between the content handler and a special page designed for the task of 'activating' flow pages. Specifically the new implementation only allows saving a flow-board content type if the content type is already flow-board, or if the special page has explicitly allowed it during the current script run. The special page will have some new right attached to it, our first user will be a bot which will go through standard channels to have rights enabled.

[â€¢ csteipp](/p/csteipp/) added a comment.[Nov 19 2014, 10:06 PM2014-11-19 22:06:52 (UTC+0)](#753151)Comment Actions

(In reply to Brad Jorsch from comment #29)

> +1: Looks good, haven't tested.

Thanks Brad. Could you (or anyone else) review it for deployment, and I'll push it out tomorrow?

[Anomie](/p/Anomie/) added a comment.[Nov 20 2014, 4:58 PM2014-11-20 16:58:52 (UTC+0)](#753175)Comment Actions

(In reply to Chris Steipp from comment #32)

> Thanks Brad. Could you (or anyone else) review it for deployment, and I'll
>
> push it out tomorrow?

Looks good to deploy, manual testing passed.

Restricted Application changed the visibility from "[acl\*security](/tag/acl_security/) (Project)" to "[Custom Policy](/transactions/new/PHID-XACT-TASK-l3ytaa2fnqvas3w/)".  Â· [View Herald Transcript](/herald/transcript/416284/)[Nov 23 2014, 8:22 PM2014-11-23 20:22:38 (UTC+0)](#775789)Restricted Application changed the edit policy from "[acl\*security](/tag/acl_security/) (Project)" to "[Custom Policy](/transactions/new/PHID-XACT-TASK-m4oncyr7ctnpmzn/)".  Â· [View Herald Transcript](/herald/transcript/416284/)Restricted Application added a project: [acl\*security](/tag/acl_security/).  Â· [View Herald Transcript](/herald/transcript/416284/)[â€¢ csteipp](/p/csteipp/) added a comment.[Nov 25 2014, 6:32 PM2014-11-25 18:32:49 (UTC+0)](#785084)Comment Actions

Deployed bug70901-newright-b.patch6 KB[Download](https://phab.wmfusercontent.org/file/download/7bn6xkfee4orcvlpy4xo/PHID-FILE-fns35vupdkm2giovsv5t/bug70901-newright-b.patch) on the cluster. This should be backported for the 1.23.7 release tomorrow.

Once this is public, we'll start a public conversation on wikitech-l about how we want to do content type updates in the future. I'll also start breaking permission checking out of Title in a public patch, so we'll have a little more flexibility in how we do those checks in the future.

Restricted Application changed the visibility from "[Custom Policy](/transactions/old/PHID-XACT-TASK-qd6fxvrc2i23dqq/)" to "[Custom Policy](/transactions/new/PHID-XACT-TASK-qd6fxvrc2i23dqq/)".  Â· [View Herald Transcript](/herald/transcript/422539/)[Nov 25 2014, 6:32 PM2014-11-25 18:32:49 (UTC+0)](#785085)Restricted Application changed the edit policy from "[Custom Policy](/transactions/old/PHID-XACT-TASK-k7tf3qxfe2xpdq5/)" to "[Custom Policy](/transactions/new/PHID-XACT-TASK-k7tf3qxfe2xpdq5/)".  Â· [View Herald Transcript](/herald/transcript/422539/)[â€¢ csteipp](/p/csteipp/) added a subscriber: [Mglaser](/p/Mglaser/).[Nov 25 2014, 6:33 PM2014-11-25 18:33:29 (UTC+0)](#785088)Restricted Application changed the visibility from "[Custom Policy](/transactions/old/PHID-XACT-TASK-bs6vvs3enkde2lr/)" to "[Custom Policy](/transactions/new/PHID-XACT-TASK-bs6vvs3enkde2lr/)".  Â· [View Herald Transcript](/herald/transcript/422541/)[Nov 25 2014, 6:33 PM2014-11-25 18:33:29 (UTC+0)](#785089)Restricted Application changed the edit policy from "[Custom Policy](/transactions/old/PHID-XACT-TASK-cgh7hzyql777kmp/)" to "[Custom Policy](/transactions/new/PHID-XACT-TASK-cgh7hzyql777kmp/)".  Â· [View Herald Transcript](/herald/transcript/422541/)[â€¢ chasemp](/p/chasemp/) changed the visibility from "[Custom Policy](/transactions/old/PHID-XACT-TASK-lkfl3yc332fw7i2/)" to "[Custom Policy](/transactions/new/PHID-XACT-TASK-lkfl3yc332fw7i2/)".[Nov 25 2014, 9:07 PM2014-11-25 21:07:22 (UTC+0)](#785947)[â€¢ chasemp](/p/chasemp/) changed Security from Software security bug to None.[â€¢ csteipp](/p/csteipp/) changed the visibility from "[Custom Policy](/transactions/old/PHID-XACT-TASK-qul26mmlzvkjql6/)" to "[Custom Policy](/transactions/new/PHID-XACT-TASK-qul26mmlzvkjql6/)".[Nov 25 2014, 10:13 PM2014-11-25 22:13:57 (UTC+0)](#786192)[â€¢ csteipp](/p/csteipp/) changed the visibility from "[Custom Policy](/transactions/old/PHID-XACT-TASK-tuxfcomt5mnwuyr/)" to "[Custom Policy](/transactions/new/PHID-XACT-TASK-tuxfcomt5mnwuyr/)".[Nov 26 2014, 5:57 AM2014-11-26 05:57:47 (UTC+0)](#787317)[â€¢ csteipp](/p/csteipp/) added a subscriber: [Grunny](/p/Grunny/).[Mglaser](/p/Mglaser/) added a comment.[Nov 26 2014, 1:22 PM2014-11-26 13:22:32 (UTC+0)](#787993)Comment Actions

Ok, here are the backports for REL1\_23 and REL1\_22.

bug70901-REL1\_22.patch6 KB[Download](https://phab.wmfusercontent.org/file/download/cielgfbcwdb7px45f54a/PHID-FILE-s7oa4oipegppwdahvn6u/bug70901-REL1_22.patch)

bug70901-REL1\_23.patch6 KB[Download](https://phab.wmfusercontent.org/file/download/rydrl43h6mvrwejflkot/PHID-FILE-rj2zx5kxravdgs2a6yy4/bug70901-REL1_23.patch)

The patch applies to REL1\_24 without the need for a backport. There is no content handler in REL1\_19, so no backport needed.

Can anyone confirm the two backports?

[â€¢ csteipp](/p/csteipp/) changed the visibility from "[Custom Policy](/transactions/old/PHID-XACT-TASK-ylbkl6ikxum625w/)" to "[Custom Policy](/transactions/new/PHID-XACT-TASK-ylbkl6ikxum625w/)".[Nov 26 2014, 6:13 PM2014-11-26 18:13:02 (UTC+0)](#788804)[â€¢ csteipp](/p/csteipp/) added a subscriber: [ProgramCeltic](/p/ProgramCeltic/).[Mglaser](/p/Mglaser/) added a comment.[Nov 26 2014, 10:21 PM2014-11-26 22:21:15 (UTC+0)](#789518)Comment Actions

Tested editing MediaWiki:Common.css after applying the patch in REL1\_24, REL1\_23 and REL1\_22

[â€¢ csteipp](/p/csteipp/) added a comment.[Nov 26 2014, 10:39 PM2014-11-26 22:39:07 (UTC+0)](#789581)Comment Actions
> In [T72901#787993](/T72901#787993), [@Mglaser](/p/Mglaser/) wrote:
>
> Ok, here are the backports for REL1\_23 and REL1\_22.
>
> bug70901-REL1\_22.patch6 KB[Download](https://phab.wmfusercontent.org/file/download/cielgfbcwdb7px45f54a/PHID-FILE-s7oa4oipegppwdahvn6u/bug70901-REL1_22.patch)
>
> bug70901-REL1\_23.patch6 KB[Download](https://phab.wmfusercontent.org/file/download/rydrl43h6mvrwejflkot/PHID-FILE-rj2zx5kxravdgs2a6yy4/bug70901-REL1_23.patch)
>
> The patch applies to REL1\_24 without the need for a backport. There is no content handler in REL1\_19, so no backport needed.
>
> Can anyone confirm the two backports?

Confirmed the backports prevent changing the content model

[â€¢ Mattflaschen-WMF](/p/Mattflaschen-WMF/) added a comment.[Dec 1 2014, 11:15 PM2014-12-01 23:15:14 (UTC+0)](#799655)Comment Actions

Since the fix for this is now [fully public](https://lists.wikimedia.org/pipermail/mediawiki-announce/2014-November/000170.html), can this bug be marked public?

[â€¢ csteipp](/p/csteipp/) removed a project: [Patch-For-Review](/tag/patch-for-review/).[Dec 1 2014, 11:22 PM2014-12-01 23:22:39 (UTC+0)](#799689)[â€¢ csteipp](/p/csteipp/) changed the visibility from "[Custom Policy](/transactions/old/PHID-XACT-TASK-gllpxefs4kpkxsd/)" to "Public (No Login Required)".[â€¢ csteipp](/p/csteipp/) changed the edit policy from "[Custom Policy](/transactions/old/PHID-XACT-TASK-xlebjqeu4jnbkjs/)" to "All Users".[wctaiwan](/p/wctaiwan/) subscribed.[Dec 3 2014, 8:22 PM2014-12-03 20:22:35 (UTC+0)](#808374)[â€¢ Spage](/p/Spage/) added a comment.[Dec 5 2014, 3:57 AM2014-12-05 03:57:38 (UTC+0)](#820491)Comment Actions

[@csteipp](/p/csteipp/) is this still Open? FYI the fix is [gerrit 176160](https://gerrit.wikimedia.org/r/#/c/176160/).

[â€¢ csteipp](/p/csteipp/) closed this task as Resolved.[Dec 5 2014, 5:59 PM2014-12-05 17:59:42 (UTC+0)](#821702)[RandomDSdevel](/p/RandomDSdevel/) awarded a token.[Dec 14 2014, 9:40 PM2014-12-14 21:40:09 (UTC+0)](#846989)[â€¢ Spage](/p/Spage/) mentioned this in [T51193: Set $wgContentHandlerUseDB = true on all WMF wikis](/T51193).[Dec 15 2014, 10:52 PM2014-12-15 22:52:35 (UTC+0)](#849440)[Ricordisamoa](/p/Ricordisamoa/) subscribed.[Jan 12 2015, 3:19 PM2015-01-12 15:19:24 (UTC+0)](#970887)[He7d3r](/p/He7d3r/) mentioned this in [T73163: Cannot edit old revisions if the content model of those revisions are different from the page's current revision](/T73163).[Jan 23 2015, 12:02 PM2015-01-23 12:02:35 (UTC+0)](#990933)[â€¢ MZMcBride](/p/MZMcBride/) subscribed.[Mar 16 2015, 1:25 AM2015-03-16 01:25:11 (UTC+0)](#1120425)[wctaiwan](/p/wctaiwan/) mentioned this in [T92794: Remove 'editcontentmodel' user right and restriction on editing content models](/T92794).[Mar 16 2015, 2:08 AM2015-03-16 02:08:45 (UTC+0)](#1120445)[wctaiwan](/p/wctaiwan/) mentioned this in [T92795: Users without 'editcontentmodel' user right cannot create MassMessage delivery lists](/T92795).[Mar 16 2015, 4:18 AM2015-03-16 04:18:43 (UTC+0)](#1120543)[Legoktm](/p/Legoktm/) mentioned this in [T106177: Implement Gadget and Gadget definition namespaces plus their content models](/T106177).[Aug 16 2015, 8:36 PM2015-08-16 20:36:58 (UTC+0)](#1543637)[â€¢ csteipp](/p/csteipp/) added a project: [Vuln-XSS](/tag/vuln-xss/).[Aug 20 2015, 9:20 PM2015-08-20 21:20:47 (UTC+0)](#1558755)[gerritbot](/p/gerritbot/) subscribed.[Jan 25 2016, 8:10 AM2016-01-25 08:10:42 (UTC+0)](#1961120)Comment Actions

Change 196982 had a related patch set uploaded (by Legoktm):

Don't check content model in Title::isCssSubpage() and Title::isJsSubpage()

<https://gerrit.wikimedia.org/r/196982>

Restricted Application added a subscriber: [Luke081515](/p/Luke081515/).  Â· [View Herald Transcript](/herald/transcript/1140472/)[Jan 25 2016, 8:10 AM2016-01-25 08:10:43 (UTC+0)](#1961121)[gerritbot](/p/gerritbot/) added a project: [Patch-For-Review](/tag/patch-for-review/).[Jan 25 2016, 8:10 AM2016-01-25 08:10:43 (UTC+0)](#1961122)[â€¢ RobLa-WMF](/p/RobLa-WMF/) mentioned this in [T85847: Grant editcontentmodel right to all logged in users](/T85847).[Mar 8 2016, 6:46 PM2016-03-08 18:46:05 (UTC+0)](#2099973)[â€¢ MZMcBride](/p/MZMcBride/) added a comment.[Sep 10 2016, 8:47 PM2016-09-10 20:47:31 (UTC+0)](#2626072)Comment Actions
> In [T72901#752835](/T72901#752835), [@Jackmcbarn](/p/Jackmcbarn/) wrote:
>
> (In reply to Chris Steipp from comment #2)
>
> > On the vandalism side, this definitely needs a lot more testing before we
> >
> > enable $wgContentHandlerUseDB on more wikis. Rollback seems to work ok, but
> >
> > undo seems broken when undoing revisions that change the content type.
>
> I haven't looked at this in detail.

> In [T72901#753033](/T72901#753033), [@csteipp](/p/csteipp/) wrote:
>
> Robla initially flagged this for product review because of the broader effects of doing this. The major concerns he brought up were security (like this bug), that reverting them is non-trivial ("undo" throws an exception, bug 71163), and that the diff handling doesn't really have a way to indicate that the content model is changing.

In addition to [T73163](/T73163), there was [T145044](/T145044)/[T106195](/T106195).

> In the end, James F, Robla, and Daniel Kinzler, and I basically agreed that adding a right (which would be given to a relatively small number of accounts) mitigates most of the the current issues, allows the current plans for Flow to move forward, and let's us get into a position where we can safely publicly discuss the more complex issues.

Expanding the "changecontentmodel" user right to more users is currently being discussed at [T85847](/T85847).

[â€¢ MZMcBride](/p/MZMcBride/) added a comment.[Sep 10 2016, 8:54 PM2016-09-10 20:54:45 (UTC+0)](#2626104)Comment Actions
> In [T72901#2626072](/T72901#2626072), [@MZMcBride](/p/MZMcBride/) wrote:
>
> Expanding the "changecontentmodel" user right to more users is currently being discussed at [T85847](/T85847).

Err, the "editcontentmodel" user right. The Special page is named Special:ChangeContentModel. :-)

[Legoktm](/p/Legoktm/) added a comment.[Sep 11 2016, 5:18 AM2016-09-11 05:18:45 (UTC+0)](#2626355)Comment Actions
> In [T72901#753119](/T72901#753119), [@Anomie](/p/Anomie/) wrote:
>
> (In reply to Chris Steipp from comment #26)
>
> > I can't think of a way to exploit that unless some existing javascript tries
> >
> > to load a (non .js-named) page from the user's namespace and executed it as
> >
> > javascript. Or did you have anything else in mind?
>
> Just the annoyance of being able to shove pages into someone's userspace that can't be reverted or edited by anyone other than the user involved or admins.

I've filed this separately at [T145316: It is possible to create a different user's subpage with a JavaScript or CSS content model, so only that user or a sysop can edit or revert](/T145316).

[â€¢ chasemp](/p/chasemp/) added a project: [Security](/tag/security/).[Feb 10 2020, 10:59 PM2020-02-10 22:59:45 (UTC+0)](#5869857) Â· [â€¢ chasemp](/p/chasemp/) removed a project: [acl\*security](/tag/acl_security/).[Feb 20 2020, 8:18 PM2020-02-20 20:18:04 (UTC+0)](#5904864) Â· [Aklapper](/p/Aklapper/) removed subscribers: [Anomie](/p/Anomie/), [â€¢ RobLa-WMF](/p/RobLa-WMF/), [â€¢ Mattflaschen-WMF](/p/Mattflaschen-WMF/).[Oct 16 2020, 5:42 PM2020-10-16 17:42:39 (UTC+0)](#6555247) Â· [Log In to Comment](/login/?next=)Content licensed under Creative Commons Attribution-ShareAlike (CC BY-SA) 4.0 unless otherwise noted; code licensed under GNU General Public License (GPL) 2.0 or later and other open source licenses. By using this site, you agree to the Terms of Use, Privacy Policy, and Code of Conduct. Â· [Wikimedia Foundation](https://wikimediafoundation.org/) Â· [Privacy Policy](https://foundation.wikimedia.org/wiki/Special%3AMyLanguage/Policy%3ANon-wiki_privacy_policy) Â· [Code of Conduct](https://www.mediawiki.org/wiki/Special%3AMyLanguage/Code_of_Conduct) Â· [Terms of Use](https://foundation.wikimedia.org/wiki/Special%3AMyLanguage/Policy%3ATerms_of_Use/Phabricator) Â· [Disclaimer](https://foundation.wikimedia.org/wiki/Special%3AMyLanguage/Policy%3AGeneral_disclaimer) Â· [CC-BY-SA](https://creativecommons.org/licenses/by-sa/4.0/) Â· [GPL](https://www.gnu.org/licenses/old-licenses/gpl-2.0.html) Â· [Credits](https://www.mediawiki.org/wiki/Phabricator/Credits)
