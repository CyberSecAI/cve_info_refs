=== Content from www.openwall.com_0f82c980_20250125_160445.html ===


| [Openwall](/) * [Products](/)   + [Openwall GNU/\*/Linux   *server OS*](/Owl/)+ [Linux Kernel Runtime Guard](/lkrg/)+ [John the Ripper   *password cracker*](/john/)         - [Free & Open Source for any platform](/john/)- [in the cloud](/john/cloud/)- [Pro for Linux](/john/pro/linux/)- [Pro for macOS](/john/pro/macosx/)+ [Wordlists   *for password cracking*](/wordlists/)+ [passwdqc   *policy enforcement*](/passwdqc/)             - [Free & Open Source for Unix](/passwdqc/)- [Pro for Windows (Active Directory)](/passwdqc/windows/)+ [yescrypt   *KDF & password hashing*](/yescrypt/)+ [yespower   *Proof-of-Work (PoW)*](/yespower/)+ [crypt\_blowfish   *password hashing*](/crypt/)+ [phpass   *ditto in PHP*](/phpass/)+ [tcb   *better password shadowing*](/tcb/)+ [Pluggable Authentication Modules](/pam/)+ [scanlogd   *port scan detector*](/scanlogd/)+ [popa3d   *tiny POP3 daemon*](/popa3d/)+ [blists   *web interface to mailing lists*](/blists/)+ [msulogin   *single user mode login*](/msulogin/)+ [php\_mt\_seed   *mt\_rand() cracker*](/php_mt_seed/)* [Services](/services/)* Publications       + [Articles](/articles/)+ [Presentations](/presentations/)* Resources         + [Mailing lists](/lists/)+ [Community wiki](https://openwall.info/wiki/)+ [Source code repositories (GitHub)](https://github.com/openwall)+ [Source code repositories (CVSweb)](https://cvsweb.openwall.com)+ [File archive & mirrors](/mirrors/)+ [How to verify digital signatures](/signatures/)+ [OVE IDs](/ove/)* [What's new](/news) | |
| --- | --- |

| | [Follow @Openwall on Twitter for new release announcements and other news](https://twitter.com/openwall) | | --- | |
| --- | --- |

[[<prev]](../../../2015/12/31/8) [[next>]](2) [[thread-next>]](../../../2016/01/03/2) [[day]](.) [[month]](..) [[year]](../..) [[list]](../../..)
```

Message-ID: <n69hag$2if$1@ger.gmane.org>
Date: Sat, 2 Jan 2016 23:00:47 +0100
From: Damien Regad <dregad@...tisbt.org>
To: oss-security@...ts.openwall.com
Subject: CVE Request: MantisBT SOAP API can be used to disclose confidential
 settings

Greetings,

Please assign a CVE ID for the following issue.

Description:

Until now, MantisBT sensitive config options were blacklisted to prevent
their access via SOAP API (see config_is_private() function).

When a new config is added or an existing one is renamed, the black list
must be updated accordingly. If this is not or incorrectly done, the
config becomes available via SOAP API.

This was the case with the MantisBT master cryptographic salt
(crypto_master_salt): it was incorrectly spelt.

To fix the problem as well as avoid future occurences, we are switching
to a whitelist approach, i.e. listing all configs that *can* be accessed
via SOAP.

Any MantisBT installation with SOAP API enabled should be patched, and
immediately generate a new salt.

Affected versions:
 >= 1.3.0-beta.1

Fixed in versions:
1.3.0 (not yet released), possibly 1.3.0-rc.2 if we decide we need
another release candidate before that.

Patch:
See Github [1]

Credits:
The issue was discovered by Paul Richards [2] and fixed by Roland Becker
(MantisBT Developer).

References:
Further details available in our issue tracker [3]

Best regards,
D. Regad
MantisBT Developer
<http://www.mantisbt.org>

[1] <http://github.com/mantisbt/mantisbt/commit/7927c275>
[2] <https://sourceforge.net/p/mantisbt/mailman/message/32948048/>
[3] <https://mantisbt.org/bugs/view.php?id=20277>

```

[Powered by blists](https://www.openwall.com/blists/) - [more mailing lists](https://lists.openwall.net)

Please check out the
[Open Source Software Security Wiki](https://oss-security.openwall.org/wiki/), which is counterpart to this
[mailing list](https://oss-security.openwall.org/wiki/mailing-lists/oss-security).

Confused about [mailing lists](/lists/) and their use?
[Read about mailing lists on Wikipedia](https://en.wikipedia.org/wiki/Electronic_mailing_list)
and check out these
[guidelines on proper formatting of your messages](https://www.complang.tuwien.ac.at/anton/mail-news-errors.html).



=== Content from www.openwall.com_e8ef2b21_20250125_160446.html ===


| [Openwall](/) * [Products](/)   + [Openwall GNU/\*/Linux   *server OS*](/Owl/)+ [Linux Kernel Runtime Guard](/lkrg/)+ [John the Ripper   *password cracker*](/john/)         - [Free & Open Source for any platform](/john/)- [in the cloud](/john/cloud/)- [Pro for Linux](/john/pro/linux/)- [Pro for macOS](/john/pro/macosx/)+ [Wordlists   *for password cracking*](/wordlists/)+ [passwdqc   *policy enforcement*](/passwdqc/)             - [Free & Open Source for Unix](/passwdqc/)- [Pro for Windows (Active Directory)](/passwdqc/windows/)+ [yescrypt   *KDF & password hashing*](/yescrypt/)+ [yespower   *Proof-of-Work (PoW)*](/yespower/)+ [crypt\_blowfish   *password hashing*](/crypt/)+ [phpass   *ditto in PHP*](/phpass/)+ [tcb   *better password shadowing*](/tcb/)+ [Pluggable Authentication Modules](/pam/)+ [scanlogd   *port scan detector*](/scanlogd/)+ [popa3d   *tiny POP3 daemon*](/popa3d/)+ [blists   *web interface to mailing lists*](/blists/)+ [msulogin   *single user mode login*](/msulogin/)+ [php\_mt\_seed   *mt\_rand() cracker*](/php_mt_seed/)* [Services](/services/)* Publications       + [Articles](/articles/)+ [Presentations](/presentations/)* Resources         + [Mailing lists](/lists/)+ [Community wiki](https://openwall.info/wiki/)+ [Source code repositories (GitHub)](https://github.com/openwall)+ [Source code repositories (CVSweb)](https://cvsweb.openwall.com)+ [File archive & mirrors](/mirrors/)+ [How to verify digital signatures](/signatures/)+ [OVE IDs](/ove/)* [What's new](/news) | |
| --- | --- |

| | [Follow @Openwall on Twitter for new release announcements and other news](https://twitter.com/openwall) | | --- | |
| --- | --- |

[[<prev]](1) [[next>]](3) [[<thread-prev]](../../../2016/01/02/1) [[thread-next>]](../../../2016/01/04/5) [[day]](.) [[month]](..) [[year]](../..) [[list]](../../..)
```

Message-Id: <20160103170346.0AA4933213E@smtpvbsrv1.mitre.org>
Date: Sun,  3 Jan 2016 12:03:46 -0500 (EST)
From: cve-assign@...re.org
To: dregad@...tisbt.org
Cc: cve-assign@...re.org, oss-security@...ts.openwall.com
Subject: Re: CVE Request: MantisBT SOAP API can be used to disclose confidential settings

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA256

> This was the case with the MantisBT master cryptographic salt
> (crypto_master_salt): it was incorrectly spelt.
>
> Affected versions:
>  >= 1.3.0-beta.1
>
> Fixed in versions:
> 1.3.0 (not yet released), possibly 1.3.0-rc.2 if we decide we need
> another release candidate before that.

>> <http://sourceforge.net/p/mantisbt/mailman/message/32948048/>
>> 2014-10-19
>> - case 'master_crypto_salt':
>> + case 'crypto_master_salt':

In general, a vendor can choose to request a CVE ID for a
vulnerability in beta software. This is unusual and (in cases of many
other products) often not a good idea, but there is no absolute
restriction on having a CVE ID. In this case, the 1.3 development code
in question was apparently noted in 2014.

Use CVE-2014-9759 for the vulnerability caused by the
master_crypto_salt spelling.

There is no CVE ID for the general issue of "Implement a white list of
options ... This is a safer approach than the previous blacklist
method," which seems to be a pre-release design change, not
specifically a vulnerability fix on its own.

> Further details available in our issue tracker [3]
> [3] <https://mantisbt.org/bugs/view.php?id=20277>

It currently gives an "Access Denied." error.

- --
CVE assignment team, MITRE CVE Numbering Authority
M/S M300
202 Burlington Road, Bedford, MA 01730 USA
[ PGP key available through <http://cve.mitre.org/cve/request_id.html> ]
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1

iQIcBAEBCAAGBQJWiVOFAAoJEL54rhJi8gl58iIQALSkEnUs34DR9JM6DQUfTTS6
VePVAgUo25rpfQkqL7HpsuWEo/L4nYw7E9PCI7P0yHMmOH5O1uY1cucA5PEsukXK
FaPjLZU0GHtbSAG1ioaincMVJ8W+YidMJyUNGrxLRnL3W+bjE63HZLNNiswSuUFK
NTKrzOZtSHRDVRKbdvak3pVvKQ5MXPwM6BRYVZBK5UetaOkKLkQJMH3RjGkyl9AM
yhtIF3XEKNXrIoVtLRka9/OabS1FG9ULE6oL8jqA2S8jL0D0ABo8QOYC2rH3wR3Z
8CaJig5h8ximZIvA0Cg5xSiIQMhk3En7W3QSB1kyAAkrviz0H2f1XJenyifXMkM6
IfXw0d5k9KSglJxpxd/VYBmZhz7rCWwa/0f5vnSpL278u6Sxccfh36EdBmoASs4X
BAjdaEkGZJpoa+KGFKx7lGfSHMMvVGdM8j0ybaDEzruSL/0C8w4OZZxmE4Abbbu7
3Nt1Pmq7YDVWNA6RxXwxp8C32hpxMLhNjNYzsgEZ8lBB2Og3vjSydY2FAav0Zsb+
buyYkSqPqlnUJTMW0nYWnhXRfSOq0H1ndsdpAiSIvRKM28sDjIJnRyIe6QhN+h/u
bF4wu44H2pOqtT69k6wJ7kW/CznpxBdwGcC+jKZKAQT9dXszQdaBrCv5kOGpDRK1
v0DW5xesLDZMu/sbqrLk
=r4cR
-----END PGP SIGNATURE-----

```

[Powered by blists](https://www.openwall.com/blists/) - [more mailing lists](https://lists.openwall.net)

Please check out the
[Open Source Software Security Wiki](https://oss-security.openwall.org/wiki/), which is counterpart to this
[mailing list](https://oss-security.openwall.org/wiki/mailing-lists/oss-security).

Confused about [mailing lists](/lists/) and their use?
[Read about mailing lists on Wikipedia](https://en.wikipedia.org/wiki/Electronic_mailing_list)
and check out these
[guidelines on proper formatting of your messages](https://www.complang.tuwien.ac.at/anton/mail-news-errors.html).



=== Content from mantisbt.org_761b9035_20250125_160447.html ===

Toggle sidebar [MantisBT](/bugs//) Toggle user menu

* mantisbt

  + - [All Projects](/bugs/set_project.php?project_id=0)
    - [mantisbt](/bugs/set_project.php?project_id=1)
    - [Mylyn Connector](/bugs/set_project.php?project_id=20)
    - [Plugin - agileMantis](/bugs/set_project.php?project_id=25)
    - [Plugin - CsvImport](/bugs/set_project.php?project_id=11)
    - [Plugin - CustomerManagement](/bugs/set_project.php?project_id=21)
    - [Plugin - EmailReporting](/bugs/set_project.php?project_id=10)
    - [Plugin - FilterPageEdit](/bugs/set_project.php?project_id=15)
    - [Plugin - InlineColumnConfiguration](/bugs/set_project.php?project_id=14)
    - [Plugin - LinkedCustomFields](/bugs/set_project.php?project_id=16)
    - [Plugin - MantisTouchRedirect](/bugs/set_project.php?project_id=22)
    - [Plugin - RecurrCall](/bugs/set_project.php?project_id=6)
    - [Plugin - RelatedIssuesExport](/bugs/set_project.php?project_id=13)
    - [Plugin - Reminder](/bugs/set_project.php?project_id=7)
    - [Plugin - Tasks](/bugs/set_project.php?project_id=8)
    - [Plugin - Time Tracking](/bugs/set_project.php?project_id=18)
* anonymous
  + [RSS](https://mantisbt.org/bugs/issues_rss.php)
  + [Logout](/bugs/logout_page.php)

* [My View](/bugs/my_view_page.php)
* [View Issues](/bugs/view_all_bug_page.php)
* [Change Log](/bugs/changelog_page.php)
* [Roadmap](/bugs/roadmap_page.php)
* [Wiki](/bugs/wiki.php?type=project&id=1)
* [Repositories](/bugs/plugin.php?page=Source/index)

* Anonymous
[Login](/bugs/login_page.php?return=%2Fbugs%2Fview.php%3Fid%3D20277)
[Signup for a new account](/bugs/signup_page.php)

#### View Issue Details

[Wiki](wiki.php?id=20277)[Related Changesets](#changesets)[Jump to Notes](#bugnotes)

|  | | | | | |
| --- | --- | --- | --- | --- | --- |
| ID | Project | Category | View Status | Date Submitted | Last Update |
| --- | --- | --- | --- | --- | --- |
| 0020277 | mantisbt | security | public | 2015-11-16 15:48 | 2016-06-12 00:42 |
|  | | | | | |
|
| Reporter | [atrol](https://mantisbt.org/bugs/view_user_page.php?id=11111) | Assigned To | [atrol](https://mantisbt.org/bugs/view_user_page.php?id=11111) |  | |
| Priority | normal | Severity | major | Reproducibility | always |
| Status | closed | Resolution | fixed |  | |
| Product Version | 1.3.0-beta.1 |  | | | |
| Target Version | 1.3.0-rc.2 | Fixed in Version | 1.3.0-rc.2 |  | |
|  | | | | | |
|
| Summary | 0020277: CVE-2014-9759: SOAP API can be used to disclose confidential settings | | | | |
| Description | mc\_config\_get\_string can be used to disclose confidential settings | | | | |
| Tags | No tags attached. | | | | |
| Attached Files | [fix-20277.patch](file_download.php?file_id=6487&type=bug) (2,036 bytes)    ``` From 66e3da31089f51429dad402db5a49d97b4864367 Mon Sep 17 00:00:00 2001 From: Roland Becker <roland@atrol.de> Date: Mon, 16 Nov 2015 23:15:36 +0100 Subject: [PATCH] Add missing confidential options to function  config_is_private  Fixes #20277 Thanks @grangeway for pointing out master_crypto_salt vs. crypto_master_salt some while ago. ---  core/config_api.php | 13 ++++++++++++-  1 file changed, 12 insertions(+), 1 deletion(-)  diff --git a/core/config_api.php b/core/config_api.php index 8cace8c..20f3a2a 100644 --- a/core/config_api.php +++ b/core/config_api.php @@ -690,7 +690,12 @@ function config_is_private( $p_config_var ) {  		case 'database_name':  		case 'db_schema':  		case 'db_type': -		case 'master_crypto_salt': +		case 'db_table_prefix': +		case 'db_table_plugin_prefix': +		case 'db_table_suffix': +		case 'use_persistent_connections': +		case 'dsn': +		case 'crypto_master_salt':  		case 'smtp_host':  		case 'smtp_username':  		case 'smtp_password': @@ -702,9 +707,11 @@ function config_is_private( $p_config_var ) {  		case 'class_path':  		case 'library_path':  		case 'language_path': +		case 'config_path':  		case 'session_save_path':  		case 'session_handler':  		case 'session_validation': +		case 'form_security_validation':  		case 'global_settings':  		case 'system_font_folder':  		case 'phpMailer_method': @@ -716,9 +723,12 @@ function config_is_private( $p_config_var ) {  		case 'ldap_root_dn':  		case 'ldap_organization':  		case 'ldap_uid_field': +		case 'ldap_realname_field':  		case 'ldap_bind_dn':  		case 'ldap_bind_passwd':  		case 'use_ldap_email': +		case 'use_ldap_realname': +		case 'ldap_simulation_file_path':  		case 'ldap_protocol_version':  		case 'login_method':  		case 'cookie_path': @@ -732,6 +742,7 @@ function config_is_private( $p_config_var ) {  		case 'log_destination':  		case 'dot_tool':  		case 'neato_tool': +		case 'debug_email':  			return true;    		# Marked obsolete in 1.3.0dev - keep here to make sure they are not disclosed by soap api. --  2.4.9 (Apple Git-60)   ```   [fix-20277.patch](file_download.php?file_id=6487&type=bug) (2,036 bytes)     [config\_names.txt](file_download.php?file_id=6538&type=bug) (3,152 bytes)    ``` /**  * The following list of configuration options is used to check if it is  * allowed to query a specific configuration option by SOAP API  * @global array $g_public_config_names  */ $g_public_config_names = array( 	'allow_signup', 'max_failed_login_count', 	'notify_new_user_created_threshold_min',  	'signup_use_captcha', 'lost_password_feature', 	'max_lost_password_in_progress_count', 'antispam_max_event_count', 	'antispam_time_window_in_seconds', 'webmaster_email', 	'from_email', 'from_name', 'return_path_email', 	'enable_email_notification','notify_flags', 'email_receive_own', 	'validate_email','check_mx_record', 'allow_blank_email', 	'show_user_email_threshold', 'show_user_realname_threshold', 	'mail_priority', 'email_separator1','email_separator2', 	'email_padding_length', 'show_version', 'version_suffix', 	'copyright_statement', 'default_language','fallback_language', 	'window_title', 'webmaster_email','favicon_image', 'logo_image', 	'logo_url', 'enable_project_documentation','show_footer_menu', 	'show_project_menu_bar', 'show_assigned_names', 	'show_priority_text', 'priority_significant_threshold', 	'severity_significant_threshold', 'show_bug_project_links', 	'status_legend_position', 'status_percentage_legend', 	'filter_position', 'action_button_position','show_product_version', 	'show_version_dates_threshold', 'show_realname', 	'differentiate_duplicates', 'sort_by_last_name','show_avatar', 	'show_avatar_threshold', 'show_changelog_dates', 	'show_roadmap_dates', 'cookie_time_length', 	'allow_permanent_cookie', 'long_process_timeout', 	'short_date_format', 'normal_date_format', 	'complete_date_format', 'calendar_js_date_format', 	'calendar_date_format', 'default_timezone', 'news_enabled', 	'news_limit_method', 'news_view_limit','news_view_limit_days', 	'private_news_threshold', 'default_new_account_access_level', 	'default_project_view_status', 'default_bug_view_status', 	'default_bug_steps_to_reproduce', 'default_bug_additional_info', 	'default_bugnote_view_status', 'default_bug_resolution', 	'default_bug_severity', 'default_bug_priority', 	'default_bug_reproducibility', 'default_bug_projection', 	'default_bug_eta', 'default_bug_relationship_clone', 	'default_bug_relationship', 'default_category_for_moves', 	'default_limit_view', 'default_show_changed', 	'hide_status_default', 'show_sticky_issues', 	'min_refresh_delay', 'default_refresh_delay', 	'default_redirect_delay', 'default_bugnote_order', 	'default_email_on_new', 'default_email_on_assigned', 	'default_email_on_feedback', 'default_email_on_resolved', 	'default_email_on_closed', 'default_email_on_reopened', 	'default_email_on_bugnote', 'default_email_on_status', 	'default_email_on_priority', 'default_email_on_new_minimum_severity', 	'default_email_on_assigned_minimum_severity', 	'default_email_on_feedback_minimum_severity', 	'default_email_on_resolved_minimum_severity', 	'default_email_on_closed_minimum_severity', 	'default_email_on_reopened_minimum_severity', 	'default_email_on_bugnote_minimum_severity', 	'default_email_on_status_minimum_severity', 	'default_email_on_priority_minimum_severity', 	'default_email_bugnote_limit',  ); ```   [config\_names.txt](file_download.php?file_id=6538&type=bug) (3,152 bytes)     [fix-20277-2.patch](file_download.php?file_id=6539&type=bug) (14,130 bytes)    ``` From b858790ae3d1d17b4bfab46d29b3a3094360650e Mon Sep 17 00:00:00 2001 From: Roland Becker <roland@atrol.de> Date: Wed, 23 Dec 2015 20:32:10 +0100 Subject: [PATCH] Implement a white list of options that can be accessed via  SOAP API  Fixes #20277 ---  config_defaults_inc.php                       | 347 ++++++++++++++++++++++++++  core/config_api.php                           |  63 +----  docbook/Admin_Guide/en-US/config/settings.xml |   6 +  3 files changed, 356 insertions(+), 60 deletions(-)  diff --git a/config_defaults_inc.php b/config_defaults_inc.php index 780fd1f..62568ec 100644 --- a/config_defaults_inc.php +++ b/config_defaults_inc.php @@ -4265,6 +4265,353 @@ $g_global_settings = array(  	'cdn_enabled'  );   +/** + * The following list of configuration options is used to check if it is + * allowed to query a specific configuration option via SOAP API. + * @global array $g_public_config_names + */ +$g_public_config_names = array( +	'access_levels_enum_string', +	'action_button_position', +	'add_bugnote_threshold', +	'add_profile_threshold', +	'admin_site_threshold', +	'allow_account_delete', +	'allow_anonymous_login', +	'allow_blank_email', +	'allow_delete_own_attachments', +	'allow_download_own_attachments', +	'allow_file_upload', +	'allow_freetext_in_profile_fields', +	'allow_no_category', +	'allow_permanent_cookie', +	'allow_reporter_close', +	'allow_reporter_reopen', +	'allow_reporter_upload', +	'allow_signup', +	'allowed_files', +	'anonymous_account', +	'antispam_max_event_count', +	'antispam_time_window_in_seconds', +	'assign_sponsored_bugs_threshold', +	'auto_set_status_to_assigned', +	'backward_year_count', +	'bottom_include_page', +	'bug_assigned_status', +	'bug_closed_status_threshold', +	'bug_count_hyperlink_prefix', +	'bug_duplicate_resolution', +	'bug_feedback_status', +	'bug_link_tag', +	'bug_list_cookie', +	'bug_readonly_status_threshold', +	'bug_reminder_threshold', +	'bug_reopen_resolution', +	'bug_reopen_status', +	'bug_resolution_fixed_threshold', +	'bug_resolution_not_fixed_threshold', +	'bug_resolved_status_threshold', +	'bug_revision_drop_threshold', +	'bug_submit_status', +	'bugnote_link_tag', +	'bugnote_order', +	'bugnote_user_change_view_state_threshold', +	'bugnote_user_delete_threshold', +	'bugnote_user_edit_threshold', +	'calendar_date_format', +	'calendar_js_date_format', +	'cdn_enabled', +	'change_view_status_threshold', +	'check_mx_record', +	'complete_date_format', +	'compress_html', +	'cookie_prefix', +	'cookie_time_length', +	'copyright_statement', +	'create_permalink_threshold', +	'create_project_threshold', +	'create_short_url', +	'css_include_file', +	'css_rtl_include_file', +	'csv_add_bom', +	'csv_separator', +	'custom_field_edit_after_create', +	'custom_field_link_threshold', +	'custom_field_type_enum_string', +	'default_bug_additional_info', +	'default_bug_eta', +	'default_bug_priority', +	'default_bug_projection', +	'default_bug_relationship_clone', +	'default_bug_relationship', +	'default_bug_reproducibility', +	'default_bug_resolution', +	'default_bug_severity', +	'default_bug_steps_to_reproduce', +	'default_bug_view_status', +	'default_bugnote_order', +	'default_bugnote_view_status', +	'default_category_for_moves', +	'default_email_bugnote_limit', +	'default_email_on_assigned_minimum_severity', +	'default_email_on_assigned', +	'default_email_on_bugnote_minimum_severity', +	'default_email_on_bugnote', +	'default_email_on_closed_minimum_severity', +	'default_email_on_closed', +	'default_email_on_feedback_minimum_severity', +	'default_email_on_feedback', +	'default_email_on_new_minimum_severity', +	'default_email_on_new', +	'default_email_on_priority_minimum_severity', +	'default_email_on_priority', +	'default_email_on_reopened_minimum_severity', +	'default_email_on_reopened', +	'default_email_on_resolved_minimum_severity', +	'default_email_on_resolved', +	'default_email_on_status_minimum_severity', +	'default_email_on_status', +	'default_home_page', +	'default_language', +	'default_limit_view', +	'default_manage_tag_prefix', +	'default_manage_user_prefix', +	'default_new_account_access_level', +	'default_project_view_status', +	'default_redirect_delay', +	'default_refresh_delay', +	'default_reminder_view_status', +	'default_show_changed', +	'default_timezone', +	'delete_bug_threshold', +	'delete_bugnote_threshold', +	'delete_project_threshold', +	'development_team_threshold', +	'differentiate_duplicates', +	'disallowed_files', +	'display_bug_padding', +	'display_bugnote_padding', +	'display_project_padding', +	'download_attachments_threshold', +	'due_date_update_threshold', +	'due_date_view_threshold', +	'email_padding_length', +	'email_receive_own', +	'email_separator1', +	'email_separator2', +	'enable_email_notification', +	'enable_eta', +	'enable_product_build', +	'enable_profiles', +	'enable_project_documentation', +	'enable_projection', +	'enable_sponsorship', +	'eta_enum_string', +	'fallback_language', +	'favicon_image', +	'file_upload_max_num', +	'filter_by_custom_fields', +	'filter_custom_fields_per_row', +	'filter_position', +	'forward_year_count', +	'from_email', 'from_name', +	'handle_bug_threshold', +	'handle_sponsored_bugs_threshold', +	'hide_status_default', +	'history_default_visible', +	'history_order', +	'hr_size', +	'hr_width', +	'html_make_links', +	'html_valid_tags_single_line', +	'html_valid_tags', +	'inline_file_exts', +	'limit_reporters', +	'logo_image', +	'logo_url', +	'logout_cookie', +	'logout_redirect_page', +	'long_process_timeout', +	'lost_password_feature', +	'mail_priority', +	'manage_config_cookie', +	'manage_configuration_threshold', +	'manage_custom_fields_threshold', +	'manage_global_profile_threshold', +	'manage_news_threshold', +	'manage_plugin_threshold', +	'manage_project_threshold', +	'manage_site_threshold', +	'manage_user_threshold', +	'manage_users_cookie', +	'max_dropdown_length', +	'max_failed_login_count', +	'max_file_size', +	'max_lost_password_in_progress_count', +	'meta_include_file', +	'min_refresh_delay', +	'minimum_sponsorship_amount', +	'monitor_add_others_bug_threshold', +	'monitor_bug_threshold', +	'monitor_delete_others_bug_threshold', +	'move_bug_threshold', +	'my_view_boxes_fixed_position', +	'my_view_bug_count', +	'news_enabled', +	'news_limit_method', +	'news_view_limit_days', +	'news_view_limit', +	'normal_date_format', +	'notify_flags', +	'notify_new_user_created_threshold_min', +	'plugins_enabled', +	'preview_attachments_inline_max_size', +	'preview_max_height', +	'preview_max_width', +	'priority_enum_string', +	'priority_significant_threshold', +	'private_bug_threshold', +	'private_bugnote_threshold', +	'private_news_threshold', +	'private_project_threshold', +	'project_cookie', +	'project_status_enum_string', +	'project_user_threshold', +	'project_view_state_enum_string', +	'projection_enum_string', +	'reassign_on_feedback', +	'reauthentication_expiry', +	'reauthentication', +	'recently_visited_count', +	'relationship_graph_enable', +	'relationship_graph_fontname', +	'relationship_graph_fontsize', +	'relationship_graph_max_depth', +	'relationship_graph_orientation', +	'relationship_graph_view_on_click', +	'reminder_receive_threshold', +	'reminder_recipients_monitor_bug', +	'reopen_bug_threshold', +	'report_bug_threshold', +	'report_issues_for_unreleased_versions_threshold', +	'reporter_summary_limit', +	'reproducibility_enum_string', +	'resolution_enum_string', +	'return_path_email', +	'roadmap_update_threshold', +	'roadmap_view_threshold', +	'rss_enabled', +	'set_bug_sticky_threshold', +	'set_configuration_threshold', +	'set_view_status_threshold', +	'severity_enum_string', +	'severity_significant_threshold', +	'short_date_format', +	'show_assigned_names', +	'show_avatar_threshold', +	'show_avatar', +	'show_bug_project_links', +	'show_changelog_dates', +	'show_detailed_errors', +	'show_footer_menu', +	'show_log_threshold', +	'show_memory_usage', +	'show_monitor_list_threshold', +	'show_priority_text', +	'show_product_version', +	'show_project_menu_bar', +	'show_queries_count', +	'show_realname', +	'show_roadmap_dates', +	'show_sticky_issues', +	'show_timer', +	'show_user_email_threshold', +	'show_user_realname_threshold', +	'show_version_dates_threshold', +	'show_version', +	'signup_use_captcha', +	'sort_by_last_name', +	'sponsor_threshold', +	'sponsorship_currency', +	'sponsorship_enum_string', +	'status_enum_string', +	'status_legend_position', +	'status_percentage_legend', +	'stop_on_errors', +	'store_reminders', +	'stored_query_create_shared_threshold', +	'stored_query_create_threshold', +	'stored_query_use_threshold', +	'string_cookie', +	'subprojects_enabled', +	'subprojects_inherit_categories', +	'subprojects_inherit_versions', +	'summary_category_include_project', +	'tag_attach_threshold', +	'tag_create_threshold', +	'tag_detach_own_threshold', +	'tag_detach_threshold', +	'tag_edit_own_threshold', +	'tag_edit_threshold', +	'tag_separator', +	'tag_view_threshold', +	'time_tracking_edit_threshold', +	'time_tracking_enabled', +	'time_tracking_reporting_threshold', +	'time_tracking_stopwatch', +	'time_tracking_view_threshold', +	'time_tracking_with_billing', +	'time_tracking_without_note', +	'top_include_page', +	'update_bug_assign_threshold', +	'update_bug_status_threshold', +	'update_bug_threshold', +	'update_bugnote_threshold', +	'update_readonly_bug_threshold', +	'upload_bug_file_threshold', +	'upload_project_file_threshold', +	'use_dynamic_filters', +	'user_login_valid_regex', +	'validate_email', +	'version_suffix', +	'view_all_cookie', +	'view_attachments_threshold', +	'view_bug_threshold', +	'view_changelog_threshold', +	'view_configuration_threshold', +	'view_filters', +	'view_handler_threshold', +	'view_history_threshold', +	'view_proj_doc_threshold', +	'view_sponsorship_details_threshold', +	'view_sponsorship_total_threshold', +	'view_state_enum_string', +	'view_summary_threshold', +	'webmaster_email', +	'webmaster_email', +	'webmaster_email', +	'webmaster_email', +	'webmaster_email', +	'webservice_admin_access_level_threshold', +	'webservice_error_when_version_not_found', +	'webservice_eta_enum_default_when_not_found', +	'webservice_priority_enum_default_when_not_found', +	'webservice_projection_enum_default_when_not_found', +	'webservice_readonly_access_level_threshold', +	'webservice_readwrite_access_level_threshold', +	'webservice_resolution_enum_default_when_not_found', +	'webservice_severity_enum_default_when_not_found', +	'webservice_specify_reporter_on_add_access_level_threshold', +	'webservice_status_enum_default_when_not_found', +	'webservice_version_when_not_found', +	'wiki_enable', +	'wiki_engine_url', +	'wiki_engine', +	'wiki_root_namespace', +	'window_title', +	'wrap_in_preformatted_text' +); +  # Temporary variables should not remain defined in global scope  unset( $t_protocol, $t_host, $t_hosts, $t_port, $t_self, $t_path );   diff --git a/core/config_api.php b/core/config_api.php index 8cace8c..7b25293 100644 --- a/core/config_api.php +++ b/core/config_api.php @@ -677,71 +677,14 @@ function config_eval( $p_value, $p_global = false ) {  }    /** - * list of configuration variable which may expose web server details and should not be exposed to users or web services + * Check if a configuration variable should not be exposed to users or web services   *   * @param string $p_config_var Configuration option.   * @return boolean   */  function config_is_private( $p_config_var ) { -	switch( $p_config_var ) { -		case 'hostname': -		case 'db_username': -		case 'db_password': -		case 'database_name': -		case 'db_schema': -		case 'db_type': -		case 'master_crypto_salt': -		case 'smtp_host': -		case 'smtp_username': -		case 'smtp_password': -		case 'smtp_connection_mode': -		case 'smtp_port': -		case 'email_send_using_cronjob': -		case 'absolute_path': -		case 'core_path': -		case 'class_path': -		case 'library_path': -		case 'language_path': -		case 'session_save_path': -		case 'session_handler': -		case 'session_validation': -		case 'global_settings': -		case 'system_font_folder': -		case 'phpMailer_method': -		case 'attachments_file_permissions': -		case 'file_upload_method': -		case 'absolute_path_default_upload_folder': -		case 'ldap_server': -		case 'plugin_path': -		case 'ldap_root_dn': -		case 'ldap_organization': -		case 'ldap_uid_field': -		case 'ldap_bind_dn': -		case 'ldap_bind_passwd': -		case 'use_ldap_email': -		case 'ldap_protocol_version': -		case 'login_method': -		case 'cookie_path': -		case 'cookie_domain': -		case 'bottom_include_page': -		case 'top_include_page': -		case 'css_include_file': -		case 'css_rtl_include_file': -		case 'meta_include_file': -		case 'log_level': -		case 'log_destination': -		case 'dot_tool': -		case 'neato_tool': -			return true; - -		# Marked obsolete in 1.3.0dev - keep here to make sure they are not disclosed by soap api. -		# These can be removed once complete removal from config and db is enforced by upgrade process. -		case 'file_upload_ftp_server': -		case 'file_upload_ftp_user': -		case 'file_upload_ftp_pass': -			return true; -	} +	global $g_public_config_names;   -	return false; +	return !in_array( $p_config_var, $g_public_config_names, true );  }   diff --git a/docbook/Admin_Guide/en-US/config/settings.xml b/docbook/Admin_Guide/en-US/config/settings.xml index 066b0e3..548e8f8 100644 --- a/docbook/Admin_Guide/en-US/config/settings.xml +++ b/docbook/Admin_Guide/en-US/config/settings.xml @@ -12,5 +12,11 @@  				<para>This option contains the list of configuration options that are used to determine if it is allowed for a specific configuration option to be saved to or loaded from the database.  Configuration options that are in the list are considered global only and hence are only configurable via the config_inc.php file and defaulted by config_defaults_inc.php file.</para>  			</listitem>  		</varlistentry> +		<varlistentry> +			<term>$g_public_config_names</term> +			<listitem> +				<para>This option contains a list of configuration options that can be queried via SOAP API.</para> +			</listitem> +		</varlistentry>  	</variablelist>  </section> --  2.5.4 (Apple Git-61)   ```   [fix-20277-2.patch](file_download.php?file_id=6539&type=bug) (14,130 bytes)     [fix-20277-3.patch](file_download.php?file_id=6540&type=bug) (14,284 bytes)    ``` From 2962191af12908eefc5432b6362bdbc802951fdd Mon Sep 17 00:00:00 2001 From: Roland Becker <roland@atrol.de> Date: Wed, 23 Dec 2015 20:32:10 +0100 Subject: [PATCH] Implement a white list of options that can be accessed via  SOAP API  Fixes #20277 ---  config_defaults_inc.php                       | 346 +++++++++++++++++++++++++-  core/config_api.php                           |  63 +----  docbook/Admin_Guide/en-US/config/settings.xml |   6 +  3 files changed, 354 insertions(+), 61 deletions(-)  diff --git a/config_defaults_inc.php b/config_defaults_inc.php index 780fd1f..9be2cb6 100644 --- a/config_defaults_inc.php +++ b/config_defaults_inc.php @@ -4262,7 +4262,351 @@ $g_global_settings = array(  	'class_path','library_path', 'language_path', 'absolute_path_default_upload_folder',  	'ldap_simulation_file_path', 'plugin_path', 'bottom_include_page', 'top_include_page',  	'default_home_page', 'logout_redirect_page', 'manual_url', 'logo_url', 'wiki_engine_url', -	'cdn_enabled' +	'cdn_enabled', 'public_config_names' +); + +/** + * The following list of configuration options is used to check if it is + * allowed to query a specific configuration option via SOAP API. + * @global array $g_public_config_names + */ +$g_public_config_names = array( +	'access_levels_enum_string', +	'action_button_position', +	'add_bugnote_threshold', +	'add_profile_threshold', +	'admin_site_threshold', +	'allow_account_delete', +	'allow_anonymous_login', +	'allow_blank_email', +	'allow_delete_own_attachments', +	'allow_download_own_attachments', +	'allow_file_upload', +	'allow_freetext_in_profile_fields', +	'allow_no_category', +	'allow_permanent_cookie', +	'allow_reporter_close', +	'allow_reporter_reopen', +	'allow_reporter_upload', +	'allow_signup', +	'allowed_files', +	'anonymous_account', +	'antispam_max_event_count', +	'antispam_time_window_in_seconds', +	'assign_sponsored_bugs_threshold', +	'auto_set_status_to_assigned', +	'backward_year_count', +	'bottom_include_page', +	'bug_assigned_status', +	'bug_closed_status_threshold', +	'bug_count_hyperlink_prefix', +	'bug_duplicate_resolution', +	'bug_feedback_status', +	'bug_link_tag', +	'bug_list_cookie', +	'bug_readonly_status_threshold', +	'bug_reminder_threshold', +	'bug_reopen_resolution', +	'bug_reopen_status', +	'bug_resolution_fixed_threshold', +	'bug_resolution_not_fixed_threshold', +	'bug_resolved_status_threshold', +	'bug_revision_drop_threshold', +	'bug_submit_status', +	'bugnote_link_tag', +	'bugnote_order', +	'bugnote_user_change_view_state_threshold', +	'bugnote_user_delete_threshold', +	'bugnote_user_edit_threshold', +	'calendar_date_format', +	'calendar_js_date_format', +	'cdn_enabled', +	'change_view_status_threshold', +	'check_mx_record', +	'complete_date_format', +	'compress_html', +	'cookie_prefix', +	'cookie_time_length', +	'copyright_statement', +	'create_permalink_threshold', +	'create_project_threshold', +	'create_short_url', +	'css_include_file', +	'css_rtl_include_file', +	'csv_add_bom', +	'csv_separator', +	'custom_field_edit_after_create', +	'custom_field_link_threshold', +	'custom_field_type_enum_string', +	'default_bug_additional_info', +	'default_bug_eta', +	'default_bug_priority', +	'default_bug_projection', +	'default_bug_relationship_clone', +	'default_bug_relationship', +	'default_bug_reproducibility', +	'default_bug_resolution', +	'default_bug_severity', +	'default_bug_steps_to_reproduce', +	'default_bug_view_status', +	'default_bugnote_order', +	'default_bugnote_view_status', +	'default_category_for_moves', +	'default_email_bugnote_limit', +	'default_email_on_assigned_minimum_severity', +	'default_email_on_assigned', +	'default_email_on_bugnote_minimum_severity', +	'default_email_on_bugnote', +	'default_email_on_closed_minimum_severity', +	'default_email_on_closed', +	'default_email_on_feedback_minimum_severity', +	'default_email_on_feedback', +	'default_email_on_new_minimum_severity', +	'default_email_on_new', +	'default_email_on_priority_minimum_severity', +	'default_email_on_priority', +	'default_email_on_reopened_minimum_severity', +	'default_email_on_reopened', +	'default_email_on_resolved_minimum_severity', +	'default_email_on_resolved', +	'default_email_on_status_minimum_severity', +	'default_email_on_status', +	'default_home_page', +	'default_language', +	'default_limit_view', +	'default_manage_tag_prefix', +	'default_manage_user_prefix', +	'default_new_account_access_level', +	'default_project_view_status', +	'default_redirect_delay', +	'default_refresh_delay', +	'default_reminder_view_status', +	'default_show_changed', +	'default_timezone', +	'delete_bug_threshold', +	'delete_bugnote_threshold', +	'delete_project_threshold', +	'development_team_threshold', +	'differentiate_duplicates', +	'disallowed_files', +	'display_bug_padding', +	'display_bugnote_padding', +	'display_project_padding', +	'download_attachments_threshold', +	'due_date_update_threshold', +	'due_date_view_threshold', +	'email_padding_length', +	'email_receive_own', +	'email_separator1', +	'email_separator2', +	'enable_email_notification', +	'enable_eta', +	'enable_product_build', +	'enable_profiles', +	'enable_project_documentation', +	'enable_projection', +	'enable_sponsorship', +	'eta_enum_string', +	'fallback_language', +	'favicon_image', +	'file_upload_max_num', +	'filter_by_custom_fields', +	'filter_custom_fields_per_row', +	'filter_position', +	'forward_year_count', +	'from_email', +	'from_name', +	'handle_bug_threshold', +	'handle_sponsored_bugs_threshold', +	'hide_status_default', +	'history_default_visible', +	'history_order', +	'hr_size', +	'hr_width', +	'html_make_links', +	'html_valid_tags_single_line', +	'html_valid_tags', +	'inline_file_exts', +	'limit_reporters', +	'logo_image', +	'logo_url', +	'logout_cookie', +	'logout_redirect_page', +	'long_process_timeout', +	'lost_password_feature', +	'mail_priority', +	'manage_config_cookie', +	'manage_configuration_threshold', +	'manage_custom_fields_threshold', +	'manage_global_profile_threshold', +	'manage_news_threshold', +	'manage_plugin_threshold', +	'manage_project_threshold', +	'manage_site_threshold', +	'manage_user_threshold', +	'manage_users_cookie', +	'max_dropdown_length', +	'max_failed_login_count', +	'max_file_size', +	'max_lost_password_in_progress_count', +	'meta_include_file', +	'min_refresh_delay', +	'minimum_sponsorship_amount', +	'monitor_add_others_bug_threshold', +	'monitor_bug_threshold', +	'monitor_delete_others_bug_threshold', +	'move_bug_threshold', +	'my_view_boxes_fixed_position', +	'my_view_bug_count', +	'news_enabled', +	'news_limit_method', +	'news_view_limit_days', +	'news_view_limit', +	'normal_date_format', +	'notify_flags', +	'notify_new_user_created_threshold_min', +	'plugins_enabled', +	'preview_attachments_inline_max_size', +	'preview_max_height', +	'preview_max_width', +	'priority_enum_string', +	'priority_significant_threshold', +	'private_bug_threshold', +	'private_bugnote_threshold', +	'private_news_threshold', +	'private_project_threshold', +	'project_cookie', +	'project_status_enum_string', +	'project_user_threshold', +	'project_view_state_enum_string', +	'projection_enum_string', +	'reassign_on_feedback', +	'reauthentication_expiry', +	'reauthentication', +	'recently_visited_count', +	'relationship_graph_enable', +	'relationship_graph_fontname', +	'relationship_graph_fontsize', +	'relationship_graph_max_depth', +	'relationship_graph_orientation', +	'relationship_graph_view_on_click', +	'reminder_receive_threshold', +	'reminder_recipients_monitor_bug', +	'reopen_bug_threshold', +	'report_bug_threshold', +	'report_issues_for_unreleased_versions_threshold', +	'reporter_summary_limit', +	'reproducibility_enum_string', +	'resolution_enum_string', +	'return_path_email', +	'roadmap_update_threshold', +	'roadmap_view_threshold', +	'rss_enabled', +	'set_bug_sticky_threshold', +	'set_configuration_threshold', +	'set_view_status_threshold', +	'severity_enum_string', +	'severity_significant_threshold', +	'short_date_format', +	'show_assigned_names', +	'show_avatar_threshold', +	'show_avatar', +	'show_bug_project_links', +	'show_changelog_dates', +	'show_detailed_errors', +	'show_footer_menu', +	'show_log_threshold', +	'show_memory_usage', +	'show_monitor_list_threshold', +	'show_priority_text', +	'show_product_version', +	'show_project_menu_bar', +	'show_queries_count', +	'show_realname', +	'show_roadmap_dates', +	'show_sticky_issues', +	'show_timer', +	'show_user_email_threshold', +	'show_user_realname_threshold', +	'show_version_dates_threshold', +	'show_version', +	'signup_use_captcha', +	'sort_by_last_name', +	'sponsor_threshold', +	'sponsorship_currency', +	'sponsorship_enum_string', +	'status_enum_string', +	'status_legend_position', +	'status_percentage_legend', +	'stop_on_errors', +	'store_reminders', +	'stored_query_create_shared_threshold', +	'stored_query_create_threshold', +	'stored_query_use_threshold', +	'string_cookie', +	'subprojects_enabled', +	'subprojects_inherit_categories', +	'subprojects_inherit_versions', +	'summary_category_include_project', +	'tag_attach_threshold', +	'tag_create_threshold', +	'tag_detach_own_threshold', +	'tag_detach_threshold', +	'tag_edit_own_threshold', +	'tag_edit_threshold', +	'tag_separator', +	'tag_view_threshold', +	'time_tracking_edit_threshold', +	'time_tracking_enabled', +	'time_tracking_reporting_threshold', +	'time_tracking_stopwatch', +	'time_tracking_view_threshold', +	'time_tracking_with_billing', +	'time_tracking_without_note', +	'top_include_page', +	'update_bug_assign_threshold', +	'update_bug_status_threshold', +	'update_bug_threshold', +	'update_bugnote_threshold', +	'update_readonly_bug_threshold', +	'upload_bug_file_threshold', +	'upload_project_file_threshold', +	'use_dynamic_filters', +	'user_login_valid_regex', +	'validate_email', +	'version_suffix', +	'view_all_cookie', +	'view_attachments_threshold', +	'view_bug_threshold', +	'view_changelog_threshold', +	'view_configuration_threshold', +	'view_filters', +	'view_handler_threshold', +	'view_history_threshold', +	'view_proj_doc_threshold', +	'view_sponsorship_details_threshold', +	'view_sponsorship_total_threshold', +	'view_state_enum_string', +	'view_summary_threshold', +	'webmaster_email', +	'webservice_admin_access_level_threshold', +	'webservice_error_when_version_not_found', +	'webservice_eta_enum_default_when_not_found', +	'webservice_priority_enum_default_when_not_found', +	'webservice_projection_enum_default_when_not_found', +	'webservice_readonly_access_level_threshold', +	'webservice_readwrite_access_level_threshold', +	'webservice_resolution_enum_default_when_not_found', +	'webservice_severity_enum_default_when_not_found', +	'webservice_specify_reporter_on_add_access_level_threshold', +	'webservice_status_enum_default_when_not_found', +	'webservice_version_when_not_found', +	'wiki_enable', +	'wiki_engine_url', +	'wiki_engine', +	'wiki_root_namespace', +	'window_title', +	'wrap_in_preformatted_text'  );    # Temporary variables should not remain defined in global scope diff --git a/core/config_api.php b/core/config_api.php index 8cace8c..7b25293 100644 --- a/core/config_api.php +++ b/core/config_api.php @@ -677,71 +677,14 @@ function config_eval( $p_value, $p_global = false ) {  }    /** - * list of configuration variable which may expose web server details and should not be exposed to users or web services + * Check if a configuration variable should not be exposed to users or web services   *   * @param string $p_config_var Configuration option.   * @return boolean   */  function config_is_private( $p_config_var ) { -	switch( $p_config_var ) { -		case 'hostname': -		case 'db_username': -		case 'db_password': -		case 'database_name': -		case 'db_schema': -		case 'db_type': -		case 'master_crypto_salt': -		case 'smtp_host': -		case 'smtp_username': -		case 'smtp_password': -		case 'smtp_connection_mode': -		case 'smtp_port': -		case 'email_send_using_cronjob': -		case 'absolute_path': -		case 'core_path': -		case 'class_path': -		case 'library_path': -		case 'language_path': -		case 'session_save_path': -		case 'session_handler': -		case 'session_validation': -		case 'global_settings': -		case 'system_font_folder': -		case 'phpMailer_method': -		case 'attachments_file_permissions': -		case 'file_upload_method': -		case 'absolute_path_default_upload_folder': -		case 'ldap_server': -		case 'plugin_path': -		case 'ldap_root_dn': -		case 'ldap_organization': -		case 'ldap_uid_field': -		case 'ldap_bind_dn': -		case 'ldap_bind_passwd': -		case 'use_ldap_email': -		case 'ldap_protocol_version': -		case 'login_method': -		case 'cookie_path': -		case 'cookie_domain': -		case 'bottom_include_page': -		case 'top_include_page': -		case 'css_include_file': -		case 'css_rtl_include_file': -		case 'meta_include_file': -		case 'log_level': -		case 'log_destination': -		case 'dot_tool': -		case 'neato_tool': -			return true; - -		# Marked obsolete in 1.3.0dev - keep here to make sure they are not disclosed by soap api. -		# These can be removed once complete removal from config and db is enforced by upgrade process. -		case 'file_upload_ftp_server': -		case 'file_upload_ftp_user': -		case 'file_upload_ftp_pass': -			return true; -	} +	global $g_public_config_names;   -	return false; +	return !in_array( $p_config_var, $g_public_config_names, true );  }   diff --git a/docbook/Admin_Guide/en-US/config/settings.xml b/docbook/Admin_Guide/en-US/config/settings.xml index 066b0e3..548e8f8 100644 --- a/docbook/Admin_Guide/en-US/config/settings.xml +++ b/docbook/Admin_Guide/en-US/config/settings.xml @@ -12,5 +12,11 @@  				<para>This option contains the list of configuration options that are used to determine if it is allowed for a specific configuration option to be saved to or loaded from the database.  Configuration options that are in the list are considered global only and hence are only configurable via the config_inc.php file and defaulted by config_defaults_inc.php file.</para>  			</listitem>  		</varlistentry> +		<varlistentry> +			<term>$g_public_config_names</term> +			<listitem> +				<para>This option contains a list of configuration options that can be queried via SOAP API.</para> +			</listitem> +		</varlistentry>  	</variablelist>  </section> --  2.5.4 (Apple Git-61)   ```   [fix-20277-3.patch](file_download.php?file_id=6540&type=bug) (14,284 bytes) | | | | |
|  | | | | | |
|

#### Relationships

[Relationship Graph](bug_relationship_graph.php?bug_id=20277&graph=relation)[Dependency Graph](bug_relationship_graph.php?bug_id=20277&graph=dependency)

| related to | [0020468](view.php?id=20468) | new |  | Create API to let plugins add configs to public\_config\_names |
| --- | --- | --- | --- | --- |

#### Activities

| [atrol](https://mantisbt.org/bugs/view_user_page.php?id=11111)   [atrol](https://mantisbt.org/bugs/view_user_page.php?id=11111)  2015-11-16 17:29  developer    [~0051847](view.php?id=20277#c51847 "Direct link to note") | **Reminder sent to: [dregad](https://mantisbt.org/bugs/view_user_page.php?id=17784), [rombert](https://mantisbt.org/bugs/view_user_page.php?id=10368), [vboctor](https://mantisbt.org/bugs/view_user_page.php?id=3081)** Please have a look at the attached patch. Especially the missing crypto\_master\_salt is a major issues IMO. All instances that are running the current version in a production environment should change crypto\_master\_salt in config\_inc.php. |
| --- | --- |
|  | |
| [dregad](https://mantisbt.org/bugs/view_user_page.php?id=17784)   [dregad](https://mantisbt.org/bugs/view_user_page.php?id=17784)  2015-11-17 05:34  developer    [~0051852](view.php?id=20277#c51852 "Direct link to note") | Thanks atrol. I agree this is a major issue.  I will request a CVE for this; do you have more information about grangeway's involvement ? This is to ensure proper credit is given for the finding. |
|  | |
| [rombert](https://mantisbt.org/bugs/view_user_page.php?id=10368)   [rombert](https://mantisbt.org/bugs/view_user_page.php?id=10368)  2015-11-17 05:37  reporter    [~0051853](view.php?id=20277#c51853 "Direct link to note") | Patch looks good to me, thanks for preparing it. |
|  | |
| [atrol](https://mantisbt.org/bugs/view_user_page.php?id=11111)   [atrol](https://mantisbt.org/bugs/view_user_page.php?id=11111)  2015-11-17 05:59  developer    [~0051854](view.php?id=20277#c51854 "Direct link to note")  Last edited: 2015-11-17 08:15 | do you have more information about grangeway's involvement ? Will search later today if I stored the email he sent to us a while ago where he mentioned the issue. I put it on my Mantis todo list when receiving it, maybe I deleted the email after that. IIRC he had some of the changes also in one of the PR's that he closed.  [Edit] Found it: <http://sourceforge.net/p/mantisbt/mailman/message/32948048/> |
|  | |
| [atrol](https://mantisbt.org/bugs/view_user_page.php?id=11111)   [atrol](https://mantisbt.org/bugs/view_user_page.php?id=11111)  2015-11-17 06:04  developer    [~0051855](view.php?id=20277#c51855 "Direct link to note") | I will request a CVE for this Do we need this for beta versions? My main driver to enter and fix this issue was, that we might see a RC quite soon. |
|  | |
| [dregad](https://mantisbt.org/bugs/view_user_page.php?id=17784)   [dregad](https://mantisbt.org/bugs/view_user_page.php?id=17784)  2015-11-17 09:21  developer    [~0051856](view.php?id=20277#c51856 "Direct link to note") | I will request a CVE for this Do we need this for beta versions?  It's not a question of the type of version (alpha/beta/rc), the CVE is needed beause the version has been published.  Thanks for the link. I also found it by going through Paul's PRs on Github, he was not fixing as many issues as you did in the attached patch. |
|  | |
| [vboctor](https://mantisbt.org/bugs/view_user_page.php?id=3081)   [vboctor](https://mantisbt.org/bugs/view_user_page.php?id=3081)  2015-11-18 04:07  manager    [~0051868](view.php?id=20277#c51868 "Direct link to note") | The patch looks good. Looks like you have reviewed the full list of config options and added the ones that don't make sense.  Do we need a simpler patch to associate with the security advisory? One that hides the ones that are security risks? For example 'use\_ldap\_realname' is not a security risk. Not a big deal, but we don't want to scope to be bigger than the minimum change.  I wonder if we should make a change that makes it less likely to have such issues in the future. For example:   * Have config\_is\_public() that elects the configs that should be visible via soap API, rather than the other way around. * Have a show\_config\_via\_api('xyz) that is called in config\_defaults\_inc.php after defining config options to act as a reminder.   Not necessarily great options, but I wondering if there is a good decoration / annotation that we can use in context to make such slips less likely to happen in the future. |
|  | |
| [atrol](https://mantisbt.org/bugs/view_user_page.php?id=11111)   [atrol](https://mantisbt.org/bugs/view_user_page.php?id=11111)  2015-11-18 04:43  developer    [~0051870](view.php?id=20277#c51870 "Direct link to note") | For example 'use\_ldap\_realname' is not a security risk.  I think it is. It's a common practice to harden systems in a way that you don't unfold information which is not needed for users, but can help attackers to find a weakness. e.g. don't provide an easy way to search the web for Mantis instances that are using LDAP by using the SOAP API and checking for use\_ldap\_realname I would primary try to attack such installations as there is [0012957](/bugs/view.php?id=12957 "[assigned] Password stored md5-unsalted in database when LDAP authentication is enabled") |
|  | |
| [vboctor](https://mantisbt.org/bugs/view_user_page.php?id=3081)   [vboctor](https://mantisbt.org/bugs/view_user_page.php?id=3081)  2015-11-18 12:19  manager    [~0051875](view.php?id=20277#c51875 "Direct link to note")  Last edited: 2015-11-18 12:19 | Makes sense. However, we should note in the advisory that accessing this method required a registered user with access webservice\_readonly\_access\_level\_threshold (VIEWER by default). Or anonymous access being enabled which provides the same.  I wonder if the same API can be used to pull any global variable with $g\_ prefix. For example, the global variables in the core APIs.  I was thinking that it would be nice to consider moving our configs to json in the future. With that, I wonder if we can have a config definition that has all the meta-data about a config option, e.g. name, type, visibility, regexp/options (for config UI - though ideally we have native UI for our configs). |
|  | |
| [atrol](https://mantisbt.org/bugs/view_user_page.php?id=11111)   [atrol](https://mantisbt.org/bugs/view_user_page.php?id=11111)  2015-12-02 16:23  developer    [~0052000](view.php?id=20277#c52000 "Direct link to note") | I wonder if the same API can be used to pull any global variable with $g\_ prefix. It can be used for that.  E.g. you can try to get contents of $g\_cache\_config The good thing is, that you will get a SOAP fault for most of the affected variables: Error Type: SYSTEM NOTICE, Error Description: Array to string conversion  The bad thing is, that someone might implement the array to string conversion for useful functionality without being aware that he will introduce a security issue. |
|  | |
| [vboctoradmin](https://mantisbt.org/bugs/view_user_page.php?id=36771)   [vboctoradmin](https://mantisbt.org/bugs/view_user_page.php?id=36771)  2015-12-02 21:45  administrator    [~0052002](view.php?id=20277#c52002 "Direct link to note") | That is why [0020277:0051868](/bugs/view.php?id=20277#c51868 "0020277: [2015-11-18 04:07] vboctor") may be a good option where we have to explicitly make config options public rather than the other way around. |
|  | |
| [vboctor](https://mantisbt.org/bugs/view_user_page.php?id=3081)   [vboctor](https://mantisbt.org/bugs/view_user_page.php?id=3081)  2015-12-22 03:29  manager    [~0052162](view.php?id=20277#c52162 "Direct link to note") | What's the plan with this? Are we going to go with the white listing approach by defining config\_is\_public() ? [@atrol](https://mantisbt.org/bugs/view_user_page.php?id=11111) what's your plan for this? |
|  | |
| [atrol](https://mantisbt.org/bugs/view_user_page.php?id=11111)   [atrol](https://mantisbt.org/bugs/view_user_page.php?id=11111)  2015-12-22 18:39  developer    [~0052167](view.php?id=20277#c52167 "Direct link to note")  Last edited: 2015-12-22 18:41 | I will provide another patch based on a white list approach. Seems it will be a quite large list. |
|  | |
| [atrol](https://mantisbt.org/bugs/view_user_page.php?id=11111)   [atrol](https://mantisbt.org/bugs/view_user_page.php?id=11111)  2015-12-23 04:12  developer    [~0052170](view.php?id=20277#c52170 "Direct link to note") | **Reminder sent to: [dregad](https://mantisbt.org/bugs/view_user_page.php?id=17784), [rombert](https://mantisbt.org/bugs/view_user_page.php?id=10368), [vboctor](https://mantisbt.org/bugs/view_user_page.php?id=3081)** I would like to be sure that I am on the right track. I attached config\_names.txt which contains about the half of the options for the white list. Is this what we want? |
|  | |
| [vboctor](https://mantisbt.org/bugs/view_user_page.php?id=3081)   [vboctor](https://mantisbt.org/bugs/view_user_page.php?id=3081)  2015-12-23 04:36  manager    [~0052171](view.php?id=20277#c52171 "Direct link to note") | [@atrol](https://mantisbt.org/bugs/view_user_page.php?id=11111) that is what I had in mind. I wonder if it would be better to sort the config options alphabetically, one per line. |
|  | |
| [dregad](https://mantisbt.org/bugs/view_user_page.php?id=17784)   [dregad](https://mantisbt.org/bugs/view_user_page.php?id=17784)  2015-12-23 05:59  developer    [~0052172](view.php?id=20277#c52172 "Direct link to note") | Seems it will be a quite large list.  That's the price to pay for having so many different configs...  better to sort the config options alphabetically, one per line  +1, would make maintenance easier  For PHPDoc block, add a short description on first line ending with a '.', e.g. 'List of config options available via Webservice.' |
|  | |
| [atrol](https://mantisbt.org/bugs/view_user_page.php?id=11111)   [atrol](https://mantisbt.org/bugs/view_user_page.php?id=11111)  2015-12-23 14:41  developer    [~0052175](view.php?id=20277#c52175 "Direct link to note") | Attached a new patch. |
|  | |
| [vboctor](https://mantisbt.org/bugs/view_user_page.php?id=3081)   [vboctor](https://mantisbt.org/bugs/view_user_page.php?id=3081)  2015-12-23 15:01  manager    [~0052177](view.php?id=20277#c52177 "Direct link to note") | Looks good. Few comments:   * 'webmaster\_email' is repeated multiple times. * 'from\_email' and 'from\_name' on the same line. * Was is possible before to retrieve plugin configs? * Why do we treat configs like $g\_public\_config\_names and $g\_global\_settings as config options? They are really part of the code and not configs. Hence, we shouldn't include them in docbook for settings and not in config\_defaults\_inc.php. We don't have to fix global settings as part of this, but I wouldn't add public config names as a config setting. |
|  | |
| [atrol](https://mantisbt.org/bugs/view_user_page.php?id=11111)   [atrol](https://mantisbt.org/bugs/view_user_page.php?id=11111)  2015-12-23 15:58  developer    [~0052178](view.php?id=20277#c52178 "Direct link to note")  Last edited: 2015-12-23 16:04 | * Was is possible before to retrieve plugin configs?   It was possible.   Do we need an API for plugins to extend the white list? * Why do we treat configs like $g\_public\_config\_names and $g\_global\_settings as config options?   Why not? It allows administrators to add/remove options  BTW, I forgot to add $g\_public\_config\_names to $g\_global\_settings  Attached new patch. |
|  | |
| [rombert](https://mantisbt.org/bugs/view_user_page.php?id=10368)   [rombert](https://mantisbt.org/bugs/view_user_page.php?id=10368)  2015-12-26 16:53  reporter    [~0052180](view.php?id=20277#c52180 "Direct link to note") | Overall I think this looks good. At some point I worried that it will be easy to overlook adding new 'public' configuration options to the whitelist as we create them, but I don't think doing something more elaborate is worth it. |
|  | |
| [vboctor](https://mantisbt.org/bugs/view_user_page.php?id=3081)   [vboctor](https://mantisbt.org/bugs/view_user_page.php?id=3081)  2015-12-26 20:08  manager    [~0052183](view.php?id=20277#c52183 "Direct link to note") | Looks good. I wonder if we should call the config option 'config\_names\_public' or 'config\_public', so that if we add others in the future, they will be grouped together. e.g. config\_names\_sensitive or config\_names\_private or whatever. Don't have a scenario right now, but I have started using this convention sometime ago.  Let's go ahead with the next steps on this. |
|  | |
| [atrol](https://mantisbt.org/bugs/view_user_page.php?id=11111)   [atrol](https://mantisbt.org/bugs/view_user_page.php?id=11111)  2015-12-27 06:55  developer    [~0052190](view.php?id=20277#c52190 "Direct link to note") | [0020277:0051852](/bugs/view.php?id=20277#c51852 "0020277: [2015-11-17 05:34] dregad") [@dregad](https://mantisbt.org/bugs/view_user_page.php?id=17784), did you request a CVE? |
|  | |
| [dregad](https://mantisbt.org/bugs/view_user_page.php?id=17784)   [dregad](https://mantisbt.org/bugs/view_user_page.php?id=17784)  2015-12-28 04:30  developer    [~0052192](view.php?id=20277#c52192 "Direct link to note") | Not yet, I usually don't until a patch is available, since announcing it on the ML is effectively making the vulnerability public.  If you think 'fix-20277-3.patch' is the final one, I'll go ahead and get the CVE. Let me know. |
|  | |
| [atrol](https://mantisbt.org/bugs/view_user_page.php?id=11111)   [atrol](https://mantisbt.org/bugs/view_user_page.php?id=11111)  2015-12-28 08:43  developer    [~0052195](view.php?id=20277#c52195 "Direct link to note")  Last edited: 2015-12-28 08:44 | e.g. config\_names\_sensitive or config\_names\_private or whatever I would prefer to have some properties for each of our config options instead of such kind of lists.  So I think 'fix-20277-3.patch' is the final one from my side.  Not sure if this is worth delaying the fix [0020277:0052178](/bugs/view.php?id=20277#c52178 "0020277: [2015-12-23 16:04] atrol")  * Was is possible before to retrieve plugin configs?   It was possible.   Do we need an API for plugins to extend the white list?  Keep in mind that I will have limited internet access until next Monday. It would be fine if you could enhance the commit message and push to master. |
|  | |
| [dregad](https://mantisbt.org/bugs/view_user_page.php?id=17784)   [dregad](https://mantisbt.org/bugs/view_user_page.php?id=17784)  2016-01-02 09:38  developer    [~0052232](view.php?id=20277#c52232 "Direct link to note")  Last edited: 2016-01-02 09:40 | For the CVE: does the issue only affect 1.3.x ? I mean, crypto\_master\_salt obviously does not exist in 1.2, but the switch from blacklist to whitelist potentially changes the available configs.  Should this be backported ?  Do we need an API for plugins to extend the white list?  I think we do, but that can be treated as a separate issue (see [0020468](/bugs/view.php?id=20468 "[new] Create API to let plugins add configs to public_config_names")) |
|  | |
| [atrol](https://mantisbt.org/bugs/view_user_page.php?id=11111)   [atrol](https://mantisbt.org/bugs/view_user_page.php?id=11111)  2016-01-02 13:21  developer    [~0052234](view.php?id=20277#c52234 "Direct link to note") | Should this be backported ?  I am not aware that there is any option in 1.2 accessible via SOAP that decreases security the same degree like crypto\_master\_salt did in 1.3.  crypto\_master\_salt has been introduced to improve security by design, but was complete useless before the patch. Hiding the other options (see my very first patch for the list) is rather something like security by obscurity.  So I think that a backport to 1.2 is not bad but is not needed. |
|  | |
| [dregad](https://mantisbt.org/bugs/view_user_page.php?id=17784)   [dregad](https://mantisbt.org/bugs/view_user_page.php?id=17784)  2016-01-02 14:33  developer    [~0052235](view.php?id=20277#c52235 "Direct link to note") | Reopened to track the CVE request process; will reassign to you once it's done |
|  | |
| [dregad](https://mantisbt.org/bugs/view_user_page.php?id=17784)   [dregad](https://mantisbt.org/bugs/view_user_page.php?id=17784)  2016-01-02 17:05  developer    [~0052237](view.php?id=20277#c52237 "Direct link to note") | CVE request <http://permalink.gmane.org/gmane.comp.security.oss.general/18479> |
|  | |
| [dregad](https://mantisbt.org/bugs/view_user_page.php?id=17784)   [dregad](https://mantisbt.org/bugs/view_user_page.php?id=17784)  2016-01-04 11:07  developer    [~0052241](view.php?id=20277#c52241 "Direct link to note") | CVE assignment [http://thread.gmane.org/gmane.comp.security.oss.general/18479/focus=18483](http://thread.gmane.org/gmane.comp.security.oss.general/18479/focus%3D18483) |
|  | |

#### Related Changesets

| MantisBT: master 7927c275  2015-12-23 09:32  [atrol](https://mantisbt.org/bugs/view_user_page.php?id=11111)  Committer: [dregad](https://mantisbt.org/bugs/view_user_page.php?id=17784) [Details](/bugs/plugin.php?page=Source/view&id=21562) [Diff](https://github.com/mantisbt/mantisbt/commit/7927c2756b4f1d61d18b44bb2bcdc7c2ec3d678b) | Implement a white list of options accessible via SOAP API | | Affected Issues[0020277](/bugs/view.php?id=20277 "[closed] CVE-2014-9759: SOAP API can be used to disclose confidential settings") |
| --- | --- | --- | --- |
| mod - config\_defaults\_inc.php | | [Diff](https://github.com/mantisbt/mantisbt/commit/7927c2756b4f1d61d18b44bb2bcdc7c2ec3d678b) [File](https://github.com/mantisbt/mantisbt/blob/7927c2756b4f1d61d18b44bb2bcdc7c2ec3d678b/config_defaults_inc.php) |
| mod - core/config\_api.php | | [Diff](https://github.com/mantisbt/mantisbt/commit/7927c2756b4f1d61d18b44bb2bcdc7c2ec3d678b) [File](https://github.com/mantisbt/mantisbt/blob/7927c2756b4f1d61d18b44bb2bcdc7c2ec3d678b/core/config_api.php) |
| mod - docbook/Admin\_Guide/en-US/config/settings.xml | | [Diff](https://github.com/mantisbt/mantisbt/commit/7927c2756b4f1d61d18b44bb2bcdc7c2ec3d678b) [File](https://github.com/mantisbt/mantisbt/blob/7927c2756b4f1d61d18b44bb2bcdc7c2ec3d678b/docbook/Admin_Guide/en-US/config/settings.xml) |

**Powered by [MantisBT 2.28.0-dev-master-f0c253853](https://www.mantisbt.org "bug tracking software")**

Copyright © 2000 - 2025 MantisBT Team
Contact administrator for assistance

[![Powered by Mantis Bug Tracker: a free and open source web based bug tracking system.](/bugs/images/mantis_logo.png)](https://www.mantisbt.org "Mantis Bug Tracker: a free and open source web based bug tracking system.")

 Page execution time: 0.2154 seconds



=== Content from github.com_9299ffa3_20250126_100830.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fmantisbt%2Fmantisbt%2Fcommit%2F7927c2756b4f1d61d18b44bb)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fmantisbt%2Fmantisbt%2Fcommit%2F7927c2756b4f1d61d18b44bb)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=mantisbt%2Fmantisbt)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[mantisbt](/mantisbt)
/
**[mantisbt](/mantisbt/mantisbt)**
Public

* [Notifications](/login?return_to=%2Fmantisbt%2Fmantisbt) You must be signed in to change notification settings
* [Fork
  728](/login?return_to=%2Fmantisbt%2Fmantisbt)
* [Star
   1.7k](/login?return_to=%2Fmantisbt%2Fmantisbt)

* [Code](/mantisbt/mantisbt)
* [Pull requests
  80](/mantisbt/mantisbt/pulls)
* [Actions](/mantisbt/mantisbt/actions)
* [Security](/mantisbt/mantisbt/security)
* [Insights](/mantisbt/mantisbt/pulse)

Additional navigation options

* [Code](/mantisbt/mantisbt)
* [Pull requests](/mantisbt/mantisbt/pulls)
* [Actions](/mantisbt/mantisbt/actions)
* [Security](/mantisbt/mantisbt/security)
* [Insights](/mantisbt/mantisbt/pulse)

## Commit

[Permalink](/mantisbt/mantisbt/commit/7927c2756b4f1d61d18b44bb2bcdc7c2ec3d678b)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

Implement a white list of options accessible via SOAP API

[Browse files](/mantisbt/mantisbt/tree/7927c2756b4f1d61d18b44bb2bcdc7c2ec3d678b)
Browse the repository at this point in the history

```
This is a safer approach than the previous blacklist method, which
could potentially allow confidential information disclosure if a config
were added or renamed without a matching change in config_is_private()
function.

Fixes #20277

Original commit modified: comments and commit message wording.

Signed-off-by: Damien Regad <dregad@mantisbt.org>
```

* Loading branch information

[![@atrol](https://avatars.githubusercontent.com/u/319317?s=40&v=4)](/atrol) [![@dregad](https://avatars.githubusercontent.com/u/449891?s=40&v=4)](/dregad)

[atrol](/mantisbt/mantisbt/commits?author=atrol "View all commits by atrol")
authored and
[dregad](/mantisbt/mantisbt/commits?author=dregad "View all commits by dregad")
committed
Jan 2, 2016

1 parent
[1dbaeaf](/mantisbt/mantisbt/commit/1dbaeaf301e092b60b2b89b05817e34530c0c2ab)

commit 7927c27

 Show file tree

 Hide file tree

Showing
**3 changed files**
with
**357 additions**
and
**62 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* config\_defaults\_inc.php
  [config\_defaults\_inc.php](#diff-e0260ebe7f7f5577fe56696994618dcb3096a6e3c43f05623dd0894dac6b7a7c)
* core

  + core/config\_api.php
    [config\_api.php](#diff-c462dea21e85fc80c608e0db1b46d651d82d00160a60795a9bcc22d026aa7de8)
* docbook/Admin\_Guide/en-US/config

  + docbook/Admin\_Guide/en-US/config/settings.xml
    [settings.xml](#diff-23c82afa47c1e830d6b8a5bc20203faf71f85435678daee9dfd4e6607bb59e50)

## There are no files selected for viewing

347 changes: 346 additions & 1 deletion

347
[config\_defaults\_inc.php](#diff-e0260ebe7f7f5577fe56696994618dcb3096a6e3c43f05623dd0894dac6b7a7c "config_defaults_inc.php")

Show comments

[View file](/mantisbt/mantisbt/blob/7927c2756b4f1d61d18b44bb2bcdc7c2ec3d678b/config_defaults_inc.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -4262,7 +4262,352 @@ |
|  |  | 'class\_path','library\_path', 'language\_path', 'absolute\_path\_default\_upload\_folder', |
|  |  | 'ldap\_simulation\_file\_path', 'plugin\_path', 'bottom\_include\_page', 'top\_include\_page', |
|  |  | 'default\_home\_page', 'logout\_redirect\_page', 'manual\_url', 'logo\_url', 'wiki\_engine\_url', |
|  |  | 'cdn\_enabled' |
|  |  | 'cdn\_enabled', 'public\_config\_names' |
|  |  | ); |
|  |  |  |
|  |  | /\*\* |
|  |  | \* List of config options available via SOAP API. |
|  |  | \* The following list of configuration options is used to check if it is |
|  |  | \* allowed to query a specific configuration option via SOAP API. |
|  |  | \* @global array $g\_public\_config\_names |
|  |  | \*/ |
|  |  | $g\_public\_config\_names = array( |
|  |  | 'access\_levels\_enum\_string', |
|  |  | 'action\_button\_position', |
|  |  | 'add\_bugnote\_threshold', |
|  |  | 'add\_profile\_threshold', |
|  |  | 'admin\_site\_threshold', |
|  |  | 'allow\_account\_delete', |
|  |  | 'allow\_anonymous\_login', |
|  |  | 'allow\_blank\_email', |
|  |  | 'allow\_delete\_own\_attachments', |
|  |  | 'allow\_download\_own\_attachments', |
|  |  | 'allow\_file\_upload', |
|  |  | 'allow\_freetext\_in\_profile\_fields', |
|  |  | 'allow\_no\_category', |
|  |  | 'allow\_permanent\_cookie', |
|  |  | 'allow\_reporter\_close', |
|  |  | 'allow\_reporter\_reopen', |
|  |  | 'allow\_reporter\_upload', |
|  |  | 'allow\_signup', |
|  |  | 'allowed\_files', |
|  |  | 'anonymous\_account', |
|  |  | 'antispam\_max\_event\_count', |
|  |  | 'antispam\_time\_window\_in\_seconds', |
|  |  | 'assign\_sponsored\_bugs\_threshold', |
|  |  | 'auto\_set\_status\_to\_assigned', |
|  |  | 'backward\_year\_count', |
|  |  | 'bottom\_include\_page', |
|  |  | 'bug\_assigned\_status', |
|  |  | 'bug\_closed\_status\_threshold', |
|  |  | 'bug\_count\_hyperlink\_prefix', |
|  |  | 'bug\_duplicate\_resolution', |
|  |  | 'bug\_feedback\_status', |
|  |  | 'bug\_link\_tag', |
|  |  | 'bug\_list\_cookie', |
|  |  | 'bug\_readonly\_status\_threshold', |
|  |  | 'bug\_reminder\_threshold', |
|  |  | 'bug\_reopen\_resolution', |
|  |  | 'bug\_reopen\_status', |
|  |  | 'bug\_resolution\_fixed\_threshold', |
|  |  | 'bug\_resolution\_not\_fixed\_threshold', |
|  |  | 'bug\_resolved\_status\_threshold', |
|  |  | 'bug\_revision\_drop\_threshold', |
|  |  | 'bug\_submit\_status', |
|  |  | 'bugnote\_link\_tag', |
|  |  | 'bugnote\_order', |
|  |  | 'bugnote\_user\_change\_view\_state\_threshold', |
|  |  | 'bugnote\_user\_delete\_threshold', |
|  |  | 'bugnote\_user\_edit\_threshold', |
|  |  | 'calendar\_date\_format', |
|  |  | 'calendar\_js\_date\_format', |
|  |  | 'cdn\_enabled', |
|  |  | 'change\_view\_status\_threshold', |
|  |  | 'check\_mx\_record', |
|  |  | 'complete\_date\_format', |
|  |  | 'compress\_html', |
|  |  | 'cookie\_prefix', |
|  |  | 'cookie\_time\_length', |
|  |  | 'copyright\_statement', |
|  |  | 'create\_permalink\_threshold', |
|  |  | 'create\_project\_threshold', |
|  |  | 'create\_short\_url', |
|  |  | 'css\_include\_file', |
|  |  | 'css\_rtl\_include\_file', |
|  |  | 'csv\_add\_bom', |
|  |  | 'csv\_separator', |
|  |  | 'custom\_field\_edit\_after\_create', |
|  |  | 'custom\_field\_link\_threshold', |
|  |  | 'custom\_field\_type\_enum\_string', |
|  |  | 'default\_bug\_additional\_info', |
|  |  | 'default\_bug\_eta', |
|  |  | 'default\_bug\_priority', |
|  |  | 'default\_bug\_projection', |
|  |  | 'default\_bug\_relationship\_clone', |
|  |  | 'default\_bug\_relationship', |
|  |  | 'default\_bug\_reproducibility', |
|  |  | 'default\_bug\_resolution', |
|  |  | 'default\_bug\_severity', |
|  |  | 'default\_bug\_steps\_to\_reproduce', |
|  |  | 'default\_bug\_view\_status', |
|  |  | 'default\_bugnote\_order', |
|  |  | 'default\_bugnote\_view\_status', |
|  |  | 'default\_category\_for\_moves', |
|  |  | 'default\_email\_bugnote\_limit', |
|  |  | 'default\_email\_on\_assigned\_minimum\_severity', |
|  |  | 'default\_email\_on\_assigned', |
|  |  | 'default\_email\_on\_bugnote\_minimum\_severity', |
|  |  | 'default\_email\_on\_bugnote', |
|  |  | 'default\_email\_on\_closed\_minimum\_severity', |
|  |  | 'default\_email\_on\_closed', |
|  |  | 'default\_email\_on\_feedback\_minimum\_severity', |
|  |  | 'default\_email\_on\_feedback', |
|  |  | 'default\_email\_on\_new\_minimum\_severity', |
|  |  | 'default\_email\_on\_new', |
|  |  | 'default\_email\_on\_priority\_minimum\_severity', |
|  |  | 'default\_email\_on\_priority', |
|  |  | 'default\_email\_on\_reopened\_minimum\_severity', |
|  |  | 'default\_email\_on\_reopened', |
|  |  | 'default\_email\_on\_resolved\_minimum\_severity', |
|  |  | 'default\_email\_on\_resolved', |
|  |  | 'default\_email\_on\_status\_minimum\_severity', |
|  |  | 'default\_email\_on\_status', |
|  |  | 'default\_home\_page', |
|  |  | 'default\_language', |
|  |  | 'default\_limit\_view', |
|  |  | 'default\_manage\_tag\_prefix', |
|  |  | 'default\_manage\_user\_prefix', |
|  |  | 'default\_new\_account\_access\_level', |
|  |  | 'default\_project\_view\_status', |
|  |  | 'default\_redirect\_delay', |
|  |  | 'default\_refresh\_delay', |
|  |  | 'default\_reminder\_view\_status', |
|  |  | 'default\_show\_changed', |
|  |  | 'default\_timezone', |
|  |  | 'delete\_bug\_threshold', |
|  |  | 'delete\_bugnote\_threshold', |
|  |  | 'delete\_project\_threshold', |
|  |  | 'development\_team\_threshold', |
|  |  | 'differentiate\_duplicates', |
|  |  | 'disallowed\_files', |
|  |  | 'display\_bug\_padding', |
|  |  | 'display\_bugnote\_padding', |
|  |  | 'display\_project\_padding', |
|  |  | 'download\_attachments\_threshold', |
|  |  | 'due\_date\_update\_threshold', |
|  |  | 'due\_date\_view\_threshold', |
|  |  | 'email\_padding\_length', |
|  |  | 'email\_receive\_own', |
|  |  | 'email\_separator1', |
|  |  | 'email\_separator2', |
|  |  | 'enable\_email\_notification', |
|  |  | 'enable\_eta', |
|  |  | 'enable\_product\_build', |
|  |  | 'enable\_profiles', |
|  |  | 'enable\_project\_documentation', |
|  |  | 'enable\_projection', |
|  |  | 'enable\_sponsorship', |
|  |  | 'eta\_enum\_string', |
|  |  | 'fallback\_language', |
|  |  | 'favicon\_image', |
|  |  | 'file\_upload\_max\_num', |
|  |  | 'filter\_by\_custom\_fields', |
|  |  | 'filter\_custom\_fields\_per\_row', |
|  |  | 'filter\_position', |
|  |  | 'forward\_year\_count', |
|  |  | 'from\_email', |
|  |  | 'from\_name', |
|  |  | 'handle\_bug\_threshold', |
|  |  | 'handle\_sponsored\_bugs\_threshold', |
|  |  | 'hide\_status\_default', |
|  |  | 'history\_default\_visible', |
|  |  | 'history\_order', |
|  |  | 'hr\_size', |
|  |  | 'hr\_width', |
|  |  | 'html\_make\_links', |
|  |  | 'html\_valid\_tags\_single\_line', |
|  |  | 'html\_valid\_tags', |
|  |  | 'inline\_file\_exts', |
|  |  | 'limit\_reporters', |
|  |  | 'logo\_image', |
|  |  | 'logo\_url', |
|  |  | 'logout\_cookie', |
|  |  | 'logout\_redirect\_page', |
|  |  | 'long\_process\_timeout', |
|  |  | 'lost\_password\_feature', |
|  |  | 'mail\_priority', |
|  |  | 'manage\_config\_cookie', |
|  |  | 'manage\_configuration\_threshold', |
|  |  | 'manage\_custom\_fields\_threshold', |
|  |  | 'manage\_global\_profile\_threshold', |
|  |  | 'manage\_news\_threshold', |
|  |  | 'manage\_plugin\_threshold', |
|  |  | 'manage\_project\_threshold', |
|  |  | 'manage\_site\_threshold', |
|  |  | 'manage\_user\_threshold', |
|  |  | 'manage\_users\_cookie', |
|  |  | 'max\_dropdown\_length', |
|  |  | 'max\_failed\_login\_count', |
|  |  | 'max\_file\_size', |
|  |  | 'max\_lost\_password\_in\_progress\_count', |
|  |  | 'meta\_include\_file', |
|  |  | 'min\_refresh\_delay', |
|  |  | 'minimum\_sponsorship\_amount', |
|  |  | 'monitor\_add\_others\_bug\_threshold', |
|  |  | 'monitor\_bug\_threshold', |
|  |  | 'monitor\_delete\_others\_bug\_threshold', |
|  |  | 'move\_bug\_threshold', |
|  |  | 'my\_view\_boxes\_fixed\_position', |
|  |  | 'my\_view\_bug\_count', |
|  |  | 'news\_enabled', |
|  |  | 'news\_limit\_method', |
|  |  | 'news\_view\_limit\_days', |
|  |  | 'news\_view\_limit', |
|  |  | 'normal\_date\_format', |
|  |  | 'notify\_flags', |
|  |  | 'notify\_new\_user\_created\_threshold\_min', |
|  |  | 'plugins\_enabled', |
|  |  | 'preview\_attachments\_inline\_max\_size', |
|  |  | 'preview\_max\_height', |
|  |  | 'preview\_max\_width', |
|  |  | 'priority\_enum\_string', |
|  |  | 'priority\_significant\_threshold', |
|  |  | 'private\_bug\_threshold', |
|  |  | 'private\_bugnote\_threshold', |
|  |  | 'private\_news\_threshold', |
|  |  | 'private\_project\_threshold', |
|  |  | 'project\_cookie', |
|  |  | 'project\_status\_enum\_string', |
|  |  | 'project\_user\_threshold', |
|  |  | 'project\_view\_state\_enum\_string', |
|  |  | 'projection\_enum\_string', |
|  |  | 'reassign\_on\_feedback', |
|  |  | 'reauthentication\_expiry', |
|  |  | 'reauthentication', |
|  |  | 'recently\_visited\_count', |
|  |  | 'relationship\_graph\_enable', |
|  |  | 'relationship\_graph\_fontname', |
|  |  | 'relationship\_graph\_fontsize', |
|  |  | 'relationship\_graph\_max\_depth', |
|  |  | 'relationship\_graph\_orientation', |
|  |  | 'relationship\_graph\_view\_on\_click', |
|  |  | 'reminder\_receive\_threshold', |
|  |  | 'reminder\_recipients\_monitor\_bug', |
|  |  | 'reopen\_bug\_threshold', |
|  |  | 'report\_bug\_threshold', |
|  |  | 'report\_issues\_for\_unreleased\_versions\_threshold', |
|  |  | 'reporter\_summary\_limit', |
|  |  | 'reproducibility\_enum\_string', |
|  |  | 'resolution\_enum\_string', |
|  |  | 'return\_path\_email', |
|  |  | 'roadmap\_update\_threshold', |
|  |  | 'roadmap\_view\_threshold', |
|  |  | 'rss\_enabled', |
|  |  | 'set\_bug\_sticky\_threshold', |
|  |  | 'set\_configuration\_threshold', |
|  |  | 'set\_view\_status\_threshold', |
|  |  | 'severity\_enum\_string', |
|  |  | 'severity\_significant\_threshold', |
|  |  | 'short\_date\_format', |
|  |  | 'show\_assigned\_names', |
|  |  | 'show\_avatar\_threshold', |
|  |  | 'show\_avatar', |
|  |  | 'show\_bug\_project\_links', |
|  |  | 'show\_changelog\_dates', |
|  |  | 'show\_detailed\_errors', |
|  |  | 'show\_footer\_menu', |
|  |  | 'show\_log\_threshold', |
|  |  | 'show\_memory\_usage', |
|  |  | 'show\_monitor\_list\_threshold', |
|  |  | 'show\_priority\_text', |
|  |  | 'show\_product\_version', |
|  |  | 'show\_project\_menu\_bar', |
|  |  | 'show\_queries\_count', |
|  |  | 'show\_realname', |
|  |  | 'show\_roadmap\_dates', |
|  |  | 'show\_sticky\_issues', |
|  |  | 'show\_timer', |
|  |  | 'show\_user\_email\_threshold', |
|  |  | 'show\_user\_realname\_threshold', |
|  |  | 'show\_version\_dates\_threshold', |
|  |  | 'show\_version', |
|  |  | 'signup\_use\_captcha', |
|  |  | 'sort\_by\_last\_name', |
|  |  | 'sponsor\_threshold', |
|  |  | 'sponsorship\_currency', |
|  |  | 'sponsorship\_enum\_string', |
|  |  | 'status\_enum\_string', |
|  |  | 'status\_legend\_position', |
|  |  | 'status\_percentage\_legend', |
|  |  | 'stop\_on\_errors', |
|  |  | 'store\_reminders', |
|  |  | 'stored\_query\_create\_shared\_threshold', |
|  |  | 'stored\_query\_create\_threshold', |
|  |  | 'stored\_query\_use\_threshold', |
|  |  | 'string\_cookie', |
|  |  | 'subprojects\_enabled', |
|  |  | 'subprojects\_inherit\_categories', |
|  |  | 'subprojects\_inherit\_versions', |
|  |  | 'summary\_category\_include\_project', |
|  |  | 'tag\_attach\_threshold', |
|  |  | 'tag\_create\_threshold', |
|  |  | 'tag\_detach\_own\_threshold', |
|  |  | 'tag\_detach\_threshold', |
|  |  | 'tag\_edit\_own\_threshold', |
|  |  | 'tag\_edit\_threshold', |
|  |  | 'tag\_separator', |
|  |  | 'tag\_view\_threshold', |
|  |  | 'time\_tracking\_edit\_threshold', |
|  |  | 'time\_tracking\_enabled', |
|  |  | 'time\_tracking\_reporting\_threshold', |
|  |  | 'time\_tracking\_stopwatch', |
|  |  | 'time\_tracking\_view\_threshold', |
|  |  | 'time\_tracking\_with\_billing', |
|  |  | 'time\_tracking\_without\_note', |
|  |  | 'top\_include\_page', |
|  |  | 'update\_bug\_assign\_threshold', |
|  |  | 'update\_bug\_status\_threshold', |
|  |  | 'update\_bug\_threshold', |
|  |  | 'update\_bugnote\_threshold', |
|  |  | 'update\_readonly\_bug\_threshold', |
|  |  | 'upload\_bug\_file\_threshold', |
|  |  | 'upload\_project\_file\_threshold', |
|  |  | 'use\_dynamic\_filters', |
|  |  | 'user\_login\_valid\_regex', |
|  |  | 'validate\_email', |
|  |  | 'version\_suffix', |
|  |  | 'view\_all\_cookie', |
|  |  | 'view\_attachments\_threshold', |
|  |  | 'view\_bug\_threshold', |
|  |  | 'view\_changelog\_threshold', |
|  |  | 'view\_configuration\_threshold', |
|  |  | 'view\_filters', |
|  |  | 'view\_handler\_threshold', |
|  |  | 'view\_history\_threshold', |
|  |  | 'view\_proj\_doc\_threshold', |
|  |  | 'view\_sponsorship\_details\_threshold', |
|  |  | 'view\_sponsorship\_total\_threshold', |
|  |  | 'view\_state\_enum\_string', |
|  |  | 'view\_summary\_threshold', |
|  |  | 'webmaster\_email', |
|  |  | 'webservice\_admin\_access\_level\_threshold', |
|  |  | 'webservice\_error\_when\_version\_not\_found', |
|  |  | 'webservice\_eta\_enum\_default\_when\_not\_found', |
|  |  | 'webservice\_priority\_enum\_default\_when\_not\_found', |
|  |  | 'webservice\_projection\_enum\_default\_when\_not\_found', |
|  |  | 'webservice\_readonly\_access\_level\_threshold', |
|  |  | 'webservice\_readwrite\_access\_level\_threshold', |
|  |  | 'webservice\_resolution\_enum\_default\_when\_not\_found', |
|  |  | 'webservice\_severity\_enum\_default\_when\_not\_found', |
|  |  | 'webservice\_specify\_reporter\_on\_add\_access\_level\_threshold', |
|  |  | 'webservice\_status\_enum\_default\_when\_not\_found', |
|  |  | 'webservice\_version\_when\_not\_found', |
|  |  | 'wiki\_enable', |
|  |  | 'wiki\_engine\_url', |
|  |  | 'wiki\_engine', |
|  |  | 'wiki\_root\_namespace', |
|  |  | 'window\_title', |
|  |  | 'wrap\_in\_preformatted\_text' |
|  |  | ); |
|  |  |  |
|  |  | # Temporary variables should not remain defined in global scope |
| Expand Down | |  |

 Loading

Oops, something went wrong.
 Retry

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `7927c27`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fmantisbt%2Fmantisbt%2Fcommit%2F7927c2756b4f1d61d18b44bb) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


