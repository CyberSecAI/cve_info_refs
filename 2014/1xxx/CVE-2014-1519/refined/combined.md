=== Content from www.mozilla.org_baa62d17_20250125_092450.html ===


## Help us improve your Mozilla experience

In addition to Cookies necessary for this site to function, we’d like your permission to set some additional Cookies to better understand your browsing needs and improve your experience. Rest assured — we value your privacy.

Accept All Additional Cookies

Reject All Additional Cookies

[Cookie settings](/en-US/privacy/websites/cookie-settings/)

Menu
[![Mozilla](https://www.mozilla.org/media/img/logos/m24/lockup-black.f2ddba3f0724.svg)](/en-US/)

* [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
  Firefox browsers](/en-US/firefox/)
  Close Firefox browsers menu
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for Desktop](/en-US/firefox/new/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for iOS](/en-US/firefox/browsers/mobile/ios/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for Android](/en-US/firefox/browsers/mobile/android/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/focus/logo.aac3e33175cb.svg)
    ## Firefox Focus](/en-US/firefox/browsers/mobile/focus/)
  + [## Firefox blog](https://blog.mozilla.org/firefox/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=firefox)
* [Products](/en-US/products/)
  Close Products menu
  + [![](https://www.mozilla.org/media/protocol/img/logos/mozilla/vpn/logo.c648f487bfb8.svg)
    ## Mozilla VPN](/en-US/products/vpn/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/monitor/logo.d97e5516f9e6.svg)
    ## Mozilla Monitor](https://monitor.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/relay/logo-white.d42a8b52e44c.svg)
    ## Firefox Relay](https://relay.firefox.com/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/protocol/img/logos/pocket/logo.17446bc33a5d.svg)
    ## Pocket](https://getpocket.com/firefox_learnmore/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/nav/icons/icon-mdn-plus.f54475f980ab.svg)
    ## MDN Plus](https://developer.mozilla.org/plus?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/logos/fakespot/logo-blue.3973b8fe9631.svg)
    ## Fakespot](https://fakespot.com/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/logos/thunderbird/logo-thunderbird.121e9c0fed45.svg)
    ## Thunderbird](https://www.thunderbird.net/)

  [All products](/en-US/products/)
* [About us](/en-US/about/)
  Close About us menu

  Our Mission

  + [## About Mozilla](/en-US/about/)
  + [## The Mozilla Manifesto](/en-US/about/manifesto/)
  + [## Get Involved](/en-US/contribute/)
  + [## Innovation Projects](https://future.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Blog](https://blog.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)

  Our Work

  + [## Mozilla Foundation](https://foundation.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla.ai](https://www.mozilla.ai/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla Ventures](https://mozilla.vc/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla Advertising](/en-US/advertising/)

## Menu

* Mozilla Security

## [Mozilla Security](/en-US/security/)

* [Advisories](/en-US/security/advisories/)
* [Known Vulnerabilities](/en-US/security/known-vulnerabilities/)
* [Mozilla Security Blog](https://blog.mozilla.com/security/)
* [Security Bug Bounty](/en-US/security/bug-bounty/)
* [Third-party Injection Policy](/en-US/security/third-party-software-injection/)

## [Client Bug Bounty](/en-US/security/client-bug-bounty/)

* [Frequently Asked Questions](/en-US/security/bug-bounty/faq/)
* [Hall of Fame](/en-US/security/bug-bounty/hall-of-fame/)

## [Web Bug Bounty](/en-US/security/web-bug-bounty/)

* [Eligible Websites](/en-US/security/bug-bounty/web-eligible-sites/)
* [Frequently Asked Questions](/en-US/security/bug-bounty/faq-webapp/)
* [Hall of Fame](/en-US/security/bug-bounty/web-hall-of-fame/)

# Mozilla Foundation Security Advisory 2014-34

## Miscellaneous memory safety hazards (rv:29.0 / rv:24.5)

Announced
April 29, 2014
Reporter
Mozilla Developers
Impact
Critical
Products
Firefox, Firefox ESR, SeaMonkey, Thunderbird
Fixed in

* Firefox 29
* Firefox ESR 24.5
* SeaMonkey 2.26
* Thunderbird 24.5

### Description

Mozilla developers and community identified identified and fixed several
memory safety bugs in the browser engine used in Firefox and other Mozilla-based
products. Some of these bugs showed evidence of memory corruption under certain
circumstances, and we presume that with enough effort at least some of these
could be exploited to run arbitrary code.

In general these flaws cannot be exploited through email in the
Thunderbird and Seamonkey products because scripting is disabled, but are
potentially a risk in browser or browser-like contexts.

### References

### References

Bobby Holley, Carsten Book, Christoph Diehl, Gary Kwong, Jan de Mooij, Jesse
Ruderman, Nathan Froyd, and Christian Holler reported memory safety problems and
crashes that affect Firefox ESR 24.4 and Firefox 28.

* [Memory safety bugs fixed in Firefox ESR 24.5 and Firefox 29.0](https://bugzilla.mozilla.org/buglist.cgi?bug_id=986843,944353,966630,952022,986678,980537,991471,993546,992968) ([CVE-2014-1518](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-1518))

Carsten Book, Christian Holler, Gary Kwong, John Schoenick, Karl Tomlinson,
Vladimir Vukicevic, and Jan de Mooij reported memory safety problems and crashes
that affect Firefox 28.

* [Memory safety bugs fixed in Firefox 29.0](https://bugzilla.mozilla.org/buglist.cgi?bug_id=946658,953104,996883,986864,977955,990794,919592,995607) ([CVE-2014-1519](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-1519))

## Company

* [Leadership](/about/leadership/)
* [Press Center](https://blog.mozilla.org/category/mozilla/news/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=company)
* [Careers](/en-US/careers/)
* [Contact](/en-US/contact/)

## Support

* [Product Help](https://support.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)
* [File a Bug](https://bugzilla.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)
* [Localize Mozilla](https://pontoon.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)

## Resources

* [Advertise with Mozilla](/en-US/advertising/)
* [Firefox Release Notes](/firefox/134.0.2/releasenotes/)

## Developers

* [Developer Edition](/en-US/firefox/developer/)
* [Enterprise](/en-US/firefox/enterprise/)
* [Tools](https://firefox-source-docs.mozilla.org/devtools-user/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=developers)
* [MDN](https://developer.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer)

## Follow @Mozilla

* [X (formerly Twitter) (@mozilla)](https://twitter.com/mozilla)
* [Instagram (@mozilla)](https://www.instagram.com/mozilla/)
* [LinkedIn (@mozilla)](https://www.linkedin.com/company/mozilla-corporation/)
* [TikTok (@mozilla)](https://www.tiktok.com/%40mozilla)
* [Spotify (@mozilla)](https://open.spotify.com/show/0vT7LJMeVDxyQ2ZamHKu08?si=_uDRD6bRR_6M5YZyISGXgA)

## Follow @Firefox

* [X (formerly Twitter) (@firefox)](https://twitter.com/firefox)
* [Instagram (@firefox)](https://www.instagram.com/firefox/)
* [YouTube (@firefoxchannel)](https://www.youtube.com/user/firefoxchannel)
* [TikTok (@firefox)](https://www.tiktok.com/%40firefox)

[Donate](https://foundation.mozilla.org/?form=moco-donate-footer)

Visit [Mozilla Corporation’s](/en-US/) not-for-profit parent, the [Mozilla Foundation](https://foundation.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer).

Portions of this content are ©1998–2025 by individual mozilla.org contributors. Content available under a [Creative Commons license](/en-US/foundation/licensing/website-content/).

* [Website Privacy Notice](/en-US/privacy/websites/)
* [Cookies](/en-US/privacy/websites/cookie-settings/)
* [Legal](/en-US/about/legal/)
* [Community Participation Guidelines](/en-US/about/governance/policies/participation/)
* [About this site](/en-US/about/this-site/)

![](https://www.mozilla.org/media/img/logos/m24/wordmark-white.2d673bb5b33a.svg)



=== Content from www.ubuntu.com_400a701a_20250125_092457.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# USN-2185-1: Firefox vulnerabilities

29 April 2014

Firefox could be made to crash or run programs as your login if it
opened a malicious website.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Releases

* [Ubuntu 14.04 ESM](/security/notices?release=trusty)
* [Ubuntu 13.10](/security/notices?release=saucy)
* [Ubuntu 12.10](/security/notices?release=quantal)
* [Ubuntu 12.04](/security/notices?release=precise)

## Packages

* [firefox](/security/cves?package=firefox) - Mozilla Open Source web browser

## Details

Bobby Holley, Carsten Book, Christoph Diehl, Gary Kwong, Jan de Mooij,

Jesse Ruderman, Nathan Froyd, John Schoenick, Karl Tomlinson, Vladimir

Vukicevic and Christian Holler discovered multiple memory safety issues in

Firefox. If a user were tricked in to opening a specially crafted website,

an attacker could potentially exploit these to cause a denial of service

via application crash, or execute arbitrary code with the privileges of

the user invoking Firefox. ([CVE-2014-1518](/security/CVE-2014-1518), [CVE-2014-1519](/security/CVE-2014-1519))

An out of bounds read was discovered in Web Audio. An attacker could

potentially exploit this cause a denial of service via application crash

or execute arbitrary code with the privileges of the user invoking

Firefox. ([CVE-2014-1522](/security/CVE-2014-1522))

Abhishek Arya discovered an out of bounds read when decoding JPG images.

An attacker could potentially exploit this to cause a denial of service

via application crash. ([CVE-2014-1523](/security/CVE-2014-1523))

Abhishek Arya discovered a buffer overflow when a script uses a non-XBL

object as an XBL object. An attacker could potentially exploit this to

execute arbitrary code with the privileges of the user invoking Firefox.

([CVE-2014-1524](/security/CVE-2014-1524))

Abhishek Arya discovered a use-after-free in the Text Track Manager when

processing HTML video. An attacker could potentially exploit this to cause

a denial of service via application crash or execute arbitrary code with

the privileges of the user invoking Firefox. ([CVE-2014-1525](/security/CVE-2014-1525))

Jukka Jylänki discovered an out-of-bounds write in Cairo when working

with canvas in some circumstances. An attacker could potentially exploit

this to cause a denial of service via application crash or execute

arbitrary code with the privileges of the user invoking Firefox.

([CVE-2014-1528](/security/CVE-2014-1528))

Mariusz Mlynski discovered that sites with notification permissions can

run script in a privileged context in some circumstances. An attacker

could exploit this to execute arbitrary code with the privileges of the

user invoking Firefox. ([CVE-2014-1529](/security/CVE-2014-1529))

It was discovered that browser history navigations could be used to load

a site with the addressbar displaying the wrong address. An attacker could

potentially exploit this to conduct cross-site scripting or phishing

attacks. ([CVE-2014-1530](/security/CVE-2014-1530))

A use-after-free was discovered when resizing images in some

circumstances. An attacker could potentially exploit this to cause a

denial of service via application crash or execute arbitrary code with the

privileges of the user invoking Firefox. ([CVE-2014-1531](/security/CVE-2014-1531))

Christian Heimes discovered that NSS did not handle IDNA domain prefixes

correctly for wildcard certificates. An attacker could potentially exploit

this by using a specially crafted certificate to conduct a machine-in-the-middle

attack. ([CVE-2014-1492](/security/CVE-2014-1492))

Tyson Smith and Jesse Schwartzentruber discovered a use-after-free during

host resolution in some circumstances. An attacker could potentially

exploit this to cause a denial of service via application crash or execute

arbitrary code with the privileges of the user invoking Firefox.

([CVE-2014-1532](/security/CVE-2014-1532))

Boris Zbarsky discovered that the debugger bypassed XrayWrappers for some

objects. If a user were tricked in to opening a specially crafted website

whilst using the debugger, an attacker could potentially exploit this to

execute arbitrary code with the privileges of the user invoking Firefox.

([CVE-2014-1526](/security/CVE-2014-1526))

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Update instructions

The problem can be corrected by updating your system to the following package versions:

##### Ubuntu 14.04

* [firefox](https://launchpad.net/ubuntu/%2Bsource/firefox)
  -
  [29.0+build1-0ubuntu0.14.04.2](https://launchpad.net/ubuntu/%2Bsource/firefox/29.0%2Bbuild1-0ubuntu0.14.04.2)

##### Ubuntu 13.10

* [firefox](https://launchpad.net/ubuntu/%2Bsource/firefox)
  -
  [29.0+build1-0ubuntu0.13.10.3](https://launchpad.net/ubuntu/%2Bsource/firefox/29.0%2Bbuild1-0ubuntu0.13.10.3)

##### Ubuntu 12.10

* [firefox](https://launchpad.net/ubuntu/%2Bsource/firefox)
  -
  [29.0+build1-0ubuntu0.12.10.3](https://launchpad.net/ubuntu/%2Bsource/firefox/29.0%2Bbuild1-0ubuntu0.12.10.3)

##### Ubuntu 12.04

* [firefox](https://launchpad.net/ubuntu/%2Bsource/firefox)
  -
  [29.0+build1-0ubuntu0.12.04.2](https://launchpad.net/ubuntu/%2Bsource/firefox/29.0%2Bbuild1-0ubuntu0.12.04.2)

After a standard system update you need to restart Firefox to make

all the necessary changes.

## References

* [CVE-2014-1518](/security/CVE-2014-1518)
* [CVE-2014-1519](/security/CVE-2014-1519)
* [CVE-2014-1522](/security/CVE-2014-1522)
* [CVE-2014-1523](/security/CVE-2014-1523)
* [CVE-2014-1524](/security/CVE-2014-1524)
* [CVE-2014-1525](/security/CVE-2014-1525)
* [CVE-2014-1528](/security/CVE-2014-1528)
* [CVE-2014-1529](/security/CVE-2014-1529)
* [CVE-2014-1530](/security/CVE-2014-1530)
* [CVE-2014-1531](/security/CVE-2014-1531)
* [CVE-2014-1492](/security/CVE-2014-1492)
* [CVE-2014-1532](/security/CVE-2014-1532)
* [CVE-2014-1526](/security/CVE-2014-1526)
* <https://launchpad.net/bugs/1313464>

## Related notices

* [USN-2189-1](/security/notices/USN-2189-1)
* [USN-2159-1](/security/notices/USN-2159-1)

### Join the discussion

* [Ubuntu security updates mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened)
* [Security announcements mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-security-announce)

### Need help with your security needs?

Ubuntu Pro provides up to ten-year security coverage for over 23,000 open-source packages within the Ubuntu Main and Universe repositories.

[Talk to an expert to find out what would work best for you](/contact-us/form?product=pro)

### Further reading

* *Loading...*

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page



=== Content from lists.opensuse.org_5ec4c394_20250125_092448.html ===


[![openSUSE](https://static.opensuse.org/favicon.svg)
Mailing Lists](/archives/ "openSUSE Mailing Lists")

[Sign In](/accounts/login/?next=/archives/list/updates%40lists.opensuse.org/message/U7IIGPRTQGRZRRW5XUPAKYQH6MZPA2EZ/)
[Sign Up](/accounts/signup/?next=/archives/list/updates%40lists.opensuse.org/message/U7IIGPRTQGRZRRW5XUPAKYQH6MZPA2EZ/)

[Manage this list](/manage/lists/updates.lists.opensuse.org/)
[Sign In](/accounts/login/?next=/archives/list/updates%40lists.opensuse.org/message/U7IIGPRTQGRZRRW5XUPAKYQH6MZPA2EZ/)
[Sign Up](/accounts/signup/?next=/archives/list/updates%40lists.opensuse.org/message/U7IIGPRTQGRZRRW5XUPAKYQH6MZPA2EZ/)

×
#### Keyboard Shortcuts

### Thread View

* `j`: Next unread message
* `k`: Previous unread message
* `j a`: Jump to all threads* `j l`: Jump to MailingList overview

[thread](/archives/list/updates%40lists.opensuse.org/thread/U7IIGPRTQGRZRRW5XUPAKYQH6MZPA2EZ/#U7IIGPRTQGRZRRW5XUPAKYQH6MZPA2EZ)

# openSUSE-SU-2014:0599-1: moderate: update for MozillaFirefox

![](https://seccdn.libravatar.org/avatar/099a17325bdf082b643d1a6bbacde279.jpg?s=120&d=mm&r=g)
## [opensuse-security＠opensuse.org](/archives/users/1b72def497ef4503896cd7a5fe9fb8e0/ "See the profile for opensuse-security＠opensuse.org")

2 May
2014

2 May
'14

13:07

openSUSE Security Update: update for MozillaFirefox
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
Announcement ID: openSUSE-SU-2014:0599-1
Rating: moderate
References: #875378
Cross-References: CVE-2014-1492 CVE-2014-1518 CVE-2014-1519
CVE-2014-1522 CVE-2014-1523 CVE-2014-1524
CVE-2014-1525 CVE-2014-1526 CVE-2014-1528
CVE-2014-1529 CVE-2014-1530 CVE-2014-1531
CVE-2014-1532
Affected Products:
openSUSE 13.1
openSUSE 12.3
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
An update that fixes 13 vulnerabilities is now available.
Description:
This is a MozillaFirefox update to version 29.0:
\* MFSA 2014-34/CVE-2014-1518/CVE-2014-1519 Miscellaneous
memory safety hazards
\* MFSA 2014-36/CVE-2014-1522 (bmo#995289) Web Audio
memory corruption issues
\* MFSA 2014-37/CVE-2014-1523 (bmo#969226) Out of bounds
read while decoding JPG images
\* MFSA 2014-38/CVE-2014-1524 (bmo#989183) Buffer overflow
when using non-XBL object as XBL
\* MFSA 2014-39/CVE-2014-1525 (bmo#989210) Use-after-free
in the Text Track Manager for HTML video
\* MFSA 2014-41/CVE-2014-1528 (bmo#963962) Out-of-bounds
write in Cairo
\* MFSA 2014-42/CVE-2014-1529 (bmo#987003) Privilege
escalation through Web Notification API
\* MFSA 2014-43/CVE-2014-1530 (bmo#895557) Cross-site
scripting (XSS) using history navigations
\* MFSA 2014-44/CVE-2014-1531 (bmo#987140) Use-after-free
in imgLoader while resizing images
\* MFSA 2014-45/CVE-2014-1492 (bmo#903885) Incorrect IDNA
domain name matching for wildcard certificates (fixed
by NSS 3.16)
\* MFSA 2014-46/CVE-2014-1532 (bmo#966006) Use-after-free
in nsHostResolver
\* MFSA 2014-47/CVE-2014-1526 (bmo#988106) Debugger can
bypass XrayWrappers with JavaScript
- rebased patches
- removed obsolete patches
\* firefox-browser-css.patch
\* mozilla-aarch64-599882cfb998.diff
\* mozilla-aarch64-bmo-963028.patch
\* mozilla-aarch64-bmo-963029.patch
\* mozilla-aarch64-bmo-963030.patch
\* mozilla-aarch64-bmo-963031.patch
- requires NSS 3.16
- added mozilla-icu-strncat.patch to fix post build checks
- add mozilla-aarch64-599882cfb998.patch,
mozilla-aarch64-bmo-810631.patch,
mozilla-aarch64-bmo-962488.patch,
mozilla-aarch64-bmo-963030.patch,
mozilla-aarch64-bmo-963027.patch,
mozilla-aarch64-bmo-963028.patch,
mozilla-aarch64-bmo-963029.patch,
mozilla-aarch64-bmo-963023.patch,
mozilla-aarch64-bmo-963024.patch,
mozilla-aarch64-bmo-963031.patch: AArch64 porting
- Add patch for bmo#973977
\* mozilla-ppc64-xpcom.patch
- Refresh mozilla-ppc64le-xpcom.patch patch
- Adapt mozilla-ppc64le-xpcom.patch to Mozilla > 24.0 build
system
This is also a mozilla-nss update to version 3.16:
\* required for Firefox 29
\* bmo#903885 - (CVE-2014-1492) In a wildcard certificate,
the wildcard character should not be embedded within
the U-label of an internationalized domain name. See
the last bullet point in RFC 6125, Section 7.2.
\* Supports the Linux x32 ABI. To build for the Linux x32
target, set the environment variable USE\_X32=1 when
building NSS. New Functions:
\* NSS\_CMSSignerInfo\_Verify New Macros
\* TLS\_RSA\_WITH\_RC4\_128\_SHA,
TLS\_RSA\_WITH\_3DES\_EDE\_CBC\_SHA, etc., cipher suites that
were first defined in SSL 3.0 can now be referred to
with their official IANA names in TLS, with the TLS\_
prefix. Previously, they had to be referred to with
their names in SSL 3.0, with the SSL\_ prefix. Notable
Changes:
\* ECC is enabled by default. It is no longer necessary to
set the environment variable NSS\_ENABLE\_ECC=1 when
building NSS. To disable ECC, set the environment
variable NSS\_DISABLE\_ECC=1 when building NSS.
\* libpkix should not include the common name of CA as DNS
names when evaluating name constraints.
\* AESKeyWrap\_Decrypt should not return SECSuccess for
invalid keys.
\* Fix a memory corruption in sec\_pkcs12\_new\_asafe.
\* If the NSS\_SDB\_USE\_CACHE environment variable is set,
skip the runtime test sdb\_measureAccess.
\* The built-in roots module has been updated to version
1.97, which adds, removes, and distrusts several
certificates.
\* The atob utility has been improved to automatically
ignore lines of text that aren't in base64 format.
\* The certutil utility has been improved to support
creation of version 1 and version 2 certificates, in
addition to the existing version 3 support.
Patch Instructions:
To install this openSUSE Security Update use YaST online\_update.
Alternatively you can run the command listed for your product:
- openSUSE 13.1:
zypper in -t patch openSUSE-2014-336
- openSUSE 12.3:
zypper in -t patch openSUSE-2014-336
To bring your system up-to-date, use "zypper patch".
Package List:
- openSUSE 13.1 (i586 x86\_64):
MozillaFirefox-29.0-20.1
MozillaFirefox-branding-upstream-29.0-20.1
MozillaFirefox-buildsymbols-29.0-20.1
MozillaFirefox-debuginfo-29.0-20.1
MozillaFirefox-debugsource-29.0-20.1
MozillaFirefox-devel-29.0-20.1
MozillaFirefox-translations-common-29.0-20.1
MozillaFirefox-translations-other-29.0-20.1
libfreebl3-3.16-20.1
libfreebl3-debuginfo-3.16-20.1
libsoftokn3-3.16-20.1
libsoftokn3-debuginfo-3.16-20.1
mozilla-nss-3.16-20.1
mozilla-nss-certs-3.16-20.1
mozilla-nss-certs-debuginfo-3.16-20.1
mozilla-nss-debuginfo-3.16-20.1
mozilla-nss-debugsource-3.16-20.1
mozilla-nss-devel-3.16-20.1
mozilla-nss-sysinit-3.16-20.1
mozilla-nss-sysinit-debuginfo-3.16-20.1
mozilla-nss-tools-3.16-20.1
mozilla-nss-tools-debuginfo-3.16-20.1
- openSUSE 13.1 (x86\_64):
libfreebl3-32bit-3.16-20.1
libfreebl3-debuginfo-32bit-3.16-20.1
libsoftokn3-32bit-3.16-20.1
libsoftokn3-debuginfo-32bit-3.16-20.1
mozilla-nss-32bit-3.16-20.1
mozilla-nss-certs-32bit-3.16-20.1
mozilla-nss-certs-debuginfo-32bit-3.16-20.1
mozilla-nss-debuginfo-32bit-3.16-20.1
mozilla-nss-sysinit-32bit-3.16-20.1
mozilla-nss-sysinit-debuginfo-32bit-3.16-20.1
- openSUSE 12.3 (i586 x86\_64):
MozillaFirefox-29.0-1.59.1
MozillaFirefox-branding-upstream-29.0-1.59.1
MozillaFirefox-buildsymbols-29.0-1.59.1
MozillaFirefox-debuginfo-29.0-1.59.1
MozillaFirefox-debugsource-29.0-1.59.1
MozillaFirefox-devel-29.0-1.59.1
MozillaFirefox-translations-common-29.0-1.59.1
MozillaFirefox-translations-other-29.0-1.59.1
libfreebl3-3.16-1.36.1
libfreebl3-debuginfo-3.16-1.36.1
libsoftokn3-3.16-1.36.1
libsoftokn3-debuginfo-3.16-1.36.1
mozilla-nss-3.16-1.36.1
mozilla-nss-certs-3.16-1.36.1
mozilla-nss-certs-debuginfo-3.16-1.36.1
mozilla-nss-debuginfo-3.16-1.36.1
mozilla-nss-debugsource-3.16-1.36.1
mozilla-nss-devel-3.16-1.36.1
mozilla-nss-sysinit-3.16-1.36.1
mozilla-nss-sysinit-debuginfo-3.16-1.36.1
mozilla-nss-tools-3.16-1.36.1
mozilla-nss-tools-debuginfo-3.16-1.36.1
- openSUSE 12.3 (x86\_64):
libfreebl3-32bit-3.16-1.36.1
libfreebl3-debuginfo-32bit-3.16-1.36.1
libsoftokn3-32bit-3.16-1.36.1
libsoftokn3-debuginfo-32bit-3.16-1.36.1
mozilla-nss-32bit-3.16-1.36.1
mozilla-nss-certs-32bit-3.16-1.36.1
mozilla-nss-certs-debuginfo-32bit-3.16-1.36.1
mozilla-nss-debuginfo-32bit-3.16-1.36.1
mozilla-nss-sysinit-32bit-3.16-1.36.1
mozilla-nss-sysinit-debuginfo-32bit-3.16-1.36.1
References:
<http://support.novell.com/security/cve/CVE-2014-1492.html>
<http://support.novell.com/security/cve/CVE-2014-1518.html>
<http://support.novell.com/security/cve/CVE-2014-1519.html>
<http://support.novell.com/security/cve/CVE-2014-1522.html>
<http://support.novell.com/security/cve/CVE-2014-1523.html>
<http://support.novell.com/security/cve/CVE-2014-1524.html>
<http://support.novell.com/security/cve/CVE-2014-1525.html>
<http://support.novell.com/security/cve/CVE-2014-1526.html>
<http://support.novell.com/security/cve/CVE-2014-1528.html>
<http://support.novell.com/security/cve/CVE-2014-1529.html>
<http://support.novell.com/security/cve/CVE-2014-1530.html>
<http://support.novell.com/security/cve/CVE-2014-1531.html>
<http://support.novell.com/security/cve/CVE-2014-1532.html>
<https://bugzilla.novell.com/875378>

[0](#like "You must be logged-in to vote.")
[0](#dislike "You must be logged-in to vote.")

Reply

[Sign in to reply online](/accounts/login/?next=/archives/list/updates%40lists.opensuse.org/message/U7IIGPRTQGRZRRW5XUPAKYQH6MZPA2EZ/)
Use email software

[Back to the thread](/archives/list/updates%40lists.opensuse.org/thread/U7IIGPRTQGRZRRW5XUPAKYQH6MZPA2EZ/#U7IIGPRTQGRZRRW5XUPAKYQH6MZPA2EZ)

[Back to the list](/archives/list/updates%40lists.opensuse.org/)

![HyperKitty](/static/hyperkitty/img/logo.png)
Powered by [HyperKitty](http://hyperkitty.readthedocs.org) version 1.3.12.



=== Content from bugzilla.mozilla.org_95708667_20250125_092504.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/977955)
* [XML](/show_bug.cgi?ctype=xml&id=977955)

Closed
[Bug 977955](/show_bug.cgi?id=977955)

Opened 11 years ago
Closed 11 years ago

# PluginModuleParent may delete its subprocess before calling MessageChannel::Clear, resulting in badness

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

PluginModuleParent may delete its subprocess before calling MessageChannel::Clear, resulting in badness

## Categories

### (Core Graveyard :: Plug-ins, defect)

[Product:](/describecomponents.cgi?product=Core%20Graveyard)

Core Graveyard
▾

Core Graveyard
Old, retired Core components
[See Open Bugs in This Product](/buglist.cgi?product=Core%20Graveyard&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core%20Graveyard)
Watch This Product

[Component:](/describecomponents.cgi?product=Core%20Graveyard&component=Plug-ins#Plug-ins)

Plug-ins
▾

Core Graveyard :: Plug-ins
Bugs in core Mozilla code that supports registering and using plug-ins. For bugs in specific plugins, please file those bugs under External Software Affecting Firefox.
[See Open Bugs in This Component](/buglist.cgi?product=Core%20Graveyard&component=Plug-ins&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core%20Graveyard&component=Plug-ins&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core%20Graveyard&component=Plug-ins)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

unspecified

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

All

All

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

normal

## Tracking

### (firefox27 wontfix, firefox28 wontfix, firefox29+ fixed, firefox30+ fixed, firefox-esr24 wontfix, b2g18 unaffected, b2g-v1.2 unaffected, b2g-v1.3 unaffected, b2g-v1.4 unaffected)

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla30

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Webcompat Score | --- |
| --- | --- |
| Performance Impact | --- |
| a11y-review | --- |
| Accessibility Severity | --- |
| Webcompat Priority | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox27 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=wontfix) |
| firefox28 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=wontfix) |
| firefox29 | [+](/buglist.cgi?f1=cf_tracking_firefox29&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=fixed) |
| firefox30 | [+](/buglist.cgi?f1=cf_tracking_firefox30&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=fixed) |
| firefox-esr24 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=wontfix) |
| b2g18 | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=unaffected) |
| b2g-v1.2 | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=unaffected) |
| b2g-v1.3 | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=unaffected) |
| b2g-v1.4 | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=unaffected) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox27 |  | wontfix |
| firefox28 |  | wontfix |
| firefox29 | + | fixed |
| firefox30 | + | fixed |
| firefox-esr24 |  | wontfix |
| b2g18 |  | unaffected |
| b2g-v1.2 |  | unaffected |
| b2g-v1.3 |  | unaffected |
| b2g-v1.4 |  | unaffected |

## People

### (Reporter: johns, Assigned: johns)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/e015aca8c2ea64974b5d4c29ae1ee603?d=mm&size=40)  [johns](/user_profile?user_id=429621)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/e015aca8c2ea64974b5d4c29ae1ee603?d=mm&size=40)  [johns](/user_profile?user_id=429621)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](extensions/Gravatar/web/default.jpg)  [jimm](/user_profile?user_id=279663)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

10 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[860254](/show_bug.cgi?id=860254 "RESOLVED FIXED - Poison memory on free for all small allocations"), [974933](/show_bug.cgi?id=974933 "VERIFIED FIXED - crash in IPC::Channel::set_listener(IPC::Channel::Listener*) at address 0x5a5a5a9a")

Dependency [tree](/showdependencytree.cgi?id=977955&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=977955)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Keywords: csectype-uaf, sec-high, Whiteboard: [adv-main29+] ESR-24 variant is sec-moderatish)

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[csectype-uaf](/buglist.cgi?keywords=csectype-uaf&resolution=---),
[sec-high](/buglist.cgi?keywords=sec-high&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[adv-main29+] ESR-24 variant is sec-moderatish

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [johns](/user_profile?user_id=429621) | [in-testsuite](#c21 "11 years ago") | ? |
| --- | --- | --- |
| [johns](/user_profile?user_id=429621) | in-testsuite | ? |
| --- | --- | --- |
|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (3 files, 1 obsolete file)

| [Test](/attachment.cgi?id=8383965)  [11 years ago](#c2)  [John Schoenick [:johns]](/user_profile?user_id=429621)   4.50 KB, patch | benjamin : [review-](#c7 "11 years ago") | [Details](/attachment.cgi?id=8383965&action=edit) | [Diff](/attachment.cgi?id=8383965&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=977955&attachment=8383965) |
| --- | --- | --- |
| [Close the channel when aborting before successful init](/attachment.cgi?id=8385010)  [11 years ago](#c4)  [John Schoenick [:johns]](/user_profile?user_id=429621)   5.48 KB, patch | benjamin : [review+](#c6 "11 years ago") | [Details](/attachment.cgi?id=8385010&action=edit) | [Diff](/attachment.cgi?id=8385010&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=977955&attachment=8385010) |
| [Cleanup PluginModule shutdown r=bsmedberg](/attachment.cgi?id=8385636)  [11 years ago](#c8)  [John Schoenick [:johns]](/user_profile?user_id=429621)   4.56 KB, patch | johns : [review+](#c8 "11 years ago")  lsblakk : [approval-mozilla-aurora+](#c17 "11 years ago")  lsblakk : [approval-mozilla-beta-](#c17 "11 years ago")  abillings : [sec-approval+](#c12 "11 years ago")  johns : [checkin+](#c14 "11 years ago") | [Details](/attachment.cgi?id=8385636&action=edit) | [Diff](/attachment.cgi?id=8385636&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=977955&attachment=8385636) |
| [Add comment. r=bsmedberg](/attachment.cgi?id=8385637)  [11 years ago](#c9)  [John Schoenick [:johns]](/user_profile?user_id=429621)   1.03 KB, patch | johns : [review+](#a414615_429621 "11 years ago") | [Details](/attachment.cgi?id=8385637&action=edit) | [Diff](/attachment.cgi?id=8385637&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=977955&attachment=8385637) |

Show Obsolete

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [John Schoenick [:johns]](/user_profile?user_id=429621)  Assignee |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=977955#c0)• 11 years ago |
|  | |

I-think-I-found-the-cause-of-bug-974933 attempt #3:
1) PluginModuleParent contains a PluginProcessParent, mSubprocess. When PluginModuleParent is created by static ::LoadModule, It passes parent->mSubprocess->GetChannel() to parent->Open(). [A]
2) PluginModuleParent::Open(), calls PluginModuleParent->mChannel->Open(), which is a MessageChannel.
3) MessageChannel::Open creates a ProcessLink, mLink, and passes it the channel from the subprocess in (1) [B]
4) NP\_Initialize returns an error from the plugin. We set mShutdown = true without actually calling NP\_Shutdown. [E] There are a few other pathways that do something similar [C] [D] (maybe [F], but the callers I checked are caused by channel shutdown)
5) We decide to destroy PluginModuleParent, and call in order:
- ~PluginModuleParent
- mSubprocess->Destroy()
- ~MessageChannel (PluginModuleParent.mChannel destructor)
- MessageChannel::Clear
- delete mLink
- ~ProcessLink
- mTransport->set\_listener();
mTransport is the channel obtained from mSubprocess in (1)
6) mSubprocess->Destroy() queues a task on the io thread to run |delete this|. This task then races with us getting to MessageChannel::Clear. If it wins the race, MessageChannel.mLink now has a poisoned mTransport, and we crash.
This can be reproduced in a debugger by breaking at [G] and [E]. Fudge the plugin return code at [E]\* and stop the main thread at [G] so the iothread wins the race. Backtrace attached, which appears identical to the [bug 974933](/show_bug.cgi?id=974933 "VERIFIED FIXED - crash in IPC::Channel::set_listener(IPC::Channel::Listener*) at address 0x5a5a5a9a") crashes:
<https://crash-stats.mozilla.com/report/index/c68aee10-a11f-4191-ab54-298b12140227>
\* I'm not sure about this part -- we can't call NP\_Shutdown or MessageChannel::Clear() will prevent the race. Any of the abnormal-failure paths that set |mShutdown = true| without calling ::Clear might be triggering this.
[A] <http://dxr.mozilla.org/mozilla-central/source/dom/plugins/ipc/PluginModuleParent.cpp#97>
[B] <http://dxr.mozilla.org/mozilla-central/source/ipc/glue/MessageChannel.cpp#296>
[C] <http://dxr.mozilla.org/mozilla-central/source/dom/plugins/ipc/PluginModuleParent.cpp#1196>
[D] <http://dxr.mozilla.org/mozilla-central/source/dom/plugins/ipc/PluginModuleParent.cpp#111>
[E] <http://dxr.mozilla.org/mozilla-central/source/dom/plugins/ipc/PluginModuleParent.cpp#1228>
[F] <http://dxr.mozilla.org/mozilla-central/source/dom/plugins/ipc/PluginModuleParent.cpp#731>
[G] <http://dxr.mozilla.org/mozilla-central/source/dom/plugins/ipc/PluginProcessParent.cpp#82>

|  | [Benjamin Smedberg](/user_profile?user_id=7044) |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=977955#c1)• 11 years ago |
|  | |

\o/
Can we just call ::Clear() in the error condition? And maybe assert in ~PluginModuleParent that Clear() must already have been called?

|  | [John Schoenick [:johns]](/user_profile?user_id=429621)  Assignee |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=977955#c2)• 11 years ago |
|  | |

Attached patch

[Test](attachment.cgi?id=8383965&action=diff)
— [Details](attachment.cgi?id=8383965&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=977955&attachment=8383965)

This reliably causes the crash without any debugger tricks by having the NPTest plugin crash on NP\_Initialize.

|  | [John Schoenick [:johns]](/user_profile?user_id=429621)  Assignee |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=977955#c3)• 11 years ago |
|  | |

(In reply to John Schoenick [:johns] from [comment #2](/show_bug.cgi?id=977955#c2 "RESOLVED FIXED - PluginModuleParent may delete its subprocess before calling MessageChannel::Clear, resulting in badness"))
> Created [attachment 8383965](/attachment.cgi?id=8383965 "Test") [[details]](/attachment.cgi?id=8383965&action=edit "Test") [[diff]](/attachment.cgi?id=8383965&action=diff "Test") [[review]](/page.cgi?id=splinter.html&ignore=&bug=977955&attachment=8383965)
> Test
>
> This reliably causes the crash without any debugger tricks by having the
> NPTest plugin crash on NP\_Initialize.
For some value of reliably:
- Without memory poisoning, this crash is rare. You can see the corruption in a debugger, so its possible a worker thread heap spraying could exploit this
- On my linux64 machine the test crashes 90% of the time unless a debugger is attached, which messes with the thread timing and makes it only crash about one-in-five times

|  | [John Schoenick [:johns]](/user_profile?user_id=429621)  Assignee |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=977955#c4)• 11 years ago |
|  | |

Attached patch

[Close the channel when aborting before successful init](attachment.cgi?id=8385010&action=diff) (obsolete)
— [Details](attachment.cgi?id=8385010&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=977955&attachment=8385010)

So mShutdown tracks if our channel has died, and the destructor calls NP\_Shutdown if it has not. This is circumvented, however, by error paths that set it to true during init to indicate that NP\_Shutdown shouldn't be called.
All of these paths except one in LoadModule also leave the channel open erroneously, so just calling Close() when we want to shutdown without calling the plugin should fix the issue. The one case in LoadModule sets mShutdown because the object dies before calling Open().
It doesn't look like there's a sane way to assert that MessageChannel was cleaned up -- double-calling Close() is a runtime abort, and MessageChannel::Connected() doesn't guarantee we're not somewhere between closed and connected (and is private anyway).
Is there an assertion we could add to the destructor, or is it worth modifying MessageChannel to add one? Given that this patch restores mShutdown to properly track the "After Open() before Close()" state I'm fairly confident this can't happen in other ways in the existing code at least.
[Attachment #8385010](/attachment.cgi?id=8385010&action=edit "Close the channel when aborting before successful init") -
Flags: review?(benjamin)

|  | [John Schoenick [:johns]](/user_profile?user_id=429621)  Assignee |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=977955#c5)• 11 years ago |
|  | |

Comment on [attachment 8383965](/attachment.cgi?id=8383965 "Test") [[details]](/attachment.cgi?id=8383965&action=edit "Test") [[diff]](/attachment.cgi?id=8383965&action=diff "Test") [[review]](/page.cgi?id=splinter.html&ignore=&bug=977955&attachment=8383965)
Test
This doesn't always reproduce the issue depending on your environment and timing, but the test isn't very specific -- it ensures we handle the plugin crashing in NP\_Initialize -- so it's probably worth having regardless.
[Attachment #8383965](/attachment.cgi?id=8383965&action=edit "Test") -
Flags: review?(benjamin)

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=977955#a339142_406194)• 11 years ago |

Keywords: [csectype-uaf](/buglist.cgi?keywords=csectype-uaf&resolution=---),
[sec-critical](/buglist.cgi?keywords=sec-critical&resolution=---)

|  | [Benjamin Smedberg](/user_profile?user_id=7044) |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=977955#c6)• 11 years ago |
|  | |

Comment on [attachment 8385010](/attachment.cgi?id=8385010 "Close the channel when aborting before successful init") [[details]](/attachment.cgi?id=8385010&action=edit "Close the channel when aborting before successful init") [[diff]](/attachment.cgi?id=8385010&action=diff "Close the channel when aborting before successful init") [[review]](/page.cgi?id=splinter.html&ignore=&bug=977955&attachment=8385010)
Close the channel when aborting before successful init
I have an old forgetten patch in [bug 814963](/show_bug.cgi?id=814963 "RESOLVED WORKSFORME - Firefox + Flash v.11 hang on Windows 2012 Server") which is related. Could you check and that along with your changes unless you think it doesn't make sense any more?
I'm a little allergic to MOZ\_CRASH("message") because it doesn't annotate the message in the crash report. Please use NS\_RUNTIMEABORT("message") instead. r=me with that change.
[Attachment #8385010](/attachment.cgi?id=8385010&action=edit "Close the channel when aborting before successful init") -
Flags: review?(benjamin) → review+

|  | [Benjamin Smedberg](/user_profile?user_id=7044) |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=977955#c7)• 11 years ago |
|  | |

Comment on [attachment 8383965](/attachment.cgi?id=8383965 "Test") [[details]](/attachment.cgi?id=8383965&action=edit "Test") [[diff]](/attachment.cgi?id=8383965&action=diff "Test") [[review]](/page.cgi?id=splinter.html&ignore=&bug=977955&attachment=8383965)
Test
This test will fail with e10s and passing state via the environment is very fragile in general. I think we should either:
\* Have a new testplugin that always crashes on init
\* Have some standard location that the testplugin reads on startup and takes special actions such as crashing or hanging on start
But I also think that the test for this shouldn't block landing the patch. If you really want to add a mochitest like this now, please make it a browser-chrome test so that we know we are controlling the browser-process environment and not the content process environment in the test.
[Attachment #8383965](/attachment.cgi?id=8383965&action=edit "Test") -
Flags: review?(benjamin) → review-

|  | [John Schoenick [:johns]](/user_profile?user_id=429621)  Assignee |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=977955#c8)• 11 years ago |
|  | |

Attached patch

[Cleanup PluginModule shutdown r=bsmedberg](attachment.cgi?id=8385636&action=diff)
— [Details](attachment.cgi?id=8385636&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=977955&attachment=8385636)

s/MOZ\_CRASH/NS\_RUNTIMEABORT/g
[Attachment #8385010](/attachment.cgi?id=8385010&action=edit "Close the channel when aborting before successful init") -
Attachment is obsolete: true
[Attachment #8385636](/attachment.cgi?id=8385636&action=edit "Cleanup PluginModule shutdown r=bsmedberg") -
Flags: review+

|  | [John Schoenick [:johns]](/user_profile?user_id=429621)  Assignee |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=977955#c9)• 11 years ago |
|  | |

Attached patch

[Add comment. r=bsmedberg](attachment.cgi?id=8385637&action=diff)
— [Details](attachment.cgi?id=8385637&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=977955&attachment=8385637)

The comment explaining the security issue should probably land later...

|  | [John Schoenick [:johns]](/user_profile?user_id=429621)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=977955#a414615_429621)• 11 years ago |

[Attachment #8385637](/attachment.cgi?id=8385637&action=edit "Add comment. r=bsmedberg") -
Flags: review+

|  | [John Schoenick [:johns]](/user_profile?user_id=429621)  Assignee |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=977955#c10)• 11 years ago |
|  | |

Looking at the history - this affects all branches, though [bug 889480](/show_bug.cgi?id=889480 "RESOLVED FIXED - If NP_Initialize fails NP_Shutdown is still executed") added the NP\_Initialize trigger. Prior to that, the only error path that sets mShutdown after Open is when the crash reporter fails to initialize -- in that scenario the corruption can still occur.
[status-b2g-v1.4](/buglist.cgi?f1=cf_status_b2g_1_4&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=unaffected)
[status-firefox27](/buglist.cgi?f1=cf_status_firefox27&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=affected)
[status-firefox28](/buglist.cgi?f1=cf_status_firefox28&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=affected)
[status-firefox29](/buglist.cgi?f1=cf_status_firefox29&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=affected)
[status-firefox30](/buglist.cgi?f1=cf_status_firefox30&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=affected)
[status-firefox-esr24](/buglist.cgi?f1=cf_status_firefox_esr24&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=affected)

|  | [John Schoenick [:johns]](/user_profile?user_id=429621)  Assignee |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=977955#c11)• 11 years ago |
|  | |

Comment on [attachment 8385636](/attachment.cgi?id=8385636 "Cleanup PluginModule shutdown r=bsmedberg") [[details]](/attachment.cgi?id=8385636&action=edit "Cleanup PluginModule shutdown r=bsmedberg") [[diff]](/attachment.cgi?id=8385636&action=diff "Cleanup PluginModule shutdown r=bsmedberg") [[review]](/page.cgi?id=splinter.html&ignore=&bug=977955&attachment=8385636)
Cleanup PluginModule shutdown r=bsmedberg
[Security approval request comment]
How easily could an exploit be constructed based on the patch?
The patch adds a few not-strictly-necessary new safeguards, and the actual security problem is hard to spot. If someone looking at security bugs were to play with the error paths in question, it would not be hard to discover the flaw (e.g. in an ASAN build).
Exploiting it is questionable: no user-controlled code runs between the earliest the racing thread could free() our memory and when we access it, but a worker thread or threaded network activity/etc could potentially grab that memory and escalate the corruption.
Do comments in the patch, the check-in comment, or tests included in the patch paint a bulls-eye on the security problem?
The comment warning about lifetimes was split out and can land later. The patch is more ambiguous, but would also only land later.
Which older supported branches are affected by this flaw?
The flaw is much harder to trigger on ESR24, but still present in one edge case.
If not all supported branches, which bug introduced the flaw?
[Bug 889480](/show_bug.cgi?id=889480 "RESOLVED FIXED - If NP_Initialize fails NP_Shutdown is still executed") did not introduce this flaw, but added more, possibly user-controllable, ways to hit it.
[Bug 860254](/show_bug.cgi?id=860254 "RESOLVED FIXED - Poison memory on free for all small allocations") (FF30) enabled memory poisoning, causing the crash rate spike in [bug 974933](/show_bug.cgi?id=974933 "VERIFIED FIXED - crash in IPC::Channel::set_listener(IPC::Channel::Listener*) at address 0x5a5a5a9a").
Do you have backports for the affected branches? If not, how different, hard to create, and risky will they be?
Backports to all branches.
How likely is this patch to cause regressions; how much testing does it need?
Low to medium risk of exposing other plugin-ipc issues -- which would likely be no more severe than the current top crash.
[Attachment #8385636](/attachment.cgi?id=8385636&action=edit "Cleanup PluginModule shutdown r=bsmedberg") -
Flags: sec-approval?

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=977955#c12)• 11 years ago |
|  | |

Comment on [attachment 8385636](/attachment.cgi?id=8385636 "Cleanup PluginModule shutdown r=bsmedberg") [[details]](/attachment.cgi?id=8385636&action=edit "Cleanup PluginModule shutdown r=bsmedberg") [[diff]](/attachment.cgi?id=8385636&action=diff "Cleanup PluginModule shutdown r=bsmedberg") [[review]](/page.cgi?id=splinter.html&ignore=&bug=977955&attachment=8385636)
Cleanup PluginModule shutdown r=bsmedberg
Sec-approval+ for trunk. If you nominate for Aurora, we can safely approve it there.
I'm not sure if we want to take this on Beta with less than a week to go for final builds from that branch (same with ESR24).
Dan, what do you think?
[Attachment #8385636](/attachment.cgi?id=8385636&action=edit "Cleanup PluginModule shutdown r=bsmedberg") -
Flags: sec-approval? → sec-approval+Flags: needinfo?(dveditz)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=977955#c13)• 11 years ago |
|  | |

 I'm going to lower this to sec-high on the theory that an attacker won't be able to reliably cause a plugin to return an error from NP\_Initialize(), and sec-moderate for ESR-24 because the crash-reporter is also out of the attacker's control. Since we've found this internally and given the raciness of any exploit we don't have to over-rotate getting this into Beta, but the patch looks non-risky enough to take if we want to. The patch isn't that incriminating so it should be fine.Blocks: [860254](/show_bug.cgi?id=860254 "RESOLVED FIXED - Poison memory on free for all small allocations")
[status-b2g18](/buglist.cgi?f1=cf_status_b2g18&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=unaffected)
[status-b2g-v1.2](/buglist.cgi?f1=cf_status_b2g_1_2&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=unaffected)
[status-b2g-v1.3](/buglist.cgi?f1=cf_status_b2g_1_3&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=unaffected)
[status-firefox27](/buglist.cgi?f1=cf_status_firefox27&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=wontfix)
[tracking-firefox29](/buglist.cgi?f1=cf_tracking_firefox29&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox29&o1=equals&v1=%2B)
[tracking-firefox30](/buglist.cgi?f1=cf_tracking_firefox30&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox30&o1=equals&v1=%2B)Flags: needinfo?(dveditz)Keywords: [sec-critical](/buglist.cgi?keywords=sec-critical&resolution=---) → [sec-high](/buglist.cgi?keywords=sec-high&resolution=---)Whiteboard: ESR-24 variant is sec-moderatish

|  | [John Schoenick [:johns]](/user_profile?user_id=429621)  Assignee |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=977955#c14)• 11 years ago |
|  | |

Comment on [attachment 8385636](/attachment.cgi?id=8385636 "Cleanup PluginModule shutdown r=bsmedberg") [[details]](/attachment.cgi?id=8385636&action=edit "Cleanup PluginModule shutdown r=bsmedberg") [[diff]](/attachment.cgi?id=8385636&action=diff "Cleanup PluginModule shutdown r=bsmedberg") [[review]](/page.cgi?id=splinter.html&ignore=&bug=977955&attachment=8385636)
Cleanup PluginModule shutdown r=bsmedberg
<https://hg.mozilla.org/integration/mozilla-inbound/rev/cb0eb74c0cc3>
[Attachment #8385636](/attachment.cgi?id=8385636&action=edit "Cleanup PluginModule shutdown r=bsmedberg") -
Flags: checkin+

|  | [Carsten Book [:Tomcat]](/user_profile?user_id=277293) |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=977955#c15)• 11 years ago |
|  | |

landed on central <https://hg.mozilla.org/mozilla-central/rev/cb0eb74c0cc3>Status: ASSIGNED → RESOLVEDClosed: 11 years ago
[status-firefox30](/buglist.cgi?f1=cf_status_firefox30&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=fixed)Resolution: --- → FIXEDTarget Milestone: --- → mozilla30

|  | [John Schoenick [:johns]](/user_profile?user_id=429621)  Assignee |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=977955#c16)• 11 years ago |
|  | |

Comment on [attachment 8385636](/attachment.cgi?id=8385636 "Cleanup PluginModule shutdown r=bsmedberg") [[details]](/attachment.cgi?id=8385636&action=edit "Cleanup PluginModule shutdown r=bsmedberg") [[diff]](/attachment.cgi?id=8385636&action=diff "Cleanup PluginModule shutdown r=bsmedberg") [[review]](/page.cgi?id=splinter.html&ignore=&bug=977955&attachment=8385636)
Cleanup PluginModule shutdown r=bsmedberg
[Nominating for beta, wontfixing for esr24 based on [comment 13](/show_bug.cgi?id=977955#c13 "RESOLVED FIXED - PluginModuleParent may delete its subprocess before calling MessageChannel::Clear, resulting in badness")]
[Approval Request Comment]
Bug caused by (feature/regressing bug #):
[Bug 889480](/show_bug.cgi?id=889480 "RESOLVED FIXED - If NP_Initialize fails NP_Shutdown is still executed") did not introduce this flaw, but added more, possibly user-controllable, ways to hit it.
[Bug 860254](/show_bug.cgi?id=860254 "RESOLVED FIXED - Poison memory on free for all small allocations") (FF30) enabled memory poisoning, causing the crash rate spike in [bug 974933](/show_bug.cgi?id=974933 "VERIFIED FIXED - crash in IPC::Channel::set_listener(IPC::Channel::Listener*) at address 0x5a5a5a9a").
User impact if declined:
sec-high, sec-medium on ESR24 (see [comment 13](/show_bug.cgi?id=977955#c13 "RESOLVED FIXED - PluginModuleParent may delete its subprocess before calling MessageChannel::Clear, resulting in badness"))
Testing completed (on m-c, etc.):
on m-c
Risk to taking this patch (and alternatives if risky):
Low to medium-low risk of exposing other issues in plugin-IPC code
String or IDL/UUID changes made by this patch:
None
[Attachment #8385636](/attachment.cgi?id=8385636&action=edit "Cleanup PluginModule shutdown r=bsmedberg") -
Flags: approval-mozilla-beta?
[Attachment #8385636](/attachment.cgi?id=8385636&action=edit "Cleanup PluginModule shutdown r=bsmedberg") -
Flags: approval-mozilla-aurora?

|  | [John Schoenick [:johns]](/user_profile?user_id=429621)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=977955#a664092_429621)• 11 years ago |

[status-firefox-esr24](/buglist.cgi?f1=cf_status_firefox_esr24&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=wontfix)

|  | [Lukas Blakk [:lsblakk] use ?needinfo](/user_profile?user_id=272375) |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=977955#c17)• 11 years ago |
|  | |

Comment on [attachment 8385636](/attachment.cgi?id=8385636 "Cleanup PluginModule shutdown r=bsmedberg") [[details]](/attachment.cgi?id=8385636&action=edit "Cleanup PluginModule shutdown r=bsmedberg") [[diff]](/attachment.cgi?id=8385636&action=diff "Cleanup PluginModule shutdown r=bsmedberg") [[review]](/page.cgi?id=splinter.html&ignore=&bug=977955&attachment=8385636)
Cleanup PluginModule shutdown r=bsmedberg
We're too late to take on such risk to our final beta with no time to test it longer before GA ship so this will have to be a wontfix for FF28 as well and ride the trains from FF29.
[Attachment #8385636](/attachment.cgi?id=8385636&action=edit "Cleanup PluginModule shutdown r=bsmedberg") -
Flags: approval-mozilla-beta?
[Attachment #8385636](/attachment.cgi?id=8385636&action=edit "Cleanup PluginModule shutdown r=bsmedberg") -
Flags: approval-mozilla-beta-
[Attachment #8385636](/attachment.cgi?id=8385636&action=edit "Cleanup PluginModule shutdown r=bsmedberg") -
Flags: approval-mozilla-aurora?
[Attachment #8385636](/attachment.cgi?id=8385636&action=edit "Cleanup PluginModule shutdown r=bsmedberg") -
Flags: approval-mozilla-aurora+

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=977955#c18)• 11 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-aurora/rev/4e00e7419c6f>
[status-firefox28](/buglist.cgi?f1=cf_status_firefox28&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=wontfix)
[status-firefox29](/buglist.cgi?f1=cf_status_firefox29&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=fixed)

|  | [John Schoenick [:johns]](/user_profile?user_id=429621)  Assignee |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=977955#c19)• 11 years ago |
|  | |

Assuming I'm reading socorro right, the crash in [bug 974933](/show_bug.cgi?id=974933 "VERIFIED FIXED - crash in IPC::Channel::set_listener(IPC::Channel::Listener*) at address 0x5a5a5a9a") vanished after the landing:
[https://crash-stats.mozilla.com/report/list?product=Firefox&signature=IPC%3A%3AChannel%3A%3Aset\_listener%28IPC%3A%3AChannel%3A%3AListener\*%29#tab-table](https://crash-stats.mozilla.com/report/list?product=Firefox&signature=IPC%3A%3AChannel%3A%3Aset_listener%28IPC%3A%3AChannel%3A%3AListener*%29#tab-table)

|  | [Benjamin Smedberg](/user_profile?user_id=7044) |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=977955#c20)• 11 years ago |
|  | |

Indeed.

|  | [John Schoenick [:johns]](/user_profile?user_id=429621)  Assignee |  |
| --- | --- | --- |
| [Comment 21](/show_bug.cgi?id=977955#c21)• 11 years ago |
|  | |

(In reply to Benjamin Smedberg [:bsmedberg] from [comment #7](/show_bug.cgi?id=977955#c7 "RESOLVED FIXED - PluginModuleParent may delete its subprocess before calling MessageChannel::Clear, resulting in badness"))
> Comment on [attachment 8383965](/attachment.cgi?id=8383965 "Test") [[details]](/attachment.cgi?id=8383965&action=edit "Test") [[diff]](/attachment.cgi?id=8383965&action=diff "Test") [[review]](/page.cgi?id=splinter.html&ignore=&bug=977955&attachment=8383965)
> Test
>
> This test will fail with e10s and passing state via the environment is very
> fragile in general. I think we should either:
>
> \* Have a new testplugin that always crashes on init
> \* Have some standard location that the testplugin reads on startup and takes
> special actions such as crashing or hanging on start
>
> But I also think that the test for this shouldn't block landing the patch.
> If you really want to add a mochitest like this now, please make it a
> browser-chrome test so that we know we are controlling the browser-process
> environment and not the content process environment in the test.
Agreed with this, will revisit when this bug is opened upFlags: in-testsuite?

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=977955#a4133487_280903)• 11 years ago |

Whiteboard: ESR-24 variant is sec-moderatish → [adv-main29+] ESR-24 variant is sec-moderatish

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=977955#a47404832_1689)• 9 years ago |

Group: core-security

|  | [BMO Automation](/user_profile?user_id=546015) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=977955#a259174234_546015)• 3 years ago |

Product: Core → Core Graveyard
You need to [log in](/show_bug.cgi?id=977955&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [John Schoenick [:johns]](/user_profile?user_id=429621)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from bugzilla.mozilla.org_627cad48_20250125_092501.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/946658)
* [XML](/show_bug.cgi?ctype=xml&id=946658)

Closed
[Bug 946658](/show_bug.cgi?id=946658)

Opened 11 years ago
Closed 11 years ago

# Intermittent browser\_dbg\_variables-view-popup-07.js | [@ nsView::DoResetWidgetBounds(bool, bool)] or [@ nsViewManager::ProcessPendingUpdatesForView(nsView\*, bool)]

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

Intermittent browser\_dbg\_variables-view-popup-07.js | [@ nsView::DoResetWidgetBounds(bool, bool)] or [@ nsViewManager::ProcessPendingUpdatesForView(nsView\*, bool)]

## Categories

### (Core :: Web Painting, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=Web%20Painting#Web%20Painting)

Web Painting
▾

Core :: Web Painting
Construction of display lists, hit-testing, building of Layers and painting.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=Web%20Painting&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=Web%20Painting&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=Web%20Painting)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

x86

macOS

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

critical

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla30

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Accessibility Severity | --- |
| --- | --- |
| a11y-review | --- |
| Performance Impact | --- |
| Webcompat Score | --- |
| Webcompat Priority | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox27 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=wontfix) |
| firefox28 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=wontfix) |
| firefox29 | --- | [fixed](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=fixed) |
| firefox30 | [+](/buglist.cgi?f1=cf_tracking_firefox30&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=fixed) |
| firefox-esr24 | --- | [unaffected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=unaffected) |
| b2g-v1.2 | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=unaffected) |
| b2g-v1.3 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=fixed) |
| b2g-v1.3T | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=fixed) |
| b2g-v1.4 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=fixed) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox27 |  | wontfix |
| firefox28 |  | wontfix |
| firefox29 |  | fixed |
| firefox30 | + | fixed |
| firefox-esr24 |  | unaffected |
| b2g-v1.2 |  | unaffected |
| b2g-v1.3 |  | fixed |
| b2g-v1.3T |  | fixed |
| b2g-v1.4 |  | fixed |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: cbook, Assigned: MatsPalmgren\_bugz)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/e7ca93d447a86b3e78cdf42d361b4d3a?d=mm&size=40)  [MatsPalmgren\_bugz](/user_profile?user_id=5168)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/8378311bf1bd5e9eddc7896a07688876?d=mm&size=40)  [cbook](/user_profile?user_id=277293)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/0646a42110a02dd585f200f270716852?d=mm&size=40)  [tnikkel](/user_profile?user_id=255010)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

9 people

## References

### ( [URL](https://tbpl.mozilla.org/php/getParsedLog.php?id=31472407&tree=Fx-Team "https://tbpl.mozilla.org/php/getParsedLog.php?id=31472407&tree=Fx-Team") )

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

---

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[Duplicates:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#duplicates)

[980287](/show_bug.cgi?id=980287 "RESOLVED DUPLICATE - Intermittent browser_dbg_variables-view-popup-07.js | application crashed [@ nsViewManager::ProcessPendingUpdatesForView(nsView*, bool)")

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[tbpl.mozilla.org/php/getParsedLog.php...](https://tbpl.mozilla.org/php/getParsedLog.php?id=31472407&tree=Fx-Team "https://tbpl.mozilla.org/php/getParsedLog.php?id=31472407&tree=Fx-Team")

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (5 keywords, Whiteboard: [adv-main29+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[crash](/buglist.cgi?keywords=crash&resolution=---),
[csectype-uaf](/buglist.cgi?keywords=csectype-uaf&resolution=---),
[intermittent-failure](/buglist.cgi?keywords=intermittent-failure&resolution=---),
[memory-leak](/buglist.cgi?keywords=memory-leak&resolution=---),
[sec-critical](/buglist.cgi?keywords=sec-critical&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[adv-main29+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [MatsPalmgren\_bugz](/user_profile?user_id=5168) | [in-testsuite](#c38 "11 years ago") | - |
| --- | --- | --- |
| [MatsPalmgren\_bugz](/user_profile?user_id=5168) | in-testsuite | - |
| --- | --- | --- |
|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | qe-verify |  |

## Crash Data

Signature:

[[@ nsView::DoResetWidgetBounds(bool, bool) ]](https://crash-stats.mozilla.org/signature/?signature=nsView%3A%3ADoResetWidgetBounds%28bool%2C%20bool%29)

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (3 files, 3 obsolete files)

| [Relevant part of the log, with crash stack](/attachment.cgi?id=8382911)  [11 years ago](#c19)  [Mats Palmgren (inactive)](/user_profile?user_id=5168)   12.18 KB, text/plain |  | [Details](/attachment.cgi?id=8382911&action=edit) |
| --- | --- | --- |
| [wip](/attachment.cgi?id=8384289)  [11 years ago](#c25)  [Mats Palmgren (inactive)](/user_profile?user_id=5168)   7.34 KB, patch |  | [Details](/attachment.cgi?id=8384289&action=edit) | [Diff](/attachment.cgi?id=8384289&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=946658&attachment=8384289) |
| [stack+frame dump](/attachment.cgi?id=8385132)  [11 years ago](#c28)  [Mats Palmgren (inactive)](/user_profile?user_id=5168)   55.79 KB, text/plain |  | [Details](/attachment.cgi?id=8385132&action=edit) |
| [fix](/attachment.cgi?id=8385389)  [11 years ago](#c29)  [Mats Palmgren (inactive)](/user_profile?user_id=5168)   6.97 KB, patch |  | [Details](/attachment.cgi?id=8385389&action=edit) | [Diff](/attachment.cgi?id=8385389&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=946658&attachment=8385389) |
| [fix](/attachment.cgi?id=8386749)  [11 years ago](#c32)  [Mats Palmgren (inactive)](/user_profile?user_id=5168)   7.12 KB, patch |  | [Details](/attachment.cgi?id=8386749&action=edit) | [Diff](/attachment.cgi?id=8386749&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=946658&attachment=8386749) |
| [fix](/attachment.cgi?id=8387388)  [11 years ago](#c35)  [Mats Palmgren (inactive)](/user_profile?user_id=5168)   7.23 KB, patch | tnikkel : [review+](#c36 "11 years ago")  abillings : [approval-mozilla-aurora+](#a8235446_280903 "11 years ago") | [Details](/attachment.cgi?id=8387388&action=edit) | [Diff](/attachment.cgi?id=8387388&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=946658&attachment=8387388) |

Show Obsolete

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only
* Show Treeherder Comments

|  | [Carsten Book [:Tomcat]](/user_profile?user_id=277293)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=946658#c0)• 11 years ago |
|  | |

Rev5 MacOSX Mountain Lion 10.8 fx-team debug test mochitest-browser-chrome on 2013-12-04 19:55:34 PST for push bf901d895201
slave: talos-mtnlion-r5-061
<https://tbpl.mozilla.org/php/getParsedLog.php?id=31472407&tree=Fx-Team>
Summary
TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/devtools/debugger/test/browser\_dbg\_variables-view-popup-07.js | application terminated with exit code 256
PROCESS-CRASH | chrome://mochitests/content/browser/browser/devtools/debugger/test/browser\_dbg\_variables-view-popup-07.js | application crashed [@ nsView::DoResetWidgetBounds(bool, bool)]
also leaked
TEST-UNEXPECTED-FAIL | leakcheck | 2968 bytes leaked (CompositorChild, CondVar, Mutex, PCompositorChild, PLayerTransactionChild, ...) but not sure if this belongs to the tracking bugs
20:36:06 WARNING - PROCESS-CRASH | chrome://mochitests/content/browser/browser/devtools/debugger/test/browser\_dbg\_variables-view-popup-07.js | application crashed [@ nsView::DoResetWidgetBounds(bool, bool)]
20:36:06 INFO - Crash dump filename: /var/folders/22/cg9zv2f53yd1fn8byjsck83r00000w/T/tmp0zxQG7/minidumps/DA3C4403-9249-4042-930A-83DE146F429D.dmp
20:36:06 INFO - Operating system: Mac OS X
20:36:06 INFO - 10.8.0 12A269
20:36:06 INFO - CPU: amd64
20:36:06 INFO - family 6 model 42 stepping 7
20:36:06 INFO - 8 CPUs
20:36:06 INFO - Crash reason: EXC\_BAD\_ACCESS / 0x0000000d
20:36:06 INFO - Crash address: 0x0
20:36:06 INFO - Thread 0 (crashed)
20:36:06 INFO - 0 XUL!nsView::DoResetWidgetBounds(bool, bool) [nsViewManager.h:bf901d895201 : 63 + 0x0]
20:36:06 INFO - rbx = 0x000000018883bac0 r12 = 0x0000000112632760
20:36:06 INFO - r13 = 0x0000000000000000 r14 = 0x000000018883bac0
20:36:06 INFO - r15 = 0x0000000000000000 rip = 0x00000001027038e1
20:36:06 INFO - rsp = 0x00007fff5fbe1e30 rbp = 0x00007fff5fbe1ed0
20:36:06 INFO - Found by: given as instruction pointer in context
20:36:06 INFO - 1 XUL!nsViewManager::ProcessPendingUpdatesForView(nsView\*, bool) [nsViewManager.cpp:bf901d895201 : 383 + 0xe]
20:36:06 INFO - rbx = 0x000000018883bac0 r12 = 0x0000000112632760
20:36:06 INFO - r13 = 0x0000000000000000 r14 = 0x000000018883bac0
20:36:06 INFO - r15 = 0x0000000000000000 rip = 0x000000010270717c
20:36:06 INFO - rsp = 0x00007fff5fbe1ee0 rbp = 0x00007fff5fbe1f30
20:36:06 INFO - Found by: call frame info
20:36:06 INFO - 2 XUL!nsViewManager::ProcessPendingUpdatesForView(nsView\*, bool) [nsViewManager.cpp:bf901d895201 : 389 + 0x18]
20:36:06 INFO - rbx = 0x000000018883bac0 r12 = 0x0000000112632760
20:36:06 INFO - r13 = 0x0000000000000000 r14 = 0x000000015dc3af00
20:36:06 INFO - r15 = 0x0000000000000000 rip = 0x000000010270719e
20:36:06 INFO - rsp = 0x00007fff5fbe1f40 rbp = 0x00007fff5fbe1f90
20:36:06 INFO - Found by: call frame info
20:36:06 INFO - 3 XUL!nsViewManager::ProcessPendingUpdatesForView(nsView\*, bool) [nsViewManager.cpp:bf901d895201 : 389 + 0x18]
20:36:06 INFO - rbx = 0x000000015dc3af00 r12 = 0x0000000112632760
20:36:06 INFO - r13 = 0x0000000000000000 r14 = 0x000000016297fae0
20:36:06 INFO - r15 = 0x0000000000000000 rip = 0x000000010270719e
20:36:06 INFO - rsp = 0x00007fff5fbe1fa0 rbp = 0x00007fff5fbe1ff0
20:36:06 INFO - Found by: call frame info
20:36:06 INFO - 4 XUL!nsViewManager::ProcessPendingUpdatesForView(nsView\*, bool) [nsViewManager.cpp:bf901d895201 : 389 + 0x18]
20:36:06 INFO - rbx = 0x000000016297fae0 r12 = 0x0000000112632760
20:36:06 INFO - r13 = 0x0000000000000000 r14 = 0x0000000166119790
20:36:06 INFO - r15 = 0x0000000000000000 rip = 0x000000010270719e
20:36:06 INFO - rsp = 0x00007fff5fbe2000 rbp = 0x00007fff5fbe2050
20:36:06 INFO - Found by: call frame info

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=946658#c1)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

RyanVM
<https://tbpl.mozilla.org/php/getParsedLog.php?id=31516732&tree=Mozilla-Inbound>
Rev4 MacOSX Snow Leopard 10.6 mozilla-inbound opt test mochitest-browser-chrome on 2013-12-05 12:13:46
revision: 22770b30545b
slave: talos-r4-snow-077
TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/devtools/debugger/test/browser\_dbg\_variables-view-popup-07.js | application terminated with exit code 256
PROCESS-CRASH | chrome://mochitests/content/browser/browser/devtools/debugger/test/browser\_dbg\_variables-view-popup-07.js | application crashed [@ nsViewManager::ProcessPendingUpdatesForView(nsView\*, bool)]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=946658#c2)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

RyanVM
<https://tbpl.mozilla.org/php/getParsedLog.php?id=31517219&tree=Mozilla-Inbound>
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound debug test mochitest-browser-chrome on 2013-12-05 12:07:56
revision: c63eaabaefb1
slave: talos-mtnlion-r5-011
TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/devtools/debugger/test/browser\_dbg\_variables-view-popup-07.js | application terminated with exit code 256
PROCESS-CRASH | chrome://mochitests/content/browser/browser/devtools/debugger/test/browser\_dbg\_variables-view-popup-07.js | application crashed [@ nsViewManager::ProcessPendingUpdatesForView(nsView\*, bool)]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=946658#c3)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

RyanVM
<https://tbpl.mozilla.org/php/getParsedLog.php?id=31528019&tree=Mozilla-Central>
Rev5 MacOSX Mountain Lion 10.8 mozilla-central debug test mochitest-browser-chrome on 2013-12-05 15:30:05
revision: 2831368a5e05
slave: talos-mtnlion-r5-013
TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/devtools/debugger/test/browser\_dbg\_variables-view-popup-07.js | application terminated with exit code 256
PROCESS-CRASH | chrome://mochitests/content/browser/browser/devtools/debugger/test/browser\_dbg\_variables-view-popup-07.js | application crashed [@ nsView::DoResetWidgetBounds(bool, bool)]
TEST-UNEXPECTED-FAIL | leakcheck | 2968 bytes leaked (CompositorChild, CondVar, Mutex, PCompositorChild, PLayerTransactionChild, ...)
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=946658#c4)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=31530745&tree=Mozilla-Central>
Rev5 MacOSX Mountain Lion 10.8 mozilla-central debug test mochitest-browser-chrome on 2013-12-05 16:21:24
revision: 2831368a5e05
slave: talos-mtnlion-r5-069
TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/devtools/debugger/test/browser\_dbg\_variables-view-popup-07.js | application terminated with exit code 256
PROCESS-CRASH | chrome://mochitests/content/browser/browser/devtools/debugger/test/browser\_dbg\_variables-view-popup-07.js | application crashed [@ nsViewManager::ProcessPendingUpdatesForView(nsView\*, bool)]
TEST-UNEXPECTED-FAIL | leakcheck | 2968 bytes leaked (CompositorChild, CondVar, Mutex, PCompositorChild, PLayerTransactionChild, ...)
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=946658#c5)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=31532336&tree=Mozilla-Central>
Rev5 MacOSX Mountain Lion 10.8 mozilla-central debug test mochitest-browser-chrome on 2013-12-05 16:46:19
revision: 1401e4b394ad
slave: talos-mtnlion-r5-012
TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/devtools/debugger/test/browser\_dbg\_variables-view-popup-07.js | application terminated with exit code 256
PROCESS-CRASH | chrome://mochitests/content/browser/browser/devtools/debugger/test/browser\_dbg\_variables-view-popup-07.js | application crashed [@ nsViewManager::ProcessPendingUpdatesForView(nsView\*, bool)]
Return code: 256

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=946658#a52942_406194)• 11 years ago |

Component: General → Graphics: Layers

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=946658#c6)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=31539616&tree=Mozilla-Inbound>
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound debug test mochitest-browser-chrome on 2013-12-05 19:54:30
revision: ac41fb323652
slave: talos-mtnlion-r5-030
TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/devtools/debugger/test/browser\_dbg\_variables-view-popup-07.js | application terminated with exit code 256
PROCESS-CRASH | chrome://mochitests/content/browser/browser/devtools/debugger/test/browser\_dbg\_variables-view-popup-07.js | application crashed [@ nsViewManager::ProcessPendingUpdatesForView(nsView\*, bool)]
TEST-UNEXPECTED-FAIL | leakcheck | 2968 bytes leaked (CompositorChild, CondVar, Mutex, PCompositorChild, PLayerTransactionChild, ...)
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=946658#c7)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=31540902&tree=Mozilla-Inbound>
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound debug test mochitest-browser-chrome on 2013-12-05 20:29:11
revision: dba508605c1b
slave: talos-mtnlion-r5-069
TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/devtools/debugger/test/browser\_dbg\_variables-view-popup-07.js | application terminated with exit code 256
PROCESS-CRASH | chrome://mochitests/content/browser/browser/devtools/debugger/test/browser\_dbg\_variables-view-popup-07.js | application crashed [@ nsView::DoResetWidgetBounds(bool, bool)]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=946658#c8)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

Tomcat
<https://tbpl.mozilla.org/php/getParsedLog.php?id=31553495&tree=Mozilla-Inbound>
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound debug test mochitest-browser-chrome on 2013-12-06 02:14:28
revision: f7d7744e05b1
slave: talos-mtnlion-r5-019
TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/devtools/debugger/test/browser\_dbg\_variables-view-popup-07.js | application terminated with exit code 256
PROCESS-CRASH | chrome://mochitests/content/browser/browser/devtools/debugger/test/browser\_dbg\_variables-view-popup-07.js | application crashed [@ nsView::DoResetWidgetBounds(bool, bool)]
TEST-UNEXPECTED-FAIL | leakcheck | 2968 bytes leaked (CompositorChild, CondVar, Mutex, PCompositorChild, PLayerTransactionChild, ...)
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=946658#c9)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

Tomcat
<https://tbpl.mozilla.org/php/getParsedLog.php?id=31558057&tree=Fx-Team>
Rev5 MacOSX Mountain Lion 10.8 fx-team debug test mochitest-browser-chrome on 2013-12-06 04:34:19
revision: e9d3b9da94bd
slave: talos-mtnlion-r5-034
TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/devtools/debugger/test/browser\_dbg\_variables-view-popup-07.js | application terminated with exit code 256
PROCESS-CRASH | chrome://mochitests/content/browser/browser/devtools/debugger/test/browser\_dbg\_variables-view-popup-07.js | application crashed [@ nsViewManager::ProcessPendingUpdatesForView(nsView\*, bool)]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=946658#c10)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

Tomcat
<https://tbpl.mozilla.org/php/getParsedLog.php?id=31561181&tree=Mozilla-Central>
Rev5 MacOSX Mountain Lion 10.8 mozilla-central debug test mochitest-browser-chrome on 2013-12-06 05:39:18
revision: 538e52a54db9
slave: talos-mtnlion-r5-051
TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/devtools/debugger/test/browser\_dbg\_variables-view-popup-07.js | application terminated with exit code 256
PROCESS-CRASH | chrome://mochitests/content/browser/browser/devtools/debugger/test/browser\_dbg\_variables-view-popup-07.js | application crashed [@ nsView::DoResetWidgetBounds(bool, bool)]
TEST-UNEXPECTED-FAIL | leakcheck | 2968 bytes leaked (CompositorChild, CondVar, Mutex, PCompositorChild, PLayerTransactionChild, ...)
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=946658#c11)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

RyanVM
<https://tbpl.mozilla.org/php/getParsedLog.php?id=31572224&tree=Fx-Team>
Rev5 MacOSX Mountain Lion 10.8 fx-team debug test mochitest-browser-chrome on 2013-12-06 09:13:51
revision: c26db186948e
slave: talos-mtnlion-r5-069
TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/devtools/debugger/test/browser\_dbg\_variables-view-popup-07.js | application terminated with exit code 256
PROCESS-CRASH | chrome://mochitests/content/browser/browser/devtools/debugger/test/browser\_dbg\_variables-view-popup-07.js | application crashed [@ nsViewManager::ProcessPendingUpdatesForView(nsView\*, bool)]
TEST-UNEXPECTED-FAIL | leakcheck | 2968 bytes leaked (CompositorChild, CondVar, Mutex, PCompositorChild, PLayerTransactionChild, ...)
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=946658#c12)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

RyanVM
<https://tbpl.mozilla.org/php/getParsedLog.php?id=31575512&tree=Fx-Team>
Rev5 MacOSX Mountain Lion 10.8 fx-team debug test mochitest-browser-chrome on 2013-12-06 10:19:44
revision: c26db186948e
slave: talos-mtnlion-r5-046
TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/devtools/debugger/test/browser\_dbg\_variables-view-popup-07.js | application terminated with exit code 256
PROCESS-CRASH | chrome://mochitests/content/browser/browser/devtools/debugger/test/browser\_dbg\_variables-view-popup-07.js | application crashed [@ nsViewManager::ProcessPendingUpdatesForView(nsView\*, bool)]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=946658#c13)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

msucan
<https://tbpl.mozilla.org/php/getParsedLog.php?id=31577745&tree=Try>
Rev5 MacOSX Mountain Lion 10.8 try debug test mochitest-browser-chrome on 2013-12-06 10:59:44
revision: e29c8d6d4ac1
slave: talos-mtnlion-r5-068
TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/devtools/debugger/test/browser\_dbg\_variables-view-popup-07.js | application terminated with exit code 256
PROCESS-CRASH | chrome://mochitests/content/browser/browser/devtools/debugger/test/browser\_dbg\_variables-view-popup-07.js | application crashed [@ nsViewManager::ProcessPendingUpdatesForView(nsView\*, bool)]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=946658#c14)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

edmorley
<https://tbpl.mozilla.org/php/getParsedLog.php?id=32763428&tree=Mozilla-Inbound>
Rev4 MacOSX Snow Leopard 10.6 mozilla-inbound opt test mochitest-browser-chrome on 2014-01-09 07:17:38
revision: 595fd5dfbb5a
slave: talos-r4-snow-108
TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/devtools/debugger/test/browser\_dbg\_variables-view-popup-07.js | application terminated with exit code 1
PROCESS-CRASH | chrome://mochitests/content/browser/browser/devtools/debugger/test/browser\_dbg\_variables-view-popup-07.js | application crashed [@ nsView::DoResetWidgetBounds(bool, bool)]
Return code: 1

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=946658#c15)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

RyanVM
<https://tbpl.mozilla.org/php/getParsedLog.php?id=33815221&tree=Mozilla-Inbound>
Rev4 MacOSX Snow Leopard 10.6 mozilla-inbound opt test mochitest-browser-chrome on 2014-01-30 08:39:43
revision: 1a4489b84a4e
slave: talos-r4-snow-133
TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/devtools/debugger/test/browser\_dbg\_variables-view-popup-07.js | application terminated with exit code 1
PROCESS-CRASH | chrome://mochitests/content/browser/browser/devtools/debugger/test/browser\_dbg\_variables-view-popup-07.js | application crashed [@ nsViewManager::ProcessPendingUpdatesForView(nsView\*, bool)]
Return code: 1

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=946658#c16)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

KWierso
<https://tbpl.mozilla.org/php/getParsedLog.php?id=34702590&tree=Mozilla-Inbound>
Rev4 MacOSX Snow Leopard 10.6 mozilla-inbound opt test mochitest-browser-chrome on 2014-02-14 12:38:48
revision: bb5c1b2dc7e4
slave: talos-r4-snow-086
TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/devtools/debugger/test/browser\_dbg\_variables-view-popup-07.js | application terminated with exit code 1
PROCESS-CRASH | chrome://mochitests/content/browser/browser/devtools/debugger/test/browser\_dbg\_variables-view-popup-07.js | application crashed [@ nsViewManager::ProcessPendingUpdatesForView(nsView\*, bool)]
Return code: 1

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=946658#c17)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

tnikkel
<https://tbpl.mozilla.org/php/getParsedLog.php?id=35317532&tree=Try>
Rev4 MacOSX Snow Leopard 10.6 try opt test mochitest-browser-chrome on 2014-02-26 17:07:35
revision: 5b6d53559be2
slave: talos-r4-snow-126
TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/devtools/debugger/test/browser\_dbg\_variables-view-popup-07.js | application terminated with exit code 1
PROCESS-CRASH | chrome://mochitests/content/browser/browser/devtools/debugger/test/browser\_dbg\_variables-view-popup-07.js | application crashed [@ nsViewManager::ProcessPendingUpdatesForView(nsView\*, bool)]
Return code: 1

|  | [Mats Palmgren (inactive)](/user_profile?user_id=5168)  Assignee |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=946658#c18)• 11 years ago |
|  | |

Looks like a Layout bug to me. I don't like seeing 0x5a5a5a5a5a5a5a5a in the top
stack frame ... smells use-after-free.Group: layout-core-securitySeverity: normal → criticalComponent: Graphics: Layers → Layout: View RenderingKeywords: [csectype-uaf](/buglist.cgi?keywords=csectype-uaf&resolution=---),
[sec-critical](/buglist.cgi?keywords=sec-critical&resolution=---)

|  | [Mats Palmgren (inactive)](/user_profile?user_id=5168)  Assignee |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=946658#c19)• 11 years ago |
|  | |

Attached file
[Relevant part of the log, with crash stack](attachment.cgi?id=8382911)
— [Details](attachment.cgi?id=8382911&action=edit)

|  | [Mats Palmgren (inactive)](/user_profile?user_id=5168)  Assignee |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=946658#c20)• 11 years ago |
|  | |

stack frame #0:
<https://hg.mozilla.org/integration/mozilla-inbound/file/bb5c1b2dc7e4/view/public/nsView.h#l286>
I'm guessing this is the call site:
<https://hg.mozilla.org/integration/mozilla-inbound/file/bb5c1b2dc7e4/view/src/nsViewManager.cpp#l382>
and that 'aView' has been deleted.
Looking at the loop at line 387, and seeing what this method does,
in particular the script blocker on line 417, it seems plausible
that arbitrary nsViews might get deleted inside the loop, including
'childView' which would lead to the crash at hand.
Am I missing something?

|  | [Timothy Nikkel (:tnikkel)](/user_profile?user_id=255010) |  |
| --- | --- | --- |
| [Comment 21](/show_bug.cgi?id=946658#c21)• 11 years ago |
|  | |

Sounds plausible to me.

|  | [Timothy Nikkel (:tnikkel)](/user_profile?user_id=255010) |  |
| --- | --- | --- |
| [Comment 22](/show_bug.cgi?id=946658#c22)• 11 years ago |
|  | |

Actually it might be a bit more complicated then that. We get to ProcessPendingUpdatesForView via PresShell::FlushPendingNotifications, so it must be a call to UpdateWidgetGeometry, which means aFlushDirtyRegion is false and we don't hit the script blocker code. But we know (from eg <https://bug968838.bugzilla.mozilla.org/attachment.cgi?id=8378668>) that ResetWidgetBounds can re-enter into WillPaintWindow which will call ProcessPendingUpdatesForView with aFlushDirtyRegion true.
Maybe we can walk the view tree, saving the widgets we find that need painting or bounds resetting in an array (that holds refs to the widgets), then process the array by getting the view from each widget and doing the painting or bounds resetting.
(A small unrelated bug I just noticed is that ProcessPendingUpdatesForView always has this being the root vm (as the assetion at the top can attest) even with views from child vms, but it also looks members of this in ways which only make sense if this was the vm for the view. Probably doesn't cause many (any?) problems since the only child widgets we have now are popups and plugins.)

|  | [Robert Kaiser](/user_profile?user_id=5189) |  |
| --- | --- | --- |
| [Comment 23](/show_bug.cgi?id=946658#c23)• 11 years ago |
|  | |

(In reply to Mats Palmgren (:mats) from [comment #18](/show_bug.cgi?id=946658#c18 "RESOLVED FIXED - Intermittent browser_dbg_variables-view-popup-07.js | [@ nsView::DoResetWidgetBounds(bool, bool)] or [@ nsViewManager::ProcessPendingUpdatesForView(nsView*, bool)]"))
> Looks like a Layout bug to me. I don't like seeing 0x5a5a5a5a5a5a5a5a in
> the top stack frame ... smells use-after-free.
Yes, that's definitely our poison-on-free() value.

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=946658#a7291380_280903)• 11 years ago |

[status-firefox27](/buglist.cgi?f1=cf_status_firefox27&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=%3F)
[status-firefox28](/buglist.cgi?f1=cf_status_firefox28&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=affected)
[status-firefox29](/buglist.cgi?f1=cf_status_firefox29&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=affected)
[status-firefox30](/buglist.cgi?f1=cf_status_firefox30&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=affected)
[tracking-firefox30](/buglist.cgi?f1=cf_tracking_firefox30&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox30&o1=equals&v1=%2B)

|  | [Timothy Nikkel (:tnikkel)](/user_profile?user_id=255010) |  |
| --- | --- | --- |
| [Comment 24](/show_bug.cgi?id=946658#c24)• 11 years ago |
|  | |

(In reply to Timothy Nikkel (:tn) from [comment #22](/show_bug.cgi?id=946658#c22 "RESOLVED FIXED - Intermittent browser_dbg_variables-view-popup-07.js | [@ nsView::DoResetWidgetBounds(bool, bool)] or [@ nsViewManager::ProcessPendingUpdatesForView(nsView*, bool)]"))
> (A small unrelated bug I just noticed is that ProcessPendingUpdatesForView
> always has this being the root vm (as the assetion at the top can attest)
> even with views from child vms, but it also looks members of this in ways
> which only make sense if this was the vm for the view. Probably doesn't
> cause many (any?) problems since the only child widgets we have now are
> popups and plugins.)
Filed this as [bug 978001](/show_bug.cgi?id=978001 "RESOLVED FIXED - make nsViewManager::ProcessPendingUpdatesForView look at the local view manager instead of always the root one") with patch.

|  | [Mats Palmgren (inactive)](/user_profile?user_id=5168)  Assignee |  |
| --- | --- | --- |
| [Comment 25](/show_bug.cgi?id=946658#c25)• 11 years ago |
|  | |

Attached patch

[wip](attachment.cgi?id=8384289&action=diff) (obsolete)
— [Details](attachment.cgi?id=8384289&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=946658&attachment=8384289)

This implements what you suggested in [comment 22](/show_bug.cgi?id=946658#c22 "RESOLVED FIXED - Intermittent browser_dbg_variables-view-popup-07.js | [@ nsView::DoResetWidgetBounds(bool, bool)] or [@ nsViewManager::ProcessPendingUpdatesForView(nsView*, bool)]").
Also, it splits up the method into three.
The entry point ProcessPendingUpdatesForView now adds a script blocker
around the entire operation, not separately per widget. Ditto for
SetPainting(true/false). The 'this' vm is the root vm, as before.
It then calls ProcessPendingUpdatesRecurse on aView's vm, which recurse
over the view tree and collect the widgets into an array, or calls
FlushDirtyRegionToWidget directly when there isn't one.
Finally it iterates the widget array and calls ProcessPendingUpdatesPaint
for the associated view with its vm as 'this'.
It should be equivalent to the current code, except for wrapping the
entire view tree operation in a script blocker. I think it would be
good if we can get away with that.
The methods names are rather random, I chose a common prefix
ProcessPendingUpdates to associate them with each other. Bike
shedding is welcome.
It did trigger one assertion in the TextFrame code though:
<https://tbpl.mozilla.org/php/getParsedLog.php?id=35491913&tree=Try&full=1>
which is this assertion:
<http://mxr.mozilla.org/mozilla-central/source/layout/generic/nsTextFrame.cpp#2642>
so appearantly it lead to a situation where we are painting a text frame
before it has been reflowed. This doesn't really seem like a bug to me,
since with interruptable reflow you can easily have unreflowed text frames
in the tree. I see that we have a few bugs on file on this assertion
already. I've included a fix.
<https://tbpl.mozilla.org/?tree=Try&rev=da343bba5e14>
<https://tbpl.mozilla.org/?tree=Try&rev=ec9a45f789f6>
(I've triggered a bunch of "bc" runs on 10.8 to see if the crash still occurs)

|  | [Mats Palmgren (inactive)](/user_profile?user_id=5168)  Assignee |  |
| --- | --- | --- |
| [Comment 26](/show_bug.cgi?id=946658#c26)• 11 years ago |
|  | |

Fwiw, there were no crashes in 139 "bc" runs on 10.8. And it looks green otherwise,
with the usual crop of known oranges.

|  | [Mats Palmgren (inactive)](/user_profile?user_id=5168)  Assignee |  |
| --- | --- | --- |
| [Comment 27](/show_bug.cgi?id=946658#c27)• 11 years ago |
|  | |

I will investigate the nsTextFrame assertion a bit further...

|  | [Mats Palmgren (inactive)](/user_profile?user_id=5168)  Assignee |  |
| --- | --- | --- |
| [Comment 28](/show_bug.cgi?id=946658#c28)• 11 years ago |
|  | |

Attached file
[stack+frame dump](attachment.cgi?id=8385132)
— [Details](attachment.cgi?id=8385132&action=edit)

It's the "testuser2" nsTextFrame inside a nsTextControlFrame that
hasn't been reflowed yet. Its ancestors up to and including the
nsTextControlFrame are marked dirty. Given the test is
test\_basic\_form\_autocomplete.html I suspect the <input> value
was changed by form fill. The old code is more eager to run
script runners - it's wrapping each "presShell->Paint" with a
separate script blocker, thus running new ones after each paint.
In my first "wip" patch, they are delayed and only run after all
painting is done. So it might be that some script runner in
nsTextControlFrame / form-fill code depend on the old behavior.

|  | [Mats Palmgren (inactive)](/user_profile?user_id=5168)  Assignee |  |
| --- | --- | --- |
| [Comment 29](/show_bug.cgi?id=946658#c29)• 11 years ago |
|  | |

Attached patch

[fix](attachment.cgi?id=8385389&action=diff) (obsolete)
— [Details](attachment.cgi?id=8385389&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=946658&attachment=8385389)

Running the ResetWidgetBounds() part outside the script blocker
seems to work without triggering the nsTextFrame assertion.
This should be robust enough to not crash I think.
<https://tbpl.mozilla.org/?tree=Try&rev=320cbb7d11a0>
(I still think the nsTextFrame assertion is essentially bogus,
but I don't have time to pursue it.)
[Attachment #8384289](/attachment.cgi?id=8384289&action=edit "wip") -
Attachment is obsolete: true
[Attachment #8385389](/attachment.cgi?id=8385389&action=edit "fix") -
Flags: review?(tnikkel)

|  | [Mats Palmgren (inactive)](/user_profile?user_id=5168)  Assignee |  |
| --- | --- | --- |
| [Comment 30](/show_bug.cgi?id=946658#c30)• 11 years ago |
|  | |

Forgot to include a link to the Android/B2G test run:
<https://tbpl.mozilla.org/?tree=Try&rev=51111a806cfe>

|  | [Timothy Nikkel (:tnikkel)](/user_profile?user_id=255010) |  |
| --- | --- | --- |
| [Comment 31](/show_bug.cgi?id=946658#c31)• 11 years ago |
|  | |

Comment on [attachment 8385389](/attachment.cgi?id=8385389 "fix") [[details]](/attachment.cgi?id=8385389&action=edit "fix") [[diff]](/attachment.cgi?id=8385389&action=diff "fix") [[review]](/page.cgi?id=splinter.html&ignore=&bug=946658&attachment=8385389)
fix
>+ for (size\_t i = 0; i < widgets.Length(); ++i) {
I think Length returns a uint32\_t.
>+ nsView\* view = nsView::GetViewFor(widgets[i]);
>+ if (view) {
>+ view->ResetWidgetBounds(false, true);
>+ }
>+ }
>+ if (aFlushDirtyRegion) {
>+ nsAutoScriptBlocker scriptBlocker;
>+ SetPainting(true);
Since ResetWidgetBounds can re-enter I think at this point we need to guard against |this| being destroyed. Perhaps just do this per-widget and call it lower down when we have a view and a vm from the widget.
>+ for (size\_t i = 0; i < widgets.Length(); ++i) {
>+ nsIWidget\* widget = widgets[i];
>+ nsView\* view = nsView::GetViewFor(widget);
>+ if (view && widget->NeedsPaint()) {
>+ view->GetViewManager()->ProcessPendingUpdatesPaint(widget);
>+ }
>+ }
>+ SetPainting(false);
>+ }
>+}
It looks like if we encounter a widget that has NeedsPaint() being false then we won't call FlushDirtyRegionToWidget, whereas we did before.
Otherwise looks good.
[Attachment #8385389](/attachment.cgi?id=8385389&action=edit "fix") -
Flags: review?(tnikkel)

|  | [Mats Palmgren (inactive)](/user_profile?user_id=5168)  Assignee |  |
| --- | --- | --- |
| [Comment 32](/show_bug.cgi?id=946658#c32)• 11 years ago |
|  | |

Attached patch

[fix](attachment.cgi?id=8386749&action=diff) (obsolete)
— [Details](attachment.cgi?id=8386749&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=946658&attachment=8386749)

(In reply to Timothy Nikkel (:tn) from [comment #31](/show_bug.cgi?id=946658#c31 "RESOLVED FIXED - Intermittent browser_dbg_variables-view-popup-07.js | [@ nsView::DoResetWidgetBounds(bool, bool)] or [@ nsViewManager::ProcessPendingUpdatesForView(nsView*, bool)]"))
> >+ for (size\_t i = 0; i < widgets.Length(); ++i) {
>
> I think Length returns a uint32\_t.
Fixed, but I think it's a bug that it doesn't return a size\_t.
> >+ if (aFlushDirtyRegion) {
> >+ nsAutoScriptBlocker scriptBlocker;
> >+ SetPainting(true);
>
> Since ResetWidgetBounds can re-enter I think at this point we need to guard
> against |this| being destroyed. Perhaps just do this per-widget and call it
> lower down when we have a view and a vm from the widget.
Fair enough. I'd like to keep it wrapped around the whole loop
though so I added a strong ref on the shell and check that 'this'
is still its vm.
> It looks like if we encounter a widget that has NeedsPaint() being false
> then we won't call FlushDirtyRegionToWidget, whereas we did before.
ProcessPendingUpdatesRecurse does that for non-widget views.
<https://tbpl.mozilla.org/?tree=Try&rev=3f8f8b4e505f>
<https://tbpl.mozilla.org/?tree=Try&rev=faa0e0080fa0>Assignee: nobody → matspal
[Attachment #8385389](/attachment.cgi?id=8385389&action=edit "fix") -
Attachment is obsolete: true
[Attachment #8386749](/attachment.cgi?id=8386749&action=edit "fix") -
Flags: review?(tnikkel)

|  | [Mats Palmgren (inactive)](/user_profile?user_id=5168)  Assignee |  |
| --- | --- | --- |
| [Comment 33](/show_bug.cgi?id=946658#c33)• 11 years ago |
|  | |

Comment on [attachment 8386749](/attachment.cgi?id=8386749 "fix") [[details]](/attachment.cgi?id=8386749&action=edit "fix") [[diff]](/attachment.cgi?id=8386749&action=diff "fix") [[review]](/page.cgi?id=splinter.html&ignore=&bug=946658&attachment=8386749)
fix
> > It looks like if we encounter a widget that has NeedsPaint() being false
> > then we won't call FlushDirtyRegionToWidget, whereas we did before.
>
> ProcessPendingUpdatesRecurse does that for non-widget views.
Oh, I see that I misunderstood your comment there.
[Attachment #8386749](/attachment.cgi?id=8386749&action=edit "fix") -
Flags: review?(tnikkel)

|  | [Ed Morley [:emorley]](/user_profile?user_id=373476) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=946658#a7884559_373476)• 11 years ago |

Summary: Intermittent TEST-UNEXPECTED-FAIL | test/browser\_dbg\_variables-view-popup-07.js | application terminated with exit code 256 | [@ nsView::DoResetWidgetBounds(bool, bool)] | | leakcheck | 2968 bytes leaked (CompositorChild, CondVar, Mutex, PCompositorChild → Intermittent browser\_dbg\_variables-view-popup-07.js | [@ nsView::DoResetWidgetBounds(bool, bool)] or [@ nsViewManager::ProcessPendingUpdatesForView(nsView\*, bool)]

|  | [Mats Palmgren (inactive)](/user_profile?user_id=5168)  Assignee |  |
| --- | --- | --- |
| [Comment 35](/show_bug.cgi?id=946658#c35)• 11 years ago |
|  | |

Attached patch

[fix](attachment.cgi?id=8387388&action=diff)
— [Details](attachment.cgi?id=8387388&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=946658&attachment=8387388)

(In reply to Timothy Nikkel (:tn) from [comment #31](/show_bug.cgi?id=946658#c31 "RESOLVED FIXED - Intermittent browser_dbg_variables-view-popup-07.js | [@ nsView::DoResetWidgetBounds(bool, bool)] or [@ nsViewManager::ProcessPendingUpdatesForView(nsView*, bool)]"))
> It looks like if we encounter a widget that has NeedsPaint() being false
> then we won't call FlushDirtyRegionToWidget, whereas we did before.
Good catch. The name "NeedsPaint" seems slightly misleading though -
"HasNonEmptyVisibleArea" would be a better name for what it actually does
so skipping FlushDirtyRegionToWidget when it's false would probably be OK.
Anyway, let's play it safe and not change that bit.
<https://tbpl.mozilla.org/?tree=Try&rev=00286c634d36>
[Attachment #8386749](/attachment.cgi?id=8386749&action=edit "fix") -
Attachment is obsolete: true
[Attachment #8387388](/attachment.cgi?id=8387388&action=edit "fix") -
Flags: review?(tnikkel)

|  | [Timothy Nikkel (:tnikkel)](/user_profile?user_id=255010) |  |
| --- | --- | --- |
| [Comment 36](/show_bug.cgi?id=946658#c36)• 11 years ago |
|  | |

Comment on [attachment 8387388](/attachment.cgi?id=8387388 "fix") [[details]](/attachment.cgi?id=8387388&action=edit "fix") [[diff]](/attachment.cgi?id=8387388&action=diff "fix") [[review]](/page.cgi?id=splinter.html&ignore=&bug=946658&attachment=8387388)
fix
Looks good, thanks!
[Attachment #8387388](/attachment.cgi?id=8387388&action=edit "fix") -
Flags: review?(tnikkel) → review+

|  | [Timothy Nikkel (:tnikkel)](/user_profile?user_id=255010) |  |
| --- | --- | --- |
| [Comment 37](/show_bug.cgi?id=946658#c37)• 11 years ago |
|  | |

Maybe this will fix [bug 974542](/show_bug.cgi?id=974542 "RESOLVED WORKSFORME - Hard crash while debugging")?

|  | [Mats Palmgren (inactive)](/user_profile?user_id=5168)  Assignee |  |
| --- | --- | --- |
| [Comment 38](/show_bug.cgi?id=946658#c38)• 11 years ago |
|  | |

<https://tbpl.mozilla.org/?usebuildbot=1&tree=Mozilla-Inbound>
[status-firefox30](/buglist.cgi?f1=cf_status_firefox30&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=fixed)Flags: in-testsuite-

|  | [Timothy Nikkel (:tnikkel)](/user_profile?user_id=255010) |  |
| --- | --- | --- |
| [Comment 39](/show_bug.cgi?id=946658#c39)• 11 years ago |
| landing | |

I think you meant
<https://hg.mozilla.org/integration/mozilla-inbound/rev/4fe82d0824d1>

|  | [Mats Palmgren (inactive)](/user_profile?user_id=5168)  Assignee |  |
| --- | --- | --- |
| [Comment 40](/show_bug.cgi?id=946658#c40)• 11 years ago |
|  | |

Yes, thank you.
I've backed it out temporarily to investigate a Tp5 regression:
<https://hg.mozilla.org/integration/mozilla-inbound/rev/d1c54bc2bb71>

|  | [Mats Palmgren (inactive)](/user_profile?user_id=5168)  Assignee |  |
| --- | --- | --- |
| [Comment 41](/show_bug.cgi?id=946658#c41)• 11 years ago |
|  | |

The perf-o-matic chart btw:
<http://graphs.mozilla.org/graph.html#tests=[[257,131,35]]&sel=1394102638000,1394275438000&displayrange=7&datatype=running>

|  | [Timothy Nikkel (:tnikkel)](/user_profile?user_id=255010) |  |
| --- | --- | --- |
| [Comment 42](/show_bug.cgi?id=946658#c42)• 11 years ago |
|  | |

There's since been many new results and the graph has not gone back done. Something else must have caused it.

|  | [Timothy Nikkel (:tnikkel)](/user_profile?user_id=255010) |  |
| --- | --- | --- |
| [Comment 43](/show_bug.cgi?id=946658#c43)• 11 years ago |
|  | |

Looking at the graph values this changeset also seems to be in the regression range
<https://hg.mozilla.org/integration/mozilla-inbound/rev/45ac7b7d7466>

|  | [Mats Palmgren (inactive)](/user_profile?user_id=5168)  Assignee |  |
| --- | --- | --- |
| [Comment 44](/show_bug.cgi?id=946658#c44)• 11 years ago |
|  | |

I don't see a difference after the backout either, so I've re-landed it:
<https://hg.mozilla.org/integration/mozilla-inbound/rev/399e4c0b9a6f>

|  | [Mats Palmgren (inactive)](/user_profile?user_id=5168)  Assignee |  |
| --- | --- | --- |
| [Comment 45](/show_bug.cgi?id=946658#c45)• 11 years ago |
|  | |

(In reply to Timothy Nikkel (:tn) from [comment #43](/show_bug.cgi?id=946658#c43 "RESOLVED FIXED - Intermittent browser_dbg_variables-view-popup-07.js | [@ nsView::DoResetWidgetBounds(bool, bool)] or [@ nsViewManager::ProcessPendingUpdatesForView(nsView*, bool)]"))
> Looking at the graph values this changeset also seems to be in the
> regression range
Thanks, the other people with patches in the regression window are already notified.

|  | [Phil Ringnalda (:philor)](/user_profile?user_id=135518) |  |
| --- | --- | --- |
| [Comment 46](/show_bug.cgi?id=946658#c46)• 11 years ago |
| landing | |

<https://hg.mozilla.org/mozilla-central/rev/399e4c0b9a6f>Status: NEW → RESOLVEDClosed: 11 years agoResolution: --- → FIXEDTarget Milestone: --- → mozilla30

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=946658#a8196711_1689)• 11 years ago |

Group: layout-core-security → core-security

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 47](/show_bug.cgi?id=946658#c47)• 11 years ago |
|  | |

Is this safe to take on 28 this late in the game?
[status-b2g-v1.3](/buglist.cgi?f1=cf_status_b2g_1_3&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=affected)
[status-b2g-v1.4](/buglist.cgi?f1=cf_status_b2g_1_4&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=fixed)
[status-firefox-esr24](/buglist.cgi?f1=cf_status_firefox_esr24&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=unaffected)Flags: needinfo?(matspal)

|  | [Mats Palmgren (inactive)](/user_profile?user_id=5168)  Assignee |  |
| --- | --- | --- |
| [Comment 48](/show_bug.cgi?id=946658#c48)• 11 years ago |
|  | |

(In reply to Ryan VanderMeulen [:RyanVM UTC-5] from [comment #47](/show_bug.cgi?id=946658#c47 "RESOLVED FIXED - Intermittent browser_dbg_variables-view-popup-07.js | [@ nsView::DoResetWidgetBounds(bool, bool)] or [@ nsViewManager::ProcessPendingUpdatesForView(nsView*, bool)]"))
> Is this safe to take on 28 this late in the game?
No, that's too risky IMO. I'd like at least a couple of weeks in Beta for something
like this to find any regressions. It should be OK for Aurora though.Flags: needinfo?(matspal)

|  | [Mats Palmgren (inactive)](/user_profile?user_id=5168)  Assignee |  |
| --- | --- | --- |
| [Comment 49](/show_bug.cgi?id=946658#c49)• 11 years ago |
|  | |

Comment on [attachment 8387388](/attachment.cgi?id=8387388 "fix") [[details]](/attachment.cgi?id=8387388&action=edit "fix") [[diff]](/attachment.cgi?id=8387388&action=diff "fix") [[review]](/page.cgi?id=splinter.html&ignore=&bug=946658&attachment=8387388)
fix
[Approval Request Comment]
Bug caused by (feature/regressing bug #): -
User impact if declined: use-after-free crash
Testing completed (on m-c, etc.): on m-c since 2014-03-08
Risk to taking this patch (and alternatives if risky): low-to-medium risk
String or IDL/UUID changes made by this patch: none
[Attachment #8387388](/attachment.cgi?id=8387388&action=edit "fix") -
Flags: approval-mozilla-aurora?

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=946658#a8235446_280903)• 11 years ago |

[Attachment #8387388](/attachment.cgi?id=8387388&action=edit "fix") -
Flags: approval-mozilla-aurora? → approval-mozilla-aurora+

|  | [Mats Palmgren (inactive)](/user_profile?user_id=5168)  Assignee |  |
| --- | --- | --- |
| [Comment 50](/show_bug.cgi?id=946658#c50)• 11 years ago |
| landing | |

<https://hg.mozilla.org/releases/mozilla-aurora/rev/28d2834f0617>
[status-firefox29](/buglist.cgi?f1=cf_status_firefox29&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=fixed)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 51](/show_bug.cgi?id=946658#c51)• 11 years ago |
|  | |

We may want to get this on b2g28 (v1.3) at some point still.
[status-firefox27](/buglist.cgi?f1=cf_status_firefox27&o1=isnotempty):
[?](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=%3F) → [wontfix](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=wontfix)
[status-firefox28](/buglist.cgi?f1=cf_status_firefox28&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=wontfix)

|  | [Mats Palmgren (inactive)](/user_profile?user_id=5168)  Assignee |  |
| --- | --- | --- |
| [Comment 52](/show_bug.cgi?id=946658#c52)• 11 years ago |
|  | |

Note that you need the patches in [bug 978001](/show_bug.cgi?id=978001 "RESOLVED FIXED - make nsViewManager::ProcessPendingUpdatesForView look at the local view manager instead of always the root one") too.

|  | [Timothy Nikkel (:tnikkel)](/user_profile?user_id=255010) |  |
| --- | --- | --- |
| [Comment 53](/show_bug.cgi?id=946658#c53)• 11 years ago |
|  | |

Took a look at crash-stats. This seems to have fixed our top two crashes that have nsView in the signature.

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 54](/show_bug.cgi?id=946658#c54)• 11 years ago |
|  | |

We've shipped a couple betas now that include this change. Mats, think this has baked enough that we're OK getting it on b2g28?Flags: needinfo?(matspal)

|  | [Mats Palmgren (inactive)](/user_profile?user_id=5168)  Assignee |  |
| --- | --- | --- |
| [Comment 55](/show_bug.cgi?id=946658#c55)• 11 years ago |
|  | |

Yes, it should be OK now I think.Flags: needinfo?(matspal)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 56](/show_bug.cgi?id=946658#c56)• 11 years ago |
|  | |

Thanks!
<https://hg.mozilla.org/releases/mozilla-b2g28_v1_3/rev/31177245de3f>
[status-b2g-v1.2](/buglist.cgi?f1=cf_status_b2g_1_2&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=unaffected)
[status-b2g-v1.3](/buglist.cgi?f1=cf_status_b2g_1_3&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=fixed)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=946658#a9818681_75935)• 11 years ago |

[status-b2g-v1.3T](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=fixed)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=946658#a11429408_280903)• 11 years ago |

Whiteboard: [adv-main29+]

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=946658#a54716773_1689)• 9 years ago |

Group: core-security

|  | [Nobody; OK to take it and work on it](/user_profile?user_id=1) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=946658#a149336966_1)• 6 years ago |

Component: Layout: View Rendering → Layout: Web Painting
You need to [log in](/show_bug.cgi?id=946658&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Mats Palmgren (inactive)](/user_profile?user_id=5168)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from bugzilla.mozilla.org_4ecf259e_20250125_092506.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/990794)
* [XML](/show_bug.cgi?ctype=xml&id=990794)

Closed
[Bug 990794](/show_bug.cgi?id=990794)

Opened 11 years ago
Closed 11 years ago

# heap overflow write from allocation size overflow in AllocateAudioBlock

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

heap overflow write from allocation size overflow in AllocateAudioBlock

## Categories

### (Core :: Web Audio, defect, P1)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=Web%20Audio#Web%20Audio)

Web Audio
▾

Core :: Web Audio
Bugs and enhancement requests relating to the Web Audio support.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=Web%20Audio&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=Web%20Audio&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=Web%20Audio)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

x86\_64

All

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

P1

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

normal

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla31

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Webcompat Priority | --- |
| --- | --- |
| a11y-review | --- |
| Accessibility Severity | --- |
| Webcompat Score | --- |
| Performance Impact | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox28 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=wontfix) |
| firefox29 | [+](/buglist.cgi?f1=cf_tracking_firefox29&o1=equals&v1=%2B) | [verified](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=verified) |
| firefox30 | [+](/buglist.cgi?f1=cf_tracking_firefox30&o1=equals&v1=%2B) | [verified](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=verified) |
| firefox31 | [+](/buglist.cgi?f1=cf_tracking_firefox31&o1=equals&v1=%2B) | [verified](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=verified) |
| firefox-esr24 | --- | [unaffected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=unaffected) |
| b2g18 | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=unaffected) |
| b2g-v1.1hd | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=equals&v1=unaffected) |
| b2g-v1.2 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=fixed) |
| b2g-v1.3 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=fixed) |
| b2g-v1.3T | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=fixed) |
| b2g-v1.4 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=fixed) |
| b2g-v2.0 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_2_0&o1=equals&v1=fixed) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox28 |  | wontfix |
| firefox29 | + | verified |
| firefox30 | + | verified |
| firefox31 | + | verified |
| firefox-esr24 |  | unaffected |
| b2g18 |  | unaffected |
| b2g-v1.1hd |  | unaffected |
| b2g-v1.2 |  | fixed |
| b2g-v1.3 |  | fixed |
| b2g-v1.3T |  | fixed |
| b2g-v1.4 |  | fixed |
| b2g-v2.0 |  | fixed |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: karlt, Assigned: karlt)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/15d034eb5ed480cb10a8a9e41e8b9f13?d=mm&size=40)  [karlt](/user_profile?user_id=274246)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/15d034eb5ed480cb10a8a9e41e8b9f13?d=mm&size=40)  [karlt](/user_profile?user_id=274246)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/15d034eb5ed480cb10a8a9e41e8b9f13?d=mm&size=40)  [karlt](/user_profile?user_id=274246)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

15 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[990868](/show_bug.cgi?id=990868 "VERIFIED FIXED - limit ChannelMergerNode output channel count"), [991251](/show_bug.cgi?id=991251 "RESOLVED DUPLICATE - Heap-buffer-overflow in mozilla::AudioBlockCopyChannelWithScale triggered with ChannelMergerNode")

Dependency [tree](/showdependencytree.cgi?id=990794&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=990794)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[Duplicates:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#duplicates)

[991251](/show_bug.cgi?id=991251 "RESOLVED DUPLICATE - Heap-buffer-overflow in mozilla::AudioBlockCopyChannelWithScale triggered with ChannelMergerNode")

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

[877039](/show_bug.cgi?id=877039 "RESOLVED FIXED - WebAudio OOM crash [@AllocateAudioBlock]")

## Details

### (Keywords: csectype-intoverflow, regression, sec-critical, Whiteboard: [adv-main29+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[csectype-intoverflow](/buglist.cgi?keywords=csectype-intoverflow&resolution=---),
[regression](/buglist.cgi?keywords=regression&resolution=---),
[sec-critical](/buglist.cgi?keywords=sec-critical&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[adv-main29+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [karlt](/user_profile?user_id=274246) | [in-testsuite](#c16 "11 years ago") | + |
| --- | --- | --- |
| [karlt](/user_profile?user_id=274246) | in-testsuite | + |
| --- | --- | --- |
|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (3 files)

| [crashing testcase](/attachment.cgi?id=8400264)  [11 years ago](#c1)  [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)   382 bytes, text/html |  | [Details](/attachment.cgi?id=8400264&action=edit) |
| --- | --- | --- |
| [crash on ovrfl in SharedBuffer::Create()](/attachment.cgi?id=8400386)  [11 years ago](#c2)  [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)   1.67 KB, patch | roc : [review+](#a115980_5038 "11 years ago")  Sylvestre : [approval-mozilla-aurora+](#a479327_495955 "11 years ago")  Sylvestre : [approval-mozilla-beta+](#a479327_495955 "11 years ago")  abillings : [sec-approval+](#c5 "11 years ago") | [Details](/attachment.cgi?id=8400386&action=edit) | [Diff](/attachment.cgi?id=8400386&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=990794&attachment=8400386) |
| [crash on ovrfl in AllocateAudioBlock](/attachment.cgi?id=8400387)  [11 years ago](#c3)  [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)   1.24 KB, patch | roc : [review+](#a115990_5038 "11 years ago") | [Details](/attachment.cgi?id=8400387&action=edit) | [Diff](/attachment.cgi?id=8400387&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=990794&attachment=8400387) |

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)  Assignee |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=990794#c0)• 11 years ago |
|  | |

<http://hg.mozilla.org/mozilla-central/annotate/4941a2ac0786/content/media/AudioNodeEngine.cpp#l21>

|  | [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)  Assignee |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=990794#c1)• 11 years ago |
|  | |

Attached file
[crashing testcase](attachment.cgi?id=8400264)
— [Details](attachment.cgi?id=8400264&action=edit)

|  | [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=990794#a14395_274246)• 11 years ago |

Keywords: [csectype-intoverflow](/buglist.cgi?keywords=csectype-intoverflow&resolution=---)

|  | [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=990794#a14688_274246)• 11 years ago |

Blocks: [990868](/show_bug.cgi?id=990868 "VERIFIED FIXED - limit ChannelMergerNode output channel count")

|  | [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)  Assignee |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=990794#c2)• 11 years ago |
|  | |

Attached patch

[crash on ovrfl in SharedBuffer::Create()](attachment.cgi?id=8400386&action=diff)
— [Details](attachment.cgi?id=8400386&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=990794&attachment=8400386)

Perhaps being a little paranoid.
[Attachment #8400386](/attachment.cgi?id=8400386&action=edit "crash on ovrfl in SharedBuffer::Create()") -
Flags: review?(roc)

|  | [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)  Assignee |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=990794#c3)• 11 years ago |
|  | |

Attached patch

[crash on ovrfl in AllocateAudioBlock](attachment.cgi?id=8400387&action=diff)
— [Details](attachment.cgi?id=8400387&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=990794&attachment=8400387)

[Attachment #8400387](/attachment.cgi?id=8400387&action=edit "crash on ovrfl in AllocateAudioBlock") -
Flags: review?(roc)

|  | [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=990794#a92626_274246)• 11 years ago |

Blocks: [991251](/show_bug.cgi?id=991251 "RESOLVED DUPLICATE - Heap-buffer-overflow in mozilla::AudioBlockCopyChannelWithScale triggered with ChannelMergerNode")

|  | [Robert O'Callahan (:roc) (email my personal email if necessary)](/user_profile?user_id=5038) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=990794#a115980_5038)• 11 years ago |

[Attachment #8400386](/attachment.cgi?id=8400386&action=edit "crash on ovrfl in SharedBuffer::Create()") -
Flags: review?(roc) → review+

|  | [Robert O'Callahan (:roc) (email my personal email if necessary)](/user_profile?user_id=5038) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=990794#a115990_5038)• 11 years ago |

[Attachment #8400387](/attachment.cgi?id=8400387&action=edit "crash on ovrfl in AllocateAudioBlock") -
Flags: review?(roc) → review+

|  | [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)  Assignee |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=990794#c4)• 11 years ago |
|  | |

Comment on [attachment 8400386](/attachment.cgi?id=8400386 "crash on ovrfl in SharedBuffer::Create()") [[details]](/attachment.cgi?id=8400386&action=edit "crash on ovrfl in SharedBuffer::Create()") [[diff]](/attachment.cgi?id=8400386&action=diff "crash on ovrfl in SharedBuffer::Create()") [[review]](/page.cgi?id=splinter.html&ignore=&bug=990794&attachment=8400386)
crash on ovrfl in SharedBuffer::Create()
Please consider this a request to land both patches here.
[Security approval request comment]
How easily could an exploit be constructed based on the patch?
There are multiple callers of the functions patched here.
Creating an exploit based on the testcase here requires a little knowledge of Web Audio or looking through a fair bit of code to find this caller. Those looking at [bug 877039](/show_bug.cgi?id=877039 "RESOLVED FIXED - WebAudio OOM crash [@AllocateAudioBlock]") didn't consider this possible route. However, there may be other simpler, more obvious routes, if a large number of memory allocations first succeed.
Do comments in the patch, the check-in comment, or tests included in the patch paint a bulls-eye on the security problem?
No tests, but the patch clearly identifies the problem.
Which older supported branches are affected by this flaw?
The flaw goes back to 25. 24 is unaffected.
If not all supported branches, which bug introduced the flaw?
Do you have backports for the affected branches? If not, how different, hard to create, and risky will they be?
Patches apply to 28 with minimal fuzz.
How likely is this patch to cause regressions; how much testing does it need?
Low risk. It is a widely used code path, with plenty of automated tests.
[Attachment #8400386](/attachment.cgi?id=8400386&action=edit "crash on ovrfl in SharedBuffer::Create()") -
Flags: sec-approval?

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=990794#a150831_280903)• 11 years ago |

[status-firefox28](/buglist.cgi?f1=cf_status_firefox28&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=wontfix)
[tracking-firefox29](/buglist.cgi?f1=cf_tracking_firefox29&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox29&o1=equals&v1=%2B)
[tracking-firefox30](/buglist.cgi?f1=cf_tracking_firefox30&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox30&o1=equals&v1=%2B)
[tracking-firefox31](/buglist.cgi?f1=cf_tracking_firefox31&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox31&o1=equals&v1=%2B)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=990794#c5)• 11 years ago |
|  | |

Comment on [attachment 8400386](/attachment.cgi?id=8400386 "crash on ovrfl in SharedBuffer::Create()") [[details]](/attachment.cgi?id=8400386&action=edit "crash on ovrfl in SharedBuffer::Create()") [[diff]](/attachment.cgi?id=8400386&action=diff "crash on ovrfl in SharedBuffer::Create()") [[review]](/page.cgi?id=splinter.html&ignore=&bug=990794&attachment=8400386)
crash on ovrfl in SharedBuffer::Create()
sec-approval+ for trunk. Let's get Aurora and Beta patches created and nominated too once it is on trunk.
[Attachment #8400386](/attachment.cgi?id=8400386&action=edit "crash on ovrfl in SharedBuffer::Create()") -
Flags: sec-approval? → sec-approval+

|  | [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)  Assignee |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=990794#c6)• 11 years ago |
|  | |

<https://hg.mozilla.org/integration/mozilla-inbound/rev/67aa1910829f>
<https://hg.mozilla.org/integration/mozilla-inbound/rev/9bf8ed8f658b>

|  | [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)  Assignee |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=990794#c7)• 11 years ago |
|  | |

Comment on [attachment 8400386](/attachment.cgi?id=8400386 "crash on ovrfl in SharedBuffer::Create()") [[details]](/attachment.cgi?id=8400386&action=edit "crash on ovrfl in SharedBuffer::Create()") [[diff]](/attachment.cgi?id=8400386&action=diff "crash on ovrfl in SharedBuffer::Create()") [[review]](/page.cgi?id=splinter.html&ignore=&bug=990794&attachment=8400386)
crash on ovrfl in SharedBuffer::Create()
Please consider this a request for both patches here.
They apply cleanly to 29/Beta.
[Approval Request Comment]
Bug caused by (feature/regressing bug #): Web Audio. old bug.
User impact if declined: security bug.
Testing completed (on m-c, etc.): This code path is used in many automated tests.
Risk to taking this patch (and alternatives if risky): not risky at all.
String or IDL/UUID changes made by this patch: none
[Attachment #8400386](/attachment.cgi?id=8400386&action=edit "crash on ovrfl in SharedBuffer::Create()") -
Flags: approval-mozilla-beta?
[Attachment #8400386](/attachment.cgi?id=8400386&action=edit "crash on ovrfl in SharedBuffer::Create()") -
Flags: approval-mozilla-aurora?

|  | [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)  Assignee |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=990794#c8)• 11 years ago |
|  | |

Comment on [attachment 8400386](/attachment.cgi?id=8400386 "crash on ovrfl in SharedBuffer::Create()") [[details]](/attachment.cgi?id=8400386&action=edit "crash on ovrfl in SharedBuffer::Create()") [[diff]](/attachment.cgi?id=8400386&action=diff "crash on ovrfl in SharedBuffer::Create()") [[review]](/page.cgi?id=splinter.html&ignore=&bug=990794&attachment=8400386)
crash on ovrfl in SharedBuffer::Create()
The patches apply with fuzz 2 to 28 and b2g26\_v1\_2.
[Approval Request Comment]
Please see aurora/beta request.
[Attachment #8400386](/attachment.cgi?id=8400386&action=edit "crash on ovrfl in SharedBuffer::Create()") -
Flags: approval-mozilla-b2g28?
[Attachment #8400386](/attachment.cgi?id=8400386&action=edit "crash on ovrfl in SharedBuffer::Create()") -
Flags: approval-mozilla-b2g26?

|  | [Sylvestre Ledru [:Sylvestre]](/user_profile?user_id=495955) |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=990794#c9)• 11 years ago |
|  | |

I will approve the patch for aurora & beta once it has reached m-c.

|  | [Carsten Book [:Tomcat]](/user_profile?user_id=277293) |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=990794#c10)• 11 years ago |
|  | |

landed on m-c
<https://hg.mozilla.org/mozilla-central/rev/67aa1910829f>
<https://hg.mozilla.org/mozilla-central/rev/9bf8ed8f658b>
[status-firefox31](/buglist.cgi?f1=cf_status_firefox31&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=fixed)Flags: in-testsuite?Target Milestone: --- → mozilla31

|  | [Carsten Book [:Tomcat]](/user_profile?user_id=277293) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=990794#a479113_277293)• 11 years ago |

Status: ASSIGNED → RESOLVEDClosed: 11 years agoResolution: --- → FIXED

|  | [Sylvestre Ledru [:Sylvestre]](/user_profile?user_id=495955) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=990794#a479327_495955)• 11 years ago |

[Attachment #8400386](/attachment.cgi?id=8400386&action=edit "crash on ovrfl in SharedBuffer::Create()") -
Flags: approval-mozilla-beta?
[Attachment #8400386](/attachment.cgi?id=8400386&action=edit "crash on ovrfl in SharedBuffer::Create()") -
Flags: approval-mozilla-beta+
[Attachment #8400386](/attachment.cgi?id=8400386&action=edit "crash on ovrfl in SharedBuffer::Create()") -
Flags: approval-mozilla-aurora?
[Attachment #8400386](/attachment.cgi?id=8400386&action=edit "crash on ovrfl in SharedBuffer::Create()") -
Flags: approval-mozilla-aurora+

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=990794#a494207_75935)• 11 years ago |

[Attachment #8400386](/attachment.cgi?id=8400386&action=edit "crash on ovrfl in SharedBuffer::Create()") -
Flags: approval-mozilla-b2g28?
[Attachment #8400386](/attachment.cgi?id=8400386&action=edit "crash on ovrfl in SharedBuffer::Create()") -
Flags: approval-mozilla-b2g26?

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=990794#c11)• 11 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-aurora/rev/500c93ec076a>
<https://hg.mozilla.org/releases/mozilla-aurora/rev/56d760bc26ac>
<https://hg.mozilla.org/releases/mozilla-beta/rev/51a84afe085d>
<https://hg.mozilla.org/releases/mozilla-beta/rev/004a7c15d761>
<https://hg.mozilla.org/releases/mozilla-b2g28_v1_3/rev/c48b469120b6>
<https://hg.mozilla.org/releases/mozilla-b2g28_v1_3/rev/abb7f1b0c6f1>
<https://hg.mozilla.org/releases/mozilla-b2g26_v1_2/rev/400b174cafc8>
<https://hg.mozilla.org/releases/mozilla-b2g26_v1_2/rev/98d412b487cf>
[status-b2g18](/buglist.cgi?f1=cf_status_b2g18&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=unaffected)
[status-b2g-v1.1hd](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=equals&v1=unaffected)
[status-b2g-v1.2](/buglist.cgi?f1=cf_status_b2g_1_2&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=fixed)
[status-b2g-v1.3](/buglist.cgi?f1=cf_status_b2g_1_3&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=fixed)
[status-b2g-v1.4](/buglist.cgi?f1=cf_status_b2g_1_4&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=fixed)
[status-b2g-v2.0](/buglist.cgi?f1=cf_status_b2g_2_0&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_b2g_2_0&o1=equals&v1=fixed)
[status-firefox29](/buglist.cgi?f1=cf_status_firefox29&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=fixed)
[status-firefox30](/buglist.cgi?f1=cf_status_firefox30&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=fixed)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=990794#a530357_75935)• 11 years ago |

[status-b2g-v1.3T](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=fixed)

|  | [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)  Assignee |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=990794#c12)• 11 years ago |
|  | |

Verifying the fix here on 32-bit builds requires comparing the crash stacks of before and after builds. The "before" build may not crash at a reliable location but it is likely to be in AudioBlockCopyChannelWithScale. The "after" build should crash in AllocateAudioBlock.
64-bit builds may now either load this testcase fine or crash on OOM.
Previously they would crash like 32-bit builds.

|  | [Bogdan Maris, Desktop Test Engineering](/user_profile?user_id=458188) |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=990794#c13)• 11 years ago |
|  | |

The crashes from Windows 8.1 32bit look the same for 'before' and 'after' builds (check the crash reports bellow. Is this normal?
Ubuntu 13.10 64bit:
Reproduced the crash on old nightly:
[bp-0f842743-da20-4e71-93e1-28a222140410](https://crash-stats.mozilla.org/report/index/0f842743-da20-4e71-93e1-28a222140410)
On latest Nightly, Aurora, Firefox 29 Beta 6 did not crash only hang.
Ubuntu 13.10 32bit:
Reproduced the crash on old nightly:
[bp-34bfe3f9-1753-4f50-b42f-8457d2140410](https://crash-stats.mozilla.org/report/index/34bfe3f9-1753-4f50-b42f-8457d2140410)
Latest Nightly:
[bp-ed458b5d-22d2-4484-9d84-3caec2140410](https://crash-stats.mozilla.org/report/index/ed458b5d-22d2-4484-9d84-3caec2140410)
Latest Aurora:
[bp-55c2e25f-0d6e-4748-af24-14f712140410](https://crash-stats.mozilla.org/report/index/55c2e25f-0d6e-4748-af24-14f712140410)
Firefox 29 Beta 6:
[bp-1a8b9c9f-8434-4b30-b3b5-a210e2140410](https://crash-stats.mozilla.org/report/index/1a8b9c9f-8434-4b30-b3b5-a210e2140410)
Mac OS X 10.9.2
In 64bit mode:
Reproduced a crash on old nightly:
[bp-42a0f235-341d-4d93-985c-c2c4a2140410](https://crash-stats.mozilla.org/report/index/42a0f235-341d-4d93-985c-c2c4a2140410)
On latest Nightly, Aurora, Firefox 29 Beta 6 did not crash.
In 32bit mode crash on Firefox 29 beta 6, latest Aurora and latest Nightly:
[bp-6e49465d-9561-44bc-b164-35c632140410](https://crash-stats.mozilla.org/report/index/6e49465d-9561-44bc-b164-35c632140410)
Windows 8.1 32bit
Reproduced a crash on old nightly:
[bp-cd6007da-fb32-4795-be32-3e0902140410](https://crash-stats.mozilla.org/report/index/cd6007da-fb32-4795-be32-3e0902140410)
Latest Nightly:
[bp-0cd301fb-c2f3-42f1-a868-f32b42140410](https://crash-stats.mozilla.org/report/index/0cd301fb-c2f3-42f1-a868-f32b42140410)
Latest Aurora:
[bp-c9425b20-cd8a-4be4-9e84-0d3fc2140410](https://crash-stats.mozilla.org/report/index/c9425b20-cd8a-4be4-9e84-0d3fc2140410)
Firefox 29 Beta 6:
[bp-df9617ab-4b2a-4a4d-a70e-2d1752140410](https://crash-stats.mozilla.org/report/index/df9617ab-4b2a-4a4d-a70e-2d1752140410)
Windows 7 64bit
Reproduced a crash on old nightly:
[bp-b3c4599e-aae9-4427-bc2a-19b872140410](https://crash-stats.mozilla.org/report/index/b3c4599e-aae9-4427-bc2a-19b872140410)
Latest Nightly:
[bp-68cbe41f-74e2-48ba-b230-d52ca2140410](https://crash-stats.mozilla.org/report/index/68cbe41f-74e2-48ba-b230-d52ca2140410)
Latest Aurora:
[bp-8181a674-3f16-41f4-8971-30b332140410](https://crash-stats.mozilla.org/report/index/8181a674-3f16-41f4-8971-30b332140410)
Firefox 29 Beta 6::
[bp-f9d6ff87-02e4-4482-9029-8273f2140410](https://crash-stats.mozilla.org/report/index/f9d6ff87-02e4-4482-9029-8273f2140410)
[status-firefox29](/buglist.cgi?f1=cf_status_firefox29&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=verified)
[status-firefox30](/buglist.cgi?f1=cf_status_firefox30&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=verified)
[status-firefox31](/buglist.cgi?f1=cf_status_firefox31&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=verified)Flags: needinfo?(karlt)

|  | [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)  Assignee |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=990794#c14)• 11 years ago |
|  | |

(In reply to Bogdan Maris, QA [:bogdan\_maris] from [comment #13](/show_bug.cgi?id=990794#c13 "RESOLVED FIXED - heap overflow write from allocation size overflow in AllocateAudioBlock"))
> The crashes from Windows 8.1 32bit look the same for 'before' and 'after'
> builds (check the crash reports bellow. Is this normal?
Looks like the 32-bit Win 8.1 OS has only 2147352576 bytes of virtual memory and so this testcase runs out of memory before reaching the overflow.
The aurora and beta 64-bit Win 7 crash reports are from 32-bit builds, which are the appropriate builds to test.
These have 4294836224 bytes of virtual memory and are hitting the expected safe crashes.Flags: needinfo?(karlt)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=990794#a1295217_280903)• 11 years ago |

Whiteboard: [adv-main29+]

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=990794#a2317654_1689)• 11 years ago |

Keywords: [regression](/buglist.cgi?keywords=regression&resolution=---)

|  | [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)  Assignee |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=990794#c16)• 10 years ago |
|  | |

<https://hg.mozilla.org/integration/mozilla-inbound/rev/4ce8894b2876>Group: core-securityFlags: in-testsuite? → in-testsuite+

|  | [Carsten Book [:Tomcat]](/user_profile?user_id=277293) |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=990794#c17)• 10 years ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/4ce8894b2876>
You need to [log in](/show_bug.cgi?id=990794&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from bugzilla.mozilla.org_b17bc0f8_20250126_074643.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Sat Jan 25 2025 23:46:42 PST

* **Bug ID:**
  946658,
  953104,
  996883,
  986864,
  977955,
  990794,
  919592,
  995607

---

| [ID](/buglist.cgi?bug_id=946658%2C953104%2C996883%2C986864%2C977955%2C990794%2C919592%2C995607&query_format=advanced&order=bug_id%20DESC&query_based_on=) | [Type](/buglist.cgi?bug_id=946658%2C953104%2C996883%2C986864%2C977955%2C990794%2C919592%2C995607&query_format=advanced&order=bug_type%2Cbug_status%2Cpriority%2Cassigned_to%2Cbug_id&query_based_on=) | [Summary](/buglist.cgi?bug_id=946658%2C953104%2C996883%2C986864%2C977955%2C990794%2C919592%2C995607&query_format=advanced&order=short_desc%2Cbug_status%2Cpriority%2Cassigned_to%2Cbug_id&query_based_on=) | [Product](/buglist.cgi?bug_id=946658%2C953104%2C996883%2C986864%2C977955%2C990794%2C919592%2C995607&query_format=advanced&order=product%2Cbug_status%2Cpriority%2Cassigned_to%2Cbug_id&query_based_on=) | [Comp](/buglist.cgi?bug_id=946658%2C953104%2C996883%2C986864%2C977955%2C990794%2C919592%2C995607&query_format=advanced&order=component%2Cbug_status%2Cpriority%2Cassigned_to%2Cbug_id&query_based_on=) | [Assignee▲](/buglist.cgi?bug_id=946658%2C953104%2C996883%2C986864%2C977955%2C990794%2C919592%2C995607&query_format=advanced&order=assigned_to%20DESC%2Cbug_status%2Cpriority%2Cbug_id&query_based_on=) | [Status▲](/buglist.cgi?bug_id=946658%2C953104%2C996883%2C986864%2C977955%2C990794%2C919592%2C995607&query_format=advanced&order=bug_status%20DESC%2Cpriority%2Cassigned_to%2Cbug_id&query_based_on=) | [Resolution](/buglist.cgi?bug_id=946658%2C953104%2C996883%2C986864%2C977955%2C990794%2C919592%2C995607&query_format=advanced&order=resolution%2Cbug_status%2Cpriority%2Cassigned_to%2Cbug_id&query_based_on=) | [Updated](/buglist.cgi?bug_id=946658%2C953104%2C996883%2C986864%2C977955%2C990794%2C919592%2C995607&query_format=advanced&order=changeddate%2Cbug_status%2Cpriority%2Cassigned_to%2Cbug_id&query_based_on=) |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |
| [990794](/show_bug.cgi?id=990794 "RESOLVED FIXED - heap overflow write from allocation size overflow in AllocateAudioBlock") |  | [heap overflow write from allocation size overflow in AllocateAudioBlock](/show_bug.cgi?id=990794) | Core | Web Audio | karlt | RESO | FIXE | 2014-07-30 |
| [995607](/show_bug.cgi?id=995607 "RESOLVED FIXED - AutoDebugModeInvalidation can discard baseline scripts that are on the stack") |  | [AutoDebugModeInvalidation can discard baseline scripts that are on the stack](/show_bug.cgi?id=995607) | Core | JavaScript Engine: J | jdemooij | RESO | FIXE | 2015-08-30 |
| [977955](/show_bug.cgi?id=977955 "RESOLVED FIXED - PluginModuleParent may delete its subprocess before calling MessageChannel::Clear, resulting in badness") |  | [PluginModuleParent may delete its subprocess before calling MessageChannel::Clear, resulting in badness](/show_bug.cgi?id=977955) | Core Graveyard | Plug-ins | john | RESO | FIXE | 2022-05-16 |
| [946658](/show_bug.cgi?id=946658 "RESOLVED FIXED - Intermittent browser_dbg_variables-view-popup-07.js | [@ nsView::DoResetWidgetBounds(bool, bool)] or [@ nsViewManager::ProcessPendingUpdatesForView(nsView*, bool)]") |  | [Intermittent browser\_dbg\_variables-view-popup-07.js | [@ nsView::DoResetWidgetBounds(bool, bool)] or [@ nsViewManager::ProcessPendingUpdatesForView(nsView\*, bool)]](/show_bug.cgi?id=946658) | Core | Web Painting | MatsPalmgren\_bugz | RESO | FIXE | 2018-08-29 |
| [919592](/show_bug.cgi?id=919592 "VERIFIED FIXED - ARM asm.js crash with c64 emulator crash [@ js::jit::Assembler::bind(js::jit::Label*, js::jit::BufferOffset) ]") |  | [ARM asm.js crash with c64 emulator crash [@ js::jit::Assembler::bind(js::jit::Label\*, js::jit::BufferOffset) ]](/show_bug.cgi?id=919592) | Core | JavaScript Engine: J | dtc-moz | VERI | FIXE | 2015-08-30 |
| [996883](/show_bug.cgi?id=996883 "VERIFIED FIXED - Crash [@ js::jit::Simulator::decodeType2]") |  | [Crash [@ js::jit::Simulator::decodeType2]](/show_bug.cgi?id=996883) | Core | JavaScript Engine | dtc-moz | VERI | FIXE | 2015-08-30 |
| [986864](/show_bug.cgi?id=986864 "VERIFIED FIXED - Crash [@ memmove] or [@ mozilla::PodCopy] or [@ js_NewStringCopyN] or Assertion failure: PointerRangeSize(src, static_cast<const T*>(dst)) >= nelem, at dist/include/mozilla/PodOperations.h") |  | [Crash [@ memmove] or [@ mozilla::PodCopy] or [@ js\_NewStringCopyN] or Assertion failure: PointerRangeSize(src, static\_cast<const T\*>(dst)) >= nelem, at dist/include/mozilla/PodOperations.h](/show_bug.cgi?id=986864) | Core | JavaScript Engine: J | jcoppeard | VERI | FIXE | 2015-08-30 |
| [953104](/show_bug.cgi?id=953104 "VERIFIED FIXED - OdinMonkey: Assertion failure: !elems_.empty(), at jit/AsmJS.cpp:1213 or Crash on Heap") |  | [OdinMonkey: Assertion failure: !elems\_.empty(), at jit/AsmJS.cpp:1213 or Crash on Heap](/show_bug.cgi?id=953104) | Core | JavaScript Engine: J | mail | VERI | FIXE | 2015-05-18 |

8 bugs found.

|  |  | [REST](/rest/bug?include_fields=id,summary,status&bug_id=946658%2C953104%2C996883%2C986864%2C977955%2C990794%2C919592%2C995607 "Query as a REST API request") | [CSV](/buglist.cgi?bug_id=946658%2C953104%2C996883%2C986864%2C977955%2C990794%2C919592%2C995607&query_format=advanced&ctype=csv&human=1) | [Feed](/buglist.cgi?bug_id=946658%2C953104%2C996883%2C986864%2C977955%2C990794%2C919592%2C995607&query_format=advanced&title=Bug%20List&ctype=atom) | [iCalendar](/buglist.cgi?bug_id=946658%2C953104%2C996883%2C986864%2C977955%2C990794%2C919592%2C995607&query_format=advanced&ctype=ics)  [Change Columns](/colchange.cgi?bug_id=946658%2C953104%2C996883%2C986864%2C977955%2C990794%2C919592%2C995607&query_format=advanced&query_based_on=) | [Edit Search](/query.cgi?bug_id=946658%2C953104%2C996883%2C986864%2C977955%2C990794%2C919592%2C995607&query_format=advanced) |  | as |
| --- | --- | --- | --- | --- | --- |



=== Content from bugzilla.mozilla.org_2d5d8b8b_20250125_092509.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/996883)
* [XML](/show_bug.cgi?ctype=xml&id=996883)

Closed
[Bug 996883](/show_bug.cgi?id=996883)

Opened 11 years ago
Closed 11 years ago

# Crash [@ js::jit::Simulator::decodeType2]

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

Crash [@ js::jit::Simulator::decodeType2]

## Categories

### (Core :: JavaScript Engine, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=JavaScript%20Engine#JavaScript%20Engine)

JavaScript Engine
▾

Core :: JavaScript Engine
The interpreter engine for the core JavaScript language, independent of the browser's object model. File ONLY core JavaScript language bugs in this category. For bugs involving browser objects such as "window" and "document", use the "DOM" component. For bugs involving calls between JavaScript and C++, use the "XPConnect" component.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=JavaScript%20Engine)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

ARM

Linux

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

major

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla31

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Performance Impact | --- |
| --- | --- |
| Webcompat Score | --- |
| Accessibility Severity | --- |
| a11y-review | --- |
| Webcompat Priority | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox28 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=wontfix) |
| firefox29 | [+](/buglist.cgi?f1=cf_tracking_firefox29&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=fixed) |
| firefox30 | [+](/buglist.cgi?f1=cf_tracking_firefox30&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=fixed) |
| firefox31 | [+](/buglist.cgi?f1=cf_tracking_firefox31&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=fixed) |
| firefox-esr24 | [-](/buglist.cgi?f1=cf_tracking_firefox_esr24&o1=equals&v1=-) | [wontfix](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=wontfix) |
| b2g18 | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=unaffected) |
| b2g-v1.1hd | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=equals&v1=unaffected) |
| b2g-v1.2 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=fixed) |
| b2g-v1.3 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=fixed) |
| b2g-v1.3T | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=fixed) |
| b2g-v1.4 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=fixed) |
| b2g-v2.0 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_2_0&o1=equals&v1=fixed) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox28 |  | wontfix |
| firefox29 | + | fixed |
| firefox30 | + | fixed |
| firefox31 | + | fixed |
| firefox-esr24 | - | wontfix |
| b2g18 |  | unaffected |
| b2g-v1.1hd |  | unaffected |
| b2g-v1.2 |  | fixed |
| b2g-v1.3 |  | fixed |
| b2g-v1.3T |  | fixed |
| b2g-v1.4 |  | fixed |
| b2g-v2.0 |  | fixed |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: decoder, Assigned: dougc)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/465e24151b8719e22040ef4c0fce9028?d=mm&size=40)  [dougc](/user_profile?user_id=25650)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/b29b83d12aba827b8ff68296e473bec5?d=mm&size=40)  [decoder](/user_profile?user_id=395101)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/4fe52ee1503aecf7b6c976b8eb7c1753?d=mm&size=40)  [willyelm](/user_profile?user_id=714609)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

17 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[731550](/show_bug.cgi?id=731550 "RESOLVED FIXED - IonMonkey: minor assembler improvements/fixes"), [959597](/show_bug.cgi?id=959597 "RESOLVED FIXED - Add an ARM simulator for JIT code")

Dependency [tree](/showdependencytree.cgi?id=996883&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=996883)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (4 keywords, Whiteboard: [adv-main29+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[crash](/buglist.cgi?keywords=crash&resolution=---),
[regression](/buglist.cgi?keywords=regression&resolution=---),
[sec-high](/buglist.cgi?keywords=sec-high&resolution=---),
[testcase](/buglist.cgi?keywords=testcase&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[adv-main29+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [gkw](/user_profile?user_id=132034) | [in-testsuite](#c11 "11 years ago") | ? |
| --- | --- | --- |
| [gkw](/user_profile?user_id=132034) | in-testsuite | ? |
| --- | --- | --- |
|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | qe-verify |  |

## Crash Data

Signature:

[[@ js::jit::Simulator::decodeType2 ]](https://crash-stats.mozilla.org/signature/?signature=js%3A%3Ajit%3A%3ASimulator%3A%3AdecodeType2)

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (3 files)

| [Correct alu ops encoded as a negated pair of instructions.](/attachment.cgi?id=8407528)  [11 years ago](#c2)  [Douglas Crosher [:dougc]](/user_profile?user_id=25650)   1.66 KB, patch | mjrosenb : [review+](#a61768_419881 "11 years ago")  abillings : [sec-approval+](#c10 "11 years ago") | [Details](/attachment.cgi?id=8407528&action=edit) | [Diff](/attachment.cgi?id=8407528&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=996883&attachment=8407528) |
| --- | --- | --- |
| [Correct alu ops encoded as a negated pair of instructions, excluding the testcase.](/attachment.cgi?id=8409171)  [11 years ago](#c12)  [Douglas Crosher [:dougc]](/user_profile?user_id=25650)   1.23 KB, patch | dougc : [review+](#c12 "11 years ago")  abillings : [approval-mozilla-aurora+](#a266700_280903 "11 years ago")  abillings : [approval-mozilla-beta+](#a266700_280903 "11 years ago") | [Details](/attachment.cgi?id=8409171&action=edit) | [Diff](/attachment.cgi?id=8409171&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=996883&attachment=8409171) |
| [Testcase for error in alu ops encoded as a negated pair of instructions.](/attachment.cgi?id=8409175)  [11 years ago](#c13)  [Douglas Crosher [:dougc]](/user_profile?user_id=25650)   707 bytes, patch | dougc : [review+](#c13 "11 years ago") | [Details](/attachment.cgi?id=8409175&action=edit) | [Diff](/attachment.cgi?id=8409175&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=996883&attachment=8409175) |

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=996883#c0)• 11 years ago |
|  | |

The following testcase crashes on mozilla-central revision 1f932e462b84 (x86 ARM simulator build, run with --fuzzing-safe --ion-eager):
var x=0
var y=0;
x++;
var merge\_type\_maps\_x = 0
var merge\_type\_maps\_y = 0;
for (merge\_type\_maps\_x = 0; x & 0xFFFF; ++merge\_type\_maps\_x)
++merge\_type\_maps\_y;

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=996883#c1)• 11 years ago |
|  | |

Crash trace:
Program received signal SIGSEGV, Segmentation fault.
js::jit::Simulator::decodeType2 (this=0x94d15e8, instr=0xf64a83b4) at js/src/jit/arm/Simulator-arm.cpp:2879
2879 set\_register(rd, readW(addr, instr));
(gdb) x /i $pc
=> 0x83aeae3 <js::jit::Simulator::decodeType2(js::jit::SimInstruction\*)+451>: mov (%ecx),%eax
(gdb) info reg ecx
ecx 0x7e1 2017
(gdb) bt 8
#0 js::jit::Simulator::decodeType2 (this=0x94d15e8, instr=0xf64a83b4) at js/src/jit/arm/Simulator-arm.cpp:2879
#1 0x083e977c in js::jit::Simulator::instructionDecode (this=0x94d15e8, instr=0xf64a83b4) at js/src/jit/arm/Simulator-arm.cpp:4021
#2 0x083ed018 in execute<false> (this=0x94d15e8) at js/src/jit/arm/Simulator-arm.cpp:4068
#3 js::jit::Simulator::callInternal (this=0x94d15e8, entry=0xf64af698 "\360O-\351\r\200\240\341\304\314\005\343L\311", <incomplete sequence \343>) at js/src/jit/arm/Simulator-arm.cpp:4150
#4 0x083ed28c in js::jit::Simulator::call (this=0x94d15e8, entry=0xf64af698 "\360O-\351\r\200\240\341\304\314\005\343L\311", <incomplete sequence \343>, argument\_count=8)
at js/src/jit/arm/Simulator-arm.cpp:4230
#5 0x082dcd4c in EnterIon (data=..., cx=0x94d1f68) at js/src/jit/Ion.cpp:2388
#6 js::jit::IonCannon (cx=0x94d1f68, state=...) at js/src/jit/Ion.cpp:2469
#7 0x085a5c1c in js::RunScript (cx=0x94d1f68, state=...) at js/src/vm/Interpreter.cpp:400
(More stack frames follow...)
Not sure if this is a simulator bug or not, marking s-s until triaged.

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=996883#a5376_395101)• 11 years ago |

[status-firefox31](/buglist.cgi?f1=cf_status_firefox31&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=affected)

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=996883#a41165_375297)• 11 years ago |

Flags: needinfo?(mrosenberg)

|  | [Douglas Crosher [:dougc]](/user_profile?user_id=25650)  Assignee |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=996883#c2)• 11 years ago |
|  | |

Attached patch

[Correct alu ops encoded as a negated pair of instructions.](attachment.cgi?id=8407528&action=diff)
— [Details](attachment.cgi?id=8407528&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=996883&attachment=8407528)

Live register was being destroyed by an incorrect destination in an ALU op\_tst encoded as a negated pair of instructions.Assignee: nobody → dtc-moz
[Attachment #8407528](/attachment.cgi?id=8407528&action=edit "Correct alu ops encoded as a negated pair of instructions.") -
Flags: review?(mrosenberg)Flags: needinfo?(mrosenberg)

|  | [Marty Rosenberg [:mjrosenb]](/user_profile?user_id=419881) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=996883#a61768_419881)• 11 years ago |

[Attachment #8407528](/attachment.cgi?id=8407528&action=edit "Correct alu ops encoded as a negated pair of instructions.") -
Flags: review?(mrosenberg) → review+

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=996883#c3)• 11 years ago |
|  | |

How far back does this bug go? We need to figure out which versions of b2g need this fix.Keywords: [sec-high](/buglist.cgi?keywords=sec-high&resolution=---)

|  | [Douglas Crosher [:dougc]](/user_profile?user_id=25650)  Assignee |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=996883#c4)• 11 years ago |
|  | |

(In reply to Daniel Veditz [:dveditz] from [comment #3](/show_bug.cgi?id=996883#c3 "VERIFIED FIXED - Crash [@ js::jit::Simulator::decodeType2]"))
> How far back does this bug go? We need to figure out which versions of b2g
> need this fix.
This appears to be a long standing bug introduced in:
<http://hg.mozilla.org/mozilla-central/rev/46fe3e36c11b>

|  | [Douglas Crosher [:dougc]](/user_profile?user_id=25650)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=996883#a213981_25650)• 11 years ago |

Keywords: [checkin-needed](/buglist.cgi?keywords=checkin-needed&resolution=---)

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034) |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=996883#c5)• 11 years ago |
|  | |

Doug, since this affects more than nightly, this needs sec-approval first:
<https://wiki.mozilla.org/Security/Bug_Approval_Process>Flags: needinfo?(dtc-moz)Keywords: [checkin-needed](/buglist.cgi?keywords=checkin-needed&resolution=---)

|  | [Douglas Crosher [:dougc]](/user_profile?user_id=25650)  Assignee |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=996883#c6)• 11 years ago |
|  | |

Comment on [attachment 8407528](/attachment.cgi?id=8407528 "Correct alu ops encoded as a negated pair of instructions.") [[details]](/attachment.cgi?id=8407528&action=edit "Correct alu ops encoded as a negated pair of instructions.") [[diff]](/attachment.cgi?id=8407528&action=diff "Correct alu ops encoded as a negated pair of instructions.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=996883&attachment=8407528)
Correct alu ops encoded as a negated pair of instructions.
[Security approval request comment]
How easily could an exploit be constructed based on the patch?
It is a systematic error that corrupts a register so it might be easy to use it to construct a reliable exploit.
Do comments in the patch, the check-in comment, or tests included in the patch paint a bulls-eye on the security problem?
Yes, the test case. But this could be remove from the patch.
Which older supported branches are affected by this flaw?
From the introduction of the Ion Jit compiler. b2g18 is affected.
If not all supported branches, which bug introduced the flaw?
[Bug 731550](/show_bug.cgi?id=731550 "RESOLVED FIXED - IonMonkey: minor assembler improvements/fixes").
Do you have backports for the affected branches? If not, how different, hard to create, and risky will they be?
It is a one line fix and should be trivial to backport.
How likely is this patch to cause regressions; how much testing does it need?
It is a low risk. Tested locally and it passes the tbpl jit-tests.
[Attachment #8407528](/attachment.cgi?id=8407528&action=edit "Correct alu ops encoded as a negated pair of instructions.") -
Flags: sec-approval?Flags: needinfo?(dtc-moz)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=996883#c7)• 11 years ago |
|  | |

Is b2g18 really affected? I thought we did not have the JIT enabled on that branch? Or maybe it was disabled for "1.0" and enabled for "1.1" on the same branch. Who would know that for sure?
Since this is ARM-only we don't need to worry about the ESR-24 branch (no ESR for Fennec)Blocks: [731550](/show_bug.cgi?id=731550 "RESOLVED FIXED - IonMonkey: minor assembler improvements/fixes")
[status-b2g-v1.2](/buglist.cgi?f1=cf_status_b2g_1_2&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=affected)
[status-b2g-v1.3](/buglist.cgi?f1=cf_status_b2g_1_3&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=affected)
[status-b2g-v1.3T](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=affected)
[status-b2g-v1.4](/buglist.cgi?f1=cf_status_b2g_1_4&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=affected)
[status-firefox28](/buglist.cgi?f1=cf_status_firefox28&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=wontfix)
[status-firefox29](/buglist.cgi?f1=cf_status_firefox29&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=affected)
[status-firefox30](/buglist.cgi?f1=cf_status_firefox30&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=affected)
[status-firefox-esr24](/buglist.cgi?f1=cf_status_firefox_esr24&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=wontfix)
[tracking-firefox29](/buglist.cgi?f1=cf_tracking_firefox29&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox29&o1=equals&v1=%2B)
[tracking-firefox30](/buglist.cgi?f1=cf_tracking_firefox30&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox30&o1=equals&v1=%2B)
[tracking-firefox31](/buglist.cgi?f1=cf_tracking_firefox31&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox31&o1=equals&v1=%2B)
[tracking-firefox-esr24](/buglist.cgi?f1=cf_tracking_firefox_esr24&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox_esr24&o1=equals&v1=%3F)Keywords: [regression](/buglist.cgi?keywords=regression&resolution=---)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=996883#c8)• 11 years ago |
|  | |

Sylvestre, Dan and I discussed this and we'd like to take this on Beta now (as well as Aurora and Trunk). This is literally a one line change and a test and it only affects ARM.Flags: needinfo?(sledru)

|  | [Sylvestre Ledru [:Sylvestre]](/user_profile?user_id=495955) |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=996883#c9)• 11 years ago |
|  | |

OK Al. Could you fill the uplift request? ThanksFlags: needinfo?(sledru)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=996883#c10)• 11 years ago |
|  | |

Comment on [attachment 8407528](/attachment.cgi?id=8407528 "Correct alu ops encoded as a negated pair of instructions.") [[details]](/attachment.cgi?id=8407528&action=edit "Correct alu ops encoded as a negated pair of instructions.") [[diff]](/attachment.cgi?id=8407528&action=diff "Correct alu ops encoded as a negated pair of instructions.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=996883&attachment=8407528)
Correct alu ops encoded as a negated pair of instructions.
sec-approval+ for trunk. Please nominate a patch for Aurora and Beta as well and I'll approve them.
[Attachment #8407528](/attachment.cgi?id=8407528&action=edit "Correct alu ops encoded as a negated pair of instructions.") -
Flags: sec-approval? → sec-approval+

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034) |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=996883#c11)• 11 years ago |
|  | |

<https://hg.mozilla.org/integration/mozilla-inbound/rev/d8300867f3f2>
Stripped testcase from patch for landing at later date, and I also put in a neutral patch comment.Flags: in-testsuite?Target Milestone: --- → mozilla31

|  | [Douglas Crosher [:dougc]](/user_profile?user_id=25650)  Assignee |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=996883#c12)• 11 years ago |
|  | |

Attached patch

[Correct alu ops encoded as a negated pair of instructions, excluding the testcase.](attachment.cgi?id=8409171&action=diff)
— [Details](attachment.cgi?id=8409171&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=996883&attachment=8409171)

This patch strips off the testcase, for landing soon. Carrying forward r+.
[Attachment #8409171](/attachment.cgi?id=8409171&action=edit "Correct alu ops encoded as a negated pair of instructions, excluding the testcase.") -
Flags: review+

|  | [Douglas Crosher [:dougc]](/user_profile?user_id=25650)  Assignee |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=996883#c13)• 11 years ago |
|  | |

Attached patch

[Testcase for error in alu ops encoded as a negated pair of instructions.](attachment.cgi?id=8409175&action=diff)
— [Details](attachment.cgi?id=8409175&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=996883&attachment=8409175)

Splitting out the testcase for landing later. Carrying forward r+.
[Attachment #8409175](/attachment.cgi?id=8409175&action=edit "Testcase for  error in alu ops encoded as a negated pair of instructions.") -
Flags: review+

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034) |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=996883#c14)• 11 years ago |
|  | |

Douglas, not sure if you'd noticed, I've already landed the patch for you (minus the testcase).

|  | [Douglas Crosher [:dougc]](/user_profile?user_id=25650)  Assignee |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=996883#c15)• 11 years ago |
|  | |

Comment on [attachment 8409171](/attachment.cgi?id=8409171 "Correct alu ops encoded as a negated pair of instructions, excluding the testcase.") [[details]](/attachment.cgi?id=8409171&action=edit "Correct alu ops encoded as a negated pair of instructions, excluding the testcase.") [[diff]](/attachment.cgi?id=8409171&action=diff "Correct alu ops encoded as a negated pair of instructions, excluding the testcase.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=996883&attachment=8409171)
Correct alu ops encoded as a negated pair of instructions, excluding the testcase.
[Approval Request Comment]
Bug caused by (feature/regressing bug #):
User impact if declined: Erroneous compiled JS. Possible exploit.
Testing completed (on m-c, etc.): Passes tbpl jit-tests locally. Fixes the testcase.
Risk to taking this patch (and alternatives if risky): Low.
String or IDL/UUID changes made by this patch: n/a
[Attachment #8409171](/attachment.cgi?id=8409171&action=edit "Correct alu ops encoded as a negated pair of instructions, excluding the testcase.") -
Flags: approval-mozilla-beta?
[Attachment #8409171](/attachment.cgi?id=8409171&action=edit "Correct alu ops encoded as a negated pair of instructions, excluding the testcase.") -
Flags: approval-mozilla-aurora?

|  | [Douglas Crosher [:dougc]](/user_profile?user_id=25650)  Assignee |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=996883#c16)• 11 years ago |
|  | |

(In reply to Gary Kwong [:gkw] [:nth10sd] from [comment #14](/show_bug.cgi?id=996883#c14 "VERIFIED FIXED - Crash [@ js::jit::Simulator::decodeType2]"))
> Douglas, not sure if you'd noticed, I've already landed the patch for you
> (minus the testcase).
Ok, thanks.

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=996883#a266700_280903)• 11 years ago |

[Attachment #8409171](/attachment.cgi?id=8409171&action=edit "Correct alu ops encoded as a negated pair of instructions, excluding the testcase.") -
Flags: approval-mozilla-beta?
[Attachment #8409171](/attachment.cgi?id=8409171&action=edit "Correct alu ops encoded as a negated pair of instructions, excluding the testcase.") -
Flags: approval-mozilla-beta+
[Attachment #8409171](/attachment.cgi?id=8409171&action=edit "Correct alu ops encoded as a negated pair of instructions, excluding the testcase.") -
Flags: approval-mozilla-aurora?
[Attachment #8409171](/attachment.cgi?id=8409171&action=edit "Correct alu ops encoded as a negated pair of instructions, excluding the testcase.") -
Flags: approval-mozilla-aurora+

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=996883#c17)• 11 years ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/d8300867f3f2>Status: NEW → RESOLVEDClosed: 11 years ago
[status-b2g-v2.0](/buglist.cgi?f1=cf_status_b2g_2_0&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_b2g_2_0&o1=equals&v1=fixed)
[status-firefox31](/buglist.cgi?f1=cf_status_firefox31&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=fixed)Resolution: --- → FIXED

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=996883#c18)• 11 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-aurora/rev/4300612b17c5>
<https://hg.mozilla.org/releases/mozilla-beta/rev/9208db873dbf>
<https://hg.mozilla.org/releases/mozilla-b2g28_v1_3/rev/6610ea5ece58>
<https://hg.mozilla.org/releases/mozilla-b2g26_v1_2/rev/8df7676cc23d>
[status-b2g18](/buglist.cgi?f1=cf_status_b2g18&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=unaffected)
[status-b2g-v1.1hd](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=equals&v1=unaffected)
[status-b2g-v1.2](/buglist.cgi?f1=cf_status_b2g_1_2&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=fixed)
[status-b2g-v1.3](/buglist.cgi?f1=cf_status_b2g_1_3&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=fixed)
[status-b2g-v1.4](/buglist.cgi?f1=cf_status_b2g_1_4&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=fixed)
[status-firefox29](/buglist.cgi?f1=cf_status_firefox29&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=fixed)
[status-firefox30](/buglist.cgi?f1=cf_status_firefox30&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=fixed)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=996883#a282375_75935)• 11 years ago |

[status-b2g-v1.3T](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=fixed)

|  | [Lawrence Mandel [:lmandel] (use needinfo)](/user_profile?user_id=424995) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=996883#a505685_424995)• 11 years ago |

[tracking-firefox-esr24](/buglist.cgi?f1=cf_tracking_firefox_esr24&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox_esr24&o1=equals&v1=%3F) → [-](/buglist.cgi?f1=cf_tracking_firefox_esr24&o1=equals&v1=-)

|  | [Bogdan Maris, Desktop Test Engineering](/user_profile?user_id=458188) |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=996883#c19)• 11 years ago |
|  | |

Although I don't have a ARM computer here I did ran the testcase from [comment 0](/show_bug.cgi?id=996883#c0 "VERIFIED FIXED - Crash [@ js::jit::Simulator::decodeType2]") on nightly from 2014-04-15 Ubuntu 13.10 64bit but did not experienced any crash what so ever. Tried the same with Firefox 29RC and with same result. Since this is a ARM-only issue I don't think I can do something here.
Christian, can you please verify that the issue is fixed using latest RC build? <http://ftp.mozilla.org/pub/mozilla.org/firefox/nightly/29.0-candidates/build1/>Flags: needinfo?(choller)

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=996883#c20)• 11 years ago |
|  | |

The test in [comment 0](/show_bug.cgi?id=996883#c0 "VERIFIED FIXED - Crash [@ js::jit::Simulator::decodeType2]") wasn't found on real ARM hardware, but using the ARM simulator builds. However, Fx29 doesn't have that simulator builtin yet, so I cannot verify it on that branch.

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=996883#a599311_280903)• 11 years ago |

Whiteboard: [adv-main29+]

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=996883#a1818229_395101)• 11 years ago |

Flags: needinfo?(choller)

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=996883#a4319876_395101)• 11 years ago |

Status: RESOLVED → VERIFIED

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Comment 21](/show_bug.cgi?id=996883#c21)• 11 years ago |
|  | |

JSBugMon: This bug has been automatically verified fixed.

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=996883#a43358930_1689)• 9 years ago |

Group: core-security
You need to [log in](/show_bug.cgi?id=996883&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Douglas Crosher [:dougc]](/user_profile?user_id=25650)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from bugzilla.mozilla.org_cceb9c08_20250125_092502.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/953104)
* [XML](/show_bug.cgi?ctype=xml&id=953104)

Closed
[Bug 953104](/show_bug.cgi?id=953104)

Opened 11 years ago
Closed 11 years ago

# OdinMonkey: Assertion failure: !elems\_.empty(), at jit/AsmJS.cpp:1213 or Crash on Heap

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

OdinMonkey: Assertion failure: !elems\_.empty(), at jit/AsmJS.cpp:1213 or Crash on Heap

## Categories

### (Core :: JavaScript Engine: JIT, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=JavaScript%20Engine%3A%20JIT#JavaScript%20Engine%3A%20JIT)

JavaScript Engine: JIT
▾

Core :: JavaScript Engine: JIT
JavaScript engine's JIT compilers
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine%3A%20JIT&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine%3A%20JIT&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=JavaScript%20Engine%3A%20JIT)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

x86

Linux

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

critical

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla29

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Webcompat Priority | --- |
| --- | --- |
| a11y-review | --- |
| Accessibility Severity | --- |
| Webcompat Score | --- |
| Performance Impact | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox27 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=wontfix) |
| firefox28 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=wontfix) |
| firefox29 | --- | [fixed](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=fixed) |
| firefox-esr24 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=wontfix) |
| b2g18 | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=unaffected) |
| b2g-v1.1hd | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=equals&v1=unaffected) |
| b2g-v1.2 | --- | [wontfix](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=wontfix) |
| b2g-v1.3 | --- | [wontfix](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=wontfix) |
| b2g-v1.4 | --- | [wontfix](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=wontfix) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox27 |  | wontfix |
| firefox28 |  | wontfix |
| firefox29 |  | fixed |
| firefox-esr24 |  | wontfix |
| b2g18 |  | unaffected |
| b2g-v1.1hd |  | unaffected |
| b2g-v1.2 |  | wontfix |
| b2g-v1.3 |  | wontfix |
| b2g-v1.4 |  | wontfix |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: decoder, Assigned: luke)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](extensions/Gravatar/web/default.jpg)  [luke](/user_profile?user_id=347312)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/b29b83d12aba827b8ff68296e473bec5?d=mm&size=40)  [decoder](/user_profile?user_id=395101)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/4fe52ee1503aecf7b6c976b8eb7c1753?d=mm&size=40)  [willyelm](/user_profile?user_id=714609)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

10 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

---

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Keywords: assertion, sec-low, testcase, Whiteboard: [jsbugmon:update][adv-main29+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[assertion](/buglist.cgi?keywords=assertion&resolution=---),
[sec-low](/buglist.cgi?keywords=sec-low&resolution=---),
[testcase](/buglist.cgi?keywords=testcase&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[jsbugmon:update][adv-main29+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [cbook](/user_profile?user_id=277293) | [in-testsuite](#c9 "11 years ago") | ? |
| --- | --- | --- |
| [cbook](/user_profile?user_id=277293) | in-testsuite | ? |
| --- | --- | --- |
|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (2 files)

| [[crash-signature] Machine-readable crash signature](/attachment.cgi?id=8351439)  [11 years ago](#c1)  [Christian Holler (:decoder)](/user_profile?user_id=395101)   311 bytes, text/plain |  | [Details](/attachment.cgi?id=8351439&action=edit) |
| --- | --- | --- |
| [fix-func-ptr-table-bug](/attachment.cgi?id=8355255)  [11 years ago](#c4)  [Luke Wagner [:luke]](/user_profile?user_id=347312)   5.84 KB, patch | bbouvier : [review+](#c7 "11 years ago") | [Details](/attachment.cgi?id=8355255&action=edit) | [Diff](/attachment.cgi?id=8355255&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=953104&attachment=8355255) |

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=953104#c0)• 11 years ago |
|  | |

The following testcase asserts on mozilla-central revision cd3e9359fd64 (run with --fuzzing-safe --ion-eager --ion-compile-try-catch --ion-eager):
function m() {
"use asm";
function f() {
var x = 0;
var y = 0;
y = y[(x + 1) & 3]() | 0;
}
return f;
}
m()();

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=953104#c1)• 11 years ago |
|  | |

Attached file
[[crash-signature] Machine-readable crash signature](attachment.cgi?id=8351439)
— [Details](attachment.cgi?id=8351439&action=edit)

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=953104#a170632_395101)• 11 years ago |

Whiteboard: [jsbugmon:update,bisect]

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=953104#a184168_395101)• 11 years ago |

Whiteboard: [jsbugmon:update,bisect] → [jsbugmon:update]

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=953104#c2)• 11 years ago |
|  | |

JSBugMon: Bisection requested, result:
autoBisect shows this is probably related to the following changeset:
The first bad revision is:
changeset: <http://hg.mozilla.org/mozilla-central/rev/63d537758124>
user: Luke Wagner
date: Thu Jun 13 11:48:47 2013 -0700
summary: [Bug 880538](/show_bug.cgi?id=880538 "RESOLVED FIXED - OdinMonkey: avoid parse node memory spike by LifoAlloc::release()ing after every function") - OdinMonkey: make a single pass over the parse tree (r=bbouvier)
This iteration took 330.591 seconds to run.

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=953104#c3)• 11 years ago |
|  | |

Needinfo from Luke based on [comment 2](/show_bug.cgi?id=953104#c2 "VERIFIED FIXED - OdinMonkey: Assertion failure: !elems_.empty(), at jit/AsmJS.cpp:1213 or Crash on Heap").Flags: needinfo?(luke)

|  | [Luke Wagner [:luke]](/user_profile?user_id=347312)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=953104#a709111_347312)• 11 years ago |

Flags: needinfo?(luke)

|  | [Luke Wagner [:luke]](/user_profile?user_id=347312)  Assignee |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=953104#c4)• 11 years ago |
|  | |

Attached patch

[fix-func-ptr-table-bug](attachment.cgi?id=8355255&action=diff)
— [Details](attachment.cgi?id=8355255&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=953104&attachment=8355255)

Oops, there totally should have been a unit test for this. Great find!Assignee: nobody → lukeStatus: NEW → ASSIGNED
[Attachment #8355255](/attachment.cgi?id=8355255&action=edit "fix-func-ptr-table-bug") -
Flags: review?(benj)

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=953104#c5)• 11 years ago |
|  | |

How bad of a security issue is this, Luke? Thanks.Flags: needinfo?(luke)

|  | [Luke Wagner [:luke]](/user_profile?user_id=347312)  Assignee |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=953104#c6)• 11 years ago |
|  | |

I think this could be used to call a definitely-null pointer, so it'd be a crash, but not exploitable. This won't happen in well-formed asm.js programs, so I'd be inclined to let the fix ride the trains.Flags: needinfo?(luke)

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=953104#a723517_406194)• 11 years ago |

Keywords: [sec-low](/buglist.cgi?keywords=sec-low&resolution=---)

|  | [Benjamin Bouvier [:bbouvier] (inactive)](/user_profile?user_id=468907) |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=953104#c7)• 11 years ago |
|  | |

Comment on [attachment 8355255](/attachment.cgi?id=8355255 "fix-func-ptr-table-bug") [[details]](/attachment.cgi?id=8355255&action=edit "fix-func-ptr-table-bug") [[diff]](/attachment.cgi?id=8355255&action=diff "fix-func-ptr-table-bug") [[review]](/page.cgi?id=splinter.html&ignore=&bug=953104&attachment=8355255)
fix-func-ptr-table-bug
Review of [attachment 8355255](/attachment.cgi?id=8355255 "fix-func-ptr-table-bug") [[details]](/attachment.cgi?id=8355255&action=edit "fix-func-ptr-table-bug") [[diff]](/attachment.cgi?id=8355255&action=diff "fix-func-ptr-table-bug") [[review]](/page.cgi?id=splinter.html&ignore=&bug=953104&attachment=8355255):
-----------------------------------------------------------------
Nice catch!
::: js/src/jit-test/tests/asm.js/testFunctionPtr.js
@@ +11,5 @@
> assertAsmTypeFail(USE\_ASM + "function f() {} function g(i) {i=i|0} var tbl=[f,g]; return f");
> assertAsmTypeFail(USE\_ASM + "function f() {} function g() {return 0} var tbl=[f,g]; return f");
> assertAsmTypeFail(USE\_ASM + "function f(i) {i=i|0} function g(i) {i=+i} var tbl=[f,g]; return f");
> assertAsmTypeFail(USE\_ASM + "function f() {return 0} function g() {return 0.0} var tbl=[f,g]; return f");
> +assertAsmTypeFail(USE\_ASM + "var tbl=0; function g() {tbl[0&1]()|0} return g");
Ha, nice catch! I have been sometimes worried about creating assertAsmTypeFail tests and having them pass for another reason, like what was happening here.
[Attachment #8355255](/attachment.cgi?id=8355255&action=edit "fix-func-ptr-table-bug") -
Flags: review?(benj) → review+

|  | [Luke Wagner [:luke]](/user_profile?user_id=347312)  Assignee |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=953104#c8)• 11 years ago |
|  | |

Yeah, I've thought it might be nice to match not just that there was an error, but part of the text of the message. OTOH, this would make the tests more fragile, which would be annoying.
<https://hg.mozilla.org/integration/mozilla-inbound/rev/567977c0c7da>

|  | [Carsten Book [:Tomcat]](/user_profile?user_id=277293) |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=953104#c9)• 11 years ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/567977c0c7da>Status: ASSIGNED → RESOLVEDClosed: 11 years agoFlags: in-testsuite?Resolution: --- → FIXEDTarget Milestone: --- → mozilla29

|  | [Carsten Book [:Tomcat]](/user_profile?user_id=277293) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=953104#a771973_277293)• 11 years ago |

[status-firefox29](/buglist.cgi?f1=cf_status_firefox29&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=fixed)

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=953104#a778780_395101)• 11 years ago |

Status: RESOLVED → VERIFIED

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=953104#c10)• 11 years ago |
|  | |

JSBugMon: This bug has been automatically verified fixed.

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=953104#a1166173_395101)• 11 years ago |

[status-firefox27](/buglist.cgi?f1=cf_status_firefox27&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=affected)
[status-firefox28](/buglist.cgi?f1=cf_status_firefox28&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=affected)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=953104#a1424489_280903)• 11 years ago |

[status-b2g18](/buglist.cgi?f1=cf_status_b2g18&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=unaffected)
[status-b2g-v1.1hd](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=equals&v1=unaffected)
[status-b2g-v1.2](/buglist.cgi?f1=cf_status_b2g_1_2&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=affected)
[status-firefox27](/buglist.cgi?f1=cf_status_firefox27&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=wontfix)
[status-firefox28](/buglist.cgi?f1=cf_status_firefox28&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=wontfix)
[status-firefox-esr24](/buglist.cgi?f1=cf_status_firefox_esr24&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=wontfix)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=953104#c11)• 11 years ago |
|  | |

(In reply to Luke Wagner [:luke] from [comment #6](/show_bug.cgi?id=953104#c6 "VERIFIED FIXED - OdinMonkey: Assertion failure: !elems_.empty(), at jit/AsmJS.cpp:1213 or Crash on Heap"))
> I think this could be used to call a definitely-null pointer, so it'd be a
> crash, but not exploitable. This won't happen in well-formed asm.js
> programs, so I'd be inclined to let the fix ride the trains.
Sounds like a wontfix for B2G as well then too :)
[status-b2g-v1.2](/buglist.cgi?f1=cf_status_b2g_1_2&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=wontfix)
[status-b2g-v1.3](/buglist.cgi?f1=cf_status_b2g_1_3&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=wontfix)
[status-b2g-v1.4](/buglist.cgi?f1=cf_status_b2g_1_4&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=wontfix)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=953104#a9697661_280903)• 11 years ago |

Whiteboard: [jsbugmon:update] → [jsbugmon:update][adv-main29+]

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=953104#a44011727_1689)• 10 years ago |

Group: core-security
You need to [log in](/show_bug.cgi?id=953104&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Christian Holler (:decoder)](/user_profile?user_id=395101)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from bugzilla.mozilla.org_30bdc493_20250125_092508.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/995607)
* [XML](/show_bug.cgi?ctype=xml&id=995607)

Closed
[Bug 995607](/show_bug.cgi?id=995607)

Opened 11 years ago
Closed 11 years ago

# AutoDebugModeInvalidation can discard baseline scripts that are on the stack

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

AutoDebugModeInvalidation can discard baseline scripts that are on the stack

## Categories

### (Core :: JavaScript Engine: JIT, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=JavaScript%20Engine%3A%20JIT#JavaScript%20Engine%3A%20JIT)

JavaScript Engine: JIT
▾

Core :: JavaScript Engine: JIT
JavaScript engine's JIT compilers
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine%3A%20JIT&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine%3A%20JIT&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=JavaScript%20Engine%3A%20JIT)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

unspecified

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

All

All

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

normal

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla31

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Webcompat Score | --- |
| --- | --- |
| Performance Impact | --- |
| a11y-review | --- |
| Accessibility Severity | --- |
| Webcompat Priority | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox28 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=wontfix) |
| firefox29 | [+](/buglist.cgi?f1=cf_tracking_firefox29&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=fixed) |
| firefox30 | [+](/buglist.cgi?f1=cf_tracking_firefox30&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=fixed) |
| firefox31 | [+](/buglist.cgi?f1=cf_tracking_firefox31&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=fixed) |
| firefox-esr24 | --- | [unaffected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=unaffected) |
| b2g18 | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=unaffected) |
| b2g-v1.1hd | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=equals&v1=unaffected) |
| b2g-v1.2 | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=unaffected) |
| b2g-v1.3 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=fixed) |
| b2g-v1.3T | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=fixed) |
| b2g-v1.4 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=fixed) |
| b2g-v2.0 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_2_0&o1=equals&v1=fixed) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox28 |  | wontfix |
| firefox29 | + | fixed |
| firefox30 | + | fixed |
| firefox31 | + | fixed |
| firefox-esr24 |  | unaffected |
| b2g18 |  | unaffected |
| b2g-v1.1hd |  | unaffected |
| b2g-v1.2 |  | unaffected |
| b2g-v1.3 |  | fixed |
| b2g-v1.3T |  | fixed |
| b2g-v1.4 |  | fixed |
| b2g-v2.0 |  | fixed |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: jandem, Assigned: jandem)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/709c5feed942bf99f098bb24aa1cc86f?d=mm&size=40)  [jandem](/user_profile?user_id=375297)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/709c5feed942bf99f098bb24aa1cc86f?d=mm&size=40)  [jandem](/user_profile?user_id=375297)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/4fe52ee1503aecf7b6c976b8eb7c1753?d=mm&size=40)  [willyelm](/user_profile?user_id=714609)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

12 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[982675](/show_bug.cgi?id=982675 "VERIFIED FIXED - activating remote debugger for Main Process crashes Fennec")

Dependency [tree](/showdependencytree.cgi?id=995607&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=995607)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Keywords: sec-high, Whiteboard: [adv-main29+][qa-])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[sec-high](/buglist.cgi?keywords=sec-high&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[adv-main29+][qa-]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | in-testsuite |  |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (1 file, 1 obsolete file)

| [Patch](/attachment.cgi?id=8405761)  [11 years ago](#c1)  [Jan de Mooij [:jandem]](/user_profile?user_id=375297)   2.41 KB, patch | shu : [review+](#c7 "11 years ago") | [Details](/attachment.cgi?id=8405761&action=edit) | [Diff](/attachment.cgi?id=8405761&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=995607&attachment=8405761) |
| --- | --- | --- |
| [Patch](/attachment.cgi?id=8406027)  [11 years ago](#c10)  [Jan de Mooij [:jandem]](/user_profile?user_id=375297)   2.92 KB, patch | jandem : [review+](#c10 "11 years ago")  abillings : [approval-mozilla-aurora+](#a271063_280903 "11 years ago")  abillings : [approval-mozilla-beta+](#a271063_280903 "11 years ago")  abillings : [sec-approval+](#c12 "11 years ago") | [Details](/attachment.cgi?id=8406027&action=edit) | [Diff](/attachment.cgi?id=8406027&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=995607&attachment=8406027) |

Show Obsolete

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297)  Assignee |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=995607#c0)• 11 years ago |
|  | |

We've seen a number of weird JIT crashes related to the debugger. [Bug 982675](/show_bug.cgi?id=982675 "VERIFIED FIXED - activating remote debugger for Main Process crashes Fennec") is one that affects b2g debugging.
I just pushed a patch to try that much more eagerly JIT-compiles scripts, and we're lucky: bc1 is now crashing reliably:
<https://tbpl.mozilla.org/?tree=Try&rev=d7897a97a4cc>
It looks like Debugger::addAllGlobalsAsDebuggees has an AutoDebugModeInvalidation for some Zone. Then in ~AutoDebugModeInvalidation, invalidateStack is |false| (because we're turning on the debugger), and we discard baseline scripts that are on the stack.
Although the debugger can't be enabled for compartments with scripts on the stack, the Zone can have compartments that are ignored by the debugger: the debugger's compartment itself or compartments that are invisibleToDebugger(). We don't want to throw away their active scripts.

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297)  Assignee |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=995607#c1)• 11 years ago |
|  | |

Attached patch

[Patch](attachment.cgi?id=8405761&action=diff) (obsolete)
— [Details](attachment.cgi?id=8405761&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=995607&attachment=8405761)

This patch removes the invalidateStack condition. Walking the list of activations is pretty fast, especially compared to the CellIter that follows it, so I think this is the safest fix.Assignee: nobody → jdemooijStatus: NEW → ASSIGNED
[Attachment #8405761](/attachment.cgi?id=8405761&action=edit "Patch") -
Flags: review?(shu)

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297)  Assignee |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=995607#c2)• 11 years ago |
|  | |

Oh and I wonder why the fuzzers didn't catch this... I'll try to write a shell testcase.
[status-b2g18](/buglist.cgi?f1=cf_status_b2g18&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=unaffected)
[status-firefox28](/buglist.cgi?f1=cf_status_firefox28&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=affected)
[status-firefox29](/buglist.cgi?f1=cf_status_firefox29&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=affected)
[status-firefox30](/buglist.cgi?f1=cf_status_firefox30&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=affected)
[status-firefox31](/buglist.cgi?f1=cf_status_firefox31&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=affected)
[status-firefox-esr24](/buglist.cgi?f1=cf_status_firefox_esr24&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=unaffected)
[tracking-firefox29](/buglist.cgi?f1=cf_tracking_firefox29&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox29&o1=equals&v1=%3F)
[tracking-firefox30](/buglist.cgi?f1=cf_tracking_firefox30&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox30&o1=equals&v1=%3F)
[tracking-firefox31](/buglist.cgi?f1=cf_tracking_firefox31&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox31&o1=equals&v1=%3F)Keywords: [sec-high](/buglist.cgi?keywords=sec-high&resolution=---)

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297)  Assignee |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=995607#c3)• 11 years ago |
|  | |

This is hard to repro in the shell, because the shell's default compartment has no principals, and AutoDebugModeInvalidation ignores compartments that have no principals :(
There is newGlobal({principal: foo}), but it's hard/impossible to use that without having scripts of the original global on the stack (the latter will throw).
Anyway, if I allocate ShellPrincipals for the default global, the following crashes:
---
newGlobal({sameZoneAs:{}});
var dbg = new Debugger;
dbg.addAllGlobalsAsDebuggees();
---
Shu, can we remove the principals check from AutoDebugModeInvalidation? As the shell's global has no principals atm, I wonder if it's really valid to ignore these compartments.

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297)  Assignee |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=995607#c4)• 11 years ago |
|  | |

jryans, can you check if the patch here fixes [bug 982675](/show_bug.cgi?id=982675 "VERIFIED FIXED - activating remote debugger for Main Process crashes Fennec")?Flags: needinfo?(jryans)

|  | [Shu-yu Guo [:shu]](/user_profile?user_id=381259) |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=995607#c5)• 11 years ago |
|  | |

(In reply to Jan de Mooij [:jandem] from [comment #3](/show_bug.cgi?id=995607#c3 "RESOLVED FIXED - AutoDebugModeInvalidation can discard baseline scripts that are on the stack"))
> This is hard to repro in the shell, because the shell's default compartment
> has no principals, and AutoDebugModeInvalidation ignores compartments that
> have no principals :(
>
> There is newGlobal({principal: foo}), but it's hard/impossible to use that
> without having scripts of the original global on the stack (the latter will
> throw).
>
> Anyway, if I allocate ShellPrincipals for the default global, the following
> crashes:
> ---
> newGlobal({sameZoneAs:{}});
> var dbg = new Debugger;
> dbg.addAllGlobalsAsDebuggees();
> ---
>
> Shu, can we remove the principals check from AutoDebugModeInvalidation? As
> the shell's global has no principals atm, I wonder if it's really valid to
> ignore these compartments.
The OSR patches happen to get rid of the invalidateStack check too: <https://github.com/syg/gecko-dev/blob/debug-mode-osr/js/src/jit/Ion.cpp#L3053>
Either way, that check is going away, whether here or once reviews are done for the OSR patches.
As for the principals check, that's copied from previous code. I would check with Jim.Flags: needinfo?(jimb)

|  | [Shu-yu Guo [:shu]](/user_profile?user_id=381259) |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=995607#c6)• 11 years ago |
|  | |

That said, I don't see why it would be unsafe to always invalidate and just have it recompiled either. Barring really strange requirements here, I believe it is fine to remove the principals check.

|  | [Shu-yu Guo [:shu]](/user_profile?user_id=381259) |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=995607#c7)• 11 years ago |
|  | |

Comment on [attachment 8405761](/attachment.cgi?id=8405761 "Patch") [[details]](/attachment.cgi?id=8405761&action=edit "Patch") [[diff]](/attachment.cgi?id=8405761&action=diff "Patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=995607&attachment=8405761)
Patch
Review of [attachment 8405761](/attachment.cgi?id=8405761 "Patch") [[details]](/attachment.cgi?id=8405761&action=edit "Patch") [[diff]](/attachment.cgi?id=8405761&action=diff "Patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=995607&attachment=8405761):
-----------------------------------------------------------------
Good catch on the Zone-wide invalidation case!
[Attachment #8405761](/attachment.cgi?id=8405761&action=edit "Patch") -
Flags: review?(shu) → review+

|  | [Shu-yu Guo [:shu]](/user_profile?user_id=381259) |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=995607#c8)• 11 years ago |
|  | |

In light of my own [comment #6](/show_bug.cgi?id=995607#c6 "RESOLVED FIXED - AutoDebugModeInvalidation can discard baseline scripts that are on the stack"), and since Jim is swamped with stuff to do already, I'm going to flip-flop on my decision to NI Jim and say just remove the principals check.Flags: needinfo?(jimb)

|  | [J. Ryan Stinnett [:jryans] (Use needinfo, replies may be slow)](/user_profile?user_id=282978) |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=995607#c9)• 11 years ago |
|  | |

(In reply to Jan de Mooij [:jandem] from [comment #4](/show_bug.cgi?id=995607#c4 "RESOLVED FIXED - AutoDebugModeInvalidation can discard baseline scripts that are on the stack"))
> jryans, can you check if the patch here fixes [bug 982675](/show_bug.cgi?id=982675 "VERIFIED FIXED - activating remote debugger for Main Process crashes Fennec")?
Yes, this patch appears to fix [bug 982675](/show_bug.cgi?id=982675 "VERIFIED FIXED - activating remote debugger for Main Process crashes Fennec") on Fennec. Thanks for the quick work!Flags: needinfo?(jryans)

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297)  Assignee |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=995607#c10)• 11 years ago |
|  | |

Attached patch

[Patch](attachment.cgi?id=8406027&action=diff)
— [Details](attachment.cgi?id=8406027&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=995607&attachment=8406027)

Shu, thanks for the quick review.
[Security approval request comment]
How easily could an exploit be constructed based on the patch? Not easily. You have to use the debugger and it's not exposed to content.
Do comments in the patch, the check-in comment, or tests included in the patch paint a bulls-eye on the security problem? No.
Which older supported branches are affected by this flaw? 27+.
If not all supported branches, which bug introduced the flaw? [Bug 933882](/show_bug.cgi?id=933882 "RESOLVED FIXED - Invalidate scripts and discard JIT code instead of doing AutoDebugModeGC").
Do you have backports for the affected branches? If not, how different, hard to create, and risky will they be? Should apply; else it will be very easy.
How likely is this patch to cause regressions; how much testing does it need? Unlikely.
[Attachment #8405761](/attachment.cgi?id=8405761&action=edit "Patch") -
Attachment is obsolete: true
[Attachment #8406027](/attachment.cgi?id=8406027&action=edit "Patch") -
Flags: sec-approval?
[Attachment #8406027](/attachment.cgi?id=8406027&action=edit "Patch") -
Flags: review+

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=995607#a167613_75935)• 11 years ago |

[status-b2g-v1.2](/buglist.cgi?f1=cf_status_b2g_1_2&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=unaffected)
[status-b2g-v1.3](/buglist.cgi?f1=cf_status_b2g_1_3&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=affected)
[status-b2g-v1.4](/buglist.cgi?f1=cf_status_b2g_1_4&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=affected)
[status-b2g-v2.0](/buglist.cgi?f1=cf_status_b2g_2_0&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_2_0&o1=equals&v1=affected)
[status-firefox28](/buglist.cgi?f1=cf_status_firefox28&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=wontfix)

|  | [Sylvestre Ledru [:Sylvestre]](/user_profile?user_id=495955) |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=995607#c11)• 11 years ago |
|  | |

It would be great if we could get that for 29 beta 9 (gtb next Thursday). Thanks
[tracking-firefox29](/buglist.cgi?f1=cf_tracking_firefox29&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox29&o1=equals&v1=%3F) → [+](/buglist.cgi?f1=cf_tracking_firefox29&o1=equals&v1=%2B)
[tracking-firefox30](/buglist.cgi?f1=cf_tracking_firefox30&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox30&o1=equals&v1=%3F) → [+](/buglist.cgi?f1=cf_tracking_firefox30&o1=equals&v1=%2B)
[tracking-firefox31](/buglist.cgi?f1=cf_tracking_firefox31&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox31&o1=equals&v1=%3F) → [+](/buglist.cgi?f1=cf_tracking_firefox31&o1=equals&v1=%2B)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=995607#c12)• 11 years ago |
|  | |

Comment on [attachment 8406027](/attachment.cgi?id=8406027 "Patch") [[details]](/attachment.cgi?id=8406027&action=edit "Patch") [[diff]](/attachment.cgi?id=8406027&action=diff "Patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=995607&attachment=8406027)
Patch
sec-approval+ to get this into trunk. We should get this into Aurora and also Beta, if we can get Beta approval. We should loop in release management for that given the date.
[Attachment #8406027](/attachment.cgi?id=8406027&action=edit "Patch") -
Flags: sec-approval? → sec-approval+

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=995607#a266811_280903)• 11 years ago |

Flags: needinfo?(sledru)

|  | [Sylvestre Ledru [:Sylvestre]](/user_profile?user_id=495955) |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=995607#c13)• 11 years ago |
|  | |

Sure, as said in [comment 11](/show_bug.cgi?id=995607#c11 "RESOLVED FIXED - AutoDebugModeInvalidation can discard baseline scripts that are on the stack"), we can accept it in beta9 (next Thursday).
Jan, can we get an uplift request for both aurora & beta? ThanksFlags: needinfo?(sledru) → needinfo?(jdemooij)

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297)  Assignee |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=995607#c14)• 11 years ago |
|  | |

<https://hg.mozilla.org/integration/mozilla-inbound/rev/eb8e31011371>Flags: needinfo?(jdemooij)

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297)  Assignee |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=995607#c15)• 11 years ago |
|  | |

Comment on [attachment 8406027](/attachment.cgi?id=8406027 "Patch") [[details]](/attachment.cgi?id=8406027&action=edit "Patch") [[diff]](/attachment.cgi?id=8406027&action=diff "Patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=995607&attachment=8406027)
Patch
[Approval Request Comment]
Bug caused by (feature/regressing bug #): [Bug 933882](/show_bug.cgi?id=933882 "RESOLVED FIXED - Invalidate scripts and discard JIT code instead of doing AutoDebugModeGC").
User impact if declined: Crashes, sec issues maybe.
Testing completed (on m-c, etc.): Just landed on m-i.
Risk to taking this patch (and alternatives if risky): Pretty low risk; it makes some code unconditional but doesn't add a lot of new code.
String or IDL/UUID changes made by this patch: None.
[Attachment #8406027](/attachment.cgi?id=8406027&action=edit "Patch") -
Flags: approval-mozilla-beta?
[Attachment #8406027](/attachment.cgi?id=8406027&action=edit "Patch") -
Flags: approval-mozilla-aurora?

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=995607#a271063_280903)• 11 years ago |

[Attachment #8406027](/attachment.cgi?id=8406027&action=edit "Patch") -
Flags: approval-mozilla-beta?
[Attachment #8406027](/attachment.cgi?id=8406027&action=edit "Patch") -
Flags: approval-mozilla-beta+
[Attachment #8406027](/attachment.cgi?id=8406027&action=edit "Patch") -
Flags: approval-mozilla-aurora?
[Attachment #8406027](/attachment.cgi?id=8406027&action=edit "Patch") -
Flags: approval-mozilla-aurora+

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=995607#c16)• 11 years ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/eb8e31011371>Status: ASSIGNED → RESOLVEDClosed: 11 years ago
[status-firefox31](/buglist.cgi?f1=cf_status_firefox31&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=fixed)Resolution: --- → FIXEDTarget Milestone: --- → mozilla31

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=995607#c17)• 11 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-aurora/rev/f23828f89bdb>
<https://hg.mozilla.org/releases/mozilla-beta/rev/838a0ac967ae>
<https://hg.mozilla.org/releases/mozilla-b2g28_v1_3/rev/7c263121d3e0>
[status-b2g-v1.1hd](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=equals&v1=unaffected)
[status-b2g-v1.3](/buglist.cgi?f1=cf_status_b2g_1_3&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=fixed)
[status-b2g-v1.4](/buglist.cgi?f1=cf_status_b2g_1_4&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=fixed)
[status-b2g-v2.0](/buglist.cgi?f1=cf_status_b2g_2_0&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_2_0&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_2_0&o1=equals&v1=fixed)
[status-firefox29](/buglist.cgi?f1=cf_status_firefox29&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=fixed)
[status-firefox30](/buglist.cgi?f1=cf_status_firefox30&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=fixed)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=995607#a362672_75935)• 11 years ago |

[status-b2g-v1.3T](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=fixed)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=995607#a890347_280903)• 11 years ago |

Whiteboard: [adv-main29+]

|  | [Matt Wobensmith [:mwobensmith][:matt:]](/user_profile?user_id=452604) |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=995607#c18)• 11 years ago |
|  | |

Marking [qa-] due to lack of test case, feel free to provide one if you'd like verification. Thanks.Whiteboard: [adv-main29+] → [adv-main29+][qa-]

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=995607#a1395106_1689)• 11 years ago |

Group: javascript-core-security → core-security

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=995607#a43650018_1689)• 9 years ago |

Group: core-security
You need to [log in](/show_bug.cgi?id=995607&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Jan de Mooij [:jandem]](/user_profile?user_id=375297)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from blog.mozilla.org_214f5ef1_20250126_074646.html ===

[Skip to content](#content)

[Mozilla](https://blog.mozilla.org/en/)

![search](https://blog.mozilla.org/wp-content/themes/foxtail/assets/images/icons/search.svg)

* [Internet Culture](https://blog.mozilla.org/en/category/internet-culture/)
  + [Deep Dives](https://blog.mozilla.org/en/category/internet-culture/deep-dives/)
  + [Mozilla Explains](https://blog.mozilla.org/en/category/internet-culture/mozilla-explains/)
  + [Interviews](https://blog.mozilla.org/en/category/internet-culture/interviews/)
  + [Videos](https://blog.mozilla.org/en/category/videos/)
* [Privacy & Security](https://blog.mozilla.org/en/category/privacy-security/)
* [Products](https://blog.mozilla.org/en/category/products/)
  + [Firefox](https://blog.mozilla.org/en/category/products/firefox/)
  + [Pocket](https://blog.mozilla.org/en/category/products/pocket/)
  + [Mozilla VPN](https://blog.mozilla.org/en/category/products/mozilla-vpn/)
* [Mozilla](https://blog.mozilla.org/en/category/mozilla/)
  + [News](https://blog.mozilla.org/en/category/mozilla/news/)
  + [Internet Policy](https://blog.mozilla.org/en/category/mozilla/internet-policy/)
  + [Leadership](https://blog.mozilla.org/en/category/mozilla/leadership/)
    - [Mitchell Baker, CEO](https://blog.mozilla.org/en/author/mitchellmozillacom/)
    - [Mark Surman, ED Foundation](https://blog.mozilla.org/en/author/markmozillafoundation-org/)
    - [Eric Rescorla, Firefox CTO](https://blog.mozilla.org/en/author/ekrmozilla-com/)

[Download Firefox](https://www.mozilla.org/firefox/new/?utm_source=blog.mozilla.org&utm_medium=referral&utm_campaign=blog-nav)

![search](https://blog.mozilla.org/wp-content/themes/foxtail/assets/images/icons/search.svg)

#### Search

Search for:

![](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2019/01/mozilla-logo-bw-rgb.png)
## News

Official announcements and press releases

[![Room filled with people listening to a speaker on stage. Demo Day visual image in the background.](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/12/Demo_Day_Blog_Header_-1-800x800.jpg)
Mozilla
## Mozilla Builders: Celebrating community-driven innovation in AI

Read More](https://blog.mozilla.org/en/mozilla/mozilla-builders-demo-day/)

[![The Mozilla logo in green on a black background](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/12/logo-lockup-video-poster-800x800.png)
Mozilla
## Mozilla welcomes new executive team members

Read More](https://blog.mozilla.org/en/mozilla/new-executives/)

[![Decorative image of wrapped gifts in front of an iphone](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2023/11/moz_header_holiday_firefox-phone-gifts_blue-03.png-800x800.png)
Products
## Shopping for everyone? We’ve got you covered with the Fakespot Holiday Gift Guide 2024

Read More](https://blog.mozilla.org/en/products/shopping-for-everyone-weve-got-you-covered-with-the-fakespot-holiday-gift-guide-2024/)

[![Text: Mozilla Builders](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/06/Blog-16_9-1920x1080-1-800x800.png)
Mozilla
## 14 AI projects to watch: Mozilla’s first Builders Accelerator cohort kicks off

Read More](https://blog.mozilla.org/en/mozilla/14-ai-projects-to-watch-mozillas-first-builders-accelerator-cohort-kicks-off/)

[![A check mark next to the text "Fakespot."](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2023/07/Fakespot_ProductBlog-2-800x800.jpg)
News
## Fakespot’s guide to trending back-to-school products

Read More](https://blog.mozilla.org/en/mozilla/news/fakespots-guide-to-trending-back-to-school-products/)

[![](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/06/IG_Highlights_Icon-800x800.png)
Mozilla
## BAFTA Award-Winner Siobhán McSweeney to host Mozilla’s 2nd Annual Rise25 Awards in Dublin, Ireland on Aug. 13

Read More](https://blog.mozilla.org/en/mozilla/bafta-award-winner-siobhan-mcsweeney-to-host-mozillas-2nd-annual-rise25-awards-in-dublin-ireland-on-august-13/)

[![](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/05/fx_website_meta-image_tips-tricks_alt-04-1-800x800.webp)
Mozilla
## Here’s what we’re working on in Firefox

Read More](https://blog.mozilla.org/en/mozilla/heres-what-were-working-on-in-firefox/)

[![A check mark next to the text "Fakespot."](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2023/07/Fakespot_ProductBlog-2-800x800.jpg)
News
## Fakespot reveals the product categories with the most and least reliable product reviews

Read More](https://blog.mozilla.org/en/mozilla/news/fakespot-reveals-the-product-categories-with-the-most-and-least-reliable-product-reviews-for-summer-and-back-to-school-shopping/)

[![A dark blue speech bubble with horizontal purple and red bars on a pink background.](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2020/03/fx_blog_header_announcements_001_1920x1080-800x800.jpg)
Firefox
## Engaging with our Firefox community: Highlights from our recent AMA

Read More](https://blog.mozilla.org/en/products/firefox/engaging-with-our-firefox-community-highlights-from-our-recent-ama/)

[![](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/06/IG_Highlights_Icon-800x800.png)
Mozilla
## Mozilla announces finalists for the 2nd annual Rise25 Awards

Read More](https://blog.mozilla.org/en/mozilla/mozilla-announces-finalists-for-the-2nd-annual-rise25-awards/)

[![Mozilla and Anonym logos](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/06/blog_1200x800_v2-800x800.png)
Mozilla
## Introducing Anonym: Raising the bar for privacy-preserving digital advertising

Read More](https://blog.mozilla.org/en/mozilla/mozilla-anonym-raising-the-bar-for-privacy-preserving-digital-advertising/)

[![logo - zero with a diagonal line through it, and the letters D, I, N](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/06/odintbanner-500x500.png)
Mozilla
## Keeping GenAI technologies secure is a shared responsibility

Read More](https://blog.mozilla.org/en/mozilla/keeping-genai-technologies-secure-is-a-shared-responsibility/)

1
[2](https://blog.mozilla.org/en/category/mozilla/news/page/2?utm_source=www.mozilla)
[3](https://blog.mozilla.org/en/category/mozilla/news/page/3?utm_source=www.mozilla)
…
[24](https://blog.mozilla.org/en/category/mozilla/news/page/24?utm_source=www.mozilla)
[next](https://blog.mozilla.org/en/category/mozilla/news/page/2?utm_source=www.mozilla)

![newsletter](https://blog.mozilla.org/wp-content/themes/foxtail/assets/images/newsletter.png)

### Keep up with all things Firefox

Get how-tos, advice and news to make your Firefox experience work best for you.

Your e-mail address

Country
- select -
Afghanistan
Akrotiri
Albania
Algeria
American Samoa
Andorra
Angola
Anguilla
Antarctica
Antigua and Barbuda
Argentina
Armenia
Aruba
Ashmore and Cartier Islands
Australia
Austria
Azerbaijan
Bahamas, The
Bahrain
Baker Island
Bangladesh
Barbados
Bassas da India
Belarus
Belgium
Belize
Benin
Bermuda
Bhutan
Bolivia
Bonaire, Sint Eustatius, and Saba
Bosnia and Herzegovina
Botswana
Bouvet Island
Brazil
British Indian Ocean Territory
Brunei
Bulgaria
Burkina Faso
Burma
Burundi
Cabo Verde
Cambodia
Cameroon
Canada
Cayman Islands
Central African Republic
Chad
Chile
China
Christmas Island
Clipperton Island
Cocos (Keeling) Islands
Colombia
Comoros
Congo (Brazzaville)
Congo (Kinshasa)
Cook Islands
Coral Sea Islands
Costa Rica
Croatia
Cuba
Curaçao
Cyprus
Czech Republic
Côte d’Ivoire
Denmark
Dhekelia
Diego Garcia
Djibouti
Dominica
Dominican Republic
Ecuador
Egypt
El Salvador
Equatorial Guinea
Eritrea
Estonia
Ethiopia
Europa Island
Falkland Islands (Islas Malvinas)
Faroe Islands
Fiji
Finland
France
French Guiana
French Polynesia
French Southern and Antarctic Lands
Gabon
Gambia, The
Gaza Strip
Georgia
Germany
Ghana
Gibraltar
Glorioso Islands
Greece
Greenland
Grenada
Guadeloupe
Guam
Guatemala
Guernsey
Guinea
Guinea-Bissau
Guyana
Haiti
Heard Island and McDonald Islands
Honduras
Hong Kong
Howland Island
Hungary
Iceland
India
Indonesia
Iran
Iraq
Ireland
Isle of Man
Israel
Italy
Jamaica
Jan Mayen
Japan
Jarvis Island
Jersey
Johnston Atoll
Jordan
Juan de Nova Island
Kazakhstan
Kenya
Kingman Reef
Kiribati
Korea, North
Korea, South
Kosovo
Kuwait
Kyrgyzstan
Laos
Latvia
Lebanon
Lesotho
Liberia
Libya
Liechtenstein
Lithuania
Luxembourg
Macau
Macedonia
Madagascar
Malawi
Malaysia
Maldives
Mali
Malta
Marshall Islands
Martinique
Mauritania
Mauritius
Mayotte
Mexico
Micronesia, Federated States of
Midway Islands
Moldova
Monaco
Mongolia
Montenegro
Montserrat
Morocco
Mozambique
Namibia
Nauru
Navassa Island
Nepal
Netherlands
New Caledonia
New Zealand
Nicaragua
Niger
Nigeria
Niue
Norfolk Island
Northern Mariana Islands
Norway
Oman
Pakistan
Palau
Palmyra Atoll
Panama
Papua New Guinea
Paracel Islands
Paraguay
Peru
Philippines
Pitcairn Islands
Poland
Portugal
Puerto Rico
Qatar
Reunion
Romania
Russia
Rwanda
Saint Barthelemy
Saint Helena, Ascension, and Tristan da Cunha
Saint Kitts and Nevis
Saint Lucia
Saint Martin
Saint Pierre and Miquelon
Saint Vincent and the Grenadines
Samoa
San Marino
Sao Tome and Principe
Saudi Arabia
Senegal
Serbia
Seychelles
Sierra Leone
Singapore
Sint Maarten
Slovakia
Slovenia
Solomon Islands
Somalia
South Africa
South Georgia and South Sandwich Islands
South Sudan
Spain
Spratly Islands
Sri Lanka
Sudan
Suriname
Svalbard
Swaziland
Sweden
Switzerland
Syria
Taiwan
Tajikistan
Tanzania
Thailand
Timor-Leste
Togo
Tokelau
Tonga
Trinidad and Tobago
Tromelin Island
Tunisia
Turkey
Turkmenistan
Turks and Caicos Islands
Tuvalu
Uganda
Ukraine
United Arab Emirates
United Kingdom
United States
Uruguay
Uzbekistan
Vanuatu
Vatican City
Venezuela
Vietnam
Virgin Islands, British
Virgin Islands, U.S.
Wake Island
Wallis and Futuna
West Bank
Western Sahara
Yemen
Zambia
Zimbabwe

Language
English
Bahasa Indonesia
Deutsch
Español
Français
Polski
Português
Русский
正體中文

Format

 HTML

 Text

I’m okay with Mozilla handling my info as explained in this [Privacy Policy](https://www.mozilla.org/privacy/).

Sign up now
We will only send you
Mozilla-related information.

## Thanks!

If you haven’t previously confirmed a subscription to a Mozilla-related newsletter you may have to do so. Please check your inbox or your spam filter for an e-mail from us.

[Mozilla](https://www.mozilla.org/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)

##### Mozilla

* [About](https://www.mozilla.org/about/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Contact Us](https://www.mozilla.org/contact/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Donate](https://donate.mozilla.org/?presets=50,30,20,10&amount=30¤cy=usd&utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)

##### Firefox

* [Download Firefox](https://www.mozilla.org/firefox/new/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Desktop](https://www.mozilla.org/firefox/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Mobile](https://www.mozilla.org/firefox/mobile/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Features](https://www.mozilla.org/firefox/features/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Beta, Nightly, Developer Edition](https://www.mozilla.org/firefox/channel/desktop/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)

##### Resources

* [Privacy Hub](https://www.mozilla.org/privacy/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Browser Comparison](https://www.mozilla.org/firefox/browsers/compare/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Brand Standards](https://mozilla.design/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)

##### Social

Follow @Firefox

* [Twitter (@mozilla)](https://twitter.com/firefox)
* [Instagram (@mozilla)](https://www.instagram.com/firefox/)
* [YouTube (@firefoxchannel)](https://www.youtube.com/user/firefoxchannel)

Follow @Mozilla

* [Twitter (@mozilla)](https://twitter.com/mozilla)
* [Instagram (@mozilla)](https://www.instagram.com/mozilla/)

* [Website Privacy Notice](https://www.mozilla.org/privacy/websites/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Legal](https://www.mozilla.org/about/legal/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)



=== Content from security.gentoo.org_d439654f_20250125_092511.html ===

[![Gentoo](https://assets.gentoo.org/tyrian/v2/site-logo.png)](/ "Back to the homepage")
Security

[**Get Gentoo!**](https://get.gentoo.org/)
gentoo.org sites
[gentoo.org](https://www.gentoo.org/ "Main Gentoo website")
[Wiki](https://wiki.gentoo.org/ "Find and contribute documentation")
[Bugs](https://bugs.gentoo.org/ "Report issues and find common issues")
[Forums](https://forums.gentoo.org/ "Discuss with the community")
[Packages](https://packages.gentoo.org/ "Find software for your Gentoo")

[Planet](https://planet.gentoo.org/ "Find out what's going on in the developer community")
[Archives](https://archives.gentoo.org/ "Read up on past discussions")
[Sources](https://sources.gentoo.org/ "Browse our source code")

[Infra Status](https://infra-status.gentoo.org/ "Get updates on the services provided by Gentoo")

* [Home](/)
* [Stay informed](/subscribe)
* [Advisories](/glsa)

# Mozilla Products: Multiple vulnerabilities — GLSA **201504-01**

Multiple vulnerabilities have been found in Mozilla Firefox,
Thunderbird, and SeaMonkey, the worst of which may allow user-assisted
execution of arbitrary code.

### Affected packages

| Package | **www-client/firefox** on all architectures |
| --- | --- |
| Affected versions | < **31.5.3** |
| Unaffected versions | >= **31.5.3** |

| Package | **www-client/firefox-bin** on all architectures |
| --- | --- |
| Affected versions | < **31.5.3** |
| Unaffected versions | >= **31.5.3** |

| Package | **mail-client/thunderbird** on all architectures |
| --- | --- |
| Affected versions | < **31.5.0** |
| Unaffected versions | >= **31.5.0** |

| Package | **mail-client/thunderbird-bin** on all architectures |
| --- | --- |
| Affected versions | < **31.5.0** |
| Unaffected versions | >= **31.5.0** |

| Package | **www-client/seamonkey** on all architectures |
| --- | --- |
| Affected versions | < **2.33.1** |
| Unaffected versions | >= **2.33.1** |

| Package | **www-client/seamonkey-bin** on all architectures |
| --- | --- |
| Affected versions | < **2.33.1** |
| Unaffected versions | >= **2.33.1** |

| Package | **dev-libs/nspr** on all architectures |
| --- | --- |
| Affected versions | < **4.10.6** |
| Unaffected versions | >= **4.10.6** |

### Background

Mozilla Firefox is an open-source web browser and Mozilla Thunderbird an
open-source email client, both from the Mozilla Project. The SeaMonkey
project is a community effort to deliver production-quality releases of
code derived from the application formerly known as the ‘Mozilla
Application Suite’.

### Description

Multiple vulnerabilities have been discovered in Firefox, Thunderbird,
and SeaMonkey. Please review the CVE identifiers referenced below for
details.

### Impact

A remote attacker could entice a user to view a specially crafted web
page or email, possibly resulting in execution of arbitrary code or a
Denial of Service condition. Furthermore, a remote attacker may be able
to perform Man-in-the-Middle attacks, obtain sensitive information, spoof
the address bar, conduct clickjacking attacks, bypass security
restrictions and protection mechanisms, or have other unspecified
impact.

### Workaround

There are no known workarounds at this time.

### Resolution

All firefox users should upgrade to the latest version:

```
 # emerge --sync
 # emerge --ask --oneshot --verbose ">=www-client/firefox-31.5.3"

```

All firefox-bin users should upgrade to the latest version:

```
 # emerge --sync
 # emerge --ask --oneshot --verbose ">=www-client/firefox-bin-31.5.3"

```

All thunderbird users should upgrade to the latest version:

```
 # emerge --sync
 # emerge --ask --oneshot --verbose ">=mail-client/thunderbird-31.5.0"

```

All thunderbird-bin users should upgrade to the latest version:

```
 # emerge --sync
 # emerge --ask --oneshot --verbose
 ">=mail-client/thunderbird-bin-31.5.0"

```

All seamonkey users should upgrade to the latest version:

```
 # emerge --sync
 # emerge --ask --oneshot --verbose ">=www-client/seamonkey-2.33.1"

```

All seamonkey-bin users should upgrade to the latest version:

```
 # emerge --sync
 # emerge --ask --oneshot --verbose ">=www-client/seamonkey-bin-2.33.1"

```

All nspr users should upgrade to the latest version:

```
 # emerge --sync
 # emerge --ask --oneshot --verbose ">=dev-libs/nspr-4.10.6"

```
### References

* [CVE-2013-1741](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-1741)
* [CVE-2013-2566](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-2566)
* [CVE-2013-5590](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5590)
* [CVE-2013-5591](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5591)
* [CVE-2013-5592](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5592)
* [CVE-2013-5593](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5593)
* [CVE-2013-5595](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5595)
* [CVE-2013-5596](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5596)
* [CVE-2013-5597](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5597)
* [CVE-2013-5598](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5598)
* [CVE-2013-5599](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5599)
* [CVE-2013-5600](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5600)
* [CVE-2013-5601](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5601)
* [CVE-2013-5602](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5602)
* [CVE-2013-5603](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5603)
* [CVE-2013-5604](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5604)
* [CVE-2013-5605](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5605)
* [CVE-2013-5606](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5606)
* [CVE-2013-5607](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5607)
* [CVE-2013-5609](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5609)
* [CVE-2013-5610](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5610)
* [CVE-2013-5612](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5612)
* [CVE-2013-5613](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5613)
* [CVE-2013-5614](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5614)
* [CVE-2013-5615](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5615)
* [CVE-2013-5616](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5616)
* [CVE-2013-5618](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5618)
* [CVE-2013-5619](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5619)
* [CVE-2013-6671](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-6671)
* [CVE-2013-6672](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-6672)
* [CVE-2013-6673](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-6673)
* [CVE-2014-1477](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1477)
* [CVE-2014-1478](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1478)
* [CVE-2014-1479](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1479)
* [CVE-2014-1480](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1480)
* [CVE-2014-1481](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1481)
* [CVE-2014-1482](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1482)
* [CVE-2014-1483](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1483)
* [CVE-2014-1485](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1485)
* [CVE-2014-1486](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1486)
* [CVE-2014-1487](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1487)
* [CVE-2014-1488](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1488)
* [CVE-2014-1489](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1489)
* [CVE-2014-1490](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1490)
* [CVE-2014-1491](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1491)
* [CVE-2014-1492](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1492)
* [CVE-2014-1493](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1493)
* [CVE-2014-1494](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1494)
* [CVE-2014-1496](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1496)
* [CVE-2014-1497](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1497)
* [CVE-2014-1498](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1498)
* [CVE-2014-1499](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1499)
* [CVE-2014-1500](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1500)
* [CVE-2014-1502](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1502)
* [CVE-2014-1504](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1504)
* [CVE-2014-1505](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1505)
* [CVE-2014-1508](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1508)
* [CVE-2014-1509](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1509)
* [CVE-2014-1510](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1510)
* [CVE-2014-1511](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1511)
* [CVE-2014-1512](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1512)
* [CVE-2014-1513](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1513)
* [CVE-2014-1514](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1514)
* [CVE-2014-1518](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1518)
* [CVE-2014-1519](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1519)
* [CVE-2014-1520](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1520)
* [CVE-2014-1522](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1522)
* [CVE-2014-1523](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1523)
* [CVE-2014-1524](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1524)
* [CVE-2014-1525](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1525)
* [CVE-2014-1526](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1526)
* [CVE-2014-1529](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1529)
* [CVE-2014-1530](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1530)
* [CVE-2014-1531](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1531)
* [CVE-2014-1532](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1532)
* [CVE-2014-1533](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1533)
* [CVE-2014-1534](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1534)
* [CVE-2014-1536](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1536)
* [CVE-2014-1537](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1537)
* [CVE-2014-1538](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1538)
* [CVE-2014-1539](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1539)
* [CVE-2014-1540](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1540)
* [CVE-2014-1541](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1541)
* [CVE-2014-1542](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1542)
* [CVE-2014-1543](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1543)
* [CVE-2014-1544](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1544)
* [CVE-2014-1545](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1545)
* [CVE-2014-1547](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1547)
* [CVE-2014-1548](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1548)
* [CVE-2014-1549](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1549)
* [CVE-2014-1550](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1550)
* [CVE-2014-1551](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1551)
* [CVE-2014-1552](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1552)
* [CVE-2014-1553](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1553)
* [CVE-2014-1554](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1554)
* [CVE-2014-1555](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1555)
* [CVE-2014-1556](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1556)
* [CVE-2014-1557](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1557)
* [CVE-2014-1558](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1558)
* [CVE-2014-1559](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1559)
* [CVE-2014-1560](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1560)
* [CVE-2014-1561](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1561)
* [CVE-2014-1562](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1562)
* [CVE-2014-1563](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1563)
* [CVE-2014-1564](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1564)
* [CVE-2014-1565](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1565)
* [CVE-2014-1566](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1566)
* [CVE-2014-1567](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1567)
* [CVE-2014-1568](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1568)
* [CVE-2014-1574](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1574)
* [CVE-2014-1575](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1575)
* [CVE-2014-1576](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1576)
* [CVE-2014-1577](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1577)
* [CVE-2014-1578](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1578)
* [CVE-2014-1580](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1580)
* [CVE-2014-1581](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1581)
* [CVE-2014-1582](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1582)
* [CVE-2014-1583](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1583)
* [CVE-2014-1584](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1584)
* [CVE-2014-1585](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1585)
* [CVE-2014-1586](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1586)
* [CVE-2014-1587](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1587)
* [CVE-2014-1588](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1588)
* [CVE-2014-1589](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1589)
* [CVE-2014-1590](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1590)
* [CVE-2014-1591](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1591)
* [CVE-2014-1592](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1592)
* [CVE-2014-1593](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1593)
* [CVE-2014-1594](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1594)
* [CVE-2014-5369](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-5369)
* [CVE-2014-8631](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-8631)
* [CVE-2014-8632](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-8632)
* [CVE-2014-8634](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-8634)
* [CVE-2014-8635](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-8635)
* [CVE-2014-8636](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-8636)
* [CVE-2014-8637](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-8637)
* [CVE-2014-8638](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-8638)
* [CVE-2014-8639](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-8639)
* [CVE-2014-8640](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-8640)
* [CVE-2014-8641](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-8641)
* [CVE-2014-8642](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-8642)
* [CVE-2015-0817](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0817)
* [CVE-2015-0818](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0818)
* [CVE-2015-0819](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0819)
* [CVE-2015-0820](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0820)
* [CVE-2015-0821](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0821)
* [CVE-2015-0822](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0822)
* [CVE-2015-0823](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0823)
* [CVE-2015-0824](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0824)
* [CVE-2015-0825](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0825)
* [CVE-2015-0826](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0826)
* [CVE-2015-0827](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0827)
* [CVE-2015-0828](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0828)
* [CVE-2015-0829](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0829)
* [CVE-2015-0830](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0830)
* [CVE-2015-0831](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0831)
* [CVE-2015-0832](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0832)
* [CVE-2015-0833](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0833)
* [CVE-2015-0834](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0834)
* [CVE-2015-0835](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0835)
* [CVE-2015-0836](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0836)

**Release date**

April 07, 2015

**Latest revision**

April 08, 2015: 2

**Severity**

normal

**Exploitable**

remote

**Bugzilla entries**

* [489796](https://bugs.gentoo.org/show_bug.cgi?id=489796)
* [491234](https://bugs.gentoo.org/show_bug.cgi?id=491234)
* [493850](https://bugs.gentoo.org/show_bug.cgi?id=493850)
* [500320](https://bugs.gentoo.org/show_bug.cgi?id=500320)
* [505072](https://bugs.gentoo.org/show_bug.cgi?id=505072)
* [509050](https://bugs.gentoo.org/show_bug.cgi?id=509050)
* [512896](https://bugs.gentoo.org/show_bug.cgi?id=512896)
* [517876](https://bugs.gentoo.org/show_bug.cgi?id=517876)
* [522020](https://bugs.gentoo.org/show_bug.cgi?id=522020)
* [523652](https://bugs.gentoo.org/show_bug.cgi?id=523652)
* [525474](https://bugs.gentoo.org/show_bug.cgi?id=525474)
* [531408](https://bugs.gentoo.org/show_bug.cgi?id=531408)
* [536564](https://bugs.gentoo.org/show_bug.cgi?id=536564)
* [541316](https://bugs.gentoo.org/show_bug.cgi?id=541316)
* [544056](https://bugs.gentoo.org/show_bug.cgi?id=544056)

### Questions or comments?

Please feel free to contact us.

**© 2001–2020 Gentoo Foundation, Inc.**



=== Content from blog.mozilla.org_a1905f2a_20250126_074645.html ===

[Skip to content](#content)

[Mozilla](https://blog.mozilla.org/en/)

![search](https://blog.mozilla.org/wp-content/themes/foxtail/assets/images/icons/search.svg)

* [Internet Culture](https://blog.mozilla.org/en/category/internet-culture/)
  + [Deep Dives](https://blog.mozilla.org/en/category/internet-culture/deep-dives/)
  + [Mozilla Explains](https://blog.mozilla.org/en/category/internet-culture/mozilla-explains/)
  + [Interviews](https://blog.mozilla.org/en/category/internet-culture/interviews/)
  + [Videos](https://blog.mozilla.org/en/category/videos/)
* [Privacy & Security](https://blog.mozilla.org/en/category/privacy-security/)
* [Products](https://blog.mozilla.org/en/category/products/)
  + [Firefox](https://blog.mozilla.org/en/category/products/firefox/)
  + [Pocket](https://blog.mozilla.org/en/category/products/pocket/)
  + [Mozilla VPN](https://blog.mozilla.org/en/category/products/mozilla-vpn/)
* [Mozilla](https://blog.mozilla.org/en/category/mozilla/)
  + [News](https://blog.mozilla.org/en/category/mozilla/news/)
  + [Internet Policy](https://blog.mozilla.org/en/category/mozilla/internet-policy/)
  + [Leadership](https://blog.mozilla.org/en/category/mozilla/leadership/)
    - [Mitchell Baker, CEO](https://blog.mozilla.org/en/author/mitchellmozillacom/)
    - [Mark Surman, ED Foundation](https://blog.mozilla.org/en/author/markmozillafoundation-org/)
    - [Eric Rescorla, Firefox CTO](https://blog.mozilla.org/en/author/ekrmozilla-com/)

[Download Firefox](https://www.mozilla.org/firefox/new/?utm_source=blog.mozilla.org&utm_medium=referral&utm_campaign=blog-nav)

![search](https://blog.mozilla.org/wp-content/themes/foxtail/assets/images/icons/search.svg)

#### Search

Search for:

![](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2019/01/mozilla-logo-bw-rgb.png)
## News

Official announcements and press releases

[![Room filled with people listening to a speaker on stage. Demo Day visual image in the background.](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/12/Demo_Day_Blog_Header_-1-800x800.jpg)
Mozilla
## Mozilla Builders: Celebrating community-driven innovation in AI

Read More](https://blog.mozilla.org/en/mozilla/mozilla-builders-demo-day/)

[![The Mozilla logo in green on a black background](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/12/logo-lockup-video-poster-800x800.png)
Mozilla
## Mozilla welcomes new executive team members

Read More](https://blog.mozilla.org/en/mozilla/new-executives/)

[![Decorative image of wrapped gifts in front of an iphone](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2023/11/moz_header_holiday_firefox-phone-gifts_blue-03.png-800x800.png)
Products
## Shopping for everyone? We’ve got you covered with the Fakespot Holiday Gift Guide 2024

Read More](https://blog.mozilla.org/en/products/shopping-for-everyone-weve-got-you-covered-with-the-fakespot-holiday-gift-guide-2024/)

[![Text: Mozilla Builders](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/06/Blog-16_9-1920x1080-1-800x800.png)
Mozilla
## 14 AI projects to watch: Mozilla’s first Builders Accelerator cohort kicks off

Read More](https://blog.mozilla.org/en/mozilla/14-ai-projects-to-watch-mozillas-first-builders-accelerator-cohort-kicks-off/)

[![A check mark next to the text "Fakespot."](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2023/07/Fakespot_ProductBlog-2-800x800.jpg)
News
## Fakespot’s guide to trending back-to-school products

Read More](https://blog.mozilla.org/en/mozilla/news/fakespots-guide-to-trending-back-to-school-products/)

[![](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/06/IG_Highlights_Icon-800x800.png)
Mozilla
## BAFTA Award-Winner Siobhán McSweeney to host Mozilla’s 2nd Annual Rise25 Awards in Dublin, Ireland on Aug. 13

Read More](https://blog.mozilla.org/en/mozilla/bafta-award-winner-siobhan-mcsweeney-to-host-mozillas-2nd-annual-rise25-awards-in-dublin-ireland-on-august-13/)

[![](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/05/fx_website_meta-image_tips-tricks_alt-04-1-800x800.webp)
Mozilla
## Here’s what we’re working on in Firefox

Read More](https://blog.mozilla.org/en/mozilla/heres-what-were-working-on-in-firefox/)

[![A check mark next to the text "Fakespot."](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2023/07/Fakespot_ProductBlog-2-800x800.jpg)
News
## Fakespot reveals the product categories with the most and least reliable product reviews

Read More](https://blog.mozilla.org/en/mozilla/news/fakespot-reveals-the-product-categories-with-the-most-and-least-reliable-product-reviews-for-summer-and-back-to-school-shopping/)

[![A dark blue speech bubble with horizontal purple and red bars on a pink background.](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2020/03/fx_blog_header_announcements_001_1920x1080-800x800.jpg)
Firefox
## Engaging with our Firefox community: Highlights from our recent AMA

Read More](https://blog.mozilla.org/en/products/firefox/engaging-with-our-firefox-community-highlights-from-our-recent-ama/)

[![](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/06/IG_Highlights_Icon-800x800.png)
Mozilla
## Mozilla announces finalists for the 2nd annual Rise25 Awards

Read More](https://blog.mozilla.org/en/mozilla/mozilla-announces-finalists-for-the-2nd-annual-rise25-awards/)

[![Mozilla and Anonym logos](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/06/blog_1200x800_v2-800x800.png)
Mozilla
## Introducing Anonym: Raising the bar for privacy-preserving digital advertising

Read More](https://blog.mozilla.org/en/mozilla/mozilla-anonym-raising-the-bar-for-privacy-preserving-digital-advertising/)

[![logo - zero with a diagonal line through it, and the letters D, I, N](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/06/odintbanner-500x500.png)
Mozilla
## Keeping GenAI technologies secure is a shared responsibility

Read More](https://blog.mozilla.org/en/mozilla/keeping-genai-technologies-secure-is-a-shared-responsibility/)

1
[2](https://blog.mozilla.org/en/category/mozilla/news/page/2?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=compa)
[3](https://blog.mozilla.org/en/category/mozilla/news/page/3?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=compa)
…
[24](https://blog.mozilla.org/en/category/mozilla/news/page/24?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=compa)
[next](https://blog.mozilla.org/en/category/mozilla/news/page/2?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=compa)

![newsletter](https://blog.mozilla.org/wp-content/themes/foxtail/assets/images/newsletter.png)

### Keep up with all things Firefox

Get how-tos, advice and news to make your Firefox experience work best for you.

Your e-mail address

Country
- select -
Afghanistan
Akrotiri
Albania
Algeria
American Samoa
Andorra
Angola
Anguilla
Antarctica
Antigua and Barbuda
Argentina
Armenia
Aruba
Ashmore and Cartier Islands
Australia
Austria
Azerbaijan
Bahamas, The
Bahrain
Baker Island
Bangladesh
Barbados
Bassas da India
Belarus
Belgium
Belize
Benin
Bermuda
Bhutan
Bolivia
Bonaire, Sint Eustatius, and Saba
Bosnia and Herzegovina
Botswana
Bouvet Island
Brazil
British Indian Ocean Territory
Brunei
Bulgaria
Burkina Faso
Burma
Burundi
Cabo Verde
Cambodia
Cameroon
Canada
Cayman Islands
Central African Republic
Chad
Chile
China
Christmas Island
Clipperton Island
Cocos (Keeling) Islands
Colombia
Comoros
Congo (Brazzaville)
Congo (Kinshasa)
Cook Islands
Coral Sea Islands
Costa Rica
Croatia
Cuba
Curaçao
Cyprus
Czech Republic
Côte d’Ivoire
Denmark
Dhekelia
Diego Garcia
Djibouti
Dominica
Dominican Republic
Ecuador
Egypt
El Salvador
Equatorial Guinea
Eritrea
Estonia
Ethiopia
Europa Island
Falkland Islands (Islas Malvinas)
Faroe Islands
Fiji
Finland
France
French Guiana
French Polynesia
French Southern and Antarctic Lands
Gabon
Gambia, The
Gaza Strip
Georgia
Germany
Ghana
Gibraltar
Glorioso Islands
Greece
Greenland
Grenada
Guadeloupe
Guam
Guatemala
Guernsey
Guinea
Guinea-Bissau
Guyana
Haiti
Heard Island and McDonald Islands
Honduras
Hong Kong
Howland Island
Hungary
Iceland
India
Indonesia
Iran
Iraq
Ireland
Isle of Man
Israel
Italy
Jamaica
Jan Mayen
Japan
Jarvis Island
Jersey
Johnston Atoll
Jordan
Juan de Nova Island
Kazakhstan
Kenya
Kingman Reef
Kiribati
Korea, North
Korea, South
Kosovo
Kuwait
Kyrgyzstan
Laos
Latvia
Lebanon
Lesotho
Liberia
Libya
Liechtenstein
Lithuania
Luxembourg
Macau
Macedonia
Madagascar
Malawi
Malaysia
Maldives
Mali
Malta
Marshall Islands
Martinique
Mauritania
Mauritius
Mayotte
Mexico
Micronesia, Federated States of
Midway Islands
Moldova
Monaco
Mongolia
Montenegro
Montserrat
Morocco
Mozambique
Namibia
Nauru
Navassa Island
Nepal
Netherlands
New Caledonia
New Zealand
Nicaragua
Niger
Nigeria
Niue
Norfolk Island
Northern Mariana Islands
Norway
Oman
Pakistan
Palau
Palmyra Atoll
Panama
Papua New Guinea
Paracel Islands
Paraguay
Peru
Philippines
Pitcairn Islands
Poland
Portugal
Puerto Rico
Qatar
Reunion
Romania
Russia
Rwanda
Saint Barthelemy
Saint Helena, Ascension, and Tristan da Cunha
Saint Kitts and Nevis
Saint Lucia
Saint Martin
Saint Pierre and Miquelon
Saint Vincent and the Grenadines
Samoa
San Marino
Sao Tome and Principe
Saudi Arabia
Senegal
Serbia
Seychelles
Sierra Leone
Singapore
Sint Maarten
Slovakia
Slovenia
Solomon Islands
Somalia
South Africa
South Georgia and South Sandwich Islands
South Sudan
Spain
Spratly Islands
Sri Lanka
Sudan
Suriname
Svalbard
Swaziland
Sweden
Switzerland
Syria
Taiwan
Tajikistan
Tanzania
Thailand
Timor-Leste
Togo
Tokelau
Tonga
Trinidad and Tobago
Tromelin Island
Tunisia
Turkey
Turkmenistan
Turks and Caicos Islands
Tuvalu
Uganda
Ukraine
United Arab Emirates
United Kingdom
United States
Uruguay
Uzbekistan
Vanuatu
Vatican City
Venezuela
Vietnam
Virgin Islands, British
Virgin Islands, U.S.
Wake Island
Wallis and Futuna
West Bank
Western Sahara
Yemen
Zambia
Zimbabwe

Language
English
Bahasa Indonesia
Deutsch
Español
Français
Polski
Português
Русский
正體中文

Format

 HTML

 Text

I’m okay with Mozilla handling my info as explained in this [Privacy Policy](https://www.mozilla.org/privacy/).

Sign up now
We will only send you
Mozilla-related information.

## Thanks!

If you haven’t previously confirmed a subscription to a Mozilla-related newsletter you may have to do so. Please check your inbox or your spam filter for an e-mail from us.

[Mozilla](https://www.mozilla.org/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)

##### Mozilla

* [About](https://www.mozilla.org/about/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Contact Us](https://www.mozilla.org/contact/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Donate](https://donate.mozilla.org/?presets=50,30,20,10&amount=30¤cy=usd&utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)

##### Firefox

* [Download Firefox](https://www.mozilla.org/firefox/new/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Desktop](https://www.mozilla.org/firefox/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Mobile](https://www.mozilla.org/firefox/mobile/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Features](https://www.mozilla.org/firefox/features/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Beta, Nightly, Developer Edition](https://www.mozilla.org/firefox/channel/desktop/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)

##### Resources

* [Privacy Hub](https://www.mozilla.org/privacy/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Browser Comparison](https://www.mozilla.org/firefox/browsers/compare/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Brand Standards](https://mozilla.design/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)

##### Social

Follow @Firefox

* [Twitter (@mozilla)](https://twitter.com/firefox)
* [Instagram (@mozilla)](https://www.instagram.com/firefox/)
* [YouTube (@firefoxchannel)](https://www.youtube.com/user/firefoxchannel)

Follow @Mozilla

* [Twitter (@mozilla)](https://twitter.com/mozilla)
* [Instagram (@mozilla)](https://www.instagram.com/mozilla/)

* [Website Privacy Notice](https://www.mozilla.org/privacy/websites/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Legal](https://www.mozilla.org/about/legal/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)



=== Content from bugzilla.mozilla.org_b49ec868_20250125_092459.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/919592)
* [XML](/show_bug.cgi?ctype=xml&id=919592)

Closed
[Bug 919592](/show_bug.cgi?id=919592)

Opened 11 years ago
Closed 11 years ago

# ARM asm.js crash with c64 emulator crash [@ js::jit::Assembler::bind(js::jit::Label\*, js::jit::BufferOffset) ]

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

ARM asm.js crash with c64 emulator crash [@ js::jit::Assembler::bind(js::jit::Label\*, js::jit::BufferOffset) ]

## Categories

### (Core :: JavaScript Engine: JIT, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=JavaScript%20Engine%3A%20JIT#JavaScript%20Engine%3A%20JIT)

JavaScript Engine: JIT
▾

Core :: JavaScript Engine: JIT
JavaScript engine's JIT compilers
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine%3A%20JIT&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine%3A%20JIT&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=JavaScript%20Engine%3A%20JIT)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

unspecified

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

ARM

All

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

normal

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla31

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Webcompat Priority | --- |
| --- | --- |
| Performance Impact | --- |
| Webcompat Score | --- |
| Accessibility Severity | --- |
| a11y-review | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox28 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=wontfix) |
| firefox29 | --- | [verified](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=verified) |
| firefox30 | --- | [verified](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=verified) |
| firefox31 | [+](/buglist.cgi?f1=cf_tracking_firefox31&o1=equals&v1=%2B) | [verified](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=verified) |
| firefox-esr24 | --- | [verified](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=verified) |
| b2g18 | --- | [wontfix](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=wontfix) |
| b2g-v1.1hd | --- | [wontfix](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=equals&v1=wontfix) |
| b2g-v1.2 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=fixed) |
| b2g-v1.3 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=fixed) |
| b2g-v1.3T | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=fixed) |
| b2g-v1.4 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=fixed) |
| b2g-v2.0 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_2_0&o1=equals&v1=fixed) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox28 |  | wontfix |
| firefox29 |  | verified |
| firefox30 |  | verified |
| firefox31 | + | verified |
| firefox-esr24 |  | verified |
| b2g18 |  | wontfix |
| b2g-v1.1hd |  | wontfix |
| b2g-v1.2 |  | fixed |
| b2g-v1.3 |  | fixed |
| b2g-v1.3T |  | fixed |
| b2g-v1.4 |  | fixed |
| b2g-v2.0 |  | fixed |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: vlad, Assigned: dougc)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/465e24151b8719e22040ef4c0fce9028?d=mm&size=40)  [dougc](/user_profile?user_id=25650)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/108731b114a7c04438631b4c2dc3c7d5?d=mm&size=40)  [vlad](/user_profile?user_id=24534)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/4fe52ee1503aecf7b6c976b8eb7c1753?d=mm&size=40)  [willyelm](/user_profile?user_id=714609)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

14 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

[921809](/show_bug.cgi?id=921809 "RESOLVED FIXED - Assertion failure CurrentThreadCanAccessRuntime in js/src/jsgc.cpp:1941"), [972710](/show_bug.cgi?id=972710 "RESOLVED FIXED - Ionmonkey: Assembler buffer rewrite follow up work.")

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

---

Dependency [tree](/showdependencytree.cgi?id=919592&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=919592)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[Duplicates:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#duplicates)

[925819](/show_bug.cgi?id=925819 "RESOLVED DUPLICATE - crash in js::jit::Assembler::bind(js::jit::Label*, js::jit::BufferOffset)")

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Keywords: sec-high, Whiteboard: [games:p2][adv-main29+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[sec-high](/buglist.cgi?keywords=sec-high&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[games:p2][adv-main29+]

QA Whiteboard:

[qa!]

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | in-testsuite |  |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (1 file, 2 obsolete files)

| [failOutOfRange-r0.patch](/attachment.cgi?id=815957)  [11 years ago](#c12)  [Marty Rosenberg [:mjrosenb]](/user_profile?user_id=419881)   1.62 KB, patch | dougc : [review+](#c17 "11 years ago") | [Details](/attachment.cgi?id=815957&action=edit) | [Diff](/attachment.cgi?id=815957&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=919592&attachment=815957) |
| --- | --- | --- |
| [If a branch is out of range, just fail to compile, rather than attempt to throw an assertion, and continue running.](/attachment.cgi?id=8344328)  [11 years ago](#c16)  [Douglas Crosher [:dougc]](/user_profile?user_id=25650)   1.78 KB, patch |  | [Details](/attachment.cgi?id=8344328&action=edit) | [Diff](/attachment.cgi?id=8344328&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=919592&attachment=8344328) |
| [Guard against branches being out of range and bail out of compilation if so.](/attachment.cgi?id=8394554)  [11 years ago](#c21)  [Douglas Crosher [:dougc]](/user_profile?user_id=25650)   1.78 KB, patch | mjrosenb : [review+](#c23 "11 years ago")  Sylvestre : [approval-mozilla-aurora+](#c27 "11 years ago")  Sylvestre : [approval-mozilla-beta+](#c27 "11 years ago")  Sylvestre : [approval-mozilla-esr24+](#c32 "11 years ago") | [Details](/attachment.cgi?id=8394554&action=edit) | [Diff](/attachment.cgi?id=8394554&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=919592&attachment=8394554) |

Show Obsolete

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Vladimir Vukicevic [:vlad] [:vladv] (needinfo me, slow to respond)](/user_profile?user_id=24534)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=919592#c0)• 11 years ago |
|  | |

<https://crash-stats.mozilla.com/report/index/e6472076-5b5b-4be3-93b7-3f1482130923>
Fennec Nightly 2013-09-23, Nexus 7 (2013). (Also happened with 09-12 before I upgraded.)
STR:
1. Open <http://vice.janicek.co/x64/>
2. Click on "play" button to start
Odd note in the crash report:
"Build Architecture Info ARMv0 | 4"
What does that mean?

|  | [Douglas Crosher [:dougc]](/user_profile?user_id=25650)  Assignee |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=919592#c1)• 11 years ago |
|  | |

Reproducible on Android and B2G.
Program received signal SIGSEGV, Segmentation fault.
getInst (off=<optimized out>, this=<optimized out>) at ../../../src/js/src/jit/shared/IonAssemblerBuffer.h:207
207 for (; cur != NULL; cur = cur->getPrev(), cur\_off -= cur->size()) {
202 cur = tail;
203 cur\_off = bufferSize;
204 }
205 int count = 0;
206 if (local\_off < cur\_off) {
207 for (; cur != NULL; cur = cur->getPrev(), cur\_off -= cur->size()) {
208 if (local\_off >= cur\_off) {
209 local\_off -= cur\_off;
210 break;
211 }
#0 getInst (off=<optimized out>, this=<optimized out>) at ../../../src/js/src/jit/shared/IonAssemblerBuffer.h:207
#1 editSrc (bo=<optimized out>, this=<optimized out>) at ../../../src/js/src/jit/arm/Assembler-arm.h:1228
#2 nextLink (next=<synthetic pointer>, b=<optimized out>, this=<optimized out>) at ../../../src/js/src/jit/arm/Assembler-arm.cpp:2279
#3 js::jit::Assembler::bind (this=0xbeb4ecd8, label=0xbeb4eaf4, boff=<optimized out>) at ../../../src/js/src/jit/arm/Assembler-arm.cpp:2305
#4 0xb6666ec8 in patchableCallPreBarrier<js::jit::Address> (type=js::jit::MIRType\_Value, address=..., this=0xbeb4ecd8) at ../../../src/js/src/jit/IonMacroAssembler.h:660
#5 js::jit::BaselineCompiler::emit\_JSOP\_SETALIASEDVAR (this=0xbeb4ecc8) at ../../../src/js/src/jit/BaselineCompiler.cpp:1874
#6 0xb6667790 in js::jit::BaselineCompiler::emitBody (this=0xbeb4ecc8) at ../../../src/js/src/jit/BaselineCompiler.cpp:694
#7 0xb6668498 in js::jit::BaselineCompiler::compile (this=0xbeb4ecc8) at ../../../src/js/src/jit/BaselineCompiler.cpp:93
#8 0xb65617ba in BaselineCompile (cx=0xb2cf7500, script=...) at ../../../src/js/src/jit/BaselineJIT.cpp:233
#9 0xb65618d0 in CanEnterBaselineJIT (cx=0xb2cf7500, script=..., osr=<optimized out>) at ../../../src/js/src/jit/BaselineJIT.cpp:298
#10 0xb6561a10 in js::jit::CanEnterBaselineAtBranch (cx=0xb2cf7500, fp=0xb390d078, newType=<optimized out>) at ../../../src/js/src/jit/BaselineJIT.cpp:317
#11 0xb6442ee2 in Interpret (cx=0xb2cf7500, state=...) at ../../../src/js/src/vm/Interpreter.cpp:1543
#12 0xb6446a44 in js::RunScript (cx=0xb2cf7500, state=...) at ../../../src/js/src/vm/Interpreter.cpp:419
#13 0xb64479d2 in RunScript (state=..., cx=0xb2cf7500) at ../../../src/js/src/vm/Interpreter.cpp:388
...OS: Android → All

|  | [Marty Rosenberg [:mjrosenb]](/user_profile?user_id=419881) |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=919592#c2)• 11 years ago |
|  | |

well, that code should be thoroughly tested. Is it possible that we've run out of memory or something, and didn't notice until there?

|  | [Douglas Crosher [:dougc]](/user_profile?user_id=25650)  Assignee |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=919592#c3)• 11 years ago |
|  | |

Testing with a debug build keeps crashing on an assertion failure
see [bug 921809](/show_bug.cgi?id=921809 "RESOLVED FIXED - Assertion failure CurrentThreadCanAccessRuntime in js/src/jsgc.cpp:1941"). Shall explore further when this has been addressed.

|  | [Vladimir Vukicevic [:vlad] [:vladv] (needinfo me, slow to respond)](/user_profile?user_id=24534)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=919592#a515803_24534)• 11 years ago |

Depends on: [921809](/show_bug.cgi?id=921809 "RESOLVED FIXED - Assertion failure CurrentThreadCanAccessRuntime in js/src/jsgc.cpp:1941")

|  | [Douglas Crosher [:dougc]](/user_profile?user_id=25650)  Assignee |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=919592#c4)• 11 years ago |
|  | |

With 91809 fixed, the debugger suggests that it is overflowing the limited
range of the ARM branch instruction encoding when storing the buffer offsets
for unbound labels, and doing so in baseline compiled code.
It might be useful to ask someone familiar with the baseline compiler to
take a look at it. In particular is it possible that the baseline compiler
is compiling all the data in the literal vectors into the code?
The emulator includes many disk images in the JS x64.js file,
and perhaps this might account for the huge baseline compiled
code buffers.
It might also be necessary to explore how to handle labels and
branches in large code buffers on the ARM backend.
One option when a label is unbound might be to store an offset
from the branch rather than the buffer offset. This might at
least handle short branches within a much larger code buffer,
which might be the case here. Although perhaps this alone
would not be big help.

|  | [Vladimir Vukicevic [:vlad] [:vladv] (needinfo me, slow to respond)](/user_profile?user_id=24534)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=919592#a687804_24534)• 11 years ago |

Whiteboard: [games:p2]

|  | [Douglas Crosher [:dougc]](/user_profile?user_id=25650)  Assignee |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=919592#c5)• 11 years ago |
|  | |

Narrowed down the main source of the code bloat. It is being generated by a huge number of calls to: js::jit::BaselineCompiler::emit\_JSOP\_INITELEM\_ARRAY
It does appear that the JS is being translated into JS ops that initialize the vectors and that the baseline compiler emits code for each OP leading to a huge code object.
Might it have been possible for these vectors to have been stored as literal objects rather than being parsed to JS ops that construct them?
If not then might it be possible for the baseline compiler to recognize and optimize such initialization sequences?
These appear to be generated from source code of the form:
r.FS\_createDataFile("/bin/C64","pc64.vpl",[35,10,35,32,86,73,67, ....])Flags: needinfo?(jdemooij)

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297) |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=919592#c6)• 11 years ago |
|  | |

Douglas, how many elements are there in these array literals? We optimize such literals in the global scope when we know they are evaluated only once, but not inside functions or loops.
We've been thinking about adding COW arrays ([bug 919658](/show_bug.cgi?id=919658 "RESOLVED FIXED - Array literals slower than v8")) and that optimization should help here too.Flags: needinfo?(jdemooij)

|  | [Douglas Crosher [:dougc]](/user_profile?user_id=25650)  Assignee |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=919592#c7)• 11 years ago |
|  | |

(In reply to Jan de Mooij [:jandem] from [comment #6](/show_bug.cgi?id=919592#c6 "VERIFIED FIXED - ARM asm.js crash with c64 emulator crash [@ js::jit::Assembler::bind(js::jit::Label*, js::jit::BufferOffset) ]"))
> Douglas, how many elements are there in these array literals? We optimize
> such literals in the global scope when we know they are evaluated only once,
> but not inside functions or loops.
Thank you for the info. There are around 350k elements combined in the array literals in this example. It seems to generate a lot of baseline compiled code to initialize them.
Moving these literal vectors to the top level worked around the problem and it was possible to start the C64 emulator on an ARM tablet. Emscripten appears to emit the memory FS initialization at the top level by default so this bug might not be that significant an issue because there is a good workaround.

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=919592#a932021_395101)• 11 years ago |

Group: core-security

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101) |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=919592#c8)• 11 years ago |
|  | |

Fwiw, marked s-s because it was raised as a possible security issue. Please unhide the bug or let us know if the crash is confirmed to be harmless. Maybe dougc or jandem can tell more :)

|  | [Douglas Crosher [:dougc]](/user_profile?user_id=25650)  Assignee |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=919592#c9)• 11 years ago |
|  | |

The crash in the ARM backend is not limited to this example, or to large literal arrays in baseline compiled code. Any huge chunk of code could overflow the ARM branch instruction encoding limitation currently exposed. Randomly crashing is not a good state to be in, and it would be better for the ARM backend to at least catch the overflow at bail out.

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297) |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=919592#c10)• 11 years ago |
|  | |

(In reply to Douglas Crosher [:dougc] from [comment #9](/show_bug.cgi?id=919592#c9 "VERIFIED FIXED - ARM asm.js crash with c64 emulator crash [@ js::jit::Assembler::bind(js::jit::Label*, js::jit::BufferOffset) ]"))
> Any huge chunk of code could
> overflow the ARM branch instruction encoding limitation currently exposed.
> Randomly crashing is not a good state to be in, and it would be better for
> the ARM backend to at least catch the overflow at bail out.
needinfo? from Marty, this sounds bad.Component: JavaScript Engine → JavaScript Engine: JITFlags: needinfo?(mrosenberg)

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=919592#a1385358_406194)• 11 years ago |

Keywords: [sec-high](/buglist.cgi?keywords=sec-high&resolution=---)

|  | [Marty Rosenberg [:mjrosenb]](/user_profile?user_id=419881) |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=919592#c11)• 11 years ago |
|  | |

So there was an assertion on that path, but I was later informed that those don't exist in non-debug builds. I have a patch that hopefully turns it into a code path that will cause us to abort compilation. I think there is another path lurking here that can be exposed when we fail much later, during the linking stage.
I'm needinfo'ing luke because I'm not sure if there are any precautions we must take for bailing during the code generation phase of ASM.jsFlags: needinfo?(mrosenberg) → needinfo?(luke)

|  | [Marty Rosenberg [:mjrosenb]](/user_profile?user_id=419881) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=919592#c12)• 11 years ago |
|  | |

Attached patch

[failOutOfRange-r0.patch](attachment.cgi?id=815957&action=diff) (obsolete)
— [Details](attachment.cgi?id=815957&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=919592&attachment=815957)

[Attachment #815957](/attachment.cgi?id=815957&action=edit "failOutOfRange-r0.patch") -
Flags: review?(dtc-moz)

|  | [Luke Wagner [:luke]](/user_profile?user_id=347312) |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=919592#c13)• 11 years ago |
|  | |

Will this failure ultimately bubble up as a 'return false' from GenerateLIR? If so, that's fine, we'll emit a warning "internal compiler failure (probably out of memory)". Is some sort of overflow what is happening here?Flags: needinfo?(luke)

|  | [Douglas Crosher [:dougc]](/user_profile?user_id=25650)  Assignee |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=919592#c14)• 11 years ago |
|  | |

Comment on [attachment 815957](/attachment.cgi?id=815957 "failOutOfRange-r0.patch") [[details]](/attachment.cgi?id=815957&action=edit "failOutOfRange-r0.patch") [[diff]](/attachment.cgi?id=815957&action=diff "failOutOfRange-r0.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=919592&attachment=815957)
failOutOfRange-r0.patch
Review of [attachment 815957](/attachment.cgi?id=815957 "failOutOfRange-r0.patch") [[details]](/attachment.cgi?id=815957&action=edit "failOutOfRange-r0.patch") [[diff]](/attachment.cgi?id=815957&action=diff "failOutOfRange-r0.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=919592&attachment=815957):
-----------------------------------------------------------------
Thank you, the patch is an incremental improvement. Could you please move the check after 'old' is initialized.
It appears to still allow bad branch offsets to pass through here in the case of a bound label and perhaps some more cases could be easily handled.
I would not that this bail out path is rather poorly tested, and when hit on constant pool failures it often results in crashes elsewhere, but this is probably a separate issue and the path is probably needed to OOM.
Could I ask what state the assembler is in to support larger branches?
Perhaps a collection of 'uses' could be added to the label object so that uses that can not be linked in a list via the instruction encoding could be spilled into this collection. Alternatively could the full 32 bits of the instruction be used for the linked list, and the instruction encoded later?
This still leaves the issue of encoding a larger jump. Does the assembler support variable length instruction sequences? Might it be necessary to store the target in the constant pool, and might it be necessary to reserve a constant pool slot for every unbound jump just in case it is needed?
::: js/src/jit/arm/Assembler-arm.cpp
@@ +1959,5 @@
> BufferOffset ret;
> // See if the list was empty :(
> if (l->used()) {
> + if (!BOffImm::isInRange(old)) {
> + m\_buffer.bail();
Move after 'old' is initialized.
[Attachment #815957](/attachment.cgi?id=815957&action=edit "failOutOfRange-r0.patch") -
Flags: review?(dtc-moz)

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297) |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=919592#c15)• 11 years ago |
|  | |

Marty, Doug, is this still an issue? Can we land the patch?Flags: needinfo?(mrosenberg)Flags: needinfo?(dtc-moz)

|  | [Douglas Crosher [:dougc]](/user_profile?user_id=25650)  Assignee |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=919592#c16)• 11 years ago |
|  | |

Attached patch

[If a branch is out of range, just fail to compile, rather than attempt to throw an assertion, and continue running.](attachment.cgi?id=8344328&action=diff) (obsolete)
— [Details](attachment.cgi?id=8344328&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=919592&attachment=8344328)

The patch needs to at least have a use-before-initializing error corrected.
With this patch it is now possible to run the C64 emulator on an ARM system. It hits one of the checks in this patch, but keeps going without crashing. There must have been some other fixes to the bailout paths because the bailout just caused other errors last time I checked.Flags: needinfo?(dtc-moz)

|  | [Douglas Crosher [:dougc]](/user_profile?user_id=25650)  Assignee |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=919592#c17)• 11 years ago |
|  | |

Comment on [attachment 815957](/attachment.cgi?id=815957 "failOutOfRange-r0.patch") [[details]](/attachment.cgi?id=815957&action=edit "failOutOfRange-r0.patch") [[diff]](/attachment.cgi?id=815957&action=diff "failOutOfRange-r0.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=919592&attachment=815957)
failOutOfRange-r0.patch
Review of [attachment 815957](/attachment.cgi?id=815957 "failOutOfRange-r0.patch") [[details]](/attachment.cgi?id=815957&action=edit "failOutOfRange-r0.patch") [[diff]](/attachment.cgi?id=815957&action=diff "failOutOfRange-r0.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=919592&attachment=815957):
-----------------------------------------------------------------
r+ if the initialization of 'old' is moved before its use in the check, see [comment 14](/show_bug.cgi?id=919592#c14 "VERIFIED FIXED - ARM asm.js crash with c64 emulator crash [@ js::jit::Assembler::bind(js::jit::Label*, js::jit::BufferOffset) ]") and [attachment 8344328](/attachment.cgi?id=8344328 "If a branch is out of range, just fail to compile, rather than attempt to throw an assertion, and continue running.") [[details]](/attachment.cgi?id=8344328&action=edit "If a branch is out of range, just fail to compile, rather than attempt to throw an assertion, and continue running.") [[diff]](/attachment.cgi?id=8344328&action=diff "If a branch is out of range, just fail to compile, rather than attempt to throw an assertion, and continue running.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=919592&attachment=8344328).
[Attachment #815957](/attachment.cgi?id=815957&action=edit "failOutOfRange-r0.patch") -
Flags: review+

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=919592#c18)• 11 years ago |
|  | |

How far back does this go and when can we get the reviewed patch checked in?

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=919592#a9779247_1689)• 11 years ago |

Group: javascript-core-security

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=919592#c19)• 11 years ago |
|  | |

Can we get someone to check in this six month old patch?Flags: needinfo?(nihsanullah)

|  | [Douglas Crosher [:dougc]](/user_profile?user_id=25650)  Assignee |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=919592#c20)• 11 years ago |
|  | |

fwiw The wider problem of supporting large code objects on the ARM backend was tackled in [bug 760642](/show_bug.cgi?id=760642 "RESOLVED FIXED - IonMonkey: Refactor IonAssemblyBuffer") and is being worked on in [bug 972710](/show_bug.cgi?id=972710 "RESOLVED FIXED - Ionmonkey: Assembler buffer rewrite follow up work."). There is still a lot of work to do, but there is a user repo with the current code and it runs this asm.js demo without crashing or bailing out.Depends on: [972710](/show_bug.cgi?id=972710 "RESOLVED FIXED - Ionmonkey: Assembler buffer rewrite follow up work.")

|  | [Douglas Crosher [:dougc]](/user_profile?user_id=25650)  Assignee |  |
| --- | --- | --- |
| [Comment 21](/show_bug.cgi?id=919592#c21)• 11 years ago |
|  | |

Attached patch

[Guard against branches being out of range and bail out of compilation if so.](attachment.cgi?id=8394554&action=diff)
— [Details](attachment.cgi?id=8394554&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=919592&attachment=8394554)

Retested by adding some verbose debug output and running the example and it still works around the reported failure. The code catches the overflow in as\_b and bails out of compilation without crashing.Assignee: general → dtc-moz
[Attachment #815957](/attachment.cgi?id=815957&action=edit "failOutOfRange-r0.patch") -
Attachment is obsolete: true
[Attachment #8344328](/attachment.cgi?id=8344328&action=edit "If a branch is out of range, just fail to compile, rather than attempt to throw an assertion, and continue running.") -
Attachment is obsolete: true
[Attachment #8394554](/attachment.cgi?id=8394554&action=edit "Guard against branches being out of range and bail out of compilation if so.") -
Flags: review?(jdemooij)Flags: needinfo?(nihsanullah)Flags: needinfo?(mrosenberg)

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297) |  |
| --- | --- | --- |
| [Comment 22](/show_bug.cgi?id=919592#c22)• 11 years ago |
|  | |

Comment on [attachment 8394554](/attachment.cgi?id=8394554 "Guard against branches being out of range and bail out of compilation if so.") [[details]](/attachment.cgi?id=8394554&action=edit "Guard against branches being out of range and bail out of compilation if so.") [[diff]](/attachment.cgi?id=8394554&action=diff "Guard against branches being out of range and bail out of compilation if so.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=919592&attachment=8394554)
Guard against branches being out of range and bail out of compilation if so.
Thanks for fixing this. Moving r? to Marty as I'm not very familiar with this.
(Is that "This will currently throw an assertion" comment still true?)
[Attachment #8394554](/attachment.cgi?id=8394554&action=edit "Guard against branches being out of range and bail out of compilation if so.") -
Flags: review?(jdemooij) → review?(mrosenberg)

|  | [Marty Rosenberg [:mjrosenb]](/user_profile?user_id=419881) |  |
| --- | --- | --- |
| [Comment 23](/show_bug.cgi?id=919592#c23)• 11 years ago |
|  | |

Comment on [attachment 8394554](/attachment.cgi?id=8394554 "Guard against branches being out of range and bail out of compilation if so.") [[details]](/attachment.cgi?id=8394554&action=edit "Guard against branches being out of range and bail out of compilation if so.") [[diff]](/attachment.cgi?id=8394554&action=diff "Guard against branches being out of range and bail out of compilation if so.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=919592&attachment=8394554)
Guard against branches being out of range and bail out of compilation if so.
Review of [attachment 8394554](/attachment.cgi?id=8394554 "Guard against branches being out of range and bail out of compilation if so.") [[details]](/attachment.cgi?id=8394554&action=edit "Guard against branches being out of range and bail out of compilation if so.") [[diff]](/attachment.cgi?id=8394554&action=diff "Guard against branches being out of range and bail out of compilation if so.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=919592&attachment=8394554):
-----------------------------------------------------------------
Strange, I thought we already fixed this. Oh well, better late than never.
[Attachment #8394554](/attachment.cgi?id=8394554&action=edit "Guard against branches being out of range and bail out of compilation if so.") -
Flags: review?(mrosenberg) → review+

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=919592#a15477863_280903)• 11 years ago |

[status-firefox28](/buglist.cgi?f1=cf_status_firefox28&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=wontfix)
[status-firefox29](/buglist.cgi?f1=cf_status_firefox29&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=affected)
[status-firefox30](/buglist.cgi?f1=cf_status_firefox30&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=affected)
[status-firefox31](/buglist.cgi?f1=cf_status_firefox31&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=affected)
[status-firefox-esr24](/buglist.cgi?f1=cf_status_firefox_esr24&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=%3F)
[tracking-firefox31](/buglist.cgi?f1=cf_tracking_firefox31&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox31&o1=equals&v1=%2B)

|  | [Douglas Crosher [:dougc]](/user_profile?user_id=25650)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=919592#a16836780_25650)• 11 years ago |

Keywords: [checkin-needed](/buglist.cgi?keywords=checkin-needed&resolution=---)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 24](/show_bug.cgi?id=919592#c24)• 11 years ago |
|  | |

<https://hg.mozilla.org/integration/mozilla-inbound/rev/1cdcddd3c656>Keywords: [checkin-needed](/buglist.cgi?keywords=checkin-needed&resolution=---)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 25](/show_bug.cgi?id=919592#c25)• 11 years ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/1cdcddd3c656>
Setting status-esr24 to wontfix since we don't ship any ARM products off that branch. Doug, please nominate this for Aurora/Beta uplift ASAP. B2G branch uplifts will be taken care of via the sec-high security rating.Status: NEW → RESOLVEDClosed: 11 years ago
[status-b2g18](/buglist.cgi?f1=cf_status_b2g18&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=wontfix)
[status-b2g-v1.1hd](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=equals&v1=wontfix)
[status-b2g-v1.2](/buglist.cgi?f1=cf_status_b2g_1_2&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=affected)
[status-b2g-v1.3](/buglist.cgi?f1=cf_status_b2g_1_3&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=affected)
[status-b2g-v1.4](/buglist.cgi?f1=cf_status_b2g_1_4&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=affected)
[status-b2g-v2.0](/buglist.cgi?f1=cf_status_b2g_2_0&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_b2g_2_0&o1=equals&v1=fixed)
[status-firefox31](/buglist.cgi?f1=cf_status_firefox31&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=fixed)
[status-firefox-esr24](/buglist.cgi?f1=cf_status_firefox_esr24&o1=isnotempty):
[?](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=%3F) → [wontfix](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=wontfix)Flags: needinfo?(dtc-moz)Resolution: --- → FIXEDTarget Milestone: --- → mozilla31

|  | [Douglas Crosher [:dougc]](/user_profile?user_id=25650)  Assignee |  |
| --- | --- | --- |
| [Comment 26](/show_bug.cgi?id=919592#c26)• 11 years ago |
|  | |

Comment on [attachment 8394554](/attachment.cgi?id=8394554 "Guard against branches being out of range and bail out of compilation if so.") [[details]](/attachment.cgi?id=8394554&action=edit "Guard against branches being out of range and bail out of compilation if so.") [[diff]](/attachment.cgi?id=8394554&action=diff "Guard against branches being out of range and bail out of compilation if so.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=919592&attachment=8394554)
Guard against branches being out of range and bail out of compilation if so.
[Approval Request Comment]
Bug caused by (feature/regressing bug #): long standing issue.
User impact if declined: crashes for large JS code objects, and it might be exploitable.
Testing completed (on m-c, etc.): local, and m-c
Risk to taking this patch (and alternatives if risky): low
String or IDL/UUID changes made by this patch:
[Attachment #8394554](/attachment.cgi?id=8394554&action=edit "Guard against branches being out of range and bail out of compilation if so.") -
Flags: approval-mozilla-beta?
[Attachment #8394554](/attachment.cgi?id=8394554&action=edit "Guard against branches being out of range and bail out of compilation if so.") -
Flags: approval-mozilla-aurora?Flags: needinfo?(dtc-moz)

|  | [Sylvestre Ledru [:Sylvestre]](/user_profile?user_id=495955) |  |
| --- | --- | --- |
| [Comment 27](/show_bug.cgi?id=919592#c27)• 11 years ago |
|  | |

Comment on [attachment 8394554](/attachment.cgi?id=8394554 "Guard against branches being out of range and bail out of compilation if so.") [[details]](/attachment.cgi?id=8394554&action=edit "Guard against branches being out of range and bail out of compilation if so.") [[diff]](/attachment.cgi?id=8394554&action=diff "Guard against branches being out of range and bail out of compilation if so.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=919592&attachment=8394554)
Guard against branches being out of range and bail out of compilation if so.
(In reply to Ryan VanderMeulen [:RyanVM UTC-4] from [comment #25](/show_bug.cgi?id=919592#c25 "VERIFIED FIXED - ARM asm.js crash with c64 emulator crash [@ js::jit::Assembler::bind(js::jit::Label*, js::jit::BufferOffset) ]"))
> Setting status-esr24 to wontfix since we don't ship any ARM products off
Well, Debian ships ESR24 under ARM. ;)
[Attachment #8394554](/attachment.cgi?id=8394554&action=edit "Guard against branches being out of range and bail out of compilation if so.") -
Flags: approval-mozilla-beta?
[Attachment #8394554](/attachment.cgi?id=8394554&action=edit "Guard against branches being out of range and bail out of compilation if so.") -
Flags: approval-mozilla-beta+
[Attachment #8394554](/attachment.cgi?id=8394554&action=edit "Guard against branches being out of range and bail out of compilation if so.") -
Flags: approval-mozilla-aurora?
[Attachment #8394554](/attachment.cgi?id=8394554&action=edit "Guard against branches being out of range and bail out of compilation if so.") -
Flags: approval-mozilla-aurora+

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 28](/show_bug.cgi?id=919592#c28)• 11 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-aurora/rev/2dfaa9c55efd>
<https://hg.mozilla.org/releases/mozilla-beta/rev/7be150811dd8>
<https://hg.mozilla.org/releases/mozilla-b2g28_v1_3/rev/bad26c337b18>
<https://hg.mozilla.org/releases/mozilla-b2g26_v1_2/rev/a84b01a0bb5c>
[status-b2g-v1.2](/buglist.cgi?f1=cf_status_b2g_1_2&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=fixed)
[status-b2g-v1.3](/buglist.cgi?f1=cf_status_b2g_1_3&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=fixed)
[status-b2g-v1.4](/buglist.cgi?f1=cf_status_b2g_1_4&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=fixed)
[status-firefox29](/buglist.cgi?f1=cf_status_firefox29&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=fixed)
[status-firefox30](/buglist.cgi?f1=cf_status_firefox30&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=fixed)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=919592#a17091745_75935)• 11 years ago |

[status-b2g-v1.3T](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=fixed)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=919592#a17245788_1689)• 11 years ago |

Group: javascript-core-security

|  | [Kevin Brosnan [Ex-Mozilla]](/user_profile?user_id=406670) |  |
| --- | --- | --- |
| [Comment 30](/show_bug.cgi?id=919592#c30)• 11 years ago |
|  | |

Verified on today's Nightly FxAndroid 31. Ioana please verify on Beta/Aurora.
[status-firefox31](/buglist.cgi?f1=cf_status_firefox31&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=verified)Flags: needinfo?(ioana.chiorean)

|  | [Ioana Chiorean](/user_profile?user_id=391404) |  |
| --- | --- | --- |
| [Comment 31](/show_bug.cgi?id=919592#c31)• 11 years ago |
|  | |

Verified on latest-aurora (04/16) and latest beta (yesterday's build 29.0b8)
Setting bug as verified fixedStatus: RESOLVED → VERIFIED
[status-firefox29](/buglist.cgi?f1=cf_status_firefox29&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=verified)
[status-firefox30](/buglist.cgi?f1=cf_status_firefox30&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=verified)Flags: needinfo?(ioana.chiorean)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=919592#a17736914_280903)• 11 years ago |

Whiteboard: [games:p2] → [games:p2][adv-main29+]

|  | [Sylvestre Ledru [:Sylvestre]](/user_profile?user_id=495955) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=919592#a23065034_495955)• 11 years ago |

[status-firefox-esr24](/buglist.cgi?f1=cf_status_firefox_esr24&o1=isnotempty):
[wontfix](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=wontfix) → [affected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=affected)

|  | [Sylvestre Ledru [:Sylvestre]](/user_profile?user_id=495955) |  |
| --- | --- | --- |
| [Comment 32](/show_bug.cgi?id=919592#c32)• 11 years ago |
|  | |

Comment on [attachment 8394554](/attachment.cgi?id=8394554 "Guard against branches being out of range and bail out of compilation if so.") [[details]](/attachment.cgi?id=8394554&action=edit "Guard against branches being out of range and bail out of compilation if so.") [[diff]](/attachment.cgi?id=8394554&action=diff "Guard against branches being out of range and bail out of compilation if so.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=919592&attachment=8394554)
Guard against branches being out of range and bail out of compilation if so.
Discussed with RyanVM on IRC. It seems that [bug 1019684](/show_bug.cgi?id=1019684 "VERIFIED FIXED - Assertion failure: isInRange(offset), at jit/arm/Assembler-arm.h:989 or Crash [@ js::jit::Simulator::instructionDecode] with RegExp") needs this one.
[Attachment #8394554](/attachment.cgi?id=8394554&action=edit "Guard against branches being out of range and bail out of compilation if so.") -
Flags: approval-mozilla-esr24+

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 33](/show_bug.cgi?id=919592#c33)• 11 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-esr24/rev/a4216c392233>
[status-firefox-esr24](/buglist.cgi?f1=cf_status_firefox_esr24&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=fixed)

|  | [Kamil Jozwiak [:kjozwiak]](/user_profile?user_id=455785) |  |
| --- | --- | --- |
| [Comment 34](/show_bug.cgi?id=919592#c34)• 11 years ago |
|  | |

Because I don't have a physical ARM machine, I had to build fx esr24 on a x86 VM using the following flags:
- ac\_add\_options --disable-webrtc (needed more space, kept receiving "/usr/bin/ld: final link failed: Memory exhausted")
- ac\_add\_options --enable-arm-simulator
Once fx was built, used the following link for the test cases (the original one isn't working anymore)
- <http://retroplay.co/c64>
- loaded the "C-64" demo by selecting "Play" and waited till it loaded without issues
- loaded the "C-128" demo by selecting "Play" and waited till it loaded without issues
- played around with both demo's for about 5 minutes each without any issues
- loaded the two demo's on several different tab(s) at the same time without issues
- loaded the two demo's on several different window(s) without any issuesQA Whiteboard: [qa!]
[status-firefox-esr24](/buglist.cgi?f1=cf_status_firefox_esr24&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=verified)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=919592#a61007176_1689)• 9 years ago |

Group: core-security
You need to [log in](/show_bug.cgi?id=919592&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Marty Rosenberg [:mjrosenb]](/user_profile?user_id=419881)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from bugzilla.mozilla.org_23495dc9_20250125_092505.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/986864)
* [XML](/show_bug.cgi?ctype=xml&id=986864)

Closed
[Bug 986864](/show_bug.cgi?id=986864)

Opened 11 years ago
Closed 11 years ago

# Crash [@ memmove] or [@ mozilla::PodCopy] or [@ js\_NewStringCopyN] or Assertion failure: PointerRangeSize(src, static\_cast<const T\*>(dst)) >= nelem, at dist/include/mozilla/PodOperations.h

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

Crash [@ memmove] or [@ mozilla::PodCopy] or [@ js\_NewStringCopyN] or Assertion failure: PointerRangeSize(src, static\_cast<const T\*>(dst)) >= nelem, at dist/include/mozilla/PodOperations.h

## Categories

### (Core :: JavaScript Engine: JIT, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=JavaScript%20Engine%3A%20JIT#JavaScript%20Engine%3A%20JIT)

JavaScript Engine: JIT
▾

Core :: JavaScript Engine: JIT
JavaScript engine's JIT compilers
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine%3A%20JIT&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine%3A%20JIT&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=JavaScript%20Engine%3A%20JIT)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

x86\_64

macOS

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

critical

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla31

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Performance Impact | --- |
| --- | --- |
| Webcompat Score | --- |
| Accessibility Severity | --- |
| a11y-review | --- |
| Webcompat Priority | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox28 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=wontfix) |
| firefox29 | --- | [fixed](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=fixed) |
| firefox30 | [+](/buglist.cgi?f1=cf_tracking_firefox30&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=fixed) |
| firefox31 | [+](/buglist.cgi?f1=cf_tracking_firefox31&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=fixed) |
| firefox-esr24 | --- | [unaffected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=unaffected) |
| b2g-v1.2 | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=unaffected) |
| b2g-v1.3 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=fixed) |
| b2g-v1.3T | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=fixed) |
| b2g-v1.4 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=fixed) |
| b2g-v2.0 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_2_0&o1=equals&v1=fixed) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox28 |  | wontfix |
| firefox29 |  | fixed |
| firefox30 | + | fixed |
| firefox31 | + | fixed |
| firefox-esr24 |  | unaffected |
| b2g-v1.2 |  | unaffected |
| b2g-v1.3 |  | fixed |
| b2g-v1.3T |  | fixed |
| b2g-v1.4 |  | fixed |
| b2g-v2.0 |  | fixed |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: gkw, Assigned: jonco)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/c9ec760b0d3a20a6775614baa4086871?d=mm&size=40)  [jonco](/user_profile?user_id=443194)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](extensions/Gravatar/web/default.jpg)  [gkw](/user_profile?user_id=132034)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/4fe52ee1503aecf7b6c976b8eb7c1753?d=mm&size=40)  [willyelm](/user_profile?user_id=714609)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

9 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[938615](/show_bug.cgi?id=938615 "RESOLVED FIXED - avoid GC hazard in ScriptSource::substring")

Dependency [tree](/showdependencytree.cgi?id=986864&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=986864)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (5 keywords, Whiteboard: [jsbugmon:update][adv-main29+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[assertion](/buglist.cgi?keywords=assertion&resolution=---),
[crash](/buglist.cgi?keywords=crash&resolution=---),
[regression](/buglist.cgi?keywords=regression&resolution=---),
[sec-critical](/buglist.cgi?keywords=sec-critical&resolution=---),
[testcase](/buglist.cgi?keywords=testcase&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[jsbugmon:update][adv-main29+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [RyanVM](/user_profile?user_id=75935) | [in-testsuite](#c15 "11 years ago") | + |
| --- | --- | --- |
| [RyanVM](/user_profile?user_id=75935) | in-testsuite | + |
| --- | --- | --- |
|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | qe-verify |  |

## Crash Data

Signature:

[[@ memmove ]](https://crash-stats.mozilla.org/signature/?signature=memmove)

[[@ mozilla::PodCopy ]](https://crash-stats.mozilla.org/signature/?signature=mozilla%3A%3APodCopy)

[[@ js\_NewStringCopyN ]](https://crash-stats.mozilla.org/signature/?signature=js_NewStringCopyN)

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (2 files, 2 obsolete files)

| [debug and opt stacks](/attachment.cgi?id=8395285)  [11 years ago](#c0)  [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)   10.73 KB, text/plain |  | [Details](/attachment.cgi?id=8395285&action=edit) |
| --- | --- | --- |
| [bug986864-autoDeferPurge](/attachment.cgi?id=8397143)  [11 years ago](#c3)  [Jon Coppeard (:jonco) (PTO until 27th Jan)](/user_profile?user_id=443194)   9.76 KB, patch |  | [Details](/attachment.cgi?id=8397143&action=edit) | [Diff](/attachment.cgi?id=8397143&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=986864&attachment=8397143) |
| [bug986864-scriptSource2](/attachment.cgi?id=8398484)  [11 years ago](#c5)  [Jon Coppeard (:jonco) (PTO until 27th Jan)](/user_profile?user_id=443194)   11.16 KB, patch | sfink : [review+](#c6 "11 years ago") | [Details](/attachment.cgi?id=8398484&action=edit) | [Diff](/attachment.cgi?id=8398484&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=986864&attachment=8398484) |
| [bug986864-scriptSource-v3](/attachment.cgi?id=8398617)  [11 years ago](#c8)  [Jon Coppeard (:jonco) (PTO until 27th Jan)](/user_profile?user_id=443194)   11.14 KB, patch | jonco : [review+](#c8 "11 years ago")  Sylvestre : [approval-mozilla-aurora+](#a1075139_495955 "11 years ago")  Sylvestre : [approval-mozilla-beta+](#a1075139_495955 "11 years ago")  abillings : [sec-approval+](#c12 "11 years ago") | [Details](/attachment.cgi?id=8398617&action=edit) | [Diff](/attachment.cgi?id=8398617&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=986864&attachment=8398617) |

Show Obsolete

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=986864#c0)• 11 years ago |
|  | |

Attached file
[debug and opt stacks](attachment.cgi?id=8395285)
— [Details](attachment.cgi?id=8395285&action=edit)

function x() {}
for (var j = 0; j < 99999; ++j) {
(function() {
x += x.watch("endsWith", SharedArrayBuffer);
return 0 >> Function(x)
})()
}
crashes js debug shell on m-c changeset 573ef29c7a9f with --ion-eager --ion-parallel-compile=off at memmove with mozilla::PodCopy and js\_NewStringCopyN on the stack. It also crashes js opt shell at memmove with js\_NewStringCopyN on the stack.
Sometimes this assertion pops up: Assertion failure: PointerRangeSize(src, static\_cast<const T\*>(dst)) >= nelem, at dist/include/mozilla/PodOperations.h
s-s because such varying signatures are scary.
My debug configure flags are:
CC="clang -Qunused-arguments" CXX="clang++ -Qunused-arguments" AR=ar sh /Users/skywalker/trees/mozilla-central/js/src/configure --target=x86\_64-apple-darwin12.5.0 --enable-optimize --enable-debug --enable-profiling --enable-gczeal --enable-debug-symbols --disable-tests --with-ccache --enable-threadsafe <other NSPR options>
My opt configure flags are:
CC="clang -Qunused-arguments" CXX="clang++ -Qunused-arguments" AR=ar sh /Users/skywalker/trees/mozilla-central/js/src/configure --target=x86\_64-apple-darwin12.5.0 --enable-optimize --disable-debug --enable-profiling --enable-gczeal --enable-debug-symbols --disable-tests --with-ccache --enable-threadsafe <other NSPR options>
=== Tinderbox Build Bisection Results by autoBisect ===
The "good" changeset has the timestamp "20140226135810" and the hash "ac9709133b27".
The "bad" changeset has the timestamp "20140226135912" and the hash "7bb98e166b5b".
Likely regression window: <https://hg.mozilla.org/integration/mozilla-inbound/pushloghtml?fromchange=ac9709133b27&tochange=7bb98e166b5b>
Sean, only [bug 933001](/show_bug.cgi?id=933001 "RESOLVED FIXED - Land SharedArrayBuffer Prototype Preffed-Off") is on the stack, is it a likely regressor?Flags: needinfo?(sstangl)

|  | [Sean Stangl [:sstangl]](/user_profile?user_id=383201) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=986864#a239490_383201)• 11 years ago |

No longer blocks: [933001](/show_bug.cgi?id=933001 "RESOLVED FIXED - Land SharedArrayBuffer Prototype Preffed-Off")Flags: needinfo?(sstangl)

|  | [Sean Stangl [:sstangl]](/user_profile?user_id=383201) |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=986864#c1)• 11 years ago |
|  | |

This is not a SharedArrayBuffer bug -- any fuzz result that uses "SharedArrayBuffer" as a constructor will bisect at least to the patch that introduces it. In this case, the following modified testcase also reproduces the crash (on x64, with --no-ion --no-baseline):
function x() {}
for (var j = 0; j < 99999; ++j) {
(function() {
x += x.watch("endsWith", ArrayBuffer);
return 0 >> Function(x);
})()
}
I would recommend bisecting with this new version.

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)  Reporter |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=986864#c2)• 11 years ago |
|  | |

Thanks Sean!
autoBisect shows this is probably related to the following changeset:
The first bad revision is:
changeset: <http://hg.mozilla.org/mozilla-central/rev/78a029898775>
user: Jon Coppeard
date: Fri Feb 07 11:20:38 2014 +0000
summary: [Bug 961091](/show_bug.cgi?id=961091 "RESOLVED FIXED - GenerationalGC: Crashtest 693212.xhtml fails on MacOSX platforms only") - Perform GC if necessary on exit from engine and on interpreter allocation r=terrence
Jon, seems like [bug 961091](/show_bug.cgi?id=961091 "RESOLVED FIXED - GenerationalGC: Crashtest 693212.xhtml fails on MacOSX platforms only") might be a more likely regressor, would it?Blocks: [961091](/show_bug.cgi?id=961091 "RESOLVED FIXED - GenerationalGC: Crashtest 693212.xhtml fails on MacOSX platforms only")Flags: needinfo?(jcoppeard)

|  | [Jon Coppeard (:jonco) (PTO until 27th Jan)](/user_profile?user_id=443194)  Assignee |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=986864#c3)• 11 years ago |
|  | |

Attached patch

[bug986864-autoDeferPurge](attachment.cgi?id=8397143&action=diff) (obsolete)
— [Details](attachment.cgi?id=8397143&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=986864&attachment=8397143)

The problem is with SourceDataCache::AutoSuppressPurge. SourceDataCache maps from ScriptSource\* to decompressed source chars. AutoSuppressPurge stops this cache being cleared on GC, but if a ScriptSource\* that has an entry in the table is destroyed by the collection then its entry in the cache will not be removed.
Then, if a different ScriptSource is created at the same address, the cache will return the data for the old entry.
ScriptSource::substring() assumes the length of the return string, and in this case it's not what it expects and it tries to copy far more data out of it than it actually contains, which results in the assertion failures seen here.
The solution is not to suppress the purge, but merely defer it while someone can be accessing the data in the cache. I changed AutoSuppressPurge to AutoDeferPurge, which will perform the purge in its destructor if a GC happens while it's on the stack.Assignee: nobody → jcoppeard
[Attachment #8397143](/attachment.cgi?id=8397143&action=edit "bug986864-autoDeferPurge") -
Flags: review?(sphink)Flags: needinfo?(jcoppeard)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=986864#a329007_280903)• 11 years ago |

[status-b2g-v1.2](/buglist.cgi?f1=cf_status_b2g_1_2&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=unaffected)
[status-b2g-v1.3](/buglist.cgi?f1=cf_status_b2g_1_3&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=unaffected)
[status-b2g-v1.4](/buglist.cgi?f1=cf_status_b2g_1_4&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=affected)
[status-b2g-v2.0](/buglist.cgi?f1=cf_status_b2g_2_0&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_2_0&o1=equals&v1=affected)
[status-firefox-esr24](/buglist.cgi?f1=cf_status_firefox_esr24&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=unaffected)
[tracking-firefox30](/buglist.cgi?f1=cf_tracking_firefox30&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox30&o1=equals&v1=%2B)
[tracking-firefox31](/buglist.cgi?f1=cf_tracking_firefox31&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox31&o1=equals&v1=%2B)Keywords: [sec-critical](/buglist.cgi?keywords=sec-critical&resolution=---)

|  | [Steve Fink [:sfink] [:s:]](/user_profile?user_id=359004) |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=986864#c4)• 11 years ago |
|  | |

Comment on [attachment 8397143](/attachment.cgi?id=8397143 "bug986864-autoDeferPurge") [[details]](/attachment.cgi?id=8397143&action=edit "bug986864-autoDeferPurge") [[diff]](/attachment.cgi?id=8397143&action=diff "bug986864-autoDeferPurge") [[review]](/page.cgi?id=splinter.html&ignore=&bug=986864&attachment=8397143)
[bug986864](/show_bug.cgi?id=986864 "VERIFIED FIXED - Crash [@ memmove] or [@ mozilla::PodCopy] or [@ js_NewStringCopyN] or Assertion failure: PointerRangeSize(src, static_cast<const T*>(dst)) >= nelem, at dist/include/mozilla/PodOperations.h")-autoDeferPurge
Review of [attachment 8397143](/attachment.cgi?id=8397143 "bug986864-autoDeferPurge") [[details]](/attachment.cgi?id=8397143&action=edit "bug986864-autoDeferPurge") [[diff]](/attachment.cgi?id=8397143&action=diff "bug986864-autoDeferPurge") [[review]](/page.cgi?id=splinter.html&ignore=&bug=986864&attachment=8397143):
-----------------------------------------------------------------
As discussed IRL, it would be simpler to not use any RAII protection at all, and instead allocate a string of the right length in advance, then copy the character data in when you can't GC anymore.
[Attachment #8397143](/attachment.cgi?id=8397143&action=edit "bug986864-autoDeferPurge") -
Flags: review?(sphink)

|  | [Jon Coppeard (:jonco) (PTO until 27th Jan)](/user_profile?user_id=443194)  Assignee |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=986864#c5)• 11 years ago |
|  | |

Attached patch

[bug986864-scriptSource2](attachment.cgi?id=8398484&action=diff) (obsolete)
— [Details](attachment.cgi?id=8398484&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=986864&attachment=8398484)

Unfortunately it turned out that we couldn't ensure there was no GC whenever these chars where in use.
Here's new patch. This adds a a holder object that takes ownership of the chars for a specific ScriptSource if the cache is purged, and deletes them itself when it goes out of scope.
[Attachment #8398484](/attachment.cgi?id=8398484&action=edit "bug986864-scriptSource2") -
Flags: review?(sphink)

|  | [Steve Fink [:sfink] [:s:]](/user_profile?user_id=359004) |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=986864#c6)• 11 years ago |
|  | |

Comment on [attachment 8398484](/attachment.cgi?id=8398484 "bug986864-scriptSource2") [[details]](/attachment.cgi?id=8398484&action=edit "bug986864-scriptSource2") [[diff]](/attachment.cgi?id=8398484&action=diff "bug986864-scriptSource2") [[review]](/page.cgi?id=splinter.html&ignore=&bug=986864&attachment=8398484)
[bug986864](/show_bug.cgi?id=986864 "VERIFIED FIXED - Crash [@ memmove] or [@ mozilla::PodCopy] or [@ js_NewStringCopyN] or Assertion failure: PointerRangeSize(src, static_cast<const T*>(dst)) >= nelem, at dist/include/mozilla/PodOperations.h")-scriptSource2
Review of [attachment 8398484](/attachment.cgi?id=8398484 "bug986864-scriptSource2") [[details]](/attachment.cgi?id=8398484&action=edit "bug986864-scriptSource2") [[diff]](/attachment.cgi?id=8398484&action=diff "bug986864-scriptSource2") [[review]](/page.cgi?id=splinter.html&ignore=&bug=986864&attachment=8398484):
-----------------------------------------------------------------
Had to stare at it for a while, but it looks good to me now.
::: js/src/jit-test/tests/gc/bug-986864.js
@@ +1,5 @@
> +// |jit-test| slow
> +function x() {}
> +for (var j = 0; j < 9999; ++j) {
> + (function() {
> + x += x.watch("endsWith", SharedArrayBuffer);
It would be much better if we could trigger this with something other than SharedArrayBuffer. That will get automatically disabled on Aurora and everything after, breaking this test.
::: js/src/jsscript.cpp
@@ +1423,5 @@
> + // The holder is going out of scope. If it has taken ownership of cached
> + // chars then delete them, otherwise unregister ourself with the cache.
> + if (charsToDelete\_) {
> + JS\_ASSERT(!cache\_ && !source\_);
> + js\_delete(const\_cast<jschar \*>(charsToDelete\_));
I think charsToDelete\_ was allocated with js\_realloc, so this should really be js\_free instead of js\_delete. (Maybe that means it should be charsToFree\_?)
[Attachment #8398484](/attachment.cgi?id=8398484&action=edit "bug986864-scriptSource2") -
Flags: review?(sphink) → review+

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)  Reporter |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=986864#c7)• 11 years ago |
|  | |

(In reply to Steve Fink [:sfink] from [comment #6](/show_bug.cgi?id=986864#c6 "VERIFIED FIXED - Crash [@ memmove] or [@ mozilla::PodCopy] or [@ js_NewStringCopyN] or Assertion failure: PointerRangeSize(src, static_cast<const T*>(dst)) >= nelem, at dist/include/mozilla/PodOperations.h"))
> ::: js/src/jit-test/tests/gc/bug-986864.js
> @@ +1,5 @@
> > +// |jit-test| slow
> > +function x() {}
> > +for (var j = 0; j < 9999; ++j) {
> > + (function() {
> > + x += x.watch("endsWith", SharedArrayBuffer);
>
> It would be much better if we could trigger this with something other than
> SharedArrayBuffer. That will get automatically disabled on Aurora and
> everything after, breaking this test.
Let's use the test Sean made in [comment 1](/show_bug.cgi?id=986864#c1 "VERIFIED FIXED - Crash [@ memmove] or [@ mozilla::PodCopy] or [@ js_NewStringCopyN] or Assertion failure: PointerRangeSize(src, static_cast<const T*>(dst)) >= nelem, at dist/include/mozilla/PodOperations.h") - it doesn't use SharedArrayBuffer, instead only relying on ArrayBuffer.

|  | [Jon Coppeard (:jonco) (PTO until 27th Jan)](/user_profile?user_id=443194)  Assignee |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=986864#c8)• 11 years ago |
|  | |

Attached patch

[bug986864-scriptSource-v3](attachment.cgi?id=8398617&action=diff)
— [Details](attachment.cgi?id=8398617&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=986864&attachment=8398617)

Updated patch with review comments addressed.
[Attachment #8397143](/attachment.cgi?id=8397143&action=edit "bug986864-autoDeferPurge") -
Attachment is obsolete: true
[Attachment #8398484](/attachment.cgi?id=8398484&action=edit "bug986864-scriptSource2") -
Attachment is obsolete: true
[Attachment #8398617](/attachment.cgi?id=8398617&action=edit "bug986864-scriptSource-v3") -
Flags: review+

|  | [Jon Coppeard (:jonco) (PTO until 27th Jan)](/user_profile?user_id=443194)  Assignee |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=986864#c9)• 11 years ago |
|  | |

AutoSuppressPurge was introduce in [bug 938615](/show_bug.cgi?id=938615 "RESOLVED FIXED - avoid GC hazard in ScriptSource::substring").

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)  Reporter |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=986864#c10)• 11 years ago |
|  | |

(In reply to Jon Coppeard (:jonco) from [comment #9](/show_bug.cgi?id=986864#c9 "VERIFIED FIXED - Crash [@ memmove] or [@ mozilla::PodCopy] or [@ js_NewStringCopyN] or Assertion failure: PointerRangeSize(src, static_cast<const T*>(dst)) >= nelem, at dist/include/mozilla/PodOperations.h"))
> AutoSuppressPurge was introduce in [bug 938615](/show_bug.cgi?id=938615 "RESOLVED FIXED - avoid GC hazard in ScriptSource::substring").
Will this be the correct regressing bug? If so, this issue goes back to version 28.Flags: needinfo?(jcoppeard)

|  | [Jon Coppeard (:jonco) (PTO until 27th Jan)](/user_profile?user_id=443194)  Assignee |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=986864#c11)• 11 years ago |
|  | |

Comment on [attachment 8398617](/attachment.cgi?id=8398617 "bug986864-scriptSource-v3") [[details]](/attachment.cgi?id=8398617&action=edit "bug986864-scriptSource-v3") [[diff]](/attachment.cgi?id=8398617&action=diff "bug986864-scriptSource-v3") [[review]](/page.cgi?id=splinter.html&ignore=&bug=986864&attachment=8398617)
[bug986864](/show_bug.cgi?id=986864 "VERIFIED FIXED - Crash [@ memmove] or [@ mozilla::PodCopy] or [@ js_NewStringCopyN] or Assertion failure: PointerRangeSize(src, static_cast<const T*>(dst)) >= nelem, at dist/include/mozilla/PodOperations.h")-scriptSource-v3
[Security approval request comment]
How easily could an exploit be constructed based on the patch?
So the problem is that this cache can contain a stale entry for a dead ScriptSource\* and then hand out the pointer to its (live) source string. The callers here assume the length of the string, but they only read from it. So they may read source data for the wrong thing, which may be controllable by an attacker, and they may also read past the end of it.
An attack might be possible to get code in a privileged compartment to execute javascript code controllable by an attacker, but it seems this would be hard to arrange. It would involve getting GC to trigger at a very specific point, and then somehow getting the privileged compartment to allocate a ScriptSource at the same address as a dead ScriptSource set up by the attacker.
So I think the answer is that it would be possible but difficult.
Do comments in the patch, the check-in comment, or tests included in the patch paint a bulls-eye on the security problem?
I would say it's not obvious from the patch.
Which older supported branches are affected by this flaw?
26 onwards.
If not all supported branches, which bug introduced the flaw?
[Bug 938615](/show_bug.cgi?id=938615 "RESOLVED FIXED - avoid GC hazard in ScriptSource::substring").
Do you have backports for the affected branches? If not, how different, hard to create, and risky will they be?
It should be possible to apply the same patch.
How likely is this patch to cause regressions; how much testing does it need?
Unlikely. Letting it bake on central for a few days should be fine.
[Attachment #8398617](/attachment.cgi?id=8398617&action=edit "bug986864-scriptSource-v3") -
Flags: sec-approval?

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=986864#a506614_280903)• 11 years ago |

[status-firefox28](/buglist.cgi?f1=cf_status_firefox28&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=wontfix)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=986864#c12)• 11 years ago |
|  | |

Comment on [attachment 8398617](/attachment.cgi?id=8398617 "bug986864-scriptSource-v3") [[details]](/attachment.cgi?id=8398617&action=edit "bug986864-scriptSource-v3") [[diff]](/attachment.cgi?id=8398617&action=diff "bug986864-scriptSource-v3") [[review]](/page.cgi?id=splinter.html&ignore=&bug=986864&attachment=8398617)
[bug986864](/show_bug.cgi?id=986864 "VERIFIED FIXED - Crash [@ memmove] or [@ mozilla::PodCopy] or [@ js_NewStringCopyN] or Assertion failure: PointerRangeSize(src, static_cast<const T*>(dst)) >= nelem, at dist/include/mozilla/PodOperations.h")-scriptSource-v3
sec-approval+ for trunk.
If this is 26 onwards, why doesn't it affect b2g 1.2, which is derived from 26?
[Attachment #8398617](/attachment.cgi?id=8398617&action=edit "bug986864-scriptSource-v3") -
Flags: sec-approval? → sec-approval+

|  | [Jon Coppeard (:jonco) (PTO until 27th Jan)](/user_profile?user_id=443194)  Assignee |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=986864#c13)• 11 years ago |
|  | |

Sorry, this was introduced in 28 (not 26).Blocks: [938615](/show_bug.cgi?id=938615 "RESOLVED FIXED - avoid GC hazard in ScriptSource::substring")
No longer blocks: [961091](/show_bug.cgi?id=961091 "RESOLVED FIXED - GenerationalGC: Crashtest 693212.xhtml fails on MacOSX platforms only")
[status-b2g-v1.3](/buglist.cgi?f1=cf_status_b2g_1_3&o1=isnotempty):
[unaffected](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=unaffected) → [affected](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=affected)
[status-firefox29](/buglist.cgi?f1=cf_status_firefox29&o1=isnotempty):
[unaffected](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=unaffected) → [affected](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=affected)Flags: needinfo?(jcoppeard)

|  | [Jon Coppeard (:jonco) (PTO until 27th Jan)](/user_profile?user_id=443194)  Assignee |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=986864#c14)• 11 years ago |
|  | |

<https://hg.mozilla.org/integration/mozilla-inbound/rev/72ba89a774db>

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=986864#c15)• 11 years ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/72ba89a774db>
Please request Aurora/Beta approval on this ASAP.Status: NEW → RESOLVEDClosed: 11 years ago
[status-b2g-v2.0](/buglist.cgi?f1=cf_status_b2g_2_0&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_2_0&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_2_0&o1=equals&v1=fixed)
[status-firefox31](/buglist.cgi?f1=cf_status_firefox31&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=fixed)Flags: in-testsuite+Resolution: --- → FIXEDTarget Milestone: --- → mozilla31

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=986864#a1018016_75935)• 11 years ago |

Flags: needinfo?(jcoppeard)

|  | [Jon Coppeard (:jonco) (PTO until 27th Jan)](/user_profile?user_id=443194)  Assignee |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=986864#c16)• 11 years ago |
|  | |

Comment on [attachment 8398617](/attachment.cgi?id=8398617 "bug986864-scriptSource-v3") [[details]](/attachment.cgi?id=8398617&action=edit "bug986864-scriptSource-v3") [[diff]](/attachment.cgi?id=8398617&action=diff "bug986864-scriptSource-v3") [[review]](/page.cgi?id=splinter.html&ignore=&bug=986864&attachment=8398617)
[bug986864](/show_bug.cgi?id=986864 "VERIFIED FIXED - Crash [@ memmove] or [@ mozilla::PodCopy] or [@ js_NewStringCopyN] or Assertion failure: PointerRangeSize(src, static_cast<const T*>(dst)) >= nelem, at dist/include/mozilla/PodOperations.h")-scriptSource-v3
[Approval Request Comment]
Bug caused by (feature/regressing bug #): [Bug 938615](/show_bug.cgi?id=938615 "RESOLVED FIXED - avoid GC hazard in ScriptSource::substring")
User impact if declined: Potential security issue.
Testing completed (on m-c, etc.): On m-c since 2014-03-31.
Risk to taking this patch (and alternatives if risky): Low
String or IDL/UUID changes made by this patch: None
[Attachment #8398617](/attachment.cgi?id=8398617&action=edit "bug986864-scriptSource-v3") -
Flags: approval-mozilla-beta?
[Attachment #8398617](/attachment.cgi?id=8398617&action=edit "bug986864-scriptSource-v3") -
Flags: approval-mozilla-aurora?Flags: needinfo?(jcoppeard)

|  | [Sylvestre Ledru [:Sylvestre]](/user_profile?user_id=495955) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=986864#a1075139_495955)• 11 years ago |

[Attachment #8398617](/attachment.cgi?id=8398617&action=edit "bug986864-scriptSource-v3") -
Flags: approval-mozilla-beta?
[Attachment #8398617](/attachment.cgi?id=8398617&action=edit "bug986864-scriptSource-v3") -
Flags: approval-mozilla-beta+
[Attachment #8398617](/attachment.cgi?id=8398617&action=edit "bug986864-scriptSource-v3") -
Flags: approval-mozilla-aurora?
[Attachment #8398617](/attachment.cgi?id=8398617&action=edit "bug986864-scriptSource-v3") -
Flags: approval-mozilla-aurora+

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=986864#c17)• 11 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-aurora/rev/e8bdf848dd9b>
<https://hg.mozilla.org/releases/mozilla-beta/rev/e6b88dfe88cd>
<https://hg.mozilla.org/releases/mozilla-b2g28_v1_3/rev/e8649867ab24>
[status-b2g-v1.3](/buglist.cgi?f1=cf_status_b2g_1_3&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=fixed)
[status-b2g-v1.4](/buglist.cgi?f1=cf_status_b2g_1_4&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=fixed)
[status-firefox29](/buglist.cgi?f1=cf_status_firefox29&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=fixed)
[status-firefox30](/buglist.cgi?f1=cf_status_firefox30&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=fixed)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=986864#a1119243_75935)• 11 years ago |

[status-b2g-v1.3T](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=fixed)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=986864#a1674771_1689)• 11 years ago |

Group: javascript-core-security → core-security

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=986864#a1694953_395101)• 11 years ago |

Status: RESOLVED → VERIFIEDCrash Signature: [@ memmove]
[@ mozilla::PodCopy]
[@ js\_NewStringCopyN] → [@ memmove]
[@ mozilla::PodCopy]
[@ js\_NewStringCopyN]

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101) |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=986864#c18)• 11 years ago |
|  | |

JSBugMon: This bug has been automatically verified fixed.

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=986864#a2149561_280903)• 11 years ago |

Crash Signature: [@ memmove]
[@ mozilla::PodCopy]
[@ js\_NewStringCopyN] → [@ memmove]
[@ mozilla::PodCopy]
[@ js\_NewStringCopyN]Whiteboard: [jsbugmon:update] → [jsbugmon:update][adv-main29+]

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=986864#a45436166_1689)• 9 years ago |

Group: core-security
You need to [log in](/show_bug.cgi?id=986864&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from lists.opensuse.org_28e1a611_20250125_092448.html ===


[![openSUSE](https://static.opensuse.org/favicon.svg)
Mailing Lists](/archives/ "openSUSE Mailing Lists")

[Sign In](/accounts/login/?next=/archives/list/updates%40lists.opensuse.org/message/PIOWHEMB6O5NKJ77N7SHVMSKZFZOU3FI/)
[Sign Up](/accounts/signup/?next=/archives/list/updates%40lists.opensuse.org/message/PIOWHEMB6O5NKJ77N7SHVMSKZFZOU3FI/)

[Manage this list](/manage/lists/updates.lists.opensuse.org/)
[Sign In](/accounts/login/?next=/archives/list/updates%40lists.opensuse.org/message/PIOWHEMB6O5NKJ77N7SHVMSKZFZOU3FI/)
[Sign Up](/accounts/signup/?next=/archives/list/updates%40lists.opensuse.org/message/PIOWHEMB6O5NKJ77N7SHVMSKZFZOU3FI/)

×
#### Keyboard Shortcuts

### Thread View

* `j`: Next unread message
* `k`: Previous unread message
* `j a`: Jump to all threads* `j l`: Jump to MailingList overview

[thread](/archives/list/updates%40lists.opensuse.org/thread/PIOWHEMB6O5NKJ77N7SHVMSKZFZOU3FI/#PIOWHEMB6O5NKJ77N7SHVMSKZFZOU3FI)

# openSUSE-SU-2014:0629-1: moderate: update for seamonkey

![](https://seccdn.libravatar.org/avatar/099a17325bdf082b643d1a6bbacde279.jpg?s=120&d=mm&r=g)
## [opensuse-security＠opensuse.org](/archives/users/1b72def497ef4503896cd7a5fe9fb8e0/ "See the profile for opensuse-security＠opensuse.org")

12 May
2014

12 May
'14

15:04

openSUSE Security Update: update for seamonkey
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
Announcement ID: openSUSE-SU-2014:0629-1
Rating: moderate
References: #875378
Cross-References: CVE-2014-1492 CVE-2014-1518 CVE-2014-1519
CVE-2014-1522 CVE-2014-1523 CVE-2014-1524
CVE-2014-1525 CVE-2014-1526 CVE-2014-1528
CVE-2014-1529 CVE-2014-1530 CVE-2014-1531
CVE-2014-1532
Affected Products:
openSUSE 13.1
openSUSE 12.3
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
An update that fixes 13 vulnerabilities is now available.
Description:
This is a SeaMonkey update to version 2.26:
\* MFSA 2014-34/CVE-2014-1518/CVE-2014-1519 Miscellaneous
memory safety hazards
\* MFSA 2014-36/CVE-2014-1522 (bmo#995289) Web Audio
memory corruption issues
\* MFSA 2014-37/CVE-2014-1523 (bmo#969226) Out of bounds
read while decoding JPG images
\* MFSA 2014-38/CVE-2014-1524 (bmo#989183) Buffer overflow
when using non-XBL object as XBL
\* MFSA 2014-39/CVE-2014-1525 (bmo#989210) Use-after-free
in the Text Track Manager for HTML video
\* MFSA 2014-41/CVE-2014-1528 (bmo#963962) Out-of-bounds
write in Cairo
\* MFSA 2014-42/CVE-2014-1529 (bmo#987003) Privilege
escalation through Web Notification API
\* MFSA 2014-43/CVE-2014-1530 (bmo#895557) Cross-site
scripting (XSS) using history navigations
\* MFSA 2014-44/CVE-2014-1531 (bmo#987140) Use-after-free
in imgLoader while resizing images
\* MFSA 2014-45/CVE-2014-1492 (bmo#903885) Incorrect IDNA
domain name matching for wildcard certificates (fixed
by NSS 3.16)
\* MFSA 2014-46/CVE-2014-1532 (bmo#966006) Use-after-free
in nsHostResolver
\* MFSA 2014-47/CVE-2014-1526 (bmo#988106) Debugger can
bypass XrayWrappers with JavaScript
- rebased patches
- added aarch64 porting patches
\* mozilla-aarch64-bmo-810631.patch
\* mozilla-aarch64-bmo-962488.patch
\* mozilla-aarch64-bmo-963023.patch
\* mozilla-aarch64-bmo-963024.patch
\* mozilla-aarch64-bmo-963027.patch
- requires NSPR 4.10.3 and NSS 3.16
- added mozilla-icu-strncat.patch to fix post build checks
Patch Instructions:
To install this openSUSE Security Update use YaST online\_update.
Alternatively you can run the command listed for your product:
- openSUSE 13.1:
zypper in -t patch openSUSE-2014-354
- openSUSE 12.3:
zypper in -t patch openSUSE-2014-354
To bring your system up-to-date, use "zypper patch".
Package List:
- openSUSE 13.1 (i586 x86\_64):
seamonkey-2.26-20.1
seamonkey-debuginfo-2.26-20.1
seamonkey-debugsource-2.26-20.1
seamonkey-dom-inspector-2.26-20.1
seamonkey-irc-2.26-20.1
seamonkey-translations-common-2.26-20.1
seamonkey-translations-other-2.26-20.1
seamonkey-venkman-2.26-20.1
- openSUSE 12.3 (i586 x86\_64):
seamonkey-2.26-1.45.1
seamonkey-debuginfo-2.26-1.45.1
seamonkey-debugsource-2.26-1.45.1
seamonkey-dom-inspector-2.26-1.45.1
seamonkey-irc-2.26-1.45.1
seamonkey-translations-common-2.26-1.45.1
seamonkey-translations-other-2.26-1.45.1
seamonkey-venkman-2.26-1.45.1
References:
<http://support.novell.com/security/cve/CVE-2014-1492.html>
<http://support.novell.com/security/cve/CVE-2014-1518.html>
<http://support.novell.com/security/cve/CVE-2014-1519.html>
<http://support.novell.com/security/cve/CVE-2014-1522.html>
<http://support.novell.com/security/cve/CVE-2014-1523.html>
<http://support.novell.com/security/cve/CVE-2014-1524.html>
<http://support.novell.com/security/cve/CVE-2014-1525.html>
<http://support.novell.com/security/cve/CVE-2014-1526.html>
<http://support.novell.com/security/cve/CVE-2014-1528.html>
<http://support.novell.com/security/cve/CVE-2014-1529.html>
<http://support.novell.com/security/cve/CVE-2014-1530.html>
<http://support.novell.com/security/cve/CVE-2014-1531.html>
<http://support.novell.com/security/cve/CVE-2014-1532.html>
<https://bugzilla.novell.com/875378>

[0](#like "You must be logged-in to vote.")
[0](#dislike "You must be logged-in to vote.")

Reply

[Sign in to reply online](/accounts/login/?next=/archives/list/updates%40lists.opensuse.org/message/PIOWHEMB6O5NKJ77N7SHVMSKZFZOU3FI/)
Use email software

[Back to the thread](/archives/list/updates%40lists.opensuse.org/thread/PIOWHEMB6O5NKJ77N7SHVMSKZFZOU3FI/#PIOWHEMB6O5NKJ77N7SHVMSKZFZOU3FI)

[Back to the list](/archives/list/updates%40lists.opensuse.org/)

![HyperKitty](/static/hyperkitty/img/logo.png)
Powered by [HyperKitty](http://hyperkitty.readthedocs.org) version 1.3.12.


