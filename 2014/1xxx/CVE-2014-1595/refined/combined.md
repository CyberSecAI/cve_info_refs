=== Content from www.mozilla.org_2fe598d3_20250125_115023.html ===


## Help us improve your Mozilla experience

In addition to Cookies necessary for this site to function, we’d like your permission to set some additional Cookies to better understand your browsing needs and improve your experience. Rest assured — we value your privacy.

Accept All Additional Cookies

Reject All Additional Cookies

[Cookie settings](/en-US/privacy/websites/cookie-settings/)

Menu
[![Mozilla](https://www.mozilla.org/media/img/logos/m24/lockup-black.f2ddba3f0724.svg)](/en-US/)

* [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
  Firefox browsers](/en-US/firefox/)
  Close Firefox browsers menu
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for Desktop](/en-US/firefox/new/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for iOS](/en-US/firefox/browsers/mobile/ios/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for Android](/en-US/firefox/browsers/mobile/android/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/focus/logo.aac3e33175cb.svg)
    ## Firefox Focus](/en-US/firefox/browsers/mobile/focus/)
  + [## Firefox blog](https://blog.mozilla.org/firefox/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=firefox)
* [Products](/en-US/products/)
  Close Products menu
  + [![](https://www.mozilla.org/media/protocol/img/logos/mozilla/vpn/logo.c648f487bfb8.svg)
    ## Mozilla VPN](/en-US/products/vpn/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/monitor/logo.d97e5516f9e6.svg)
    ## Mozilla Monitor](https://monitor.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/relay/logo-white.d42a8b52e44c.svg)
    ## Firefox Relay](https://relay.firefox.com/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/protocol/img/logos/pocket/logo.17446bc33a5d.svg)
    ## Pocket](https://getpocket.com/firefox_learnmore/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/nav/icons/icon-mdn-plus.f54475f980ab.svg)
    ## MDN Plus](https://developer.mozilla.org/plus?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/logos/fakespot/logo-blue.3973b8fe9631.svg)
    ## Fakespot](https://fakespot.com/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/logos/thunderbird/logo-thunderbird.121e9c0fed45.svg)
    ## Thunderbird](https://www.thunderbird.net/)

  [All products](/en-US/products/)
* [About us](/en-US/about/)
  Close About us menu

  Our Mission

  + [## About Mozilla](/en-US/about/)
  + [## The Mozilla Manifesto](/en-US/about/manifesto/)
  + [## Get Involved](/en-US/contribute/)
  + [## Innovation Projects](https://future.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Blog](https://blog.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)

  Our Work

  + [## Mozilla Foundation](https://foundation.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla.ai](https://www.mozilla.ai/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla Ventures](https://mozilla.vc/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla Advertising](/en-US/advertising/)

## Menu

* Mozilla Security

## [Mozilla Security](/en-US/security/)

* [Advisories](/en-US/security/advisories/)
* [Known Vulnerabilities](/en-US/security/known-vulnerabilities/)
* [Mozilla Security Blog](https://blog.mozilla.com/security/)
* [Security Bug Bounty](/en-US/security/bug-bounty/)
* [Third-party Injection Policy](/en-US/security/third-party-software-injection/)

## [Client Bug Bounty](/en-US/security/client-bug-bounty/)

* [Frequently Asked Questions](/en-US/security/bug-bounty/faq/)
* [Hall of Fame](/en-US/security/bug-bounty/hall-of-fame/)

## [Web Bug Bounty](/en-US/security/web-bug-bounty/)

* [Eligible Websites](/en-US/security/bug-bounty/web-eligible-sites/)
* [Frequently Asked Questions](/en-US/security/bug-bounty/faq-webapp/)
* [Hall of Fame](/en-US/security/bug-bounty/web-hall-of-fame/)

# Mozilla Foundation Security Advisory 2014-90

## Apple CoreGraphics framework on OS X 10.10 logging input data to /tmp directory

Announced
December 2, 2014
Reporter
Kent Howard
Impact
High
Products
Firefox, Firefox ESR, Thunderbird
Fixed in

* Firefox 34
* Firefox ESR 31.3
* Thunderbird 31.3

### Description

Security researcher **Kent Howard** reported an Apple issue
present in OS X 10.10 (Yosemite) where log files are created by the
`CoreGraphics` framework of OS X in the `/tmp` local
directory. These log files contain a record of all inputs into Mozilla programs
during their operation. In versions of OS X from versions 10.6 through 10.9, the
`CoreGraphics` had this logging ability but it was turned off by
default. In OS X 10.10, this logging was turned on by default for some
applications that use a custom memory allocator, such as `jemalloc`,
because of an initialization bug in the framework. This issue has been addressed
in Mozilla products by explicitly turning off the framework's logging of input
events. On vulnerable systems, this issue can result in private data such as
usernames, passwords, and other inputed data being saved to a log file on the
local system.

This issue does not affect OS X users prior to 10.10. Users on
OS X 10.10 should go to their `/tmp` folder and delete any files with
names beginning with "CGLog\_" followed by the name of a Mozilla product, such as
"CGLog\_firefox".

### References

* [jemalloc poisoning plus Apple uninitialized variable usage triggers
  keylogging in /tmp/ on OSX 10.10](https://bugzilla.mozilla.org/show_bug.cgi?id=1092855)
  ([CVE-2014-1595](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-1595))

## Company

* [Leadership](/about/leadership/)
* [Press Center](https://blog.mozilla.org/category/mozilla/news/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=company)
* [Careers](/en-US/careers/)
* [Contact](/en-US/contact/)

## Support

* [Product Help](https://support.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)
* [File a Bug](https://bugzilla.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)
* [Localize Mozilla](https://pontoon.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)

## Resources

* [Advertise with Mozilla](/en-US/advertising/)
* [Firefox Release Notes](/firefox/134.0.2/releasenotes/)

## Developers

* [Developer Edition](/en-US/firefox/developer/)
* [Enterprise](/en-US/firefox/enterprise/)
* [Tools](https://firefox-source-docs.mozilla.org/devtools-user/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=developers)
* [MDN](https://developer.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer)

## Follow @Mozilla

* [X (formerly Twitter) (@mozilla)](https://twitter.com/mozilla)
* [Instagram (@mozilla)](https://www.instagram.com/mozilla/)
* [LinkedIn (@mozilla)](https://www.linkedin.com/company/mozilla-corporation/)
* [TikTok (@mozilla)](https://www.tiktok.com/%40mozilla)
* [Spotify (@mozilla)](https://open.spotify.com/show/0vT7LJMeVDxyQ2ZamHKu08?si=_uDRD6bRR_6M5YZyISGXgA)

## Follow @Firefox

* [X (formerly Twitter) (@firefox)](https://twitter.com/firefox)
* [Instagram (@firefox)](https://www.instagram.com/firefox/)
* [YouTube (@firefoxchannel)](https://www.youtube.com/user/firefoxchannel)
* [TikTok (@firefox)](https://www.tiktok.com/%40firefox)

[Donate](https://foundation.mozilla.org/?form=moco-donate-footer)

Visit [Mozilla Corporation’s](/en-US/) not-for-profit parent, the [Mozilla Foundation](https://foundation.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer).

Portions of this content are ©1998–2025 by individual mozilla.org contributors. Content available under a [Creative Commons license](/en-US/foundation/licensing/website-content/).

* [Website Privacy Notice](/en-US/privacy/websites/)
* [Cookies](/en-US/privacy/websites/cookie-settings/)
* [Legal](/en-US/about/legal/)
* [Community Participation Guidelines](/en-US/about/governance/policies/participation/)
* [About this site](/en-US/about/this-site/)

![](https://www.mozilla.org/media/img/logos/m24/wordmark-white.2d673bb5b33a.svg)



=== Content from support.apple.com_6eb9063a_20250125_115022.html ===


* [Apple](https://www.apple.com/)
* + [Store](https://www.apple.com/us/shop/goto/store)
  + [Mac](https://www.apple.com/mac/)
  + [iPad](https://www.apple.com/ipad/)
  + [iPhone](https://www.apple.com/iphone/)
  + [Watch](https://www.apple.com/watch/)
  + [Vision](https://www.apple.com/apple-vision-pro/)
  + [AirPods](https://www.apple.com/airpods/)
  + [TV & Home](https://www.apple.com/tv-home/)
  + [Entertainment](https://www.apple.com/entertainment/)
  + [Accessories](https://www.apple.com/us/shop/goto/buy_accessories)
  + [Support](https://support.apple.com/?cid=gn-ols-home-hp-tab)
* 0+

# About the security content of OS X Yosemite v10.10.2 and Security Update 2015-001

This document describes the security content of OS X Yosemite v10.10.2 and Security Update 2015-001

For the protection of our customers, Apple does not disclose, discuss, or confirm security issues until a full investigation has occurred and any necessary patches or releases are available. To learn more about Apple Product Security, see the [Apple Product Security](http://www.apple.com/support/security/) website.

For information about the Apple Product Security PGP Key, see [How to use the Apple Product Security PGP Key](http://support.apple.com/kb/HT1620).

Where possible, [CVE IDs](http://cve.mitre.org/about/) are used to reference the vulnerabilities for further information.

To learn about other Security Updates, see [Apple Security Updates](http://support.apple.com/kb/HT1222).

## OS X Yosemite v10.10.2 and Security Update 2015-001

* **AFP Server**

  Available for: OS X Mavericks v10.9.5

  Impact: A remote attacker may be able to determine all the network addresses of the system

  Description: The AFP file server supported a command which returned all the network addresses of the system. This issue was addressed by removing the addresses from the result.

  CVE-ID

  CVE-2014-4426 : Craig Young of Tripwire VERT

* **bash**

  Available for: OS X Yosemite v10.10 and v10.10.1

  Impact: Multiple vulnerabilities in bash, including one that may allow local attackers to execute arbitrary code

  Description: Multiple vulnerabilities existed in bash. These issues were addressed by updating bash to patch level 57.

  CVE-ID

  CVE-2014-6277

  CVE-2014-7186

  CVE-2014-7187

* **Bluetooth**

  Available for: OS X Mountain Lion v10.8.5, OS X Mavericks v10.9.5

  Impact: A malicious application may be able to execute arbitrary code with system privileges

  Description: An integer signedness error existed in IOBluetoothFamily which allowed manipulation of kernel memory. This issue was addressed through improved bounds checking. This issue does not affect OS X Yosemite systems.

  CVE-ID

  CVE-2014-4497

* **Bluetooth**

  Available for: OS X Yosemite v10.10 and v10.10.1

  Impact: A malicious application may be able to execute arbitrary code with system privileges

  Description: An error existed in the Bluetooth driver that allowed a malicious application to control the size of a write to kernel memory. The issue was addressed through additional input validation.

  CVE-ID

  CVE-2014-8836 : Ian Beer of Google Project Zero

* **Bluetooth**

  Available for: OS X Yosemite v10.10 and v10.10.1

  Impact: A malicious application may be able to execute arbitrary code with system privileges

  Description: Multiple security issues existed in the Bluetooth driver, allowing a malicious application to execute arbitrary code with system privilege. The issues were addressed through additional input validation.

  CVE-ID

  CVE-2014-8837 : Roberto Paleari and Aristide Fattori of Emaze Networks

* **CFNetwork Cache**

  Available for: OS X Yosemite v10.10 and v10.10.1

  Impact: Website cache may not be fully cleared after leaving private browsing

  Description: A privacy issue existed where browsing data could remain in the cache after leaving private browsing. This issue was addressed through a change in caching behavior.

  CVE-ID

  CVE-2014-4460

* **CoreGraphics**

  Available for: OS X Mountain Lion v10.8.5, OS X Mavericks v10.9.5, OS X Yosemite v10.10 and v10.10.1

  Impact: Opening a maliciously crafted PDF file may lead to an unexpected application termination or arbitrary code execution

  Description: An integer overflow existed in the handling of PDF files. This issue was addressed through improved bounds checking.

  CVE-ID

  CVE-2014-4481 : Felipe Andres Manzano of the Binamuse VRT, via the iSIGHT Partners GVP Program

* **CPU Software**

  Available for: OS X Yosemite v10.10 and v10.10.1, for: MacBook Pro Retina, MacBook Air (Mid 2013 and later), iMac (Late 2013 and later), Mac Pro (Late 2013)

  Impact: A malicious Thunderbolt device may be able to affect firmware flashing

  Description: Thunderbolt devices could modify the host firmware if connected during an EFI update. This issue was addressed by not loading option ROMs during updates.

  CVE-ID

  CVE-2014-4498 : Trammell Hudson of Two Sigma Investments

* **CommerceKit Framework**

  Available for: OS X Yosemite v10.10 and v10.10.1

  Impact: An attacker with access to a system may be able to recover Apple ID credentials

  Description: An issue existed in the handling of App Store logs. The App Store process could log Apple ID credentials in the log when additional logging was enabled. This issue was addressed by disallowing logging of credentials.

  CVE-ID

  CVE-2014-4499 : Sten Petersen

* **CoreGraphics**

  Available for: OS X Yosemite v10.10 and v10.10.1

  Impact: Some third-party applications with non-secure text entry and mouse events may log those events

  Description: Due to the combination of an uninitialized variable and an application's custom allocator, non-secure text entry and mouse events may have been logged. This issue was addressed by ensuring that logging is off by default. This issue did not affect systems prior to OS X Yosemite.

  CVE-ID

  CVE-2014-1595 : Steven Michaud of Mozilla working with Kent Howard

* **CoreGraphics**

  Available for: OS X Mountain Lion v10.8.5, OS X Mavericks v10.9.5

  Impact: Opening a maliciously crafted PDF file may lead to an unexpected application termination or arbitrary code execution

  Description: A memory corruption issue existed in the handling of PDF files. The issue was addressed through improved bounds checking. This issue does not affect OS X Yosemite systems.

  CVE-ID

  CVE-2014-8816 : Mike Myers, of Digital Operatives LLC

* **CoreSymbolication**

  Available for: OS X Mountain Lion v10.8.5, OS X Mavericks v10.9.5, OS X Yosemite v10.10 and v10.10.1

  Impact: A malicious application may be able to execute arbitrary code with system privileges

  Description: Multiple type confusion issues existed in coresymbolicationd's handling of XPC messages. These issues were addressed through improved type checking.

  CVE-ID

  CVE-2014-8817 : Ian Beer of Google Project Zero

* **FontParser**

  Available for: OS X Mountain Lion v10.8.5, OS X Mavericks v10.9.5, OS X Yosemite v10.10 and v10.10.1

  Impact: Processing a maliciously crafted .dfont file may lead to an unexpected application termination or arbitrary code execution

  Description: A memory corruption issue existed in the handling of .dfont files. This issue was addressed through improved bounds checking.

  CVE-ID

  CVE-2014-4484 : Gaurav Baruah working with HP's Zero Day Initiative

* **FontParser**

  Available for: OS X Mountain Lion v10.8.5, OS X Mavericks v10.9.5, OS X Yosemite v10.10 and v10.10.1

  Impact: Opening a maliciously crafted PDF file may lead to an unexpected application termination or arbitrary code execution

  Description: A buffer overflow existed in the handling of font files. This issue was addressed through improved bounds checking.

  CVE-ID

  CVE-2014-4483 : Apple

* **Foundation**

  Available for: OS X Mavericks v10.9.5, OS X Yosemite v10.10 and v10.10.1

  Impact: Viewing a maliciously crafted XML file may lead to an unexpected application termination or arbitrary code execution

  Description: A buffer overflow existed in the XML parser. This issue was addressed through improved bounds checking.

  CVE-ID

  CVE-2014-4485 : Apple

* **Intel Graphics Driver**

  Available for: OS X Mountain Lion v10.8.5, OS X Mavericks v10.9.5, OS X Yosemite v10.10 and v10.10.1

  Impact: Multiple vulnerabilities in Intel graphics driver

  Description: Multiple vulnerabilities existed in the Intel graphics driver, the most serious of which may have led to arbitrary code execution with system privileges. This update addresses the issues through additional bounds checks.

  CVE-ID

  CVE-2014-8819 : Ian Beer of Google Project Zero

  CVE-2014-8820 : Ian Beer of Google Project Zero

  CVE-2014-8821 : Ian Beer of Google Project Zero

* **IOAcceleratorFamily**

  Available for: OS X Mountain Lion v10.8.5, OS X Mavericks v10.9.5, OS X Yosemite v10.10 and v10.10.1

  Impact: A malicious application may be able to execute arbitrary code with system privileges

  Description: A null pointer dereference existed in IOAcceleratorFamily's handling of certain IOService userclient types. This issue was addressed through improved validation of IOAcceleratorFamily contexts.

  CVE-ID

  CVE-2014-4486 : Ian Beer of Google Project Zero

* **IOHIDFamily**

  Available for: OS X Mountain Lion v10.8.5, OS X Mavericks v10.9.5, OS X Yosemite v10.10 and v10.10.1

  Impact: A malicious application may be able to execute arbitrary code with system privileges

  Description: A buffer overflow existed in IOHIDFamily. This issue was addressed with improved bounds checking.

  CVE-ID

  CVE-2014-4487 : TaiG Jailbreak Team

* **IOHIDFamily**

  Available for: OS X Mountain Lion v10.8.5, OS X Mavericks v10.9.5, OS X Yosemite v10.10 and v10.10.1

  Impact: A malicious application may be able to execute arbitrary code with system privileges

  Description: A validation issue existed in IOHIDFamily's handling of resource queue metadata. This issue was addressed through improved validation of metadata.

  CVE-ID

  CVE-2014-4488 : Apple

* **IOHIDFamily**

  Available for: OS X Mountain Lion v10.8.5, OS X Mavericks v10.9.5, OS X Yosemite v10.10 and v10.10.1

  Impact: A malicious application may be able to execute arbitrary code with system privileges

  Description: A null pointer dereference existed in IOHIDFamily's handling of event queues. This issue was addressed through improved validation of IOHIDFamily event queue initialization.

  CVE-ID

  CVE-2014-4489 : @beist

* **IOHIDFamily**

  Available for: OS X Mountain Lion v10.8.5, OS X Mavericks v10.9.5, OS X Yosemite v10.10 and v10.10.1

  Impact: Executing a malicious application may result in arbitrary code execution within the kernel

  Description: A bounds checking issue existed in a user client vended by the IOHIDFamily driver which allowed a malicious application to overwrite arbitrary portions of the kernel address space. The issue is addressed by removing the vulnerable user client method.

  CVE-ID

  CVE-2014-8822 : Vitaliy Toropov working with HP's Zero Day Initiative

* **IOKit**

  Available for: OS X Yosemite v10.10 and v10.10.1

  Impact: A malicious application may be able to execute arbitrary code with system privileges

  Description: An integer overflow existed in the handling of IOKit functions. This issue was addressed through improved validation of IOKit API arguments.

  CVE-ID

  CVE-2014-4389 : Ian Beer of Google Project Zero

* **IOUSBFamily**

  Available for: OS X Yosemite v10.10 and v10.10.1

  Impact: A privileged application may be able to read arbitrary data from kernel memory

  Description: A memory access issue existed in the handling of IOUSB controller user client functions. This issue was addressed through improved argument validation.

  CVE-ID

  CVE-2014-8823 : Ian Beer of Google Project Zero
* **Kerberos**

  Available for: OS X Mountain Lion v10.8.5, OS X Mavericks v10.9.5, OS X Yosemite v10.10 and v10.10.1

  Impact: A malicious application may be able to execute arbitrary code with system privileges

  Description: The Kerberos libgssapi library returned a context token with a dangling pointer. This issue was addressed by improving state management.

  CVE-ID

  CVE-2014-5352

* **Kernel**

  Available for: OS X Mountain Lion v10.8.5, OS X Mavericks v10.9.5, OS X Yosemite v10.10 and v10.10.1

  Impact: A malicious application may be able to execute arbitrary code with system privileges

  Description: Specifying a custom cache mode allowed writing to kernel read-only shared memory segments. This issue was addressed by not granting write permissions as a side-effect of some custom cache modes.

  CVE-ID

  CVE-2014-4495 : Ian Beer of Google Project Zero

* **Kernel**

  Available for: OS X Mountain Lion v10.8.5, OS X Mavericks v10.9.5, OS X Yosemite v10.10 and v10.10.1

  Impact: A malicious application may be able to execute arbitrary code with system privileges

  Description: A validation issue existed in the handling of certain metadata fields of IODataQueue objects. This issue was addressed through improved validation of metadata.

  CVE-ID

  CVE-2014-8824 : @PanguTeam

* **Kernel**

  Available for: OS X Yosemite v10.10 and v10.10.1

  Impact: A local attacker can spoof directory service responses to the kernel, elevate privileges, or gain kernel execution

  Description: Issues existed in identitysvc validation of the directory service resolving process, flag handling, and error handling. This issue was addressed through improved validation.

  CVE-ID

  CVE-2014-8825 : Alex Radocea of CrowdStrike

* **Kernel**

  Available for: OS X Yosemite v10.10 and v10.10.1

  Impact: A local user may be able to determine kernel memory layout

  Description: Multiple uninitialized memory issues existed in the network statistics interface, which led to the disclosure of kernel memory content. This issue was addressed through additional memory initialization.

  CVE-ID

  CVE-2014-4371 : Fermin J. Serna of the Google Security Team

  CVE-2014-4419 : Fermin J. Serna of the Google Security Team

  CVE-2014-4420 : Fermin J. Serna of the Google Security Team

  CVE-2014-4421 : Fermin J. Serna of the Google Security Team

* **Kernel**

  Available for: OS X Mavericks v10.9.5

  Impact: A person with a privileged network position may cause a denial of service

  Description: A race condition issue existed in the handling of IPv6 packets. This issue was addressed through improved lock state checking.

  CVE-ID

  CVE-2011-2391

* **Kernel**

  Available for: OS X Mountain Lion v10.8.5, OS X Mavericks v10.9.5, OS X Yosemite v10.10 and v10.10.1

  Impact: Maliciously crafted or compromised applications may be able to determine addresses in the kernel

  Description: An information disclosure issue existed in the handling of APIs related to kernel extensions. Responses containing an OSBundleMachOHeaders key may have included kernel addresses, which may aid in bypassing address space layout randomization protection. This issue was addressed by unsliding the addresses before returning them.

  CVE-ID

  CVE-2014-4491 : @PanguTeam, Stefan Esser

* **Kernel**

  Available for: OS X Mountain Lion v10.8.5, OS X Mavericks v10.9.5, OS X Yosemite v10.10 and v10.10.1

  Impact: A malicious application may be able to execute arbitrary code with system privileges

  Description: A validation issue existed in the handling of certain metadata fields of IOSharedDataQueue objects. This issue was addressed through relocation of the metadata.

  CVE-ID

  CVE-2014-4461 : @PanguTeam

* **LaunchServices**

  Available for: OS X Mountain Lion v10.8.5, OS X Mavericks v10.9.5, OS X Yosemite v10.10 and v10.10.1

  Impact: A malicious JAR file may bypass Gatekeeper checks

  Description: An issue existed in the handling of application launches which allowed certain malicious JAR files to bypass Gatekeeper checks. This issue was addressed through improved handling of file type metadata.

  CVE-ID

  CVE-2014-8826 : Hernan Ochoa of Amplia Security

* **libnetcore**

  Available for: OS X Mountain Lion v10.8.5, OS X Mavericks v10.9.5, OS X Yosemite v10.10 and v10.10.1

  Impact: A malicious, sandboxed app can compromise the networkd daemon

  Description: Multiple type confusion issues existed in networkd's handling of interprocess communication. By sending networkd a maliciously formatted message, it may have been possible to execute arbitrary code as the networkd process. The issue is addressed through additional type checking.

  CVE-ID

  CVE-2014-4492 : Ian Beer of Google Project Zero

* **LoginWindow**

  Available for: OS X Mountain Lion v10.8.5, OS X Mavericks v10.9.5, OS X Yosemite v10.10 and v10.10.1

  Impact: A Mac may not lock immediately upon wake

  Description: An issue existed in the rendering of the lock screen. This issue was address through improved screen rendering while locked.

  CVE-ID

  CVE-2014-8827 : Xavier Bertels of Mono, and multiple OS X seed testers

* **lukemftp**

  Available for: OS X Mountain Lion v10.8.5, OS X Mavericks v10.9.5, OS X Yosemite v10.10 and v10.10.1

  Impact: Using the command line ftp tool to fetch files from a malicious http server may lead to arbitrary code execution

  Description: A command injection issue existed in the handling of HTTP redirects. This issue was addressed through improved validation of special characters.

  CVE-ID

  CVE-2014-8517
* **ntpd**

  Available for: OS X Mountain Lion v10.8.5, OS X Mavericks v10.9.5, OS X Yosemite v10.10 and v10.10.1

  Impact: Using the ntp daemon with cryptographic authentication enabled may lead to information leaks

  Description: Multiple input validation issues existed in ntpd. These issues were addressed through improved data validation.

  CVE-ID

  CVE-2014-9297

* **OpenSSL**

  Available for: OS X Mountain Lion v10.8.5, OS X Mavericks v10.9.5, OS X Yosemite v10.10 and v10.10.1

  Impact: Multiple vulnerabilities in OpenSSL 0.9.8za, including one that may allow an attacker to downgrade connections to use weaker cipher-suites in applications using the library

  Description: Multiple vulnerabilities existed in OpenSSL 0.9.8za. These issues were addressed by updating OpenSSL to version 0.9.8zc.

  CVE-ID

  CVE-2014-3566

  CVE-2014-3567

  CVE-2014-3568

* **Sandbox**

  Available for: OS X Mountain Lion v10.8.5, OS X Mavericks v10.9.5

  Impact: A sandboxed process may be able to circumvent sandbox restrictions

  Description: A design issue existed in the caching of sandbox profiles which allowed sandboxed applications to gain write access to the cache. This issue was addressed by restricting write access to paths containing a “com.apple.sandbox” segment. This issue does not affect OS X Yosemite v10.10 or later.

  CVE-ID

  CVE-2014-8828 : Apple

* **SceneKit**

  Available for: OS X Mountain Lion v10.8.5, OS X Mavericks v10.9.5

  Impact: A malicious application could execute arbitrary code leading to compromise of user information

  Description: Multiple out of bounds write issues existed in SceneKit. These issues were addressed through improved bounds checking.

  CVE-ID

  CVE-2014-8829 : Jose Duart of the Google Security Team

* **SceneKit**

  Available for: OS X Mavericks v10.9.5, OS X Yosemite v10.10 and v10.10.1

  Impact: Viewing a maliciously crafted Collada file may lead to an unexpected application termination or arbitrary code execution

  Description: A heap buffer overflow existed in SceneKit’s handling of Collada files. Viewing a maliciously crafted Collada file may have led to an unexpected application termination or arbitrary code execution. This issue was addressed through improved validation of accessor elements.

  CVE-ID

  CVE-2014-8830 : Jose Duart of Google Security Team

* **Security**

  Available for: OS X Mavericks v10.9.5, OS X Yosemite v10.10 and v10.10.1

  Impact: A downloaded application signed with a revoked Developer ID certificate may pass Gatekeeper checks

  Description: An issue existed with how cached application certificate information was evaluated. This issue was addressed with cache logic improvements.

  CVE-ID

  CVE-2014-8838 : Apple

* **security\_taskgate**

  Available for: OS X Mavericks v10.9.5, OS X Yosemite v10.10 and v10.10.1

  Impact: An app may access keychain items belonging to other apps

  Description: An access control issue existed in the Keychain. Applications signed with self-signed or Developer ID certificates could access keychain items whose access control lists were based on keychain groups. This issue was addressed by validating the signing identity when granting access to keychain groups.

  CVE-ID

  CVE-2014-8831 : Apple

* **Spotlight**

  Available for: OS X Yosemite v10.10 and v10.10.1

  Impact: The sender of an email could determine the IP address of the recipient

  Description: Spotlight did not check the status of Mail’s "Load remote content in messages" setting. This issue was addressed by improving configuration checking.

  CVE-ID

  CVE-2014-8839 : John Whitehead of The New York Times, Frode Moe of LastFriday.no

* **Spotlight**

  Available for: OS X Mountain Lion v10.8.5, OS X Mavericks v10.9.5, OS X Yosemite v10.10 and v10.10.1

  Impact: Spotlight may save unexpected information to an external hard drive

  Description: An issue existed in Spotlight where memory contents may have been written to external hard drives when indexing. This issue was addressed with better memory management.

  CVE-ID

  CVE-2014-8832 : F-Secure

* **SpotlightIndex**

  Available for: OS X Yosemite v10.10 and v10.10.1

  Impact: Spotlight may display results for files not belonging to the user

  Description: A deserialization issue existed in Spotlight's handling of permission caches. A user performing a Spotlight query may have been shown search results referencing files for which they don't have sufficient privileges to read. This issue was addressed with improved bounds checking.

  CVE-ID

  CVE-2014-8833 : David J Peacock, Independent Technology Consultant

* **sysmond**

  Available for: OS X Mavericks v10.9.5, OS X Yosemite v10.10 and v10.10.1

  Impact: A malicious application may be able to execute arbitrary code with root privileges

  Description: A type confusion vulnerability existed in sysmond that allowed a local application to escalate privileges. The issue was addressed with improved type checking.

  CVE-ID

  CVE-2014-8835 : Ian Beer of Google Project Zero

* **UserAccountUpdater**

  Available for: OS X Yosemite v10.10 and v10.10.1

  Impact: Printing-related preference files may contain sensitive information about PDF documents

  Description: OS X Yosemite v10.10 addressed an issue in the handling of password-protected PDF files created from the Print dialog where passwords may have been included in printing preference files. This update removes such extraneous information that may have been present in printing preference files.

  CVE-ID

  CVE-2014-8834 : Apple

Note: OS X Yosemite 10.10.2 includes the [security content of Safari 8.0.3](https://support.apple.com/kb/HT204243).

Information about products not manufactured by Apple, or independent websites not controlled or tested by Apple, is provided without recommendation or endorsement. Apple assumes no responsibility with regard to the selection, performance, or use of third-party websites or products. Apple makes no representations regarding third-party website accuracy or reliability. [Contact the vendor](https://support.apple.com/103190) for additional information.

Published Date: December 15, 2023

Helpful?

Yes

No

Character limit:
250

Maximum character limit is 250.

Please don’t include any personal information in your comment.
Submit

Thanks for your feedback.

## Apple Footer

[
Apple](https://www.apple.com)

1. [Support](https://support.apple.com)
2. About the security content of OS X Yosemite v10.10.2 and Security Update 2015-001

[United States](https://support.apple.com/en-us/103323/localeselector "Choose your country or region")

Copyright © 2025 Apple Inc. All rights reserved.
 [Privacy Policy](https://www.apple.com/legal/privacy/en-ww/) [Terms of Use](https://www.apple.com/legal/internet-services/terms/site.html) [Sales and Refunds](https://www.apple.com/shop/goto/help/sales_refunds) [Site Map](https://www.apple.com/sitemap/)



=== Content from wiki.mozilla.org_73f8d6fa_20250126_081811.html ===


# BMO/UserGuide/BugFields

From MozillaWiki
< [BMO](/BMO "BMO")‎ | [UserGuide](/BMO/UserGuide "BMO/UserGuide")

[Jump to navigation](#mw-head)
[Jump to search](#searchInput)
## Bugzilla Field Descriptions

Alias
A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.Assignee
This is the person in charge of resolving the bug. Every time this field changes, the status changes to NEW to make it easy to see which new bugs have appeared on a person's list.Blocks
This bug must be resolved before the bugs listed in this field can be resolved.Bug ID
The numeric id of a bug, unique within this entire installation of Bugzilla.CC
Users who may not have a direct role to play on this bug, but who are interested in its progress.Changed
When this bug was last updated.Classification
Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorization.Comment
Bugs have comments added to them by Bugzilla users. You can search for some text in those comments.Comment Tag
Comments can have arbitrary tags added to them to help with filtering as well as mark comments as spam or abusive.Component
Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.Creation date
When the bug was filed.Depends on
The bugs listed here must be resolved before this bug can be resolved.Duplicates
List of bugs that have been marked a duplicate of the bug currently being viewed.Keywords
Keywords are a controlled vocabulary for characterizing bugs across Products and Components. Examples of this field are `regression`, `sec-high`, and `topcrash`. Bugzilla administrators manage [the list of keywords](https://bugzilla.mozilla.org/describekeywords.cgi). If you believe you need a new keyword, [please contact the administrators to discuss](https://bugzilla.mozilla.org/enter_bug.cgi?product=bugzilla.mozilla.org&component=Administration).Mentors
Mentors are users who have offered to help the bug owner with such tasks as setting up a development environment, finding relevant information to fixing the bug, how to submit a patch for review, and finally how to get the fix committed.Needinfo
More information has been requested from specific individuals, or anyone, to move the bug forward to completion.OS
This is the operating system against which the bug was reported.Platform
This is the hardware platform against which the bug was reported (ARM, ARM64, x86, x86\_64, etc).Priority

| Priority | Description |
| --- | --- |
| **--** | No decision |
| **P1** | Fix in the current release cycle |
| **P2** | Fix in the next release cycle or the following (nightly + 1 or nightly + 2) |
| **P3** | Backlog |
| **P4** | Do not use. This priority is for the Web Platform Test bot. |
| **P5** | Will not fix, but will accept a patch |

This field describes the importance and order in which a bug should be fixed compared to other bugs. This field is utilized by the programmers/engineers/release managers/managers to prioritize the work to be done. See the Firefox [triage documentation](https://firefox-source-docs.mozilla.org/bug-mgmt/policies/triage-bugzilla.html) and [priority definitions](https://firefox-source-docs.mozilla.org/bug-mgmt/guides/priority.html), or for the main Bugzilla project, [Bugzilla:Priority\_System](/Bugzilla%3APriority_System "Bugzilla:Priority System").Product
Bugs are categorised into Products and Components. Select a Classification to narrow down this list.QA Contact
The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.Rank
Used by some groups to provide finer-grained ordering for working on bugs than afforded by the Priority field. Use of this field is restricted to the `rank-setters` group.Regressed by
This bug has been introduced by the bugs listed here.Regressions
This bug has introduced the bugs listed here.Reporter
The person who filed this bug.See Also
This allows you to refer to bugs in other bug tracker installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with a comma. You should normally use this field to refer to bugs in other bug tracker installations, or bugs which are related to, but not known to be duplicates of the bug. Bugs which are regressions should be listed in the Regressed by field (above)Severity
This field describes the impact of a bug. This field is utilized by the programmers/engineers/release managers/managers to determine the severity of issues and used as input for the priority of the bug. It should not be set by people filing bugs. See the Firefox [triage documentation](https://firefox-source-docs.mozilla.org/bug-mgmt/policies/triage-bugzilla.html) and [severity documentation](https://firefox-source-docs.mozilla.org/bug-mgmt/guides/severity.html).

| Severity | Description |
| --- | --- |
| **--** | Default value for new bugs; bug triagers for components (ie engineers and other core project folks) are expected to update the bug's severity from this value. To avoid them missing new bugs for triage, do not alter this default when filing bugs. |
| **S1** | (Catastrophic) Blocks development/testing, may impact more than 25% of users, causes data loss, likely dot release driver, and no workaround available |
| **S2** | (Serious) Major functionality/product severely impaired or a high impact issue and a satisfactory workaround does not exist |
| **S3** | (Normal) Blocks non-critical functionality or a work around exists |
| **S4** | (Small/Trivial) minor significance, cosmetic issues, low or no impact to users |
| **N/A** | (Not Applicable) The above definitions do not apply to this bug; this value is reserved for bugs of type Task or Enhancement |

Summary
The bug summary is a short sentence which succinctly describes what the bug is about.Target Milestone
For Firefox-related bugs, when a change set (patch) lands in Mozilla-Central, the [sheriffs](/Sheriffing "Sheriffing") will set this field to the corresponding release value for the current Nightly.
Release status and tracking flags are used to mark intentions for when a fix or other patch should land.
If you need to track a bug against a set of milestones other than upcoming versions of Firefox, please tell the Bugzilla team, you may want a custom status flag.Triage Owner
User that is responsible [for triaging bugs in a specific component](https://firefox-source-docs.mozilla.org/bug-mgmt/policies/triage-bugzilla.html).Type
This field describes the [type of a bug](https://firefox-source-docs.mozilla.org/bug-mgmt/guides/bug-types.html).

| Type | Description |
| --- | --- |
| **defect** | regression, crash, hang, security vulnerability and any other general issue. |
| **enhancement** | new feature, improvement in UI, performance, etc. and any other request for user-facing changes and enhancements in the product; not engineering changes |
| **task** | refactoring, removal, replacement, enabling or disabling of functionality and any other engineering task |

URL
Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.Version
The version field defines the version of the software the bug was found in.Votes
Some bugs can be voted for, and you can limit your search to bugs with more than a certain number of votes. Votes are not used by Mozilla developers to set priorities.Whiteboard
Each bug has a free-form single line text entry box for adding tags and status information

Retrieved from "<https://wiki.mozilla.org/index.php?title=BMO/UserGuide/BugFields&oldid=1250790>"

## Navigation menu

### Personal tools

* [Log in](/index.php?title=Special:UserLogin&returnto=BMO%2FUserGuide%2FBugFields "You are encouraged to log in; however, it is not mandatory [o]")
* [Request account](/Special%3ARequestAccount "You are encouraged to create an account and log in; however, it is not mandatory")

### Namespaces

* [Page](/BMO/UserGuide/BugFields "View the content page [c]")
* [Discussion](/index.php?title=Talk:BMO/UserGuide/BugFields&action=edit&redlink=1 "Discussion about the content page (page does not exist) [t]")

English

### Views

* [Read](/BMO/UserGuide/BugFields)
* [View source](/index.php?title=BMO/UserGuide/BugFields&action=edit "This page is protected.
  You can view its source [e]")
* [View history](/index.php?title=BMO/UserGuide/BugFields&action=history "Past revisions of this page [h]")

More

### Search

### Navigation

* [Main page](/Main_Page "Visit the main page [z]")
* [Product releases](/Releases)
* [New pages](/Special%3ANewPages)
* [Recent changes](/Special%3ARecentChanges "A list of recent changes in the wiki [r]")
* [Recent uploads](/Special%3ANewFiles)
* [Random page](/Special%3ARandom "Load a random page [x]")
* [Help](/MozillaWiki%3AHelp "The place to find out")

### How to Contribute

* [All-hands meeting](/WeeklyUpdates)
* [Other meetings](/Community_Calendar)
* [Contribute to Mozilla](/Contribute)
* [Community Portal](//community.mozilla.org)
* [Community Participation Guidelines](//www.mozilla.org/en-US/about/governance/policies/participation/)

### MozillaWiki

* [About](/MozillaWiki%3AAbout)
* [Team](/MozillaWiki%3ATeam)
* [Policies](/MozillaWiki%3APolicies)
* [Report a wiki bug](//bugzilla.mozilla.org/enter_bug.cgi?product=Websites&component=wiki.mozilla.org)

### Around Mozilla

* [Mozilla Support](//support.mozilla.org/)
* [Mozilla Developer Network](//developer.mozilla.org/)
* [Planet Mozilla](//planet.mozilla.org/)
* [Mozilla Blog](//blog.mozilla.org/)
* [Research](//www.mozilla.org/research/)

### Tools

* [What links here](/Special%3AWhatLinksHere/BMO/UserGuide/BugFields "A list of all wiki pages that link here [j]")
* [Related changes](/Special%3ARecentChangesLinked/BMO/UserGuide/BugFields "Recent changes in pages linked from this page [k]")
* [Special pages](/Special%3ASpecialPages "A list of all special pages [q]")
* Printable version
* [Permanent link](/index.php?title=BMO/UserGuide/BugFields&oldid=1250790 "Permanent link to this revision of this page")
* [Page information](/index.php?title=BMO/UserGuide/BugFields&action=info "More information about this page")

* This page was last edited on 14 May 2024, at 14:22.

* [Privacy policy](/MozillaWiki%3APrivacy_policy)
* [About MozillaWiki](/MozillaWiki%3AAbout)
* [Mobile view](https://wiki.mozilla.org/index.php?title=BMO/UserGuide/BugFields&mobileaction=toggle_view_mobile)

* [![Powered by MediaWiki](/resources/assets/poweredby_mediawiki_88x31.png)](https://www.mediawiki.org/)



=== Content from www.reddit.com_2cb9241a_20250125_115024.html ===

[Skip to main content](#main-content)

### We value your privacy

Reddit and its partners use cookies and similar technologies to provide you with a better experience. By accepting all cookies, you agree to our use of cookies to deliver and maintain our services and site, improve the quality of Reddit, personalize Reddit content and advertising, and measure the effectiveness of advertising. By rejecting non-essential cookies, Reddit may still use certain cookies to ensure the proper functionality of our platform.
For more information, please see our
[Cookie Notice](https://reddit.com/en-us/policies/cookies)
and our
[Privacy Policy](https://reddit.com/en-us/policies/privacy-policy).

Open menu

Open navigation
Go to Reddit Home

r/netsec

A chip

A close button

Get App

Get the Reddit app

[Log In](https://www.reddit.com/login/)Log in to Reddit

Expand user menu
Open settings menu

[![r/netsec icon](https://styles.redditmedia.com/t5_1rqwi/styles/communityIcon_ldtzxmwbf8e91.png)

Go to netsec](/r/netsec/)

[r/netsec](/r/netsec/)
![r/netsec icon](https://styles.redditmedia.com/t5_1rqwi/styles/communityIcon_ldtzxmwbf8e91.png)

[r/netsec](/r/netsec/)

/r/netsec is a community-curated aggregator of technical information security content. Our mission is to extract signal from the noise — to provide value to security practitioners, students, researchers, and hackers everywhere.
‎

---

Members

Online

•

[credditz0rz](/user/credditz0rz/)

ADMIN

MOD

# Apple CoreGraphics framework on OS X 10.10 is logging input data in Mozilla products to /tmp directory

**Top 1%**
[Rank by size](https://www.reddit.com/best/communities/6/#t5_1rqwi/)

 Public

Anyone can view, post, and comment to this community

## Top Posts

---

* [Reddit

  reReddit: Top posts of December 5, 2014

  ---](https://www.reddit.com/posts/2014/december-5-1/)
* [Reddit

  reReddit: Top posts of December 2014

  ---](https://www.reddit.com/posts/2014/december/)
* [Reddit

  reReddit: Top posts of 2014

  ---](https://www.reddit.com/posts/2014/)

- &nbsp;

---

- TOPICS

- Internet Culture (Viral)

* [Amazing](https://reddit.com/t/amazing/)

* [Animals & Pets](https://reddit.com/t/animals_and_pets/)

* [Cringe & Facepalm](https://reddit.com/t/cringe_and_facepalm/)

* [Funny](https://reddit.com/t/funny/)

* [Interesting](https://reddit.com/t/interesting/)

* [Memes](https://reddit.com/t/memes/)

* [Oddly Satisfying](https://reddit.com/t/oddly_satisfying/)

* [Reddit Meta](https://reddit.com/t/reddit_meta/)

* [Wholesome & Heartwarming](https://reddit.com/t/wholesome_and_heartwarming/)

- Games

* [Action Games](https://reddit.com/t/action_games/)

* [Adventure Games](https://reddit.com/t/adventure_games/)

* [Esports](https://reddit.com/t/esports/)

* [Gaming Consoles & Gear](https://reddit.com/t/gaming_consoles_and_gear/)

* [Gaming News & Discussion](https://reddit.com/t/gaming_news_and_discussion/)

* [Mobile Games](https://reddit.com/t/mobile_games/)

* [Other Games](https://reddit.com/t/other_games/)

* [Role-Playing Games](https://reddit.com/t/role_playing_games/)

* [Simulation Games](https://reddit.com/t/simulation_games/)

* [Sports & Racing Games](https://reddit.com/t/sports_and_racing_games/)

* [Strategy Games](https://reddit.com/t/strategy_games/)

* [Tabletop Games](https://reddit.com/t/tabletop_games/)

- Q&As

* [Q&As](https://reddit.com/t/q_and_as/)

* [Stories & Confessions](https://reddit.com/t/stories_and_confessions/)

- Technology

* [3D Printing](https://reddit.com/t/3d_printing/)

* [Artificial Intelligence & Machine Learning](https://reddit.com/t/artificial_intelligence_and_machine_learning/)

* [Computers & Hardware](https://reddit.com/t/computers_and_hardware/)

* [Consumer Electronics](https://reddit.com/t/consumer_electronics/)

* [DIY Electronics](https://reddit.com/t/diy_electronics/)

* [Programming](https://reddit.com/t/programming/)

* [Software & Apps](https://reddit.com/t/software_and_apps/)

* [Streaming Services](https://reddit.com/t/streaming_services/)

* [Tech News & Discussion](https://reddit.com/t/tech_news_and_discussion/)

* [Virtual & Augmented Reality](https://reddit.com/t/virtual_and_augmented_reality/)

- Pop Culture

* [Celebrities](https://reddit.com/t/celebrities/)

* [Creators & Influencers](https://reddit.com/t/creators_and_influencers/)

* [Generations & Nostalgia](https://reddit.com/t/generations_and_nostalgia/)

* [Podcasts](https://reddit.com/t/podcasts/)

* [Streamers](https://reddit.com/t/streamers/)

* [Tarot & Astrology](https://reddit.com/t/tarot_and_astrology/)

- Movies & TV

* [Action Movies & Series](https://reddit.com/t/action_movies_and_series/)

* [Animated Movies & Series](https://reddit.com/t/animated_movies_and_series/)

* [Comedy Movies & Series](https://reddit.com/t/comedy_movies_and_series/)

* [Crime, Mystery, & Thriller Movies & Series](https://reddit.com/t/crime_mystery_and_thriller_movies_and_series/)

* [Documentary Movies & Series](https://reddit.com/t/documentary_movies_and_series/)

* [Drama Movies & Series](https://reddit.com/t/drama_movies_and_series/)

* [Fantasy Movies & Series](https://reddit.com/t/fantasy_movies_and_series/)

* [Horror Movies & Series](https://reddit.com/t/horror_movies_and_series/)

* [Movie News & Discussion](https://reddit.com/t/movie_news_and_discussion/)

* [Reality TV](https://reddit.com/t/reality_tv/)

* [Romance Movies & Series](https://reddit.com/t/romance_movies_and_series/)

* [Sci-Fi Movies & Series](https://reddit.com/t/scifi_movies_and_series/)

* [Superhero Movies & Series](https://reddit.com/t/superhero_movies_and_series/)

* [TV News & Discussion](https://reddit.com/t/tv_news_and_discussion/)

---

- RESOURCES

- [About Reddit](https://www.redditinc.com)
 - [Advertise](https://accounts.reddit.com/adsregister?utm_source=web3x_consumer&utm_name=left_nav_cta)
 - [Help](https://support.reddithelp.com/hc?utm_source=reddit&utm_medium=footer&utm_campaign=evergreen)
 - [Blog](https://redditblog.com/)
 - [Careers](https://www.redditinc.com/careers)
 - [Press](https://www.redditinc.com/press)

---

 - [Communities](https://www.reddit.com/best/communities/1/)
 - [Best of Reddit](https://www.reddit.com/posts/2025/global/)
 - [Topics](https://www.reddit.com/topics/a-1/)

---

 - [Reddit Rules](https://www.redditinc.com/policies/content-policy)
 - [Privacy Policy](https://www.reddit.com/policies/privacy-policy)
 - [User Agreement](https://www.redditinc.com/policies/user-agreement)

[Reddit, Inc. © 2025. All rights reserved.](https://redditinc.com)

close

# Don’t miss a thing from Reddit!

I agree to get emails about cool stuff on Reddit

Continue

close

# Log In

By continuing, you agree to our
[User Agreement](https://www.redditinc.com/policies/user-agreement)
and acknowledge that you understand the
[Privacy Policy](https://www.redditinc.com/policies/privacy-policy).

Continue with phone number

---

OR

---

Email or username

Password

Forgot password?

New to Reddit?
Sign Up

Log In

back

# Enter the 6-digit code from your authenticator app

You’ve set up two-factor authentication for this account.

Verification code

Lost access to your authenticator?
Use a backup code

Check code

back

# Enter a 6-digit backup code

You’ve set up two-factor authentication for this account.

Backup code

Don’t have access to your backup code?
Use a code from an authenticator app

Check code

close

# Sign Up

By continuing, you agree to our
[User Agreement](https://www.redditinc.com/policies/user-agreement)
and acknowledge that you understand the
[Privacy Policy](https://www.redditinc.com/policies/privacy-policy).

I agree to get emails about cool stuff on Reddit

Email

Already a redditor?
Log In

Continue

back

Skip

# Verify your email

Enter the 6-digit code we sent to

Verification code

Didn't get an email?
Resend

Continue

back

# Create your username and password

Reddit is anonymous, so your username is what you’ll go by here. Choose wisely—because once you get a name, you can’t change it.

Username

Password

Continue

close

# Sign Up

By continuing, you agree to our
[User Agreement](https://www.redditinc.com/policies/user-agreement)
and acknowledge that you understand the
[Privacy Policy](https://www.redditinc.com/policies/privacy-policy).

I agree to get emails about cool stuff on Reddit

Continue with phone number

---

OR

---

Email

Already a redditor?
Log In

Continue

back

Skip

# Verify your email

Enter the 6-digit code we sent to

Verification code

Didn't get an email?
Resend

Continue

back

# Create your username and password

Reddit is anonymous, so your username is what you’ll go by here. Choose wisely—because once you get a name, you can’t change it.

Username

Password

Continue

close

back

# Reset your password

Enter your email address or username and we’ll send you a link to reset your password

Email or username

[Need help?](https://reddithelp.com/hc/sections/360008917491-Account-Security)

Reset password

close

back

# Check your inbox

An email with a link to reset your password was sent to the email address associated with your account

Didn't get an email?

Resend

close

# Choose a Reddit account to continue

back

close

# Reset your password

New password

Confirm new password

Resetting your password will log you out on all devices.

Continue



=== Content from blog.mozilla.org_214f5ef1_20250126_081819.html ===

[Skip to content](#content)

[Mozilla](https://blog.mozilla.org/en/)

![search](https://blog.mozilla.org/wp-content/themes/foxtail/assets/images/icons/search.svg)

* [Internet Culture](https://blog.mozilla.org/en/category/internet-culture/)
  + [Deep Dives](https://blog.mozilla.org/en/category/internet-culture/deep-dives/)
  + [Mozilla Explains](https://blog.mozilla.org/en/category/internet-culture/mozilla-explains/)
  + [Interviews](https://blog.mozilla.org/en/category/internet-culture/interviews/)
  + [Videos](https://blog.mozilla.org/en/category/videos/)
* [Privacy & Security](https://blog.mozilla.org/en/category/privacy-security/)
* [Products](https://blog.mozilla.org/en/category/products/)
  + [Firefox](https://blog.mozilla.org/en/category/products/firefox/)
  + [Pocket](https://blog.mozilla.org/en/category/products/pocket/)
  + [Mozilla VPN](https://blog.mozilla.org/en/category/products/mozilla-vpn/)
* [Mozilla](https://blog.mozilla.org/en/category/mozilla/)
  + [News](https://blog.mozilla.org/en/category/mozilla/news/)
  + [Internet Policy](https://blog.mozilla.org/en/category/mozilla/internet-policy/)
  + [Leadership](https://blog.mozilla.org/en/category/mozilla/leadership/)
    - [Mitchell Baker, CEO](https://blog.mozilla.org/en/author/mitchellmozillacom/)
    - [Mark Surman, ED Foundation](https://blog.mozilla.org/en/author/markmozillafoundation-org/)
    - [Eric Rescorla, Firefox CTO](https://blog.mozilla.org/en/author/ekrmozilla-com/)

[Download Firefox](https://www.mozilla.org/firefox/new/?utm_source=blog.mozilla.org&utm_medium=referral&utm_campaign=blog-nav)

![search](https://blog.mozilla.org/wp-content/themes/foxtail/assets/images/icons/search.svg)

#### Search

Search for:

![](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2019/01/mozilla-logo-bw-rgb.png)
## News

Official announcements and press releases

[![Room filled with people listening to a speaker on stage. Demo Day visual image in the background.](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/12/Demo_Day_Blog_Header_-1-800x800.jpg)
Mozilla
## Mozilla Builders: Celebrating community-driven innovation in AI

Read More](https://blog.mozilla.org/en/mozilla/mozilla-builders-demo-day/)

[![The Mozilla logo in green on a black background](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/12/logo-lockup-video-poster-800x800.png)
Mozilla
## Mozilla welcomes new executive team members

Read More](https://blog.mozilla.org/en/mozilla/new-executives/)

[![Decorative image of wrapped gifts in front of an iphone](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2023/11/moz_header_holiday_firefox-phone-gifts_blue-03.png-800x800.png)
Products
## Shopping for everyone? We’ve got you covered with the Fakespot Holiday Gift Guide 2024

Read More](https://blog.mozilla.org/en/products/shopping-for-everyone-weve-got-you-covered-with-the-fakespot-holiday-gift-guide-2024/)

[![Text: Mozilla Builders](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/06/Blog-16_9-1920x1080-1-800x800.png)
Mozilla
## 14 AI projects to watch: Mozilla’s first Builders Accelerator cohort kicks off

Read More](https://blog.mozilla.org/en/mozilla/14-ai-projects-to-watch-mozillas-first-builders-accelerator-cohort-kicks-off/)

[![A check mark next to the text "Fakespot."](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2023/07/Fakespot_ProductBlog-2-800x800.jpg)
News
## Fakespot’s guide to trending back-to-school products

Read More](https://blog.mozilla.org/en/mozilla/news/fakespots-guide-to-trending-back-to-school-products/)

[![](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/06/IG_Highlights_Icon-800x800.png)
Mozilla
## BAFTA Award-Winner Siobhán McSweeney to host Mozilla’s 2nd Annual Rise25 Awards in Dublin, Ireland on Aug. 13

Read More](https://blog.mozilla.org/en/mozilla/bafta-award-winner-siobhan-mcsweeney-to-host-mozillas-2nd-annual-rise25-awards-in-dublin-ireland-on-august-13/)

[![](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/05/fx_website_meta-image_tips-tricks_alt-04-1-800x800.webp)
Mozilla
## Here’s what we’re working on in Firefox

Read More](https://blog.mozilla.org/en/mozilla/heres-what-were-working-on-in-firefox/)

[![A check mark next to the text "Fakespot."](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2023/07/Fakespot_ProductBlog-2-800x800.jpg)
News
## Fakespot reveals the product categories with the most and least reliable product reviews

Read More](https://blog.mozilla.org/en/mozilla/news/fakespot-reveals-the-product-categories-with-the-most-and-least-reliable-product-reviews-for-summer-and-back-to-school-shopping/)

[![A dark blue speech bubble with horizontal purple and red bars on a pink background.](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2020/03/fx_blog_header_announcements_001_1920x1080-800x800.jpg)
Firefox
## Engaging with our Firefox community: Highlights from our recent AMA

Read More](https://blog.mozilla.org/en/products/firefox/engaging-with-our-firefox-community-highlights-from-our-recent-ama/)

[![](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/06/IG_Highlights_Icon-800x800.png)
Mozilla
## Mozilla announces finalists for the 2nd annual Rise25 Awards

Read More](https://blog.mozilla.org/en/mozilla/mozilla-announces-finalists-for-the-2nd-annual-rise25-awards/)

[![Mozilla and Anonym logos](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/06/blog_1200x800_v2-800x800.png)
Mozilla
## Introducing Anonym: Raising the bar for privacy-preserving digital advertising

Read More](https://blog.mozilla.org/en/mozilla/mozilla-anonym-raising-the-bar-for-privacy-preserving-digital-advertising/)

[![logo - zero with a diagonal line through it, and the letters D, I, N](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/06/odintbanner-500x500.png)
Mozilla
## Keeping GenAI technologies secure is a shared responsibility

Read More](https://blog.mozilla.org/en/mozilla/keeping-genai-technologies-secure-is-a-shared-responsibility/)

1
[2](https://blog.mozilla.org/en/category/mozilla/news/page/2?utm_source=www.mozilla)
[3](https://blog.mozilla.org/en/category/mozilla/news/page/3?utm_source=www.mozilla)
…
[24](https://blog.mozilla.org/en/category/mozilla/news/page/24?utm_source=www.mozilla)
[next](https://blog.mozilla.org/en/category/mozilla/news/page/2?utm_source=www.mozilla)

![newsletter](https://blog.mozilla.org/wp-content/themes/foxtail/assets/images/newsletter.png)

### Keep up with all things Firefox

Get how-tos, advice and news to make your Firefox experience work best for you.

Your e-mail address

Country
- select -
Afghanistan
Akrotiri
Albania
Algeria
American Samoa
Andorra
Angola
Anguilla
Antarctica
Antigua and Barbuda
Argentina
Armenia
Aruba
Ashmore and Cartier Islands
Australia
Austria
Azerbaijan
Bahamas, The
Bahrain
Baker Island
Bangladesh
Barbados
Bassas da India
Belarus
Belgium
Belize
Benin
Bermuda
Bhutan
Bolivia
Bonaire, Sint Eustatius, and Saba
Bosnia and Herzegovina
Botswana
Bouvet Island
Brazil
British Indian Ocean Territory
Brunei
Bulgaria
Burkina Faso
Burma
Burundi
Cabo Verde
Cambodia
Cameroon
Canada
Cayman Islands
Central African Republic
Chad
Chile
China
Christmas Island
Clipperton Island
Cocos (Keeling) Islands
Colombia
Comoros
Congo (Brazzaville)
Congo (Kinshasa)
Cook Islands
Coral Sea Islands
Costa Rica
Croatia
Cuba
Curaçao
Cyprus
Czech Republic
Côte d’Ivoire
Denmark
Dhekelia
Diego Garcia
Djibouti
Dominica
Dominican Republic
Ecuador
Egypt
El Salvador
Equatorial Guinea
Eritrea
Estonia
Ethiopia
Europa Island
Falkland Islands (Islas Malvinas)
Faroe Islands
Fiji
Finland
France
French Guiana
French Polynesia
French Southern and Antarctic Lands
Gabon
Gambia, The
Gaza Strip
Georgia
Germany
Ghana
Gibraltar
Glorioso Islands
Greece
Greenland
Grenada
Guadeloupe
Guam
Guatemala
Guernsey
Guinea
Guinea-Bissau
Guyana
Haiti
Heard Island and McDonald Islands
Honduras
Hong Kong
Howland Island
Hungary
Iceland
India
Indonesia
Iran
Iraq
Ireland
Isle of Man
Israel
Italy
Jamaica
Jan Mayen
Japan
Jarvis Island
Jersey
Johnston Atoll
Jordan
Juan de Nova Island
Kazakhstan
Kenya
Kingman Reef
Kiribati
Korea, North
Korea, South
Kosovo
Kuwait
Kyrgyzstan
Laos
Latvia
Lebanon
Lesotho
Liberia
Libya
Liechtenstein
Lithuania
Luxembourg
Macau
Macedonia
Madagascar
Malawi
Malaysia
Maldives
Mali
Malta
Marshall Islands
Martinique
Mauritania
Mauritius
Mayotte
Mexico
Micronesia, Federated States of
Midway Islands
Moldova
Monaco
Mongolia
Montenegro
Montserrat
Morocco
Mozambique
Namibia
Nauru
Navassa Island
Nepal
Netherlands
New Caledonia
New Zealand
Nicaragua
Niger
Nigeria
Niue
Norfolk Island
Northern Mariana Islands
Norway
Oman
Pakistan
Palau
Palmyra Atoll
Panama
Papua New Guinea
Paracel Islands
Paraguay
Peru
Philippines
Pitcairn Islands
Poland
Portugal
Puerto Rico
Qatar
Reunion
Romania
Russia
Rwanda
Saint Barthelemy
Saint Helena, Ascension, and Tristan da Cunha
Saint Kitts and Nevis
Saint Lucia
Saint Martin
Saint Pierre and Miquelon
Saint Vincent and the Grenadines
Samoa
San Marino
Sao Tome and Principe
Saudi Arabia
Senegal
Serbia
Seychelles
Sierra Leone
Singapore
Sint Maarten
Slovakia
Slovenia
Solomon Islands
Somalia
South Africa
South Georgia and South Sandwich Islands
South Sudan
Spain
Spratly Islands
Sri Lanka
Sudan
Suriname
Svalbard
Swaziland
Sweden
Switzerland
Syria
Taiwan
Tajikistan
Tanzania
Thailand
Timor-Leste
Togo
Tokelau
Tonga
Trinidad and Tobago
Tromelin Island
Tunisia
Turkey
Turkmenistan
Turks and Caicos Islands
Tuvalu
Uganda
Ukraine
United Arab Emirates
United Kingdom
United States
Uruguay
Uzbekistan
Vanuatu
Vatican City
Venezuela
Vietnam
Virgin Islands, British
Virgin Islands, U.S.
Wake Island
Wallis and Futuna
West Bank
Western Sahara
Yemen
Zambia
Zimbabwe

Language
English
Bahasa Indonesia
Deutsch
Español
Français
Polski
Português
Русский
正體中文

Format

 HTML

 Text

I’m okay with Mozilla handling my info as explained in this [Privacy Policy](https://www.mozilla.org/privacy/).

Sign up now
We will only send you
Mozilla-related information.

## Thanks!

If you haven’t previously confirmed a subscription to a Mozilla-related newsletter you may have to do so. Please check your inbox or your spam filter for an e-mail from us.

[Mozilla](https://www.mozilla.org/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)

##### Mozilla

* [About](https://www.mozilla.org/about/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Contact Us](https://www.mozilla.org/contact/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Donate](https://donate.mozilla.org/?presets=50,30,20,10&amount=30¤cy=usd&utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)

##### Firefox

* [Download Firefox](https://www.mozilla.org/firefox/new/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Desktop](https://www.mozilla.org/firefox/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Mobile](https://www.mozilla.org/firefox/mobile/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Features](https://www.mozilla.org/firefox/features/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Beta, Nightly, Developer Edition](https://www.mozilla.org/firefox/channel/desktop/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)

##### Resources

* [Privacy Hub](https://www.mozilla.org/privacy/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Browser Comparison](https://www.mozilla.org/firefox/browsers/compare/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Brand Standards](https://mozilla.design/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)

##### Social

Follow @Firefox

* [Twitter (@mozilla)](https://twitter.com/firefox)
* [Instagram (@mozilla)](https://www.instagram.com/firefox/)
* [YouTube (@firefoxchannel)](https://www.youtube.com/user/firefoxchannel)

Follow @Mozilla

* [Twitter (@mozilla)](https://twitter.com/mozilla)
* [Instagram (@mozilla)](https://www.instagram.com/mozilla/)

* [Website Privacy Notice](https://www.mozilla.org/privacy/websites/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Legal](https://www.mozilla.org/about/legal/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)



=== Content from blog.mozilla.org_a1905f2a_20250126_081814.html ===

[Skip to content](#content)

[Mozilla](https://blog.mozilla.org/en/)

![search](https://blog.mozilla.org/wp-content/themes/foxtail/assets/images/icons/search.svg)

* [Internet Culture](https://blog.mozilla.org/en/category/internet-culture/)
  + [Deep Dives](https://blog.mozilla.org/en/category/internet-culture/deep-dives/)
  + [Mozilla Explains](https://blog.mozilla.org/en/category/internet-culture/mozilla-explains/)
  + [Interviews](https://blog.mozilla.org/en/category/internet-culture/interviews/)
  + [Videos](https://blog.mozilla.org/en/category/videos/)
* [Privacy & Security](https://blog.mozilla.org/en/category/privacy-security/)
* [Products](https://blog.mozilla.org/en/category/products/)
  + [Firefox](https://blog.mozilla.org/en/category/products/firefox/)
  + [Pocket](https://blog.mozilla.org/en/category/products/pocket/)
  + [Mozilla VPN](https://blog.mozilla.org/en/category/products/mozilla-vpn/)
* [Mozilla](https://blog.mozilla.org/en/category/mozilla/)
  + [News](https://blog.mozilla.org/en/category/mozilla/news/)
  + [Internet Policy](https://blog.mozilla.org/en/category/mozilla/internet-policy/)
  + [Leadership](https://blog.mozilla.org/en/category/mozilla/leadership/)
    - [Mitchell Baker, CEO](https://blog.mozilla.org/en/author/mitchellmozillacom/)
    - [Mark Surman, ED Foundation](https://blog.mozilla.org/en/author/markmozillafoundation-org/)
    - [Eric Rescorla, Firefox CTO](https://blog.mozilla.org/en/author/ekrmozilla-com/)

[Download Firefox](https://www.mozilla.org/firefox/new/?utm_source=blog.mozilla.org&utm_medium=referral&utm_campaign=blog-nav)

![search](https://blog.mozilla.org/wp-content/themes/foxtail/assets/images/icons/search.svg)

#### Search

Search for:

![](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2019/01/mozilla-logo-bw-rgb.png)
## News

Official announcements and press releases

[![Room filled with people listening to a speaker on stage. Demo Day visual image in the background.](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/12/Demo_Day_Blog_Header_-1-800x800.jpg)
Mozilla
## Mozilla Builders: Celebrating community-driven innovation in AI

Read More](https://blog.mozilla.org/en/mozilla/mozilla-builders-demo-day/)

[![The Mozilla logo in green on a black background](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/12/logo-lockup-video-poster-800x800.png)
Mozilla
## Mozilla welcomes new executive team members

Read More](https://blog.mozilla.org/en/mozilla/new-executives/)

[![Decorative image of wrapped gifts in front of an iphone](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2023/11/moz_header_holiday_firefox-phone-gifts_blue-03.png-800x800.png)
Products
## Shopping for everyone? We’ve got you covered with the Fakespot Holiday Gift Guide 2024

Read More](https://blog.mozilla.org/en/products/shopping-for-everyone-weve-got-you-covered-with-the-fakespot-holiday-gift-guide-2024/)

[![Text: Mozilla Builders](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/06/Blog-16_9-1920x1080-1-800x800.png)
Mozilla
## 14 AI projects to watch: Mozilla’s first Builders Accelerator cohort kicks off

Read More](https://blog.mozilla.org/en/mozilla/14-ai-projects-to-watch-mozillas-first-builders-accelerator-cohort-kicks-off/)

[![A check mark next to the text "Fakespot."](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2023/07/Fakespot_ProductBlog-2-800x800.jpg)
News
## Fakespot’s guide to trending back-to-school products

Read More](https://blog.mozilla.org/en/mozilla/news/fakespots-guide-to-trending-back-to-school-products/)

[![](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/06/IG_Highlights_Icon-800x800.png)
Mozilla
## BAFTA Award-Winner Siobhán McSweeney to host Mozilla’s 2nd Annual Rise25 Awards in Dublin, Ireland on Aug. 13

Read More](https://blog.mozilla.org/en/mozilla/bafta-award-winner-siobhan-mcsweeney-to-host-mozillas-2nd-annual-rise25-awards-in-dublin-ireland-on-august-13/)

[![](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/05/fx_website_meta-image_tips-tricks_alt-04-1-800x800.webp)
Mozilla
## Here’s what we’re working on in Firefox

Read More](https://blog.mozilla.org/en/mozilla/heres-what-were-working-on-in-firefox/)

[![A check mark next to the text "Fakespot."](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2023/07/Fakespot_ProductBlog-2-800x800.jpg)
News
## Fakespot reveals the product categories with the most and least reliable product reviews

Read More](https://blog.mozilla.org/en/mozilla/news/fakespot-reveals-the-product-categories-with-the-most-and-least-reliable-product-reviews-for-summer-and-back-to-school-shopping/)

[![A dark blue speech bubble with horizontal purple and red bars on a pink background.](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2020/03/fx_blog_header_announcements_001_1920x1080-800x800.jpg)
Firefox
## Engaging with our Firefox community: Highlights from our recent AMA

Read More](https://blog.mozilla.org/en/products/firefox/engaging-with-our-firefox-community-highlights-from-our-recent-ama/)

[![](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/06/IG_Highlights_Icon-800x800.png)
Mozilla
## Mozilla announces finalists for the 2nd annual Rise25 Awards

Read More](https://blog.mozilla.org/en/mozilla/mozilla-announces-finalists-for-the-2nd-annual-rise25-awards/)

[![Mozilla and Anonym logos](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/06/blog_1200x800_v2-800x800.png)
Mozilla
## Introducing Anonym: Raising the bar for privacy-preserving digital advertising

Read More](https://blog.mozilla.org/en/mozilla/mozilla-anonym-raising-the-bar-for-privacy-preserving-digital-advertising/)

[![logo - zero with a diagonal line through it, and the letters D, I, N](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/06/odintbanner-500x500.png)
Mozilla
## Keeping GenAI technologies secure is a shared responsibility

Read More](https://blog.mozilla.org/en/mozilla/keeping-genai-technologies-secure-is-a-shared-responsibility/)

1
[2](https://blog.mozilla.org/en/category/mozilla/news/page/2?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=compa)
[3](https://blog.mozilla.org/en/category/mozilla/news/page/3?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=compa)
…
[24](https://blog.mozilla.org/en/category/mozilla/news/page/24?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=compa)
[next](https://blog.mozilla.org/en/category/mozilla/news/page/2?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=compa)

![newsletter](https://blog.mozilla.org/wp-content/themes/foxtail/assets/images/newsletter.png)

### Keep up with all things Firefox

Get how-tos, advice and news to make your Firefox experience work best for you.

Your e-mail address

Country
- select -
Afghanistan
Akrotiri
Albania
Algeria
American Samoa
Andorra
Angola
Anguilla
Antarctica
Antigua and Barbuda
Argentina
Armenia
Aruba
Ashmore and Cartier Islands
Australia
Austria
Azerbaijan
Bahamas, The
Bahrain
Baker Island
Bangladesh
Barbados
Bassas da India
Belarus
Belgium
Belize
Benin
Bermuda
Bhutan
Bolivia
Bonaire, Sint Eustatius, and Saba
Bosnia and Herzegovina
Botswana
Bouvet Island
Brazil
British Indian Ocean Territory
Brunei
Bulgaria
Burkina Faso
Burma
Burundi
Cabo Verde
Cambodia
Cameroon
Canada
Cayman Islands
Central African Republic
Chad
Chile
China
Christmas Island
Clipperton Island
Cocos (Keeling) Islands
Colombia
Comoros
Congo (Brazzaville)
Congo (Kinshasa)
Cook Islands
Coral Sea Islands
Costa Rica
Croatia
Cuba
Curaçao
Cyprus
Czech Republic
Côte d’Ivoire
Denmark
Dhekelia
Diego Garcia
Djibouti
Dominica
Dominican Republic
Ecuador
Egypt
El Salvador
Equatorial Guinea
Eritrea
Estonia
Ethiopia
Europa Island
Falkland Islands (Islas Malvinas)
Faroe Islands
Fiji
Finland
France
French Guiana
French Polynesia
French Southern and Antarctic Lands
Gabon
Gambia, The
Gaza Strip
Georgia
Germany
Ghana
Gibraltar
Glorioso Islands
Greece
Greenland
Grenada
Guadeloupe
Guam
Guatemala
Guernsey
Guinea
Guinea-Bissau
Guyana
Haiti
Heard Island and McDonald Islands
Honduras
Hong Kong
Howland Island
Hungary
Iceland
India
Indonesia
Iran
Iraq
Ireland
Isle of Man
Israel
Italy
Jamaica
Jan Mayen
Japan
Jarvis Island
Jersey
Johnston Atoll
Jordan
Juan de Nova Island
Kazakhstan
Kenya
Kingman Reef
Kiribati
Korea, North
Korea, South
Kosovo
Kuwait
Kyrgyzstan
Laos
Latvia
Lebanon
Lesotho
Liberia
Libya
Liechtenstein
Lithuania
Luxembourg
Macau
Macedonia
Madagascar
Malawi
Malaysia
Maldives
Mali
Malta
Marshall Islands
Martinique
Mauritania
Mauritius
Mayotte
Mexico
Micronesia, Federated States of
Midway Islands
Moldova
Monaco
Mongolia
Montenegro
Montserrat
Morocco
Mozambique
Namibia
Nauru
Navassa Island
Nepal
Netherlands
New Caledonia
New Zealand
Nicaragua
Niger
Nigeria
Niue
Norfolk Island
Northern Mariana Islands
Norway
Oman
Pakistan
Palau
Palmyra Atoll
Panama
Papua New Guinea
Paracel Islands
Paraguay
Peru
Philippines
Pitcairn Islands
Poland
Portugal
Puerto Rico
Qatar
Reunion
Romania
Russia
Rwanda
Saint Barthelemy
Saint Helena, Ascension, and Tristan da Cunha
Saint Kitts and Nevis
Saint Lucia
Saint Martin
Saint Pierre and Miquelon
Saint Vincent and the Grenadines
Samoa
San Marino
Sao Tome and Principe
Saudi Arabia
Senegal
Serbia
Seychelles
Sierra Leone
Singapore
Sint Maarten
Slovakia
Slovenia
Solomon Islands
Somalia
South Africa
South Georgia and South Sandwich Islands
South Sudan
Spain
Spratly Islands
Sri Lanka
Sudan
Suriname
Svalbard
Swaziland
Sweden
Switzerland
Syria
Taiwan
Tajikistan
Tanzania
Thailand
Timor-Leste
Togo
Tokelau
Tonga
Trinidad and Tobago
Tromelin Island
Tunisia
Turkey
Turkmenistan
Turks and Caicos Islands
Tuvalu
Uganda
Ukraine
United Arab Emirates
United Kingdom
United States
Uruguay
Uzbekistan
Vanuatu
Vatican City
Venezuela
Vietnam
Virgin Islands, British
Virgin Islands, U.S.
Wake Island
Wallis and Futuna
West Bank
Western Sahara
Yemen
Zambia
Zimbabwe

Language
English
Bahasa Indonesia
Deutsch
Español
Français
Polski
Português
Русский
正體中文

Format

 HTML

 Text

I’m okay with Mozilla handling my info as explained in this [Privacy Policy](https://www.mozilla.org/privacy/).

Sign up now
We will only send you
Mozilla-related information.

## Thanks!

If you haven’t previously confirmed a subscription to a Mozilla-related newsletter you may have to do so. Please check your inbox or your spam filter for an e-mail from us.

[Mozilla](https://www.mozilla.org/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)

##### Mozilla

* [About](https://www.mozilla.org/about/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Contact Us](https://www.mozilla.org/contact/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Donate](https://donate.mozilla.org/?presets=50,30,20,10&amount=30¤cy=usd&utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)

##### Firefox

* [Download Firefox](https://www.mozilla.org/firefox/new/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Desktop](https://www.mozilla.org/firefox/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Mobile](https://www.mozilla.org/firefox/mobile/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Features](https://www.mozilla.org/firefox/features/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Beta, Nightly, Developer Edition](https://www.mozilla.org/firefox/channel/desktop/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)

##### Resources

* [Privacy Hub](https://www.mozilla.org/privacy/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Browser Comparison](https://www.mozilla.org/firefox/browsers/compare/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Brand Standards](https://mozilla.design/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)

##### Social

Follow @Firefox

* [Twitter (@mozilla)](https://twitter.com/firefox)
* [Instagram (@mozilla)](https://www.instagram.com/firefox/)
* [YouTube (@firefoxchannel)](https://www.youtube.com/user/firefoxchannel)

Follow @Mozilla

* [Twitter (@mozilla)](https://twitter.com/mozilla)
* [Instagram (@mozilla)](https://www.instagram.com/mozilla/)

* [Website Privacy Notice](https://www.mozilla.org/privacy/websites/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Legal](https://www.mozilla.org/about/legal/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)



=== Content from bugzilla.mozilla.org_c4f604cb_20250126_081818.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/1092855)
* [XML](/show_bug.cgi?ctype=xml&id=1092855)

Closed
[Bug 1092855](/show_bug.cgi?id=1092855)
(CVE-2014-1595)

Opened 10 years ago
Closed 10 years ago

# jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10

## Categories

### (Core :: Security, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=Security#Security)

Security
▾

Core :: Security
For non-crypto security bugs. Or use this general component if you know you have a Browser security bug, but not sure what component to use. Bug will be reviewed for proper component.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=Security&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=Security&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=Security)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

unspecified

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

x86

macOS

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

normal

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla36

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Performance Impact | --- |
| --- | --- |
| Webcompat Score | --- |
| a11y-review | --- |
| Accessibility Severity | --- |
| Webcompat Priority | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox33 | [-](/buglist.cgi?f1=cf_tracking_firefox33&o1=equals&v1=-) | [wontfix](/buglist.cgi?f1=cf_status_firefox33&o1=equals&v1=wontfix) |
| firefox34 | [+](/buglist.cgi?f1=cf_tracking_firefox34&o1=equals&v1=%2B) | [verified](/buglist.cgi?f1=cf_status_firefox34&o1=equals&v1=verified) |
| firefox35 | [+](/buglist.cgi?f1=cf_tracking_firefox35&o1=equals&v1=%2B) | [verified](/buglist.cgi?f1=cf_status_firefox35&o1=equals&v1=verified) |
| firefox36 | [+](/buglist.cgi?f1=cf_tracking_firefox36&o1=equals&v1=%2B) | [verified](/buglist.cgi?f1=cf_status_firefox36&o1=equals&v1=verified) |
| firefox-esr31 | [34+](/buglist.cgi?f1=cf_tracking_firefox_esr31&o1=equals&v1=34%2B) | [verified](/buglist.cgi?f1=cf_status_firefox_esr31&o1=equals&v1=verified) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox33 | - | wontfix |
| firefox34 | + | verified |
| firefox35 | + | verified |
| firefox36 | + | verified |
| firefox-esr31 | 34+ | verified |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: mozilla, Assigned: smichaud)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/f4932c37bcceaf71fd2472886282a3cb?d=mm&size=40)  [smichaud](/user_profile?user_id=67806)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

![](https://secure.gravatar.com/avatar/f8267efedda3c2e24d5829ef3a9d124e?d=mm&size=40)  [kjozwiak](/user_profile?user_id=455785)

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/b22732100146e14ae370350237f03f4d?d=mm&size=40)  [mozilla](/user_profile?user_id=17205)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/da6b54ad3fdb36ba7656df9adfe65d12?d=mm&size=40)  [dveditz](/user_profile?user_id=1689)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

27 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

[1681242](/show_bug.cgi?id=1681242 "RESOLVED FIXED - Remove obsolete CGEvent logging workaround added for Mac OS X 10.10.2")

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

---

Dependency [tree](/showdependencytree.cgi?id=1092855&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=1092855)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[Duplicates:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#duplicates)

[1099958](/show_bug.cgi?id=1099958 "RESOLVED DUPLICATE - Firefox creates /tmp/CGLog_Firefox_<pid> files on Mac")

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Keywords: sec-high, sec-vector, Whiteboard: [adv-main34+][adv-esr31.3+] rdar://18946701)

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

CVE-2014-1595

[Keywords:](/describekeywords.cgi)

[sec-high](/buglist.cgi?keywords=sec-high&resolution=---),
[sec-vector](/buglist.cgi?keywords=sec-vector&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[adv-main34+][adv-esr31.3+] rdar://18946701

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | in-testsuite |  |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

```
As the result of an Apple bug on OS X 10.10 (Yosemite), log files whose names follow the pattern /tmp/CGLog_app_pid are created by an OS component for Firefox and Thunderbird (all current branches), which contain a record of the input events that happen while the app is running.

This component is the CoreGraphics framework.  The CoreGraphics framework has long been able to record these logs (going back at least to OS X 10.6), but this functionality is off by default.  However, a bug introduced by Apple in OS X 10.10 turns this logging on by default for Firefox and Thunderbird, and possibly also for other apps that use a custom memory allocator.  (Firefox and Thunderbird use jemalloc.)  The bug is that the CoreGraphics variable is left uninitialized which determines whether or not logging of input events is on.

Mozilla has now landed a patch on all current branches (31esr, 34, 35 and 36) that works around this bug -- it explicitly turns off the CoreGraphics framework's logging of input events.  It will be included in the next releases on all those branches (including of Firefox and Thunderbird).
```

## Attachments

### (9 files, 3 obsolete files)

| [CGLog\_Firefox\_18197-sample.txt](/attachment.cgi?id=8515692)  [10 years ago](#c0)  [Kent Howard](/user_profile?user_id=17205)   2.55 KB, text/plain |  | [Details](/attachment.cgi?id=8515692&action=edit) |
| --- | --- | --- |
| [com.apple.WindowServer.plist](/attachment.cgi?id=8516971)  [10 years ago](#c23)  [Kamil Jozwiak [:kjozwiak]](/user_profile?user_id=455785)   706 bytes, application/xml |  | [Details](/attachment.cgi?id=8516971&action=edit) |
| [Interpose library for logging](/attachment.cgi?id=8517731)  [10 years ago](#c49)  [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)   8.01 KB, application/x-tar |  | [Details](/attachment.cgi?id=8517731&action=edit) |
| [Another interpose library for logging](/attachment.cgi?id=8518219)  [10 years ago](#c57)  [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)   7.93 KB, application/x-gzip |  | [Details](/attachment.cgi?id=8518219&action=edit) |
| [Another interpose library for logging](/attachment.cgi?id=8518488)  [10 years ago](#c67)  [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)   8.16 KB, application/x-gzip |  | [Details](/attachment.cgi?id=8518488&action=edit) |
| [lldb all-thread backtrace](/attachment.cgi?id=8518606)  [10 years ago](#c72)  [Kent Howard](/user_profile?user_id=17205)   51.70 KB, text/plain |  | [Details](/attachment.cgi?id=8518606&action=edit) |
| [lldb\_backtrace.txt](/attachment.cgi?id=8518967)  [10 years ago](#c73)  [Kamil Jozwiak [:kjozwiak]](/user_profile?user_id=455785)   74.17 KB, text/plain |  | [Details](/attachment.cgi?id=8518967&action=edit) |
| [Proof of concept that this bug is caused by unitialized memory in the CoreGraphics framework](/attachment.cgi?id=8519321)  [10 years ago](#c121)  [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)   7.84 KB, application/x-gzip |  | [Details](/attachment.cgi?id=8519321&action=edit) |
| [Interpose library that shows this bug happen in Firefox but not elsewhere](/attachment.cgi?id=8519352)  [10 years ago](#c124)  [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)   7.99 KB, application/x-gzip |  | [Details](/attachment.cgi?id=8519352&action=edit) |
| [Fix](/attachment.cgi?id=8520346)  [10 years ago](#c134)  [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)   2.02 KB, patch |  | [Details](/attachment.cgi?id=8520346&action=edit) | [Diff](/attachment.cgi?id=8520346&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1092855&attachment=8520346) |
| [Fix rev1](/attachment.cgi?id=8520784)  [10 years ago](#c138)  [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)   4.20 KB, patch | spohl : [review+](#a772511_456485 "10 years ago")  lsblakk : [approval-mozilla-aurora+](#c175 "10 years ago")  lsblakk : [approval-mozilla-beta+](#c175 "10 years ago")  lmandel : [approval-mozilla-esr31+](#c179 "10 years ago") | [Details](/attachment.cgi?id=8520784&action=edit) | [Diff](/attachment.cgi?id=8520784&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1092855&attachment=8520784) |
| [Patch for esr31](/attachment.cgi?id=8522345)  [10 years ago](#c183)  [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)   6.39 KB, patch | smichaud : [review+](#c183 "10 years ago") | [Details](/attachment.cgi?id=8522345&action=edit) | [Diff](/attachment.cgi?id=8522345&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1092855&attachment=8522345) |

Show Obsolete

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Kent Howard](/user_profile?user_id=17205)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=1092855#c0)• 10 years ago |
|  | |

Attached file
[CGLog\_Firefox\_18197-sample.txt](attachment.cgi?id=8515692)
— [Details](attachment.cgi?id=8515692&action=edit)

User Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.10; rv:33.0) Gecko/20100101 Firefox/33.0
Build ID: 20141027150301
Steps to reproduce:
I'm currently using Firefox 33.0.2 and Thunderbird 31.2.0 on MacOS 10.10 (Yosemite).
Actual results:
Both Firefox and Thunderbird are creating large log files in /tmp with the filename template of CGLog\_Program\_PID (ex. /tmp/CGLog\_Firefox\_18197 ). Nothing special is required to cause these log files to be created, however, they do take some time to show up after starting the application; apparently the event log builds in memory first and is flushed periodically. The log file appears to contain all input events like mouse moves, clicks, and key-presses. The mode on the file is 0644 so any process on the system could read these and thus presents a security issue especially on multi-user systems as it would contain username and password key-press data.
A small example of the log file is attached. I didn't notice these files until after upgrading to Yosemite, but I'm not certain that was the trigger.
Expected results:
I would expect this logging would only be enabled for debug situations, and when enabled, the file mode should only allow the owning user to open it.

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=1092855#c1)• 10 years ago |
|  | |

Steven, does this sound familiar at all?
Kent, does this show up when you run in safe mode?Flags: needinfo?(smichaud)

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=1092855#c2)• 10 years ago |
|  | |

> Steven, does this sound familiar at all?
No, I've never seen these at all.
And I just checked on an OS X 10.8.5 machine where I've been running Firefox 33.0.2 and Thunderbird 31.2.0 for several hours -- I don't see any such files. Let me try running Firefox on Yosemite for a few hours, and see if they show up.
Frankly I don't think these logs are a security problem, if the attached sample is any guide. They would only be if URLs and (especially) accounts and passwords appeared in them. But it'd still be nice to get to the bottom of this.
Kent: Try running other browsers (like Safari and Chrome) for a few hours, and check if you see similar log files for them.Flags: needinfo?(smichaud)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=1092855#c3)• 10 years ago |
|  | |

(In reply to Steven Michaud from [comment #2](/show_bug.cgi?id=1092855#c2 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10"))
> Frankly I don't think these logs are a security problem, if the attached
> sample is any guide. They would only be if URLs and (especially) accounts
> and passwords appeared in them. But it'd still be nice to get to the bottom
> of this.
I'm concerned about the key events in there -- nice little keylogger.

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=1092855#c4)• 10 years ago |
|  | |

Other folks are concerned too:
<https://support.mozilla.org/en-US/questions/1028140?esab=a&s=CGLog&r=0&as=s>

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=1092855#c5)• 10 years ago |
|  | |

I did a little bit of Googling and I found a reference to a log with a similar name in the source code for iTerm, which is some open source terminal:
<http://en.sourceforge.jp/projects/iterm-jp/scm/svn/blobs/9/trunk/iTerm/CGSInternal/CGSDebug.h>
"Dumps information about an application's resource usage to `/tmp/CGResources\_<NAME>\_<PID>`."

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=1092855#c6)• 10 years ago |
|  | |

> I'm concerned about the key events in there -- nice little keylogger.
Oops. Yes, you're right.

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=1092855#c7)• 10 years ago |
|  | |

Kamil had the same log (on Yosemite). I don't see one on 10.9.Status: UNCONFIRMED → NEWEver confirmed: true

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=1092855#c8)• 10 years ago |
|  | |

I've been running FF 33.0.2 in Yosemite for the last hour, and still don't see these log files.
For what it's worth, my copy of Yosemite is the release version (build 14A389), and is a clean install (not an upgrade).
Kent, please try restarting your computer (to get rid of existing log files), the running Firefox in safe mode to see if new log files are created.
Please also try running Safari and Chrome for a while, to see if log files also get created for them.
Are you using the Yosemite release? How did you get/install your version of Yosemite? Did you upgrade from pre-release versions of Yosemite (betas or developer previews)?

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=1092855#c9)• 10 years ago |
|  | |

Kamil and Kent, are either of you using iTerm or something?

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=1092855#c10)• 10 years ago |
|  | |

(From the link in [comment #5](/show_bug.cgi?id=1092855#c5 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10"))
/\*! Dumps a very verbose debug log of all processes to /tmp/CGLog\_<NAME>\_<PID>. \*/
kCGSDebugOptionVerboseLoggingAllApps = 0x80000007,
This makes it sound like something at the OS level (or the user settings level) is triggering debug logging for all apps. Let my sharpen my reverse engineering tools and dig around for more information.
We very seriously need to see if these logs get created for all apps. Andrew, please lean on Kamil right away. Kent, please answer my questions from [comment #8](/show_bug.cgi?id=1092855#c8 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10") right away.

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=1092855#c11)• 10 years ago |
|  | |

> This makes it sound like something at the OS level (or the user settings level)
But yes, it could also be a single app like iTerm. Or a Firefox extension.

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=1092855#c12)• 10 years ago |
|  | |

Kamil was going to check if he's seeing this issue in Chrome, too. It didn't show up immediately, but he was going to use it for a few hours to see if it shows up there too.
ni for the question in [comment 9](/show_bug.cgi?id=1092855#c9 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10")Flags: needinfo?(kamiljoz)

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=1092855#c13)• 10 years ago |
|  | |

Kamil, please also answer my questions from [comment #8](/show_bug.cgi?id=1092855#c8 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10").

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=1092855#c14)• 10 years ago |
|  | |

Kamil and Kent: By any chance are either of you using an Apple developer tool called Quartz Debug?
It's probably capable of changing a debug setting to make these log files appear for any app. I don't yet know whether or not the setting change would be permanent -- whether it would persist after quitting Quartz Debug and/or restarting your computer.

|  | [Kamil Jozwiak [:kjozwiak]](/user_profile?user_id=455785) |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=1092855#c15)• 10 years ago |
|  | |

> Are you using the Yosemite release? How did you get/install your version of
> Yosemite? Did you upgrade from pre-release versions of Yosemite (betas or
> developer previews)?
I upgraded to Yosemite from Mavericks 10.9.5 via the Apple Store. I wasn't using any 10.10 betas or developer previews previous to upgrading.
> Kamil and Kent, are either of you using iTerm or something?
Nope, I'm just using the plain Terminal (v2.5) that comes with OSX with the "Pro" theme selected (haven't changed anything else).
> But yes, it could also be a single app like iTerm. Or a Firefox extension.
Speaking of extensions/add-ons, I do have the Gecko Profiler installed:
- <https://developer.mozilla.org/en-US/docs/Mozilla/Performance/Profiling_with_the_Built-in_Profiler>
However, the log file is still being created after running fx in safe mode:
- removed the log files from /tmp/
- restarted the machine and ensured the logs weren't present when re-launching fx
- started fx in safe mode via the Hamburger Menu -> Help Menu -> Restart with Add-ons Disabled...
- once fx started in safe mode, double checked to make sure that there weren't any logs
After about 20 minutes or so, CGLog\_Nightly\_437 was created under /tmp/. I'm running Chrome 38.0.2125.111 and Safari Version 8.0 (10600.1.25) at the same time and haven't seen any logs from those two browsers.
> Kamil and Kent: By any chance are either of you using an Apple developer tool called Quartz Debug?
I haven't installed Quartz Debug directly but I did upgrade xCode to version 6.1 (6A1052d) via the Apple Store a few days after installing Yosemite. I haven't anything other than upgrading it.Flags: needinfo?(kamiljoz)

|  | [Kent Howard](/user_profile?user_id=17205)  Reporter |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=1092855#c16)• 10 years ago |
|  | |

Steven said: "Are you using the Yosemite release? How did you get/install your version of Yosemite? Did you upgrade from pre-release versions of Yosemite (betas or developer previews)?"
Yes, I'm running the GA release 10.10. I upgraded from the GA release of 10.9. I've not involved myself with any of the beta releases of OS X.
I'm currently running Firefox in safe-mode and after about 20 minutes the CGLog\_Firefox\_PID log showed up. Note also that this happens in Thunderbird as well so the condition seems to be in a shared component. That's while I filed this under Core.
I run Safari regularly and has not create any similar log file (at least not in /tmp). I don't like Chrome but I do have it installed so I'll see if anything happens with a 30 minute session there.

|  | [Kent Howard](/user_profile?user_id=17205)  Reporter |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=1092855#c17)• 10 years ago |
|  | |

I noticed a couple more questions to answer.
\* I don't have iTerm installed.
\* Like Kamil, I upgraded XCode to 6.1 after installing Yosemite. It's installed to let macports do its builds; and that's the extent of my usage of it, at this point. I'm not using Quartz Debug.

|  | [Dana Keeler (she/her) (use needinfo) [:keeler]](/user_profile?user_id=349244) |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=1092855#c18)• 10 years ago |
|  | |

Can you use something like lsof to determine which process is writing to the file?

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=1092855#c19)• 10 years ago |
|  | |

Kamil and Kent: Thanks very much for your detailed information. For the moment I can't think of any more questions, but when I do I'll let you know here.
This is all very puzzling.
The CoreGraphics framework does have an undocumented CGSSetDebugOptionsPSN() method, which presumably sets a particular option only for a particular process id. I'd guess this is how Firefox and Thunderbird are getting these log files when they run. But the tree doesn't contain any calls to any of the CGSSetDebugOptions() variants, and neither does the Gecko Profiler.
I don't think that whatever program did this is malicious. A key logger would just log your keystrokes, and would presumably be much less obvious about it. But I'd still very much like to know what's going on.
I'll keep digging and thinking.

|  | [Kent Howard](/user_profile?user_id=17205)  Reporter |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=1092855#c20)• 10 years ago |
|  | |

(In reply to David Keeler (:keeler) [use needinfo?] from [comment #18](/show_bug.cgi?id=1092855#c18 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10"))
> Can you use something like lsof to determine which process is writing to the
> file?
Using the fuser command shows the log files are not held open. They appear to be opened by the process periodically to flush records to it and then closed. I just captured the firefox process accessing the logs using iosnoop.
UID PID D BLOCK SIZE COMM PATHNAME
502 46528 R 365588248 4096 firefox ??/tmp/CGLog\_Firefox\_46528
502 46528 W 365588248 4096 firefox ??/tmp/CGLog\_Firefox\_46528
502 46528 W 366811848 1044480 firefox ??/tmp/CGLog\_Firefox\_46528
502 46528 W 366813888 155648 firefox ??/tmp/CGLog\_Firefox\_46528

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 21](/show_bug.cgi?id=1092855#c21)• 10 years ago |
|  | |

Later I'll post an interpose library that you can attach to Firefox (or Thunderbird), and which will log stack traces for calls made to any of the CGSSetDebugOptions() variants. Here I'm assuming the debug logging setting isn't permanent.
But maybe it is. In that case you \*might\* be able to catch where the setting is stored by running the following two commands from Terminal:
grep -r -s CGSDebugOption /Library/
grep -r -s CGSDebugOption ~/

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 22](/show_bug.cgi?id=1092855#c22)• 10 years ago |
|  | |

Another request, on the off chance it may reveal something interesting:
Please attach the contents of your /System/Library/LaunchDaemons/com.apple.WindowServer.plist file.

|  | [Kamil Jozwiak [:kjozwiak]](/user_profile?user_id=455785) |  |
| --- | --- | --- |
| [Comment 23](/show_bug.cgi?id=1092855#c23)• 10 years ago |
|  | |

Attached file
[com.apple.WindowServer.plist](attachment.cgi?id=8516971)
— [Details](attachment.cgi?id=8516971&action=edit)

Attached, let me know if you need anything else Steven.

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 24](/show_bug.cgi?id=1092855#c24)• 10 years ago |
|  | |

> Attached
Thanks! Nothing unusual there. It looks exactly like mine.

|  | [Kamil Jozwiak [:kjozwiak]](/user_profile?user_id=455785) |  |
| --- | --- | --- |
| [Comment 25](/show_bug.cgi?id=1092855#c25)• 10 years ago |
|  | |

I've been running Chrome/Safari for a few hours without seeing any logs being created under /tmp. Nightly is still dumping data into "CGLog\_Nightly\_437". Really strange...

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 26](/show_bug.cgi?id=1092855#c26)• 10 years ago |
|  | |

Kamil, please do try the following two commands from Terminal (mentioned above in [comment #21](/show_bug.cgi?id=1092855#c21 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10")):
grep -r -s CGSDebugOption /Library/
grep -r -s CGSDebugOption ~/

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 27](/show_bug.cgi?id=1092855#c27)• 10 years ago |
|  | |

Kamil and Kent, here's another command to try (in a Terminal prompt):
defaults read com.apple.QuartzDebug

|  | [Kamil Jozwiak [:kjozwiak]](/user_profile?user_id=455785) |  |
| --- | --- | --- |
| [Comment 28](/show_bug.cgi?id=1092855#c28)• 10 years ago |
|  | |

Results:
\* grep -r -s CGSDebugOption /Library/ > out.txt (didn't find any patches/results, out.txt was completely blank)
\* defaults read com.apple.QuartzDebug:
2014-11-04 20:09:15.088 defaults[3893:1654875]
Domain com.apple.QuartzDebug does not exist
\* grep -r -s CGSDebugOption ~/ > out.txt
for some reason, this command is taking a very long time to complete.. I'm not sure if it's because I have all the mozilla branches in my ~/ and the scan is taking a long time? I'm gonna head home as its 8pm here but I'll run the command once I get home and leave it running.

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 29](/show_bug.cgi?id=1092855#c29)• 10 years ago |
|  | |

Thanks, Kamil.
When you have time please also try the following:
1) grep -r -s CGSSetDebugOptions /Applications/
I expect matches in the XCode SDKs directory. Tell us if you find other matches.
2) grep -r -s CGSSetDebugOptions /System/Library/
I expect matches in the CoreGraphics framework, and error messages for the Ruby framework. Tell us if you find other matches.
3) grep -r -s CGSSetDebugOptions /Library/
I don't expect any matches at all.

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 30](/show_bug.cgi?id=1092855#c30)• 10 years ago |
|  | |

One more, for good measure:
grep -r -s CGSSetDebugOptions ~/Library/Internet Plug-Ins/

|  | [Kamil Jozwiak [:kjozwiak]](/user_profile?user_id=455785) |  |
| --- | --- | --- |
| [Comment 31](/show_bug.cgi?id=1092855#c31)• 10 years ago |
|  | |

Results:
\* grep -r -s CGSSetDebugOptions /Applications/ > out.txt
All the matches were found only in "/SDKs/MacOSX10.10.sdk/" and "/SDKs/MacOSX10.9.sdk/". However, I did receive some "recursive directory loop" warnings under:
- /Developer/SDKs/MacOSX10.10.sdk/System/Library/Frameworks/Ruby.framework/
- /Developer/SDKs/MacOSX10.9.sdk/System/Library/Frameworks/Ruby.framework/
\* grep -r -s CGSSetDebugOptions /System/Library/ > out.txt
All the matches were found under "CoreGraphics". I didn't receive any error messages regarding the Ruby framework
\* grep -r -s CGSSetDebugOptions /Library/ > out.txt
no matches found
\* grep -r -s CGSSetDebugOptions ~/Library/Internet Plug-Ins/ > out.txt
no matches found

|  | [Kamil Jozwiak [:kjozwiak]](/user_profile?user_id=455785) |  |
| --- | --- | --- |
| [Comment 32](/show_bug.cgi?id=1092855#c32)• 10 years ago |
|  | |

Results:
\* grep -r -s CGSDebugOption ~/ > out.txt
-> Binary file /Users/kjozwiak//Documents/Virtual Machines.localized/Windows 7 Pro x64.vmwarevm/564d4f60-4ad6-d4bc-1696-77cf39b2672b.vmem matches

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 33](/show_bug.cgi?id=1092855#c33)• 10 years ago |
|  | |

Interesting. So this could conceivably be a VMWare thing.
Kent, do you also have VMWare installed?
Kamil, can you make the logging stop by (temporarily) deinstalling VMWare and restarting your computer?
(I don't have any Yosemite partitions suitable for installing VMWare, though I do have a license. In fact one of those partitions is itself a VMWare VM.)

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 34](/show_bug.cgi?id=1092855#c34)• 10 years ago |
|  | |

Kamil and Kent, here's another command to try in Terminal:
plutil -p /Library/Preferences/com.apple.windowserver.plist

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 35](/show_bug.cgi?id=1092855#c35)• 10 years ago |
|  | |

Kamil, what's your version of VMWare Fusion?

|  | [Kent Howard](/user_profile?user_id=17205)  Reporter |  |
| --- | --- | --- |
| [Comment 36](/show_bug.cgi?id=1092855#c36)• 10 years ago |
|  | |

(In reply to Steven Michaud from [comment #33](/show_bug.cgi?id=1092855#c33 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10"))
> Interesting. So this could conceivably be a VMWare thing.
>
> Kent, do you also have VMWare installed?
I don't. However I do have VirtualBox installed.

|  | [Kent Howard](/user_profile?user_id=17205)  Reporter |  |
| --- | --- | --- |
| [Comment 37](/show_bug.cgi?id=1092855#c37)• 10 years ago |
|  | |

Not sure how helpful this is, but I played with dtrace a bit with the following probe.
pid$1:CoreGraphics:\*Debug\*:entry { trace(arg0); trace(arg1); ustack(); }
and this is what it returned after displaying the initial window (first two entries) and then bringing that window into the foreground (second two entries)
CPU ID FUNCTION:NAME
1 4646 CGSUpdateDebugOptions:entry 37723 2
CoreGraphics`CGSUpdateDebugOptions
CoreGraphics`CGSNewWindowWithOpaqueShape+0x73
AppKit`\_NSCreateWindowWithOpaqueShape2+0x218
AppKit`-[NSWindow \_commonAwake]+0x710
AppKit`-[NSWindow \_makeKeyRegardlessOfVisibility]+0x55
AppKit`-[NSWindow makeKeyAndOrderFront:]+0x1b
XUL`0x0000000101dc3b50+0x658
1 4647 \_CGSGetDebugOptions:entry 9223 140735114771568
CoreGraphics`\_CGSGetDebugOptions
CoreGraphics`CGSUpdateDebugOptions+0x2a
CoreGraphics`CGSNewWindowWithOpaqueShape+0x73
AppKit`\_NSCreateWindowWithOpaqueShape2+0x218
AppKit`-[NSWindow \_commonAwake]+0x710
AppKit`-[NSWindow \_makeKeyRegardlessOfVisibility]+0x55
AppKit`-[NSWindow makeKeyAndOrderFront:]+0x1b
XUL`0x0000000101dc3b50+0x658
0 4646 CGSUpdateDebugOptions:entry 37723 2
CoreGraphics`CGSUpdateDebugOptions
CoreGraphics`CGSNewWindowWithOpaqueShape+0x73
HIToolbox`MBWindows::CreateWindow(CGRect, unsigned int)+0xac
HIToolbox`MBWindows::GetWindowIDOnDisplay(unsigned int, unsigned char)+0xae
HIToolbox`MenuBarInstance::ForEachWindowDo(void (unsigned int, unsigned int) block\_pointer)+0xa2
HIToolbox`MenuBarInstance::UpdateWindowBoundsAndResolution()+0x9b
HIToolbox`MenuBarInstance::Show(MenuBarAnimationStyle, unsigned char, unsigned char, unsigned char)+0xe5
HIToolbox`SetMenuBarObscured+0xe8
HIToolbox`HIApplication::HandleActivated(OpaqueEventRef\*, unsigned char, OpaqueWindowPtr\*)+0xb8
HIToolbox`HIApplication::EventObserver(unsigned int, OpaqueEventRef\*, void\*)+0xee
HIToolbox`\_NotifyEventLoopObservers+0x9b
HIToolbox`AcquireEventFromQueue+0x335
HIToolbox`ReceiveNextEventCommon+0xea
HIToolbox`\_BlockUntilNextEventMatchingListInModeWithFilter+0x47
AppKit`\_DPSNextEvent+0x3c4
AppKit`-[NSApplication nextEventMatchingMask:untilDate:inMode:dequeue:]+0xc2
XUL`0x0000000101dbdbb0+0x52
0 4646 CGSUpdateDebugOptions:entry 37723 2
CoreGraphics`CGSUpdateDebugOptions
CoreGraphics`CGSNewWindowWithOpaqueShape+0x73
HIToolbox`HIMenuBarView::DrawSelf(short, \_\_HIShape const\*, CGContext\*)+0x16a
HIToolbox`HIView::DrawCacheOrSelf(short, \_\_HIShape const\*, CGContext\*)+0x157
HIToolbox`HIView::EventHandler(OpaqueEventHandlerCallRef\*, OpaqueEventRef\*, void\*)+0xbae
HIToolbox`DispatchEventToHandlers(EventTargetRec\*, OpaqueEventRef\*, HandlerCallRec\*)+0x4ec
HIToolbox`SendEventToEventTargetInternal(OpaqueEventRef\*, OpaqueEventTargetRef\*, HandlerCallRec\*)+0x182
HIToolbox`SendEventToEventTargetWithOptions+0x2b
HIToolbox`HIView::SendDraw(short, OpaqueGrafPtr\*, \_\_HIShape const\*, CGContext\*)+0x151
HIToolbox`HIView::RecursiveDrawComposited(\_\_HIShape const\*, \_\_HIShape const\*, unsigned int, HIView\*, CGContext\*, unsigned char, double)+0x2c6
HIToolbox`HIView::RecursiveDrawComposited(\_\_HIShape const\*, \_\_HIShape const\*, unsigned int, HIView\*, CGContext\*, unsigned char, double)+0x542
HIToolbox`HIView::DrawComposited(short, OpaqueGrafPtr\*, \_\_HIShape const\*, unsigned int, HIView\*, CGContext\*)+0x3c5
HIToolbox`HIView::Render(unsigned int, CGContext\*)+0x36
HIToolbox`WindowData::PrepareForVisibility()+0xa8
HIToolbox`\_ShowHideWindows+0x189
HIToolbox`ShowHide+0x22
HIToolbox`MBWindows::CreateWindow(CGRect, unsigned int)+0x179
HIToolbox`MBWindows::GetWindowIDOnDisplay(unsigned int, unsigned char)+0xae
HIToolbox`MenuBarInstance::ForEachWindowDo(void (unsigned int, unsigned int) block\_pointer)+0xa2
HIToolbox`MenuBarInstance::UpdateWindowBoundsAndResolution()+0x9b

|  | [Kamil Jozwiak [:kjozwiak]](/user_profile?user_id=455785) |  |
| --- | --- | --- |
| [Comment 38](/show_bug.cgi?id=1092855#c38)• 10 years ago |
|  | |

> Kamil and Kent, here's another command to try in Terminal:
>
> plutil -p /Library/Preferences/com.apple.windowserver.plist
\* plutil -p /Library/Preferences/com.apple.windowserver.plist
--> <http://pastebin.mozilla.org/7130847>
> Kamil, what's your version of VMWare Fusion?
I'm using VMware Fusion 7.0.1 (2235595). I was using Fusion 5 but the 10.10 update screwed everything up and VMware eded up dropping it's support. So I uninstalled Fusion 5 and installed Fusion 7.0.1 with brand new VM's via the "More Isolated" route rather than "More Seamless". This way the VM's are not running side by side with OSX.
> Kamil, can you make the logging stop by (temporarily) deinstalling VMWare and restarting your computer?
I closed VMware and restarted the machine but the log appeared after 20 minutes of using Nightly with VMware closed.

|  | [Kent Howard](/user_profile?user_id=17205)  Reporter |  |
| --- | --- | --- |
| [Comment 39](/show_bug.cgi?id=1092855#c39)• 10 years ago |
|  | |

(In reply to Steven Michaud from [comment #34](/show_bug.cgi?id=1092855#c34 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10"))
> Kamil and Kent, here's another command to try in Terminal:
>
> plutil -p /Library/Preferences/com.apple.windowserver.plist
{
"DisplayMainOnInternal" => 1
"DisplayLayoutToRight" => 0
"CGSInterocitorSelectMode" => 0
"ForceOldStyleMemoryManagement" => 0
}

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 40](/show_bug.cgi?id=1092855#c40)• 10 years ago |
|  | |

> I closed VMware and restarted the machine
You probably really do need to (temporarily) uninstall VMWare Fusion. I believe that while it's installed, some parts of it are always running, even if the Fusion app isn't -- including at least one kernel extension.
Fusion used to have a nice uninstaller. But now that I look again it seems to have disappeared. I also have Fusion 7.0.1. I don't know what's up with this. I can't believe Fusion no longer uses kernel extensions.

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 41](/show_bug.cgi?id=1092855#c41)• 10 years ago |
|  | |

Here's VMWare's latest on uninstalling Fusion:
<http://kb.vmware.com/selfservice/microsites/search.do?language=en_US&cmd=displayKC&externalId=1017838>

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 42](/show_bug.cgi?id=1092855#c42)• 10 years ago |
|  | |

> plutil -p /Library/Preferences/com.apple.windowserver.plist
>
> {
> "DisplayMainOnInternal" => 1
> "DisplayLayoutToRight" => 0
> "CGSInterocitorSelectMode" => 0
> "ForceOldStyleMemoryManagement" => 0
> }
Interesting. Mine is empty.
I don't think any of the entries here is responsible for the logging.
But I do see that you at least occasionally have an external monitor
connected.
So the next question is, does the logging only happen while an
external monitor is connected?

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 43](/show_bug.cgi?id=1092855#c43)• 10 years ago |
|  | |

(In reply to [comment #36](/show_bug.cgi?id=1092855#c36 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10"))
>> Kent, do you also have VMWare installed?
>
> I don't. However I do have VirtualBox installed.
So does the logging stop happening if you temporarily uninstall or
disable it?

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 44](/show_bug.cgi?id=1092855#c44)• 10 years ago |
|  | |

(In reply to [comment #37](/show_bug.cgi?id=1092855#c37 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10"))
Interesting. CGSUpdateDebugOptions() is an internal (non-exported) method. Let me see what I can find out about it in lldb and my disassembler (Hopper Disassembler <http://www.hopperapp.com/>).

|  | [Kent Howard](/user_profile?user_id=17205)  Reporter |  |
| --- | --- | --- |
| [Comment 45](/show_bug.cgi?id=1092855#c45)• 10 years ago |
|  | |

(In reply to Steven Michaud from [comment #44](/show_bug.cgi?id=1092855#c44 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10"))
> (In reply to [comment #37](/show_bug.cgi?id=1092855#c37 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10"))
>
> Interesting. CGSUpdateDebugOptions() is an internal (non-exported) method.
> Let me see what I can find out about it in lldb and my disassembler (Hopper
> Disassembler <http://www.hopperapp.com/>).
This is what I could get using tool.
\_CGSUpdateDebugOptions:
000000000000b136 pushq %rbp
000000000000b137 movq %rsp, %rbp
000000000000b13a callq \_CGSRunningInServer
000000000000b13f testb %al, %al
000000000000b141 jne 0xb167
000000000000b143 movb \_CGSUpdateDebugOptions.debugOptionsInit(%rip), %al
000000000000b149 testb %al, %al
000000000000b14b jne 0xb167
000000000000b14d callq \_CGSServerPort
000000000000b152 leaq \_\_CGSDebugOptionFlags\_(%rip), %rsi
000000000000b159 movl %eax, %edi
000000000000b15b callq \_\_CGSGetDebugOptions
000000000000b160 movb $0x1, 0x8926f1(%rip)
000000000000b167 popq %rbp
000000000000b168 retq

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 46](/show_bug.cgi?id=1092855#c46)• 10 years ago |
|  | |

(Following up [comment #40](/show_bug.cgi?id=1092855#c40 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10"))
Fusion 7.0.1 does still use kernel extensions -- you can see them in the output from kextstat. But if you quit the Fusion app they get unloaded (which you can also see using kextstat).
So don't bother trying to uninstall Fusion 7.0.1. And no, it doesn't seem to be responsible for the logging.

|  | [Kamil Jozwiak [:kjozwiak]](/user_profile?user_id=455785) |  |
| --- | --- | --- |
| [Comment 47](/show_bug.cgi?id=1092855#c47)• 10 years ago |
|  | |

Steven, let me know if there's anything else that I can do. Is there a tool/debugger that I can install that can help us?

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 48](/show_bug.cgi?id=1092855#c48)• 10 years ago |
|  | |

I'm working on an interpose library that will log the CoreGraphics framework's current debug options value when it's initialized and whenever it changes. Once I'm done I'll ask you (Kamil) and Kent to run it and see what the logs say.

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 49](/show_bug.cgi?id=1092855#c49)• 10 years ago |
|  | |

Attached file
[Interpose library for logging](attachment.cgi?id=8517731)
— [Details](attachment.cgi?id=8517731&action=edit)

OK, Kamil and Kent, here's my interpose library.
Despite the format, it contains no binaries. So you need to untar it and call "make". If you don't already have them, you need the XCode commandline tools (which I think you can get from inside XCode).
The top of the interpose.mm file contains more instructions for use.
Please let me know if you have any questions.
And also of course please let us know what shows up in your logs.
In my own logs, I only see one call to \_CGSGetDebugOptions(), which returns that the debug options are '0'.

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 50](/show_bug.cgi?id=1092855#c50)• 10 years ago |
|  | |

> This is what I could get using tool.
What is "tool", Kent.
I think Hopper Disassembler is truly excellent, but I'm always on the lookout for decent disassemblers.

|  | [Kent Howard](/user_profile?user_id=17205)  Reporter |  |
| --- | --- | --- |
| [Comment 51](/show_bug.cgi?id=1092855#c51)• 10 years ago |
|  | |

(In reply to Steven Michaud from [comment #50](/show_bug.cgi?id=1092855#c50 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10"))
> > This is what I could get using tool.
>
> What is "tool", Kent.
>
> I think Hopper Disassembler is truly excellent, but I'm always on the
> lookout for decent disassemblers.
Sorry, typo. I meant otool, but Safari autocorrected. Grrr..

|  | [Kent Howard](/user_profile?user_id=17205)  Reporter |  |
| --- | --- | --- |
| [Comment 52](/show_bug.cgi?id=1092855#c52)• 10 years ago |
|  | |

Still running the process and waiting for the log file to be created, but I thought I'd provide some early results. Looks basically like the dtrace probe but you were able to capture the arguments and return value. I'll see if this fires again.
\_CGSGetDebugOptions(): serverPort 0x2707, options 0x0, returning 0
(interpose.dylib) PrintStackTrace() + 0xb1
(interpose.dylib) Hooked\_\_CGSGetDebugOptions(\_\_CFMachPort\*, unsigned int\*) + 0x69
(CoreGraphics) CGSUpdateDebugOptions + 0x2a
(CoreGraphics) CGSNewWindowWithOpaqueShape + 0x73
(AppKit) \_NSCreateWindowWithOpaqueShape2 + 0x218
(AppKit) -[NSWindow \_commonAwake] + 0x710
(AppKit) -[NSWindow \_makeKeyRegardlessOfVisibility] + 0x55
(AppKit) -[NSWindow makeKeyAndOrderFront:] + 0x1b
(XUL) mac\_plugin\_interposing\_child\_OnShowCursor + 0x69ee8

|  | [Kent Howard](/user_profile?user_id=17205)  Reporter |  |
| --- | --- | --- |
| [Comment 53](/show_bug.cgi?id=1092855#c53)• 10 years ago |
|  | |

The log file just showed up but nothing additional was caught by the interpose library.

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 54](/show_bug.cgi?id=1092855#c54)• 10 years ago |
|  | |

> The log file just showed up but nothing additional was caught by the interpose library.
OK, it looks like I'll need to start doing stuff to emulate what you guys see. For example I'll need to start playing with CGSSetDebugOptions(), using the Quartz Debugger or directly. That'll hopefully give me a better idea of what might be going on.
But CGSSetDebugOptions() might not be involved. It ultimately just causes a message to be sent over a mach port to the WindowServer. So it's possible that whatever triggers these logs is doing that directly.
It will take time, possibly a \*lot\* of time, to discover the source of these logs. And I've got lots of other things to do, so I can't just work on this continuously. The one thing I'm reasonably confident of is that whatever triggers these logs isn't malicious -- otherwise its traces would be a lot more difficult to discover. So this bug isn't drop-dead urgent.

|  | [Kent Howard](/user_profile?user_id=17205)  Reporter |  |
| --- | --- | --- |
| [Comment 55](/show_bug.cgi?id=1092855#c55)• 10 years ago |
|  | |

Absolutely agreed; I don't think it's malicious either. The logs can get very large so that's still an issue but /tmp is cleared whenever MacOS reboots. I currently just have a background script truncating the files every 5 minutes. I'll continue working on gathering more information as time permits. It gives me an excuse to get better at dtrace. :)

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 56](/show_bug.cgi?id=1092855#c56)• 10 years ago |
|  | |

By the way, playing around with Quartz Debug can change a running program's debug settings. This does trigger calls to debug\_options\_changed(), which do show up in my interpose library's logs. So at least I'm now sure that the interpose library does what it's supposed to.

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 57](/show_bug.cgi?id=1092855#c57)• 10 years ago |
|  | |

Attached file
[Another interpose library for logging](attachment.cgi?id=8518219) (obsolete)
— [Details](attachment.cgi?id=8518219&action=edit)

Kent and Kamil, please try this.

|  | [Kamil Jozwiak [:kjozwiak]](/user_profile?user_id=455785) |  |
| --- | --- | --- |
| [Comment 58](/show_bug.cgi?id=1092855#c58)• 10 years ago |
|  | |

Steps used: (please let know if I did this correctly)
- tar xvzf bugzilla1092855-interpose-lib-rev1.tgz
- make
- export DYLD\_INSERT\_LIBRARIES=/Users/kjozwiak/Downloads/interpose/interpose.dylib
- /Applications/FirefoxNightly.app/Contents/MacOS/firefox
Results:
(Thu Nov 6 12:56:33 2014) /Applications/FirefoxNightly.app/Contents/MacOS/firefox[3827] print\_log\_entries()
(interpose.dylib) PrintStackTrace() + 0xb1
(interpose.dylib) Hooked\_print\_log\_entries(void\*, void\*) + 0x52
(CoreGraphics) (anonymous namespace)::MessageLogger::add\_log(std::\_\_1::unique\_ptr<(anonymous namespace)::Log, std::\_\_1::default\_delete<(anonymous namespace)::Log> >) + 0x262
(CoreGraphics) CGSEventLogEvent + 0x199
(CoreGraphics) CGSGetNextEventRecordInternal + 0x112
(CoreGraphics) CGEventCreateNextEvent + 0x32
(HIToolbox) PullEventsFromWindowServerOnConnection(unsigned int, unsigned char, \_\_CFMachPortBoost\*) + 0x66
(HIToolbox) MessageHandler(\_\_CFMachPort\*, void\*, long, void\*) + 0x33
(CoreFoundation) \_\_CFMachPortPerform + 0xf7
(CoreFoundation) \_\_CFRUNLOOP\_IS\_CALLING\_OUT\_TO\_A\_SOURCE1\_PERFORM\_FUNCTION\_\_ + 0x29
(CoreFoundation) \_\_CFRunLoopDoSource1 + 0x1db
(CoreFoundation) \_\_CFRunLoopRun + 0x947
(CoreFoundation) CFRunLoopRunSpecific + 0x128
(AppKit) \_NSEventThread + 0x89
(libsystem\_pthread.dylib) \_pthread\_body + 0x83
(libsystem\_pthread.dylib) \_pthread\_body + 0x0
(libsystem\_pthread.dylib) thread\_start + 0xd

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 59](/show_bug.cgi?id=1092855#c59)• 10 years ago |
|  | |

Kamil:
Yes, you did everything right. And thanks for the info. It advances our knowledge, and I hope to have another interpose library for you and Kent before too long. But we still haven't figured this bug out.
Kent's results with my first interpose library show that debug options aren't what determines what's logged, and whether or not logging takes place. Kamil's results with my rev1 interpose library show that the CoreGraphics framework is definitely doing the logging.
What remains to be figured out is why.
And Kamil's results add a new puzzle. They show WindowServer events (input events like mouse and keyboard events) being processed on a secondary thread. I've never seen this before (or at least I've never noticed it), and I didn't realize it was possible.

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 60](/show_bug.cgi?id=1092855#c60)• 10 years ago |
|  | |

Kamil and Kent:
Please try breaking in lldb (without my interpose library) at the following label, then getting an all-thread stack trace:
\_ZN12\_GLOBAL\_\_N\_113MessageLogger17print\_log\_entriesERKNSt3\_\_16vectorINS1\_10unique\_ptrINS\_3LogENS1\_14default\_deleteIS4\_EEEENS1\_9allocatorIS7\_EEEE

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 61](/show_bug.cgi?id=1092855#c61)• 10 years ago |
|  | |

> then getting an all-thread stack trace
"bt all"

|  | [Kent Howard](/user_profile?user_id=17205)  Reporter |  |
| --- | --- | --- |
| [Comment 62](/show_bug.cgi?id=1092855#c62)• 10 years ago |
|  | |

> Kent's results with my first interpose library show that debug options
> aren't what determines what's logged, and whether or not logging takes
> place. Kamil's results with my rev1 interpose library show that the
> CoreGraphics framework is definitely doing the logging.
You can actually see in a disassembly of the ::shared\_logger() function in the CoreGraphics framework where it generates the /tmp/CGLog\_program\_pid filename. Maybe I should have mentioned that earlier but I thought we had already concluded that it was CoreGraphics doing this.

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 63](/show_bug.cgi?id=1092855#c63)• 10 years ago |
|  | |

We couldn't be entirely sure CoreGraphics is doing the logging until we caught it in the act -- as Kamil did with my rev1 interpose library.

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 64](/show_bug.cgi?id=1092855#c64)• 10 years ago |
|  | |

(Following up [comment #60](/show_bug.cgi?id=1092855#c60 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10"))
To be useful, the all-thread stack trace needs to be made for a mozilla-central nightly. All other distros have their symbols stripped.

|  | [Kamil Jozwiak [:kjozwiak]](/user_profile?user_id=455785) |  |
| --- | --- | --- |
| [Comment 65](/show_bug.cgi?id=1092855#c65)• 10 years ago |
|  | |

Steven, I've never used lldb before so I could use some help :) So far, I've done the following:
- lldb /Applications/FirefoxNightly.app/Contents/MacOS/firefox
Trying to figure out what option to use with "breakpoint set"

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 66](/show_bug.cgi?id=1092855#c66)• 10 years ago |
|  | |

If you're familiar with gdb, <http://lldb.llvm.org/lldb-gdb.html> will help.
Neither gdb nor lldb will "run" Firefox properly. You need to run it yourself, then use lldb to attach to the process.
So what you'd need to do (once Firefox is running) is something like this:
lldb
attach -p [firefox-pid]
b [label]
continue
Then once the breakpoint is hit:
bt all

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 67](/show_bug.cgi?id=1092855#c67)• 10 years ago |
|  | |

Attached file
[Another interpose library for logging](attachment.cgi?id=8518488)
— [Details](attachment.cgi?id=8518488&action=edit)

Here's another interpose library to try. This obsoletes the rev1 version. So if you haven't already tried that, try this instead.
[Attachment #8518219](/attachment.cgi?id=8518219&action=edit "Another interpose library for logging") -
Attachment is obsolete: true

|  | [Kent Howard](/user_profile?user_id=17205)  Reporter |  |
| --- | --- | --- |
| [Comment 68](/show_bug.cgi?id=1092855#c68)• 10 years ago |
|  | |

(In reply to Steven Michaud from [comment #67](/show_bug.cgi?id=1092855#c67 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10"))
Immediately at invocation, Firefox 33.0.3 logs the following.
(Thu Nov 6 16:03:17 2014) /Users/kent/Applications/Firefox.app/Contents/MacOS/firefox[77464] OnAddImage(): print\_log\_entries\_ptr 0x10008a000, CGSLogOpen\_ptr 0x10008a020, CGSEventLoggingStop\_ptr 0x10008a060, get\_shared\_logger\_ptr 0x7fff84d9c6de

|  | [Kent Howard](/user_profile?user_id=17205)  Reporter |  |
| --- | --- | --- |
| [Comment 69](/show_bug.cgi?id=1092855#c69)• 10 years ago |
|  | |

Another thing I tried is running Firefox 33.0.3 in a fresh user account with no extensions installed (only the globally installed plugins). The log file eventually showed up same as it does in my normal user account.

|  | [Kent Howard](/user_profile?user_id=17205)  Reporter |  |
| --- | --- | --- |
| [Comment 70](/show_bug.cgi?id=1092855#c70)• 10 years ago |
|  | |

Another test I thought should be tried at least once was to run without any plug-ins installed (except for the embedded Cisco H.264 plugin). I moved everything out of "/Library/Internet Plug-Ins" and "$HOME/Library/Internet Plug-Ins". The log file still showed up.

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 71](/show_bug.cgi?id=1092855#c71)• 10 years ago |
|  | |

(In reply to [comment #68](/show_bug.cgi?id=1092855#c68 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10"))
That message is just a sanity check. I forgot to comment it out.

|  | [Kent Howard](/user_profile?user_id=17205)  Reporter |  |
| --- | --- | --- |
| [Comment 72](/show_bug.cgi?id=1092855#c72)• 10 years ago |
|  | |

Attached file
[lldb all-thread backtrace](attachment.cgi?id=8518606)
— [Details](attachment.cgi?id=8518606&action=edit)

The breakpoint appeared to have been hit just before the log file was created. Once I continued the program my /tmp watcher script alarmed.

|  | [Kamil Jozwiak [:kjozwiak]](/user_profile?user_id=455785) |  |
| --- | --- | --- |
| [Comment 73](/show_bug.cgi?id=1092855#c73)• 10 years ago |
|  | |

Attached file
[lldb\_backtrace.txt](attachment.cgi?id=8518967)
— [Details](attachment.cgi?id=8518967&action=edit)

Ran into the same behavior as Kent described in [comment #72](/show_bug.cgi?id=1092855#c72 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10"). The breakpoint was hit before the log file was created. Once I continued, the log file was created under /tmp.

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 74](/show_bug.cgi?id=1092855#c74)• 10 years ago |
|  | |

I'll have more to say about those all-thread stack traces in a bit. Thanks!
But what I'd really like both of you to do now is try my latest (rev2) interpose library, and leave it running until a log gets written. It hooks (and logs) the same calls as my rev1 interpose library, plus calls to CGSEventLoggingStart() and CGSEventLoggingStop().
If the last two are being called, I'd \*really\* like to know how.
(Just ignore the sanity check message that I accidentally left in.)

|  | [Kamil Jozwiak [:kjozwiak]](/user_profile?user_id=455785) |  |
| --- | --- | --- |
| [Comment 75](/show_bug.cgi?id=1092855#c75)• 10 years ago |
|  | |

Results from interpose library (rev2):
(Fri Nov 7 11:38:48 2014) /Applications/FirefoxNightly.app/Contents/MacOS/firefox[658] print\_log\_entries()
(interpose.dylib) PrintStackTrace() + 0xb1
(interpose.dylib) Hooked\_print\_log\_entries(void\*, void\*) + 0x52
(CoreGraphics) (anonymous namespace)::MessageLogger::add\_log(std::\_\_1::unique\_ptr<(anonymous namespace)::Log, std::\_\_1::default\_delete<(anonymous namespace)::Log> >) + 0x262
(CoreGraphics) CGSEventLogEvent + 0x199
(CoreGraphics) CGSGetNextEventRecordInternal + 0x112
(CoreGraphics) CGEventCreateNextEvent + 0x32
(HIToolbox) PullEventsFromWindowServerOnConnection(unsigned int, unsigned char, \_\_CFMachPortBoost\*) + 0x66
(HIToolbox) MessageHandler(\_\_CFMachPort\*, void\*, long, void\*) + 0x33
(CoreFoundation) \_\_CFMachPortPerform + 0xf7
(CoreFoundation) \_\_CFRUNLOOP\_IS\_CALLING\_OUT\_TO\_A\_SOURCE1\_PERFORM\_FUNCTION\_\_ + 0x29
(CoreFoundation) \_\_CFRunLoopDoSource1 + 0x1db
(CoreFoundation) \_\_CFRunLoopRun + 0x947
(CoreFoundation) CFRunLoopRunSpecific + 0x128
(AppKit) \_NSEventThread + 0x89
(libsystem\_pthread.dylib) \_pthread\_body + 0x83
(libsystem\_pthread.dylib) \_pthread\_body + 0x0
(libsystem\_pthread.dylib) thread\_start + 0xd

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 76](/show_bug.cgi?id=1092855#c76)• 10 years ago |
|  | |

So, Kamil, it looks like you didn't see calls to CGSEventLoggingStart() and CGSEventLoggingStop(). If so, that's \*very\* peculiar. In fact I don't currently know how to explain it.
Please double-check to make sure you were using my rev2 interpose library. In fact I'd suggest rebooting your computer before testing again.

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 77](/show_bug.cgi?id=1092855#c77)• 10 years ago |
|  | |

About WindowServer events being processed on a secondary thread:
I think I now understand this (at least partly). And I'm reasonably confident it's unrelated to this bug. But it's also \*very\* peculiar.
Since OS X 10.9 (Mavericks), the OS (the AppKit framework) has had the ability to process WindowServer events on a secondary thread, using an \_NSEventThread method. So I'll call this thread the "event thread".
However, Firefox releases (with bundle id org.mozilla.firefox) are opted out of this by the OS. So you normally only see the "event thread" when running non-beta nightlies (whose bundle id is different), even on Mavericks and Yosemite. But if you change a Firefox release's bundle id to something else (I changed FF 33.0.3's bundle id in Info.plist to "org.blah.blah"), now you see an "event thread" when you run it.
Google has a few hits for \_NSEventThread, but nothing very interesting, and certainly nothing (that I could find) telling why Apple did this. What I said above I found out on my own, by trial and error.

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 78](/show_bug.cgi?id=1092855#c78)• 10 years ago |
|  | |

(In reply to [comment #72](/show_bug.cgi?id=1092855#c72 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10") and [comment #73](/show_bug.cgi?id=1092855#c73 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10"))
> The breakpoint was hit before the log file was created. Once I
> continued, the log file was created under /tmp.
Glad to hear this. It confirms that the CoreGraphics framework is
really writing those logs.

|  | [Stefan Arentz | :st3fan | ⏰ EST | he/him](/user_profile?user_id=388264) |  |
| --- | --- | --- |
| [Comment 79](/show_bug.cgi?id=1092855#c79)• 10 years ago |
|  | |

I also have this log file on my system. I've only used on Firefox 33.0.2 in this Mac. No Nightly. I do run VMWare and iTerm. Happy to help figure out what is going on.

|  | [Stefan Arentz | :st3fan | ⏰ EST | he/him](/user_profile?user_id=388264) |  |
| --- | --- | --- |
| [Comment 80](/show_bug.cgi?id=1092855#c80)• 10 years ago |
|  | |

(In reply to Stefan Arentz [:st3fan] from [comment #79](/show_bug.cgi?id=1092855#c79 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10"))
> I also have this log file on my system. I've only used on Firefox 33.0.2 in
> this Mac. No Nightly. I do run VMWare and iTerm. Happy to help figure out
> what is going on.
Clean install of Yosemite 10.10. No previous betas. MacBook Pro 13" Retina.

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 81](/show_bug.cgi?id=1092855#c81)• 10 years ago |
|  | |

Come to think of it, here's another experiment to try:
1) Create a spare copy of Firefox (release or m-c nightly).
2) Run it and confirm that your /tmp/CGLog\_Program\_PID event logs get created.
3) Quit Firefox, then change its CFBundleID (in Contents/Info.plist) from "org.mozilla.[something]" to "com.blah.blah".
4) Run this copy from the command line (which you'll need to do since you've invalidated its signature).
5) Wait to see if the event logs still get created.
(Stefan, now that you've joined the club you can try this too.)

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 82](/show_bug.cgi?id=1092855#c82)• 10 years ago |
|  | |

Stefan, please also try my rev2 interpose library ([attachment 8518488](/attachment.cgi?id=8518488 "Another interpose library for logging") [[details]](/attachment.cgi?id=8518488&action=edit "Another interpose library for logging")). Instructions for use are at the top of interpose.mm.

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 83](/show_bug.cgi?id=1092855#c83)• 10 years ago |
|  | |

(In reply to [comment #80](/show_bug.cgi?id=1092855#c80 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10"))
> Clean install of Yosemite 10.10.
You mean that it wasn't an upgrade from a previous OS X release (like 10.9.5)?

|  | [Stefan Arentz | :st3fan | ⏰ EST | he/him](/user_profile?user_id=388264) |  |
| --- | --- | --- |
| [Comment 84](/show_bug.cgi?id=1092855#c84)• 10 years ago |
|  | |

Two WindowServer related entries in my system logs:
system.log:Nov 7 11:54:44 Defiant.local WindowServer[23780]: disable\_update\_timeout: UI updates were forcibly disabled by application "Firefox" for over 1.00 seconds. Server has re-enabled them.
system.log:Nov 7 11:54:45 Defiant.local WindowServer[23780]: common\_reenable\_update: UI updates were finally reenabled by application "Firefox" after 2.65 seconds (server forcibly re-enabled them after 1.00 seconds)
Not sure if relevant.

|  | [Stefan Arentz | :st3fan | ⏰ EST | he/him](/user_profile?user_id=388264) |  |
| --- | --- | --- |
| [Comment 85](/show_bug.cgi?id=1092855#c85)• 10 years ago |
|  | |

(In reply to Steven Michaud from [comment #83](/show_bug.cgi?id=1092855#c83 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10"))
> (In reply to [comment #80](/show_bug.cgi?id=1092855#c80 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10"))
>
> > Clean install of Yosemite 10.10.
>
> You mean that it wasn't an upgrade from a previous OS X release (like
> 10.9.5)?
No, sorry. When I bought this machine last week it had 10.9.x on it. I upgraded it to 10.10 via the App Store.
I do have another Mac at home that I did cleanly install from a 10.10 USB Drive. I'll investigate there.
S.

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 86](/show_bug.cgi?id=1092855#c86)• 10 years ago |
|  | |

> Not sure if relevant.
Possibly relevant. I don't have the event logs and I don't have any of these messages.
Kamil and Kent, do you see these?

|  | [Eric Rahm [:erahm]](/user_profile?user_id=496127) |  |
| --- | --- | --- |
| [Comment 87](/show_bug.cgi?id=1092855#c87)• 10 years ago |
|  | |

I can confirm this as well. I have logs for both Fx Nightly and Thunderbird (which definitely seems to implicate libxul). This was an upgrade from 10.9.(5?) to 10.10.

|  | [Stefan Arentz | :st3fan | ⏰ EST | he/him](/user_profile?user_id=388264) |  |
| --- | --- | --- |
| [Comment 88](/show_bug.cgi?id=1092855#c88)• 10 years ago |
|  | |

On my work laptop:
% ls -l CGLog\_\*
-rw-r--r--@ 1 sarentz wheel 1206926 5 Nov 09:19 CGLog\_Firefox\_13127
-rw-r--r--@ 1 sarentz wheel 9954818 3 Nov 15:04 CGLog\_Firefox\_7777
-rw-r--r-- 1 sarentz wheel 33329015 7 Nov 10:27 CGLog\_Nightly\_16428
I was thinking maybe this is enable by a plugin. But on my other Mac I have nothing installed except for OpenH264 and QuickTime.

|  | [Kamil Jozwiak [:kjozwiak]](/user_profile?user_id=455785) |  |
| --- | --- | --- |
| [Comment 89](/show_bug.cgi?id=1092855#c89)• 10 years ago |
|  | |

> Please double-check to make sure you were using my rev2 interpose library.
> In fact I'd suggest rebooting your computer before testing again.
- downloaded the rev2 interpose library from [comment # 82](/show_bug.cgi?id=1092855#c82 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10")
- restarted the machine
- tar xvzf bugzilla1092855-interpose-lib-rev2.tgz
- export DYLD\_INSERT\_LIBRARIES=/Users/kjozwiak/Downloads/interpose/interpose.dylib
- /Applications/FirefoxNightly.app/Contents/MacOS/firefox
(Fri Nov 7 13:07:53 2014) /Applications/FirefoxNightly.app/Contents/MacOS/firefox[436] print\_log\_entries()
(interpose.dylib) PrintStackTrace() + 0xb1
(interpose.dylib) Hooked\_print\_log\_entries(void\*, void\*) + 0x52
(CoreGraphics) (anonymous namespace)::MessageLogger::add\_log(std::\_\_1::unique\_ptr<(anonymous namespace)::Log, std::\_\_1::default\_delete<(anonymous namespace)::Log> >) + 0x262
(CoreGraphics) CGSEventLogEvent + 0x199
(CoreGraphics) CGSGetNextEventRecordInternal + 0x112
(CoreGraphics) CGEventCreateNextEvent + 0x32
(HIToolbox) PullEventsFromWindowServerOnConnection(unsigned int, unsigned char, \_\_CFMachPortBoost\*) + 0x66
(HIToolbox) MessageHandler(\_\_CFMachPort\*, void\*, long, void\*) + 0x33
(CoreFoundation) \_\_CFMachPortPerform + 0xf7
(CoreFoundation) \_\_CFRUNLOOP\_IS\_CALLING\_OUT\_TO\_A\_SOURCE1\_PERFORM\_FUNCTION\_\_ + 0x29
(CoreFoundation) \_\_CFRunLoopDoSource1 + 0x1db
(CoreFoundation) \_\_CFRunLoopRun + 0x947
(CoreFoundation) CFRunLoopRunSpecific + 0x128
(AppKit) \_NSEventThread + 0x89
(libsystem\_pthread.dylib) \_pthread\_body + 0x83
(libsystem\_pthread.dylib) \_pthread\_body + 0x0
(libsystem\_pthread.dylib) thread\_start + 0xd
> Kamil and Kent, do you see these?
Searched through a bunch of my system.log files and couldn't find anything similar to those error messages involving fx.

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 90](/show_bug.cgi?id=1092855#c90)• 10 years ago |
|  | |

Whoever sees these logs:
What you most urgently need to do is follow my request in [comment #81](/show_bug.cgi?id=1092855#c81 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10").
Plugins have already been ruled out above (see [comment #69](/show_bug.cgi?id=1092855#c69 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10") and [comment #70](/show_bug.cgi?id=1092855#c70 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10")). So have extensions (since the logs still appear in safe mode). Kamil has already satisfied me wrt [comment #82](/show_bug.cgi?id=1092855#c82 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10").

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 91](/show_bug.cgi?id=1092855#c91)• 10 years ago |
|  | |

Kamil and Stefan:
Could you upload your CoreGraphics framework binary somewhere so I could download it? I suggest using your people.mozilla.com account. By "CoreGraphics framework binary" I mean this file:
/System/Library/Frameworks/CoreGraphics.framework/CoreGraphics

|  | [Stefan Arentz | :st3fan | ⏰ EST | he/him](/user_profile?user_id=388264) |  |
| --- | --- | --- |
| [Comment 92](/show_bug.cgi?id=1092855#c92)• 10 years ago |
|  | |

(In reply to Steven Michaud from [comment #91](/show_bug.cgi?id=1092855#c91 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10"))
> Kamil and Stefan:
>
> Could you upload your CoreGraphics framework binary somewhere so I could
> download it? I suggest using your people.mozilla.com account. By
> "CoreGraphics framework binary" I mean this file:
>
> /System/Library/Frameworks/CoreGraphics.framework/CoreGraphics
Before I send it:
% md5 CoreGraphics
MD5 (CoreGraphics) = cc11a2e83d79be27f2b514504798baf4
Let me know if you still need it.
I'm in meetings, can do more later. Will run the interpose lib.

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 93](/show_bug.cgi?id=1092855#c93)• 10 years ago |
|  | |

(From [comment #84](/show_bug.cgi?id=1092855#c84 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10"))
> Two WindowServer related entries in my system logs:
>
> system.log:Nov 7 11:54:44 Defiant.local WindowServer[23780]:
> disable\_update\_timeout: UI updates were forcibly disabled by
> application "Firefox" for over 1.00 seconds. Server has re-enabled
> them.
>
> system.log:Nov 7 11:54:45 Defiant.local WindowServer[23780]:
> common\_reenable\_update: UI updates were finally reenabled by
> application "Firefox" after 2.65 seconds (server forcibly re-enabled
> them after 1.00 seconds)
>
> Not sure if relevant.
(From [comment #89](/show_bug.cgi?id=1092855#c89 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10"))
> Searched through a bunch of my system.log files and couldn't find
> anything similar to those error messages involving fx.
So they're probably not relevant.

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 94](/show_bug.cgi?id=1092855#c94)• 10 years ago |
|  | |

(In reply to [comment #92](/show_bug.cgi?id=1092855#c92 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10") and following up [comment #91](/show_bug.cgi?id=1092855#c91 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10"))
> % md5 CoreGraphics
> MD5 (CoreGraphics) = cc11a2e83d79be27f2b514504798baf4
>
> Let me know if you still need it.
No, I don't. Mine has the same hash value.

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 95](/show_bug.cgi?id=1092855#c95)• 10 years ago |
|  | |

Please, please, please follow my steps in [comment #81](/show_bug.cgi?id=1092855#c81 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10").

|  | [Kamil Jozwiak [:kjozwiak]](/user_profile?user_id=455785) |  |
| --- | --- | --- |
| [Comment 96](/show_bug.cgi?id=1092855#c96)• 10 years ago |
|  | |

Steven, unfortunately I haven't setup a people.mozilla.com account, used S3 instead:
\* <https://s3.amazonaws.com/otherDocuments/CoreGraphics>
Appears that mine is the same as Stefan's as per [comment # 92](/show_bug.cgi?id=1092855#c92 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10"):
\* MD5 (CoreGraphics) = cc11a2e83d79be27f2b514504798baf4

|  | [Stefan Arentz | :st3fan | ⏰ EST | he/him](/user_profile?user_id=388264) |  |
| --- | --- | --- |
| [Comment 97](/show_bug.cgi?id=1092855#c97)• 10 years ago |
|  | |

(In reply to Steven Michaud from [comment #95](/show_bug.cgi?id=1092855#c95 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10"))
> Please, please, please follow my steps in [comment #81](/show_bug.cgi?id=1092855#c81 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10").
I will. But as a first step, I moved the logs away and restarted Nightly. They are not created immediately.

|  | [Stefan Arentz | :st3fan | ⏰ EST | he/him](/user_profile?user_id=388264) |  |
| --- | --- | --- |
| [Comment 98](/show_bug.cgi?id=1092855#c98)• 10 years ago |
|  | |

(In reply to Stefan Arentz [:st3fan] from [comment #97](/show_bug.cgi?id=1092855#c97 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10"))
> (In reply to Steven Michaud from [comment #95](/show_bug.cgi?id=1092855#c95 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10"))
> > Please, please, please follow my steps in [comment #81](/show_bug.cgi?id=1092855#c81 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10").
>
> I will. But as a first step, I moved the logs away and restarted Nightly.
> They are not created immediately.
Took about 10 minutes for the logs to be back after restarting Nightly.
Now running a Nightly with modified CFBundleIdentifier. Will report back.

|  | [Kent Howard](/user_profile?user_id=17205)  Reporter |  |
| --- | --- | --- |
| [Comment 99](/show_bug.cgi?id=1092855#c99)• 10 years ago |
|  | |

(In reply to Steven Michaud from [comment #74](/show_bug.cgi?id=1092855#c74 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10"))
> But what I'd really like both of you to do now is try my latest (rev2) interpose
> library, and leave it running until a log gets written. It hooks (and logs) the
> same calls as my rev1 interpose library, plus calls to CGSEventLoggingStart() and
> CGSEventLoggingStop().
(Fri Nov 7 09:14:56 2014) /Users/kent/Applications/Firefox.app/Contents/MacOS/firefox[1465] OnAddImage(): print\_log\_entries\_ptr 0x10008a000, CGSLogOpen\_ptr 0x10008a020, CGSEventLoggingStop\_ptr 0x10008a060, get\_shared\_logger\_ptr 0x7fff8f39c6de
(Fri Nov 7 09:18:42 2014) /Users/kent/Applications/Firefox.app/Contents/MacOS/plugin-container.app/Contents/MacOS/plugin-container[1657] OnAddImage(): print\_log\_entries\_ptr 0x104390000, CGSLogOpen\_ptr 0x104390020, CGSEventLoggingStop\_ptr 0x104390060, get\_shared\_logger\_ptr 0x7fff8f39c6de
(Fri Nov 7 10:20:53 2014) /Users/kent/Applications/Firefox.app/Contents/MacOS/firefox[1465] print\_log\_entries()
(interpose.dylib) PrintStackTrace() + 0xb1
(interpose.dylib) Hooked\_print\_log\_entries(void\*, void\*) + 0x52
(CoreGraphics) (anonymous namespace)::MessageLogger::add\_log(std::\_\_1::unique\_ptr<(anonymous namespace)::Log, std::\_\_1::default\_delete<(anonymous namespace)::Log> >) + 0x260
(CoreGraphics) CGSEventLogEvent + 0x1a8
(CoreGraphics) CGSGetNextEventRecordInternal + 0x112
(CoreGraphics) CGEventCreateNextEvent + 0x30
(HIToolbox) PullEventsFromWindowServerOnConnection(unsigned int, unsigned char, \_\_CFMachPortBoost\*) + 0x66
(HIToolbox) MessageHandler(\_\_CFMachPort\*, void\*, long, void\*) + 0x33
(CoreFoundation) \_\_CFMachPortPerform + 0xf7
(CoreFoundation) \_\_CFRUNLOOP\_IS\_CALLING\_OUT\_TO\_A\_SOURCE1\_PERFORM\_FUNCTION\_\_ + 0x29
(CoreFoundation) \_\_CFRunLoopDoSource1 + 0x1db
(CoreFoundation) \_\_CFRunLoopRun + 0x947
(CoreFoundation) CFRunLoopRunSpecific + 0x128
(AppKit) \_NSEventThread + 0x89
(libsystem\_pthread.dylib) \_pthread\_body + 0x83
(libsystem\_pthread.dylib) \_pthread\_body + 0x0
(libsystem\_pthread.dylib) thread\_start + 0xd
(Fri Nov 7 10:23:30 2014) /Users/kent/Applications/Firefox.app/Contents/MacOS/plugin-container.app/Contents/MacOS/plugin-container[5668] OnAddImage(): print\_log\_entries\_ptr 0x104390000, CGSLogOpen\_ptr 0x104390020, CGSEventLoggingStop\_ptr 0x104390060, get\_shared\_logger\_ptr 0x7fff8f39c6de

|  | [Kamil Jozwiak [:kjozwiak]](/user_profile?user_id=455785) |  |
| --- | --- | --- |
| [Comment 100](/show_bug.cgi?id=1092855#c100)• 10 years ago |
|  | |

(In reply to Steven Michaud from [comment #95](/show_bug.cgi?id=1092855#c95 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10"))
> Please, please, please follow my steps in [comment #81](/show_bug.cgi?id=1092855#c81 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10").
1) Created a copy of FirefoxNightly.app --> FirefoxNightly1.app
2) Ran fx from the terminal: /Applications/FirefoxNightly1.app/Contents/MacOS/firefox
3) Waited about 20 minutes and the log file was been created
4) Edited: /Applications/FirefoxNightly1.app/Contents/Info.plist and changed the following:
<key>CFBundleIdentifier</key>
<string>com.blah.blah</string>
5) Saved the change under /Applications/FirefoxNightly1.app/Contents/Info.plist
6) Ran fx from the terminal: /Applications/FirefoxNightly1.app/Contents/MacOS/firefox
7) Waited between 15-20 minutes and eventually "CGLog\_Nightly\_1074" was created under /tmp

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 101](/show_bug.cgi?id=1092855#c101)• 10 years ago |
|  | |

Thanks, Kamil! Stefan just told me on IRC that he got the same result.
Another theory bites the dust :-(
Stefan has a clean install (not an upgrade install) that he's currently testing on. If he doesn't get any log files I'll start experimenting with upgrade installs myself. I currently don't have one, but I can make them.

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 102](/show_bug.cgi?id=1092855#c102)• 10 years ago |
|  | |

Stefan now tells me he sees the logs even on his clean install of Yosemite. So there's probably no benefit to creating my own upgrade installs.
I'm close to being out of leads. Stefan suggests I "type a lot", including with the arrow keys, not necessarily in any text field. Does that ring a bell with others? Does anyone have more specific suggestions?

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 103](/show_bug.cgi?id=1092855#c103)• 10 years ago |
| obsolete | |

| Comment hidden (obsolete) |  |
| --- | --- |

alsdjf;laue;msd/f eorj/lkdnf/leurasdf sefp 'pewjrwjdfkjas;df;owearqwrsflj; oweurowe;fdja;sodiyrl2dlfja;sfl asasfasjflkajs;dlfj;aslfj;lasdkjf;aserc qweurouw'r;la/sldgjf;ase t'qp3o4tuq3urlasndg/lkaj'estra 'w;er;lashdf/lmasdl;fi welrjas;dfjlasjdf;ao;w 'e r;msdfas;lidfg'aslmfalsdhf ;lasdnf lasehr; qwer/lksandfanbds fawelr jalksdfl kjasd; fasldfjaeour'w;lf/lskdh;8yAEojflkadhs;gfoujsel fdmaw;eoiha;lwknef.asjkdhf;laisjdf;las;flkjw;eorijlknf;asihdf;alskdf wiER;O JW/ELRKJ;SLIDHF;LA SKNDF;WIYERPO9UR'LK;LJ;ljljds;toa uerejwr;qiwhr;lkj;wreout[as; efjasldjflashdflaskndf.lkashd;fojawe/rmnsldfhalsdnfaksdflajs
qwurpwuer[mp

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 104](/show_bug.cgi?id=1092855#c104)• 10 years ago |
|  | |

Sorry, that was me "typing a lot" :-)

|  | [Stefan Arentz | :st3fan | ⏰ EST | he/him](/user_profile?user_id=388264) |  |
| --- | --- | --- |
| [Comment 105](/show_bug.cgi?id=1092855#c105)• 10 years ago |
|  | |

(In reply to Steven Michaud from [comment #102](/show_bug.cgi?id=1092855#c102 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10"))
> Stefan now tells me he sees the logs even on his clean install of Yosemite.
> So there's probably no benefit to creating my own upgrade installs.
>
> I'm close to being out of leads. Stefan suggests I "type a lot", including
> with the arrow keys, not necessarily in any text field. Does that ring a
> bell with others? Does anyone have more specific suggestions?
I suggested this not to trigger the start of the logging but to trigger what the Log says at the top:
--- flushing event log at 301582.0088838 ---
My suspicion is that for the people who are seeing these files, that the event log starts as soon as you start up Firefox. It is just not flushed to disk until later.
So I suggested to dance on the keyboard simply to generate events that grow the log and eventually trigger the flushing of that log to disk. I'm not suggesting that the key events trigger some bug.

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 106](/show_bug.cgi?id=1092855#c106)• 10 years ago |
|  | |

Is everyone who sees these logs using a laptop? A MacBook Pro?
If you \*are\* using a laptop, do you have an external keyboard or mouse (or other kind of input device)?

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 107](/show_bug.cgi?id=1092855#c107)• 10 years ago |
|  | |

And no, my "typing a lot" didn't cause any logs to appear, on my Retina MacBook Pro without any external keyboard or mouse.

|  | [Kent Howard](/user_profile?user_id=17205)  Reporter |  |
| --- | --- | --- |
| [Comment 108](/show_bug.cgi?id=1092855#c108)• 10 years ago |
|  | |

(In reply to Steven Michaud from [comment #106](/show_bug.cgi?id=1092855#c106 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10"))
> Is everyone who sees these logs using a laptop? A MacBook Pro?
>
> If you \*are\* using a laptop, do you have an external keyboard or mouse (or
> other kind of input device)?
I am using a MacBookPro5,3 and, when home, use it with an external monitor and Apple's Bluetooth keyboard. Sounds like you are suggesting a test where I disconnect one or both?

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 109](/show_bug.cgi?id=1092855#c109)• 10 years ago |
|  | |

Actually, I can now reproduce enough of the problem to count ... even though I still haven't seen any logs.
I'm seeing calls to the internal CoreGraphics MessageLogger::add\_log() method.
Stefan, you were right! I just hadn't yet logged enough events for them to be logged to disk.
There's still a lot I need to figure out. But at least I can now do it on my own machine.

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 110](/show_bug.cgi?id=1092855#c110)• 10 years ago |
|  | |

I don't see the calls to MessageLogger::add\_log() in either Safari or Chrome. I'll need to figure out why.

|  | [Stefan Arentz | :st3fan | ⏰ EST | he/him](/user_profile?user_id=388264) |  |
| --- | --- | --- |
| [Comment 111](/show_bug.cgi?id=1092855#c111)• 10 years ago |
|  | |

(In reply to Steven Michaud from [comment #110](/show_bug.cgi?id=1092855#c110 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10"))
> I don't see the calls to MessageLogger::add\_log() in either Safari or
> Chrome. I'll need to figure out why.
Would it make sense to make a build that links to the 10.9 or 10.10 SDK and see if that makes a difference?

|  | [Kamil Jozwiak [:kjozwiak]](/user_profile?user_id=455785) |  |
| --- | --- | --- |
| [Comment 112](/show_bug.cgi?id=1092855#c112)• 10 years ago |
|  | |

(In reply to Steven Michaud from [comment #106](/show_bug.cgi?id=1092855#c106 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10"))
> Is everyone who sees these logs using a laptop? A MacBook Pro?
>
> If you \*are\* using a laptop, do you have an external keyboard or mouse (or
> other kind of input device)?
I'm using MacBookPro11,3 and only use the external apple mouse. Never used an external monitor/keyboard.

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 113](/show_bug.cgi?id=1092855#c113)• 10 years ago |
|  | |

> Would it make sense to make a build that links to the 10.9 or 10.10
> SDK and see if that makes a difference?
It might.
But we can't do that for release builds. And I've got a very simple
"fix" in mind, which I'm about to try.

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 114](/show_bug.cgi?id=1092855#c114)• 10 years ago |
|  | |

That simple fix didn't work, but I'll keep looking for one.

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 115](/show_bug.cgi?id=1092855#c115)• 10 years ago |
|  | |

I just did some builds with the 10.9 and 10.10 SDKs. All of them have this bug, so that's not the direction to look for a solution.
All were done on Yosemite, with the latest version for Yosemite of XCode's command line tools. All were 64-bit opt builds, but otherwise as much like mozilla-central nightlies as possible. Two used the 10.9 SDK, one with --enable-macos-target=10.6 and one without any macos-target setting. One used the 10.10 SDK without any macos-target setting.
I'm going to be putting this on the back burner for a while, as I've got lots of other things to do. But it may be good to come back to this after a break.

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 116](/show_bug.cgi?id=1092855#c116)• 10 years ago |
|  | |

I should mention that I've also started playing with changes to our Info.plist file -- so far without any positive results.

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 117](/show_bug.cgi?id=1092855#c117)• 10 years ago |
|  | |

I'm probably best suited to take this bug. But I don't mean to stop others working on it. I'd be very happy to see someone else fix it (or more likely find a workaround for what is probably an Apple bug).Assignee: nobody → smichaud

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 118](/show_bug.cgi?id=1092855#c118)• 10 years ago |
|  | |

Anyone know of a clang/gcc option that guarantees uninitialized memory is always NULLed, even in dynamically linked libraries (like the CoreGraphics framework)? Or of a linker option that does the same thing?
I think it's quite likely that would fix this bug.

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 119](/show_bug.cgi?id=1092855#c119)• 10 years ago |
|  | |

The whole CoreGraphics logging mechanism changed a lot with the Yosemite release. The Mavericks implementation is very much like the Mountain Lion one, and very different. That's probably why we don't see this bug on OS X 10.9.X and earlier.

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 120](/show_bug.cgi?id=1092855#c120)• 10 years ago |
|  | |

Next week I'll open an Apple bug on this. I don't think it's very likely they'll fix it ... but at least we'll have done our due diligence.

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 121](/show_bug.cgi?id=1092855#c121)• 10 years ago |
|  | |

Attached file
[Proof of concept that this bug is caused by unitialized memory in the CoreGraphics framework](attachment.cgi?id=8519321) (obsolete)
— [Details](attachment.cgi?id=8519321&action=edit)

This is \*not\* a fix. But I think it shows conclusively that this is an Apple bug. The bug is that the first byte of the "shared logger" returned by (anonymous namespace)::shared\_logger() is uninitialized. Space is allocated for this object by the "new" operator. But though many of its fields are initialized to correct values, the first byte isn't. It's the value of this byte which determines whether logging is on or off (it determines the return value of CGSEventShouldLogEvents()).
Run any version of Firefox or Thunderbird with this interpose library, following the instructions at the top of interpose.mm. You'll find that the logging stops.
This kind of bug is impossible to fix directly. But, as Safari, Chrome and Opera aren't effected, I think there's hope that we can find an indirect solution -- a workaround.

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 122](/show_bug.cgi?id=1092855#c122)• 10 years ago |
|  | |

Actually, my "proof" isn't quite so conclusive, after all.
This is a jemalloc bug ... sort of :-(

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 123](/show_bug.cgi?id=1092855#c123)• 10 years ago |
|  | |

If you call (anonymous namespace)::shared\_logger() early enough, before jemalloc is initialized (as my interpose library from [comment #121](/show_bug.cgi?id=1092855#c121 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10") does), the bug doesn't happen. That's because, without jemalloc, unitialized memory \*is\* NULLed. (Note that (anonymous namespace)::shared\_logger() creates the shared logger only once, the first time it's called.)
But jemalloc poisons unitialized memory to byte values of 0x5a -- just as it does with freed memory.
This is still an Apple bug. But the reason only we're effected is that only we use jemalloc. So this is one bug Apple is almost certainly not going to fix.
I don't quite know where we go from here. But my brain needs a rest. Let's pick this up again next week.

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 124](/show_bug.cgi?id=1092855#c124)• 10 years ago |
|  | |

Attached file
[Interpose library that shows this bug happen in Firefox but not elsewhere](attachment.cgi?id=8519352)
— [Details](attachment.cgi?id=8519352&action=edit)

Here's yet another interpose library.
This also \*fixes\* the bug in Firefox. But in addition it shows the bug happening in Firefox and not happening in other apps.
[Attachment #8519321](/attachment.cgi?id=8519321&action=edit "Proof of concept that this bug is caused by unitialized memory in the CoreGraphics framework") -
Attachment is obsolete: true

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1092855#a447631_406194)• 10 years ago |

Summary: insecure and unnecessary /tmp/CGLog\_Program\_PID event logging → jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10

|  | [(Away)](/user_profile?user_id=477892) |  |
| --- | --- | --- |
| [Comment 125](/show_bug.cgi?id=1092855#c125)• 10 years ago |
|  | |

(In reply to Steven Michaud from [comment #123](/show_bug.cgi?id=1092855#c123 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10"))
> If you call (anonymous namespace)::shared\_logger() early enough, before
> jemalloc is initialized (as my interpose library from [comment #121](/show_bug.cgi?id=1092855#c121 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10") does),
> the bug doesn't happen. That's because, without jemalloc, unitialized
> memory \*is\* NULLed. (Note that (anonymous namespace)::shared\_logger()
> creates the shared logger only once, the first time it's called.)
>
> But jemalloc poisons unitialized memory to byte values of 0x5a -- just as it
> does with freed memory.
Is that right? Last I checked, jemalloc treats uninitialized and freed regions separately -- opt\_junk and opt\_poison respectively. If opt\_junk is enabled, uninitialized memory gets 0xa5 (not 0x5a), but we don't enable opt\_junk in release builds.

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 126](/show_bug.cgi?id=1092855#c126)• 10 years ago |
|  | |

(In reply to [comment #125](/show_bug.cgi?id=1092855#c125 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10"))
All I can say is that the uninitialized byte in question is set to 0x5a in both FF 33.0.2 and a recent m-c nightly. And in both cases zeroing it "fixes" this bug. Try testing on Yosemite with my rev4 interpose library from [comment #124](/show_bug.cgi?id=1092855#c124 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10"). The same byte is always already 0 in other browsers (Safari, Chrome, Opera). And that byte is 0 even in Firefox if the shared\_logger object is allocated before jemalloc is initialized.
So it's almost certainly jemalloc that originally sets this byte to 0x5a, but I'm not sure exactly how this happens. Possibly it's because the shared\_logger object is re-using memory that was originally released by jemalloc, and poisoned at that time to 0x5a.

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 127](/show_bug.cgi?id=1092855#c127)• 10 years ago |
|  | |

By the way, I've already thought of several ways to work around this bug without changing jemalloc. I'll try them out on Monday.

|  | [Kamil Jozwiak [:kjozwiak]](/user_profile?user_id=455785) |  |
| --- | --- | --- |
| [Comment 128](/show_bug.cgi?id=1092855#c128)• 10 years ago |
|  | |

Steven, would it be useful for me to run the new interpose library from [comment #124](/show_bug.cgi?id=1092855#c124 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10") and adding the results here?

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 129](/show_bug.cgi?id=1092855#c129)• 10 years ago |
|  | |

(In reply to [comment #128](/show_bug.cgi?id=1092855#c128 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10"))
Go ahead, please do.

|  | [Mike Hommey [:glandium]](/user_profile?user_id=47192) |  |
| --- | --- | --- |
| [Comment 130](/show_bug.cgi?id=1092855#c130)• 10 years ago |
|  | |

(In reply to Steven Michaud from [comment #126](/show_bug.cgi?id=1092855#c126 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10"))
> So it's almost certainly jemalloc that originally sets this byte to 0x5a,
> but I'm not sure exactly how this happens.
Likely sequence is that something frees a buffer, which jemalloc then poisons with 0x5a, and shared\_logger allocates a new block and jemalloc gives that previously freed buffer.

|  | [Mike Hommey [:glandium]](/user_profile?user_id=47192) |  |
| --- | --- | --- |
| [Comment 131](/show_bug.cgi?id=1092855#c131)• 10 years ago |
|  | |

IOW, it's a straightforward use of uninitialized memory, and it makes visible problems depending on what particular part of memory is given out by the allocator.

|  | [Kamil Jozwiak [:kjozwiak]](/user_profile?user_id=455785) |  |
| --- | --- | --- |
| [Comment 133](/show_bug.cgi?id=1092855#c133)• 10 years ago |
|  | |

apologies for the spam not sure what happened there..!

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 134](/show_bug.cgi?id=1092855#c134)• 10 years ago |
|  | |

Attached patch

[Fix](attachment.cgi?id=8520346&action=diff) (obsolete)
— [Details](attachment.cgi?id=8520346&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1092855&attachment=8520346)

Here's a patch that works around this bug in my tests.
I've started a set of tryserver builds:
<https://tbpl.mozilla.org/?tree=Try&rev=d5a856f318b8>
I'll wait to ask for review until I hear testing results from the people who reported this bug.
It was going to be difficult or impossible to create the shared\_logger object before jemalloc is initialized. But it turns out there's an easy way to use CGSSetDebugOptions() to explicitly turn CGEvent logging off (or on, for that matter).

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 135](/show_bug.cgi?id=1092855#c135)• 10 years ago |
|  | |

Here's a tryserver build made with my patch from [comment #134](/show_bug.cgi?id=1092855#c134 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10"):
[http://ftp.mozilla.org/pub/mozilla.org/firefox/try-builds/smichaud@pobox.com-d5a856f318b8/try-macosx64/firefox-36.0a1.en-US.mac.dmg](http://ftp.mozilla.org/pub/mozilla.org/firefox/try-builds/smichaud%40pobox.com-d5a856f318b8/try-macosx64/firefox-36.0a1.en-US.mac.dmg)
Please try it out!

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 136](/show_bug.cgi?id=1092855#c136)• 10 years ago |
|  | |

I've tried it out myself, and found that CGEvents can still get logged by the plugin process (in non-e10s mode). So I'll need to add something to my patch to prevent this. New patch coming up tomorrow.

|  | [David Bolter [:davidb] (NeedInfo me for attention)](/user_profile?user_id=152868) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1092855#a764800_152868)• 10 years ago |

Keywords: [sec-high](/buglist.cgi?keywords=sec-high&resolution=---)

|  | [Kamil Jozwiak [:kjozwiak]](/user_profile?user_id=455785) |  |
| --- | --- | --- |
| [Comment 137](/show_bug.cgi?id=1092855#c137)• 10 years ago |
|  | |

Steven, I ran the new interpose library from [comment #124](/show_bug.cgi?id=1092855#c124 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10") for a few hours and didn't see the log file being created under /tmp. Usually the file would have been created by now. Log entries:
\* (Tue Nov 11 12:43:32 2014) /Applications/FirefoxNightly.app/Contents/MacOS/plugin-container.app/Contents/MacOS/plugin-container[854] shared\_logger(): returning 0x10ce9c4c0, changed first byte from '0x5a' to '0'
\* (Tue Nov 11 13:07:50 2014) /Applications/FirefoxNightly.app/Contents/MacOS/plugin-container.app/Contents/MacOS/plugin-container[943] shared\_logger(): returning 0x108bb15c0, changed first byte from '0x5a' to '0'
\* (Tue Nov 11 13:31:44 2014) /Applications/FirefoxNightly.app/Contents/MacOS/plugin-container.app/Contents/MacOS/plugin-container[1033] shared\_logger(): returning 0x10c79d880, changed first byte from '0x5a' to '0'Keywords: [sec-high](/buglist.cgi?keywords=sec-high&resolution=---)

|  | [Kamil Jozwiak [:kjozwiak]](/user_profile?user_id=455785) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1092855#a765437_455785)• 10 years ago |

Keywords: [sec-high](/buglist.cgi?keywords=sec-high&resolution=---)

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 138](/show_bug.cgi?id=1092855#c138)• 10 years ago |
|  | |

Attached patch

[Fix rev1](attachment.cgi?id=8520784&action=diff)
— [Details](attachment.cgi?id=8520784&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1092855&attachment=8520784)

Here's another patch, which fixes the problem I mentioned in [comment #136](/show_bug.cgi?id=1092855#c136 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10") (which by the way happened when you opened a context menu above a Flash movie).
I've started another run of tryserver builds:
<https://tbpl.mozilla.org/?tree=Try&rev=91afa580c4c6>
[Attachment #8520346](/attachment.cgi?id=8520346&action=edit "Fix") -
Attachment is obsolete: true

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 139](/show_bug.cgi?id=1092855#c139)• 10 years ago |
|  | |

> Keywords: sec-high
Though the creator of these log files (the CoreGraphics framework) is definitely not malicious, I agree with this. The problem is that, unless we can work around this problem quickly, other, truly malicious apps may be written to take advantage of the presence of this bug's log files.

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Comment 140](/show_bug.cgi?id=1092855#c140)• 10 years ago |
|  | |

Yeah, it doesn't quite fit in with our classification of sec-high, given that it requires code running on your machine locally already, but the severity of the information leaked made it feel like more than a sec-moderate.

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 141](/show_bug.cgi?id=1092855#c141)• 10 years ago |
|  | |

Here's a tryserver build made from my rev1 patch in [comment #138](/show_bug.cgi?id=1092855#c138 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10"):
[http://ftp.mozilla.org/pub/mozilla.org/firefox/try-builds/smichaud@pobox.com-91afa580c4c6/try-macosx64/firefox-36.0a1.en-US.mac.dmg](http://ftp.mozilla.org/pub/mozilla.org/firefox/try-builds/smichaud%40pobox.com-91afa580c4c6/try-macosx64/firefox-36.0a1.en-US.mac.dmg)
Please try it out!
Especially you, Kamil :-)

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1092855#a770659_67806)• 10 years ago |

[Attachment #8520784](/attachment.cgi?id=8520784&action=edit "Fix rev1") -
Flags: review?(spohl.mozilla.bugs)

|  | [Stephen A Pohl [:spohl]](/user_profile?user_id=456485) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1092855#a772511_456485)• 10 years ago |

[Attachment #8520784](/attachment.cgi?id=8520784&action=edit "Fix rev1") -
Flags: review?(spohl.mozilla.bugs) → review+

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 142](/show_bug.cgi?id=1092855#c142)• 10 years ago |
|  | |

Comment on [attachment 8520784](/attachment.cgi?id=8520784 "Fix rev1") [[details]](/attachment.cgi?id=8520784&action=edit "Fix rev1") [[diff]](/attachment.cgi?id=8520784&action=diff "Fix rev1") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1092855&attachment=8520784)
Fix rev1
Landed on fx-team:
<https://hg.mozilla.org/integration/fx-team/rev/9a33d0207b18>
I want to let this bake on m-c for a couple of days. But then I'll request uplift to aurora and beta ... and possibly also release for a possible 33.1.1 release.
Not that I think this bug would justify such a release by itself. But the bug is serious enough (and easy enough to fix) that I think it could ride along.

|  | [Eric Rahm [:erahm]](/user_profile?user_id=496127) |  |
| --- | --- | --- |
| [Comment 143](/show_bug.cgi?id=1092855#c143)• 10 years ago |
|  | |

Have you filed a bug w/ Apple about this? Regardless of whether we think they will fix it, they should definitely be made aware of the issue. We're certainly not the only project that uses a custom allocator.Flags: needinfo?(smichaud)

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 144](/show_bug.cgi?id=1092855#c144)• 10 years ago |
|  | |

> Have you filed a bug w/ Apple about this?
Not yet. I'll do so now.Flags: needinfo?(smichaud)

|  | [(Away)](/user_profile?user_id=477892) |  |
| --- | --- | --- |
| [Comment 145](/show_bug.cgi?id=1092855#c145)• 10 years ago |
|  | |

> I want to let this bake on m-c for a couple of days. But then I'll request
> uplift to aurora and beta ... and possibly also release for a possible
> 33.1.1 release.
[status-firefox33](/buglist.cgi?f1=cf_status_firefox33&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox33&o1=equals&v1=affected)
[status-firefox34](/buglist.cgi?f1=cf_status_firefox34&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox34&o1=equals&v1=affected)
[status-firefox35](/buglist.cgi?f1=cf_status_firefox35&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox35&o1=equals&v1=affected)
[tracking-firefox33](/buglist.cgi?f1=cf_tracking_firefox33&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox33&o1=equals&v1=%3F)
[tracking-firefox34](/buglist.cgi?f1=cf_tracking_firefox34&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox34&o1=equals&v1=%3F)
[tracking-firefox35](/buglist.cgi?f1=cf_tracking_firefox35&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox35&o1=equals&v1=%3F)

|  | [Eric Rahm [:erahm]](/user_profile?user_id=496127) |  |
| --- | --- | --- |
| [Comment 146](/show_bug.cgi?id=1092855#c146)• 10 years ago |
|  | |

Also FWIW this really isn't a custom allocator issue, there are no guarantees that the memory you get from |malloc| is zeroed on OSX. They're just getting lucky. A super simple example to show the issue:
test.cpp:
#include "stdlib.h"
#include "stdio.h"
int main() {
char\* test = (char\*)malloc(100);
for (size\_t i = 0; i < 100; i++) {
printf("%x, ", (int)test[i]);
}
return 0;
}
clang++ test.cpp && ./a.out

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 147](/show_bug.cgi?id=1092855#c147)• 10 years ago |
|  | |

(In reply to [comment #146](/show_bug.cgi?id=1092855#c146 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10"))
> Also FWIW this really isn't a custom allocator issue
I'm not so sure. There may be special linker or compiler options that cause uninitialized memory to be NULLed, unless a custom allocator interferes (the sort of thing I was asking about in [comment #118](/show_bug.cgi?id=1092855#c118 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10")). And the uninitialized byte (at the beginning of the shared\_logger object) is definitely '0' in all other apps that I tried -- Safari, Chrome and Opera. It's only non-zero (0x5a) in Mozilla apps.
But in any case the real bug here is that the first byte of the shared\_logger object is uninitialized. That's what I'll report to Apple.

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 148](/show_bug.cgi?id=1092855#c148)• 10 years ago |
|  | |

Here's the bug report I submitted to Apple:
The CoreGraphics framework has long had the capability of logging
CGEvents pulled from the WindowServer. This is off by default, but
can be turned on using a call to CGSSetDebugOptions(0x80000008).
Starting with Yosemite (OS X 10.10), the CoreGraphics framework uses a
MessageLogger::shared\_logger()::shared\_instance object to do the
logging. This object is allocated (and initialized) only once -- the
first time ::shared\_logger() is called. The value of its first byte
is used to determine whether logging is on or not (in calls to
CGSEventShouldLogEvents()) -- if it's zero logging is off, otherwise
logging is on.
The only problem with this is that the first byte of the shared\_logger
object is never initialized. The ::shared\_logger() method uses "new"
to allocate memory for the shared\_logger object, and initializes many
of its fields. But it never initializes the first byte.
So if that first byte is non-zero, CGEvent logging is on by default.
This causes two problems: 1) The resulting /tmp/CGLog\_app\_pid files
can grow quite large, especially if you rarely restart your
computer. 2) And much more seriously, these logs contain entries for
all your keystrokes -- so they could be used by a malicious
third-party app as a key logger.
For most apps this unitialized first byte doesn't cause trouble -- for
example, in Safari, Chrome and Opera it's always '0'. But it does
cause trouble for Mozilla apps (like Firefox and Thunderbird),
probably because they use a custom memory allocator (jemalloc) that
"poisons" released memory with the byte value 0x5a. So in Firefox and
Thunderbird (unless we do something about it), the first byte of the
shared\_logger object is always '0x5a', and CGEvent logging is always
on (when running on Yosemite).
At Mozilla we've found a workaround for this, which will get into the
next releases of Firefox and Thunderbird. So we don't need a fix from
Apple. But there may be other apps that use custom memory allocators,
which are also effected by this bug, and which haven't yet discovered
workarounds.
This bug was originally reported here, where further discussion will
continue:
[https://bugzilla.mozilla.org/show\_bug.cgi?id=1092855](/show_bug.cgi?id=1092855 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10")
Because this is a security bug, access to it is restricted. If any
Apple developers wish to see it, they'll need to create accounts at
<http://bugzilla.mozilla.org>, then contact me (by email). I'll give
their accounts permission to see the bug.Whiteboard: rdar://18946701

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 149](/show_bug.cgi?id=1092855#c149)• 10 years ago |
|  | |

I've opened [bug 1097340](/show_bug.cgi?id=1097340 "NEW - Consider having jemalloc zero newly allocated memory") about having jemalloc zero newly allocated memory.

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 150](/show_bug.cgi?id=1092855#c150)• 10 years ago |
|  | |

(In reply to [comment #146](/show_bug.cgi?id=1092855#c146 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10"))
Eric, try rewriting your example using new instead of malloc.
"new" is what's used to allocate the shared\_logger object.

|  | [Lukas Blakk [:lsblakk] use ?needinfo](/user_profile?user_id=272375) |  |
| --- | --- | --- |
| [Comment 151](/show_bug.cgi?id=1092855#c151)• 10 years ago |
|  | |

Tracking for Aurora & Nightly, we're almost out the door with Beta so it might be too late there, will have to make a case for risk vs. reward here.
[status-firefox36](/buglist.cgi?f1=cf_status_firefox36&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox36&o1=equals&v1=affected)
[tracking-firefox35](/buglist.cgi?f1=cf_tracking_firefox35&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox35&o1=equals&v1=%3F) → [+](/buglist.cgi?f1=cf_tracking_firefox35&o1=equals&v1=%2B)
[tracking-firefox36](/buglist.cgi?f1=cf_tracking_firefox36&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox36&o1=equals&v1=%2B)

|  | [Eric Rahm [:erahm]](/user_profile?user_id=496127) |  |
| --- | --- | --- |
| [Comment 152](/show_bug.cgi?id=1092855#c152)• 10 years ago |
|  | |

(In reply to Steven Michaud from [comment #150](/show_bug.cgi?id=1092855#c150 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10"))
> (In reply to [comment #146](/show_bug.cgi?id=1092855#c146 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10"))
>
> Eric, try rewriting your example using new instead of malloc.
>
> "new" is what's used to allocate the shared\_logger object.
Same issue w/ new. Simple test:
#include "stdlib.h"
#include "stdio.h"
class Test {
public:
int a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t, u, v, w, x, y, z;
};
int main() {
char\* test = new char[100];
for (size\_t i = 0; i < 100; i++) {
printf("%d, ", test[i]);
}
printf("\n");
Test\* t = new Test;
printf("%d, %d, %d, %d, %d, %d, %d, %d, %d, %d, %d, %d, %d, %d, %d, %d, %d, %d, %d, %d, %d, %d, %d, %d, %d, %d\n",
t->a, t->b, t->c, t->d, t->e, t->f, t->g, t->h, t->i, t->j, t->k, t->l, t->m, t->n, t->o, t->p, t->q, t->r, t->s, t->t, t->u, t->v, t->w, t->x, t->y, t->z);
}

|  | [Mike Hommey [:glandium]](/user_profile?user_id=47192) |  |
| --- | --- | --- |
| [Comment 153](/show_bug.cgi?id=1092855#c153)• 10 years ago |
|  | |

And that's why one needs to do new Test() instead of new Test;

|  | [Wes Kocher (:KWierso) (Not reading bugmail; email directly if needed)](/user_profile?user_id=308534) |  |
| --- | --- | --- |
| [Comment 154](/show_bug.cgi?id=1092855#c154)• 10 years ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/9a33d0207b18>Status: NEW → RESOLVEDClosed: 10 years ago
[status-firefox36](/buglist.cgi?f1=cf_status_firefox36&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox36&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox36&o1=equals&v1=fixed)Resolution: --- → FIXEDTarget Milestone: --- → mozilla36

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 155](/show_bug.cgi?id=1092855#c155)• 10 years ago |
|  | |

(In reply to [comment #146](/show_bug.cgi?id=1092855#c146 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10") and [comment #152](/show_bug.cgi?id=1092855#c152 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10"))
Eric, where did you run your tests, and which clang did you use?
I just ran them both on OS X 10.8.5, using Apple's clang for that OS (from XCode's command line tools), and I got all '0's. On Yosemite, though, I saw some non-zero values with both tests (with Apple's clang from the latest XCode command line tools for Yosemite).
So whether uninitialized memory is zeroed may depend on which version of clang you're using, or perhaps even on which version of OS X you compile on (or run on). But there are definitely some cases of it, and we're definitely seeing one with this bug.
Apple's clang for OS X 10.8.5:
$ clang -v
Apple LLVM version 5.1 (clang-503.0.40) (based on LLVM 3.4svn)
Target: x86\_64-apple-darwin12.5.0
Thread model: posix
Apple's clang for OS X 10.10:
clang -v
Apple LLVM version 6.0 (clang-600.0.54) (based on LLVM 3.5svn)
Target: x86\_64-apple-darwin14.0.0
Thread model: posix

|  | [Mike Hommey [:glandium]](/user_profile?user_id=47192) |  |
| --- | --- | --- |
| [Comment 156](/show_bug.cgi?id=1092855#c156)• 10 years ago |
|  | |

Comment on [attachment 8520784](/attachment.cgi?id=8520784 "Fix rev1") [[details]](/attachment.cgi?id=8520784&action=edit "Fix rev1") [[diff]](/attachment.cgi?id=8520784&action=diff "Fix rev1") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1092855&attachment=8520784)
Fix rev1
Review of [attachment 8520784](/attachment.cgi?id=8520784 "Fix rev1") [[details]](/attachment.cgi?id=8520784&action=edit "Fix rev1") [[diff]](/attachment.cgi?id=8520784&action=diff "Fix rev1") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1092855&attachment=8520784):
-----------------------------------------------------------------
::: dom/plugins/ipc/PluginProcessChild.cpp
@@ +136,5 @@
> + // causes those events to be written to disk. But at this point no
> + // CGEvents have yet been processed. CGEvents are events (usually
> + // input events) pulled from the WindowServer. An option of 0x80000008
> + // turns on CGEvent logging.
> + CGSSetDebugOptions(0x80000007);
If the 0x8 in 0x80000008 is the bit that enables logging, then while 0x80000007 flips that bit, it also flips 3 other bits, which may or may not have other meanings.
I guess you really want 0x80000000. Or, better, CGGetDebugOptions() & ~0x8 if such a function exists.

|  | [Mike Hommey [:glandium]](/user_profile?user_id=47192) |  |
| --- | --- | --- |
| [Comment 157](/show_bug.cgi?id=1092855#c157)• 10 years ago |
|  | |

This actually suggests 0x80000007 is not much better:
<http://pwproject.googlecode.com/svn/trunk/Mac%20OS%20X/Vector%20Grab/CGSDebug.h>

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 158](/show_bug.cgi?id=1092855#c158)• 10 years ago |
|  | |

Mike, that stuff is all wrong.
I went straight to the binary, which I looked at in Hopper Disassembler. I also did my own tests, of course.

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 159](/show_bug.cgi?id=1092855#c159)• 10 years ago |
|  | |

Also, it's not a bit that's checked. The entire value is checked, and 0x80000007 results in a call to CGSEventLoggingStop(), while 0x80000008 results in a call to to CGSEventLoggingStart(). The relevant code is in the debug\_options\_changed() method, if you care to look for yourself.

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 160](/show_bug.cgi?id=1092855#c160)• 10 years ago |
|  | |

Also note that options values >= 0x80000000 aren't stored as debug options (in debug\_options\_changed()). Instead they're acted on directly.

|  | [Mike Hommey [:glandium]](/user_profile?user_id=47192) |  |
| --- | --- | --- |
| [Comment 161](/show_bug.cgi?id=1092855#c161)• 10 years ago |
|  | |

(In reply to Steven Michaud from [comment #158](/show_bug.cgi?id=1092855#c158 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10"))
> Mike, that stuff is all wrong.
>
> I went straight to the binary, which I looked at in Hopper Disassembler. I
> also did my own tests, of course.
Did you check older versions? Because Google suggests there are things using those headers that do rely on 0x80000007 enabling the logging...

|  | [Mike Hommey [:glandium]](/user_profile?user_id=47192) |  |
| --- | --- | --- |
| [Comment 162](/show_bug.cgi?id=1092855#c162)• 10 years ago |
|  | |

(In reply to Steven Michaud from [comment #155](/show_bug.cgi?id=1092855#c155 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10"))
> So whether uninitialized memory is zeroed may depend on which version of
> clang you're using, or perhaps even on which version of OS X you compile on
> (or run on). But there are definitely some cases of it, and we're
> definitely seeing one with this bug.
No, it should only depend on runtime. It would probably be more obvious if the test program did some allocations and filled them first, then freed them, and allocated some more without initialization. That would raise the probability of picking one of the previous initialized allocations.

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 163](/show_bug.cgi?id=1092855#c163)• 10 years ago |
|  | |

Here's a definition for debug\_options\_changed():
void debug\_options\_changed(uint32\_t notificationType, void \*data, unsigned long dataLength, void \*userData);
It's a callback registered by a call to
void CGSRegisterNotifyProc(void \*callback, uint32\_t notificationType, void \*userData);

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 164](/show_bug.cgi?id=1092855#c164)• 10 years ago |
|  | |

> Did you check older versions?
No, because my fix is only used on Yosemite and up.
But I suspect the stuff you found was always wrong, or at least profoundly misleading. Note that internal analysis shows it all has the same source (look at the wording and so forth).

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 165](/show_bug.cgi?id=1092855#c165)• 10 years ago |
|  | |

The CoreGraphics framework on Mountain Lion also has a debug\_options\_changed() method. Like the one on Yosemite, it acts directly on any "options" >= 0x80000000 (and doesn't store them as true debug options). And also like on Yosemite, option == 0x80000007 means "stop logging" (and write any existing log contents to disk). But in addition to option == 0x80000008, there appear to be two additional options that can be used to start logging (0x80000006 and 0x80000009). These appear to be used for different "log modes", though I haven't tried to reverse engineer what those modes are.
Use the source, Luke! And if that's not available use the machine code :-)

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 166](/show_bug.cgi?id=1092855#c166)• 10 years ago |
|  | |

(Following up [comment #165](/show_bug.cgi?id=1092855#c165 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10"))
Mavericks (OS X 10.9.X) is like Yosemite. Lion (OS X 10.7.X) is like Mountain Lion.
The callback method name is debugOptionsChanged() on Lion.

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 167](/show_bug.cgi?id=1092855#c167)• 10 years ago |
|  | |

(Following up [comment #166](/show_bug.cgi?id=1092855#c166 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10"))
SnowLeopard (OS X 10.6.X) is like Lion.

|  | [Eric Rahm [:erahm]](/user_profile?user_id=496127) |  |
| --- | --- | --- |
| [Comment 168](/show_bug.cgi?id=1092855#c168)• 10 years ago |
|  | |

(In reply to Steven Michaud from [comment #155](/show_bug.cgi?id=1092855#c155 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10"))
> (In reply to [comment #146](/show_bug.cgi?id=1092855#c146 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10") and [comment #152](/show_bug.cgi?id=1092855#c152 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10"))
>
> Eric, where did you run your tests, and which clang did you use?
>
> I just ran them both on OS X 10.8.5, using Apple's clang for that OS (from
> XCode's command line tools), and I got all '0's. On Yosemite, though, I saw
> some non-zero values with both tests (with Apple's clang from the latest
> XCode command line tools for Yosemite).
>
> So whether uninitialized memory is zeroed may depend on which version of
> clang you're using, or perhaps even on which version of OS X you compile on
> (or run on). But there are definitely some cases of it, and we're
> definitely seeing one with this bug.
>
> Apple's clang for OS X 10.8.5:
>
> $ clang -v
> Apple LLVM version 5.1 (clang-503.0.40) (based on LLVM 3.4svn)
> Target: x86\_64-apple-darwin12.5.0
> Thread model: posix
>
> Apple's clang for OS X 10.10:
>
> clang -v
> Apple LLVM version 6.0 (clang-600.0.54) (based on LLVM 3.5svn)
> Target: x86\_64-apple-darwin14.0.0
> Thread model: posix
I was looking at 10.10:
erahm-25043:tmp ericrahm$ clang++ -v
Apple LLVM version 6.0 (clang-600.0.54) (based on LLVM 3.5svn)
Target: x86\_64-apple-darwin14.0.0
Thread model: posix
Mike pointed out that |new Test| is different than |new Test()|, initial results show I am seeing zeroes for the latter. But then doing something like:
|Test\* tests = new Test[10];|
indicates they're not always zero initialized:
> printing tests[0]
> 0, -536870912, 0, -536870912, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
So overall I'm not convinced we can say "new always default initializes to zero," but it does seem like it often does. OTOH, malloc clearly does not, array new on primitives clearly does not, new w/o a default constructor clearly does not, and array new doesn't always seem to do the right thing.

|  | [Mike Hommey [:glandium]](/user_profile?user_id=47192) |  |
| --- | --- | --- |
| [Comment 169](/show_bug.cgi?id=1092855#c169)• 10 years ago |
|  | |

> So overall I'm not convinced we can say "new always default initializes to zero," but it does seem like it often does.
new does, if you use (). Both for arrays and non arrays:
new Test();
new Test[10]();
vs.
new Test;
new Test[10];
which both don't.
But that's for POD types. There is more.
See <http://stackoverflow.com/questions/620137/do-the-parentheses-after-the-type-name-make-a-difference-with-new>

|  | [Lawrence Mandel [:lmandel] (use needinfo)](/user_profile?user_id=424995) |  |
| --- | --- | --- |
| [Comment 170](/show_bug.cgi?id=1092855#c170)• 10 years ago |
|  | |

If we're going to take this fix in Beta it needs to land today/early tomorrow. The fix should be in the latest Nightly build. Kamil, can you verify the fix today?
dveditz - This bug is rated sec-high. How critical is it that we ship a fix in 34?Flags: needinfo?(kamiljoz)Flags: needinfo?(dveditz)

|  | [Lawrence Mandel [:lmandel] (use needinfo)](/user_profile?user_id=424995) |  |
| --- | --- | --- |
| [Comment 171](/show_bug.cgi?id=1092855#c171)• 10 years ago |
|  | |

Tracking 34 but this doesn't mean we're necessarily going to take the fix in 34. Not tracking 33 as this isn't rated highly enough to warrant a chemspill.
[status-firefox33](/buglist.cgi?f1=cf_status_firefox33&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox33&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_firefox33&o1=equals&v1=wontfix)
[tracking-firefox33](/buglist.cgi?f1=cf_tracking_firefox33&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox33&o1=equals&v1=%3F) → [-](/buglist.cgi?f1=cf_tracking_firefox33&o1=equals&v1=-)
[tracking-firefox34](/buglist.cgi?f1=cf_tracking_firefox34&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox34&o1=equals&v1=%3F) → [+](/buglist.cgi?f1=cf_tracking_firefox34&o1=equals&v1=%2B)

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 172](/show_bug.cgi?id=1092855#c172)• 10 years ago |
|  | |

Comment on [attachment 8520784](/attachment.cgi?id=8520784 "Fix rev1") [[details]](/attachment.cgi?id=8520784&action=edit "Fix rev1") [[diff]](/attachment.cgi?id=8520784&action=diff "Fix rev1") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1092855&attachment=8520784)
Fix rev1
I think this bug is serious enough to want to get it fixed in our next release -- FF 34. A separate, third-party app would be needed to turn this bug's logs into a keylogger. But the /tmp directory is world-readable, so I suspect it wouldn't be hard to create such an app. And this bug is serious even without the keylogger aspect: The logs can get \*huge\* over a few days.
Approval Request Comment
[Feature/regressing bug #]: Apple bug on Yosemite
[User impact if declined]: All Yosemite users exposed to seriously increased usage of hard disk space and possibly very serious security problem.
[Describe test coverage new/current, TBPL]: My own manual tests, soon followed by Kamils's. Baked on m-c for a day with no reported problems.
[Risks and why]: Low risk. My patch uses an undocumented API, which though poorly understood by others is well-understood (and tested) by me. Also the patch is only exercised on Yosemite and up.
[String/UUID change made/needed]: None
[Attachment #8520784](/attachment.cgi?id=8520784&action=edit "Fix rev1") -
Flags: approval-mozilla-beta?
[Attachment #8520784](/attachment.cgi?id=8520784&action=edit "Fix rev1") -
Flags: approval-mozilla-aurora?

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Comment 173](/show_bug.cgi?id=1092855#c173)• 10 years ago |
|  | |

Another aspect of this that makes it so we want to fix this quickly is that it is very discoverable: anybody who uses Firefox on OSX Yosemite for a little while and looks in their /tmp/ directory can see this log, which is obviously from Firefox and is obviously logging keystrokes.

|  | [Kamil Jozwiak [:kjozwiak]](/user_profile?user_id=455785) |  |
| --- | --- | --- |
| [Comment 174](/show_bug.cgi?id=1092855#c174)• 10 years ago |
|  | |

I ran the try build from [comment # 141](/show_bug.cgi?id=1092855#c141 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10") for a few hours yesterday (4-5hrs) and didn't see the log file being created. I also ran today's Nightly build for about 3hrs and didn't see the log under /tmp/. With the older Nightly builds, I usually received the log file within 15 minutes of using fx.
I also opened several context menu's above/below and to the side of flash video's and made sure that the log file wasn't being created as per [comment # 136](/show_bug.cgi?id=1092855#c136 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10") & [comment # 138](/show_bug.cgi?id=1092855#c138 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10").
Builds Used:
\* [http://ftp.mozilla.org/pub/mozilla.org/firefox/try-builds/smichaud@pobox.com-91afa580c4c6/try-macosx64/firefox-36.0a1.en-US.mac.dmg](http://ftp.mozilla.org/pub/mozilla.org/firefox/try-builds/smichaud%40pobox.com-91afa580c4c6/try-macosx64/firefox-36.0a1.en-US.mac.dmg)
\* <http://ftp.mozilla.org/pub/mozilla.org/firefox/nightly/2014-11-12-03-02-02-mozilla-central/>
[status-firefox36](/buglist.cgi?f1=cf_status_firefox36&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox36&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox36&o1=equals&v1=verified)Flags: needinfo?(kamiljoz)

|  | [Lukas Blakk [:lsblakk] use ?needinfo](/user_profile?user_id=272375) |  |
| --- | --- | --- |
| [Comment 175](/show_bug.cgi?id=1092855#c175)• 10 years ago |
|  | |

Comment on [attachment 8520784](/attachment.cgi?id=8520784 "Fix rev1") [[details]](/attachment.cgi?id=8520784&action=edit "Fix rev1") [[diff]](/attachment.cgi?id=8520784&action=diff "Fix rev1") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1092855&attachment=8520784)
Fix rev1
Also approving for Beta because of the sec level and discoverability.
[Attachment #8520784](/attachment.cgi?id=8520784&action=edit "Fix rev1") -
Flags: approval-mozilla-beta?
[Attachment #8520784](/attachment.cgi?id=8520784&action=edit "Fix rev1") -
Flags: approval-mozilla-beta+
[Attachment #8520784](/attachment.cgi?id=8520784&action=edit "Fix rev1") -
Flags: approval-mozilla-aurora?
[Attachment #8520784](/attachment.cgi?id=8520784&action=edit "Fix rev1") -
Flags: approval-mozilla-aurora+

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 176](/show_bug.cgi?id=1092855#c176)• 10 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-aurora/rev/c1bc586965ac>
<https://hg.mozilla.org/releases/mozilla-beta/rev/4bdf71e69d10>
Does this need to land on esr31?
[status-firefox34](/buglist.cgi?f1=cf_status_firefox34&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox34&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox34&o1=equals&v1=fixed)
[status-firefox35](/buglist.cgi?f1=cf_status_firefox35&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox35&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox35&o1=equals&v1=fixed)
[status-firefox-esr31](/buglist.cgi?f1=cf_status_firefox_esr31&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_status_firefox_esr31&o1=equals&v1=%3F)Flags: needinfo?(smichaud)

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 177](/show_bug.cgi?id=1092855#c177)• 10 years ago |
|  | |

> Does this need to land on esr31?
Esr31 is definitely effected, so I suppose it does.
[status-firefox-esr31](/buglist.cgi?f1=cf_status_firefox_esr31&o1=isnotempty):
[?](/buglist.cgi?f1=cf_status_firefox_esr31&o1=equals&v1=%3F) → [affected](/buglist.cgi?f1=cf_status_firefox_esr31&o1=equals&v1=affected)Flags: needinfo?(smichaud)

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 178](/show_bug.cgi?id=1092855#c178)• 10 years ago |
|  | |

Comment on [attachment 8520784](/attachment.cgi?id=8520784 "Fix rev1") [[details]](/attachment.cgi?id=8520784&action=edit "Fix rev1") [[diff]](/attachment.cgi?id=8520784&action=diff "Fix rev1") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1092855&attachment=8520784)
Fix rev1
[Approval Request Comment]
If this is not a sec:{high,crit} bug, please state case for ESR consideration:
User impact if declined: All Yosemite users exposed to seriously increased usage of hard disk space and easily discoverable security problem.
Fix Landed on Version: 36
Risk to taking this patch (and alternatives if risky): Low risk
String or UUID changes made by this patch: None
See <https://wiki.mozilla.org/Release_Management/ESR_Landing_Process> for more info.
[Attachment #8520784](/attachment.cgi?id=8520784&action=edit "Fix rev1") -
Flags: approval-mozilla-esr31?

|  | [Kamil Jozwiak [:kjozwiak]](/user_profile?user_id=455785) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1092855#a865097_455785)• 10 years ago |

QA Contact: kamiljoz

|  | [Lawrence Mandel [:lmandel] (use needinfo)](/user_profile?user_id=424995) |  |
| --- | --- | --- |
| [Comment 179](/show_bug.cgi?id=1092855#c179)• 10 years ago |
|  | |

Comment on [attachment 8520784](/attachment.cgi?id=8520784 "Fix rev1") [[details]](/attachment.cgi?id=8520784&action=edit "Fix rev1") [[diff]](/attachment.cgi?id=8520784&action=diff "Fix rev1") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1092855&attachment=8520784)
Fix rev1
Thanks for keeping us honest Ryan. Let's get this on ESR31 as well.
[Attachment #8520784](/attachment.cgi?id=8520784&action=edit "Fix rev1") -
Flags: approval-mozilla-esr31? → approval-mozilla-esr31+

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 180](/show_bug.cgi?id=1092855#c180)• 10 years ago |
|  | |

Comment on [attachment 8520784](/attachment.cgi?id=8520784 "Fix rev1") [[details]](/attachment.cgi?id=8520784&action=edit "Fix rev1") [[diff]](/attachment.cgi?id=8520784&action=diff "Fix rev1") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1092855&attachment=8520784)
Fix rev1
Landed on mozilla-esr31:
<https://hg.mozilla.org/releases/mozilla-esr31/rev/526a056da173>

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1092855#a881546_67806)• 10 years ago |

[status-firefox-esr31](/buglist.cgi?f1=cf_status_firefox_esr31&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox_esr31&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox_esr31&o1=equals&v1=fixed)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 181](/show_bug.cgi?id=1092855#c181)• 10 years ago |
|  | |

Bustage on esr31:
<https://treeherder.mozilla.org/ui/logviewer.html#?job_id=20680&repo=mozilla-esr31>Flags: needinfo?(smichaud)

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 182](/show_bug.cgi?id=1092855#c182)• 10 years ago |
|  | |

Comment on [attachment 8520784](/attachment.cgi?id=8520784 "Fix rev1") [[details]](/attachment.cgi?id=8520784&action=edit "Fix rev1") [[diff]](/attachment.cgi?id=8520784&action=diff "Fix rev1") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1092855&attachment=8520784)
Fix rev1
I backed this out for bustage:
<https://hg.mozilla.org/releases/mozilla-esr31/rev/c8b40bcdf571>
I'll deal with it tomorrow.Flags: needinfo?(smichaud)

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 183](/show_bug.cgi?id=1092855#c183)• 10 years ago |
|  | |

Attached patch

[Patch for esr31](attachment.cgi?id=8522345&action=diff)
— [Details](attachment.cgi?id=8522345&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1092855&attachment=8522345)

Backported support for calls to nsCocoaFeatures::OnYosemiteOrLater(). Carrying forward r+.
[Attachment #8522345](/attachment.cgi?id=8522345&action=edit "Patch for esr31") -
Flags: review+

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 184](/show_bug.cgi?id=1092855#c184)• 10 years ago |
|  | |

Comment on [attachment 8522345](/attachment.cgi?id=8522345 "Patch for esr31") [[details]](/attachment.cgi?id=8522345&action=edit "Patch for esr31") [[diff]](/attachment.cgi?id=8522345&action=diff "Patch for esr31") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1092855&attachment=8522345)
Patch for esr31
Landed on mozilla-esr31:
<https://hg.mozilla.org/releases/mozilla-esr31/rev/54598f3e773d>

|  | [Kamil Jozwiak [:kjozwiak]](/user_profile?user_id=455785) |  |
| --- | --- | --- |
| [Comment 185](/show_bug.cgi?id=1092855#c185)• 10 years ago |
|  | |

I ran the build listed below while actively using the browser [4hrs] without receiving the log file under /tmp. As stated before, originally the log file would be created within 15 minutes of using fx.
Build Used:
\* Aurora [20141113004001]
\*\* <http://ftp.mozilla.org/pub/mozilla.org/firefox/nightly/2014-11-13-00-40-01-mozilla-aurora/>
Steven, will the bustage in [comment # 181](/show_bug.cgi?id=1092855#c181 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10") affect m-c and aurora at all or was this just relating to esr31?

|  | [Kamil Jozwiak [:kjozwiak]](/user_profile?user_id=455785) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1092855#a944168_455785)• 10 years ago |

Flags: needinfo?(smichaud)

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 186](/show_bug.cgi?id=1092855#c186)• 10 years ago |
|  | |

> Steven, will the bustage in [comment #181](/show_bug.cgi?id=1092855#c181 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10") affect m-c and aurora at
> all or was this just relating to esr31?
It was just related to esr31, which was old enough not to have support
for calls to nsCocoaFeatures::OnYosemiteOrLater().Flags: needinfo?(smichaud)

|  | [Kamil Jozwiak [:kjozwiak]](/user_profile?user_id=455785) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1092855#a948141_455785)• 10 years ago |

[status-firefox35](/buglist.cgi?f1=cf_status_firefox35&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox35&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox35&o1=equals&v1=verified)

|  | [Kamil Jozwiak [:kjozwiak]](/user_profile?user_id=455785) |  |
| --- | --- | --- |
| [Comment 187](/show_bug.cgi?id=1092855#c187)• 10 years ago |
|  | |

I ran the build listed below while actively using the browser [5hrs] without receiving the log file under /tmp. Originally the log file would have been created within 15 minutes of using fx.
Builds Used:
\* fx 34 [BuildID: 20141113192814 changeset: 8a30f7117b2e]
\*\* <http://ftp.mozilla.org/pub/mozilla.org/firefox/candidates/34.0b9-candidates/build1/mac/en-US/>
[status-firefox34](/buglist.cgi?f1=cf_status_firefox34&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox34&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox34&o1=equals&v1=verified)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 188](/show_bug.cgi?id=1092855#c188)• 10 years ago |
|  | |

> dveditz - This bug is rated sec-high. How critical is it that we ship a fix in 34?
"Very Important", a step below "critical" because it's not exploitable from remote and Macs mostly aren't shared. But it's also highly discoverable and several other programs with logging woes have been in the security news lately (not in a good way). Would like not to join them.Flags: needinfo?(dveditz)

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Comment 190](/show_bug.cgi?id=1092855#c190)• 10 years ago |
|  | |

The duped bug links to some discussion of this issue on the Mozilla support forums:
<https://support.mozilla.org/en-US/questions/1028140>

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Comment 191](/show_bug.cgi?id=1092855#c191)• 10 years ago |
|  | |

Some person on Twitter also noticed this on 11/5:
<https://twitter.com/tomaon/status/529925191246168064>
Google translates that as "What's this? > /tmp/CGLog\_Firefox\* something Did <something garbled> infected?"
(I found that with a Google search.)
So that's like a half dozen or so people who noticed this and posted about it.

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 192](/show_bug.cgi?id=1092855#c192)• 10 years ago |
|  | |

(In reply to [comment #191](/show_bug.cgi?id=1092855#c191 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10"))
I read the second sentence as something like "Am I infected?".

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 193](/show_bug.cgi?id=1092855#c193)• 10 years ago |
|  | |

Should we make some kind of announcement that this is an Apple bug that will be fixed/worked-around in our next releases on all the "live" branches? (Meaning 31esr, 34, 35 and 36.)
I don't know, though, where would be appropriate.

|  | [Kamil Jozwiak [:kjozwiak]](/user_profile?user_id=455785) |  |
| --- | --- | --- |
| [Comment 194](/show_bug.cgi?id=1092855#c194)• 10 years ago |
|  | |

I ran the build listed below while actively using the browser [5hrs] without getting the log file under /tmp. Originally the log file would have been created within 15 minutes of using fx.
Builds Used:
\* fx-esr31: [BuildID: 20141117000501 changeset: abd43f9b90d9]
\*\* <http://ftp.mozilla.org/pub/mozilla.org/firefox/nightly/2014-11-17-00-05-01-mozilla-esr31/>Status: RESOLVED → VERIFIED
[status-firefox-esr31](/buglist.cgi?f1=cf_status_firefox_esr31&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox_esr31&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox_esr31&o1=equals&v1=verified)

|  | [Kamil Jozwiak [:kjozwiak]](/user_profile?user_id=455785) |  |
| --- | --- | --- |
| [Comment 195](/show_bug.cgi?id=1092855#c195)• 10 years ago |
|  | |

(In reply to Steven Michaud from [comment #193](/show_bug.cgi?id=1092855#c193 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10"))
> Should we make some kind of announcement that this is an Apple bug that will
> be fixed/worked-around in our next releases on all the "live" branches?
> (Meaning 31esr, 34, 35 and 36.)
>
> I don't know, though, where would be appropriate.
I'm not sure what the best approach would be, but I agree what we should probably mention something in some form or another. I personally think users should be told that their key strokes are being logged because of this bug. Following the link from [comment # 190](/show_bug.cgi?id=1092855#c190 "VERIFIED FIXED - jemalloc poisoning plus Apple uninitialized variable usage triggers keylogging in /tmp/ on OSX 10.10"), it seems like a lot of users want more information but can't view this bug as it's marked as sec-sensitive. Releasing some form of an information/announcement would definitely put the users at ease who think they're infected. (the first reaction they have)

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1092855#a1360554_67806)• 10 years ago |

User Story: (updated)

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 196](/show_bug.cgi?id=1092855#c196)• 10 years ago |
|  | |

I've put possible text for an announcement in User Story. dveditz (and others), please comment on its wording. I tried not to give too much away. But the fact that these logs contain input events (including keyboard events) is so obvious that we should consider it already public.
Even if we don't announce this publicly, the text in User Story will hopefully make it easier for people to understand this long and complex bug. It can't have escaped your notice that none of the public discussions of this bug linked here have accurate descriptions, even where those descriptions were written by people who have access to this bug.Flags: needinfo?(dveditz)

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1092855#a1365920_67806)• 10 years ago |

User Story: (updated)

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1092855#a1447182_67806)• 10 years ago |

User Story: (updated)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 197](/show_bug.cgi?id=1092855#c197)• 10 years ago |
|  | |

What happens in the future when/if Apple changes the definition of the debug options, as they apparently have in the past? We should keep an eye on Apple's response, and if they fix it make the check isYosemite() without the "orLater" part (do we have such a function?).
I'll check with press@ about whether we want to make an announcement prior to our release, and if so what's the best vehicle for it.
[tracking-firefox-esr31](/buglist.cgi?f1=cf_tracking_firefox_esr31&o1=isnotempty):
--- → [34+](/buglist.cgi?f1=cf_tracking_firefox_esr31&o1=equals&v1=34%2B)Keywords: [sec-vector](/buglist.cgi?keywords=sec-vector&resolution=---)

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 198](/show_bug.cgi?id=1092855#c198)• 10 years ago |
|  | |

> What happens in the future when/if Apple changes the definition of the debug options
The one my patch uses is unchanged since at least OS X 10.6. It should be very safe to continue using it, even when it's no longer needed.
In any case, if past practice is any guide, Apple is unlikely to fix this bug anytime soon.

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1092855#a1891197_280903)• 10 years ago |

Whiteboard: rdar://18946701 → [adv-main34+][adv-esr31.3+] rdar://18946701

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 199](/show_bug.cgi?id=1092855#c199)• 10 years ago |
|  | |

We'll use the User Story as the basis for our advisory, thanks.Flags: needinfo?(dveditz)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1092855#a1895427_280903)• 10 years ago |

Alias: CVE-2014-1595

|  | [Reed Loden [:reed]](/user_profile?user_id=159758) |  |
| --- | --- | --- |
| [Comment 200](/show_bug.cgi?id=1092855#c200)• 10 years ago |
|  | |

Apple fixed this in OS X v10.10.2
<http://support.apple.com/en-us/HT204244>
CoreGraphics
Available for: OS X Yosemite v10.10 and v10.10.1
Impact: Some third-party applications with non-secure text entry and
mouse events may log those events
Description: Due to the combination of an uninitialized variable and
an application's custom allocator, non-secure text entry and mouse
events may have been logged. This issue was addressed by ensuring
that logging is off by default. This issue did not affect systems
prior to OS X Yosemite.
CVE-ID
[CVE-2014-1595](https://www.cve.org/CVERecord?id=CVE-2014-1595) : Steven Michaud of Mozilla working with Kent Howard

|  | [BMO Automation](/user_profile?user_id=546015) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1092855#a26210448_546015)• 9 years ago |

Group: core-security → core-security-release

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1092855#a52511398_1689)• 9 years ago |

Group: core-security-release

|  | [Chris Peterson [:cpeterson]](/user_profile?user_id=430528) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1092855#a192443520_430528)• 4 years ago |

Depends on: [1681242](/show_bug.cgi?id=1681242 "RESOLVED FIXED - Remove obsolete CGEvent logging workaround added for Mac OS X 10.10.2")
You need to [log in](/show_bug.cgi?id=1092855&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Kent Howard](/user_profile?user_id=17205)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from wiki.mozilla.org_b7e3e3cc_20250126_081812.html ===


# BMO/UserGuide

From MozillaWiki
< [BMO](/BMO "BMO")

[Jump to navigation](#mw-head)
[Jump to search](#searchInput)

You've probably noticed that BMO has a lot going on. We'll now delve into some more details of various definitions, features, and processes in BMO.

For people working on Firefox, please see [the Bug Handling section in the in-tree documentation for information on how to triage and make decisions on bugs](https://firefox-source-docs.mozilla.org/bug-mgmt/index.html).

Finally, this is a work in progress (and may always be, since BMO is improving all the time). There are many stubs (indicated by italics).

## Contents

* [1 Creating a Bugzilla Account](#Creating_a_Bugzilla_Account)
  + [1.1 Create a Local Account](#Create_a_Local_Account)
  + [1.2 Log in With GitHub](#Log_in_With_GitHub)
* [2 Searching](#Searching)
  + [2.1 Quick Search](#Quick_Search)
  + [2.2 Advanced Search, Pronouns](#Advanced_Search,_Pronouns)
  + [2.3 Other Searches (Instant, Simple, Google)](#Other_Searches_(Instant,_Simple,_Google))
* [3 Bugmail](#Bugmail)
  + [3.1 Filtering](#Filtering)
    - [3.1.1 Filtering with GMail](#Filtering_with_GMail)
* [4 Users](#Users)
  + [4.1 User Profiles](#User_Profiles)
  + [4.2 "New to Bugzilla"](#"New_to_Bugzilla")
* [5 Understanding, Editing, and Filing Bugs](#Understanding,_Editing,_and_Filing_Bugs)
  + [5.1 Standard Bug Fields](#Standard_Bug_Fields)
  + [5.2 Comment Tagging](#Comment_Tagging)
  + [5.3 Comment Editing](#Comment_Editing)
  + [5.4 Keywords and the Whiteboard](#Keywords_and_the_Whiteboard)
  + [5.5 Tracking Status](#Tracking_Status)
  + [5.6 Tracking Flags](#Tracking_Flags)
    - [5.6.1 tracking-firefoxXX](#tracking-firefoxXX)
    - [5.6.2 status-firefoxXX](#status-firefoxXX)
  + [5.7 Status Flags](#Status_Flags)
  + [5.8 Project Flags](#Project_Flags)
  + [5.9 Needinfo Flag](#Needinfo_Flag)
* [6 Team to components mapping](#Team_to_components_mapping)
  + [6.1 Adding a new team or changing an existing one](#Adding_a_new_team_or_changing_an_existing_one)
* [7 Other Ways to use BMO and its Data](#Other_Ways_to_use_BMO_and_its_Data)
  + [7.1 Whining](#Whining)
  + [7.2 APIs](#APIs)
  + [7.3 Dashboards](#Dashboards)
* [8 Permissions and Groups](#Permissions_and_Groups)
  + [8.1 How to apply for upgraded permissions](#How_to_apply_for_upgraded_permissions)
* [9 BMO vs Bugzilla](#BMO_vs_Bugzilla)
# Creating a Bugzilla Account

To fully use all of the features of bugzilla.mozilla.org and most importantly, to file a new bug you will need to create an account. Currently there are two ways to do this.

## Create a Local Account

From the homepage, click "new account," which will let you create an account directly. You will need a valid email address. An email will be sent that will provide a special link you can follow to finish the account creation process. You will be able to enter your own private password.

## Log in With GitHub

If you have a GitHub account you can use it to log in and create an account.

* First click "Log in".
* Then click the Octocat/GitHub logo.
* If you are signed into GitHub you'll be asked if you want GitHub to login to bugzilla.mozilla.org on your behalf and what information about your account will be shared from GitHub with us.
* If you aren't signed in, GitHub will ask you to login, then if you want to be asked if you want GitHub to be able to login on your behalf.
* You'll be identified by the email address you use on GitHub.

**Note:** If you have previously created a local account as described in the first method above, and then decide to use GitHub to login later, just make sure the email address you have registered in GitHub matches the email address used to create the local account. Otherwise, a separate account will be created which is likely not what you want.

# Searching

*Omg, so many ways to search; why do we have so many, and how do they work?*

## Quick Search

*Quick Search rocks! You should use it.*

## Advanced Search, Pronouns

*Advanced search looks hardcore, but the rewards for learning how to drive it are plentiful. Also, pronouns are amazing.*

## Other Searches (Instant, Simple, Google)

*In case you were looking for more ways to search.*

# Bugmail

*Bugmail* is the common term for automated emails from BMO. The biggest source of bugmail is changes to bugs, but BMO may also email you reports and other notices.

## Filtering

*Too much bugmail? Filter on BMO itself and/or via x-headers!*

### Filtering with GMail

GMail's ability to filter on headers is somewhat limited. We've got a separate, complete [guide](/BMO/UserGuide/Filtering_Bugzilla_Email_in_GMail "BMO/UserGuide/Filtering Bugzilla Email in GMail") on advanced bugmail filtering with GMail.

# Users

Bugzilla isn't as user-centric as many modern web apps, but we've added a few features in the last few years.

## User Profiles

By selecting [My Profile](https://bugzilla.mozilla.org/user_profile) from the dropdown in BMO's header, you can see a collection of statistics about your interactions with BMO. You can use the Search field at the top to see the profile of any other BMO user. Clicking on a user's name in a bug view also provides a link to that user's profile.

There's a [project page](/BMO/UserProfiles "BMO/UserProfiles") about User Profiles which has brief description of the fields.

## "New to Bugzilla"

A user's comments will be tagged as "New to Bugzilla" under the following conditions:

* The user does *not* have editbugs access.
* The user has made 25 comments or less **OR** the account is less than 60 days old.

The "New to Bugzilla" indicator doesn't mean *this account was created recently*, it's an indicator that *this user hasn't used Bugzilla much, please tailor your responses accordingly*.

This is only displayed to people with canconfirm or editbugs access.

# Understanding, Editing, and Filing Bugs

## Standard Bug Fields

Bugzilla bugs have a lot of fields that allow for classifying types of bugs. This also allows for easy grouping and searching for specific bugs. Most of the standard bug fields are described [here](/BMO/UserGuide/BugFields "BMO/UserGuide/BugFields").

## Comment Tagging

Want to convey some out-of-band information on a comment? Tag it.
Want to auto-collapse a spammy, abusive, or obsolete comment? [Tag it](/BMO/Comment_Tagging "BMO/Comment Tagging").

## Comment Editing

Some users can edit comments made on bugs, if you do so, please follow [our guidelines](/BMO/Editing_Comments "BMO/Editing Comments").

## Keywords and the Whiteboard

*What are all these keywords and weird whiteboard stuff? What is a whiteboard anyhow? Which should i use?*

**Keywords**:
These are a limited set of keyword tags, set by teams and people with admin privilege. You can start typing a tag and get a dropdown menu of all the keywords currently available. Keywords like "regression" and "crash" are used by engineering, release, and QA teams, for example.

**Whiteboard**:
The whiteboard field is for free tagging. It's used both by teams and by people who want to track bugs they're interested in.

## Tracking Status

See [BMO/UserGuide/BugStatuses](/BMO/UserGuide/BugStatuses "BMO/UserGuide/BugStatuses")

## Tracking Flags

[![Flagexample.png](/images/thumb/8/89/Flagexample.png/400px-Flagexample.png)](/File%3AFlagexample.png)
### tracking-firefoxXX

*Who's doing the tracking? Should i even set these flags?*

Tracking flags are used by developers, triagers, QA and the release management teams to keep track of bugs whose fixes are slated to go into a particular product release. A tracking flag shows whether a bug is being investigated for possible resolution in the Firefox XX release. Bugs marked tracking-Firefox XX are bugs that must be resolved one way or another before a particular release ships. [Release drivers](/Firefox/Drivers "Firefox/Drivers") will track and shepherd the bug until it is determined the bug no longer impacts the release.

[![Tracking-flag-example.png](/images/thumb/4/4b/Tracking-flag-example.png/300px-Tracking-flag-example.png)](/File%3ATracking-flag-example.png)

Tracking flags have the values:

| Value | Meaning |
| --- | --- |
| --- | Default/Not nominated |
| ? | Bug is nominated for this release |
| + | Bug is tracked for this release |
| - | Bug will not be tracked for this release |
| blocking | Bug is considered a blocker for this release |

Most users will only be able to [nominate a bug for tracking](/Release_Management/Release_Process#All_about_Flags "Release Management/Release Process") by setting the tracking flag for a release to *?*. The Release Drivers group (which includes Release Management) will respond to the request for tracking.

For example, a [search for tracking Firefox Beta and "+"](https://bugzilla.mozilla.org/buglist.cgi?f1=cf_tracking_firefox_beta&o1=equals&v1=%2B) would list the bugs which release managers decided to track for the Beta release of Firefox.

If you would like to suggest a bug and its fix be considered (by release managers) for a particular release, edit the bug and set the tracking flag for that release to *?*. This is often done for a bug that's been fixed in one release channel but needs to be uplifted to another.

Refer to [these guidelines](http://web.archive.org/web/20160417051846/https%3A//blog.mozilla.org/channels/2011/06/01/more-details-about-how-to-use-the-tracking-firefox-bugzilla-flag/) on setting the tracking flag.

### status-firefoxXX

A flag which represents the status of the bug with respect to Firefox XX.

status-firefoxXX

| --- | We don't know whether Firefox XX is affected |
| --- | --- |
| ? | We don't know whether Firefox XX is affected, but we want to find out |
| unaffected | This bug does not affect Firefox XX |
| affected | This bug affects Firefox XX |
| fix-optional | This bug affects Firefox XX, we would take a fix but don't consider it as release blocking |
| fixed | This bug is fixed in Firefox XX |
| verified | This bug is fixed and verified in Firefox XX |
| disabled | This feature is disabled in Firefox XX |
| verified disabled | Disabling the feature is verified in Firefox XX |
| wontfix | A fix for this bug will not be accepted in Firefox XX |

**Approval Flags**: Set on the attachment of a bug
All patches landing on *mozilla-beta/release/esr* branches must have these nominated by setting a ***?***  flag.
Please make sure to fill in the populated list of questions **[Approval Request Comment]** that come up on the attachment.
This helps Release Management understand the user impact & the risk/reward analysis before we grant or deny approval. If this form is left incomplete it will be sent back to you for completion.

[![ApprovalRequest.png](/images/thumb/e/e7/ApprovalRequest.png/750px-ApprovalRequest.png)](/File%3AApprovalRequest.png)
## Status Flags

Status flags detail, at the release level, if a bug is present or will be addressed in a particular version.

[![Thumb](/images/6/62/Status-flag-example.png)](/File%3AStatus-flag-example.png "Thumb")

## Project Flags

Project flags are used to supplement a bug's prioritization. These flags are defined at the product and component level and will not be present for all bugs. Most often they are used to establish when a bug is to be worked on during a multi-release spanning project.

Example project flags are:

* [a11y-review](https://firefox-source-docs.mozilla.org/bug-mgmt/processes/accessibility-review.html)
* [Webcompat Priority](https://wiki.mozilla.org/Compatibility/WebCompat_Priority_Flags)
* [Performance Impact](https://wiki.mozilla.org/Performance/Bugzilla#Project_Flag)

## Needinfo Flag

In some bug tracking systems, to request information from someone about a bug, the bug is usually assigned to the person asked. In Bugzilla, we use *needinfo* flags.

The *needinfo* flag can be set at or after a bug's creation. When a *needinfo* flag is set, the person asked receives an email directing them to visit the bug, logging in if necessary, and answer the question.

To create a *needinfo*, you can specify the bug's assignee (if any,) the bug's triage owner (if one is defined,) the bug's reporter, or another user. Ask the question in a comment and set the *needinfo* flag before you save the bug.

Common uses of *needinfo* include:

* Asking a bug reporter for more information so that a bug can be triaged
* Asking a subject matter expert for direction or clarification

Please respond to *needinfo* requests quickly to keep others from being blocked.

To clear a needinfo, go to the bug's page, respond to the question and save your comment. By default the *clear this needinfo request* checkbox is ticked.

If you need to route the request to another person, leave the *clear this needinfo request* checkbox ticked, and set a new *needinfo* for the person to which you want to send the question to, then save the bug.

You can see the *needinfo* flags you have requested of others and the ones requested of you in [My Dashboard](https://bugzilla.mozilla.org/page.cgi?id=mydashboard.html).

# Team to components mapping

All Bugzilla components are linked to a team.

The full list of teams is available at <https://bugzilla.mozilla.org/rest/config/component_teams>.

The full list of components linked to a specific team is available at <https://bugzilla.mozilla.org/rest/config/component_teams/TEAM_NAME> (replace TEAM\_NAME with an actual team name).

Use <https://bugzilla.mozilla.org/rest/product?type=accessible&include_fields=name&include_fields=components.name&include_fields=components.team_name> if you want to find out what team is assigned to a specific component.

When creating a new component, make sure to link it to the right team. If you are not sure, use the team the triage owner of the new component belongs to.

## Adding a new team or changing an existing one

File a bug at <https://bugzilla.mozilla.org/enter_bug.cgi?product=bugzilla.mozilla.org&component=Administration> asking to change component info.

Make sure :marco is CCed so they can adjust the quality weekly reports. Needinfo :dveditz to adjust the weekly security report

# Other Ways to use BMO and its Data

## Whining

*Bugzilla can automatically send you buglists (requires canconfirm).*

BMO can automatically send you buglists (or a group of people) at defined intervals. This requires that you have specific rights required to [create whines](https://bugzilla.mozilla.org/editwhines.cgi).

## APIs

*I hear you want to integrate with BMO. Where to start, what to do next, and best practices which won't get you blocked.*

BMO has a REST API that can perform most common tasks and is great for allowing external systems to integrate with Bugzilla. More details on how to use the API can be found [here](http://bmo.readthedocs.io/en/latest/api/index.html).

## Dashboards

*Trying to answer the "what should i do today" question? Go no further than the dashboards.*

[My Dashboard](https://bugzilla.mozilla.org/page.cgi?id=mydashboard.html) has some nice options for viewing lists of bugs that may be of interest to you.

# Permissions and Groups

If you would like to be able to change the status of bugs from UNCONFIRMED to NEW, you will need the canconfirm permission. It also allows you to file a bug as NEW rather than as UNCONFIRMED, which is the default for bugs filed by new users to bugzilla.mozilla.org.

The editbugs permission gives you the ability to edit most fields of a bug. It's very useful for adding good information to a bug, and for making summaries more clear and descriptive.

## How to apply for upgraded permissions

If you want **canconfirm**, you can add it yourself using [triage request form](https://bugzilla.mozilla.org/page.cgi?id=triage_request.html).

If you want **editbugs**, [file a new bug, including](https://mzl.la/2izLT4J):

* The URLs of two bugs to which you have attached patches or testcases.
* The URLs of the relevant comment on three bugs which you wanted to change, but couldn't, and so added a comment instead.

**Note:** **editbugs** implies **canconfirm** there's no need to apply for both.

There are many other groups, some team-specific, some for security reasons, and some that are for corporate confidential bugs or comments. By default, everyone is in the BMO group **everyone**. Your permissions affect which shared searches you can see. When you create a saved search of your own, you can choose to share it with any group that are in.

You can see your current [groups and permissions](https://bugzilla.mozilla.org/userprefs.cgi?tab=permissions).

# BMO vs Bugzilla

Bugzilla is the name of the popular issue-tracking software application, used by many organizations and maintained by the Bugzilla project. Its home is at <http://www.bugzilla.org>. While the Bugzilla project was started by Mozilla, it is administered separately, having its own Project Lead, Assistant Project Leads, and other roles. Most of the roles are, at current, occupied by Mozilla contributors, but in the past core Bugzilla contributors have not had significant involvement in other Mozilla projects. Mozilla does provide resources, including employee time, to the Bugzilla project. The best description of Mozilla's involvement in Bugzilla is that of a steward.

BMO is an abbreviation of bugzilla.mozilla.org. It is Mozilla's site-specific Bugzilla installation, which is a slight fork of the standard Bugzilla source (or "upstream") with many extensions. At the moment, the fork is technically from Bugzilla 4.2, but many features have been backported from 4.4 and master—in fact, many features in those branches were written by the BMO developers, who added them to upstream but also backported them so they could be immediately available to BMO users. Since we've backported most fixes and features that are of particular use in BMO, we haven't been strict about keeping up with the latest official upstream release. Another difference is that the BMO devs have not prioritized deployability in BMO, since fixes and features are just pushed out each week to the BMO installation, although they have made significant progress in making BMO [more hackable](/BMO/Hacking "BMO/Hacking").

In sum, the main difference between Bugzilla and BMO is that the former is the name of the general-purpose software, and the latter Mozilla's site-specific installation. An analogue is [MediaWiki](https://www.mediawiki.org/wiki/MediaWiki) versus [Wikipedia](https://en.wikipedia.org/wiki/Main_Page).

Retrieved from "<https://wiki.mozilla.org/index.php?title=BMO/UserGuide&oldid=1251326>"
[Category](/Special%3ACategories "Special:Categories"):

* [BMO](/index.php?title=Category:BMO&action=edit&redlink=1 "Category:BMO (page does not exist)")

## Navigation menu

### Personal tools

* [Log in](/index.php?title=Special:UserLogin&returnto=BMO%2FUserGuide "You are encouraged to log in; however, it is not mandatory [o]")
* [Request account](/Special%3ARequestAccount "You are encouraged to create an account and log in; however, it is not mandatory")

### Namespaces

* [Page](/BMO/UserGuide "View the content page [c]")
* [Discussion](/index.php?title=Talk:BMO/UserGuide&action=edit&redlink=1 "Discussion about the content page (page does not exist) [t]")

English

### Views

* [Read](/BMO/UserGuide)
* [View source](/index.php?title=BMO/UserGuide&action=edit "This page is protected.
  You can view its source [e]")
* [View history](/index.php?title=BMO/UserGuide&action=history "Past revisions of this page [h]")

More

### Search

### Navigation

* [Main page](/Main_Page "Visit the main page [z]")
* [Product releases](/Releases)
* [New pages](/Special%3ANewPages)
* [Recent changes](/Special%3ARecentChanges "A list of recent changes in the wiki [r]")
* [Recent uploads](/Special%3ANewFiles)
* [Random page](/Special%3ARandom "Load a random page [x]")
* [Help](/MozillaWiki%3AHelp "The place to find out")

### How to Contribute

* [All-hands meeting](/WeeklyUpdates)
* [Other meetings](/Community_Calendar)
* [Contribute to Mozilla](/Contribute)
* [Community Portal](//community.mozilla.org)
* [Community Participation Guidelines](//www.mozilla.org/en-US/about/governance/policies/participation/)

### MozillaWiki

* [About](/MozillaWiki%3AAbout)
* [Team](/MozillaWiki%3ATeam)
* [Policies](/MozillaWiki%3APolicies)
* [Report a wiki bug](//bugzilla.mozilla.org/enter_bug.cgi?product=Websites&component=wiki.mozilla.org)

### Around Mozilla

* [Mozilla Support](//support.mozilla.org/)
* [Mozilla Developer Network](//developer.mozilla.org/)
* [Planet Mozilla](//planet.mozilla.org/)
* [Mozilla Blog](//blog.mozilla.org/)
* [Research](//www.mozilla.org/research/)

### Tools

* [What links here](/Special%3AWhatLinksHere/BMO/UserGuide "A list of all wiki pages that link here [j]")
* [Related changes](/Special%3ARecentChangesLinked/BMO/UserGuide "Recent changes in pages linked from this page [k]")
* [Special pages](/Special%3ASpecialPages "A list of all special pages [q]")
* Printable version
* [Permanent link](/index.php?title=BMO/UserGuide&oldid=1251326 "Permanent link to this revision of this page")
* [Page information](/index.php?title=BMO/UserGuide&action=info "More information about this page")

* This page was last edited on 16 July 2024, at 16:37.

* [Privacy policy](/MozillaWiki%3APrivacy_policy)
* [About MozillaWiki](/MozillaWiki%3AAbout)
* [Mobile view](https://wiki.mozilla.org/index.php?title=BMO/UserGuide&mobileaction=toggle_view_mobile)

* [![Powered by MediaWiki](/resources/assets/poweredby_mediawiki_88x31.png)](https://www.mediawiki.org/)


