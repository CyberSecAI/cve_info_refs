=== Content from secunia.com_2750bd2b_20250124_230058.html ===


[Skip to main content](#main-content)
[![Home](/themes/custom/flexera/images/logo.svg)](https://www.flexera.com/)

[![Home](/themes/custom/flexera/images/logo.svg)](https://www.flexera.com/)

Search

## Main navigation

* Solutions
  + Column 1
    - Business challenge
      * [Software renewals and audits](https://www.flexera.com/solutions/software-renewals-audits)
      * [Software license management and optimization](https://www.flexera.com/solutions/software-usage-costs)
      * [SaaS spend management](https://www.flexera.com/solutions/saas-spend)
      * [Cloud cost management](https://www.flexera.com/solutions/cloud-cost)
      * [IT asset lifecycle management](https://www.flexera.com/solutions/it-asset-lifecycle)
      * [CMDB data quality](https://www.flexera.com/solutions/cmdb-data-quality)
      * [Accurate IT inventory](https://www.flexera.com/solutions/it-inventory)
      * [Security and regulatory risk management](https://www.flexera.com/solutions/it-security-regulatory-risk)
      * [Sustainable IT](https://www.flexera.com/solutions/sustainable-it)
      * [AI-powered transformation](https://www.flexera.com/solutions/ai-powered-transformation)
      * [Public sector](https://www.flexera.com/solutions/public-sector)
  + Column 2
    - Spend management by vendor
      * [IBM](https://www.flexera.com/solutions/vendor/ibm)
      * [Oracle](https://www.flexera.com/solutions/vendor/oracle)
      * [Microsoft](https://www.flexera.com/solutions/vendor/microsoft)
      * [SAP](https://www.flexera.com/solutions/vendor/sap)
      * [VMware](https://www.flexera.com/solutions/vendor/vmware)
      * [ServiceNow](https://www.flexera.com/solutions/vendor/servicenow)
      * [AWS](https://www.flexera.com/solutions/vendor/aws)
      * [Salesforce](https://www.flexera.com/solutions/vendor/salesforce)
      * [BMC](https://www.flexera.com/solutions/cmdb-data-quality/bmc)
      * [Adobe](https://www.flexera.com/solutions/vendor/adobe)

  ### Achieve more through a united FinOps and ITAM function

  The future is hybrid. Break down the walls between ITAM and FinOps to drive more revenue, more customer growth and more innovation.

  [Discover More](https://www.flexera.com/resources/hybrid-itam-finops)
* Products
  + Column 1
    - [Flexera One](https://www.flexera.com/products/flexera-one)
      * [IT Visibility](https://www.flexera.com/products/flexera-one/it-visibility)
      * [ITAM](https://www.flexera.com/products/flexera-one/it-asset-management)
      * [SaaS Management](https://www.flexera.com/products/flexera-one/saas-management)
      * [FinOps](https://www.flexera.com/products/flexera-one/finops)
      * [Technology Intelligence Platform](https://www.flexera.com/products/flexera-one/technology-intelligence-platform)
  + Column 2
    - [Snow Atlas](https://www.flexera.com/products/snow-atlas)
      * [Snow Spend Optimizer](https://www.flexera.com/products/snow-atlas/snow-spend-optimizer)
      * [Snow SaaS Management](https://www.flexera.com/products/snow-atlas/snow-saas-management)
  + Column 3
    - Hide group
      * [Security](https://www.flexera.com/products/security)
      * [Application Readiness](https://www.flexera.com/products/adminstudio)
      * [All products](https://www.flexera.com/products)
      * [All Snow products](https://www.flexera.com/products/snow)
      * [Integrations](https://www.flexera.com/products/integrations)

  ### Flexera 2024 State of the Cloud Report

  What do transformative initiatives such as GenAI, machine learning and sustainability mean for the cloud? Check out the 2024 State of the Cloud Report to find the answer as well as all the latest cloud computing trends.

  [View Report](https://info.flexera.com/CM-REPORT-State-of-the-Cloud)
* Success
  + Column 1
    - [Customer success](https://www.flexera.com/customer-success)
      * Support
        + [Flexera support portal](https://community.flexera.com/s/support-hub)
        + [Flexera product documentation](https://docs.flexera.com)
        + [Snow product documentation](https://docs.snowsoftware.io/)
      * Services and training
        + [Services](https://www.flexera.com/customer-success/services)
        + [Training](https://www.flexera.com/customer-success/training)
  + Column 2
    - Hide group
      * [Technology Intelligence Awards](https://www.flexera.com/customer-success/awards)
      * [Flexera community](https://community.flexera.com/s/)

  ### Insights from Gartner®

  Find a curated series of actionable and objective insights for IT executives and their teams. Get expert insights from valued analysts, courtesy of Flexera.

  [Discover More](https://www.flexera.com/resources/gartner-analyst-research)
* Resources
  + Column 1
    - [Resources](https://www.flexera.com/resources)
      * [Webinars](https://www.flexera.com/resources?type%5Bwebinar%5D=webinar)
      * [Videos](https://www.flexera.com/resources?type%5Bvideo%5D=video)
      * [Datasheets](https://www.flexera.com/resources?type%5Bdatasheet%5D=datasheet)
      * [White papers & reports](https://www.flexera.com/resources?type%5Bwhite-paper-industry-report%5D=white-paper-industry-report)
  + Column 2
    - Hide group
      * [Blog](/blog/)
      * [Case studies](https://www.flexera.com/resources/case-studies)
      * [Events](https://www.flexera.com/resources?type%5Bevent%5D=event)
      * [Analyst Research](https://www.flexera.com/resources/gartner-analyst-research)
      * [Glossary](https://www.flexera.com/resources/glossary)
      * [Demos & trials](https://www.flexera.com/resources?type%5Bdemo-trials%5D=demo-trials)
      * [Business value calculator](https://www.flexera.com/resources/business-value-calculator)

  ### Flexera 2025 IT Priorities Report

  Insights from Flexera’s 2025 IT Priorities Report highlight what’s top of mind for IT decision makers in the year ahead. Discover the challenges, priorities and opportunities that will shape the future IT landscape.

  [View Report](https://info.flexera.com/ITV-REPORT-IT-Priorities)
* About
  + Column 1
    - [Company](https://www.flexera.com/about-us)
      * [About](https://www.flexera.com/about-us)
      * [Careers](https://www.flexera.com/about-us/careers)
      * [Contact](https://www.flexera.com/about-us/contact-us)
      * [Leadership](https://www.flexera.com/about-us/leadership)
    - [Partners](https://www.flexera.com/about-us/partners)
      * [Partner program](https://www.flexera.com/about-us/partners/partner-program)
      * [Partner directory](https://www.flexera.com/about-us/partners/directory)
  + Column 2
    - [Press center](https://www.flexera.com/about-us/press-center)
      * [Press releases](https://www.flexera.com/about-us/all-press-releases)
      * [Awards](https://www.flexera.com/about-us/press-center#awards)
      * [Articles](https://www.flexera.com/about-us/all-articles)
    - Hide group
      * Social responsibility
        + [ESG](https://www.flexera.com/about-us/environmental-social-governance)
        + [Diversity](https://www.flexera.com/about-us/diversity)

  ### More value with technology intelligence

  The unparalleled synergy of Flexera and Snow provides the Technology Intelligence you need for more efficiency, insight and governance than ever before.

  [Discover More](https://www.flexera.com/more-value-with-technology-intelligence)

Search

en

* [English](https://www.flexera.com/products/security/software-vulnerability-research/secunia-research?referrer=secunia)
* [Deutsch](https://www.flexera.de/products/security/software-vulnerability-research/secunia-research?referrer=secunia)

## External Links

* External Links
  + [Community](https://community.flexera.com/)
  + [Product Access](https://app.flexera.com/login)
  + [Partner Portal](https://flexera.channeltivity.com/Login)

[Book a demo](/about-us/contact-us?C_Interest1=sales)

# Secunia Research

## The world’s best vulnerability intelligence

The Secunia Research team from Flexera provides the most accurate and reliable source of vulnerability intelligence.

[Contact Us](https://www.flexera.com/about-us/contact-us?C_Interest1=sales&C_SolutionInterest=SVM)
Watch video (0:29)

Related links

* [Anatomy of a security advisory](https://www.flexera.com/resources/infographics/anatomy-of-a-security-advisory)
* [Software Vulnerability Research](https://www.flexera.com/products/software-vulnerability-research)
* [Software Vulnerability Manager](/products/software-vulnerability-manager)
* [Security advisories from Secunia Research](https://www.flexera.com/products/security/software-vulnerability-advisories)
* [Report a vulnerability](https://www.flexera.com/about-us/contact-us/report-vulnerability)

 ![Secunia Research](/sites/default/files/2022-04/hero-secunia-research-bg.jpg)

Featured Details

## Multiple ways to consume Secunia Research

Secunia delivers software security research that provides reliable, curated and actionable vulnerability intelligence. Organizations can expect to receive standardized, validated and enriched vulnerability research on a specific version of a software product. Secunia Research supports four solutions:

![Software Vulnerability Research](/sites/default/files/2022-04/icon-secunia-research-svr.svg)

### [Software Vulnerability Research](https://www.flexera.com/products/software-vulnerability-research)

Software Vulnerability Research utilizes Secunia Research to drive awareness of vulnerabilities matching your specified criteria

[Learn More](https://www.flexera.com/products/software-vulnerability-research)

![Software Vulnerability Manager](/sites/default/files/2022-04/icon-secunia-research-svm.svg)

### [Software Vulnerability Manager](/products/software-vulnerability-manager)

Software Vulnerability Manager uses Secunia Research data to identify, prioritize and patch known vulnerable software detected in your environment

[Learn More](/products/software-vulnerability-manager)

![Data Platform](/sites/default/files/2022-04/icon-secunia-research-dp.svg)

### [Data Platform](https://www.flexera.com/products/data-platform)

Data Platform leverages Secunia Research to provide high-level insights based on major or minor versions of software in your normalized inventory

[Learn More](https://www.flexera.com/products/data-platform)

![Flexera One](/sites/default/files/2022-04/icon-secunia-research-flexera-one.svg)

### [Flexera One](/flexera-one)

Flexera One utilizes Secunia Research (alongside public NVD data) to provide more granular matching of build-level versions of software in your normalized inventory within its IT Asset Management and IT Visibility solutions

[Learn More](/flexera-one)

How it works

## Accurate, reliable vulnerability insights at your fingertips

The Secunia Research team from Flexera is comprised of several security specialists who conduct vulnerability research in various products in addition to testing, verifying and validating public vulnerability reports. Since its inception in 2002, the goal of the Secunia Research team is to provide the most accurate and reliable source of vulnerability intelligence.

Delivering the world’s best vulnerability intelligence requires skill and passion. Team members continually develop their skills exploring various high-profile closed and open-source software using a variety of approaches, focusing chiefly on thorough code audits and binary analysis. The team has received industry recognition, including naming members to [Microsoft’s Most Valuable Security Researchers](https://msrc-blog.microsoft.com/2019/08/07/announcing-2019-msrc-most-valuable-security-researchers/) list.

Secunia researchers discover hard-to-find vulnerabilities that aren’t normally identified with techniques such as fuzzing, and the results have been impressive. Members of the Secunia Research team have discovered critical vulnerabilities in products from vendors including Microsoft, Symantec, IBM, Adobe, RealNetworks, Trend Micro, HP, Blue Coat, Samba, CA, Mozilla and Apple.

The team produces invaluable security advisories based on research of the vulnerabilities affecting any given software update. Sometimes a single update can address multiple vulnerabilities of varying criticalities and threats; but these advisories aggregate and distill findings down to a single advisory perfect for the prioritization of patching efforts within [Software Vulnerability Manager](/products/software-vulnerability-manager). Criticality scores are consistently applied along with details around attack vector and other valuable details within [Software Vulnerability Research](/products/software-vulnerability-research/secunia-research). Illegitimate vulnerability reports are also investigated and rejected so you can focus only on what truly matters.

Informing IT, Transforming IT

## Industry insights to help keep you informed

[#### Webinar

### Stay Ahead of Cyber Threats: Flexera's Latest Vulnerability Insights

Join us for this session where we'll explore the latest findings from the Flexera Monthly Vulnerability Insights Report.](https://info.flexera.com/SVM-WBNR-Vulnerability-Insights-Roundtable)

[#### Webinar

### Dive deeper into the Flexera Annual Vulnerability Insights

We'll explore the key findings from the Flexera Annual Vulnerability Insights Report. Learn about the latest cybersecurity trends, the most targeted industries, the types of vulnerabilities, plus management and mitigation strategies.](https://info.flexera.com/SVM-WBNR-Flexera-Annual-Vulnerability-Insights?lead_source=Website%20Visitor&id=Flexera.com-Resources)

#### Video

### Close the Risk Window with Software Vulnerability Manager

Stop reacting. Gain control. Stay secure. Build a more effective risk mitigation process leveraging Secunia Research vulnerability intelligence and the largest repository of third-party patch data in the industry.

Remote video URL

[#### Trial

### Software Vulnerability Manager Assessment free trial

Get access to the complete set of modules of Software Vulnerability Manager: Research, Assessment and Patching](https://info.flexera.com/SVM-EVAL-Software-Vulnerability-Manager)

[#### Datasheet

### Protect your ServiceNow® investment with the highest quality data

IT Visibility offers certified ServiceNow integrations that accelerate platform expansion, improve ROI and increase efficiencies across ITIL processes by delivering clean software and hardware asset data directly.](/sites/default/files/datasheet-itv-maximize-servicenow-investment.pdf)

[#### Blog

### Avoid missing crucial vulnerability intelligence amid NVD backlog

Recent developments regarding the National Vulnerability Database (NVD) have some technology leaders on edge. Since February, the U.S. National Institute of Standards and Technology (NIST) has almost completely stopped enriching software vulnerabi...](https://www.flexera.com/blog/vulnerability-management/avoid-missing-crucial-vulnerability-intelligence-amid-nvd-backlog/)

[View all resources](https://www.flexera.com/resources?category%5Bsoftware-vulnerability-management%5D=software-vulnerability-management)

## Footer Menu

* Column
  + Business challenge
    - [Software renewals and audits](https://www.flexera.com/solutions/software-renewals-audits)
    - [Software license management and optimization](https://www.flexera.com/solutions/software-usage-costs)
    - [SaaS spend management](https://www.flexera.com/solutions/saas-spend)
    - [Cloud cost management](https://www.flexera.com/solutions/cloud-cost)
    - [IT asset lifecycle management](https://www.flexera.com/solutions/it-asset-lifecycle)
    - [CMDB data quality](https://www.flexera.com/solutions/cmdb-data-quality)
    - [Accurate IT inventory](https://www.flexera.com/solutions/it-inventory)
    - [Security and regulatory risk management](https://www.flexera.com/solutions/it-security-regulatory-risk)
    - [Sustainable IT](https://www.flexera.com/solutions/sustainable-it)
    - [AI-powered transformation](https://www.flexera.com/solutions/ai-powered-transformation)
    - [Public sector](https://www.flexera.com/solutions/public-sector)
* Column
  + Spend management by vendor
    - [IBM](https://www.flexera.com/solutions/vendor/ibm)
    - [Oracle](https://www.flexera.com/solutions/vendor/oracle)
    - [Microsoft](https://www.flexera.com/solutions/vendor/microsoft)
    - [SAP](https://www.flexera.com/solutions/vendor/sap)
    - [VMware](https://www.flexera.com/solutions/vendor/vmware)
    - [ServiceNow](https://www.flexera.com/solutions/vendor/servicenow)
    - [AWS](https://www.flexera.com/solutions/vendor/aws)
    - [Salesforce](https://www.flexera.com/solutions/vendor/salesforce)
    - [BMC](https://www.flexera.com/solutions/cmdb-data-quality/bmc)
    - [Adobe](https://www.flexera.com/solutions/vendor/adobe)
* Column
  + Products
    - [Flexera One](https://www.flexera.com/products/flexera-one)
    - [Snow Atlas](https://www.flexera.com/products/snow-atlas)
    - [Security](https://www.flexera.com/products/security)
    - [Application Readiness](https://www.flexera.com/products/adminstudio)
    - [All products](https://www.flexera.com/products)
    - [All Snow products](https://www.flexera.com/products/snow)
    - [Integrations](https://www.flexera.com/products/integrations)
* Column
  + Company
    - [About](https://www.flexera.com/about-us)
    - [Careers](https://www.flexera.com/about-us/careers)
    - [Leadership](https://www.flexera.com/about-us/leadership)
    - [Contact us](https://www.flexera.com/about-us/contact-us)
    - [Media / press center](https://www.flexera.com/about-us/press-center)
    - [Revenera.com](https://www.revenera.com)

 +1.800.374.4353

en

* [English](https://www.flexera.com/products/security/software-vulnerability-research/secunia-research?referrer=secunia)
* [Deutsch](https://www.flexera.de/products/security/software-vulnerability-research/secunia-research?referrer=secunia)

 [![Home](/themes/custom/flexera/images/logo.svg)](https://www.flexera.com/)

© 2025 Flexera. All Rights Reserved.

## Footer

* [Privacy Policy](https://www.flexera.com/legal/privacy-policy)
* [Terms and conditions](https://www.flexera.com/legal)
* [Contact Us](https://www.flexera.com/about-us/contact-us)
* [Impressum](https://www.flexera.com/about-us/impressum)
* [Site Map](https://www.flexera.com/sitemap)

#####

×

...



=== Content from www.oracle.com_1aa3bc48_20250124_230104.html ===


* [Skip to content](#maincontent)
* [Accessibility Policy](https://www.oracle.com/corporate/accessibility/)

Products
Industries
Resources
Customers
Partners
Developers
Company

Close Search

Search Oracle.com

* QUICK LINKS
* [Oracle Cloud Infrastructure](/cloud/)
* [Oracle Fusion Cloud Applications](/applications/)
* [Oracle Database](/database/technologies/)
* [Download Java](/java/technologies/downloads/)
* [Careers at Oracle](/careers/)

Search

[Country
![]()](/countries-list.html#countries)

View Accounts

Back
Cloud Account
[Sign in to Cloud](/cloud/sign-in.html)
[Sign Up for Free Cloud Tier](/cloud/free/)

Oracle Account

* [Sign-In](https://www.oracle.com/webapps/redirect/signon?nexturl=)
* [Create an Account](https://profile.oracle.com/myprofile/account/create-account.jspx)

* [Help](/corporate/contact/help.html)
* Sign Out

[Contact Sales](/corporate/contact/ "Contact Sales")

[Menu

Menu](/global-menu-v2/)

* [Security Alerts](/security-alerts/)

# Oracle Solaris Third Party Bulletin - April 2016

## Oracle Solaris Third Party Bulletin - April 2016

### Description

The Oracle Solaris Third Party Bulletin announces patches for one or more security vulnerabilities fixed in third party software that is included in Oracle Solaris distributions. Starting January 20, 2015, Third Party Bulletins are released on the same day when Oracle Critical Patch Updates are released. These bulletins will also be updated on the Tuesday closest to the 17th of the following two months after their release (i.e. the two months between the normal quarterly Critical Patch Update publication dates). In addition, Third Party Bulletins may also be updated for vulnerability fixes deemed too critical to wait for the next monthly update.

**Due to the threat posed by a successful attack, Oracle strongly recommends that customers apply Third Party Bulletin fixes as soon as possible.**

### Patch Availability

Please see My Oracle Support Note [1448883.1](https://support.oracle.com/epmos/faces/DocumentDisplay?_afrLoop=98356520554156&id=1448883.1)

### Third Party Bulletin Schedule

Third Party Bulletins are released on the Tuesday closest to the 17th day of January, April, July and October. The next four dates are:

* 19 July 2016
* 18 October 2016
* 17 January 2017
* 18 April 2017

### References

* Oracle Critical Patch Updates and Security Alerts main page  [ [Oracle Technology Network](/security-alerts/) ]
* Oracle Critical Patch Updates and Security Alerts - Frequently Asked Questions [ [CPU FAQ](/security-alerts/cpufaq.html) ]
* Risk Matrix definitions   [ [Risk Matrix Definitions](/security-alerts/advisorymatrixglossary.html) ]
* Use of Common Vulnerability Scoring System (CVSS) by Oracle   [ [Oracle CVSS Scoring](/security-alerts/cvssscoringsystem.html) ]

### Modification History

| 2017-October-16 | Rev 8. Added 11.3 as Supported Versions Affected for CVE-2016-2108 |
| --- | --- |
| 2016-September-21 | Rev 7. Added new CVEs fixed via Firefox upgrade |
| 2016-July-08 | Rev 6. Added NTP CVEs |
| 2016-June-27 | Rev 5. Added OpenSSL CVE-2016-2177, CVE-2016-2178 |
| 2016-June-20 | Rev 4. Added all CVEs fixed in Solaris 11.3 SRU9.4 |
| 2016-June-10 | Rev 3. Added OpenSSL CVEs |
| 2016-May-31 | Rev 2. Added all CVEs fixed in Solaris 11.3 SRU8.7 |
| 2016-April-19 | Rev 1. Initial Release |

### Oracle Solaris Executive Summary

This Third Party Bulletin contains 53 new security fixes for the Oracle Solaris.  41 of these vulnerabilities may be remotely exploitable without authentication, i.e., may be exploited over a network without the need for a username and password.

### Oracle Solaris Risk Matrix

#### Revision 7: Published on 2016-09-21

| CVE# | Component | Protocol | Third Party ­component | Remote Exploit without Auth.? | CVSS VERSION 2.0 RISK (see [Risk Matrix Definitions](/security-alerts/advisorymatrixglossary.html)) | | | | | | | Supported Versions Affected | Notes |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| Base Score | Access Vector | Access Complexity | Authen­tication | Confid­entiality | Inte­grity | Avail­ability |
| CVE-2014-1545 | Solaris | Multiple | Firefox | Yes | 10.0 | Network | Low | None | Complete | Complete | Complete | 11.3 | See Note 13 |

#### Revision 6: Published on 2016-07-08

| CVE# | Component | Protocol | Third Party ­component | Remote Exploit without Auth.? | CVSS VERSION 2.0 RISK (see [Risk Matrix Definitions](/security-alerts/advisorymatrixglossary.html)) | | | | | | | Supported Versions Affected | Notes |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| Base Score | Access Vector | Access Complexity | Authen­tication | Confid­entiality | Inte­grity | Avail­ability |
| CVE-2016-1548 | Solaris | NTP | NTP | Yes | 6.4 | Network | Low | None | None | Partial | Partial | 11.3, 10 | See Note 11 |
| CVE-2016-4957 | Solaris | NTP | NTP | Yes | 5.0 | Network | Low | None | None | None | Partial | 11.3, 10 |  |
| CVE-2016-4956 | Solaris | NTP | NTP | Yes | 5.0 | Network | Low | None | None | None | Partial | 11.3, 10 |  |
| CVE-2016-4953 | Solaris | NTP | NTP | Yes | 4.3 | Network | Medium | None | None | None | Partial | 11.3, 10 |  |
| CVE-2016-4954 | Solaris | NTP | NTP | Yes | 4.3 | Network | Medium | None | None | None | Partial | 11.3, 10 |  |
| CVE-2016-4955 | Solaris | NTP | NTP | Yes | 2.6 | Network | High | None | None | None | Partial | 11.3, 10 |  |

#### Revision 5: Published on 2016-06-27

| CVE# | Component | Protocol | Third Party ­component | Remote Exploit without Auth.? | CVSS VERSION 2.0 RISK (see [Risk Matrix Definitions](/security-alerts/advisorymatrixglossary.html)) | | | | | | | Supported Versions Affected | Notes |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| Base Score | Access Vector | Access Complexity | Authen­tication | Confid­entiality | Inte­grity | Avail­ability |
| CVE-2016-2177 | Solaris | SSL/TLS | OpenSSL | Yes | 7.5 | Network | Low | None | Partial | Partial | Partial | 11.3, 10 |  |
| CVE-2016-2178 | Solaris | SSL/TLS | OpenSSL | No | 2.1 | Local | Low | None | Partial | None | None | 11.3, 10 |  |

#### Revision 4: Published on 2016-06-20

| CVE# | Component | Protocol | Third Party ­component | Remote Exploit without Auth.? | CVSS VERSION 2.0 RISK (see [Risk Matrix Definitions](/security-alerts/advisorymatrixglossary.html)) | | | | | | | Supported Versions Affected | Notes |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| Base Score | Access Vector | Access Complexity | Authen­tication | Confid­entiality | Inte­grity | Avail­ability |
| CVE-2015-2806 | Solaris | Multiple | GNU Libtasn1 | Yes | 10.0 | Network | Low | None | Complete | Complete | Complete | 11.3 |  |
| CVE-2014-9679 | Solaris | Multiple | Common Unix Printing System (CUPS) | Yes | 6.8 | Network | Medium | None | Partial | Partial | Partial | 11.3 |  |
| CVE-2015-8786 | Solaris | Multiple | RabbitMQ | No | 6.8 | Network | Low | Single | None | None | Complete | 11.3 |  |
| CVE-2015-7546 | Solaris | Multiple | OpenStack Identity (Keystone) | No | 6.0 | Network | Medium | Single | Partial | Partial | Partial | 11.3 |  |
| CVE-2015-5295 | Solaris | Multiple | OpenStack Orchestration API (Heat) | No | 5.5 | Network | Low | Single | Partial | None | Partial | 11.3 |  |
| CVE-2016-3115 | Solaris | SSH | OpenSSH | No | 5.5 | Network | Low | Single | Partial | Partial | None | 11.3 |  |
| CVE-2015-5223 | Solaris | Multiple | OpenStack Object Storage (Swift) | Yes | 5.0 | Network | Low | None | Partial | None | None | 11.3 |  |
| CVE-2016-0738 | Solaris | Multiple | OpenStack Object Storage (Swift) | Yes | 5.0 | Network | Low | None | None | None | Partial | 11.3 | See Note 8 |
| CVE-2015-8853 | Solaris | Multiple | Perl | Yes | 5.0 | Network | Low | None | None | None | Partial | 11.3 |  |
| CVE-2015-8665 | Solaris | Multiple | LibTIFF | Yes | 4.3 | Network | Medium | None | None | None | Partial | 11.3 |  |
| CVE-2015-8683 | Solaris | Multiple | LibTIFF | Yes | 4.3 | Network | Medium | None | None | None | Partial | 11.3 |  |
| CVE-2015-8781 | Solaris | Multiple | LibTIFF | Yes | 4.3 | Network | Medium | None | None | None | Partial | 11.3, 10 | See Note 9 |
| CVE-2015-1547 | Solaris | Multiple | LibTIFF | Yes | 4.3 | Network | Medium | None | None | None | Partial | 11.3, 10 | See Note 10 |
| CVE-2016-2512 | Solaris | Multiple | Django Python web framework | Yes | 4.3 | Network | Medium | None | None | Partial | None | 11.3 |  |
| CVE-2016-4085 | Solaris | Multiple | Wireshark | Yes | 4.3 | Network | Medium | None | None | None | Partial | 11.3 | See Note 12 |
| CVE-2016-2513 | Solaris | Multiple | Django Python web framework | Yes | 2.6 | Network | High | None | Partial | None | None | 11.3 |  |

#### Revision 3: Published on 2016-06-10

| CVE# | Component | Protocol | Third Party ­component | Remote Exploit without Auth.? | CVSS VERSION 2.0 RISK (see [Risk Matrix Definitions](/security-alerts/advisorymatrixglossary.html)) | | | | | | | Supported Versions Affected | Notes |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| Base Score | Access Vector | Access Complexity | Authen­tication | Confid­entiality | Inte­grity | Avail­ability |
| CVE-2016-2108 | Solaris | SSL/TLS | OpenSSL | Yes | 10.0 | Network | Low | None | Complete | Complete | Complete | 11.3, 10 |  |
| CVE-2016-2109 | Solaris | SSL/TLS | OpenSSL | Yes | 7.8 | Network | Low | None | None | None | Complete | 11.3, 10 |  |
| CVE-2016-2176 | Solaris | SSL/TLS | OpenSSL | Yes | 6.4 | Network | Low | None | Partial | None | Partial | 11.3, 10 |  |
| CVE-2016-2105 | Solaris | SSL/TLS | OpenSSL | Yes | 5.0 | Network | Low | None | None | None | Partial | 11.3, 10 |  |
| CVE-2016-2106 | Solaris | SSL/TLS | OpenSSL | Yes | 5.0 | Network | Low | None | None | None | Partial | 11.3, 10 |  |
| CVE-2016-2107 | Solaris | SSL/TLS | OpenSSL | Yes | 2.6 | Network | High | None | Partial | None | None | 11.3, 10 | See Note 7 |

#### Revision 2: Published on 2016-05-31

| CVE# | Component | Protocol | Third Party ­component | Remote Exploit without Auth.? | CVSS VERSION 2.0 RISK (see [Risk Matrix Definitions](/security-alerts/advisorymatrixglossary.html)) | | | | | | | Supported Versions Affected | Notes |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| Base Score | Access Vector | Access Complexity | Authen­tication | Confid­entiality | Inte­grity | Avail­ability |
| CVE-2016-2315 | Solaris | Multiple | Git | Yes | 10.0 | Network | Low | None | Complete | Complete | Complete | 11.3 | See Note 5 |
| CVE-2016-2342 | Solaris | Multiple | Quagga | Yes | 7.6 | Network | High | None | Complete | Complete | Complete | 11.3 |  |
| CVE-2015-7545 | Solaris | Multiple | Git | Yes | 7.5 | Network | Low | None | Partial | Partial | Partial | 11.3 |  |
| CVE-2015-2695 | Solaris | Kerberos | Kerberos | Yes | 7.1 | Network | Medium | None | None | None | Complete | 11.3 |  |
| CVE-2015-2697 | Solaris | Kerberos | Kerberos | No | 6.8 | Network | Low | Single | None | None | Complete | 11.3 |  |
| CVE-2016-3068 | Solaris | Multiple | Mercurial source code management | Yes | 6.8 | Network | Medium | None | Partial | Partial | Partial | 11.3 | See Note 4 |
| CVE-2016-3115 | Solaris | SSH | SSH | No | 5.5 | Network | Low | Single | Partial | Partial | None | 11.3, 10 |  |
| CVE-2014-3566 | Solaris | SSL | Evolution | Yes | 5.0 | Network | Low | None | Partial | None | None | 11.3 |  |
| CVE-2015-7551 | Solaris | None | Ruby | No | 4.6 | Local | Low | None | Partial | Partial | Partial | 11.3 |  |
| CVE-2015-8629 | Solaris | Kerberos | Kerberos | No | 2.1 | Network | High | Single | Partial | None | None | 11.3, 10 |  |

#### Revision 1: Published on 2016-04-19

| CVE# | Component | Protocol | Third Party ­component | Remote Exploit without Auth.? | CVSS VERSION 2.0 RISK (see [Risk Matrix Definitions](/security-alerts/advisorymatrixglossary.html)) | | | | | | | Supported Versions Affected | Notes |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| Base Score | Access Vector | Access Complexity | Authen­tication | Confid­entiality | Inte­grity | Avail­ability |
| CVE-2016-0705 | Solaris | SSL/TLS | OpenSSL | Yes | 10.0 | Network | Low | None | Complete | Complete | Complete | 11.3, 10 |  |
| CVE-2016-0799 | Solaris | SSL/TLS | WanBoot | Yes | 10.0 | Network | Low | None | Complete | Complete | Complete | 10 | See Note 1 |
| CVE-2016-0798 | Solaris | SSL/TLS | OpenSSL | Yes | 7.8 | Network | Low | None | None | None | Complete | 11.3, 10 |  |
| CVE-2015-3415 | Solaris | Multiple | SQLite3 | Yes | 7.5 | Network | Low | None | Partial | Partial | Partial | 11.3, 10 | See Note 3 |
| CVE-2015-5602 | Solaris | None | Sudo | No | 7.2 | Local | Low | None | Complete | Complete | Complete | 11.3, 10 |  |
| CVE-2015-4752 | Solaris | None | MySQL | No | 7.2 | Local | Low | None | Complete | Complete | Complete | 11.3 | See Note 2 |
| CVE-2016-2523 | Solaris | Multiple | Wireshark | Yes | 7.1 | Network | Medium | None | None | None | Complete | 11.3 |  |
| CVE-2016-1283 | Solaris | Multiple | PCRE | Yes | 6.8 | Network | Medium | None | Partial | Partial | Partial | 11.3 |  |
| CVE-2014-9766 | Solaris | Multiple | X.Org | Yes | 6.8 | Network | Medium | None | Partial | Partial | Partial | 11.3, 10 |  |
| CVE-2015-3885 | Solaris | Multiple | Dcraw | Yes | 4.3 | Network | Medium | None | None | None | Partial | 11.3 |  |
| CVE-2007-6720 | Solaris | Multiple | Libmikmod | Yes | 2.6 | Network | High | None | None | None | Partial | 11.3 |  |
| CVE-2016-0702 | Solaris | None | OpenSSL | No | 1.9 | Local | Medium | None | Partial | None | None | 11.3, 10 | See Note 6 |

#### Notes:

1. This fix also addresses CVE-2016-0703 CVE-2016-0704 CVE-2016-0797 CVE-2016-0800.
2. This fix also addresses CVE-2014-6464 CVE-2014-6469 CVE-2014-6491 CVE-2014-6494 CVE-2014-6500 CVE-2014-6507 CVE-2014-6555 CVE-2014-6559 CVE-2014-6568 CVE-2015-0374 CVE-2015-0382 CVE-2015-0411 CVE-2015-0432 CVE-2015-0433 CVE-2015-0499 CVE-2015-0505 CVE-2015-2568 CVE-2015-2571 CVE-2015-2573 CVE-2015-2582 CVE-2015-2620 CVE-2015-2643 CVE-2015-2648 CVE-2015-4737 CVE-2015-4792 CVE-2015-4802 CVE-2015-4807 CVE-2015-4815 CVE-2015-4816 CVE-2015-4819 CVE-2015-4826 CVE-2015-4830 CVE-2015-4836 CVE-2015-4858 CVE-2015-4861 CVE-2015-4864 CVE-2015-4870 CVE-2015-4879 CVE-2015-4913 CVE-2015-7744 CVE-2016-0505 CVE-2016-0546 CVE-2016-0596 CVE-2016-0597 CVE-2016-0598 CVE-2016-0600 CVE-2016-0606 CVE-2016-0608 CVE-2016-0609 CVE-2016-0616.
3. This fix also addresses CVE-2015-3414 CVE-2015-3416.
4. This fix also addresses CVE-2016-3069 CVE-2016-3630.
5. This fix also addresses CVE-2016-2324.
6. This fix also addresses CVE-2016-0702 CVE-2016-0797 CVE-2016-0799.
7. This fix also addresses CVE-2016-2106 CVE-2016-2107 CVE-2016-2108 CVE-2016-2109 CVE-2016-2176.
8. This fix also addresses CVE-2016-0737.
9. This fix also addresses CVE-2015-8782 CVE-2015-8783.
10. This fix also addresses CVE-2015-8784.
11. This fix also addresses CVE-2016-1551 CVE-2016-1549 CVE-2016-2516 CVE-2016-2517 CVE-2016-2518 CVE-2016-2519 CVE-2016-1547 CVE-2015-7704 CVE-2015-8138 CVE-2016-1550.
12. This fix also addresses CVE-2016-4085.
13. This fix also addresses CVE-2013-5609 CVE-2013-5610 CVE-2013-5611 CVE-2013-5612 CVE-2013-5613 CVE-2013-5614 CVE-2013-5615 CVE-2013-5616 CVE-2013-5618 CVE-2013-5619 CVE-2013-6629 CVE-2013-6630 CVE-2013-6671 CVE-2013-6672 CVE-2013-6673 CVE-2014-1477 CVE-2014-1478 CVE-2014-1479 CVE-2014-1480 CVE-2014-1481 CVE-2014-1482 CVE-2014-1483 CVE-2014-1484 CVE-2014-1485 CVE-2014-1486 CVE-2014-1487 CVE-2014-1488 CVE-2014-1489 CVE-2014-1493 CVE-2014-1494 CVE-2014-1496 CVE-2014-1497 CVE-2014-1498 CVE-2014-1499 CVE-2014-1500 CVE-2014-1501 CVE-2014-1502 CVE-2014-1504 CVE-2014-1505 CVE-2014-1506 CVE-2014-1507 CVE-2014-1508 CVE-2014-1509 CVE-2014-1510 CVE-2014-1511 CVE-2014-1512 CVE-2014-1513 CVE-2014-1514 CVE-2014-1518 CVE-2014-1519 CVE-2014-1520 CVE-2014-1522 CVE-2014-1523 CVE-2014-1524 CVE-2014-1525 CVE-2014-1526 CVE-2014-1527 CVE-2014-1528 CVE-2014-1529 CVE-2014-1530 CVE-2014-1531 CVE-2014-1532 CVE-2014-1533 CVE-2014-1534 CVE-2014-1536 CVE-2014-1537 CVE-2014-1538 CVE-2014-1539 CVE-2014-1540 CVE-2014-1541 CVE-2014-1542 CVE-2014-1543 CVE-2014-1544 CVE-2014-1547 CVE-2014-1548 CVE-2014-1549 CVE-2014-1550 CVE-2014-1551 CVE-2014-1552 CVE-2014-1553 CVE-2014-1554 CVE-2014-1555 CVE-2014-1556 CVE-2014-1557 CVE-2014-1559 CVE-2014-1561 CVE-2014-1562 CVE-2014-1563 CVE-2014-1564 CVE-2014-1565 CVE-2014-1566 CVE-2014-1567 CVE-2014-1568 CVE-2014-1569 CVE-2014-1575 CVE-2014-1580 CVE-2014-1582 CVE-2014-1584 CVE-2014-1588 CVE-2014-1589 CVE-2014-1591 CVE-2014-1595 CVE-2014-2018 CVE-2014-8631 CVE-2014-8632 CVE-2014-8635 CVE-2014-8636 CVE-2014-8637 CVE-2014-8640 CVE-2014-8642 CVE-2014-8643 CVE-2015-0797 CVE-2015-0798 CVE-2015-0799 CVE-2015-0800 CVE-2015-0802 CVE-2015-0803 CVE-2015-0804 CVE-2015-0805 CVE-2015-0806 CVE-2015-0808 CVE-2015-0810 CVE-2015-0811 CVE-2015-0812 CVE-2015-0814 CVE-2015-0819 CVE-2015-0820 CVE-2015-0821 CVE-2015-0823 CVE-2015-0824 CVE-2015-0825 CVE-2015-0826 CVE-2015-0828 CVE-2015-0829 CVE-2015-0830 CVE-2015-0832 CVE-2015-0833 CVE-2015-0834 CVE-2015-0835 CVE-2015-2706 CVE-2015-2708 CVE-2015-2709 CVE-2015-2710 CVE-2015-2711 CVE-2015-2712 CVE-2015-2713 CVE-2015-2714 CVE-2015-2715 CVE-2015-2716 CVE-2015-2717 CVE-2015-2718 CVE-2015-2720 CVE-2015-2721 CVE-2015-2722 CVE-2015-2724 CVE-2015-2725 CVE-2015-2726 CVE-2015-2727 CVE-2015-2728 CVE-2015-2729 CVE-2015-2730 CVE-2015-2731 CVE-2015-2733 CVE-2015-2734 CVE-2015-2735 CVE-2015-2736 CVE-2015-2737 CVE-2015-2738 CVE-2015-2739 CVE-2015-2740 CVE-2015-2741 CVE-2015-2742 CVE-2015-2743 CVE-2015-4473 CVE-2015-4474 CVE-2015-4475 CVE-2015-4476 CVE-2015-4477 CVE-2015-4478 CVE-2015-4479 CVE-2015-4480 CVE-2015-4481 CVE-2015-4482 CVE-2015-4483 CVE-2015-4484 CVE-2015-4485 CVE-2015-4486 CVE-2015-4487 CVE-2015-4488 CVE-2015-4489 CVE-2015-4490 CVE-2015-4491 CVE-2015-4492 CVE-2015-4493 CVE-2015-4495 CVE-2015-4496 CVE-2015-4497 CVE-2015-4498 CVE-2015-4500 CVE-2015-4501 CVE-2015-4502 CVE-2015-4503 CVE-2015-4504 CVE-2015-4505 CVE-2015-4506 CVE-2015-4507 CVE-2015-4508 CVE-2015-4509 CVE-2015-4510 CVE-2015-4511 CVE-2015-4512 CVE-2015-4513 CVE-2015-4514 CVE-2015-4515 CVE-2015-4516 CVE-2015-4517 CVE-2015-4518 CVE-2015-4519 CVE-2015-4520 CVE-2015-4521 CVE-2015-4522 CVE-2015-7174 CVE-2015-7175 CVE-2015-7176 CVE-2015-7177 CVE-2015-7178 CVE-2015-7179 CVE-2015-7180 CVE-2015-7181 CVE-2015-7182 CVE-2015-7183 CVE-2015-7184 CVE-2015-7185 CVE-2015-7186 CVE-2015-7187 CVE-2015-7188 CVE-2015-7189 CVE-2015-7190 CVE-2015-7191 CVE-2015-7192 CVE-2015-7193 CVE-2015-7194 CVE-2015-7195 CVE-2015-7196 CVE-2015-7197 CVE-2015-7198 CVE-2015-7199 CVE-2015-7200.

Resources for

* [Careers](/careers/)
* [Developers](/developer/)
* [Investors](https://investor.oracle.com/home/default.aspx)
* [Partners](/partner/)
* [Researchers](/research/)
* [Students and Educators](https://academy.oracle.com/en/oa-web-overview.html)

Why Oracle

* [Analyst Reports](/corporate/analyst-reports/)
* [Best cloud-based
  ERP](/erp/what-is-erp/best-erp/)
* [Cloud Economics](/cloud/economics/)
* [Social Impact](/social-impact/)
* [Culture and Inclusion](/careers/diversity-inclusion/)
* [Security Practices](/corporate/security-practices/)

Learn

* [What is cloud
  computing?](/cloud/what-is-cloud-computing/)
* [What is CRM?](/cx/what-is-crm/)
* [What is
  Docker?](/cloud/cloud-native/container-registry/what-is-docker/)
* [What is
  Kubernetes?](/cloud/cloud-native/kubernetes-engine/what-is-kubernetes/)
* [What is
  Python?](/developer/what-is-python-for-developers/)
* [What is SaaS?](/applications/what-is-saas/)

News and Events

* [News](/news/)
* [Oracle CloudWorld](/cloudworld/)
* [Oracle CloudWorld Tour](/cloudworld-tour/)
* [Oracle Health Summit](/health/health-summit/)
* [Oracle Dev Tour](/developer/dev-tour/)
* [Search all events](https://search.oracle.com/events?q=&lang=english)

Contact Us

* US Sales: +1.800.633.0738
* [How can we help?](/corporate/contact/)
* [Subscribe to emails](https://go.oracle.com/subscribe/?l_code=en&src1=OW:O:FO)
* [Integrity Helpline](https://secure.ethicspoint.com/domain/media/en/gui/31053/index.html)
* [Accessibility](/corporate/accessibility/)

---

* [Country/Region](/universal-menu/#u10countrymenu)

* [© 2025 Oracle](/legal/copyright/)
* [Privacy](/legal/privacy/)/[Do Not Sell My
  Info](/legal/privacy/privacy-choices/)
* [Ad
  Choices](/legal/privacy/privacy-policy/#adchoices)
* [Careers](/corporate/careers/)



=== Content from bugzilla.mozilla.org_b2c0d470_20250124_230117.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/911845)
* [XML](/show_bug.cgi?ctype=xml&id=911845)

Closed
[Bug 911845](/show_bug.cgi?id=911845)

Opened 11 years ago
Closed 11 years ago

# Beta node checking, found bugs

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

Beta node checking, found bugs

## Categories

### (Core :: JavaScript Engine, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=JavaScript%20Engine#JavaScript%20Engine)

JavaScript Engine
▾

Core :: JavaScript Engine
The interpreter engine for the core JavaScript language, independent of the browser's object model. File ONLY core JavaScript language bugs in this category. For bugs involving browser objects such as "window" and "document", use the "DOM" component. For bugs involving calls between JavaScript and C++, use the "XPConnect" component.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=JavaScript%20Engine)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

unspecified

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

All

All

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

normal

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla27

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Performance Impact | --- |
| --- | --- |
| Webcompat Score | --- |
| Accessibility Severity | --- |
| a11y-review | --- |
| Webcompat Priority | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox22 | --- | [unaffected](/buglist.cgi?f1=cf_status_firefox22&o1=equals&v1=unaffected) |
| firefox23 | --- | [affected](/buglist.cgi?f1=cf_status_firefox23&o1=equals&v1=affected) |
| firefox24 | --- | [affected](/buglist.cgi?f1=cf_status_firefox24&o1=equals&v1=affected) |
| firefox25 | --- | [affected](/buglist.cgi?f1=cf_status_firefox25&o1=equals&v1=affected) |
| firefox26 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox26&o1=equals&v1=wontfix) |
| firefox27 | --- | [fixed](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=fixed) |
| firefox-esr17 | --- | [unaffected](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=unaffected) |
| firefox-esr24 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=wontfix) |
| b2g18 | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=unaffected) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox22 |  | unaffected |
| firefox23 |  | affected |
| firefox24 |  | affected |
| firefox25 |  | affected |
| firefox26 |  | wontfix |
| firefox27 |  | fixed |
| firefox-esr17 |  | unaffected |
| firefox-esr24 |  | wontfix |
| b2g18 |  | unaffected |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: sunfish, Assigned: sunfish)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/d0f20c3888e5ac206b6ede4d4dc5c2ce?d=mm&size=40)  [sunfish](/user_profile?user_id=468136)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/d0f20c3888e5ac206b6ede4d4dc5c2ce?d=mm&size=40)  [sunfish](/user_profile?user_id=468136)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/4fe52ee1503aecf7b6c976b8eb7c1753?d=mm&size=40)  [willyelm](/user_profile?user_id=714609)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

7 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

[915846](/show_bug.cgi?id=915846 "RESOLVED FIXED - Range Analysis API changes")

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[699883](/show_bug.cgi?id=699883 "RESOLVED FIXED - IonMonkey: Implement range analysis")

Dependency [tree](/showdependencytree.cgi?id=911845&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=911845)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Keywords: reporter-external, sec-low, Whiteboard: [qa-][adv-main27+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[reporter-external](/buglist.cgi?keywords=reporter-external&resolution=---),
[sec-low](/buglist.cgi?keywords=sec-low&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[qa-][adv-main27+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [dveditz](/user_profile?user_id=1689) | [sec-bounty](#a9073664_1689 "11 years ago") | - |
| --- | --- | --- |
| [dveditz](/user_profile?user_id=1689) | sec-bounty | - |
| --- | --- | --- |
|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | in-testsuite |  |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (2 files, 1 obsolete file)

| [range-make-infinite.patch](/attachment.cgi?id=798626)  [11 years ago](#c0)  [Dan Gohman [:sunfish]](/user_profile?user_id=468136)   2.42 KB, patch |  | [Details](/attachment.cgi?id=798626&action=edit) | [Diff](/attachment.cgi?id=798626&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=911845&attachment=798626) |
| --- | --- | --- |
| [This patch contains the new dynamic checks.](/attachment.cgi?id=798628)  [11 years ago](#c1)  [Dan Gohman [:sunfish]](/user_profile?user_id=468136)   12.94 KB, patch |  | [Details](/attachment.cgi?id=798628&action=edit) | [Diff](/attachment.cgi?id=798628&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=911845&attachment=798628) |
| [Updated per review feedback](/attachment.cgi?id=800801)  [11 years ago](#c8)  [Dan Gohman [:sunfish]](/user_profile?user_id=468136)   11.94 KB, patch | nbp : [review+](#c10 "11 years ago") | [Details](/attachment.cgi?id=800801&action=edit) | [Diff](/attachment.cgi?id=800801&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=911845&attachment=800801) |

Show Obsolete

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Dan Gohman [:sunfish]](/user_profile?user_id=468136)  Assignee |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=911845#c0)• 11 years ago |
|  | |

Attached patch

[range-make-infinite.patch](attachment.cgi?id=798626&action=diff)
— [Details](attachment.cgi?id=798626&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=911845&attachment=798626)

I extended --ion-check-range-analysis to include checking for Beta nodes. This turned up some cases where range analysis wasn't setting the max\_exponent\_ field properly.
I have not yet done any analysis to determine whether the bugs found are actually security-relevant, but since the bugs are in range analysis code, and they're present in various branches, I'm filing it as a protected bug to be on the safe side.
[Attachment #798626](/attachment.cgi?id=798626&action=edit "range-make-infinite.patch") -
Flags: review?(nicolas.b.pierron)

|  | [Dan Gohman [:sunfish]](/user_profile?user_id=468136)  Assignee |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=911845#c1)• 11 years ago |
|  | |

Attached patch

[This patch contains the new dynamic checks.](attachment.cgi?id=798628&action=diff) (obsolete)
— [Details](attachment.cgi?id=798628&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=911845&attachment=798628)

[Attachment #798628](/attachment.cgi?id=798628&action=edit "This patch contains the new dynamic checks.") -
Flags: review?(nicolas.b.pierron)

|  | [Dan Gohman [:sunfish]](/user_profile?user_id=468136)  Assignee |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=911845#c2)• 11 years ago |
|  | |

Comment on [attachment 798626](/attachment.cgi?id=798626 "range-make-infinite.patch") [[details]](/attachment.cgi?id=798626&action=edit "range-make-infinite.patch") [[diff]](/attachment.cgi?id=798626&action=diff "range-make-infinite.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=911845&attachment=798626)
range-make-infinite.patch
[Security approval request comment]
How easily could an exploit be constructed based on the patch?
Not trivially. It's just an incorrect range from range analysis, and the patches here only show how to observe it with the help of --ion-check-range-analysis, so it would take some creativity to construct a testcase which observes the bug without that flag, and in a security-relevant way.
Do comments in the patch, the check-in comment, or tests included in the patch paint a bulls-eye on the security problem?
I don't think so. This bug was only found with --ion-check-range-analysis, so while it's theoretically exploitable without that, it's probably not easy.
Which older supported branches are affected by this flaw?
It appears this flaw is in all branches back to Firefox 23.
If not all supported branches, which bug introduced the flaw?
It appears to go back to [bug 699883](/show_bug.cgi?id=699883 "RESOLVED FIXED - IonMonkey: Implement range analysis").
Do you have backports for the affected branches? If not, how different, hard to create, and risky will they be?
The patch easily backports to all affected branches. mozilla-release requires a small adjustment due to the ion->jit rename.
How likely is this patch to cause regressions; how much testing does it need?
It is unlikely to cause regressions. This code hasn't changed a lot in several releases, so the fix is very likely to have the same effect in all of them.
[Attachment #798626](/attachment.cgi?id=798626&action=edit "range-make-infinite.patch") -
Flags: sec-approval?

|  | [Nicolas B. Pierron [:nbp]](/user_profile?user_id=422187) |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=911845#c3)• 11 years ago |
|  | |

(In reply to Dan Gohman [:sunfish] from [comment #0](/show_bug.cgi?id=911845#c0 "RESOLVED FIXED - Beta node checking, found bugs"))
> I extended --ion-check-range-analysis to include checking for Beta nodes.
> This turned up some cases where range analysis wasn't setting the
> max\_exponent\_ field properly.
From what I knew, Beta Nodes had an incorrect max\_exponent of 32 for int, I don't know if this is also the case for doubles. The only invariant that we want to maintain for security reasons is that max\_exponent must remain an \*over approximation\*.
Now, not having this invariant means that one can fool the JS engine in truncating operations which were not supposed to be truncated. Notice that as soon as the max\_exponent reach 32, there is no way to make it go down except with an explicit truncate.

|  | [Nicolas B. Pierron [:nbp]](/user_profile?user_id=422187) |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=911845#c4)• 11 years ago |
|  | |

Comment on [attachment 798628](/attachment.cgi?id=798628 "This patch contains the new dynamic checks.") [[details]](/attachment.cgi?id=798628&action=edit "This patch contains the new dynamic checks.") [[diff]](/attachment.cgi?id=798628&action=diff "This patch contains the new dynamic checks.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=911845&attachment=798628)
This patch contains the new dynamic checks.
Review of [attachment 798628](/attachment.cgi?id=798628 "This patch contains the new dynamic checks.") [[details]](/attachment.cgi?id=798628&action=edit "This patch contains the new dynamic checks.") [[diff]](/attachment.cgi?id=798628&action=diff "This patch contains the new dynamic checks.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=911845&attachment=798628):
-----------------------------------------------------------------
This looks good except for the duplication of the Range pointer on the LIR nodes.
::: js/src/jit/LIR-Common.h
@@ +4973,5 @@
> };
>
> class LAssertRangeV : public LInstructionHelper<0, BOX\_PIECES, 3>
> {
> + const Range \*range\_;
Please undo any modification of this file, we otherwise we would have it twice in memory.
Remember that the MIR is still alive at the code gen, there is no need to duplicate anything.
The LIR is just some meta data of the MIR used by the register allocator.
::: js/src/jit/Lowering.cpp
@@ -2477,5 @@
> MOZ\_ASSUME\_UNREACHABLE("Unexpected Range for MIRType");
> break;
> }
>
> - lir->setMir(ins);
I don't understand why?
[Attachment #798628](/attachment.cgi?id=798628&action=edit "This patch contains the new dynamic checks.") -
Flags: review?(nicolas.b.pierron)

|  | [Nicolas B. Pierron [:nbp]](/user_profile?user_id=422187) |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=911845#c5)• 11 years ago |
|  | |

Comment on [attachment 798626](/attachment.cgi?id=798626 "range-make-infinite.patch") [[details]](/attachment.cgi?id=798626&action=edit "range-make-infinite.patch") [[diff]](/attachment.cgi?id=798626&action=diff "range-make-infinite.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=911845&attachment=798626)
range-make-infinite.patch
Review of [attachment 798626](/attachment.cgi?id=798626 "range-make-infinite.patch") [[details]](/attachment.cgi?id=798626&action=edit "range-make-infinite.patch") [[diff]](/attachment.cgi?id=798626&action=diff "range-make-infinite.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=911845&attachment=798626):
-----------------------------------------------------------------
::: js/src/jit/RangeAnalysis.cpp
@@ +340,5 @@
>
> Range \*r = new Range(
> newLower, newUpper,
> lhs->decimal\_ && rhs->decimal\_,
> Min(lhs->max\_exponent\_, rhs->max\_exponent\_));
If this rule is not wrong (it does not feel as being wrong from my point of view), then one of the input is wrong.
::: js/src/jit/RangeAnalysis.h
@@ +234,5 @@
>
> inline void makeLowerInfinite() {
> lower\_infinite\_ = true;
> lower\_ = JSVAL\_INT\_MIN;
> + max\_exponent\_ = MaxDoubleExponent;
Doing so would be terrible, as this will disable the truncate phase.
[Attachment #798626](/attachment.cgi?id=798626&action=edit "range-make-infinite.patch") -
Flags: review?(nicolas.b.pierron)

|  | [Nicolas B. Pierron [:nbp]](/user_profile?user_id=422187) |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=911845#c6)• 11 years ago |
|  | |

Comment on [attachment 798626](/attachment.cgi?id=798626 "range-make-infinite.patch") [[details]](/attachment.cgi?id=798626&action=edit "range-make-infinite.patch") [[diff]](/attachment.cgi?id=798626&action=diff "range-make-infinite.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=911845&attachment=798626)
range-make-infinite.patch
There is no need to ask for sec-approval before getting an r+ on the patch.
[Attachment #798626](/attachment.cgi?id=798626&action=edit "range-make-infinite.patch") -
Flags: sec-approval?

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=911845#a152672_1689)• 11 years ago |

Blocks: [699883](/show_bug.cgi?id=699883 "RESOLVED FIXED - IonMonkey: Implement range analysis")
[status-b2g18](/buglist.cgi?f1=cf_status_b2g18&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=unaffected)
[status-firefox22](/buglist.cgi?f1=cf_status_firefox22&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_firefox22&o1=equals&v1=unaffected)
[status-firefox23](/buglist.cgi?f1=cf_status_firefox23&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox23&o1=equals&v1=affected)
[status-firefox24](/buglist.cgi?f1=cf_status_firefox24&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox24&o1=equals&v1=affected)
[status-firefox25](/buglist.cgi?f1=cf_status_firefox25&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox25&o1=equals&v1=affected)
[status-firefox26](/buglist.cgi?f1=cf_status_firefox26&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox26&o1=equals&v1=affected)
[status-firefox-esr17](/buglist.cgi?f1=cf_status_firefox_esr17&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=unaffected)Keywords: [regression](/buglist.cgi?keywords=regression&resolution=---)

|  | [Dan Gohman [:sunfish]](/user_profile?user_id=468136)  Assignee |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=911845#c7)• 11 years ago |
|  | |

(In reply to Nicolas B. Pierron [:nbp] from [comment #5](/show_bug.cgi?id=911845#c5 "RESOLVED FIXED - Beta node checking, found bugs"))
> Comment on [attachment 798626](/attachment.cgi?id=798626 "range-make-infinite.patch") [[details]](/attachment.cgi?id=798626&action=edit "range-make-infinite.patch") [[diff]](/attachment.cgi?id=798626&action=diff "range-make-infinite.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=911845&attachment=798626)
> range-make-infinite.patch
>
> Review of [attachment 798626](/attachment.cgi?id=798626 "range-make-infinite.patch") [[details]](/attachment.cgi?id=798626&action=edit "range-make-infinite.patch") [[diff]](/attachment.cgi?id=798626&action=diff "range-make-infinite.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=911845&attachment=798626):
> -----------------------------------------------------------------
>
> ::: js/src/jit/RangeAnalysis.cpp
> @@ +340,5 @@
> >
> > Range \*r = new Range(
> > newLower, newUpper,
> > lhs->decimal\_ && rhs->decimal\_,
> > Min(lhs->max\_exponent\_, rhs->max\_exponent\_));
>
> If this rule is not wrong (it does not feel as being wrong from my point of
> view), then one of the input is wrong.
I think the real problem here is that there are many places in the Range code where it's unclear whether the code should be overriding the exponent by inferring a value from lower() and upper(), or whether it should be trusting the given exponent.
My patch on [bug 909528](/show_bug.cgi?id=909528 "RESOLVED WORKSFORME - The \"decimal\" characteristic of ranges needs documentation") is my initial attempt to clear up this confusion.
>
> ::: js/src/jit/RangeAnalysis.h
> @@ +234,5 @@
> >
> > inline void makeLowerInfinite() {
> > lower\_infinite\_ = true;
> > lower\_ = JSVAL\_INT\_MIN;
> > + max\_exponent\_ = MaxDoubleExponent;
>
> Doing so would be terrible, as this will disable the truncate phase.
Looking at how makeLowerInfinite() is used, I don't see this. Values which have had makeLowerInfinite() called on their range aren't automatically safe to truncate anyway.

|  | [Dan Gohman [:sunfish]](/user_profile?user_id=468136)  Assignee |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=911845#c8)• 11 years ago |
|  | |

Attached patch

[Updated per review feedback](attachment.cgi?id=800801&action=diff)
— [Details](attachment.cgi?id=800801&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=911845&attachment=800801)

(In reply to Nicolas B. Pierron [:nbp] from [comment #4](/show_bug.cgi?id=911845#c4 "RESOLVED FIXED - Beta node checking, found bugs"))
> Comment on [attachment 798628](/attachment.cgi?id=798628 "This patch contains the new dynamic checks.") [[details]](/attachment.cgi?id=798628&action=edit "This patch contains the new dynamic checks.") [[diff]](/attachment.cgi?id=798628&action=diff "This patch contains the new dynamic checks.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=911845&attachment=798628)
> This patch contains the new dynamic checks.
>
> Review of [attachment 798628](/attachment.cgi?id=798628 "This patch contains the new dynamic checks.") [[details]](/attachment.cgi?id=798628&action=edit "This patch contains the new dynamic checks.") [[diff]](/attachment.cgi?id=798628&action=diff "This patch contains the new dynamic checks.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=911845&attachment=798628):
> -----------------------------------------------------------------
>
> This looks good except for the duplication of the Range pointer on the LIR
> nodes.
>
> ::: js/src/jit/LIR-Common.h
> @@ +4973,5 @@
> > };
> >
> > class LAssertRangeV : public LInstructionHelper<0, BOX\_PIECES, 3>
> > {
> > + const Range \*range\_;
>
> Please undo any modification of this file, we otherwise we would have it
> twice in memory.
> Remember that the MIR is still alive at the code gen, there is no need to
> duplicate anything.
>
> The LIR is just some meta data of the MIR used by the register allocator.
I didn't see a need to be concerned about memory usage for AssertRange nodes, but your suggestion makes sense. Attached is an updated patch that works this way.
> ::: js/src/jit/Lowering.cpp
> @@ -2477,5 @@
> > MOZ\_ASSUME\_UNREACHABLE("Unexpected Range for MIRType");
> > break;
> > }
> >
> > - lir->setMir(ins);
>
> I don't understand why?
It made sense when the LIR was carrying its own range. Now that it's using the MIR node for the range, I reverted this.
[Attachment #798628](/attachment.cgi?id=798628&action=edit "This patch contains the new dynamic checks.") -
Attachment is obsolete: true
[Attachment #800801](/attachment.cgi?id=800801&action=edit "Updated per review feedback") -
Flags: review?(nicolas.b.pierron)

|  | [Nicolas B. Pierron [:nbp]](/user_profile?user_id=422187) |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=911845#c9)• 11 years ago |
|  | |

(In reply to Dan Gohman [:sunfish] from [comment #7](/show_bug.cgi?id=911845#c7 "RESOLVED FIXED - Beta node checking, found bugs"))
> (In reply to Nicolas B. Pierron [:nbp] from [comment #5](/show_bug.cgi?id=911845#c5 "RESOLVED FIXED - Beta node checking, found bugs"))
> > Comment on [attachment 798626](/attachment.cgi?id=798626 "range-make-infinite.patch") [[details]](/attachment.cgi?id=798626&action=edit "range-make-infinite.patch") [[diff]](/attachment.cgi?id=798626&action=diff "range-make-infinite.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=911845&attachment=798626)
> > range-make-infinite.patch
> >
> > Review of [attachment 798626](/attachment.cgi?id=798626 "range-make-infinite.patch") [[details]](/attachment.cgi?id=798626&action=edit "range-make-infinite.patch") [[diff]](/attachment.cgi?id=798626&action=diff "range-make-infinite.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=911845&attachment=798626):
> > -----------------------------------------------------------------
> >
> > ::: js/src/jit/RangeAnalysis.cpp
> > @@ +340,5 @@
> > >
> > > Range \*r = new Range(
> > > newLower, newUpper,
> > > lhs->decimal\_ && rhs->decimal\_,
> > > Min(lhs->max\_exponent\_, rhs->max\_exponent\_));
> >
> > If this rule is not wrong (it does not feel as being wrong from my point of
> > view), then one of the input is wrong.
>
> I think the real problem here is that there are many places in the Range
> code where it's unclear whether the code should be overriding the exponent
> by inferring a value from lower() and upper(), or whether it should be
> trusting the given exponent.
The exponent is an over approximation, and we should always compute another over-approximation based on the exponent.
We cannot use lower() and upper() to compute the exponent as these functions are returning discrete values which are outside the range of the exponent.
The only case where lower() and upper() can be used, is when we know that these values are not open on the boundaries of the int32 range.
> >
> > ::: js/src/jit/RangeAnalysis.h
> > @@ +234,5 @@
> > >
> > > inline void makeLowerInfinite() {
> > > lower\_infinite\_ = true;
> > > lower\_ = JSVAL\_INT\_MIN;
> > > + max\_exponent\_ = MaxDoubleExponent;
> >
> > Doing so would be terrible, as this will disable the truncate phase.
>
> Looking at how makeLowerInfinite() is used, I don't see this. Values which
> have had makeLowerInfinite() called on their range aren't automatically safe
> to truncate anyway.
I agree, it can have a fractional part. But even if a value is marked as LowerInfinite of the int32 range, it can still have a know and precise exponent.
The infinite are only related to the int32 range, and nothing else. They are in no way meant to encode a double infinity. The only way to represent a double infinity is to use the max\_exponent\_ field.
So, makeLowerInfinite should not manipulate the max\_exponent field except resetting it to MaxInt32Exponent if it is lower.

|  | [Nicolas B. Pierron [:nbp]](/user_profile?user_id=422187) |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=911845#c10)• 11 years ago |
|  | |

Comment on [attachment 800801](/attachment.cgi?id=800801 "Updated per review feedback") [[details]](/attachment.cgi?id=800801&action=edit "Updated per review feedback") [[diff]](/attachment.cgi?id=800801&action=diff "Updated per review feedback") [[review]](/page.cgi?id=splinter.html&ignore=&bug=911845&attachment=800801)
Updated per review feedback
Review of [attachment 800801](/attachment.cgi?id=800801 "Updated per review feedback") [[details]](/attachment.cgi?id=800801&action=edit "Updated per review feedback") [[diff]](/attachment.cgi?id=800801&action=diff "Updated per review feedback") [[review]](/page.cgi?id=splinter.html&ignore=&bug=911845&attachment=800801):
-----------------------------------------------------------------
r=me, with the following fix applied.
::: js/src/jit/RangeAnalysis.cpp
@@ +1663,5 @@
> + MInstructionIterator insertIter = iter;
> + while (insertIter->isBeta())
> + insertIter++;
> +
> + block->insertAfter(\*insertIter, guard);
Note that the previous loop will walk until we reach a non-beta node. Such instruction can be control flow instruction which are supposed to mark the end of the instruction list. Also note that a control flow instruction has no range, which explain why the previous code was still safe.
Here, you want to insert the MAssertRange before the insertIter if it has been used to walk any (beta) instructions.
if (\*insertIter == \*iter)
block->insertAfter(…, …);
else
block->insertBefore(…, …);
[Attachment #800801](/attachment.cgi?id=800801&action=edit "Updated per review feedback") -
Flags: review?(nicolas.b.pierron) → review+

|  | [Dan Gohman [:sunfish]](/user_profile?user_id=468136)  Assignee |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=911845#c11)• 11 years ago |
|  | |

(In reply to Nicolas B. Pierron [:nbp] from [comment #9](/show_bug.cgi?id=911845#c9 "RESOLVED FIXED - Beta node checking, found bugs"))
> (In reply to Dan Gohman [:sunfish] from [comment #7](/show_bug.cgi?id=911845#c7 "RESOLVED FIXED - Beta node checking, found bugs"))
> > (In reply to Nicolas B. Pierron [:nbp] from [comment #5](/show_bug.cgi?id=911845#c5 "RESOLVED FIXED - Beta node checking, found bugs"))
> > > Comment on [attachment 798626](/attachment.cgi?id=798626 "range-make-infinite.patch") [[details]](/attachment.cgi?id=798626&action=edit "range-make-infinite.patch") [[diff]](/attachment.cgi?id=798626&action=diff "range-make-infinite.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=911845&attachment=798626)
> > > range-make-infinite.patch
> > >
> > > Review of [attachment 798626](/attachment.cgi?id=798626 "range-make-infinite.patch") [[details]](/attachment.cgi?id=798626&action=edit "range-make-infinite.patch") [[diff]](/attachment.cgi?id=798626&action=diff "range-make-infinite.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=911845&attachment=798626):
> > > -----------------------------------------------------------------
> > >
> > > ::: js/src/jit/RangeAnalysis.cpp
> > > @@ +340,5 @@
> > > >
> > > > Range \*r = new Range(
> > > > newLower, newUpper,
> > > > lhs->decimal\_ && rhs->decimal\_,
> > > > Min(lhs->max\_exponent\_, rhs->max\_exponent\_));
> > >
> > > If this rule is not wrong (it does not feel as being wrong from my point of
> > > view), then one of the input is wrong.
> >
> > I think the real problem here is that there are many places in the Range
> > code where it's unclear whether the code should be overriding the exponent
> > by inferring a value from lower() and upper(), or whether it should be
> > trusting the given exponent.
>
> The exponent is an over approximation, and we should always compute another
> over-approximation based on the exponent.
> We cannot use lower() and upper() to compute the exponent as these functions
> are returning discrete values which are outside the range of the exponent.
>
> The only case where lower() and upper() can be used, is when we know that
> these values are not open on the boundaries of the int32 range.
I think you're getting confused by this code in the same way that I was :-}.
The code quoted above has computed what intends to be the new values for lower\_ and upper\_. When that range is unbounded, those fields will have the value INT32\_MIN and INT32\_MAX, respectively. However, in Range's constructor, the arguments aren't just interpreted as the initialization for lower\_ and upper\_. They are interpreted as an actual bound on the range. So the constructor assumes that the value is actually bounded by [INT32\_MIN,INT32\_MAX], and it overrides the max\_exponent value accordingly. Which is wrong, because it's actually supposed to be unbounded in that case.
This is a clear example of the kind of API subtly that I aimed to address with my patch to [bug 909528](/show_bug.cgi?id=909528 "RESOLVED WORKSFORME - The \"decimal\" characteristic of ranges needs documentation"). I don't think it's quite right yet, but I think something in that direction is needed.
>
> > >
> > > ::: js/src/jit/RangeAnalysis.h
> > > @@ +234,5 @@
> > > >
> > > > inline void makeLowerInfinite() {
> > > > lower\_infinite\_ = true;
> > > > lower\_ = JSVAL\_INT\_MIN;
> > > > + max\_exponent\_ = MaxDoubleExponent;
> > >
> > > Doing so would be terrible, as this will disable the truncate phase.
> >
> > Looking at how makeLowerInfinite() is used, I don't see this. Values which
> > have had makeLowerInfinite() called on their range aren't automatically safe
> > to truncate anyway.
>
> I agree, it can have a fractional part. But even if a value is marked as
> LowerInfinite of the int32 range, it can still have a know and precise
> exponent.
>
> The infinite are only related to the int32 range, and nothing else. They
> are in no way meant to encode a double infinity. The only way to represent
> a double infinity is to use the max\_exponent\_ field.
>
> So, makeLowerInfinite should not manipulate the max\_exponent field except
> resetting it to MaxInt32Exponent if it is lower.
This change is not about fractional values. makeLowerInfinite is called specifically when the value is not bounded by [INT32\_MIN,INT32\_MAX], so MaxInt32Exponent is not appropriate.

|  | [Nicolas B. Pierron [:nbp]](/user_profile?user_id=422187) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=911845#c12)• 11 years ago |
|  | |

(In reply to Dan Gohman [:sunfish] from [comment #11](/show_bug.cgi?id=911845#c11 "RESOLVED FIXED - Beta node checking, found bugs"))
> (In reply to Nicolas B. Pierron [:nbp] from [comment #9](/show_bug.cgi?id=911845#c9 "RESOLVED FIXED - Beta node checking, found bugs"))
> > (In reply to Dan Gohman [:sunfish] from [comment #7](/show_bug.cgi?id=911845#c7 "RESOLVED FIXED - Beta node checking, found bugs"))
> > > (In reply to Nicolas B. Pierron [:nbp] from [comment #5](/show_bug.cgi?id=911845#c5 "RESOLVED FIXED - Beta node checking, found bugs"))
> > > > Comment on [attachment 798626](/attachment.cgi?id=798626 "range-make-infinite.patch") [[details]](/attachment.cgi?id=798626&action=edit "range-make-infinite.patch") [[diff]](/attachment.cgi?id=798626&action=diff "range-make-infinite.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=911845&attachment=798626)
> > > > range-make-infinite.patch
> > > >
> > > > Review of [attachment 798626](/attachment.cgi?id=798626 "range-make-infinite.patch") [[details]](/attachment.cgi?id=798626&action=edit "range-make-infinite.patch") [[diff]](/attachment.cgi?id=798626&action=diff "range-make-infinite.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=911845&attachment=798626):
> > > > -----------------------------------------------------------------
> > > >
> > > > ::: js/src/jit/RangeAnalysis.cpp
> > > > @@ +340,5 @@
> > > > >
> > > > > Range \*r = new Range(
> > > > > newLower, newUpper,
> > > > > lhs->decimal\_ && rhs->decimal\_,
> > > > > Min(lhs->max\_exponent\_, rhs->max\_exponent\_));
> > > >
> > > > If this rule is not wrong (it does not feel as being wrong from my point of
> > > > view), then one of the input is wrong.
> > >
> > > I think the real problem here is that there are many places in the Range
> > > code where it's unclear whether the code should be overriding the exponent
> > > by inferring a value from lower() and upper(), or whether it should be
> > > trusting the given exponent.
> >
> > The exponent is an over approximation, and we should always compute another
> > over-approximation based on the exponent.
> > We cannot use lower() and upper() to compute the exponent as these functions
> > are returning discrete values which are outside the range of the exponent.
> >
> > The only case where lower() and upper() can be used, is when we know that
> > these values are not open on the boundaries of the int32 range.
>
> I think you're getting confused by this code in the same way that I was :-}.
>
> The code quoted above has computed what intends to be the new values for
> lower\_ and upper\_. When that range is unbounded, those fields will have the
> value INT32\_MIN and INT32\_MAX, respectively. However, in Range's
> constructor, the arguments aren't just interpreted as the initialization for
> lower\_ and upper\_. They are interpreted as an actual bound on the range. So
> the constructor assumes that the value is actually bounded by
> [INT32\_MIN,INT32\_MAX], and it overrides the max\_exponent value accordingly.
> Which is wrong, because it's actually supposed to be unbounded in that case.
I think we can solve this problem by changing the computation of newLower & newUpper by adding the infinity flags to them.
int64\_t newLower = Max(lhs->lower\_ - lhs->lower\_infinity\_,
rhs->lower\_ - rhs->lower\_infinity\_);
int64\_t newUpper = Min(lhs->upper\_ + lhs->upper\_infinity\_,
rhs->upper\_ + rhs->upper\_infinity\_);
In which case the infinity flags would be carried over, and the exponent would be computed correctly.

|  | [Nicolas B. Pierron [:nbp]](/user_profile?user_id=422187) |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=911845#c13)• 11 years ago |
|  | |

(In reply to Dan Gohman [:sunfish] from [comment #11](/show_bug.cgi?id=911845#c11 "RESOLVED FIXED - Beta node checking, found bugs"))
> (In reply to Nicolas B. Pierron [:nbp] from [comment #9](/show_bug.cgi?id=911845#c9 "RESOLVED FIXED - Beta node checking, found bugs"))
> > (In reply to Dan Gohman [:sunfish] from [comment #7](/show_bug.cgi?id=911845#c7 "RESOLVED FIXED - Beta node checking, found bugs"))
> > > (In reply to Nicolas B. Pierron [:nbp] from [comment #5](/show_bug.cgi?id=911845#c5 "RESOLVED FIXED - Beta node checking, found bugs"))
> > > >
> > > > ::: js/src/jit/RangeAnalysis.h
> > > > @@ +234,5 @@
> > > > >
> > > > > inline void makeLowerInfinite() {
> > > > > lower\_infinite\_ = true;
> > > > > lower\_ = JSVAL\_INT\_MIN;
> > > > > + max\_exponent\_ = MaxDoubleExponent;
> > > >
> > > > Doing so would be terrible, as this will disable the truncate phase.
> > >
> > > Looking at how makeLowerInfinite() is used, I don't see this. Values which
> > > have had makeLowerInfinite() called on their range aren't automatically safe
> > > to truncate anyway.
> >
> > I agree, it can have a fractional part. But even if a value is marked as
> > LowerInfinite of the int32 range, it can still have a know and precise
> > exponent.
> >
> > The infinite are only related to the int32 range, and nothing else. They
> > are in no way meant to encode a double infinity. The only way to represent
> > a double infinity is to use the max\_exponent\_ field.
> >
> > So, makeLowerInfinite should not manipulate the max\_exponent field except
> > resetting it to MaxInt32Exponent if it is lower.
>
> This change is not about fractional values. makeLowerInfinite is called
> specifically when the value is not bounded by [INT32\_MIN,INT32\_MAX], so
> MaxInt32Exponent is not appropriate.
I agree, this function is called when the range is not bounded Int32 range, but this is not a reason to over-approximate it to MaxDoubleExponent, as such approximation will forbid any truncate optimizations which are relying on values which might be out-side the Int32 range, which are still representable on the mantissa of a double.
So, we should not set the max\_exponent to MaxDoubleExponent in these functions.

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=911845#c14)• 11 years ago |
|  | |

It sounds like there are no known security problems here, so I'm going to mark this audit. Please adjust the rating or comment if it is scarier than that.Keywords: [sec-audit](/buglist.cgi?keywords=sec-audit&resolution=---)

|  | [Dan Gohman [:sunfish]](/user_profile?user_id=468136)  Assignee |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=911845#c15)• 11 years ago |
|  | |

Fixing this properly will be easier once the changes in [bug 915846](/show_bug.cgi?id=915846 "RESOLVED FIXED - Range Analysis API changes") are in.Depends on: [915846](/show_bug.cgi?id=915846 "RESOLVED FIXED - Range Analysis API changes")

|  | [Dan Gohman [:sunfish]](/user_profile?user_id=468136)  Assignee |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=911845#c16)• 11 years ago |
|  | |

The fixes are now just checked into mozilla-central as part of [bug 915846](/show_bug.cgi?id=915846 "RESOLVED FIXED - Range Analysis API changes"). I can backport things if desired, but it sounds like that's not important here.Assignee: general → sunfishStatus: NEW → RESOLVEDClosed: 11 years agoResolution: --- → FIXEDTarget Milestone: --- → mozilla27

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=911845#a3371715_1689)• 11 years ago |

[status-firefox-esr24](/buglist.cgi?f1=cf_status_firefox_esr24&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=wontfix)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=911845#a3371746_1689)• 11 years ago |

[status-firefox27](/buglist.cgi?f1=cf_status_firefox27&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=fixed)

|  | [Tracy Walker [:tracy]](/user_profile?user_id=18566) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=911845#a4305975_18566)• 11 years ago |

Keywords: [regression](/buglist.cgi?keywords=regression&resolution=---),
[sec-audit](/buglist.cgi?keywords=sec-audit&resolution=---)Whiteboard: [qa-]

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=911845#a7932605_132034)• 11 years ago |

Flags: sec-bounty?

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=911845#a9073664_1689)• 11 years ago |

Flags: sec-bounty? → sec-bounty-Keywords: [sec-low](/buglist.cgi?keywords=sec-low&resolution=---)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=911845#a12265782_280903)• 11 years ago |

[status-firefox26](/buglist.cgi?f1=cf_status_firefox26&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox26&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_firefox26&o1=equals&v1=wontfix)Whiteboard: [qa-] → [qa-][adv-main27+]

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=911845#a46763646_1689)• 10 years ago |

Group: core-security

|  | [David Lawrence [:dkl]](/user_profile?user_id=5898) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=911845#a338919262_5898)• 8 months ago |

Keywords: [reporter-external](/buglist.cgi?keywords=reporter-external&resolution=---)
You need to [log in](/show_bug.cgi?id=911845&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Dan Gohman [:sunfish]](/user_profile?user_id=468136)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from bugzilla.mozilla.org_4a7aabcb_20250124_230151.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/950452)
* [XML](/show_bug.cgi?ctype=xml&id=950452)

Closed
[Bug 950452](/show_bug.cgi?id=950452)

Opened 11 years ago
Closed 11 years ago

# Assertion failure: MIR instruction returned value with unexpected type, at jit/IonMacroAssembler.cpp:1219

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

Assertion failure: MIR instruction returned value with unexpected type, at jit/IonMacroAssembler.cpp:1219

## Categories

### (Core :: JavaScript Engine: JIT, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=JavaScript%20Engine%3A%20JIT#JavaScript%20Engine%3A%20JIT)

JavaScript Engine: JIT
▾

Core :: JavaScript Engine: JIT
JavaScript engine's JIT compilers
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine%3A%20JIT&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine%3A%20JIT&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=JavaScript%20Engine%3A%20JIT)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

x86\_64

Linux

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

critical

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla29

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| blocking-b2g | [koi+](/buglist.cgi?f1=cf_blocking_b2g&o1=equals&v1=koi%2B) |
| --- | --- |

| Webcompat Priority | --- |
| --- | --- |
| Webcompat Score | --- |
| Performance Impact | --- |
| a11y-review | --- |
| Accessibility Severity | --- |
| blocking-b2g | koi+ |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox26 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox26&o1=equals&v1=wontfix) |
| firefox27 | [+](/buglist.cgi?f1=cf_tracking_firefox27&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=fixed) |
| firefox28 | [+](/buglist.cgi?f1=cf_tracking_firefox28&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=fixed) |
| firefox29 | [+](/buglist.cgi?f1=cf_tracking_firefox29&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=fixed) |
| firefox-esr24 | --- | [unaffected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=unaffected) |
| b2g18 | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=unaffected) |
| b2g-v1.1hd | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=equals&v1=unaffected) |
| b2g-v1.2 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=fixed) |
| b2g-v1.3 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=fixed) |
| b2g-v1.3T | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=fixed) |
| b2g-v1.4 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=fixed) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox26 |  | wontfix |
| firefox27 | + | fixed |
| firefox28 | + | fixed |
| firefox29 | + | fixed |
| firefox-esr24 |  | unaffected |
| b2g18 |  | unaffected |
| b2g-v1.1hd |  | unaffected |
| b2g-v1.2 |  | fixed |
| b2g-v1.3 |  | fixed |
| b2g-v1.3T |  | fixed |
| b2g-v1.4 |  | fixed |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: decoder, Assigned: bhackett1024)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/764aa0af2fda6f02fb17dc9771bb18d9?d=mm&size=40)  [bhackett1024](/user_profile?user_id=346231)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

![](https://secure.gravatar.com/avatar/55857f92ded07119259dc6c1dd386205?d=mm&size=40)  [general](/user_profile?user_id=4729)

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/b29b83d12aba827b8ff68296e473bec5?d=mm&size=40)  [decoder](/user_profile?user_id=395101)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/4fe52ee1503aecf7b6c976b8eb7c1753?d=mm&size=40)  [willyelm](/user_profile?user_id=714609)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

11 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[902508](/show_bug.cgi?id=902508 "RESOLVED FIXED - IonMonkey: avoid bailouts due to empty type sets at script entry")

Dependency [tree](/showdependencytree.cgi?id=950452&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=950452)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (4 keywords, Whiteboard: [jsbugmon:update][adv-main27+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[assertion](/buglist.cgi?keywords=assertion&resolution=---),
[regression](/buglist.cgi?keywords=regression&resolution=---),
[sec-critical](/buglist.cgi?keywords=sec-critical&resolution=---),
[testcase](/buglist.cgi?keywords=testcase&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[jsbugmon:update][adv-main27+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [RyanVM](/user_profile?user_id=75935) | [in-testsuite](#c23 "11 years ago") | ? |
| --- | --- | --- |
| [RyanVM](/user_profile?user_id=75935) | in-testsuite | ? |
| --- | --- | --- |
|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (2 files)

| [[crash-signature] Machine-readable crash signature](/attachment.cgi?id=8347720)  [11 years ago](#c1)  [Christian Holler (:decoder)](/user_profile?user_id=395101)   228 bytes, text/plain |  | [Details](/attachment.cgi?id=8347720&action=edit) |
| --- | --- | --- |
| [patch](/attachment.cgi?id=8348155)  [11 years ago](#c4)  [Brian Hackett [Laid off!]](/user_profile?user_id=346231)   913 bytes, patch | jandem : [review+](#a179617_375297 "11 years ago")  abillings : [approval-mozilla-aurora+](#c8 "11 years ago")  abillings : [approval-mozilla-beta+](#c8 "11 years ago")  abillings : [sec-approval+](#c8 "11 years ago") | [Details](/attachment.cgi?id=8348155&action=edit) | [Diff](/attachment.cgi?id=8348155&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=950452&attachment=8348155) |

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=950452#c0)• 11 years ago |
|  | |

The following testcase asserts on mozilla-central revision c049cb230d77 (run with --fuzzing-safe --ion-eager):
var ff = new f("foo")
function f(y) {
y = +y;
};

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=950452#c1)• 11 years ago |
|  | |

Attached file
[[crash-signature] Machine-readable crash signature](attachment.cgi?id=8347720)
— [Details](attachment.cgi?id=8347720&action=edit)

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297) |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=950452#c2)• 11 years ago |
|  | |

function f(y) {
y = +y;
}
We add an MMul for the +y. Then in MBinaryArithInstruction::inferFallback, we give this MMul an empty resultTypeSet, because the argument has an empty resultTypeSet.
Then in IonBuilder::jsop\_setarg, we detect this argument coercion pattern, but the MMul still has its empty TypeSet, and the type check fails.
Brian, can you take a look? It looks like this could also be a perf issue (the MMul has unknown type).Flags: needinfo?(bhackett1024)

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=950452#a82482_395101)• 11 years ago |

Whiteboard: [jsbugmon:update,bisect]

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=950452#a88829_395101)• 11 years ago |

Whiteboard: [jsbugmon:update,bisect] → [jsbugmon:update]

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=950452#c3)• 11 years ago |
|  | |

JSBugMon: Bisection requested, result:
autoBisect shows this is probably related to the following changeset:
The first bad revision is:
changeset: <http://hg.mozilla.org/mozilla-central/rev/1b91cf5c8407>
user: Jan de Mooij
date: Sat Dec 14 14:32:35 2013 +0100
summary: [Bug 949475](/show_bug.cgi?id=949475 "RESOLVED FIXED - Add extra debug checks for MIR return values") - Add some debug-only sanity checks. r=bhackett
This iteration took 337.377 seconds to run.

|  | [Brian Hackett [Laid off!]](/user_profile?user_id=346231)  Assignee |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=950452#c4)• 11 years ago |
|  | |

Attached patch

[patch](attachment.cgi?id=8348155&action=diff)
— [Details](attachment.cgi?id=8348155&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=950452&attachment=8348155)

Assignee: general → bhackett1024
[Attachment #8348155](/attachment.cgi?id=8348155&action=edit "patch") -
Flags: review?(jdemooij)Flags: needinfo?(bhackett1024)

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=950452#a179617_375297)• 11 years ago |

[Attachment #8348155](/attachment.cgi?id=8348155&action=edit "patch") -
Flags: review?(jdemooij) → review+

|  | [Brian Hackett [Laid off!]](/user_profile?user_id=346231)  Assignee |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=950452#c5)• 11 years ago |
|  | |

Comment on [attachment 8348155](/attachment.cgi?id=8348155 "patch") [[details]](/attachment.cgi?id=8348155&action=edit "patch") [[diff]](/attachment.cgi?id=8348155&action=diff "patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=950452&attachment=8348155)
patch
[Security approval request comment]
How easily could an exploit be constructed based on the patch?
Not at all.
Do comments in the patch, the check-in comment, or tests included in the patch paint a bulls-eye on the security problem?
No.
Which older supported branches are affected by this flaw?
aurora through release
If not all supported branches, which bug introduced the flaw?
[Bug 902508](/show_bug.cgi?id=902508 "RESOLVED FIXED - IonMonkey: avoid bailouts due to empty type sets at script entry")
Do you have backports for the affected branches? If not, how different, hard to create, and risky will they be?
trivial
How likely is this patch to cause regressions; how much testing does it need?
not at all
[Approval Request Comment]
Bug caused by (feature/regressing bug #): [bug 902508](/show_bug.cgi?id=902508 "RESOLVED FIXED - IonMonkey: avoid bailouts due to empty type sets at script entry")
User impact if declined: potential, difficult to trigger exploit
Testing completed (on m-c, etc.): none
Risk to taking this patch (and alternatives if risky): none
[Attachment #8348155](/attachment.cgi?id=8348155&action=edit "patch") -
Flags: sec-approval?
[Attachment #8348155](/attachment.cgi?id=8348155&action=edit "patch") -
Flags: approval-mozilla-beta?
[Attachment #8348155](/attachment.cgi?id=8348155&action=edit "patch") -
Flags: approval-mozilla-aurora?

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=950452#c6)• 11 years ago |
|  | |

We need to get a security rating on this issue before it can be approved. What are the implications of this as far as exploits, etc?

|  | [Brian Hackett [Laid off!]](/user_profile?user_id=346231)  Assignee |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=950452#c7)• 11 years ago |
|  | |

This should probably be critical, it would require a lot of knowledge about the engine's internals to exploit but could probably be done.Keywords: [sec-critical](/buglist.cgi?keywords=sec-critical&resolution=---)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=950452#c8)• 11 years ago |
|  | |

Comment on [attachment 8348155](/attachment.cgi?id=8348155 "patch") [[details]](/attachment.cgi?id=8348155&action=edit "patch") [[diff]](/attachment.cgi?id=8348155&action=diff "patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=950452&attachment=8348155)
patch
Approve all things!
sec-approval+ granted, along with Aurora and Beta.
[Attachment #8348155](/attachment.cgi?id=8348155&action=edit "patch") -
Flags: sec-approval?
[Attachment #8348155](/attachment.cgi?id=8348155&action=edit "patch") -
Flags: sec-approval+
[Attachment #8348155](/attachment.cgi?id=8348155&action=edit "patch") -
Flags: approval-mozilla-beta?
[Attachment #8348155](/attachment.cgi?id=8348155&action=edit "patch") -
Flags: approval-mozilla-beta+
[Attachment #8348155](/attachment.cgi?id=8348155&action=edit "patch") -
Flags: approval-mozilla-aurora?
[Attachment #8348155](/attachment.cgi?id=8348155&action=edit "patch") -
Flags: approval-mozilla-aurora+

|  | [Brian Hackett [Laid off!]](/user_profile?user_id=346231)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=950452#a385619_346231)• 11 years ago |

Keywords: [checkin-needed](/buglist.cgi?keywords=checkin-needed&resolution=---)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=950452#a386714_1689)• 11 years ago |

Blocks: [902508](/show_bug.cgi?id=902508 "RESOLVED FIXED - IonMonkey: avoid bailouts due to empty type sets at script entry")
[status-b2g18](/buglist.cgi?f1=cf_status_b2g18&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=unaffected)
[status-b2g-v1.1hd](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=equals&v1=unaffected)
[status-b2g-v1.2](/buglist.cgi?f1=cf_status_b2g_1_2&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=affected)
[status-b2g-v1.3](/buglist.cgi?f1=cf_status_b2g_1_3&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=affected)
[status-firefox26](/buglist.cgi?f1=cf_status_firefox26&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox26&o1=equals&v1=affected)
[status-firefox27](/buglist.cgi?f1=cf_status_firefox27&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=affected)
[status-firefox28](/buglist.cgi?f1=cf_status_firefox28&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=affected)
[status-firefox29](/buglist.cgi?f1=cf_status_firefox29&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=affected)
[status-firefox-esr24](/buglist.cgi?f1=cf_status_firefox_esr24&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=unaffected)
[tracking-firefox27](/buglist.cgi?f1=cf_tracking_firefox27&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox27&o1=equals&v1=%2B)
[tracking-firefox28](/buglist.cgi?f1=cf_tracking_firefox28&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox28&o1=equals&v1=%2B)
[tracking-firefox29](/buglist.cgi?f1=cf_tracking_firefox29&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox29&o1=equals&v1=%2B)Keywords: [regression](/buglist.cgi?keywords=regression&resolution=---)

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034) |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=950452#c9)• 11 years ago |
|  | |

<https://hg.mozilla.org/integration/mozilla-inbound/rev/1035869d1819>Keywords: [checkin-needed](/buglist.cgi?keywords=checkin-needed&resolution=---)

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=950452#a388185_132034)• 11 years ago |

Target Milestone: --- → mozilla29

|  | [Wes Kocher (:KWierso) (Not reading bugmail; email directly if needed)](/user_profile?user_id=308534) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=950452#c12)• 11 years ago |
|  | |

(In reply to Gary Kwong [:gkw] [:nth10sd] from [comment #9](/show_bug.cgi?id=950452#c9 "VERIFIED FIXED - Assertion failure: MIR instruction returned value with unexpected type, at jit/IonMacroAssembler.cpp:1219"))
> <https://hg.mozilla.org/integration/mozilla-inbound/rev/1035869d1819>
Backed out in <https://hg.mozilla.org/integration/mozilla-inbound/rev/ab713e6d552d> for apparently introducing a jit-test failure:
<https://tbpl.mozilla.org/php/getParsedLog.php?id=32255377&tree=Mozilla-Inbound>
<https://tbpl.mozilla.org/php/getParsedLog.php?id=32255930&tree=Mozilla-Inbound>

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297) |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=950452#c14)• 11 years ago |
|  | |

Brian, maybe we need to set the MMul's specialization as well.Flags: needinfo?(bhackett1024)

|  | [Brian Hackett [Laid off!]](/user_profile?user_id=346231)  Assignee |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=950452#c15)• 11 years ago |
|  | |

OK, yes (it would be nice if binary arithmetic instructions were more robust here).
<https://hg.mozilla.org/integration/mozilla-inbound/rev/0c2a1f9f76a0>Flags: needinfo?(bhackett1024)

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034) |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=950452#c17)• 11 years ago |
|  | |

setJitCompilerOption('ion.usecount.trigger', 5)
for (var i = 0; i < 99; i++) {
(function g(x) {
x = +x;
})()
}
Testcase generated by jsfunfuzz, run with --ion-parallel-compile=off and use m-c rev c049cb230d77

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=950452#c18)• 11 years ago |
|  | |

(In reply to Gary Kwong [:gkw] [:nth10sd] from [comment #17](/show_bug.cgi?id=950452#c17 "VERIFIED FIXED - Assertion failure: MIR instruction returned value with unexpected type, at jit/IonMacroAssembler.cpp:1219"))
> Testcase generated by jsfunfuzz, run with --ion-parallel-compile=off and use
> m-c rev c049cb230d77
Almost identical test is in [comment 0](/show_bug.cgi?id=950452#c0 "VERIFIED FIXED - Assertion failure: MIR instruction returned value with unexpected type, at jit/IonMacroAssembler.cpp:1219"), for the same revision. Please don't just add duplicate tests to the bugs, it doesn't serve a purpose here.

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034) |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=950452#c19)• 11 years ago |
|  | |

> Almost identical test is in [comment 0](/show_bug.cgi?id=950452#c0 "VERIFIED FIXED - Assertion failure: MIR instruction returned value with unexpected type, at jit/IonMacroAssembler.cpp:1219"), for the same revision. Please don't
> just add duplicate tests to the bugs, it doesn't serve a purpose here.
We clarified our strategy going forward - there was a bunch of confusion by folks around here (including me).

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034) |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=950452#c20)• 11 years ago |
|  | |

(In reply to Brian Hackett (:bhackett) from [comment #15](/show_bug.cgi?id=950452#c15 "VERIFIED FIXED - Assertion failure: MIR instruction returned value with unexpected type, at jit/IonMacroAssembler.cpp:1219"))
> OK, yes (it would be nice if binary arithmetic instructions were more robust
> here).
>
> <https://hg.mozilla.org/integration/mozilla-inbound/rev/0c2a1f9f76a0>
Using TBPL builds, I've verified that the testcase in [comment 17](/show_bug.cgi?id=950452#c17 "VERIFIED FIXED - Assertion failure: MIR instruction returned value with unexpected type, at jit/IonMacroAssembler.cpp:1219") was indeed fixed by this revision.

|  | [Wes Kocher (:KWierso) (Not reading bugmail; email directly if needed)](/user_profile?user_id=308534) |  |
| --- | --- | --- |
| [Comment 21](/show_bug.cgi?id=950452#c21)• 11 years ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/0c2a1f9f76a0>Status: NEW → RESOLVEDClosed: 11 years ago
[status-firefox29](/buglist.cgi?f1=cf_status_firefox29&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=fixed)Resolution: --- → FIXED

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=950452#a488333_395101)• 11 years ago |

Status: RESOLVED → VERIFIED

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Comment 22](/show_bug.cgi?id=950452#c22)• 11 years ago |
|  | |

JSBugMon: This bug has been automatically verified fixed.

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=950452#a538991_280903)• 11 years ago |

[status-firefox26](/buglist.cgi?f1=cf_status_firefox26&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox26&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_firefox26&o1=equals&v1=wontfix)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 23](/show_bug.cgi?id=950452#c23)• 11 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-aurora/rev/db7f78ab4562>
<https://hg.mozilla.org/releases/mozilla-beta/rev/486381f7cf34>blocking-b2g: --- → koi?
[status-b2g-v1.3](/buglist.cgi?f1=cf_status_b2g_1_3&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=fixed)
[status-firefox27](/buglist.cgi?f1=cf_status_firefox27&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=fixed)
[status-firefox28](/buglist.cgi?f1=cf_status_firefox28&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=fixed)Flags: in-testsuite?

|  | [Jason Smith [:jsmith]](/user_profile?user_id=432443) |  |
| --- | --- | --- |
| [Comment 24](/show_bug.cgi?id=950452#c24)• 11 years ago |
|  | |

Sec critical = blocker for 1.2.blocking-b2g: koi? → koi+

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 25](/show_bug.cgi?id=950452#c25)• 11 years ago |
|  | |

Please provide a branch-specific patch for b2g26 uplift.Flags: needinfo?(bhackett1024)Keywords: [branch-patch-needed](/buglist.cgi?keywords=branch-patch-needed&resolution=---)

|  | [Brian Hackett [Laid off!]](/user_profile?user_id=346231)  Assignee |  |
| --- | --- | --- |
| [Comment 26](/show_bug.cgi?id=950452#c26)• 11 years ago |
|  | |

(In reply to Ryan VanderMeulen [:RyanVM UTC-5] from [comment #25](/show_bug.cgi?id=950452#c25 "VERIFIED FIXED - Assertion failure: MIR instruction returned value with unexpected type, at jit/IonMacroAssembler.cpp:1219"))
> Please provide a branch-specific patch for b2g26 uplift.
I don't have a copy of the b2g tree but in IonBuilder.cpp this paragraph:
if (!otherUses) {
types::TypeSet \*argTypes = types::TypeScript::ArgTypes(script(), arg);
// Update both the original and cloned type set.
argTypes->addType(cx, types::Type::UnknownType());
op->resultTypeSet()->addType(cx, types::Type::UnknownType());
}
Should be changed to:
if (!otherUses) {
types::TypeSet \*argTypes = types::TypeScript::ArgTypes(script(), arg);
// Update both the original and cloned type set.
argTypes->addType(cx, types::Type::UnknownType());
op->resultTypeSet()->addType(cx, types::Type::UnknownType());
if (value->isMul()) {
value->setResultType(MIRType\_Double);
value->toMul()->setSpecialization(MIRType\_Double);
} else {
JS\_ASSERT(value->type() == MIRType\_Int32);
}
value->setResultTypeSet(nullptr);
}Flags: needinfo?(bhackett1024)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 27](/show_bug.cgi?id=950452#c27)• 11 years ago |
|  | |

That works, thanks :P
<https://hg.mozilla.org/releases/mozilla-b2g26_v1_2/rev/349cceaaab42>
[status-b2g-v1.2](/buglist.cgi?f1=cf_status_b2g_1_2&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=fixed)Keywords: [branch-patch-needed](/buglist.cgi?keywords=branch-patch-needed&resolution=---)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=950452#a3308547_280903)• 11 years ago |

Whiteboard: [jsbugmon:update] → [jsbugmon:update][adv-main27+]

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=950452#a12469363_75935)• 11 years ago |

[status-b2g-v1.3T](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=fixed)
[status-b2g-v1.4](/buglist.cgi?f1=cf_status_b2g_1_4&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=fixed)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=950452#a37813122_1689)• 10 years ago |

Group: core-security
You need to [log in](/show_bug.cgi?id=950452&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Christian Holler (:decoder)](/user_profile?user_id=395101)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from bugzilla.mozilla.org_e0701bd6_20250124_230153.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/953373)
* [XML](/show_bug.cgi?ctype=xml&id=953373)

Closed
[Bug 953373](/show_bug.cgi?id=953373)

Opened 11 years ago
Closed 11 years ago

# Assertion failure: MIR instruction returned object with unexpected type, at js/src/jit/IonMacroAssembler.cpp:1223, loading Amazon product page

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

Assertion failure: MIR instruction returned object with unexpected type, at js/src/jit/IonMacroAssembler.cpp:1223, loading Amazon product page

## Categories

### (Core :: JavaScript Engine, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=JavaScript%20Engine#JavaScript%20Engine)

JavaScript Engine
▾

Core :: JavaScript Engine
The interpreter engine for the core JavaScript language, independent of the browser's object model. File ONLY core JavaScript language bugs in this category. For bugs involving browser objects such as "window" and "document", use the "DOM" component. For bugs involving calls between JavaScript and C++, use the "XPConnect" component.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=JavaScript%20Engine)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

x86\_64

Linux

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

normal

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla29

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| blocking-b2g | [koi+](/buglist.cgi?f1=cf_blocking_b2g&o1=equals&v1=koi%2B) |
| --- | --- |

| Webcompat Priority | --- |
| --- | --- |
| a11y-review | --- |
| Accessibility Severity | --- |
| Webcompat Score | --- |
| Performance Impact | --- |
| blocking-b2g | koi+ |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox26 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox26&o1=equals&v1=wontfix) |
| firefox27 | [+](/buglist.cgi?f1=cf_tracking_firefox27&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=fixed) |
| firefox28 | [+](/buglist.cgi?f1=cf_tracking_firefox28&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=fixed) |
| firefox29 | [+](/buglist.cgi?f1=cf_tracking_firefox29&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=fixed) |
| firefox-esr24 | --- | [unaffected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=unaffected) |
| b2g18 | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=unaffected) |
| b2g-v1.1hd | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=equals&v1=unaffected) |
| b2g-v1.2 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=fixed) |
| b2g-v1.3 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=fixed) |
| b2g-v1.3T | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=fixed) |
| b2g-v1.4 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=fixed) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox26 |  | wontfix |
| firefox27 | + | fixed |
| firefox28 | + | fixed |
| firefox29 | + | fixed |
| firefox-esr24 |  | unaffected |
| b2g18 |  | unaffected |
| b2g-v1.1hd |  | unaffected |
| b2g-v1.2 |  | fixed |
| b2g-v1.3 |  | fixed |
| b2g-v1.3T |  | fixed |
| b2g-v1.4 |  | fixed |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: dbaron, Assigned: jandem)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/709c5feed942bf99f098bb24aa1cc86f?d=mm&size=40)  [jandem](/user_profile?user_id=375297)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/0a32391d55cfa63276f87eb9819dfbd0?d=mm&size=40)  [dbaron](/user_profile?user_id=3881)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/4fe52ee1503aecf7b6c976b8eb7c1753?d=mm&size=40)  [willyelm](/user_profile?user_id=714609)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

9 people

## References

### ( [URL](http://www.amazon.com/gp/product/0415368197/ref%3Das_li_tf_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=0415368197&linkCode=as2&tag=matthygles-20 "http://www.amazon.com/gp/product/0415368197/ref=as_li_tf_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=0415368197&linkCode=as2&tag=matthygles-20") )

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[956034](/show_bug.cgi?id=956034 "RESOLVED DUPLICATE - Assertion failure: MIR instruction returned object with unexpected type, at c:\Users\mozilla\debug-builds\mozilla-central\js\src\jit/IonMacroAssemble .cpp:1223")

Dependency [tree](/showdependencytree.cgi?id=953373&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=953373)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[Duplicates:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#duplicates)

[956034](/show_bug.cgi?id=956034 "RESOLVED DUPLICATE - Assertion failure: MIR instruction returned object with unexpected type, at c:\Users\mozilla\debug-builds\mozilla-central\js\src\jit/IonMacroAssemble .cpp:1223")

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[amazon.com/gp/product/0415368197/ref=...](http://www.amazon.com/gp/product/0415368197/ref%3Das_li_tf_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=0415368197&linkCode=as2&tag=matthygles-20 "http://www.amazon.com/gp/product/0415368197/ref=as_li_tf_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=0415368197&linkCode=as2&tag=matthygles-20")

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Keywords: assertion, crash, sec-critical, Whiteboard: [qa-][adv-main27+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[assertion](/buglist.cgi?keywords=assertion&resolution=---),
[crash](/buglist.cgi?keywords=crash&resolution=---),
[sec-critical](/buglist.cgi?keywords=sec-critical&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[qa-][adv-main27+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [RyanVM](/user_profile?user_id=75935) | [in-testsuite](#c16 "11 years ago") | ? |
| --- | --- | --- |
| [RyanVM](/user_profile?user_id=75935) | in-testsuite | ? |
| --- | --- | --- |
|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (3 files)

| [Patch](/attachment.cgi?id=8353948)  [11 years ago](#c8)  [Jan de Mooij [:jandem]](/user_profile?user_id=375297)   6.03 KB, patch | bhackett1024 : [review+](#c9 "11 years ago")  abillings : [sec-approval+](#c14 "11 years ago") | [Details](/attachment.cgi?id=8353948&action=edit) | [Diff](/attachment.cgi?id=8353948&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=953373&attachment=8353948) |
| --- | --- | --- |
| [Patch for Aurora](/attachment.cgi?id=8355520)  [11 years ago](#c17)  [Jan de Mooij [:jandem]](/user_profile?user_id=375297)   6.42 KB, patch | jandem : [review+](#c17 "11 years ago")  bajaj : [approval-mozilla-aurora+](#a494669_448925 "11 years ago") | [Details](/attachment.cgi?id=8355520&action=edit) | [Diff](/attachment.cgi?id=8355520&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=953373&attachment=8355520) |
| [Patch for Beta](/attachment.cgi?id=8355521)  [11 years ago](#c18)  [Jan de Mooij [:jandem]](/user_profile?user_id=375297)   6.78 KB, patch | jandem : [review+](#c18 "11 years ago")  bajaj : [approval-mozilla-beta+](#a494686_448925 "11 years ago") | [Details](/attachment.cgi?id=8355521&action=edit) | [Diff](/attachment.cgi?id=8355521&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=953373&attachment=8355521) |

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [David Baron :dbaron: (⌚️UTC-4, no longer working on Mozilla)](/user_profile?user_id=3881)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=953373#c0)• 11 years ago |
|  | |

Loading [http://www.amazon.com/gp/product/0415368197/ref=as\_li\_tf\_tl?ie=UTF8&camp=1789&cr](http://www.amazon.com/gp/product/0415368197/ref%3Das_li_tf_tl?ie=UTF8&camp=1789&cr)
eative=9325&creativeASIN=0415368197&linkCode=as2&tag=matthygles-20 reliably yields a crash:
Assertion failure: MIR instruction returned object with unexpected type, at js/src/jit/IonMacroAssembler.cpp:1223
I can't get gdb to give me a useful stack, nor does this assertion trigger the usual handler that prints a stack trace (which is odd).
I'm using a local debug build built with my local changes on top of <https://hg.mozilla.org/mozilla-central/rev/451f47a70238>

|  | [David Baron :dbaron: (⌚️UTC-4, no longer working on Mozilla)](/user_profile?user_id=3881)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=953373#a1076_3881)• 11 years ago |

URL: [http://www.amazon.com/gp/product/0415...](http://www.amazon.com/gp/product/0415368197/ref%3Das_li_tf_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=0415368197&linkCode=as2&tag=matthygles-20)

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209) |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=953373#c2)• 11 years ago |
|  | |

There's no stack because this is happening as a call directly from jitcode. It's emitted by the masm.assumeUnreachable() in CodeGenerator::emitObjectOrStringResultChecks.
If I replace that string by mir->opName(), then I get "RegExp" as the assertion text, so presumably this is a MRegExp.Flags: needinfo?(jdemooij)

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209) |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=953373#c3)• 11 years ago |
|  | |

How would I map an MIR op back to the filename+lineno?

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297)  Assignee |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=953373#c4)• 11 years ago |
|  | |

Let's hide this bug, at least until we know what's going on.Group: core-security

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297)  Assignee |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=953373#c5)• 11 years ago |
|  | |

We have a function like this:
isFunction : function(fn) {
return !!fn && typeof fn!="string" && !fn.nodeName && fn.constructor!=Array && /^[\s[]?function/.test(fn+"");
}
The RegExpObject stored in the JSScript has TypeObject T1. IonMonkey assumes MRegExp/CloneRegExpObject will return an object with the same TypeObject, but it actually has a different TypeObject, hence the failure. T2. T1.clasp\_ == T2.clasp\_ and T1.proto\_ == T2.proto\_ though.
I added the following assert to CloneRegExpObject and it passes jit-tests but fails when I load the website:
JS\_ASSERT(res->type() == obj\_->type());
With parallel parsing disabled, it also seems to work fine, so it looks like we can have multiple TypeObjects for a single clasp + proto with parallel parsing. Brian, does this seem reasonable? Can we just use NewObjectWithType instead of NewObjectWithGivenProto in RegExpObjectBuilder::getOrCreateClone?

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297)  Assignee |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=953373#c6)• 11 years ago |
|  | |

Forgot to set needinfo.Flags: needinfo?(bhackett1024)

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297)  Assignee |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=953373#c7)• 11 years ago |
|  | |

Shell testcase:
offThreadCompileScript('var s = "abc"; for (var i=0; i<2000; i++) { res = /a\*c/.test(s) }; res;');
assertEq(runOffThreadScript(), true);

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297)  Assignee |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=953373#c8)• 11 years ago |
|  | |

Attached patch

[Patch](attachment.cgi?id=8353948&action=diff)
— [Details](attachment.cgi?id=8353948&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=953373&attachment=8353948)

NewObjectWithType seems to work.
(I also noticed that passing the RegExp proto to CloneRegExpObject is unnecessary; will file a followup bug to clean this up.)Assignee: nobody → jdemooijStatus: NEW → ASSIGNED
[Attachment #8353948](/attachment.cgi?id=8353948&action=edit "Patch") -
Flags: review?(bhackett1024)Flags: needinfo?(jdemooij)

|  | [Brian Hackett [Laid off!]](/user_profile?user_id=346231) |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=953373#c9)• 11 years ago |
|  | |

Comment on [attachment 8353948](/attachment.cgi?id=8353948 "Patch") [[details]](/attachment.cgi?id=8353948&action=edit "Patch") [[diff]](/attachment.cgi?id=8353948&action=diff "Patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=953373&attachment=8353948)
Patch
Review of [attachment 8353948](/attachment.cgi?id=8353948 "Patch") [[details]](/attachment.cgi?id=8353948&action=edit "Patch") [[diff]](/attachment.cgi?id=8353948&action=diff "Patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=953373&attachment=8353948):
-----------------------------------------------------------------
Yeah, with parallel parsing there is initially a different global and set of prototype objects, which would mean a different type object for the regexps. When finishing the parse the off thread regexp type object's proto is repointed to the target compartment's regexp proto.
[Attachment #8353948](/attachment.cgi?id=8353948&action=edit "Patch") -
Flags: review?(bhackett1024) → review+

|  | [Brian Hackett [Laid off!]](/user_profile?user_id=346231) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=953373#a145047_346231)• 11 years ago |

Flags: needinfo?(bhackett1024)

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209) |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=953373#c10)• 11 years ago |
|  | |

Jan, how did you find the relevant bit of script?

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297)  Assignee |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=953373#c11)• 11 years ago |
|  | |

(In reply to Vacation Dec 19 to Jan 1 from [comment #10](/show_bug.cgi?id=953373#c10 "RESOLVED FIXED - Assertion failure: MIR instruction returned object with unexpected type, at js/src/jit/IonMacroAssembler.cpp:1223, loading Amazon product page"))
> Jan, how did you find the relevant bit of script?
I added some code like this (untested, but you should get the idea):
if (mir->isRegExp()) {
static unsigned count = 0;
JSScript \*script = mir->block()->info().script();
printf("%u - %s:%u\n", count, script->filename(), script->lineno());
masm.breakpoint();
masm.move32(Imm32(count), temp);
count++;
}
Then when you hit the breakpoint, you disassemble the code that follows it to find the "count" value. Then you can use the stdout output to map this value back to the script filename/lineno.

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297)  Assignee |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=953373#c12)• 11 years ago |
|  | |

This is probably sec-critical. We could optimize a property access based on the TypeObject we expect, then get a RegExpObject with a different TypeObject and different property types.
[status-firefox26](/buglist.cgi?f1=cf_status_firefox26&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox26&o1=equals&v1=affected)
[status-firefox27](/buglist.cgi?f1=cf_status_firefox27&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=affected)
[status-firefox28](/buglist.cgi?f1=cf_status_firefox28&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=affected)
[status-firefox29](/buglist.cgi?f1=cf_status_firefox29&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=affected)
[status-firefox-esr24](/buglist.cgi?f1=cf_status_firefox_esr24&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=unaffected)
[tracking-firefox27](/buglist.cgi?f1=cf_tracking_firefox27&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox27&o1=equals&v1=%3F)
[tracking-firefox28](/buglist.cgi?f1=cf_tracking_firefox28&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox28&o1=equals&v1=%3F)
[tracking-firefox29](/buglist.cgi?f1=cf_tracking_firefox29&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox29&o1=equals&v1=%3F)Keywords: [sec-critical](/buglist.cgi?keywords=sec-critical&resolution=---)

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297)  Assignee |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=953373#c13)• 11 years ago |
|  | |

Comment on [attachment 8353948](/attachment.cgi?id=8353948 "Patch") [[details]](/attachment.cgi?id=8353948&action=edit "Patch") [[diff]](/attachment.cgi?id=8353948&action=diff "Patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=953373&attachment=8353948)
Patch
[Security approval request comment]
> How easily could an exploit be constructed based on the patch?
Not easily; it requires off-thread parsing and that's not clear from the patch. You'd have to be pretty familiar with the engine to realize what's going on.
> Do comments in the patch, the check-in comment, or tests included in the patch paint a bulls-eye on the security problem?
No.
> Which older supported branches are affected by this flaw?
Firefox 26+ (since it requires parallel parsing, [bug 906371](/show_bug.cgi?id=906371 "RESOLVED FIXED - Use off thread JS parsing when loading <script async> scripts from HTML documents")).
> If not all supported branches, which bug introduced the flaw?
It's a problem since [bug 906371](/show_bug.cgi?id=906371 "RESOLVED FIXED - Use off thread JS parsing when loading <script async> scripts from HTML documents").
> Do you have backports for the affected branches? If not, how different, hard to create, and risky will they be?
Should be easy.
> How likely is this patch to cause regressions; how much testing does it need?
Unlikely.
[Attachment #8353948](/attachment.cgi?id=8353948&action=edit "Patch") -
Flags: sec-approval?

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=953373#a266722_280903)• 11 years ago |

[status-b2g-v1.2](/buglist.cgi?f1=cf_status_b2g_1_2&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=affected)
[status-b2g-v1.3](/buglist.cgi?f1=cf_status_b2g_1_3&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=affected)
[status-firefox26](/buglist.cgi?f1=cf_status_firefox26&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox26&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_firefox26&o1=equals&v1=wontfix)
[tracking-firefox27](/buglist.cgi?f1=cf_tracking_firefox27&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox27&o1=equals&v1=%3F) → [+](/buglist.cgi?f1=cf_tracking_firefox27&o1=equals&v1=%2B)
[tracking-firefox28](/buglist.cgi?f1=cf_tracking_firefox28&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox28&o1=equals&v1=%3F) → [+](/buglist.cgi?f1=cf_tracking_firefox28&o1=equals&v1=%2B)
[tracking-firefox29](/buglist.cgi?f1=cf_tracking_firefox29&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox29&o1=equals&v1=%3F) → [+](/buglist.cgi?f1=cf_tracking_firefox29&o1=equals&v1=%2B)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=953373#c14)• 11 years ago |
|  | |

Comment on [attachment 8353948](/attachment.cgi?id=8353948 "Patch") [[details]](/attachment.cgi?id=8353948&action=edit "Patch") [[diff]](/attachment.cgi?id=8353948&action=diff "Patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=953373&attachment=8353948)
Patch
sec-approval+ for trunk. We should get Aurora and Beta branches made and nominated too.
[Attachment #8353948](/attachment.cgi?id=8353948&action=edit "Patch") -
Flags: sec-approval? → sec-approval+

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297)  Assignee |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=953373#c15)• 11 years ago |
|  | |

<https://hg.mozilla.org/integration/mozilla-inbound/rev/0764495bc9b8>
Green Linux64 jit-tests/jstests: <https://tbpl.mozilla.org/?tree=Try&rev=c58a558bbdea>
I'll see if this applies to Aurora/Beta and if not post patches for them.Flags: needinfo?(jdemooij)

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=953373#a417067_20209)• 11 years ago |

Blocks: [956034](/show_bug.cgi?id=956034 "RESOLVED DUPLICATE - Assertion failure: MIR instruction returned object with unexpected type, at c:\Users\mozilla\debug-builds\mozilla-central\js\src\jit/IonMacroAssemble .cpp:1223")

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=953373#c16)• 11 years ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/0764495bc9b8>Status: ASSIGNED → RESOLVEDClosed: 11 years ago
[status-b2g18](/buglist.cgi?f1=cf_status_b2g18&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=unaffected)
[status-b2g-v1.1hd](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=equals&v1=unaffected)
[status-firefox29](/buglist.cgi?f1=cf_status_firefox29&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=fixed)Flags: in-testsuite?Resolution: --- → FIXEDTarget Milestone: --- → mozilla29

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297)  Assignee |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=953373#c17)• 11 years ago |
|  | |

Attached patch

[Patch for Aurora](attachment.cgi?id=8355520&action=diff)
— [Details](attachment.cgi?id=8355520&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=953373&attachment=8355520)

[Approval Request Comment]
Bug caused by (feature/regressing bug #): [Bug 906371](/show_bug.cgi?id=906371 "RESOLVED FIXED - Use off thread JS parsing when loading <script async> scripts from HTML documents")
User impact if declined: Security bugs, crashes.
Testing completed (on m-c, etc.): On m-c since yesterday.
Risk to taking this patch (and alternatives if risky): Low risk.
String or IDL/UUID changes made by this patch: None.
[Attachment #8355520](/attachment.cgi?id=8355520&action=edit "Patch for Aurora") -
Flags: review+
[Attachment #8355520](/attachment.cgi?id=8355520&action=edit "Patch for Aurora") -
Flags: approval-mozilla-aurora?Flags: needinfo?(jdemooij)

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297)  Assignee |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=953373#c18)• 11 years ago |
|  | |

Attached patch

[Patch for Beta](attachment.cgi?id=8355521&action=diff)
— [Details](attachment.cgi?id=8355521&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=953373&attachment=8355521)

See [comment 17](/show_bug.cgi?id=953373#c17 "RESOLVED FIXED - Assertion failure: MIR instruction returned object with unexpected type, at js/src/jit/IonMacroAssembler.cpp:1223, loading Amazon product page") for the approval request comment.
[Attachment #8355521](/attachment.cgi?id=8355521&action=edit "Patch for Beta") -
Flags: review+

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=953373#a484742_375297)• 11 years ago |

[Attachment #8355521](/attachment.cgi?id=8355521&action=edit "Patch for Beta") -
Flags: approval-mozilla-beta?

|  | [bhavana bajaj [:bajaj]](/user_profile?user_id=448925) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=953373#a494669_448925)• 11 years ago |

[Attachment #8355520](/attachment.cgi?id=8355520&action=edit "Patch for Aurora") -
Flags: approval-mozilla-aurora? → approval-mozilla-aurora+

|  | [bhavana bajaj [:bajaj]](/user_profile?user_id=448925) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=953373#a494686_448925)• 11 years ago |

[Attachment #8355521](/attachment.cgi?id=8355521&action=edit "Patch for Beta") -
Flags: approval-mozilla-beta? → approval-mozilla-beta+

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=953373#a495144_75935)• 11 years ago |

blocking-b2g: --- → koi?

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=953373#c19)• 11 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-aurora/rev/b38b8e812aa7>
<https://hg.mozilla.org/releases/mozilla-beta/rev/2debd43d9b9e>
<https://hg.mozilla.org/releases/mozilla-b2g26_v1_2/rev/a7176f1aca55>
[status-b2g-v1.2](/buglist.cgi?f1=cf_status_b2g_1_2&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=fixed)
[status-b2g-v1.3](/buglist.cgi?f1=cf_status_b2g_1_3&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=fixed)
[status-firefox27](/buglist.cgi?f1=cf_status_firefox27&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=fixed)
[status-firefox28](/buglist.cgi?f1=cf_status_firefox28&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=fixed)

|  | [Jason Smith [:jsmith]](/user_profile?user_id=432443) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=953373#a512829_432443)• 11 years ago |

blocking-b2g: koi? → koi+

|  | [Matt Wobensmith [:mwobensmith][:matt:]](/user_profile?user_id=452604) |  |
| --- | --- | --- |
| [Comment 21](/show_bug.cgi?id=953373#c21)• 11 years ago |
|  | |

I'm not able to see a crash with affected builds around the date of reporting. I imagine also that the URL we use to cause the crash could have easily changed.
Unless we get a static test case or more info, I'm going to assume that QA can't do much to verify. Please update the bug if that assumption is incorrect. Thanks.Whiteboard: [qa-]

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=953373#a2150595_280903)• 11 years ago |

Whiteboard: [qa-] → [qa-][adv-main27+]

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=953373#a11310994_75935)• 11 years ago |

[status-b2g-v1.3T](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=fixed)
[status-b2g-v1.4](/buglist.cgi?f1=cf_status_b2g_1_4&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=fixed)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=953373#a36654783_1689)• 10 years ago |

Group: core-security
You need to [log in](/show_bug.cgi?id=953373&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Jan de Mooij [:jandem]](/user_profile?user_id=375297)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from lists.opensuse.org_6c09ab9c_20250124_230053.html ===


[![openSUSE](https://static.opensuse.org/favicon.svg)
Mailing Lists](/archives/ "openSUSE Mailing Lists")

[Sign In](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/TK44CPVGBZIC55FRAWMGNBFKQMBELTV3/)
[Sign Up](/accounts/signup/?next=/archives/list/security-announce%40lists.opensuse.org/message/TK44CPVGBZIC55FRAWMGNBFKQMBELTV3/)

[Manage this list](/manage/lists/security-announce.lists.opensuse.org/)
[Sign In](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/TK44CPVGBZIC55FRAWMGNBFKQMBELTV3/)
[Sign Up](/accounts/signup/?next=/archives/list/security-announce%40lists.opensuse.org/message/TK44CPVGBZIC55FRAWMGNBFKQMBELTV3/)

×
#### Keyboard Shortcuts

### Thread View

* `j`: Next unread message
* `k`: Previous unread message
* `j a`: Jump to all threads* `j l`: Jump to MailingList overview

[thread](/archives/list/security-announce%40lists.opensuse.org/thread/TK44CPVGBZIC55FRAWMGNBFKQMBELTV3/#TK44CPVGBZIC55FRAWMGNBFKQMBELTV3)

# [security-announce] openSUSE-SU-2014:0212-1: important: Mozilla Firefox 27 release

![](https://seccdn.libravatar.org/avatar/099a17325bdf082b643d1a6bbacde279.jpg?s=120&d=mm&r=g)
## [opensuse-security＠opensuse.org](/archives/users/1b72def497ef4503896cd7a5fe9fb8e0/ "See the profile for opensuse-security＠opensuse.org")

8 Feb
2014

8 Feb
'14

08:04

openSUSE Security Update: Mozilla Firefox 27 release
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
Announcement ID: openSUSE-SU-2014:0212-1
Rating: important
References:
Affected Products:
openSUSE 13.1
openSUSE 12.3
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
An update that contains security fixes can now be installed.
Description:
Mozilla Firefox was updated to version 27. Mozilla
Seamonkey was updated to 2.24, fixing similar issues as
Firefox 27. Mozilla Thunderbird was updated to 24.3.0,
fixing similar issues as Firefox 27.
The Firefox 27 release brings TLS 1.2 support as a major
security feature.
It also fixes following security issues:
\* MFSA 2014-01/CVE-2014-1477/CVE-2014-1478 Miscellaneous
memory safety hazards (rv:27.0 / rv:24.3)
\* MFSA 2014-02/CVE-2014-1479 (bmo#911864) Clone protected
content with XBL scopes
\* MFSA 2014-03/CVE-2014-1480 (bmo#916726) UI selection
timeout missing on download prompts
\* MFSA 2014-04/CVE-2014-1482 (bmo#943803) Incorrect use
of discarded images by RasterImage
\* MFSA 2014-05/CVE-2014-1483 (bmo#950427) Information
disclosure with \*FromPoint on iframes
\* MFSA 2014-06/CVE-2014-1484 (bmo#953993) Profile path
leaks to Android system log
\* MFSA 2014-07/CVE-2014-1485 (bmo#910139) XSLT
stylesheets treated as styles in Content Security Policy
\* MFSA 2014-08/CVE-2014-1486 (bmo#942164) Use-after-free
with imgRequestProxy and image proccessing
\* MFSA 2014-09/CVE-2014-1487 (bmo#947592) Cross-origin
information leak through web workers
\* MFSA 2014-10/CVE-2014-1489 (bmo#959531) Firefox default
start page UI content invokable by script
\* MFSA 2014-11/CVE-2014-1488 (bmo#950604) Crash when
using web workers with asm.js
\* MFSA 2014-12/CVE-2014-1490/CVE-2014-1491 (bmo#934545,
bmo#930874, bmo#930857) NSS ticket handling issues
\* MFSA 2014-13/CVE-2014-1481(bmo#936056) Inconsistent
JavaScript handling of access to Window objects
Mozilla NSS was updated to 3.15.4:
\* required for Firefox 27
\* regular CA root store update (1.96)
\* Reordered the cipher suites offered in SSL/TLS client
hello messages to match modern best practices.
\* Improved SSL/TLS false start. In addition to enabling
the SSL\_ENABLE\_FALSE\_START option, an application must
now register a callback using the
SSL\_SetCanFalseStartCallback function.
\* When false start is enabled, libssl will sometimes
return unencrypted, unauthenticated data from PR\_Recv
(CVE-2013-1740, bmo#919877)
\* MFSA 2014-12/CVE-2014-1490/CVE-2014-1491 NSS ticket
handling issues New functionality
\* Implemented OCSP querying using the HTTP GET method,
which is the new default, and will fall back to the
HTTP POST method.
\* Implemented OCSP server functionality for testing
purposes (httpserv utility).
\* Support SHA-1 signatures with TLS 1.2 client
authentication.
\* Added the --empty-password command-line option to
certutil, to be used with -N: use an empty password
when creating a new database.
\* Added the -w command-line option to pp: don't wrap long
output lines.
Patch Instructions:
To install this openSUSE Security Update use YaST online\_update.
Alternatively you can run the command listed for your product:
- openSUSE 13.1:
zypper in -t patch openSUSE-2014-119
- openSUSE 12.3:
zypper in -t patch openSUSE-2014-119
To bring your system up-to-date, use "zypper patch".
Package List:
- openSUSE 13.1 (i586 x86\_64):
MozillaFirefox-27.0-8.1
MozillaFirefox-branding-upstream-27.0-8.1
MozillaFirefox-buildsymbols-27.0-8.1
MozillaFirefox-debuginfo-27.0-8.1
MozillaFirefox-debugsource-27.0-8.1
MozillaFirefox-devel-27.0-8.1
MozillaFirefox-translations-common-27.0-8.1
MozillaFirefox-translations-other-27.0-8.1
MozillaThunderbird-24.3.0-70.11.1
MozillaThunderbird-buildsymbols-24.3.0-70.11.1
MozillaThunderbird-debuginfo-24.3.0-70.11.1
MozillaThunderbird-debugsource-24.3.0-70.11.1
MozillaThunderbird-devel-24.3.0-70.11.1
MozillaThunderbird-translations-common-24.3.0-70.11.1
MozillaThunderbird-translations-other-24.3.0-70.11.1
enigmail-1.6.0+24.3.0-70.11.1
enigmail-debuginfo-1.6.0+24.3.0-70.11.1
libfreebl3-3.15.4-12.1
libfreebl3-debuginfo-3.15.4-12.1
libsoftokn3-3.15.4-12.1
libsoftokn3-debuginfo-3.15.4-12.1
mozilla-nss-3.15.4-12.1
mozilla-nss-certs-3.15.4-12.1
mozilla-nss-certs-debuginfo-3.15.4-12.1
mozilla-nss-debuginfo-3.15.4-12.1
mozilla-nss-debugsource-3.15.4-12.1
mozilla-nss-devel-3.15.4-12.1
mozilla-nss-sysinit-3.15.4-12.1
mozilla-nss-sysinit-debuginfo-3.15.4-12.1
mozilla-nss-tools-3.15.4-12.1
mozilla-nss-tools-debuginfo-3.15.4-12.1
seamonkey-2.24-8.1
seamonkey-debuginfo-2.24-8.1
seamonkey-debugsource-2.24-8.1
seamonkey-dom-inspector-2.24-8.1
seamonkey-irc-2.24-8.1
seamonkey-translations-common-2.24-8.1
seamonkey-translations-other-2.24-8.1
seamonkey-venkman-2.24-8.1
- openSUSE 13.1 (x86\_64):
libfreebl3-32bit-3.15.4-12.1
libfreebl3-debuginfo-32bit-3.15.4-12.1
libsoftokn3-32bit-3.15.4-12.1
libsoftokn3-debuginfo-32bit-3.15.4-12.1
mozilla-nss-32bit-3.15.4-12.1
mozilla-nss-certs-32bit-3.15.4-12.1
mozilla-nss-certs-debuginfo-32bit-3.15.4-12.1
mozilla-nss-debuginfo-32bit-3.15.4-12.1
mozilla-nss-sysinit-32bit-3.15.4-12.1
mozilla-nss-sysinit-debuginfo-32bit-3.15.4-12.1
- openSUSE 12.3 (i586 x86\_64):
MozillaFirefox-27.0-1.47.2
MozillaFirefox-branding-upstream-27.0-1.47.2
MozillaFirefox-buildsymbols-27.0-1.47.2
MozillaFirefox-debuginfo-27.0-1.47.2
MozillaFirefox-debugsource-27.0-1.47.2
MozillaFirefox-devel-27.0-1.47.2
MozillaFirefox-translations-common-27.0-1.47.2
MozillaFirefox-translations-other-27.0-1.47.2
MozillaThunderbird-24.3.0-61.39.2
MozillaThunderbird-buildsymbols-24.3.0-61.39.2
MozillaThunderbird-debuginfo-24.3.0-61.39.2
MozillaThunderbird-debugsource-24.3.0-61.39.2
MozillaThunderbird-devel-24.3.0-61.39.2
MozillaThunderbird-translations-common-24.3.0-61.39.2
MozillaThunderbird-translations-other-24.3.0-61.39.2
enigmail-1.6.0+24.3.0-61.39.2
enigmail-debuginfo-1.6.0+24.3.0-61.39.2
libfreebl3-3.15.4-1.28.1
libfreebl3-debuginfo-3.15.4-1.28.1
libsoftokn3-3.15.4-1.28.1
libsoftokn3-debuginfo-3.15.4-1.28.1
mozilla-nss-3.15.4-1.28.1
mozilla-nss-certs-3.15.4-1.28.1
mozilla-nss-certs-debuginfo-3.15.4-1.28.1
mozilla-nss-debuginfo-3.15.4-1.28.1
mozilla-nss-debugsource-3.15.4-1.28.1
mozilla-nss-devel-3.15.4-1.28.1
mozilla-nss-sysinit-3.15.4-1.28.1
mozilla-nss-sysinit-debuginfo-3.15.4-1.28.1
mozilla-nss-tools-3.15.4-1.28.1
mozilla-nss-tools-debuginfo-3.15.4-1.28.1
seamonkey-2.24-1.33.2
seamonkey-debuginfo-2.24-1.33.2
seamonkey-debugsource-2.24-1.33.2
seamonkey-dom-inspector-2.24-1.33.2
seamonkey-irc-2.24-1.33.2
seamonkey-translations-common-2.24-1.33.2
seamonkey-translations-other-2.24-1.33.2
seamonkey-venkman-2.24-1.33.2
- openSUSE 12.3 (x86\_64):
libfreebl3-32bit-3.15.4-1.28.1
libfreebl3-debuginfo-32bit-3.15.4-1.28.1
libsoftokn3-32bit-3.15.4-1.28.1
libsoftokn3-debuginfo-32bit-3.15.4-1.28.1
mozilla-nss-32bit-3.15.4-1.28.1
mozilla-nss-certs-32bit-3.15.4-1.28.1
mozilla-nss-certs-debuginfo-32bit-3.15.4-1.28.1
mozilla-nss-debuginfo-32bit-3.15.4-1.28.1
mozilla-nss-sysinit-32bit-3.15.4-1.28.1
mozilla-nss-sysinit-debuginfo-32bit-3.15.4-1.28.1
References:
--
To unsubscribe, e-mail: opensuse-security-announce+unsubscribe@opensuse.org
For additional commands, e-mail: opensuse-security-announce+help@opensuse.org

[0](#like "You must be logged-in to vote.")
[0](#dislike "You must be logged-in to vote.")

Reply

[Sign in to reply online](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/TK44CPVGBZIC55FRAWMGNBFKQMBELTV3/)
Use email software

[Back to the thread](/archives/list/security-announce%40lists.opensuse.org/thread/TK44CPVGBZIC55FRAWMGNBFKQMBELTV3/#TK44CPVGBZIC55FRAWMGNBFKQMBELTV3)

[Back to the list](/archives/list/security-announce%40lists.opensuse.org/)

![HyperKitty](/static/hyperkitty/img/logo.png)
Powered by [HyperKitty](http://hyperkitty.readthedocs.org) version 1.3.12.



=== Content from security.gentoo.org_d439654f_20250124_230154.html ===

[![Gentoo](https://assets.gentoo.org/tyrian/v2/site-logo.png)](/ "Back to the homepage")
Security

[**Get Gentoo!**](https://get.gentoo.org/)
gentoo.org sites
[gentoo.org](https://www.gentoo.org/ "Main Gentoo website")
[Wiki](https://wiki.gentoo.org/ "Find and contribute documentation")
[Bugs](https://bugs.gentoo.org/ "Report issues and find common issues")
[Forums](https://forums.gentoo.org/ "Discuss with the community")
[Packages](https://packages.gentoo.org/ "Find software for your Gentoo")

[Planet](https://planet.gentoo.org/ "Find out what's going on in the developer community")
[Archives](https://archives.gentoo.org/ "Read up on past discussions")
[Sources](https://sources.gentoo.org/ "Browse our source code")

[Infra Status](https://infra-status.gentoo.org/ "Get updates on the services provided by Gentoo")

* [Home](/)
* [Stay informed](/subscribe)
* [Advisories](/glsa)

# Mozilla Products: Multiple vulnerabilities — GLSA **201504-01**

Multiple vulnerabilities have been found in Mozilla Firefox,
Thunderbird, and SeaMonkey, the worst of which may allow user-assisted
execution of arbitrary code.

### Affected packages

| Package | **www-client/firefox** on all architectures |
| --- | --- |
| Affected versions | < **31.5.3** |
| Unaffected versions | >= **31.5.3** |

| Package | **www-client/firefox-bin** on all architectures |
| --- | --- |
| Affected versions | < **31.5.3** |
| Unaffected versions | >= **31.5.3** |

| Package | **mail-client/thunderbird** on all architectures |
| --- | --- |
| Affected versions | < **31.5.0** |
| Unaffected versions | >= **31.5.0** |

| Package | **mail-client/thunderbird-bin** on all architectures |
| --- | --- |
| Affected versions | < **31.5.0** |
| Unaffected versions | >= **31.5.0** |

| Package | **www-client/seamonkey** on all architectures |
| --- | --- |
| Affected versions | < **2.33.1** |
| Unaffected versions | >= **2.33.1** |

| Package | **www-client/seamonkey-bin** on all architectures |
| --- | --- |
| Affected versions | < **2.33.1** |
| Unaffected versions | >= **2.33.1** |

| Package | **dev-libs/nspr** on all architectures |
| --- | --- |
| Affected versions | < **4.10.6** |
| Unaffected versions | >= **4.10.6** |

### Background

Mozilla Firefox is an open-source web browser and Mozilla Thunderbird an
open-source email client, both from the Mozilla Project. The SeaMonkey
project is a community effort to deliver production-quality releases of
code derived from the application formerly known as the ‘Mozilla
Application Suite’.

### Description

Multiple vulnerabilities have been discovered in Firefox, Thunderbird,
and SeaMonkey. Please review the CVE identifiers referenced below for
details.

### Impact

A remote attacker could entice a user to view a specially crafted web
page or email, possibly resulting in execution of arbitrary code or a
Denial of Service condition. Furthermore, a remote attacker may be able
to perform Man-in-the-Middle attacks, obtain sensitive information, spoof
the address bar, conduct clickjacking attacks, bypass security
restrictions and protection mechanisms, or have other unspecified
impact.

### Workaround

There are no known workarounds at this time.

### Resolution

All firefox users should upgrade to the latest version:

```
 # emerge --sync
 # emerge --ask --oneshot --verbose ">=www-client/firefox-31.5.3"

```

All firefox-bin users should upgrade to the latest version:

```
 # emerge --sync
 # emerge --ask --oneshot --verbose ">=www-client/firefox-bin-31.5.3"

```

All thunderbird users should upgrade to the latest version:

```
 # emerge --sync
 # emerge --ask --oneshot --verbose ">=mail-client/thunderbird-31.5.0"

```

All thunderbird-bin users should upgrade to the latest version:

```
 # emerge --sync
 # emerge --ask --oneshot --verbose
 ">=mail-client/thunderbird-bin-31.5.0"

```

All seamonkey users should upgrade to the latest version:

```
 # emerge --sync
 # emerge --ask --oneshot --verbose ">=www-client/seamonkey-2.33.1"

```

All seamonkey-bin users should upgrade to the latest version:

```
 # emerge --sync
 # emerge --ask --oneshot --verbose ">=www-client/seamonkey-bin-2.33.1"

```

All nspr users should upgrade to the latest version:

```
 # emerge --sync
 # emerge --ask --oneshot --verbose ">=dev-libs/nspr-4.10.6"

```
### References

* [CVE-2013-1741](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-1741)
* [CVE-2013-2566](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-2566)
* [CVE-2013-5590](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5590)
* [CVE-2013-5591](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5591)
* [CVE-2013-5592](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5592)
* [CVE-2013-5593](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5593)
* [CVE-2013-5595](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5595)
* [CVE-2013-5596](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5596)
* [CVE-2013-5597](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5597)
* [CVE-2013-5598](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5598)
* [CVE-2013-5599](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5599)
* [CVE-2013-5600](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5600)
* [CVE-2013-5601](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5601)
* [CVE-2013-5602](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5602)
* [CVE-2013-5603](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5603)
* [CVE-2013-5604](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5604)
* [CVE-2013-5605](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5605)
* [CVE-2013-5606](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5606)
* [CVE-2013-5607](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5607)
* [CVE-2013-5609](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5609)
* [CVE-2013-5610](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5610)
* [CVE-2013-5612](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5612)
* [CVE-2013-5613](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5613)
* [CVE-2013-5614](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5614)
* [CVE-2013-5615](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5615)
* [CVE-2013-5616](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5616)
* [CVE-2013-5618](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5618)
* [CVE-2013-5619](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5619)
* [CVE-2013-6671](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-6671)
* [CVE-2013-6672](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-6672)
* [CVE-2013-6673](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-6673)
* [CVE-2014-1477](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1477)
* [CVE-2014-1478](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1478)
* [CVE-2014-1479](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1479)
* [CVE-2014-1480](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1480)
* [CVE-2014-1481](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1481)
* [CVE-2014-1482](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1482)
* [CVE-2014-1483](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1483)
* [CVE-2014-1485](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1485)
* [CVE-2014-1486](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1486)
* [CVE-2014-1487](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1487)
* [CVE-2014-1488](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1488)
* [CVE-2014-1489](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1489)
* [CVE-2014-1490](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1490)
* [CVE-2014-1491](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1491)
* [CVE-2014-1492](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1492)
* [CVE-2014-1493](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1493)
* [CVE-2014-1494](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1494)
* [CVE-2014-1496](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1496)
* [CVE-2014-1497](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1497)
* [CVE-2014-1498](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1498)
* [CVE-2014-1499](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1499)
* [CVE-2014-1500](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1500)
* [CVE-2014-1502](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1502)
* [CVE-2014-1504](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1504)
* [CVE-2014-1505](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1505)
* [CVE-2014-1508](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1508)
* [CVE-2014-1509](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1509)
* [CVE-2014-1510](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1510)
* [CVE-2014-1511](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1511)
* [CVE-2014-1512](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1512)
* [CVE-2014-1513](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1513)
* [CVE-2014-1514](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1514)
* [CVE-2014-1518](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1518)
* [CVE-2014-1519](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1519)
* [CVE-2014-1520](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1520)
* [CVE-2014-1522](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1522)
* [CVE-2014-1523](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1523)
* [CVE-2014-1524](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1524)
* [CVE-2014-1525](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1525)
* [CVE-2014-1526](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1526)
* [CVE-2014-1529](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1529)
* [CVE-2014-1530](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1530)
* [CVE-2014-1531](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1531)
* [CVE-2014-1532](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1532)
* [CVE-2014-1533](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1533)
* [CVE-2014-1534](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1534)
* [CVE-2014-1536](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1536)
* [CVE-2014-1537](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1537)
* [CVE-2014-1538](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1538)
* [CVE-2014-1539](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1539)
* [CVE-2014-1540](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1540)
* [CVE-2014-1541](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1541)
* [CVE-2014-1542](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1542)
* [CVE-2014-1543](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1543)
* [CVE-2014-1544](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1544)
* [CVE-2014-1545](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1545)
* [CVE-2014-1547](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1547)
* [CVE-2014-1548](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1548)
* [CVE-2014-1549](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1549)
* [CVE-2014-1550](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1550)
* [CVE-2014-1551](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1551)
* [CVE-2014-1552](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1552)
* [CVE-2014-1553](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1553)
* [CVE-2014-1554](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1554)
* [CVE-2014-1555](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1555)
* [CVE-2014-1556](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1556)
* [CVE-2014-1557](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1557)
* [CVE-2014-1558](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1558)
* [CVE-2014-1559](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1559)
* [CVE-2014-1560](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1560)
* [CVE-2014-1561](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1561)
* [CVE-2014-1562](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1562)
* [CVE-2014-1563](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1563)
* [CVE-2014-1564](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1564)
* [CVE-2014-1565](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1565)
* [CVE-2014-1566](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1566)
* [CVE-2014-1567](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1567)
* [CVE-2014-1568](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1568)
* [CVE-2014-1574](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1574)
* [CVE-2014-1575](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1575)
* [CVE-2014-1576](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1576)
* [CVE-2014-1577](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1577)
* [CVE-2014-1578](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1578)
* [CVE-2014-1580](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1580)
* [CVE-2014-1581](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1581)
* [CVE-2014-1582](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1582)
* [CVE-2014-1583](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1583)
* [CVE-2014-1584](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1584)
* [CVE-2014-1585](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1585)
* [CVE-2014-1586](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1586)
* [CVE-2014-1587](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1587)
* [CVE-2014-1588](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1588)
* [CVE-2014-1589](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1589)
* [CVE-2014-1590](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1590)
* [CVE-2014-1591](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1591)
* [CVE-2014-1592](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1592)
* [CVE-2014-1593](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1593)
* [CVE-2014-1594](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1594)
* [CVE-2014-5369](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-5369)
* [CVE-2014-8631](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-8631)
* [CVE-2014-8632](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-8632)
* [CVE-2014-8634](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-8634)
* [CVE-2014-8635](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-8635)
* [CVE-2014-8636](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-8636)
* [CVE-2014-8637](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-8637)
* [CVE-2014-8638](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-8638)
* [CVE-2014-8639](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-8639)
* [CVE-2014-8640](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-8640)
* [CVE-2014-8641](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-8641)
* [CVE-2014-8642](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-8642)
* [CVE-2015-0817](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0817)
* [CVE-2015-0818](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0818)
* [CVE-2015-0819](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0819)
* [CVE-2015-0820](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0820)
* [CVE-2015-0821](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0821)
* [CVE-2015-0822](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0822)
* [CVE-2015-0823](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0823)
* [CVE-2015-0824](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0824)
* [CVE-2015-0825](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0825)
* [CVE-2015-0826](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0826)
* [CVE-2015-0827](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0827)
* [CVE-2015-0828](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0828)
* [CVE-2015-0829](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0829)
* [CVE-2015-0830](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0830)
* [CVE-2015-0831](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0831)
* [CVE-2015-0832](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0832)
* [CVE-2015-0833](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0833)
* [CVE-2015-0834](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0834)
* [CVE-2015-0835](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0835)
* [CVE-2015-0836](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0836)

**Release date**

April 07, 2015

**Latest revision**

April 08, 2015: 2

**Severity**

normal

**Exploitable**

remote

**Bugzilla entries**

* [489796](https://bugs.gentoo.org/show_bug.cgi?id=489796)
* [491234](https://bugs.gentoo.org/show_bug.cgi?id=491234)
* [493850](https://bugs.gentoo.org/show_bug.cgi?id=493850)
* [500320](https://bugs.gentoo.org/show_bug.cgi?id=500320)
* [505072](https://bugs.gentoo.org/show_bug.cgi?id=505072)
* [509050](https://bugs.gentoo.org/show_bug.cgi?id=509050)
* [512896](https://bugs.gentoo.org/show_bug.cgi?id=512896)
* [517876](https://bugs.gentoo.org/show_bug.cgi?id=517876)
* [522020](https://bugs.gentoo.org/show_bug.cgi?id=522020)
* [523652](https://bugs.gentoo.org/show_bug.cgi?id=523652)
* [525474](https://bugs.gentoo.org/show_bug.cgi?id=525474)
* [531408](https://bugs.gentoo.org/show_bug.cgi?id=531408)
* [536564](https://bugs.gentoo.org/show_bug.cgi?id=536564)
* [541316](https://bugs.gentoo.org/show_bug.cgi?id=541316)
* [544056](https://bugs.gentoo.org/show_bug.cgi?id=544056)

### Questions or comments?

Please feel free to contact us.

**© 2001–2020 Gentoo Foundation, Inc.**



=== Content from bugzilla.mozilla.org_96a6a946_20250124_230149.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/946733)
* [XML](/show_bug.cgi?ctype=xml&id=946733)

Closed
[Bug 946733](/show_bug.cgi?id=946733)

Opened 11 years ago
Closed 11 years ago

# Crash in nr\_turn\_stun\_ctx\_cb

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

Crash in nr\_turn\_stun\_ctx\_cb

## Categories

### (Core :: WebRTC: Networking, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=WebRTC%3A%20Networking#WebRTC%3A%20Networking)

WebRTC: Networking
▾

Core :: WebRTC: Networking
Bugs in the networking portions of WebRTC (PeerConnection dataChannels, SCTP, DTLS, SRTP, ICE, TURN, STUN, etc)
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=WebRTC%3A%20Networking&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=WebRTC%3A%20Networking&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=WebRTC%3A%20Networking)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

25 Branch

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

All

All

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

normal

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla28

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Accessibility Severity | --- |
| --- | --- |
| a11y-review | --- |
| Performance Impact | --- |
| Webcompat Score | --- |
| Webcompat Priority | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox25 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox25&o1=equals&v1=wontfix) |
| firefox26 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox26&o1=equals&v1=wontfix) |
| firefox27 | --- | [fixed](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=fixed) |
| firefox28 | --- | [fixed](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=fixed) |
| firefox-esr17 | --- | [unaffected](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=unaffected) |
| firefox-esr24 | --- | [unaffected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=unaffected) |
| b2g18 | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=unaffected) |
| b2g-v1.1hd | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=equals&v1=unaffected) |
| b2g-v1.2 | --- | [wontfix](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=wontfix) |
| b2g-v1.3 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=fixed) |
| b2g-v1.3T | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=fixed) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox25 |  | wontfix |
| firefox26 |  | wontfix |
| firefox27 |  | fixed |
| firefox28 |  | fixed |
| firefox-esr17 |  | unaffected |
| firefox-esr24 |  | unaffected |
| b2g18 |  | unaffected |
| b2g-v1.1hd |  | unaffected |
| b2g-v1.2 |  | wontfix |
| b2g-v1.3 |  | fixed |
| b2g-v1.3T |  | fixed |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: padenot, Assigned: bwc)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/3e201149abea356acc9bb6f0eea8b5a0?d=mm&size=40)  [bwc](/user_profile?user_id=478411)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/26d5e4c31bc56896f13d7ae0fbb24e96?d=mm&size=40)  [padenot](/user_profile?user_id=404637)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/3e201149abea356acc9bb6f0eea8b5a0?d=mm&size=40)  [bwc](/user_profile?user_id=478411)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

17 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

---

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[Duplicates:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#duplicates)

[862890](/show_bug.cgi?id=862890 "RESOLVED DUPLICATE - WebRTC TURN use-after-free [@nr_turn_client_process_response]")

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Keywords: crash, csectype-uaf, sec-high, Whiteboard: [adv-main27+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[crash](/buglist.cgi?keywords=crash&resolution=---),
[csectype-uaf](/buglist.cgi?keywords=csectype-uaf&resolution=---),
[sec-high](/buglist.cgi?keywords=sec-high&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[adv-main27+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [cbook](/user_profile?user_id=277293) | [in-testsuite](#c43 "11 years ago") | ? |
| --- | --- | --- |
| [cbook](/user_profile?user_id=277293) | in-testsuite | ? |
| --- | --- | --- |
|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (3 files, 3 obsolete files)

| [Simplify turn client ctx lifecycle to fix several use-after-free and double-free bugs.](/attachment.cgi?id=8343265)  [11 years ago](#c6)  [Byron Campen [:bwc]](/user_profile?user_id=478411)   2.23 KB, patch |  | [Details](/attachment.cgi?id=8343265&action=edit) | [Diff](/attachment.cgi?id=8343265&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=946733&attachment=8343265) |
| --- | --- | --- |
| [Simplify turn client ctx lifecycle to fix several use-after-free and double-free bugs.](/attachment.cgi?id=8343402)  [11 years ago](#c8)  [Byron Campen [:bwc]](/user_profile?user_id=478411)   2.42 KB, patch | ekr : [review+](#c10 "11 years ago")  mt : [review+](#c17 "11 years ago")  mt : [review+](#c17 "11 years ago")  dveditz : [approval-mozilla-aurora+](#c26 "11 years ago")  dveditz : [sec-approval+](#c26 "11 years ago") | [Details](/attachment.cgi?id=8343402&action=edit) | [Diff](/attachment.cgi?id=8343402&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=946733&attachment=8343402) |
| [(DO NOT CHECK IN!) Patch that sets the minimum TURN allocation duration extremely high, to show that we UAF if the duration from the TURN server is too low.](/attachment.cgi?id=8344015)  [11 years ago](#c18)  [Byron Campen [:bwc]](/user_profile?user_id=478411)   1.67 KB, patch |  | [Details](/attachment.cgi?id=8344015&action=edit) | [Diff](/attachment.cgi?id=8344015&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=946733&attachment=8344015) |
| [turn\_client\_ctx\_lifecycle.patch -- with fixed commit comment.](/attachment.cgi?id=8344040)  [11 years ago](#c24)  [Doug Turner (:dougt)](/user_profile?user_id=302291)   2.40 KB, patch | dveditz : [approval-mozilla-aurora+](#c27 "11 years ago")  dveditz : [sec-approval+](#c27 "11 years ago") | [Details](/attachment.cgi?id=8344040&action=edit) | [Diff](/attachment.cgi?id=8344040&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=946733&attachment=8344040) |
| [Simplify turn client ctx lifecycle to fix several use-after-free and double-free bugs.](/attachment.cgi?id=8344108)  [11 years ago](#c37)  [Byron Campen [:bwc]](/user_profile?user_id=478411)   2.44 KB, patch |  | [Details](/attachment.cgi?id=8344108&action=edit) | [Diff](/attachment.cgi?id=8344108&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=946733&attachment=8344108) |
| [Patch for 28.](/attachment.cgi?id=8344269)  [11 years ago](#c40)  [Byron Campen [:bwc]](/user_profile?user_id=478411)   3.46 KB, patch |  | [Details](/attachment.cgi?id=8344269&action=edit) | [Diff](/attachment.cgi?id=8344269&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=946733&attachment=8344269) |

Show Obsolete

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Paul Adenot (:padenot)](/user_profile?user_id=404637)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=946733#c0)• 11 years ago |
|  | |

So, I was doing the following thing, while using <https://opentokrtc.com/>, in the Paris office:
- A Linux machine, using a wired connection, running Chromium 30.0.1599.114 and today's Firefox Nightly. One tab in Firefox, two tabs in Chrome, all in the same room.
- A macbook, running a build from yesterday of Chromium, connected to the "Mozilla" wifi network, also in the same room.
All the browsers were connected to a room (four participants). After reloading multiple times the Chrome tabs, I tried to reload the Firefox tab, and after a couple seconds trying to connect, it crashed.
The bug report with stacks:
<https://crash-stats.mozilla.com/report/index/920a4655-1911-4b63-b005-d9f582131205>

|  | [Byron Campen [:bwc]](/user_profile?user_id=478411)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=946733#a5707_478411)• 11 years ago |

Assignee: docfaraday → ekr

|  | [Timothy B. Terriberry (:derf)](/user_profile?user_id=12273) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=946733#a7186_12273)• 11 years ago |

Group: core-security

|  | [Eric Rescorla (:ekr)](/user_profile?user_id=35667) |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=946733#c1)• 11 years ago |
|  | |

Byron and I looked at this and Byron points out that the TURN code has some
confusion about the STUN ctx lifetime in that it calls a callback which
destroys the STUN ctx and then references the STUN ctx. This can cause UAFs
or potentially double-frees in a number of places. The right fix is just
to make the nr\_turn\_stun\_ctx\_ lifetime match that of the nr\_turn\_client\_ctx
rather than have it destroyed in nr\_turn\_client\_cancel(). We should have
a patch later today.
Al, Alex, this code is currently running in FF 25 and this is the first crash
we have seen in this area. However, this kind of memory error is of course
a potential security risk. How would you like us to proceed?

|  | [Randell Jesup [:jesup] (needinfo me)](/user_profile?user_id=11539) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=946733#a15850_11539)• 11 years ago |

Flags: needinfo?(abillings)Keywords: [crash](/buglist.cgi?keywords=crash&resolution=---)Whiteboard: sec-uaf

|  | [Randell Jesup [:jesup] (needinfo me)](/user_profile?user_id=11539) |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=946733#c2)• 11 years ago |
|  | |

ekr - what versions are affected by this? All versions with TURN support? Can you set the affected flags? ThanksFlags: needinfo?(ekr)

|  | [Eric Rescorla (:ekr)](/user_profile?user_id=35667) |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=946733#c3)• 11 years ago |
|  | |

yeah, everything with TURN, starting in 25. I set the version flag. is that the right one?Flags: needinfo?(ekr)Version: unspecified → 25 Branch

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=946733#c4)• 11 years ago |
|  | |

We should get a security rating on this. How bad is this really?Flags: needinfo?(abillings)

|  | [Byron Campen [:bwc]](/user_profile?user_id=478411)  Assignee |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=946733#c5)• 11 years ago |
|  | |

I get the impression that an attacker could easily trigger these bugs if they deployed a malicious TURN server, and got us to use it (trivial to carry out).

|  | [Byron Campen [:bwc]](/user_profile?user_id=478411)  Assignee |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=946733#c6)• 11 years ago |
|  | |

Attached patch

[Simplify turn client ctx lifecycle to fix several use-after-free and double-free bugs.](attachment.cgi?id=8343265&action=diff) (obsolete)
— [Details](attachment.cgi?id=8343265&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=946733&attachment=8343265)

I think this patch should plug this error, and others.

|  | [Byron Campen [:bwc]](/user_profile?user_id=478411)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=946733#a21270_478411)• 11 years ago |

Assignee: ekr → docfaradayStatus: NEW → ASSIGNED

|  | [Byron Campen [:bwc]](/user_profile?user_id=478411)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=946733#a21384_478411)• 11 years ago |

[Attachment #8343265](/attachment.cgi?id=8343265&action=edit "Simplify turn client ctx lifecycle to fix several use-after-free and double-free bugs.") -
Flags: review?(ekr)

|  | [Eric Rescorla (:ekr)](/user_profile?user_id=35667) |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=946733#c7)• 11 years ago |
|  | |

(In reply to Al Billings [:abillings] from [comment #4](/show_bug.cgi?id=946733#c4 "RESOLVED FIXED - Crash in nr_turn_stun_ctx_cb"))
> We should get a security rating on this. How bad is this really?
TBH, we're not entirely sure.
We don't currently have:
- A clear path to make this happen
- A way to exploit it given that it's happening.
But I agree with Byron that there probably is some way to make
this happen remotely (though some of the obvious angles I think will
not work.) That would then need to be turned into an exploit and the timing
for that is probably pretty short.

|  | [Byron Campen [:bwc]](/user_profile?user_id=478411)  Assignee |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=946733#c8)• 11 years ago |
|  | |

Attached patch

[Simplify turn client ctx lifecycle to fix several use-after-free and double-free bugs.](attachment.cgi?id=8343402&action=diff) (obsolete)
— [Details](attachment.cgi?id=8343402&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=946733&attachment=8343402)

Cancel the STUN client ctxs (cancel timers, and set state appropriately)

|  | [Byron Campen [:bwc]](/user_profile?user_id=478411)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=946733#a31991_478411)• 11 years ago |

[Attachment #8343265](/attachment.cgi?id=8343265&action=edit "Simplify turn client ctx lifecycle to fix several use-after-free and double-free bugs.") -
Attachment is obsolete: true
[Attachment #8343265](/attachment.cgi?id=8343265&action=edit "Simplify turn client ctx lifecycle to fix several use-after-free and double-free bugs.") -
Flags: review?(ekr)

|  | [Byron Campen [:bwc]](/user_profile?user_id=478411)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=946733#a32229_478411)• 11 years ago |

[Attachment #8343402](/attachment.cgi?id=8343402&action=edit "Simplify turn client ctx lifecycle to fix several use-after-free and double-free bugs.") -
Flags: review?(ekr)

|  | [Eric Rescorla (:ekr)](/user_profile?user_id=35667) |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=946733#c9)• 11 years ago |
|  | |

Al, new thoughts?Flags: needinfo?(abillings)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=946733#a33894_1689)• 11 years ago |

[status-b2g18](/buglist.cgi?f1=cf_status_b2g18&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=unaffected)
[status-b2g-v1.2](/buglist.cgi?f1=cf_status_b2g_1_2&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=affected)
[status-firefox25](/buglist.cgi?f1=cf_status_firefox25&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_firefox25&o1=equals&v1=wontfix)
[status-firefox26](/buglist.cgi?f1=cf_status_firefox26&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox26&o1=equals&v1=affected)
[status-firefox27](/buglist.cgi?f1=cf_status_firefox27&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=affected)
[status-firefox28](/buglist.cgi?f1=cf_status_firefox28&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=affected)
[status-firefox-esr17](/buglist.cgi?f1=cf_status_firefox_esr17&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=unaffected)
[status-firefox-esr24](/buglist.cgi?f1=cf_status_firefox_esr24&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=unaffected)Keywords: [csectype-uaf](/buglist.cgi?keywords=csectype-uaf&resolution=---),
[sec-high](/buglist.cgi?keywords=sec-high&resolution=---)Whiteboard: sec-uaf

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=946733#a33956_280903)• 11 years ago |

Flags: needinfo?(abillings)

|  | [Eric Rescorla (:ekr)](/user_profile?user_id=35667) |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=946733#c10)• 11 years ago |
|  | |

Comment on [attachment 8343402](/attachment.cgi?id=8343402 "Simplify turn client ctx lifecycle to fix several use-after-free and double-free bugs.") [[details]](/attachment.cgi?id=8343402&action=edit "Simplify turn client ctx lifecycle to fix several use-after-free and double-free bugs.") [[diff]](/attachment.cgi?id=8343402&action=diff "Simplify turn client ctx lifecycle to fix several use-after-free and double-free bugs.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=946733&attachment=8343402)
Simplify turn client ctx lifecycle to fix several use-after-free and double-free bugs.
Review of [attachment 8343402](/attachment.cgi?id=8343402 "Simplify turn client ctx lifecycle to fix several use-after-free and double-free bugs.") [[details]](/attachment.cgi?id=8343402&action=edit "Simplify turn client ctx lifecycle to fix several use-after-free and double-free bugs.") [[diff]](/attachment.cgi?id=8343402&action=diff "Simplify turn client ctx lifecycle to fix several use-after-free and double-free bugs.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=946733&attachment=8343402):
-----------------------------------------------------------------
lgtm with nit below.
1. I would like a second review from Adam, or, if he isn't around tomorrow, Martin.
2. Please add a unit test that has a TURN failure on it (e.g., wrong credentials)
and make sure it works properly as does the entire unit test suite.
[Attachment #8343402](/attachment.cgi?id=8343402&action=edit "Simplify turn client ctx lifecycle to fix several use-after-free and double-free bugs.") -
Flags: review?(ekr)
[Attachment #8343402](/attachment.cgi?id=8343402&action=edit "Simplify turn client ctx lifecycle to fix several use-after-free and double-free bugs.") -
Flags: review?
[Attachment #8343402](/attachment.cgi?id=8343402&action=edit "Simplify turn client ctx lifecycle to fix several use-after-free and double-free bugs.") -
Flags: review+

|  | [Byron Campen [:bwc]](/user_profile?user_id=478411)  Assignee |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=946733#c11)• 11 years ago |
|  | |

Sure, I can add that test case; I don't expect to see any failures though as I've tried the wrong credentials test under asan.

|  | [Eric Rescorla (:ekr)](/user_profile?user_id=35667) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=946733#c12)• 11 years ago |
|  | |

That's good to hear, but I think it would be good to have a test to make sure it still works.

|  | [Byron Campen [:bwc]](/user_profile?user_id=478411)  Assignee |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=946733#c13)• 11 years ago |
|  | |

Yep. If it is easy I'll add some other simple rainy day stuff.

|  | [Eric Rescorla (:ekr)](/user_profile?user_id=35667) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=946733#a96320_35667)• 11 years ago |

[Attachment #8343402](/attachment.cgi?id=8343402&action=edit "Simplify turn client ctx lifecycle to fix several use-after-free and double-free bugs.") -
Flags: review?(martin.thomson)
[Attachment #8343402](/attachment.cgi?id=8343402&action=edit "Simplify turn client ctx lifecycle to fix several use-after-free and double-free bugs.") -
Flags: review?

|  | [Eric Rescorla (:ekr)](/user_profile?user_id=35667) |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=946733#c14)• 11 years ago |
|  | |

Dan,
Based on the above, how would you prefer we handle this in terms of
landing timing and branch selection?Flags: needinfo?(dveditz)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=946733#c15)• 11 years ago |
|  | |

Eric,
Make a patch and nominate for sec-approval. We should be able to go in straight away. We'll want to take it on Aurora, Beta, and ESR24 after that.

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=946733#c16)• 11 years ago |
|  | |

Or not ESR24, rather, since it is unaffected.
[status-firefox26](/buglist.cgi?f1=cf_status_firefox26&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox26&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_firefox26&o1=equals&v1=wontfix)
[status-firefox29](/buglist.cgi?f1=cf_status_firefox29&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=affected)
[tracking-firefox29](/buglist.cgi?f1=cf_tracking_firefox29&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox29&o1=equals&v1=%2B)

|  | [Martin Thomson [:mt:]](/user_profile?user_id=438654) |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=946733#c17)• 11 years ago |
|  | |

Comment on [attachment 8343402](/attachment.cgi?id=8343402 "Simplify turn client ctx lifecycle to fix several use-after-free and double-free bugs.") [[details]](/attachment.cgi?id=8343402&action=edit "Simplify turn client ctx lifecycle to fix several use-after-free and double-free bugs.") [[diff]](/attachment.cgi?id=8343402&action=diff "Simplify turn client ctx lifecycle to fix several use-after-free and double-free bugs.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=946733&attachment=8343402)
Simplify turn client ctx lifecycle to fix several use-after-free and double-free bugs.
Review of [attachment 8343402](/attachment.cgi?id=8343402 "Simplify turn client ctx lifecycle to fix several use-after-free and double-free bugs.") [[details]](/attachment.cgi?id=8343402&action=edit "Simplify turn client ctx lifecycle to fix several use-after-free and double-free bugs.") [[diff]](/attachment.cgi?id=8343402&action=diff "Simplify turn client ctx lifecycle to fix several use-after-free and double-free bugs.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=946733&attachment=8343402):
-----------------------------------------------------------------
Looks like a straight shot to me. r++ from me (blame ekr on the double count).
Note the request for unit tests from ekr.
[Attachment #8343402](/attachment.cgi?id=8343402&action=edit "Simplify turn client ctx lifecycle to fix several use-after-free and double-free bugs.") -
Flags: review?(martin.thomson)
[Attachment #8343402](/attachment.cgi?id=8343402&action=edit "Simplify turn client ctx lifecycle to fix several use-after-free and double-free bugs.") -
Flags: review+

|  | [Byron Campen [:bwc]](/user_profile?user_id=478411)  Assignee |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=946733#c18)• 11 years ago |
|  | |

Attached patch

[(DO NOT CHECK IN!) Patch that sets the minimum TURN allocation duration extremely high, to show that we UAF if the duration from the TURN server is too low.](attachment.cgi?id=8344015&action=diff)
— [Details](attachment.cgi?id=8344015&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=946733&attachment=8344015)

Make it easy to see a real-world example of one possible failure case.

|  | [Byron Campen [:bwc]](/user_profile?user_id=478411)  Assignee |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=946733#c19)• 11 years ago |
|  | |

Comment on [attachment 8343402](/attachment.cgi?id=8343402 "Simplify turn client ctx lifecycle to fix several use-after-free and double-free bugs.") [[details]](/attachment.cgi?id=8343402&action=edit "Simplify turn client ctx lifecycle to fix several use-after-free and double-free bugs.") [[diff]](/attachment.cgi?id=8343402&action=diff "Simplify turn client ctx lifecycle to fix several use-after-free and double-free bugs.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=946733&attachment=8343402)
Simplify turn client ctx lifecycle to fix several use-after-free and double-free bugs.
[Security approval request comment]
How easily could an exploit be constructed based on the patch?
If you want to see one possible example, apply <https://bugzilla.mozilla.org/attachment.cgi?id=8344015&action=edit>, and run ice\_unittest under asan with some credentials to a real TURN server. The allocation lifetime will never be high enough to satisfy the checking code, and will cause failures and UAF. It would be trivial to stand up a misconfigured TURN server that would respond with something like a lifetime of 5 seconds, causing this same failure.
As for actually exploiting this failure, all of these structs have bunches of function pointers in them, and it is not out of the question that you might be able to engineer a situation where you call one of them on a previously freed struct (I see some potential for double calls to some of the same function pointers that get us to the failure case in the first place). However, the window of opportunity is pretty narrow here, because no pointers to these structs are left behind once the callback for handling the allocate response returns.
Do comments in the patch, the check-in comment, or tests included in the patch paint a bulls-eye on the security problem?
Uh. I guess they do now?
Which older supported branches are affected by this flaw?
Reasonably sure this affects all versions with TURN support. When did this land again? I see a rewrite that landed in April, and ekr says that the TURN code preceding that didn't work at all.
If not all supported branches, which bug introduced the flaw?
The rewrite happened in [bug 786235](/show_bug.cgi?id=786235 "RESOLVED FIXED - Test/fix TURN"), changeset e69693180dff.
Do you have backports for the affected branches? If not, how different, hard to create, and risky will they be?
The backports should be pretty easy.
How likely is this patch to cause regressions; how much testing does it need?
Since we are keeping the failed STUN/TURN context stuff around until the candidates go away, instead of deleting them when they fail, it is possible that these failed contexts could interfere with the continued operation of TURN in some way. However, we are already talking about rainy-day testing, which we don't do much of at all right now...
[Attachment #8343402](/attachment.cgi?id=8343402&action=edit "Simplify turn client ctx lifecycle to fix several use-after-free and double-free bugs.") -
Flags: sec-approval?

|  | [Eric Rescorla (:ekr)](/user_profile?user_id=35667) |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=946733#c20)• 11 years ago |
|  | |

It landed in TURN 25.

|  | [Byron Campen [:bwc]](/user_profile?user_id=478411)  Assignee |  |
| --- | --- | --- |
| [Comment 21](/show_bug.cgi?id=946733#c21)• 11 years ago |
|  | |

I have verified that the UAF goes away when applying the lifecycle patch, and no asan failures remain. The expected unit-test failures are present in cases where TURN must work to pass the test.

|  | [Doug Turner (:dougt)](/user_profile?user_id=302291) |  |
| --- | --- | --- |
| [Comment 22](/show_bug.cgi?id=946733#c22)• 11 years ago |
|  | |

Bryon, You may want to change the summary of the patch to not explictly say you're fixing a use-after-free or double-free bug. Historical, this calls undo attention to the bug. At least that is the thinking.

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 23](/show_bug.cgi?id=946733#c23)• 11 years ago |
|  | |

(In reply to Byron Campen [:bwc] from [comment #19](/show_bug.cgi?id=946733#c19 "RESOLVED FIXED - Crash in nr_turn_stun_ctx_cb"))
> Do comments in the patch, the check-in comment, or tests included in the
> patch paint a bulls-eye on the security problem?
>
> Uh. I guess they do now?
We ask so you can think about changing things like that. Can you change the comment so it's just "[Bug 946733](/show_bug.cgi?id=946733 "RESOLVED FIXED - Crash in nr_turn_stun_ctx_cb") - Simplify turn client ctx lifecycle"?

|  | [Doug Turner (:dougt)](/user_profile?user_id=302291) |  |
| --- | --- | --- |
| [Comment 24](/show_bug.cgi?id=946733#c24)• 11 years ago |
|  | |

Attached patch

[turn\_client\_ctx\_lifecycle.patch -- with fixed commit comment.](attachment.cgi?id=8344040&action=diff) (obsolete)
— [Details](attachment.cgi?id=8344040&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=946733&attachment=8344040)

|  | [Doug Turner (:dougt)](/user_profile?user_id=302291) |  |
| --- | --- | --- |
| [Comment 25](/show_bug.cgi?id=946733#c25)• 11 years ago |
|  | |

Comment on [attachment 8344040](/attachment.cgi?id=8344040 "turn_client_ctx_lifecycle.patch -- with fixed commit comment.") [[details]](/attachment.cgi?id=8344040&action=edit "turn_client_ctx_lifecycle.patch -- with fixed commit comment.") [[diff]](/attachment.cgi?id=8344040&action=diff "turn_client_ctx_lifecycle.patch -- with fixed commit comment.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=946733&attachment=8344040)
turn\_client\_ctx\_lifecycle.patch -- with fixed commit comment.
same patch as above w/ correct checkin comment.
[Attachment #8344040](/attachment.cgi?id=8344040&action=edit "turn_client_ctx_lifecycle.patch -- with fixed commit comment.") -
Attachment description: turn\_client\_ctx\_lifecycle.patch → turn\_client\_ctx\_lifecycle.patch -- with fixed commit comment.

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 26](/show_bug.cgi?id=946733#c26)• 11 years ago |
|  | |

Comment on [attachment 8343402](/attachment.cgi?id=8343402 "Simplify turn client ctx lifecycle to fix several use-after-free and double-free bugs.") [[details]](/attachment.cgi?id=8343402&action=edit "Simplify turn client ctx lifecycle to fix several use-after-free and double-free bugs.") [[diff]](/attachment.cgi?id=8343402&action=diff "Simplify turn client ctx lifecycle to fix several use-after-free and double-free bugs.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=946733&attachment=8343402)
Simplify turn client ctx lifecycle to fix several use-after-free and double-free bugs.
[Triage Comment]
Please shorted the check-in comment to
[Bug 946733](/show_bug.cgi?id=946733 "RESOLVED FIXED - Crash in nr_turn_stun_ctx_cb"). Simplify turn client ctx lifecycle
With that a=dveditz for aurora and sec-approval+. Please don't mention sec-approval+ in the check-in comment, but you need the a=dveditz part for Aurora check-in
[Attachment #8343402](/attachment.cgi?id=8343402&action=edit "Simplify turn client ctx lifecycle to fix several use-after-free and double-free bugs.") -
Flags: sec-approval?
[Attachment #8343402](/attachment.cgi?id=8343402&action=edit "Simplify turn client ctx lifecycle to fix several use-after-free and double-free bugs.") -
Flags: sec-approval+
[Attachment #8343402](/attachment.cgi?id=8343402&action=edit "Simplify turn client ctx lifecycle to fix several use-after-free and double-free bugs.") -
Flags: approval-mozilla-aurora+

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 27](/show_bug.cgi?id=946733#c27)• 11 years ago |
|  | |

Comment on [attachment 8344040](/attachment.cgi?id=8344040 "turn_client_ctx_lifecycle.patch -- with fixed commit comment.") [[details]](/attachment.cgi?id=8344040&action=edit "turn_client_ctx_lifecycle.patch -- with fixed commit comment.") [[diff]](/attachment.cgi?id=8344040&action=diff "turn_client_ctx_lifecycle.patch -- with fixed commit comment.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=946733&attachment=8344040)
turn\_client\_ctx\_lifecycle.patch -- with fixed commit comment.
Moving flags from other patch
[Attachment #8344040](/attachment.cgi?id=8344040&action=edit "turn_client_ctx_lifecycle.patch -- with fixed commit comment.") -
Flags: sec-approval+
[Attachment #8344040](/attachment.cgi?id=8344040&action=edit "turn_client_ctx_lifecycle.patch -- with fixed commit comment.") -
Flags: approval-mozilla-aurora+

|  | [Randell Jesup [:jesup] (needinfo me)](/user_profile?user_id=11539) |  |
| --- | --- | --- |
| [Comment 28](/show_bug.cgi?id=946733#c28)• 11 years ago |
|  | |

The plan looks good to me. Given the possibility to remotely provoke the UAF, let's push it wherever makes sense. We should make specific decisions about 26 and 25 (given 26 about to go out, probably no point in 25). Right now both are marked wontfix

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 29](/show_bug.cgi?id=946733#c29)• 11 years ago |
|  | |

Randell, we built 26 already and it ships within the next two work days. This isn't getting fixed on 26. We should get this onto other branches though.

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Comment 30](/show_bug.cgi?id=946733#c30)• 11 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-aurora/rev/f1a8671a0b7e>
It looks like this needs a rebased patch for trunk (28).
[status-firefox27](/buglist.cgi?f1=cf_status_firefox27&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=fixed)Flags: needinfo?(docfaraday)

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Comment 31](/show_bug.cgi?id=946733#c31)• 11 years ago |
|  | |

If you attach a patch for 28 I can land it.

|  | [Byron Campen [:bwc]](/user_profile?user_id=478411)  Assignee |  |
| --- | --- | --- |
| [Comment 32](/show_bug.cgi?id=946733#c32)• 11 years ago |
|  | |

Gimme a sec.Flags: needinfo?(docfaraday)

|  | [Byron Campen [:bwc]](/user_profile?user_id=478411)  Assignee |  |
| --- | --- | --- |
| [Comment 33](/show_bug.cgi?id=946733#c33)• 11 years ago |
|  | |

This patch applies cleanly for me...Flags: needinfo?(continuation)

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Comment 34](/show_bug.cgi?id=946733#c34)• 11 years ago |
|  | |

Ah I see. It applies cleanly to mozilla-central, but not to mozilla-inbound. It looks like a conflict with [bug 906968](/show_bug.cgi?id=906968 "RESOLVED FIXED - Support TURN TCP in WebRTC"), which is on inbound but not central.Flags: needinfo?(continuation)

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Comment 35](/show_bug.cgi?id=946733#c35)• 11 years ago |
|  | |

In case it isn't clear, I definitely am not going to rebase over that gigantic patch myself. ;)

|  | [Byron Campen [:bwc]](/user_profile?user_id=478411)  Assignee |  |
| --- | --- | --- |
| [Comment 36](/show_bug.cgi?id=946733#c36)• 11 years ago |
|  | |

Yeah, I'm on it.

|  | [Byron Campen [:bwc]](/user_profile?user_id=478411)  Assignee |  |
| --- | --- | --- |
| [Comment 37](/show_bug.cgi?id=946733#c37)• 11 years ago |
|  | |

Attached patch

[Simplify turn client ctx lifecycle to fix several use-after-free and double-free bugs.](attachment.cgi?id=8344108&action=diff)
— [Details](attachment.cgi?id=8344108&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=946733&attachment=8344108)

Looks like the windows builds insist on C89, which wants this declared at the beginning.

|  | [Byron Campen [:bwc]](/user_profile?user_id=478411)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=946733#a123340_478411)• 11 years ago |

[Attachment #8343402](/attachment.cgi?id=8343402&action=edit "Simplify turn client ctx lifecycle to fix several use-after-free and double-free bugs.") -
Attachment is obsolete: true

|  | [Byron Campen [:bwc]](/user_profile?user_id=478411)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=946733#a123343_478411)• 11 years ago |

[Attachment #8344040](/attachment.cgi?id=8344040&action=edit "turn_client_ctx_lifecycle.patch -- with fixed commit comment.") -
Attachment is obsolete: true

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Comment 38](/show_bug.cgi?id=946733#c38)• 11 years ago |
|  | |

Windows bustage fix.
<https://hg.mozilla.org/releases/mozilla-aurora/rev/c896d8ee21f0>

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Comment 39](/show_bug.cgi?id=946733#c39)• 11 years ago |
|  | |

Oops, I failed to notice Byron posted a patch. With this push, it should be matched up to his patch.
<https://hg.mozilla.org/releases/mozilla-aurora/rev/37f2d83153a5>

|  | [Byron Campen [:bwc]](/user_profile?user_id=478411)  Assignee |  |
| --- | --- | --- |
| [Comment 40](/show_bug.cgi?id=946733#c40)• 11 years ago |
|  | |

Attached patch

[Patch for 28.](attachment.cgi?id=8344269&action=diff)
— [Details](attachment.cgi?id=8344269&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=946733&attachment=8344269)

Patch for 28.

|  | [Byron Campen [:bwc]](/user_profile?user_id=478411)  Assignee |  |
| --- | --- | --- |
| [Comment 41](/show_bug.cgi?id=946733#c41)• 11 years ago |
|  | |

Have a rebased patch for 28.
[status-firefox27](/buglist.cgi?f1=cf_status_firefox27&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=fixed) → [affected](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=affected)

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=946733#a218121_406194)• 11 years ago |

[status-firefox27](/buglist.cgi?f1=cf_status_firefox27&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=fixed)Flags: needinfo?(dveditz)Keywords: [checkin-needed](/buglist.cgi?keywords=checkin-needed&resolution=---)

|  | [Randell Jesup [:jesup] (needinfo me)](/user_profile?user_id=11539) |  |
| --- | --- | --- |
| [Comment 42](/show_bug.cgi?id=946733#c42)• 11 years ago |
|  | |

<https://hg.mozilla.org/integration/mozilla-inbound/rev/046cf0c4f858>Keywords: [checkin-needed](/buglist.cgi?keywords=checkin-needed&resolution=---)Target Milestone: --- → mozilla28

|  | [Carsten Book [:Tomcat]](/user_profile?user_id=277293) |  |
| --- | --- | --- |
| [Comment 43](/show_bug.cgi?id=946733#c43)• 11 years ago |
|  | |

landed on <https://hg.mozilla.org/mozilla-central/rev/046cf0c4f858>Status: ASSIGNED → RESOLVEDClosed: 11 years ago
[status-firefox28](/buglist.cgi?f1=cf_status_firefox28&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=fixed)Flags: in-testsuite?Resolution: --- → FIXED

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=946733#a260266_406194)• 11 years ago |

[status-firefox29](/buglist.cgi?f1=cf_status_firefox29&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=affected) → ---

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=946733#a260287_406194)• 11 years ago |

[tracking-firefox29](/buglist.cgi?f1=cf_tracking_firefox29&o1=isnotempty):
[+](/buglist.cgi?f1=cf_tracking_firefox29&o1=equals&v1=%2B) → ---

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 44](/show_bug.cgi?id=946733#c44)• 11 years ago |
|  | |

Is this needed on b2g26 (v1.2)?Flags: needinfo?(docfaraday)

|  | [Randell Jesup [:jesup] (needinfo me)](/user_profile?user_id=11539) |  |
| --- | --- | --- |
| [Comment 45](/show_bug.cgi?id=946733#c45)• 11 years ago |
|  | |

No, since we don't support peerconnections in 1.2Flags: needinfo?(docfaraday)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=946733#a1294305_75935)• 11 years ago |

[status-b2g-v1.1hd](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=equals&v1=unaffected)
[status-b2g-v1.2](/buglist.cgi?f1=cf_status_b2g_1_2&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=wontfix)
[status-b2g-v1.3](/buglist.cgi?f1=cf_status_b2g_1_3&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=fixed)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=946733#a4164389_280903)• 11 years ago |

Whiteboard: [adv-main27+]

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=946733#a13325332_75935)• 11 years ago |

[status-b2g-v1.3T](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=fixed)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=946733#a38669145_1689)• 10 years ago |

Group: core-security
You need to [log in](/show_bug.cgi?id=946733&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Byron Campen [:bwc]](/user_profile?user_id=478411)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from bugzilla.mozilla.org_51f7e6ed_20250124_230143.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/944851)
* [XML](/show_bug.cgi?ctype=xml&id=944851)

Closed
[Bug 944851](/show_bug.cgi?id=944851)

Opened 11 years ago
Closed 11 years ago

# Array out-of-bounds [@ mozilla::dom::AudioParamTimeline::AudioNodeInputValue]

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

Array out-of-bounds [@ mozilla::dom::AudioParamTimeline::AudioNodeInputValue]

## Categories

### (Core :: Web Audio, defect, P1)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=Web%20Audio#Web%20Audio)

Web Audio
▾

Core :: Web Audio
Bugs and enhancement requests relating to the Web Audio support.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=Web%20Audio&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=Web%20Audio&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=Web%20Audio)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

x86\_64

macOS

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

P1

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

critical

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla29

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Performance Impact | --- |
| --- | --- |
| Webcompat Score | --- |
| Accessibility Severity | --- |
| a11y-review | --- |
| Webcompat Priority | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox26 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox26&o1=equals&v1=wontfix) |
| firefox27 | [+](/buglist.cgi?f1=cf_tracking_firefox27&o1=equals&v1=%2B) | [verified](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=verified) |
| firefox28 | [+](/buglist.cgi?f1=cf_tracking_firefox28&o1=equals&v1=%2B) | [verified](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=verified) |
| firefox29 | --- | [verified](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=verified) |
| firefox-esr24 | --- | [unaffected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=unaffected) |
| b2g18 | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=unaffected) |
| b2g-v1.1hd | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=equals&v1=unaffected) |
| b2g-v1.2 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=fixed) |
| b2g-v1.3 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=fixed) |
| b2g-v1.3T | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=fixed) |
| b2g-v1.4 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=fixed) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox26 |  | wontfix |
| firefox27 | + | verified |
| firefox28 | + | verified |
| firefox29 |  | verified |
| firefox-esr24 |  | unaffected |
| b2g18 |  | unaffected |
| b2g-v1.1hd |  | unaffected |
| b2g-v1.2 |  | fixed |
| b2g-v1.3 |  | fixed |
| b2g-v1.3T |  | fixed |
| b2g-v1.4 |  | fixed |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: jruderman, Assigned: karlt)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/15d034eb5ed480cb10a8a9e41e8b9f13?d=mm&size=40)  [karlt](/user_profile?user_id=274246)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/d2dc9227eafcd0ec5ba3712ee4f19b75?d=mm&size=40)  [jruderman](/user_profile?user_id=11608)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/15d034eb5ed480cb10a8a9e41e8b9f13?d=mm&size=40)  [karlt](/user_profile?user_id=274246)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

11 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[866434](/show_bug.cgi?id=866434 "RESOLVED FIXED - Make it possible to connect an AudioNode to an AudioParam"), [893020](/show_bug.cgi?id=893020 "RESOLVED FIXED - Make AudioParam.value getter return a value based on the AudioContext.currentTime")

Dependency [tree](/showdependencytree.cgi?id=944851&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=944851)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Keywords: assertion, sec-moderate, testcase, Whiteboard: [adv-main27+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[assertion](/buglist.cgi?keywords=assertion&resolution=---),
[sec-moderate](/buglist.cgi?keywords=sec-moderate&resolution=---),
[testcase](/buglist.cgi?keywords=testcase&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[adv-main27+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [karlt](/user_profile?user_id=274246) | [in-testsuite](#c13 "11 years ago") | + |
| --- | --- | --- |
| [karlt](/user_profile?user_id=274246) | in-testsuite | + |
| --- | --- | --- |
|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (4 files)

| [testcase](/attachment.cgi?id=8340595)  [11 years ago](#c0)  [Jesse Ruderman](/user_profile?user_id=11608)   447 bytes, text/html |  | [Details](/attachment.cgi?id=8340595&action=edit) |
| --- | --- | --- |
| [stack](/attachment.cgi?id=8340596)  [11 years ago](#c1)  [Jesse Ruderman](/user_profile?user_id=11608)   12.45 KB, text/plain |  | [Details](/attachment.cgi?id=8340596&action=edit) |
| [time-varying testcase](/attachment.cgi?id=8351269)  [11 years ago](#c3)  [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)   1008 bytes, text/html |  | [Details](/attachment.cgi?id=8351269&action=edit) |
| [don't consider AudioNode input when getting AudioParam values on the main thread](/attachment.cgi?id=8351280)  [11 years ago](#c4)  [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)   2.12 KB, patch | ehsan.akhgari : [review+](#a2890597_251051 "11 years ago")  lsblakk : [approval-mozilla-aurora+](#a3347408_272375 "11 years ago")  lsblakk : [approval-mozilla-beta+](#a3347408_272375 "11 years ago")  praghunath : [approval-mozilla-b2g26+](#c11 "11 years ago") | [Details](/attachment.cgi?id=8351280&action=edit) | [Diff](/attachment.cgi?id=8351280&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=944851&attachment=8351280) |

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Jesse Ruderman](/user_profile?user_id=11608)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=944851#c0)• 11 years ago |
|  | |

Attached file
[testcase](attachment.cgi?id=8340595)
— [Details](attachment.cgi?id=8340595&action=edit)

Assertion failure: i < Length() (invalid array index), at nsTArray.h:887

|  | [Jesse Ruderman](/user_profile?user_id=11608)  Reporter |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=944851#c1)• 11 years ago |
|  | |

Attached file
[stack](attachment.cgi?id=8340596)
— [Details](attachment.cgi?id=8340596&action=edit)

|  | [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)  Assignee |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=944851#c2)• 11 years ago |
|  | |

This is an invalid read of an uninitialized AudioChunk from an nsAutoTArray in an AudioNodeStream. AudioChunk contains a ThreadSharedObject, which has virtual functions, but these are not executed, so I don't think arbitrary code execution is possible. However, the chunk contains uninitialized pointers to 512 block chunks of memory that could be read. It may be possible, though likely difficult, for content to influence those pointers.Assignee: nobody → karltKeywords: [sec-moderate](/buglist.cgi?keywords=sec-moderate&resolution=---)Priority: -- → P1

|  | [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)  Assignee |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=944851#c3)• 11 years ago |
|  | |

Attached file
[time-varying testcase](attachment.cgi?id=8351269)
— [Details](attachment.cgi?id=8351269&action=edit)

We shouldn't be locking to include data from the audio thread here, and trying
to use the current value from the audio thread will only introduce races. I
guess we could get the audio thread to send its latest value to the main
thread, but that is expensive - I don't want to do that.
This testcase demonstrates that Blink fails to even try to generate reasonable
results if anything is time-varying.
<http://src.chromium.org/viewvc/blink/trunk/Source/modules/webaudio/AudioParam.cpp?revision=159093#l116>
Gecko gives the expected result:
Defaults:
magnitude = 0.9565200209617615, phase = -1.5707964897155762
With parameter timeline:
magnitude = 0.9565200209617615, phase = -1.5707964897155762
Blink produces incorrect results, which may be dependent on uninitialized
values:
Defaults:
magnitude = 0.9565200209617615, phase = -1.5707964897155762
With parameter timeline:
magnitude = 0, phase = 0
Defaults:
magnitude = 0.9565200209617615, phase = -1.5707964897155762
With parameter timeline:
magnitude = 0, phase = -3.1415927410125732

|  | [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=944851#a2058880_274246)• 11 years ago |

Blocks: [893020](/show_bug.cgi?id=893020 "RESOLVED FIXED - Make AudioParam.value getter return a value based on the AudioContext.currentTime"), [866434](/show_bug.cgi?id=866434 "RESOLVED FIXED - Make it possible to connect an AudioNode to an AudioParam")

|  | [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)  Assignee |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=944851#c4)• 11 years ago |
|  | |

Attached patch

[don't consider AudioNode input when getting AudioParam values on the main thread](attachment.cgi?id=8351280&action=diff)
— [Details](attachment.cgi?id=8351280&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=944851&attachment=8351280)

[Attachment #8351280](/attachment.cgi?id=8351280&action=edit "don't consider AudioNode input when getting AudioParam values on the main thread") -
Flags: review?(ehsan)

|  | [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=944851#a2061954_274246)• 11 years ago |

[status-firefox26](/buglist.cgi?f1=cf_status_firefox26&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox26&o1=equals&v1=affected)
[status-firefox27](/buglist.cgi?f1=cf_status_firefox27&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=affected)
[status-firefox28](/buglist.cgi?f1=cf_status_firefox28&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=affected)
[status-firefox-esr24](/buglist.cgi?f1=cf_status_firefox_esr24&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=unaffected)
[tracking-firefox26](/buglist.cgi?f1=cf_tracking_firefox26&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox26&o1=equals&v1=%3F)
[tracking-firefox27](/buglist.cgi?f1=cf_tracking_firefox27&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox27&o1=equals&v1=%3F)
[tracking-firefox28](/buglist.cgi?f1=cf_tracking_firefox28&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox28&o1=equals&v1=%3F)

|  | [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=944851#a2061974_274246)• 11 years ago |

[tracking-firefox26](/buglist.cgi?f1=cf_tracking_firefox26&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox26&o1=equals&v1=%3F) → ---

|  | [(no longer active)](/user_profile?user_id=251051) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=944851#a2890597_251051)• 11 years ago |

[Attachment #8351280](/attachment.cgi?id=8351280&action=edit "don't consider AudioNode input when getting AudioParam values on the main thread") -
Flags: review?(ehsan) → review+

|  | [bhavana bajaj [:bajaj]](/user_profile?user_id=448925) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=944851#a3004294_448925)• 11 years ago |

[tracking-firefox27](/buglist.cgi?f1=cf_tracking_firefox27&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox27&o1=equals&v1=%3F) → [+](/buglist.cgi?f1=cf_tracking_firefox27&o1=equals&v1=%2B)
[tracking-firefox28](/buglist.cgi?f1=cf_tracking_firefox28&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox28&o1=equals&v1=%3F) → [+](/buglist.cgi?f1=cf_tracking_firefox28&o1=equals&v1=%2B)

|  | [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)  Assignee |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=944851#c5)• 11 years ago |
|  | |

<https://hg.mozilla.org/integration/mozilla-inbound/rev/f4da19ec3e3b>Flags: in-testsuite?

|  | [Ed Morley [:emorley]](/user_profile?user_id=373476) |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=944851#c6)• 11 years ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/f4da19ec3e3b>Status: NEW → RESOLVEDClosed: 11 years ago
[status-firefox29](/buglist.cgi?f1=cf_status_firefox29&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=fixed)Resolution: --- → FIXEDTarget Milestone: --- → mozilla29

|  | [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)  Assignee |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=944851#c7)• 11 years ago |
|  | |

Comment on [attachment 8351280](/attachment.cgi?id=8351280 "don't consider AudioNode input when getting AudioParam values on the main thread") [[details]](/attachment.cgi?id=8351280&action=edit "don't consider AudioNode input when getting AudioParam values on the main thread") [[diff]](/attachment.cgi?id=8351280&action=diff "don't consider AudioNode input when getting AudioParam values on the main thread") [[review]](/page.cgi?id=splinter.html&ignore=&bug=944851&attachment=8351280)
don't consider AudioNode input when getting AudioParam values on the main thread
[Approval Request Comment]
Bug caused by (feature/regressing bug #): [bug 866434](/show_bug.cgi?id=866434 "RESOLVED FIXED - Make it possible to connect an AudioNode to an AudioParam")
User impact if declined: moderate security risk
Testing completed (on m-c, etc.): on m-c.
Manually tested that the code behaves as expected.
Risk to taking this patch (and alternatives if risky):
Small. The common paths have no change in behavior. There is a behavior change in an unusual situation. I don't expect this to cause any problems because Chrome does not produce reasonable results in this situation.
String or IDL/UUID changes made by this patch: none.
[Attachment #8351280](/attachment.cgi?id=8351280&action=edit "don't consider AudioNode input when getting AudioParam values on the main thread") -
Flags: approval-mozilla-beta?
[Attachment #8351280](/attachment.cgi?id=8351280&action=edit "don't consider AudioNode input when getting AudioParam values on the main thread") -
Flags: approval-mozilla-aurora?

|  | [Lukas Blakk [:lsblakk] use ?needinfo](/user_profile?user_id=272375) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=944851#a3347408_272375)• 11 years ago |

[Attachment #8351280](/attachment.cgi?id=8351280&action=edit "don't consider AudioNode input when getting AudioParam values on the main thread") -
Flags: approval-mozilla-beta?
[Attachment #8351280](/attachment.cgi?id=8351280&action=edit "don't consider AudioNode input when getting AudioParam values on the main thread") -
Flags: approval-mozilla-beta+
[Attachment #8351280](/attachment.cgi?id=8351280&action=edit "don't consider AudioNode input when getting AudioParam values on the main thread") -
Flags: approval-mozilla-aurora?
[Attachment #8351280](/attachment.cgi?id=8351280&action=edit "don't consider AudioNode input when getting AudioParam values on the main thread") -
Flags: approval-mozilla-aurora+

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=944851#c8)• 11 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-aurora/rev/07df8373cf97>
<https://hg.mozilla.org/releases/mozilla-beta/rev/3d79e4c4b354>
Is this something we need on b2g26 (v1.2)?
[status-b2g18](/buglist.cgi?f1=cf_status_b2g18&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=unaffected)
[status-b2g-v1.1hd](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=equals&v1=unaffected)
[status-b2g-v1.2](/buglist.cgi?f1=cf_status_b2g_1_2&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=%3F)
[status-b2g-v1.3](/buglist.cgi?f1=cf_status_b2g_1_3&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=fixed)
[status-firefox26](/buglist.cgi?f1=cf_status_firefox26&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox26&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_firefox26&o1=equals&v1=wontfix)
[status-firefox27](/buglist.cgi?f1=cf_status_firefox27&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=fixed)
[status-firefox28](/buglist.cgi?f1=cf_status_firefox28&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=fixed)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=944851#a3407782_75935)• 11 years ago |

Flags: needinfo?(karlt)

|  | [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)  Assignee |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=944851#c9)• 11 years ago |
|  | |

Comment on [attachment 8351280](/attachment.cgi?id=8351280 "don't consider AudioNode input when getting AudioParam values on the main thread") [[details]](/attachment.cgi?id=8351280&action=edit "don't consider AudioNode input when getting AudioParam values on the main thread") [[diff]](/attachment.cgi?id=8351280&action=diff "don't consider AudioNode input when getting AudioParam values on the main thread") [[review]](/page.cgi?id=splinter.html&ignore=&bug=944851&attachment=8351280)
don't consider AudioNode input when getting AudioParam values on the main thread
Please see [comment 7](/show_bug.cgi?id=944851#c7 "RESOLVED FIXED - Array out-of-bounds [@ mozilla::dom::AudioParamTimeline::AudioNodeInputValue]").
(In reply to Ryan VanderMeulen [:RyanVM UTC-5] from [comment #8](/show_bug.cgi?id=944851#c8 "RESOLVED FIXED - Array out-of-bounds [@ mozilla::dom::AudioParamTimeline::AudioNodeInputValue]"))
> Is this something we need on b2g26 (v1.2)?
Yes, it is, thank you.
[Attachment #8351280](/attachment.cgi?id=8351280&action=edit "don't consider AudioNode input when getting AudioParam values on the main thread") -
Flags: approval-mozilla-b2g26?Flags: needinfo?(karlt)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=944851#a3919122_75935)• 11 years ago |

[status-b2g-v1.2](/buglist.cgi?f1=cf_status_b2g_1_2&o1=isnotempty):
[?](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=%3F) → [affected](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=affected)

|  | [Matt Wobensmith [:mwobensmith][:matt:]](/user_profile?user_id=452604) |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=944851#c10)• 11 years ago |
|  | |

Confirmed crash in FF27, 2013-11-22.
Verified fixed in FF27, FF28 and FF29, 2014-01-14.
[status-firefox27](/buglist.cgi?f1=cf_status_firefox27&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=verified)
[status-firefox28](/buglist.cgi?f1=cf_status_firefox28&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=verified)
[status-firefox29](/buglist.cgi?f1=cf_status_firefox29&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=verified)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=944851#a4633470_280903)• 11 years ago |

Whiteboard: [adv-main27+]

|  | [Preeti Raghunath(:Preeti)](/user_profile?user_id=474545) |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=944851#c11)• 11 years ago |
|  | |

Comment on [attachment 8351280](/attachment.cgi?id=8351280 "don't consider AudioNode input when getting AudioParam values on the main thread") [[details]](/attachment.cgi?id=8351280&action=edit "don't consider AudioNode input when getting AudioParam values on the main thread") [[diff]](/attachment.cgi?id=8351280&action=diff "don't consider AudioNode input when getting AudioParam values on the main thread") [[review]](/page.cgi?id=splinter.html&ignore=&bug=944851&attachment=8351280)
don't consider AudioNode input when getting AudioParam values on the main thread
plus on approval‑mozilla‑b2g26: for sec-moderate
[Attachment #8351280](/attachment.cgi?id=8351280&action=edit "don't consider AudioNode input when getting AudioParam values on the main thread") -
Flags: approval-mozilla-b2g26? → approval-mozilla-b2g26+

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=944851#c12)• 11 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-b2g26_v1_2/rev/86deef7b5eb7>
[status-b2g-v1.2](/buglist.cgi?f1=cf_status_b2g_1_2&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=fixed)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=944851#a13794577_75935)• 11 years ago |

[status-b2g-v1.3T](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=fixed)
[status-b2g-v1.4](/buglist.cgi?f1=cf_status_b2g_1_4&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=fixed)

|  | [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)  Assignee |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=944851#c13)• 10 years ago |
|  | |

<https://hg.mozilla.org/integration/mozilla-inbound/rev/bbd6da0400ff>Flags: in-testsuite? → in-testsuite+

|  | [Carsten Book [:Tomcat]](/user_profile?user_id=277293) |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=944851#c14)• 10 years ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/bbd6da0400ff>

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=944851#a39138370_1689)• 10 years ago |

Group: core-security
You need to [log in](/show_bug.cgi?id=944851&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Jesse Ruderman](/user_profile?user_id=11608)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from lists.opensuse.org_0a4bc2c6_20250124_230055.html ===


[![openSUSE](https://static.opensuse.org/favicon.svg)
Mailing Lists](/archives/ "openSUSE Mailing Lists")

[Sign In](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/EPI2ERPLPJ7GS6U34YK5AG6ZBJGWUWO5/)
[Sign Up](/accounts/signup/?next=/archives/list/security-announce%40lists.opensuse.org/message/EPI2ERPLPJ7GS6U34YK5AG6ZBJGWUWO5/)

[Manage this list](/manage/lists/security-announce.lists.opensuse.org/)
[Sign In](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/EPI2ERPLPJ7GS6U34YK5AG6ZBJGWUWO5/)
[Sign Up](/accounts/signup/?next=/archives/list/security-announce%40lists.opensuse.org/message/EPI2ERPLPJ7GS6U34YK5AG6ZBJGWUWO5/)

×
#### Keyboard Shortcuts

### Thread View

* `j`: Next unread message
* `k`: Previous unread message
* `j a`: Jump to all threads* `j l`: Jump to MailingList overview

[thread](/archives/list/security-announce%40lists.opensuse.org/thread/EPI2ERPLPJ7GS6U34YK5AG6ZBJGWUWO5/#EPI2ERPLPJ7GS6U34YK5AG6ZBJGWUWO5)

# [security-announce] openSUSE-SU-2014:0213-1: important: Mozilla updates February 2014

![](https://seccdn.libravatar.org/avatar/099a17325bdf082b643d1a6bbacde279.jpg?s=120&d=mm&r=g)
## [opensuse-security＠opensuse.org](/archives/users/1b72def497ef4503896cd7a5fe9fb8e0/ "See the profile for opensuse-security＠opensuse.org")

8 Feb
2014

8 Feb
'14

12:04

openSUSE Security Update: Mozilla updates February 2014
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
Announcement ID: openSUSE-SU-2014:0213-1
Rating: important
References: #861847
Cross-References: CVE-2013-1740 CVE-2014-1477 CVE-2014-1478
CVE-2014-1479 CVE-2014-1481 CVE-2014-1482
CVE-2014-1486 CVE-2014-1487 CVE-2014-1490
CVE-2014-1491
Affected Products:
openSUSE 11.4
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
An update that fixes 10 vulnerabilities is now available.
Description:
Updates for mozilla-nss (3.15.4) MozillaFirefox (24.3.0esr)
MozillaThunderbird (24.3.0) including fixes for the
following issues:
\* MFSA 2014-01/CVE-2014-1477/CVE-2014-1478 Miscellaneous
memory safety hazards (rv:27.0 / rv:24.3)
\* MFSA 2014-02/CVE-2014-1479 (bmo#911864) Clone protected
content with XBL scopes
\* MFSA 2014-04/CVE-2014-1482 (bmo#943803) Incorrect use
of discarded images by RasterImage
\* MFSA 2014-08/CVE-2014-1486 (bmo#942164) Use-after-free
with imgRequestProxy and image proccessing
\* MFSA 2014-09/CVE-2014-1487 (bmo#947592) Cross-origin
information leak through web workers
\* MFSA 2014-12/CVE-2014-1490/CVE-2014-1491 (bmo#934545,
bmo#930874, bmo#930857) NSS ticket handling issues
\* MFSA 2014-13/CVE-2014-1481(bmo#936056) Inconsistent
JavaScript handling of access to Window objects
Patch Instructions:
To install this openSUSE Security Update use YaST online\_update.
Alternatively you can run the command listed for your product:
- openSUSE 11.4:
zypper in -t patch 2014-16
To bring your system up-to-date, use "zypper patch".
Package List:
- openSUSE 11.4 (i586 x86\_64):
MozillaFirefox-24.3.0-99.1
MozillaFirefox-branding-upstream-24.3.0-99.1
MozillaFirefox-buildsymbols-24.3.0-99.1
MozillaFirefox-debuginfo-24.3.0-99.1
MozillaFirefox-debugsource-24.3.0-99.1
MozillaFirefox-devel-24.3.0-99.1
MozillaFirefox-translations-common-24.3.0-99.1
MozillaFirefox-translations-other-24.3.0-99.1
MozillaThunderbird-24.3.0-85.1
MozillaThunderbird-buildsymbols-24.3.0-85.1
MozillaThunderbird-debuginfo-24.3.0-85.1
MozillaThunderbird-debugsource-24.3.0-85.1
MozillaThunderbird-devel-24.3.0-85.1
MozillaThunderbird-translations-common-24.3.0-85.1
MozillaThunderbird-translations-other-24.3.0-85.1
enigmail-1.6.0+24.3.0-85.1
libfreebl3-3.15.4-78.1
libfreebl3-debuginfo-3.15.4-78.1
libsoftokn3-3.15.4-78.1
libsoftokn3-debuginfo-3.15.4-78.1
mozilla-nss-3.15.4-78.1
mozilla-nss-certs-3.15.4-78.1
mozilla-nss-certs-debuginfo-3.15.4-78.1
mozilla-nss-debuginfo-3.15.4-78.1
mozilla-nss-debugsource-3.15.4-78.1
mozilla-nss-devel-3.15.4-78.1
mozilla-nss-sysinit-3.15.4-78.1
mozilla-nss-sysinit-debuginfo-3.15.4-78.1
mozilla-nss-tools-3.15.4-78.1
mozilla-nss-tools-debuginfo-3.15.4-78.1
- openSUSE 11.4 (x86\_64):
libfreebl3-32bit-3.15.4-78.1
libfreebl3-debuginfo-32bit-3.15.4-78.1
libsoftokn3-32bit-3.15.4-78.1
libsoftokn3-debuginfo-32bit-3.15.4-78.1
mozilla-nss-32bit-3.15.4-78.1
mozilla-nss-certs-32bit-3.15.4-78.1
mozilla-nss-certs-debuginfo-32bit-3.15.4-78.1
mozilla-nss-debuginfo-32bit-3.15.4-78.1
mozilla-nss-sysinit-32bit-3.15.4-78.1
mozilla-nss-sysinit-debuginfo-32bit-3.15.4-78.1
- openSUSE 11.4 (ia64):
libfreebl3-debuginfo-x86-3.15.4-78.1
libfreebl3-x86-3.15.4-78.1
libsoftokn3-debuginfo-x86-3.15.4-78.1
libsoftokn3-x86-3.15.4-78.1
mozilla-nss-certs-debuginfo-x86-3.15.4-78.1
mozilla-nss-certs-x86-3.15.4-78.1
mozilla-nss-debuginfo-x86-3.15.4-78.1
mozilla-nss-sysinit-debuginfo-x86-3.15.4-78.1
mozilla-nss-sysinit-x86-3.15.4-78.1
mozilla-nss-x86-3.15.4-78.1
References:
<http://support.novell.com/security/cve/CVE-2013-1740.html>
<http://support.novell.com/security/cve/CVE-2014-1477.html>
<http://support.novell.com/security/cve/CVE-2014-1478.html>
<http://support.novell.com/security/cve/CVE-2014-1479.html>
<http://support.novell.com/security/cve/CVE-2014-1481.html>
<http://support.novell.com/security/cve/CVE-2014-1482.html>
<http://support.novell.com/security/cve/CVE-2014-1486.html>
<http://support.novell.com/security/cve/CVE-2014-1487.html>
<http://support.novell.com/security/cve/CVE-2014-1490.html>
<http://support.novell.com/security/cve/CVE-2014-1491.html>
<https://bugzilla.novell.com/861847>
--
To unsubscribe, e-mail: opensuse-security-announce+unsubscribe@opensuse.org
For additional commands, e-mail: opensuse-security-announce+help@opensuse.org

[0](#like "You must be logged-in to vote.")
[0](#dislike "You must be logged-in to vote.")

Reply

[Sign in to reply online](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/EPI2ERPLPJ7GS6U34YK5AG6ZBJGWUWO5/)
Use email software

[Back to the thread](/archives/list/security-announce%40lists.opensuse.org/thread/EPI2ERPLPJ7GS6U34YK5AG6ZBJGWUWO5/#EPI2ERPLPJ7GS6U34YK5AG6ZBJGWUWO5)

[Back to the list](/archives/list/security-announce%40lists.opensuse.org/)

![HyperKitty](/static/hyperkitty/img/logo.png)
Powered by [HyperKitty](http://hyperkitty.readthedocs.org) version 1.3.12.



=== Content from bugzilla.mozilla.org_a991347a_20250124_230135.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/942152)
* [XML](/show_bug.cgi?ctype=xml&id=942152)

Closed
[Bug 942152](/show_bug.cgi?id=942152)

Opened 11 years ago
Closed 11 years ago

# Assertion failure: ss->ssl3.hs.hashType == handshake\_hash\_unknown

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

Assertion failure: ss->ssl3.hs.hashType == handshake\_hash\_unknown

## Categories

### (Core :: Security: PSM, defect, P1)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=Security%3A%20PSM#Security%3A%20PSM)

Security: PSM
▾

Core :: Security: PSM
The TLS configuration layer between Gecko and NSS. Handles certificate discovery, verification, and revocation checking.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=Security%3A%20PSM&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=Security%3A%20PSM&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=Security%3A%20PSM)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

All

All

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

P1

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

blocker

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla28

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Webcompat Priority | --- |
| --- | --- |
| Webcompat Score | --- |
| Performance Impact | --- |
| a11y-review | --- |
| Accessibility Severity | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox25 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox25&o1=equals&v1=wontfix) |
| firefox26 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox26&o1=equals&v1=wontfix) |
| firefox27 | [+](/buglist.cgi?f1=cf_tracking_firefox27&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=fixed) |
| firefox28 | [+](/buglist.cgi?f1=cf_tracking_firefox28&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=fixed) |
| firefox-esr17 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=wontfix) |
| firefox-esr24 | [28+](/buglist.cgi?f1=cf_tracking_firefox_esr24&o1=equals&v1=28%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=fixed) |
| b2g18 | [?](/buglist.cgi?f1=cf_tracking_b2g18&o1=equals&v1=%3F) | [fixed](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=fixed) |
| b2g-v1.1hd | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=equals&v1=fixed) |
| b2g-v1.2 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=fixed) |
| b2g-v1.3 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=fixed) |
| b2g-v1.3T | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=fixed) |
| b2g-v1.4 | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=unaffected) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox25 |  | wontfix |
| firefox26 |  | wontfix |
| firefox27 | + | fixed |
| firefox28 | + | fixed |
| firefox-esr17 |  | wontfix |
| firefox-esr24 | 28+ | fixed |
| b2g18 | ? | fixed |
| b2g-v1.1hd |  | fixed |
| b2g-v1.2 |  | fixed |
| b2g-v1.3 |  | fixed |
| b2g-v1.3T |  | fixed |
| b2g-v1.4 |  | unaffected |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: cbook, Assigned: briansmith)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/708ad4f6494aae9c1711a823f447d415?d=mm&size=40)  [briansmith](/user_profile?user_id=14661)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/8378311bf1bd5e9eddc7896a07688876?d=mm&size=40)  [cbook](/user_profile?user_id=277293)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](extensions/Gravatar/web/default.jpg)  [keeler](/user_profile?user_id=349244)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

15 people

## References

### ( [URL](https://avukat.uyap.gov.tr/portal_baslangic.uyap "https://avukat.uyap.gov.tr/portal_baslangic.uyap") )

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

[480514](/show_bug.cgi?id=480514 "RESOLVED FIXED - Implement TLS 1.2 (RFC 5246)")

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

---

Dependency [tree](/showdependencytree.cgi?id=942152&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=942152)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[avukat.uyap.gov.tr/portal\_baslangic.uyap](https://avukat.uyap.gov.tr/portal_baslangic.uyap "https://avukat.uyap.gov.tr/portal_baslangic.uyap")

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Keywords: assertion, regression, sec-critical, Whiteboard: [adv-main27+][adv-esr24.4+][qa-])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[assertion](/buglist.cgi?keywords=assertion&resolution=---),
[regression](/buglist.cgi?keywords=regression&resolution=---),
[sec-critical](/buglist.cgi?keywords=sec-critical&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[adv-main27+][adv-esr24.4+][qa-]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [cbook](/user_profile?user_id=277293) | [in-testsuite](#c29 "11 years ago") | ? |
| --- | --- | --- |
| [cbook](/user_profile?user_id=277293) | in-testsuite | ? |
| --- | --- | --- |
|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (3 files, 1 obsolete file)

| [windows stack](/attachment.cgi?id=8336802)  [11 years ago](#c1)  [Carsten Book [:Tomcat]](/user_profile?user_id=277293)   64.53 KB, text/plain |  | [Details](/attachment.cgi?id=8336802&action=edit) |
| --- | --- | --- |
| [prevent-bad-things-from-happening-for-tls-intolerance.patch](/attachment.cgi?id=8342268)  [11 years ago](#c21)  [Brian Smith (:briansmith, :bsmith, use NEEDINFO?)](/user_profile?user_id=14661)   2.11 KB, patch | keeler : [review+](#c22 "11 years ago")  mayhemer : [review+](#c24 "11 years ago") | [Details](/attachment.cgi?id=8342268&action=edit) | [Diff](/attachment.cgi?id=8342268&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=942152&attachment=8342268) |
| [Patch v2, which fixes the vague comment](/attachment.cgi?id=8343641)  [11 years ago](#c26)  [Brian Smith (:briansmith, :bsmith, use NEEDINFO?)](/user_profile?user_id=14661)   2.26 KB, patch | briansmith : [review+](#c26 "11 years ago")  lsblakk : [approval-mozilla-beta+](#c34 "11 years ago")  lsblakk : [approval-mozilla-esr24-](#c37 "11 years ago")  abillings : [sec-approval+](#c27 "11 years ago") | [Details](/attachment.cgi?id=8343641&action=edit) | [Diff](/attachment.cgi?id=8343641&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=942152&attachment=8343641) |
| [esr24-with-extra-logic](/attachment.cgi?id=8373493)  [11 years ago](#c41)  [Camilo Viecco (:cviecco)](/user_profile?user_id=433899)   3.60 KB, patch | mayhemer : [review+](#c43 "11 years ago")  Sylvestre : [approval-mozilla-esr24+](#a7090202_495955 "11 years ago") | [Details](/attachment.cgi?id=8373493&action=edit) | [Diff](/attachment.cgi?id=8373493&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=942152&attachment=8373493) |

Show Obsolete

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Carsten Book [:Tomcat]](/user_profile?user_id=277293)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=942152#c0)• 11 years ago |
|  | |

Loading <https://avukat.uyap.gov.tr/portal_baslangic.uyap> with a debug build tested on win7 crashes on load with Assertion failure: ss->ssl3.hs.hashType == handshake\_hash\_unknown
will try to get a testcase etc for this - also according to bughunter it also crashes nightly and aurora builds

|  | [Carsten Book [:Tomcat]](/user_profile?user_id=277293)  Reporter |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=942152#c1)• 11 years ago |
|  | |

Attached file
[windows stack](attachment.cgi?id=8336802)
— [Details](attachment.cgi?id=8336802&action=edit)

|  | [Kai Engert [:KaiE:]](/user_profile?user_id=36541) |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=942152#c2)• 11 years ago |
|  | |

Brian, Wan-Teh, looks like this is a regression caused by NSS 3.15.4 beta.
The crash happens only on the branches where this beta is currently being used.Flags: needinfo?(brian)

|  | [Kai Engert [:KaiE:]](/user_profile?user_id=36541) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=942152#a241_36541)• 11 years ago |

Assignee: nobody → brian

|  | [Kai Engert [:KaiE:]](/user_profile?user_id=36541) |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=942152#c3)• 11 years ago |
|  | |

Upgrading to blocker, because we are intending to release NSS within the next few days.Severity: normal → blockerComponent: Security → LibrariesProduct: Core → NSSVersion: Trunk → 3.15.4

|  | [Kai Engert [:KaiE:]](/user_profile?user_id=36541) |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=942152#c4)• 11 years ago |
|  | |

Tomcat:
Did this happen once? Or multiple times?
Are you able to reproduce?
Using the latest NSS version (used by mozilla-central+aurora) and command line tools to connect to this server: no problem

|  | [Kai Engert [:KaiE:]](/user_profile?user_id=36541) |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=942152#c5)• 11 years ago |
|  | |

I was able to reproduce on Linux/mozilla-inbound.
(gdb) print ss->ssl3.hs.hashType
$1 = handshake\_hash\_combo
#7 0x00007fabe3cc383f in PR\_Assert (s=0x7fabe2c957d8 "ss->ssl3.hs.hashType == handshake\_hash\_unknown", file=0x7fabe2c93c20 "ssl3con.c", ln=3823) at /pd/moz/inbound/mozilla/nsprpub/pr/src/io/prlog.c:554
#8 0x00007fabe2c5f84b in ssl3\_InitHandshakeHashes (ss=0x7fabaf922000) at ssl3con.c:3823
#9 0x00007fabe2c64309 in ssl3\_HandleServerHello (ss=0x7fabaf922000,
b=0x7fabb1ef3006 "\203N\345D\265\363\226&\031-\353z\266&f\025{\200\036\244ý\370\203\360\241|J\276\315\027\t W)D\017O\253\376\254\335\352\375\226\002\216[k\002E\030\003", length=68) at ssl3con.c:6171
#10 0x00007fabe2c6de66 in ssl3\_HandleHandshakeMessage (ss=0x7fabaf922000,
b=0x7fabb1ef3004 "\003\001\203N\345D\265\363\226&\031-\353z\266&f\025{\200\036\244ý\370\203\360\241|J\276\315\027\t W)D\017O\253\376\254\335\352\375\226\002\216[k\002E\030\003", length=70) at ssl3con.c:10670
#11 0x00007fabe2c6e43f in ssl3\_HandleHandshake (ss=0x7fabaf922000, origBuf=0x7fabaf9223b0) at ssl3con.c:10814
#12 0x00007fabe2c6fac0 in ssl3\_HandleRecord (ss=0x7fabaf922000, cText=0x0, databuf=0x7fabaf9223b0) at ssl3con.c:11483
#13 0x00007fabe2c712a2 in ssl3\_GatherCompleteHandshake (ss=0x7fabaf922000, flags=0) at ssl3gthr.c:325
#14 0x00007fabe2c744d7 in ssl\_GatherRecord1stHandshake (ss=0x7fabaf922000) at sslcon.c:1225
#15 0x00007fabe2c80f6a in ssl\_Do1stHandshake (ss=0x7fabaf922000) at sslsecur.c:109
#16 0x00007fabe2c83907 in ssl\_SecureRecv (ss=0x7fabaf922000, buf=0x7fabc5bfdb30 "", len=4000, flags=0) at sslsecur.c:1213
#17 0x00007fabe2c8d37c in ssl\_Recv (fd=0x7fabc1d6f1c0, buf=0x7fabc5bfdb30, len=4000, flags=0, timeout=4294967295) at sslsock.c:2038
...
...PSM and gecko callers...

|  | [Kai Engert [:KaiE:]](/user_profile?user_id=36541) |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=942152#c6)• 11 years ago |
|  | |

The asserting code was introduced in [bug 480514](/show_bug.cgi?id=480514 "RESOLVED FIXED - Implement TLS 1.2 (RFC 5246)") (implement TLS 1.2).Depends on: [480514](/show_bug.cgi?id=480514 "RESOLVED FIXED - Implement TLS 1.2 (RFC 5246)")

|  | [Adam Langley](/user_profile?user_id=345904) |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=942152#c7)• 11 years ago |
|  | |

I cannot reproduce in Chromium I'm afraid.

|  | [Bob Clary [:bc] (inactive)](/user_profile?user_id=23402) |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=942152#c8)• 11 years ago |
|  | |

fyi, this has occurred a total of 13 times in the past week counting the occurrences on Linux, OSX, Windows on Aurora and Nightly.

|  | [Kai Engert [:KaiE:]](/user_profile?user_id=36541) |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=942152#c9)• 11 years ago |
|  | |

(In reply to Adam Langley from [comment #7](/show_bug.cgi?id=942152#c7 "RESOLVED FIXED - Assertion failure: ss->ssl3.hs.hashType == handshake_hash_unknown"))
> I cannot reproduce in Chromium I'm afraid.
This is happening with NSS\_3\_15\_4\_BETA3, which has false start code.
Could that new code cause old assumptions to be false?

|  | [Kai Engert [:KaiE:]](/user_profile?user_id=36541) |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=942152#c10)• 11 years ago |
|  | |

This code sets handshake\_hash\_combo, while WRITING data:
Breakpoint 8, ssl3\_InitHandshakeHashes (ss=0x7fffc7322000) at ssl3con.c:3903
3903 ss->ssl3.hs.hashType = handshake\_hash\_combo;
(gdb) print ss->version
$31 = 769
(gdb) bt
#0 ssl3\_InitHandshakeHashes (ss=0x7fffc7322000) at ssl3con.c:3903
#1 0x00007ffff5964309 in ssl3\_HandleServerHello (ss=0x7fffc7322000, b=0x7fffc289c006 "\203\277\022$\365<\315~\"\_\330\302\064\261\371\371\204\253G>\352\"\236", <incomplete sequence \351>, length=68) at ssl3con.c:6171
#2 0x00007ffff596de66 in ssl3\_HandleHandshakeMessage (ss=0x7fffc7322000, b=0x7fffc289c004 "\003\001\203\277\022$\365<\315~\"\_\330\302\064\261\371\371\204\253G>\352\"\236", <incomplete sequence \351>, length=70) at ssl3con.c:10670
#3 0x00007ffff596e43f in ssl3\_HandleHandshake (ss=0x7fffc7322000, origBuf=0x7fffc73223b0) at ssl3con.c:10814
#4 0x00007ffff596fac0 in ssl3\_HandleRecord (ss=0x7fffc7322000, cText=0x7fffd88fe7b0, databuf=0x7fffc73223b0) at ssl3con.c:11483
#5 0x00007ffff59714a9 in ssl3\_GatherCompleteHandshake (ss=0x7fffc7322000, flags=0) at ssl3gthr.c:372
#6 0x00007ffff59744d7 in ssl\_GatherRecord1stHandshake (ss=0x7fffc7322000) at sslcon.c:1225
#7 0x00007ffff5980f6a in ssl\_Do1stHandshake (ss=0x7fffc7322000) at sslsecur.c:109
#8 0x00007ffff5983cd3 in ssl\_SecureSend (ss=0x7fffc7322000, buf=0x7ffff2dda6df "", len=0, flags=0) at sslsecur.c:1284
#9 0x00007ffff598d474 in ssl\_Send (fd=0x7fffd4e67f70, buf=0x7ffff2dda6df, len=0, flags=0, timeout=4294967295) at sslsock.c:2059
#10 0x00007ffff1a14215 in PSMSend (fd=0x7fffc8602130, buf=0x7ffff2dda6df, amount=0, flags=0, timeout=4294967295) at /pd/moz/inbound/mozilla/security/manager/ssl/src/nsNSSIOLayer.cpp:1269
#11 0x00007ffff1a142d4 in nsSSLIOLayerWrite (fd=0x7fffc8602130, buf=0x7ffff2dda6df, amount=0) at /pd/moz/inbound/mozilla/security/manager/ssl/src/nsNSSIOLayer.cpp:1286
#12 0x00007ffff69bf630 in PR\_Write (fd=0x7fffc8602130, buf=0x7ffff2dda6df, amount=0) at /pd/moz/inbound/mozilla/nsprpub/pr/src/io/priometh.c:114
Shortly afterwards, while READING data:
Assertion failure: ss->ssl3.hs.hashType == handshake\_hash\_unknown, at ssl3con.c:3823
Program received signal SIGABRT, Aborted.
0x00007ffff6e149e9 in raise () from /lib64/libc.so.6
(gdb) bt
#0 0x00007ffff6e149e9 in raise () from /lib64/libc.so.6
#1 0x00007ffff6e160f8 in abort () from /lib64/libc.so.6
#2 0x00007ffff69c383f in PR\_Assert (s=0x7ffff59957d8 "ss->ssl3.hs.hashType == handshake\_hash\_unknown", file=0x7ffff5993c20 "ssl3con.c", ln=3823) at /pd/moz/inbound/mozilla/nsprpub/pr/src/io/prlog.c:554
#3 0x00007ffff595f84b in ssl3\_InitHandshakeHashes (ss=0x7fffc7322000) at ssl3con.c:3823
#4 0x00007ffff5964309 in ssl3\_HandleServerHello (ss=0x7fffc7322000, b=0x7fffc289c006 "\203\277\022$\365<\315~\"\_\330\302\064\261\371\371\204\253G>\352\"\236", <incomplete sequence \351>, length=68) at ssl3con.c:6171
#5 0x00007ffff596de66 in ssl3\_HandleHandshakeMessage (ss=0x7fffc7322000, b=0x7fffc289c004 "\003\001\203\277\022$\365<\315~\"\_\330\302\064\261\371\371\204\253G>\352\"\236", <incomplete sequence \351>, length=70) at ssl3con.c:10670
#6 0x00007ffff596e43f in ssl3\_HandleHandshake (ss=0x7fffc7322000, origBuf=0x7fffc73223b0) at ssl3con.c:10814
#7 0x00007ffff596fac0 in ssl3\_HandleRecord (ss=0x7fffc7322000, cText=0x0, databuf=0x7fffc73223b0) at ssl3con.c:11483
#8 0x00007ffff59712a2 in ssl3\_GatherCompleteHandshake (ss=0x7fffc7322000, flags=0) at ssl3gthr.c:325
#9 0x00007ffff59744d7 in ssl\_GatherRecord1stHandshake (ss=0x7fffc7322000) at sslcon.c:1225
#10 0x00007ffff5980f6a in ssl\_Do1stHandshake (ss=0x7fffc7322000) at sslsecur.c:109
#11 0x00007ffff5983907 in ssl\_SecureRecv (ss=0x7fffc7322000, buf=0x7fffd88fdb30 "", len=4000, flags=0) at sslsecur.c:1213
#12 0x00007ffff598d37c in ssl\_Recv (fd=0x7fffd4e67f70, buf=0x7fffd88fdb30, len=4000, flags=0, timeout=4294967295) at sslsock.c:2038
#13 0x00007ffff1a14123 in PSMRecv (fd=0x7fffc8602130, buf=0x7fffd88fdb30, amount=4000, flags=0, timeout=4294967295) at /pd/moz/inbound/mozilla/security/manager/ssl/src/nsNSSIOLayer.cpp:1240
#14 0x00007ffff1a142a1 in nsSSLIOLayerRead (fd=0x7fffc8602130, buf=0x7fffd88fdb30, amount=4000) at /pd/moz/inbound/mozilla/security/manager/ssl/src/nsNSSIOLayer.cpp:1280
#15 0x00007ffff69bf600 in PR\_Read (fd=0x7fffc8602130, buf=0x7fffd88fdb30, amount=4000) at /pd/moz/inbound/mozilla/nsprpub/pr/src/io/priometh.c:109

|  | [Adam Langley](/user_profile?user_id=345904) |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=942152#c11)• 11 years ago |
|  | |

From the above, ssl3\_HandleServerHello is happening twice for the same |ss|. This could be a renegotiation, but I don't see an obvious bug in the code for that case: ssl3\_SendClientHello calls ssl3\_RestartHandshakeHashes which resets the state, including hashType.

|  | [Brian Smith (:briansmith, :bsmith, use NEEDINFO?)](/user_profile?user_id=14661)  Assignee |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=942152#c12)• 11 years ago |
|  | |

The problem seems to have to deal with the handleRecordNow logic in ssl3\_GatherCompleteHandshake. I am investigating it now.Flags: needinfo?(brian)

|  | [Wan-Teh Chang](/user_profile?user_id=1584) |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=942152#c13)• 11 years ago |
|  | |

Brian: I agree. I suspect the same ServerHello message was handled twice.
In the call stack containing the second ssl3\_HandleServerHello call,
ssl3\_GatherCompleteHandshake passes a NULL cText to ssl3\_HandleRecord.Priority: -- → P1Target Milestone: --- → 3.15.4

|  | [Brian Smith (:briansmith, :bsmith, use NEEDINFO?)](/user_profile?user_id=14661)  Assignee |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=942152#c14)• 11 years ago |
|  | |

I believe this is due to mis-use of NSS by Gecko.
nsSocketTransport::IsAlive is calling PR\_Recv(fd, &c, 1, PR\_MSG\_PEEK, 0) on the SSL socket. This causes us to drive the handshake forward. This causes us to process the ServerHello, and ssl3\_HandleServerHello fails.
Later, we'll try to PR\_Read the socket again to actually get application data out of it. This will cause us to try to drive the handshake forward again. ssl3\_GatherCompleteHandshake will see the data from the ServerHello in the buffer, and that triggers the handleRecordNow.
The bug is in the application, because once an I/O operation (SSL\_ForceHandshake/PR\_Write/PR\_Recv/etc.) fails, then you are not allowed to attempt any more I/O operations on the socket.
Now I need to figure out why we regressed this.
nss3.dll!ssl3\_HandleServerHello
nss3.dll!ssl3\_HandleHandshakeMessage
nss3.dll!ssl3\_HandleHandshake
nss3.dll!ssl3\_HandleRecord
nss3.dll!ssl3\_GatherCompleteHandshake
nss3.dll!ssl\_GatherRecord1stHandshake
nss3.dll!ssl\_Do1stHandshake
nss3.dll!ssl\_SecureRecv
nss3.dll!ssl\_Recv
xul.dll!PSMRecv
xul.dll!nsSSLIOLayerRead
nss3.dll!PR\_Read
> xul.dll!nsSocketInputStream::Read
xul.dll!nsHttpConnection::Close
xul.dll!nsHttpConnectionMgr::OnMsgReclaimConnection
xul.dll!nsHttpConnectionMgr::nsHalfOpenSocket::OnOutputStreamReady
xul.dll!nsSocketOutputStream::OnSocketReady
xul.dll!nsSocketTransport::OnSocketReady
xul.dll!nsSocketTransportService::DoPollIteration

|  | [Brian Smith (:briansmith, :bsmith, use NEEDINFO?)](/user_profile?user_id=14661)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=942152#a301828_14661)• 11 years ago |

Whiteboard: [needs security rating]

|  | [Brian Smith (:briansmith, :bsmith, use NEEDINFO?)](/user_profile?user_id=14661)  Assignee |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=942152#c15)• 11 years ago |
|  | |

I have narrowed down the regression range so far:
<http://hg.mozilla.org/integration/mozilla-inbound/pushloghtml?fromchange=99084b22e38d&tochange=59f6274ce8f1>
These ones seem most likely:
78fd5daacc01 Brian Smith — [Bug 901718](/show_bug.cgi?id=901718 "RESOLVED FIXED - Remove TLS intolerance fallback from TLS 1.0 -> SSL 3.0 for connection resets"), Part 2: fix comment, r=me
e24e7d00b56d Brian Smith — [Bug 934663](/show_bug.cgi?id=934663 "VERIFIED FIXED - Change set of cipher suites enabled by default in Gecko to match cipher suite proposal") followup: fix unused variable warning, r=me
a8f5e75b8ed8 Brian Smith — [Bug 901718](/show_bug.cgi?id=901718 "RESOLVED FIXED - Remove TLS intolerance fallback from TLS 1.0 -> SSL 3.0 for connection resets"): Remove TLS intolerance fallback from TLS 1.0 to SSL 3.0 for connection resets, r=honzab
35c1e12a0772 Brian Smith — [Bug 898431](/show_bug.cgi?id=898431 "RESOLVED FIXED - Update Mozilla to use NSS that support false start and OCSP GET (likely 3.15.4) (once it's ready)"): Update to NSS 3.15.4 beta 3 (NSS\_3\_15\_4\_BETA3), r=me
cb06029a7f43 Brian Smith — [Bug 937984](/show_bug.cgi?id=937984 "RESOLVED FIXED - Allow client.py to pull NSPR and/or NSS from a user-specified repo"): Allow client.py to pull NSPR and NSS from a user-specified repo, r=kaie
53dffb3da446 Brian Smith — [Bug 707275](/show_bug.cgi?id=707275 "RESOLVED FIXED - Implement SSL certificate, cipher suite, and version negotiation telemetry"), Part 2: Add telemetry for cipher suites and key sizes, r=keeler
2f3ce72ec2d8 Brian Smith — [Bug 707275](/show_bug.cgi?id=707275 "RESOLVED FIXED - Implement SSL certificate, cipher suite, and version negotiation telemetry"), Part 1: Add telemetry for TLS intolerance, r=keeler

|  | [Brian Smith (:briansmith, :bsmith, use NEEDINFO?)](/user_profile?user_id=14661)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=942152#a398139_14661)• 11 years ago |

Keywords: [regression](/buglist.cgi?keywords=regression&resolution=---)

|  | [Brian Smith (:briansmith, :bsmith, use NEEDINFO?)](/user_profile?user_id=14661)  Assignee |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=942152#c16)• 11 years ago |
|  | |

hg bisected and found that the NSS update is what caused the regression:
> 35c1e12a0772 Brian Smith — [Bug 898431](/show_bug.cgi?id=898431 "RESOLVED FIXED - Update Mozilla to use NSS that support false start and OCSP GET (likely 3.15.4) (once it's ready)"): Update to NSS 3.15.4 beta 3
> (NSS\_3\_15\_4\_BETA3), r=me
Will bisect the NSS update now.

|  | [Brian Smith (:briansmith, :bsmith, use NEEDINFO?)](/user_profile?user_id=14661)  Assignee |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=942152#c17)• 11 years ago |
|  | |

I traced the regression to:
changeset: 10951:968dc8105c00
user: Brian Smith <brian@briansmith.org>
date: Mon Nov 04 18:30:57 2013 -0800
summary: [Bug 936828](/show_bug.cgi?id=936828 "RESOLVED FIXED - Change order of cipher suites offered in client hello to match modern best practices"): Change order of cipher suites offered in client hello ...

|  | [Brian Smith (:briansmith, :bsmith, use NEEDINFO?)](/user_profile?user_id=14661)  Assignee |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=942152#c18)• 11 years ago |
|  | |

With the new cipher suite order, Wireshark shows that the server chooses:
Cipher Suite: TLS\_RSA\_WITH\_DES\_CBC\_SHA (0x0009)
With the old cipher suite order, Wireshark shows that the server chooses:
Cipher Suite: TLS\_RSA\_WITH\_3DES\_EDE\_CBC\_SHA (0x000a)
Note that Firefox doesn't enable TLS\_RSA\_WITH\_DES\_CBC\_SHA, so ssl3\_HandleServerHello fails, since the server never should have selected that one. So, this is an example of a cipher-suite-order-intolerant server.
However, due to some \*other\* problem (probably in Gecko), we end up processing the ServerHello twice. I suspect that is a regression in one of the other changesets mentioned in [comment 15](/show_bug.cgi?id=942152#c15 "RESOLVED FIXED - Assertion failure: ss->ssl3.hs.hashType == handshake_hash_unknown"). I will reorder the changesets and find out which one caused the trouble.
tl;dr: There are two bugs: a compatibility issue with the cipher suite order change, and a more severe bug about processing the ServerHello twice when the ssl3\_HandleServerHello fails.
[status-firefox27](/buglist.cgi?f1=cf_status_firefox27&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=affected)
[status-firefox28](/buglist.cgi?f1=cf_status_firefox28&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=affected)
[tracking-firefox27](/buglist.cgi?f1=cf_tracking_firefox27&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox27&o1=equals&v1=%3F)
[tracking-firefox28](/buglist.cgi?f1=cf_tracking_firefox28&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox28&o1=equals&v1=%3F)

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=942152#c19)• 11 years ago |
|  | |

Maybe Dan has some idea about a sec rating here.Flags: needinfo?(dveditz)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=942152#c20)• 11 years ago |
|  | |

In an optimized build I don't see any obvious issues, but I don't know if that's because the behavior is different or if the asserted condition is simply handled safely. The site ends up negotiating SSL\_RSA\_WITH\_3DES\_EDE\_CBC\_SHA in my Nightly build despite the oddness Brian saw from the site in [comment 18](/show_bug.cgi?id=942152#c18 "RESOLVED FIXED - Assertion failure: ss->ssl3.hs.hashType == handshake_hash_unknown") so maybe there was a fallback or retry.
(In reply to Andrew McCreight [:mccr8] from [comment #19](/show_bug.cgi?id=942152#c19 "RESOLVED FIXED - Assertion failure: ss->ssl3.hs.hashType == handshake_hash_unknown"))
> Maybe Dan has some idea about a sec rating here.
Not really. If we're handling the asserted condition safely (I don't know if we are or if we're just getting lucky) then there may be no security problem at all.Flags: needinfo?(dveditz)

|  | [Brian Smith (:briansmith, :bsmith, use NEEDINFO?)](/user_profile?user_id=14661)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=942152#a1018924_14661)• 11 years ago |

Component: Libraries → Security: PSMProduct: NSS → CoreTarget Milestone: 3.15.4 → mozilla28Version: 3.15.4 → Trunk

|  | [Brian Smith (:briansmith, :bsmith, use NEEDINFO?)](/user_profile?user_id=14661)  Assignee |  |
| --- | --- | --- |
| [Comment 21](/show_bug.cgi?id=942152#c21)• 11 years ago |
|  | |

Attached patch

[prevent-bad-things-from-happening-for-tls-intolerance.patch](attachment.cgi?id=8342268&action=diff) (obsolete)
— [Details](attachment.cgi?id=8342268&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=942152&attachment=8342268)

Honza and David, please both review this.
The PSM NSPR I/O layer works by having each method that could drive the handshake call getSocketInfoIfRunning at the beginning of the function. If the nsNSSSocketInfo had previously been canceled due to error, getSocketInfoIfRunning will return NULL after calling PR\_SetError() with the previously-set error code. This will cause the caller of getSocketInfoIfRunning to stop early and indicate failure to its caller. Thus, the PSM I/O layer is designed to protect against the type of abuse that Gecko is trying to inflict upon it.
However, in the case of TLS intolerance fallback, we are not calling SetCanceled on the nsNSSSocketInfo object, and consequently we are not saving the error code. Thus, when we abuse the I/O layer by attempting an I/O operation after the failed one, we don't notice. Since the libssl I/O layer underneath the PSM I/O layer is in an inconsistent state (due to the error previously encountered), we have unpredictable and undefined behavior. In this case, the result is trying to handle the same TLS record twice.
This patch avoids that problem by remembering the error code that triggered the TLS intolerance in the nsNSSSocketInfo object.
I filed [bug 946147](/show_bug.cgi?id=946147 "RESOLVED FIXED - TLS handshake fails for some broken servers after cipher suite order in client hello was changed in bug 936828") to track the cipher suite intolerance issue with the site in question.
I filed [bug 946157](/show_bug.cgi?id=946157 "NEW") about the bug with nsSocketTransport::IsAlive being unsafe.
[Attachment #8342268](/attachment.cgi?id=8342268&action=edit "prevent-bad-things-from-happening-for-tls-intolerance.patch") -
Flags: review?(honzab.moz)
[Attachment #8342268](/attachment.cgi?id=8342268&action=edit "prevent-bad-things-from-happening-for-tls-intolerance.patch") -
Flags: review?(dkeeler)

|  | [Dana Keeler (she/her) (use needinfo) [:keeler]](/user_profile?user_id=349244) |  |
| --- | --- | --- |
| [Comment 22](/show_bug.cgi?id=942152#c22)• 11 years ago |
|  | |

Comment on [attachment 8342268](/attachment.cgi?id=8342268 "prevent-bad-things-from-happening-for-tls-intolerance.patch") [[details]](/attachment.cgi?id=8342268&action=edit "prevent-bad-things-from-happening-for-tls-intolerance.patch") [[diff]](/attachment.cgi?id=8342268&action=diff "prevent-bad-things-from-happening-for-tls-intolerance.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=942152&attachment=8342268)
prevent-bad-things-from-happening-for-tls-intolerance.patch
Review of [attachment 8342268](/attachment.cgi?id=8342268 "prevent-bad-things-from-happening-for-tls-intolerance.patch") [[details]](/attachment.cgi?id=8342268&action=edit "prevent-bad-things-from-happening-for-tls-intolerance.patch") [[diff]](/attachment.cgi?id=8342268&action=diff "prevent-bad-things-from-happening-for-tls-intolerance.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=942152&attachment=8342268):
-----------------------------------------------------------------
As far as I can tell, this looks correct.
::: security/manager/ssl/src/nsNSSIOLayer.cpp
@@ +1118,5 @@
> + // Remember that we encountered an error so that getSocketInfoIfRunning
> + // will correctly cause us to fail if another part of Gecko
> + // (erroneously) calls an I/O function (PR\_Send/PR\_Recv/etc.) again on
> + // this socket. Note that we use the original error because if we use
> + // PR\_CONNECT\_RESET\_ERROR, bad things will happen.
"bad things will happen" -> is this deliberately vague? It would be nice to explain exactly which bad things will happen.
[Attachment #8342268](/attachment.cgi?id=8342268&action=edit "prevent-bad-things-from-happening-for-tls-intolerance.patch") -
Flags: review?(dkeeler) → review+

|  | [Honza Bambas (:mayhemer)](/user_profile?user_id=269762) |  |
| --- | --- | --- |
| [Comment 23](/show_bug.cgi?id=942152#c23)• 11 years ago |
|  | |

(In reply to Brian Smith (:briansmith, was :bsmith; Please NEEDINFO? me if you want a response) from [comment #21](/show_bug.cgi?id=942152#c21 "RESOLVED FIXED - Assertion failure: ss->ssl3.hs.hashType == handshake_hash_unknown"))
> Thus, when we abuse the I/O layer by attempting an
> I/O operation after the failed one, we don't notice. Since the libssl I/O
> layer underneath the PSM I/O layer is in an inconsistent state (due to the
> error previously encountered),
Hmm.. but the NSS I/O layer should be aware of this error (reset/eof/ssl-alert) so how is it that it is in an inconsistent state? NSS should switch the socket itself to an error-state.
So, if any consumer of NSS sockets (direct NSS) will try to do a write(s) after an error has been encountered on the socket, it is possible this bug will trigger as well?
> we have unpredictable and undefined behavior.
> In this case, the result is trying to handle the same TLS record twice.
>
Sounds more like an NSS bug to me.

|  | [Honza Bambas (:mayhemer)](/user_profile?user_id=269762) |  |
| --- | --- | --- |
| [Comment 24](/show_bug.cgi?id=942152#c24)• 11 years ago |
|  | |

Comment on [attachment 8342268](/attachment.cgi?id=8342268 "prevent-bad-things-from-happening-for-tls-intolerance.patch") [[details]](/attachment.cgi?id=8342268&action=edit "prevent-bad-things-from-happening-for-tls-intolerance.patch") [[diff]](/attachment.cgi?id=8342268&action=diff "prevent-bad-things-from-happening-for-tls-intolerance.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=942152&attachment=8342268)
prevent-bad-things-from-happening-for-tls-intolerance.patch
Review of [attachment 8342268](/attachment.cgi?id=8342268 "prevent-bad-things-from-happening-for-tls-intolerance.patch") [[details]](/attachment.cgi?id=8342268&action=edit "prevent-bad-things-from-happening-for-tls-intolerance.patch") [[diff]](/attachment.cgi?id=8342268&action=diff "prevent-bad-things-from-happening-for-tls-intolerance.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=942152&attachment=8342268):
-----------------------------------------------------------------
checkHandshake is called after all I/O ops we can do on the socket, so this OK.
I think to fix an immediate Necko over PSM bug this is OK. But see my previous comment, this is strange behavior of NSS.
::: security/manager/ssl/src/nsNSSIOLayer.cpp
@@ +1118,5 @@
> + // Remember that we encountered an error so that getSocketInfoIfRunning
> + // will correctly cause us to fail if another part of Gecko
> + // (erroneously) calls an I/O function (PR\_Send/PR\_Recv/etc.) again on
> + // this socket. Note that we use the original error because if we use
> + // PR\_CONNECT\_RESET\_ERROR, bad things will happen.
I agree with David, better explanation would be good, if not a sec risk.
At least explain this in more details in the bug. I presume RESET would cause fallback when we potentially don't want it? At least it will cause any http transactions to retry.
[Attachment #8342268](/attachment.cgi?id=8342268&action=edit "prevent-bad-things-from-happening-for-tls-intolerance.patch") -
Flags: review?(honzab.moz) → review+

|  | [Brian Smith (:briansmith, :bsmith, use NEEDINFO?)](/user_profile?user_id=14661)  Assignee |  |
| --- | --- | --- |
| [Comment 25](/show_bug.cgi?id=942152#c25)• 11 years ago |
|  | |

I am giving this a sec-high rating because I'm not going to put a huge amount of effort into trying to convince myself that there is no critical security bug here. The libssl state machine is complicated, and there are so many error code paths, it basically impossible to say that none of those paths leave the connection in a non-exploitable state. However, I'm also not motivated to investigate how one would actually exploit this, and also too apathetic about security ratings to argue with anybody that lowers the severity rating. So, correct the rating as you please. :)Keywords: [sec-critical](/buglist.cgi?keywords=sec-critical&resolution=---)Hardware: x86 → AllWhiteboard: [needs security rating]

|  | [Brian Smith (:briansmith, :bsmith, use NEEDINFO?)](/user_profile?user_id=14661)  Assignee |  |
| --- | --- | --- |
| [Comment 26](/show_bug.cgi?id=942152#c26)• 11 years ago |
|  | |

Attached patch

[Patch v2, which fixes the vague comment](attachment.cgi?id=8343641&action=diff)
— [Details](attachment.cgi?id=8343641&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=942152&attachment=8343641)

And by sec-high in the previous comment, I meant sec-critical.
I would like to check this patch in soon, and then uplift it to Firefox 27 and ESR 24, at least.
[Security approval request comment]
How easily could an exploit be constructed based on the patch? It isn't obvious how to construct an exploit. It would require research into the error handling within libssl.
Do comments in the patch, the check-in comment, or tests included in the patch paint a bulls-eye on the security problem? Definitely the patch narrows down the search space to libssl, but also libssl is pretty large.
Which older supported branches are affected by this flaw? All of them.
If not all supported branches, which bug introduced the flaw? Pretty sure this flaw has existed for a long time.
Do you have backports for the affected branches? If not, how different, hard to create, and risky will they be? This will apply cleanly to Firefox 26, 27, 28. ESR 24 and B2G < 1.2 would require small modifications to the patch, if we're going to backport this.
How likely is this patch to cause regressions; how much testing does it need? There is a non-zero risk of this patch causing problems. It is very difficult to write an automated test for this, because the problematic behaviors are in the bowels of Necko and PSM. So, I think that this should get a few weeks of testing, at least, before release.
[Attachment #8342268](/attachment.cgi?id=8342268&action=edit "prevent-bad-things-from-happening-for-tls-intolerance.patch") -
Attachment is obsolete: true
[Attachment #8343641](/attachment.cgi?id=8343641&action=edit "Patch v2, which fixes the vague comment") -
Flags: sec-approval?
[Attachment #8343641](/attachment.cgi?id=8343641&action=edit "Patch v2, which fixes the vague comment") -
Flags: review+
[Attachment #8343641](/attachment.cgi?id=8343641&action=edit "Patch v2, which fixes the vague comment") -
Flags: approval-mozilla-beta?
[Attachment #8343641](/attachment.cgi?id=8343641&action=edit "Patch v2, which fixes the vague comment") -
Flags: approval-mozilla-aurora?

|  | [Brian Smith (:briansmith, :bsmith, use NEEDINFO?)](/user_profile?user_id=14661)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=942152#a1189993_14661)• 11 years ago |

[status-b2g18](/buglist.cgi?f1=cf_status_b2g18&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=affected)
[status-b2g-v1.1hd](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=equals&v1=affected)
[status-b2g-v1.2](/buglist.cgi?f1=cf_status_b2g_1_2&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=affected)
[status-firefox25](/buglist.cgi?f1=cf_status_firefox25&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_firefox25&o1=equals&v1=wontfix)
[status-firefox26](/buglist.cgi?f1=cf_status_firefox26&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox26&o1=equals&v1=affected)
[status-firefox-esr17](/buglist.cgi?f1=cf_status_firefox_esr17&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=affected)
[status-firefox-esr24](/buglist.cgi?f1=cf_status_firefox_esr24&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=affected)
[tracking-b2g18](/buglist.cgi?f1=cf_tracking_b2g18&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_b2g18&o1=equals&v1=%3F)
[tracking-firefox26](/buglist.cgi?f1=cf_tracking_firefox26&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox26&o1=equals&v1=%3F)
[tracking-firefox-esr24](/buglist.cgi?f1=cf_tracking_firefox_esr24&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox_esr24&o1=equals&v1=%3F)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 27](/show_bug.cgi?id=942152#c27)• 11 years ago |
|  | |

Comment on [attachment 8343641](/attachment.cgi?id=8343641 "Patch v2, which fixes the vague comment") [[details]](/attachment.cgi?id=8343641&action=edit "Patch v2, which fixes the vague comment") [[diff]](/attachment.cgi?id=8343641&action=diff "Patch v2, which fixes the vague comment") [[review]](/page.cgi?id=splinter.html&ignore=&bug=942152&attachment=8343641)
Patch v2, which fixes the vague comment
Giving sec-approval for trunk. In a couple of days, that will be aurora (since we're about to branch). We should land it on beta after that.
[Attachment #8343641](/attachment.cgi?id=8343641&action=edit "Patch v2, which fixes the vague comment") -
Flags: sec-approval? → sec-approval+

|  | [Lukas Blakk [:lsblakk] use ?needinfo](/user_profile?user_id=272375) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=942152#a1223432_272375)• 11 years ago |

[status-firefox26](/buglist.cgi?f1=cf_status_firefox26&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox26&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_firefox26&o1=equals&v1=wontfix)
[status-firefox29](/buglist.cgi?f1=cf_status_firefox29&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=affected)
[status-firefox-esr17](/buglist.cgi?f1=cf_status_firefox_esr17&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=wontfix)
[tracking-firefox26](/buglist.cgi?f1=cf_tracking_firefox26&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox26&o1=equals&v1=%3F) → ---
[tracking-firefox27](/buglist.cgi?f1=cf_tracking_firefox27&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox27&o1=equals&v1=%3F) → [+](/buglist.cgi?f1=cf_tracking_firefox27&o1=equals&v1=%2B)
[tracking-firefox28](/buglist.cgi?f1=cf_tracking_firefox28&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox28&o1=equals&v1=%3F) → [+](/buglist.cgi?f1=cf_tracking_firefox28&o1=equals&v1=%2B)
[tracking-firefox29](/buglist.cgi?f1=cf_tracking_firefox29&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox29&o1=equals&v1=%2B)
[tracking-firefox-esr24](/buglist.cgi?f1=cf_tracking_firefox_esr24&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox_esr24&o1=equals&v1=%3F) → [27+](/buglist.cgi?f1=cf_tracking_firefox_esr24&o1=equals&v1=27%2B)

|  | [Brian Smith (:briansmith, :bsmith, use NEEDINFO?)](/user_profile?user_id=14661)  Assignee |  |
| --- | --- | --- |
| [Comment 28](/show_bug.cgi?id=942152#c28)• 11 years ago |
|  | |

<https://hg.mozilla.org/integration/mozilla-inbound/rev/f749a52bd4e6>

|  | [Carsten Book [:Tomcat]](/user_profile?user_id=277293)  Reporter |  |
| --- | --- | --- |
| [Comment 29](/show_bug.cgi?id=942152#c29)• 11 years ago |
|  | |

awesome thanks brian!
Also landed this on central now -> <https://hg.mozilla.org/mozilla-central/rev/f749a52bd4e6>
Setting in-testsuite but not sure if we can create a test here, at least i was unsuccessful creating a local testcase :(Status: NEW → RESOLVEDClosed: 11 years ago
[status-firefox28](/buglist.cgi?f1=cf_status_firefox28&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=fixed)Flags: in-testsuite?Resolution: --- → FIXED

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 30](/show_bug.cgi?id=942152#c30)• 11 years ago |
|  | |

Can we can uplift noms please?
[status-firefox29](/buglist.cgi?f1=cf_status_firefox29&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=affected) → ---Flags: needinfo?(brian)

|  | [Brian Smith (:briansmith, :bsmith, use NEEDINFO?)](/user_profile?user_id=14661)  Assignee |  |
| --- | --- | --- |
| [Comment 31](/show_bug.cgi?id=942152#c31)• 11 years ago |
|  | |

Is it cool to uplift this now? The approval request is in [comment 26](/show_bug.cgi?id=942152#c26 "RESOLVED FIXED - Assertion failure: ss->ssl3.hs.hashType == handshake_hash_unknown").Flags: needinfo?(brian) → needinfo?(lsblakk)

|  | [Carsten Book [:Tomcat]](/user_profile?user_id=277293)  Reporter |  |
| --- | --- | --- |
| [Comment 32](/show_bug.cgi?id=942152#c32)• 11 years ago |
|  | |

(In reply to Carsten Book [:Tomcat] from [comment #29](/show_bug.cgi?id=942152#c29 "RESOLVED FIXED - Assertion failure: ss->ssl3.hs.hashType == handshake_hash_unknown"))
> awesome thanks brian!
>
> Also landed this on central now ->
> <https://hg.mozilla.org/mozilla-central/rev/f749a52bd4e6>
Also verified this site is no more breaking Trunk Debug Builds with this fix included on the site where i found the assertion, also bughunter confirmed this crash only on beta builds anymore

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 33](/show_bug.cgi?id=942152#c33)• 11 years ago |
|  | |

Comment on [attachment 8343641](/attachment.cgi?id=8343641 "Patch v2, which fixes the vague comment") [[details]](/attachment.cgi?id=8343641&action=edit "Patch v2, which fixes the vague comment") [[diff]](/attachment.cgi?id=8343641&action=diff "Patch v2, which fixes the vague comment") [[review]](/page.cgi?id=splinter.html&ignore=&bug=942152&attachment=8343641)
Patch v2, which fixes the vague comment
This is already on Aurora by virtue of landing on m-c prior to Monday's uplift.
[Attachment #8343641](/attachment.cgi?id=8343641&action=edit "Patch v2, which fixes the vague comment") -
Flags: approval-mozilla-aurora? → approval-mozilla-esr24?

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=942152#a1815547_75935)• 11 years ago |

[status-b2g-v1.3](/buglist.cgi?f1=cf_status_b2g_1_3&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=fixed)

|  | [Lukas Blakk [:lsblakk] use ?needinfo](/user_profile?user_id=272375) |  |
| --- | --- | --- |
| [Comment 34](/show_bug.cgi?id=942152#c34)• 11 years ago |
|  | |

Comment on [attachment 8343641](/attachment.cgi?id=8343641 "Patch v2, which fixes the vague comment") [[details]](/attachment.cgi?id=8343641&action=edit "Patch v2, which fixes the vague comment") [[diff]](/attachment.cgi?id=8343641&action=diff "Patch v2, which fixes the vague comment") [[review]](/page.cgi?id=splinter.html&ignore=&bug=942152&attachment=8343641)
Patch v2, which fixes the vague comment
Go ahead with uplifts to beta/esr24
[Attachment #8343641](/attachment.cgi?id=8343641&action=edit "Patch v2, which fixes the vague comment") -
Flags: approval-mozilla-esr24?
[Attachment #8343641](/attachment.cgi?id=8343641&action=edit "Patch v2, which fixes the vague comment") -
Flags: approval-mozilla-esr24+
[Attachment #8343641](/attachment.cgi?id=8343641&action=edit "Patch v2, which fixes the vague comment") -
Flags: approval-mozilla-beta?
[Attachment #8343641](/attachment.cgi?id=8343641&action=edit "Patch v2, which fixes the vague comment") -
Flags: approval-mozilla-beta+

|  | [Lukas Blakk [:lsblakk] use ?needinfo](/user_profile?user_id=272375) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=942152#a1834868_272375)• 11 years ago |

Flags: needinfo?(lsblakk)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 35](/show_bug.cgi?id=942152#c35)• 11 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-beta/rev/c5ed9aa75a0a>
This has some non-trival conflicts for esr24. Please provide a branch patch for uplift.
[status-firefox27](/buglist.cgi?f1=cf_status_firefox27&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=fixed)Flags: needinfo?(brian)Keywords: [branch-patch-needed](/buglist.cgi?keywords=branch-patch-needed&resolution=---)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 36](/show_bug.cgi?id=942152#c36)• 11 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-b2g26_v1_2/rev/69e730e3f88a>
[status-b2g-v1.2](/buglist.cgi?f1=cf_status_b2g_1_2&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=fixed)

|  | [Lukas Blakk [:lsblakk] use ?needinfo](/user_profile?user_id=272375) |  |
| --- | --- | --- |
| [Comment 37](/show_bug.cgi?id=942152#c37)• 11 years ago |
|  | |

Comment on [attachment 8343641](/attachment.cgi?id=8343641 "Patch v2, which fixes the vague comment") [[details]](/attachment.cgi?id=8343641&action=edit "Patch v2, which fixes the vague comment") [[diff]](/attachment.cgi?id=8343641&action=diff "Patch v2, which fixes the vague comment") [[review]](/page.cgi?id=splinter.html&ignore=&bug=942152&attachment=8343641)
Patch v2, which fixes the vague comment
Removing the approval for this patch, we can a+ the known-good replacement when it's up.
[Attachment #8343641](/attachment.cgi?id=8343641&action=edit "Patch v2, which fixes the vague comment") -
Flags: approval-mozilla-esr24+ → approval-mozilla-esr24-

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 38](/show_bug.cgi?id=942152#c38)• 11 years ago |
|  | |

Brian, can you please post an esr24 patch for this sec-crit?

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 39](/show_bug.cgi?id=942152#c39)• 11 years ago |
|  | |

8 days later and we're running out of time to take this on ESR24. Are we going to get a patch for this in time for the release, Brian?

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 40](/show_bug.cgi?id=942152#c40)• 11 years ago |
|  | |

This has missed the ESR24 going out with Firefox 27. Let's try to get this before the March release for ESR24.Whiteboard: [adv-main27+]

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=942152#a5729172_280903)• 11 years ago |

[tracking-firefox-esr24](/buglist.cgi?f1=cf_tracking_firefox_esr24&o1=isnotempty):
[27+](/buglist.cgi?f1=cf_tracking_firefox_esr24&o1=equals&v1=27%2B) → [28+](/buglist.cgi?f1=cf_tracking_firefox_esr24&o1=equals&v1=28%2B)

|  | [Camilo Viecco (:cviecco)](/user_profile?user_id=433899) |  |
| --- | --- | --- |
| [Comment 41](/show_bug.cgi?id=942152#c41)• 11 years ago |
|  | |

Attached patch

[esr24-with-extra-logic](attachment.cgi?id=8373493&action=diff)
— [Details](attachment.cgi?id=8373493&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=942152&attachment=8373493)

|  | [Camilo Viecco (:cviecco)](/user_profile?user_id=433899) |  |
| --- | --- | --- |
| [Comment 42](/show_bug.cgi?id=942152#c42)• 11 years ago |
|  | |

Comment on [attachment 8373493](/attachment.cgi?id=8373493 "esr24-with-extra-logic") [[details]](/attachment.cgi?id=8373493&action=edit "esr24-with-extra-logic") [[diff]](/attachment.cgi?id=8373493&action=diff "esr24-with-extra-logic") [[review]](/page.cgi?id=splinter.html&ignore=&bug=942152&attachment=8373493)
esr24-with-extra-logic
Review of [attachment 8373493](/attachment.cgi?id=8373493 "esr24-with-extra-logic") [[details]](/attachment.cgi?id=8373493&action=edit "esr24-with-extra-logic") [[diff]](/attachment.cgi?id=8373493&action=diff "esr24-with-extra-logic") [[review]](/page.cgi?id=splinter.html&ignore=&bug=942152&attachment=8373493):
-----------------------------------------------------------------
This combines logic from <http://hg.mozilla.org/mozilla-central/diff/2f3ce72ec2d8/security/manager/ssl/src/nsNSSIOLayer.cpp> and <http://hg.mozilla.org/mozilla-central/diff/f749a52bd4e6/security/manager/ssl/src/nsNSSIOLayer.cpp> so that the central patch makes sense.
[Attachment #8373493](/attachment.cgi?id=8373493&action=edit "esr24-with-extra-logic") -
Flags: review?(honzab.moz)

|  | [Honza Bambas (:mayhemer)](/user_profile?user_id=269762) |  |
| --- | --- | --- |
| [Comment 43](/show_bug.cgi?id=942152#c43)• 11 years ago |
|  | |

Comment on [attachment 8373493](/attachment.cgi?id=8373493 "esr24-with-extra-logic") [[details]](/attachment.cgi?id=8373493&action=edit "esr24-with-extra-logic") [[diff]](/attachment.cgi?id=8373493&action=diff "esr24-with-extra-logic") [[review]](/page.cgi?id=splinter.html&ignore=&bug=942152&attachment=8373493)
esr24-with-extra-logic
Review of [attachment 8373493](/attachment.cgi?id=8373493 "esr24-with-extra-logic") [[details]](/attachment.cgi?id=8373493&action=edit "esr24-with-extra-logic") [[diff]](/attachment.cgi?id=8373493&action=diff "esr24-with-extra-logic") [[review]](/page.cgi?id=splinter.html&ignore=&bug=942152&attachment=8373493):
-----------------------------------------------------------------
This is merge of
<https://bugzilla.mozilla.org/page.cgi?id=splinter.html&bug=942152&attachment=8343641>
and
<http://hg.mozilla.org/mozilla-central/diff/2f3ce72ec2d8/security/manager/ssl/src/nsNSSIOLayer.cpp>
(as Camilo points out actually :))
and it looks good I think.
[Attachment #8373493](/attachment.cgi?id=8373493&action=edit "esr24-with-extra-logic") -
Flags: review?(honzab.moz) → review+

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 44](/show_bug.cgi?id=942152#c44)• 11 years ago |
|  | |

Comment on [attachment 8373493](/attachment.cgi?id=8373493 "esr24-with-extra-logic") [[details]](/attachment.cgi?id=8373493&action=edit "esr24-with-extra-logic") [[diff]](/attachment.cgi?id=8373493&action=diff "esr24-with-extra-logic") [[review]](/page.cgi?id=splinter.html&ignore=&bug=942152&attachment=8373493)
esr24-with-extra-logic
Same as [comment 26](/show_bug.cgi?id=942152#c26 "RESOLVED FIXED - Assertion failure: ss->ssl3.hs.hashType == handshake_hash_unknown").
[Attachment #8373493](/attachment.cgi?id=8373493&action=edit "esr24-with-extra-logic") -
Flags: approval-mozilla-esr24?

|  | [Sylvestre Ledru [:Sylvestre]](/user_profile?user_id=495955) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=942152#a7090202_495955)• 11 years ago |

[Attachment #8373493](/attachment.cgi?id=8373493&action=edit "esr24-with-extra-logic") -
Flags: approval-mozilla-esr24? → approval-mozilla-esr24+

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 45](/show_bug.cgi?id=942152#c45)• 11 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-esr24/rev/66a389d8a877>
<https://hg.mozilla.org/releases/mozilla-b2g18/rev/ee38869a684b>
[status-b2g18](/buglist.cgi?f1=cf_status_b2g18&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=fixed)
[status-firefox-esr24](/buglist.cgi?f1=cf_status_firefox_esr24&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=fixed)Flags: needinfo?(brian)Keywords: [branch-patch-needed](/buglist.cgi?keywords=branch-patch-needed&resolution=---)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 46](/show_bug.cgi?id=942152#c46)• 11 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-b2g18_v1_1_0_hd/rev/ee38869a684b>
[status-b2g-v1.1hd](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=equals&v1=fixed)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=942152#a9102574_280903)• 11 years ago |

Whiteboard: [adv-main27+] → [adv-main27+][adv-esr24.4+]

|  | [Matt Wobensmith [:mwobensmith][:matt:]](/user_profile?user_id=452604) |  |
| --- | --- | --- |
| [Comment 47](/show_bug.cgi?id=942152#c47)• 11 years ago |
|  | |

Marking qa-, as verifying exploit mitigation in the absence of steps to reproduce would yield diminishing returns. Also, [comment 25](/show_bug.cgi?id=942152#c25 "RESOLVED FIXED - Assertion failure: ss->ssl3.hs.hashType == handshake_hash_unknown").Whiteboard: [adv-main27+][adv-esr24.4+] → [adv-main27+][adv-esr24.4+][qa-]

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=942152#a9724353_75935)• 11 years ago |

[status-b2g-v1.3T](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=fixed)
[status-b2g-v1.4](/buglist.cgi?f1=cf_status_b2g_1_4&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=unaffected)

|  | [Lukas Blakk [:lsblakk] use ?needinfo](/user_profile?user_id=272375) |  |
| --- | --- | --- |
| [Comment 48](/show_bug.cgi?id=942152#c48)• 11 years ago |
|  | |

The tracking flag for 29 looks to be in error, removing.
[tracking-firefox29](/buglist.cgi?f1=cf_tracking_firefox29&o1=isnotempty):
[+](/buglist.cgi?f1=cf_tracking_firefox29&o1=equals&v1=%2B) → ---

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=942152#a39793860_1689)• 10 years ago |

Group: core-security
You need to [log in](/show_bug.cgi?id=942152&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Carsten Book [:Tomcat]](/user_profile?user_id=277293)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from secunia.com_8c9a0c39_20250124_230101.html ===


[Skip to main content](#main-content)
[![Home](/themes/custom/flexera/images/logo.svg)](https://www.flexera.com/)

[![Home](/themes/custom/flexera/images/logo.svg)](https://www.flexera.com/)

Search

## Main navigation

* Solutions
  + Column 1
    - Business challenge
      * [Software renewals and audits](https://www.flexera.com/solutions/software-renewals-audits)
      * [Software license management and optimization](https://www.flexera.com/solutions/software-usage-costs)
      * [SaaS spend management](https://www.flexera.com/solutions/saas-spend)
      * [Cloud cost management](https://www.flexera.com/solutions/cloud-cost)
      * [IT asset lifecycle management](https://www.flexera.com/solutions/it-asset-lifecycle)
      * [CMDB data quality](https://www.flexera.com/solutions/cmdb-data-quality)
      * [Accurate IT inventory](https://www.flexera.com/solutions/it-inventory)
      * [Security and regulatory risk management](https://www.flexera.com/solutions/it-security-regulatory-risk)
      * [Sustainable IT](https://www.flexera.com/solutions/sustainable-it)
      * [AI-powered transformation](https://www.flexera.com/solutions/ai-powered-transformation)
      * [Public sector](https://www.flexera.com/solutions/public-sector)
  + Column 2
    - Spend management by vendor
      * [IBM](https://www.flexera.com/solutions/vendor/ibm)
      * [Oracle](https://www.flexera.com/solutions/vendor/oracle)
      * [Microsoft](https://www.flexera.com/solutions/vendor/microsoft)
      * [SAP](https://www.flexera.com/solutions/vendor/sap)
      * [VMware](https://www.flexera.com/solutions/vendor/vmware)
      * [ServiceNow](https://www.flexera.com/solutions/vendor/servicenow)
      * [AWS](https://www.flexera.com/solutions/vendor/aws)
      * [Salesforce](https://www.flexera.com/solutions/vendor/salesforce)
      * [BMC](https://www.flexera.com/solutions/cmdb-data-quality/bmc)
      * [Adobe](https://www.flexera.com/solutions/vendor/adobe)

  ### Achieve more through a united FinOps and ITAM function

  The future is hybrid. Break down the walls between ITAM and FinOps to drive more revenue, more customer growth and more innovation.

  [Discover More](https://www.flexera.com/resources/hybrid-itam-finops)
* Products
  + Column 1
    - [Flexera One](https://www.flexera.com/products/flexera-one)
      * [IT Visibility](https://www.flexera.com/products/flexera-one/it-visibility)
      * [ITAM](https://www.flexera.com/products/flexera-one/it-asset-management)
      * [SaaS Management](https://www.flexera.com/products/flexera-one/saas-management)
      * [FinOps](https://www.flexera.com/products/flexera-one/finops)
      * [Technology Intelligence Platform](https://www.flexera.com/products/flexera-one/technology-intelligence-platform)
  + Column 2
    - [Snow Atlas](https://www.flexera.com/products/snow-atlas)
      * [Snow Spend Optimizer](https://www.flexera.com/products/snow-atlas/snow-spend-optimizer)
      * [Snow SaaS Management](https://www.flexera.com/products/snow-atlas/snow-saas-management)
  + Column 3
    - Hide group
      * [Security](https://www.flexera.com/products/security)
      * [Application Readiness](https://www.flexera.com/products/adminstudio)
      * [All products](https://www.flexera.com/products)
      * [All Snow products](https://www.flexera.com/products/snow)
      * [Integrations](https://www.flexera.com/products/integrations)

  ### Flexera 2024 State of the Cloud Report

  What do transformative initiatives such as GenAI, machine learning and sustainability mean for the cloud? Check out the 2024 State of the Cloud Report to find the answer as well as all the latest cloud computing trends.

  [View Report](https://info.flexera.com/CM-REPORT-State-of-the-Cloud)
* Success
  + Column 1
    - [Customer success](https://www.flexera.com/customer-success)
      * Support
        + [Flexera support portal](https://community.flexera.com/s/support-hub)
        + [Flexera product documentation](https://docs.flexera.com)
        + [Snow product documentation](https://docs.snowsoftware.io/)
      * Services and training
        + [Services](https://www.flexera.com/customer-success/services)
        + [Training](https://www.flexera.com/customer-success/training)
  + Column 2
    - Hide group
      * [Technology Intelligence Awards](https://www.flexera.com/customer-success/awards)
      * [Flexera community](https://community.flexera.com/s/)

  ### Insights from Gartner®

  Find a curated series of actionable and objective insights for IT executives and their teams. Get expert insights from valued analysts, courtesy of Flexera.

  [Discover More](https://www.flexera.com/resources/gartner-analyst-research)
* Resources
  + Column 1
    - [Resources](https://www.flexera.com/resources)
      * [Webinars](https://www.flexera.com/resources?type%5Bwebinar%5D=webinar)
      * [Videos](https://www.flexera.com/resources?type%5Bvideo%5D=video)
      * [Datasheets](https://www.flexera.com/resources?type%5Bdatasheet%5D=datasheet)
      * [White papers & reports](https://www.flexera.com/resources?type%5Bwhite-paper-industry-report%5D=white-paper-industry-report)
  + Column 2
    - Hide group
      * [Blog](/blog/)
      * [Case studies](https://www.flexera.com/resources/case-studies)
      * [Events](https://www.flexera.com/resources?type%5Bevent%5D=event)
      * [Analyst Research](https://www.flexera.com/resources/gartner-analyst-research)
      * [Glossary](https://www.flexera.com/resources/glossary)
      * [Demos & trials](https://www.flexera.com/resources?type%5Bdemo-trials%5D=demo-trials)
      * [Business value calculator](https://www.flexera.com/resources/business-value-calculator)

  ### Flexera 2025 IT Priorities Report

  Insights from Flexera’s 2025 IT Priorities Report highlight what’s top of mind for IT decision makers in the year ahead. Discover the challenges, priorities and opportunities that will shape the future IT landscape.

  [View Report](https://info.flexera.com/ITV-REPORT-IT-Priorities)
* About
  + Column 1
    - [Company](https://www.flexera.com/about-us)
      * [About](https://www.flexera.com/about-us)
      * [Careers](https://www.flexera.com/about-us/careers)
      * [Contact](https://www.flexera.com/about-us/contact-us)
      * [Leadership](https://www.flexera.com/about-us/leadership)
    - [Partners](https://www.flexera.com/about-us/partners)
      * [Partner program](https://www.flexera.com/about-us/partners/partner-program)
      * [Partner directory](https://www.flexera.com/about-us/partners/directory)
  + Column 2
    - [Press center](https://www.flexera.com/about-us/press-center)
      * [Press releases](https://www.flexera.com/about-us/all-press-releases)
      * [Awards](https://www.flexera.com/about-us/press-center#awards)
      * [Articles](https://www.flexera.com/about-us/all-articles)
    - Hide group
      * Social responsibility
        + [ESG](https://www.flexera.com/about-us/environmental-social-governance)
        + [Diversity](https://www.flexera.com/about-us/diversity)

  ### More value with technology intelligence

  The unparalleled synergy of Flexera and Snow provides the Technology Intelligence you need for more efficiency, insight and governance than ever before.

  [Discover More](https://www.flexera.com/more-value-with-technology-intelligence)

Search

en

* [English](https://www.flexera.com/products/security/software-vulnerability-research/secunia-research?referrer=secunia)
* [Deutsch](https://www.flexera.de/products/security/software-vulnerability-research/secunia-research?referrer=secunia)

## External Links

* External Links
  + [Community](https://community.flexera.com/)
  + [Product Access](https://app.flexera.com/login)
  + [Partner Portal](https://flexera.channeltivity.com/Login)

[Book a demo](/about-us/contact-us?C_Interest1=sales)

# Secunia Research

## The world’s best vulnerability intelligence

The Secunia Research team from Flexera provides the most accurate and reliable source of vulnerability intelligence.

[Contact Us](https://www.flexera.com/about-us/contact-us?C_Interest1=sales&C_SolutionInterest=SVM)
Watch video (0:29)

Related links

* [Anatomy of a security advisory](https://www.flexera.com/resources/infographics/anatomy-of-a-security-advisory)
* [Software Vulnerability Research](https://www.flexera.com/products/software-vulnerability-research)
* [Software Vulnerability Manager](/products/software-vulnerability-manager)
* [Security advisories from Secunia Research](https://www.flexera.com/products/security/software-vulnerability-advisories)
* [Report a vulnerability](https://www.flexera.com/about-us/contact-us/report-vulnerability)

 ![Secunia Research](/sites/default/files/2022-04/hero-secunia-research-bg.jpg)

Featured Details

## Multiple ways to consume Secunia Research

Secunia delivers software security research that provides reliable, curated and actionable vulnerability intelligence. Organizations can expect to receive standardized, validated and enriched vulnerability research on a specific version of a software product. Secunia Research supports four solutions:

![Software Vulnerability Research](/sites/default/files/2022-04/icon-secunia-research-svr.svg)

### [Software Vulnerability Research](https://www.flexera.com/products/software-vulnerability-research)

Software Vulnerability Research utilizes Secunia Research to drive awareness of vulnerabilities matching your specified criteria

[Learn More](https://www.flexera.com/products/software-vulnerability-research)

![Software Vulnerability Manager](/sites/default/files/2022-04/icon-secunia-research-svm.svg)

### [Software Vulnerability Manager](/products/software-vulnerability-manager)

Software Vulnerability Manager uses Secunia Research data to identify, prioritize and patch known vulnerable software detected in your environment

[Learn More](/products/software-vulnerability-manager)

![Data Platform](/sites/default/files/2022-04/icon-secunia-research-dp.svg)

### [Data Platform](https://www.flexera.com/products/data-platform)

Data Platform leverages Secunia Research to provide high-level insights based on major or minor versions of software in your normalized inventory

[Learn More](https://www.flexera.com/products/data-platform)

![Flexera One](/sites/default/files/2022-04/icon-secunia-research-flexera-one.svg)

### [Flexera One](/flexera-one)

Flexera One utilizes Secunia Research (alongside public NVD data) to provide more granular matching of build-level versions of software in your normalized inventory within its IT Asset Management and IT Visibility solutions

[Learn More](/flexera-one)

How it works

## Accurate, reliable vulnerability insights at your fingertips

The Secunia Research team from Flexera is comprised of several security specialists who conduct vulnerability research in various products in addition to testing, verifying and validating public vulnerability reports. Since its inception in 2002, the goal of the Secunia Research team is to provide the most accurate and reliable source of vulnerability intelligence.

Delivering the world’s best vulnerability intelligence requires skill and passion. Team members continually develop their skills exploring various high-profile closed and open-source software using a variety of approaches, focusing chiefly on thorough code audits and binary analysis. The team has received industry recognition, including naming members to [Microsoft’s Most Valuable Security Researchers](https://msrc-blog.microsoft.com/2019/08/07/announcing-2019-msrc-most-valuable-security-researchers/) list.

Secunia researchers discover hard-to-find vulnerabilities that aren’t normally identified with techniques such as fuzzing, and the results have been impressive. Members of the Secunia Research team have discovered critical vulnerabilities in products from vendors including Microsoft, Symantec, IBM, Adobe, RealNetworks, Trend Micro, HP, Blue Coat, Samba, CA, Mozilla and Apple.

The team produces invaluable security advisories based on research of the vulnerabilities affecting any given software update. Sometimes a single update can address multiple vulnerabilities of varying criticalities and threats; but these advisories aggregate and distill findings down to a single advisory perfect for the prioritization of patching efforts within [Software Vulnerability Manager](/products/software-vulnerability-manager). Criticality scores are consistently applied along with details around attack vector and other valuable details within [Software Vulnerability Research](/products/software-vulnerability-research/secunia-research). Illegitimate vulnerability reports are also investigated and rejected so you can focus only on what truly matters.

Informing IT, Transforming IT

## Industry insights to help keep you informed

[#### Webinar

### Stay Ahead of Cyber Threats: Flexera's Latest Vulnerability Insights

Join us for this session where we'll explore the latest findings from the Flexera Monthly Vulnerability Insights Report.](https://info.flexera.com/SVM-WBNR-Vulnerability-Insights-Roundtable)

[#### Webinar

### Dive deeper into the Flexera Annual Vulnerability Insights

We'll explore the key findings from the Flexera Annual Vulnerability Insights Report. Learn about the latest cybersecurity trends, the most targeted industries, the types of vulnerabilities, plus management and mitigation strategies.](https://info.flexera.com/SVM-WBNR-Flexera-Annual-Vulnerability-Insights?lead_source=Website%20Visitor&id=Flexera.com-Resources)

#### Video

### Close the Risk Window with Software Vulnerability Manager

Stop reacting. Gain control. Stay secure. Build a more effective risk mitigation process leveraging Secunia Research vulnerability intelligence and the largest repository of third-party patch data in the industry.

Remote video URL

[#### Trial

### Software Vulnerability Manager Assessment free trial

Get access to the complete set of modules of Software Vulnerability Manager: Research, Assessment and Patching](https://info.flexera.com/SVM-EVAL-Software-Vulnerability-Manager)

[#### Datasheet

### Protect your ServiceNow® investment with the highest quality data

IT Visibility offers certified ServiceNow integrations that accelerate platform expansion, improve ROI and increase efficiencies across ITIL processes by delivering clean software and hardware asset data directly.](/sites/default/files/datasheet-itv-maximize-servicenow-investment.pdf)

[#### Blog

### Avoid missing crucial vulnerability intelligence amid NVD backlog

Recent developments regarding the National Vulnerability Database (NVD) have some technology leaders on edge. Since February, the U.S. National Institute of Standards and Technology (NIST) has almost completely stopped enriching software vulnerabi...](https://www.flexera.com/blog/vulnerability-management/avoid-missing-crucial-vulnerability-intelligence-amid-nvd-backlog/)

[View all resources](https://www.flexera.com/resources?category%5Bsoftware-vulnerability-management%5D=software-vulnerability-management)

## Footer Menu

* Column
  + Business challenge
    - [Software renewals and audits](https://www.flexera.com/solutions/software-renewals-audits)
    - [Software license management and optimization](https://www.flexera.com/solutions/software-usage-costs)
    - [SaaS spend management](https://www.flexera.com/solutions/saas-spend)
    - [Cloud cost management](https://www.flexera.com/solutions/cloud-cost)
    - [IT asset lifecycle management](https://www.flexera.com/solutions/it-asset-lifecycle)
    - [CMDB data quality](https://www.flexera.com/solutions/cmdb-data-quality)
    - [Accurate IT inventory](https://www.flexera.com/solutions/it-inventory)
    - [Security and regulatory risk management](https://www.flexera.com/solutions/it-security-regulatory-risk)
    - [Sustainable IT](https://www.flexera.com/solutions/sustainable-it)
    - [AI-powered transformation](https://www.flexera.com/solutions/ai-powered-transformation)
    - [Public sector](https://www.flexera.com/solutions/public-sector)
* Column
  + Spend management by vendor
    - [IBM](https://www.flexera.com/solutions/vendor/ibm)
    - [Oracle](https://www.flexera.com/solutions/vendor/oracle)
    - [Microsoft](https://www.flexera.com/solutions/vendor/microsoft)
    - [SAP](https://www.flexera.com/solutions/vendor/sap)
    - [VMware](https://www.flexera.com/solutions/vendor/vmware)
    - [ServiceNow](https://www.flexera.com/solutions/vendor/servicenow)
    - [AWS](https://www.flexera.com/solutions/vendor/aws)
    - [Salesforce](https://www.flexera.com/solutions/vendor/salesforce)
    - [BMC](https://www.flexera.com/solutions/cmdb-data-quality/bmc)
    - [Adobe](https://www.flexera.com/solutions/vendor/adobe)
* Column
  + Products
    - [Flexera One](https://www.flexera.com/products/flexera-one)
    - [Snow Atlas](https://www.flexera.com/products/snow-atlas)
    - [Security](https://www.flexera.com/products/security)
    - [Application Readiness](https://www.flexera.com/products/adminstudio)
    - [All products](https://www.flexera.com/products)
    - [All Snow products](https://www.flexera.com/products/snow)
    - [Integrations](https://www.flexera.com/products/integrations)
* Column
  + Company
    - [About](https://www.flexera.com/about-us)
    - [Careers](https://www.flexera.com/about-us/careers)
    - [Leadership](https://www.flexera.com/about-us/leadership)
    - [Contact us](https://www.flexera.com/about-us/contact-us)
    - [Media / press center](https://www.flexera.com/about-us/press-center)
    - [Revenera.com](https://www.revenera.com)

 +1.800.374.4353

en

* [English](https://www.flexera.com/products/security/software-vulnerability-research/secunia-research?referrer=secunia)
* [Deutsch](https://www.flexera.de/products/security/software-vulnerability-research/secunia-research?referrer=secunia)

 [![Home](/themes/custom/flexera/images/logo.svg)](https://www.flexera.com/)

© 2025 Flexera. All Rights Reserved.

## Footer

* [Privacy Policy](https://www.flexera.com/legal/privacy-policy)
* [Terms and conditions](https://www.flexera.com/legal)
* [Contact Us](https://www.flexera.com/about-us/contact-us)
* [Impressum](https://www.flexera.com/about-us/impressum)
* [Site Map](https://www.flexera.com/sitemap)

#####

×

...



=== Content from bugzilla.mozilla.org_25bd458c_20250124_230124.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/924348)
* [XML](/show_bug.cgi?ctype=xml&id=924348)

Closed
[Bug 924348](/show_bug.cgi?id=924348)

Opened 11 years ago
Closed 11 years ago

# Intermittent PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie] or [@ hashDestroy]

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

Intermittent PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie] or [@ hashDestroy]

## Categories

### (Core :: SQLite and Embedded Database Bindings, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=SQLite%20and%20Embedded%20Database%20Bindings#SQLite%20and%20Embedded%20Database%20Bindings)

SQLite and Embedded Database Bindings
▾

Core :: SQLite and Embedded Database Bindings
SQLite-backed generic data storage and query engine.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=SQLite%20and%20Embedded%20Database%20Bindings&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=SQLite%20and%20Embedded%20Database%20Bindings&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=SQLite%20and%20Embedded%20Database%20Bindings)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

x86

macOS

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

normal

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla29

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Webcompat Priority | --- |
| --- | --- |
| Performance Impact | --- |
| Webcompat Score | --- |
| Accessibility Severity | --- |
| a11y-review | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox26 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox26&o1=equals&v1=wontfix) |
| firefox27 | --- | [fixed](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=fixed) |
| firefox28 | --- | [fixed](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=fixed) |
| firefox29 | --- | [fixed](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=fixed) |
| firefox-esr24 | --- | [unaffected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=unaffected) |
| b2g-v1.2 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=fixed) |
| b2g-v1.3 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=fixed) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox26 |  | wontfix |
| firefox27 |  | fixed |
| firefox28 |  | fixed |
| firefox29 |  | fixed |
| firefox-esr24 |  | unaffected |
| b2g-v1.2 |  | fixed |
| b2g-v1.3 |  | fixed |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: cbook, Assigned: janv)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/eceeadad4a0ed64f00f8e691ad14b59d?d=mm&size=40)  [janv](/user_profile?user_id=8340)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/8378311bf1bd5e9eddc7896a07688876?d=mm&size=40)  [cbook](/user_profile?user_id=277293)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/0d674a646529b0795088d7a8075fbaea?d=mm&size=40)  [mak](/user_profile?user_id=240353)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

14 people

## References

### ( [URL](https://tbpl.mozilla.org/php/getParsedLog.php?id=28820726&tree=Fx-Team "https://tbpl.mozilla.org/php/getParsedLog.php?id=28820726&tree=Fx-Team") )

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

[925251](/show_bug.cgi?id=925251 "RESOLVED WORKSFORME - Intermittent PROCESS-CRASH | /tests/dom/indexedDB/test/test_add_put.html | application crashed [@ libobjc.A.dylib + 0x62d6]")

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[785884](/show_bug.cgi?id=785884 "RESOLVED FIXED - Implement support for temporary storage (aka shared pool)")

Dependency [tree](/showdependencytree.cgi?id=924348&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=924348)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[Duplicates:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#duplicates)

[934046](/show_bug.cgi?id=934046 "RESOLVED DUPLICATE - Intermittent test_getAll.html | indexedDB error, 'UnknownError' | uncaught exception - UnknownError at test_getAll.js:171 | test_add_put.html | application terminated with exit code 256 | application crashed [@ sqlite3LeaveMutexAndCloseZombie]")

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[tbpl.mozilla.org/php/getParsedLog.php...](https://tbpl.mozilla.org/php/getParsedLog.php?id=28820726&tree=Fx-Team "https://tbpl.mozilla.org/php/getParsedLog.php?id=28820726&tree=Fx-Team")

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (5 keywords, Whiteboard: [adv-main27+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[crash](/buglist.cgi?keywords=crash&resolution=---),
[csectype-uaf](/buglist.cgi?keywords=csectype-uaf&resolution=---),
[intermittent-failure](/buglist.cgi?keywords=intermittent-failure&resolution=---),
[regression](/buglist.cgi?keywords=regression&resolution=---),
[sec-high](/buglist.cgi?keywords=sec-high&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[adv-main27+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [RyanVM](/user_profile?user_id=75935) | [in-testsuite](#c230 "11 years ago") | + |
| --- | --- | --- |
| [RyanVM](/user_profile?user_id=75935) | in-testsuite | + |
| --- | --- | --- |
|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | qe-verify |  |

## Crash Data

Signature:

[[@ sqlite3LeaveMutexAndCloseZombie ]](https://crash-stats.mozilla.org/signature/?signature=sqlite3LeaveMutexAndCloseZombie)

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (1 file, 1 obsolete file)

| [fix](/attachment.cgi?id=8359089)  [11 years ago](#c225)  [Jan Varga [:janv]](/user_profile?user_id=8340)   2.62 KB, patch |  | [Details](/attachment.cgi?id=8359089&action=edit) | [Diff](/attachment.cgi?id=8359089&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=924348&attachment=8359089) |
| --- | --- | --- |
| [fix v2](/attachment.cgi?id=8359307)  [11 years ago](#c227)  [Jan Varga [:janv]](/user_profile?user_id=8340)   2.99 KB, patch | khuey : [review+](#a8407945_336670 "11 years ago")  bajaj : [approval-mozilla-aurora+](#a8583843_448925 "11 years ago")  bajaj : [approval-mozilla-beta+](#a8583843_448925 "11 years ago")  bajaj : [approval-mozilla-b2g26+](#a8583843_448925 "11 years ago") | [Details](/attachment.cgi?id=8359307&action=edit) | [Diff](/attachment.cgi?id=8359307&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=924348&attachment=8359307) |

Show Obsolete

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only
* Show Treeherder Comments

|  | [Carsten Book [:Tomcat]](/user_profile?user_id=277293)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=924348#c0)• 11 years ago |
|  | |

Rev4 MacOSX Lion 10.7 fx-team opt test mochitest-3 on 2013-10-08 03:34:28 PDT for push 295575989d53
slave: talos-r4-lion-057
<https://tbpl.mozilla.org/php/getParsedLog.php?id=28820726&tree=Fx-Team>
WARNING - PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
03:38:12 INFO - Crash dump filename: /var/folders/hk/v8w8k7ss2g1fjccmkfk0t1l400000w/T/tmpolKVBu/minidumps/6553A854-BC1C-43EC-A742-F6D75017B8B9.dmp
03:38:12 INFO - Operating system: Mac OS X
03:38:12 INFO - 10.7.2 11C74
03:38:12 INFO - CPU: amd64
03:38:12 INFO - family 6 model 23 stepping 10
03:38:12 INFO - 2 CPUs
03:38:12 INFO - Crash reason: EXC\_BAD\_ACCESS / 0x0000000d
03:38:12 INFO - Crash address: 0x0
03:38:12 INFO - Thread 41 (crashed)
03:38:12 INFO - 0 libnss3.dylib!sqlite3LeaveMutexAndCloseZombie [sqlite3.c : 116556 + 0x0]
03:38:12 INFO - rbx = 0x00000000ffffffff r12 = 0x0000000000000000
03:38:12 INFO - r13 = 0x0000000000000000 r14 = 0x000aa80000001500
03:38:12 INFO - r15 = 0x000000011d23fc00 rip = 0x0000000100522d04
03:38:12 INFO - rsp = 0x000000013ef6ab20 rbp = 0x000000013ef6ab50
03:38:12 INFO - Found by: given as instruction pointer in context
03:38:12 INFO - 1 libnss3.dylib!sqlite3Close [sqlite3.c : 116460 + 0x7]
03:38:12 INFO - rbx = 0x0000000000000000 r12 = 0x000000011f425630
03:38:12 INFO - r13 = 0x000000011d23fc00 r14 = 0x0000000000000002
03:38:12 INFO - r15 = 0x0000000000000048 rip = 0x000000010052e2c8
03:38:12 INFO - rsp = 0x000000013ef6ab60 rbp = 0x000000013ef6ab90
03:38:12 INFO - Found by: call frame info
03:38:12 INFO - 2 XUL!mozilla::storage::Connection::internalClose() [mozStorageConnection.cpp:295575989d53 : 834 + 0x8]
03:38:12 INFO - rbx = 0x0000000000000000 r12 = 0x000000011f425630
03:38:12 INFO - r13 = 0x0000000000000000 r14 = 0x000000011af5c270
03:38:12 INFO - r15 = 0x000000011f425600 rip = 0x0000000101e0fc66
03:38:12 INFO - rsp = 0x000000013ef6aba0 rbp = 0x000000013ef6abc0
03:38:12 INFO - Found by: call frame info
03:38:12 INFO - 3 XUL!mozilla::storage::Connection::Close() [mozStorageConnection.cpp:295575989d53 : 1068 + 0x7]
03:38:12 INFO - rbx = 0x0000000000000000 r12 = 0x000000011f425630
03:38:12 INFO - r13 = 0x0000000000000000 r14 = 0x000000011af5c270
03:38:12 INFO - r15 = 0x000000011f425600 rip = 0x0000000101e0e92b
03:38:12 INFO - rsp = 0x000000013ef6abd0 rbp = 0x000000013ef6abf0
03:38:12 INFO - Found by: call frame info
03:38:12 INFO - 4 XUL!mozilla::dom::indexedDB::CommitHelper::Run() [IDBTransaction.cpp:295575989d53 : 923 + 0x5]
03:38:12 INFO - rbx = 0x000000011f425620 r12 = 0x000000011f425630
03:38:12 INFO - r13 = 0x0000000000000000 r14 = 0x0000000000000003
03:38:12 INFO - r15 = 0x000000011f425600 rip = 0x0000000101a4604b
03:38:12 INFO - rsp = 0x000000013ef6ac00 rbp = 0x000000013ef6aca0
03:38:12 INFO - Found by: call frame info

|  | [Ben Turner (not reading bugmail, use the needinfo flag!)](/user_profile?user_id=200444) |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=924348#c1)• 11 years ago |
|  | |

Tentatively moving into Storage since we recently upgraded SQLite.Component: DOM: IndexedDB → StorageProduct: Core → Toolkit

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=924348#c2)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

Gijs
<https://tbpl.mozilla.org/php/getParsedLog.php?id=28848018&tree=UX>
Rev5 MacOSX Mountain Lion 10.8 ux opt test mochitest-3 on 2013-10-08 16:22:22
revision: 859ff4a1af98
slave: talos-mtnlion-r5-056
[Child 1185] ###!!! ABORT: ActorDestroy by IPC channel failure at LayerTransactionChild: file ../../../../gfx/layers/ipc/LayerTransactionChild.cpp, line 89
[Child 1185] ###!!! ABORT: ActorDestroy by IPC channel failure at LayerTransactionChild: file ../../../../gfx/layers/ipc/LayerTransactionChild.cpp, line 89
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=924348#c3)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

RyanVM
<https://tbpl.mozilla.org/php/getParsedLog.php?id=28884105&tree=Fx-Team>
Rev5 MacOSX Mountain Lion 10.8 fx-team opt test mochitest-3 on 2013-10-09 10:23:35
revision: bfd211789733
slave: talos-mtnlion-r5-024
[Child 1180] ###!!! ABORT: ActorDestroy by IPC channel failure at LayerTransactionChild: file ../../../../gfx/layers/ipc/LayerTransactionChild.cpp, line 89
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ hashDestroy]
Return code: 256

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=924348#c4)• 11 years ago |
|  | |

This has been happening for awhile now and marked as [bug 881641](/show_bug.cgi?id=881641 "RESOLVED INCOMPLETE - Intermittent indexedDB/test/test_add_put.html | application crashed [@ jemalloc_crash] from ABORT: ActorDestroy by IPC channel failure at LayerTransactionChild: file ../../../../gfx/layers/ipc/LayerTransactionChild.cpp, line 83").

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=924348#c5)• 11 years ago |
|  | |

From looking at [bug 881641](/show_bug.cgi?id=881641 "RESOLVED INCOMPLETE - Intermittent indexedDB/test/test_add_put.html | application crashed [@ jemalloc_crash] from ABORT: ActorDestroy by IPC channel failure at LayerTransactionChild: file ../../../../gfx/layers/ipc/LayerTransactionChild.cpp, line 83"), looks like this started some time around early September.

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=924348#c6)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

RyanVM
<https://tbpl.mozilla.org/php/getParsedLog.php?id=28886743&tree=Mozilla-Inbound>
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound opt test mochitest-3 on 2013-10-09 11:25:09
revision: d72778f6eee9
slave: talos-mtnlion-r5-088
[Child 1182] ###!!! ABORT: ActorDestroy by IPC channel failure at LayerTransactionChild: file ../../../../gfx/layers/ipc/LayerTransactionChild.cpp, line 89
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ hashDestroy]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=924348#c7)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

KWierso
<https://tbpl.mozilla.org/php/getParsedLog.php?id=28901722&tree=Mozilla-Inbound>
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound opt test mochitest-3 on 2013-10-09 17:11:44
revision: bb73bada10de
slave: talos-mtnlion-r5-004
[Child 1184] ###!!! ABORT: ActorDestroy by IPC channel failure at LayerTransactionChild: file ../../../../gfx/layers/ipc/LayerTransactionChild.cpp, line 89
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=924348#c8)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=28901722&tree=Mozilla-Inbound>
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound opt test mochitest-3 on 2013-10-09 17:11:44
revision: bb73bada10de
slave: talos-mtnlion-r5-004
[Child 1184] ###!!! ABORT: ActorDestroy by IPC channel failure at LayerTransactionChild: file ../../../../gfx/layers/ipc/LayerTransactionChild.cpp, line 89
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=924348#c9)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

edmorley
<https://tbpl.mozilla.org/php/getParsedLog.php?id=28929878&tree=Mozilla-Inbound>
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound opt test mochitest-3 on 2013-10-10 07:11:45
revision: 44c21dcf1274
slave: talos-mtnlion-r5-027
[Child 1178] ###!!! ABORT: ActorDestroy by IPC channel failure at LayerTransactionChild: file ../../../../gfx/layers/ipc/LayerTransactionChild.cpp, line 89
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=924348#c10)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

KWierso
<https://tbpl.mozilla.org/php/getParsedLog.php?id=28956591&tree=B2g-Inbound>
Rev5 MacOSX Mountain Lion 10.8 b2g-inbound opt test mochitest-3 on 2013-10-10 16:33:47
revision: cb1fdb7df155
slave: talos-mtnlion-r5-009
[Child 1171] ###!!! ABORT: ActorDestroy by IPC channel failure at LayerTransactionChild: file ../../../../gfx/layers/ipc/LayerTransactionChild.cpp, line 89
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=924348#c11)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=28970748&tree=B2g-Inbound>
Rev5 MacOSX Mountain Lion 10.8 b2g-inbound opt test mochitest-3 on 2013-10-10 23:48:55
revision: 7e6ef5e5ec52
slave: talos-mtnlion-r5-029
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=924348#c12)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

:nigelb
<https://tbpl.mozilla.org/php/getParsedLog.php?id=28978764&tree=Mozilla-Inbound>
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound opt test mochitest-3 on 2013-10-11 04:20:04
revision: 3f25e5821ed0
slave: talos-mtnlion-r5-034
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ hashDestroy]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=924348#c13)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

Gijs
<https://tbpl.mozilla.org/php/getParsedLog.php?id=28981249&tree=UX>
Rev5 MacOSX Mountain Lion 10.8 ux opt test mochitest-3 on 2013-10-11 05:25:04
revision: a99a67ddfb41
slave: talos-mtnlion-r5-024
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ hashDestroy]
Return code: 256

|  | [:Gijs (he/him)](/user_profile?user_id=159069) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=924348#a266192_159069)• 11 years ago |

Summary: Intermittent PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie] → Intermittent PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie] or [@ hashDestroy]

|  | [Marco Bonardo [:mak]](/user_profile?user_id=240353) |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=924348#c14)• 11 years ago |
|  | |

I actually think it may be more related to the recent changes in [bug 874814](/show_bug.cgi?id=874814 "RESOLVED FIXED - [Storage] Implement OMT AsyncClose()"). I suppose early september or late August doesn't make a big difference.

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=924348#c15)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

RyanVM
<https://tbpl.mozilla.org/php/getParsedLog.php?id=29004151&tree=Mozilla-Central>
Rev5 MacOSX Mountain Lion 10.8 mozilla-central opt test mochitest-3 on 2013-10-11 13:57:55
revision: 342e9d40235a
slave: talos-mtnlion-r5-083
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ jemalloc\_crash]
Return code: 256

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=924348#c16)• 11 years ago |
|  | |

(In reply to Marco Bonardo [:mak] from [comment #14](/show_bug.cgi?id=924348#c14 "RESOLVED FIXED - Intermittent PROCESS-CRASH | /tests/dom/indexedDB/test/test_add_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie] or [@ hashDestroy]"))
> I actually think it may be more related to the recent changes in [bug 874814](/show_bug.cgi?id=874814 "RESOLVED FIXED - [Storage] Implement OMT AsyncClose()").
> I suppose early september or late August doesn't make a big difference.
The regression range seems to be solidly supporting the regression starting in the second week of September based on my Try bisecting thus far. Maybe I'm reading too much into things, but I can't help but notice that both this and [bug 925251](/show_bug.cgi?id=925251 "RESOLVED WORKSFORME - Intermittent PROCESS-CRASH | /tests/dom/indexedDB/test/test_add_put.html | application crashed [@ libobjc.A.dylib + 0x62d6]") are showing libnss on the stack as well?Depends on: [925251](/show_bug.cgi?id=925251 "RESOLVED WORKSFORME - Intermittent PROCESS-CRASH | /tests/dom/indexedDB/test/test_add_put.html | application crashed [@ libobjc.A.dylib + 0x62d6]")

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=924348#c17)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=29027650&tree=Profiling>
Rev4 MacOSX Lion 10.7 profiling opt test mochitest-3 on 2013-10-11 23:39:02
revision: cc28c67aa087
slave: talos-r4-lion-008
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=924348#c18)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

glandium
<https://tbpl.mozilla.org/php/getParsedLog.php?id=29029339&tree=Birch>
Rev5 MacOSX Mountain Lion 10.8 birch opt test mochitest-3 on 2013-10-12 00:38:57
revision: 71a41737ff7c
slave: talos-mtnlion-r5-030
[Child 1186] ###!!! ABORT: ActorDestroy by IPC channel failure at LayerTransactionChild: file ../../../../gfx/layers/ipc/LayerTransactionChild.cpp, line 89
[Child 1186] ###!!! ABORT: ActorDestroy by IPC channel failure at LayerTransactionChild: file ../../../../gfx/layers/ipc/LayerTransactionChild.cpp, line 89
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=924348#c19)• 11 years ago |
|  | |

Congratulations, Jan! Try bisection confirms that you are the lucky winner of the "who caused this orange?" award for your breakthrough performance in [bug 785884](/show_bug.cgi?id=785884 "RESOLVED FIXED - Implement support for temporary storage (aka shared pool)")!
If you could please take a look, it would be greatly appreciated :)Assignee: nobody → Jan.VargaBlocks: [785884](/show_bug.cgi?id=785884 "RESOLVED FIXED - Implement support for temporary storage (aka shared pool)")Flags: needinfo?(Jan.Varga)

|  | [Jan Varga [:janv]](/user_profile?user_id=8340)  Assignee |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=924348#c20)• 11 years ago |
|  | |

(In reply to Ryan VanderMeulen [:RyanVM UTC-4] from [comment #19](/show_bug.cgi?id=924348#c19 "RESOLVED FIXED - Intermittent PROCESS-CRASH | /tests/dom/indexedDB/test/test_add_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie] or [@ hashDestroy]"))
> Congratulations, Jan! Try bisection confirms that you are the lucky winner
> of the "who caused this orange?" award for your breakthrough performance in
> [bug 785884](/show_bug.cgi?id=785884 "RESOLVED FIXED - Implement support for temporary storage (aka shared pool)")!
>
> If you could please take a look, it would be greatly appreciated :)
What a pleasure :)
Seriously, I tried to avoid random failures by running under valgrind and re-triggering on try multiple times. I'll see what I can do.Flags: needinfo?(Jan.Varga)

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 21](/show_bug.cgi?id=924348#c21)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

Tomcat
<https://tbpl.mozilla.org/php/getParsedLog.php?id=29078817&tree=Mozilla-Inbound>
Rev4 MacOSX Lion 10.7 mozilla-inbound opt test mochitest-3 on 2013-10-14 04:56:26
revision: 11e3dd841e91
slave: talos-r4-lion-086
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ libsystem\_kernel.dylib + 0x16ce2]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 22](/show_bug.cgi?id=924348#c22)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

RyanVM
<https://tbpl.mozilla.org/php/getParsedLog.php?id=29096728&tree=Mozilla-Central>
Rev5 MacOSX Mountain Lion 10.8 mozilla-central opt test mochitest-3 on 2013-10-14 12:52:14
revision: 30afbcdcec4d
slave: talos-mtnlion-r5-071
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3DeleteTable]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 23](/show_bug.cgi?id=924348#c23)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

KWierso
<https://tbpl.mozilla.org/php/getParsedLog.php?id=29155746&tree=Mozilla-Inbound>
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound opt test mochitest-3 on 2013-10-15 15:54:05
revision: a2e78dec2ccf
slave: talos-mtnlion-r5-086
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ hashDestroy]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 24](/show_bug.cgi?id=924348#c24)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=29190770&tree=Mozilla-Inbound>
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound opt test mochitest-3 on 2013-10-16 07:50:32
revision: 89600e659123
slave: talos-mtnlion-r5-082
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 25](/show_bug.cgi?id=924348#c25)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=29253532&tree=Mozilla-Aurora>
Rev5 MacOSX Mountain Lion 10.8 mozilla-aurora opt test mochitest-3 on 2013-10-17 07:01:32
revision: 71669c1c97f5
slave: talos-mtnlion-r5-047
[Child 1179] ###!!! ABORT: ActorDestroy by IPC channel failure at LayerTransactionChild: file ../../../../gfx/layers/ipc/LayerTransactionChild.cpp, line 89
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | Exited with code 1 during test run
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 26](/show_bug.cgi?id=924348#c26)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

KWierso
<https://tbpl.mozilla.org/php/getParsedLog.php?id=29253532&tree=Mozilla-Aurora>
Rev5 MacOSX Mountain Lion 10.8 mozilla-aurora opt test mochitest-3 on 2013-10-17 07:01:32
revision: 71669c1c97f5
slave: talos-mtnlion-r5-047
[Child 1179] ###!!! ABORT: ActorDestroy by IPC channel failure at LayerTransactionChild: file ../../../../gfx/layers/ipc/LayerTransactionChild.cpp, line 89
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | Exited with code 1 during test run
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 27](/show_bug.cgi?id=924348#c27)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=29248048&tree=Birch>
Rev5 MacOSX Mountain Lion 10.8 birch opt test mochitest-3 on 2013-10-17 05:02:52
revision: bc4b0bbfe4f1
slave: talos-mtnlion-r5-012
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ hashDestroy]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 28](/show_bug.cgi?id=924348#c28)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

RyanVM
<https://tbpl.mozilla.org/php/getParsedLog.php?id=29257896&tree=B2g-Inbound>
Rev5 MacOSX Mountain Lion 10.8 b2g-inbound opt test mochitest-3 on 2013-10-17 09:31:07
revision: e2b2297d5c1e
slave: talos-mtnlion-r5-015
2791 ERROR TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/ipc/test\_ipc.html | /tests/dom/indexedDB/test/test\_getAll.html | This test left crash dumps behind, but we weren't expecting it to!
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ libsystem\_kernel.dylib + 0x12212]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 29](/show_bug.cgi?id=924348#c29)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

RyanVM
<https://tbpl.mozilla.org/php/getParsedLog.php?id=29260129&tree=Fx-Team>
Rev5 MacOSX Mountain Lion 10.8 fx-team opt test mochitest-3 on 2013-10-17 10:16:01
revision: 1de0620d8ab9
slave: talos-mtnlion-r5-025
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3HashFind]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 30](/show_bug.cgi?id=924348#c30)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=29279162&tree=Mozilla-Inbound>
Rev4 MacOSX Snow Leopard 10.6 mozilla-inbound opt test mochitest-3 on 2013-10-17 16:40:39
revision: 999ed39dc0e7
slave: talos-r4-snow-074
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3DeleteTable]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 31](/show_bug.cgi?id=924348#c31)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

Tomcat
<https://tbpl.mozilla.org/php/getParsedLog.php?id=29304576&tree=Mozilla-Inbound>
Rev4 MacOSX Lion 10.7 mozilla-inbound opt test mochitest-3 on 2013-10-18 03:46:42
revision: d50df2233e95
slave: talos-r4-lion-004
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 32](/show_bug.cgi?id=924348#c32)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

RyanVM
<https://tbpl.mozilla.org/php/getParsedLog.php?id=29324190&tree=Fx-Team>
Rev5 MacOSX Mountain Lion 10.8 fx-team opt test mochitest-3 on 2013-10-18 11:50:20
revision: 894025edbb7b
slave: talos-mtnlion-r5-089
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 33](/show_bug.cgi?id=924348#c33)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=29384068&tree=Mozilla-Inbound>
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound opt test mochitest-3 on 2013-10-19 18:15:17
revision: 2d46b79963e8
slave: talos-mtnlion-r5-061
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 34](/show_bug.cgi?id=924348#c34)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=29385363&tree=Mozilla-Inbound>
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound opt test mochitest-3 on 2013-10-19 19:20:18
revision: a900ff4a5498
slave: talos-mtnlion-r5-061
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 35](/show_bug.cgi?id=924348#c35)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

Ms2ger%gmail.com
<https://tbpl.mozilla.org/php/getParsedLog.php?id=29398206&tree=Mozilla-Central>
Rev5 MacOSX Mountain Lion 10.8 mozilla-central opt test mochitest-3 on 2013-10-20 01:57:28
revision: 182b8450e32f
slave: talos-mtnlion-r5-050
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3DeleteTable]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 36](/show_bug.cgi?id=924348#c36)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=29395265&tree=Fx-Team>
Rev4 MacOSX Lion 10.7 fx-team opt test mochitest-3 on 2013-10-20 00:08:14
revision: 92c512181d1c
slave: talos-r4-lion-090
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 37](/show_bug.cgi?id=924348#c37)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

glandium
<https://tbpl.mozilla.org/php/getParsedLog.php?id=29397921&tree=Birch>
Rev5 MacOSX Mountain Lion 10.8 birch opt test mochitest-3 on 2013-10-20 01:49:18
revision: 88f08c62da83
slave: talos-mtnlion-r5-034
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 38](/show_bug.cgi?id=924348#c38)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=29456993&tree=Mozilla-Inbound>
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound opt test mochitest-3 on 2013-10-21 15:22:44
revision: 2f50c6ff8124
slave: talos-mtnlion-r5-074
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 39](/show_bug.cgi?id=924348#c39)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=29465955&tree=Mozilla-Central>
Rev5 MacOSX Mountain Lion 10.8 mozilla-central opt test mochitest-3 on 2013-10-21 18:31:52
revision: e844717bea5d
slave: talos-mtnlion-r5-079
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3HashFind]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 40](/show_bug.cgi?id=924348#c40)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

:nigelb
<https://tbpl.mozilla.org/php/getParsedLog.php?id=29468788&tree=Fx-Team>
Rev4 MacOSX Lion 10.7 fx-team opt test mochitest-3 on 2013-10-21 19:30:26
revision: fee649b730fe
slave: talos-r4-lion-029
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 41](/show_bug.cgi?id=924348#c41)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

:nigelb
<https://tbpl.mozilla.org/php/getParsedLog.php?id=29468621&tree=Fx-Team>
Rev5 MacOSX Mountain Lion 10.8 fx-team opt test mochitest-3 on 2013-10-21 19:26:19
revision: fee649b730fe
slave: talos-mtnlion-r5-015
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ hashDestroy]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 42](/show_bug.cgi?id=924348#c42)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

mbrubeck
<https://tbpl.mozilla.org/php/getParsedLog.php?id=29509929&tree=Mozilla-Aurora>
Rev4 MacOSX Lion 10.7 mozilla-aurora opt test mochitest-3 on 2013-10-22 13:16:16
revision: 51b7db60a117
slave: talos-r4-lion-064
[Child 1255] ###!!! ABORT: ActorDestroy by IPC channel failure at LayerTransactionChild: file ../../../../gfx/layers/ipc/LayerTransactionChild.cpp, line 89
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | Exited with code 1 during test run
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 43](/show_bug.cgi?id=924348#c43)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=29528377&tree=Mozilla-Inbound>
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound opt test mochitest-3 on 2013-10-22 20:37:52
revision: 9a82f8dbb719
slave: talos-mtnlion-r5-027
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 44](/show_bug.cgi?id=924348#c44)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

Tomcat
<https://tbpl.mozilla.org/php/getParsedLog.php?id=29539208&tree=Fx-Team>
Rev5 MacOSX Mountain Lion 10.8 fx-team opt test mochitest-3 on 2013-10-23 03:17:40
revision: 7bdb63636763
slave: talos-mtnlion-r5-065
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3DeleteTable]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 45](/show_bug.cgi?id=924348#c45)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

Gijs
<https://tbpl.mozilla.org/php/getParsedLog.php?id=29552824&tree=UX>
Rev4 MacOSX Lion 10.7 ux opt test mochitest-3 on 2013-10-23 08:31:24
revision: fb23ad2d94e8
slave: talos-r4-lion-020
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 46](/show_bug.cgi?id=924348#c46)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=29568121&tree=Fx-Team>
Rev4 MacOSX Lion 10.7 fx-team opt test mochitest-3 on 2013-10-23 14:34:19
revision: 70e1e02b917d
slave: talos-r4-lion-090
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 47](/show_bug.cgi?id=924348#c47)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

Gijs
<https://tbpl.mozilla.org/php/getParsedLog.php?id=29591175&tree=Try>
Rev4 MacOSX Lion 10.7 try opt test mochitest-3 on 2013-10-24 03:41:23
revision: ab5b0529d4ff
slave: talos-r4-lion-075
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 48](/show_bug.cgi?id=924348#c48)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=29614669&tree=Mozilla-Inbound>
Rev4 MacOSX Lion 10.7 mozilla-inbound opt test mochitest-3 on 2013-10-24 12:00:58
revision: 075fc0110d9f
slave: talos-r4-lion-026
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 49](/show_bug.cgi?id=924348#c49)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

edmorley
<https://tbpl.mozilla.org/php/getParsedLog.php?id=29644461&tree=Fx-Team>
Rev5 MacOSX Mountain Lion 10.8 fx-team opt test mochitest-3 on 2013-10-25 01:15:10
revision: 10f395671f71
slave: talos-mtnlion-r5-020
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ hashDestroy]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 50](/show_bug.cgi?id=924348#c50)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

Tomcat
<https://tbpl.mozilla.org/php/getParsedLog.php?id=29647661&tree=Mozilla-Central>
Rev4 MacOSX Lion 10.7 mozilla-central opt test mochitest-3 on 2013-10-25 02:49:18
revision: 19fd3388c372
slave: talos-r4-lion-041
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 51](/show_bug.cgi?id=924348#c51)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

Tomcat
<https://tbpl.mozilla.org/php/getParsedLog.php?id=29647614&tree=Mozilla-Central>
Rev4 MacOSX Snow Leopard 10.6 mozilla-central opt test mochitest-3 on 2013-10-25 02:48:54
revision: 19fd3388c372
slave: talos-r4-snow-054
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 52](/show_bug.cgi?id=924348#c52)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=29667395&tree=Mozilla-Inbound>
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound opt test mochitest-3 on 2013-10-25 09:30:41
revision: 8803d874cbea
slave: talos-mtnlion-r5-022
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 53](/show_bug.cgi?id=924348#c53)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=29681421&tree=Mozilla-Aurora>
Rev5 MacOSX Mountain Lion 10.8 mozilla-aurora opt test mochitest-3 on 2013-10-25 13:59:09
revision: c03fca78a73f
slave: talos-mtnlion-r5-054
[Child 1174] ###!!! ABORT: ActorDestroy by IPC channel failure at LayerTransactionChild: file ../../../../gfx/layers/ipc/LayerTransactionChild.cpp, line 89
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | Exited with code 1 during test run
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 54](/show_bug.cgi?id=924348#c54)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=29685299&tree=Mozilla-Inbound>
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound opt test mochitest-3 on 2013-10-25 15:42:25
revision: c6a4d3416d87
slave: talos-mtnlion-r5-031
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 55](/show_bug.cgi?id=924348#c55)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=29721935&tree=Fx-Team>
Rev4 MacOSX Snow Leopard 10.6 fx-team opt test mochitest-3 on 2013-10-26 14:32:10
revision: 583e0e090fc7
slave: talos-r4-snow-042
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 56](/show_bug.cgi?id=924348#c56)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=29722862&tree=Mozilla-Inbound>
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound opt test mochitest-3 on 2013-10-26 15:12:12
revision: f78e6b91ad8d
slave: talos-mtnlion-r5-077
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ libobjc.A.dylib + 0x9979]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 57](/show_bug.cgi?id=924348#c57)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=29723179&tree=Mozilla-Inbound>
Rev4 MacOSX Snow Leopard 10.6 mozilla-inbound opt test mochitest-3 on 2013-10-26 15:23:23
revision: c63dfd127858
slave: talos-r4-snow-072
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 58](/show_bug.cgi?id=924348#c58)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=29726070&tree=Mozilla-Inbound>
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound opt test mochitest-3 on 2013-10-26 17:13:12
revision: 5badb4022e83
slave: talos-mtnlion-r5-057
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ hashDestroy]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 59](/show_bug.cgi?id=924348#c59)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

nalexander
<https://tbpl.mozilla.org/php/getParsedLog.php?id=29669326&tree=Elm>
Rev5 MacOSX Mountain Lion 10.8 elm opt test mochitest-3 on 2013-10-25 10:14:57
revision: 8de9317c8bcd
slave: talos-mtnlion-r5-034
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ hashDestroy]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 60](/show_bug.cgi?id=924348#c60)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

Tomcat
<https://tbpl.mozilla.org/php/getParsedLog.php?id=29770998&tree=Mozilla-Aurora>
Rev5 MacOSX Mountain Lion 10.8 mozilla-aurora opt test mochitest-3 on 2013-10-28 05:06:49
revision: 5c3d00c8fc5d
slave: talos-mtnlion-r5-037
[Child 1206] ###!!! ABORT: ActorDestroy by IPC channel failure at LayerTransactionChild: file ../../../../gfx/layers/ipc/LayerTransactionChild.cpp, line 89
[Child 1206] ###!!! ABORT: ActorDestroy by IPC channel failure at LayerTransactionChild: file ../../../../gfx/layers/ipc/LayerTransactionChild.cpp, line 89
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | Exited with code 1 during test run
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 61](/show_bug.cgi?id=924348#c61)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=29785162&tree=Mozilla-Inbound>
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound opt test mochitest-3 on 2013-10-28 10:34:31
revision: 7c4c2e8d2267
slave: talos-mtnlion-r5-027
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ hashDestroy]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 62](/show_bug.cgi?id=924348#c62)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=29792063&tree=Mozilla-Inbound>
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound opt test mochitest-3 on 2013-10-28 12:54:19
revision: 101106bdce31
slave: talos-mtnlion-r5-034
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 63](/show_bug.cgi?id=924348#c63)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

Tomcat
<https://tbpl.mozilla.org/php/getParsedLog.php?id=29798350&tree=B2g-Inbound>
Rev5 MacOSX Mountain Lion 10.8 b2g-inbound opt test mochitest-3 on 2013-10-28 15:02:52
revision: 862fbd85f847
slave: talos-mtnlion-r5-020
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 64](/show_bug.cgi?id=924348#c64)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

Tomcat
<https://tbpl.mozilla.org/php/getParsedLog.php?id=29835619&tree=Mozilla-Inbound>
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound opt test mochitest-3 on 2013-10-29 06:55:42
revision: 66d14f6329ca
slave: talos-mtnlion-r5-046
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 65](/show_bug.cgi?id=924348#c65)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

RyanVM
<https://tbpl.mozilla.org/php/getParsedLog.php?id=29926842&tree=B2g-Inbound>
Rev5 MacOSX Mountain Lion 10.8 b2g-inbound opt test mochitest-3 on 2013-10-31 09:16:17
revision: c38e10b1be8b
slave: talos-mtnlion-r5-075
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 66](/show_bug.cgi?id=924348#c66)• 11 years ago |
|  | |

(In reply to Jan Varga [:janv] from [comment #20](/show_bug.cgi?id=924348#c20 "RESOLVED FIXED - Intermittent PROCESS-CRASH | /tests/dom/indexedDB/test/test_add_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie] or [@ hashDestroy]"))
> What a pleasure :)
> Seriously, I tried to avoid random failures by running under valgrind and
> re-triggering on try multiple times. I'll see what I can do.
This is now merged to even more branches. Can you please take a look soon? :)Flags: needinfo?(Jan.Varga)

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 67](/show_bug.cgi?id=924348#c67)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

RyanVM
<https://tbpl.mozilla.org/php/getParsedLog.php?id=29984490&tree=Fx-Team>
Rev4 MacOSX Snow Leopard 10.6 fx-team opt test mochitest-3 on 2013-11-01 11:42:18
revision: 271b1a2fde86
slave: talos-r4-snow-082
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 68](/show_bug.cgi?id=924348#c68)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

Gijs
<https://tbpl.mozilla.org/php/getParsedLog.php?id=30022917&tree=Mozilla-Central>
Rev5 MacOSX Mountain Lion 10.8 mozilla-central opt test mochitest-3 on 2013-11-02 06:33:28
revision: 3e17b9c2cd5a
slave: talos-mtnlion-r5-062
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3DeleteTable]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 69](/show_bug.cgi?id=924348#c69)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

jimm
<https://tbpl.mozilla.org/php/getParsedLog.php?id=30035887&tree=Mozilla-Central>
Rev4 MacOSX Snow Leopard 10.6 mozilla-central opt test mochitest-3 on 2013-11-02 16:47:40
revision: 47c8e9b16918
slave: talos-r4-snow-044
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 70](/show_bug.cgi?id=924348#c70)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

:nigelb
<https://tbpl.mozilla.org/php/getParsedLog.php?id=30032653&tree=Mozilla-Inbound>
Rev4 MacOSX Lion 10.7 mozilla-inbound opt test mochitest-3 on 2013-11-02 12:26:22
revision: c7a1b26c690b
slave: talos-r4-lion-018
2780 ERROR TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/ipc/test\_ipc.html | /tests/dom/indexedDB/test/test\_getAll.html | indexedDB error, 'UnknownError'
2781 ERROR TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/ipc/test\_ipc.html | /tests/dom/indexedDB/test/test\_getAll.html | uncaught exception - UnknownError at [http://mochi.test:8888/tests/dom/indexedDB/test/unit/test\_getAll.js:143](http://mochi.test:8888/tests/dom/indexedDB/test/unit/test_getAll.js%3A143)
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 71](/show_bug.cgi?id=924348#c71)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=30051344&tree=Mozilla-Inbound>
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound opt test mochitest-3 on 2013-11-03 14:07:27
revision: c435419ae121
slave: talos-mtnlion-r5-009
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3DeleteTable]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 72](/show_bug.cgi?id=924348#c72)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=30058629&tree=Mozilla-Inbound>
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound opt test mochitest-3 on 2013-11-03 18:16:18
revision: 3dddba67772f
slave: talos-mtnlion-r5-008
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 73](/show_bug.cgi?id=924348#c73)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=30062655&tree=Mozilla-Inbound>
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound opt test mochitest-3 on 2013-11-03 21:40:27
revision: d624c548c68f
slave: talos-mtnlion-r5-053
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 74](/show_bug.cgi?id=924348#c74)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=30077080&tree=Mozilla-Central>
Rev5 MacOSX Mountain Lion 10.8 mozilla-central opt test mochitest-3 on 2013-11-04 06:43:46
revision: b4143e04bea1
slave: talos-mtnlion-r5-082
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 75](/show_bug.cgi?id=924348#c75)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=30076685&tree=Mozilla-Inbound>
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound opt test mochitest-3 on 2013-11-04 06:35:33
revision: fec854fceba6
slave: talos-mtnlion-r5-054
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 76](/show_bug.cgi?id=924348#c76)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=30081153&tree=Mozilla-Inbound>
Rev4 MacOSX Snow Leopard 10.6 mozilla-inbound opt test mochitest-3 on 2013-11-04 08:09:49
revision: 0cdec2743961
slave: talos-r4-snow-074
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 77](/show_bug.cgi?id=924348#c77)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

RyanVM
<https://tbpl.mozilla.org/php/getParsedLog.php?id=30087482&tree=Mozilla-Aurora>
Rev5 MacOSX Mountain Lion 10.8 mozilla-aurora opt test mochitest-3 on 2013-11-04 10:14:33
revision: c24b1290afa9
slave: talos-mtnlion-r5-089
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 78](/show_bug.cgi?id=924348#c78)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=30088149&tree=Mozilla-Aurora>
Rev5 MacOSX Mountain Lion 10.8 mozilla-aurora opt test mochitest-3 on 2013-11-04 10:33:38
revision: c24b1290afa9
slave: talos-mtnlion-r5-081
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 79](/show_bug.cgi?id=924348#c79)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=30089889&tree=Fx-Team>
Rev4 MacOSX Snow Leopard 10.6 fx-team opt test mochitest-3 on 2013-11-04 11:28:01
revision: 547c6caec56f
slave: talos-r4-snow-049
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 80](/show_bug.cgi?id=924348#c80)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

RyanVM
<https://tbpl.mozilla.org/php/getParsedLog.php?id=30090186&tree=Mozilla-B2g26-v1.2>
Rev5 MacOSX Mountain Lion 10.8 mozilla-b2g26\_v1\_2 opt test mochitest-3 on 2013-11-04 11:32:10
revision: 9a406bdee063
slave: talos-mtnlion-r5-067
[Child 1197] ###!!! ABORT: ActorDestroy by IPC channel failure at LayerTransactionChild: file ../../../../gfx/layers/ipc/LayerTransactionChild.cpp, line 89
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | Exited with code 1 during test run
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 81](/show_bug.cgi?id=924348#c81)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

KWierso
<https://tbpl.mozilla.org/php/getParsedLog.php?id=30114461&tree=B2g-Inbound>
Rev5 MacOSX Mountain Lion 10.8 b2g-inbound opt test mochitest-3 on 2013-11-04 20:03:46
revision: b75d91e8857e
slave: talos-mtnlion-r5-061
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 82](/show_bug.cgi?id=924348#c82)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

RyanVM
<https://tbpl.mozilla.org/php/getParsedLog.php?id=30115798&tree=Mozilla-Aurora>
Rev5 MacOSX Mountain Lion 10.8 mozilla-aurora opt test mochitest-3 on 2013-11-04 20:29:51
revision: be1b50532970
slave: talos-mtnlion-r5-064
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 83](/show_bug.cgi?id=924348#c83)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

RyanVM
<https://tbpl.mozilla.org/php/getParsedLog.php?id=30163180&tree=Mozilla-Central>
Rev5 MacOSX Mountain Lion 10.8 mozilla-central opt test mochitest-3 on 2013-11-05 13:41:53
revision: e56c4e366fe8
slave: talos-mtnlion-r5-085
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ jemalloc\_crash]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 84](/show_bug.cgi?id=924348#c84)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

RyanVM
<https://tbpl.mozilla.org/php/getParsedLog.php?id=30178062&tree=Mozilla-Central>
Rev5 MacOSX Mountain Lion 10.8 mozilla-central opt test mochitest-3 on 2013-11-05 18:54:48
revision: ce0d975320e7
slave: talos-mtnlion-r5-086
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ jemalloc\_crash]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 85](/show_bug.cgi?id=924348#c85)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=30179338&tree=Mozilla-Central>
Rev5 MacOSX Mountain Lion 10.8 mozilla-central opt test mochitest-3 on 2013-11-05 19:31:34
revision: ce0d975320e7
slave: talos-mtnlion-r5-074
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 86](/show_bug.cgi?id=924348#c86)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=30177603&tree=Mozilla-Inbound>
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound opt test mochitest-3 on 2013-11-05 18:39:47
revision: d99efe50d071
slave: talos-mtnlion-r5-038
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ hashDestroy]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 87](/show_bug.cgi?id=924348#c87)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=30187122&tree=Mozilla-Inbound>
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound opt test mochitest-3 on 2013-11-05 22:29:51
revision: f86c5c6d100d
slave: talos-mtnlion-r5-027
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 88](/show_bug.cgi?id=924348#c88)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

Tomcat
<https://tbpl.mozilla.org/php/getParsedLog.php?id=30190882&tree=Fx-Team>
Rev5 MacOSX Mountain Lion 10.8 fx-team opt test mochitest-3 on 2013-11-05 23:47:57
revision: 9fd1c7feb8c0
slave: talos-mtnlion-r5-055
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 89](/show_bug.cgi?id=924348#c89)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

Tomcat
<https://tbpl.mozilla.org/php/getParsedLog.php?id=30196103&tree=Mozilla-Aurora>
Rev5 MacOSX Mountain Lion 10.8 mozilla-aurora opt test mochitest-3 on 2013-11-06 02:11:30
revision: af787a8774d6
slave: talos-mtnlion-r5-046
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 1280
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ libsystem\_kernel.dylib + 0x12212]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 90](/show_bug.cgi?id=924348#c90)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

RyanVM
<https://tbpl.mozilla.org/php/getParsedLog.php?id=30219008&tree=Mozilla-Central>
Rev4 MacOSX Snow Leopard 10.6 mozilla-central opt test mochitest-3 on 2013-11-06 10:41:02
revision: 030e365d7c26
slave: talos-r4-snow-047
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3HashFind]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 91](/show_bug.cgi?id=924348#c91)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=30220020&tree=Mozilla-Inbound>
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound opt test mochitest-3 on 2013-11-06 10:56:07
revision: 19407884ee17
slave: talos-mtnlion-r5-086
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ hashDestroy]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 92](/show_bug.cgi?id=924348#c92)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=30241513&tree=Fx-Team>
Rev5 MacOSX Mountain Lion 10.8 fx-team opt test mochitest-3 on 2013-11-06 17:10:27
revision: 393e70ad5cd9
slave: talos-mtnlion-r5-004
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 93](/show_bug.cgi?id=924348#c93)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=30242183&tree=Fx-Team>
Rev5 MacOSX Mountain Lion 10.8 fx-team opt test mochitest-3 on 2013-11-06 17:27:54
revision: 393e70ad5cd9
slave: talos-mtnlion-r5-023
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 94](/show_bug.cgi?id=924348#c94)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=30242680&tree=Mozilla-Inbound>
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound opt test mochitest-3 on 2013-11-06 17:42:17
revision: 1426425fc177
slave: talos-mtnlion-r5-022
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Kyle Huey (Exited; not receiving bugmail, old account, do not use)](/user_profile?user_id=336670) |  |
| --- | --- | --- |
| [Comment 95](/show_bug.cgi?id=924348#c95)• 11 years ago |
|  | |

See also [bug 925251](/show_bug.cgi?id=925251 "RESOLVED WORKSFORME - Intermittent PROCESS-CRASH | /tests/dom/indexedDB/test/test_add_put.html | application crashed [@ libobjc.A.dylib + 0x62d6]").

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 96](/show_bug.cgi?id=924348#c96)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

Tomcat
<https://tbpl.mozilla.org/php/getParsedLog.php?id=30261280&tree=Mozilla-Inbound>
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound opt test mochitest-3 on 2013-11-07 01:43:26
revision: f48aa69ea925
slave: talos-mtnlion-r5-001
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 97](/show_bug.cgi?id=924348#c97)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=30284454&tree=Mozilla-Inbound>
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound opt test mochitest-3 on 2013-11-07 11:29:58
revision: 6c40724f1a0e
slave: talos-mtnlion-r5-025
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 98](/show_bug.cgi?id=924348#c98)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

RyanVM
<https://tbpl.mozilla.org/php/getParsedLog.php?id=30284454&tree=Mozilla-Inbound>
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound opt test mochitest-3 on 2013-11-07 11:29:58
revision: 6c40724f1a0e
slave: talos-mtnlion-r5-025
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 99](/show_bug.cgi?id=924348#c99)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=30353992&tree=Mozilla-Inbound>
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound opt test mochitest-3 on 2013-11-08 16:27:10
revision: edbf63c3afe2
slave: talos-mtnlion-r5-056
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ jemalloc\_crash]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 100](/show_bug.cgi?id=924348#c100)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

Tomcat
<https://tbpl.mozilla.org/php/getParsedLog.php?id=30359821&tree=Fx-Team>
Rev5 MacOSX Mountain Lion 10.8 fx-team opt test mochitest-3 on 2013-11-08 18:21:45
revision: 9cd77ae4b7fa
slave: talos-mtnlion-r5-089
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ hashDestroy]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 101](/show_bug.cgi?id=924348#c101)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

Tomcat
<https://tbpl.mozilla.org/php/getParsedLog.php?id=30369243&tree=Mozilla-Inbound>
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound opt test mochitest-3 on 2013-11-09 02:33:21
revision: db2f368bf999
slave: talos-mtnlion-r5-068
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ hashDestroy]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 102](/show_bug.cgi?id=924348#c102)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=30476122&tree=Fx-Team>
Rev5 MacOSX Mountain Lion 10.8 fx-team opt test mochitest-3 on 2013-11-12 08:59:01
revision: ae53e9ff293d
slave: talos-mtnlion-r5-050
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 103](/show_bug.cgi?id=924348#c103)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=30504752&tree=Mozilla-Inbound>
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound opt test mochitest-3 on 2013-11-12 17:52:40
revision: e70c1287741e
slave: talos-mtnlion-r5-029
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3HashInsert]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 104](/show_bug.cgi?id=924348#c104)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

Tomcat
<https://tbpl.mozilla.org/php/getParsedLog.php?id=30562374&tree=Mozilla-Central>
Rev5 MacOSX Mountain Lion 10.8 mozilla-central opt test mochitest-3 on 2013-11-14 04:38:28
revision: 7b014f0f3b03
slave: talos-mtnlion-r5-040
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 105](/show_bug.cgi?id=924348#c105)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

Gijs
<https://tbpl.mozilla.org/php/getParsedLog.php?id=30569365&tree=UX>
Rev5 MacOSX Mountain Lion 10.8 ux opt test mochitest-3 on 2013-11-14 12:01:19
revision: b1fea06d28d2
slave: talos-mtnlion-r5-044
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 106](/show_bug.cgi?id=924348#c106)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

Tomcat
<https://tbpl.mozilla.org/php/getParsedLog.php?id=30592219&tree=B2g-Inbound>
Rev5 MacOSX Mountain Lion 10.8 b2g-inbound opt test mochitest-3 on 2013-11-15 02:59:18
revision: f49134e2a4dc
slave: talos-mtnlion-r5-031
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 1280
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ libsystem\_kernel.dylib + 0x12212]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 107](/show_bug.cgi?id=924348#c107)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=30651130&tree=Mozilla-Inbound>
Rev4 MacOSX Lion 10.7 mozilla-inbound opt test mochitest-3 on 2013-11-17 08:00:40
revision: 03f041d03f24
slave: talos-r4-lion-003
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ jemalloc\_crash]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 108](/show_bug.cgi?id=924348#c108)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

Tomcat
<https://tbpl.mozilla.org/php/getParsedLog.php?id=30645420&tree=Mozilla-B2g26-v1.2>
Rev5 MacOSX Mountain Lion 10.8 mozilla-b2g26\_v1\_2 opt test mochitest-3 on 2013-11-17 04:37:23
revision: 3e8b854a992e
slave: talos-mtnlion-r5-068
[Child 1186] ###!!! ABORT: ActorDestroy by IPC channel failure at LayerTransactionChild: file ../../../../gfx/layers/ipc/LayerTransactionChild.cpp, line 89
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | Exited with code 1 during test run
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ hashDestroy]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 109](/show_bug.cgi?id=924348#c109)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=30731223&tree=Mozilla-Aurora>
Rev5 MacOSX Mountain Lion 10.8 mozilla-aurora opt test mochitest-3 on 2013-11-18 16:55:48
revision: bc5422262107
slave: talos-mtnlion-r5-042
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3DeleteTable]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 110](/show_bug.cgi?id=924348#c110)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=30735188&tree=Mozilla-Beta>
Rev4 MacOSX Lion 10.7 mozilla-beta opt test mochitest-3 on 2013-11-18 18:13:05
revision: 266f8698dbb8
slave: talos-r4-lion-080
[Child 1274] ###!!! ABORT: ActorDestroy by IPC channel failure at LayerTransactionChild: file ../../../../gfx/layers/ipc/LayerTransactionChild.cpp, line 89
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | Exited with code 1 during test run
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3DeleteTable]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 111](/show_bug.cgi?id=924348#c111)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=30743897&tree=Mozilla-Inbound>
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound opt test mochitest-3 on 2013-11-18 21:56:06
revision: e1e55ac4e33d
slave: talos-mtnlion-r5-025
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 112](/show_bug.cgi?id=924348#c112)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

Tomcat
<https://tbpl.mozilla.org/php/getParsedLog.php?id=30752309&tree=B2g-Inbound>
Rev5 MacOSX Mountain Lion 10.8 b2g-inbound opt test mochitest-3 on 2013-11-19 00:58:38
revision: ec9537f875a2
slave: talos-mtnlion-r5-044
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 113](/show_bug.cgi?id=924348#c113)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

Tomcat
<https://tbpl.mozilla.org/php/getParsedLog.php?id=30753878&tree=Mozilla-Inbound>
Rev4 MacOSX Snow Leopard 10.6 mozilla-inbound opt test mochitest-3 on 2013-11-19 01:40:31
revision: 027fced104dc
slave: talos-r4-snow-025
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 114](/show_bug.cgi?id=924348#c114)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

Tomcat
<https://tbpl.mozilla.org/php/getParsedLog.php?id=30760788&tree=Fx-Team>
Rev5 MacOSX Mountain Lion 10.8 fx-team opt test mochitest-3 on 2013-11-19 04:34:58
revision: ab49c1ad9f2b
slave: talos-mtnlion-r5-040
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ hashDestroy]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 115](/show_bug.cgi?id=924348#c115)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

Gijs
<https://tbpl.mozilla.org/php/getParsedLog.php?id=30760788&tree=Fx-Team>
Rev5 MacOSX Mountain Lion 10.8 fx-team opt test mochitest-3 on 2013-11-19 04:34:58
revision: ab49c1ad9f2b
slave: talos-mtnlion-r5-040
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ hashDestroy]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 116](/show_bug.cgi?id=924348#c116)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=30797223&tree=Mozilla-Inbound>
WINNT 6.2 mozilla-inbound pgo test mochitest-3 on 2013-11-19 16:30:39
revision: 133f7eae3078
slave: t-w864-ix-109
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 3221225477
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3Fts3HashClear]
Return code: 1

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 117](/show_bug.cgi?id=924348#c117)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

RyanVM
<https://tbpl.mozilla.org/php/getParsedLog.php?id=30841979&tree=B2g-Inbound>
Rev5 MacOSX Mountain Lion 10.8 b2g-inbound opt test mochitest-3 on 2013-11-20 10:21:19
revision: b9889f5c0844
slave: talos-mtnlion-r5-050
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3DeleteTable]
Return code: 256

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=924348#a3744268_75935)• 11 years ago |

Flags: needinfo?(Jan.Varga)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 118](/show_bug.cgi?id=924348#c118)• 11 years ago |
|  | |

Ping (again).Flags: needinfo?(Jan.Varga)

|  | [Jan Varga [:janv]](/user_profile?user_id=8340)  Assignee |  |
| --- | --- | --- |
| [Comment 119](/show_bug.cgi?id=924348#c119)• 11 years ago |
|  | |

(In reply to Ryan VanderMeulen [:RyanVM UTC-5] from [comment #118](/show_bug.cgi?id=924348#c118 "RESOLVED FIXED - Intermittent PROCESS-CRASH | /tests/dom/indexedDB/test/test_add_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie] or [@ hashDestroy]"))
> Ping (again).
I'm investigating it, upgrading to SQLite 3.8.1 didn't help.
It's quite hard since it only happens in optimized builds :(Flags: needinfo?(Jan.Varga)

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 120](/show_bug.cgi?id=924348#c120)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

Tomcat
<https://tbpl.mozilla.org/php/getParsedLog.php?id=30883612&tree=B2g-Inbound>
Rev5 MacOSX Mountain Lion 10.8 b2g-inbound opt test mochitest-3 on 2013-11-21 02:08:44
revision: b27854cba9c2
slave: talos-mtnlion-r5-007
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 1280
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ libsystem\_kernel.dylib + 0x12212]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 121](/show_bug.cgi?id=924348#c121)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

Tomcat
<https://tbpl.mozilla.org/php/getParsedLog.php?id=30886782&tree=B2g-Inbound>
Rev5 MacOSX Mountain Lion 10.8 b2g-inbound opt test mochitest-3 on 2013-11-21 03:39:11
revision: 861bcc802dc8
slave: talos-mtnlion-r5-022
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 122](/show_bug.cgi?id=924348#c122)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

RyanVM
<https://tbpl.mozilla.org/php/getParsedLog.php?id=30903903&tree=Mozilla-Central>
Rev5 MacOSX Mountain Lion 10.8 mozilla-central opt test mochitest-3 on 2013-11-21 09:59:55
revision: c7cbfa315d46
slave: talos-mtnlion-r5-007
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 123](/show_bug.cgi?id=924348#c123)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=30903903&tree=Mozilla-Central>
Rev5 MacOSX Mountain Lion 10.8 mozilla-central opt test mochitest-3 on 2013-11-21 09:59:55
revision: c7cbfa315d46
slave: talos-mtnlion-r5-007
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 124](/show_bug.cgi?id=924348#c124)• 11 years ago |
|  | |

(In reply to Jan Varga [:janv] from [comment #119](/show_bug.cgi?id=924348#c119 "RESOLVED FIXED - Intermittent PROCESS-CRASH | /tests/dom/indexedDB/test/test_add_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie] or [@ hashDestroy]"))
> I'm investigating it, upgrading to SQLite 3.8.1 didn't help.
Given that this started prior to SQLite 3.8.0 landing, is that a surprise?

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 125](/show_bug.cgi?id=924348#c125)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=30905911&tree=Mozilla-Inbound>
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound opt test mochitest-3 on 2013-11-21 10:33:52
revision: 3893c3542f07
slave: talos-mtnlion-r5-076
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 126](/show_bug.cgi?id=924348#c126)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

RyanVM
<https://tbpl.mozilla.org/php/getParsedLog.php?id=30913326&tree=Fx-Team>
Rev5 MacOSX Mountain Lion 10.8 fx-team opt test mochitest-3 on 2013-11-21 12:50:10
revision: e776a51ffc1d
slave: talos-mtnlion-r5-029
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ hashDestroy]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 127](/show_bug.cgi?id=924348#c127)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

RyanVM
<https://tbpl.mozilla.org/php/getParsedLog.php?id=30918451&tree=Mozilla-B2g26-v1.2>
Rev4 MacOSX Lion 10.7 mozilla-b2g26\_v1\_2 opt test mochitest-3 on 2013-11-21 14:12:46
revision: a00fb98ad21c
slave: talos-r4-lion-070
[Child 1267] ###!!! ABORT: ActorDestroy by IPC channel failure at LayerTransactionChild: file ../../../../gfx/layers/ipc/LayerTransactionChild.cpp, line 89
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | Exited with code 1 during test run
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 128](/show_bug.cgi?id=924348#c128)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

Tomcat
<https://tbpl.mozilla.org/php/getParsedLog.php?id=30956939&tree=Mozilla-Inbound>
Rev4 MacOSX Snow Leopard 10.6 mozilla-inbound opt test mochitest-3 on 2013-11-22 06:12:38
revision: fdb9fe9e898f
slave: talos-r4-snow-017
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 129](/show_bug.cgi?id=924348#c129)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

RyanVM
<https://tbpl.mozilla.org/php/getParsedLog.php?id=30974744&tree=Mozilla-Inbound>
Rev4 MacOSX Lion 10.7 mozilla-inbound opt test mochitest-3 on 2013-11-22 12:38:10
revision: 94c3daf6e242
slave: talos-r4-lion-070
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 130](/show_bug.cgi?id=924348#c130)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

Gijs
<https://tbpl.mozilla.org/php/getParsedLog.php?id=31002748&tree=Holly>
Rev4 MacOSX Lion 10.7 holly opt test mochitest-3 on 2013-11-23 09:59:20
revision: ab00c21a2590
slave: talos-r4-lion-044
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 131](/show_bug.cgi?id=924348#c131)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=31014388&tree=Mozilla-Inbound>
Rev4 MacOSX Lion 10.7 mozilla-inbound opt test mochitest-3 on 2013-11-23 18:49:45
revision: e4b5ab3610da
slave: talos-r4-lion-015
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ 0x10295568000]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 132](/show_bug.cgi?id=924348#c132)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

RyanVM
<https://tbpl.mozilla.org/php/getParsedLog.php?id=31070290&tree=Mozilla-B2g26-v1.2>
Rev5 MacOSX Mountain Lion 10.8 mozilla-b2g26\_v1\_2 opt test mochitest-3 on 2013-11-25 18:30:36
revision: 233e88f927b1
slave: talos-mtnlion-r5-054
[Child 1176] ###!!! ABORT: ActorDestroy by IPC channel failure at LayerTransactionChild: file ../../../../gfx/layers/ipc/LayerTransactionChild.cpp, line 89
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | Exited with code 1 during test run
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 133](/show_bug.cgi?id=924348#c133)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

Tomcat
<https://tbpl.mozilla.org/php/getParsedLog.php?id=31075771&tree=B2g-Inbound>
Rev5 MacOSX Mountain Lion 10.8 b2g-inbound opt test mochitest-3 on 2013-11-25 20:24:40
revision: 1f774c175bc0
slave: talos-mtnlion-r5-079
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 134](/show_bug.cgi?id=924348#c134)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=31105911&tree=Mozilla-Inbound>
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound opt test mochitest-3 on 2013-11-26 10:50:14
revision: 9f57d2519a47
slave: talos-mtnlion-r5-053
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 135](/show_bug.cgi?id=924348#c135)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

Tomcat
<https://tbpl.mozilla.org/php/getParsedLog.php?id=31160411&tree=Mozilla-Inbound>
Rev4 MacOSX Snow Leopard 10.6 mozilla-inbound opt test mochitest-3 on 2013-11-27 05:42:38
revision: 32aa215becb4
slave: talos-r4-snow-011
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 136](/show_bug.cgi?id=924348#c136)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=31162995&tree=Mozilla-Inbound>
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound opt test mochitest-3 on 2013-11-27 06:50:27
revision: 30fe34b9ebf7
slave: talos-mtnlion-r5-009
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 137](/show_bug.cgi?id=924348#c137)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

RyanVM
<https://tbpl.mozilla.org/php/getParsedLog.php?id=31197503&tree=Mozilla-Aurora>
Rev5 MacOSX Mountain Lion 10.8 mozilla-aurora opt test mochitest-3 on 2013-11-27 18:36:00
revision: 3cadac0a4a78
slave: talos-mtnlion-r5-014
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ libobjc.A.dylib + 0x62d6]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 138](/show_bug.cgi?id=924348#c138)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

mats
<https://tbpl.mozilla.org/php/getParsedLog.php?id=31289187&tree=Mozilla-Inbound>
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound opt test mochitest-3 on 2013-11-30 15:25:28
revision: 24df3fc6014e
slave: talos-mtnlion-r5-066
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 139](/show_bug.cgi?id=924348#c139)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

RyanVM
<https://tbpl.mozilla.org/php/getParsedLog.php?id=31281126&tree=Mozilla-Aurora>
Rev5 MacOSX Mountain Lion 10.8 mozilla-aurora opt test mochitest-3 on 2013-11-30 02:12:25
revision: 566926400786
slave: talos-mtnlion-r5-075
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ hashDestroy]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 140](/show_bug.cgi?id=924348#c140)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

RyanVM
<https://tbpl.mozilla.org/php/getParsedLog.php?id=31318018&tree=Mozilla-Aurora>
Rev5 MacOSX Mountain Lion 10.8 mozilla-aurora opt test mochitest-3 on 2013-12-02 06:48:31
revision: 3420e1f89075
slave: talos-mtnlion-r5-071
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3DeleteTable]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 141](/show_bug.cgi?id=924348#c141)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

RyanVM
<https://tbpl.mozilla.org/php/getParsedLog.php?id=31335929&tree=Mozilla-Inbound>
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound opt test mochitest-3 on 2013-12-02 13:31:42
revision: f3174f0757c8
slave: talos-mtnlion-r5-002
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3DeleteTable]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 142](/show_bug.cgi?id=924348#c142)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=31381891&tree=Mozilla-Inbound>
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound opt test mochitest-3 on 2013-12-03 07:27:28
revision: e0c047a6f4e3
slave: talos-mtnlion-r5-032
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 143](/show_bug.cgi?id=924348#c143)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

Tomcat
<https://tbpl.mozilla.org/php/getParsedLog.php?id=31433056&tree=Mozilla-Central>
Rev5 MacOSX Mountain Lion 10.8 mozilla-central opt test mochitest-3 on 2013-12-04 01:27:32
revision: 8187818246ad
slave: talos-mtnlion-r5-010
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 144](/show_bug.cgi?id=924348#c144)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

RyanVM
<https://tbpl.mozilla.org/php/getParsedLog.php?id=31428496&tree=B2g-Inbound>
Rev5 MacOSX Mountain Lion 10.8 b2g-inbound opt test mochitest-3 on 2013-12-03 23:25:09
revision: 7141a3a6681a
slave: talos-mtnlion-r5-084
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ jemalloc\_crash]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 145](/show_bug.cgi?id=924348#c145)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

RyanVM
<https://tbpl.mozilla.org/php/getParsedLog.php?id=31470652&tree=Mozilla-Inbound>
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound opt test mochitest-3 on 2013-12-04 20:01:50
revision: 8ee4f2722437
slave: talos-mtnlion-r5-047
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 146](/show_bug.cgi?id=924348#c146)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

RyanVM
<https://tbpl.mozilla.org/php/getParsedLog.php?id=31491705&tree=Mozilla-B2g26-v1.2>
Rev5 MacOSX Mountain Lion 10.8 mozilla-b2g26\_v1\_2 opt test mochitest-3 on 2013-12-05 04:45:47
revision: af2c7ebb5967
slave: talos-mtnlion-r5-063
[Child 1190] ###!!! ABORT: ActorDestroy by IPC channel failure at LayerTransactionChild: file ../../../../gfx/layers/ipc/LayerTransactionChild.cpp, line 89
[Child 1190] ###!!! ABORT: ActorDestroy by IPC channel failure at LayerTransactionChild: file ../../../../gfx/layers/ipc/LayerTransactionChild.cpp, line 89
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | Exited with code 1 during test run
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 147](/show_bug.cgi?id=924348#c147)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=31501577&tree=Mozilla-Aurora>
Rev5 MacOSX Mountain Lion 10.8 mozilla-aurora opt test mochitest-3 on 2013-12-05 08:05:13
revision: 9b1397fd2715
slave: talos-mtnlion-r5-011
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 148](/show_bug.cgi?id=924348#c148)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

RyanVM
<https://tbpl.mozilla.org/php/getParsedLog.php?id=31504792&tree=B2g-Inbound>
Rev5 MacOSX Mountain Lion 10.8 b2g-inbound opt test mochitest-3 on 2013-12-05 09:06:09
revision: 72d6f1c45d09
slave: talos-mtnlion-r5-069
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 149](/show_bug.cgi?id=924348#c149)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

RyanVM
<https://tbpl.mozilla.org/php/getParsedLog.php?id=31568738&tree=Mozilla-B2g26-v1.2>
Rev5 MacOSX Mountain Lion 10.8 mozilla-b2g26\_v1\_2 opt test mochitest-3 on 2013-12-06 08:37:39
revision: aa3b9dc8c0e0
slave: talos-mtnlion-r5-053
[Child 1194] ###!!! ABORT: ActorDestroy by IPC channel failure at LayerTransactionChild: file ../../../../gfx/layers/ipc/LayerTransactionChild.cpp, line 89
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | Exited with code 1 during test run
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 150](/show_bug.cgi?id=924348#c150)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

RyanVM
<https://tbpl.mozilla.org/php/getParsedLog.php?id=31571416&tree=Mozilla-Inbound>
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound opt test mochitest-3 on 2013-12-06 09:35:06
revision: e070e04b0795
slave: talos-mtnlion-r5-074
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ jemalloc\_crash]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 152](/show_bug.cgi?id=924348#c152)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

RyanVM
<https://tbpl.mozilla.org/php/getParsedLog.php?id=31570414&tree=Fx-Team>
Rev4 MacOSX Snow Leopard 10.6 fx-team opt test mochitest-3 on 2013-12-06 09:13:42
revision: c26db186948e
slave: talos-r4-snow-147
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 153](/show_bug.cgi?id=924348#c153)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

KWierso
<https://tbpl.mozilla.org/php/getParsedLog.php?id=31582371&tree=Mozilla-Inbound>
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound opt test mochitest-3 on 2013-12-06 13:11:05
revision: d86f10836597
slave: talos-mtnlion-r5-011
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 154](/show_bug.cgi?id=924348#c154)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=31629697&tree=Fx-Team>
Rev5 MacOSX Mountain Lion 10.8 fx-team opt test mochitest-3 on 2013-12-07 12:17:29
revision: 8c564ccbafcc
slave: talos-mtnlion-r5-017
2950 ERROR TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/ipc/test\_ipc.html | /tests/dom/indexedDB/test/test\_getAll.html | indexedDB error, 'UnknownError'
2951 ERROR TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/ipc/test\_ipc.html | /tests/dom/indexedDB/test/test\_getAll.html | uncaught exception - UnknownError at [http://mochi.test:8888/tests/dom/indexedDB/test/unit/test\_getAll.js:143](http://mochi.test:8888/tests/dom/indexedDB/test/unit/test_getAll.js%3A143)
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 155](/show_bug.cgi?id=924348#c155)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=31634606&tree=Fx-Team>
Rev4 MacOSX Snow Leopard 10.6 fx-team opt test mochitest-3 on 2013-12-07 16:47:37
revision: b44cec692a98
slave: talos-r4-snow-076
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 156](/show_bug.cgi?id=924348#c156)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=31647179&tree=Mozilla-Inbound>
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound opt test mochitest-3 on 2013-12-08 09:30:34
revision: 243a32ad97ed
slave: talos-mtnlion-r5-001
2950 ERROR TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/ipc/test\_ipc.html | /tests/dom/indexedDB/test/test\_getAll.html | indexedDB error, 'UnknownError'
2951 ERROR TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/ipc/test\_ipc.html | /tests/dom/indexedDB/test/test\_getAll.html | uncaught exception - UnknownError at [http://mochi.test:8888/tests/dom/indexedDB/test/unit/test\_getAll.js:143](http://mochi.test:8888/tests/dom/indexedDB/test/unit/test_getAll.js%3A143)
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 157](/show_bug.cgi?id=924348#c157)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=31651558&tree=Mozilla-Inbound>
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound opt test mochitest-3 on 2013-12-08 12:29:20
revision: 4939a51edb2d
slave: talos-mtnlion-r5-076
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 158](/show_bug.cgi?id=924348#c158)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

jimb
<https://tbpl.mozilla.org/php/getParsedLog.php?id=31606822&tree=Try>
Rev5 MacOSX Mountain Lion 10.8 try opt test mochitest-3 on 2013-12-06 21:33:03
revision: a3299f20a6d8
slave: talos-mtnlion-r5-001
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ hashDestroy]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 159](/show_bug.cgi?id=924348#c159)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

Tomcat
<https://tbpl.mozilla.org/php/getParsedLog.php?id=31679877&tree=B2g-Inbound>
Rev5 MacOSX Mountain Lion 10.8 b2g-inbound opt test mochitest-3 on 2013-12-09 06:05:57
revision: 96fad9bdc012
slave: talos-mtnlion-r5-081
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ hashDestroy]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 160](/show_bug.cgi?id=924348#c160)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=31685660&tree=Mozilla-Inbound>
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound opt test mochitest-3 on 2013-12-09 08:10:10
revision: a0a22409492d
slave: talos-mtnlion-r5-085
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 1
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 1

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 161](/show_bug.cgi?id=924348#c161)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=31718513&tree=Mozilla-Central>
Rev4 MacOSX Snow Leopard 10.6 mozilla-central opt test mochitest-3 on 2013-12-09 19:17:58
revision: ad2b044e047e
slave: talos-r4-snow-124
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 1
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ jemalloc\_crash]
Return code: 1

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 162](/show_bug.cgi?id=924348#c162)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=31723662&tree=Mozilla-Central>
Rev5 MacOSX Mountain Lion 10.8 mozilla-central opt test mochitest-3 on 2013-12-09 21:08:21
revision: 9efccbe5efde
slave: talos-mtnlion-r5-064
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 1
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 1

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 163](/show_bug.cgi?id=924348#c163)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=31726915&tree=Mozilla-Inbound>
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound opt test mochitest-3 on 2013-12-09 22:09:31
revision: 56eb22c6f6c7
slave: talos-mtnlion-r5-038
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 1
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 1

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 164](/show_bug.cgi?id=924348#c164)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

Tomcat
<https://tbpl.mozilla.org/php/getParsedLog.php?id=31721493&tree=B2g-Inbound>
Rev5 MacOSX Mountain Lion 10.8 b2g-inbound opt test mochitest-3 on 2013-12-09 20:27:17
revision: 187ec0c822f9
slave: talos-mtnlion-r5-001
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 1
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 1

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 165](/show_bug.cgi?id=924348#c165)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

Tomcat
<https://tbpl.mozilla.org/php/getParsedLog.php?id=31745922&tree=Mozilla-Inbound>
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound opt test mochitest-3 on 2013-12-10 06:57:20
revision: 9d4f47c91c65
slave: talos-mtnlion-r5-002
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 1
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 1

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 166](/show_bug.cgi?id=924348#c166)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

RyanVM
<https://tbpl.mozilla.org/php/getParsedLog.php?id=31755313&tree=Mozilla-B2g26-v1.2f>
Rev5 MacOSX Mountain Lion 10.8 mozilla-b2g26\_v1\_2f opt test mochitest-3 on 2013-12-10 10:34:48
revision: 8bb4a3bc3489
slave: talos-mtnlion-r5-047
[Child 1196] ###!!! ABORT: ActorDestroy by IPC channel failure at LayerTransactionChild: file ../../../../gfx/layers/ipc/LayerTransactionChild.cpp, line 89
[Child 1196] ###!!! ABORT: ActorDestroy by IPC channel failure at LayerTransactionChild: file ../../../../gfx/layers/ipc/LayerTransactionChild.cpp, line 89
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | Exited with code 1 during test run
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 167](/show_bug.cgi?id=924348#c167)• 11 years ago |
|  | |

Andrew, is there way we can bump the priority of investigating this top orange that affects nearly every active branch?Flags: needinfo?(overholt)

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 168](/show_bug.cgi?id=924348#c168)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

Tomcat
<https://tbpl.mozilla.org/php/getParsedLog.php?id=31784781&tree=B2g-Inbound>
Rev5 MacOSX Mountain Lion 10.8 b2g-inbound opt test mochitest-3 on 2013-12-10 20:27:27
revision: 6cfaf4b5a806
slave: talos-mtnlion-r5-066
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 1
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 1

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 169](/show_bug.cgi?id=924348#c169)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=31792073&tree=Mozilla-Inbound>
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound opt test mochitest-3 on 2013-12-10 23:44:31
revision: 9a8ca1c0e114
slave: talos-mtnlion-r5-004
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 1
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3DeleteTable]
Return code: 1

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 170](/show_bug.cgi?id=924348#c170)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

RyanVM
<https://tbpl.mozilla.org/php/getParsedLog.php?id=31846797&tree=Mozilla-Inbound>
Rev4 MacOSX Snow Leopard 10.6 mozilla-inbound opt test mochitest-3 on 2013-12-11 19:35:48
revision: c3610b50947e
slave: talos-r4-snow-116
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 1
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 1

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 171](/show_bug.cgi?id=924348#c171)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

Tomcat
<https://tbpl.mozilla.org/php/getParsedLog.php?id=31860470&tree=Fx-Team>
Rev4 MacOSX Snow Leopard 10.6 fx-team opt test mochitest-3 on 2013-12-12 01:51:28
revision: 552e506ce21d
slave: talos-r4-snow-132
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 1
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 1

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 172](/show_bug.cgi?id=924348#c172)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=31899629&tree=Fx-Team>
Rev4 MacOSX Snow Leopard 10.6 fx-team opt test mochitest-3 on 2013-12-12 15:41:20
revision: 198791af9456
slave: talos-r4-snow-123
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 1
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 1

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 173](/show_bug.cgi?id=924348#c173)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

Tomcat
<https://tbpl.mozilla.org/php/getParsedLog.php?id=31923369&tree=Mozilla-Inbound>
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound opt test mochitest-3 on 2013-12-13 01:25:30
revision: 54c6e55f60af
slave: talos-mtnlion-r5-064
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 1
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 1

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 174](/show_bug.cgi?id=924348#c174)• 11 years ago |
|  | |

<https://tbpl.mozilla.org/php/getParsedLog.php?id=31941047&tree=Mozilla-Inbound>

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 175](/show_bug.cgi?id=924348#c175)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

RyanVM
<https://tbpl.mozilla.org/php/getParsedLog.php?id=31951890&tree=Mozilla-B2g26-v1.2>
Rev5 MacOSX Mountain Lion 10.8 mozilla-b2g26\_v1\_2 opt test mochitest-3 on 2013-12-13 13:12:24
revision: 8f7b67049ddb
slave: talos-mtnlion-r5-031
[Child 1197] ###!!! ABORT: ActorDestroy by IPC channel failure at LayerTransactionChild: file ../../../../gfx/layers/ipc/LayerTransactionChild.cpp, line 89
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | Exited with code 1 during test run
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 176](/show_bug.cgi?id=924348#c176)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=31981121&tree=Mozilla-Inbound>
Rev4 MacOSX Snow Leopard 10.6 mozilla-inbound opt test mochitest-3 on 2013-12-14 06:17:25
revision: 1b91cf5c8407
slave: talos-r4-snow-129
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 1
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 1

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 177](/show_bug.cgi?id=924348#c177)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

Tomcat
<https://tbpl.mozilla.org/php/getParsedLog.php?id=32024792&tree=Mozilla-Inbound>
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound opt test mochitest-3 on 2013-12-16 06:35:30
revision: 327a6af06942
slave: talos-mtnlion-r5-083
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 1
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 1

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 178](/show_bug.cgi?id=924348#c178)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

RyanVM
<https://tbpl.mozilla.org/php/getParsedLog.php?id=32025631&tree=Fx-Team>
Rev5 MacOSX Mountain Lion 10.8 fx-team opt test mochitest-3 on 2013-12-16 07:03:32
revision: eca72af01ab2
slave: talos-mtnlion-r5-046
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 1
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 1

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 179](/show_bug.cgi?id=924348#c179)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

RyanVM
<https://tbpl.mozilla.org/php/getParsedLog.php?id=32049572&tree=Mozilla-Beta>
Rev5 MacOSX Mountain Lion 10.8 mozilla-beta opt test mochitest-3 on 2013-12-16 15:23:19
revision: df7c72278682
slave: talos-mtnlion-r5-061
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 180](/show_bug.cgi?id=924348#c180)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

RyanVM
<https://tbpl.mozilla.org/php/getParsedLog.php?id=32058692&tree=Mozilla-Aurora>
Rev5 MacOSX Mountain Lion 10.8 mozilla-aurora opt test mochitest-3 on 2013-12-16 17:52:50
revision: 81edb867831b
slave: talos-mtnlion-r5-083
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3DeleteTable]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 181](/show_bug.cgi?id=924348#c181)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

KWierso
<https://tbpl.mozilla.org/php/getParsedLog.php?id=32058732&tree=Mozilla-Inbound>
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound opt test mochitest-3 on 2013-12-16 17:53:47
revision: 3fdb03a8a134
slave: talos-mtnlion-r5-036
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 1
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ hashDestroy]
Return code: 1

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 182](/show_bug.cgi?id=924348#c182)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=32050635&tree=Mozilla-Beta>
Rev5 MacOSX Mountain Lion 10.8 mozilla-beta opt test mochitest-3 on 2013-12-16 15:39:55
revision: df7c72278682
slave: talos-mtnlion-r5-030
2892 ERROR TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/ipc/test\_ipc.html | /tests/dom/indexedDB/test/test\_getAll.html | indexedDB error, 'UnknownError'
2893 ERROR TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/ipc/test\_ipc.html | /tests/dom/indexedDB/test/test\_getAll.html | uncaught exception - UnknownError at [http://mochi.test:8888/tests/dom/indexedDB/test/unit/test\_getAll.js:171](http://mochi.test:8888/tests/dom/indexedDB/test/unit/test_getAll.js%3A171)
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 183](/show_bug.cgi?id=924348#c183)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

RyanVM
<https://tbpl.mozilla.org/php/getParsedLog.php?id=32102903&tree=Mozilla-Aurora>
Rev4 MacOSX Snow Leopard 10.6 mozilla-aurora opt test mochitest-3 on 2013-12-17 11:13:25
revision: 49aa881ba686
slave: talos-r4-snow-069
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3DeleteTable]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 184](/show_bug.cgi?id=924348#c184)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

RyanVM
<https://tbpl.mozilla.org/php/getParsedLog.php?id=32103473&tree=Mozilla-Aurora>
Rev5 MacOSX Mountain Lion 10.8 mozilla-aurora opt test mochitest-3 on 2013-12-17 11:22:01
revision: 2217681c1b68
slave: talos-mtnlion-r5-024
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 185](/show_bug.cgi?id=924348#c185)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

RyanVM
<https://tbpl.mozilla.org/php/getParsedLog.php?id=32131436&tree=Mozilla-Beta>
Rev5 MacOSX Mountain Lion 10.8 mozilla-beta opt test mochitest-3 on 2013-12-17 20:24:48
revision: fe8c302466eb
slave: talos-mtnlion-r5-076
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 186](/show_bug.cgi?id=924348#c186)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

Tomcat
<https://tbpl.mozilla.org/php/getParsedLog.php?id=32157069&tree=Mozilla-Inbound>
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound opt test mochitest-3 on 2013-12-18 07:07:23
revision: fdfd0621d658
slave: talos-mtnlion-r5-072
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 1
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 1

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 187](/show_bug.cgi?id=924348#c187)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

Tomcat
<https://tbpl.mozilla.org/php/getParsedLog.php?id=32205702&tree=Mozilla-Inbound>
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound opt test mochitest-3 on 2013-12-19 00:54:30
revision: c245cc9c1b43
slave: talos-mtnlion-r5-025
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 1
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 1

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 188](/show_bug.cgi?id=924348#c188)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

Tomcat
<https://tbpl.mozilla.org/php/getParsedLog.php?id=32211519&tree=Mozilla-Central>
Rev5 MacOSX Mountain Lion 10.8 mozilla-central opt test mochitest-3 on 2013-12-19 04:17:21
revision: 5c7fa2bfea8b
slave: talos-mtnlion-r5-072
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 1
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ jemalloc\_crash]
Return code: 1

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 189](/show_bug.cgi?id=924348#c189)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

Tomcat
<https://tbpl.mozilla.org/php/getParsedLog.php?id=32212544&tree=Fx-Team>
Rev5 MacOSX Mountain Lion 10.8 fx-team opt test mochitest-3 on 2013-12-19 04:40:41
revision: 07b3207166ba
slave: talos-mtnlion-r5-036
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 1
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3DeleteTable]
Return code: 1

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 190](/show_bug.cgi?id=924348#c190)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

KWierso
<https://tbpl.mozilla.org/php/getParsedLog.php?id=32242218&tree=Mozilla-Inbound>
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound opt test mochitest-3 on 2013-12-19 14:27:54
revision: 03d86cd05b7e
slave: talos-mtnlion-r5-013
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 1
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ hashDestroy]
Return code: 1

|  | [Andrew Overholt [:overholt]](/user_profile?user_id=442218) |  |
| --- | --- | --- |
| [Comment 191](/show_bug.cgi?id=924348#c191)• 11 years ago |
|  | |

Sorry for not getting back here sooner. Jan and I discussed this the other day and he's going to investigate in the very near future.Flags: needinfo?(overholt)

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 192](/show_bug.cgi?id=924348#c192)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=32402496&tree=Mozilla-Inbound>
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound opt test mochitest-3 on 2013-12-27 14:04:30
revision: a0727f8476dc
slave: talos-mtnlion-r5-032
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 1
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 1

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 193](/show_bug.cgi?id=924348#c193)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=32416030&tree=Fx-Team>
Rev5 MacOSX Mountain Lion 10.8 fx-team opt test mochitest-3 on 2013-12-28 21:08:21
revision: 589aa7fb5488
slave: talos-mtnlion-r5-029
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 1
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 1

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 194](/show_bug.cgi?id=924348#c194)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

RyanVM
<https://tbpl.mozilla.org/php/getParsedLog.php?id=32431605&tree=Mozilla-B2g26-v1.2>
Rev5 MacOSX Mountain Lion 10.8 mozilla-b2g26\_v1\_2 opt test mochitest-3 on 2013-12-30 04:39:26
revision: ca08a0a0c60a
slave: talos-mtnlion-r5-067
[Child 1273] ###!!! ABORT: ActorDestroy by IPC channel failure at LayerTransactionChild: file ../../../../gfx/layers/ipc/LayerTransactionChild.cpp, line 89
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | Exited with code 1 during test run
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 195](/show_bug.cgi?id=924348#c195)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=32462087&tree=Mozilla-Inbound>
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound opt test mochitest-3 on 2014-01-01 22:26:28
revision: 4153db3d9d37
slave: talos-mtnlion-r5-032
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 1
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ hashDestroy]
Return code: 1

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 196](/show_bug.cgi?id=924348#c196)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=32478409&tree=Mozilla-Inbound>
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound opt test mochitest-3 on 2014-01-02 10:02:36
revision: 0764495bc9b8
slave: talos-mtnlion-r5-006
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 1
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 1

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 197](/show_bug.cgi?id=924348#c197)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

KWierso
<https://tbpl.mozilla.org/php/getParsedLog.php?id=32533764&tree=Mozilla-Aurora>
Rev5 MacOSX Mountain Lion 10.8 mozilla-aurora opt test mochitest-3 on 2014-01-03 14:54:42
revision: 8c10d0e5d85d
slave: talos-mtnlion-r5-089
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ hashDestroy]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 198](/show_bug.cgi?id=924348#c198)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

RyanVM
<https://tbpl.mozilla.org/php/getParsedLog.php?id=32533764&tree=Mozilla-Aurora>
Rev5 MacOSX Mountain Lion 10.8 mozilla-aurora opt test mochitest-3 on 2014-01-03 14:54:42
revision: 8c10d0e5d85d
slave: talos-mtnlion-r5-089
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ hashDestroy]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 199](/show_bug.cgi?id=924348#c199)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

edmorley
<https://tbpl.mozilla.org/php/getParsedLog.php?id=32569247&tree=Fx-Team>
Rev5 MacOSX Mountain Lion 10.8 fx-team opt test mochitest-3 on 2014-01-05 19:54:25
revision: 5e784d8a55f8
slave: talos-mtnlion-r5-052
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 1
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 1

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 200](/show_bug.cgi?id=924348#c200)• 11 years ago |
|  | |

<https://tbpl.mozilla.org/php/getParsedLog.php?id=32588394&tree=B2g-Inbound>

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 201](/show_bug.cgi?id=924348#c201)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

RyanVM
<https://tbpl.mozilla.org/php/getParsedLog.php?id=32590971&tree=Mozilla-Inbound>
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound opt test mochitest-3 on 2014-01-06 11:36:48
revision: 8812993d675b
slave: talos-mtnlion-r5-045
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 1
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 1

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 202](/show_bug.cgi?id=924348#c202)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

RyanVM
<https://tbpl.mozilla.org/php/getParsedLog.php?id=32626042&tree=Mozilla-Esr24>
Rev5 MacOSX Mountain Lion 10.8 mozilla-esr24 opt test mochitest-3 on 2014-01-07 01:06:30
revision: 72d9fdc6783e
slave: talos-mtnlion-r5-043
[Child 1172] ###!!! ABORT: ActorDestroy by IPC channel failure at LayerTransactionChild: file ../../../../gfx/layers/ipc/LayerTransactionChild.cpp, line 83
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | Exited with code 1 during test run
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ jemalloc\_crash]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 203](/show_bug.cgi?id=924348#c203)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

RyanVM
<https://tbpl.mozilla.org/php/getParsedLog.php?id=32651859&tree=Fx-Team>
Rev4 MacOSX Snow Leopard 10.6 fx-team opt test mochitest-3 on 2014-01-07 12:04:14
revision: ce93390b4fce
slave: talos-r4-snow-169
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 1
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 1

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 204](/show_bug.cgi?id=924348#c204)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=32665855&tree=Mozilla-Beta>
Rev5 MacOSX Mountain Lion 10.8 mozilla-beta opt test mochitest-3 on 2014-01-07 16:34:26
revision: 06a89edd358b
slave: talos-mtnlion-r5-034
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 205](/show_bug.cgi?id=924348#c205)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

Tomcat
<https://tbpl.mozilla.org/php/getParsedLog.php?id=32694325&tree=Mozilla-Inbound>
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound opt test mochitest-3 on 2014-01-08 04:38:28
revision: 268795df42a1
slave: talos-mtnlion-r5-070
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 5
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ libsystem\_kernel.dylib + 0x12212]
Return code: 1

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 206](/show_bug.cgi?id=924348#c206)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

RyanVM
<https://tbpl.mozilla.org/php/getParsedLog.php?id=32718791&tree=Mozilla-Inbound>
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound opt test mochitest-3 on 2014-01-08 13:46:49
revision: 6996abc487ad
slave: talos-mtnlion-r5-058
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 1
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 1

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 207](/show_bug.cgi?id=924348#c207)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

RyanVM
<https://tbpl.mozilla.org/php/getParsedLog.php?id=32721061&tree=Mozilla-Inbound>
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound opt test mochitest-3 on 2014-01-08 14:22:57
revision: 6996abc487ad
slave: talos-mtnlion-r5-042
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 1
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 1

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 208](/show_bug.cgi?id=924348#c208)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

KWierso
<https://tbpl.mozilla.org/php/getParsedLog.php?id=32746895&tree=Try>
Rev5 MacOSX Mountain Lion 10.8 try opt test mochitest-3 on 2014-01-08 23:38:10
revision: f72b8ec86141
slave: talos-mtnlion-r5-084
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 1
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 1

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 209](/show_bug.cgi?id=924348#c209)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=32766814&tree=Mozilla-Inbound>
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound opt test mochitest-3 on 2014-01-09 09:25:32
revision: 22c11c35d1a3
slave: talos-mtnlion-r5-050
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 1
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 1

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 210](/show_bug.cgi?id=924348#c210)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

RyanVM
<https://tbpl.mozilla.org/php/getParsedLog.php?id=32778440&tree=Fx-Team>
Rev5 MacOSX Mountain Lion 10.8 fx-team opt test mochitest-3 on 2014-01-09 13:18:15
revision: 204056ecab57
slave: talos-mtnlion-r5-076
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 1
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ hashDestroy]
Return code: 1

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 211](/show_bug.cgi?id=924348#c211)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

KWierso
<https://tbpl.mozilla.org/php/getParsedLog.php?id=32778440&tree=Fx-Team>
Rev5 MacOSX Mountain Lion 10.8 fx-team opt test mochitest-3 on 2014-01-09 13:18:15
revision: 204056ecab57
slave: talos-mtnlion-r5-076
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 1
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ hashDestroy]
Return code: 1

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 212](/show_bug.cgi?id=924348#c212)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

KWierso
<https://tbpl.mozilla.org/php/getParsedLog.php?id=32786417&tree=B2g-Inbound>
Rev5 MacOSX Mountain Lion 10.8 b2g-inbound opt test mochitest-3 on 2014-01-09 15:41:33
revision: 21715f6a3ba2
slave: talos-mtnlion-r5-055
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 1
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 1

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 213](/show_bug.cgi?id=924348#c213)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=32799182&tree=B2g-Inbound>
Rev5 MacOSX Mountain Lion 10.8 b2g-inbound opt test mochitest-3 on 2014-01-09 19:58:27
revision: 623b7361abfa
slave: talos-mtnlion-r5-001
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 1
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3DeleteTable]
Return code: 1

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 214](/show_bug.cgi?id=924348#c214)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=32800417&tree=B2g-Inbound>
Rev5 MacOSX Mountain Lion 10.8 b2g-inbound opt test mochitest-3 on 2014-01-09 20:41:05
revision: 623b7361abfa
slave: talos-mtnlion-r5-048
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 1
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 1

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 215](/show_bug.cgi?id=924348#c215)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=32802075&tree=Mozilla-Inbound>
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound opt test mochitest-3 on 2014-01-09 22:50:31
revision: cc8ef74976b1
slave: talos-mtnlion-r5-085
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 1
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 1

|  | [Ed Morley [:emorley]](/user_profile?user_id=373476) |  |
| --- | --- | --- |
| [Comment 216](/show_bug.cgi?id=924348#c216)• 11 years ago |
|  | |

(In reply to Andrew Overholt [:overholt] from [comment #191](/show_bug.cgi?id=924348#c191 "RESOLVED FIXED - Intermittent PROCESS-CRASH | /tests/dom/indexedDB/test/test_add_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie] or [@ hashDestroy]"))
> Sorry for not getting back here sooner. Jan and I discussed this the other
> day and he's going to investigate in the very near future.
Jan, don't suppose you have a rough eta for when you might be able to take a look at this? :-)Flags: needinfo?(Jan.Varga)

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 217](/show_bug.cgi?id=924348#c217)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

RyanVM
<https://tbpl.mozilla.org/php/getParsedLog.php?id=32825938&tree=Mozilla-Inbound>
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound opt test mochitest-3 on 2014-01-10 08:37:38
revision: 3336288cfca8
slave: talos-mtnlion-r5-089
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 1
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 1

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 218](/show_bug.cgi?id=924348#c218)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

KWierso
<https://tbpl.mozilla.org/php/getParsedLog.php?id=32842429&tree=Fx-Team>
Rev5 MacOSX Mountain Lion 10.8 fx-team opt test mochitest-3 on 2014-01-10 14:27:37
revision: 937f571f4655
slave: talos-mtnlion-r5-023
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 1
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 1

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 219](/show_bug.cgi?id=924348#c219)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

jonco
<https://tbpl.mozilla.org/php/getParsedLog.php?id=32833205&tree=Try>
Rev5 MacOSX Mountain Lion 10.8 try opt test mochitest-3 on 2014-01-10 11:15:50
revision: 20e38ef1e020
slave: talos-mtnlion-r5-089
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 1
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3DeleteTable]
Return code: 1

|  | [Jan Varga [:janv]](/user_profile?user_id=8340)  Assignee |  |
| --- | --- | --- |
| [Comment 220](/show_bug.cgi?id=924348#c220)• 11 years ago |
|  | |

(In reply to Ed Morley [:edmorley UTC+0] from [comment #216](/show_bug.cgi?id=924348#c216 "RESOLVED FIXED - Intermittent PROCESS-CRASH | /tests/dom/indexedDB/test/test_add_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie] or [@ hashDestroy]"))
> (In reply to Andrew Overholt [:overholt] from [comment #191](/show_bug.cgi?id=924348#c191 "RESOLVED FIXED - Intermittent PROCESS-CRASH | /tests/dom/indexedDB/test/test_add_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie] or [@ hashDestroy]"))
> > Sorry for not getting back here sooner. Jan and I discussed this the other
> > day and he's going to investigate in the very near future.
>
> Jan, don't suppose you have a rough eta for when you might be able to take a
> look at this? :-)
The good news is I'm now able to reproduce it locally, it's not easy to reproduce it though.
But still better than debugging on try :)
I'm on Mac OS X 10.9.1, XCode 5.0.2, using mozconfig from browser/config/mozconfigs/macosx-universal/nightlyFlags: needinfo?(Jan.Varga)

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 221](/show_bug.cgi?id=924348#c221)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=32881656&tree=Fx-Team>
Rev5 MacOSX Mountain Lion 10.8 fx-team opt test mochitest-3 on 2014-01-11 21:47:29
revision: 211c36cf894a
slave: talos-mtnlion-r5-061
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 1
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 1

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 222](/show_bug.cgi?id=924348#c222)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

ttaubert
<https://tbpl.mozilla.org/php/getParsedLog.php?id=32885766&tree=Fx-Team>
Rev5 MacOSX Mountain Lion 10.8 fx-team opt test mochitest-3 on 2014-01-12 01:57:17
revision: b029e8d3e130
slave: talos-mtnlion-r5-053
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 1
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3DeleteTable]
Return code: 1

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 223](/show_bug.cgi?id=924348#c223)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

philor
<https://tbpl.mozilla.org/php/getParsedLog.php?id=32893450&tree=Try>
Rev5 MacOSX Mountain Lion 10.8 try opt test mochitest-3 on 2014-01-12 11:45:27
revision: 975bc1adf242
slave: talos-mtnlion-r5-072
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 1
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 1

|  | [Jan Varga [:janv]](/user_profile?user_id=8340)  Assignee |  |
| --- | --- | --- |
| [Comment 224](/show_bug.cgi?id=924348#c224)• 11 years ago |
|  | |

It seems I have a fix for this:
<https://tbpl.mozilla.org/?tree=Try&rev=c601f6159ff0>

|  | [Jan Varga [:janv]](/user_profile?user_id=8340)  Assignee |  |
| --- | --- | --- |
| [Comment 225](/show_bug.cgi?id=924348#c225)• 11 years ago |
|  | |

Attached patch

[fix](attachment.cgi?id=8359089&action=diff) (obsolete)
— [Details](attachment.cgi?id=8359089&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=924348&attachment=8359089)

Ok, I couldn't reproduce the crash with this patch locally nor on try (2 x 100 retriggers).
Note that I also saw different stack traces while I was debugging it, so this patch can actually eliminate other crashes tracked separately.
[Attachment #8359089](/attachment.cgi?id=8359089&action=edit "fix") -
Flags: review?(bent.mozilla)

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 226](/show_bug.cgi?id=924348#c226)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

ttaubert
<https://tbpl.mozilla.org/php/getParsedLog.php?id=32913452&tree=Fx-Team>
Rev5 MacOSX Mountain Lion 10.8 fx-team opt test mochitest-3 on 2014-01-13 04:12:29
revision: e23526533508
slave: talos-mtnlion-r5-035
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 1
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 1

|  | [Jan Varga [:janv]](/user_profile?user_id=8340)  Assignee |  |
| --- | --- | --- |
| [Comment 227](/show_bug.cgi?id=924348#c227)• 11 years ago |
|  | |

Attached patch

[fix v2](attachment.cgi?id=8359307&action=diff)
— [Details](attachment.cgi?id=8359307&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=924348&attachment=8359307)

It seems Ben is away...
This patch uses a new method LockedAddRef(), suggested by Kyle.
[Attachment #8359089](/attachment.cgi?id=8359089&action=edit "fix") -
Attachment is obsolete: true
[Attachment #8359089](/attachment.cgi?id=8359089&action=edit "fix") -
Flags: review?(bent.mozilla)
[Attachment #8359307](/attachment.cgi?id=8359307&action=edit "fix v2") -
Flags: review?(khuey)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=924348#a8406691_75935)• 11 years ago |

[status-b2g-v1.2](/buglist.cgi?f1=cf_status_b2g_1_2&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=affected)
[status-firefox26](/buglist.cgi?f1=cf_status_firefox26&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_firefox26&o1=equals&v1=wontfix)
[status-firefox27](/buglist.cgi?f1=cf_status_firefox27&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=affected)
[status-firefox28](/buglist.cgi?f1=cf_status_firefox28&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=affected)
[status-firefox29](/buglist.cgi?f1=cf_status_firefox29&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=affected)
[status-firefox-esr24](/buglist.cgi?f1=cf_status_firefox_esr24&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=unaffected)

|  | [Kyle Huey (Exited; not receiving bugmail, old account, do not use)](/user_profile?user_id=336670) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=924348#a8407945_336670)• 11 years ago |

[Attachment #8359307](/attachment.cgi?id=8359307&action=edit "fix v2") -
Flags: review?(khuey) → review+

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 228](/show_bug.cgi?id=924348#c228)• 11 years ago |
|  | |

<https://hg.mozilla.org/integration/mozilla-inbound/rev/d2fe5f5b558e>

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 229](/show_bug.cgi?id=924348#c229)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

RyanVM
<https://tbpl.mozilla.org/php/getParsedLog.php?id=32935340&tree=B2g-Inbound>
Rev5 MacOSX Mountain Lion 10.8 b2g-inbound opt test mochitest-3 on 2014-01-13 13:04:24
revision: 058c053e2f07
slave: talos-mtnlion-r5-011
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 1
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 1

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 230](/show_bug.cgi?id=924348#c230)• 11 years ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/d2fe5f5b558e>
Jan, thank you very much for tracking this down! One final request - please request approval for uplift to Aurora/Beta/b2g26 :)Status: NEW → RESOLVEDClosed: 11 years agoFlags: in-testsuite+Resolution: --- → FIXEDTarget Milestone: --- → mozilla29

|  | [Jan Varga [:janv]](/user_profile?user_id=8340)  Assignee |  |
| --- | --- | --- |
| [Comment 231](/show_bug.cgi?id=924348#c231)• 11 years ago |
|  | |

Ok, but I think we should wait a day or so to be 100% sure the fix is correct.

|  | [Legacy TBPL/Treeherder Robot](/user_profile?user_id=379349) |  |
| --- | --- | --- |
| [Comment 232](/show_bug.cgi?id=924348#c232)• 11 years ago |
|  | |

| Comment hidden (Legacy TBPL/Treeherder Robot) |  |
| --- | --- |

Tomcat
<https://tbpl.mozilla.org/php/getParsedLog.php?id=32965418&tree=Mozilla-Aurora>
Rev5 MacOSX Mountain Lion 10.8 mozilla-aurora opt test mochitest-3 on 2014-01-14 02:02:15
revision: 29c5b8def408
slave: talos-mtnlion-r5-020
TEST-UNEXPECTED-FAIL | /tests/dom/indexedDB/test/test\_add\_put.html | application terminated with exit code 256
PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie]
Return code: 256

|  | [Jan Varga [:janv]](/user_profile?user_id=8340)  Assignee |  |
| --- | --- | --- |
| [Comment 233](/show_bug.cgi?id=924348#c233)• 11 years ago |
|  | |

Comment on [attachment 8359307](/attachment.cgi?id=8359307 "fix v2") [[details]](/attachment.cgi?id=8359307&action=edit "fix v2") [[diff]](/attachment.cgi?id=8359307&action=diff "fix v2") [[review]](/page.cgi?id=splinter.html&ignore=&bug=924348&attachment=8359307)
fix v2
[Approval Request Comment]
Bug caused by (feature/regressing bug #): temporary storage, [bug 785884](/show_bug.cgi?id=785884 "RESOLVED FIXED - Implement support for temporary storage (aka shared pool)")
User impact if declined: The browser crashes in an unpredictable way (possible security issue).
Testing completed: The fix landed on m-c on Jan 13th, 2014, the patch was tested on try prior landing, M3 was retriggered 200 times and we didn't see any crashes. RyanVM says "no issues with [bug 924348](/show_bug.cgi?id=924348 "RESOLVED FIXED - Intermittent PROCESS-CRASH | /tests/dom/indexedDB/test/test_add_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie] or [@ hashDestroy]") so far"
Risk to taking this patch (and alternatives if risky): The patch should be safe.
String or UUID changes made by this patch: No strings.
[Attachment #8359307](/attachment.cgi?id=8359307&action=edit "fix v2") -
Flags: approval-mozilla-beta?
[Attachment #8359307](/attachment.cgi?id=8359307&action=edit "fix v2") -
Flags: approval-mozilla-b2g26?
[Attachment #8359307](/attachment.cgi?id=8359307&action=edit "fix v2") -
Flags: approval-mozilla-aurora?

|  | [Jan Varga [:janv]](/user_profile?user_id=8340)  Assignee |  |
| --- | --- | --- |
| [Comment 234](/show_bug.cgi?id=924348#c234)• 11 years ago |
|  | |

Do we need to do something else with this bug, like marking as security-sensitive ? It's been public for a long time.Flags: needinfo?(dveditz)

|  | [bhavana bajaj [:bajaj]](/user_profile?user_id=448925) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=924348#a8583843_448925)• 11 years ago |

[Attachment #8359307](/attachment.cgi?id=8359307&action=edit "fix v2") -
Flags: approval-mozilla-beta?
[Attachment #8359307](/attachment.cgi?id=8359307&action=edit "fix v2") -
Flags: approval-mozilla-beta+
[Attachment #8359307](/attachment.cgi?id=8359307&action=edit "fix v2") -
Flags: approval-mozilla-b2g26?
[Attachment #8359307](/attachment.cgi?id=8359307&action=edit "fix v2") -
Flags: approval-mozilla-b2g26+
[Attachment #8359307](/attachment.cgi?id=8359307&action=edit "fix v2") -
Flags: approval-mozilla-aurora?
[Attachment #8359307](/attachment.cgi?id=8359307&action=edit "fix v2") -
Flags: approval-mozilla-aurora+

|  | [Jan Varga [:janv]](/user_profile?user_id=8340)  Assignee |  |
| --- | --- | --- |
| [Comment 235](/show_bug.cgi?id=924348#c235)• 11 years ago |
|  | |

ok, I landed the patch on mozilla-aurora and mozilla-beta, RyanVM will land it on mozilla-b2g26\_v1\_2
[status-firefox27](/buglist.cgi?f1=cf_status_firefox27&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=fixed)
[status-firefox28](/buglist.cgi?f1=cf_status_firefox28&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=fixed)
[status-firefox29](/buglist.cgi?f1=cf_status_firefox29&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=fixed)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 236](/show_bug.cgi?id=924348#c236)• 11 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-aurora/rev/a7735f4df766>
<https://hg.mozilla.org/releases/mozilla-beta/rev/c33c9dde355c>
<https://hg.mozilla.org/releases/mozilla-b2g26_v1_2/rev/c784c721beb3>
[status-b2g-v1.2](/buglist.cgi?f1=cf_status_b2g_1_2&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=fixed)
[status-b2g-v1.3](/buglist.cgi?f1=cf_status_b2g_1_3&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=fixed)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 237](/show_bug.cgi?id=924348#c237)• 11 years ago |
|  | |

I don't know if it does any good to hide the bug at this point but at least doing so will trigger inclusion in the release advisories.Group: core-securityFlags: needinfo?(dveditz)Keywords: [csectype-uaf](/buglist.cgi?keywords=csectype-uaf&resolution=---),
[regression](/buglist.cgi?keywords=regression&resolution=---),
[sec-high](/buglist.cgi?keywords=sec-high&resolution=---)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=924348#a9124655_280903)• 11 years ago |

Whiteboard: [adv-main27+]

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=924348#a43696916_1689)• 10 years ago |

Group: core-security

|  | [BMO Automation](/user_profile?user_id=546015) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=924348#a342953010_546015)• 5 months ago |

Product: Toolkit → Core
You need to [log in](/show_bug.cgi?id=924348&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Jan Varga [:janv]](/user_profile?user_id=8340)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from bugzilla.mozilla.org_101491b8_20250124_230118.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/916635)
* [XML](/show_bug.cgi?ctype=xml&id=916635)

Closed
[Bug 916635](/show_bug.cgi?id=916635)

Opened 11 years ago
Closed 11 years ago

# Recursive graph traversal in RangeAnalysis

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

Recursive graph traversal in RangeAnalysis

## Categories

### (Core :: JavaScript Engine, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=JavaScript%20Engine#JavaScript%20Engine)

JavaScript Engine
▾

Core :: JavaScript Engine
The interpreter engine for the core JavaScript language, independent of the browser's object model. File ONLY core JavaScript language bugs in this category. For bugs involving browser objects such as "window" and "document", use the "DOM" component. For bugs involving calls between JavaScript and C++, use the "XPConnect" component.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=JavaScript%20Engine)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

unspecified

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

All

All

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

normal

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla27

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| a11y-review | --- |
| --- | --- |
| Accessibility Severity | --- |
| Webcompat Score | --- |
| Performance Impact | --- |
| Webcompat Priority | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox24 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox24&o1=equals&v1=wontfix) |
| firefox25 | --- | [affected](/buglist.cgi?f1=cf_status_firefox25&o1=equals&v1=affected) |
| firefox26 | --- | [affected](/buglist.cgi?f1=cf_status_firefox26&o1=equals&v1=affected) |
| firefox27 | [+](/buglist.cgi?f1=cf_tracking_firefox27&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=fixed) |
| firefox-esr17 | --- | [unaffected](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=unaffected) |
| firefox-esr24 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=wontfix) |
| b2g18 | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=unaffected) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox24 |  | wontfix |
| firefox25 |  | affected |
| firefox26 |  | affected |
| firefox27 | + | fixed |
| firefox-esr17 |  | unaffected |
| firefox-esr24 |  | wontfix |
| b2g18 |  | unaffected |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: sunfish, Assigned: sunfish)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/d0f20c3888e5ac206b6ede4d4dc5c2ce?d=mm&size=40)  [sunfish](/user_profile?user_id=468136)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/d0f20c3888e5ac206b6ede4d4dc5c2ce?d=mm&size=40)  [sunfish](/user_profile?user_id=468136)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/4fe52ee1503aecf7b6c976b8eb7c1753?d=mm&size=40)  [willyelm](/user_profile?user_id=714609)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

7 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[766592](/show_bug.cgi?id=766592 "RESOLVED FIXED - IonMonkey: implement symbolic range analysis")

Dependency [tree](/showdependencytree.cgi?id=916635&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=916635)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (4 keywords, Whiteboard: [qa-][adv-main27+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[crash](/buglist.cgi?keywords=crash&resolution=---),
[csectype-dos](/buglist.cgi?keywords=csectype-dos&resolution=---),
[regression](/buglist.cgi?keywords=regression&resolution=---),
[sec-low](/buglist.cgi?keywords=sec-low&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[qa-][adv-main27+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | in-testsuite |  |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (3 files, 1 obsolete file)

| [avoid-recursion.patch](/attachment.cgi?id=805109)  [11 years ago](#c0)  [Dan Gohman [:sunfish]](/user_profile?user_id=468136)   6.40 KB, patch | bhackett1024 : [review+](#c1 "11 years ago") | [Details](/attachment.cgi?id=805109&action=edit) | [Diff](/attachment.cgi?id=805109&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=916635&attachment=805109) |
| --- | --- | --- |
| [avoid-recursion.patch](/attachment.cgi?id=805415)  [11 years ago](#c2)  [Dan Gohman [:sunfish]](/user_profile?user_id=468136)   6.82 KB, patch | dveditz : [sec-approval+](#c7 "11 years ago") | [Details](/attachment.cgi?id=805415&action=edit) | [Diff](/attachment.cgi?id=805415&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=916635&attachment=805415) |
| [the patch, ported to the aurora branch](/attachment.cgi?id=808905)  [11 years ago](#c8)  [Dan Gohman [:sunfish]](/user_profile?user_id=468136)   6.58 KB, patch |  | [Details](/attachment.cgi?id=808905&action=edit) | [Diff](/attachment.cgi?id=808905&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=916635&attachment=808905) |
| [the patch, ported to the beta branch](/attachment.cgi?id=808906)  [11 years ago](#c9)  [Dan Gohman [:sunfish]](/user_profile?user_id=468136)   6.47 KB, patch |  | [Details](/attachment.cgi?id=808906&action=edit) | [Diff](/attachment.cgi?id=808906&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=916635&attachment=808906) |

Show Obsolete

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Dan Gohman [:sunfish]](/user_profile?user_id=468136)  Assignee |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=916635#c0)• 11 years ago |
|  | |

Attached patch

[avoid-recursion.patch](attachment.cgi?id=805109&action=diff) (obsolete)
— [Details](attachment.cgi?id=805109&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=916635&attachment=805109)

RangeAnalysis::markBlocksInLoopBody uses recursion to visit all the basic blocks in a loop. Since there's no explicit limit on how many blocks a loop might contain, this could theoretically overflow the stack (though in practice, usually something else fails first).
[Attachment #805109](/attachment.cgi?id=805109&action=edit "avoid-recursion.patch") -
Flags: review?(bhackett1024)

|  | [Brian Hackett [Laid off!]](/user_profile?user_id=346231) |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=916635#c1)• 11 years ago |
|  | |

Comment on [attachment 805109](/attachment.cgi?id=805109 "avoid-recursion.patch") [[details]](/attachment.cgi?id=805109&action=edit "avoid-recursion.patch") [[diff]](/attachment.cgi?id=805109&action=diff "avoid-recursion.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=916635&attachment=805109)
avoid-recursion.patch
Review of [attachment 805109](/attachment.cgi?id=805109 "avoid-recursion.patch") [[details]](/attachment.cgi?id=805109&action=edit "avoid-recursion.patch") [[diff]](/attachment.cgi?id=805109&action=diff "avoid-recursion.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=916635&attachment=805109):
-----------------------------------------------------------------
::: js/src/jit/RangeAnalysis.cpp
@@ +1300,1 @@
> RangeAnalysis::markBlocksInLoopBody(MBasicBlock \*header, MBasicBlock \*current)
Maybe rename |current| to |backedge|?
@@ +1400,5 @@
>
> for (MDefinitionIterator iter(block); iter; iter++) {
> MDefinition \*def = \*iter;
> if (def->isBoundsCheck() && def->isMovable()) {
> if (tryHoistBoundsCheck(header, def->toBoundsCheck()))
This |if| should have {} now.
@@ +1769,5 @@
> IonSpew(IonSpew\_Range, "computing range on %d", def->id());
> SpewRange(def);
> }
>
> if (block->isLoopHeader())
Ditto.
[Attachment #805109](/attachment.cgi?id=805109&action=edit "avoid-recursion.patch") -
Flags: review?(bhackett1024) → review+

|  | [Dan Gohman [:sunfish]](/user_profile?user_id=468136)  Assignee |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=916635#c2)• 11 years ago |
|  | |

Attached patch

[avoid-recursion.patch](attachment.cgi?id=805415&action=diff)
— [Details](attachment.cgi?id=805415&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=916635&attachment=805415)

(In reply to Brian Hackett (:bhackett) from [comment #1](/show_bug.cgi?id=916635#c1 "RESOLVED FIXED - Recursive graph traversal in RangeAnalysis"))
> Comment on [attachment 805109](/attachment.cgi?id=805109 "avoid-recursion.patch") [[details]](/attachment.cgi?id=805109&action=edit "avoid-recursion.patch") [[diff]](/attachment.cgi?id=805109&action=diff "avoid-recursion.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=916635&attachment=805109)
> avoid-recursion.patch
>
> Review of [attachment 805109](/attachment.cgi?id=805109 "avoid-recursion.patch") [[details]](/attachment.cgi?id=805109&action=edit "avoid-recursion.patch") [[diff]](/attachment.cgi?id=805109&action=diff "avoid-recursion.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=916635&attachment=805109):
> -----------------------------------------------------------------
>
> ::: js/src/jit/RangeAnalysis.cpp
> @@ +1300,1 @@
> > RangeAnalysis::markBlocksInLoopBody(MBasicBlock \*header, MBasicBlock \*current)
>
> Maybe rename |current| to |backedge|?
Done.
> @@ +1400,5 @@
> >
> > for (MDefinitionIterator iter(block); iter; iter++) {
> > MDefinition \*def = \*iter;
> > if (def->isBoundsCheck() && def->isMovable()) {
> > if (tryHoistBoundsCheck(header, def->toBoundsCheck()))
>
> This |if| should have {} now.
Done.
> @@ +1769,5 @@
> > IonSpew(IonSpew\_Range, "computing range on %d", def->id());
> > SpewRange(def);
> > }
> >
> > if (block->isLoopHeader())
>
> Ditto.
Done.
Attached is an updated patch.
[Attachment #805109](/attachment.cgi?id=805109&action=edit "avoid-recursion.patch") -
Attachment is obsolete: true

|  | [Dan Gohman [:sunfish]](/user_profile?user_id=468136)  Assignee |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=916635#c3)• 11 years ago |
|  | |

Comment on [attachment 805415](/attachment.cgi?id=805415 "avoid-recursion.patch") [[details]](/attachment.cgi?id=805415&action=edit "avoid-recursion.patch") [[diff]](/attachment.cgi?id=805415&action=diff "avoid-recursion.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=916635&attachment=805415)
avoid-recursion.patch
[Security approval request comment]
How easily could an exploit be constructed based on the patch?
Not easily. I tried, but everything I tried hit some other limit before becoming big enough to actually overflow the stack.
Do comments in the patch, the check-in comment, or tests included in the patch paint a bulls-eye on the security problem?
The make it clear what the bug is. They don't make it clear how to construct a testcase which actually exploits it.
Which older supported branches are affected by this flaw?
All branches at least back to mozilla-release.
If not all supported branches, which bug introduced the flaw?
The bug was introduced in 89e5db8cf62f ([bug 766592](/show_bug.cgi?id=766592 "RESOLVED FIXED - IonMonkey: implement symbolic range analysis")).
Do you have backports for the affected branches? If not, how different, hard to create, and risky will they be?
I don't have them yet, but they would be easy to create, with relatively low risk.
How likely is this patch to cause regressions; how much testing does it need?
I'd guess it doesn't need any testing beyond what would be done for any other patch.
[Attachment #805415](/attachment.cgi?id=805415&action=edit "avoid-recursion.patch") -
Flags: sec-approval?

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=916635#c4)• 11 years ago |
|  | |

Can someone suggest a security rating for this?
This looks to be necessary on all branches?
[status-b2g18](/buglist.cgi?f1=cf_status_b2g18&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=%3F)
[status-firefox24](/buglist.cgi?f1=cf_status_firefox24&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_firefox24&o1=equals&v1=wontfix)
[status-firefox25](/buglist.cgi?f1=cf_status_firefox25&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox25&o1=equals&v1=affected)
[status-firefox26](/buglist.cgi?f1=cf_status_firefox26&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox26&o1=equals&v1=affected)
[status-firefox-esr17](/buglist.cgi?f1=cf_status_firefox_esr17&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=affected)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=916635#a124570_280903)• 11 years ago |

[status-firefox27](/buglist.cgi?f1=cf_status_firefox27&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=affected)
[tracking-firefox27](/buglist.cgi?f1=cf_tracking_firefox27&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox27&o1=equals&v1=%2B)

|  | [David Bolter [:davidb] (NeedInfo me for attention)](/user_profile?user_id=152868) |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=916635#c5)• 11 years ago |
|  | |

(In reply to Al Billings [:abillings] from [comment #4](/show_bug.cgi?id=916635#c4 "RESOLVED FIXED - Recursive graph traversal in RangeAnalysis"))
> Can someone suggest a security rating for this?
Am I right that it is a hypothetical stack overflow? If so this is probably not too bad. We need a js team opinion.

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=916635#c6)• 11 years ago |
|  | |

It sounds like this is just a DOS.Keywords: [csec-dos](/buglist.cgi?keywords=csec-dos&resolution=---),
[sec-low](/buglist.cgi?keywords=sec-low&resolution=---)

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=916635#a659638_406194)• 11 years ago |

Keywords: [crash](/buglist.cgi?keywords=crash&resolution=---)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=916635#a678695_1689)• 11 years ago |

Blocks: [766592](/show_bug.cgi?id=766592 "RESOLVED FIXED - IonMonkey: implement symbolic range analysis")
[status-b2g18](/buglist.cgi?f1=cf_status_b2g18&o1=isnotempty):
[?](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=%3F) → [unaffected](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=unaffected)
[status-firefox-esr17](/buglist.cgi?f1=cf_status_firefox_esr17&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=affected) → [unaffected](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=unaffected)Keywords: [regression](/buglist.cgi?keywords=regression&resolution=---)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=916635#c7)• 11 years ago |
|  | |

Comment on [attachment 805415](/attachment.cgi?id=805415 "avoid-recursion.patch") [[details]](/attachment.cgi?id=805415&action=edit "avoid-recursion.patch") [[diff]](/attachment.cgi?id=805415&action=diff "avoid-recursion.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=916635&attachment=805415)
avoid-recursion.patch
sec-approval+
(You don't need sec-approval to land a sec-low bug, btw)
[Attachment #805415](/attachment.cgi?id=805415&action=edit "avoid-recursion.patch") -
Flags: sec-approval? → sec-approval+

|  | [Dan Gohman [:sunfish]](/user_profile?user_id=468136)  Assignee |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=916635#c8)• 11 years ago |
|  | |

Attached patch

[the patch, ported to the aurora branch](attachment.cgi?id=808905&action=diff)
— [Details](attachment.cgi?id=808905&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=916635&attachment=808905)

|  | [Dan Gohman [:sunfish]](/user_profile?user_id=468136)  Assignee |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=916635#c9)• 11 years ago |
|  | |

Attached patch

[the patch, ported to the beta branch](attachment.cgi?id=808906&action=diff)
— [Details](attachment.cgi?id=808906&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=916635&attachment=808906)

|  | [Dan Gohman [:sunfish]](/user_profile?user_id=468136)  Assignee |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=916635#c10)• 11 years ago |
|  | |

Checked into mozilla-inbound here:
<https://hg.mozilla.org/integration/mozilla-inbound/rev/e56f23a35f8b>

|  | [Wes Kocher (:KWierso) (Not reading bugmail; email directly if needed)](/user_profile?user_id=308534) |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=916635#c11)• 11 years ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/e56f23a35f8b>Status: NEW → RESOLVEDClosed: 11 years agoResolution: --- → FIXED

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=916635#a907635_75935)• 11 years ago |

[status-firefox27](/buglist.cgi?f1=cf_status_firefox27&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=fixed)
[status-firefox-esr24](/buglist.cgi?f1=cf_status_firefox_esr24&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=wontfix)Target Milestone: --- → mozilla27

|  | [Tracy Walker [:tracy]](/user_profile?user_id=18566) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=916635#a2735040_18566)• 11 years ago |

Whiteboard: [qa-]

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=916635#a11059400_280903)• 11 years ago |

Whiteboard: [qa-] → [qa-][adv-main27+]

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=916635#a45632410_1689)• 10 years ago |

Group: core-security
You need to [log in](/show_bug.cgi?id=916635&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Dan Gohman [:sunfish]](/user_profile?user_id=468136)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from bugzilla.mozilla.org_d80695dd_20250124_230114.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/911707)
* [XML](/show_bug.cgi?ctype=xml&id=911707)

Closed
[Bug 911707](/show_bug.cgi?id=911707)

Opened 11 years ago
Closed 11 years ago

# Assertion failure: arr->lengthIsWritable() (setter shouldn't be called if property is non-writable), at jsarray.cpp

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

Assertion failure: arr->lengthIsWritable() (setter shouldn't be called if property is non-writable), at jsarray.cpp

## Categories

### (Core :: JavaScript Engine, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=JavaScript%20Engine#JavaScript%20Engine)

JavaScript Engine
▾

Core :: JavaScript Engine
The interpreter engine for the core JavaScript language, independent of the browser's object model. File ONLY core JavaScript language bugs in this category. For bugs involving browser objects such as "window" and "document", use the "DOM" component. For bugs involving calls between JavaScript and C++, use the "XPConnect" component.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=JavaScript%20Engine)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

x86

macOS

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

critical

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla26

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Webcompat Priority | --- |
| --- | --- |
| a11y-review | --- |
| Accessibility Severity | --- |
| Webcompat Score | --- |
| Performance Impact | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox25 | --- | [unaffected](/buglist.cgi?f1=cf_status_firefox25&o1=equals&v1=unaffected) |
| firefox26 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox26&o1=equals&v1=wontfix) |
| firefox27 | --- | [fixed](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=fixed) |
| firefox-esr17 | --- | [unaffected](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=unaffected) |
| firefox-esr24 | --- | [unaffected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=unaffected) |
| b2g18 | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=unaffected) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox25 |  | unaffected |
| firefox26 |  | wontfix |
| firefox27 |  | fixed |
| firefox-esr17 |  | unaffected |
| firefox-esr24 |  | unaffected |
| b2g18 |  | unaffected |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: gkw, Assigned: efaust)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/589235fc11e48fe6ffaa98fb085b4110?d=mm&size=40)  [efaust](/user_profile?user_id=442736)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

![](https://secure.gravatar.com/avatar/55857f92ded07119259dc6c1dd386205?d=mm&size=40)  [general](/user_profile?user_id=4729)

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](extensions/Gravatar/web/default.jpg)  [gkw](/user_profile?user_id=132034)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/4fe52ee1503aecf7b6c976b8eb7c1753?d=mm&size=40)  [willyelm](/user_profile?user_id=714609)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

10 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[824393](/show_bug.cgi?id=824393 "RESOLVED FIXED - Create an IC for proxy set()")

Dependency [tree](/showdependencytree.cgi?id=911707&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=911707)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (4 keywords, Whiteboard: [jsbugmon:update,testComment=3,origRev=1179318fb5aa][adv-main27+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[assertion](/buglist.cgi?keywords=assertion&resolution=---),
[regression](/buglist.cgi?keywords=regression&resolution=---),
[sec-moderate](/buglist.cgi?keywords=sec-moderate&resolution=---),
[testcase](/buglist.cgi?keywords=testcase&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[jsbugmon:update,testComment=3,origRev=1179318fb5aa][adv-main27+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [efaust](/user_profile?user_id=442736) | [in-testsuite](#c10 "11 years ago") | + |
| --- | --- | --- |
| [efaust](/user_profile?user_id=442736) | in-testsuite | + |
| --- | --- | --- |
|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (4 files)

| [stack](/attachment.cgi?id=798435)  [11 years ago](#c0)  [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)   1.70 KB, text/plain |  | [Details](/attachment.cgi?id=798435&action=edit) |
| --- | --- | --- |
| [[crash-signature] Machine-readable crash signature](/attachment.cgi?id=798492)  [11 years ago](#c2)  [Christian Holler (:decoder)](/user_profile?user_id=395101)   382 bytes, text/plain |  | [Details](/attachment.cgi?id=798492&action=edit) |
| [Fix](/attachment.cgi?id=799015)  [11 years ago](#c5)  [Eric Faust [:efaust]](/user_profile?user_id=442736)   917 bytes, patch | Waldo : [review+](#c6 "11 years ago") | [Details](/attachment.cgi?id=799015&action=edit) | [Diff](/attachment.cgi?id=799015&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=911707&attachment=799015) |
| [[crash-signature] Machine-readable crash signature](/attachment.cgi?id=800038)  [11 years ago](#c9)  [Christian Holler (:decoder)](/user_profile?user_id=395101)   382 bytes, text/plain |  | [Details](/attachment.cgi?id=800038&action=edit) |

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=911707#c0)• 11 years ago |
|  | |

Attached file
[stack](attachment.cgi?id=798435)
— [Details](attachment.cgi?id=798435&action=edit)

try {
x = [];
y = [];
f = (function() {
y.length = 6
});
Object.freeze(y);
f();
Object.prototype.watch.call(x, "length", (function() {
return function() {
f()
}
})());
Array.prototype.pop.call(x)
} catch (e) {}
Array.prototype.push.call(x, "")
asserts js debug threadsafe shell on m-c changeset 1179318fb5aa with --ion-eager --ion-inlining=off at Assertion failure: arr->lengthIsWritable() (setter shouldn't be called if property is non-writable), at jsarray.cpp
My configure flags are:
LD=ld CROSS\_COMPILE=1 CXX="clang++ -Qunused-arguments -arch i386" RANLIB=ranlib CC="clang -Qunused-arguments -arch i386" AS=$CC AR=ar STRIP="strip -x -S" HOST\_CC="clang -Qunused-arguments" HOST\_CXX="clang++ -Qunused-arguments" sh ./configure --target=i386-apple-darwin9.2.0 --enable-macos-target=10.5 --enable-optimize --enable-debug --enable-profiling --enable-gczeal --enable-debug-symbols --enable-methodjit --enable-type-inference --disable-tests --enable-threadsafe --with-ccache <some NSPR compile flags, or use --with-system-nspr>
autoBisect shows this is probably related to the following changeset:
The first bad revision is:
changeset: <http://hg.mozilla.org/mozilla-central/rev/c1ccfd8f31bf>
user: Eric Faust
date: Fri Aug 30 18:50:36 2013 -0700
summary: [Bug 824393](/show_bug.cgi?id=824393 "RESOLVED FIXED - Create an IC for proxy set()") - Part 0: Open SetPropertyIC to cases with uncertain TI. (r=bhackett)
(s-s because the stack is short and strange) Eric, is [bug 824393](/show_bug.cgi?id=824393 "RESOLVED FIXED - Create an IC for proxy set()") probably related?Flags: needinfo?(efaustbmo)

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=911707#a1551_395101)• 11 years ago |

Whiteboard: [jsbugmon:update] → [jsbugmon:]

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101) |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=911707#c1)• 11 years ago |
|  | |

JSBugMon: Cannot process bug: Unable to automatically reproduce, please track manually.

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101) |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=911707#c2)• 11 years ago |
|  | |

Attached file
[[crash-signature] Machine-readable crash signature](attachment.cgi?id=798492)
— [Details](attachment.cgi?id=798492&action=edit)

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101) |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=911707#c3)• 11 years ago |
|  | |

Easier test that should also reproduce better (m-c rev 1179318fb5aa, options --fuzzing-safe --ion-eager):
x = [ "CNY", "TWD", "invalid" ];
Object.freeze(x).map(function() {
x.length = 6
})Whiteboard: [jsbugmon:] → [jsbugmon:update,bisect,testComment=3,origRev=1179318fb5aa]

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=911707#a14981_395101)• 11 years ago |

Whiteboard: [jsbugmon:update,bisect,testComment=3,origRev=1179318fb5aa] → [jsbugmon:update,testComment=3,origRev=1179318fb5aa]

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101) |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=911707#c4)• 11 years ago |
|  | |

JSBugMon: Bisection requested, result:
autoBisect shows this is probably related to the following changeset:
The first bad revision is:
changeset: <http://hg.mozilla.org/mozilla-central/rev/c1ccfd8f31bf>
user: Eric Faust
date: Fri Aug 30 18:50:36 2013 -0700
summary: [Bug 824393](/show_bug.cgi?id=824393 "RESOLVED FIXED - Create an IC for proxy set()") - Part 0: Open SetPropertyIC to cases with uncertain TI. (r=bhackett)
This iteration took 330.328 seconds to run.

|  | [Eric Faust [:efaust]](/user_profile?user_id=442736)  Assignee |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=911707#c5)• 11 years ago |
|  | |

Attached patch

[Fix](attachment.cgi?id=799015&action=diff)
— [Details](attachment.cgi?id=799015&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=911707&attachment=799015)

Yeah, OK. Don't IC unwritable PropertyOp setter shapes. Even though it should be relevant, we mirror the state that is in that flag, so it's the easiest way to check.Assignee: general → efaustbmoStatus: NEW → ASSIGNED
[Attachment #799015](/attachment.cgi?id=799015&action=edit "Fix") -
Flags: review?(jwalden+bmo)Flags: needinfo?(efaustbmo)

|  | [Jeff Walden [:Waldo]](/user_profile?user_id=83595) |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=911707#c6)• 11 years ago |
|  | |

Comment on [attachment 799015](/attachment.cgi?id=799015 "Fix") [[details]](/attachment.cgi?id=799015&action=edit "Fix") [[diff]](/attachment.cgi?id=799015&action=diff "Fix") [[review]](/page.cgi?id=splinter.html&ignore=&bug=911707&attachment=799015)
Fix
Review of [attachment 799015](/attachment.cgi?id=799015 "Fix") [[details]](/attachment.cgi?id=799015&action=edit "Fix") [[diff]](/attachment.cgi?id=799015&action=diff "Fix") [[review]](/page.cgi?id=splinter.html&ignore=&bug=911707&attachment=799015):
-----------------------------------------------------------------
::: js/src/jit/IonCaches.cpp
@@ +2054,5 @@
>
> if (shape->hasSetterValue())
> return false;
>
> + // Despite the vehement claims of Shape.h that writable() is only
I don't actually see these claims, only a commented-out assertion in Shape::writable() that belies them. :-)
[Attachment #799015](/attachment.cgi?id=799015&action=edit "Fix") -
Flags: review?(jwalden+bmo) → review+

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=911707#c7)• 11 years ago |
|  | |

How bad is this, security-wise, Eric?

|  | [Eric Faust [:efaust]](/user_profile?user_id=442736)  Assignee |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=911707#c8)• 11 years ago |
|  | |

Best to play it safe here, I think. Jeff and I agree that while the actual assertion that is failing is not a big deal, there could be other PropertyOp setters that are not as carefully written. I don't know what that translates to in terms of flags? moderate is my best guess.
Not hugely bad on the path taken, but with other potential consequences. Suggest we keep it closed until this lands.Keywords: [sec-moderate](/buglist.cgi?keywords=sec-moderate&resolution=---)

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101) |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=911707#c9)• 11 years ago |
|  | |

Attached file
[[crash-signature] Machine-readable crash signature](attachment.cgi?id=800038)
— [Details](attachment.cgi?id=800038&action=edit)

|  | [Eric Faust [:efaust]](/user_profile?user_id=442736)  Assignee |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=911707#c10)• 11 years ago |
|  | |

<https://hg.mozilla.org/integration/mozilla-inbound/rev/dcd4c1b60d7f>Flags: in-testsuite+

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=911707#a690327_395101)• 11 years ago |

Whiteboard: [jsbugmon:update,testComment=3,origRev=1179318fb5aa] → [jsbugmon:update,testComment=3,origRev=1179318fb5aa,ignore]

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101) |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=911707#c11)• 11 years ago |
|  | |

JSBugMon: The testcase found in this bug no longer reproduces (tried revision 680c89c76100).

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)  Reporter |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=911707#c12)• 11 years ago |
|  | |

This landed on m-c:
<http://hg.mozilla.org/mozilla-central/rev/dcd4c1b60d7f>Status: ASSIGNED → RESOLVEDClosed: 11 years agoResolution: --- → FIXEDWhiteboard: [jsbugmon:update,testComment=3,origRev=1179318fb5aa,ignore] → [jsbugmon:update,testComment=3,origRev=1179318fb5aa]

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=911707#a722382_132034)• 11 years ago |

Target Milestone: --- → mozilla26

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=911707#a724046_395101)• 11 years ago |

Status: RESOLVED → VERIFIED

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101) |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=911707#c13)• 11 years ago |
|  | |

JSBugMon: This bug has been automatically verified fixed.

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=911707#a3418897_1689)• 11 years ago |

[status-b2g18](/buglist.cgi?f1=cf_status_b2g18&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=unaffected)
[status-firefox25](/buglist.cgi?f1=cf_status_firefox25&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_firefox25&o1=equals&v1=unaffected)
[status-firefox26](/buglist.cgi?f1=cf_status_firefox26&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_firefox26&o1=equals&v1=wontfix)
[status-firefox27](/buglist.cgi?f1=cf_status_firefox27&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=fixed)
[status-firefox-esr17](/buglist.cgi?f1=cf_status_firefox_esr17&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=unaffected)
[status-firefox-esr24](/buglist.cgi?f1=cf_status_firefox_esr24&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=unaffected)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=911707#a12237965_280903)• 11 years ago |

Whiteboard: [jsbugmon:update,testComment=3,origRev=1179318fb5aa] → [jsbugmon:update,testComment=3,origRev=1179318fb5aa][adv-main27+]

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=911707#a46811359_1689)• 10 years ago |

Group: core-security
You need to [log in](/show_bug.cgi?id=911707&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from www.mozilla.org_a7d4a751_20250124_230103.html ===


## Help us improve your Mozilla experience

In addition to Cookies necessary for this site to function, we’d like your permission to set some additional Cookies to better understand your browsing needs and improve your experience. Rest assured — we value your privacy.

Accept All Additional Cookies

Reject All Additional Cookies

[Cookie settings](/en-US/privacy/websites/cookie-settings/)

Menu
[![Mozilla](https://www.mozilla.org/media/img/logos/m24/lockup-black.f2ddba3f0724.svg)](/en-US/)

* [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
  Firefox browsers](/en-US/firefox/)
  Close Firefox browsers menu
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for Desktop](/en-US/firefox/new/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for iOS](/en-US/firefox/browsers/mobile/ios/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for Android](/en-US/firefox/browsers/mobile/android/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/focus/logo.aac3e33175cb.svg)
    ## Firefox Focus](/en-US/firefox/browsers/mobile/focus/)
  + [## Firefox blog](https://blog.mozilla.org/firefox/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=firefox)
* [Products](/en-US/products/)
  Close Products menu
  + [![](https://www.mozilla.org/media/protocol/img/logos/mozilla/vpn/logo.c648f487bfb8.svg)
    ## Mozilla VPN](/en-US/products/vpn/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/monitor/logo.d97e5516f9e6.svg)
    ## Mozilla Monitor](https://monitor.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/relay/logo-white.d42a8b52e44c.svg)
    ## Firefox Relay](https://relay.firefox.com/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/protocol/img/logos/pocket/logo.17446bc33a5d.svg)
    ## Pocket](https://getpocket.com/firefox_learnmore/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/nav/icons/icon-mdn-plus.f54475f980ab.svg)
    ## MDN Plus](https://developer.mozilla.org/plus?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/logos/fakespot/logo-blue.3973b8fe9631.svg)
    ## Fakespot](https://fakespot.com/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/logos/thunderbird/logo-thunderbird.121e9c0fed45.svg)
    ## Thunderbird](https://www.thunderbird.net/)

  [All products](/en-US/products/)
* [About us](/en-US/about/)
  Close About us menu

  Our Mission

  + [## About Mozilla](/en-US/about/)
  + [## The Mozilla Manifesto](/en-US/about/manifesto/)
  + [## Get Involved](/en-US/contribute/)
  + [## Innovation Projects](https://future.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Blog](https://blog.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)

  Our Work

  + [## Mozilla Foundation](https://foundation.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla.ai](https://www.mozilla.ai/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla Ventures](https://mozilla.vc/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla Advertising](/en-US/advertising/)

## Menu

* Mozilla Security

## [Mozilla Security](/en-US/security/)

* [Advisories](/en-US/security/advisories/)
* [Known Vulnerabilities](/en-US/security/known-vulnerabilities/)
* [Mozilla Security Blog](https://blog.mozilla.com/security/)
* [Security Bug Bounty](/en-US/security/bug-bounty/)
* [Third-party Injection Policy](/en-US/security/third-party-software-injection/)

## [Client Bug Bounty](/en-US/security/client-bug-bounty/)

* [Frequently Asked Questions](/en-US/security/bug-bounty/faq/)
* [Hall of Fame](/en-US/security/bug-bounty/hall-of-fame/)

## [Web Bug Bounty](/en-US/security/web-bug-bounty/)

* [Eligible Websites](/en-US/security/bug-bounty/web-eligible-sites/)
* [Frequently Asked Questions](/en-US/security/bug-bounty/faq-webapp/)
* [Hall of Fame](/en-US/security/bug-bounty/web-hall-of-fame/)

# Mozilla Foundation Security Advisory 2014-01

## Miscellaneous memory safety hazards (rv:27.0 / rv:24.3)

Announced
February 4, 2014
Reporter
Mozilla Developers
Impact
Critical
Products
Firefox, Firefox ESR, SeaMonkey, Thunderbird
Fixed in

* Firefox 27
* Firefox ESR 24.3
* SeaMonkey 2.24
* Thunderbird 24.3

### Description

Mozilla developers and community identified identified and fixed several
memory safety bugs in the browser engine used in Firefox and other Mozilla-based
products. Some of these bugs showed evidence of memory corruption under certain
circumstances, and we presume that with enough effort at least some of these
could be exploited to run arbitrary code.

In general these flaws cannot be exploited through email in the
Thunderbird and Seamonkey products because scripting is disabled, but are
potentially a risk in browser or browser-like contexts.

### References

Christian Holler, Terrence Cole, Jesse Ruderman, Gary Kwong, Eric Rescorla,
Jonathan Kew, Dan Gohman, Ryan VanderMeulen, and Sotaro Ikeda
reported memory safety problems and crashes that affect Firefox ESR 24.2 and
Firefox 26.

* [Memory safety bugs fixed in Firefox ESR 24.3 and Firefox 27.0](https://bugzilla.mozilla.org/buglist.cgi?bug_id=921470,937697,951366,953114,945939,950000,950438,925896,937132,936808,945334) ([CVE-2014-1477](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-1477))

Gary Kwong, Christian Holler, Jesse Ruderman, Carsten Book, Andrew
Sutherland, Byron Campen, Nicholas Nethercote, Paul Adenot, David Baron, Julian
Seward, and Dan Gohman reported memory safety problems and crashes that affect
Firefox 26.

* [Memory safety bugs fixed in Firefox 27.0](https://bugzilla.mozilla.org/buglist.cgi?bug_id=944321,911707,938431,944278,922603,925308,950452,939472,944851,924348,932162,942940,945585,946733,953373,867597,911845,916635) ([CVE-2014-1478](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-1478))

Carsten Book reported a memory safety problem and crash that affects Firefox
ESR 24.3, which has been fixed in Firefox ESR 24.4.

* [Assertion failure: ss->ssl3.hs.hashType == handshake\_hash\_unknown](https://bugzilla.mozilla.org/show_bug.cgi?id=942152)
  ([CVE-2014-1495](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-1495))

## Company

* [Leadership](/about/leadership/)
* [Press Center](https://blog.mozilla.org/category/mozilla/news/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=company)
* [Careers](/en-US/careers/)
* [Contact](/en-US/contact/)

## Support

* [Product Help](https://support.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)
* [File a Bug](https://bugzilla.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)
* [Localize Mozilla](https://pontoon.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)

## Resources

* [Advertise with Mozilla](/en-US/advertising/)
* [Firefox Release Notes](/firefox/134.0.2/releasenotes/)

## Developers

* [Developer Edition](/en-US/firefox/developer/)
* [Enterprise](/en-US/firefox/enterprise/)
* [Tools](https://firefox-source-docs.mozilla.org/devtools-user/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=developers)
* [MDN](https://developer.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer)

## Follow @Mozilla

* [X (formerly Twitter) (@mozilla)](https://twitter.com/mozilla)
* [Instagram (@mozilla)](https://www.instagram.com/mozilla/)
* [LinkedIn (@mozilla)](https://www.linkedin.com/company/mozilla-corporation/)
* [TikTok (@mozilla)](https://www.tiktok.com/%40mozilla)
* [Spotify (@mozilla)](https://open.spotify.com/show/0vT7LJMeVDxyQ2ZamHKu08?si=_uDRD6bRR_6M5YZyISGXgA)

## Follow @Firefox

* [X (formerly Twitter) (@firefox)](https://twitter.com/firefox)
* [Instagram (@firefox)](https://www.instagram.com/firefox/)
* [YouTube (@firefoxchannel)](https://www.youtube.com/user/firefoxchannel)
* [TikTok (@firefox)](https://www.tiktok.com/%40firefox)

[Donate](https://foundation.mozilla.org/?form=moco-donate-footer)

Visit [Mozilla Corporation’s](/en-US/) not-for-profit parent, the [Mozilla Foundation](https://foundation.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer).

Portions of this content are ©1998–2025 by individual mozilla.org contributors. Content available under a [Creative Commons license](/en-US/foundation/licensing/website-content/).

* [Website Privacy Notice](/en-US/privacy/websites/)
* [Cookies](/en-US/privacy/websites/cookie-settings/)
* [Legal](/en-US/about/legal/)
* [Community Participation Guidelines](/en-US/about/governance/policies/participation/)
* [About this site](/en-US/about/this-site/)

![](https://www.mozilla.org/media/img/logos/m24/wordmark-white.2d673bb5b33a.svg)



=== Content from bugzilla.mozilla.org_df1f2001_20250124_230128.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/932162)
* [XML](/show_bug.cgi?ctype=xml&id=932162)

Closed
[Bug 932162](/show_bug.cgi?id=932162)

Opened 11 years ago
Closed 11 years ago

# Crash in mozilla::dom::indexedDB::IndexedDatabaseManager::AddRef invoked by mozilla::dom::indexedDB::FileInfo::Cleanup in cycle collecting DOM Worker death

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

Crash in mozilla::dom::indexedDB::IndexedDatabaseManager::AddRef invoked by mozilla::dom::indexedDB::FileInfo::Cleanup in cycle collecting DOM Worker death

## Categories

### (Core :: Storage: IndexedDB, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=Storage%3A%20IndexedDB#Storage%3A%20IndexedDB)

Storage: IndexedDB
▾

Core :: Storage: IndexedDB
[IndexedDB](https://w3c.github.io/IndexedDB/) implementation, exposed through self.indexedDB.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=Storage%3A%20IndexedDB&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=Storage%3A%20IndexedDB&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=Storage%3A%20IndexedDB)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

x86\_64

Linux

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

normal

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla28

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Webcompat Score | --- |
| --- | --- |
| Performance Impact | --- |
| a11y-review | --- |
| Accessibility Severity | --- |
| Webcompat Priority | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox26 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox26&o1=equals&v1=wontfix) |
| firefox27 | [+](/buglist.cgi?f1=cf_tracking_firefox27&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=fixed) |
| firefox28 | --- | [fixed](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=fixed) |
| firefox29 | --- | [unaffected](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=unaffected) |
| firefox-esr24 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=wontfix) |
| b2g18 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=fixed) |
| b2g-v1.1hd | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=equals&v1=fixed) |
| b2g-v1.2 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=fixed) |
| b2g-v1.3 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=fixed) |
| b2g-v1.3T | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=fixed) |
| b2g-v1.4 | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=unaffected) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox26 |  | wontfix |
| firefox27 | + | fixed |
| firefox28 |  | fixed |
| firefox29 |  | unaffected |
| firefox-esr24 |  | wontfix |
| b2g18 |  | fixed |
| b2g-v1.1hd |  | fixed |
| b2g-v1.2 |  | fixed |
| b2g-v1.3 |  | fixed |
| b2g-v1.3T |  | fixed |
| b2g-v1.4 |  | unaffected |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: asuth, Assigned: asuth)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/75b1e0d00a677e73b24efe34917fa1e9?d=mm&size=40)  [asuth](/user_profile?user_id=151407)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/75b1e0d00a677e73b24efe34917fa1e9?d=mm&size=40)  [asuth](/user_profile?user_id=151407)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/056757eff6ed7c8ec26f61e3bf7695fe?d=mm&size=40)  [smaug](/user_profile?user_id=39966)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

10 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[871897](/show_bug.cgi?id=871897 "RESOLVED FIXED - [email] Change mail sending process to use streaming to reduce peak memory usage")

Dependency [tree](/showdependencytree.cgi?id=932162&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=932162)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Keywords: sec-moderate, Whiteboard: [qa-][adv-main27+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[sec-moderate](/buglist.cgi?keywords=sec-moderate&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[qa-][adv-main27+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | in-testsuite |  |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (2 files)

| [indexeddb-blob-death-v1.diff](/attachment.cgi?id=827839)  [11 years ago](#c6)  [Andrew Sutherland [:asuth] (he/him)](/user_profile?user_id=151407)   8.50 KB, patch | khuey : [review+](#c8 "11 years ago")  bajaj : [approval-mozilla-beta+](#a6616399_448925 "11 years ago")  bajaj : [approval-mozilla-esr24+](#a6616399_448925 "11 years ago")  bajaj : [approval-mozilla-b2g26+](#a6616399_448925 "11 years ago") | [Details](/attachment.cgi?id=827839&action=edit) | [Diff](/attachment.cgi?id=827839&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=932162&attachment=827839) |
| --- | --- | --- |
| [indexeddb-blob-death-v1-b2g18.diff](/attachment.cgi?id=8374046)  [11 years ago](#c37)  [Andrew Sutherland [:asuth] (he/him)](/user_profile?user_id=151407)   9.36 KB, patch | asuth : [review+](#c37 "11 years ago")  praghunath : [approval-mozilla-b2g18+](#c38 "11 years ago") | [Details](/attachment.cgi?id=8374046&action=edit) | [Diff](/attachment.cgi?id=8374046&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=932162&attachment=8374046) |

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Andrew Sutherland [:asuth] (he/him)](/user_profile?user_id=151407)  Assignee |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=932162#c0)• 11 years ago |
|  | |

In Gaia e-mail we are doing exciting things with message sending where we build composite Blobs on a DOMWorker made out of some Strings and/or TypedArrays plus some Blobs we stashed in IndexedDB (and then postMessaged across to the worker).
I am able to reliably reproduce the following crash in our gaia e-mail backend tests which are being run under a linux x64 b2g-desktop build. Because I am already trying to work around [bug 932143](/show_bug.cgi?id=932143 "RESOLVED WORKSFORME - b2g x64 crash in js::jit::Assembler::TraceJumpRelocations during non-self.close() DOMWorker shutdown under GDB") I know with high probability that the worker is dying because of a self.close() call and that the main page that owns it is probably still alive. (Because if this wasn't what is happening, we would be crashing due to that bug.)
There's a pretty good chance the main thread JS code has already discarded its references to the IndexedDB Blobs, called close on the IndexedDB instance and forgotten about the IndexedDB instance too. (The unit tests attempt a clean shutdown of our use of the database.) I have no idea if a GC would have already happened on the main thread. (In fact, the main thread holds very few references to the Blobs or the IndexedDB instance, all of the worker happens on the worker and we're just remoting calls to the main thread because we have to.)
Please feel free to ask me to run with any logging/DEBUG builds that would help, or if you'd like me to trace any code for suspiciousness. This is probably going to block a koi+ blocker unless you think this can only happen on DOMWorker shutdown, in which case it's just an annoyance. I'm not going to investigate anything right now since it sounded from khuey like this might be fairly clear cut.
#0 0x00002aaaacff32d6 in mozilla::dom::indexedDB::IndexedDatabaseManager::AddRef (this=this@entry=0x2aaad1dab5e0) at /home/visbrero/rev\_control/fgit/mozilla-central/dom/indexedDB/IndexedDatabaseManager.cpp:726
#1 0x00002aaaacfd6e8a in nsRefPtr (aRawPtr=0x2aaad1dab5e0, this=<synthetic pointer>) at ../../dist/include/nsAutoPtr.h:911
#2 mozilla::dom::indexedDB::FileInfo::Cleanup (this=this@entry=0x2aaadb147df0) at /home/visbrero/rev\_control/fgit/mozilla-central/dom/indexedDB/FileInfo.cpp:107
#3 0x00002aaaacfd6f76 in mozilla::dom::indexedDB::FileInfo::UpdateReferences (this=0x2aaadb147df0, aRefCount=..., aDelta=-1, aClear=<optimized out>) at /home/visbrero/rev\_control/fgit/mozilla-central/dom/indexedDB/FileInfo.cpp:92
#4 0x00002aaaacd545b8 in ~nsRefPtr (this=0x2aaad7e60d90, \_\_in\_chrg=<optimized out>) at ../../../dist/include/nsAutoPtr.h:887
#5 Destruct (e=0x2aaad7e60d90) at ../../../dist/include/nsTArray.h:534
#6 DestructRange (count=4, start=0, this=0x2aaadaf3fee8) at ../../../dist/include/nsTArray.h:1573
#7 RemoveElementsAt (count=4, start=0, this=0x2aaadaf3fee8) at ../../../dist/include/nsTArray.h:1290
#8 Clear (this=0x2aaadaf3fee8) at ../../../dist/include/nsTArray.h:1301
#9 ~nsTArray\_Impl (this=0x2aaadaf3fee8, \_\_in\_chrg=<optimized out>) at ../../../dist/include/nsTArray.h:752
#10 ~nsTArray (this=0x2aaadaf3fee8, \_\_in\_chrg=<optimized out>) at ../../../dist/include/nsTArray.h:1646
#11 nsDOMFileBase::~nsDOMFileBase (this=0x2aaadaf3fe80, \_\_in\_chrg=<optimized out>) at ../../../dist/include/nsDOMFile.h:121
#12 0x00002aaaacd546a3 in nsDOMMultipartFile::~nsDOMMultipartFile (this=0x2aaadaf3fe80, \_\_in\_chrg=<optimized out>) at /home/visbrero/rev\_control/fgit/mozilla-central/content/base/src/nsDOMBlobBuilder.h:23
#13 0x00002aaaacd55fd2 in nsDOMFile::Release (this=0x2aaadaf3fe80) at /home/visbrero/rev\_control/fgit/mozilla-central/content/base/src/nsDOMFile.cpp:461
#14 0x00002aaaadd93c9f in finalize (fop=0x2aaad8901900, this=0x2aaaddaa42b0) at /home/visbrero/rev\_control/fgit/mozilla-central/js/src/jsobjinlines.h:89
#15 finalize<JSObject> (thingSize=48, thingKind=js::gc::FINALIZE\_OBJECT2, fop=0x2aaad8901900, this=0x2aaaddaa4000) at /home/visbrero/rev\_control/fgit/mozilla-central/js/src/jsgc.cpp:337
#16 FinalizeTypedArenas<JSObject> (dest=..., budget=..., thingKind=js::gc::FINALIZE\_OBJECT2, src=0x2aaad89018a8, fop=0x2aaad8901900) at /home/visbrero/rev\_control/fgit/mozilla-central/js/src/jsgc.cpp:401
#17 FinalizeArenas (fop=fop@entry=0x2aaad8901900, src=src@entry=0x2aaad89018a8, dest=..., thingKind=thingKind@entry=js::gc::FINALIZE\_OBJECT2, budget=...) at /home/visbrero/rev\_control/fgit/mozilla-central/js/src/jsgc.cpp:438
#18 0x00002aaaadd949f8 in finalizeNow (thingKind=js::gc::FINALIZE\_OBJECT2, fop=0x2aaad8901900, this=0x2aaad80e7838) at /home/visbrero/rev\_control/fgit/mozilla-central/js/src/jsgc.cpp:1340
#19 js::gc::ArenaLists::queueObjectsForSweep (this=this@entry=0x2aaad80e7838, fop=fop@entry=0x2aaad8901900) at /home/visbrero/rev\_control/fgit/mozilla-central/js/src/jsgc.cpp:1436
#20 0x00002aaaadd94fd2 in BeginSweepingZoneGroup (rt=rt@entry=0x2aaad7cec000) at /home/visbrero/rev\_control/fgit/mozilla-central/js/src/jsgc.cpp:3767
#21 0x00002aaaadd97ab1 in BeginSweepPhase (lastGC=true, rt=0x2aaad7cec000) at /home/visbrero/rev\_control/fgit/mozilla-central/js/src/jsgc.cpp:3851
#22 IncrementalCollectSlice (rt=rt@entry=0x2aaad7cec000, budget=budget@entry=0, reason=reason@entry=JS::gcreason::DESTROY\_RUNTIME, gckind=gckind@entry=js::GC\_NORMAL) at /home/visbrero/rev\_control/fgit/mozilla-central/js/src/jsgc.cpp:4410
#23 0x00002aaaadd98c68 in GCCycle (rt=rt@entry=0x2aaad7cec000, incremental=incremental@entry=false, budget=budget@entry=0, gckind=gckind@entry=js::GC\_NORMAL, reason=reason@entry=JS::gcreason::DESTROY\_RUNTIME) at /home/visbrero/rev\_control/fgit/mozilla-central/js/src/jsgc.cpp:4555
#24 0x00002aaaadd990f5 in Collect (rt=rt@entry=0x2aaad7cec000, incremental=incremental@entry=false, budget=budget@entry=0, gckind=gckind@entry=js::GC\_NORMAL, reason=reason@entry=JS::gcreason::DESTROY\_RUNTIME) at /home/visbrero/rev\_control/fgit/mozilla-central/js/src/jsgc.cpp:4699
#25 0x00002aaaadd9939d in Collect (reason=JS::gcreason::DESTROY\_RUNTIME, gckind=js::GC\_NORMAL, budget=0, incremental=false, rt=rt@entry=0x2aaad7cec000) at /home/visbrero/rev\_control/fgit/mozilla-central/js/src/jsgc.cpp:4725
#26 js::GC (rt=rt@entry=0x2aaad7cec108, gckind=gckind@entry=js::GC\_NORMAL, reason=reason@entry=JS::gcreason::DESTROY\_RUNTIME) at /home/visbrero/rev\_control/fgit/mozilla-central/js/src/jsgc.cpp:4724
#27 0x00002aaaade8ec7b in JSRuntime::~JSRuntime (this=0x2aaad7cec108, \_\_in\_chrg=<optimized out>) at /home/visbrero/rev\_control/fgit/mozilla-central/js/src/vm/Runtime.cpp:443
#28 0x00002aaaadd391ce in js\_delete<JSRuntime> (p=0x2aaad7cec000) at ../../dist/include/js/Utility.h:319
#29 JS\_DestroyRuntime (rt=0x2aaad7cec000) at /home/visbrero/rev\_control/fgit/mozilla-central/js/src/jsapi.cpp:743
#30 0x00002aaaad73811e in mozilla::CycleCollectedJSRuntime::DestroyRuntime (this=this@entry=0x2aaad8901ca0) at /home/visbrero/rev\_control/fgit/mozilla-central/xpcom/base/CycleCollectedJSRuntime.cpp:472
#31 0x00002aaaad738aef in mozilla::CycleCollectedJSRuntime::~CycleCollectedJSRuntime (this=0x2aaad8901ca0, \_\_in\_chrg=<optimized out>) at /home/visbrero/rev\_control/fgit/mozilla-central/xpcom/base/CycleCollectedJSRuntime.cpp:480
#32 0x00002aaaacfbc49b in (anonymous namespace)::WorkerThreadRunnable::Run (this=<optimized out>) at /home/visbrero/rev\_control/fgit/mozilla-central/dom/workers/RuntimeService.cpp:946
#33 0x00002aaaad7346f0 in nsThread::ProcessNextEvent (this=0x2aaad7bc9ce0, mayWait=<optimized out>, result=0x2aaad8901e2f) at /home/visbrero/rev\_control/fgit/mozilla-central/xpcom/threads/nsThread.cpp:622
#34 0x00002aaaad7064bf in NS\_ProcessNextEvent (thread=<optimized out>, thread@entry=0x2aaad7bc9ce0, mayWait=mayWait@entry=true) at /home/visbrero/rev\_control/fgit/mozilla-central/xpcom/glue/nsThreadUtils.cpp:251
#35 0x00002aaaad734d99 in nsThread::ThreadFunc (arg=0x2aaad7bc9ce0) at /home/visbrero/rev\_control/fgit/mozilla-central/xpcom/threads/nsThread.cpp:250
#36 0x00002aaaabf92cc2 in \_pt\_root (arg=0x2aaabee55020) at /home/visbrero/rev\_control/fgit/mozilla-central/nsprpub/pr/src/pthreads/ptthread.c:204
#37 0x00002aaaaacd7f6e in start\_thread (arg=0x2aaad8902700) at pthread\_create.c:311
#38 0x00002aaaab7f39cd in clone () at ../sysdeps/unix/sysv/linux/x86\_64/clone.S:113Flags: needinfo?(bent.mozilla)

|  | [Kyle Huey (Exited; not receiving bugmail, old account, do not use)](/user_profile?user_id=336670) |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=932162#c1)• 11 years ago |
|  | |

So this means we're looking at an object that never should have made it to the worker thread in the first place. We should be blocking something in the structured clone process that we're not ...

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=932162#c2)• 11 years ago |
|  | |

Objects leaking across threads sounds bad...Keywords: [sec-high](/buglist.cgi?keywords=sec-high&resolution=---)

|  | [Kyle Huey (Exited; not receiving bugmail, old account, do not use)](/user_profile?user_id=336670) |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=932162#c3)• 11 years ago |
|  | |

Yes, it is. Can you take this jan? We need to disallow the underlying object type here from being structured cloned to a worker, most likely. That's probably going to change asuth's app from crashing to not working at all ...Flags: needinfo?(Jan.Varga)

|  | [Andrew Sutherland [:asuth] (he/him)](/user_profile?user_id=151407)  Assignee |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=932162#c4)• 11 years ago |
|  | |

We're just passing (IndexedDB-owned) Blobs around, nothing more sinister. Unless I'm missing something, it seems like the IndexedDB blob reference can keep the IndexedDB object it is associated with alive until it is released, and then it can proxy the release to the main thread for sanity/simplicity of analysis purposes.

|  | [Jan Varga [:janv]](/user_profile?user_id=8340) |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=932162#c5)• 11 years ago |
|  | |

Ok, but I need to think about it a bitAssignee: nobody → Jan.VargaFlags: needinfo?(Jan.Varga)

|  | [Andrew Sutherland [:asuth] (he/him)](/user_profile?user_id=151407)  Assignee |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=932162#c6)• 11 years ago |
|  | |

Attached patch

[indexeddb-blob-death-v1.diff](attachment.cgi?id=827839&action=diff)
— [Details](attachment.cgi?id=827839&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=932162&attachment=827839)

I talked with Jan about this on Friday and we agreed I'd take this over. I am arbitrarily asking Kyle to review.
The summary of the problem is that if the last reference to the IndexedDB blob is on the worker when FileInfo::Release gets called, FileInfo::UpdateReferences runs, goes to zero, needsCleanup is true, and so FileInfo::Cleanup gets called.
FileInfo::Cleanup has an NS\_ASSERT about being on the main-thread. If that doesn't stop us, IndexedDatabaseManager's ref-count stuff triggers a MOZ\_CRASH. I think that might have been what caused my crash in [comment 0](/show_bug.cgi?id=932162#c0 "RESOLVED FIXED - Crash in mozilla::dom::indexedDB::IndexedDatabaseManager::AddRef invoked by mozilla::dom::indexedDB::FileInfo::Cleanup in cycle collecting DOM Worker death").
The patch moves the cleanup logic into a runnable which it dispatches to the main thread if we're not on the main thread and just invokes directly if we are (to avoid code duplication).
This patch includes a test that will cause a debug build without the fix to assert and/or crash, generating the desired mochitest failure. I don't think I was clever enough to get the non-debug build to actually crash. This may have something to do with the changes that khuey landed today to cleanup workers; a new b2g-desktop build no longer crashes reliably even without my fix here. But to be clear, a firefox debug build with those worker cleanup changes (and without this fix) does still abort/crash.
I have just initiated a try build:
<https://tbpl.mozilla.org/?tree=Try&rev=b071f8ef9617>Assignee: Jan.Varga → bugmailStatus: NEW → ASSIGNED
[Attachment #827839](/attachment.cgi?id=827839&action=edit "indexeddb-blob-death-v1.diff") -
Flags: review?(khuey)Flags: needinfo?(bent.mozilla)

|  | [Kyle Huey (Exited; not receiving bugmail, old account, do not use)](/user_profile?user_id=336670) |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=932162#c7)• 11 years ago |
|  | |

(In reply to Andrew Sutherland (:asuth) from [comment #6](/show_bug.cgi?id=932162#c6 "RESOLVED FIXED - Crash in mozilla::dom::indexedDB::IndexedDatabaseManager::AddRef invoked by mozilla::dom::indexedDB::FileInfo::Cleanup in cycle collecting DOM Worker death"))
> FileInfo::Cleanup has an NS\_ASSERT about being on the main-thread. If that
> doesn't stop us, IndexedDatabaseManager's ref-count stuff triggers a
> MOZ\_CRASH. I think that might have been what caused my crash in [comment 0](/show_bug.cgi?id=932162#c0 "RESOLVED FIXED - Crash in mozilla::dom::indexedDB::IndexedDatabaseManager::AddRef invoked by mozilla::dom::indexedDB::FileInfo::Cleanup in cycle collecting DOM Worker death").
What do you know, my opt build assertions are actually useful.

|  | [Kyle Huey (Exited; not receiving bugmail, old account, do not use)](/user_profile?user_id=336670) |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=932162#c8)• 11 years ago |
|  | |

Comment on [attachment 827839](/attachment.cgi?id=827839 "indexeddb-blob-death-v1.diff") [[details]](/attachment.cgi?id=827839&action=edit "indexeddb-blob-death-v1.diff") [[diff]](/attachment.cgi?id=827839&action=diff "indexeddb-blob-death-v1.diff") [[review]](/page.cgi?id=splinter.html&ignore=&bug=932162&attachment=827839)
indexeddb-blob-death-v1.diff
Review of [attachment 827839](/attachment.cgi?id=827839 "indexeddb-blob-death-v1.diff") [[details]](/attachment.cgi?id=827839&action=edit "indexeddb-blob-death-v1.diff") [[diff]](/attachment.cgi?id=827839&action=diff "indexeddb-blob-death-v1.diff") [[review]](/page.cgi?id=splinter.html&ignore=&bug=932162&attachment=827839):
-----------------------------------------------------------------
Upgrade the threadsafety NS\_ASSERTION to a MOZ\_ASSERT please while you're at it.
[Attachment #827839](/attachment.cgi?id=827839&action=edit "indexeddb-blob-death-v1.diff") -
Flags: review?(khuey) → review+

|  | [Jan Varga [:janv]](/user_profile?user_id=8340) |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=932162#c9)• 11 years ago |
|  | |

Comment on [attachment 827839](/attachment.cgi?id=827839 "indexeddb-blob-death-v1.diff") [[details]](/attachment.cgi?id=827839&action=edit "indexeddb-blob-death-v1.diff") [[diff]](/attachment.cgi?id=827839&action=diff "indexeddb-blob-death-v1.diff") [[review]](/page.cgi?id=splinter.html&ignore=&bug=932162&attachment=827839)
indexeddb-blob-death-v1.diff
Review of [attachment 827839](/attachment.cgi?id=827839 "indexeddb-blob-death-v1.diff") [[details]](/attachment.cgi?id=827839&action=edit "indexeddb-blob-death-v1.diff") [[diff]](/attachment.cgi?id=827839&action=diff "indexeddb-blob-death-v1.diff") [[review]](/page.cgi?id=splinter.html&ignore=&bug=932162&attachment=827839):
-----------------------------------------------------------------
Yeah, this makes sense, thanks for fixing it.
additional r=me

|  | [Andrew Sutherland [:asuth] (he/him)](/user_profile?user_id=151407)  Assignee |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=932162#c10)• 11 years ago |
|  | |

quick update: Thanks for the fast review. There was a test failure on "B2G Desktop Linux x64 Opt" involving the indexedDB spinup in the iframe that looks deterministic or at least very frequent that I need to look into and resolve. I have been swamped with FxOS 1.3 blocker reviews that are higher risk than this but should be able to address that test failure and land sometime over the next few days. If the reason for the test failure is obvious, feel free to chime in with the problem/solution :)

|  | [Andrew Sutherland [:asuth] (he/him)](/user_profile?user_id=151407)  Assignee |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=932162#c11)• 11 years ago |
|  | |

(In reply to Andrew Sutherland (:asuth) from [comment #10](/show_bug.cgi?id=932162#c10 "RESOLVED FIXED - Crash in mozilla::dom::indexedDB::IndexedDatabaseManager::AddRef invoked by mozilla::dom::indexedDB::FileInfo::Cleanup in cycle collecting DOM Worker death"))
> quick update: Thanks for the fast review. There was a test failure on "B2G
> Desktop Linux x64 Opt" involving the indexedDB spinup in the iframe that
> looks deterministic or at least very frequent that I need to look into and
> resolve. I have been swamped with FxOS 1.3 blocker reviews that are higher
> risk than this but should be able to address that test failure and land
> sometime over the next few days. If the reason for the test failure is
> obvious, feel free to chime in with the problem/solution :)
It turns out indexed DB mochitests don't run on linux x64 opt because they fail; [bug 931116](/show_bug.cgi?id=931116 "RESOLVED WONTFIX - [Tracking] b2g desktop mochitest failures"). Unfortunately, I did not know this and did more work than laziness requires. The good news is that in [bug 927889](/show_bug.cgi?id=927889 "RESOLVED WONTFIX - Error when running a single b2g desktop mochitest with --test-path") I figured out how to run a single mochitest under b2g and incidentally this seems to also make at least one other indexedDB test work.
(The bug was making the mochi-tests look like third-party iframes when they should not have been treated as such.)

|  | [Ben Turner (not reading bugmail, use the needinfo flag!)](/user_profile?user_id=200444) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=932162#c12)• 11 years ago |
|  | |

(In reply to Andrew Sutherland (:asuth) from [comment #11](/show_bug.cgi?id=932162#c11 "RESOLVED FIXED - Crash in mozilla::dom::indexedDB::IndexedDatabaseManager::AddRef invoked by mozilla::dom::indexedDB::FileInfo::Cleanup in cycle collecting DOM Worker death"))
> (The bug was making the mochi-tests look like third-party iframes when they
> should not have been treated as such.)
Ugh.
And, you are my hero.

|  | [Andrew Sutherland [:asuth] (he/him)](/user_profile?user_id=151407)  Assignee |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=932162#c13)• 11 years ago |
|  | |

mozilla-inbound is closed for PGO failures and the back-outs will take time to bake, landing on b2g-inbound since B2G is the one what cares about this:
<https://hg.mozilla.org/integration/b2g-inbound/rev/854452f105dc>

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=932162#c14)• 11 years ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/854452f105dc>
Don't sec-highs need security-approval to land?Status: ASSIGNED → RESOLVEDClosed: 11 years ago
[status-b2g18](/buglist.cgi?f1=cf_status_b2g18&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=%3F)
[status-b2g-v1.1hd](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=equals&v1=%3F)
[status-b2g-v1.2](/buglist.cgi?f1=cf_status_b2g_1_2&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=%3F)
[status-firefox26](/buglist.cgi?f1=cf_status_firefox26&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_status_firefox26&o1=equals&v1=%3F)
[status-firefox27](/buglist.cgi?f1=cf_status_firefox27&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=%3F)
[status-firefox28](/buglist.cgi?f1=cf_status_firefox28&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=fixed)
[status-firefox-esr24](/buglist.cgi?f1=cf_status_firefox_esr24&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=%3F)Resolution: --- → FIXEDTarget Milestone: --- → mozilla28

|  | [Andrew Sutherland [:asuth] (he/him)](/user_profile?user_id=151407)  Assignee |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=932162#c15)• 11 years ago |
|  | |

(In reply to Ryan VanderMeulen [:RyanVM UTC-5] from [comment #14](/show_bug.cgi?id=932162#c14 "RESOLVED FIXED - Crash in mozilla::dom::indexedDB::IndexedDatabaseManager::AddRef invoked by mozilla::dom::indexedDB::FileInfo::Cleanup in cycle collecting DOM Worker death"))
> Don't sec-highs need security-approval to land?
Ah, I was not aware. This appears to be documented at <https://wiki.mozilla.org/Security/Bug_Approval_Process>. Consider me informed for the future. Please let me know if I should file a bugzilla enhancement bug about letting keywords trigger a banner on security pages that could say stuff like "POLICY FOR HANDLING THIS BUG: URL" or "DO NOT LAND THIS YOURSELF, YO!", as I do think it would be handy, but maybe I'm just falling through a small crack here.
The good news is that per <https://wiki.mozilla.org/Security_Severity_Ratings> I don't think this is actually a sec-high. We were intentionally crashing during GC cleanup when an invariant is violated. The main advantage this has over the equally viable "generate a ton of workers and allocate a ton of memory" attack is that the attacker can structure things in such a way that closing the tab triggers the crash.
The secondary attack against this is that Blob cleanup may not occur(?) as a result of the crash, but quota protection should remain in-place so an attacker can entirely leak an origin's disk space quota so it is never released. If we don't perform Blob cleanup sweeps this seems like a broad bug in Firefox anyways.
I don't think I understand the security weighting for a situation like this, but it seems like a sec-low or whatever a griefing attack that requires the user to go to a URL would be.

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=932162#c16)• 11 years ago |
|  | |

How far back does this go? If this is a sec-high, we need to consider this for ESR24 and older branches.

|  | [Jan Varga [:janv]](/user_profile?user_id=8340) |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=932162#c17)• 11 years ago |
|  | |

I think it was there from the beginning, that is, when the initial support for stored files in IDB landed which was like 2 years ago.

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=932162#a6354939_406194)• 11 years ago |

[status-b2g18](/buglist.cgi?f1=cf_status_b2g18&o1=isnotempty):
[?](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=%3F) → [affected](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=affected)
[status-b2g-v1.1hd](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=isnotempty):
[?](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=equals&v1=%3F) → [affected](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=equals&v1=affected)
[status-b2g-v1.2](/buglist.cgi?f1=cf_status_b2g_1_2&o1=isnotempty):
[?](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=%3F) → [affected](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=affected)
[status-firefox26](/buglist.cgi?f1=cf_status_firefox26&o1=isnotempty):
[?](/buglist.cgi?f1=cf_status_firefox26&o1=equals&v1=%3F) → [affected](/buglist.cgi?f1=cf_status_firefox26&o1=equals&v1=affected)
[status-firefox27](/buglist.cgi?f1=cf_status_firefox27&o1=isnotempty):
[?](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=%3F) → [affected](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=affected)
[status-firefox29](/buglist.cgi?f1=cf_status_firefox29&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=unaffected)
[status-firefox-esr24](/buglist.cgi?f1=cf_status_firefox_esr24&o1=isnotempty):
[?](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=%3F) → [affected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=affected)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=932162#c18)• 11 years ago |
|  | |

Can we get an ESR24 and Beta patch for this? How risky would it be?
[status-firefox26](/buglist.cgi?f1=cf_status_firefox26&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox26&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_firefox26&o1=equals&v1=wontfix)
[tracking-firefox27](/buglist.cgi?f1=cf_tracking_firefox27&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox27&o1=equals&v1=%3F)
[tracking-firefox-esr24](/buglist.cgi?f1=cf_tracking_firefox_esr24&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox_esr24&o1=equals&v1=%3F)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=932162#c19)• 11 years ago |
|  | |

If possible, we'll want patches for b2g26 and b2g18 as well.

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=932162#c20)• 11 years ago |
|  | |

This applies down to esr24 without much trouble. It has some bigger conflicts on b2g18. Andrew, please request beta and esr24 approval on this patch and if possible, attach a branch-specific patch for b2g18. Thanks! :)Flags: needinfo?(bugmail)

|  | [bhavana bajaj [:bajaj]](/user_profile?user_id=448925) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=932162#a6613830_448925)• 11 years ago |

[tracking-firefox27](/buglist.cgi?f1=cf_tracking_firefox27&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox27&o1=equals&v1=%3F) → [+](/buglist.cgi?f1=cf_tracking_firefox27&o1=equals&v1=%2B)
[tracking-firefox-esr24](/buglist.cgi?f1=cf_tracking_firefox_esr24&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox_esr24&o1=equals&v1=%3F) → [27+](/buglist.cgi?f1=cf_tracking_firefox_esr24&o1=equals&v1=27%2B)

|  | [Andrew Sutherland [:asuth] (he/him)](/user_profile?user_id=151407)  Assignee |  |
| --- | --- | --- |
| [Comment 21](/show_bug.cgi?id=932162#c21)• 11 years ago |
|  | |

Comment on [attachment 827839](/attachment.cgi?id=827839 "indexeddb-blob-death-v1.diff") [[details]](/attachment.cgi?id=827839&action=edit "indexeddb-blob-death-v1.diff") [[diff]](/attachment.cgi?id=827839&action=diff "indexeddb-blob-death-v1.diff") [[review]](/page.cgi?id=splinter.html&ignore=&bug=932162&attachment=827839)
indexeddb-blob-death-v1.diff
I think this is pretty safe to take on older branches. Requesting approval per the requests. Thanks very much for testing the uplift-ability of the patch, RyanVM! I had started a fresh gecko-dev checkout to do that when I got the mail, but that takes a while! :)
[Approval Request Comment]
Bug caused by (feature/regressing bug #): Always there.
User impact if declined: Webpages can accidentally or intentionally (if nefarious/jerky) structure disk-persisted Blob creation on DOM web workers to trigger process crashes during garbage collection. Note that Chrome does not support storing Blobs in their IndexedDB still (<http://code.google.com/p/chromium/issues/detail?id=108012>), so cross-browser web content may not be using this so much. (Though Chrome/friends do have WebSQLDatabase, and Firefox doesn't, so Firefox-specific paths could be used.)
Testing completed (on m-c, etc.): The fix landed on Firefox 28 on Nov 19th, 2013 when it was mozilla-central. It has a mochitest. But the mochitest is blacklisted on b2g with most of the other mochitests.
Risk to taking this patch (and alternatives if risky): If the patch applies, the patch should be safe.
String or IDL/UUID changes made by this patch: No strings.
[Attachment #827839](/attachment.cgi?id=827839&action=edit "indexeddb-blob-death-v1.diff") -
Flags: approval-mozilla-esr24?
[Attachment #827839](/attachment.cgi?id=827839&action=edit "indexeddb-blob-death-v1.diff") -
Flags: approval-mozilla-beta?
[Attachment #827839](/attachment.cgi?id=827839&action=edit "indexeddb-blob-death-v1.diff") -
Flags: approval-mozilla-b2g26?Flags: needinfo?(bugmail)

|  | [bhavana bajaj [:bajaj]](/user_profile?user_id=448925) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=932162#a6616399_448925)• 11 years ago |

[Attachment #827839](/attachment.cgi?id=827839&action=edit "indexeddb-blob-death-v1.diff") -
Flags: approval-mozilla-esr24?
[Attachment #827839](/attachment.cgi?id=827839&action=edit "indexeddb-blob-death-v1.diff") -
Flags: approval-mozilla-esr24+
[Attachment #827839](/attachment.cgi?id=827839&action=edit "indexeddb-blob-death-v1.diff") -
Flags: approval-mozilla-beta?
[Attachment #827839](/attachment.cgi?id=827839&action=edit "indexeddb-blob-death-v1.diff") -
Flags: approval-mozilla-beta+
[Attachment #827839](/attachment.cgi?id=827839&action=edit "indexeddb-blob-death-v1.diff") -
Flags: approval-mozilla-b2g26?
[Attachment #827839](/attachment.cgi?id=827839&action=edit "indexeddb-blob-death-v1.diff") -
Flags: approval-mozilla-b2g26+

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 22](/show_bug.cgi?id=932162#c22)• 11 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-beta/rev/9fa5a62bbb51>
<https://hg.mozilla.org/releases/mozilla-esr24/rev/f8f5f50ab32d>
<https://hg.mozilla.org/releases/mozilla-b2g26_v1_2/rev/6575b4efe66a>
Hopefully a b2g18 backport isn't too much trouble still :)
[status-b2g-v1.2](/buglist.cgi?f1=cf_status_b2g_1_2&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=fixed)
[status-b2g-v1.3](/buglist.cgi?f1=cf_status_b2g_1_3&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=fixed)
[status-firefox27](/buglist.cgi?f1=cf_status_firefox27&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=fixed)
[status-firefox-esr24](/buglist.cgi?f1=cf_status_firefox_esr24&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=fixed)

|  | [Andrew Sutherland [:asuth] (he/him)](/user_profile?user_id=151407)  Assignee |  |
| --- | --- | --- |
| [Comment 23](/show_bug.cgi?id=932162#c23)• 11 years ago |
|  | |

(In reply to Ryan VanderMeulen [:RyanVM UTC-5] from [comment #22](/show_bug.cgi?id=932162#c22 "RESOLVED FIXED - Crash in mozilla::dom::indexedDB::IndexedDatabaseManager::AddRef invoked by mozilla::dom::indexedDB::FileInfo::Cleanup in cycle collecting DOM Worker death"))
> Hopefully a b2g18 backport isn't too much trouble still :)
Do we expect v1.1 devices to get further v1.1 updates? I had the impression any v1.1 device lucky enough to get an update would end up on v1.2. (The exception being geeksphone devices which can get updates to any version they want.)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 24](/show_bug.cgi?id=932162#c24)• 11 years ago |
|  | |

Backed out from esr24 for bustage. Guess we'll need a branch patch for that too :(
<https://hg.mozilla.org/releases/mozilla-esr24/rev/778dac833038>
<https://tbpl.mozilla.org/php/getParsedLog.php?id=32930742&tree=Mozilla-Esr24>
[status-firefox-esr24](/buglist.cgi?f1=cf_status_firefox_esr24&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=fixed) → [affected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=affected)Flags: needinfo?(bugmail)Keywords: [branch-patch-needed](/buglist.cgi?keywords=branch-patch-needed&resolution=---)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 25](/show_bug.cgi?id=932162#c25)• 11 years ago |
|  | |

(In reply to Andrew Sutherland (:asuth) from [comment #23](/show_bug.cgi?id=932162#c23 "RESOLVED FIXED - Crash in mozilla::dom::indexedDB::IndexedDatabaseManager::AddRef invoked by mozilla::dom::indexedDB::FileInfo::Cleanup in cycle collecting DOM Worker death"))
> Do we expect v1.1 devices to get further v1.1 updates? I had the impression
> any v1.1 device lucky enough to get an update would end up on v1.2. (The
> exception being geeksphone devices which can get updates to any version they
> want.)
My understanding is that we're committed to partners to support security backports for an eventual v1.1.x release until v1.1 is officially EOL (currently March timeframe).

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 26](/show_bug.cgi?id=932162#c26)• 11 years ago |
|  | |

I'd like to get this on ESR24 since it is a sec-high rated issue.

|  | [Andrew Sutherland [:asuth] (he/him)](/user_profile?user_id=151407)  Assignee |  |
| --- | --- | --- |
| [Comment 27](/show_bug.cgi?id=932162#c27)• 11 years ago |
|  | |

(In reply to Al Billings [:abillings] from [comment #26](/show_bug.cgi?id=932162#c26 "RESOLVED FIXED - Crash in mozilla::dom::indexedDB::IndexedDatabaseManager::AddRef invoked by mozilla::dom::indexedDB::FileInfo::Cleanup in cycle collecting DOM Worker death"))
> I'd like to get this on ESR24 since it is a sec-high rated issue.
I'll provide esr24 and b2g18 patches, but note that in [comment 15](/show_bug.cgi?id=932162#c15 "RESOLVED FIXED - Crash in mozilla::dom::indexedDB::IndexedDatabaseManager::AddRef invoked by mozilla::dom::indexedDB::FileInfo::Cleanup in cycle collecting DOM Worker death") I assert this might not really be a sec-high. However, from <https://wiki.mozilla.org/Security_Severity_Ratings> it wasn't clear to me what it actually is either. Having more explicit mappings of what various types of potential DoS translate to would be handy. This is mainly just a way for a page to crash the browser intentionally or accidentally via an assert. You can't steal data, you can't gain privileges, you can't mess up the contents of the file system, etc.

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 28](/show_bug.cgi?id=932162#c28)• 11 years ago |
|  | |

So the crash is non-exploitable? You can't get access to memory in any deterministic fashion, etc?

|  | [Andrew Sutherland [:asuth] (he/him)](/user_profile?user_id=151407)  Assignee |  |
| --- | --- | --- |
| [Comment 29](/show_bug.cgi?id=932162#c29)• 11 years ago |
|  | |

(In reply to Al Billings [:abillings] from [comment #28](/show_bug.cgi?id=932162#c28 "RESOLVED FIXED - Crash in mozilla::dom::indexedDB::IndexedDatabaseManager::AddRef invoked by mozilla::dom::indexedDB::FileInfo::Cleanup in cycle collecting DOM Worker death"))
> So the crash is non-exploitable? You can't get access to memory in any
> deterministic fashion, etc?
Yes. The crash was either NS\_ASSERT or MOZ\_CRASH, depending on debug build versus production build.Flags: needinfo?(bugmail)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 30](/show_bug.cgi?id=932162#c30)• 11 years ago |
|  | |

I'm re-rating this as a sec-moderate.
With that, I don't think we need this for ESR24.Keywords: [sec-high](/buglist.cgi?keywords=sec-high&resolution=---) → [sec-moderate](/buglist.cgi?keywords=sec-moderate&resolution=---)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=932162#a6633420_280903)• 11 years ago |

[status-firefox-esr24](/buglist.cgi?f1=cf_status_firefox_esr24&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=wontfix)
[tracking-firefox-esr24](/buglist.cgi?f1=cf_tracking_firefox_esr24&o1=isnotempty):
[27+](/buglist.cgi?f1=cf_tracking_firefox_esr24&o1=equals&v1=27%2B) → ---

|  | [u279076](/user_profile?user_id=279076) |  |
| --- | --- | --- |
| [Comment 31](/show_bug.cgi?id=932162#c31)• 11 years ago |
|  | |

Does this have a reproducible testcase?Flags: needinfo?(bugmail)

|  | [Andrew Sutherland [:asuth] (he/him)](/user_profile?user_id=151407)  Assignee |  |
| --- | --- | --- |
| [Comment 32](/show_bug.cgi?id=932162#c32)• 11 years ago |
|  | |

(In reply to Anthony Hughes, QA Mentor (:ashughes) from [comment #31](/show_bug.cgi?id=932162#c31 "RESOLVED FIXED - Crash in mozilla::dom::indexedDB::IndexedDatabaseManager::AddRef invoked by mozilla::dom::indexedDB::FileInfo::Cleanup in cycle collecting DOM Worker death"))
> Does this have a reproducible testcase?
There's a mochitest in the patch that reliably causes a failure on builds without the fix part of the patch. And it could be run manually if someone wanted.Flags: needinfo?(bugmail)

|  | [u279076](/user_profile?user_id=279076) |  |
| --- | --- | --- |
| [Comment 33](/show_bug.cgi?id=932162#c33)• 11 years ago |
|  | |

If the mochitest is reliable and has already been checked there's no point in QA rehashing that effort. Please add the verifyme keyword if there's something more we can do.Whiteboard: [qa-]

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=932162#a7333005_280903)• 11 years ago |

Whiteboard: [qa-] → [qa-][adv-main27+]

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 34](/show_bug.cgi?id=932162#c34)• 11 years ago |
|  | |

Andrew, now that this has been downgraded in severity, is it worth the effort to attempt a b2g18 backport?Flags: needinfo?(bugmail)

|  | [Andrew Sutherland [:asuth] (he/him)](/user_profile?user_id=151407)  Assignee |  |
| --- | --- | --- |
| [Comment 35](/show_bug.cgi?id=932162#c35)• 11 years ago |
|  | |

I made a backport and pushed it to try. The changes were the quota manager refactoring and the system-wide ISUPPORTS changes. I got it to build locally but did not run tests. Try run is at:
<https://tbpl.mozilla.org/?tree=Try&rev=0b4293d6b256>Flags: needinfo?(bugmail)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 36](/show_bug.cgi?id=932162#c36)• 11 years ago |
|  | |

You've gotten as much in the way of green tests as you can hope to get from a b2g18 Try push. So that's good anyway :)Keywords: [branch-patch-needed](/buglist.cgi?keywords=branch-patch-needed&resolution=---)

|  | [Andrew Sutherland [:asuth] (he/him)](/user_profile?user_id=151407)  Assignee |  |
| --- | --- | --- |
| [Comment 37](/show_bug.cgi?id=932162#c37)• 11 years ago |
|  | |

Attached patch

[indexeddb-blob-death-v1-b2g18.diff](attachment.cgi?id=8374046&action=diff)
— [Details](attachment.cgi?id=8374046&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=932162&attachment=8374046)

This is the b2g18 patch, I'm carrying forward r+ since the NS\_ISUPPORTS changes were mechanical in nature and the QuotaManager landing only changed where we found out if the FileInfo-owner subsystem was shutting down.
NOTE: This patch was already approved for uplift to esr24 and b2g26 but did not apply cleanly for b2g18. This is simply updated the patch for b2g18. I'm just pasting my approval request from those branches here:
Bug caused by (feature/regressing bug #): Always there.
User impact if declined: Webpages can accidentally or intentionally (if nefarious/jerky) structure disk-persisted Blob creation on DOM web workers to trigger process crashes during garbage collection. Note that Chrome does not support storing Blobs in their IndexedDB still (<http://code.google.com/p/chromium/issues/detail?id=108012>), so cross-browser web content may not be using this so much. (Though Chrome/friends do have WebSQLDatabase, and Firefox doesn't, so Firefox-specific paths could be used.)
Testing completed (on m-c, etc.): The fix landed on Firefox 28 on Nov 19th, 2013 when it was mozilla-central. It has a mochitest. But the mochitest is blacklisted on b2g with most of the other mochitests.
Risk to taking this patch (and alternatives if risky): If the patch applies, the patch should be safe.
String or IDL/UUID changes made by this patch: No strings.
[Attachment #8374046](/attachment.cgi?id=8374046&action=edit "indexeddb-blob-death-v1-b2g18.diff") -
Flags: review+
[Attachment #8374046](/attachment.cgi?id=8374046&action=edit "indexeddb-blob-death-v1-b2g18.diff") -
Flags: approval-mozilla-b2g18?

|  | [Preeti Raghunath(:Preeti)](/user_profile?user_id=474545) |  |
| --- | --- | --- |
| [Comment 38](/show_bug.cgi?id=932162#c38)• 11 years ago |
|  | |

Comment on [attachment 8374046](/attachment.cgi?id=8374046 "indexeddb-blob-death-v1-b2g18.diff") [[details]](/attachment.cgi?id=8374046&action=edit "indexeddb-blob-death-v1-b2g18.diff") [[diff]](/attachment.cgi?id=8374046&action=diff "indexeddb-blob-death-v1-b2g18.diff") [[review]](/page.cgi?id=splinter.html&ignore=&bug=932162&attachment=8374046)
indexeddb-blob-death-v1-b2g18.diff
Review of [attachment 8374046](/attachment.cgi?id=8374046 "indexeddb-blob-death-v1-b2g18.diff") [[details]](/attachment.cgi?id=8374046&action=edit "indexeddb-blob-death-v1-b2g18.diff") [[diff]](/attachment.cgi?id=8374046&action=diff "indexeddb-blob-death-v1-b2g18.diff") [[review]](/page.cgi?id=splinter.html&ignore=&bug=932162&attachment=8374046):
-----------------------------------------------------------------
Taking for sec-moderate
[Attachment #8374046](/attachment.cgi?id=8374046&action=edit "indexeddb-blob-death-v1-b2g18.diff") -
Flags: approval-mozilla-b2g18? → approval-mozilla-b2g18+

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 39](/show_bug.cgi?id=932162#c39)• 11 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-b2g18/rev/7a7a5b42f9f0>
[status-b2g18](/buglist.cgi?f1=cf_status_b2g18&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=fixed)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 40](/show_bug.cgi?id=932162#c40)• 11 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-b2g18_v1_1_0_hd/rev/7a7a5b42f9f0>
[status-b2g-v1.1hd](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=equals&v1=fixed)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=932162#a11835373_75935)• 11 years ago |

[status-b2g-v1.3T](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=fixed)
[status-b2g-v1.4](/buglist.cgi?f1=cf_status_b2g_1_4&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=unaffected)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=932162#a41904915_1689)• 10 years ago |

Group: core-security
You need to [log in](/show_bug.cgi?id=932162&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Andrew Sutherland [:asuth] (he/him)](/user_profile?user_id=151407)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from bugzilla.mozilla.org_b56e3cb1_20250124_230139.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/944278)
* [XML](/show_bug.cgi?ctype=xml&id=944278)

Closed
[Bug 944278](/show_bug.cgi?id=944278)

Opened 11 years ago
Closed 11 years ago

# OdinMonkey: Crash [@ js::Invoke]

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

OdinMonkey: Crash [@ js::Invoke]

## Categories

### (Core :: JavaScript Engine: JIT, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=JavaScript%20Engine%3A%20JIT#JavaScript%20Engine%3A%20JIT)

JavaScript Engine: JIT
▾

Core :: JavaScript Engine: JIT
JavaScript engine's JIT compilers
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine%3A%20JIT&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine%3A%20JIT&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=JavaScript%20Engine%3A%20JIT)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

x86\_64

Windows 7

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

critical

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla28

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Performance Impact | --- |
| --- | --- |
| Webcompat Score | --- |
| Accessibility Severity | --- |
| a11y-review | --- |
| Webcompat Priority | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox26 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox26&o1=equals&v1=wontfix) |
| firefox27 | --- | [fixed](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=fixed) |
| firefox28 | --- | [fixed](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=fixed) |
| firefox-esr24 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=wontfix) |
| b2g18 | --- | [wontfix](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=wontfix) |
| b2g-v1.1hd | --- | [wontfix](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=equals&v1=wontfix) |
| b2g-v1.2 | --- | [wontfix](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=wontfix) |
| b2g-v1.3 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=fixed) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox26 |  | wontfix |
| firefox27 |  | fixed |
| firefox28 |  | fixed |
| firefox-esr24 |  | wontfix |
| b2g18 |  | wontfix |
| b2g-v1.1hd |  | wontfix |
| b2g-v1.2 |  | wontfix |
| b2g-v1.3 |  | fixed |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: gkw, Assigned: h4writer)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/1e19e5f3f314ade17e6a1e04a0f9c819?d=mm&size=40)  [h4writer](/user_profile?user_id=196399)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

![](https://secure.gravatar.com/avatar/55857f92ded07119259dc6c1dd386205?d=mm&size=40)  [general](/user_profile?user_id=4729)

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](extensions/Gravatar/web/default.jpg)  [gkw](/user_profile?user_id=132034)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/4fe52ee1503aecf7b6c976b8eb7c1753?d=mm&size=40)  [willyelm](/user_profile?user_id=714609)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

9 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[odinfuzz](/show_bug.cgi?id=840284 "RESOLVED FIXED - OdinMonkey: fuzz"), [860838](/show_bug.cgi?id=860838 "RESOLVED FIXED - OdinMonkey: optimize asm.js FFI calls")

Dependency [tree](/showdependencytree.cgi?id=944278&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=944278)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Keywords: crash, regression, testcase, Whiteboard: [fuzzblocker][qa-][adv-main27+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[crash](/buglist.cgi?keywords=crash&resolution=---),
[regression](/buglist.cgi?keywords=regression&resolution=---),
[testcase](/buglist.cgi?keywords=testcase&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[fuzzblocker][qa-][adv-main27+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | in-testsuite |  |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (2 files)

| [debug and opt stacks](/attachment.cgi?id=8339785)  [11 years ago](#c0)  [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)   15.34 KB, text/plain |  | [Details](/attachment.cgi?id=8339785&action=edit) |
| --- | --- | --- |
| [patch](/attachment.cgi?id=8343679)  [11 years ago](#c7)  [Hannes Verschore [:h4writer]](/user_profile?user_id=196399)   2.66 KB, patch | luke : [review+](#c10 "11 years ago")  lsblakk : [approval-mozilla-aurora+](#a1776182_272375 "11 years ago")  lsblakk : [approval-mozilla-beta+](#a1776182_272375 "11 years ago") | [Details](/attachment.cgi?id=8343679&action=edit) | [Diff](/attachment.cgi?id=8343679&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=944278&attachment=8343679) |

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=944278#c0)• 11 years ago |
|  | |

Attached file
[debug and opt stacks](attachment.cgi?id=8339785)
— [Details](attachment.cgi?id=8339785&action=edit)

x = function() {}
m = []
x.toString = (function(a, foreign) {
"use asm";
var ff = foreign.ff
function f() {
+ff()
}
return f
})(this, {
ff: function() {
return RegExp("()")
}
})
Object.defineProperty(m, 6, {
value: x
})
m.join()
m.join()
m.join()
crashes 64-bit js debug and opt shell on m-c changeset 5eb1c89fc2bc with --ion-eager at js::Invoke.
s-s because this is one of the rare Windows crashes (it didn't seem to reproduce on Mac), setting needinfo from Luke due to it seeming to involve asm.js.
My configure flags are:
AR=ar sh ./configure --host=x86\_64-pc-mingw32 --target=x86\_64-pc-mingw32 --enable-optimize --disable-debug --enable-profiling --enable-gczeal --enable-debug-symbols --enable-methodjit --enable-type-inference --disable-tests --enable-more-deterministic --enable-threadsafe <other NSPR options>Flags: needinfo?(luke)

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)  Reporter |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=944278#c1)• 11 years ago |
|  | |

The prevalence of this is blocking asm.js fuzzing on Windows, at least for 64-bit.Whiteboard: [fuzzblocker]

|  | [Luke Wagner [:luke]](/user_profile?user_id=347312) |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=944278#c2)• 11 years ago |
|  | |

Could you autobisect?Flags: needinfo?(luke)

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)  Reporter |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=944278#c3)• 11 years ago |
|  | |

autoBisect shows this is probably related to the following changeset:
The first bad revision is:
changeset: <http://hg.mozilla.org/mozilla-central/rev/2810e80e1393>
user: Hannes Verschore
date: Wed Jun 12 21:58:22 2013 +0200
summary: [Bug 860838](/show_bug.cgi?id=860838 "RESOLVED FIXED - OdinMonkey: optimize asm.js FFI calls"): OdinMonkey: Optimize FFI calls to ionmonkey, r=lukeBlocks: [860838](/show_bug.cgi?id=860838 "RESOLVED FIXED - OdinMonkey: optimize asm.js FFI calls")Keywords: [regression](/buglist.cgi?keywords=regression&resolution=---)

|  | [Hannes Verschore [:h4writer]](/user_profile?user_id=196399)  Assignee |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=944278#c4)• 11 years ago |
|  | |

Taking for now since this is caused by a bug by my patch. Nothing pops out of the testcase of backtrace. I'll probably have to debug deeper. Annoying that it only reproduces on windows, since I'm not used to do that.Assignee: general → hv1989

|  | [Hannes Verschore [:h4writer]](/user_profile?user_id=196399)  Assignee |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=944278#c5)• 11 years ago |
|  | |

I think I finally found the actual issue here. After Luke pointing me to ShadowStackSpace, I looked somewhat deeper into the calling convention on x64. Now I think the actual issue is that the stack wasn't aligned properly on 16bytes. I have no idea why using --disable-optimize doesn't mind being badly aligned. And I don't know yet why the same code in generateFFIInterpreterExit generates code that is works. (I'll check if it is properly aligned!)
But now I can get some good night sleep, finally. I'll create the patch tomorrow.

|  | [Luke Wagner [:luke]](/user_profile?user_id=347312) |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=944278#c6)• 11 years ago |
|  | |

Nice detectiving! Too bad we didn't AssertStackAlignment; that certainly would have helped.

|  | [Hannes Verschore [:h4writer]](/user_profile?user_id=196399)  Assignee |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=944278#c7)• 11 years ago |
|  | |

Attached patch

[patch](attachment.cgi?id=8343679&action=diff)
— [Details](attachment.cgi?id=8343679&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=944278&attachment=8343679)

[Attachment #8343679](/attachment.cgi?id=8343679&action=edit "patch") -
Flags: review?(luke)

|  | [Hannes Verschore [:h4writer]](/user_profile?user_id=196399)  Assignee |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=944278#c8)• 11 years ago |
|  | |

In windows 64bit pushRegsInMask pushes 136bytes, so framePushed was 136. And we assumed in generateOOL it was aligned on 16bytes and set it to 0 framesPushed. Notice the 136%16 = 8. So here we got the misalignment.
Regarding that, we are actually lucky that on other platforms pushRegsInMask pushes a 16fold of memory to the stack. E.g. in windows 32bit we push 16bytes. (I assume other platforms too. I'm gonna check linux quickly too. But now we have AssertStackAlignment in place that should catch these.)

|  | [Hannes Verschore [:h4writer]](/user_profile?user_id=196399)  Assignee |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=944278#c9)• 11 years ago |
|  | |

So linux has 16bytes for 32bit and 64bit for pushRegsInMask. So also aligned by accident.
(Such a big difference with windows 64bit! Since windows needs to push floats and some extra general purpose registers)

|  | [Luke Wagner [:luke]](/user_profile?user_id=347312) |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=944278#c10)• 11 years ago |
|  | |

Comment on [attachment 8343679](/attachment.cgi?id=8343679 "patch") [[details]](/attachment.cgi?id=8343679&action=edit "patch") [[diff]](/attachment.cgi?id=8343679&action=diff "patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=944278&attachment=8343679)
patch
Review of [attachment 8343679](/attachment.cgi?id=8343679 "patch") [[details]](/attachment.cgi?id=8343679&action=edit "patch") [[diff]](/attachment.cgi?id=8343679&action=diff "patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=944278&attachment=8343679):
-----------------------------------------------------------------
Thanks a lot for tracking this down!
::: js/src/jit/AsmJS.cpp
@@ +6136,5 @@
> #else
> masm.branchTestMagic(Assembler::Equal, JSReturnOperand, throwLabel);
> #endif
>
> + uint32\_t framePushed = masm.framePushed();
How about oolConvertFramePushed?
[Attachment #8343679](/attachment.cgi?id=8343679&action=edit "patch") -
Flags: review?(luke) → review+

|  | [Hannes Verschore [:h4writer]](/user_profile?user_id=196399)  Assignee |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=944278#c11)• 11 years ago |
|  | |

<https://hg.mozilla.org/integration/mozilla-inbound/rev/30bdfabba1e0>

|  | [Phil Ringnalda (:philor)](/user_profile?user_id=135518) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=944278#c12)• 11 years ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/30bdfabba1e0>Status: NEW → RESOLVEDClosed: 11 years agoResolution: --- → FIXEDTarget Milestone: --- → mozilla28

|  | [Hannes Verschore [:h4writer]](/user_profile?user_id=196399)  Assignee |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=944278#c13)• 11 years ago |
|  | |

This is windows x64 only. So do we care to uplift to FF27/FF28? I know this is not supported. But have we encouraged to use 64bit for asm.js developing (e.g. to lift the 3Gb memory limitation?)Flags: needinfo?(luke)

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)  Reporter |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=944278#c14)• 11 years ago |
|  | |

We should take this at least on Aurora if we could, shouldn't we?

|  | [Hannes Verschore [:h4writer]](/user_profile?user_id=196399)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=944278#a1623317_196399)• 11 years ago |

[status-firefox26](/buglist.cgi?f1=cf_status_firefox26&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_firefox26&o1=equals&v1=wontfix)
[status-firefox27](/buglist.cgi?f1=cf_status_firefox27&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=affected)
[status-firefox28](/buglist.cgi?f1=cf_status_firefox28&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=affected)
[status-firefox29](/buglist.cgi?f1=cf_status_firefox29&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=fixed)Flags: needinfo?(luke)

|  | [Hannes Verschore [:h4writer]](/user_profile?user_id=196399)  Assignee |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=944278#c15)• 11 years ago |
|  | |

Comment on [attachment 8343679](/attachment.cgi?id=8343679 "patch") [[details]](/attachment.cgi?id=8343679&action=edit "patch") [[diff]](/attachment.cgi?id=8343679&action=diff "patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=944278&attachment=8343679)
patch
[Approval Request Comment]
Bug caused by (feature/regressing bug #):
[Bug 860838](/show_bug.cgi?id=860838 "RESOLVED FIXED - OdinMonkey: optimize asm.js FFI calls")
User impact if declined: Crashes on Windows 64bit only
Testing completed (on m-c, etc.): Week on m-c
Risk to taking this patch (and alternatives if risky): No risk.
String or IDL/UUID changes made by this patch: /
[Attachment #8343679](/attachment.cgi?id=8343679&action=edit "patch") -
Flags: approval-mozilla-beta?
[Attachment #8343679](/attachment.cgi?id=8343679&action=edit "patch") -
Flags: approval-mozilla-aurora?

|  | [Lukas Blakk [:lsblakk] use ?needinfo](/user_profile?user_id=272375) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=944278#a1776182_272375)• 11 years ago |

[Attachment #8343679](/attachment.cgi?id=8343679&action=edit "patch") -
Flags: approval-mozilla-beta?
[Attachment #8343679](/attachment.cgi?id=8343679&action=edit "patch") -
Flags: approval-mozilla-beta+
[Attachment #8343679](/attachment.cgi?id=8343679&action=edit "patch") -
Flags: approval-mozilla-aurora?
[Attachment #8343679](/attachment.cgi?id=8343679&action=edit "patch") -
Flags: approval-mozilla-aurora+

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=944278#c16)• 11 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-beta/rev/a5f796e3a9de>
This landed on trunk during the Fx28 cycle, so this is already on Aurora.
[status-b2g-v1.2](/buglist.cgi?f1=cf_status_b2g_1_2&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=wontfix)
[status-b2g-v1.3](/buglist.cgi?f1=cf_status_b2g_1_3&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=fixed)
[status-firefox27](/buglist.cgi?f1=cf_status_firefox27&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=fixed)
[status-firefox28](/buglist.cgi?f1=cf_status_firefox28&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=fixed)
[status-firefox29](/buglist.cgi?f1=cf_status_firefox29&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=fixed) → ---

|  | [u279076](/user_profile?user_id=279076) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=944278#a1868619_279076)• 11 years ago |

Whiteboard: [fuzzblocker] → [fuzzblocker][qa-]

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=944278#a3777095_280903)• 11 years ago |

[status-firefox-esr24](/buglist.cgi?f1=cf_status_firefox_esr24&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=wontfix)

|  | [Paul Theriault [:pauljt] (no longer reading bugmail)](/user_profile?user_id=434339) |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=944278#c17)• 11 years ago |
|  | |

If wontfix for 1.2, then I assume its wontfix for 1.1 as well.
[status-b2g18](/buglist.cgi?f1=cf_status_b2g18&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=wontfix)
[status-b2g-v1.1hd](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=equals&v1=wontfix)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=944278#a4798777_280903)• 11 years ago |

Whiteboard: [fuzzblocker][qa-] → [fuzzblocker][qa-][adv-main27+]

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=944278#a5529441_1689)• 11 years ago |

Group: core-security
You need to [log in](/show_bug.cgi?id=944278&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from bugzilla.mozilla.org_7eafeb64_20250124_230126.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/925308)
* [XML](/show_bug.cgi?ctype=xml&id=925308)

Closed
[Bug 925308](/show_bug.cgi?id=925308)

Opened 11 years ago
Closed 11 years ago

# Assertion failure: \*(int\*)size\_ >= 0, at vm/SPSProfiler.cpp:196

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

Assertion failure: \*(int\*)size\_ >= 0, at vm/SPSProfiler.cpp:196

## Categories

### (Core :: JavaScript Engine, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=JavaScript%20Engine#JavaScript%20Engine)

JavaScript Engine
▾

Core :: JavaScript Engine
The interpreter engine for the core JavaScript language, independent of the browser's object model. File ONLY core JavaScript language bugs in this category. For bugs involving browser objects such as "window" and "document", use the "DOM" component. For bugs involving calls between JavaScript and C++, use the "XPConnect" component.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=JavaScript%20Engine)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

x86\_64

Linux

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

critical

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla28

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Webcompat Priority | --- |
| --- | --- |
| Accessibility Severity | --- |
| a11y-review | --- |
| Performance Impact | --- |
| Webcompat Score | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox25 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox25&o1=equals&v1=wontfix) |
| firefox26 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox26&o1=equals&v1=wontfix) |
| firefox27 | --- | [fixed](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=fixed) |
| firefox28 | --- | [fixed](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=fixed) |
| firefox-esr24 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=wontfix) |
| b2g18 | --- | [wontfix](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=wontfix) |
| b2g-v1.1hd | --- | [wontfix](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=equals&v1=wontfix) |
| b2g-v1.2 | --- | [wontfix](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=wontfix) |
| b2g-v1.3 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=fixed) |
| b2g-v1.3T | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=fixed) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox25 |  | wontfix |
| firefox26 |  | wontfix |
| firefox27 |  | fixed |
| firefox28 |  | fixed |
| firefox-esr24 |  | wontfix |
| b2g18 |  | wontfix |
| b2g-v1.1hd |  | wontfix |
| b2g-v1.2 |  | wontfix |
| b2g-v1.3 |  | fixed |
| b2g-v1.3T |  | fixed |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: decoder, Assigned: djvj)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/55e0476b8efe4fd21a03a662d86e3578?d=mm&size=40)  [djvj](/user_profile?user_id=436087)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

![](https://secure.gravatar.com/avatar/55857f92ded07119259dc6c1dd386205?d=mm&size=40)  [general](/user_profile?user_id=4729)

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/b29b83d12aba827b8ff68296e473bec5?d=mm&size=40)  [decoder](/user_profile?user_id=395101)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/4fe52ee1503aecf7b6c976b8eb7c1753?d=mm&size=40)  [willyelm](/user_profile?user_id=714609)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

14 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

---

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Keywords: assertion, sec-moderate, testcase, Whiteboard: [fuzzblocker] [jsbugmon:update,ignore][adv-main27+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[assertion](/buglist.cgi?keywords=assertion&resolution=---),
[sec-moderate](/buglist.cgi?keywords=sec-moderate&resolution=---),
[testcase](/buglist.cgi?keywords=testcase&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[fuzzblocker] [jsbugmon:update,ignore][adv-main27+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [djvj](/user_profile?user_id=436087) | [in-testsuite](#c21 "11 years ago") | + |
| --- | --- | --- |
| [djvj](/user_profile?user_id=436087) | in-testsuite | + |
| --- | --- | --- |
|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (2 files, 1 obsolete file)

| [[crash-signature] Machine-readable crash signature](/attachment.cgi?id=815316)  [11 years ago](#c1)  [Christian Holler (:decoder)](/user_profile?user_id=395101)   590 bytes, text/plain |  | [Details](/attachment.cgi?id=815316&action=edit) |
| --- | --- | --- |
| [[crash-signature] Machine-readable crash signature](/attachment.cgi?id=819690)  [11 years ago](#c6)  [Christian Holler (:decoder)](/user_profile?user_id=395101)   1.15 KB, text/plain |  | [Details](/attachment.cgi?id=819690&action=edit) |
| [sps-bug-925308.patch](/attachment.cgi?id=828891)  [11 years ago](#c11)  [Kannan Vijayan [:djvj]](/user_profile?user_id=436087)   7.99 KB, patch | jandem : [review+](#c14 "11 years ago")  bajaj : [approval-mozilla-aurora+](#a4876209_448925 "11 years ago") | [Details](/attachment.cgi?id=828891&action=edit) | [Diff](/attachment.cgi?id=828891&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=925308&attachment=828891) |

Show Obsolete

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=925308#c0)• 11 years ago |
|  | |

The following testcase asserts on mozilla-central revision aa986b6ce882 (run with --fuzzing-safe --ion-eager):
var lfcode = new Array();
lfcode.push("3");
lfcode.push("enableSPSProfilingAssertions(false);foo();");
while (true) {
var file = lfcode.shift(); if (file == undefined) { break; }
loadFile(file)
}
function loadFile(lfVarx) {
if (lfVarx.substr(-3) != ".js" && lfVarx.length != 1) {
switch (lfRunTypeId) {
default: function newFunc(x) { new Function(x)(); }; newFunc(lfVarx); break;
}
} else if (!isNaN(lfVarx)) {
lfRunTypeId = parseInt(lfVarx);
}
}

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=925308#c1)• 11 years ago |
|  | |

Attached file
[[crash-signature] Machine-readable crash signature](attachment.cgi?id=815316) (obsolete)
— [Details](attachment.cgi?id=815316&action=edit)

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=925308#a76_395101)• 11 years ago |

Whiteboard: [jsbugmon:update,bisect]

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=925308#c2)• 11 years ago |
|  | |

This is causing quite a few signatures in the fuzzer, including a critical heap crash. Marking as fuzzblocker.Flags: needinfo?(kvijayan)Whiteboard: [jsbugmon:update,bisect] → [jsbugmon:update,bisect][fuzzblocker]

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=925308#a9977_395101)• 11 years ago |

Whiteboard: [jsbugmon:update,bisect][fuzzblocker] → [fuzzblocker] [jsbugmon:update]

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=925308#c3)• 11 years ago |
|  | |

JSBugMon: Bisection requested, result:
autoBisect shows this is probably related to the following changeset:
The first bad revision is:
changeset: <http://hg.mozilla.org/mozilla-central/rev/88a218a4b5bf>
user: Jan de Mooij
date: Tue Dec 25 16:12:59 2012 +0100
summary: [Bug 764310](/show_bug.cgi?id=764310 "RESOLVED FIXED - IonMonkey: Compile JSOP_DEFFUN") part 2 - Implement JSOP\_DEFFUN in IonMonkey. r=bhackett
This iteration took 144.623 seconds to run.

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=925308#c4)• 11 years ago |
|  | |

Seeing this on beta as well.
[status-firefox25](/buglist.cgi?f1=cf_status_firefox25&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox25&o1=equals&v1=affected)
[status-firefox26](/buglist.cgi?f1=cf_status_firefox26&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox26&o1=equals&v1=affected)
[status-firefox27](/buglist.cgi?f1=cf_status_firefox27&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=affected)

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=925308#c5)• 11 years ago |
|  | |

Marking sec-moderate because it looks like it requires SPS, but it still sounds pretty bad...Keywords: [sec-moderate](/buglist.cgi?keywords=sec-moderate&resolution=---)

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=925308#c6)• 11 years ago |
|  | |

Attached file
[[crash-signature] Machine-readable crash signature](attachment.cgi?id=819690)
— [Details](attachment.cgi?id=819690&action=edit)

[Attachment #815316](/attachment.cgi?id=815316&action=edit "[crash-signature] Machine-readable crash signature") -
Attachment is obsolete: true

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=925308#a1307990_395101)• 11 years ago |

Whiteboard: [fuzzblocker] [jsbugmon:update] → [fuzzblocker] [jsbugmon:update,ignore]

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=925308#c7)• 11 years ago |
|  | |

JSBugMon: The testcase found in this bug no longer reproduces (tried revision 9f8233fcce1d).

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=925308#c8)• 11 years ago |
|  | |

I filed this before and it stopped reproducing. Please investigate this on the original revision and fix it if required ,thanks.

|  | [Kannan Vijayan [:djvj]](/user_profile?user_id=436087)  Assignee |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=925308#c9)• 11 years ago |
|  | |

Gak! This is a hairy issue. Here's what happens:
1. We compile Ion code before SPS is enabled, enter the compiled Ion code, and do a VM-call to InvokeFunction a JS function.
2. Inside the InvokeFunction, code executes which turns profiling on, invalidating the original compiled IonCode.
3. Before returning, though.. an exception is raised. This exception is handled by the VM-call's trampoline, which occurs BEFORE the patched OSI-point for the invalidated IonCode is hit. It sees the current profiling state as "on" and tries to pop an SPS frame (which doesn't exist, since it was pushed by non-SPS enabled Ion code that has since been invalidated).
Jan, I need to talk with you about potential solutions to this. I have the beginnings of one sketched out, but I'd like to run it by you.

|  | [Kannan Vijayan [:djvj]](/user_profile?user_id=436087)  Assignee |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=925308#c10)• 11 years ago |
|  | |

After discussing this with :jandem, he suggested maybe changing probes::ExitScript to take a ScriptFrameIter instead of an AbstractFramePtr, and thread the APIs for ScriptFrameIter such that the SPS information was available from it.
Thinking more about it, I realized that the only thing probes::ExitScript uses from the frame is the flag on whether it needs to pop an SPS frame or not. It seemed a lot easier and lightweight to have the callsite pass in just that flag, so that's what I did.Flags: needinfo?(kvijayan)

|  | [Kannan Vijayan [:djvj]](/user_profile?user_id=436087)  Assignee |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=925308#c11)• 11 years ago |
|  | |

Attached patch

[sps-bug-925308.patch](attachment.cgi?id=828891&action=diff)
— [Details](attachment.cgi?id=828891&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=925308&attachment=828891)

See [comment 10](/show_bug.cgi?id=925308#c10 "VERIFIED FIXED - Assertion failure: *(int*)size_ >= 0, at vm/SPSProfiler.cpp:196") for description of fix.
Confirmed that it worked on the bug on the revision where bug was first discovered. Bug no longer reproduces on tip, so I'm not sure if I should include the test case or not.
[Attachment #828891](/attachment.cgi?id=828891&action=edit "sps-bug-925308.patch") -
Flags: review?(jdemooij)

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=925308#c12)• 11 years ago |
|  | |

> Confirmed that it worked on the bug on the revision where bug was first
> discovered. Bug no longer reproduces on tip, so I'm not sure if I should
> include the test case or not.
Yes, we should, in case it reappears again.

|  | [Kannan Vijayan [:djvj]](/user_profile?user_id=436087)  Assignee |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=925308#c13)• 11 years ago |
|  | |

Noted. Added test case to jit-tests.

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297) |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=925308#c14)• 11 years ago |
|  | |

Comment on [attachment 828891](/attachment.cgi?id=828891 "sps-bug-925308.patch") [[details]](/attachment.cgi?id=828891&action=edit "sps-bug-925308.patch") [[diff]](/attachment.cgi?id=828891&action=diff "sps-bug-925308.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=925308&attachment=828891)
sps-bug-925308.patch
Review of [attachment 828891](/attachment.cgi?id=828891 "sps-bug-925308.patch") [[details]](/attachment.cgi?id=828891&action=edit "sps-bug-925308.patch") [[diff]](/attachment.cgi?id=828891&action=diff "sps-bug-925308.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=925308&attachment=828891):
-----------------------------------------------------------------
Nice.
::: js/src/jit/IonFrames.cpp
@@ +552,5 @@
> for (;;) {
> HandleExceptionIon(cx, frames, rfe, &overrecursed);
>
> + IonScript \*ionScript = nullptr;
> + bool invalidated = iter.checkInvalidation(&ionScript);
We can move these two lines out of this loop, since |invalidated| will have the same value for all inlined frames.
Then we can change these lines after the loop:
IonScript \*ionScript = nullptr;
if (iter.checkInvalidation(&ionScript))
ionScript->decref(cx->runtime()->defaultFreeOp());
To:
if (invalidated)
ionScript->decref(cx->runtime()->defaultFreeOp());
r=me with that.
[Attachment #828891](/attachment.cgi?id=828891&action=edit "sps-bug-925308.patch") -
Flags: review?(jdemooij) → review+

|  | [Kannan Vijayan [:djvj]](/user_profile?user_id=436087)  Assignee |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=925308#c15)• 11 years ago |
|  | |

<https://hg.mozilla.org/integration/mozilla-inbound/rev/e75f3902b7f6>

|  | [Ed Morley [:emorley]](/user_profile?user_id=373476) |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=925308#c16)• 11 years ago |
|  | |

Backed out for assertions:
<https://tbpl.mozilla.org/php/getParsedLog.php?id=30421818&tree=Mozilla-Inbound>
<https://tbpl.mozilla.org/php/getParsedLog.php?id=30421904&tree=Mozilla-Inbound>
remote: <https://hg.mozilla.org/integration/mozilla-inbound/rev/1f96641beb14>

|  | [Wes Kocher (:KWierso) (Not reading bugmail; email directly if needed)](/user_profile?user_id=308534) |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=925308#c17)• 11 years ago |
|  | |

(In reply to Ed Morley [:edmorley UTC+1] from [comment #16](/show_bug.cgi?id=925308#c16 "VERIFIED FIXED - Assertion failure: *(int*)size_ >= 0, at vm/SPSProfiler.cpp:196"))
> Backed out for assertions:
> <https://tbpl.mozilla.org/php/getParsedLog.php?id=30421818&tree=Mozilla>-
> Inbound
> <https://tbpl.mozilla.org/php/getParsedLog.php?id=30421904&tree=Mozilla>-
> Inbound
>
> remote: <https://hg.mozilla.org/integration/mozilla-inbound/rev/1f96641beb14>
Looks like it also causes browser-chrome crashes: <https://tbpl.mozilla.org/php/getParsedLog.php?id=30425856&tree=Mozilla-Inbound>
and xpcshell crashes: <https://tbpl.mozilla.org/php/getParsedLog.php?id=30425558&tree=Mozilla-Inbound>

|  | [Kannan Vijayan [:djvj]](/user_profile?user_id=436087)  Assignee |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=925308#c18)• 11 years ago |
|  | |

Re-pushed: <https://hg.mozilla.org/integration/mozilla-inbound/rev/34001410d373>
Green try run: <https://tbpl.mozilla.org/?tree=Try&rev=9b0ae218a64d>

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=925308#c19)• 11 years ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/34001410d373>Assignee: general → kvijayanStatus: NEW → RESOLVEDClosed: 11 years ago
[status-firefox25](/buglist.cgi?f1=cf_status_firefox25&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox25&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_firefox25&o1=equals&v1=wontfix)
[status-firefox28](/buglist.cgi?f1=cf_status_firefox28&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=fixed)Resolution: --- → FIXEDTarget Milestone: --- → mozilla28

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=925308#c20)• 11 years ago |
|  | |

Please land the test.Flags: in-testsuite?

|  | [Kannan Vijayan [:djvj]](/user_profile?user_id=436087)  Assignee |  |
| --- | --- | --- |
| [Comment 21](/show_bug.cgi?id=925308#c21)• 11 years ago |
|  | |

Sorry, forgot to 'hg add' the file.
<https://hg.mozilla.org/integration/mozilla-inbound/rev/85e15ff221ca>Flags: in-testsuite? → in-testsuite+

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=925308#a2890416_395101)• 11 years ago |

Status: RESOLVED → VERIFIED

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Comment 22](/show_bug.cgi?id=925308#c22)• 11 years ago |
|  | |

JSBugMon: This bug has been automatically verified fixed.

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=925308#a2985650_280903)• 11 years ago |

[status-b2g18](/buglist.cgi?f1=cf_status_b2g18&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=affected)
[status-b2g-v1.1hd](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=equals&v1=affected)
[status-b2g-v1.2](/buglist.cgi?f1=cf_status_b2g_1_2&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=affected)
[status-firefox-esr24](/buglist.cgi?f1=cf_status_firefox_esr24&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=affected)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 23](/show_bug.cgi?id=925308#c23)• 11 years ago |
|  | |

Test: <https://hg.mozilla.org/mozilla-central/rev/85e15ff221ca>

|  | [Alex Keybl [:akeybl]](/user_profile?user_id=425645) |  |
| --- | --- | --- |
| [Comment 24](/show_bug.cgi?id=925308#c24)• 11 years ago |
|  | |

For now this sec-moderate is a wontfix, unless others would like to nominate for ESR24 approval. Unclear that this is desirable on the ESR branch.
[status-firefox-esr24](/buglist.cgi?f1=cf_status_firefox_esr24&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=wontfix)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 25](/show_bug.cgi?id=925308#c25)• 11 years ago |
|  | |

Should this be uplifted to Fx27 still? What about b2g18\* or b2g26?
[status-firefox26](/buglist.cgi?f1=cf_status_firefox26&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox26&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_firefox26&o1=equals&v1=wontfix)Flags: needinfo?(kvijayan)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 26](/show_bug.cgi?id=925308#c26)• 11 years ago |
|  | |

27 should get it. ESR has a different bar.

|  | [Kannan Vijayan [:djvj]](/user_profile?user_id=436087)  Assignee |  |
| --- | --- | --- |
| [Comment 27](/show_bug.cgi?id=925308#c27)• 11 years ago |
|  | |

Comment on [attachment 828891](/attachment.cgi?id=828891 "sps-bug-925308.patch") [[details]](/attachment.cgi?id=828891&action=edit "sps-bug-925308.patch") [[diff]](/attachment.cgi?id=828891&action=diff "sps-bug-925308.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=925308&attachment=828891)
sps-bug-925308.patch
[Approval Request Comment]
Bug caused by (feature/regressing bug #):
Hard to identify. Probably there since profiler instrumentation.
User impact if declined:
Potential for bad memory writes at fixed address, leading to crash.
Testing completed (on m-c, etc.):
3-weeks green on m-c.
Risk to taking this patch (and alternatives if risky):
Low.
String or IDL/UUID changes made by this patch:
N/A
[Attachment #828891](/attachment.cgi?id=828891&action=edit "sps-bug-925308.patch") -
Flags: approval-mozilla-aurora?

|  | [Kannan Vijayan [:djvj]](/user_profile?user_id=436087)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=925308#a4867665_436087)• 11 years ago |

Flags: needinfo?(kvijayan)

|  | [bhavana bajaj [:bajaj]](/user_profile?user_id=448925) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=925308#a4876209_448925)• 11 years ago |

[Attachment #828891](/attachment.cgi?id=828891&action=edit "sps-bug-925308.patch") -
Flags: approval-mozilla-aurora? → approval-mozilla-aurora+

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=925308#a4876350_132034)• 11 years ago |

Keywords: [checkin-needed](/buglist.cgi?keywords=checkin-needed&resolution=---)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 28](/show_bug.cgi?id=925308#c28)• 11 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-aurora/rev/37df29dd2f8f>
I'm guessing b2g18 is wontfix for this, but what about b2g26?
[status-firefox27](/buglist.cgi?f1=cf_status_firefox27&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=fixed)Flags: needinfo?(praghunath)Keywords: [checkin-needed](/buglist.cgi?keywords=checkin-needed&resolution=---)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 29](/show_bug.cgi?id=925308#c29)• 11 years ago |
|  | |

Kannan, is this worth trying to uplift to the B2G branches?Flags: needinfo?(praghunath) → needinfo?(kvijayan)

|  | [Kannan Vijayan [:djvj]](/user_profile?user_id=436087)  Assignee |  |
| --- | --- | --- |
| [Comment 30](/show_bug.cgi?id=925308#c30)• 11 years ago |
|  | |

I'd guess no. This is a rare corner case that only hits when profiling is switched on or off in very particular ways, deep within a call stack.Flags: needinfo?(kvijayan)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 31](/show_bug.cgi?id=925308#c31)• 11 years ago |
|  | |

Sounds that way, thanks :)
[status-b2g18](/buglist.cgi?f1=cf_status_b2g18&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=wontfix)
[status-b2g-v1.1hd](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=equals&v1=wontfix)
[status-b2g-v1.2](/buglist.cgi?f1=cf_status_b2g_1_2&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=wontfix)
[status-b2g-v1.3](/buglist.cgi?f1=cf_status_b2g_1_3&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=fixed)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=925308#a8948745_280903)• 11 years ago |

Whiteboard: [fuzzblocker] [jsbugmon:update,ignore] → [fuzzblocker] [jsbugmon:update,ignore][adv-main27+]

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=925308#a18177146_75935)• 11 years ago |

[status-b2g-v1.3T](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=fixed)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=925308#a43520954_1689)• 10 years ago |

Group: core-security
You need to [log in](/show_bug.cgi?id=925308&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Christian Holler (:decoder)](/user_profile?user_id=395101)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from bugzilla.mozilla.org_6205866f_20250126_041751.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Sat Jan 25 2025 20:17:50 PST

* **Bug ID:**
  944321,
  911707,
  938431,
  944278,
  922603,
  925308,
  950452,
  939472,
  944851,
  924348,
  932162,
  942940,
  945585,
  946733,
  953373,
  867597,
  911845,
  916635

---

18 bugs found.

| [ID](/buglist.cgi?bug_id=944321%2C911707%2C938431%2C944278%2C922603%2C925308%2C950452%2C939472%2C944851%2C924348%2C932162%2C942940%2C945585%2C946733%2C953373%2C867597%2C911845%2C916635&query_format=advanced&order=bug_id%20DESC&query_based_on=) | [Type](/buglist.cgi?bug_id=944321%2C911707%2C938431%2C944278%2C922603%2C925308%2C950452%2C939472%2C944851%2C924348%2C932162%2C942940%2C945585%2C946733%2C953373%2C867597%2C911845%2C916635&query_format=advanced&order=bug_type%2Cbug_status%2Cpriority%2Cassigned_to%2Cbug_id&query_based_on=) | [Summary](/buglist.cgi?bug_id=944321%2C911707%2C938431%2C944278%2C922603%2C925308%2C950452%2C939472%2C944851%2C924348%2C932162%2C942940%2C945585%2C946733%2C953373%2C867597%2C911845%2C916635&query_format=advanced&order=short_desc%2Cbug_status%2Cpriority%2Cassigned_to%2Cbug_id&query_based_on=) | [Product](/buglist.cgi?bug_id=944321%2C911707%2C938431%2C944278%2C922603%2C925308%2C950452%2C939472%2C944851%2C924348%2C932162%2C942940%2C945585%2C946733%2C953373%2C867597%2C911845%2C916635&query_format=advanced&order=product%2Cbug_status%2Cpriority%2Cassigned_to%2Cbug_id&query_based_on=) | [Comp](/buglist.cgi?bug_id=944321%2C911707%2C938431%2C944278%2C922603%2C925308%2C950452%2C939472%2C944851%2C924348%2C932162%2C942940%2C945585%2C946733%2C953373%2C867597%2C911845%2C916635&query_format=advanced&order=component%2Cbug_status%2Cpriority%2Cassigned_to%2Cbug_id&query_based_on=) | [Assignee▲](/buglist.cgi?bug_id=944321%2C911707%2C938431%2C944278%2C922603%2C925308%2C950452%2C939472%2C944851%2C924348%2C932162%2C942940%2C945585%2C946733%2C953373%2C867597%2C911845%2C916635&query_format=advanced&order=assigned_to%20DESC%2Cbug_status%2Cpriority%2Cbug_id&query_based_on=) | [Status▲](/buglist.cgi?bug_id=944321%2C911707%2C938431%2C944278%2C922603%2C925308%2C950452%2C939472%2C944851%2C924348%2C932162%2C942940%2C945585%2C946733%2C953373%2C867597%2C911845%2C916635&query_format=advanced&order=bug_status%20DESC%2Cpriority%2Cassigned_to%2Cbug_id&query_based_on=) | [Resolution](/buglist.cgi?bug_id=944321%2C911707%2C938431%2C944278%2C922603%2C925308%2C950452%2C939472%2C944851%2C924348%2C932162%2C942940%2C945585%2C946733%2C953373%2C867597%2C911845%2C916635&query_format=advanced&order=resolution%2Cbug_status%2Cpriority%2Cassigned_to%2Cbug_id&query_based_on=) | [Updated](/buglist.cgi?bug_id=944321%2C911707%2C938431%2C944278%2C922603%2C925308%2C950452%2C939472%2C944851%2C924348%2C932162%2C942940%2C945585%2C946733%2C953373%2C867597%2C911845%2C916635&query_format=advanced&order=changeddate%2Cbug_status%2Cpriority%2Cassigned_to%2Cbug_id&query_based_on=) |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |
| [944851](/show_bug.cgi?id=944851 "RESOLVED FIXED - Array out-of-bounds [@ mozilla::dom::AudioParamTimeline::AudioNodeInputValue]") |  | [Array out-of-bounds [@ mozilla::dom::AudioParamTimeline::AudioNodeInputValue]](/show_bug.cgi?id=944851) | Core | Web Audio | karlt | RESO | FIXE | 2015-02-25 |
| [932162](/show_bug.cgi?id=932162 "RESOLVED FIXED - Crash in mozilla::dom::indexedDB::IndexedDatabaseManager::AddRef invoked by mozilla::dom::indexedDB::FileInfo::Cleanup in cycle collecting DOM Worker death") |  | [Crash in mozilla::dom::indexedDB::IndexedDatabaseManager::AddRef invoked by mozilla::dom::indexedDB::FileInfo::Cleanup in cycle collecting DOM Worker death](/show_bug.cgi?id=932162) | Core | Storage: IndexedDB | bugmail | RESO | FIXE | 2015-02-25 |
| [942940](/show_bug.cgi?id=942940 "RESOLVED FIXED - Potential dangling peerreflexive candidate on some types of failure.") |  | [Potential dangling peerreflexive candidate on some types of failure.](/show_bug.cgi?id=942940) | Core | WebRTC: Networking | docfaraday | RESO | FIXE | 2015-02-25 |
| [946733](/show_bug.cgi?id=946733 "RESOLVED FIXED - Crash in nr_turn_stun_ctx_cb") |  | [Crash in nr\_turn\_stun\_ctx\_cb](/show_bug.cgi?id=946733) | Core | WebRTC: Networking | docfaraday | RESO | FIXE | 2016-06-23 |
| [944278](/show_bug.cgi?id=944278 "RESOLVED FIXED - OdinMonkey: Crash [@ js::Invoke]") |  | [OdinMonkey: Crash [@ js::Invoke]](/show_bug.cgi?id=944278) | Core | JavaScript Engine: J | hv1989 | RESO | FIXE | 2014-01-30 |
| [924348](/show_bug.cgi?id=924348 "RESOLVED FIXED - Intermittent PROCESS-CRASH | /tests/dom/indexedDB/test/test_add_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie] or [@ hashDestroy]") |  | [Intermittent PROCESS-CRASH | /tests/dom/indexedDB/test/test\_add\_put.html | application crashed [@ sqlite3LeaveMutexAndCloseZombie] or [@ hashDestroy]](/show_bug.cgi?id=924348) | Core | SQLite and Embedded | jan.varga | RESO | FIXE | 2024-08-20 |
| [953373](/show_bug.cgi?id=953373 "RESOLVED FIXED - Assertion failure: MIR instruction returned object with unexpected type, at js/src/jit/IonMacroAssembler.cpp:1223, loading Amazon product page") |  | [Assertion failure: MIR instruction returned object with unexpected type, at js/src/jit/IonMacroAssembler.cpp:1223, loading Amazon product page](/show_bug.cgi?id=953373) | Core | JavaScript Engine | jdemooij | RESO | FIXE | 2015-02-25 |
| [867597](/show_bug.cgi?id=867597 "RESOLVED FIXED - IonMonkey: ARM hwcaps detection depends on uninitialised garbage on the stack") |  | [IonMonkey: ARM hwcaps detection depends on uninitialised garbage on the stack](/show_bug.cgi?id=867597) | Core | JavaScript Engine: J | jseward | RESO | FIXE | 2015-02-25 |
| [922603](/show_bug.cgi?id=922603 "RESOLVED FIXED - Signed integer overflow in image/src/imgFrame.cpp") |  | [Signed integer overflow in image/src/imgFrame.cpp](/show_bug.cgi?id=922603) | Core | Graphics: ImageLib | milaninbugzilla | RESO | FIXE | 2015-02-25 |
| [945585](/show_bug.cgi?id=945585 "RESOLVED FIXED - Crash involving nsNodeUtils::LastRelease(), possibly due to running it twice") |  | [Crash involving nsNodeUtils::LastRelease(), possibly due to running it twice](/show_bug.cgi?id=945585) | Core | DOM: Core & HTML | smaug | RESO | FIXE | 2019-03-13 |
| [939472](/show_bug.cgi?id=939472 "RESOLVED FIXED - \"Assertion failure: view\" with gcslice and neuter") |  | ["Assertion failure: view" with gcslice and neuter](/show_bug.cgi?id=939472) | Core | JavaScript Engine | sphink | RESO | FIXE | 2015-02-25 |
| [911845](/show_bug.cgi?id=911845 "RESOLVED FIXED - Beta node checking, found bugs") |  | [Beta node checking, found bugs](/show_bug.cgi?id=911845) | Core | JavaScript Engine | sunfish | RESO | FIXE | 2024-05-30 |
| [916635](/show_bug.cgi?id=916635 "RESOLVED FIXED - Recursive graph traversal in RangeAnalysis") |  | [Recursive graph traversal in RangeAnalysis](/show_bug.cgi?id=916635) | Core | JavaScript Engine | sunfish | RESO | FIXE | 2015-02-25 |
| [944321](/show_bug.cgi?id=944321 "RESOLVED FIXED - --ion-check-range-analysis failure with Float32Array (SIGTRAP)") |  | [--ion-check-range-analysis failure with Float32Array (SIGTRAP)](/show_bug.cgi?id=944321) | Core | JavaScript Engine: J | sunfish | RESO | FIXE | 2015-02-25 |
| [950452](/show_bug.cgi?id=950452 "VERIFIED FIXED - Assertion failure: MIR instruction returned value with unexpected type, at jit/IonMacroAssembler.cpp:1219") |  | [Assertion failure: MIR instruction returned value with unexpected type, at jit/IonMacroAssembler.cpp:1219](/show_bug.cgi?id=950452) | Core | JavaScript Engine: J | bhackett1024 | VERI | FIXE | 2015-02-25 |
| [938431](/show_bug.cgi?id=938431 "VERIFIED FIXED - Assertion failure: consumer->isConsistentFloat32Use(), at jit/IonAnalysis.cpp") |  | [Assertion failure: consumer->isConsistentFloat32Use(), at jit/IonAnalysis.cpp](/show_bug.cgi?id=938431) | Core | JavaScript Engine: J | bugzilla | VERI | FIXE | 2014-01-30 |
| [911707](/show_bug.cgi?id=911707 "VERIFIED FIXED - Assertion failure: arr->lengthIsWritable() (setter shouldn't be called if property is non-writable), at jsarray.cpp") |  | [Assertion failure: arr->lengthIsWritable() (setter shouldn't be called if property is non-writable), at jsarray.cpp](/show_bug.cgi?id=911707) | Core | JavaScript Engine | efaustbmo | VERI | FIXE | 2015-02-25 |
| [925308](/show_bug.cgi?id=925308 "VERIFIED FIXED - Assertion failure: *(int*)size_ >= 0, at vm/SPSProfiler.cpp:196") |  | [Assertion failure: \*(int\*)size\_ >= 0, at vm/SPSProfiler.cpp:196](/show_bug.cgi?id=925308) | Core | JavaScript Engine | kvijayan | VERI | FIXE | 2015-02-25 |

18 bugs found.

|  |  | [REST](/rest/bug?include_fields=id,summary,status&bug_id=944321%2C911707%2C938431%2C944278%2C922603%2C925308%2C950452%2C939472%2C944851%2C924348%2C932162%2C942940%2C945585%2C946733%2C953373%2C867597%2C911845%2C916635 "Query as a REST API request") | [CSV](/buglist.cgi?bug_id=944321%2C911707%2C938431%2C944278%2C922603%2C925308%2C950452%2C939472%2C944851%2C924348%2C932162%2C942940%2C945585%2C946733%2C953373%2C867597%2C911845%2C916635&query_format=advanced&ctype=csv&human=1) | [Feed](/buglist.cgi?bug_id=944321%2C911707%2C938431%2C944278%2C922603%2C925308%2C950452%2C939472%2C944851%2C924348%2C932162%2C942940%2C945585%2C946733%2C953373%2C867597%2C911845%2C916635&query_format=advanced&title=Bug%20List&ctype=atom) | [iCalendar](/buglist.cgi?bug_id=944321%2C911707%2C938431%2C944278%2C922603%2C925308%2C950452%2C939472%2C944851%2C924348%2C932162%2C942940%2C945585%2C946733%2C953373%2C867597%2C911845%2C916635&query_format=advanced&ctype=ics)  [Change Columns](/colchange.cgi?bug_id=944321%2C911707%2C938431%2C944278%2C922603%2C925308%2C950452%2C939472%2C944851%2C924348%2C932162%2C942940%2C945585%2C946733%2C953373%2C867597%2C911845%2C916635&query_format=advanced&query_based_on=) | [Edit Search](/query.cgi?bug_id=944321%2C911707%2C938431%2C944278%2C922603%2C925308%2C950452%2C939472%2C944851%2C924348%2C932162%2C942940%2C945585%2C946733%2C953373%2C867597%2C911845%2C916635&query_format=advanced) |  | as |
| --- | --- | --- | --- | --- | --- |

[File
a new bug
in the "Core" product](/enter_bug.cgi?product=Core)



=== Content from bugzilla.mozilla.org_48eaf474_20250124_230120.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/922603)
* [XML](/show_bug.cgi?ctype=xml&id=922603)

Closed
[Bug 922603](/show_bug.cgi?id=922603)

Opened 11 years ago
Closed 11 years ago

# Signed integer overflow in image/src/imgFrame.cpp

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

Signed integer overflow in image/src/imgFrame.cpp

## Categories

### (Core :: Graphics: ImageLib, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=Graphics%3A%20ImageLib#Graphics%3A%20ImageLib)

Graphics: ImageLib
▾

Core :: Graphics: ImageLib
ImageLib decodes GIF, JPEG and PNG images, and provides the decoded data to the Compositor for display. If Firefox or Seamonkey can display an image when loaded separately from the page, ImageLib is working, and the actual imaging bug exists elsewhere within Firefox or Seamonkey.

Examples of appropriate bugs: PNG gAMA chunk ignored; Crashes on GIF w/corrupted frame(merr-01.gif); or PNGs and JPEGs aren't displayed on FreeBSD.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=Graphics%3A%20ImageLib&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=Graphics%3A%20ImageLib&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=Graphics%3A%20ImageLib)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

x86\_64

Linux

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

major

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla27

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Performance Impact | --- |
| --- | --- |
| Webcompat Score | --- |
| Accessibility Severity | --- |
| a11y-review | --- |
| Webcompat Priority | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox26 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox26&o1=equals&v1=wontfix) |
| firefox27 | [+](/buglist.cgi?f1=cf_tracking_firefox27&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=fixed) |
| firefox-esr17 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=wontfix) |
| firefox-esr24 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=wontfix) |
| b2g18 | --- | [wontfix](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=wontfix) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox26 |  | wontfix |
| firefox27 | + | fixed |
| firefox-esr17 |  | wontfix |
| firefox-esr24 |  | wontfix |
| b2g18 |  | wontfix |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: decoder, Assigned: milan)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/afff8630fb0a0c0a44853cd700ac0a4d?d=mm&size=40)  [milan](/user_profile?user_id=456486)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/b29b83d12aba827b8ff68296e473bec5?d=mm&size=40)  [decoder](/user_profile?user_id=395101)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/0646a42110a02dd585f200f270716852?d=mm&size=40)  [tnikkel](/user_profile?user_id=255010)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

10 people

## References

### (Blocks 1 open bug)

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[919486](/show_bug.cgi?id=919486 "NEW - [tracking] Report signed integer overflows within our codebase")

Dependency [tree](/showdependencytree.cgi?id=922603&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=922603)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Keywords: sec-low, testcase, Whiteboard: [qa-][adv-main27+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[sec-low](/buglist.cgi?keywords=sec-low&resolution=---),
[testcase](/buglist.cgi?keywords=testcase&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[qa-][adv-main27+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | in-testsuite |  |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (1 file, 1 obsolete file)

| [Use CheckedInt to check for overflow](/attachment.cgi?id=813118)  [11 years ago](#c2)  [Milan Sreckovic [:milan] (needinfo for best results)](/user_profile?user_id=456486)   1.63 KB, patch | bjacob : [review+](#c3 "11 years ago") | [Details](/attachment.cgi?id=813118&action=edit) | [Diff](/attachment.cgi?id=813118&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=922603&attachment=813118) |
| --- | --- | --- |
| [Use CheckedInt to check for overflow. Carry r=bjacob](/attachment.cgi?id=813127)  [11 years ago](#c4)  [Milan Sreckovic [:milan] (needinfo for best results)](/user_profile?user_id=456486)   1.60 KB, patch | milan : [review+](#c4 "11 years ago") | [Details](/attachment.cgi?id=813127&action=edit) | [Diff](/attachment.cgi?id=813127&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=922603&attachment=813127) |

Show Obsolete

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=922603#c0)• 11 years ago |
|  | |

The following part of our codebase show signed integer overflows at runtime (when running our tests, based on mozilla-inbound 8bf84234319a):
# Format is: Location, Error, Test that triggered it (each in a single line)
image/src/imgFrame.cpp:58
runtime error: signed integer overflow: 65535 \* 65535 cannot be represented in type 'int'
file:///builds/slave/test/build/tests/reftest/tests/image/test/crashtests/invalid-size.gif
Signed integer overflows are undefined behavior according to the C/C++ standard and discouraged by the CERT Secure Coding Standard. Even if the overflow itself is intended/checked (which should also be verified), we should not rely on the result, nor on any checks performed with the result after the computation. In the optimization stage, the compiler may assume overflow is not happening and produce wrong results as well as eliminate further checks, recognized as dead code. For further information, see the tracking bug.
Marked as security sensitive until investigated because this overflow is indeed checked afterwards:
> // check to make sure we don't overflow a 32-bit
> int32\_t tmp = aWidth \* aHeight;
> if (MOZ\_UNLIKELY(tmp / aHeight != aWidth)) {
> NS\_WARNING("width or height too large");
> return false;
> }
As the if branch is only hit in the overflow case, an optimizing compiler could completely remove it, assuming that overflow does not happen.
Putting needinfo on ehsan according to hg blame for that particular code. If you're not the right person to take a look, could you please suggest someone? :) Thanks!Flags: needinfo?(ehsan)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=922603#a22361_280903)• 11 years ago |

[status-firefox27](/buglist.cgi?f1=cf_status_firefox27&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=affected)
[tracking-firefox27](/buglist.cgi?f1=cf_tracking_firefox27&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox27&o1=equals&v1=%2B)

|  | [(no longer active)](/user_profile?user_id=251051) |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=922603#c1)• 11 years ago |
|  | |

I know nothing about that code, sorry.Flags: needinfo?(ehsan) → needinfo?(jmuizelaar)

|  | [Milan Sreckovic [:milan] (needinfo for best results)](/user_profile?user_id=456486)  Assignee |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=922603#c2)• 11 years ago |
|  | |

Attached patch

[Use CheckedInt to check for overflow](attachment.cgi?id=813118&action=diff) (obsolete)
— [Details](attachment.cgi?id=813118&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=922603&attachment=813118)

[Attachment #813118](/attachment.cgi?id=813118&action=edit "Use CheckedInt to check for overflow") -
Flags: review?(bjacob)

|  | [Milan Sreckovic [:milan] (needinfo for best results)](/user_profile?user_id=456486)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=922603#a92888_456486)• 11 years ago |

Assignee: nobody → milan

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769) |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=922603#c3)• 11 years ago |
|  | |

Comment on [attachment 813118](/attachment.cgi?id=813118 "Use CheckedInt to check for overflow") [[details]](/attachment.cgi?id=813118&action=edit "Use CheckedInt to check for overflow") [[diff]](/attachment.cgi?id=813118&action=diff "Use CheckedInt to check for overflow") [[review]](/page.cgi?id=splinter.html&ignore=&bug=922603&attachment=813118)
Use CheckedInt to check for overflow
Review of [attachment 813118](/attachment.cgi?id=813118 "Use CheckedInt to check for overflow") [[details]](/attachment.cgi?id=813118&action=edit "Use CheckedInt to check for overflow") [[diff]](/attachment.cgi?id=813118&action=diff "Use CheckedInt to check for overflow") [[review]](/page.cgi?id=splinter.html&ignore=&bug=922603&attachment=813118):
-----------------------------------------------------------------
r+ with comments:
::: image/src/imgFrame.cpp
@@ +57,5 @@
>
> // check to make sure we don't overflow a 32-bit
> + CheckedInt<int32\_t> checkForOverflow(aWidth);
> + checkForOverflow \*= aHeight;
> + checkForOverflow \*= 4;
I would prefer if that variable was named more descriptively after what the mathematical value represents. For example: requiredBytes, or checkedRequiredBytes.
Also, you can put this in one expression, and use convenience typedefs:
CheckedInt32 checkedRequiredBytes = CheckedInt32(aWidth) \* aHeight \* 4;
(this relies on left-to-right associativity of \*. If you're not comfortable with that, you can also wrap aHeight into CheckedInt32(...).)
[Attachment #813118](/attachment.cgi?id=813118&action=edit "Use CheckedInt to check for overflow") -
Flags: review?(bjacob) → review+

|  | [Milan Sreckovic [:milan] (needinfo for best results)](/user_profile?user_id=456486)  Assignee |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=922603#c4)• 11 years ago |
|  | |

Attached patch

[Use CheckedInt to check for overflow. Carry r=bjacob](attachment.cgi?id=813127&action=diff)
— [Details](attachment.cgi?id=813127&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=922603&attachment=813127)

Review comments applied. <https://tbpl.mozilla.org/?tree=Try&rev=a528531ed7f7>
[Attachment #813118](/attachment.cgi?id=813118&action=edit "Use CheckedInt to check for overflow") -
Attachment is obsolete: true
[Attachment #813127](/attachment.cgi?id=813127&action=edit "Use CheckedInt to check for overflow.  Carry r=bjacob") -
Flags: review+Flags: needinfo?(jmuizelaar)

|  | [Milan Sreckovic [:milan] (needinfo for best results)](/user_profile?user_id=456486)  Assignee |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=922603#c5)• 11 years ago |
|  | |

Comment on [attachment 813127](/attachment.cgi?id=813127 "Use CheckedInt to check for overflow.  Carry r=bjacob") [[details]](/attachment.cgi?id=813127&action=edit "Use CheckedInt to check for overflow.  Carry r=bjacob") [[diff]](/attachment.cgi?id=813127&action=diff "Use CheckedInt to check for overflow.  Carry r=bjacob") [[review]](/page.cgi?id=splinter.html&ignore=&bug=922603&attachment=813127)
Use CheckedInt to check for overflow. Carry r=bjacob
[Security approval request comment]
How easily could an exploit be constructed based on the patch?
See tracking [bug 919486](/show_bug.cgi?id=919486 "NEW - [tracking] Report signed integer overflows within our codebase") - CERT Secure Coding Standard explicitly recommends to avoid this behavior
Do comments in the patch, the check-in comment, or tests included in the patch paint a bulls-eye on the security problem?
No more than the original code did - we are just trying to check for the overflow in a more reliable and well defined manner.
Which older supported branches are affected by this flaw?
Since before the end of 2011 (the first version of the file.)
If not all supported branches, which bug introduced the flaw?
Do you have backports for the affected branches? If not, how different, hard to create, and risky will they be?
Trivial.
How likely is this patch to cause regressions; how much testing does it need?
Not likely. CheckedInt is a well tested and supported class.
[Attachment #813127](/attachment.cgi?id=813127&action=edit "Use CheckedInt to check for overflow.  Carry r=bjacob") -
Flags: sec-approval?

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=922603#c6)• 11 years ago |
|  | |

Comment on [attachment 813127](/attachment.cgi?id=813127 "Use CheckedInt to check for overflow.  Carry r=bjacob") [[details]](/attachment.cgi?id=813127&action=edit "Use CheckedInt to check for overflow.  Carry r=bjacob") [[diff]](/attachment.cgi?id=813127&action=diff "Use CheckedInt to check for overflow.  Carry r=bjacob") [[review]](/page.cgi?id=splinter.html&ignore=&bug=922603&attachment=813127)
Use CheckedInt to check for overflow. Carry r=bjacob
Since this is a sec-want (and not high or critical), it doesn't need sec-approval. Go ahead and check it into trunk. I expect that we won't take it on branches given the low severity.
[Attachment #813127](/attachment.cgi?id=813127&action=edit "Use CheckedInt to check for overflow.  Carry r=bjacob") -
Flags: sec-approval?

|  | [Milan Sreckovic [:milan] (needinfo for best results)](/user_profile?user_id=456486)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=922603#a110771_456486)• 11 years ago |

Keywords: [checkin-needed](/buglist.cgi?keywords=checkin-needed&resolution=---)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=922603#c7)• 11 years ago |
|  | |

<https://hg.mozilla.org/integration/mozilla-inbound/rev/c00387255d25>Keywords: [checkin-needed](/buglist.cgi?keywords=checkin-needed&resolution=---)

|  | [Phil Ringnalda (:philor)](/user_profile?user_id=135518) |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=922603#c8)• 11 years ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/c00387255d25>Status: NEW → RESOLVEDClosed: 11 years ago
[status-firefox27](/buglist.cgi?f1=cf_status_firefox27&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=fixed)Resolution: --- → FIXEDTarget Milestone: --- → mozilla27

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=922603#a903560_1689)• 11 years ago |

[status-b2g18](/buglist.cgi?f1=cf_status_b2g18&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=wontfix)
[status-firefox-esr17](/buglist.cgi?f1=cf_status_firefox_esr17&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=wontfix)
[status-firefox-esr24](/buglist.cgi?f1=cf_status_firefox_esr24&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=wontfix)Keywords: [sec-want](/buglist.cgi?keywords=sec-want&resolution=---) → [sec-low](/buglist.cgi?keywords=sec-low&resolution=---)

|  | [Tracy Walker [:tracy]](/user_profile?user_id=18566) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=922603#a1837268_18566)• 11 years ago |

Whiteboard: [qa-]

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=922603#a9722310_280903)• 11 years ago |

Whiteboard: [qa-] → [qa-][adv-main27+]

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=922603#a9722371_280903)• 11 years ago |

[status-firefox26](/buglist.cgi?f1=cf_status_firefox26&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_firefox26&o1=equals&v1=wontfix)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=922603#a44294836_1689)• 10 years ago |

Group: core-security
You need to [log in](/show_bug.cgi?id=922603&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Milan Sreckovic [:milan] (needinfo for best results)](/user_profile?user_id=456486)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from bugzilla.mozilla.org_c7d4b1f0_20250124_230137.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/942940)
* [XML](/show_bug.cgi?ctype=xml&id=942940)

Closed
[Bug 942940](/show_bug.cgi?id=942940)

Opened 11 years ago
Closed 11 years ago

# Potential dangling peerreflexive candidate on some types of failure.

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

Potential dangling peerreflexive candidate on some types of failure.

## Categories

### (Core :: WebRTC: Networking, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=WebRTC%3A%20Networking#WebRTC%3A%20Networking)

WebRTC: Networking
▾

Core :: WebRTC: Networking
Bugs in the networking portions of WebRTC (PeerConnection dataChannels, SCTP, DTLS, SRTP, ICE, TURN, STUN, etc)
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=WebRTC%3A%20Networking&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=WebRTC%3A%20Networking&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=WebRTC%3A%20Networking)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

All

All

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

major

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla28

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Accessibility Severity | --- |
| --- | --- |
| a11y-review | --- |
| Performance Impact | --- |
| Webcompat Score | --- |
| Webcompat Priority | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox25 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox25&o1=equals&v1=wontfix) |
| firefox26 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox26&o1=equals&v1=wontfix) |
| firefox27 | --- | [fixed](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=fixed) |
| firefox28 | --- | [fixed](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=fixed) |
| firefox-esr24 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=wontfix) |
| b2g18 | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=unaffected) |
| b2g-v1.1hd | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=equals&v1=unaffected) |
| b2g-v1.2 | --- | [wontfix](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=wontfix) |
| b2g-v1.3 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=fixed) |
| b2g-v1.3T | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=fixed) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox25 |  | wontfix |
| firefox26 |  | wontfix |
| firefox27 |  | fixed |
| firefox28 |  | fixed |
| firefox-esr24 |  | wontfix |
| b2g18 |  | unaffected |
| b2g-v1.1hd |  | unaffected |
| b2g-v1.2 |  | wontfix |
| b2g-v1.3 |  | fixed |
| b2g-v1.3T |  | fixed |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: bwc, Assigned: bwc)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/3e201149abea356acc9bb6f0eea8b5a0?d=mm&size=40)  [bwc](/user_profile?user_id=478411)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/3e201149abea356acc9bb6f0eea8b5a0?d=mm&size=40)  [bwc](/user_profile?user_id=478411)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/3e201149abea356acc9bb6f0eea8b5a0?d=mm&size=40)  [bwc](/user_profile?user_id=478411)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

10 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

---

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Keywords: csectype-uaf, sec-moderate, Whiteboard: [qa-][adv-main27+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[csectype-uaf](/buglist.cgi?keywords=csectype-uaf&resolution=---),
[sec-moderate](/buglist.cgi?keywords=sec-moderate&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[qa-][adv-main27+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | in-testsuite |  |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (2 files)

| [Fix bug where a destroyed peerreflexive candidate could be left in the component list if candidate pair creation/insertion failed for some reason.](/attachment.cgi?id=8337868)  [11 years ago](#c1)  [Byron Campen [:bwc]](/user_profile?user_id=478411)   2.01 KB, patch | abr : [review+](#c10 "11 years ago")  abillings : [approval-mozilla-aurora+](#a1036812_280903 "11 years ago") | [Details](/attachment.cgi?id=8337868&action=edit) | [Diff](/attachment.cgi?id=8337868&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=942940&attachment=8337868) |
| --- | --- | --- |
| [Part 2. As long as we're working on the memory management in here, plug a potential leak.](/attachment.cgi?id=8342046)  [11 years ago](#c19)  [Byron Campen [:bwc]](/user_profile?user_id=478411)   1.20 KB, patch | abr : [review+](#c21 "11 years ago") | [Details](/attachment.cgi?id=8342046&action=edit) | [Diff](/attachment.cgi?id=8342046&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=942940&attachment=8342046) |

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Byron Campen [:bwc]](/user_profile?user_id=478411)  Assignee |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=942940#c0)• 11 years ago |
|  | |

When a new peer reflexive candidate is created, it is inserted into the candidate list prior to creation of the required candidate pair.
<http://dxr.mozilla.org/mozilla-central/source/media/mtransport/third_party/nICEr/src/ice/ice_component.c#523>
If some failure is encountered while creating the pair, the code at the abort: label destroys the already inserted candidate, leaving us open for use after free, and guaranteeing a double free.
<http://dxr.mozilla.org/mozilla-central/source/media/mtransport/third_party/nICEr/src/ice/ice_component.c#587>

|  | [Byron Campen [:bwc]](/user_profile?user_id=478411)  Assignee |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=942940#c1)• 11 years ago |
|  | |

Attached patch

[Fix bug where a destroyed peerreflexive candidate could be left in the component list if candidate pair creation/insertion failed for some reason.](attachment.cgi?id=8337868&action=diff)
— [Details](attachment.cgi?id=8337868&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=942940&attachment=8337868)

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=942940#a171634_406194)• 11 years ago |

Keywords: [csectype-uaf](/buglist.cgi?keywords=csectype-uaf&resolution=---),
[sec-critical](/buglist.cgi?keywords=sec-critical&resolution=---)

|  | [Byron Campen [:bwc]](/user_profile?user_id=478411)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=942940#a172005_478411)• 11 years ago |

[Attachment #8337868](/attachment.cgi?id=8337868&action=edit "Fix bug where a destroyed peerreflexive candidate could be left in the component list if candidate pair creation/insertion failed for some reason.") -
Flags: review?(ekr)

|  | [Eric Rescorla (:ekr)](/user_profile?user_id=35667) |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=942940#c2)• 11 years ago |
|  | |

I'd like to see some analysis of how this can actually happen before
deciding it's critical.

|  | [Eric Rescorla (:ekr)](/user_profile?user_id=35667) |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=942940#c3)• 11 years ago |
|  | |

If this is a real issue, it's going to be an issue in existing
versions of Firefox as well as in nICEr so we need to:
1. Verify if this is a real issue by walking through the candidate
pair creation logic.
2. If it is a real issue, then we need to do sec-approval and
simultaeneous uplift to nICEr.

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=942940#a180753_406194)• 11 years ago |

Keywords: [sec-critical](/buglist.cgi?keywords=sec-critical&resolution=---)

|  | [Byron Campen [:bwc]](/user_profile?user_id=478411)  Assignee |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=942940#c4)• 11 years ago |
|  | |

Looking through this, the priority calculation logic relies on app implementation details not within nICEr; if any of the app implementation used (the registry stuff for getting type preference values, the interface prioritizer if any, or the nr\_socket\_getaddr implementation) is fragile, we could fail to create the candidate pair.
I will continue looking for stuff that could go wrong after the priority is calculated.

|  | [Byron Campen [:bwc]](/user_profile?user_id=478411)  Assignee |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=942940#c5)• 11 years ago |
|  | |

Ok, finished looking, and only found more of the same (the only new thing I could find is some failures that could be caused by the app registering too many r\_log facilities).

|  | [Eric Rescorla (:ekr)](/user_profile?user_id=35667) |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=942940#c6)• 11 years ago |
|  | |

Adam, can you weigh in here?Flags: needinfo?(adam)

|  | [Adam Roach [:abr]](/user_profile?user_id=241693) |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=942940#c7)• 11 years ago |
|  | |

(In reply to Eric Rescorla (:ekr) from [comment #6](/show_bug.cgi?id=942940#c6 "RESOLVED FIXED - Potential dangling peerreflexive candidate on some types of failure."))
> Adam, can you weigh in here?
I agree that the fact that the call into nr\_interface\_prioritizer\_get\_priority dispatches to an application-supplied function does give us a problem in nICEr in general. However, I'll note that this interface hasn't been upstreamed yet, so this flaw doesn't exist in public nICEr. So, from that perspective, we need to only worry about about what Firefox does with this callback at the moment.
On a cursory read, I agree with Byron's analysis that the remaining failures that could trigger this situation are largely "can't happens," such as IPv6 addresses and OOM conditions. The one that is a little worrisome, since it can be forced by an outside party, is interface priority exhaustion, as would occur if someone created more than 128 interfaces on the host.
That said, the call tree gets pretty deep here, and a thorough manual audit can't plausibly catch every corner case that might arise.
In terms of our own user-supplied function in nrinterfaceprioritizer.cpp, and assuming nICEr is guaranteed to call "sort" before asking for I priority (I didn't verify this, but assume it must), I think we're pretty failure-proof (note, however, that we've had bugs in the past where interface names didn't match what we expected, which makes it difficult to \*guarantee\* success).
All of which is to say I think there's probably a real problem here, although it would be obscure, and I can't identify a plausible exploit for it in the time I've spent looking at it.Flags: needinfo?(adam)

|  | [Adam Roach [:abr]](/user_profile?user_id=241693) |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=942940#c8)• 11 years ago |
|  | |

With regards to upstreaming, I agree that we'll want to land this patch upstream shortly after committing it to the Mozilla tree. I'll gladly note that Byron has commit access to the resiprocate repo. ;-)

|  | [Eric Rescorla (:ekr)](/user_profile?user_id=35667) |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=942940#c9)• 11 years ago |
|  | |

Comment on [attachment 8337868](/attachment.cgi?id=8337868 "Fix bug where a destroyed peerreflexive candidate could be left in the component list if candidate pair creation/insertion failed for some reason.") [[details]](/attachment.cgi?id=8337868&action=edit "Fix bug where a destroyed peerreflexive candidate could be left in the component list if candidate pair creation/insertion failed for some reason.") [[diff]](/attachment.cgi?id=8337868&action=diff "Fix bug where a destroyed peerreflexive candidate could be left in the component list if candidate pair creation/insertion failed for some reason.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=942940&attachment=8337868)
Fix bug where a destroyed peerreflexive candidate could be left in the component list if candidate pair creation/insertion failed for some reason.
Review of [attachment 8337868](/attachment.cgi?id=8337868 "Fix bug where a destroyed peerreflexive candidate could be left in the component list if candidate pair creation/insertion failed for some reason.") [[details]](/attachment.cgi?id=8337868&action=edit "Fix bug where a destroyed peerreflexive candidate could be left in the component list if candidate pair creation/insertion failed for some reason.") [[diff]](/attachment.cgi?id=8337868&action=diff "Fix bug where a destroyed peerreflexive candidate could be left in the component list if candidate pair creation/insertion failed for some reason.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=942940&attachment=8337868):
-----------------------------------------------------------------
Adam, please review.
Byron, once Adam is done, please ask for sec-approval for Aurora and consult
with security on Beta (this should be an issue there, if it is one).
[Attachment #8337868](/attachment.cgi?id=8337868&action=edit "Fix bug where a destroyed peerreflexive candidate could be left in the component list if candidate pair creation/insertion failed for some reason.") -
Flags: review?(ekr) → review?(adam)

|  | [Adam Roach [:abr]](/user_profile?user_id=241693) |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=942940#c10)• 11 years ago |
|  | |

Comment on [attachment 8337868](/attachment.cgi?id=8337868 "Fix bug where a destroyed peerreflexive candidate could be left in the component list if candidate pair creation/insertion failed for some reason.") [[details]](/attachment.cgi?id=8337868&action=edit "Fix bug where a destroyed peerreflexive candidate could be left in the component list if candidate pair creation/insertion failed for some reason.") [[diff]](/attachment.cgi?id=8337868&action=diff "Fix bug where a destroyed peerreflexive candidate could be left in the component list if candidate pair creation/insertion failed for some reason.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=942940&attachment=8337868)
Fix bug where a destroyed peerreflexive candidate could be left in the component list if candidate pair creation/insertion failed for some reason.
Review of [attachment 8337868](/attachment.cgi?id=8337868 "Fix bug where a destroyed peerreflexive candidate could be left in the component list if candidate pair creation/insertion failed for some reason.") [[details]](/attachment.cgi?id=8337868&action=edit "Fix bug where a destroyed peerreflexive candidate could be left in the component list if candidate pair creation/insertion failed for some reason.") [[diff]](/attachment.cgi?id=8337868&action=diff "Fix bug where a destroyed peerreflexive candidate could be left in the component list if candidate pair creation/insertion failed for some reason.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=942940&attachment=8337868):
-----------------------------------------------------------------
Looks good, with one proposed improvement to avoid a future obscure leak.
::: media/mtransport/third\_party/nICEr/src/ice/ice\_component.c
@@ +527,5 @@
> ABORT(r);
> }
> nr\_ice\_candidate\_pair\_set\_state(pair->pctx,pair,NR\_ICE\_PAIR\_STATE\_FROZEN);
>
> if(r=nr\_ice\_candidate\_pair\_insert(&comp->stream->check\_list,pair)) {
Since we're poking around at memory management in the face of errors, I think we have a chance to leak the newly created pair if this insert fails. Admittedly, this can't \*currently\* fail, but we probably want to add a nr\_ice\_candidate\_pair\_destroy() inside the failure here in case future implementation changes that.
[Attachment #8337868](/attachment.cgi?id=8337868&action=edit "Fix bug where a destroyed peerreflexive candidate could be left in the component list if candidate pair creation/insertion failed for some reason.") -
Flags: review?(adam) → review+

|  | [Byron Campen [:bwc]](/user_profile?user_id=478411)  Assignee |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=942940#c11)• 11 years ago |
|  | |

(In reply to Eric Rescorla (:ekr) from [comment #9](/show_bug.cgi?id=942940#c9 "RESOLVED FIXED - Potential dangling peerreflexive candidate on some types of failure."))
> Comment on [attachment 8337868](/attachment.cgi?id=8337868 "Fix bug where a destroyed peerreflexive candidate could be left in the component list if candidate pair creation/insertion failed for some reason.") [[details]](/attachment.cgi?id=8337868&action=edit "Fix bug where a destroyed peerreflexive candidate could be left in the component list if candidate pair creation/insertion failed for some reason.") [[diff]](/attachment.cgi?id=8337868&action=diff "Fix bug where a destroyed peerreflexive candidate could be left in the component list if candidate pair creation/insertion failed for some reason.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=942940&attachment=8337868)
> Fix bug where a destroyed peerreflexive candidate could be left in the
> component list if candidate pair creation/insertion failed for some reason.
>
> Review of [attachment 8337868](/attachment.cgi?id=8337868 "Fix bug where a destroyed peerreflexive candidate could be left in the component list if candidate pair creation/insertion failed for some reason.") [[details]](/attachment.cgi?id=8337868&action=edit "Fix bug where a destroyed peerreflexive candidate could be left in the component list if candidate pair creation/insertion failed for some reason.") [[diff]](/attachment.cgi?id=8337868&action=diff "Fix bug where a destroyed peerreflexive candidate could be left in the component list if candidate pair creation/insertion failed for some reason.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=942940&attachment=8337868):
> -----------------------------------------------------------------
>
> Adam, please review.
>
> Byron, once Adam is done, please ask for sec-approval for Aurora and consult
> with security on Beta (this should be an issue there, if it is one).
I'm assuming this will need to go into the release version too? So do I set the sec-approval, approval‑mozilla‑aurora, approval‑mozilla‑beta, and approval‑mozilla‑release flags?

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=942940#c12)• 11 years ago |
|  | |

(In reply to Byron Campen [:bwc] from [comment #11](/show_bug.cgi?id=942940#c11 "RESOLVED FIXED - Potential dangling peerreflexive candidate on some types of failure."))
> I'm assuming this will need to go into the release version too? So do I set
> the sec-approval, approval‑mozilla‑aurora, approval‑mozilla‑beta, and
> approval‑mozilla‑release flags?
Just do sec-approval first, which will let you land it on trunk. Once it has been on trunk enough that you know it is stable, you can ask for approval to land on aurora (beta is a lost cause at this point).

|  | [Byron Campen [:bwc]](/user_profile?user_id=478411)  Assignee |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=942940#c13)• 11 years ago |
|  | |

(In reply to Adam Roach [:abr] from [comment #10](/show_bug.cgi?id=942940#c10 "RESOLVED FIXED - Potential dangling peerreflexive candidate on some types of failure."))
> Comment on [attachment 8337868](/attachment.cgi?id=8337868 "Fix bug where a destroyed peerreflexive candidate could be left in the component list if candidate pair creation/insertion failed for some reason.") [[details]](/attachment.cgi?id=8337868&action=edit "Fix bug where a destroyed peerreflexive candidate could be left in the component list if candidate pair creation/insertion failed for some reason.") [[diff]](/attachment.cgi?id=8337868&action=diff "Fix bug where a destroyed peerreflexive candidate could be left in the component list if candidate pair creation/insertion failed for some reason.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=942940&attachment=8337868)
> Fix bug where a destroyed peerreflexive candidate could be left in the
> component list if candidate pair creation/insertion failed for some reason.
>
> Review of [attachment 8337868](/attachment.cgi?id=8337868 "Fix bug where a destroyed peerreflexive candidate could be left in the component list if candidate pair creation/insertion failed for some reason.") [[details]](/attachment.cgi?id=8337868&action=edit "Fix bug where a destroyed peerreflexive candidate could be left in the component list if candidate pair creation/insertion failed for some reason.") [[diff]](/attachment.cgi?id=8337868&action=diff "Fix bug where a destroyed peerreflexive candidate could be left in the component list if candidate pair creation/insertion failed for some reason.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=942940&attachment=8337868):
> -----------------------------------------------------------------
>
> Looks good, with one proposed improvement to avoid a future obscure leak.
>
> ::: media/mtransport/third\_party/nICEr/src/ice/ice\_component.c
> @@ +527,5 @@
> > ABORT(r);
> > }
> > nr\_ice\_candidate\_pair\_set\_state(pair->pctx,pair,NR\_ICE\_PAIR\_STATE\_FROZEN);
> >
> > if(r=nr\_ice\_candidate\_pair\_insert(&comp->stream->check\_list,pair)) {
>
> Since we're poking around at memory management in the face of errors, I
> think we have a chance to leak the newly created pair if this insert fails.
> Admittedly, this can't \*currently\* fail, but we probably want to add a
> nr\_ice\_candidate\_pair\_destroy() inside the failure here in case future
> implementation changes that.
Ok, I'll put up a separate patch for that one-liner.

|  | [Byron Campen [:bwc]](/user_profile?user_id=478411)  Assignee |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=942940#c14)• 11 years ago |
|  | |

Comment on [attachment 8337868](/attachment.cgi?id=8337868 "Fix bug where a destroyed peerreflexive candidate could be left in the component list if candidate pair creation/insertion failed for some reason.") [[details]](/attachment.cgi?id=8337868&action=edit "Fix bug where a destroyed peerreflexive candidate could be left in the component list if candidate pair creation/insertion failed for some reason.") [[diff]](/attachment.cgi?id=8337868&action=diff "Fix bug where a destroyed peerreflexive candidate could be left in the component list if candidate pair creation/insertion failed for some reason.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=942940&attachment=8337868)
Fix bug where a destroyed peerreflexive candidate could be left in the component list if candidate pair creation/insertion failed for some reason.
Review of [attachment 8337868](/attachment.cgi?id=8337868 "Fix bug where a destroyed peerreflexive candidate could be left in the component list if candidate pair creation/insertion failed for some reason.") [[details]](/attachment.cgi?id=8337868&action=edit "Fix bug where a destroyed peerreflexive candidate could be left in the component list if candidate pair creation/insertion failed for some reason.") [[diff]](/attachment.cgi?id=8337868&action=diff "Fix bug where a destroyed peerreflexive candidate could be left in the component list if candidate pair creation/insertion failed for some reason.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=942940&attachment=8337868):
-----------------------------------------------------------------
This bug is present on at least aurora and beta, and probably released versions as well.
[Attachment #8337868](/attachment.cgi?id=8337868&action=edit "Fix bug where a destroyed peerreflexive candidate could be left in the component list if candidate pair creation/insertion failed for some reason.") -
Flags: sec-approval?

|  | [Byron Campen [:bwc]](/user_profile?user_id=478411)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=942940#a704994_478411)• 11 years ago |

[status-firefox25](/buglist.cgi?f1=cf_status_firefox25&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox25&o1=equals&v1=affected)
[status-firefox26](/buglist.cgi?f1=cf_status_firefox26&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox26&o1=equals&v1=affected)
[status-firefox27](/buglist.cgi?f1=cf_status_firefox27&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=affected)
[status-firefox28](/buglist.cgi?f1=cf_status_firefox28&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=affected)
[status-firefox-esr24](/buglist.cgi?f1=cf_status_firefox_esr24&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=affected)

|  | [Byron Campen [:bwc]](/user_profile?user_id=478411)  Assignee |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=942940#c15)• 11 years ago |
|  | |

Comment on [attachment 8337868](/attachment.cgi?id=8337868 "Fix bug where a destroyed peerreflexive candidate could be left in the component list if candidate pair creation/insertion failed for some reason.") [[details]](/attachment.cgi?id=8337868&action=edit "Fix bug where a destroyed peerreflexive candidate could be left in the component list if candidate pair creation/insertion failed for some reason.") [[diff]](/attachment.cgi?id=8337868&action=diff "Fix bug where a destroyed peerreflexive candidate could be left in the component list if candidate pair creation/insertion failed for some reason.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=942940&attachment=8337868)
Fix bug where a destroyed peerreflexive candidate could be left in the component list if candidate pair creation/insertion failed for some reason.
Clearing sec-approval flag, so I can try another way and maybe get the template this time.
[Attachment #8337868](/attachment.cgi?id=8337868&action=edit "Fix bug where a destroyed peerreflexive candidate could be left in the component list if candidate pair creation/insertion failed for some reason.") -
Flags: sec-approval?

|  | [Byron Campen [:bwc]](/user_profile?user_id=478411)  Assignee |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=942940#c16)• 11 years ago |
|  | |

Comment on [attachment 8337868](/attachment.cgi?id=8337868 "Fix bug where a destroyed peerreflexive candidate could be left in the component list if candidate pair creation/insertion failed for some reason.") [[details]](/attachment.cgi?id=8337868&action=edit "Fix bug where a destroyed peerreflexive candidate could be left in the component list if candidate pair creation/insertion failed for some reason.") [[diff]](/attachment.cgi?id=8337868&action=diff "Fix bug where a destroyed peerreflexive candidate could be left in the component list if candidate pair creation/insertion failed for some reason.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=942940&attachment=8337868)
Fix bug where a destroyed peerreflexive candidate could be left in the component list if candidate pair creation/insertion failed for some reason.
[Security approval request comment]
How easily could an exploit be constructed based on the patch?
Not 100% sure. There are lots of places where an error could trigger this bug, and I have not had time to delve down into the implementation of the interface prioritizer, the NR\_registry stuff, or nr\_socket\_getaddr and determine which would be easiest to make fail.
Do comments in the patch, the check-in comment, or tests included in the patch paint a bulls-eye on the security problem?
They make it extremely easy to identify the flaw, but figuring out how to actually trigger it would require some work.
Which older supported branches are affected by this flaw?
Everything back to FFX 22 is affected, but we only support back to 24esr.
If not all supported branches, which bug introduced the flaw?
Do you have backports for the affected branches? If not, how different, hard to create, and risky will they be?
The backports should be trivial, as the code is basically the same modulo stuff like whitespace and maybe log levels.
How likely is this patch to cause regressions; how much testing does it need?
Since this code has not changed much, I suspect that running the current test-cases would be more than sufficient. I do not expect this change to cause any regressions.
[Attachment #8337868](/attachment.cgi?id=8337868&action=edit "Fix bug where a destroyed peerreflexive candidate could be left in the component list if candidate pair creation/insertion failed for some reason.") -
Flags: sec-approval?

|  | [Byron Campen [:bwc]](/user_profile?user_id=478411)  Assignee |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=942940#c17)• 11 years ago |
|  | |

Some further comments re sec-approval; this bug was discovered solely through code inspection, and has not been reproduced at any point, nor do we have a concrete way of triggering it in mind. In order to trigger this bug, one of the following things would do the trick (there might be others):
1.) Run the interface prioritization code (this is code that looks at local network addresses, and assigns each a priority) out of automatic preference values. This requires 224 local network addresses to be identified by the code. This seems to be pretty hard to trigger remotely.
2.) Confuse the interface prioritization code enough that it returns an error response when nr\_interface\_prioritizer\_get\_priority is called (again, this is strictly internal stuff, so you would probably have to induce the OS to do something weird enough that the prioritization code gets confused).
3.) Confuse the NR\_registry implementation in some way (ie; somehow confuse an internal configuration store).
4.) Confuse the implementation of nr\_socket\_getaddr into returning an error (this seems to be impossible in our codebase).

|  | [Byron Campen [:bwc]](/user_profile?user_id=478411)  Assignee |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=942940#c18)• 11 years ago |
|  | |

Sorry, s/local network addresses/local network interfaces/g in above comment. The former is pretty easy, the latter not so much.

|  | [Byron Campen [:bwc]](/user_profile?user_id=478411)  Assignee |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=942940#c19)• 11 years ago |
|  | |

Attached patch

[Part 2. As long as we're working on the memory management in here, plug a potential leak.](attachment.cgi?id=8342046&action=diff)
— [Details](attachment.cgi?id=8342046&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=942940&attachment=8342046)

Fix for abr

|  | [Byron Campen [:bwc]](/user_profile?user_id=478411)  Assignee |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=942940#c20)• 11 years ago |
|  | |

Comment on [attachment 8342046](/attachment.cgi?id=8342046 "Part 2. As long as we're working on the memory management in here, plug a potential leak.") [[details]](/attachment.cgi?id=8342046&action=edit "Part 2. As long as we're working on the memory management in here, plug a potential leak.") [[diff]](/attachment.cgi?id=8342046&action=diff "Part 2. As long as we're working on the memory management in here, plug a potential leak.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=942940&attachment=8342046)
Part 2. As long as we're working on the memory management in here, plug a potential leak.
Review of [attachment 8342046](/attachment.cgi?id=8342046 "Part 2. As long as we're working on the memory management in here, plug a potential leak.") [[details]](/attachment.cgi?id=8342046&action=edit "Part 2. As long as we're working on the memory management in here, plug a potential leak.") [[diff]](/attachment.cgi?id=8342046&action=diff "Part 2. As long as we're working on the memory management in here, plug a potential leak.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=942940&attachment=8342046):
-----------------------------------------------------------------
Keeping this separate from the stuff that needs sec-approval.
[Attachment #8342046](/attachment.cgi?id=8342046&action=edit "Part 2. As long as we're working on the memory management in here, plug a potential leak.") -
Flags: review?(adam)

|  | [Adam Roach [:abr]](/user_profile?user_id=241693) |  |
| --- | --- | --- |
| [Comment 21](/show_bug.cgi?id=942940#c21)• 11 years ago |
|  | |

Comment on [attachment 8342046](/attachment.cgi?id=8342046 "Part 2. As long as we're working on the memory management in here, plug a potential leak.") [[details]](/attachment.cgi?id=8342046&action=edit "Part 2. As long as we're working on the memory management in here, plug a potential leak.") [[diff]](/attachment.cgi?id=8342046&action=diff "Part 2. As long as we're working on the memory management in here, plug a potential leak.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=942940&attachment=8342046)
Part 2. As long as we're working on the memory management in here, plug a potential leak.
LGTM
[Attachment #8342046](/attachment.cgi?id=8342046&action=edit "Part 2. As long as we're working on the memory management in here, plug a potential leak.") -
Flags: review?(adam) → review+

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=942940#a781370_280903)• 11 years ago |

[status-firefox25](/buglist.cgi?f1=cf_status_firefox25&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox25&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_firefox25&o1=equals&v1=wontfix)
[status-firefox26](/buglist.cgi?f1=cf_status_firefox26&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox26&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_firefox26&o1=equals&v1=wontfix)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 22](/show_bug.cgi?id=942940#c22)• 11 years ago |
|  | |

We need to get a security rating on this before it can be approved to go in. How bad is this as a potential security exploit? As a use-after-free, it looks sec-critical but comments downplay it since it is from code inspection.

|  | [Randell Jesup [:jesup] (needinfo me)](/user_profile?user_id=11539) |  |
| --- | --- | --- |
| [Comment 23](/show_bug.cgi?id=942940#c23)• 11 years ago |
|  | |

The current belief (from [comment 17](/show_bug.cgi?id=942940#c17 "RESOLVED FIXED - Potential dangling peerreflexive candidate on some types of failure.")) is that there's no way to trigger this failure without control of the local machine (to add hundreds of bogus local interfaces) or a wrapper around mozilla, or presuming another bug in the registry code that we don't know to exist, or by accessing internal-only interfaces. So from that it's unclear to me what the final rating would be. Worst-case would be critical, but the analysis would seem to downgrade that per [comment 17](/show_bug.cgi?id=942940#c17 "RESOLVED FIXED - Potential dangling peerreflexive candidate on some types of failure.").

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 24](/show_bug.cgi?id=942940#c24)• 11 years ago |
|  | |

Sounds good enough to downgrade this to sec-moderateKeywords: [sec-moderate](/buglist.cgi?keywords=sec-moderate&resolution=---)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 25](/show_bug.cgi?id=942940#c25)• 11 years ago |
|  | |

Comment on [attachment 8337868](/attachment.cgi?id=8337868 "Fix bug where a destroyed peerreflexive candidate could be left in the component list if candidate pair creation/insertion failed for some reason.") [[details]](/attachment.cgi?id=8337868&action=edit "Fix bug where a destroyed peerreflexive candidate could be left in the component list if candidate pair creation/insertion failed for some reason.") [[diff]](/attachment.cgi?id=8337868&action=diff "Fix bug where a destroyed peerreflexive candidate could be left in the component list if candidate pair creation/insertion failed for some reason.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=942940&attachment=8337868)
Fix bug where a destroyed peerreflexive candidate could be left in the component list if candidate pair creation/insertion failed for some reason.
As a sec-moderate, this doesn't need approval to go in then. Check in at leisure.
[Attachment #8337868](/attachment.cgi?id=8337868&action=edit "Fix bug where a destroyed peerreflexive candidate could be left in the component list if candidate pair creation/insertion failed for some reason.") -
Flags: sec-approval?

|  | [Byron Campen [:bwc]](/user_profile?user_id=478411)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=942940#a885704_478411)• 11 years ago |

Whiteboard: [checkin-needed]

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=942940#a885809_406194)• 11 years ago |

Keywords: [checkin-needed](/buglist.cgi?keywords=checkin-needed&resolution=---)Whiteboard: [checkin-needed]

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 26](/show_bug.cgi?id=942940#c26)• 11 years ago |
|  | |

<https://hg.mozilla.org/integration/mozilla-inbound/rev/22b9018bf95c>
<https://hg.mozilla.org/integration/mozilla-inbound/rev/5544b1b9b81e>Keywords: [checkin-needed](/buglist.cgi?keywords=checkin-needed&resolution=---)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 27](/show_bug.cgi?id=942940#c27)• 11 years ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/22b9018bf95c>
<https://hg.mozilla.org/mozilla-central/rev/5544b1b9b81e>
B2g26 (v1.2) is presumably affected by this? Should we nominate this for koi?Status: NEW → RESOLVEDClosed: 11 years ago
[status-b2g18](/buglist.cgi?f1=cf_status_b2g18&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=unaffected)
[status-b2g-v1.1hd](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=equals&v1=unaffected)
[status-b2g-v1.2](/buglist.cgi?f1=cf_status_b2g_1_2&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=affected)
[status-firefox28](/buglist.cgi?f1=cf_status_firefox28&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=fixed)Resolution: --- → FIXEDTarget Milestone: --- → mozilla28

|  | [Maire Reavy [:mreavy]](/user_profile?user_id=74434) |  |
| --- | --- | --- |
| [Comment 28](/show_bug.cgi?id=942940#c28)• 11 years ago |
|  | |

v1.2 doesn't support PeerConnection, so this fix shouldn't be needed there.

|  | [Randell Jesup [:jesup] (needinfo me)](/user_profile?user_id=11539) |  |
| --- | --- | --- |
| [Comment 29](/show_bug.cgi?id=942940#c29)• 11 years ago |
|  | |

Comment on [attachment 8337868](/attachment.cgi?id=8337868 "Fix bug where a destroyed peerreflexive candidate could be left in the component list if candidate pair creation/insertion failed for some reason.") [[details]](/attachment.cgi?id=8337868&action=edit "Fix bug where a destroyed peerreflexive candidate could be left in the component list if candidate pair creation/insertion failed for some reason.") [[diff]](/attachment.cgi?id=8337868&action=diff "Fix bug where a destroyed peerreflexive candidate could be left in the component list if candidate pair creation/insertion failed for some reason.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=942940&attachment=8337868)
Fix bug where a destroyed peerreflexive candidate could be left in the component list if candidate pair creation/insertion failed for some reason.
[Approval Request Comment]
See earlier s-a request. This affects 27 as well, and is landed in 28.
[Attachment #8337868](/attachment.cgi?id=8337868&action=edit "Fix bug where a destroyed peerreflexive candidate could be left in the component list if candidate pair creation/insertion failed for some reason.") -
Flags: approval-mozilla-aurora?

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=942940#a1036812_280903)• 11 years ago |

[Attachment #8337868](/attachment.cgi?id=8337868&action=edit "Fix bug where a destroyed peerreflexive candidate could be left in the component list if candidate pair creation/insertion failed for some reason.") -
Flags: approval-mozilla-aurora? → approval-mozilla-aurora+

|  | [Randell Jesup [:jesup] (needinfo me)](/user_profile?user_id=11539) |  |
| --- | --- | --- |
| [Comment 30](/show_bug.cgi?id=942940#c30)• 11 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-aurora/rev/8de854b69d18>
[status-firefox27](/buglist.cgi?f1=cf_status_firefox27&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=fixed)

|  | [u279076](/user_profile?user_id=279076) |  |
| --- | --- | --- |
| [Comment 31](/show_bug.cgi?id=942940#c31)• 11 years ago |
|  | |

I don't think this needs QA verification. If anyone thinks that's a mistake please remove the [qa-] whiteboard tag and add the verifyme keyword.Whiteboard: [qa-]

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 32](/show_bug.cgi?id=942940#c32)• 11 years ago |
|  | |

Do we need this on b2g26 (v1.2)?
[status-b2g-v1.3](/buglist.cgi?f1=cf_status_b2g_1_3&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=fixed)Flags: needinfo?(docfaraday)

|  | [Byron Campen [:bwc]](/user_profile?user_id=478411)  Assignee |  |
| --- | --- | --- |
| [Comment 33](/show_bug.cgi?id=942940#c33)• 11 years ago |
|  | |

Nope, since we don't support PeerConnections on 1.2.Flags: needinfo?(docfaraday)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=942940#a2151140_75935)• 11 years ago |

[status-b2g-v1.2](/buglist.cgi?f1=cf_status_b2g_1_2&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=wontfix)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=942940#a5016245_280903)• 11 years ago |

[status-firefox-esr24](/buglist.cgi?f1=cf_status_firefox_esr24&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=wontfix)Whiteboard: [qa-] → [qa-][adv-main27+]

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=942940#a14177674_75935)• 11 years ago |

[status-b2g-v1.3T](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=fixed)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=942940#a39521453_1689)• 10 years ago |

Group: core-security
You need to [log in](/show_bug.cgi?id=942940&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Byron Campen [:bwc]](/user_profile?user_id=478411)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from www.ubuntu.com_8a3e71ca_20250124_230107.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# USN-2102-2: Firefox regression

19 February 2014

USN-2102-1 introduced a regression in Firefox.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Releases

* [Ubuntu 13.10](/security/notices?release=saucy)
* [Ubuntu 12.10](/security/notices?release=quantal)
* [Ubuntu 12.04](/security/notices?release=precise)

## Packages

* [firefox](/security/cves?package=firefox) - Mozilla Open Source web browser

## Details

USN-2102-1 fixed vulnerabilities in Firefox. The update introduced a

regression which could make Firefox crash under some circumstances. This

update fixes the problem.

We apologize for the inconvenience.

Original advisory details:

Christian Holler, Terrence Cole, Jesse Ruderman, Gary Kwong, Eric

Rescorla, Jonathan Kew, Dan Gohman, Ryan VanderMeulen, Carsten Book,

Andrew Sutherland, Byron Campen, Nicholas Nethercote, Paul Adenot, David

Baron, Julian Seward and Sotaro Ikeda discovered multiple memory safety

issues in Firefox. If a user were tricked in to opening a specially

crafted website, an attacker could potentially exploit these to cause a

denial of service via application crash, or execute arbitrary code with

the privileges of the user invoking Firefox. ([CVE-2014-1477](/security/CVE-2014-1477),

[CVE-2014-1478](/security/CVE-2014-1478))

Cody Crews discovered a method to bypass System Only Wrappers. An attacker

could potentially exploit this to steal confidential data or execute code

with the privileges of the user invoking Firefox. ([CVE-2014-1479](/security/CVE-2014-1479))

Jordi Chancel discovered that the downloads dialog did not implement a

security timeout before button presses are processed. An attacker could

potentially exploit this to conduct clickjacking attacks. ([CVE-2014-1480](/security/CVE-2014-1480))

Fredrik Lönnqvist discovered a use-after-free in Firefox. An attacker

could potentially exploit this to cause a denial of service via

application crash, or execute arbitrary code with the priviliges of the

user invoking Firefox. ([CVE-2014-1482](/security/CVE-2014-1482))

Jordan Milne discovered a timing flaw when using document.elementFromPoint

and document.caretPositionFromPoint on cross-origin iframes. An attacker

could potentially exploit this to steal confidential imformation.

([CVE-2014-1483](/security/CVE-2014-1483))

Frederik Braun discovered that the CSP implementation in Firefox did not

handle XSLT stylesheets in accordance with the specification, potentially

resulting in unexpected script execution in some circumstances

([CVE-2014-1485](/security/CVE-2014-1485))

Arthur Gerkis discovered a use-after-free in Firefox. An attacker could

potentially exploit this to cause a denial of service via application

crash, or execute arbitrary code with the priviliges of the user invoking

Firefox. ([CVE-2014-1486](/security/CVE-2014-1486))

Masato Kinugawa discovered a cross-origin information leak in web worker

error messages. An attacker could potentially exploit this to steal

confidential information. ([CVE-2014-1487](/security/CVE-2014-1487))

Yazan Tommalieh discovered that web pages could activate buttons on the

default Firefox startpage (about:home) in some circumstances. An attacker

could potentially exploit this to cause data loss by triggering a session

restore. ([CVE-2014-1489](/security/CVE-2014-1489))

Soeren Balko discovered a crash in Firefox when terminating web workers

running asm.js code in some circumstances. An attacker could potentially

exploit this to execute arbitrary code with the priviliges of the user

invoking Firefox. ([CVE-2014-1488](/security/CVE-2014-1488))

Several issues were discovered with ticket handling in NSS. An attacker

could potentially exploit these to cause a denial of service or bypass

cryptographic protection mechanisms. ([CVE-2014-1490](/security/CVE-2014-1490), [CVE-2014-1491](/security/CVE-2014-1491))

Boris Zbarsky discovered that security restrictions on window objects

could be bypassed under certain circumstances. ([CVE-2014-1481](/security/CVE-2014-1481))

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Update instructions

The problem can be corrected by updating your system to the following package versions:

##### Ubuntu 13.10

* [firefox](https://launchpad.net/ubuntu/%2Bsource/firefox)
  -
  [27.0.1+build1-0ubuntu0.13.10.1](https://launchpad.net/ubuntu/%2Bsource/firefox/27.0.1%2Bbuild1-0ubuntu0.13.10.1)

##### Ubuntu 12.10

* [firefox](https://launchpad.net/ubuntu/%2Bsource/firefox)
  -
  [27.0.1+build1-0ubuntu0.12.10.1](https://launchpad.net/ubuntu/%2Bsource/firefox/27.0.1%2Bbuild1-0ubuntu0.12.10.1)

##### Ubuntu 12.04

* [firefox](https://launchpad.net/ubuntu/%2Bsource/firefox)
  -
  [27.0.1+build1-0ubuntu0.12.04.1](https://launchpad.net/ubuntu/%2Bsource/firefox/27.0.1%2Bbuild1-0ubuntu0.12.04.1)

After a standard system update you need to restart Firefox to make

all the necessary changes.

## References

* <https://launchpad.net/bugs/1274468>

### Join the discussion

* [Ubuntu security updates mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened)
* [Security announcements mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-security-announce)

### Need help with your security needs?

Ubuntu Pro provides up to ten-year security coverage for over 23,000 open-source packages within the Ubuntu Main and Universe repositories.

[Talk to an expert to find out what would work best for you](/contact-us/form?product=pro)

### Further reading

* *Loading...*

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page



=== Content from lists.opensuse.org_5662080a_20250124_230056.html ===


[![openSUSE](https://static.opensuse.org/favicon.svg)
Mailing Lists](/archives/ "openSUSE Mailing Lists")

[Sign In](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/S65HS5TZPGO7EQHLA3LOEW5IEBSE7PAC/)
[Sign Up](/accounts/signup/?next=/archives/list/security-announce%40lists.opensuse.org/message/S65HS5TZPGO7EQHLA3LOEW5IEBSE7PAC/)

[Manage this list](/manage/lists/security-announce.lists.opensuse.org/)
[Sign In](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/S65HS5TZPGO7EQHLA3LOEW5IEBSE7PAC/)
[Sign Up](/accounts/signup/?next=/archives/list/security-announce%40lists.opensuse.org/message/S65HS5TZPGO7EQHLA3LOEW5IEBSE7PAC/)

×
#### Keyboard Shortcuts

### Thread View

* `j`: Next unread message
* `k`: Previous unread message
* `j a`: Jump to all threads* `j l`: Jump to MailingList overview

[thread](/archives/list/security-announce%40lists.opensuse.org/thread/S65HS5TZPGO7EQHLA3LOEW5IEBSE7PAC/#S65HS5TZPGO7EQHLA3LOEW5IEBSE7PAC)

# [security-announce] openSUSE-SU-2014:0419-1: important: Mozilla updates 2014/03

![](https://seccdn.libravatar.org/avatar/099a17325bdf082b643d1a6bbacde279.jpg?s=120&d=mm&r=g)
## [opensuse-security＠opensuse.org](/archives/users/1b72def497ef4503896cd7a5fe9fb8e0/ "See the profile for opensuse-security＠opensuse.org")

21 Mar
2014

21 Mar
'14

22:04

openSUSE Security Update: Mozilla updates 2014/03
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
Announcement ID: openSUSE-SU-2014:0419-1
Rating: important
References: #861847 #862831 #865539 #868603
Cross-References: CVE-2014-1477 CVE-2014-1478 CVE-2014-1479
CVE-2014-1480 CVE-2014-1481 CVE-2014-1482
CVE-2014-1483 CVE-2014-1485 CVE-2014-1486
CVE-2014-1487 CVE-2014-1488 CVE-2014-1490
CVE-2014-1491 CVE-2014-1493 CVE-2014-1494
CVE-2014-1497 CVE-2014-1498 CVE-2014-1499
CVE-2014-1500 CVE-2014-1502 CVE-2014-1504
CVE-2014-1505 CVE-2014-1508 CVE-2014-1509
CVE-2014-1510 CVE-2014-1511 CVE-2014-1512
CVE-2014-1513 CVE-2014-1514
Affected Products:
openSUSE 11.4
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
An update that fixes 29 vulnerabilities is now available.
Description:
This patch contains a collection of security relevant
updates for Mozilla applications.
Update Firefox to 24.4.0 (bnc#868603) Update Thunderbird to
24.4.0 Update NSPR to 4.10.4 Update NSS to 3.15.5
\* MFSA 2014-15/CVE-2014-1493/CVE-2014-1494 Miscellaneous
memory safety hazards
\* MFSA 2014-17/CVE-2014-1497 (bmo#966311) Out of bounds
read during WAV file decoding
\* MFSA 2014-26/CVE-2014-1508 (bmo#963198) Information
disclosure through polygon rendering in MathML
\* MFSA 2014-27/CVE-2014-1509 (bmo#966021) Memory
corruption in Cairo during PDF font rendering
\* MFSA 2014-28/CVE-2014-1505 (bmo#941887) SVG filters
information disclosure through feDisplacementMap
\* MFSA 2014-29/CVE-2014-1510/CVE-2014-1511 (bmo#982906,
bmo#982909) Privilege escalation using
WebIDL-implemented APIs
\* MFSA 2014-30/CVE-2014-1512 (bmo#982957) Use-after-free
in TypeObject
\* MFSA 2014-31/CVE-2014-1513 (bmo#982974) Out-of-bounds
read/write through neutering ArrayBuffer objects
\* MFSA 2014-32/CVE-2014-1514 (bmo#983344) Out-of-bounds
write through TypedArrayObject after neutering
Patch Instructions:
To install this openSUSE Security Update use YaST online\_update.
Alternatively you can run the command listed for your product:
- openSUSE 11.4:
zypper in -t patch 2014-37
To bring your system up-to-date, use "zypper patch".
Package List:
- openSUSE 11.4 (i586 x86\_64):
MozillaFirefox-24.4.0-107.3
MozillaFirefox-branding-upstream-24.4.0-107.3
MozillaFirefox-buildsymbols-24.4.0-107.3
MozillaFirefox-debuginfo-24.4.0-107.3
MozillaFirefox-debugsource-24.4.0-107.3
MozillaFirefox-devel-24.4.0-107.3
MozillaFirefox-translations-common-24.4.0-107.3
MozillaFirefox-translations-other-24.4.0-107.3
MozillaThunderbird-24.4.0-89.2
MozillaThunderbird-buildsymbols-24.4.0-89.2
MozillaThunderbird-debuginfo-24.4.0-89.2
MozillaThunderbird-debugsource-24.4.0-89.2
MozillaThunderbird-devel-24.4.0-89.2
MozillaThunderbird-translations-common-24.4.0-89.2
MozillaThunderbird-translations-other-24.4.0-89.2
enigmail-1.6.0+24.4.0-89.2
libfreebl3-3.15.5-82.1
libfreebl3-debuginfo-3.15.5-82.1
libsoftokn3-3.15.5-82.1
libsoftokn3-debuginfo-3.15.5-82.1
mozilla-nspr-4.10.4-40.1
mozilla-nspr-debuginfo-4.10.4-40.1
mozilla-nspr-debugsource-4.10.4-40.1
mozilla-nspr-devel-4.10.4-40.1
mozilla-nss-3.15.5-82.1
mozilla-nss-certs-3.15.5-82.1
mozilla-nss-certs-debuginfo-3.15.5-82.1
mozilla-nss-debuginfo-3.15.5-82.1
mozilla-nss-debugsource-3.15.5-82.1
mozilla-nss-devel-3.15.5-82.1
mozilla-nss-sysinit-3.15.5-82.1
mozilla-nss-sysinit-debuginfo-3.15.5-82.1
mozilla-nss-tools-3.15.5-82.1
mozilla-nss-tools-debuginfo-3.15.5-82.1
- openSUSE 11.4 (x86\_64):
libfreebl3-32bit-3.15.5-82.1
libfreebl3-debuginfo-32bit-3.15.5-82.1
libsoftokn3-32bit-3.15.5-82.1
libsoftokn3-debuginfo-32bit-3.15.5-82.1
mozilla-nspr-32bit-4.10.4-40.1
mozilla-nspr-debuginfo-32bit-4.10.4-40.1
mozilla-nss-32bit-3.15.5-82.1
mozilla-nss-certs-32bit-3.15.5-82.1
mozilla-nss-certs-debuginfo-32bit-3.15.5-82.1
mozilla-nss-debuginfo-32bit-3.15.5-82.1
mozilla-nss-sysinit-32bit-3.15.5-82.1
mozilla-nss-sysinit-debuginfo-32bit-3.15.5-82.1
- openSUSE 11.4 (ia64):
libfreebl3-debuginfo-x86-3.15.5-82.1
libfreebl3-x86-3.15.5-82.1
libsoftokn3-debuginfo-x86-3.15.5-82.1
libsoftokn3-x86-3.15.5-82.1
mozilla-nspr-debuginfo-x86-4.10.4-40.1
mozilla-nspr-x86-4.10.4-40.1
mozilla-nss-certs-debuginfo-x86-3.15.5-82.1
mozilla-nss-certs-x86-3.15.5-82.1
mozilla-nss-debuginfo-x86-3.15.5-82.1
mozilla-nss-sysinit-debuginfo-x86-3.15.5-82.1
mozilla-nss-sysinit-x86-3.15.5-82.1
mozilla-nss-x86-3.15.5-82.1
References:
<http://support.novell.com/security/cve/CVE-2014-1477.html>
<http://support.novell.com/security/cve/CVE-2014-1478.html>
<http://support.novell.com/security/cve/CVE-2014-1479.html>
<http://support.novell.com/security/cve/CVE-2014-1480.html>
<http://support.novell.com/security/cve/CVE-2014-1481.html>
<http://support.novell.com/security/cve/CVE-2014-1482.html>
<http://support.novell.com/security/cve/CVE-2014-1483.html>
<http://support.novell.com/security/cve/CVE-2014-1485.html>
<http://support.novell.com/security/cve/CVE-2014-1486.html>
<http://support.novell.com/security/cve/CVE-2014-1487.html>
<http://support.novell.com/security/cve/CVE-2014-1488.html>
<http://support.novell.com/security/cve/CVE-2014-1490.html>
<http://support.novell.com/security/cve/CVE-2014-1491.html>
<http://support.novell.com/security/cve/CVE-2014-1493.html>
<http://support.novell.com/security/cve/CVE-2014-1494.html>
<http://support.novell.com/security/cve/CVE-2014-1497.html>
<http://support.novell.com/security/cve/CVE-2014-1498.html>
<http://support.novell.com/security/cve/CVE-2014-1499.html>
<http://support.novell.com/security/cve/CVE-2014-1500.html>
<http://support.novell.com/security/cve/CVE-2014-1502.html>
<http://support.novell.com/security/cve/CVE-2014-1504.html>
<http://support.novell.com/security/cve/CVE-2014-1505.html>
<http://support.novell.com/security/cve/CVE-2014-1508.html>
<http://support.novell.com/security/cve/CVE-2014-1509.html>
<http://support.novell.com/security/cve/CVE-2014-1510.html>
<http://support.novell.com/security/cve/CVE-2014-1511.html>
<http://support.novell.com/security/cve/CVE-2014-1512.html>
<http://support.novell.com/security/cve/CVE-2014-1513.html>
<http://support.novell.com/security/cve/CVE-2014-1514.html>
<https://bugzilla.novell.com/861847>
<https://bugzilla.novell.com/862831>
<https://bugzilla.novell.com/865539>
<https://bugzilla.novell.com/868603>
--
To unsubscribe, e-mail: opensuse-security-announce+unsubscribe@opensuse.org
For additional commands, e-mail: opensuse-security-announce+help@opensuse.org

[0](#like "You must be logged-in to vote.")
[0](#dislike "You must be logged-in to vote.")

Reply

[Sign in to reply online](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/S65HS5TZPGO7EQHLA3LOEW5IEBSE7PAC/)
Use email software

[Back to the thread](/archives/list/security-announce%40lists.opensuse.org/thread/S65HS5TZPGO7EQHLA3LOEW5IEBSE7PAC/#S65HS5TZPGO7EQHLA3LOEW5IEBSE7PAC)

[Back to the list](/archives/list/security-announce%40lists.opensuse.org/)

![HyperKitty](/static/hyperkitty/img/logo.png)
Powered by [HyperKitty](http://hyperkitty.readthedocs.org) version 1.3.12.



=== Content from bugzilla.mozilla.org_59640820_20250124_230141.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/944321)
* [XML](/show_bug.cgi?ctype=xml&id=944321)

Closed
[Bug 944321](/show_bug.cgi?id=944321)

Opened 11 years ago
Closed 11 years ago

# --ion-check-range-analysis failure with Float32Array (SIGTRAP)

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

--ion-check-range-analysis failure with Float32Array (SIGTRAP)

## Categories

### (Core :: JavaScript Engine: JIT, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=JavaScript%20Engine%3A%20JIT#JavaScript%20Engine%3A%20JIT)

JavaScript Engine: JIT
▾

Core :: JavaScript Engine: JIT
JavaScript engine's JIT compilers
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine%3A%20JIT&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine%3A%20JIT&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=JavaScript%20Engine%3A%20JIT)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

x86\_64

macOS

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

critical

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla29

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| blocking-b2g | [koi+](/buglist.cgi?f1=cf_blocking_b2g&o1=equals&v1=koi%2B) |
| --- | --- |

| Webcompat Priority | --- |
| --- | --- |
| Webcompat Score | --- |
| Performance Impact | --- |
| a11y-review | --- |
| Accessibility Severity | --- |
| blocking-b2g | koi+ |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox26 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox26&o1=equals&v1=wontfix) |
| firefox27 | [+](/buglist.cgi?f1=cf_tracking_firefox27&o1=equals&v1=%2B) | [verified](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=verified) |
| firefox28 | [+](/buglist.cgi?f1=cf_tracking_firefox28&o1=equals&v1=%2B) | [verified](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=verified) |
| firefox29 | [+](/buglist.cgi?f1=cf_tracking_firefox29&o1=equals&v1=%2B) | [verified](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=verified) |
| firefox-esr24 | --- | [unaffected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=unaffected) |
| b2g18 | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=unaffected) |
| b2g-v1.1hd | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=equals&v1=unaffected) |
| b2g-v1.2 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=fixed) |
| b2g-v1.3 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=fixed) |
| b2g-v1.3T | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=fixed) |
| b2g-v1.4 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=fixed) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox26 |  | wontfix |
| firefox27 | + | verified |
| firefox28 | + | verified |
| firefox29 | + | verified |
| firefox-esr24 |  | unaffected |
| b2g18 |  | unaffected |
| b2g-v1.1hd |  | unaffected |
| b2g-v1.2 |  | fixed |
| b2g-v1.3 |  | fixed |
| b2g-v1.3T |  | fixed |
| b2g-v1.4 |  | fixed |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: gkw, Assigned: sunfish)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/d0f20c3888e5ac206b6ede4d4dc5c2ce?d=mm&size=40)  [sunfish](/user_profile?user_id=468136)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

![](https://secure.gravatar.com/avatar/55857f92ded07119259dc6c1dd386205?d=mm&size=40)  [general](/user_profile?user_id=4729)

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](extensions/Gravatar/web/default.jpg)  [gkw](/user_profile?user_id=132034)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/4fe52ee1503aecf7b6c976b8eb7c1753?d=mm&size=40)  [willyelm](/user_profile?user_id=714609)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

13 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[888109](/show_bug.cgi?id=888109 "RESOLVED FIXED - IonMonkey: Introduce Float32 general optimization")

Dependency [tree](/showdependencytree.cgi?id=944321&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=944321)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[Duplicates:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#duplicates)

[940638](/show_bug.cgi?id=940638 "RESOLVED DUPLICATE - IonMonkey: trap with --ion-check-range-analysis, assignment into Float32Array")

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (4 keywords, Whiteboard: [adv-main27+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[crash](/buglist.cgi?keywords=crash&resolution=---),
[regression](/buglist.cgi?keywords=regression&resolution=---),
[sec-high](/buglist.cgi?keywords=sec-high&resolution=---),
[testcase](/buglist.cgi?keywords=testcase&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[adv-main27+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [cbook](/user_profile?user_id=277293) | [in-testsuite](#c10 "11 years ago") | ? |
| --- | --- | --- |
| [cbook](/user_profile?user_id=277293) | in-testsuite | ? |
| --- | --- | --- |
|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (3 files, 1 obsolete file)

| [stack](/attachment.cgi?id=8339864)  [11 years ago](#c0)  [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)   4.53 KB, text/plain |  | [Details](/attachment.cgi?id=8339864&action=edit) |
| --- | --- | --- |
| [disable-tofloat32-computerange.patch](/attachment.cgi?id=8341115)  [11 years ago](#c3)  [Dan Gohman [:sunfish]](/user_profile?user_id=468136)   649 bytes, patch |  | [Details](/attachment.cgi?id=8341115&action=edit) | [Diff](/attachment.cgi?id=8341115&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=944321&attachment=8341115) |
| [disable-tofloat32-computerange.patch](/attachment.cgi?id=8344610)  [11 years ago](#c7)  [Dan Gohman [:sunfish]](/user_profile?user_id=468136)   729 bytes, patch | bbouvier : [review+](#a1048805_468907 "11 years ago")  abillings : [approval-mozilla-aurora+](#c12 "11 years ago")  abillings : [approval-mozilla-beta+](#c12 "11 years ago")  abillings : [sec-approval+](#a1078269_280903 "11 years ago") | [Details](/attachment.cgi?id=8344610&action=edit) | [Diff](/attachment.cgi?id=8344610&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=944321&attachment=8344610) |
| [disable-tofloat32-computerange-beta.patch](/attachment.cgi?id=8351710)  [11 years ago](#c13)  [Dan Gohman [:sunfish]](/user_profile?user_id=468136)   655 bytes, patch | abillings : [approval-mozilla-beta+](#a2744965_280903 "11 years ago") | [Details](/attachment.cgi?id=8351710&action=edit) | [Diff](/attachment.cgi?id=8351710&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=944321&attachment=8351710) |

Show Obsolete

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=944321#c0)• 11 years ago |
|  | |

Attached file
[stack](attachment.cgi?id=8339864)
— [Details](attachment.cgi?id=8339864&action=edit)

toString = (function() {
function f() {
Float32Array()[6] = 33554433
}
return f
})()
this + Object({
e: this % 1
})
causes a SIGTRAP in js opt shell on m-c changeset 77b5c6edfe96 with --ion-check-range-analysis --ion-eager --ion-gvn=off
My configure flags are:
CC="clang -Qunused-arguments" AR=ar CXX="clang++ -Qunused-arguments" sh ./configure --target=x86\_64-apple-darwin12.5.0 --enable-optimize --disable-debug --enable-profiling --enable-gczeal --enable-debug-symbols --enable-methodjit --enable-type-inference --disable-tests --enable-more-deterministic --with-ccache --enable-threadsafe <other NSPR options>
autoBisect shows this is probably related to the following changeset:
The first bad revision is:
changeset: <http://hg.mozilla.org/mozilla-central/rev/c78a87a9aa66>
user: Nathan Froyd
date: Tue Aug 27 16:32:44 2013 -0400
summary: [Bug 909922](/show_bug.cgi?id=909922 "RESOLVED FIXED - don't pragma pack ipc message headers") - don't pragma pack ipc message headers; r=bent
but I think autoBisect is wrong here.
Adding :sunfish as well, as this seems to involve --ion-check-range-analysis. s-s because SIGTRAPs can be bad.Flags: needinfo?(sunfish)

|  | [Dan Gohman [:sunfish]](/user_profile?user_id=468136)  Assignee |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=944321#c1)• 11 years ago |
|  | |

There is a 33554432 where range analysis expects 33554433. 33554433 rounded to float32 is 33554432.
The SIGTRAP is just --ion-check-range-analysis' way of reporting an error. I should probably convert that to use something like what OsiPointRegisterCheckFailed() does so that it's not as mysterious.
Range analysis errors can theoretically be manipulated into bypassed bounds checks, so security-sensitive is prudent.

|  | [Jesse Ruderman](/user_profile?user_id=11608) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=944321#a163026_11608)• 11 years ago |

Summary: Crash at SIGTRAP involving Float32Array → --ion-check-range-analysis failure with Float32Array

|  | [Jesse Ruderman](/user_profile?user_id=11608) |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=944321#c2)• 11 years ago |
|  | |

Simpler:
./js --ion-check-range-analysis --ion-eager --ion-gvn=off
function f() {
(new Float32Array(1))[0] = 33554433;
}
f();
f();

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=944321#a190687_395101)• 11 years ago |

Summary: --ion-check-range-analysis failure with Float32Array → --ion-check-range-analysis failure with Float32Array (SIGTRAP)

|  | [Dan Gohman [:sunfish]](/user_profile?user_id=468136)  Assignee |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=944321#c3)• 11 years ago |
|  | |

Attached patch

[disable-tofloat32-computerange.patch](attachment.cgi?id=8341115&action=diff) (obsolete)
— [Details](attachment.cgi?id=8341115&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=944321&attachment=8341115)

The attached patch fixes the bug by applying the somewhat heavy hammer of disabling range analysis for MToFloat32, in case that's desired.
Also, this bug is a dup of 940638, which should probably also be security-sensitive (I don't seem to have the ability to change that myself).Flags: needinfo?(sunfish)

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)  Reporter |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=944321#c4)• 11 years ago |
|  | |

> Also, this bug is a dup of 940638, which should probably also be
> security-sensitive (I don't seem to have the ability to change that myself).
Changed. (feel free to dupe as necessary)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=944321#a551098_1689)• 11 years ago |

Blocks: [888109](/show_bug.cgi?id=888109 "RESOLVED FIXED - IonMonkey: Introduce Float32 general optimization")Keywords: [sec-high](/buglist.cgi?keywords=sec-high&resolution=---)

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297) |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=944321#c6)• 11 years ago |
|  | |

sunfish, can we land that patch or a more targeted fix?Flags: needinfo?(sunfish)

|  | [Dan Gohman [:sunfish]](/user_profile?user_id=468136)  Assignee |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=944321#c7)• 11 years ago |
|  | |

Attached patch

[disable-tofloat32-computerange.patch](attachment.cgi?id=8344610&action=diff)
— [Details](attachment.cgi?id=8344610&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=944321&attachment=8344610)

A more targeted fix needs something like [bug 939843](/show_bug.cgi?id=939843 "RESOLVED FIXED - Unify FloatingPoint.h's Float32 / Double operations"), so I'll pursue the simple fix for now. Attached is a refreshed patch.
[Attachment #8341115](/attachment.cgi?id=8341115&action=edit "disable-tofloat32-computerange.patch") -
Attachment is obsolete: true
[Attachment #8344610](/attachment.cgi?id=8344610&action=edit "disable-tofloat32-computerange.patch") -
Flags: review?(benj)Flags: needinfo?(sunfish)

|  | [Benjamin Bouvier [:bbouvier] (inactive)](/user_profile?user_id=468907) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=944321#a1048805_468907)• 11 years ago |

[Attachment #8344610](/attachment.cgi?id=8344610&action=edit "disable-tofloat32-computerange.patch") -
Flags: review?(benj) → review+

|  | [Dan Gohman [:sunfish]](/user_profile?user_id=468136)  Assignee |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=944321#c8)• 11 years ago |
|  | |

Comment on [attachment 8344610](/attachment.cgi?id=8344610 "disable-tofloat32-computerange.patch") [[details]](/attachment.cgi?id=8344610&action=edit "disable-tofloat32-computerange.patch") [[diff]](/attachment.cgi?id=8344610&action=diff "disable-tofloat32-computerange.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=944321&attachment=8344610)
disable-tofloat32-computerange.patch
[Security approval request comment]
How easily could an exploit be constructed based on the patch?
Someone would have to be very familiar with range analysis optimizations to pull this off, but it's presumably possible.
Do comments in the patch, the check-in comment, or tests included in the patch paint a bulls-eye on the security problem?
The patch makes it clear where the bug is, but not how to exploit it.
Which older supported branches are affected by this flaw?
It's in mozilla-release, and probably others. As of this writing any branch which contains MToFloat32::computeRange (in RangeAnalysis.cpp) contains this flaw.
If not all supported branches, which bug introduced the flaw?
[Bug 888109](/show_bug.cgi?id=888109 "RESOLVED FIXED - IonMonkey: Introduce Float32 general optimization").
Do you have backports for the affected branches? If not, how different, hard to create, and risky will they be?
Backports would be trivial to create, and very low-risk.
How likely is this patch to cause regressions; how much testing does it need?
Very unlikely. The patch is a single deleted line, disabling an optimization.
[Attachment #8344610](/attachment.cgi?id=8344610&action=edit "disable-tofloat32-computerange.patch") -
Flags: sec-approval?

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=944321#a1078254_280903)• 11 years ago |

[status-b2g18](/buglist.cgi?f1=cf_status_b2g18&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=unaffected)
[status-b2g-v1.1hd](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=equals&v1=unaffected)
[status-b2g-v1.2](/buglist.cgi?f1=cf_status_b2g_1_2&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=affected)
[status-firefox26](/buglist.cgi?f1=cf_status_firefox26&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_firefox26&o1=equals&v1=wontfix)
[status-firefox27](/buglist.cgi?f1=cf_status_firefox27&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=affected)
[status-firefox28](/buglist.cgi?f1=cf_status_firefox28&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=affected)
[status-firefox29](/buglist.cgi?f1=cf_status_firefox29&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=affected)
[status-firefox-esr24](/buglist.cgi?f1=cf_status_firefox_esr24&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=unaffected)
[tracking-firefox29](/buglist.cgi?f1=cf_tracking_firefox29&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox29&o1=equals&v1=%2B)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=944321#a1078269_280903)• 11 years ago |

[Attachment #8344610](/attachment.cgi?id=8344610&action=edit "disable-tofloat32-computerange.patch") -
Flags: sec-approval? → sec-approval+

|  | [Dan Gohman [:sunfish]](/user_profile?user_id=468136)  Assignee |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=944321#c9)• 11 years ago |
|  | |

<https://hg.mozilla.org/integration/mozilla-inbound/rev/a29676c924d7>

|  | [Carsten Book [:Tomcat]](/user_profile?user_id=277293) |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=944321#c10)• 11 years ago |
|  | |

landed on central <https://hg.mozilla.org/mozilla-central/rev/a29676c924d7>Status: NEW → RESOLVEDClosed: 11 years ago
[status-firefox29](/buglist.cgi?f1=cf_status_firefox29&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=fixed)Flags: in-testsuite?Resolution: --- → FIXEDTarget Milestone: --- → mozilla29

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=944321#c11)• 11 years ago |
|  | |

Dan, can you please nominate this for Aurora/Beta/b2g26 uplift?Assignee: general → sunfishFlags: needinfo?(sunfish)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=944321#a2019112_280903)• 11 years ago |

[tracking-firefox27](/buglist.cgi?f1=cf_tracking_firefox27&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox27&o1=equals&v1=%3F)
[tracking-firefox28](/buglist.cgi?f1=cf_tracking_firefox28&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox28&o1=equals&v1=%3F)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=944321#c12)• 11 years ago |
|  | |

Comment on [attachment 8344610](/attachment.cgi?id=8344610 "disable-tofloat32-computerange.patch") [[details]](/attachment.cgi?id=8344610&action=edit "disable-tofloat32-computerange.patch") [[diff]](/attachment.cgi?id=8344610&action=diff "disable-tofloat32-computerange.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=944321&attachment=8344610)
disable-tofloat32-computerange.patch
[Triage Comment]
[Attachment #8344610](/attachment.cgi?id=8344610&action=edit "disable-tofloat32-computerange.patch") -
Flags: approval-mozilla-beta+
[Attachment #8344610](/attachment.cgi?id=8344610&action=edit "disable-tofloat32-computerange.patch") -
Flags: approval-mozilla-aurora+

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=944321#a2019166_280903)• 11 years ago |

[tracking-firefox27](/buglist.cgi?f1=cf_tracking_firefox27&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox27&o1=equals&v1=%3F) → [+](/buglist.cgi?f1=cf_tracking_firefox27&o1=equals&v1=%2B)
[tracking-firefox28](/buglist.cgi?f1=cf_tracking_firefox28&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox28&o1=equals&v1=%3F) → [+](/buglist.cgi?f1=cf_tracking_firefox28&o1=equals&v1=%2B)

|  | [Dan Gohman [:sunfish]](/user_profile?user_id=468136)  Assignee |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=944321#c13)• 11 years ago |
|  | |

Attached patch

[disable-tofloat32-computerange-beta.patch](attachment.cgi?id=8351710&action=diff)
— [Details](attachment.cgi?id=8351710&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=944321&attachment=8351710)

The original patch seems to have acquired aurora approval already. Attached is a version of the patch rebased to apply cleanly on mozilla-beta and b2g26, and corresponding nominations. Here's the approval form:
NOTE: This flag is now for security issues only. Please see <https://wiki.mozilla.org/Release_Management/B2G_Landing> to better understand the B2G approval process and landings.
[Approval Request Comment]
Bug caused by (feature/regressing bug #): [bug 888109](/show_bug.cgi?id=888109 "RESOLVED FIXED - IonMonkey: Introduce Float32 general optimization")
User impact if declined: security-relevant issue goes unfixed
Testing completed: On mozilla-central for weeks
Risk to taking this patch (and alternatives if risky): very low
String or UUID changes made by this patch: none
[Attachment #8351710](/attachment.cgi?id=8351710&action=edit "disable-tofloat32-computerange-beta.patch") -
Flags: approval-mozilla-beta?
[Attachment #8351710](/attachment.cgi?id=8351710&action=edit "disable-tofloat32-computerange-beta.patch") -
Flags: approval-mozilla-b2g26?Flags: needinfo?(sunfish)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=944321#a2744965_280903)• 11 years ago |

[Attachment #8351710](/attachment.cgi?id=8351710&action=edit "disable-tofloat32-computerange-beta.patch") -
Flags: approval-mozilla-beta? → approval-mozilla-beta+

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=944321#c14)• 11 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-aurora/rev/6c7f10c4e899>
<https://hg.mozilla.org/releases/mozilla-beta/rev/74fb6443cd2d>
[status-b2g-v1.3](/buglist.cgi?f1=cf_status_b2g_1_3&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=fixed)
[status-firefox27](/buglist.cgi?f1=cf_status_firefox27&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=fixed)
[status-firefox28](/buglist.cgi?f1=cf_status_firefox28&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=fixed)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=944321#a3051308_75935)• 11 years ago |

blocking-b2g: --- → koi?

|  | [Jason Smith [:jsmith]](/user_profile?user_id=432443) |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=944321#c15)• 11 years ago |
|  | |

koi+ for sec-high bugblocking-b2g: koi? → koi+

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=944321#a3066490_75935)• 11 years ago |

[Attachment #8351710](/attachment.cgi?id=8351710&action=edit "disable-tofloat32-computerange-beta.patch") -
Flags: approval-mozilla-b2g26?

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=944321#c16)• 11 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-b2g26_v1_2/rev/8cafa32a4515>
[status-b2g-v1.2](/buglist.cgi?f1=cf_status_b2g_1_2&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=fixed)

|  | [Matt Wobensmith [:mwobensmith][:matt:]](/user_profile?user_id=452604) |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=944321#c17)• 11 years ago |
|  | |

Confirmed SIGTRAP on m-c, 2013-11-28.
Verified fixed on beta, 2014-01-20.
Verified fixed on Aurora, 2014-01-21.
Verified fixed on m-c, 2014-01-21.
[status-firefox27](/buglist.cgi?f1=cf_status_firefox27&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=verified)
[status-firefox28](/buglist.cgi?f1=cf_status_firefox28&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=verified)
[status-firefox29](/buglist.cgi?f1=cf_status_firefox29&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=verified)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=944321#a4788544_280903)• 11 years ago |

Whiteboard: [adv-main27+]

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=944321#a13949707_75935)• 11 years ago |

[status-b2g-v1.3T](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=fixed)
[status-b2g-v1.4](/buglist.cgi?f1=cf_status_b2g_1_4&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=fixed)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=944321#a39293477_1689)• 10 years ago |

Group: core-security
You need to [log in](/show_bug.cgi?id=944321&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from secunia.com_aa4ec6d1_20250124_230059.html ===


[Skip to main content](#main-content)
[![Home](/themes/custom/flexera/images/logo.svg)](https://www.flexera.com/)

[![Home](/themes/custom/flexera/images/logo.svg)](https://www.flexera.com/)

Search

## Main navigation

* Solutions
  + Column 1
    - Business challenge
      * [Software renewals and audits](https://www.flexera.com/solutions/software-renewals-audits)
      * [Software license management and optimization](https://www.flexera.com/solutions/software-usage-costs)
      * [SaaS spend management](https://www.flexera.com/solutions/saas-spend)
      * [Cloud cost management](https://www.flexera.com/solutions/cloud-cost)
      * [IT asset lifecycle management](https://www.flexera.com/solutions/it-asset-lifecycle)
      * [CMDB data quality](https://www.flexera.com/solutions/cmdb-data-quality)
      * [Accurate IT inventory](https://www.flexera.com/solutions/it-inventory)
      * [Security and regulatory risk management](https://www.flexera.com/solutions/it-security-regulatory-risk)
      * [Sustainable IT](https://www.flexera.com/solutions/sustainable-it)
      * [AI-powered transformation](https://www.flexera.com/solutions/ai-powered-transformation)
      * [Public sector](https://www.flexera.com/solutions/public-sector)
  + Column 2
    - Spend management by vendor
      * [IBM](https://www.flexera.com/solutions/vendor/ibm)
      * [Oracle](https://www.flexera.com/solutions/vendor/oracle)
      * [Microsoft](https://www.flexera.com/solutions/vendor/microsoft)
      * [SAP](https://www.flexera.com/solutions/vendor/sap)
      * [VMware](https://www.flexera.com/solutions/vendor/vmware)
      * [ServiceNow](https://www.flexera.com/solutions/vendor/servicenow)
      * [AWS](https://www.flexera.com/solutions/vendor/aws)
      * [Salesforce](https://www.flexera.com/solutions/vendor/salesforce)
      * [BMC](https://www.flexera.com/solutions/cmdb-data-quality/bmc)
      * [Adobe](https://www.flexera.com/solutions/vendor/adobe)

  ### Achieve more through a united FinOps and ITAM function

  The future is hybrid. Break down the walls between ITAM and FinOps to drive more revenue, more customer growth and more innovation.

  [Discover More](https://www.flexera.com/resources/hybrid-itam-finops)
* Products
  + Column 1
    - [Flexera One](https://www.flexera.com/products/flexera-one)
      * [IT Visibility](https://www.flexera.com/products/flexera-one/it-visibility)
      * [ITAM](https://www.flexera.com/products/flexera-one/it-asset-management)
      * [SaaS Management](https://www.flexera.com/products/flexera-one/saas-management)
      * [FinOps](https://www.flexera.com/products/flexera-one/finops)
      * [Technology Intelligence Platform](https://www.flexera.com/products/flexera-one/technology-intelligence-platform)
  + Column 2
    - [Snow Atlas](https://www.flexera.com/products/snow-atlas)
      * [Snow Spend Optimizer](https://www.flexera.com/products/snow-atlas/snow-spend-optimizer)
      * [Snow SaaS Management](https://www.flexera.com/products/snow-atlas/snow-saas-management)
  + Column 3
    - Hide group
      * [Security](https://www.flexera.com/products/security)
      * [Application Readiness](https://www.flexera.com/products/adminstudio)
      * [All products](https://www.flexera.com/products)
      * [All Snow products](https://www.flexera.com/products/snow)
      * [Integrations](https://www.flexera.com/products/integrations)

  ### Flexera 2024 State of the Cloud Report

  What do transformative initiatives such as GenAI, machine learning and sustainability mean for the cloud? Check out the 2024 State of the Cloud Report to find the answer as well as all the latest cloud computing trends.

  [View Report](https://info.flexera.com/CM-REPORT-State-of-the-Cloud)
* Success
  + Column 1
    - [Customer success](https://www.flexera.com/customer-success)
      * Support
        + [Flexera support portal](https://community.flexera.com/s/support-hub)
        + [Flexera product documentation](https://docs.flexera.com)
        + [Snow product documentation](https://docs.snowsoftware.io/)
      * Services and training
        + [Services](https://www.flexera.com/customer-success/services)
        + [Training](https://www.flexera.com/customer-success/training)
  + Column 2
    - Hide group
      * [Technology Intelligence Awards](https://www.flexera.com/customer-success/awards)
      * [Flexera community](https://community.flexera.com/s/)

  ### Insights from Gartner®

  Find a curated series of actionable and objective insights for IT executives and their teams. Get expert insights from valued analysts, courtesy of Flexera.

  [Discover More](https://www.flexera.com/resources/gartner-analyst-research)
* Resources
  + Column 1
    - [Resources](https://www.flexera.com/resources)
      * [Webinars](https://www.flexera.com/resources?type%5Bwebinar%5D=webinar)
      * [Videos](https://www.flexera.com/resources?type%5Bvideo%5D=video)
      * [Datasheets](https://www.flexera.com/resources?type%5Bdatasheet%5D=datasheet)
      * [White papers & reports](https://www.flexera.com/resources?type%5Bwhite-paper-industry-report%5D=white-paper-industry-report)
  + Column 2
    - Hide group
      * [Blog](/blog/)
      * [Case studies](https://www.flexera.com/resources/case-studies)
      * [Events](https://www.flexera.com/resources?type%5Bevent%5D=event)
      * [Analyst Research](https://www.flexera.com/resources/gartner-analyst-research)
      * [Glossary](https://www.flexera.com/resources/glossary)
      * [Demos & trials](https://www.flexera.com/resources?type%5Bdemo-trials%5D=demo-trials)
      * [Business value calculator](https://www.flexera.com/resources/business-value-calculator)

  ### Flexera 2025 IT Priorities Report

  Insights from Flexera’s 2025 IT Priorities Report highlight what’s top of mind for IT decision makers in the year ahead. Discover the challenges, priorities and opportunities that will shape the future IT landscape.

  [View Report](https://info.flexera.com/ITV-REPORT-IT-Priorities)
* About
  + Column 1
    - [Company](https://www.flexera.com/about-us)
      * [About](https://www.flexera.com/about-us)
      * [Careers](https://www.flexera.com/about-us/careers)
      * [Contact](https://www.flexera.com/about-us/contact-us)
      * [Leadership](https://www.flexera.com/about-us/leadership)
    - [Partners](https://www.flexera.com/about-us/partners)
      * [Partner program](https://www.flexera.com/about-us/partners/partner-program)
      * [Partner directory](https://www.flexera.com/about-us/partners/directory)
  + Column 2
    - [Press center](https://www.flexera.com/about-us/press-center)
      * [Press releases](https://www.flexera.com/about-us/all-press-releases)
      * [Awards](https://www.flexera.com/about-us/press-center#awards)
      * [Articles](https://www.flexera.com/about-us/all-articles)
    - Hide group
      * Social responsibility
        + [ESG](https://www.flexera.com/about-us/environmental-social-governance)
        + [Diversity](https://www.flexera.com/about-us/diversity)

  ### More value with technology intelligence

  The unparalleled synergy of Flexera and Snow provides the Technology Intelligence you need for more efficiency, insight and governance than ever before.

  [Discover More](https://www.flexera.com/more-value-with-technology-intelligence)

Search

en

* [English](https://www.flexera.com/products/security/software-vulnerability-research/secunia-research?referrer=secunia)
* [Deutsch](https://www.flexera.de/products/security/software-vulnerability-research/secunia-research?referrer=secunia)

## External Links

* External Links
  + [Community](https://community.flexera.com/)
  + [Product Access](https://app.flexera.com/login)
  + [Partner Portal](https://flexera.channeltivity.com/Login)

[Book a demo](/about-us/contact-us?C_Interest1=sales)

# Secunia Research

## The world’s best vulnerability intelligence

The Secunia Research team from Flexera provides the most accurate and reliable source of vulnerability intelligence.

[Contact Us](https://www.flexera.com/about-us/contact-us?C_Interest1=sales&C_SolutionInterest=SVM)
Watch video (0:29)

Related links

* [Anatomy of a security advisory](https://www.flexera.com/resources/infographics/anatomy-of-a-security-advisory)
* [Software Vulnerability Research](https://www.flexera.com/products/software-vulnerability-research)
* [Software Vulnerability Manager](/products/software-vulnerability-manager)
* [Security advisories from Secunia Research](https://www.flexera.com/products/security/software-vulnerability-advisories)
* [Report a vulnerability](https://www.flexera.com/about-us/contact-us/report-vulnerability)

 ![Secunia Research](/sites/default/files/2022-04/hero-secunia-research-bg.jpg)

Featured Details

## Multiple ways to consume Secunia Research

Secunia delivers software security research that provides reliable, curated and actionable vulnerability intelligence. Organizations can expect to receive standardized, validated and enriched vulnerability research on a specific version of a software product. Secunia Research supports four solutions:

![Software Vulnerability Research](/sites/default/files/2022-04/icon-secunia-research-svr.svg)

### [Software Vulnerability Research](https://www.flexera.com/products/software-vulnerability-research)

Software Vulnerability Research utilizes Secunia Research to drive awareness of vulnerabilities matching your specified criteria

[Learn More](https://www.flexera.com/products/software-vulnerability-research)

![Software Vulnerability Manager](/sites/default/files/2022-04/icon-secunia-research-svm.svg)

### [Software Vulnerability Manager](/products/software-vulnerability-manager)

Software Vulnerability Manager uses Secunia Research data to identify, prioritize and patch known vulnerable software detected in your environment

[Learn More](/products/software-vulnerability-manager)

![Data Platform](/sites/default/files/2022-04/icon-secunia-research-dp.svg)

### [Data Platform](https://www.flexera.com/products/data-platform)

Data Platform leverages Secunia Research to provide high-level insights based on major or minor versions of software in your normalized inventory

[Learn More](https://www.flexera.com/products/data-platform)

![Flexera One](/sites/default/files/2022-04/icon-secunia-research-flexera-one.svg)

### [Flexera One](/flexera-one)

Flexera One utilizes Secunia Research (alongside public NVD data) to provide more granular matching of build-level versions of software in your normalized inventory within its IT Asset Management and IT Visibility solutions

[Learn More](/flexera-one)

How it works

## Accurate, reliable vulnerability insights at your fingertips

The Secunia Research team from Flexera is comprised of several security specialists who conduct vulnerability research in various products in addition to testing, verifying and validating public vulnerability reports. Since its inception in 2002, the goal of the Secunia Research team is to provide the most accurate and reliable source of vulnerability intelligence.

Delivering the world’s best vulnerability intelligence requires skill and passion. Team members continually develop their skills exploring various high-profile closed and open-source software using a variety of approaches, focusing chiefly on thorough code audits and binary analysis. The team has received industry recognition, including naming members to [Microsoft’s Most Valuable Security Researchers](https://msrc-blog.microsoft.com/2019/08/07/announcing-2019-msrc-most-valuable-security-researchers/) list.

Secunia researchers discover hard-to-find vulnerabilities that aren’t normally identified with techniques such as fuzzing, and the results have been impressive. Members of the Secunia Research team have discovered critical vulnerabilities in products from vendors including Microsoft, Symantec, IBM, Adobe, RealNetworks, Trend Micro, HP, Blue Coat, Samba, CA, Mozilla and Apple.

The team produces invaluable security advisories based on research of the vulnerabilities affecting any given software update. Sometimes a single update can address multiple vulnerabilities of varying criticalities and threats; but these advisories aggregate and distill findings down to a single advisory perfect for the prioritization of patching efforts within [Software Vulnerability Manager](/products/software-vulnerability-manager). Criticality scores are consistently applied along with details around attack vector and other valuable details within [Software Vulnerability Research](/products/software-vulnerability-research/secunia-research). Illegitimate vulnerability reports are also investigated and rejected so you can focus only on what truly matters.

Informing IT, Transforming IT

## Industry insights to help keep you informed

[#### Webinar

### Stay Ahead of Cyber Threats: Flexera's Latest Vulnerability Insights

Join us for this session where we'll explore the latest findings from the Flexera Monthly Vulnerability Insights Report.](https://info.flexera.com/SVM-WBNR-Vulnerability-Insights-Roundtable)

[#### Webinar

### Dive deeper into the Flexera Annual Vulnerability Insights

We'll explore the key findings from the Flexera Annual Vulnerability Insights Report. Learn about the latest cybersecurity trends, the most targeted industries, the types of vulnerabilities, plus management and mitigation strategies.](https://info.flexera.com/SVM-WBNR-Flexera-Annual-Vulnerability-Insights?lead_source=Website%20Visitor&id=Flexera.com-Resources)

#### Video

### Close the Risk Window with Software Vulnerability Manager

Stop reacting. Gain control. Stay secure. Build a more effective risk mitigation process leveraging Secunia Research vulnerability intelligence and the largest repository of third-party patch data in the industry.

Remote video URL

[#### Trial

### Software Vulnerability Manager Assessment free trial

Get access to the complete set of modules of Software Vulnerability Manager: Research, Assessment and Patching](https://info.flexera.com/SVM-EVAL-Software-Vulnerability-Manager)

[#### Datasheet

### Protect your ServiceNow® investment with the highest quality data

IT Visibility offers certified ServiceNow integrations that accelerate platform expansion, improve ROI and increase efficiencies across ITIL processes by delivering clean software and hardware asset data directly.](/sites/default/files/datasheet-itv-maximize-servicenow-investment.pdf)

[#### Blog

### Avoid missing crucial vulnerability intelligence amid NVD backlog

Recent developments regarding the National Vulnerability Database (NVD) have some technology leaders on edge. Since February, the U.S. National Institute of Standards and Technology (NIST) has almost completely stopped enriching software vulnerabi...](https://www.flexera.com/blog/vulnerability-management/avoid-missing-crucial-vulnerability-intelligence-amid-nvd-backlog/)

[View all resources](https://www.flexera.com/resources?category%5Bsoftware-vulnerability-management%5D=software-vulnerability-management)

## Footer Menu

* Column
  + Business challenge
    - [Software renewals and audits](https://www.flexera.com/solutions/software-renewals-audits)
    - [Software license management and optimization](https://www.flexera.com/solutions/software-usage-costs)
    - [SaaS spend management](https://www.flexera.com/solutions/saas-spend)
    - [Cloud cost management](https://www.flexera.com/solutions/cloud-cost)
    - [IT asset lifecycle management](https://www.flexera.com/solutions/it-asset-lifecycle)
    - [CMDB data quality](https://www.flexera.com/solutions/cmdb-data-quality)
    - [Accurate IT inventory](https://www.flexera.com/solutions/it-inventory)
    - [Security and regulatory risk management](https://www.flexera.com/solutions/it-security-regulatory-risk)
    - [Sustainable IT](https://www.flexera.com/solutions/sustainable-it)
    - [AI-powered transformation](https://www.flexera.com/solutions/ai-powered-transformation)
    - [Public sector](https://www.flexera.com/solutions/public-sector)
* Column
  + Spend management by vendor
    - [IBM](https://www.flexera.com/solutions/vendor/ibm)
    - [Oracle](https://www.flexera.com/solutions/vendor/oracle)
    - [Microsoft](https://www.flexera.com/solutions/vendor/microsoft)
    - [SAP](https://www.flexera.com/solutions/vendor/sap)
    - [VMware](https://www.flexera.com/solutions/vendor/vmware)
    - [ServiceNow](https://www.flexera.com/solutions/vendor/servicenow)
    - [AWS](https://www.flexera.com/solutions/vendor/aws)
    - [Salesforce](https://www.flexera.com/solutions/vendor/salesforce)
    - [BMC](https://www.flexera.com/solutions/cmdb-data-quality/bmc)
    - [Adobe](https://www.flexera.com/solutions/vendor/adobe)
* Column
  + Products
    - [Flexera One](https://www.flexera.com/products/flexera-one)
    - [Snow Atlas](https://www.flexera.com/products/snow-atlas)
    - [Security](https://www.flexera.com/products/security)
    - [Application Readiness](https://www.flexera.com/products/adminstudio)
    - [All products](https://www.flexera.com/products)
    - [All Snow products](https://www.flexera.com/products/snow)
    - [Integrations](https://www.flexera.com/products/integrations)
* Column
  + Company
    - [About](https://www.flexera.com/about-us)
    - [Careers](https://www.flexera.com/about-us/careers)
    - [Leadership](https://www.flexera.com/about-us/leadership)
    - [Contact us](https://www.flexera.com/about-us/contact-us)
    - [Media / press center](https://www.flexera.com/about-us/press-center)
    - [Revenera.com](https://www.revenera.com)

 +1.800.374.4353

en

* [English](https://www.flexera.com/products/security/software-vulnerability-research/secunia-research?referrer=secunia)
* [Deutsch](https://www.flexera.de/products/security/software-vulnerability-research/secunia-research?referrer=secunia)

 [![Home](/themes/custom/flexera/images/logo.svg)](https://www.flexera.com/)

© 2025 Flexera. All Rights Reserved.

## Footer

* [Privacy Policy](https://www.flexera.com/legal/privacy-policy)
* [Terms and conditions](https://www.flexera.com/legal)
* [Contact Us](https://www.flexera.com/about-us/contact-us)
* [Impressum](https://www.flexera.com/about-us/impressum)
* [Site Map](https://www.flexera.com/sitemap)

#####

×

...



=== Content from bugzilla.mozilla.org_ad7a8950_20250124_230146.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/945585)
* [XML](/show_bug.cgi?ctype=xml&id=945585)

Closed
[Bug 945585](/show_bug.cgi?id=945585)

Opened 11 years ago
Closed 11 years ago

# Crash involving nsNodeUtils::LastRelease(), possibly due to running it twice

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

Crash involving nsNodeUtils::LastRelease(), possibly due to running it twice

## Categories

### (Core :: DOM: Core & HTML, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=DOM%3A%20Core%20%26%20HTML#DOM%3A%20Core%20%26%20HTML)

DOM: Core & HTML
▾

Core :: DOM: Core & HTML
Issues in DOM tree [https://dom.spec.whatwg.org](https://dom.spec.whatwg.org/) & HTML [https://html.spec.whatwg.org](https://html.spec.whatwg.org/) that do not fit into any other DOM or HTML component or which span multiple DOM or HTML components.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=DOM%3A%20Core%20%26%20HTML&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=DOM%3A%20Core%20%26%20HTML&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=DOM%3A%20Core%20%26%20HTML)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

unspecified

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

All

All

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

normal

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla29

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| blocking-b2g | [koi+](/buglist.cgi?f1=cf_blocking_b2g&o1=equals&v1=koi%2B) |
| --- | --- |

| Webcompat Priority | --- |
| --- | --- |
| Accessibility Severity | --- |
| a11y-review | --- |
| Performance Impact | --- |
| Webcompat Score | --- |
| blocking-b2g | koi+ |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox25 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox25&o1=equals&v1=wontfix) |
| firefox26 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox26&o1=equals&v1=wontfix) |
| firefox27 | [+](/buglist.cgi?f1=cf_tracking_firefox27&o1=equals&v1=%2B) | [verified](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=verified) |
| firefox28 | [+](/buglist.cgi?f1=cf_tracking_firefox28&o1=equals&v1=%2B) | [verified](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=verified) |
| firefox29 | [+](/buglist.cgi?f1=cf_tracking_firefox29&o1=equals&v1=%2B) | [verified](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=verified) |
| firefox-esr24 | --- | [unaffected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=unaffected) |
| b2g18 | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=unaffected) |
| b2g-v1.1hd | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=equals&v1=unaffected) |
| b2g-v1.2 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=fixed) |
| b2g-v1.3 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=fixed) |
| b2g-v1.3T | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=fixed) |
| b2g-v1.4 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=fixed) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox25 |  | wontfix |
| firefox26 |  | wontfix |
| firefox27 | + | verified |
| firefox28 | + | verified |
| firefox29 | + | verified |
| firefox-esr24 |  | unaffected |
| b2g18 |  | unaffected |
| b2g-v1.1hd |  | unaffected |
| b2g-v1.2 |  | fixed |
| b2g-v1.3 |  | fixed |
| b2g-v1.3T |  | fixed |
| b2g-v1.4 |  | fixed |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: n.nethercote, Assigned: smaug)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/056757eff6ed7c8ec26f61e3bf7695fe?d=mm&size=40)  [smaug](/user_profile?user_id=39966)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](extensions/Gravatar/web/default.jpg)  [n.nethercote](/user_profile?user_id=334849)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/5111b810214a00377104f5ad3efefa26?d=mm&size=40)  [sefeng](/user_profile?user_id=625922)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

13 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

---

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Keywords: csectype-uaf, sec-critical, Whiteboard: [adv-main27+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[csectype-uaf](/buglist.cgi?keywords=csectype-uaf&resolution=---),
[sec-critical](/buglist.cgi?keywords=sec-critical&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[adv-main27+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | in-testsuite |  |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (3 files)

| [Valgrind output](/attachment.cgi?id=8341522)  [11 years ago](#c1)  [Nicholas Nethercote [inactive]](/user_profile?user_id=334849)   30.07 KB, text/plain |  | [Details](/attachment.cgi?id=8341522&action=edit) |
| --- | --- | --- |
| [doc\_release.diff](/attachment.cgi?id=8341623)  [11 years ago](#c3)  [Olli Pettay [:smaug][bugs@pettay.fi]](/user_profile?user_id=39966)   1.14 KB, patch | mccr8 : [review+](#c4 "11 years ago") | [Details](/attachment.cgi?id=8341623&action=edit) | [Diff](/attachment.cgi?id=8341623&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=945585&attachment=8341623) |
| [removed assert](/attachment.cgi?id=8341686)  [11 years ago](#c5)  [Olli Pettay [:smaug][bugs@pettay.fi]](/user_profile?user_id=39966)   1.14 KB, patch | bajaj : [approval-mozilla-aurora+](#a2648058_448925 "11 years ago")  bajaj : [approval-mozilla-beta+](#a2648058_448925 "11 years ago")  abillings : [sec-approval+](#c12 "11 years ago") | [Details](/attachment.cgi?id=8341686&action=edit) | [Diff](/attachment.cgi?id=8341686&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=945585&attachment=8341686) |

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Nicholas Nethercote [inactive]](/user_profile?user_id=334849)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=945585#c0)• 11 years ago |
|  | |

A user reported frequent crashes. He provided a test case which he requested not be made public, but I can email anyone the details. I've given them to bz.
Stack at crash time:
#0 0x000000000040fdee in jemalloc\_crash ()
at ../../../memory/mozjemalloc/jemalloc.c:1592
#1 0x000000000040e916 in arena\_dalloc\_small (chunk=<optimised out>,
arena=<optimised out>, ptr=<optimised out>, mapelm=<optimised out>)
at ../../../memory/mozjemalloc/jemalloc.c:4610
#2 arena\_dalloc (ptr=<optimised out>, offset=<optimised out>)
at ../../../memory/mozjemalloc/jemalloc.c:4678
#3 0x00007ffff2f99b19 in nsNodeUtils::LastRelease (aNode=0x7fffbe407000)
at ../../../../content/base/src/nsNodeUtils.cpp:193
#4 0x00007ffff2f55cc4 in nsDocument::Release (this=0x7fffbe407000)
at ../../../../content/base/src/nsDocument.cpp:1621
#5 0x00007ffff317a024 in ~nsCOMPtr\_base (this=<optimised out>)
at ../../../../dist/include/nsCOMPtr.h:430
#6 ~nsCOMPtr (this=<optimised out>)
at ../../../../dist/include/nsCOMPtr.h:469
#7 ~nsRefPtr (this=<optimised out>, this=<optimised out>,
this=<optimised out>, this=<optimised out>, this=<optimised out>)
at ../../../../dist/include/nsCOMPtr.h:469
#8 TX\_CompileStylesheet (aNode=<optimised out>, aProcessor=<optimised out>,
aCallerPrincipal=0x0, aStylesheet=0x7fffbe6944f0)
at ../../../../../content/xslt/src/xslt/txMozillaStylesheetCompiler.cpp:744
#9 0x00007ffff317f2bf in txMozillaXSLTProcessor::NodeWillBeDestroyed (
this=0x7fffbe6944c0, aNode=0x100000)
at ../../../../../content/xslt/src/xslt/txMozillaXSLTProcessor.cpp:1199
#10 0x00007ffff2f99aee in nsNodeUtils::LastRelease (aNode=0x7fffbe407000)
at ../../../../content/base/src/nsNodeUtils.cpp:188
#11 0x00007ffff2f55cc4 in nsDocument::Release (this=0x7fffbe407000)
at ../../../../content/base/src/nsDocument.cpp:1621
#12 0x00007ffff3b82775 in ReleaseSliceNow (aSlice=<optimised out>,
aData=0x7fffbe2a4798)
at ../../../xpcom/base/CycleCollectedJSRuntime.cpp:1064
#13 0x00007ffff3b82a06 in mozilla::IncrementalFinalizeRunnable::ReleaseNow (
this=0x7fffbe2a4780, aLimited=true)
at ../../../xpcom/base/CycleCollectedJSRuntime.cpp:1126
#14 0x00007ffff3b82b1f in mozilla::IncrementalFinalizeRunnable::Run (
this=0x7fffbe2a4780)
at ../../../xpcom/base/CycleCollectedJSRuntime.cpp:1159
#15 0x00007ffff3b7e8ec in nsThread::ProcessNextEvent (this=0x7ffff6c27f20,
mayWait=<optimised out>, result=0x7fffffff6dc0)
at ../../../xpcom/threads/nsThread.cpp:622
#16 0x00007ffff3b4b0e8 in NS\_ProcessNextEvent (thread=<optimised out>,
mayWait=true) at ../../../xpcom/glue/nsThreadUtils.cpp:238
#17 0x00007ffff2fc142b in nsXMLHttpRequest::Send (this=0x7fffc405ac00,
aVariant=<optimised out>, aBody=...)
at ../../../../content/base/src/nsXMLHttpRequest.cpp:2915
#18 0x00007ffff3a855f7 in Nullable (aBody=..., this=<optimised out>,
this=<optimised out>, this=<optimised out>, aValue=...)
at ../../../content/base/src/nsXMLHttpRequest.h:350
#19 Send (this=<optimised out>, rv=<optimised out>, this=<optimised out>,
aBody=...) at ../../../content/base/src/nsXMLHttpRequest.h:354
jemalloc is asserting; it looks like a double-free or use-after-free.

|  | [Nicholas Nethercote [inactive]](/user_profile?user_id=334849)  Reporter |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=945585#c1)• 11 years ago |
|  | |

Attached file
[Valgrind output](attachment.cgi?id=8341522)
— [Details](attachment.cgi?id=8341522&action=edit)

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209) |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=945585#c2)• 11 years ago |
|  | |

In particular, double-LastRelease on the document?

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=945585#a754_406194)• 11 years ago |

Keywords: [csectype-uaf](/buglist.cgi?keywords=csectype-uaf&resolution=---),
[sec-critical](/buglist.cgi?keywords=sec-critical&resolution=---)

|  | [Olli Pettay [:smaug][bugs@pettay.fi]](/user_profile?user_id=39966)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=945585#a20026_39966)• 11 years ago |

Assignee: nobody → bugs

|  | [Olli Pettay [:smaug][bugs@pettay.fi]](/user_profile?user_id=39966)  Assignee |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=945585#c3)• 11 years ago |
|  | |

Attached patch

[doc\_release.diff](attachment.cgi?id=8341623&action=diff)
— [Details](attachment.cgi?id=8341623&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=945585&attachment=8341623)

Would like to see the testcase ofc, but this makes document's Release work the
way it works with other nodes.
[Attachment #8341623](/attachment.cgi?id=8341623&action=edit "doc_release.diff") -
Flags: review?(continuation)

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=945585#c4)• 11 years ago |
|  | |

Comment on [attachment 8341623](/attachment.cgi?id=8341623 "doc_release.diff") [[details]](/attachment.cgi?id=8341623&action=edit "doc_release.diff") [[diff]](/attachment.cgi?id=8341623&action=diff "doc_release.diff") [[review]](/page.cgi?id=splinter.html&ignore=&bug=945585&attachment=8341623)
doc\_release.diff
Review of [attachment 8341623](/attachment.cgi?id=8341623 "doc_release.diff") [[details]](/attachment.cgi?id=8341623&action=edit "doc_release.diff") [[diff]](/attachment.cgi?id=8341623&action=diff "doc_release.diff") [[review]](/page.cgi?id=splinter.html&ignore=&bug=945585&attachment=8341623):
-----------------------------------------------------------------
Thanks Nick and Olli for looking into this!
I sent Olli the test case via mail.
::: content/base/src/nsDocument.cpp
@@ +1647,5 @@
> mNeedsReleaseAfterStackRefCntRelease = true;
> NS\_ADDREF\_THIS();
> return mRefCnt.get();
> }
> NS\_ASSERT\_OWNINGTHREAD(nsDocument);
While you are here, you could delete this second assert that looks redundant.
[Attachment #8341623](/attachment.cgi?id=8341623&action=edit "doc_release.diff") -
Flags: review?(continuation) → review+

|  | [Olli Pettay [:smaug][bugs@pettay.fi]](/user_profile?user_id=39966)  Assignee |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=945585#c5)• 11 years ago |
|  | |

Attached patch

[removed assert](attachment.cgi?id=8341686&action=diff)
— [Details](attachment.cgi?id=8341686&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=945585&attachment=8341686)

Still testing...

|  | [Olli Pettay [:smaug][bugs@pettay.fi]](/user_profile?user_id=39966)  Assignee |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=945585#c6)• 11 years ago |
|  | |

So far got 3 fatal assertions on debug build without the patch and none with the patch.
Now testing opt builds.

|  | [Olli Pettay [:smaug][bugs@pettay.fi]](/user_profile?user_id=39966)  Assignee |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=945585#c7)• 11 years ago |
|  | |

opt build without patch crashes, with doesn't.

|  | [Olli Pettay [:smaug][bugs@pettay.fi]](/user_profile?user_id=39966)  Assignee |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=945585#c8)• 11 years ago |
|  | |

Comment on [attachment 8341686](/attachment.cgi?id=8341686 "removed assert") [[details]](/attachment.cgi?id=8341686&action=edit "removed assert") [[diff]](/attachment.cgi?id=8341686&action=diff "removed assert") [[review]](/page.cgi?id=splinter.html&ignore=&bug=945585&attachment=8341686)
removed assert
[Security approval request comment]
How easily could an exploit be constructed based on the patch?
I'd say not easily
Do comments in the patch, the check-in comment, or tests included in the patch paint a bulls-eye on the security problem?
Comment could be to stabilize refcnt during shutdown
Which older supported branches are affected by this flaw?
25+
If not all supported branches, which bug introduced the flaw?
[Bug 789919](/show_bug.cgi?id=789919 "RESOLVED FIXED - Investigate if refcnt of cycle collectable objects could be size_t-2 so that 2 bits could be used for flagging whether the object is in purple buffer and whether it is actually purple")
Do you have backports for the affected branches? If not, how different, hard to create, and risky will they be?
The same patch applies on beta/aurora/nightly
How likely is this patch to cause regressions; how much testing does it need?
Should be quite safe
[Approval Request Comment]
Bug caused by (feature/regressing bug #):
[Bug 789919](/show_bug.cgi?id=789919 "RESOLVED FIXED - Investigate if refcnt of cycle collectable objects could be size_t-2 so that 2 bits could be used for flagging whether the object is in purple buffer and whether it is actually purple")
User impact if declined:
crashes
Testing completed (on m-c, etc.):
NA
Risk to taking this patch (and alternatives if risky):
Should be quite safe. Adds stabilizing to document's Release. Similar to what it had >=24
String or IDL/UUID changes made by this patch:
NA
[Attachment #8341686](/attachment.cgi?id=8341686&action=edit "removed assert") -
Flags: sec-approval?
[Attachment #8341686](/attachment.cgi?id=8341686&action=edit "removed assert") -
Flags: approval-mozilla-beta?
[Attachment #8341686](/attachment.cgi?id=8341686&action=edit "removed assert") -
Flags: approval-mozilla-aurora?

|  | [(no longer active)](/user_profile?user_id=251051) |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=945585#c9)• 11 years ago |
|  | |

Is there a way for us to detect this kind of bug in the future? Perhaps by asserting the non-zero-ness of the refcount in nsNodeUtils::LastRelease?

|  | [Olli Pettay [:smaug][bugs@pettay.fi]](/user_profile?user_id=39966)  Assignee |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=945585#c10)• 11 years ago |
|  | |

That we could do. nsDocument is very special case here though, see [Bug 830975](/show_bug.cgi?id=830975 "RESOLVED FIXED - [FIX] nsDocument::FlushPendingNotifications looks suspicious"). Other nodes use normal macros.

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=945585#a56725_280903)• 11 years ago |

[status-b2g-v1.2](/buglist.cgi?f1=cf_status_b2g_1_2&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=affected)
[status-firefox25](/buglist.cgi?f1=cf_status_firefox25&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox25&o1=equals&v1=affected)
[status-firefox26](/buglist.cgi?f1=cf_status_firefox26&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox26&o1=equals&v1=affected)
[status-firefox27](/buglist.cgi?f1=cf_status_firefox27&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=affected)
[status-firefox28](/buglist.cgi?f1=cf_status_firefox28&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=affected)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=945585#c11)• 11 years ago |
|  | |

We're at the end of a cycle and shipping in a week. This needs to go in a couple of weeks into the new cycle.
[tracking-firefox28](/buglist.cgi?f1=cf_tracking_firefox28&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox28&o1=equals&v1=%2B)Whiteboard: [checkin after 12/23]

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=945585#c12)• 11 years ago |
|  | |

Comment on [attachment 8341686](/attachment.cgi?id=8341686 "removed assert") [[details]](/attachment.cgi?id=8341686&action=edit "removed assert") [[diff]](/attachment.cgi?id=8341686&action=diff "removed assert") [[review]](/page.cgi?id=splinter.html&ignore=&bug=945585&attachment=8341686)
removed assert
sec-approval+ for checkin on 12/23 or later into trunk.
[Attachment #8341686](/attachment.cgi?id=8341686&action=edit "removed assert") -
Flags: sec-approval? → sec-approval+

|  | [Nicholas Nethercote [inactive]](/user_profile?user_id=334849)  Reporter |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=945585#c13)• 11 years ago |
|  | |

> sec-approval+ for checkin on 12/23 or later into trunk.
Are you saying this can't be checked into m-c until after 12/23? That can't be right... surely this should land on m-c and aurora immediately, at least?

|  | [Kyle Huey (Exited; not receiving bugmail, old account, do not use)](/user_profile?user_id=336670) |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=945585#c14)• 11 years ago |
|  | |

The goal is to minimize the time the patch is world visible before we ship the fix. So if we're not going to ship the fix in the release going out next week, yes, this needs to wait a while.

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=945585#c15)• 11 years ago |
|  | |

(In reply to Nicholas Nethercote [:njn] from [comment #13](/show_bug.cgi?id=945585#c13 "RESOLVED FIXED - Crash involving nsNodeUtils::LastRelease(), possibly due to running it twice"))
> Are you saying this can't be checked into m-c until after 12/23? That can't
> be right... surely this should land on m-c and aurora immediately, at least?
This is exactly what I'm saying. The point of sec-approval? is to gate when we check in bad security issues during our six week cycles. Since we're shipping in a week, it is too late to go in now. The date was chosen to give time for it to get in without too much exposure. We do this all the time.

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=945585#c16)• 11 years ago |
|  | |

Oh, and when it goes into Trunk should be just before it goes into branches since exposure in one place is exposure everywhere to anyone monitoring checkins of hidden bugs.

|  | [David Bolter [:davidb] (NeedInfo me for attention)](/user_profile?user_id=152868) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=945585#a233292_152868)• 11 years ago |

[status-b2g18](/buglist.cgi?f1=cf_status_b2g18&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=unaffected)
[status-firefox25](/buglist.cgi?f1=cf_status_firefox25&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox25&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_firefox25&o1=equals&v1=wontfix)
[status-firefox26](/buglist.cgi?f1=cf_status_firefox26&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox26&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_firefox26&o1=equals&v1=wontfix)
[status-firefox29](/buglist.cgi?f1=cf_status_firefox29&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=affected)
[status-firefox-esr24](/buglist.cgi?f1=cf_status_firefox_esr24&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=unaffected)
[tracking-firefox27](/buglist.cgi?f1=cf_tracking_firefox27&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox27&o1=equals&v1=%2B)
[tracking-firefox29](/buglist.cgi?f1=cf_tracking_firefox29&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox29&o1=equals&v1=%2B)

|  | [Olli Pettay [:smaug][bugs@pettay.fi]](/user_profile?user_id=39966)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=945585#a475103_39966)• 11 years ago |

Summary: Crash involving nsNodeUtils::LastRelease(), possibly due to running it twice → [FIX] Crash involving nsNodeUtils::LastRelease(), possibly due to running it twice

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=945585#c17)• 11 years ago |
|  | |

<https://hg.mozilla.org/integration/mozilla-inbound/rev/8c7839e7f32e>

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=945585#c18)• 11 years ago |
|  | |

followup for bustage
<https://hg.mozilla.org/integration/mozilla-inbound/rev/697f5c9e6ec1>

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=945585#a1853685_75935)• 11 years ago |

Whiteboard: [checkin after 12/23]

|  | [Wes Kocher (:KWierso) (Not reading bugmail; email directly if needed)](/user_profile?user_id=308534) |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=945585#c19)• 11 years ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/8c7839e7f32e>
<https://hg.mozilla.org/mozilla-central/rev/697f5c9e6ec1>Status: NEW → RESOLVEDClosed: 11 years ago
[status-firefox29](/buglist.cgi?f1=cf_status_firefox29&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=fixed)Resolution: --- → FIXEDTarget Milestone: --- → mozilla29

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=945585#a1893292_406194)• 11 years ago |

Summary: [FIX] Crash involving nsNodeUtils::LastRelease(), possibly due to running it twice → Crash involving nsNodeUtils::LastRelease(), possibly due to running it twice

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=945585#a2639477_75935)• 11 years ago |

blocking-b2g: --- → koi?

|  | [bhavana bajaj [:bajaj]](/user_profile?user_id=448925) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=945585#a2648058_448925)• 11 years ago |

[Attachment #8341686](/attachment.cgi?id=8341686&action=edit "removed assert") -
Flags: approval-mozilla-beta?
[Attachment #8341686](/attachment.cgi?id=8341686&action=edit "removed assert") -
Flags: approval-mozilla-beta+
[Attachment #8341686](/attachment.cgi?id=8341686&action=edit "removed assert") -
Flags: approval-mozilla-aurora?
[Attachment #8341686](/attachment.cgi?id=8341686&action=edit "removed assert") -
Flags: approval-mozilla-aurora+

|  | [Jason Smith [:jsmith]](/user_profile?user_id=432443) |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=945585#c20)• 11 years ago |
|  | |

koi+ for sec-critical bugblocking-b2g: koi? → koi+

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 21](/show_bug.cgi?id=945585#c21)• 11 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-aurora/rev/c915f234da21>
<https://hg.mozilla.org/releases/mozilla-beta/rev/74e9dd9a411c>
<https://hg.mozilla.org/releases/mozilla-b2g26_v1_2/rev/1b66574518e6>
[status-b2g-v1.1hd](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=equals&v1=unaffected)
[status-b2g-v1.2](/buglist.cgi?f1=cf_status_b2g_1_2&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=fixed)
[status-b2g-v1.3](/buglist.cgi?f1=cf_status_b2g_1_3&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=fixed)
[status-firefox27](/buglist.cgi?f1=cf_status_firefox27&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=fixed)
[status-firefox28](/buglist.cgi?f1=cf_status_firefox28&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=fixed)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 22](/show_bug.cgi?id=945585#c22)• 11 years ago |
|  | |

The m-c bustage fix broke the other branches. Go figure.
<https://hg.mozilla.org/releases/mozilla-aurora/rev/6800c2e02e51>
<https://hg.mozilla.org/releases/mozilla-beta/rev/3161b119617a>
<https://hg.mozilla.org/releases/mozilla-b2g26_v1_2/rev/ba278ef30b1e>

|  | [Matt Wobensmith [:mwobensmith][:matt:]](/user_profile?user_id=452604) |  |
| --- | --- | --- |
| [Comment 23](/show_bug.cgi?id=945585#c23)• 11 years ago |
|  | |

With Nicholas' instructions, I reproduced the crash in FF28 from 2013-11-13. It took around 10 page refreshes to repro.
In each fixed branch, I allowed the page to refresh more than 30 times per run - no crash.
Confirmed fixed FF27, FF28 and FF29, 2014-01-18.
[status-firefox27](/buglist.cgi?f1=cf_status_firefox27&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=verified)
[status-firefox28](/buglist.cgi?f1=cf_status_firefox28&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=verified)
[status-firefox29](/buglist.cgi?f1=cf_status_firefox29&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=verified)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=945585#a4376877_280903)• 11 years ago |

Whiteboard: [adv-main27+]

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=945585#a13537931_75935)• 11 years ago |

[status-b2g-v1.3T](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=fixed)
[status-b2g-v1.4](/buglist.cgi?f1=cf_status_b2g_1_4&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=fixed)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=945585#a38881724_1689)• 10 years ago |

Group: core-security

|  | [Nobody; OK to take it and work on it](/user_profile?user_id=1) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=945585#a166440199_1)• 6 years ago |

Component: DOM → DOM: Core & HTML
You need to [log in](/show_bug.cgi?id=945585&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Nicholas Nethercote [inactive]](/user_profile?user_id=334849)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from www.ubuntu.com_140e9ca5_20250124_230106.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# USN-2102-1: Firefox vulnerabilities

10 February 2014

Firefox could be made to crash or run programs as your login if it
opened a malicious website.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Releases

* [Ubuntu 13.10](/security/notices?release=saucy)
* [Ubuntu 12.10](/security/notices?release=quantal)
* [Ubuntu 12.04](/security/notices?release=precise)

## Packages

* [firefox](/security/cves?package=firefox) - Mozilla Open Source web browser

## Details

Christian Holler, Terrence Cole, Jesse Ruderman, Gary Kwong, Eric

Rescorla, Jonathan Kew, Dan Gohman, Ryan VanderMeulen, Carsten Book,

Andrew Sutherland, Byron Campen, Nicholas Nethercote, Paul Adenot, David

Baron, Julian Seward and Sotaro Ikeda discovered multiple memory safety

issues in Firefox. If a user were tricked in to opening a specially

crafted website, an attacker could potentially exploit these to cause a

denial of service via application crash, or execute arbitrary code with

the privileges of the user invoking Firefox. ([CVE-2014-1477](/security/CVE-2014-1477),

[CVE-2014-1478](/security/CVE-2014-1478))

Cody Crews discovered a method to bypass System Only Wrappers. An attacker

could potentially exploit this to steal confidential data or execute code

with the privileges of the user invoking Firefox. ([CVE-2014-1479](/security/CVE-2014-1479))

Jordi Chancel discovered that the downloads dialog did not implement a

security timeout before button presses are processed. An attacker could

potentially exploit this to conduct clickjacking attacks. ([CVE-2014-1480](/security/CVE-2014-1480))

Fredrik Lönnqvist discovered a use-after-free in Firefox. An attacker

could potentially exploit this to cause a denial of service via

application crash, or execute arbitrary code with the priviliges of the

user invoking Firefox. ([CVE-2014-1482](/security/CVE-2014-1482))

Jordan Milne discovered a timing flaw when using document.elementFromPoint

and document.caretPositionFromPoint on cross-origin iframes. An attacker

could potentially exploit this to steal confidential imformation.

([CVE-2014-1483](/security/CVE-2014-1483))

Frederik Braun discovered that the CSP implementation in Firefox did not

handle XSLT stylesheets in accordance with the specification, potentially

resulting in unexpected script execution in some circumstances

([CVE-2014-1485](/security/CVE-2014-1485))

Arthur Gerkis discovered a use-after-free in Firefox. An attacker could

potentially exploit this to cause a denial of service via application

crash, or execute arbitrary code with the priviliges of the user invoking

Firefox. ([CVE-2014-1486](/security/CVE-2014-1486))

Masato Kinugawa discovered a cross-origin information leak in web worker

error messages. An attacker could potentially exploit this to steal

confidential information. ([CVE-2014-1487](/security/CVE-2014-1487))

Yazan Tommalieh discovered that web pages could activate buttons on the

default Firefox startpage (about:home) in some circumstances. An attacker

could potentially exploit this to cause data loss by triggering a session

restore. ([CVE-2014-1489](/security/CVE-2014-1489))

Soeren Balko discovered a crash in Firefox when terminating web workers

running asm.js code in some circumstances. An attacker could potentially

exploit this to execute arbitrary code with the priviliges of the user

invoking Firefox. ([CVE-2014-1488](/security/CVE-2014-1488))

Several issues were discovered with ticket handling in NSS. An attacker

could potentially exploit these to cause a denial of service or bypass

cryptographic protection mechanisms. ([CVE-2014-1490](/security/CVE-2014-1490), [CVE-2014-1491](/security/CVE-2014-1491))

Boris Zbarsky discovered that security restrictions on window objects

could be bypassed under certain circumstances. ([CVE-2014-1481](/security/CVE-2014-1481))

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Update instructions

The problem can be corrected by updating your system to the following package versions:

##### Ubuntu 13.10

* [firefox](https://launchpad.net/ubuntu/%2Bsource/firefox)
  -
  [27.0+build1-0ubuntu0.13.10.1](https://launchpad.net/ubuntu/%2Bsource/firefox/27.0%2Bbuild1-0ubuntu0.13.10.1)

##### Ubuntu 12.10

* [firefox](https://launchpad.net/ubuntu/%2Bsource/firefox)
  -
  [27.0+build1-0ubuntu0.12.10.1](https://launchpad.net/ubuntu/%2Bsource/firefox/27.0%2Bbuild1-0ubuntu0.12.10.1)

##### Ubuntu 12.04

* [firefox](https://launchpad.net/ubuntu/%2Bsource/firefox)
  -
  [27.0+build1-0ubuntu0.12.04.1](https://launchpad.net/ubuntu/%2Bsource/firefox/27.0%2Bbuild1-0ubuntu0.12.04.1)

After a standard system update you need to restart Firefox to make

all the necessary changes.

## References

* [CVE-2014-1477](/security/CVE-2014-1477)
* [CVE-2014-1478](/security/CVE-2014-1478)
* [CVE-2014-1479](/security/CVE-2014-1479)
* [CVE-2014-1480](/security/CVE-2014-1480)
* [CVE-2014-1482](/security/CVE-2014-1482)
* [CVE-2014-1483](/security/CVE-2014-1483)
* [CVE-2014-1485](/security/CVE-2014-1485)
* [CVE-2014-1486](/security/CVE-2014-1486)
* [CVE-2014-1487](/security/CVE-2014-1487)
* [CVE-2014-1489](/security/CVE-2014-1489)
* [CVE-2014-1488](/security/CVE-2014-1488)
* [CVE-2014-1490](/security/CVE-2014-1490)
* [CVE-2014-1491](/security/CVE-2014-1491)
* [CVE-2014-1481](/security/CVE-2014-1481)
* <https://launchpad.net/bugs/1274468>

## Related notices

* [USN-2119-1](/security/notices/USN-2119-1)

### Join the discussion

* [Ubuntu security updates mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened)
* [Security announcements mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-security-announce)

### Need help with your security needs?

Ubuntu Pro provides up to ten-year security coverage for over 23,000 open-source packages within the Ubuntu Main and Universe repositories.

[Talk to an expert to find out what would work best for you](/contact-us/form?product=pro)

### Further reading

* *Loading...*

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page



=== Content from bugzilla.mozilla.org_60a3194e_20250124_230113.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/867597)
* [XML](/show_bug.cgi?ctype=xml&id=867597)

Closed
[Bug 867597](/show_bug.cgi?id=867597)

Opened 12 years ago
Closed 11 years ago

# IonMonkey: ARM hwcaps detection depends on uninitialised garbage on the stack

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

IonMonkey: ARM hwcaps detection depends on uninitialised garbage on the stack

## Categories

### (Core :: JavaScript Engine: JIT, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=JavaScript%20Engine%3A%20JIT#JavaScript%20Engine%3A%20JIT)

JavaScript Engine: JIT
▾

Core :: JavaScript Engine: JIT
JavaScript engine's JIT compilers
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine%3A%20JIT&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine%3A%20JIT&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=JavaScript%20Engine%3A%20JIT)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

ARM

Android

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

normal

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla29

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Webcompat Priority | --- |
| --- | --- |
| Webcompat Score | --- |
| Performance Impact | --- |
| a11y-review | --- |
| Accessibility Severity | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox26 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox26&o1=equals&v1=wontfix) |
| firefox27 | --- | [fixed](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=fixed) |
| firefox28 | --- | [fixed](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=fixed) |
| firefox29 | --- | [fixed](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=fixed) |
| firefox-esr17 | --- | [unaffected](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=unaffected) |
| firefox-esr24 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=wontfix) |
| b2g18 | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=unaffected) |
| b2g-v1.1hd | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=equals&v1=unaffected) |
| b2g-v1.2 | --- | [wontfix](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=wontfix) |
| b2g-v1.3 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=fixed) |
| b2g-v1.3T | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=fixed) |
| b2g-v1.4 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=fixed) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox26 |  | wontfix |
| firefox27 |  | fixed |
| firefox28 |  | fixed |
| firefox29 |  | fixed |
| firefox-esr17 |  | unaffected |
| firefox-esr24 |  | wontfix |
| b2g18 |  | unaffected |
| b2g-v1.1hd |  | unaffected |
| b2g-v1.2 |  | wontfix |
| b2g-v1.3 |  | fixed |
| b2g-v1.3T |  | fixed |
| b2g-v1.4 |  | fixed |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: jseward, Assigned: jseward)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/5edb95922c89f29d92b7febcba5669de?d=mm&size=40)  [jseward](/user_profile?user_id=346453)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/5edb95922c89f29d92b7febcba5669de?d=mm&size=40)  [jseward](/user_profile?user_id=346453)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/4fe52ee1503aecf7b6c976b8eb7c1753?d=mm&size=40)  [willyelm](/user_profile?user_id=714609)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

10 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

---

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Keywords: sec-low, Whiteboard: [adv-main27+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[sec-low](/buglist.cgi?keywords=sec-low&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[adv-main27+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [mccr8](/user_profile?user_id=406194) | [in-testsuite](#a19617789_406194 "11 years ago") | + |
| --- | --- | --- |
| [mccr8](/user_profile?user_id=406194) | in-testsuite | + |
| --- | --- | --- |
|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (1 file)

| [A minimal fix](/attachment.cgi?id=762404)  [12 years ago](#c11)  [Julian Seward [:jseward]](/user_profile?user_id=346453)   916 bytes, patch | mjrosenb : [review+](#a3748761_419881 "12 years ago")  bajaj : [approval-mozilla-aurora+](#a21595802_448925 "11 years ago")  bajaj : [approval-mozilla-beta+](#a21595802_448925 "11 years ago")  lsblakk : [approval-mozilla-esr24-](#c24 "11 years ago")  praghunath : [approval-mozilla-b2g26-](#c26 "11 years ago") | [Details](/attachment.cgi?id=762404&action=edit) | [Diff](/attachment.cgi?id=762404&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=867597&attachment=762404) |
| --- | --- | --- |

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Julian Seward [:jseward]](/user_profile?user_id=346453)  Assignee |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=867597#c0)• 12 years ago |
|  | |

js/src/ion/arm/Architecture-arm.cpp:64 ibid has this
#elif defined(WTF\_OS\_ANDROID) || defined(MOZ\_B2G)
FILE \*fp = fopen("/proc/cpuinfo", "r");
if (!fp)
return false;
char buf[1024];
fread(buf, sizeof(char), sizeof(buf), fp);
fclose(fp);
if (strstr(buf, "vfp"))
flags |= HWCAP\_VFP;
if (strstr(buf, "vfpv3"))
flags |= HWCAP\_VFPv3;
if (strstr(buf, "vfpv3d16"))
flags |= HWCAP\_VFPv3D16;
if (strstr(buf, "vfpv4"))
flags |= HWCAP\_VFPv4;
if (strstr(buf, "idiva"))
flags |= HWCAP\_IDIVA;
if (strstr(buf, "idivt"))
flags |= HWCAP\_IDIVT;
if (strstr(buf, "neon"))
flags |= HWCAP\_NEON;
// not part of the HWCAP flag, but I need to know this, and we're not using
// that bit, so... I'm using it
if (strstr(buf, "ARMv7"))
flags |= HWCAP\_ARMv7;
isSet = true;
return flags;
#endif
viz. open /proc/cpuinfo, read arbitrary amount stuff into buf, not
zero terminated, and then do strstr on the buf. Since in my test case,
the file fits in buf (as one would expect), it winds up doing strstr
on the garbage left over in buf[]. Hence
(1) for the strings that don't appear /proc/cpuinfo (eg, vfpv4), the
do/don't-we-have-this-feature result is random, and
(2) if all of the garbage in buf[] doesn't contain a zero byte, we'll
overrun the array.

|  | [Julian Seward [:jseward]](/user_profile?user_id=346453)  Assignee |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=867597#c1)• 12 years ago |
|  | |

Note that Architecture-arm.cpp:81 is this
if (strstr(buf, "vfpv4"))
and that's the first string that isn't in /proc/cpuinfo on this tablet,
hence supporting the analysis in the previous comment.
Conditional jump or move depends on uninitialised value(s)
at 0x4808EDC: strstr (/home/sewardj/VgTRUNK/trunk-droid/memcheck/mc\_replace\_strmem.c:1411)
by 0x2B20055F: js::ion::getFlags() [clone .part.1] (js/src/ion/arm/Architecture-arm.cpp:81)
by 0x2B200677: js::ion::hasMOVWT() (js/src/ion/arm/Architecture-arm.cpp:40)
by 0x2B200DE9: js::ion::MacroAssemblerARM::ma\_alu(js::ion::Register, js::ion::Imm32, js::ion::Register, js::ion::ALUOp, js::ion::SetCond\_, js::ion::Assembler::Condition) (js/src/ion/arm/MacroAssembler-arm.cpp:212)
by 0x2B207A35: js::ion::MacroAssemblerARMCompat::callWithABI(void\*, js::ion::MacroAssemblerARMCompat::Result) (js/src/ion/arm/MacroAssembler-arm.cpp:370)
by 0x2B1F1DA3: GenerateBailoutThunk(js::ion::MacroAssembler&, unsigned int) [clone .constprop.68] (js/src/ion/IonMacroAssembler.h:645)
by 0x2B1F7169: js::ion::IonRuntime::generateBailoutTable(JSContext\*, unsigned int) (js/src/ion/arm/Trampoline-arm.cpp:566)
by 0x2B162A5F: js::ion::IonRuntime::initialize(JSContext\*) (js/src/ion/Ion.cpp:210)
by 0x2AFBB095: JSRuntime::createIonRuntime(JSContext\*) (js/src/jscompartment.cpp:120)
by 0x2AFBB17F: JSCompartment::ensureIonCompartmentExists(JSContext\*) (js/src/jscntxt.h:789)
by 0x2B15AEC7: js::ion::CanEnterBaselineJIT(JSContext\*, JSScript\*, js::StackFrame\*, bool) (js/src/ion/BaselineJIT.cpp:256)
by 0x2B002AA1: js::RunScript(JSContext\*, js::StackFrame\*) (js/src/jsinterp.cpp:357)
by 0x2B003997: js::Execute(JSContext\*, JS::Handle<JSScript\*>, JSObject&, JS::Value\*) (js/src/jsinterp.cpp:573)
by 0x2AF9DB7D: JS\_ExecuteScript(JSContext\*, JSObject\*, JSScript\*, JS::Value\*) (js/src/jsapi.cpp:5603)
by 0x2A5F82F3: nsJSContext::ExecuteScript(JSScript\*, JSObject\*) (dom/base/nsJSEnvironment.cpp:1436)
by 0x2A5E5DC9: mozilla::dom::XULDocument::ExecuteScript(nsIScriptContext\*, JSScript\*) (content/xul/document/src/XULDocument.cpp:3658)
by 0x2A5E5E1F: mozilla::dom::XULDocument::ExecuteScript(nsXULPrototypeScript\*) (content/xul/document/src/XULDocument.cpp:3678)
by 0x2A5E9F09: mozilla::dom::XULDocument::OnStreamComplete(nsIStreamLoader\*, nsISupports\*, tag\_nsresult, unsigned int, unsigned char const\*) (content/xul/document/src/XULDocument.cpp:3557)
by 0x2A22D723: nsStreamLoader::OnStopRequest(nsIRequest\*, nsISupports\*, tag\_nsresult) (netwerk/base/src/nsStreamLoader.cpp:101)
by 0x2A303F97: nsJARChannel::OnStopRequest(nsIRequest\*, nsISupports\*, tag\_nsresult) (modules/libjar/nsJARChannel.cpp:982)
by 0x2A219D57: nsInputStreamPump::OnStateStop() (netwerk/base/src/nsInputStreamPump.cpp:555)
by 0x2A219DE7: nsInputStreamPump::OnInputStreamReady(nsIAsyncInputStream\*) (netwerk/base/src/nsInputStreamPump.cpp:375)
by 0x2AB709CF: nsInputStreamReadyEvent::Run() (xpcom/io/nsStreamUtils.cpp:160)
by 0x2AB7BA1B: nsThread::ProcessNextEvent(bool, bool\*) (xpcom/threads/nsThread.cpp:627)
Uninitialised value was created by a stack allocation
at 0x2B2004E2: js::ion::getFlags() [clone .part.1] (js/src/ion/arm/Architecture-arm.cpp:35)

|  | [Julian Seward [:jseward]](/user_profile?user_id=346453)  Assignee |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=867597#c2)• 12 years ago |
|  | |

This strikes me as safer:
char buf[1024];
memset(buf, 0, sizeof(buf));
fread(buf, sizeof(char), sizeof(buf)-1, fp);

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297) |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=867597#c3)• 12 years ago |
|  | |

Hm, looking at that code and talking to sewardj on IRC, I wonder if these string searches could also be causing the Baseline VFP crashes with HTC Wildfire (e.g. the string "vfp" appearing somewhere else in /proc/cpuinfo)?

|  | [Julian Seward [:jseward]](/user_profile?user_id=346453)  Assignee |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=867597#c4)• 12 years ago |
|  | |

Well, can we get a /proc/cpuinfo dump for HTC Wildfire from anyone?

|  | [(not currently active) Ted Mielczarek](/user_profile?user_id=39022) |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=867597#c5)• 12 years ago |
|  | |

If you can find one on crash-stats the full contents of /proc/cpuinfo is actually present in the minidump, I can dig it out for you if you'd like. (Or you can use minidump\_dump from Breakpad to see it if you have access to dump files.)

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297) |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=867597#c6)• 12 years ago |
|  | |

I just looked at one of the dumps:
Stream MD\_LINUX\_CPU\_INFO:
Processor : ARMv6-compatible processor rev 2 (v6l)
BogoMIPS : 708.05
Features : swp half thumb fastmult edsp java
CPU implementer : 0x41
CPU architecture: 6TEJ
CPU variant : 0x1
CPU part : 0xb36
CPU revision : 2
Hardware : buzz
Revision : 0081
Serial : 0000000000000000
I don't see the string vfp anywhere in the minidump\_dump output, so this must be another issue..

|  | [Curtis Koenig [:curtisk-use curtis.koenig+bzATgmail.com]]](/user_profile?user_id=406847) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=867597#a11122_406847)• 12 years ago |

Flags: sec-bounty?

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=867597#a92541_1689)• 12 years ago |

Summary: IM's ARM hwcaps detection depends on uninitialised garbage on the stack → IonMonkey: ARM hwcaps detection depends on uninitialised garbage on the stack

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=867597#c7)• 12 years ago |
|  | |

I'm assuming b2g18 is "unaffected" because ionmonkey is disabled, but the code does exist. Is this a feature that is used regardless?
[status-b2g18](/buglist.cgi?f1=cf_status_b2g18&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=unaffected)
[status-firefox-esr17](/buglist.cgi?f1=cf_status_firefox_esr17&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=unaffected)

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=867597#a611327_406194)• 12 years ago |

Flags: sec-bounty?

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=867597#c8)• 12 years ago |
|  | |

Julian, how much of a security issue could this be? I'm not sure what hwcaps is.Flags: needinfo?(jseward)

|  | [Julian Seward [:jseward]](/user_profile?user_id=346453)  Assignee |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=867597#c9)• 12 years ago |
|  | |

hwcaps is short for Hardware Capabilities. I don't think this is a
big security deal, since in the worst case we can overread the stack
only if it is possible to replace /proc/cpuinfo with a file that is
at least 1024 bytes long (or otherwise cause it to be so). There is
also the possibility that we wind up generating instructions that the
processor can't execute, if by chance garbage on the stack contains a
string along the lines of "vfpv4" or others that the routine checks for.
Basically it's a correctness issue, and should definitely be fixed.
[Comment 2](/show_bug.cgi?id=867597#c2 "RESOLVED FIXED - IonMonkey: ARM hwcaps detection depends on uninitialised garbage on the stack") has what I think is a minimal fix (untested).Flags: needinfo?(jseward)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=867597#c10)• 12 years ago |
|  | |

Who can we assign this to?Keywords: [sec-low](/buglist.cgi?keywords=sec-low&resolution=---)

|  | [Julian Seward [:jseward]](/user_profile?user_id=346453)  Assignee |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=867597#c11)• 12 years ago |
|  | |

Attached patch

[A minimal fix](attachment.cgi?id=762404&action=diff)
— [Details](attachment.cgi?id=762404&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=867597&attachment=762404)

Minimal fix, which at least (1) ensures that we can't overrun
the stack allocated buffer, and (2) stops Valgrind complaining.

|  | [Julian Seward [:jseward]](/user_profile?user_id=346453)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=867597#a3747257_346453)• 12 years ago |

[Attachment #762404](/attachment.cgi?id=762404&action=edit "A minimal fix") -
Flags: review?(mrosenberg)

|  | [Marty Rosenberg [:mjrosenb]](/user_profile?user_id=419881) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=867597#a3748761_419881)• 12 years ago |

[Attachment #762404](/attachment.cgi?id=762404&action=edit "A minimal fix") -
Flags: review?(mrosenberg) → review+

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=867597#c12)• 11 years ago |
|  | |

Julian, can you land your fix? Thanks!Assignee: general → jsewardStatus: NEW → ASSIGNEDComponent: JavaScript Engine → JavaScript Engine: JITFlags: needinfo?(jseward)

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297) |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=867597#c13)• 11 years ago |
|  | |

Marty, since Julian is not responding, can you make sure this gets fixed? Thanks!Flags: needinfo?(mrosenberg)

|  | [Julian Seward [:jseward]](/user_profile?user_id=346453)  Assignee |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=867597#c14)• 11 years ago |
|  | |

I'll land it; sorry for the delay. Currently waiting for it to look ok on try.Flags: needinfo?(jseward)

|  | [Julian Seward [:jseward]](/user_profile?user_id=346453)  Assignee |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=867597#c15)• 11 years ago |
|  | |

<https://hg.mozilla.org/integration/mozilla-inbound/rev/97feecba44a4>

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=867597#c16)• 11 years ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/97feecba44a4>
Can we land the test too please?Status: ASSIGNED → RESOLVEDClosed: 11 years ago
[status-b2g-v1.1hd](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=equals&v1=unaffected)
[status-b2g-v1.2](/buglist.cgi?f1=cf_status_b2g_1_2&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=affected)
[status-b2g-v1.3](/buglist.cgi?f1=cf_status_b2g_1_3&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=affected)
[status-firefox27](/buglist.cgi?f1=cf_status_firefox27&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=affected)
[status-firefox28](/buglist.cgi?f1=cf_status_firefox28&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=affected)
[status-firefox29](/buglist.cgi?f1=cf_status_firefox29&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=fixed)
[status-firefox-esr24](/buglist.cgi?f1=cf_status_firefox_esr24&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=affected)Flags: needinfo?(mrosenberg) → in-testsuite?Resolution: --- → FIXEDTarget Milestone: --- → mozilla29

|  | [Julian Seward [:jseward]](/user_profile?user_id=346453)  Assignee |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=867597#c17)• 11 years ago |
|  | |

(In reply to Ryan VanderMeulen [:RyanVM UTC-5] from [comment #16](/show_bug.cgi?id=867597#c16 "RESOLVED FIXED - IonMonkey: ARM hwcaps detection depends on uninitialised garbage on the stack"))
> Can we land the test too please?
This was detected by Valgrind during a normal startup of Firefox on
Android. There is no test case.

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=867597#a19617789_406194)• 11 years ago |

Flags: in-testsuite? → in-testsuite+

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=867597#c18)• 11 years ago |
|  | |

Please nominate this for Aurora/Beta/b2g26/esr24 uplift.Flags: needinfo?(jseward)

|  | [Julian Seward [:jseward]](/user_profile?user_id=346453)  Assignee |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=867597#c19)• 11 years ago |
|  | |

Comment on [attachment 762404](/attachment.cgi?id=762404 "A minimal fix") [[details]](/attachment.cgi?id=762404&action=edit "A minimal fix") [[diff]](/attachment.cgi?id=762404&action=diff "A minimal fix") [[review]](/page.cgi?id=splinter.html&ignore=&bug=867597&attachment=762404)
A minimal fix
[Approval Request Comment]
Bug caused by (feature/regressing bug #):
N/A
User impact if declined:
Possible segfault due to overread of stack, possible SIGILL
(although very unlikely) due to misidentification of hardware
capabilities. Per [comment 9](/show_bug.cgi?id=867597#c9 "RESOLVED FIXED - IonMonkey: ARM hwcaps detection depends on uninitialised garbage on the stack"), an attacker would need to be able
to replace /proc/cpuinfo with a file > 1024 bytes to have any
malicious effect.
Testing completed (on m-c, etc.):
Looked OK on try.
Risk to taking this patch (and alternatives if risky):
Minimal risk IMO.
String or IDL/UUID changes made by this patch:
none
[Attachment #762404](/attachment.cgi?id=762404&action=edit "A minimal fix") -
Flags: approval-mozilla-aurora?Flags: needinfo?(jseward)

|  | [Julian Seward [:jseward]](/user_profile?user_id=346453)  Assignee |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=867597#c20)• 11 years ago |
|  | |

Comment on [attachment 762404](/attachment.cgi?id=762404 "A minimal fix") [[details]](/attachment.cgi?id=762404&action=edit "A minimal fix") [[diff]](/attachment.cgi?id=762404&action=diff "A minimal fix") [[review]](/page.cgi?id=splinter.html&ignore=&bug=867597&attachment=762404)
A minimal fix
[Approval Request Comment]
Same as [comment 19](/show_bug.cgi?id=867597#c19 "RESOLVED FIXED - IonMonkey: ARM hwcaps detection depends on uninitialised garbage on the stack").
[Attachment #762404](/attachment.cgi?id=762404&action=edit "A minimal fix") -
Flags: approval-mozilla-esr24?
[Attachment #762404](/attachment.cgi?id=762404&action=edit "A minimal fix") -
Flags: approval-mozilla-beta?
[Attachment #762404](/attachment.cgi?id=762404&action=edit "A minimal fix") -
Flags: approval-mozilla-b2g26?

|  | [bhavana bajaj [:bajaj]](/user_profile?user_id=448925) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=867597#a21595802_448925)• 11 years ago |

[Attachment #762404](/attachment.cgi?id=762404&action=edit "A minimal fix") -
Flags: approval-mozilla-beta?
[Attachment #762404](/attachment.cgi?id=762404&action=edit "A minimal fix") -
Flags: approval-mozilla-beta+
[Attachment #762404](/attachment.cgi?id=762404&action=edit "A minimal fix") -
Flags: approval-mozilla-aurora?
[Attachment #762404](/attachment.cgi?id=762404&action=edit "A minimal fix") -
Flags: approval-mozilla-aurora+

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 21](/show_bug.cgi?id=867597#c21)• 11 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-aurora/rev/8634172315d5>
<https://hg.mozilla.org/releases/mozilla-beta/rev/80b8cfdcde61>
[status-b2g-v1.3](/buglist.cgi?f1=cf_status_b2g_1_3&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=fixed)
[status-firefox27](/buglist.cgi?f1=cf_status_firefox27&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=fixed)
[status-firefox28](/buglist.cgi?f1=cf_status_firefox28&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=fixed)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 22](/show_bug.cgi?id=867597#c22)• 11 years ago |
|  | |

Being an ARM-only sec-low, I don't think we need this on esr24, but B2G still sounds like a good idea.Flags: needinfo?(bbajaj)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 23](/show_bug.cgi?id=867597#c23)• 11 years ago |
|  | |

Sec-low bugs are not normally backported to ESR branches without a specific reason.

|  | [Lukas Blakk [:lsblakk] use ?needinfo](/user_profile?user_id=272375) |  |
| --- | --- | --- |
| [Comment 24](/show_bug.cgi?id=867597#c24)• 11 years ago |
|  | |

Comment on [attachment 762404](/attachment.cgi?id=762404 "A minimal fix") [[details]](/attachment.cgi?id=762404&action=edit "A minimal fix") [[diff]](/attachment.cgi?id=762404&action=diff "A minimal fix") [[review]](/page.cgi?id=splinter.html&ignore=&bug=867597&attachment=762404)
A minimal fix
This doesn't qualify for ESR landing (nor is there a reason given to make an exception) see <https://wiki.mozilla.org/Release_Management/ESR_Landing_Process>
[Attachment #762404](/attachment.cgi?id=762404&action=edit "A minimal fix") -
Flags: approval-mozilla-esr24? → approval-mozilla-esr24-

|  | [Lukas Blakk [:lsblakk] use ?needinfo](/user_profile?user_id=272375) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=867597#a22585514_272375)• 11 years ago |

Flags: needinfo?(bbajaj)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=867597#a22586261_75935)• 11 years ago |

[status-firefox-esr24](/buglist.cgi?f1=cf_status_firefox_esr24&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=wontfix)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 25](/show_bug.cgi?id=867597#c25)• 11 years ago |
|  | |

FWIW, the b2g26 backport is green on Try.

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=867597#a22925997_280903)• 11 years ago |

[status-firefox26](/buglist.cgi?f1=cf_status_firefox26&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_firefox26&o1=equals&v1=wontfix)

|  | [Preeti Raghunath(:Preeti)](/user_profile?user_id=474545) |  |
| --- | --- | --- |
| [Comment 26](/show_bug.cgi?id=867597#c26)• 11 years ago |
|  | |

Comment on [attachment 762404](/attachment.cgi?id=762404 "A minimal fix") [[details]](/attachment.cgi?id=762404&action=edit "A minimal fix") [[diff]](/attachment.cgi?id=762404&action=diff "A minimal fix") [[review]](/page.cgi?id=splinter.html&ignore=&bug=867597&attachment=762404)
A minimal fix
Minus on approval‑mozilla‑b2g26 as it is a low sec issue
[Attachment #762404](/attachment.cgi?id=762404&action=edit "A minimal fix") -
Flags: approval-mozilla-b2g26? → approval-mozilla-b2g26-

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=867597#a23003751_75935)• 11 years ago |

[status-b2g-v1.2](/buglist.cgi?f1=cf_status_b2g_1_2&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=wontfix)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=867597#a23013536_280903)• 11 years ago |

Whiteboard: [adv-main27+]

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=867597#a32160615_75935)• 11 years ago |

[status-b2g-v1.3T](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=fixed)
[status-b2g-v1.4](/buglist.cgi?f1=cf_status_b2g_1_4&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=fixed)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=867597#a57504359_1689)• 10 years ago |

Group: core-security
You need to [log in](/show_bug.cgi?id=867597&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Julian Seward [:jseward]](/user_profile?user_id=346453)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from bugzilla.mozilla.org_fab99967_20250124_230132.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/939472)
* [XML](/show_bug.cgi?ctype=xml&id=939472)

Closed
[Bug 939472](/show_bug.cgi?id=939472)

Opened 11 years ago
Closed 11 years ago

# "Assertion failure: view" with gcslice and neuter

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

"Assertion failure: view" with gcslice and neuter

## Categories

### (Core :: JavaScript Engine, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=JavaScript%20Engine#JavaScript%20Engine)

JavaScript Engine
▾

Core :: JavaScript Engine
The interpreter engine for the core JavaScript language, independent of the browser's object model. File ONLY core JavaScript language bugs in this category. For bugs involving browser objects such as "window" and "document", use the "DOM" component. For bugs involving calls between JavaScript and C++, use the "XPConnect" component.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=JavaScript%20Engine)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

x86\_64

macOS

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

critical

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla28

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| blocking-b2g | [koi+](/buglist.cgi?f1=cf_blocking_b2g&o1=equals&v1=koi%2B) |
| --- | --- |

| Accessibility Severity | --- |
| --- | --- |
| a11y-review | --- |
| Performance Impact | --- |
| Webcompat Score | --- |
| Webcompat Priority | --- |
| blocking-b2g | koi+ |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox26 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox26&o1=equals&v1=wontfix) |
| firefox27 | --- | [fixed](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=fixed) |
| firefox28 | --- | [fixed](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=fixed) |
| firefox-esr24 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=wontfix) |
| b2g18 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=fixed) |
| b2g-v1.1hd | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=equals&v1=fixed) |
| b2g-v1.2 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=fixed) |
| b2g-v1.3 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=fixed) |
| b2g-v1.3T | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=fixed) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox26 |  | wontfix |
| firefox27 |  | fixed |
| firefox28 |  | fixed |
| firefox-esr24 |  | wontfix |
| b2g18 |  | fixed |
| b2g-v1.1hd |  | fixed |
| b2g-v1.2 |  | fixed |
| b2g-v1.3 |  | fixed |
| b2g-v1.3T |  | fixed |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: jruderman, Assigned: sfink)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/d269c0228684029dedb75d73b81a64c3?d=mm&size=40)  [sfink](/user_profile?user_id=359004)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/d2dc9227eafcd0ec5ba3712ee4f19b75?d=mm&size=40)  [jruderman](/user_profile?user_id=11608)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/4fe52ee1503aecf7b6c976b8eb7c1753?d=mm&size=40)  [willyelm](/user_profile?user_id=714609)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

14 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[861925](/show_bug.cgi?id=861925 "RESOLVED FIXED - Cloning typed arrays with shared buffers and transferables does not work")

Dependency [tree](/showdependencytree.cgi?id=939472&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=939472)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (4 keywords, Whiteboard: [fuzzblocker:neuter][adv-main27+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[assertion](/buglist.cgi?keywords=assertion&resolution=---),
[regression](/buglist.cgi?keywords=regression&resolution=---),
[sec-low](/buglist.cgi?keywords=sec-low&resolution=---),
[testcase](/buglist.cgi?keywords=testcase&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[fuzzblocker:neuter][adv-main27+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [cbook](/user_profile?user_id=277293) | [in-testsuite](#c7 "11 years ago") | ? |
| --- | --- | --- |
| [cbook](/user_profile?user_id=277293) | in-testsuite | ? |
| --- | --- | --- |
|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (1 file, 1 obsolete file)

| [Remove buffer from multiview list when neutered](/attachment.cgi?id=8334141)  [11 years ago](#c1)  [Steve Fink [:sfink] [:s:]](/user_profile?user_id=359004)   2.16 KB, patch | billm : [review+](#c2 "11 years ago")  abillings : [approval-mozilla-aurora+](#a1362429_280903 "11 years ago")  lsblakk : [approval-mozilla-beta-](#a1366869_272375 "11 years ago") | [Details](/attachment.cgi?id=8334141&action=edit) | [Diff](/attachment.cgi?id=8334141&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=939472&attachment=8334141) |
| --- | --- | --- |
| [Remove buffer from multiview list when neutered.](/attachment.cgi?id=8355611)  [11 years ago](#c16)  [Steve Fink [:sfink] [:s:]](/user_profile?user_id=359004)   2.02 KB, patch |  | [Details](/attachment.cgi?id=8355611&action=edit) | [Diff](/attachment.cgi?id=8355611&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=939472&attachment=8355611) |

Show Obsolete

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Jesse Ruderman](/user_profile?user_id=11608)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=939472#c0)• 11 years ago |
|  | |

var a = new Uint8Array();
a.subarray();
gcslice(0);
gcslice(1781);
neuter(a.buffer);
Assertion failure: view, at js/src/vm/TypedArrayObject.cpp:824
Using the trick in [bug 929786 comment 4](/show_bug.cgi?id=929786#c4 "RESOLVED FIXED - Add shell function to test neutering"), the first bad revision is:
changeset: <http://hg.mozilla.org/mozilla-central/rev/0efef923cc17>
user: Steve Fink
date: Tue Oct 15 23:48:01 2013 -0700
summary: [Bug 861925](/show_bug.cgi?id=861925 "RESOLVED FIXED - Cloning typed arrays with shared buffers and transferables does not work") - Allow grabbing data from ArrayBuffers and neutering them independently (in addition to Steal, which does both at the same time). r=Waldo

|  | [Jesse Ruderman](/user_profile?user_id=11608)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=939472#a108_11608)• 11 years ago |

Blocks: [861925](/show_bug.cgi?id=861925 "RESOLVED FIXED - Cloning typed arrays with shared buffers and transferables does not work")

|  | [Steve Fink [:sfink] [:s:]](/user_profile?user_id=359004)  Assignee |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=939472#c1)• 11 years ago |
|  | |

Attached patch

[Remove buffer from multiview list when neutered](attachment.cgi?id=8334141&action=diff) (obsolete)
— [Details](attachment.cgi?id=8334141&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=939472&attachment=8334141)

We maintain a list of ArrayBuffers with more than view. Sadly, we do not remove them from the list when neutering.
"We", here, is pronounced "sfink".
[Attachment #8334141](/attachment.cgi?id=8334141&action=edit "Remove buffer from multiview list when neutered") -
Flags: review?(wmccloskey)

|  | [Steve Fink [:sfink] [:s:]](/user_profile?user_id=359004)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=939472#a165388_359004)• 11 years ago |

Assignee: nobody → sphinkStatus: NEW → ASSIGNED

|  | [Bill McCloskey [inactive unless it's an emergency] (:billm)](/user_profile?user_id=389993) |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=939472#c2)• 11 years ago |
|  | |

Comment on [attachment 8334141](/attachment.cgi?id=8334141 "Remove buffer from multiview list when neutered") [[details]](/attachment.cgi?id=8334141&action=edit "Remove buffer from multiview list when neutered") [[diff]](/attachment.cgi?id=8334141&action=diff "Remove buffer from multiview list when neutered") [[review]](/page.cgi?id=splinter.html&ignore=&bug=939472&attachment=8334141)
Remove buffer from multiview list when neutered
Review of [attachment 8334141](/attachment.cgi?id=8334141 "Remove buffer from multiview list when neutered") [[details]](/attachment.cgi?id=8334141&action=edit "Remove buffer from multiview list when neutered") [[diff]](/attachment.cgi?id=8334141&action=diff "Remove buffer from multiview list when neutered") [[review]](/page.cgi?id=splinter.html&ignore=&bug=939472&attachment=8334141):
-----------------------------------------------------------------
::: js/src/vm/TypedArrayObject.cpp
@@ +350,5 @@
> if (!ArrayBufferObject::neuterAsmJSArrayBuffer(cx, \*this))
> return false;
> }
>
> + // remove buffer from the list of buffers with > 1 view
Please capitalize and add a period at the end.
[Attachment #8334141](/attachment.cgi?id=8334141&action=edit "Remove buffer from multiview list when neutered") -
Flags: review?(wmccloskey) → review+

|  | [Steve Fink [:sfink] [:s:]](/user_profile?user_id=359004)  Assignee |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=939472#c3)• 11 years ago |
|  | |

<http://hg.mozilla.org/integration/mozilla-inbound/rev/335ec0f81ead>

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=939472#a321861_1689)• 11 years ago |

Keywords: [regression](/buglist.cgi?keywords=regression&resolution=---)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=939472#c4)• 11 years ago |
|  | |

This needed a rating before it went in and since it affects Aurora and Trunk both, it needed security approval.
See <https://wiki.mozilla.org/Security/Bug_Approval_Process>.
Can you suggest a security rating and answer the sec-approval? template questions?Keywords: [regression](/buglist.cgi?keywords=regression&resolution=---)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=939472#a321886_280903)• 11 years ago |

Keywords: [regression](/buglist.cgi?keywords=regression&resolution=---)

|  | [Steve Fink [:sfink] [:s:]](/user_profile?user_id=359004)  Assignee |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=939472#c5)• 11 years ago |
|  | |

Comment on [attachment 8334141](/attachment.cgi?id=8334141 "Remove buffer from multiview list when neutered") [[details]](/attachment.cgi?id=8334141&action=edit "Remove buffer from multiview list when neutered") [[diff]](/attachment.cgi?id=8334141&action=diff "Remove buffer from multiview list when neutered") [[review]](/page.cgi?id=splinter.html&ignore=&bug=939472&attachment=8334141)
Remove buffer from multiview list when neutered
Requesting sec-approval, but on further reflection, I don't think this is sensitive at all.
[Security approval request comment]
How easily could an exploit be constructed based on the patch?
It should be fairly easy to cause a near-NULL crash. I have no idea how to do anything more than that. I don't see how it's possible.
Do comments in the patch, the check-in comment, or tests included in the patch paint a bulls-eye on the security problem?
It's pretty clear from the patch what the actual code flaw and how to construct a scenario that hits it. It's not very clear why it's a security problem.
Which older supported branches are affected by this flaw?
Everything since Firefox 18.
If not all supported branches, which bug introduced the flaw?
[Bug 789295](/show_bug.cgi?id=789295 "RESOLVED FIXED - Eliminate finalization cost of transferable ArrayBuffers")
Do you have backports for the affected branches? If not, how different, hard to create, and risky will they be?
The code would be slightly different, but just because different helper functions were introduced at some point. The behavior would be the same.
How likely is this patch to cause regressions; how much testing does it need?
The situation where this arises is uncommon, so if it does introduce regressions, they won't hit very often in normal usage.
To be specific, to hit this bug you would need to:
1. Create an ArrayBuffer with multiple typed array views
2. Do a postMessage that transfers the ArrayBuffer
3. Timing it so that step #2 happens between incremental GC slices
The result is an ArrayBuffer with zero views on the list of "multiview" ArrayBuffers. Since the list is threaded through each buffer's first view, that means that when traversing the list, it'll dereference the address 0x8 or 0x10 or something like that. The exact offset is fixed; the user cannot interfere with it. (The list is only traversed during sweeping. So it would happen at the end of the current incremental GC.)
[Attachment #8334141](/attachment.cgi?id=8334141&action=edit "Remove buffer from multiview list when neutered") -
Flags: sec-approval?

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=939472#a328605_406194)• 11 years ago |

Keywords: [sec-low](/buglist.cgi?keywords=sec-low&resolution=---)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=939472#c6)• 11 years ago |
|  | |

Comment on [attachment 8334141](/attachment.cgi?id=8334141 "Remove buffer from multiview list when neutered") [[details]](/attachment.cgi?id=8334141&action=edit "Remove buffer from multiview list when neutered") [[diff]](/attachment.cgi?id=8334141&action=diff "Remove buffer from multiview list when neutered") [[review]](/page.cgi?id=splinter.html&ignore=&bug=939472&attachment=8334141)
Remove buffer from multiview list when neutered
I agree with Andrew. This sounds like a sec-low so you're all good to go. Low and Medium rated issues don't need approval.
[Attachment #8334141](/attachment.cgi?id=8334141&action=edit "Remove buffer from multiview list when neutered") -
Flags: sec-approval?

|  | [Carsten Book [:Tomcat]](/user_profile?user_id=277293) |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=939472#c7)• 11 years ago |
|  | |

landed on <https://hg.mozilla.org/mozilla-central/rev/335ec0f81ead>Status: ASSIGNED → RESOLVEDClosed: 11 years ago
[status-firefox28](/buglist.cgi?f1=cf_status_firefox28&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=fixed)Flags: in-testsuite?Resolution: --- → FIXEDTarget Milestone: --- → mozilla28

|  | [David Chan [:dchan]](/user_profile?user_id=380069) |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=939472#c8)• 11 years ago |
|  | |

Per [comment 5](/show_bug.cgi?id=939472#c5 "RESOLVED FIXED - \"Assertion failure: view\" with gcslice and neuter"), this bug has been around since fx18
[status-b2g18](/buglist.cgi?f1=cf_status_b2g18&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=affected)
[status-b2g-v1.1hd](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=equals&v1=affected)
[status-b2g-v1.2](/buglist.cgi?f1=cf_status_b2g_1_2&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=affected)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=939472#c9)• 11 years ago |
|  | |

Steve, can you please nominate this for uplift?
[status-firefox26](/buglist.cgi?f1=cf_status_firefox26&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_firefox26&o1=equals&v1=wontfix)
[status-firefox27](/buglist.cgi?f1=cf_status_firefox27&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=affected)
[status-firefox-esr24](/buglist.cgi?f1=cf_status_firefox_esr24&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=affected)Flags: needinfo?(sphink)

|  | [Alex Keybl [:akeybl]](/user_profile?user_id=425645) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=939472#a1355917_425645)• 11 years ago |

[status-firefox-esr24](/buglist.cgi?f1=cf_status_firefox_esr24&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=wontfix)

|  | [Steve Fink [:sfink] [:s:]](/user_profile?user_id=359004)  Assignee |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=939472#c10)• 11 years ago |
|  | |

Comment on [attachment 8334141](/attachment.cgi?id=8334141 "Remove buffer from multiview list when neutered") [[details]](/attachment.cgi?id=8334141&action=edit "Remove buffer from multiview list when neutered") [[diff]](/attachment.cgi?id=8334141&action=diff "Remove buffer from multiview list when neutered") [[review]](/page.cgi?id=splinter.html&ignore=&bug=939472&attachment=8334141)
Remove buffer from multiview list when neutered
Sorry for the premature landing.
[Approval Request Comment]
Bug caused by (feature/regressing bug #): 789295
User impact if declined: crashes
Testing completed (on m-c, etc.): on m-c
Risk to taking this patch (and alternatives if risky): similar crashes, if we missed something in the logic
String or IDL/UUID changes made by this patch: none
[Attachment #8334141](/attachment.cgi?id=8334141&action=edit "Remove buffer from multiview list when neutered") -
Flags: approval-mozilla-beta?
[Attachment #8334141](/attachment.cgi?id=8334141&action=edit "Remove buffer from multiview list when neutered") -
Flags: approval-mozilla-aurora?

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=939472#c11)• 11 years ago |
|  | |

For a sec-low, it may be a bit late in the cycle to take churn. I can see approving this for Aurora but probably not Beta.

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=939472#a1362429_280903)• 11 years ago |

[Attachment #8334141](/attachment.cgi?id=8334141&action=edit "Remove buffer from multiview list when neutered") -
Flags: approval-mozilla-aurora? → approval-mozilla-aurora+

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=939472#c12)• 11 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-aurora/rev/ab93ba38200e>
Do we want to take this on the b2g branches?
[status-firefox27](/buglist.cgi?f1=cf_status_firefox27&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=fixed)

|  | [Lukas Blakk [:lsblakk] use ?needinfo](/user_profile?user_id=272375) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=939472#a1366869_272375)• 11 years ago |

[Attachment #8334141](/attachment.cgi?id=8334141&action=edit "Remove buffer from multiview list when neutered") -
Flags: approval-mozilla-beta? → approval-mozilla-beta-

|  | [Steve Fink [:sfink] [:s:]](/user_profile?user_id=359004)  Assignee |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=939472#c13)• 11 years ago |
|  | |

Comment on [attachment 8334141](/attachment.cgi?id=8334141 "Remove buffer from multiview list when neutered") [[details]](/attachment.cgi?id=8334141&action=edit "Remove buffer from multiview list when neutered") [[diff]](/attachment.cgi?id=8334141&action=diff "Remove buffer from multiview list when neutered") [[review]](/page.cgi?id=splinter.html&ignore=&bug=939472&attachment=8334141)
Remove buffer from multiview list when neutered
NOTE: This flag is now for security issues only. Please see <https://wiki.mozilla.org/Release_Management/B2G_Landing> to better understand the B2G approval process and landings.
[Approval Request Comment]
Bug caused by (feature/regressing bug #): 789295
User impact if declined: crashes
Testing completed (on m-c, etc.): on m-c
Risk to taking this patch (and alternatives if risky): similar crashes, if we missed something in the logic
String or IDL/UUID changes made by this patch: none
It might make sense to land this for b2g, since I think they use workers a bit more and may be more likely to encounter this issue? I don't really know though.
[Attachment #8334141](/attachment.cgi?id=8334141&action=edit "Remove buffer from multiview list when neutered") -
Flags: approval-mozilla-b2g26?
[Attachment #8334141](/attachment.cgi?id=8334141&action=edit "Remove buffer from multiview list when neutered") -
Flags: approval-mozilla-b2g18?

|  | [Steve Fink [:sfink] [:s:]](/user_profile?user_id=359004)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=939472#a1381773_359004)• 11 years ago |

Flags: needinfo?(sphink)

|  | [Preeti Raghunath(:Preeti)](/user_profile?user_id=474545) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=939472#a2574352_474545)• 11 years ago |

blocking-b2g: --- → koi+

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=939472#c14)• 11 years ago |
|  | |

Preeti, do we want this on b2g18 as well?
Steve, can you please make at least a b2g26 patch?
[status-b2g-v1.3](/buglist.cgi?f1=cf_status_b2g_1_3&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=fixed)Flags: needinfo?(sphink)Flags: needinfo?(praghunath)Keywords: [branch-patch-needed](/buglist.cgi?keywords=branch-patch-needed&resolution=---)

|  | [Preeti Raghunath(:Preeti)](/user_profile?user_id=474545) |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=939472#c15)• 11 years ago |
|  | |

Ryan
This is not needed for 1.1HD, can track it for 1.1.1 though.Flags: needinfo?(praghunath)

|  | [Steve Fink [:sfink] [:s:]](/user_profile?user_id=359004)  Assignee |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=939472#c16)• 11 years ago |
|  | |

Attached patch

[Remove buffer from multiview list when neutered.](attachment.cgi?id=8355611&action=diff)
— [Details](attachment.cgi?id=8355611&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=939472&attachment=8355611)

Patch for b2g26.

|  | [Steve Fink [:sfink] [:s:]](/user_profile?user_id=359004)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=939472#a4126844_359004)• 11 years ago |

[Attachment #8334141](/attachment.cgi?id=8334141&action=edit "Remove buffer from multiview list when neutered") -
Attachment is obsolete: true
[Attachment #8334141](/attachment.cgi?id=8334141&action=edit "Remove buffer from multiview list when neutered") -
Flags: approval-mozilla-b2g26?
[Attachment #8334141](/attachment.cgi?id=8334141&action=edit "Remove buffer from multiview list when neutered") -
Flags: approval-mozilla-b2g18?

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=939472#a4139151_75935)• 11 years ago |

[status-b2g-v1.1hd](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=equals&v1=wontfix)

|  | [Steve Fink [:sfink] [:s:]](/user_profile?user_id=359004)  Assignee |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=939472#c17)• 11 years ago |
|  | |

<http://hg.mozilla.org/releases/mozilla-b2g26_v1_2/rev/9db448e74615> - backed out a87f1f662a6c because I missed an important clause in the original patch
<http://hg.mozilla.org/releases/mozilla-b2g26_v1_2/rev/a87f1f662a6c> - relanded

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=939472#a4382651_75935)• 11 years ago |

[status-b2g-v1.2](/buglist.cgi?f1=cf_status_b2g_1_2&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=fixed)

|  | [Steve Fink [:sfink] [:s:]](/user_profile?user_id=359004)  Assignee |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=939472#c18)• 11 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-b2g18/rev/d703f1b991f2>
[status-b2g18](/buglist.cgi?f1=cf_status_b2g18&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=fixed)Flags: needinfo?(sphink)

|  | [Steve Fink [:sfink] [:s:]](/user_profile?user_id=359004)  Assignee |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=939472#c19)• 11 years ago |
|  | |

Followup fix <https://hg.mozilla.org/releases/mozilla-b2g18/rev/7ef4780f267f> (I seem to be incapable of doing trivial rebases)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=939472#c20)• 11 years ago |
|  | |

Turns out v1.1hd is still taking security fixes after all.
<https://hg.mozilla.org/releases/mozilla-b2g18_v1_1_0_hd/rev/d703f1b991f2>
<https://hg.mozilla.org/releases/mozilla-b2g18_v1_1_0_hd/rev/7ef4780f267f>
[status-b2g-v1.1hd](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=isnotempty):
[wontfix](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=equals&v1=wontfix) → [fixed](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=equals&v1=fixed)Keywords: [branch-patch-needed](/buglist.cgi?keywords=branch-patch-needed&resolution=---)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=939472#a5770641_280903)• 11 years ago |

Whiteboard: [fuzzblocker:neuter] → [fuzzblocker:neuter][adv-main27+]

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=939472#a14932298_75935)• 11 years ago |

[status-b2g-v1.3T](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=fixed)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=939472#a40276070_1689)• 10 years ago |

Group: core-security
You need to [log in](/show_bug.cgi?id=939472&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Steve Fink [:sfink] [:s:]](/user_profile?user_id=359004)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from bugzilla.mozilla.org_d1260862_20250124_230130.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/938431)
* [XML](/show_bug.cgi?ctype=xml&id=938431)

Closed
[Bug 938431](/show_bug.cgi?id=938431)

Opened 11 years ago
Closed 11 years ago

# Assertion failure: consumer->isConsistentFloat32Use(), at jit/IonAnalysis.cpp

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

Assertion failure: consumer->isConsistentFloat32Use(), at jit/IonAnalysis.cpp

## Categories

### (Core :: JavaScript Engine: JIT, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=JavaScript%20Engine%3A%20JIT#JavaScript%20Engine%3A%20JIT)

JavaScript Engine: JIT
▾

Core :: JavaScript Engine: JIT
JavaScript engine's JIT compilers
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine%3A%20JIT&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine%3A%20JIT&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=JavaScript%20Engine%3A%20JIT)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

x86\_64

macOS

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

critical

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla28

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Performance Impact | --- |
| --- | --- |
| Webcompat Score | --- |
| Accessibility Severity | --- |
| a11y-review | --- |
| Webcompat Priority | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox25 | --- | [unaffected](/buglist.cgi?f1=cf_status_firefox25&o1=equals&v1=unaffected) |
| firefox26 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox26&o1=equals&v1=wontfix) |
| firefox27 | [+](/buglist.cgi?f1=cf_tracking_firefox27&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=fixed) |
| firefox28 | --- | [fixed](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=fixed) |
| firefox-esr24 | --- | [unaffected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=unaffected) |
| b2g18 | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=unaffected) |
| b2g-v1.1hd | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=equals&v1=unaffected) |
| b2g-v1.2 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=fixed) |
| b2g-v1.3 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=fixed) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox25 |  | unaffected |
| firefox26 |  | wontfix |
| firefox27 | + | fixed |
| firefox28 |  | fixed |
| firefox-esr24 |  | unaffected |
| b2g18 |  | unaffected |
| b2g-v1.1hd |  | unaffected |
| b2g-v1.2 |  | fixed |
| b2g-v1.3 |  | fixed |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: gkw, Assigned: bbouvier)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/756fb1e50f81748b5aa628e4fc9bf85a?d=mm&size=40)  [bbouvier](/user_profile?user_id=468907)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

![](https://secure.gravatar.com/avatar/55857f92ded07119259dc6c1dd386205?d=mm&size=40)  [general](/user_profile?user_id=4729)

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](extensions/Gravatar/web/default.jpg)  [gkw](/user_profile?user_id=132034)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/4fe52ee1503aecf7b6c976b8eb7c1753?d=mm&size=40)  [willyelm](/user_profile?user_id=714609)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

10 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[915301](/show_bug.cgi?id=915301 "RESOLVED FIXED - Google Maps smeared street graphics in current Nightly.")

Dependency [tree](/showdependencytree.cgi?id=938431&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=938431)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Keywords: assertion, regression, testcase, Whiteboard: [jsbugmon:update][adv-main27+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[assertion](/buglist.cgi?keywords=assertion&resolution=---),
[regression](/buglist.cgi?keywords=regression&resolution=---),
[testcase](/buglist.cgi?keywords=testcase&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[jsbugmon:update][adv-main27+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | in-testsuite |  |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (2 files)

| [lldb stack](/attachment.cgi?id=831920)  [11 years ago](#c0)  [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)   4.43 KB, text/plain |  | [Details](/attachment.cgi?id=831920&action=edit) |
| --- | --- | --- |
| [Patch and test case](/attachment.cgi?id=832258)  [11 years ago](#c2)  [Benjamin Bouvier [:bbouvier] (inactive)](/user_profile?user_id=468907)   1.27 KB, patch | jonco : [review+](#c3 "11 years ago")  lsblakk : [approval-mozilla-aurora+](#a3178004_272375 "11 years ago")  lsblakk : [approval-mozilla-beta+](#a3178004_272375 "11 years ago")  praghunath : [approval-mozilla-b2g26+](#c17 "11 years ago") | [Details](/attachment.cgi?id=832258&action=edit) | [Diff](/attachment.cgi?id=832258&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=938431&attachment=832258) |

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=938431#c0)• 11 years ago |
|  | |

Attached file
[lldb stack](attachment.cgi?id=831920)
— [Details](attachment.cgi?id=831920&action=edit)

function x() {}
ParallelArray(3385, function(y) {
Object.defineProperty([], 8, {
e: (y ? x : Math.fround(1))
})
})
asserts js debug shell on m-c changeset 7b014f0f3b03 with --baseline-eager at Assertion failure: consumer->isConsistentFloat32Use(), at jit/IonAnalysis.cpp
My configure flags are:
CC="clang -Qunused-arguments" AR=ar CXX="clang++ -Qunused-arguments" sh ./configure --target=x86\_64-apple-darwin12.5.0 --enable-optimize --enable-debug --enable-profiling --enable-gczeal --enable-debug-symbols --enable-methodjit --enable-type-inference --disable-tests --with-ccache --disable-threadsafe
autoBisect shows this is probably related to the following changeset:
The first bad revision is:
changeset: <http://hg.mozilla.org/mozilla-central/rev/13568a3576cd>
user: Benjamin Bouvier
date: Thu Sep 12 14:54:01 2013 -0700
summary: [Bug 915301](/show_bug.cgi?id=915301 "RESOLVED FIXED - Google Maps smeared street graphics in current Nightly."): Check Float32 coherency; r=sstanglFlags: needinfo?(benj)

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)  Reporter |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=938431#c1)• 11 years ago |
|  | |

Older forms of this assertion were marked s-s, e.g. [bug 919522](/show_bug.cgi?id=919522 "RESOLVED DUPLICATE - Assertion failure: consumer->isConsistentFloat32Use(), at jit/IonAnalysis.cpp:922 or Crash [@ js::jit::LIRGenerator::visitTruncateToInt32] with invalid read").Group: core-security

|  | [Benjamin Bouvier [:bbouvier] (inactive)](/user_profile?user_id=468907)  Assignee |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=938431#c2)• 11 years ago |
|  | |

Attached patch

[Patch and test case](attachment.cgi?id=832258&action=diff)
— [Details](attachment.cgi?id=832258&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=938431&attachment=832258)

Sets the MPostWriteBarrier as an always Float32 safe instruction. This makes sense as long as PostWriteBarriers only notify GC of Objects and Values. The modified function is called during the ApplyTypes phase, to check that there is no Float32 flowing into a non Float32-safe operator.Assignee: general → benjStatus: NEW → ASSIGNED
[Attachment #832258](/attachment.cgi?id=832258&action=edit "Patch and test case") -
Flags: review?Flags: needinfo?(benj)

|  | [Benjamin Bouvier [:bbouvier] (inactive)](/user_profile?user_id=468907)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=938431#a55426_468907)• 11 years ago |

[Attachment #832258](/attachment.cgi?id=832258&action=edit "Patch and test case") -
Flags: review? → review?(jcoppeard)

|  | [Jon Coppeard (:jonco) (PTO until 27th Jan)](/user_profile?user_id=443194) |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=938431#c3)• 11 years ago |
|  | |

Comment on [attachment 832258](/attachment.cgi?id=832258 "Patch and test case") [[details]](/attachment.cgi?id=832258&action=edit "Patch and test case") [[diff]](/attachment.cgi?id=832258&action=diff "Patch and test case") [[review]](/page.cgi?id=splinter.html&ignore=&bug=938431&attachment=832258)
Patch and test case
Review of [attachment 832258](/attachment.cgi?id=832258 "Patch and test case") [[details]](/attachment.cgi?id=832258&action=edit "Patch and test case") [[diff]](/attachment.cgi?id=832258&action=diff "Patch and test case") [[review]](/page.cgi?id=splinter.html&ignore=&bug=938431&attachment=832258):
-----------------------------------------------------------------
Looks good.
[Attachment #832258](/attachment.cgi?id=832258&action=edit "Patch and test case") -
Flags: review?(jcoppeard) → review+

|  | [Benjamin Bouvier [:bbouvier] (inactive)](/user_profile?user_id=468907)  Assignee |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=938431#c4)• 11 years ago |
|  | |

<https://hg.mozilla.org/integration/mozilla-inbound/rev/fd55575b3350>

|  | [Wes Kocher (:KWierso) (Not reading bugmail; email directly if needed)](/user_profile?user_id=308534) |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=938431#c5)• 11 years ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/fd55575b3350>Status: ASSIGNED → RESOLVEDClosed: 11 years ago
[status-firefox28](/buglist.cgi?f1=cf_status_firefox28&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=fixed)Resolution: --- → FIXEDTarget Milestone: --- → mozilla28

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=938431#a443974_395101)• 11 years ago |

Status: RESOLVED → VERIFIED

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101) |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=938431#c6)• 11 years ago |
|  | |

JSBugMon: This bug has been automatically verified fixed.

|  | [Phil Ringnalda (:philor)](/user_profile?user_id=135518) |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=938431#c7)• 11 years ago |
|  | |

Pushed <https://hg.mozilla.org/integration/mozilla-inbound/rev/e4b5ab3610da> as a followup for the test, to bail when ParallelArray isn't defined, since it's only on the trunk.

|  | [Phil Ringnalda (:philor)](/user_profile?user_id=135518) |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=938431#c8)• 11 years ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/e4b5ab3610da>

|  | [David Chan [:dchan]](/user_profile?user_id=380069) |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=938431#c9)• 11 years ago |
|  | |

Per [comment 0](/show_bug.cgi?id=938431#c0 "VERIFIED FIXED - Assertion failure: consumer->isConsistentFloat32Use(), at jit/IonAnalysis.cpp") b2g18 and b2g1.1 are unaffected. The first bad revision was in September so b2g1.2 may be affected.
[status-b2g18](/buglist.cgi?f1=cf_status_b2g18&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=unaffected)
[status-b2g-v1.1hd](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=equals&v1=unaffected)
[status-b2g-v1.2](/buglist.cgi?f1=cf_status_b2g_1_2&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=%3F)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=938431#c10)• 11 years ago |
|  | |

Is there a reason this bug didn't go through sec-approval (and security rating) before checkin since it affects more than one branch?
<https://wiki.mozilla.org/Security/Bug_Approval_Process>
[status-firefox25](/buglist.cgi?f1=cf_status_firefox25&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_firefox25&o1=equals&v1=unaffected)
[status-firefox26](/buglist.cgi?f1=cf_status_firefox26&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox26&o1=equals&v1=affected)
[status-firefox27](/buglist.cgi?f1=cf_status_firefox27&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=affected)
[status-firefox-esr24](/buglist.cgi?f1=cf_status_firefox_esr24&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=unaffected)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=938431#c11)• 11 years ago |
|  | |

Marking b2g 1.2 affected since it is based on 26, which is affected by this bug (along with 27).
[status-b2g-v1.2](/buglist.cgi?f1=cf_status_b2g_1_2&o1=isnotempty):
[?](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=%3F) → [affected](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=affected)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=938431#c12)• 11 years ago |
|  | |

Can we please get Aurora/Beta/b2g26 uplift noms?Flags: needinfo?(benj)

|  | [Benjamin Bouvier [:bbouvier] (inactive)](/user_profile?user_id=468907)  Assignee |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=938431#c13)• 11 years ago |
|  | |

Comment on [attachment 832258](/attachment.cgi?id=832258 "Patch and test case") [[details]](/attachment.cgi?id=832258&action=edit "Patch and test case") [[diff]](/attachment.cgi?id=832258&action=diff "Patch and test case") [[review]](/page.cgi?id=splinter.html&ignore=&bug=938431&attachment=832258)
Patch and test case
[Approval Request Comment]
Bug caused by (feature/regressing bug #): 888109
User impact if declined: crashes on certain scripts
Testing completed (on m-c, etc.): test added, testing completed on m-i, m-c for some time now
Risk to taking this patch (and alternatives if risky): no risk at all
String or IDL/UUID changes made by this patch: N/A
[Attachment #832258](/attachment.cgi?id=832258&action=edit "Patch and test case") -
Flags: approval-mozilla-beta?
[Attachment #832258](/attachment.cgi?id=832258&action=edit "Patch and test case") -
Flags: approval-mozilla-b2g26?
[Attachment #832258](/attachment.cgi?id=832258&action=edit "Patch and test case") -
Flags: approval-mozilla-aurora?Flags: needinfo?(benj)

|  | [Lukas Blakk [:lsblakk] use ?needinfo](/user_profile?user_id=272375) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=938431#a3178004_272375)• 11 years ago |

[Attachment #832258](/attachment.cgi?id=832258&action=edit "Patch and test case") -
Flags: approval-mozilla-beta?
[Attachment #832258](/attachment.cgi?id=832258&action=edit "Patch and test case") -
Flags: approval-mozilla-beta+
[Attachment #832258](/attachment.cgi?id=832258&action=edit "Patch and test case") -
Flags: approval-mozilla-aurora?
[Attachment #832258](/attachment.cgi?id=832258&action=edit "Patch and test case") -
Flags: approval-mozilla-aurora+

|  | [Lukas Blakk [:lsblakk] use ?needinfo](/user_profile?user_id=272375) |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=938431#c14)• 11 years ago |
|  | |

Looks like this actually only needs to get on Beta since 27 is already marked fixed.
[status-firefox26](/buglist.cgi?f1=cf_status_firefox26&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox26&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_firefox26&o1=equals&v1=wontfix)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=938431#a3261804_280903)• 11 years ago |

[tracking-firefox27](/buglist.cgi?f1=cf_tracking_firefox27&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox27&o1=equals&v1=%2B)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=938431#c15)• 11 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-beta/rev/2765cb3f2d5e>
[status-b2g-v1.3](/buglist.cgi?f1=cf_status_b2g_1_3&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=fixed)
[status-firefox27](/buglist.cgi?f1=cf_status_firefox27&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=fixed)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=938431#c16)• 11 years ago |
|  | |

FWIW, the b2g26 backport is green on Try.

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=938431#a6030533_280903)• 11 years ago |

Whiteboard: [jsbugmon:update] → [jsbugmon:update][adv-main27+]

|  | [Preeti Raghunath(:Preeti)](/user_profile?user_id=474545) |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=938431#c17)• 11 years ago |
|  | |

Comment on [attachment 832258](/attachment.cgi?id=832258 "Patch and test case") [[details]](/attachment.cgi?id=832258&action=edit "Patch and test case") [[diff]](/attachment.cgi?id=832258&action=diff "Patch and test case") [[review]](/page.cgi?id=splinter.html&ignore=&bug=938431&attachment=832258)
Patch and test case
Plus for approval‑mozilla‑b2g26: Regression
[Attachment #832258](/attachment.cgi?id=832258&action=edit "Patch and test case") -
Flags: approval-mozilla-b2g26? → approval-mozilla-b2g26+

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=938431#c18)• 11 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-b2g26_v1_2/rev/58883895d655>
[status-b2g-v1.2](/buglist.cgi?f1=cf_status_b2g_1_2&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=fixed)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=938431#a6761396_1689)• 11 years ago |

Group: core-security
You need to [log in](/show_bug.cgi?id=938431&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review


