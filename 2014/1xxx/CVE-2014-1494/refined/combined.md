=== Content from lists.opensuse.org_49672052_20250125_003632.html ===


[![openSUSE](https://static.opensuse.org/favicon.svg)
Mailing Lists](/archives/ "openSUSE Mailing Lists")

[Sign In](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/MOFHAO47CC27RW4NRZBU4ZLOZQIUJWJ4/)
[Sign Up](/accounts/signup/?next=/archives/list/security-announce%40lists.opensuse.org/message/MOFHAO47CC27RW4NRZBU4ZLOZQIUJWJ4/)

[Manage this list](/manage/lists/security-announce.lists.opensuse.org/)
[Sign In](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/MOFHAO47CC27RW4NRZBU4ZLOZQIUJWJ4/)
[Sign Up](/accounts/signup/?next=/archives/list/security-announce%40lists.opensuse.org/message/MOFHAO47CC27RW4NRZBU4ZLOZQIUJWJ4/)

×
#### Keyboard Shortcuts

### Thread View

* `j`: Next unread message
* `k`: Previous unread message
* `j a`: Jump to all threads* `j l`: Jump to MailingList overview

[thread](/archives/list/security-announce%40lists.opensuse.org/thread/MOFHAO47CC27RW4NRZBU4ZLOZQIUJWJ4/#MOFHAO47CC27RW4NRZBU4ZLOZQIUJWJ4)

# [security-announce] SUSE-SU-2014:0418-1: important: Security update for MozillaFirefox

![](https://seccdn.libravatar.org/avatar/099a17325bdf082b643d1a6bbacde279.jpg?s=120&d=mm&r=g)
## [opensuse-security＠opensuse.org](/archives/users/1b72def497ef4503896cd7a5fe9fb8e0/ "See the profile for opensuse-security＠opensuse.org")

21 Mar
2014

21 Mar
'14

22:04

SUSE Security Update: Security update for MozillaFirefox
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
Announcement ID: SUSE-SU-2014:0418-1
Rating: important
References: #868603
Affected Products:
SUSE Linux Enterprise Software Development Kit 11 SP3
SUSE Linux Enterprise Server 11 SP3 for VMware
SUSE Linux Enterprise Server 11 SP3
SUSE Linux Enterprise Desktop 11 SP3
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
An update that contains security fixes can now be
installed. It includes two new package versions.
Description:
Mozilla Firefox was updated to 24.4.0ESR release, fixing
various security issues and bugs:
\*
MFSA 2014-15: Mozilla developers and community
identified identified and fixed several memory safety bugs
in the browser engine used in Firefox and other
Mozilla-based products. Some of these bugs showed evidence
of memory corruption under certain circumstances, and we
presume that with enough effort at least some of these
could be exploited to run arbitrary code.
\*
Benoit Jacob, Olli Pettay, Jan Varga, Jan de Mooij,
Jesse Ruderman, Dan Gohman, and Christoph Diehl reported
memory safety problems and crashes that affect Firefox ESR
24.3 and Firefox 27. (CVE-2014-1493)
\*
Gregor Wagner, Olli Pettay, Gary Kwong, Jesse
Ruderman, Luke Wagner, Rob Fletcher, and Makoto Kato
reported memory safety problems and crashes that affect
Firefox 27. (CVE-2014-1494)
\*
MFSA 2014-16 / CVE-2014-1496: Security researcher Ash
reported an issue where the extracted files for updates to
existing files are not read only during the update process.
This allows for the potential replacement or modification
of these files during the update process if a malicious
application is present on the local system.
\*
MFSA 2014-17 / CVE-2014-1497: Security researcher
Atte Kettunen from OUSPG reported an out of bounds read
during the decoding of WAV format audio files for playback.
This could allow web content access to heap data as well as
causing a crash.
\*
MFSA 2014-18 / CVE-2014-1498: Mozilla developer David
Keeler reported that the crypto.generateCRFMRequest method
did not correctly validate the key type of the KeyParams
argument when generating ec-dual-use requests. This could
lead to a crash and a denial of service (DOS) attack.
\*
MFSA 2014-19 / CVE-2014-1499: Mozilla developer Ehsan
Akhgari reported a spoofing attack where the permission
prompt for a WebRTC session can appear to be from a
different site than its actual originating site if a timed
navigation occurs during the prompt generation. This allows
an attacker to potentially gain access to the webcam or
microphone by masquerading as another site and gaining user
permission through spoofing.
\*
MFSA 2014-20 / CVE-2014-1500: Security researchers
Tim Philipp Schaefers and Sebastian Neef, the team of
Internetwache.org, reported a mechanism using JavaScript
onbeforeunload events with page navigation to prevent users
from closing a malicious page's tab and causing the browser
to become unresponsive. This allows for a denial of service
(DOS) attack due to resource consumption and blocks the
ability of users to exit the application.
\*
MFSA 2014-21 / CVE-2014-1501: Security researcher
Alex Infuehr reported that on Firefox for Android it is
possible to open links to local files from web content by
selecting "Open Link in New Tab" from the context menu
using the file: protocol. The web content would have to
know the precise location of a malicious local file in
order to exploit this issue. This issue does not affect
Firefox on non-Android systems.
\*
MFSA 2014-22 / CVE-2014-1502: Mozilla developer Jeff
Gilbert discovered a mechanism where a malicious site with
WebGL content could inject content from its context to that
of another site's WebGL context, causing the second site to
replace textures and similar content. This cannot be used
to steal data but could be used to render arbitrary content
in these limited circumstances.
\*
MFSA 2014-23 / CVE-2014-1504: Security researcher
Nicolas Golubovic reported that the Content Security Policy
(CSP) of data: documents was not saved as part of session
restore. If an attacker convinced a victim to open a
document from a data: URL injected onto a page, this can
lead to a Cross-Site Scripting (XSS) attack. The target
page may have a strict CSP that protects against this XSS
attack, but if the attacker induces a browser crash with
another bug, an XSS attack would occur during session
restoration, bypassing the CSP on the site.
\*
MFSA 2014-26 / CVE-2014-1508: Security researcher
Tyson Smith and Jesse Schwartzentruber of the BlackBerry
Security Automated Analysis Team used the Address Sanitizer
tool while fuzzing to discover an out-of-bounds read during
polygon rendering in MathML. This can allow web content to
potentially read protected memory addresses. In combination
with previous techniques used for SVG timing attacks, this
could allow for text values to be read across domains,
leading to information disclosure.
\*
MFSA 2014-27 / CVE-2014-1509: Security researcher
John Thomson discovered a memory corruption in the Cairo
graphics library during font rendering of a PDF file for
display. This memory corruption leads to a potentially
exploitable crash and to a denial of service (DOS). This
issues is not able to be triggered in a default
configuration and would require a malicious extension to be
installed.
\*
MFSA 2014-28 / CVE-2014-1505: Mozilla developer
Robert O'Callahan reported a mechanism for timing attacks
involving SVG filters and displacements input to
feDisplacementMap. This allows displacements to potentially
be correlated with values derived from content. This is
similar to the previously reported techniques used for SVG
timing attacks and could allow for text values to be read
across domains, leading to information disclosure.
\*
MFSA 2014-29 / CVE-2014-1510 / CVE-2014-1511:
Security researcher Mariusz Mlynski, via TippingPoint's
Pwn2Own contest, reported that it is possible for untrusted
web content to load a chrome-privileged page by getting
JavaScript-implemented WebIDL to call window.open(). A
second bug allowed the bypassing of the popup-blocker
without user interaction. Combined these two bugs allow an
attacker to load a JavaScript URL that is executed with the
full privileges of the browser, which allows arbitrary code
execution.
\*
MFSA 2014-30 / CVE-2014-1512: Security research firm
VUPEN, via TippingPoint's Pwn2Own contest, reported that
memory pressure during Garbage Collection could lead to
memory corruption of TypeObjects in the JS engine,
resulting in an exploitable use-after-free condition.
\*
MFSA 2014-31 / CVE-2014-1513: Security researcher
Jueri Aedla, via TippingPoint's Pwn2Own contest, reported
that TypedArrayObject does not handle the case where
ArrayBuffer objects are neutered, setting their length to
zero while still in use. This leads to out-of-bounds reads
and writes into the JavaScript heap, allowing for arbitrary
code execution.
\*
MFSA 2014-32 / CVE-2014-1514: Security researcher
George Hotz, via TippingPoint's Pwn2Own contest, discovered
an issue where values are copied from an array into a
second, neutered array. This allows for an out-of-bounds
write into memory, causing an exploitable crash leading to
arbitrary code execution.
Patch Instructions:
To install this SUSE Security Update use YaST online\_update.
Alternatively you can run the command listed for your product:
- SUSE Linux Enterprise Software Development Kit 11 SP3:
zypper in -t patch sdksp3-firefox-201403-9049
- SUSE Linux Enterprise Server 11 SP3 for VMware:
zypper in -t patch slessp3-firefox-201403-9049
- SUSE Linux Enterprise Server 11 SP3:
zypper in -t patch slessp3-firefox-201403-9049
- SUSE Linux Enterprise Desktop 11 SP3:
zypper in -t patch sledsp3-firefox-201403-9049
To bring your system up-to-date, use "zypper patch".
Package List:
- SUSE Linux Enterprise Software Development Kit 11 SP3 (i586 ia64 ppc64 s390x x86\_64) [New Version: 4.10.4]:
MozillaFirefox-devel-24.4.0esr-0.8.1
mozilla-nspr-devel-4.10.4-0.3.1
- SUSE Linux Enterprise Server 11 SP3 for VMware (i586 x86\_64) [New Version: 24.4.0esr and 4.10.4]:
MozillaFirefox-24.4.0esr-0.8.1
MozillaFirefox-translations-24.4.0esr-0.8.1
mozilla-nspr-4.10.4-0.3.1
- SUSE Linux Enterprise Server 11 SP3 for VMware (x86\_64) [New Version: 4.10.4]:
mozilla-nspr-32bit-4.10.4-0.3.1
- SUSE Linux Enterprise Server 11 SP3 (i586 ia64 ppc64 s390x x86\_64) [New Version: 24.4.0esr and 4.10.4]:
MozillaFirefox-24.4.0esr-0.8.1
MozillaFirefox-branding-SLED-24-0.7.23
MozillaFirefox-translations-24.4.0esr-0.8.1
mozilla-nspr-4.10.4-0.3.1
- SUSE Linux Enterprise Server 11 SP3 (ppc64 s390x x86\_64) [New Version: 4.10.4]:
mozilla-nspr-32bit-4.10.4-0.3.1
- SUSE Linux Enterprise Server 11 SP3 (ia64) [New Version: 4.10.4]:
mozilla-nspr-x86-4.10.4-0.3.1
- SUSE Linux Enterprise Desktop 11 SP3 (i586 x86\_64) [New Version: 24.4.0esr and 4.10.4]:
MozillaFirefox-24.4.0esr-0.8.1
MozillaFirefox-branding-SLED-24-0.7.23
MozillaFirefox-translations-24.4.0esr-0.8.1
mozilla-nspr-4.10.4-0.3.1
- SUSE Linux Enterprise Desktop 11 SP3 (x86\_64) [New Version: 4.10.4]:
mozilla-nspr-32bit-4.10.4-0.3.1
References:
<https://bugzilla.novell.com/868603>
[http://download.suse.com/patch/finder/?keywords=459a5273e5dbc348d118a4805207...](http://download.suse.com/patch/finder/?keywords=459a5273e5dbc348d118a48052078601)
--
To unsubscribe, e-mail: opensuse-security-announce+unsubscribe@opensuse.org
For additional commands, e-mail: opensuse-security-announce+help@opensuse.org

[0](#like "You must be logged-in to vote.")
[0](#dislike "You must be logged-in to vote.")

Reply

[Sign in to reply online](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/MOFHAO47CC27RW4NRZBU4ZLOZQIUJWJ4/)
Use email software

[Back to the thread](/archives/list/security-announce%40lists.opensuse.org/thread/MOFHAO47CC27RW4NRZBU4ZLOZQIUJWJ4/#MOFHAO47CC27RW4NRZBU4ZLOZQIUJWJ4)

[Back to the list](/archives/list/security-announce%40lists.opensuse.org/)

![HyperKitty](/static/hyperkitty/img/logo.png)
Powered by [HyperKitty](http://hyperkitty.readthedocs.org) version 1.3.12.



=== Content from bugzilla.mozilla.org_5b225f52_20250125_003642.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/933219)
* [XML](/show_bug.cgi?ctype=xml&id=933219)

Closed
[Bug 933219](/show_bug.cgi?id=933219)

Opened 11 years ago
Closed 11 years ago

# Compartment mismatch when sending multiple messages in test\_outgoing.js

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

Compartment mismatch when sending multiple messages in test\_outgoing.js

## Categories

### (Firefox OS Graveyard :: RIL, defect)

[Product:](/describecomponents.cgi?product=Firefox%20OS%20Graveyard)

Firefox OS Graveyard
▾

Firefox OS Graveyard
FirefoxOS, or Boot2Gecko (B2G) is Mozilla's operating system built on web standards. ([more info](https://wiki.mozilla.org/B2G))
[See Open Bugs in This Product](/buglist.cgi?product=Firefox%20OS%20Graveyard&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Firefox%20OS%20Graveyard)
Watch This Product

[Component:](/describecomponents.cgi?product=Firefox%20OS%20Graveyard&component=RIL#RIL)

RIL
▾

Firefox OS Graveyard :: RIL
Gecko & Gonk issues related to the Radio Interface Layer (RIL) in the BootToGecko product such as Telephony, Messaging, Data Connection, and WAP Push.
[See Open Bugs in This Component](/buglist.cgi?product=Firefox%20OS%20Graveyard&component=RIL&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Firefox%20OS%20Graveyard&component=RIL&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Firefox%20OS%20Graveyard&component=RIL)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

unspecified

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

x86

macOS

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

normal

## Tracking

### (blocking-b2g:koi+, firefox26 wontfix, firefox27 wontfix, firefox28 fixed, firefox-esr24- unaffected, b2g18 fixed, b2g-v1.1hd fixed, b2g-v1.2 fixed, b2g-v1.3 fixed, b2g-v1.3T fixed, b2g-v1.4 unaffected)

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

1.3 Sprint 6 - 12/6

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| blocking-b2g | [koi+](/buglist.cgi?f1=cf_blocking_b2g&o1=equals&v1=koi%2B) |
| --- | --- |

| blocking-b2g | koi+ |
| --- | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox26 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox26&o1=equals&v1=wontfix) |
| firefox27 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=wontfix) |
| firefox28 | --- | [fixed](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=fixed) |
| firefox-esr24 | [-](/buglist.cgi?f1=cf_tracking_firefox_esr24&o1=equals&v1=-) | [unaffected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=unaffected) |
| b2g18 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=fixed) |
| b2g-v1.1hd | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=equals&v1=fixed) |
| b2g-v1.2 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=fixed) |
| b2g-v1.3 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=fixed) |
| b2g-v1.3T | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=fixed) |
| b2g-v1.4 | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=unaffected) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox26 |  | wontfix |
| firefox27 |  | wontfix |
| firefox28 |  | fixed |
| firefox-esr24 | - | unaffected |
| b2g18 |  | fixed |
| b2g-v1.1hd |  | fixed |
| b2g-v1.2 |  | fixed |
| b2g-v1.3 |  | fixed |
| b2g-v1.3T |  | fixed |
| b2g-v1.4 |  | unaffected |

## People

### (Reporter: gwagner, Assigned: mrbkap)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/89d2149736265010bfe669ce8c3075c0?d=mm&size=40)  [mrbkap](/user_profile?user_id=69426)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/1ab9ae817c429c697626739e4d222c88?d=mm&size=40)  [gwagner](/user_profile?user_id=314734)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

---

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

18 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

[934000](/show_bug.cgi?id=934000 "RESOLVED FIXED - Port bug 864558 to MobileMessageManager.cpp")

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[933355](/show_bug.cgi?id=933355 "RESOLVED WONTFIX - [meta] Warnings and Assertions for OOP b2g-desktop and debug-emulator")

Dependency [tree](/showdependencytree.cgi?id=933219&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=933219)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Keywords: sec-high, Whiteboard: [adv-main28+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[sec-high](/buglist.cgi?keywords=sec-high&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[adv-main28+]

QA Whiteboard:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

|  | sec-bounty | ? |
| --- | --- | --- |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | in-testsuite |  |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (4 files, 1 obsolete file)

| [Fix compartment mismatch in MobileMessageManager::Send](/attachment.cgi?id=8342786)  [11 years ago](#c10)  [Blake Kaplan (:mrbkap) (inactive)](/user_profile?user_id=69426)   1.27 KB, patch | gwagner : [review+](#a3046333_314734 "11 years ago") | [Details](/attachment.cgi?id=8342786&action=edit) | [Diff](/attachment.cgi?id=8342786&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=933219&attachment=8342786) |
| --- | --- | --- |
| [Fix compartment mismatch in MobileMessageManager::Delete.](/attachment.cgi?id=8342787)  [11 years ago](#c11)  [Blake Kaplan (:mrbkap) (inactive)](/user_profile?user_id=69426)   5.78 KB, patch | gwagner : [review+](#a3046534_314734 "11 years ago") | [Details](/attachment.cgi?id=8342787&action=edit) | [Diff](/attachment.cgi?id=8342787&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=933219&attachment=8342787) |
| [Patch for b2g26](/attachment.cgi?id=8360158)  [11 years ago](#c17)  [Blake Kaplan (:mrbkap) (inactive)](/user_profile?user_id=69426)   6.86 KB, patch | gwagner : [review+](#a6589229_314734 "11 years ago") | [Details](/attachment.cgi?id=8360158&action=edit) | [Diff](/attachment.cgi?id=8360158&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=933219&attachment=8360158) |
| [Possibly the patch for b2g18](/attachment.cgi?id=8360165)  [11 years ago](#c18)  [Blake Kaplan (:mrbkap) (inactive)](/user_profile?user_id=69426)   6.82 KB, patch |  | [Details](/attachment.cgi?id=8360165&action=edit) | [Diff](/attachment.cgi?id=8360165&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=933219&attachment=8360165) |
| [Patch for b2g18](/attachment.cgi?id=8360549)  [11 years ago](#c19)  [Blake Kaplan (:mrbkap) (inactive)](/user_profile?user_id=69426)   6.82 KB, patch | gwagner : [review+](#a6589285_314734 "11 years ago") | [Details](/attachment.cgi?id=8360549&action=edit) | [Diff](/attachment.cgi?id=8360549&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=933219&attachment=8360549) |

Show Obsolete

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Gregor Wagner [:gwagner]](/user_profile?user_id=314734)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=933219#c0)• 11 years ago |
|  | |

Running marionette tests on debug emulator build crashes with a compartment mismatch error.
<https://tbpl.mozilla.org/php/getParsedLog.php?id=29907361&tree=Pine&full=1>
The interesting thing here is that sending a single message works but sending multiple ones doesn't:
INFO - 10-31 01:37:16.624 45 45 I Gecko : MARIONETTE TEST RESULT:TEST-PASS | test\_outgoing.js | the messages got from onsent event and request result must be the same - 1383197833446 should equal 1383197833446
22:39:02 INFO - 10-31 01:37:16.634 45 45 I Gecko : MARIONETTE LOG: INFO: Done!
22:39:02 INFO - 10-31 01:37:16.863 45 45 I Gecko : MARIONETTE LOG: INFO: Testing sending message to multiple receivers:
INFO - 10-31 01:37:16.883 45 45 F MOZ\_CRASH: Hit MOZ\_CRASH() at ../../../gecko/js/src/jscntxtinlines.h:40
We don't have a stack :(

|  | [Gregor Wagner [:gwagner]](/user_profile?user_id=314734)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=933219#a101583_314734)• 11 years ago |

Blocks: [933355](/show_bug.cgi?id=933355 "RESOLVED WONTFIX - [meta] Warnings and Assertions for OOP b2g-desktop and debug-emulator")

|  | [Andrew Overholt [:overholt]](/user_profile?user_id=442218) |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=933219#c1)• 11 years ago |
|  | |

(In reply to Gregor Wagner [:gwagner] from [comment #0](/show_bug.cgi?id=933219#c0 "RESOLVED FIXED - Compartment mismatch when sending multiple messages in test_outgoing.js"))
> We don't have a stack :(
[Bug 866937](/show_bug.cgi?id=866937 "RESOLVED WONTFIX - B2G crash stacks are missing symbol information")?

|  | [Andrew Overholt [:overholt]](/user_profile?user_id=442218) |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=933219#c2)• 11 years ago |
|  | |

bholley/mrbkap, something you can investigate?Flags: needinfo?(mrbkap)Flags: needinfo?(bobbyholley+bmo)

|  | [Jonathan Griffin (:jgriffin)](/user_profile?user_id=347295) |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=933219#c3)• 11 years ago |
|  | |

To reproduce locally, you need to download a debug emulator from pine (assuming you don't want to build one yourself) at e.g., <https://pvtbuilds.mozilla.org/pub/mozilla.org/b2g/tinderbox-builds/pine-generic-debug/20131101113220/> and extract it to $EMULATOR\_DIR
Then, download the corresponding tests.zip package at the same url and extract it to $TESTS\_DIR
cd $TESTS\_DIR/marionette
python setup.py develop
cd marionette
python runtests.py --emulator arm --homedir $EMULATOR\_DIR --type b2g ../tests/testing/marionette/client/marionette/tests/unit-tests.ini
You may want to do the above inside a Python virtualenv (<https://developer.mozilla.org/en-US/docs/Python/Virtualenv>) to avoid Python package problems.

|  | [Bobby Holley (:bholley)](/user_profile?user_id=313730) |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=933219#c4)• 11 years ago |
|  | |

Compartment mismatches are generally diagnosable from a stack, and if not, definitely from gdb. I'm happy to look at stacks and help someone debug if anything turns out to be tricky, but my bandwidth is limited, and it's not yet clear to me that my particular expertise is needed here.Flags: needinfo?(bobbyholley+bmo)

|  | [Bobby Holley (:bholley)](/user_profile?user_id=313730) |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=933219#c5)• 11 years ago |
|  | |

Also, let's be safe here given that this is a compartment mismatch.Group: core-security

|  | [Blake Kaplan (:mrbkap) (inactive)](/user_profile?user_id=69426)  Assignee |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=933219#c6)• 11 years ago |
|  | |

I think I see the problem. Note also [bug 934000](/show_bug.cgi?id=934000 "RESOLVED FIXED - Port bug 864558 to MobileMessageManager.cpp") that we should fix at the same time.Assignee: nobody → mrbkapDepends on: [934000](/show_bug.cgi?id=934000 "RESOLVED FIXED - Port bug 864558 to MobileMessageManager.cpp")Flags: needinfo?(mrbkap)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=933219#a538053_1689)• 11 years ago |

Keywords: [sec-high](/buglist.cgi?keywords=sec-high&resolution=---)

|  | [Vicamo Yang [:vicamo][:vyang]](/user_profile?user_id=434284) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=933219#a1293207_434284)• 11 years ago |

Group: core-securityComponent: DOM: Device Interfaces → RILProduct: Core → Firefox OS

|  | [Andrew Overholt [:overholt]](/user_profile?user_id=442218) |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=933219#c7)• 11 years ago |
|  | |

Re-setting core-security since I suspect it may have been removed by accident.Group: core-security

|  | [Bobby Holley (:bholley)](/user_profile?user_id=313730) |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=933219#c8)• 11 years ago |
|  | |

(In reply to Andrew Overholt [:overholt] from [comment #7](/show_bug.cgi?id=933219#c7 "RESOLVED FIXED - Compartment mismatch when sending multiple messages in test_outgoing.js"))
> Re-setting core-security since I suspect it may have been removed by
> accident.
Vicamo, do you know what caused you to open up the bug? Doing so is a pretty big security hazard, so it's pretty important to avoid doing so in the future.

|  | [Gregor Wagner [:gwagner]](/user_profile?user_id=314734)  Reporter |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=933219#c9)• 11 years ago |
|  | |

Program received signal SIGSEGV, Segmentation fault.
0xb5750710 in js::CompartmentChecker::fail (c1=<optimized out>, c2=<optimized out>) at ../../../js/src/jscntxtinlines.h:40
40 MOZ\_CRASH();
(gdb) bt
#0 0xb5750710 in js::CompartmentChecker::fail (c1=<optimized out>, c2=<optimized out>) at ../../../js/src/jscntxtinlines.h:40
#1 0xb58ee354 in check (c=<optimized out>, this=<optimized out>) at ../../../js/src/jscntxtinlines.h:61
#2 js::CompartmentChecker::check (this=<optimized out>, c=<optimized out>) at ../../../js/src/jscntxtinlines.h:56
#3 0xb58ee380 in check (obj=<optimized out>, this=0xbea4d360) at ../../../js/src/jscntxtinlines.h:72
#4 js::assertSameCompartment<JS::Rooted<JSObject\*> > (cx=0xae82e090, t1=<optimized out>) at ../../../js/src/jscntxtinlines.h:147
#5 0xb58f95e8 in assertSameCompartment<JS::Rooted<JSObject\*> > (t1=..., cx=0xae82e090) at ../../../js/src/jscntxtinlines.h:146
#6 JS\_IsArrayObject (cx=0xae82e090, objArg=<optimized out>) at ../../../js/src/jsapi.cpp:3819
#7 0xb4df783c in Delete (aRequest=0xbea4d4e8, aParam=..., this=0xac9c4400) at ../../../../dom/mobilemessage/src/MobileMessageManager.cpp:344
#8 mozilla::dom::MobileMessageManager::Delete (this=0xac9c4400, aParam=..., aRequest=0xbea4d4e8) at ../../../../dom/mobilemessage/src/MobileMessageManager.cpp:323
#9 0xb469c356 in NS\_InvokeByIndex (that=0xac9c4428, methodIndex=20, paramCount=<optimized out>, params=<optimized out>) at ../../../../../../../xpcom/reflect/xptcall/src/md/unix/xptcinvoke\_arm.cpp:164
#10 0xb4cff370 in Invoke (this=0xbea4d4b0) at ../../../../js/xpconnect/src/XPCWrappedNative.cpp:2567
#11 CallMethodHelper::Call (this=0xbea4d4b0) at ../../../../js/xpconnect/src/XPCWrappedNative.cpp:1907
#12 0xb4cffe2c in XPCWrappedNative::CallMethod (ccx=..., mode=XPCWrappedNative::CALL\_METHOD) at ../../../../js/xpconnect/src/XPCWrappedNative.cpp:1873
#13 0xb4d00236 in XPC\_WN\_CallMethod (cx=0xb6a63bc0, argc=1, vp=<optimized out>) at ../../../../js/xpconnect/src/XPCWrappedNativeJSOps.cpp:1301
#14 0xb59aef08 in js::CallJSNative (cx=0xb6a63bc0, native=0xb4d00141 <XPC\_WN\_CallMethod(JSContext\*, unsigned int, JS::Value\*)>, args=...) at ../../../js/src/jscntxtinlines.h:220
#15 0xb59d69e2 in js::Invoke (cx=0xb6a63bc0, args=..., construct=js::NO\_CONSTRUCT) at ../../../js/src/vm/Interpreter.cpp:463
#16 0xb59cd42c in Interpret (cx=0xb6a63bc0, state=...) at ../../../js/src/vm/Interpreter.cpp:2505
#17 0xb59d53ec in RunScript (state=..., cx=0xb6a63bc0) at ../../../js/src/vm/Interpreter.cpp:420
#18 js::RunScript (cx=0xb6a63bc0, state=...) at ../../../js/src/vm/Interpreter.cpp:387
#19 0xb59d6990 in js::Invoke (cx=0xb6a63bc0, args=..., construct=js::NO\_CONSTRUCT) at ../../../js/src/vm/Interpreter.cpp:482
#20 0xb59d6f2a in js::Invoke (cx=0xb6a63bc0, thisv=<optimized out>, fval=..., argc=1, argv=0xb20210d8, rval=...) at ../../../js/src/vm/Interpreter.cpp:513
#21 0xb5951c64 in js::DirectProxyHandler::call (this=<optimized out>, cx=<optimized out>, proxy=<optimized out>, args=...) at ../../../js/src/jsproxy.cpp:467
#22 0xb5982e8e in js::CrossCompartmentWrapper::call (this=0xb6552b04, cx=0xb6a63bc0, wrapper=..., args=...) at ../../../js/src/jswrapper.cpp:457
#23 0xb597095e in js::Proxy::call (cx=<optimized out>, proxy=..., args=...) at ../../../js/src/jsproxy.cpp:2658
#24 0xb5970a04 in proxy\_Call (cx=0xb6a63bc0, argc=<optimized out>, vp=<optimized out>) at ../../../js/src/jsproxy.cpp:3066
#25 0xb59aef08 in js::CallJSNative (cx=0xb6a63bc0, native=0xb5970985 <proxy\_Call(JSContext\*, unsigned int, JS::Value\*)>, args=...) at ../../../js/src/jscntxtinlines.h:220
#26 0xb59d6a90 in js::Invoke (cx=0xb6a63bc0, args=..., construct=js::NO\_CONSTRUCT) at ../../../js/src/vm/Interpreter.cpp:456
#27 0xb59cd42c in Interpret (cx=0xb6a63bc0, state=...) at ../../../js/src/vm/Interpreter.cpp:2505
#28 0xb59d53ec in RunScript (state=..., cx=0xb6a63bc0) at ../../../js/src/vm/Interpreter.cpp:420
#29 js::RunScript (cx=0xb6a63bc0, state=...) at ../../../js/src/vm/Interpreter.cpp:387
#30 0xb59d6990 in js::Invoke (cx=0xb6a63bc0, args=..., construct=js::NO\_CONSTRUCT) at ../../../js/src/vm/Interpreter.cpp:482
#31 0xb592cc9e in js::CallOrConstructBoundFunction (cx=<optimized out>, argc=<optimized out>, vp=0xbea4f330) at ../../../js/src/jsfun.cpp:1274
#32 0xb59aef08 in js::CallJSNative (cx=0xb6a63bc0, native=0xb592cb09 <js::CallOrConstructBoundFunction(JSContext\*, unsigned int, JS::Value\*)>, args=...) at ../../../js/src/jscntxtinlines.h:220

|  | [Blake Kaplan (:mrbkap) (inactive)](/user_profile?user_id=69426)  Assignee |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=933219#c10)• 11 years ago |
|  | |

Attached patch

[Fix compartment mismatch in MobileMessageManager::Send](attachment.cgi?id=8342786&action=diff)
— [Details](attachment.cgi?id=8342786&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=933219&attachment=8342786)

[Attachment #8342786](/attachment.cgi?id=8342786&action=edit "Fix compartment mismatch in MobileMessageManager::Send") -
Flags: review?(anygregor)

|  | [Blake Kaplan (:mrbkap) (inactive)](/user_profile?user_id=69426)  Assignee |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=933219#c11)• 11 years ago |
|  | |

Attached patch

[Fix compartment mismatch in MobileMessageManager::Delete.](attachment.cgi?id=8342787&action=diff)
— [Details](attachment.cgi?id=8342787&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=933219&attachment=8342787)

[Attachment #8342787](/attachment.cgi?id=8342787&action=edit "Fix compartment mismatch in MobileMessageManager::Delete.") -
Flags: review?(anygregor)

|  | [Gregor Wagner [:gwagner]](/user_profile?user_id=314734)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=933219#a3046333_314734)• 11 years ago |

[Attachment #8342786](/attachment.cgi?id=8342786&action=edit "Fix compartment mismatch in MobileMessageManager::Send") -
Flags: review?(anygregor) → review+

|  | [Gregor Wagner [:gwagner]](/user_profile?user_id=314734)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=933219#a3046534_314734)• 11 years ago |

[Attachment #8342787](/attachment.cgi?id=8342787&action=edit "Fix compartment mismatch in MobileMessageManager::Delete.") -
Flags: review?(anygregor) → review+

|  | [Gregor Wagner [:gwagner]](/user_profile?user_id=314734)  Reporter |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=933219#c12)• 11 years ago |
|  | |

remote: <https://hg.mozilla.org/integration/b2g-inbound/rev/ddf665aa22b3>
remote: <https://hg.mozilla.org/integration/b2g-inbound/rev/223af50b7080>

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=933219#c13)• 11 years ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/ddf665aa22b3>
<https://hg.mozilla.org/mozilla-central/rev/223af50b7080>Status: NEW → RESOLVEDClosed: 11 years ago
[status-firefox28](/buglist.cgi?f1=cf_status_firefox28&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=fixed)Resolution: --- → FIXEDTarget Milestone: --- → 1.3 Sprint 6 - 12/6

|  | [Paul Theriault [:pauljt] (no longer reading bugmail)](/user_profile?user_id=434339) |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=933219#c14)• 11 years ago |
|  | |

From a quick code review these all appear to be affected.
[status-b2g18](/buglist.cgi?f1=cf_status_b2g18&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=affected)
[status-b2g-v1.1hd](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=equals&v1=affected)
[status-b2g-v1.2](/buglist.cgi?f1=cf_status_b2g_1_2&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=affected)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=933219#c15)• 11 years ago |
|  | |

Please nominate this for b2g26/b2g18 uplift.
[status-b2g-v1.3](/buglist.cgi?f1=cf_status_b2g_1_3&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=fixed)
[status-firefox26](/buglist.cgi?f1=cf_status_firefox26&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_firefox26&o1=equals&v1=wontfix)
[status-firefox27](/buglist.cgi?f1=cf_status_firefox27&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=wontfix)Flags: needinfo?(mrbkap)

|  | [Blake Kaplan (:mrbkap) (inactive)](/user_profile?user_id=69426)  Assignee |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=933219#c16)• 11 years ago |
|  | |

The situation on b2g18/26 is much worse than for 1.3. In particular, [bug 854326](/show_bug.cgi?id=854326 "RESOLVED FIXED - B2G Multi-SIM: support multiple SIM cards for SMS/MMS") actually came really close to fixing this altogether (missing only the two patches needed here). It'll be a bit before I have the time to backport this patch.

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=933219#a5990957_75935)• 11 years ago |

blocking-b2g: --- → koi?

|  | [Jason Smith [:jsmith]](/user_profile?user_id=432443) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=933219#a6102204_432443)• 11 years ago |

blocking-b2g: koi? → koi+

|  | [Blake Kaplan (:mrbkap) (inactive)](/user_profile?user_id=69426)  Assignee |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=933219#c17)• 11 years ago |
|  | |

Attached patch

[Patch for b2g26](attachment.cgi?id=8360158&action=diff)
— [Details](attachment.cgi?id=8360158&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=933219&attachment=8360158)

[Attachment #8360158](/attachment.cgi?id=8360158&action=edit "Patch for b2g26") -
Flags: review?(anygregor)

|  | [Blake Kaplan (:mrbkap) (inactive)](/user_profile?user_id=69426)  Assignee |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=933219#c18)• 11 years ago |
|  | |

Attached patch

[Possibly the patch for b2g18](attachment.cgi?id=8360165&action=diff) (obsolete)
— [Details](attachment.cgi?id=8360165&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=933219&attachment=8360165)

I'm still building this, but I have to run. Optimistically requesting review.
[Attachment #8360165](/attachment.cgi?id=8360165&action=edit "Possibly the patch for b2g18") -
Flags: review?(anygregor)

|  | [Blake Kaplan (:mrbkap) (inactive)](/user_profile?user_id=69426)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=933219#a6528825_69426)• 11 years ago |

Flags: needinfo?(mrbkap)

|  | [Blake Kaplan (:mrbkap) (inactive)](/user_profile?user_id=69426)  Assignee |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=933219#c19)• 11 years ago |
|  | |

Attached patch

[Patch for b2g18](attachment.cgi?id=8360549&action=diff)
— [Details](attachment.cgi?id=8360549&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=933219&attachment=8360549)

[Attachment #8360165](/attachment.cgi?id=8360165&action=edit "Possibly the patch for b2g18") -
Attachment is obsolete: true
[Attachment #8360165](/attachment.cgi?id=8360165&action=edit "Possibly the patch for b2g18") -
Flags: review?(anygregor)
[Attachment #8360549](/attachment.cgi?id=8360549&action=edit "Patch for b2g18") -
Flags: review?(anygregor)

|  | [Gregor Wagner [:gwagner]](/user_profile?user_id=314734)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=933219#a6589229_314734)• 11 years ago |

[Attachment #8360158](/attachment.cgi?id=8360158&action=edit "Patch for b2g26") -
Flags: review?(anygregor) → review+

|  | [Gregor Wagner [:gwagner]](/user_profile?user_id=314734)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=933219#a6589285_314734)• 11 years ago |

[Attachment #8360549](/attachment.cgi?id=8360549&action=edit "Patch for b2g18") -
Flags: review?(anygregor) → review+

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=933219#c20)• 11 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-b2g26_v1_2/rev/a1738189c5bf>
<https://hg.mozilla.org/releases/mozilla-b2g18/rev/2075e0864e98>
[status-b2g18](/buglist.cgi?f1=cf_status_b2g18&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=fixed)
[status-b2g-v1.2](/buglist.cgi?f1=cf_status_b2g_1_2&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=fixed)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 21](/show_bug.cgi?id=933219#c21)• 11 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-b2g18_v1_1_0_hd/rev/2075e0864e98>
[status-b2g-v1.1hd](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=equals&v1=fixed)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=933219#a10755047_280903)• 11 years ago |

Whiteboard: [adv-main28+]

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=933219#a11631706_75935)• 11 years ago |

[status-b2g-v1.3T](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=fixed)
[status-b2g-v1.4](/buglist.cgi?f1=cf_status_b2g_1_4&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=unaffected)

|  | [Lawrence Mandel [:lmandel] (use needinfo)](/user_profile?user_id=424995) |  |
| --- | --- | --- |
| [Comment 22](/show_bug.cgi?id=933219#c22)• 11 years ago |
|  | |

Al - Do you know if this bug impacts Desktop and Android? Should we consider taking this for ESR24?
[status-firefox-esr24](/buglist.cgi?f1=cf_status_firefox_esr24&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=%3F)
[tracking-firefox-esr24](/buglist.cgi?f1=cf_tracking_firefox_esr24&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox_esr24&o1=equals&v1=%3F)Flags: needinfo?(abillings)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 23](/show_bug.cgi?id=933219#c23)• 11 years ago |
|  | |

I have no knowledge of the details of this bug. At this point, I don't expect we'll take it.Flags: needinfo?(abillings)

|  | [Lawrence Mandel [:lmandel] (use needinfo)](/user_profile?user_id=424995) |  |
| --- | --- | --- |
| [Comment 24](/show_bug.cgi?id=933219#c24)• 11 years ago |
|  | |

From the patch I take it that this does not impact desktop. I'm not clear whether this impacts Android.
Blake - Do you have any guidance on whether this bug impacts products other than B2G?Flags: needinfo?(mrbkap)

|  | [Blake Kaplan (:mrbkap) (inactive)](/user_profile?user_id=69426)  Assignee |  |
| --- | --- | --- |
| [Comment 25](/show_bug.cgi?id=933219#c25)• 11 years ago |
|  | |

I just confirmed with blassey on IRC that we don't build this for Android. Therefore, I believe that this bug only applies to b2g.Flags: needinfo?(mrbkap)

|  | [Lawrence Mandel [:lmandel] (use needinfo)](/user_profile?user_id=424995) |  |
| --- | --- | --- |
| [Comment 26](/show_bug.cgi?id=933219#c26)• 11 years ago |
|  | |

Based on [comment 25](/show_bug.cgi?id=933219#c25 "RESOLVED FIXED - Compartment mismatch when sending multiple messages in test_outgoing.js"), marking as esr24-.
[status-firefox-esr24](/buglist.cgi?f1=cf_status_firefox_esr24&o1=isnotempty):
[?](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=%3F) → [unaffected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=unaffected)
[tracking-firefox-esr24](/buglist.cgi?f1=cf_tracking_firefox_esr24&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox_esr24&o1=equals&v1=%3F) → [-](/buglist.cgi?f1=cf_tracking_firefox_esr24&o1=equals&v1=-)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=933219#a41705200_1689)• 10 years ago |

Group: core-security
You need to [log in](/show_bug.cgi?id=933219&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Blake Kaplan (:mrbkap) (inactive)](/user_profile?user_id=69426)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from bugzilla.mozilla.org_76879f16_20250126_044953.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Sat Jan 25 2025 20:49:53 PST

* **Bug ID:**
  933219,
  964462,
  938626,
  909586,
  627295,
  927579,
  938615,
  932496,
  949843

---

| [ID](/buglist.cgi?bug_id=933219%2C964462%2C938626%2C909586%2C627295%2C927579%2C938615%2C932496%2C949843&query_format=advanced&order=bug_id%20DESC&query_based_on=) | [Type](/buglist.cgi?bug_id=933219%2C964462%2C938626%2C909586%2C627295%2C927579%2C938615%2C932496%2C949843&query_format=advanced&order=bug_type%2Cbug_status%2Cpriority%2Cassigned_to%2Cbug_id&query_based_on=) | [Summary](/buglist.cgi?bug_id=933219%2C964462%2C938626%2C909586%2C627295%2C927579%2C938615%2C932496%2C949843&query_format=advanced&order=short_desc%2Cbug_status%2Cpriority%2Cassigned_to%2Cbug_id&query_based_on=) | [Product](/buglist.cgi?bug_id=933219%2C964462%2C938626%2C909586%2C627295%2C927579%2C938615%2C932496%2C949843&query_format=advanced&order=product%2Cbug_status%2Cpriority%2Cassigned_to%2Cbug_id&query_based_on=) | [Comp](/buglist.cgi?bug_id=933219%2C964462%2C938626%2C909586%2C627295%2C927579%2C938615%2C932496%2C949843&query_format=advanced&order=component%2Cbug_status%2Cpriority%2Cassigned_to%2Cbug_id&query_based_on=) | [Assignee▲](/buglist.cgi?bug_id=933219%2C964462%2C938626%2C909586%2C627295%2C927579%2C938615%2C932496%2C949843&query_format=advanced&order=assigned_to%20DESC%2Cbug_status%2Cpriority%2Cbug_id&query_based_on=) | [Status▲](/buglist.cgi?bug_id=933219%2C964462%2C938626%2C909586%2C627295%2C927579%2C938615%2C932496%2C949843&query_format=advanced&order=bug_status%20DESC%2Cpriority%2Cassigned_to%2Cbug_id&query_based_on=) | [Resolution](/buglist.cgi?bug_id=933219%2C964462%2C938626%2C909586%2C627295%2C927579%2C938615%2C932496%2C949843&query_format=advanced&order=resolution%2Cbug_status%2Cpriority%2Cassigned_to%2Cbug_id&query_based_on=) | [Updated](/buglist.cgi?bug_id=933219%2C964462%2C938626%2C909586%2C627295%2C927579%2C938615%2C932496%2C949843&query_format=advanced&order=changeddate%2Cbug_status%2Cpriority%2Cassigned_to%2Cbug_id&query_based_on=) |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |
| [949843](/show_bug.cgi?id=949843 "RESOLVED FIXED - Don't use \"char* str = NS_ConvertUTF16toUTF8(aBdAddress).get();\"") |  | [Don't use "char\* str = NS\_ConvertUTF16toUTF8(aBdAddress).get();"](/show_bug.cgi?id=949843) | Firefox OS Graveyard | Bluetooth | ben.tian | RESO | FIXE | 2015-02-25 |
| [932496](/show_bug.cgi?id=932496 "RESOLVED FIXED - ObexBase.cpp unsafe pointer increment") |  | [ObexBase.cpp unsafe pointer increment](/show_bug.cgi?id=932496) | Firefox OS Graveyard | Bluetooth | echou | RESO | FIXE | 2015-02-25 |
| [627295](/show_bug.cgi?id=627295 "RESOLVED FIXED - UMR [@ nsSVGGlyphFrame::PaintSVG] [@ _cairo_gstate_stroke]") |  | [UMR [@ nsSVGGlyphFrame::PaintSVG] [@ \_cairo\_gstate\_stroke]](/show_bug.cgi?id=627295) | Core | SVG | jwatt | RESO | FIXE | 2015-02-25 |
| [909586](/show_bug.cgi?id=909586 "RESOLVED FIXED - Assertion failure: frame->script->code <= pc && pc < frame->script->code + frame->script->length, at vm/SPSProfiler.h") |  | [Assertion failure: frame->script->code <= pc && pc < frame->script->code + frame->script->length, at vm/SPSProfiler.h](/show_bug.cgi?id=909586) | Core | JavaScript Engine | kvijayan | RESO | FIXE | 2015-02-25 |
| [938615](/show_bug.cgi?id=938615 "RESOLVED FIXED - avoid GC hazard in ScriptSource::substring") |  | [avoid GC hazard in ScriptSource::substring](/show_bug.cgi?id=938615) | Core | JavaScript Engine | mail | RESO | FIXE | 2015-02-25 |
| [933219](/show_bug.cgi?id=933219 "RESOLVED FIXED - Compartment mismatch when sending multiple messages in test_outgoing.js") |  | [Compartment mismatch when sending multiple messages in test\_outgoing.js](/show_bug.cgi?id=933219) | Firefox OS Graveyard | RIL | mrbkap | RESO | FIXE | 2015-02-25 |
| [927579](/show_bug.cgi?id=927579 "RESOLVED FIXED - crash [@ mlp_process] [@ tansig_approx]") |  | [crash [@ mlp\_process] [@ tansig\_approx]](/show_bug.cgi?id=927579) | Core | Audio/Video | padenot | RESO | FIXE | 2015-02-25 |
| [938626](/show_bug.cgi?id=938626 "RESOLVED FIXED - Make pref changes a bit safer in PresContext") |  | [Make pref changes a bit safer in PresContext](/show_bug.cgi?id=938626) | Core | Layout | smaug | RESO | FIXE | 2015-02-25 |
| [964462](/show_bug.cgi?id=964462 "RESOLVED FIXED - B2G FTU crash when accessing e.me privacy page (after opening marketplace privacy page)") |  | [B2G FTU crash when accessing e.me privacy page (after opening marketplace privacy page)](/show_bug.cgi?id=964462) | Core | XPCOM | smaug | RESO | FIXE | 2015-02-25 |

9 bugs found.

|  |  | [REST](/rest/bug?include_fields=id,summary,status&bug_id=933219%2C964462%2C938626%2C909586%2C627295%2C927579%2C938615%2C932496%2C949843 "Query as a REST API request") | [CSV](/buglist.cgi?bug_id=933219%2C964462%2C938626%2C909586%2C627295%2C927579%2C938615%2C932496%2C949843&query_format=advanced&ctype=csv&human=1) | [Feed](/buglist.cgi?bug_id=933219%2C964462%2C938626%2C909586%2C627295%2C927579%2C938615%2C932496%2C949843&query_format=advanced&title=Bug%20List&ctype=atom) | [iCalendar](/buglist.cgi?bug_id=933219%2C964462%2C938626%2C909586%2C627295%2C927579%2C938615%2C932496%2C949843&query_format=advanced&ctype=ics)  [Change Columns](/colchange.cgi?bug_id=933219%2C964462%2C938626%2C909586%2C627295%2C927579%2C938615%2C932496%2C949843&query_format=advanced&query_based_on=) | [Edit Search](/query.cgi?bug_id=933219%2C964462%2C938626%2C909586%2C627295%2C927579%2C938615%2C932496%2C949843&query_format=advanced) |  | as |
| --- | --- | --- | --- | --- | --- |



=== Content from bugzilla.mozilla.org_746381f4_20250125_003647.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/964462)
* [XML](/show_bug.cgi?ctype=xml&id=964462)

Closed
[Bug 964462](/show_bug.cgi?id=964462)

Opened 11 years ago
Closed 11 years ago

# B2G FTU crash when accessing e.me privacy page (after opening marketplace privacy page)

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

B2G FTU crash when accessing e.me privacy page (after opening marketplace privacy page)

## Categories

### (Core :: XPCOM, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=XPCOM#XPCOM)

XPCOM
▾

Core :: XPCOM
This is the basis of our component technology; this covers the mozilla/xpcom source directory and includes the "repository". Unlikely a tester would be able to tell there was an XPCOM problem specifically.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=XPCOM&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=XPCOM&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=XPCOM)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

All

All

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

critical

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla30

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| blocking-b2g | [1.3+](/buglist.cgi?f1=cf_blocking_b2g&o1=equals&v1=1.3%2B) |
| --- | --- |

| Performance Impact | --- |
| --- | --- |
| Webcompat Priority | --- |
| Accessibility Severity | --- |
| a11y-review | --- |
| Webcompat Score | --- |
| blocking-b2g | 1.3+ |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox27 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=wontfix) |
| firefox28 | [+](/buglist.cgi?f1=cf_tracking_firefox28&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=fixed) |
| firefox29 | [+](/buglist.cgi?f1=cf_tracking_firefox29&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=fixed) |
| firefox30 | [+](/buglist.cgi?f1=cf_tracking_firefox30&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=fixed) |
| firefox-esr24 | --- | [unaffected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=unaffected) |
| b2g18 | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=unaffected) |
| b2g-v1.1hd | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=equals&v1=unaffected) |
| b2g-v1.2 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=fixed) |
| b2g-v1.3 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=fixed) |
| b2g-v1.3T | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=fixed) |
| b2g-v1.4 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=fixed) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox27 |  | wontfix |
| firefox28 | + | fixed |
| firefox29 | + | fixed |
| firefox30 | + | fixed |
| firefox-esr24 |  | unaffected |
| b2g18 |  | unaffected |
| b2g-v1.1hd |  | unaffected |
| b2g-v1.2 |  | fixed |
| b2g-v1.3 |  | fixed |
| b2g-v1.3T |  | fixed |
| b2g-v1.4 |  | fixed |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: gwagner, Assigned: smaug)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/056757eff6ed7c8ec26f61e3bf7695fe?d=mm&size=40)  [smaug](/user_profile?user_id=39966)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/1ab9ae817c429c697626739e4d222c88?d=mm&size=40)  [gwagner](/user_profile?user_id=314734)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/fcf93a5a624020bf2256443c69e08b51?d=mm&size=40)  [nika](/user_profile?user_id=534482)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

15 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

[965893](/show_bug.cgi?id=965893 "RESOLVED INCOMPLETE - Use-after-free by SnowWhiteKiller")

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[958780](/show_bug.cgi?id=958780 "RESOLVED FIXED - B2G Crash during FTU")

Dependency [tree](/showdependencytree.cgi?id=964462&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=964462)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[Duplicates:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#duplicates)

[773487](/show_bug.cgi?id=773487 "RESOLVED DUPLICATE - [e10s] Shutdown crash while releasing nsDOMOfflineResourceList"), [965595](/show_bug.cgi?id=965595 "RESOLVED DUPLICATE - crash in @0x0 | nsDOMOfflineResourceList::~nsDOMOfflineResourceList")

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (5 keywords, Whiteboard: [b2g-crash], [systemsfe][adv-main28+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[crash](/buglist.cgi?keywords=crash&resolution=---),
[csectype-uaf](/buglist.cgi?keywords=csectype-uaf&resolution=---),
[regression](/buglist.cgi?keywords=regression&resolution=---),
[reproducible](/buglist.cgi?keywords=reproducible&resolution=---),
[sec-high](/buglist.cgi?keywords=sec-high&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[b2g-crash], [systemsfe][adv-main28+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [cbook](/user_profile?user_id=277293) | [in-testsuite](#c34 "11 years ago") | ? |
| --- | --- | --- |
| [cbook](/user_profile?user_id=277293) | in-testsuite | ? |
| --- | --- | --- |
|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (1 file, 5 obsolete files)

| [964462.diff](/attachment.cgi?id=8366268)  [11 years ago](#c1)  [Gregor Wagner [:gwagner]](/user_profile?user_id=314734)   1.62 KB, patch |  | [Details](/attachment.cgi?id=8366268&action=edit) | [Diff](/attachment.cgi?id=8366268&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=964462&attachment=8366268) |
| --- | --- | --- |
| [patch?](/attachment.cgi?id=8366360)  [11 years ago](#c3)  [Olli Pettay [:smaug][bugs@pettay.fi]](/user_profile?user_id=39966)   2.07 KB, patch | mccr8 : [feedback+](#c4 "11 years ago") | [Details](/attachment.cgi?id=8366360&action=edit) | [Diff](/attachment.cgi?id=8366360&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=964462&attachment=8366360) |
| [v2](/attachment.cgi?id=8366465)  [11 years ago](#c8)  [Olli Pettay [:smaug][bugs@pettay.fi]](/user_profile?user_id=39966)   2.77 KB, patch |  | [Details](/attachment.cgi?id=8366465&action=edit) | [Diff](/attachment.cgi?id=8366465&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=964462&attachment=8366465) |
| [guess fix](/attachment.cgi?id=8368823)  [11 years ago](#c10)  [Olli Pettay [:smaug][bugs@pettay.fi]](/user_profile?user_id=39966)   3.49 KB, patch |  | [Details](/attachment.cgi?id=8368823&action=edit) | [Diff](/attachment.cgi?id=8368823&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=964462&attachment=8368823) |
| [guess fix](/attachment.cgi?id=8368825)  [11 years ago](#c11)  [Olli Pettay [:smaug][bugs@pettay.fi]](/user_profile?user_id=39966)   3.50 KB, patch |  | [Details](/attachment.cgi?id=8368825&action=edit) | [Diff](/attachment.cgi?id=8368825&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=964462&attachment=8368825) |
| [guess fix v2](/attachment.cgi?id=8368923)  [11 years ago](#c12)  [Olli Pettay [:smaug][bugs@pettay.fi]](/user_profile?user_id=39966)   7.99 KB, patch | mayhemer : [review+](#c22 "11 years ago")  gwagner : [feedback+](#a746407_314734 "11 years ago")  Sylvestre : [approval-mozilla-aurora+](#a1188662_495955 "11 years ago")  Sylvestre : [approval-mozilla-beta+](#a1188662_495955 "11 years ago")  abillings : [sec-approval+](#c25 "11 years ago") | [Details](/attachment.cgi?id=8368923&action=edit) | [Diff](/attachment.cgi?id=8368923&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=964462&attachment=8368923) |

Show Obsolete

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Gregor Wagner [:gwagner]](/user_profile?user_id=314734)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=964462#c0)• 11 years ago |
|  | |

I still get a consistent crash when I access e.me after I wipe the phone with make reset-gaia. current gaia and gecko trunk.
STR:
make reset-gaia
enable data connection
choose wifi (mozilla guest in my case)
click on privacy link
open b2g privacy page,
open marketplace privacy page,
open e.me privacy page.
Seems like cleaning the marketplace appcache is having problems during cycle collection: <https://marketplace.firefox.com/manifest.appcache?repo=fireplace>
On my nexus 4 with debug gecko I could catch it in gdb:
Program received signal SIGSEGV, Segmentation fault.
0xb4ca1a6e in nsCOMPtr<nsIFile>::~nsCOMPtr (this=0xb037fc3c,
\_\_in\_chrg=<optimized out>) at ../../../xpcom/glue/nsCOMPtr.h:517
517 NSCAP\_RELEASE(this, mRawPtr);
(gdb) bt
#0 0xb4ca1a6e in nsCOMPtr<nsIFile>::~nsCOMPtr (this=0xb037fc3c,
\_\_in\_chrg=<optimized out>) at ../../../xpcom/glue/nsCOMPtr.h:517
#1 0xb555f500 in nsDOMOfflineResourceList::~nsDOMOfflineResourceList (
this=0xb037fbe0, \_\_in\_chrg=<optimized out>)
at ../../../../dom/src/offline/nsDOMOfflineResourceList.cpp:96
#2 0xb555f564 in nsDOMOfflineResourceList::~nsDOMOfflineResourceList (
this=0xb037fbe0, \_\_in\_chrg=<optimized out>)
at ../../../../dom/src/offline/nsDOMOfflineResourceList.cpp:96
#3 0xb53d48e2 in nsTransactionManager::DeleteCycleCollectable (
this=<optimized out>)
at ../../../../editor/txmgr/src/nsTransactionManager.cpp:58
#4 0xb5172a76 in nsDOMEventTargetHelper::cycleCollection::DeleteCycleCollectable (this=<optimized out>, p=0xb037fbe0)
at ../../dist/include/nsDOMEventTargetHelper.h:58
#5 0xb4cbbe54 in SnowWhiteKiller::~SnowWhiteKiller (this=0xbee75cfc,
\_\_in\_chrg=<optimized out>) at ../../../xpcom/base/nsCycleCollector.cpp:2309
#6 0xb4cbbece in nsCycleCollector::FreeSnowWhite (this=0xb3e7d000,
aUntilNoSWInPurpleBuffer=<optimized out>)
at ../../../xpcom/base/nsCycleCollector.cpp:2457
#7 0xb5405a0a in AsyncFreeSnowWhite::Run (this=0xb33e7640)
at ../../../../js/xpconnect/src/XPCJSRuntime.cpp:209
#8 0xb4ceeaaa in ProcessNextEvent (result=0xbee75da7,
mayWait=<optimized out>, this=0xb3e2f600)
---Type <return> to continue, or q <return> to quit---
at ../../../xpcom/threads/nsThread.cpp:637
#9 nsThread::ProcessNextEvent (this=0xb3e2f600, mayWait=<optimized out>,
result=0xbee75da7) at ../../../xpcom/threads/nsThread.cpp:568
#10 0xb4ca9048 in NS\_ProcessNextEvent (thread=0xb3e2f600,
mayWait=<optimized out>) at ../../../xpcom/glue/nsThreadUtils.cpp:263
#11 0xb4e86c70 in mozilla::ipc::MessagePump::Run (this=0xb3e01b80,
aDelegate=0xbee75f00) at ../../../ipc/glue/MessagePump.cpp:95
#12 0xb4e7892a in MessageLoop::RunInternal (this=0xbee75f00)
at ../../../ipc/chromium/src/base/message\_loop.cc:226
#13 0xb4e78942 in RunHandler (this=0xbee75f00)
at ../../../ipc/chromium/src/base/message\_loop.cc:219
#14 MessageLoop::Run (this=0xbee75f00)
at ../../../ipc/chromium/src/base/message\_loop.cc:193
#15 0xb53caaca in nsBaseAppShell::Run (this=0xb316a9c0)
at ../../../widget/xpwidgets/nsBaseAppShell.cpp:157
#16 0xb5c3e36e in XRE\_RunAppShell ()
at ../../../toolkit/xre/nsEmbedFunctions.cpp:679
#17 0xb4e86d6e in mozilla::ipc::MessagePumpForChildProcess::Run (
this=0xb3e01b80, aDelegate=0xbee75f00)
at ../../../ipc/glue/MessagePump.cpp:253
#18 0xb4e7892a in MessageLoop::RunInternal (this=0xbee75f00)
at ../../../ipc/chromium/src/base/message\_loop.cc:226
#19 0xb4e78942 in RunHandler (this=0xbee75f00)
---Type <return> to continue, or q <return> to quit---
at ../../../ipc/chromium/src/base/message\_loop.cc:219
#20 MessageLoop::Run (this=0xbee75f00)
at ../../../ipc/chromium/src/base/message\_loop.cc:193
#21 0xb5c3e252 in XRE\_InitChildProcess (aArgc=5, aArgv=<optimized out>,
aProcess=<optimized out>) at ../../../toolkit/xre/nsEmbedFunctions.cpp:516
#22 0x0000876e in main (argc=6, argv=0xbee769f4)
at ../../../ipc/app/MozillaRuntimeMain.cpp:137
(gdb) p this
$1 = (nsCOMPtr<nsIFile> \* const) 0xb037fc3c
(gdb) p \*this
$2 = {mRawPtr = 0xb037f9b0}
(gdb) up
#1 0xb555f500 in nsDOMOfflineResourceList::~nsDOMOfflineResourceList (
this=0xb037fbe0, \_\_in\_chrg=<optimized out>)
at ../../../../dom/src/offline/nsDOMOfflineResourceList.cpp:96
96 }
(gdb) p this
$3 = (nsDOMOfflineResourceList \* const) 0xb037fbe0
(gdb) p \*this
$4 = {<nsDOMEventTargetHelper> = {
<mozilla::dom::EventTarget> = {<nsIDOMEventTarget> = {<nsISupports> = {
\_vptr.nsISupports = 0xb6bbdf80}, <No data fields>}, <nsWrapperCache> = {\_vptr.nsWrapperCache = 0xb6bbe07c,
mWrapper = {<js::HeapBase<JSObject\*>> = {<No data fields>},
ptr = 0x0}, mFlags = 2}, <No data fields>}, mRefCnt = {
mRefCntAndFlags = 5}, \_mOwningThread = {mThread = 0xb3e2e080},
static \_cycleCollectorGlobal = {
<nsXPCOMCycleCollectionParticipant> = {<nsScriptObjectTracer> = {<nsCycleCollectionParticipant> = {\_vptr.nsCycleCollectionParticipant = 0xb6bb73a0,
mMightSkip = true}, <No data fields>}, <No data fields>}, <No data fields>}, mListenerManager = {mRawPtr = 0x0}, mParentObject = 0x0,
mOwnerWindow = 0x0,
mHasOrHasHadOwnerWindow = true}, <nsIDOMOfflineResourceList> = {<nsISupports> = {
\_vptr.nsISupports = 0xb6bbe088}, <No data fields>}, <nsIObserver> = {<nsISupports> = {
\_vptr.nsISupports = 0xb6bbe100}, <No data fields>}, <nsIOfflineCacheUpdateObserver> = {<nsISupports> = {
\_vptr.nsISupports = 0xb6bbe118}, <No data fields>},
<nsSupportsWeakReference> = {<nsISupportsWeakReference> = {<nsISupports> = {\_vptr.nsISupports = 0xb6bbe134}, <No data fields>}, mProxy = 0xb04cb5e0},
static \_cycleCollectorGlobal = {<nsDOMEventTargetHelper::cycleCollection> = {<---Type <return> to continue, or q <return> to quit---
nsXPCOMCycleCollectionParticipant> = {<nsScriptObjectTracer> = {<nsCycleCollectionParticipant> = {\_vptr.nsCycleCollectionParticipant = 0xb6bbe150,
mMightSkip = true}, <No data fields>}, <No data fields>}, <No data fields>}, <No data fields>}, mInitialized = true, mManifestURI = {mRawPtr =
0xb038a5c0}, mManifestSpec = {<nsACString\_internal> = {
mData = 0xb01c7338 "<https://marketplace.firefox.com/manifest.appcache?repo=fireplace>", mLength = 64, mFlags = 5}, <No data fields>}, mDocumentURI = {
mRawPtr = 0xb09b9640}, mApplicationCacheService = {mRawPtr = 0x0},
mAvailableApplicationCache = {mRawPtr = 0x0}, mCacheUpdate = {mRawPtr =
0xb037f9b0}, mExposeCacheUpdateStatus = false, mStatus = 1,
mCachedKeys = 0x0, mCachedKeysCount = 0,
mPendingEvents = {<nsCOMArray\_base> = {
mArray = {<nsTArray\_Impl<nsISupports\*, nsTArrayInfallibleAllocator>> = {<nsTArray\_base<nsTArrayInfallibleAllocator, nsTArray\_CopyWithMemutils>> = {
mHdr = 0xb6d1a60c}, <nsTArray\_TypedBase<nsISupports\*, nsTArray\_Impl<nsISupports\*, nsTArrayInfallibleAllocator> >> = {<nsTArray\_SafeElementAtHelper<nsISupports\*, nsTArray\_Impl<nsISupports\*, nsTArrayInfallibleAllocator> >> = {<No data fields>}, <No data fields>}, <No data fields>}, <No data fields>}}, <No data fields>}}

|  | [Gregor Wagner [:gwagner]](/user_profile?user_id=314734)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=964462#a15_314734)• 11 years ago |

blocking-b2g: --- → 1.3?

|  | [Gregor Wagner [:gwagner]](/user_profile?user_id=314734)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=964462#a932_314734)• 11 years ago |

Blocks: [958780](/show_bug.cgi?id=958780 "RESOLVED FIXED - B2G Crash during FTU")

|  | [Gregor Wagner [:gwagner]](/user_profile?user_id=314734)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=964462#a950_314734)• 11 years ago |

Group: core-security

|  | [Gregor Wagner [:gwagner]](/user_profile?user_id=314734)  Reporter |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=964462#c1)• 11 years ago |
|  | |

Attached patch

[964462.diff](attachment.cgi?id=8366268&action=diff) (obsolete)
— [Details](attachment.cgi?id=8366268&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=964462&attachment=8366268)

bent and mrbkap debugged.Assignee: nobody → anygregor

|  | [Gregor Wagner [:gwagner]](/user_profile?user_id=314734)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=964462#a5174_314734)• 11 years ago |

[Attachment #8366268](/attachment.cgi?id=8366268&action=edit "964462.diff") -
Flags: review?(bugs)

|  | [Gregor Wagner [:gwagner]](/user_profile?user_id=314734)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=964462#a5180_314734)• 11 years ago |

blocking-b2g: 1.3? → 1.3+

|  | [Gregor Wagner [:gwagner]](/user_profile?user_id=314734)  Reporter |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=964462#c2)• 11 years ago |
|  | |

Smaug is taking this according to bent.Assignee: anygregor → bugs

|  | [Gregor Wagner [:gwagner]](/user_profile?user_id=314734)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=964462#a8208_314734)• 11 years ago |

[Attachment #8366268](/attachment.cgi?id=8366268&action=edit "964462.diff") -
Attachment is obsolete: true
[Attachment #8366268](/attachment.cgi?id=8366268&action=edit "964462.diff") -
Flags: review?(bugs)

|  | [Olli Pettay [:smaug][bugs@pettay.fi]](/user_profile?user_id=39966)  Assignee |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=964462#c3)• 11 years ago |
|  | |

Attached patch

[patch?](attachment.cgi?id=8366360&action=diff) (obsolete)
— [Details](attachment.cgi?id=8366360&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=964462&attachment=8366360)

Want to test this?
[Attachment #8366360](/attachment.cgi?id=8366360&action=edit "patch?") -
Flags: feedback?(anygregor)

|  | [Olli Pettay [:smaug][bugs@pettay.fi]](/user_profile?user_id=39966)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=964462#a14475_39966)• 11 years ago |

[Attachment #8366360](/attachment.cgi?id=8366360&action=edit "patch?") -
Flags: feedback?(continuation)

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=964462#c4)• 11 years ago |
|  | |

Comment on [attachment 8366360](/attachment.cgi?id=8366360 "patch?") [[details]](/attachment.cgi?id=8366360&action=edit "patch?") [[diff]](/attachment.cgi?id=8366360&action=diff "patch?") [[review]](/page.cgi?id=splinter.html&ignore=&bug=964462&attachment=8366360)
patch?
Review of [attachment 8366360](/attachment.cgi?id=8366360 "patch?") [[details]](/attachment.cgi?id=8366360&action=edit "patch?") [[diff]](/attachment.cgi?id=8366360&action=diff "patch?") [[review]](/page.cgi?id=splinter.html&ignore=&bug=964462&attachment=8366360):
-----------------------------------------------------------------
Looks reasonable to me, though I should refresh my knowledge of the stabilization stuff.
[Attachment #8366360](/attachment.cgi?id=8366360&action=edit "patch?") -
Flags: feedback?(continuation) → feedback+

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=964462#c5)• 11 years ago |
|  | |

I think the problem here, as diagnosed by bent, smaug and mrbkap, is that an object gets put in the snow white list of dying objects, then it gets resurrected via weak ref, then it dies again, and gets put into the snow white list a second time, then we end up calling the destructor twice on the same object. This is a use-after-free, but I think that we're only running destructors, not random user code, so that may limit exploitability a bit. This could be to blame for other crashes, too.
[status-b2g18](/buglist.cgi?f1=cf_status_b2g18&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=unaffected)
[status-b2g-v1.1hd](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=equals&v1=unaffected)
[status-firefox27](/buglist.cgi?f1=cf_status_firefox27&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=wontfix)
[status-firefox28](/buglist.cgi?f1=cf_status_firefox28&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=affected)
[status-firefox29](/buglist.cgi?f1=cf_status_firefox29&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=affected)
[status-firefox-esr24](/buglist.cgi?f1=cf_status_firefox_esr24&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=unaffected)Component: Networking → XPCOMKeywords: [csectype-uaf](/buglist.cgi?keywords=csectype-uaf&resolution=---),
[sec-high](/buglist.cgi?keywords=sec-high&resolution=---)OS: Mac OS X → AllHardware: x86 → AllVersion: unspecified → Trunk

|  | [Olli Pettay [:smaug][bugs@pettay.fi]](/user_profile?user_id=39966)  Assignee |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=964462#c6)• 11 years ago |
|  | |

Looks like the patch leaks on windows... but I think I know why... It seems to reveal another bug.

|  | [Jason Smith [:jsmith]](/user_profile?user_id=432443) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=964462#a27815_432443)• 11 years ago |

Severity: normal → criticalKeywords: [crash](/buglist.cgi?keywords=crash&resolution=---),
[regression](/buglist.cgi?keywords=regression&resolution=---),
[reproducible](/buglist.cgi?keywords=reproducible&resolution=---)Whiteboard: [b2g-crash]

|  | [Gregor Wagner [:gwagner]](/user_profile?user_id=314734)  Reporter |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=964462#c7)• 11 years ago |
|  | |

(In reply to Olli Pettay [:smaug] from [comment #3](/show_bug.cgi?id=964462#c3 "RESOLVED FIXED - B2G FTU crash when accessing e.me privacy page (after opening marketplace privacy page)"))
> Created [attachment 8366360](/attachment.cgi?id=8366360 "patch?") [[details]](/attachment.cgi?id=8366360&action=edit "patch?") [[diff]](/attachment.cgi?id=8366360&action=diff "patch?") [[review]](/page.cgi?id=splinter.html&ignore=&bug=964462&attachment=8366360)
> patch?
>
> Want to test this?
I will test tomorrow. Thanks for the quick turnaround!

|  | [Olli Pettay [:smaug][bugs@pettay.fi]](/user_profile?user_id=39966)  Assignee |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=964462#c8)• 11 years ago |
|  | |

Attached patch

[v2](attachment.cgi?id=8366465&action=diff) (obsolete)
— [Details](attachment.cgi?id=8366465&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=964462&attachment=8366465)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=964462#a77008_75935)• 11 years ago |

[status-b2g-v1.2](/buglist.cgi?f1=cf_status_b2g_1_2&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=affected)
[status-b2g-v1.3](/buglist.cgi?f1=cf_status_b2g_1_3&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=affected)
[status-b2g-v1.4](/buglist.cgi?f1=cf_status_b2g_1_4&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=affected)

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=964462#a247359_406194)• 11 years ago |

Depends on: [965893](/show_bug.cgi?id=965893 "RESOLVED INCOMPLETE - Use-after-free by SnowWhiteKiller")

|  | [Olli Pettay [:smaug][bugs@pettay.fi]](/user_profile?user_id=39966)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=964462#a339754_39966)• 11 years ago |

[Attachment #8366360](/attachment.cgi?id=8366360&action=edit "patch?") -
Flags: feedback?(anygregor)

|  | [Olli Pettay [:smaug][bugs@pettay.fi]](/user_profile?user_id=39966)  Assignee |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=964462#c10)• 11 years ago |
|  | |

Attached patch

[guess fix](attachment.cgi?id=8368823&action=diff) (obsolete)
— [Details](attachment.cgi?id=8368823&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=964462&attachment=8368823)

(nsOfflineCacheUpdate code is scary, and this kind of raw pointer in runnables are pure evil.)
Still compiling this.
[Attachment #8366360](/attachment.cgi?id=8366360&action=edit "patch?") -
Attachment is obsolete: true
[Attachment #8366465](/attachment.cgi?id=8366465&action=edit "v2") -
Attachment is obsolete: true

|  | [Olli Pettay [:smaug][bugs@pettay.fi]](/user_profile?user_id=39966)  Assignee |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=964462#c11)• 11 years ago |
|  | |

Attached patch

[guess fix](attachment.cgi?id=8368825&action=diff) (obsolete)
— [Details](attachment.cgi?id=8368825&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=964462&attachment=8368825)

[Attachment #8368823](/attachment.cgi?id=8368823&action=edit "guess fix") -
Attachment is obsolete: true

|  | [Olli Pettay [:smaug][bugs@pettay.fi]](/user_profile?user_id=39966)  Assignee |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=964462#c12)• 11 years ago |
|  | |

Attached patch

[guess fix v2](attachment.cgi?id=8368923&action=diff)
— [Details](attachment.cgi?id=8368923&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=964462&attachment=8368923)

[Attachment #8368825](/attachment.cgi?id=8368825&action=edit "guess fix") -
Attachment is obsolete: true

|  | [Olli Pettay [:smaug][bugs@pettay.fi]](/user_profile?user_id=39966)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=964462#a411161_39966)• 11 years ago |

[Attachment #8368923](/attachment.cgi?id=8368923&action=edit "guess fix v2") -
Flags: feedback?(anygregor)

|  | [Gregor Wagner [:gwagner]](/user_profile?user_id=314734)  Reporter |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=964462#c13)• 11 years ago |
|  | |

I don't have access to my build environment for the nexus.
Alex will test this patch.Flags: needinfo?(lissyx+mozillians)

|  | [:gerard-majax](/user_profile?user_id=41385) |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=964462#c14)• 11 years ago |
|  | |

(In reply to Gregor Wagner [:gwagner] from [comment #13](/show_bug.cgi?id=964462#c13 "RESOLVED FIXED - B2G FTU crash when accessing e.me privacy page (after opening marketplace privacy page)"))
> I don't have access to my build environment for the nexus.
> Alex will test this patch.
Is it the patch we tested on my Inari last monday ?Flags: needinfo?(lissyx+mozillians)

|  | [Gregor Wagner [:gwagner]](/user_profile?user_id=314734)  Reporter |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=964462#c15)• 11 years ago |
|  | |

(In reply to Alexandre LISSY :gerard-majax from [comment #14](/show_bug.cgi?id=964462#c14 "RESOLVED FIXED - B2G FTU crash when accessing e.me privacy page (after opening marketplace privacy page)"))
> (In reply to Gregor Wagner [:gwagner] from [comment #13](/show_bug.cgi?id=964462#c13 "RESOLVED FIXED - B2G FTU crash when accessing e.me privacy page (after opening marketplace privacy page)"))
> > I don't have access to my build environment for the nexus.
> > Alex will test this patch.
>
> Is it the patch we tested on my Inari last monday ?
yes

|  | [:gerard-majax](/user_profile?user_id=41385) |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=964462#c16)• 11 years ago |
|  | |

So we retested it, on a debug build, and it fixes the issue :)

|  | [Gregor Wagner [:gwagner]](/user_profile?user_id=314734)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=964462#a746407_314734)• 11 years ago |

[Attachment #8368923](/attachment.cgi?id=8368923&action=edit "guess fix v2") -
Flags: feedback?(anygregor) → feedback+

|  | [Olli Pettay [:smaug][bugs@pettay.fi]](/user_profile?user_id=39966)  Assignee |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=964462#c17)• 11 years ago |
|  | |

Awesome. Thanks for testing.

|  | [Olli Pettay [:smaug][bugs@pettay.fi]](/user_profile?user_id=39966)  Assignee |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=964462#c18)• 11 years ago |
|  | |

Comment on [attachment 8368923](/attachment.cgi?id=8368923 "guess fix v2") [[details]](/attachment.cgi?id=8368923&action=edit "guess fix v2") [[diff]](/attachment.cgi?id=8368923&action=diff "guess fix v2") [[review]](/page.cgi?id=splinter.html&ignore=&bug=964462&attachment=8368923)
guess fix v2
So the thing to fix the crasher in this bug is to not use manual delete,
but always rely on refcounting.
Currently it is possible to end up calling
DeallocPOfflineCacheUpdateChild
while refcnt of offlineCacheUpdate is still > 0.
Making nsOfflineCacheUpdateOwner to support WeakPtr is just to not have
this super scary raw pointer there. It doesn't seem to fix this crash, but if I read the code correctly there are other ways to trigger that issue.
[Attachment #8368923](/attachment.cgi?id=8368923&action=edit "guess fix v2") -
Flags: review?(honzab.moz)

|  | [Honza Bambas (:mayhemer)](/user_profile?user_id=269762) |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=964462#c19)• 11 years ago |
|  | |

A dupe of [bug 773487](/show_bug.cgi?id=773487 "RESOLVED DUPLICATE - [e10s] Shutdown crash while releasing nsDOMOfflineResourceList") ?

|  | [Olli Pettay [:smaug][bugs@pettay.fi]](/user_profile?user_id=39966)  Assignee |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=964462#c20)• 11 years ago |
|  | |

Sounds similar.

|  | [Olli Pettay [:smaug][bugs@pettay.fi]](/user_profile?user_id=39966)  Assignee |  |
| --- | --- | --- |
| [Comment 21](/show_bug.cgi?id=964462#c21)• 11 years ago |
|  | |

Manual delete on refcounted objects is always super scary, and very error prone.

|  | [Honza Bambas (:mayhemer)](/user_profile?user_id=269762) |  |
| --- | --- | --- |
| [Comment 22](/show_bug.cgi?id=964462#c22)• 11 years ago |
|  | |

Comment on [attachment 8368923](/attachment.cgi?id=8368923 "guess fix v2") [[details]](/attachment.cgi?id=8368923&action=edit "guess fix v2") [[diff]](/attachment.cgi?id=8368923&action=diff "guess fix v2") [[review]](/page.cgi?id=splinter.html&ignore=&bug=964462&attachment=8368923)
guess fix v2
Review of [attachment 8368923](/attachment.cgi?id=8368923 "guess fix v2") [[details]](/attachment.cgi?id=8368923&action=edit "guess fix v2") [[diff]](/attachment.cgi?id=8368923&action=diff "guess fix v2") [[review]](/page.cgi?id=splinter.html&ignore=&bug=964462&attachment=8368923):
-----------------------------------------------------------------
Looks good.
I think for trunk fix we should have a strong ref to mOwner, but it might well be a followup to bake this before backport properly.
r=honzab
Thanks for fixing this!!
[Attachment #8368923](/attachment.cgi?id=8368923&action=edit "guess fix v2") -
Flags: review?(honzab.moz) → review+

|  | [Olli Pettay [:smaug][bugs@pettay.fi]](/user_profile?user_id=39966)  Assignee |  |
| --- | --- | --- |
| [Comment 24](/show_bug.cgi?id=964462#c24)• 11 years ago |
|  | |

Comment on [attachment 8368923](/attachment.cgi?id=8368923 "guess fix v2") [[details]](/attachment.cgi?id=8368923&action=edit "guess fix v2") [[diff]](/attachment.cgi?id=8368923&action=diff "guess fix v2") [[review]](/page.cgi?id=splinter.html&ignore=&bug=964462&attachment=8368923)
guess fix v2
[Security approval request comment]
How easily could an exploit be constructed based on the patch?
Seems to be hard, though looks like we have had [Bug 773487](/show_bug.cgi?id=773487 "RESOLVED DUPLICATE - [e10s] Shutdown crash while releasing nsDOMOfflineResourceList") open quite some time.
Do comments in the patch, the check-in comment, or tests included in the patch paint a bulls-eye on the security problem?
changing refcnt handling is rather obvious.
Which older supported branches are affected by this flaw?
All, but the crash happens only in multiprocess setups. So in practice it should be b2g only.
How likely is this patch to cause regressions; how much testing does it need?
This area of code isn't too well tested since it has been used lately only in b2g.
NOTE: This flag is now for security issues only. Please see <https://wiki.mozilla.org/Release_Management/B2G_Landing> to better understand the B2G approval process and landings.
[Approval Request Comment]
Bug caused by (feature/regressing bug #): NA
User impact if declined: crashes
Testing completed: NA
Risk to taking this patch (and alternatives if risky): No alternatives, and the risk is some kind of change
to offline cache behavior in the child processes.
String or UUID changes made by this patch: NA
[Attachment #8368923](/attachment.cgi?id=8368923&action=edit "guess fix v2") -
Flags: sec-approval?
[Attachment #8368923](/attachment.cgi?id=8368923&action=edit "guess fix v2") -
Flags: approval-mozilla-b2g28?

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=964462#a785229_280903)• 11 years ago |

[status-firefox30](/buglist.cgi?f1=cf_status_firefox30&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=affected)
[tracking-firefox28](/buglist.cgi?f1=cf_tracking_firefox28&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox28&o1=equals&v1=%3F)
[tracking-firefox29](/buglist.cgi?f1=cf_tracking_firefox29&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox29&o1=equals&v1=%3F)
[tracking-firefox30](/buglist.cgi?f1=cf_tracking_firefox30&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox30&o1=equals&v1=%2B)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 25](/show_bug.cgi?id=964462#c25)• 11 years ago |
|  | |

Comment on [attachment 8368923](/attachment.cgi?id=8368923 "guess fix v2") [[details]](/attachment.cgi?id=8368923&action=edit "guess fix v2") [[diff]](/attachment.cgi?id=8368923&action=diff "guess fix v2") [[review]](/page.cgi?id=splinter.html&ignore=&bug=964462&attachment=8368923)
guess fix v2
sec-approval+ for trunk.
Please create Aurora, Beta, and ESR24 patches after it is in and nominate them.
[Attachment #8368923](/attachment.cgi?id=8368923&action=edit "guess fix v2") -
Flags: sec-approval? → sec-approval+

|  | [Olli Pettay [:smaug][bugs@pettay.fi]](/user_profile?user_id=39966)  Assignee |  |
| --- | --- | --- |
| [Comment 26](/show_bug.cgi?id=964462#c26)• 11 years ago |
|  | |

Do we need this on aurora/beta or esr24? As far as I see, this is needed only on b2g branches.

|  | [Olli Pettay [:smaug][bugs@pettay.fi]](/user_profile?user_id=39966)  Assignee |  |
| --- | --- | --- |
| [Comment 27](/show_bug.cgi?id=964462#c27)• 11 years ago |
|  | |

But the patch seems to apply (with some fuzz) to release/beta/aurora

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Comment 28](/show_bug.cgi?id=964462#c28)• 11 years ago |
|  | |

1.3 is based off of 28, so I think it needs to land on beta to end up there. And at that point, you might as well land it on Aurora, too, just in case.

|  | [Andrew Overholt [:overholt]](/user_profile?user_id=442218) |  |
| --- | --- | --- |
| [Comment 29](/show_bug.cgi?id=964462#c29)• 11 years ago |
|  | |

b2g28\_v1\_3 diverges from aurora now so one may need to create a b2g28\_v1\_3-specific patch

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 30](/show_bug.cgi?id=964462#c30)• 11 years ago |
|  | |

Please land on branches for consistency.

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 31](/show_bug.cgi?id=964462#c31)• 11 years ago |
|  | |

Comment on [attachment 8368923](/attachment.cgi?id=8368923 "guess fix v2") [[details]](/attachment.cgi?id=8368923&action=edit "guess fix v2") [[diff]](/attachment.cgi?id=8368923&action=diff "guess fix v2") [[review]](/page.cgi?id=splinter.html&ignore=&bug=964462&attachment=8368923)
guess fix v2
sec-highs have auto-approval for uplift to affected B2G branches [1], but why am I being pinged about landing this on 1.3 when it hasn't landed on trunk yet?
[1] <https://wiki.mozilla.org/Release_Management/B2G_Landing>
[Attachment #8368923](/attachment.cgi?id=8368923&action=edit "guess fix v2") -
Flags: approval-mozilla-b2g28?Flags: needinfo?(bugs)

|  | [Olli Pettay [:smaug][bugs@pettay.fi]](/user_profile?user_id=39966)  Assignee |  |
| --- | --- | --- |
| [Comment 32](/show_bug.cgi?id=964462#c32)• 11 years ago |
|  | |

Because I forgot to land it to m-i earlier today and m-i is now closed.Flags: needinfo?(bugs)

|  | [Olli Pettay [:smaug][bugs@pettay.fi]](/user_profile?user_id=39966)  Assignee |  |
| --- | --- | --- |
| [Comment 33](/show_bug.cgi?id=964462#c33)• 11 years ago |
|  | |

<https://hg.mozilla.org/integration/mozilla-inbound/rev/41fbeb789ade>

|  | [Lukas Blakk [:lsblakk] use ?needinfo](/user_profile?user_id=272375) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=964462#a872873_272375)• 11 years ago |

[tracking-firefox28](/buglist.cgi?f1=cf_tracking_firefox28&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox28&o1=equals&v1=%3F) → [+](/buglist.cgi?f1=cf_tracking_firefox28&o1=equals&v1=%2B)
[tracking-firefox29](/buglist.cgi?f1=cf_tracking_firefox29&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox29&o1=equals&v1=%3F) → [+](/buglist.cgi?f1=cf_tracking_firefox29&o1=equals&v1=%2B)

|  | [Carsten Book [:Tomcat]](/user_profile?user_id=277293) |  |
| --- | --- | --- |
| [Comment 34](/show_bug.cgi?id=964462#c34)• 11 years ago |
|  | |

landed on central -> <https://hg.mozilla.org/mozilla-central/rev/41fbeb789ade>Status: NEW → RESOLVEDClosed: 11 years ago
[status-firefox30](/buglist.cgi?f1=cf_status_firefox30&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=fixed)Flags: in-testsuite?Resolution: --- → FIXEDTarget Milestone: --- → mozilla30

|  | [Gregor Wagner [:gwagner]](/user_profile?user_id=314734)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=964462#a908908_314734)• 11 years ago |

Whiteboard: [b2g-crash] → [b2g-crash], [systemsfe]

|  | [Olli Pettay [:smaug][bugs@pettay.fi]](/user_profile?user_id=39966)  Assignee |  |
| --- | --- | --- |
| [Comment 35](/show_bug.cgi?id=964462#c35)• 11 years ago |
|  | |

Comment on [attachment 8368923](/attachment.cgi?id=8368923 "guess fix v2") [[details]](/attachment.cgi?id=8368923&action=edit "guess fix v2") [[diff]](/attachment.cgi?id=8368923&action=diff "guess fix v2") [[review]](/page.cgi?id=splinter.html&ignore=&bug=964462&attachment=8368923)
guess fix v2
[Approval Request Comment]
Bug caused by (feature/regressing bug #): old stuff, from first e10s-era
User impact if declined: crashes in multiprocess setups, so in practice b2g only
Testing completed (on m-c, etc.): landed to m-c today
Risk to taking this patch (and alternatives if risky): I haven't found any other way to fix the crash. The code was odd (using manual delete with refcounted object). Should be quite safe fix.
String or IDL/UUID changes made by this patch: NA
[Attachment #8368923](/attachment.cgi?id=8368923&action=edit "guess fix v2") -
Flags: approval-mozilla-beta?
[Attachment #8368923](/attachment.cgi?id=8368923&action=edit "guess fix v2") -
Flags: approval-mozilla-aurora?

|  | [Sylvestre Ledru [:Sylvestre]](/user_profile?user_id=495955) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=964462#a1188662_495955)• 11 years ago |

[Attachment #8368923](/attachment.cgi?id=8368923&action=edit "guess fix v2") -
Flags: approval-mozilla-beta?
[Attachment #8368923](/attachment.cgi?id=8368923&action=edit "guess fix v2") -
Flags: approval-mozilla-beta+
[Attachment #8368923](/attachment.cgi?id=8368923&action=edit "guess fix v2") -
Flags: approval-mozilla-aurora?
[Attachment #8368923](/attachment.cgi?id=8368923&action=edit "guess fix v2") -
Flags: approval-mozilla-aurora+

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 36](/show_bug.cgi?id=964462#c36)• 11 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-aurora/rev/fc9031575cd1>
<https://hg.mozilla.org/releases/mozilla-beta/rev/1208fe0f7876>
<https://hg.mozilla.org/releases/mozilla-b2g26_v1_2/rev/fa4a37069103>
[status-b2g-v1.2](/buglist.cgi?f1=cf_status_b2g_1_2&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=fixed)
[status-b2g-v1.4](/buglist.cgi?f1=cf_status_b2g_1_4&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=fixed)
[status-firefox28](/buglist.cgi?f1=cf_status_firefox28&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=fixed)
[status-firefox29](/buglist.cgi?f1=cf_status_firefox29&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=fixed)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 37](/show_bug.cgi?id=964462#c37)• 11 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-b2g28_v1_3/rev/1208fe0f7876>
[status-b2g-v1.3](/buglist.cgi?f1=cf_status_b2g_1_3&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=fixed)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=964462#a3120382_280903)• 11 years ago |

Whiteboard: [b2g-crash], [systemsfe] → [b2g-crash], [systemsfe][adv-main28+]

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=964462#a3996691_75935)• 11 years ago |

[status-b2g-v1.3T](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=fixed)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=964462#a34070486_1689)• 10 years ago |

Group: core-security
You need to [log in](/show_bug.cgi?id=964462&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Gregor Wagner [:gwagner]](/user_profile?user_id=314734)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from bugzilla.mozilla.org_c27683c7_20250125_003638.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/909586)
* [XML](/show_bug.cgi?ctype=xml&id=909586)

Closed
[Bug 909586](/show_bug.cgi?id=909586)

Opened 11 years ago
Closed 11 years ago

# Assertion failure: frame->script->code <= pc && pc < frame->script->code + frame->script->length, at vm/SPSProfiler.h

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

Assertion failure: frame->script->code <= pc && pc < frame->script->code + frame->script->length, at vm/SPSProfiler.h

## Categories

### (Core :: JavaScript Engine, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=JavaScript%20Engine#JavaScript%20Engine)

JavaScript Engine
▾

Core :: JavaScript Engine
The interpreter engine for the core JavaScript language, independent of the browser's object model. File ONLY core JavaScript language bugs in this category. For bugs involving browser objects such as "window" and "document", use the "DOM" component. For bugs involving calls between JavaScript and C++, use the "XPConnect" component.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=JavaScript%20Engine)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

x86\_64

macOS

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

critical

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla28

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Webcompat Priority | --- |
| --- | --- |
| Performance Impact | --- |
| Accessibility Severity | --- |
| Webcompat Score | --- |
| a11y-review | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox27 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=wontfix) |
| firefox28 | --- | [fixed](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=fixed) |
| firefox-esr24 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=wontfix) |
| b2g18 | --- | [wontfix](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=wontfix) |
| b2g-v1.1hd | --- | [wontfix](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=equals&v1=wontfix) |
| b2g-v1.2 | --- | [wontfix](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=wontfix) |
| b2g-v1.3 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=fixed) |
| b2g-v1.3T | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=fixed) |
| b2g-v1.4 | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=unaffected) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox27 |  | wontfix |
| firefox28 |  | fixed |
| firefox-esr24 |  | wontfix |
| b2g18 |  | wontfix |
| b2g-v1.1hd |  | wontfix |
| b2g-v1.2 |  | wontfix |
| b2g-v1.3 |  | fixed |
| b2g-v1.3T |  | fixed |
| b2g-v1.4 |  | unaffected |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: gkw, Assigned: djvj)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/55e0476b8efe4fd21a03a662d86e3578?d=mm&size=40)  [djvj](/user_profile?user_id=436087)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

![](https://secure.gravatar.com/avatar/55857f92ded07119259dc6c1dd386205?d=mm&size=40)  [general](/user_profile?user_id=4729)

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](extensions/Gravatar/web/default.jpg)  [gkw](/user_profile?user_id=132034)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/4fe52ee1503aecf7b6c976b8eb7c1753?d=mm&size=40)  [willyelm](/user_profile?user_id=714609)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

10 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[839335](/show_bug.cgi?id=839335 "RESOLVED FIXED - BaselineCompiler: Compile assorted stubbed opcodes")

Dependency [tree](/showdependencytree.cgi?id=909586&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=909586)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (4 keywords, Whiteboard: [jsbugmon:][adv-main28+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[assertion](/buglist.cgi?keywords=assertion&resolution=---),
[regression](/buglist.cgi?keywords=regression&resolution=---),
[sec-moderate](/buglist.cgi?keywords=sec-moderate&resolution=---),
[testcase](/buglist.cgi?keywords=testcase&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[jsbugmon:][adv-main28+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [RyanVM](/user_profile?user_id=75935) | [in-testsuite](#c23 "11 years ago") | ? |
| --- | --- | --- |
| [RyanVM](/user_profile?user_id=75935) | in-testsuite | ? |
| --- | --- | --- |
|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (3 files, 3 obsolete files)

| [stack](/attachment.cgi?id=795765)  [11 years ago](#c0)  [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)   4.40 KB, text/plain |  | [Details](/attachment.cgi?id=795765&action=edit) |
| --- | --- | --- |
| [[crash-signature] Machine-readable crash signature](/attachment.cgi?id=810524)  [11 years ago](#c7)  [Christian Holler (:decoder)](/user_profile?user_id=395101)   582 bytes, text/plain |  | [Details](/attachment.cgi?id=810524&action=edit) |
| [[crash-signature] Machine-readable crash signature](/attachment.cgi?id=813738)  [11 years ago](#c13)  [Christian Holler (:decoder)](/user_profile?user_id=395101)   557 bytes, text/plain |  | [Details](/attachment.cgi?id=813738&action=edit) |
| [bug-909586.patch](/attachment.cgi?id=8341393)  [11 years ago](#c17)  [Kannan Vijayan [:djvj]](/user_profile?user_id=436087)   2.07 KB, patch | gkw : [feedback+](#c18 "11 years ago") | [Details](/attachment.cgi?id=8341393&action=edit) | [Diff](/attachment.cgi?id=8341393&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=909586&attachment=8341393) |
| [bug-909586.patch](/attachment.cgi?id=8341408)  [11 years ago](#c19)  [Kannan Vijayan [:djvj]](/user_profile?user_id=436087)   3.23 KB, patch | bhackett1024 : [review+](#a8467298_346231 "11 years ago") | [Details](/attachment.cgi?id=8341408&action=edit) | [Diff](/attachment.cgi?id=8341408&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=909586&attachment=8341408) |
| [bug-909586.patch](/attachment.cgi?id=8341423)  [11 years ago](#c20)  [Kannan Vijayan [:djvj]](/user_profile?user_id=436087)   3.23 KB, patch | djvj : [review+](#c21 "11 years ago")  RyanVM : [checkin+](#c22 "11 years ago") | [Details](/attachment.cgi?id=8341423&action=edit) | [Diff](/attachment.cgi?id=8341423&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=909586&attachment=8341423) |

Show Obsolete

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=909586#c0)• 11 years ago |
|  | |

Attached file
[stack](attachment.cgi?id=795765)
— [Details](attachment.cgi?id=795765&action=edit)

function f(x) {
this["\_\_iterator\_\_"] = x;
for (var m in this)
return this;
}
for each(let z in this) {
try {
f(z);
} catch (e) {}
}
asserts js debug (64-bit threadsafe deterministic) shell on m-c changeset 17143a9a0d83 with --ion-eager at Assertion failure: frame->script->code <= pc && pc < frame->script->code + frame->script->length, at vm/SPSProfiler.h
Setting s-s because Kannan has mentioned that SPS bugs may be bad.Flags: needinfo?(kvijayan)

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=909586#a5121_395101)• 11 years ago |

Whiteboard: [jsbugmon:update] → [jsbugmon:]

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101) |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=909586#c1)• 11 years ago |
|  | |

JSBugMon: Cannot process bug: Unable to automatically reproduce, please track manually.

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)  Reporter |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=909586#c2)• 11 years ago |
|  | |

autoBisect shows this is probably related to the following changeset:
The first bad revision is:
changeset: <http://hg.mozilla.org/mozilla-central/rev/73861b907300>
user: Brian Hackett
date: Fri Feb 08 06:50:54 2013 -0700
summary: [Bug 839335](/show_bug.cgi?id=839335 "RESOLVED FIXED - BaselineCompiler: Compile assorted stubbed opcodes") - Baseline compile assorted stubbed opcodes, r=jandem.
(Not sure how correct this is)
Brian, is [bug 839335](/show_bug.cgi?id=839335 "RESOLVED FIXED - BaselineCompiler: Compile assorted stubbed opcodes") a possible regressor?Blocks: [839335](/show_bug.cgi?id=839335 "RESOLVED FIXED - BaselineCompiler: Compile assorted stubbed opcodes")Flags: needinfo?(bhackett1024)

|  | [Brian Hackett [Laid off!]](/user_profile?user_id=346231) |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=909586#c3)• 11 years ago |
|  | |

(In reply to Gary Kwong [:gkw] [:nth10sd] from [comment #2](/show_bug.cgi?id=909586#c2 "RESOLVED FIXED - Assertion failure: frame->script->code <= pc && pc < frame->script->code + frame->script->length, at vm/SPSProfiler.h"))
> Brian, is [bug 839335](/show_bug.cgi?id=839335 "RESOLVED FIXED - BaselineCompiler: Compile assorted stubbed opcodes") a possible regressor?
No, this bug was just allowing us to baseline compile more scripts. This is probably some bug in how SPS works with baseline and/or ion.Flags: needinfo?(bhackett1024)

|  | [Kannan Vijayan [:djvj]](/user_profile?user_id=436087)  Assignee |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=909586#c4)• 11 years ago |
|  | |

I'm not taking this bug immediately because I have a full plate, but I'm clearing the needinfo and I'll pick it up (if it hasn't already) when I'm able to clear my plate.Assignee: general → kvijayanFlags: needinfo?(kvijayan)

|  | [Kannan Vijayan [:djvj]](/user_profile?user_id=436087)  Assignee |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=909586#c5)• 11 years ago |
|  | |

I cannot reproduce this bug. On same revision, with deterministic, threadsafe build, with profiling enabled.
Gary, can you tell me if this still reproduces for you? Or can I get a copy of the build directory to play with locally?

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)  Reporter |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=909586#c6)• 11 years ago |
|  | |

This definitely reproduces for me on rev 52218c11ec89 with the following compile options:
CC="clang -Qunused-arguments" AR=ar CXX="clang++ -Qunused-arguments" sh ./configure --target=x86\_64-apple-darwin11.4.0 --enable-optimize --enable-debug --enable-profiling --enable-gczeal --enable-debug-symbols --enable-methodjit --enable-type-inference --disable-tests --enable-more-deterministic --with-ccache --enable-threadsafe <more NSPR compile options>

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101) |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=909586#c7)• 11 years ago |
|  | |

Attached file
[[crash-signature] Machine-readable crash signature](attachment.cgi?id=810524) (obsolete)
— [Details](attachment.cgi?id=810524&action=edit)

|  | [David Bolter [:davidb] (NeedInfo me for attention)](/user_profile?user_id=152868) |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=909586#c8)• 11 years ago |
|  | |

Kannan, any luck with the [comment 6](/show_bug.cgi?id=909586#c6 "RESOLVED FIXED - Assertion failure: frame->script->code <= pc && pc < frame->script->code + frame->script->length, at vm/SPSProfiler.h") compile options?Flags: needinfo?(kvijayan)

|  | [Kannan Vijayan [:djvj]](/user_profile?user_id=436087)  Assignee |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=909586#c9)• 11 years ago |
|  | |

Haven't tried it yet. Needed to update my OSX build env and I was busy with other work. Looking at it now.Flags: needinfo?(kvijayan)

|  | [Kannan Vijayan [:djvj]](/user_profile?user_id=436087)  Assignee |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=909586#c10)• 11 years ago |
|  | |

So I was able to reproduce this on my mac with the given configuration parameters. Thanks gary! Trying to work on it now.

|  | [Kannan Vijayan [:djvj]](/user_profile?user_id=436087)  Assignee |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=909586#c11)• 11 years ago |
|  | |

This reproduces with a pure debug build as well. Here is a more appropriate stack trace:
(gdb) bt
#0 js::SPSInstrumentation<js::jit::MacroAssembler, js::jit::Register>::leave (
this=0x10512d198, pc=0x10305c5ff "R", masm=@0x10512c850, scratch=
{code\_ = JSC::X86Registers::eax}) at SPSProfiler.h:356
#1 0x0000000100568f53 in js::jit::IonInstrumentation::leave (
this=0x10512d198, masm=@0x10512c850, reg={code\_ = JSC::X86Registers::eax})
at IonInstrumentation.h:33
#2 0x0000000100568107 in js::jit::MacroAssembler::leaveSPSFrame (
this=0x10512c850) at IonMacroAssembler.h:820
#3 0x00000001005657e3 in js::jit::MacroAssembler::callWithABI<void\*> (
this=0x10512c850, fun=@0x7fff5fbf71f8,
result=js::jit::MacroAssemblerX64::GENERAL) at IonMacroAssembler.h:758
#4 0x0000000100641b97 in js::jit::CodeGeneratorShared::verifyOsiPointRegs (
this=0x10512c800, safepoint=0x105117b48)
at /Users/kvijayan/Checkouts/mozilla-central/js/src/jit/shared/CodeGenerator-shared.cpp:572
#5 0x000000010064cccf in js::jit::CodeGenerator::visitOsiPoint (
this=0x10512c800, lir=0x105117c90)
at /Users/kvijayan/Checkouts/mozilla-central/js/src/jit/CodeGenerator.cpp:827
#6 0x00000001007848e3 in js::jit::LOsiPoint::accept (this=0x105117c90,
visitor=0x10512c800) at LIR-Common.h:72
#7 0x00000001006546d5 in js::jit::CodeGenerator::generateBody (
this=0x10512c800)
at /Users/kvijayan/Checkouts/mozilla-central/js/src/jit/CodeGenerator.cpp:2755
#8 0x00000001006623a3 in js::jit::CodeGenerator::generate (this=0x10512c800)
at /Users/kvijayan/Checkouts/mozilla-central/js/src/jit/CodeGenerator.cpp:5582
#9 0x00000001006a4a4f in js::jit::GenerateCode (mir=0x1050536c8,
lir=0x105109bb0, maybeMasm=0x0)
at /Users/kvijayan/Checkouts/mozilla-central/js/src/jit/Ion.cpp:1488
#10 0x00000001006a4b97 in js::jit::CompileBackEnd (mir=0x1050536c8,
maybeMasm=0x0)
at /Users/kvijayan/Checkouts/mozilla-central/js/src/jit/Ion.cpp:1507
#11 0x00000001006a9f25 in IonCompile (cx=0x103800770, script=0x103cbedc0,
baselineFrame=0x7fff5fbf7ae8, osrPc=0x10305c692 "�\001V",
constructing=false, executionMode=js::jit::SequentialExecution)
at /Users/kvijayan/Checkouts/mozilla-central/js/src/jit/Ion.cpp:1675
#12 0x00000001006a5a86 in Compile (cx=0x103800770, script=
{<js::HandleBase<JSScript \*>> = {<No data fields>}, ptr = 0x7fff5fbf7850}, osrFrame=0x7fff5fbf7ae8, osrPc=0x10305c692 "�\001V", constructing=false,
executionMode=js::jit::SequentialExecution)
at /Users/kvijayan/Checkouts/mozilla-central/js/src/jit/Ion.cpp:1833
#13 0x00000001006a5496 in js::jit::CanEnterAtBranch (cx=0x103800770,
script=0x103cbedc0, osrFrame=0x7fff5fbf7ae8, pc=0x10305c692 "�\001V",
isConstructing=false)
at /Users/kvijayan/Checkouts/mozilla-central/js/src/jit/Ion.cpp:1880
#14 0x00000001005fe01b in EnsureCanEnterIon (cx=0x103800770, stub=0x103f2fc68,
frame=0x7fff5fbf7ae8, script=
{<js::HandleBase<JSScript \*>> = {<No data fields>}, ptr = 0x7fff5fbf79e8}, pc=0x10305c692 "�\001V", jitcodePtr=0x7fff5fbf79b8)
at /Users/kvijayan/Checkouts/mozilla-central/js/src/jit/BaselineIC.cpp:732
#15 0x00000001005d0a93 in DoUseCountFallback (cx=0x103800770,
stub=0x103f2fc68, frame=0x7fff5fbf7ae8, infoPtr=0x7fff5fbf7a78)
at /Users/kvijayan/Checkouts/mozilla-central/js/src/jit/BaselineIC.cpp:918
#16 0x00000001027aca9e in ?? ()
#17 0x0000000103f2fc68 in ?? ()
Don't know exactly what's happening yet, but the reason the assert is triggering is because the frame script in the SPS instrumentation refers to an inline-compiled script's frame, but the PC being passed in is from the top-level script that the Ion compile was called on.
The relevant scripts are self-hosted. The inlined function is |List| in selfhosted.js, and the top-level function being compiled is |CanonicalizeLanguageTag| in selfhosted.js.

|  | [Kannan Vijayan [:djvj]](/user_profile?user_id=436087)  Assignee |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=909586#c12)• 11 years ago |
|  | |

When slow profiling is turned on, all MFunctionBoundaries have OSI points associated with them, because they can emit a slow call.
The MFunctionBoundary(Inline\_Enter) instruction is actually added to the caller's block (not the callee). So the PC it's associated with
is the caller's PC.
During codeine, when the LFunctionBoundary(Inline\_Enter) is processed, the lastPC\_ gets updated to point to the PC associated with the MFunctionBoundary, which is a PC in the CALLER's code. However, processing of the LFunctionBoundary(Inline\_Enter) also pushes a new SPS frame.
We subsequently hit the OSI point for the LFunctionBoundary. It does a callWithABI, which tries to emit an SPS "leave". However, the lastPC\_ on record at this point is actually the caller's lastPC, but the SPS frame which is currently pushed is for the inner function (callee).
This triggers the assert.

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101) |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=909586#c13)• 11 years ago |
|  | |

Attached file
[[crash-signature] Machine-readable crash signature](attachment.cgi?id=813738)
— [Details](attachment.cgi?id=813738&action=edit)

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=909586#c14)• 11 years ago |
|  | |

sec-moderate because it is profiler-only.Keywords: [sec-moderate](/buglist.cgi?keywords=sec-moderate&resolution=---)

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=909586#a3837085_395101)• 11 years ago |

[Attachment #810524](/attachment.cgi?id=810524&action=edit "[crash-signature] Machine-readable crash signature") -
Attachment is obsolete: true

|  | [Kannan Vijayan [:djvj]](/user_profile?user_id=436087)  Assignee |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=909586#c15)• 11 years ago |
|  | |

Ok this is a bit tricky to fix. Originally I thought it should be as simple as moving the MFunctionBoundary into the callee's block.
However this doesn't work, because then the "leave" action for the \_caller\_ (entering the callee) gets the callee pc instead of the caller PC, which asserts once again.

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)  Reporter |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=909586#c16)• 11 years ago |
|  | |

Kannan, this \*may\* block finding other SPS bugs. Perhaps it fell off the radar?Flags: needinfo?(kvijayan)

|  | [Kannan Vijayan [:djvj]](/user_profile?user_id=436087)  Assignee |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=909586#c17)• 11 years ago |
|  | |

Attached patch

[bug-909586.patch](attachment.cgi?id=8341393&action=diff) (obsolete)
— [Details](attachment.cgi?id=8341393&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=909586&attachment=8341393)

Hey gary. Sorry, it did fall off my radar, and I was having a hard time thinking of a way of fixing the codegen so that it would work. However, my attempts were not that successful.
This attachment is an attempt at a cheap fix. My build environment on the mac has gotten a bit stale, so I can't test this out directly.. can you try this out for me? It's a simple fix and just removes profiling for the callWithABI that's causing this. This is OK, because this callWithABI only happens for debug-build "heavyweight verification" runs, which probably don't need to be profiled.Flags: needinfo?(kvijayan)

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)  Reporter |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=909586#c18)• 11 years ago |
|  | |

Comment on [attachment 8341393](/attachment.cgi?id=8341393 "bug-909586.patch") [[details]](/attachment.cgi?id=8341393&action=edit "bug-909586.patch") [[diff]](/attachment.cgi?id=8341393&action=diff "bug-909586.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=909586&attachment=8341393)
bug-909586.patch
Yes, this fixes the assert.
[Attachment #8341393](/attachment.cgi?id=8341393&action=edit "bug-909586.patch") -
Flags: feedback+

|  | [Kannan Vijayan [:djvj]](/user_profile?user_id=436087)  Assignee |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=909586#c19)• 11 years ago |
|  | |

Attached patch

[bug-909586.patch](attachment.cgi?id=8341408&action=diff) (obsolete)
— [Details](attachment.cgi?id=8341408&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=909586&attachment=8341408)

Updated version of previous patch, with a big fat comment explaining the change.
[Attachment #8341393](/attachment.cgi?id=8341393&action=edit "bug-909586.patch") -
Attachment is obsolete: true
[Attachment #8341408](/attachment.cgi?id=8341408&action=edit "bug-909586.patch") -
Flags: review?(bhackett1024)

|  | [Brian Hackett [Laid off!]](/user_profile?user_id=346231) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=909586#a8467298_346231)• 11 years ago |

[Attachment #8341408](/attachment.cgi?id=8341408&action=edit "bug-909586.patch") -
Flags: review?(bhackett1024) → review+

|  | [Kannan Vijayan [:djvj]](/user_profile?user_id=436087)  Assignee |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=909586#c20)• 11 years ago |
|  | |

Attached patch

[bug-909586.patch](attachment.cgi?id=8341423&action=diff)
— [Details](attachment.cgi?id=8341423&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=909586&attachment=8341423)

Just fixed up comment grammar from r+-ed patch.
[Attachment #8341408](/attachment.cgi?id=8341408&action=edit "bug-909586.patch") -
Attachment is obsolete: true
[Attachment #8341423](/attachment.cgi?id=8341423&action=edit "bug-909586.patch") -
Flags: checkin?

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=909586#a8468187_132034)• 11 years ago |

Keywords: [checkin-needed](/buglist.cgi?keywords=checkin-needed&resolution=---)

|  | [Kannan Vijayan [:djvj]](/user_profile?user_id=436087)  Assignee |  |
| --- | --- | --- |
| [Comment 21](/show_bug.cgi?id=909586#c21)• 11 years ago |
|  | |

Comment on [attachment 8341423](/attachment.cgi?id=8341423 "bug-909586.patch") [[details]](/attachment.cgi?id=8341423&action=edit "bug-909586.patch") [[diff]](/attachment.cgi?id=8341423&action=diff "bug-909586.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=909586&attachment=8341423)
bug-909586.patch
Forwarding r+ from obsoleted patch.
[Attachment #8341423](/attachment.cgi?id=8341423&action=edit "bug-909586.patch") -
Flags: review+

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 22](/show_bug.cgi?id=909586#c22)• 11 years ago |
|  | |

Comment on [attachment 8341423](/attachment.cgi?id=8341423 "bug-909586.patch") [[details]](/attachment.cgi?id=8341423&action=edit "bug-909586.patch") [[diff]](/attachment.cgi?id=8341423&action=diff "bug-909586.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=909586&attachment=8341423)
bug-909586.patch
<https://hg.mozilla.org/integration/mozilla-inbound/rev/de5cfdf73a3c>
Please make sure future patches have commit information included when requesting checkin.
[Attachment #8341423](/attachment.cgi?id=8341423&action=edit "bug-909586.patch") -
Flags: checkin? → checkin+

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=909586#a8477457_75935)• 11 years ago |

Keywords: [checkin-needed](/buglist.cgi?keywords=checkin-needed&resolution=---)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 23](/show_bug.cgi?id=909586#c23)• 11 years ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/de5cfdf73a3c>
Not sure what's affected.Status: NEW → RESOLVEDClosed: 11 years ago
[status-firefox28](/buglist.cgi?f1=cf_status_firefox28&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=fixed)Flags: in-testsuite?Resolution: --- → FIXEDTarget Milestone: --- → mozilla28

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 24](/show_bug.cgi?id=909586#c24)• 11 years ago |
|  | |

How far back does this issue go? Seems like all currently supported branches.

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=909586#a12773840_1689)• 11 years ago |

[status-b2g18](/buglist.cgi?f1=cf_status_b2g18&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=wontfix)
[status-firefox27](/buglist.cgi?f1=cf_status_firefox27&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=wontfix)
[status-firefox-esr24](/buglist.cgi?f1=cf_status_firefox_esr24&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=wontfix)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=909586#a12774017_75935)• 11 years ago |

[status-b2g-v1.1hd](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=equals&v1=wontfix)
[status-b2g-v1.2](/buglist.cgi?f1=cf_status_b2g_1_2&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=wontfix)
[status-b2g-v1.3](/buglist.cgi?f1=cf_status_b2g_1_3&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=fixed)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=909586#a16416331_280903)• 11 years ago |

Whiteboard: [jsbugmon:] → [jsbugmon:][adv-main28+]

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=909586#a17291330_75935)• 11 years ago |

[status-b2g-v1.3T](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=fixed)
[status-b2g-v1.4](/buglist.cgi?f1=cf_status_b2g_1_4&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=unaffected)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=909586#a47364814_1689)• 10 years ago |

Group: core-security
You need to [log in](/show_bug.cgi?id=909586&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from www.mozilla.org_d3b0f1f8_20250125_003635.html ===


## Help us improve your Mozilla experience

In addition to Cookies necessary for this site to function, we’d like your permission to set some additional Cookies to better understand your browsing needs and improve your experience. Rest assured — we value your privacy.

Accept All Additional Cookies

Reject All Additional Cookies

[Cookie settings](/en-US/privacy/websites/cookie-settings/)

Menu
[![Mozilla](https://www.mozilla.org/media/img/logos/m24/lockup-black.f2ddba3f0724.svg)](/en-US/)

* [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
  Firefox browsers](/en-US/firefox/)
  Close Firefox browsers menu
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for Desktop](/en-US/firefox/new/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for iOS](/en-US/firefox/browsers/mobile/ios/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for Android](/en-US/firefox/browsers/mobile/android/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/focus/logo.aac3e33175cb.svg)
    ## Firefox Focus](/en-US/firefox/browsers/mobile/focus/)
  + [## Firefox blog](https://blog.mozilla.org/firefox/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=firefox)
* [Products](/en-US/products/)
  Close Products menu
  + [![](https://www.mozilla.org/media/protocol/img/logos/mozilla/vpn/logo.c648f487bfb8.svg)
    ## Mozilla VPN](/en-US/products/vpn/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/monitor/logo.d97e5516f9e6.svg)
    ## Mozilla Monitor](https://monitor.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/relay/logo-white.d42a8b52e44c.svg)
    ## Firefox Relay](https://relay.firefox.com/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/protocol/img/logos/pocket/logo.17446bc33a5d.svg)
    ## Pocket](https://getpocket.com/firefox_learnmore/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/nav/icons/icon-mdn-plus.f54475f980ab.svg)
    ## MDN Plus](https://developer.mozilla.org/plus?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/logos/fakespot/logo-blue.3973b8fe9631.svg)
    ## Fakespot](https://fakespot.com/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/logos/thunderbird/logo-thunderbird.121e9c0fed45.svg)
    ## Thunderbird](https://www.thunderbird.net/)

  [All products](/en-US/products/)
* [About us](/en-US/about/)
  Close About us menu

  Our Mission

  + [## About Mozilla](/en-US/about/)
  + [## The Mozilla Manifesto](/en-US/about/manifesto/)
  + [## Get Involved](/en-US/contribute/)
  + [## Innovation Projects](https://future.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Blog](https://blog.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)

  Our Work

  + [## Mozilla Foundation](https://foundation.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla.ai](https://www.mozilla.ai/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla Ventures](https://mozilla.vc/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla Advertising](/en-US/advertising/)

## Menu

* Mozilla Security

## [Mozilla Security](/en-US/security/)

* [Advisories](/en-US/security/advisories/)
* [Known Vulnerabilities](/en-US/security/known-vulnerabilities/)
* [Mozilla Security Blog](https://blog.mozilla.com/security/)
* [Security Bug Bounty](/en-US/security/bug-bounty/)
* [Third-party Injection Policy](/en-US/security/third-party-software-injection/)

## [Client Bug Bounty](/en-US/security/client-bug-bounty/)

* [Frequently Asked Questions](/en-US/security/bug-bounty/faq/)
* [Hall of Fame](/en-US/security/bug-bounty/hall-of-fame/)

## [Web Bug Bounty](/en-US/security/web-bug-bounty/)

* [Eligible Websites](/en-US/security/bug-bounty/web-eligible-sites/)
* [Frequently Asked Questions](/en-US/security/bug-bounty/faq-webapp/)
* [Hall of Fame](/en-US/security/bug-bounty/web-hall-of-fame/)

# Mozilla Foundation Security Advisory 2014-15

## Miscellaneous memory safety hazards (rv:28.0 / rv:24.4)

Announced
March 18, 2014
Reporter
Mozilla Developers
Impact
Critical
Products
Firefox, Firefox ESR, SeaMonkey, Thunderbird
Fixed in

* Firefox 28
* Firefox ESR 24.4
* SeaMonkey 2.25
* Thunderbird 24.4

### Description

Mozilla developers and community identified identified and fixed several
memory safety bugs in the browser engine used in Firefox and other Mozilla-based
products. Some of these bugs showed evidence of memory corruption under certain
circumstances, and we presume that with enough effort at least some of these
could be exploited to run arbitrary code.

In general these flaws cannot be exploited through email in the
Thunderbird and Seamonkey products because scripting is disabled, but are
potentially a risk in browser or browser-like contexts.

### References

Benoit Jacob, Olli Pettay, Jan Varga, Jan de Mooij, Jesse Ruderman, Dan Gohman, and Christoph Diehl reported memory safety problems and crashes that affect Firefox ESR 24.3 and Firefox 27.

* [Memory safety bugs fixed in Firefox ESR 24.4 and Firefox 28.0](https://bugzilla.mozilla.org/buglist.cgi?bug_id=963974,958867,965982,977538,967341,960145,896268) ([CVE-2014-1493](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-1493))

Gregor Wagner, Olli Pettay, Gary Kwong, Jesse Ruderman, Luke Wagner, Rob Fletcher, and Makoto Kato reported memory safety problems and crashes that affect Firefox 27.

* [Memory safety bugs fixed in Firefox 28.0](https://bugzilla.mozilla.org/buglist.cgi?bug_id=933219,964462,938626,909586,627295,927579,938615,932496,949843) ([CVE-2014-1494](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-1494))

## Company

* [Leadership](/about/leadership/)
* [Press Center](https://blog.mozilla.org/category/mozilla/news/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=company)
* [Careers](/en-US/careers/)
* [Contact](/en-US/contact/)

## Support

* [Product Help](https://support.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)
* [File a Bug](https://bugzilla.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)
* [Localize Mozilla](https://pontoon.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)

## Resources

* [Advertise with Mozilla](/en-US/advertising/)
* [Firefox Release Notes](/firefox/134.0.2/releasenotes/)

## Developers

* [Developer Edition](/en-US/firefox/developer/)
* [Enterprise](/en-US/firefox/enterprise/)
* [Tools](https://firefox-source-docs.mozilla.org/devtools-user/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=developers)
* [MDN](https://developer.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer)

## Follow @Mozilla

* [X (formerly Twitter) (@mozilla)](https://twitter.com/mozilla)
* [Instagram (@mozilla)](https://www.instagram.com/mozilla/)
* [LinkedIn (@mozilla)](https://www.linkedin.com/company/mozilla-corporation/)
* [TikTok (@mozilla)](https://www.tiktok.com/%40mozilla)
* [Spotify (@mozilla)](https://open.spotify.com/show/0vT7LJMeVDxyQ2ZamHKu08?si=_uDRD6bRR_6M5YZyISGXgA)

## Follow @Firefox

* [X (formerly Twitter) (@firefox)](https://twitter.com/firefox)
* [Instagram (@firefox)](https://www.instagram.com/firefox/)
* [YouTube (@firefoxchannel)](https://www.youtube.com/user/firefoxchannel)
* [TikTok (@firefox)](https://www.tiktok.com/%40firefox)

[Donate](https://foundation.mozilla.org/?form=moco-donate-footer)

Visit [Mozilla Corporation’s](/en-US/) not-for-profit parent, the [Mozilla Foundation](https://foundation.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer).

Portions of this content are ©1998–2025 by individual mozilla.org contributors. Content available under a [Creative Commons license](/en-US/foundation/licensing/website-content/).

* [Website Privacy Notice](/en-US/privacy/websites/)
* [Cookies](/en-US/privacy/websites/cookie-settings/)
* [Legal](/en-US/about/legal/)
* [Community Participation Guidelines](/en-US/about/governance/policies/participation/)
* [About this site](/en-US/about/this-site/)

![](https://www.mozilla.org/media/img/logos/m24/wordmark-white.2d673bb5b33a.svg)



=== Content from bugzilla.mozilla.org_383ac8ce_20250125_003645.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/938626)
* [XML](/show_bug.cgi?ctype=xml&id=938626)

Closed
[Bug 938626](/show_bug.cgi?id=938626)

Opened 11 years ago
Closed 11 years ago

# Make pref changes a bit safer in PresContext

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

Make pref changes a bit safer in PresContext

## Categories

### (Core :: Layout, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=Layout#Layout)

Layout
▾

Core :: Layout

Issues in Layout that do not fit into any other Layout component or which span multiple Layout components.

Bugs related to the top level presentation objects (pres shell, pres context, and document viewer), the frame constructor, and the base frame classes, as well as general issues with alignment and sizing, all belong here.

[See Open Bugs in This Component](/buglist.cgi?product=Core&component=Layout&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=Layout&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=Layout)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

x86\_64

Linux

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

normal

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla28

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Webcompat Score | --- |
| --- | --- |
| a11y-review | --- |
| Accessibility Severity | --- |
| Performance Impact | --- |
| Webcompat Priority | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox27 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=wontfix) |
| firefox28 | --- | [fixed](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=fixed) |
| firefox-esr24 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=wontfix) |
| b2g18 | --- | [wontfix](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=wontfix) |
| b2g-v1.2 | --- | [wontfix](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=wontfix) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox27 |  | wontfix |
| firefox28 |  | fixed |
| firefox-esr24 |  | wontfix |
| b2g18 |  | wontfix |
| b2g-v1.2 |  | wontfix |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: smaug, Assigned: smaug)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/056757eff6ed7c8ec26f61e3bf7695fe?d=mm&size=40)  [smaug](/user_profile?user_id=39966)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/056757eff6ed7c8ec26f61e3bf7695fe?d=mm&size=40)  [smaug](/user_profile?user_id=39966)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/cd9b85b2e112bd7941b21ad03f42604e?d=mm&size=40)  [dholbert](/user_profile?user_id=278074)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

6 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

---

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Keywords: sec-want, Whiteboard: [qa-][adv-main28+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[sec-want](/buglist.cgi?keywords=sec-want&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[qa-][adv-main28+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | in-testsuite |  |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (1 file)

| [prescontext\_pref.diff](/attachment.cgi?id=832278)  [11 years ago](#c0)  [Olli Pettay [:smaug][bugs@pettay.fi]](/user_profile?user_id=39966)   2.34 KB, patch | tnikkel : [review+](#a1114_255010 "11 years ago") | [Details](/attachment.cgi?id=832278&action=edit) | [Diff](/attachment.cgi?id=832278&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=938626&attachment=832278) |
| --- | --- | --- |

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Olli Pettay [:smaug][bugs@pettay.fi]](/user_profile?user_id=39966)  Assignee |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=938626#c0)• 11 years ago |
|  | |

Attached patch

[prescontext\_pref.diff](attachment.cgi?id=832278&action=diff)
— [Details](attachment.cgi?id=832278&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=938626&attachment=832278)

PreferenceChanged may end up causing reflows and what not, yet we have only
raw refs to objects.
It also calls AppUnitsPerDevPixelChanged after possible reflow, so mDeviceContext
can be null.
This may fix [Bug 891840](/show_bug.cgi?id=891840 "RESOLVED FIXED - Intermittent test_meta_viewport6.html,test_pixel_lengths.html | application timed out after 330 seconds with no output and/or application crashed [@ nsPresContext::PreferenceChanged(char const*)][@ nsPresContext::AppUnitsPerDevPixel()]").
[Attachment #832278](/attachment.cgi?id=832278&action=edit "prescontext_pref.diff") -
Flags: review?

|  | [Olli Pettay [:smaug][bugs@pettay.fi]](/user_profile?user_id=39966)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=938626#a15_39966)• 11 years ago |

Group: layout-core-security → core-security

|  | [Olli Pettay [:smaug][bugs@pettay.fi]](/user_profile?user_id=39966)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=938626#a70_39966)• 11 years ago |

[Attachment #832278](/attachment.cgi?id=832278&action=edit "prescontext_pref.diff") -
Flags: review? → review?(tnikkel)

|  | [Timothy Nikkel (:tnikkel)](/user_profile?user_id=255010) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=938626#a1114_255010)• 11 years ago |

[Attachment #832278](/attachment.cgi?id=832278&action=edit "prescontext_pref.diff") -
Flags: review?(tnikkel) → review+

|  | [Olli Pettay [:smaug][bugs@pettay.fi]](/user_profile?user_id=39966)  Assignee |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=938626#c1)• 11 years ago |
|  | |

I haven't actually found any problematic cases except when tests use privileged JS to
set the prefs.
So this should be safe to land.

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=938626#a275602_406194)• 11 years ago |

Keywords: [sec-want](/buglist.cgi?keywords=sec-want&resolution=---)

|  | [Ed Morley [:emorley]](/user_profile?user_id=373476) |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=938626#c2)• 11 years ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/78a02007f383>Status: NEW → RESOLVEDClosed: 11 years ago
[status-firefox28](/buglist.cgi?f1=cf_status_firefox28&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=fixed)Resolution: --- → FIXEDTarget Milestone: --- → mozilla28

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=938626#a1751640_1689)• 11 years ago |

[status-b2g18](/buglist.cgi?f1=cf_status_b2g18&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=wontfix)
[status-b2g-v1.2](/buglist.cgi?f1=cf_status_b2g_1_2&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=wontfix)
[status-firefox-esr24](/buglist.cgi?f1=cf_status_firefox_esr24&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=wontfix)

|  | [u279076](/user_profile?user_id=279076) |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=938626#c3)• 11 years ago |
|  | |

I don't think this needs QA verification. If anyone thinks that's a mistake please remove the [qa-] whiteboard tag and add the verifyme keyword.Whiteboard: [qa-]

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=938626#a9534148_280903)• 11 years ago |

[status-firefox27](/buglist.cgi?f1=cf_status_firefox27&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=wontfix)Whiteboard: [qa-] → [qa-][adv-main28+]

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=938626#a40483687_1689)• 10 years ago |

Group: core-security
You need to [log in](/show_bug.cgi?id=938626&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Olli Pettay [:smaug][bugs@pettay.fi]](/user_profile?user_id=39966)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from lists.opensuse.org_0c2e1c3f_20250125_003633.html ===


[![openSUSE](https://static.opensuse.org/favicon.svg)
Mailing Lists](/archives/ "openSUSE Mailing Lists")

[Sign In](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/V4XETPVFGYYN3NKRN3562AZINSE5BRGD/)
[Sign Up](/accounts/signup/?next=/archives/list/security-announce%40lists.opensuse.org/message/V4XETPVFGYYN3NKRN3562AZINSE5BRGD/)

[Manage this list](/manage/lists/security-announce.lists.opensuse.org/)
[Sign In](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/V4XETPVFGYYN3NKRN3562AZINSE5BRGD/)
[Sign Up](/accounts/signup/?next=/archives/list/security-announce%40lists.opensuse.org/message/V4XETPVFGYYN3NKRN3562AZINSE5BRGD/)

×
#### Keyboard Shortcuts

### Thread View

* `j`: Next unread message
* `k`: Previous unread message
* `j a`: Jump to all threads* `j l`: Jump to MailingList overview

[thread](/archives/list/security-announce%40lists.opensuse.org/thread/V4XETPVFGYYN3NKRN3562AZINSE5BRGD/#V4XETPVFGYYN3NKRN3562AZINSE5BRGD)

# [security-announce] openSUSE-SU-2014:0584-1: important: MozillaThunderbird,seamonkey

![](https://seccdn.libravatar.org/avatar/099a17325bdf082b643d1a6bbacde279.jpg?s=120&d=mm&r=g)
## [opensuse-security＠opensuse.org](/archives/users/1b72def497ef4503896cd7a5fe9fb8e0/ "See the profile for opensuse-security＠opensuse.org")

30 Apr
2014

30 Apr
'14

07:04

openSUSE Security Update: MozillaThunderbird,seamonkey
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
Announcement ID: openSUSE-SU-2014:0584-1
Rating: important
References: #868603
Cross-References: CVE-2014-1493 CVE-2014-1494 CVE-2014-1497
CVE-2014-1498 CVE-2014-1499 CVE-2014-1500
CVE-2014-1502 CVE-2014-1504 CVE-2014-1505
CVE-2014-1508 CVE-2014-1509 CVE-2014-1510
CVE-2014-1511 CVE-2014-1512 CVE-2014-1513
CVE-2014-1514
Affected Products:
openSUSE 13.1
openSUSE 12.3
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
An update that fixes 16 vulnerabilities is now available.
Description:
Mozilla Thunderbird was updated to 24.4.0. Mozilla
SeaMonkey was updated to 2.25.
\* MFSA 2014-15/CVE-2014-1493/CVE-2014-1494 Miscellaneous
memory safety hazards
\* MFSA 2014-17/CVE-2014-1497 (bmo#966311) Out of bounds
read during WAV file decoding
\* MFSA 2014-18/CVE-2014-1498 (bmo#935618)
crypto.generateCRMFRequest does not validate type of key
\* MFSA 2014-19/CVE-2014-1499 (bmo#961512) Spoofing attack
on WebRTC permission prompt
\* MFSA 2014-20/CVE-2014-1500 (bmo#956524) onbeforeunload
and Javascript navigation DOS
\* MFSA 2014-22/CVE-2014-1502 (bmo#972622) WebGL content
injection from one domain to rendering in another
\* MFSA 2014-23/CVE-2014-1504 (bmo#911547) Content
Security Policy for data: documents not preserved by
session restore
\* MFSA 2014-26/CVE-2014-1508 (bmo#963198) Information
disclosure through polygon rendering in MathML
\* MFSA 2014-27/CVE-2014-1509 (bmo#966021) Memory
corruption in Cairo during PDF font rendering
\* MFSA 2014-28/CVE-2014-1505 (bmo#941887) SVG filters
information disclosure through feDisplacementMap
\* MFSA 2014-29/CVE-2014-1510/CVE-2014-1511 (bmo#982906,
bmo#982909) Privilege escalation using
WebIDL-implemented APIs
\* MFSA 2014-30/CVE-2014-1512 (bmo#982957) Use-after-free
in TypeObject
\* MFSA 2014-31/CVE-2014-1513 (bmo#982974) Out-of-bounds
read/write through neutering ArrayBuffer objects
\* MFSA 2014-32/CVE-2014-1514 (bmo#983344) Out-of-bounds
write through TypedArrayObject after neutering
Patch Instructions:
To install this openSUSE Security Update use YaST online\_update.
Alternatively you can run the command listed for your product:
- openSUSE 13.1:
zypper in -t patch openSUSE-2014-321
- openSUSE 12.3:
zypper in -t patch openSUSE-2014-321
To bring your system up-to-date, use "zypper patch".
Package List:
- openSUSE 13.1 (i586 x86\_64):
MozillaThunderbird-24.4.0-70.15.8
MozillaThunderbird-buildsymbols-24.4.0-70.15.8
MozillaThunderbird-debuginfo-24.4.0-70.15.8
MozillaThunderbird-debugsource-24.4.0-70.15.8
MozillaThunderbird-devel-24.4.0-70.15.8
MozillaThunderbird-translations-common-24.4.0-70.15.8
MozillaThunderbird-translations-other-24.4.0-70.15.8
enigmail-1.6.0+24.4.0-70.15.8
enigmail-debuginfo-1.6.0+24.4.0-70.15.8
seamonkey-2.25-16.7
seamonkey-debuginfo-2.25-16.7
seamonkey-debugsource-2.25-16.7
seamonkey-dom-inspector-2.25-16.7
seamonkey-irc-2.25-16.7
seamonkey-translations-common-2.25-16.7
seamonkey-translations-other-2.25-16.7
seamonkey-venkman-2.25-16.7
- openSUSE 12.3 (i586 x86\_64):
MozillaThunderbird-24.4.0-61.43.5
MozillaThunderbird-buildsymbols-24.4.0-61.43.5
MozillaThunderbird-debuginfo-24.4.0-61.43.5
MozillaThunderbird-debugsource-24.4.0-61.43.5
MozillaThunderbird-devel-24.4.0-61.43.5
MozillaThunderbird-translations-common-24.4.0-61.43.5
MozillaThunderbird-translations-other-24.4.0-61.43.5
enigmail-1.6.0+24.4.0-61.43.5
enigmail-debuginfo-1.6.0+24.4.0-61.43.5
seamonkey-2.25-1.41.5
seamonkey-debuginfo-2.25-1.41.5
seamonkey-debugsource-2.25-1.41.5
seamonkey-dom-inspector-2.25-1.41.5
seamonkey-irc-2.25-1.41.5
seamonkey-translations-common-2.25-1.41.5
seamonkey-translations-other-2.25-1.41.5
seamonkey-venkman-2.25-1.41.5
References:
<http://support.novell.com/security/cve/CVE-2014-1493.html>
<http://support.novell.com/security/cve/CVE-2014-1494.html>
<http://support.novell.com/security/cve/CVE-2014-1497.html>
<http://support.novell.com/security/cve/CVE-2014-1498.html>
<http://support.novell.com/security/cve/CVE-2014-1499.html>
<http://support.novell.com/security/cve/CVE-2014-1500.html>
<http://support.novell.com/security/cve/CVE-2014-1502.html>
<http://support.novell.com/security/cve/CVE-2014-1504.html>
<http://support.novell.com/security/cve/CVE-2014-1505.html>
<http://support.novell.com/security/cve/CVE-2014-1508.html>
<http://support.novell.com/security/cve/CVE-2014-1509.html>
<http://support.novell.com/security/cve/CVE-2014-1510.html>
<http://support.novell.com/security/cve/CVE-2014-1511.html>
<http://support.novell.com/security/cve/CVE-2014-1512.html>
<http://support.novell.com/security/cve/CVE-2014-1513.html>
<http://support.novell.com/security/cve/CVE-2014-1514.html>
<https://bugzilla.novell.com/868603>
--
To unsubscribe, e-mail: opensuse-security-announce+unsubscribe@opensuse.org
For additional commands, e-mail: opensuse-security-announce+help@opensuse.org

[0](#like "You must be logged-in to vote.")
[0](#dislike "You must be logged-in to vote.")

Reply

[Sign in to reply online](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/V4XETPVFGYYN3NKRN3562AZINSE5BRGD/)
Use email software

[Back to the thread](/archives/list/security-announce%40lists.opensuse.org/thread/V4XETPVFGYYN3NKRN3562AZINSE5BRGD/#V4XETPVFGYYN3NKRN3562AZINSE5BRGD)

[Back to the list](/archives/list/security-announce%40lists.opensuse.org/)

![HyperKitty](/static/hyperkitty/img/logo.png)
Powered by [HyperKitty](http://hyperkitty.readthedocs.org) version 1.3.12.



=== Content from bugzilla.mozilla.org_b2910af4_20250125_003644.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/938615)
* [XML](/show_bug.cgi?ctype=xml&id=938615)

Closed
[Bug 938615](/show_bug.cgi?id=938615)

Opened 11 years ago
Closed 11 years ago

# avoid GC hazard in ScriptSource::substring

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

avoid GC hazard in ScriptSource::substring

## Categories

### (Core :: JavaScript Engine, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=JavaScript%20Engine#JavaScript%20Engine)

JavaScript Engine
▾

Core :: JavaScript Engine
The interpreter engine for the core JavaScript language, independent of the browser's object model. File ONLY core JavaScript language bugs in this category. For bugs involving browser objects such as "window" and "document", use the "DOM" component. For bugs involving calls between JavaScript and C++, use the "XPConnect" component.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=JavaScript%20Engine)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

unspecified

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

All

All

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

normal

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla28

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Accessibility Severity | --- |
| --- | --- |
| Webcompat Score | --- |
| a11y-review | --- |
| Performance Impact | --- |
| Webcompat Priority | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox26 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox26&o1=equals&v1=wontfix) |
| firefox27 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=wontfix) |
| firefox28 | --- | [fixed](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=fixed) |
| firefox-esr24 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=wontfix) |
| b2g18 | --- | [wontfix](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=wontfix) |
| b2g-v1.1hd | --- | [wontfix](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=equals&v1=wontfix) |
| b2g-v1.2 | --- | [wontfix](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=wontfix) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox26 |  | wontfix |
| firefox27 |  | wontfix |
| firefox28 |  | fixed |
| firefox-esr24 |  | wontfix |
| b2g18 |  | wontfix |
| b2g-v1.1hd |  | wontfix |
| b2g-v1.2 |  | wontfix |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: luke, Assigned: luke)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](extensions/Gravatar/web/default.jpg)  [luke](/user_profile?user_id=347312)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](extensions/Gravatar/web/default.jpg)  [luke](/user_profile?user_id=347312)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/4fe52ee1503aecf7b6c976b8eb7c1753?d=mm&size=40)  [willyelm](/user_profile?user_id=714609)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

11 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

[986864](/show_bug.cgi?id=986864 "VERIFIED FIXED - Crash [@ memmove] or [@ mozilla::PodCopy] or [@ js_NewStringCopyN] or Assertion failure: PointerRangeSize(src, static_cast<const T*>(dst)) >= nelem, at dist/include/mozilla/PodOperations.h")

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

---

Dependency [tree](/showdependencytree.cgi?id=938615&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=938615)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Keywords: sec-high, Whiteboard: [adv-main28+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[sec-high](/buglist.cgi?keywords=sec-high&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[adv-main28+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [cbook](/user_profile?user_id=277293) | [in-testsuite](#c11 "11 years ago") | ? |
| --- | --- | --- |
| [cbook](/user_profile?user_id=277293) | in-testsuite | ? |
| --- | --- | --- |
|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (1 file, 1 obsolete file)

| [fix-source-data-bug](/attachment.cgi?id=832347)  [11 years ago](#c1)  [Luke Wagner [:luke]](/user_profile?user_id=347312)   10.22 KB, patch |  | [Details](/attachment.cgi?id=832347&action=edit) | [Diff](/attachment.cgi?id=832347&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=938615&attachment=832347) |
| --- | --- | --- |
| [fix-source-data-bug](/attachment.cgi?id=832458)  [11 years ago](#c5)  [Luke Wagner [:luke]](/user_profile?user_id=347312)   10.21 KB, patch | Benjamin : [review+](#c6 "11 years ago") | [Details](/attachment.cgi?id=832458&action=edit) | [Diff](/attachment.cgi?id=832458&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=938615&attachment=832458) |

Show Obsolete

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Luke Wagner [:luke]](/user_profile?user_id=347312)  Assignee |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=938615#c0)• 11 years ago |
|  | |

Actually, I lied in [bug 938390 comment 7](/show_bug.cgi?id=938390#c7 "RESOLVED FIXED - don't create a string to hold chars in ScriptSource::chars"); it looks like ScriptSource::substring doesn't AutoSupressGC and so a GC at js\_NewStringCopyN<CanGC> could wipe out 'chars'. I'll do what I was proposed in that bug.

|  | [Luke Wagner [:luke]](/user_profile?user_id=347312)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=938615#a11_347312)• 11 years ago |

Group: core-security

|  | [Luke Wagner [:luke]](/user_profile?user_id=347312)  Assignee |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=938615#c1)• 11 years ago |
|  | |

Attached patch

[fix-source-data-bug](attachment.cgi?id=832347&action=diff) (obsolete)
— [Details](attachment.cgi?id=832347&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=938615&attachment=832347)

[Attachment #832347](/attachment.cgi?id=832347&action=edit "fix-source-data-bug") -
Flags: review?(benjamin)

|  | [:Benjamin Peterson](/user_profile?user_id=391526) |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=938615#c2)• 11 years ago |
|  | |

Comment on [attachment 832347](/attachment.cgi?id=832347 "fix-source-data-bug") [[details]](/attachment.cgi?id=832347&action=edit "fix-source-data-bug") [[diff]](/attachment.cgi?id=832347&action=diff "fix-source-data-bug") [[review]](/page.cgi?id=splinter.html&ignore=&bug=938615&attachment=832347)
fix-source-data-bug
Review of [attachment 832347](/attachment.cgi?id=832347 "fix-source-data-bug") [[details]](/attachment.cgi?id=832347&action=edit "fix-source-data-bug") [[diff]](/attachment.cgi?id=832347&action=diff "fix-source-data-bug") [[review]](/page.cgi?id=splinter.html&ignore=&bug=938615&attachment=832347):
-----------------------------------------------------------------
Why do SourceDataCache methods initialize the guard object rather than the constructor of AutoSupressPurge? To avoid pinning the cache if its not needed?

|  | [Luke Wagner [:luke]](/user_profile?user_id=347312)  Assignee |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=938615#c3)• 11 years ago |
|  | |

(In reply to :Benjamin Peterson from [comment #2](/show_bug.cgi?id=938615#c2 "RESOLVED FIXED - avoid GC hazard in ScriptSource::substring"))
Oh, it's arbitrary, I suppose. I definitely like having the methods take the AutoSuppressPurge argument b/c it forces you to think about it. I suppose an alternative is to have the constructor of AutoSuppressPurge take a JSRuntime\* and to the inc there and then just have the SourceDataCache methods assert it's the right one. Do you think that would be better?

|  | [:Benjamin Peterson](/user_profile?user_id=391526) |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=938615#c4)• 11 years ago |
|  | |

Oh, I definitely like that you have to pass the guard to chars(). I just thought it would be more deterministic if you also pinned the cache on construction of the guard. It would also prevent the guard from being initialized twice if you for some reason called put() or lookup() with the same guard.

|  | [Luke Wagner [:luke]](/user_profile?user_id=347312)  Assignee |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=938615#c5)• 11 years ago |
|  | |

Attached patch

[fix-source-data-bug](attachment.cgi?id=832458&action=diff)
— [Details](attachment.cgi?id=832458&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=938615&attachment=832458)

Yes, that does sound nicer.
[Attachment #832347](/attachment.cgi?id=832347&action=edit "fix-source-data-bug") -
Attachment is obsolete: true
[Attachment #832347](/attachment.cgi?id=832347&action=edit "fix-source-data-bug") -
Flags: review?(benjamin)
[Attachment #832458](/attachment.cgi?id=832458&action=edit "fix-source-data-bug") -
Flags: review?(benjamin)

|  | [:Benjamin Peterson](/user_profile?user_id=391526) |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=938615#c6)• 11 years ago |
|  | |

Comment on [attachment 832458](/attachment.cgi?id=832458 "fix-source-data-bug") [[details]](/attachment.cgi?id=832458&action=edit "fix-source-data-bug") [[diff]](/attachment.cgi?id=832458&action=diff "fix-source-data-bug") [[review]](/page.cgi?id=splinter.html&ignore=&bug=938615&attachment=832458)
fix-source-data-bug
Review of [attachment 832458](/attachment.cgi?id=832458 "fix-source-data-bug") [[details]](/attachment.cgi?id=832458&action=edit "fix-source-data-bug") [[diff]](/attachment.cgi?id=832458&action=diff "fix-source-data-bug") [[review]](/page.cgi?id=splinter.html&ignore=&bug=938615&attachment=832458):
-----------------------------------------------------------------
Thanks for tidying that up.
::: js/src/jsscript.cpp
@@ +3184,5 @@
> if (!scriptChars)
> return false;
>
> + SourceDataCache::AutoSuppressPurge asp2(cx);
> + const jschar \*lazyChars = lazy->source()->chars(cx, asp2);
Presumably you can reuse |asp1| here?
::: js/src/jsscript.h
@@ +315,5 @@
> + {
> + SourceDataCache &cache\_;
> + mozilla::DebugOnly<size\_t> oldValue\_;
> + public:
> + AutoSuppressPurge(JSContext \*cx);
explicit
[Attachment #832458](/attachment.cgi?id=832458&action=edit "fix-source-data-bug") -
Flags: review?(benjamin) → review+

|  | [Luke Wagner [:luke]](/user_profile?user_id=347312)  Assignee |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=938615#c7)• 11 years ago |
|  | |

(In reply to :Benjamin Peterson from [comment #6](/show_bug.cgi?id=938615#c6 "RESOLVED FIXED - avoid GC hazard in ScriptSource::substring"))
> Presumably you can reuse |asp1| here?
Oops, yes, now we can.

|  | [Luke Wagner [:luke]](/user_profile?user_id=347312)  Assignee |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=938615#c8)• 11 years ago |
|  | |

<https://hg.mozilla.org/integration/mozilla-inbound/rev/63e0b6e8f84c>

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=938615#c9)• 11 years ago |
|  | |

How far back does this problem go?
[status-firefox28](/buglist.cgi?f1=cf_status_firefox28&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=affected)Keywords: [sec-high](/buglist.cgi?keywords=sec-high&resolution=---)

|  | [Luke Wagner [:luke]](/user_profile?user_id=347312)  Assignee |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=938615#c10)• 11 years ago |
|  | |

Looks like it's on release, at least. For context, I think it would be pretty difficult to hit this bug. I already checked crash-stats and nothing in JSScript::substring.

|  | [Carsten Book [:Tomcat]](/user_profile?user_id=277293) |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=938615#c11)• 11 years ago |
|  | |

landed on <https://hg.mozilla.org/mozilla-central/rev/63e0b6e8f84c>Status: NEW → RESOLVEDClosed: 11 years ago
[status-firefox28](/buglist.cgi?f1=cf_status_firefox28&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=fixed)Flags: in-testsuite?Resolution: --- → FIXEDTarget Milestone: --- → mozilla28

|  | [David Chan [:dchan]](/user_profile?user_id=380069) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=938615#a1054461_380069)• 11 years ago |

[status-b2g18](/buglist.cgi?f1=cf_status_b2g18&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=%3F)
[status-b2g-v1.1hd](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=equals&v1=%3F)
[status-b2g-v1.2](/buglist.cgi?f1=cf_status_b2g_1_2&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=%3F)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=938615#a1753083_280903)• 11 years ago |

[status-firefox26](/buglist.cgi?f1=cf_status_firefox26&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_firefox26&o1=equals&v1=wontfix)
[status-firefox27](/buglist.cgi?f1=cf_status_firefox27&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=affected)
[status-firefox-esr24](/buglist.cgi?f1=cf_status_firefox_esr24&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=%3F)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=938615#c12)• 11 years ago |
|  | |

(In reply to Luke Wagner [:luke] from [comment #10](/show_bug.cgi?id=938615#c10 "RESOLVED FIXED - avoid GC hazard in ScriptSource::substring"))
> Looks like it's on release, at least. For context, I think it would be
> pretty difficult to hit this bug. I already checked crash-stats and nothing
> in JSScript::substring.
One of the things we're trying to figure out is if it affects ESR24.
Is there a reason we didn't nominate this for Firefox 27 as a sec-high bug?

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=938615#a5893075_1689)• 11 years ago |

Flags: needinfo?(luke)

|  | [Luke Wagner [:luke]](/user_profile?user_id=347312)  Assignee |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=938615#c13)• 11 years ago |
|  | |

Since this was theoretical, not discovered, and likely never to happen in practice, I thought it was least risky to let it ride the trains.Flags: needinfo?(luke)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=938615#c14)• 11 years ago |
|  | |

Do we need this on ESR24 since it is a sec-high? It isn't clear if it affects ESR24 to me.
[status-firefox27](/buglist.cgi?f1=cf_status_firefox27&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=wontfix)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=938615#a9004161_280903)• 11 years ago |

Flags: needinfo?(luke)

|  | [Luke Wagner [:luke]](/user_profile?user_id=347312)  Assignee |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=938615#c15)• 11 years ago |
|  | |

I assume ESR24 is affected. The patch has some non-trivial rebase conflicts when attempting to apply it to mozilla-esr24 so I'd be really hesitant to attempt to backport this patch lest a separate crash/leak be created.Flags: needinfo?(luke)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=938615#c16)• 11 years ago |
|  | |

Ok. Thanks. Dan, what do you think about this for ESR24? Should we avoid it because of potential issues.
[status-firefox-esr24](/buglist.cgi?f1=cf_status_firefox_esr24&o1=isnotempty):
[?](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=%3F) → [affected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=affected)Flags: needinfo?(dveditz)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=938615#c17)• 11 years ago |
|  | |

Let's wontfix for esr24, not worth the risk. I'm not sure about b2g1.2 (gecko26). Doesn't look like any partners are taking that version anyway so maybe just mark it affected for now and we'll worry about it later if necessary.
[status-b2g18](/buglist.cgi?f1=cf_status_b2g18&o1=isnotempty):
[?](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=%3F) → [wontfix](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=wontfix)
[status-b2g-v1.1hd](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=isnotempty):
[?](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=equals&v1=%3F) → [wontfix](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=equals&v1=wontfix)
[status-b2g-v1.2](/buglist.cgi?f1=cf_status_b2g_1_2&o1=isnotempty):
[?](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=%3F) → [affected](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=affected)
[status-firefox-esr24](/buglist.cgi?f1=cf_status_firefox_esr24&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=wontfix)Flags: needinfo?(dveditz)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=938615#c18)• 11 years ago |
|  | |

This would also require some rebasing to land on b2g26. Luke, you OK calling this wontfix there?Flags: needinfo?(luke)

|  | [Luke Wagner [:luke]](/user_profile?user_id=347312)  Assignee |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=938615#c19)• 11 years ago |
|  | |

Yes, this bug is just theoretical.Flags: needinfo?(luke)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=938615#a9422977_75935)• 11 years ago |

[status-b2g-v1.2](/buglist.cgi?f1=cf_status_b2g_1_2&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=wontfix)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=938615#a9538988_280903)• 11 years ago |

Whiteboard: [adv-main28+]

|  | [Jon Coppeard (:jonco) (PTO until 27th Jan)](/user_profile?user_id=443194) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=938615#a11587489_443194)• 11 years ago |

Depends on: [986864](/show_bug.cgi?id=986864 "VERIFIED FIXED - Crash [@ memmove] or [@ mozilla::PodCopy] or [@ js_NewStringCopyN] or Assertion failure: PointerRangeSize(src, static_cast<const T*>(dst)) >= nelem, at dist/include/mozilla/PodOperations.h")

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=938615#a40485286_1689)• 10 years ago |

Group: core-security
You need to [log in](/show_bug.cgi?id=938615&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Luke Wagner [:luke]](/user_profile?user_id=347312)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from blog.mozilla.org_214f5ef1_20250126_044955.html ===

[Skip to content](#content)

[Mozilla](https://blog.mozilla.org/en/)

![search](https://blog.mozilla.org/wp-content/themes/foxtail/assets/images/icons/search.svg)

* [Internet Culture](https://blog.mozilla.org/en/category/internet-culture/)
  + [Deep Dives](https://blog.mozilla.org/en/category/internet-culture/deep-dives/)
  + [Mozilla Explains](https://blog.mozilla.org/en/category/internet-culture/mozilla-explains/)
  + [Interviews](https://blog.mozilla.org/en/category/internet-culture/interviews/)
  + [Videos](https://blog.mozilla.org/en/category/videos/)
* [Privacy & Security](https://blog.mozilla.org/en/category/privacy-security/)
* [Products](https://blog.mozilla.org/en/category/products/)
  + [Firefox](https://blog.mozilla.org/en/category/products/firefox/)
  + [Pocket](https://blog.mozilla.org/en/category/products/pocket/)
  + [Mozilla VPN](https://blog.mozilla.org/en/category/products/mozilla-vpn/)
* [Mozilla](https://blog.mozilla.org/en/category/mozilla/)
  + [News](https://blog.mozilla.org/en/category/mozilla/news/)
  + [Internet Policy](https://blog.mozilla.org/en/category/mozilla/internet-policy/)
  + [Leadership](https://blog.mozilla.org/en/category/mozilla/leadership/)
    - [Mitchell Baker, CEO](https://blog.mozilla.org/en/author/mitchellmozillacom/)
    - [Mark Surman, ED Foundation](https://blog.mozilla.org/en/author/markmozillafoundation-org/)
    - [Eric Rescorla, Firefox CTO](https://blog.mozilla.org/en/author/ekrmozilla-com/)

[Download Firefox](https://www.mozilla.org/firefox/new/?utm_source=blog.mozilla.org&utm_medium=referral&utm_campaign=blog-nav)

![search](https://blog.mozilla.org/wp-content/themes/foxtail/assets/images/icons/search.svg)

#### Search

Search for:

![](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2019/01/mozilla-logo-bw-rgb.png)
## News

Official announcements and press releases

[![Room filled with people listening to a speaker on stage. Demo Day visual image in the background.](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/12/Demo_Day_Blog_Header_-1-800x800.jpg)
Mozilla
## Mozilla Builders: Celebrating community-driven innovation in AI

Read More](https://blog.mozilla.org/en/mozilla/mozilla-builders-demo-day/)

[![The Mozilla logo in green on a black background](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/12/logo-lockup-video-poster-800x800.png)
Mozilla
## Mozilla welcomes new executive team members

Read More](https://blog.mozilla.org/en/mozilla/new-executives/)

[![Decorative image of wrapped gifts in front of an iphone](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2023/11/moz_header_holiday_firefox-phone-gifts_blue-03.png-800x800.png)
Products
## Shopping for everyone? We’ve got you covered with the Fakespot Holiday Gift Guide 2024

Read More](https://blog.mozilla.org/en/products/shopping-for-everyone-weve-got-you-covered-with-the-fakespot-holiday-gift-guide-2024/)

[![Text: Mozilla Builders](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/06/Blog-16_9-1920x1080-1-800x800.png)
Mozilla
## 14 AI projects to watch: Mozilla’s first Builders Accelerator cohort kicks off

Read More](https://blog.mozilla.org/en/mozilla/14-ai-projects-to-watch-mozillas-first-builders-accelerator-cohort-kicks-off/)

[![A check mark next to the text "Fakespot."](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2023/07/Fakespot_ProductBlog-2-800x800.jpg)
News
## Fakespot’s guide to trending back-to-school products

Read More](https://blog.mozilla.org/en/mozilla/news/fakespots-guide-to-trending-back-to-school-products/)

[![](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/06/IG_Highlights_Icon-800x800.png)
Mozilla
## BAFTA Award-Winner Siobhán McSweeney to host Mozilla’s 2nd Annual Rise25 Awards in Dublin, Ireland on Aug. 13

Read More](https://blog.mozilla.org/en/mozilla/bafta-award-winner-siobhan-mcsweeney-to-host-mozillas-2nd-annual-rise25-awards-in-dublin-ireland-on-august-13/)

[![](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/05/fx_website_meta-image_tips-tricks_alt-04-1-800x800.webp)
Mozilla
## Here’s what we’re working on in Firefox

Read More](https://blog.mozilla.org/en/mozilla/heres-what-were-working-on-in-firefox/)

[![A check mark next to the text "Fakespot."](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2023/07/Fakespot_ProductBlog-2-800x800.jpg)
News
## Fakespot reveals the product categories with the most and least reliable product reviews

Read More](https://blog.mozilla.org/en/mozilla/news/fakespot-reveals-the-product-categories-with-the-most-and-least-reliable-product-reviews-for-summer-and-back-to-school-shopping/)

[![A dark blue speech bubble with horizontal purple and red bars on a pink background.](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2020/03/fx_blog_header_announcements_001_1920x1080-800x800.jpg)
Firefox
## Engaging with our Firefox community: Highlights from our recent AMA

Read More](https://blog.mozilla.org/en/products/firefox/engaging-with-our-firefox-community-highlights-from-our-recent-ama/)

[![](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/06/IG_Highlights_Icon-800x800.png)
Mozilla
## Mozilla announces finalists for the 2nd annual Rise25 Awards

Read More](https://blog.mozilla.org/en/mozilla/mozilla-announces-finalists-for-the-2nd-annual-rise25-awards/)

[![Mozilla and Anonym logos](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/06/blog_1200x800_v2-800x800.png)
Mozilla
## Introducing Anonym: Raising the bar for privacy-preserving digital advertising

Read More](https://blog.mozilla.org/en/mozilla/mozilla-anonym-raising-the-bar-for-privacy-preserving-digital-advertising/)

[![logo - zero with a diagonal line through it, and the letters D, I, N](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/06/odintbanner-500x500.png)
Mozilla
## Keeping GenAI technologies secure is a shared responsibility

Read More](https://blog.mozilla.org/en/mozilla/keeping-genai-technologies-secure-is-a-shared-responsibility/)

1
[2](https://blog.mozilla.org/en/category/mozilla/news/page/2?utm_source=www.mozilla)
[3](https://blog.mozilla.org/en/category/mozilla/news/page/3?utm_source=www.mozilla)
…
[24](https://blog.mozilla.org/en/category/mozilla/news/page/24?utm_source=www.mozilla)
[next](https://blog.mozilla.org/en/category/mozilla/news/page/2?utm_source=www.mozilla)

![newsletter](https://blog.mozilla.org/wp-content/themes/foxtail/assets/images/newsletter.png)

### Keep up with all things Firefox

Get how-tos, advice and news to make your Firefox experience work best for you.

Your e-mail address

Country
- select -
Afghanistan
Akrotiri
Albania
Algeria
American Samoa
Andorra
Angola
Anguilla
Antarctica
Antigua and Barbuda
Argentina
Armenia
Aruba
Ashmore and Cartier Islands
Australia
Austria
Azerbaijan
Bahamas, The
Bahrain
Baker Island
Bangladesh
Barbados
Bassas da India
Belarus
Belgium
Belize
Benin
Bermuda
Bhutan
Bolivia
Bonaire, Sint Eustatius, and Saba
Bosnia and Herzegovina
Botswana
Bouvet Island
Brazil
British Indian Ocean Territory
Brunei
Bulgaria
Burkina Faso
Burma
Burundi
Cabo Verde
Cambodia
Cameroon
Canada
Cayman Islands
Central African Republic
Chad
Chile
China
Christmas Island
Clipperton Island
Cocos (Keeling) Islands
Colombia
Comoros
Congo (Brazzaville)
Congo (Kinshasa)
Cook Islands
Coral Sea Islands
Costa Rica
Croatia
Cuba
Curaçao
Cyprus
Czech Republic
Côte d’Ivoire
Denmark
Dhekelia
Diego Garcia
Djibouti
Dominica
Dominican Republic
Ecuador
Egypt
El Salvador
Equatorial Guinea
Eritrea
Estonia
Ethiopia
Europa Island
Falkland Islands (Islas Malvinas)
Faroe Islands
Fiji
Finland
France
French Guiana
French Polynesia
French Southern and Antarctic Lands
Gabon
Gambia, The
Gaza Strip
Georgia
Germany
Ghana
Gibraltar
Glorioso Islands
Greece
Greenland
Grenada
Guadeloupe
Guam
Guatemala
Guernsey
Guinea
Guinea-Bissau
Guyana
Haiti
Heard Island and McDonald Islands
Honduras
Hong Kong
Howland Island
Hungary
Iceland
India
Indonesia
Iran
Iraq
Ireland
Isle of Man
Israel
Italy
Jamaica
Jan Mayen
Japan
Jarvis Island
Jersey
Johnston Atoll
Jordan
Juan de Nova Island
Kazakhstan
Kenya
Kingman Reef
Kiribati
Korea, North
Korea, South
Kosovo
Kuwait
Kyrgyzstan
Laos
Latvia
Lebanon
Lesotho
Liberia
Libya
Liechtenstein
Lithuania
Luxembourg
Macau
Macedonia
Madagascar
Malawi
Malaysia
Maldives
Mali
Malta
Marshall Islands
Martinique
Mauritania
Mauritius
Mayotte
Mexico
Micronesia, Federated States of
Midway Islands
Moldova
Monaco
Mongolia
Montenegro
Montserrat
Morocco
Mozambique
Namibia
Nauru
Navassa Island
Nepal
Netherlands
New Caledonia
New Zealand
Nicaragua
Niger
Nigeria
Niue
Norfolk Island
Northern Mariana Islands
Norway
Oman
Pakistan
Palau
Palmyra Atoll
Panama
Papua New Guinea
Paracel Islands
Paraguay
Peru
Philippines
Pitcairn Islands
Poland
Portugal
Puerto Rico
Qatar
Reunion
Romania
Russia
Rwanda
Saint Barthelemy
Saint Helena, Ascension, and Tristan da Cunha
Saint Kitts and Nevis
Saint Lucia
Saint Martin
Saint Pierre and Miquelon
Saint Vincent and the Grenadines
Samoa
San Marino
Sao Tome and Principe
Saudi Arabia
Senegal
Serbia
Seychelles
Sierra Leone
Singapore
Sint Maarten
Slovakia
Slovenia
Solomon Islands
Somalia
South Africa
South Georgia and South Sandwich Islands
South Sudan
Spain
Spratly Islands
Sri Lanka
Sudan
Suriname
Svalbard
Swaziland
Sweden
Switzerland
Syria
Taiwan
Tajikistan
Tanzania
Thailand
Timor-Leste
Togo
Tokelau
Tonga
Trinidad and Tobago
Tromelin Island
Tunisia
Turkey
Turkmenistan
Turks and Caicos Islands
Tuvalu
Uganda
Ukraine
United Arab Emirates
United Kingdom
United States
Uruguay
Uzbekistan
Vanuatu
Vatican City
Venezuela
Vietnam
Virgin Islands, British
Virgin Islands, U.S.
Wake Island
Wallis and Futuna
West Bank
Western Sahara
Yemen
Zambia
Zimbabwe

Language
English
Bahasa Indonesia
Deutsch
Español
Français
Polski
Português
Русский
正體中文

Format

 HTML

 Text

I’m okay with Mozilla handling my info as explained in this [Privacy Policy](https://www.mozilla.org/privacy/).

Sign up now
We will only send you
Mozilla-related information.

## Thanks!

If you haven’t previously confirmed a subscription to a Mozilla-related newsletter you may have to do so. Please check your inbox or your spam filter for an e-mail from us.

[Mozilla](https://www.mozilla.org/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)

##### Mozilla

* [About](https://www.mozilla.org/about/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Contact Us](https://www.mozilla.org/contact/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Donate](https://donate.mozilla.org/?presets=50,30,20,10&amount=30¤cy=usd&utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)

##### Firefox

* [Download Firefox](https://www.mozilla.org/firefox/new/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Desktop](https://www.mozilla.org/firefox/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Mobile](https://www.mozilla.org/firefox/mobile/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Features](https://www.mozilla.org/firefox/features/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Beta, Nightly, Developer Edition](https://www.mozilla.org/firefox/channel/desktop/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)

##### Resources

* [Privacy Hub](https://www.mozilla.org/privacy/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Browser Comparison](https://www.mozilla.org/firefox/browsers/compare/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Brand Standards](https://mozilla.design/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)

##### Social

Follow @Firefox

* [Twitter (@mozilla)](https://twitter.com/firefox)
* [Instagram (@mozilla)](https://www.instagram.com/firefox/)
* [YouTube (@firefoxchannel)](https://www.youtube.com/user/firefoxchannel)

Follow @Mozilla

* [Twitter (@mozilla)](https://twitter.com/mozilla)
* [Instagram (@mozilla)](https://www.instagram.com/mozilla/)

* [Website Privacy Notice](https://www.mozilla.org/privacy/websites/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Legal](https://www.mozilla.org/about/legal/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)



=== Content from bugzilla.mozilla.org_0a5f5506_20250125_003646.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/949843)
* [XML](/show_bug.cgi?ctype=xml&id=949843)

Closed
[Bug 949843](/show_bug.cgi?id=949843)

Opened 11 years ago
Closed 11 years ago

# Don't use "char\* str = NS\_ConvertUTF16toUTF8(aBdAddress).get();"

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

Don't use "char\* str = NS\_ConvertUTF16toUTF8(aBdAddress).get();"

## Categories

### (Firefox OS Graveyard :: Bluetooth, defect)

[Product:](/describecomponents.cgi?product=Firefox%20OS%20Graveyard)

Firefox OS Graveyard
▾

Firefox OS Graveyard
FirefoxOS, or Boot2Gecko (B2G) is Mozilla's operating system built on web standards. ([more info](https://wiki.mozilla.org/B2G))
[See Open Bugs in This Product](/buglist.cgi?product=Firefox%20OS%20Graveyard&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Firefox%20OS%20Graveyard)
Watch This Product

[Component:](/describecomponents.cgi?product=Firefox%20OS%20Graveyard&component=Bluetooth#Bluetooth)

Bluetooth
▾

Firefox OS Graveyard :: Bluetooth
Bluetooth support in Boot2Gecko/Firefox OS
[See Open Bugs in This Component](/buglist.cgi?product=Firefox%20OS%20Graveyard&component=Bluetooth&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Firefox%20OS%20Graveyard&component=Bluetooth&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Firefox%20OS%20Graveyard&component=Bluetooth)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

unspecified

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

All

Gonk (Firefox OS)

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

normal

## Tracking

### (blocking-b2g:1.3+, firefox27 wontfix, firefox28 fixed, firefox29 fixed, firefox-esr24 unaffected, b2g18 unaffected, b2g-v1.1hd unaffected, b2g-v1.2 unaffected, b2g-v1.3 fixed, b2g-v1.3T fixed, b2g-v1.4 fixed)

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

1.3 C2/1.4 S2(17jan)

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| blocking-b2g | [1.3+](/buglist.cgi?f1=cf_blocking_b2g&o1=equals&v1=1.3%2B) |
| --- | --- |

| blocking-b2g | 1.3+ |
| --- | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox27 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=wontfix) |
| firefox28 | --- | [fixed](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=fixed) |
| firefox29 | --- | [fixed](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=fixed) |
| firefox-esr24 | --- | [unaffected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=unaffected) |
| b2g18 | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=unaffected) |
| b2g-v1.1hd | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=equals&v1=unaffected) |
| b2g-v1.2 | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=unaffected) |
| b2g-v1.3 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=fixed) |
| b2g-v1.3T | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=fixed) |
| b2g-v1.4 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=fixed) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox27 |  | wontfix |
| firefox28 |  | fixed |
| firefox29 |  | fixed |
| firefox-esr24 |  | unaffected |
| b2g18 |  | unaffected |
| b2g-v1.1hd |  | unaffected |
| b2g-v1.2 |  | unaffected |
| b2g-v1.3 |  | fixed |
| b2g-v1.3T |  | fixed |
| b2g-v1.4 |  | fixed |

## People

### (Reporter: m\_kato, Assigned: ben.tian)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/e6ff740053063f0a4f0e67d9dea34415?d=mm&size=40)  [ben.tian](/user_profile?user_id=464639)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/1875645d5594d36bca29657d51d24ed6?d=mm&size=40)  [m\_kato](/user_profile?user_id=8636)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

---

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

13 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[936732](/show_bug.cgi?id=936732 "RESOLVED FIXED - [Bluetooth] Refactor dom/bluetooth for both BlueZ and Bluedroid compatibility"), [938521](/show_bug.cgi?id=938521 "RESOLVED FIXED - [Bluetooth] Make GetBluetoothInterface() and StringToBdAddressType() available for profile managers")

Dependency [tree](/showdependencytree.cgi?id=949843&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=949843)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Keywords: sec-critical, Whiteboard: [adv-main28+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[sec-critical](/buglist.cgi?keywords=sec-critical&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[adv-main28+]

QA Whiteboard:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [cbook](/user_profile?user_id=277293) | [in-testsuite](#c7 "11 years ago") | ? |
| --- | --- | --- |
| [cbook](/user_profile?user_id=277293) | in-testsuite | ? |
| --- | --- | --- |
|  | sec-bounty | ? |
| --- | --- | --- |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (1 file)

| [[final] Patch 1: Declare local UTF8 string variable, r=echou](/attachment.cgi?id=8347861)  [11 years ago](#c2)  [Ben Tian (inactive)](/user_profile?user_id=464639)   2.51 KB, patch | echou : [review+](#c3 "11 years ago")  m\_kato : [feedback+](#a268725_8636 "11 years ago") | [Details](/attachment.cgi?id=8347861&action=edit) | [Diff](/attachment.cgi?id=8347861&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=949843&attachment=8347861) |
| --- | --- | --- |

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Makoto Kato [:m\_kato]](/user_profile?user_id=8636)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=949843#c0)• 11 years ago |
|  | |

This means,
char \*str;
{
NS\_ConvertUTF16toUTF8 tmp(aBdAddress);
str = tmp;
}
... (use str) ...
so when using str, buffer is already freed. This becomes use-after-free.
/dom/bluetooth/bluedroid/gonk/BluetoothServiceBluedroid.cpp (View Hg log or Hg annotations)
line 249 -- const char\* str = NS\_ConvertUTF16toUTF8(aBdAddress).get();
line 1004 -- const char\* name = NS\_ConvertUTF16toUTF8(str).get();

|  | [Makoto Kato [:m\_kato]](/user_profile?user_id=8636)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=949843#a71_8636)• 11 years ago |

Assignee: nobody → m\_kato

|  | [Makoto Kato [:m\_kato]](/user_profile?user_id=8636)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=949843#a614_8636)• 11 years ago |

Assignee: m\_kato → nobody

|  | [:Gavin Sharp [email: gavin@gavinsharp.com]](/user_profile?user_id=103593) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=949843#a160463_103593)• 11 years ago |

Component: DOM → BluetoothProduct: Core → Firefox OSVersion: Trunk → unspecified

|  | [Eric Chou [:ericchou] [:echou]](/user_profile?user_id=434302) |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=949843#c1)• 11 years ago |
|  | |

Thanks for reporting. I've talked to Ben and he will take this over.Assignee: nobody → btian

|  | [Ben Tian (inactive)](/user_profile?user_id=464639)  Assignee |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=949843#c2)• 11 years ago |
|  | |

Attached patch

[[final] Patch 1: Declare local UTF8 string variable, r=echou](attachment.cgi?id=8347861&action=diff)
— [Details](attachment.cgi?id=8347861&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=949843&attachment=8347861)

[Attachment #8347861](/attachment.cgi?id=8347861&action=edit "[final] Patch 1: Declare local UTF8 string variable, r=echou") -
Flags: review?(echou)
[Attachment #8347861](/attachment.cgi?id=8347861&action=edit "[final] Patch 1: Declare local UTF8 string variable, r=echou") -
Flags: feedback?(m\_kato)

|  | [Makoto Kato [:m\_kato]](/user_profile?user_id=8636)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=949843#a268725_8636)• 11 years ago |

[Attachment #8347861](/attachment.cgi?id=8347861&action=edit "[final] Patch 1: Declare local UTF8 string variable, r=echou") -
Flags: feedback?(m\_kato) → feedback+

|  | [Eric Chou [:ericchou] [:echou]](/user_profile?user_id=434302) |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=949843#c3)• 11 years ago |
|  | |

Comment on [attachment 8347861](/attachment.cgi?id=8347861 "[final] Patch 1: Declare local UTF8 string variable, r=echou") [[details]](/attachment.cgi?id=8347861&action=edit "[final] Patch 1: Declare local UTF8 string variable, r=echou") [[diff]](/attachment.cgi?id=8347861&action=diff "[final] Patch 1: Declare local UTF8 string variable, r=echou") [[review]](/page.cgi?id=splinter.html&ignore=&bug=949843&attachment=8347861)
[final] Patch 1: Declare local UTF8 string variable, r=echou
Review of [attachment 8347861](/attachment.cgi?id=8347861 "[final] Patch 1: Declare local UTF8 string variable, r=echou") [[details]](/attachment.cgi?id=8347861&action=edit "[final] Patch 1: Declare local UTF8 string variable, r=echou") [[diff]](/attachment.cgi?id=8347861&action=diff "[final] Patch 1: Declare local UTF8 string variable, r=echou") [[review]](/page.cgi?id=splinter.html&ignore=&bug=949843&attachment=8347861):
-----------------------------------------------------------------
Thanks.
[Attachment #8347861](/attachment.cgi?id=8347861&action=edit "[final] Patch 1: Declare local UTF8 string variable, r=echou") -
Flags: review?(echou) → review+

|  | [Eric Chou [:ericchou] [:echou]](/user_profile?user_id=434302) |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=949843#c4)• 11 years ago |
|  | |

Nominate as 1.3+ since 1.3 would be affected.blocking-b2g: --- → 1.3?

|  | [Ben Tian (inactive)](/user_profile?user_id=464639)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=949843#a284959_464639)• 11 years ago |

[Attachment #8347861](/attachment.cgi?id=8347861&action=edit "[final] Patch 1: Declare local UTF8 string variable, r=echou") -
Attachment description: Patch 1 (v1): Declare local UTF8 string variable → [final] Patch 1: Declare local UTF8 string variable, r=echou

|  | [Ben Tian (inactive)](/user_profile?user_id=464639)  Assignee |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=949843#c5)• 11 years ago |
|  | |

try server: <https://tbpl.mozilla.org/?tree=Try&rev=aceba6bd8795>

|  | [Ben Tian (inactive)](/user_profile?user_id=464639)  Assignee |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=949843#c6)• 11 years ago |
|  | |

<https://hg.mozilla.org/integration/b2g-inbound/rev/e769b355870f>

|  | [Carsten Book [:Tomcat]](/user_profile?user_id=277293) |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=949843#c7)• 11 years ago |
|  | |

landed on central:
<https://hg.mozilla.org/mozilla-central/rev/e769b355870f>Status: NEW → RESOLVEDClosed: 11 years agoFlags: in-testsuite?Resolution: --- → FIXED

|  | [Jason Smith [:jsmith]](/user_profile?user_id=432443) |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=949843#c8)• 11 years ago |
|  | |

Paul - Can you provide input from a security perspective if this is a blocker for 1.3?Flags: needinfo?(ptheriault)

|  | [Paul Theriault [:pauljt] (no longer reading bugmail)](/user_profile?user_id=434339) |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=949843#c9)• 11 years ago |
|  | |

If this is remotely exploitable I would say this is sec-critical, otherwise maybe sec-high. From a very quick skim of this code, it seems that StringToBdAddressType is called using the remote address value[1], so this may be remotely exploitable, so I would err on the side of sec-critical.
[1] <http://dxr.mozilla.org/mozilla-central/source/dom/bluetooth/bluedroid/gonk/BluetoothServiceBluedroid.cpp#1033>Flags: needinfo?(ptheriault)Keywords: [sec-critical](/buglist.cgi?keywords=sec-critical&resolution=---)

|  | [Paul Theriault [:pauljt] (no longer reading bugmail)](/user_profile?user_id=434339) |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=949843#c10)• 11 years ago |
|  | |

Although that said, bluetooth would need to be enabled, and attacker would have to be local. So maybe it is a sec-high. Either way I think we need to get this on 1.3, especially since its already patched and the patch is public.

|  | [Jason Smith [:jsmith]](/user_profile?user_id=432443) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=949843#a2495965_432443)• 11 years ago |

blocking-b2g: 1.3? → 1.3+

|  | [Ben Tian (inactive)](/user_profile?user_id=464639)  Assignee |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=949843#c11)• 11 years ago |
|  | |

(In reply to Ben Tian [:btian] from [comment #2](/show_bug.cgi?id=949843#c2 "RESOLVED FIXED - Don't use \"char* str = NS_ConvertUTF16toUTF8(aBdAddress).get();\""))
> Created [attachment 8347861](/attachment.cgi?id=8347861 "[final] Patch 1: Declare local UTF8 string variable, r=echou") [[details]](/attachment.cgi?id=8347861&action=edit "[final] Patch 1: Declare local UTF8 string variable, r=echou") [[diff]](/attachment.cgi?id=8347861&action=diff "[final] Patch 1: Declare local UTF8 string variable, r=echou") [[review]](/page.cgi?id=splinter.html&ignore=&bug=949843&attachment=8347861)
> [final] Patch 1: Declare local UTF8 string variable, r=echou
Request to uplift the patch to 1.3.Keywords: [checkin-needed](/buglist.cgi?keywords=checkin-needed&resolution=---)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=949843#c12)• 11 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-aurora/rev/1105948b00e8>
FWIW, you don't need to explicitly request uplift. We have bug queries to assist with such things :)
<https://wiki.mozilla.org/Release_Management/B2G_Landing>
[status-b2g-v1.3](/buglist.cgi?f1=cf_status_b2g_1_3&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=fixed)
[status-firefox27](/buglist.cgi?f1=cf_status_firefox27&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=wontfix)
[status-firefox28](/buglist.cgi?f1=cf_status_firefox28&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=fixed)
[status-firefox29](/buglist.cgi?f1=cf_status_firefox29&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=fixed)Keywords: [checkin-needed](/buglist.cgi?keywords=checkin-needed&resolution=---)Target Milestone: --- → 1.3 C2/1.4 S2(17jan)

|  | [Paul Theriault [:pauljt] (no longer reading bugmail)](/user_profile?user_id=434339) |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=949843#c13)• 11 years ago |
|  | |

Pretty sure bluedroid wasnt added until 1.3. (And I can't see this file in the 1.2 source repo)
[status-b2g18](/buglist.cgi?f1=cf_status_b2g18&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=unaffected)
[status-b2g-v1.1hd](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=equals&v1=unaffected)
[status-b2g-v1.2](/buglist.cgi?f1=cf_status_b2g_1_2&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=unaffected)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=949843#a7157998_280903)• 11 years ago |

Whiteboard: [adv-main28+]

|  | [Sylvestre Ledru [:Sylvestre]](/user_profile?user_id=495955) |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=949843#c14)• 11 years ago |
|  | |

Does it impact also ESR24?

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=949843#c15)• 11 years ago |
|  | |

Isn't this b2g only?

|  | [Makoto Kato [:m\_kato]](/user_profile?user_id=8636)  Reporter |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=949843#c16)• 11 years ago |
|  | |

(In reply to Al Billings [:abillings] from [comment #15](/show_bug.cgi?id=949843#c15 "RESOLVED FIXED - Don't use \"char* str = NS_ConvertUTF16toUTF8(aBdAddress).get();\""))
> Isn't this b2g only?
Yes.

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=949843#a7822556_280903)• 11 years ago |

[status-firefox-esr24](/buglist.cgi?f1=cf_status_firefox_esr24&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=unaffected)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=949843#a7953625_75935)• 11 years ago |

[status-b2g-v1.3T](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=fixed)
[status-b2g-v1.4](/buglist.cgi?f1=cf_status_b2g_1_4&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=fixed)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=949843#a38026900_1689)• 10 years ago |

Group: core-security
You need to [log in](/show_bug.cgi?id=949843&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Ben Tian (inactive)](/user_profile?user_id=464639)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from lists.opensuse.org_625dd439_20250125_003633.html ===


[![openSUSE](https://static.opensuse.org/favicon.svg)
Mailing Lists](/archives/ "openSUSE Mailing Lists")

[Sign In](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/SSQWAEVA4OHDLGA2V23WDRMLXNZ2CV4W/)
[Sign Up](/accounts/signup/?next=/archives/list/security-announce%40lists.opensuse.org/message/SSQWAEVA4OHDLGA2V23WDRMLXNZ2CV4W/)

[Manage this list](/manage/lists/security-announce.lists.opensuse.org/)
[Sign In](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/SSQWAEVA4OHDLGA2V23WDRMLXNZ2CV4W/)
[Sign Up](/accounts/signup/?next=/archives/list/security-announce%40lists.opensuse.org/message/SSQWAEVA4OHDLGA2V23WDRMLXNZ2CV4W/)

×
#### Keyboard Shortcuts

### Thread View

* `j`: Next unread message
* `k`: Previous unread message
* `j a`: Jump to all threads* `j l`: Jump to MailingList overview

[thread](/archives/list/security-announce%40lists.opensuse.org/thread/SSQWAEVA4OHDLGA2V23WDRMLXNZ2CV4W/#SSQWAEVA4OHDLGA2V23WDRMLXNZ2CV4W)

# [security-announce] openSUSE-SU-2014:0448-1: important: MozillaFirefox: Update to version 28.0

![](https://seccdn.libravatar.org/avatar/099a17325bdf082b643d1a6bbacde279.jpg?s=120&d=mm&r=g)
## [opensuse-security＠opensuse.org](/archives/users/1b72def497ef4503896cd7a5fe9fb8e0/ "See the profile for opensuse-security＠opensuse.org")

26 Mar
2014

26 Mar
'14

16:04

openSUSE Security Update: MozillaFirefox: Update to version 28.0
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
Announcement ID: openSUSE-SU-2014:0448-1
Rating: important
References: #865539 #868603
Cross-References: CVE-2014-1493 CVE-2014-1494 CVE-2014-1497
CVE-2014-1498 CVE-2014-1499 CVE-2014-1500
CVE-2014-1502 CVE-2014-1504 CVE-2014-1505
CVE-2014-1508 CVE-2014-1509 CVE-2014-1510
CVE-2014-1511 CVE-2014-1512 CVE-2014-1513
CVE-2014-1514
Affected Products:
openSUSE 13.1
openSUSE 12.3
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
An update that fixes 16 vulnerabilities is now available.
Description:
Mozilla Firefox was updated to version 28.0, receiving
enhancements, bug and security fixes. Mozilla NSPR was
updated to 4.10.4 receiving enhancements, bug and security
fixes. Mozilla NSS was updated to 3.15.5 receiving
enhancements, bug and security fixes.
Changes in MozillaFirefox:
- update to Firefox 28.0 (bnc#868603)
\* MFSA 2014-15/CVE-2014-1493/CVE-2014-1494 Miscellaneous
memory safety hazards
\* MFSA 2014-17/CVE-2014-1497 (bmo#966311) Out of bounds
read during WAV file decoding
\* MFSA 2014-18/CVE-2014-1498 (bmo#935618)
crypto.generateCRMFRequest does not validate type of key
\* MFSA 2014-19/CVE-2014-1499 (bmo#961512) Spoofing attack
on WebRTC permission prompt
\* MFSA 2014-20/CVE-2014-1500 (bmo#956524) onbeforeunload
and Javascript navigation DOS
\* MFSA 2014-22/CVE-2014-1502 (bmo#972622) WebGL content
injection from one domain to rendering in another
\* MFSA 2014-23/CVE-2014-1504 (bmo#911547) Content
Security Policy for data: documents not preserved by
session restore
\* MFSA 2014-26/CVE-2014-1508 (bmo#963198) Information
disclosure through polygon rendering in MathML
\* MFSA 2014-27/CVE-2014-1509 (bmo#966021) Memory
corruption in Cairo during PDF font rendering
\* MFSA 2014-28/CVE-2014-1505 (bmo#941887) SVG filters
information disclosure through feDisplacementMap
\* MFSA 2014-29/CVE-2014-1510/CVE-2014-1511 (bmo#982906,
bmo#982909) Privilege escalation using
WebIDL-implemented APIs
\* MFSA 2014-30/CVE-2014-1512 (bmo#982957) Use-after-free
in TypeObject
\* MFSA 2014-31/CVE-2014-1513 (bmo#982974) Out-of-bounds
read/write through neutering ArrayBuffer objects
\* MFSA 2014-32/CVE-2014-1514 (bmo#983344) Out-of-bounds
write through TypedArrayObject after neutering
- requires NSPR 4.10.3 and NSS 3.15.5
- new build dependency (and recommends):
\* libpulse
\* JS math correctness issue (bmo#941381)
Changes in mozilla-nspr:
- update to version 4.10.4
\* bmo#767759: Add support for new x32 abi
\* bmo#844784: Thread data race in PR\_EnterMonitor
\* bmo#939786: data race
nsprpub/pr/src/pthreads/ptthread.c:137 \_pt\_root
\* bmo#958796: Users of \_beginthreadex that set a custom
stack size may not be getting the behavior they want
\* bmo#963033: AArch64 support update for NSPR
\* bmo#969061: Incorrect end-of-list test when iterating
over a PRCList in prcountr.c and prtrace.c
\* bmo#971152: IPv6 detection on linux depends on
availability of /proc/net/if\_inet6
- update to version 4.10.3
\* bmo#749849: ensure we'll free the thread-specific data
key.
\* bmo#941461: don't compile android with unaligned memory
access.
\* bmo#932398: Add PR\_SyncMemMap, a portable version of
msync/FlushViewOfFile.
\* bmo#952621: Fix a thread-unsafe access to lock->owner
in PR\_Lock.
\* bmo#957458: Fix several bugs in the lock rank checking
code.
\* bmo#936320: Use an alternative test for IPv6 support on
Linux to avoid opening a socket.
Changes in mozilla-nss:
- update to 3.15.5
\* required for Firefox 28
\* export FREEBL\_LOWHASH to get the correct default
headers (bnc#865539) New functionality
\* Added support for the TLS application layer protocol
negotiation (ALPN) extension. Two SSL socket options,
SSL\_ENABLE\_NPN and SSL\_ENABLE\_ALPN, can be used to
control whether NPN or ALPN (or both) should be used
for application layer protocol negotiation.
\* Added the TLS padding extension. The extension type
value is 35655, which may change when an official
extension type value is assigned by IANA. NSS
automatically adds the padding extension to ClientHello
when necessary.
\* Added a new macro CERT\_LIST\_TAIL, defined in certt.h,
for getting the tail of a CERTCertList. Notable Changes
\* bmo#950129: Improve the OCSP fetching policy when
verifying OCSP responses
\* bmo#949060: Validate the iov input argument (an array
of PRIOVec structures) of ssl\_WriteV (called via
PR\_Writev). Applications should still take care when
converting struct iov to PRIOVec because the iov\_len
members of the two structures have different types
(size\_t vs. int). size\_t is unsigned and may be larger
than int.
Patch Instructions:
To install this openSUSE Security Update use YaST online\_update.
Alternatively you can run the command listed for your product:
- openSUSE 13.1:
zypper in -t patch openSUSE-2014-256
- openSUSE 12.3:
zypper in -t patch openSUSE-2014-256
To bring your system up-to-date, use "zypper patch".
Package List:
- openSUSE 13.1 (i586 x86\_64):
MozillaFirefox-28.0-17.1
MozillaFirefox-branding-upstream-28.0-17.1
MozillaFirefox-buildsymbols-28.0-17.1
MozillaFirefox-debuginfo-28.0-17.1
MozillaFirefox-debugsource-28.0-17.1
MozillaFirefox-devel-28.0-17.1
MozillaFirefox-translations-common-28.0-17.1
MozillaFirefox-translations-other-28.0-17.1
libfreebl3-3.15.5-16.1
libfreebl3-debuginfo-3.15.5-16.1
libsoftokn3-3.15.5-16.1
libsoftokn3-debuginfo-3.15.5-16.1
mozilla-nspr-4.10.4-8.1
mozilla-nspr-debuginfo-4.10.4-8.1
mozilla-nspr-debugsource-4.10.4-8.1
mozilla-nspr-devel-4.10.4-8.1
mozilla-nss-3.15.5-16.1
mozilla-nss-certs-3.15.5-16.1
mozilla-nss-certs-debuginfo-3.15.5-16.1
mozilla-nss-debuginfo-3.15.5-16.1
mozilla-nss-debugsource-3.15.5-16.1
mozilla-nss-devel-3.15.5-16.1
mozilla-nss-sysinit-3.15.5-16.1
mozilla-nss-sysinit-debuginfo-3.15.5-16.1
mozilla-nss-tools-3.15.5-16.1
mozilla-nss-tools-debuginfo-3.15.5-16.1
- openSUSE 13.1 (x86\_64):
libfreebl3-32bit-3.15.5-16.1
libfreebl3-debuginfo-32bit-3.15.5-16.1
libsoftokn3-32bit-3.15.5-16.1
libsoftokn3-debuginfo-32bit-3.15.5-16.1
mozilla-nspr-32bit-4.10.4-8.1
mozilla-nspr-debuginfo-32bit-4.10.4-8.1
mozilla-nss-32bit-3.15.5-16.1
mozilla-nss-certs-32bit-3.15.5-16.1
mozilla-nss-certs-debuginfo-32bit-3.15.5-16.1
mozilla-nss-debuginfo-32bit-3.15.5-16.1
mozilla-nss-sysinit-32bit-3.15.5-16.1
mozilla-nss-sysinit-debuginfo-32bit-3.15.5-16.1
- openSUSE 12.3 (i586 x86\_64):
MozillaFirefox-28.0-1.56.1
MozillaFirefox-branding-upstream-28.0-1.56.1
MozillaFirefox-buildsymbols-28.0-1.56.1
MozillaFirefox-debuginfo-28.0-1.56.1
MozillaFirefox-debugsource-28.0-1.56.1
MozillaFirefox-devel-28.0-1.56.1
MozillaFirefox-translations-common-28.0-1.56.1
MozillaFirefox-translations-other-28.0-1.56.1
libfreebl3-3.15.5-1.32.1
libfreebl3-debuginfo-3.15.5-1.32.1
libsoftokn3-3.15.5-1.32.1
libsoftokn3-debuginfo-3.15.5-1.32.1
mozilla-nspr-4.10.4-1.26.1
mozilla-nspr-debuginfo-4.10.4-1.26.1
mozilla-nspr-debugsource-4.10.4-1.26.1
mozilla-nspr-devel-4.10.4-1.26.1
mozilla-nss-3.15.5-1.32.1
mozilla-nss-certs-3.15.5-1.32.1
mozilla-nss-certs-debuginfo-3.15.5-1.32.1
mozilla-nss-debuginfo-3.15.5-1.32.1
mozilla-nss-debugsource-3.15.5-1.32.1
mozilla-nss-devel-3.15.5-1.32.1
mozilla-nss-sysinit-3.15.5-1.32.1
mozilla-nss-sysinit-debuginfo-3.15.5-1.32.1
mozilla-nss-tools-3.15.5-1.32.1
mozilla-nss-tools-debuginfo-3.15.5-1.32.1
- openSUSE 12.3 (x86\_64):
libfreebl3-32bit-3.15.5-1.32.1
libfreebl3-debuginfo-32bit-3.15.5-1.32.1
libsoftokn3-32bit-3.15.5-1.32.1
libsoftokn3-debuginfo-32bit-3.15.5-1.32.1
mozilla-nspr-32bit-4.10.4-1.26.1
mozilla-nspr-debuginfo-32bit-4.10.4-1.26.1
mozilla-nss-32bit-3.15.5-1.32.1
mozilla-nss-certs-32bit-3.15.5-1.32.1
mozilla-nss-certs-debuginfo-32bit-3.15.5-1.32.1
mozilla-nss-debuginfo-32bit-3.15.5-1.32.1
mozilla-nss-sysinit-32bit-3.15.5-1.32.1
mozilla-nss-sysinit-debuginfo-32bit-3.15.5-1.32.1
References:
<http://support.novell.com/security/cve/CVE-2014-1493.html>
<http://support.novell.com/security/cve/CVE-2014-1494.html>
<http://support.novell.com/security/cve/CVE-2014-1497.html>
<http://support.novell.com/security/cve/CVE-2014-1498.html>
<http://support.novell.com/security/cve/CVE-2014-1499.html>
<http://support.novell.com/security/cve/CVE-2014-1500.html>
<http://support.novell.com/security/cve/CVE-2014-1502.html>
<http://support.novell.com/security/cve/CVE-2014-1504.html>
<http://support.novell.com/security/cve/CVE-2014-1505.html>
<http://support.novell.com/security/cve/CVE-2014-1508.html>
<http://support.novell.com/security/cve/CVE-2014-1509.html>
<http://support.novell.com/security/cve/CVE-2014-1510.html>
<http://support.novell.com/security/cve/CVE-2014-1511.html>
<http://support.novell.com/security/cve/CVE-2014-1512.html>
<http://support.novell.com/security/cve/CVE-2014-1513.html>
<http://support.novell.com/security/cve/CVE-2014-1514.html>
<https://bugzilla.novell.com/865539>
<https://bugzilla.novell.com/868603>
--
To unsubscribe, e-mail: opensuse-security-announce+unsubscribe@opensuse.org
For additional commands, e-mail: opensuse-security-announce+help@opensuse.org

[0](#like "You must be logged-in to vote.")
[0](#dislike "You must be logged-in to vote.")

Reply

[Sign in to reply online](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/SSQWAEVA4OHDLGA2V23WDRMLXNZ2CV4W/)
Use email software

[Back to the thread](/archives/list/security-announce%40lists.opensuse.org/thread/SSQWAEVA4OHDLGA2V23WDRMLXNZ2CV4W/#SSQWAEVA4OHDLGA2V23WDRMLXNZ2CV4W)

[Back to the list](/archives/list/security-announce%40lists.opensuse.org/)

![HyperKitty](/static/hyperkitty/img/logo.png)
Powered by [HyperKitty](http://hyperkitty.readthedocs.org) version 1.3.12.



=== Content from security.gentoo.org_d439654f_20250125_003647.html ===

[![Gentoo](https://assets.gentoo.org/tyrian/v2/site-logo.png)](/ "Back to the homepage")
Security

[**Get Gentoo!**](https://get.gentoo.org/)
gentoo.org sites
[gentoo.org](https://www.gentoo.org/ "Main Gentoo website")
[Wiki](https://wiki.gentoo.org/ "Find and contribute documentation")
[Bugs](https://bugs.gentoo.org/ "Report issues and find common issues")
[Forums](https://forums.gentoo.org/ "Discuss with the community")
[Packages](https://packages.gentoo.org/ "Find software for your Gentoo")

[Planet](https://planet.gentoo.org/ "Find out what's going on in the developer community")
[Archives](https://archives.gentoo.org/ "Read up on past discussions")
[Sources](https://sources.gentoo.org/ "Browse our source code")

[Infra Status](https://infra-status.gentoo.org/ "Get updates on the services provided by Gentoo")

* [Home](/)
* [Stay informed](/subscribe)
* [Advisories](/glsa)

# Mozilla Products: Multiple vulnerabilities — GLSA **201504-01**

Multiple vulnerabilities have been found in Mozilla Firefox,
Thunderbird, and SeaMonkey, the worst of which may allow user-assisted
execution of arbitrary code.

### Affected packages

| Package | **www-client/firefox** on all architectures |
| --- | --- |
| Affected versions | < **31.5.3** |
| Unaffected versions | >= **31.5.3** |

| Package | **www-client/firefox-bin** on all architectures |
| --- | --- |
| Affected versions | < **31.5.3** |
| Unaffected versions | >= **31.5.3** |

| Package | **mail-client/thunderbird** on all architectures |
| --- | --- |
| Affected versions | < **31.5.0** |
| Unaffected versions | >= **31.5.0** |

| Package | **mail-client/thunderbird-bin** on all architectures |
| --- | --- |
| Affected versions | < **31.5.0** |
| Unaffected versions | >= **31.5.0** |

| Package | **www-client/seamonkey** on all architectures |
| --- | --- |
| Affected versions | < **2.33.1** |
| Unaffected versions | >= **2.33.1** |

| Package | **www-client/seamonkey-bin** on all architectures |
| --- | --- |
| Affected versions | < **2.33.1** |
| Unaffected versions | >= **2.33.1** |

| Package | **dev-libs/nspr** on all architectures |
| --- | --- |
| Affected versions | < **4.10.6** |
| Unaffected versions | >= **4.10.6** |

### Background

Mozilla Firefox is an open-source web browser and Mozilla Thunderbird an
open-source email client, both from the Mozilla Project. The SeaMonkey
project is a community effort to deliver production-quality releases of
code derived from the application formerly known as the ‘Mozilla
Application Suite’.

### Description

Multiple vulnerabilities have been discovered in Firefox, Thunderbird,
and SeaMonkey. Please review the CVE identifiers referenced below for
details.

### Impact

A remote attacker could entice a user to view a specially crafted web
page or email, possibly resulting in execution of arbitrary code or a
Denial of Service condition. Furthermore, a remote attacker may be able
to perform Man-in-the-Middle attacks, obtain sensitive information, spoof
the address bar, conduct clickjacking attacks, bypass security
restrictions and protection mechanisms, or have other unspecified
impact.

### Workaround

There are no known workarounds at this time.

### Resolution

All firefox users should upgrade to the latest version:

```
 # emerge --sync
 # emerge --ask --oneshot --verbose ">=www-client/firefox-31.5.3"

```

All firefox-bin users should upgrade to the latest version:

```
 # emerge --sync
 # emerge --ask --oneshot --verbose ">=www-client/firefox-bin-31.5.3"

```

All thunderbird users should upgrade to the latest version:

```
 # emerge --sync
 # emerge --ask --oneshot --verbose ">=mail-client/thunderbird-31.5.0"

```

All thunderbird-bin users should upgrade to the latest version:

```
 # emerge --sync
 # emerge --ask --oneshot --verbose
 ">=mail-client/thunderbird-bin-31.5.0"

```

All seamonkey users should upgrade to the latest version:

```
 # emerge --sync
 # emerge --ask --oneshot --verbose ">=www-client/seamonkey-2.33.1"

```

All seamonkey-bin users should upgrade to the latest version:

```
 # emerge --sync
 # emerge --ask --oneshot --verbose ">=www-client/seamonkey-bin-2.33.1"

```

All nspr users should upgrade to the latest version:

```
 # emerge --sync
 # emerge --ask --oneshot --verbose ">=dev-libs/nspr-4.10.6"

```
### References

* [CVE-2013-1741](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-1741)
* [CVE-2013-2566](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-2566)
* [CVE-2013-5590](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5590)
* [CVE-2013-5591](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5591)
* [CVE-2013-5592](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5592)
* [CVE-2013-5593](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5593)
* [CVE-2013-5595](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5595)
* [CVE-2013-5596](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5596)
* [CVE-2013-5597](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5597)
* [CVE-2013-5598](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5598)
* [CVE-2013-5599](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5599)
* [CVE-2013-5600](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5600)
* [CVE-2013-5601](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5601)
* [CVE-2013-5602](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5602)
* [CVE-2013-5603](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5603)
* [CVE-2013-5604](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5604)
* [CVE-2013-5605](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5605)
* [CVE-2013-5606](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5606)
* [CVE-2013-5607](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5607)
* [CVE-2013-5609](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5609)
* [CVE-2013-5610](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5610)
* [CVE-2013-5612](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5612)
* [CVE-2013-5613](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5613)
* [CVE-2013-5614](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5614)
* [CVE-2013-5615](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5615)
* [CVE-2013-5616](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5616)
* [CVE-2013-5618](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5618)
* [CVE-2013-5619](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5619)
* [CVE-2013-6671](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-6671)
* [CVE-2013-6672](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-6672)
* [CVE-2013-6673](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-6673)
* [CVE-2014-1477](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1477)
* [CVE-2014-1478](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1478)
* [CVE-2014-1479](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1479)
* [CVE-2014-1480](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1480)
* [CVE-2014-1481](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1481)
* [CVE-2014-1482](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1482)
* [CVE-2014-1483](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1483)
* [CVE-2014-1485](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1485)
* [CVE-2014-1486](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1486)
* [CVE-2014-1487](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1487)
* [CVE-2014-1488](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1488)
* [CVE-2014-1489](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1489)
* [CVE-2014-1490](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1490)
* [CVE-2014-1491](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1491)
* [CVE-2014-1492](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1492)
* [CVE-2014-1493](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1493)
* [CVE-2014-1494](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1494)
* [CVE-2014-1496](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1496)
* [CVE-2014-1497](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1497)
* [CVE-2014-1498](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1498)
* [CVE-2014-1499](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1499)
* [CVE-2014-1500](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1500)
* [CVE-2014-1502](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1502)
* [CVE-2014-1504](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1504)
* [CVE-2014-1505](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1505)
* [CVE-2014-1508](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1508)
* [CVE-2014-1509](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1509)
* [CVE-2014-1510](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1510)
* [CVE-2014-1511](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1511)
* [CVE-2014-1512](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1512)
* [CVE-2014-1513](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1513)
* [CVE-2014-1514](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1514)
* [CVE-2014-1518](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1518)
* [CVE-2014-1519](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1519)
* [CVE-2014-1520](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1520)
* [CVE-2014-1522](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1522)
* [CVE-2014-1523](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1523)
* [CVE-2014-1524](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1524)
* [CVE-2014-1525](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1525)
* [CVE-2014-1526](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1526)
* [CVE-2014-1529](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1529)
* [CVE-2014-1530](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1530)
* [CVE-2014-1531](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1531)
* [CVE-2014-1532](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1532)
* [CVE-2014-1533](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1533)
* [CVE-2014-1534](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1534)
* [CVE-2014-1536](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1536)
* [CVE-2014-1537](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1537)
* [CVE-2014-1538](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1538)
* [CVE-2014-1539](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1539)
* [CVE-2014-1540](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1540)
* [CVE-2014-1541](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1541)
* [CVE-2014-1542](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1542)
* [CVE-2014-1543](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1543)
* [CVE-2014-1544](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1544)
* [CVE-2014-1545](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1545)
* [CVE-2014-1547](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1547)
* [CVE-2014-1548](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1548)
* [CVE-2014-1549](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1549)
* [CVE-2014-1550](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1550)
* [CVE-2014-1551](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1551)
* [CVE-2014-1552](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1552)
* [CVE-2014-1553](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1553)
* [CVE-2014-1554](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1554)
* [CVE-2014-1555](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1555)
* [CVE-2014-1556](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1556)
* [CVE-2014-1557](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1557)
* [CVE-2014-1558](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1558)
* [CVE-2014-1559](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1559)
* [CVE-2014-1560](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1560)
* [CVE-2014-1561](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1561)
* [CVE-2014-1562](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1562)
* [CVE-2014-1563](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1563)
* [CVE-2014-1564](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1564)
* [CVE-2014-1565](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1565)
* [CVE-2014-1566](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1566)
* [CVE-2014-1567](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1567)
* [CVE-2014-1568](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1568)
* [CVE-2014-1574](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1574)
* [CVE-2014-1575](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1575)
* [CVE-2014-1576](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1576)
* [CVE-2014-1577](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1577)
* [CVE-2014-1578](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1578)
* [CVE-2014-1580](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1580)
* [CVE-2014-1581](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1581)
* [CVE-2014-1582](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1582)
* [CVE-2014-1583](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1583)
* [CVE-2014-1584](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1584)
* [CVE-2014-1585](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1585)
* [CVE-2014-1586](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1586)
* [CVE-2014-1587](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1587)
* [CVE-2014-1588](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1588)
* [CVE-2014-1589](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1589)
* [CVE-2014-1590](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1590)
* [CVE-2014-1591](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1591)
* [CVE-2014-1592](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1592)
* [CVE-2014-1593](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1593)
* [CVE-2014-1594](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1594)
* [CVE-2014-5369](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-5369)
* [CVE-2014-8631](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-8631)
* [CVE-2014-8632](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-8632)
* [CVE-2014-8634](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-8634)
* [CVE-2014-8635](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-8635)
* [CVE-2014-8636](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-8636)
* [CVE-2014-8637](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-8637)
* [CVE-2014-8638](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-8638)
* [CVE-2014-8639](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-8639)
* [CVE-2014-8640](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-8640)
* [CVE-2014-8641](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-8641)
* [CVE-2014-8642](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-8642)
* [CVE-2015-0817](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0817)
* [CVE-2015-0818](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0818)
* [CVE-2015-0819](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0819)
* [CVE-2015-0820](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0820)
* [CVE-2015-0821](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0821)
* [CVE-2015-0822](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0822)
* [CVE-2015-0823](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0823)
* [CVE-2015-0824](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0824)
* [CVE-2015-0825](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0825)
* [CVE-2015-0826](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0826)
* [CVE-2015-0827](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0827)
* [CVE-2015-0828](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0828)
* [CVE-2015-0829](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0829)
* [CVE-2015-0830](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0830)
* [CVE-2015-0831](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0831)
* [CVE-2015-0832](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0832)
* [CVE-2015-0833](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0833)
* [CVE-2015-0834](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0834)
* [CVE-2015-0835](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0835)
* [CVE-2015-0836](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0836)

**Release date**

April 07, 2015

**Latest revision**

April 08, 2015: 2

**Severity**

normal

**Exploitable**

remote

**Bugzilla entries**

* [489796](https://bugs.gentoo.org/show_bug.cgi?id=489796)
* [491234](https://bugs.gentoo.org/show_bug.cgi?id=491234)
* [493850](https://bugs.gentoo.org/show_bug.cgi?id=493850)
* [500320](https://bugs.gentoo.org/show_bug.cgi?id=500320)
* [505072](https://bugs.gentoo.org/show_bug.cgi?id=505072)
* [509050](https://bugs.gentoo.org/show_bug.cgi?id=509050)
* [512896](https://bugs.gentoo.org/show_bug.cgi?id=512896)
* [517876](https://bugs.gentoo.org/show_bug.cgi?id=517876)
* [522020](https://bugs.gentoo.org/show_bug.cgi?id=522020)
* [523652](https://bugs.gentoo.org/show_bug.cgi?id=523652)
* [525474](https://bugs.gentoo.org/show_bug.cgi?id=525474)
* [531408](https://bugs.gentoo.org/show_bug.cgi?id=531408)
* [536564](https://bugs.gentoo.org/show_bug.cgi?id=536564)
* [541316](https://bugs.gentoo.org/show_bug.cgi?id=541316)
* [544056](https://bugs.gentoo.org/show_bug.cgi?id=544056)

### Questions or comments?

Please feel free to contact us.

**© 2001–2020 Gentoo Foundation, Inc.**



=== Content from lists.opensuse.org_5662080a_20250125_003632.html ===


[![openSUSE](https://static.opensuse.org/favicon.svg)
Mailing Lists](/archives/ "openSUSE Mailing Lists")

[Sign In](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/S65HS5TZPGO7EQHLA3LOEW5IEBSE7PAC/)
[Sign Up](/accounts/signup/?next=/archives/list/security-announce%40lists.opensuse.org/message/S65HS5TZPGO7EQHLA3LOEW5IEBSE7PAC/)

[Manage this list](/manage/lists/security-announce.lists.opensuse.org/)
[Sign In](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/S65HS5TZPGO7EQHLA3LOEW5IEBSE7PAC/)
[Sign Up](/accounts/signup/?next=/archives/list/security-announce%40lists.opensuse.org/message/S65HS5TZPGO7EQHLA3LOEW5IEBSE7PAC/)

×
#### Keyboard Shortcuts

### Thread View

* `j`: Next unread message
* `k`: Previous unread message
* `j a`: Jump to all threads* `j l`: Jump to MailingList overview

[thread](/archives/list/security-announce%40lists.opensuse.org/thread/S65HS5TZPGO7EQHLA3LOEW5IEBSE7PAC/#S65HS5TZPGO7EQHLA3LOEW5IEBSE7PAC)

# [security-announce] openSUSE-SU-2014:0419-1: important: Mozilla updates 2014/03

![](https://seccdn.libravatar.org/avatar/099a17325bdf082b643d1a6bbacde279.jpg?s=120&d=mm&r=g)
## [opensuse-security＠opensuse.org](/archives/users/1b72def497ef4503896cd7a5fe9fb8e0/ "See the profile for opensuse-security＠opensuse.org")

21 Mar
2014

21 Mar
'14

22:04

openSUSE Security Update: Mozilla updates 2014/03
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
Announcement ID: openSUSE-SU-2014:0419-1
Rating: important
References: #861847 #862831 #865539 #868603
Cross-References: CVE-2014-1477 CVE-2014-1478 CVE-2014-1479
CVE-2014-1480 CVE-2014-1481 CVE-2014-1482
CVE-2014-1483 CVE-2014-1485 CVE-2014-1486
CVE-2014-1487 CVE-2014-1488 CVE-2014-1490
CVE-2014-1491 CVE-2014-1493 CVE-2014-1494
CVE-2014-1497 CVE-2014-1498 CVE-2014-1499
CVE-2014-1500 CVE-2014-1502 CVE-2014-1504
CVE-2014-1505 CVE-2014-1508 CVE-2014-1509
CVE-2014-1510 CVE-2014-1511 CVE-2014-1512
CVE-2014-1513 CVE-2014-1514
Affected Products:
openSUSE 11.4
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
An update that fixes 29 vulnerabilities is now available.
Description:
This patch contains a collection of security relevant
updates for Mozilla applications.
Update Firefox to 24.4.0 (bnc#868603) Update Thunderbird to
24.4.0 Update NSPR to 4.10.4 Update NSS to 3.15.5
\* MFSA 2014-15/CVE-2014-1493/CVE-2014-1494 Miscellaneous
memory safety hazards
\* MFSA 2014-17/CVE-2014-1497 (bmo#966311) Out of bounds
read during WAV file decoding
\* MFSA 2014-26/CVE-2014-1508 (bmo#963198) Information
disclosure through polygon rendering in MathML
\* MFSA 2014-27/CVE-2014-1509 (bmo#966021) Memory
corruption in Cairo during PDF font rendering
\* MFSA 2014-28/CVE-2014-1505 (bmo#941887) SVG filters
information disclosure through feDisplacementMap
\* MFSA 2014-29/CVE-2014-1510/CVE-2014-1511 (bmo#982906,
bmo#982909) Privilege escalation using
WebIDL-implemented APIs
\* MFSA 2014-30/CVE-2014-1512 (bmo#982957) Use-after-free
in TypeObject
\* MFSA 2014-31/CVE-2014-1513 (bmo#982974) Out-of-bounds
read/write through neutering ArrayBuffer objects
\* MFSA 2014-32/CVE-2014-1514 (bmo#983344) Out-of-bounds
write through TypedArrayObject after neutering
Patch Instructions:
To install this openSUSE Security Update use YaST online\_update.
Alternatively you can run the command listed for your product:
- openSUSE 11.4:
zypper in -t patch 2014-37
To bring your system up-to-date, use "zypper patch".
Package List:
- openSUSE 11.4 (i586 x86\_64):
MozillaFirefox-24.4.0-107.3
MozillaFirefox-branding-upstream-24.4.0-107.3
MozillaFirefox-buildsymbols-24.4.0-107.3
MozillaFirefox-debuginfo-24.4.0-107.3
MozillaFirefox-debugsource-24.4.0-107.3
MozillaFirefox-devel-24.4.0-107.3
MozillaFirefox-translations-common-24.4.0-107.3
MozillaFirefox-translations-other-24.4.0-107.3
MozillaThunderbird-24.4.0-89.2
MozillaThunderbird-buildsymbols-24.4.0-89.2
MozillaThunderbird-debuginfo-24.4.0-89.2
MozillaThunderbird-debugsource-24.4.0-89.2
MozillaThunderbird-devel-24.4.0-89.2
MozillaThunderbird-translations-common-24.4.0-89.2
MozillaThunderbird-translations-other-24.4.0-89.2
enigmail-1.6.0+24.4.0-89.2
libfreebl3-3.15.5-82.1
libfreebl3-debuginfo-3.15.5-82.1
libsoftokn3-3.15.5-82.1
libsoftokn3-debuginfo-3.15.5-82.1
mozilla-nspr-4.10.4-40.1
mozilla-nspr-debuginfo-4.10.4-40.1
mozilla-nspr-debugsource-4.10.4-40.1
mozilla-nspr-devel-4.10.4-40.1
mozilla-nss-3.15.5-82.1
mozilla-nss-certs-3.15.5-82.1
mozilla-nss-certs-debuginfo-3.15.5-82.1
mozilla-nss-debuginfo-3.15.5-82.1
mozilla-nss-debugsource-3.15.5-82.1
mozilla-nss-devel-3.15.5-82.1
mozilla-nss-sysinit-3.15.5-82.1
mozilla-nss-sysinit-debuginfo-3.15.5-82.1
mozilla-nss-tools-3.15.5-82.1
mozilla-nss-tools-debuginfo-3.15.5-82.1
- openSUSE 11.4 (x86\_64):
libfreebl3-32bit-3.15.5-82.1
libfreebl3-debuginfo-32bit-3.15.5-82.1
libsoftokn3-32bit-3.15.5-82.1
libsoftokn3-debuginfo-32bit-3.15.5-82.1
mozilla-nspr-32bit-4.10.4-40.1
mozilla-nspr-debuginfo-32bit-4.10.4-40.1
mozilla-nss-32bit-3.15.5-82.1
mozilla-nss-certs-32bit-3.15.5-82.1
mozilla-nss-certs-debuginfo-32bit-3.15.5-82.1
mozilla-nss-debuginfo-32bit-3.15.5-82.1
mozilla-nss-sysinit-32bit-3.15.5-82.1
mozilla-nss-sysinit-debuginfo-32bit-3.15.5-82.1
- openSUSE 11.4 (ia64):
libfreebl3-debuginfo-x86-3.15.5-82.1
libfreebl3-x86-3.15.5-82.1
libsoftokn3-debuginfo-x86-3.15.5-82.1
libsoftokn3-x86-3.15.5-82.1
mozilla-nspr-debuginfo-x86-4.10.4-40.1
mozilla-nspr-x86-4.10.4-40.1
mozilla-nss-certs-debuginfo-x86-3.15.5-82.1
mozilla-nss-certs-x86-3.15.5-82.1
mozilla-nss-debuginfo-x86-3.15.5-82.1
mozilla-nss-sysinit-debuginfo-x86-3.15.5-82.1
mozilla-nss-sysinit-x86-3.15.5-82.1
mozilla-nss-x86-3.15.5-82.1
References:
<http://support.novell.com/security/cve/CVE-2014-1477.html>
<http://support.novell.com/security/cve/CVE-2014-1478.html>
<http://support.novell.com/security/cve/CVE-2014-1479.html>
<http://support.novell.com/security/cve/CVE-2014-1480.html>
<http://support.novell.com/security/cve/CVE-2014-1481.html>
<http://support.novell.com/security/cve/CVE-2014-1482.html>
<http://support.novell.com/security/cve/CVE-2014-1483.html>
<http://support.novell.com/security/cve/CVE-2014-1485.html>
<http://support.novell.com/security/cve/CVE-2014-1486.html>
<http://support.novell.com/security/cve/CVE-2014-1487.html>
<http://support.novell.com/security/cve/CVE-2014-1488.html>
<http://support.novell.com/security/cve/CVE-2014-1490.html>
<http://support.novell.com/security/cve/CVE-2014-1491.html>
<http://support.novell.com/security/cve/CVE-2014-1493.html>
<http://support.novell.com/security/cve/CVE-2014-1494.html>
<http://support.novell.com/security/cve/CVE-2014-1497.html>
<http://support.novell.com/security/cve/CVE-2014-1498.html>
<http://support.novell.com/security/cve/CVE-2014-1499.html>
<http://support.novell.com/security/cve/CVE-2014-1500.html>
<http://support.novell.com/security/cve/CVE-2014-1502.html>
<http://support.novell.com/security/cve/CVE-2014-1504.html>
<http://support.novell.com/security/cve/CVE-2014-1505.html>
<http://support.novell.com/security/cve/CVE-2014-1508.html>
<http://support.novell.com/security/cve/CVE-2014-1509.html>
<http://support.novell.com/security/cve/CVE-2014-1510.html>
<http://support.novell.com/security/cve/CVE-2014-1511.html>
<http://support.novell.com/security/cve/CVE-2014-1512.html>
<http://support.novell.com/security/cve/CVE-2014-1513.html>
<http://support.novell.com/security/cve/CVE-2014-1514.html>
<https://bugzilla.novell.com/861847>
<https://bugzilla.novell.com/862831>
<https://bugzilla.novell.com/865539>
<https://bugzilla.novell.com/868603>
--
To unsubscribe, e-mail: opensuse-security-announce+unsubscribe@opensuse.org
For additional commands, e-mail: opensuse-security-announce+help@opensuse.org

[0](#like "You must be logged-in to vote.")
[0](#dislike "You must be logged-in to vote.")

Reply

[Sign in to reply online](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/S65HS5TZPGO7EQHLA3LOEW5IEBSE7PAC/)
Use email software

[Back to the thread](/archives/list/security-announce%40lists.opensuse.org/thread/S65HS5TZPGO7EQHLA3LOEW5IEBSE7PAC/#S65HS5TZPGO7EQHLA3LOEW5IEBSE7PAC)

[Back to the list](/archives/list/security-announce%40lists.opensuse.org/)

![HyperKitty](/static/hyperkitty/img/logo.png)
Powered by [HyperKitty](http://hyperkitty.readthedocs.org) version 1.3.12.



=== Content from www.oracle.com_1aa3bc48_20250125_003635.html ===


* [Skip to content](#maincontent)
* [Accessibility Policy](https://www.oracle.com/corporate/accessibility/)

Products
Industries
Resources
Customers
Partners
Developers
Company

Close Search

Search Oracle.com

* QUICK LINKS
* [Oracle Cloud Infrastructure](/cloud/)
* [Oracle Fusion Cloud Applications](/applications/)
* [Oracle Database](/database/technologies/)
* [Download Java](/java/technologies/downloads/)
* [Careers at Oracle](/careers/)

Search

[Country
![]()](/countries-list.html#countries)

View Accounts

Back
Cloud Account
[Sign in to Cloud](/cloud/sign-in.html)
[Sign Up for Free Cloud Tier](/cloud/free/)

Oracle Account

* [Sign-In](https://www.oracle.com/webapps/redirect/signon?nexturl=)
* [Create an Account](https://profile.oracle.com/myprofile/account/create-account.jspx)

* [Help](/corporate/contact/help.html)
* Sign Out

[Contact Sales](/corporate/contact/ "Contact Sales")

[Menu

Menu](/global-menu-v2/)

* [Security Alerts](/security-alerts/)

# Oracle Solaris Third Party Bulletin - April 2016

## Oracle Solaris Third Party Bulletin - April 2016

### Description

The Oracle Solaris Third Party Bulletin announces patches for one or more security vulnerabilities fixed in third party software that is included in Oracle Solaris distributions. Starting January 20, 2015, Third Party Bulletins are released on the same day when Oracle Critical Patch Updates are released. These bulletins will also be updated on the Tuesday closest to the 17th of the following two months after their release (i.e. the two months between the normal quarterly Critical Patch Update publication dates). In addition, Third Party Bulletins may also be updated for vulnerability fixes deemed too critical to wait for the next monthly update.

**Due to the threat posed by a successful attack, Oracle strongly recommends that customers apply Third Party Bulletin fixes as soon as possible.**

### Patch Availability

Please see My Oracle Support Note [1448883.1](https://support.oracle.com/epmos/faces/DocumentDisplay?_afrLoop=98356520554156&id=1448883.1)

### Third Party Bulletin Schedule

Third Party Bulletins are released on the Tuesday closest to the 17th day of January, April, July and October. The next four dates are:

* 19 July 2016
* 18 October 2016
* 17 January 2017
* 18 April 2017

### References

* Oracle Critical Patch Updates and Security Alerts main page  [ [Oracle Technology Network](/security-alerts/) ]
* Oracle Critical Patch Updates and Security Alerts - Frequently Asked Questions [ [CPU FAQ](/security-alerts/cpufaq.html) ]
* Risk Matrix definitions   [ [Risk Matrix Definitions](/security-alerts/advisorymatrixglossary.html) ]
* Use of Common Vulnerability Scoring System (CVSS) by Oracle   [ [Oracle CVSS Scoring](/security-alerts/cvssscoringsystem.html) ]

### Modification History

| 2017-October-16 | Rev 8. Added 11.3 as Supported Versions Affected for CVE-2016-2108 |
| --- | --- |
| 2016-September-21 | Rev 7. Added new CVEs fixed via Firefox upgrade |
| 2016-July-08 | Rev 6. Added NTP CVEs |
| 2016-June-27 | Rev 5. Added OpenSSL CVE-2016-2177, CVE-2016-2178 |
| 2016-June-20 | Rev 4. Added all CVEs fixed in Solaris 11.3 SRU9.4 |
| 2016-June-10 | Rev 3. Added OpenSSL CVEs |
| 2016-May-31 | Rev 2. Added all CVEs fixed in Solaris 11.3 SRU8.7 |
| 2016-April-19 | Rev 1. Initial Release |

### Oracle Solaris Executive Summary

This Third Party Bulletin contains 53 new security fixes for the Oracle Solaris.  41 of these vulnerabilities may be remotely exploitable without authentication, i.e., may be exploited over a network without the need for a username and password.

### Oracle Solaris Risk Matrix

#### Revision 7: Published on 2016-09-21

| CVE# | Component | Protocol | Third Party ­component | Remote Exploit without Auth.? | CVSS VERSION 2.0 RISK (see [Risk Matrix Definitions](/security-alerts/advisorymatrixglossary.html)) | | | | | | | Supported Versions Affected | Notes |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| Base Score | Access Vector | Access Complexity | Authen­tication | Confid­entiality | Inte­grity | Avail­ability |
| CVE-2014-1545 | Solaris | Multiple | Firefox | Yes | 10.0 | Network | Low | None | Complete | Complete | Complete | 11.3 | See Note 13 |

#### Revision 6: Published on 2016-07-08

| CVE# | Component | Protocol | Third Party ­component | Remote Exploit without Auth.? | CVSS VERSION 2.0 RISK (see [Risk Matrix Definitions](/security-alerts/advisorymatrixglossary.html)) | | | | | | | Supported Versions Affected | Notes |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| Base Score | Access Vector | Access Complexity | Authen­tication | Confid­entiality | Inte­grity | Avail­ability |
| CVE-2016-1548 | Solaris | NTP | NTP | Yes | 6.4 | Network | Low | None | None | Partial | Partial | 11.3, 10 | See Note 11 |
| CVE-2016-4957 | Solaris | NTP | NTP | Yes | 5.0 | Network | Low | None | None | None | Partial | 11.3, 10 |  |
| CVE-2016-4956 | Solaris | NTP | NTP | Yes | 5.0 | Network | Low | None | None | None | Partial | 11.3, 10 |  |
| CVE-2016-4953 | Solaris | NTP | NTP | Yes | 4.3 | Network | Medium | None | None | None | Partial | 11.3, 10 |  |
| CVE-2016-4954 | Solaris | NTP | NTP | Yes | 4.3 | Network | Medium | None | None | None | Partial | 11.3, 10 |  |
| CVE-2016-4955 | Solaris | NTP | NTP | Yes | 2.6 | Network | High | None | None | None | Partial | 11.3, 10 |  |

#### Revision 5: Published on 2016-06-27

| CVE# | Component | Protocol | Third Party ­component | Remote Exploit without Auth.? | CVSS VERSION 2.0 RISK (see [Risk Matrix Definitions](/security-alerts/advisorymatrixglossary.html)) | | | | | | | Supported Versions Affected | Notes |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| Base Score | Access Vector | Access Complexity | Authen­tication | Confid­entiality | Inte­grity | Avail­ability |
| CVE-2016-2177 | Solaris | SSL/TLS | OpenSSL | Yes | 7.5 | Network | Low | None | Partial | Partial | Partial | 11.3, 10 |  |
| CVE-2016-2178 | Solaris | SSL/TLS | OpenSSL | No | 2.1 | Local | Low | None | Partial | None | None | 11.3, 10 |  |

#### Revision 4: Published on 2016-06-20

| CVE# | Component | Protocol | Third Party ­component | Remote Exploit without Auth.? | CVSS VERSION 2.0 RISK (see [Risk Matrix Definitions](/security-alerts/advisorymatrixglossary.html)) | | | | | | | Supported Versions Affected | Notes |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| Base Score | Access Vector | Access Complexity | Authen­tication | Confid­entiality | Inte­grity | Avail­ability |
| CVE-2015-2806 | Solaris | Multiple | GNU Libtasn1 | Yes | 10.0 | Network | Low | None | Complete | Complete | Complete | 11.3 |  |
| CVE-2014-9679 | Solaris | Multiple | Common Unix Printing System (CUPS) | Yes | 6.8 | Network | Medium | None | Partial | Partial | Partial | 11.3 |  |
| CVE-2015-8786 | Solaris | Multiple | RabbitMQ | No | 6.8 | Network | Low | Single | None | None | Complete | 11.3 |  |
| CVE-2015-7546 | Solaris | Multiple | OpenStack Identity (Keystone) | No | 6.0 | Network | Medium | Single | Partial | Partial | Partial | 11.3 |  |
| CVE-2015-5295 | Solaris | Multiple | OpenStack Orchestration API (Heat) | No | 5.5 | Network | Low | Single | Partial | None | Partial | 11.3 |  |
| CVE-2016-3115 | Solaris | SSH | OpenSSH | No | 5.5 | Network | Low | Single | Partial | Partial | None | 11.3 |  |
| CVE-2015-5223 | Solaris | Multiple | OpenStack Object Storage (Swift) | Yes | 5.0 | Network | Low | None | Partial | None | None | 11.3 |  |
| CVE-2016-0738 | Solaris | Multiple | OpenStack Object Storage (Swift) | Yes | 5.0 | Network | Low | None | None | None | Partial | 11.3 | See Note 8 |
| CVE-2015-8853 | Solaris | Multiple | Perl | Yes | 5.0 | Network | Low | None | None | None | Partial | 11.3 |  |
| CVE-2015-8665 | Solaris | Multiple | LibTIFF | Yes | 4.3 | Network | Medium | None | None | None | Partial | 11.3 |  |
| CVE-2015-8683 | Solaris | Multiple | LibTIFF | Yes | 4.3 | Network | Medium | None | None | None | Partial | 11.3 |  |
| CVE-2015-8781 | Solaris | Multiple | LibTIFF | Yes | 4.3 | Network | Medium | None | None | None | Partial | 11.3, 10 | See Note 9 |
| CVE-2015-1547 | Solaris | Multiple | LibTIFF | Yes | 4.3 | Network | Medium | None | None | None | Partial | 11.3, 10 | See Note 10 |
| CVE-2016-2512 | Solaris | Multiple | Django Python web framework | Yes | 4.3 | Network | Medium | None | None | Partial | None | 11.3 |  |
| CVE-2016-4085 | Solaris | Multiple | Wireshark | Yes | 4.3 | Network | Medium | None | None | None | Partial | 11.3 | See Note 12 |
| CVE-2016-2513 | Solaris | Multiple | Django Python web framework | Yes | 2.6 | Network | High | None | Partial | None | None | 11.3 |  |

#### Revision 3: Published on 2016-06-10

| CVE# | Component | Protocol | Third Party ­component | Remote Exploit without Auth.? | CVSS VERSION 2.0 RISK (see [Risk Matrix Definitions](/security-alerts/advisorymatrixglossary.html)) | | | | | | | Supported Versions Affected | Notes |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| Base Score | Access Vector | Access Complexity | Authen­tication | Confid­entiality | Inte­grity | Avail­ability |
| CVE-2016-2108 | Solaris | SSL/TLS | OpenSSL | Yes | 10.0 | Network | Low | None | Complete | Complete | Complete | 11.3, 10 |  |
| CVE-2016-2109 | Solaris | SSL/TLS | OpenSSL | Yes | 7.8 | Network | Low | None | None | None | Complete | 11.3, 10 |  |
| CVE-2016-2176 | Solaris | SSL/TLS | OpenSSL | Yes | 6.4 | Network | Low | None | Partial | None | Partial | 11.3, 10 |  |
| CVE-2016-2105 | Solaris | SSL/TLS | OpenSSL | Yes | 5.0 | Network | Low | None | None | None | Partial | 11.3, 10 |  |
| CVE-2016-2106 | Solaris | SSL/TLS | OpenSSL | Yes | 5.0 | Network | Low | None | None | None | Partial | 11.3, 10 |  |
| CVE-2016-2107 | Solaris | SSL/TLS | OpenSSL | Yes | 2.6 | Network | High | None | Partial | None | None | 11.3, 10 | See Note 7 |

#### Revision 2: Published on 2016-05-31

| CVE# | Component | Protocol | Third Party ­component | Remote Exploit without Auth.? | CVSS VERSION 2.0 RISK (see [Risk Matrix Definitions](/security-alerts/advisorymatrixglossary.html)) | | | | | | | Supported Versions Affected | Notes |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| Base Score | Access Vector | Access Complexity | Authen­tication | Confid­entiality | Inte­grity | Avail­ability |
| CVE-2016-2315 | Solaris | Multiple | Git | Yes | 10.0 | Network | Low | None | Complete | Complete | Complete | 11.3 | See Note 5 |
| CVE-2016-2342 | Solaris | Multiple | Quagga | Yes | 7.6 | Network | High | None | Complete | Complete | Complete | 11.3 |  |
| CVE-2015-7545 | Solaris | Multiple | Git | Yes | 7.5 | Network | Low | None | Partial | Partial | Partial | 11.3 |  |
| CVE-2015-2695 | Solaris | Kerberos | Kerberos | Yes | 7.1 | Network | Medium | None | None | None | Complete | 11.3 |  |
| CVE-2015-2697 | Solaris | Kerberos | Kerberos | No | 6.8 | Network | Low | Single | None | None | Complete | 11.3 |  |
| CVE-2016-3068 | Solaris | Multiple | Mercurial source code management | Yes | 6.8 | Network | Medium | None | Partial | Partial | Partial | 11.3 | See Note 4 |
| CVE-2016-3115 | Solaris | SSH | SSH | No | 5.5 | Network | Low | Single | Partial | Partial | None | 11.3, 10 |  |
| CVE-2014-3566 | Solaris | SSL | Evolution | Yes | 5.0 | Network | Low | None | Partial | None | None | 11.3 |  |
| CVE-2015-7551 | Solaris | None | Ruby | No | 4.6 | Local | Low | None | Partial | Partial | Partial | 11.3 |  |
| CVE-2015-8629 | Solaris | Kerberos | Kerberos | No | 2.1 | Network | High | Single | Partial | None | None | 11.3, 10 |  |

#### Revision 1: Published on 2016-04-19

| CVE# | Component | Protocol | Third Party ­component | Remote Exploit without Auth.? | CVSS VERSION 2.0 RISK (see [Risk Matrix Definitions](/security-alerts/advisorymatrixglossary.html)) | | | | | | | Supported Versions Affected | Notes |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| Base Score | Access Vector | Access Complexity | Authen­tication | Confid­entiality | Inte­grity | Avail­ability |
| CVE-2016-0705 | Solaris | SSL/TLS | OpenSSL | Yes | 10.0 | Network | Low | None | Complete | Complete | Complete | 11.3, 10 |  |
| CVE-2016-0799 | Solaris | SSL/TLS | WanBoot | Yes | 10.0 | Network | Low | None | Complete | Complete | Complete | 10 | See Note 1 |
| CVE-2016-0798 | Solaris | SSL/TLS | OpenSSL | Yes | 7.8 | Network | Low | None | None | None | Complete | 11.3, 10 |  |
| CVE-2015-3415 | Solaris | Multiple | SQLite3 | Yes | 7.5 | Network | Low | None | Partial | Partial | Partial | 11.3, 10 | See Note 3 |
| CVE-2015-5602 | Solaris | None | Sudo | No | 7.2 | Local | Low | None | Complete | Complete | Complete | 11.3, 10 |  |
| CVE-2015-4752 | Solaris | None | MySQL | No | 7.2 | Local | Low | None | Complete | Complete | Complete | 11.3 | See Note 2 |
| CVE-2016-2523 | Solaris | Multiple | Wireshark | Yes | 7.1 | Network | Medium | None | None | None | Complete | 11.3 |  |
| CVE-2016-1283 | Solaris | Multiple | PCRE | Yes | 6.8 | Network | Medium | None | Partial | Partial | Partial | 11.3 |  |
| CVE-2014-9766 | Solaris | Multiple | X.Org | Yes | 6.8 | Network | Medium | None | Partial | Partial | Partial | 11.3, 10 |  |
| CVE-2015-3885 | Solaris | Multiple | Dcraw | Yes | 4.3 | Network | Medium | None | None | None | Partial | 11.3 |  |
| CVE-2007-6720 | Solaris | Multiple | Libmikmod | Yes | 2.6 | Network | High | None | None | None | Partial | 11.3 |  |
| CVE-2016-0702 | Solaris | None | OpenSSL | No | 1.9 | Local | Medium | None | Partial | None | None | 11.3, 10 | See Note 6 |

#### Notes:

1. This fix also addresses CVE-2016-0703 CVE-2016-0704 CVE-2016-0797 CVE-2016-0800.
2. This fix also addresses CVE-2014-6464 CVE-2014-6469 CVE-2014-6491 CVE-2014-6494 CVE-2014-6500 CVE-2014-6507 CVE-2014-6555 CVE-2014-6559 CVE-2014-6568 CVE-2015-0374 CVE-2015-0382 CVE-2015-0411 CVE-2015-0432 CVE-2015-0433 CVE-2015-0499 CVE-2015-0505 CVE-2015-2568 CVE-2015-2571 CVE-2015-2573 CVE-2015-2582 CVE-2015-2620 CVE-2015-2643 CVE-2015-2648 CVE-2015-4737 CVE-2015-4792 CVE-2015-4802 CVE-2015-4807 CVE-2015-4815 CVE-2015-4816 CVE-2015-4819 CVE-2015-4826 CVE-2015-4830 CVE-2015-4836 CVE-2015-4858 CVE-2015-4861 CVE-2015-4864 CVE-2015-4870 CVE-2015-4879 CVE-2015-4913 CVE-2015-7744 CVE-2016-0505 CVE-2016-0546 CVE-2016-0596 CVE-2016-0597 CVE-2016-0598 CVE-2016-0600 CVE-2016-0606 CVE-2016-0608 CVE-2016-0609 CVE-2016-0616.
3. This fix also addresses CVE-2015-3414 CVE-2015-3416.
4. This fix also addresses CVE-2016-3069 CVE-2016-3630.
5. This fix also addresses CVE-2016-2324.
6. This fix also addresses CVE-2016-0702 CVE-2016-0797 CVE-2016-0799.
7. This fix also addresses CVE-2016-2106 CVE-2016-2107 CVE-2016-2108 CVE-2016-2109 CVE-2016-2176.
8. This fix also addresses CVE-2016-0737.
9. This fix also addresses CVE-2015-8782 CVE-2015-8783.
10. This fix also addresses CVE-2015-8784.
11. This fix also addresses CVE-2016-1551 CVE-2016-1549 CVE-2016-2516 CVE-2016-2517 CVE-2016-2518 CVE-2016-2519 CVE-2016-1547 CVE-2015-7704 CVE-2015-8138 CVE-2016-1550.
12. This fix also addresses CVE-2016-4085.
13. This fix also addresses CVE-2013-5609 CVE-2013-5610 CVE-2013-5611 CVE-2013-5612 CVE-2013-5613 CVE-2013-5614 CVE-2013-5615 CVE-2013-5616 CVE-2013-5618 CVE-2013-5619 CVE-2013-6629 CVE-2013-6630 CVE-2013-6671 CVE-2013-6672 CVE-2013-6673 CVE-2014-1477 CVE-2014-1478 CVE-2014-1479 CVE-2014-1480 CVE-2014-1481 CVE-2014-1482 CVE-2014-1483 CVE-2014-1484 CVE-2014-1485 CVE-2014-1486 CVE-2014-1487 CVE-2014-1488 CVE-2014-1489 CVE-2014-1493 CVE-2014-1494 CVE-2014-1496 CVE-2014-1497 CVE-2014-1498 CVE-2014-1499 CVE-2014-1500 CVE-2014-1501 CVE-2014-1502 CVE-2014-1504 CVE-2014-1505 CVE-2014-1506 CVE-2014-1507 CVE-2014-1508 CVE-2014-1509 CVE-2014-1510 CVE-2014-1511 CVE-2014-1512 CVE-2014-1513 CVE-2014-1514 CVE-2014-1518 CVE-2014-1519 CVE-2014-1520 CVE-2014-1522 CVE-2014-1523 CVE-2014-1524 CVE-2014-1525 CVE-2014-1526 CVE-2014-1527 CVE-2014-1528 CVE-2014-1529 CVE-2014-1530 CVE-2014-1531 CVE-2014-1532 CVE-2014-1533 CVE-2014-1534 CVE-2014-1536 CVE-2014-1537 CVE-2014-1538 CVE-2014-1539 CVE-2014-1540 CVE-2014-1541 CVE-2014-1542 CVE-2014-1543 CVE-2014-1544 CVE-2014-1547 CVE-2014-1548 CVE-2014-1549 CVE-2014-1550 CVE-2014-1551 CVE-2014-1552 CVE-2014-1553 CVE-2014-1554 CVE-2014-1555 CVE-2014-1556 CVE-2014-1557 CVE-2014-1559 CVE-2014-1561 CVE-2014-1562 CVE-2014-1563 CVE-2014-1564 CVE-2014-1565 CVE-2014-1566 CVE-2014-1567 CVE-2014-1568 CVE-2014-1569 CVE-2014-1575 CVE-2014-1580 CVE-2014-1582 CVE-2014-1584 CVE-2014-1588 CVE-2014-1589 CVE-2014-1591 CVE-2014-1595 CVE-2014-2018 CVE-2014-8631 CVE-2014-8632 CVE-2014-8635 CVE-2014-8636 CVE-2014-8637 CVE-2014-8640 CVE-2014-8642 CVE-2014-8643 CVE-2015-0797 CVE-2015-0798 CVE-2015-0799 CVE-2015-0800 CVE-2015-0802 CVE-2015-0803 CVE-2015-0804 CVE-2015-0805 CVE-2015-0806 CVE-2015-0808 CVE-2015-0810 CVE-2015-0811 CVE-2015-0812 CVE-2015-0814 CVE-2015-0819 CVE-2015-0820 CVE-2015-0821 CVE-2015-0823 CVE-2015-0824 CVE-2015-0825 CVE-2015-0826 CVE-2015-0828 CVE-2015-0829 CVE-2015-0830 CVE-2015-0832 CVE-2015-0833 CVE-2015-0834 CVE-2015-0835 CVE-2015-2706 CVE-2015-2708 CVE-2015-2709 CVE-2015-2710 CVE-2015-2711 CVE-2015-2712 CVE-2015-2713 CVE-2015-2714 CVE-2015-2715 CVE-2015-2716 CVE-2015-2717 CVE-2015-2718 CVE-2015-2720 CVE-2015-2721 CVE-2015-2722 CVE-2015-2724 CVE-2015-2725 CVE-2015-2726 CVE-2015-2727 CVE-2015-2728 CVE-2015-2729 CVE-2015-2730 CVE-2015-2731 CVE-2015-2733 CVE-2015-2734 CVE-2015-2735 CVE-2015-2736 CVE-2015-2737 CVE-2015-2738 CVE-2015-2739 CVE-2015-2740 CVE-2015-2741 CVE-2015-2742 CVE-2015-2743 CVE-2015-4473 CVE-2015-4474 CVE-2015-4475 CVE-2015-4476 CVE-2015-4477 CVE-2015-4478 CVE-2015-4479 CVE-2015-4480 CVE-2015-4481 CVE-2015-4482 CVE-2015-4483 CVE-2015-4484 CVE-2015-4485 CVE-2015-4486 CVE-2015-4487 CVE-2015-4488 CVE-2015-4489 CVE-2015-4490 CVE-2015-4491 CVE-2015-4492 CVE-2015-4493 CVE-2015-4495 CVE-2015-4496 CVE-2015-4497 CVE-2015-4498 CVE-2015-4500 CVE-2015-4501 CVE-2015-4502 CVE-2015-4503 CVE-2015-4504 CVE-2015-4505 CVE-2015-4506 CVE-2015-4507 CVE-2015-4508 CVE-2015-4509 CVE-2015-4510 CVE-2015-4511 CVE-2015-4512 CVE-2015-4513 CVE-2015-4514 CVE-2015-4515 CVE-2015-4516 CVE-2015-4517 CVE-2015-4518 CVE-2015-4519 CVE-2015-4520 CVE-2015-4521 CVE-2015-4522 CVE-2015-7174 CVE-2015-7175 CVE-2015-7176 CVE-2015-7177 CVE-2015-7178 CVE-2015-7179 CVE-2015-7180 CVE-2015-7181 CVE-2015-7182 CVE-2015-7183 CVE-2015-7184 CVE-2015-7185 CVE-2015-7186 CVE-2015-7187 CVE-2015-7188 CVE-2015-7189 CVE-2015-7190 CVE-2015-7191 CVE-2015-7192 CVE-2015-7193 CVE-2015-7194 CVE-2015-7195 CVE-2015-7196 CVE-2015-7197 CVE-2015-7198 CVE-2015-7199 CVE-2015-7200.

Resources for

* [Careers](/careers/)
* [Developers](/developer/)
* [Investors](https://investor.oracle.com/home/default.aspx)
* [Partners](/partner/)
* [Researchers](/research/)
* [Students and Educators](https://academy.oracle.com/en/oa-web-overview.html)

Why Oracle

* [Analyst Reports](/corporate/analyst-reports/)
* [Best cloud-based
  ERP](/erp/what-is-erp/best-erp/)
* [Cloud Economics](/cloud/economics/)
* [Social Impact](/social-impact/)
* [Culture and Inclusion](/careers/diversity-inclusion/)
* [Security Practices](/corporate/security-practices/)

Learn

* [What is cloud
  computing?](/cloud/what-is-cloud-computing/)
* [What is CRM?](/cx/what-is-crm/)
* [What is
  Docker?](/cloud/cloud-native/container-registry/what-is-docker/)
* [What is
  Kubernetes?](/cloud/cloud-native/kubernetes-engine/what-is-kubernetes/)
* [What is
  Python?](/developer/what-is-python-for-developers/)
* [What is SaaS?](/applications/what-is-saas/)

News and Events

* [News](/news/)
* [Oracle CloudWorld](/cloudworld/)
* [Oracle CloudWorld Tour](/cloudworld-tour/)
* [Oracle Health Summit](/health/health-summit/)
* [Oracle Dev Tour](/developer/dev-tour/)
* [Search all events](https://search.oracle.com/events?q=&lang=english)

Contact Us

* US Sales: +1.800.633.0738
* [How can we help?](/corporate/contact/)
* [Subscribe to emails](https://go.oracle.com/subscribe/?l_code=en&src1=OW:O:FO)
* [Integrity Helpline](https://secure.ethicspoint.com/domain/media/en/gui/31053/index.html)
* [Accessibility](/corporate/accessibility/)

---

* [Country/Region](/universal-menu/#u10countrymenu)

* [© 2025 Oracle](/legal/copyright/)
* [Privacy](/legal/privacy/)/[Do Not Sell My
  Info](/legal/privacy/privacy-choices/)
* [Ad
  Choices](/legal/privacy/privacy-policy/#adchoices)
* [Careers](/corporate/careers/)



=== Content from bugzilla.mozilla.org_b277f019_20250125_003639.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/927579)
* [XML](/show_bug.cgi?ctype=xml&id=927579)

Closed
[Bug 927579](/show_bug.cgi?id=927579)

Opened 11 years ago
Closed 11 years ago

# crash [@ mlp\_process] [@ tansig\_approx]

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

crash [@ mlp\_process] [@ tansig\_approx]

## Categories

### (Core :: Audio/Video, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=Audio%2FVideo#Audio%2FVideo)

Audio/Video
▾

Core :: Audio/Video
For problems related to media (video/audio) -- especially when the reporter is not sure which area of the media stack the problem is in. This category will mostly be for untriaged video/audio issues. Bugs in this category will typically be moved to another media category during the triage process.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=Audio%2FVideo&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=Audio%2FVideo&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=Audio%2FVideo)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

x86\_64

macOS

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

critical

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla28

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Accessibility Severity | --- |
| --- | --- |
| Webcompat Score | --- |
| a11y-review | --- |
| Webcompat Priority | --- |
| Performance Impact | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox27 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=wontfix) |
| firefox28 | --- | [fixed](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=fixed) |
| firefox-esr24 | --- | [unaffected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=unaffected) |
| b2g-v1.1hd | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=equals&v1=unaffected) |
| b2g-v1.2 | --- | [wontfix](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=wontfix) |
| b2g-v1.3 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=fixed) |
| b2g-v1.3T | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=fixed) |
| b2g-v1.4 | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=unaffected) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox27 |  | wontfix |
| firefox28 |  | fixed |
| firefox-esr24 |  | unaffected |
| b2g-v1.1hd |  | unaffected |
| b2g-v1.2 |  | wontfix |
| b2g-v1.3 |  | fixed |
| b2g-v1.3T |  | fixed |
| b2g-v1.4 |  | unaffected |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: jruderman, Assigned: padenot)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/26d5e4c31bc56896f13d7ae0fbb24e96?d=mm&size=40)  [padenot](/user_profile?user_id=404637)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/d2dc9227eafcd0ec5ba3712ee4f19b75?d=mm&size=40)  [jruderman](/user_profile?user_id=11608)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](extensions/Gravatar/web/default.jpg)  [jimm](/user_profile?user_id=279663)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

19 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

[944538](/show_bug.cgi?id=944538 "RESOLVED FIXED - update libopus to 1.1 release")

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[940933](/show_bug.cgi?id=940933 "RESOLVED WONTFIX - Media Recording - test case for Bug 935774 - \"Assertion failure: meta\" in mozilla::MediaEncoder::GetEncodedData")

Dependency [tree](/showdependencytree.cgi?id=927579&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=927579)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

[945618](/show_bug.cgi?id=945618 "RESOLVED FIXED - Buffer overflow in OPUS tansig_approx")

## Details

### (Keywords: crash, sec-low, testcase, Whiteboard: [adv-main28+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[crash](/buglist.cgi?keywords=crash&resolution=---),
[sec-low](/buglist.cgi?keywords=sec-low&resolution=---),
[testcase](/buglist.cgi?keywords=testcase&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[adv-main28+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [u279076](/user_profile?user_id=279076) | [in-testsuite](#a8990241_279076 "11 years ago") | ? |
| --- | --- | --- |
| [u279076](/user_profile?user_id=279076) | in-testsuite | ? |
| --- | --- | --- |
|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (3 files)

| [testcase (crashes Firefox)](/attachment.cgi?id=818038)  [11 years ago](#c0)  [Jesse Ruderman](/user_profile?user_id=11608)   458 bytes, text/html |  | [Details](/attachment.cgi?id=818038&action=edit) |
| --- | --- | --- |
| [stack (gdb)](/attachment.cgi?id=818044)  [11 years ago](#c1)  [Jesse Ruderman](/user_profile?user_id=11608)   2.79 KB, text/plain |  | [Details](/attachment.cgi?id=818044&action=edit) |
| [stack (ASan)](/attachment.cgi?id=818045)  [11 years ago](#c2)  [Jesse Ruderman](/user_profile?user_id=11608)   14.87 KB, text/plain |  | [Details](/attachment.cgi?id=818045&action=edit) |

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Jesse Ruderman](/user_profile?user_id=11608)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=927579#c0)• 11 years ago |
|  | |

Attached file
[testcase (crashes Firefox)](attachment.cgi?id=818038)
— [Details](attachment.cgi?id=818038&action=edit)

*No description provided.*

|  | [Jesse Ruderman](/user_profile?user_id=11608)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=927579#a41_11608)• 11 years ago |

Group: core-security

|  | [Jesse Ruderman](/user_profile?user_id=11608)  Reporter |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=927579#c1)• 11 years ago |
|  | |

Attached file
[stack (gdb)](attachment.cgi?id=818044)
— [Details](attachment.cgi?id=818044&action=edit)

|  | [Jesse Ruderman](/user_profile?user_id=11608)  Reporter |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=927579#c2)• 11 years ago |
|  | |

Attached file
[stack (ASan)](attachment.cgi?id=818045)
— [Details](attachment.cgi?id=818045&action=edit)

|  | [Karl Tomlinson (:karlt)](/user_profile?user_id=274246) |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=927579#c3)• 11 years ago |
|  | |

Passing this to MediaRecorder, libopus.
Please return to Web Audio if there is a problem with the output from the MediaStreamDestinationNode.Component: Web Audio → Video/Audio

|  | [Maire Reavy [:mreavy]](/user_profile?user_id=74434) |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=927579#c4)• 11 years ago |
|  | |

Rob -- As Karl says, this looks to be a bug in MediaRecorder (not Web Audio). Since this is a sec bug, can you have a look and either take this bug yourself or find the right owner? (Feel free to pass it back if the root cause problem is with Web Audio.) Thanks.Assignee: nobody → rocSummary: WebAudio crash [@ mlp\_process] [@ tansig\_approx] → crash [@ mlp\_process] [@ tansig\_approx]

|  | [Randy Lin [:rlin] - Be Mozillian on 2015/01/26](/user_profile?user_id=453895) |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=927579#c5)• 11 years ago |
|  | |

Linux platform can reproduce this one. Same crash point.Assignee: roc → rlin

|  | [Randy Lin [:rlin] - Be Mozillian on 2015/01/26](/user_profile?user_id=453895) |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=927579#c6)• 11 years ago |
|  | |

I checked the AudioChunk and found if the ac.createDelay with non-zero parameter,
The NotifyQueuedTrackChanges in encoder would get a chunk with Duration = 2.
createDelay(0) doesn't have this.
Is this behavior normal?

|  | [Randy Lin [:rlin] - Be Mozillian on 2015/01/26](/user_profile?user_id=453895) |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=927579#c7)• 11 years ago |
|  | |

Hi Karlt,
I try to check the AudioChunk from media stream and found all chunk are with the duration = 2 and mChannelData size = 2 on 44100 hz, is it normal? If yes, we may have somebody to fix crash problem in libopus.Flags: needinfo?(karlt)

|  | [Randy Lin [:rlin] - Be Mozillian on 2015/01/26](/user_profile?user_id=453895) |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=927579#c8)• 11 years ago |
|  | |

Hi Timothy,
Could you help to check this libopus crash?
#0 0x00007ffff1f36aab in tansig\_approx (x=-nan(0x400000))
at /media/randy-lin/aa890c59-befb-4bc6-9138-def8ebeea61c/gecko\_c2/media/libopus/src/mlp.c:81
#1 0x00007ffff1f36c0f in mlp\_process (m=0x7ffff5244610 <net>, in=0x7fffbb39dd60, out=0x7fffbb39dc50)
at /media/randy-lin/aa890c59-befb-4bc6-9138-def8ebeea61c/gecko\_c2/media/libopus/src/mlp.c:100
#2 0x00007ffff1f35bd2 in tonality\_analysis (tonal=0x7fffb74d6ff8, info\_out=0x0, celt\_mode=0x7ffff5244460 <mode48000\_960\_120>,
x=0x7fffbb39dfc0, len=480, offset=480, C=2, lsb\_depth=24, downmix=0x7ffff1f1ce81 <downmix\_float>)Flags: needinfo?(tterribe)

|  | [Randy Lin [:rlin] - Be Mozillian on 2015/01/26](/user_profile?user_id=453895) |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=927579#c9)• 11 years ago |
|  | |

test page:
<https://rawgithub.com/randylin/mediaRecorder/master/crash_opus.html>

|  | [Randy Lin [:rlin] - Be Mozillian on 2015/01/26](/user_profile?user_id=453895) |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=927579#c10)• 11 years ago |
|  | |

backout this [Bug 922247](/show_bug.cgi?id=922247 "RESOLVED FIXED - When encoding to Opus, resample the input to 48kHz if its sample rate is not suitable") - When encoding to Opus, resample the input to 48kHz if its sample rate is not suitable (edit) and it it works well....Flags: needinfo?(karlt)

|  | [Randell Jesup [:jesup] (needinfo me)](/user_profile?user_id=11539) |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=927579#c11)• 11 years ago |
|  | |

Paul, can you look at this given the patch for [bug 922247](/show_bug.cgi?id=922247 "RESOLVED FIXED - When encoding to Opus, resample the input to 48kHz if its sample rate is not suitable") is implicated? ThanksFlags: needinfo?(paul)

|  | [Paul Adenot (:padenot)](/user_profile?user_id=404637)  Assignee |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=927579#c12)• 11 years ago |
|  | |

I am looking at it as we speak.Assignee: rlin → paulFlags: needinfo?(paul)

|  | [Jean-Marc Valin](/user_profile?user_id=455487) |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=927579#c13)• 11 years ago |
|  | |

The problem seems to be that NaNs were being fed to the opus encoder, eventually causing a crash in tansig\_approx(). The bug is now fixed in git. See: <http://git.xiph.org/?p=opus.git;a=commitdiff;h=d6b5679>
The crash was due to an out-of-bound read, so it's unlikely to be exploitable for anything worse than a crash. Also, it's probably a good idea to understand (and ideally fix) why the encoder was being fed NaNs in the first place.

|  | [Timothy B. Terriberry (:derf)](/user_profile?user_id=12273) |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=927579#c14)• 11 years ago |
|  | |

(In reply to Jean-Marc Valin (:jmspeex) from [comment #13](/show_bug.cgi?id=927579#c13 "RESOLVED FIXED - crash [@ mlp_process] [@ tansig_approx]"))
> The problem seems to be that NaNs were being fed to the opus encoder,
> eventually causing a crash in tansig\_approx(). The bug is now fixed in git.
> See: <http://git.xiph.org/?p=opus.git;a=commitdiff;h=d6b5679>
Paul, do you want to make a patch back-porting this fix and assign me as the reviewer?
> The crash was due to an out-of-bound read, so it's unlikely to be
> exploitable for anything worse than a crash. Also, it's probably a good idea
> to understand (and ideally fix) why the encoder was being fed NaNs in the
> first place.
I assume Paul's still looking at that, but yeah, libopus shouldn't crash if it's fed NaNs, either.Flags: needinfo?(tterribe)

|  | [Karl Tomlinson (:karlt)](/user_profile?user_id=274246) |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=927579#c15)• 11 years ago |
|  | |

(In reply to Randy Lin [:rlin] from [comment #7](/show_bug.cgi?id=927579#c7 "RESOLVED FIXED - crash [@ mlp_process] [@ tansig_approx]"))
> I try to check the AudioChunk from media stream and found all chunk are with
> the duration = 2 and mChannelData size = 2 on 44100 hz, is it normal? If
> yes, we may have somebody to fix crash problem in libopus.
If an AudioChunk directly from the DelayNodeEngine has duration = 2, then there is a bug there, but I assume this duration is from the resampler in the encoder. Other streams may have duration = 2, I assume.

|  | [Paul Adenot (:padenot)](/user_profile?user_id=404637)  Assignee |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=927579#c16)• 11 years ago |
|  | |

(In reply to Timothy B. Terriberry (:derf) from [comment #14](/show_bug.cgi?id=927579#c14 "RESOLVED FIXED - crash [@ mlp_process] [@ tansig_approx]"))
> (In reply to Jean-Marc Valin (:jmspeex) from [comment #13](/show_bug.cgi?id=927579#c13 "RESOLVED FIXED - crash [@ mlp_process] [@ tansig_approx]"))
> > The problem seems to be that NaNs were being fed to the opus encoder,
> > eventually causing a crash in tansig\_approx(). The bug is now fixed in git.
> > See: <http://git.xiph.org/?p=opus.git;a=commitdiff;h=d6b5679>
>
> Paul, do you want to make a patch back-porting this fix and assign me as the
> reviewer?
Yes, I'll do that.
> > The crash was due to an out-of-bound read, so it's unlikely to be
> > exploitable for anything worse than a crash. Also, it's probably a good idea
> > to understand (and ideally fix) why the encoder was being fed NaNs in the
> > first place.
>
> I assume Paul's still looking at that, but yeah, libopus shouldn't crash if
> it's fed NaNs, either.
Of course, there is clearly a bug on the gecko size, here.

|  | [Shelly Lin [:shelly]](/user_profile?user_id=448892) |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=927579#c17)• 11 years ago |
|  | |

(In reply to Karl Tomlinson (:karlt) from [comment #15](/show_bug.cgi?id=927579#c15 "RESOLVED FIXED - crash [@ mlp_process] [@ tansig_approx]"))
> (In reply to Randy Lin [:rlin] from [comment #7](/show_bug.cgi?id=927579#c7 "RESOLVED FIXED - crash [@ mlp_process] [@ tansig_approx]"))
> > I try to check the AudioChunk from media stream and found all chunk are with
> > the duration = 2 and mChannelData size = 2 on 44100 hz, is it normal? If
> > yes, we may have somebody to fix crash problem in libopus.
>
> If an AudioChunk directly from the DelayNodeEngine has duration = 2, then
> there is a bug there, but I assume this duration is from the resampler in
> the encoder. Other streams may have duration = 2, I assume.
AudioChunk with duration = 2 is observed at the callback which is directly called from MediaStreamGraph, Opus encoder queues up chunks and feed them to libopus at once, so duration with 2 should not be a problem theoretically, I'm guessing libopus doesn't like the data being fed to it.

|  | [Paul Adenot (:padenot)](/user_profile?user_id=404637)  Assignee |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=927579#c18)• 11 years ago |
|  | |

(gdb) p mSourceSegment->mChunks.Length()
$37 = 22
(gdb) p iter
$31 = {
mSegment = @0x7fffbf486bb0,
mIndex = 5
}
(gdb) p \*(float\*)((SharedBuffer\*)mSourceSegment->mChunks[5].mBuffer)->Data()@128
$33 = {0 <repeats 127 times>, -nan(0x400000)}
(gdb) p \*(float\*)((SharedBuffer\*)mSourceSegment->mChunks[6].mBuffer)->Data()@128
$38 = {-nan(0x400000) <repeats 128 times>}
(gdb) p \*(float\*)((SharedBuffer\*)mSourceSegment->mChunks[7].mBuffer)->Data()@128
$39 = {-nan(0x400000) <repeats 128 times>}
and so on until mChunks[21].
It seems like we are getting NaNs from the graph somehow.

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=927579#c19)• 11 years ago |
|  | |

Setting sec-low as it sounds like this may just be a harmless crash.Keywords: [sec-low](/buglist.cgi?keywords=sec-low&resolution=---)

|  | [Paul Adenot (:padenot)](/user_profile?user_id=404637)  Assignee |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=927579#c20)• 11 years ago |
|  | |

Some news: this seems completely unrelated to the MediaRecorder, and pretty silent, in fact. It seems related to cycles and DelayNode, but I can't repro if I use the revision of the initial cycles handling. I've started bisecting, I'll have more info tomorrow.
Basically, we read some trash memory somewhere (I suspect the DelayNode, but I'm not sure), put it into an AudioChunk, and it walks its way into the graph and goes eventually to the MediaRecorder, where it crashes.
When the Opus patch lands, this will be non-security sensitive, I think. Worst case, we output some trash audio.

|  | [Robert O'Callahan (:roc) (email my personal email if necessary)](/user_profile?user_id=5038) |  |
| --- | --- | --- |
| [Comment 21](/show_bug.cgi?id=927579#c21)• 11 years ago |
|  | |

Paul told me he found the underlying bug here. But I guess he didn't get around to attaching a patch.

|  | [Randy Lin [:rlin] - Be Mozillian on 2015/01/26](/user_profile?user_id=453895) |  |
| --- | --- | --- |
| [Comment 22](/show_bug.cgi?id=927579#c22)• 11 years ago |
|  | |

Found similar crash when on run this bug's testcase.
[Bug 935774](/show_bug.cgi?id=935774 "VERIFIED FIXED - \"Assertion failure: meta\" in mozilla::MediaEncoder::GetEncodedData") - "Assertion failure: meta" in mozilla::MediaEncoder::GetEncodedData
try: <https://tbpl.mozilla.org/?tree=Try&rev=13cbbbc439a4>
==>
<https://tbpl.mozilla.org/php/getParsedLog.php?id=30500102&tree=Try>
16:10:29 INFO - 0 XUL!mlp\_process [mlp.c:13cbbbc439a4 : 81 + 0xa]
16:10:29 INFO - rbx = 0x00000001042b7978 r12 = 0x0000000115d4fdb0
16:10:29 INFO - r13 = 0x00000001042b7900 r14 = 0x0000000000000019
16:10:29 INFO - r15 = 0x0000000000000000 rip = 0x000000010336b12c
16:10:29 INFO - rsp = 0x0000000115d4d5a0 rbp = 0x0000000115d4d780
16:10:29 INFO - Found by: given as instruction pointer in context
16:10:29 INFO - 1 XUL!tonality\_analysis [analysis.c:13cbbbc439a4 : 480 + 0x4]
16:10:29 INFO - rbx = 0x0000000106fdb3f8 r12 = 0x0000000000000012
16:10:29 INFO - r13 = 0x0000000115d4df10 r14 = 0x0000000000000014
16:10:29 INFO - r15 = 0x0000000000000000 rip = 0x000000010336a8be
16:10:29 INFO - rsp = 0x0000000115d4d790 rbp = 0x0000000115d4ff10
16:10:29 INFO - Found by: call frame info
16:10:29 INFO - 2 XUL!run\_analysis [analysis.c:13cbbbc439a4 : 627 + 0x3c]

|  | [Jean-Marc Valin](/user_profile?user_id=455487) |  |
| --- | --- | --- |
| [Comment 23](/show_bug.cgi?id=927579#c23)• 11 years ago |
|  | |

This was fixed in Opus, but it seems like the fix hasn't gone into FF yet:
<http://git.xiph.org/?p=opus.git;a=commitdiff;h=d6b5679>

|  | [Randy Lin [:rlin] - Be Mozillian on 2015/01/26](/user_profile?user_id=453895) |  |
| --- | --- | --- |
| [Comment 24](/show_bug.cgi?id=927579#c24)• 11 years ago |
|  | |

When can we merge this patch into FF?

|  | [Paul Adenot (:padenot)](/user_profile?user_id=404637)  Assignee |  |
| --- | --- | --- |
| [Comment 25](/show_bug.cgi?id=927579#c25)• 11 years ago |
|  | |

iirc, this was a problem related to cycles and DelayNode, and we were grabbing the wrong input chunks at a stream level. I'll look into it again, but when I told roc I found the cause, I was wrong, the actual cause was deeper.

|  | [Paul Adenot (:padenot)](/user_profile?user_id=404637)  Assignee |  |
| --- | --- | --- |
| [Comment 26](/show_bug.cgi?id=927579#c26)• 11 years ago |
|  | |

Also, this seem to happen because the graph in the testcase does not contain a node capable of producing audio.

|  | [Timothy B. Terriberry (:derf)](/user_profile?user_id=12273) |  |
| --- | --- | --- |
| [Comment 27](/show_bug.cgi?id=927579#c27)• 11 years ago |
|  | |

(In reply to Paul Adenot (:padenot) from [comment #26](/show_bug.cgi?id=927579#c26 "RESOLVED FIXED - crash [@ mlp_process] [@ tansig_approx]"))
> Also, this seem to happen because the graph in the testcase does not contain
> a node capable of producing audio.
Can you still post the backport patch from [comment 14](/show_bug.cgi?id=927579#c14 "RESOLVED FIXED - crash [@ mlp_process] [@ tansig_approx]")?

|  | [Randy Lin [:rlin] - Be Mozillian on 2015/01/26](/user_profile?user_id=453895) |  |
| --- | --- | --- |
| [Comment 28](/show_bug.cgi?id=927579#c28)• 11 years ago |
|  | |

I just try to include the commnet 14 for
the [Bug 935774](/show_bug.cgi?id=935774 "VERIFIED FIXED - \"Assertion failure: meta\" in mozilla::MediaEncoder::GetEncodedData") - Assertion failure: meta in mozilla::MediaEncoder::GetEncodedData
It can avoid the test fail, result: <https://tbpl.mozilla.org/?tree=Try&rev=3d6a880c5b47>
on the test\_mediarecorder\_record\_crash\_audiocontext.html test case.

|  | [Randy Lin [:rlin] - Be Mozillian on 2015/01/26](/user_profile?user_id=453895) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=927579#a2936737_453895)• 11 years ago |

Blocks: [935774](/show_bug.cgi?id=935774 "VERIFIED FIXED - \"Assertion failure: meta\" in mozilla::MediaEncoder::GetEncodedData")

|  | [Randy Lin [:rlin] - Be Mozillian on 2015/01/26](/user_profile?user_id=453895) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=927579#a2991851_453895)• 11 years ago |

No longer blocks: [935774](/show_bug.cgi?id=935774 "VERIFIED FIXED - \"Assertion failure: meta\" in mozilla::MediaEncoder::GetEncodedData")

|  | [Randy Lin [:rlin] - Be Mozillian on 2015/01/26](/user_profile?user_id=453895) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=927579#a2991893_453895)• 11 years ago |

Blocks: [940933](/show_bug.cgi?id=940933 "RESOLVED WONTFIX - Media Recording - test case for Bug 935774 - \"Assertion failure: meta\" in mozilla::MediaEncoder::GetEncodedData")

|  | [Christoph Diehl [:posidron]](/user_profile?user_id=368570) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=927579#a4119728_368570)• 11 years ago |

See Also: → [945618](/show_bug.cgi?id=945618 "RESOLVED FIXED - Buffer overflow in OPUS tansig_approx")

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 29](/show_bug.cgi?id=927579#c29)• 11 years ago |
|  | |

Is this fixed by [bug 944538](/show_bug.cgi?id=944538 "RESOLVED FIXED - update libopus to 1.1 release") which also fixed [bug 945618](/show_bug.cgi?id=945618 "RESOLVED FIXED - Buffer overflow in OPUS tansig_approx")?

|  | [Paul Adenot (:padenot)](/user_profile?user_id=404637)  Assignee |  |
| --- | --- | --- |
| [Comment 30](/show_bug.cgi?id=927579#c30)• 11 years ago |
|  | |

Yep.

|  | [Ralph Giles (:rillian)](/user_profile?user_id=170965) |  |
| --- | --- | --- |
| [Comment 31](/show_bug.cgi?id=927579#c31)• 11 years ago |
|  | |

So can we close this? If not what needs to be done to resolve it.
Things unclear to me: Tim asked about backporting the tansig fix to ff27, but [bug 945618](/show_bug.cgi?id=945618 "RESOLVED FIXED - Buffer overflow in OPUS tansig_approx") etc. mark that version as wontfix.
Is there a bug for not feeding NaNs to the encoder in the first place?

|  | [Paul Adenot (:padenot)](/user_profile?user_id=404637)  Assignee |  |
| --- | --- | --- |
| [Comment 32](/show_bug.cgi?id=927579#c32)• 11 years ago |
|  | |

Now there is: [bug 962548](/show_bug.cgi?id=962548 "RESOLVED FIXED - Web Audio Graphs without no sources produce NaNs").Status: NEW → RESOLVEDClosed: 11 years agoResolution: --- → FIXED

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=927579#a8446472_75935)• 11 years ago |

Depends on: [944538](/show_bug.cgi?id=944538 "RESOLVED FIXED - update libopus to 1.1 release")Target Milestone: --- → mozilla28

|  | [u279076](/user_profile?user_id=279076) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=927579#a8990241_279076)• 11 years ago |

[status-firefox28](/buglist.cgi?f1=cf_status_firefox28&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=fixed)Flags: in-testsuite?

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 33](/show_bug.cgi?id=927579#c33)• 11 years ago |
|  | |

What versions of Firefox were affected by this?Flags: needinfo?(paul)

|  | [Paul Adenot (:padenot)](/user_profile?user_id=404637)  Assignee |  |
| --- | --- | --- |
| [Comment 34](/show_bug.cgi?id=927579#c34)• 11 years ago |
|  | |

This started to happen on 26, I think, since [bug 842243](/show_bug.cgi?id=842243 "VERIFIED FIXED - Implement the framework and encoding pipeline of MediaEncoder") landed.Flags: needinfo?(paul)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=927579#a10374645_280903)• 11 years ago |

[status-firefox27](/buglist.cgi?f1=cf_status_firefox27&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=wontfix)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=927579#a10374692_280903)• 11 years ago |

[status-b2g-v1.1hd](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=equals&v1=unaffected)
[status-b2g-v1.2](/buglist.cgi?f1=cf_status_b2g_1_2&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=%3F)
[status-b2g-v1.3](/buglist.cgi?f1=cf_status_b2g_1_3&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=fixed)
[status-b2g-v1.4](/buglist.cgi?f1=cf_status_b2g_1_4&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=unaffected)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=927579#a11493228_280903)• 11 years ago |

[status-b2g-v1.2](/buglist.cgi?f1=cf_status_b2g_1_2&o1=isnotempty):
[?](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=%3F) → [affected](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=affected)
[status-firefox-esr24](/buglist.cgi?f1=cf_status_firefox_esr24&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=unaffected)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 35](/show_bug.cgi?id=927579#c35)• 11 years ago |
|  | |

B2G RelMan isn't approving sec-lows for v1.1/v1.2 uplift.
[status-b2g-v1.2](/buglist.cgi?f1=cf_status_b2g_1_2&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=wontfix)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=927579#a12027764_280903)• 11 years ago |

Whiteboard: [adv-main28+]

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=927579#a12900162_75935)• 11 years ago |

[status-b2g-v1.3T](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=fixed)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=927579#a42974354_1689)• 10 years ago |

Group: core-security
You need to [log in](/show_bug.cgi?id=927579&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Jesse Ruderman](/user_profile?user_id=11608)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from bugzilla.mozilla.org_46de4391_20250125_003641.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/932496)
* [XML](/show_bug.cgi?ctype=xml&id=932496)

Closed
[Bug 932496](/show_bug.cgi?id=932496)

Opened 11 years ago
Closed 11 years ago

# ObexBase.cpp unsafe pointer increment

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

ObexBase.cpp unsafe pointer increment

## Categories

### (Firefox OS Graveyard :: Bluetooth, defect)

[Product:](/describecomponents.cgi?product=Firefox%20OS%20Graveyard)

Firefox OS Graveyard
▾

Firefox OS Graveyard
FirefoxOS, or Boot2Gecko (B2G) is Mozilla's operating system built on web standards. ([more info](https://wiki.mozilla.org/B2G))
[See Open Bugs in This Product](/buglist.cgi?product=Firefox%20OS%20Graveyard&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Firefox%20OS%20Graveyard)
Watch This Product

[Component:](/describecomponents.cgi?product=Firefox%20OS%20Graveyard&component=Bluetooth#Bluetooth)

Bluetooth
▾

Firefox OS Graveyard :: Bluetooth
Bluetooth support in Boot2Gecko/Firefox OS
[See Open Bugs in This Component](/buglist.cgi?product=Firefox%20OS%20Graveyard&component=Bluetooth&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Firefox%20OS%20Graveyard&component=Bluetooth&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Firefox%20OS%20Graveyard&component=Bluetooth)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

unspecified

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

All

All

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

normal

## Tracking

### (firefox26 wontfix, firefox27 wontfix, firefox28 fixed, firefox-esr24 unaffected, b2g18 fixed, b2g-v1.1hd fixed, b2g-v1.2 fixed, b2g-v1.3 fixed, b2g-v1.3T fixed, b2g-v1.4 unaffected)

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

1.3 Sprint 6 - 12/6

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox26 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox26&o1=equals&v1=wontfix) |
| firefox27 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=wontfix) |
| firefox28 | --- | [fixed](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=fixed) |
| firefox-esr24 | --- | [unaffected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=unaffected) |
| b2g18 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=fixed) |
| b2g-v1.1hd | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=equals&v1=fixed) |
| b2g-v1.2 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=fixed) |
| b2g-v1.3 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=fixed) |
| b2g-v1.3T | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=fixed) |
| b2g-v1.4 | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=unaffected) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox26 |  | wontfix |
| firefox27 |  | wontfix |
| firefox28 |  | fixed |
| firefox-esr24 |  | unaffected |
| b2g18 |  | fixed |
| b2g-v1.1hd |  | fixed |
| b2g-v1.2 |  | fixed |
| b2g-v1.3 |  | fixed |
| b2g-v1.3T |  | fixed |
| b2g-v1.4 |  | unaffected |

## People

### (Reporter: rfletcher, Assigned: echou)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/7f6c1bcb510758ba4c2095022d37c520?d=mm&size=40)  [echou](/user_profile?user_id=434302)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/9d028a270f9dac09be06ca1c0d7346d3?d=mm&size=40)  [rfletcher](/user_profile?user_id=480345)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

---

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

15 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

---

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Keywords: sec-moderate, Whiteboard: [adv-main28+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[sec-moderate](/buglist.cgi?keywords=sec-moderate&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[adv-main28+]

QA Whiteboard:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

|  | sec-bounty | ? |
| --- | --- | --- |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | in-testsuite |  |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (3 files, 5 obsolete files)

| [patch 1: v1: Add length check to prevent from memory pollusion](/attachment.cgi?id=8338384)  [11 years ago](#c3)  [Eric Chou [:ericchou] [:echou]](/user_profile?user_id=434302)   3.54 KB, patch | rfletcher : [feedback-](#c5 "11 years ago") | [Details](/attachment.cgi?id=8338384&action=edit) | [Diff](/attachment.cgi?id=8338384&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=932496&attachment=8338384) |
| --- | --- | --- |
| [patch 1: v2: Add length check to prevent from memory pollusion](/attachment.cgi?id=8341568)  [11 years ago](#c7)  [Eric Chou [:ericchou] [:echou]](/user_profile?user_id=434302)   3.55 KB, patch |  | [Details](/attachment.cgi?id=8341568&action=edit) | [Diff](/attachment.cgi?id=8341568&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=932496&attachment=8341568) |
| [patch 1: v3: Add length check to prevent from memory pollusion](/attachment.cgi?id=8343569)  [11 years ago](#c9)  [Eric Chou [:ericchou] [:echou]](/user_profile?user_id=434302)   8.70 KB, patch | gyeh : [review+](#c10 "11 years ago") | [Details](/attachment.cgi?id=8343569&action=edit) | [Diff](/attachment.cgi?id=8343569&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=932496&attachment=8343569) |
| [patch for b2g26](/attachment.cgi?id=8350903)  [11 years ago](#c16)  [Eric Chou [:ericchou] [:echou]](/user_profile?user_id=434302)   6.39 KB, patch |  | [Details](/attachment.cgi?id=8350903&action=edit) | [Diff](/attachment.cgi?id=8350903&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=932496&attachment=8350903) |
| [patch for b2g18](/attachment.cgi?id=8350905)  [11 years ago](#c17)  [Eric Chou [:ericchou] [:echou]](/user_profile?user_id=434302)   6.47 KB, patch |  | [Details](/attachment.cgi?id=8350905&action=edit) | [Diff](/attachment.cgi?id=8350905&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=932496&attachment=8350905) |
| [patch 1: final: patch for b2g26, r=gyeh](/attachment.cgi?id=8351307)  [11 years ago](#c19)  [Eric Chou [:ericchou] [:echou]](/user_profile?user_id=434302)   6.20 KB, patch | praghunath : [approval-mozilla-b2g26+](#a7340425_474545 "11 years ago") | [Details](/attachment.cgi?id=8351307&action=edit) | [Diff](/attachment.cgi?id=8351307&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=932496&attachment=8351307) |
| [patch 1: final: patch for b2g18, r=gyeh](/attachment.cgi?id=8359024)  [11 years ago](#c20)  [Eric Chou [:ericchou] [:echou]](/user_profile?user_id=434302)   6.56 KB, patch |  | [Details](/attachment.cgi?id=8359024&action=edit) | [Diff](/attachment.cgi?id=8359024&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=932496&attachment=8359024) |
| [patch 1: final: patch for b2g18, r=gyeh](/attachment.cgi?id=8362358)  [11 years ago](#c29)  [Eric Chou [:ericchou] [:echou]](/user_profile?user_id=434302)   7.32 KB, patch | praghunath : [approval-mozilla-b2g18+](#a7340406_474545 "11 years ago") | [Details](/attachment.cgi?id=8362358&action=edit) | [Diff](/attachment.cgi?id=8362358&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=932496&attachment=8362358) |

Show Obsolete

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Rob Fletcher [:omerta]](/user_profile?user_id=480345)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=932496#c0)• 11 years ago |
|  | |

ObexBase.cpp defines a ParseHeaders() function that is responsible for parsing
a header. During parsing, ParseHeaders() extracts a device supplied 2-byte
contentLength from the header. Finally, ParseHeaders() increases a pointer by
that contentLength.
If ptr + contentLength > aHeaderStart + aTotalLength then [1] will read pass
the object.
The worst case scenario appears to be a crash caused by a malicious
contentLength.
[1] <http://mxr.mozilla.org/mozilla-central/source/dom/bluetooth/ObexBase.cpp#118>

|  | [Olli Pettay [:smaug][bugs@pettay.fi]](/user_profile?user_id=39966) |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=932496#c1)• 11 years ago |
|  | |

Hmm, should ObexBase be rewritten using nsCString as data structure.
Manual memcpy and malloc/free is error prone.

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=932496#c2)• 11 years ago |
|  | |

or could the bogus data be interpreted as something dangerous? I guess there's probably not much opportunity for a Bluetooth device to prep a FirefoxOS device's memory to take advantage of that

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=932496#a682060_1689)• 11 years ago |

Keywords: [sec-moderate](/buglist.cgi?keywords=sec-moderate&resolution=---)

|  | [Eric Chou [:ericchou] [:echou]](/user_profile?user_id=434302)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=932496#a1068880_434302)• 11 years ago |

Assignee: nobody → echou

|  | [Eric Chou [:ericchou] [:echou]](/user_profile?user_id=434302)  Assignee |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=932496#c3)• 11 years ago |
|  | |

Attached patch

[patch 1: v1: Add length check to prevent from memory pollusion](attachment.cgi?id=8338384&action=diff) (obsolete)
— [Details](attachment.cgi?id=8338384&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=932496&attachment=8338384)

\* Error handling for case 'ptr + contentLength > aHeaderStart + aTotalLength'
\* Add a new function ObexHeaderSet::ClearHeader() to empty the header set.
\* contentLength should be uint16\_t.
[Attachment #8338384](/attachment.cgi?id=8338384&action=edit "patch 1: v1: Add length check to prevent from memory pollusion") -
Flags: review?
[Attachment #8338384](/attachment.cgi?id=8338384&action=edit "patch 1: v1: Add length check to prevent from memory pollusion") -
Flags: feedback?(rfletcher)

|  | [Rob Fletcher [:omerta]](/user_profile?user_id=480345)  Reporter |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=932496#c4)• 11 years ago |
|  | |

(In reply to Eric Chou [:ericchou] [:echou] from [comment #3](/show_bug.cgi?id=932496#c3 "RESOLVED FIXED - ObexBase.cpp unsafe pointer increment"))
> Created [attachment 8338384](/attachment.cgi?id=8338384 "patch 1: v1: Add length check to prevent from memory pollusion") [[details]](/attachment.cgi?id=8338384&action=edit "patch 1: v1: Add length check to prevent from memory pollusion") [[diff]](/attachment.cgi?id=8338384&action=diff "patch 1: v1: Add length check to prevent from memory pollusion") [[review]](/page.cgi?id=splinter.html&ignore=&bug=932496&attachment=8338384)
> patch 1: v1: Add length check to prevent from memory pollusion
>
> \* Error handling for case 'ptr + contentLength > aHeaderStart + aTotalLength'
> \* Add a new function ObexHeaderSet::ClearHeader() to empty the header set.
> \* contentLength should be uint16\_t.
One nits:
ClearHeader() appears to clear "all" headers. If that is the case, would it be better to name it ClearHeaders()?
Besides that, lgtm! Thanks Eric!

|  | [Rob Fletcher [:omerta]](/user_profile?user_id=480345)  Reporter |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=932496#c5)• 11 years ago |
|  | |

Comment on [attachment 8338384](/attachment.cgi?id=8338384 "patch 1: v1: Add length check to prevent from memory pollusion") [[details]](/attachment.cgi?id=8338384&action=edit "patch 1: v1: Add length check to prevent from memory pollusion") [[diff]](/attachment.cgi?id=8338384&action=diff "patch 1: v1: Add length check to prevent from memory pollusion") [[review]](/page.cgi?id=splinter.html&ignore=&bug=932496&attachment=8338384)
patch 1: v1: Add length check to prevent from memory pollusion
Ahhh, newb'd this one up. Here is my response from the original bugzilla thread:
(In reply to Eric Chou [:ericchou] [:echou] from [comment #3](/show_bug.cgi?id=932496#c3 "RESOLVED FIXED - ObexBase.cpp unsafe pointer increment"))
> Created [attachment 8338384](/attachment.cgi?id=8338384 "patch 1: v1: Add length check to prevent from memory pollusion") [[details]](/attachment.cgi?id=8338384&action=edit "patch 1: v1: Add length check to prevent from memory pollusion") [[diff]](/attachment.cgi?id=8338384&action=diff "patch 1: v1: Add length check to prevent from memory pollusion") [[review]](/page.cgi?id=splinter.html&ignore=&bug=932496&attachment=8338384) [diff] [review]
> patch 1: v1: Add length check to prevent from memory pollusion
>
> \* Error handling for case 'ptr + contentLength > aHeaderStart + aTotalLength'
> \* Add a new function ObexHeaderSet::ClearHeader() to empty the header set.
> \* contentLength should be uint16\_t.
One nits:
ClearHeader() appears to clear "all" headers. If that is the case, would it be better to name it ClearHeaders()?
Besides that, lgtm! Thanks Eric!
[Attachment #8338384](/attachment.cgi?id=8338384&action=edit "patch 1: v1: Add length check to prevent from memory pollusion") -
Flags: feedback?(rfletcher) → feedback-

|  | [Eric Chou [:ericchou] [:echou]](/user_profile?user_id=434302)  Assignee |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=932496#c6)• 11 years ago |
|  | |

(In reply to Rob Fletcher [:omerta] from [comment #5](/show_bug.cgi?id=932496#c5 "RESOLVED FIXED - ObexBase.cpp unsafe pointer increment"))
> Comment on [attachment 8338384](/attachment.cgi?id=8338384 "patch 1: v1: Add length check to prevent from memory pollusion") [[details]](/attachment.cgi?id=8338384&action=edit "patch 1: v1: Add length check to prevent from memory pollusion") [[diff]](/attachment.cgi?id=8338384&action=diff "patch 1: v1: Add length check to prevent from memory pollusion") [[review]](/page.cgi?id=splinter.html&ignore=&bug=932496&attachment=8338384)
> patch 1: v1: Add length check to prevent from memory pollusion
>
> Ahhh, newb'd this one up. Here is my response from the original bugzilla
> thread:
> (In reply to Eric Chou [:ericchou] [:echou] from [comment #3](/show_bug.cgi?id=932496#c3 "RESOLVED FIXED - ObexBase.cpp unsafe pointer increment"))
> > Created [attachment 8338384](/attachment.cgi?id=8338384 "patch 1: v1: Add length check to prevent from memory pollusion") [[details]](/attachment.cgi?id=8338384&action=edit "patch 1: v1: Add length check to prevent from memory pollusion") [[diff]](/attachment.cgi?id=8338384&action=diff "patch 1: v1: Add length check to prevent from memory pollusion") [[review]](/page.cgi?id=splinter.html&ignore=&bug=932496&attachment=8338384)
> > patch 1: v1: Add length check to prevent from memory pollusion
> >
> > \* Error handling for case 'ptr + contentLength > aHeaderStart + aTotalLength'
> > \* Add a new function ObexHeaderSet::ClearHeader() to empty the header set.
> > \* contentLength should be uint16\_t.
>
> One nits:
> ClearHeader() appears to clear "all" headers. If that is the case, would it
> be better to name it ClearHeaders()?
You're right. Thanks!

|  | [Eric Chou [:ericchou] [:echou]](/user_profile?user_id=434302)  Assignee |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=932496#c7)• 11 years ago |
|  | |

Attached patch

[patch 1: v2: Add length check to prevent from memory pollusion](attachment.cgi?id=8341568&action=diff) (obsolete)
— [Details](attachment.cgi?id=8341568&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=932496&attachment=8341568)

\* Updated based on Rob's comment.
[Attachment #8338384](/attachment.cgi?id=8338384&action=edit "patch 1: v1: Add length check to prevent from memory pollusion") -
Attachment is obsolete: true
[Attachment #8338384](/attachment.cgi?id=8338384&action=edit "patch 1: v1: Add length check to prevent from memory pollusion") -
Flags: review?
[Attachment #8341568](/attachment.cgi?id=8341568&action=edit "patch 1: v2: Add length check to prevent from memory pollusion") -
Flags: review?(gyeh)

|  | [Gina Yeh [:gyeh] [:ginayeh]](/user_profile?user_id=445298) |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=932496#c8)• 11 years ago |
|  | |

Comment on [attachment 8341568](/attachment.cgi?id=8341568 "patch 1: v2: Add length check to prevent from memory pollusion") [[details]](/attachment.cgi?id=8341568&action=edit "patch 1: v2: Add length check to prevent from memory pollusion") [[diff]](/attachment.cgi?id=8341568&action=diff "patch 1: v2: Add length check to prevent from memory pollusion") [[review]](/page.cgi?id=splinter.html&ignore=&bug=932496&attachment=8341568)
patch 1: v2: Add length check to prevent from memory pollusion
Review of [attachment 8341568](/attachment.cgi?id=8341568 "patch 1: v2: Add length check to prevent from memory pollusion") [[details]](/attachment.cgi?id=8341568&action=edit "patch 1: v2: Add length check to prevent from memory pollusion") [[diff]](/attachment.cgi?id=8341568&action=diff "patch 1: v2: Add length check to prevent from memory pollusion") [[review]](/page.cgi?id=splinter.html&ignore=&bug=932496&attachment=8341568):
-----------------------------------------------------------------
::: dom/bluetooth/ObexBase.cpp
@@ +122,5 @@
> + MOZ\_ASSERT(false);
> + aRetHandlerSet->ClearHeaders();
> + return;
> + }
> +
I think that error handling in BluetoothOppManager is needed for this case.

|  | [Eric Chou [:ericchou] [:echou]](/user_profile?user_id=434302)  Assignee |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=932496#c9)• 11 years ago |
|  | |

Attached patch

[patch 1: v3: Add length check to prevent from memory pollusion](attachment.cgi?id=8343569&action=diff)
— [Details](attachment.cgi?id=8343569&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=932496&attachment=8343569)

\* Updated based on Gina's comment.
[Attachment #8341568](/attachment.cgi?id=8341568&action=edit "patch 1: v2: Add length check to prevent from memory pollusion") -
Attachment is obsolete: true
[Attachment #8341568](/attachment.cgi?id=8341568&action=edit "patch 1: v2: Add length check to prevent from memory pollusion") -
Flags: review?(gyeh)
[Attachment #8343569](/attachment.cgi?id=8343569&action=edit "patch 1: v3: Add length check to prevent from memory pollusion") -
Flags: review?(gyeh)

|  | [Gina Yeh [:gyeh] [:ginayeh]](/user_profile?user_id=445298) |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=932496#c10)• 11 years ago |
|  | |

Comment on [attachment 8343569](/attachment.cgi?id=8343569 "patch 1: v3: Add length check to prevent from memory pollusion") [[details]](/attachment.cgi?id=8343569&action=edit "patch 1: v3: Add length check to prevent from memory pollusion") [[diff]](/attachment.cgi?id=8343569&action=diff "patch 1: v3: Add length check to prevent from memory pollusion") [[review]](/page.cgi?id=splinter.html&ignore=&bug=932496&attachment=8343569)
patch 1: v3: Add length check to prevent from memory pollusion
Review of [attachment 8343569](/attachment.cgi?id=8343569 "patch 1: v3: Add length check to prevent from memory pollusion") [[details]](/attachment.cgi?id=8343569&action=edit "patch 1: v3: Add length check to prevent from memory pollusion") [[diff]](/attachment.cgi?id=8343569&action=diff "patch 1: v3: Add length check to prevent from memory pollusion") [[review]](/page.cgi?id=splinter.html&ignore=&bug=932496&attachment=8343569):
-----------------------------------------------------------------
Great! :)
[Attachment #8343569](/attachment.cgi?id=8343569&action=edit "patch 1: v3: Add length check to prevent from memory pollusion") -
Flags: review?(gyeh) → review+

|  | [Eric Chou [:ericchou] [:echou]](/user_profile?user_id=434302)  Assignee |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=932496#c11)• 11 years ago |
|  | |

<https://hg.mozilla.org/integration/b2g-inbound/rev/0f2650f8c995>
Thanks!

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=932496#c12)• 11 years ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/0f2650f8c995>Status: NEW → RESOLVEDClosed: 11 years ago
[status-b2g18](/buglist.cgi?f1=cf_status_b2g18&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=%3F)
[status-b2g-v1.2](/buglist.cgi?f1=cf_status_b2g_1_2&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=%3F)
[status-firefox26](/buglist.cgi?f1=cf_status_firefox26&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_firefox26&o1=equals&v1=wontfix)
[status-firefox27](/buglist.cgi?f1=cf_status_firefox27&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=wontfix)
[status-firefox28](/buglist.cgi?f1=cf_status_firefox28&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=fixed)Resolution: --- → FIXEDTarget Milestone: --- → 1.3 Sprint 6 - 12/6

|  | [Jason Smith [:jsmith]](/user_profile?user_id=432443) |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=932496#c13)• 11 years ago |
|  | |

Rob - Can you find out if this issue can reproduce on 1.2 or 1.1?Flags: needinfo?(rfletcher)

|  | [Rob Fletcher [:omerta]](/user_profile?user_id=480345)  Reporter |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=932496#c14)• 11 years ago |
|  | |

This is present in mozilla-b2g18, mozilla-b2g18\_v1\_1\_0\_hd, and mozilla-b2g26\_v1\_2.
Yes, it's present in 1.2 and 1.1Flags: needinfo?(rfletcher)

|  | [Jason Smith [:jsmith]](/user_profile?user_id=432443) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=932496#a3693737_432443)• 11 years ago |

[status-b2g18](/buglist.cgi?f1=cf_status_b2g18&o1=isnotempty):
[?](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=%3F) → [affected](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=affected)
[status-b2g-v1.2](/buglist.cgi?f1=cf_status_b2g_1_2&o1=isnotempty):
[?](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=%3F) → [affected](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=affected)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=932496#c15)• 11 years ago |
|  | |

(In reply to Rob Fletcher [:omerta] from [comment #14](/show_bug.cgi?id=932496#c14 "RESOLVED FIXED - ObexBase.cpp unsafe pointer increment"))
> This is present in mozilla-b2g18, mozilla-b2g18\_v1\_1\_0\_hd, and
> mozilla-b2g26\_v1\_2.
>
> Yes, it's present in 1.2 and 1.1
Can you please nominate the for b2g26 and b2g18 uplift?

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=932496#a4469079_75935)• 11 years ago |

Flags: needinfo?(echou)

|  | [Eric Chou [:ericchou] [:echou]](/user_profile?user_id=434302)  Assignee |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=932496#c16)• 11 years ago |
|  | |

Attached patch

[patch for b2g26](attachment.cgi?id=8350903&action=diff) (obsolete)
— [Details](attachment.cgi?id=8350903&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=932496&attachment=8350903)

\* Patch for b2g26. Will test with this patch next Monday.Flags: needinfo?(echou)

|  | [Eric Chou [:ericchou] [:echou]](/user_profile?user_id=434302)  Assignee |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=932496#c17)• 11 years ago |
|  | |

Attached patch

[patch for b2g18](attachment.cgi?id=8350905&action=diff) (obsolete)
— [Details](attachment.cgi?id=8350905&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=932496&attachment=8350905)

\* Patch for b2g18. Will test on Monday then request for uplift.

|  | [Eric Chou [:ericchou] [:echou]](/user_profile?user_id=434302)  Assignee |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=932496#c18)• 11 years ago |
|  | |

(In reply to Eric Chou [:ericchou] [:echou] from [comment #16](/show_bug.cgi?id=932496#c16 "RESOLVED FIXED - ObexBase.cpp unsafe pointer increment"))
> Created [attachment 8350903](/attachment.cgi?id=8350903 "patch for b2g26") [[details]](/attachment.cgi?id=8350903&action=edit "patch for b2g26") [[diff]](/attachment.cgi?id=8350903&action=diff "patch for b2g26") [[review]](/page.cgi?id=splinter.html&ignore=&bug=932496&attachment=8350903)
> patch for b2g26
>
> \* Patch for b2g26. Will test with this patch next Monday.
Verified.

|  | [Eric Chou [:ericchou] [:echou]](/user_profile?user_id=434302)  Assignee |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=932496#c19)• 11 years ago |
|  | |

Attached patch

[patch 1: final: patch for b2g26, r=gyeh](attachment.cgi?id=8351307&action=diff)
— [Details](attachment.cgi?id=8351307&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=932496&attachment=8351307)

[Attachment #8350903](/attachment.cgi?id=8350903&action=edit "patch for b2g26") -
Attachment is obsolete: true

|  | [Eric Chou [:ericchou] [:echou]](/user_profile?user_id=434302)  Assignee |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=932496#c20)• 11 years ago |
|  | |

Attached patch

[patch 1: final: patch for b2g18, r=gyeh](attachment.cgi?id=8359024&action=diff) (obsolete)
— [Details](attachment.cgi?id=8359024&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=932496&attachment=8359024)

\* Updated. Final patch for b2g18.
[Attachment #8350905](/attachment.cgi?id=8350905&action=edit "patch for b2g18") -
Attachment is obsolete: true

|  | [Eric Chou [:ericchou] [:echou]](/user_profile?user_id=434302)  Assignee |  |
| --- | --- | --- |
| [Comment 21](/show_bug.cgi?id=932496#c21)• 11 years ago |
|  | |

Hi Bhavana,
Again, we need your help to uplift this security bug just like [bug 932490](/show_bug.cgi?id=932490 "RESOLVED FIXED - ObexBase.cpp buffer overflow(s)"). Thank you.Flags: needinfo?(bbajaj)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 22](/show_bug.cgi?id=932496#c22)• 11 years ago |
|  | |

Please request b2g26/b2g18 approval on the patches.Flags: needinfo?(bbajaj)

|  | [Eric Chou [:ericchou] [:echou]](/user_profile?user_id=434302)  Assignee |  |
| --- | --- | --- |
| [Comment 23](/show_bug.cgi?id=932496#c23)• 11 years ago |
|  | |

(In reply to Ryan VanderMeulen [:RyanVM UTC-5] from [comment #22](/show_bug.cgi?id=932496#c22 "RESOLVED FIXED - ObexBase.cpp unsafe pointer increment"))
> Please request b2g26/b2g18 approval on the patches.
To be honest I don't know what the criteria is for this kind of patch. Take [bug 932543](/show_bug.cgi?id=932543 "RESOLVED FIXED - BluetoothOppManager.cpp heap buffer overflow") as an example, at first I tried to nominate as koi+ in [comment 24](/show_bug.cgi?id=932496#c24 "RESOLVED FIXED - ObexBase.cpp unsafe pointer increment") and Jason told me to request for approval to uplift, so I did in [comment 27](/show_bug.cgi?id=932496#c27 "RESOLVED FIXED - ObexBase.cpp unsafe pointer increment"). Then Bhavana explained why release team rather koi+'ing than using approval, so it turned out to be koi+. After that I nominate as leo+ to [bug 932490](/show_bug.cgi?id=932490 "RESOLVED FIXED - ObexBase.cpp buffer overflow(s)") but soon I was told that 'we won't have leo triage anymore', so I ni? Bhavana again and everything looks just fine. Now I'm confused because we don't seem to have a procedure for developers to make these patches get uplifted.

|  | [Eric Chou [:ericchou] [:echou]](/user_profile?user_id=434302)  Assignee |  |
| --- | --- | --- |
| [Comment 24](/show_bug.cgi?id=932496#c24)• 11 years ago |
|  | |

Comment on [attachment 8351307](/attachment.cgi?id=8351307 "patch 1: final: patch for b2g26, r=gyeh") [[details]](/attachment.cgi?id=8351307&action=edit "patch 1: final: patch for b2g26, r=gyeh") [[diff]](/attachment.cgi?id=8351307&action=diff "patch 1: final: patch for b2g26, r=gyeh") [[review]](/page.cgi?id=splinter.html&ignore=&bug=932496&attachment=8351307)
patch 1: final: patch for b2g26, r=gyeh
NOTE: This flag is now for security issues only. Please see <https://wiki.mozilla.org/Release_Management/B2G_Landing> to better understand the B2G approval process and landings.
[Approval Request Comment]
Bug caused by (feature/regressing bug #): No specific bug. This issue should have existed from the beginning.
User impact if declined: no user impact. Security issue.
Testing completed: m-c and manual testing by transferring files.
Risk to taking this patch (and alternatives if risky): Fairly low. Just added length-checking to prevent from potential memory pollution.
String or UUID changes made by this patch: no
[Attachment #8351307](/attachment.cgi?id=8351307&action=edit "patch 1: final: patch for b2g26, r=gyeh") -
Flags: approval-mozilla-b2g26?

|  | [Eric Chou [:ericchou] [:echou]](/user_profile?user_id=434302)  Assignee |  |
| --- | --- | --- |
| [Comment 25](/show_bug.cgi?id=932496#c25)• 11 years ago |
|  | |

Comment on [attachment 8359024](/attachment.cgi?id=8359024 "patch 1: final: patch for b2g18, r=gyeh") [[details]](/attachment.cgi?id=8359024&action=edit "patch 1: final: patch for b2g18, r=gyeh") [[diff]](/attachment.cgi?id=8359024&action=diff "patch 1: final: patch for b2g18, r=gyeh") [[review]](/page.cgi?id=splinter.html&ignore=&bug=932496&attachment=8359024)
patch 1: final: patch for b2g18, r=gyeh
NOTE: This flag is now for security issues only. Please see <https://wiki.mozilla.org/Release_Management/B2G_Landing> to better understand the B2G approval process and landings.
[Approval Request Comment]
Bug caused by (feature/regressing bug #): No specific bug. This issue should have existed from the beginning.
User impact if declined: no user impact. Security issue.
Testing completed: m-c and manual testing by transferring files.
Risk to taking this patch (and alternatives if risky): Fairly low. Just added length-checking to prevent from potential memory pollution.
String or UUID changes made by this patch: no
[Attachment #8359024](/attachment.cgi?id=8359024&action=edit "patch 1: final: patch for b2g18, r=gyeh") -
Flags: approval-mozilla-b2g18?

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 26](/show_bug.cgi?id=932496#c26)• 11 years ago |
|  | |

(In reply to Eric Chou [:ericchou] [:echou] from [comment #23](/show_bug.cgi?id=932496#c23 "RESOLVED FIXED - ObexBase.cpp unsafe pointer increment"))
> (In reply to Ryan VanderMeulen [:RyanVM UTC-5] from [comment #22](/show_bug.cgi?id=932496#c22 "RESOLVED FIXED - ObexBase.cpp unsafe pointer increment"))
> > Please request b2g26/b2g18 approval on the patches.
>
> To be honest I don't know what the criteria is for this kind of patch.
I completely feel your pain. We (myself, Bhavana, and Preeti) had a discussion about this exact topic on Friday and requesting approval was the route we came to a consensus on. The B2G Landing page has also been updated to reflect this information. Sorry for the confusion, hopefully things are more straightforward in the future.
<https://wiki.mozilla.org/Release_Management/B2G_Landing>

|  | [Eric Chou [:ericchou] [:echou]](/user_profile?user_id=434302)  Assignee |  |
| --- | --- | --- |
| [Comment 27](/show_bug.cgi?id=932496#c27)• 11 years ago |
|  | |

(In reply to Ryan VanderMeulen [:RyanVM UTC-5] from [comment #26](/show_bug.cgi?id=932496#c26 "RESOLVED FIXED - ObexBase.cpp unsafe pointer increment"))
> (In reply to Eric Chou [:ericchou] [:echou] from [comment #23](/show_bug.cgi?id=932496#c23 "RESOLVED FIXED - ObexBase.cpp unsafe pointer increment"))
> > (In reply to Ryan VanderMeulen [:RyanVM UTC-5] from [comment #22](/show_bug.cgi?id=932496#c22 "RESOLVED FIXED - ObexBase.cpp unsafe pointer increment"))
> > > Please request b2g26/b2g18 approval on the patches.
> >
> > To be honest I don't know what the criteria is for this kind of patch.
>
> I completely feel your pain. We (myself, Bhavana, and Preeti) had a
> discussion about this exact topic on Friday and requesting approval was the
> route we came to a consensus on. The B2G Landing page has also been updated
> to reflect this information. Sorry for the confusion, hopefully things are
> more straightforward in the future.
> <https://wiki.mozilla.org/Release_Management/B2G_Landing>
No problem. Thank you for clarifying that, Ryan.

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 28](/show_bug.cgi?id=932496#c28)• 11 years ago |
|  | |

FWIW, the b2g26 backport is green on Try.
The b2g18 backport is busted, however.
20:23:39 INFO - ../../../gecko/dom/bluetooth/BluetoothOppManager.cpp: In member function 'bool mozilla::dom::bluetooth::BluetoothOppManager::WriteToFile(const uint8\_t\*, int)':
20:23:39 WARNING - ../../../gecko/dom/bluetooth/BluetoothOppManager.cpp:575: warning: comparison between signed and unsigned integer expressions
20:23:39 INFO - ../../../gecko/dom/bluetooth/BluetoothOppManager.cpp: In member function 'void mozilla::dom::bluetooth::BluetoothOppManager::ServerDataHandler(mozilla::ipc::UnixSocketRawData\*)':
20:23:39 ERROR - ../../../gecko/dom/bluetooth/BluetoothOppManager.cpp:791: error: 'ReplyError' was not declared in this scope
20:23:39 ERROR - ../../../gecko/dom/bluetooth/BluetoothOppManager.cpp:804: error: 'ReplyError' was not declared in this scope
20:23:39 INFO - ../../../gecko/dom/bluetooth/BluetoothOppManager.cpp: At global scope:
20:23:39 ERROR - ../../../gecko/dom/bluetooth/BluetoothOppManager.cpp:1253: error: no 'void mozilla::dom::bluetooth::BluetoothOppManager::ReplyError(uint8\_t)' member function declared in class 'mozilla::dom::bluetooth::BluetoothOppManager'
20:23:39 INFO - In the directory /builds/slave/b2g\_try\_emu\_dep-00000000000000/build/objdir-gecko/dom/bluetooth
20:23:39 INFO - The following command failed to execute properly:
20:23:39 INFO - /usr/bin/ccache /builds/slave/b2g\_try\_emu\_dep-00000000000000/build/prebuilt/linux-x86/toolchain/arm-linux-androideabi-4.4.x/bin/arm-linux-androideabi-g++ -o BluetoothOppManager.o -c -fvisibility=hidden -D\_IMPL\_NS\_LAYOUT -DMOZ\_BLUETOOTH\_GONK -DMOZILLA\_INTERNAL\_API -D\_IMPL\_NS\_COM -DEXPORT\_XPT\_API -DEXPORT\_XPTC\_API -D\_IMPL\_NS\_GFX -D\_IMPL\_NS\_WIDGET -DIMPL\_XREAPI -DIMPL\_NS\_NET -DIMPL\_THEBES -DSTATIC\_EXPORTABLE\_JS\_API -DEXCLUDE\_SKIA\_DEPENDENCIES -DOS\_POSIX=1 -DOS\_LINUX=1 -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/gecko/dom/base -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/gecko/dom/battery -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/gecko/dom/encoding -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/gecko/dom/file -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/gecko/dom/power -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/gecko/dom/push -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/gecko/dom/push/src -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/gecko/dom/media -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/gecko/dom/network/src -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/gecko/dom/settings -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/gecko/dom/phonenumberutils -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/gecko/dom/contacts -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/gecko/dom/permission -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/gecko/dom/alarm -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/gecko/dom/src/events -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/gecko/dom/src/storage -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/gecko/dom/src/offline -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/gecko/dom/src/geolocation -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/gecko/dom/src/notification -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/gecko/dom/workers -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/gecko/dom/time -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/gecko/content/xbl/src -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/gecko/content/xul/document/src -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/gecko/content/events/src -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/gecko/content/base/src -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/gecko/content/html/content/src -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/gecko/content/html/document/src -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/gecko/content/media/webaudio -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/gecko/content/svg/content/src -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/gecko/layout/generic -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/gecko/layout/style -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/gecko/layout/xul/base/src -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/gecko/layout/xul/base/src/tree/src -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/gecko/dom/camera -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/gecko/dom/system/gonk -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/gecko/dom/telephony -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/gecko/dom/wifi -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/gecko/dom/icc/src -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/gecko/dom/fm -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/gecko/dom/bluetooth -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/gecko/dom/bluetooth -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/gecko/dom/bluetooth/ipc -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/gecko/dom/bluetooth/linux -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/gecko/dom/bluetooth/gonk -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/gecko/ipc/chromium/src -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/gecko/ipc/glue -I../../ipc/ipdl/\_ipdlheaders -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/gecko/dom/bluetooth -I. -I../../dist/include -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/objdir-gecko/dist/include/nspr -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/objdir-gecko/dist/include/nss -fPIC -DANDROID -isystem /builds/slave/b2g\_try\_emu\_dep-00000000000000/build/bionic/libc/arch-arm/include -isystem /builds/slave/b2g\_try\_emu\_dep-00000000000000/build/bionic/libc/include/ -isystem /builds/slave/b2g\_try\_emu\_dep-00000000000000/build/bionic/libc/kernel/common -isystem /builds/slave/b2g\_try\_emu\_dep-00000000000000/build/bionic/libc/kernel/arch-arm -isystem /builds/slave/b2g\_try\_emu\_dep-00000000000000/build/bionic/libm/include -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/frameworks/base/opengl/include -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/frameworks/base/native/include -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/hardware/libhardware/include -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/hardware/libhardware\_legacy/include -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/system -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/system/core/include -isystem /builds/slave/b2g\_try\_emu\_dep-00000000000000/build/bionic -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/frameworks/base/include -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/external/dbus -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/external/bluetooth/bluez/lib -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/frameworks/base/services/sensorservice -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/frameworks/base/services/camera -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/system/media/wilhelm/include -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/frameworks/base/include/media/stagefright -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/frameworks/base/include/media/stagefright/openmax -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/frameworks/base/media/libstagefright/rtsp -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/frameworks/base/media/libstagefright/include -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/dalvik/libnativehelper/include/nativehelper -Wall -Wpointer-arith -Woverloaded-virtual -Werror=return-type -Wtype-limits -Wempty-body -Werror=conversion-null -Wno-ctor-dtor-privacy -Wno-overlength-strings -Wno-invalid-offsetof -Wno-variadic-macros -Wno-long-long -mandroid -fno-short-enums -fno-exceptions -Wno-psabi -DMOZ\_ENABLE\_JS\_DUMP -include /builds/slave/b2g\_try\_emu\_dep-00000000000000/build/gonk-misc/Unicode.h -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/ndk/sources/cxx-stl/stlport/stlport/ -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/external/stlport/stlport/ -march=armv7-a -mthumb -mfpu=vfp -mfloat-abi=softfp -fno-exceptions -fno-strict-aliasing -fno-rtti -ffunction-sections -fdata-sections -fno-exceptions -std=gnu++0x -pipe -DNDEBUG -DTRIMMED -g -Os -freorder-blocks -fno-reorder-functions -fomit-frame-pointer -DANDROID -isystem /builds/slave/b2g\_try\_emu\_dep-00000000000000/build/bionic/libc/arch-arm/include -isystem /builds/slave/b2g\_try\_emu\_dep-00000000000000/build/bionic/libc/include/ -isystem /builds/slave/b2g\_try\_emu\_dep-00000000000000/build/bionic/libc/kernel/common -isystem /builds/slave/b2g\_try\_emu\_dep-00000000000000/build/bionic/libc/kernel/arch-arm -isystem /builds/slave/b2g\_try\_emu\_dep-00000000000000/build/bionic/libm/include -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/frameworks/base/opengl/include -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/frameworks/base/native/include -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/hardware/libhardware/include -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/hardware/libhardware\_legacy/include -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/system -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/system/core/include -isystem /builds/slave/b2g\_try\_emu\_dep-00000000000000/build/bionic -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/frameworks/base/include -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/external/dbus -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/external/bluetooth/bluez/lib -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/frameworks/base/services/sensorservice -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/frameworks/base/services/camera -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/system/media/wilhelm/include -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/frameworks/base/include/media/stagefright -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/frameworks/base/include/media/stagefright/openmax -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/frameworks/base/media/libstagefright/rtsp -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/frameworks/base/media/libstagefright/include -I/builds/slave/b2g\_try\_emu\_dep-00000000000000/build/dalvik/libnativehelper/include/nativehelper -DMOZILLA\_CLIENT -include ../../mozilla-config.h -MD -MF .deps/BluetoothOppManager.o.pp /builds/slave/b2g\_try\_emu\_dep-00000000000000/build/gecko/dom/bluetooth/BluetoothOppManager.cpp
20:23:39 ERROR - make[7]: \*\*\* [BluetoothOppManager.o] Error 1Flags: needinfo?(echou)

|  | [Eric Chou [:ericchou] [:echou]](/user_profile?user_id=434302)  Assignee |  |
| --- | --- | --- |
| [Comment 29](/show_bug.cgi?id=932496#c29)• 11 years ago |
|  | |

Attached patch

[patch 1: final: patch for b2g18, r=gyeh](attachment.cgi?id=8362358&action=diff)
— [Details](attachment.cgi?id=8362358&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=932496&attachment=8362358)

\* Patch updated. Should fixed the bustage.
Is there any way I can run try based on a specific branch like b2g18 or b2g26 by myself to save your time?
[Attachment #8359024](/attachment.cgi?id=8359024&action=edit "patch 1: final: patch for b2g18, r=gyeh") -
Attachment is obsolete: true
[Attachment #8359024](/attachment.cgi?id=8359024&action=edit "patch 1: final: patch for b2g18, r=gyeh") -
Flags: approval-mozilla-b2g18?Flags: needinfo?(echou)

|  | [Eric Chou [:ericchou] [:echou]](/user_profile?user_id=434302)  Assignee |  |
| --- | --- | --- |
| [Comment 30](/show_bug.cgi?id=932496#c30)• 11 years ago |
|  | |

Comment on [attachment 8362358](/attachment.cgi?id=8362358 "patch 1: final: patch for b2g18, r=gyeh") [[details]](/attachment.cgi?id=8362358&action=edit "patch 1: final: patch for b2g18, r=gyeh") [[diff]](/attachment.cgi?id=8362358&action=diff "patch 1: final: patch for b2g18, r=gyeh") [[review]](/page.cgi?id=splinter.html&ignore=&bug=932496&attachment=8362358)
patch 1: final: patch for b2g18, r=gyeh
NOTE: This flag is now for security issues only. Please see <https://wiki.mozilla.org/Release_Management/B2G_Landing> to better understand the B2G approval process and landings.
[Approval Request Comment]
Bug caused by (feature/regressing bug #): No specific bug. This issue should have existed from the beginning.
User impact if declined: no user impact. Security issue.
Testing completed: m-c and manual testing by transferring files.
Risk to taking this patch (and alternatives if risky): Fairly low. Just added length-checking to prevent from potential memory pollution.
String or UUID changes made by this patch: no
[Attachment #8362358](/attachment.cgi?id=8362358&action=edit "patch 1: final: patch for b2g18, r=gyeh") -
Flags: approval-mozilla-b2g18?

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 31](/show_bug.cgi?id=932496#c31)• 11 years ago |
|  | |

(In reply to Eric Chou [:ericchou] [:echou] from [comment #29](/show_bug.cgi?id=932496#c29 "RESOLVED FIXED - ObexBase.cpp unsafe pointer increment"))
> Is there any way I can run try based on a specific branch like b2g18 or
> b2g26 by myself to save your time?
You can push to Try on top of any branch. It doesn't always work well because it assumes a trunk-like config, but it generally is OK to at least say it builds.

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 32](/show_bug.cgi?id=932496#c32)• 11 years ago |
|  | |

(In reply to Eric Chou [:ericchou] [:echou] from [comment #29](/show_bug.cgi?id=932496#c29 "RESOLVED FIXED - ObexBase.cpp unsafe pointer increment"))
> \* Patch updated. Should fixed the bustage.
It does :)

|  | [Eric Chou [:ericchou] [:echou]](/user_profile?user_id=434302)  Assignee |  |
| --- | --- | --- |
| [Comment 33](/show_bug.cgi?id=932496#c33)• 11 years ago |
|  | |

(In reply to Ryan VanderMeulen [:RyanVM UTC-5] from [comment #31](/show_bug.cgi?id=932496#c31 "RESOLVED FIXED - ObexBase.cpp unsafe pointer increment"))
> (In reply to Eric Chou [:ericchou] [:echou] from [comment #29](/show_bug.cgi?id=932496#c29 "RESOLVED FIXED - ObexBase.cpp unsafe pointer increment"))
> > Is there any way I can run try based on a specific branch like b2g18 or
> > b2g26 by myself to save your time?
>
> You can push to Try on top of any branch. It doesn't always work well
> because it assumes a trunk-like config, but it generally is OK to at least
> say it builds.
Yeah, I know what it would be looked like. Thanks, Ryan.

|  | [Preeti Raghunath(:Preeti)](/user_profile?user_id=474545) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=932496#a7340406_474545)• 11 years ago |

[Attachment #8362358](/attachment.cgi?id=8362358&action=edit "patch 1: final: patch for b2g18, r=gyeh") -
Flags: approval-mozilla-b2g18? → approval-mozilla-b2g18+

|  | [Preeti Raghunath(:Preeti)](/user_profile?user_id=474545) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=932496#a7340425_474545)• 11 years ago |

[Attachment #8351307](/attachment.cgi?id=8351307&action=edit "patch 1: final: patch for b2g26, r=gyeh") -
Flags: approval-mozilla-b2g26? → approval-mozilla-b2g26+

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 34](/show_bug.cgi?id=932496#c34)• 11 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-b2g26_v1_2/rev/19df11134ed4>
<https://hg.mozilla.org/releases/mozilla-b2g18/rev/5b69cc75ecbe>
[status-b2g18](/buglist.cgi?f1=cf_status_b2g18&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=fixed)
[status-b2g-v1.1hd](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=equals&v1=affected)
[status-b2g-v1.2](/buglist.cgi?f1=cf_status_b2g_1_2&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=fixed)
[status-b2g-v1.3](/buglist.cgi?f1=cf_status_b2g_1_3&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=fixed)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 35](/show_bug.cgi?id=932496#c35)• 11 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-b2g18_v1_1_0_hd/rev/5b69cc75ecbe>
[status-b2g-v1.1hd](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=equals&v1=fixed)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=932496#a10902198_280903)• 11 years ago |

Whiteboard: [adv-main28+]

|  | [Sylvestre Ledru [:Sylvestre]](/user_profile?user_id=495955) |  |
| --- | --- | --- |
| [Comment 36](/show_bug.cgi?id=932496#c36)• 11 years ago |
|  | |

Does it impact also ESR24?

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Comment 37](/show_bug.cgi?id=932496#c37)• 11 years ago |
|  | |

No, this is some kind of Bluetooth thing which doesn't affect desktop.
[status-firefox-esr24](/buglist.cgi?f1=cf_status_firefox_esr24&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=unaffected)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=932496#a11774661_75935)• 11 years ago |

[status-b2g-v1.3T](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=fixed)
[status-b2g-v1.4](/buglist.cgi?f1=cf_status_b2g_1_4&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=unaffected)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=932496#a41848149_1689)• 10 years ago |

Group: core-security
You need to [log in](/show_bug.cgi?id=932496&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Eric Chou [:ericchou] [:echou]](/user_profile?user_id=434302)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from blog.mozilla.org_a1905f2a_20250126_044953.html ===

[Skip to content](#content)

[Mozilla](https://blog.mozilla.org/en/)

![search](https://blog.mozilla.org/wp-content/themes/foxtail/assets/images/icons/search.svg)

* [Internet Culture](https://blog.mozilla.org/en/category/internet-culture/)
  + [Deep Dives](https://blog.mozilla.org/en/category/internet-culture/deep-dives/)
  + [Mozilla Explains](https://blog.mozilla.org/en/category/internet-culture/mozilla-explains/)
  + [Interviews](https://blog.mozilla.org/en/category/internet-culture/interviews/)
  + [Videos](https://blog.mozilla.org/en/category/videos/)
* [Privacy & Security](https://blog.mozilla.org/en/category/privacy-security/)
* [Products](https://blog.mozilla.org/en/category/products/)
  + [Firefox](https://blog.mozilla.org/en/category/products/firefox/)
  + [Pocket](https://blog.mozilla.org/en/category/products/pocket/)
  + [Mozilla VPN](https://blog.mozilla.org/en/category/products/mozilla-vpn/)
* [Mozilla](https://blog.mozilla.org/en/category/mozilla/)
  + [News](https://blog.mozilla.org/en/category/mozilla/news/)
  + [Internet Policy](https://blog.mozilla.org/en/category/mozilla/internet-policy/)
  + [Leadership](https://blog.mozilla.org/en/category/mozilla/leadership/)
    - [Mitchell Baker, CEO](https://blog.mozilla.org/en/author/mitchellmozillacom/)
    - [Mark Surman, ED Foundation](https://blog.mozilla.org/en/author/markmozillafoundation-org/)
    - [Eric Rescorla, Firefox CTO](https://blog.mozilla.org/en/author/ekrmozilla-com/)

[Download Firefox](https://www.mozilla.org/firefox/new/?utm_source=blog.mozilla.org&utm_medium=referral&utm_campaign=blog-nav)

![search](https://blog.mozilla.org/wp-content/themes/foxtail/assets/images/icons/search.svg)

#### Search

Search for:

![](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2019/01/mozilla-logo-bw-rgb.png)
## News

Official announcements and press releases

[![Room filled with people listening to a speaker on stage. Demo Day visual image in the background.](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/12/Demo_Day_Blog_Header_-1-800x800.jpg)
Mozilla
## Mozilla Builders: Celebrating community-driven innovation in AI

Read More](https://blog.mozilla.org/en/mozilla/mozilla-builders-demo-day/)

[![The Mozilla logo in green on a black background](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/12/logo-lockup-video-poster-800x800.png)
Mozilla
## Mozilla welcomes new executive team members

Read More](https://blog.mozilla.org/en/mozilla/new-executives/)

[![Decorative image of wrapped gifts in front of an iphone](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2023/11/moz_header_holiday_firefox-phone-gifts_blue-03.png-800x800.png)
Products
## Shopping for everyone? We’ve got you covered with the Fakespot Holiday Gift Guide 2024

Read More](https://blog.mozilla.org/en/products/shopping-for-everyone-weve-got-you-covered-with-the-fakespot-holiday-gift-guide-2024/)

[![Text: Mozilla Builders](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/06/Blog-16_9-1920x1080-1-800x800.png)
Mozilla
## 14 AI projects to watch: Mozilla’s first Builders Accelerator cohort kicks off

Read More](https://blog.mozilla.org/en/mozilla/14-ai-projects-to-watch-mozillas-first-builders-accelerator-cohort-kicks-off/)

[![A check mark next to the text "Fakespot."](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2023/07/Fakespot_ProductBlog-2-800x800.jpg)
News
## Fakespot’s guide to trending back-to-school products

Read More](https://blog.mozilla.org/en/mozilla/news/fakespots-guide-to-trending-back-to-school-products/)

[![](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/06/IG_Highlights_Icon-800x800.png)
Mozilla
## BAFTA Award-Winner Siobhán McSweeney to host Mozilla’s 2nd Annual Rise25 Awards in Dublin, Ireland on Aug. 13

Read More](https://blog.mozilla.org/en/mozilla/bafta-award-winner-siobhan-mcsweeney-to-host-mozillas-2nd-annual-rise25-awards-in-dublin-ireland-on-august-13/)

[![](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/05/fx_website_meta-image_tips-tricks_alt-04-1-800x800.webp)
Mozilla
## Here’s what we’re working on in Firefox

Read More](https://blog.mozilla.org/en/mozilla/heres-what-were-working-on-in-firefox/)

[![A check mark next to the text "Fakespot."](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2023/07/Fakespot_ProductBlog-2-800x800.jpg)
News
## Fakespot reveals the product categories with the most and least reliable product reviews

Read More](https://blog.mozilla.org/en/mozilla/news/fakespot-reveals-the-product-categories-with-the-most-and-least-reliable-product-reviews-for-summer-and-back-to-school-shopping/)

[![A dark blue speech bubble with horizontal purple and red bars on a pink background.](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2020/03/fx_blog_header_announcements_001_1920x1080-800x800.jpg)
Firefox
## Engaging with our Firefox community: Highlights from our recent AMA

Read More](https://blog.mozilla.org/en/products/firefox/engaging-with-our-firefox-community-highlights-from-our-recent-ama/)

[![](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/06/IG_Highlights_Icon-800x800.png)
Mozilla
## Mozilla announces finalists for the 2nd annual Rise25 Awards

Read More](https://blog.mozilla.org/en/mozilla/mozilla-announces-finalists-for-the-2nd-annual-rise25-awards/)

[![Mozilla and Anonym logos](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/06/blog_1200x800_v2-800x800.png)
Mozilla
## Introducing Anonym: Raising the bar for privacy-preserving digital advertising

Read More](https://blog.mozilla.org/en/mozilla/mozilla-anonym-raising-the-bar-for-privacy-preserving-digital-advertising/)

[![logo - zero with a diagonal line through it, and the letters D, I, N](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/06/odintbanner-500x500.png)
Mozilla
## Keeping GenAI technologies secure is a shared responsibility

Read More](https://blog.mozilla.org/en/mozilla/keeping-genai-technologies-secure-is-a-shared-responsibility/)

1
[2](https://blog.mozilla.org/en/category/mozilla/news/page/2?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=compa)
[3](https://blog.mozilla.org/en/category/mozilla/news/page/3?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=compa)
…
[24](https://blog.mozilla.org/en/category/mozilla/news/page/24?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=compa)
[next](https://blog.mozilla.org/en/category/mozilla/news/page/2?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=compa)

![newsletter](https://blog.mozilla.org/wp-content/themes/foxtail/assets/images/newsletter.png)

### Keep up with all things Firefox

Get how-tos, advice and news to make your Firefox experience work best for you.

Your e-mail address

Country
- select -
Afghanistan
Akrotiri
Albania
Algeria
American Samoa
Andorra
Angola
Anguilla
Antarctica
Antigua and Barbuda
Argentina
Armenia
Aruba
Ashmore and Cartier Islands
Australia
Austria
Azerbaijan
Bahamas, The
Bahrain
Baker Island
Bangladesh
Barbados
Bassas da India
Belarus
Belgium
Belize
Benin
Bermuda
Bhutan
Bolivia
Bonaire, Sint Eustatius, and Saba
Bosnia and Herzegovina
Botswana
Bouvet Island
Brazil
British Indian Ocean Territory
Brunei
Bulgaria
Burkina Faso
Burma
Burundi
Cabo Verde
Cambodia
Cameroon
Canada
Cayman Islands
Central African Republic
Chad
Chile
China
Christmas Island
Clipperton Island
Cocos (Keeling) Islands
Colombia
Comoros
Congo (Brazzaville)
Congo (Kinshasa)
Cook Islands
Coral Sea Islands
Costa Rica
Croatia
Cuba
Curaçao
Cyprus
Czech Republic
Côte d’Ivoire
Denmark
Dhekelia
Diego Garcia
Djibouti
Dominica
Dominican Republic
Ecuador
Egypt
El Salvador
Equatorial Guinea
Eritrea
Estonia
Ethiopia
Europa Island
Falkland Islands (Islas Malvinas)
Faroe Islands
Fiji
Finland
France
French Guiana
French Polynesia
French Southern and Antarctic Lands
Gabon
Gambia, The
Gaza Strip
Georgia
Germany
Ghana
Gibraltar
Glorioso Islands
Greece
Greenland
Grenada
Guadeloupe
Guam
Guatemala
Guernsey
Guinea
Guinea-Bissau
Guyana
Haiti
Heard Island and McDonald Islands
Honduras
Hong Kong
Howland Island
Hungary
Iceland
India
Indonesia
Iran
Iraq
Ireland
Isle of Man
Israel
Italy
Jamaica
Jan Mayen
Japan
Jarvis Island
Jersey
Johnston Atoll
Jordan
Juan de Nova Island
Kazakhstan
Kenya
Kingman Reef
Kiribati
Korea, North
Korea, South
Kosovo
Kuwait
Kyrgyzstan
Laos
Latvia
Lebanon
Lesotho
Liberia
Libya
Liechtenstein
Lithuania
Luxembourg
Macau
Macedonia
Madagascar
Malawi
Malaysia
Maldives
Mali
Malta
Marshall Islands
Martinique
Mauritania
Mauritius
Mayotte
Mexico
Micronesia, Federated States of
Midway Islands
Moldova
Monaco
Mongolia
Montenegro
Montserrat
Morocco
Mozambique
Namibia
Nauru
Navassa Island
Nepal
Netherlands
New Caledonia
New Zealand
Nicaragua
Niger
Nigeria
Niue
Norfolk Island
Northern Mariana Islands
Norway
Oman
Pakistan
Palau
Palmyra Atoll
Panama
Papua New Guinea
Paracel Islands
Paraguay
Peru
Philippines
Pitcairn Islands
Poland
Portugal
Puerto Rico
Qatar
Reunion
Romania
Russia
Rwanda
Saint Barthelemy
Saint Helena, Ascension, and Tristan da Cunha
Saint Kitts and Nevis
Saint Lucia
Saint Martin
Saint Pierre and Miquelon
Saint Vincent and the Grenadines
Samoa
San Marino
Sao Tome and Principe
Saudi Arabia
Senegal
Serbia
Seychelles
Sierra Leone
Singapore
Sint Maarten
Slovakia
Slovenia
Solomon Islands
Somalia
South Africa
South Georgia and South Sandwich Islands
South Sudan
Spain
Spratly Islands
Sri Lanka
Sudan
Suriname
Svalbard
Swaziland
Sweden
Switzerland
Syria
Taiwan
Tajikistan
Tanzania
Thailand
Timor-Leste
Togo
Tokelau
Tonga
Trinidad and Tobago
Tromelin Island
Tunisia
Turkey
Turkmenistan
Turks and Caicos Islands
Tuvalu
Uganda
Ukraine
United Arab Emirates
United Kingdom
United States
Uruguay
Uzbekistan
Vanuatu
Vatican City
Venezuela
Vietnam
Virgin Islands, British
Virgin Islands, U.S.
Wake Island
Wallis and Futuna
West Bank
Western Sahara
Yemen
Zambia
Zimbabwe

Language
English
Bahasa Indonesia
Deutsch
Español
Français
Polski
Português
Русский
正體中文

Format

 HTML

 Text

I’m okay with Mozilla handling my info as explained in this [Privacy Policy](https://www.mozilla.org/privacy/).

Sign up now
We will only send you
Mozilla-related information.

## Thanks!

If you haven’t previously confirmed a subscription to a Mozilla-related newsletter you may have to do so. Please check your inbox or your spam filter for an e-mail from us.

[Mozilla](https://www.mozilla.org/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)

##### Mozilla

* [About](https://www.mozilla.org/about/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Contact Us](https://www.mozilla.org/contact/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Donate](https://donate.mozilla.org/?presets=50,30,20,10&amount=30¤cy=usd&utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)

##### Firefox

* [Download Firefox](https://www.mozilla.org/firefox/new/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Desktop](https://www.mozilla.org/firefox/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Mobile](https://www.mozilla.org/firefox/mobile/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Features](https://www.mozilla.org/firefox/features/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Beta, Nightly, Developer Edition](https://www.mozilla.org/firefox/channel/desktop/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)

##### Resources

* [Privacy Hub](https://www.mozilla.org/privacy/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Browser Comparison](https://www.mozilla.org/firefox/browsers/compare/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Brand Standards](https://mozilla.design/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)

##### Social

Follow @Firefox

* [Twitter (@mozilla)](https://twitter.com/firefox)
* [Instagram (@mozilla)](https://www.instagram.com/firefox/)
* [YouTube (@firefoxchannel)](https://www.youtube.com/user/firefoxchannel)

Follow @Mozilla

* [Twitter (@mozilla)](https://twitter.com/mozilla)
* [Instagram (@mozilla)](https://www.instagram.com/mozilla/)

* [Website Privacy Notice](https://www.mozilla.org/privacy/websites/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Legal](https://www.mozilla.org/about/legal/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)



=== Content from bugzilla.mozilla.org_6290e660_20250125_003636.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/627295)
* [XML](/show_bug.cgi?ctype=xml&id=627295)

Closed
[Bug 627295](/show_bug.cgi?id=627295)

Opened 14 years ago
Closed 11 years ago

# UMR [@ nsSVGGlyphFrame::PaintSVG] [@ \_cairo\_gstate\_stroke]

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

UMR [@ nsSVGGlyphFrame::PaintSVG] [@ \_cairo\_gstate\_stroke]

## Categories

### (Core :: SVG, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=SVG#SVG)

SVG
▾

Core :: SVG

Issues with the layout or rendering of SVG content and interacting with the SVG DOM.

Example bugs:

* SVG marker can not be clipped with clip-path
* x position adjustments of SVG vertical text on a path moves in the wrong direction

Specifications covered:

* SVG

[See Open Bugs in This Component](/buglist.cgi?product=Core&component=SVG&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=SVG&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=SVG)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

x86\_64

Linux

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

normal

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla28

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Webcompat Score | --- |
| --- | --- |
| a11y-review | --- |
| Accessibility Severity | --- |
| Performance Impact | --- |
| Webcompat Priority | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox27 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=wontfix) |
| firefox28 | --- | [fixed](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=fixed) |
| firefox29 | --- | [fixed](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=fixed) |
| firefox-esr24 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=wontfix) |
| b2g18 | --- | [wontfix](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=wontfix) |
| b2g-v1.2 | --- | [wontfix](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=wontfix) |
| b2g-v1.3 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=fixed) |
| b2g-v1.3T | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=fixed) |
| b2g-v1.4 | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=unaffected) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox27 |  | wontfix |
| firefox28 |  | fixed |
| firefox29 |  | fixed |
| firefox-esr24 |  | wontfix |
| b2g18 |  | wontfix |
| b2g-v1.2 |  | wontfix |
| b2g-v1.3 |  | fixed |
| b2g-v1.3T |  | fixed |
| b2g-v1.4 |  | unaffected |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: jruderman, Assigned: jwatt)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](extensions/Gravatar/web/default.jpg)  [jwatt](/user_profile?user_id=32767)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/d2dc9227eafcd0ec5ba3712ee4f19b75?d=mm&size=40)  [jruderman](/user_profile?user_id=11608)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](extensions/Gravatar/web/default.jpg)  [jwatt](/user_profile?user_id=32767)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

9 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

[889736](/show_bug.cgi?id=889736 "RESOLVED FIXED - remove old SVG text frame classes")

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

---

Dependency [tree](/showdependencytree.cgi?id=627295&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=627295)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Keywords: sec-low, testcase, valgrind, Whiteboard: [adv-main28+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[sec-low](/buglist.cgi?keywords=sec-low&resolution=---),
[testcase](/buglist.cgi?keywords=testcase&resolution=---),
[valgrind](/buglist.cgi?keywords=valgrind&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[adv-main28+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [jruderman](/user_profile?user_id=11608) | [in-testsuite](#c0 "14 years ago") | + |
| --- | --- | --- |
| [jruderman](/user_profile?user_id=11608) | in-testsuite | + |
| --- | --- | --- |
|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (1 file)

| [valgrind complaint](/attachment.cgi?id=505353)  [14 years ago](#c0)  [Jesse Ruderman](/user_profile?user_id=11608)   6.79 KB, text/plain |  | [Details](/attachment.cgi?id=505353&action=edit) |
| --- | --- | --- |

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Jesse Ruderman](/user_profile?user_id=11608)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=627295#c0)• 14 years ago |
|  | |

Attached file
[valgrind complaint](attachment.cgi?id=505353)
— [Details](attachment.cgi?id=505353&action=edit)

gfx/tests/crashtests/385228-1.svg triggers a UMR (use of uninitialized memory).
Uninitialized memory caused by the stack allocation of nsSVGGlyphFrame::PaintSVG is used in \_cairo\_gstate\_stroke.Flags: in-testsuite+

|  | [Robert Longson [:longsonr]](/user_profile?user_id=218550) |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=627295#c1)• 14 years ago |
|  | |

cairo-gstate.c:1069 on my trunk build is:
if (gstate->stroke\_style.line\_width <= 0.0)
Now nsSVGGlyphFrame::PaintSVG calls SetupCairoStroke(gfx) followed by gfx->Stroke() which ends up at the line above.
nsSVGGeometryFrame::SetupCairoStroke(gfx) calls nsSVGGeometryFrame::SetupCairoStroke which calls SetupCairoStrokeGeometry which calls aContext->SetLineWidth(width) (unless the width is <=0 which it appears not to be in this case according to my debugging).
aContext->SetLineWidth(width) eventually ends up in \_cairo\_gstate\_set\_line\_width which is:
gstate->stroke\_style.line\_width = width;
So I don't understand where the UMR is coming from.
Does something different to the above sequence of events happen on Linux?

|  | [Robert Longson [:longsonr]](/user_profile?user_id=218550) |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=627295#c2)• 14 years ago |
|  | |

See [bug 658499](/show_bug.cgi?id=658499 "RESOLVED FIXED - Uninitialised value use in _cairo_gstate_stroke") too.

|  | [Curtis Koenig [:curtisk-use curtis.koenig+bzATgmail.com]]](/user_profile?user_id=406847) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=627295#a40564557_406847)• 13 years ago |

Keywords: [sec-low](/buglist.cgi?keywords=sec-low&resolution=---)

|  | [Robert Longson [:longsonr]](/user_profile?user_id=218550) |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=627295#c3)• 11 years ago |
|  | |

[bug 889736](/show_bug.cgi?id=889736 "RESOLVED FIXED - remove old SVG text frame classes") removed nsSVGGlyphFrameStatus: NEW → RESOLVEDClosed: 11 years agoResolution: --- → FIXED

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=627295#a93092446_75935)• 11 years ago |

Assignee: nobody → jwatt
[status-firefox28](/buglist.cgi?f1=cf_status_firefox28&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=fixed)Depends on: [889736](/show_bug.cgi?id=889736 "RESOLVED FIXED - remove old SVG text frame classes")Target Milestone: --- → mozilla28

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=627295#c4)• 11 years ago |
|  | |

Did this only affect Firefox 28?

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=627295#c5)• 11 years ago |
|  | |

Given it was filed three years ago I'd say "no".
[Bug 889736](/show_bug.cgi?id=889736 "RESOLVED FIXED - remove old SVG text frame classes") isn't something we'd back-port and we don't need a band-aide patch for this low severity bug. A UMR of a stack-allocated variable /can/ be exploited, but you'd usually want it to be something like a length variable or a pointer and not a drawing dimension.
[status-b2g18](/buglist.cgi?f1=cf_status_b2g18&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=wontfix)
[status-b2g-v1.2](/buglist.cgi?f1=cf_status_b2g_1_2&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=wontfix)
[status-b2g-v1.3](/buglist.cgi?f1=cf_status_b2g_1_3&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=fixed)
[status-firefox27](/buglist.cgi?f1=cf_status_firefox27&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_firefox27&o1=equals&v1=wontfix)
[status-firefox29](/buglist.cgi?f1=cf_status_firefox29&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=fixed)
[status-firefox-esr24](/buglist.cgi?f1=cf_status_firefox_esr24&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=wontfix)Whiteboard: [sg:low?]

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=627295#a98475521_280903)• 11 years ago |

Whiteboard: [adv-main28+]

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=627295#a99348774_75935)• 11 years ago |

[status-b2g-v1.3T](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=fixed)
[status-b2g-v1.4](/buglist.cgi?f1=cf_status_b2g_1_4&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=unaffected)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=627295#a129422304_1689)• 10 years ago |

Group: core-security
You need to [log in](/show_bug.cgi?id=627295&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Jesse Ruderman](/user_profile?user_id=11608)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review


