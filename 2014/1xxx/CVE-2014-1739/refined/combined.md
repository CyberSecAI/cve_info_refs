=== Content from speirofr.appspot.com_d1e2d0f2_20250126_024552.html ===


* [**Salva PeirÃ³**](https://speirofr.appspot.com "Salva PeirÃ³ Software Engineer")
* [Profile](/#salva-peiro)
* [Education](/#education)
* [Publications](/#publications)
* [Projects](/#projects-with-active-participation-most-relevant)
* [Archives](/archives.html)

# [CVE-2014-1739: Kernel Infoleak vulnerability in media\_enum\_entities()](https://speirofr.appspot.com/cve-2014-1739-kernel-infoleak-vulnerability-in-media_enum_entities.html)

by [speiro](https://speirofr.appspot.com/author/speiro/index.html) -

Apr 28, 2014

-
[CVE-2014-1739](https://speirofr.appspot.com/tag/cve-2014-1739/index.html), [security](https://speirofr.appspot.com/tag/security/index.html), [kernel](https://speirofr.appspot.com/tag/kernel/index.html), [infoleak](https://speirofr.appspot.com/tag/infoleak/index.html),

# Summary

| **CVE** | [CVE-2014-1739](http://web.nvd.nist.gov/view/vuln/search-results?query=CVE-2014-1739) |
| --- | --- |
| **Author** | [Salva PeirÃ³](http://speirofr.appspot.com) |
| **Date** | April 2014 - Discovery of the vulnerability. |
| **Impact** | The vulnerability discloses 200 bytes of kernel process stack. |
| **Affected Versions** | From linux-2.6.38 to linux-3.15-rc3 |
| **Bug Timespan** | 3 years: 2011-03-23 to 2014-04-29 commit [1651333b](https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/commit/drivers/media/media-device.c?id=1651333b09743887bc2dd3d158a11853a2be3fe7) |

# Description

During a code review of the kernel sources we found an infoleak vulnerability in the
ioctl `media_enum_entities()` that allows to disclose 200 bytes the kernel process' stack.
The vulnerability is exploitable on versions up to `linux-3.15-rc3` by local
users with read access to `/dev/media0`.
Linux distributions ship with `chmod â¦`

[more ...](https://speirofr.appspot.com/cve-2014-1739-kernel-infoleak-vulnerability-in-media_enum_entities.html)

---

Page 1 / 1

## Categories

* [CVEs](https://speirofr.appspot.com/category/cves/index.html)
* [Infoleaks](https://speirofr.appspot.com/category/infoleaks/index.html)
* [Learning](https://speirofr.appspot.com/category/learning/index.html)
* [Techniques](https://speirofr.appspot.com/category/techniques/index.html)

## Activity

* [SPADV-2018-01](/files/advisory/SPADV-2018-01.md)
* [CVE-2016-3178](/files/advisory/SPADV-2016-02.md)
* [CVE-2015-7885](/tag/cve-2015-7885/)
* [CVE-2015-7884](/tag/cve-2015-7884/)
* [CVE-2014-1739](/tag/cve-2014-1739/)
* [CVE-2014-1446](/tag/cve-2014-1446/)
* [CVE-2014-1445](/tag/cve-2014-1445/)

## Contact

* [Linkedin](https://www.linkedin.com/in/speiro)
* [ResearchGate](https://www.researchgate.net/profile/Salva_Peiro)
* [Atom feed](https://speirofr.appspot.com/feeds/atom.xml)



=== Content from speirofr.appspot.com_753bcf75_20250126_024554.html ===


* [**Salva PeirÃ³**](https://speirofr.appspot.com "Salva PeirÃ³ Software Engineer")
* [Profile](/#salva-peiro)
* [Education](/#education)
* [Publications](/#publications)
* [Projects](/#projects-with-active-participation-most-relevant)
* [Archives](/archives.html)

# [CVE-2015-7884: Kernel Infoleak vulnerability in vivid\_fb\_ioctl()](https://speirofr.appspot.com/cve-2015-7884-kernel-infoleak-vulnerability-in-vivid_fb_ioctl.html)

by [speiro](https://speirofr.appspot.com/author/speiro/index.html) -

Oct 22, 2015

-
[CVE-2015-7884](https://speirofr.appspot.com/tag/cve-2015-7884/index.html), [security](https://speirofr.appspot.com/tag/security/index.html), [kernel](https://speirofr.appspot.com/tag/kernel/index.html), [infoleak](https://speirofr.appspot.com/tag/infoleak/index.html),

# Summary

| **CVE** | [CVE-2015-7884](http://web.nvd.nist.gov/view/vuln/search-results?query=CVE-2015-7884) |
| --- | --- |
| **Author** | [Salva PeirÃ³](http://speirofr.appspot.com) |
| **Date** | October 2015 - Discovery of the vulnerability. |
| **Impact** | The vulnerability discloses 16 bytes of kernel process stack. |
| **Affected Versions** | From linux-3.17.0-rc1 to linux-4.3-rc6 |
| **Bug Timespan** | 1 year: from 2014 to 2015 commit [ad4e02d5081d9da38b5b91886e5fa71f0505d607](http://git.kernel.org/cgit/linux/kernel/git/next/linux-next.git/commit/?id=ad4e02d5081d9da38b5b91886e5fa71f0505d607) |
| **Patch fix** | commit [eda98796aff0d9bf41094b06811f5def3b4c333c](http://git.kernel.org/cgit/linux/kernel/git/next/linux-next.git/commit/?id=eda98796aff0d9bf41094b06811f5def3b4c333c) |

# Description

The vivid\_fb\_ioctl() code fails to initialize the 16 reserved bytes of
struct fb\_vblank after the ->hcount member. Add an explicit
memset(0) before filling the structure to avoid the info leak.

# The patch fixing the Infoleak

After verification the patch that fixes the vulnerability
has been â¦

[more ...](https://speirofr.appspot.com/cve-2015-7884-kernel-infoleak-vulnerability-in-vivid_fb_ioctl.html)

---

# [CVE-2015-7885: Kernel Infoleak vulnerability in dgnc\_mgmt\_ioctl()](https://speirofr.appspot.com/cve-2015-7885-kernel-infoleak-vulnerability-in-dgnc_mgmt_ioctl.html)

by [speiro](https://speirofr.appspot.com/author/speiro/index.html) -

Oct 22, 2015

-
[CVE-2015-7885](https://speirofr.appspot.com/tag/cve-2015-7885/index.html), [security](https://speirofr.appspot.com/tag/security/index.html), [kernel](https://speirofr.appspot.com/tag/kernel/index.html), [infoleak](https://speirofr.appspot.com/tag/infoleak/index.html),

# Summary

| **CVE** | [CVE-2015-7885](http://web.nvd.nist.gov/view/vuln/search-results?query=CVE-2015-7885) |
| --- | --- |
| **Author** | [Salva PeirÃ³](http://speirofr.appspot.com) |
| **Date** | October 2015 - Discovery of the vulnerability. |
| **Impact** | The vulnerability discloses 16 bytes of kernel process stack. |
| **Affected Versions** | From linux-3.11.0-rc3 to linux-4.3-rc6 |
| **Bug Timespan** | 2 years: from 2013 to 2015 commit [0b99d58902dd82fa51216eb8e0d6ddd8c43e90e4](http://git.kernel.org/cgit/linux/kernel/git/next/linux-next.git/commit/?id=0b99d58902dd82fa51216eb8e0d6ddd8c43e90e4) |
| **Patch fix** | commit [4b6184336ebb5c8dc1eae7f7ab46ee608a748b05](http://git.kernel.org/cgit/linux/kernel/git/next/linux-next.git/commit/?id=4b6184336ebb5c8dc1eae7f7ab46ee608a748b05) |

# Description

The dgnc\_mgmt\_ioctl() code fails to initialize the 16 reserved bytes of
struct digi\_dinfo after the ->dinfo\_nboards member. Add an explicit
memset(0) before filling the structure to avoid the info leak.

# The patch fixing the Infoleak

After verification the patch that fixes the vulnerability
has been â¦

[more ...](https://speirofr.appspot.com/cve-2015-7885-kernel-infoleak-vulnerability-in-dgnc_mgmt_ioctl.html)

---

# [Infoleaks](https://speirofr.appspot.com/infoleaks.html)

by [speiro](https://speirofr.appspot.com/author/speiro/index.html) -

May 31, 2014

-
[infoleak](https://speirofr.appspot.com/tag/infoleak/index.html), [vulnerabilities](https://speirofr.appspot.com/tag/vulnerabilities/index.html),

* [**Detecting Stack based kernel Information leaks**](/files/papers/ileak-detect.pdf).

  *S. PeirÃ³, M. MuÃ±oz, M. Masmano, and A. Crespo.*

  Computational Intelligence in Security for Information Systems (CISIS14).

  **Keywords** Security, Operating Systems, Information disclosure, Vulnerability, Static analysis.

  **Abstract**
  The Linux kernel has become widely adopted in the mobile devices and cloud services,
  parallel to this has grown its abuse and misuse by attackers and malicious users.
  This has increased attention paid to kernel security through the deployment of
  kernel protection mechanisms.
  Kernel based attacks require reliability, kernel attack reliability is achieved
  through the information gathering stage where the attacker is able to gather
  enough information â¦

[more ...](https://speirofr.appspot.com/infoleaks.html)

---

# [CVE-2014-1739: Kernel Infoleak vulnerability in media\_enum\_entities()](https://speirofr.appspot.com/cve-2014-1739-kernel-infoleak-vulnerability-in-media_enum_entities.html)

by [speiro](https://speirofr.appspot.com/author/speiro/index.html) -

Apr 28, 2014

-
[CVE-2014-1739](https://speirofr.appspot.com/tag/cve-2014-1739/index.html), [security](https://speirofr.appspot.com/tag/security/index.html), [kernel](https://speirofr.appspot.com/tag/kernel/index.html), [infoleak](https://speirofr.appspot.com/tag/infoleak/index.html),

# Summary

| **CVE** | [CVE-2014-1739](http://web.nvd.nist.gov/view/vuln/search-results?query=CVE-2014-1739) |
| --- | --- |
| **Author** | [Salva PeirÃ³](http://speirofr.appspot.com) |
| **Date** | April 2014 - Discovery of the vulnerability. |
| **Impact** | The vulnerability discloses 200 bytes of kernel process stack. |
| **Affected Versions** | From linux-2.6.38 to linux-3.15-rc3 |
| **Bug Timespan** | 3 years: 2011-03-23 to 2014-04-29 commit [1651333b](https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/commit/drivers/media/media-device.c?id=1651333b09743887bc2dd3d158a11853a2be3fe7) |

# Description

During a code review of the kernel sources we found an infoleak vulnerability in the
ioctl `media_enum_entities()` that allows to disclose 200 bytes the kernel process' stack.
The vulnerability is exploitable on versions up to `linux-3.15-rc3` by local
users with read access to `/dev/media0`.
Linux distributions ship with `chmod â¦`

[more ...](https://speirofr.appspot.com/cve-2014-1739-kernel-infoleak-vulnerability-in-media_enum_entities.html)

---

## Categories

* [CVEs](https://speirofr.appspot.com/category/cves/index.html)
* [Infoleaks](https://speirofr.appspot.com/category/infoleaks/index.html)
* [Learning](https://speirofr.appspot.com/category/learning/index.html)
* [Techniques](https://speirofr.appspot.com/category/techniques/index.html)

## Activity

* [SPADV-2018-01](/files/advisory/SPADV-2018-01.md)
* [CVE-2016-3178](/files/advisory/SPADV-2016-02.md)
* [CVE-2015-7885](/tag/cve-2015-7885/)
* [CVE-2015-7884](/tag/cve-2015-7884/)
* [CVE-2014-1739](/tag/cve-2014-1739/)
* [CVE-2014-1446](/tag/cve-2014-1446/)
* [CVE-2014-1445](/tag/cve-2014-1445/)

## Contact

* [Linkedin](https://www.linkedin.com/in/speiro)
* [ResearchGate](https://www.researchgate.net/profile/Salva_Peiro)
* [Atom feed](https://speirofr.appspot.com/feeds/atom.xml)



=== Content from github.com_b1a43125_20250124_182047.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ftorvalds%2Flinux%2Fcommit%2Fe6a623460e5fc960ac3ee9f946d3106233fd28d8)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ftorvalds%2Flinux%2Fcommit%2Fe6a623460e5fc960ac3ee9f946d3106233fd28d8)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=torvalds%2Flinux)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[torvalds](/torvalds)
/
**[linux](/torvalds/linux)**
Public

* [Notifications](/login?return_to=%2Ftorvalds%2Flinux) You must be signed in to change notification settings
* [Fork
  54.9k](/login?return_to=%2Ftorvalds%2Flinux)
* [Star
   186k](/login?return_to=%2Ftorvalds%2Flinux)

* [Code](/torvalds/linux)
* [Pull requests
  437](/torvalds/linux/pulls)
* [Actions](/torvalds/linux/actions)
* [Projects
  0](/torvalds/linux/projects)
* [Security](/torvalds/linux/security)
* [Insights](/torvalds/linux/pulse)

Additional navigation options

* [Code](/torvalds/linux)
* [Pull requests](/torvalds/linux/pulls)
* [Actions](/torvalds/linux/actions)
* [Projects](/torvalds/linux/projects)
* [Security](/torvalds/linux/security)
* [Insights](/torvalds/linux/pulse)

## Commit

[Permalink](/torvalds/linux/commit/e6a623460e5fc960ac3ee9f946d3106233fd28d8)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

[media] media-device: fix infoleak in ioctl media\_enum\_entities()

[Browse files](/torvalds/linux/tree/e6a623460e5fc960ac3ee9f946d3106233fd28d8)
Browse the repository at this point in the history

```
This fixes [CVE-2014-1739](https://github.com/advisories/GHSA-pqjc-5x4q-33rx "CVE-2014-1739").

Signed-off-by: Salva Peiró <speiro@ai2.upv.es>
Acked-by: Laurent Pinchart <laurent.pinchart@ideasonboard.com>
Cc: stable@vger.kernel.org
Signed-off-by: Mauro Carvalho Chehab <m.chehab@samsung.com>
```

* Loading branch information

[![@mchehab](https://avatars.githubusercontent.com/u/6566927?s=40&v=4)](/mchehab)

Salva Peiró
authored and
[mchehab](/torvalds/linux/commits?author=mchehab "View all commits by mchehab")
committed
May 1, 2014

1 parent
[8845cc6](/torvalds/linux/commit/8845cc6415ec28ef8d57b3fb81c75ef9bce69c5f)

commit e6a6234

Showing
**1 changed file**
with
**1 addition**
and
**0 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

## There are no files selected for viewing

1 change: 1 addition & 0 deletions

1
[drivers/media/media-device.c](#diff-ae866b4eb8c89467ca5025918eb01bf28fbe1dd94ef2ca920286cda91dbcf45a "drivers/media/media-device.c")

Show comments

[View file](/torvalds/linux/blob/e6a623460e5fc960ac3ee9f946d3106233fd28d8/drivers/media/media-device.c)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -93,6 +93,7 @@ static long media\_device\_enum\_entities(struct media\_device \*mdev, |
|  |  | struct media\_entity \*ent; |
|  |  | struct media\_entity\_desc u\_ent; |
|  |  |  |
|  |  | memset(&u\_ent, 0, sizeof(u\_ent)); |
|  |  | if (copy\_from\_user(&u\_ent.id, &uent->id, sizeof(u\_ent.id))) |
|  |  | return -EFAULT; |
|  |  |  |
| Expand Down | |  |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `e6a6234`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ftorvalds%2Flinux%2Fcommit%2Fe6a623460e5fc960ac3ee9f946d3106233fd28d8) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from www.kernel.org_7dba81f7_20250124_182041.html ===
commit a1bc295d7a4be9425bbeecc005d0cd013eb46cea
Author: Greg Kroah-Hartman
Date: Sat Jun 7 13:24:43 2014 -0700
Linux 3.14.6
commit b1f9d594668d008cacd5679cfde675dcdb9f5f8f
Author: Thomas Gleixner
Date: Tue Jun 3 12:27:08 2014 +0000
futex: Make lookup\_pi\_state more robust
commit 54a217887a7b658e2650c3feff22756ab80c7339 upstream.
The current implementation of lookup\_pi\_state has ambigous handling of
the TID value 0 in the user space futex. We can get into the kernel
even if the TID value is 0, because either there is a stale waiters bit
or the owner died bit is set or we are called from the requeue\_pi path
or from user space just for fun.
The current code avoids an explicit sanity check for pid = 0 in case
that kernel internal state (waiters) are found for the user space
address. This can lead to state leakage and worse under some
circumstances.
Handle the cases explicit:
Waiter | pi\_state | pi->owner | uTID | uODIED | ?
[1] NULL | --- | --- | 0 | 0/1 | Valid
[2] NULL | --- | --- | >0 | 0/1 | Valid
[3] Found | NULL | -- | Any | 0/1 | Invalid
[4] Found | Found | NULL | 0 | 1 | Valid
[5] Found | Found | NULL | >0 | 1 | Invalid
[6] Found | Found | task | 0 | 1 | Valid
[7] Found | Found | NULL | Any | 0 | Invalid
[8] Found | Found | task | ==taskTID | 0/1 | Valid
[9] Found | Found | task | 0 | 0 | Invalid
[10] Found | Found | task | !=taskTID | 0/1 | Invalid
[1] Indicates that the kernel can acquire the futex atomically. We
came came here due to a stale FUTEX\_WAITERS/FUTEX\_OWNER\_DIED bit.
[2] Valid, if TID does not belong to a kernel thread. If no matching
thread is found then it indicates that the owner TID has died.
[3] Invalid. The waiter is queued on a non PI futex
[4] Valid state after exit\_robust\_list(), which sets the user space
value to FUTEX\_WAITERS | FUTEX\_OWNER\_DIED.
[5] The user space value got manipulated between exit\_robust\_list()
and exit\_pi\_state\_list()
[6] Valid state after exit\_pi\_state\_list() which sets the new owner in
the pi\_state but cannot access the user space value.
[7] pi\_state->owner can only be NULL when the OWNER\_DIED bit is set.
[8] Owner and user space value match
[9] There is no transient state which sets the user space TID to 0
except exit\_robust\_list(), but this is indicated by the
FUTEX\_OWNER\_DIED bit. See [4]
[10] There is no transient state which leaves owner and user space
TID out of sync.
Signed-off-by: Thomas Gleixner
Cc: Kees Cook
Cc: Will Drewry
Cc: Darren Hart
Signed-off-by: Linus Torvalds
Signed-off-by: Greg Kroah-Hartman
commit 19040c57ac6f39a6940c7c266bb80cee113d3a18
Author: Thomas Gleixner
Date: Tue Jun 3 12:27:07 2014 +0000
futex: Always cleanup owner tid in unlock\_pi
commit 13fbca4c6ecd96ec1a1cfa2e4f2ce191fe928a5e upstream.
If the owner died bit is set at futex\_unlock\_pi, we currently do not
cleanup the user space futex. So the owner TID of the current owner
(the unlocker) persists. That's observable inconsistant state,
especially when the ownership of the pi state got transferred.
Clean it up unconditionally.
Signed-off-by: Thomas Gleixner
Cc: Kees Cook
Cc: Will Drewry
Cc: Darren Hart
Signed-off-by: Linus Torvalds
Signed-off-by: Greg Kroah-Hartman
commit cae300d1bd7c591602725520aec185cc81d49547
Author: Thomas Gleixner
Date: Tue Jun 3 12:27:06 2014 +0000
futex: Validate atomic acquisition in futex\_lock\_pi\_atomic()
commit b3eaa9fc5cd0a4d74b18f6b8dc617aeaf1873270 upstream.
We need to protect the atomic acquisition in the kernel against rogue
user space which sets the user space futex to 0, so the kernel side
acquisition succeeds while there is existing state in the kernel
associated to the real owner.
Verify whether the futex has waiters associated with kernel state. If
it has, return -EINVAL. The state is corrupted already, so no point in
cleaning it up. Subsequent calls will fail as well. Not our problem.
[ tglx: Use futex\_top\_waiter() and explain why we do not need to try
restoring the already corrupted user space state. ]
Signed-off-by: Darren Hart
Cc: Kees Cook
Cc: Will Drewry
Signed-off-by: Thomas Gleixner
Signed-off-by: Linus Torvalds
Signed-off-by: Greg Kroah-Hartman
commit 1ab0607b48fdcbac787b073f845f2ef529d4e936
Author: Thomas Gleixner
Date: Tue Jun 3 12:27:06 2014 +0000
futex-prevent-requeue-pi-on-same-futex.patch futex: Forbid uaddr == uaddr2 in futex\_requeue(..., requeue\_pi=1)
commit e9c243a5a6de0be8e584c604d353412584b592f8 upstream.
If uaddr == uaddr2, then we have broken the rule of only requeueing from
a non-pi futex to a pi futex with this call. If we attempt this, then
dangling pointers may be left for rt\_waiter resulting in an exploitable
condition.
This change brings futex\_requeue() in line with futex\_wait\_requeue\_pi()
which performs the same check as per commit 6f7b0a2a5c0f ("futex: Forbid
uaddr == uaddr2 in futex\_wait\_requeue\_pi()")
[ tglx: Compare the resulting keys as well, as uaddrs might be
different depending on the mapping ]
Fixes CVE-2014-3153.
Reported-by: Pinkie Pie
Signed-off-by: Will Drewry
Signed-off-by: Kees Cook
Signed-off-by: Thomas Gleixner
Reviewed-by: Darren Hart
Signed-off-by: Linus Torvalds
Signed-off-by: Greg Kroah-Hartman
commit 3e32c277e17b859738f0d38a2e609ad926554ee9
Author: Sudeep Holla
Date: Fri May 9 17:37:44 2014 +0100
arm64: use cpu\_online\_mask when using forced irq\_set\_affinity
commit 601c942176d8ad8334118bddb747e3720bed24f8 upstream.
Commit 01f8fa4f01d8("genirq: Allow forcing cpu affinity of interrupts")
enabled the forced irq\_set\_affinity which previously refused to route an
interrupt to an offline cpu.
Commit ffde1de64012("irqchip: Gic: Support forced affinity setting")
implements this force logic and disables the cpu online check for GIC
interrupt controller.
When \_\_cpu\_disable calls migrate\_irqs, it disables the current cpu in
cpu\_online\_mask and uses forced irq\_set\_affinity to migrate the IRQs
away from the cpu but passes affinity mask with the cpu being offlined
also included in it.
When calling irq\_set\_affinity with force == true in a cpu hotplug path,
the caller must ensure that the cpu being offlined is not present in the
affinity mask or it may be selected as the target CPU, leading to the
interrupt not being migrated.
This patch uses cpu\_online\_mask when using forced irq\_set\_affinity so
that the IRQs are properly migrated away.
Signed-off-by: Sudeep Holla
Acked-by: Mark Rutland
Cc: Will Deacon
Signed-off-by: Catalin Marinas
Signed-off-by: Greg Kroah-Hartman
commit 3372ac6f0c1617a381f8a69ff1e7cc2e6751bdd3
Author: Guennadi Liakhovetski
Date: Sat Apr 26 12:51:31 2014 -0300
media: V4L2: fix VIDIOC\_CREATE\_BUFS in 64- / 32-bit compatibility mode
commit 97d9d23dda6f37d90aefeec4ed619d52df525382 upstream.
If a struct contains 64-bit fields, it is aligned on 64-bit boundaries
within containing structs in 64-bit compilations. This is the case with
struct v4l2\_window, which contains pointers and is embedded into struct
v4l2\_format, and that one is embedded into struct v4l2\_create\_buffers.
Unlike some other structs, used as a part of the kernel ABI as ioctl()
arguments, that are packed, these structs aren't packed. This isn't a
problem per se, but the ioctl-compat code for VIDIOC\_CREATE\_BUFS contains
a bug, that triggers in such 64-bit builds. That code wrongly assumes,
that in struct v4l2\_create\_buffers, struct v4l2\_format immediately follows
the \_\_u32 memory field, which in fact isn't the case. This bug wasn't
visible until now, because until recently hardly any applications used
this ioctl() and mostly embedded 32-bit only drivers implemented it. This
is changing now with addition of this ioctl() to some USB drivers, e.g.
UVC. This patch fixes the bug by copying parts of struct
v4l2\_create\_buffers separately.
Signed-off-by: Guennadi Liakhovetski
Acked-by: Laurent Pinchart
Signed-off-by: Mauro Carvalho Chehab
Signed-off-by: Greg Kroah-Hartman
commit d0c47e5d003514bef6b7be36a49a4c87058a732a
Author: Guennadi Liakhovetski
Date: Mon Apr 14 10:49:34 2014 -0300
media: V4L2: ov7670: fix a wrong index, potentially Oopsing the kernel from user-space
commit cfece5857ca51d1dcdb157017aba226f594e9dcf upstream.
Commit 75e2bdad8901a0b599e01a96229be922eef1e488 "ov7670: allow
configuration of image size, clock speed, and I/O method" uses a wrong
index to iterate an array. Apart from being wrong, it also uses an
unchecked value from user-space, which can cause access to unmapped
memory in the kernel, triggered by a normal desktop user with rights to
use V4L2 devices.
Signed-off-by: Guennadi Liakhovetski
Acked-by: Jonathan Corbet
Signed-off-by: Mauro Carvalho Chehab
Signed-off-by: Greg Kroah-Hartman
commit ca4a4d64a7b1c0d08067622c02ec6a276a4ebf7c
Author: Eyal Shapira
Date: Wed Jun 4 21:58:01 2014 +0300
iwlwifi: mvm: rs: clear per rate stats when aggregation changes
commit b804eeb6649d75caeccbeae9f5623fc7b8bdfdfa upstream.
The per rate stats should be cleared when aggregation state changes
to avoid making rate scale decisions based on throughput figures which
were collected prior to the aggregation state change and are now stale.
While at it make sure any clearing of the per rate stats will get logged.
Signed-off-by: Eyal Shapira
Signed-off-by: Emmanuel Grumbach
Signed-off-by: Greg Kroah-Hartman
commit 424048eb3ff12c2b8da830cb8827d5bec136f515
Author: Eliad Peller
Date: Wed Jun 4 21:58:00 2014 +0300
iwlwifi: add rs\_rate\_scale\_clear\_tbl\_windows helper function
commit 3ca71f603bb1a0f55e1ba24618ba45617bc36f70 upstream.
instead of duplicating the same loop multiple times,
use a new function for it.
this will be later used also for clearing other
windows in the table.
Signed-off-by: Eliad Peller
Signed-off-by: Emmanuel Grumbach
Signed-off-by: Greg Kroah-Hartman
commit f47fc3c1b48dd8fc7a0a591551454459eca0ca94
Author: Emmanuel Grumbach
Date: Sun May 18 19:05:23 2014 +0300
iwlwifi: mvm: disable beacon filtering
commit 7bacc782270ff7db3b9f29fa5d24ad2ee1e8e81d upstream.
This feature has been causing trouble - disable it for now.
Signed-off-by: Emmanuel Grumbach
Signed-off-by: Greg Kroah-Hartman
commit 24d0dd75ef19c885309cf06990267cd2cbf49fa4
Author: Antti Palosaari
Date: Thu Apr 10 21:18:16 2014 -0300
media: fc2580: fix tuning failure on 32-bit arch
commit 8845cc6415ec28ef8d57b3fb81c75ef9bce69c5f upstream.
There was some frequency calculation overflows which caused tuning
failure on 32-bit architecture. Use 64-bit numbers where needed in
order to avoid calculation overflows.
Thanks for the Finnish person, who asked remain anonymous, reporting,
testing and suggesting the fix.
Signed-off-by: Antti Palosaari
Signed-off-by: Mauro Carvalho Chehab
Signed-off-by: Greg Kroah-Hartman
commit c1a763c431dffca42b609be822a4e1ef4231c582
Author: Alex Williamson
Date: Tue Apr 22 10:08:40 2014 -0600
iommu/amd: Fix interrupt remapping for aliased devices
commit e028a9e6b8a637af09ac4114083280df4a7045f1 upstream.
An apparent cut and paste error prevents the correct flags from being
set on the alias device resulting in MSI on conventional PCI devices
failing to work. This also produces error events from the IOMMU like:
AMD-Vi: Event logged [INVALID\_DEVICE\_REQUEST device=00:14.4 address=0x000000fdf8000000 flags=0x0a00]
Where 14.4 is a PCIe-to-PCI bridge with a device behind it trying to
use MSI interrupts.
Signed-off-by: Alex Williamson
Signed-off-by: Joerg Roedel
Signed-off-by: Greg Kroah-Hartman
commit bcd5faf938fb061c4c02874a906b68c5642822f3
Author: Chunwei Chen
Date: Wed Apr 23 12:35:09 2014 +0800
libceph: fix corruption when using page\_count 0 page in rbd
commit 178eda29ca721842f2146378e73d43e0044c4166 upstream.
It has been reported that using ZFSonLinux on rbd will result in memory
corruption. The bug report can be found here:
https://github.com/zfsonlinux/spl/issues/241
http://tracker.ceph.com/issues/7790
The reason is that ZFS will send pages with page\_count 0 into rbd, which in
turns send them to tcp\_sendpage. However, tcp\_sendpage cannot deal with
page\_count 0, as it will do get\_page and put\_page, and erroneously free the
page.
This type of issue has been noted before, and handled in iscsi, drbd,
etc. So, rbd should also handle this. This fix address this issue by fall back
to slower sendmsg when page\_count 0 detected.
Cc: Sage Weil
Cc: Yehuda Sadeh
Signed-off-by: Chunwei Chen
Reviewed-by: Ilya Dryomov
Signed-off-by: Greg Kroah-Hartman
commit a03443f50794844b449d296d45557315208bec1e
Author: Geert Uytterhoeven
Date: Mon Apr 14 19:39:53 2014 +0200
spi: core: Ignore unsupported Dual/Quad Transfer Mode bits
commit 83596fbeb5d28e8cb8878786133945d4dc7c0090 upstream.
The availability of SPI Dual or Quad Transfer Mode as indicated by the
"spi-tx-bus-width" and "spi-rx-bus-width" properties in the device tree is
a hardware property of the SPI master, SPI slave, and board wiring. Hence
the SPI core should not reject an SPI slave because an SPI master driver
doesn't (yet) support Dual or Quad Transfer Mode.
Change the lack of Dual or Quad Transfer Mode support in the SPI master
driver from an error condition to a warning condition, and ignore the
unsupported mode bits, falling back to Single Transfer Mode, to avoid
breakages when running old kernels with new device trees.
Fixes: f477b7fb13df (spi: DUAL and QUAD support)
Signed-off-by: Geert Uytterhoeven
Signed-off-by: Mark Brown
Signed-off-by: Greg Kroah-Hartman
commit 26aa7dc4730b1931dc908790944ff618d98931f5
Author: Srivatsa S. Bhat
Date: Tue May 27 16:25:34 2014 +0530
powerpc, kexec: Fix "Processor X is stuck" issue during kexec from ST mode
commit 011e4b02f1da156ac7fea28a9da878f3c23af739 upstream.
If we try to perform a kexec when the machine is in ST (Single-Threaded) mode
(ppc64\_cpu --smt=off), the kexec operation doesn't succeed properly, and we
get the following messages during boot:
[ 0.089866] POWER8 performance monitor hardware support registered
[ 0.089985] power8-pmu: PMAO restore workaround active.
[ 5.095419] Processor 1 is stuck.
[ 10.097933] Processor 2 is stuck.
[ 15.100480] Processor 3 is stuck.
[ 20.102982] Processor 4 is stuck.
[ 25.105489] Processor 5 is stuck.
[ 30.108005] Processor 6 is stuck.
[ 35.110518] Processor 7 is stuck.
[ 40.113369] Processor 9 is stuck.
[ 45.115879] Processor 10 is stuck.
[ 50.118389] Processor 11 is stuck.
[ 55.120904] Processor 12 is stuck.
[ 60.123425] Processor 13 is stuck.
[ 65.125970] Processor 14 is stuck.
[ 70.128495] Processor 15 is stuck.
[ 75.131316] Processor 17 is stuck.
Note that only the sibling threads are stuck, while the primary threads (0, 8,
16 etc) boot just fine. Looking closer at the previous step of kexec, we observe
that kexec tries to wakeup (bring online) the sibling threads of all the cores,
before performing kexec:
[ 9464.131231] Starting new kernel
[ 9464.148507] kexec: Waking offline cpu 1.
[ 9464.148552] kexec: Waking offline cpu 2.
[ 9464.148600] kexec: Waking offline cpu 3.
[ 9464.148636] kexec: Waking offline cpu 4.
[ 9464.148671] kexec: Waking offline cpu 5.
[ 9464.148708] kexec: Waking offline cpu 6.
[ 9464.148743] kexec: Waking offline cpu 7.
[ 9464.148779] kexec: Waking offline cpu 9.
[ 9464.148815] kexec: Waking offline cpu 10.
[ 9464.148851] kexec: Waking offline cpu 11.
[ 9464.148887] kexec: Waking offline cpu 12.
[ 9464.148922] kexec: Waking offline cpu 13.
[ 9464.148958] kexec: Waking offline cpu 14.
[ 9464.148994] kexec: Waking offline cpu 15.
[ 9464.149030] kexec: Waking offline cpu 17.
Instrumenting this piece of code revealed that the cpu\_up() operation actually
fails with -EBUSY. Thus, only the primary threads of all the cores are online
during kexec, and hence this is a sure-shot receipe for disaster, as explained
in commit e8e5c2155b (powerpc/kexec: Fix orphaned offline CPUs across kexec),
as well as in the comment above wake\_offline\_cpus().
It turns out that cpu\_up() was returning -EBUSY because the variable
'cpu\_hotplug\_disabled' was set to 1; and this disabling of CPU hotplug was done
by migrate\_to\_reboot\_cpu() inside kernel\_kexec().
Now, migrate\_to\_reboot\_cpu() was originally written with the assumption that
any further code will not need to perform CPU hotplug, since we are anyway in
the reboot path. However, kexec is clearly not such a case, since we depend on
onlining CPUs, atleast on powerpc.
So re-enable cpu-hotplug after returning from migrate\_to\_reboot\_cpu() in the
kexec path, to fix this regression in kexec on powerpc.
Also, wrap the cpu\_up() in powerpc kexec code within a WARN\_ON(), so that we
can catch such issues more easily in the future.
Fixes: c97102ba963 (kexec: migrate to reboot cpu)
Signed-off-by: Srivatsa S. Bhat
Signed-off-by: Benjamin Herrenschmidt
Signed-off-by: Greg Kroah-Hartman
commit f7fb605a0215a7646f07f6618e40c2032b174680
Author: Guenter Roeck
Date: Thu May 15 09:33:42 2014 -0700
powerpc: Fix 64 bit builds with binutils 2.24
commit 7998eb3dc700aaf499f93f50b3d77da834ef9e1d upstream.
With binutils 2.24, various 64 bit builds fail with relocation errors
such as
arch/powerpc/kernel/built-in.o: In function `exc\_debug\_crit\_book3e':
(.text+0x165ee): relocation truncated to fit: R\_PPC64\_ADDR16\_HI
against symbol `interrupt\_base\_book3e' defined in .text section
in arch/powerpc/kernel/built-in.o
arch/powerpc/kernel/built-in.o: In function `exc\_debug\_crit\_book3e':
(.text+0x16602): relocation truncated to fit: R\_PPC64\_ADDR16\_HI
against symbol `interrupt\_end\_book3e' defined in .text section
in arch/powerpc/kernel/built-in.o
The assembler maintainer says:
I changed the ABI, something that had to be done but unfortunately
happens to break the booke kernel code. When building up a 64-bit
value with lis, ori, shl, oris, ori or similar sequences, you now
should use @high and @higha in place of @h and @ha. @h and @ha
(and their associated relocs R\_PPC64\_ADDR16\_HI and R\_PPC64\_ADDR16\_HA)
now report overflow if the value is out of 32-bit signed range.
ie. @h and @ha assume you're building a 32-bit value. This is needed
to report out-of-range -mcmodel=medium toc pointer offsets in @toc@h
and @toc@ha expressions, and for consistency I did the same for all
other @h and @ha relocs.
Replacing @h with @high in one strategic location fixes the relocation
errors. This has to be done conditionally since the assembler either
supports @h or @high but not both.
Signed-off-by: Guenter Roeck
Signed-off-by: Benjamin Herrenschmidt
Signed-off-by: Greg Kroah-Hartman
commit 0605993990f785c882924305f5383d9cb765e736
Author: Anton Blanchard
Date: Fri May 9 17:47:12 2014 +1000
powerpc: irq work racing with timer interrupt can result in timer interrupt hang
commit 8050936caf125fbe54111ba5e696b68a360556ba upstream.
I am seeing an issue where a CPU running perf eventually hangs.
Traces show timer interrupts happening every 4 seconds even
when a userspace task is running on the CPU. /proc/timer\_list
also shows pending hrtimers have not run in over an hour,
including the scheduler.
Looking closer, decrementers\_next\_tb is getting set to
0xffffffffffffffff, and at that point we will never take
a timer interrupt again.
In \_\_timer\_interrupt() we set decrementers\_next\_tb to
0xffffffffffffffff and rely on ->event\_handler to update it:
\*next\_tb = ~(u64)0;
if (evt->event\_handler)
evt->event\_handler(evt);
In this case ->event\_handler is hrtimer\_interrupt. This will eventually
call back through the clockevents code with the next event to be
programmed:
static int decrementer\_set\_next\_event(unsigned long evt,
struct clock\_event\_device \*dev)
{
/\* Don't adjust the decrementer if some irq work is pending \*/
if (test\_irq\_work\_pending())
return 0;
\_\_get\_cpu\_var(decrementers\_next\_tb) = get\_tb\_or\_rtc() + evt;
If irq work came in between these two points, we will return
before updating decrementers\_next\_tb and we never process a timer
interrupt again.
This looks to have been introduced by 0215f7d8c53f (powerpc: Fix races
with irq\_work). Fix it by removing the early exit and relying on
code later on in the function to force an early decrementer:
/\* We may have raced with new irq work \*/
if (test\_irq\_work\_pending())
set\_dec(1);
Signed-off-by: Anton Blanchard
Signed-off-by: Benjamin Herrenschmidt
Signed-off-by: Greg Kroah-Hartman
commit 6f73026dde44a785cc59697167b1f505c80377ea
Author: Gavin Shan
Date: Thu Apr 24 18:00:22 2014 +1000
powerpc/powernv: Reset root port in firmware
commit 372cf1244d7c271806b83b32b09a1c8b1b31b353 upstream.
Resetting root port has more stuff to do than that for PCIe switch
ports and we should have resetting root port done in firmware instead
of the kernel itself. The problem was introduced by commit 5b2e198e
("powerpc/powernv: Rework EEH reset").
Signed-off-by: Gavin Shan
Signed-off-by: Benjamin Herrenschmidt
Signed-off-by: Greg Kroah-Hartman
commit 2bf0e785c5c78bcdf1eaa7b6516240ab58cad25c
Author: Stephen Boyd
Date: Fri Apr 18 16:29:43 2014 -0700
clk: Fix slab corruption in clk\_unregister()
commit 874f224cc52d64c912087e68e3724be95ad80ee7 upstream.
When a clock is unregsitered, we iterate over the list of
children and reparent them to NULL (i.e. orphan list). While
iterating the list, we should use the safe iterators because the
children list for this clock is changing when we reparent the
children to NULL. Failure to iterate safely can lead to slab
corruption like this:
=============================================================================
BUG kmalloc-128 (Not tainted): Poison overwritten
-----------------------------------------------------------------------------
Disabling lock debugging due to kernel taint
INFO: 0xed0c4900-0xed0c4903. First byte 0x0 instead of 0x6b
INFO: Allocated in clk\_register+0x20/0x1bc age=297 cpu=2 pid=70
\_\_slab\_alloc.isra.39.constprop.42+0x410/0x454
kmem\_cache\_alloc\_trace+0x200/0x24c
clk\_register+0x20/0x1bc
devm\_clk\_register+0x34/0x68
0xbf0000f0
platform\_drv\_probe+0x18/0x48
driver\_probe\_device+0x94/0x360
\_\_driver\_attach+0x94/0x98
bus\_for\_each\_dev+0x54/0x88
bus\_add\_driver+0xe8/0x204
driver\_register+0x78/0xf4
do\_one\_initcall+0xc4/0x17c
load\_module+0x19ac/0x2294
SyS\_init\_module+0xa4/0x110
ret\_fast\_syscall+0x0/0x48
INFO: Freed in clk\_unregister+0xd4/0x140 age=23 cpu=2 pid=73
\_\_slab\_free+0x38/0x41c
clk\_unregister+0xd4/0x140
release\_nodes+0x164/0x1d8
\_\_device\_release\_driver+0x60/0xb0
driver\_detach+0xb4/0xb8
bus\_remove\_driver+0x5c/0xc4
SyS\_delete\_module+0x148/0x1d8
ret\_fast\_syscall+0x0/0x48
INFO: Slab 0xeec50b90 objects=25 used=0 fp=0xed0c5400 flags=0x4080
INFO: Object 0xed0c48c0 @offset=2240 fp=0xed0c4a00
Bytes b4 ed0c48b0: 5a 5a 5a 5a 5a 5a 5a 5a 5a 5a 5a 5a 5a 5a 5a 5a ZZZZZZZZZZZZZZZZ
Object ed0c48c0: 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b kkkkkkkkkkkkkkkk
Object ed0c48d0: 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b kkkkkkkkkkkkkkkk
Object ed0c48e0: 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b kkkkkkkkkkkkkkkk
Object ed0c48f0: 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b kkkkkkkkkkkkkkkk
Object ed0c4900: 00 00 00 00 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b ....kkkkkkkkkkkk
Object ed0c4910: 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b kkkkkkkkkkkkkkkk
Object ed0c4920: 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b kkkkkkkkkkkkkkkk
Object ed0c4930: 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b a5 kkkkkkkkkkkkkkk.
Redzone ed0c4940: bb bb bb bb ....
Padding ed0c49e8: 5a 5a 5a 5a 5a 5a 5a 5a 5a 5a 5a 5a 5a 5a 5a 5a ZZZZZZZZZZZZZZZZ
Padding ed0c49f8: 5a 5a 5a 5a 5a 5a 5a 5a ZZZZZZZZ
CPU: 3 PID: 75 Comm: mdev Tainted: G B 3.14.0-11033-g2054ba5ca781 #35
[] (unwind\_backtrace) from [] (show\_stack+0x10/0x14)
[] (show\_stack) from [] (dump\_stack+0x70/0xbc)
[] (dump\_stack) from [] (check\_bytes\_and\_report+0xbc/0x100)
[] (check\_bytes\_and\_report) from [] (check\_object+0x18c/0x218)
[] (check\_object) from [] (\_\_free\_slab+0x104/0x144)
[] (\_\_free\_slab) from [] (\_\_slab\_free+0x3dc/0x41c)
[] (\_\_slab\_free) from [] (load\_elf\_binary+0x88/0x12b4)
[] (load\_elf\_binary) from [] (search\_binary\_handler+0x78/0x18c)
[] (search\_binary\_handler) from [] (do\_execve+0x490/0x5dc)
[] (do\_execve) from [] (\_\_\_\_call\_usermodehelper+0x134/0x168)
[] (\_\_\_\_call\_usermodehelper) from [] (ret\_from\_fork+0x14/0x2c)
FIX kmalloc-128: Restoring 0xed0c4900-0xed0c4903=0x6b
Fixes: fcb0ee6a3d33 (clk: Implement clk\_unregister)
Cc: Jiada Wang
Cc: Sylwester Nawrocki
Cc: Kyungmin Park
Signed-off-by: Stephen Boyd
Signed-off-by: Mike Turquette
Signed-off-by: Greg Kroah-Hartman
commit 798ad2abc1b05842b7bd5292ff43055e4a767a64
Author: Stephen Boyd
Date: Fri Apr 18 16:29:42 2014 -0700
clk: Fix double free due to devm\_clk\_register()
commit 293ba3b4a4fd54891b900f2911d1a57e1ed4a843 upstream.
Now that clk\_unregister() frees the struct clk we're
unregistering we'll free memory twice: first we'll call kfree()
in \_\_clk\_release() with an address kmalloc doesn't know about and
second we'll call kfree() in the devres layer. Remove the
allocation of struct clk in devm\_clk\_register() and let
clk\_release() handle it. This fixes slab errors like:
=============================================================================
BUG kmalloc-128 (Not tainted): Invalid object pointer 0xed08e8d0
-----------------------------------------------------------------------------
Disabling lock debugging due to kernel taint
INFO: Slab 0xeec503f8 objects=25 used=15 fp=0xed08ea00 flags=0x4081
CPU: 2 PID: 73 Comm: rmmod Tainted: G B 3.14.0-11032-g526e9c764381 #34
[] (unwind\_backtrace) from [] (show\_stack+0x10/0x14)
[] (show\_stack) from [] (dump\_stack+0x70/0xbc)
[] (dump\_stack) from [] (slab\_err+0x74/0x84)
[] (slab\_err) from [] (free\_debug\_processing+0x2cc/0x31c)
[] (free\_debug\_processing) from [] (\_\_slab\_free+0x38/0x41c)
[] (\_\_slab\_free) from [] (clk\_unregister+0xd4/0x140)
[] (clk\_unregister) from [] (release\_nodes+0x164/0x1d8)
[] (release\_nodes) from [] (\_\_device\_release\_driver+0x60/0xb0)
[] (\_\_device\_release\_driver) from [] (driver\_detach+0xb4/0xb8)
[] (driver\_detach) from [] (bus\_remove\_driver+0x5c/0xc4)
[] (bus\_remove\_driver) from [] (SyS\_delete\_module+0x148/0x1d8)
[] (SyS\_delete\_module) from [] (ret\_fast\_syscall+0x0/0x48)
FIX kmalloc-128: Object at 0xed08e8d0 not freed
Fixes: fcb0ee6a3d33 (clk: Implement clk\_unregister)
Cc: Jiada Wang
Cc: Sylwester Nawrocki
Cc: Kyungmin Park
Signed-off-by: Stephen Boyd
Signed-off-by: Mike Turquette
Signed-off-by: Greg Kroah-Hartman
commit 55494146e3d09cb6febacea484012b9dac55cb4b
Author: Harald Freudenberger
Date: Wed May 7 16:51:29 2014 +0200
crypto: s390 - fix aes,des ctr mode concurrency finding.
commit 3901c1124ec5099254a9396085f7798153a7293f upstream.
An additional testcase found an issue with the last
series of patches applied: the fallback solution may
not save the iv value after operation. This very small
fix just makes sure the iv is copied back to the
walk/desc struct.
Signed-off-by: Harald Freudenberger
Signed-off-by: Herbert Xu
Signed-off-by: Greg Kroah-Hartman
commit c40da129a2be0858f7e9dc8503fc878c0ebc5f6f
Author: Horia Geanta
Date: Fri Apr 18 13:01:42 2014 +0300
crypto: caam - add allocation failure handling in SPRINTFCAT macro
commit 27c5fb7a84242b66bf1e0b2fe6bf40d19bcc5c04 upstream.
GFP\_ATOMIC memory allocation could fail.
In this case, avoid NULL pointer dereference and notify user.
Cc: Kim Phillips
Signed-off-by: Horia Geanta
Signed-off-by: Herbert Xu
Signed-off-by: Greg Kroah-Hartman
commit 23de3167679e331f65d9aebdfb07fbf4f2167a4c
Author: Dirk Brandewie
Date: Thu May 8 12:57:24 2014 -0700
intel\_pstate: remove setting P state to MAX on init
commit d40a63c45b506b0681918d7c62a15cc9d48c8681 upstream.
Setting the P state of the core to max at init time is a hold over
from early implementation of intel\_pstate where intel\_pstate disabled
cpufreq and loaded VERY early in the boot sequence. This was to
ensure that intel\_pstate did not affect boot time. This in not needed
now that intel\_pstate is a cpufreq driver.
Removing this covers the case where a CPU has gone through a manual
CPU offline/online cycle and the P state is set to MAX on init and the
CPU immediately goes idle. Due to HW coordination the P state request
on the idle CPU will drag all cores to MAX P state until the load is
reevaluated when to core goes non-idle.
Reported-by: Patrick Marlier
Signed-off-by: Dirk Brandewie
Signed-off-by: Rafael J. Wysocki
Signed-off-by: Greg Kroah-Hartman
commit dd4c4afb005de0415ea06e3586b017e193c1539e
Author: Dirk Brandewie
Date: Thu May 8 12:57:23 2014 -0700
intel\_pstate: Set turbo VID for BayTrail
commit 21855ff5bcbdd075e1c99772827a84912ab083dd upstream.
A documentation update exposed that there is a separate set of VID
values that must be used in the turbo/boost P state range. Add
enumerating and setting the correct VID for P states in the turbo
range.
Signed-off-by: Dirk Brandewie
Signed-off-by: Rafael J. Wysocki
Signed-off-by: Greg Kroah-Hartman
commit 35493cad041359561d13dfd4c3c0df33cdd5ea4c
Author: Olof Johansson
Date: Fri Apr 11 15:19:41 2014 -0700
i2c: s3c2410: resume race fix
commit ce78cc071f5f541480e381cc0241d37590041a9d upstream.
Don't unmark the device as suspended until after it's been re-setup.
The main race would be w.r.t. an i2c driver that gets resumed at the same
time (asyncronously), that is allowed to do a transfer since suspended
is set to 0 before reinit, but really should have seen the -EIO return
instead.
Signed-off-by: Olof Johansson
Signed-off-by: Doug Anderson
Acked-by: Kukjin Kim
Signed-off-by: Wolfram Sang
Signed-off-by: Greg Kroah-Hartman
commit bd811c103a08a9e35a01c0a304ba2ff87af36694
Author: Du, Wenkai
Date: Thu Apr 10 23:03:19 2014 +0000
i2c: designware: Mask all interrupts during i2c controller enable
commit 47bb27e78867997040a228328f2a631c3c7f2c82 upstream.
There have been "i2c\_designware 80860F41:00: controller timed out" errors
on a number of Baytrail platforms. The issue is caused by incorrect value in
Interrupt Mask Register (DW\_IC\_INTR\_MASK) when i2c core is being enabled.
This causes call to \_\_i2c\_dw\_enable() to immediately start the transfer which
leads to timeout. There are 3 failure modes observed:
1. Failure in S0 to S3 resume path
The default value after reset for DW\_IC\_INTR\_MASK is 0x8ff. When we start
the first transaction after resuming from system sleep, TX\_EMPTY interrupt
is already unmasked because of the hardware default.
2. Failure in normal operational path
This failure happens rarely and is hard to reproduce. Debug trace showed that
DW\_IC\_INTR\_MASK had value of 0x254 when failure occurred, which meant
TX\_EMPTY was unmasked.
3. Failure in S3 to S0 suspend path
This failure also happens rarely and is hard to reproduce. Adding debug trace
that read DW\_IC\_INTR\_MASK made this failure not reproducible. But from ISR
call trace we could conclude TX\_EMPTY was unmasked when problem occurred.
The patch masks all interrupts before the controller is enabled to resolve the
faulty DW\_IC\_INTR\_MASK conditions.
Signed-off-by: Wenkai Du
Acked-by: Mika Westerberg
[wsa: improved the comment and removed typo in commit msg]
Signed-off-by: Wolfram Sang
Signed-off-by: Greg Kroah-Hartman
commit 6a8702825dc2c66c7233c0b5d9b05a4cddec9eca
Author: Wolfram Sang
Date: Mon May 5 18:36:21 2014 +0200
i2c: rcar: bail out on zero length transfers
commit d7653964c590ba846aa11a8f6edf409773cbc492 upstream.
This hardware does not support zero length transfers. Instead, the
driver does one (random) byte transfers currently with undefined results
for the slaves. We now bail out.
Signed-off-by: Wolfram Sang
Signed-off-by: Wolfram Sang
Signed-off-by: Greg Kroah-Hartman
commit 6dc7b7dafd495b5234496e17abab217ac5bccb1a
Author: Hans de Goede
Date: Fri May 16 21:10:41 2014 +0200
ACPI / video: Revert native brightness quirk for ThinkPad T530
commit 07d1d29ee1e194b932328ad2dc1d40297062ab7f upstream.
Seems it helps some users, but causes issues for other users:
https://bugzilla.redhat.com/show\_bug.cgi?id=1089545
So lets drop it for now until we've figured out a better fix.
Fixes: 43d949024425 (ACPI / video: Add use\_native\_backlight quirks for more systems)
References: https://bugzilla.redhat.com/show\_bug.cgi?id=1089545
Signed-off-by: Hans de Goede
Signed-off-by: Rafael J. Wysocki
Signed-off-by: Greg Kroah-Hartman
commit 73561c3027499aef22e68719b8f473b4ecadc23b
Author: Aaron Lu
Date: Tue May 13 09:51:50 2014 +0800
ACPI / video: correct DMI tag for Dell Inspiron 7520
commit 5ff365fb6aed4c7ee5aae7b0239ce0b514aefabc upstream.
The DMI tag used to identify Dell Inspiron 7520 should be product name
instead of product version.
Fixes: 0e9f81d3b7cd (ACPI / video: Add systems that should favour native backlight interface)
Reported-and-tested-by: Téo Mazars
References: https://bugzilla.redhat.com/show\_bug.cgi?id=909552
Signed-off-by: Aaron Lu
Signed-off-by: Rafael J. Wysocki
Signed-off-by: Greg Kroah-Hartman
commit fcbe7574986518eb6896c18804dc77d8dfd879ea
Author: Rafael J. Wysocki
Date: Mon May 12 01:13:28 2014 +0200
ACPI / TPM: Fix resume regression on Chromebooks
commit f759546498d820670934c901a2fdf1ce948d2e5c upstream.
Chromebooks (at least Acer C720 and Pixel) implement an ACPI object
for TPM, but don't implement the \_DSM method to support PPI. As
a result, the TPM driver fails to load on those machines after
commit 1569a4c4ceba (ACPI / TPM: detect PPI features by checking
availability of \_DSM functions) which causes them to fail to
resume from system suspend, becuase they require the TPM hardware
to be put into the right state during resume and the TPM driver
is necessary for that.
Fix the problem by making tpm\_add\_ppi() return 0 when tpm\_ppi\_handle
is still NULL after walking the ACPI namespace in search for the PPI
\_DSM, which allows the TPM driver to load and operate the hardware
(during system resume in particular), but avoid creating the PPI
sysfs group in that case.
This change is based on a prototype patch from Jiang Liu.
Fixes: 1569a4c4ceba (ACPI / TPM: detect PPI features by checking availability of \_DSM functions)
References: https://bugzilla.kernel.org/show\_bug.cgi?id=74021
Reported-by: James Duley
Reported-by: Phillip Dixon
Tested-by: Brandon Casey
Signed-off-by: Rafael J. Wysocki
Signed-off-by: Greg Kroah-Hartman
commit 10f5ccb2fdfd09f5c30ed73fb9309abec0d7d85f
Author: Edward Lin
Date: Wed May 7 10:47:24 2014 +0800
ACPI: blacklist win8 OSI for Dell Inspiron 7737
commit b753631b3576bf343151a82513c5d56fcda1e24f upstream.
With win8 capabiltiy, the machine will boot itself immediately after
shutdown command has executed.
Work around this issue by disabling win8 capcability. This workaround
also makes wireless hotkey work.
Signed-off-by: Edward Lin
Signed-off-by: Rafael J. Wysocki
Signed-off-by: Greg Kroah-Hartman
commit 4f8102db05803247beb7d6013d53c13bc2e429e8
Author: Guenter Roeck
Date: Tue May 6 19:18:28 2014 -0700
ACPI: Revert "ACPI / AC: convert ACPI ac driver to platform bus"
commit 98012849e0cbf980326f8e34d571f4474866a88e upstream.
Revert commit cc8ef5270734 (ACPI / AC: convert ACPI ac driver to
platform bus) that is reported to break thermal management on
MacBook Air 2013 with ArchLinux.
Fixes: cc8ef5270734 (ACPI / AC: convert ACPI ac driver to platform bus)
References: https://bugzilla.kernel.org/show\_bug.cgi?id=71711
Cc: Zhang Rui
Reported-and-tested-by: Manuel Krause
Signed-off-by: Guenter Roeck
Signed-off-by: Rafael J. Wysocki
Signed-off-by: Greg Kroah-Hartman
commit 8c9bc41c0e97c9e176710876ca9e068b1435f409
Author: Igor Mammedov
Date: Mon May 5 22:49:49 2014 +0200
ACPI / processor: do not mark present at boot but not onlined CPU as onlined
commit 0b9d46dd7debf8e6dc8614106f1c1909fa8de64d upstream.
acpi\_processor\_add() assumes that present at boot CPUs
are always onlined, it is not so if a CPU failed to become
onlined. As result acpi\_processor\_add() will mark such CPU
device as onlined in sysfs and following attempts to
online/offline it using /sys/device/system/cpu/cpuX/online
attribute will fail.
Do not poke into device internals in acpi\_processor\_add()
and touch "struct device { .offline }" attribute, since
for CPUs onlined at boot it's set by:
topology\_init() -> arch\_register\_cpu() -> register\_cpu()
before ACPI device tree is parsed, and for hotplugged
CPUs it's set when userspace onlines CPU via sysfs.
Signed-off-by: Igor Mammedov
Acked-by: Toshi Kani
Signed-off-by: Rafael J. Wysocki
Signed-off-by: Greg Kroah-Hartman
commit 9c020b30dc3064cf0eb1be1164c38c67e3135239
Author: Hans de Goede
Date: Mon May 5 11:38:09 2014 +0200
ACPI / blacklist: Add dmi\_enable\_osi\_linux quirk for Asus EEE PC 1015PX
commit f6e6e1b9fee88c90586787b71dc49bb3ce62bb89 upstream.
Without this this EEE PC exports a non working WMI interface, with this it
exports a working "good old" eeepc\_laptop interface, fixing brightness control
not working as well as rfkill being stuck in a permanent wireless blocked
state.
This is not an ideal way to fix this, but various attempts to fix this
otherwise have failed, see:
References: https://bugzilla.redhat.com/show\_bug.cgi?id=1067181
Reported-and-tested-by: lou.cardone@gmail.com
Signed-off-by: Hans de Goede
Signed-off-by: Rafael J. Wysocki
Signed-off-by: Greg Kroah-Hartman
commit 3e873234bf01413486c9d7151dea202a7ffc6a43
Author: Hans de Goede
Date: Mon May 5 11:38:08 2014 +0200
ACPI / video: Add use\_native\_backlight quirks for more systems
commit 43d9490244254d2d6adb0f3c6275c7b8d032a2dd upstream.
ThinkPad T430: extend the T430s entry to also cover the T430 (note we also
have another entry for T430's with a different DMI\_PRODUCT\_VERSION).
ThinkPad T430
Reported-and-tested-by: edm
References: https://bugzilla.kernel.org/show\_bug.cgi?id=51231
Thinkpad T530
Reported-and-tested-by: Balint Szigeti
References: https://bugzilla.redhat.com/show\_bug.cgi?id=1089545
Acer Aspire 5742G
Reported-and-tested-by: AnAkkk
References: https://bugzilla.kernel.org/show\_bug.cgi?id=35622
Signed-off-by: Hans de Goede
Signed-off-by: Rafael J. Wysocki
Signed-off-by: Greg Kroah-Hartman
commit da33adbd92be1217c55adf3f164b35ff2238fd32
Author: Lan Tianyu
Date: Sun May 4 11:07:25 2014 +0800
ACPI: Revert "ACPI / Battery: Remove battery's proc directory"
commit 3a670cc79342c36d308decd5f90351830ed1685c upstream.
The commit 1e2d9cd and 7d7ee95 remove ACPI Proc Battery
directory and breaks some old userspace tools. This patch
is to revert commit 1e2d9cd.
Fixes: 1e2d9cdfb449 (ACPI / Battery: Remove battery's proc directory)
Signed-off-by: Lan Tianyu
Signed-off-by: Rafael J. Wysocki
Signed-off-by: Greg Kroah-Hartman
commit ef0dcd4fd05a21b411a345f88acf4d841b8e34c4
Author: Lan Tianyu
Date: Sun May 4 11:07:24 2014 +0800
ACPI: Revert "ACPI: Remove CONFIG\_ACPI\_PROCFS\_POWER and cm\_sbsc.c"
commit e2a7c3d7812369daae56f069eab2e8f3e548d231 upstream.
The commit 1e2d9cd and 7d7ee95 remove ACPI Proc Battery
directory and breaks some old userspace tools. This patch
is to revert 7d7ee95.
Fixes: 7d7ee958867a (ACPI: Remove CONFIG\_ACPI\_PROCFS\_POWER and cm\_sbsc.c)
Signed-off-by: Lan Tianyu
Signed-off-by: Rafael J. Wysocki
Signed-off-by: Greg Kroah-Hartman
commit 0ed09dccba02daca9afa960d160a74a6f72c4398
Author: Lv Zheng
Date: Tue May 13 16:50:30 2014 +0800
ACPICA: Tables: Restore old behavor to favor 32-bit FADT addresses.
commit 85dbd5801f62b66e2aa7826aaefcaebead44c8a6 upstream.
We need to find a smarter way to switch to 64-bit FADT addresses according
to the bug report. This patch reverts Linux to the original behavior.
Fixes: 0249ed2444d6 (ACPICA: Add option to favor 32-bit FADT addresses.)
References: https://bugzilla.kernel.org/show\_bug.cgi?id=74021
Reported-and-tested-by: Oswald Buddenhagen
Signed-off-by: Lv Zheng
Signed-off-by: Rafael J. Wysocki
Signed-off-by: Greg Kroah-Hartman
commit 226ae56a2f6043d841c654c6e47e38ca16fa8957
Author: Lv Zheng
Date: Wed Apr 30 10:05:40 2014 +0800
ACPICA: Tables: Fix invalid pointer accesses in acpi\_tb\_parse\_root\_table().
commit d48dc067450d84324067f4472dc0b169e9af4454 upstream.
Linux XSDT validation mechanism backport has introduced a regreession:
Commit: 671cc68dc61f029d44b43a681356078e02d8dab8
Subject: ACPICA: Back port and refine validation of the XSDT root table.
There is a pointer still accessed after unmapping.
This patch fixes this issue. Lv Zheng.
Fixes: 671cc68dc61f (ACPICA: Back port and refine validation of the XSDT root table.)
References: https://bugzilla.kernel.org/show\_bug.cgi?id=73911
References: https://bugs.archlinux.org/task/39811
Signed-off-by: Lv Zheng
Reported-and-tested-by: Bruce Chiarelli
Reported-and-tested-by: Spyros Stathopoulos
Signed-off-by: Bob Moore
Signed-off-by: Rafael J. Wysocki
Signed-off-by: Greg Kroah-Hartman
commit 2ba7d5e2dcc58167017c404bd1fd2756d814e75c
Author: Levente Kurusa
Date: Tue May 6 15:57:48 2014 +0200
libata: clean up ZPODD when a port is detached
commit a6f9bf4d2f965b862b95213303d154e02957eed8 upstream.
When a ZPODD device is unbound via sysfs, the ACPI notify handler
is not removed. This causes panics as observed in Bug #74601. The
panic only happens when the wake happens from outside the kernel
(i.e. inserting a media or pressing a button). Add a loop to
ata\_port\_detach which loops through the port's devices and checks
if zpodd is enabled, if so call zpodd\_exit.
Reviewed-by: Aaron Lu
Signed-off-by: Levente Kurusa
Signed-off-by: Tejun Heo
Signed-off-by: Greg Kroah-Hartman
commit 17edcf1972526501acd31bfb8c689eb18d597b91
Author: Nicholas Bellinger
Date: Mon May 12 12:18:32 2014 -0700
tcm\_fc: Fix free-after-use regression in ft\_free\_cmd
commit ed8ec8f707ed4760c124d47b27c93df8ec5b1eba upstream.
This patch fixes a free-after-use regression in ft\_free\_cmd(), where
ft\_sess\_put() is called with cmd->sess after percpu\_ida\_free() has
already released the tag.
Fix this bug by saving the ft\_sess pointer ahead of percpu\_ida\_free(),
and pass it directly to ft\_sess\_put().
The regression was originally introduced in v3.13-rc1 commit:
commit 5f544cfac956971099e906f94568bc3fd1a7108a
Author: Nicholas Bellinger
Date: Mon Sep 23 12:12:42 2013 -0700
tcm\_fc: Convert to per-cpu command map pre-allocation of ft\_cmd
Reported-by: Jun Wu
Cc: Mark Rustad
Cc: Robert Love
Signed-off-by: Nicholas Bellinger
Signed-off-by: Greg Kroah-Hartman
commit 8b9df249dd60380b2347585038e643677715f591
Author: Andy Shevchenko
Date: Wed May 7 10:56:24 2014 +0300
dmaengine: dw: went back to plain {request,free}\_irq() calls
commit 97977f7576a89cb9436c000ae703c0d515e748ac upstream.
The commit dbde5c29 "dw\_dmac: use devm\_\* functions to simplify code" turns
probe function to use devm\_\* helpers and simultaneously brings a regression. We
need to ensure irq is disabled, followed by ensuring that don't schedule any
more tasklets and then its safe to use tasklet\_kill().
The free\_irq() will ensure that the irq is disabled and also wait till all
scheduled interrupts are executed by invoking synchronize\_irq(). So we need to
only do tasklet\_kill() after invoking free\_irq().
Signed-off-by: Andy Shevchenko
Signed-off-by: Vinod Koul
Signed-off-by: Greg Kroah-Hartman
commit 2591d624cdfe6e24b0cb4f1da4845ba6a1dbe473
Author: Ezequiel Garcia
Date: Wed May 21 14:02:35 2014 -0700
dma: mv\_xor: Flush descriptors before activating a channel
commit 5a9a55bf9157d3490b0c8c4c81d4708602c26e07 upstream.
We need to use writel() instead of writel\_relaxed() when starting
a channel, to ensure all the descriptors have been flushed before
the activation.
While at it, remove the unneeded read-modify-write and make the
code simpler.
Signed-off-by: Lior Amsalem
Signed-off-by: Ezequiel Garcia
Signed-off-by: Dan Williams
Signed-off-by: Greg Kroah-Hartman
commit e411566e7dc68df11b817d154fb06e3fd761bc77
Author: Xuelin Shi
Date: Wed May 21 14:02:37 2014 -0700
dmaengine: fix dmaengine\_unmap failure
commit c1f43dd9c20d85e66c4d77e284f64ac114abe3f8 upstream.
The count which is used to get\_unmap\_data maybe not the same as the
count computed in dmaengine\_unmap which causes to free data in a
wrong pool.
This patch fixes this issue by keeping the map count with unmap\_data
structure and use this count to get the pool.
Signed-off-by: Xuelin Shi
Signed-off-by: Dan Williams
Signed-off-by: Greg Kroah-Hartman
commit 6a1170d673278d51c8ceee2cb091d4baf4ef1ba2
Author: Joe Thornber
Date: Fri May 9 15:59:38 2014 +0100
dm thin: add timeout to stop out-of-data-space mode holding IO forever
commit 85ad643b7e7e52d37620fb272a9fd577a8095647 upstream.
If the pool runs out of data space, dm-thin can be configured to
either error IOs that would trigger provisioning, or hold those IOs
until the pool is resized. Unfortunately, holding IOs until the pool is
resized can result in a cascade of tasks hitting the hung\_task\_timeout,
which may render the system unavailable.
Add a fixed timeout so IOs can only be held for a maximum of 60 seconds.
If LVM is going to resize a thin-pool that is out of data space it needs
to be prompt about it.
Signed-off-by: Joe Thornber
Signed-off-by: Mike Snitzer
Signed-off-by: Greg Kroah-Hartman
commit 36f7757dadcd45c0ecce396662f923c0841e12ff
Author: Joe Thornber
Date: Tue May 6 16:28:14 2014 +0100
dm thin: allow metadata commit if pool is in PM\_OUT\_OF\_DATA\_SPACE mode
commit 8d07e8a5f5bc7b90f755d9b427ea930024f4c986 upstream.
Commit 3e1a0699 ("dm thin: fix out of data space handling") introduced
a regression in the metadata commit() method by returning an error if
the pool is in PM\_OUT\_OF\_DATA\_SPACE mode. This oversight caused a thin
device to return errors even if the default queue\_if\_no\_space ENOSPC
handling mode is used.
Fix commit() to only fail if pool is in PM\_READ\_ONLY or PM\_FAIL mode.
Reported-by: qindehua@163.com
Signed-off-by: Joe Thornber
Signed-off-by: Mike Snitzer
Signed-off-by: Greg Kroah-Hartman
commit 4cf3d5e62ea1868a963f6430eb7e40e46ac7295b
Author: Mikulas Patocka
Date: Thu Feb 20 18:01:01 2014 -0500
dm crypt: fix cpu hotplug crash by removing per-cpu structure
commit 610f2de3559c383caf8fbbf91e9968102dff7ca0 upstream.
The DM crypt target used per-cpu structures to hold pointers to a
ablkcipher\_request structure. The code assumed that the work item keeps
executing on a single CPU, so it didn't use synchronization when
accessing this structure.
If a CPU is disabled by writing 0 to /sys/devices/system/cpu/cpu\*/online,
the work item could be moved to another CPU. This causes dm-crypt
crashes, like the following, because the code starts using an incorrect
ablkcipher\_request:
smpboot: CPU 7 is now offline
BUG: unable to handle kernel NULL pointer dereference at 0000000000000130
IP: [] crypt\_convert+0x12d/0x3c0 [dm\_crypt]
...
Call Trace:
[] ? kcryptd\_crypt+0x305/0x470 [dm\_crypt]
[] ? finish\_task\_switch+0x40/0xc0
[] ? process\_one\_work+0x168/0x470
[] ? worker\_thread+0x10b/0x390
[] ? manage\_workers.isra.26+0x290/0x290
[] ? kthread+0xaf/0xc0
[] ? kthread\_create\_on\_node+0x120/0x120
[] ? ret\_from\_fork+0x7c/0xb0
[] ? kthread\_create\_on\_node+0x120/0x120
Fix this bug by removing the per-cpu definition. The structure
ablkcipher\_request is accessed via a pointer from convert\_context.
Consequently, if the work item is rescheduled to a different CPU, the
thread still uses the same ablkcipher\_request.
This change may undermine performance improvements intended by commit
c0297721 ("dm crypt: scale to multiple cpus") on select hardware. In
practice no performance difference was observed on recent hardware. But
regardless, correctness is more important than performance.
Signed-off-by: Mikulas Patocka
Signed-off-by: Mike Snitzer
Signed-off-by: Greg Kroah-Hartman
commit c8b177eab863291fc70efabfc649fbfba0da9442
Author: Gavin Shan
Date: Mon May 19 13:06:46 2014 +1000
PCI: Wrong register used to check pending traffic
commit d0b4cc4e32705ff00d90d32da7783c266c702c04 upstream.
The incorrect register offset is passed to pci\_wait\_for\_pending(), which is
caused by commit 157e876ffe ("PCI: Add pci\_wait\_for\_pending() (refactor
pci\_wait\_for\_pending\_transaction())").
Fixes: 157e876ffe ("PCI: Add pci\_wait\_for\_pending() (refactor pci\_wait\_for\_pending\_transaction())
Signed-off-by: Gavin Shan
Signed-off-by: Bjorn Helgaas
Acked-by: Alex Williamson
Signed-off-by: Greg Kroah-Hartman
commit b2fe79d69507a4f8140089c0458b1a31211ebf67
Author: Emmanuel Grumbach
Date: Sun Apr 13 15:51:41 2014 +0300
iwlwifi: mvm: BT Coex - fix Look Up Table
commit a6bc92803e7f765e02c923cf37c8e280e729642a upstream.
A few entries were wrong and this caused throughput issues.
Fixes: dac94da8dba3 ("iwlwifi: mvm: new BT Coex API")
Signed-off-by: Emmanuel Grumbach
Signed-off-by: Greg Kroah-Hartman
commit 6b88559e343570c67468dc4cf1eeeebe6f24ec3d
Author: Jani Nikula
Date: Wed May 21 11:07:25 2014 +0200
drm/i915: quirk invert brightness for Acer Aspire 5336
This is commit 0f540c3a7cfb91c9d7a19eb0c95c24 upstream.
Since
commit ee1452d7458451a7508e0663553ce88d63958157
Author: Jani Nikula
Date: Fri Sep 20 15:05:30 2013 +0300
drm/i915: assume all GM45 Acer laptops use inverted backlight PWM
failed and was later reverted in
commit be505f643925e257087247b996cd8ece787c12af
Author: Alexander van Heukelum
Date: Sat Dec 28 21:00:39 2013 +0100
Revert "drm/i915: assume all GM45 Acer laptops use inverted backlight PWM"
fix the individual broken machine instead.
Note to backporters:
http://patchwork.freedesktop.org/patch/17837/
is the patch you want for 3.13 and older.
Bugzilla: https://bugzilla.kernel.org/show\_bug.cgi?id=54171
Reference: http://mid.gmane.org/DUB115-W7628C7C710EA51AA110CD4A5000@phx.gbl
Signed-off-by: Jani Nikula
Reviewed-by: Ville Syrjälä
[danvet: Patch mangling for 3.14 plus adding the link to the original
for 3.13.]
Signed-off-by: Daniel Vetter
commit 01fdf4cb75be9337949bb6b8668e3a84747cf057
Author: Chris Wilson
Date: Wed May 21 11:07:24 2014 +0200
drm/i915: Fix unsafe loop iteration over vma whilst unbinding them
This is commit df6f783a4ef6790780a67c491897ac upstream.
On non-LLC platforms, when changing the cache level of an object, we may
need to unbind it so that prefetching across page boundaries does not
cross into a different memory domain. This requires us to unbind
conflicting vma, but we did so iterating over the objects vma in an
unsafe manner (as the list was being modified as we iterated).
The regression was introduced in
commit 3089c6f239d7d2c4cb2dd5c353e8984cf79af1d7
Author: Ben Widawsky
Date: Wed Jul 31 17:00:03 2013 -0700
drm/i915: make caching operate on all address spaces
apparently as far back as v3.12-rc1, but it has only just begun to
trigger real world bug reports.
Reported-and-tested-by: Nikolay Martynov
Bugzilla: https://bugs.freedesktop.org/show\_bug.cgi?id=76384
Signed-off-by: Chris Wilson
Cc: Ben Widawsky
Signed-off-by: Daniel Vetter
Signed-off-by: Greg Kroah-Hartman
commit 68f914e32934bfa570ec9feff6a85896d376f8de
Author: Imre Deak
Date: Wed May 21 11:07:23 2014 +0200
drm/i915: move power domain init earlier during system resume
This is commit 76c4b250080fff6e4befaa36199424 upstream.
During resume the intel hda audio driver depends on the i915 driver
reinitializing the audio power domain. Since the order of calling the
i915 resume handler wrt. that of the audio driver is not guaranteed,
move the power domain reinitialization step to the resume\_early
handler. This is guaranteed to run before the resume handler of any
other driver.
The power domain initialization in turn requires us to enable the i915
pci device first, so move that part earlier too.
Accordingly disabling of the i915 pci device should happen after the
audio suspend handler ran. So move the disabling later from the i915
resume handler to the resume\_late handler.
v2:
- move intel\_uncore\_sanitize/early\_sanitize earlier too, so they don't
get reordered wrt. intel\_power\_domains\_init\_hw()
Bugzilla: https://bugs.freedesktop.org/show\_bug.cgi?id=76152
Signed-off-by: Imre Deak
Reviewed-by: Takashi Iwai
[danvet: Add cc: stable and loud comments that this is just a hack.]
[danvet: Fix "Should it be static?" sparse warning reported by Wu
Fengguang's kbuilder.]
Signed-off-by: Daniel Vetter
Signed-off-by: Greg Kroah-Hartman
commit 32c6d0e4f0bf5be3604dbb9b6ac9df713a93f683
Author: Daniel Vetter
Date: Wed May 21 11:07:22 2014 +0200
drm/i915: Disable self-refresh for untiled fbs on i915gm
This is commit 2ab1bc9df01dbc19b55b2271100db7 upstream.
Apparently it doesn't work. X-tiled self-refresh works flawlessly
otoh. Apparently X still works correctly with linear framebuffers, so
might just be an issue with the initial modeset. It's unclear whether
this just borked wm setup from our side or a hw restriction, but just
disabling gets things going.
Note that this regression was only brought to light with
commit 3f2dc5ac05714711fc14f2bf0ee5e42d5c08c581
Author: Ville Syrjälä
Date: Fri Jan 10 14:06:47 2014 +0200
drm/i915: Fix 915GM self-refresh enable/disable
before that self-refresh for i915GM didn't work at all.
Kudos to Ville for spotting a little bug in the original patch I've
attached to the bug.
Cc: Ville Syrjälä
Cc: Chris Wilson
Bugzilla: https://bugs.freedesktop.org/show\_bug.cgi?id=76103
Tested-by: Krzysztof Mazur
Cc: Krzysztof Mazur
Reviewed-by: Ville Syrjälä
Signed-off-by: Daniel Vetter
[Jani: rebase on top of drm-next with primary plane support.]
Signed-off-by: Jani Nikula
Signed-off-by: Greg Kroah-Hartman
commit 91afab3c0c9251e87ad786f49006d987d8baf90c
Author: Mikulas Patocka
Date: Sat May 17 06:49:22 2014 -0400
target: fix memory leak on XCOPY
commit 1e1110c43b1cda9fe77fc4a04835e460550e6b3c upstream.
On each processed XCOPY command, two "kmalloc-512" memory objects are
leaked. These represent two allocations of struct xcopy\_pt\_cmd in
target\_core\_xcopy.c.
The reason for the memory leak is that the cmd\_kref field is not
initialized (thus, it is zero because the allocations were done with
kzalloc). When we decrement zero kref in target\_put\_sess\_cmd, the result
is not zero, thus target\_release\_cmd\_kref is not called.
This patch fixes the bug by moving kref initialization from
target\_get\_sess\_cmd to transport\_init\_se\_cmd (this function is called from
target\_core\_xcopy.c, so it will correctly initialize cmd\_kref). It can be
easily verified that all code that calls target\_get\_sess\_cmd also calls
transport\_init\_se\_cmd earlier, thus moving kref\_init shouldn't introduce
any new problems.
Signed-off-by: Mikulas Patocka
Signed-off-by: Nicholas Bellinger
Signed-off-by: Greg Kroah-Hartman
commit e1ff900f3b048d488c81c21b18ae9da022a293a8
Author: Andy Grover
Date: Wed May 14 15:48:06 2014 -0700
target: Don't allow setting WC emulation if device doesn't support
commit 07b8dae38b09bcfede7e726f172e39b5ce8390d9 upstream.
Just like for pSCSI, if the transport sets get\_write\_cache, then it is
not valid to enable write cache emulation for it. Return an error.
see https://bugzilla.redhat.com/show\_bug.cgi?id=1082675
Reviewed-by: Chris Leech
Signed-off-by: Andy Grover
Signed-off-by: Nicholas Bellinger
Signed-off-by: Greg Kroah-Hartman
commit d2e2fd98e0b0cbb233481822301c1757ddd69be2
Author: Nicholas Bellinger
Date: Thu May 1 13:44:56 2014 -0700
iscsi-target: Change BUG\_ON to REJECT in iscsit\_process\_nop\_out
commit 7cbfcc953789ff864c2bf8365a82a3fba4869649 upstream.
This patch changes an incorrect use of BUG\_ON to instead generate a
REJECT + PROTOCOL\_ERROR in iscsit\_process\_nop\_out() code. This case
can occur with traditional TCP where a flood of zeros in the data
stream can reach this block for what is presumed to be a NOP-OUT with
a solicited reply, but without a valid iscsi\_cmd pointer.
This incorrect BUG\_ON was introduced during the v3.11-rc timeframe
with the following commit:
commit 778de368964c5b7e8100cde9f549992d521e9c89
Author: Nicholas Bellinger
Date: Fri Jun 14 16:07:47 2013 -0700
iscsi/isert-target: Refactor ISCSI\_OP\_NOOP RX handling
Reported-by: Arshad Hussain
Signed-off-by: Nicholas Bellinger
Signed-off-by: Greg Kroah-Hartman
commit 3e0b286f942157529c4498295cfa9dade24bfdba
Author: Sagi Grimberg
Date: Tue Apr 29 13:13:45 2014 +0300
Target/iser: Fix iscsit\_accept\_np and rdma\_cm racy flow
commit 531b7bf4bd795d9a09eac92504322a472c010bc8 upstream.
RDMA CM and iSCSI target flows are asynchronous and completely
uncorrelated. Relying on the fact that iscsi\_accept\_np will be called
after CM connection request event and will wait for it is a mistake.
When attempting to login to a few targets this flow is racy and
unpredictable, but for parallel login to dozens of targets will
race and hang every time.
The correct synchronizing mechanism in this case is pending on
a semaphore rather than a wait\_for\_event. We keep the pending
interruptible for iscsi\_np cleanup stage.
(Squash patch to remove dead code into parent - nab)
Reported-by: Slava Shwartsman
Signed-off-by: Sagi Grimberg
Signed-off-by: Nicholas Bellinger
Signed-off-by: Greg Kroah-Hartman
commit c4ee9c7a44d386c9bb88589a39c0cc30fd5526b0
Author: Sagi Grimberg
Date: Tue Apr 29 13:13:44 2014 +0300
Target/iser: Fix wrong connection requests list addition
commit 9fe63c88b1d59f1ce054d6948ccd3096496ecedb upstream.
Should be adding list\_add\_tail($new, $head) and not
the other way around.
Signed-off-by: Sagi Grimberg
Signed-off-by: Nicholas Bellinger
Signed-off-by: Greg Kroah-Hartman
commit de162a48287592f93d3cc3a3af5a130d1fd648c7
Author: Andy Grover
Date: Tue Apr 15 14:13:12 2014 -0700
target: Allow non-supporting backends to set pi\_prot\_type to 0
commit 448ba904160f9d8f69217c28a1692cee5afbff88 upstream.
Userspace tools assume if a value is read from configfs, it is valid
and will not cause an error if the same value is written back. The only
valid value for pi\_prot\_type for backends not supporting DIF is 0, so allow
this particular value to be set without returning an error.
Reported-by: Krzysztof Chojnowski
Signed-off-by: Andy Grover
Reviewed-by: Sagi Grimberg
Signed-off-by: Nicholas Bellinger
Signed-off-by: Greg Kroah-Hartman
commit 4d1a31078295f5aacb92bb313c6cd989f9d6742f
Author: Marcel Apfelbaum
Date: Thu May 15 12:42:49 2014 -0600
PCI: shpchp: Check bridge's secondary (not primary) bus speed
commit 93fa9d32670f5592c8e56abc9928fc194e1e72fc upstream.
When a new device is added below a hotplug bridge, the bridge's secondary
bus speed and the device's bus speed must match. The shpchp driver
previously checked the bridge's \*primary\* bus speed, not the secondary bus
speed.
This caused hot-add errors like:
shpchp 0000:00:03.0: Speed of bus ff and adapter 0 mismatch
Check the secondary bus speed instead.
[bhelgaas: changelog]
Link: https://bugzilla.kernel.org/show\_bug.cgi?id=75251
Fixes: 3749c51ac6c1 ("PCI: Make current and maximum bus speeds part of the PCI core")
Signed-off-by: Marcel Apfelbaum
Signed-off-by: Bjorn Helgaas
Acked-by: Michael S. Tsirkin
Signed-off-by: Greg Kroah-Hartman
commit 43d3b56b2e8c6c6ffdd988187a096e5c24cb5a8b
Author: Tejun Heo
Date: Mon May 19 15:52:10 2014 -0400
sysfs: make sure read buffer is zeroed
commit f5c16f29bf5e57ba4051fc7785ba7f035f798c71 upstream.
13c589d5b0ac ("sysfs: use seq\_file when reading regular files")
switched sysfs from custom read implementation to seq\_file to enable
later transition to kernfs. After the change, the buffer passed to
->show() is acquired through seq\_get\_buf(); unfortunately, this
introduces a subtle behavior change. Before the commit, the buffer
passed to ->show() was always zero as it was allocated using
get\_zeroed\_page(). Because seq\_file doesn't clear buffers on
allocation and neither does seq\_get\_buf(), after the commit, depending
on the behavior of ->show(), we may end up exposing uninitialized data
to userland thus possibly altering userland visible behavior and
leaking information.
Fix it by explicitly clearing the buffer.
Signed-off-by: Tejun Heo
Reported-by: Ron
Fixes: 13c589d5b0ac ("sysfs: use seq\_file when reading regular files")
Signed-off-by: Greg Kroah-Hartman
commit bae3622bb8afd02343c79949635b8d84c2cf3485
Author: Arnd Bergmann
Date: Wed Apr 23 14:49:17 2014 +0200
genirq: Provide irq\_force\_affinity fallback for non-SMP
commit 4c88d7f9b0d5fb0588c3386be62115cc2eaa8f9f upstream.
Patch 01f8fa4f01d "genirq: Allow forcing cpu affinity of interrupts" added
an irq\_force\_affinity() function, and 30ccf03b4a6 "clocksource: Exynos\_mct:
Use irq\_force\_affinity() in cpu bringup" subsequently uses it. However, the
driver can be used with CONFIG\_SMP disabled, but the function declaration
is only available for CONFIG\_SMP, leading to this build error:
drivers/clocksource/exynos\_mct.c:431:3: error: implicit declaration of function 'irq\_force\_affinity' [-Werror=implicit-function-declaration]
irq\_force\_affinity(mct\_irqs[MCT\_L0\_IRQ + cpu], cpumask\_of(cpu));
This patch introduces a dummy helper function for the non-SMP case
that always returns success, to get rid of the build error.
Since the patches causing the problem are marked for stable backports,
this one should be as well.
Signed-off-by: Arnd Bergmann
Cc: Krzysztof Kozlowski
Acked-by: Kukjin Kim
Link: http://lkml.kernel.org/r/5619084.0zmrrIUZLV@wuerfel
Signed-off-by: Thomas Gleixner
Signed-off-by: Greg Kroah-Hartman
commit 461a8fe47232a42c5ba9e2ac57eed37df331a2e3
Author: Linus Torvalds
Date: Wed May 14 16:33:54 2014 -0700
x86-64, modify\_ldt: Make support for 16-bit segments a runtime option
commit fa81511bb0bbb2b1aace3695ce869da9762624ff upstream.
Checkin:
b3b42ac2cbae x86-64, modify\_ldt: Ban 16-bit segments on 64-bit kernels
disabled 16-bit segments on 64-bit kernels due to an information
leak. However, it does seem that people are genuinely using Wine to
run old 16-bit Windows programs on Linux.
A proper fix for this ("espfix64") is coming in the upcoming merge
window, but as a temporary fix, create a sysctl to allow the
administrator to re-enable support for 16-bit segments.
It adds a "/proc/sys/abi/ldt16" sysctl that defaults to zero (off). If
you hit this issue and care about your old Windows program more than
you care about a kernel stack address information leak, you can do
echo 1 > /proc/sys/abi/ldt16
as root (add it to your startup scripts), and you should be ok.
The sysctl table is only added if you have COMPAT support enabled on
x86-64, but I assume anybody who runs old windows binaries very much
does that ;)
Signed-off-by: H. Peter Anvin
Link: http://lkml.kernel.org/r/CA%2B55aFw9BPoD10U1LfHbOMpHWZkvJTkMcfCs9s3urPr1YyWBxw@mail.gmail.com
Signed-off-by: Greg Kroah-Hartman
commit db5f7d04fd718b94f428220b2ba4d4c87f55a3a5
Author: James Hogan
Date: Tue May 13 23:58:24 2014 +0100
metag: Reduce maximum stack size to 256MB
commit d71f290b4e98a39f49f2595a13be3b4d5ce8e1f1 upstream.
Specify the maximum stack size for arches where the stack grows upward
(parisc and metag) in asm/processor.h rather than hard coding in
fs/exec.c so that metag can specify a smaller value of 256MB rather than
1GB.
This fixes a BUG on metag if the RLIMIT\_STACK hard limit is increased
beyond a safe value by root. E.g. when starting a process after running
"ulimit -H -s unlimited" it will then attempt to use a stack size of the
maximum 1GB which is far too big for metag's limited user virtual
address space (stack\_top is usually 0x3ffff000):
BUG: failure at fs/exec.c:589/shift\_arg\_pages()!
Signed-off-by: James Hogan
Cc: Helge Deller
Cc: "James E.J. Bottomley"
Cc: linux-parisc@vger.kernel.org
Cc: linux-metag@vger.kernel.org
Cc: John David Anglin
Signed-off-by: Greg Kroah-Hartman
commit 43f0630e513566750fb51df14b54f5b4b4f3f65f
Author: Mikulas Patocka
Date: Thu May 8 15:51:37 2014 -0400
metag: fix memory barriers
commit 2425ce84026c385b73ae72039f90d042d49e0394 upstream.
Volatile access doesn't really imply the compiler barrier. Volatile access
is only ordered with respect to other volatile accesses, it isn't ordered
with respect to general memory accesses. Gcc may reorder memory accesses
around volatile access, as we can see in this simple example (if we
compile it with optimization, both increments of \*b will be collapsed to
just one):
void fn(volatile int \*a, long \*b)
{
(\*b)++;
\*a = 10;
(\*b)++;
}
Consequently, we need the compiler barrier after a write to the volatile
variable, to make sure that the compiler doesn't reorder the volatile
write with something else.
Signed-off-by: Mikulas Patocka
Acked-by: Peter Zijlstra
Signed-off-by: James Hogan
Signed-off-by: Greg Kroah-Hartman
commit 1ed85d074da980973dfd184ffe22bd83aef98901
Author: John David Anglin
Date: Sun May 11 18:40:50 2014 -0400
parisc: Improve LWS-CAS performance
commit c776cd89fc705fc8b5c2e5ad906bf5d791620fed upstream.
The attached change significantly improves the performance of the LWS-CAS code
in syscall.S.
This allows a number of packages to build (e.g., zeromq3, gtest and libxs)
that previously failed because slow LWS-CAS performance under contention. In
particular, interrupts taken while the lock was taken degraded performance
significantly.
The change does the following:
1) Disables interrupts around the CAS operation, and
2) Changes the loads and stores to use the ordered completer, "o", on
PA 2.0. "o" and "ma" with a zero offset are equivalent. The latter is
accepted on both PA 1.X and 2.0.
The use of ordered loads and stores probably makes no difference on all
existing hardware, but it seemed pedantically correct. In particular, the CAS
operation must complete before LDCW lock is released. As written before, a
processor could reorder the operations.
I don't believe the period interrupts are disabled is long enough to
significantly increase interrupt latency. For example, the TLB insert code is
longer. Worst case is a memory fault in the CAS operation.
Signed-off-by: John David Anglin
Signed-off-by: Helge Deller
Signed-off-by: Greg Kroah-Hartman
commit 7278cee18cdcaca8cad7e453382f3ffd2a1949ab
Author: Helge Deller
Date: Mon May 5 18:07:12 2014 +0200
parisc: ratelimit userspace segfault printing
commit fef47e2a2e1e75fe50a10f634a80f16808348cc6 upstream.
Ratelimit printing of userspace segfaults and make it runtime
configurable via the /proc/sys/debug/exception-trace variable. This
should resolve syslog from growing way too fast and thus prevents
possible system service attacks.
Signed-off-by: Helge Deller
Signed-off-by: Greg Kroah-Hartman
commit 5e1367f31dab0cc508e795f66d34267eab1cff09
Author: Charles Keepax
Date: Tue May 13 13:45:15 2014 +0100
ASoC: wm8962: Update register CLASS\_D\_CONTROL\_1 to be non-volatile
commit 44330ab516c15dda8a1e660eeaf0003f84e43e3f upstream.
The register CLASS\_D\_CONTROL\_1 is marked as volatile because it contains
a bit, DAC\_MUTE, which is also mirrored in the ADC\_DAC\_CONTROL\_1
register. This causes problems for the "Speaker Switch" control, which
will report an error if the CODEC is suspended because it relies on a
volatile register.
To resolve this issue mark CLASS\_D\_CONTROL\_1 as non-volatile and
manually keep the register cache in sync by updating both bits when
changing the mute status.
Reported-by: Shawn Guo
Signed-off-by: Charles Keepax
Tested-by: Shawn Guo
Signed-off-by: Mark Brown
Signed-off-by: Greg Kroah-Hartman
commit c33bed1fff471f165bd53943ba43ee0c506cac2b
Author: Lars-Peter Clausen
Date: Wed May 7 16:20:24 2014 +0200
ASoC: dapm: Skip CODEC<->CODEC links in connect\_dai\_link\_widgets()
commit ca5106ae3da0179dcee3ae21f3ea94f62e9fdb0c upstream.
For CODEC to CODEC DAI links the paths are created in snd\_soc\_dapm\_new\_pcm().
Also for CODEC to CODEC links the widgets are connected cross-over via a DAI
link widget, meaning that the capture widget of one CODEC will be connected to
the playback widget of the other and vice versa. Whereas
snd\_soc\_dapm\_connect\_dai\_link\_widgets() directly connects the playback widget of
the CPU DAI to the playback widget of the CODEC DAI and the capture widget of
the CPU DAI to the capture widget of the CODEC DAI. So not skipping
CODEC<->CODEC links in snd\_soc\_dapm\_connect\_dai\_link\_widgets() will create
incorrect connections between the two CODECs which will cause DAPM to detect
active paths where there are none and unnecessarily power up widgets.
Fixes: b893ea5 ("ASoC: sapm: Automatically connect DAI link widgets in DAPM graph.")
Signed-off-by: Lars-Peter Clausen
Signed-off-by: Mark Brown
Signed-off-by: Greg Kroah-Hartman
commit b0e75f5df3df6a79218711775505ae4625255044
Author: Emmanuel Grumbach
Date: Thu May 8 09:48:10 2014 +0300
iwlwifi: mvm: fix setting channel in monitor mode
commit 1c4abec0baf25ffb92a28cc99d4231feeaa4d3f3 upstream.
There was a deadlock in monitor mode when we were setting the
channel if the channel was not 1.
======================================================
[ INFO: possible circular locking dependency detected ]
3.14.3 #4 Not tainted
-------------------------------------------------------
iw/3323 is trying to acquire lock:
(&local->chanctx\_mtx){+.+.+.}, at: [] ieee80211\_vif\_release\_channel+0x42/0xb0 [mac80211]
but task is already holding lock:
(&local->iflist\_mtx){+.+...}, at: [] ieee80211\_set\_monitor\_channel+0x5a/0x1b0 [mac80211]
which lock already depends on the new lock.
the existing dependency chain (in reverse order) is:
-> #2 (&local->iflist\_mtx){+.+...}:
[] \_\_lock\_acquire+0xb3b/0x13b0
[] lock\_acquire+0xb0/0x1f0
[] mutex\_lock\_nested+0x78/0x4f0
[] ieee80211\_iterate\_active\_interfaces+0x2f/0x60 [mac80211]
[] iwl\_mvm\_recalc\_multicast+0x49/0xa0 [iwlmvm]
[] iwl\_mvm\_configure\_filter+0x4e/0x70 [iwlmvm]
[] ieee80211\_configure\_filter+0x153/0x5f0 [mac80211]
[] ieee80211\_reconfig\_filter+0x15/0x20 [mac80211]
[snip]
-> #1 (&mvm->mutex){+.+.+.}:
[] \_\_lock\_acquire+0xb3b/0x13b0
[] lock\_acquire+0xb0/0x1f0
[] mutex\_lock\_nested+0x78/0x4f0
[] iwl\_mvm\_add\_chanctx+0x56/0xe0 [iwlmvm]
[] ieee80211\_new\_chanctx+0x13e/0x410 [mac80211]
[] ieee80211\_vif\_use\_channel+0x1c3/0x5a0 [mac80211]
[] ieee80211\_add\_virtual\_monitor+0x1ab/0x6b0 [mac80211]
[] ieee80211\_do\_open+0xe6a/0x15a0 [mac80211]
[] ieee80211\_open+0x59/0x60 [mac80211]
[snip]
-> #0 (&local->chanctx\_mtx){+.+.+.}:
[] check\_prevs\_add+0x977/0x980
[] \_\_lock\_acquire+0xb3b/0x13b0
[] lock\_acquire+0xb0/0x1f0
[] mutex\_lock\_nested+0x78/0x4f0
[] ieee80211\_vif\_release\_channel+0x42/0xb0 [mac80211]
[] ieee80211\_set\_monitor\_channel+0x113/0x1b0 [mac80211]
[] cfg80211\_set\_monitor\_channel+0x77/0x2b0 [cfg80211]
[] \_\_nl80211\_set\_channel+0x122/0x140 [cfg80211]
[] nl80211\_set\_wiphy+0x284/0xaf0 [cfg80211]
[snip]
other info that might help us debug this:
Chain exists of:
&local->chanctx\_mtx --> &mvm->mutex --> &local->iflist\_mtx
Possible unsafe locking scenario:
CPU0 CPU1
---- ----
lock(&local->iflist\_mtx);
lock(&mvm->mutex);
lock(&local->iflist\_mtx);
lock(&local->chanctx\_mtx);
\*\*\* DEADLOCK \*\*\*
This deadlock actually occurs:
INFO: task iw:3323 blocked for more than 120 seconds.
Not tainted 3.14.3 #4
"echo 0 > /proc/sys/kernel/hung\_task\_timeout\_secs" disables this message.
iw D ffff8800c8afcd80 4192 3323 3322 0x00000000
ffff880078fdb7e0 0000000000000046 ffff8800c8afcd80 ffff880078fdbfd8
00000000001d5540 00000000001d5540 ffff8801141b0000 ffff8800c8afcd80
ffff880078ff9e38 ffff880078ff9e38 ffff880078ff9e40 0000000000000246
Call Trace:
[] schedule\_preempt\_disabled+0x31/0x80
[] mutex\_lock\_nested+0x19d/0x4f0
[] ? ieee80211\_iterate\_active\_interfaces+0x2f/0x60 [mac80211]
[] ? ieee80211\_iterate\_active\_interfaces+0x2f/0x60 [mac80211]
[] ? iwl\_mvm\_power\_mac\_update\_mode+0xc0/0xc0 [iwlmvm]
[] ieee80211\_iterate\_active\_interfaces+0x2f/0x60 [mac80211]
[] \_iwl\_mvm\_power\_update\_binding+0x27/0x80 [iwlmvm]
[] iwl\_mvm\_unassign\_vif\_chanctx+0x81/0xc0 [iwlmvm]
[] \_\_ieee80211\_vif\_release\_channel+0xdf/0x470 [mac80211]
[] ieee80211\_vif\_release\_channel+0x4a/0xb0 [mac80211]
[] ieee80211\_set\_monitor\_channel+0x113/0x1b0 [mac80211]
[] cfg80211\_set\_monitor\_channel+0x77/0x2b0 [cfg80211]
[] \_\_nl80211\_set\_channel+0x122/0x140 [cfg80211]
[] nl80211\_set\_wiphy+0x284/0xaf0 [cfg80211]
This fixes https://bugzilla.kernel.org/show\_bug.cgi?id=75541
Reviewed-by: Johannes Berg
Signed-off-by: Emmanuel Grumbach
Signed-off-by: Greg Kroah-Hartman
commit 83134b6448d894e1842bbd765a87a456b5c67a1e
Author: Emmanuel Grumbach
Date: Sun Apr 13 16:03:11 2014 +0300
iwlwifi: pcie: disable interrupts upon PCIe alloc
commit 83f7a85f1134c6e914453f5747435415a23d516b upstream.
In case RFKILL is in KILL position, the NIC will issue an
interrupt straight away. This interrupt won't be sent
because it is masked in the hardware.
But if our interrupt service routine is called for another
reason (SHARED\_IRQ), then we'll look at the interrupt cause
and service it. This can cause bad things if we are not
ready yet.
Explicitly clean the interrupt cause register to make sure
we won't service anything before we are ready to.
Reported-and-tested-by: Alexander Monakov
Reviewed-by: Johannes Berg
Signed-off-by: Emmanuel Grumbach
Signed-off-by: Greg Kroah-Hartman
commit 753f4d8c21fee8d6c10943fc509f5a293208b14e
Author: Jianyu Zhan
Date: Mon Apr 14 13:47:40 2014 +0800
percpu: make pcpu\_alloc\_chunk() use pcpu\_mem\_free() instead of kfree()
commit 5a838c3b60e3a36ade764cf7751b8f17d7c9c2da upstream.
pcpu\_chunk\_struct\_size = sizeof(struct pcpu\_chunk) +
BITS\_TO\_LONGS(pcpu\_unit\_pages) \* sizeof(unsigned long)
It hardly could be ever bigger than PAGE\_SIZE even for large-scale machine,
but for consistency with its couterpart pcpu\_mem\_zalloc(),
use pcpu\_mem\_free() instead.
Commit b4916cb17c26 ("percpu: make pcpu\_free\_chunk() use
pcpu\_mem\_free() instead of kfree()") addressed this problem, but
missed this one.
tj: commit message updated
Signed-off-by: Jianyu Zhan
Signed-off-by: Tejun Heo
Fixes: 099a19d91ca4 ("percpu: allow limited allocation before slab is online)
Signed-off-by: Greg Kroah-Hartman
commit 53284d37ccc9d8fe19d14a2bf8766740ef060ca3
Author: Thomas Petazzoni
Date: Mon May 12 16:11:40 2014 +0200
ARM: mvebu: mvebu-soc-id: keep clock enabled if PCIe unit is enabled
commit b25bcf1bcaf6687991ae08dd76cd784bf9fe3d05 upstream.
Since the mvebu-soc-id code in mach-mvebu/ was introduced, several
users have noticed a regression: the PCIe card connected in the first
PCIe interface is not detected properly.
This is due to the fact that the mvebu-soc-id code enables the PCIe
clock of the first PCIe interface, reads the SoC device ID and
revision number (yes this information is made available as part of
PCIe registers), and then disables the clock. However, by doing this,
we gate the clock and therefore loose the complex PCIe configuration
that was done by the bootloader.
Unfortunately, as of today, the kernel is not capable of doing this
complex configuration by itself, so we really need to keep the PCIe
clock enabled. However, we don't want to keep it enabled
unconditionally: if the PCIe interface is not enabled or PCI support
is not compiled into the kernel, there is no reason to keep the PCIe
clock running.
This issue was discussed with Kevin Hilman, and the suggested solution
was to make the mvebu-soc-id code keep the clock enabled in case it
will be needed for PCIe. This is therefore the solution implemented in
this patch.
Long term, we hope to make the kernel more capable in terms of PCIe
configuration for this platform, which will anyway be needed to
support the compilation of the PCIe host controller driver as a
module. In the mean time however, we don't have much other choice than
to implement the currently proposed solution.
Reported-by: Neil Greatorex
Cc: Neil Greatorex
Cc: Jason Gunthorpe
Cc: Kevin Hilman
Signed-off-by: Thomas Petazzoni
Link: https://lkml.kernel.org/r/1399903900-29977-3-git-send-email-thomas.petazzoni@free-electrons.com
Fixes: af8d1c63afcb ("ARM: mvebu: Add support to get the ID and the revision of a SoC")
Acked-by: Gregory CLEMENT
Tested-by: Gregory CLEMENT
Tested-by: Andrew Lunn
Tested-by: Willy Tarreau
Signed-off-by: Jason Cooper
Signed-off-by: Greg Kroah-Hartman
commit 34ab79184f4c1cc86b469dadf5b0a449d27822de
Author: Thomas Petazzoni
Date: Mon May 12 16:11:39 2014 +0200
ARM: mvebu: mvebu-soc-id: add missing clk\_put() call
commit 42a18d1cf484d02e23afadfa5dc09356e6bef9fa upstream.
The mvebu-soc-id code in mach-mvebu/ needs to enable a clock to read
the SoC device ID and revision number. To do so, it does a clk\_get(),
then a clk\_prepare\_enable(), reads the value, and disables the clock
with clk\_disable\_unprepare(). However, it forgets to clk\_put() the
clock. This commit fixes this issue.
Signed-off-by: Thomas Petazzoni
Link: https://lkml.kernel.org/r/1399903900-29977-2-git-send-email-thomas.petazzoni@free-electrons.com
Fixes: af8d1c63afcb ("ARM: mvebu: Add support to get the ID and the revision of a SoC")
Acked-by: Gregory CLEMENT
Tested-by: Gregory CLEMENT
Tested-by: Andrew Lunn
Tested-by: Willy Tarreau
Signed-off-by: Jason Cooper
Signed-off-by: Greg Kroah-Hartman
commit e1373f319a61c13a1a8f89ff0e3d8966ca4c47fc
Author: Thomas Petazzoni
Date: Fri Apr 18 14:19:53 2014 +0200
PCI: mvebu: split PCIe BARs into multiple MBus windows when needed
commit 398f5d5e10b6b917cd9d35ef21d545b0afbada22 upstream.
MBus windows are used on Marvell platforms to map certain peripherals
in the physical address space. In the PCIe context, MBus windows are
needed to map PCIe I/O and memory regions in the physical address.
However, those MBus windows can only have power of two sizes, while
PCIe BAR do not necessarily guarantee this. For this reason, the
current pci-mvebu breaks on platforms where PCIe devices have BARs
that don't sum up to a power of two size at the emulated bridge level.
This commit fixes this by allowing the pci-mvebu driver to create
multiple contiguous MBus windows (each having a power of two size) to
cover a given PCIe BAR.
To achieve this, two functions are added: mvebu\_pcie\_add\_windows() and
mvebu\_pcie\_del\_windows() to respectively add and remove all the MBus
windows that are needed to map the provided PCIe region base and
size. The emulated PCI bridge code now calls those functions, instead
of directly calling the mvebu-mbus driver functions.
Fixes: 45361a4fe446 ('pci: PCIe driver for Marvell Armada 370/XP systems')
Signed-off-by: Thomas Petazzoni
Link: https://lkml.kernel.org/r/1397823593-1932-8-git-send-email-thomas.petazzoni@free-electrons.com
Tested-by: Neil Greatorex
Acked-by: Bjorn Helgaas
Signed-off-by: Jason Cooper
Signed-off-by: Greg Kroah-Hartman
commit 4db1788ac444bb3e1b0162c0495dc2e9e8056700
Author: Thomas Petazzoni
Date: Fri Apr 18 14:19:52 2014 +0200
bus: mvebu-mbus: allow several windows with the same target/attribute
commit b566e782be32145664d96ada3e389f17d32742e5 upstream.
Having multiple windows with the same target and attribute is actually
legal, and can be useful for PCIe windows, when PCIe BARs have a size
that isn't a power of two, and we therefore need to create several
MBus windows to cover the PCIe BAR for a given PCIe interface.
Fixes: fddddb52a6c4 ('bus: introduce an Marvell EBU MBus driver')
Signed-off-by: Thomas Petazzoni
Link: https://lkml.kernel.org/r/1397823593-1932-7-git-send-email-thomas.petazzoni@free-electrons.com
Tested-by: Neil Greatorex
Signed-off-by: Jason Cooper
Signed-off-by: Greg Kroah-Hartman
commit ebb332ca3d9b355cabc2c220c9b74114a26ece03
Author: Willy Tarreau
Date: Fri Apr 18 14:19:50 2014 +0200
PCI: mvebu: fix off-by-one in the computed size of the mbus windows
commit b6d07e0273d3296cfbdc88145b8a00ddbefb310a upstream.
mvebu\_pcie\_handle\_membase\_change() and
mvebu\_pcie\_handle\_iobase\_change() do not correctly compute the window
size. PCI uses an inclusive start/end address pair, which requires a
+1 when converting to size.
This only worked because a bug in the mbus driver allowed it to
silently accept and round up bogus sizes.
Fix this by adding one to the computed size.
Fixes: 45361a4fe446 ('PCIe driver for Marvell Armada 370/XP systems')
Signed-off-by: Willy Tarreau
Reviewed-By: Jason Gunthorpe
Signed-off-by: Thomas Petazzoni
Link: https://lkml.kernel.org/r/1397823593-1932-5-git-send-email-thomas.petazzoni@free-electrons.com
Tested-by: Neil Greatorex
Acked-by: Bjorn Helgaas
Signed-off-by: Jason Cooper
Signed-off-by: Greg Kroah-Hartman
commit fc94eff9a98437a6ca42b2cb27aa13bf4389c295
Author: Thomas Petazzoni
Date: Mon Apr 14 17:29:18 2014 +0200
memory: mvebu-devbus: fix the conversion of the bus width
commit ce965c3d2e68c5325dd5624eb101d70423022fef upstream.
According to the Armada 370 and Armada XP datasheets, the part of the
Device Bus register that configure the bus width should contain 0 for
a 8 bits bus width, and 1 for a 16 bits bus width (other values are
unsupported/reserved).
However, the current conversion done in the driver to convert from a
bus width in bits to the value expected by the register leads to
setting the register to 1 for a 8 bits bus, and 2 for a 16 bits bus.
This mistake was compensated by a mistake in the existing Device Tree
files for Armada 370/XP platforms: they were declaring a 8 bits bus
width, while the hardware in fact uses a 16 bits bus width.
This commit fixes that by adjusting the conversion logic.
This patch fixes a bug that was introduced in
3edad321b1bd2e6c8b5f38146c115c8982438f06 ('drivers: memory: Introduce
Marvell EBU Device Bus driver'), which was merged in v3.11.
Signed-off-by: Thomas Petazzoni
Link: https://lkml.kernel.org/r/1397489361-5833-2-git-send-email-thomas.petazzoni@free-electrons.com
Fixes: 3edad321b1bd ('drivers: memory: Introduce Marvell EBU Device Bus driver')
Acked-by: Ezequiel Garcia
Acked-by: Gregory CLEMENT
Signed-off-by: Jason Cooper
Signed-off-by: Greg Kroah-Hartman
commit efa2a039afc3eac43e529e02bb47df62042a504c
Author: Lai Jiangshan
Date: Fri Apr 18 11:04:16 2014 -0400
workqueue: make rescuer\_thread() empty wq->maydays list before exiting
commit 4d595b866d2c653dc90a492b9973a834eabfa354 upstream.
After a @pwq is scheduled for emergency execution, other workers may
consume the affectd work items before the rescuer gets to them. This
means that a workqueue many have pwqs queued on @wq->maydays list
while not having any work item pending or in-flight. If
destroy\_workqueue() executes in such condition, the rescuer may exit
without emptying @wq->maydays.
This currently doesn't cause any actual harm. destroy\_workqueue() can
safely destroy all the involved data structures whether @wq->maydays
is populated or not as nobody access the list once the rescuer exits.
However, this is nasty and makes future development difficult. Let's
update rescuer\_thread() so that it empties @wq->maydays after seeing
should\_stop to guarantee that the list is empty on rescuer exit.
tj: Updated comment and patch description.
Signed-off-by: Lai Jiangshan
Signed-off-by: Tejun Heo
Signed-off-by: Greg Kroah-Hartman
commit 7b21cacc8bf8fda9822d63496fb38bc6def34046
Author: Lai Jiangshan
Date: Fri Apr 18 11:04:16 2014 -0400
workqueue: fix a possible race condition between rescuer and pwq-release
commit 77668c8b559e4fe2acf2a0749c7c83cde49a5025 upstream.
There is a race condition between rescuer\_thread() and
pwq\_unbound\_release\_workfn().
Even after a pwq is scheduled for rescue, the associated work items
may be consumed by any worker. If all of them are consumed before the
rescuer gets to them and the pwq's base ref was put due to attribute
change, the pwq may be released while still being linked on
@wq->maydays list making the rescuer dereference already freed pwq
later.
Make send\_mayday() pin the target pwq until the rescuer is done with
it.
tj: Updated comment and patch description.
Signed-off-by: Lai Jiangshan
Signed-off-by: Tejun Heo
Signed-off-by: Greg Kroah-Hartman
commit 65eefbee64455cb2f18a77be616ca1df10c95d6d
Author: Daeseok Youn
Date: Wed Apr 16 14:32:29 2014 +0900
workqueue: fix bugs in wq\_update\_unbound\_numa() failure path
commit 77f300b198f93328c26191b52655ce1b62e202cf upstream.
wq\_update\_unbound\_numa() failure path has the following two bugs.
- alloc\_unbound\_pwq() is called without holding wq->mutex; however, if
the allocation fails, it jumps to out\_unlock which tries to unlock
wq->mutex.
- The function should switch to dfl\_pwq on failure but didn't do so
after alloc\_unbound\_pwq() failure.
Fix it by regrabbing wq->mutex and jumping to use\_dfl\_pwq on
alloc\_unbound\_pwq() failure.
Signed-off-by: Daeseok Youn
Acked-by: Lai Jiangshan
Signed-off-by: Tejun Heo
Fixes: 4c16bd327c74 ("workqueue: implement NUMA affinity for unbound workqueues")
Signed-off-by: Greg Kroah-Hartman
commit 91c372b12c4a6dca1663338aed088e4c19d14f17
Author: J. Bruce Fields
Date: Tue May 20 15:55:21 2014 -0400
nfsd4: remove lockowner when removing lock stateid
commit a1b8ff4c97b4375d21b6d6c45d75877303f61b3b upstream.
The nfsv4 state code has always assumed a one-to-one correspondance
between lock stateid's and lockowners even if it appears not to in some
places.
We may actually change that, but for now when FREE\_STATEID releases a
lock stateid it also needs to release the parent lockowner.
Symptoms were a subsequent LOCK crashing in find\_lockowner\_str when it
calls same\_lockowner\_ino on a lockowner that unexpectedly has an empty
so\_stateids list.
Signed-off-by: J. Bruce Fields
Signed-off-by: Greg Kroah-Hartman
commit befdf0a5cec2ca490bca178b1baf2dba1e7ec261
Author: J. Bruce Fields
Date: Thu May 8 11:19:41 2014 -0400
nfsd4: warn on finding lockowner without stateid's
commit 27b11428b7de097c42f205beabb1764f4365443b upstream.
The current code assumes a one-to-one lockowner<->lock stateid
correspondance.
Signed-off-by: J. Bruce Fields
Signed-off-by: Greg Kroah-Hartman
commit 930cf0edb2938e26799ea000d96b77bbab9cb98e
Author: Kinglong Mee
Date: Fri Apr 18 20:49:04 2014 +0800
NFSD: Call ->set\_acl with a NULL ACL structure if no entries
commit aa07c713ecfc0522916f3cd57ac628ea6127c0ec upstream.
After setting ACL for directory, I got two problems that caused
by the cached zero-length default posix acl.
This patch make sure nfsd4\_set\_nfs4\_acl calls ->set\_acl
with a NULL ACL structure if there are no entries.
Thanks for Christoph Hellwig's advice.
First problem:
............ hang ...........
Second problem:
[ 1610.167668] ------------[ cut here ]------------
[ 1610.168320] kernel BUG at /root/nfs/linux/fs/nfsd/nfs4acl.c:239!
[ 1610.168320] invalid opcode: 0000 [#1] SMP DEBUG\_PAGEALLOC
[ 1610.168320] Modules linked in: nfsv4(OE) nfs(OE) nfsd(OE)
rpcsec\_gss\_krb5 fscache ip6t\_rpfilter ip6t\_REJECT cfg80211 xt\_conntrack
rfkill ebtable\_nat ebtable\_broute bridge stp llc ebtable\_filter ebtables
ip6table\_nat nf\_conntrack\_ipv6 nf\_defrag\_ipv6 nf\_nat\_ipv6
ip6table\_mangle ip6table\_security ip6table\_raw ip6table\_filter
ip6\_tables iptable\_nat nf\_conntrack\_ipv4 nf\_defrag\_ipv4 nf\_nat\_ipv4
nf\_nat nf\_conntrack iptable\_mangle iptable\_security iptable\_raw
auth\_rpcgss nfs\_acl snd\_intel8x0 ppdev lockd snd\_ac97\_codec ac97\_bus
snd\_pcm snd\_timer e1000 pcspkr parport\_pc snd parport serio\_raw joydev
i2c\_piix4 sunrpc(OE) microcode soundcore i2c\_core ata\_generic pata\_acpi
[last unloaded: nfsd]
[ 1610.168320] CPU: 0 PID: 27397 Comm: nfsd Tainted: G OE
3.15.0-rc1+ #15
[ 1610.168320] Hardware name: innotek GmbH VirtualBox/VirtualBox, BIOS
VirtualBox 12/01/2006
[ 1610.168320] task: ffff88005ab653d0 ti: ffff88005a944000 task.ti:
ffff88005a944000
[ 1610.168320] RIP: 0010:[] []
\_posix\_to\_nfsv4\_one+0x3cd/0x3d0 [nfsd]
[ 1610.168320] RSP: 0018:ffff88005a945b00 EFLAGS: 00010293
[ 1610.168320] RAX: 0000000000000001 RBX: ffff88006700bac0 RCX:
0000000000000000
[ 1610.168320] RDX: 0000000000000000 RSI: ffff880067c83f00 RDI:
ffff880068233300
[ 1610.168320] RBP: ffff88005a945b48 R08: ffffffff81c64830 R09:
0000000000000000
[ 1610.168320] R10: ffff88004ea85be0 R11: 000000000000f475 R12:
ffff880068233300
[ 1610.168320] R13: 0000000000000003 R14: 0000000000000002 R15:
ffff880068233300
[ 1610.168320] FS: 0000000000000000(0000) GS:ffff880077800000(0000)
knlGS:0000000000000000
[ 1610.168320] CS: 0010 DS: 0000 ES: 0000 CR0: 000000008005003b
[ 1610.168320] CR2: 00007f5bcbd3b0b9 CR3: 0000000001c0f000 CR4:
00000000000006f0
[ 1610.168320] DR0: 0000000000000000 DR1: 0000000000000000 DR2:
0000000000000000
[ 1610.168320] DR3: 0000000000000000 DR6: 00000000fffe0ff0 DR7:
0000000000000400
[ 1610.168320] Stack:
[ 1610.168320] ffffffff00000000 0000000b67c83500 000000076700bac0
0000000000000000
[ 1610.168320] ffff88006700bac0 ffff880068233300 ffff88005a945c08
0000000000000002
[ 1610.168320] 0000000000000000 ffff88005a945b88 ffffffffa034e2d5
000000065a945b68
[ 1610.168320] Call Trace:
[ 1610.168320] [] nfsd4\_get\_nfs4\_acl+0x95/0x150 [nfsd]
[ 1610.168320] [] nfsd4\_encode\_fattr+0x646/0x1e70 [nfsd]
[ 1610.168320] [] ? kmemleak\_alloc+0x4e/0xb0
[ 1610.168320] [] ?
nfsd\_setuser\_and\_check\_port+0x52/0x80 [nfsd]
[ 1610.168320] [] ? selinux\_cred\_prepare+0x1b/0x30
[ 1610.168320] [] nfsd4\_encode\_getattr+0x5a/0x60 [nfsd]
[ 1610.168320] [] nfsd4\_encode\_operation+0x67/0x110
[nfsd]
[ 1610.168320] [] nfsd4\_proc\_compound+0x21d/0x810 [nfsd]
[ 1610.168320] [] nfsd\_dispatch+0xbb/0x200 [nfsd]
[ 1610.168320] [] svc\_process\_common+0x46d/0x6d0 [sunrpc]
[ 1610.168320] [] svc\_process+0x103/0x170 [sunrpc]
[ 1610.168320] [] nfsd+0xbf/0x130 [nfsd]
[ 1610.168320] [] ? nfsd\_destroy+0x80/0x80 [nfsd]
[ 1610.168320] [] kthread+0xd2/0xf0
[ 1610.168320] [] ? insert\_kthread\_work+0x40/0x40
[ 1610.168320] [] ret\_from\_fork+0x7c/0xb0
[ 1610.168320] [] ? insert\_kthread\_work+0x40/0x40
[ 1610.168320] Code: 78 02 e9 e7 fc ff ff 31 c0 31 d2 31 c9 66 89 45 ce
41 8b 04 24 66 89 55 d0 66 89 4d d2 48 8d 04 80 49 8d 5c 84 04 e9 37 fd
ff ff <0f> 0b 90 0f 1f 44 00 00 55 8b 56 08 c7 07 00 00 00 00 8b 46 0c
[ 1610.168320] RIP [] \_posix\_to\_nfsv4\_one+0x3cd/0x3d0
[nfsd]
[ 1610.168320] RSP
[ 1610.257313] ---[ end trace 838254e3e352285b ]---
Signed-off-by: Kinglong Mee
Signed-off-by: J. Bruce Fields
Signed-off-by: Greg Kroah-Hartman
commit eac32428fe7e6f4337d23682ee9c56530bbf3790
Author: Trond Myklebust
Date: Fri Apr 18 14:43:57 2014 -0400
NFSd: call rpc\_destroy\_wait\_queue() from free\_client()
commit 4cb57e3032d4e4bf5e97780e9907da7282b02b0c upstream.
Mainly to ensure that we don't leave any hanging timers.
Signed-off-by: Trond Myklebust
Signed-off-by: J. Bruce Fields
Signed-off-by: Greg Kroah-Hartman
commit 25bd4bc3d6f8825ce64646fa6751288ba59d597a
Author: Trond Myklebust
Date: Fri Apr 18 14:43:56 2014 -0400
NFSd: Move default initialisers from create\_client() to alloc\_client()
commit 5694c93e6c4954fa9424c215f75eeb919bddad64 upstream.
Aside from making it clearer what is non-trivial in create\_client(), it
also fixes a bug whereby we can call free\_client() before idr\_init()
has been called.
Signed-off-by: Trond Myklebust
Signed-off-by: J. Bruce Fields
Signed-off-by: Greg Kroah-Hartman
commit d970de72f3c225e61487e67d0fa6e1842fcd0162
Author: Takashi Iwai
Date: Fri May 23 09:02:44 2014 +0200
ALSA: hda - Fix onboard audio on Intel H97/Z97 chipsets
commit 77f07800cb456bed6e5c345e6e4e83e8eda62437 upstream.
The recent Intel H97/Z97 chipsets need the similar setups like other
Intel chipsets for snooping, etc. Especially without snooping, the
audio playback stutters or gets corrupted. This fix patch just adds
the corresponding PCI ID entry with the proper flags.
Reported-and-tested-by: Arthur Borsboom
Signed-off-by: Takashi Iwai
Signed-off-by: Greg Kroah-Hartman
commit b2a89593b10d1f939253bdd952c782f01dbca7a0
Author: Anssi Hannula
Date: Mon May 5 02:38:43 2014 +0300
ALSA: hda - hdmi: Set converter channel count even without sink
commit f06ab794af7055d0949b09885f79f8b493deec64 upstream.
Since commit 1df5a06a ("ALSA: hda - hdmi: Fix programmed active channel
count") channel count is no longer being set if monitor\_present is 0.
This is because setting the count was moved after the CA value is
determined, which is only after the monitor\_present check in
hdmi\_setup\_audio\_infoframe().
Unfortunately, in some cases, such as with a non-spec-compliant codec or
with a problematic video driver, monitor\_present is always 0. As a
specific example, this seems to happen with gen1 ATV (SiI1390 codec),
causing left-channel-only stereo playback (multi-channel playback has
apparently never worked with this codec despite it reporting 8 channels,
reason unknown).
Simply setting converter channel count without setting the pin infoframe
and channel mapping as well does not theoretically make much sense as
this will just mean they are out-of-sync and multichannel playback will
have a wrong channel mapping.
However, adding back just setting the converter channel count even in
no-monitor case is the safest change which at least fixes the stereo
playback regression on SiI1390 codec. Do that.
Signed-off-by: Anssi Hannula
Reported-by: Stephan Raue
Tested-by: Stephan Raue
Signed-off-by: Takashi Iwai
Signed-off-by: Greg Kroah-Hartman
commit d5aa7c8942d1bda9d77423b6bb00756b43eb1f88
Author: Hans de Goede
Date: Mon May 19 22:54:09 2014 -0700
Input: synaptics - change min/max quirk table to pnp-id matching
commit 0f68f39c393bc06ac5ccc8794f0e2ed841e41c3e upstream.
Most of the affected models share pnp-ids for the touchpad. So switching
to pnp-ids give us 2 advantages:
1) It shrinks the quirk list
2) It will lower the new quirk addition frequency, ie the recently added W540
quirk would not have been necessary since it uses the same LEN0034 pnp ids
as other models already added before it
As an added bonus it actually puts the quirk on the actual psmouse, rather
then on the machine, which is technically more correct.
Signed-off-by: Hans de Goede
Signed-off-by: Dmitry Torokhov
Signed-off-by: Greg Kroah-Hartman
commit 9cffb0d9a3781be5233f768eba98e24e842401da
Author: Hans de Goede
Date: Mon May 19 22:53:23 2014 -0700
Input: synaptics - add a matches\_pnp\_id helper function
commit e2f611029b370bb7a04236215ad4b36aa8cb98cd upstream.
This is a preparation patch for simplifying the min/max quirk table.
Cc: stable@vger.kernel.org
Signed-off-by: Hans de Goede
Signed-off-by: Dmitry Torokhov
Signed-off-by: Greg Kroah-Hartman
commit 3f437926516b1689898011378c4aa88daee87d6b
Author: Hans de Goede
Date: Mon May 19 22:52:30 2014 -0700
Input: synaptics - T540p - unify with other LEN0034 models
commit 6d396ede224dc596d92d7cab433713536e68916c upstream.
The T540p has a touchpad with pnp-id LEN0034, all the models with this
pnp-id have the same min/max values, except the T540p where the values are
slightly off. Fix them to be identical.
This is a preparation patch for simplifying the quirk table.
Signed-off-by: Hans de Goede
Signed-off-by: Dmitry Torokhov
Signed-off-by: Greg Kroah-Hartman
commit 58cd56a83d858b33f4c8945216bad2223eb29a9a
Author: Hans de Goede
Date: Wed May 14 11:10:40 2014 -0700
Input: synaptics - add min/max quirk for the ThinkPad W540
commit 0b5fe736fe923f1f5e05413878d5990e92ffbdf5 upstream.
https://bugzilla.redhat.com/show\_bug.cgi?id=1096436
Tested-and-reported-by: ajayr@bigfoot.com
Signed-off-by: Hans de Goede
Signed-off-by: Dmitry Torokhov
Signed-off-by: Greg Kroah-Hartman
commit 5a543920cdae8d847461d60d4817667c31db93d4
Author: Hans de Goede
Date: Mon May 5 09:36:43 2014 -0700
Input: elantech - fix touchpad initialization on Gigabyte U2442
commit 36189cc3cd57ab0f1cd75241f93fe01de928ac06 upstream.
The hw\_version 3 Elantech touchpad on the Gigabyte U2442 does not accept
0x0b as initialization value for r10, this stand-alone version of the
driver: http://planet76.com/drivers/elantech/psmouse-elantech-v6.tar.bz2
Uses 0x03 which does work, so this means not setting bit 3 of r10 which
sets: "Enable Real H/W Resolution In Absolute mode"
Which will result in half the x and y resolution we get with that bit set,
so simply not setting it everywhere is not a solution. We've been unable to
find a way to identify touchpads where setting the bit will fail, so this
patch uses a dmi based blacklist for this.
https://bugzilla.kernel.org/show\_bug.cgi?id=61151
Reported-by: Philipp Wolfer
Tested-by: Philipp Wolfer
Signed-off-by: Hans de Goede
Signed-off-by: Dmitry Torokhov
Signed-off-by: Greg Kroah-Hartman
commit 512a588518fefae5dab75b89b734cfb64e53177b
Author: Sheng-Liang Song
Date: Thu Apr 24 16:28:29 2014 -0700
Input: atkbd - fix keyboard not working on some LG laptops
commit 3d725caa9dcc78c3dc9e7ea0c04f626468edd9c9 upstream.
After issuing ATKBD\_CMD\_RESET\_DIS, keyboard on some LG laptops stops
working. The workaround is to stop issuing ATKBD\_CMD\_RESET\_DIS commands.
In order to keep changes in atkbd driver to the minimum we check DMI
signature and only skip ATKBD\_CMD\_RESET\_DIS if we are running on LG
LW25-B7HV or P1-J273B.
Signed-off-by: Sheng-Liang Song
Signed-off-by: Dmitry Torokhov
Signed-off-by: Greg Kroah-Hartman
commit df02df0a9269f9d27c0d3738e330b2c166445f76
Author: Romain Izard
Date: Tue Mar 4 10:09:39 2014 +0100
trace: module: Maintain a valid user count
commit 098507ae3ec2331476fb52e85d4040c1cc6d0ef4 upstream.
The replacement of the 'count' variable by two variables 'incs' and
'decs' to resolve some race conditions during module unloading was done
in parallel with some cleanup in the trace subsystem, and was integrated
as a merge.
Unfortunately, the formula for this replacement was wrong in the tracing
code, and the refcount in the traces was not usable as a result.
Use 'count = incs - decs' to compute the user count.
Link: http://lkml.kernel.org/p/1393924179-9147-1-git-send-email-romain.izard.pro@gmail.com
Acked-by: Ingo Molnar
Cc: Rusty Russell
Cc: Frederic Weisbecker
Fixes: c1ab9cab7509 "merge conflict resolution"
Signed-off-by: Romain Izard
Signed-off-by: Steven Rostedt
Signed-off-by: Greg Kroah-Hartman
commit f0754e5903c14a1f36da90275b1c17becddc581c
Author: Al Viro
Date: Sat Apr 19 12:30:58 2014 -0400
fix races between \_\_d\_instantiate() and checks of dentry flags
commit 22213318af7ae265bc6cd8aef2febbc2d69a2440 upstream.
in non-lazy walk we need to be careful about dentry switching from
negative to positive - both ->d\_flags and ->d\_inode are updated,
and in some places we might see only one store. The cases where
dentry has been obtained by dcache lookup with ->i\_mutex held on
parent are safe - ->d\_lock and ->i\_mutex provide all the barriers
we need. However, there are several places where we run into
trouble:
\* do\_last() fetches ->d\_inode, then checks ->d\_flags and
assumes that inode won't be NULL unless d\_is\_negative() is true.
Race with e.g. creat() - we might have fetched the old value of
->d\_inode (still NULL) and new value of ->d\_flags (already not
DCACHE\_MISS\_TYPE). Lin Ming has observed and reported the resulting
oops.
\* a bunch of places checks ->d\_inode for being non-NULL,
then checks ->d\_flags for "is it a symlink". Race with symlink(2)
in case if our CPU sees ->d\_inode update first - we see non-NULL
there, but ->d\_flags still contains DCACHE\_MISS\_TYPE instead of
DCACHE\_SYMLINK\_TYPE. Result: false negative on "should we follow
link here?", with subsequent unpleasantness.
Reported-and-tested-by: Lin Ming
Signed-off-by: Al Viro
Signed-off-by: Greg Kroah-Hartman
commit 36eca0cf9c5f995fd0b7933a11d58fa5f640f3ae
Author: Ian Kent
Date: Tue May 6 12:50:06 2014 -0700
autofs: fix lockref lookup
commit 6b6751f7feba68d8f5c72b72cc69a1c5a625529c upstream.
autofs needs to be able to see private data dentry flags for its dentrys
that are being created but not yet hashed and for its dentrys that have
been rmdir()ed but not yet freed. It needs to do this so it can block
processes in these states until a status has been returned to indicate
the given operation is complete.
It does this by keeping two lists, active and expring, of dentrys in
this state and uses ->d\_release() to keep them stable while it checks
the reference count to determine if they should be used.
But with the recent lockref changes dentrys being freed sometimes don't
transition to a reference count of 0 before being freed so autofs can
occassionally use a dentry that is invalid which can lead to a panic.
Signed-off-by: Ian Kent
Cc: Al Viro
Cc: Linus Torvalds
Signed-off-by: Andrew Morton
Signed-off-by: Linus Torvalds
Signed-off-by: Greg Kroah-Hartman
commit 600d8cbcd0f10b6535429a21bfb6cf2369155759
Author: Yan, Zheng
Date: Mon Apr 14 13:13:02 2014 +0800
ceph: clear directory's completeness when creating file
commit 0a8a70f96fe1bd3e07c15bb86fd247e76102398a upstream.
When creating a file, ceph\_set\_dentry\_offset() puts the new dentry
at the end of directory's d\_subdirs, then set the dentry's offset
based on directory's max offset. The offset does not reflect the
real postion of the dentry in directory. Later readdir reply from
MDS may change the dentry's position/offset. This inconsistency
can cause missing/duplicate entries in readdir result if readdir
is partly satisfied by dcache\_readdir().
The fix is clear directory's completeness after creating/renaming
file. It prevents later readdir from using dcache\_readdir().
Fixes: http://tracker.ceph.com/issues/8025
Signed-off-by: Yan, Zheng
Reviewed-by: Sage Weil
Signed-off-by: Greg Kroah-Hartman
commit a23e2fa7ab52dfec62dc40de5cea10aec7cacdda
Author: David Ertman
Date: Tue Mar 25 04:27:55 2014 +0000
e1000e: Fix no connectivity when driver loaded with cable out
commit b20a774495671f037e7160ea2ce8789af6b61533 upstream.
In commit da1e2046e5, the flow for enabling/disabling an Si errata
workaround (e1000\_lv\_jumbo\_workaround\_ich8lan) was changed to fix a problem
with iAMT connections dropping on interface down with jumbo frames set.
Part of this change was to move the function call disabling the workaround
to e1000e\_down() from the e1000\_setup\_rctl() function. The mechanic for
disabling of this workaround involves writing several MAC and PHY registers
back to hardware defaults.
After this commit, when the driver is loaded with the cable out, the PHY
registers are not programmed with the correct default values. This causes
the device to be capable of transmitting packets, but is unable to recieve
them until this workaround is called.
The flow of e1000e's open code relies upon calling the above workaround to
expicitly program these registers either with jumbo frame appropriate settings
or h/w defaults on 82579 and newer hardware.
Fix this issue by adding logic to e1000\_setup\_rctl() that not only calls
e1000\_lv\_jumbo\_workaround\_ich8lan() when jumbo frames are set, to enable the
workaround, but also calls this function to explicitly disable the workaround
in the case that jumbo frames are not set.
Signed-off-by: Dave Ertman
Tested-by: Jeff Pieper
Signed-off-by: Jeff Kirsher
Cc: Thomas Gleixner
Signed-off-by: Greg Kroah-Hartman
commit 4305a2a568662fec9b05f4887cf1e0e37d02c127
Author: Hans de Goede
Date: Sat Apr 19 22:26:41 2014 -0700
Input: synaptics - report INPUT\_PROP\_TOPBUTTONPAD property
commit 43e19888b1fe2a3e8a5543030c5b286cde38b3f5 upstream.
Check PNP ID of the PS/2 AUX port and report INPUT\_PROP\_TOPBUTTONPAD
property for for touchpads with top button areas.
Signed-off-by: Hans de Goede
Signed-off-by: Dmitry Torokhov
Signed-off-by: Greg Kroah-Hartman
commit 46ce727cb672b6dbf26aa8d79681ade18fcaa3e7
Author: Hans de Goede
Date: Sat Apr 19 22:25:45 2014 -0700
Input: Add INPUT\_PROP\_TOPBUTTONPAD device property
commit f37c013409bb78ebb958821aa10d069e707cabac upstream.
On some newer laptops with a trackpoint the physical buttons for the
trackpoint have been removed to allow for a larger touchpad. On these
laptops the buttonpad has clearly marked areas on the top which are to be
used as trackpad buttons.
Users of the event device-node need to know about this, so that they can
properly interpret BTN\_LEFT events as being a left / right / middle click
depending on where on the button pad the clicking finger is.
This commits adds a INPUT\_PROP\_TOPBUTTONPAD device property which drivers
for such buttonpads will use to signal to the user that this buttonpad not
only has the normal bottom button area, but also a top button area.
Signed-off-by: Hans de Goede
Signed-off-by: Dmitry Torokhov
Signed-off-by: Greg Kroah-Hartman
commit d1d5f913ffad1020726988f8570d8befc3228615
Author: Hans de Goede
Date: Sat Apr 19 20:47:35 2014 -0700
Input: i8042 - add firmware\_id support
commit a7c5868c3482127cb308c779b8a6460a3353c17f upstream.
Fill in the new serio firmware\_id sysfs attribute for pnp instantiated
8042 serio ports.
Signed-off-by: Hans de Goede
Acked-by: Peter Hutterer
Signed-off-by: Dmitry Torokhov
Signed-off-by: Greg Kroah-Hartman
commit bca4529f141352f6de2f66a2772c86b30b6cfaea
Author: Hans de Goede
Date: Sat Apr 19 20:39:35 2014 -0700
Input: serio - add firmware\_id sysfs attribute
commit 0456c66f4e905e1ca839318219c770988b47975c upstream.
serio devices exposed via platform firmware interfaces such as ACPI may
provide additional identifying information of use to userspace.
We don't associate the serio devices with the firmware device (we don't
set it as parent), so there's no way for userspace to make use of this
information.
We cannot change the parent for serio devices instantiated though a
firmware interface as that would break suspend / resume ordering.
Therefore this patch adds a new firmware\_id sysfs attribute so that
userspace can get a string from there with any additional identifying
information the firmware interface may provide.
Signed-off-by: Hans de Goede
Acked-by: Peter Hutterer
Signed-off-by: Dmitry Torokhov
Signed-off-by: Greg Kroah-Hartman
commit 3b13d52c662b61444fe5c5b6f5bb9e549017054e
Author: Chew, Kean ho
Date: Sat Mar 1 00:03:56 2014 +0800
i2c: i801: enable Intel BayTrail SMBUS
commit 1b31e9b76ef8c62291e698dfdb973499986a7f68 upstream.
Add Device ID of Intel BayTrail SMBus Controller.
Signed-off-by: Chew, Kean ho
Signed-off-by: Chew, Chiau Ee
Reviewed-by: Jean Delvare
Signed-off-by: Wolfram Sang
Cc: "Chang, Rebecca Swee Fun"
Signed-off-by: Greg Kroah-Hartman
commit 429f444ee6aea8146c115dded7b8b0214cea5e2d
Author: Salva Peiró
Date: Wed Apr 30 19:48:02 2014 +0200
media: media-device: fix infoleak in ioctl media\_enum\_entities()
commit e6a623460e5fc960ac3ee9f946d3106233fd28d8 upstream.
This fixes CVE-2014-1739.
Signed-off-by: Salva Peiró
Acked-by: Laurent Pinchart
Signed-off-by: Mauro Carvalho Chehab
Signed-off-by: Greg Kroah-Hartman
commit 479ffa4481d1a6ab94acfdef021687c8129b4205
Author: Dan Carpenter
Date: Thu Nov 7 08:08:44 2013 +0000
clk: vexpress: NULL dereference on error path
commit 6b4ed8b00e93bd31f24a25f59ed8d1b808d0cc00 upstream.
If the allocation fails then we dereference the NULL in the error path.
Just return directly.
Fixes: ed27ff1db869 ('clk: Versatile Express clock generators ("osc") driver')
Signed-off-by: Dan Carpenter
Signed-off-by: Pawel Moll
Signed-off-by: Greg Kroah-Hartman
commit 0253b3bff10fb9e5464efdc47e27272b47ad40b7
Author: Tim Chen
Date: Mon Mar 17 16:52:26 2014 -0700
crypto: crypto\_wq - Fix late crypto work queue initialization
commit 130fa5bc81b44b6cc1fbdea3abf6db0da22964e0 upstream.
The crypto algorithm modules utilizing the crypto daemon could
be used early when the system start up. Using module\_init
does not guarantee that the daemon's work queue is initialized
when the cypto alorithm depending on crypto\_wq starts. It is necessary
to initialize the crypto work queue earlier at the subsystem
init time to make sure that it is initialized
when used.
Signed-off-by: Tim Chen
Signed-off-by: Herbert Xu
Signed-off-by: Greg Kroah-Hartman
commit 7ce60f41fa20ab7b08eef3d972804f7efe7938c3
Author: Aristeu Rozanski
Date: Mon May 5 11:18:59 2014 -0400
device\_cgroup: check if exception removal is allowed
commit d2c2b11cfa134f4fbdcc34088824da26a084d8de upstream.
[PATCH v3 1/2] device\_cgroup: check if exception removal is allowed
When the device cgroup hierarchy was introduced in
bd2953ebbb53 - devcg: propagate local changes down the hierarchy
a specific case was overlooked. Consider the hierarchy bellow:
A default policy: ALLOW, exceptions will deny access
\
B default policy: ALLOW, exceptions will deny access
There's no need to verify when an new exception is added to B because
in this case exceptions will deny access to further devices, which is
always fine. Hierarchy in device cgroup only makes sure B won't have
more access than A.
But when an exception is removed (by writing devices.allow), it isn't
checked if the user is in fact removing an inherited exception from A,
thus giving more access to B.
Example:
# echo 'a' >A/devices.allow
# echo 'c 1:3 rw' >A/devices.deny
# echo $$ >A/B/tasks
# echo >/dev/null
-bash: /dev/null: Operation not permitted
# echo 'c 1:3 w' >A/B/devices.allow
# echo >/dev/null
#
This shouldn't be allowed and this patch fixes it by making sure to never allow
exceptions in this case to be removed if the exception is partially or fully
present on the parent.
v3: missing '\*' in function description
v2: improved log message and formatting fixes
Cc: cgroups@vger.kernel.org
Cc: Li Zefan
Signed-off-by: Aristeu Rozanski
Acked-by: Serge Hallyn
Signed-off-by: Tejun Heo
Signed-off-by: Greg Kroah-Hartman
commit 6d838324fa8a4a328fa760066beba3a7dcb24832
Author: Aristeu Rozanski
Date: Mon Apr 21 12:13:03 2014 -0400
device\_cgroup: rework device access check and exception checking
commit 79d719749d23234e9b725098aa49133f3ef7299d upstream.
Whenever a device file is opened and checked against current device
cgroup rules, it uses the same function (may\_access()) as when a new
exception rule is added by writing devices.{allow,deny}. And in both
cases, the algorithm is the same, doesn't matter the behavior.
First problem is having device access to be considered the same as rule
checking. Consider the following structure:
A (default behavior: allow, exceptions disallow access)
\
B (default behavior: allow, exceptions disallow access)
A new exception is added to B by writing devices.deny:
c 12:34 rw
When checking if that exception is allowed in may\_access():
if (dev\_cgroup->behavior == DEVCG\_DEFAULT\_ALLOW) {
if (behavior == DEVCG\_DEFAULT\_ALLOW) {
/\* the exception will deny access to certain devices \*/
return true;
Which is ok, since B is not getting more privileges than A, it doesn't
matter and the rule is accepted
Now, consider it's a device file open check and the process belongs to
cgroup B. The access will be generated as:
behavior: allow
exception: c 12:34 rw
The very same chunk of code will allow it, even if there's an explicit
exception telling to do otherwise.
A simple test case:
# mkdir new\_group
# cd new\_group
# echo $$ >tasks
# echo "c 1:3 w" >devices.deny
# echo >/dev/null
# echo $?
0
This is a serious bug and was introduced on
c39a2a3018f8 devcg: prepare may\_access() for hierarchy support
To solve this problem, the device file open function was split from the
new exception check.
Second problem is how exceptions are processed by may\_access(). The
first part of the said function tries to match fully with an existing
exception:
list\_for\_each\_entry\_rcu(ex, &dev\_cgroup->exceptions, list) {
if ((refex->type & DEV\_BLOCK) && !(ex->type & DEV\_BLOCK))
continue;
if ((refex->type & DEV\_CHAR) && !(ex->type & DEV\_CHAR))
continue;
if (ex->major != ~0 && ex->major != refex->major)
continue;
if (ex->minor != ~0 && ex->minor != refex->minor)
continue;
if (refex->access & (~ex->access))
continue;
match = true;
break;
}
That means the new exception should be contained into an existing one to
be considered a match:
New exception Existing match? notes
b 12:34 rwm b 12:34 rwm yes
b 12:34 r b \*:34 rw yes
b 12:34 rw b 12:34 w no extra "r"
b \*:34 rw b 12:34 rw no too broad "\*"
b \*:34 rw b \*:34 rwm yes
Which is fine in some cases. Consider:
A (default behavior: deny, exceptions allow access)
\
B (default behavior: deny, exceptions allow access)
In this case the full match makes sense, the new exception cannot add
more access than the parent allows
But this doesn't always work, consider:
A (default behavior: allow, exceptions disallow access)
\
B (default behavior: deny, exceptions allow access)
In this case, a new exception in B shouldn't match any of the exceptions
in A, after all you can't allow something that was forbidden by A. But
consider this scenario:
New exception Existing in A match? outcome
b 12:34 rw b 12:34 r no exception is accepted
Because the new exception has "w" as extra, it doesn't match, so it'll
be added to B's exception list.
The same problem can happen during a file access check. Consider a
cgroup with allow as default behavior:
Access Exception match?
b 12:34 rw b 12:34 r no
In this case, the access didn't match any of the exceptions in the
cgroup, which is required since exceptions will disallow access.
To solve this problem, two new functions were created to match an
exception either fully or partially. In the example above, a partial
check will be performed and it'll produce a match since at least
"b 12:34 r" from "b 12:34 rw" access matches.
Cc: cgroups@vger.kernel.org
Cc: Tejun Heo
Cc: Serge Hallyn
Cc: Li Zefan
Signed-off-by: Aristeu Rozanski
Signed-off-by: Tejun Heo
Signed-off-by: Greg Kroah-Hartman
commit c0a6fd1b45d9fd5ee34bb7884e4af79002893d28
Author: Geert Uytterhoeven
Date: Mon Apr 14 18:52:14 2014 +0200
Documentation: Update stable address in Chinese and Japanese translations
commit 98b0f811aade1b7c6e7806c86aa0befd5919d65f upstream.
The English and Korean translations were updated, the Chinese and Japanese
weren't.
Signed-off-by: Geert Uytterhoeven
Signed-off-by: Greg Kroah-Hartman
Signed-off-by: Greg Kroah-Hartman
commit 9f531ef39d2a3dcfb50e66faabf66a6376f324e5
Author: Emil Goode
Date: Sun Mar 9 21:06:51 2014 +0100
brcmsmac: fix deadlock on missing firmware
commit 8fc1e8c240aab968db658b2d8d079b4391207a36 upstream.
When brcm80211 firmware is not installed networking hangs.
A deadlock happens because we call ieee80211\_unregister\_hw()
from the .start callback of struct ieee80211\_ops. When .start
is called we are under rtnl lock and ieee80211\_unregister\_hw()
tries to take it again.
Function call stack:
dev\_change\_flags()
\_\_dev\_change\_flags()
\_\_dev\_open()
ASSERT\_RTNL() <-- Assert rtnl lock
ops->ndo\_open()
.ndo\_open = ieee80211\_open,
ieee80211\_open()
ieee80211\_do\_open()
drv\_start()
local->ops->start()
.start = brcms\_ops\_start,
brcms\_ops\_start()
brcms\_remove()
ieee80211\_unregister\_hw()
rtnl\_lock() <-- Here we deadlock
Introduced by:
commit 25b5632fb35ca61b8ae3eee235edcdc2883f7a5e
("brcmsmac: request firmware in .start() callback")
This patch fixes the bug by removing the call to brcms\_remove()
and moves the brcms\_request\_fw() call to the top of the .start
callback to not initiate anything unless firmware is installed.
Signed-off-by: Emil Goode
Signed-off-by: John W. Linville
Signed-off-by: Greg Kroah-Hartman
commit 7a5db34ad2ea9a97448904a8a9e6e49d82e9d133
Author: Russell King
Date: Sun Apr 6 15:20:03 2014 -0700
leds: leds-pwm: properly clean up after probe failure
commit 392369019eb96e914234ea21eda806cb51a1073e upstream.
When probing with DT, we add each LED one at a time. If we find a LED
without a PWM device (because it is not available yet) we fail the
initialisation, unregister previous LEDs, and then by way of managed
resources, we free the structure.
The problem with this is we may have a scheduled and active work\_struct
in this structure, and this results in a nasty kernel oops.
We need to cancel this work\_struct properly upon cleanup - and the
cleanup we require is the same cleanup as we do when the LED platform
device is removed. Rather than writing this same code three times,
move it into a separate function and use it in all three places.
Fixes: c971ff185f64 ("leds: leds-pwm: Defer led\_pwm\_set() if PWM can sleep")
Signed-off-by: Russell King
Signed-off-by: Bryan Wu
Signed-off-by: Greg Kroah-Hartman
commit 92840945e295889bde76fb38531f11dafb34b506
Author: Martin Peres
Date: Fri Mar 14 00:26:52 2014 +0100
drm/nouveau/pm/fan: drop the fan lock in fan\_update() before rescheduling
commit 61679fe153b2b9ea5b5e2ab93305419e85e99a9d upstream.
This should fix a deadlock that has been reported to us where fan\_update()
would hold the fan lock and try to grab the alarm\_program\_lock to reschedule
an update. On an other CPU, the alarm\_program\_lock would have been taken
before calling fan\_update(), leading to a deadlock.
We should Cc:  # 3.9+
Reported-by: Marcin Slusarz
Tested-by: Timothée Ravier
Tested-by: Boris Fersing (IRC nick fersingb, no public email address)
Signed-off-by: Martin Peres
Signed-off-by: Ben Skeggs
Signed-off-by: Greg Kroah-Hartman
commit 4fe6be724f7045fd6ecf59941b4f94fdd50f82b8
Author: Christoph Paasch
Date: Fri Mar 21 04:02:09 2014 -0700
igb: Unset IGB\_FLAG\_HAS\_MSIX-flag when falling back to msi-only
commit b709323d2477614823a38c2f2a9a206e087e28fc upstream.
Prior to cd14ef54d25 (igb: Change to use statically allocated array for
MSIx entries), having msix\_entries different from NULL was an indicator
that MSIX is enabled.
In igb\_set\_interrupt\_capabiliy we may fall back to MSI-only. Prior to
the above patch msix\_entries was set to NULL by
igb\_reset\_interrupt\_capability.
However, now we are checking the flag for IGB\_FLAG\_HAS\_MSIX and so the
stack gets completly confused:
[ 42.659791] ------------[ cut here ]------------
[ 42.715032] WARNING: CPU: 7 PID: 0 at net/sched/sch\_generic.c:264 dev\_watchdog+0x15c/0x1fb()
[ 42.848263] NETDEV WATCHDOG: eth0 (igb): transmit queue 0 timed out
[ 42.923253] Modules linked in:
[ 42.959875] CPU: 7 PID: 0 Comm: swapper/7 Not tainted 3.14.0-rc2-mptcp #437
[ 43.043184] Hardware name: HP ProLiant DL165 G7, BIOS O37 01/26/2011
[ 43.119215] 0000000000000108 ffff88023fdc3da8 ffffffff81487847 0000000000000108
[ 43.208165] ffff88023fdc3df8 ffff88023fdc3de8 ffffffff81034e7d ffff88023fdc3dd8
[ 43.297120] ffffffff813fff10 ffff880236018000 ffff880236b178c0 0000000000000008
[ 43.386071] Call Trace:
[ 43.415303]  [] dump\_stack+0x49/0x62
[ 43.484174] [] warn\_slowpath\_common+0x77/0x91
[ 43.556049] [] ? dev\_watchdog+0x15c/0x1fb
[ 43.623759] [] warn\_slowpath\_fmt+0x41/0x43
[ 43.692511] [] dev\_watchdog+0x15c/0x1fb
[ 43.758141] [] ? \_\_netdev\_watchdog\_up+0x64/0x64
[ 43.832091] [] call\_timer\_fn+0x17/0x6f
[ 43.896682] [] run\_timer\_softirq+0x162/0x1a2
[ 43.967511] [] \_\_do\_softirq+0xcd/0x1cc
[ 44.032104] [] irq\_exit+0x3a/0x48
[ 44.091492] [] smp\_apic\_timer\_interrupt+0x43/0x50
[ 44.167525] [] apic\_timer\_interrupt+0x6a/0x70
[ 44.239392]  [] ? default\_idle+0x6/0x8
[ 44.310343] [] arch\_cpu\_idle+0x13/0x18
[ 44.374934] [] cpu\_startup\_entry+0xa7/0x101
[ 44.444724] [] start\_secondary+0x1b2/0x1b7
[ 44.513472] ---[ end trace a5a075fd4e7f854f ]---
[ 44.568753] igb 0000:04:00.0 eth0: Reset adapter
[ 46.206945] random: nonblocking pool is initialized
[ 46.465670] irq 44: nobody cared (try booting with the "irqpoll" option)
[ 46.545862] CPU: 7 PID: 0 Comm: swapper/7 Tainted: G W 3.14.0-rc2-mptcp #437
[ 46.640610] Hardware name: HP ProLiant DL165 G7, BIOS O37 01/26/2011
[ 46.716641] ffff8802363f8c84 ffff88023fdc3e38 ffffffff81487847 00000000a03cdb6d
[ 46.805598] ffff8802363f8c00 ffff88023fdc3e68 ffffffff81068489 0000007f81825400
[ 46.894539] ffff8802363f8c00 0000000000000000 0000000000000000 ffff88023fdc3ea8
[ 46.983484] Call Trace:
[ 47.012714]  [] dump\_stack+0x49/0x62
[ 47.081585] [] \_\_report\_bad\_irq+0x35/0xc1
[ 47.149295] [] note\_interrupt+0x16e/0x1ea
[ 47.217006] [] handle\_irq\_event\_percpu+0x116/0x12e
[ 47.294075] [] handle\_irq\_event+0x33/0x4f
[ 47.361787] [] handle\_fasteoi\_irq+0x83/0xd1
[ 47.431577] [] handle\_irq+0x1f/0x28
[ 47.493047] [] do\_IRQ+0x4e/0xd4
[ 47.550358] [] common\_interrupt+0x6a/0x6a
[ 47.618066]  [] ? default\_idle+0x6/0x8
[ 47.689016] [] arch\_cpu\_idle+0x13/0x18
[ 47.753605] [] cpu\_startup\_entry+0xa7/0x101
[ 47.823397] [] start\_secondary+0x1b2/0x1b7
[ 47.892146] handlers:
[ 47.919301] [] igb\_intr
So, this patch unsets the flag to indicate that we are not using MSIX.
This patch does exactly this: Unsetting the flag when falling back to MSI.
Fixes: cd14ef54d25b (igb: Change to use statically allocated array for MSIx entries)
Cc: Carolyn Wyborny
Signed-off-by: Christoph Paasch
Tested-by: Jeff Pieper
Signed-off-by: Jeff Kirsher
Signed-off-by: Greg Kroah-Hartman
commit 5c0f1fdbaebb742c0903bba402772f0db7760aa1
Author: Christoph Paasch
Date: Fri Mar 21 03:48:19 2014 -0700
igb: Fix Null-pointer dereference in igb\_reset\_q\_vector
commit cb06d102327eadcd1bdc480bfd9f8876251d1007 upstream.
When igb\_set\_interrupt\_capability() calls
igb\_reset\_interrupt\_capability() (e.g., because CONFIG\_PCI\_MSI is unset),
num\_q\_vectors has been set but no vector has yet been allocated.
igb\_reset\_interrupt\_capability() will then call igb\_reset\_q\_vector,
which assumes that the vector is allocated. As this is not the case, we
are accessing a NULL-pointer.
This patch fixes it by checking that q\_vector is indeed different from
NULL.
Fixes: 02ef6e1d0b0023 (igb: Fix queue allocation method to accommodate changing during runtime)
Cc: Carolyn Wyborny
Signed-off-by: Christoph Paasch
Tested-by: Jeff Pieper
Signed-off-by: Jeff Kirsher
Signed-off-by: Greg Kroah-Hartman
commit 8a255ad5da168d12278f6a59bb2727ca07416c9d
Author: Dan Carpenter
Date: Wed Jan 15 06:43:39 2014 +0000
i40e: potential array underflow in i40e\_vc\_process\_vf\_msg()
commit c243e96335c56e56dcf6a00593104554fb06b689 upstream.
If "vf\_id" is smaller than hw->func\_caps.vf\_base\_id then it leads to
an array underflow of the pf->vf[] array. This is unlikely to happen
unless the hardware is bad, but it's a small change and it silences a
static checker warning.
Fixes: 7efa84b7abc1 ('i40e: support VFs on PFs other than 0')
Signed-off-by: Dan Carpenter
Tested-by: Sibai Li
Signed-off-by: Jeff Kirsher
Signed-off-by: Greg Kroah-Hartman
commit cd3750a8e7a512616c64c729a8de4d4d0bd69b7e
Author: Aaron Lu
Date: Mon May 12 16:55:45 2014 +0800
drm/i915: restore backlight precision when converting from ACPI
commit 721e82c08c1afd6b47367b0e0c4a62140b0667f3 upstream.
When we set backlight on behalf of ACPI opregion, we will convert the
backlight value in the 0-255 range defined in opregion to the actual
hardware level. Commit 22505b82a2 (drm/i915: avoid brightness overflow
when doing scale) is meant to fix the overflow problem when doing the
conversion, but it also caused a problem that the converted hardware
level doesn't quite represent the intended value: say user wants maximum
backlight level(255 in opregion's range), then we will calculate the
actual hardware level to be: level = freq / max \* level, where freq is
the hardware's max backlight level(937 on an user's box), and max and
level are all 255. The converted value should be 937 but the above
calculation will yield 765.
To fix this issue, just use 64 bits to do the calculation to keep the
precision and avoid overflow at the same time.
Buglink: https://bugzilla.kernel.org/show\_bug.cgi?id=72491
Reported-by: Nico Schottelius
Reviewed-by: Chris Wilson
Signed-off-by: Aaron Lu
Signed-off-by: Jani Nikula
Signed-off-by: Greg Kroah-Hartman
commit e3fe5945d5fff076366e852440c7c2e9c7b7d17c
Author: Jani Nikula
Date: Fri May 9 14:52:34 2014 +0300
drm/i915/vlv: reset VLV media force wake request register
commit 05adaf1f101f25f40f12c29403e6488f0e45f6b6 upstream.
Media force wake get hangs the machine when the system is booted without
displays attached. The assumption is that (at least some versions of)
the firmware has skipped some initialization in that case.
Empirical evidence suggests we need to reset the media force wake
request register in addition to the render one to avoid hangs.
Bugzilla: https://bugs.freedesktop.org/show\_bug.cgi?id=75895
Reported-by: Imre Deak
Reported-by: Darren Hart
Tested-by: Darren Hart
Reviewed-by: Mika Kuoppala
Signed-off-by: Jani Nikula
Signed-off-by: Greg Kroah-Hartman
commit 57a2e10dbc72c327a02dda55c4685beac7fdd79c
Author: Maarten Lankhorst
Date: Thu May 1 13:58:05 2014 +0200
drm/nouveau: fix another lock unbalance in nouveau\_crtc\_page\_flip
commit 806cbc5026933a781b66adecf6d1658fde9138e6 upstream.
Fixes a regression introduced by 060810d7abaabca "drm/nouveau: fix locking
issues in page flipping paths". chan->cli->mutex is unlocked a second time
in the fail\_unreserve path, fix this by moving mutex\_unlock down.
Signed-off-by: Maarten Lankhorst
Signed-off-by: Ben Skeggs
Signed-off-by: Greg Kroah-Hartman
commit 939837d48a1a31304938f10ee1a454ef4aa838b2
Author: Ilia Mirkin
Date: Wed Mar 26 19:37:21 2014 -0400
drm/nouveau/acpi: allow non-optimus setups to load vbios from acpi
commit a3d0b1218d351c6e6f3cea36abe22236a08cb246 upstream.
There appear to be a crop of new hardware where the vbios is not
available from PROM/PRAMIN, but there is a valid \_ROM method in ACPI.
The data read from PCIROM almost invariably contains invalid
instructions (still has the x86 opcodes), which makes this a low-risk
way to try to obtain a valid vbios image.
Bugzilla: https://bugs.freedesktop.org/show\_bug.cgi?id=76475
Signed-off-by: Ilia Mirkin
Signed-off-by: Ben Skeggs
Signed-off-by: Greg Kroah-Hartman
commit e9582f152369e8e183e9c5cd5e42900ff87a7f24
Author: Ben Hutchings
Date: Sat Apr 26 21:59:04 2014 +0100
rtl8192cu: Fix unbalanced irq enable in error path of rtl92cu\_hw\_init()
commit 3234f5b06fc3094176a86772cc64baf3decc98fc upstream.
Fixes: a53268be0cb9 ('rtlwifi: rtl8192cu: Fix too long disable of IRQs')
Signed-off-by: Ben Hutchings
Signed-off-by: John W. Linville
Signed-off-by: Greg Kroah-Hartman
commit b4c97e6c9c17a32267a78f5661c5a07dd5a53e02
Author: Liu Hua
Date: Thu Mar 27 06:56:18 2014 +0100
ARM: 8012/1: kdump: Avoid overflow when converting pfn to physaddr
commit 8fad87bca7ac9737e413ba5f1656f1114a8c314d upstream.
When we configure CONFIG\_ARM\_LPAE=y, pfn << PAGE\_SHIFT will
overflow if pfn >= 0x100000 in copy\_oldmem\_page.
So use \_\_pfn\_to\_phys for converting.
Signed-off-by: Liu Hua
Signed-off-by: Russell King
Signed-off-by: Greg Kroah-Hartman
commit 542e7f333e12cb600e6a2a59356cae5ca8f0dea5
Author: Leif Lindholm
Date: Thu Apr 17 18:41:59 2014 +0100
arm: dts: Fix missing device\_type="memory" for ste-ccu8540
commit bfaed5abad998bfc88a66e6e71c7b08dcf82f04e upstream.
The current .dts for ste-ccu8540 lacks a 'device\_type = "memory"' for
its memory node, relying on an old ppc quirk in order to discover its
memory. Fix the data so that all parsing code can handle it correctly.
Signed-off-by: Leif Lindholm
Acked-by: Lee Jones
Acked-by: Linus Walleij
Cc: linux-arm-kernel@lists.infradead.org
Cc: devicetree@vger.kernel.org
Cc: Mark Rutland
Signed-off-by: Grant Likely
Signed-off-by: Greg Kroah-Hartman
commit c5a7378aa0114f09e3c7c89489b2a9aadfda1469
Author: Thomas Petazzoni
Date: Mon Apr 14 17:29:21 2014 +0200
ARM: mvebu: fix NOR bus-width in Armada XP OpenBlocks AX3 Device Tree
commit 6e20bae8a39c40d4e03698e4160bad2d2629062b upstream.
The mvebu-devbus driver had a serious bug, which lead to a 8 bits bus
width declared in the Device Tree being considered as a 16 bits bus
width when configuring the hardware.
This bug in mvebu-devbus driver was compensated by a symetric mistake
in the Armada XP OpenBlocks AX3 Device Tree: a 8 bits bus width was
declared, even though the hardware actually has a 16 bits bus width
connection with the NOR flash.
Now that we have fixed the mvebu-devbus driver to behave according to
its Device Tree binding, this commit fixes the problematic Device Tree
files as well.
This bug was introduced in commit
a7d4f81821f7eec3175f8e23dd6949c71ab2da43 ('ARM: mvebu: Add support for
NOR flash device on Openblocks AX3 board') which was merged in v3.10.
Signed-off-by: Thomas Petazzoni
Link: https://lkml.kernel.org/r/1397489361-5833-5-git-send-email-thomas.petazzoni@free-electrons.com
Fixes: a7d4f81821f7 ('ARM: mvebu: Add support for NOR flash device on Openblocks AX3 board')
Acked-by: Ezequiel Garcia
Acked-by: Gregory CLEMENT
Signed-off-by: Jason Cooper
Signed-off-by: Greg Kroah-Hartman
commit dc68b6a6c724a43404ded6fb5227bca536c1209e
Author: Thomas Petazzoni
Date: Mon Apr 14 17:29:20 2014 +0200
ARM: mvebu: fix NOR bus-width in Armada XP DB Device Tree
commit f3aec8f3f05025e7b450102dae0759375346706e upstream.
The mvebu-devbus driver had a serious bug, which lead to a 8 bits bus
width declared in the Device Tree being considered as a 16 bits bus
width when configuring the hardware.
This bug in mvebu-devbus driver was compensated by a symetric mistake
in the Armada XP DB Device Tree: a 8 bits bus width was declared, even
though the hardware actually has a 16 bits bus width connection with
the NOR flash.
Now that we have fixed the mvebu-devbus driver to behave according to
its Device Tree binding, this commit fixes the problematic Device Tree
files as well.
This bug was introduced in commit
b484ff42df475c5087d614c4d477273e1906bcb9 ('ARM: mvebu: Add support for
NOR flash device on Armada XP-DB board') which was merged in v3.11.
Signed-off-by: Thomas Petazzoni
Link: https://lkml.kernel.org/r/1397489361-5833-4-git-send-email-thomas.petazzoni@free-electrons.com
Fixes: b484ff42df47 ('ARM: mvebu: Add support for NOR flash device on Armada XP-DB board')
Acked-by: Ezequiel Garcia
Acked-by: Gregory CLEMENT
Signed-off-by: Jason Cooper
Signed-off-by: Greg Kroah-Hartman
commit f05b2f5730bdaa4f80864fb5a906e246b54a303d
Author: Thomas Petazzoni
Date: Mon Apr 14 17:29:19 2014 +0200
ARM: mvebu: fix NOR bus-width in Armada XP GP Device Tree
commit 1a88f809ccb5db1509a7514b187c00b3a995fc82 upstream.
The mvebu-devbus driver had a serious bug, which lead to a 8 bits bus
width declared in the Device Tree being considered as a 16 bits bus
width when configuring the hardware.
This bug in mvebu-devbus driver was compensated by a symetric mistake
in the Armada XP GP Device Tree: a 8 bits bus width was declared, even
though the hardware actually has a 16 bits bus width connection with
the NOR flash.
Now that we have fixed the mvebu-devbus driver to behave according to
its Device Tree binding, this commit fixes the problematic Device Tree
files as well.
This bug was introduced in commit
da8d1b38356853c37116f9afa29f15648d7fb159 ('ARM: mvebu: Add support for
NOR flash device on Armada XP-GP board') which was merged in v3.10.
Signed-off-by: Thomas Petazzoni
Link: https://lkml.kernel.org/r/1397489361-5833-3-git-send-email-thomas.petazzoni@free-electrons.com
Fixes: da8d1b383568 ('ARM: mvebu: Add support for NOR flash device on Armada XP-GP board')
Acked-by: Ezequiel Garcia
Acked-by: Gregory CLEMENT
Signed-off-by: Jason Cooper
Signed-off-by: Greg Kroah-Hartman
commit 0387a6a201d9a28032cd9882e440aaa9fed34aec
Author: Thomas Gleixner
Date: Sun Apr 13 20:44:46 2014 +0200
ARM: common: edma: Fix xbar mapping
commit cf7eb979116c2568e8bc3b6a7269c7a359864ace upstream.
This is another great example of trainwreck engineering:
commit 2646a0e529 (ARM: edma: Add EDMA crossbar event mux support)
added support for using EDMA on peripherals which have no direct EDMA
event mapping.
The code compiles and does not explode in your face, but that's it.
1) Reading an u16 array from an u32 device tree array simply does not
work. Even if the function is named "edma\_of\_read\_u32\_to\_s16\_array".
It merily calls of\_property\_read\_u16\_array. So the resulting 16bit
array will have every other entry = 0.
2) The DT entry for the xbar registers related to xbar has length 0x10
instead of the real length: 0xfd0 - 0xf90 = 0x40.
Not a real problem as it does not cross a page boundary, but
wrong nevertheless.
3) But none of this matters as the mapping never happens:
After reading nonsense edma\_of\_read\_u32\_to\_s16\_array() invalidates
the first array entry pair, so nobody can ever notice the
braindamage by immediate explosion.
Seems the QA criteria for this code was solely not to explode when
someone adds edma-xbar-event-map entries to the DT. Goal achieved,
congratulations!
Not really helpful if someone wants to use edma on a device which
requires a xbar mapping.
Fix the issues by:
- annotating the device tree entry with "/bits/ 16" as documented in
the of\_property\_read\_u16\_array kernel doc
- make the size of the xbar register mapping correct
- invalidating the end of the array and not the start
This convoluted mess wants to be completely rewritten as there is no
point to keep the xbar\_chan array memory and the iomapping of the xbar
regs around forever. Marking the xbar mapped channels as used should
be done right there.
But that's a different issue and this patch is small enough to make it
work and allows a simple backport for stable.
Signed-off-by: Thomas Gleixner
Signed-off-by: Sekhar Nori
Signed-off-by: Greg Kroah-Hartman
commit 12800a2e16f3f4c2a28bb43feda1d56b566a1746
Author: Sascha Hauer
Date: Tue May 6 13:01:34 2014 +0200
ARM: dts: i.MX53: Fix ipu register space size
commit 6d66da89bf4422c0a0693627fb3e25f74af50f92 upstream.
The IPU register space is 128MB, not 2GB.
Fixes: abed9a6bf2bb 'ARM i.MX53: Add IPU support'
Signed-off-by: Sascha Hauer
Acked-by: Shawn Guo
Signed-off-by: Olof Johansson
Signed-off-by: Greg Kroah-Hartman
commit 6f5d63343a96cfadaa16fd4bcc06c0c7b0b26c7f
Author: Sebastian Hesselbarth
Date: Wed Apr 30 14:56:28 2014 +0200
ARM: dts: kirkwood: fix mislocated pcie-controller nodes
commit 788296b2d19d16ec33aba0a5ad1544d50bb58601 upstream.
Commit 54397d85349f
("ARM: kirkwood: Relocate PCIe device tree nodes")
moved the pcie-controller nodes for the Kirkwood SoCs to the mbus
bus node. For some reason, two boards were not properly converted
and have their pci-controller nodes still in the ocp bus node.
As the corresponding SoC pcie-controller does not exist anymore,
it is likely that pcie is broken on those boards since above commit.
Fix it by moving the pcie related nodes to the correct location.
Signed-off-by: Sebastian Hesselbarth
Fixes: 54397d85349f ("ARM: kirkwood: Relocate PCIe device tree nodes")
Acked-by: Andrew Lunn
Link: https://lkml.kernel.org/r/1398862602-29595-2-git-send-email-sebastian.hesselbarth@gmail.com
Signed-off-by: Jason Cooper
Signed-off-by: Greg Kroah-Hartman
commit 0da911cf4d976e59599586f04fc2cbfc871fb4cd
Author: Thomas Petazzoni
Date: Sun Apr 13 16:39:38 2014 +0200
ARM: orion5x: fix target ID for crypto SRAM window
commit 1cc9d48145b81e307fab94a5cf6ee66ec2f0de60 upstream.
In commit 4ca2c04085a1caa903e92a5fc0da25362150aac2 ('ARM: orion5x:
Move to ID based window creation'), the mach-orion5x code was changed
to use the new mvebu-mbus API. However, in the process, a mistake was
made on the crypto SRAM window target ID: it should have been 0x9
(verified in the datasheet) and not 0x0.
Signed-off-by: Thomas Petazzoni
Acked-by: Sebastian Hesselbarth
Link: https://lkml.kernel.org/r/1397400006-4315-2-git-send-email-thomas.petazzoni@free-electrons.com
Fixes: 4ca2c04085a1 ('ARM: orion5x: Move to ID based window creation')
Signed-off-by: Jason Cooper
Signed-off-by: Greg Kroah-Hartman
commit 876d8a6f0b960cc4cdc0a6cc193d846f124a80b5
Author: Johannes Weiner
Date: Tue May 6 12:50:07 2014 -0700
revert "mm: vmscan: do not swap anon pages just because free+file is low"
commit 623762517e2370be3b3f95f4fe08d6c063a49b06 upstream.
This reverts commit 0bf1457f0cfc ("mm: vmscan: do not swap anon pages
just because free+file is low") because it introduced a regression in
mostly-anonymous workloads, where reclaim would become ineffective and
trap every allocating task in direct reclaim.
The problem is that there is a runaway feedback loop in the scan balance
between file and anon, where the balance tips heavily towards a tiny
thrashing file LRU and anonymous pages are no longer being looked at.
The commit in question removed the safe guard that would detect such
situations and respond with forced anonymous reclaim.
This commit was part of a series to fix premature swapping in loads with
relatively little cache, and while it made a small difference, the cure
is obviously worse than the disease. Revert it.
Signed-off-by: Johannes Weiner
Reported-by: Christian Borntraeger
Acked-by: Christian Borntraeger
Acked-by: Rafael Aquini
Cc: Rik van Riel
Signed-off-by: Andrew Morton
Signed-off-by: Linus Torvalds
Signed-off-by: Greg Kroah-Hartman
commit e9c26d89734fd98fe3ef9dda6a5056d01900b463
Author: Vlastimil Babka
Date: Tue May 6 12:50:03 2014 -0700
mm/compaction: make isolate\_freepages start at pageblock boundary
commit 49e068f0b73dd042c186ffa9b420a9943e90389a upstream.
The compaction freepage scanner implementation in isolate\_freepages()
starts by taking the current cc->free\_pfn value as the first pfn. In a
for loop, it scans from this first pfn to the end of the pageblock, and
then subtracts pageblock\_nr\_pages from the first pfn to obtain the first
pfn for the next for loop iteration.
This means that when cc->free\_pfn starts at offset X rather than being
aligned on pageblock boundary, the scanner will start at offset X in all
scanned pageblock, ignoring potentially many free pages. Currently this
can happen when
a) zone's end pfn is not pageblock aligned, or
b) through zone->compact\_cached\_free\_pfn with CONFIG\_HOLES\_IN\_ZONE
enabled and a hole spanning the beginning of a pageblock
This patch fixes the problem by aligning the initial pfn in
isolate\_freepages() to pageblock boundary. This also permits replacing
the end-of-pageblock alignment within the for loop with a simple
pageblock\_nr\_pages increment.
Signed-off-by: Vlastimil Babka
Reported-by: Heesub Shin
Acked-by: Minchan Kim
Cc: Mel Gorman
Acked-by: Joonsoo Kim
Cc: Bartlomiej Zolnierkiewicz
Cc: Michal Nazarewicz
Cc: Naoya Horiguchi
Cc: Christoph Lameter
Acked-by: Rik van Riel
Cc: Dongjun Shin
Cc: Sunghwan Yun
Signed-off-by: Andrew Morton
Signed-off-by: Linus Torvalds
Signed-off-by: Greg Kroah-Hartman
commit 55023920439daa2631aad56e51b7983f74d76556
Author: Rik van Riel
Date: Tue May 6 12:50:01 2014 -0700
mm/page-writeback.c: fix divide by zero in pos\_ratio\_polynom
commit d5c9fde3dae750889168807038243ff36431d276 upstream.
It is possible for "limit - setpoint + 1" to equal zero, after getting
truncated to a 32 bit variable, and resulting in a divide by zero error.
Using the fully 64 bit divide functions avoids this problem. It also
will cause pos\_ratio\_polynom() to return the correct value when
(setpoint - limit) exceeds 2^32.
Also uninline pos\_ratio\_polynom, at Andrew's request.
Signed-off-by: Rik van Riel
Reviewed-by: Michal Hocko
Cc: Aneesh Kumar K.V
Cc: Mel Gorman
Cc: Nishanth Aravamudan
Cc: Luiz Capitulino
Cc: Masayoshi Mizuma
Signed-off-by: Andrew Morton
Signed-off-by: Linus Torvalds
Signed-off-by: Greg Kroah-Hartman
commit 94d3803b8b5aff8b0a8b47116c1f1d37f75c8819
Author: Fabian Frederick
Date: Tue May 6 12:50:11 2014 -0700
fs/affs/super.c: bugfix / double free
commit d353efd02357a74753cd45f367a2d3d357fd6904 upstream.
Commit 842a859db26b ("affs: use ->kill\_sb() to simplify ->put\_super()
and failure exits of ->mount()") adds .kill\_sb which frees sbi but
doesn't remove sbi free in case of parse\_options error causing double
free+random crash.
Signed-off-by: Fabian Frederick
Cc: Alexander Viro
Signed-off-by: Andrew Morton
Signed-off-by: Linus Torvalds
Signed-off-by: Greg Kroah-Hartman
commit 54c2a0ca8378bb0cbfbb56179c883d1bd9258cf9
Author: Christoph Hellwig
Date: Sun May 4 13:03:32 2014 +0200
posix\_acl: handle NULL ACL in posix\_acl\_equiv\_mode
commit 50c6e282bdf5e8dabf8d7cf7b162545a55645fd9 upstream.
Various filesystems don't bother checking for a NULL ACL in
posix\_acl\_equiv\_mode, and thus can dereference a NULL pointer when it
gets passed one. This usually happens from the NFS server, as the ACL tools
never pass a NULL ACL, but instead of one representing the mode bits.
Instead of adding boilerplat to all filesystems put this check into one place,
which will allow us to remove the check from other filesystems as well later
on.
Signed-off-by: Christoph Hellwig
Reported-by: Ben Greear
Reported-by: Marco Munderloh ,
Cc: Chuck Lever
Signed-off-by: Al Viro
Signed-off-by: Greg Kroah-Hartman
commit 1304ba7cd0d5936fc1e837a9692e621666e638cc
Author: Marcel Holtmann
Date: Tue Apr 22 14:04:16 2014 -0700
Revert "Bluetooth: Enable autosuspend for Intel Bluetooth device"
commit 3c49aa852e00978ba2f1a4d1e4598a0c669a5347 upstream.
This reverts commit d2bee8fb6e18f6116aada39851918473761f7ab1.
Enabling autosuspend for Intel Bluetooth devices has been shown to not
work reliable. It does work for some people with certain combinations
of USB host controllers, but for others it puts the device to sleep and
it will not wake up for any event.
These events can be important ones like HCI Inquiry Complete or HCI
Connection Request. The events will arrive as soon as you poke the
device with a new command, but that is not something we can do in
these cases.
Initially there were patches to the xHCI USB controller that fixed
this for some people, but not for all. This could be well a problem
somewhere in the USB subsystem or in the USB host controllers or
just plain a hardware issue somewhere. At this moment we just do
not know and the only safe action is to revert this patch.
Signed-off-by: Marcel Holtmann
Cc: Tedd Ho-Jeong An
Signed-off-by: Gustavo Padovan
Signed-off-by: Greg Kroah-Hartman
commit 7dbf1b3b9dfc2c2c1f92243d024a5c718e76d74d
Author: Mohammed Habibulla
Date: Thu Apr 17 11:37:13 2014 -0700
Bluetooth: Add support for Lite-on [04ca:3007]
commit 1fb4e09a7e780b915dbd172592ae7e2a4c071065 upstream.
Add support for the AR9462 chip
T: Bus=01 Lev=01 Prnt=01 Port=03 Cnt=03 Dev#= 3 Spd=12 MxCh= 0
D: Ver= 1.10 Cls=e0(wlcon) Sub=01 Prot=01 MxPS=64 #Cfgs= 1
P: Vendor=04ca ProdID=3007 Rev= 0.01
C:\* #Ifs= 2 Cfg#= 1 Atr=e0 MxPwr=100mA
I:\* If#= 0 Alt= 0 #EPs= 3 Cls=e0(wlcon) Sub=01 Prot=01 Driver=btusb
E: Ad=81(I) Atr=03(Int.) MxPS= 16 Ivl=1ms
E: Ad=82(I) Atr=02(Bulk) MxPS= 64 Ivl=0ms
E: Ad=02(O) Atr=02(Bulk) MxPS= 64 Ivl=0ms
I:\* If#= 1 Alt= 0 #EPs= 2 Cls=e0(wlcon) Sub=01 Prot=01 Driver=btusb
E: Ad=83(I) Atr=01(Isoc) MxPS= 0 Ivl=1ms
E: Ad=03(O) Atr=01(Isoc) MxPS= 0 Ivl=1ms
I: If#= 1 Alt= 1 #EPs= 2 Cls=e0(wlcon) Sub=01 Prot=01 Driver=btusb
E: Ad=83(I) Atr=01(Isoc) MxPS= 9 Ivl=1ms
E: Ad=03(O) Atr=01(Isoc) MxPS= 9 Ivl=1ms
I: If#= 1 Alt= 2 #EPs= 2 Cls=e0(wlcon) Sub=01 Prot=01 Driver=btusb
E: Ad=83(I) Atr=01(Isoc) MxPS= 17 Ivl=1ms
E: Ad=03(O) Atr=01(Isoc) MxPS= 17 Ivl=1ms
I: If#= 1 Alt= 3 #EPs= 2 Cls=e0(wlcon) Sub=01 Prot=01 Driver=btusb
E: Ad=83(I) Atr=01(Isoc) MxPS= 25 Ivl=1ms
E: Ad=03(O) Atr=01(Isoc) MxPS= 25 Ivl=1ms
I: If#= 1 Alt= 4 #EPs= 2 Cls=e0(wlcon) Sub=01 Prot=01 Driver=btusb
E: Ad=83(I) Atr=01(Isoc) MxPS= 33 Ivl=1ms
E: Ad=03(O) Atr=01(Isoc) MxPS= 33 Ivl=1ms
I: If#= 1 Alt= 5 #EPs= 2 Cls=e0(wlcon) Sub=01 Prot=01 Driver=btusb
E: Ad=83(I) Atr=01(Isoc) MxPS= 49 Ivl=1ms
E: Ad=03(O) Atr=01(Isoc) MxPS= 49 Ivl=1ms
Signed-off-by: Mohammed Habibulla
Signed-off-by: Gustavo Padovan
Signed-off-by: Greg Kroah-Hartman
commit fe8578f3e20633647165faf324f283e67deff7e5
Author: Johan Hedberg
Date: Fri Apr 11 12:02:32 2014 -0700
Bluetooth: Fix redundant encryption request for reauthentication
commit 09da1f3463eb81d59685df723b1c5950b7570340 upstream.
When we're performing reauthentication (in order to elevate the
security level from an unauthenticated key to an authenticated one) we
do not need to issue any encryption command once authentication
completes. Since the trigger for the encryption HCI command is the
ENCRYPT\_PEND flag this flag should not be set in this scenario.
Instead, the REAUTH\_PEND flag takes care of all necessary steps for
reauthentication.
Signed-off-by: Johan Hedberg
Signed-off-by: Marcel Holtmann
Signed-off-by: Greg Kroah-Hartman
commit 5e3ccae03cc3a26f535067c26e8f65d46679302f
Author: Johan Hedberg
Date: Fri Apr 11 12:02:31 2014 -0700
Bluetooth: Fix triggering BR/EDR L2CAP Connect too early
commit 9eb1fbfa0a737fd4d3a6d12d71c5ea9af622b887 upstream.
Commit 1c2e004183178 introduced an event handler for the encryption key
refresh complete event with the intent of fixing some LE/SMP cases.
However, this event is shared with BR/EDR and there we actually want to
act only on the auth\_complete event (which comes after the key refresh).
If we do not do this we may trigger an L2CAP Connect Request too early
and cause the remote side to return a security block error.
Signed-off-by: Johan Hedberg
Signed-off-by: Marcel Holtmann
Signed-off-by: Greg Kroah-Hartman
commit f5ad14928afcc5c2b1c2722c7e935842ad512b0d
Author: Clemens Ladisch
Date: Thu May 1 12:20:22 2014 +0200
ALSA: usb-audio: work around corrupted TEAC UD-H01 feedback data
commit 7040b6d1febfdbd9c1595efb751d492cd2503f96 upstream.
The TEAC UD-H01 firmware sends wrong feedback frequency values, thus
causing the PC to send the samples at a wrong rate, which results in
clicks and crackles in the output.
Add a workaround to detect and fix the corruption.
Signed-off-by: Clemens Ladisch
[mick37@gmx.de: use sender->udh01\_fb\_quirk rather than
ep->udh01\_fb\_quirk in snd\_usb\_handle\_sync\_urb()]
Reported-and-tested-by: Mick
Reported-and-tested-by: Andrea Messa
Signed-off-by: Takashi Iwai
Signed-off-by: Greg Kroah-Hartman
commit c2965f4fee71bb2432a2d06989247cbc526b9e55
Author: Stanislaw Gruszka
Date: Thu Apr 17 11:08:47 2014 +0200
rt2x00: fix beaconing on USB
commit 8834d3608cc516f13e2e510f4057c263f3d2ce42 upstream.
When disable beaconing we clear register with beacon and newer set it
back, what make we stop send beacons infinitely.
Signed-off-by: Stanislaw Gruszka
Signed-off-by: John W. Linville
Signed-off-by: Greg Kroah-Hartman
commit fb2b50456d3361cc81ce9d9161e886fe3d3b7779
Author: Daniele Forsi
Date: Mon Apr 28 17:09:11 2014 +0200
USB: Nokia 5300 should be treated as unusual dev
commit 6ed07d45d09bc2aa60e27b845543db9972e22a38 upstream.
Signed-off-by: Daniele Forsi
Signed-off-by: Greg Kroah-Hartman
commit 2f0200ad379e0908dd386c11f98311dc5e772cb5
Author: Victor A. Santos
Date: Sat Apr 26 23:20:14 2014 -0300
USB: Nokia 305 should be treated as unusual dev
commit f0ef5d41792a46a1085dead9dfb0bdb2c574638e upstream.
Signed-off-by: Victor A. Santos
Signed-off-by: Greg Kroah-Hartman
commit 6212307c6babf64d8a857df892a70c618f332eb3
Author: Daniele Forsi
Date: Tue Apr 29 11:44:03 2014 +0200
usb: storage: shuttle\_usbat: fix discs being detected twice
commit df602c2d2358f02c6e49cffc5b49b9daa16db033 upstream.
Even if the USB-to-ATAPI converter supported multiple LUNs, this
driver would always detect the same physical device or media because
it doesn't use srb->device->lun in any way.
Tested with an Hewlett-Packard CD-Writer Plus 8200e.
Signed-off-by: Daniele Forsi
Signed-off-by: Greg Kroah-Hartman
commit 9917280e2277d0b6b1f209c5753c67b673da3ba2
Author: Bjørn Mork
Date: Sun Apr 27 16:47:42 2014 +0200
usb: qcserial: add a number of Dell devices
commit 4d7c0136a54f62501f8a34c4d08a5e0258d3d3ca upstream.
Dan writes:
"The Dell drivers use the same configuration for PIDs:
81A2: Dell Wireless 5806 Gobi(TM) 4G LTE Mobile Broadband Card
81A3: Dell Wireless 5570 HSPA+ (42Mbps) Mobile Broadband Card
81A4: Dell Wireless 5570e HSPA+ (42Mbps) Mobile Broadband Card
81A8: Dell Wireless 5808 Gobi(TM) 4G LTE Mobile Broadband Card
81A9: Dell Wireless 5808e Gobi(TM) 4G LTE Mobile Broadband Card
These devices are all clearly Sierra devices, but are also definitely
Gobi-based. The A8 might be the MC7700/7710 and A9 is likely a MC7750.
>From DellGobi5kSetup.exe from the Dell drivers:
usbif0: serial/firmware loader?
usbif2: nmea
usbif3: modem/ppp
usbif8: net/QMI"
Reported-by: AceLan Kao
Reported-by: Dan Williams
Signed-off-by: Bjørn Mork
Signed-off-by: Greg Kroah-Hartman
commit a9c3ff5b68b302b81ff5240643a2be5b8461a26c
Author: Alan Stern
Date: Thu May 1 15:21:42 2014 -0400
USB: OHCI: fix problem with global suspend on ATI controllers
commit c1db30a2a79eb59997b13b8cabf2a50bea9f04e1 upstream.
Some OHCI controllers from ATI/AMD seem to have difficulty with
"global" USB suspend, that is, suspending an entire USB bus without
setting the suspend feature for each port connected to a device. When
we try to resume the child devices, the controller gives timeout
errors on the unsuspended ports, requiring resets, and can even cause
ohci-hcd to hang; see
http://marc.info/?l=linux-usb&m=139514332820398&w=2
and the following messages.
This patch fixes the problem by adding a new quirk flag to ohci-hcd.
The flag causes the ohci\_rh\_suspend() routine to suspend each
unsuspended, enabled port before suspending the root hub. This
effectively converts the "global" suspend to an ordinary root-hub
suspend. There is no need to unsuspend these ports when the root hub
is resumed, because the child devices will be resumed anyway in the
course of a normal system resume ("global" suspend is never used for
runtime PM).
This patch should be applied to all stable kernels which include
commit 0aa2832dd0d9 (USB: use "global suspend" for system sleep on
USB-2 buses) or a backported version thereof.
Signed-off-by: Alan Stern
Reported-by: Peter Münster
Tested-by: Peter Münster
Signed-off-by: Greg Kroah-Hartman
commit 3866f7f4c5371d71c38809ec23e1142a52e934f1
Author: Jean-Jacques Hiblot
Date: Wed Mar 12 17:30:08 2014 +0100
usb: gadget: at91-udc: fix irq and iomem resource retrieval
commit 886c7c426d465732ec9d1b2bbdda5642fc2e7e05 upstream.
When using dt resources retrieval (interrupts and reg properties) there is
no predefined order for these resources in the platform dev resource
table. Also don't expect the number of resource to be always 2.
Signed-off-by: Jean-Jacques Hiblot
Acked-by: Boris BREZILLON
Acked-by: Nicolas Ferre
Signed-off-by: Felipe Balbi
Signed-off-by: Greg Kroah-Hartman
commit 6cb00d58ad0724088646dc1fec20de4e7bbaaf72
Author: Nikita Yushchenko
Date: Mon Apr 28 19:23:44 2014 +0400
fsl-usb: do not test for PHY\_CLK\_VALID bit on controller version 1.6
commit d183c81929beeba842b74422f754446ef2b8b49c upstream.
Per reference manuals of Freescale P1020 and P2020 SoCs, USB controller
present in these SoCs has bit 17 of USBx\_CONTROL register marked as
Reserved - there is no PHY\_CLK\_VALID bit there.
Testing for this bit in ehci\_fsl\_setup\_phy() behaves differently on two
P1020RDB boards available here - on one board test passes and fsl-usb
init succeeds, but on other board test fails, causing fsl-usb init to
fail.
This patch changes ehci\_fsl\_setup\_phy() not to test PHY\_CLK\_VALID on
controller version 1.6 that (per manual) does not have this bit.
Signed-off-by: Nikita Yushchenko
Signed-off-by: Greg Kroah-Hartman
commit edbfad5ceee721db176f03fb56070ff651b7f2e6
Author: Atilla Filiz
Date: Fri Apr 11 16:51:23 2014 +0200
iio:imu:mpu6050: Fixed segfault in Invensens MPU driver due to null dereference
commit b9b3a41893c3f1be67b5aacfa525969914bea0e9 upstream.
The driver segfaults when the kernel boots with device tree as the
platform data is then not present and the pointer is deferenced without
checking it is not null. This patch introduces such a check avoiding the
crash.
Signed-off-by: Atilla Filiz
Signed-off-by: Jonathan Cameron
Signed-off-by: Greg Kroah-Hartman
commit c6229d9e33fe849bf6f7f16a7813550a1936806a
Author: Tuomas Tynkkynen
Date: Fri May 16 16:50:20 2014 +0300
clk: tegra: Fix wrong value written to PLLE\_AUX
commit d2c834abe2b39a2d5a6c38ef44de87c97cbb34b4 upstream.
The value written to PLLE\_AUX was incorrect due to a wrong variable
being used. Without this fix SATA does not work.
Signed-off-by: Tuomas Tynkkynen
Tested-by: Mikko Perttunen
Reviewed-by: Thierry Reding
Tested-by: Thierry Reding
Acked-by: Thierry Reding
Signed-off-by: Mike Turquette
[mturquette@linaro.org: improved changelog]
Signed-off-by: Greg Kroah-Hartman
commit ab1948555192941e6725e459775a47c432ce3679
Author: Thierry Reding
Date: Wed Apr 9 14:26:59 2014 +0200
drm/tegra: Remove gratuitous pad field
commit cbfbbabb89b37f6bad05f478d906a385149f288d upstream.
The version of the drm\_tegra\_submit structure that was merged all the
way back in 3.10 contains a pad field that was originally intended to
properly pad the following \_\_u64 field. Unfortunately it seems like a
different field was dropped during review that caused this padding to
become unnecessary, but the pad field wasn't removed at that time.
One possible side-effect of this is that since the \_\_u64 following the
pad is now no longer properly aligned, the compiler may (or may not)
introduce padding itself, which results in no predictable ABI.
Rectify this by removing the pad field so that all fields are again
naturally aligned. Technically this is breaking existing userspace ABI,
but given that there aren't any (released) userspace drivers that make
use of this yet, the fallout should be minimal.
Fixes: d43f81cbaf43 ("drm/tegra: Add gr2d device")
Signed-off-by: Thierry Reding
Signed-off-by: Greg Kroah-Hartman
commit d293313f492702284f33beaacc06d168f3a9b000
Author: Leo Liu
Date: Mon Apr 28 09:40:22 2014 -0400
drm/radeon: check buffer relocation offset
commit 695daf1a8e731a4b5b89de89a61f32a4d7ad7094 upstream.
Signed-off-by: Leo Liu
Signed-off-by: Christian König
Signed-off-by: Greg Kroah-Hartman
commit 19aef29eea6e5b42e4097c2ccdd80e944e9f9f6f
Author: Christian König
Date: Wed Apr 23 20:46:06 2014 +0200
drm/radeon: use pflip irq on R600+ v2
commit f5d636d2a74b755879feec35e14a259de52ccc07 upstream.
Testing the update pending bit directly after issuing an
update is nonsense cause depending on the pixel clock the
CRTC needs a bit of time to execute the flip even when we
are in the VBLANK period.
This is just a non invasive patch to solve the problem at
hand, a more complete and cleaner solution should follow
in the next merge window.
Fixes: https://bugs.freedesktop.org/show\_bug.cgi?id=76564
v2: fix source IDs for CRTC2-6
Signed-off-by: Christian König
Signed-off-by: Greg Kroah-Hartman
commit f5cb8a665138985118920de132db115c74dcf7ec
Author: Christian König
Date: Thu Apr 10 16:11:36 2014 +0200
drm/radeon/uvd: use lower clocks on old UVD to boot v2
commit e45187620f9fc103edf68fa5ea78e73033e1668c upstream.
Some RV7xx generation hardware crashes after you
raise the UVD clocks for the first time. Try to
avoid this by using the lower clocks to boot these.
Workaround for: https://bugzilla.kernel.org/show\_bug.cgi?id=71891
v2: lower clocks on IB test as well
Signed-off-by: Christian König
Reviewed-by: Alex Deucher
Signed-off-by: Greg Kroah-Hartman
commit c4a92098086a52c9520d4e7cbc22000408c6160a
Author: Alex Deucher
Date: Tue Apr 22 08:17:18 2014 -0400
drm/radeon: fix count in cik\_sdma\_ring\_test()
commit 7e95cfb0b797678cd3493ca0322ef2675547a0bc upstream.
Should be 5 rather than 4.
Noticed-by: Mathias Fröhlich
Signed-off-by: Alex Deucher
Signed-off-by: Christian König
Signed-off-by: Greg Kroah-Hartman
commit c37a57cce4fe8affcf3f589232fd006be967f11c
Author: Alex Deucher
Date: Fri Apr 18 09:08:11 2014 -0400
drm/radeon: disable dpm on rv770 by default
commit 76e6dcece841faebbee78895780e8209ff40d922 upstream.
There seem to be stability issues on a number of cards.
bugs:
https://bugs.freedesktop.org/show\_bug.cgi?id=76286
https://bugzilla.redhat.com/show\_bug.cgi?id=1085785
https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=741619
Signed-off-by: Alex Deucher
Cc: matthias.graf@st.ovqu.de
Cc: bp@alien8.de
Signed-off-by: Greg Kroah-Hartman
commit 58ae7e523bd6bfb185518ad4171225ef8c1cb930
Author: Alex Deucher
Date: Tue Apr 15 12:44:35 2014 -0400
drm/radeon: don't allow runpm=1 on systems with out ATPX
commit 73acacc7397fe854ed2ab75f1c940fa00faaf15e upstream.
vgaswitcheroo and the ATPX ACPI methods are required to
power down the dGPU.
bug:
https://bugzilla.kernel.org/show\_bug.cgi?id=73901
Signed-off-by: Alex Deucher
Signed-off-by: Greg Kroah-Hartman
commit c530d3e43f61db68b29e9c2e6d5aa8fd073ca79d
Author: Alex Deucher
Date: Tue Apr 15 12:44:33 2014 -0400
drm/radeon/pm: don't walk the crtc list before it has been initialized (v2)
commit 3ed9a335cfc64b2c83545f341cdddf2347b12b97 upstream.
Avoids a crash in certain cases when thermal irqs are generated
before the display structures have been initialized.
v2: fix the vblank and vrefresh helpers as well
bug:
https://bugzilla.kernel.org/show\_bug.cgi?id=73931
Signed-off-by: Alex Deucher
Signed-off-by: Greg Kroah-Hartman
commit f9822c158e4a573cff2eeaa39c7054716bf6c375
Author: Alex Deucher
Date: Tue Apr 15 12:44:34 2014 -0400
drm/radeon: fix ATPX detection on non-VGA GPUs
commit e9a4099a59cc598a44006059dd775c25e422b772 upstream.
Some newer PX laptops have the pci device class
set to DISPLAY\_OTHER rather than DISPLAY\_VGA. This
properly detects ATPX on those laptops.
Based on a patch from: Pali Rohár
Signed-off-by: Alex Deucher
Cc: airlied@gmail.com
Signed-off-by: Greg Kroah-Hartman
commit d110f9e2766eb8df5a5b2832d7ab39c566d92721
Author: Alex Deucher
Date: Tue Apr 15 12:44:32 2014 -0400
drm/radeon: properly unregister hwmon interface (v2)
commit cb3e4e7c59e4b43ac378631f6101f5c8de3a27a5 upstream.
Need to properly unregister the hwmon device on driver
unload.
v2: minor clean up
bug:
https://bugzilla.kernel.org/show\_bug.cgi?id=73931
Signed-off-by: Alex Deucher
Signed-off-by: Greg Kroah-Hartman
commit 5f198faeb27a9ec9f7a253f3e1aaa6c16b88a227
Author: Alex Deucher
Date: Wed Apr 16 09:42:23 2014 -0400
drm/radeon/ci: make sure mc ucode is loaded before checking the size
commit bcddee29b0b87af3aeda953840f97b356b24dc5e upstream.
Avoid a possible segfault.
Noticed-by: Dan Carpenter
Signed-off-by: Alex Deucher
Signed-off-by: Greg Kroah-Hartman
commit 078e8e804177a7ce50f51ecc636f7d33e924b72d
Author: Alex Deucher
Date: Wed Apr 16 09:42:22 2014 -0400
drm/radeon/si: make sure mc ucode is loaded before checking the size
commit 8c79bae6a30f606b7a4e17c994bc5f72f8fdaf11 upstream.
Avoid a possible segfault.
Noticed-by: Dan Carpenter
Signed-off-by: Alex Deucher
Signed-off-by: Greg Kroah-Hartman
commit 3302087d6669a36c71ae57643ac36ecc8345c6ee
Author: Alex Deucher
Date: Fri Apr 11 11:21:51 2014 -0400
drm/radeon: re-enable mclk dpm on R7 260X asics
commit 7e1858f9aff7d608b3d0abad4bda0130de887b89 upstream.
If the new mc ucode is available.
Signed-off-by: Alex Deucher
Signed-off-by: Greg Kroah-Hartman
commit 4740d5c1c89c152ef847e4a479a87a25e763b286
Author: Alex Deucher
Date: Fri Apr 11 11:21:50 2014 -0400
drm/radeon: add support for newer mc ucode on CI (v2)
commit 277babc374f6ecab6af182554f5d9f35a7768755 upstream.
Fixes mclk stability on certain asics.
v2: print out mc firmware version used and size
bug:
https://bugs.freedesktop.org/show\_bug.cgi?id=75992
Signed-off-by: Alex Deucher
Signed-off-by: Greg Kroah-Hartman
commit 970e611a336ec91041087577eeb3f35b7644c6e7
Author: Alex Deucher
Date: Fri Apr 11 11:21:49 2014 -0400
drm/radeon: add support for newer mc ucode on SI (v2)
commit 1ebe92802eaf0569784dce843bc28a78842d236c upstream.
May fix stability issues with some newer cards.
v2: print out mc firmware version used and size
Signed-off-by: Alex Deucher
Signed-off-by: Greg Kroah-Hartman
commit 5fe20c529d02c53e1924e8e50f5601f9f276b1d9
Author: Alex Deucher
Date: Thu Apr 10 22:29:03 2014 -0400
drm/radeon: disable mclk dpm on R7 260X
commit 57700ad1f2f21d5d7ab7ee0e58d11b5954852434 upstream.
Setting higher mclks seems to cause stability issues
on some R7 260X boards. Disable it for now for stability
until we find a proper fix.
bug:
https://bugs.freedesktop.org/show\_bug.cgi?id=75992
Signed-off-by: Alex Deucher
Signed-off-by: Greg Kroah-Hartman
commit 89a06bf8ac495148fd4f33f1080802409df6a3d0
Author: Alex Deucher
Date: Thu Apr 10 22:29:01 2014 -0400
drm/radeon: fix runpm handling on APUs (v4)
commit 90c4cde9d5a2bb6239cb3e253bb3832ed89dc75c upstream.
Don't try and runtime suspend the APU in PX systems. We
only want to power down the dGPU.
v2: fix harder
v3: fix stupid typo
v4: consolidate runpm enablement to a single flag
bugs:
https://bugs.freedesktop.org/show\_bug.cgi?id=75127
https://bugzilla.kernel.org/show\_bug.cgi?id=72701
Signed-off-by: Alex Deucher
Signed-off-by: Greg Kroah-Hartman
commit 3c86e8d191e090fda325c782d8b0700164b91065
Author: Alex Deucher
Date: Tue Apr 8 11:28:54 2014 -0400
drm/radeon: fix audio pin counts for DCE6+ (v2)
commit be0949f5eb9c8133a05cf25f108f09e85e79cd32 upstream.
There is actually quite a bit of variance based on
the asic.
v2: fix typo noticed by Jerome.
Signed-off-by: Alex Deucher
Signed-off-by: Christian König
Signed-off-by: Greg Kroah-Hartman
commit c871d49c4034d8e3fe23699bae4780fb83a7cb27
Author: Egbert Eich
Date: Fri Apr 25 10:56:22 2014 +0200
drm/i915: Break encoder->crtc link separately in intel\_sanitize\_crtc()
commit 7f1950fbb989e8fc5463b307e062b4529d51c862 upstream.
Depending on the SDVO output\_flags SDVO may have multiple connectors
linking to the same encoder (in intel\_connector->encoder->base).
Only one of those connectors should be active (ie link to the encoder
thru drm\_connector->encoder).
If intel\_connector\_break\_all\_links() is called from intel\_sanitize\_crtc()
we may break the crtc connection of an encoder thru an inactive connector
in which case intel\_connector\_break\_all\_links() will not be called again
for the active connector if this happens to come later in the list due to:
if (connector->encoder->base.crtc != &crtc->base)
continue;
in intel\_sanitize\_crtc().
This will however leave the drm\_connector->encoder linkage for this
active connector in place. Subsequently this will cause multiple
warnings in intel\_connector\_check\_state() to trigger and the driver
will eventually die in drm\_encoder\_crtc\_ok() (because of crtc == NULL).
To avoid this remove intel\_connector\_break\_all\_links() and move its
code to its two calling functions: intel\_sanitize\_crtc() and
intel\_sanitize\_encoder().
This allows to implement the link breaking more flexibly matching
the surrounding code: ie. in intel\_sanitize\_crtc() we can break the
crtc link separatly after the links to the encoders have been
broken which avoids above problem.
This regression has been introduced in:
commit 24929352481f085c5f85d4d4cbc919ddf106d381
Author: Daniel Vetter
Date: Mon Jul 2 20:28:59 2012 +0200
drm/i915: read out the modeset hw state at load and resume time
so goes back to the very beginning of the modeset rework.
v2: This patch takes care of the concernes voiced by Chris Wilson
and Daniel Vetter that only breaking links if the drm\_connector
is linked to an encoder may miss some links.
v3: move all encoder handling to encoder loop as suggested by
Daniel Vetter.
Signed-off-by: Egbert Eich
Reviewed-by: Daniel Vetter
Cc: Jani Nikula
Signed-off-by: Jani Nikula
Signed-off-by: Greg Kroah-Hartman
commit 0779b0c8d8a87b1f8a3bdee9a7c3b14e90c197ce
Author: Daniel Vetter
Date: Thu Apr 24 12:03:17 2014 +0200
drm/i915: Don't WARN nor handle unexpected hpd interrupts on gmch platforms
commit 3ff04a160a891e56cdcee5c198d4c764d1c8c78b upstream.
The status bits are unconditionally set, the control bits only enable
the actual interrupt generation. Which means if we get some random
other interrupts we'll bogusly complain about them.
So restrict the WARN to platforms with a sane hotplug interrupt
handling scheme. And even more important also don't attempt to process
the hpd bit since we've detected a storm already. Instead just clear
the bit silently.
This WARN has been introduced in
commit b8f102e8bf71cacf33326360fdf9dcfd1a63925b
Author: Egbert Eich
Date: Fri Jul 26 14:14:24 2013 +0200
drm/i915: Add messages useful for HPD storm detection debugging (v2)
before that we silently handled the hpd event and so partially
defeated the storm detection.
v2: Pimp commit message (Jani)
Cc: Jani Nikula
Cc: Egbert Eich
Cc: bitlord
Reported-by: bitlord
Signed-off-by: Daniel Vetter
Signed-off-by: Jani Nikula
Signed-off-by: Greg Kroah-Hartman
commit 3991cd6eb52b67ff57b9531dcf48f496bad28146
Author: Daniel Vetter
Date: Sun Apr 13 12:00:33 2014 +0200
drm/i915: Don't check gmch state on inherited configs
commit 9953599bc02dbc1d3330e6a0bfc6c50e9dffcac6 upstream.
... our current modeset code isn't good enough yet to handle this. The
scenario is:
1. BIOS sets up a cloned config with lvds+external screen on the same
pipe, e.g. pipe B.
2. We read out that state for pipe B and assign the gmch\_pfit state to
it.
3. The initial modeset switches the lvds to pipe A but due to lack of
atomic modeset we don't recompute the config of pipe B.
-> both pipes now claim (in the sw pipe config structure) to use the
gmch\_pfit, which just won't work.
Bugzilla: https://bugs.freedesktop.org/show\_bug.cgi?id=74081
Tested-by: max
Cc: Alan Stern
Signed-off-by: Daniel Vetter
Signed-off-by: Jani Nikula
Signed-off-by: Greg Kroah-Hartman
commit 79f09e67094e00a31f43b9f177350a88ada1dc98
Author: Ville Syrjälä
Date: Thu Mar 27 11:08:45 2014 +0200
drm/i915: Allow user modes to exceed DVI 165MHz limit
commit 40478455fefdc0bde24ae872c3f88d58a1b0e435 upstream.
In commit
commit 6375b768a9850b6154478993e5fb566fa4614a9c
Author: Ville Syrjälä
Date: Mon Mar 3 11:33:36 2014 +0200
drm/i915: Reject >165MHz modes w/ DVI monitors
the driver started to filter out display modes which exceed the
single-link DVI 165Mz dotclock limits when the monitor doesn't report
itself as being HDMI compliant. The intent was to filter out all
EDID derived modes that require dual-link DVI to operate since we
don't support dual-link.
However the patch went a bit too far and also causes the driver to reject
such modes even when specified by the user. Normally we don't check the
sink limitations when setting a mode from the user. This allows the user
to specify any mode whether the sink reports to support it or not. This
can be useful since often the sinks support more modes than they report
in the EDID.
So relax the checks a bit, and apply the single-link DVI dotclock limit
only when filtering the mode list, and ignore the limit when setting
a user specified mode.
Bugzilla: https://bugzilla.kernel.org/show\_bug.cgi?id=72961
Tested-by: Nicholas Vinson
Reviewed-by: Daniel Vetter
Signed-off-by: Ville Syrjälä
Signed-off-by: Jani Nikula
Signed-off-by: Greg Kroah-Hartman
commit ecf253254253bebd4ee5456f9cf038ac647002c8
Author: Neil Greatorex
Date: Fri Apr 18 14:19:49 2014 +0200
irqchip: armada-370-xp: Fix releasing of MSIs
commit ff3c664505bf8a8334bca5045e87b85cfe4d2277 upstream.
Store the value of d->hwirq in a local variable as the real value is wiped out
by calling irq\_dispose\_mapping. Without this patch, the armada\_370\_xp\_free\_msi
function would always free MSI#0, no matter what was passed to it.
Fixes: 31f614edb726fcc4d5aa0f2895fbdec9b04a3ca4 ('irqchip: armada-370-xp: implement MSI support')
Signed-off-by: Neil Greatorex
Link: https://lkml.kernel.org/r/1397823593-1932-4-git-send-email-thomas.petazzoni@free-electrons.com
Signed-off-by: Thomas Petazzoni
Link: https://lkml.kernel.org/r/1397823593-1932-4-git-send-email-thomas.petazzoni@free-electrons.com
Signed-off-by: Jason Cooper
Signed-off-by: Greg Kroah-Hartman
commit 12a4de881cd646f8c594e0b70df8ce4c9117969c
Author: Thomas Petazzoni
Date: Fri Apr 18 14:19:48 2014 +0200
irqchip: armada-370-xp: implement the ->check\_device() msi\_chip operation
commit 830cbe4b7a918613276aa3d3b28d24410623f92c upstream.
Until now, we were leaving the ->check\_device() msi\_chip operation
empty, which leads the PCI core to believe that we support both MSI
and MSI-X. In fact, we do not support MSI-X, so we have to tell this
to the PCI core by providing an implementation of this operation.
Fixes: 31f614edb726fcc4d5aa0f2895fbdec9b04a3ca4 ('irqchip: armada-370-xp: implement MSI support')
Signed-off-by: Thomas Petazzoni
Link: https://lkml.kernel.org/r/1397823593-1932-3-git-send-email-thomas.petazzoni@free-electrons.com
Tested-by: Neil Greatorex
Signed-off-by: Jason Cooper
Signed-off-by: Greg Kroah-Hartman
commit 338187da0dbc36fa9bbe955694413befdda863d5
Author: Thomas Petazzoni
Date: Fri Apr 18 14:19:47 2014 +0200
irqchip: armada-370-xp: fix invalid cast of signed value into unsigned variable
commit da343fc776e0bcb238b65d9d24610819b95d0ef4 upstream.
The armada\_370\_xp\_alloc\_msi() function returns a signed int, which is
negative on error. However, we store the return value into an
irq\_hw\_number\_t, which is unsigned. Therefore, we actually never test
if armada\_370\_xp\_alloc\_msi() returns an error or not, which may lead
us to use hwirq numbers of as 0xffffffe4 (when
armada\_370\_xp\_alloc\_msi() returns -ENOSPC).
This commit fixes that by storing the return value of
armada\_370\_xp\_alloc\_msi() in a signed variable.
Fixes: 31f614edb726fcc4d5aa0f2895fbdec9b04a3ca4 ('irqchip: armada-370-xp: implement MSI support')
Signed-off-by: Thomas Petazzoni
Link: https://lkml.kernel.org/r/1397823593-1932-2-git-send-email-thomas.petazzoni@free-electrons.com
Tested-by: Neil Greatorex
Signed-off-by: Jason Cooper
Signed-off-by: Greg Kroah-Hartman
commit 92c2df53a32daea0cc2c98d377bf4a5be8c7d934
Author: Kieran Clancy
Date: Wed Apr 30 00:21:20 2014 +0930
ACPI / EC: Process rather than discard events in acpi\_ec\_clear
commit 3eba563e280101209bad27d40bfc83ddf1489234 upstream.
Address a regression caused by commit ad332c8a4533:
(ACPI / EC: Clear stale EC events on Samsung systems)
After the earlier patch, there was found to be a race condition on some
earlier Samsung systems (N150/N210/N220). The function acpi\_ec\_clear was
sometimes discarding a new EC event before its GPE was triggered by the
system. In the case of these systems, this meant that the "lid open"
event was not registered on resume if that was the cause of the wake,
leading to problems when attempting to close the lid to suspend again.
After testing on a number of Samsung systems, both those affected by the
previous EC bug and those affected by the race condition, it seemed that
the best course of action was to process rather than discard the events.
On Samsung systems which accumulate stale EC events, there does not seem
to be any adverse side-effects of running the associated \_Q methods.
This patch adds an argument to the static function acpi\_ec\_sync\_query so
that it may be used within the acpi\_ec\_clear loop in place of
acpi\_ec\_query\_unlocked which was used previously.
With thanks to Stefan Biereigel for reporting the issue, and for all the
people who helped test the new patch on affected systems.
Fixes: ad332c8a4533 (ACPI / EC: Clear stale EC events on Samsung systems)
References: https://lkml.kernel.org/r/532FE3B2.9060808@biereigel-wb.de
References: https://bugzilla.kernel.org/show\_bug.cgi?id=44161#c173
Reported-by: Stefan Biereigel
Signed-off-by: Kieran Clancy
Tested-by: Stefan Biereigel
Tested-by: Dennis Jansen
Tested-by: Nicolas Porcel
Tested-by: Maurizio D'Addona
Tested-by: Juan Manuel Cabo
Tested-by: Giannis Koutsou
Tested-by: Kieran Clancy
Signed-off-by: Rafael J. Wysocki
Signed-off-by: Greg Kroah-Hartman
commit b4f4e365642929fe45616bf2d3c79baf81dbf8b4
Author: Rafael J. Wysocki
Date: Wed Apr 30 22:36:33 2014 +0200
PNP / ACPI: Do not return errors if \_DIS or \_SRS are not present
commit a8d22396302b7e4e5f0a594c1c1594388c29edaf upstream.
The ACPI PNP subsystem returns errors from pnpacpi\_set\_resources()
and pnpacpi\_disable\_resources() if the \_SRS or \_DIS methods are not
present, respectively, but it should not do that, because those
methods are optional. For this reason, modify pnpacpi\_set\_resources()
and pnpacpi\_disable\_resources(), respectively, to ignore missing \_SRS
or \_DIS.
This problem has been uncovered by commit 202317a573b2 (ACPI / scan:
Add acpi\_device objects for all device nodes in the namespace) and
manifested itself by causing serial port suspend to fail on some
systems.
Fixes: 202317a573b2 (ACPI / scan: Add acpi\_device objects for all device nodes in the namespace)
References: https://bugzilla.kernel.org/show\_bug.cgi?id=74371
Reported-by: wxg4net
Reported-and-tested-by:
Signed-off-by: Rafael J. Wysocki
Signed-off-by: Greg Kroah-Hartman
commit 0bc4091108e8f2e65faef3082e5261f2c35cd2b4
Author: NeilBrown
Date: Tue May 6 09:36:08 2014 +1000
md: avoid possible spinning md thread at shutdown.
commit 0f62fb220aa4ebabe8547d3a9ce4a16d3c045f21 upstream.
If an md array with externally managed metadata (e.g. DDF or IMSM)
is in use, then we should not set safemode==2 at shutdown because:
1/ this is ineffective: user-space need to be involved in any 'safemode' handling,
2/ The safemode management code doesn't cope with safemode==2 on external metadata
and md\_check\_recover enters an infinite loop.
Even at shutdown, an infinite-looping process can be problematic, so this
could cause shutdown to hang.
Signed-off-by: NeilBrown
Signed-off-by: Greg Kroah-Hartman
commit 8c7311a1c4a8d804bde91b00a2f2c1a22a954c30
Author: NeilBrown
Date: Mon May 5 13:34:37 2014 +1000
md/raid10: call wait\_barrier() for each request submitted.
commit cc13b1d1500656a20e41960668f3392dda9fa6e2 upstream.
wait\_barrier() includes a counter, so we must call it precisely once
(unless balanced by allow\_barrier()) for each request submitted.
Since
commit 20d0189b1012a37d2533a87fb451f7852f2418d1
block: Introduce new bio\_split()
in 3.14-rc1, we don't call it for the extra requests generated when
we need to split a bio.
When this happens the counter goes negative, any resync/recovery will
never start, and "mdadm --stop" will hang.
Reported-by: Chris Murphy
Fixes: 20d0189b1012a37d2533a87fb451f7852f2418d1
Cc: Kent Overstreet
Signed-off-by: NeilBrown
Signed-off-by: Greg Kroah-Hartman
commit f9556c35b5b7ce5b50a0490c2b93c88af92df648
Author: Mike Snitzer
Date: Thu May 1 16:14:24 2014 -0400
dm cache: fix writethrough mode quiescing in cache\_map
commit 131cd131a9ff63d4b84f3fe15073a2984ac30066 upstream.
Commit 2ee57d58735 ("dm cache: add passthrough mode") inadvertently
removed the deferred set reference that was taken in cache\_map()'s
writethrough mode support. Restore taking this reference.
This issue was found with code inspection.
Signed-off-by: Mike Snitzer
Acked-by: Joe Thornber
Signed-off-by: Greg Kroah-Hartman
commit c80498a9f6b91d35bc6b6dfd185886d8d4346d43
Author: Milan Broz
Date: Mon Apr 14 22:02:30 2014 +0200
dm verity: fix biovecs hash calculation regression
commit 3a7745215e7f73a5c7d9bcdc50661a55b39052a3 upstream.
Commit 003b5c5719f159f4f4bf97511c4702a0638313dd ("block: Convert drivers
to immutable biovecs") incorrectly converted biovec iteration in
dm-verity to always calculate the hash from a full biovec, but the
function only needs to calculate the hash from part of the biovec (up to
the calculated "todo" value).
Fix this issue by limiting hash input to only the requested data size.
This problem was identified using the cryptsetup regression test for
veritysetup (verity-compat-test).
Signed-off-by: Milan Broz
Acked-by: Mikulas Patocka
Signed-off-by: Mike Snitzer
Signed-off-by: Greg Kroah-Hartman
commit 14f7702f692048e1426d763457a34cb02e5c4267
Author: Viresh Kumar
Date: Mon May 12 13:42:29 2014 +0530
hrtimer: Set expiry time before switch\_hrtimer\_base()
commit 84ea7fe37908254c3bd90910921f6e1045c1747a upstream.
switch\_hrtimer\_base() calls hrtimer\_check\_target() which ensures that
we do not migrate a timer to a remote cpu if the timer expires before
the current programmed expiry time on that remote cpu.
But \_\_hrtimer\_start\_range\_ns() calls switch\_hrtimer\_base() before the
new expiry time is set. So the sanity check in hrtimer\_check\_target()
is operating on stale or even uninitialized data.
Update expiry time before calling switch\_hrtimer\_base().
[ tglx: Rewrote changelog once again ]
Signed-off-by: Viresh Kumar
Cc: linaro-kernel@lists.linaro.org
Cc: linaro-networking@linaro.org
Cc: fweisbec@gmail.com
Cc: arvind.chauhan@arm.com
Link: http://lkml.kernel.org/r/81999e148745fc51bbcd0615823fbab9b2e87e23.1399882253.git.viresh.kumar@linaro.org
Signed-off-by: Thomas Gleixner
Signed-off-by: Greg Kroah-Hartman
commit a975e06b60d48007642a622ca17883003cc3a90f
Author: Leon Ma
Date: Wed Apr 30 16:43:10 2014 +0800
hrtimer: Prevent remote enqueue of leftmost timers
commit 012a45e3f4af68e86d85cce060c6c2fed56498b2 upstream.
If a cpu is idle and starts an hrtimer which is not pinned on that
same cpu, the nohz code might target the timer to a different cpu.
In the case that we switch the cpu base of the timer we already have a
sanity check in place, which determines whether the timer is earlier
than the current leftmost timer on the target cpu. In that case we
enqueue the timer on the current cpu because we cannot reprogram the
clock event device on the target.
If the timers base is already the target CPU we do not have this
sanity check in place so we enqueue the timer as the leftmost timer in
the target cpus rb tree, but we cannot reprogram the clock event
device on the target cpu. So the timer expires late and subsequently
prevents the reprogramming of the target cpu clock event device until
the previously programmed event fires or a timer with an earlier
expiry time gets enqueued on the target cpu itself.
Add the same target check as we have for the switch base case and
start the timer on the current cpu if it would become the leftmost
timer on the target.
[ tglx: Rewrote subject and changelog ]
Signed-off-by: Leon Ma
Link: http://lkml.kernel.org/r/1398847391-5994-1-git-send-email-xindong.ma@intel.com
Signed-off-by: Thomas Gleixner
Signed-off-by: Greg Kroah-Hartman
commit 149c874163b1e5f13e46f8a87b1e69fa7b613b92
Author: Stuart Hayes
Date: Tue Apr 29 17:55:02 2014 -0500
hrtimer: Prevent all reprogramming if hang detected
commit 6c6c0d5a1c949d2e084706f9e5fb1fccc175b265 upstream.
If the last hrtimer interrupt detected a hang it sets hang\_detected=1
and programs the clock event device with a delay to let the system
make progress.
If hang\_detected == 1, we prevent reprogramming of the clock event
device in hrtimer\_reprogram() but not in hrtimer\_force\_reprogram().
This can lead to the following situation:
hrtimer\_interrupt()
hang\_detected = 1;
program ce device to Xms from now (hang delay)
We have two timers pending:
T1 expires 50ms from now
T2 expires 5s from now
Now T1 gets canceled, which causes hrtimer\_force\_reprogram() to be
invoked, which in turn programs the clock event device to T2 (5
seconds from now).
Any hrtimer\_start after that will not reprogram the hardware due to
hang\_detected still being set. So we effectivly block all timers until
the T2 event fires and cleans up the hang situation.
Add a check for hang\_detected to hrtimer\_force\_reprogram() which
prevents the reprogramming of the hang delay in the hardware
timer. The subsequent hrtimer\_interrupt will resolve all outstanding
issues.
[ tglx: Rewrote subject and changelog and fixed up the comment in
hrtimer\_force\_reprogram() ]
Signed-off-by: Stuart Hayes
Link: http://lkml.kernel.org/r/53602DC6.2060101@gmail.com
Signed-off-by: Thomas Gleixner
Signed-off-by: Greg Kroah-Hartman
commit 1636737609d52bc1560bf8189f4d897c9c8c03f4
Author: Grant Likely
Date: Tue Apr 29 12:05:22 2014 +0100
drivercore: deferral race condition fix
commit 58b116bce13612e5aa6fcd49ecbd4cf8bb59e835 upstream.
When the kernel is built with CONFIG\_PREEMPT it is possible to reach a state
when all modules loaded but some driver still stuck in the deferred list
and there is a need for external event to kick the deferred queue to probe
these drivers.
The issue has been observed on embedded systems with CONFIG\_PREEMPT enabled,
audio support built as modules and using nfsroot for root filesystem.
The following log fragment shows such sequence when all audio modules
were loaded but the sound card is not present since the machine driver has
failed to probe due to missing dependency during it's probe.
The board is am335x-evmsk (McASP<->tlv320aic3106 codec) with davinci-evm
machine driver:
...
[ 12.615118] davinci-mcasp 4803c000.mcasp: davinci\_mcasp\_probe: ENTER
[ 12.719969] davinci\_evm sound.3: davinci\_evm\_probe: ENTER
[ 12.725753] davinci\_evm sound.3: davinci\_evm\_probe: snd\_soc\_register\_card
[ 12.753846] davinci-mcasp 4803c000.mcasp: davinci\_mcasp\_probe: snd\_soc\_register\_component
[ 12.922051] davinci-mcasp 4803c000.mcasp: davinci\_mcasp\_probe: snd\_soc\_register\_component DONE
[ 12.950839] davinci\_evm sound.3: ASoC: platform (null) not registered
[ 12.957898] davinci\_evm sound.3: davinci\_evm\_probe: snd\_soc\_register\_card DONE (-517)
[ 13.099026] davinci-mcasp 4803c000.mcasp: Kicking the deferred list
[ 13.177838] davinci-mcasp 4803c000.mcasp: really\_probe: probe\_count = 2
[ 13.194130] davinci\_evm sound.3: snd\_soc\_register\_card failed (-517)
[ 13.346755] davinci\_mcasp\_driver\_init: LEAVE
[ 13.377446] platform sound.3: Driver davinci\_evm requests probe deferral
[ 13.592527] platform sound.3: really\_probe: probe\_count = 0
In the log the machine driver enters it's probe at 12.719969 (this point it
has been removed from the deferred lists). McASP driver already executing
it's probing (since 12.615118).
The machine driver tries to construct the sound card (12.950839) but did
not found one of the components so it fails. After this McASP driver
registers all the ASoC components (the machine driver still in it's probe
function after it failed to construct the card) and the deferred work is
prepared at 13.099026 (note that this time the machine driver is not in the
lists so it is not going to be handled when the work is executing).
Lastly the machine driver exit from it's probe and the core places it to
the deferred list but there will be no other driver going to load and the
deferred queue is not going to be kicked again - till we have external event
like connecting USB stick, etc.
The proposed solution is to try the deferred queue once more when the last
driver is asking for deferring and we had drivers loaded while this last
driver was probing.
This way we can avoid drivers stuck in the deferred queue.
Signed-off-by: Grant Likely
Reviewed-by: Peter Ujfalusi
Tested-by: Peter Ujfalusi
Acked-by: Greg Kroah-Hartman
Cc: Mark Brown
Signed-off-by: Greg Kroah-Hartman
commit 0bdedaf41a797458aa4ed3c73004f0658af760fa
Author: Josef Gajdusek
Date: Mon May 12 13:48:26 2014 +0200
hwmon: (emc1403) Support full range of known chip revision numbers
commit 3a18e1398fc2dc9c32bbdc50664da3a77959a8d1 upstream.
The datasheet for EMC1413/EMC1414, which is fully compatible to
EMC1403/1404 and uses the same chip identification, references revision
numbers 0x01, 0x03, and 0x04. Accept the full range of revision numbers
from 0x01 to 0x04 to make sure none are missed.
Signed-off-by: Josef Gajdusek
[Guenter Roeck: Updated headline and description]
Signed-off-by: Guenter Roeck
Signed-off-by: Greg Kroah-Hartman
commit 5b532284ae769ee07b5f9592b1888da9336fca18
Author: Jean Delvare
Date: Mon May 12 11:44:51 2014 +0200
hwmon: (emc1403) Fix resource leak on module unload
commit 8759f9046550f463098148bf577ccd32cdb895e3 upstream.
Commit 454aee17f claims to convert driver emc1403 to use
devm\_hwmon\_device\_register\_with\_groups, however the patch itself makes
use of hwmon\_device\_register\_with\_groups instead. As the driver remove
function was still dropped, the hwmon device is no longer unregistered
on driver removal, leading to a resource leak.
Signed-off-by: Jean Delvare
Fixes: 454aee17f hwmon: (emc1403) Convert to use devm\_hwmon\_device\_register\_with\_groups
Cc: Guenter Roeck
Signed-off-by: Guenter Roeck
Signed-off-by: Greg Kroah-Hartman
commit 0b86a50c92e0118117224d57a9b4aa79d33d98b0
Author: Josef Gajdusek
Date: Sun May 11 14:40:44 2014 +0200
hwmon: (emc1403) fix inverted store\_hyst()
commit 17c048fc4bd95efea208a1920f169547d8588f1f upstream.
Attempts to set the hysteresis value to a temperature below the target
limit fails with "write error: Numerical result out of range" due to
an inverted comparison.
Signed-off-by: Josef Gajdusek
Reviewed-by: Jean Delvare
[Guenter Roeck: Updated headline and description]
Signed-off-by: Guenter Roeck
Signed-off-by: Greg Kroah-Hartman
commit f35f0047951663702d21e430c9e986a22c4ddd69
Author: Guenter Roeck
Date: Wed Apr 30 14:08:14 2014 -0700
Revert "hwmon: (coretemp) Refine TjMax detection"
commit c0940e95f7a78be0525c8d31df0b1f71e149e57e upstream.
This reverts commit 9fb6c9c73b11bef65ba80a362547fd116c1e1c9d.
Tjmax on some Intel CPUs is below 85 degrees C. One known example is
L5630 with Tjmax of 71 degrees C. There are other Xeon processors with
Tjmax of 70 or 80 degrees C. Also, the Intel IA32 System Programming
document states that the temperature target is in bits 23:16 of MSR 0x1a2
(MSR\_TEMPERATURE\_TARGET), which is 8 bits, not 7.
So even if turbostat uses similar checks to validate Tjmax, there is no
evidence that the checks are actually required. On the contrary, the
checks are known to cause problems and therefore need to be removed.
This fixes https://bugzilla.kernel.org/show\_bug.cgi?id=75071.
Fixes: 9fb6c9c hwmon: (coretemp) Refine TjMax detection
Reviewed-by: Jean Delvare
Signed-off-by: Guenter Roeck
Signed-off-by: Greg Kroah-Hartman
commit 43cbcb5be20cb6f61833bd596c0f74f6c8cc048c
Author: Rusty Russell
Date: Mon Apr 28 11:05:43 2014 +0930
module: remove warning about waiting module removal.
commit 79465d2fd48e68940c2bdecddbdecd45bbba06fe upstream.
We remove the waiting module removal in commit 3f2b9c9cdf38 (September
2013), but it turns out that modprobe in kmod (< version 16) was
asking for waiting module removal. No one noticed since modprobe would
check for 0 usage immediately before trying to remove the module, and
the race is unlikely.
However, it means that anyone running old (but not ancient) kmod
versions is hitting the printk designed to see if anyone was running
"rmmod -w". All reports so far have been false positives, so remove
the warning.
Fixes: 3f2b9c9cdf389e303b2273679af08aab5f153517
Reported-by: Valerio Vanni
Cc: Elliott, Robert (Server Storage)
Acked-by: Lucas De Marchi
Signed-off-by: Rusty Russell
Signed-off-by: Greg Kroah-Hartman
commit 991d867488c63cf76138596a96147839f9975989
Author: Leon Yu
Date: Thu May 1 03:31:28 2014 +0000
aio: fix potential leak in aio\_run\_iocb().
commit 754320d6e166d3a12cb4810a452bde00afbd4e9a upstream.
iovec should be reclaimed whenever caller of rw\_copy\_check\_uvector() returns,
but it doesn't hold when failure happens right after aio\_setup\_vectored\_rw().
Fix that in a such way to avoid hairy goto.
Signed-off-by: Leon Yu
Signed-off-by: Benjamin LaHaise
Signed-off-by: Greg Kroah-Hartman
commit 53937890848b0e9552be2119ad49823cfb9c5eb9
Author: Johannes Berg
Date: Wed Mar 19 18:36:39 2014 +0100
iwlwifi: mvm: delay enabling smart FIFO until after beacon RX
commit 0229cdafb6f67064a217591d48b0f6abf14e8385 upstream.
If we have no beacon data before association, delay smart FIFO
enablement until after we have this data.
Not doing so can cause association failures in extremely silent
environments (usually only a shielded box/room) as beacon RX is
not sent to the host immediately, and then the association time
event ends without the host receiving any beacon even though it
was on the air - it's just stuck on the FIFO.
Fixes: 1f3b0ff8ecce ("iwlwifi: mvm: Add Smart FIFO support")
Signed-off-by: Johannes Berg
Signed-off-by: Emmanuel Grumbach
Signed-off-by: Greg Kroah-Hartman
commit 54a2ab1efaf5d35d68143a9c0f652955ad16eb82
Author: Chen Yucong
Date: Thu May 22 11:54:15 2014 -0700
hwpoison, hugetlb: lock\_page/unlock\_page does not match for handling a free hugepage
commit b985194c8c0a130ed155b71662e39f7eaea4876f upstream.
For handling a free hugepage in memory failure, the race will happen if
another thread hwpoisoned this hugepage concurrently. So we need to
check PageHWPoison instead of !PageHWPoison.
If hwpoison\_filter(p) returns true or a race happens, then we need to
unlock\_page(hpage).
Signed-off-by: Chen Yucong
Reviewed-by: Naoya Horiguchi
Tested-by: Naoya Horiguchi
Reviewed-by: Andi Kleen
Signed-off-by: Andrew Morton
Signed-off-by: Linus Torvalds
Signed-off-by: Greg Kroah-Hartman
commit 7c5a5a8a48bc22f7df51c1d78f595b411a447a0f
Author: Mark Salter
Date: Thu May 15 15:19:22 2014 +0100
arm64: fix pud\_huge() for 2-level pagetables
commit 4797ec2dc83a43be35bad56037d1b53db9e2b5d5 upstream.
The following happens when trying to run a kvm guest on a kernel
configured for 64k pages. This doesn't happen with 4k pages:
BUG: failure at include/linux/mm.h:297/put\_page\_testzero()!
Kernel panic - not syncing: BUG!
CPU: 2 PID: 4228 Comm: qemu-system-aar Tainted: GF 3.13.0-0.rc7.31.sa2.k32v1.aarch64.debug #1
Call trace:
[] dump\_backtrace+0x0/0x16c
[] show\_stack+0x14/0x1c
[] dump\_stack+0x84/0xb0
[] panic+0xf4/0x220
[] free\_reserved\_area+0x0/0x110
[] free\_pages+0x50/0x88
[] kvm\_free\_stage2\_pgd+0x30/0x40
[] kvm\_arch\_destroy\_vm+0x18/0x44
[] kvm\_put\_kvm+0xf0/0x184
[] kvm\_vm\_release+0x10/0x1c
[] \_\_fput+0xb0/0x288
[] \_\_\_\_fput+0xc/0x14
[] task\_work\_run+0xa8/0x11c
[] do\_notify\_resume+0x54/0x58
In arch/arm/kvm/mmu.c:unmap\_range(), we end up doing an extra put\_page()
on the stage2 pgd which leads to the BUG in put\_page\_testzero(). This
happens because a pud\_huge() test in unmap\_range() returns true when it
should always be false with 2-level pages tables used by 64k pages.
This patch removes support for huge puds if 2-level pagetables are
being used.
Signed-off-by: Mark Salter
[catalin.marinas@arm.com: removed #ifndef around PUD\_SIZE check]
Signed-off-by: Catalin Marinas
Signed-off-by: Greg Kroah-Hartman
commit d0cdfb253ea2c82d650ce656160ffd233bf736f5
Author: Anthony Iliopoulos
Date: Wed May 14 11:29:48 2014 +0200
x86, mm, hugetlb: Add missing TLB page invalidation for hugetlb\_cow()
commit 9844f5462392b53824e8b86726e7c33b5ecbb676 upstream.
The invalidation is required in order to maintain proper semantics
under CoW conditions. In scenarios where a process clones several
threads, a thread operating on a core whose DTLB entry for a
particular hugepage has not been invalidated, will be reading from
the hugepage that belongs to the forked child process, even after
hugetlb\_cow().
The thread will not see the updated page as long as the stale DTLB
entry remains cached, the thread attempts to write into the page,
the child process exits, or the thread gets migrated to a different
processor.
Signed-off-by: Anthony Iliopoulos
Link: http://lkml.kernel.org/r/20140514092948.GA17391@server-36.huawei.corp
Suggested-by: Shay Goikhman
Acked-by: Dave Hansen
Signed-off-by: H. Peter Anvin
Signed-off-by: Greg Kroah-Hartman
commit 57a0cd815351438f7ed67a6923b33eb6cdde4986
Author: Heiko Stuebner
Date: Fri May 9 15:36:57 2014 -0700
drivers/rtc/rtc-hym8563.c: set uie\_unsupported
commit 282cba6b00a95f0277ed71551e3f6b0477e8836b upstream.
The alarm of the hym8563 only supports a minute accuracy, while the uie
wants an alarm one second in the future. Therefore things like the
select() syscall will fail with a timeout, because the next alarm will
happen in a worst case of 60 seconds.
Signed-off-by: Heiko Stuebner
Cc: Alessandro Zummo
Signed-off-by: Andrew Morton
Signed-off-by: Linus Torvalds
Signed-off-by: Greg Kroah-Hartman
commit 2bcd64e5aaa27654473ba5fbda7e6e057aa75cc8
Author: Kirill A. Shutemov
Date: Fri May 9 15:37:00 2014 -0700
mm, thp: close race between mremap() and split\_huge\_page()
commit dd18dbc2d42af75fffa60c77e0f02220bc329829 upstream.
It's critical for split\_huge\_page() (and migration) to catch and freeze
all PMDs on rmap walk. It gets tricky if there's concurrent fork() or
mremap() since usually we copy/move page table entries on dup\_mm() or
move\_page\_tables() without rmap lock taken. To get it work we rely on
rmap walk order to not miss any entry. We expect to see destination VMA
after source one to work correctly.
But after switching rmap implementation to interval tree it's not always
possible to preserve expected walk order.
It works fine for dup\_mm() since new VMA has the same vma\_start\_pgoff()
/ vma\_last\_pgoff() and explicitly insert dst VMA after src one with
vma\_interval\_tree\_insert\_after().
But on move\_vma() destination VMA can be merged into adjacent one and as
result shifted left in interval tree. Fortunately, we can detect the
situation and prevent race with rmap walk by moving page table entries
under rmap lock. See commit 38a76013ad80.
Problem is that we miss the lock when we move transhuge PMD. Most
likely this bug caused the crash[1].
[1] http://thread.gmane.org/gmane.linux.kernel.mm/96473
Fixes: 108d6642ad81 ("mm anon rmap: remove anon\_vma\_moveto\_tail")
Signed-off-by: Kirill A. Shutemov
Reviewed-by: Andrea Arcangeli
Cc: Rik van Riel
Acked-by: Michel Lespinasse
Cc: Dave Jones
Cc: David Miller
Acked-by: Johannes Weiner
Signed-off-by: Andrew Morton
Signed-off-by: Linus Torvalds
Signed-off-by: Greg Kroah-Hartman
commit 6a12f896ce0aa2e88af62b5282b2a40488a5283e
Author: Johannes Berg
Date: Wed May 14 15:34:41 2014 +0200
mac80211: fix on-channel remain-on-channel
commit b4b177a5556a686909e643f1e9b6434c10de079f upstream.
Jouni reported that if a remain-on-channel was active on the
same channel as the current operating channel, then the ROC
would start, but any frames transmitted using mgmt-tx on the
same channel would get delayed until after the ROC.
The reason for this is that the ROC starts, but doesn't have
any handling for "remain on the same channel", so it stops
the interface queues. The later mgmt-tx then puts the frame
on the interface queues (since it's on the current operating
channel) and thus they get delayed until after the ROC.
To fix this, add some logic to handle remaining on the same
channel specially and not stop the queues etc. in this case.
This not only fixes the bug but also improves behaviour in
this case as data frames etc. can continue to flow.
Reported-by: Jouni Malinen
Tested-by: Jouni Malinen
Signed-off-by: Johannes Berg
Signed-off-by: Greg Kroah-Hartman
commit 802cb37dbc7b07bb557ca7a9817c1566e28c8d26
Author: Emmanuel Grumbach
Date: Tue May 13 12:54:09 2014 +0300
mac80211: fix suspend vs. association race
commit c52666aef9f2dff39276eb53f15d99e2e229870f upstream.
If the association is in progress while we suspend, the
stack will be in a messed up state. Clean it before we
suspend.
This patch completes Johannes's patch:
1a1cb744de160ee70086a77afff605bbc275d291
Author: Johannes Berg
mac80211: fix suspend vs. authentication race
Fixes: 12e7f517029d ("mac80211: cleanup generic suspend/resume procedures")
Signed-off-by: Emmanuel Grumbach
Signed-off-by: Johannes Berg
Signed-off-by: Greg Kroah-Hartman
commit 8faa53c451ac66d604253105b2041356d723d4c1
Author: Eliad Peller
Date: Wed Apr 30 16:14:24 2014 +0300
mac80211: fix nested rtnl locking on ieee80211\_reconfig
commit e669ba2d06c6195662601956454ac959892f0762 upstream.
ieee80211\_reconfig already holds rtnl, so calling
cfg80211\_sched\_scan\_stopped results in deadlock.
Use the rtnl-version of this function instead.
Fixes: d43c6b6 ("mac80211: reschedule sched scan after HW restart")
Signed-off-by: Eliad Peller
Signed-off-by: Johannes Berg
Signed-off-by: Greg Kroah-Hartman
commit 853487c377bee8175103a85bb00b8d9385bd4359
Author: Eliad Peller
Date: Wed Apr 30 16:14:23 2014 +0300
cfg80211: add cfg80211\_sched\_scan\_stopped\_rtnl
commit 792e6aa7a15ea0fb16f8687e93caede1ea9118c7 upstream.
Add locked-version for cfg80211\_sched\_scan\_stopped.
This is used for some users that might want to
call it when rtnl is already locked.
Fixes: d43c6b6 ("mac80211: reschedule sched scan after HW restart")
Signed-off-by: Eliad Peller
Signed-off-by: Johannes Berg
Signed-off-by: Greg Kroah-Hartman
commit 9b36bd2727bac870fa3a4cba856af3a85af55410
Author: Eliad Peller
Date: Wed Apr 30 15:58:13 2014 +0300
cfg80211: free sme on connection failures
commit c1fbb258846dfc425507a093922d2d001e54c3ea upstream.
cfg80211 is notified about connection failures by
\_\_cfg80211\_connect\_result() call. However, this
function currently does not free cfg80211 sme.
This results in hanging connection attempts in some cases
e.g. when mac80211 authentication attempt is denied,
we have this function call:
ieee80211\_rx\_mgmt\_auth() -> cfg80211\_rx\_mlme\_mgmt() ->
cfg80211\_process\_auth() -> cfg80211\_sme\_rx\_auth() ->
\_\_cfg80211\_connect\_result()
but cfg80211\_sme\_free() is never get called.
Fixes: ceca7b712 ("cfg80211: separate internal SME implementation")
Signed-off-by: Eliad Peller
Signed-off-by: Johannes Berg
Signed-off-by: Greg Kroah-Hartman
commit 01a6e699b573ca7b72de3339121e9872f80b49f3
Author: Ilan Peer
Date: Tue Jan 14 15:17:23 2014 +0200
cfg80211: fix few minor issues in reg\_process\_hint()
commit 772f0389338cfcf96da1c178046dc7e1649ab554 upstream.
Fix the following issues in reg\_process\_hint():
1. Add verification that wiphy is valid before processing
NL80211\_REGDOMAIN\_SET\_BY\_COUNTRY\_IE.
2. Free the request in case of invalid initiator.
3. Remove WARN\_ON check on reg\_request->alpha2 as it is not a
pointer.
Signed-off-by: Ilan Peer
Signed-off-by: Johannes Berg
Signed-off-by: Luis R. Rodriguez
Signed-off-by: Greg Kroah-Hartman
commit 87e837b6dd8f7756ac55325900ff885f1689dc71
Author: Corey Minyard
Date: Mon Apr 14 09:46:52 2014 -0500
ipmi: Reset the KCS timeout when starting error recovery
commit eb6d78ec213e6938559b801421d64714dafcf4b2 upstream.
The OBF timer in KCS was not reset in one situation when error recovery
was started, resulting in an immediate timeout.
Reported-by: Bodo Stroesser
Signed-off-by: Corey Minyard
Signed-off-by: Linus Torvalds
Signed-off-by: Greg Kroah-Hartman
commit 2915ea2cf89b86347689ac2ec73922620528c3e0
Author: Bodo Stroesser
Date: Mon Apr 14 09:46:51 2014 -0500
ipmi: Fix a race restarting the timer
commit 48e8ac2979920ffa39117e2d725afa3a749bfe8d upstream.
With recent changes it is possible for the timer handler to detect an
idle interface and not start the timer, but the thread to start an
operation at the same time. The thread will not start the timer in that
instance, resulting in the timer not running.
Instead, move all timer operations under the lock and start the timer in
the thread if it detect non-idle and the timer is not already running.
Moving under locks allows the last timeout to be set in both the thread
and the timer. 'Timer is not running' means that the timer is not
pending and smi\_timeout() is not running. So we need a flag to detect
this correctly.
Also fix a few other timeout bugs: setting the last timeout when the
interrupt has to be disabled and the timer started, and setting the last
timeout in check\_start\_timer\_thread possibly racing with the timer
Signed-off-by: Corey Minyard
Signed-off-by: Bodo Stroesser
Signed-off-by: Linus Torvalds
Signed-off-by: Greg Kroah-Hartman
commit 58773757360a8e94c60ed2f04f2a12a55cb6aa51
Author: Jiri Bohac
Date: Fri Apr 18 17:23:11 2014 +0200
timer: Prevent overflow in apply\_slack
commit 98a01e779f3c66b0b11cd7e64d531c0e41c95762 upstream.
On architectures with sizeof(int) < sizeof (long), the
computation of mask inside apply\_slack() can be undefined if the
computed bit is > 32.
E.g. with: expires = 0xffffe6f5 and slack = 25, we get:
expires\_limit = 0x20000000e
bit = 33
mask = (1 << 33) - 1 /\* undefined \*/
On x86, mask becomes 1 and and the slack is not applied properly.
On s390, mask is -1, expires is set to 0 and the timer fires immediately.
Use 1UL << bit to solve that issue.
Suggested-by: Deborah Townsend
Signed-off-by: Jiri Bohac
Link: http://lkml.kernel.org/r/20140418152310.GA13654@midget.suse.cz
Signed-off-by: Thomas Gleixner
Signed-off-by: Greg Kroah-Hartman
commit 1782fdcfcabe123bce44acdf662d92f3bb059df5
Author: Stephen Warren
Date: Fri Apr 4 16:31:05 2014 -0600
gpu: host1x: handle the correct # of syncpt regs
commit 22bbd5d949dc7fdd72a4e78e767fa09d8e54b446 upstream.
BIT\_WORD() truncates rather than rounds, so the loops in
syncpt\_thresh\_isr() and \_host1x\_intr\_disable\_all\_syncpt\_intrs() use <=
rather than < in an attempt to process the correct number of registers
when rounding of the conversion of count of bits to count of words is
necessary. However, when rounding isn't necessary because the value is
already a multiple of the divisor (as is the case for all values of
nb\_pts the code actually sees), this causes one too many registers to
be processed.
Solve this by using and explicit DIV\_ROUND\_UP() call, rather than
BIT\_WORD(), and comparing with < rather than <=.
Fixes: 7ede0b0bf3e2 ("gpu: host1x: Add syncpoint wait and interrupts")
Signed-off-by: Stephen Warren
Acked-By: Terje Bergstrom
Signed-off-by: Thierry Reding
Signed-off-by: Greg Kroah-Hartman
commit f5c8ff84d9c249f28a26bb24f35ea946f754b791
Author: Emmanuel Grumbach
Date: Wed Apr 9 19:27:25 2014 +0300
iwlwifi: 7000: bump API to 9
commit 431031851ea72a25abb9ad4df56a0f3b997e3026 upstream.
This will allow to load the new firmware.
Signed-off-by: Emmanuel Grumbach
Signed-off-by: Greg Kroah-Hartman
commit 8d9d04e946c2b4b3742fb20c98610e3109bdb478
Author: Eyal Shapira
Date: Sun Apr 6 18:13:22 2014 +0300
iwlwifi: mvm: rs: reinit rs if no tx for a long time
commit 87d5e4155c0088e6766b4f0193b63fa0eab71220 upstream.
After being idle for a long time (>5sec) the rs statistics
will be stale so we prefer to reset rs and start from legacy
rates again. This gives better results when the attenuation
increased signficantly (e.g. we got further from the AP) and
after a while we start Tx
Note that the first Tx after the idle period will still go out
in the old modulation and rate but this seemed a simpler approach
compared to adding a timer or modifying mac80211 for this.
The negative impact is negligble as we'll recover quickly.
Signed-off-by: Eyal Shapira
Signed-off-by: Emmanuel Grumbach
Signed-off-by: Greg Kroah-Hartman
commit 0046274a882836ade933319d179a7e436cf5c971
Author: Eyal Shapira
Date: Sun Apr 6 02:42:18 2014 +0300
iwlwifi: mvm: rs: fix and cleanup rs\_get\_rate\_action
commit e53839eb9882c99d3781eab0fe1b2d4369a6a2cc upstream.
Change the down/upscale decision logic a bit to be based
on different success ratio thresholds. This fixes the implementation
compared to the rate scale algorithm which was planned to yield
optimal results. Also fix a case where a lower rate wasn't explored
despite being a potential for better throughput.
While at it rewrite rs\_get\_rate\_action to be more clear and clean.
Signed-off-by: Eyal Shapira
Signed-off-by: Emmanuel Grumbach
Signed-off-by: Greg Kroah-Hartman
commit bb6259d93e88d2ae7b177f2d999a51a2c4033eb9
Author: Eyal Shapira
Date: Sun Apr 6 05:27:36 2014 +0300
iwlwifi: mvm: avoid searching unnecessary columns
commit d8fff919ecd7820084675c2814913445e95640ac upstream.
Don't search columns which are unlikely to succeed as previous
columns searched with less aggressive modulation failed.
Signed-off-by: Eyal Shapira
Signed-off-by: Emmanuel Grumbach
Signed-off-by: Greg Kroah-Hartman
commit ee4fc7fe8684705b32414c276be038b432c3c2dc
Author: Eyal Shapira
Date: Sun Apr 6 04:39:23 2014 +0300
iwlwifi: mvm: rs: fallback to legacy Tx columns
commit fd7dbee51b3d98402edb11fec0c93d96476e0ae1 upstream.
Allow switching back to legacy Tx columns so we'll stop doing
HT/VHT in case we're far from the AP. Stop active aggregation when
making a deciding to stay in a legacy column.
Despite having low legacy rates in the LQ table lower entries
it doesn't help much in case we're doing aggregations as the
aggregation was being transmitted in the initial rate of the table.
This should help traffic stalls when far from the AP.
Signed-off-by: Eyal Shapira
Signed-off-by: Emmanuel Grumbach
Signed-off-by: Greg Kroah-Hartman
commit ce1c4e8c013a957983910fccaff8704f636e1cb0
Author: Oren Givon
Date: Wed Apr 2 14:04:20 2014 +0300
iwlwifi: add new 7265 HW IDs
commit 80f2679e589503bd6cbaaa1f9c1cd9dd7dfae032 upstream.
Add 2 new HW IDs for the 7265 series.
Signed-off-by: Oren Givon
Signed-off-by: Emmanuel Grumbach
Signed-off-by: Greg Kroah-Hartman
commit 3891094e863a9238c705186ca3b082c6ee920b57
Author: Eyal Shapira
Date: Tue Mar 25 10:25:44 2014 +0200
iwlwifi: mvm: rs: fix mimo delimiter in LQ cmd
commit d9088f60425e0acd8a8f05fdfcfdd288d3258641 upstream.
mimo\_delim was always set to 0 instead of pointing to
the first SISO entry after MIMO rates.
This can cause keep transmitting in MIMO even when we shouldn't.
For example when the peer is requesting static SMPS.
Signed-off-by: Eyal Shapira
Signed-off-by: Emmanuel Grumbach
Signed-off-by: Greg Kroah-Hartman
commit fcc4e85dd282735261636c17d0fac91d83c4fa57
Author: Emmanuel Grumbach
Date: Mon Mar 24 22:17:15 2014 +0200
iwlwifi: add MODULE\_FIRMWARE for 7265
commit 08a732f4e4a842f0101e5ea03d79e9d613ffadbe upstream.
It was missing.
Signed-off-by: Emmanuel Grumbach
Signed-off-by: Greg Kroah-Hartman
commit 6b8279034082d4b6a066041ab5889ff711227160
Author: Loic Poulain
Date: Thu Apr 24 11:38:56 2014 +0200
8250\_core: Fix unwanted TX chars write
commit b08c9c317e3f7764a91d522cd031639ba42b98cc upstream.
On transmit-hold-register empty, serial8250\_tx\_chars
should be called only if we don't use DMA.
DMA has its own tx cycle.
Signed-off-by: Loic Poulain
Reviewed-by: Heikki Krogerus
Signed-off-by: Greg Kroah-Hartman
commit 7d056f1066bd1d677273e3db285e00f0fd80674d
Author: Loic Poulain
Date: Thu Apr 24 11:34:48 2014 +0200
serial: 8250: Fix thread unsafe \_\_dma\_tx\_complete function
commit f8fd1b0350d3a4581125f5eda6528f5a2c5f9183 upstream.
\_\_dma\_tx\_complete is not protected against concurrent
call of serial8250\_tx\_dma. it can lead to circular tail
index corruption or parallel call of serial\_tx\_dma on the
same data portion.
This patch fixes this issue by holding the port lock.
Signed-off-by: Loic Poulain
Reviewed-by: Heikki Krogerus
Signed-off-by: Greg Kroah-Hartman
commit e83c667a1f451b1ae47a27d5e2ef0acb5f2c5b3d
Author: Linus Torvalds
Date: Tue Apr 22 13:49:40 2014 -0700
mm: make fixup\_user\_fault() check the vma access rights too
commit 1b17844b29ae042576bea588164f2f1e9590a8bc upstream.
fixup\_user\_fault() is used by the futex code when the direct user access
fails, and the futex code wants it to either map in the page in a usable
form or return an error. It relied on handle\_mm\_fault() to map the
page, and correctly checked the error return from that, but while that
does map the page, it doesn't actually guarantee that the page will be
mapped with sufficient permissions to be then accessed.
So do the appropriate tests of the vma access rights by hand.
[ Side note: arguably handle\_mm\_fault() could just do that itself, but
we have traditionally done it in the caller, because some callers -
notably get\_user\_pages() - have been able to access pages even when
they are mapped with PROT\_NONE. Maybe we should re-visit that design
decision, but in the meantime this is the minimal patch. ]
Found by Dave Jones running his trinity tool.
Reported-by: Dave Jones
Acked-by: Hugh Dickins
Signed-off-by: Linus Torvalds
Signed-off-by: Greg Kroah-Hartman
commit ef4c3729e2561dd90c2faaa05309f3419d271a99
Author: Vincent Stehlé
Date: Fri Apr 4 08:43:18 2014 +0200
topology: Fix compilation warning when not in SMP
commit 53974e06603977f348ed978d75c426b0532daa67 upstream.
The topology\_##name() macro does not use its argument when CONFIG\_SMP is not
set, as it ultimately calls the cpu\_data() macro.
So we avoid maintaining a possibly unused `cpu' variable, to avoid the
following compilation warning:
drivers/base/topology.c: In function ‘show\_physical\_package\_id’:
drivers/base/topology.c:103:118: warning: unused variable ‘cpu’ [-Wunused-variable]
define\_id\_show\_func(physical\_package\_id);
drivers/base/topology.c: In function ‘show\_core\_id’:
drivers/base/topology.c:106:106: warning: unused variable ‘cpu’ [-Wunused-variable]
define\_id\_show\_func(core\_id);
This can be seen with e.g. x86 defconfig and CONFIG\_SMP not set.
Signed-off-by: Vincent Stehlé
Signed-off-by: Greg Kroah-Hartman
commit e616309ecae3499d452bcd1e83801063ccefccc8
Author: Eric Dumazet
Date: Sat Apr 19 10:15:07 2014 -0700
coredump: fix va\_list corruption
commit 404ca80eb5c2727d78cd517d12108b040c522e12 upstream.
A va\_list needs to be copied in case it needs to be used twice.
Thanks to Hugh for debugging this issue, leading to various panics.
Tested:
lpq84:~# echo "|/foobar12345 %h %h %h %h %h %h %h %h %h %h %h %h %h %h %h %h %h %h %h %h" >/proc/sys/kernel/core\_pattern
'produce\_core' is simply : main() { \*(int \*)0 = 1;}
lpq84:~# ./produce\_core
Segmentation fault (core dumped)
lpq84:~# dmesg | tail -1
[ 614.352947] Core dump to |/foobar12345 lpq84 lpq84 lpq84 lpq84 lpq84 lpq84 lpq84 lpq84 lpq84 lpq84 lpq84 lpq84 lpq84 lpq84 lpq84 lpq84 lpq84 lpq84 lpq84 (null) pipe failed
Notice the last argument was replaced by a NULL (we were lucky enough to
not crash, but do not try this on your production machine !)
After fix :
lpq83:~# echo "|/foobar12345 %h %h %h %h %h %h %h %h %h %h %h %h %h %h %h %h %h %h %h %h" >/proc/sys/kernel/core\_pattern
lpq83:~# ./produce\_core
Segmentation fault
lpq83:~# dmesg | tail -1
[ 740.800441] Core dump to |/foobar12345 lpq83 lpq83 lpq83 lpq83 lpq83 lpq83 lpq83 lpq83 lpq83 lpq83 lpq83 lpq83 lpq83 lpq83 lpq83 lpq83 lpq83 lpq83 lpq83 lpq83 pipe failed
Fixes: 5fe9d8ca21cc ("coredump: cn\_vprintf() has no reason to call vsnprintf() twice")
Signed-off-by: Eric Dumazet
Diagnosed-by: Hugh Dickins
Acked-by: Oleg Nesterov
Cc: Neil Horman
Cc: Andrew Morton
Signed-off-by: Linus Torvalds
Signed-off-by: Greg Kroah-Hartman
commit 73f13bc7127d93951d776821589c5108fc285842
Author: Bartlomiej Zolnierkiewicz
Date: Mon Mar 31 19:51:14 2014 +0200
pata\_at91: fix ata\_host\_activate() failure handling
commit 27aa64b9d1bd0d23fd692c91763a48309b694311 upstream.
Add missing clk\_put() call to ata\_host\_activate() failure path.
Sergei says,
"Hm, I have once fixed that (see that \*if\* (!ret)) but looks like a
later commit 477c87e90853d136b188c50c0e4a93d01cad872e (ARM:
at91/pata: use gpio\_is\_valid to check the gpio) broke it again. :-(
Would be good if the changelog did mention that..."
Cc: Andrew Victor
Cc: Nicolas Ferre
Cc: Jean-Christophe Plagniol-Villard
Cc: Sergei Shtylyov
Signed-off-by: Bartlomiej Zolnierkiewicz
Signed-off-by: Tejun Heo
Signed-off-by: Greg Kroah-Hartman
commit 59516f324f324b6b392b94833da3972e346c5f0c
Author: Tejun Heo
Date: Sun Apr 20 08:29:21 2014 -0400
kernfs: add back missing error check in kernfs\_fop\_mmap()
commit b44b2140265ddfde03acbe809336111d31adb0d1 upstream.
While updating how mmap enabled kernfs files are handled by lockdep,
9b2db6e18945 ("sysfs: bail early from kernfs\_file\_mmap() to avoid
spurious lockdep warning") inadvertently dropped error return check
from kernfs\_file\_mmap(). The intention was just dropping "if
(ops->mmap)" check as the control won't reach the point if the mmap
callback isn't implemented, but I mistakenly removed the error return
check together with it.
This led to Xorg crash on i810 which was reported and bisected to the
commit and then to the specific change by Tobias.
Signed-off-by: Tejun Heo
Reported-and-bisected-by: Tobias Powalowski
Tested-by: Tobias Powalowski
References: http://lkml.kernel.org/g/533D01BD.1010200@googlemail.com
Signed-off-by: Greg Kroah-Hartman
commit ce5e2b32090d5564d4393b36b5be3b226f4ded4e
Author: Krzysztof Kozlowski
Date: Wed Apr 16 14:36:45 2014 +0000
clocksource: Exynos\_mct: Register clock event after request\_irq()
commit 8db6e5104b77de5d0b7002b95069da0992a34be9 upstream.
After hotplugging CPU1 the first call of interrupt handler for CPU1
oneshot timer was called on CPU0 because it fired before setting IRQ
affinity. Affected are SoCs where Multi Core Timer interrupts are
shared (SPI), e.g. Exynos 4210.
During setup of the MCT timers the clock event device should be
registered after setting the affinity for interrupt. This will prevent
starting the timer too early.
Signed-off-by: Krzysztof Kozlowski
Signed-off-by: Thomas Gleixner
Cc: Kyungmin Park
Cc: Marek Szyprowski
Cc: Bartlomiej Zolnierkiewicz
Cc: Tomasz Figa ,
Cc: Daniel Lezcano ,
Cc: Kukjin Kim
Cc: linux-arm-kernel@lists.infradead.org,
Link: http://lkml.kernel.org/r/20140416143316.299247848@linutronix.de
Signed-off-by: Thomas Gleixner
Signed-off-by: Greg Kroah-Hartman
commit 35c726c15087376c8c50b726df5b60b786e07741
Author: Thomas Gleixner
Date: Wed Apr 16 14:36:45 2014 +0000
clocksource: Exynos\_mct: Use irq\_force\_affinity() in cpu bringup
commit 30ccf03b4a6a2102a2219058bdc6d779dc637dd7 upstream.
The starting cpu is not yet in the online mask so irq\_set\_affinity()
fails which results in per cpu timers for this cpu ending up on some
other online cpu, ususally cpu 0.
Use irq\_force\_affinity() which disables the online mask check and
makes things work.
Signed-off-by: Thomas Gleixner
Tested-by: Krzysztof Kozlowski
Cc: Kyungmin Park
Cc: Marek Szyprowski
Cc: Bartlomiej Zolnierkiewicz
Cc: Tomasz Figa ,
Cc: Daniel Lezcano ,
Cc: Kukjin Kim
Cc: linux-arm-kernel@lists.infradead.org,
Link: http://lkml.kernel.org/r/20140416143316.106665251@linutronix.de
Signed-off-by: Thomas Gleixner
Signed-off-by: Greg Kroah-Hartman
commit 8f141082814e9f03bda4233849ae42af7504fad0
Author: Thomas Gleixner
Date: Wed Apr 16 14:36:44 2014 +0000
genirq: Allow forcing cpu affinity of interrupts
commit 01f8fa4f01d8362358eb90e412bd7ae18a3ec1ad upstream.
The current implementation of irq\_set\_affinity() refuses rightfully to
route an interrupt to an offline cpu.
But there is a special case, where this is actually desired. Some of
the ARM SoCs have per cpu timers which require setting the affinity
during cpu startup where the cpu is not yet in the online mask.
If we can't do that, then the local timer interrupt for the about to
become online cpu is routed to some random online cpu.
The developers of the affected machines tried to work around that
issue, but that results in a massive mess in that timer code.
We have a yet unused argument in the set\_affinity callbacks of the irq
chips, which I added back then for a similar reason. It was never
required so it got not used. But I'm happy that I never removed it.
That allows us to implement a sane handling of the above scenario. So
the affected SoC drivers can add the required force handling to their
interrupt chip, switch the timer code to irq\_force\_affinity() and
things just work.
This does not affect any existing user of irq\_set\_affinity().
Tagged for stable to allow a simple fix of the affected SoC clock
event drivers.
Reported-and-tested-by: Krzysztof Kozlowski
Signed-off-by: Thomas Gleixner
Cc: Kyungmin Park
Cc: Marek Szyprowski
Cc: Bartlomiej Zolnierkiewicz
Cc: Tomasz Figa ,
Cc: Daniel Lezcano ,
Cc: Kukjin Kim
Cc: linux-arm-kernel@lists.infradead.org,
Link: http://lkml.kernel.org/r/20140416143315.717251504@linutronix.de
Signed-off-by: Thomas Gleixner
Signed-off-by: Greg Kroah-Hartman
commit ddd07396fcb9ac740aa21794221ef6f9e3cdc31f
Author: Thomas Gleixner
Date: Wed Apr 16 14:36:44 2014 +0000
irqchip: Gic: Support forced affinity setting
commit ffde1de64012c406dfdda8690918248b472f24e4 upstream.
To support the affinity setting of per cpu timers in the early startup
of a not yet online cpu, implement the force logic, which disables the
cpu online check.
Tagged for stable to allow a simple fix of the affected SoC clock
event drivers.
Signed-off-by: Thomas Gleixner
Tested-by: Krzysztof Kozlowski
Cc: Kyungmin Park
Cc: Marek Szyprowski
Cc: Bartlomiej Zolnierkiewicz
Cc: Tomasz Figa ,
Cc: Daniel Lezcano ,
Cc: Kukjin Kim
Cc: linux-arm-kernel@lists.infradead.org,
Link: http://lkml.kernel.org/r/20140416143315.916984416@linutronix.de
Signed-off-by: Thomas Gleixner
Signed-off-by: Greg Kroah-Hartman
commit 274eb7bf1dce97dac496d7b9ded91f9de5719cf0
Author: Rob Herring
Date: Wed Apr 23 17:57:41 2014 -0500
of/irq: do irq resolution in platform\_get\_irq
commit 9ec36cafe43bf835f8f29273597a5b0cbc8267ef upstream.
Currently we get the following kind of errors if we try to use interrupt
phandles to irqchips that have not yet initialized:
irq: no irq domain found for /ocp/pinmux@48002030 !
------------[ cut here ]------------
WARNING: CPU: 0 PID: 1 at drivers/of/platform.c:171 of\_device\_alloc+0x144/0x184()
Modules linked in:
CPU: 0 PID: 1 Comm: swapper/0 Not tainted 3.12.0-00038-g42a9708 #1012
(show\_stack+0x14/0x1c)
(dump\_stack+0x6c/0xa0)
(warn\_slowpath\_common+0x64/0x84)
(warn\_slowpath\_null+0x1c/0x24)
(of\_device\_alloc+0x144/0x184)
(of\_platform\_device\_create\_pdata+0x44/0x9c)
(of\_platform\_bus\_create+0xd0/0x170)
(of\_platform\_bus\_create+0x12c/0x170)
(of\_platform\_populate+0x60/0x98)
This is because we're wrongly trying to populate resources that are not
yet available. It's perfectly valid to create irqchips dynamically, so
let's fix up the issue by resolving the interrupt resources when
platform\_get\_irq is called.
And then we also need to accept the fact that some irqdomains do not
exist that early on, and only get initialized later on. So we can
make the current WARN\_ON into just into a pr\_debug().
We still attempt to populate irq resources when we create the devices.
This allows current drivers which don't use platform\_get\_irq to continue
to function. Once all drivers are fixed, this code can be removed.
Suggested-by: Russell King
Signed-off-by: Rob Herring
Signed-off-by: Tony Lindgren
Tested-by: Tony Lindgren
Signed-off-by: Grant Likely
Signed-off-by: Greg Kroah-Hartman
commit d9550cf732c439447abe24655c23fcc27915ff7d
Author: Steven Rostedt (Red Hat)
Date: Thu Apr 24 10:40:12 2014 -0400
ftrace/module: Hardcode ftrace\_module\_init() call into load\_module()
commit a949ae560a511fe4e3adf48fa44fefded93e5c2b upstream.
A race exists between module loading and enabling of function tracer.
CPU 1 CPU 2
----- -----
load\_module()
module->state = MODULE\_STATE\_COMING
register\_ftrace\_function()
mutex\_lock(&ftrace\_lock);
ftrace\_startup()
update\_ftrace\_function();
ftrace\_arch\_code\_modify\_prepare()
set\_all\_module\_text\_rw();
ftrace\_arch\_code\_modify\_post\_process()
set\_all\_module\_text\_ro();
[ here all module text is set to RO,
including the module that is
loading!! ]
blocking\_notifier\_call\_chain(MODULE\_STATE\_COMING);
ftrace\_init\_module()
[ tries to modify code, but it's RO, and fails!
ftrace\_bug() is called]
When this race happens, ftrace\_bug() will produces a nasty warning and
all of the function tracing features will be disabled until reboot.
The simple solution is to treate module load the same way the core
kernel is treated at boot. To hardcode the ftrace function modification
of converting calls to mcount into nops. This is done in init/main.c
there's no reason it could not be done in load\_module(). This gives
a better control of the changes and doesn't tie the state of the
module to its notifiers as much. Ftrace is special, it needs to be
treated as such.
The reason this would work, is that the ftrace\_module\_init() would be
called while the module is in MODULE\_STATE\_UNFORMED, which is ignored
by the set\_all\_module\_text\_ro() call.
Link: http://lkml.kernel.org/r/1395637826-3312-1-git-send-email-indou.takao@jp.fujitsu.com
Reported-by: Takao Indoh
Acked-by: Rusty Russell
Signed-off-by: Steven Rostedt
Signed-off-by: Greg Kroah-Hartman
commit bb4d8694e07076c8f905d475adb5b68feef06649
Author: Thomas Gleixner
Date: Thu May 22 03:25:39 2014 +0000
rtmutex: Fix deadlock detector for real
commit 397335f004f41e5fcf7a795e94eb3ab83411a17c upstream.
The current deadlock detection logic does not work reliably due to the
following early exit path:
/\*
\* Drop out, when the task has no waiters. Note,
\* top\_waiter can be NULL, when we are in the deboosting
\* mode!
\*/
if (top\_waiter && (!task\_has\_pi\_waiters(task) ||
top\_waiter != task\_top\_pi\_waiter(task)))
goto out\_unlock\_pi;
So this not only exits when the task has no waiters, it also exits
unconditionally when the current waiter is not the top priority waiter
of the task.
So in a nested locking scenario, it might abort the lock chain walk
and therefor miss a potential deadlock.
Simple fix: Continue the chain walk, when deadlock detection is
enabled.
We also avoid the whole enqueue, if we detect the deadlock right away
(A-A). It's an optimization, but also prevents that another waiter who
comes in after the detection and before the task has undone the damage
observes the situation and detects the deadlock and returns
-EDEADLOCK, which is wrong as the other task is not in a deadlock
situation.
Signed-off-by: Thomas Gleixner
Cc: Peter Zijlstra
Reviewed-by: Steven Rostedt
Cc: Lai Jiangshan
Link: http://lkml.kernel.org/r/20140522031949.725272460@linutronix.de
Signed-off-by: Thomas Gleixner
Signed-off-by: Greg Kroah-Hartman
commit d2790a6a61111f956dc9cea2c1450508b583e38f
Author: Leif Lindholm
Date: Thu Apr 17 18:42:00 2014 +0100
mips: dts: Fix missing device\_type="memory" property in memory nodes
commit dfc44f8030653b345fc6fb337558c3a07536823f upstream.
A few platforms lack a 'device\_type = "memory"' for their memory
nodes, relying on an old ppc quirk in order to discover its memory.
Add the missing data so that all parsing code can find memory nodes
correctly.
Signed-off-by: Leif Lindholm
Cc: linux-mips@linux-mips.org
Cc: devicetree@vger.kernel.org
Cc: Mark Rutland
Acked-by: John Crispin
Signed-off-by: Grant Likely
Signed-off-by: Greg Kroah-Hartman
commit 4236d29b5fc3e32a6c00ddf7ccf53ce5786730a8
Author: Aaro Koskinen
Date: Thu Apr 3 22:24:01 2014 +0300
MIPS/loongson2\_cpufreq: Fix CPU clock rate setting
commit 8e8acb32960f42c81b1d50deac56a2c07bb6a18a upstream.
Loongson2 has been using (incorrectly) kHz for cpu\_clk rate. This has
been unnoticed, as loongson2\_cpufreq was the only place where the rate
was set/get. After commit 652ed95d5fa6074b3c4ea245deb0691f1acb6656
(cpufreq: introduce cpufreq\_generic\_get() routine) things however broke,
and now loops\_per\_jiffy adjustments are incorrect (1000 times too long).
The patch fixes this by changing cpu\_clk rate to Hz.
Signed-off-by: Aaro Koskinen
Cc: Rafael J. Wysocki
Cc: Viresh Kumar
Cc: linux-mips@linux-mips.org
Cc: linux-kernel@vger.kernel.org
Cc: cpufreq@vger.kernel.org
Cc: Aaro Koskinen
Patchwork: https://patchwork.linux-mips.org/patch/6678/
Signed-off-by: Ralf Baechle
Signed-off-by: Greg Kroah-Hartman
commit 7c3b5654c06c68470c446f96c6ba9b939c67771e
Author: Thomas Gleixner
Date: Mon May 12 20:45:35 2014 +0000
futex: Prevent attaching to kernel threads
commit f0d71b3dcb8332f7971b5f2363632573e6d9486a upstream.
We happily allow userspace to declare a random kernel thread to be the
owner of a user space PI futex.
Found while analysing the fallout of Dave Jones syscall fuzzer.
We also should validate the thread group for private futexes and find
some fast way to validate whether the "alleged" owner has RW access on
the file which backs the SHM, but that's a separate issue.
Signed-off-by: Thomas Gleixner
Cc: Dave Jones
Cc: Linus Torvalds
Cc: Peter Zijlstra
Cc: Darren Hart
Cc: Davidlohr Bueso
Cc: Steven Rostedt
Cc: Clark Williams
Cc: Paul McKenney
Cc: Lai Jiangshan
Cc: Roland McGrath
Cc: Carlos ODonell
Cc: Jakub Jelinek
Cc: Michael Kerrisk
Cc: Sebastian Andrzej Siewior
Link: http://lkml.kernel.org/r/20140512201701.194824402@linutronix.de
Signed-off-by: Thomas Gleixner
Signed-off-by: Greg Kroah-Hartman
commit efcd089d4786faba8753d625419fff13b84cd0be
Author: Thomas Gleixner
Date: Mon May 12 20:45:34 2014 +0000
futex: Add another early deadlock detection check
commit 866293ee54227584ffcb4a42f69c1f365974ba7f upstream.
Dave Jones trinity syscall fuzzer exposed an issue in the deadlock
detection code of rtmutex:
http://lkml.kernel.org/r/20140429151655.GA14277@redhat.com
That underlying issue has been fixed with a patch to the rtmutex code,
but the futex code must not call into rtmutex in that case because
- it can detect that issue early
- it avoids a different and more complex fixup for backing out
If the user space variable got manipulated to 0x80000000 which means
no lock holder, but the waiters bit set and an active pi\_state in the
kernel is found we can figure out the recursive locking issue by
looking at the pi\_state owner. If that is the current task, then we
can safely return -EDEADLK.
The check should have been added in commit 59fa62451 (futex: Handle
futex\_pi OWNER\_DIED take over correctly) already, but I did not see
the above issue caused by user space manipulation back then.
Signed-off-by: Thomas Gleixner
Cc: Dave Jones
Cc: Linus Torvalds
Cc: Peter Zijlstra
Cc: Darren Hart
Cc: Davidlohr Bueso
Cc: Steven Rostedt
Cc: Clark Williams
Cc: Paul McKenney
Cc: Lai Jiangshan
Cc: Roland McGrath
Cc: Carlos ODonell
Cc: Jakub Jelinek
Cc: Michael Kerrisk
Cc: Sebastian Andrzej Siewior
Link: http://lkml.kernel.org/r/20140512201701.097349971@linutronix.de
Signed-off-by: Thomas Gleixner
Signed-off-by: Greg Kroah-Hartman


=== Content from access.redhat.com_97b2cd3e_20250126_024554.html ===


[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

**We're sorry but cve-details doesn't work properly without JavaScript enabled. Please enable it to continue.**

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from www.ubuntu.com_281ee803_20250124_182044.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# USN-2261-1: Linux kernel (Saucy HWE) vulnerabilities

27 June 2014

Several security issues were fixed in the kernel.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Releases

* [Ubuntu 12.04](/security/notices?release=precise)

## Packages

* [linux-lts-saucy](/security/cves?package=linux-lts-saucy) - Linux hardware enablement kernel from Saucy

## Details

Salva Peiró discovered an information leak in the Linux kernel's media-

device driver. A local attacker could exploit this flaw to obtain sensitive

information from kernel memory. ([CVE-2014-1739](/security/CVE-2014-1739))

A bounds check error was discovered in the socket filter subsystem of the

Linux kernel. A local user could exploit this flaw to cause a denial of

service (system crash) via crafted BPF instructions. ([CVE-2014-3144](/security/CVE-2014-3144))

A remainder calculation error was discovered in the socket filter subsystem

of the Linux kernel. A local user could exploit this flaw to cause a denial

of service (system crash) via crafted BPF instructions. ([CVE-2014-3145](/security/CVE-2014-3145))

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Update instructions

The problem can be corrected by updating your system to the following package versions:

##### Ubuntu 12.04

* [linux-image-3.11.0-24-generic-lpae](https://launchpad.net/ubuntu/%2Bsource/linux-lts-saucy)
  -
  [3.11.0-24.41~precise1](https://launchpad.net/ubuntu/%2Bsource/linux-lts-saucy/3.11.0-24.41~precise1)
* [linux-image-3.11.0-24-generic](https://launchpad.net/ubuntu/%2Bsource/linux-lts-saucy)
  -
  [3.11.0-24.41~precise1](https://launchpad.net/ubuntu/%2Bsource/linux-lts-saucy/3.11.0-24.41~precise1)

After a standard system update you need to reboot your computer to make

all the necessary changes.

ATTENTION: Due to an unavoidable ABI change the kernel updates have

been given a new version number, which requires you to recompile and

reinstall all third party kernel modules you might have installed. If

you use linux-restricted-modules, you have to update that package as

well to get modules which work with the new kernel version. Unless you

manually uninstalled the standard kernel metapackages (e.g. linux-generic,

linux-server, linux-powerpc), a standard system upgrade will automatically

perform this as well.

## References

* [CVE-2014-1739](/security/CVE-2014-1739)
* [CVE-2014-3144](/security/CVE-2014-3144)
* [CVE-2014-3145](/security/CVE-2014-3145)

## Related notices

* [USN-2285-1](/security/notices/USN-2285-1)
* [USN-2286-1](/security/notices/USN-2286-1)
* [USN-2259-1](/security/notices/USN-2259-1)
* [USN-2264-1](/security/notices/USN-2264-1)
* [USN-2263-1](/security/notices/USN-2263-1)
* [USN-2288-1](/security/notices/USN-2288-1)
* [USN-2290-1](/security/notices/USN-2290-1)
* [USN-2252-1](/security/notices/USN-2252-1)
* [USN-2251-1](/security/notices/USN-2251-1)
* [USN-2262-1](/security/notices/USN-2262-1)

### Join the discussion

* [Ubuntu security updates mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened)
* [Security announcements mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-security-announce)

### Need help with your security needs?

Ubuntu Pro provides up to ten-year security coverage for over 23,000 open-source packages within the Ubuntu Main and Universe repositories.

[Talk to an expert to find out what would work best for you](/contact-us/form?product=pro)

### Further reading

* *Loading...*

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page



=== Content from www.ubuntu.com_2cdf617e_20250124_182045.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# USN-2264-1: Linux kernel vulnerabilities

27 June 2014

Several security issues were fixed in the kernel.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Releases

* [Ubuntu 13.10](/security/notices?release=saucy)

## Packages

* [linux](/security/cves?package=linux) - Linux kernel

## Details

Salva Peiró discovered an information leak in the Linux kernel's media-

device driver. A local attacker could exploit this flaw to obtain sensitive

information from kernel memory. ([CVE-2014-1739](/security/CVE-2014-1739))

A bounds check error was discovered in the socket filter subsystem of the

Linux kernel. A local user could exploit this flaw to cause a denial of

service (system crash) via crafted BPF instructions. ([CVE-2014-3144](/security/CVE-2014-3144))

A remainder calculation error was discovered in the socket filter subsystem

of the Linux kernel. A local user could exploit this flaw to cause a denial

of service (system crash) via crafted BPF instructions. ([CVE-2014-3145](/security/CVE-2014-3145))

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Update instructions

The problem can be corrected by updating your system to the following package versions:

##### Ubuntu 13.10

* [linux-image-3.11.0-24-generic-lpae](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [3.11.0-24.41](https://launchpad.net/ubuntu/%2Bsource/linux/3.11.0-24.41)
* [linux-image-3.11.0-24-generic](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [3.11.0-24.41](https://launchpad.net/ubuntu/%2Bsource/linux/3.11.0-24.41)

After a standard system update you need to reboot your computer to make

all the necessary changes.

ATTENTION: Due to an unavoidable ABI change the kernel updates have

been given a new version number, which requires you to recompile and

reinstall all third party kernel modules you might have installed. If

you use linux-restricted-modules, you have to update that package as

well to get modules which work with the new kernel version. Unless you

manually uninstalled the standard kernel metapackages (e.g. linux-generic,

linux-server, linux-powerpc), a standard system upgrade will automatically

perform this as well.

## References

* [CVE-2014-1739](/security/CVE-2014-1739)
* [CVE-2014-3144](/security/CVE-2014-3144)
* [CVE-2014-3145](/security/CVE-2014-3145)

## Related notices

* [USN-2261-1](/security/notices/USN-2261-1)
* [USN-2285-1](/security/notices/USN-2285-1)
* [USN-2286-1](/security/notices/USN-2286-1)
* [USN-2259-1](/security/notices/USN-2259-1)
* [USN-2263-1](/security/notices/USN-2263-1)
* [USN-2288-1](/security/notices/USN-2288-1)
* [USN-2290-1](/security/notices/USN-2290-1)
* [USN-2252-1](/security/notices/USN-2252-1)
* [USN-2251-1](/security/notices/USN-2251-1)
* [USN-2262-1](/security/notices/USN-2262-1)

### Join the discussion

* [Ubuntu security updates mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened)
* [Security announcements mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-security-announce)

### Need help with your security needs?

Ubuntu Pro provides up to ten-year security coverage for over 23,000 open-source packages within the Ubuntu Main and Universe repositories.

[Talk to an expert to find out what would work best for you](/contact-us/form?product=pro)

### Further reading

* *Loading...*

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page



=== Content from speirofr.appspot.com_6b34095d_20250124_182027.html ===


* [**Salva PeirÃ³**](https://speirofr.appspot.com "Salva PeirÃ³ Software Engineer")
* [Profile](/#salva-peiro)
* [Education](/#education)
* [Publications](/#publications)
* [Projects](/#projects-with-active-participation-most-relevant)
* [Archives](/archives.html)

# [CVE-2014-1739: Kernel Infoleak vulnerability in media\_enum\_entities()](cve-2014-1739-kernel-infoleak-vulnerability-in-media_enum_entities.html "Permalink to CVE-2014-1739: Kernel Infoleak vulnerability in media_enum_entities()")

by [speiro](https://speirofr.appspot.com/author/speiro/index.html) -

Apr 28, 2014

-
[CVE-2014-1739](https://speirofr.appspot.com/tag/cve-2014-1739/index.html), [security](https://speirofr.appspot.com/tag/security/index.html), [kernel](https://speirofr.appspot.com/tag/kernel/index.html), [infoleak](https://speirofr.appspot.com/tag/infoleak/index.html),

# Summary

| **CVE** | [CVE-2014-1739](http://web.nvd.nist.gov/view/vuln/search-results?query=CVE-2014-1739) |
| --- | --- |
| **Author** | [Salva PeirÃ³](http://speirofr.appspot.com) |
| **Date** | April 2014 - Discovery of the vulnerability. |
| **Impact** | The vulnerability discloses 200 bytes of kernel process stack. |
| **Affected Versions** | From linux-2.6.38 to linux-3.15-rc3 |
| **Bug Timespan** | 3 years: 2011-03-23 to 2014-04-29 commit [1651333b](https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/commit/drivers/media/media-device.c?id=1651333b09743887bc2dd3d158a11853a2be3fe7) |

# Description

During a code review of the kernel sources we found an infoleak vulnerability in the
ioctl `media_enum_entities()` that allows to disclose 200 bytes the kernel process' stack.
The vulnerability is exploitable on versions up to `linux-3.15-rc3` by local
users with read access to `/dev/media0`.
Linux distributions ship with `chmod 600 /dev/media0` preventing unprivileged
local users from exploiting the vulnerability. However, some Android devices
are known to be shipped with both read and/or
write permissions for all: [chmod 666 /dev/media0](https://encrypted.google.com/search?q=chmod+666+/dev/media0).

# Impact

The vulnerability was introduced in `linux-2.6.38` and has been fixed in
`linux-3.15-rc3`, therefore, all kernel versions in between are affected.
The kernel subsystem affected is the `media device`
that provides the enumeration of media devices such as: `V4L`, `ALSA`, `DBV`, and `FB`.

# Vulnerability

The vulnerability leaks the contents of the kernel process stack through the
`reserved` and `raw` fields of the `struct media_entity_desc uent;`.
The cause of the infoleak is the missing initialisation of the `struct media_device_entity; uent`
before being copied to userland.
This causes 200 bytes of kernel process' stack to be disclosed to userland.

# Proof of Concept code

The PoC code [media-enum-poc.c](http://speirofr.appspot.com/files/media-enum-poc.c)
triggers the vulnerability by issuing the `ioctl(fd, MEDIA_IOC_ENUM_ENTITIES)` request and checking the data returned.

```

box $ ./media-enum-poc /dev/media0
[*] CVE-2014-1739: Infoleak PoC in media_device_enum_entities() leaking 200 kstack bytes:
    00000000: 0x00001000 0xc104d114 0x00010000 0xf6744514
    00000004: 0x00000051 0x00000000 0x00000000 0xc1420b91
    00000008: 0xf2e31dc8 0xc12fe9be 0xf86ddab0 0xf6744514
    00000012: 0xf29cc140 0xf2e31dc8 0x00000000 0xc115086d
    00000016: 0x00000000 0xf29cc140 0xf6744514 0xf29cc148
    00000020: 0x00000000 0xc114a77a 0xc11f2581 0x00000002
    00000024: 0xf6744514 0xf3ea7690 0xf29cc440 0x000000cf
    00000028: 0xf3ea7760 0xc10fcb11 0xc116680d 0x00000000
    00000032: 0xf5929d50 0xf3ea7690 0xf29cc440 0xf3ea775c
    00000036: 0xf6f92960 0xc10fe4bb 0x00000081 0x00ffffff
    00000040: 0x00000000 0x000000a8 0x000000cf 0xe8defeb8
    00000044: 0xf5929d40 0xc104d2d4 0x0000003c 0xfffff000
    00000048: 0x00000001 0xc104d114

```
# The Vulnerability Fix

After verification the patch that `memsets(0)` the whole `struct media_device_entity uent;` has been submitted to the kernel:
[[PATCH] drivers/media: Fix infoleak in ioctl media\_enum\_entities()](https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/commit/?id=e6a623460e5fc960ac3ee9f946d3106233fd28d8)

```

diff --git a/drivers/media/media-device.c b/drivers/media/media-device.c
index d5a7a13..703560f 100644
--- a/drivers/media/media-device.c
+++ b/drivers/media/media-device.c
@@ -93,6 +93,7 @@ static long media_device_enum_entities(struct media_device *mdev,
    struct media_entity *ent;
    struct media_entity_desc u_ent;

+   memset(&u_ent, 0, sizeof(u_ent));
    if (copy_from_user(&u_ent.id, &uent->id, sizeof(u_ent.id)))
        return -EFAULT;

```

File: [0001-drivers-media-Fix-infoleak-in-ioctl-media\_enum\_entit.patch](/files/0001-drivers-media-Fix-infoleak-in-ioctl-media_enum_entit.patch)

# Update

After looking at the code fixing the infoleak one notices that
that when a `ent->name` is provided `u_ent.name` is memset(0) twice;
first at the global memset() of the `u_ent` and afterwards at `u_ent.name`.
The next patch addresses this issue by removing the `memset(u_ent.name, 0, ...)`.

```

diff --git a/drivers/media/media-device.c b/drivers/media/media-device.c
index 703560f..3729d63 100644
--- a/drivers/media/media-device.c
+++ b/drivers/media/media-device.c
@@ -105,9 +105,6 @@ static long media_device_enum_entities(struct media_device *mdev,
    u_ent.id = ent->id;
    if (ent->name) {
        strncpy(u_ent.name, ent->name, sizeof(u_ent.name));
        u_ent.name[sizeof(u_ent.name) - 1] = '\0';
-   } else {
-       memset(u_ent.name, 0, sizeof(u_ent.name));
    }
    u_ent.type = ent->type;
    u_ent.revision = ent->revision;

```

File: [0001-media-device-Remove-duplicated-memset-in-media\_enum\_.patch](/files/0001-media-device-Remove-duplicated-memset-in-media_enum_.patch)

## Categories

* [CVEs](https://speirofr.appspot.com/category/cves/index.html)
* [Infoleaks](https://speirofr.appspot.com/category/infoleaks/index.html)
* [Learning](https://speirofr.appspot.com/category/learning/index.html)
* [Techniques](https://speirofr.appspot.com/category/techniques/index.html)

## Activity

* [SPADV-2018-01](/files/advisory/SPADV-2018-01.md)
* [CVE-2016-3178](/files/advisory/SPADV-2016-02.md)
* [CVE-2015-7885](/tag/cve-2015-7885/)
* [CVE-2015-7884](/tag/cve-2015-7884/)
* [CVE-2014-1739](/tag/cve-2014-1739/)
* [CVE-2014-1446](/tag/cve-2014-1446/)
* [CVE-2014-1445](/tag/cve-2014-1445/)

## Contact

* [Linkedin](https://www.linkedin.com/in/speiro)
* [ResearchGate](https://www.researchgate.net/profile/Salva_Peiro)
* [Atom feed](https://speirofr.appspot.com/feeds/atom.xml)



=== Content from bugzilla.redhat.com_f70dadbb_20250124_182047.html ===


* Login
  + Log in using an SSO provider:- [Fedora Account System](saml2_login.cgi?idp=Fedora%20Account%20System&target=show_bug.cgi%3Fid%3D1109774)
    - [Red Hat Associate](saml2_login.cgi?idp=Red%20Hat%20Associate&target=show_bug.cgi%3Fid%3D1109774)
    - [Red Hat Customer](saml2_login.cgi?idp=Red%20Hat%20Customer&target=show_bug.cgi%3Fid%3D1109774)+ Login using a Red Hat Bugzilla account
  + Forgot Password
  + [Create an Account](createaccount.cgi)

Red Hat Bugzilla – Bug 1109774

* [Home](./)
* [New](enter_bug.cgi)
* Search
  + [Simple Search](query.cgi?format=specific)
  + [Advanced Search](query.cgi?format=advanced)
* My Links
  + [Browse](describecomponents.cgi)
  + [Requests](request.cgi)
  + Reports
  + Current State
    - [Search](query.cgi)
    - [Tabular reports](query.cgi?format=report-table)
    - [Graphical reports](query.cgi?format=report-graph)
    - [Duplicates](duplicates.cgi)
  + Other Reports
    - [User Changes](https://bugzilla.redhat.com/page.cgi?id=user_activity.html)
  + Plotly Reports
    - [Bug Status](https://bugzilla.redhat.com/page.cgi?id=bug_status.html)
    - [Bug Severity](https://bugzilla.redhat.com/page.cgi?id=bug_severity.html)
    - [Non-Defaults](https://bugzilla.redhat.com/page.cgi?id=non_defaults.html)
* [Product Dashboard](page.cgi?id=productdashboard.html)

- Help
  * [Page Help!](docs/en/html/using/understanding.html)
  * [Bug Writing Guidelines](page.cgi?id=bug-writing.html)
  * [What's new](page.cgi?id=whats-new.html)
  * [Browser Support Policy](https://access.redhat.com/help/browsers)
  * [5.0.4.rh103 Release notes](page.cgi?id=release-notes.html)
  * [FAQ](page.cgi?id=faq.html)
  * [Guides index](docs/en/html/index.html)
  * [User guide](docs/en/html/using/index.html)
  * [Web Services](docs/en/html/integrating/api/Bugzilla/WebService/Bug.html)
  * [Contact](page.cgi?id=redhat/contact.html)
  * [Legal](page.cgi?id=terms-conditions.html)
- [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")

This site requires JavaScript to be enabled to function correctly, please enable it.

[**Bug 1109774**](show_bug.cgi?id=1109774)
(CVE-2014-1739)
- [CVE-2014-1739](https://access.redhat.com/security/cve/CVE-2014-1739) Kernel: drivers: media: an information leakage

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
CVE-2014-1739 Kernel: drivers: media: an information leakage

| | [Keywords](describekeywords.cgi): | Security | | --- | --- | | [Status](page.cgi?id=fields.html#bug_status): | CLOSED ERRATA | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | CVE-2014-1739 | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components. Select a Classification to narrow down this list.") | Security Response | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Other | | [Component:](describecomponents.cgi?product=Security Response "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | vulnerability | | [Sub Component:](page.cgi?id=fields.html#rh_sub_components "The sub component of a specific component") | --- | | [Version:](page.cgi?id=fields.html#version "The version field defines the version of the software the bug was found in.") | unspecified | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | All | | [OS:](page.cgi?id=fields.html#op_sys "The operating system the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Linux | | [Priority:](page.cgi?id=fields.html#priority) | low | | [Severity:](page.cgi?id=fields.html#bug_severity) | low | | [Target Milestone:](page.cgi?id=fields.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | --- | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Red Hat Product Security | | [QA Contact:](page.cgi?id=fields.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") |  | | [Docs Contact:](page.cgi?id=fields.html#docs_contact "The person responsible for documenting once the bug has been resolved.") |  | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | [Depends On:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") | [1109776](show_bug.cgi?id=1109776) [1109777](show_bug.cgi?id=1109777) [1109778](show_bug.cgi?id=1109778 "CLOSED CURRENTRELEASE - CVE-2014-1739 Kernel: drivers: media: an information leakage [fedora-all]") | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") | [1109686](show_bug.cgi?id=1109686) | | TreeView+ | [depends on](buglist.cgi?bug_id=1109774&bug_id_type=anddependson&format=tvp) / [blocked](buglist.cgi?bug_id=1109774&bug_id_type=andblocked&format=tvp&tvp_dir=blocked) |  | |  | | [Reported:](page.cgi?id=fields.html#reporter) | 2014-06-16 10:45 UTC by Prasad Pandit | | --- | --- | | [Modified:](page.cgi?id=fields.html#modified) | 2021-02-17 06:28 UTC ([History](show_activity.cgi?id=1109774)) | | [CC List:](page.cgi?id=fields.html#cclist) | 30 users (show)  agordeev aquini bhu carnil dhoward esammons fhrbata gansalmon iboverma itamar jforbes jkacur jonathan jross jwboyer kernel-maint kernel-mgr lgoncalv lwang madhu.chinakonda matt mchehab mcressma nobody npajkovs pholasek plougher rt-maint rvrbovsk williams | | Fixed In Version: |  | | | Doc Type: | Bug Fix | | | Doc Text: | An information leak flaw was found in the way the Linux kernel handled media device enumerate entities IOCTL requests. A local user able to access the /dev/media0 device file could use this flaw to leak kernel memory bytes. | | | Clone Of: |  | | | Environment: |  | | | Last Closed: | 2015-08-21 23:52:46 UTC | | | Embargoed: |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | [(Terms of Use)](page.cgi?id=terms-conditions.html) | | | --- | --- | --- | |  | | |    Links | System | ID | Private | Priority | Status | Summary | Last Updated | | Red Hat Product Errata | [RHSA-2014:1971](https://access.redhat.com/errata/RHSA-2014%3A1971) | 0 | normal | SHIPPED\_LIVE | Important: kernel security and bug fix update | 2014-12-10 01:33:29 UTC | |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=1109774#c0)  Prasad Pandit    2014-06-16 10:45:12 UTC  ``` Linux kernel built with the Multimedia support(CONFIG_MEDIA_SUPPORT) to enable web-cam, video grabber devices, is vulnerable to an information leakage flaw. It could occur while doing an ioctl(2) call on a media device file.  A user/process able to access the /dev/media0 device file could use this flaw to leak kernel memory bytes.  Upstream fix: -------------   -> <https://git.kernel.org/linus/e6a623460e5fc960ac3ee9f946d3106233fd28d8>  Reference: ----------   -> <http://www.openwall.com/lists/oss-security/2014/06/15/1>   ```  [Comment 1](show_bug.cgi?id=1109774#c1)  Prasad Pandit    2014-06-16 10:49:10 UTC  ``` Statement:  This issue does not affect the versions of Linux kernel as shipped with Red Hat Enterprise Linux 5, Red Hat Enterprise Linux 6 and Red Hat Enterprise MRG 2.   ```  [Comment 3](show_bug.cgi?id=1109774#c3)  Prasad Pandit    2014-06-16 10:51:16 UTC  ```  Created kernel tracking bugs for this issue:  Affects: fedora-all [[bug 1109778](show_bug.cgi?id=1109778 "CLOSED CURRENTRELEASE - CVE-2014-1739 Kernel: drivers: media: an information leakage [fedora-all]")]   ```  [Comment 4](show_bug.cgi?id=1109774#c4)  Martin Prpič    2014-12-05 14:33:45 UTC  ``` IssueDescription:  An information leak flaw was found in the way the Linux kernel handled media device enumerate entities IOCTL requests. A local user able to access the /dev/media0 device file could use this flaw to leak kernel memory bytes.   ```  [Comment 5](show_bug.cgi?id=1109774#c5)  errata-xmlrpc    2014-12-09 20:34:01 UTC  ``` This issue has been addressed in the following products:    Red Hat Enterprise Linux 7  Via RHSA-2014:1971 <https://rhn.redhat.com/errata/RHSA-2014-1971.html>   ``` |  |
| --- | --- |

---

| Note You need to [log in](show_bug.cgi?id=1109774&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. |
| --- |

---

[Privacy](page.cgi?id=redhat/privacy.html)
[Contact](page.cgi?id=redhat/contact.html)
[FAQ](page.cgi?id=faq.html)
[Legal](page.cgi?id=terms-conditions.html)



=== Content from lists.opensuse.org_6b9f13b3_20250124_182025.html ===


[![openSUSE](https://static.opensuse.org/favicon.svg)
Mailing Lists](/archives/ "openSUSE Mailing Lists")

[Sign In](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/5WAPBSJMKBJWZDBLO5FDXFCBLLEM3TB3/)
[Sign Up](/accounts/signup/?next=/archives/list/security-announce%40lists.opensuse.org/message/5WAPBSJMKBJWZDBLO5FDXFCBLLEM3TB3/)

[Manage this list](/manage/lists/security-announce.lists.opensuse.org/)
[Sign In](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/5WAPBSJMKBJWZDBLO5FDXFCBLLEM3TB3/)
[Sign Up](/accounts/signup/?next=/archives/list/security-announce%40lists.opensuse.org/message/5WAPBSJMKBJWZDBLO5FDXFCBLLEM3TB3/)

×
#### Keyboard Shortcuts

### Thread View

* `j`: Next unread message
* `k`: Previous unread message
* `j a`: Jump to all threads* `j l`: Jump to MailingList overview

[thread](/archives/list/security-announce%40lists.opensuse.org/thread/5WAPBSJMKBJWZDBLO5FDXFCBLLEM3TB3/#5WAPBSJMKBJWZDBLO5FDXFCBLLEM3TB3)

# [security-announce] SUSE-SU-2014:1316-1: important: Security update for Linux kernel

![](https://seccdn.libravatar.org/avatar/099a17325bdf082b643d1a6bbacde279.jpg?s=120&d=mm&r=g)
## [opensuse-security＠opensuse.org](/archives/users/1b72def497ef4503896cd7a5fe9fb8e0/ "See the profile for opensuse-security＠opensuse.org")

22 Oct
2014

22 Oct
'14

19:04

SUSE Security Update: Security update for Linux kernel
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
Announcement ID: SUSE-SU-2014:1316-1
Rating: important
References: #774818 #806990 #816708 #826486 #832309 #849123
#855657 #859840 #860441 #860593 #863586 #866130
#866615 #866864 #866911 #869055 #869934 #870161
#871797 #876017 #876055 #876114 #876590 #879921
#880344 #880370 #881051 #881759 #882317 #882639
#882804 #882900 #883376 #883518 #883724 #884333
#884582 #884725 #884767 #885262 #885382 #885422
#885509 #886840 #887082 #887503 #887608 #887645
#887680 #888058 #888105 #888591 #888607 #888847
#888849 #888968 #889061 #889173 #889451 #889614
#889727 #890297 #890426 #890513 #890526 #891087
#891259 #891619 #892200 #892490 #892723 #893064
#893496 #893596 #894200
Cross-References: CVE-2013-1979 CVE-2014-1739 CVE-2014-2706
CVE-2014-4027 CVE-2014-4171 CVE-2014-4508
CVE-2014-4667 CVE-2014-4943 CVE-2014-5077
CVE-2014-5471 CVE-2014-5472
Affected Products:
SUSE Linux Enterprise Server 11 SP3 for VMware
SUSE Linux Enterprise Server 11 SP3
SUSE Linux Enterprise High Availability Extension 11 SP3
SUSE Linux Enterprise Desktop 11 SP3
SLE 11 SERVER Unsupported Extras
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
An update that solves 11 vulnerabilities and has 64 fixes
is now available.
Description:
The SUSE Linux Enterprise 11 Service Pack 3 kernel has been updated to fix
various bugs and security issues.
The following security bugs have been fixed:
\*
CVE-2014-1739: The media\_device\_enum\_entities function in
drivers/media/media-device.c in the Linux kernel before 3.14.6 does not
initialize a certain data structure, which allows local users to
obtain sensitive information from kernel memory by leveraging
/dev/media0 read access for a MEDIA\_IOC\_ENUM\_ENTITIES ioctl call
(bnc#882804).
\*
CVE-2014-4171: mm/shmem.c in the Linux kernel through 3.15.1 does
not properly implement the interaction between range notification and hole
punching, which allows local users to cause a denial of service (i\_mutex
hold) by using the mmap system call to access a hole, as demonstrated by
interfering with intended shmem activity by blocking completion of (1) an
MADV\_REMOVE madvise call or (2) an FALLOC\_FL\_PUNCH\_HOLE fallocate call
(bnc#883518).
\*
CVE-2014-4508: arch/x86/kernel/entry\_32.S in the Linux kernel
through 3.15.1 on 32-bit x86 platforms, when syscall auditing is enabled
and the sep CPU feature flag is set, allows local users to cause a denial
of service (OOPS and system crash) via an invalid syscall number, as
demonstrated by number 1000 (bnc#883724).
\*
CVE-2014-4667: The sctp\_association\_free function in
net/sctp/associola.c in the Linux kernel before 3.15.2 does not properly
manage a certain backlog value, which allows remote attackers to cause a
denial of service (socket outage) via a crafted SCTP packet (bnc#885422).
\*
CVE-2014-4943: The PPPoL2TP feature in net/l2tp/l2tp\_ppp.c in the
Linux kernel through 3.15.6 allows local users to gain privileges by
leveraging data-structure differences between an l2tp socket and an inet
socket (bnc#887082).
\*
CVE-2014-5077: The sctp\_assoc\_update function in
net/sctp/associola.c in the Linux kernel through 3.15.8, when SCTP
authentication is enabled, allows remote attackers to cause a denial of
service (NULL pointer dereference and OOPS) by starting to establish an
association between two endpoints immediately after an exchange of INIT
and INIT ACK chunks to establish an earlier association between these
endpoints in the opposite direction (bnc#889173).
\*
CVE-2014-5471: Stack consumption vulnerability in the
parse\_rock\_ridge\_inode\_internal function in fs/isofs/rock.c in the Linux
kernel through 3.16.1 allows local users to cause a denial of service
(uncontrolled recursion, and system crash or reboot) via a crafted iso9660
image with a CL entry referring to a directory entry that has a CL entry.
(bnc#892490)
\*
CVE-2014-5472: The parse\_rock\_ridge\_inode\_internal function in
fs/isofs/rock.c in the Linux kernel through 3.16.1 allows local users to
cause a denial of service (unkillable mount process) via a crafted iso9660
image with a self-referential CL entry. (bnc#892490)
\*
CVE-2014-2706: Race condition in the mac80211 subsystem in the Linux
kernel before 3.13.7 allows remote attackers to cause a denial of service
(system crash) via network traffic that improperly interacts with the
WLAN\_STA\_PS\_STA state (aka power-save mode), related to sta\_info.c and
tx.c. (bnc#871797)
\*
CVE-2014-4027: The rd\_build\_device\_space function in
drivers/target/target\_core\_rd.c in the Linux kernel before 3.14 does not
properly initialize a certain data structure, which allows local users to
obtain sensitive information from ramdisk\_mcp memory by leveraging access
to a SCSI initiator. (bnc#882639)
\*
CVE-2014-3153 The futex\_requeue function in kernel/futex.c in the
Linux kernel through 3.14.5 does not ensure that calls have two different
futex addresses, which allows local users to gain privileges via a crafted
FUTEX\_REQUEUE command that facilitates unsafe waiter modification.
(bnc#880892)
\*
CVE-2014-6410: Avoid infinite loop when processing indirect ICBs
(bnc#896689)
The following non-security bugs have been fixed:
\* ACPI / PAD: call schedule() when need\_resched() is true (bnc#866911).
\* ACPI: Fix bug when ACPI reset register is implemented in system
memory (bnc#882900).
\* ACPI: Limit access to custom\_method (bnc#884333).
\* ALSA: hda - Enabling Realtek ALC 671 codec (bnc#891746).
\* Add option to automatically enforce module signatures when in Secure
Boot mode (bnc#884333).
\* Add secure\_modules() call (bnc#884333).
\* Add wait\_on\_atomic\_t() and wake\_up\_atomic\_t() (bnc#880344).
\* Backported new patches of Lock down functions for UEFI secure boot
Also updated series.conf and removed old patches.
\* Btrfs: Return EXDEV for cross file system snapshot.
\* Btrfs: abort the transaction when we does not find our extent ref.
\* Btrfs: avoid warning bomb of btrfs\_invalidate\_inodes.
\* Btrfs: cancel scrub on transaction abortion.
\* Btrfs: correctly set profile flags on seqlock retry.
\* Btrfs: does not check nodes for extent items.
\* Btrfs: fix a possible deadlock between scrub and transaction
committing.
\* Btrfs: fix corruption after write/fsync failure + fsync + log
recovery (bnc#894200).
\* Btrfs: fix csum tree corruption, duplicate and outdated checksums
(bnc#891619).
\* Btrfs: fix double free in find\_lock\_delalloc\_range.
\* Btrfs: fix possible memory leak in btrfs\_create\_tree().
\* Btrfs: fix use of uninit "ret" in end\_extent\_writepage().
\* Btrfs: free delayed node outside of root->inode\_lock (bnc#866864).
\* Btrfs: make DEV\_INFO ioctl available to anyone.
\* Btrfs: make FS\_INFO ioctl available to anyone.
\* Btrfs: make device scan less noisy.
\* Btrfs: make sure there are not any read requests before stopping
workers.
\* Btrfs: more efficient io tree navigation on wait\_extent\_bit.
\* Btrfs: output warning instead of error when loading free space cache
failed.
\* Btrfs: retrieve more info from FS\_INFO ioctl.
\* Btrfs: return EPERM when deleting a default subvolume (bnc#869934).
\* Btrfs: unset DCACHE\_DISCONNECTED when mounting default subvol
(bnc#866615).
\* Btrfs: use right type to get real comparison.
\* Btrfs: wake up @scrub\_pause\_wait as much as we can.
\* Btrfs: wake up transaction thread upon remount.
\* CacheFiles: Add missing retrieval completions (bnc#880344).
\* CacheFiles: Does not try to dump the index key if the cookie has
been cleared (bnc#880344).
\* CacheFiles: Downgrade the requirements passed to the allocator
(bnc#880344).
\* CacheFiles: Fix the marking of cached pages (bnc#880344).
\* CacheFiles: Implement invalidation (bnc#880344).
\* CacheFiles: Make some debugging statements conditional (bnc#880344).
\* Drivers: hv: util: Fix a bug in the KVP code (bnc#886840).
\* Drivers: hv: vmbus: Fix a bug in the channel callback dispatch code
(bnc#886840).
\* FS-Cache: Add transition to handle invalidate immediately after
lookup (bnc#880344).
\* FS-Cache: Check that there are no read ops when cookie relinquished
(bnc#880344).
\* FS-Cache: Clear remaining page count on retrieval cancellation
(bnc#880344).
\* FS-Cache: Convert the object event ID #defines into an enum
(bnc#880344).
\* FS-Cache: Does not sleep in page release if \_\_GFP\_FS is not set
(bnc#880344).
\* FS-Cache: Does not use spin\_is\_locked() in assertions (bnc#880344).
\* FS-Cache: Exclusive op submission can BUG if there is been an I/O
error (bnc#880344).
\* FS-Cache: Fix \_\_wait\_on\_atomic\_t() to call the action func if the
counter != 0 (bnc#880344).
\* FS-Cache: Fix object state machine to have separate work and wait
states (bnc#880344).
\* FS-Cache: Fix operation state management and accounting (bnc#880344).
\* FS-Cache: Fix signal handling during waits (bnc#880344).
\* FS-Cache: Initialise the object event mask with the calculated mask
(bnc#880344).
\* FS-Cache: Limit the number of I/O error reports for a cache
(bnc#880344).
\* FS-Cache: Make cookie relinquishment wait for outstanding reads
(bnc#880344).
\* FS-Cache: Mark cancellation of in-progress operation (bnc#880344).
\* FS-Cache: One of the write operation paths doeses not set the object
state (bnc#880344).
\* FS-Cache: Provide proper invalidation (bnc#880344).
\* FS-Cache: Simplify cookie retention for fscache\_objects, fixing oops
(bnc#880344).
\* FS-Cache: The retrieval remaining-pages counter needs to be atomic\_t
(bnc#880344).
\* FS-Cache: Uninline fscache\_object\_init() (bnc#880344).
\* FS-Cache: Wrap checks on object state (bnc#880344).
\* HID: usbhid: add always-poll quirk (bnc#888607).
\* HID: usbhid: enable always-poll quirk for Elan Touchscreen
(bnc#888607).
\* IB/iser: Add TIMEWAIT\_EXIT event handling (bnc#890297).
\* Ignore "flags" change to event\_constraint (bnc#876114).
\* Ignore data\_src/weight changes to perf\_sample\_data (bnc#876114).
\* NFS: Allow more operations in an NFSv4.1 request (bnc#890513).
\* NFS: Clean up helper function nfs4\_select\_rw\_stateid() (bnc#888968).
\* NFS: Does not copy read delegation stateids in setattr (bnc#888968).
\* NFS: Does not use a delegation to open a file when returning that
delegation (bnc#888968, bnc#892200, bnc#893596, bnc#893496)
\* NFS: Fixes for NFS RCU-walk support in line with code going upstream
\* NFS: Use FS-Cache invalidation (bnc#880344).
\* NFS: allow lockless access to access\_cache (bnc#866130).
\* NFS: avoid mountpoint being displayed as " (deleted)" in
/proc/mounts (bnc#888591).
\* NFS: nfs4\_do\_open should add negative results to the dcache
(bnc#866130).
\* NFS: nfs\_migrate\_page() does not wait for FS-Cache to finish with a
page (bnc#880344).
\* NFS: nfs\_open\_revalidate: only evaluate parent if it will be used
(bnc#866130).
\* NFS: prepare for RCU-walk support but pushing tests later in code
(bnc#866130).
\* NFS: support RCU\_WALK in nfs\_permission() (bnc#866130).
\* NFS: teach nfs\_lookup\_verify\_inode to handle LOOKUP\_RCU (bnc#866130).
\* NFS: teach nfs\_neg\_need\_reval to understand LOOKUP\_RCU (bnc#866130).
\* NFSD: Does not hand out delegations for 30 seconds after recalling
them (bnc#880370).
\* NFSv4 set open access operation call flag in nfs4\_init\_opendata\_res
(bnc#888968, bnc#892200, bnc#893596, bnc#893496).
\* NFSv4: Add a helper for encoding opaque data (bnc#888968).
\* NFSv4: Add a helper for encoding stateids (bnc#888968).
\* NFSv4: Add helpers for basic copying of stateids (bnc#888968).
\* NFSv4: Clean up nfs4\_select\_rw\_stateid() (bnc#888968).
\* NFSv4: Fix the return value of nfs4\_select\_rw\_stateid (bnc#888968).
\* NFSv4: Rename nfs4\_copy\_stateid() (bnc#888968).
\* NFSv4: Resend the READ/WRITE RPC call if a stateid change causes an
error (bnc#888968).
\* NFSv4: Simplify the struct nfs4\_stateid (bnc#888968).
\* NFSv4: The stateid must remain the same for replayed RPC calls
(bnc#888968).
\* NFSv4: nfs4\_stateid\_is\_current should return "true" for an invalid
stateid (bnc#888968).
\* One more fix for kABI breakage.
\* PCI: Lock down BAR access when module security is enabled
(bnc#884333).
\* PCI: enable MPS "performance" setting to properly handle bridge MPS
(bnc#883376).
\* PM / Hibernate: Add memory\_rtree\_find\_bit function (bnc#860441).
\* PM / Hibernate: Create a Radix-Tree to store memory bitmap
(bnc#860441).
\* PM / Hibernate: Implement position keeping in radix tree
(bnc#860441).
\* PM / Hibernate: Iterate over set bits instead of PFNs in
swsusp\_free() (bnc#860441).
\* PM / Hibernate: Remove the old memory-bitmap implementation
(bnc#860441).
\* PM / Hibernate: Touch Soft Lockup Watchdog in rtree\_next\_node
(bnc#860441).
\* Restrict /dev/mem and /dev/kmem when module loading is restricted
(bnc#884333).
\* Reuse existing "state" field to indicate PERF\_X86\_EVENT\_PEBS\_LDLAT
(bnc#876114).
\* USB: handle LPM errors during device suspend correctly (bnc#849123).
\* Update kabi files to reflect fscache change (bnc#880344)
\* Update x86\_64 config files: re-enable SENSORS\_W83627EHF (bnc#891281)
\* VFS: Make more complete truncate operation available to CacheFiles
(bnc#880344).
\* [FEAT NET1222] ib\_uverbs: Allow explicit mmio trigger (FATE#83366,
ltc#83367).
\* acpi: Ignore acpi\_rsdp kernel parameter when module loading is
restricted (bnc#884333).
\* af\_iucv: correct cleanup if listen backlog is full (bnc#885262,
LTC#111728).
\* asus-wmi: Restrict debugfs interface when module loading is
restricted (bnc#884333).
\* autofs4: allow RCU-walk to walk through autofs4 (bnc#866130).
\* autofs4: avoid taking fs\_lock during rcu-walk (bnc#866130).
\* autofs4: does not take spinlock when not needed in
autofs4\_lookup\_expiring (bnc#866130).
\* autofs4: factor should\_expire() out of autofs4\_expire\_indirect
(bnc#866130).
\* autofs4: make "autofs4\_can\_expire" idempotent (bnc#866130).
\* autofs4: remove a redundant assignment (bnc#866130).
\* autofs: fix lockref lookup (bnc#888591).
\* be2net: add dma\_mapping\_error() check for dma\_map\_page()
(bnc#881759).
\* block: add cond\_resched() to potentially long running ioctl discard
loop (bnc#884725).
\* block: fix race between request completion and timeout handling
(bnc#881051).
\* cdc-ether: clean packet filter upon probe (bnc#876017).
\* cpuset: Fix memory allocator deadlock (bnc#876590).
\* crypto: Allow CRYPTO\_FIPS without MODULE\_SIGNATURES. Not all archs
have them, but some are FIPS certified, with some kernel support.
\* crypto: fips - only panic on bad/missing crypto mod signatures
(bnc#887503).
\* crypto: testmgr - allow aesni-intel and ghash\_clmulni-intel in fips
mode (bnc#889451).
\* dasd: validate request size before building CCW/TCW (bnc#891087,
LTC#114068).
\* dm mpath: fix race condition between multipath\_dtr and pg\_init\_done
(bnc#826486).
\* dm-mpath: fix panic on deleting sg device (bnc#870161).
\* drm/ast: AST2000 cannot be detected correctly (bnc#895983).
\* drm/ast: Actually load DP501 firmware when required (bnc#895608
bnc#871134).
\* drm/ast: Add missing entry to dclk\_table[].
\* drm/ast: Add reduced non reduced mode parsing for wide screen mode
(bnc#892723).
\* drm/ast: initial DP501 support (v0.2) (bnc#871134).
\* drm/ast: open key before detect chips (bnc#895983).
\* drm/i915: Fix up cpt pixel multiplier enable sequence (bnc#879304).
\* drm/i915: Only apply DPMS to the encoder if enabled (bnc#893064).
\* drm/i915: clear the FPGA\_DBG\_RM\_NOCLAIM bit at driver init
(bnc#869055).
\* drm/i915: create functions for the "unclaimed register" checks
(bnc#869055).
\* drm/i915: use FPGA\_DBG for the "unclaimed register" checks
(bnc#869055).
\* drm/mgag200: Initialize data needed to map fbdev memory (bnc
#806990).
\* e1000e: enable support for new device IDs (bnc#885509).
\* fs/fscache: remove spin\_lock() from the condition in while()
(bnc#880344).
\* hibernate: Disable in a signed modules environment (bnc#884333).
\* hugetlb: does not use ERR\_PTR with VM\_FAULT\* values
\* ibmvscsi: Abort init sequence during error recovery (bnc#885382).
\* ibmvscsi: Add memory barriers for send / receive (bnc#885382).
\* inet: add a redirect generation id in inetpeer (bnc#860593).
\* inetpeer: initialize ->redirect\_genid in inet\_getpeer() (bnc#860593).
\* ipv6: tcp: fix tcp\_v6\_conn\_request() (bnc#887645).
\* kabi: hide bnc#860593 changes of struct inetpeer\_addr\_base
(bnc#860593).
\* kernel: 3215 tty hang (bnc#891087, LTC#114562).
\* kernel: fix data corruption when reading /proc/sysinfo (bnc#891087,
LTC#114480).
\* kernel: fix kernel oops with load of fpc register (bnc#889061,
LTC#113596).
\* kernel: sclp console tty reference counting (bnc#891087, LTC#115466).
\* kexec: Disable at runtime if the kernel enforces module loading
restrictions (bnc#884333).
\* md/raid6: avoid data corruption during recovery of double-degraded
RAID6.
\* memcg, vmscan: Fix forced scan of anonymous pages (memory reclaim
fix).
\* memcg: do not expose uninitialized mem\_cgroup\_per\_node to world
(bnc#883096).
\* mm, hugetlb: add VM\_NORESERVE check in vma\_has\_reserves()
\* mm, hugetlb: change variable name reservations to resv
\* mm, hugetlb: decrement reserve count if VM\_NORESERVE alloc page cache
\* mm, hugetlb: defer freeing pages when gathering surplus pages
\* mm, hugetlb: do not use a page in page cache for cow optimization
\* mm, hugetlb: fix and clean-up node iteration code to alloc or free
\* mm, hugetlb: fix race in region tracking
\* mm, hugetlb: fix subpool accounting handling
\* mm, hugetlb: improve page-fault scalability
\* mm, hugetlb: improve, cleanup resv\_map parameters
\* mm, hugetlb: move up the code which check availability of free huge
page
\* mm, hugetlb: protect reserved pages when soft offlining a hugepage
\* mm, hugetlb: remove decrement\_hugepage\_resv\_vma()
\* mm, hugetlb: remove redundant list\_empty check in
gather\_surplus\_pages()
\* mm, hugetlb: remove resv\_map\_put
\* mm, hugetlb: remove useless check about mapping type
\* mm, hugetlb: return a reserved page to a reserved pool if failed
\* mm, hugetlb: trivial commenting fix
\* mm, hugetlb: unify region structure handling
\* mm, hugetlb: unify region structure handling kabi
\* mm, hugetlb: use long vars instead of int in region\_count() (Hugetlb
Fault Scalability).
\* mm, hugetlb: use vma\_resv\_map() map types
\* mm, oom: fix badness score underflow (bnc#884582, bnc#884767).
\* mm, oom: normalize oom scores to oom\_score\_adj scale only for
userspace (bnc#884582, bnc#884767).
\* mm, thp: do not allow thp faults to avoid cpuset restrictions
(bnc#888849).
\* net/mlx4\_core: Load higher level modules according to ports type
(bnc#887680).
\* net/mlx4\_core: Load the IB driver when the device supports IBoE
(bnc#887680).
\* net/mlx4\_en: Fix a race between napi poll function and RX ring
cleanup (bnc#863586).
\* net/mlx4\_en: Fix selftest failing on non 10G link speed (bnc#888058).
\* net: fix checksumming features handling in output path (bnc#891259).
\* pagecache\_limit: batch large nr\_to\_scan targets (bnc#895221).
\* pagecachelimit: reduce lru\_lock congestion for heavy parallel
reclaim fix (bnc#895680).
\* perf/core: Add weighted samples (bnc#876114).
\* perf/x86: Add flags to event constraints (bnc#876114).
\* perf/x86: Add memory profiling via PEBS Load Latency (bnc#876114).
\* perf: Add generic memory sampling interface (bnc#876114).
\* qla2xxx: Avoid escalating the SCSI error handler if the command is
not found in firmware (bnc#859840).
\* qla2xxx: Clear loop\_id for ports that are marked lost during fabric
scanning (bnc#859840).
\* qla2xxx: Does not check for firmware hung during the reset context
for ISP82XX (bnc#859840).
\* qla2xxx: Issue abort command for outstanding commands during cleanup
when only firmware is alive (bnc#859840).
\* qla2xxx: Reduce the time we wait for a command to complete during
SCSI error handling (bnc#859840).
\* qla2xxx: Set host can\_queue value based on available resources
(bnc#859840).
\* restore smp\_mb() in unlock\_new\_inode() (bnc#890526).
\* s390/pci: introduce lazy IOTLB flushing for DMA unmap (bnc#889061,
LTC#113725).
\* sched: fix the theoretical signal\_wake\_up() vs schedule() race
(bnc#876055).
\* sclp\_vt220: Enable integrated ASCII console per default (bnc#885262,
LTC#112035).
\* scsi\_dh: use missing accessor "scsi\_device\_from\_queue" (bnc#889614).
\* scsi\_transport\_fc: Cap dev\_loss\_tmo by fast\_io\_fail (bnc#887608).
\* scsiback: correct grant page unmapping.
\* scsiback: fix retry handling in \_\_report\_luns().
\* scsiback: free resources after error.
\* sunrpc/auth: allow lockless (rcu) lookup of credential cache
(bnc#866130).
\* supported.conf: remove external from drivers/net/veth (bnc#889727)
\* supported.conf: support net/sched/act\_police.ko (bnc#890426)
\* tcp: adapt selected parts of RFC 5682 and PRR logic (bnc#879921).
\* tg3: Change nvram command timeout value to 50ms (bnc#855657).
\* tg3: Override clock, link aware and link idle mode during NVRAM dump
(bnc#855657).
\* tg3: Set the MAC clock to the fastest speed during boot code load
(bnc#855657).
\* usb: Does not enable LPM if the exit latency is zero (bnc#832309).
\* usbcore: Does not log on consecutive debounce failures of the same
port (bnc#888105).
\* usbhid: fix PIXART optical mouse (bnc#888607).
\* uswsusp: Disable when module loading is restricted (bnc#884333).
\* vscsi: support larger transfer sizes (bnc#774818).
\* writeback: Do not sync data dirtied after sync start (bnc#833820).
\* x86 thermal: Delete power-limit-notification console messages
(bnc#882317).
\* x86 thermal: Disable power limit notification interrupt by default
(bnc#882317).
\* x86 thermal: Re-enable power limit notification interrupt by default
(bnc#882317).
\* x86, cpu hotplug: Fix stack frame warning in
check\_irq\_vectors\_for\_cpu\_disable() (bnc#887418).
\* x86/UV: Add call to KGDB/KDB from NMI handler (bnc#888847).
\* x86/UV: Add kdump to UV NMI handler (bnc#888847).
\* x86/UV: Add summary of cpu activity to UV NMI handler (bnc#888847).
\* x86/UV: Move NMI support (bnc#888847).
\* x86/UV: Update UV support for external NMI signals (bnc#888847).
\* x86/uv/nmi: Fix Sparse warnings (bnc#888847).
\* x86: Add check for number of available vectors before CPU down
(bnc#887418).
\* x86: Lock down IO port access when module security is enabled
(bnc#884333).
\* x86: Restrict MSR access when module loading is restricted
(bnc#884333).
Security Issues:
\* CVE-2013-1979
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-1979>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-1979%3E)
\* CVE-2014-1739
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-1739>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-1739%3E)
\* CVE-2014-2706
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-2706>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-2706%3E)
\* CVE-2014-4027
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-4027>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-4027%3E)
\* CVE-2014-4171
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-4171>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-4171%3E)
\* CVE-2014-4508
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-4508>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-4508%3E)
\* CVE-2014-4667
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-4667>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-4667%3E)
\* CVE-2014-4943
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-4943>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-4943%3E)
\* CVE-2014-5077
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-5077>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-5077%3E)
\* CVE-2014-5471
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-5471>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-5471%3E)
\* CVE-2014-5472
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-5472>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-5472%3E)
\* CVE-2014-3153
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-3153>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-3153%3E)
\* CVE-2014-6410
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-6410>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-6410%3E)
The SUSE Linux Enterprise 11 Service Pack 3 kernel was updated to fix
various bugs and security issues.
Following security bugs were fixed: CVE-2013-1979: The scm\_set\_cred
function in include/net/scm.h in the Linux kernel before 3.8.11 uses
incorrect uid and gid values during credentials passing, which allows
local users to gain privileges via a crafted application (bnc#816708).
CVE-2014-1739: The media\_device\_enum\_entities function in
drivers/media/media-device.c in the Linux kernel before 3.14.6 does not
initialize a certain data structure, which allows local users to obtain
sensitive information from kernel memory by leveraging /dev/media0 read
access for a MEDIA\_IOC\_ENUM\_ENTITIES ioctl call (bnc#882804).
CVE-2014-4171: mm/shmem.c in the Linux kernel through 3.15.1 does not
properly implement the interaction between range notification and hole
punching, which allows local users to cause a denial of service (i\_mutex
hold) by using the mmap system call to access a hole, as demonstrated by
interfering with intended shmem activity by blocking completion of (1) an
MADV\_REMOVE madvise call or (2) an FALLOC\_FL\_PUNCH\_HOLE fallocate call
(bnc#883518).
CVE-2014-4508: arch/x86/kernel/entry\_32.S in the Linux kernel through
3.15.1 on 32-bit x86 platforms, when syscall auditing is enabled and the
sep CPU feature flag is set, allows local users to cause a denial of
service (OOPS and system crash) via an invalid syscall number, as
demonstrated by number 1000 (bnc#883724).
CVE-2014-4667: The sctp\_association\_free function in net/sctp/associola.c
in the Linux kernel before 3.15.2 does not properly manage a certain
backlog value, which allows remote attackers to cause a denial of service
(socket outage) via a crafted SCTP packet (bnc#885422).
CVE-2014-4943: The PPPoL2TP feature in net/l2tp/l2tp\_ppp.c in the Linux
kernel through 3.15.6 allows local users to gain privileges by leveraging
data-structure differences between an l2tp socket and an inet socket
(bnc#887082).
CVE-2014-5077: The sctp\_assoc\_update function in net/sctp/associola.c in
the Linux kernel through 3.15.8, when SCTP authentication is enabled,
allows remote attackers to cause a denial of service (NULL pointer
dereference and OOPS) by starting to establish an association between two
endpoints immediately after an exchange of INIT and INIT ACK chunks to
establish an earlier association between these endpoints in the opposite
direction (bnc#889173).
CVE-2014-5471: Stack consumption vulnerability in the
parse\_rock\_ridge\_inode\_internal function in fs/isofs/rock.c in the Linux
kernel through 3.16.1 allows local users to cause a denial of service
(uncontrolled recursion, and system crash or reboot) via a crafted iso9660
image with a CL entry referring to a directory entry that has a CL entry.
(bnc#892490)
CVE-2014-5472: The parse\_rock\_ridge\_inode\_internal function in
fs/isofs/rock.c in the Linux kernel through 3.16.1 allows local users to
cause a denial of service (unkillable mount process) via a crafted iso9660
image with a self-referential CL entry. (bnc#892490)
CVE-2014-2706: Race condition in the mac80211 subsystem in the Linux
kernel before 3.13.7 allows remote attackers to cause a denial of service
(system crash) via network traffic that improperly interacts with the
WLAN\_STA\_PS\_STA state (aka power-save mode), related to sta\_info.c and
tx.c. (bnc#871797)
CVE-2014-4027: The rd\_build\_device\_space function in
drivers/target/target\_core\_rd.c in the Linux kernel before 3.14 does not
properly initialize a certain data structure, which allows local users to
obtain sensitive information from ramdisk\_mcp memory by leveraging access
to a SCSI initiator. (bnc#882639)
The following non-security bugs were fixed: - ACPI / PAD: call schedule()
when need\_resched() is true (bnc#866911). - ACPI: Fix bug when ACPI reset
register is implemented in system memory (bnc#882900). - ACPI: Limit
access to custom\_method (bnc#884333). - Add option to automatically
enforce module signatures when in Secure Boot mode (bnc#884333). - Add
secure\_modules() call (bnc#884333). - Add wait\_on\_atomic\_t() and
wake\_up\_atomic\_t() (bnc#880344). - Backported new patches of Lock down
functions for UEFI secure boot Also updated series.conf and removed old
patches. - Btrfs: Return EXDEV for cross file system snapshot. - Btrfs:
abort the transaction when we does not find our extent ref. - Btrfs: avoid
warning bomb of btrfs\_invalidate\_inodes. - Btrfs: cancel scrub on
transaction abortion. - Btrfs: correctly set profile flags on seqlock
retry. - Btrfs: does not check nodes for extent items. - Btrfs: fix a
possible deadlock between scrub and transaction committing. - Btrfs: fix
corruption after write/fsync failure + fsync + log recovery (bnc#894200).
- Btrfs: fix csum tree corruption, duplicate and outdated checksums
(bnc#891619). - Btrfs: fix double free in find\_lock\_delalloc\_range. -
Btrfs: fix possible memory leak in btrfs\_create\_tree(). - Btrfs: fix use
of uninit "ret" in end\_extent\_writepage(). - Btrfs: free delayed node
outside of root->inode\_lock (bnc#866864). - Btrfs: make DEV\_INFO ioctl
available to anyone. - Btrfs: make FS\_INFO ioctl available to anyone. -
Btrfs: make device scan less noisy. - Btrfs: make sure there are not any
read requests before stopping workers. - Btrfs: more efficient io tree
navigation on wait\_extent\_bit. - Btrfs: output warning instead of error
when loading free space cache failed. - Btrfs: retrieve more info from
FS\_INFO ioctl. - Btrfs: return EPERM when deleting a default subvolume
(bnc#869934). - Btrfs: unset DCACHE\_DISCONNECTED when mounting default
subvol (bnc#866615).
- Btrfs: use right type to get real comparison. - Btrfs: wake up
@scrub\_pause\_wait as much as we can. - Btrfs: wake up transaction thread
upon remount. - CacheFiles: Add missing retrieval completions
(bnc#880344).
- CacheFiles: Does not try to dump the index key if the cookie has been
cleared (bnc#880344). - CacheFiles: Downgrade the requirements passed to
the allocator (bnc#880344). - CacheFiles: Fix the marking of cached
pages (bnc#880344). - CacheFiles: Implement invalidation (bnc#880344). -
CacheFiles: Make some debugging statements conditional (bnc#880344). -
Drivers: hv: util: Fix a bug in the KVP code (bnc#886840). - Drivers:
hv: vmbus: Fix a bug in the channel callback dispatch code (bnc#886840).
- FS-Cache: Add transition to handle invalidate immediately after lookup
(bnc#880344). - FS-Cache: Check that there are no read ops when cookie
relinquished (bnc#880344). - FS-Cache: Clear remaining page count on
retrieval cancellation (bnc#880344). - FS-Cache: Convert the object
event ID #defines into an enum (bnc#880344). - FS-Cache: Does not sleep
in page release if \_\_GFP\_FS is not set (bnc#880344). - FS-Cache: Does
not use spin\_is\_locked() in assertions (bnc#880344). - FS-Cache:
Exclusive op submission can BUG if there is been an I/O error
(bnc#880344). - FS-Cache: Fix \_\_wait\_on\_atomic\_t() to call the action
func if the counter != 0 (bnc#880344). - FS-Cache: Fix object state
machine to have separate work and wait states (bnc#880344). - FS-Cache:
Fix operation state management and accounting (bnc#880344). - FS-Cache:
Fix signal handling during waits (bnc#880344). - FS-Cache: Initialise
the object event mask with the calculated mask (bnc#880344). - FS-Cache:
Limit the number of I/O error reports for a cache (bnc#880344). -
FS-Cache: Make cookie relinquishment wait for outstanding reads
(bnc#880344). - FS-Cache: Mark cancellation of in-progress operation
(bnc#880344). - FS-Cache: One of the write operation paths doeses not
set the object state (bnc#880344). - FS-Cache: Provide proper
invalidation (bnc#880344). - FS-Cache: Simplify cookie retention for
fscache\_objects, fixing oops (bnc#880344). - FS-Cache: The retrieval
remaining-pages counter needs to be atomic\_t (bnc#880344). - FS-Cache:
Uninline fscache\_object\_init() (bnc#880344). - FS-Cache: Wrap checks on
object state (bnc#880344). - HID: usbhid: add always-poll quirk
(bnc#888607). - HID: usbhid: enable always-poll quirk for Elan
Touchscreen (bnc#888607). - IB/iser: Add TIMEWAIT\_EXIT event handling
(bnc#890297). - Ignore "flags" change to event\_constraint (bnc#876114). -
Ignore data\_src/weight changes to perf\_sample\_data (bnc#876114). - NFS:
Allow more
operations in an NFSv4.1 request (bnc#890513). - NFS: Clean up helper
function nfs4\_select\_rw\_stateid() (bnc#888968). - NFS: Does not copy read
delegation stateids in setattr (bnc#888968). - NFS: Does not use a
delegation to open a file when returning that delegation (bnc#888968,
bnc#892200, bnc#893596, bnc#893496) - NFS: Fixes for NFS RCU-walk support
in line with code going upstream - NFS: Use FS-Cache invalidation
(bnc#880344). - NFS: allow lockless access to access\_cache (bnc#866130).
- NFS: avoid mountpoint being displayed as " (deleted)" in /proc/mounts
(bnc#888591). - NFS: nfs4\_do\_open should add negative results to the
dcache (bnc#866130). - NFS: nfs\_migrate\_page() does not wait for FS-Cache
to finish with a page (bnc#880344). - NFS: nfs\_open\_revalidate: only
evaluate parent if it will be used (bnc#866130). - NFS: prepare for
RCU-walk support but pushing tests later in code (bnc#866130). - NFS:
support RCU\_WALK in nfs\_permission() (bnc#866130). - NFS: teach
nfs\_lookup\_verify\_inode to handle LOOKUP\_RCU (bnc#866130). - NFS: teach
nfs\_neg\_need\_reval to understand LOOKUP\_RCU (bnc#866130). - NFSD: Does
not hand out delegations for 30 seconds after recalling them
(bnc#880370). - NFSv4 set open access
operation call flag in nfs4\_init\_opendata\_res (bnc#888968, bnc#892200,
bnc#893596, bnc#893496). - NFSv4: Add a helper for encoding opaque data
(bnc#888968). - NFSv4: Add a helper for encoding stateids (bnc#888968). -
NFSv4: Add helpers for basic copying of stateids (bnc#888968). - NFSv4:
Clean up nfs4\_select\_rw\_stateid() (bnc#888968). - NFSv4: Fix the return
value of nfs4\_select\_rw\_stateid (bnc#888968). - NFSv4: Rename
nfs4\_copy\_stateid() (bnc#888968). - NFSv4: Resend the READ/WRITE RPC call
if a stateid change causes an error (bnc#888968). - NFSv4: Simplify the
struct nfs4\_stateid (bnc#888968). - NFSv4: The stateid must remain the
same for replayed RPC calls (bnc#888968). - NFSv4:
nfs4\_stateid\_is\_current should return "true" for an invalid stateid
(bnc#888968). - One more fix for kABI breakage. - PCI: Lock down BAR
access when module security is enabled (bnc#884333). - PCI: enable MPS
"performance" setting to properly handle bridge MPS (bnc#883376). - PM /
Hibernate: Add memory\_rtree\_find\_bit function (bnc#860441). - PM /
Hibernate: Create a Radix-Tree to store memory bitmap (bnc#860441). - PM
/ Hibernate: Implement position keeping in radix tree (bnc#860441). - PM
/ Hibernate: Iterate over set bits instead of PFNs in swsusp\_free()
(bnc#860441). - PM / Hibernate: Remove the old memory-bitmap
implementation (bnc#860441). - PM / Hibernate: Touch Soft Lockup Watchdog
in rtree\_next\_node (bnc#860441). - Restrict /dev/mem and /dev/kmem when
module loading is restricted (bnc#884333). - Reuse existing "state" field
to indicate PERF\_X86\_EVENT\_PEBS\_LDLAT (bnc#876114). - USB: handle LPM
errors during device suspend correctly (bnc#849123). - Update kabi files
to reflect fscache change (bnc#880344) - VFS: Make more complete truncate
operation available to CacheFiles (bnc#880344). - [FEAT NET1222]
ib\_uverbs: Allow explicit mmio trigger (FATE#83366, ltc#83367). - acpi:
Ignore acpi\_rsdp kernel parameter when module loading is restricted
(bnc#884333). - af\_iucv: correct cleanup if listen backlog is full
(bnc#885262, LTC#111728). - asus-wmi: Restrict debugfs interface when
module loading is restricted (bnc#884333). - autofs4: allow RCU-walk to
walk through autofs4 (bnc#866130). - autofs4: avoid taking fs\_lock during
rcu-walk (bnc#866130). - autofs4: does not take spinlock when not needed
in autofs4\_lookup\_expiring (bnc#866130). - autofs4: factor
should\_expire() out
of autofs4\_expire\_indirect (bnc#866130). - autofs4: make
"autofs4\_can\_expire" idempotent (bnc#866130). - autofs4: remove a
redundant assignment (bnc#866130). - autofs: fix lockref lookup
(bnc#888591). - be2net: add dma\_mapping\_error() check for dma\_map\_page()
(bnc#881759). - block: add cond\_resched() to potentially long running
ioctl discard loop (bnc#884725). - block: fix race between request
completion and timeout handling (bnc#881051). - cdc-ether: clean packet
filter upon probe (bnc#876017). - cpuset: Fix memory allocator deadlock
(bnc#876590). - crypto: Allow CRYPTO\_FIPS without MODULE\_SIGNATURES. Not
all archs have them, but some are FIPS certified, with some kernel
support. - crypto: fips
- only panic on bad/missing crypto mod signatures (bnc#887503). - crypto:
testmgr - allow aesni-intel and ghash\_clmulni-intel in fips mode
(bnc#889451). - dasd: validate request size before building CCW/TCW
(bnc#891087, LTC#114068). - dm mpath: fix race condition between
multipath\_dtr and pg\_init\_done (bnc#826486). - dm-mpath: fix panic on
deleting sg device (bnc#870161). - drm/ast: Add missing entry to
dclk\_table[]. - drm/ast: Add reduced non reduced mode parsing for wide
screen mode (bnc#892723). - drm/i915: Only apply DPMS to the encoder if
enabled (bnc#893064). - drm/i915: clear the FPGA\_DBG\_RM\_NOCLAIM bit at
driver init (bnc#869055). - drm/i915: create functions for the
"unclaimed register" checks (bnc#869055). - drm/i915: use FPGA\_DBG for
the "unclaimed register" checks (bnc#869055). - drm/mgag200: Initialize
data needed to map fbdev memory (bnc #806990). - e1000e: enable support
for new device IDs (bnc#885509). - fs/fscache: remove spin\_lock() from
the condition in while() (bnc#880344). - hibernate: Disable in a signed
modules environment (bnc#884333). - hugetlb: does not use ERR\_PTR with
VM\_FAULT\* values - ibmvscsi: Abort init sequence during error recovery
(bnc#885382). - ibmvscsi: Add memory barriers for send / receive
(bnc#885382). - inet: add a redirect generation id in inetpeer
(bnc#860593). - inetpeer: initialize
->redirect\_genid in inet\_getpeer() (bnc#860593). - ipv6: tcp: fix
tcp\_v6\_conn\_request() (bnc#887645). - kabi: hide bnc#860593 changes of
struct inetpeer\_addr\_base (bnc#860593). - kernel: 3215 tty hang
(bnc#891087, LTC#114562). - kernel: fix data corruption when reading
/proc/sysinfo (bnc#891087, LTC#114480). - kernel: fix kernel oops with
load
of fpc register (bnc#889061, LTC#113596). - kernel: sclp console tty
reference counting (bnc#891087, LTC#115466). - kexec: Disable at runtime
if the kernel enforces module loading restrictions (bnc#884333). -
md/raid6: avoid data corruption during recovery of double-degraded RAID6.
- memcg, vmscan: Fix forced scan of anonymous pages (memory reclaim fix).
- mm, hugetlb: add VM\_NORESERVE check in vma\_has\_reserves() - mm,
hugetlb: change variable name reservations to resv - mm, hugetlb:
decrement reserve count if VM\_NORESERVE alloc page cache - mm, hugetlb:
defer freeing pages when gathering surplus pages - mm, hugetlb: do not
use a page in page cache for cow optimization - mm, hugetlb: fix and
clean-up node iteration code to alloc or free - mm, hugetlb: fix race in
region tracking - mm, hugetlb: fix subpool accounting handling - mm,
hugetlb: improve page-fault scalability - mm, hugetlb: improve, cleanup
resv\_map parameters - mm, hugetlb: move up the code which check
availability of free huge page - mm, hugetlb: protect reserved pages when
soft offlining a hugepage - mm, hugetlb: remove
decrement\_hugepage\_resv\_vma() - mm, hugetlb: remove redundant list\_empty
check in gather\_surplus\_pages() - mm, hugetlb: remove resv\_map\_put - mm,
hugetlb: remove useless check about mapping type - mm, hugetlb: return a
reserved page to a reserved pool if failed - mm, hugetlb: trivial
commenting fix - mm, hugetlb: unify region structure handling - mm,
hugetlb: unify region structure handling kabi - mm, hugetlb: use long
vars instead of int in region\_count() (Hugetlb Fault Scalability). - mm,
hugetlb: use vma\_resv\_map() map types - mm, oom: fix badness score
underflow (bnc#884582, bnc#884767). - mm, oom: normalize oom scores to
oom\_score\_adj scale only for userspace (bnc#884582, bnc#884767). - mm,
thp: do not allow thp faults to avoid cpuset restrictions (bnc#888849). -
net/mlx4\_core: Load higher level modules according to ports type
(bnc#887680). - net/mlx4\_core: Load the IB driver when the device
supports IBoE (bnc#887680). - net/mlx4\_en: Fix a race between napi poll
function and RX ring cleanup (bnc#863586). - net/mlx4\_en: Fix selftest
failing on non 10G link speed (bnc#888058). - net: fix checksumming
features handling in
output path (bnc#891259). - perf/core: Add weighted samples (bnc#876114).
- perf/x86: Add flags to event constraints (bnc#876114). - perf/x86: Add
memory profiling via PEBS Load Latency (bnc#876114). - perf: Add generic
memory sampling interface (bnc#876114). - qla2xxx: Avoid escalating the
SCSI error handler if the command is not found in firmware (bnc#859840).
- qla2xxx: Clear loop\_id for ports that are marked lost during fabric
scanning (bnc#859840). - qla2xxx: Does not check for firmware hung during
the reset context for ISP82XX (bnc#859840). - qla2xxx: Issue abort
command for outstanding commands during cleanup when only firmware is
alive (bnc#859840). - qla2xxx: Reduce the time we wait for a command to
complete during SCSI error handling (bnc#859840). - qla2xxx: Set host
can\_queue value based on available resources (bnc#859840). - restore
smp\_mb() in unlock\_new\_inode() (bnc#890526). - s390/pci: introduce lazy
IOTLB flushing for DMA unmap (bnc#889061, LTC#113725). - sched: fix the
theoretical signal\_wake\_up() vs schedule() race (bnc#876055). -
sclp\_vt220: Enable integrated ASCII console per default (bnc#885262,
LTC#112035). - scsi\_dh: use missing accessor "scsi\_device\_from\_queue"
(bnc#889614). - scsi\_transport\_fc: Cap dev\_loss\_tmo by fast\_io\_fail
(bnc#887608). - scsiback: correct grant page unmapping. - scsiback: fix
retry handling in \_\_report\_luns(). - scsiback: free resources after
error. - sunrpc/auth: allow lockless (rcu) lookup of credential cache
(bnc#866130). - supported.conf: remove external from drivers/net/veth
(bnc#889727) - supported.conf: support net/sched/act\_police.ko
(bnc#890426) - tcp: adapt selected parts of RFC 5682 and PRR logic
(bnc#879921). - tg3: Change nvram command timeout value to 50ms
(bnc#855657). - tg3: Override clock, link aware and link idle mode during
NVRAM dump (bnc#855657). - tg3: Set the MAC clock to the fastest speed
during boot code load (bnc#855657). - usb: Does not enable LPM if the
exit latency is zero (bnc#832309). - usbcore: Does not log on consecutive
debounce failures of the same port (bnc#888105). - usbhid: fix PIXART
optical mouse (bnc#888607). - uswsusp: Disable when module loading is
restricted (bnc#884333). - vscsi: support larger transfer sizes
(bnc#774818). - x86 thermal: Delete power-limit-notification console
messages (bnc#882317). - x86 thermal: Disable power limit notification
interrupt by default (bnc#882317). - x86 thermal: Re-enable power limit
notification interrupt by default (bnc#882317). - x86/UV: Add call to
KGDB/KDB from NMI handler (bnc#888847). - x86/UV: Add kdump to UV NMI
handler (bnc#888847). - x86/UV: Add summary of cpu activity to UV NMI
handler (bnc#888847). - x86/UV: Move NMI support (bnc#888847). - x86/UV:
Update UV support for external NMI signals (bnc#888847). - x86/uv/nmi:
Fix Sparse warnings (bnc#888847). - x86: Lock down IO port access when
module security is enabled (bnc#884333). - x86: Restrict MSR access when
module loading is restricted (bnc#884333).
Security Issues:
\* CVE-2013-1979
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-1979>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-1979%3E)
\* CVE-2014-1739
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-1739>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-1739%3E)
\* CVE-2014-2706
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-2706>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-2706%3E)
\* CVE-2014-4027
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-4027>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-4027%3E)
\* CVE-2014-4171
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-4171>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-4171%3E)
\* CVE-2014-4508
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-4508>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-4508%3E)
\* CVE-2014-4667
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-4667>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-4667%3E)
\* CVE-2014-4943
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-4943>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-4943%3E)
\* CVE-2014-5077
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-5077>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-5077%3E)
\* CVE-2014-5471
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-5471>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-5471%3E)
\* CVE-2014-5472
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-5472>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-5472%3E)
Indications:
Everyone using the Linux Kernel on x86\_64 architecture should update.
Contraindications:
Indications:
Everyone using the Linux Kernel on x86\_64 architecture should update.
Special Instructions and Notes:
Please reboot the system after installing this update.
Patch Instructions:
To install this SUSE Security Update use YaST online\_update.
Alternatively you can run the command listed for your product:
- SUSE Linux Enterprise Server 11 SP3 for VMware:
zypper in -t patch slessp3-kernel-bigsmp-201409-9750
- SUSE Linux Enterprise Server 11 SP3:
zypper in -t patch slessp3-kernel-bigsmp-201409-9750
- SUSE Linux Enterprise High Availability Extension 11 SP3:
zypper in -t patch slehasp3-kernel-bigsmp-201409-9750
- SUSE Linux Enterprise Desktop 11 SP3:
zypper in -t patch sledsp3-kernel-bigsmp-201409-9750
To bring your system up-to-date, use "zypper patch".
Package List:
- SUSE Linux Enterprise Server 11 SP3 for VMware (x86\_64):
kernel-bigsmp-devel-3.0.101-0.40.1
- SUSE Linux Enterprise Server 11 SP3 (x86\_64):
iscsitarget-kmp-bigsmp-1.4.20\_3.0.101\_0.40-0.38.83
kernel-bigsmp-3.0.101-0.40.1
kernel-bigsmp-base-3.0.101-0.40.1
kernel-bigsmp-devel-3.0.101-0.40.1
ofed-kmp-bigsmp-1.5.4.1\_3.0.101\_0.40-0.13.89
oracleasm-kmp-bigsmp-2.0.5\_3.0.101\_0.40-7.39.89
- SUSE Linux Enterprise High Availability Extension 11 SP3 (x86\_64):
cluster-network-kmp-bigsmp-1.4\_3.0.101\_0.40-2.27.98
drbd-kmp-bigsmp-8.4.4\_3.0.101\_0.40-0.22.64
gfs2-kmp-bigsmp-2\_3.0.101\_0.40-0.16.104
ocfs2-kmp-bigsmp-1.6\_3.0.101\_0.40-0.20.98
- SUSE Linux Enterprise Desktop 11 SP3 (x86\_64):
kernel-bigsmp-devel-3.0.101-0.40.1
- SLE 11 SERVER Unsupported Extras (x86\_64):
kernel-bigsmp-extra-3.0.101-0.40.1
References:
<http://support.novell.com/security/cve/CVE-2013-1979.html>
<http://support.novell.com/security/cve/CVE-2014-1739.html>
<http://support.novell.com/security/cve/CVE-2014-2706.html>
<http://support.novell.com/security/cve/CVE-2014-4027.html>
<http://support.novell.com/security/cve/CVE-2014-4171.html>
<http://support.novell.com/security/cve/CVE-2014-4508.html>
<http://support.novell.com/security/cve/CVE-2014-4667.html>
<http://support.novell.com/security/cve/CVE-2014-4943.html>
<http://support.novell.com/security/cve/CVE-2014-5077.html>
<http://support.novell.com/security/cve/CVE-2014-5471.html>
<http://support.novell.com/security/cve/CVE-2014-5472.html>
<https://bugzilla.suse.com/show_bug.cgi?id=774818>
<https://bugzilla.suse.com/show_bug.cgi?id=806990>
<https://bugzilla.suse.com/show_bug.cgi?id=816708>
<https://bugzilla.suse.com/show_bug.cgi?id=826486>
<https://bugzilla.suse.com/show_bug.cgi?id=832309>
<https://bugzilla.suse.com/show_bug.cgi?id=849123>
<https://bugzilla.suse.com/show_bug.cgi?id=855657>
<https://bugzilla.suse.com/show_bug.cgi?id=859840>
<https://bugzilla.suse.com/show_bug.cgi?id=860441>
<https://bugzilla.suse.com/show_bug.cgi?id=860593>
<https://bugzilla.suse.com/show_bug.cgi?id=863586>
<https://bugzilla.suse.com/show_bug.cgi?id=866130>
<https://bugzilla.suse.com/show_bug.cgi?id=866615>
<https://bugzilla.suse.com/show_bug.cgi?id=866864>
<https://bugzilla.suse.com/show_bug.cgi?id=866911>
<https://bugzilla.suse.com/show_bug.cgi?id=869055>
<https://bugzilla.suse.com/show_bug.cgi?id=869934>
<https://bugzilla.suse.com/show_bug.cgi?id=870161>
<https://bugzilla.suse.com/show_bug.cgi?id=871797>
<https://bugzilla.suse.com/show_bug.cgi?id=876017>
<https://bugzilla.suse.com/show_bug.cgi?id=876055>
<https://bugzilla.suse.com/show_bug.cgi?id=876114>
<https://bugzilla.suse.com/show_bug.cgi?id=876590>
<https://bugzilla.suse.com/show_bug.cgi?id=879921>
<https://bugzilla.suse.com/show_bug.cgi?id=880344>
<https://bugzilla.suse.com/show_bug.cgi?id=880370>
<https://bugzilla.suse.com/show_bug.cgi?id=881051>
<https://bugzilla.suse.com/show_bug.cgi?id=881759>
<https://bugzilla.suse.com/show_bug.cgi?id=882317>
<https://bugzilla.suse.com/show_bug.cgi?id=882639>
<https://bugzilla.suse.com/show_bug.cgi?id=882804>
<https://bugzilla.suse.com/show_bug.cgi?id=882900>
<https://bugzilla.suse.com/show_bug.cgi?id=883376>
<https://bugzilla.suse.com/show_bug.cgi?id=883518>
<https://bugzilla.suse.com/show_bug.cgi?id=883724>
<https://bugzilla.suse.com/show_bug.cgi?id=884333>
<https://bugzilla.suse.com/show_bug.cgi?id=884582>
<https://bugzilla.suse.com/show_bug.cgi?id=884725>
<https://bugzilla.suse.com/show_bug.cgi?id=884767>
<https://bugzilla.suse.com/show_bug.cgi?id=885262>
<https://bugzilla.suse.com/show_bug.cgi?id=885382>
<https://bugzilla.suse.com/show_bug.cgi?id=885422>
<https://bugzilla.suse.com/show_bug.cgi?id=885509>
<https://bugzilla.suse.com/show_bug.cgi?id=886840>
<https://bugzilla.suse.com/show_bug.cgi?id=887082>
<https://bugzilla.suse.com/show_bug.cgi?id=887503>
<https://bugzilla.suse.com/show_bug.cgi?id=887608>
<https://bugzilla.suse.com/show_bug.cgi?id=887645>
<https://bugzilla.suse.com/show_bug.cgi?id=887680>
<https://bugzilla.suse.com/show_bug.cgi?id=888058>
<https://bugzilla.suse.com/show_bug.cgi?id=888105>
<https://bugzilla.suse.com/show_bug.cgi?id=888591>
<https://bugzilla.suse.com/show_bug.cgi?id=888607>
<https://bugzilla.suse.com/show_bug.cgi?id=888847>
<https://bugzilla.suse.com/show_bug.cgi?id=888849>
<https://bugzilla.suse.com/show_bug.cgi?id=888968>
<https://bugzilla.suse.com/show_bug.cgi?id=889061>
<https://bugzilla.suse.com/show_bug.cgi?id=889173>
<https://bugzilla.suse.com/show_bug.cgi?id=889451>
<https://bugzilla.suse.com/show_bug.cgi?id=889614>
<https://bugzilla.suse.com/show_bug.cgi?id=889727>
<https://bugzilla.suse.com/show_bug.cgi?id=890297>
<https://bugzilla.suse.com/show_bug.cgi?id=890426>
<https://bugzilla.suse.com/show_bug.cgi?id=890513>
<https://bugzilla.suse.com/show_bug.cgi?id=890526>
<https://bugzilla.suse.com/show_bug.cgi?id=891087>
<https://bugzilla.suse.com/show_bug.cgi?id=891259>
<https://bugzilla.suse.com/show_bug.cgi?id=891619>
<https://bugzilla.suse.com/show_bug.cgi?id=892200>
<https://bugzilla.suse.com/show_bug.cgi?id=892490>
<https://bugzilla.suse.com/show_bug.cgi?id=892723>
<https://bugzilla.suse.com/show_bug.cgi?id=893064>
<https://bugzilla.suse.com/show_bug.cgi?id=893496>
<https://bugzilla.suse.com/show_bug.cgi?id=893596>
<https://bugzilla.suse.com/show_bug.cgi?id=894200>
[http://download.suse.com/patch/finder/?keywords=dc5412c9dbb50ea612d1193ae55a...](http://download.suse.com/patch/finder/?keywords=dc5412c9dbb50ea612d1193ae55a8d38)
[http://download.suse.com/patch/finder/?keywords=e0773faf1a29419cf53084e7aa8f...](http://download.suse.com/patch/finder/?keywords=e0773faf1a29419cf53084e7aa8fa6f1)
--
To unsubscribe, e-mail: opensuse-security-announce+unsubscribe@opensuse.org
For additional commands, e-mail: opensuse-security-announce+help@opensuse.org

[0](#like "You must be logged-in to vote.")
[0](#dislike "You must be logged-in to vote.")

Reply

[Sign in to reply online](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/5WAPBSJMKBJWZDBLO5FDXFCBLLEM3TB3/)
Use email software

[Back to the thread](/archives/list/security-announce%40lists.opensuse.org/thread/5WAPBSJMKBJWZDBLO5FDXFCBLLEM3TB3/#5WAPBSJMKBJWZDBLO5FDXFCBLLEM3TB3)

[Back to the list](/archives/list/security-announce%40lists.opensuse.org/)

![HyperKitty](/static/hyperkitty/img/logo.png)
Powered by [HyperKitty](http://hyperkitty.readthedocs.org) version 1.3.12.



=== Content from speirofr.appspot.com_53a5bfc1_20250126_024551.html ===


* [**Salva PeirÃ³**](https://speirofr.appspot.com "Salva PeirÃ³ Software Engineer")
* [Profile](/#salva-peiro)
* [Education](/#education)
* [Publications](/#publications)
* [Projects](/#projects-with-active-participation-most-relevant)
* [Archives](/archives.html)

# [On techniques to prevent commit\_creds() user-space abuse](https://speirofr.appspot.com/on-techniques-to-prevent-commit_creds-user-space-abuse.html)

by [speiro](https://speirofr.appspot.com/author/speiro/index.html) -

Nov 25, 2015

-
[commit\_creds](https://speirofr.appspot.com/tag/commit_creds/index.html), [prevention](https://speirofr.appspot.com/tag/prevention/index.html), [technique](https://speirofr.appspot.com/tag/technique/index.html), [kernel](https://speirofr.appspot.com/tag/kernel/index.html), [hardening](https://speirofr.appspot.com/tag/hardening/index.html),

# Update

Implementation of this kind of protection is *pointless*,
since by the time the attacker is executing code he can already bypass the
protections as discussed in
[kernel-hardening](http://www.openwall.com/lists/kernel-hardening/2015/11/26/6).
Defeating a similar protection implemented in Windows 8 is described in
[Defeating Windows 8 ROP Mitigation](http://vulnfactory.org/blog/2011/09/21/defeating-windows-8-rop-mitigation/)

# Analysis

Given the typical path for kernel exploitation is the
`commit_creds(prepare_kernel_cred(0))` being called from user space as detailed in [[1]](#references).
Why is not a check placed in `commit_creds()` to checks the return address
and ensure that the call is a legit one coming from kernel space?.

This blocks direct calls to `commit_creds` from user â¦

[more ...](https://speirofr.appspot.com/on-techniques-to-prevent-commit_creds-user-space-abuse.html)

---

# [CVE-2015-7884: Kernel Infoleak vulnerability in vivid\_fb\_ioctl()](https://speirofr.appspot.com/cve-2015-7884-kernel-infoleak-vulnerability-in-vivid_fb_ioctl.html)

by [speiro](https://speirofr.appspot.com/author/speiro/index.html) -

Oct 22, 2015

-
[CVE-2015-7884](https://speirofr.appspot.com/tag/cve-2015-7884/index.html), [security](https://speirofr.appspot.com/tag/security/index.html), [kernel](https://speirofr.appspot.com/tag/kernel/index.html), [infoleak](https://speirofr.appspot.com/tag/infoleak/index.html),

# Summary

| **CVE** | [CVE-2015-7884](http://web.nvd.nist.gov/view/vuln/search-results?query=CVE-2015-7884) |
| --- | --- |
| **Author** | [Salva PeirÃ³](http://speirofr.appspot.com) |
| **Date** | October 2015 - Discovery of the vulnerability. |
| **Impact** | The vulnerability discloses 16 bytes of kernel process stack. |
| **Affected Versions** | From linux-3.17.0-rc1 to linux-4.3-rc6 |
| **Bug Timespan** | 1 year: from 2014 to 2015 commit [ad4e02d5081d9da38b5b91886e5fa71f0505d607](http://git.kernel.org/cgit/linux/kernel/git/next/linux-next.git/commit/?id=ad4e02d5081d9da38b5b91886e5fa71f0505d607) |
| **Patch fix** | commit [eda98796aff0d9bf41094b06811f5def3b4c333c](http://git.kernel.org/cgit/linux/kernel/git/next/linux-next.git/commit/?id=eda98796aff0d9bf41094b06811f5def3b4c333c) |

# Description

The vivid\_fb\_ioctl() code fails to initialize the 16 reserved bytes of
struct fb\_vblank after the ->hcount member. Add an explicit
memset(0) before filling the structure to avoid the info leak.

# The patch fixing the Infoleak

After verification the patch that fixes the vulnerability
has been â¦

[more ...](https://speirofr.appspot.com/cve-2015-7884-kernel-infoleak-vulnerability-in-vivid_fb_ioctl.html)

---

# [CVE-2015-7885: Kernel Infoleak vulnerability in dgnc\_mgmt\_ioctl()](https://speirofr.appspot.com/cve-2015-7885-kernel-infoleak-vulnerability-in-dgnc_mgmt_ioctl.html)

by [speiro](https://speirofr.appspot.com/author/speiro/index.html) -

Oct 22, 2015

-
[CVE-2015-7885](https://speirofr.appspot.com/tag/cve-2015-7885/index.html), [security](https://speirofr.appspot.com/tag/security/index.html), [kernel](https://speirofr.appspot.com/tag/kernel/index.html), [infoleak](https://speirofr.appspot.com/tag/infoleak/index.html),

# Summary

| **CVE** | [CVE-2015-7885](http://web.nvd.nist.gov/view/vuln/search-results?query=CVE-2015-7885) |
| --- | --- |
| **Author** | [Salva PeirÃ³](http://speirofr.appspot.com) |
| **Date** | October 2015 - Discovery of the vulnerability. |
| **Impact** | The vulnerability discloses 16 bytes of kernel process stack. |
| **Affected Versions** | From linux-3.11.0-rc3 to linux-4.3-rc6 |
| **Bug Timespan** | 2 years: from 2013 to 2015 commit [0b99d58902dd82fa51216eb8e0d6ddd8c43e90e4](http://git.kernel.org/cgit/linux/kernel/git/next/linux-next.git/commit/?id=0b99d58902dd82fa51216eb8e0d6ddd8c43e90e4) |
| **Patch fix** | commit [4b6184336ebb5c8dc1eae7f7ab46ee608a748b05](http://git.kernel.org/cgit/linux/kernel/git/next/linux-next.git/commit/?id=4b6184336ebb5c8dc1eae7f7ab46ee608a748b05) |

# Description

The dgnc\_mgmt\_ioctl() code fails to initialize the 16 reserved bytes of
struct digi\_dinfo after the ->dinfo\_nboards member. Add an explicit
memset(0) before filling the structure to avoid the info leak.

# The patch fixing the Infoleak

After verification the patch that fixes the vulnerability
has been â¦

[more ...](https://speirofr.appspot.com/cve-2015-7885-kernel-infoleak-vulnerability-in-dgnc_mgmt_ioctl.html)

---

# [CVE-2014-1739: Kernel Infoleak vulnerability in media\_enum\_entities()](https://speirofr.appspot.com/cve-2014-1739-kernel-infoleak-vulnerability-in-media_enum_entities.html)

by [speiro](https://speirofr.appspot.com/author/speiro/index.html) -

Apr 28, 2014

-
[CVE-2014-1739](https://speirofr.appspot.com/tag/cve-2014-1739/index.html), [security](https://speirofr.appspot.com/tag/security/index.html), [kernel](https://speirofr.appspot.com/tag/kernel/index.html), [infoleak](https://speirofr.appspot.com/tag/infoleak/index.html),

# Summary

| **CVE** | [CVE-2014-1739](http://web.nvd.nist.gov/view/vuln/search-results?query=CVE-2014-1739) |
| --- | --- |
| **Author** | [Salva PeirÃ³](http://speirofr.appspot.com) |
| **Date** | April 2014 - Discovery of the vulnerability. |
| **Impact** | The vulnerability discloses 200 bytes of kernel process stack. |
| **Affected Versions** | From linux-2.6.38 to linux-3.15-rc3 |
| **Bug Timespan** | 3 years: 2011-03-23 to 2014-04-29 commit [1651333b](https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/commit/drivers/media/media-device.c?id=1651333b09743887bc2dd3d158a11853a2be3fe7) |

# Description

During a code review of the kernel sources we found an infoleak vulnerability in the
ioctl `media_enum_entities()` that allows to disclose 200 bytes the kernel process' stack.
The vulnerability is exploitable on versions up to `linux-3.15-rc3` by local
users with read access to `/dev/media0`.
Linux distributions ship with `chmod â¦`

[more ...](https://speirofr.appspot.com/cve-2014-1739-kernel-infoleak-vulnerability-in-media_enum_entities.html)

---

## Categories

* [CVEs](https://speirofr.appspot.com/category/cves/index.html)
* [Infoleaks](https://speirofr.appspot.com/category/infoleaks/index.html)
* [Learning](https://speirofr.appspot.com/category/learning/index.html)
* [Techniques](https://speirofr.appspot.com/category/techniques/index.html)

## Activity

* [SPADV-2018-01](/files/advisory/SPADV-2018-01.md)
* [CVE-2016-3178](/files/advisory/SPADV-2016-02.md)
* [CVE-2015-7885](/tag/cve-2015-7885/)
* [CVE-2015-7884](/tag/cve-2015-7884/)
* [CVE-2014-1739](/tag/cve-2014-1739/)
* [CVE-2014-1446](/tag/cve-2014-1446/)
* [CVE-2014-1445](/tag/cve-2014-1445/)

## Contact

* [Linkedin](https://www.linkedin.com/in/speiro)
* [ResearchGate](https://www.researchgate.net/profile/Salva_Peiro)
* [Atom feed](https://speirofr.appspot.com/feeds/atom.xml)



=== Content from lists.opensuse.org_b05cc608_20250124_182025.html ===


[![openSUSE](https://static.opensuse.org/favicon.svg)
Mailing Lists](/archives/ "openSUSE Mailing Lists")

[Sign In](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/IVLGTL4UWP57DODM6DUC65QEA3NTD35J/)
[Sign Up](/accounts/signup/?next=/archives/list/security-announce%40lists.opensuse.org/message/IVLGTL4UWP57DODM6DUC65QEA3NTD35J/)

[Manage this list](/manage/lists/security-announce.lists.opensuse.org/)
[Sign In](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/IVLGTL4UWP57DODM6DUC65QEA3NTD35J/)
[Sign Up](/accounts/signup/?next=/archives/list/security-announce%40lists.opensuse.org/message/IVLGTL4UWP57DODM6DUC65QEA3NTD35J/)

×
#### Keyboard Shortcuts

### Thread View

* `j`: Next unread message
* `k`: Previous unread message
* `j a`: Jump to all threads* `j l`: Jump to MailingList overview

[thread](/archives/list/security-announce%40lists.opensuse.org/thread/IVLGTL4UWP57DODM6DUC65QEA3NTD35J/#IVLGTL4UWP57DODM6DUC65QEA3NTD35J)

# [security-announce] SUSE-SU-2014:1319-1: important: Security update for Linux kernel

![](https://seccdn.libravatar.org/avatar/099a17325bdf082b643d1a6bbacde279.jpg?s=120&d=mm&r=g)
## [opensuse-security＠opensuse.org](/archives/users/1b72def497ef4503896cd7a5fe9fb8e0/ "See the profile for opensuse-security＠opensuse.org")

22 Oct
2014

22 Oct
'14

23:08

SUSE Security Update: Security update for Linux kernel
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
Announcement ID: SUSE-SU-2014:1319-1
Rating: important
References: #774818 #806990 #816708 #826486 #832309 #833820
#849123 #855657 #859840 #860441 #860593 #863586
#866130 #866615 #866864 #866911 #869055 #869934
#870161 #871134 #871797 #876017 #876055 #876114
#876590 #879304 #879921 #880344 #880370 #880892
#881051 #881759 #882317 #882639 #882804 #882900
#883096 #883376 #883518 #883724 #884333 #884582
#884725 #884767 #885262 #885382 #885422 #885509
#886840 #887082 #887418 #887503 #887608 #887645
#887680 #888058 #888105 #888591 #888607 #888847
#888849 #888968 #889061 #889173 #889451 #889614
#889727 #890297 #890426 #890513 #890526 #891087
#891259 #891281 #891619 #891746 #892200 #892490
#892723 #893064 #893496 #893596 #894200 #895221
#895608 #895680 #895983 #896689
Cross-References: CVE-2013-1979 CVE-2014-1739 CVE-2014-2706
CVE-2014-3153 CVE-2014-4027 CVE-2014-4171
CVE-2014-4508 CVE-2014-4667 CVE-2014-4943
CVE-2014-5077 CVE-2014-5471 CVE-2014-5472
CVE-2014-6410
Affected Products:
SUSE Linux Enterprise Server 11 SP3 for VMware
SUSE Linux Enterprise Server 11 SP3
SUSE Linux Enterprise Real Time Extension 11 SP3
SUSE Linux Enterprise High Availability Extension 11 SP3
SUSE Linux Enterprise Desktop 11 SP3
SLE 11 SERVER Unsupported Extras
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
An update that solves 13 vulnerabilities and has 75 fixes
is now available. It includes two new package versions.
Description:
The SUSE Linux Enterprise 11 Service Pack 3 kernel has been updated to fix
various bugs and security issues.
The following security bugs have been fixed:
\*
CVE-2014-1739: The media\_device\_enum\_entities function in
drivers/media/media-device.c in the Linux kernel before 3.14.6 does not
initialize a certain data structure, which allows local users to
obtain sensitive information from kernel memory by leveraging
/dev/media0 read access for a MEDIA\_IOC\_ENUM\_ENTITIES ioctl call
(bnc#882804).
\*
CVE-2014-4171: mm/shmem.c in the Linux kernel through 3.15.1 does
not properly implement the interaction between range notification and hole
punching, which allows local users to cause a denial of service (i\_mutex
hold) by using the mmap system call to access a hole, as demonstrated by
interfering with intended shmem activity by blocking completion of (1) an
MADV\_REMOVE madvise call or (2) an FALLOC\_FL\_PUNCH\_HOLE fallocate call
(bnc#883518).
\*
CVE-2014-4508: arch/x86/kernel/entry\_32.S in the Linux kernel
through 3.15.1 on 32-bit x86 platforms, when syscall auditing is enabled
and the sep CPU feature flag is set, allows local users to cause a denial
of service (OOPS and system crash) via an invalid syscall number, as
demonstrated by number 1000 (bnc#883724).
\*
CVE-2014-4667: The sctp\_association\_free function in
net/sctp/associola.c in the Linux kernel before 3.15.2 does not properly
manage a certain backlog value, which allows remote attackers to cause a
denial of service (socket outage) via a crafted SCTP packet (bnc#885422).
\*
CVE-2014-4943: The PPPoL2TP feature in net/l2tp/l2tp\_ppp.c in the
Linux kernel through 3.15.6 allows local users to gain privileges by
leveraging data-structure differences between an l2tp socket and an inet
socket (bnc#887082).
\*
CVE-2014-5077: The sctp\_assoc\_update function in
net/sctp/associola.c in the Linux kernel through 3.15.8, when SCTP
authentication is enabled, allows remote attackers to cause a denial of
service (NULL pointer dereference and OOPS) by starting to establish an
association between two endpoints immediately after an exchange of INIT
and INIT ACK chunks to establish an earlier association between these
endpoints in the opposite direction (bnc#889173).
\*
CVE-2014-5471: Stack consumption vulnerability in the
parse\_rock\_ridge\_inode\_internal function in fs/isofs/rock.c in the Linux
kernel through 3.16.1 allows local users to cause a denial of service
(uncontrolled recursion, and system crash or reboot) via a crafted iso9660
image with a CL entry referring to a directory entry that has a CL entry.
(bnc#892490)
\*
CVE-2014-5472: The parse\_rock\_ridge\_inode\_internal function in
fs/isofs/rock.c in the Linux kernel through 3.16.1 allows local users to
cause a denial of service (unkillable mount process) via a crafted iso9660
image with a self-referential CL entry. (bnc#892490)
\*
CVE-2014-2706: Race condition in the mac80211 subsystem in the Linux
kernel before 3.13.7 allows remote attackers to cause a denial of service
(system crash) via network traffic that improperly interacts with the
WLAN\_STA\_PS\_STA state (aka power-save mode), related to sta\_info.c and
tx.c. (bnc#871797)
\*
CVE-2014-4027: The rd\_build\_device\_space function in
drivers/target/target\_core\_rd.c in the Linux kernel before 3.14 does not
properly initialize a certain data structure, which allows local users to
obtain sensitive information from ramdisk\_mcp memory by leveraging access
to a SCSI initiator. (bnc#882639)
\*
CVE-2014-3153 The futex\_requeue function in kernel/futex.c in the
Linux kernel through 3.14.5 does not ensure that calls have two different
futex addresses, which allows local users to gain privileges via a crafted
FUTEX\_REQUEUE command that facilitates unsafe waiter modification.
(bnc#880892)
\*
CVE-2014-6410: Avoid infinite loop when processing indirect ICBs
(bnc#896689)
The following non-security bugs have been fixed:
\* ACPI / PAD: call schedule() when need\_resched() is true (bnc#866911).
\* ACPI: Fix bug when ACPI reset register is implemented in system
memory (bnc#882900).
\* ACPI: Limit access to custom\_method (bnc#884333).
\* ALSA: hda - Enabling Realtek ALC 671 codec (bnc#891746).
\* Add option to automatically enforce module signatures when in Secure
Boot mode (bnc#884333).
\* Add secure\_modules() call (bnc#884333).
\* Add wait\_on\_atomic\_t() and wake\_up\_atomic\_t() (bnc#880344).
\* Backported new patches of Lock down functions for UEFI secure boot
Also updated series.conf and removed old patches.
\* Btrfs: Return EXDEV for cross file system snapshot.
\* Btrfs: abort the transaction when we does not find our extent ref.
\* Btrfs: avoid warning bomb of btrfs\_invalidate\_inodes.
\* Btrfs: cancel scrub on transaction abortion.
\* Btrfs: correctly set profile flags on seqlock retry.
\* Btrfs: does not check nodes for extent items.
\* Btrfs: fix a possible deadlock between scrub and transaction
committing.
\* Btrfs: fix corruption after write/fsync failure + fsync + log
recovery (bnc#894200).
\* Btrfs: fix csum tree corruption, duplicate and outdated checksums
(bnc#891619).
\* Btrfs: fix double free in find\_lock\_delalloc\_range.
\* Btrfs: fix possible memory leak in btrfs\_create\_tree().
\* Btrfs: fix use of uninit "ret" in end\_extent\_writepage().
\* Btrfs: free delayed node outside of root->inode\_lock (bnc#866864).
\* Btrfs: make DEV\_INFO ioctl available to anyone.
\* Btrfs: make FS\_INFO ioctl available to anyone.
\* Btrfs: make device scan less noisy.
\* Btrfs: make sure there are not any read requests before stopping
workers.
\* Btrfs: more efficient io tree navigation on wait\_extent\_bit.
\* Btrfs: output warning instead of error when loading free space cache
failed.
\* Btrfs: retrieve more info from FS\_INFO ioctl.
\* Btrfs: return EPERM when deleting a default subvolume (bnc#869934).
\* Btrfs: unset DCACHE\_DISCONNECTED when mounting default subvol
(bnc#866615).
\* Btrfs: use right type to get real comparison.
\* Btrfs: wake up @scrub\_pause\_wait as much as we can.
\* Btrfs: wake up transaction thread upon remount.
\* CacheFiles: Add missing retrieval completions (bnc#880344).
\* CacheFiles: Does not try to dump the index key if the cookie has
been cleared (bnc#880344).
\* CacheFiles: Downgrade the requirements passed to the allocator
(bnc#880344).
\* CacheFiles: Fix the marking of cached pages (bnc#880344).
\* CacheFiles: Implement invalidation (bnc#880344).
\* CacheFiles: Make some debugging statements conditional (bnc#880344).
\* Drivers: hv: util: Fix a bug in the KVP code (bnc#886840).
\* Drivers: hv: vmbus: Fix a bug in the channel callback dispatch code
(bnc#886840).
\* FS-Cache: Add transition to handle invalidate immediately after
lookup (bnc#880344).
\* FS-Cache: Check that there are no read ops when cookie relinquished
(bnc#880344).
\* FS-Cache: Clear remaining page count on retrieval cancellation
(bnc#880344).
\* FS-Cache: Convert the object event ID #defines into an enum
(bnc#880344).
\* FS-Cache: Does not sleep in page release if \_\_GFP\_FS is not set
(bnc#880344).
\* FS-Cache: Does not use spin\_is\_locked() in assertions (bnc#880344).
\* FS-Cache: Exclusive op submission can BUG if there is been an I/O
error (bnc#880344).
\* FS-Cache: Fix \_\_wait\_on\_atomic\_t() to call the action func if the
counter != 0 (bnc#880344).
\* FS-Cache: Fix object state machine to have separate work and wait
states (bnc#880344).
\* FS-Cache: Fix operation state management and accounting (bnc#880344).
\* FS-Cache: Fix signal handling during waits (bnc#880344).
\* FS-Cache: Initialise the object event mask with the calculated mask
(bnc#880344).
\* FS-Cache: Limit the number of I/O error reports for a cache
(bnc#880344).
\* FS-Cache: Make cookie relinquishment wait for outstanding reads
(bnc#880344).
\* FS-Cache: Mark cancellation of in-progress operation (bnc#880344).
\* FS-Cache: One of the write operation paths doeses not set the object
state (bnc#880344).
\* FS-Cache: Provide proper invalidation (bnc#880344).
\* FS-Cache: Simplify cookie retention for fscache\_objects, fixing oops
(bnc#880344).
\* FS-Cache: The retrieval remaining-pages counter needs to be atomic\_t
(bnc#880344).
\* FS-Cache: Uninline fscache\_object\_init() (bnc#880344).
\* FS-Cache: Wrap checks on object state (bnc#880344).
\* HID: usbhid: add always-poll quirk (bnc#888607).
\* HID: usbhid: enable always-poll quirk for Elan Touchscreen
(bnc#888607).
\* IB/iser: Add TIMEWAIT\_EXIT event handling (bnc#890297).
\* Ignore "flags" change to event\_constraint (bnc#876114).
\* Ignore data\_src/weight changes to perf\_sample\_data (bnc#876114).
\* NFS: Allow more operations in an NFSv4.1 request (bnc#890513).
\* NFS: Clean up helper function nfs4\_select\_rw\_stateid() (bnc#888968).
\* NFS: Does not copy read delegation stateids in setattr (bnc#888968).
\* NFS: Does not use a delegation to open a file when returning that
delegation (bnc#888968, bnc#892200, bnc#893596, bnc#893496)
\* NFS: Fixes for NFS RCU-walk support in line with code going upstream
\* NFS: Use FS-Cache invalidation (bnc#880344).
\* NFS: allow lockless access to access\_cache (bnc#866130).
\* NFS: avoid mountpoint being displayed as " (deleted)" in
/proc/mounts (bnc#888591).
\* NFS: nfs4\_do\_open should add negative results to the dcache
(bnc#866130).
\* NFS: nfs\_migrate\_page() does not wait for FS-Cache to finish with a
page (bnc#880344).
\* NFS: nfs\_open\_revalidate: only evaluate parent if it will be used
(bnc#866130).
\* NFS: prepare for RCU-walk support but pushing tests later in code
(bnc#866130).
\* NFS: support RCU\_WALK in nfs\_permission() (bnc#866130).
\* NFS: teach nfs\_lookup\_verify\_inode to handle LOOKUP\_RCU (bnc#866130).
\* NFS: teach nfs\_neg\_need\_reval to understand LOOKUP\_RCU (bnc#866130).
\* NFSD: Does not hand out delegations for 30 seconds after recalling
them (bnc#880370).
\* NFSv4 set open access operation call flag in nfs4\_init\_opendata\_res
(bnc#888968, bnc#892200, bnc#893596, bnc#893496).
\* NFSv4: Add a helper for encoding opaque data (bnc#888968).
\* NFSv4: Add a helper for encoding stateids (bnc#888968).
\* NFSv4: Add helpers for basic copying of stateids (bnc#888968).
\* NFSv4: Clean up nfs4\_select\_rw\_stateid() (bnc#888968).
\* NFSv4: Fix the return value of nfs4\_select\_rw\_stateid (bnc#888968).
\* NFSv4: Rename nfs4\_copy\_stateid() (bnc#888968).
\* NFSv4: Resend the READ/WRITE RPC call if a stateid change causes an
error (bnc#888968).
\* NFSv4: Simplify the struct nfs4\_stateid (bnc#888968).
\* NFSv4: The stateid must remain the same for replayed RPC calls
(bnc#888968).
\* NFSv4: nfs4\_stateid\_is\_current should return "true" for an invalid
stateid (bnc#888968).
\* One more fix for kABI breakage.
\* PCI: Lock down BAR access when module security is enabled
(bnc#884333).
\* PCI: enable MPS "performance" setting to properly handle bridge MPS
(bnc#883376).
\* PM / Hibernate: Add memory\_rtree\_find\_bit function (bnc#860441).
\* PM / Hibernate: Create a Radix-Tree to store memory bitmap
(bnc#860441).
\* PM / Hibernate: Implement position keeping in radix tree
(bnc#860441).
\* PM / Hibernate: Iterate over set bits instead of PFNs in
swsusp\_free() (bnc#860441).
\* PM / Hibernate: Remove the old memory-bitmap implementation
(bnc#860441).
\* PM / Hibernate: Touch Soft Lockup Watchdog in rtree\_next\_node
(bnc#860441).
\* Restrict /dev/mem and /dev/kmem when module loading is restricted
(bnc#884333).
\* Reuse existing "state" field to indicate PERF\_X86\_EVENT\_PEBS\_LDLAT
(bnc#876114).
\* USB: handle LPM errors during device suspend correctly (bnc#849123).
\* Update kabi files to reflect fscache change (bnc#880344)
\* Update x86\_64 config files: re-enable SENSORS\_W83627EHF (bnc#891281)
\* VFS: Make more complete truncate operation available to CacheFiles
(bnc#880344).
\* [FEAT NET1222] ib\_uverbs: Allow explicit mmio trigger (FATE#83366,
ltc#83367).
\* acpi: Ignore acpi\_rsdp kernel parameter when module loading is
restricted (bnc#884333).
\* af\_iucv: correct cleanup if listen backlog is full (bnc#885262,
LTC#111728).
\* asus-wmi: Restrict debugfs interface when module loading is
restricted (bnc#884333).
\* autofs4: allow RCU-walk to walk through autofs4 (bnc#866130).
\* autofs4: avoid taking fs\_lock during rcu-walk (bnc#866130).
\* autofs4: does not take spinlock when not needed in
autofs4\_lookup\_expiring (bnc#866130).
\* autofs4: factor should\_expire() out of autofs4\_expire\_indirect
(bnc#866130).
\* autofs4: make "autofs4\_can\_expire" idempotent (bnc#866130).
\* autofs4: remove a redundant assignment (bnc#866130).
\* autofs: fix lockref lookup (bnc#888591).
\* be2net: add dma\_mapping\_error() check for dma\_map\_page()
(bnc#881759).
\* block: add cond\_resched() to potentially long running ioctl discard
loop (bnc#884725).
\* block: fix race between request completion and timeout handling
(bnc#881051).
\* cdc-ether: clean packet filter upon probe (bnc#876017).
\* cpuset: Fix memory allocator deadlock (bnc#876590).
\* crypto: Allow CRYPTO\_FIPS without MODULE\_SIGNATURES. Not all archs
have them, but some are FIPS certified, with some kernel support.
\* crypto: fips - only panic on bad/missing crypto mod signatures
(bnc#887503).
\* crypto: testmgr - allow aesni-intel and ghash\_clmulni-intel in fips
mode (bnc#889451).
\* dasd: validate request size before building CCW/TCW (bnc#891087,
LTC#114068).
\* dm mpath: fix race condition between multipath\_dtr and pg\_init\_done
(bnc#826486).
\* dm-mpath: fix panic on deleting sg device (bnc#870161).
\* drm/ast: AST2000 cannot be detected correctly (bnc#895983).
\* drm/ast: Actually load DP501 firmware when required (bnc#895608
bnc#871134).
\* drm/ast: Add missing entry to dclk\_table[].
\* drm/ast: Add reduced non reduced mode parsing for wide screen mode
(bnc#892723).
\* drm/ast: initial DP501 support (v0.2) (bnc#871134).
\* drm/ast: open key before detect chips (bnc#895983).
\* drm/i915: Fix up cpt pixel multiplier enable sequence (bnc#879304).
\* drm/i915: Only apply DPMS to the encoder if enabled (bnc#893064).
\* drm/i915: clear the FPGA\_DBG\_RM\_NOCLAIM bit at driver init
(bnc#869055).
\* drm/i915: create functions for the "unclaimed register" checks
(bnc#869055).
\* drm/i915: use FPGA\_DBG for the "unclaimed register" checks
(bnc#869055).
\* drm/mgag200: Initialize data needed to map fbdev memory (bnc
#806990).
\* e1000e: enable support for new device IDs (bnc#885509).
\* fs/fscache: remove spin\_lock() from the condition in while()
(bnc#880344).
\* hibernate: Disable in a signed modules environment (bnc#884333).
\* hugetlb: does not use ERR\_PTR with VM\_FAULT\* values
\* ibmvscsi: Abort init sequence during error recovery (bnc#885382).
\* ibmvscsi: Add memory barriers for send / receive (bnc#885382).
\* inet: add a redirect generation id in inetpeer (bnc#860593).
\* inetpeer: initialize ->redirect\_genid in inet\_getpeer() (bnc#860593).
\* ipv6: tcp: fix tcp\_v6\_conn\_request() (bnc#887645).
\* kabi: hide bnc#860593 changes of struct inetpeer\_addr\_base
(bnc#860593).
\* kernel: 3215 tty hang (bnc#891087, LTC#114562).
\* kernel: fix data corruption when reading /proc/sysinfo (bnc#891087,
LTC#114480).
\* kernel: fix kernel oops with load of fpc register (bnc#889061,
LTC#113596).
\* kernel: sclp console tty reference counting (bnc#891087, LTC#115466).
\* kexec: Disable at runtime if the kernel enforces module loading
restrictions (bnc#884333).
\* md/raid6: avoid data corruption during recovery of double-degraded
RAID6.
\* memcg, vmscan: Fix forced scan of anonymous pages (memory reclaim
fix).
\* memcg: do not expose uninitialized mem\_cgroup\_per\_node to world
(bnc#883096).
\* mm, hugetlb: add VM\_NORESERVE check in vma\_has\_reserves()
\* mm, hugetlb: change variable name reservations to resv
\* mm, hugetlb: decrement reserve count if VM\_NORESERVE alloc page cache
\* mm, hugetlb: defer freeing pages when gathering surplus pages
\* mm, hugetlb: do not use a page in page cache for cow optimization
\* mm, hugetlb: fix and clean-up node iteration code to alloc or free
\* mm, hugetlb: fix race in region tracking
\* mm, hugetlb: fix subpool accounting handling
\* mm, hugetlb: improve page-fault scalability
\* mm, hugetlb: improve, cleanup resv\_map parameters
\* mm, hugetlb: move up the code which check availability of free huge
page
\* mm, hugetlb: protect reserved pages when soft offlining a hugepage
\* mm, hugetlb: remove decrement\_hugepage\_resv\_vma()
\* mm, hugetlb: remove redundant list\_empty check in
gather\_surplus\_pages()
\* mm, hugetlb: remove resv\_map\_put
\* mm, hugetlb: remove useless check about mapping type
\* mm, hugetlb: return a reserved page to a reserved pool if failed
\* mm, hugetlb: trivial commenting fix
\* mm, hugetlb: unify region structure handling
\* mm, hugetlb: unify region structure handling kabi
\* mm, hugetlb: use long vars instead of int in region\_count() (Hugetlb
Fault Scalability).
\* mm, hugetlb: use vma\_resv\_map() map types
\* mm, oom: fix badness score underflow (bnc#884582, bnc#884767).
\* mm, oom: normalize oom scores to oom\_score\_adj scale only for
userspace (bnc#884582, bnc#884767).
\* mm, thp: do not allow thp faults to avoid cpuset restrictions
(bnc#888849).
\* net/mlx4\_core: Load higher level modules according to ports type
(bnc#887680).
\* net/mlx4\_core: Load the IB driver when the device supports IBoE
(bnc#887680).
\* net/mlx4\_en: Fix a race between napi poll function and RX ring
cleanup (bnc#863586).
\* net/mlx4\_en: Fix selftest failing on non 10G link speed (bnc#888058).
\* net: fix checksumming features handling in output path (bnc#891259).
\* pagecache\_limit: batch large nr\_to\_scan targets (bnc#895221).
\* pagecachelimit: reduce lru\_lock congestion for heavy parallel
reclaim fix (bnc#895680).
\* perf/core: Add weighted samples (bnc#876114).
\* perf/x86: Add flags to event constraints (bnc#876114).
\* perf/x86: Add memory profiling via PEBS Load Latency (bnc#876114).
\* perf: Add generic memory sampling interface (bnc#876114).
\* qla2xxx: Avoid escalating the SCSI error handler if the command is
not found in firmware (bnc#859840).
\* qla2xxx: Clear loop\_id for ports that are marked lost during fabric
scanning (bnc#859840).
\* qla2xxx: Does not check for firmware hung during the reset context
for ISP82XX (bnc#859840).
\* qla2xxx: Issue abort command for outstanding commands during cleanup
when only firmware is alive (bnc#859840).
\* qla2xxx: Reduce the time we wait for a command to complete during
SCSI error handling (bnc#859840).
\* qla2xxx: Set host can\_queue value based on available resources
(bnc#859840).
\* restore smp\_mb() in unlock\_new\_inode() (bnc#890526).
\* s390/pci: introduce lazy IOTLB flushing for DMA unmap (bnc#889061,
LTC#113725).
\* sched: fix the theoretical signal\_wake\_up() vs schedule() race
(bnc#876055).
\* sclp\_vt220: Enable integrated ASCII console per default (bnc#885262,
LTC#112035).
\* scsi\_dh: use missing accessor "scsi\_device\_from\_queue" (bnc#889614).
\* scsi\_transport\_fc: Cap dev\_loss\_tmo by fast\_io\_fail (bnc#887608).
\* scsiback: correct grant page unmapping.
\* scsiback: fix retry handling in \_\_report\_luns().
\* scsiback: free resources after error.
\* sunrpc/auth: allow lockless (rcu) lookup of credential cache
(bnc#866130).
\* supported.conf: remove external from drivers/net/veth (bnc#889727)
\* supported.conf: support net/sched/act\_police.ko (bnc#890426)
\* tcp: adapt selected parts of RFC 5682 and PRR logic (bnc#879921).
\* tg3: Change nvram command timeout value to 50ms (bnc#855657).
\* tg3: Override clock, link aware and link idle mode during NVRAM dump
(bnc#855657).
\* tg3: Set the MAC clock to the fastest speed during boot code load
(bnc#855657).
\* usb: Does not enable LPM if the exit latency is zero (bnc#832309).
\* usbcore: Does not log on consecutive debounce failures of the same
port (bnc#888105).
\* usbhid: fix PIXART optical mouse (bnc#888607).
\* uswsusp: Disable when module loading is restricted (bnc#884333).
\* vscsi: support larger transfer sizes (bnc#774818).
\* writeback: Do not sync data dirtied after sync start (bnc#833820).
\* x86 thermal: Delete power-limit-notification console messages
(bnc#882317).
\* x86 thermal: Disable power limit notification interrupt by default
(bnc#882317).
\* x86 thermal: Re-enable power limit notification interrupt by default
(bnc#882317).
\* x86, cpu hotplug: Fix stack frame warning in
check\_irq\_vectors\_for\_cpu\_disable() (bnc#887418).
\* x86/UV: Add call to KGDB/KDB from NMI handler (bnc#888847).
\* x86/UV: Add kdump to UV NMI handler (bnc#888847).
\* x86/UV: Add summary of cpu activity to UV NMI handler (bnc#888847).
\* x86/UV: Move NMI support (bnc#888847).
\* x86/UV: Update UV support for external NMI signals (bnc#888847).
\* x86/uv/nmi: Fix Sparse warnings (bnc#888847).
\* x86: Add check for number of available vectors before CPU down
(bnc#887418).
\* x86: Lock down IO port access when module security is enabled
(bnc#884333).
\* x86: Restrict MSR access when module loading is restricted
(bnc#884333).
Security Issues:
\* CVE-2013-1979
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-1979>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-1979%3E)
\* CVE-2014-1739
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-1739>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-1739%3E)
\* CVE-2014-2706
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-2706>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-2706%3E)
\* CVE-2014-4027
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-4027>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-4027%3E)
\* CVE-2014-4171
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-4171>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-4171%3E)
\* CVE-2014-4508
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-4508>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-4508%3E)
\* CVE-2014-4667
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-4667>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-4667%3E)
\* CVE-2014-4943
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-4943>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-4943%3E)
\* CVE-2014-5077
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-5077>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-5077%3E)
\* CVE-2014-5471
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-5471>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-5471%3E)
\* CVE-2014-5472
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-5472>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-5472%3E)
\* CVE-2014-3153
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-3153>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-3153%3E)
\* CVE-2014-6410
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-6410>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-6410%3E)
The SUSE Linux Enterprise 11 Service Pack 3 RealTime Extension kernel was
updated to fix various bugs and security issues.
Following security bugs were fixed: CVE-2013-1979: The scm\_set\_cred
function in include/net/scm.h in the Linux kernel before 3.8.11 uses
incorrect uid and gid values during credentials passing, which allows
local users to gain privileges via a crafted application (bnc#816708).
CVE-2014-1739: The media\_device\_enum\_entities function in
drivers/media/media-device.c in the Linux kernel before 3.14.6 does not
initialize a certain data structure, which allows local users to obtain
sensitive information from kernel memory by leveraging /dev/media0 read
access for a MEDIA\_IOC\_ENUM\_ENTITIES ioctl call (bnc#882804).
CVE-2014-4171: mm/shmem.c in the Linux kernel through 3.15.1 does not
properly implement the interaction between range notification and hole
punching, which allows local users to cause a denial of service (i\_mutex
hold) by using the mmap system call to access a hole, as demonstrated by
interfering with intended shmem activity by blocking completion of (1) an
MADV\_REMOVE madvise call or (2) an FALLOC\_FL\_PUNCH\_HOLE fallocate call
(bnc#883518).
CVE-2014-4508: arch/x86/kernel/entry\_32.S in the Linux kernel through
3.15.1 on 32-bit x86 platforms, when syscall auditing is enabled and the
sep CPU feature flag is set, allows local users to cause a denial of
service (OOPS and system crash) via an invalid syscall number, as
demonstrated by number 1000 (bnc#883724).
CVE-2014-4667: The sctp\_association\_free function in net/sctp/associola.c
in the Linux kernel before 3.15.2 does not properly manage a certain
backlog value, which allows remote attackers to cause a denial of service
(socket outage) via a crafted SCTP packet (bnc#885422).
CVE-2014-4943: The PPPoL2TP feature in net/l2tp/l2tp\_ppp.c in the Linux
kernel through 3.15.6 allows local users to gain privileges by leveraging
data-structure differences between an l2tp socket and an inet socket
(bnc#887082).
CVE-2014-5077: The sctp\_assoc\_update function in net/sctp/associola.c in
the Linux kernel through 3.15.8, when SCTP authentication is enabled,
allows remote attackers to cause a denial of service (NULL pointer
dereference and OOPS) by starting to establish an association between two
endpoints immediately after an exchange of INIT and INIT ACK chunks to
establish an earlier association between these endpoints in the opposite
direction (bnc#889173).
CVE-2014-5471: Stack consumption vulnerability in the
parse\_rock\_ridge\_inode\_internal function in fs/isofs/rock.c in the Linux
kernel through 3.16.1 allows local users to cause a denial of service
(uncontrolled recursion, and system crash or reboot) via a crafted iso9660
image with a CL entry referring to a directory entry that has a CL entry.
(bnc#892490)
CVE-2014-5472: The parse\_rock\_ridge\_inode\_internal function in
fs/isofs/rock.c in the Linux kernel through 3.16.1 allows local users to
cause a denial of service (unkillable mount process) via a crafted iso9660
image with a self-referential CL entry. (bnc#892490)
CVE-2014-2706: Race condition in the mac80211 subsystem in the Linux
kernel before 3.13.7 allows remote attackers to cause a denial of service
(system crash) via network traffic that improperly interacts with the
WLAN\_STA\_PS\_STA state (aka power-save mode), related to sta\_info.c and
tx.c. (bnc#871797)
CVE-2014-4027: The rd\_build\_device\_space function in
drivers/target/target\_core\_rd.c in the Linux kernel before 3.14 does not
properly initialize a certain data structure, which allows local users to
obtain sensitive information from ramdisk\_mcp memory by leveraging access
to a SCSI initiator. (bnc#882639)
CVE-2014-3153 The futex\_requeue function in kernel/futex.c in the Linux
kernel through 3.14.5 does not ensure that calls have two different futex
addresses, which allows local users to gain privileges via a crafted
FUTEX\_REQUEUE command that facilitates unsafe waiter modification.
(bnc#880892)
CVE-2014-6410: Avoid infinite loop when processing indirect ICBs
(bnc#896689)
The following non-security bugs were fixed: - ACPI / PAD: call schedule()
when need\_resched() is true (bnc#866911). - ACPI: Fix bug when ACPI reset
register is implemented in system memory (bnc#882900). - ACPI: Limit
access to custom\_method (bnc#884333). - ALSA: hda - Enabling Realtek ALC
671 codec (bnc#891746). - Add option to automatically enforce module
signatures when in Secure Boot mode (bnc#884333). - Add secure\_modules()
call (bnc#884333).
- Add wait\_on\_atomic\_t() and wake\_up\_atomic\_t() (bnc#880344). - Backported
new patches of Lock down functions for UEFI secure boot Also updated
series.conf and removed old patches. - Btrfs: Return EXDEV for cross
file system snapshot. - Btrfs: abort the transaction when we does not
find our extent ref. - Btrfs: avoid warning bomb of
btrfs\_invalidate\_inodes. - Btrfs: cancel scrub on transaction abortion.
- Btrfs: correctly set profile flags on seqlock retry. - Btrfs: does not
check nodes for extent items. - Btrfs: fix a possible deadlock between
scrub and transaction committing. - Btrfs: fix corruption after
write/fsync failure + fsync + log recovery (bnc#894200). - Btrfs: fix
csum tree corruption, duplicate and outdated checksums (bnc#891619). -
Btrfs: fix double free in find\_lock\_delalloc\_range. - Btrfs: fix
possible memory leak in btrfs\_create\_tree(). - Btrfs: fix use of uninit
"ret" in end\_extent\_writepage(). - Btrfs: free delayed node outside of
root->inode\_lock (bnc#866864). - Btrfs: make DEV\_INFO ioctl available to
anyone. - Btrfs: make FS\_INFO ioctl available to anyone. - Btrfs: make
device scan less noisy. - Btrfs: make sure there are not any read
requests before stopping workers. - Btrfs: more efficient io tree
navigation on wait\_extent\_bit. - Btrfs: output warning instead of error
when loading free space cache failed. - Btrfs: retrieve more info from
FS\_INFO ioctl. - Btrfs: return EPERM when deleting a default subvolume
(bnc#869934). - Btrfs: unset DCACHE\_DISCONNECTED when mounting default
subvol (bnc#866615).
- Btrfs: use right type to get real comparison. - Btrfs: wake up
@scrub\_pause\_wait as much as we can. - Btrfs: wake up transaction thread
upon remount. - CacheFiles: Add missing retrieval completions
(bnc#880344).
- CacheFiles: Does not try to dump the index key if the cookie has been
cleared (bnc#880344). - CacheFiles: Downgrade the requirements passed to
the allocator (bnc#880344). - CacheFiles: Fix the marking of cached
pages (bnc#880344). - CacheFiles: Implement invalidation (bnc#880344). -
CacheFiles: Make some debugging statements conditional (bnc#880344). -
Drivers: hv: util: Fix a bug in the KVP code (bnc#886840). - Drivers:
hv: vmbus: Fix a bug in the channel callback dispatch code (bnc#886840).
- FS-Cache: Add transition to handle invalidate immediately after lookup
(bnc#880344). - FS-Cache: Check that there are no read ops when cookie
relinquished (bnc#880344). - FS-Cache: Clear remaining page count on
retrieval cancellation (bnc#880344). - FS-Cache: Convert the object
event ID #defines into an enum (bnc#880344). - FS-Cache: Does not sleep
in page release if \_\_GFP\_FS is not set (bnc#880344). - FS-Cache: Does
not use spin\_is\_locked() in assertions (bnc#880344). - FS-Cache:
Exclusive op submission can BUG if there is been an I/O error
(bnc#880344). - FS-Cache: Fix \_\_wait\_on\_atomic\_t() to call the action
func if the counter != 0 (bnc#880344). - FS-Cache: Fix object state
machine to have separate work and wait states (bnc#880344). - FS-Cache:
Fix operation state management and accounting (bnc#880344). - FS-Cache:
Fix signal handling during waits (bnc#880344). - FS-Cache: Initialise
the object event mask with the calculated mask (bnc#880344). - FS-Cache:
Limit the number of I/O error reports for a cache (bnc#880344). -
FS-Cache: Make cookie relinquishment wait for outstanding reads
(bnc#880344). - FS-Cache: Mark cancellation of in-progress operation
(bnc#880344). - FS-Cache: One of the write operation paths doeses not
set the object state (bnc#880344). - FS-Cache: Provide proper
invalidation (bnc#880344). - FS-Cache: Simplify cookie retention for
fscache\_objects, fixing oops (bnc#880344). - FS-Cache: The retrieval
remaining-pages counter needs to be atomic\_t (bnc#880344). - FS-Cache:
Uninline fscache\_object\_init() (bnc#880344). - FS-Cache: Wrap checks on
object state (bnc#880344). - HID: usbhid: add always-poll quirk
(bnc#888607). - HID: usbhid: enable always-poll quirk for Elan
Touchscreen (bnc#888607). - IB/iser: Add TIMEWAIT\_EXIT event handling
(bnc#890297). - Ignore "flags" change to event\_constraint (bnc#876114). -
Ignore data\_src/weight changes to perf\_sample\_data (bnc#876114). - NFS:
Allow more
operations in an NFSv4.1 request (bnc#890513). - NFS: Clean up helper
function nfs4\_select\_rw\_stateid() (bnc#888968). - NFS: Does not copy read
delegation stateids in setattr (bnc#888968). - NFS: Does not use a
delegation to open a file when returning that delegation (bnc#888968,
bnc#892200, bnc#893596, bnc#893496) - NFS: Fixes for NFS RCU-walk support
in line with code going upstream - NFS: Use FS-Cache invalidation
(bnc#880344). - NFS: allow lockless access to access\_cache (bnc#866130).
- NFS: avoid mountpoint being displayed as " (deleted)" in /proc/mounts
(bnc#888591). - NFS: nfs4\_do\_open should add negative results to the
dcache (bnc#866130). - NFS: nfs\_migrate\_page() does not wait for FS-Cache
to finish with a page (bnc#880344). - NFS: nfs\_open\_revalidate: only
evaluate parent if it will be used (bnc#866130). - NFS: prepare for
RCU-walk support but pushing tests later in code (bnc#866130). - NFS:
support RCU\_WALK in nfs\_permission() (bnc#866130). - NFS: teach
nfs\_lookup\_verify\_inode to handle LOOKUP\_RCU (bnc#866130). - NFS: teach
nfs\_neg\_need\_reval to understand LOOKUP\_RCU (bnc#866130). - NFSD: Does
not hand out delegations for 30 seconds after recalling them
(bnc#880370). - NFSv4 set open access
operation call flag in nfs4\_init\_opendata\_res (bnc#888968, bnc#892200,
bnc#893596, bnc#893496). - NFSv4: Add a helper for encoding opaque data
(bnc#888968). - NFSv4: Add a helper for encoding stateids (bnc#888968). -
NFSv4: Add helpers for basic copying of stateids (bnc#888968). - NFSv4:
Clean up nfs4\_select\_rw\_stateid() (bnc#888968). - NFSv4: Fix the return
value of nfs4\_select\_rw\_stateid (bnc#888968). - NFSv4: Rename
nfs4\_copy\_stateid() (bnc#888968). - NFSv4: Resend the READ/WRITE RPC call
if a stateid change causes an error (bnc#888968). - NFSv4: Simplify the
struct nfs4\_stateid (bnc#888968). - NFSv4: The stateid must remain the
same for replayed RPC calls (bnc#888968). - NFSv4:
nfs4\_stateid\_is\_current should return "true" for an invalid stateid
(bnc#888968). - One more fix for kABI breakage. - PCI: Lock down BAR
access when module security is enabled (bnc#884333). - PCI: enable MPS
"performance" setting to properly handle bridge MPS (bnc#883376). - PM /
Hibernate: Add memory\_rtree\_find\_bit function (bnc#860441). - PM /
Hibernate: Create a Radix-Tree to store memory bitmap (bnc#860441). - PM
/ Hibernate: Implement position keeping in radix tree (bnc#860441). - PM
/ Hibernate: Iterate over set bits instead of PFNs in swsusp\_free()
(bnc#860441). - PM / Hibernate: Remove the old memory-bitmap
implementation (bnc#860441). - PM / Hibernate: Touch Soft Lockup Watchdog
in rtree\_next\_node (bnc#860441). - Restrict /dev/mem and /dev/kmem when
module loading is restricted (bnc#884333). - Reuse existing "state" field
to indicate PERF\_X86\_EVENT\_PEBS\_LDLAT (bnc#876114). - USB: handle LPM
errors during device suspend correctly (bnc#849123). - Update kabi files
to reflect fscache change (bnc#880344) - Update x86\_64 config files:
re-enable SENSORS\_W83627EHF (bnc#891281) - VFS: Make more complete
truncate operation available to CacheFiles (bnc#880344). - [FEAT NET1222]
ib\_uverbs: Allow explicit mmio trigger (FATE#83366, ltc#83367). - acpi:
Ignore acpi\_rsdp kernel parameter when module loading is restricted
(bnc#884333). - af\_iucv: correct cleanup if listen backlog is full
(bnc#885262, LTC#111728). - asus-wmi: Restrict debugfs interface when
module loading is restricted (bnc#884333). - autofs4: allow RCU-walk to
walk through autofs4 (bnc#866130). - autofs4: avoid taking fs\_lock during
rcu-walk (bnc#866130). - autofs4: does not take spinlock when not needed
in autofs4\_lookup\_expiring (bnc#866130). - autofs4: factor
should\_expire() out
of autofs4\_expire\_indirect (bnc#866130). - autofs4: make
"autofs4\_can\_expire" idempotent (bnc#866130). - autofs4: remove a
redundant assignment (bnc#866130). - autofs: fix lockref lookup
(bnc#888591). - be2net: add dma\_mapping\_error() check for dma\_map\_page()
(bnc#881759). - block: add cond\_resched() to potentially long running
ioctl discard loop (bnc#884725). - block: fix race between request
completion and timeout handling (bnc#881051). - cdc-ether: clean packet
filter upon probe (bnc#876017). - cpuset: Fix memory allocator deadlock
(bnc#876590). - crypto: Allow CRYPTO\_FIPS without MODULE\_SIGNATURES. Not
all archs have them, but some are FIPS certified, with some kernel
support. - crypto: fips
- only panic on bad/missing crypto mod signatures (bnc#887503). - crypto:
testmgr - allow aesni-intel and ghash\_clmulni-intel in fips mode
(bnc#889451). - dasd: validate request size before building CCW/TCW
(bnc#891087, LTC#114068). - dm mpath: fix race condition between
multipath\_dtr and pg\_init\_done (bnc#826486). - dm-mpath: fix panic on
deleting sg device (bnc#870161). - drm/ast: AST2000 cannot be detected
correctly (bnc#895983). - drm/ast: Actually load DP501 firmware when
required (bnc#895608 bnc#871134). - drm/ast: Add missing entry to
dclk\_table[]. - drm/ast: Add reduced non reduced mode parsing for wide
screen mode (bnc#892723). - drm/ast: initial DP501 support (v0.2)
(bnc#871134). - drm/ast: open key before detect chips (bnc#895983). -
drm/i915: Fix up cpt pixel multiplier enable sequence (bnc#879304). -
drm/i915: Only apply DPMS to the encoder if enabled (bnc#893064). -
drm/i915: clear the FPGA\_DBG\_RM\_NOCLAIM bit at driver init (bnc#869055).
- drm/i915: create functions for the "unclaimed register" checks
(bnc#869055). - drm/i915: use FPGA\_DBG for the "unclaimed register"
checks (bnc#869055). - drm/mgag200: Initialize data needed to map fbdev
memory (bnc #806990). - e1000e: enable support for new device IDs
(bnc#885509). - fs/fscache: remove spin\_lock() from the condition in
while() (bnc#880344).
- hibernate: Disable in a signed modules environment (bnc#884333). -
hugetlb: does not use ERR\_PTR with VM\_FAULT\* values - ibmvscsi: Abort
init sequence during error recovery (bnc#885382). - ibmvscsi: Add memory
barriers for send / receive (bnc#885382). - inet: add a redirect
generation id in inetpeer (bnc#860593). - inetpeer: initialize
->redirect\_genid in inet\_getpeer() (bnc#860593). - ipv6: tcp: fix
tcp\_v6\_conn\_request() (bnc#887645). - kabi: hide bnc#860593 changes of
struct inetpeer\_addr\_base (bnc#860593). - kernel: 3215 tty hang
(bnc#891087, LTC#114562). - kernel: fix data corruption when reading
/proc/sysinfo (bnc#891087, LTC#114480). - kernel: fix kernel oops with
load of fpc register (bnc#889061, LTC#113596).
- kernel: sclp console tty reference counting (bnc#891087, LTC#115466). -
kexec: Disable at runtime if the kernel enforces module loading
restrictions (bnc#884333). - md/raid6: avoid data corruption during
recovery of double-degraded RAID6. - memcg, vmscan: Fix forced scan of
anonymous pages (memory reclaim fix). - memcg: do not expose
uninitialized mem\_cgroup\_per\_node to world (bnc#883096). - mm, hugetlb:
add VM\_NORESERVE check in vma\_has\_reserves() - mm, hugetlb: change
variable name reservations to resv - mm, hugetlb: decrement reserve
count if VM\_NORESERVE alloc page cache - mm, hugetlb: defer freeing
pages when gathering surplus pages - mm, hugetlb: do not use a page in
page cache for cow optimization - mm, hugetlb: fix and clean-up node
iteration code to alloc or free - mm, hugetlb: fix race in region
tracking - mm, hugetlb: fix subpool accounting handling - mm, hugetlb:
improve page-fault scalability - mm, hugetlb: improve, cleanup resv\_map
parameters - mm, hugetlb: move up the code which check availability of
free huge page - mm, hugetlb: protect reserved pages when soft offlining
a hugepage - mm, hugetlb: remove decrement\_hugepage\_resv\_vma() - mm,
hugetlb: remove redundant list\_empty check in gather\_surplus\_pages() -
mm, hugetlb: remove resv\_map\_put - mm, hugetlb: remove useless check
about mapping type - mm, hugetlb: return a reserved page to a reserved
pool if failed - mm, hugetlb: trivial commenting fix - mm, hugetlb:
unify region structure handling - mm, hugetlb: unify region structure
handling kabi - mm, hugetlb: use long vars instead of int in
region\_count() (Hugetlb Fault Scalability). - mm, hugetlb: use
vma\_resv\_map() map types - mm, oom: fix badness score underflow
(bnc#884582, bnc#884767). - mm, oom: normalize oom scores to
oom\_score\_adj scale only for userspace (bnc#884582, bnc#884767). - mm,
thp: do not allow thp faults to avoid cpuset restrictions (bnc#888849). -
net/mlx4\_core: Load higher level modules according to ports type
(bnc#887680). - net/mlx4\_core: Load the IB driver when the device
supports IBoE (bnc#887680). - net/mlx4\_en: Fix a race between napi poll
function and RX ring cleanup (bnc#863586). - net/mlx4\_en: Fix selftest
failing on non 10G link speed (bnc#888058). - net: fix checksumming
features handling in
output path (bnc#891259). - pagecache\_limit: batch large nr\_to\_scan
targets (bnc#895221). - pagecachelimit: reduce lru\_lock congestion for
heavy parallel reclaim fix (bnc#895680). - perf/core: Add weighted
samples (bnc#876114). - perf/x86: Add flags to event constraints
(bnc#876114). - perf/x86: Add memory profiling via PEBS Load Latency
(bnc#876114). - perf: Add generic memory sampling interface (bnc#876114).
- qla2xxx: Avoid escalating the SCSI error handler if the command is not
found in firmware (bnc#859840). - qla2xxx: Clear loop\_id for ports that
are marked lost during fabric scanning (bnc#859840). - qla2xxx: Does not
check for firmware hung during the reset context for ISP82XX
(bnc#859840). - qla2xxx: Issue abort command for outstanding commands
during cleanup when only firmware is alive (bnc#859840). - qla2xxx:
Reduce the time we wait for a command to complete during SCSI error
handling (bnc#859840). - qla2xxx: Set host can\_queue value based on
available resources (bnc#859840). - restore smp\_mb() in
unlock\_new\_inode() (bnc#890526). - s390/pci: introduce lazy IOTLB
flushing for DMA unmap (bnc#889061, LTC#113725). - sched: fix the
theoretical signal\_wake\_up() vs schedule() race (bnc#876055). -
sclp\_vt220: Enable integrated ASCII console per default (bnc#885262,
LTC#112035). - scsi\_dh: use missing accessor "scsi\_device\_from\_queue"
(bnc#889614). - scsi\_transport\_fc: Cap dev\_loss\_tmo by fast\_io\_fail
(bnc#887608). - scsiback: correct grant page unmapping. - scsiback: fix
retry handling in \_\_report\_luns(). - scsiback: free resources after
error. - sunrpc/auth: allow lockless (rcu) lookup of credential cache
(bnc#866130). - supported.conf: remove external from drivers/net/veth
(bnc#889727) - supported.conf: support net/sched/act\_police.ko
(bnc#890426) - tcp: adapt selected parts of RFC 5682 and PRR logic
(bnc#879921). - tg3: Change nvram command timeout value to 50ms
(bnc#855657). - tg3: Override clock, link aware and link idle mode during
NVRAM dump (bnc#855657). - tg3: Set the MAC clock to the fastest speed
during boot code load (bnc#855657). - usb: Does not enable LPM if the
exit latency is zero (bnc#832309). - usbcore: Does not log on consecutive
debounce failures of the same port (bnc#888105). - usbhid: fix PIXART
optical mouse (bnc#888607). - uswsusp: Disable when module loading is
restricted (bnc#884333). - vscsi: support larger transfer sizes
(bnc#774818). - writeback: Do not sync data dirtied after sync start
(bnc#833820). - x86 thermal: Delete power-limit-notification console
messages (bnc#882317). - x86 thermal: Disable power limit notification
interrupt by default (bnc#882317). - x86 thermal: Re-enable power limit
notification interrupt by default (bnc#882317). - x86, cpu hotplug: Fix
stack frame warning in check\_irq\_vectors\_for\_cpu\_disable() (bnc#887418).
- x86/UV: Add call to KGDB/KDB from NMI handler (bnc#888847). - x86/UV:
Add kdump to UV NMI handler (bnc#888847). - x86/UV: Add summary of cpu
activity to UV NMI handler (bnc#888847). - x86/UV: Move NMI support
(bnc#888847). - x86/UV: Update UV support for external NMI signals
(bnc#888847). - x86/uv/nmi: Fix Sparse warnings (bnc#888847). - x86: Add
check for number
of available vectors before CPU down (bnc#887418). - x86: Lock down IO
port access when module security is enabled (bnc#884333). - x86: Restrict
MSR access when module loading is restricted (bnc#884333).
Security Issues:
\* CVE-2013-1979
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-1979>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-1979%3E)
\* CVE-2014-1739
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-1739>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-1739%3E)
\* CVE-2014-2706
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-2706>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-2706%3E)
\* CVE-2014-4027
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-4027>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-4027%3E)
\* CVE-2014-4171
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-4171>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-4171%3E)
\* CVE-2014-4508
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-4508>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-4508%3E)
\* CVE-2014-4667
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-4667>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-4667%3E)
\* CVE-2014-4943
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-4943>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-4943%3E)
\* CVE-2014-5077
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-5077>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-5077%3E)
\* CVE-2014-5471
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-5471>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-5471%3E)
\* CVE-2014-5472
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-5472>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-5472%3E)
\* CVE-2014-3153
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-3153>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-3153%3E)
\* CVE-2014-6410
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-6410>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-6410%3E)
Indications:
Everyone using the Real Time Linux Kernel on x86\_64 architecture should update.
Contraindications:
Indications:
Everyone using the Real Time Linux Kernel on x86\_64 architecture should update.
Special Instructions and Notes:
Please reboot the system after installing this update.
Patch Instructions:
To install this SUSE Security Update use YaST online\_update.
Alternatively you can run the command listed for your product:
- SUSE Linux Enterprise Server 11 SP3 for VMware:
zypper in -t patch slessp3-kernel-9746 slessp3-kernel-9751
- SUSE Linux Enterprise Server 11 SP3:
zypper in -t patch slessp3-kernel-9746 slessp3-kernel-9747 slessp3-kernel-9748 slessp3-kernel-9749 slessp3-kernel-9751
- SUSE Linux Enterprise Real Time Extension 11 SP3:
zypper in -t patch slertesp3-kernel-9772
- SUSE Linux Enterprise High Availability Extension 11 SP3:
zypper in -t patch slehasp3-kernel-9746 slehasp3-kernel-9747 slehasp3-kernel-9748 slehasp3-kernel-9749 slehasp3-kernel-9751
- SUSE Linux Enterprise Desktop 11 SP3:
zypper in -t patch sledsp3-kernel-9746 sledsp3-kernel-9751
To bring your system up-to-date, use "zypper patch".
Package List:
- SUSE Linux Enterprise Server 11 SP3 for VMware (i586 x86\_64) [New Version: 3.0.101]:
kernel-default-3.0.101-0.40.1
kernel-default-base-3.0.101-0.40.1
kernel-default-devel-3.0.101-0.40.1
kernel-source-3.0.101-0.40.1
kernel-syms-3.0.101-0.40.1
kernel-trace-3.0.101-0.40.1
kernel-trace-base-3.0.101-0.40.1
kernel-trace-devel-3.0.101-0.40.1
kernel-xen-devel-3.0.101-0.40.1
- SUSE Linux Enterprise Server 11 SP3 for VMware (i586) [New Version: 3.0.101]:
kernel-pae-3.0.101-0.40.1
kernel-pae-base-3.0.101-0.40.1
kernel-pae-devel-3.0.101-0.40.1
- SUSE Linux Enterprise Server 11 SP3 (i586 ia64 ppc64 s390x x86\_64) [New Version: 3.0.101]:
kernel-default-3.0.101-0.40.1
kernel-default-base-3.0.101-0.40.1
kernel-default-devel-3.0.101-0.40.1
kernel-source-3.0.101-0.40.1
kernel-syms-3.0.101-0.40.1
kernel-trace-3.0.101-0.40.1
kernel-trace-base-3.0.101-0.40.1
kernel-trace-devel-3.0.101-0.40.1
- SUSE Linux Enterprise Server 11 SP3 (i586 x86\_64) [New Version: 3.0.101]:
kernel-ec2-3.0.101-0.40.1
kernel-ec2-base-3.0.101-0.40.1
kernel-ec2-devel-3.0.101-0.40.1
kernel-xen-3.0.101-0.40.1
kernel-xen-base-3.0.101-0.40.1
kernel-xen-devel-3.0.101-0.40.1
xen-kmp-default-4.2.4\_04\_3.0.101\_0.40-0.7.3
- SUSE Linux Enterprise Server 11 SP3 (s390x) [New Version: 3.0.101]:
kernel-default-man-3.0.101-0.40.1
- SUSE Linux Enterprise Server 11 SP3 (ppc64) [New Version: 3.0.101]:
kernel-ppc64-3.0.101-0.40.1
kernel-ppc64-base-3.0.101-0.40.1
kernel-ppc64-devel-3.0.101-0.40.1
- SUSE Linux Enterprise Server 11 SP3 (i586) [New Version: 3.0.101]:
kernel-pae-3.0.101-0.40.1
kernel-pae-base-3.0.101-0.40.1
kernel-pae-devel-3.0.101-0.40.1
xen-kmp-pae-4.2.4\_04\_3.0.101\_0.40-0.7.3
- SUSE Linux Enterprise Real Time Extension 11 SP3 (x86\_64) [New Version: 3.0.101.rt130]:
cluster-network-kmp-rt-1.4\_3.0.101\_rt130\_0.28-2.27.99
cluster-network-kmp-rt\_trace-1.4\_3.0.101\_rt130\_0.28-2.27.99
drbd-kmp-rt-8.4.4\_3.0.101\_rt130\_0.28-0.22.65
drbd-kmp-rt\_trace-8.4.4\_3.0.101\_rt130\_0.28-0.22.65
iscsitarget-kmp-rt-1.4.20\_3.0.101\_rt130\_0.28-0.38.84
iscsitarget-kmp-rt\_trace-1.4.20\_3.0.101\_rt130\_0.28-0.38.84
kernel-rt-3.0.101.rt130-0.28.1
kernel-rt-base-3.0.101.rt130-0.28.1
kernel-rt-devel-3.0.101.rt130-0.28.1
kernel-rt\_trace-3.0.101.rt130-0.28.1
kernel-rt\_trace-base-3.0.101.rt130-0.28.1
kernel-rt\_trace-devel-3.0.101.rt130-0.28.1
kernel-source-rt-3.0.101.rt130-0.28.1
kernel-syms-rt-3.0.101.rt130-0.28.1
lttng-modules-kmp-rt-2.1.1\_3.0.101\_rt130\_0.28-0.11.75
lttng-modules-kmp-rt\_trace-2.1.1\_3.0.101\_rt130\_0.28-0.11.75
ocfs2-kmp-rt-1.6\_3.0.101\_rt130\_0.28-0.20.99
ocfs2-kmp-rt\_trace-1.6\_3.0.101\_rt130\_0.28-0.20.99
ofed-kmp-rt-1.5.4.1\_3.0.101\_rt130\_0.28-0.13.90
ofed-kmp-rt\_trace-1.5.4.1\_3.0.101\_rt130\_0.28-0.13.90
- SUSE Linux Enterprise High Availability Extension 11 SP3 (i586 ia64 ppc64 s390x x86\_64):
cluster-network-kmp-default-1.4\_3.0.101\_0.40-2.27.98
cluster-network-kmp-trace-1.4\_3.0.101\_0.40-2.27.98
gfs2-kmp-default-2\_3.0.101\_0.40-0.16.104
gfs2-kmp-trace-2\_3.0.101\_0.40-0.16.104
ocfs2-kmp-default-1.6\_3.0.101\_0.40-0.20.98
ocfs2-kmp-trace-1.6\_3.0.101\_0.40-0.20.98
- SUSE Linux Enterprise High Availability Extension 11 SP3 (i586 x86\_64):
cluster-network-kmp-xen-1.4\_3.0.101\_0.40-2.27.98
gfs2-kmp-xen-2\_3.0.101\_0.40-0.16.104
ocfs2-kmp-xen-1.6\_3.0.101\_0.40-0.20.98
- SUSE Linux Enterprise High Availability Extension 11 SP3 (ppc64):
cluster-network-kmp-ppc64-1.4\_3.0.101\_0.40-2.27.98
gfs2-kmp-ppc64-2\_3.0.101\_0.40-0.16.104
ocfs2-kmp-ppc64-1.6\_3.0.101\_0.40-0.20.98
- SUSE Linux Enterprise High Availability Extension 11 SP3 (i586):
cluster-network-kmp-pae-1.4\_3.0.101\_0.40-2.27.98
gfs2-kmp-pae-2\_3.0.101\_0.40-0.16.104
ocfs2-kmp-pae-1.6\_3.0.101\_0.40-0.20.98
- SUSE Linux Enterprise Desktop 11 SP3 (i586 x86\_64) [New Version: 3.0.101]:
kernel-default-3.0.101-0.40.1
kernel-default-base-3.0.101-0.40.1
kernel-default-devel-3.0.101-0.40.1
kernel-default-extra-3.0.101-0.40.1
kernel-source-3.0.101-0.40.1
kernel-syms-3.0.101-0.40.1
kernel-trace-devel-3.0.101-0.40.1
kernel-xen-3.0.101-0.40.1
kernel-xen-base-3.0.101-0.40.1
kernel-xen-devel-3.0.101-0.40.1
kernel-xen-extra-3.0.101-0.40.1
xen-kmp-default-4.2.4\_04\_3.0.101\_0.40-0.7.3
- SUSE Linux Enterprise Desktop 11 SP3 (i586) [New Version: 3.0.101]:
kernel-pae-3.0.101-0.40.1
kernel-pae-base-3.0.101-0.40.1
kernel-pae-devel-3.0.101-0.40.1
kernel-pae-extra-3.0.101-0.40.1
xen-kmp-pae-4.2.4\_04\_3.0.101\_0.40-0.7.3
- SLE 11 SERVER Unsupported Extras (i586 ia64 ppc64 s390x x86\_64):
kernel-default-extra-3.0.101-0.40.1
- SLE 11 SERVER Unsupported Extras (i586 x86\_64):
kernel-xen-extra-3.0.101-0.40.1
- SLE 11 SERVER Unsupported Extras (ppc64):
kernel-ppc64-extra-3.0.101-0.40.1
- SLE 11 SERVER Unsupported Extras (i586):
kernel-pae-extra-3.0.101-0.40.1
References:
<http://support.novell.com/security/cve/CVE-2013-1979.html>
<http://support.novell.com/security/cve/CVE-2014-1739.html>
<http://support.novell.com/security/cve/CVE-2014-2706.html>
<http://support.novell.com/security/cve/CVE-2014-3153.html>
<http://support.novell.com/security/cve/CVE-2014-4027.html>
<http://support.novell.com/security/cve/CVE-2014-4171.html>
<http://support.novell.com/security/cve/CVE-2014-4508.html>
<http://support.novell.com/security/cve/CVE-2014-4667.html>
<http://support.novell.com/security/cve/CVE-2014-4943.html>
<http://support.novell.com/security/cve/CVE-2014-5077.html>
<http://support.novell.com/security/cve/CVE-2014-5471.html>
<http://support.novell.com/security/cve/CVE-2014-5472.html>
<http://support.novell.com/security/cve/CVE-2014-6410.html>
<https://bugzilla.suse.com/show_bug.cgi?id=774818>
<https://bugzilla.suse.com/show_bug.cgi?id=806990>
<https://bugzilla.suse.com/show_bug.cgi?id=816708>
<https://bugzilla.suse.com/show_bug.cgi?id=826486>
<https://bugzilla.suse.com/show_bug.cgi?id=832309>
<https://bugzilla.suse.com/show_bug.cgi?id=833820>
<https://bugzilla.suse.com/show_bug.cgi?id=849123>
<https://bugzilla.suse.com/show_bug.cgi?id=855657>
<https://bugzilla.suse.com/show_bug.cgi?id=859840>
<https://bugzilla.suse.com/show_bug.cgi?id=860441>
<https://bugzilla.suse.com/show_bug.cgi?id=860593>
<https://bugzilla.suse.com/show_bug.cgi?id=863586>
<https://bugzilla.suse.com/show_bug.cgi?id=866130>
<https://bugzilla.suse.com/show_bug.cgi?id=866615>
<https://bugzilla.suse.com/show_bug.cgi?id=866864>
<https://bugzilla.suse.com/show_bug.cgi?id=866911>
<https://bugzilla.suse.com/show_bug.cgi?id=869055>
<https://bugzilla.suse.com/show_bug.cgi?id=869934>
<https://bugzilla.suse.com/show_bug.cgi?id=870161>
<https://bugzilla.suse.com/show_bug.cgi?id=871134>
<https://bugzilla.suse.com/show_bug.cgi?id=871797>
<https://bugzilla.suse.com/show_bug.cgi?id=876017>
<https://bugzilla.suse.com/show_bug.cgi?id=876055>
<https://bugzilla.suse.com/show_bug.cgi?id=876114>
<https://bugzilla.suse.com/show_bug.cgi?id=876590>
<https://bugzilla.suse.com/show_bug.cgi?id=879304>
<https://bugzilla.suse.com/show_bug.cgi?id=879921>
<https://bugzilla.suse.com/show_bug.cgi?id=880344>
<https://bugzilla.suse.com/show_bug.cgi?id=880370>
<https://bugzilla.suse.com/show_bug.cgi?id=880892>
<https://bugzilla.suse.com/show_bug.cgi?id=881051>
<https://bugzilla.suse.com/show_bug.cgi?id=881759>
<https://bugzilla.suse.com/show_bug.cgi?id=882317>
<https://bugzilla.suse.com/show_bug.cgi?id=882639>
<https://bugzilla.suse.com/show_bug.cgi?id=882804>
<https://bugzilla.suse.com/show_bug.cgi?id=882900>
<https://bugzilla.suse.com/show_bug.cgi?id=883096>
<https://bugzilla.suse.com/show_bug.cgi?id=883376>
<https://bugzilla.suse.com/show_bug.cgi?id=883518>
<https://bugzilla.suse.com/show_bug.cgi?id=883724>
<https://bugzilla.suse.com/show_bug.cgi?id=884333>
<https://bugzilla.suse.com/show_bug.cgi?id=884582>
<https://bugzilla.suse.com/show_bug.cgi?id=884725>
<https://bugzilla.suse.com/show_bug.cgi?id=884767>
<https://bugzilla.suse.com/show_bug.cgi?id=885262>
<https://bugzilla.suse.com/show_bug.cgi?id=885382>
<https://bugzilla.suse.com/show_bug.cgi?id=885422>
<https://bugzilla.suse.com/show_bug.cgi?id=885509>
<https://bugzilla.suse.com/show_bug.cgi?id=886840>
<https://bugzilla.suse.com/show_bug.cgi?id=887082>
<https://bugzilla.suse.com/show_bug.cgi?id=887418>
<https://bugzilla.suse.com/show_bug.cgi?id=887503>
<https://bugzilla.suse.com/show_bug.cgi?id=887608>
<https://bugzilla.suse.com/show_bug.cgi?id=887645>
<https://bugzilla.suse.com/show_bug.cgi?id=887680>
<https://bugzilla.suse.com/show_bug.cgi?id=888058>
<https://bugzilla.suse.com/show_bug.cgi?id=888105>
<https://bugzilla.suse.com/show_bug.cgi?id=888591>
<https://bugzilla.suse.com/show_bug.cgi?id=888607>
<https://bugzilla.suse.com/show_bug.cgi?id=888847>
<https://bugzilla.suse.com/show_bug.cgi?id=888849>
<https://bugzilla.suse.com/show_bug.cgi?id=888968>
<https://bugzilla.suse.com/show_bug.cgi?id=889061>
<https://bugzilla.suse.com/show_bug.cgi?id=889173>
<https://bugzilla.suse.com/show_bug.cgi?id=889451>
<https://bugzilla.suse.com/show_bug.cgi?id=889614>
<https://bugzilla.suse.com/show_bug.cgi?id=889727>
<https://bugzilla.suse.com/show_bug.cgi?id=890297>
<https://bugzilla.suse.com/show_bug.cgi?id=890426>
<https://bugzilla.suse.com/show_bug.cgi?id=890513>
<https://bugzilla.suse.com/show_bug.cgi?id=890526>
<https://bugzilla.suse.com/show_bug.cgi?id=891087>
<https://bugzilla.suse.com/show_bug.cgi?id=891259>
<https://bugzilla.suse.com/show_bug.cgi?id=891281>
<https://bugzilla.suse.com/show_bug.cgi?id=891619>
<https://bugzilla.suse.com/show_bug.cgi?id=891746>
<https://bugzilla.suse.com/show_bug.cgi?id=892200>
<https://bugzilla.suse.com/show_bug.cgi?id=892490>
<https://bugzilla.suse.com/show_bug.cgi?id=892723>
<https://bugzilla.suse.com/show_bug.cgi?id=893064>
<https://bugzilla.suse.com/show_bug.cgi?id=893496>
<https://bugzilla.suse.com/show_bug.cgi?id=893596>
<https://bugzilla.suse.com/show_bug.cgi?id=894200>
<https://bugzilla.suse.com/show_bug.cgi?id=895221>
<https://bugzilla.suse.com/show_bug.cgi?id=895608>
<https://bugzilla.suse.com/show_bug.cgi?id=895680>
<https://bugzilla.suse.com/show_bug.cgi?id=895983>
<https://bugzilla.suse.com/show_bug.cgi?id=896689>
[http://download.suse.com/patch/finder/?keywords=01c0bdf9329bf1fbfc034fc00953...](http://download.suse.com/patch/finder/?keywords=01c0bdf9329bf1fbfc034fc009538fd3)
[http://download.suse.com/patch/finder/?keywords=1439dbce4e4c9644db358f753192...](http://download.suse.com/patch/finder/?keywords=1439dbce4e4c9644db358f7531923fbe)
[http://download.suse.com/patch/finder/?keywords=1a668c9859986c2300a5f27acf2d...](http://download.suse.com/patch/finder/?keywords=1a668c9859986c2300a5f27acf2d3be9)
[http://download.suse.com/patch/finder/?keywords=4af5f794a265afdfe45a95f7032b...](http://download.suse.com/patch/finder/?keywords=4af5f794a265afdfe45a95f7032b5e85)
[http://download.suse.com/patch/finder/?keywords=5e4143f9e1829ed4b39a7eccffaa...](http://download.suse.com/patch/finder/?keywords=5e4143f9e1829ed4b39a7eccffaa4cf3)
[http://download.suse.com/patch/finder/?keywords=81ea8f0b23808daa3ce30dda8a9f...](http://download.suse.com/patch/finder/?keywords=81ea8f0b23808daa3ce30dda8a9f5765)
[http://download.suse.com/patch/finder/?keywords=9a4508f548dca82be59620eeabed...](http://download.suse.com/patch/finder/?keywords=9a4508f548dca82be59620eeabed6a12)
[http://download.suse.com/patch/finder/?keywords=9f2f8b759827a980e4f998aef659...](http://download.suse.com/patch/finder/?keywords=9f2f8b759827a980e4f998aef659fa08)
[http://download.suse.com/patch/finder/?keywords=c2937e35f763f2736ed1acf1055e...](http://download.suse.com/patch/finder/?keywords=c2937e35f763f2736ed1acf1055ec575)
[http://download.suse.com/patch/finder/?keywords=ec3b4fdfc28b3e5b31314cd6b64c...](http://download.suse.com/patch/finder/?keywords=ec3b4fdfc28b3e5b31314cd6b64cee6f)
[http://download.suse.com/patch/finder/?keywords=fe96acccaeb363ead4fc832ed39f...](http://download.suse.com/patch/finder/?keywords=fe96acccaeb363ead4fc832ed39f05b7)
--
To unsubscribe, e-mail: opensuse-security-announce+unsubscribe@opensuse.org
For additional commands, e-mail: opensuse-security-announce+help@opensuse.org

[0](#like "You must be logged-in to vote.")
[0](#dislike "You must be logged-in to vote.")

Reply

[Sign in to reply online](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/IVLGTL4UWP57DODM6DUC65QEA3NTD35J/)
Use email software

[Back to the thread](/archives/list/security-announce%40lists.opensuse.org/thread/IVLGTL4UWP57DODM6DUC65QEA3NTD35J/#IVLGTL4UWP57DODM6DUC65QEA3NTD35J)

[Back to the list](/archives/list/security-announce%40lists.opensuse.org/)

![HyperKitty](/static/hyperkitty/img/logo.png)
Powered by [HyperKitty](http://hyperkitty.readthedocs.org) version 1.3.12.



=== Content from speirofr.appspot.com_f6081369_20250126_024553.html ===


* [**Salva PeirÃ³**](https://speirofr.appspot.com "Salva PeirÃ³ Software Engineer")
* [Profile](/#salva-peiro)
* [Education](/#education)
* [Publications](/#publications)
* [Projects](/#projects-with-active-participation-most-relevant)
* [Archives](/archives.html)

# [On techniques to prevent commit\_creds() user-space abuse](https://speirofr.appspot.com/on-techniques-to-prevent-commit_creds-user-space-abuse.html)

by [speiro](https://speirofr.appspot.com/author/speiro/index.html) -

Nov 25, 2015

-
[commit\_creds](https://speirofr.appspot.com/tag/commit_creds/index.html), [prevention](https://speirofr.appspot.com/tag/prevention/index.html), [technique](https://speirofr.appspot.com/tag/technique/index.html), [kernel](https://speirofr.appspot.com/tag/kernel/index.html), [hardening](https://speirofr.appspot.com/tag/hardening/index.html),

# Update

Implementation of this kind of protection is *pointless*,
since by the time the attacker is executing code he can already bypass the
protections as discussed in
[kernel-hardening](http://www.openwall.com/lists/kernel-hardening/2015/11/26/6).
Defeating a similar protection implemented in Windows 8 is described in
[Defeating Windows 8 ROP Mitigation](http://vulnfactory.org/blog/2011/09/21/defeating-windows-8-rop-mitigation/)

# Analysis

Given the typical path for kernel exploitation is the
`commit_creds(prepare_kernel_cred(0))` being called from user space as detailed in [[1]](#references).
Why is not a check placed in `commit_creds()` to checks the return address
and ensure that the call is a legit one coming from kernel space?.

This blocks direct calls to `commit_creds` from user â¦

[more ...](https://speirofr.appspot.com/on-techniques-to-prevent-commit_creds-user-space-abuse.html)

---

# [CVE-2015-7884: Kernel Infoleak vulnerability in vivid\_fb\_ioctl()](https://speirofr.appspot.com/cve-2015-7884-kernel-infoleak-vulnerability-in-vivid_fb_ioctl.html)

by [speiro](https://speirofr.appspot.com/author/speiro/index.html) -

Oct 22, 2015

-
[CVE-2015-7884](https://speirofr.appspot.com/tag/cve-2015-7884/index.html), [security](https://speirofr.appspot.com/tag/security/index.html), [kernel](https://speirofr.appspot.com/tag/kernel/index.html), [infoleak](https://speirofr.appspot.com/tag/infoleak/index.html),

# Summary

| **CVE** | [CVE-2015-7884](http://web.nvd.nist.gov/view/vuln/search-results?query=CVE-2015-7884) |
| --- | --- |
| **Author** | [Salva PeirÃ³](http://speirofr.appspot.com) |
| **Date** | October 2015 - Discovery of the vulnerability. |
| **Impact** | The vulnerability discloses 16 bytes of kernel process stack. |
| **Affected Versions** | From linux-3.17.0-rc1 to linux-4.3-rc6 |
| **Bug Timespan** | 1 year: from 2014 to 2015 commit [ad4e02d5081d9da38b5b91886e5fa71f0505d607](http://git.kernel.org/cgit/linux/kernel/git/next/linux-next.git/commit/?id=ad4e02d5081d9da38b5b91886e5fa71f0505d607) |
| **Patch fix** | commit [eda98796aff0d9bf41094b06811f5def3b4c333c](http://git.kernel.org/cgit/linux/kernel/git/next/linux-next.git/commit/?id=eda98796aff0d9bf41094b06811f5def3b4c333c) |

# Description

The vivid\_fb\_ioctl() code fails to initialize the 16 reserved bytes of
struct fb\_vblank after the ->hcount member. Add an explicit
memset(0) before filling the structure to avoid the info leak.

# The patch fixing the Infoleak

After verification the patch that fixes the vulnerability
has been â¦

[more ...](https://speirofr.appspot.com/cve-2015-7884-kernel-infoleak-vulnerability-in-vivid_fb_ioctl.html)

---

# [CVE-2015-7885: Kernel Infoleak vulnerability in dgnc\_mgmt\_ioctl()](https://speirofr.appspot.com/cve-2015-7885-kernel-infoleak-vulnerability-in-dgnc_mgmt_ioctl.html)

by [speiro](https://speirofr.appspot.com/author/speiro/index.html) -

Oct 22, 2015

-
[CVE-2015-7885](https://speirofr.appspot.com/tag/cve-2015-7885/index.html), [security](https://speirofr.appspot.com/tag/security/index.html), [kernel](https://speirofr.appspot.com/tag/kernel/index.html), [infoleak](https://speirofr.appspot.com/tag/infoleak/index.html),

# Summary

| **CVE** | [CVE-2015-7885](http://web.nvd.nist.gov/view/vuln/search-results?query=CVE-2015-7885) |
| --- | --- |
| **Author** | [Salva PeirÃ³](http://speirofr.appspot.com) |
| **Date** | October 2015 - Discovery of the vulnerability. |
| **Impact** | The vulnerability discloses 16 bytes of kernel process stack. |
| **Affected Versions** | From linux-3.11.0-rc3 to linux-4.3-rc6 |
| **Bug Timespan** | 2 years: from 2013 to 2015 commit [0b99d58902dd82fa51216eb8e0d6ddd8c43e90e4](http://git.kernel.org/cgit/linux/kernel/git/next/linux-next.git/commit/?id=0b99d58902dd82fa51216eb8e0d6ddd8c43e90e4) |
| **Patch fix** | commit [4b6184336ebb5c8dc1eae7f7ab46ee608a748b05](http://git.kernel.org/cgit/linux/kernel/git/next/linux-next.git/commit/?id=4b6184336ebb5c8dc1eae7f7ab46ee608a748b05) |

# Description

The dgnc\_mgmt\_ioctl() code fails to initialize the 16 reserved bytes of
struct digi\_dinfo after the ->dinfo\_nboards member. Add an explicit
memset(0) before filling the structure to avoid the info leak.

# The patch fixing the Infoleak

After verification the patch that fixes the vulnerability
has been â¦

[more ...](https://speirofr.appspot.com/cve-2015-7885-kernel-infoleak-vulnerability-in-dgnc_mgmt_ioctl.html)

---

# [Measuring CPU Superscalar factor with noploop.c](https://speirofr.appspot.com/measuring-cpu-superscalar-factor-with-noploopc.html)

by [speiro](https://speirofr.appspot.com/author/speiro/index.html) -

Sep 10, 2014

-
[Learning](https://speirofr.appspot.com/tag/learning/index.html), [noploop](https://speirofr.appspot.com/tag/noploop/index.html), [programming](https://speirofr.appspot.com/tag/programming/index.html), [superscalar](https://speirofr.appspot.com/tag/superscalar/index.html), [performance](https://speirofr.appspot.com/tag/performance/index.html),

While reading [The noploop CPU Benchmark](http://www.brendangregg.com/blog/2014-04-26/the-noploop-cpu-benchmark.html)
I decided to do a small experiment to calculate the [CPU Superscalar factor](https://en.wikipedia.org/wiki/Superscalar),
this consists in measuring the number of instructions that the CPU completes by cycle.
That can be accomplished measuring the number of CPU cycles it takes to perform a fixed amount of NOPs (NO Operation) instructions, as shown below:

```

start = cpucycles()
perform 4096 * 100000000 NOPs
end   = cpucycles()

Superscalar CPU factor = (4096 * 10000000) / (end - start)

```

To measure the superscalar factor, we can write a small self-contained program
(sources here: [noploop.c](http://speirofr.appspot.com/files/noploop.c)) based on the
above â¦

[more ...](https://speirofr.appspot.com/measuring-cpu-superscalar-factor-with-noploopc.html)

---

## Categories

* [CVEs](https://speirofr.appspot.com/category/cves/index.html)
* [Infoleaks](https://speirofr.appspot.com/category/infoleaks/index.html)
* [Learning](https://speirofr.appspot.com/category/learning/index.html)
* [Techniques](https://speirofr.appspot.com/category/techniques/index.html)

## Activity

* [SPADV-2018-01](/files/advisory/SPADV-2018-01.md)
* [CVE-2016-3178](/files/advisory/SPADV-2016-02.md)
* [CVE-2015-7885](/tag/cve-2015-7885/)
* [CVE-2015-7884](/tag/cve-2015-7884/)
* [CVE-2014-1739](/tag/cve-2014-1739/)
* [CVE-2014-1446](/tag/cve-2014-1446/)
* [CVE-2014-1445](/tag/cve-2014-1445/)

## Contact

* [Linkedin](https://www.linkedin.com/in/speiro)
* [ResearchGate](https://www.researchgate.net/profile/Salva_Peiro)
* [Atom feed](https://speirofr.appspot.com/feeds/atom.xml)



=== Content from www.ubuntu.com_d244571f_20250124_182043.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# USN-2259-1: Linux kernel vulnerabilities

27 June 2014

Several security issues were fixed in the kernel.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Releases

* [Ubuntu 12.04](/security/notices?release=precise)

## Packages

* [linux](/security/cves?package=linux) - Linux kernel

## Details

Salva Peiró discovered an information leak in the Linux kernel's media-

device driver. A local attacker could exploit this flaw to obtain sensitive

information from kernel memory. ([CVE-2014-1739](/security/CVE-2014-1739))

A bounds check error was discovered in the socket filter subsystem of the

Linux kernel. A local user could exploit this flaw to cause a denial of

service (system crash) via crafted BPF instructions. ([CVE-2014-3144](/security/CVE-2014-3144))

A remainder calculation error was discovered in the socket filter subsystem

of the Linux kernel. A local user could exploit this flaw to cause a denial

of service (system crash) via crafted BPF instructions. ([CVE-2014-3145](/security/CVE-2014-3145))

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Update instructions

The problem can be corrected by updating your system to the following package versions:

##### Ubuntu 12.04

* [linux-image-3.2.0-65-highbank](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [3.2.0-65.98](https://launchpad.net/ubuntu/%2Bsource/linux/3.2.0-65.98)
* [linux-image-3.2.0-65-virtual](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [3.2.0-65.98](https://launchpad.net/ubuntu/%2Bsource/linux/3.2.0-65.98)
* [linux-image-3.2.0-65-powerpc64-smp](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [3.2.0-65.98](https://launchpad.net/ubuntu/%2Bsource/linux/3.2.0-65.98)
* [linux-image-3.2.0-65-generic-pae](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [3.2.0-65.98](https://launchpad.net/ubuntu/%2Bsource/linux/3.2.0-65.98)
* [linux-image-3.2.0-65-omap](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [3.2.0-65.98](https://launchpad.net/ubuntu/%2Bsource/linux/3.2.0-65.98)
* [linux-image-3.2.0-65-generic](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [3.2.0-65.98](https://launchpad.net/ubuntu/%2Bsource/linux/3.2.0-65.98)
* [linux-image-3.2.0-65-powerpc-smp](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [3.2.0-65.98](https://launchpad.net/ubuntu/%2Bsource/linux/3.2.0-65.98)

After a standard system update you need to reboot your computer to make

all the necessary changes.

ATTENTION: Due to an unavoidable ABI change the kernel updates have

been given a new version number, which requires you to recompile and

reinstall all third party kernel modules you might have installed. If

you use linux-restricted-modules, you have to update that package as

well to get modules which work with the new kernel version. Unless you

manually uninstalled the standard kernel metapackages (e.g. linux-generic,

linux-server, linux-powerpc), a standard system upgrade will automatically

perform this as well.

## References

* [CVE-2014-1739](/security/CVE-2014-1739)
* [CVE-2014-3144](/security/CVE-2014-3144)
* [CVE-2014-3145](/security/CVE-2014-3145)

## Related notices

* [USN-2261-1](/security/notices/USN-2261-1)
* [USN-2285-1](/security/notices/USN-2285-1)
* [USN-2286-1](/security/notices/USN-2286-1)
* [USN-2264-1](/security/notices/USN-2264-1)
* [USN-2263-1](/security/notices/USN-2263-1)
* [USN-2288-1](/security/notices/USN-2288-1)
* [USN-2290-1](/security/notices/USN-2290-1)
* [USN-2252-1](/security/notices/USN-2252-1)
* [USN-2251-1](/security/notices/USN-2251-1)
* [USN-2262-1](/security/notices/USN-2262-1)

### Join the discussion

* [Ubuntu security updates mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened)
* [Security announcements mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-security-announce)

### Need help with your security needs?

Ubuntu Pro provides up to ten-year security coverage for over 23,000 open-source packages within the Ubuntu Main and Universe repositories.

[Talk to an expert to find out what would work best for you](/contact-us/form?product=pro)

### Further reading

* *Loading...*

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page



=== Content from www.openwall.com_bf694c01_20250124_182042.html ===


| [Openwall](/) * [Products](/)   + [Openwall GNU/\*/Linux   *server OS*](/Owl/)+ [Linux Kernel Runtime Guard](/lkrg/)+ [John the Ripper   *password cracker*](/john/)         - [Free & Open Source for any platform](/john/)- [in the cloud](/john/cloud/)- [Pro for Linux](/john/pro/linux/)- [Pro for macOS](/john/pro/macosx/)+ [Wordlists   *for password cracking*](/wordlists/)+ [passwdqc   *policy enforcement*](/passwdqc/)             - [Free & Open Source for Unix](/passwdqc/)- [Pro for Windows (Active Directory)](/passwdqc/windows/)+ [yescrypt   *KDF & password hashing*](/yescrypt/)+ [yespower   *Proof-of-Work (PoW)*](/yespower/)+ [crypt\_blowfish   *password hashing*](/crypt/)+ [phpass   *ditto in PHP*](/phpass/)+ [tcb   *better password shadowing*](/tcb/)+ [Pluggable Authentication Modules](/pam/)+ [scanlogd   *port scan detector*](/scanlogd/)+ [popa3d   *tiny POP3 daemon*](/popa3d/)+ [blists   *web interface to mailing lists*](/blists/)+ [msulogin   *single user mode login*](/msulogin/)+ [php\_mt\_seed   *mt\_rand() cracker*](/php_mt_seed/)* [Services](/services/)* Publications       + [Articles](/articles/)+ [Presentations](/presentations/)* Resources         + [Mailing lists](/lists/)+ [Community wiki](https://openwall.info/wiki/)+ [Source code repositories (GitHub)](https://github.com/openwall)+ [Source code repositories (CVSweb)](https://cvsweb.openwall.com)+ [File archive & mirrors](/mirrors/)+ [How to verify digital signatures](/signatures/)+ [OVE IDs](/ove/)* [What's new](/news) | |
| --- | --- |

| | [Follow @Openwall on Twitter for new release announcements and other news](https://twitter.com/openwall) | | --- | |
| --- | --- |

[[<prev]](../../../2014/06/14/1) [[next>]](2) [[day]](.) [[month]](..) [[year]](../..) [[list]](../../..)
```

Message-ID: <539D343E.5040105@ai2.upv.es>
Date: Sun, 15 Jun 2014 07:50:54 +0200
From: Salva Peiró <speiro@....upv.es>
To: OSS Security List <oss-security@...ts.openwall.com>
Subject: CVE-2014-1739: Kernel Infoleak vulnerability in,media_enum_entities()

Hi,

We found an infoleak vulnerability in the ioctl media_enum_entities()
that allows to disclose 200 bytes the kernel process' stack.
The vulnerability is exploitable on versions up to linux-3.15-rc3 by
local users with read access to `/dev/media0`.
Linux distributions ship with `chmod 600 /dev/media0` preventing
unprivileged local users from exploiting the vulnerability.
However, some Android devices are known to be shipped with both read
and/or write permissions for all: chmod 666 /dev/media0.

A detailed analysis, proof of concept and fixes are at:
<http://speirofr.appspot.com/cve-2014-1739-kernel-infoleak-vulnerability-in-media_enum_entities.html>

This has been fixed in Linux Kernel commit:
<https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/commit/?id=e6a623460e5fc960ac3ee9f946d3106233fd28d8>

e6a623460e5fc960ac3ee9f946d3106233fd28d8
Author	Salva Peiró <speiro@....upv.es>
Date    Thu, 1 May 2014 12:53:28 +0000
Commit [media] media-device: fix infoleak in ioctl media_enum_entities()

    This fixes CVE-2014-1739.

    Signed-off-by: Salva Peiró <speiro@....upv.es>
    Acked-by: Laurent Pinchart <laurent.pinchart@...asonboard.com>
    Cc: stable@...r.kernel.org
    Signed-off-by: Mauro Carvalho Chehab <m.chehab@...sung.com>

Salva Peiró

```

[Powered by blists](https://www.openwall.com/blists/) - [more mailing lists](https://lists.openwall.net)

Please check out the
[Open Source Software Security Wiki](https://oss-security.openwall.org/wiki/), which is counterpart to this
[mailing list](https://oss-security.openwall.org/wiki/mailing-lists/oss-security).

Confused about [mailing lists](/lists/) and their use?
[Read about mailing lists on Wikipedia](https://en.wikipedia.org/wiki/Electronic_mailing_list)
and check out these
[guidelines on proper formatting of your messages](https://www.complang.tuwien.ac.at/anton/mail-news-errors.html).



=== Content from source.android.com_973c70d2_20250124_182049.html ===


[![Android Open Source Project](https://www.gstatic.com/devrel-devsite/prod/v2c0608cfe9941cacf4435921a2ece588be3719df069d9fba67130a84e4743128/androidsource/images/lockup.svg)](/)

`/`

* English
* Deutsch
* Español
* Español – América Latina
* Français
* Indonesia
* Italiano
* Polski
* Português
* Português – Brasil
* Tiếng Việt
* Türkçe
* Русский
* עברית
* العربيّة
* فارسی
* हिंदी
* বাংলা
* ภาษาไทย
* 中文 – 简体
* 中文 – 繁體
* 日本語
* 한국어

[Android Code Search](https://cs.android.com/android/platform/superproject/main)
Sign in

* [Documentation](https://source.android.com/docs)

[What's New?](https://source.android.com/docs/whatsnew)

[Getting Started](https://source.android.com/docs/setup)

[Security](https://source.android.com/docs/security)

[Core Topics](https://source.android.com/docs/core)

[Compatibility](https://source.android.com/docs/compatibility)

[Android Devices](https://source.android.com/docs/devices)

[Automotive](https://source.android.com/docs/automotive)

[Reference](https://source.android.com/reference)

[![Android Open Source Project](https://www.gstatic.com/devrel-devsite/prod/v2c0608cfe9941cacf4435921a2ece588be3719df069d9fba67130a84e4743128/androidsource/images/lockup.svg)](/)

* [Docs](/docs)
  + More
  + [What's New?](/docs/whatsnew)
  + [Getting Started](/docs/setup)
  + [Security](/docs/security)
  + [Core Topics](/docs/core)
  + [Compatibility](/docs/compatibility)
  + [Android Devices](/docs/devices)
  + [Automotive](/docs/automotive)
  + [Reference](/reference)
* [Android Code Search](https://cs.android.com/android/platform/superproject/main)

* [Overview](/docs/security)
* Security overview
  + [Secure an Android device](/docs/security/overview)
  + [Kernel security](/docs/security/overview/kernel-security)
  + [App security](/docs/security/overview/app-security)
  + [Implement security](/docs/security/overview/implement)
  + [Updates and resources](/docs/security/overview/updates-resources)
  + [ASPIRE](/docs/security/overview/aspire)
  + [Reports](/docs/security/overview/reports)
  + [Enhancements](/docs/security/enhancements)
  + [Acknowledgements](/docs/security/overview/acknowledgements)
* Android Security Bulletins
  + [Bulletins home](/docs/security/bulletin)
  + [Overview](/docs/security/bulletin/asb-overview)
  + 2025 bulletins
    - [January](/docs/security/bulletin/2025-01-01)
  + 2024 bulletins
    - [December](/docs/security/bulletin/2024-12-01)
    - [November](/docs/security/bulletin/2024-11-01)
    - [October](/docs/security/bulletin/2024-10-01)
    - [September](/docs/security/bulletin/2024-09-01)
    - [August](/docs/security/bulletin/2024-08-01)
    - [July](/docs/security/bulletin/2024-07-01)
    - [June](/docs/security/bulletin/2024-06-01)
    - [May](/docs/security/bulletin/2024-05-01)
    - [April](/docs/security/bulletin/2024-04-01)
    - [March](/docs/security/bulletin/2024-03-01)
    - [February](/docs/security/bulletin/2024-02-01)
    - [January](/docs/security/bulletin/2024-01-01)
    - [Android 15](/docs/security/bulletin/android-15)
  + 2023 bulletins
    - [December](/docs/security/bulletin/2023-12-01)
    - [November](/docs/security/bulletin/2023-11-01)
    - [October](/docs/security/bulletin/2023-10-01)
    - [September](/docs/security/bulletin/2023-09-01)
    - [August](/docs/security/bulletin/2023-08-01)
    - [July](/docs/security/bulletin/2023-07-01)
    - [June](/docs/security/bulletin/2023-06-01)
    - [May](/docs/security/bulletin/2023-05-01)
    - [April](/docs/security/bulletin/2023-04-01)
    - [March](/docs/security/bulletin/2023-03-01)
    - [February](/docs/security/bulletin/2023-02-01)
    - [January](/docs/security/bulletin/2023-01-01)
    - [Android 14](/docs/security/bulletin/android-14)
  + 2022 bulletins
    - [December](/docs/security/bulletin/2022-12-01)
    - [November](/docs/security/bulletin/2022-11-01)
    - [October](/docs/security/bulletin/2022-10-01)
    - [September](/docs/security/bulletin/2022-09-01)
    - [August](/docs/security/bulletin/2022-08-01)
    - [July](/docs/security/bulletin/2022-07-01)
    - [June](/docs/security/bulletin/2022-06-01)
    - [May](/docs/security/bulletin/2022-05-01)
    - [April](/docs/security/bulletin/2022-04-01)
    - [March](/docs/security/bulletin/2022-03-01)
    - [Android 12L](/docs/security/bulletin/android-12l)
    - [February](/docs/security/bulletin/2022-02-01)
    - [January](/docs/security/bulletin/2022-01-01)
    - [Android 13](/docs/security/bulletin/android-13)
    - [Index](/docs/security/bulletin/2022)
  + 2021 bulletins
    - [December](/docs/security/bulletin/2021-12-01)
    - [November](/docs/security/bulletin/2021-11-01)
    - [October](/docs/security/bulletin/2021-10-01)
    - [September](/docs/security/bulletin/2021-09-01)
    - [August](/docs/security/bulletin/2021-08-01)
    - [July](/docs/security/bulletin/2021-07-01)
    - [June](/docs/security/bulletin/2021-06-01)
    - [May](/docs/security/bulletin/2021-05-01)
    - [April](/docs/security/bulletin/2021-04-01)
    - [March](/docs/security/bulletin/2021-03-01)
    - [February](/docs/security/bulletin/2021-02-01)
    - [January](/docs/security/bulletin/2021-01-01)
    - [Android 12](/docs/security/bulletin/android-12)
    - [Index](/docs/security/bulletin/2021)
  + 2020 bulletins
    - [December](/docs/security/bulletin/2020-12-01)
    - [November](/docs/security/bulletin/2020-11-01)
    - [October](/docs/security/bulletin/2020-10-01)
    - [September](/docs/security/bulletin/2020-09-01)
    - [August](/docs/security/bulletin/2020-08-01)
    - [July](/docs/security/bulletin/2020-07-01)
    - [June](/docs/security/bulletin/2020-06-01)
    - [May](/docs/security/bulletin/2020-05-01)
    - [April](/docs/security/bulletin/2020-04-01)
    - [March](/docs/security/bulletin/2020-03-01)
    - [February](/docs/security/bulletin/2020-02-01)
    - [January](/docs/security/bulletin/2020-01-01)
    - [Android 11](/docs/security/bulletin/android-11)
    - [Index](/docs/security/bulletin/2020)
  + 2019 bulletins
    - [December](/docs/security/bulletin/2019-12-01)
    - [November](/docs/security/bulletin/2019-11-01)
    - [October](/docs/security/bulletin/2019-10-01)
    - [September](/docs/security/bulletin/2019-09-01)
    - [August](/docs/security/bulletin/2019-08-01)
    - [July](/docs/security/bulletin/2019-07-01)
    - [June](/docs/security/bulletin/2019-06-01)
    - [May](/docs/security/bulletin/2019-05-01)
    - [April](/docs/security/bulletin/2019-04-01)
    - [March](/docs/security/bulletin/2019-03-01)
    - [February](/docs/security/bulletin/2019-02-01)
    - [January](/docs/security/bulletin/2019-01-01)
    - [Android 10](/docs/security/bulletin/android-10)
    - [Index](/docs/security/bulletin/2019)
  + 2018 bulletins
    - [December](/docs/security/bulletin/2018-12-01)
    - [November](/docs/security/bulletin/2018-11-01)
    - [October](/docs/security/bulletin/2018-10-01)
    - [September](/docs/security/bulletin/2018-09-01)
    - [August](/docs/security/bulletin/2018-08-01)
    - [July](/docs/security/bulletin/2018-07-01)
    - [June](/docs/security/bulletin/2018-06-01)
    - [May](/docs/security/bulletin/2018-05-01)
    - [April](/docs/security/bulletin/2018-04-01)
    - [March](/docs/security/bulletin/2018-03-01)
    - [February](/docs/security/bulletin/2018-02-01)
    - [January](/docs/security/bulletin/2018-01-01)
    - [Index](/docs/security/bulletin/2018)
  + 2017 bulletins
    - [December](/docs/security/bulletin/2017-12-01)
    - [November](/docs/security/bulletin/2017-11-01)
    - [October](/docs/security/bulletin/2017-10-01)
    - [September](/docs/security/bulletin/2017-09-01)
    - [August](/docs/security/bulletin/2017-08-01)
    - [July](/docs/security/bulletin/2017-07-01)
    - [June](/docs/security/bulletin/2017-06-01)
    - [May](/docs/security/bulletin/2017-05-01)
    - [April](/docs/security/bulletin/2017-04-01)
    - [March](/docs/security/bulletin/2017-03-01)
    - [February](/docs/security/bulletin/2017-02-01)
    - [January](/docs/security/bulletin/2017-01-01)
    - [Index](/docs/security/bulletin/2017)
  + 2016 bulletins
    - [December](/docs/security/bulletin/2016-12-01)
    - [November](/docs/security/bulletin/2016-11-01)
    - [October](/docs/security/bulletin/2016-10-01)
    - [September](/docs/security/bulletin/2016-09-01)
    - [August](/docs/security/bulletin/2016-08-01)
    - [July](/docs/security/bulletin/2016-07-01)
    - [June](/docs/security/bulletin/2016-06-01)
    - [May](/docs/security/bulletin/2016-05-01)
    - [April](/docs/security/bulletin/2016-04-02)
    - [March](/docs/security/bulletin/2016-03-01)
    - [February](/docs/security/bulletin/2016-02-01)
    - [January](/docs/security/bulletin/2016-01-01)
    - [Index](/docs/security/bulletin/2016)
  + 2015 bulletins
    - [December](/docs/security/bulletin/2015-12-01)
    - [November](/docs/security/bulletin/2015-11-01)
    - [October](/docs/security/bulletin/2015-10-01)
    - [September](/docs/security/bulletin/2015-09-01)
    - [August](/docs/security/bulletin/2015-08-01)
    - [Index](/docs/security/bulletin/2015)
  + Pixel/Nexus bulletins
  + [Overview](/docs/security/bulletin/pixel)
  + 2025 bulletins
    - [January](/docs/security/bulletin/pixel/2025-01-01)
  + 2024 bulletins
    - [December](/docs/security/bulletin/pixel/2024-12-01)
    - [November](/docs/security/bulletin/pixel/2024-11-01)
    - [October](/docs/security/bulletin/pixel/2024-10-01)
    - [September](/docs/security/bulletin/pixel/2024-09-01)
    - [August](/docs/security/bulletin/pixel/2024-08-01)
    - [July](/docs/security/bulletin/pixel/2024-07-01)
    - [June](/docs/security/bulletin/pixel/2024-06-01)
    - [May](/docs/security/bulletin/pixel/2024-05-01)
    - [April](/docs/security/bulletin/pixel/2024-04-01)
    - [March](/docs/security/bulletin/pixel/2024-03-01)
    - [February](/docs/security/bulletin/pixel/2024-02-01)
    - [January](/docs/security/bulletin/pixel/2024-01-01)
  + 2023 bulletins
    - [December](/docs/security/bulletin/pixel/2023-12-01)
    - [November](/docs/security/bulletin/pixel/2023-11-01)
    - [October](/docs/security/bulletin/pixel/2023-10-01)
    - [September](/docs/security/bulletin/pixel/2023-09-01)
    - [August](/docs/security/bulletin/pixel/2023-08-01)
    - [July](/docs/security/bulletin/pixel/2023-07-01)
    - [June](/docs/security/bulletin/pixel/2023-06-01)
    - [May](/docs/security/bulletin/pixel/2023-05-01)
    - [April](/docs/security/bulletin/pixel/2023-04-01)
    - [March](/docs/security/bulletin/pixel/2023-03-01)
    - [February](/docs/security/bulletin/pixel/2023-02-01)
    - [January](/docs/security/bulletin/pixel/2023-01-01)
  + 2022 bulletins
    - [December](/docs/security/bulletin/pixel/2022-12-01)
    - [November](/docs/security/bulletin/pixel/2022-11-01)
    - [October](/docs/security/bulletin/pixel/2022-10-01)
    - [September](/docs/security/bulletin/pixel/2022-09-01)
    - [August](/docs/security/bulletin/pixel/2022-08-01)
    - [July](/docs/security/bulletin/pixel/2022-07-01)
    - [June](/docs/security/bulletin/pixel/2022-06-01)
    - [May](/docs/security/bulletin/pixel/2022-05-01)
    - [April](/docs/security/bulletin/pixel/2022-04-01)
    - [March](/docs/security/bulletin/pixel/2022-03-01)
    - [February](/docs/security/bulletin/pixel/2022-02-01)
    - [January](/docs/security/bulletin/pixel/2022-01-01)
  + 2021 bulletins
    - [December](/docs/security/bulletin/pixel/2021-12-01)
    - [November](/docs/security/bulletin/pixel/2021-11-01)
    - [October](/docs/security/bulletin/pixel/2021-10-01)
    - [September](/docs/security/bulletin/pixel/2021-09-01)
    - [August](/docs/security/bulletin/pixel/2021-08-01)
    - [July](/docs/security/bulletin/pixel/2021-07-01)
    - [June](/docs/security/bulletin/pixel/2021-06-01)
    - [May](/docs/security/bulletin/pixel/2021-05-01)
    - [April](/docs/security/bulletin/pixel/2021-04-01)
    - [March](/docs/security/bulletin/pixel/2021-03-01)
    - [February](/docs/security/bulletin/pixel/2021-02-01)
    - [January](/docs/security/bulletin/pixel/2021-01-01)
    - [Index](/docs/security/bulletin/pixel/2021)
  + 2020 bulletins
    - [December](/docs/security/bulletin/pixel/2020-12-01)
    - [November](/docs/security/bulletin/pixel/2020-11-01)
    - [October](/docs/security/bulletin/pixel/2020-10-01)
    - [September](/docs/security/bulletin/pixel/2020-09-01)
    - [August](/docs/security/bulletin/pixel/2020-08-01)
    - [July](/docs/security/bulletin/pixel/2020-07-01)
    - [June](/docs/security/bulletin/pixel/2020-06-01)
    - [May](/docs/security/bulletin/pixel/2020-05-01)
    - [April](/docs/security/bulletin/pixel/2020-04-01)
    - [March](/docs/security/bulletin/pixel/2020-03-01)
    - [February](/docs/security/bulletin/pixel/2020-02-01)
    - [January](/docs/security/bulletin/pixel/2020-01-01)
    - [Index](/docs/security/bulletin/pixel/2020)
  + 2019 bulletins
    - [December](/docs/security/bulletin/pixel/2019-12-01)
    - [November](/docs/security/bulletin/pixel/2019-11-01)
    - [October](/docs/security/bulletin/pixel/2019-10-01)
    - [September](/docs/security/bulletin/pixel/2019-09-01)
    - [August](/docs/security/bulletin/pixel/2019-08-01)
    - [July](/docs/security/bulletin/pixel/2019-07-01)
    - [June](/docs/security/bulletin/pixel/2019-06-01)
    - [May](/docs/security/bulletin/pixel/2019-05-01)
    - [April](/docs/security/bulletin/pixel/2019-04-01)
    - [March](/docs/security/bulletin/pixel/2019-03-01)
    - [February](/docs/security/bulletin/pixel/2019-02-01)
    - [January](/docs/security/bulletin/pixel/2019-01-01)
    - [Index](/docs/security/bulletin/pixel/2019)
  + 2018 bulletins
    - [December](/docs/security/bulletin/pixel/2018-12-01)
    - [November](/docs/security/bulletin/pixel/2018-11-01)
    - [October](/docs/security/bulletin/pixel/2018-10-01)
    - [September](/docs/security/bulletin/pixel/2018-09-01)
    - [August](/docs/security/bulletin/pixel/2018-08-01)
    - [July](/docs/security/bulletin/pixel/2018-07-01)
    - [June](/docs/security/bulletin/pixel/2018-06-01)
    - [May](/docs/security/bulletin/pixel/2018-05-01)
    - [April](/docs/security/bulletin/pixel/2018-04-01)
    - [March](/docs/security/bulletin/pixel/2018-03-01)
    - [February](/docs/security/bulletin/pixel/2018-02-01)
    - [January](/docs/security/bulletin/pixel/2018-01-01)
    - [Index](/docs/security/bulletin/pixel/2018)
  + 2017 bulletins
    - [December](/docs/security/bulletin/pixel/2017-12-01)
    - [November](/docs/security/bulletin/pixel/2017-11-01)
    - [October](/docs/security/bulletin/pixel/2017-10-01)
    - [Index](/docs/security/bulletin/pixel/2017)
  + Android Automotive
  + [Overview](/docs/security/bulletin/aaos)
  + 2025 bulletins
    - [January](/docs/security/bulletin/aaos/2025-01-01)
  + 2024 bulletins
    - [December](/docs/security/bulletin/aaos/2024-12-01)
    - [November](/docs/security/bulletin/aaos/2024-11-01)
    - [October](/docs/security/bulletin/aaos/2024-10-01)
    - [September](/docs/security/bulletin/aaos/2024-09-01)
    - [August](/docs/security/bulletin/aaos/2024-08-01)
    - [July](/docs/security/bulletin/aaos/2024-07-01)
    - [June](/docs/security/bulletin/aaos/2024-06-01)
    - [May](/docs/security/bulletin/aaos/2024-05-01)
    - [April](/docs/security/bulletin/aaos/2024-04-01)
    - [March](/docs/security/bulletin/aaos/2024-03-01)
    - [February](/docs/security/bulletin/aaos/2024-02-01)
    - [January](/docs/security/bulletin/aaos/2024-01-01)
  + 2023 bulletins
    - [December](/docs/security/bulletin/aaos/2023-12-01)
    - [November](/docs/security/bulletin/aaos/2023-11-01)
    - [October](/docs/security/bulletin/aaos/2023-10-01)
    - [September](/docs/security/bulletin/aaos/2023-09-01)
    - [August](/docs/security/bulletin/aaos/2023-08-01)
    - [July](/docs/security/bulletin/aaos/2023-07-01)
    - [June](/docs/security/bulletin/aaos/2023-06-01)
    - [May](/docs/security/bulletin/aaos/2023-05-01)
    - [April](/docs/security/bulletin/aaos/2023-04-01)
    - [March](/docs/security/bulletin/aaos/2023-03-01)
    - [February](/docs/security/bulletin/aaos/2023-02-01)
    - [January](/docs/security/bulletin/aaos/2023-01-01)
  + 2022 bulletins
    - [December](/docs/security/bulletin/aaos/2022-12-01)
    - [November](/docs/security/bulletin/aaos/2022-11-01)
    - [October](/docs/security/bulletin/aaos/2022-10-01)
    - [September](/docs/security/bulletin/aaos/2022-09-01)
    - [August](/docs/security/bulletin/aaos/2022-08-01)
    - [July](/docs/security/bulletin/aaos/2022-07-01)
    - [June](/docs/security/bulletin/aaos/2022-06-01)
    - [May](/docs/security/bulletin/aaos/2022-05-01)
    - [April](/docs/security/bulletin/aaos/2022-04-01)
    - [March](/docs/security/bulletin/aaos/2022-03-01)
    - [February](/docs/security/bulletin/aaos/2022-02-01)
    - [January](/docs/security/bulletin/aaos/2022-01-01)
  + 2021 bulletins
    - [December](/docs/security/bulletin/aaos/2021-12-01)
    - [November](/docs/security/bulletin/aaos/2021-11-01)
    - [October](/docs/security/bulletin/aaos/2021-10-01)
    - [September](/docs/security/bulletin/aaos/2021-09-01)
    - [August](/docs/security/bulletin/aaos/2021-08-01)
    - [July](/docs/security/bulletin/aaos/2021-07-01)
    - [June](/docs/security/bulletin/aaos/2021-06-01)
    - [May](/docs/security/bulletin/aaos/2021-05-01)
    - [April](/docs/security/bulletin/aaos/2021-04-01)
    - [March](/docs/security/bulletin/aaos/2021-03-01)
    - [February](/docs/security/bulletin/aaos/2021-02-01)
    - [January](/docs/security/bulletin/aaos/2021-01-01)
  + Chromecast
  + [Overview](/docs/security/bulletin/chromecast)
  + 2024 bulletins
    - [December](/docs/security/bulletin/chromecast/2024-12-01)
    - [September](/docs/security/bulletin/chromecast/2024-09-01)
    - [July](/docs/security/bulletin/chromecast/2024-07-01)
    - [March](/docs/security/bulletin/chromecast/2024-03-01)
  + 2023 bulletins
    - [December](/docs/security/bulletin/chromecast/2023-12-01)
    - [September](/docs/security/bulletin/chromecast/2023-07-01)
    - [June](/docs/security/bulletin/chromecast/2023-06-01)
    - [April](/docs/security/bulletin/chromecast/2023-04-01)
  + 2022 bulletins
    - [December](/docs/security/bulletin/chromecast/2022-12-01)
    - [October](/docs/security/bulletin/chromecast/2022-10-01)
    - [July](/docs/security/bulletin/chromecast/2022-07-01)
  + Wear
  + [Overview](/docs/security/bulletin/wear)
  + 2025 bulletins
    - [January](/docs/security/bulletin/wear/2025/2025-01-01)
  + 2024 bulletins
    - [December](/docs/security/bulletin/wear/2024/2024-12-01)
    - [November](/docs/security/bulletin/wear/2024/2024-11-01)
    - [October](/docs/security/bulletin/wear/2024/2024-10-01)
    - [September](/docs/security/bulletin/wear/2024/2024-09-01)
    - [August](/docs/security/bulletin/wear/2024/2024-08-01)
    - [July](/docs/security/bulletin/wear/2024/2024-07-01)
    - [June](/docs/security/bulletin/wear/2024/2024-06-01)
    - [May](/docs/security/bulletin/wear/2024/2024-05-01)
    - [April](/docs/security/bulletin/wear/2024/2024-04-01)
    - [March](/docs/security/bulletin/wear/2024/2024-03-01)
    - [February](/docs/security/bulletin/wear/2024/2024-02-01)
    - [January](/docs/security/bulletin/wear/2024/2024-01-01)
  + 2023 bulletins
    - [December](/docs/security/bulletin/wear/2023/2023-12-01)
    - [November](/docs/security/bulletin/wear/2023/2023-11-01)
    - [October](/docs/security/bulletin/wear/2023/2023-10-01)
    - [September](/docs/security/bulletin/wear/2023/2023-09-01)
    - [August](/docs/security/bulletin/wear/2023/2023-08-01)
  + Pixel Watch
  + [Overview](/docs/security/bulletin/pixel-watch)
  + 2024 bulletins
    - [December](/docs/security/bulletin/pixel-watch/2024-12-01)
    - [August](/docs/security/bulletin/pixel-watch/2024-08-01)
    - [July](/docs/security/bulletin/pixel-watch/2024-07-01)
    - [June](/docs/security/bulletin/pixel-watch/2024-06-01)
    - [May](/docs/security/bulletin/pixel-watch/2024-05-01)
    - [April](/docs/security/bulletin/pixel-watch/2024-04-01)
    - [March](/docs/security/bulletin/pixel-watch/2024-03-01)
    - [February](/docs/security/bulletin/pixel-watch/2024-02-01)
    - [January](/docs/security/bulletin/pixel-watch/2024-01-01)
  + 2023 bulletins
    - [December](/docs/security/bulletin/pixel-watch/2023/2023-12-01)
    - [September](/docs/security/bulletin/pixel-watch/2023/2023-09-01)
    - [June](/docs/security/bulletin/pixel-watch/2023/2023-06-01)
  + Advisories
  + [Overview](/docs/security/bulletin/advisory)
  + [March 2016](/docs/security/bulletin/advisory/2016-03-18)
* Features
  + [Overview](/docs/security/features)
  + [Application Sandbox](/docs/security/app-sandbox)
  + [OMAPI vendor stable interface](/docs/security/features/open-mobile-api)
  + App signing
    - [Overview](/docs/security/features/apksigning)
    - [APK signature scheme v2](/docs/security/features/apksigning/v2)
    - [APK signature scheme v3](/docs/security/features/apksigning/v3)
    - [APK signature scheme v3.1](/docs/security/features/apksigning/v3-1)
    - [APK signature scheme v4](/docs/security/features/apksigning/v4)
  + Authentication
    - [Overview](/docs/security/features/authentication)
    - [Gatekeeper](/docs/security/features/authentication/gatekeeper)
    - Biometrics
      * [Overview](/docs/security/features/biometric)
      * [Measure biometric security](/docs/security/features/biometric/measure)
      * [Fingerprint HIDL](/docs/security/features/authentication/fingerprint-hal)
      * [Face authentication HIDL](/docs/security/features/biometric/face-authentication)
    - Protected confirmation
      * [Overview](/docs/security/features/protected-confirmation)
      * [Implementation](/docs/security/features/protected-confirmation/implementation)
      * [Design guidelines](/docs/security/features/protected-confirmation/design)
      * [Accessibility](/docs/security/features/protected-confirmation/accessibility)
  + DICE
    - [Overview](/docs/security/features/dice)
    - [Applications of DICE](/docs/security/features/dice/applications-of-dice)
  + Encryption
    - [Overview](/docs/security/features/encryption)
    - [File-based encryption](/docs/security/features/encryption/file-based)
    - [Full-disk encryption](/docs/security/features/encryption/full-disk)
    - [Metadata encryption](/docs/security/features/encryption/metadata)
    - [Enable Adiantum](/docs/security/features/encryption/adiantum)
    - [Hardware-wrapped keys](/docs/security/features/encryption/hw-wrapped-keys)
  + Keystore
    - [Overview](/docs/security/features/keystore)
    - [Features](/docs/security/features/keystore/features)
    - [Key and ID attestation](/docs/security/features/keystore/attestation)
    - [Version binding](/docs/security/features/keystore/version-binding)
    - [Authorization tags](/docs/security/features/keystore/tags)
    - [Functions](/docs/security/features/keystore/implementer-ref)
  + Identity credential
    - [Overview](/docs/security/features/identity-credentials)
  + SELinux
    - [Overview](/docs/security/features/selinux)
    - [Concepts](/docs/security/features/selinux/concepts)
    - [Implementation](/docs/security/features/selinux/implement)
    - [Customization](/docs/security/features/selinux/customize)
    - [Build sepolicy](/docs/security/features/selinux/build)
    - [Compatibility](/docs/security/features/selinux/compatibility)
    - [Validation](/docs/security/features/selinux/validate)
    - [Write policy](/docs/security/features/selinux/device-policy)
    - [Vendor init](/docs/security/features/selinux/vendor-init)
  + Trusty TEE
    - [Overview](/docs/security/features/trusty)
    - [Download and build](/docs/security/features/trusty/download-and-build)
    - [Trusty API reference](/docs/security/features/trusty/trusty-ref)
  + Verified Boot
    - [Overview](/docs/security/features/verifiedboot)
    - [Device state](/docs/security/features/verifiedboot/device-state)
    - [Verify Boot](/docs/security/features/verifiedboot/verified-boot)
    - [Boot flow](/docs/security/features/verifiedboot/boot-flow)
    - [Implement dm-verity](/docs/security/features/verifiedboot/dm-verity)
    - [Verify system\_other partition](/docs/security/features/verifiedboot/verify-system-other-partition)
    - [Reference implementation](/docs/security/features/verifiedboot/avb)
  + Safety Center
    - [Overview](/docs/security/safety-center/overview)
    - [Customize Safety Center](/docs/security/safety-center/customize)
    - [Customize Safety Center UI](/docs/security/safety-center/customize-ui)
    - [Interact with Safety Center](/docs/security/safety-center/interact)
    - [Testing and validation](/docs/security/safety-center/test-requirements)
  + Cellular security
    - [Overview](/docs/security/features/cellular-security/overview)
    - [Disable 2G](/docs/security/features/cellular-security/disable-2g)
  + [Private space](/docs/security/features/private-space)
* Testing
  + [Overview](/docs/security/test/fuzz-sanitize)
  + [Memory safety](/docs/security/test/memory-safety)
  + Arm Memory Tagging Extension
  + [Overview](/docs/security/test/memory-safety/arm-mte)
  + [Bootloader support](/docs/security/test/memory-safety/bootloader-support)
  + [Understand MTE reports](/docs/security/test/memory-safety/mte-reports)
  + [MTE configuration](/docs/security/test/memory-safety/mte-configuration)
  + Sanitizers
  + [Overview](/docs/security/test/sanitizers)
  + [AddressSanitizer](/docs/security/test/asan)
  + [Kernel AddressSanitizer](/docs/security/test/kasan)
  + [Hardware-assisted AddressSanitizer](/docs/security/test/hwasan)
  + [Understand HWASan reports](/docs/security/test/memory-safety/hwasan-reports)
  + [UndefinedBehaviorSanitizer](/docs/security/test/ubsan)
  + Other topics
  + [Control flow integrity](/docs/security/test/cfi)
  + [Kernel control flow integrity](/docs/security/test/kcfi)
  + [Execute-only memory](/docs/security/test/execute-only-memory)
  + [Fuzz with libFuzzer](/docs/security/test/libfuzzer)
  + [GWP-ASan and KFENCE](/docs/security/test/memory-safety/gwp-asan-kfence)
  + [Security Test Suite development kit](/docs/security/test/sts-sdk)
  + [Scudo](/docs/security/test/scudo)
  + [ShadowCallStack](/docs/security/test/shadow-call-stack)
  + [Tagged pointers](/docs/security/test/tagged-pointers)
  + [Zero initialized memory](/docs/security/test/memory-safety/zero-initialized-memory)
* Best practices
  + [Overview](/docs/security/best-practices)
  + [Operational security](/docs/security/best-practices/ops)
  + [System security](/docs/security/best-practices/system)
  + [App security](/docs/security/best-practices/app)
  + [Network security](/docs/security/best-practices/network)
  + [Hardware security](/docs/security/best-practices/hardware)
  + [Privacy security](/docs/security/best-practices/privacy)

* What's new?
* [Release notes](/docs/whatsnew/release-notes)
* [Latest security bulletins](/docs/whatsnew/latest-security-bulletins)
* [Latest Compatibility Definition Document (CDD)](/docs/whatsnew/latest-cdd)
* [Site updates](/docs/whatsnew/site-updates)
* Getting Started
* [About](/docs/setup/about)
* [Start](/docs/setup/start)
* [Download](/docs/setup/download)
* [Build](/docs/setup/build)
* [Test](/docs/setup/test)
* [Create](/docs/setup/create/coding-tasks)
* [Contribute](/docs/setup/contribute)
* [Community](/docs/setup/community/cofc)
* [Tools, build, and related reference](/docs/setup/reference)
* Security
* [Overview](/docs/security/overview)
* [Bulletins](/docs/security/bulletin)
* [Features](/docs/security/features)
* [Testing](/docs/security/test/fuzz-sanitize)
* [Best Practices](/docs/security/best-practices)
* Core Topics
* [Architecture](/docs/core/architecture)
* [Audio](/docs/core/audio)
* [Camera](/docs/core/camera)
* [Connectivity](/docs/core/connect)
* [Data](/docs/core/data)
* [Display](/docs/core/display)
* [Fonts](/docs/core/fonts/custom-font-fallback)
* [Graphics](/docs/core/graphics)
* [Interaction](/docs/core/interaction)
* [Media](/docs/core/media)
* [Performance](/docs/core/perf)
* [Permissions](/docs/core/permissions)
* [Power](/docs/core/power)
* [Runtime](/docs/core/runtime)
* [Settings](/docs/core/settings)
* [Storage](/docs/core/storage)
* [Tests](/docs/core/tests)
* [Updates](/docs/core/ota)
* [Virtualization](/docs/core/virtualization)
* Compatibility
* [Compatibility Definition Document (CDD)](/docs/compatibility/cdd)
* [Compatibility Test Suite (CTS)](/docs/compatibility/cts)
* Android Devices
* [Cuttlefish](/docs/devices/cuttlefish)
* [Enterprise](/docs/devices/admin)
* [TV](/docs/devices/tv)
* Automotive
* [Get Started](/docs/automotive/start/what_automotive)
* [Guidelines for Development](/docs/automotive/guidelines)
* [Development Tools](/docs/automotive/dev-tools)
* [Testing Tools and Infrastructure](/docs/automotive/tools)
* [Release Details](/docs/automotive/start/releases)
* Reference
* [HIDL](/reference/hidl)
* [HAL](/reference/hal)
* [Trade Federation](/reference/tradefed/classes)
* [Security Test Suite](/reference/sts/classes)

* [AOSP](https://source.android.com/)
* [Security](https://source.android.com/docs/security)

# Android Security Bulletin—April 2017

Stay organized with collections

Save and categorize content based on your preferences.

*Published April 03, 2017 | Updated August 17, 2017*

The Android Security Bulletin contains details of security vulnerabilities
affecting Android devices. Alongside the bulletin, we have released a security
update to Nexus devices through an over-the-air (OTA) update. The Google device
firmware images have also been released to the [Google Developer
site](https://developers.google.com/android/nexus/images). Security patch levels of April 05, 2017 or later address all of these
issues. Refer to the [Pixel
and Nexus update schedule](https://support.google.com/pixelphone/answer/4457705#pixel_phones&nexus_devices) to learn how to check a device's security patch
level.

Partners were notified of the issues described in the bulletin on March 06, 2017
or earlier. Source code patches for these issues have been released to the Android
Open Source Project (AOSP) repository and linked from this bulletin. This bulletin
also includes links to patches outside of AOSP.

The most severe of these issues is a Critical security vulnerability that could
enable remote code execution on an affected device through multiple methods such
as email, web browsing, and MMS when processing media files. The
[severity
assessment](/docs/security/overview/updates-resources#severity) is based on the effect that exploiting the vulnerability would
possibly have on an affected device, assuming the platform and service
mitigations are disabled for development purposes or if successfully bypassed.

We have had no reports of active customer exploitation or abuse of these newly
reported issues. Refer to the [Android and Google service
mitigations](#mitigations) section for details on the [Android
security platform protections](/docs/security/enhancements) and service protections such as [SafetyNet](https://developer.android.com/training/safetynet/index.html),
which improve the security of the Android platform.

We encourage all customers to accept these updates to their devices.

## Announcements

* This bulletin has two security patch level strings to provide Android
  partners with the flexibility to more quickly fix a subset of vulnerabilities
  that are similar across all Android devices. See [Common questions and answers](#common-questions-and-answers) for
  additional information:
  + **2017-04-01**: Partial security patch level string. This
    security patch level string indicates that all issues associated with 2017-04-01
    (and all previous security patch level strings) are addressed.
  + **2017-04-05**: Complete security patch level string. This
    security patch level string indicates that all issues associated with 2017-04-01
    and 2017-04-05 (and all previous security patch level strings) are addressed.
* Supported Google devices will receive a single OTA update with the April 05,
  2017 security patch level.

## Android and Google Service Mitigations

This is a summary of the mitigations provided by the [Android
security platform](/docs/security/enhancements) and service protections such as SafetyNet. These
capabilities reduce the likelihood that security vulnerabilities could be
successfully exploited on Android.

* Exploitation for many issues on Android is made more difficult by
  enhancements in newer versions of the Android platform. We encourage all users
  to update to the latest version of Android where possible.
* The Android Security team actively monitors for abuse with [Verify
  Apps and SafetyNet](/static/docs/security/overview/reports/Google_Android_Security_2016_Report_Final.pdf), which are designed to warn users about [Potentially
  Harmful Applications](http://static.googleusercontent.com/media/source.android.com/en//security/reports/Google_Android_Security_PHA_classifications.pdf). Verify Apps is enabled by default on devices with [Google Mobile Services](http://www.android.com/gms) and is especially
  important for users who install applications from outside of Google Play. Device
  rooting tools are prohibited within Google Play, but Verify Apps warns users
  when they attempt to install a detected rooting application—no matter where it
  comes from. Additionally, Verify Apps attempts to identify and block
  installation of known malicious applications that exploit a privilege escalation
  vulnerability. If such an application has already been installed, Verify Apps
  will notify the user and attempt to remove the detected application.
* As appropriate, Google Hangouts and Messenger applications do not
  automatically pass media to processes such as Mediaserver.

## Acknowledgements

We would like to thank these researchers for their contributions:

* Aravind Machiry (donfos) of Shellphish Grill Team: CVE-2016-5349
* Daxing Guo ([@freener0](https://twitter.com/freener0)) of Xuanwu
  Lab, Tencent: CVE-2017-0585, CVE-2017-0553
* Derrek ([@derrekr6](https://twitter.com/derrekr6)) and Scott Bauer:
  CVE-2017-0576
* Gal Beniamini of Project Zero: CVE-2017-0571, CVE-2017-0570, CVE-2017-0572,
  CVE-2017-0569, CVE-2017-0561
* Gengjia Chen ([@chengjia4574](https://twitter.com/chengjia4574))
  and [pjf](http://weibo.com/jfpan) of IceSword Lab, Qihoo 360
  Technology Co. Ltd.: CVE-2017-6426, CVE-2017-0581, CVE-2017-0329, CVE-2017-0332,
  CVE-2017-0566, CVE-2017-0573
* Guang Gong (龚广) ([@oldfresher](https://twitter.com/oldfresher))
  of Alpha Team, Qihoo 360 Technology Co. Ltd.: CVE-2017-0547
* Hao Chen and Guang Gong of Alpha Team, Qihoo 360 Technology Co. Ltd.:
  CVE-2017-6424, CVE-2017-0584, CVE-2017-0454, CVE-2017-0574, CVE-2017-0575, CVE-2017-0567
* Ian Foster ([@lanrat](https://twitter.com/lanrat)): CVE-2017-0554
* Jack Tang of Trend Micro Inc.: CVE-2017-0579
* Jianjun Dai ([@Jioun\_dai](https://twitter.com/Jioun_dai)) of [Qihoo 360 Skyeye Labs](https://skyeye.360safe.com): CVE-2017-0559,
  CVE-2017-0541
* Jianqiang Zhao ([@jianqiangzhao](https://twitter.com/jianqiangzhao)) and [pjf](http://weibo.com/jfpan) of IceSword Lab, Qihoo 360: CVE-2017-6425,
  CVE-2016-5346
* Lubo Zhang (zlbzlb815@163.com) of
  [C0RE Team](http://c0reteam.org) and Yonggang Guo
  ([@guoygang](https://twitter.com/guoygang)) of IceSword Lab, Qihoo
  360 Technology Co. Ltd.: CVE-2017-0564
* Mark Salyzyn of Google:
  CVE-2017-0558
* Mike Andereson ([@manderbot](https://twitter.com/manderbot)) and
  Nathan Crandall ([@natecray](https://twitter.com/natecray)) of
  Tesla's Product Security Team: CVE-2017-0327, CVE-2017-0328
* Peng Xiao, Chengming Yang, Ning You, Chao Yang, and Yang song of Alibaba
  Mobile Security Group: CVE-2017-0565
* Pengfei Ding (丁鹏飞), Chenfu Bao (包沉浮), and Lenx Wei (韦韬) of Baidu X-Lab
  (百度安全实验室): CVE-2016-10236
* Qidan He (何淇丹 - [@flanker\_hqd](https://twitter.com/flanker_hqd))
  of KeenLab, Tencent: CVE-2017-0544, CVE-2017-0325
* Roee Hay ([@roeehay](https://twitter.com/roeehay)) of Aleph
  Research, HCL Technologies: CVE-2017-0582, CVE-2017-0563
* Scott Bauer ([@ScottyBauer1](https://twitter.com/ScottyBauer1)): CVE-2017-0562,
  CVE-2017-0339
* Seven Shen ([@lingtongshen](https://twitter.com/lingtongshen)) of
  TrendMicro Mobile Threat Research Team: CVE-2016-10231, CVE-2017-0578, CVE-2017-0586
* Tim Becker: CVE-2017-0546
* Uma Sankar Pradhan ([@umasankar\_iitd](https://twitter.com/umasankar_iitd)): CVE-2017-0560
* V.E.O ([@VYSEa](https://twitter.com/vysea)) of [Mobile
  Threat Response Team](http://blog.trendmicro.com/trendlabs-security-intelligence/category/mobile), [Trend Micro](http://www.trendmicro.com):
  CVE-2017-0555, CVE-2017-0538, CVE-2017-0539, CVE-2017-0557,
  CVE-2017-0556
* Weichao Sun ([@sunblate](https://twitter.com/sunblate)) of
  Alibaba Inc: CVE-2017-0549
* Wenlin Yang ([@wenlin\_yang](https://twitter.com/wenlin_yang)),
  Guang Gong ([@oldfresher](https://twitter.com/oldfresher)), and Hao
  Chen of Alpha Team, Qihoo 360 Technology Co. Ltd.: CVE-2017-0580, CVE-2017-0577
* [Zinuo Han](http://weibo.com/ele7enxxh) from Chengdu Security
  Response Center of Qihoo 360 Technology Co. Ltd.: CVE-2017-0548
* Zubin Mithra of Google: CVE-2017-0462

## 2017-04-01 security patch level—Vulnerability details

In the sections below, we provide details for each of the security
vulnerabilities that apply to the 2017-04-01 patch level.There is a description
of the issue, a severity rationale, and a table with the CVE, associated
references, severity, updated Google devices, updated AOSP versions (where
applicable), and date reported. When available, we will link the public change
that addressed the issue to the bug ID, like the AOSP change list. When multiple
changes relate to a single bug, additional references are linked to numbers
following the bug ID.

### Remote code execution vulnerability in Mediaserver

A remote code execution vulnerability in Mediaserver could enable an attacker
using a specially crafted file to cause memory corruption during media file and
data processing. This issue is rated as Critical due to the possibility of
remote code execution within the context of the Mediaserver process.

| CVE | References | Severity | Updated Google devices | Updated AOSP versions | Date reported |
| CVE-2017-0538 | [A-33641588](https://android.googlesource.com/platform/external/libavc/%2B/494561291a503840f385fbcd11d9bc5f4dc502b8) | Critical | All | 6.0, 6.0.1, 7.0, 7.1.1 | Dec 13, 2016 |
| CVE-2017-0539 | [A-33864300](https://android.googlesource.com/platform/external/libhevc/%2B/1ab5ce7e42feccd49e49752e6f58f9097ac5d254) | Critical | All | 5.0.2, 5.1.1, 6.0, 6.0.1, 7.0, 7.1.1 | Dec 23, 2016 |
| CVE-2017-0541 | [A-34031018](https://android.googlesource.com/platform/external/sonivox/%2B/56d153259cc3e16a6a0014199a2317dde333c978) | Critical | All | 4.4.4, 5.0.2, 5.1.1, 6.0, 6.0.1, 7.0, 7.1.1 | Jan 1, 2017 |
| CVE-2017-0542 | [A-33934721](https://android.googlesource.com/platform/external/libavc/%2B/33ef7de9ddc8ea7eb9cbc440d1cf89957a0c267b) | Critical | All | 6.0, 6.0.1, 7.0, 7.1.1 | Google internal |
| CVE-2017-0543 | [A-34097866](https://android.googlesource.com/platform/external/libavc/%2B/f634481e940421020e52f511c1fb34aac1db4b2f) | Critical | All | 6.0, 6.0.1, 7.0, 7.1.1 | Google internal |

### Elevation of privilege vulnerability in CameraBase

An elevation of privilege vulnerability in CameraBase could enable a local
malicious application to execute arbitrary code. This issue is rated as High
because it is a local arbitrary code execution in a privileged process.

| CVE | References | Severity | Updated Google devices | Updated AOSP versions | Date reported |
| CVE-2017-0544 | [A-31992879](https://android.googlesource.com/platform/frameworks/av/%2B/4b49489c12e6862e9a320ebcb53872e809ed20ec) | High | All | 4.4.4, 5.0.2, 5.1.1, 6.0, 6.0.1, 7.0, 7.1.1 | Oct 6, 2016 |

### Elevation of privilege vulnerability in Audioserver

An elevation of privilege vulnerability in Audioserver could enable a local
malicious application to execute arbitrary code within the context of a
privileged process. This issue is rated as High because it could be used to
gain local access to elevated capabilities, which are not normally accessible
to a third-party application.

| CVE | References | Severity | Updated Google devices | Updated AOSP versions | Date reported |
| CVE-2017-0545 | [A-32591350](https://android.googlesource.com/platform/frameworks/av/%2B/e5a54485e08400a976092cd5b1c6d909d0e1a4ab) | High | All | 5.0.2, 5.1.1, 6.0, 6.0.1, 7.0, 7.1.1 | Oct 31, 2016 |

### Elevation of privilege vulnerability in SurfaceFlinger

An elevation of privilege vulnerability in SurfaceFlinger could enable a local
malicious application to execute arbitrary code within the context of a
privileged process. This issue is rated as High because it could be used to
gain local access to elevated capabilities, which are not normally accessible
to a third-party application.

| CVE | References | Severity | Updated Google devices | Updated AOSP versions | Date reported |
| CVE-2017-0546 | [A-32628763](https://android.googlesource.com/platform/frameworks/native/%2B/45b202513ba7440beaefbf9928f73fb6683dcfbd) | High | All | 4.4.4, 5.0.2, 5.1.1, 6.0, 6.0.1, 7.0, 7.1.1 | Nov 2, 2016 |

### Information disclosure vulnerability in Mediaserver

An information disclosure vulnerability in Mediaserver could enable a local
malicious application to access data outside of its permission levels. This
issue is rated as High because it is a general bypass for operating system
protections that isolate application data from other applications.

| CVE | References | Severity | Updated Google devices | Updated AOSP versions | Date reported |
| CVE-2017-0547 | [A-33861560](https://android.googlesource.com/platform/frameworks/av/%2B/9667e3eff2d34c3797c3b529370de47b2c1f1bf6) | High | All | 4.4.4, 5.0.2, 5.1.1, 6.0, 6.0.1, 7.0, 7.1.1 | Dec 22, 2016 |

### Denial of service vulnerability in libskia

A remote denial of service vulnerability in libskia could enable an attacker to
use a specially crafted file to cause a device hang or reboot. This issue is
rated as High severity due to the possibility of remote denial of service.

| CVE | References | Severity | Updated Google devices | Updated AOSP versions | Date reported |
| CVE-2017-0548 | [A-33251605](https://android.googlesource.com/platform/external/skia/%2B/318e3505ac2436c62ec19fd27ebe9f8e7d174544) | High | All | 7.0, 7.1.1 | Nov 29, 2016 |

### Denial of service vulnerability in Mediaserver

A remote denial of service vulnerability in Mediaserver could enable an
attacker to use a specially crafted file to cause a device hang or reboot. This
issue is rated as High severity due to the possibility of remote denial of
service.

| CVE | References | Severity | Updated Google devices | Updated AOSP versions | Date reported |
| CVE-2017-0549 | [A-33818508](https://android.googlesource.com/platform/external/libavc/%2B/37345554fea84afd446d6d8fbb87feea5a0dde3f) | High | All | 6.0, 6.0.1, 7.0, 7.1.1 | Dec 20, 2016 |
| CVE-2017-0550 | [A-33933140](https://android.googlesource.com/platform/external/libavc/%2B/7950bf47b6944546a0aff11a7184947de9591b51) | High | All | 6.0, 6.0.1, 7.0, 7.1.1 | Google internal |
| CVE-2017-0551 | [A-34097231](https://android.googlesource.com/platform/external/libavc/%2B/8b5fd8f24eba5dd19ab2f80ea11a9125aa882ae2) [[2](https://android.googlesource.com/platform/external/libavc/%2B/494561291a503840f385fbcd11d9bc5f4dc502b8)] | High | All | 6.0, 6.0.1, 7.0, 7.1.1 | Google internal |
| CVE-2017-0552 | [A-34097915](https://android.googlesource.com/platform/external/libavc/%2B/9a00f562a612d56e7b2b989d168647db900ba6cf) | High | All | 6.0, 6.0.1, 7.0, 7.1.1 | Google internal |

### Elevation of privilege vulnerability in libnl

An elevation of privilege vulnerability in libnl could enable a local malicious
application to execute arbitrary code within the context of the Wi-Fi service.
This issue is rated as Moderate because it first requires compromising a
privileged process and is mitigated by current platform configurations.

| CVE | References | Severity | Updated Google devices | Updated AOSP versions | Date reported |
| CVE-2017-0553 | [A-32342065](https://android.googlesource.com/platform/external/libnl/%2B/f83d9c1c67b6be69a96995e384f50b572b667df0) | Moderate | All | 5.0.2, 5.1.1, 6.0, 6.0.1, 7.0, 7.1.1 | Oct 21, 2016 |

### Elevation of privilege vulnerability in Telephony

An elevation of privilege vulnerability in the Telephony component could enable
a local malicious application to access capabilities outside of its permission
levels. This issue is rated as Moderate because it could be used to gain access
to elevated capabilities, which are not normally accessible to a third-party
application.

| CVE | References | Severity | Updated Google devices | Updated AOSP versions | Date reported |
| CVE-2017-0554 | [A-33815946](https://android.googlesource.com/platform/packages/services/Telephony/%2B/aeb795ef2290af1a0e4b14909363bc574e6b3ee7) [[2](https://android.googlesource.com/platform/frameworks/base/%2B/3294256ba5b9e2ba2d8619d617e3d900e5386564)] | Moderate | All | 4.4.4, 5.0.2, 5.1.1, 6.0, 6.0.1, 7.0, 7.1.1 | Dec 20, 2016 |

### Information disclosure vulnerability in Mediaserver

An information disclosure vulnerability in Mediaserver could enable a local
malicious application to access data outside of its permission levels. This
issue is rated as Moderate because it could be used to access data without
permission.

| CVE | References | Severity | Updated Google devices | Updated AOSP versions | Date reported |
| CVE-2017-0555 | [A-33551775](https://android.googlesource.com/platform/external/libavc/%2B/0b23c81c3dd9ec38f7e6806a3955fed1925541a0) | Moderate | All | 6.0, 6.0.1, 7.0, 7.1.1 | Dec 12, 2016 |
| CVE-2017-0556 | [A-34093952](https://android.googlesource.com/platform/external/libmpeg2/%2B/f301cff2c1ddd880d9a2c77b22602a137519867b) | Moderate | All | 6.0, 6.0.1, 7.0, 7.1.1 | Jan 4, 2017 |
| CVE-2017-0557 | [A-34093073](https://android.googlesource.com/platform/external/libmpeg2/%2B/227c1f829127405e21dab1664393050c652ef71e) | Moderate | All | 6.0, 6.0.1, 7.0, 7.1.1 | Jan 4, 2017 |
| CVE-2017-0558 | [A-34056274](https://android.googlesource.com/platform/frameworks/av/%2B/50358a80b1724f6cf1bcdf003e1abf9cc141b122) | Moderate | All | 4.4.4, 5.0.2, 5.1.1, 6.0, 6.0.1, 7.0, 7.1.1 | Google internal |

### Information disclosure vulnerability in libskia

An information disclosure vulnerability in libskia could enable a local
malicious application to access data outside of its permission levels. This
issue is rated as Moderate because it could be used to access data without
permission.

| CVE | References | Severity | Updated Google devices | Updated AOSP versions | Date reported |
| CVE-2017-0559 | [A-33897722](https://android.googlesource.com/platform/external/skia/%2B/16882f721279a82a1c860ac689ce570b16fe26a0) | Moderate | All | 4.4.4, 5.0.2, 5.1.1, 6.0, 6.0.1, 7.0, 7.1.1 | Dec 25, 2016 |

### Information disclosure vulnerability in Factory Reset

An information disclosure vulnerability in the factory reset process could
enable a local malicious attacker to access data from the previous owner. This
issue is rated as Moderate due to the possibility of bypassing device
protection.

| CVE | References | Severity | Updated Google devices | Updated AOSP versions | Date reported |
| CVE-2017-0560 | [A-30681079](https://android.googlesource.com/platform/frameworks/base/%2B/efdec8f5688ce6b0a287eddb6d5dad93ffa0e1ee) | Moderate | All | 4.4.4, 5.0.2, 5.1.1, 6.0, 6.0.1, 7.0, 7.1.1 | Google internal |

## 2017-04-05 security patch level—Vulnerability details

In the sections below, we provide details for each of the security
vulnerabilities that apply to the 2017-04-05 patch level. There is a description
of the issue, a severity rationale, and a table with the CVE, associated
references, severity, updated Google devices, updated AOSP versions (where
applicable), and date reported. When available, we will link the public change
that addressed the issue to the bug ID, like the AOSP change list. When multiple
changes relate to a single bug, additional references are linked to numbers
following the bug ID.

### Remote code execution vulnerability in Broadcom Wi-Fi firmware

A remote code execution vulnerability in the Broadcom Wi-Fi firmware could
enable a remote attacker to execute arbitrary code within the context of the
Wi-Fi SoC. This issue is rated as Critical due to the possibility of remote
code execution in the context of the Wi-Fi SoC.

| CVE | References | Severity | Updated Google devices | Date reported |
| CVE-2017-0561 | A-34199105\* B-RB#110814 | Critical | Nexus 6, Nexus 6P, Nexus 9, Pixel C, Nexus Player | Jan 9, 2017 |

\* The patch for this issue is not publicly available. The update is contained
in the latest binary drivers for Nexus devices available from the
[Google Developer site](https://developers.google.com/android/nexus/drivers).

### Remote code execution vulnerability in Qualcomm crypto engine driver

A remote code execution vulnerability in the Qualcomm crypto engine driver
could enable a remote attacker to execute arbitrary code within the context of
the kernel. This issue is rated as Critical due to the possibility of remote
code execution in the context of the kernel.

| CVE | References | Severity | Updated Google devices | Date reported |
| CVE-2016-10230 | A-34389927 [QC-CR#1091408](https://source.codeaurora.org/quic/la//kernel/msm-3.18/commit/?id=bd9a8fc6d7f6bd1a0b936994630006de450df657) | Critical | Nexus 5X, Nexus 6, Nexus 6P, Pixel, Pixel XL, Android One | Jan 10, 2017 |

### Remote code execution vulnerability in kernel networking subsystem

A remote code execution vulnerability in the kernel networking subsystem could
enable a remote attacker to execute arbitrary code within the context of the
kernel. This issue is rated as Critical due to the possibility of remote code
execution in the context of the kernel.

| CVE | References | Severity | Updated Google devices | Date reported |
| CVE-2016-10229 | A-32813456 [Upstream kernel](http://git.kernel.org/cgit/linux/kernel/git/stable/linux-stable.git/commit/?id=197c949e7798fbf28cfadc69d9ca0c2abbf93191) | Critical | Nexus 5X, Nexus 6, Nexus 6P, Pixel, Pixel XL, Pixel C, Android One, Nexus Player | Google internal |

### Elevation of privilege vulnerability in MediaTek touchscreen driver

An elevation of privilege vulnerability in the MediaTek touchscreen driver
could enable a local malicious application to execute arbitrary code within the
context of the kernel. This issue is rated as Critical due to the possibility
of a local permanent device compromise, which may require reflashing the
operating system to repair the device.

| CVE | References | Severity | Updated Google devices | Date reported |
| CVE-2017-0562 | A-30202425\* M-ALPS02898189 | Critical\* | None\*\* | Jul 16, 2016 |

\* The patch for this issue is not publicly available. The update is contained
in the latest binary drivers for Nexus devices available from the
[Google Developer site](https://developers.google.com/android/nexus/drivers).

\*\* Supported Google devices on Android 7.0 or later that have installed all
available updates are not affected by this vulnerability.

### Elevation of privilege vulnerability in HTC touchscreen driver

An elevation of privilege vulnerability in the HTC touchscreen driver could
enable a local malicious application to execute arbitrary code within the
context of the kernel. This issue is rated as Critical due to the possibility
of a local permanent device compromise, which may require reflashing the
operating system to repair the device.

| CVE | References | Severity | Updated Google devices | Date reported |
| CVE-2017-0563 | A-32089409\* | Critical | Nexus 9 | Oct 9, 2016 |

\* The patch for this issue is not publicly available. The update is contained
in the latest binary drivers for Nexus devices available from the
[Google Developer site](https://developers.google.com/android/nexus/drivers).

### Elevation of privilege vulnerability in kernel ION subsystem

An elevation of privilege vulnerability in the kernel ION subsystem could
enable a local malicious application to execute arbitrary code within the
context of the kernel. This issue is rated as Critical due to the possibility
of a local permanent device compromise, which may require reflashing the
operating system to repair the device.

| CVE | References | Severity | Updated Google devices | Date reported |
| CVE-2017-0564 | A-34276203\* | Critical | Nexus 5X, Nexus 6, Nexus 6P, Pixel, Pixel XL, Pixel C, Android One, Nexus Player | Jan 12, 2017 |

\* The patch for this issue is not publicly available. The update is contained
in the latest binary drivers for Nexus devices available from the
[Google Developer site](https://developers.google.com/android/nexus/drivers).

### Vulnerabilities in Qualcomm components

These vulnerabilities affect Qualcomm components and are described in further
detail in the Qualcomm AMSS October 2016 security bulletin.

| CVE | References | Severity | Updated Google devices | Date reported |
| CVE-2016-10237 | A-31628601\*\* QC-CR#1046751 | Critical | None\*\* | Qualcomm internal |
| CVE-2016-10238 | A-35358527\*\* QC-CR#1042558 | Critical | None\*\*\* | Qualcomm internal |
| CVE-2016-10239 | A-31624618\*\* QC-CR#1032929 | High | Pixel, Pixel XL | Qualcomm internal |

\* The severity rating for these vulnerabilities was determined by the vendor.

\* The patch for this issue is not publicly available. The update is contained
in the latest binary drivers for Nexus devices available from the
[Google Developer site](https://developers.google.com/android/nexus/drivers).

\*\*\* Supported Google devices on Android 7.0 or later that have installed all
available updates are not affected by this vulnerability.

### Remote code execution vulnerability in v8

A remote code execution vulnerability in v8 could enable remote attackers to
execute arbitrary code within the context of a privileged process. This issue
is rated as High due to the possibility of remote code execution in websites.

| CVE | References | Severity | Updated Google devices | Updated AOSP versions | Date reported |
| CVE-2016-5129 | A-29178923 | High | None\* | 6.0, 6.0.1, 7.0 | Jul 20, 2016 |

\* Supported Google devices on Android 7.0 or later that have installed all
available updates are not affected by this vulnerability.

### Remote code execution vulnerability in Freetype

A remote code execution vulnerability in Freetype could enable a local
malicious application to load a specially crafted font to cause memory
corruption in an unprivileged process. This issue is rated as High due to the
possibility of remote code execution in an application that uses this library.

| CVE | References | Severity | Updated Google devices | Updated AOSP versions | Date reported |
| CVE-2016-10244 | A-31470908 | High | None\* | 4.4.4, 5.0.2, 5.1.1, 6.0, 6.0.1, 7.0 | Sep 13, 2016 |

\* Supported Google devices on Android 7.0 or later that have installed all
available updates are not affected by this vulnerability.

### Elevation of privilege vulnerability in kernel sound subsystem

An elevation of privilege vulnerability in the kernel sound subsystem could
enable a local malicious application to execute arbitrary code within the
context of the kernel. This issue is rated as High because it first requires
compromising a privileged process.

| CVE | References | Severity | Updated Google devices | Date reported |
| CVE-2014-4656 | A-34464977 [Upstream kernel](http://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/commit/?id=883a1d49f0d77d30012f114b2e19fc141beb3e8e) | High | Nexus 6, Nexus Player | Jun 26, 2014 |

### Elevation of privilege vulnerability in NVIDIA crypto driver

An elevation of privilege vulnerability in the NVIDIA crypto driver could
enable a local malicious application to execute arbitrary code within the
context of the kernel. This issue is rated as High because it first requires
compromising a privileged process.

| CVE | References | Severity | Updated Google devices | Date reported |
| CVE-2017-0339 | A-27930566\* N-CVE-2017-0339 | High | Nexus 9 | Mar 29, 2016 |
| CVE-2017-0332 | A-33812508\* N-CVE-2017-0332 | High | Nexus 9 | Dec 21, 2016 |
| CVE-2017-0327 | A-33893669\* N-CVE-2017-0327 | High | Nexus 9 | Dec 24, 2016 |

\* The patch for this issue is not publicly available. The update is contained
in the latest binary drivers for Nexus devices available from the
[Google Developer site](https://developers.google.com/android/nexus/drivers).

### Elevation of privilege vulnerability in MediaTek thermal driver

An elevation of privilege vulnerability in the MediaTek thermal driver could
enable a local malicious application to execute arbitrary code within the
context of the kernel. This issue is rated as High because it first requires
compromising a privileged process.

| CVE | References | Severity | Updated Google devices | Date reported |
| CVE-2017-0565 | A-28175904\* M-ALPS02696516 | High | None\*\* | Apr 11, 2016 |

\* The patch for this issue is not publicly available. The update is contained
in the latest binary drivers for Nexus devices available from the
[Google Developer site](https://developers.google.com/android/nexus/drivers).

\*\* Supported Google devices on Android 7.0 or later that have installed all
available updates are not affected by this vulnerability.

### Elevation of privilege vulnerability in MediaTek camera driver

An elevation of privilege vulnerability in the MediaTek camera driver could
enable a local malicious application to execute arbitrary code within the
context of the kernel. This issue is rated as High because it first requires
compromising a privileged process.

| CVE | References | Severity | Updated Google devices | Date reported |
| CVE-2017-0566 | A-28470975\* M-ALPS02696367 | High | None\*\* | Apr 29, 2016 |

\* The patch for this issue is not publicly available. The update is contained
in the latest binary drivers for Nexus devices available from the
[Google Developer site](https://developers.google.com/android/nexus/drivers).

\*\* Supported Google devices on Android 7.0 or later that have installed all
available updates are not affected by this vulnerability.

### Elevation of privilege vulnerability in Broadcom Wi-Fi driver

An elevation of privilege vulnerability in the Broadcom Wi-Fi driver could
enable a local malicious application to execute arbitrary code within the
context of the kernel. This issue is rated as High because it first requires
compromising a privileged process.

| CVE | References | Severity | Updated Google devices | Date reported |
| CVE-2017-0567 | A-32125310\* B-RB#112575 | High | Nexus 6, Nexus 6P, Nexus 9, Pixel C, Nexus Player | Oct 12, 2016 |
| CVE-2017-0568 | A-34197514\* B-RB#112600 | High | Nexus 6, Nexus 6P, Nexus 9, Pixel C, Nexus Player | Jan 9, 2017 |
| CVE-2017-0569 | A-34198729\* B-RB#110666 | High | Nexus 6, Nexus 6P, Nexus 9, Pixel C, Nexus Player | Jan 9, 2017 |
| CVE-2017-0570 | A-34199963\* B-RB#110688 | High | Nexus 6, Nexus 6P, Nexus 9, Pixel C, Nexus Player | Jan 9, 2017 |
| CVE-2017-0571 | A-34203305\* B-RB#111541 | High | Nexus 6, Nexus 6P, Pixel C, Nexus Player | Jan 9, 2017 |
| CVE-2017-0572 | A-34198931\* B-RB#112597 | High | None\*\* | Jan 9, 2017 |
| CVE-2017-0573 | A-34469904\* B-RB#91539 | High | Nexus 6, Nexus 6P, Nexus 9, Pixel C, Nexus Player | Jan 18, 2017 |
| CVE-2017-0574 | A-34624457\* B-RB#113189 | High | Nexus 6, Nexus 6P, Nexus 9, Pixel C | Jan 22, 2017 |

\* The patch for this issue is not publicly available. The update is contained
in the latest binary drivers for Nexus devices available from the
[Google Developer site](https://developers.google.com/android/nexus/drivers).

\*\* Supported Google devices on Android 7.0 or later that have installed all
available updates are not affected by this vulnerability.

### Elevation of privilege vulnerability in Qualcomm Wi-Fi driver

An elevation of privilege vulnerability in the Qualcomm Wi-Fi driver could
enable a local malicious application to execute arbitrary code within the
context of the kernel. This issue is rated as High because it first requires
compromising a privileged process.

| CVE | References | Severity | Updated Google devices | Date reported |
| CVE-2017-0575 | A-32658595\* QC-CR#1103099 | High | Nexus 5X, Pixel, Pixel XL | Nov 3, 2016 |

\* The patch for this issue is not publicly available. The update is contained
in the latest binary drivers for Nexus devices available from the
[Google Developer site](https://developers.google.com/android/nexus/drivers).

### Elevation of privilege vulnerability in NVIDIA I2C HID driver

An elevation of privilege vulnerability in the NVIDIA I2C HID driver could
enable a local malicious application to execute arbitrary code within the
context of the kernel. This issue is rated as High because it first requires
compromising a privileged process.

| CVE | References | Severity | Updated Google devices | Date reported |
| CVE-2017-0325 | A-33040280\* N-CVE-2017-0325 | High | Nexus 9, Pixel C | Nov 20, 2016 |

\* The patch for this issue is not publicly available. The update is contained
in the latest binary drivers for Nexus devices available from the
[Google Developer site](https://developers.google.com/android/nexus/drivers).

### Elevation of privilege vulnerability in Qualcomm audio driver

An elevation of privilege vulnerability in the Qualcomm audio driver could
enable a local malicious application to execute arbitrary code within the
context of the kernel. This issue is rated as High because it first requires
compromising a privileged process.

| CVE | References | Severity | Updated Google devices | Date reported |
| CVE-2017-0454 | A-33353700 [QC-CR#1104067](https://source.codeaurora.org/quic/la/kernel/msm-3.18/commit/?id=cb0701a2f99fa19f01fbd4249bda9a8eadb0241f) | High | Nexus 5X, Nexus 6P, Pixel, Pixel XL | Dec 5, 2016 |

### Elevation of privilege vulnerability in Qualcomm crypto engine driver

An elevation of privilege vulnerability in the Qualcomm crypto engine driver
could enable a local malicious application to execute arbitrary code within the
context of the kernel. This issue is rated as High because it first requires
compromising a privileged process.

| CVE | References | Severity | Updated Google devices | Date reported |
| CVE-2017-0576 | A-33544431 [QC-CR#1103089](https://source.codeaurora.org/quic/la/kernel/msm-3.18/commit/?id=2b09507d78b25637df6879cd2ee2031b208b3532) | High | Nexus 5X, Nexus 6, Nexus 6P, Pixel, Pixel XL, Android One | Dec 9, 2016 |

### Elevation of privilege vulnerability in HTC touchscreen driver

An elevation of privilege vulnerability in the HTC touchscreen driver could
enable a local malicious application to execute arbitrary code within the
context of the kernel. This issue is rated as High because it first requires
compromising a privileged process.

| CVE | References | Severity | Updated Google devices | Date reported |
| CVE-2017-0577 | A-33842951\* | High | None\*\* | Dec 21, 2016 |

\* The patch for this issue is not publicly available. The update is contained
in the latest binary drivers for Nexus devices available from the
[Google Developer site](https://developers.google.com/android/nexus/drivers).

\*\* Supported Google devices on Android 7.0 or later that have installed all
available updates are not affected by this vulnerability.

### Elevation of privilege vulnerability in DTS sound driver

An elevation of privilege vulnerability in the DTS sound driver could enable a
local malicious application to execute arbitrary code within the context of the
kernel. This issue is rated as High because it first requires compromising a
privileged process.

| CVE | References | Severity | Updated Google devices | Date reported |
| CVE-2017-0578 | A-33964406\* | High | None\*\* | Dec 28, 2016 |

\* The patch for this issue is not publicly available. The update is contained
in the latest binary drivers for Nexus devices available from the
[Google Developer site](https://developers.google.com/android/nexus/drivers).

\*\* Supported Google devices on Android 7.0 or later that have installed all
available updates are not affected by this vulnerability.

### Elevation of privilege vulnerability in Qualcomm sound codec driver

An elevation of privilege vulnerability in the Qualcomm sound codec driver
could enable a local malicious application to execute arbitrary code within the
context of the kernel. This issue is rated as High because it first requires
compromising a privileged process.

| CVE | References | Severity | Updated Google devices | Date reported |
| CVE-2016-10231 | A-33966912 [QC-CR#1096799](https://source.codeaurora.org/quic/la//kernel/msm-3.18/commit/?id=3bfe5a89916f7d29492e9f6d941d108b688cb804) | High | Pixel, Pixel XL | Dec 29, 2016 |

### Elevation of privilege vulnerability in Qualcomm video driver

An elevation of privilege vulnerability in the Qualcomm video driver could
enable a local malicious application to execute arbitrary code within the
context of the kernel. This issue is rated as High because it first requires
compromising a privileged process.

| CVE | References | Severity | Updated Google devices | Date reported |
| CVE-2017-0579 | A-34125463\* QC-CR#1115406 | High | Nexus 5X, Nexus 6P, Pixel, Pixel XL | Jan 5, 2017 |
| CVE-2016-10232 | A-34386696 [QC-CR#1024872](https://source.codeaurora.org/quic/la//kernel/msm-3.10/commit/?id=21e0ead58e47798567d846b84f16f89cf69a57ae) [[2]](https://source.codeaurora.org/quic/la//kernel/msm-3.18/commit/?id=27f7b3b3059f6181e2786f886f4cd92f413bc30c) | High | Nexus 5X, Nexus 6P, Pixel, Pixel XL, Android One | Jan 10, 2017 |
| CVE-2016-10233 | A-34389926 [QC-CR#897452](https://source.codeaurora.org/quic/la/kernel/msm/commit/?id=d793c6d91ecba2a1fd206ad47a4fd408d290addf) | High | None\*\* | Jan 10, 2017 |

\* The patch for this issue is not publicly available. The update is contained
in the latest binary drivers for Nexus devices available from the
[Google Developer site](https://developers.google.com/android/nexus/drivers).

\*\* Supported Google devices on Android 7.0 or later that have installed all
available updates are not affected by this vulnerability.

### Elevation of privilege vulnerability in NVIDIA boot and power management processor driver

An elevation of privilege vulnerability in the NVIDIA boot and power management
processor driver could enable a local malicious application to execute
arbitrary code within the context of the boot and power management processor.
This issue is rated as High because it first requires compromising a privileged
process.

| CVE | References | Severity | Updated Google devices | Date reported |
| CVE-2017-0329 | A-34115304\* N-CVE-2017-0329 | High | Pixel C | Jan 5, 2017 |

\* The patch for this issue is not publicly available. The update is contained
in the latest binary drivers for Nexus devices available from the
[Google Developer site](https://developers.google.com/android/nexus/drivers).

### Elevation of privilege vulnerability in Synaptics touchscreen driver

An elevation of privilege vulnerability in the Synaptics Touchscreen driver
could enable a local malicious application to execute arbitrary code within the
context of the kernel. This issue is rated as High because it first requires
compromising a privileged process.

| CVE | References | Severity | Updated Google devices | Date reported |
| CVE-2017-0580 | A-34325986\* | High | None\*\* | Jan 16, 2017 |
| CVE-2017-0581 | A-34614485\* | High | None\*\* | Jan 22, 2017 |

\* The patch for this issue is not publicly available. The update is contained
in the latest binary drivers for Nexus devices available from the
[Google Developer site](https://developers.google.com/android/nexus/drivers).

\*\* Supported Google devices on Android 7.0 or later that have installed all
available updates are not affected by this vulnerability.

### Elevation of privilege vulnerability in Qualcomm Seemp driver

An elevation of privilege vulnerability in the Qualcomm Seemp driver could
enable a local malicious application to execute arbitrary code within the
context of the kernel. This issue is rated as High because it first requires
compromising a privileged process.

| CVE | References | Severity | Updated Google devices | Date reported |
| CVE-2017-0462 | A-33353601 [QC-CR#1102288](https://source.codeaurora.org/quic/la/kernel/msm-3.18/commit/?id=eb7b1426279e751b1fc3e86f434dc349945c1ae7) | High | Pixel, Pixel XL | Google internal |

### Elevation of privilege vulnerability in Qualcomm Kyro L2 driver

An elevation of privilege vulnerability in the Qualcomm Kyro L2 driver could
enable a local malicious application to execute arbitrary code within the
context of the kernel. This issue is rated as High because it first requires
compromising a privileged process.

| CVE | References | Severity | Updated Google devices | Date reported |
| CVE-2017-6423 | A-32831370 [QC-CR#1103158](https://source.codeaurora.org/quic/la/kernel/msm-3.18/commit/?id=0f264f812b61884390b432fdad081a3e995ba768) | High | Pixel, Pixel XL | Google internal |

### Elevation of privilege vulnerability in kernel file system

An elevation of privilege vulnerability in the kernel file system could enable
a local malicious application to execute arbitrary code within the context of
the kernel. This issue is rated as High because it first requires compromising
a privileged process.

| CVE | References | Severity | Updated Google devices | Date reported |
| CVE-2014-9922 | A-32761463 [Upstream kernel](http://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/commit/?id=69c433ed2ecd2d3264efd7afec4439524b319121) | High | Nexus 5X, Nexus 6, Nexus 6P, Nexus 9, Pixel, Pixel XL, Pixel C, Android One, Nexus Player | Oct 24, 2014 |

### Information disclosure vulnerability in kernel memory subsystem

An information disclosure vulnerability in the kernel memory subsystem could
enable a local malicious application to access data outside of its permission
levels. This issue is rated as High because it could be used to access
sensitive data without explicit user permission.

| CVE | References | Severity | Updated Google devices | Date reported |
| CVE-2014-0206 | A-34465735 [Upstream kernel](https://git.kernel.org/cgit/linux/kernel/git/stable/linux-stable.git/commit/?id=d36db46c2cba973557eb6138d22210c4e0cf17d6) | High | Nexus 6, Nexus Player | May 6, 2014 |

### Information disclosure vulnerability in kernel networking subsystem

An information disclosure vulnerability in the kernel networking subsystem
could enable a local malicious application to access data outside of its
permission levels. This issue is rated as High because it could be used to
access sensitive data without explicit user permission.

| CVE | References | Severity | Updated Google devices | Date reported |
| CVE-2014-3145 | A-34469585 [Upstream kernel](https://git.kernel.org/cgit/linux/kernel/git/stable/linux-stable.git/commit/?id=314760e66c35c8ffa51b4c4ca6948d207e783079) [[2]](http://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/commit/?id=05ab8f2647e4221cbdb3856dd7d32bd5407316b3) | High | Nexus 6, Nexus Player | May 9, 2014 |

### Information disclosure vulnerability in Qualcomm TrustZone

An information disclosure vulnerability in the Qualcomm TrustZone could enable
a local malicious application to access data outside of its permission levels.
This issue is rated as High because it could be used to access sensitive data
without explicit user permission.

| CVE | References | Severity | Updated Google devices | Date reported |
| CVE-2016-5349 | A-29083830 [QC-CR#1021945](https://source.codeaurora.org/quic/la//kernel/msm-3.18/commit/?id=7c3bf6557c62d904b15507eb451fda8fd7ef750c) [[2]](https://source.codeaurora.org/quic/la//kernel/msm-3.18/commit/?id=03853a58952834ac3e1e3007c9c680dd4c001a2f) [[3]](https://source.codeaurora.org/quic/la//kernel/msm-3.18/commit/?id=e3d969000fb60ecb9bc01667fa89957f67763514) [[4]](https://source.codeaurora.org/quic/la//kernel/msm-3.18/commit/?id=9bd398661cae758ffc557adc7de74ba32654e1f9) | High | Nexus 5X, Nexus 6, Nexus 6P, Pixel, Pixel XL, Android One | Jun 1, 2016 |

### Information disclosure vulnerability in Qualcomm IPA driver

An information disclosure vulnerability in the Qualcomm IPA driver could enable
a local malicious application to access data outside of its permission levels.
This issue is rated as High because it could be used to access sensitive data
without explicit user permission.

| CVE | References | Severity | Updated Google devices | Date reported |
| CVE-2016-10234 | A-34390017 [QC-CR#1069060](https://source.codeaurora.org/quic/la/kernel/msm-3.10/commit/?id=c7d7492c1e329fdeb28a7901c4cd634d41a996b1) [[2]](https://source.codeaurora.org/quic/la/kernel/msm-3.18/commit/?id=d12370c7f3ecded1867fbd6b70ded35db55cab1d) | High | Nexus 5X, Nexus 6P, Pixel, Pixel XL | Jan 10, 2017 |

### Denial of service vulnerability in kernel networking subsystem

A denial of service vulnerability in the kernel networking subsystem could
enable a remote attacker to use a specially crafted network packet to cause a
device hang or reboot. This issue is rated as High due to the possibility of
remote denial of service.

| CVE | References | Severity | Updated Google devices | Date reported |
| CVE-2014-2706 | A-34160553 [Upstream kernel](https://git.kernel.org/cgit/linux/kernel/git/stable/linux-stable.git/commit/?id=1d147bfa64293b2723c4fec50922168658e613ba) | High | Nexus Player | Apr 1, 2014 |

### Denial of service vulnerability in Qualcomm Wi-Fi driver

A denial of service vulnerability in the Qualcomm Wi-Fi driver could enable a
proximate attacker to cause a denial of service in the Wi-Fi subsystem. This
issue is rated as High due to the possibility of remote denial of service.

| CVE | References | Severity | Updated Google devices | Date reported |
| CVE-2016-10235 | A-34390620 [QC-CR#1046409](https://source.codeaurora.org/quic/la/platform/vendor/qcom-opensource/wlan/qcacld-2.0/commit/?id=5bb0059243515ecdac138cfdb4cee7259bbd0bbc) | High | None\*\* | Jan 10, 2017 |

\*\* Supported Google devices on Android 7.0 or later that have installed all
available updates are not affected by this vulnerability.

### Elevation of privilege vulnerability in kernel file system

An elevation of privilege vulnerability in the kernel file system could enable
a local malicious application to execute arbitrary code outside of its
permission levels. This issue is rated as Moderate because it first requires
compromising a privileged process and is mitigated by current platform
configurations.

| CVE | References | Severity | Updated Google devices | Date reported |
| CVE-2016-7097 | A-32458736 [Upstream kernel](http://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/commit/?id=073931017b49d9458aa351605b43a7e34598caef) | Moderate | Nexus 5X, Nexus 6, Nexus 6P, Nexus 9, Pixel, Pixel XL, Pixel C, Nexus Player | Aug 28, 2016 |

### Elevation of privilege vulnerability in Qualcomm Wi-Fi driver

An elevation of privilege vulnerability in the Qualcomm Wi-Fi driver could
enable a local malicious application to execute arbitrary code within the
context of the kernel. This issue is rated as Moderate because it first
requires compromising a privileged process and because of vulnerability
specific details which limit the impact of the issue.

| CVE | References | Severity | Updated Google devices | Date reported |
| CVE-2017-6424 | A-32086742 [QC-CR#1102648](https://source.codeaurora.org/quic/la/platform/vendor/qcom-opensource/wlan/qcacld-2.0/commit/?id=5cc2ac840e36a3342c5194c20b314f0bb95ef7e1) | Moderate | Nexus 5X, Pixel, Pixel XL, Android One | Oct 9, 2016 |

### Elevation of privilege vulnerability in Broadcom Wi-Fi driver

An elevation of privilege vulnerability in the Broadcom Wi-Fi driver could
enable a local malicious application to execute arbitrary code within the
context of the kernel. This issue is rated as Moderate because it first
requires compromising a privileged process and is mitigated by current platform
configurations.

| CVE | References | Severity | Updated Google devices | Date reported |
| CVE-2016-8465 | A-32474971\* B-RB#106053 | Moderate | Nexus 6, Nexus 6P, Nexus 9, Pixel C, Nexus Player | Oct 27, 2016 |

\* The patch for this issue is not publicly available. The update is contained
in the latest binary drivers for Nexus devices available from the
[Google Developer site](https://developers.google.com/android/nexus/drivers).

### Elevation of privilege vulnerability in HTC OEM fastboot command

An elevation of privilege vulnerability in the HTC OEM fastboot command could
enable a local malicious application to execute arbitrary code within the
context of the sensor hub. This issue is rated as Moderate because it first
requires exploitation of separate vulnerabilities.

| CVE | References | Severity | Updated Google devices | Date reported |
| CVE-2017-0582 | A-33178836\* | Moderate | Nexus 9 | Nov 28, 2016 |

\* The patch for this issue is not publicly available. The update is contained
in the latest binary drivers for Nexus devices available from the
[Google Developer site](https://developers.google.com/android/nexus/drivers).

### Elevation of privilege vulnerability in Qualcomm CP access driver

An elevation of privilege vulnerability in the Qualcomm CP access driver could
enable a local malicious application to execute arbitrary code within the
context of the kernel. This issue is rated as Moderate because it first
requires compromising a privileged process and because of vulnerability
specific details which limit the impact of the issue.

| CVE | References | Severity | Updated Google devices | Date reported |
| CVE-2017-0583 | A-32068683 [QC-CR#1103788](https://source.codeaurora.org/quic/la/kernel/msm-3.18/commit/?id=452d2ad331d20b19e8a0768c4b6e7fe1b65abe8f) | Moderate | Nexus 5X, Nexus 6P, Pixel, Pixel XL, Android One | Google internal |

### Information disclosure vulnerability in kernel media driver

An information disclosure vulnerability in the kernel media driver could enable
a local malicious application to access data outside of its permission levels.
This issue is rated as Moderate because it first requires compromising a
privileged process.

| CVE | References | Severity | Updated Google devices | Date reported |
| CVE-2014-1739 | A-34460642 [Upstream kernel](http://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/commit/?id=e6a623460e5fc960ac3ee9f946d3106233fd28d8) | Moderate | Nexus 6, Nexus 9, Nexus Player | Jun 15, 2014 |

### Information disclosure vulnerability in Qualcomm Wi-Fi driver

An information disclosure vulnerability in the Qualcomm Wi-Fi driver could
enable a local malicious application to access data outside of its permission
levels. This issue is rated as Moderate because it first requires compromising
a privileged process.

| CVE | References | Severity | Updated Google devices | Date reported |
| CVE-2017-0584 | A-32074353\* QC-CR#1104731 | Moderate | Nexus 5X, Pixel, Pixel XL | Oct 9, 2016 |

\* The patch for this issue is not publicly available. The update is contained
in the latest binary drivers for Nexus devices available from the
[Google Developer site](https://developers.google.com/android/nexus/drivers).

### Information disclosure vulnerability in Broadcom Wi-Fi driver

An information disclosure vulnerability in the Broadcom Wi-Fi driver could
enable a local malicious application to access data outside of its permission
levels. This issue is rated as Moderate because it first requires compromising
a privileged process.

| CVE | References | Severity | Updated Google devices | Date reported |
| CVE-2017-0585 | A-32475556\* B-RB#112953 | Moderate | Nexus 6, Nexus 6P, Nexus 9, Pixel C, Nexus Player | Oct 27, 2016 |

\* The patch for this issue is not publicly available. The update is contained
in the latest binary drivers for Nexus devices available from the
[Google Developer site](https://developers.google.com/android/nexus/drivers).

### Information disclosure vulnerability in Qualcomm Avtimer driver

An information disclosure vulnerability in the Qualcomm Avtimer driver could
enable a local malicious application to access data outside of its permission
levels. This issue is rated as Moderate because it first requires compromising
a privileged process.

| CVE | References | Severity | Updated Google devices | Date reported |
| CVE-2016-5346 | A-32551280 [QC-CR#1097878](https://source.codeaurora.org/quic/la//kernel/msm-3.18/commit/?id=6298a474322fb2182f795a622b2faa64abfd8474) | Moderate | Pixel, Pixel XL | Oct 29, 2016 |

### Information disclosure vulnerability in Qualcomm video driver

An information disclosure vulnerability in the Qualcomm video driver could
enable a local malicious application to access data outside of its permission
levels. This issue is rated as Moderate because it first requires compromising
a privileged process.

| CVE | References | Severity | Updated Google devices | Date reported |
| CVE-2017-6425 | A-32577085 [QC-CR#1103689](https://source.codeaurora.org/quic/la/kernel/msm-3.18/commit/?id=ef86560a21fe1f256f6ba772a195201ff202c657) | Moderate | Pixel, Pixel XL | Oct 29, 2016 |

### Information disclosure vulnerability in Qualcomm USB driver

An information disclosure vulnerability in the Qualcomm USB driver could enable
a local malicious application to access data outside of its permission levels.
This issue is rated as Moderate because it first requires compromising a
privileged process.

| CVE | References | Severity | Updated Google devices | Date reported |
| CVE-2016-10236 | A-33280689 [QC-CR#1102418](https://source.codeaurora.org/quic/la//kernel/msm-3.18/commit/?id=b8199c2b852f1e23c988e10b8fbb8d34c98b4a1c) | Moderate | Pixel, Pixel XL | Nov 30, 2016 |

### Information disclosure vulnerability in Qualcomm sound driver

An information disclosure vulnerability in the Qualcomm sound driver could
enable a local malicious application to access data outside of its permission
levels. This issue is rated as Moderate because it first requires compromising
a privileged process.

| CVE | References | Severity | Updated Google devices | Date reported |
| CVE-2017-0586 | A-33649808 QC-CR#1097569 | Moderate | Nexus 5X, Nexus 6, Nexus 6P, Pixel, Pixel XL, Android One | Dec 13, 2016 |

### Information disclosure vulnerability in Qualcomm SPMI driver

An information disclosure vulnerability in the Qualcomm SPMI driver could
enable a local malicious application to access data outside of its permission
levels. This issue is rated as Moderate because it first requires compromising
a privileged process.

| CVE | References | Severity | Updated Google devices | Date reported |
| CVE-2017-6426 | A-33644474 [QC-CR#1106842](https://source.codeaurora.org/quic/la//kernel/msm-3.18/commit/?id=80decd6365deec08c35ecb902a58f9210599b39a) | Moderate | Pixel, Pixel XL | Dec 14, 2016 |

### Information disclosure vulnerability in NVIDIA crypto driver

An information disclosure vulnerability in the NVIDIA crypto driver could
enable a local malicious application to access data outside of its permission
levels. This issue is rated as Moderate because it first requires compromising
a privileged process.

| CVE | References | Severity | Updated Google devices | Date reported |
| CVE-2017-0328 | A-33898322\* N-CVE-2017-0328 | Moderate | None\*\* | Dec 24, 2016 |
| CVE-2017-0330 | A-33899858\* N-CVE-2017-0330 | Moderate | None\*\* | Dec 24, 2016 |

\* The patch for this issue is not publicly available. The update is contained
in the latest binary drivers for Nexus devices available from the
[Google Developer site](https://developers.google.com/android/nexus/drivers).

\*\* Supported Google devices on Android 7.0 or later that have installed all
available updates are not affected by this vulnerability.

### Vulnerabilities in Qualcomm components

These vulnerabilities affecting Qualcomm components were released as part of
Qualcomm AMSS security bulletins between 2014–2016. They are included in this
Android security bulletin to associate their fixes with an Android security
patch level.

| CVE | References | Severity | Updated Google devices | Date reported |
| CVE-2014-9931 | A-35445101\*\* | Critical | None\*\* | Qualcomm internal |
| CVE-2014-9932 | A-35434683\*\* | Critical | Pixel, Pixel XL | Qualcomm internal |
| CVE-2014-9933 | A-35442512\*\* | Critical | None\*\* | Qualcomm internal |
| CVE-2014-9934 | A-35439275\*\* | Critical | None\*\* | Qualcomm internal |
| CVE-2014-9935 | A-35444951\*\* | Critical | None\*\* | Qualcomm internal |
| CVE-2014-9936 | A-35442420\*\* | Critical | None\*\* | Qualcomm internal |
| CVE-2014-9937 | A-35445102\*\* | Critical | None\*\* | Qualcomm internal |
| CVE-2015-8995 | A-35445002\*\* | Critical | None\*\* | Qualcomm internal |
| CVE-2015-8996 | A-35444658\*\* | Critical | None\*\* | Qualcomm internal |
| CVE-2015-8997 | A-35432947\*\* | Critical | None\*\* | Qualcomm internal |
| CVE-2015-8998 | A-35441175\*\* | Critical | None\*\* | Qualcomm internal |
| CVE-2015-8999 | A-35445401\*\* | Critical | None\*\* | Qualcomm internal |
| CVE-2015-9000 | A-35441076\*\* | Critical | None\*\* | Qualcomm internal |
| CVE-2015-9001 | A-35445400\*\* | Critical | None\*\* | Qualcomm internal |
| CVE-2015-9002 | A-35442421\*\* | Critical | None\*\* | Qualcomm internal |
| CVE-2015-9003 | A-35440626\*\* | Critical | None\*\* | Qualcomm internal |
| CVE-2016-10242 | A-35434643\*\* | Critical | None\*\* | Qualcomm internal |

\* The severity rating for these vulnerabilities was determined by the vendor.

\*\* The patch for this issue is not publicly available. The update is contained
in the latest binary drivers for Nexus devices available from the
[Google Developer site](https://developers.google.com/android/nexus/drivers).

\*\*\* Supported Google devices on Android 7.0 or later that have installed all
available updates are not affected by this vulnerability.

## Common Questions and Answers

This section answers common questions that may occur after reading this
bulletin.

**1. How do I determine if my device is updated to address these issues?**

To learn how to check a device's security patch level, read the instructions on
the [Pixel
and Nexus update schedule](https://support.google.com/pixelphone/answer/4457705#pixel_phones&nexus_devices).

* Security patch levels of 2017-04-01 or later address all issues associated
  with the 2017-04-01 security patch level.
* Security patch levels of 2017-04-05 or later address all issues associated
  with the 2017-04-05 security patch level and all previous patch levels.

Device manufacturers that include these updates should set the patch string
level to:

* [ro.build.version.security\_patch]:[2017-04-01]
* [ro.build.version.security\_patch]:[2017-04-05]

**2. Why does this bulletin have two security patch levels?**

This bulletin has two security patch levels so that Android partners have the
flexibility to fix a subset of vulnerabilities that are similar across all
Android devices more quickly. Android partners are encouraged to fix all issues
in this bulletin and use the latest security patch level.

* Devices that use the April 01, 2017 security patch level must include all
  issues associated with that security patch level, as well as fixes for all
  issues reported in previous security bulletins.
* Devices that use the security patch level of April 05, 2017 or newer must
  include all applicable patches in this (and previous) security
  bulletins.

Partners are encouraged to bundle the fixes for all issues they are addressing
in a single update.

**3. How do I determine which Google devices are affected by each
issue?**

In the [2017-04-01](#2017-04-01-details) and
[2017-04-05](#2017-04-05-details)
security vulnerability details sections, each table has an *Updated Google
devices* column that covers the range of affected Google devices updated for
each issue. This column has a few options:

* **All Google devices**: If an issue affects All and Pixel
  devices, the table will have "All" in the *Updated Google devices*
  column. "All" encapsulates the following [supported
  devices](https://support.google.com/pixelphone/answer/4457705#pixel_phones&nexus_devices): Nexus 5X, Nexus 6, Nexus 6P, Nexus 9, Android One,
  Nexus Player, Pixel C, Pixel, and Pixel XL.
* **Some Google devices**: If an issue doesn't affect all Google
  devices, the affected Google devices are listed in the *Updated Google
  devices* column.
* **No Google devices**: If no Google devices running Android 7.0
  are affected by the issue, the table will have "None" in the *Updated Google
  devices* column.

**4. What do the entries in the references column map to?**

Entries under the *References* column of the vulnerability details table
may contain a prefix identifying the organization to which the reference value
belongs. These prefixes map as follows:

| Prefix | Reference |
| --- | --- |
| A- | Android bug ID |
| QC- | Qualcomm reference number |
| M- | MediaTek reference number |
| N- | NVIDIA reference number |
| B- | Broadcom reference number |

## Revisions

* April 03, 2017: Bulletin published.
* April 05, 2017: Bulletin revised to include AOSP links.
* April 21, 2017: Attribution for CVE-2016-10231 and CVE-2017-0586 corrected.
* April 27, 2017: CVE-2017-0540 removed from bulletin.
* August 17, 2017: Bulletin revised to update reference numbers.

Content and code samples on this page are subject to the licenses described in the [Content License](/license). Java and OpenJDK are trademarks or registered trademarks of Oracle and/or its affiliates.

Last updated 2024-08-26 UTC.

[[["Easy to understand","easyToUnderstand","thumb-up"],["Solved my problem","solvedMyProblem","thumb-up"],["Other","otherUp","thumb-up"]],[["Missing the information I need","missingTheInformationINeed","thumb-down"],["Too complicated / too many steps","tooComplicatedTooManySteps","thumb-down"],["Out of date","outOfDate","thumb-down"],["Samples / code issue","samplesCodeIssue","thumb-down"],["Other","otherDown","thumb-down"]],["Last updated 2024-08-26 UTC."],[],[]]

* ### Build

  + [Android repository](//android.googlesource.com)
  + [Requirements](/source/requirements)
  + [Downloading](/source/downloading)
  + [Preview binaries](//developers.google.com/android/blobs-preview/)
  + [Factory images](//developers.google.com/android/images/)
  + [Driver binaries](//developers.google.com/android/drivers/)
* ### Connect

  + [@Android on Twitter](//twitter.com/Android/)
  + [@AndroidDev on Twitter](//twitter.com/AndroidDev/)
  + [Android Blog](//blog.google/products/android/)
  + [Google Security Blog](//security.googleblog.com)
  + [Platform on Google Groups](//groups.google.com/forum/?fromgroups#!forum/android-platform/)
  + [Building on Google Groups](//groups.google.com/forum/?fromgroups#!forum/android-building/)
  + [Porting on Google Groups](//groups.google.com/forum/?fromgroups#!forum/android-porting/)
* ### Get help

  + [Android Help Center](//support.google.com/android/)
  + [Pixel Help Center](//support.google.com/pixelphone/)
  + [www.android.com](//www.android.com)
  + [Google Mobile Services](//www.android.com/gms/)
  + [Stack Overflow](//stackoverflow.com/questions/tagged/android-source/)
  + [Issue Tracker](//issuetracker.google.com/issues?q=status:open%20componentid:190923)

* [About Android](/source/)
* [Community](/source/community)
* [Legal](/legal)
* [License](/license)
* [Privacy](//policies.google.com/privacy)
* [Site feedback](//issuetracker.google.com/issues/new?component=191476)
* Manage cookies

* English
* Deutsch
* Español
* Español – América Latina
* Français
* Indonesia
* Italiano
* Polski
* Português
* Português – Brasil
* Tiếng Việt
* Türkçe
* Русский
* עברית
* العربيّة
* فارسی
* हिंदी
* বাংলা
* ภาษาไทย
* 中文 – 简体
* 中文 – 繁體
* 日本語
* 한국어



=== Content from www.linkedin.com_51d9e9b4_20250126_024554.html ===




=== Content from github.com_b9a080fc_20250126_024550.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fadvisories%2FGHSA-pqjc-5x4q-33rx)

**CVE-2014-1739**

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fadvisories%2FGHSA-pqjc-5x4q-33rx)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2Fadvisories%2F%3Cid%3E&source=header)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

1. [GitHub Advisory Database](/advisories)
2. [Unreviewed](/advisories?query=type%3Aunreviewed)
3. [CVE-2014-1739](/advisories/GHSA-pqjc-5x4q-33rx)

## The media\_device\_enum\_entities function in drivers/media...

Low severity

Unreviewed

Published
May 13, 2022
to the GitHub Advisory Database
•
Updated Feb 1, 2023

## Package

No package listed—
[Suggest a package](/advisories/GHSA-pqjc-5x4q-33rx/improve)

## Affected versions

Unknown

## Patched versions

Unknown

## Description

The media\_device\_enum\_entities function in drivers/media/media-device.c in the Linux kernel before 3.14.6 does not initialize a certain data structure, which allows local users to obtain sensitive information from kernel memory by leveraging /dev/media0 read access for a MEDIA\_IOC\_ENUM\_ENTITIES ioctl call.

### References

* <https://nvd.nist.gov/vuln/detail/CVE-2014-1739>
* [torvalds/linux@e6a6234](https://github.com/torvalds/linux/commit/e6a623460e5fc960ac3ee9f946d3106233fd28d8)
* <https://bugzilla.redhat.com/show_bug.cgi?id=1109774>
* <https://source.android.com/security/bulletin/2017-04-01>
* <http://git.kernel.org/?p=linux/kernel/git/torvalds/linux-2.6.git;a=commit;h=e6a623460e5fc960ac3ee9f946d3106233fd28d8>
* <http://lists.opensuse.org/opensuse-security-announce/2014-10/msg00006.html>
* <http://lists.opensuse.org/opensuse-security-announce/2014-10/msg00007.html>
* <http://secunia.com/advisories/59597>
* <http://speirofr.appspot.com/cve-2014-1739-kernel-infoleak-vulnerability-in-media_enum_entities.html>
* <http://www.kernel.org/pub/linux/kernel/v3.x/ChangeLog-3.14.6>
* <http://www.openwall.com/lists/oss-security/2014/06/15/1>
* <http://www.securityfocus.com/bid/68048>
* <http://www.securitytracker.com/id/1038201>
* <http://www.ubuntu.com/usn/USN-2259-1>
* <http://www.ubuntu.com/usn/USN-2261-1>
* <http://www.ubuntu.com/usn/USN-2263-1>
* <http://www.ubuntu.com/usn/USN-2264-1>

Published by the [National Vulnerability Database](https://nvd.nist.gov/vuln/detail/CVE-2014-1739)
Jun 23, 2014

Published to the GitHub Advisory Database
May 13, 2022

Last updated
Feb 1, 2023

### Severity

Low

### EPSS score

0.044%

# Exploit Prediction Scoring System (EPSS)

This score estimates the probability of this vulnerability being exploited within the next 30 days.
Data provided by [FIRST](https://www.first.org/epss/user-guide).

 (12th percentile)

### Weaknesses

[CWE-200](/advisories?query=cwe%3A200)

### CVE ID

CVE-2014-1739

### GHSA ID

GHSA-pqjc-5x4q-33rx

### Source code

No known source code

Dependabot alerts are not supported on this advisory because it does not have a package from a supported ecosystem with an affected and fixed version.

[Learn more about GitHub language support](https://docs.github.com/get-started/learning-about-github/github-language-support#about-supported-languages)

 Loading

Checking history

See something to contribute?
[Suggest improvements for this vulnerability](/advisories/GHSA-pqjc-5x4q-33rx/improve).

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from speirofr.appspot.com_d8e1e853_20250126_024551.html ===


* [**Salva PeirÃ³**](https://speirofr.appspot.com "Salva PeirÃ³ Software Engineer")
* [Profile](/#salva-peiro)
* [Education](/#education)
* [Publications](/#publications)
* [Projects](/#projects-with-active-participation-most-relevant)
* [Archives](/archives.html)

# [CVE-2015-7884: Kernel Infoleak vulnerability in vivid\_fb\_ioctl()](https://speirofr.appspot.com/cve-2015-7884-kernel-infoleak-vulnerability-in-vivid_fb_ioctl.html)

by [speiro](https://speirofr.appspot.com/author/speiro/index.html) -

Oct 22, 2015

-
[CVE-2015-7884](https://speirofr.appspot.com/tag/cve-2015-7884/index.html), [security](https://speirofr.appspot.com/tag/security/index.html), [kernel](https://speirofr.appspot.com/tag/kernel/index.html), [infoleak](https://speirofr.appspot.com/tag/infoleak/index.html),

# Summary

| **CVE** | [CVE-2015-7884](http://web.nvd.nist.gov/view/vuln/search-results?query=CVE-2015-7884) |
| --- | --- |
| **Author** | [Salva PeirÃ³](http://speirofr.appspot.com) |
| **Date** | October 2015 - Discovery of the vulnerability. |
| **Impact** | The vulnerability discloses 16 bytes of kernel process stack. |
| **Affected Versions** | From linux-3.17.0-rc1 to linux-4.3-rc6 |
| **Bug Timespan** | 1 year: from 2014 to 2015 commit [ad4e02d5081d9da38b5b91886e5fa71f0505d607](http://git.kernel.org/cgit/linux/kernel/git/next/linux-next.git/commit/?id=ad4e02d5081d9da38b5b91886e5fa71f0505d607) |
| **Patch fix** | commit [eda98796aff0d9bf41094b06811f5def3b4c333c](http://git.kernel.org/cgit/linux/kernel/git/next/linux-next.git/commit/?id=eda98796aff0d9bf41094b06811f5def3b4c333c) |

# Description

The vivid\_fb\_ioctl() code fails to initialize the 16 reserved bytes of
struct fb\_vblank after the ->hcount member. Add an explicit
memset(0) before filling the structure to avoid the info leak.

# The patch fixing the Infoleak

After verification the patch that fixes the vulnerability
has been â¦

[more ...](https://speirofr.appspot.com/cve-2015-7884-kernel-infoleak-vulnerability-in-vivid_fb_ioctl.html)

---

# [CVE-2015-7885: Kernel Infoleak vulnerability in dgnc\_mgmt\_ioctl()](https://speirofr.appspot.com/cve-2015-7885-kernel-infoleak-vulnerability-in-dgnc_mgmt_ioctl.html)

by [speiro](https://speirofr.appspot.com/author/speiro/index.html) -

Oct 22, 2015

-
[CVE-2015-7885](https://speirofr.appspot.com/tag/cve-2015-7885/index.html), [security](https://speirofr.appspot.com/tag/security/index.html), [kernel](https://speirofr.appspot.com/tag/kernel/index.html), [infoleak](https://speirofr.appspot.com/tag/infoleak/index.html),

# Summary

| **CVE** | [CVE-2015-7885](http://web.nvd.nist.gov/view/vuln/search-results?query=CVE-2015-7885) |
| --- | --- |
| **Author** | [Salva PeirÃ³](http://speirofr.appspot.com) |
| **Date** | October 2015 - Discovery of the vulnerability. |
| **Impact** | The vulnerability discloses 16 bytes of kernel process stack. |
| **Affected Versions** | From linux-3.11.0-rc3 to linux-4.3-rc6 |
| **Bug Timespan** | 2 years: from 2013 to 2015 commit [0b99d58902dd82fa51216eb8e0d6ddd8c43e90e4](http://git.kernel.org/cgit/linux/kernel/git/next/linux-next.git/commit/?id=0b99d58902dd82fa51216eb8e0d6ddd8c43e90e4) |
| **Patch fix** | commit [4b6184336ebb5c8dc1eae7f7ab46ee608a748b05](http://git.kernel.org/cgit/linux/kernel/git/next/linux-next.git/commit/?id=4b6184336ebb5c8dc1eae7f7ab46ee608a748b05) |

# Description

The dgnc\_mgmt\_ioctl() code fails to initialize the 16 reserved bytes of
struct digi\_dinfo after the ->dinfo\_nboards member. Add an explicit
memset(0) before filling the structure to avoid the info leak.

# The patch fixing the Infoleak

After verification the patch that fixes the vulnerability
has been â¦

[more ...](https://speirofr.appspot.com/cve-2015-7885-kernel-infoleak-vulnerability-in-dgnc_mgmt_ioctl.html)

---

# [CVE-2014-1739: Kernel Infoleak vulnerability in media\_enum\_entities()](https://speirofr.appspot.com/cve-2014-1739-kernel-infoleak-vulnerability-in-media_enum_entities.html)

by [speiro](https://speirofr.appspot.com/author/speiro/index.html) -

Apr 28, 2014

-
[CVE-2014-1739](https://speirofr.appspot.com/tag/cve-2014-1739/index.html), [security](https://speirofr.appspot.com/tag/security/index.html), [kernel](https://speirofr.appspot.com/tag/kernel/index.html), [infoleak](https://speirofr.appspot.com/tag/infoleak/index.html),

# Summary

| **CVE** | [CVE-2014-1739](http://web.nvd.nist.gov/view/vuln/search-results?query=CVE-2014-1739) |
| --- | --- |
| **Author** | [Salva PeirÃ³](http://speirofr.appspot.com) |
| **Date** | April 2014 - Discovery of the vulnerability. |
| **Impact** | The vulnerability discloses 200 bytes of kernel process stack. |
| **Affected Versions** | From linux-2.6.38 to linux-3.15-rc3 |
| **Bug Timespan** | 3 years: 2011-03-23 to 2014-04-29 commit [1651333b](https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/commit/drivers/media/media-device.c?id=1651333b09743887bc2dd3d158a11853a2be3fe7) |

# Description

During a code review of the kernel sources we found an infoleak vulnerability in the
ioctl `media_enum_entities()` that allows to disclose 200 bytes the kernel process' stack.
The vulnerability is exploitable on versions up to `linux-3.15-rc3` by local
users with read access to `/dev/media0`.
Linux distributions ship with `chmod â¦`

[more ...](https://speirofr.appspot.com/cve-2014-1739-kernel-infoleak-vulnerability-in-media_enum_entities.html)

---

# [[patch] cxt1e1: Correct Arbitrary memory write in c4\_ioctl()](https://speirofr.appspot.com/patch-cxt1e1-correct-arbitrary-memory-write-in-c4_ioctl.html)

by [speiro](https://speirofr.appspot.com/author/speiro/index.html) -

Mar 03, 2014

-
[security](https://speirofr.appspot.com/tag/security/index.html), [kernel](https://speirofr.appspot.com/tag/kernel/index.html), [arbitrary](https://speirofr.appspot.com/tag/arbitrary/index.html), [memory write](https://speirofr.appspot.com/tag/memory-write/index.html),

# Vulnerability Description

The function `c4_ioctl()` (listed below) writes data from user in `ifr->ifr_data`
to the kernel `struct data arg`, without performing any bounds checking.
This allows using a crafted iocmd to write outside of the `struct data arg`,
where `iolen = IOC_SIZE(iocmd)` can specify a maximum write size up to `2^14` bytes.

Triggering the write requires `CAP_SYS_ADMIN` capability
but even in the case of having admin rights it should be disallowed.

## Update

Starting with gcc-4.0, the gcc compiler allows to retrieve the size of an object
[GCC Object Size](http://gcc.gnu.org/onlinedocs/gcc/Object-Size-Checking.html).
The kernel uses the `builtin_object_size()` to implement checks â¦

[more ...](https://speirofr.appspot.com/patch-cxt1e1-correct-arbitrary-memory-write-in-c4_ioctl.html)

---

## Categories

* [CVEs](https://speirofr.appspot.com/category/cves/index.html)
* [Infoleaks](https://speirofr.appspot.com/category/infoleaks/index.html)
* [Learning](https://speirofr.appspot.com/category/learning/index.html)
* [Techniques](https://speirofr.appspot.com/category/techniques/index.html)

## Activity

* [SPADV-2018-01](/files/advisory/SPADV-2018-01.md)
* [CVE-2016-3178](/files/advisory/SPADV-2016-02.md)
* [CVE-2015-7885](/tag/cve-2015-7885/)
* [CVE-2015-7884](/tag/cve-2015-7884/)
* [CVE-2014-1739](/tag/cve-2014-1739/)
* [CVE-2014-1446](/tag/cve-2014-1446/)
* [CVE-2014-1445](/tag/cve-2014-1445/)

## Contact

* [Linkedin](https://www.linkedin.com/in/speiro)
* [ResearchGate](https://www.researchgate.net/profile/Salva_Peiro)
* [Atom feed](https://speirofr.appspot.com/feeds/atom.xml)



=== Content from secunia.com_c5a9401a_20250124_182026.html ===


[Skip to main content](#main-content)
[![Home](/themes/custom/flexera/images/logo.svg)](https://www.flexera.com/)

[![Home](/themes/custom/flexera/images/logo.svg)](https://www.flexera.com/)

Search

## Main navigation

* Solutions
  + Column 1
    - Business challenge
      * [Software renewals and audits](https://www.flexera.com/solutions/software-renewals-audits)
      * [Software license management and optimization](https://www.flexera.com/solutions/software-usage-costs)
      * [SaaS spend management](https://www.flexera.com/solutions/saas-spend)
      * [Cloud cost management](https://www.flexera.com/solutions/cloud-cost)
      * [IT asset lifecycle management](https://www.flexera.com/solutions/it-asset-lifecycle)
      * [CMDB data quality](https://www.flexera.com/solutions/cmdb-data-quality)
      * [Accurate IT inventory](https://www.flexera.com/solutions/it-inventory)
      * [Security and regulatory risk management](https://www.flexera.com/solutions/it-security-regulatory-risk)
      * [Sustainable IT](https://www.flexera.com/solutions/sustainable-it)
      * [AI-powered transformation](https://www.flexera.com/solutions/ai-powered-transformation)
      * [Public sector](https://www.flexera.com/solutions/public-sector)
  + Column 2
    - Spend management by vendor
      * [IBM](https://www.flexera.com/solutions/vendor/ibm)
      * [Oracle](https://www.flexera.com/solutions/vendor/oracle)
      * [Microsoft](https://www.flexera.com/solutions/vendor/microsoft)
      * [SAP](https://www.flexera.com/solutions/vendor/sap)
      * [VMware](https://www.flexera.com/solutions/vendor/vmware)
      * [ServiceNow](https://www.flexera.com/solutions/vendor/servicenow)
      * [AWS](https://www.flexera.com/solutions/vendor/aws)
      * [Salesforce](https://www.flexera.com/solutions/vendor/salesforce)
      * [BMC](https://www.flexera.com/solutions/cmdb-data-quality/bmc)
      * [Adobe](https://www.flexera.com/solutions/vendor/adobe)

  ### Achieve more through a united FinOps and ITAM function

  The future is hybrid. Break down the walls between ITAM and FinOps to drive more revenue, more customer growth and more innovation.

  [Discover More](https://www.flexera.com/resources/hybrid-itam-finops)
* Products
  + Column 1
    - [Flexera One](https://www.flexera.com/products/flexera-one)
      * [IT Visibility](https://www.flexera.com/products/flexera-one/it-visibility)
      * [ITAM](https://www.flexera.com/products/flexera-one/it-asset-management)
      * [SaaS Management](https://www.flexera.com/products/flexera-one/saas-management)
      * [FinOps](https://www.flexera.com/products/flexera-one/finops)
      * [Technology Intelligence Platform](https://www.flexera.com/products/flexera-one/technology-intelligence-platform)
  + Column 2
    - [Snow Atlas](https://www.flexera.com/products/snow-atlas)
      * [Snow Spend Optimizer](https://www.flexera.com/products/snow-atlas/snow-spend-optimizer)
      * [Snow SaaS Management](https://www.flexera.com/products/snow-atlas/snow-saas-management)
  + Column 3
    - Hide group
      * [Security](https://www.flexera.com/products/security)
      * [Application Readiness](https://www.flexera.com/products/adminstudio)
      * [All products](https://www.flexera.com/products)
      * [All Snow products](https://www.flexera.com/products/snow)
      * [Integrations](https://www.flexera.com/products/integrations)

  ### Flexera 2024 State of the Cloud Report

  What do transformative initiatives such as GenAI, machine learning and sustainability mean for the cloud? Check out the 2024 State of the Cloud Report to find the answer as well as all the latest cloud computing trends.

  [View Report](https://info.flexera.com/CM-REPORT-State-of-the-Cloud)
* Success
  + Column 1
    - [Customer success](https://www.flexera.com/customer-success)
      * Support
        + [Flexera support portal](https://community.flexera.com/s/support-hub)
        + [Flexera product documentation](https://docs.flexera.com)
        + [Snow product documentation](https://docs.snowsoftware.io/)
      * Services and training
        + [Services](https://www.flexera.com/customer-success/services)
        + [Training](https://www.flexera.com/customer-success/training)
  + Column 2
    - Hide group
      * [Technology Intelligence Awards](https://www.flexera.com/customer-success/awards)
      * [Flexera community](https://community.flexera.com/s/)

  ### Insights from Gartner®

  Find a curated series of actionable and objective insights for IT executives and their teams. Get expert insights from valued analysts, courtesy of Flexera.

  [Discover More](https://www.flexera.com/resources/gartner-analyst-research)
* Resources
  + Column 1
    - [Resources](https://www.flexera.com/resources)
      * [Webinars](https://www.flexera.com/resources?type%5Bwebinar%5D=webinar)
      * [Videos](https://www.flexera.com/resources?type%5Bvideo%5D=video)
      * [Datasheets](https://www.flexera.com/resources?type%5Bdatasheet%5D=datasheet)
      * [White papers & reports](https://www.flexera.com/resources?type%5Bwhite-paper-industry-report%5D=white-paper-industry-report)
  + Column 2
    - Hide group
      * [Blog](/blog/)
      * [Case studies](https://www.flexera.com/resources/case-studies)
      * [Events](https://www.flexera.com/resources?type%5Bevent%5D=event)
      * [Analyst Research](https://www.flexera.com/resources/gartner-analyst-research)
      * [Glossary](https://www.flexera.com/resources/glossary)
      * [Demos & trials](https://www.flexera.com/resources?type%5Bdemo-trials%5D=demo-trials)
      * [Business value calculator](https://www.flexera.com/resources/business-value-calculator)

  ### Flexera 2025 IT Priorities Report

  Insights from Flexera’s 2025 IT Priorities Report highlight what’s top of mind for IT decision makers in the year ahead. Discover the challenges, priorities and opportunities that will shape the future IT landscape.

  [View Report](https://info.flexera.com/ITV-REPORT-IT-Priorities)
* About
  + Column 1
    - [Company](https://www.flexera.com/about-us)
      * [About](https://www.flexera.com/about-us)
      * [Careers](https://www.flexera.com/about-us/careers)
      * [Contact](https://www.flexera.com/about-us/contact-us)
      * [Leadership](https://www.flexera.com/about-us/leadership)
    - [Partners](https://www.flexera.com/about-us/partners)
      * [Partner program](https://www.flexera.com/about-us/partners/partner-program)
      * [Partner directory](https://www.flexera.com/about-us/partners/directory)
  + Column 2
    - [Press center](https://www.flexera.com/about-us/press-center)
      * [Press releases](https://www.flexera.com/about-us/all-press-releases)
      * [Awards](https://www.flexera.com/about-us/press-center#awards)
      * [Articles](https://www.flexera.com/about-us/all-articles)
    - Hide group
      * Social responsibility
        + [ESG](https://www.flexera.com/about-us/environmental-social-governance)
        + [Diversity](https://www.flexera.com/about-us/diversity)

  ### More value with technology intelligence

  The unparalleled synergy of Flexera and Snow provides the Technology Intelligence you need for more efficiency, insight and governance than ever before.

  [Discover More](https://www.flexera.com/more-value-with-technology-intelligence)

Search

en

* [English](https://www.flexera.com/products/security/software-vulnerability-research/secunia-research?referrer=secunia)
* [Deutsch](https://www.flexera.de/products/security/software-vulnerability-research/secunia-research?referrer=secunia)

## External Links

* External Links
  + [Community](https://community.flexera.com/)
  + [Product Access](https://app.flexera.com/login)
  + [Partner Portal](https://flexera.channeltivity.com/Login)

[Book a demo](/about-us/contact-us?C_Interest1=sales)

# Secunia Research

## The world’s best vulnerability intelligence

The Secunia Research team from Flexera provides the most accurate and reliable source of vulnerability intelligence.

[Contact Us](https://www.flexera.com/about-us/contact-us?C_Interest1=sales&C_SolutionInterest=SVM)
Watch video (0:29)

Related links

* [Anatomy of a security advisory](https://www.flexera.com/resources/infographics/anatomy-of-a-security-advisory)
* [Software Vulnerability Research](https://www.flexera.com/products/software-vulnerability-research)
* [Software Vulnerability Manager](/products/software-vulnerability-manager)
* [Security advisories from Secunia Research](https://www.flexera.com/products/security/software-vulnerability-advisories)
* [Report a vulnerability](https://www.flexera.com/about-us/contact-us/report-vulnerability)

 ![Secunia Research](/sites/default/files/2022-04/hero-secunia-research-bg.jpg)

Featured Details

## Multiple ways to consume Secunia Research

Secunia delivers software security research that provides reliable, curated and actionable vulnerability intelligence. Organizations can expect to receive standardized, validated and enriched vulnerability research on a specific version of a software product. Secunia Research supports four solutions:

![Software Vulnerability Research](/sites/default/files/2022-04/icon-secunia-research-svr.svg)

### [Software Vulnerability Research](https://www.flexera.com/products/software-vulnerability-research)

Software Vulnerability Research utilizes Secunia Research to drive awareness of vulnerabilities matching your specified criteria

[Learn More](https://www.flexera.com/products/software-vulnerability-research)

![Software Vulnerability Manager](/sites/default/files/2022-04/icon-secunia-research-svm.svg)

### [Software Vulnerability Manager](/products/software-vulnerability-manager)

Software Vulnerability Manager uses Secunia Research data to identify, prioritize and patch known vulnerable software detected in your environment

[Learn More](/products/software-vulnerability-manager)

![Data Platform](/sites/default/files/2022-04/icon-secunia-research-dp.svg)

### [Data Platform](https://www.flexera.com/products/data-platform)

Data Platform leverages Secunia Research to provide high-level insights based on major or minor versions of software in your normalized inventory

[Learn More](https://www.flexera.com/products/data-platform)

![Flexera One](/sites/default/files/2022-04/icon-secunia-research-flexera-one.svg)

### [Flexera One](/flexera-one)

Flexera One utilizes Secunia Research (alongside public NVD data) to provide more granular matching of build-level versions of software in your normalized inventory within its IT Asset Management and IT Visibility solutions

[Learn More](/flexera-one)

How it works

## Accurate, reliable vulnerability insights at your fingertips

The Secunia Research team from Flexera is comprised of several security specialists who conduct vulnerability research in various products in addition to testing, verifying and validating public vulnerability reports. Since its inception in 2002, the goal of the Secunia Research team is to provide the most accurate and reliable source of vulnerability intelligence.

Delivering the world’s best vulnerability intelligence requires skill and passion. Team members continually develop their skills exploring various high-profile closed and open-source software using a variety of approaches, focusing chiefly on thorough code audits and binary analysis. The team has received industry recognition, including naming members to [Microsoft’s Most Valuable Security Researchers](https://msrc-blog.microsoft.com/2019/08/07/announcing-2019-msrc-most-valuable-security-researchers/) list.

Secunia researchers discover hard-to-find vulnerabilities that aren’t normally identified with techniques such as fuzzing, and the results have been impressive. Members of the Secunia Research team have discovered critical vulnerabilities in products from vendors including Microsoft, Symantec, IBM, Adobe, RealNetworks, Trend Micro, HP, Blue Coat, Samba, CA, Mozilla and Apple.

The team produces invaluable security advisories based on research of the vulnerabilities affecting any given software update. Sometimes a single update can address multiple vulnerabilities of varying criticalities and threats; but these advisories aggregate and distill findings down to a single advisory perfect for the prioritization of patching efforts within [Software Vulnerability Manager](/products/software-vulnerability-manager). Criticality scores are consistently applied along with details around attack vector and other valuable details within [Software Vulnerability Research](/products/software-vulnerability-research/secunia-research). Illegitimate vulnerability reports are also investigated and rejected so you can focus only on what truly matters.

Informing IT, Transforming IT

## Industry insights to help keep you informed

[#### Webinar

### Stay Ahead of Cyber Threats: Flexera's Latest Vulnerability Insights

Join us for this session where we'll explore the latest findings from the Flexera Monthly Vulnerability Insights Report.](https://info.flexera.com/SVM-WBNR-Vulnerability-Insights-Roundtable)

[#### Webinar

### Dive deeper into the Flexera Annual Vulnerability Insights

We'll explore the key findings from the Flexera Annual Vulnerability Insights Report. Learn about the latest cybersecurity trends, the most targeted industries, the types of vulnerabilities, plus management and mitigation strategies.](https://info.flexera.com/SVM-WBNR-Flexera-Annual-Vulnerability-Insights?lead_source=Website%20Visitor&id=Flexera.com-Resources)

#### Video

### Close the Risk Window with Software Vulnerability Manager

Stop reacting. Gain control. Stay secure. Build a more effective risk mitigation process leveraging Secunia Research vulnerability intelligence and the largest repository of third-party patch data in the industry.

Remote video URL

[#### Trial

### Software Vulnerability Manager Assessment free trial

Get access to the complete set of modules of Software Vulnerability Manager: Research, Assessment and Patching](https://info.flexera.com/SVM-EVAL-Software-Vulnerability-Manager)

[#### Datasheet

### Protect your ServiceNow® investment with the highest quality data

IT Visibility offers certified ServiceNow integrations that accelerate platform expansion, improve ROI and increase efficiencies across ITIL processes by delivering clean software and hardware asset data directly.](/sites/default/files/datasheet-itv-maximize-servicenow-investment.pdf)

[#### Blog

### Avoid missing crucial vulnerability intelligence amid NVD backlog

Recent developments regarding the National Vulnerability Database (NVD) have some technology leaders on edge. Since February, the U.S. National Institute of Standards and Technology (NIST) has almost completely stopped enriching software vulnerabi...](https://www.flexera.com/blog/vulnerability-management/avoid-missing-crucial-vulnerability-intelligence-amid-nvd-backlog/)

[View all resources](https://www.flexera.com/resources?category%5Bsoftware-vulnerability-management%5D=software-vulnerability-management)

## Footer Menu

* Column
  + Business challenge
    - [Software renewals and audits](https://www.flexera.com/solutions/software-renewals-audits)
    - [Software license management and optimization](https://www.flexera.com/solutions/software-usage-costs)
    - [SaaS spend management](https://www.flexera.com/solutions/saas-spend)
    - [Cloud cost management](https://www.flexera.com/solutions/cloud-cost)
    - [IT asset lifecycle management](https://www.flexera.com/solutions/it-asset-lifecycle)
    - [CMDB data quality](https://www.flexera.com/solutions/cmdb-data-quality)
    - [Accurate IT inventory](https://www.flexera.com/solutions/it-inventory)
    - [Security and regulatory risk management](https://www.flexera.com/solutions/it-security-regulatory-risk)
    - [Sustainable IT](https://www.flexera.com/solutions/sustainable-it)
    - [AI-powered transformation](https://www.flexera.com/solutions/ai-powered-transformation)
    - [Public sector](https://www.flexera.com/solutions/public-sector)
* Column
  + Spend management by vendor
    - [IBM](https://www.flexera.com/solutions/vendor/ibm)
    - [Oracle](https://www.flexera.com/solutions/vendor/oracle)
    - [Microsoft](https://www.flexera.com/solutions/vendor/microsoft)
    - [SAP](https://www.flexera.com/solutions/vendor/sap)
    - [VMware](https://www.flexera.com/solutions/vendor/vmware)
    - [ServiceNow](https://www.flexera.com/solutions/vendor/servicenow)
    - [AWS](https://www.flexera.com/solutions/vendor/aws)
    - [Salesforce](https://www.flexera.com/solutions/vendor/salesforce)
    - [BMC](https://www.flexera.com/solutions/cmdb-data-quality/bmc)
    - [Adobe](https://www.flexera.com/solutions/vendor/adobe)
* Column
  + Products
    - [Flexera One](https://www.flexera.com/products/flexera-one)
    - [Snow Atlas](https://www.flexera.com/products/snow-atlas)
    - [Security](https://www.flexera.com/products/security)
    - [Application Readiness](https://www.flexera.com/products/adminstudio)
    - [All products](https://www.flexera.com/products)
    - [All Snow products](https://www.flexera.com/products/snow)
    - [Integrations](https://www.flexera.com/products/integrations)
* Column
  + Company
    - [About](https://www.flexera.com/about-us)
    - [Careers](https://www.flexera.com/about-us/careers)
    - [Leadership](https://www.flexera.com/about-us/leadership)
    - [Contact us](https://www.flexera.com/about-us/contact-us)
    - [Media / press center](https://www.flexera.com/about-us/press-center)
    - [Revenera.com](https://www.revenera.com)

 +1.800.374.4353

en

* [English](https://www.flexera.com/products/security/software-vulnerability-research/secunia-research?referrer=secunia)
* [Deutsch](https://www.flexera.de/products/security/software-vulnerability-research/secunia-research?referrer=secunia)

 [![Home](/themes/custom/flexera/images/logo.svg)](https://www.flexera.com/)

© 2025 Flexera. All Rights Reserved.

## Footer

* [Privacy Policy](https://www.flexera.com/legal/privacy-policy)
* [Terms and conditions](https://www.flexera.com/legal)
* [Contact Us](https://www.flexera.com/about-us/contact-us)
* [Impressum](https://www.flexera.com/about-us/impressum)
* [Site Map](https://www.flexera.com/sitemap)

#####

×

...



=== Content from www.ubuntu.com_f7116837_20250124_182045.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# USN-2263-1: Linux kernel (OMAP4) vulnerabilities

27 June 2014

Several security issues were fixed in the kernel.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Releases

* [Ubuntu 12.04](/security/notices?release=precise)

## Packages

* [linux-ti-omap4](/security/cves?package=linux-ti-omap4) - Linux kernel for OMAP4

## Details

Salva Peiró discovered an information leak in the Linux kernel's media-

device driver. A local attacker could exploit this flaw to obtain sensitive

information from kernel memory. ([CVE-2014-1739](/security/CVE-2014-1739))

A bounds check error was discovered in the socket filter subsystem of the

Linux kernel. A local user could exploit this flaw to cause a denial of

service (system crash) via crafted BPF instructions. ([CVE-2014-3144](/security/CVE-2014-3144))

A remainder calculation error was discovered in the socket filter subsystem

of the Linux kernel. A local user could exploit this flaw to cause a denial

of service (system crash) via crafted BPF instructions. ([CVE-2014-3145](/security/CVE-2014-3145))

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Update instructions

The problem can be corrected by updating your system to the following package versions:

##### Ubuntu 12.04

* [linux-image-3.2.0-1450-omap4](https://launchpad.net/ubuntu/%2Bsource/linux-ti-omap4)
  -
  [3.2.0-1450.69](https://launchpad.net/ubuntu/%2Bsource/linux-ti-omap4/3.2.0-1450.69)

After a standard system update you need to reboot your computer to make

all the necessary changes.

ATTENTION: Due to an unavoidable ABI change the kernel updates have

been given a new version number, which requires you to recompile and

reinstall all third party kernel modules you might have installed. If

you use linux-restricted-modules, you have to update that package as

well to get modules which work with the new kernel version. Unless you

manually uninstalled the standard kernel metapackages (e.g. linux-generic,

linux-server, linux-powerpc), a standard system upgrade will automatically

perform this as well.

## References

* [CVE-2014-1739](/security/CVE-2014-1739)
* [CVE-2014-3144](/security/CVE-2014-3144)
* [CVE-2014-3145](/security/CVE-2014-3145)

## Related notices

* [USN-2261-1](/security/notices/USN-2261-1)
* [USN-2285-1](/security/notices/USN-2285-1)
* [USN-2286-1](/security/notices/USN-2286-1)
* [USN-2259-1](/security/notices/USN-2259-1)
* [USN-2264-1](/security/notices/USN-2264-1)
* [USN-2288-1](/security/notices/USN-2288-1)
* [USN-2290-1](/security/notices/USN-2290-1)
* [USN-2252-1](/security/notices/USN-2252-1)
* [USN-2251-1](/security/notices/USN-2251-1)
* [USN-2262-1](/security/notices/USN-2262-1)

### Join the discussion

* [Ubuntu security updates mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened)
* [Security announcements mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-security-announce)

### Need help with your security needs?

Ubuntu Pro provides up to ten-year security coverage for over 23,000 open-source packages within the Ubuntu Main and Universe repositories.

[Talk to an expert to find out what would work best for you](/contact-us/form?product=pro)

### Further reading

* *Loading...*

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page


