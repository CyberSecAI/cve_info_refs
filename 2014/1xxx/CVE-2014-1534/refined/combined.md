=== Content from bugzilla.mozilla.org_8b6e988c_20250124_132124.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/1007223)
* [XML](/show_bug.cgi?ctype=xml&id=1007223)

Closed
[Bug 1007223](/show_bug.cgi?id=1007223)

Opened 11 years ago
Closed 11 years ago

# AudioContext::DecodeAudioData passes ArrayBuffer data across threads without transferring it

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

AudioContext::DecodeAudioData passes ArrayBuffer data across threads without transferring it

## Categories

### (Core :: Web Audio, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=Web%20Audio#Web%20Audio)

Web Audio
▾

Core :: Web Audio
Bugs and enhancement requests relating to the Web Audio support.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=Web%20Audio&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=Web%20Audio&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=Web%20Audio)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

All

All

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

critical

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla32

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Accessibility Severity | --- |
| --- | --- |
| a11y-review | --- |
| Webcompat Priority | --- |
| Webcompat Score | --- |
| Performance Impact | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox29 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=wontfix) |
| firefox30 | [+](/buglist.cgi?f1=cf_tracking_firefox30&o1=equals&v1=%2B) | [verified](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=verified) |
| firefox31 | [+](/buglist.cgi?f1=cf_tracking_firefox31&o1=equals&v1=%2B) | [verified](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=verified) |
| firefox32 | [+](/buglist.cgi?f1=cf_tracking_firefox32&o1=equals&v1=%2B) | [verified](/buglist.cgi?f1=cf_status_firefox32&o1=equals&v1=verified) |
| firefox-esr24 | --- | [unaffected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=unaffected) |
| b2g-v1.2 | --- | [wontfix](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=wontfix) |
| b2g-v1.3 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=fixed) |
| b2g-v1.3T | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=fixed) |
| b2g-v1.4 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=fixed) |
| b2g-v2.0 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_2_0&o1=equals&v1=fixed) |
| seamonkey2.26 | --- | [wontfix](/buglist.cgi?f1=cf_status_seamonkey226&o1=equals&v1=wontfix) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox29 |  | wontfix |
| firefox30 | + | verified |
| firefox31 | + | verified |
| firefox32 | + | verified |
| firefox-esr24 |  | unaffected |
| b2g-v1.2 |  | wontfix |
| b2g-v1.3 |  | fixed |
| b2g-v1.3T |  | fixed |
| b2g-v1.4 |  | fixed |
| b2g-v2.0 |  | fixed |
| relnote-firefox |  | --- |
| seamonkey2.26 |  | wontfix |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: Waldo, Assigned: padenot)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/26d5e4c31bc56896f13d7ae0fbb24e96?d=mm&size=40)  [padenot](/user_profile?user_id=404637)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/d26a0ca7ae1134e0e1dbdddf82e28929?d=mm&size=40)  [Waldo](/user_profile?user_id=83595)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/15d034eb5ed480cb10a8a9e41e8b9f13?d=mm&size=40)  [karlt](/user_profile?user_id=274246)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

9 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

[1207070](/show_bug.cgi?id=1207070 "RESOLVED INVALID - Audio stops")

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

---

Dependency [tree](/showdependencytree.cgi?id=1007223&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=1007223)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[Duplicates:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#duplicates)

[832098](/show_bug.cgi?id=832098 "RESOLVED DUPLICATE - Implement the buffer neutering behavior for the decodeAudioData API while decoding is in progress")

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Keywords: sec-high, Whiteboard: [adv-main30+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[sec-high](/buglist.cgi?keywords=sec-high&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[adv-main30+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | in-testsuite |  |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (5 files, 3 obsolete files)

| [neuter](/attachment.cgi?id=8421013)  [11 years ago](#c7)  [Paul Adenot (:padenot)](/user_profile?user_id=404637)   6.75 KB, patch | ehsan.akhgari : [review-](#c8 "11 years ago") | [Details](/attachment.cgi?id=8421013&action=edit) | [Diff](/attachment.cgi?id=8421013&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1007223&attachment=8421013) |
| --- | --- | --- |
| [Test that we neuter the ArrayBuffer when using decodeAudioData. r=](/attachment.cgi?id=8421641)  [11 years ago](#c10)  [Paul Adenot (:padenot)](/user_profile?user_id=404637)   2.06 KB, patch |  | [Details](/attachment.cgi?id=8421641&action=edit) | [Diff](/attachment.cgi?id=8421641&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1007223&attachment=8421641) |
| [interdiff](/attachment.cgi?id=8421650)  [11 years ago](#c11)  [Paul Adenot (:padenot)](/user_profile?user_id=404637)   4.43 KB, patch | ehsan.akhgari : [review+](#a515246_251051 "11 years ago") | [Details](/attachment.cgi?id=8421650&action=edit) | [Diff](/attachment.cgi?id=8421650&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1007223&attachment=8421650) |
| [rollup](/attachment.cgi?id=8421654)  [11 years ago](#c12)  [Paul Adenot (:padenot)](/user_profile?user_id=404637)   4.81 KB, patch | abillings : [sec-approval+](#c18 "11 years ago") | [Details](/attachment.cgi?id=8421654&action=edit) | [Diff](/attachment.cgi?id=8421654&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1007223&attachment=8421654) |
| [Test that we neuter the ArrayBuffer when using decodeAudioData. r=](/attachment.cgi?id=8421661)  [11 years ago](#c13)  [Paul Adenot (:padenot)](/user_profile?user_id=404637)   2.15 KB, patch |  | [Details](/attachment.cgi?id=8421661&action=edit) | [Diff](/attachment.cgi?id=8421661&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1007223&attachment=8421661) |
| [imported patch fix-test](/attachment.cgi?id=8423985)  [11 years ago](#c19)  [Paul Adenot (:padenot)](/user_profile?user_id=404637)   1.67 KB, patch | ehsan.akhgari : [review+](#c20 "11 years ago") | [Details](/attachment.cgi?id=8423985&action=edit) | [Diff](/attachment.cgi?id=8423985&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1007223&attachment=8423985) |
| [patch](/attachment.cgi?id=8426168)  [11 years ago](#c21)  [Paul Adenot (:padenot)](/user_profile?user_id=404637)   6.54 KB, patch | ehsan.akhgari : [review+](#c23 "11 years ago")  bholley : [review+](#c25 "11 years ago")  lsblakk : [approval-mozilla-aurora+](#a1716249_272375 "11 years ago")  lsblakk : [approval-mozilla-beta+](#a1716249_272375 "11 years ago") | [Details](/attachment.cgi?id=8426168&action=edit) | [Diff](/attachment.cgi?id=8426168&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1007223&attachment=8426168) |
| [Neuter the ArrayBuffer passed to decodeAudioData. r=](/attachment.cgi?id=8430299)  [11 years ago](#c37)  [Paul Adenot (:padenot)](/user_profile?user_id=404637)   7.88 KB, patch | ehsan.akhgari : [review+](#a1885575_251051 "11 years ago") | [Details](/attachment.cgi?id=8430299&action=edit) | [Diff](/attachment.cgi?id=8430299&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1007223&attachment=8430299) |

Show Obsolete

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Jeff Walden [:Waldo]](/user_profile?user_id=83595)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=1007223#c0)• 11 years ago |
|  | |

void
AudioContext::DecodeAudioData(const ArrayBuffer& aBuffer,
DecodeSuccessCallback& aSuccessCallback,
const Optional<OwningNonNull<DecodeErrorCallback> >& aFailureCallback)
{
// Sniff the content of the media.
// Failed type sniffing will be handled by AsyncDecodeMedia.
nsAutoCString contentType;
NS\_SniffContent(NS\_DATA\_SNIFFER\_CATEGORY, nullptr,
aBuffer.Data(), aBuffer.Length(),
contentType);
nsRefPtr<DecodeErrorCallback> failureCallback;
if (aFailureCallback.WasPassed()) {
failureCallback = &aFailureCallback.Value();
}
nsRefPtr<WebAudioDecodeJob> job(
new WebAudioDecodeJob(contentType, this, aBuffer,
&aSuccessCallback, failureCallback));
mDecoder.AsyncDecodeMedia(contentType.get(),
aBuffer.Data(), aBuffer.Length(), \*job);
// Transfer the ownership to mDecodeJobs
mDecodeJobs.AppendElement(job);
}
When |aBuffer| is passed to |WebAudioDecodeJob|, the underlying object is cached in the decode job. We pass in the length and the raw data from the ArrayBuffer into AsyncDecodeMedia. In there we create a |new MediaDecodeTask(aContentType, aBuffer, aLength, aDecodeJob, mThreadPool);|, then |CreateReader()| on it. That creates a |BufferMediaResource| passing in the raw buffer pointer. And |BufferMediaResource| does all sorts of stuff to what's in the pointer/length pair. Boo-urns. Or am I misreading this somehow?
(Of course, this is all problematic because the buffer passed into decodeAudioData is user-controlled and can be neutered at any point after the call completes [but before the decoding task stuff completes]. Or the data could be moved around there's sufficiently little of it and someone does something that requests a \*stable\* address for the data, causing the data to be copied into heap-allocated permanent [modulo neutering] storage. Just to absolutely clear to any readers not fully on top of this.)

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209) |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=1007223#c1)• 11 years ago |
|  | |

Looking at the spec at <https://dvcs.w3.org/hg/audio/raw-file/tip/webaudio/specification.html#dfn-decodeAudioData> it looks like we're supposed to neuter the arraybuffer, no?
We're also supposed to un-neuter.... but that seems lossy, since neutering will affect all the views, no? I think this spec is bunk. :(Flags: needinfo?(ehsan)

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209) |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=1007223#c2)• 11 years ago |
|  | |

I guess <http://webaudio.github.io/web-audio-api/#widl-AudioContext-decodeAudioData-Promise-AudioBuffer--ArrayBuffer-audioData-DecodeSuccessCallback-successCallback-DecodeErrorCallback-errorCallback> is the actual current version, but it has the same issue.

|  | [(no longer active)](/user_profile?user_id=251051) |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=1007223#c3)• 11 years ago |
|  | |

Ah, yes... We should neuter the buffer here indeed. Paul, can you take this please?Flags: needinfo?(ehsan) → needinfo?(paul)

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209) |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=1007223#c4)• 11 years ago |
|  | |

The point is, the spec says the buffer should be "un-neutered" in some cases, but there is no such thing. Once you neuter a buffer, it stays neutered forever. So the spec needs to either copy, or neuter and move on.Flags: needinfo?(ehsan)

|  | [(no longer active)](/user_profile?user_id=251051) |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=1007223#c5)• 11 years ago |
|  | |

Oh, sorry, I read the bug too fast.
So I tried to remember how we got to the status quo. This goes back to October 2012 when I brought up the original issue: <<http://lists.w3.org/Archives/Public/public-audio/2012OctDec/0419.html>>. There we convinced Chris Rogers to change the spec, but the only thing being discussed in that thread was neutering the typed array of the AudioBuffer that gets passed to decodeAudioData. We finally agreed and I filed this spec bug <<https://www.w3.org/Bugs/Public/show_bug.cgi?id=20161>> where Chris changed the spec, but it seemed like he perhaps mistakenly added the prose about restoring. But then I filed [bug 832098](/show_bug.cgi?id=832098 "RESOLVED DUPLICATE - Implement the buffer neutering behavior for the decodeAudioData API while decoding is in progress") (which this bug is a dupe of) and apparently didn't pay too much attention to the actual text that went into the spec, and I apologize for that. :(
I think what we need to do here is [comment 3](/show_bug.cgi?id=1007223#c3 "VERIFIED FIXED - AudioContext::DecodeAudioData passes ArrayBuffer data across threads without transferring it"), and change the spec to remove the prose about restoring the typed array.Flags: needinfo?(ehsan)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1007223#a89529_1689)• 11 years ago |

Keywords: [sec-high](/buglist.cgi?keywords=sec-high&resolution=---)

|  | [Paul Adenot (:padenot)](/user_profile?user_id=404637)  Assignee |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=1007223#c7)• 11 years ago |
|  | |

Attached patch

[neuter](attachment.cgi?id=8421013&action=diff) (obsolete)
— [Details](attachment.cgi?id=8421013&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1007223&attachment=8421013)

Ehsan, here is the patch with a test. To me, it seems to work, but I'm not super confident I got it right, because it's kind of my first time doing this kind of stuff.
In particular, I'm not sure if neutering the ArrayBuffer affects the lifetime of the underlying memory: should we free it ourself, or is there some gc magic that'll do it for us?
Also, the spec bug is file here: <https://github.com/WebAudio/web-audio-api/issues/319>
[Attachment #8421013](/attachment.cgi?id=8421013&action=edit "neuter") -
Flags: review?(ehsan)Flags: needinfo?(paul)

|  | [(no longer active)](/user_profile?user_id=251051) |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=1007223#c8)• 11 years ago |
|  | |

Comment on [attachment 8421013](/attachment.cgi?id=8421013 "neuter") [[details]](/attachment.cgi?id=8421013&action=edit "neuter") [[diff]](/attachment.cgi?id=8421013&action=diff "neuter") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1007223&attachment=8421013)
neuter
Review of [attachment 8421013](/attachment.cgi?id=8421013 "neuter") [[details]](/attachment.cgi?id=8421013&action=edit "neuter") [[diff]](/attachment.cgi?id=8421013&action=diff "neuter") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1007223&attachment=8421013):
-----------------------------------------------------------------
::: content/media/webaudio/AudioContext.cpp
@@ +446,5 @@
> + AutoPushJSContext cx(GetJSContext());
> +
> + size\_t length = aBuffer.Length();
> + JS::RootedObject obj(cx, aBuffer.Obj());
> + uint8\_t\* data = static\_cast<uint8\_t\*>(JS\_StealArrayBufferContents(cx, obj));
This takes ownership over the underlying buffer, you need to free it using JS\_Free() once the WebAudioDecodeJob object is done with this.
::: content/media/webaudio/MediaBufferDecoder.h
@@ +31,5 @@
> // You may omit both the success and failure callback, or you must pass both.
> // The callbacks are only necessary for asynchronous operation.
> WebAudioDecodeJob(const nsACString& aContentType,
> dom::AudioContext\* aContext,
> + JSObject\* aBuffer,
I \_think\_ not using a HandleObject here is fine because you're sticking the value inside a JS::Heap<> immediately, but please make sure that the rooting analysis bot on the try server agrees with me. ;-)
[Attachment #8421013](/attachment.cgi?id=8421013&action=edit "neuter") -
Flags: review?(ehsan) → review-

|  | [Jeff Walden [:Waldo]](/user_profile?user_id=83595)  Reporter |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=1007223#c9)• 11 years ago |
|  | |

Comment on [attachment 8421013](/attachment.cgi?id=8421013 "neuter") [[details]](/attachment.cgi?id=8421013&action=edit "neuter") [[diff]](/attachment.cgi?id=8421013&action=diff "neuter") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1007223&attachment=8421013)
neuter
Review of [attachment 8421013](/attachment.cgi?id=8421013 "neuter") [[details]](/attachment.cgi?id=8421013&action=edit "neuter") [[diff]](/attachment.cgi?id=8421013&action=diff "neuter") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1007223&attachment=8421013):
-----------------------------------------------------------------
::: content/media/webaudio/MediaBufferDecoder.cpp
@@ +492,3 @@
> MOZ\_COUNT\_CTOR(WebAudioDecodeJob);
>
> + mArrayBuffer = aBuffer;
Erm. Why should, or does, this class even accept and store a JSObject\* in the first place? Why can't we just remove it entirely?
There's something fairly scary, seems to me, about storing pointers to JS heap stuff in objects that are accessed on different threads, as here (if memory serves). Just remove the argument and member field entirely.
::: content/media/webaudio/test/test\_decodeAudioDataNeuter.html
@@ +24,5 @@
> + ok(xhr.response.byteLength == 0, "The source ArrayBuffer is neutered after decoding.");
> + SimpleTest.finish();
> + }, function() {
> + ok(false, "We could not decode the file.");
> + });
Given the neutering is "supposed" to happen sync, you should test byteLength immediately after the decodeAudioData call as well as in the success/fail continuations.
Note that because of this being a security bug, this test shouldn't land with the patch. I typically post patch and test as separate attachments with separate review requests, so make clear that sec-approvals and landing requests and such don't conflate the two.

|  | [Paul Adenot (:padenot)](/user_profile?user_id=404637)  Assignee |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=1007223#c10)• 11 years ago |
|  | |

Attached patch

[Test that we neuter the ArrayBuffer when using decodeAudioData. r=](attachment.cgi?id=8421641&action=diff) (obsolete)
— [Details](attachment.cgi?id=8421641&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1007223&attachment=8421641)

The test, split off.

|  | [Paul Adenot (:padenot)](/user_profile?user_id=404637)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1007223#a496739_404637)• 11 years ago |

Assignee: nobody → paul

|  | [Paul Adenot (:padenot)](/user_profile?user_id=404637)  Assignee |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=1007223#c11)• 11 years ago |
|  | |

Attached patch

[interdiff](attachment.cgi?id=8421650&action=diff)
— [Details](attachment.cgi?id=8421650&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1007223&attachment=8421650)

I went with Waldo's suggestion, since we don't need for JS to know what we do
with the array anymore, and we free it by hand when we are done.
I could not find JS\_Free. js\_free and JS\_free both exist, I went with the latter
because JS\_\* are more commonly used in Gecko, passing a nullptr as a first arg,
because that's allowed.
[Attachment #8421650](/attachment.cgi?id=8421650&action=edit "interdiff") -
Flags: review?(ehsan)

|  | [Paul Adenot (:padenot)](/user_profile?user_id=404637)  Assignee |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=1007223#c12)• 11 years ago |
|  | |

Attached patch

[rollup](attachment.cgi?id=8421654&action=diff) (obsolete)
— [Details](attachment.cgi?id=8421654&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1007223&attachment=8421654)

Rollup of the initial patch + the interdiff.

|  | [Paul Adenot (:padenot)](/user_profile?user_id=404637)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1007223#a498260_404637)• 11 years ago |

[Attachment #8421013](/attachment.cgi?id=8421013&action=edit "neuter") -
Attachment is obsolete: true

|  | [Paul Adenot (:padenot)](/user_profile?user_id=404637)  Assignee |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=1007223#c13)• 11 years ago |
|  | |

Attached patch

[Test that we neuter the ArrayBuffer when using decodeAudioData. r=](attachment.cgi?id=8421661&action=diff)
— [Details](attachment.cgi?id=8421661&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1007223&attachment=8421661)

forgot to qref

|  | [Paul Adenot (:padenot)](/user_profile?user_id=404637)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1007223#a498608_404637)• 11 years ago |

[Attachment #8421641](/attachment.cgi?id=8421641&action=edit "Test that we neuter the ArrayBuffer when using decodeAudioData. r=") -
Attachment is obsolete: true

|  | [Paul Adenot (:padenot)](/user_profile?user_id=404637)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1007223#a498671_404637)• 11 years ago |

[Attachment #8421654](/attachment.cgi?id=8421654&action=edit "rollup") -
Attachment description: Neuter the ArrayBuffer passed to decodeAudioData. r= → rollup

|  | [(no longer active)](/user_profile?user_id=251051) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1007223#a515246_251051)• 11 years ago |

[Attachment #8421650](/attachment.cgi?id=8421650&action=edit "interdiff") -
Flags: review?(ehsan) → review+

|  | [(no longer active)](/user_profile?user_id=251051) |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=1007223#c14)• 11 years ago |
|  | |

(In reply to Paul Adenot (:padenot) from [comment #11](/show_bug.cgi?id=1007223#c11 "VERIFIED FIXED - AudioContext::DecodeAudioData passes ArrayBuffer data across threads without transferring it"))
> I could not find JS\_Free. js\_free and JS\_free both exist, I went with the
> latter
> because JS\_\* are more commonly used in Gecko, passing a nullptr as a first
> arg,
> because that's allowed.
Sorry, JS\_Free was a typo. Blame it on the Shift key.
(FWIW, JS\_ prefix means external, js\_ means internal.)

|  | [Paul Adenot (:padenot)](/user_profile?user_id=404637)  Assignee |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=1007223#c15)• 11 years ago |
|  | |

Comment on [attachment 8421654](/attachment.cgi?id=8421654 "rollup") [[details]](/attachment.cgi?id=8421654&action=edit "rollup") [[diff]](/attachment.cgi?id=8421654&action=diff "rollup") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1007223&attachment=8421654)
rollup
[Security approval request comment]
How easily could an exploit be constructed based on the patch?
No idea. Waldo, do you mind to quickly elaborate on that?
Do comments in the patch, the check-in comment, or tests included in the patch paint a bulls-eye on the security problem?
I split off the tests from the patch. There is a one line comment that explains what the new code is doing, we can probably remove it.
Which older supported branches are affected by this flaw?
All of them, I guess, back to Firefox 25
If not all supported branches, which bug introduced the flaw?
N/A
Do you have backports for the affected branches? If not, how different, hard to create, and risky will they be?
This code did not move much, I would expect that the patch applies on all branches.
How likely is this patch to cause regressions; how much testing does it need?
There is a change in behavior, we now aligns with the spec. I would not expect regressions.
[Attachment #8421654](/attachment.cgi?id=8421654&action=edit "rollup") -
Flags: sec-approval?Flags: needinfo?(jwalden+bmo)

|  | [Jeff Walden [:Waldo]](/user_profile?user_id=83595)  Reporter |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=1007223#c16)• 11 years ago |
|  | |

(In reply to Paul Adenot (:padenot) from [comment #15](/show_bug.cgi?id=1007223#c15 "VERIFIED FIXED - AudioContext::DecodeAudioData passes ArrayBuffer data across threads without transferring it"))
> [Security approval request comment]
> How easily could an exploit be constructed based on the patch?
> No idea. Waldo, do you mind to quickly elaborate on that?
No idea. Depends on exactly what audio decoding entails, and that I haven't the slightest idea about. Once I determine something is memory-unsafe, I tend not to investigate much beyond that point. If I just want to fix bugs, there's just not much reason to deeply consider weaponization feasibility, except for a new intellectual challenge.
> How likely is this patch to cause regressions; how much testing does it need?
> There is a change in behavior, we now aligns with the spec. I would not
> expect regressions.
There could be pages expecting the passed-in buffer to not be neutered, given no implementation neuters now (per a skim of WebKit/Blink code). Pages that expect non-neutering are Doing It Wrong. I have no idea how likely it is any would be doing this. If we're super-super-paranoid, we could decode a copy of the data in the ArrayBuffer and not neuter, leaving the neutering fix to trunk. Such a hackaround would double memory consumption; it's probably not worth the extra effort, given Web Audio is still bleeding-edge tech.Flags: needinfo?(jwalden+bmo)

|  | [Paul Adenot (:padenot)](/user_profile?user_id=404637)  Assignee |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=1007223#c17)• 11 years ago |
|  | |

(In reply to Jeff Walden [:Waldo] (remove +bmo to email) from [comment #16](/show_bug.cgi?id=1007223#c16 "VERIFIED FIXED - AudioContext::DecodeAudioData passes ArrayBuffer data across threads without transferring it"))
> > How likely is this patch to cause regressions; how much testing does it need?
> > There is a change in behavior, we now aligns with the spec. I would not
> > expect regressions.
>
> There could be pages expecting the passed-in buffer to not be neutered,
> given no implementation neuters now (per a skim of WebKit/Blink code).
> Pages that expect non-neutering are Doing It Wrong. I have no idea how
> likely it is any would be doing this. If we're super-super-paranoid, we
> could decode a copy of the data in the ArrayBuffer and not neuter, leaving
> the neutering fix to trunk. Such a hackaround would double memory
> consumption; it's probably not worth the extra effort, given Web Audio is
> still bleeding-edge tech.
Note that Chrome people agreed that neutering should be done (It was a google person merging my patch to the spec). They just haven't written the code yet.
I don't think we need to implement the work around you mention. I can't really think of a use case for that.

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1007223#a606816_280903)• 11 years ago |

[status-firefox29](/buglist.cgi?f1=cf_status_firefox29&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=wontfix)
[status-firefox30](/buglist.cgi?f1=cf_status_firefox30&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=affected)
[status-firefox31](/buglist.cgi?f1=cf_status_firefox31&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=affected)
[status-firefox32](/buglist.cgi?f1=cf_status_firefox32&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox32&o1=equals&v1=affected)
[status-firefox-esr24](/buglist.cgi?f1=cf_status_firefox_esr24&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=unaffected)
[tracking-firefox30](/buglist.cgi?f1=cf_tracking_firefox30&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox30&o1=equals&v1=%2B)
[tracking-firefox31](/buglist.cgi?f1=cf_tracking_firefox31&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox31&o1=equals&v1=%2B)
[tracking-firefox32](/buglist.cgi?f1=cf_tracking_firefox32&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox32&o1=equals&v1=%2B)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=1007223#c18)• 11 years ago |
|  | |

Comment on [attachment 8421654](/attachment.cgi?id=8421654 "rollup") [[details]](/attachment.cgi?id=8421654&action=edit "rollup") [[diff]](/attachment.cgi?id=8421654&action=diff "rollup") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1007223&attachment=8421654)
rollup
sec-approval+ for trunk. We should get beta and aurora patches made and nominated once it is in trunk.
[Attachment #8421654](/attachment.cgi?id=8421654&action=edit "rollup") -
Flags: sec-approval? → sec-approval+

|  | [Paul Adenot (:padenot)](/user_profile?user_id=404637)  Assignee |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=1007223#c19)• 11 years ago |
|  | |

Attached patch

[imported patch fix-test](attachment.cgi?id=8423985&action=diff)
— [Details](attachment.cgi?id=8423985&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1007223&attachment=8423985)

I think the only thing that relied on this behaviour was our test :-)
[Attachment #8423985](/attachment.cgi?id=8423985&action=edit "imported patch fix-test") -
Flags: review?(ehsan)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1007223#a1127320_1689)• 11 years ago |

Group: media-core-security

|  | [(no longer active)](/user_profile?user_id=251051) |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=1007223#c20)• 11 years ago |
|  | |

Comment on [attachment 8423985](/attachment.cgi?id=8423985 "imported patch fix-test") [[details]](/attachment.cgi?id=8423985&action=edit "imported patch fix-test") [[diff]](/attachment.cgi?id=8423985&action=diff "imported patch fix-test") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1007223&attachment=8423985)
imported patch fix-test
Review of [attachment 8423985](/attachment.cgi?id=8423985 "imported patch fix-test") [[details]](/attachment.cgi?id=8423985&action=edit "imported patch fix-test") [[diff]](/attachment.cgi?id=8423985&action=diff "imported patch fix-test") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1007223&attachment=8423985):
-----------------------------------------------------------------
Haha, this is embarrassing. Sorry! ;-)
[Attachment #8423985](/attachment.cgi?id=8423985&action=edit "imported patch fix-test") -
Flags: review?(ehsan) → review+

|  | [Paul Adenot (:padenot)](/user_profile?user_id=404637)  Assignee |  |
| --- | --- | --- |
| [Comment 21](/show_bug.cgi?id=1007223#c21)• 11 years ago |
|  | |

Attached patch

[patch](attachment.cgi?id=8426168&action=diff)
— [Details](attachment.cgi?id=8426168&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1007223&attachment=8426168)

JSAPI changes bitrot the patch :-(
[Attachment #8426168](/attachment.cgi?id=8426168&action=edit "patch") -
Flags: review?(ehsan)

|  | [Paul Adenot (:padenot)](/user_profile?user_id=404637)  Assignee |  |
| --- | --- | --- |
| [Comment 22](/show_bug.cgi?id=1007223#c22)• 11 years ago |
|  | |

To be specific, this just changes the way to get the context and to choose the compartment.

|  | [(no longer active)](/user_profile?user_id=251051) |  |
| --- | --- | --- |
| [Comment 23](/show_bug.cgi?id=1007223#c23)• 11 years ago |
|  | |

Comment on [attachment 8426168](/attachment.cgi?id=8426168 "patch") [[details]](/attachment.cgi?id=8426168&action=edit "patch") [[diff]](/attachment.cgi?id=8426168&action=diff "patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1007223&attachment=8426168)
patch
Review of [attachment 8426168](/attachment.cgi?id=8426168 "patch") [[details]](/attachment.cgi?id=8426168&action=edit "patch") [[diff]](/attachment.cgi?id=8426168&action=diff "patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1007223&attachment=8426168):
-----------------------------------------------------------------
::: content/media/webaudio/AudioContext.cpp
@@ +431,5 @@
> const Optional<OwningNonNull<DecodeErrorCallback> >& aFailureCallback)
> {
> + AutoJSAPI jsapi;
> + JSContext\* cx = jsapi.cx();
> + JSAutoCompartment comp(cx, aBuffer.Obj());
Boris can you please double check this?
[Attachment #8426168](/attachment.cgi?id=8426168&action=edit "patch") -
Flags: review?(ehsan)
[Attachment #8426168](/attachment.cgi?id=8426168&action=edit "patch") -
Flags: review?(bzbarsky)
[Attachment #8426168](/attachment.cgi?id=8426168&action=edit "patch") -
Flags: review+

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209) |  |
| --- | --- | --- |
| [Comment 24](/show_bug.cgi?id=1007223#c24)• 11 years ago |
|  | |

Comment on [attachment 8426168](/attachment.cgi?id=8426168 "patch") [[details]](/attachment.cgi?id=8426168&action=edit "patch") [[diff]](/attachment.cgi?id=8426168&action=diff "patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1007223&attachment=8426168)
patch
I \_think\_ it's right, but this stuff is pretty new... Bobby, is this how it's meant to be used?
[Attachment #8426168](/attachment.cgi?id=8426168&action=edit "patch") -
Flags: review?(bzbarsky) → review?(bobbyholley)

|  | [Bobby Holley (:bholley)](/user_profile?user_id=313730) |  |
| --- | --- | --- |
| [Comment 25](/show_bug.cgi?id=1007223#c25)• 11 years ago |
|  | |

Comment on [attachment 8426168](/attachment.cgi?id=8426168 "patch") [[details]](/attachment.cgi?id=8426168&action=edit "patch") [[diff]](/attachment.cgi?id=8426168&action=diff "patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1007223&attachment=8426168)
patch
Review of [attachment 8426168](/attachment.cgi?id=8426168 "patch") [[details]](/attachment.cgi?id=8426168&action=edit "patch") [[diff]](/attachment.cgi?id=8426168&action=diff "patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1007223&attachment=8426168):
-----------------------------------------------------------------
::: content/media/webaudio/AudioContext.cpp
@@ +431,5 @@
> const Optional<OwningNonNull<DecodeErrorCallback> >& aFailureCallback)
> {
> + AutoJSAPI jsapi;
> + JSContext\* cx = jsapi.cx();
> + JSAutoCompartment comp(cx, aBuffer.Obj());
Please call the JSAutoCompartment |ac|. AutoJSAPI usage looks good otherwise.
[Attachment #8426168](/attachment.cgi?id=8426168&action=edit "patch") -
Flags: review?(bobbyholley) → review+

|  | [Paul Adenot (:padenot)](/user_profile?user_id=404637)  Assignee |  |
| --- | --- | --- |
| [Comment 26](/show_bug.cgi?id=1007223#c26)• 11 years ago |
|  | |

<https://hg.mozilla.org/integration/mozilla-inbound/rev/e08a482fcead>

|  | [Wes Kocher (:KWierso) (Not reading bugmail; email directly if needed)](/user_profile?user_id=308534) |  |
| --- | --- | --- |
| [Comment 27](/show_bug.cgi?id=1007223#c27)• 11 years ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/e08a482fcead>Status: NEW → RESOLVEDClosed: 11 years ago
[status-firefox32](/buglist.cgi?f1=cf_status_firefox32&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox32&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox32&o1=equals&v1=fixed)Resolution: --- → FIXEDTarget Milestone: --- → mozilla32

|  | [Lukas Blakk [:lsblakk] use ?needinfo](/user_profile?user_id=272375) |  |
| --- | --- | --- |
| [Comment 28](/show_bug.cgi?id=1007223#c28)• 11 years ago |
|  | |

Let's please get an uplift nomination asap, this needs to get into next week's Beta.Flags: needinfo?(paul)

|  | [Paul Adenot (:padenot)](/user_profile?user_id=404637)  Assignee |  |
| --- | --- | --- |
| [Comment 29](/show_bug.cgi?id=1007223#c29)• 11 years ago |
|  | |

Comment on [attachment 8426168](/attachment.cgi?id=8426168 "patch") [[details]](/attachment.cgi?id=8426168&action=edit "patch") [[diff]](/attachment.cgi?id=8426168&action=diff "patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1007223&attachment=8426168)
patch
[Approval Request Comment]
Bug caused by (feature/regressing bug #): Landing of web audio (or maybe shortly after)
User impact if declined: not sure
Testing completed (on m-c, etc.): m-c, locally, has test to be landed separately, but green everywhere
Risk to taking this patch (and alternatives if risky): little behavioral change, other implementers have agreed to change their behavior as well.
String or IDL/UUID changes made by this patch: none
[Attachment #8426168](/attachment.cgi?id=8426168&action=edit "patch") -
Flags: approval-mozilla-beta?
[Attachment #8426168](/attachment.cgi?id=8426168&action=edit "patch") -
Flags: approval-mozilla-aurora?Flags: needinfo?(paul)

|  | [Lukas Blakk [:lsblakk] use ?needinfo](/user_profile?user_id=272375) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1007223#a1716249_272375)• 11 years ago |

[Attachment #8426168](/attachment.cgi?id=8426168&action=edit "patch") -
Flags: approval-mozilla-beta?
[Attachment #8426168](/attachment.cgi?id=8426168&action=edit "patch") -
Flags: approval-mozilla-beta+
[Attachment #8426168](/attachment.cgi?id=8426168&action=edit "patch") -
Flags: approval-mozilla-aurora?
[Attachment #8426168](/attachment.cgi?id=8426168&action=edit "patch") -
Flags: approval-mozilla-aurora+

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 30](/show_bug.cgi?id=1007223#c30)• 11 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-aurora/rev/15ec20e99da2>
<https://hg.mozilla.org/releases/mozilla-beta/rev/5ecccdf09f33>
[status-b2g-v1.2](/buglist.cgi?f1=cf_status_b2g_1_2&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=affected)
[status-b2g-v1.3](/buglist.cgi?f1=cf_status_b2g_1_3&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=affected)
[status-b2g-v1.4](/buglist.cgi?f1=cf_status_b2g_1_4&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=affected)
[status-b2g-v2.0](/buglist.cgi?f1=cf_status_b2g_2_0&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_b2g_2_0&o1=equals&v1=fixed)
[status-firefox30](/buglist.cgi?f1=cf_status_firefox30&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=fixed)
[status-firefox31](/buglist.cgi?f1=cf_status_firefox31&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=fixed)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 31](/show_bug.cgi?id=1007223#c31)• 11 years ago |
|  | |

Backed out from beta for bustage.
<https://hg.mozilla.org/releases/mozilla-beta/rev/91e40e5e4d26>
<https://tbpl.mozilla.org/php/getParsedLog.php?id=40470548&tree=Mozilla-Beta>
[status-firefox30](/buglist.cgi?f1=cf_status_firefox30&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=fixed) → [affected](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=affected)

|  | [Paul Adenot (:padenot)](/user_profile?user_id=404637)  Assignee |  |
| --- | --- | --- |
| [Comment 32](/show_bug.cgi?id=1007223#c32)• 11 years ago |
|  | |

(In reply to Ryan VanderMeulen [:RyanVM UTC-4] from [comment #31](/show_bug.cgi?id=1007223#c31 "VERIFIED FIXED - AudioContext::DecodeAudioData passes ArrayBuffer data across threads without transferring it"))
> Backed out from beta for bustage.
> <https://hg.mozilla.org/releases/mozilla-beta/rev/91e40e5e4d26>
>
> <https://tbpl.mozilla.org/php/getParsedLog.php?id=40470548&tree=Mozilla-Beta>
Can you land the patch name "rollup" on beta? The patch got bitrotted while I was writing it, but "rollup" has the right code for beta, I believe.

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 33](/show_bug.cgi?id=1007223#c33)• 11 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-beta/rev/3ca7edf8fb5b>
[status-firefox30](/buglist.cgi?f1=cf_status_firefox30&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=fixed)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 34](/show_bug.cgi?id=1007223#c34)• 11 years ago |
|  | |

Still busted.
<https://hg.mozilla.org/releases/mozilla-beta/rev/3512c7ff3a7a>
<https://tbpl.mozilla.org/php/getParsedLog.php?id=40543146&tree=Mozilla-Beta>
[status-firefox30](/buglist.cgi?f1=cf_status_firefox30&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=fixed) → [affected](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=affected)

|  | [Paul Adenot (:padenot)](/user_profile?user_id=404637)  Assignee |  |
| --- | --- | --- |
| [Comment 35](/show_bug.cgi?id=1007223#c35)• 11 years ago |
|  | |

Well, that's sad. I'll give you a patch that builds, and push it if you want. Sorry to waste your time with that.

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 36](/show_bug.cgi?id=1007223#c36)• 11 years ago |
|  | |

No problem, it happens :). Feel free to push yourself if you want.

|  | [Paul Adenot (:padenot)](/user_profile?user_id=404637)  Assignee |  |
| --- | --- | --- |
| [Comment 37](/show_bug.cgi?id=1007223#c37)• 11 years ago |
|  | |

Attached patch

[Neuter the ArrayBuffer passed to decodeAudioData. r=](attachment.cgi?id=8430299&action=diff)
— [Details](attachment.cgi?id=8430299&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1007223&attachment=8430299)

This is the backport for beta. It changes enough that I think it needs another
review.
[Attachment #8430299](/attachment.cgi?id=8430299&action=edit "Neuter the ArrayBuffer passed to decodeAudioData. r=") -
Flags: review?(ehsan)

|  | [Paul Adenot (:padenot)](/user_profile?user_id=404637)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1007223#a1825688_404637)• 11 years ago |

[Attachment #8421654](/attachment.cgi?id=8421654&action=edit "rollup") -
Attachment is obsolete: true

|  | [(no longer active)](/user_profile?user_id=251051) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1007223#a1885575_251051)• 11 years ago |

[Attachment #8430299](/attachment.cgi?id=8430299&action=edit "Neuter the ArrayBuffer passed to decodeAudioData. r=") -
Flags: review?(ehsan) → review+

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 38](/show_bug.cgi?id=1007223#c38)• 11 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-beta/rev/73da1997e6da>
[status-firefox30](/buglist.cgi?f1=cf_status_firefox30&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=fixed)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 39](/show_bug.cgi?id=1007223#c39)• 11 years ago |
|  | |

Bustage follow-up:
<https://hg.mozilla.org/releases/mozilla-beta/rev/8260d1fb1c34>

|  | [(no longer active)](/user_profile?user_id=251051) |  |
| --- | --- | --- |
| [Comment 40](/show_bug.cgi?id=1007223#c40)• 11 years ago |
|  | |

(In reply to Ryan VanderMeulen [:RyanVM UTC-4] from [comment #39](/show_bug.cgi?id=1007223#c39 "VERIFIED FIXED - AudioContext::DecodeAudioData passes ArrayBuffer data across threads without transferring it"))
> Bustage follow-up:
> <https://hg.mozilla.org/releases/mozilla-beta/rev/8260d1fb1c34>
post-landing r?padenotFlags: needinfo?(paul)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 41](/show_bug.cgi?id=1007223#c41)• 11 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-b2g28_v1_3/rev/5dea846ef683>
This is getting to be a hairy enough backport that I vote wontfix for b2g26. It's EOL in less than 2 weeks anyway.
[status-b2g-v1.2](/buglist.cgi?f1=cf_status_b2g_1_2&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=wontfix)
[status-b2g-v1.3](/buglist.cgi?f1=cf_status_b2g_1_3&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=fixed)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 42](/show_bug.cgi?id=1007223#c42)• 11 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-b2g30_v1_4/rev/73da1997e6da>
<https://hg.mozilla.org/releases/mozilla-b2g30_v1_4/rev/8260d1fb1c34>
[status-b2g-v1.4](/buglist.cgi?f1=cf_status_b2g_1_4&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=fixed)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1007223#a1920617_75935)• 11 years ago |

[status-b2g-v1.3T](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=fixed)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1007223#a2270601_1689)• 11 years ago |

Group: media-core-security

|  | [Paul Adenot (:padenot)](/user_profile?user_id=404637)  Assignee |  |
| --- | --- | --- |
| [Comment 43](/show_bug.cgi?id=1007223#c43)• 11 years ago |
|  | |

Looks good, thanks.Flags: needinfo?(paul)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1007223#a2446240_280903)• 11 years ago |

Whiteboard: [adv-main30+]

|  | [Matt Wobensmith [:mwobensmith][:matt:]](/user_profile?user_id=452604) |  |
| --- | --- | --- |
| [Comment 44](/show_bug.cgi?id=1007223#c44)• 11 years ago |
|  | |

Confirmed problem on Fx29 using Paul's test.
Verified fixed using builds of Fx30, Fx31 and Fx32 from 2014-06-03.Status: RESOLVED → VERIFIED
[status-firefox30](/buglist.cgi?f1=cf_status_firefox30&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=verified)
[status-firefox31](/buglist.cgi?f1=cf_status_firefox31&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=verified)
[status-firefox32](/buglist.cgi?f1=cf_status_firefox32&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox32&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox32&o1=equals&v1=verified)Whiteboard: [adv-main30+] → [qa-]

|  | [Matt Wobensmith [:mwobensmith][:matt:]](/user_profile?user_id=452604) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1007223#a2447073_452604)• 11 years ago |

Whiteboard: [qa-]

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1007223#a2447534_280903)• 11 years ago |

Whiteboard: [adv-main30+]

|  | [Justin Wood (:Callek)](/user_profile?user_id=129968) |  |
| --- | --- | --- |
| [Comment 45](/show_bug.cgi?id=1007223#c45)• 11 years ago |
|  | |

not able to easily transplant, wontfix on SeaMonkey 2.26.1 (Gecko 29 based)
[status-seamonkey2.26](/buglist.cgi?f1=cf_status_seamonkey226&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_seamonkey226&o1=equals&v1=wontfix)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1007223#a41477137_1689)• 9 years ago |

Group: core-security

|  | [Alice0775 White](/user_profile?user_id=293623) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1007223#a43428278_293623)• 9 years ago |

Depends on: [1207070](/show_bug.cgi?id=1207070 "RESOLVED INVALID - Audio stops")
You need to [log in](/show_bug.cgi?id=1007223&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Paul Adenot (:padenot)](/user_profile?user_id=404637)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from bugzilla.mozilla.org_d3852ec1_20250124_132126.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/969549)
* [XML](/show_bug.cgi?ctype=xml&id=969549)

Closed
[Bug 969549](/show_bug.cgi?id=969549)

Opened 11 years ago
Closed 11 years ago

# Faulty: PCompositableTransaction reinterprets between layer types based on untrusted message params

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

Faulty: PCompositableTransaction reinterprets between layer types based on untrusted message params

## Categories

### (Core :: Graphics, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=Graphics#Graphics)

Graphics
▾

Core :: Graphics
Mapping of cross platform rendering interfaces to various 2D graphics APIs
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=Graphics&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=Graphics&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=Graphics)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

x86\_64

Linux

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

normal

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla30

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Webcompat Priority | --- |
| --- | --- |
| Accessibility Severity | --- |
| Webcompat Score | --- |
| Performance Impact | --- |
| a11y-review | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox28 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=wontfix) |
| firefox29 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=wontfix) |
| firefox30 | [+](/buglist.cgi?f1=cf_tracking_firefox30&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=fixed) |
| firefox-esr24 | --- | [unaffected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=unaffected) |
| b2g18 | --- | [wontfix](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=wontfix) |
| b2g-v1.1hd | --- | [wontfix](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=equals&v1=wontfix) |
| b2g-v1.2 | --- | [wontfix](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=wontfix) |
| b2g-v1.3 | --- | [wontfix](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=wontfix) |
| b2g-v1.3T | --- | [wontfix](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=wontfix) |
| b2g-v1.4 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=fixed) |
| seamonkey2.26 | --- | [fixed](/buglist.cgi?f1=cf_status_seamonkey226&o1=equals&v1=fixed) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox28 |  | wontfix |
| firefox29 |  | wontfix |
| firefox30 | + | fixed |
| firefox-esr24 |  | unaffected |
| b2g18 |  | wontfix |
| b2g-v1.1hd |  | wontfix |
| b2g-v1.2 |  | wontfix |
| b2g-v1.3 |  | wontfix |
| b2g-v1.3T |  | wontfix |
| b2g-v1.4 |  | fixed |
| relnote-firefox |  | --- |
| seamonkey2.26 |  | fixed |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: bjacob, Assigned: bjacob)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/8f64ddf291d83cdc891c05ee5d5cc5dc?d=mm&size=40)  [bjacob](/user_profile?user_id=382769)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/8f64ddf291d83cdc891c05ee5d5cc5dc?d=mm&size=40)  [bjacob](/user_profile?user_id=382769)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/17436ade8da1b23d42b3df05b9c4fc77?d=mm&size=40)  [bhood](/user_profile?user_id=697075)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

7 people

## References

### (Blocks 1 open bug)

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[fuzzing-ipc-ipdl](/show_bug.cgi?id=777067 "NEW - [meta] Fuzzing: IPC Protocol Definition Language (IPDL) Protocols"), [fuzzing-layers-linux](/show_bug.cgi?id=963790 "RESOLVED FIXED - Tracking: Run Faulty without parent process crashes on desktop Linux with GL layers and e10s"), [971262](/show_bug.cgi?id=971262 "RESOLVED FIXED - Faulty: Segfault in SurfaceDescriptor::type() under DeprecatedImageHostSingle::MakeDeprecatedTextureHost")

Dependency [tree](/showdependencytree.cgi?id=969549&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=969549)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Keywords: sec-critical, Whiteboard: [adv-main30+][qa-])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[sec-critical](/buglist.cgi?keywords=sec-critical&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[adv-main30+][qa-]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [cbook](/user_profile?user_id=277293) | [in-testsuite](#c10 "11 years ago") | ? |
| --- | --- | --- |
| [cbook](/user_profile?user_id=277293) | in-testsuite | ? |
| --- | --- | --- |
|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (2 files)

| [Faulty session](/attachment.cgi?id=8372485)  [11 years ago](#c0)  [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)   24.95 KB, text/plain |  | [Details](/attachment.cgi?id=8372485&action=edit) |
| --- | --- | --- |
| [fix-PCompositableTransaction-casts](/attachment.cgi?id=8374559)  [11 years ago](#c5)  [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)   2.59 KB, patch | nical : [review+](#a408148_438998 "11 years ago")  dveditz : [sec-approval+](#c8 "11 years ago") | [Details](/attachment.cgi?id=8374559&action=edit) | [Diff](/attachment.cgi?id=8374559&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=969549&attachment=8374559) |

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=969549#c0)• 11 years ago |
|  | |

Attached file
[Faulty session](attachment.cgi?id=8372485)
— [Details](attachment.cgi?id=8372485&action=edit)

Found by Christoph Diehl's "Faulty" fuzzer, see [bug 777067](/show_bug.cgi?id=777067 "NEW - [meta] Fuzzing: IPC Protocol Definition Language (IPDL) Protocols")
This is similar to [bug 968833](/show_bug.cgi?id=968833 "RESOLVED FIXED - PLayerTransaction protocol allows reinterpret_casting between layer types based on untrusted IPC message parameters"), but now for the PCompositableTransaction protocol.

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=969549#c1)• 11 years ago |
|  | |

Similar to [bug 968833](/show_bug.cgi?id=968833 "RESOLVED FIXED - PLayerTransaction protocol allows reinterpret_casting between layer types based on untrusted IPC message parameters"), I suggest sec-crit here. While the present faulty session gives a nice assert failure, that's because it was only calling a virtual method that turned out to be asserting on the current object type. Looking at CompositableTransactionParent.cpp there are places that static\_cast between layer types based on untrusted inputs exactly like [bug 968833](/show_bug.cgi?id=968833 "RESOLVED FIXED - PLayerTransaction protocol allows reinterpret_casting between layer types based on untrusted IPC message parameters").

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=969549#c2)• 11 years ago |
|  | |

To give just one example:
<http://hg.mozilla.org/mozilla-central/file/a96affc08b1c/gfx/layers/ipc/CompositableTransactionParent.cpp#l158>
case CompositableOperation::TOpPaintTextureRegion: {
MOZ\_LAYERS\_LOG(("[ParentSide] Paint ThebesLayer"));
const OpPaintTextureRegion& op = aEdit.get\_OpPaintTextureRegion();
CompositableParent\* compositableParent = static\_cast<CompositableParent\*>(op.compositableParent());
CompositableHost\* compositable =
compositableParent->GetCompositableHost();
ThebesLayerComposite\* thebes =
static\_cast<ThebesLayerComposite\*>(compositable->GetLayer());

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=969549#c3)• 11 years ago |
|  | |

Interesting bit in this Faulty log:
[Faulty] pickle field {int} of value: 8 changed to: 7
In CompositableType enum, 8 is COMPOSITABLE\_IMAGE, 7 is BUFFER\_TILED.

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=969549#a12201_406194)• 11 years ago |

Keywords: [sec-critical](/buglist.cgi?keywords=sec-critical&resolution=---)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=969549#a275957_280903)• 11 years ago |

[status-firefox30](/buglist.cgi?f1=cf_status_firefox30&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=affected)
[tracking-firefox30](/buglist.cgi?f1=cf_tracking_firefox30&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox30&o1=equals&v1=%2B)

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=969549#a355529_382769)• 11 years ago |

Blocks: [971262](/show_bug.cgi?id=971262 "RESOLVED FIXED - Faulty: Segfault in SurfaceDescriptor::type() under DeprecatedImageHostSingle::MakeDeprecatedTextureHost")

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=969549#c4)• 11 years ago |
|  | |

hit an avatar of this in [bug 971262](/show_bug.cgi?id=971262 "RESOLVED FIXED - Faulty: Segfault in SurfaceDescriptor::type() under DeprecatedImageHostSingle::MakeDeprecatedTextureHost").
Patch coming up.

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=969549#c5)• 11 years ago |
|  | |

Attached patch

[fix-PCompositableTransaction-casts](attachment.cgi?id=8374559&action=diff)
— [Details](attachment.cgi?id=8374559&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=969549&attachment=8374559)

[Attachment #8374559](/attachment.cgi?id=8374559&action=edit "fix-PCompositableTransaction-casts") -
Flags: review?(nical.bugzilla)

|  | [Nicolas Silva [:nical]](/user_profile?user_id=438998) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=969549#a408148_438998)• 11 years ago |

[Attachment #8374559](/attachment.cgi?id=8374559&action=edit "fix-PCompositableTransaction-casts") -
Flags: review?(nical.bugzilla) → review+

|  | [David Bolter [:davidb] (NeedInfo me for attention)](/user_profile?user_id=152868) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=969549#a522843_152868)• 11 years ago |

[status-b2g-v1.4](/buglist.cgi?f1=cf_status_b2g_1_4&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=affected)

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=969549#c6)• 11 years ago |
|  | |

Assigning to bjacob because he has a patch.Assignee: nobody → bjacob

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=969549#c7)• 11 years ago |
|  | |

Comment on [attachment 8374559](/attachment.cgi?id=8374559 "fix-PCompositableTransaction-casts") [[details]](/attachment.cgi?id=8374559&action=edit "fix-PCompositableTransaction-casts") [[diff]](/attachment.cgi?id=8374559&action=diff "fix-PCompositableTransaction-casts") [[review]](/page.cgi?id=splinter.html&ignore=&bug=969549&attachment=8374559)
fix-PCompositableTransaction-casts
[Security approval request comment]
How easily could an exploit be constructed based on the patch?
Not easily. To someone with good understanding of our codebase (please send your resumes) the patch gives away that passing forged messages to PCompositorTransaction can result in unsafe memory accesses. It remains to figure how exactly to forge such messages (not hard, since it was found by fuzzing generic pickles) and how to actually exploit that (harder).
Do comments in the patch, the check-in comment, or tests included in the patch paint a bulls-eye on the security problem?
No.
Which older supported branches are affected by this flaw?
All of them.
Do you have backports for the affected branches? If not, how different, hard to create, and risky will they be?
No backport ready, but wouldn't be difficult.
How likely is this patch to cause regressions; how much testing does it need?
Not very risky, but not trivial.
[Attachment #8374559](/attachment.cgi?id=8374559&action=edit "fix-PCompositableTransaction-casts") -
Flags: sec-approval?

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=969549#a1052776_1689)• 11 years ago |

[status-b2g18](/buglist.cgi?f1=cf_status_b2g18&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=affected)
[status-b2g-v1.2](/buglist.cgi?f1=cf_status_b2g_1_2&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=affected)
[status-b2g-v1.3](/buglist.cgi?f1=cf_status_b2g_1_3&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=affected)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=969549#c8)• 11 years ago |
|  | |

Comment on [attachment 8374559](/attachment.cgi?id=8374559 "fix-PCompositableTransaction-casts") [[details]](/attachment.cgi?id=8374559&action=edit "fix-PCompositableTransaction-casts") [[diff]](/attachment.cgi?id=8374559&action=diff "fix-PCompositableTransaction-casts") [[review]](/page.cgi?id=splinter.html&ignore=&bug=969549&attachment=8374559)
fix-PCompositableTransaction-casts
sec-approval=dveditz
[Attachment #8374559](/attachment.cgi?id=8374559&action=edit "fix-PCompositableTransaction-casts") -
Flags: sec-approval? → sec-approval+

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=969549#c9)• 11 years ago |
|  | |

<http://hg.mozilla.org/integration/mozilla-inbound/rev/3bfe9190b72d>

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=969549#a1127794_406194)• 11 years ago |

[status-firefox29](/buglist.cgi?f1=cf_status_firefox29&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=wontfix)

|  | [Carsten Book [:Tomcat]](/user_profile?user_id=277293) |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=969549#c10)• 11 years ago |
|  | |

landed on central <https://hg.mozilla.org/mozilla-central/rev/3bfe9190b72d>Status: NEW → RESOLVEDClosed: 11 years ago
[status-firefox30](/buglist.cgi?f1=cf_status_firefox30&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=fixed)Flags: in-testsuite?Resolution: --- → FIXEDTarget Milestone: --- → mozilla30

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=969549#a1189539_75935)• 11 years ago |

[status-b2g-v1.4](/buglist.cgi?f1=cf_status_b2g_1_4&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=fixed)
[status-firefox28](/buglist.cgi?f1=cf_status_firefox28&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=wontfix)
[status-firefox-esr24](/buglist.cgi?f1=cf_status_firefox_esr24&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=unaffected)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=969549#c11)• 11 years ago |
|  | |

v1.1 will be EOL on Monday, so it seems highly unlikely that this is going to be uplifted there :)
[status-b2g18](/buglist.cgi?f1=cf_status_b2g18&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=wontfix)
[status-b2g-v1.1hd](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=equals&v1=wontfix)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=969549#c12)• 11 years ago |
|  | |

If we were going to backport these to 1.2 and 1.3, that time was a long time ago.
[status-b2g-v1.2](/buglist.cgi?f1=cf_status_b2g_1_2&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=wontfix)
[status-b2g-v1.3](/buglist.cgi?f1=cf_status_b2g_1_3&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=wontfix)
[status-b2g-v1.3T](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=wontfix)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=969549#a10030196_280903)• 11 years ago |

Whiteboard: [adv-main30+]

|  | [Matt Wobensmith [:mwobensmith][:matt:]](/user_profile?user_id=452604) |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=969549#c13)• 11 years ago |
|  | |

Marking [qa-] for desktop QA verification. FxOS QA may choose to verify at a later date.Whiteboard: [adv-main30+] → [adv-main30+][qa-]

|  | [Justin Wood (:Callek)](/user_profile?user_id=129968) |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=969549#c14)• 11 years ago |
|  | |

Applied cleanly to SeaMonkey 2.26.1 (Gecko 29-based)
<https://hg.mozilla.org/releases/mozilla-release/rev/304350ccb7ac>
[status-seamonkey2.26](/buglist.cgi?f1=cf_status_seamonkey226&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_seamonkey226&o1=equals&v1=fixed)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=969549#a49159082_1689)• 9 years ago |

Group: core-security
You need to [log in](/show_bug.cgi?id=969549&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from lists.opensuse.org_3d21d313_20250124_132112.html ===


[![openSUSE](https://static.opensuse.org/favicon.svg)
Mailing Lists](/archives/ "openSUSE Mailing Lists")

[Sign In](/accounts/login/?next=/archives/list/updates%40lists.opensuse.org/message/VFHPTEJGEVMABICEX7RF37WHD23GNHPO/)
[Sign Up](/accounts/signup/?next=/archives/list/updates%40lists.opensuse.org/message/VFHPTEJGEVMABICEX7RF37WHD23GNHPO/)

[Manage this list](/manage/lists/updates.lists.opensuse.org/)
[Sign In](/accounts/login/?next=/archives/list/updates%40lists.opensuse.org/message/VFHPTEJGEVMABICEX7RF37WHD23GNHPO/)
[Sign Up](/accounts/signup/?next=/archives/list/updates%40lists.opensuse.org/message/VFHPTEJGEVMABICEX7RF37WHD23GNHPO/)

×
#### Keyboard Shortcuts

### Thread View

* `j`: Next unread message
* `k`: Previous unread message
* `j a`: Jump to all threads* `j l`: Jump to MailingList overview

[thread](/archives/list/updates%40lists.opensuse.org/thread/VFHPTEJGEVMABICEX7RF37WHD23GNHPO/#VFHPTEJGEVMABICEX7RF37WHD23GNHPO)

# openSUSE-SU-2014:0855-1: moderate: seamonkey: Update fixes nine security issues

![](https://seccdn.libravatar.org/avatar/099a17325bdf082b643d1a6bbacde279.jpg?s=120&d=mm&r=g)
## [opensuse-security＠opensuse.org](/archives/users/1b72def497ef4503896cd7a5fe9fb8e0/ "See the profile for opensuse-security＠opensuse.org")

1 Jul
2014

1 Jul
'14

10:04

openSUSE Security Update: seamonkey: Update fixes nine security issues
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
Announcement ID: openSUSE-SU-2014:0855-1
Rating: moderate
References: #881874
Cross-References: CVE-2014-1533 CVE-2014-1534 CVE-2014-1536
CVE-2014-1537 CVE-2014-1538 CVE-2014-1539
CVE-2014-1540 CVE-2014-1541 CVE-2014-1542
CVE-2014-1543 CVE-2014-1545
Affected Products:
openSUSE 13.1
openSUSE 12.3
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
An update that fixes 11 vulnerabilities is now available.
Description:
seamonkey was updated to version 2.26.1 to fix nine security issues.
These security issues were fixed:
\* Miscellaneous memory safety hazards (CVE-2014-1533/CVE-2014-1534)
\* Use-after-free and out of bounds issues found using Address Sanitizer
(CVE-2014-1536/CVE-2014-1537/CVE-2014-1538)
\* Use-after-free in Event Listener Manager (CVE-2014-1540)
\* Use-after-free with SMIL Animation Controller (CVE-2014-1541)
\* Buffer overflow in Web Audio Speex resampler (CVE-2014-1542)
\* Out of bounds write in NSPR (CVE-2014-1545)
Patch Instructions:
To install this openSUSE Security Update use YaST online\_update.
Alternatively you can run the command listed for your product:
- openSUSE 13.1:
zypper in -t patch openSUSE-2014-448
- openSUSE 12.3:
zypper in -t patch openSUSE-2014-448
To bring your system up-to-date, use "zypper patch".
Package List:
- openSUSE 13.1 (i586 x86\_64):
seamonkey-2.26.1-28.3
seamonkey-debuginfo-2.26.1-28.3
seamonkey-debugsource-2.26.1-28.3
seamonkey-dom-inspector-2.26.1-28.3
seamonkey-irc-2.26.1-28.3
seamonkey-translations-common-2.26.1-28.3
seamonkey-translations-other-2.26.1-28.3
seamonkey-venkman-2.26.1-28.3
- openSUSE 12.3 (i586 x86\_64):
seamonkey-2.26.1-1.53.3
seamonkey-debuginfo-2.26.1-1.53.3
seamonkey-debugsource-2.26.1-1.53.3
seamonkey-dom-inspector-2.26.1-1.53.3
seamonkey-irc-2.26.1-1.53.3
seamonkey-translations-common-2.26.1-1.53.3
seamonkey-translations-other-2.26.1-1.53.3
seamonkey-venkman-2.26.1-1.53.3
References:
<http://support.novell.com/security/cve/CVE-2014-1533.html>
<http://support.novell.com/security/cve/CVE-2014-1534.html>
<http://support.novell.com/security/cve/CVE-2014-1536.html>
<http://support.novell.com/security/cve/CVE-2014-1537.html>
<http://support.novell.com/security/cve/CVE-2014-1538.html>
<http://support.novell.com/security/cve/CVE-2014-1539.html>
<http://support.novell.com/security/cve/CVE-2014-1540.html>
<http://support.novell.com/security/cve/CVE-2014-1541.html>
<http://support.novell.com/security/cve/CVE-2014-1542.html>
<http://support.novell.com/security/cve/CVE-2014-1543.html>
<http://support.novell.com/security/cve/CVE-2014-1545.html>
<https://bugzilla.novell.com/881874>

[0](#like "You must be logged-in to vote.")
[0](#dislike "You must be logged-in to vote.")

Reply

[Sign in to reply online](/accounts/login/?next=/archives/list/updates%40lists.opensuse.org/message/VFHPTEJGEVMABICEX7RF37WHD23GNHPO/)
Use email software

[Back to the thread](/archives/list/updates%40lists.opensuse.org/thread/VFHPTEJGEVMABICEX7RF37WHD23GNHPO/#VFHPTEJGEVMABICEX7RF37WHD23GNHPO)

[Back to the list](/archives/list/updates%40lists.opensuse.org/)

![HyperKitty](/static/hyperkitty/img/logo.png)
Powered by [HyperKitty](http://hyperkitty.readthedocs.org) version 1.3.12.



=== Content from bugzilla.mozilla.org_983a2a2f_20250124_132119.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/1000960)
* [XML](/show_bug.cgi?ctype=xml&id=1000960)

Closed
[Bug 1000960](/show_bug.cgi?id=1000960)

Opened 11 years ago
Closed 11 years ago

# Assertion failure: isObject(), at js/Value.h:1156 or Crash [@ JSObject::getGeneric]

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

Assertion failure: isObject(), at js/Value.h:1156 or Crash [@ JSObject::getGeneric]

## Categories

### (Core :: JavaScript Engine, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=JavaScript%20Engine#JavaScript%20Engine)

JavaScript Engine
▾

Core :: JavaScript Engine
The interpreter engine for the core JavaScript language, independent of the browser's object model. File ONLY core JavaScript language bugs in this category. For bugs involving browser objects such as "window" and "document", use the "DOM" component. For bugs involving calls between JavaScript and C++, use the "XPConnect" component.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=JavaScript%20Engine)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

ARM

Linux

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

major

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla32

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Webcompat Score | --- |
| --- | --- |
| Performance Impact | --- |
| a11y-review | --- |
| Webcompat Priority | --- |
| Accessibility Severity | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox29 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=wontfix) |
| firefox30 | --- | [verified](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=verified) |
| firefox31 | --- | [verified](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=verified) |
| firefox32 | [+](/buglist.cgi?f1=cf_tracking_firefox32&o1=equals&v1=%2B) | [verified](/buglist.cgi?f1=cf_status_firefox32&o1=equals&v1=verified) |
| firefox-esr24 | --- | [unaffected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=unaffected) |
| b2g-v1.2 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=fixed) |
| b2g-v1.3 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=fixed) |
| b2g-v1.3T | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=fixed) |
| b2g-v1.4 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=fixed) |
| b2g-v2.0 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_2_0&o1=equals&v1=fixed) |
| seamonkey2.26 | --- | [fixed](/buglist.cgi?f1=cf_status_seamonkey226&o1=equals&v1=fixed) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox29 |  | wontfix |
| firefox30 |  | verified |
| firefox31 |  | verified |
| firefox32 | + | verified |
| firefox-esr24 |  | unaffected |
| b2g-v1.2 |  | fixed |
| b2g-v1.3 |  | fixed |
| b2g-v1.3T |  | fixed |
| b2g-v1.4 |  | fixed |
| b2g-v2.0 |  | fixed |
| relnote-firefox |  | --- |
| seamonkey2.26 |  | fixed |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: decoder, Assigned: dougc)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/465e24151b8719e22040ef4c0fce9028?d=mm&size=40)  [dougc](/user_profile?user_id=25650)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/b29b83d12aba827b8ff68296e473bec5?d=mm&size=40)  [decoder](/user_profile?user_id=395101)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/4fe52ee1503aecf7b6c976b8eb7c1753?d=mm&size=40)  [willyelm](/user_profile?user_id=714609)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

10 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[959597](/show_bug.cgi?id=959597 "RESOLVED FIXED - Add an ARM simulator for JIT code")

Dependency [tree](/showdependencytree.cgi?id=1000960&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=1000960)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (4 keywords, Whiteboard: [adv-main30+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[assertion](/buglist.cgi?keywords=assertion&resolution=---),
[crash](/buglist.cgi?keywords=crash&resolution=---),
[sec-moderate](/buglist.cgi?keywords=sec-moderate&resolution=---),
[testcase](/buglist.cgi?keywords=testcase&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[adv-main30+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [RyanVM](/user_profile?user_id=75935) | [in-testsuite](#c20 "11 years ago") | + |
| --- | --- | --- |
| [RyanVM](/user_profile?user_id=75935) | in-testsuite | + |
| --- | --- | --- |
|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | qe-verify |  |

## Crash Data

Signature:

[[@ JSObject::getGeneric ]](https://crash-stats.mozilla.org/signature/?signature=JSObject%3A%3AgetGeneric)

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (1 file, 3 obsolete files)

| [Correct the order of the operands to moveFloat32](/attachment.cgi?id=8415773)  [11 years ago](#c4)  [Douglas Crosher [:dougc]](/user_profile?user_id=25650)   1.57 KB, patch |  | [Details](/attachment.cgi?id=8415773&action=edit) | [Diff](/attachment.cgi?id=8415773&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1000960&attachment=8415773) |
| --- | --- | --- |
| [Correct the order of the operands in moveFloat32.](/attachment.cgi?id=8415900)  [11 years ago](#c5)  [Douglas Crosher [:dougc]](/user_profile?user_id=25650)   1.60 KB, patch | mjrosenb : [review+](#a646942_419881 "11 years ago")  Sylvestre : [approval-mozilla-aurora+](#a1095570_495955 "11 years ago")  Sylvestre : [approval-mozilla-beta+](#a1095570_495955 "11 years ago")  praghunath : [approval-mozilla-b2g26+](#c18 "11 years ago")  praghunath : [approval-mozilla-b2g28+](#c18 "11 years ago") | [Details](/attachment.cgi?id=8415900&action=edit) | [Diff](/attachment.cgi?id=8415900&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1000960&attachment=8415900) |
| [Correct the order of the operands in moveFloat32. (without test case for landing)](/attachment.cgi?id=8416802)  [11 years ago](#c8)  [Douglas Crosher [:dougc]](/user_profile?user_id=25650)   1.17 KB, patch | dougc : [review+](#c8 "11 years ago") | [Details](/attachment.cgi?id=8416802&action=edit) | [Diff](/attachment.cgi?id=8416802&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1000960&attachment=8416802) |
| [Test case.](/attachment.cgi?id=8416805)  [11 years ago](#c9)  [Douglas Crosher [:dougc]](/user_profile?user_id=25650)   770 bytes, patch | dougc : [review+](#c9 "11 years ago") | [Details](/attachment.cgi?id=8416805&action=edit) | [Diff](/attachment.cgi?id=8416805&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1000960&attachment=8416805) |

Show Obsolete

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=1000960#c0)• 11 years ago |
|  | |

The following testcase asserts on mozilla-central revision 1d0496e30feb (x86 ARM simulator build, run with --fuzzing-safe --ion-eager):
function testFloat32SetElemIC(a) {
for (var i = 0; i < a.length; i++) {
var r = Math.fround(Number.MAX\_VALUE);
a[i] = r;
assertEq(a[i], r);
}
}
testFloat32SetElemIC(new Array(2048));
testFloat32SetElemIC(new Float32Array(2048));

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=1000960#c1)• 11 years ago |
|  | |

Crash trace for the release build:
Program received signal SIGSEGV, Segmentation fault.
JSObject::getGeneric (cx=0x923daa8, obj=(JSObject \* const) 0xe0000000 Cannot access memory at address 0xe0000000, receiver=(JSObject \* const) 0xe0000000 Cannot access memory at address 0xe0000000, id=
$jsid("toSource"), vp=$jsval(-nan(0xfff8200000000))) at js/src/jsobj.h:977
977 js::GenericIdOp op = obj->getOps()->getGeneric;
(gdb) bt 16
#0 JSObject::getGeneric (cx=0x923daa8, obj=(JSObject \* const) 0xe0000000 Cannot access memory at address 0xe0000000, receiver=(JSObject \* const) 0xe0000000 Cannot access memory at address 0xe0000000, id=
$jsid("toSource"), vp=$jsval(-nan(0xfff8200000000))) at js/src/jsobj.h:977
#1 0x083b1335 in getProperty (vp=..., name=<optimized out>, receiver=..., obj=..., cx=0x923daa8) at js/src/jsobj.h:1001
#2 js::ValueToSource (cx=0x923daa8, v=$jsval(-nan(0xfffffe0000000))) at js/src/jsstr.cpp:4260
#3 0x0805545e in ToSource (bytes=<synthetic pointer>, vp=..., cx=0x923daa8) at js/src/shell/js.cpp:1587
#4 AssertEq (cx=0x923daa8, argc=2, vp=0xf68fedb8) at js/src/shell/js.cpp:1618
#5 0x082f2593 in js::jit::Simulator::softwareInterrupt (this=0x923d128, instr=0x92ea5f4) at js/src/jit/arm/Simulator-arm.cpp:2156
#6 0x082efa25 in decodeType7 (instr=0x92ea5f4, this=0x923d128) at js/src/jit/arm/Simulator-arm.cpp:3179
#7 js::jit::Simulator::instructionDecode (this=0x923d128, instr=0x92ea5f4) at js/src/jit/arm/Simulator-arm.cpp:4036
#8 0x082f29d0 in execute<false> (this=0x923d128) at js/src/jit/arm/Simulator-arm.cpp:4068
#9 js::jit::Simulator::callInternal (this=0x923d128, entry=0xf64b3648 "\360O-\351\r\200\240\341,\313\001\343#\311", <incomplete sequence \343>) at js/src/jit/arm/Simulator-arm.cpp:4150
#10 0x082f2a92 in js::jit::Simulator::call (this=0x923d128, entry=0xf64b3648 "\360O-\351\r\200\240\341,\313\001\343#\311", <incomplete sequence \343>, argument\_count=8)
at js/src/jit/arm/Simulator-arm.cpp:4230
#11 0x081e3b32 in EnterIon (data=..., cx=0x923daa8) at js/src/jit/Ion.cpp:2388
#12 js::jit::IonCannon (cx=0x923daa8, state=...) at js/src/jit/Ion.cpp:2469
#13 0x0843aef4 in js::RunScript (cx=0x923daa8, state=...) at js/src/vm/Interpreter.cpp:400
#14 0x0843b9b7 in RunScript (state=..., cx=0x923daa8) at js/src/vm/Interpreter.cpp:388
#15 js::Invoke (cx=0x923daa8, args=..., construct=js::NO\_CONSTRUCT) at js/src/vm/Interpreter.cpp:493
(More stack frames follow...)
(gdb) x /i $pc
=> 0x80db725 <JSObject::getGeneric(JSContext\*, JS::Handle<JSObject\*>, JS::Handle<JSObject\*>, JS::Handle<jsid>, JS::MutableHandle<JS::Value>)+37>: mov 0x4(%edx),%edx
(gdb) info reg edx
edx 0xe0000000 -536870912
Crash looks dangerous, marking s-s.Crash Signature: [@ JSObject::getGeneric]
[status-firefox31](/buglist.cgi?f1=cf_status_firefox31&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=affected)Keywords: [crash](/buglist.cgi?keywords=crash&resolution=---)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=1000960#c2)• 11 years ago |
|  | |

gary: can we run this testcase on your ODROID and see if it's a real ARM problem or if it's a simulator problem?Flags: needinfo?(gary)

|  | [Douglas Crosher [:dougc]](/user_profile?user_id=25650)  Assignee |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=1000960#c3)• 11 years ago |
|  | |

(In reply to Daniel Veditz [:dveditz] from [comment #2](/show_bug.cgi?id=1000960#c2 "VERIFIED FIXED - Assertion failure: isObject(), at js/Value.h:1156 or Crash [@ JSObject::getGeneric]"))
> gary: can we run this testcase on your ODROID and see if it's a real ARM
> problem or if it's a simulator problem?
It reproduces on hardware here.Flags: needinfo?(gary)

|  | [Douglas Crosher [:dougc]](/user_profile?user_id=25650)  Assignee |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=1000960#c4)• 11 years ago |
|  | |

Attached patch

[Correct the order of the operands to moveFloat32](attachment.cgi?id=8415773&action=diff) (obsolete)
— [Details](attachment.cgi?id=8415773&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1000960&attachment=8415773)

Assignee: nobody → dtc-moz
[Attachment #8415773](/attachment.cgi?id=8415773&action=edit "Correct the order of the operands to moveFloat32") -
Flags: review?(mrosenberg)

|  | [Douglas Crosher [:dougc]](/user_profile?user_id=25650)  Assignee |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=1000960#c5)• 11 years ago |
|  | |

Attached patch

[Correct the order of the operands in moveFloat32.](attachment.cgi?id=8415900&action=diff)
— [Details](attachment.cgi?id=8415900&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1000960&attachment=8415900)

Rebase.
[Attachment #8415773](/attachment.cgi?id=8415773&action=edit "Correct the order of the operands to moveFloat32") -
Attachment is obsolete: true
[Attachment #8415773](/attachment.cgi?id=8415773&action=edit "Correct the order of the operands to moveFloat32") -
Flags: review?(mrosenberg)
[Attachment #8415900](/attachment.cgi?id=8415900&action=edit "Correct the order of the operands in moveFloat32.") -
Flags: review?(mrosenberg)

|  | [Marty Rosenberg [:mjrosenb]](/user_profile?user_id=419881) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1000960#a646942_419881)• 11 years ago |

[Attachment #8415900](/attachment.cgi?id=8415900&action=edit "Correct the order of the operands in moveFloat32.") -
Flags: review?(mrosenberg) → review+

|  | [Douglas Crosher [:dougc]](/user_profile?user_id=25650)  Assignee |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=1000960#c6)• 11 years ago |
|  | |

Comment on [attachment 8415900](/attachment.cgi?id=8415900 "Correct the order of the operands in moveFloat32.") [[details]](/attachment.cgi?id=8415900&action=edit "Correct the order of the operands in moveFloat32.") [[diff]](/attachment.cgi?id=8415900&action=diff "Correct the order of the operands in moveFloat32.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1000960&attachment=8415900)
Correct the order of the operands in moveFloat32.
[Security approval request comment]
How easily could an exploit be constructed based on the patch?
It can cause the corruption of a floating point register. Not even sure if it could be exploited, but I don't know.
Do comments in the patch, the check-in comment, or tests included in the patch paint a bulls-eye on the security problem?
There is a test case.
Which older supported branches are affected by this flaw?
Release, beta, aurora, b2g26, b2g28, b2g30 are affected. b2g18 and esr24 look ok
If not all supported branches, which bug introduced the flaw?
The bug was introduced in [bug 915495](/show_bug.cgi?id=915495 "RESOLVED FIXED - lack of textures when zooming out on New Google Maps").
<http://hg.mozilla.org/mozilla-central/rev/a43be719866e>
Do you have backports for the affected branches? If not, how different, hard to create, and risky will they be?
It is literally a one line fix and is trivial to backport.
How likely is this patch to cause regressions; how much testing does it need?
It is a low risk of causing regressions. It fixes the test case and has been tested locally with the jit-tests.
[Attachment #8415900](/attachment.cgi?id=8415900&action=edit "Correct the order of the operands in moveFloat32.") -
Flags: sec-approval?

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=1000960#c7)• 11 years ago |
|  | |

We need to get a rating on this as part of getting it approved so we know the severity of this issue. Can this induce a crash at will and how exploitable is it, if so.
If this is a sec-high or sec-critical, we'd want the test to be split out and not landed with the fix. The test could land after we ship the fix publicly. That way we don't 0day ourselves with our own test.
[status-b2g-v1.2](/buglist.cgi?f1=cf_status_b2g_1_2&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=affected)
[status-b2g-v1.3](/buglist.cgi?f1=cf_status_b2g_1_3&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=affected)
[status-b2g-v1.3T](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=affected)
[status-b2g-v1.4](/buglist.cgi?f1=cf_status_b2g_1_4&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=affected)
[status-b2g-v2.0](/buglist.cgi?f1=cf_status_b2g_2_0&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_2_0&o1=equals&v1=affected)
[status-firefox29](/buglist.cgi?f1=cf_status_firefox29&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=wontfix)
[status-firefox30](/buglist.cgi?f1=cf_status_firefox30&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=affected)
[status-firefox32](/buglist.cgi?f1=cf_status_firefox32&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox32&o1=equals&v1=affected)
[tracking-firefox32](/buglist.cgi?f1=cf_tracking_firefox32&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox32&o1=equals&v1=%2B)

|  | [Douglas Crosher [:dougc]](/user_profile?user_id=25650)  Assignee |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=1000960#c8)• 11 years ago |
|  | |

Attached patch

[Correct the order of the operands in moveFloat32. (without test case for landing)](attachment.cgi?id=8416802&action=diff) (obsolete)
— [Details](attachment.cgi?id=8416802&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1000960&attachment=8416802)

Remove the test case.
[Attachment #8416802](/attachment.cgi?id=8416802&action=edit "Correct the order of the operands in moveFloat32. (without test case for landing)") -
Flags: review+

|  | [Douglas Crosher [:dougc]](/user_profile?user_id=25650)  Assignee |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=1000960#c9)• 11 years ago |
|  | |

Attached patch

[Test case.](attachment.cgi?id=8416805&action=diff) (obsolete)
— [Details](attachment.cgi?id=8416805&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1000960&attachment=8416805)

Split out the test case. Carrying forward the r+ for these.
[Attachment #8416805](/attachment.cgi?id=8416805&action=edit "Test case.") -
Flags: review+

|  | [Douglas Crosher [:dougc]](/user_profile?user_id=25650)  Assignee |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=1000960#c10)• 11 years ago |
|  | |

(In reply to Al Billings [:abillings] from [comment #7](/show_bug.cgi?id=1000960#c7 "VERIFIED FIXED - Assertion failure: isObject(), at js/Value.h:1156 or Crash [@ JSObject::getGeneric]"))
> We need to get a rating on this as part of getting it approved so we know
> the severity of this issue. Can this induce a crash at will and how
> exploitable is it, if so.
It can cause a non-canonical floating point value to be passed into C. This causes a assertion failure in the debug builds. It's undefined behaviour and an unknown. How far do we need to explore the potential to exploit this? Is a non-canonical JS value a sufficient exploit risk?Flags: needinfo?(jdemooij)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=1000960#c11)• 11 years ago |
|  | |

In conversation with Dan Veditz, we think this is a sec-moderate so you can just check into trunk and don't need sec-approval.Keywords: [sec-moderate](/buglist.cgi?keywords=sec-moderate&resolution=---)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1000960#a731628_280903)• 11 years ago |

[Attachment #8415900](/attachment.cgi?id=8415900&action=edit "Correct the order of the operands in moveFloat32.") -
Flags: sec-approval?

|  | [Douglas Crosher [:dougc]](/user_profile?user_id=25650)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1000960#a732857_25650)• 11 years ago |

[Attachment #8416802](/attachment.cgi?id=8416802&action=edit "Correct the order of the operands in moveFloat32. (without test case for landing)") -
Attachment is obsolete: true

|  | [Douglas Crosher [:dougc]](/user_profile?user_id=25650)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1000960#a732886_25650)• 11 years ago |

[Attachment #8416805](/attachment.cgi?id=8416805&action=edit "Test case.") -
Attachment is obsolete: true

|  | [Douglas Crosher [:dougc]](/user_profile?user_id=25650)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1000960#a732921_25650)• 11 years ago |

Keywords: [checkin-needed](/buglist.cgi?keywords=checkin-needed&resolution=---)

|  | [Douglas Crosher [:dougc]](/user_profile?user_id=25650)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1000960#a732967_25650)• 11 years ago |

Flags: needinfo?(jdemooij)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=1000960#c12)• 11 years ago |
|  | |

<https://hg.mozilla.org/integration/mozilla-inbound/rev/e2e7cad0ccae>Keywords: [checkin-needed](/buglist.cgi?keywords=checkin-needed&resolution=---)

|  | [Wes Kocher (:KWierso) (Not reading bugmail; email directly if needed)](/user_profile?user_id=308534) |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=1000960#c13)• 11 years ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/e2e7cad0ccae>Status: NEW → RESOLVEDClosed: 11 years ago
[status-firefox32](/buglist.cgi?f1=cf_status_firefox32&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox32&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox32&o1=equals&v1=fixed)Resolution: --- → FIXEDTarget Milestone: --- → mozilla32

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=1000960#c14)• 11 years ago |
|  | |

Please request Aurora/Beta/b2g28/b2g26 approval on this patch.
[status-b2g-v2.0](/buglist.cgi?f1=cf_status_b2g_2_0&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_2_0&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_2_0&o1=equals&v1=fixed)
[status-firefox-esr24](/buglist.cgi?f1=cf_status_firefox_esr24&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=unaffected)Flags: needinfo?(dtc-moz)

|  | [Douglas Crosher [:dougc]](/user_profile?user_id=25650)  Assignee |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=1000960#c15)• 11 years ago |
|  | |

Comment on [attachment 8415900](/attachment.cgi?id=8415900 "Correct the order of the operands in moveFloat32.") [[details]](/attachment.cgi?id=8415900&action=edit "Correct the order of the operands in moveFloat32.") [[diff]](/attachment.cgi?id=8415900&action=diff "Correct the order of the operands in moveFloat32.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1000960&attachment=8415900)
Correct the order of the operands in moveFloat32.
[Approval Request Comment]
Bug caused by (feature/regressing bug #):
The bug was introduced in [bug 915495](/show_bug.cgi?id=915495 "RESOLVED FIXED - lack of textures when zooming out on New Google Maps").
User impact if declined:
Errors in some float computations. Could lead to unexpected JS values being passed into C which could cause a crash. There is an unexplored risk of this being used for an exploit.
Testing completed:
Locally and on m-c.
Risk to taking this patch (and alternatives if risky):
Very low. Literally a one line fix.
String or UUID changes made by this patch:
n/a
[Attachment #8415900](/attachment.cgi?id=8415900&action=edit "Correct the order of the operands in moveFloat32.") -
Flags: approval-mozilla-beta?
[Attachment #8415900](/attachment.cgi?id=8415900&action=edit "Correct the order of the operands in moveFloat32.") -
Flags: approval-mozilla-b2g30?
[Attachment #8415900](/attachment.cgi?id=8415900&action=edit "Correct the order of the operands in moveFloat32.") -
Flags: approval-mozilla-b2g28?
[Attachment #8415900](/attachment.cgi?id=8415900&action=edit "Correct the order of the operands in moveFloat32.") -
Flags: approval-mozilla-b2g26?
[Attachment #8415900](/attachment.cgi?id=8415900&action=edit "Correct the order of the operands in moveFloat32.") -
Flags: approval-mozilla-aurora?Flags: needinfo?(dtc-moz)

|  | [Sylvestre Ledru [:Sylvestre]](/user_profile?user_id=495955) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1000960#a1095570_495955)• 11 years ago |

[Attachment #8415900](/attachment.cgi?id=8415900&action=edit "Correct the order of the operands in moveFloat32.") -
Flags: approval-mozilla-beta?
[Attachment #8415900](/attachment.cgi?id=8415900&action=edit "Correct the order of the operands in moveFloat32.") -
Flags: approval-mozilla-beta+
[Attachment #8415900](/attachment.cgi?id=8415900&action=edit "Correct the order of the operands in moveFloat32.") -
Flags: approval-mozilla-aurora?
[Attachment #8415900](/attachment.cgi?id=8415900&action=edit "Correct the order of the operands in moveFloat32.") -
Flags: approval-mozilla-aurora+

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=1000960#c16)• 11 years ago |
|  | |

Comment on [attachment 8415900](/attachment.cgi?id=8415900 "Correct the order of the operands in moveFloat32.") [[details]](/attachment.cgi?id=8415900&action=edit "Correct the order of the operands in moveFloat32.") [[diff]](/attachment.cgi?id=8415900&action=diff "Correct the order of the operands in moveFloat32.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1000960&attachment=8415900)
Correct the order of the operands in moveFloat32.
This will merge to b2g30 from mozilla-beta.
[Attachment #8415900](/attachment.cgi?id=8415900&action=edit "Correct the order of the operands in moveFloat32.") -
Flags: approval-mozilla-b2g30?

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=1000960#c17)• 11 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-aurora/rev/1389f09bbbc9>
<https://hg.mozilla.org/releases/mozilla-beta/rev/10e5a05f34b3>
[status-firefox30](/buglist.cgi?f1=cf_status_firefox30&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=fixed)
[status-firefox31](/buglist.cgi?f1=cf_status_firefox31&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=fixed)

|  | [Preeti Raghunath(:Preeti)](/user_profile?user_id=474545) |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=1000960#c18)• 11 years ago |
|  | |

Comment on [attachment 8415900](/attachment.cgi?id=8415900 "Correct the order of the operands in moveFloat32.") [[details]](/attachment.cgi?id=8415900&action=edit "Correct the order of the operands in moveFloat32.") [[diff]](/attachment.cgi?id=8415900&action=diff "Correct the order of the operands in moveFloat32.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1000960&attachment=8415900)
Correct the order of the operands in moveFloat32.
Review of [attachment 8415900](/attachment.cgi?id=8415900 "Correct the order of the operands in moveFloat32.") [[details]](/attachment.cgi?id=8415900&action=edit "Correct the order of the operands in moveFloat32.") [[diff]](/attachment.cgi?id=8415900&action=diff "Correct the order of the operands in moveFloat32.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1000960&attachment=8415900):
-----------------------------------------------------------------
Taking for sec-moderate
[Attachment #8415900](/attachment.cgi?id=8415900&action=edit "Correct the order of the operands in moveFloat32.") -
Flags: approval-mozilla-b2g28?
[Attachment #8415900](/attachment.cgi?id=8415900&action=edit "Correct the order of the operands in moveFloat32.") -
Flags: approval-mozilla-b2g28+
[Attachment #8415900](/attachment.cgi?id=8415900&action=edit "Correct the order of the operands in moveFloat32.") -
Flags: approval-mozilla-b2g26?
[Attachment #8415900](/attachment.cgi?id=8415900&action=edit "Correct the order of the operands in moveFloat32.") -
Flags: approval-mozilla-b2g26+

|  | [Douglas Crosher [:dougc]](/user_profile?user_id=25650)  Assignee |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=1000960#c19)• 11 years ago |
|  | |

Regarding the query about applying the patch to b2g26 and b2g28. b2g26 does have float32 support so the test is expected to run. The affected function was renamed and the fix would be applied to 'void moveFloat(FloatRegister src, FloatRegister dest)'.

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=1000960#c20)• 11 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-b2g30_v1_4/rev/10e5a05f34b3>
<https://hg.mozilla.org/releases/mozilla-b2g28_v1_3/rev/b4b8fe5b4eac>
<https://hg.mozilla.org/releases/mozilla-b2g26_v1_2/rev/7f36f95f0845>
[status-b2g-v1.2](/buglist.cgi?f1=cf_status_b2g_1_2&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=fixed)
[status-b2g-v1.3](/buglist.cgi?f1=cf_status_b2g_1_3&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=fixed)
[status-b2g-v1.3T](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=fixed)
[status-b2g-v1.4](/buglist.cgi?f1=cf_status_b2g_1_4&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=fixed)Flags: in-testsuite+

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1000960#a3394063_280903)• 11 years ago |

Whiteboard: [adv-main30+]

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1000960#a3565421_395101)• 11 years ago |

Status: RESOLVED → VERIFIED

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Comment 21](/show_bug.cgi?id=1000960#c21)• 11 years ago |
|  | |

JSBugMon: This bug has been automatically verified fixed.

|  | [Justin Wood (:Callek)](/user_profile?user_id=129968) |  |
| --- | --- | --- |
| [Comment 22](/show_bug.cgi?id=1000960#c22)• 11 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-release/rev/97a41bb4273d>
[status-seamonkey2.26](/buglist.cgi?f1=cf_status_seamonkey226&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_seamonkey226&o1=equals&v1=fixed)

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1000960#a4250780_395101)• 11 years ago |

[status-firefox30](/buglist.cgi?f1=cf_status_firefox30&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=verified)

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Comment 23](/show_bug.cgi?id=1000960#c23)• 11 years ago |
|  | |

JSBugMon: This bug has been automatically verified fixed on Fx30

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1000960#a7623409_395101)• 11 years ago |

[status-firefox31](/buglist.cgi?f1=cf_status_firefox31&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=verified)
[status-firefox32](/buglist.cgi?f1=cf_status_firefox32&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox32&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox32&o1=equals&v1=verified)

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Comment 24](/show_bug.cgi?id=1000960#c24)• 11 years ago |
|  | |

JSBugMon: This bug has been automatically verified fixed on Fx31
JSBugMon: This bug has been automatically verified fixed on Fx32

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1000960#a42604656_1689)• 9 years ago |

Group: core-security
You need to [log in](/show_bug.cgi?id=1000960&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Douglas Crosher [:dougc]](/user_profile?user_id=25650)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from lists.opensuse.org_17b15b88_20250124_132112.html ===


[![openSUSE](https://static.opensuse.org/favicon.svg)
Mailing Lists](/archives/ "openSUSE Mailing Lists")

[Sign In](/accounts/login/?next=/archives/list/updates%40lists.opensuse.org/message/XA3QKYPVYXRJCIVGLR5TGVCAOTYTBWLD/)
[Sign Up](/accounts/signup/?next=/archives/list/updates%40lists.opensuse.org/message/XA3QKYPVYXRJCIVGLR5TGVCAOTYTBWLD/)

[Manage this list](/manage/lists/updates.lists.opensuse.org/)
[Sign In](/accounts/login/?next=/archives/list/updates%40lists.opensuse.org/message/XA3QKYPVYXRJCIVGLR5TGVCAOTYTBWLD/)
[Sign Up](/accounts/signup/?next=/archives/list/updates%40lists.opensuse.org/message/XA3QKYPVYXRJCIVGLR5TGVCAOTYTBWLD/)

×
#### Keyboard Shortcuts

### Thread View

* `j`: Next unread message
* `k`: Previous unread message
* `j a`: Jump to all threads* `j l`: Jump to MailingList overview

[thread](/archives/list/updates%40lists.opensuse.org/thread/XA3QKYPVYXRJCIVGLR5TGVCAOTYTBWLD/#XA3QKYPVYXRJCIVGLR5TGVCAOTYTBWLD)

# openSUSE-SU-2014:0819-1: moderate: MozillaFirefox, mozilla-nspr: Update fixes nine security issues

![](https://seccdn.libravatar.org/avatar/099a17325bdf082b643d1a6bbacde279.jpg?s=120&d=mm&r=g)
## [opensuse-security＠opensuse.org](/archives/users/1b72def497ef4503896cd7a5fe9fb8e0/ "See the profile for opensuse-security＠opensuse.org")

20 Jun
2014

20 Jun
'14

09:04

openSUSE Security Update: MozillaFirefox, mozilla-nspr: Update fixes nine security issues
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
Announcement ID: openSUSE-SU-2014:0819-1
Rating: moderate
References: #881874
Cross-References: CVE-2014-1533 CVE-2014-1534 CVE-2014-1536
CVE-2014-1537 CVE-2014-1538 CVE-2014-1539
CVE-2014-1540 CVE-2014-1541 CVE-2014-1542
CVE-2014-1543 CVE-2014-1545
Affected Products:
openSUSE 13.1
openSUSE 12.3
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
An update that fixes 11 vulnerabilities is now available.
Description:
mozilla-nspr was updated to version 4.10.6 to fix one security issue:
\* OOB write with sprintf and console functions (CVE-2014-1545)
MozillaFirefox was updated to version 30.0 to fix eight security issues:
\* Miscellaneous memory safety hazards (CVE-2014-1533/CVE-2014-1534)
\* Use-after-free and out of bounds issues found using Address Sanitizer
(CVE-2014-1536/CVE-2014-1537/CVE-2014-1538)
\* Use-after-free in Event Listener Manager (CVE-2014-1540)
\* Use-after-free with SMIL Animation Controller (CVE-2014-1541)
\* Buffer overflow in Web Audio Speex resampler (CVE-2014-1542)
Several non-security bugs were also fixed in this release.
Patch Instructions:
To install this openSUSE Security Update use YaST online\_update.
Alternatively you can run the command listed for your product:
- openSUSE 13.1:
zypper in -t patch openSUSE-2014-432
- openSUSE 12.3:
zypper in -t patch openSUSE-2014-432
To bring your system up-to-date, use "zypper patch".
Package List:
- openSUSE 13.1 (i586 x86\_64):
MozillaFirefox-30.0-29.1
MozillaFirefox-branding-upstream-30.0-29.1
MozillaFirefox-buildsymbols-30.0-29.1
MozillaFirefox-debuginfo-30.0-29.1
MozillaFirefox-debugsource-30.0-29.1
MozillaFirefox-devel-30.0-29.1
MozillaFirefox-translations-common-30.0-29.1
MozillaFirefox-translations-other-30.0-29.1
libfreebl3-3.16-23.1
libfreebl3-debuginfo-3.16-23.1
libsoftokn3-3.16-23.1
libsoftokn3-debuginfo-3.16-23.1
mozilla-nspr-4.10.6-12.1
mozilla-nspr-debuginfo-4.10.6-12.1
mozilla-nspr-debugsource-4.10.6-12.1
mozilla-nspr-devel-4.10.6-12.1
mozilla-nss-3.16-23.1
mozilla-nss-certs-3.16-23.1
mozilla-nss-certs-debuginfo-3.16-23.1
mozilla-nss-debuginfo-3.16-23.1
mozilla-nss-debugsource-3.16-23.1
mozilla-nss-devel-3.16-23.1
mozilla-nss-sysinit-3.16-23.1
mozilla-nss-sysinit-debuginfo-3.16-23.1
mozilla-nss-tools-3.16-23.1
mozilla-nss-tools-debuginfo-3.16-23.1
- openSUSE 13.1 (x86\_64):
libfreebl3-32bit-3.16-23.1
libfreebl3-debuginfo-32bit-3.16-23.1
libsoftokn3-32bit-3.16-23.1
libsoftokn3-debuginfo-32bit-3.16-23.1
mozilla-nspr-32bit-4.10.6-12.1
mozilla-nspr-debuginfo-32bit-4.10.6-12.1
mozilla-nss-32bit-3.16-23.1
mozilla-nss-certs-32bit-3.16-23.1
mozilla-nss-certs-debuginfo-32bit-3.16-23.1
mozilla-nss-debuginfo-32bit-3.16-23.1
mozilla-nss-sysinit-32bit-3.16-23.1
mozilla-nss-sysinit-debuginfo-32bit-3.16-23.1
- openSUSE 12.3 (i586 x86\_64):
MozillaFirefox-30.0-1.68.1
MozillaFirefox-branding-upstream-30.0-1.68.1
MozillaFirefox-buildsymbols-30.0-1.68.1
MozillaFirefox-debuginfo-30.0-1.68.1
MozillaFirefox-debugsource-30.0-1.68.1
MozillaFirefox-devel-30.0-1.68.1
MozillaFirefox-translations-common-30.0-1.68.1
MozillaFirefox-translations-other-30.0-1.68.1
libfreebl3-3.16-1.39.1
libfreebl3-debuginfo-3.16-1.39.1
libsoftokn3-3.16-1.39.1
libsoftokn3-debuginfo-3.16-1.39.1
mozilla-nspr-4.10.6-1.30.1
mozilla-nspr-debuginfo-4.10.6-1.30.1
mozilla-nspr-debugsource-4.10.6-1.30.1
mozilla-nspr-devel-4.10.6-1.30.1
mozilla-nss-3.16-1.39.1
mozilla-nss-certs-3.16-1.39.1
mozilla-nss-certs-debuginfo-3.16-1.39.1
mozilla-nss-debuginfo-3.16-1.39.1
mozilla-nss-debugsource-3.16-1.39.1
mozilla-nss-devel-3.16-1.39.1
mozilla-nss-sysinit-3.16-1.39.1
mozilla-nss-sysinit-debuginfo-3.16-1.39.1
mozilla-nss-tools-3.16-1.39.1
mozilla-nss-tools-debuginfo-3.16-1.39.1
- openSUSE 12.3 (x86\_64):
libfreebl3-32bit-3.16-1.39.1
libfreebl3-debuginfo-32bit-3.16-1.39.1
libsoftokn3-32bit-3.16-1.39.1
libsoftokn3-debuginfo-32bit-3.16-1.39.1
mozilla-nspr-32bit-4.10.6-1.30.1
mozilla-nspr-debuginfo-32bit-4.10.6-1.30.1
mozilla-nss-32bit-3.16-1.39.1
mozilla-nss-certs-32bit-3.16-1.39.1
mozilla-nss-certs-debuginfo-32bit-3.16-1.39.1
mozilla-nss-debuginfo-32bit-3.16-1.39.1
mozilla-nss-sysinit-32bit-3.16-1.39.1
mozilla-nss-sysinit-debuginfo-32bit-3.16-1.39.1
References:
<http://support.novell.com/security/cve/CVE-2014-1533.html>
<http://support.novell.com/security/cve/CVE-2014-1534.html>
<http://support.novell.com/security/cve/CVE-2014-1536.html>
<http://support.novell.com/security/cve/CVE-2014-1537.html>
<http://support.novell.com/security/cve/CVE-2014-1538.html>
<http://support.novell.com/security/cve/CVE-2014-1539.html>
<http://support.novell.com/security/cve/CVE-2014-1540.html>
<http://support.novell.com/security/cve/CVE-2014-1541.html>
<http://support.novell.com/security/cve/CVE-2014-1542.html>
<http://support.novell.com/security/cve/CVE-2014-1543.html>
<http://support.novell.com/security/cve/CVE-2014-1545.html>
<https://bugzilla.novell.com/881874>

[0](#like "You must be logged-in to vote.")
[0](#dislike "You must be logged-in to vote.")

Reply

[Sign in to reply online](/accounts/login/?next=/archives/list/updates%40lists.opensuse.org/message/XA3QKYPVYXRJCIVGLR5TGVCAOTYTBWLD/)
Use email software

[Back to the thread](/archives/list/updates%40lists.opensuse.org/thread/XA3QKYPVYXRJCIVGLR5TGVCAOTYTBWLD/#XA3QKYPVYXRJCIVGLR5TGVCAOTYTBWLD)

[Back to the list](/archives/list/updates%40lists.opensuse.org/)

![HyperKitty](/static/hyperkitty/img/logo.png)
Powered by [HyperKitty](http://hyperkitty.readthedocs.org) version 1.3.12.



=== Content from bugzilla.mozilla.org_c127e60e_20250126_011817.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Sat Jan 25 2025 17:18:17 PST

* **Bug ID:**
  995816,
  995817,
  978652,
  1002340,
  1005578,
  973874,
  996536,
  1000960,
  1000598,
  969517,
  969549,
  990868,
  1007223

---

13 bugs found.

| [ID](/buglist.cgi?bug_id=995816%2C995817%2C978652%2C1002340%2C1005578%2C973874%2C996536%2C1000960%2C1000598%2C969517%2C969549%2C990868%2C1007223&query_format=advanced&order=bug_id%20DESC&query_based_on=) | [Type](/buglist.cgi?bug_id=995816%2C995817%2C978652%2C1002340%2C1005578%2C973874%2C996536%2C1000960%2C1000598%2C969517%2C969549%2C990868%2C1007223&query_format=advanced&order=bug_type%2Cbug_status%2Cpriority%2Cassigned_to%2Cbug_id&query_based_on=) | [Summary](/buglist.cgi?bug_id=995816%2C995817%2C978652%2C1002340%2C1005578%2C973874%2C996536%2C1000960%2C1000598%2C969517%2C969549%2C990868%2C1007223&query_format=advanced&order=short_desc%2Cbug_status%2Cpriority%2Cassigned_to%2Cbug_id&query_based_on=) | [Product](/buglist.cgi?bug_id=995816%2C995817%2C978652%2C1002340%2C1005578%2C973874%2C996536%2C1000960%2C1000598%2C969517%2C969549%2C990868%2C1007223&query_format=advanced&order=product%2Cbug_status%2Cpriority%2Cassigned_to%2Cbug_id&query_based_on=) | [Comp](/buglist.cgi?bug_id=995816%2C995817%2C978652%2C1002340%2C1005578%2C973874%2C996536%2C1000960%2C1000598%2C969517%2C969549%2C990868%2C1007223&query_format=advanced&order=component%2Cbug_status%2Cpriority%2Cassigned_to%2Cbug_id&query_based_on=) | [Assignee▲](/buglist.cgi?bug_id=995816%2C995817%2C978652%2C1002340%2C1005578%2C973874%2C996536%2C1000960%2C1000598%2C969517%2C969549%2C990868%2C1007223&query_format=advanced&order=assigned_to%20DESC%2Cbug_status%2Cpriority%2Cbug_id&query_based_on=) | [Status▲](/buglist.cgi?bug_id=995816%2C995817%2C978652%2C1002340%2C1005578%2C973874%2C996536%2C1000960%2C1000598%2C969517%2C969549%2C990868%2C1007223&query_format=advanced&order=bug_status%20DESC%2Cpriority%2Cassigned_to%2Cbug_id&query_based_on=) | [Resolution](/buglist.cgi?bug_id=995816%2C995817%2C978652%2C1002340%2C1005578%2C973874%2C996536%2C1000960%2C1000598%2C969517%2C969549%2C990868%2C1007223&query_format=advanced&order=resolution%2Cbug_status%2Cpriority%2Cassigned_to%2Cbug_id&query_based_on=) | [Updated](/buglist.cgi?bug_id=995816%2C995817%2C978652%2C1002340%2C1005578%2C973874%2C996536%2C1000960%2C1000598%2C969517%2C969549%2C990868%2C1007223&query_format=advanced&order=changeddate%2Cbug_status%2Cpriority%2Cassigned_to%2Cbug_id&query_based_on=) |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |
| [969517](/show_bug.cgi?id=969517 "RESOLVED FIXED - Faulty/ASan: heap-use-after-free of a LayerComposite that was destroyed by ContainerLayer::RemoveChild") |  | [Faulty/ASan: heap-use-after-free of a LayerComposite that was destroyed by ContainerLayer::RemoveChild](/show_bug.cgi?id=969517) | Core | Graphics | jacob.benoit.1 | RESO | FIXE | 2015-08-30 |
| [969549](/show_bug.cgi?id=969549 "RESOLVED FIXED - Faulty: PCompositableTransaction reinterprets between layer types based on untrusted message params") |  | [Faulty: PCompositableTransaction reinterprets between layer types based on untrusted message params](/show_bug.cgi?id=969549) | Core | Graphics | jacob.benoit.1 | RESO | FIXE | 2015-08-30 |
| [1002340](/show_bug.cgi?id=1002340 "RESOLVED FIXED - Shutdown crash with many mozGetUserMedia calls") |  | [Shutdown crash with many mozGetUserMedia calls](/show_bug.cgi?id=1002340) | Core | WebRTC: Audio/Video | rjesup | RESO | FIXE | 2015-08-30 |
| [1000598](/show_bug.cgi?id=1000598 "RESOLVED FIXED - Use after free JS_ASSERT(arenaHeader()->allocated());") |  | [Use after free JS\_ASSERT(arenaHeader()->allocated());](/show_bug.cgi?id=1000598) | Core | JavaScript: GC | shu | RESO | FIXE | 2015-08-30 |
| [990868](/show_bug.cgi?id=990868 "VERIFIED FIXED - limit ChannelMergerNode output channel count") |  | [limit ChannelMergerNode output channel count](/show_bug.cgi?id=990868) | Core | Web Audio | karlt | VERI | FIXE | 2014-07-30 |
| [978652](/show_bug.cgi?id=978652 "VERIFIED FIXED - Navigating while new Workers are queued causes all kinds of trouble") |  | [Navigating while new Workers are queued causes all kinds of trouble](/show_bug.cgi?id=978652) | Core | DOM: Workers | bent.mozilla | VERI | FIXE | 2015-08-30 |
| [1000960](/show_bug.cgi?id=1000960 "VERIFIED FIXED - Assertion failure: isObject(), at js/Value.h:1156 or Crash [@ JSObject::getGeneric]") |  | [Assertion failure: isObject(), at js/Value.h:1156 or Crash [@ JSObject::getGeneric]](/show_bug.cgi?id=1000960) | Core | JavaScript Engine | dtc-moz | VERI | FIXE | 2015-08-30 |
| [973874](/show_bug.cgi?id=973874 "VERIFIED FIXED - Crash [@ js::jit::Simulator::instructionDecode] with poisoned pointer (0xdeadbeef)") |  | [Crash [@ js::jit::Simulator::instructionDecode] with poisoned pointer (0xdeadbeef)](/show_bug.cgi?id=973874) | Core | JavaScript Engine | marty.rosenberg | VERI | FIXE | 2015-05-18 |
| [995816](/show_bug.cgi?id=995816 "VERIFIED FIXED - Differential Testing: Different output message involving gc") |  | [Differential Testing: Different output message involving gc](/show_bug.cgi?id=995816) | Core | JavaScript Engine: J | nicolas.b.pierron | VERI | FIXE | 2015-08-30 |
| [995817](/show_bug.cgi?id=995817 "VERIFIED FIXED - Differential Testing: Incorrect result when division-by-zero is used in an indirectly-truncated context") |  | [Differential Testing: Incorrect result when division-by-zero is used in an indirectly-truncated context](/show_bug.cgi?id=995817) | Core | JavaScript Engine: J | nicolas.b.pierron | VERI | FIXE | 2015-08-30 |
| [1007223](/show_bug.cgi?id=1007223 "VERIFIED FIXED - AudioContext::DecodeAudioData passes ArrayBuffer data across threads without transferring it") |  | [AudioContext::DecodeAudioData passes ArrayBuffer data across threads without transferring it](/show_bug.cgi?id=1007223) | Core | Web Audio | padenot | VERI | FIXE | 2015-09-22 |
| [996536](/show_bug.cgi?id=996536 "VERIFIED FIXED - Assertion failure: isInterpretedLazy() && u.i.s.lazy_, at jsfun.h:328 or Crash [@ JSFunction::lazyScript] or Crash [@ js::ExclusiveContext::getNewType] with gcPreserveCode") |  | [Assertion failure: isInterpretedLazy() && u.i.s.lazy\_, at jsfun.h:328 or Crash [@ JSFunction::lazyScript] or Crash [@ js::ExclusiveContext::getNewType] with gcPreserveCode](/show_bug.cgi?id=996536) | Core | JavaScript Engine | till | VERI | FIXE | 2015-08-30 |
| [1005578](/show_bug.cgi?id=1005578 "VERIFIED FIXED - nsStandardURL::SetHost called net_ToLowerCase with a bogus pointer, #2") |  | [nsStandardURL::SetHost called net\_ToLowerCase with a bogus pointer, #2](/show_bug.cgi?id=1005578) | Core | Networking | valentin.gosu | VERI | FIXE | 2015-08-30 |

13 bugs found.

|  |  | [REST](/rest/bug?include_fields=id,summary,status&bug_id=995816%2C995817%2C978652%2C1002340%2C1005578%2C973874%2C996536%2C1000960%2C1000598%2C969517%2C969549%2C990868%2C1007223 "Query as a REST API request") | [CSV](/buglist.cgi?bug_id=995816%2C995817%2C978652%2C1002340%2C1005578%2C973874%2C996536%2C1000960%2C1000598%2C969517%2C969549%2C990868%2C1007223&query_format=advanced&ctype=csv&human=1) | [Feed](/buglist.cgi?bug_id=995816%2C995817%2C978652%2C1002340%2C1005578%2C973874%2C996536%2C1000960%2C1000598%2C969517%2C969549%2C990868%2C1007223&query_format=advanced&title=Bug%20List&ctype=atom) | [iCalendar](/buglist.cgi?bug_id=995816%2C995817%2C978652%2C1002340%2C1005578%2C973874%2C996536%2C1000960%2C1000598%2C969517%2C969549%2C990868%2C1007223&query_format=advanced&ctype=ics)  [Change Columns](/colchange.cgi?bug_id=995816%2C995817%2C978652%2C1002340%2C1005578%2C973874%2C996536%2C1000960%2C1000598%2C969517%2C969549%2C990868%2C1007223&query_format=advanced&query_based_on=) | [Edit Search](/query.cgi?bug_id=995816%2C995817%2C978652%2C1002340%2C1005578%2C973874%2C996536%2C1000960%2C1000598%2C969517%2C969549%2C990868%2C1007223&query_format=advanced) |  | as |
| --- | --- | --- | --- | --- | --- |

[File
a new bug
in the "Core" product](/enter_bug.cgi?product=Core)



=== Content from bugzilla.mozilla.org_5e7656b7_20250124_132117.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/1000598)
* [XML](/show_bug.cgi?ctype=xml&id=1000598)

Closed
[Bug 1000598](/show_bug.cgi?id=1000598)

Opened 11 years ago
Closed 11 years ago

# Use after free JS\_ASSERT(arenaHeader()->allocated());

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

Use after free JS\_ASSERT(arenaHeader()->allocated());

## Categories

### (Core :: JavaScript: GC, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=JavaScript%3A%20GC#JavaScript%3A%20GC)

JavaScript: GC
▾

Core :: JavaScript: GC
File bugs here for issues involving the garbage collector (crashes, leaks, etc.), where the issue is *not* one caused by failure to use the JSAPI correctly.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%3A%20GC&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%3A%20GC&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=JavaScript%3A%20GC)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

unspecified

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

All

All

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

normal

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla32

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| blocking-b2g | [1.3+](/buglist.cgi?f1=cf_blocking_b2g&o1=equals&v1=1.3%2B) |
| --- | --- |

| Webcompat Score | --- |
| --- | --- |
| Webcompat Priority | --- |
| Accessibility Severity | --- |
| Performance Impact | --- |
| a11y-review | --- |
| blocking-b2g | 1.3+ |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox28 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=wontfix) |
| firefox29 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=wontfix) |
| firefox30 | --- | [fixed](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=fixed) |
| firefox31 | --- | [fixed](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=fixed) |
| firefox32 | --- | [fixed](/buglist.cgi?f1=cf_status_firefox32&o1=equals&v1=fixed) |
| firefox-esr24 | --- | [unaffected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=unaffected) |
| b2g18 | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=unaffected) |
| b2g-v1.1hd | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=equals&v1=unaffected) |
| b2g-v1.2 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=fixed) |
| b2g-v1.3 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=fixed) |
| b2g-v1.3T | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=fixed) |
| b2g-v1.4 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=fixed) |
| b2g-v2.0 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_2_0&o1=equals&v1=fixed) |
| seamonkey2.26 | --- | [fixed](/buglist.cgi?f1=cf_status_seamonkey226&o1=equals&v1=fixed) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox28 |  | wontfix |
| firefox29 |  | wontfix |
| firefox30 |  | fixed |
| firefox31 |  | fixed |
| firefox32 |  | fixed |
| firefox-esr24 |  | unaffected |
| b2g18 |  | unaffected |
| b2g-v1.1hd |  | unaffected |
| b2g-v1.2 |  | fixed |
| b2g-v1.3 |  | fixed |
| b2g-v1.3T |  | fixed |
| b2g-v1.4 |  | fixed |
| b2g-v2.0 |  | fixed |
| relnote-firefox |  | --- |
| seamonkey2.26 |  | fixed |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: gwagner, Assigned: shu)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/3d32950049beb9cc36bee9899d54f28d?d=mm&size=40)  [shu](/user_profile?user_id=381259)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/1ab9ae817c429c697626739e4d222c88?d=mm&size=40)  [gwagner](/user_profile?user_id=314734)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/4fe52ee1503aecf7b6c976b8eb7c1753?d=mm&size=40)  [willyelm](/user_profile?user_id=714609)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

14 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[897655](/show_bug.cgi?id=897655 "RESOLVED FIXED - Use off thread JS parsing when loading scripts from XUL documents")

Dependency [tree](/showdependencytree.cgi?id=1000598&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=1000598)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Keywords: csectype-uaf, regression, sec-high, Whiteboard: [adv-main30+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[csectype-uaf](/buglist.cgi?keywords=csectype-uaf&resolution=---),
[regression](/buglist.cgi?keywords=regression&resolution=---),
[sec-high](/buglist.cgi?keywords=sec-high&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[adv-main30+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [cbook](/user_profile?user_id=277293) | [in-testsuite](#c31 "11 years ago") | ? |
| --- | --- | --- |
| [cbook](/user_profile?user_id=277293) | in-testsuite | ? |
| --- | --- | --- |
|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (1 file)

| [Clear TypeCompartment tables.](/attachment.cgi?id=8411468)  [11 years ago](#c1)  [Shu-yu Guo [:shu]](/user_profile?user_id=381259)   2.64 KB, patch | billm : [review+](#a6246_389993 "11 years ago")  Sylvestre : [approval-mozilla-aurora+](#c30 "11 years ago")  Sylvestre : [approval-mozilla-beta+](#c30 "11 years ago")  Sylvestre : [approval-mozilla-esr24-](#c24 "11 years ago")  abillings : [sec-approval+](#a148633_280903 "11 years ago") | [Details](/attachment.cgi?id=8411468&action=edit) | [Diff](/attachment.cgi?id=8411468&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1000598&attachment=8411468) |
| --- | --- | --- |

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Gregor Wagner [:gwagner]](/user_profile?user_id=314734)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=1000598#c0)• 11 years ago |
|  | |

Seen on nexus 4 with debug gecko and current trunk.
STR:
Go to maps.google.com
press GPS icon a few times and keep zooming and moving around
Program received signal SIGSEGV, Segmentation fault.
0xb5e56b56 in js::gc::Cell::isMarked (color=<optimized out>, this=<optimized out>) at ../../../js/src/gc/Heap.h:1018
1018 JS\_ASSERT(arenaHeader()->allocated());
(gdb) bt
#0 0xb5e56b56 in js::gc::Cell::isMarked (color=<optimized out>, this=<optimized out>) at ../../../js/src/gc/Heap.h:1018
#1 0xb5e5722e in js::gc::Cell::isMarked (this=0xb0684440, color=0) at ../../../js/src/gc/Heap.h:1021
#2 0xb5e5746a in js::gc::IsAboutToBeFinalized<js::UnownedBaseShape> (thingp=<optimized out>) at ../../../js/src/gc/Marking.cpp:388
#3 0xb5fe9cc6 in js::types::TypeCompartment::sweep (this=0xb0984834, fop=<optimized out>) at ../../../js/src/jsinfer.cpp:4166
#4 0xb5fea894 in js::types::TypeZone::sweep (this=0xb0983694, fop=0xbeb836b8, releaseTypes=<optimized out>, oom=0xbeb83677) at ../../../js/src/jsinfer.cpp:4425
#5 0xb5e6ccc2 in JS::Zone::sweep (this=0xb0983400, fop=0xbeb836b8, releaseTypes=false, oom=0xbeb83677) at ../../../js/src/gc/Zone.cpp:119
#6 0xb5fd891e in BeginSweepingZoneGroup (rt=0xb31e4000) at ../../../js/src/jsgc.cpp:3718
#7 0xb5fda0d4 in BeginSweepPhase (rt=0xb31e4000, lastGC=<optimized out>) at ../../../js/src/jsgc.cpp:3822
#8 0xb5fdb7ba in IncrementalCollectSlice (rt=0xb31e4000, budget=<optimized out>, reason=JS::gcreason::ALLOC\_TRIGGER, gckind=js::GC\_NORMAL) at ../../../js/src/jsgc.cpp:4428
#9 0xb5fdbc92 in GCCycle (rt=0xb31e4000, incremental=<optimized out>, budget=0, gckind=js::GC\_NORMAL, reason=JS::gcreason::ALLOC\_TRIGGER) at ../../../js/src/jsgc.cpp:4564
#10 0xb5fdbff0 in Collect (rt=0xb31e4000, incremental=<optimized out>, budget=30000, gckind=js::GC\_NORMAL, reason=JS::gcreason::ALLOC\_TRIGGER) at ../../../js/src/jsgc.cpp:4697
#11 0xb5fdc296 in js::gc::GCIfNeeded (cx=<optimized out>) at ../../../js/src/jsgc.cpp:4840
#12 0xb5fa2aca in js::InvokeInterruptCallback (cx=0xb3cbec60) at ../../../js/src/jscntxt.cpp:1020
#13 0xb3d62d2c in ?? ()
#14 0xb3d62d2c in ?? ()
Backtrace stopped: previous frame identical to this frame (corrupt stack?)
(gdb) f 3
#3 0xb5fe9cc6 in js::types::TypeCompartment::sweep (this=0xb0984834, fop=<optimized out>) at ../../../js/src/jsinfer.cpp:4166
4166 if (IsTypeObjectAboutToBeFinalized(&typeObject))
(gdb) p typeObject
$5 = (js::types::TypeObject \*) 0xb0684440
(gdb) p \*typeObject
$6 = {<js::gc::BarrieredCell<js::types::TypeObject>> = {<js::gc::Cell> = {<No data fields>}, <No data fields>}, clasp\_ = 0x4b4b4b4b,
proto\_ = {<js::BarrieredPtr<JSObject, unsigned int>> = {{value = 0x4b4b4b4b, other = 1263225675}}, <No data fields>},
singleton\_ = {<js::BarrieredPtr<JSObject, unsigned int>> = {{value = 0x4b4b4b4b, other = 1263225675}}, <No data fields>}, static LAZY\_SINGLETON = 1, flags\_ = 1263225675,
addendum = {<js::BarrieredPtr<js::types::TypeObjectAddendum, unsigned int>> = {{value = 0x4b4b4b4b, other = 1263225675}}, <No data fields>}, propertySet = 0x4b4b4b4b,
interpretedFunction = {<js::BarrieredPtr<JSFunction, unsigned int>> = {{value = 0x4b4b4b4b, other = 1263225675}}, <No data fields>}, padding = 1263225675}

|  | [Shu-yu Guo [:shu]](/user_profile?user_id=381259)  Assignee |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=1000598#c1)• 11 years ago |
|  | |

Attached patch

[Clear TypeCompartment tables.](attachment.cgi?id=8411468&action=diff)
— [Details](attachment.cgi?id=8411468&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1000598&attachment=8411468)

Gregor tested this in person and it seems to work.
[Attachment #8411468](/attachment.cgi?id=8411468&action=edit "Clear TypeCompartment tables.") -
Flags: review?(wmccloskey)

|  | [Shu-yu Guo [:shu]](/user_profile?user_id=381259)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1000598#a5244_381259)• 11 years ago |

Assignee: nobody → shuStatus: NEW → ASSIGNED

|  | [Bill McCloskey [inactive unless it's an emergency] (:billm)](/user_profile?user_id=389993) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1000598#a6246_389993)• 11 years ago |

[Attachment #8411468](/attachment.cgi?id=8411468&action=edit "Clear TypeCompartment tables.") -
Flags: review?(wmccloskey) → review+

|  | [Shu-yu Guo [:shu]](/user_profile?user_id=381259)  Assignee |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=1000598#c2)• 11 years ago |
|  | |

Comment on [attachment 8411468](/attachment.cgi?id=8411468 "Clear TypeCompartment tables.") [[details]](/attachment.cgi?id=8411468&action=edit "Clear TypeCompartment tables.") [[diff]](/attachment.cgi?id=8411468&action=diff "Clear TypeCompartment tables.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1000598&attachment=8411468)
Clear TypeCompartment tables.
> [Security approval request comment]
> How easily could an exploit be constructed based on the patch?
Pretty unlikely.
> Do comments in the patch, the check-in comment, or tests included in the patch paint a bulls-eye on the security problem?
Not really.
> Which older supported branches are affected by this flaw?
aurora, beta, release. I'll let Gregor handle the b2g ones.
> If not all supported branches, which bug introduced the flaw?
> Do you have backports for the affected branches? If not, how different, hard to create, and risky will they be?
Should apply cleanly.
> How likely is this patch to cause regressions; how much testing does it need?
Should be none. Testing on m-c after sec-approval should be enough.
[Attachment #8411468](/attachment.cgi?id=8411468&action=edit "Clear TypeCompartment tables.") -
Flags: sec-approval?

|  | [Shu-yu Guo [:shu]](/user_profile?user_id=381259)  Assignee |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=1000598#c3)• 11 years ago |
|  | |

I'm not sure what sec rating this should have. Can one of the GC guys weigh in?
[status-firefox28](/buglist.cgi?f1=cf_status_firefox28&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=affected)
[status-firefox29](/buglist.cgi?f1=cf_status_firefox29&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=affected)
[status-firefox30](/buglist.cgi?f1=cf_status_firefox30&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=affected)
[status-firefox31](/buglist.cgi?f1=cf_status_firefox31&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=affected)

|  | [Terrence Cole [:terrence]](/user_profile?user_id=231770) |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=1000598#c4)• 11 years ago |
|  | |

Use-after-free is sec-high or sec-crit, depending on how hard it is to take advantage of. High enough to bother backporting the fix in any case.

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1000598#a82777_406194)• 11 years ago |

Keywords: [csectype-uaf](/buglist.cgi?keywords=csectype-uaf&resolution=---),
[sec-high](/buglist.cgi?keywords=sec-high&resolution=---)

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1000598#a82790_406194)• 11 years ago |

OS: Mac OS X → AllHardware: x86 → All

|  | [Gregor Wagner [:gwagner]](/user_profile?user_id=314734)  Reporter |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=1000598#c5)• 11 years ago |
|  | |

Paul, can you help with the b2g versions that need to be fixed?Flags: needinfo?(ptheriault)

|  | [Bill McCloskey [inactive unless it's an emergency] (:billm)](/user_profile?user_id=389993) |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=1000598#c6)• 11 years ago |
|  | |

Just to be clear, I think [bug 897655](/show_bug.cgi?id=897655 "RESOLVED FIXED - Use off thread JS parsing when loading scripts from XUL documents") is where we regressed.

|  | [Shu-yu Guo [:shu]](/user_profile?user_id=381259)  Assignee |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=1000598#c7)• 11 years ago |
|  | |

(In reply to Bill McCloskey (:billm) from [comment #6](/show_bug.cgi?id=1000598#c6 "RESOLVED FIXED - Use after free JS_ASSERT(arenaHeader()->allocated());"))
> Just to be clear, I think [bug 897655](/show_bug.cgi?id=897655 "RESOLVED FIXED - Use off thread JS parsing when loading scripts from XUL documents") is where we regressed.
That's right: <https://hg.mozilla.org/releases/mozilla-release/rev/b5e301863e69#l18.12>

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=1000598#c8)• 11 years ago |
|  | |

Marking flags based on [comment 6](/show_bug.cgi?id=1000598#c6 "RESOLVED FIXED - Use after free JS_ASSERT(arenaHeader()->allocated());").
[status-b2g18](/buglist.cgi?f1=cf_status_b2g18&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=unaffected)
[status-b2g-v1.1hd](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=equals&v1=unaffected)
[status-b2g-v1.2](/buglist.cgi?f1=cf_status_b2g_1_2&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=affected)
[status-b2g-v1.3](/buglist.cgi?f1=cf_status_b2g_1_3&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=affected)
[status-b2g-v1.3T](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=affected)
[status-b2g-v1.4](/buglist.cgi?f1=cf_status_b2g_1_4&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=affected)
[status-b2g-v2.0](/buglist.cgi?f1=cf_status_b2g_2_0&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_2_0&o1=equals&v1=affected)
[status-firefox28](/buglist.cgi?f1=cf_status_firefox28&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=wontfix)

|  | [Paul Theriault [:pauljt] (no longer reading bugmail)](/user_profile?user_id=434339) |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=1000598#c9)• 11 years ago |
|  | |

So double-checked in tree, and yes, affects 1.2 onwards. <https://hg.mozilla.org/releases/mozilla-b2g26_v1_2/file/14df3b8bf122/js/src/jscompartment.cpp#l593>
I would recommend this as blocking-b2g: 1.3 since it is at least sec-high, maybe sec-critical, with small patch ready to be applied.blocking-b2g: --- → 1.3?Flags: needinfo?(ptheriault)

|  | [Gregor Wagner [:gwagner]](/user_profile?user_id=314734)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1000598#a105463_314734)• 11 years ago |

Summary: B2G: use after free JS\_ASSERT(arenaHeader()->allocated()); → Use after free JS\_ASSERT(arenaHeader()->allocated());

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=1000598#c10)• 11 years ago |
|  | |

This has sec-approval+ to go in on May 20 or later. We're shipping 29 in a few days and it missed the train for that.
[status-firefox29](/buglist.cgi?f1=cf_status_firefox29&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=wontfix)Whiteboard: [checkin on 5/20]

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1000598#a148633_280903)• 11 years ago |

[Attachment #8411468](/attachment.cgi?id=8411468&action=edit "Clear TypeCompartment tables.") -
Flags: sec-approval? → sec-approval+

|  | [Shu-yu Guo [:shu]](/user_profile?user_id=381259)  Assignee |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=1000598#c11)• 11 years ago |
|  | |

Comment on [attachment 8411468](/attachment.cgi?id=8411468 "Clear TypeCompartment tables.") [[details]](/attachment.cgi?id=8411468&action=edit "Clear TypeCompartment tables.") [[diff]](/attachment.cgi?id=8411468&action=diff "Clear TypeCompartment tables.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1000598&attachment=8411468)
Clear TypeCompartment tables.
NOTE: This flag is now for security issues only. Please see <https://wiki.mozilla.org/Release_Management/B2G_Landing> to better understand the B2G approval process and landings.
[Approval Request Comment]
Bug caused by (feature/regressing bug #): 897655
User impact if declined: Crashes?
Testing completed: in person
Risk to taking this patch (and alternatives if risky): none
String or UUID changes made by this patch: none
NOTE: This flag is now for security issues only. Please see <https://wiki.mozilla.org/Release_Management/B2G_Landing> to better understand the B2G approval process and landings.
[Attachment #8411468](/attachment.cgi?id=8411468&action=edit "Clear TypeCompartment tables.") -
Flags: approval-mozilla-release?
[Attachment #8411468](/attachment.cgi?id=8411468&action=edit "Clear TypeCompartment tables.") -
Flags: approval-mozilla-esr24?
[Attachment #8411468](/attachment.cgi?id=8411468&action=edit "Clear TypeCompartment tables.") -
Flags: approval-mozilla-beta?
[Attachment #8411468](/attachment.cgi?id=8411468&action=edit "Clear TypeCompartment tables.") -
Flags: approval-mozilla-b2g28?
[Attachment #8411468](/attachment.cgi?id=8411468&action=edit "Clear TypeCompartment tables.") -
Flags: approval-mozilla-b2g26?

|  | [Sylvestre Ledru [:Sylvestre]](/user_profile?user_id=495955) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=1000598#c12)• 11 years ago |
|  | |

Comment on [attachment 8411468](/attachment.cgi?id=8411468 "Clear TypeCompartment tables.") [[details]](/attachment.cgi?id=8411468&action=edit "Clear TypeCompartment tables.") [[diff]](/attachment.cgi?id=8411468&action=diff "Clear TypeCompartment tables.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1000598&attachment=8411468)
Clear TypeCompartment tables.
I don't see the uplift request for aurora. Is that expected? As Al said in [comment #10](/show_bug.cgi?id=1000598#c10 "RESOLVED FIXED - Use after free JS_ASSERT(arenaHeader()->allocated());"), it is too late for 29 (and for 28 obviously).
[Attachment #8411468](/attachment.cgi?id=8411468&action=edit "Clear TypeCompartment tables.") -
Flags: approval-mozilla-release?
[Attachment #8411468](/attachment.cgi?id=8411468&action=edit "Clear TypeCompartment tables.") -
Flags: approval-mozilla-release-
[Attachment #8411468](/attachment.cgi?id=8411468&action=edit "Clear TypeCompartment tables.") -
Flags: approval-mozilla-beta?
[Attachment #8411468](/attachment.cgi?id=8411468&action=edit "Clear TypeCompartment tables.") -
Flags: approval-mozilla-beta-

|  | [Shu-yu Guo [:shu]](/user_profile?user_id=381259)  Assignee |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=1000598#c13)• 11 years ago |
|  | |

(In reply to Sylvestre Ledru [:sylvestre] from [comment #12](/show_bug.cgi?id=1000598#c12 "RESOLVED FIXED - Use after free JS_ASSERT(arenaHeader()->allocated());"))
> Comment on [attachment 8411468](/attachment.cgi?id=8411468 "Clear TypeCompartment tables.") [[details]](/attachment.cgi?id=8411468&action=edit "Clear TypeCompartment tables.") [[diff]](/attachment.cgi?id=8411468&action=diff "Clear TypeCompartment tables.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1000598&attachment=8411468)
> Clear TypeCompartment tables.
>
> I don't see the uplift request for aurora. Is that expected? As Al said in
> [comment #10](/show_bug.cgi?id=1000598#c10 "RESOLVED FIXED - Use after free JS_ASSERT(arenaHeader()->allocated());"), it is too late for 29 (and for 28 obviously).
That's why I didn't request it -- I thought that implied that I should wait to request approval for aurora after 05/20.
Anyways I don't know what's going on here and I don't really have time to play the tracking flags game. Can someone just make sure it gets checked in and uplifted to all the right branches?

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=1000598#c14)• 11 years ago |
|  | |

(In reply to Shu-yu Guo [:shu] from [comment #13](/show_bug.cgi?id=1000598#c13 "RESOLVED FIXED - Use after free JS_ASSERT(arenaHeader()->allocated());"))
> That's why I didn't request it -- I thought that implied that I should wait
> to request approval for aurora after 05/20.
This is exactly what I figured you would do since you don't have approval to check into trunk until 5/20 and Aurora and Beta then will be different branches than now.

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1000598#a171634_280903)• 11 years ago |

[Attachment #8411468](/attachment.cgi?id=8411468&action=edit "Clear TypeCompartment tables.") -
Flags: approval-mozilla-release-
[Attachment #8411468](/attachment.cgi?id=8411468&action=edit "Clear TypeCompartment tables.") -
Flags: approval-mozilla-beta-

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=1000598#c15)• 11 years ago |
|  | |

Al or Ryan or somebody will go through and look for these delayed landings in a month, so you shouldn't have to think about it until then.

|  | [Shu-yu Guo [:shu]](/user_profile?user_id=381259)  Assignee |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=1000598#c16)• 11 years ago |
|  | |

(In reply to Andrew McCreight [:mccr8] from [comment #15](/show_bug.cgi?id=1000598#c15 "RESOLVED FIXED - Use after free JS_ASSERT(arenaHeader()->allocated());"))
> Al or Ryan or somebody will go through and look for these delayed landings
> in a month, so you shouldn't have to think about it until then.
Cool, thanks!

|  | [Preeti Raghunath(:Preeti)](/user_profile?user_id=474545) |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=1000598#c17)• 11 years ago |
|  | |

Taking it in 1.3 per [comment #9](/show_bug.cgi?id=1000598#c9 "RESOLVED FIXED - Use after free JS_ASSERT(arenaHeader()->allocated());").blocking-b2g: 1.3? → 1.3+

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1000598#a572464_75935)• 11 years ago |

[Attachment #8411468](/attachment.cgi?id=8411468&action=edit "Clear TypeCompartment tables.") -
Flags: approval-mozilla-b2g28?
[Attachment #8411468](/attachment.cgi?id=8411468&action=edit "Clear TypeCompartment tables.") -
Flags: approval-mozilla-b2g26?

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1000598#a664295_1689)• 11 years ago |

[status-firefox-esr24](/buglist.cgi?f1=cf_status_firefox_esr24&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=unaffected)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=1000598#c18)• 11 years ago |
|  | |

If this regressed from [bug 897655](/show_bug.cgi?id=897655 "RESOLVED FIXED - Use off thread JS parsing when loading scripts from XUL documents") it should not affect ESR-24. Is the regressing bug wrong or is the esr-24 approval request unnecessary?Blocks: [897655](/show_bug.cgi?id=897655 "RESOLVED FIXED - Use off thread JS parsing when loading scripts from XUL documents")Flags: needinfo?(shu)Keywords: [regression](/buglist.cgi?keywords=regression&resolution=---)

|  | [Shu-yu Guo [:shu]](/user_profile?user_id=381259)  Assignee |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=1000598#c19)• 11 years ago |
|  | |

(In reply to Daniel Veditz [:dveditz] from [comment #18](/show_bug.cgi?id=1000598#c18 "RESOLVED FIXED - Use after free JS_ASSERT(arenaHeader()->allocated());"))
> If this regressed from [bug 897655](/show_bug.cgi?id=897655 "RESOLVED FIXED - Use off thread JS parsing when loading scripts from XUL documents") it should not affect ESR-24. Is the
> regressing bug wrong or is the esr-24 approval request unnecessary?
The regression bug is right. The flag I set was unnecessary.Flags: needinfo?(shu)

|  | [Preeti Raghunath(:Preeti)](/user_profile?user_id=474545) |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=1000598#c20)• 11 years ago |
|  | |

Shu,
We need risk analysis of the patch in question here.
What are the areas of code it touches?Flags: needinfo?(shu)

|  | [Paul Theriault [:pauljt] (no longer reading bugmail)](/user_profile?user_id=434339) |  |
| --- | --- | --- |
| [Comment 21](/show_bug.cgi?id=1000598#c21)• 11 years ago |
|  | |

 To have any that this might make it onto a 1.3 device, we need to have this landed asap. There are two things in the way of this
- it would mean landing a security fix early in the desktop FF cycle, which we try to avoid
- the risk that this patch causes an issue on the 1.3 branch
For the first one, I've spoken with Al and Dveditz about the risk of landing this early in the cycle, and I think we decided that this was ok for an exception in this case, given the likely complexity involved with discovery and exploitation.
I can't speak for the second issue though, as I have no idea how likely it is that this bug will cause instability etc. It seems like a relatively straightforward, selfcontained patch, but could I get a comment from someone who knows this code as to whether there is much stability risk of landing this patch on 1.3?

|  | [Paul Theriault [:pauljt] (no longer reading bugmail)](/user_profile?user_id=434339) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1000598#a687810_434339)• 11 years ago |

Flags: needinfo?(wmccloskey)

|  | [Preeti Raghunath(:Preeti)](/user_profile?user_id=474545) |  |
| --- | --- | --- |
| [Comment 22](/show_bug.cgi?id=1000598#c22)• 11 years ago |
|  | |

Gregor,
Please assess for technical risks here. Any potential obvious regressions?
Reaching out to you per IRC with shu:
shu> hi, how's it going?
3:37 PM <Preeti> would you be able to help with risk analysis of the bug?
3:37 PM <shu> what is risk analysis
3:37 PM <shu> what kind of risk am i assessing?
3:37 PM <Preeti> code
3:37 PM <Preeti> modules touched
3:37 PM <shu> ah
3:37 PM <Preeti> areas of regression'
3:37 PM <shu> only js is touched
3:37 PM <Preeti> potential regression causes
3:38 PM <shu> outside of that i don't know much about it, i would ask gwagner
3:38 PM <Preeti> k thxFlags: needinfo?(anygregor)

|  | [Shu-yu Guo [:shu]](/user_profile?user_id=381259)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1000598#a694049_381259)• 11 years ago |

Flags: needinfo?(shu)

|  | [Gregor Wagner [:gwagner]](/user_profile?user_id=314734)  Reporter |  |
| --- | --- | --- |
| [Comment 23](/show_bug.cgi?id=1000598#c23)• 11 years ago |
|  | |

This patch has very low risk and it fixes a crash that is very easy to reproduce. We understand the problem and the fix. This is a straight forward bug fix. We should get this in.Flags: needinfo?(anygregor)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1000598#a761436_280903)• 11 years ago |

Whiteboard: [checkin on 5/20]

|  | [Sylvestre Ledru [:Sylvestre]](/user_profile?user_id=495955) |  |
| --- | --- | --- |
| [Comment 24](/show_bug.cgi?id=1000598#c24)• 11 years ago |
|  | |

Comment on [attachment 8411468](/attachment.cgi?id=8411468 "Clear TypeCompartment tables.") [[details]](/attachment.cgi?id=8411468&action=edit "Clear TypeCompartment tables.") [[diff]](/attachment.cgi?id=8411468&action=diff "Clear TypeCompartment tables.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1000598&attachment=8411468)
Clear TypeCompartment tables.
Not accepting the esr uplift request since ESR is unaffected.
[Attachment #8411468](/attachment.cgi?id=8411468&action=edit "Clear TypeCompartment tables.") -
Flags: approval-mozilla-esr24? → approval-mozilla-esr24-

|  | [Bill McCloskey [inactive unless it's an emergency] (:billm)](/user_profile?user_id=389993) |  |
| --- | --- | --- |
| [Comment 25](/show_bug.cgi?id=1000598#c25)• 11 years ago |
|  | |

I was needinfo'd, but I'll just say what Gregor said. This is very low risk and we should take it.Flags: needinfo?(wmccloskey)

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297) |  |
| --- | --- | --- |
| [Comment 26](/show_bug.cgi?id=1000598#c26)• 11 years ago |
|  | |

Al, you cleared the [checkin on 5/20] whiteboard thing. Just to be sure, does this mean we should land this now?Flags: needinfo?(abillings)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 27](/show_bug.cgi?id=1000598#c27)• 11 years ago |
|  | |

Yes, Jan. Paul and others said this needs to land ASAP for b2g timing.Flags: needinfo?(abillings)

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297) |  |
| --- | --- | --- |
| [Comment 28](/show_bug.cgi?id=1000598#c28)• 11 years ago |
|  | |

(In reply to Al Billings [:abillings] from [comment #27](/show_bug.cgi?id=1000598#c27 "RESOLVED FIXED - Use after free JS_ASSERT(arenaHeader()->allocated());"))
> Yes, Jan. Paul and others said this needs to land ASAP for b2g timing.
OK, thanks, let's get this in.Flags: needinfo?(shu)

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1000598#a1103000_406194)• 11 years ago |

Keywords: [checkin-needed](/buglist.cgi?keywords=checkin-needed&resolution=---)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 29](/show_bug.cgi?id=1000598#c29)• 11 years ago |
|  | |

<https://hg.mozilla.org/integration/mozilla-inbound/rev/64356b36da13>
Please request Aurora/Beta approval on this ASAP to expedite it being uplifted everywhere else it needs to go.Keywords: [checkin-needed](/buglist.cgi?keywords=checkin-needed&resolution=---)

|  | [Shu-yu Guo [:shu]](/user_profile?user_id=381259)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1000598#a1118721_381259)• 11 years ago |

[Attachment #8411468](/attachment.cgi?id=8411468&action=edit "Clear TypeCompartment tables.") -
Flags: approval-mozilla-aurora?

|  | [Shu-yu Guo [:shu]](/user_profile?user_id=381259)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1000598#a1118727_381259)• 11 years ago |

Flags: needinfo?(shu)

|  | [Sylvestre Ledru [:Sylvestre]](/user_profile?user_id=495955) |  |
| --- | --- | --- |
| [Comment 30](/show_bug.cgi?id=1000598#c30)• 11 years ago |
|  | |

Comment on [attachment 8411468](/attachment.cgi?id=8411468 "Clear TypeCompartment tables.") [[details]](/attachment.cgi?id=8411468&action=edit "Clear TypeCompartment tables.") [[diff]](/attachment.cgi?id=8411468&action=diff "Clear TypeCompartment tables.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1000598&attachment=8411468)
Clear TypeCompartment tables.
[Triage Comment]
As the tracking flags say (and RyanVM), we need it for both 30 & 31 (Beta & Aurora).
[Attachment #8411468](/attachment.cgi?id=8411468&action=edit "Clear TypeCompartment tables.") -
Flags: approval-mozilla-beta+
[Attachment #8411468](/attachment.cgi?id=8411468&action=edit "Clear TypeCompartment tables.") -
Flags: approval-mozilla-aurora?
[Attachment #8411468](/attachment.cgi?id=8411468&action=edit "Clear TypeCompartment tables.") -
Flags: approval-mozilla-aurora+

|  | [Carsten Book [:Tomcat]](/user_profile?user_id=277293) |  |
| --- | --- | --- |
| [Comment 31](/show_bug.cgi?id=1000598#c31)• 11 years ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/64356b36da13>Status: ASSIGNED → RESOLVEDClosed: 11 years ago
[status-firefox32](/buglist.cgi?f1=cf_status_firefox32&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_firefox32&o1=equals&v1=fixed)Flags: in-testsuite?Resolution: --- → FIXEDTarget Milestone: --- → mozilla32

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 32](/show_bug.cgi?id=1000598#c32)• 11 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-aurora/rev/cff3a438c3e1>
<https://hg.mozilla.org/releases/mozilla-beta/rev/56d4c53323c0>
[status-b2g-v2.0](/buglist.cgi?f1=cf_status_b2g_2_0&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_2_0&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_2_0&o1=equals&v1=fixed)
[status-firefox30](/buglist.cgi?f1=cf_status_firefox30&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=fixed)
[status-firefox31](/buglist.cgi?f1=cf_status_firefox31&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=fixed)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 33](/show_bug.cgi?id=1000598#c33)• 11 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-b2g30_v1_4/rev/56d4c53323c0>
<https://hg.mozilla.org/releases/mozilla-b2g28_v1_3/rev/55d2782a13c6>
<https://hg.mozilla.org/releases/mozilla-b2g26_v1_2/rev/d5b1e2f40b05>
[status-b2g-v1.2](/buglist.cgi?f1=cf_status_b2g_1_2&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=fixed)
[status-b2g-v1.3](/buglist.cgi?f1=cf_status_b2g_1_3&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=fixed)
[status-b2g-v1.3T](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=fixed)
[status-b2g-v1.4](/buglist.cgi?f1=cf_status_b2g_1_4&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=fixed)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1000598#a1974951_1689)• 11 years ago |

Group: javascript-core-security → core-security

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1000598#a3536533_280903)• 11 years ago |

Whiteboard: [adv-main30+]

|  | [Justin Wood (:Callek)](/user_profile?user_id=129968) |  |
| --- | --- | --- |
| [Comment 34](/show_bug.cgi?id=1000598#c34)• 11 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-release/rev/bd802fef45ae>
[status-seamonkey2.26](/buglist.cgi?f1=cf_status_seamonkey226&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_seamonkey226&o1=equals&v1=fixed)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1000598#a42665489_1689)• 9 years ago |

Group: core-security
You need to [log in](/show_bug.cgi?id=1000598&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Shu-yu Guo [:shu]](/user_profile?user_id=381259)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from secunia.com_2d9e6cb6_20250124_132113.html ===


[Skip to main content](#main-content)
[![Home](/themes/custom/flexera/images/logo.svg)](https://www.flexera.com/)

[![Home](/themes/custom/flexera/images/logo.svg)](https://www.flexera.com/)

Search

## Main navigation

* Solutions
  + Column 1
    - Business challenge
      * [Software renewals and audits](https://www.flexera.com/solutions/software-renewals-audits)
      * [Software license management and optimization](https://www.flexera.com/solutions/software-usage-costs)
      * [SaaS spend management](https://www.flexera.com/solutions/saas-spend)
      * [Cloud cost management](https://www.flexera.com/solutions/cloud-cost)
      * [IT asset lifecycle management](https://www.flexera.com/solutions/it-asset-lifecycle)
      * [CMDB data quality](https://www.flexera.com/solutions/cmdb-data-quality)
      * [Accurate IT inventory](https://www.flexera.com/solutions/it-inventory)
      * [Security and regulatory risk management](https://www.flexera.com/solutions/it-security-regulatory-risk)
      * [Sustainable IT](https://www.flexera.com/solutions/sustainable-it)
      * [AI-powered transformation](https://www.flexera.com/solutions/ai-powered-transformation)
      * [Public sector](https://www.flexera.com/solutions/public-sector)
  + Column 2
    - Spend management by vendor
      * [IBM](https://www.flexera.com/solutions/vendor/ibm)
      * [Oracle](https://www.flexera.com/solutions/vendor/oracle)
      * [Microsoft](https://www.flexera.com/solutions/vendor/microsoft)
      * [SAP](https://www.flexera.com/solutions/vendor/sap)
      * [VMware](https://www.flexera.com/solutions/vendor/vmware)
      * [ServiceNow](https://www.flexera.com/solutions/vendor/servicenow)
      * [AWS](https://www.flexera.com/solutions/vendor/aws)
      * [Salesforce](https://www.flexera.com/solutions/vendor/salesforce)
      * [BMC](https://www.flexera.com/solutions/cmdb-data-quality/bmc)
      * [Adobe](https://www.flexera.com/solutions/vendor/adobe)

  ### Achieve more through a united FinOps and ITAM function

  The future is hybrid. Break down the walls between ITAM and FinOps to drive more revenue, more customer growth and more innovation.

  [Discover More](https://www.flexera.com/resources/hybrid-itam-finops)
* Products
  + Column 1
    - [Flexera One](https://www.flexera.com/products/flexera-one)
      * [IT Visibility](https://www.flexera.com/products/flexera-one/it-visibility)
      * [ITAM](https://www.flexera.com/products/flexera-one/it-asset-management)
      * [SaaS Management](https://www.flexera.com/products/flexera-one/saas-management)
      * [FinOps](https://www.flexera.com/products/flexera-one/finops)
      * [Technology Intelligence Platform](https://www.flexera.com/products/flexera-one/technology-intelligence-platform)
  + Column 2
    - [Snow Atlas](https://www.flexera.com/products/snow-atlas)
      * [Snow Spend Optimizer](https://www.flexera.com/products/snow-atlas/snow-spend-optimizer)
      * [Snow SaaS Management](https://www.flexera.com/products/snow-atlas/snow-saas-management)
  + Column 3
    - Hide group
      * [Security](https://www.flexera.com/products/security)
      * [Application Readiness](https://www.flexera.com/products/adminstudio)
      * [All products](https://www.flexera.com/products)
      * [All Snow products](https://www.flexera.com/products/snow)
      * [Integrations](https://www.flexera.com/products/integrations)

  ### Flexera 2024 State of the Cloud Report

  What do transformative initiatives such as GenAI, machine learning and sustainability mean for the cloud? Check out the 2024 State of the Cloud Report to find the answer as well as all the latest cloud computing trends.

  [View Report](https://info.flexera.com/CM-REPORT-State-of-the-Cloud)
* Success
  + Column 1
    - [Customer success](https://www.flexera.com/customer-success)
      * Support
        + [Flexera support portal](https://community.flexera.com/s/support-hub)
        + [Flexera product documentation](https://docs.flexera.com)
        + [Snow product documentation](https://docs.snowsoftware.io/)
      * Services and training
        + [Services](https://www.flexera.com/customer-success/services)
        + [Training](https://www.flexera.com/customer-success/training)
  + Column 2
    - Hide group
      * [Technology Intelligence Awards](https://www.flexera.com/customer-success/awards)
      * [Flexera community](https://community.flexera.com/s/)

  ### Insights from Gartner®

  Find a curated series of actionable and objective insights for IT executives and their teams. Get expert insights from valued analysts, courtesy of Flexera.

  [Discover More](https://www.flexera.com/resources/gartner-analyst-research)
* Resources
  + Column 1
    - [Resources](https://www.flexera.com/resources)
      * [Webinars](https://www.flexera.com/resources?type%5Bwebinar%5D=webinar)
      * [Videos](https://www.flexera.com/resources?type%5Bvideo%5D=video)
      * [Datasheets](https://www.flexera.com/resources?type%5Bdatasheet%5D=datasheet)
      * [White papers & reports](https://www.flexera.com/resources?type%5Bwhite-paper-industry-report%5D=white-paper-industry-report)
  + Column 2
    - Hide group
      * [Blog](/blog/)
      * [Case studies](https://www.flexera.com/resources/case-studies)
      * [Events](https://www.flexera.com/resources?type%5Bevent%5D=event)
      * [Analyst Research](https://www.flexera.com/resources/gartner-analyst-research)
      * [Glossary](https://www.flexera.com/resources/glossary)
      * [Demos & trials](https://www.flexera.com/resources?type%5Bdemo-trials%5D=demo-trials)
      * [Business value calculator](https://www.flexera.com/resources/business-value-calculator)

  ### Flexera 2025 IT Priorities Report

  Insights from Flexera’s 2025 IT Priorities Report highlight what’s top of mind for IT decision makers in the year ahead. Discover the challenges, priorities and opportunities that will shape the future IT landscape.

  [View Report](https://info.flexera.com/ITV-REPORT-IT-Priorities)
* About
  + Column 1
    - [Company](https://www.flexera.com/about-us)
      * [About](https://www.flexera.com/about-us)
      * [Careers](https://www.flexera.com/about-us/careers)
      * [Contact](https://www.flexera.com/about-us/contact-us)
      * [Leadership](https://www.flexera.com/about-us/leadership)
    - [Partners](https://www.flexera.com/about-us/partners)
      * [Partner program](https://www.flexera.com/about-us/partners/partner-program)
      * [Partner directory](https://www.flexera.com/about-us/partners/directory)
  + Column 2
    - [Press center](https://www.flexera.com/about-us/press-center)
      * [Press releases](https://www.flexera.com/about-us/all-press-releases)
      * [Awards](https://www.flexera.com/about-us/press-center#awards)
      * [Articles](https://www.flexera.com/about-us/all-articles)
    - Hide group
      * Social responsibility
        + [ESG](https://www.flexera.com/about-us/environmental-social-governance)
        + [Diversity](https://www.flexera.com/about-us/diversity)

  ### More value with technology intelligence

  The unparalleled synergy of Flexera and Snow provides the Technology Intelligence you need for more efficiency, insight and governance than ever before.

  [Discover More](https://www.flexera.com/more-value-with-technology-intelligence)

Search

en

* [English](https://www.flexera.com/products/security/software-vulnerability-research/secunia-research?referrer=secunia)
* [Deutsch](https://www.flexera.de/products/security/software-vulnerability-research/secunia-research?referrer=secunia)

## External Links

* External Links
  + [Community](https://community.flexera.com/)
  + [Product Access](https://app.flexera.com/login)
  + [Partner Portal](https://flexera.channeltivity.com/Login)

[Book a demo](/about-us/contact-us?C_Interest1=sales)

# Secunia Research

## The world’s best vulnerability intelligence

The Secunia Research team from Flexera provides the most accurate and reliable source of vulnerability intelligence.

[Contact Us](https://www.flexera.com/about-us/contact-us?C_Interest1=sales&C_SolutionInterest=SVM)
Watch video (0:29)

Related links

* [Anatomy of a security advisory](https://www.flexera.com/resources/infographics/anatomy-of-a-security-advisory)
* [Software Vulnerability Research](https://www.flexera.com/products/software-vulnerability-research)
* [Software Vulnerability Manager](/products/software-vulnerability-manager)
* [Security advisories from Secunia Research](https://www.flexera.com/products/security/software-vulnerability-advisories)
* [Report a vulnerability](https://www.flexera.com/about-us/contact-us/report-vulnerability)

 ![Secunia Research](/sites/default/files/2022-04/hero-secunia-research-bg.jpg)

Featured Details

## Multiple ways to consume Secunia Research

Secunia delivers software security research that provides reliable, curated and actionable vulnerability intelligence. Organizations can expect to receive standardized, validated and enriched vulnerability research on a specific version of a software product. Secunia Research supports four solutions:

![Software Vulnerability Research](/sites/default/files/2022-04/icon-secunia-research-svr.svg)

### [Software Vulnerability Research](https://www.flexera.com/products/software-vulnerability-research)

Software Vulnerability Research utilizes Secunia Research to drive awareness of vulnerabilities matching your specified criteria

[Learn More](https://www.flexera.com/products/software-vulnerability-research)

![Software Vulnerability Manager](/sites/default/files/2022-04/icon-secunia-research-svm.svg)

### [Software Vulnerability Manager](/products/software-vulnerability-manager)

Software Vulnerability Manager uses Secunia Research data to identify, prioritize and patch known vulnerable software detected in your environment

[Learn More](/products/software-vulnerability-manager)

![Data Platform](/sites/default/files/2022-04/icon-secunia-research-dp.svg)

### [Data Platform](https://www.flexera.com/products/data-platform)

Data Platform leverages Secunia Research to provide high-level insights based on major or minor versions of software in your normalized inventory

[Learn More](https://www.flexera.com/products/data-platform)

![Flexera One](/sites/default/files/2022-04/icon-secunia-research-flexera-one.svg)

### [Flexera One](/flexera-one)

Flexera One utilizes Secunia Research (alongside public NVD data) to provide more granular matching of build-level versions of software in your normalized inventory within its IT Asset Management and IT Visibility solutions

[Learn More](/flexera-one)

How it works

## Accurate, reliable vulnerability insights at your fingertips

The Secunia Research team from Flexera is comprised of several security specialists who conduct vulnerability research in various products in addition to testing, verifying and validating public vulnerability reports. Since its inception in 2002, the goal of the Secunia Research team is to provide the most accurate and reliable source of vulnerability intelligence.

Delivering the world’s best vulnerability intelligence requires skill and passion. Team members continually develop their skills exploring various high-profile closed and open-source software using a variety of approaches, focusing chiefly on thorough code audits and binary analysis. The team has received industry recognition, including naming members to [Microsoft’s Most Valuable Security Researchers](https://msrc-blog.microsoft.com/2019/08/07/announcing-2019-msrc-most-valuable-security-researchers/) list.

Secunia researchers discover hard-to-find vulnerabilities that aren’t normally identified with techniques such as fuzzing, and the results have been impressive. Members of the Secunia Research team have discovered critical vulnerabilities in products from vendors including Microsoft, Symantec, IBM, Adobe, RealNetworks, Trend Micro, HP, Blue Coat, Samba, CA, Mozilla and Apple.

The team produces invaluable security advisories based on research of the vulnerabilities affecting any given software update. Sometimes a single update can address multiple vulnerabilities of varying criticalities and threats; but these advisories aggregate and distill findings down to a single advisory perfect for the prioritization of patching efforts within [Software Vulnerability Manager](/products/software-vulnerability-manager). Criticality scores are consistently applied along with details around attack vector and other valuable details within [Software Vulnerability Research](/products/software-vulnerability-research/secunia-research). Illegitimate vulnerability reports are also investigated and rejected so you can focus only on what truly matters.

Informing IT, Transforming IT

## Industry insights to help keep you informed

[#### Webinar

### Stay Ahead of Cyber Threats: Flexera's Latest Vulnerability Insights

Join us for this session where we'll explore the latest findings from the Flexera Monthly Vulnerability Insights Report.](https://info.flexera.com/SVM-WBNR-Vulnerability-Insights-Roundtable)

[#### Webinar

### Dive deeper into the Flexera Annual Vulnerability Insights

We'll explore the key findings from the Flexera Annual Vulnerability Insights Report. Learn about the latest cybersecurity trends, the most targeted industries, the types of vulnerabilities, plus management and mitigation strategies.](https://info.flexera.com/SVM-WBNR-Flexera-Annual-Vulnerability-Insights?lead_source=Website%20Visitor&id=Flexera.com-Resources)

#### Video

### Close the Risk Window with Software Vulnerability Manager

Stop reacting. Gain control. Stay secure. Build a more effective risk mitigation process leveraging Secunia Research vulnerability intelligence and the largest repository of third-party patch data in the industry.

Remote video URL

[#### Trial

### Software Vulnerability Manager Assessment free trial

Get access to the complete set of modules of Software Vulnerability Manager: Research, Assessment and Patching](https://info.flexera.com/SVM-EVAL-Software-Vulnerability-Manager)

[#### Datasheet

### Protect your ServiceNow® investment with the highest quality data

IT Visibility offers certified ServiceNow integrations that accelerate platform expansion, improve ROI and increase efficiencies across ITIL processes by delivering clean software and hardware asset data directly.](/sites/default/files/datasheet-itv-maximize-servicenow-investment.pdf)

[#### Blog

### Avoid missing crucial vulnerability intelligence amid NVD backlog

Recent developments regarding the National Vulnerability Database (NVD) have some technology leaders on edge. Since February, the U.S. National Institute of Standards and Technology (NIST) has almost completely stopped enriching software vulnerabi...](https://www.flexera.com/blog/vulnerability-management/avoid-missing-crucial-vulnerability-intelligence-amid-nvd-backlog/)

[View all resources](https://www.flexera.com/resources?category%5Bsoftware-vulnerability-management%5D=software-vulnerability-management)

## Footer Menu

* Column
  + Business challenge
    - [Software renewals and audits](https://www.flexera.com/solutions/software-renewals-audits)
    - [Software license management and optimization](https://www.flexera.com/solutions/software-usage-costs)
    - [SaaS spend management](https://www.flexera.com/solutions/saas-spend)
    - [Cloud cost management](https://www.flexera.com/solutions/cloud-cost)
    - [IT asset lifecycle management](https://www.flexera.com/solutions/it-asset-lifecycle)
    - [CMDB data quality](https://www.flexera.com/solutions/cmdb-data-quality)
    - [Accurate IT inventory](https://www.flexera.com/solutions/it-inventory)
    - [Security and regulatory risk management](https://www.flexera.com/solutions/it-security-regulatory-risk)
    - [Sustainable IT](https://www.flexera.com/solutions/sustainable-it)
    - [AI-powered transformation](https://www.flexera.com/solutions/ai-powered-transformation)
    - [Public sector](https://www.flexera.com/solutions/public-sector)
* Column
  + Spend management by vendor
    - [IBM](https://www.flexera.com/solutions/vendor/ibm)
    - [Oracle](https://www.flexera.com/solutions/vendor/oracle)
    - [Microsoft](https://www.flexera.com/solutions/vendor/microsoft)
    - [SAP](https://www.flexera.com/solutions/vendor/sap)
    - [VMware](https://www.flexera.com/solutions/vendor/vmware)
    - [ServiceNow](https://www.flexera.com/solutions/vendor/servicenow)
    - [AWS](https://www.flexera.com/solutions/vendor/aws)
    - [Salesforce](https://www.flexera.com/solutions/vendor/salesforce)
    - [BMC](https://www.flexera.com/solutions/cmdb-data-quality/bmc)
    - [Adobe](https://www.flexera.com/solutions/vendor/adobe)
* Column
  + Products
    - [Flexera One](https://www.flexera.com/products/flexera-one)
    - [Snow Atlas](https://www.flexera.com/products/snow-atlas)
    - [Security](https://www.flexera.com/products/security)
    - [Application Readiness](https://www.flexera.com/products/adminstudio)
    - [All products](https://www.flexera.com/products)
    - [All Snow products](https://www.flexera.com/products/snow)
    - [Integrations](https://www.flexera.com/products/integrations)
* Column
  + Company
    - [About](https://www.flexera.com/about-us)
    - [Careers](https://www.flexera.com/about-us/careers)
    - [Leadership](https://www.flexera.com/about-us/leadership)
    - [Contact us](https://www.flexera.com/about-us/contact-us)
    - [Media / press center](https://www.flexera.com/about-us/press-center)
    - [Revenera.com](https://www.revenera.com)

 +1.800.374.4353

en

* [English](https://www.flexera.com/products/security/software-vulnerability-research/secunia-research?referrer=secunia)
* [Deutsch](https://www.flexera.de/products/security/software-vulnerability-research/secunia-research?referrer=secunia)

 [![Home](/themes/custom/flexera/images/logo.svg)](https://www.flexera.com/)

© 2025 Flexera. All Rights Reserved.

## Footer

* [Privacy Policy](https://www.flexera.com/legal/privacy-policy)
* [Terms and conditions](https://www.flexera.com/legal)
* [Contact Us](https://www.flexera.com/about-us/contact-us)
* [Impressum](https://www.flexera.com/about-us/impressum)
* [Site Map](https://www.flexera.com/sitemap)

#####

×

...



=== Content from security.gentoo.org_d439654f_20250124_132135.html ===

[![Gentoo](https://assets.gentoo.org/tyrian/v2/site-logo.png)](/ "Back to the homepage")
Security

[**Get Gentoo!**](https://get.gentoo.org/)
gentoo.org sites
[gentoo.org](https://www.gentoo.org/ "Main Gentoo website")
[Wiki](https://wiki.gentoo.org/ "Find and contribute documentation")
[Bugs](https://bugs.gentoo.org/ "Report issues and find common issues")
[Forums](https://forums.gentoo.org/ "Discuss with the community")
[Packages](https://packages.gentoo.org/ "Find software for your Gentoo")

[Planet](https://planet.gentoo.org/ "Find out what's going on in the developer community")
[Archives](https://archives.gentoo.org/ "Read up on past discussions")
[Sources](https://sources.gentoo.org/ "Browse our source code")

[Infra Status](https://infra-status.gentoo.org/ "Get updates on the services provided by Gentoo")

* [Home](/)
* [Stay informed](/subscribe)
* [Advisories](/glsa)

# Mozilla Products: Multiple vulnerabilities — GLSA **201504-01**

Multiple vulnerabilities have been found in Mozilla Firefox,
Thunderbird, and SeaMonkey, the worst of which may allow user-assisted
execution of arbitrary code.

### Affected packages

| Package | **www-client/firefox** on all architectures |
| --- | --- |
| Affected versions | < **31.5.3** |
| Unaffected versions | >= **31.5.3** |

| Package | **www-client/firefox-bin** on all architectures |
| --- | --- |
| Affected versions | < **31.5.3** |
| Unaffected versions | >= **31.5.3** |

| Package | **mail-client/thunderbird** on all architectures |
| --- | --- |
| Affected versions | < **31.5.0** |
| Unaffected versions | >= **31.5.0** |

| Package | **mail-client/thunderbird-bin** on all architectures |
| --- | --- |
| Affected versions | < **31.5.0** |
| Unaffected versions | >= **31.5.0** |

| Package | **www-client/seamonkey** on all architectures |
| --- | --- |
| Affected versions | < **2.33.1** |
| Unaffected versions | >= **2.33.1** |

| Package | **www-client/seamonkey-bin** on all architectures |
| --- | --- |
| Affected versions | < **2.33.1** |
| Unaffected versions | >= **2.33.1** |

| Package | **dev-libs/nspr** on all architectures |
| --- | --- |
| Affected versions | < **4.10.6** |
| Unaffected versions | >= **4.10.6** |

### Background

Mozilla Firefox is an open-source web browser and Mozilla Thunderbird an
open-source email client, both from the Mozilla Project. The SeaMonkey
project is a community effort to deliver production-quality releases of
code derived from the application formerly known as the ‘Mozilla
Application Suite’.

### Description

Multiple vulnerabilities have been discovered in Firefox, Thunderbird,
and SeaMonkey. Please review the CVE identifiers referenced below for
details.

### Impact

A remote attacker could entice a user to view a specially crafted web
page or email, possibly resulting in execution of arbitrary code or a
Denial of Service condition. Furthermore, a remote attacker may be able
to perform Man-in-the-Middle attacks, obtain sensitive information, spoof
the address bar, conduct clickjacking attacks, bypass security
restrictions and protection mechanisms, or have other unspecified
impact.

### Workaround

There are no known workarounds at this time.

### Resolution

All firefox users should upgrade to the latest version:

```
 # emerge --sync
 # emerge --ask --oneshot --verbose ">=www-client/firefox-31.5.3"

```

All firefox-bin users should upgrade to the latest version:

```
 # emerge --sync
 # emerge --ask --oneshot --verbose ">=www-client/firefox-bin-31.5.3"

```

All thunderbird users should upgrade to the latest version:

```
 # emerge --sync
 # emerge --ask --oneshot --verbose ">=mail-client/thunderbird-31.5.0"

```

All thunderbird-bin users should upgrade to the latest version:

```
 # emerge --sync
 # emerge --ask --oneshot --verbose
 ">=mail-client/thunderbird-bin-31.5.0"

```

All seamonkey users should upgrade to the latest version:

```
 # emerge --sync
 # emerge --ask --oneshot --verbose ">=www-client/seamonkey-2.33.1"

```

All seamonkey-bin users should upgrade to the latest version:

```
 # emerge --sync
 # emerge --ask --oneshot --verbose ">=www-client/seamonkey-bin-2.33.1"

```

All nspr users should upgrade to the latest version:

```
 # emerge --sync
 # emerge --ask --oneshot --verbose ">=dev-libs/nspr-4.10.6"

```
### References

* [CVE-2013-1741](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-1741)
* [CVE-2013-2566](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-2566)
* [CVE-2013-5590](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5590)
* [CVE-2013-5591](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5591)
* [CVE-2013-5592](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5592)
* [CVE-2013-5593](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5593)
* [CVE-2013-5595](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5595)
* [CVE-2013-5596](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5596)
* [CVE-2013-5597](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5597)
* [CVE-2013-5598](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5598)
* [CVE-2013-5599](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5599)
* [CVE-2013-5600](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5600)
* [CVE-2013-5601](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5601)
* [CVE-2013-5602](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5602)
* [CVE-2013-5603](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5603)
* [CVE-2013-5604](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5604)
* [CVE-2013-5605](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5605)
* [CVE-2013-5606](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5606)
* [CVE-2013-5607](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5607)
* [CVE-2013-5609](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5609)
* [CVE-2013-5610](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5610)
* [CVE-2013-5612](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5612)
* [CVE-2013-5613](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5613)
* [CVE-2013-5614](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5614)
* [CVE-2013-5615](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5615)
* [CVE-2013-5616](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5616)
* [CVE-2013-5618](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5618)
* [CVE-2013-5619](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5619)
* [CVE-2013-6671](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-6671)
* [CVE-2013-6672](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-6672)
* [CVE-2013-6673](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-6673)
* [CVE-2014-1477](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1477)
* [CVE-2014-1478](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1478)
* [CVE-2014-1479](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1479)
* [CVE-2014-1480](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1480)
* [CVE-2014-1481](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1481)
* [CVE-2014-1482](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1482)
* [CVE-2014-1483](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1483)
* [CVE-2014-1485](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1485)
* [CVE-2014-1486](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1486)
* [CVE-2014-1487](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1487)
* [CVE-2014-1488](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1488)
* [CVE-2014-1489](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1489)
* [CVE-2014-1490](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1490)
* [CVE-2014-1491](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1491)
* [CVE-2014-1492](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1492)
* [CVE-2014-1493](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1493)
* [CVE-2014-1494](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1494)
* [CVE-2014-1496](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1496)
* [CVE-2014-1497](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1497)
* [CVE-2014-1498](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1498)
* [CVE-2014-1499](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1499)
* [CVE-2014-1500](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1500)
* [CVE-2014-1502](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1502)
* [CVE-2014-1504](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1504)
* [CVE-2014-1505](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1505)
* [CVE-2014-1508](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1508)
* [CVE-2014-1509](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1509)
* [CVE-2014-1510](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1510)
* [CVE-2014-1511](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1511)
* [CVE-2014-1512](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1512)
* [CVE-2014-1513](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1513)
* [CVE-2014-1514](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1514)
* [CVE-2014-1518](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1518)
* [CVE-2014-1519](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1519)
* [CVE-2014-1520](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1520)
* [CVE-2014-1522](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1522)
* [CVE-2014-1523](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1523)
* [CVE-2014-1524](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1524)
* [CVE-2014-1525](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1525)
* [CVE-2014-1526](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1526)
* [CVE-2014-1529](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1529)
* [CVE-2014-1530](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1530)
* [CVE-2014-1531](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1531)
* [CVE-2014-1532](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1532)
* [CVE-2014-1533](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1533)
* [CVE-2014-1534](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1534)
* [CVE-2014-1536](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1536)
* [CVE-2014-1537](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1537)
* [CVE-2014-1538](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1538)
* [CVE-2014-1539](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1539)
* [CVE-2014-1540](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1540)
* [CVE-2014-1541](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1541)
* [CVE-2014-1542](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1542)
* [CVE-2014-1543](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1543)
* [CVE-2014-1544](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1544)
* [CVE-2014-1545](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1545)
* [CVE-2014-1547](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1547)
* [CVE-2014-1548](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1548)
* [CVE-2014-1549](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1549)
* [CVE-2014-1550](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1550)
* [CVE-2014-1551](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1551)
* [CVE-2014-1552](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1552)
* [CVE-2014-1553](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1553)
* [CVE-2014-1554](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1554)
* [CVE-2014-1555](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1555)
* [CVE-2014-1556](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1556)
* [CVE-2014-1557](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1557)
* [CVE-2014-1558](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1558)
* [CVE-2014-1559](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1559)
* [CVE-2014-1560](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1560)
* [CVE-2014-1561](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1561)
* [CVE-2014-1562](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1562)
* [CVE-2014-1563](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1563)
* [CVE-2014-1564](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1564)
* [CVE-2014-1565](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1565)
* [CVE-2014-1566](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1566)
* [CVE-2014-1567](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1567)
* [CVE-2014-1568](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1568)
* [CVE-2014-1574](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1574)
* [CVE-2014-1575](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1575)
* [CVE-2014-1576](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1576)
* [CVE-2014-1577](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1577)
* [CVE-2014-1578](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1578)
* [CVE-2014-1580](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1580)
* [CVE-2014-1581](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1581)
* [CVE-2014-1582](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1582)
* [CVE-2014-1583](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1583)
* [CVE-2014-1584](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1584)
* [CVE-2014-1585](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1585)
* [CVE-2014-1586](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1586)
* [CVE-2014-1587](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1587)
* [CVE-2014-1588](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1588)
* [CVE-2014-1589](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1589)
* [CVE-2014-1590](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1590)
* [CVE-2014-1591](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1591)
* [CVE-2014-1592](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1592)
* [CVE-2014-1593](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1593)
* [CVE-2014-1594](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1594)
* [CVE-2014-5369](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-5369)
* [CVE-2014-8631](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-8631)
* [CVE-2014-8632](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-8632)
* [CVE-2014-8634](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-8634)
* [CVE-2014-8635](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-8635)
* [CVE-2014-8636](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-8636)
* [CVE-2014-8637](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-8637)
* [CVE-2014-8638](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-8638)
* [CVE-2014-8639](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-8639)
* [CVE-2014-8640](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-8640)
* [CVE-2014-8641](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-8641)
* [CVE-2014-8642](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-8642)
* [CVE-2015-0817](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0817)
* [CVE-2015-0818](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0818)
* [CVE-2015-0819](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0819)
* [CVE-2015-0820](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0820)
* [CVE-2015-0821](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0821)
* [CVE-2015-0822](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0822)
* [CVE-2015-0823](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0823)
* [CVE-2015-0824](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0824)
* [CVE-2015-0825](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0825)
* [CVE-2015-0826](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0826)
* [CVE-2015-0827](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0827)
* [CVE-2015-0828](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0828)
* [CVE-2015-0829](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0829)
* [CVE-2015-0830](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0830)
* [CVE-2015-0831](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0831)
* [CVE-2015-0832](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0832)
* [CVE-2015-0833](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0833)
* [CVE-2015-0834](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0834)
* [CVE-2015-0835](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0835)
* [CVE-2015-0836](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0836)

**Release date**

April 07, 2015

**Latest revision**

April 08, 2015: 2

**Severity**

normal

**Exploitable**

remote

**Bugzilla entries**

* [489796](https://bugs.gentoo.org/show_bug.cgi?id=489796)
* [491234](https://bugs.gentoo.org/show_bug.cgi?id=491234)
* [493850](https://bugs.gentoo.org/show_bug.cgi?id=493850)
* [500320](https://bugs.gentoo.org/show_bug.cgi?id=500320)
* [505072](https://bugs.gentoo.org/show_bug.cgi?id=505072)
* [509050](https://bugs.gentoo.org/show_bug.cgi?id=509050)
* [512896](https://bugs.gentoo.org/show_bug.cgi?id=512896)
* [517876](https://bugs.gentoo.org/show_bug.cgi?id=517876)
* [522020](https://bugs.gentoo.org/show_bug.cgi?id=522020)
* [523652](https://bugs.gentoo.org/show_bug.cgi?id=523652)
* [525474](https://bugs.gentoo.org/show_bug.cgi?id=525474)
* [531408](https://bugs.gentoo.org/show_bug.cgi?id=531408)
* [536564](https://bugs.gentoo.org/show_bug.cgi?id=536564)
* [541316](https://bugs.gentoo.org/show_bug.cgi?id=541316)
* [544056](https://bugs.gentoo.org/show_bug.cgi?id=544056)

### Questions or comments?

Please feel free to contact us.

**© 2001–2020 Gentoo Foundation, Inc.**



=== Content from bugzilla.mozilla.org_13af858d_20250124_132134.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/995817)
* [XML](/show_bug.cgi?ctype=xml&id=995817)

Closed
[Bug 995817](/show_bug.cgi?id=995817)

Opened 11 years ago
Closed 11 years ago

# Differential Testing: Incorrect result when division-by-zero is used in an indirectly-truncated context

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

Differential Testing: Incorrect result when division-by-zero is used in an indirectly-truncated context

## Categories

### (Core :: JavaScript Engine: JIT, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=JavaScript%20Engine%3A%20JIT#JavaScript%20Engine%3A%20JIT)

JavaScript Engine: JIT
▾

Core :: JavaScript Engine: JIT
JavaScript engine's JIT compilers
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine%3A%20JIT&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine%3A%20JIT&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=JavaScript%20Engine%3A%20JIT)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

x86\_64

macOS

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

major

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla31

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Accessibility Severity | --- |
| --- | --- |
| Webcompat Priority | --- |
| Webcompat Score | --- |
| a11y-review | --- |
| Performance Impact | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox29 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=wontfix) |
| firefox30 | --- | [verified](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=verified) |
| firefox31 | --- | [verified](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=verified) |
| firefox-esr24 | --- | [unaffected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=unaffected) |
| b2g-v1.3 | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=unaffected) |
| b2g-v1.4 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=fixed) |
| b2g-v2.0 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_2_0&o1=equals&v1=fixed) |
| seamonkey2.26 | --- | [wontfix](/buglist.cgi?f1=cf_status_seamonkey226&o1=equals&v1=wontfix) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox29 |  | wontfix |
| firefox30 |  | verified |
| firefox31 |  | verified |
| firefox-esr24 |  | unaffected |
| b2g-v1.3 |  | unaffected |
| b2g-v1.4 |  | fixed |
| b2g-v2.0 |  | fixed |
| relnote-firefox |  | --- |
| seamonkey2.26 |  | wontfix |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: gkw, Assigned: nbp)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/f78625fe5901300b4689355a8e507ea2?d=mm&size=40)  [nbp](/user_profile?user_id=422187)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](extensions/Gravatar/web/default.jpg)  [gkw](/user_profile?user_id=132034)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/4fe52ee1503aecf7b6c976b8eb7c1753?d=mm&size=40)  [willyelm](/user_profile?user_id=714609)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

13 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[995816](/show_bug.cgi?id=995816 "VERIFIED FIXED - Differential Testing: Different output message involving gc")

Dependency [tree](/showdependencytree.cgi?id=995817&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=995817)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[Duplicates:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#duplicates)

[997546](/show_bug.cgi?id=997546 "RESOLVED DUPLICATE - Differential Testing: Different output message involving division")

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Keywords: regression, sec-critical, testcase, Whiteboard: [adv-main30+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[regression](/buglist.cgi?keywords=regression&resolution=---),
[sec-critical](/buglist.cgi?keywords=sec-critical&resolution=---),
[testcase](/buglist.cgi?keywords=testcase&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[adv-main30+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [RyanVM](/user_profile?user_id=75935) | [in-testsuite](#c15 "11 years ago") | + |
| --- | --- | --- |
| [RyanVM](/user_profile?user_id=75935) | in-testsuite | + |
| --- | --- | --- |
|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (1 file, 3 obsolete files)

| [Do not eagerly specialize MDiv to Int32.](/attachment.cgi?id=8406179)  [11 years ago](#c2)  [Nicolas B. Pierron [:nbp]](/user_profile?user_id=422187)   1.61 KB, patch | sunfish : [review-](#c4 "11 years ago") | [Details](/attachment.cgi?id=8406179&action=edit) | [Diff](/attachment.cgi?id=8406179&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=995817&attachment=8406179) |
| --- | --- | --- |
| [MDiv only truncates operation which are valid in the 2^32 range.](/attachment.cgi?id=8406809)  [11 years ago](#c5)  [Nicolas B. Pierron [:nbp]](/user_profile?user_id=422187)   9.34 KB, patch | sunfish : [review-](#c9 "11 years ago")  mjrosenb : [feedback+](#c7 "11 years ago") | [Details](/attachment.cgi?id=8406809&action=edit) | [Diff](/attachment.cgi?id=8406809&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=995817&attachment=8406809) |
| [MDiv only truncates operation which are valid in the 2^32 range.](/attachment.cgi?id=8407067)  [11 years ago](#c10)  [Nicolas B. Pierron [:nbp]](/user_profile?user_id=422187)   12.23 KB, patch |  | [Details](/attachment.cgi?id=8407067&action=edit) | [Diff](/attachment.cgi?id=8407067&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=995817&attachment=8407067) |
| [MDiv only truncates operation which are valid in the 2^32 range.](/attachment.cgi?id=8407070)  [11 years ago](#c11)  [Nicolas B. Pierron [:nbp]](/user_profile?user_id=422187)   12.39 KB, patch | sunfish : [review+](#c12 "11 years ago")  lsblakk : [approval-mozilla-aurora+](#a1022445_272375 "11 years ago") | [Details](/attachment.cgi?id=8407070&action=edit) | [Diff](/attachment.cgi?id=8407070&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=995817&attachment=8407070) |

Show Obsolete

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=995817#c0)• 11 years ago |
|  | |

setJitCompilerOption('baseline.usecount.trigger', 1)
let r;
(function() {
function f() {
return (1 + -1 / 0) << null
}
print(f())
print(f())
})()
$ ./js-opt-64-dm-ts-darwin-ebdf2740dc3e --fuzzing-safe --ion-parallel-compile=off 5098.js
0
0
$ ./js-opt-64-dm-ts-darwin-ebdf2740dc3e --fuzzing-safe --ion-parallel-compile=off --ion-eager 5098.js
0
1
(Tested this on 64-bit Mac js opt threadsafe deterministic shell off m-c rev ebdf2740dc3e)
My configure flags are:
CC="clang -Qunused-arguments" CXX="clang++ -Qunused-arguments" AR=ar sh /Users/skywalker/trees/mozilla-central/js/src/configure --target=x86\_64-apple-darwin12.5.0 --enable-optimize --disable-debug --enable-profiling --enable-gczeal --enable-debug-symbols --disable-tests --enable-more-deterministic --with-ccache --enable-threadsafe <other NSPR options>
autoBisect shows this is probably related to the following changeset:
The first bad revision is:
changeset: <http://hg.mozilla.org/mozilla-central/rev/f98f80d2126c>
user: Jan de Mooij
date: Sat Sep 28 11:45:21 2013 +0200
summary: [Bug 915763](/show_bug.cgi?id=915763 "RESOLVED FIXED - Remove TypeScript::dynamicList, MonitorOverflow and MonitorString") - Remove TypeScript::dynamicList and dynamic Monitor functions. r=bhackett
Jan, is [bug 915763](/show_bug.cgi?id=915763 "RESOLVED FIXED - Remove TypeScript::dynamicList, MonitorOverflow and MonitorString") a possible regressor?Flags: needinfo?(jdemooij)

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297) |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=995817#c1)• 11 years ago |
|  | |

(In reply to Gary Kwong [:gkw] [:nth10sd] from [comment #0](/show_bug.cgi?id=995817#c0 "VERIFIED FIXED - Differential Testing: Incorrect result when division-by-zero is used in an indirectly-truncated context"))
> Jan, is [bug 915763](/show_bug.cgi?id=915763 "RESOLVED FIXED - Remove TypeScript::dynamicList, MonitorOverflow and MonitorString") a possible regressor?
No it just exposed this probably.
It looks like here:
return (1 + -1 / 0) << null
In CodeGeneratorX86Shared::visitDivI, we think the Div is truncated, and always return 0. But this is bogus, we should invalidate and then return -Infinity.
Nicolas, hg annotate on MDiv::truncate points to [bug 841666](/show_bug.cgi?id=841666 "RESOLVED FIXED - IonMonkey: Support double exponent range analysis for multiplication truncation."), so can you take a look?No longer blocks: [915763](/show_bug.cgi?id=915763 "RESOLVED FIXED - Remove TypeScript::dynamicList, MonitorOverflow and MonitorString")Flags: needinfo?(jdemooij) → needinfo?(nicolas.b.pierron)

|  | [Nicolas B. Pierron [:nbp]](/user_profile?user_id=422187)  Assignee |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=995817#c2)• 11 years ago |
|  | |

Attached patch

[Do not eagerly specialize MDiv to Int32.](attachment.cgi?id=8406179&action=diff) (obsolete)
— [Details](attachment.cgi?id=8406179&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=995817&attachment=8406179)

This patch prevent keeping the Int32 specialization coming from the operands if the operation cannot be replaced by a constant at the time of the BinaryArithInstruction::infer.
The Int32 specialization caused the Range Analysis to assume that the front-end knew better and that it was fine to truncate this operation. We just cannot assume anything except if Range Analysis prove it, or if we know better.Assignee: nobody → nicolas.b.pierronStatus: NEW → ASSIGNED
[Attachment #8406179](/attachment.cgi?id=8406179&action=edit "Do not eagerly specialize MDiv to Int32.") -
Flags: review?(sunfish)Flags: needinfo?(nicolas.b.pierron)

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297) |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=995817#c3)• 11 years ago |
|  | |

Specializing almost all int32 divs as double seems wrong. I'm pretty sure we have benchmarks with int32 divisions that never bail, and which would now use double division...

|  | [Dan Gohman [:sunfish]](/user_profile?user_id=468136) |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=995817#c4)• 11 years ago |
|  | |

Comment on [attachment 8406179](/attachment.cgi?id=8406179 "Do not eagerly specialize MDiv to Int32.") [[details]](/attachment.cgi?id=8406179&action=edit "Do not eagerly specialize MDiv to Int32.") [[diff]](/attachment.cgi?id=8406179&action=diff "Do not eagerly specialize MDiv to Int32.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=995817&attachment=8406179)
Do not eagerly specialize MDiv to Int32.
Review of [attachment 8406179](/attachment.cgi?id=8406179 "Do not eagerly specialize MDiv to Int32.") [[details]](/attachment.cgi?id=8406179&action=edit "Do not eagerly specialize MDiv to Int32.") [[diff]](/attachment.cgi?id=8406179&action=diff "Do not eagerly specialize MDiv to Int32.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=995817&attachment=8406179):
-----------------------------------------------------------------
The underlying problem seems to be that the div is being marked as truncated, while it is not actually fully truncated.
The following code in RangeAnalysis.cpp's CanTruncate makes what appears to be the key decision:
// Special case integer division: the result of a/b can be infinite
// but cannot actually have rounding errors induced by truncation.
if (candidate->isDiv() && candidate->toDiv()->specialization() == MIRType\_Int32)
canHaveRoundingErrors = false;
if (canHaveRoundingErrors)
return false;
Integer division returning infinite is perhaps not a rouding concern per se, but it seems that CanTruncate ought to handle it in a similar manner.
[Attachment #8406179](/attachment.cgi?id=8406179&action=edit "Do not eagerly specialize MDiv to Int32.") -
Flags: review?(sunfish) → review-

|  | [Nicolas B. Pierron [:nbp]](/user_profile?user_id=422187)  Assignee |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=995817#c5)• 11 years ago |
|  | |

Attached patch

[MDiv only truncates operation which are valid in the 2^32 range.](attachment.cgi?id=8406809&action=diff) (obsolete)
— [Details](attachment.cgi?id=8406809&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=995817&attachment=8406809)

Currently Truncated is used as:
1. Ignore Infinity (? / 0) and substitute them by 0.
2. Ignore overflow (INT\_MIN / -1 == INT\_MAX --> 0)
3. Ignore negative zeros. (-0 --> 0)
4. Ignore remainder. (0.2 --> 0)
I think we should distinguish (1) & (4) from (2) & (3), as the later are keeping the same meaning in modulo 2³² arithmetic, which is what the truncation made by Range Analysis is used for.
(1) does not respect modulo 2³² arithmetic, as the above example highlight.
(4) does not respect modulo 2³² arithmetic, as (3/4 + 3/4) | 0 highlight (see test case).
[Attachment #8406809](/attachment.cgi?id=8406809&action=edit "MDiv only truncates operation which are valid in the 2^32 range.") -
Flags: review?(sunfish)
[Attachment #8406809](/attachment.cgi?id=8406809&action=edit "MDiv only truncates operation which are valid in the 2^32 range.") -
Flags: feedback?(mrosenberg)

|  | [Nicolas B. Pierron [:nbp]](/user_profile?user_id=422187)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=995817#a133239_422187)• 11 years ago |

[Attachment #8406179](/attachment.cgi?id=8406179&action=edit "Do not eagerly specialize MDiv to Int32.") -
Attachment is obsolete: true

|  | [Nicolas B. Pierron [:nbp]](/user_profile?user_id=422187)  Assignee |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=995817#c6)• 11 years ago |
|  | |

Comment on [attachment 8406809](/attachment.cgi?id=8406809 "MDiv only truncates operation which are valid in the 2^32 range.") [[details]](/attachment.cgi?id=8406809&action=edit "MDiv only truncates operation which are valid in the 2^32 range.") [[diff]](/attachment.cgi?id=8406809&action=diff "MDiv only truncates operation which are valid in the 2^32 range.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=995817&attachment=8406809)
MDiv only truncates operation which are valid in the 2^32 range.
Review of [attachment 8406809](/attachment.cgi?id=8406809 "MDiv only truncates operation which are valid in the 2^32 range.") [[details]](/attachment.cgi?id=8406809&action=edit "MDiv only truncates operation which are valid in the 2^32 range.") [[diff]](/attachment.cgi?id=8406809&action=diff "MDiv only truncates operation which are valid in the 2^32 range.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=995817&attachment=8406809):
-----------------------------------------------------------------
::: js/src/jit/arm/CodeGenerator-arm.cpp
@@ +535,2 @@
> masm.ma\_cmp(rhs, Imm32(0));
> + if (mir->mir->canTruncateInfinities()) {
nit: I fixed this typo locally.

|  | [Marty Rosenberg [:mjrosenb]](/user_profile?user_id=419881) |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=995817#c7)• 11 years ago |
|  | |

Comment on [attachment 8406809](/attachment.cgi?id=8406809 "MDiv only truncates operation which are valid in the 2^32 range.") [[details]](/attachment.cgi?id=8406809&action=edit "MDiv only truncates operation which are valid in the 2^32 range.") [[diff]](/attachment.cgi?id=8406809&action=diff "MDiv only truncates operation which are valid in the 2^32 range.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=995817&attachment=8406809)
MDiv only truncates operation which are valid in the 2^32 range.
Review of [attachment 8406809](/attachment.cgi?id=8406809 "MDiv only truncates operation which are valid in the 2^32 range.") [[details]](/attachment.cgi?id=8406809&action=edit "MDiv only truncates operation which are valid in the 2^32 range.") [[diff]](/attachment.cgi?id=8406809&action=diff "MDiv only truncates operation which are valid in the 2^32 range.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=995817&attachment=8406809):
-----------------------------------------------------------------
js> (Math.pow(2,31) / (-1))|0
-2147483648
If we cared about perf of this type of case, what we could do is replace the truncate with a label, and rather than bailing out on \infty, just setting the correct register to zero, and branching to the truncate label.
::: js/src/jit/arm/CodeGenerator-arm.cpp
@@ +550,5 @@
> + // Handle negative 0.
> + if (!mir->isTruncated() && mir->canBeNegativeZero()) {
> + Label nonzero;
> + masm.ma\_cmp(lhs, Imm32(0));
> + masm.ma\_b(&skip, Assembler::NotEqual);
Is the label skip even in scope here?
@@ +551,5 @@
> + if (!mir->isTruncated() && mir->canBeNegativeZero()) {
> + Label nonzero;
> + masm.ma\_cmp(lhs, Imm32(0));
> + masm.ma\_b(&skip, Assembler::NotEqual);
> + masm.ma\_cmp(rhs, Imm32(0));
I also suspect that chained compares are faster than compare; branch; compare.
[Attachment #8406809](/attachment.cgi?id=8406809&action=edit "MDiv only truncates operation which are valid in the 2^32 range.") -
Flags: feedback?(mrosenberg) → feedback+

|  | [Nicolas B. Pierron [:nbp]](/user_profile?user_id=422187)  Assignee |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=995817#c8)• 11 years ago |
|  | |

(In reply to Marty Rosenberg [:mjrosenb] from [comment #7](/show_bug.cgi?id=995817#c7 "VERIFIED FIXED - Differential Testing: Incorrect result when division-by-zero is used in an indirectly-truncated context"))
> Comment on [attachment 8406809](/attachment.cgi?id=8406809 "MDiv only truncates operation which are valid in the 2^32 range.") [[details]](/attachment.cgi?id=8406809&action=edit "MDiv only truncates operation which are valid in the 2^32 range.") [[diff]](/attachment.cgi?id=8406809&action=diff "MDiv only truncates operation which are valid in the 2^32 range.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=995817&attachment=8406809)
> MDiv only truncates operation which are valid in the 2^32 range.
>
> Review of [attachment 8406809](/attachment.cgi?id=8406809 "MDiv only truncates operation which are valid in the 2^32 range.") [[details]](/attachment.cgi?id=8406809&action=edit "MDiv only truncates operation which are valid in the 2^32 range.") [[diff]](/attachment.cgi?id=8406809&action=diff "MDiv only truncates operation which are valid in the 2^32 range.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=995817&attachment=8406809):
> -----------------------------------------------------------------
>
> js> (Math.pow(2,31) / (-1))|0
> -2147483648
>
>
> If we cared about perf of this type of case, what we could do is replace the
> truncate with a label, and rather than bailing out on \infty, just setting
> the correct register to zero, and branching to the truncate label.
In which case we would need a maybeLabel, but yes, we can reduce the code size by jumping to unique truncate path.
> ::: js/src/jit/arm/CodeGenerator-arm.cpp
> @@ +550,5 @@
> > + // Handle negative 0.
> > + if (!mir->isTruncated() && mir->canBeNegativeZero()) {
> > + Label nonzero;
> > + masm.ma\_cmp(lhs, Imm32(0));
> > + masm.ma\_b(&skip, Assembler::NotEqual);
>
> Is the label skip even in scope here?
Indeed, tbpl caught this one and I fixed it locally too. I will try it on the simulator.
> @@ +551,5 @@
> > + if (!mir->isTruncated() && mir->canBeNegativeZero()) {
> > + Label nonzero;
> > + masm.ma\_cmp(lhs, Imm32(0));
> > + masm.ma\_b(&skip, Assembler::NotEqual);
> > + masm.ma\_cmp(rhs, Imm32(0));
>
> I also suspect that chained compares are faster than compare; branch;
> compare.
oh would you do so? something like that:
masm.ma\_cmp(lhs, Imm32(0));
masm.ma\_cmp(rhs, Imm32(0), Assembler::NotEqual);
if (!bailoutIf(Assembler::LessThan, snapshot))
return false;
?

|  | [Dan Gohman [:sunfish]](/user_profile?user_id=468136) |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=995817#c9)• 11 years ago |
|  | |

Comment on [attachment 8406809](/attachment.cgi?id=8406809 "MDiv only truncates operation which are valid in the 2^32 range.") [[details]](/attachment.cgi?id=8406809&action=edit "MDiv only truncates operation which are valid in the 2^32 range.") [[diff]](/attachment.cgi?id=8406809&action=diff "MDiv only truncates operation which are valid in the 2^32 range.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=995817&attachment=8406809)
MDiv only truncates operation which are valid in the 2^32 range.
Review of [attachment 8406809](/attachment.cgi?id=8406809 "MDiv only truncates operation which are valid in the 2^32 range.") [[details]](/attachment.cgi?id=8406809&action=edit "MDiv only truncates operation which are valid in the 2^32 range.") [[diff]](/attachment.cgi?id=8406809&action=diff "MDiv only truncates operation which are valid in the 2^32 range.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=995817&attachment=8406809):
-----------------------------------------------------------------
::: js/src/jit/MIR.h
@@ +4069,5 @@
> bool canBeNegativeOverflow\_;
> bool canBeDivideByZero\_;
> bool canBeNegativeDividend\_;
> + bool canTruncateInfinities\_;
> + bool canTruncateRemainder\_;
Currently these two new flags always have the same value. Are you planning for future changes which will set only one of these flags? If not, it'd be nice to merge them, if a satisfactory name can be found :-).
@@ +4105,3 @@
> div->setTruncated(true);
> + div->setCanTruncateInfinities(true);
> + div->setCanTruncateRemainder(true);
This is currently the only place where these are set to true. That means only asm.js gets these optimizations right now.
Would it be practical to extend this patch to teach range analysis how to set these flags when all of a divide's users are actual full truncates?
::: js/src/jit/shared/CodeGenerator-x86-shared.cpp
@@ +926,5 @@
>
> // Handle divide by zero.
> if (mir->canBeDivideByZero()) {
> masm.testl(rhs, rhs);
> + if (mir->canTruncateInfinities()) {
This is pretty subtle. Previously, I understood isTruncated() to mean that one could choose to run the value through |0 and it wouldn't affect correctness. Now, it's awkward to charactarize the semantics of isTruncated().
I'd prefer to see isTruncated() keep its original meaning, and have a new flag for this new kind of weaker truncation. Range analysis' truncation logic could then be taught to set this new flag instead of isTruncated() for these cases where the value isn't fully truncated in all senses. Do you think this makes sense and is practical?
[Attachment #8406809](/attachment.cgi?id=8406809&action=edit "MDiv only truncates operation which are valid in the 2^32 range.") -
Flags: review?(sunfish) → review-

|  | [Nicolas B. Pierron [:nbp]](/user_profile?user_id=422187)  Assignee |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=995817#c10)• 11 years ago |
|  | |

Attached patch

[MDiv only truncates operation which are valid in the 2^32 range.](attachment.cgi?id=8407067&action=diff) (obsolete)
— [Details](attachment.cgi?id=8407067&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=995817&attachment=8407067)

This should answer most of your concerns.
I added one flag, and set this flag to true when MDiv is indirectly truncated by the range analysis.
I also added a check to see if the division result only flows in bitwise instructions, in which cases we can safely truncate it as we used to do.
I will open a follow-up bug, as I think we can do better use of the Range Analysis, by moving the edge case analysis of MDiv to the range analysis.
[Attachment #8406809](/attachment.cgi?id=8406809&action=edit "MDiv only truncates operation which are valid in the 2^32 range.") -
Attachment is obsolete: true
[Attachment #8407067](/attachment.cgi?id=8407067&action=edit "MDiv only truncates operation which are valid in the 2^32 range.") -
Flags: review?(sunfish)

|  | [Nicolas B. Pierron [:nbp]](/user_profile?user_id=422187)  Assignee |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=995817#c11)• 11 years ago |
|  | |

Attached patch

[MDiv only truncates operation which are valid in the 2^32 range.](attachment.cgi?id=8407070&action=diff)
— [Details](attachment.cgi?id=8407070&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=995817&attachment=8407070)

[Attachment #8407067](/attachment.cgi?id=8407067&action=edit "MDiv only truncates operation which are valid in the 2^32 range.") -
Attachment is obsolete: true
[Attachment #8407067](/attachment.cgi?id=8407067&action=edit "MDiv only truncates operation which are valid in the 2^32 range.") -
Flags: review?(sunfish)
[Attachment #8407070](/attachment.cgi?id=8407070&action=edit "MDiv only truncates operation which are valid in the 2^32 range.") -
Flags: review?(sunfish)

|  | [Dan Gohman [:sunfish]](/user_profile?user_id=468136) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=995817#c12)• 11 years ago |
|  | |

Comment on [attachment 8407070](/attachment.cgi?id=8407070 "MDiv only truncates operation which are valid in the 2^32 range.") [[details]](/attachment.cgi?id=8407070&action=edit "MDiv only truncates operation which are valid in the 2^32 range.") [[diff]](/attachment.cgi?id=8407070&action=diff "MDiv only truncates operation which are valid in the 2^32 range.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=995817&attachment=8407070)
MDiv only truncates operation which are valid in the 2^32 range.
Review of [attachment 8407070](/attachment.cgi?id=8407070 "MDiv only truncates operation which are valid in the 2^32 range.") [[details]](/attachment.cgi?id=8407070&action=edit "MDiv only truncates operation which are valid in the 2^32 range.") [[diff]](/attachment.cgi?id=8407070&action=diff "MDiv only truncates operation which are valid in the 2^32 range.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=995817&attachment=8407070):
-----------------------------------------------------------------
::: js/src/jit/MIR.h
@@ +4072,5 @@
> bool unsigned\_;
>
> + // A Division can be truncated in 4 differents ways:
> + // 1. Ignore Infinities (x / 0 --> 0).
> + // 2. Ignore overflow (INT\_MIN / -1 == (INT\_MAX + 1) --> 0)
INT\_MIN/-1 is truncated to INT\_MIN, not 0.
@@ +4083,5 @@
> + //
> + // (1) is not safe, as Infinities would have absorbed other math operations.
> + //
> + // (4) is not safe, as the remainders of multiple numbers can add up to
> + // integers.
Could you also add a note here saying that Div is the only operator which can produce Infinities and remainders when given Int32 inputs? That would help explain why Div is being handled differently from the other operators.
::: js/src/jit/RangeAnalysis.cpp
@@ +2228,5 @@
> + case MDefinition::Op\_BitOr:
> + case MDefinition::Op\_BitXor:
> + case MDefinition::Op\_Lsh:
> + case MDefinition::Op\_Rsh:
> + case MDefinition::Op\_Ursh:
Perhaps doing this "properly" might entail changing isOperandTruncated() into getOperandTruncationKind() which returns an enum indicating whether there is direct, indirect, or no truncation. But, I realize that's a much broader change, and I don't think it's necessary to do this all at once.
[Attachment #8407070](/attachment.cgi?id=8407070&action=edit "MDiv only truncates operation which are valid in the 2^32 range.") -
Flags: review?(sunfish) → review+

|  | [Nicolas B. Pierron [:nbp]](/user_profile?user_id=422187)  Assignee |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=995817#c13)• 11 years ago |
|  | |

Comment on [attachment 8407070](/attachment.cgi?id=8407070 "MDiv only truncates operation which are valid in the 2^32 range.") [[details]](/attachment.cgi?id=8407070&action=edit "MDiv only truncates operation which are valid in the 2^32 range.") [[diff]](/attachment.cgi?id=8407070&action=diff "MDiv only truncates operation which are valid in the 2^32 range.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=995817&attachment=8407070)
MDiv only truncates operation which are valid in the 2^32 range.
Review of [attachment 8407070](/attachment.cgi?id=8407070 "MDiv only truncates operation which are valid in the 2^32 range.") [[details]](/attachment.cgi?id=8407070&action=edit "MDiv only truncates operation which are valid in the 2^32 range.") [[diff]](/attachment.cgi?id=8407070&action=diff "MDiv only truncates operation which are valid in the 2^32 range.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=995817&attachment=8407070):
-----------------------------------------------------------------
::: js/src/jit/MIR.cpp
@@ +1525,5 @@
>
> bool
> MDiv::fallible() const
> {
> + return !isTruncated() || !isTruncatedIndirectly();
self-nit: I replaced this by only "!isTruncated()".
::: js/src/jit/arm/CodeGenerator-arm.cpp
@@ +515,5 @@
> // Handle INT32\_MIN / -1;
> // The integer division will give INT32\_MIN, but we want -(double)INT32\_MIN.
> masm.ma\_cmp(lhs, Imm32(INT32\_MIN)); // sets EQ if lhs == INT32\_MIN
> masm.ma\_cmp(rhs, Imm32(-1), Assembler::Equal); // if EQ (LHS == INT32\_MIN), sets EQ if rhs == -1
> + if (mir->canBeNegativeOverflow()) {
self-nit: this should be mir->canTruncateOverflow(), as it is on x86.

|  | [Nicolas B. Pierron [:nbp]](/user_profile?user_id=422187)  Assignee |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=995817#c14)• 11 years ago |
|  | |

<https://hg.mozilla.org/integration/mozilla-inbound/rev/35e57f348ddf>
rankov: This patch is changing MDivI such as we use more descriptive canTruncate\* functions instead of isTruncated. As isTruncated is still available, you might want to redo the same modification as on x86 / arm codegenFlags: needinfo?(branislav.rankov)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=995817#c15)• 11 years ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/35e57f348ddf>Status: ASSIGNED → RESOLVEDClosed: 11 years agoFlags: in-testsuite+Resolution: --- → FIXEDTarget Milestone: --- → mozilla31

|  | [Branislav Rankov [:rankov]](/user_profile?user_id=490241) |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=995817#c17)• 11 years ago |
|  | |

(In reply to Nicolas B. Pierron [:nbp] from [comment #14](/show_bug.cgi?id=995817#c14 "VERIFIED FIXED - Differential Testing: Incorrect result when division-by-zero is used in an indirectly-truncated context"))
> rankov: This patch is changing MDivI such as we use more descriptive
> canTruncate\* functions instead of isTruncated. As isTruncated is still
> available, you might want to redo the same modification as on x86 / arm
> codegen
Thanks for letting me know. I will update my patch for CodeGenerator-mips.Flags: needinfo?(branislav.rankov)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=995817#a396509_75935)• 11 years ago |

Blocks: [995816](/show_bug.cgi?id=995816 "VERIFIED FIXED - Differential Testing: Different output message involving gc")

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=995817#a396557_75935)• 11 years ago |

[status-b2g-v1.3](/buglist.cgi?f1=cf_status_b2g_1_3&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=unaffected)
[status-b2g-v1.4](/buglist.cgi?f1=cf_status_b2g_1_4&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=affected)
[status-b2g-v2.0](/buglist.cgi?f1=cf_status_b2g_2_0&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_b2g_2_0&o1=equals&v1=fixed)
[status-firefox29](/buglist.cgi?f1=cf_status_firefox29&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=wontfix)
[status-firefox30](/buglist.cgi?f1=cf_status_firefox30&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=affected)
[status-firefox31](/buglist.cgi?f1=cf_status_firefox31&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=fixed)

|  | [Dan Gohman [:sunfish]](/user_profile?user_id=468136) |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=995817#c18)• 11 years ago |
|  | |

Comment on [attachment 8407070](/attachment.cgi?id=8407070 "MDiv only truncates operation which are valid in the 2^32 range.") [[details]](/attachment.cgi?id=8407070&action=edit "MDiv only truncates operation which are valid in the 2^32 range.") [[diff]](/attachment.cgi?id=8407070&action=diff "MDiv only truncates operation which are valid in the 2^32 range.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=995817&attachment=8407070)
MDiv only truncates operation which are valid in the 2^32 range.
[Approval Request Comment]
Bug caused by (feature/regressing bug #): 841666
User impact if declined: Sec-critical bug
Testing completed (on m-c, etc.): on m-c
Risk to taking this patch (and alternatives if risky): Moderate to low. It's fixing a very subtle bug, but we have a good explanation for what's going on.
String or IDL/UUID changes made by this patch: None.
[Attachment #8407070](/attachment.cgi?id=8407070&action=edit "MDiv only truncates operation which are valid in the 2^32 range.") -
Flags: approval-mozilla-aurora?

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)  Reporter |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=995817#c19)• 11 years ago |
|  | |

Setting s-s per :sunfish's request.Group: core-security

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)  Reporter |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=995817#c20)• 11 years ago |
|  | |

(In reply to Gary Kwong [:gkw] [:nth10sd] from [comment #19](/show_bug.cgi?id=995817#c19 "VERIFIED FIXED - Differential Testing: Incorrect result when division-by-zero is used in an indirectly-truncated context"))
> Setting s-s per :sunfish's request.
He also says assume the worst for now, so setting sec-critical.Keywords: [sec-critical](/buglist.cgi?keywords=sec-critical&resolution=---)

|  | [Lukas Blakk [:lsblakk] use ?needinfo](/user_profile?user_id=272375) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=995817#a1022445_272375)• 11 years ago |

[Attachment #8407070](/attachment.cgi?id=8407070&action=edit "MDiv only truncates operation which are valid in the 2^32 range.") -
Flags: approval-mozilla-aurora? → approval-mozilla-aurora+

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 21](/show_bug.cgi?id=995817#c21)• 11 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-aurora/rev/1e0fac4a167b>
[status-b2g-v1.4](/buglist.cgi?f1=cf_status_b2g_1_4&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=fixed)
[status-firefox30](/buglist.cgi?f1=cf_status_firefox30&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=fixed)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=995817#a2768007_280903)• 11 years ago |

[status-firefox-esr24](/buglist.cgi?f1=cf_status_firefox_esr24&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=unaffected)

|  | [Jesse Ruderman](/user_profile?user_id=11608) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=995817#a3287690_11608)• 11 years ago |

Summary: Differential Testing: Different output message involving 'baseline.usecount.trigger' → Differential Testing: Incorrect result when division-by-zero is used in an indirectly-truncated context

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=995817#a4317474_280903)• 11 years ago |

Whiteboard: [adv-main30+]

|  | [Matt Wobensmith [:mwobensmith][:matt:]](/user_profile?user_id=452604) |  |
| --- | --- | --- |
| [Comment 22](/show_bug.cgi?id=995817#c22)• 11 years ago |
|  | |

Confirmed issue on 2014-04-04, Fx30.
Verified fixed on 2014-06-03, Fx30 and Fx31.Status: RESOLVED → VERIFIED
[status-firefox30](/buglist.cgi?f1=cf_status_firefox30&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=verified)
[status-firefox31](/buglist.cgi?f1=cf_status_firefox31&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=verified)

|  | [Matt Wobensmith [:mwobensmith][:matt:]](/user_profile?user_id=452604) |  |
| --- | --- | --- |
| [Comment 23](/show_bug.cgi?id=995817#c23)• 11 years ago |
|  | |

Actually, removing verified status. Needs to be verified in build made with --enable-more-deterministic. Gary will do this.Status: VERIFIED → RESOLVEDClosed: 11 years ago → 11 years ago
[status-firefox30](/buglist.cgi?f1=cf_status_firefox30&o1=isnotempty):
[verified](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=verified) → [fixed](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=fixed)
[status-firefox31](/buglist.cgi?f1=cf_status_firefox31&o1=isnotempty):
[verified](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=verified) → [fixed](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=fixed)Flags: needinfo?(gary)

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)  Reporter |  |
| --- | --- | --- |
| [Comment 24](/show_bug.cgi?id=995817#c24)• 11 years ago |
|  | |

Verified on mozilla-central (32), mozilla-aurora (31) and mozilla-beta (30).Status: RESOLVED → VERIFIED
[status-firefox30](/buglist.cgi?f1=cf_status_firefox30&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=verified)
[status-firefox31](/buglist.cgi?f1=cf_status_firefox31&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=verified)Flags: needinfo?(gary)

|  | [Justin Wood (:Callek)](/user_profile?user_id=129968) |  |
| --- | --- | --- |
| [Comment 25](/show_bug.cgi?id=995817#c25)• 11 years ago |
|  | |

trying to apply this to SeaMonkey 2.26.1 (Gecko 29) resulted in patch conflicts, and due to the nature of this patchset it seems like I won't be able to take it.
[status-seamonkey2.26](/buglist.cgi?f1=cf_status_seamonkey226&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_seamonkey226&o1=equals&v1=wontfix)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=995817#a43528797_1689)• 9 years ago |

Group: core-security
You need to [log in](/show_bug.cgi?id=995817&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Nicolas B. Pierron [:nbp]](/user_profile?user_id=422187)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from blog.mozilla.org_214f5ef1_20250126_011817.html ===

[Skip to content](#content)

[Mozilla](https://blog.mozilla.org/en/)

![search](https://blog.mozilla.org/wp-content/themes/foxtail/assets/images/icons/search.svg)

* [Internet Culture](https://blog.mozilla.org/en/category/internet-culture/)
  + [Deep Dives](https://blog.mozilla.org/en/category/internet-culture/deep-dives/)
  + [Mozilla Explains](https://blog.mozilla.org/en/category/internet-culture/mozilla-explains/)
  + [Interviews](https://blog.mozilla.org/en/category/internet-culture/interviews/)
  + [Videos](https://blog.mozilla.org/en/category/videos/)
* [Privacy & Security](https://blog.mozilla.org/en/category/privacy-security/)
* [Products](https://blog.mozilla.org/en/category/products/)
  + [Firefox](https://blog.mozilla.org/en/category/products/firefox/)
  + [Pocket](https://blog.mozilla.org/en/category/products/pocket/)
  + [Mozilla VPN](https://blog.mozilla.org/en/category/products/mozilla-vpn/)
* [Mozilla](https://blog.mozilla.org/en/category/mozilla/)
  + [News](https://blog.mozilla.org/en/category/mozilla/news/)
  + [Internet Policy](https://blog.mozilla.org/en/category/mozilla/internet-policy/)
  + [Leadership](https://blog.mozilla.org/en/category/mozilla/leadership/)
    - [Mitchell Baker, CEO](https://blog.mozilla.org/en/author/mitchellmozillacom/)
    - [Mark Surman, ED Foundation](https://blog.mozilla.org/en/author/markmozillafoundation-org/)
    - [Eric Rescorla, Firefox CTO](https://blog.mozilla.org/en/author/ekrmozilla-com/)

[Download Firefox](https://www.mozilla.org/firefox/new/?utm_source=blog.mozilla.org&utm_medium=referral&utm_campaign=blog-nav)

![search](https://blog.mozilla.org/wp-content/themes/foxtail/assets/images/icons/search.svg)

#### Search

Search for:

![](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2019/01/mozilla-logo-bw-rgb.png)
## News

Official announcements and press releases

[![Room filled with people listening to a speaker on stage. Demo Day visual image in the background.](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/12/Demo_Day_Blog_Header_-1-800x800.jpg)
Mozilla
## Mozilla Builders: Celebrating community-driven innovation in AI

Read More](https://blog.mozilla.org/en/mozilla/mozilla-builders-demo-day/)

[![The Mozilla logo in green on a black background](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/12/logo-lockup-video-poster-800x800.png)
Mozilla
## Mozilla welcomes new executive team members

Read More](https://blog.mozilla.org/en/mozilla/new-executives/)

[![Decorative image of wrapped gifts in front of an iphone](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2023/11/moz_header_holiday_firefox-phone-gifts_blue-03.png-800x800.png)
Products
## Shopping for everyone? We’ve got you covered with the Fakespot Holiday Gift Guide 2024

Read More](https://blog.mozilla.org/en/products/shopping-for-everyone-weve-got-you-covered-with-the-fakespot-holiday-gift-guide-2024/)

[![Text: Mozilla Builders](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/06/Blog-16_9-1920x1080-1-800x800.png)
Mozilla
## 14 AI projects to watch: Mozilla’s first Builders Accelerator cohort kicks off

Read More](https://blog.mozilla.org/en/mozilla/14-ai-projects-to-watch-mozillas-first-builders-accelerator-cohort-kicks-off/)

[![A check mark next to the text "Fakespot."](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2023/07/Fakespot_ProductBlog-2-800x800.jpg)
News
## Fakespot’s guide to trending back-to-school products

Read More](https://blog.mozilla.org/en/mozilla/news/fakespots-guide-to-trending-back-to-school-products/)

[![](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/06/IG_Highlights_Icon-800x800.png)
Mozilla
## BAFTA Award-Winner Siobhán McSweeney to host Mozilla’s 2nd Annual Rise25 Awards in Dublin, Ireland on Aug. 13

Read More](https://blog.mozilla.org/en/mozilla/bafta-award-winner-siobhan-mcsweeney-to-host-mozillas-2nd-annual-rise25-awards-in-dublin-ireland-on-august-13/)

[![](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/05/fx_website_meta-image_tips-tricks_alt-04-1-800x800.webp)
Mozilla
## Here’s what we’re working on in Firefox

Read More](https://blog.mozilla.org/en/mozilla/heres-what-were-working-on-in-firefox/)

[![A check mark next to the text "Fakespot."](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2023/07/Fakespot_ProductBlog-2-800x800.jpg)
News
## Fakespot reveals the product categories with the most and least reliable product reviews

Read More](https://blog.mozilla.org/en/mozilla/news/fakespot-reveals-the-product-categories-with-the-most-and-least-reliable-product-reviews-for-summer-and-back-to-school-shopping/)

[![A dark blue speech bubble with horizontal purple and red bars on a pink background.](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2020/03/fx_blog_header_announcements_001_1920x1080-800x800.jpg)
Firefox
## Engaging with our Firefox community: Highlights from our recent AMA

Read More](https://blog.mozilla.org/en/products/firefox/engaging-with-our-firefox-community-highlights-from-our-recent-ama/)

[![](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/06/IG_Highlights_Icon-800x800.png)
Mozilla
## Mozilla announces finalists for the 2nd annual Rise25 Awards

Read More](https://blog.mozilla.org/en/mozilla/mozilla-announces-finalists-for-the-2nd-annual-rise25-awards/)

[![Mozilla and Anonym logos](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/06/blog_1200x800_v2-800x800.png)
Mozilla
## Introducing Anonym: Raising the bar for privacy-preserving digital advertising

Read More](https://blog.mozilla.org/en/mozilla/mozilla-anonym-raising-the-bar-for-privacy-preserving-digital-advertising/)

[![logo - zero with a diagonal line through it, and the letters D, I, N](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/06/odintbanner-500x500.png)
Mozilla
## Keeping GenAI technologies secure is a shared responsibility

Read More](https://blog.mozilla.org/en/mozilla/keeping-genai-technologies-secure-is-a-shared-responsibility/)

1
[2](https://blog.mozilla.org/en/category/mozilla/news/page/2?utm_source=www.mozilla)
[3](https://blog.mozilla.org/en/category/mozilla/news/page/3?utm_source=www.mozilla)
…
[24](https://blog.mozilla.org/en/category/mozilla/news/page/24?utm_source=www.mozilla)
[next](https://blog.mozilla.org/en/category/mozilla/news/page/2?utm_source=www.mozilla)

![newsletter](https://blog.mozilla.org/wp-content/themes/foxtail/assets/images/newsletter.png)

### Keep up with all things Firefox

Get how-tos, advice and news to make your Firefox experience work best for you.

Your e-mail address

Country
- select -
Afghanistan
Akrotiri
Albania
Algeria
American Samoa
Andorra
Angola
Anguilla
Antarctica
Antigua and Barbuda
Argentina
Armenia
Aruba
Ashmore and Cartier Islands
Australia
Austria
Azerbaijan
Bahamas, The
Bahrain
Baker Island
Bangladesh
Barbados
Bassas da India
Belarus
Belgium
Belize
Benin
Bermuda
Bhutan
Bolivia
Bonaire, Sint Eustatius, and Saba
Bosnia and Herzegovina
Botswana
Bouvet Island
Brazil
British Indian Ocean Territory
Brunei
Bulgaria
Burkina Faso
Burma
Burundi
Cabo Verde
Cambodia
Cameroon
Canada
Cayman Islands
Central African Republic
Chad
Chile
China
Christmas Island
Clipperton Island
Cocos (Keeling) Islands
Colombia
Comoros
Congo (Brazzaville)
Congo (Kinshasa)
Cook Islands
Coral Sea Islands
Costa Rica
Croatia
Cuba
Curaçao
Cyprus
Czech Republic
Côte d’Ivoire
Denmark
Dhekelia
Diego Garcia
Djibouti
Dominica
Dominican Republic
Ecuador
Egypt
El Salvador
Equatorial Guinea
Eritrea
Estonia
Ethiopia
Europa Island
Falkland Islands (Islas Malvinas)
Faroe Islands
Fiji
Finland
France
French Guiana
French Polynesia
French Southern and Antarctic Lands
Gabon
Gambia, The
Gaza Strip
Georgia
Germany
Ghana
Gibraltar
Glorioso Islands
Greece
Greenland
Grenada
Guadeloupe
Guam
Guatemala
Guernsey
Guinea
Guinea-Bissau
Guyana
Haiti
Heard Island and McDonald Islands
Honduras
Hong Kong
Howland Island
Hungary
Iceland
India
Indonesia
Iran
Iraq
Ireland
Isle of Man
Israel
Italy
Jamaica
Jan Mayen
Japan
Jarvis Island
Jersey
Johnston Atoll
Jordan
Juan de Nova Island
Kazakhstan
Kenya
Kingman Reef
Kiribati
Korea, North
Korea, South
Kosovo
Kuwait
Kyrgyzstan
Laos
Latvia
Lebanon
Lesotho
Liberia
Libya
Liechtenstein
Lithuania
Luxembourg
Macau
Macedonia
Madagascar
Malawi
Malaysia
Maldives
Mali
Malta
Marshall Islands
Martinique
Mauritania
Mauritius
Mayotte
Mexico
Micronesia, Federated States of
Midway Islands
Moldova
Monaco
Mongolia
Montenegro
Montserrat
Morocco
Mozambique
Namibia
Nauru
Navassa Island
Nepal
Netherlands
New Caledonia
New Zealand
Nicaragua
Niger
Nigeria
Niue
Norfolk Island
Northern Mariana Islands
Norway
Oman
Pakistan
Palau
Palmyra Atoll
Panama
Papua New Guinea
Paracel Islands
Paraguay
Peru
Philippines
Pitcairn Islands
Poland
Portugal
Puerto Rico
Qatar
Reunion
Romania
Russia
Rwanda
Saint Barthelemy
Saint Helena, Ascension, and Tristan da Cunha
Saint Kitts and Nevis
Saint Lucia
Saint Martin
Saint Pierre and Miquelon
Saint Vincent and the Grenadines
Samoa
San Marino
Sao Tome and Principe
Saudi Arabia
Senegal
Serbia
Seychelles
Sierra Leone
Singapore
Sint Maarten
Slovakia
Slovenia
Solomon Islands
Somalia
South Africa
South Georgia and South Sandwich Islands
South Sudan
Spain
Spratly Islands
Sri Lanka
Sudan
Suriname
Svalbard
Swaziland
Sweden
Switzerland
Syria
Taiwan
Tajikistan
Tanzania
Thailand
Timor-Leste
Togo
Tokelau
Tonga
Trinidad and Tobago
Tromelin Island
Tunisia
Turkey
Turkmenistan
Turks and Caicos Islands
Tuvalu
Uganda
Ukraine
United Arab Emirates
United Kingdom
United States
Uruguay
Uzbekistan
Vanuatu
Vatican City
Venezuela
Vietnam
Virgin Islands, British
Virgin Islands, U.S.
Wake Island
Wallis and Futuna
West Bank
Western Sahara
Yemen
Zambia
Zimbabwe

Language
English
Bahasa Indonesia
Deutsch
Español
Français
Polski
Português
Русский
正體中文

Format

 HTML

 Text

I’m okay with Mozilla handling my info as explained in this [Privacy Policy](https://www.mozilla.org/privacy/).

Sign up now
We will only send you
Mozilla-related information.

## Thanks!

If you haven’t previously confirmed a subscription to a Mozilla-related newsletter you may have to do so. Please check your inbox or your spam filter for an e-mail from us.

[Mozilla](https://www.mozilla.org/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)

##### Mozilla

* [About](https://www.mozilla.org/about/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Contact Us](https://www.mozilla.org/contact/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Donate](https://donate.mozilla.org/?presets=50,30,20,10&amount=30¤cy=usd&utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)

##### Firefox

* [Download Firefox](https://www.mozilla.org/firefox/new/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Desktop](https://www.mozilla.org/firefox/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Mobile](https://www.mozilla.org/firefox/mobile/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Features](https://www.mozilla.org/firefox/features/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Beta, Nightly, Developer Edition](https://www.mozilla.org/firefox/channel/desktop/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)

##### Resources

* [Privacy Hub](https://www.mozilla.org/privacy/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Browser Comparison](https://www.mozilla.org/firefox/browsers/compare/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Brand Standards](https://mozilla.design/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)

##### Social

Follow @Firefox

* [Twitter (@mozilla)](https://twitter.com/firefox)
* [Instagram (@mozilla)](https://www.instagram.com/firefox/)
* [YouTube (@firefoxchannel)](https://www.youtube.com/user/firefoxchannel)

Follow @Mozilla

* [Twitter (@mozilla)](https://twitter.com/mozilla)
* [Instagram (@mozilla)](https://www.instagram.com/mozilla/)

* [Website Privacy Notice](https://www.mozilla.org/privacy/websites/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Legal](https://www.mozilla.org/about/legal/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)



=== Content from bugzilla.mozilla.org_458b60a0_20250124_132125.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/969517)
* [XML](/show_bug.cgi?ctype=xml&id=969517)

Closed
[Bug 969517](/show_bug.cgi?id=969517)

Opened 11 years ago
Closed 11 years ago

# Faulty/ASan: heap-use-after-free of a LayerComposite that was destroyed by ContainerLayer::RemoveChild

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

Faulty/ASan: heap-use-after-free of a LayerComposite that was destroyed by ContainerLayer::RemoveChild

## Categories

### (Core :: Graphics, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=Graphics#Graphics)

Graphics
▾

Core :: Graphics
Mapping of cross platform rendering interfaces to various 2D graphics APIs
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=Graphics&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=Graphics&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=Graphics)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

x86\_64

Linux

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

normal

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla30

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Accessibility Severity | --- |
| --- | --- |
| a11y-review | --- |
| Webcompat Priority | --- |
| Webcompat Score | --- |
| Performance Impact | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox29 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=wontfix) |
| firefox30 | [+](/buglist.cgi?f1=cf_tracking_firefox30&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=fixed) |
| firefox-esr24 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=wontfix) |
| b2g-v1.4 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=fixed) |
| seamonkey2.26 | --- | [unaffected](/buglist.cgi?f1=cf_status_seamonkey226&o1=equals&v1=unaffected) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox29 |  | wontfix |
| firefox30 | + | fixed |
| firefox-esr24 |  | wontfix |
| b2g-v1.4 |  | fixed |
| relnote-firefox |  | --- |
| seamonkey2.26 |  | unaffected |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: bjacob, Assigned: bjacob)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/8f64ddf291d83cdc891c05ee5d5cc5dc?d=mm&size=40)  [bjacob](/user_profile?user_id=382769)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/8f64ddf291d83cdc891c05ee5d5cc5dc?d=mm&size=40)  [bjacob](/user_profile?user_id=382769)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/17436ade8da1b23d42b3df05b9c4fc77?d=mm&size=40)  [bhood](/user_profile?user_id=697075)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

5 people

## References

### (Blocks 1 open bug)

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

[970747](/show_bug.cgi?id=970747 "RESOLVED FIXED - ContainerLayer::InsertAfter, RemoveChild, and other tree updates need graceful, runtime error handling, even in release builds")

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[fuzzing-ipc-ipdl](/show_bug.cgi?id=777067 "NEW - [meta] Fuzzing: IPC Protocol Definition Language (IPDL) Protocols"), [fuzzing-layers-linux](/show_bug.cgi?id=963790 "RESOLVED FIXED - Tracking: Run Faulty without parent process crashes on desktop Linux with GL layers and e10s")

Dependency [tree](/showdependencytree.cgi?id=969517&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=969517)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Keywords: csectype-uaf, sec-critical, Whiteboard: [adv-main30+][qa-])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[csectype-uaf](/buglist.cgi?keywords=csectype-uaf&resolution=---),
[sec-critical](/buglist.cgi?keywords=sec-critical&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[adv-main30+][qa-]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | in-testsuite |  |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (2 files)

| [Faulty/ASan session](/attachment.cgi?id=8372456)  [11 years ago](#c0)  [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)   18.63 KB, text/plain |  | [Details](/attachment.cgi?id=8372456&action=edit) |
| --- | --- | --- |
| [Another Faulty/ASan session](/attachment.cgi?id=8373760)  [11 years ago](#c1)  [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)   27.53 KB, text/plain |  | [Details](/attachment.cgi?id=8373760&action=edit) |

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=969517#c0)• 11 years ago |
|  | |

Attached file
[Faulty/ASan session](attachment.cgi?id=8372456)
— [Details](attachment.cgi?id=8372456&action=edit)

Found by Christoph Diehl's "Faulty" fuzzer, see [bug 777067](/show_bug.cgi?id=777067 "NEW - [meta] Fuzzing: IPC Protocol Definition Language (IPDL) Protocols")

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=969517#a99_406194)• 11 years ago |

Keywords: [csectype-uaf](/buglist.cgi?keywords=csectype-uaf&resolution=---),
[sec-critical](/buglist.cgi?keywords=sec-critical&resolution=---)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=969517#a278422_280903)• 11 years ago |

[status-firefox30](/buglist.cgi?f1=cf_status_firefox30&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=affected)
[tracking-firefox30](/buglist.cgi?f1=cf_tracking_firefox30&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox30&o1=equals&v1=%2B)

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=969517#a281070_382769)• 11 years ago |

Summary: Faulty/ASan: heap-use-after-free of a Layer, in ShadowLayerParent::ActorDestroy, that was destroyed by ContainerLayer::RemoveChild → Faulty/ASan: heap-use-after-free of a LayerComposite that was destroyed by ContainerLayer::RemoveChild

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=969517#c1)• 11 years ago |
|  | |

Attached file
[Another Faulty/ASan session](attachment.cgi?id=8373760)
— [Details](attachment.cgi?id=8373760&action=edit)

Updated the bug title to reflect the invariants between these two ASan sessions, which are likely the same bug.

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=969517#a323624_382769)• 11 years ago |

Depends on: [970747](/show_bug.cgi?id=970747 "RESOLVED FIXED - ContainerLayer::InsertAfter, RemoveChild, and other tree updates need graceful, runtime error handling, even in release builds")

|  | [David Bolter [:davidb] (NeedInfo me for attention)](/user_profile?user_id=152868) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=969517#a525284_152868)• 11 years ago |

[status-b2g-v1.4](/buglist.cgi?f1=cf_status_b2g_1_4&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=affected)

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=969517#a1130251_406194)• 11 years ago |

[status-firefox29](/buglist.cgi?f1=cf_status_firefox29&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=wontfix)

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=969517#c2)• 11 years ago |
|  | |

Fixed by the landing of shadow layer updates validation fixes, [bug 970747](/show_bug.cgi?id=970747 "RESOLVED FIXED - ContainerLayer::InsertAfter, RemoveChild, and other tree updates need graceful, runtime error handling, even in release builds").Assignee: nobody → bjacobStatus: NEW → RESOLVEDClosed: 11 years agoResolution: --- → FIXED

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=969517#a1450202_75935)• 11 years ago |

[status-b2g-v1.4](/buglist.cgi?f1=cf_status_b2g_1_4&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=fixed)
[status-firefox30](/buglist.cgi?f1=cf_status_firefox30&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=fixed)Target Milestone: --- → mozilla30

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=969517#c3)• 11 years ago |
|  | |

Did this affect ESR24 at all?
[status-firefox-esr24](/buglist.cgi?f1=cf_status_firefox_esr24&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=%3F)

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=969517#c4)• 11 years ago |
|  | |

The bug exists in ESR24 as well, but this is only a security issue with e10s which is not enabled in ESR24, so I wouldn't bother about it. (In the same-process case, if the client here is compromised so it can send evil messages to the parent, then all is already lost, because the client and parent are the same process).

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=969517#a1653370_280903)• 11 years ago |

[status-firefox-esr24](/buglist.cgi?f1=cf_status_firefox_esr24&o1=isnotempty):
[?](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=%3F) → [wontfix](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=wontfix)

|  | [Matt Wobensmith [:mwobensmith][:matt:]](/user_profile?user_id=452604) |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=969517#c5)• 11 years ago |
|  | |

Marking [qa-] for verification, lack of test case.

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=969517#a10032569_280903)• 11 years ago |

Whiteboard: [adv-main30+]

|  | [Matt Wobensmith [:mwobensmith][:matt:]](/user_profile?user_id=452604) |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=969517#c6)• 11 years ago |
|  | |

Marking [qa-] for desktop QA verification. FxOS QA may choose to verify at a later date.Whiteboard: [adv-main30+] → [adv-main30+][qa-]

|  | [Justin Wood (:Callek)](/user_profile?user_id=129968) |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=969517#c7)• 11 years ago |
|  | |

as far as I can tell SeaMonkey 2.26 (Gecko 29) is not affected by this bug, hence unaffected.
[status-seamonkey2.26](/buglist.cgi?f1=cf_status_seamonkey226&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_seamonkey226&o1=equals&v1=unaffected)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=969517#a49161469_1689)• 9 years ago |

Group: core-security
You need to [log in](/show_bug.cgi?id=969517&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from www.ubuntu.com_99638c7c_20250124_132115.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# USN-2243-1: Firefox vulnerabilities

11 June 2014

Firefox could be made to crash or run programs as your login if it
opened a malicious website.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Releases

* [Ubuntu 14.04 ESM](/security/notices?release=trusty)
* [Ubuntu 13.10](/security/notices?release=saucy)
* [Ubuntu 12.04](/security/notices?release=precise)

## Packages

* [firefox](/security/cves?package=firefox) - Mozilla Open Source web browser

## Details

Gary Kwong, Christoph Diehl, Christian Holler, Hannes Verschore, Jan de

Mooij, Ryan VanderMeulen, Jeff Walden, Kyle Huey, Jesse Ruderman, Gregor

Wagner, Benoit Jacob and Karl Tomlinson discovered multiple memory safety

issues in Firefox. If a user were tricked in to opening a specially

crafted website, an attacker could potentially exploit these to cause a

denial of service via application crash, or execute arbitrary code with

the privileges of the user invoking Firefox. ([CVE-2014-1533](/security/CVE-2014-1533),

[CVE-2014-1534](/security/CVE-2014-1534))

Abhishek Arya discovered multiple use-after-free and out-of-bounds read

issues in Firefox. An attacker could potentially exploit these to cause

a denial of service via application crash or execute arbitrary code with

the priviliges of the user invoking Firefox. ([CVE-2014-1536](/security/CVE-2014-1536),

[CVE-2014-1537](/security/CVE-2014-1537), [CVE-2014-1538](/security/CVE-2014-1538))

Tyson Smith and Jesse Schwartzentruber discovered a use-after-free in the

event listener manager. An attacker could potentially exploit this to

cause a denial of service via application crash or execute arbitrary code

with the priviliges of the user invoking Firefox. ([CVE-2014-1540](/security/CVE-2014-1540))

A use-after-free was discovered in the SMIL animation controller. An

attacker could potentially exploit this to cause a denial of service via

application crash or execute arbitrary code with the priviliges of the

user invoking Firefox. ([CVE-2014-1541](/security/CVE-2014-1541))

Holger Fuhrmannek discovered a buffer overflow in Web Audio. An attacker

could potentially exploit this to cause a denial of service via

application crash or execute arbitrary code with the priviliges of the

user invoking Firefox. ([CVE-2014-1542](/security/CVE-2014-1542))

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Update instructions

The problem can be corrected by updating your system to the following package versions:

##### Ubuntu 14.04

* [firefox](https://launchpad.net/ubuntu/%2Bsource/firefox)
  -
  [30.0+build1-0ubuntu0.14.04.3](https://launchpad.net/ubuntu/%2Bsource/firefox/30.0%2Bbuild1-0ubuntu0.14.04.3)

##### Ubuntu 13.10

* [firefox](https://launchpad.net/ubuntu/%2Bsource/firefox)
  -
  [30.0+build1-0ubuntu0.13.10.3](https://launchpad.net/ubuntu/%2Bsource/firefox/30.0%2Bbuild1-0ubuntu0.13.10.3)

##### Ubuntu 12.04

* [firefox](https://launchpad.net/ubuntu/%2Bsource/firefox)
  -
  [30.0+build1-0ubuntu0.12.04.3](https://launchpad.net/ubuntu/%2Bsource/firefox/30.0%2Bbuild1-0ubuntu0.12.04.3)

After a standard system update you need to restart Firefox to make

all the necessary changes.

## References

* [CVE-2014-1533](/security/CVE-2014-1533)
* [CVE-2014-1534](/security/CVE-2014-1534)
* [CVE-2014-1536](/security/CVE-2014-1536)
* [CVE-2014-1537](/security/CVE-2014-1537)
* [CVE-2014-1538](/security/CVE-2014-1538)
* [CVE-2014-1540](/security/CVE-2014-1540)
* [CVE-2014-1541](/security/CVE-2014-1541)
* [CVE-2014-1542](/security/CVE-2014-1542)
* <https://launchpad.net/bugs/1326690>

## Related notices

* [USN-2250-1](/security/notices/USN-2250-1)

### Join the discussion

* [Ubuntu security updates mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened)
* [Security announcements mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-security-announce)

### Need help with your security needs?

Ubuntu Pro provides up to ten-year security coverage for over 23,000 open-source packages within the Ubuntu Main and Universe repositories.

[Talk to an expert to find out what would work best for you](/contact-us/form?product=pro)

### Further reading

* *Loading...*

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page



=== Content from bugzilla.mozilla.org_4967b688_20250124_132131.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/990868)
* [XML](/show_bug.cgi?ctype=xml&id=990868)

Closed
[Bug 990868](/show_bug.cgi?id=990868)

Opened 11 years ago
Closed 11 years ago

# limit ChannelMergerNode output channel count

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

limit ChannelMergerNode output channel count

## Categories

### (Core :: Web Audio, defect, P1)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=Web%20Audio#Web%20Audio)

Web Audio
▾

Core :: Web Audio
Bugs and enhancement requests relating to the Web Audio support.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=Web%20Audio&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=Web%20Audio&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=Web%20Audio)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

x86\_64

All

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

P1

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

normal

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla32

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Performance Impact | --- |
| --- | --- |
| a11y-review | --- |
| Webcompat Priority | --- |
| Accessibility Severity | --- |
| Webcompat Score | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox29 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=wontfix) |
| firefox30 | --- | [verified](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=verified) |
| firefox31 | --- | [verified](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=verified) |
| firefox32 | --- | [verified](/buglist.cgi?f1=cf_status_firefox32&o1=equals&v1=verified) |
| firefox-esr24 | --- | [unaffected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=unaffected) |
| b2g-v1.2 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=fixed) |
| b2g-v1.3 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=fixed) |
| b2g-v1.3T | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=fixed) |
| b2g-v1.4 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=fixed) |
| b2g-v2.0 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_2_0&o1=equals&v1=fixed) |
| seamonkey2.26 | --- | [wontfix](/buglist.cgi?f1=cf_status_seamonkey226&o1=equals&v1=wontfix) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox29 |  | wontfix |
| firefox30 |  | verified |
| firefox31 |  | verified |
| firefox32 |  | verified |
| firefox-esr24 |  | unaffected |
| b2g-v1.2 |  | fixed |
| b2g-v1.3 |  | fixed |
| b2g-v1.3T |  | fixed |
| b2g-v1.4 |  | fixed |
| b2g-v2.0 |  | fixed |
| relnote-firefox |  | --- |
| seamonkey2.26 |  | wontfix |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: karlt, Assigned: karlt)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/15d034eb5ed480cb10a8a9e41e8b9f13?d=mm&size=40)  [karlt](/user_profile?user_id=274246)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/15d034eb5ed480cb10a8a9e41e8b9f13?d=mm&size=40)  [karlt](/user_profile?user_id=274246)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/15d034eb5ed480cb10a8a9e41e8b9f13?d=mm&size=40)  [karlt](/user_profile?user_id=274246)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

8 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

[990794](/show_bug.cgi?id=990794 "RESOLVED FIXED - heap overflow write from allocation size overflow in AllocateAudioBlock")

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[991251](/show_bug.cgi?id=991251 "RESOLVED DUPLICATE - Heap-buffer-overflow in mozilla::AudioBlockCopyChannelWithScale triggered with ChannelMergerNode"), [CVE-2014-1542](/show_bug.cgi?id=991533 "VERIFIED FIXED - limit AudioBuffer channel counts and sample rate range")

Dependency [tree](/showdependencytree.cgi?id=990868&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=990868)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

[987679](/show_bug.cgi?id=987679 "VERIFIED FIXED - ASAN: Heap-buffer-overflow in speex_resampler_process_native triggered with AudioBufferSourceNode")

## Details

### (Keywords: csectype-dos, sec-critical, Whiteboard: [adv-main30+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[csectype-dos](/buglist.cgi?keywords=csectype-dos&resolution=---),
[sec-critical](/buglist.cgi?keywords=sec-critical&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[adv-main30+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [karlt](/user_profile?user_id=274246) | [in-testsuite](#c20 "11 years ago") | + |
| --- | --- | --- |
| [karlt](/user_profile?user_id=274246) | in-testsuite | + |
| --- | --- | --- |
|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (1 file)

| [limit ChannelMergerNode output channel count](/attachment.cgi?id=8400393)  [11 years ago](#c1)  [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)   1.54 KB, patch | padenot : [review+](#a22752_404637 "11 years ago")  lsblakk : [approval-mozilla-aurora+](#a4113000_272375 "11 years ago")  lsblakk : [approval-mozilla-beta+](#a4113000_272375 "11 years ago") | [Details](/attachment.cgi?id=8400393&action=edit) | [Diff](/attachment.cgi?id=8400393&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=990868&attachment=8400393) |
| --- | --- | --- |

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)  Assignee |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=990868#c0)• 11 years ago |
|  | |

+++ This bug was initially created as a clone of [Bug #990794](/show_bug.cgi?id=990794 "RESOLVED FIXED - heap overflow write from allocation size overflow in AllocateAudioBlock") +++
If we land a fix for the size calculation in [bug 990794](/show_bug.cgi?id=990794 "RESOLVED FIXED - heap overflow write from allocation size overflow in AllocateAudioBlock"), then that leave a DOS bug, which can be fixed by limiting the channel count.
Fixing the DOS gives away more information about how to induce the integer and heap overflow, so we have the option of landing this fix separately.
See also [bug 987679](/show_bug.cgi?id=987679 "VERIFIED FIXED - ASAN: Heap-buffer-overflow in speex_resampler_process_native triggered with AudioBufferSourceNode") which can be induced through large channel counts.

|  | [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)  Assignee |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=990868#c1)• 11 years ago |
|  | |

Attached patch

[limit ChannelMergerNode output channel count](attachment.cgi?id=8400393&action=diff)
— [Details](attachment.cgi?id=8400393&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=990868&attachment=8400393)

[Attachment #8400393](/attachment.cgi?id=8400393&action=edit "limit ChannelMergerNode output channel count") -
Flags: review?(paul)

|  | [Paul Adenot (:padenot)](/user_profile?user_id=404637) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=990868#a22752_404637)• 11 years ago |

[Attachment #8400393](/attachment.cgi?id=8400393&action=edit "limit ChannelMergerNode output channel count") -
Flags: review?(paul) → review+

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=990868#a48936_406194)• 11 years ago |

Keywords: [sec-low](/buglist.cgi?keywords=sec-low&resolution=---)

|  | [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=990868#a77938_274246)• 11 years ago |

Blocks: [991251](/show_bug.cgi?id=991251 "RESOLVED DUPLICATE - Heap-buffer-overflow in mozilla::AudioBlockCopyChannelWithScale triggered with ChannelMergerNode")

|  | [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=990868#a103292_274246)• 11 years ago |

Blocks: [CVE-2014-1542](/show_bug.cgi?id=991533 "VERIFIED FIXED - limit AudioBuffer channel counts and sample rate range")

|  | [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)  Assignee |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=990868#c2)• 11 years ago |
|  | |

Had to change some uint32\_t array sizes/indexes to size\_t due to changes from [bug 1004098](/show_bug.cgi?id=1004098 "RESOLVED FIXED - Make nsTArray use size_t in its interface (32bitness is fine as an internal detail)").
<https://hg.mozilla.org/integration/mozilla-inbound/rev/28f1a546126f>Flags: in-testsuite?

|  | [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)  Assignee |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=990868#c3)• 11 years ago |
|  | |

Comment on [attachment 8400393](/attachment.cgi?id=8400393 "limit ChannelMergerNode output channel count") [[details]](/attachment.cgi?id=8400393&action=edit "limit ChannelMergerNode output channel count") [[diff]](/attachment.cgi?id=8400393&action=diff "limit ChannelMergerNode output channel count") [[review]](/page.cgi?id=splinter.html&ignore=&bug=990868&attachment=8400393)
limit ChannelMergerNode output channel count
[Approval Request Comment]
Requesting approval for this patch as part of fixing [bug 990868](/show_bug.cgi?id=990868 "VERIFIED FIXED - limit ChannelMergerNode output channel count").
Bug caused by (feature/regressing bug #):
The security issue that I'm concerned about here is [bug 987679](/show_bug.cgi?id=987679 "VERIFIED FIXED - ASAN: Heap-buffer-overflow in speex_resampler_process_native triggered with AudioBufferSourceNode"), which could be triggered using WaveShaperNode.oversample since [Bug 875277](/show_bug.cgi?id=875277 "RESOLVED FIXED - Implement WaveShaperNode.oversample") landed in 26.
User impact if declined: Possible sec-critical.
Testing completed (on m-c, etc.): on m-i, requesting approval to land once merged to m-c.
Risk to taking this patch (and alternatives if risky): low.
String or IDL/UUID changes made by this patch: none.
[Attachment #8400393](/attachment.cgi?id=8400393&action=edit "limit ChannelMergerNode output channel count") -
Flags: approval-mozilla-beta?
[Attachment #8400393](/attachment.cgi?id=8400393&action=edit "limit ChannelMergerNode output channel count") -
Flags: approval-mozilla-b2g28?
[Attachment #8400393](/attachment.cgi?id=8400393&action=edit "limit ChannelMergerNode output channel count") -
Flags: approval-mozilla-b2g26?
[Attachment #8400393](/attachment.cgi?id=8400393&action=edit "limit ChannelMergerNode output channel count") -
Flags: approval-mozilla-aurora?

|  | [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)  Assignee |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=990868#c4)• 11 years ago |
|  | |

The version to land on branches is the one reviewed here ([attachment 8400393](/attachment.cgi?id=8400393 "limit ChannelMergerNode output channel count") [[details]](/attachment.cgi?id=8400393&action=edit "limit ChannelMergerNode output channel count") [[diff]](/attachment.cgi?id=8400393&action=diff "limit ChannelMergerNode output channel count") [[review]](/page.cgi?id=splinter.html&ignore=&bug=990868&attachment=8400393)), without the size\_t changes on m-c/32.Whiteboard: [don't transplant m-c changeset to branches]

|  | [Sylvestre Ledru [:Sylvestre]](/user_profile?user_id=495955) |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=990868#c5)• 11 years ago |
|  | |

Karl, does it impact ESR? Thanks
[status-firefox29](/buglist.cgi?f1=cf_status_firefox29&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=%3F)
[status-firefox30](/buglist.cgi?f1=cf_status_firefox30&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=affected)
[status-firefox31](/buglist.cgi?f1=cf_status_firefox31&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=affected)
[status-firefox32](/buglist.cgi?f1=cf_status_firefox32&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox32&o1=equals&v1=affected)
[status-firefox-esr24](/buglist.cgi?f1=cf_status_firefox_esr24&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=%3F)Flags: needinfo?(karlt)

|  | [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)  Assignee |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=990868#c6)• 11 years ago |
|  | |

Only versions 26 and later are affected, so ESR24 is not affected.
[status-firefox-esr24](/buglist.cgi?f1=cf_status_firefox_esr24&o1=isnotempty):
[?](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=%3F) → [unaffected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=unaffected)Flags: needinfo?(karlt)

|  | [Lukas Blakk [:lsblakk] use ?needinfo](/user_profile?user_id=272375) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=990868#a4112986_272375)• 11 years ago |

[status-firefox29](/buglist.cgi?f1=cf_status_firefox29&o1=isnotempty):
[?](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=%3F) → [affected](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=affected)

|  | [Lukas Blakk [:lsblakk] use ?needinfo](/user_profile?user_id=272375) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=990868#a4113000_272375)• 11 years ago |

[Attachment #8400393](/attachment.cgi?id=8400393&action=edit "limit ChannelMergerNode output channel count") -
Flags: approval-mozilla-beta?
[Attachment #8400393](/attachment.cgi?id=8400393&action=edit "limit ChannelMergerNode output channel count") -
Flags: approval-mozilla-beta+
[Attachment #8400393](/attachment.cgi?id=8400393&action=edit "limit ChannelMergerNode output channel count") -
Flags: approval-mozilla-aurora?
[Attachment #8400393](/attachment.cgi?id=8400393&action=edit "limit ChannelMergerNode output channel count") -
Flags: approval-mozilla-aurora+

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=990868#c7)• 11 years ago |
|  | |

This was merged last Friday.
<https://hg.mozilla.org/mozilla-central/rev/28f1a546126f>Status: ASSIGNED → RESOLVEDClosed: 11 years ago
[status-b2g-v1.2](/buglist.cgi?f1=cf_status_b2g_1_2&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=wontfix)
[status-b2g-v1.3](/buglist.cgi?f1=cf_status_b2g_1_3&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=wontfix)
[status-b2g-v1.3T](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=wontfix)
[status-b2g-v1.4](/buglist.cgi?f1=cf_status_b2g_1_4&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=affected)
[status-b2g-v2.0](/buglist.cgi?f1=cf_status_b2g_2_0&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_b2g_2_0&o1=equals&v1=fixed)
[status-firefox29](/buglist.cgi?f1=cf_status_firefox29&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=wontfix)
[status-firefox32](/buglist.cgi?f1=cf_status_firefox32&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox32&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox32&o1=equals&v1=fixed)Resolution: --- → FIXEDTarget Milestone: --- → mozilla32

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=990868#c8)• 11 years ago |
|  | |

Comment on [attachment 8400393](/attachment.cgi?id=8400393 "limit ChannelMergerNode output channel count") [[details]](/attachment.cgi?id=8400393&action=edit "limit ChannelMergerNode output channel count") [[diff]](/attachment.cgi?id=8400393&action=diff "limit ChannelMergerNode output channel count") [[review]](/page.cgi?id=splinter.html&ignore=&bug=990868&attachment=8400393)
limit ChannelMergerNode output channel count
sec-lows aren't being approved for the B2G release branches
[Attachment #8400393](/attachment.cgi?id=8400393&action=edit "limit ChannelMergerNode output channel count") -
Flags: approval-mozilla-b2g28?
[Attachment #8400393](/attachment.cgi?id=8400393&action=edit "limit ChannelMergerNode output channel count") -
Flags: approval-mozilla-b2g26?

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=990868#c9)• 11 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-aurora/rev/1e0fc97c0b28>
<https://hg.mozilla.org/releases/mozilla-beta/rev/20143f06748b>
[status-firefox30](/buglist.cgi?f1=cf_status_firefox30&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=fixed)
[status-firefox31](/buglist.cgi?f1=cf_status_firefox31&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=fixed)Whiteboard: [don't transplant m-c changeset to branches]

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=990868#c10)• 11 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-b2g30_v1_4/rev/20143f06748b>
[status-b2g-v1.4](/buglist.cgi?f1=cf_status_b2g_1_4&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=fixed)

|  | [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)  Assignee |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=990868#c11)• 11 years ago |
|  | |

Changing to sec-critical as this is part of fixing [bug 991533](/show_bug.cgi?id=991533 "VERIFIED FIXED - limit AudioBuffer channel counts and sample rate range"), which is now necessary to avoid sec-critical [bug 987679](/show_bug.cgi?id=987679 "VERIFIED FIXED - ASAN: Heap-buffer-overflow in speex_resampler_process_native triggered with AudioBufferSourceNode").Keywords: [sec-low](/buglist.cgi?keywords=sec-low&resolution=---) → [sec-critical](/buglist.cgi?keywords=sec-critical&resolution=---)

|  | [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=990868#a4218813_274246)• 11 years ago |

[Attachment #8400393](/attachment.cgi?id=8400393&action=edit "limit ChannelMergerNode output channel count") -
Flags: approval-mozilla-b2g28?
[Attachment #8400393](/attachment.cgi?id=8400393&action=edit "limit ChannelMergerNode output channel count") -
Flags: approval-mozilla-b2g26?

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=990868#c12)• 11 years ago |
|  | |

Well in that case!
<https://hg.mozilla.org/releases/mozilla-b2g28_v1_3/rev/fce835f24818>
<https://hg.mozilla.org/releases/mozilla-b2g26_v1_2/rev/d5f64dbd1400>
[status-b2g-v1.2](/buglist.cgi?f1=cf_status_b2g_1_2&o1=isnotempty):
[wontfix](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=wontfix) → [fixed](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=fixed)
[status-b2g-v1.3](/buglist.cgi?f1=cf_status_b2g_1_3&o1=isnotempty):
[wontfix](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=wontfix) → [fixed](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=fixed)
[status-b2g-v1.3T](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=isnotempty):
[wontfix](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=wontfix) → [affected](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=affected)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=990868#c13)• 11 years ago |
|  | |

Comment on [attachment 8400393](/attachment.cgi?id=8400393 "limit ChannelMergerNode output channel count") [[details]](/attachment.cgi?id=8400393&action=edit "limit ChannelMergerNode output channel count") [[diff]](/attachment.cgi?id=8400393&action=diff "limit ChannelMergerNode output channel count") [[review]](/page.cgi?id=splinter.html&ignore=&bug=990868&attachment=8400393)
limit ChannelMergerNode output channel count
FWIW, sec-crits don't need approval for uplift to the B2G release branches per the B2G Landing Page.
<https://wiki.mozilla.org/Release_Management/B2G_Landing>
[Attachment #8400393](/attachment.cgi?id=8400393&action=edit "limit ChannelMergerNode output channel count") -
Flags: approval-mozilla-b2g28?
[Attachment #8400393](/attachment.cgi?id=8400393&action=edit "limit ChannelMergerNode output channel count") -
Flags: approval-mozilla-b2g26?

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=990868#a4358543_75935)• 11 years ago |

[status-b2g-v1.3T](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=fixed)

|  | [Matt Wobensmith [:mwobensmith][:matt:]](/user_profile?user_id=452604) |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=990868#c14)• 11 years ago |
|  | |

Does anyone have a suggestion on how to verify this sec-critical bug fix? Thanks.

|  | [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)  Assignee |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=990868#c15)• 11 years ago |
|  | |

(In reply to Matt Wobensmith from [comment #14](/show_bug.cgi?id=990868#c14 "VERIFIED FIXED - limit ChannelMergerNode output channel count"))
> Does anyone have a suggestion on how to verify this sec-critical bug fix?
The testcase in [comment 990794](/show_bug.cgi?id=990868#c990794 "VERIFIED FIXED - limit ChannelMergerNode output channel count") should no longer crash.
(That's not the sec-critical part of this bug but would verify that the patch is doing what it should.)

|  | [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)  Assignee |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=990868#c16)• 11 years ago |
|  | |

I mean [bug 990794](/show_bug.cgi?id=990794 "RESOLVED FIXED - heap overflow write from allocation size overflow in AllocateAudioBlock").

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=990868#a5520964_280903)• 11 years ago |

Whiteboard: [adv-main30+]

|  | [Matt Wobensmith [:mwobensmith][:matt:]](/user_profile?user_id=452604) |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=990868#c17)• 11 years ago |
|  | |

Thanks Karl.
On Fx30 from 2014-05-15 (pre-fix) I don't see a crash, but I do get a hang on close that requires a force quit.
On Fx30/Fx31/Fx32 from 2014-06-02, no crash and program exits smoothly.
I'm going to consider this verified unless there are objections.Status: RESOLVED → VERIFIED
[status-firefox30](/buglist.cgi?f1=cf_status_firefox30&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=verified)
[status-firefox31](/buglist.cgi?f1=cf_status_firefox31&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=verified)
[status-firefox32](/buglist.cgi?f1=cf_status_firefox32&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox32&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox32&o1=equals&v1=verified)

|  | [Justin Wood (:Callek)](/user_profile?user_id=129968) |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=990868#c18)• 11 years ago |
|  | |

fixed on SeaMonkey 2.26.1 (based on Gecko 29)
<https://hg.mozilla.org/releases/mozilla-release/rev/7a22ed0a3752>
[status-seamonkey2.26](/buglist.cgi?f1=cf_status_seamonkey226&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_seamonkey226&o1=equals&v1=fixed)

|  | [Justin Wood (:Callek)](/user_profile?user_id=129968) |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=990868#c19)• 11 years ago |
|  | |

(In reply to Justin Wood (:Callek) from [comment #18](/show_bug.cgi?id=990868#c18 "VERIFIED FIXED - limit ChannelMergerNode output channel count"))
> fixed on SeaMonkey 2.26.1 (based on Gecko 29)
>
> <https://hg.mozilla.org/releases/mozilla-release/rev/7a22ed0a3752>
err nope, couldn't get this to apply + pass tests, and that rev is a different bug
[status-seamonkey2.26](/buglist.cgi?f1=cf_status_seamonkey226&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_seamonkey226&o1=equals&v1=fixed) → [wontfix](/buglist.cgi?f1=cf_status_seamonkey226&o1=equals&v1=wontfix)

|  | [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)  Assignee |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=990868#c20)• 10 years ago |
|  | |

<https://hg.mozilla.org/integration/mozilla-inbound/rev/4ce8894b2876>Group: core-securityFlags: in-testsuite? → in-testsuite+
You need to [log in](/show_bug.cgi?id=990868&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from bugzilla.mozilla.org_a2cee428_20250124_132135.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/996536)
* [XML](/show_bug.cgi?ctype=xml&id=996536)

Closed
[Bug 996536](/show_bug.cgi?id=996536)

Opened 11 years ago
Closed 11 years ago

# Assertion failure: isInterpretedLazy() && u.i.s.lazy\_, at jsfun.h:328 or Crash [@ JSFunction::lazyScript] or Crash [@ js::ExclusiveContext::getNewType] with gcPreserveCode

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

Assertion failure: isInterpretedLazy() && u.i.s.lazy\_, at jsfun.h:328 or Crash [@ JSFunction::lazyScript] or Crash [@ js::ExclusiveContext::getNewType] with gcPreserveCode

## Categories

### (Core :: JavaScript Engine, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=JavaScript%20Engine#JavaScript%20Engine)

JavaScript Engine
▾

Core :: JavaScript Engine
The interpreter engine for the core JavaScript language, independent of the browser's object model. File ONLY core JavaScript language bugs in this category. For bugs involving browser objects such as "window" and "document", use the "DOM" component. For bugs involving calls between JavaScript and C++, use the "XPConnect" component.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=JavaScript%20Engine)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

x86\_64

Linux

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

critical

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla31

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Performance Impact | --- |
| --- | --- |
| Webcompat Score | --- |
| Accessibility Severity | --- |
| Webcompat Priority | --- |
| a11y-review | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox29 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=wontfix) |
| firefox30 | --- | [verified](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=verified) |
| firefox31 | --- | [verified](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=verified) |
| firefox-esr24 | --- | [unaffected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=unaffected) |
| b2g-v1.3 | --- | [wontfix](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=wontfix) |
| b2g-v1.4 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=fixed) |
| b2g-v2.0 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_2_0&o1=equals&v1=fixed) |
| seamonkey2.26 | --- | [fixed](/buglist.cgi?f1=cf_status_seamonkey226&o1=equals&v1=fixed) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox29 |  | wontfix |
| firefox30 |  | verified |
| firefox31 |  | verified |
| firefox-esr24 |  | unaffected |
| b2g-v1.3 |  | wontfix |
| b2g-v1.4 |  | fixed |
| b2g-v2.0 |  | fixed |
| relnote-firefox |  | --- |
| seamonkey2.26 |  | fixed |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: decoder, Assigned: till)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/38540f0209aedc2e6447044c25bc0e9c?d=mm&size=40)  [till](/user_profile?user_id=292831)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/b29b83d12aba827b8ff68296e473bec5?d=mm&size=40)  [decoder](/user_profile?user_id=395101)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/4fe52ee1503aecf7b6c976b8eb7c1753?d=mm&size=40)  [willyelm](/user_profile?user_id=714609)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

11 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

---

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (4 keywords, Whiteboard: [jsbugmon:update][adv-main30+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[assertion](/buglist.cgi?keywords=assertion&resolution=---),
[crash](/buglist.cgi?keywords=crash&resolution=---),
[sec-low](/buglist.cgi?keywords=sec-low&resolution=---),
[testcase](/buglist.cgi?keywords=testcase&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[jsbugmon:update][adv-main30+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | in-testsuite |  |
|  | qe-verify |  |

## Crash Data

Signature:

[[@ JSFunction::lazyScript ]](https://crash-stats.mozilla.org/signature/?signature=JSFunction%3A%3AlazyScript)

[[@ js::ExclusiveContext::getNewType ]](https://crash-stats.mozilla.org/signature/?signature=js%3A%3AExclusiveContext%3A%3AgetNewType)

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (2 files)

| [[crash-signature] Machine-readable crash signature](/attachment.cgi?id=8406770)  [11 years ago](#c1)  [Christian Holler (:decoder)](/user_profile?user_id=395101)   1.05 KB, text/plain |  | [Details](/attachment.cgi?id=8406770&action=edit) |
| --- | --- | --- |
| [Don't assume that all interpretedLazy functions have a lazyScript](/attachment.cgi?id=8411339)  [11 years ago](#c7)  [Till Schneidereit [:till]](/user_profile?user_id=292831)   1.15 KB, patch | bhackett1024 : [review+](#a793158_346231 "11 years ago")  lsblakk : [approval-mozilla-aurora+](#a1098254_272375 "11 years ago") | [Details](/attachment.cgi?id=8411339&action=edit) | [Diff](/attachment.cgi?id=8411339&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=996536&attachment=8411339) |

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=996536#c0)• 11 years ago |
|  | |

The following testcase asserts on mozilla-central revision 5b6e82e7bbbf (run with --fuzzing-safe --ion-eager):
gcPreserveCode();
var lfcode = new Array();
lfcode.push = loadFile;
lfcode.push("\
function f() {}\
res = new f();\
var otherGlobalDifferentCompartment = newGlobal();\
eval = otherGlobalDifferentCompartment.eval;\
assertEq(res[(27)], otherGlobalDifferentCompartment);\
");
lfcode.push("setObjectMetadataCallback(function(obj) {});");
lfcode.push("gczeal(2,1);");
lfcode.push("var obj = new Intl.DateTimeFormat();");
function loadFile(lfVarx) {
try {
eval(lfVarx);
} catch (lfVare) {}
}

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=996536#c1)• 11 years ago |
|  | |

Attached file
[[crash-signature] Machine-readable crash signature](attachment.cgi?id=8406770)
— [Details](attachment.cgi?id=8406770&action=edit)

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=996536#c2)• 11 years ago |
|  | |

Crash trace:
Program received signal SIGSEGV, Segmentation fault.
js::ExclusiveContext::getNewType (this=0x15b84d0, clasp=<optimized out>, proto=..., fun=0x7ffff4f845e0) at js/src/jsinfer.cpp:3802
3802 fun = fun->lazyScript()->functionNonDelazifying();
#0 js::ExclusiveContext::getNewType (this=0x15b84d0, clasp=<optimized out>, proto=..., fun=0x7ffff4f845e0) at js/src/jsinfer.cpp:3802
#1 0x0000000000760d76 in js::CreateThisForFunctionWithProto (cx=<optimized out>, callee=..., proto=<optimized out>, newKind=js::GenericObject) at js/src/jsobj.cpp:1566
[...]
#5 0x000000000159a2e0 in js::jit::CreateThisInfoCodeGen ()
rax 0x0 0
=> 0x72abd5 <js::ExclusiveContext::getNewType(js::Class const\*, js::TaggedProto, JSFunction\*)+389>: mov 0x8(%rax),%r13
The crash is near null but the test involves preserving code across GCs, so assuming this could be a GC issue and therefore s-s.Crash Signature: [@ JSFunction::lazyScript]
[status-firefox31](/buglist.cgi?f1=cf_status_firefox31&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=affected)Keywords: [crash](/buglist.cgi?keywords=crash&resolution=---)Whiteboard: [jsbugmon:update,bisect]

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=996536#a4431_395101)• 11 years ago |

Whiteboard: [jsbugmon:update,bisect] → [jsbugmon:update]

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=996536#c3)• 11 years ago |
|  | |

JSBugMon: Bisection requested, result:
autoBisect shows this is probably related to the following changeset:
The first bad revision is:
changeset: <http://hg.mozilla.org/mozilla-central/rev/bec71542c055>
user: Brian Hackett
date: Sat Dec 14 16:29:43 2013 -0800
summary: [Bug 950118](/show_bug.cgi?id=950118 "RESOLVED FIXED - Don't allow the object metadata hook to reenter JS") - Don't allow the object metadata hook to reenter JS, r=jimb.
This iteration took 178.912 seconds to run.

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=996536#c4)• 11 years ago |
|  | |

Needinfo from bhackett based on [comment 3](/show_bug.cgi?id=996536#c3 "VERIFIED FIXED - Assertion failure: isInterpretedLazy() && u.i.s.lazy_, at jsfun.h:328 or Crash [@ JSFunction::lazyScript] or Crash [@ js::ExclusiveContext::getNewType] with gcPreserveCode") :)Flags: needinfo?(bhackett1024)

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034) |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=996536#c5)• 11 years ago |
|  | |

Slightly smaller testcase (just so we can land one more testcase):
s = newGlobal()
evalcx("\
[...(function(){ yield })()];\
gc();\
for(v of Iterator(1)) {}\
for(v of Iterator(1)) {}\
", s)
gcPreserveCode();
gc();
evalcx("for(x of (function() { yield })()) {}", s)

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=996536#a138845_132034)• 11 years ago |

Crash Signature: [@ JSFunction::lazyScript] → [@ JSFunction::lazyScript]
[@ js::ExclusiveContext::getNewType]Summary: Assertion failure: isInterpretedLazy() && u.i.s.lazy\_, at jsfun.h:328 or Crash [@ JSFunction::lazyScript] with gcPreserveCode → Assertion failure: isInterpretedLazy() && u.i.s.lazy\_, at jsfun.h:328 or Crash [@ JSFunction::lazyScript] or Crash [@ js::ExclusiveContext::getNewType] with gcPreserveCode

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=996536#c6)• 11 years ago |
|  | |

Sounds sketchy, so I'm marking this sec-high. Feel free to clear the rating or whatever if it isn't a sec problem.Keywords: [sec-high](/buglist.cgi?keywords=sec-high&resolution=---)

|  | [Till Schneidereit [:till]](/user_profile?user_id=292831)  Assignee |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=996536#c7)• 11 years ago |
|  | |

Attached patch

[Don't assume that all interpretedLazy functions have a lazyScript](attachment.cgi?id=8411339&action=diff)
— [Details](attachment.cgi?id=8411339&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=996536&attachment=8411339)

This ended up being quite trivial: fun->isInterpretedLazy() returning true doesn't guarantee that the function has a lazyScript: self-hosted builtins are interpretedLazy, but don't have one.
I hope setting fun to null is ok for self-hosted builtins. It seems to me like it should be: for one, we don't (yet) use many self-hosted constructors. Also, a self-hosted function being lazy should mean that we don't have type information for it anyway, right?
Finally, I doubt that this is sec-high, as a release build should just crash when trying to dereference lazyScript, which should always be null in this scenario.
[Attachment #8411339](/attachment.cgi?id=8411339&action=edit "Don't assume that all interpretedLazy functions have a lazyScript") -
Flags: review?(bhackett1024)

|  | [Till Schneidereit [:till]](/user_profile?user_id=292831)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=996536#a728353_292831)• 11 years ago |

Assignee: nobody → tillStatus: NEW → ASSIGNED

|  | [Brian Hackett [Laid off!]](/user_profile?user_id=346231) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=996536#a793158_346231)• 11 years ago |

[Attachment #8411339](/attachment.cgi?id=8411339&action=edit "Don't assume that all interpretedLazy functions have a lazyScript") -
Flags: review?(bhackett1024) → review+

|  | [Till Schneidereit [:till]](/user_profile?user_id=292831)  Assignee |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=996536#c8)• 11 years ago |
|  | |

Hmm, so this has been in the tree since Dec 11 2013[1]. The changes in [bug 886193](/show_bug.cgi?id=886193 "RESOLVED FIXED - Re-lazify non-JITted JSFunctions on GC") have probably made it much easier to trigger, but even that is mid-January.
Given that, should we uplift to Aurora and Beta? I don't think it's that much of a security issue, but maybe uplifting to at least Aurora makes sense. Especially considering that it's a trivial patch.
[1]: <http://hg.mozilla.org/mozilla-central/rev/52021335eb42>Flags: needinfo?(bhackett1024) → needinfo?(continuation)

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=996536#c9)• 11 years ago |
|  | |

Yeah, if it is going to always be a null deref, I wouldn't worry about beta. We're super late in beta anyways. I guess it could avoid some crashes, so it might be nice for Aurora, though if that particular crash isn't showing up on crash-stats, maybe that's not worth the hassle either.Flags: needinfo?(continuation)Keywords: [sec-high](/buglist.cgi?keywords=sec-high&resolution=---) → [sec-low](/buglist.cgi?keywords=sec-low&resolution=---)

|  | [Till Schneidereit [:till]](/user_profile?user_id=292831)  Assignee |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=996536#c10)• 11 years ago |
|  | |

remote: <https://hg.mozilla.org/integration/mozilla-inbound/rev/4441b7c2b10b>
I didn't find any crashes with this signature at all, so I'm going to assume that this doesn't really happen in the wild for now. Should we find any, we could still uplift, as the fix is unlikely to need any changes whatsoever in the foreseeable future.

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=996536#c11)• 11 years ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/4441b7c2b10b>
If the patch is low-risk, I'd vote for uplifting to Fx30, FWIW.Status: ASSIGNED → RESOLVEDClosed: 11 years ago
[status-b2g-v2.0](/buglist.cgi?f1=cf_status_b2g_2_0&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_b2g_2_0&o1=equals&v1=fixed)
[status-firefox29](/buglist.cgi?f1=cf_status_firefox29&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=wontfix)
[status-firefox30](/buglist.cgi?f1=cf_status_firefox30&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=affected)
[status-firefox31](/buglist.cgi?f1=cf_status_firefox31&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=fixed)Resolution: --- → FIXEDTarget Milestone: --- → mozilla31

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=996536#a899571_395101)• 11 years ago |

Status: RESOLVED → VERIFIEDCrash Signature: [@ JSFunction::lazyScript]
[@ js::ExclusiveContext::getNewType] → [@ JSFunction::lazyScript]
[@ js::ExclusiveContext::getNewType]

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=996536#c12)• 11 years ago |
|  | |

JSBugMon: This bug has been automatically verified fixed.

|  | [Till Schneidereit [:till]](/user_profile?user_id=292831)  Assignee |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=996536#c13)• 11 years ago |
|  | |

Comment on [attachment 8411339](/attachment.cgi?id=8411339 "Don't assume that all interpretedLazy functions have a lazyScript") [[details]](/attachment.cgi?id=8411339&action=edit "Don't assume that all interpretedLazy functions have a lazyScript") [[diff]](/attachment.cgi?id=8411339&action=diff "Don't assume that all interpretedLazy functions have a lazyScript") [[review]](/page.cgi?id=splinter.html&ignore=&bug=996536&attachment=8411339)
Don't assume that all interpretedLazy functions have a lazyScript
># HG changeset patch
># User Till Schneidereit <till@tillschneidereit.net>
># Date 1398287217 -7200
># Wed Apr 23 23:06:57 2014 +0200
># Node ID 356711ada1c76b3d97cd66d08d771209c2e42bb3
># Parent ddcccb78254943e7836dde2d31339baffa2d1c1c
>[Bug 996536](/show_bug.cgi?id=996536 "VERIFIED FIXED - Assertion failure: isInterpretedLazy() && u.i.s.lazy_, at jsfun.h:328 or Crash [@ JSFunction::lazyScript] or Crash [@ js::ExclusiveContext::getNewType] with gcPreserveCode") - Don't assume that all interpretedLazy functions have a lazyScript. r=bhackett
>
>diff --git a/js/src/jsinfer.cpp b/js/src/jsinfer.cpp
>--- a/js/src/jsinfer.cpp
>+++ b/js/src/jsinfer.cpp
>@@ -3848,17 +3848,17 @@ ExclusiveContext::getNewType(const Class
>
> if (!newTypeObjects.initialized() && !newTypeObjects.init())
> return nullptr;
>
> // Canonicalize new functions to use the original one associated with its script.
> if (fun) {
> if (fun->hasScript())
> fun = fun->nonLazyScript()->functionNonDelazifying();
>- else if (fun->isInterpretedLazy())
>+ else if (fun->isInterpretedLazy() && !fun->isSelfHostedBuiltin())
> fun = fun->lazyScript()->functionNonDelazifying();
> else
> fun = nullptr;
> }
>
> TypeObjectWithNewScriptSet::AddPtr p =
> newTypeObjects.lookupForAdd(TypeObjectWithNewScriptSet::Lookup(clasp, proto, fun));
> if (p) {
[Attachment #8411339](/attachment.cgi?id=8411339&action=edit "Don't assume that all interpretedLazy functions have a lazyScript") -
Flags: approval-mozilla-aurora?

|  | [Lukas Blakk [:lsblakk] use ?needinfo](/user_profile?user_id=272375) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=996536#a1098254_272375)• 11 years ago |

[Attachment #8411339](/attachment.cgi?id=8411339&action=edit "Don't assume that all interpretedLazy functions have a lazyScript") -
Flags: approval-mozilla-aurora? → approval-mozilla-aurora+

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=996536#c14)• 11 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-aurora/rev/3debec91f196>Crash Signature: [@ JSFunction::lazyScript]
[@ js::ExclusiveContext::getNewType] → [@ JSFunction::lazyScript]
[@ js::ExclusiveContext::getNewType]
[status-b2g-v1.3](/buglist.cgi?f1=cf_status_b2g_1_3&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=wontfix)
[status-b2g-v1.4](/buglist.cgi?f1=cf_status_b2g_1_4&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=fixed)
[status-firefox30](/buglist.cgi?f1=cf_status_firefox30&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=fixed)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=996536#a2641959_280903)• 11 years ago |

[status-firefox-esr24](/buglist.cgi?f1=cf_status_firefox_esr24&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=unaffected)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=996536#a4191804_280903)• 11 years ago |

Whiteboard: [jsbugmon:update] → [jsbugmon:update][adv-main30+]

|  | [Justin Wood (:Callek)](/user_profile?user_id=129968) |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=996536#c15)• 11 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-release/rev/28a81d11f8db>
[status-seamonkey2.26](/buglist.cgi?f1=cf_status_seamonkey226&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_seamonkey226&o1=equals&v1=fixed)

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=996536#a5051540_395101)• 11 years ago |

Crash Signature: [@ JSFunction::lazyScript]
[@ js::ExclusiveContext::getNewType] → [@ JSFunction::lazyScript]
[@ js::ExclusiveContext::getNewType]
[status-firefox30](/buglist.cgi?f1=cf_status_firefox30&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=verified)

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=996536#c16)• 11 years ago |
|  | |

JSBugMon: This bug has been automatically verified fixed on Fx30

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=996536#a5113775_395101)• 11 years ago |

[status-firefox31](/buglist.cgi?f1=cf_status_firefox31&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=verified)

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=996536#c17)• 11 years ago |
|  | |

JSBugMon: This bug has been automatically verified fixed on Fx31

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=996536#a43402733_1689)• 9 years ago |

Group: core-security
You need to [log in](/show_bug.cgi?id=996536&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Christian Holler (:decoder)](/user_profile?user_id=395101)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from bugzilla.mozilla.org_167a711f_20250124_132132.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/995816)
* [XML](/show_bug.cgi?ctype=xml&id=995816)

Closed
[Bug 995816](/show_bug.cgi?id=995816)

Opened 11 years ago
Closed 11 years ago

# Differential Testing: Different output message involving gc

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

Differential Testing: Different output message involving gc

## Categories

### (Core :: JavaScript Engine: JIT, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=JavaScript%20Engine%3A%20JIT#JavaScript%20Engine%3A%20JIT)

JavaScript Engine: JIT
▾

Core :: JavaScript Engine: JIT
JavaScript engine's JIT compilers
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine%3A%20JIT&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine%3A%20JIT&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=JavaScript%20Engine%3A%20JIT)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

x86\_64

macOS

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

major

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla31

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| a11y-review | --- |
| --- | --- |
| Performance Impact | --- |
| Accessibility Severity | --- |
| Webcompat Priority | --- |
| Webcompat Score | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox28 | --- | [unaffected](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=unaffected) |
| firefox29 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=wontfix) |
| firefox30 | --- | [fixed](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=fixed) |
| firefox31 | --- | [verified](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=verified) |
| firefox32 | --- | [verified](/buglist.cgi?f1=cf_status_firefox32&o1=equals&v1=verified) |
| firefox33 | --- | [verified](/buglist.cgi?f1=cf_status_firefox33&o1=equals&v1=verified) |
| firefox-esr24 | --- | [unaffected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=unaffected) |
| b2g-v1.2 | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=unaffected) |
| b2g-v1.3 | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=unaffected) |
| b2g-v1.3T | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=unaffected) |
| b2g-v1.4 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=fixed) |
| b2g-v2.0 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_2_0&o1=equals&v1=fixed) |
| seamonkey2.26 | --- | [wontfix](/buglist.cgi?f1=cf_status_seamonkey226&o1=equals&v1=wontfix) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox28 |  | unaffected |
| firefox29 |  | wontfix |
| firefox30 |  | fixed |
| firefox31 |  | verified |
| firefox32 |  | verified |
| firefox33 |  | verified |
| firefox-esr24 |  | unaffected |
| b2g-v1.2 |  | unaffected |
| b2g-v1.3 |  | unaffected |
| b2g-v1.3T |  | unaffected |
| b2g-v1.4 |  | fixed |
| b2g-v2.0 |  | fixed |
| relnote-firefox |  | --- |
| seamonkey2.26 |  | wontfix |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: gkw, Assigned: nbp)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/f78625fe5901300b4689355a8e507ea2?d=mm&size=40)  [nbp](/user_profile?user_id=422187)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](extensions/Gravatar/web/default.jpg)  [gkw](/user_profile?user_id=132034)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/4fe52ee1503aecf7b6c976b8eb7c1753?d=mm&size=40)  [willyelm](/user_profile?user_id=714609)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

12 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

[995817](/show_bug.cgi?id=995817 "VERIFIED FIXED - Differential Testing: Incorrect result when division-by-zero is used in an indirectly-truncated context")

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[950006](/show_bug.cgi?id=950006 "RESOLVED FIXED - GC: Don't skip zeal GCs")

Dependency [tree](/showdependencytree.cgi?id=995816&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=995816)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Keywords: regression, sec-high, testcase, Whiteboard: [adv-main30+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[regression](/buglist.cgi?keywords=regression&resolution=---),
[sec-high](/buglist.cgi?keywords=sec-high&resolution=---),
[testcase](/buglist.cgi?keywords=testcase&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[adv-main30+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | in-testsuite |  |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=995816#c0)• 11 years ago |
|  | |

let t;
(function() {
f = (function() {
return (1 + -1 / 0) | 0
})
})()
f()
gc()
print(f())
$ ./js-opt-64-dm-ts-darwin-ebdf2740dc3e --fuzzing-safe --ion-parallel-compile=off 2375.js
0
$ ./js-opt-64-dm-ts-darwin-ebdf2740dc3e --fuzzing-safe --ion-parallel-compile=off --ion-eager 2375.js
1
My configure flags are:
CC="clang -Qunused-arguments" CXX="clang++ -Qunused-arguments" AR=ar sh /Users/skywalker/trees/mozilla-central/js/src/configure --target=x86\_64-apple-darwin12.5.0 --enable-optimize --disable-debug --enable-profiling --enable-gczeal --enable-debug-symbols --disable-tests --enable-more-deterministic --with-ccache --enable-threadsafe <other NSPR options>
autoBisect shows this is probably related to the following changeset:
The first bad revision is:
changeset: <http://hg.mozilla.org/mozilla-central/rev/3bada9bbc132>
user: Jon Coppeard
date: Mon Dec 16 08:57:37 2013 +0000
summary: [Bug 950006](/show_bug.cgi?id=950006 "RESOLVED FIXED - GC: Don't skip zeal GCs") - Don't skip zeal GCs if allocating without the possibility of GC r=billm
Jon, is [bug 950006](/show_bug.cgi?id=950006 "RESOLVED FIXED - GC: Don't skip zeal GCs") a possible regressor?
Setting this s-s just because gc seems to be involved, but I'll grab a random choice and pick sec-high for now - please feel free to change this as necessary.Flags: needinfo?

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=995816#a84_132034)• 11 years ago |

[status-firefox28](/buglist.cgi?f1=cf_status_firefox28&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_firefox28&o1=equals&v1=unaffected)
[status-firefox29](/buglist.cgi?f1=cf_status_firefox29&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=affected)
[status-firefox30](/buglist.cgi?f1=cf_status_firefox30&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=affected)
[status-firefox31](/buglist.cgi?f1=cf_status_firefox31&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=affected)
[status-firefox-esr24](/buglist.cgi?f1=cf_status_firefox_esr24&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=unaffected)Flags: needinfo? → needinfo?(jcoppeard)

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=995816#a111_132034)• 11 years ago |

Severity: critical → major

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)  Reporter |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=995816#c1)• 11 years ago |
|  | |

(Tested this on 64-bit Mac js opt threadsafe deterministic shell off m-c rev ebdf2740dc3e)

|  | [Jon Coppeard (:jonco) (PTO until 27th Jan)](/user_profile?user_id=443194) |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=995816#c2)• 11 years ago |
|  | |

Reproduced. Unlikely to be related to [bug 950006](/show_bug.cgi?id=950006 "RESOLVED FIXED - GC: Don't skip zeal GCs") as there is no GC zeal involved.
As I understand it the computation ((1 + (-1 / 0)) | 0) should be zero in JS, since:
(-1 / 0) => -Infinty
(1 + -Infinty) => -Infinty
(-Infinty | 0) => 0
In the interpreter this is the result produced. However for some reason this is compiled as:
((-1 DivI 0) AddI 1)
Which gives 1. So I guess this is an Ion issue?Flags: needinfo?(jcoppeard)

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297) |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=995816#c3)• 11 years ago |
|  | |

(In reply to Jon Coppeard (:jonco) from [comment #2](/show_bug.cgi?id=995816#c2 "VERIFIED FIXED - Differential Testing: Different output message involving gc"))
> Which gives 1. So I guess this is an Ion issue?
Looks a lot like [bug 995817](/show_bug.cgi?id=995817 "VERIFIED FIXED - Differential Testing: Incorrect result when division-by-zero is used in an indirectly-truncated context")...

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)  Reporter |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=995816#c4)• 11 years ago |
|  | |

I need to retest this after [bug 995817](/show_bug.cgi?id=995817 "VERIFIED FIXED - Differential Testing: Incorrect result when division-by-zero is used in an indirectly-truncated context") landed.Flags: needinfo?(gary)

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)  Reporter |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=995816#c5)• 11 years ago |
|  | |

This is FIXED as of m-i rev f2bd6f0ab761, likely fixed by [bug 995817](/show_bug.cgi?id=995817 "VERIFIED FIXED - Differential Testing: Incorrect result when division-by-zero is used in an indirectly-truncated context").Status: NEW → RESOLVEDClosed: 11 years agoFlags: needinfo?(gary)Resolution: --- → FIXED

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=995816#c6)• 11 years ago |
|  | |

Guessing this is probably wontfix for Beta29 at this point, but we should probably at least get [bug 995817](/show_bug.cgi?id=995817 "VERIFIED FIXED - Differential Testing: Incorrect result when division-by-zero is used in an indirectly-truncated context") on Aurora30.Assignee: nobody → nicolas.b.pierron
[status-b2g-v1.2](/buglist.cgi?f1=cf_status_b2g_1_2&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=unaffected)
[status-b2g-v1.3](/buglist.cgi?f1=cf_status_b2g_1_3&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=unaffected)
[status-b2g-v1.3T](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=unaffected)
[status-b2g-v1.4](/buglist.cgi?f1=cf_status_b2g_1_4&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=affected)
[status-b2g-v2.0](/buglist.cgi?f1=cf_status_b2g_2_0&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_b2g_2_0&o1=equals&v1=fixed)Depends on: [995817](/show_bug.cgi?id=995817 "VERIFIED FIXED - Differential Testing: Incorrect result when division-by-zero is used in an indirectly-truncated context")Flags: needinfo?(nicolas.b.pierron)Target Milestone: --- → mozilla31

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=995816#c7)• 11 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-aurora/rev/1e0fac4a167b>
[status-b2g-v1.4](/buglist.cgi?f1=cf_status_b2g_1_4&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=fixed)
[status-firefox29](/buglist.cgi?f1=cf_status_firefox29&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=wontfix)
[status-firefox30](/buglist.cgi?f1=cf_status_firefox30&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=fixed)
[status-firefox31](/buglist.cgi?f1=cf_status_firefox31&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=fixed)

|  | [Nicolas B. Pierron [:nbp]](/user_profile?user_id=422187)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=995816#a1955605_422187)• 11 years ago |

Flags: needinfo?(nicolas.b.pierron)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=995816#a4318132_280903)• 11 years ago |

Whiteboard: [adv-main30+]

|  | [Matt Wobensmith [:mwobensmith][:matt:]](/user_profile?user_id=452604) |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=995816#c8)• 11 years ago |
|  | |

Confirmed issue on 2014-04-04, Fx30.
Verified fixed on 2014-06-03, Fx30 and Fx31.Status: RESOLVED → VERIFIED
[status-firefox30](/buglist.cgi?f1=cf_status_firefox30&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=verified)
[status-firefox31](/buglist.cgi?f1=cf_status_firefox31&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=verified)

|  | [Matt Wobensmith [:mwobensmith][:matt:]](/user_profile?user_id=452604) |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=995816#c9)• 11 years ago |
|  | |

Actually, removing verified status. Needs to be verified in build made with --enable-more-deterministic. Gary will do this.Status: VERIFIED → RESOLVEDClosed: 11 years ago → 11 years ago
[status-firefox30](/buglist.cgi?f1=cf_status_firefox30&o1=isnotempty):
[verified](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=verified) → [fixed](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=fixed)
[status-firefox31](/buglist.cgi?f1=cf_status_firefox31&o1=isnotempty):
[verified](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=verified) → [fixed](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=fixed)

|  | [Justin Wood (:Callek)](/user_profile?user_id=129968) |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=995816#c10)• 11 years ago |
|  | |

trying to apply this to SeaMonkey 2.26.1 (Gecko 29) resulted in patch conflicts, and due to the nature of this patchset it seems like I won't be able to take it.
[status-seamonkey2.26](/buglist.cgi?f1=cf_status_seamonkey226&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_seamonkey226&o1=equals&v1=wontfix)

|  | [Matt Wobensmith [:mwobensmith][:matt:]](/user_profile?user_id=452604) |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=995816#c11)• 11 years ago |
|  | |

Gary, do you think you have time to do a verify?Flags: needinfo?(gary)

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)  Reporter |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=995816#c12)• 11 years ago |
|  | |

autoBisect shows this is probably related to the following changeset:
The first good revision is:
changeset: <https://hg.mozilla.org/mozilla-central/rev/35e57f348ddf>
user: Nicolas B. Pierron
date: Wed Apr 16 08:31:43 2014 -0700
summary: [Bug 995817](/show_bug.cgi?id=995817 "VERIFIED FIXED - Differential Testing: Incorrect result when division-by-zero is used in an indirectly-truncated context") - Range Analysis: Truncate MDiv indirectly. r=sunfish
Verified on m-c.Status: RESOLVED → VERIFIED
[status-firefox33](/buglist.cgi?f1=cf_status_firefox33&o1=isnotempty):
--- → [verified](/buglist.cgi?f1=cf_status_firefox33&o1=equals&v1=verified)Flags: needinfo?(gary)

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)  Reporter |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=995816#c13)• 11 years ago |
|  | |

Also verified on mozilla-aurora (Fx31) and mozilla-beta (Fx32).
[status-firefox31](/buglist.cgi?f1=cf_status_firefox31&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=verified)
[status-firefox32](/buglist.cgi?f1=cf_status_firefox32&o1=isnotempty):
--- → [verified](/buglist.cgi?f1=cf_status_firefox32&o1=equals&v1=verified)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=995816#a43529489_1689)• 9 years ago |

Group: core-security
You need to [log in](/show_bug.cgi?id=995816&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑



=== Content from bugzilla.mozilla.org_bc19ee75_20250124_132129.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/978652)
* [XML](/show_bug.cgi?ctype=xml&id=978652)

Closed
[Bug 978652](/show_bug.cgi?id=978652)

Opened 11 years ago
Closed 11 years ago

# Navigating while new Workers are queued causes all kinds of trouble

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

Navigating while new Workers are queued causes all kinds of trouble

## Categories

### (Core :: DOM: Workers, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=DOM%3A%20Workers#DOM%3A%20Workers)

DOM: Workers
▾

Core :: DOM: Workers
This component covers the [Web Workers](https://developer.mozilla.org/En/DOM/Worker) implementation in Gecko.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=DOM%3A%20Workers&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=DOM%3A%20Workers&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=DOM%3A%20Workers)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

x86\_64

macOS

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

critical

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla30

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Webcompat Score | --- |
| --- | --- |
| Webcompat Priority | --- |
| Accessibility Severity | --- |
| Performance Impact | --- |
| a11y-review | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox30 | --- | [verified](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=verified) |
| firefox-esr24 | --- | [unaffected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=unaffected) |
| seamonkey2.26 | --- | [wontfix](/buglist.cgi?f1=cf_status_seamonkey226&o1=equals&v1=wontfix) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox30 |  | verified |
| firefox-esr24 |  | unaffected |
| relnote-firefox |  | --- |
| seamonkey2.26 |  | wontfix |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: jruderman, Assigned: bent.mozilla)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/a1dc08fda91b2717842f4b1903da2881?d=mm&size=40)  [bent.mozilla](/user_profile?user_id=200444)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/d2dc9227eafcd0ec5ba3712ee4f19b75?d=mm&size=40)  [jruderman](/user_profile?user_id=11608)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/056757eff6ed7c8ec26f61e3bf7695fe?d=mm&size=40)  [smaug](/user_profile?user_id=39966)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

13 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

---

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (4 keywords, Whiteboard: [fuzzblocker][adv-main30+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[assertion](/buglist.cgi?keywords=assertion&resolution=---),
[crash](/buglist.cgi?keywords=crash&resolution=---),
[sec-high](/buglist.cgi?keywords=sec-high&resolution=---),
[testcase](/buglist.cgi?keywords=testcase&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[fuzzblocker][adv-main30+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | in-testsuite |  |
|  | qe-verify |  |

## Crash Data

Signature:

[[@ PresShell::ClearImageVisibilityVisited ]](https://crash-stats.mozilla.org/signature/?signature=PresShell%3A%3AClearImageVisibilityVisited)

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (1 file, 1 obsolete file)

| [testcase](/attachment.cgi?id=8384407)  [11 years ago](#c0)  [Jesse Ruderman](/user_profile?user_id=11608)   451 bytes, text/html |  | [Details](/attachment.cgi?id=8384407&action=edit) |
| --- | --- | --- |
| [testcase v2](/attachment.cgi?id=8390479)  [11 years ago](#c3)  [Jesse Ruderman](/user_profile?user_id=11608)   455 bytes, text/html |  | [Details](/attachment.cgi?id=8390479&action=edit) |

Show Obsolete

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Jesse Ruderman](/user_profile?user_id=11608)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=978652#c0)• 11 years ago |
|  | |

Attached file
[testcase](attachment.cgi?id=8384407) (obsolete)
— [Details](attachment.cgi?id=8384407&action=edit)

When I load the testcase, one or more things goes wrong:
Crash [@ PresShell::ClearImageVisibilityVisited]
###!!! ASSERTION: This is unsafe! Fix the caller!: 'Error', file dom/events/nsEventDispatcher.cpp, line 447
[Exception... "Component returned failure code: 0x80570027 (NS\_ERROR\_XPC\_SECURITY\_MANAGER\_VETO) [nsIDOMJSWindow.frames]" nsresult: "0x80570027 (NS\_ERROR\_XPC\_SECURITY\_MANAGER\_VETO)" location: "JS frame :: resource://app/modules/sessionstore/FrameTree.jsm :: walk :: line 136" data: no]
###!!! ABORT: How did we get here? Are we failing to notify listeners that we should notify?: 'mDocument->IsBeingUsedAsImage()', file layout/base/nsPresContext.cpp, line 1909
JavaScript error: chrome://browser/content/tabbrowser.xml, line 3163: NS\_ERROR\_NOT\_INITIALIZED: Component not initialized

|  | [Jesse Ruderman](/user_profile?user_id=11608)  Reporter |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=978652#c1)• 11 years ago |
|  | |

###!!! ASSERTION: Inner window no longer correct!: 'outer && outer->GetCurrentInnerWindow() == mLoadInfo.mWindow', file dom/workers/WorkerPrivate.cpp, line 3526

|  | [Ben Turner (not reading bugmail, use the needinfo flag!)](/user_profile?user_id=200444)  Assignee |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=978652#c2)• 11 years ago |
|  | |

Can you try this again with the fix in [bug 975695](/show_bug.cgi?id=975695 "VERIFIED FIXED - \"Assertion failure: !NS_HasPendingEvents(currentThread)\" with many SharedWorkers")?

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=978652#a225553_406194)• 11 years ago |

Flags: needinfo?(jruderman)Keywords: [sec-high](/buglist.cgi?keywords=sec-high&resolution=---)

|  | [Jesse Ruderman](/user_profile?user_id=11608)  Reporter |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=978652#c3)• 11 years ago |
|  | |

Attached file
[testcase v2](attachment.cgi?id=8390479)
— [Details](attachment.cgi?id=8390479&action=edit)

This fixes the error "Constructor Worker requires 'new'".
[Attachment #8384407](/attachment.cgi?id=8384407&action=edit "testcase") -
Attachment is obsolete: true

|  | [Jesse Ruderman](/user_profile?user_id=11608)  Reporter |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=978652#c4)• 11 years ago |
|  | |

With "testcase v2", I can reproduce the bug in an old build but not in a new one. So I guess [bug 975695](/show_bug.cgi?id=975695 "VERIFIED FIXED - \"Assertion failure: !NS_HasPendingEvents(currentThread)\" with many SharedWorkers") fixed the problem :)
(I'm not sure when Worker was changed to require 'new'.)Assignee: nobody → bent.mozillaStatus: NEW → RESOLVEDClosed: 11 years agoFlags: needinfo?(jruderman)Resolution: --- → FIXED

|  | [Kyle Huey (Exited; not receiving bugmail, old account, do not use)](/user_profile?user_id=336670) |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=978652#c5)• 11 years ago |
|  | |

[Bug 916644](/show_bug.cgi?id=916644 "RESOLVED FIXED - Disallow calling WebIDL constructors as functions on the web"), probably.
Bobby, did we look at crashtest to see if this made any tests inoperative?Flags: needinfo?(bobbyholley)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=978652#a983937_75935)• 11 years ago |

Target Milestone: --- → mozilla30

|  | [Bobby Holley (:bholley)](/user_profile?user_id=313730) |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=978652#c6)• 11 years ago |
|  | |

(In reply to Kyle Huey [:khuey] (khuey@mozilla.com) from [comment #5](/show_bug.cgi?id=978652#c5 "VERIFIED FIXED - Navigating while new Workers are queued causes all kinds of trouble"))
> Bobby, did we look at crashtest to see if this made any tests inoperative?
We did not, no.Flags: needinfo?(bobbyholley)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=978652#a3357243_280903)• 11 years ago |

[status-firefox30](/buglist.cgi?f1=cf_status_firefox30&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=fixed)
[status-firefox-esr24](/buglist.cgi?f1=cf_status_firefox_esr24&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=unaffected)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=978652#a7932716_280903)• 11 years ago |

Whiteboard: [fuzzblocker] → [fuzzblocker][adv-main30+]

|  | [Matt Wobensmith [:mwobensmith][:matt:]](/user_profile?user_id=452604) |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=978652#c7)• 11 years ago |
|  | |

Marking verified as per Jesse's [comment 4](/show_bug.cgi?id=978652#c4 "VERIFIED FIXED - Navigating while new Workers are queued causes all kinds of trouble").Status: RESOLVED → VERIFIED
[status-firefox30](/buglist.cgi?f1=cf_status_firefox30&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=verified)

|  | [Justin Wood (:Callek)](/user_profile?user_id=129968) |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=978652#c8)• 11 years ago |
|  | |

c#4 suggests fixed by a bug which was fixed in gecko 29, c#5 suggests fixed in a bug which changed behavior/landed in gecko 30.
Either way, I'm not investing tons of time into this for SeaMonkey 2.26.1 which is based on Gecko 29, on the off chance c#4 is correct.
[status-seamonkey2.26](/buglist.cgi?f1=cf_status_seamonkey226&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_seamonkey226&o1=equals&v1=wontfix)

|  | [Kyle Huey (Exited; not receiving bugmail, old account, do not use)](/user_profile?user_id=336670) |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=978652#c9)• 11 years ago |
|  | |

[Comment 5](/show_bug.cgi?id=978652#c5 "VERIFIED FIXED - Navigating while new Workers are queued causes all kinds of trouble") is a response to the bit in parentheses in [comment 4](/show_bug.cgi?id=978652#c4 "VERIFIED FIXED - Navigating while new Workers are queued causes all kinds of trouble"). This was probably fixed bug the bug referred to in [comment 4](/show_bug.cgi?id=978652#c4 "VERIFIED FIXED - Navigating while new Workers are queued causes all kinds of trouble").

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=978652#a47143962_1689)• 9 years ago |

Group: core-security
You need to [log in](/show_bug.cgi?id=978652&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Jesse Ruderman](/user_profile?user_id=11608)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from bugzilla.mozilla.org_9565328c_20250124_132122.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/1005578)
* [XML](/show_bug.cgi?ctype=xml&id=1005578)

Closed
[Bug 1005578](/show_bug.cgi?id=1005578)

Opened 11 years ago
Closed 11 years ago

# nsStandardURL::SetHost called net\_ToLowerCase with a bogus pointer, #2

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

nsStandardURL::SetHost called net\_ToLowerCase with a bogus pointer, #2

## Categories

### (Core :: Networking, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=Networking#Networking)

Networking
▾

Core :: Networking
For bugs in Mozilla's modular networking library (aka "Netlib" or "Necko".) The networking library supplies the software interface that Mozilla uses to access physical transports (e.g. the Internet and local drives), perform URL resolutions, and handle a variety of networking protocols.

Examples of appropriate bugs: URLs with backslash not fetched; URLs starting with a single slash turn into http:///; Cannot access authenticated FTP site.

[See Open Bugs in This Component](/buglist.cgi?product=Core&component=Networking&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=Networking&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=Networking)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

x86\_64

macOS

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

critical

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla32

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Accessibility Severity | --- |
| --- | --- |
| Webcompat Priority | --- |
| Webcompat Score | --- |
| a11y-review | --- |
| Performance Impact | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox29 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=wontfix) |
| firefox30 | --- | [verified](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=verified) |
| firefox31 | --- | [verified](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=verified) |
| firefox32 | [+](/buglist.cgi?f1=cf_tracking_firefox32&o1=equals&v1=%2B) | [verified](/buglist.cgi?f1=cf_status_firefox32&o1=equals&v1=verified) |
| firefox-esr24 | --- | [unaffected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=unaffected) |
| b2g18 | --- | [wontfix](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=wontfix) |
| b2g-v1.1hd | --- | [wontfix](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=equals&v1=wontfix) |
| b2g-v1.2 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=fixed) |
| b2g-v1.3 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=fixed) |
| b2g-v1.3T | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=fixed) |
| b2g-v1.4 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=fixed) |
| b2g-v2.0 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_2_0&o1=equals&v1=fixed) |
| seamonkey2.26 | --- | [fixed](/buglist.cgi?f1=cf_status_seamonkey226&o1=equals&v1=fixed) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox29 |  | wontfix |
| firefox30 |  | verified |
| firefox31 |  | verified |
| firefox32 | + | verified |
| firefox-esr24 |  | unaffected |
| b2g18 |  | wontfix |
| b2g-v1.1hd |  | wontfix |
| b2g-v1.2 |  | fixed |
| b2g-v1.3 |  | fixed |
| b2g-v1.3T |  | fixed |
| b2g-v1.4 |  | fixed |
| b2g-v2.0 |  | fixed |
| relnote-firefox |  | --- |
| seamonkey2.26 |  | fixed |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: jruderman, Assigned: valentin)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/dedff9d4500fcbc5cdd1cd270f044b33?d=mm&size=40)  [valentin](/user_profile?user_id=415378)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/d2dc9227eafcd0ec5ba3712ee4f19b75?d=mm&size=40)  [jruderman](/user_profile?user_id=11608)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/608e04ebca94be52b05c003d51d43e07?d=mm&size=40)  [kershaw](/user_profile?user_id=505624)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

8 people

## References

### (Blocks 1 open bug)

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[fuzz-urlutils](/show_bug.cgi?id=1020040 "NEW - [meta] Fuzz URLUtils interface and DOM URL objects")

Dependency [tree](/showdependencytree.cgi?id=1005578&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=1005578)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Keywords: crash, sec-critical, testcase, Whiteboard: [adv-main30+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[crash](/buglist.cgi?keywords=crash&resolution=---),
[sec-critical](/buglist.cgi?keywords=sec-critical&resolution=---),
[testcase](/buglist.cgi?keywords=testcase&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[adv-main30+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [cbook](/user_profile?user_id=277293) | [in-testsuite](#c13 "11 years ago") | ? |
| --- | --- | --- |
| [cbook](/user_profile?user_id=277293) | in-testsuite | ? |
| --- | --- | --- |
|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | qe-verify |  |

## Crash Data

Signature:

[[@ net\_ToLowerCase(char\*, unsigned int) ]](https://crash-stats.mozilla.org/signature/?signature=net_ToLowerCase%28char%2A%2C%20unsigned%20int%29)

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (3 files)

| [testcase (crashes Firefox when loaded)](/attachment.cgi?id=8416979)  [11 years ago](#c0)  [Jesse Ruderman](/user_profile?user_id=11608)   304 bytes, text/html |  | [Details](/attachment.cgi?id=8416979&action=edit) |
| --- | --- | --- |
| [stack (ASan)](/attachment.cgi?id=8416980)  [11 years ago](#c1)  [Jesse Ruderman](/user_profile?user_id=11608)   10.92 KB, text/plain |  | [Details](/attachment.cgi?id=8416980&action=edit) |
| [url\_crash.patch](/attachment.cgi?id=8417035)  [11 years ago](#c3)  [Valentin Gosu [:valentin] (he/him)](/user_profile?user_id=415378)   773 bytes, patch | bzbarsky : [review+](#c4 "11 years ago")  Sylvestre : [approval-mozilla-aurora+](#c11 "11 years ago")  Sylvestre : [approval-mozilla-beta+](#c11 "11 years ago")  abillings : [sec-approval+](#c7 "11 years ago") | [Details](/attachment.cgi?id=8417035&action=edit) | [Diff](/attachment.cgi?id=8417035&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1005578&attachment=8417035) |

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Jesse Ruderman](/user_profile?user_id=11608)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=1005578#c0)• 11 years ago |
|  | |

Attached file
[testcase (crashes Firefox when loaded)](attachment.cgi?id=8416979)
— [Details](attachment.cgi?id=8416979&action=edit)

Same symptoms as [bug 991471](/show_bug.cgi?id=991471 "VERIFIED FIXED - nsStandardURL::SetHost called net_ToLowerCase with a bogus pointer"), different testcase.

|  | [Jesse Ruderman](/user_profile?user_id=11608)  Reporter |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=1005578#c1)• 11 years ago |
|  | |

Attached file
[stack (ASan)](attachment.cgi?id=8416980)
— [Details](attachment.cgi?id=8416980&action=edit)

|  | [Jesse Ruderman](/user_profile?user_id=11608)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1005578#a75_11608)• 11 years ago |

Crash Signature: [@ net\_ToLowerCase(char\*, unsigned int) ]

|  | [Valentin Gosu [:valentin] (he/him)](/user_profile?user_id=415378)  Assignee |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=1005578#c2)• 11 years ago |
|  | |

Ok, so the problem here is as follows:
var url = new URL("<http://mozilla.org/>"); // creates an nsStandardURL object
url.href = "javascript: 5";
// it first checks that ioService->NewURI(href,...) succeeds. It does.
// then it does aRv = mURI->SetSpec(href); This fails, as mURI is nsStandardURL, not a nsJSURI
// so all of the parameters in the nsStandardURL object get cleared
url.hostname = "allizom.org";
// tries to set the hostname, but the url is missing everything, including a scheme. From here we have a bad offset and crash.

|  | [Valentin Gosu [:valentin] (he/him)](/user_profile?user_id=415378)  Assignee |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=1005578#c3)• 11 years ago |
|  | |

Attached patch

[url\_crash.patch](attachment.cgi?id=8417035&action=diff)
— [Details](attachment.cgi?id=8417035&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1005578&attachment=8417035)

According to the spec, we should discard the old url object when calling url.href
<http://url.spec.whatwg.org/#concept-uu-set-the-input>Assignee: nobody → valentin.gosuStatus: NEW → ASSIGNED
[Attachment #8417035](/attachment.cgi?id=8417035&action=edit "url_crash.patch") -
Flags: review?(bzbarsky)

|  | [Jesse Ruderman](/user_profile?user_id=11608)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1005578#a93967_11608)• 11 years ago |

Group: core-securityKeywords: [crash](/buglist.cgi?keywords=crash&resolution=---),
[sec-critical](/buglist.cgi?keywords=sec-critical&resolution=---),
[testcase](/buglist.cgi?keywords=testcase&resolution=---)Whiteboard: crash, sec-critical, testcase

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209) |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=1005578#c4)• 11 years ago |
|  | |

Comment on [attachment 8417035](/attachment.cgi?id=8417035 "url_crash.patch") [[details]](/attachment.cgi?id=8417035&action=edit "url_crash.patch") [[diff]](/attachment.cgi?id=8417035&action=diff "url_crash.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1005578&attachment=8417035)
url\_crash.patch
Yeah, makes sense.
[Attachment #8417035](/attachment.cgi?id=8417035&action=edit "url_crash.patch") -
Flags: review?(bzbarsky) → review+

|  | [Valentin Gosu [:valentin] (he/him)](/user_profile?user_id=415378)  Assignee |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=1005578#c5)• 11 years ago |
|  | |

Comment on [attachment 8417035](/attachment.cgi?id=8417035 "url_crash.patch") [[details]](/attachment.cgi?id=8417035&action=edit "url_crash.patch") [[diff]](/attachment.cgi?id=8417035&action=diff "url_crash.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1005578&attachment=8417035)
url\_crash.patch
[Security approval request comment]
How easily could an exploit be constructed based on the patch?
The changes made in the patch don't immediately reveal the vulnerability. It would be very difficult to create an exploit based on this patch.
Do comments in the patch, the check-in comment, or tests included in the patch paint a bulls-eye on the security problem?
The comment does say what the problem is, and it might need to be changed.
Which older supported branches are affected by this flaw?
All branches are affected.
Do you have backports for the affected branches? If not, how different, hard to create, and risky will they be?
It should be easy to apply this patch on all branches.
How likely is this patch to cause regressions; how much testing does it need?
[Attachment #8417035](/attachment.cgi?id=8417035&action=edit "url_crash.patch") -
Flags: sec-approval?

|  | [Valentin Gosu [:valentin] (he/him)](/user_profile?user_id=415378)  Assignee |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=1005578#c6)• 11 years ago |
|  | |

(In reply to Valentin Gosu [:valentin] from [comment #5](/show_bug.cgi?id=1005578#c5 "VERIFIED FIXED - nsStandardURL::SetHost called net_ToLowerCase with a bogus pointer, #2"))
> How likely is this patch to cause regressions; how much testing does it need?
Unlikely. Not a risky change, and it is the specified behavior in the spec.

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1005578#a228461_280903)• 11 years ago |

[status-b2g18](/buglist.cgi?f1=cf_status_b2g18&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=wontfix)
[status-b2g-v1.1hd](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_b2g_1_1_hd&o1=equals&v1=wontfix)
[status-b2g-v1.2](/buglist.cgi?f1=cf_status_b2g_1_2&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=wontfix)
[status-b2g-v1.3](/buglist.cgi?f1=cf_status_b2g_1_3&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=affected)
[status-b2g-v1.3T](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=affected)
[status-b2g-v1.4](/buglist.cgi?f1=cf_status_b2g_1_4&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=affected)
[status-b2g-v2.0](/buglist.cgi?f1=cf_status_b2g_2_0&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_2_0&o1=equals&v1=affected)
[status-firefox29](/buglist.cgi?f1=cf_status_firefox29&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=wontfix)
[status-firefox30](/buglist.cgi?f1=cf_status_firefox30&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=affected)
[status-firefox31](/buglist.cgi?f1=cf_status_firefox31&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=affected)
[status-firefox32](/buglist.cgi?f1=cf_status_firefox32&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox32&o1=equals&v1=affected)
[status-firefox-esr24](/buglist.cgi?f1=cf_status_firefox_esr24&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=affected)
[tracking-firefox32](/buglist.cgi?f1=cf_tracking_firefox32&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox32&o1=equals&v1=%2B)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=1005578#c7)• 11 years ago |
|  | |

Comment on [attachment 8417035](/attachment.cgi?id=8417035 "url_crash.patch") [[details]](/attachment.cgi?id=8417035&action=edit "url_crash.patch") [[diff]](/attachment.cgi?id=8417035&action=diff "url_crash.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1005578&attachment=8417035)
url\_crash.patch
sec-approval+ for trunk.
Please create Aurora, Beta, and ESR24 patches and nominate them once it is in trunk.
[Attachment #8417035](/attachment.cgi?id=8417035&action=edit "url_crash.patch") -
Flags: sec-approval? → sec-approval+

|  | [Valentin Gosu [:valentin] (he/him)](/user_profile?user_id=415378)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1005578#a229044_415378)• 11 years ago |

Keywords: [checkin-needed](/buglist.cgi?keywords=checkin-needed&resolution=---)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=1005578#c8)• 11 years ago |
|  | |

<https://hg.mozilla.org/integration/mozilla-inbound/rev/2ffa88afe433>
Please request Aurora/Beta/ESR24 approval on this ASAP to expedite it being uplifted everywhere else it needs to go.
[status-b2g-v1.2](/buglist.cgi?f1=cf_status_b2g_1_2&o1=isnotempty):
[wontfix](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=wontfix) → [affected](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=affected)Keywords: [checkin-needed](/buglist.cgi?keywords=checkin-needed&resolution=---)

|  | [Valentin Gosu [:valentin] (he/him)](/user_profile?user_id=415378)  Assignee |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=1005578#c9)• 11 years ago |
|  | |

It seems I misread the output of hg log, and that the error was actually introduced by <http://hg.mozilla.org/mozilla-central/rev/f2199d73aef6>
ESR24 is not affected.
[status-firefox-esr24](/buglist.cgi?f1=cf_status_firefox_esr24&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=affected) → [unaffected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=unaffected)

|  | [Valentin Gosu [:valentin] (he/him)](/user_profile?user_id=415378)  Assignee |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=1005578#c10)• 11 years ago |
|  | |

Comment on [attachment 8417035](/attachment.cgi?id=8417035 "url_crash.patch") [[details]](/attachment.cgi?id=8417035&action=edit "url_crash.patch") [[diff]](/attachment.cgi?id=8417035&action=diff "url_crash.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1005578&attachment=8417035)
url\_crash.patch
[Approval Request Comment]
Issue caused by (bug #): [Bug 887364](/show_bug.cgi?id=887364 "RESOLVED FIXED - Implement URL API")
User impact if declined: Security concerns
Testing completed (on m-c, etc.): on m-c
Risk to taking this patch (and alternatives if risky): low
String or IDL/UUID changes made by this patch: none
[Attachment #8417035](/attachment.cgi?id=8417035&action=edit "url_crash.patch") -
Flags: approval-mozilla-beta?
[Attachment #8417035](/attachment.cgi?id=8417035&action=edit "url_crash.patch") -
Flags: approval-mozilla-aurora?

|  | [Sylvestre Ledru [:Sylvestre]](/user_profile?user_id=495955) |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=1005578#c11)• 11 years ago |
|  | |

Comment on [attachment 8417035](/attachment.cgi?id=8417035 "url_crash.patch") [[details]](/attachment.cgi?id=8417035&action=edit "url_crash.patch") [[diff]](/attachment.cgi?id=8417035&action=diff "url_crash.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1005578&attachment=8417035)
url\_crash.patch
Valentin, don't hesitate to be a bit more verbose next time ;)
[Attachment #8417035](/attachment.cgi?id=8417035&action=edit "url_crash.patch") -
Flags: approval-mozilla-beta?
[Attachment #8417035](/attachment.cgi?id=8417035&action=edit "url_crash.patch") -
Flags: approval-mozilla-beta+
[Attachment #8417035](/attachment.cgi?id=8417035&action=edit "url_crash.patch") -
Flags: approval-mozilla-aurora?
[Attachment #8417035](/attachment.cgi?id=8417035&action=edit "url_crash.patch") -
Flags: approval-mozilla-aurora+

|  | [Valentin Gosu [:valentin] (he/him)](/user_profile?user_id=415378)  Assignee |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=1005578#c12)• 11 years ago |
|  | |

(In reply to Sylvestre Ledru [:sylvestre] from [comment #11](/show_bug.cgi?id=1005578#c11 "VERIFIED FIXED - nsStandardURL::SetHost called net_ToLowerCase with a bogus pointer, #2"))
> Valentin, don't hesitate to be a bit more verbose next time ;)
Thanks! I will :)

|  | [Carsten Book [:Tomcat]](/user_profile?user_id=277293) |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=1005578#c13)• 11 years ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/2ffa88afe433>Status: ASSIGNED → RESOLVEDClosed: 11 years ago
[status-firefox32](/buglist.cgi?f1=cf_status_firefox32&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox32&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox32&o1=equals&v1=fixed)Flags: in-testsuite?Resolution: --- → FIXEDTarget Milestone: --- → mozilla32

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=1005578#c14)• 11 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-aurora/rev/0f40e6c752c8>
<https://hg.mozilla.org/releases/mozilla-beta/rev/0c8b19312abf>
[status-b2g-v2.0](/buglist.cgi?f1=cf_status_b2g_2_0&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_2_0&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_2_0&o1=equals&v1=fixed)
[status-firefox30](/buglist.cgi?f1=cf_status_firefox30&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=fixed)
[status-firefox31](/buglist.cgi?f1=cf_status_firefox31&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=fixed)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=1005578#c15)• 11 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-b2g30_v1_4/rev/0c8b19312abf>
<https://hg.mozilla.org/releases/mozilla-b2g28_v1_3/rev/6d6cf2f3166e>
<https://hg.mozilla.org/releases/mozilla-b2g26_v1_2/rev/bc77a1b00676>
[status-b2g-v1.2](/buglist.cgi?f1=cf_status_b2g_1_2&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=fixed)
[status-b2g-v1.3](/buglist.cgi?f1=cf_status_b2g_1_3&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=fixed)
[status-b2g-v1.3T](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=fixed)
[status-b2g-v1.4](/buglist.cgi?f1=cf_status_b2g_1_4&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=fixed)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1005578#a2580641_280903)• 11 years ago |

Whiteboard: [adv-main30+]

|  | [Jesse Ruderman](/user_profile?user_id=11608)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1005578#a2675302_11608)• 11 years ago |

Blocks: [fuzz-urlutils](/show_bug.cgi?id=1020040 "NEW - [meta] Fuzz URLUtils interface and DOM URL objects")

|  | [Matt Wobensmith [:mwobensmith][:matt:]](/user_profile?user_id=452604) |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=1005578#c16)• 11 years ago |
|  | |

Confirmed crash on 2014-04-21, debug build of Fx30.
Verified fixed 2014-06-03, ASan builds of Fx30, Fx31 and Fx32.Status: RESOLVED → VERIFIED
[status-firefox30](/buglist.cgi?f1=cf_status_firefox30&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=verified)
[status-firefox31](/buglist.cgi?f1=cf_status_firefox31&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=verified)
[status-firefox32](/buglist.cgi?f1=cf_status_firefox32&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox32&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox32&o1=equals&v1=verified)

|  | [Justin Wood (:Callek)](/user_profile?user_id=129968) |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=1005578#c17)• 11 years ago |
|  | |

Applied ontop of a relbranch for SeaMonkey 2.26.1 (Gecko 29 based):
<https://hg.mozilla.org/releases/mozilla-release/rev/908f619b9122>
[status-seamonkey2.26](/buglist.cgi?f1=cf_status_seamonkey226&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_seamonkey226&o1=equals&v1=fixed)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1005578#a41791807_1689)• 9 years ago |

Group: core-security
You need to [log in](/show_bug.cgi?id=1005578&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Jesse Ruderman](/user_profile?user_id=11608)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from lists.opensuse.org_6d0a2d33_20250124_132111.html ===


[![openSUSE](https://static.opensuse.org/favicon.svg)
Mailing Lists](/archives/ "openSUSE Mailing Lists")

[Sign In](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/VJGLVTX3ENIGPYXDTBRS4Y5YIDBQL5CO/)
[Sign Up](/accounts/signup/?next=/archives/list/security-announce%40lists.opensuse.org/message/VJGLVTX3ENIGPYXDTBRS4Y5YIDBQL5CO/)

[Manage this list](/manage/lists/security-announce.lists.opensuse.org/)
[Sign In](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/VJGLVTX3ENIGPYXDTBRS4Y5YIDBQL5CO/)
[Sign Up](/accounts/signup/?next=/archives/list/security-announce%40lists.opensuse.org/message/VJGLVTX3ENIGPYXDTBRS4Y5YIDBQL5CO/)

×
#### Keyboard Shortcuts

### Thread View

* `j`: Next unread message
* `k`: Previous unread message
* `j a`: Jump to all threads* `j l`: Jump to MailingList overview

[thread](/archives/list/security-announce%40lists.opensuse.org/thread/VJGLVTX3ENIGPYXDTBRS4Y5YIDBQL5CO/#VJGLVTX3ENIGPYXDTBRS4Y5YIDBQL5CO)

# [security-announce] openSUSE-SU-2014:0797-1: critical: Mozilla updates 2014/06

![](https://seccdn.libravatar.org/avatar/099a17325bdf082b643d1a6bbacde279.jpg?s=120&d=mm&r=g)
## [opensuse-security＠opensuse.org](/archives/users/1b72def497ef4503896cd7a5fe9fb8e0/ "See the profile for opensuse-security＠opensuse.org")

16 Jun
2014

16 Jun
'14

06:04

openSUSE Security Update: Mozilla updates 2014/06
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
Announcement ID: openSUSE-SU-2014:0797-1
Rating: critical
References: #881874
Cross-References: CVE-2014-1533 CVE-2014-1534 CVE-2014-1536
CVE-2014-1537 CVE-2014-1538 CVE-2014-1541
CVE-2014-1545
Affected Products:
openSUSE 11.4
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
An update that fixes 7 vulnerabilities is now available.
Description:
These updates contain the latest security and maintenance updates for
- Mozilla Firefox 24.6esr
- Mozilla Thunderbird 24.6
- Mozilla NSPR is also updated to 4.10.6
to fix
\* MFSA 2014-48/CVE-2014-1533/CVE-2014-1534 Miscellaneous memory safety
hazards
\* MFSA 2014-49/CVE-2014-1536/CVE-2014-1537/CVE-2014-1538 Use-after-free
and out of bounds issues found using Address Sanitizer
\* MFSA 2014-52/CVE-2014-1541 Use-after-free with SMIL Animation Controller
\* MFSA 2014-55/CVE-2014-1545 Out of bounds write in NSPR
Patch Instructions:
To install this openSUSE Security Update use YaST online\_update.
Alternatively you can run the command listed for your product:
- openSUSE 11.4:
zypper in -t patch 2014-64
To bring your system up-to-date, use "zypper patch".
Package List:
- openSUSE 11.4 (i586 x86\_64):
MozillaFirefox-24.6.0-115.1
MozillaFirefox-branding-upstream-24.6.0-115.1
MozillaFirefox-buildsymbols-24.6.0-115.1
MozillaFirefox-debuginfo-24.6.0-115.1
MozillaFirefox-debugsource-24.6.0-115.1
MozillaFirefox-devel-24.6.0-115.1
MozillaFirefox-translations-common-24.6.0-115.1
MozillaFirefox-translations-other-24.6.0-115.1
MozillaThunderbird-24.6.0-97.1
MozillaThunderbird-buildsymbols-24.6.0-97.1
MozillaThunderbird-debuginfo-24.6.0-97.1
MozillaThunderbird-debugsource-24.6.0-97.1
MozillaThunderbird-devel-24.6.0-97.1
MozillaThunderbird-translations-common-24.6.0-97.1
MozillaThunderbird-translations-other-24.6.0-97.1
enigmail-1.6.0+24.6.0-97.1
mozilla-nspr-4.10.6-44.1
mozilla-nspr-debuginfo-4.10.6-44.1
mozilla-nspr-debugsource-4.10.6-44.1
mozilla-nspr-devel-4.10.6-44.1
- openSUSE 11.4 (x86\_64):
mozilla-nspr-32bit-4.10.6-44.1
mozilla-nspr-debuginfo-32bit-4.10.6-44.1
- openSUSE 11.4 (ia64):
mozilla-nspr-debuginfo-x86-4.10.6-44.1
mozilla-nspr-x86-4.10.6-44.1
References:
<http://support.novell.com/security/cve/CVE-2014-1533.html>
<http://support.novell.com/security/cve/CVE-2014-1534.html>
<http://support.novell.com/security/cve/CVE-2014-1536.html>
<http://support.novell.com/security/cve/CVE-2014-1537.html>
<http://support.novell.com/security/cve/CVE-2014-1538.html>
<http://support.novell.com/security/cve/CVE-2014-1541.html>
<http://support.novell.com/security/cve/CVE-2014-1545.html>
<https://bugzilla.novell.com/881874>
--
To unsubscribe, e-mail: opensuse-security-announce+unsubscribe@opensuse.org
For additional commands, e-mail: opensuse-security-announce+help@opensuse.org

[0](#like "You must be logged-in to vote.")
[0](#dislike "You must be logged-in to vote.")

Reply

[Sign in to reply online](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/VJGLVTX3ENIGPYXDTBRS4Y5YIDBQL5CO/)
Use email software

[Back to the thread](/archives/list/security-announce%40lists.opensuse.org/thread/VJGLVTX3ENIGPYXDTBRS4Y5YIDBQL5CO/#VJGLVTX3ENIGPYXDTBRS4Y5YIDBQL5CO)

[Back to the list](/archives/list/security-announce%40lists.opensuse.org/)

![HyperKitty](/static/hyperkitty/img/logo.png)
Powered by [HyperKitty](http://hyperkitty.readthedocs.org) version 1.3.12.



=== Content from lists.opensuse.org_9e8555c0_20250124_132112.html ===


[![openSUSE](https://static.opensuse.org/favicon.svg)
Mailing Lists](/archives/ "openSUSE Mailing Lists")

[Sign In](/accounts/login/?next=/archives/list/updates%40lists.opensuse.org/message/CD5JMBO35DVOT5WGRCQ7ICGEGHWN5NYS/)
[Sign Up](/accounts/signup/?next=/archives/list/updates%40lists.opensuse.org/message/CD5JMBO35DVOT5WGRCQ7ICGEGHWN5NYS/)

[Manage this list](/manage/lists/updates.lists.opensuse.org/)
[Sign In](/accounts/login/?next=/archives/list/updates%40lists.opensuse.org/message/CD5JMBO35DVOT5WGRCQ7ICGEGHWN5NYS/)
[Sign Up](/accounts/signup/?next=/archives/list/updates%40lists.opensuse.org/message/CD5JMBO35DVOT5WGRCQ7ICGEGHWN5NYS/)

×
#### Keyboard Shortcuts

### Thread View

* `j`: Next unread message
* `k`: Previous unread message
* `j a`: Jump to all threads* `j l`: Jump to MailingList overview

[thread](/archives/list/updates%40lists.opensuse.org/thread/CD5JMBO35DVOT5WGRCQ7ICGEGHWN5NYS/#CD5JMBO35DVOT5WGRCQ7ICGEGHWN5NYS)

# openSUSE-SU-2014:0858-1: moderate: MozillaThunderbird: Update fixes six security issues

![](https://seccdn.libravatar.org/avatar/099a17325bdf082b643d1a6bbacde279.jpg?s=120&d=mm&r=g)
## [opensuse-security＠opensuse.org](/archives/users/1b72def497ef4503896cd7a5fe9fb8e0/ "See the profile for opensuse-security＠opensuse.org")

1 Jul
2014

1 Jul
'14

10:07

openSUSE Security Update: MozillaThunderbird: Update fixes six security issues
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
Announcement ID: openSUSE-SU-2014:0858-1
Rating: moderate
References: #881874
Cross-References: CVE-2014-1533 CVE-2014-1534 CVE-2014-1536
CVE-2014-1537 CVE-2014-1538 CVE-2014-1541
CVE-2014-1545
Affected Products:
openSUSE 13.1
openSUSE 12.3
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
An update that fixes 7 vulnerabilities is now available.
Description:
MozillaThunderbird was updated to version 24.6.0 to fix six security
issues:
\* Miscellaneous memory safety hazards (CVE-2014-1533/CVE-2014-1534)
\* Use-after-free and out of bounds issues found using Address Sanitizer
(CVE-2014-1536/CVE-2014-1537/CVE-2014-1538)
\* Use-after-free with SMIL Animation Controller (CVE-2014-1541)
Patch Instructions:
To install this openSUSE Security Update use YaST online\_update.
Alternatively you can run the command listed for your product:
- openSUSE 13.1:
zypper in -t patch openSUSE-2014-447
- openSUSE 12.3:
zypper in -t patch openSUSE-2014-447
To bring your system up-to-date, use "zypper patch".
Package List:
- openSUSE 13.1 (i586 x86\_64):
MozillaThunderbird-24.6.0-70.23.3
MozillaThunderbird-buildsymbols-24.6.0-70.23.3
MozillaThunderbird-debuginfo-24.6.0-70.23.3
MozillaThunderbird-debugsource-24.6.0-70.23.3
MozillaThunderbird-devel-24.6.0-70.23.3
MozillaThunderbird-translations-common-24.6.0-70.23.3
MozillaThunderbird-translations-other-24.6.0-70.23.3
enigmail-1.6.0+24.6.0-70.23.3
enigmail-debuginfo-1.6.0+24.6.0-70.23.3
- openSUSE 12.3 (i586 x86\_64):
MozillaThunderbird-24.6.0-61.51.3
MozillaThunderbird-buildsymbols-24.6.0-61.51.3
MozillaThunderbird-debuginfo-24.6.0-61.51.3
MozillaThunderbird-debugsource-24.6.0-61.51.3
MozillaThunderbird-devel-24.6.0-61.51.3
MozillaThunderbird-translations-common-24.6.0-61.51.3
MozillaThunderbird-translations-other-24.6.0-61.51.3
enigmail-1.6.0+24.6.0-61.51.3
enigmail-debuginfo-1.6.0+24.6.0-61.51.3
References:
<http://support.novell.com/security/cve/CVE-2014-1533.html>
<http://support.novell.com/security/cve/CVE-2014-1534.html>
<http://support.novell.com/security/cve/CVE-2014-1536.html>
<http://support.novell.com/security/cve/CVE-2014-1537.html>
<http://support.novell.com/security/cve/CVE-2014-1538.html>
<http://support.novell.com/security/cve/CVE-2014-1541.html>
<http://support.novell.com/security/cve/CVE-2014-1545.html>
<https://bugzilla.novell.com/881874>

[0](#like "You must be logged-in to vote.")
[0](#dislike "You must be logged-in to vote.")

Reply

[Sign in to reply online](/accounts/login/?next=/archives/list/updates%40lists.opensuse.org/message/CD5JMBO35DVOT5WGRCQ7ICGEGHWN5NYS/)
Use email software

[Back to the thread](/archives/list/updates%40lists.opensuse.org/thread/CD5JMBO35DVOT5WGRCQ7ICGEGHWN5NYS/#CD5JMBO35DVOT5WGRCQ7ICGEGHWN5NYS)

[Back to the list](/archives/list/updates%40lists.opensuse.org/)

![HyperKitty](/static/hyperkitty/img/logo.png)
Powered by [HyperKitty](http://hyperkitty.readthedocs.org) version 1.3.12.



=== Content from secunia.com_0a9d2b04_20250124_132113.html ===


[Skip to main content](#main-content)
[![Home](/themes/custom/flexera/images/logo.svg)](https://www.flexera.com/)

[![Home](/themes/custom/flexera/images/logo.svg)](https://www.flexera.com/)

Search

## Main navigation

* Solutions
  + Column 1
    - Business challenge
      * [Software renewals and audits](https://www.flexera.com/solutions/software-renewals-audits)
      * [Software license management and optimization](https://www.flexera.com/solutions/software-usage-costs)
      * [SaaS spend management](https://www.flexera.com/solutions/saas-spend)
      * [Cloud cost management](https://www.flexera.com/solutions/cloud-cost)
      * [IT asset lifecycle management](https://www.flexera.com/solutions/it-asset-lifecycle)
      * [CMDB data quality](https://www.flexera.com/solutions/cmdb-data-quality)
      * [Accurate IT inventory](https://www.flexera.com/solutions/it-inventory)
      * [Security and regulatory risk management](https://www.flexera.com/solutions/it-security-regulatory-risk)
      * [Sustainable IT](https://www.flexera.com/solutions/sustainable-it)
      * [AI-powered transformation](https://www.flexera.com/solutions/ai-powered-transformation)
      * [Public sector](https://www.flexera.com/solutions/public-sector)
  + Column 2
    - Spend management by vendor
      * [IBM](https://www.flexera.com/solutions/vendor/ibm)
      * [Oracle](https://www.flexera.com/solutions/vendor/oracle)
      * [Microsoft](https://www.flexera.com/solutions/vendor/microsoft)
      * [SAP](https://www.flexera.com/solutions/vendor/sap)
      * [VMware](https://www.flexera.com/solutions/vendor/vmware)
      * [ServiceNow](https://www.flexera.com/solutions/vendor/servicenow)
      * [AWS](https://www.flexera.com/solutions/vendor/aws)
      * [Salesforce](https://www.flexera.com/solutions/vendor/salesforce)
      * [BMC](https://www.flexera.com/solutions/cmdb-data-quality/bmc)
      * [Adobe](https://www.flexera.com/solutions/vendor/adobe)

  ### Achieve more through a united FinOps and ITAM function

  The future is hybrid. Break down the walls between ITAM and FinOps to drive more revenue, more customer growth and more innovation.

  [Discover More](https://www.flexera.com/resources/hybrid-itam-finops)
* Products
  + Column 1
    - [Flexera One](https://www.flexera.com/products/flexera-one)
      * [IT Visibility](https://www.flexera.com/products/flexera-one/it-visibility)
      * [ITAM](https://www.flexera.com/products/flexera-one/it-asset-management)
      * [SaaS Management](https://www.flexera.com/products/flexera-one/saas-management)
      * [FinOps](https://www.flexera.com/products/flexera-one/finops)
      * [Technology Intelligence Platform](https://www.flexera.com/products/flexera-one/technology-intelligence-platform)
  + Column 2
    - [Snow Atlas](https://www.flexera.com/products/snow-atlas)
      * [Snow Spend Optimizer](https://www.flexera.com/products/snow-atlas/snow-spend-optimizer)
      * [Snow SaaS Management](https://www.flexera.com/products/snow-atlas/snow-saas-management)
  + Column 3
    - Hide group
      * [Security](https://www.flexera.com/products/security)
      * [Application Readiness](https://www.flexera.com/products/adminstudio)
      * [All products](https://www.flexera.com/products)
      * [All Snow products](https://www.flexera.com/products/snow)
      * [Integrations](https://www.flexera.com/products/integrations)

  ### Flexera 2024 State of the Cloud Report

  What do transformative initiatives such as GenAI, machine learning and sustainability mean for the cloud? Check out the 2024 State of the Cloud Report to find the answer as well as all the latest cloud computing trends.

  [View Report](https://info.flexera.com/CM-REPORT-State-of-the-Cloud)
* Success
  + Column 1
    - [Customer success](https://www.flexera.com/customer-success)
      * Support
        + [Flexera support portal](https://community.flexera.com/s/support-hub)
        + [Flexera product documentation](https://docs.flexera.com)
        + [Snow product documentation](https://docs.snowsoftware.io/)
      * Services and training
        + [Services](https://www.flexera.com/customer-success/services)
        + [Training](https://www.flexera.com/customer-success/training)
  + Column 2
    - Hide group
      * [Technology Intelligence Awards](https://www.flexera.com/customer-success/awards)
      * [Flexera community](https://community.flexera.com/s/)

  ### Insights from Gartner®

  Find a curated series of actionable and objective insights for IT executives and their teams. Get expert insights from valued analysts, courtesy of Flexera.

  [Discover More](https://www.flexera.com/resources/gartner-analyst-research)
* Resources
  + Column 1
    - [Resources](https://www.flexera.com/resources)
      * [Webinars](https://www.flexera.com/resources?type%5Bwebinar%5D=webinar)
      * [Videos](https://www.flexera.com/resources?type%5Bvideo%5D=video)
      * [Datasheets](https://www.flexera.com/resources?type%5Bdatasheet%5D=datasheet)
      * [White papers & reports](https://www.flexera.com/resources?type%5Bwhite-paper-industry-report%5D=white-paper-industry-report)
  + Column 2
    - Hide group
      * [Blog](/blog/)
      * [Case studies](https://www.flexera.com/resources/case-studies)
      * [Events](https://www.flexera.com/resources?type%5Bevent%5D=event)
      * [Analyst Research](https://www.flexera.com/resources/gartner-analyst-research)
      * [Glossary](https://www.flexera.com/resources/glossary)
      * [Demos & trials](https://www.flexera.com/resources?type%5Bdemo-trials%5D=demo-trials)
      * [Business value calculator](https://www.flexera.com/resources/business-value-calculator)

  ### Flexera 2025 IT Priorities Report

  Insights from Flexera’s 2025 IT Priorities Report highlight what’s top of mind for IT decision makers in the year ahead. Discover the challenges, priorities and opportunities that will shape the future IT landscape.

  [View Report](https://info.flexera.com/ITV-REPORT-IT-Priorities)
* About
  + Column 1
    - [Company](https://www.flexera.com/about-us)
      * [About](https://www.flexera.com/about-us)
      * [Careers](https://www.flexera.com/about-us/careers)
      * [Contact](https://www.flexera.com/about-us/contact-us)
      * [Leadership](https://www.flexera.com/about-us/leadership)
    - [Partners](https://www.flexera.com/about-us/partners)
      * [Partner program](https://www.flexera.com/about-us/partners/partner-program)
      * [Partner directory](https://www.flexera.com/about-us/partners/directory)
  + Column 2
    - [Press center](https://www.flexera.com/about-us/press-center)
      * [Press releases](https://www.flexera.com/about-us/all-press-releases)
      * [Awards](https://www.flexera.com/about-us/press-center#awards)
      * [Articles](https://www.flexera.com/about-us/all-articles)
    - Hide group
      * Social responsibility
        + [ESG](https://www.flexera.com/about-us/environmental-social-governance)
        + [Diversity](https://www.flexera.com/about-us/diversity)

  ### More value with technology intelligence

  The unparalleled synergy of Flexera and Snow provides the Technology Intelligence you need for more efficiency, insight and governance than ever before.

  [Discover More](https://www.flexera.com/more-value-with-technology-intelligence)

Search

en

* [English](https://www.flexera.com/products/security/software-vulnerability-research/secunia-research?referrer=secunia)
* [Deutsch](https://www.flexera.de/products/security/software-vulnerability-research/secunia-research?referrer=secunia)

## External Links

* External Links
  + [Community](https://community.flexera.com/)
  + [Product Access](https://app.flexera.com/login)
  + [Partner Portal](https://flexera.channeltivity.com/Login)

[Book a demo](/about-us/contact-us?C_Interest1=sales)

# Secunia Research

## The world’s best vulnerability intelligence

The Secunia Research team from Flexera provides the most accurate and reliable source of vulnerability intelligence.

[Contact Us](https://www.flexera.com/about-us/contact-us?C_Interest1=sales&C_SolutionInterest=SVM)
Watch video (0:29)

Related links

* [Anatomy of a security advisory](https://www.flexera.com/resources/infographics/anatomy-of-a-security-advisory)
* [Software Vulnerability Research](https://www.flexera.com/products/software-vulnerability-research)
* [Software Vulnerability Manager](/products/software-vulnerability-manager)
* [Security advisories from Secunia Research](https://www.flexera.com/products/security/software-vulnerability-advisories)
* [Report a vulnerability](https://www.flexera.com/about-us/contact-us/report-vulnerability)

 ![Secunia Research](/sites/default/files/2022-04/hero-secunia-research-bg.jpg)

Featured Details

## Multiple ways to consume Secunia Research

Secunia delivers software security research that provides reliable, curated and actionable vulnerability intelligence. Organizations can expect to receive standardized, validated and enriched vulnerability research on a specific version of a software product. Secunia Research supports four solutions:

![Software Vulnerability Research](/sites/default/files/2022-04/icon-secunia-research-svr.svg)

### [Software Vulnerability Research](https://www.flexera.com/products/software-vulnerability-research)

Software Vulnerability Research utilizes Secunia Research to drive awareness of vulnerabilities matching your specified criteria

[Learn More](https://www.flexera.com/products/software-vulnerability-research)

![Software Vulnerability Manager](/sites/default/files/2022-04/icon-secunia-research-svm.svg)

### [Software Vulnerability Manager](/products/software-vulnerability-manager)

Software Vulnerability Manager uses Secunia Research data to identify, prioritize and patch known vulnerable software detected in your environment

[Learn More](/products/software-vulnerability-manager)

![Data Platform](/sites/default/files/2022-04/icon-secunia-research-dp.svg)

### [Data Platform](https://www.flexera.com/products/data-platform)

Data Platform leverages Secunia Research to provide high-level insights based on major or minor versions of software in your normalized inventory

[Learn More](https://www.flexera.com/products/data-platform)

![Flexera One](/sites/default/files/2022-04/icon-secunia-research-flexera-one.svg)

### [Flexera One](/flexera-one)

Flexera One utilizes Secunia Research (alongside public NVD data) to provide more granular matching of build-level versions of software in your normalized inventory within its IT Asset Management and IT Visibility solutions

[Learn More](/flexera-one)

How it works

## Accurate, reliable vulnerability insights at your fingertips

The Secunia Research team from Flexera is comprised of several security specialists who conduct vulnerability research in various products in addition to testing, verifying and validating public vulnerability reports. Since its inception in 2002, the goal of the Secunia Research team is to provide the most accurate and reliable source of vulnerability intelligence.

Delivering the world’s best vulnerability intelligence requires skill and passion. Team members continually develop their skills exploring various high-profile closed and open-source software using a variety of approaches, focusing chiefly on thorough code audits and binary analysis. The team has received industry recognition, including naming members to [Microsoft’s Most Valuable Security Researchers](https://msrc-blog.microsoft.com/2019/08/07/announcing-2019-msrc-most-valuable-security-researchers/) list.

Secunia researchers discover hard-to-find vulnerabilities that aren’t normally identified with techniques such as fuzzing, and the results have been impressive. Members of the Secunia Research team have discovered critical vulnerabilities in products from vendors including Microsoft, Symantec, IBM, Adobe, RealNetworks, Trend Micro, HP, Blue Coat, Samba, CA, Mozilla and Apple.

The team produces invaluable security advisories based on research of the vulnerabilities affecting any given software update. Sometimes a single update can address multiple vulnerabilities of varying criticalities and threats; but these advisories aggregate and distill findings down to a single advisory perfect for the prioritization of patching efforts within [Software Vulnerability Manager](/products/software-vulnerability-manager). Criticality scores are consistently applied along with details around attack vector and other valuable details within [Software Vulnerability Research](/products/software-vulnerability-research/secunia-research). Illegitimate vulnerability reports are also investigated and rejected so you can focus only on what truly matters.

Informing IT, Transforming IT

## Industry insights to help keep you informed

[#### Webinar

### Stay Ahead of Cyber Threats: Flexera's Latest Vulnerability Insights

Join us for this session where we'll explore the latest findings from the Flexera Monthly Vulnerability Insights Report.](https://info.flexera.com/SVM-WBNR-Vulnerability-Insights-Roundtable)

[#### Webinar

### Dive deeper into the Flexera Annual Vulnerability Insights

We'll explore the key findings from the Flexera Annual Vulnerability Insights Report. Learn about the latest cybersecurity trends, the most targeted industries, the types of vulnerabilities, plus management and mitigation strategies.](https://info.flexera.com/SVM-WBNR-Flexera-Annual-Vulnerability-Insights?lead_source=Website%20Visitor&id=Flexera.com-Resources)

#### Video

### Close the Risk Window with Software Vulnerability Manager

Stop reacting. Gain control. Stay secure. Build a more effective risk mitigation process leveraging Secunia Research vulnerability intelligence and the largest repository of third-party patch data in the industry.

Remote video URL

[#### Trial

### Software Vulnerability Manager Assessment free trial

Get access to the complete set of modules of Software Vulnerability Manager: Research, Assessment and Patching](https://info.flexera.com/SVM-EVAL-Software-Vulnerability-Manager)

[#### Datasheet

### Protect your ServiceNow® investment with the highest quality data

IT Visibility offers certified ServiceNow integrations that accelerate platform expansion, improve ROI and increase efficiencies across ITIL processes by delivering clean software and hardware asset data directly.](/sites/default/files/datasheet-itv-maximize-servicenow-investment.pdf)

[#### Blog

### Avoid missing crucial vulnerability intelligence amid NVD backlog

Recent developments regarding the National Vulnerability Database (NVD) have some technology leaders on edge. Since February, the U.S. National Institute of Standards and Technology (NIST) has almost completely stopped enriching software vulnerabi...](https://www.flexera.com/blog/vulnerability-management/avoid-missing-crucial-vulnerability-intelligence-amid-nvd-backlog/)

[View all resources](https://www.flexera.com/resources?category%5Bsoftware-vulnerability-management%5D=software-vulnerability-management)

## Footer Menu

* Column
  + Business challenge
    - [Software renewals and audits](https://www.flexera.com/solutions/software-renewals-audits)
    - [Software license management and optimization](https://www.flexera.com/solutions/software-usage-costs)
    - [SaaS spend management](https://www.flexera.com/solutions/saas-spend)
    - [Cloud cost management](https://www.flexera.com/solutions/cloud-cost)
    - [IT asset lifecycle management](https://www.flexera.com/solutions/it-asset-lifecycle)
    - [CMDB data quality](https://www.flexera.com/solutions/cmdb-data-quality)
    - [Accurate IT inventory](https://www.flexera.com/solutions/it-inventory)
    - [Security and regulatory risk management](https://www.flexera.com/solutions/it-security-regulatory-risk)
    - [Sustainable IT](https://www.flexera.com/solutions/sustainable-it)
    - [AI-powered transformation](https://www.flexera.com/solutions/ai-powered-transformation)
    - [Public sector](https://www.flexera.com/solutions/public-sector)
* Column
  + Spend management by vendor
    - [IBM](https://www.flexera.com/solutions/vendor/ibm)
    - [Oracle](https://www.flexera.com/solutions/vendor/oracle)
    - [Microsoft](https://www.flexera.com/solutions/vendor/microsoft)
    - [SAP](https://www.flexera.com/solutions/vendor/sap)
    - [VMware](https://www.flexera.com/solutions/vendor/vmware)
    - [ServiceNow](https://www.flexera.com/solutions/vendor/servicenow)
    - [AWS](https://www.flexera.com/solutions/vendor/aws)
    - [Salesforce](https://www.flexera.com/solutions/vendor/salesforce)
    - [BMC](https://www.flexera.com/solutions/cmdb-data-quality/bmc)
    - [Adobe](https://www.flexera.com/solutions/vendor/adobe)
* Column
  + Products
    - [Flexera One](https://www.flexera.com/products/flexera-one)
    - [Snow Atlas](https://www.flexera.com/products/snow-atlas)
    - [Security](https://www.flexera.com/products/security)
    - [Application Readiness](https://www.flexera.com/products/adminstudio)
    - [All products](https://www.flexera.com/products)
    - [All Snow products](https://www.flexera.com/products/snow)
    - [Integrations](https://www.flexera.com/products/integrations)
* Column
  + Company
    - [About](https://www.flexera.com/about-us)
    - [Careers](https://www.flexera.com/about-us/careers)
    - [Leadership](https://www.flexera.com/about-us/leadership)
    - [Contact us](https://www.flexera.com/about-us/contact-us)
    - [Media / press center](https://www.flexera.com/about-us/press-center)
    - [Revenera.com](https://www.revenera.com)

 +1.800.374.4353

en

* [English](https://www.flexera.com/products/security/software-vulnerability-research/secunia-research?referrer=secunia)
* [Deutsch](https://www.flexera.de/products/security/software-vulnerability-research/secunia-research?referrer=secunia)

 [![Home](/themes/custom/flexera/images/logo.svg)](https://www.flexera.com/)

© 2025 Flexera. All Rights Reserved.

## Footer

* [Privacy Policy](https://www.flexera.com/legal/privacy-policy)
* [Terms and conditions](https://www.flexera.com/legal)
* [Contact Us](https://www.flexera.com/about-us/contact-us)
* [Impressum](https://www.flexera.com/about-us/impressum)
* [Site Map](https://www.flexera.com/sitemap)

#####

×

...



=== Content from bugzilla.mozilla.org_59504277_20250124_132120.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/1002340)
* [XML](/show_bug.cgi?ctype=xml&id=1002340)

Closed
[Bug 1002340](/show_bug.cgi?id=1002340)

Opened 11 years ago
Closed 11 years ago

# Shutdown crash with many mozGetUserMedia calls

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

Shutdown crash with many mozGetUserMedia calls

## Categories

### (Core :: WebRTC: Audio/Video, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=WebRTC%3A%20Audio%2FVideo#WebRTC%3A%20Audio%2FVideo)

WebRTC: Audio/Video
▾

Core :: WebRTC: Audio/Video
Bugs in WebRTC audio and video capture, handling, echo cancellation, encoding, and playback
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=WebRTC%3A%20Audio%2FVideo&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=WebRTC%3A%20Audio%2FVideo&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=WebRTC%3A%20Audio%2FVideo)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

x86\_64

macOS

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

critical

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla32

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Webcompat Priority | --- |
| --- | --- |
| Accessibility Severity | --- |
| Webcompat Score | --- |
| Performance Impact | --- |
| a11y-review | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox29 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=wontfix) |
| firefox30 | [+](/buglist.cgi?f1=cf_tracking_firefox30&o1=equals&v1=%2B) | [verified](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=verified) |
| firefox31 | [+](/buglist.cgi?f1=cf_tracking_firefox31&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=fixed) |
| firefox32 | [+](/buglist.cgi?f1=cf_tracking_firefox32&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox32&o1=equals&v1=fixed) |
| firefox-esr24 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=wontfix) |
| b2g-v1.2 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=fixed) |
| b2g-v1.3 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=fixed) |
| b2g-v1.3T | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=fixed) |
| b2g-v1.4 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=fixed) |
| b2g-v2.0 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_2_0&o1=equals&v1=fixed) |
| seamonkey2.26 | --- | [fixed](/buglist.cgi?f1=cf_status_seamonkey226&o1=equals&v1=fixed) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox29 |  | wontfix |
| firefox30 | + | verified |
| firefox31 | + | fixed |
| firefox32 | + | fixed |
| firefox-esr24 |  | wontfix |
| b2g-v1.2 |  | fixed |
| b2g-v1.3 |  | fixed |
| b2g-v1.3T |  | fixed |
| b2g-v1.4 |  | fixed |
| b2g-v2.0 |  | fixed |
| relnote-firefox |  | --- |
| seamonkey2.26 |  | fixed |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: jruderman, Assigned: jesup)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/ae002109ba1cfbb7f5ad990cc5d9fbaf?d=mm&size=40)  [jesup](/user_profile?user_id=11539)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

![](https://secure.gravatar.com/avatar/f8267efedda3c2e24d5829ef3a9d124e?d=mm&size=40)  [kjozwiak](/user_profile?user_id=455785)

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/d2dc9227eafcd0ec5ba3712ee4f19b75?d=mm&size=40)  [jruderman](/user_profile?user_id=11608)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/9362a14d9b87a3935eb16cfc834ed51f?d=mm&size=40)  [jib](/user_profile?user_id=456498)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

17 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[fuzzing-webrtc](/show_bug.cgi?id=792125 "RESOLVED FIXED - [meta] Fuzzing: WebRTC Library"), [1022945](/show_bug.cgi?id=1022945 "VERIFIED FIXED - Shutdown crash with many mozGetUserMedia calls")

Dependency [tree](/showdependencytree.cgi?id=1002340&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=1002340)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

[1006700](/show_bug.cgi?id=1006700 "RESOLVED INCOMPLETE - Assertion in DOM Workers testing high fake audio getUserMedia loads")

## Details

### (4 keywords, Whiteboard: [adv-main30+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[crash](/buglist.cgi?keywords=crash&resolution=---),
[csectype-uaf](/buglist.cgi?keywords=csectype-uaf&resolution=---),
[sec-critical](/buglist.cgi?keywords=sec-critical&resolution=---),
[testcase](/buglist.cgi?keywords=testcase&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[adv-main30+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [cbook](/user_profile?user_id=277293) | [in-testsuite](#c15 "11 years ago") | ? |
| --- | --- | --- |
| [cbook](/user_profile?user_id=277293) | in-testsuite | ? |
| --- | --- | --- |
|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (7 files)

| [testcase](/attachment.cgi?id=8413568)  [11 years ago](#c0)  [Jesse Ruderman](/user_profile?user_id=11608)   349 bytes, text/html |  | [Details](/attachment.cgi?id=8413568&action=edit) |
| --- | --- | --- |
| [Crash #1 [@ nsTimerImpl::GetGeneration]](/attachment.cgi?id=8413569)  [11 years ago](#c1)  [Jesse Ruderman](/user_profile?user_id=11608)   23.17 KB, text/plain |  | [Details](/attachment.cgi?id=8413569&action=edit) |
| [Crash #2 [@ mozilla::MediaStreamGraphImpl::AudioSampleRate]](/attachment.cgi?id=8413570)  [11 years ago](#c2)  [Jesse Ruderman](/user_profile?user_id=11608)   26.54 KB, text/plain |  | [Details](/attachment.cgi?id=8413570&action=edit) |
| [Patches I'm using to test this NOT FOR CHECKIN](/attachment.cgi?id=8417854)  [11 years ago](#c6)  [Randell Jesup [:jesup] (needinfo me)](/user_profile?user_id=11539)   7.85 KB, patch |  | [Details](/attachment.cgi?id=8417854&action=edit) | [Diff](/attachment.cgi?id=8417854&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1002340&attachment=8417854) |
| [Allow fake audio timers to skip if we overrun](/attachment.cgi?id=8418193)  [11 years ago](#c10)  [Randell Jesup [:jesup] (needinfo me)](/user_profile?user_id=11539)   1.32 KB, patch | benjamin : [review+](#a829028_7044 "11 years ago")  Sylvestre : [approval-mozilla-aurora+](#a2510185_495955 "11 years ago")  Sylvestre : [approval-mozilla-beta+](#a2510185_495955 "11 years ago") | [Details](/attachment.cgi?id=8418193&action=edit) | [Diff](/attachment.cgi?id=8418193&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1002340&attachment=8418193) |
| [mcCrash.txt](/attachment.cgi?id=8436044)  [11 years ago](#c23)  [Kamil Jozwiak [:kjozwiak]](/user_profile?user_id=455785)   8.36 KB, text/plain |  | [Details](/attachment.cgi?id=8436044&action=edit) |
| [auroraCrash.txt](/attachment.cgi?id=8436047)  [11 years ago](#c24)  [Kamil Jozwiak [:kjozwiak]](/user_profile?user_id=455785)   8.34 KB, text/plain |  | [Details](/attachment.cgi?id=8436047&action=edit) |

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Jesse Ruderman](/user_profile?user_id=11608)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=1002340#c0)• 11 years ago |
|  | |

Attached file
[testcase](attachment.cgi?id=8413568)
— [Details](attachment.cgi?id=8413568&action=edit)

1. Load the testcase in an ASan build of Firefox
2. Quit Firefox
Result: it usually crashes, but not always in the same place

|  | [Jesse Ruderman](/user_profile?user_id=11608)  Reporter |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=1002340#c1)• 11 years ago |
|  | |

Attached file
[Crash #1 [@ nsTimerImpl::GetGeneration]](attachment.cgi?id=8413569)
— [Details](attachment.cgi?id=8413569&action=edit)

|  | [Jesse Ruderman](/user_profile?user_id=11608)  Reporter |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=1002340#c2)• 11 years ago |
|  | |

Attached file
[Crash #2 [@ mozilla::MediaStreamGraphImpl::AudioSampleRate]](attachment.cgi?id=8413570)
— [Details](attachment.cgi?id=8413570&action=edit)

|  | [Randell Jesup [:jesup] (needinfo me)](/user_profile?user_id=11539)  Assignee |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=1002340#c3)• 11 years ago |
|  | |

A track is clearly still in use after MSG has destroyed itself.
MediaEngineWebRTCAudio holds the SourceMediaStreams in an nsTArray<SourceMediaStream \*>, since it has to access it off-mainthread, but protects it with a monitor and shutting down a track should Stop the source, removing it from the array.
My best guess is a race to shut down all the streams, and at a guess MSG isn't waiting for confirmation they're shut down, or MediaManager is shutting down the MediaEngineWebRTCAudio instance, and not waiting for that to stop. Code investigation should point us at one. I'll start by looking at MediaManager.

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1002340#a40766_1689)• 11 years ago |

Group: media-core-security

|  | [Maire Reavy [:mreavy]](/user_profile?user_id=74434) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1002340#a45520_74434)• 11 years ago |

Assignee: nobody → rjesup

|  | [Randell Jesup [:jesup] (needinfo me)](/user_profile?user_id=11539)  Assignee |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=1002340#c4)• 11 years ago |
|  | |

Ok, so this appears to be all tied to MediaEngineDefault timer data insertion into MSG. It looks like fake sources aren't being stopped synchronously (enough) to avoid timer races.

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1002340#a307537_280903)• 11 years ago |

[status-firefox32](/buglist.cgi?f1=cf_status_firefox32&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox32&o1=equals&v1=affected)
[tracking-firefox32](/buglist.cgi?f1=cf_tracking_firefox32&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox32&o1=equals&v1=%2B)

|  | [Randell Jesup [:jesup] (needinfo me)](/user_profile?user_id=11539)  Assignee |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=1002340#c5)• 11 years ago |
|  | |

ok, I know what's happening approximately now:
a) the system is overloaded with fake media elements. Audio ones in particular - to the point where the event queues appear to overload.
b) I dispatch 300 MEDIA\_STOP runnables to the MediaManager thread (from GetUserMediaCallbackMediaStreamListener::Invalidate()) to stop the fake streams. These runnables never run.... even though MediaManager thread continues to process events. (And I added a test for Dispatch() failure for sanity.)
c) Likewise, XPCOM Shutdown() tells the MediaManager thread to shut down, but it never finishes the thread Shutdown() call, which relies on a runnable to be added to the thread and complete before it shuts down.
d) switching the fake audio streams from nsITimer::TYPE\_REPEATING\_PRECISE to TYPE\_REPEATING\_SLACK fixes things.
With 300 repeating\_precise timers, there's no way even my fast system can insert MSG data at that rate in less than 10ms. (Ok, no way to reliably do so; it might at times)
So:
a) I could make fake data SLACK and if it glitches, oh well. Probably not a horrible idea.
b) I can make all the fake media sources use one timer. While more efficient, it's more code/locking/etc, and the primary overhead is almost certainly the MSG insertion and resampling. And for real-world use, I don't care about fake streams to begin with, let alone a large number of them.
c) The fact that this can lead to asan failures in GetGeneration and in MSG implies strongly there are some timing holes in the timer code (or elsewhere), since I shouldn't be able to provoke ASAN failures there with this code (unless something is dropping excess events instead of just making a Big Queue).
Adding some people who've actually touched the timer code, such as it is.
I assume
a) timer events, even PRECISE, can't "jump the queue"
b) there is no limit to the number of queued events
bsmedberg (or bz/ehsan, etc): is this a reasonable assumption? Any ideas?Flags: needinfo?(benjamin)

|  | [Randell Jesup [:jesup] (needinfo me)](/user_profile?user_id=11539)  Assignee |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=1002340#c6)• 11 years ago |
|  | |

Attached patch

[Patches I'm using to test this NOT FOR CHECKIN](attachment.cgi?id=8417854&action=diff)
— [Details](attachment.cgi?id=8417854&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1002340&attachment=8417854)

Incorporates a version of the patch for [bug 988877](/show_bug.cgi?id=988877 "RESOLVED FIXED - MediaManager threads are not ended by the end of xpcom-shutdown-threads") (MediaManager thread shutdown, which seem to not matter here - fails with and without).

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209) |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=1002340#c7)• 11 years ago |
|  | |

> a) timer events, even PRECISE, can't "jump the queue"
In what sense?
> b) there is no limit to the number of queued events
I believe this is true.

|  | [Randell Jesup [:jesup] (needinfo me)](/user_profile?user_id=11539)  Assignee |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=1002340#c8)• 11 years ago |
|  | |

Ok, switching to TYPE\_REPEATING\_PRECISE\_CAN\_SKIP seems to avoid the overload from eating us alive, and will work better than SLACK.
We still have a clear sec issue here with the timers, in that this bug (with the pileup of events) can cause an ASAN hit in GetGeneration. This \*shouldn't\* be possible with timers. We should likely spin off a sec bug on that.

|  | [Randell Jesup [:jesup] (needinfo me)](/user_profile?user_id=11539)  Assignee |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=1002340#c9)• 11 years ago |
|  | |

(In reply to Boris Zbarsky [:bz] from [comment #7](/show_bug.cgi?id=1002340#c7 "RESOLVED FIXED - Shutdown crash with many mozGetUserMedia calls"))
> > a) timer events, even PRECISE, can't "jump the queue"
>
> In what sense?
As in, a PRECISE timer can't get inserted at the head of the queue (which might be a sensible API for a PRECISE timer in an abstract sense, so long as there are no critical control events it jumps over (like Shutdown or something to turn off the timer)). With how we use event queues, jumping would be bad unless there was some limitation.

|  | [Randell Jesup [:jesup] (needinfo me)](/user_profile?user_id=11539)  Assignee |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=1002340#c10)• 11 years ago |
|  | |

Attached patch

[Allow fake audio timers to skip if we overrun](attachment.cgi?id=8418193&action=diff)
— [Details](attachment.cgi?id=8418193&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1002340&attachment=8418193)

|  | [Randell Jesup [:jesup] (needinfo me)](/user_profile?user_id=11539)  Assignee |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=1002340#c11)• 11 years ago |
|  | |

PRECISE\_CAN\_SKIP seems to work well. However, I caught a \*different\* ASAN failure in DOM Workers; I'll file a bug on that

|  | [Randell Jesup [:jesup] (needinfo me)](/user_profile?user_id=11539)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1002340#a733214_11539)• 11 years ago |

See Also: → [1006700](/show_bug.cgi?id=1006700 "RESOLVED INCOMPLETE - Assertion in DOM Workers testing high fake audio getUserMedia loads")

|  | [Randell Jesup [:jesup] (needinfo me)](/user_profile?user_id=11539)  Assignee |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=1002340#c12)• 11 years ago |
|  | |

[Bug 1006700](/show_bug.cgi?id=1006700 "RESOLVED INCOMPLETE - Assertion in DOM Workers testing high fake audio getUserMedia loads") - also note it's an assertion, not an ASAN issue

|  | [Randell Jesup [:jesup] (needinfo me)](/user_profile?user_id=11539)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1002340#a735353_11539)• 11 years ago |

[Attachment #8418193](/attachment.cgi?id=8418193&action=edit "Allow fake audio timers to skip if we overrun") -
Flags: review?(bzbarsky)

|  | [Randell Jesup [:jesup] (needinfo me)](/user_profile?user_id=11539)  Assignee |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=1002340#c13)• 11 years ago |
|  | |

Comment on [attachment 8418193](/attachment.cgi?id=8418193 "Allow fake audio timers to skip if we overrun") [[details]](/attachment.cgi?id=8418193&action=edit "Allow fake audio timers to skip if we overrun") [[diff]](/attachment.cgi?id=8418193&action=diff "Allow fake audio timers to skip if we overrun") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1002340&attachment=8418193)
Allow fake audio timers to skip if we overrun
Switching review to bsmedberg as bz is swamped at the moment
[Attachment #8418193](/attachment.cgi?id=8418193&action=edit "Allow fake audio timers to skip if we overrun") -
Flags: review?(bzbarsky) → review?(benjamin)

|  | [Benjamin Smedberg](/user_profile?user_id=7044) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1002340#a829028_7044)• 11 years ago |

[Attachment #8418193](/attachment.cgi?id=8418193&action=edit "Allow fake audio timers to skip if we overrun") -
Flags: review?(benjamin) → review+Flags: needinfo?(benjamin)

|  | [Randell Jesup [:jesup] (needinfo me)](/user_profile?user_id=11539)  Assignee |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=1002340#c14)• 11 years ago |
|  | |

Note: I didn't ask for sec-approval on this patch in the bug. Talked with abillings on IRC.
<https://hg.mozilla.org/integration/mozilla-inbound/rev/f9cecb6a3439>
This affects pretty much all revs. I'd suggest WONTFIX on this patch for 29 unless there's a chemspill, and probably not even then. I'm ambivalent as to whether this is needed for 30 or ESR on it's own. Mostly this is just a DoS attack; I'm going to file a followup bug for the ASAN hit (without the patch here) in Timer, since that may be a serious separate bug triggered by this. The only reason I care about uplifting this patch at all is because it's a way to trigger the timer ASAN and MSG ASAN issues.
I'm still not sure how this invokes the MSG ASAN issue, so leave-opening for that. With this patch it may be impossible to hit. Also the MSG issue might be only on 31 and 32, if it depends on padenot's changes.
[status-b2g-v1.2](/buglist.cgi?f1=cf_status_b2g_1_2&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=affected)
[status-b2g-v1.3](/buglist.cgi?f1=cf_status_b2g_1_3&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=affected)
[status-b2g-v1.3T](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=affected)
[status-b2g-v1.4](/buglist.cgi?f1=cf_status_b2g_1_4&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=affected)
[status-firefox29](/buglist.cgi?f1=cf_status_firefox29&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=affected)
[status-firefox30](/buglist.cgi?f1=cf_status_firefox30&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=affected)
[status-firefox31](/buglist.cgi?f1=cf_status_firefox31&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=affected)
[status-firefox-esr24](/buglist.cgi?f1=cf_status_firefox_esr24&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=affected)
[tracking-firefox30](/buglist.cgi?f1=cf_tracking_firefox30&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox30&o1=equals&v1=%3F)
[tracking-firefox31](/buglist.cgi?f1=cf_tracking_firefox31&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox31&o1=equals&v1=%3F)Whiteboard: [leave-open]

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1002340#a834370_280903)• 11 years ago |

[status-firefox29](/buglist.cgi?f1=cf_status_firefox29&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_firefox29&o1=equals&v1=wontfix)
[tracking-firefox30](/buglist.cgi?f1=cf_tracking_firefox30&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox30&o1=equals&v1=%3F) → [+](/buglist.cgi?f1=cf_tracking_firefox30&o1=equals&v1=%2B)
[tracking-firefox31](/buglist.cgi?f1=cf_tracking_firefox31&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox31&o1=equals&v1=%3F) → [+](/buglist.cgi?f1=cf_tracking_firefox31&o1=equals&v1=%2B)

|  | [Carsten Book [:Tomcat]](/user_profile?user_id=277293) |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=1002340#c15)• 11 years ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/f9cecb6a3439>
[status-firefox32](/buglist.cgi?f1=cf_status_firefox32&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox32&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox32&o1=equals&v1=fixed)Flags: in-testsuite?Target Milestone: --- → mozilla32

|  | [Randell Jesup [:jesup] (needinfo me)](/user_profile?user_id=11539)  Assignee |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=1002340#c16)• 11 years ago |
|  | |

Test for this won't be checked in until any resulting ASAN issues are dealt with and we're clean including release

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209) |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=1002340#c17)• 11 years ago |
|  | |

> As in, a PRECISE timer can't get inserted at the head of the queue
Correct. What it can do is add more events to the queue while its callback is running, but the queue is a queue.

|  | [Lukas Blakk [:lsblakk] use ?needinfo](/user_profile?user_id=272375) |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=1002340#c18)• 11 years ago |
|  | |

Can we get uplift nominations here for Aurora/Beta?Flags: needinfo?(rjesup)

|  | [Randell Jesup [:jesup] (needinfo me)](/user_profile?user_id=11539)  Assignee |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=1002340#c19)• 11 years ago |
|  | |

Comment on [attachment 8418193](/attachment.cgi?id=8418193 "Allow fake audio timers to skip if we overrun") [[details]](/attachment.cgi?id=8418193&action=edit "Allow fake audio timers to skip if we overrun") [[diff]](/attachment.cgi?id=8418193&action=diff "Allow fake audio timers to skip if we overrun") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1002340&attachment=8418193)
Allow fake audio timers to skip if we overrun
[Approval Request Comment]
Bug caused by (feature/regressing bug #): N/A
User impact if declined: DoS possible. Biggest impact is on test especially b2g emulator. May cause other security issues to be exposed by allowing a silly amount of load to be generated.
Testing completed (on m-c, etc.): On m-c for some time.
Risk to taking this patch (and alternatives if risky): extremely small
String or IDL/UUID changes made by this patch: none
[Attachment #8418193](/attachment.cgi?id=8418193&action=edit "Allow fake audio timers to skip if we overrun") -
Flags: approval-mozilla-beta?
[Attachment #8418193](/attachment.cgi?id=8418193&action=edit "Allow fake audio timers to skip if we overrun") -
Flags: approval-mozilla-aurora?Flags: needinfo?(rjesup)

|  | [Sylvestre Ledru [:Sylvestre]](/user_profile?user_id=495955) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1002340#a2510185_495955)• 11 years ago |

[Attachment #8418193](/attachment.cgi?id=8418193&action=edit "Allow fake audio timers to skip if we overrun") -
Flags: approval-mozilla-beta?
[Attachment #8418193](/attachment.cgi?id=8418193&action=edit "Allow fake audio timers to skip if we overrun") -
Flags: approval-mozilla-beta+
[Attachment #8418193](/attachment.cgi?id=8418193&action=edit "Allow fake audio timers to skip if we overrun") -
Flags: approval-mozilla-aurora?
[Attachment #8418193](/attachment.cgi?id=8418193&action=edit "Allow fake audio timers to skip if we overrun") -
Flags: approval-mozilla-aurora+

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=1002340#c20)• 11 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-aurora/rev/0298a65d3875>
<https://hg.mozilla.org/releases/mozilla-beta/rev/6879a3064321>
<https://hg.mozilla.org/releases/mozilla-b2g28_v1_3/rev/f99735a7b8ed>
<https://hg.mozilla.org/releases/mozilla-b2g26_v1_2/rev/53e59fb3f5a4>
Does this bug still need to be open? Also, does [comment 14](/show_bug.cgi?id=1002340#c14 "RESOLVED FIXED - Shutdown crash with many mozGetUserMedia calls") still hold for esr24?
[status-b2g-v1.2](/buglist.cgi?f1=cf_status_b2g_1_2&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_1_2&o1=equals&v1=fixed)
[status-b2g-v1.3](/buglist.cgi?f1=cf_status_b2g_1_3&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_1_3&o1=equals&v1=fixed)
[status-b2g-v2.0](/buglist.cgi?f1=cf_status_b2g_2_0&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_b2g_2_0&o1=equals&v1=fixed)
[status-firefox30](/buglist.cgi?f1=cf_status_firefox30&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=fixed)
[status-firefox31](/buglist.cgi?f1=cf_status_firefox31&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox31&o1=equals&v1=fixed)Flags: needinfo?(rjesup)

|  | [Randell Jesup [:jesup] (needinfo me)](/user_profile?user_id=11539)  Assignee |  |
| --- | --- | --- |
| [Comment 21](/show_bug.cgi?id=1002340#c21)• 11 years ago |
|  | |

I'm going to suggest WONTFIX for ESR24 for now. It's not a direct sec bug itself, just a pretty poor form of DOS attack.Flags: needinfo?(rjesup)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1002340#a2547834_75935)• 11 years ago |

Status: NEW → RESOLVEDClosed: 11 years ago
[status-firefox-esr24](/buglist.cgi?f1=cf_status_firefox_esr24&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=wontfix)Resolution: --- → FIXEDWhiteboard: [leave-open]

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 22](/show_bug.cgi?id=1002340#c22)• 11 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-b2g30_v1_4/rev/6879a3064321>
[status-b2g-v1.3T](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_1_3t&o1=equals&v1=fixed)
[status-b2g-v1.4](/buglist.cgi?f1=cf_status_b2g_1_4&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=fixed)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1002340#a3082137_280903)• 11 years ago |

Whiteboard: [adv-main30+]

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1002340#a3086797_1689)• 11 years ago |

Group: media-core-security

|  | [Matt Wobensmith [:mwobensmith][:matt:]](/user_profile?user_id=452604) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1002340#a3149595_452604)• 11 years ago |

QA Contact: kamiljoz

|  | [Kamil Jozwiak [:kjozwiak]](/user_profile?user_id=455785) |  |
| --- | --- | --- |
| [Comment 23](/show_bug.cgi?id=1002340#c23)• 11 years ago |
|  | |

Attached file
[mcCrash.txt](attachment.cgi?id=8436044)
— [Details](attachment.cgi?id=8436044&action=edit)

I went through the verification process using the following build(s):
- <http://ftp.mozilla.org/pub/mozilla.org/firefox/tinderbox-builds/mozilla-central-linux64-asan/latest/> (Changeset: 187089:7146e89a7b83)
- <http://ftp.mozilla.org/pub/mozilla.org/firefox/tinderbox-builds/mozilla-aurora-linux64-asan/latest/> (Changeset: 192965:d9edba5338ff)
- <http://ftp.mozilla.org/pub/mozilla.org/firefox/tinderbox-builds/mozilla-beta-linux64-asan/latest/> (Changeset: 192431:6da3dd0a2e7b)
- M-C (Crashed within a minute of start up)
- Aurora (Crashed within a minute of start up)
- BETA (Didn't crash)
(Used Ubuntu 13.10 on VM)
- Opened the test case in a single tab and waited several minutes
- Opened the test case in several different tabs
- Opened the test case in several windows
- Opened the test case in several e10s (m-c)
- Opened the test case in several "Private Windows"
- Opened the test case, waited a minute and then closed fx
It looks like there's still a crash with m-c and aurora. When you open the test case from [comment #0](/show_bug.cgi?id=1002340#c0 "RESOLVED FIXED - Shutdown crash with many mozGetUserMedia calls") and wait for about a minute, you'll end up receiving a crash. I'm not sure if this is the same crash as originally reported but it happens on both m-c and aurora 100% of the time.
It appears like it doesn't affect beta as I couldn't reproduce the crash. I had about 20 instances of the test case opened in beta and never received a single crash. I've attached the crashes for both m-c (mcCrash.txt) and aurora (auroraCrash.txt).
STR:
- download/install either the m-c or aurora asan build (used linux)
- once installed, run fx and open the test case from [comment #0](/show_bug.cgi?id=1002340#c0 "RESOLVED FIXED - Shutdown crash with many mozGetUserMedia calls")
- wait about one minute and it will automatically crash
Let me know if there's anymore information that I can provide! Once I get home, I'll build the latest asan's in OSX and see if it happens there also.

|  | [Kamil Jozwiak [:kjozwiak]](/user_profile?user_id=455785) |  |
| --- | --- | --- |
| [Comment 24](/show_bug.cgi?id=1002340#c24)• 11 years ago |
|  | |

Attached file
[auroraCrash.txt](attachment.cgi?id=8436047)
— [Details](attachment.cgi?id=8436047&action=edit)

|  | [Kamil Jozwiak [:kjozwiak]](/user_profile?user_id=455785) |  |
| --- | --- | --- |
| [Comment 25](/show_bug.cgi?id=1002340#c25)• 11 years ago |
|  | |

Randell, mind taking a quick look at the crashes reported above? The latest linux ASan builds under fx crash within a minute of opening the POC. The only one that doesn't crash is the beta build.Flags: needinfo?(rjesup)

|  | [Randell Jesup [:jesup] (needinfo me)](/user_profile?user_id=11539)  Assignee |  |
| --- | --- | --- |
| [Comment 26](/show_bug.cgi?id=1002340#c26)• 11 years ago |
|  | |

I can repro the MediaStreamGraph crash on nightly with the testcase. Per above, we blocked the primary vector for this, but hadn't found the asan bugs exposed by it. We hadn't been able to repro the mediastream one well; now we seem to (or more likely there were some contributing changes which re-exposed it).
It does \*not\* seem to repro on a no-opt ASAN build, only a debug-opt build. Best guess is that the GraphImpl() is going away during the resample, which makes sense.
I'll file a new bug on this issue; let's leave this bug on the event-queue-runaway issue (we have one on the timer already)Flags: needinfo?(rjesup)

|  | [Randell Jesup [:jesup] (needinfo me)](/user_profile?user_id=11539)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1002340#a3683224_11539)• 11 years ago |

Blocks: [1022945](/show_bug.cgi?id=1022945 "VERIFIED FIXED - Shutdown crash with many mozGetUserMedia calls")

|  | [Kamil Jozwiak [:kjozwiak]](/user_profile?user_id=455785) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1002340#a3705865_455785)• 11 years ago |

[status-firefox30](/buglist.cgi?f1=cf_status_firefox30&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=verified)

|  | [Justin Wood (:Callek)](/user_profile?user_id=129968) |  |
| --- | --- | --- |
| [Comment 27](/show_bug.cgi?id=1002340#c27)• 11 years ago |
|  | |

Fixed in SeaMonkey 2.26.1 (based on Gecko 29) with
<https://hg.mozilla.org/releases/mozilla-release/rev/7a22ed0a3752>
[status-seamonkey2.26](/buglist.cgi?f1=cf_status_seamonkey226&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_seamonkey226&o1=equals&v1=fixed)

|  | [Matt Wobensmith [:mwobensmith][:matt:]](/user_profile?user_id=452604) |  |
| --- | --- | --- |
| [Comment 28](/show_bug.cgi?id=1002340#c28)• 11 years ago |
|  | |

So, Randell or anyone, feel free to weigh in, but it appears that this bug was not fixed on Fx31 or Fx32.
The related [bug 1022945](/show_bug.cgi?id=1022945 "VERIFIED FIXED - Shutdown crash with many mozGetUserMedia calls") is currently being tracked for Fx33 only.
Shouldn't flags for one or both bugs indicate that Fx31 and Fx32 are affected? And that we are tracking as "affected" and/or "wontfix" for one or both?

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1002340#a42293331_1689)• 9 years ago |

Group: core-security
You need to [log in](/show_bug.cgi?id=1002340&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Jesse Ruderman](/user_profile?user_id=11608)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from blog.mozilla.org_a1905f2a_20250126_011816.html ===

[Skip to content](#content)

[Mozilla](https://blog.mozilla.org/en/)

![search](https://blog.mozilla.org/wp-content/themes/foxtail/assets/images/icons/search.svg)

* [Internet Culture](https://blog.mozilla.org/en/category/internet-culture/)
  + [Deep Dives](https://blog.mozilla.org/en/category/internet-culture/deep-dives/)
  + [Mozilla Explains](https://blog.mozilla.org/en/category/internet-culture/mozilla-explains/)
  + [Interviews](https://blog.mozilla.org/en/category/internet-culture/interviews/)
  + [Videos](https://blog.mozilla.org/en/category/videos/)
* [Privacy & Security](https://blog.mozilla.org/en/category/privacy-security/)
* [Products](https://blog.mozilla.org/en/category/products/)
  + [Firefox](https://blog.mozilla.org/en/category/products/firefox/)
  + [Pocket](https://blog.mozilla.org/en/category/products/pocket/)
  + [Mozilla VPN](https://blog.mozilla.org/en/category/products/mozilla-vpn/)
* [Mozilla](https://blog.mozilla.org/en/category/mozilla/)
  + [News](https://blog.mozilla.org/en/category/mozilla/news/)
  + [Internet Policy](https://blog.mozilla.org/en/category/mozilla/internet-policy/)
  + [Leadership](https://blog.mozilla.org/en/category/mozilla/leadership/)
    - [Mitchell Baker, CEO](https://blog.mozilla.org/en/author/mitchellmozillacom/)
    - [Mark Surman, ED Foundation](https://blog.mozilla.org/en/author/markmozillafoundation-org/)
    - [Eric Rescorla, Firefox CTO](https://blog.mozilla.org/en/author/ekrmozilla-com/)

[Download Firefox](https://www.mozilla.org/firefox/new/?utm_source=blog.mozilla.org&utm_medium=referral&utm_campaign=blog-nav)

![search](https://blog.mozilla.org/wp-content/themes/foxtail/assets/images/icons/search.svg)

#### Search

Search for:

![](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2019/01/mozilla-logo-bw-rgb.png)
## News

Official announcements and press releases

[![Room filled with people listening to a speaker on stage. Demo Day visual image in the background.](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/12/Demo_Day_Blog_Header_-1-800x800.jpg)
Mozilla
## Mozilla Builders: Celebrating community-driven innovation in AI

Read More](https://blog.mozilla.org/en/mozilla/mozilla-builders-demo-day/)

[![The Mozilla logo in green on a black background](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/12/logo-lockup-video-poster-800x800.png)
Mozilla
## Mozilla welcomes new executive team members

Read More](https://blog.mozilla.org/en/mozilla/new-executives/)

[![Decorative image of wrapped gifts in front of an iphone](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2023/11/moz_header_holiday_firefox-phone-gifts_blue-03.png-800x800.png)
Products
## Shopping for everyone? We’ve got you covered with the Fakespot Holiday Gift Guide 2024

Read More](https://blog.mozilla.org/en/products/shopping-for-everyone-weve-got-you-covered-with-the-fakespot-holiday-gift-guide-2024/)

[![Text: Mozilla Builders](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/06/Blog-16_9-1920x1080-1-800x800.png)
Mozilla
## 14 AI projects to watch: Mozilla’s first Builders Accelerator cohort kicks off

Read More](https://blog.mozilla.org/en/mozilla/14-ai-projects-to-watch-mozillas-first-builders-accelerator-cohort-kicks-off/)

[![A check mark next to the text "Fakespot."](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2023/07/Fakespot_ProductBlog-2-800x800.jpg)
News
## Fakespot’s guide to trending back-to-school products

Read More](https://blog.mozilla.org/en/mozilla/news/fakespots-guide-to-trending-back-to-school-products/)

[![](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/06/IG_Highlights_Icon-800x800.png)
Mozilla
## BAFTA Award-Winner Siobhán McSweeney to host Mozilla’s 2nd Annual Rise25 Awards in Dublin, Ireland on Aug. 13

Read More](https://blog.mozilla.org/en/mozilla/bafta-award-winner-siobhan-mcsweeney-to-host-mozillas-2nd-annual-rise25-awards-in-dublin-ireland-on-august-13/)

[![](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/05/fx_website_meta-image_tips-tricks_alt-04-1-800x800.webp)
Mozilla
## Here’s what we’re working on in Firefox

Read More](https://blog.mozilla.org/en/mozilla/heres-what-were-working-on-in-firefox/)

[![A check mark next to the text "Fakespot."](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2023/07/Fakespot_ProductBlog-2-800x800.jpg)
News
## Fakespot reveals the product categories with the most and least reliable product reviews

Read More](https://blog.mozilla.org/en/mozilla/news/fakespot-reveals-the-product-categories-with-the-most-and-least-reliable-product-reviews-for-summer-and-back-to-school-shopping/)

[![A dark blue speech bubble with horizontal purple and red bars on a pink background.](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2020/03/fx_blog_header_announcements_001_1920x1080-800x800.jpg)
Firefox
## Engaging with our Firefox community: Highlights from our recent AMA

Read More](https://blog.mozilla.org/en/products/firefox/engaging-with-our-firefox-community-highlights-from-our-recent-ama/)

[![](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/06/IG_Highlights_Icon-800x800.png)
Mozilla
## Mozilla announces finalists for the 2nd annual Rise25 Awards

Read More](https://blog.mozilla.org/en/mozilla/mozilla-announces-finalists-for-the-2nd-annual-rise25-awards/)

[![Mozilla and Anonym logos](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/06/blog_1200x800_v2-800x800.png)
Mozilla
## Introducing Anonym: Raising the bar for privacy-preserving digital advertising

Read More](https://blog.mozilla.org/en/mozilla/mozilla-anonym-raising-the-bar-for-privacy-preserving-digital-advertising/)

[![logo - zero with a diagonal line through it, and the letters D, I, N](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/06/odintbanner-500x500.png)
Mozilla
## Keeping GenAI technologies secure is a shared responsibility

Read More](https://blog.mozilla.org/en/mozilla/keeping-genai-technologies-secure-is-a-shared-responsibility/)

1
[2](https://blog.mozilla.org/en/category/mozilla/news/page/2?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=compa)
[3](https://blog.mozilla.org/en/category/mozilla/news/page/3?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=compa)
…
[24](https://blog.mozilla.org/en/category/mozilla/news/page/24?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=compa)
[next](https://blog.mozilla.org/en/category/mozilla/news/page/2?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=compa)

![newsletter](https://blog.mozilla.org/wp-content/themes/foxtail/assets/images/newsletter.png)

### Keep up with all things Firefox

Get how-tos, advice and news to make your Firefox experience work best for you.

Your e-mail address

Country
- select -
Afghanistan
Akrotiri
Albania
Algeria
American Samoa
Andorra
Angola
Anguilla
Antarctica
Antigua and Barbuda
Argentina
Armenia
Aruba
Ashmore and Cartier Islands
Australia
Austria
Azerbaijan
Bahamas, The
Bahrain
Baker Island
Bangladesh
Barbados
Bassas da India
Belarus
Belgium
Belize
Benin
Bermuda
Bhutan
Bolivia
Bonaire, Sint Eustatius, and Saba
Bosnia and Herzegovina
Botswana
Bouvet Island
Brazil
British Indian Ocean Territory
Brunei
Bulgaria
Burkina Faso
Burma
Burundi
Cabo Verde
Cambodia
Cameroon
Canada
Cayman Islands
Central African Republic
Chad
Chile
China
Christmas Island
Clipperton Island
Cocos (Keeling) Islands
Colombia
Comoros
Congo (Brazzaville)
Congo (Kinshasa)
Cook Islands
Coral Sea Islands
Costa Rica
Croatia
Cuba
Curaçao
Cyprus
Czech Republic
Côte d’Ivoire
Denmark
Dhekelia
Diego Garcia
Djibouti
Dominica
Dominican Republic
Ecuador
Egypt
El Salvador
Equatorial Guinea
Eritrea
Estonia
Ethiopia
Europa Island
Falkland Islands (Islas Malvinas)
Faroe Islands
Fiji
Finland
France
French Guiana
French Polynesia
French Southern and Antarctic Lands
Gabon
Gambia, The
Gaza Strip
Georgia
Germany
Ghana
Gibraltar
Glorioso Islands
Greece
Greenland
Grenada
Guadeloupe
Guam
Guatemala
Guernsey
Guinea
Guinea-Bissau
Guyana
Haiti
Heard Island and McDonald Islands
Honduras
Hong Kong
Howland Island
Hungary
Iceland
India
Indonesia
Iran
Iraq
Ireland
Isle of Man
Israel
Italy
Jamaica
Jan Mayen
Japan
Jarvis Island
Jersey
Johnston Atoll
Jordan
Juan de Nova Island
Kazakhstan
Kenya
Kingman Reef
Kiribati
Korea, North
Korea, South
Kosovo
Kuwait
Kyrgyzstan
Laos
Latvia
Lebanon
Lesotho
Liberia
Libya
Liechtenstein
Lithuania
Luxembourg
Macau
Macedonia
Madagascar
Malawi
Malaysia
Maldives
Mali
Malta
Marshall Islands
Martinique
Mauritania
Mauritius
Mayotte
Mexico
Micronesia, Federated States of
Midway Islands
Moldova
Monaco
Mongolia
Montenegro
Montserrat
Morocco
Mozambique
Namibia
Nauru
Navassa Island
Nepal
Netherlands
New Caledonia
New Zealand
Nicaragua
Niger
Nigeria
Niue
Norfolk Island
Northern Mariana Islands
Norway
Oman
Pakistan
Palau
Palmyra Atoll
Panama
Papua New Guinea
Paracel Islands
Paraguay
Peru
Philippines
Pitcairn Islands
Poland
Portugal
Puerto Rico
Qatar
Reunion
Romania
Russia
Rwanda
Saint Barthelemy
Saint Helena, Ascension, and Tristan da Cunha
Saint Kitts and Nevis
Saint Lucia
Saint Martin
Saint Pierre and Miquelon
Saint Vincent and the Grenadines
Samoa
San Marino
Sao Tome and Principe
Saudi Arabia
Senegal
Serbia
Seychelles
Sierra Leone
Singapore
Sint Maarten
Slovakia
Slovenia
Solomon Islands
Somalia
South Africa
South Georgia and South Sandwich Islands
South Sudan
Spain
Spratly Islands
Sri Lanka
Sudan
Suriname
Svalbard
Swaziland
Sweden
Switzerland
Syria
Taiwan
Tajikistan
Tanzania
Thailand
Timor-Leste
Togo
Tokelau
Tonga
Trinidad and Tobago
Tromelin Island
Tunisia
Turkey
Turkmenistan
Turks and Caicos Islands
Tuvalu
Uganda
Ukraine
United Arab Emirates
United Kingdom
United States
Uruguay
Uzbekistan
Vanuatu
Vatican City
Venezuela
Vietnam
Virgin Islands, British
Virgin Islands, U.S.
Wake Island
Wallis and Futuna
West Bank
Western Sahara
Yemen
Zambia
Zimbabwe

Language
English
Bahasa Indonesia
Deutsch
Español
Français
Polski
Português
Русский
正體中文

Format

 HTML

 Text

I’m okay with Mozilla handling my info as explained in this [Privacy Policy](https://www.mozilla.org/privacy/).

Sign up now
We will only send you
Mozilla-related information.

## Thanks!

If you haven’t previously confirmed a subscription to a Mozilla-related newsletter you may have to do so. Please check your inbox or your spam filter for an e-mail from us.

[Mozilla](https://www.mozilla.org/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)

##### Mozilla

* [About](https://www.mozilla.org/about/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Contact Us](https://www.mozilla.org/contact/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Donate](https://donate.mozilla.org/?presets=50,30,20,10&amount=30¤cy=usd&utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)

##### Firefox

* [Download Firefox](https://www.mozilla.org/firefox/new/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Desktop](https://www.mozilla.org/firefox/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Mobile](https://www.mozilla.org/firefox/mobile/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Features](https://www.mozilla.org/firefox/features/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Beta, Nightly, Developer Edition](https://www.mozilla.org/firefox/channel/desktop/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)

##### Resources

* [Privacy Hub](https://www.mozilla.org/privacy/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Browser Comparison](https://www.mozilla.org/firefox/browsers/compare/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Brand Standards](https://mozilla.design/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)

##### Social

Follow @Firefox

* [Twitter (@mozilla)](https://twitter.com/firefox)
* [Instagram (@mozilla)](https://www.instagram.com/firefox/)
* [YouTube (@firefoxchannel)](https://www.youtube.com/user/firefoxchannel)

Follow @Mozilla

* [Twitter (@mozilla)](https://twitter.com/mozilla)
* [Instagram (@mozilla)](https://www.instagram.com/mozilla/)

* [Website Privacy Notice](https://www.mozilla.org/privacy/websites/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Legal](https://www.mozilla.org/about/legal/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)



=== Content from bugzilla.mozilla.org_abf0a90f_20250124_132128.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/973874)
* [XML](/show_bug.cgi?ctype=xml&id=973874)

Closed
[Bug 973874](/show_bug.cgi?id=973874)

Opened 11 years ago
Closed 11 years ago

# Crash [@ js::jit::Simulator::instructionDecode] with poisoned pointer (0xdeadbeef)

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

Crash [@ js::jit::Simulator::instructionDecode] with poisoned pointer (0xdeadbeef)

## Categories

### (Core :: JavaScript Engine, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=JavaScript%20Engine#JavaScript%20Engine)

JavaScript Engine
▾

Core :: JavaScript Engine
The interpreter engine for the core JavaScript language, independent of the browser's object model. File ONLY core JavaScript language bugs in this category. For bugs involving browser objects such as "window" and "document", use the "DOM" component. For bugs involving calls between JavaScript and C++, use the "XPConnect" component.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=JavaScript%20Engine)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

ARM

Linux

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

major

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla30

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Webcompat Priority | --- |
| --- | --- |
| a11y-review | --- |
| Accessibility Severity | --- |
| Performance Impact | --- |
| Webcompat Score | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox30 | --- | [verified](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=verified) |
| firefox-esr24 | [-](/buglist.cgi?f1=cf_tracking_firefox_esr24&o1=equals&v1=-) | [unaffected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=unaffected) |
| seamonkey2.26 | --- | [fixed](/buglist.cgi?f1=cf_status_seamonkey226&o1=equals&v1=fixed) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox30 |  | verified |
| firefox-esr24 | - | unaffected |
| relnote-firefox |  | --- |
| seamonkey2.26 |  | fixed |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: decoder, Assigned: mjrosenb)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/b00d3efc283ff1d77f56f01b78f60713?d=mm&size=40)  [mjrosenb](/user_profile?user_id=419881)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/b29b83d12aba827b8ff68296e473bec5?d=mm&size=40)  [decoder](/user_profile?user_id=395101)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/4fe52ee1503aecf7b6c976b8eb7c1753?d=mm&size=40)  [willyelm](/user_profile?user_id=714609)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

14 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

[760642](/show_bug.cgi?id=760642 "RESOLVED FIXED - IonMonkey: Refactor IonAssemblyBuffer"), [999759](/show_bug.cgi?id=999759 "VERIFIED FIXED - Crash [@ js::jit::IonBailoutIterator::IonBailoutIterator]")

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[959597](/show_bug.cgi?id=959597 "RESOLVED FIXED - Add an ARM simulator for JIT code")

Dependency [tree](/showdependencytree.cgi?id=973874&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=973874)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Keywords: crash, sec-high, testcase, Whiteboard: [adv-main30+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[crash](/buglist.cgi?keywords=crash&resolution=---),
[sec-high](/buglist.cgi?keywords=sec-high&resolution=---),
[testcase](/buglist.cgi?keywords=testcase&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[adv-main30+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [RyanVM](/user_profile?user_id=75935) | [in-testsuite](#c18 "11 years ago") | ? |
| --- | --- | --- |
| [RyanVM](/user_profile?user_id=75935) | in-testsuite | ? |
| --- | --- | --- |
|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | qe-verify |  |

## Crash Data

Signature:

[[@ js::jit::Simulator::instructionDecode ]](https://crash-stats.mozilla.org/signature/?signature=js%3A%3Ajit%3A%3ASimulator%3A%3AinstructionDecode)

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (1 file)

| [fix\_crazy\_crash-r0.patch](/attachment.cgi?id=8378764)  [11 years ago](#c13)  [Marty Rosenberg [:mjrosenb]](/user_profile?user_id=419881)   2.90 KB, patch | dougc : [review+](#c16 "11 years ago") | [Details](/attachment.cgi?id=8378764&action=edit) | [Diff](/attachment.cgi?id=8378764&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=973874&attachment=8378764) |
| --- | --- | --- |

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=973874#c0)• 11 years ago |
|  | |

The following testcase crashes on mozilla-central revision 339f0d450d46 (x86 ARM simulator build, run with --fuzzing-safe --ion-eager --ion-check-range-analysis):
function test() {
eval("var M4x4 = {};\
M4x4.mul = function M4x4\_mul(a, r) {\
a11 = a[0];\
a21 = a[1];\
a23 = a[9];\
a33 = M4x4\_mul[10];\
return r;\
};\
M4x4.makeLookAt = function() {\
tm1 = Float32Array(16);\
tm2 = Float32Array(16);\
r = new Float32Array(16);\
return M4x4.mul(tm1, tm2, r);\
};\
for(j = 0; j < 3; j++)\
M4x4.mul(M4x4.makeLookAt(), M4x4.makeLookAt());\
");
} test();

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=973874#c1)• 11 years ago |
|  | |

Backtrace:
Program received signal SIGSEGV, Segmentation fault.
js::jit::Simulator::instructionDecode (this=0x948a068, instr=0xdeadbeef) at js/src/jit/arm/Simulator-arm.cpp:3980
3980 if (instr->conditionField() == kSpecialCondition) {
(gdb) bt 32
#0 js::jit::Simulator::instructionDecode (this=0x948a068, instr=0xdeadbeef) at js/src/jit/arm/Simulator-arm.cpp:3980
#1 0x083bd2a8 in execute<false> (this=0x948a068) at js/src/jit/arm/Simulator-arm.cpp:4036
#2 js::jit::Simulator::callInternal (this=0x948a068, entry=0xf78bc720 "\361O-\351\020\213-\355\r\200\240\341h\220\235\345\r\260\240\341t\240\235", <incomplete sequence \345>)
at js/src/jit/arm/Simulator-arm.cpp:4118
#3 0x083bd51c in js::jit::Simulator::call (this=0x948a068, entry=0xf78bc720 "\361O-\351\020\213-\355\r\200\240\341h\220\235\345\r\260\240\341t\240\235", <incomplete sequence \345>, argument\_count=8)
at js/src/jit/arm/Simulator-arm.cpp:4198
#4 0x081902a2 in EnterBaseline (cx=0x948a9e8, data=...) at js/src/jit/BaselineJIT.cpp:122
#5 0x081cd3da in js::jit::EnterBaselineMethod (cx=0x948a9e8, state=...) at js/src/jit/BaselineJIT.cpp:154
#6 0x08565fb5 in js::RunScript (cx=0x948a9e8, state=...) at js/src/vm/Interpreter.cpp:412
#7 0x085661b2 in RunScript (state=..., cx=0x948a9e8) at js/src/vm/Interpreter.cpp:390
#8 js::ExecuteKernel (cx=0x948a9e8, script=0xf75331a8, scopeChainArg=(JSObject &) @0xf753b790 [object Call] delegate, thisv=..., type=js::EXECUTE\_DIRECT\_EVAL, evalInFrame=..., result=0xf7acbd88)
at js/src/vm/Interpreter.cpp:631
#9 0x08118394 in EvalKernel (cx=0x948a9e8, args=..., evalType=DIRECT\_EVAL, caller=..., scopeobj=(JSObject \* const) 0xf753b790 [object Call] delegate, pc=0x9518f3b "{")
at js/src/builtin/Eval.cpp:336
#10 0x081189e7 in js::DirectEval (cx=0x948a9e8, args=...) at js/src/builtin/Eval.cpp:453
#11 0x0820eaf0 in js::jit::DoCallFallback (cx=0x948a9e8, frame=0xf7acbdd0, stub=0x9519ef8, argc=1, vp=0xf7acbd88, res=$jsval(-nan(0xfff8200000000))) at js/src/jit/BaselineIC.cpp:8098
#12 0x083bca8b in js::jit::Simulator::softwareInterrupt (this=0x948a068, instr=0x9519674) at js/src/jit/arm/Simulator-arm.cpp:2155
#13 0x083b9b95 in decodeType7 (instr=0x9519674, this=0x948a068) at js/src/jit/arm/Simulator-arm.cpp:3147
#14 js::jit::Simulator::instructionDecode (this=0x948a068, instr=0x9519674) at js/src/jit/arm/Simulator-arm.cpp:4004
#15 0x083bd2a8 in execute<false> (this=0x948a068) at js/src/jit/arm/Simulator-arm.cpp:4036
#16 js::jit::Simulator::callInternal (this=0x948a068, entry=0xf78bc698 "\361O-\351\020\213-\355\r\200\240\341h\220\235\345t\240\235", <incomplete sequence \345>)
at js/src/jit/arm/Simulator-arm.cpp:4118
#17 0x083bd51c in js::jit::Simulator::call (this=0x948a068, entry=0xf78bc698 "\361O-\351\020\213-\355\r\200\240\341h\220\235\345t\240\235", <incomplete sequence \345>, argument\_count=8)
at js/src/jit/arm/Simulator-arm.cpp:4198
#18 0x082a4e39 in EnterIon (data=..., cx=0x948a9e8) at js/src/jit/Ion.cpp:2235
[...]
(gdb) x /i $pc
=> 0x83b975d <js::jit::Simulator::instructionDecode(js::jit::SimInstruction\*)+45>: mov (%edi),%edx
(gdb) info reg edi edx
edi 0xdeadbeef -559038737
edx 0xdeadbeef -559038737
Marked s-s because this involves a poisoned pointer. If this is a bug in the simulator only, feel free to remove the s-s.
[status-firefox30](/buglist.cgi?f1=cf_status_firefox30&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=affected)

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297) |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=973874#c2)• 11 years ago |
|  | |

I can reproduce this on OS X. If you use a threadsafe build, you need --ion-parallel-compile=off as well.
Marty, Doug: can one of you take a look? Are we executing a pool instruction?Flags: needinfo?(mrosenberg)Flags: needinfo?(dtc-moz)

|  | [Douglas Crosher [:dougc]](/user_profile?user_id=25650) |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=973874#c3)• 11 years ago |
|  | |

(In reply to Jan de Mooij [:jandem] from [comment #2](/show_bug.cgi?id=973874#c2 "VERIFIED FIXED - Crash [@ js::jit::Simulator::instructionDecode] with poisoned pointer (0xdeadbeef)"))
> I can reproduce this on OS X. If you use a threadsafe build, you need
> --ion-parallel-compile=off as well.
>
> Marty, Doug: can one of you take a look? Are we executing a pool instruction?
This is reproducible on hardware so may not be a problem with the simulator.
The simulator gives the following trace leading up to the crash.
Baseline code:
0xf76d540c ldr r7, [r4, #72]
0xf76d5410 vldr s0, [r7, #36]
0xf76d5414 vcmp.f32 s0, s0
0xf76d5418 vmrs APSR\_nzcv, fpscr
0xf76d541c bvc #0
0xf76d5420 vldr s0, [pc, #32]
0xf76d5424 vcvt.f64.f32 d0, s0
0xf76d5428 b #9176 < branch to ioncache code at 0xf76d7808
Ioncache code:
0xf76d7808 ldr lr, [r2]
0xf76d780c movw r12, #23016
0xf76d7810 movt r12, #62980
0xf76d7814 cmp lr, r12
0xf76d7818 bne #32
0xf76d781c ldr lr, [r2, #4]
0xf76d7820 movw r12, #45472
0xf76d7824 movt r12, #62978
0xf76d7828 cmp lr, r12
0xf76d782c bne #12
0xf76d7830 ldr r2, [r2, #8]
0xf76d7834 add r12, r2, #2048
0xf76d7838 vstr d0, [r12, #16]
0xf76d783c b #-9164 < branch back to baseline code at 0xf76d5478
Baseline code:
0xf76d5478 ldr pc, [pc, #-20] < crash !!!
0xf76d547c str r0, [sp, #-4]!
0xf76d5480 movw r0, #40960
0xf76d5484 movt r0, #63257
0xf76d5488 ldr r12, [r0, #128]
0xf76d548c cmp r12, #0
0xf76d5490 bne #72
0xf76d5494 push {r0, r1, r2, r3}
0xf76d5498 vpush {d0, d1, d2, d3, d4, d5, d6, d7}
Memory dump around [pc, #-20]:
0xf76d5450: 0xdeadbeef -559038737
0xf76d5454: 0xdeadbeef -559038737
0xf76d5458: 0xf76dc314 -143801580
0xf76d545c: 0xdeadbeef -559038737
0xf76d5460: 0xdeadbeef -559038737
0xf76d5464: 0xf76dc318 -143801576
0xf76d5468: 0xdeadbeef -559038737
0xf76d546c: 0xdeadbeef -559038737
0xf76d5470: 0xdeadbeef -559038737
0xf76d5474: 0xdeadbeef -559038737
Shall try to narrow down the source of the 'ldr' instruction at 0xf76d5478 to check if it is emitted as intended.Flags: needinfo?(dtc-moz)

|  | [Douglas Crosher [:dougc]](/user_profile?user_id=25650) |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=973874#c4)• 11 years ago |
|  | |

Looks like a problem with the constant pools. The 'ldr' instruction is emitted by patchConstantPoolLoad when finishing the pools. The instruction seems to be encoded correctly and the problem seems to in the larger constant pools code.Depends on: [760642](/show_bug.cgi?id=760642 "RESOLVED FIXED - IonMonkey: Refactor IonAssemblyBuffer")

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297) |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=973874#c5)• 11 years ago |
|  | |

While [bug 760642](/show_bug.cgi?id=760642 "RESOLVED FIXED - IonMonkey: Refactor IonAssemblyBuffer") will probably fix this, that bug is not ready yet and won't be backported. Can we fix the old code in the meantime?
Executing data in the constant pool as code seems scary. An attacker can probably control what's in there and execute arbitrary code, right?

|  | [Nicolas B. Pierron [:nbp]](/user_profile?user_id=422187) |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=973874#c6)• 11 years ago |
|  | |

(In reply to Jan de Mooij [:jandem] from [comment #5](/show_bug.cgi?id=973874#c5 "VERIFIED FIXED - Crash [@ js::jit::Simulator::instructionDecode] with poisoned pointer (0xdeadbeef)"))
> While [bug 760642](/show_bug.cgi?id=760642 "RESOLVED FIXED - IonMonkey: Refactor IonAssemblyBuffer") will probably fix this, that bug is not ready yet and won't
> be backported. Can we fix the old code in the meantime?
>
> Executing data in the constant pool as code seems scary. An attacker can
> probably control what's in there and execute arbitrary code, right?
0xdeadbeef is not aligned, I don't know if this matters for ARM cpus, but I would assume this would cause a SIGBUS. Still it sounds safer if all these constants could be made to default to the first page, such as 0x00000bad to crash instead badly of potentially executing shell-code.

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=973874#c7)• 11 years ago |
|  | |

Is the 0xdeadbeef stuff also used in optimized builds? I thought that kind of poisoning is only done in debug builds.

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297) |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=973874#c8)• 11 years ago |
|  | |

(In reply to Nicolas B. Pierron [:nbp] from [comment #6](/show_bug.cgi?id=973874#c6 "VERIFIED FIXED - Crash [@ js::jit::Simulator::instructionDecode] with poisoned pointer (0xdeadbeef)"))
> 0xdeadbeef is not aligned, I don't know if this matters for ARM cpus, but I
> would assume this would cause a SIGBUS. Still it sounds safer if all these
> constants could be made to default to the first page, such as 0x00000bad to
> crash instead badly of potentially executing shell-code.
What if we can jump to some int32-constant stored in the middle of the pool? Or can we only jump to 0xdeadbeef?

|  | [Nicolas B. Pierron [:nbp]](/user_profile?user_id=422187) |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=973874#c9)• 11 years ago |
|  | |

(In reply to Christian Holler (:decoder) from [comment #7](/show_bug.cgi?id=973874#c7 "VERIFIED FIXED - Crash [@ js::jit::Simulator::instructionDecode] with poisoned pointer (0xdeadbeef)"))
> Is the 0xdeadbeef stuff also used in optimized builds? I thought that kind
> of poisoning is only done in debug builds.
This one is a dummy placeholder waiting to be patched. So this one is generated all the time as we do not have the data at the time of the code generation.
(In reply to Jan de Mooij [:jandem] from [comment #8](/show_bug.cgi?id=973874#c8 "VERIFIED FIXED - Crash [@ js::jit::Simulator::instructionDecode] with poisoned pointer (0xdeadbeef)"))
> (In reply to Nicolas B. Pierron [:nbp] from [comment #6](/show_bug.cgi?id=973874#c6 "VERIFIED FIXED - Crash [@ js::jit::Simulator::instructionDecode] with poisoned pointer (0xdeadbeef)"))
> > 0xdeadbeef is not aligned, I don't know if this matters for ARM cpus, but I
> > would assume this would cause a SIGBUS. Still it sounds safer if all these
> > constants could be made to default to the first page, such as 0x00000bad to
> > crash instead badly of potentially executing shell-code.
>
> What if we can jump to some int32-constant stored in the middle of the pool?
> Or can we only jump to 0xdeadbeef?
We set the PC (ldr pc, …) based on a relative-pc read (…, [pc, #-0x20]). This is how we are supposed to use the constant pool, by reading addresses or constant out of it.
If we generate code correctly we should not be able to execute anything in the constant pool. In addition, these constant pools are placed after unconditional jumps. So, unless you have a jump into the constant pool, there is no way you are going to execute it.

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297) |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=973874#c10)• 11 years ago |
|  | |

(In reply to Nicolas B. Pierron [:nbp] from [comment #9](/show_bug.cgi?id=973874#c9 "VERIFIED FIXED - Crash [@ js::jit::Simulator::instructionDecode] with poisoned pointer (0xdeadbeef)"))
> If we generate code correctly we should not be able to execute anything in
> the constant pool.
I know, but we are \*not\* generating code correctly or we wouldn't be crashing. If we can emit a bogus "ldr pc, [pc, #-20]" instruction, we could probably also emit an ldr instruction that jumps to some more dangerous location inside or outside the constant pool.
Marty, can you take this bug?

|  | [Douglas Crosher [:dougc]](/user_profile?user_id=25650) |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=973874#c11)• 11 years ago |
|  | |

fwiw the ldr instruction is generate via jumpWithPatch and this is called from RepatchIonCache::emitInitialJump.
The CodeLocationJump::repoint looks plausible and points to the instruction and into the constant pool at the location loaded by the ldr instruction.
However I am not seeing a call to PatchJump to actually fill the entry in the constant pool before the ldr instruction is reached?
Sorry, it appears possible that it is not a constant pool issue.

|  | [Douglas Crosher [:dougc]](/user_profile?user_id=25650) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=973874#c12)• 11 years ago |
|  | |

It would appear that jumpWithPatch is expected to encode an initial jump target, and it does appear to do this in most cases. Perhaps the constant pool entry is just not being initialized with the branch target and this causes this problem when the ldr encoding is used and PatchJump has not been called. Looking like a constant pool issue again.

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=973874#a103293_1689)• 11 years ago |

Keywords: [sec-high](/buglist.cgi?keywords=sec-high&resolution=---)

|  | [Marty Rosenberg [:mjrosenb]](/user_profile?user_id=419881)  Assignee |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=973874#c13)• 11 years ago |
|  | |

Attached patch

[fix\_crazy\_crash-r0.patch](attachment.cgi?id=8378764&action=diff)
— [Details](attachment.cgi?id=8378764&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=973874&attachment=8378764)

This fixed a similar sounding bug that was reported on IRC. Haven't tested it on the testcase in this bug yet.
[Attachment #8378764](/attachment.cgi?id=8378764&action=edit "fix_crazy_crash-r0.patch") -
Flags: review?(dtc-moz)Flags: needinfo?(mrosenberg)

|  | [Douglas Crosher [:dougc]](/user_profile?user_id=25650) |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=973874#c14)• 11 years ago |
|  | |

(In reply to Marty Rosenberg [:mjrosenb] from [comment #13](/show_bug.cgi?id=973874#c13 "VERIFIED FIXED - Crash [@ js::jit::Simulator::instructionDecode] with poisoned pointer (0xdeadbeef)"))
> Created [attachment 8378764](/attachment.cgi?id=8378764 "fix_crazy_crash-r0.patch") [[details]](/attachment.cgi?id=8378764&action=edit "fix_crazy_crash-r0.patch") [[diff]](/attachment.cgi?id=8378764&action=diff "fix_crazy_crash-r0.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=973874&attachment=8378764)
> fix\_crazy\_crash-r0.patch
>
> This fixed a similar sounding bug that was reported on IRC. Haven't tested
> it on the testcase in this bug yet.
Thank you. The bug does not occur with the changes to as\_BranchPool applied.
However, the failing instruction has been replaced by a branch rather than a ldr, so I would need more time to review this to be sure it was not just avoiding the problematic case. An explanation would help?Flags: needinfo?(mrosenberg)

|  | [Marty Rosenberg [:mjrosenb]](/user_profile?user_id=419881)  Assignee |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=973874#c15)• 11 years ago |
|  | |

Yeah. Assembler::as\_BranchPool is supposed fill the repatch label with the offset of the branch/load instruction. This should always be the returned instruction, but since we initially got the offset with nextOffset() rather than just taking the address generated by insert\_entry, when a pool was inserted immediately before this instruction, it resulted in the repatch label getting the address of the branch over the pool, rather than the load immediately after the pool. Then when we go to repatch it later, it is already a branch, so it looks legit enough, but it leaves the original load in place, along with the poisoned address.Flags: needinfo?(mrosenberg)

|  | [Douglas Crosher [:dougc]](/user_profile?user_id=25650) |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=973874#c16)• 11 years ago |
|  | |

Comment on [attachment 8378764](/attachment.cgi?id=8378764 "fix_crazy_crash-r0.patch") [[details]](/attachment.cgi?id=8378764&action=edit "fix_crazy_crash-r0.patch") [[diff]](/attachment.cgi?id=8378764&action=diff "fix_crazy_crash-r0.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=973874&attachment=8378764)
fix\_crazy\_crash-r0.patch
Review of [attachment 8378764](/attachment.cgi?id=8378764 "fix_crazy_crash-r0.patch") [[details]](/attachment.cgi?id=8378764&action=edit "fix_crazy_crash-r0.patch") [[diff]](/attachment.cgi?id=8378764&action=diff "fix_crazy_crash-r0.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=973874&attachment=8378764):
-----------------------------------------------------------------
Thank you for the quick patch, and the explanation. It looks like part of the problem is that the jump was not being marked as a branch, and thus executableCopy was not calling patchBranch on the errant load. The patch does appear to work around this.
::: js/src/jit/arm/Assembler-arm.cpp
@@ +1703,5 @@
> BufferOffset
> Assembler::as\_BranchPool(uint32\_t value, RepatchLabel \*label, ARMBuffer::PoolEntry \*pe, Condition c)
> {
> PoolHintPun php;
> + //BufferOffset next = nextOffset();
Remove.
::: js/src/jit/arm/MacroAssembler-arm.cpp
@@ +4120,5 @@
> + static int count = 0;
> + BufferOffset bo = as\_BranchPool(0xdeadbeef - ((count << 2) & 0xffff), label, &pe, cond);
> + if (((count << 2) & 0xffff) == 0)
> + fprintf(stderr, "rolling over, now 0x%x\n", count);
> + count++;
Remove this debug code.
::: js/src/jit/arm/Simulator-arm.cpp
@@ +3812,5 @@
> void
> Simulator::instructionDecode(SimInstruction \*instr)
> {
> + if (getenv("DIS\_EVERY\_INST"))
> + DisassembleInstruction((uint32\_t)instr);
Remove this debug code.
[Attachment #8378764](/attachment.cgi?id=8378764&action=edit "fix_crazy_crash-r0.patch") -
Flags: review?(dtc-moz) → review+

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=973874#a1409037_1689)• 11 years ago |

Group: javascript-core-security

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=973874#c17)• 11 years ago |
|  | |

Is this ready for sec-approval and landing, Marty? Thanks.Assignee: nobody → mrosenbergFlags: needinfo?(mrosenberg)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=973874#c18)• 11 years ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/21879e298728>
Looks like this landed without sec-approval. Hope it doesn't affect too much else.Status: NEW → RESOLVEDClosed: 11 years ago
[status-firefox30](/buglist.cgi?f1=cf_status_firefox30&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=fixed)Flags: in-testsuite?Resolution: --- → FIXEDTarget Milestone: --- → mozilla30

|  | [Marty Rosenberg [:mjrosenb]](/user_profile?user_id=419881)  Assignee |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=973874#c19)• 11 years ago |
|  | |

err, Oops, I was pinged to land it, and forgot to ask for sec-approval. We haven't seen this on real hardware, so the chances of it affecting real hardware seem low.Flags: needinfo?(mrosenberg)

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=973874#c20)• 11 years ago |
|  | |

Doesn't [comment 3](/show_bug.cgi?id=973874#c3 "VERIFIED FIXED - Crash [@ js::jit::Simulator::instructionDecode] with poisoned pointer (0xdeadbeef)") say it is reproducible on hardware?

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=973874#a1710398_1689)• 11 years ago |

Group: javascript-core-security

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 21](/show_bug.cgi?id=973874#c21)• 11 years ago |
|  | |

(In reply to Marty Rosenberg [:mjrosenb] from [comment #19](/show_bug.cgi?id=973874#c19 "VERIFIED FIXED - Crash [@ js::jit::Simulator::instructionDecode] with poisoned pointer (0xdeadbeef)"))
> err, Oops, I was pinged to land it, and forgot to ask for sec-approval. We
> haven't seen this on real hardware, so the chances of it affecting real
> hardware seem low.
So we don't know how far back this goes? Do we need to port this anywhere, like ESR?

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Comment 22](/show_bug.cgi?id=973874#c22)• 11 years ago |
|  | |

This is an ARM bug, and I think we don't ship ESR on ARM.

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 23](/show_bug.cgi?id=973874#c23)• 11 years ago |
|  | |

Deja Vu. We had this discussion in another bug and I thought one of our downstream partners (Redhat?) did.

|  | [Lawrence Mandel [:lmandel] (use needinfo)](/user_profile?user_id=424995) |  |
| --- | --- | --- |
| [Comment 24](/show_bug.cgi?id=973874#c24)• 11 years ago |
|  | |

[Comment 2](/show_bug.cgi?id=973874#c2 "VERIFIED FIXED - Crash [@ js::jit::Simulator::instructionDecode] with poisoned pointer (0xdeadbeef)") says that this is reproducible on OSX, although I'm not clear if that means a desktop or B2G desktop build. Andrew/Jan, can you confirm that this is ARM specific and that this doesn't impact desktop users?Flags: needinfo?(jdemooij)Flags: needinfo?(continuation)

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Comment 25](/show_bug.cgi?id=973874#c25)• 11 years ago |
|  | |

Yeah, the patch only touches ARM code, so I think it is ARM only. This is reproducible on OSX in the ARM simulator, which should not affect desktop users.Flags: needinfo?(jdemooij)Flags: needinfo?(continuation)

|  | [Lawrence Mandel [:lmandel] (use needinfo)](/user_profile?user_id=424995) |  |
| --- | --- | --- |
| [Comment 26](/show_bug.cgi?id=973874#c26)• 11 years ago |
|  | |

Thanks Andrew. Marking as esr24-.
[status-firefox-esr24](/buglist.cgi?f1=cf_status_firefox_esr24&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_firefox_esr24&o1=equals&v1=unaffected)
[tracking-firefox-esr24](/buglist.cgi?f1=cf_tracking_firefox_esr24&o1=isnotempty):
--- → [-](/buglist.cgi?f1=cf_tracking_firefox_esr24&o1=equals&v1=-)

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=973874#a5514478_132034)• 11 years ago |

Depends on: [999759](/show_bug.cgi?id=999759 "VERIFIED FIXED - Crash [@ js::jit::IonBailoutIterator::IonBailoutIterator]")

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=973874#a9020122_280903)• 11 years ago |

Whiteboard: [adv-main30+]

|  | [Matt Wobensmith [:mwobensmith][:matt:]](/user_profile?user_id=452604) |  |
| --- | --- | --- |
| [Comment 27](/show_bug.cgi?id=973874#c27)• 11 years ago |
|  | |

Hi decoder - can you verify this? Thanks.Flags: needinfo?(choller)

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=973874#a9192448_395101)• 11 years ago |

Status: RESOLVED → VERIFIED

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Comment 28](/show_bug.cgi?id=973874#c28)• 11 years ago |
|  | |

JSBugMon: This bug has been automatically verified fixed.

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Comment 29](/show_bug.cgi?id=973874#c29)• 11 years ago |
|  | |

Verified by the bot :)Flags: needinfo?(choller)

|  | [Justin Wood (:Callek)](/user_profile?user_id=129968) |  |
| --- | --- | --- |
| [Comment 30](/show_bug.cgi?id=973874#c30)• 11 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-release/rev/7fba42f5f555>
[status-seamonkey2.26](/buglist.cgi?f1=cf_status_seamonkey226&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_seamonkey226&o1=equals&v1=fixed)

|  | [Matt Wobensmith [:mwobensmith][:matt:]](/user_profile?user_id=452604) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=973874#a10212353_452604)• 11 years ago |

[status-firefox30](/buglist.cgi?f1=cf_status_firefox30&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox30&o1=equals&v1=verified)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=973874#a39257581_1689)• 10 years ago |

Group: core-security
You need to [log in](/show_bug.cgi?id=973874&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Marty Rosenberg [:mjrosenb]](/user_profile?user_id=419881)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from www.mozilla.org_221a9f69_20250124_132114.html ===


## Help us improve your Mozilla experience

In addition to Cookies necessary for this site to function, we’d like your permission to set some additional Cookies to better understand your browsing needs and improve your experience. Rest assured — we value your privacy.

Accept All Additional Cookies

Reject All Additional Cookies

[Cookie settings](/en-US/privacy/websites/cookie-settings/)

Menu
[![Mozilla](https://www.mozilla.org/media/img/logos/m24/lockup-black.f2ddba3f0724.svg)](/en-US/)

* [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
  Firefox browsers](/en-US/firefox/)
  Close Firefox browsers menu
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for Desktop](/en-US/firefox/new/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for iOS](/en-US/firefox/browsers/mobile/ios/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for Android](/en-US/firefox/browsers/mobile/android/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/focus/logo.aac3e33175cb.svg)
    ## Firefox Focus](/en-US/firefox/browsers/mobile/focus/)
  + [## Firefox blog](https://blog.mozilla.org/firefox/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=firefox)
* [Products](/en-US/products/)
  Close Products menu
  + [![](https://www.mozilla.org/media/protocol/img/logos/mozilla/vpn/logo.c648f487bfb8.svg)
    ## Mozilla VPN](/en-US/products/vpn/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/monitor/logo.d97e5516f9e6.svg)
    ## Mozilla Monitor](https://monitor.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/relay/logo-white.d42a8b52e44c.svg)
    ## Firefox Relay](https://relay.firefox.com/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/protocol/img/logos/pocket/logo.17446bc33a5d.svg)
    ## Pocket](https://getpocket.com/firefox_learnmore/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/nav/icons/icon-mdn-plus.f54475f980ab.svg)
    ## MDN Plus](https://developer.mozilla.org/plus?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/logos/fakespot/logo-blue.3973b8fe9631.svg)
    ## Fakespot](https://fakespot.com/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/logos/thunderbird/logo-thunderbird.121e9c0fed45.svg)
    ## Thunderbird](https://www.thunderbird.net/)

  [All products](/en-US/products/)
* [About us](/en-US/about/)
  Close About us menu

  Our Mission

  + [## About Mozilla](/en-US/about/)
  + [## The Mozilla Manifesto](/en-US/about/manifesto/)
  + [## Get Involved](/en-US/contribute/)
  + [## Innovation Projects](https://future.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Blog](https://blog.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)

  Our Work

  + [## Mozilla Foundation](https://foundation.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla.ai](https://www.mozilla.ai/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla Ventures](https://mozilla.vc/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla Advertising](/en-US/advertising/)

## Menu

* Mozilla Security

## [Mozilla Security](/en-US/security/)

* [Advisories](/en-US/security/advisories/)
* [Known Vulnerabilities](/en-US/security/known-vulnerabilities/)
* [Mozilla Security Blog](https://blog.mozilla.com/security/)
* [Security Bug Bounty](/en-US/security/bug-bounty/)
* [Third-party Injection Policy](/en-US/security/third-party-software-injection/)

## [Client Bug Bounty](/en-US/security/client-bug-bounty/)

* [Frequently Asked Questions](/en-US/security/bug-bounty/faq/)
* [Hall of Fame](/en-US/security/bug-bounty/hall-of-fame/)

## [Web Bug Bounty](/en-US/security/web-bug-bounty/)

* [Eligible Websites](/en-US/security/bug-bounty/web-eligible-sites/)
* [Frequently Asked Questions](/en-US/security/bug-bounty/faq-webapp/)
* [Hall of Fame](/en-US/security/bug-bounty/web-hall-of-fame/)

# Mozilla Foundation Security Advisory 2014-48

## Miscellaneous memory safety hazards (rv:30.0 / rv:24.6)

Announced
June 10, 2014
Reporter
Mozilla Developers
Impact
Critical
Products
Firefox, Firefox ESR, SeaMonkey, Thunderbird
Fixed in

* Firefox 30
* Firefox ESR 24.6
* SeaMonkey 2.26.1
* Thunderbird 24.6

### Description

Mozilla developers and community identified and fixed several
memory safety bugs in the browser engine used in Firefox and other Mozilla-based
products. Some of these bugs showed evidence of memory corruption under certain
circumstances, and we presume that with enough effort at least some of these
could be exploited to run arbitrary code.

### References

Gary Kwong, Christoph Diehl, Christian Holler, Hannes Verschore, Jan de
Mooij, Ryan VanderMeulen, Jeff Walden, and Kyle Huey reported memory safety
problems and crashes that affect Firefox ESR 24.5 and Firefox 29.

* [Memory safety bugs fixed in Firefox ESR 24.6 and Firefox 30.0](https://bugzilla.mozilla.org/buglist.cgi?bug_id=988719,995679,967354,978811,996715,992274,1011007,921622,1009952,991981,999651,994907) ([CVE-2014-1533](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-1533))

Gary Kwong, Jesse Ruderman, Christian Holler, Gregor Wagner, Benoit Jacob,
Karl Tomlinson, and Jeff Walden reported memory safety problems and crashes that
affect Firefox 29.

* [Memory safety bugs fixed in Firefox 30.0](https://bugzilla.mozilla.org/buglist.cgi?bug_id=995816,995817,978652,1002340,1005578,973874,996536,1000960,1000598,969517,969549,990868,1007223) ([CVE-2014-1534](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-1534))

## Company

* [Leadership](/about/leadership/)
* [Press Center](https://blog.mozilla.org/category/mozilla/news/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=company)
* [Careers](/en-US/careers/)
* [Contact](/en-US/contact/)

## Support

* [Product Help](https://support.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)
* [File a Bug](https://bugzilla.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)
* [Localize Mozilla](https://pontoon.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)

## Resources

* [Advertise with Mozilla](/en-US/advertising/)
* [Firefox Release Notes](/firefox/134.0.2/releasenotes/)

## Developers

* [Developer Edition](/en-US/firefox/developer/)
* [Enterprise](/en-US/firefox/enterprise/)
* [Tools](https://firefox-source-docs.mozilla.org/devtools-user/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=developers)
* [MDN](https://developer.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer)

## Follow @Mozilla

* [X (formerly Twitter) (@mozilla)](https://twitter.com/mozilla)
* [Instagram (@mozilla)](https://www.instagram.com/mozilla/)
* [LinkedIn (@mozilla)](https://www.linkedin.com/company/mozilla-corporation/)
* [TikTok (@mozilla)](https://www.tiktok.com/%40mozilla)
* [Spotify (@mozilla)](https://open.spotify.com/show/0vT7LJMeVDxyQ2ZamHKu08?si=_uDRD6bRR_6M5YZyISGXgA)

## Follow @Firefox

* [X (formerly Twitter) (@firefox)](https://twitter.com/firefox)
* [Instagram (@firefox)](https://www.instagram.com/firefox/)
* [YouTube (@firefoxchannel)](https://www.youtube.com/user/firefoxchannel)
* [TikTok (@firefox)](https://www.tiktok.com/%40firefox)

[Donate](https://foundation.mozilla.org/?form=moco-donate-footer)

Visit [Mozilla Corporation’s](/en-US/) not-for-profit parent, the [Mozilla Foundation](https://foundation.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer).

Portions of this content are ©1998–2025 by individual mozilla.org contributors. Content available under a [Creative Commons license](/en-US/foundation/licensing/website-content/).

* [Website Privacy Notice](/en-US/privacy/websites/)
* [Cookies](/en-US/privacy/websites/cookie-settings/)
* [Legal](/en-US/about/legal/)
* [Community Participation Guidelines](/en-US/about/governance/policies/participation/)
* [About this site](/en-US/about/this-site/)

![](https://www.mozilla.org/media/img/logos/m24/wordmark-white.2d673bb5b33a.svg)



=== Content from lists.opensuse.org_7c73bc1c_20250124_132112.html ===


[![openSUSE](https://static.opensuse.org/favicon.svg)
Mailing Lists](/archives/ "openSUSE Mailing Lists")

[Sign In](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/RZLBFBID37ZIW2G67K32WLHCIPZ52ZZO/)
[Sign Up](/accounts/signup/?next=/archives/list/security-announce%40lists.opensuse.org/message/RZLBFBID37ZIW2G67K32WLHCIPZ52ZZO/)

[Manage this list](/manage/lists/security-announce.lists.opensuse.org/)
[Sign In](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/RZLBFBID37ZIW2G67K32WLHCIPZ52ZZO/)
[Sign Up](/accounts/signup/?next=/archives/list/security-announce%40lists.opensuse.org/message/RZLBFBID37ZIW2G67K32WLHCIPZ52ZZO/)

×
#### Keyboard Shortcuts

### Thread View

* `j`: Next unread message
* `k`: Previous unread message
* `j a`: Jump to all threads* `j l`: Jump to MailingList overview

[thread](/archives/list/security-announce%40lists.opensuse.org/thread/RZLBFBID37ZIW2G67K32WLHCIPZ52ZZO/#RZLBFBID37ZIW2G67K32WLHCIPZ52ZZO)

# [security-announce] SUSE-SU-2014:0824-1: important: Security update for MozillaFirefox

![](https://seccdn.libravatar.org/avatar/099a17325bdf082b643d1a6bbacde279.jpg?s=120&d=mm&r=g)
## [opensuse-security＠opensuse.org](/archives/users/1b72def497ef4503896cd7a5fe9fb8e0/ "See the profile for opensuse-security＠opensuse.org")

20 Jun
2014

20 Jun
'14

23:04

SUSE Security Update: Security update for MozillaFirefox
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
Announcement ID: SUSE-SU-2014:0824-1
Rating: important
References: #881874
Cross-References: CVE-2014-1533 CVE-2014-1534 CVE-2014-1536
CVE-2014-1537 CVE-2014-1538 CVE-2014-1541
CVE-2014-1545
Affected Products:
SUSE Linux Enterprise Software Development Kit 11 SP3
SUSE Linux Enterprise Server 11 SP3 for VMware
SUSE Linux Enterprise Server 11 SP3
SUSE Linux Enterprise Server 10 SP3 LTSS
SUSE Linux Enterprise Desktop 11 SP3
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
An update that fixes 7 vulnerabilities is now available. It
includes four new package versions.
Description:
MozillaFirefox was updated to version 24.6.0 to fix six security issues:
\* Miscellaneous memory safety hazards. (CVE-2014-1533, CVE-2014-1534)
\* Use-after-free and out of bounds issues found using Address
Sanitizer. (CVE-2014-1536, CVE-2014-1537, CVE-2014-1538)
\* Use-after-free with SMIL Animation Controller. (CVE-2014-1541)
mozilla-nspr was updated to version 4.10.6 to fix one security issue:
\* Out of bounds write in NSPR. (CVE-2014-1545)
Further information can be found at
<https://www.mozilla.org/security/announce/>
<[https://www.mozilla.org/security/announce/>](https://www.mozilla.org/security/announce/%3E) .
Security Issues references:
\* CVE-2014-1533
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-1533>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-1533%3E)
\* CVE-2014-1534
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-1534>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-1534%3E)
\* CVE-2014-1536
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-1536>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-1536%3E)
\* CVE-2014-1537
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-1537>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-1537%3E)
\* CVE-2014-1538
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-1538>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-1538%3E)
\* CVE-2014-1541
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-1541>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-1541%3E)
\* CVE-2014-1545
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-1545>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-1545%3E)
Patch Instructions:
To install this SUSE Security Update use YaST online\_update.
Alternatively you can run the command listed for your product:
- SUSE Linux Enterprise Software Development Kit 11 SP3:
zypper in -t patch sdksp3-Firefox-2014-06-9370
- SUSE Linux Enterprise Server 11 SP3 for VMware:
zypper in -t patch slessp3-Firefox-2014-06-9370
- SUSE Linux Enterprise Server 11 SP3:
zypper in -t patch slessp3-Firefox-2014-06-9370
- SUSE Linux Enterprise Desktop 11 SP3:
zypper in -t patch sledsp3-Firefox-2014-06-9370
To bring your system up-to-date, use "zypper patch".
Package List:
- SUSE Linux Enterprise Software Development Kit 11 SP3 (i586 ia64 ppc64 s390x x86\_64) [New Version: 3.16.1 and 4.10.6]:
MozillaFirefox-devel-24.6.0esr-0.8.1
mozilla-nspr-devel-4.10.6-0.3.1
mozilla-nss-devel-3.16.1-0.8.1
- SUSE Linux Enterprise Server 11 SP3 for VMware (i586 x86\_64) [New Version: 24.6.0esr,3.16.1 and 4.10.6]:
MozillaFirefox-24.6.0esr-0.8.1
MozillaFirefox-translations-24.6.0esr-0.8.1
libfreebl3-3.16.1-0.8.1
libsoftokn3-3.16.1-0.8.1
mozilla-nspr-4.10.6-0.3.1
mozilla-nss-3.16.1-0.8.1
mozilla-nss-tools-3.16.1-0.8.1
- SUSE Linux Enterprise Server 11 SP3 for VMware (x86\_64) [New Version: 3.16.1 and 4.10.6]:
libfreebl3-32bit-3.16.1-0.8.1
libsoftokn3-32bit-3.16.1-0.8.1
mozilla-nspr-32bit-4.10.6-0.3.1
mozilla-nss-32bit-3.16.1-0.8.1
- SUSE Linux Enterprise Server 11 SP3 (i586 ia64 ppc64 s390x x86\_64) [New Version: 24.6.0esr,3.16.1 and 4.10.6]:
MozillaFirefox-24.6.0esr-0.8.1
MozillaFirefox-branding-SLED-24-0.7.48
MozillaFirefox-translations-24.6.0esr-0.8.1
libfreebl3-3.16.1-0.8.1
libsoftokn3-3.16.1-0.8.1
mozilla-nspr-4.10.6-0.3.1
mozilla-nss-3.16.1-0.8.1
mozilla-nss-tools-3.16.1-0.8.1
- SUSE Linux Enterprise Server 11 SP3 (ppc64 s390x x86\_64) [New Version: 3.16.1 and 4.10.6]:
libfreebl3-32bit-3.16.1-0.8.1
libsoftokn3-32bit-3.16.1-0.8.1
mozilla-nspr-32bit-4.10.6-0.3.1
mozilla-nss-32bit-3.16.1-0.8.1
- SUSE Linux Enterprise Server 11 SP3 (ia64) [New Version: 3.16.1 and 4.10.6]:
libfreebl3-x86-3.16.1-0.8.1
libsoftokn3-x86-3.16.1-0.8.1
mozilla-nspr-x86-4.10.6-0.3.1
mozilla-nss-x86-3.16.1-0.8.1
- SUSE Linux Enterprise Server 10 SP3 LTSS (i586 s390x x86\_64) [New Version: 3.16.1 and 4.10.6]:
mozilla-nspr-4.10.6-0.5.1
mozilla-nspr-devel-4.10.6-0.5.1
mozilla-nss-3.16.1-0.5.1
mozilla-nss-devel-3.16.1-0.5.1
mozilla-nss-tools-3.16.1-0.5.1
- SUSE Linux Enterprise Server 10 SP3 LTSS (s390x x86\_64) [New Version: 3.16.1 and 4.10.6]:
mozilla-nspr-32bit-4.10.6-0.5.1
mozilla-nss-32bit-3.16.1-0.5.1
- SUSE Linux Enterprise Server 10 SP3 LTSS (i586 s390x) [New Version: 24]:
MozillaFirefox-24.6.0esr-0.5.2
MozillaFirefox-branding-SLED-24-0.12.1
MozillaFirefox-translations-24.6.0esr-0.5.2
- SUSE Linux Enterprise Desktop 11 SP3 (i586 x86\_64) [New Version: 24.6.0esr,3.16.1 and 4.10.6]:
MozillaFirefox-24.6.0esr-0.8.1
MozillaFirefox-branding-SLED-24-0.7.48
MozillaFirefox-translations-24.6.0esr-0.8.1
libfreebl3-3.16.1-0.8.1
libsoftokn3-3.16.1-0.8.1
mozilla-nspr-4.10.6-0.3.1
mozilla-nss-3.16.1-0.8.1
mozilla-nss-tools-3.16.1-0.8.1
- SUSE Linux Enterprise Desktop 11 SP3 (x86\_64) [New Version: 3.16.1 and 4.10.6]:
libfreebl3-32bit-3.16.1-0.8.1
libsoftokn3-32bit-3.16.1-0.8.1
mozilla-nspr-32bit-4.10.6-0.3.1
mozilla-nss-32bit-3.16.1-0.8.1
References:
<http://support.novell.com/security/cve/CVE-2014-1533.html>
<http://support.novell.com/security/cve/CVE-2014-1534.html>
<http://support.novell.com/security/cve/CVE-2014-1536.html>
<http://support.novell.com/security/cve/CVE-2014-1537.html>
<http://support.novell.com/security/cve/CVE-2014-1538.html>
<http://support.novell.com/security/cve/CVE-2014-1541.html>
<http://support.novell.com/security/cve/CVE-2014-1545.html>
<https://bugzilla.novell.com/881874>
[http://download.suse.com/patch/finder/?keywords=a5b350492b0ce3fad7397a840a5c...](http://download.suse.com/patch/finder/?keywords=a5b350492b0ce3fad7397a840a5cdf61)
[http://download.suse.com/patch/finder/?keywords=bbcc06aa0b93e2453183b7b5b8bc...](http://download.suse.com/patch/finder/?keywords=bbcc06aa0b93e2453183b7b5b8bcc0ee)
--
To unsubscribe, e-mail: opensuse-security-announce+unsubscribe@opensuse.org
For additional commands, e-mail: opensuse-security-announce+help@opensuse.org

[0](#like "You must be logged-in to vote.")
[0](#dislike "You must be logged-in to vote.")

Reply

[Sign in to reply online](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/RZLBFBID37ZIW2G67K32WLHCIPZ52ZZO/)
Use email software

[Back to the thread](/archives/list/security-announce%40lists.opensuse.org/thread/RZLBFBID37ZIW2G67K32WLHCIPZ52ZZO/#RZLBFBID37ZIW2G67K32WLHCIPZ52ZZO)

[Back to the list](/archives/list/security-announce%40lists.opensuse.org/)

![HyperKitty](/static/hyperkitty/img/logo.png)
Powered by [HyperKitty](http://hyperkitty.readthedocs.org) version 1.3.12.


