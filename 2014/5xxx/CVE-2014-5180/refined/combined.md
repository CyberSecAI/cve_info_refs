=== Content from plugins.trac.wordpress.org_00a0598c_20250125_142223.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%3Fnew%3D900030%2540hdw-player-video-player-video-gallery%26old%3D798976%2540hdw-player-video-player-video-gallery)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* [Reverse Diff](/changeset/798976/hdw-player-video-player-video-gallery?old=900030&old_path=%2Fhdw-player-video-player-video-gallery)

---

# Changes in [hdw-player-video-player-video-gallery](/browser/hdw-player-video-player-video-gallery?rev=900030 "Show entry in browser") [[798976:900030]](/log/hdw-player-video-player-video-gallery?rev=900030&stop_rev=798976 "Show revision log")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Location:
[hdw-player-video-player-video-gallery/trunk](/browser/hdw-player-video-player-video-gallery/trunk?rev=900030)
Files:

1 deleted
13 edited

* [config.php](/browser/hdw-player-video-player-video-gallery/trunk/config.php?rev=900030 "Show entry in browser")
  (modified)
  ([10 diffs](#file0 "Show differences"))
* [documentation/\_\_default.php](/browser/hdw-player-video-player-video-gallery/trunk/documentation/__default.php?rev=900030 "Show entry in browser")
  (modified)
  ([1 diff](#file1 "Show differences"))
* [email.php](/browser/hdw-player-video-player-video-gallery/trunk/email.php?rev=794672 "Show what was removed (content at revision 798976)")
  (deleted)
* [hdwplayer/\_\_add.php](/browser/hdw-player-video-player-video-gallery/trunk/hdwplayer/__add.php?rev=900030 "Show entry in browser")
  (modified)
  ([10 diffs](#file3 "Show differences"))
* [hdwplayer/\_\_default.php](/browser/hdw-player-video-player-video-gallery/trunk/hdwplayer/__default.php?rev=900030 "Show entry in browser")
  (modified)
  ([1 diff](#file4 "Show differences"))
* [hdwplayer/\_\_edit.php](/browser/hdw-player-video-player-video-gallery/trunk/hdwplayer/__edit.php?rev=900030 "Show entry in browser")
  (modified)
  ([10 diffs](#file5 "Show differences"))
* [index.php](/browser/hdw-player-video-player-video-gallery/trunk/index.php?rev=900030 "Show entry in browser")
  (modified)
  ([2 diffs](#file6 "Show differences"))
* [installer.php](/browser/hdw-player-video-player-video-gallery/trunk/installer.php?rev=900030 "Show entry in browser")
  (modified)
  ([1 diff](#file7 "Show differences"))
* [player.swf](/browser/hdw-player-video-player-video-gallery/trunk/player.swf?rev=900030 "Show entry in browser")
  (modified)
  ([previous](/browser/hdw-player-video-player-video-gallery/trunk/player.swf?rev=794695 "Show previous version in browser"))
* [readme.txt](/browser/hdw-player-video-player-video-gallery/trunk/readme.txt?rev=900030 "Show entry in browser")
  (modified)
  ([3 diffs](#file9 "Show differences"))
* [shortcode.php](/browser/hdw-player-video-player-video-gallery/trunk/shortcode.php?rev=900030 "Show entry in browser")
  (modified)
  ([8 diffs](#file10 "Show differences"))
* [videos/\_\_add.php](/browser/hdw-player-video-player-video-gallery/trunk/videos/__add.php?rev=900030 "Show entry in browser")
  (modified)
  ([4 diffs](#file11 "Show differences"))
* [videos/\_\_edit.php](/browser/hdw-player-video-player-video-gallery/trunk/videos/__edit.php?rev=900030 "Show entry in browser")
  (modified)
  ([4 diffs](#file12 "Show differences"))
* [videos/\_\_grid.php](/browser/hdw-player-video-player-video-gallery/trunk/videos/__grid.php?rev=900030 "Show entry in browser")
  (modified)
  ([2 diffs](#file13 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [hdw-player-video-player-video-gallery/trunk/config.php](/changeset/900030/hdw-player-video-player-video-gallery/trunk/config.php?old=794672&old_path=hdw-player-video-player-video-gallery%2Ftrunk%2Fconfig.php "Show the [798976:900030] differences restricted to hdw-player-video-player-video-gallery/trunk/config.php")

  | [r798976](/browser/hdw-player-video-player-video-gallery/trunk/config.php?rev=794672#L5 "Show revision 798976 of this file in browser") | [r900030](/browser/hdw-player-video-player-video-gallery/trunk/config.php?rev=900030#L5 "Show revision 900030 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 | /\*This is requried when a plugin requires access not via the admin screen. |
  | 6 | 6 | \*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*/ |
  | 7 |  | $path  = ''; |
  | 8 |  |  |
  | 9 |  |  |
  | 10 |  | /\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\* |
  | 11 |  | /\*Cast Numeric values as Boolean |
  | 12 |  | \*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*/ |
  | 13 |  |  |
  |  | 7 | require\_once (dirname ( \_\_FILE\_\_ ) . '/isMobile.php'); |
  | 14 | 8 |  |
  | 15 | 9 | add\_filter('query\_vars','plugin\_add\_trigger'); |
  | […](/browser/hdw-player-video-player-video-gallery/trunk/config.php?rev=794672#L19) | […](/browser/hdw-player-video-player-video-gallery/trunk/config.php?rev=900030#L13) |  |
  | 19 | 13 | $vars[] = 'vid'; |
  | 20 | 14 | $vars[] = 'pid'; |
  | 21 |  | ~~$vars[] = 'sid';~~ |
  | 22 | 15 | $vars[] = 'lic'; |
  | 23 | 16 | return $vars; |
  | […](/browser/hdw-player-video-player-video-gallery/trunk/config.php?rev=794672#L32) | […](/browser/hdw-player-video-player-video-gallery/trunk/config.php?rev=900030#L25) |  |
  | 32 | 25 | }else if(get\_query\_var('pid') && checkL(get\_query\_var('lic'))){ |
  | 33 | 26 | playlist(get\_query\_var('pid')); |
  | 34 |  | ~~}else if(get\_query\_var('sid') && checkL(get\_query\_var('lic'))){~~ |
  | 35 |  | ~~skinXml(get\_query\_var('sid'));~~ |
  | 36 | 27 | } |
  | 37 | 28 | } |
  | […](/browser/hdw-player-video-player-video-gallery/trunk/config.php?rev=794672#L52) | […](/browser/hdw-player-video-player-video-gallery/trunk/config.php?rev=900030#L43) |  |
  | 52 | 43 | $video\_id = ''; |
  | 53 | 44 | if($\_GET['vid']){ |
  | 54 |  | $video\_id  = '&amp;id='.~~$\_GET['vid']~~; |
  |  | 45 | $video\_id  = '&amp;id='.intval($\_GET['vid']); |
  | 55 | 46 | } |
  | 56 | 47 | $wpdb->update($table\_name, $value, array('id' => $config->id)); |
  | […](/browser/hdw-player-video-player-video-gallery/trunk/config.php?rev=794672#L65) | […](/browser/hdw-player-video-player-video-gallery/trunk/config.php?rev=900030#L56) |  |
  | 65 | 56 | echo '<volumeLevel>'.$config->volumelevel.'</volumeLevel>'.$br; |
  | 66 | 57 | if($config->videoid){ |
  | 67 |  | echo '<play~~listXml>'.$siteurl.'/?vid='.$config->videoid.'</playl~~istXml>'.$br; |
  |  | 58 | echo '<playListXml>'.$siteurl.'/?vid='.$config->videoid.'</playListXml>'.$br; |
  | 68 | 59 | } else { |
  | 69 |  | echo '<play~~listXml>'.$siteurl.'/?pid='.$config->playlistid.$video\_id.'</playl~~istXml>'.$br; |
  | 70 |  | } |
  | 71 |  | echo '<skinXml>'.$siteurl.'/?sid='.$config->id.'</skinXml>'; |
  | 72 |  | echo ~~'<playlistAutoStart>'.castAsBoolean($config->playlistautoplay).'</playlistAutoStart>'.$br~~; |
  | 73 |  | echo '<play~~listOpen>'.castAsBoolean($config->playlistopen).'</playlistOpen~~>'.$br; |
  | 74 |  | echo '<play~~listRandom>'.castAsBoolean($config->playlistrandom).'</playlistRandom~~>'.$br; |
  | 75 |  | echo '<~~emailPhp>'.$siteurl.'/wp-content/plugins/' . basename(dirname(\_\_FILE\_\_)) . '/email.php</emailPhp~~>'.$br; |
  |  | 60 | echo '<playListXml>'.$siteurl.'/?pid='.$config->playlistid.$video\_id.'</playListXml>'.$br; |
  |  | 61 | } |
  |  | 62 |  |
  |  | 63 | echo skinXml($config); |
  |  | 64 | echo '<playListAutoStart>'.castAsBoolean($config->playlistautoplay).'</playListAutoStart>'.$br; |
  |  | 65 | echo '<playListOpen>'.castAsBoolean($config->playlistopen).'</playListOpen>'.$br; |
  |  | 66 | echo '<playListRandom>'.castAsBoolean($config->playlistrandom).'</playListRandom>'.$br; |
  | 76 | 67 | echo '<token>'.$dyn.'</token>'.$br; |
  | 77 | 68 | echo '</config>'.$br; |
  | […](/browser/hdw-player-video-player-video-gallery/trunk/config.php?rev=794672#L92) | […](/browser/hdw-player-video-player-video-gallery/trunk/config.php?rev=900030#L83) |  |
  | 92 | 83 | echo '<media>'.$br; |
  | 93 | 84 | echo '<id>'.$item->id.'</id>'.$br; |
  | 94 |  | echo '<type>~~'.$item->type.'~~</type>'.$br; |
  |  | 85 | echo '<type>video</type>'.$br; |
  | 95 | 86 | echo '<video>'.$item->video.'</video>'.$br; |
  | 96 | 87 | if($item->hdvideo) { |
  | […](/browser/hdw-player-video-player-video-gallery/trunk/config.php?rev=794672#L143) | […](/browser/hdw-player-video-player-video-gallery/trunk/config.php?rev=900030#L134) |  |
  | 143 | 134 | echo '<media>'.$br; |
  | 144 | 135 | echo '<id>'.$item['id'].'</id>'.$br; |
  | 145 |  | echo '<type>~~'.$item['type'].'~~</type>'.$br; |
  |  | 136 | echo '<type>video</type>'.$br; |
  | 146 | 137 | echo '<video>'.$item['video'].'</video>'.$br; |
  | 147 | 138 | if($item['hdvideo']) { |
  | […](/browser/hdw-player-video-player-video-gallery/trunk/config.php?rev=794672#L164) | […](/browser/hdw-player-video-player-video-gallery/trunk/config.php?rev=900030#L155) |  |
  | 164 | 155 | } |
  | 165 | 156 |  |
  | 166 |  | function skinXml($id){ |
  | 167 |  | global $wpdb; |
  | 168 |  | $config  = $wpdb->get\_row("SELECT \* FROM ".$wpdb->prefix."hdwplayer WHERE id=".$id); |
  | 169 |  | $siteurl = get\_option('siteurl'); |
  | 170 |  | $br      = "\n"; |
  | 171 |  |  |
  | 172 |  | header("content-type:text/xml;charset=utf-8"); |
  | 173 |  | echo '<skin>'.$br; |
  | 174 |  | echo '<controlbar>'.$br; |
  | 175 |  | echo '<display>'.castAsBoolean($config->controlbar) .'</display>'.$br; |
  | 176 |  | echo '</controlbar>'.$br; |
  | 177 |  | echo '<playpause>'.$br; |
  | 178 |  | echo '<display>'.castAsBoolean($config->playpause).'</display>'.$br; |
  | 179 |  | echo '</playpause>'.$br; |
  | 180 |  | echo '<progressbar>'.$br; |
  | 181 |  | echo '<display>'.castAsBoolean($config->progressbar).'</display>'.$br; |
  | 182 |  | echo '</progressbar>'.$br; |
  | 183 |  | echo '<timer>'.$br; |
  | 184 |  | echo '<display>'.castAsBoolean($config->timer).'</display>'.$br; |
  | 185 |  | echo '</timer>'.$br; |
  | 186 |  | echo '<share>'.$br; |
  | 187 |  | echo '<display>'.castAsBoolean($config->share).'</display>'.$br; |
  | 188 |  | echo '</share>'.$br; |
  | 189 |  | echo '<volume>'.$br; |
  | 190 |  | echo '<display>'.castAsBoolean($config->volume).'</display>'.$br; |
  | 191 |  | echo '</volume>'.$br; |
  | 192 |  | echo '<fullscreen>'.$br; |
  | 193 |  | echo '<display>'.castAsBoolean($config->fullscreen).'</display>'.$br; |
  | 194 |  | echo '</fullscreen>'.$br; |
  | 195 |  | echo '<playdock>'.$br; |
  | 196 |  | echo '<display>'.castAsBoolean($config->playdock).'</display>'.$br; |
  | 197 |  | echo '</playdock>'.$br; |
  | 198 |  | echo '<videogallery>'.$br; |
  | 199 |  | echo '<display>'.castAsBoolean($config->playlist).'</display>'.$br; |
  | 200 |  | echo '</videogallery>'.$br; |
  | 201 |  | echo '</skin>'.$br; |
  | 202 |  | exit(); |
  |  | 157 | function skinXml($config){ |
  |  | 158 | $br      = "\n"; |
  |  | 159 | $node  = '<controlBar>'.castAsBoolean($config->controlbar).'</controlBar>'.$br; |
  |  | 160 | $node .= '<playPauseDock>'.castAsBoolean($config->playpause).'</playPauseDock>'.$br; |
  |  | 161 | $node .= '<progressBar>'.castAsBoolean($config->progressbar).'</progressBar>'.$br; |
  |  | 162 | $node .= '<timerDock>'.castAsBoolean($config->timer).'</timerDock>'.$br; |
  |  | 163 | $node .= '<shareDock>'.castAsBoolean($config->share).'</shareDock>'.$br; |
  |  | 164 | $node .= '<volumeDock>'.castAsBoolean($config->volume).'</volumeDock>'.$br; |
  |  | 165 | $node .= '<fullScreenDock>'.castAsBoolean($config->fullscreen).'</fullScreenDock>'.$br; |
  |  | 166 | $node .= '<playDock>'.castAsBoolean($config->playdock).'</playDock>'.$br; |
  |  | 167 | $node .= '<playList>'.castAsBoolean($config->playlist).'</playList>'.$br; |
  |  | 168 | return $node; |
  | 203 | 169 | } |
  | 204 | 170 |  |
  | […](/browser/hdw-player-video-player-video-gallery/trunk/config.php?rev=794672#L235) | […](/browser/hdw-player-video-player-video-gallery/trunk/config.php?rev=900030#L201) |  |
  | 235 | 201 | return true; |
  | 236 | 202 | } |
  | 237 |  | return false; |
  | 238 |  |  |
  |  | 203 | return false; |
  | 239 | 204 | } |
  | 240 | 205 |  |
  | […](/browser/hdw-player-video-player-video-gallery/trunk/config.php?rev=794672#L248) | […](/browser/hdw-player-video-player-video-gallery/trunk/config.php?rev=900030#L213) |  |
  | 248 | 213 | { |
  | 249 | 214 | global $wpdb; |
  | 250 |  | $player = $wpdb->get\_row ( "SELECT \* FROM " . $wpdb->prefix . "hdwplayer WHERE id=" . $\_POST ['id'] ); |
  | 251 |  | $siteurl = get\_option ( 'siteurl' ); |
  | 252 |  | $flashvars = 'baseW=' . $siteurl . '&id=' . encrypt\_decrypt ( 'encrypt', $player->id ); |
  |  | 215 | $player = $wpdb->get\_row ( "SELECT \* FROM " . $wpdb->prefix . "hdwplayer WHERE id=" . intval($\_POST ['id']) ); |
  |  | 216 | $siteurl = get\_option ( 'siteurl' ); |
  |  | 217 | $results = $wpdb->get\_row ( "SELECT \* FROM " . $wpdb->prefix . "hdwplayer\_videos WHERE id=" . intval($\_POST ['vid']) ); |
  |  | 218 | $detect = new Mobile\_Detect(); |
  |  | 219 | if ($detect->isMobile()) { |
  |  | 220 | switch ($results->type) { |
  |  | 221 | case 'youtube' : |
  |  | 222 | $url\_string = parse\_url ( $results->video, PHP\_URL\_QUERY ); |
  |  | 223 | parse\_str ( $url\_string, $args ); |
  |  | 224 | $html5 = '<iframe title="YouTube video player" width="' . $player->width . '" height="' . $player->height . '" src="http://www.youtube.com/embed/' . $args ['v'] . '" frameborder="0" allowfullscreen></iframe>'; |
  |  | 225 | break; |
  |  | 226 | case 'dailymotion' : |
  |  | 227 | $html5 = '<iframe frameborder="0" width="' . $player->width . '" height="' . $player->height . '" src="' . $results->video . '"></iframe>'; |
  |  | 228 | break; |
  |  | 229 | case 'rtmp' : |
  |  | 230 | $url\_string = str\_replace ( 'rtmp', 'http', $results->streamer ) . '/' . $results->video . '/playlist.m3u8'; |
  |  | 231 | $html5 = '<video poster="' . $results->preview . '"  onclick="this.play();" width="' . $player->width . '" height="' . $player->height . '" controls>'; |
  |  | 232 | $html5 .= '<source src="' . $url\_string . '" />'; |
  |  | 233 | $html5 .= '</video>'; |
  |  | 234 | break; |
  |  | 235 | default : |
  |  | 236 | $html5 = '<video poster="' . $results->preview . '"  onclick="this.play();" width="' . $player->width . '" height="' . $player->height . '" controls>'; |
  |  | 237 | $html5 .= '<source src="' . $results->video . '" />'; |
  |  | 238 | $html5 .= '</video>'; |
  |  | 239 | } |
  |  | 240 | }else{ |
  |  | 241 | $flashvars = 'baseW=' . $siteurl . '&id=' . encrypt\_decrypt ( 'encrypt', $player->id ).'&vid='.intval($\_POST ['vid']); |
  |  | 242 | $src = $siteurl . '/wp-content/plugins/' . basename ( dirname ( \_\_FILE\_\_ ) ) . '/player.swf'; |
  |  | 243 | $html5 .= '<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="' . $player->width . '" height="' . $player->height . '">'; |
  |  | 244 | $html5 .= '<param name="movie" value="' . $src . '" />'; |
  |  | 245 | $html5 .= '<param name="allowfullscreen" value="true" />'; |
  |  | 246 | $html5 .= '<param name="allowscriptaccess" value="always" />'; |
  |  | 247 | $html5 .= '<param name="flashvars" value="' . $flashvars . '" />'; |
  |  | 248 | $html5 .= '<object type="application/x-shockwave-flash" data="' . $src . '" width="' . $player->width . '" height="' . $player->height . '">'; |
  |  | 249 | $html5 .= '<param name="movie" value="' . $src . '" />'; |
  |  | 250 | $html5 .= '<param name="allowfullscreen" value="true" />'; |
  |  | 251 | $html5 .= '<param name="allowscriptaccess" value="always" />'; |
  |  | 252 | $html5 .= '<param name="flashvars" value="' . $flashvars . '" />'; |
  |  | 253 | $html5 .= '</object>'; |
  |  | 254 | $html5 .= '</object>'; |
  |  | 255 | } |
  |  | 256 |  |
  | 253 | 257 | $response = array( |
  | 254 |  | 'flashvars'=>$flashvars, |
  | 255 |  | 'height'=>$player->height, |
  | 256 |  | 'width'=>$player->width |
  |  | 258 | 'html5'     =>$html5 |
  | 257 | 259 | ); |
  | 258 | 260 | die(json\_encode($response)); |
  | 259 | 261 | } |
  |  | 262 | if('email' == $action && checkL($\_POST["lic"])) |
  |  | 263 | { |
  |  | 264 | $to       = $\_POST["to"]; |
  |  | 265 | $from     = $\_POST["from"]; |
  |  | 266 | $url      = $\_POST["url"]; |
  |  | 267 | $subject  = "You have received a video!"; |
  |  | 268 |  |
  |  | 269 | $headers  = "From: "."<" . $\_POST["from"] .">\r\n"; |
  |  | 270 | $headers .= "Reply-To: " . $\_POST["from"] . "\r\n"; |
  |  | 271 | $headers .= "Return-path: " . $\_POST["from"]; |
  |  | 272 |  |
  |  | 273 | $message  = $\_POST["message"] . "\n\n"; |
  |  | 274 | $message .= "Video URL: " . $url; |
  |  | 275 |  |
  |  | 276 | if(mail($to, $subject, $message, $headers)) { |
  |  | 277 | echo "sent"; |
  |  | 278 | exit; |
  |  | 279 | } else { |
  |  | 280 | echo "error"; |
  |  | 281 | exit; |
  |  | 282 | } |
  |  | 283 | } |
  | 260 | 284 | } |
  | 261 |  |  |
  | 262 | 285 |  |
  | 263 | 286 | ?> |
* ## [hdw-player-video-player-video-gallery/trunk/documentation/\_\_default.php](/changeset/900030/hdw-player-video-player-video-gallery/trunk/documentation/__default.php?old=773214&old_path=hdw-player-video-player-video-gallery%2Ftrunk%2Fdocumentation%2F__default.php "Show the [798976:900030] differences restricted to hdw-player-video-player-video-gallery/trunk/documentation/__default.php")

  | [r798976](/browser/hdw-player-video-player-video-gallery/trunk/documentation/__default.php?rev=773214#L63 "Show revision 798976 of this file in browser") | [r900030](/browser/hdw-player-video-player-video-gallery/trunk/documentation/__default.php?rev=900030#L63 "Show revision 900030 of this file in browser") |  |
  | --- | --- | --- |
  | 63 | 63 | echo "<br />"; |
  | 64 | 64 | echo "<br />"; |
  | 65 |  | \_e( "<strong>Note : </strong>Creating Playlist and Gallery are not compulsary. You can also directly add the <i>Video ~~ID~~</i> instead of <i>Adding as Playlist</i> by just choosing the Single Video Option."); |
  |  | 65 | \_e( "<strong>Note : </strong>Creating Playlist and Gallery are not compulsary. You can also directly add the <i>Video Name</i> instead of <i>Adding as Playlist</i> by just choosing the Single Video Option."); |
  | 66 | 66 |  |
  | 67 | 67 |  |
* ## [hdw-player-video-player-video-gallery/trunk/hdwplayer/\_\_add.php](/changeset/900030/hdw-player-video-player-video-gallery/trunk/hdwplayer/__add.php?old=773214&old_path=hdw-player-video-player-video-gallery%2Ftrunk%2Fhdwplayer%2F__add.php "Show the [798976:900030] differences restricted to hdw-player-video-player-video-gallery/trunk/hdwplayer/__add.php")

  | [r798976](/browser/hdw-player-video-player-video-gallery/trunk/hdwplayer/__add.php?rev=773214#L5 "Show revision 798976 of this file in browser") | [r900030](/browser/hdw-player-video-player-video-gallery/trunk/hdwplayer/__add.php?rev=900030#L5 "Show revision 900030 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 | \*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*/ |
  | 6 | 6 | if($\_POST['edited'] == 'true' && check\_admin\_referer( 'hdwplayer-nonce')) { |
  | 7 |  | unset($\_POST['group'], $\_POST['edited'], $\_POST['save'], $\_POST['\_wpnonce'], $\_POST['\_wp\_http\_referer']); |
  |  | 7 | unset($\_POST['group'], $\_POST['edited'], $\_POST['video'], $\_POST['save'], $\_POST['\_wpnonce'], $\_POST['\_wp\_http\_referer']); |
  |  | 8 | if(!$\_POST['playlistid']){ |
  |  | 9 | $\_POST['galleryid'] = 0; |
  |  | 10 | } |
  | 8 | 11 | $wpdb->insert($table\_name, $\_POST); |
  | 9 | 12 | echo '<script>window.location="?page=hdwplayer";</script>'; |
  | […](/browser/hdw-player-video-player-video-gallery/trunk/hdwplayer/__add.php?rev=773214#L14) | […](/browser/hdw-player-video-player-video-gallery/trunk/hdwplayer/__add.php?rev=900030#L17) |  |
  | 14 | 17 | \*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*/ |
  | 15 | 18 | $data = $wpdb->get\_row("SELECT \* FROM $table\_name WHERE id=1"); |
  |  | 19 | $vname = $wpdb->get\_row("SELECT \* FROM ".$wpdb->prefix."hdwplayer\_videos WHERE id=".$data->videoid); |
  | 16 | 20 |  |
  | 17 | 21 | ?> |
  |  | 22 | <style> |
  |  | 23 | .autocomplete-suggestions { border: 1px solid #999; background: #fff; cursor: default; overflow: auto; } |
  |  | 24 | .autocomplete-suggestion { padding: 5px 5px; font-size: 13px; white-space: nowrap; overflow: hidden; } |
  |  | 25 | .autocomplete-selected { background: #f0f0f0; } |
  |  | 26 | .autocomplete-suggestions strong { font-weight: normal; color: #3399ff; } |
  |  | 27 | </style> |
  | 18 | 28 | <div class="wrap"> |
  | 19 | 29 | <br /> |
  | […](/browser/hdw-player-video-player-video-gallery/trunk/hdwplayer/__add.php?rev=773214#L42) | […](/browser/hdw-player-video-player-video-gallery/trunk/hdwplayer/__add.php?rev=900030#L52) |  |
  | 42 | 52 | </select> |
  | 43 | 53 | <?php echo '<script>document.getElementById("'.$data->skinmode.'").selected="selected"</script>'; ?> </td> |
  | 44 |  | ~~</td>~~ |
  | 45 | 54 | </tr> |
  | 46 | 55 | <tr> |
  | […](/browser/hdw-player-video-player-video-gallery/trunk/hdwplayer/__add.php?rev=773214#L53) | […](/browser/hdw-player-video-player-video-gallery/trunk/hdwplayer/__add.php?rev=900030#L62) |  |
  | 53 | 62 | </select> |
  | 54 | 63 | <?php echo '<script>document.getElementById("'.$data->stretchtype.'").selected="selected"</script>'; ?> </td> |
  | 55 |  | ~~</td>~~ |
  | 56 | 64 | </tr> |
  | 57 | 65 | <tr> |
  | […](/browser/hdw-player-video-player-video-gallery/trunk/hdwplayer/__add.php?rev=773214#L105) | […](/browser/hdw-player-video-player-video-gallery/trunk/hdwplayer/__add.php?rev=900030#L113) |  |
  | 105 | 113 | <tr id="\_videoid"> |
  | 106 | 114 | <td><?php \_e("Video ID" ); ?></td> |
  | 107 |  | <td><input type="~~text" id="videoid" name="videoid" value="<?php echo $data->videoid~~; ?>" size="50"></td> |
  |  | 115 | <td><input type="hidden" id="videoid" name="videoid" value="<?php echo $data->videoid; ?>"><input type="text" id="video" name="video" value="<?php echo $vname->title; ?>" size="50"></td> |
  | 108 | 116 | </tr> |
  | 109 | 117 | <tr id="\_playlistid"> |
  | […](/browser/hdw-player-video-player-video-gallery/trunk/hdwplayer/__add.php?rev=773214#L134) | […](/browser/hdw-player-video-player-video-gallery/trunk/hdwplayer/__add.php?rev=900030#L142) |  |
  | 134 | 142 | <td><input type="checkbox" id="playlistrandom" name="playlistrandom" value="1" <?php if($data->playlistrandom==1){echo 'checked="checked" ';}?>></td> |
  | 135 | 143 | </tr> |
  | 136 |  | <tr id="\_gallery"> |
  | 137 |  | <td><?php \_e("Display Gallery" ); ?></td> |
  | 138 |  | <td><select id="\_disgallery" onchange="javascript:changeGallery(this.options[this.selectedIndex].id)"> |
  | 139 |  | <option value="0" id="none"><?php \_e("none" ); ?></option> |
  | 140 |  | <option value="1" id="display"><?php \_e("Display" ); ?></option> |
  | 141 |  | </select></td> |
  | 142 |  | </tr> |
  | 143 |  | <tr id="\_galleyid"> |
  |  | 144 | <tr id="\_galleryid"> |
  | 144 | 145 | <td><?php \_e("Choose Your Gallery" ); ?></td> |
  | 145 | 146 | <td><select id="galleryid" name="galleryid"> |
  | […](/browser/hdw-player-video-player-video-gallery/trunk/hdwplayer/__add.php?rev=773214#L164) | […](/browser/hdw-player-video-player-video-gallery/trunk/hdwplayer/__add.php?rev=900030#L165) |  |
  | 164 | 165 | </form> |
  | 165 | 166 | </div> |
  |  | 167 | <script type="text/javascript" src="<?php echo $js; ?>"></script> |
  |  | 168 | <script type="text/javascript" src="<?php echo $jsac; ?>"></script> |
  | 166 | 169 | <script type="text/javascript"> |
  | 167 | 170 | changeType('videoid'); |
  | 168 |  | ~~changeGallery('none');~~ |
  | 169 |  | ~~function changeGallery(type){~~ |
  | 170 |  | ~~document.getElementById('\_galleyid').style.display="none";~~ |
  | 171 |  | ~~switch(type){~~ |
  | 172 |  | ~~case 'display':~~ |
  | 173 |  | ~~document.getElementById('\_galleyid').style.display="";~~ |
  | 174 |  | ~~break;~~ |
  | 175 |  | ~~default:;~~ |
  | 176 |  | ~~}~~ |
  | 177 |  | ~~}~~ |
  | 178 | 171 |  |
  | 179 | 172 | function changeType(type) { |
  | […](/browser/hdw-player-video-player-video-gallery/trunk/hdwplayer/__add.php?rev=773214#L183) | […](/browser/hdw-player-video-player-video-gallery/trunk/hdwplayer/__add.php?rev=900030#L176) |  |
  | 183 | 176 | document.getElementById('\_playlistopen').style.display="none"; |
  | 184 | 177 | document.getElementById('\_playlistrandom').style.display="none"; |
  | 185 |  | document.getElementById('\_galleyid').style.display="none"; |
  | 186 |  | document.getElementById('\_gallery').style.display="none"; |
  |  | 178 | document.getElementById('\_galleryid').style.display="none"; |
  | 187 | 179 | switch(type) { |
  | 188 | 180 | case 'playlistid': |
  | […](/browser/hdw-player-video-player-video-gallery/trunk/hdwplayer/__add.php?rev=773214#L191) | […](/browser/hdw-player-video-player-video-gallery/trunk/hdwplayer/__add.php?rev=900030#L183) |  |
  | 191 | 183 | document.getElementById('\_playlistopen').style.display=""; |
  | 192 | 184 | document.getElementById('\_playlistrandom').style.display=""; |
  | 193 |  | document.getElementById('\_gallery').style.display=""; |
  |  | 185 | document.getElementById('\_galleryid').style.display=""; |
  | 194 | 186 | break; |
  | 195 | 187 | default: |
  | […](/browser/hdw-player-video-player-video-gallery/trunk/hdwplayer/__add.php?rev=773214#L218) | […](/browser/hdw-player-video-player-video-gallery/trunk/hdwplayer/__add.php?rev=900030#L210) |  |
  | 218 | 210 | } |
  | 219 | 211 | </script> |
  |  | 212 | <script> |
  |  | 213 | $(function(){ |
  |  | 214 | var video = [ |
  |  | 215 | <?php foreach ($video as $data) { ?> |
  |  | 216 | { value: '<?php echo $data->title; ?>', data: '<?php echo $data->id; ?>' }, |
  |  | 217 | <?php } ?> |
  |  | 218 | ]; |
  |  | 219 |  |
  |  | 220 | $('#video').autocomplete({ |
  |  | 221 | lookup: video, |
  |  | 222 | onSelect: function (suggestion) { |
  |  | 223 | document.getElementById("videoid").value = suggestion.data; |
  |  | 224 | } |
  |  | 225 | }); |
  |  | 226 | }); |
  |  | 227 | </script> |
* ## [hdw-player-video-player-video-gallery/trunk/hdwplayer/\_\_default.php](/changeset/900030/hdw-player-video-player-video-gallery/trunk/hdwplayer/__default.php?old=773214&old_path=hdw-player-video-player-video-gallery%2Ftrunk%2Fhdwplayer%2F__default.php "Show the [798976:900030] differences restricted to hdw-player-video-player-video-gallery/trunk/hdwplayer/__default.php")

  | [r798976](/browser/hdw-player-video-player-video-gallery/trunk/hdwplayer/__default.php?rev=773214#L5 "Show revision 798976 of this file in browser") | [r900030](/browser/hdw-player-video-player-video-gallery/trunk/hdwplayer/__default.php?rev=900030#L5 "Show revision 900030 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 | $data       = array(); |
  | 6 | 6 |  |
  |  | 7 | $siteurl = get\_option ( 'siteurl' ); |
  |  | 8 | $js = $siteurl . '/wp-content/plugins/' . basename ( dirname(dirname ( \_\_FILE\_\_ )) ) . '/js/jquery-1.9.1.min.js'; |
  |  | 9 | $jsac = $siteurl . '/wp-content/plugins/' . basename ( dirname(dirname ( \_\_FILE\_\_ )) ) . '/js/jquery.autocomplete.min.js'; |
  |  | 10 |  |
  | 7 | 11 | $playlist   = $wpdb->get\_results("SELECT \* FROM ".$wpdb->prefix."hdwplayer\_playlist"); |
  | 8 | 12 | $gallery   = $wpdb->get\_results("SELECT \* FROM ".$wpdb->prefix."hdwplayer\_gallery"); |
  |  | 13 | $video = $wpdb->get\_results("SELECT \* FROM ".$wpdb->prefix."hdwplayer\_videos"); |
  | 9 | 14 | /\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\* |
  | 10 | 15 | /\* Execute Actions |
* ## [hdw-player-video-player-video-gallery/trunk/hdwplayer/\_\_edit.php](/changeset/900030/hdw-player-video-player-video-gallery/trunk/hdwplayer/__edit.php?old=773214&old_path=hdw-player-video-player-video-gallery%2Ftrunk%2Fhdwplayer%2F__edit.php "Show the [798976:900030] differences restricted to hdw-player-video-player-video-gallery/trunk/hdwplayer/__edit.php")

  | [r798976](/browser/hdw-player-video-player-video-gallery/trunk/hdwplayer/__edit.php?rev=773214#L5 "Show revision 798976 of this file in browser") | [r900030](/browser/hdw-player-video-player-video-gallery/trunk/hdwplayer/__edit.php?rev=900030#L5 "Show revision 900030 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 | \*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*/ |
  | 6 | 6 | if($\_POST['edited'] == 'true' && check\_admin\_referer( 'hdwplayer-nonce')) { |
  | 7 |  | unset($\_POST['group'], $\_POST['edited'], $\_POST['save'], $\_POST['\_wpnonce'], $\_POST['\_wp\_http\_referer']); |
  |  | 7 | unset($\_POST['group'], $\_POST['edited'], $\_POST['video'], $\_POST['save'], $\_POST['\_wpnonce'], $\_POST['\_wp\_http\_referer']); |
  |  | 8 | if(!$\_POST['playlistid']){ |
  |  | 9 | $\_POST['galleryid'] = 0; |
  |  | 10 | } |
  | 8 | 11 | $wpdb->update($table\_name, $\_POST, array('id' => $\_GET['id'])); |
  | 9 | 12 | echo '<script>window.location="?page=hdwplayer";</script>'; |
  | […](/browser/hdw-player-video-player-video-gallery/trunk/hdwplayer/__edit.php?rev=773214#L14) | […](/browser/hdw-player-video-player-video-gallery/trunk/hdwplayer/__edit.php?rev=900030#L17) |  |
  | 14 | 17 | \*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*/ |
  | 15 | 18 | $data = $wpdb->get\_row("SELECT \* FROM $table\_name WHERE id=".$\_GET['id']); |
  |  | 19 | $vname = $wpdb->get\_row("SELECT \* FROM ".$wpdb->prefix."hdwplayer\_videos WHERE id=".$data->videoid); |
  | 16 | 20 |  |
  | 17 | 21 | ?> |
  |  | 22 | <style> |
  |  | 23 | .autocomplete-suggestions { border: 1px solid #999; width: 429px !important; background: #fff; cursor: default; overflow: auto; } |
  |  | 24 | .autocomplete-suggestion { padding: 5px 5px; font-size: 13px; white-space: nowrap; overflow: hidden; } |
  |  | 25 | .autocomplete-selected { background: #f0f0f0; } |
  |  | 26 | .autocomplete-suggestions strong { font-weight: normal; color: #3399ff; } |
  |  | 27 | </style> |
  | 18 | 28 | <div class="wrap"> |
  | 19 | 29 | <br /> |
  | […](/browser/hdw-player-video-player-video-gallery/trunk/hdwplayer/__edit.php?rev=773214#L42) | […](/browser/hdw-player-video-player-video-gallery/trunk/hdwplayer/__edit.php?rev=900030#L52) |  |
  | 42 | 52 | </select> |
  | 43 | 53 | <?php echo '<script>document.getElementById("'.$data->skinmode.'").selected="selected"</script>'; ?> </td> |
  | 44 |  | ~~</td>~~ |
  | 45 | 54 | </tr> |
  | 46 | 55 | <tr> |
  | […](/browser/hdw-player-video-player-video-gallery/trunk/hdwplayer/__edit.php?rev=773214#L53) | […](/browser/hdw-player-video-player-video-gallery/trunk/hdwplayer/__edit.php?rev=900030#L62) |  |
  | 53 | 62 | </select> |
  | 54 | 63 | <?php echo '<script>document.getElementById("'.$data->stretchtype.'").selected="selected"</script>'; ?> </td> |
  | 55 |  | ~~</td>~~ |
  | 56 | 64 | </tr> |
  | 57 | 65 | <tr> |
  | […](/browser/hdw-player-video-player-video-gallery/trunk/hdwplayer/__edit.php?rev=773214#L105) | […](/browser/hdw-player-video-player-video-gallery/trunk/hdwplayer/__edit.php?rev=900030#L113) |  |
  | 105 | 113 | <tr id="\_videoid"> |
  | 106 | 114 | <td><?php \_e("Video ID" ); ?></td> |
  | 107 |  | <td><input type="~~text" id="videoid" name="videoid" value="<?php echo $data->videoid~~; ?>" size="50"></td> |
  |  | 115 | <td><input type="hidden" id="videoid" name="videoid" value="<?php echo $data->videoid; ?>"><input type="text" id="video" name="video" value="<?php echo $vname->title; ?>" size="50"></td> |
  | 108 | 116 | </tr> |
  | 109 | 117 | <tr id="\_playlistid"> |
  | […](/browser/hdw-player-video-player-video-gallery/trunk/hdwplayer/__edit.php?rev=773214#L134) | […](/browser/hdw-player-video-player-video-gallery/trunk/hdwplayer/__edit.php?rev=900030#L142) |  |
  | 134 | 142 | <td><input type="hidden" name="playlistrandom" value=""><input type="checkbox" id="playlistrandom" name="playlistrandom" value="1" <?php if($data->playlistrandom==1){echo 'checked="checked" ';}?>></td> |
  | 135 | 143 | </tr> |
  | 136 |  | <tr id="\_gallery"> |
  | 137 |  | <td><?php \_e("Display Gallery" ); ?></td> |
  | 138 |  | <td><select id="\_disgallery" onchange="javascript:changeGallery(this.options[this.selectedIndex].id)"> |
  | 139 |  | <option value="0" id="none"><?php \_e("none" ); ?></option> |
  | 140 |  | <option value="1" id="display"><?php \_e("Display" ); ?></option> |
  | 141 |  | </select></td> |
  | 142 |  | </tr> |
  | 143 |  | <tr id="\_galleyid"> |
  |  | 144 | <tr id="\_galleryid"> |
  | 144 | 145 | <td><?php \_e("Choose Your Gallery" ); ?></td> |
  | 145 | 146 | <td><select id="galleryid" name="galleryid"> |
  | 146 |  | <option value="0" id="0">None</option> |
  |  | 147 | <option value="0" id="g0">None</option> |
  | 147 | 148 | <?php |
  | 148 | 149 | $k=count( $gallery); |
  | […](/browser/hdw-player-video-player-video-gallery/trunk/hdwplayer/__edit.php?rev=773214#L166) | […](/browser/hdw-player-video-player-video-gallery/trunk/hdwplayer/__edit.php?rev=900030#L167) |  |
  | 166 | 167 | </div> |
  | 167 | 168 | <?php if($data->videoid) { $type = "videoid"; } else { $type = "playlistid"; } ?> |
  | 168 |  | <?php if($data->galleryid) { $gtype = "display"; } else { $gtype = "none"; } ?> |
  |  | 169 | <script type="text/javascript" src="<?php echo $js; ?>"></script> |
  |  | 170 | <script type="text/javascript" src="<?php echo $jsac; ?>"></script> |
  | 169 | 171 | <script type="text/javascript"> |
  | 170 | 172 | changeType(<?php echo "'".$type."'"; ?>); |
  | 171 |  | ~~changeGallery(<?php echo "'".$gtype."'"; ?>);~~ |
  | 172 |  |  |
  | 173 |  | ~~function changeGallery(type){~~ |
  | 174 |  | ~~document.getElementById('\_galleyid').style.display="none";~~ |
  | 175 |  | ~~switch(type){~~ |
  | 176 |  | ~~case 'display':~~ |
  | 177 |  | ~~document.getElementById('\_galleyid').style.display="";~~ |
  | 178 |  | ~~document.getElementById("display").selected="selected"~~ |
  | 179 |  | ~~break;~~ |
  | 180 |  | ~~default:;~~ |
  | 181 |  | ~~}~~ |
  | 182 |  | ~~}~~ |
  | 183 | 173 |  |
  | 184 | 174 | function changeType(type) { |
  | […](/browser/hdw-player-video-player-video-gallery/trunk/hdwplayer/__edit.php?rev=773214#L188) | […](/browser/hdw-player-video-player-video-gallery/trunk/hdwplayer/__edit.php?rev=900030#L178) |  |
  | 188 | 178 | document.getElementById('\_playlistopen').style.display="none"; |
  | 189 | 179 | document.getElementById('\_playlistrandom').style.display="none"; |
  | 190 |  | document.getElementById('\_galleyid').style.display="none"; |
  | 191 |  | document.getElementById('\_gallery').style.display="none"; |
  |  | 180 | document.getElementById('\_galleryid').style.display="none"; |
  | 192 | 181 | switch(type) { |
  | 193 | 182 | case 'playlistid': |
  | […](/browser/hdw-player-video-player-video-gallery/trunk/hdwplayer/__edit.php?rev=773214#L196) | […](/browser/hdw-player-video-player-video-gallery/trunk/hdwplayer/__edit.php?rev=900030#L185) |  |
  | 196 | 185 | document.getElementById('\_playlistopen').style.display=""; |
  | 197 | 186 | document.getElementById('\_playlistrandom').style.display=""; |
  | 198 |  | document.getElementById('\_gallery').style.display=""; |
  |  | 187 | document.getElementById('\_galleryid').style.display=""; |
  | 199 | 188 | break; |
  | 200 | 189 | default: |
  | […](/browser/hdw-player-video-player-video-gallery/trunk/hdwplayer/__edit.php?rev=773214#L223) | […](/browser/hdw-player-video-player-video-gallery/trunk/hdwplayer/__edit.php?rev=900030#L212) |  |
  | 223 | 212 | } |
  | 224 | 213 | </script> |
  |  | 214 | <script> |
  |  | 215 | $(function(){ |
  |  | 216 | var video = [ |
  |  | 217 | <?php foreach ($video as $data) { ?> |
  |  | 218 | { value: '<?php echo $data->title; ?>', data: '<?php echo $data->id; ?>' }, |
  |  | 219 | <?php } ?> |
  |  | 220 | ]; |
  |  | 221 |  |
  |  | 222 | $('#video').autocomplete({ |
  |  | 223 | lookup: video, |
  |  | 224 | onSelect: function (suggestion) { |
  |  | 225 | document.getElementById("videoid").value = suggestion.data; |
  |  | 226 | } |
  |  | 227 | }); |
  |  | 228 |  |
  |  | 229 | }); |
  |  | 230 | </script> |
* ## [hdw-player-video-player-video-gallery/trunk/index.php](/changeset/900030/hdw-player-video-player-video-gallery/trunk/index.php?old=798975&old_path=hdw-player-video-player-video-gallery%2Ftrunk%2Findex.php "Show the [798976:900030] differences restricted to hdw-player-video-player-video-gallery/trunk/index.php")

  | [r798976](/browser/hdw-player-video-player-video-gallery/trunk/index.php?rev=798975#L4 "Show revision 798976 of this file in browser") | [r900030](/browser/hdw-player-video-player-video-gallery/trunk/index.php?rev=900030#L4 "Show revision 900030 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | Plugin URI:http://hdwplayer.com/ |
  | 5 | 5 | Description: HDW Player Plugin for Wordpress Websites. |
  | 6 |  | Version:~~2.4.2~~ |
  |  | 6 | Version:3.0 |
  | 7 | 7 | Author:Mr. Hdwplayer |
  | 8 | 8 | Author URI:http://hdwplayer.com |
  | […](/browser/hdw-player-video-player-video-gallery/trunk/index.php?rev=798975#L19) | […](/browser/hdw-player-video-player-video-gallery/trunk/index.php?rev=900030#L19) |  |
  | 19 | 19 | global $mytoken; |
  | 20 | 20 |  |
  | 21 |  | $hdwplayer\_version = "~~2.4.3~~"; |
  |  | 21 | $hdwplayer\_version = "3.0"; |
  | 22 | 22 | $installed\_hdwplayer\_version = get\_site\_option('hdwplayer\_version'); |
  | 23 | 23 |  |
* ## [hdw-player-video-player-video-gallery/trunk/installer.php](/changeset/900030/hdw-player-video-player-video-gallery/trunk/installer.php?old=798975&old_path=hdw-player-video-player-video-gallery%2Ftrunk%2Finstaller.php "Show the [798976:900030] differences restricted to hdw-player-video-player-video-gallery/trunk/installer.php")

  | [r798976](/browser/hdw-player-video-player-video-gallery/trunk/installer.php?rev=798975#L136 "Show revision 798976 of this file in browser") | [r900030](/browser/hdw-player-video-player-video-gallery/trunk/installer.php?rev=900030#L136 "Show revision 900030 of this file in browser") |  |
  | --- | --- | --- |
  | 136 | 136 | 'thumb'            => '', |
  | 137 | 137 | 'token'            => '', |
  | 138 |  | 'playlistid'       => ~~0~~ |
  |  | 138 | 'playlistid'       => 1 |
  | 139 | 139 | )); |
  | 140 | 140 | } |
* ## [hdw-player-video-player-video-gallery/trunk/readme.txt](/changeset/900030/hdw-player-video-player-video-gallery/trunk/readme.txt?old=798975&old_path=hdw-player-video-player-video-gallery%2Ftrunk%2Freadme.txt "Show the [798976:900030] differences restricted to hdw-player-video-player-video-gallery/trunk/readme.txt")

  | [r798976](/browser/hdw-player-video-player-video-gallery/trunk/readme.txt?rev=798975#L2 "Show revision 798976 of this file in browser") | [r900030](/browser/hdw-player-video-player-video-gallery/trunk/readme.txt?rev=900030#L2 "Show revision 900030 of this file in browser") |  |
  | --- | --- | --- |
  | 2 | 2 | Contributors: HDW Player |
  | 3 | 3 | Tags: video, player, gallery, video player, video gallery, hd, hdw, high, definition, wordpress, plugin, hd webplayer, hdw player |
  | 4 |  | Requires at least:2.8.6 |
  | 5 |  | Tested up to: 3.~~6.1~~ |
  | 6 |  | Stable tag: ~~2.4.3~~ |
  |  | 4 | Requires at least: 2.8.6 |
  |  | 5 | Tested up to: 3.x |
  |  | 6 | Stable tag: 3.0 |
  | 7 | 7 | License: GPLv2 |
  | 8 | 8 |  |
  | […](/browser/hdw-player-video-player-video-gallery/trunk/readme.txt?rev=798975#L149) | […](/browser/hdw-player-video-player-video-gallery/trunk/readme.txt?rev=900030#L149) |  |
  | 149 | 149 | \* Initial release of the HDW Player Plugin for WordPress |
  | 150 | 150 |  |
  | 151 |  |  |
  | 152 | 151 | = 2.0 = |
  | 153 | 152 | \* Adding Gallery Option to HDW Player Plugin. |
  | […](/browser/hdw-player-video-player-video-gallery/trunk/readme.txt?rev=798975#L156) | […](/browser/hdw-player-video-player-video-gallery/trunk/readme.txt?rev=900030#L155) |  |
  | 156 | 155 | \* Fixed bug on use two or more gallery displayed in same page. |
  | 157 | 156 | \* Add Vimeo Option to video. |
  |  | 157 |  |
  | 158 | 158 | = 2.4 = |
  | 159 | 159 | \* Add Ordering feature on video list. |
  |  | 160 |  |
  | 160 | 161 | = 2.4.3 = |
  | 161 | 162 | \* Fixed bug on adding videos. |
  |  | 163 |  |
  |  | 164 | = 3.0 = |
  |  | 165 | \* Free package version changed to support limited options only as hdw player updated its new pricing and package model. This package does support direct videos only like .mp4, .flv. |
  |  | 166 | \* Autocomplete for adding single video in the HDW Player Menu. |
* ## [hdw-player-video-player-video-gallery/trunk/shortcode.php](/changeset/900030/hdw-player-video-player-video-gallery/trunk/shortcode.php?old=794672&old_path=hdw-player-video-player-video-gallery%2Ftrunk%2Fshortcode.php "Show the [798976:900030] differences restricted to hdw-player-video-player-video-gallery/trunk/shortcode.php")

  | [r798976](/browser/hdw-player-video-player-video-gallery/trunk/shortcode.php?rev=794672#L9 "Show revision 798976 of this file in browser") | [r900030](/browser/hdw-player-video-player-video-gallery/trunk/shortcode.php?rev=900030#L9 "Show revision 900030 of this file in browser") |  |
  | --- | --- | --- |
  | 9 | 9 | if (! $atts ['id']) |
  | 10 | 10 | $atts ['id'] = 1; |
  | 11 |  | ; |
  | 12 |  | $player = $wpdb->get\_row ( "SELECT \* FROM " . $wpdb->prefix . "hdwplayer WHERE id=" . $atts ['id'] ); |
  |  | 11 |  |
  |  | 12 | $embed = ''; |
  |  | 13 | $html5 = ''; |
  |  | 14 |  |
  |  | 15 | $player = $wpdb->get\_row ( "SELECT \* FROM " . $wpdb->prefix . "hdwplayer WHERE id=" . intval($atts ['id'] )); |
  | 13 | 16 |  |
  | 14 | 17 | $siteurl = get\_option ( 'siteurl' ); |
  | 15 | 18 | $src = $siteurl . '/wp-content/plugins/' . basename ( dirname ( \_\_FILE\_\_ ) ) . '/player.swf'; |
  | 16 | 19 | $noimage = $siteurl . '/wp-content/plugins/' . basename ( dirname ( \_\_FILE\_\_ ) ) . '/assets/noimage.jpg'; |
  | 17 |  | $rr = $siteurl . '/wp-content/plugins/' . basename ( dirname ( \_\_FILE\_\_ ) ) . '/assets/right.jpg'; |
  | 18 |  | $lr = $siteurl . '/wp-content/plugins/' . basename ( dirname ( \_\_FILE\_\_ ) ) . '/assets/left.jpg'; |
  | 19 |  | $buttons = $siteurl . '/wp-content/plugins/' . basename ( dirname ( \_\_FILE\_\_ ) ) . '/assets/buttons1.png'; |
  |  | 20 | $buttons = $siteurl . '/wp-content/plugins/' . basename ( dirname ( \_\_FILE\_\_ ) ) . '/assets/buttons.png'; |
  |  | 21 | $jquery = $siteurl . '/wp-content/plugins/' . basename ( dirname ( \_\_FILE\_\_ ) ) . '/js/jquery.min.js'; |
  | 20 | 22 | $slider = $siteurl . '/wp-content/plugins/' . basename ( dirname ( \_\_FILE\_\_ ) ) . '/js/jquery.slider.min.js'; |
  |  | 23 | $inner = $siteurl . '/wp-content/plugins/' . basename ( dirname ( \_\_FILE\_\_ ) ) . '/assets/inner.png'; |
  |  | 24 | $outer = $siteurl . '/wp-content/plugins/' . basename ( dirname ( \_\_FILE\_\_ ) ) . '/assets/outer.png'; |
  | 21 | 25 | $playerurl = $siteurl . '/?embed=view'; |
  | 22 | 26 |  |
  | […](/browser/hdw-player-video-player-video-gallery/trunk/shortcode.php?rev=794672#L24) | […](/browser/hdw-player-video-player-video-gallery/trunk/shortcode.php?rev=900030#L28) |  |
  | 24 | 28 |  |
  | 25 | 29 | $gallery = $wpdb->get\_row ( "SELECT \* FROM " . $wpdb->prefix . "hdwplayer\_gallery WHERE id=" . $player->galleryid); |
  | 26 |  | if ($gallery->id) { |
  |  | 30 |  |
  |  | 31 | if ($player->playlistid) { |
  | 27 | 32 | $playlist = $wpdb->get\_results ( "SELECT \* FROM " . $wpdb->prefix . "hdwplayer\_videos WHERE playlistid=" . intval ( $player->playlistid ) ." ORDER BY ordering" ); |
  | 28 | 33 | } |
  | 29 |  |  |
  | 30 |  | ~~$embed = '';~~ |
  | 31 |  | ~~$html5 = '';~~ |
  | 32 | 34 |  |
  | 33 | 35 | if ($player->videoid) { |
  | […](/browser/hdw-player-video-player-video-gallery/trunk/shortcode.php?rev=794672#L37) | […](/browser/hdw-player-video-player-video-gallery/trunk/shortcode.php?rev=900030#L39) |  |
  | 37 | 39 | } |
  | 38 | 40 |  |
  | 39 |  | switch ($results->type) { |
  | 40 |  | case 'youtube' : |
  | 41 |  | $url\_string = parse\_url ( $results->video, PHP\_URL\_QUERY ); |
  | 42 |  | parse\_str ( $url\_string, $args ); |
  | 43 |  | $html5 = '<iframe title="YouTube video player" width="' . $player->width . '" height="' . $player->height . '" src="http://www.youtube.com/embed/' . $args ['v'] . '" frameborder="0" allowfullscreen></iframe>'; |
  | 44 |  | break; |
  | 45 |  | case 'dailymotion' : |
  | 46 |  | $html5 = '<iframe frameborder="0" width="' . $player->width . '" height="' . $player->height . '" src="' . $results->video . '"></iframe>'; |
  | 47 |  | break; |
  | 48 |  | case 'rtmp' : |
  | 49 |  | $url\_string = str\_replace ( 'rtmp', 'http', $results->streamer ) . '/' . $results->video . '/playlist.m3u8'; |
  | 50 |  | $html5 = '<video onclick="this.play();" width="' . $player->width . '" height="' . $player->height . '" controls>'; |
  | 51 |  | $html5 .= '<source src="' . $url\_string . '" />'; |
  | 52 |  | $html5 .= '</video>'; |
  | 53 |  | break; |
  | 54 |  | default : |
  | 55 |  | $html5 = '<video onclick="this.play();" width="' . $player->width . '" height="' . $player->height . '" controls>'; |
  | 56 |  | $html5 .= '<source src="' . $results->video . '" />'; |
  | 57 |  | $html5 .= '</video>'; |
  | 58 |  | } |
  | 59 |  | if ($gallery->id) { |
  | 60 |  | $embed .= '<div id="player\_div' . $player->id . '">'; |
  | 61 |  | } |
  | 62 |  | $embed .= '<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="' . $player->width . '" height="' . $player->height . '">'; |
  | 63 |  | $embed .= '<param name="movie" value="' . $src . '" />'; |
  | 64 |  | $embed .= '<param name="allowfullscreen" value="true" />'; |
  | 65 |  | $embed .= '<param name="allowscriptaccess" value="always" />'; |
  | 66 |  | $embed .= '<param name="flashvars" value="' . $flashvars . '" />'; |
  | 67 |  | $embed .= '<object type="application/x-shockwave-flash" data="' . $src . '" width="' . $player->width . '" height="' . $player->height . '">'; |
  | 68 |  | $embed .= '<param name="movie" value="' . $src . '" />'; |
  | 69 |  | $embed .= '<param name="allowfullscreen" value="true" />'; |
  | 70 |  | $embed .= '<param name="allowscriptaccess" value="always" />'; |
  | 71 |  | $embed .= '<param name="flashvars" value="' . $flashvars . '" />'; |
  | 72 |  | $embed .= '<p>' . $html5 . '</p>'; |
  | 73 |  | $embed .= '</object>'; |
  | 74 |  | $embed .= '</object>'; |
  |  | 41 | $embed .= '<script type="text/javascript" src="'.$jquery.'"></script>'; |
  |  | 42 |  |
  |  | 43 | $detect = new Mobile\_Detect(); |
  |  | 44 | if ($detect->isMobile()) { |
  |  | 45 |  |
  |  | 46 | if(count($playlist) > 1 && $player->playlist == 1){ |
  |  | 47 | $isHtml5 = true; |
  |  | 48 | $html5 .= '<div id="player\_container'.$player->id.'" style="width:' . $player->width . 'px; height:' . $player->height . 'px; margin-bottom: 15px; position:relative; overflow:hidden;" >'; |
  |  | 49 | $html5 .= '<div style="position:absolute;" id="player\_div' . $player->id . '">'; |
  |  | 50 | } |
  |  | 51 |  |
  |  | 52 | switch ($results->type) { |
  |  | 53 | case 'youtube' : |
  |  | 54 | $url\_string = parse\_url ( $results->video, PHP\_URL\_QUERY ); |
  |  | 55 | parse\_str ( $url\_string, $args ); |
  |  | 56 | $html5 .= '<iframe title="YouTube video player" width="' . $player->width . '" height="' . $player->height . '" src="http://www.youtube.com/embed/' . $args ['v'] . '" frameborder="0" allowfullscreen></iframe>'; |
  |  | 57 | break; |
  |  | 58 | case 'dailymotion' : |
  |  | 59 | $html5 .= '<iframe frameborder="0" width="' . $player->width . '" height="' . $player->height . '" src="' . $results->video . '"></iframe>'; |
  |  | 60 | break; |
  |  | 61 | case 'rtmp' : |
  |  | 62 | $url\_string = str\_replace ( 'rtmp', 'http', $results->streamer ) . '/' . $results->video . '/playlist.m3u8'; |
  |  | 63 | $html5 .= '<video poster="' . $results->preview . '" onclick="this.play();" width="' . $player->width . '" height="' . $player->height . '" controls>'; |
  |  | 64 | $html5 .= '<source src="' . $url\_string . '" />'; |
  |  | 65 | $html5 .= '</video>'; |
  |  | 66 | break; |
  |  | 67 | default : |
  |  | 68 | $html5 .= '<video poster="' . $results->preview . '" onclick="this.play();" width="' . $player->width . '" height="' . $player->height . '" controls>'; |
  |  | 69 | $html5 .= '<source src="' . $results->video . '" />'; |
  |  | 70 | $html5 .= '</video>'; |
  |  | 71 | } |
  |  | 72 |  |
  |  | 73 | if(count($playlist) > 1 && $player->playlist == 1){ |
  |  | 74 | $html5 .= '</div>'; |
  |  | 75 | $html5 .= '<img id="' . $player->id . 'hdwplaylist" class="outer" style="display:none; margin:' . ($player->height/2 - 32) . 'px 0px 0px ' . ($player->width - 35) . 'px; position:absolute; cursor:pointer;" title="More Videos" src="'.$inner.'" />'; |
  |  | 76 | $html5 .= '<div id="' . $player->id . 'hdwvideos" class="outer" style="display:block;; width:150px; height:' . $player->height . 'px; margin:0px 0px 0px ' . ($player->width) . 'px; background:black; position:absolute;">'; |
  |  | 77 | $html5 .= '<div style="font-variant:small-caps; color:white; margin:0px 0px 2px 28px; height:20px;">'; |
  |  | 78 | $html5 .= 'Related Videos</div>'; |
  |  | 79 | $html5 .= '<div id="' . $player->id . 'playlistbody" style="height:' . ($player->height - 22) . 'px; background:#242526; overflow:scroll; overflow-x:hidden;">'; |
  |  | 80 | for($i = 0; $i < count($playlist); $i++) |
  |  | 81 | { |
  |  | 82 | if($playlist[$i]->thumb != "") { |
  |  | 83 | $html5 .= '<img onclick="changePlayer(\'' . $playlist[$i]->id . '\',\'' . $player->id . '\');" id="' . $player->id . 'video' . $playlist[$i]->id . '" src="' . $playlist[$i]->thumb . '" width="112" height="78"'; |
  |  | 84 | $html5 .= 'style="margin:10px 0px 0px 10px; cursor:pointer;">'; |
  |  | 85 | } |
  |  | 86 | $html5 .= '<div id="' . $player->id . 'video' . $playlist[$i]->id . '" style="margin:2px 0px 0px 0px; '; |
  |  | 87 | if($i%2) { $html5 .=  'background: #1b1c1c;'; } |
  |  | 88 | $html5 .= ' font-variant:small-caps; font-size:11px; color:white; text-align:center; cursor:pointer;"><a onclick="changePlayer(\'' . $playlist[$i]->id . '\',\'' . $player->id . '\');" >' . ($playlist[$i]->title) . '</a></div>'; |
  |  | 89 | } |
  |  | 90 | $html5 .= '</div></div>'; |
  |  | 91 | $html5 .= '</div>'; |
  |  | 92 | $html5 .= '<script type="text/javascript">'; |
  |  | 93 | $html5 .= 'var $j = jQuery.noConflict();'; |
  |  | 94 | $html5 .= '$j(document).ready(function(){'; |
  |  | 95 | $html5 .= '$j("#' . $player->id . 'hdwplaylist").click(function(){'; |
  |  | 96 | $html5 .= 'if($j("#' . $player->id . 'hdwplaylist").attr("class") == "outer"){'; |
  |  | 97 | $html5 .= '$j("#' . $player->id . 'hdwplaylist").attr("class", "inner");'; |
  |  | 98 | $html5 .= '$j("#' . $player->id . 'hdwplaylist").attr("src", "'.$outer.'");'; |
  |  | 99 | $html5 .= '$j("#' . $player->id . 'hdwvideos").attr("class", "inner");'; |
  |  | 100 | $html5 .= 'var list = parseInt( $j("#' . $player->id . 'hdwplaylist").css("marginLeft") );'; |
  |  | 101 | $html5 .= 'list = list - 150;'; |
  |  | 102 | $html5 .= '$j("#' . $player->id . 'hdwplaylist").animate({"margin-left":list+"px"},500);'; |
  |  | 103 | $html5 .= '$j("#player\_div' . $player->id . '").animate({"margin-left":"-150px"},500);'; |
  |  | 104 | $html5 .= 'var v = parseInt( $j("#' . $player->id . 'hdwvideos").css("marginLeft") );'; |
  |  | 105 | $html5 .= 'v = v - 150;'; |
  |  | 106 | $html5 .= '$j("#' . $player->id . 'hdwvideos").css({"display":"block"});'; |
  |  | 107 | $html5 .= '$j("#' . $player->id . 'hdwvideos").animate({"margin-left":v+"px"},500);'; |
  |  | 108 | $html5 .= '}else{'; |
  |  | 109 | $html5 .= '$j("#' . $player->id . 'hdwplaylist").attr("class", "outer");'; |
  |  | 110 | $html5 .= '$j("#' . $player->id . 'hdwplaylist").attr("src", "'.$inner.'");'; |
  |  | 111 | $html5 .= '$j("#' . $player->id . 'hdwvideos").attr("class", "outer");'; |
  |  | 112 | $html5 .= 'var list = parseInt( $j("#' . $player->id . 'hdwplaylist").css("marginLeft") );'; |
  |  | 113 | $html5 .= '$j("#player\_div' . $player->id . '").animate({"margin-left":"0px"},500);'; |
  |  | 114 | $html5 .= 'list = list + 150;'; |
  |  | 115 | $html5 .= '$j("#' . $player->id . 'hdwplaylist").animate({"margin-left":list+"px"},500);'; |
  |  | 116 | $html5 .= 'var v = parseInt( $j("#' . $player->id . 'hdwvideos").css("marginLeft") );'; |
  |  | 117 | $html5 .= 'v = v + 150;'; |
  |  | 118 | $html5 .= '$j("#' . $player->id . 'hdwvideos").animate({"margin-left":v+"px"},500,function() {'; |
  |  | 119 | $html5 .= '$j(this).hide();'; |
  |  | 120 | $html5 .= '});'; |
  |  | 121 | $html5 .= '}});'; |
  |  | 122 | $html5 .= '});'; |
  |  | 123 | $html5 .= '</script>'; |
  |  | 124 | $html5 .= '<script type="text/javascript">'; |
  |  | 125 | $html5 .= '$j(document).ready(function(){'; |
  |  | 126 | $html5 .= '$j("#' . $player->id . 'hdwplaylist").css({"display":"block","z-index":"99"});'; |
  |  | 127 | $html5 .= '});'; |
  |  | 128 | $html5 .= '</script>'; |
  |  | 129 | if($player->playlistopen == '1'){ |
  |  | 130 | $html5 .= '<script type="text/javascript">'; |
  |  | 131 | $html5 .= '$j(document).ready(function(){'; |
  |  | 132 | $html5 .= '$j("#' . $player->id . 'hdwplaylist").click();'; |
  |  | 133 | $html5 .= '});'; |
  |  | 134 | $html5 .= '</script>'; |
  |  | 135 | } |
  |  | 136 | } |
  |  | 137 | } |
  |  | 138 | if ($detect->isMobile()) { |
  |  | 139 | $embed .= $html5; |
  |  | 140 | }else{ |
  |  | 141 | if ($gallery->id) { |
  |  | 142 | $embed .= '<div id="player\_div' . $player->id . '">'; |
  |  | 143 | } |
  |  | 144 | $embed .= '<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="' . $player->width . '" height="' . $player->height . '">'; |
  |  | 145 | $embed .= '<param name="movie" value="' . $src . '" />'; |
  |  | 146 | $embed .= '<param name="allowfullscreen" value="true" />'; |
  |  | 147 | $embed .= '<param name="allowscriptaccess" value="always" />'; |
  |  | 148 | $embed .= '<param name="flashvars" value="' . $flashvars . '" />'; |
  |  | 149 | $embed .= '<object type="application/x-shockwave-flash" data="' . $src . '" width="' . $player->width . '" height="' . $player->height . '">'; |
  |  | 150 | $embed .= '<param name="movie" value="' . $src . '" />'; |
  |  | 151 | $embed .= '<param name="allowfullscreen" value="true" />'; |
  |  | 152 | $embed .= '<param name="allowscriptaccess" value="always" />'; |
  |  | 153 | $embed .= '<param name="flashvars" value="' . $flashvars . '" />'; |
  |  | 154 | $embed .= '</object>'; |
  |  | 155 | $embed .= '</object>'; |
  |  | 156 | if ($gallery->id) { |
  |  | 157 | $embed .= '</div>'; |
  |  | 158 | } |
  |  | 159 | } |
  |  | 160 |  |
  |  | 161 | /\* ================ Gallery List ================ \*/ |
  | 75 | 162 |  |
  | 76 | 163 | if ($gallery->id) { |
  | […](/browser/hdw-player-video-player-video-gallery/trunk/shortcode.php?rev=794672#L79) | […](/browser/hdw-player-video-player-video-gallery/trunk/shortcode.php?rev=900030#L166) |  |
  | 79 | 166 | $column = 0; |
  | 80 | 167 | $row = 1; |
  |  | 168 | $k = 0; |
  |  | 169 | $n = 0; |
  |  | 170 | $exit = 0; |
  |  | 171 |  |
  | 81 | 172 | $totalvideo = count ( $playlist ); |
  |  | 173 |  |
  | 82 | 174 | if ($totalvideo < $gallery->limit) { |
  | 83 | 175 | $gallery->limit = $totalvideo; |
  | […](/browser/hdw-player-video-player-video-gallery/trunk/shortcode.php?rev=794672#L86) | […](/browser/hdw-player-video-player-video-gallery/trunk/shortcode.php?rev=900030#L178) |  |
  | 86 | 178 | $totalvideo = $gallery->limit; |
  | 87 | 179 | } |
  |  | 180 |  |
  | 88 | 181 | $pagelimit = $gallery->rows \* $gallery->columns; |
  | 89 | 182 | $totaldiv = intval ( $totalvideo / $pagelimit ); |
  | 90 | 183 | $remain = $totalvideo % $pagelimit; |
  |  | 184 |  |
  | 91 | 185 | if ($remain > 0) |
  | 92 | 186 | $totaldiv ++; |
  | 93 |  | ~~$k = 0;~~ |
  | 94 |  | ~~$n = 0;~~ |
  | 95 |  | ~~$exit = 0;~~ |
  | 96 | 187 | if($gallery->columns > $totalvideo){ |
  | 97 | 188 | $cols = $totalvideo; |
  | […](/browser/hdw-player-video-player-video-gallery/trunk/shortcode.php?rev=794672#L109) | […](/browser/hdw-player-video-player-video-gallery/trunk/shortcode.php?rev=900030#L200) |  |
  | 109 | 200 | } |
  | 110 | 201 | } |
  |  | 202 |  |
  | 111 | 203 | $vh = ((($gallery->height + 7) + 28) \* $rows) + (($rows) \* $gallery->space); |
  | 112 | 204 | $vw = (($gallery->width + 4) \* $cols) + (($cols - 1) \* $gallery->space); |
  | 113 |  | ; |
  | 114 |  | $embed .= '</div>'; |
  |  | 205 |  |
  | 115 | 206 | $embed .= '<style>#slider' . $player->id . ' { height: 1%; overflow:hidden; padding: 0 0 10px;   width: '. ($vw+78) .'px; } |
  | 116 |  | #slider' . $player->id . ' .viewport { float: left; width: ' . $vw . 'px; ~~height: ' . $vh . 'px;~~ overflow: hidden; position: relative; } |
  |  | 207 | #slider' . $player->id . ' .viewport { float: left; width: ' . $vw . 'px; overflow: hidden; position: relative; } |
  | 117 | 208 | #slider' . $player->id . ' .buttons { background:url("' . $buttons . '") no-repeat scroll 0 0 transparent; display: block; margin: ' . (($vh / 2) - 17) . 'px 0px 0 0; background-position: 0 -38px; text-indent: -999em; float: left; width: 39px; height: 37px; overflow: hidden; position: relative; } |
  | 118 | 209 | #slider' . $player->id . ' .next { background-position: 0 0; margin: ' . (($vh / 2) - 17) . 'px 0 0 0px;  } |
  | 119 | 210 | #slider' . $player->id . ' .disable { visibility: hidden; } |
  | 120 | 211 | #slider' . $player->id . ' .overview { list-style: none; position: absolute; padding: 0; margin: 0; width: ' . $vw . 'px; left: 0 top: 0; } |
  | 121 |  | #slider' . $player->id . ' .overview li{ float: left; margin: 0 20px 0 0; padding: 1px; height: ~~' . $vh . 'px~~; border: 0px solid #dcdcdc; width: ' . $vw . 'px;} |
  |  | 212 | #slider' . $player->id . ' .overview li{ float: left; margin: 0 20px 0 0; padding: 1px; height: 100%; border: 0px solid #dcdcdc; width: ' . $vw . 'px;} |
  | 122 | 213 | </style>'; |
  | 123 | 214 | $embed .= ''; |
  | 124 |  | ~~$embed .= '<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>';~~ |
  | 125 | 215 | $embed .= '<script src="' . $slider . '"></script>'; |
  | 126 | 216 | $embed .= '<script type="text/javascript"> |
  | 127 |  | $(document).ready(function(){ |
  | 128 |  | $("#slider' . $player->id . '").slider({ display: 1 }); |
  |  | 217 | var $j = jQuery.noConflict(); |
  |  | 218 | $j(document).ready(function(){ |
  |  | 219 | $j("#slider' . $player->id . '").slider({ display: 1 }); |
  | 129 | 220 | }); |
  | 130 |  | ~~</script>';~~ |
  | 131 |  | ~~$embed .= '<script>~~ |
  | 132 |  | ~~function changePlayer(video,div){~~ |
  | 133 |  | ~~$.post(location.href,~~ |
  | 134 |  | ~~{~~ |
  | 135 |  | ~~action:"flashvars",~~ |
  | 136 |  | ~~id:div~~ |
  | 137 |  | ~~},function(response){~~ |
  | 138 |  | ~~var flashvars = response.flashvars+"&vid="+video;~~ |
  | 139 |  | ~~var code = "";~~ |
  | 140 |  | ~~code += "<object classid=\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\" width=\""+response.width+"\" height=\""+response.height+"\">";~~ |
  | 141 |  | ~~code += "<param name=\"movie\" value=\"' . $src . '\" />";~~ |
  | 142 |  | ~~code += "<param name=\"allowfullscreen\" value=\"true\" />";~~ |
  | 143 |  | ~~code += "<param name=\"allowscriptaccess\" value=\"always\" />";~~ |
  | 144 |  | ~~code += "<param name=\"flashvars\" value=\""+flashvars+"\" />";~~ |
  | 145 |  | ~~code += "<object type=\"application/x-shockwave-flash\" data=\"' . $src . '\" width=\""+response.width+"\" height=\""+response.height+"\">";~~ |
  | 146 |  | ~~code += "<param name=\"movie\" value=\"' . $src . '\" />";~~ |
  | 147 |  | ~~code += "<param name=\"allowfullscreen\" value=\"true\" />";~~ |
  | 148 |  | ~~code += "<param name=\"allowscriptaccess\" value=\"always\" />";~~ |
  | 149 |  | ~~code += "<param name=\"flashvars\" value=\""+flashvars+"\" />";~~ |
  | 150 |  | ~~code += "</object>";~~ |
  | 151 |  | ~~code += "</object>";~~ |
  | 152 |  | ~~var divid = "player\_div"+div;~~ |
  | 153 |  | ~~document.getElementById(divid).innerHTML = code;~~ |
  | 154 |  | ~~}, "json"~~ |
  | 155 |  | ~~);~~ |
  | 156 |  | ~~}~~ |
  | 157 | 221 | </script>'; |
  | 158 | 222 | $embed .= '<div id="slider' . $player->id . '">'; |
  | 159 | 223 | $embed .= '<a class="buttons prev" href="#">left</a>'; |
  | 160 |  | $embed .= '<div class="viewport">'; |
  | 161 |  | $embed .= '<ul class="overview">'; |
  |  | 224 | $embed .= '<div id="viewport' . $player->id . '" class="viewport">'; |
  |  | 225 | $embed .= '<ul id="overview' . $player->id . '" class="overview">'; |
  |  | 226 |  |
  | 162 | 227 | for($j = 0; $j < $totaldiv; $j ++) { |
  | 163 | 228 | $embed .= '<li>'; |
  | […](/browser/hdw-player-video-player-video-gallery/trunk/shortcode.php?rev=794672#L182) | […](/browser/hdw-player-video-player-video-gallery/trunk/shortcode.php?rev=900030#L247) |  |
  | 182 | 247 | $item->thumb = $noimage; |
  | 183 | 248 |  |
  | 184 |  | $embed .= '<div style="margin:' . $ypos . 'px 0px 0px ' . $xpos . 'px; ' . $css . ' ">'; |
  | 185 |  | $embed .= '<div~~> <a onclick="changePlayer(\'' . $item->id . '\',\'' . $player->id . '\');" style="width:' . $gallery->width . ';text-decoration:none;"> <img src="' . $item->thumb . '" width="' . $gallery->width . '" height="' . $gallery->height . '" title="' . 'Click to Watch : ' . $item->title . '" border="0"/> </a~~></div>'; |
  | 186 |  | $embed .= '<div style="width:' . $gallery->width . 'px; margin:2px; 2px;~~white-space:nowrap; overflow: hidden;">~~ <a onclick="changePlayer(\'' . $item->id . '\',\'' . $player->id . '\');" style="text-decoration:none;" title="' . $item->title . '">' . $item->title . '</a></div>'; |
  |  | 249 | $embed .= '<div style="cursor: pointer; margin:' . $ypos . 'px 0px 0px ' . $xpos . 'px; ' . $css . ' ">'; |
  |  | 250 | $embed .= '<div style="width:' . $gallery->width . 'px; height:' . $gallery->height . 'px;"><img onclick="changePlayer(\'' . $item->id . '\',\'' . $player->id . '\');" style="height:' . $gallery->height . 'px; width:' . $gallery->width . 'px; text-decoration:none;" src="' . $item->thumb . '" width="' . $gallery->width . '" height="' . $gallery->height . '" title="' . 'Click to Watch : ' . $item->title . '" border="0"/></div>'; |
  |  | 251 | $embed .= '<div style="width:' . $gallery->width . 'px; margin:2px; 2px;"><a onclick="changePlayer(\'' . $item->id . '\',\'' . $player->id . '\');" style="text-decoration:none;" title="' . $item->title . '">' . $item->title . '</a></div>'; |
  | 187 | 252 | $embed .= '</div>'; |
  | 188 | 253 | if (($i + 1) == $gallery->limit) { |
  | […](/browser/hdw-player-video-player-video-gallery/trunk/shortcode.php?rev=794672#L200) | […](/browser/hdw-player-video-player-video-gallery/trunk/shortcode.php?rev=900030#L265) |  |
  | 200 | 265 | $embed .= '<a class="buttons next" href="#">right</a>'; |
  | 201 | 266 | $embed .= '</div>'; |
  |  | 267 | $embed .= '<script type="text/javascript"> |
  |  | 268 | $j(window).load(function(){ |
  |  | 269 | $j("#viewport' . $player->id . '").css("height",$j("#overview' . $player->id . '").outerHeight()); |
  |  | 270 | });</script>'; |
  |  | 271 | } |
  |  | 272 |  |
  |  | 273 | if($isHtml5 == true || $gallery->id){ |
  |  | 274 | $embed .= '<script> |
  |  | 275 | function changePlayer(video,div){ |
  |  | 276 | $j.ajax({ |
  |  | 277 | url: location.href, |
  |  | 278 | type: "post", |
  |  | 279 | headers : { "cache-control": "no-cache" }, |
  |  | 280 | data: { |
  |  | 281 | action:"flashvars",id:div,vid:video |
  |  | 282 | }, |
  |  | 283 | dataType: "json", |
  |  | 284 | success: function (response) {'; |
  |  | 285 | if($isHtml5 == true){ |
  |  | 286 | $embed .= '$j("#"+div+"hdwplaylist").click();'; |
  |  | 287 | } |
  |  | 288 | $embed .= ' |
  |  | 289 | var code = ""; |
  |  | 290 | code = response.html5; |
  |  | 291 | var divid = "player\_div"+div; |
  |  | 292 | document.getElementById(divid).innerHTML = code; |
  |  | 293 | } |
  |  | 294 | }); |
  |  | 295 | } |
  |  | 296 | </script>'; |
  | 202 | 297 | } |
  | 203 | 298 | return $embed; |
* ## [hdw-player-video-player-video-gallery/trunk/videos/\_\_add.php](/changeset/900030/hdw-player-video-player-video-gallery/trunk/videos/__add.php?old=794672&old_path=hdw-player-video-player-video-gallery%2Ftrunk%2Fvideos%2F__add.php "Show the [798976:900030] differences restricted to hdw-player-video-player-video-gallery/trunk/videos/__add.php")

  | [r798976](/browser/hdw-player-video-player-video-gallery/trunk/videos/__add.php?rev=794672#L5 "Show revision 798976 of this file in browser") | [r900030](/browser/hdw-player-video-player-video-gallery/trunk/videos/__add.php?rev=900030#L5 "Show revision 900030 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 | \*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*/ |
  | 6 | 6 | if($\_POST['edited'] == 'true' && check\_admin\_referer( 'hdwplayer-nonce')) { |
  | 7 |  | unset($\_POST['edited'], $\_POST['save'], $\_POST['\_wpnonce'], $\_POST['\_wp\_http\_referer']); |
  | 8 |  | if($\_POST['type'] == "youtube"){ |
  | 9 |  | $youtubeID = array(); |
  | 10 |  | preg\_match('/http\:\/\/www\.youtube\.com\/watch\?v=([\w-]{11})/',$\_POST['video'],$youtubeID); |
  | 11 |  | if($\_POST['thumb'] == ""){ |
  | 12 |  | $\_POST['thumb']     = 'http://img.youtube.com/vi/'.$youtubeID[1].'/default.jpg'; |
  | 13 |  | } |
  | 14 |  | if($\_POST['preview'] == ""){ |
  | 15 |  | $\_POST['preview']   = 'http://img.youtube.com/vi/'.$youtubeID[1].'/0.jpg'; |
  | 16 |  | } |
  | 17 |  | } |
  | 18 |  | if($\_POST['type'] == "vimeo"){ |
  | 19 |  | if($\_POST['thumb'] == '' || $\_POST['preview'] == ''){ |
  | 20 |  | $link = $\_POST['video']; |
  | 21 |  | $link = str\_replace('http://vimeo.com/', 'http://vimeo.com/api/v2/video/', $link) . '.php'; |
  | 22 |  | $html\_returned = unserialize(file\_get\_contents($link)); |
  | 23 |  | if($\_POST['thumb'] == ''){ |
  | 24 |  | $\_POST['thumb'] = $html\_returned[0]['thumbnail\_medium']; |
  | 25 |  | } |
  | 26 |  | if($\_POST['preview'] == ''){ |
  | 27 |  | $\_POST['preview'] = $html\_returned[0]['thumbnail\_large']; |
  | 28 |  | } |
  | 29 |  | } |
  | 30 |  | } |
  | 31 |  | if($\_POST['type'] == "dailymotion"){ |
  | 32 |  | if($\_POST['thumb'] == '' || $\_POST['preview'] == ''){ |
  | 33 |  | $url = $\_POST['video']; |
  | 34 |  | $id = strtok(basename($url), '\_'); |
  | 35 |  | $ch = curl\_init(); |
  | 36 |  | curl\_setopt($ch, CURLOPT\_URL, "https://api.dailymotion.com/video/$id?fields=thumbnail\_medium\_url,thumbnail\_url"); |
  | 37 |  | curl\_setopt($ch, CURLOPT\_HEADER, 0); |
  | 38 |  | curl\_setopt($ch, CURLOPT\_RETURNTRANSFER, true); |
  | 39 |  | curl\_setopt($ch, CURLOPT\_SSL\_VERIFYPEER, false); |
  | 40 |  | curl\_setopt($ch, CURLOPT\_TIMEOUT, 10); |
  | 41 |  | $output = curl\_exec($ch); |
  | 42 |  | curl\_close($ch); |
  | 43 |  | $output = json\_decode($output); |
  | 44 |  | if($\_POST['thumb'] == ''){ |
  | 45 |  | $\_POST['thumb'] = $output->thumbnail\_medium\_url; |
  | 46 |  | } |
  | 47 |  | if($\_POST['preview'] == ''){ |
  | 48 |  | $\_POST['preview'] = $output->thumbnail\_url; |
  | 49 |  | } |
  | 50 |  | } |
  | 51 |  | } |
  | 52 |  | if($\_POST['playlistid'] != '0'){ |
  |  | 7 | unset($\_POST['edited'], $\_POST['save'], $\_POST['\_wpnonce'], $\_POST['\_wp\_http\_referer']); |
  |  | 8 |  |
  |  | 9 | $lorder  = $wpdb->get\_row("SELECT MAX(ordering) As max FROM ".$table\_name." WHERE playlistid=".$\_POST['playlistid']); |
  |  | 10 | if($lorder->max != '') |
  |  | 11 | { |
  |  | 12 | $\_POST['ordering'] = $lorder->max+1; |
  |  | 13 | }else{ |
  | 53 | 14 | $\_POST['ordering'] = '1'; |
  | 54 | 15 | } |
  | […](/browser/hdw-player-video-player-video-gallery/trunk/videos/__add.php?rev=794672#L82) | […](/browser/hdw-player-video-player-video-gallery/trunk/videos/__add.php?rev=900030#L43) |  |
  | 82 | 43 | <option value="lighttpd" id="lighttpd" >Lighttpd Videos</option> |
  | 83 | 44 | <option value="bitgravity" id="bitgravity" >Bitgravity Videos</option> |
  | 84 |  | </select> |
  |  | 45 | </select><span id="features" style="margin-left: 15px; color: rgb(218, 41, 233); font-weight:bold;">Premium Features</span> |
  | 85 | 46 | </tr> |
  | 86 |  | <tr> |
  |  | 47 | <tr id="\_\_video"> |
  | 87 | 48 | <td width="30%"><?php \_e("Video URL " ); ?></td> |
  | 88 | 49 | <td><input type="text" id="\_video" name="video" size="50"></td> |
  | […](/browser/hdw-player-video-player-video-gallery/trunk/videos/__add.php?rev=794672#L92) | […](/browser/hdw-player-video-player-video-gallery/trunk/videos/__add.php?rev=900030#L53) |  |
  | 92 | 53 | <td><input type="text" id="hdvideo" name="hdvideo" size="50"></td> |
  | 93 | 54 | </tr> |
  | 94 |  | <tr id="\_streamer"> |
  | 95 |  | <td class="key"><?php \_e("Streamer" ); ?></td> |
  | 96 |  | <td><input type="text" id="streamer" name="streamer" size="60" /></td> |
  | 97 |  | </tr> |
  | 98 |  | <tr id="\_token"> |
  | 99 |  | <td class="key"><?php \_e("Security Token [Wowza]" ); ?></td> |
  | 100 |  | <td><input type="text" id="token" name="token" size="60" /></td> |
  | 101 |  | </tr> |
  | 102 |  | <tr> |
  |  | 55 | <tr id="\_preview"> |
  | 103 | 56 | <td><?php \_e("Preview Image" ); ?></td> |
  | 104 | 57 | <td><input type="text" id="preview" name="preview" size="50"></td> |
  | 105 | 58 | </tr> |
  | 106 |  | <tr> |
  |  | 59 | <tr id="\_thumb"> |
  | 107 | 60 | <td><?php \_e("Thumb Image" ); ?></td> |
  | 108 | 61 | <td><input type="text" id="thumb" name="thumb" size="50"></td> |
  | 109 |  | ~~</tr>~~ |
  | 110 |  | ~~<tr id="\_dvr">~~ |
  | 111 |  | ~~<td class="key"><?php \_e("DVR" ); ?></td>~~ |
  | 112 |  | ~~<td><input type="checkbox" id="dvr" name="dvr" value="1" /></td>~~ |
  | 113 | 62 | </tr> |
  | 114 | 63 | <tr> |
  | […](/browser/hdw-player-video-player-video-gallery/trunk/videos/__add.php?rev=794672#L141) | […](/browser/hdw-player-video-player-video-gallery/trunk/videos/__add.php?rev=900030#L90) |  |
  | 141 | 90 |  |
  | 142 | 91 | function changeType(typ) { |
  | 143 |  |  |
  |  | 92 | document.getElementById('features').style.display="none"; |
  |  | 93 | document.getElementById('\_\_video').style.display="none"; |
  | 144 | 94 | document.getElementById('\_hdvideo').style.display="none"; |
  | 145 |  | document.getElementById('\_streamer').style.display="none"; |
  | 146 |  | document.getElementById('\_dvr').style.display="none"; |
  | 147 |  | document.getElementById('\_token').style.display="none"; |
  | 148 |  |  |
  |  | 95 | document.getElementById('\_thumb').style.display="none"; |
  |  | 96 | document.getElementById('\_preview').style.display="none"; |
  | 149 | 97 | switch(typ) { |
  |  | 98 | case 'youtube' : |
  |  | 99 | case 'dailymotion' : |
  |  | 100 | document.getElementById('features').style.display=""; |
  |  | 101 | document.getElementById('features').innerHTML="Pro Features"; |
  |  | 102 | break; |
  |  | 103 | case 'vimeo' : |
  | 150 | 104 | case 'rtmp' : |
  | 151 |  | document.getElementById('\_streamer').style.display=""; |
  | 152 |  | document.getElementById('\_token').style.display=""; |
  | 153 |  | break; |
  |  | 105 | case 'highwinds' : |
  |  | 106 | case 'lighttpd' : |
  | 154 | 107 | case 'bitgravity' : |
  | 155 |  | document.getElementById('\_dvr').style.display=""; |
  |  | 108 | document.getElementById('features').style.display=""; |
  |  | 109 | document.getElementById('features').innerHTML="Premium Features"; |
  | 156 | 110 | break; |
  | 157 | 111 | case 'video' : |
  |  | 112 | document.getElementById('\_\_video').style.display=""; |
  | 158 | 113 | document.getElementById('\_hdvideo').style.display=""; |
  |  | 114 | document.getElementById('\_thumb').style.display=""; |
  |  | 115 | document.getElementById('\_preview').style.display=""; |
  | 159 | 116 | break; |
  | 160 |  | } |
  |  | 117 | default: |
  |  | 118 |  |
  |  | 119 | } |
  | 161 | 120 | } |
  | 162 | 121 |  |
* ## [hdw-player-video-player-video-gallery/trunk/videos/\_\_edit.php](/changeset/900030/hdw-player-video-player-video-gallery/trunk/videos/__edit.php?old=794672&old_path=hdw-player-video-player-video-gallery%2Ftrunk%2Fvideos%2F__edit.php "Show the [798976:900030] differences restricted to hdw-player-video-player-video-gallery/trunk/videos/__edit.php")

  | [r798976](/browser/hdw-player-video-player-video-gallery/trunk/videos/__edit.php?rev=794672#L6 "Show revision 798976 of this file in browser") | [r900030](/browser/hdw-player-video-player-video-gallery/trunk/videos/__edit.php?rev=900030#L6 "Show revision 900030 of this file in browser") |  |
  | --- | --- | --- |
  | 6 | 6 | if($\_POST['edited'] == 'true' && check\_admin\_referer( 'hdwplayer-nonce')) { |
  | 7 | 7 | unset($\_POST['edited'], $\_POST['save'], $\_POST['\_wpnonce'], $\_POST['\_wp\_http\_referer']); |
  | 8 |  | if($\_POST['type'] == "youtube"){ |
  | 9 |  | $youtubeID = array(); |
  | 10 |  | preg\_match('/http\:\/\/www\.youtube\.com\/watch\?v=([\w-]{11})/',$\_POST['video'],$youtubeID); |
  | 11 |  | if($\_POST['thumb'] == ""){ |
  | 12 |  | $\_POST['thumb']     = 'http://img.youtube.com/vi/'.$youtubeID[1].'/default.jpg'; |
  |  | 8 | $video  = $wpdb->get\_row("SELECT playlistid FROM ".$table\_name." WHERE id=".trim($\_GET['id'])); |
  |  | 9 |  |
  |  | 10 | if($video->playlistid != $\_POST['playlistid']){ |
  |  | 11 | $lorder  = $wpdb->get\_row("SELECT MAX(ordering) As max FROM ".$table\_name." WHERE playlistid=".$\_POST['playlistid']); |
  |  | 12 | if($lorder->max != '') |
  |  | 13 | { |
  |  | 14 | $\_POST['ordering'] = $lorder->max+1; |
  |  | 15 | }else{ |
  |  | 16 | $\_POST['ordering'] = '1'; |
  | 13 | 17 | } |
  | 14 |  | ~~if($\_POST['preview'] == ""){~~ |
  | 15 |  | ~~$\_POST['preview']   = 'http://img.youtube.com/vi/'.$youtubeID[1].'/0.jpg';~~ |
  | 16 |  | ~~}~~ |
  | 17 |  | ~~}~~ |
  | 18 |  | ~~if($\_POST['type'] == "vimeo"){~~ |
  | 19 |  | ~~if($\_POST['thumb'] == '' || $\_POST['preview'] == ''){~~ |
  | 20 |  | ~~$link = $\_POST['video'];~~ |
  | 21 |  | ~~$link = str\_replace('http://vimeo.com/', 'http://vimeo.com/api/v2/video/', $link) . '.php';~~ |
  | 22 |  | ~~$html\_returned = unserialize(file\_get\_contents($link));~~ |
  | 23 |  | ~~if($\_POST['thumb'] == ''){~~ |
  | 24 |  | ~~$\_POST['thumb'] = $html\_returned[0]['thumbnail\_medium'];~~ |
  | 25 |  | ~~}~~ |
  | 26 |  | ~~if($\_POST['preview'] == ''){~~ |
  | 27 |  | ~~$\_POST['preview'] = $html\_returned[0]['thumbnail\_large'];~~ |
  | 28 |  | ~~}~~ |
  | 29 |  | ~~}~~ |
  | 30 |  | ~~}~~ |
  | 31 |  | ~~if($\_POST['type'] == "dailymotion"){~~ |
  | 32 |  | ~~if($\_POST['thumb'] == '' || $\_POST['preview'] == ''){~~ |
  | 33 |  | ~~$url = $\_POST['video'];~~ |
  | 34 |  | ~~$id = strtok(basename($url), '\_');~~ |
  | 35 |  | ~~$ch = curl\_init();~~ |
  | 36 |  | ~~curl\_setopt($ch, CURLOPT\_URL, "https://api.dailymotion.com/video/$id?fields=thumbnail\_medium\_url,thumbnail\_url");~~ |
  | 37 |  | ~~curl\_setopt($ch, CURLOPT\_HEADER, 0);~~ |
  | 38 |  | ~~curl\_setopt($ch, CURLOPT\_RETURNTRANSFER, true);~~ |
  | 39 |  | ~~curl\_setopt($ch, CURLOPT\_SSL\_VERIFYPEER, false);~~ |
  | 40 |  | ~~curl\_setopt($ch, CURLOPT\_TIMEOUT, 10);~~ |
  | 41 |  | ~~$output = curl\_exec($ch);~~ |
  | 42 |  | ~~curl\_close($ch);~~ |
  | 43 |  | ~~$output = json\_decode($output);~~ |
  | 44 |  | ~~if($\_POST['thumb'] == ''){~~ |
  | 45 |  | ~~$\_POST['thumb'] = $output->thumbnail\_medium\_url;~~ |
  | 46 |  | ~~}~~ |
  | 47 |  | ~~if($\_POST['preview'] == ''){~~ |
  | 48 |  | ~~$\_POST['preview'] = $output->thumbnail\_url;~~ |
  | 49 |  | ~~}~~ |
  | 50 |  | ~~}~~ |
  | 51 |  | ~~}~~ |
  | 52 |  | ~~$video  = $wpdb->get\_row("SELECT playlistid FROM ".$table\_name." WHERE id=".trim($\_GET['id']));~~ |
  | 53 |  | ~~if($\_POST['playlistid'] == '0'){~~ |
  | 54 |  | ~~$\_POST['ordering'] = '0';~~ |
  | 55 |  | ~~}else if($video->playlistid != $\_POST['playlistid']){~~ |
  | 56 |  | ~~$\_POST['ordering'] = '1';~~ |
  | 57 | 18 | } |
  | 58 | 19 | $wpdb->update($table\_name, $\_POST, array('id' => $\_GET['id'])); |
  | […](/browser/hdw-player-video-player-video-gallery/trunk/videos/__edit.php?rev=794672#L90) | […](/browser/hdw-player-video-player-video-gallery/trunk/videos/__edit.php?rev=900030#L51) |  |
  | 90 | 51 | <option value="lighttpd" id="lighttpd" >Lighttpd Videos</option> |
  | 91 | 52 | <option value="bitgravity" id="bitgravity" >Bitgravity Videos</option> |
  | 92 |  | </select> |
  |  | 53 | </select><span id="features" style="margin-left: 15px; color: rgb(218, 41, 233); font-weight:bold;"></span> |
  | 93 | 54 | <?php echo '<script>document.getElementById("'.$data->type.'").selected="selected"</script>'; ?> </td> |
  | 94 | 55 | </tr> |
  | 95 |  | <tr> |
  |  | 56 | <tr id="\_\_video"> |
  | 96 | 57 | <td width="30%"><?php \_e("Video URL " ); ?></td> |
  | 97 | 58 | <td><input type="text" id="\_video" name="video" value="<?php echo $data->video; ?>" size="50"></td> |
  | […](/browser/hdw-player-video-player-video-gallery/trunk/videos/__edit.php?rev=794672#L101) | […](/browser/hdw-player-video-player-video-gallery/trunk/videos/__edit.php?rev=900030#L62) |  |
  | 101 | 62 | <td><input type="text" id="hdvideo" name="hdvideo" value="<?php echo $data->hdvideo; ?>" size="50"></td> |
  | 102 | 63 | </tr> |
  | 103 |  | <tr id="\_streamer"> |
  | 104 |  | <td class="key"><?php \_e("Streamer" ); ?></td> |
  | 105 |  | <td><input type="text" id="streamer" name="streamer" size="60" value="<?php echo $data->streamer; ?>" /></td> |
  | 106 |  | </tr> |
  | 107 |  | <tr id="\_token"> |
  | 108 |  | <td class="key"><?php \_e("Security Token [Wowza]" ); ?></td> |
  | 109 |  | <td><input type="text" id="token" name="token" size="60" value="<?php echo $data->token; ?>"/></td> |
  | 110 |  | </tr> |
  | 111 |  | <tr> |
  |  | 64 | <tr id="\_preview"> |
  | 112 | 65 | <td><?php \_e("Preview Image" ); ?></td> |
  | 113 | 66 | <td><input type="text" id="preview" name="preview" value="<?php echo $data->preview; ?>" size="50"></td> |
  | 114 | 67 | </tr> |
  | 115 |  | <tr> |
  |  | 68 | <tr id="\_thumb"> |
  | 116 | 69 | <td><?php \_e("Thumb Image" ); ?></td> |
  | 117 | 70 | <td><input type="text" id="thumb" name="thumb" value="<?php echo $data->thumb; ?>" size="50"></td> |
  | 118 |  | ~~</tr>~~ |
  | 119 |  | ~~<tr id="\_dvr">~~ |
  | 120 |  | ~~<td class="key"><?php \_e("DVR" ); ?></td>~~ |
  | 121 |  | ~~<td><input type="hidden" name="dvr" value=""><input type="checkbox" id="dvr" name="dvr" value="1" <?php if($data->dvr==1){echo 'checked="checked" ';}?> /></td>~~ |
  | 122 | 71 | </tr> |
  | 123 | 72 | <tr> |
  | […](/browser/hdw-player-video-player-video-gallery/trunk/videos/__edit.php?rev=794672#L150) | […](/browser/hdw-player-video-player-video-gallery/trunk/videos/__edit.php?rev=900030#L99) |  |
  | 150 | 99 |  |
  | 151 | 100 | function changeType(typ) { |
  | 152 |  |  |
  |  | 101 | document.getElementById('features').style.display="none"; |
  |  | 102 | document.getElementById('\_\_video').style.display="none"; |
  | 153 | 103 | document.getElementById('\_hdvideo').style.display="none"; |
  | 154 |  | document.getElementById('\_streamer').style.display="none"; |
  | 155 |  | document.getElementById('\_dvr').style.display="none"; |
  | 156 |  | document.getElementById('\_token').style.display="none"; |
  | 157 |  |  |
  | 158 |  | switch(typ) { |
  |  | 104 | document.getElementById('\_thumb').style.display="none"; |
  |  | 105 | document.getElementById('\_preview').style.display="none"; |
  |  | 106 | switch(typ) { |
  |  | 107 | case 'youtube' : |
  |  | 108 | case 'dailymotion' : |
  |  | 109 | document.getElementById('features').style.display=""; |
  |  | 110 | document.getElementById('features').innerHTML="Pro Features"; |
  |  | 111 | break; |
  |  | 112 | case 'vimeo' : |
  | 159 | 113 | case 'rtmp' : |
  | 160 |  | document.getElementById('\_streamer').style.display=""; |
  | 161 |  | document.getElementById('\_token').style.display=""; |
  | 162 |  | break; |
  |  | 114 | case 'highwinds' : |
  |  | 115 | case 'lighttpd' : |
  | 163 | 116 | case 'bitgravity' : |
  | 164 |  | document.getElementById('\_dvr').style.display=""; |
  |  | 117 | document.getElementById('features').style.display=""; |
  |  | 118 | document.getElementById('features').innerHTML="Premium Features"; |
  | 165 | 119 | break; |
  | 166 | 120 | case 'video' : |
  |  | 121 | document.getElementById('\_\_video').style.display=""; |
  | 167 | 122 | document.getElementById('\_hdvideo').style.display=""; |
  |  | 123 | document.getElementById('\_thumb').style.display=""; |
  |  | 124 | document.getElementById('\_preview').style.display=""; |
  | 168 | 125 | break; |
  | 169 |  | } |
  |  | 126 | default: |
  |  | 127 |  |
  |  | 128 | } |
  | 170 | 129 | } |
  | 171 | 130 |  |
* ## [hdw-player-video-player-video-gallery/trunk/videos/\_\_grid.php](/changeset/900030/hdw-player-video-player-video-gallery/trunk/videos/__grid.php?old=794672&old_path=hdw-player-video-player-video-gallery%2Ftrunk%2Fvideos%2F__grid.php "Show the [798976:900030] differences restricted to hdw-player-video-player-video-gallery/trunk/videos/__grid.php")

  | [r798976](/browser/hdw-player-video-player-video-gallery/trunk/videos/__grid.php?rev=794672#L38 "Show revision 798976 of this file in browser") | [r900030](/browser/hdw-player-video-player-video-gallery/trunk/videos/__grid.php?rev=900030#L38 "Show revision 900030 of this file in browser") |  |
  | --- | --- | --- |
  | 38 | 38 | } |
  | 39 | 39 | function column\_ordering($item){ |
  | 40 |  | if($item->ordering == 0){ |
  | 41 |  | $this->i += 1; |
  | 42 |  | return sprintf( '<div style="margin-top:4px;">0</div>'); |
  | 43 |  | }else{ |
  | 44 |  | $output ='<input type="text" size="2" name="%1$s['.$item->playlistid.']['.$item->id.']" value="%2$s" /><div style="text-align:center; margin-top:-23px;">'; |
  | 45 |  | if($item->playlistid == @$this->data[$this->i-1]->playlistid){ |
  | 46 |  | $output .= '<a class="button-secondary" href="?page=videos&opt=up&id='.$item->id.'&oid='.@$this->data[$this->i-1]->id.'" title="Move Up">&#9650;</a>'; |
  | 47 |  | } |
  | 48 |  | if($item->playlistid == @$this->data[$this->i+1]->playlistid){ |
  | 49 |  | $output .= '<a class="button-secondary" href="?page=videos&opt=down&id='.$item->id.'&oid='.@$this->data[$this->i+1]->id.'" title="Move Down">&#9660;</a>'; |
  | 50 |  | } |
  | 51 |  | $output .= '</div>'; |
  | 52 |  | $this->i += 1; |
  | 53 |  | return sprintf( $output, $this->\_args['ordering'], $item->ordering ); |
  |  | 40 | $output ='<input type="text" size="2" name="%1$s['.$item->playlistid.']['.$item->id.']" value="%2$s" /><div style="text-align:center; margin-top:-23px;">'; |
  |  | 41 | if($item->playlistid == @$this->data[$this->i-1]->playlistid){ |
  |  | 42 | $output .= '<a class="button-secondary" href="?page=videos&opt=up&id='.$item->id.'&oid='.@$this->data[$this->i-1]->id.'" title="Move Up">&#9650;</a>'; |
  | 54 | 43 | } |
  |  | 44 | if($item->playlistid == @$this->data[$this->i+1]->playlistid){ |
  |  | 45 | $output .= '<a class="button-secondary" href="?page=videos&opt=down&id='.$item->id.'&oid='.@$this->data[$this->i+1]->id.'" title="Move Down">&#9660;</a>'; |
  |  | 46 | } |
  |  | 47 | $output .= '</div>'; |
  |  | 48 | $this->i += 1; |
  |  | 49 | return sprintf( $output, $this->\_args['ordering'], $item->ordering ); |
  | 55 | 50 |  |
  | 56 | 51 | } |
  | […](/browser/hdw-player-video-player-video-gallery/trunk/videos/__grid.php?rev=794672#L100) | […](/browser/hdw-player-video-player-video-gallery/trunk/videos/__grid.php?rev=900030#L95) |  |
  | 100 | 95 | } |
  | 101 | 96 | if(in\_array(trim($d->ordering),$ordering)){ |
  | 102 |  | $order['ordering'] = trim($d->ordering) + 1; |
  | 103 |  | echo $order['ordering']; |
  |  | 97 | $order['ordering'] = trim($d->ordering) + 1; |
  | 104 | 98 | $this->wpdb->update($this->table\_name, $order, array('id' => $d->id)); |
  | 105 | 99 | $ordering[] = trim($d->ordering) + 1; |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=900030&old=798976&new_path=%2Fhdw-player-video-player-video-gallery&old_path=%2Fhdw-player-video-player-video-gallery)
* [Zip Archive](?format=zip&new=900030&old=798976&new_path=%2Fhdw-player-video-player-video-gallery&old_path=%2Fhdw-player-video-player-video-gallery)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from codevigilant.com_d51d028e_20250125_142220.html ===

[![](/banner.png)](https://codevigilant.com/)

* [Home](/)
* [Disclosure](/disclosure/)
  + [INJECTION](/category/injection/)
  + [CROSS-SITE SCRIPTING (XSS)](/category/cross-site-scripting-xss/)
  + [INFORMATION DISCLOSURE](/category/information-disclosure/)
  + [LOCAL FILE INCLUSION](/category/local-file-inclusion/)
  + [SSRF/XSPA](/category/ssrf/)
  + [COMPONENTS WITH KNOWN VULNERABILITIES](/category/components-with-known-vulnerabilities/)
  + [UNVALIDATED REDIRECTS AND FORWARDS](/category/unvalidated-redirects-and-forwards/)
* [Blog](/blog/)
* [RSS Feed](/index.xml)
* [About Team](/about-team/)

Wp Plugin Hdw Player Video Player Video Gallery
### Plugin Details

Plugin Name: [wp-plugin : hdw-player-video-player-video-gallery](https://wordpress.org/plugins/hdw-player-video-player-video-gallery/)
Effected Version : 2.4.2 (and most probably lower version's if any)
Vulnerability : [Injection](/category/injection/)
Minimum Level of Access Required : Administrator
CVE Number :
Identified by : [Anantshri](/author/anantshri/)
[WPScan Reference URL](https://wpscan.com/plugin/hdw-player-video-player-video-gallery/)
### Disclosure Timeline

* December 25, 2013: Vendor Contacted
* April 22, 2014 : Plugin Updated
* May 28, 2014 : Public Disclosure

### Technical Details

<http://localhost/wp-admin/admin.php?page=videos&opt=edit&id=2 union select 1,2,user(),4,5,6,database(),8,@@version,10,11,12>

Vulnerable Parameter : id

Trac ChangeLog : https://plugins.trac.wordpress.org/changeset?sfp\_email=&sfph\_mail=&reponame=&new=900030%40hdw-player-video-player-video-gallery&old=798976%40hdw-player-video-player-video-gallery&sfp\_email=&sfph\_mail=

---

Â© [Anant Shrivastava](https://anantshri.info)
2023


