=== Content from github.com_32e0c748_20250124_142650.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FESAPI%2Fesapi-java-legacy%2Fissues%2F359)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FESAPI%2Fesapi-java-legacy%2Fissues%2F359)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=ESAPI%2Fesapi-java-legacy)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[ESAPI](/ESAPI)
/
**[esapi-java-legacy](/ESAPI/esapi-java-legacy)**
Public

* [Notifications](/login?return_to=%2FESAPI%2Fesapi-java-legacy) You must be signed in to change notification settings
* [Fork
  364](/login?return_to=%2FESAPI%2Fesapi-java-legacy)
* [Star
   622](/login?return_to=%2FESAPI%2Fesapi-java-legacy)

* [Code](/ESAPI/esapi-java-legacy)
* [Issues
  120](/ESAPI/esapi-java-legacy/issues)
* [Pull requests
  1](/ESAPI/esapi-java-legacy/pulls)
* [Discussions](/ESAPI/esapi-java-legacy/discussions)
* [Actions](/ESAPI/esapi-java-legacy/actions)
* [Projects
  0](/ESAPI/esapi-java-legacy/projects)
* [Wiki](/ESAPI/esapi-java-legacy/wiki)
* [Security](/ESAPI/esapi-java-legacy/security)
* [Insights](/ESAPI/esapi-java-legacy/pulse)

Additional navigation options

* [Code](/ESAPI/esapi-java-legacy)
* [Issues](/ESAPI/esapi-java-legacy/issues)
* [Pull requests](/ESAPI/esapi-java-legacy/pulls)
* [Discussions](/ESAPI/esapi-java-legacy/discussions)
* [Actions](/ESAPI/esapi-java-legacy/actions)
* [Projects](/ESAPI/esapi-java-legacy/projects)
* [Wiki](/ESAPI/esapi-java-legacy/wiki)
* [Security](/ESAPI/esapi-java-legacy/security)
* [Insights](/ESAPI/esapi-java-legacy/pulse)

# CodecTest unit tests never test with a populated char array. #359

[New issue](/login?return_to=)[Jump to bottom](#comment-composer-heading)Copy link[New issue](/login?return_to=)[Jump to bottom](#comment-composer-heading)Copy linkClosedClosed[CodecTest unit tests never test with a populated char array.](#top)#359Copy link[![@xeno6696](https://avatars.githubusercontent.com/u/9502785?u=25ca38788efa5094a89c2a6cbaefb57d8c07a9c3&v=4&size=80)](/xeno6696)
## Description

[![@xeno6696](https://avatars.githubusercontent.com/u/9502785?u=25ca38788efa5094a89c2a6cbaefb57d8c07a9c3&v=4&size=48)](/xeno6696)[xeno6696](https://github.com/xeno6696)opened [on Jan 29, 2016](https://github.com/ESAPI/esapi-java-legacy/issues/359#issue-129862223)

The following unit test from [@jeremiahjstacey](https://github.com/jeremiahjstacey) reproduces the problem: If you mark a percent symbol as "immune" as in "do not encode or decode" the API will encode it anyway.

```
package org.owasp.esapi;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.Collection;
import java.util.List;

import org.junit.Assert;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.junit.runners.Parameterized;
import org.junit.runners.Parameterized.Parameters;
import org.owasp.esapi.codecs.*;

/**
 * Parameterized test to verify that the Immunity parameter for a codec encode/decode event works as expected on a series of special characters.
 *
 * @author jeremiah.j.stacey@gmail.com
 * @since Jan 29, 2016
 *
 */
@RunWith(Parameterized.class)
public class CodecImmunityTest {
    /** character arrays used as immunity lists from Default Encoder.*/
    private final static char[] IMMUNE_HTML = { ',', '.', '-', '_', ' ' };
    private final static char[] IMMUNE_HTMLATTR = { ',', '.', '-', '_' };
    private final static char[] IMMUNE_CSS = {};
    private final static char[] IMMUNE_JAVASCRIPT = { ',', '.', '_' };
    private final static char[] IMMUNE_VBSCRIPT = { ',', '.', '_' };
    private final static char[] IMMUNE_XML = { ',', '.', '-', '_', ' ' };
    private final static char[] IMMUNE_SQL = { ' ' };
    private final static char[] IMMUNE_OS = { '-' };
    private final static char[] IMMUNE_XMLATTR = { ',', '.', '-', '_' };
    private final static char[] IMMUNE_XPATH = { ',', '.', '-', '_', ' ' };
    // These are inline in the encode methods, but same principle.
   // private final static char[] IMMUNE_LDAP = { '\\', '*', '(', ')', '\0' };
   // private final static char[] IMMUNE_DN = { '\\', ',', '+', '"', '<', '>', ';' };

    @Parameters(name = "{0}")
    public static Collection<Object[]> getParams() {
        Collection<Codec> knownCodecs = new ArrayList<Codec>();
        knownCodecs.add(new CSSCodec());
        knownCodecs.add(new DB2Codec());
        knownCodecs.add(new HTMLEntityCodec());
        knownCodecs.add(new JavaScriptCodec());
        knownCodecs.add(new MySQLCodec(0)); //Standard
        knownCodecs.add(new MySQLCodec(1)); //ANSI
        knownCodecs.add(new OracleCodec());
        knownCodecs.add(new PercentCodec());
        knownCodecs.add(new UnixCodec());
        knownCodecs.add(new VBScriptCodec());
        knownCodecs.add(new WindowsCodec());
        knownCodecs.add(new XMLEntityCodec());

        //XXX:  Add more strings here!!
        List<String> sampleStrings = Arrays.asList("%De");

        Collection<Object[]> params = new ArrayList<Object[]>();
        for (Codec codec : knownCodecs) {
            for (String sample : sampleStrings) {
                params.add(new Object[]{codec.getClass().getSimpleName() + " " + sample, codec, sample});
            }
        }

        //Add Tests for codecs against the configured ImmunityLists within the Default Encoder.
        params.addAll(buildImmunitiyValidation(new HTMLEntityCodec(), IMMUNE_HTML, "IMMUNE_HTML"));
        params.addAll(buildImmunitiyValidation(new HTMLEntityCodec(), IMMUNE_XPATH, "IMMUNE_XPATH"));
        params.addAll(buildImmunitiyValidation(new HTMLEntityCodec(), IMMUNE_HTMLATTR, "IMMUNE_HTMLATTR"));
        params.addAll(buildImmunitiyValidation(new CSSCodec(), IMMUNE_CSS, "IMMUNE_CSS"));
        //params.addAll(buildImmunitiyValidation(new DB2Codec(), IMMUNE_HTML, ""));
        params.addAll(buildImmunitiyValidation(new JavaScriptCodec(), IMMUNE_JAVASCRIPT, "IMMUNE_JAVASCRIPT"));
        params.addAll(buildImmunitiyValidation(new MySQLCodec(0), IMMUNE_SQL, "IMMUNE_SQL"));
        params.addAll(buildImmunitiyValidation(new MySQLCodec(1), IMMUNE_SQL, "IMMUNE_SQL"));
        params.addAll(buildImmunitiyValidation(new OracleCodec(), IMMUNE_HTML, "IMMUNE_HTML"));
        //params.addAll(buildImmunitiyValidation(new PercentCodec(), IMMUNITY_????, "???")); // No Immunity defined for PercentEncoder
        params.addAll(buildImmunitiyValidation(new UnixCodec(), IMMUNE_OS, "IMMUNE_OS"));
        params.addAll(buildImmunitiyValidation(new VBScriptCodec(), IMMUNE_VBSCRIPT, "IMMUNE_VBSCRIPT"));
        params.addAll(buildImmunitiyValidation(new WindowsCodec(), IMMUNE_OS, "IMMUNE_OS"));
        params.addAll(buildImmunitiyValidation(new XMLEntityCodec(), IMMUNE_XML, "IMMUNE_XML"));
        params.addAll(buildImmunitiyValidation(new XMLEntityCodec(), IMMUNE_XMLATTR, "IMMUNE_XMLATTR"));

        params.addAll(fullCharacterCodecValidation(knownCodecs));

        return params;
    }

    private static Collection<Object[]> buildImmunitiyValidation(Codec codec, char[] immunities, String descriptor) {
        Collection<Object[]> params = new ArrayList<Object[]>();
        for (char c : immunities) {
            params.add(new Object[]{codec.getClass().getSimpleName() + " " + descriptor + " ("+ c + ")", codec, String.valueOf(c)});
        }
        return params;
    }

    private static Collection<Object[]> fullCharacterCodecValidation(Collection<Codec> codecs) {
        char[] holyCowTesting = StringUtilities.union(EncoderConstants.CHAR_ALPHANUMERICS, EncoderConstants.CHAR_SPECIALS);
        Collection<Object[]> params = new ArrayList<Object[]>();
        for (Codec codec: codecs) {
            params.addAll(buildImmunitiyValidation(codec, holyCowTesting, "Full_ALPHA_AND_SPECIALS"));
        }

        return params;
    }

    private final Codec codec;
    private final String string;
    private final char[] immunityList;

    public CodecImmunityTest(String ignored, Codec codec, String toTest) {
        this.codec = codec;
        this.string = toTest;
        /**
         * The Immunity character array is every character in the String we're testing.
         *
         */
        this.immunityList = toTest.toCharArray();
    }

    @Test
    public void testImmuneEncode() {
        String encoded = codec.encode(immunityList, string);
        Assert.assertEquals(string, encoded);
    }
    /*
    @Test
    public void testImmuneDecode() {
        String decoded = codec.decode(string);
        Assert.assertEquals(string, decoded);
    }
*/
}

```
## Metadata

### Assignees

No one assigned

### Labels

No labelsNo labels
### Type

No type
### Projects

No projects
### Milestone

No milestone

### Relationships

None yet
### Development

No branches or pull requests
## Issue actions

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_f86bac15_20250124_142650.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fesapi%2Fesapi-java-legacy%2Fissues%2F306)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fesapi%2Fesapi-java-legacy%2Fissues%2F306)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=ESAPI%2Fesapi-java-legacy)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[ESAPI](/ESAPI)
/
**[esapi-java-legacy](/ESAPI/esapi-java-legacy)**
Public

* [Notifications](/login?return_to=%2FESAPI%2Fesapi-java-legacy) You must be signed in to change notification settings
* [Fork
  364](/login?return_to=%2FESAPI%2Fesapi-java-legacy)
* [Star
   622](/login?return_to=%2FESAPI%2Fesapi-java-legacy)

* [Code](/ESAPI/esapi-java-legacy)
* [Issues
  120](/ESAPI/esapi-java-legacy/issues)
* [Pull requests
  1](/ESAPI/esapi-java-legacy/pulls)
* [Discussions](/ESAPI/esapi-java-legacy/discussions)
* [Actions](/ESAPI/esapi-java-legacy/actions)
* [Projects
  0](/ESAPI/esapi-java-legacy/projects)
* [Wiki](/ESAPI/esapi-java-legacy/wiki)
* [Security](/ESAPI/esapi-java-legacy/security)
* [Insights](/ESAPI/esapi-java-legacy/pulse)

Additional navigation options

* [Code](/ESAPI/esapi-java-legacy)
* [Issues](/ESAPI/esapi-java-legacy/issues)
* [Pull requests](/ESAPI/esapi-java-legacy/pulls)
* [Discussions](/ESAPI/esapi-java-legacy/discussions)
* [Actions](/ESAPI/esapi-java-legacy/actions)
* [Projects](/ESAPI/esapi-java-legacy/projects)
* [Wiki](/ESAPI/esapi-java-legacy/wiki)
* [Security](/ESAPI/esapi-java-legacy/security)
* [Insights](/ESAPI/esapi-java-legacy/pulse)

# Canonicalizing "&#37;Device&#37; changes the meaning of the input string #306

[New issue](/login?return_to=)[Jump to bottom](#comment-composer-heading)Copy link[New issue](/login?return_to=)[Jump to bottom](#comment-composer-heading)Copy linkClosedClosed[Canonicalizing "&#37;Device&#37; changes the meaning of the input string](#top)#306Copy linkLabels[Priority-Medium](https://github.com/ESAPI/esapi-java-legacy/issues?q=state%3Aopen%20label%3A%22Priority-Medium%22)[bug](https://github.com/ESAPI/esapi-java-legacy/issues?q=state%3Aopen%20label%3A%22bug%22)[imported](https://github.com/ESAPI/esapi-java-legacy/issues?q=state%3Aopen%20label%3A%22imported%22)[![@meg23](https://avatars.githubusercontent.com/u/814859?u=0a33cd7b7e9994da0c245aa73dbd2517d9f8655d&v=4&size=80)](/meg23)
## Description

[![@meg23](https://avatars.githubusercontent.com/u/814859?u=0a33cd7b7e9994da0c245aa73dbd2517d9f8655d&v=4&size=48)](/meg23)[meg23](https://github.com/meg23)opened [on Nov 13, 2014](https://github.com/ESAPI/esapi-java-legacy/issues/306#issue-48672676)

*From [shilpi.a...@gmail.com](https://code.google.com/u/108155155500833528712/) on May 23, 2013 04:45:26*

What steps will reproduce the problem? 1. Take String "%Device%.

2. Canonicalize it using Canonicalize method

3. Now do EncodeForHTML or simple display the result string from Canonicalize. What is the expected output? What do you see instead? The output has needs to be encoded for html, should display as "%Device%" in browser,Instead we see "Þvice%" What version of the product are you using? On what operating system? 2.0rc Does this issue affect only a specified browser or set of browsers? all Please provide any additional information below. We are using these APIs heavily. Please provide an estimate fix date.

*Original issue: <http://code.google.com/p/owasp-esapi-java/issues/detail?id=300>*

## Metadata

### Assignees

No one assigned

### Labels

[Priority-Medium](https://github.com/ESAPI/esapi-java-legacy/issues?q=state%3Aopen%20label%3A%22Priority-Medium%22)[bug](https://github.com/ESAPI/esapi-java-legacy/issues?q=state%3Aopen%20label%3A%22bug%22)[imported](https://github.com/ESAPI/esapi-java-legacy/issues?q=state%3Aopen%20label%3A%22imported%22)
### Type

No type
### Projects

No projects
### Milestone

No milestone

### Relationships

None yet
### Development

No branches or pull requests
## Issue actions

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from code.google.com_48445a67_20250124_142648.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fesapi%2Fesapi-java-legacy%2Fissues%2F306)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fesapi%2Fesapi-java-legacy%2Fissues%2F306)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=ESAPI%2Fesapi-java-legacy)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[ESAPI](/ESAPI)
/
**[esapi-java-legacy](/ESAPI/esapi-java-legacy)**
Public

* [Notifications](/login?return_to=%2FESAPI%2Fesapi-java-legacy) You must be signed in to change notification settings
* [Fork
  364](/login?return_to=%2FESAPI%2Fesapi-java-legacy)
* [Star
   622](/login?return_to=%2FESAPI%2Fesapi-java-legacy)

* [Code](/ESAPI/esapi-java-legacy)
* [Issues
  120](/ESAPI/esapi-java-legacy/issues)
* [Pull requests
  1](/ESAPI/esapi-java-legacy/pulls)
* [Discussions](/ESAPI/esapi-java-legacy/discussions)
* [Actions](/ESAPI/esapi-java-legacy/actions)
* [Projects
  0](/ESAPI/esapi-java-legacy/projects)
* [Wiki](/ESAPI/esapi-java-legacy/wiki)
* [Security](/ESAPI/esapi-java-legacy/security)
* [Insights](/ESAPI/esapi-java-legacy/pulse)

Additional navigation options

* [Code](/ESAPI/esapi-java-legacy)
* [Issues](/ESAPI/esapi-java-legacy/issues)
* [Pull requests](/ESAPI/esapi-java-legacy/pulls)
* [Discussions](/ESAPI/esapi-java-legacy/discussions)
* [Actions](/ESAPI/esapi-java-legacy/actions)
* [Projects](/ESAPI/esapi-java-legacy/projects)
* [Wiki](/ESAPI/esapi-java-legacy/wiki)
* [Security](/ESAPI/esapi-java-legacy/security)
* [Insights](/ESAPI/esapi-java-legacy/pulse)

# Canonicalizing "&#37;Device&#37; changes the meaning of the input string #306

[New issue](/login?return_to=)[Jump to bottom](#comment-composer-heading)Copy link[New issue](/login?return_to=)[Jump to bottom](#comment-composer-heading)Copy linkClosedClosed[Canonicalizing "&#37;Device&#37; changes the meaning of the input string](#top)#306Copy linkLabels[Priority-Medium](https://github.com/ESAPI/esapi-java-legacy/issues?q=state%3Aopen%20label%3A%22Priority-Medium%22)[bug](https://github.com/ESAPI/esapi-java-legacy/issues?q=state%3Aopen%20label%3A%22bug%22)[imported](https://github.com/ESAPI/esapi-java-legacy/issues?q=state%3Aopen%20label%3A%22imported%22)[![@meg23](https://avatars.githubusercontent.com/u/814859?u=0a33cd7b7e9994da0c245aa73dbd2517d9f8655d&v=4&size=80)](/meg23)
## Description

[![@meg23](https://avatars.githubusercontent.com/u/814859?u=0a33cd7b7e9994da0c245aa73dbd2517d9f8655d&v=4&size=48)](/meg23)[meg23](https://github.com/meg23)opened [on Nov 13, 2014](https://github.com/ESAPI/esapi-java-legacy/issues/306#issue-48672676)

*From [shilpi.a...@gmail.com](https://code.google.com/u/108155155500833528712/) on May 23, 2013 04:45:26*

What steps will reproduce the problem? 1. Take String "%Device%.

2. Canonicalize it using Canonicalize method

3. Now do EncodeForHTML or simple display the result string from Canonicalize. What is the expected output? What do you see instead? The output has needs to be encoded for html, should display as "%Device%" in browser,Instead we see "Þvice%" What version of the product are you using? On what operating system? 2.0rc Does this issue affect only a specified browser or set of browsers? all Please provide any additional information below. We are using these APIs heavily. Please provide an estimate fix date.

*Original issue: <http://code.google.com/p/owasp-esapi-java/issues/detail?id=300>*

## Metadata

### Assignees

No one assigned

### Labels

[Priority-Medium](https://github.com/ESAPI/esapi-java-legacy/issues?q=state%3Aopen%20label%3A%22Priority-Medium%22)[bug](https://github.com/ESAPI/esapi-java-legacy/issues?q=state%3Aopen%20label%3A%22bug%22)[imported](https://github.com/ESAPI/esapi-java-legacy/issues?q=state%3Aopen%20label%3A%22imported%22)
### Type

No type
### Projects

No projects
### Milestone

No milestone

### Relationships

None yet
### Development

No branches or pull requests
## Issue actions

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_9ac6eb34_20250124_142649.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FESAPI%2Fesapi-java-legacy%2Fblob%2Fmain%2Fdocumentation%2Fesapi4java-core-2.1.0.1-release-notes.txt)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FESAPI%2Fesapi-java-legacy%2Fblob%2Fmain%2Fdocumentation%2Fesapi4java-core-2.1.0.1-release-notes.txt)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fblob%2Fshow&source=header-repo&source_repo=ESAPI%2Fesapi-java-legacy)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[ESAPI](/ESAPI)
/
**[esapi-java-legacy](/ESAPI/esapi-java-legacy)**
Public

* [Notifications](/login?return_to=%2FESAPI%2Fesapi-java-legacy) You must be signed in to change notification settings
* [Fork
  364](/login?return_to=%2FESAPI%2Fesapi-java-legacy)
* [Star
   622](/login?return_to=%2FESAPI%2Fesapi-java-legacy)

* [Code](/ESAPI/esapi-java-legacy/tree/main)
* [Issues
  120](/ESAPI/esapi-java-legacy/issues)
* [Pull requests
  1](/ESAPI/esapi-java-legacy/pulls)
* [Discussions](/ESAPI/esapi-java-legacy/discussions)
* [Actions](/ESAPI/esapi-java-legacy/actions)
* [Projects
  0](/ESAPI/esapi-java-legacy/projects)
* [Wiki](/ESAPI/esapi-java-legacy/wiki)
* [Security](/ESAPI/esapi-java-legacy/security)
* [Insights](/ESAPI/esapi-java-legacy/pulse)

Additional navigation options

* [Code](/ESAPI/esapi-java-legacy/tree/main)
* [Issues](/ESAPI/esapi-java-legacy/issues)
* [Pull requests](/ESAPI/esapi-java-legacy/pulls)
* [Discussions](/ESAPI/esapi-java-legacy/discussions)
* [Actions](/ESAPI/esapi-java-legacy/actions)
* [Projects](/ESAPI/esapi-java-legacy/projects)
* [Wiki](/ESAPI/esapi-java-legacy/wiki)
* [Security](/ESAPI/esapi-java-legacy/security)
* [Insights](/ESAPI/esapi-java-legacy/pulse)

## Files

 main
## Breadcrumbs

1. [esapi-java-legacy](/ESAPI/esapi-java-legacy/tree/main)
2. /[documentation](/ESAPI/esapi-java-legacy/tree/main/documentation)
/
# esapi4java-core-2.1.0.1-release-notes.txt

Copy path Blame  Blame
## Latest commit

## History

[History](/ESAPI/esapi-java-legacy/commits/main/documentation/esapi4java-core-2.1.0.1-release-notes.txt)129 lines (111 loc) · 6.64 KB main
## Breadcrumbs

1. [esapi-java-legacy](/ESAPI/esapi-java-legacy/tree/main)
2. /[documentation](/ESAPI/esapi-java-legacy/tree/main/documentation)
/
# esapi4java-core-2.1.0.1-release-notes.txt

Top
## File metadata and controls

* Code
* Blame

129 lines (111 loc) · 6.64 KB[Raw](https://github.com/ESAPI/esapi-java-legacy/raw/refs/heads/main/documentation/esapi4java-core-2.1.0.1-release-notes.txt)123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129Release notes for ESAPI 2.1.0.1 Release date: 2016-Feb-05 -Kevin W. Wall <kevin.w.wall@gmail.com> -Chris Schmidt <chris.schmidt@owasp.org>
Previous release: ESAPI 2.1.0, Sept 2013
----------------------------------------------------------------------------- GitHub Issues fixed in this release: 36 issues closed
32 - URLs in doc for HTTPUtilities.setNoCacheHeaders are wrong58 - Separate Crypto Related Properties into Separate File Fixed as part of issue #350. Can be addressed by placing sensitive ESAPI crypto properties into a separate properties file controlled by the operations team and not checked into your SCM. For further details, see documentation/ESAPI-configuration-user-guide.md and use system property org.owasp.esapi.opsteam.96 - Need validation configuration enhancements103 - Make ESAPI configuration XML200 - DefaultHttpUtilities.sendRedirect should throw AccessControlException, not IOException205 - BaseValidationRule.assertValid(String context, String input) causes NPE if input is not valid.221 - IntrusionException should extend EnterpriseRuntimeException229 - printStackTrace when loading configuration file237 - how can we use esapi in java for validation,please see files attached containing java code and for errors254 - Patch for /trunk/src/main/java/org/owasp/esapi/reference/crypto/JavaEncryptor.java261 - Could not set multiple cookies one by one at single request275 - Log4JLogger.java doesn't output correct file & line number because FQCN isn't forwarded to Log4J276 - Patch for /branches/2.1/src/main/java/org/owasp/esapi/reference/DefaultExecutor.java287 - Patch for /branches/2.1/src/main/java/org/owasp/esapi/reference/FileBasedAuthenticator.java288 - Patch for /trunk/src/test/java/org/owasp/esapi/reference/UserTest.java289 - ClickjackFilter after doFilter306 - Canonicalizing "&#37;Device&#37; changes the meaning of the input string313 - Insecure default configuation for Executor.ApprovedExecutables in ESAPI.properties file315 - ValidatorTest.testIsValidDate fails if default locale is not US318 - Incorrect Equality test on floating point values319 - Resource leak: FileInputStream is not closed on method exit321 - Unsynchronized get method, synchronized set method322 - RequestRateThrottleFilter may not work as expected with hits=1 or hits=2323 - PolicyFactory Sanitize method weird output328 - StringUtils.union broken which has minor impact on CSRF Protection and random file name generation330 - setHeader blocks legitimate headers due to header name size limit being too low331 - Log4j configuration with no root level causes NPE in Log4jLogger.java334 - Regex in ESAPI.properties is not considering few of the french characters336 - Log4JLogger.java doesn't output correct file & line number-Similar issue as reported in Issue 268344 - JUnit test failure in ValidatorTest.testGetValidSafeHTML()345 - JUnit test failure in ValidatorTest.testIsValidDate()347 - Fixes #345 - JUnit test failure in ValidatorTest.testIsValidDate()349 - Package correctly the esapi.tld into ESAPI jar350 - [ESAPI Spring Code Sprint – May / June 2015] Implementation of requirements351 - getHeader length limit error354 - Add stern javadoc warning about Base64.decodeToObject() being unsafe and mark method as deprecated. Note: This method no longer functions unless the system property org.owasp.esapi.enableUnsafeSerialization is set to "true". This breaks backward compatibility in favor of taking a more secure posture.355 - Temp files created by org.owasp.esapi.waf.internal.InterceptingServletOutputStream not removed by WAF JUnit tests356 - Make end-of-line terminators consistent for .java, .xml, and other ESAPI source files.359 - CodecTest unit tests never test with a populated char array.
-----------------------------------------------------------------------------
 Other changes in this release not tracked via GitHub issues
\* Miscellaneous minor javadoc fixes and updates.\* Fixed grammatical error in CipherTextSerializer class error message.\* Upgraded versions of several ESAPI dependencies (i.e., 3rd party jars), including several that had unpatched CVEs.\* Added the Maven plug-in for OWASP Dependency Check so 3rd party dependencies can be kept up-to-date.\* Added .gitignore file so that certain files won't get accidentally commited such as IDE files.\* Added .gitattributes file so to help resolve end-of-line issues. (Part of issue 356.)\* Added new documentation (documentation/ESAPI-configuration-user-guide.md) describing new ESAPI configuration feature.\* Changed many assertions in ESAPI crypto to explicit runtime checks that throw IllegalArgumentException instead.
----------------------------------------------------------------------------- ATTENTION: Other Important Notes
The JUnit test AuthenticatorTest.setCurrentUser() is periodically failingdue to an apparent race condition either in the test itself or inFileBasedAuthenticator. See GitHub issue #360 for details, includingwhy we don't think it is worth holding up the release for.
-----------------------------------------------------------------------------
 Contributors for ESAPI 2.1.0.1 release
Notice: My appologies if I've missed anyone, but you did have an opportunity to send me your names. (I solicited for contributors names to emails to the ESAPI-Dev and ESAPI-User mailing lists sent on 1/23/2016.) If I missed you and you contributed to THIS release, please send me an email with your first and last name and what your SPECIFIC contribution was and I will see you name is added to this list. - Kevin W. Wall
Project co-leaders Kevin W. Wall (kwwall) Chris Schmidt (chrisisbeef)
Special shout-outs to: Matt Seil (xeno6696) Jeremiah Stacey (jeremiahjstacey)
Special contributions: ESAPI Hackathon participants - November 18, 2014 - January 20, 2014 Daniel Amodio Eric Kobrin Eric Citaire Eamonn Washington John Melton Special thanks to Samantha Groves for assisting with the ESAPI hackathon
 Professor and students involved in ESAPI Spring Code Sprint (May - June, 2015): Marek Zachara - instructor Patryk Bak - student Marcin Siedlarz - student Szymon Bobowiec - student Karol Kapcia - student Fabio Cerullo - OWASP board coordination for code sprint
Other Contributors: Karan Sanwal Arpit Gupta Constantino Cronemberger Tàrin Gamberìni Kad Dembele Anthony Musyoki Andrew VanLoo Ashish Tripathy Brad Schoening

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


