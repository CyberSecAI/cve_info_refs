=== Content from evergreen-ils.org_c01a1cf5_20250125_023919.html ===
commit ddd1cfeece1f17249da1c1903bcea0d00fb99438
Author: Dan Wells
Date: Tue Mar 3 16:33:15 2015 -0500
Generate empty upgrade script if needed
Signed-off-by: Dan Wells
8 0 build/tools/make\_release
commit c9302e22bacefbb5a3b7c0d8000e3731ad620db7
Author: Dan Wells
Date: Mon Feb 24 12:09:57 2014 -0500
Bump OpenILS.pm version
Signed-off-by: Dan Wells
1 1 Open-ILS/src/perlmods/lib/OpenILS.pm
commit 82fd58e1d2ee1a1a104a856f961ffd4d1d83b34b
Author: Dan Wells
Date: Tue Mar 3 16:05:25 2015 -0500
Move security notice to release notes
Signed-off-by: Dan Wells
14 0 docs/RELEASE\_NOTES\_2\_5.txt
0 9 docs/RELEASE\_NOTES\_NEXT/security-bug-fix.txt
delete mode 100644 docs/RELEASE\_NOTES\_NEXT/security-bug-fix.txt
commit e77ab8d82cbd928a8d0bca6b97e7ab30fa8e6ec4
Author: Jason Stephenson
Date: Thu Feb 19 11:17:08 2015 -0500
LP#1424755: Add IMPORTANT SECURITY INFORMATION release note.
Signed-off-by: Jason Stephenson
Signed-off-by: Galen Charlton
Signed-off-by: Ben Shum
9 0 docs/RELEASE\_NOTES\_NEXT/security-bug-fix.txt
create mode 100644 docs/RELEASE\_NOTES\_NEXT/security-bug-fix.txt
commit f38b24c26908b6c45d83eace6b79c1503257b290
Author: Jason Stephenson
Date: Wed Feb 18 16:28:31 2015 -0500
LP#1424755: Org Unit Setting view permissions can be bypassed
Fix private org. unit setting leakage by forcing the $auth argument
to true if not passed in when open-ils.actor.ou\_setting.ancestor\_default
or open-ils.actor.ou\_setting.ancestor\_default.batch are called.
Other than a change to the desc of the public methods to reflect that
they now check permissions if permissions are required, there are no
required api changes to the back or the front ends.
Signed-off-by: Jason Stephenson
Signed-off-by: Galen Charlton
Signed-off-by: Ben Shum
10 4 Open-ILS/src/perlmods/lib/OpenILS/Application/Actor.pm
commit 9d06962f9eadf9256fc484cf2f68b5eb9c221316
Author: Jason Stephenson
Date: Tue Feb 24 14:05:16 2015 -0500
LP#1206589: Temporary Fix for Org. Unit Settings History Bug
This commit makes two changes to the coustl IDL entry.
1. It adds a retrieve permission of STAFF\_LOGIN. This at least
requires someone with staff permission to be able to view settings
history.
2. It fixed the primary key field from date\_applied to id. The
prior setting was just an outright error.
NOTE: This is intended as a short term fix for the Library Settings
Editor history feature.
Signed-off-by: Jason Stephenson
Signed-off-by: Ben Shum
2 2 Open-ILS/examples/fm\_IDL.xml
commit c787b591d83be8880247966d4604478b04d6cb5a
Author: Dan Wells
Date: Tue Mar 3 16:19:02 2015 -0500
Forward port 2.5.7 upgrade script
Signed-off-by: Dan Wells
50 0 Open-ILS/src/sql/Pg/version-upgrade/2.5.7-2.5.8-upgrade-db.sql
create mode 100644 Open-ILS/src/sql/Pg/version-upgrade/2.5.7-2.5.8-upgrade-db.sql
commit 325d2c44b069bcd6d8b439982b59cd82b84fbca1
Author: Ben Shum
Date: Fri Dec 26 15:27:47 2014 -0500
Docs: fix asciidoc errors
When https://bugs.launchpad.net/evergreen/+bug/1386854 was merged to add a new
docs section for "Locally hosted content", it looks like there was a bad git
conflict resolution and an extra block of ======= was left behind.
Remove this to fix headings and table of contents for the documentation site.
Signed-off-by: Ben Shum
0 1 docs/admin\_initial\_setup/designing\_your\_catalog.txt
commit ce7710c86028a1c11086d16a102fc128dd020276
Author: Timothy Spindler
Date: Wed Nov 26 16:24:42 2014 -0500
Docs: Documentation for MARC Batch Edit
Signed-off-by: Yamil Suarez
48 0 docs/cataloging/MARC\_batch\_edit.txt
2 0 docs/root.txt
create mode 100644 docs/cataloging/MARC\_batch\_edit.txt
commit c0e0e39d49f1188575f609cb1c30f3626da678ad
Author: Josh Stompro
Date: Mon Nov 10 14:35:46 2014 -0500
Documentation: LP#1386854 - Locally Hosted Added Content.
Adds documentation that describes how to use the local content bypass
feature of the AddedContent modules. This allows for local added content like
cover art, reviews, TOC, exerpts or annotations to be shown in bib records.
I also changed the headers in the External Added Content section to use title case.
Signed-off-by: Josh Stompro
Signed-off-by: Yamil Suarez
Conflicts:
docs/admin\_initial\_setup/designing\_your\_catalog.txt
71 2 docs/admin\_initial\_setup/designing\_your\_catalog.txt
commit 3ea579e4f4ea4704d15e877d03ef94a25dd6f753
Author: Mike Rylander
Date: Thu Nov 6 16:03:36 2014 -0500
LP#1390225: Fail to care about errors from auth.session.delete
We're just tossing this call over the wall and moving on. We don't
care if the session wasn't there to delete or even if we didn't pass
a session to the server.
Signed-off-by: Mike Rylander
Signed-off-by: Chris Sharp
Signed-off-by: Jason Stephenson
Conflicts:
Open-ILS/src/perlmods/lib/OpenILS/WWW/EGCatLoader.pm
8 0 Open-ILS/src/perlmods/lib/OpenILS/WWW/EGCatLoader.pm
commit b759d7572369f1e5abaa7497293441d611bde519
Author: Mike Rylander
Date: Thu Nov 6 15:36:16 2014 -0500
LP#1390225: redirect to ctx.home\_page instead of through ctx.logout\_page
This way, we skip the auth.session.delete call that will error out because
we no longer have the authtoken cookie.
Signed-off-by: Mike Rylander
Signed-off-by: Chris Sharp
Signed-off-by: Jason Stephenson
Conflicts:
Open-ILS/src/templates/opac/parts/base.tt2
1 1 Open-ILS/src/templates/opac/parts/base.tt2


=== Content from www.openwall.com_40ea7530_20250125_023922.html ===


| [Openwall](/) * [Products](/)   + [Openwall GNU/\*/Linux   *server OS*](/Owl/)+ [Linux Kernel Runtime Guard](/lkrg/)+ [John the Ripper   *password cracker*](/john/)         - [Free & Open Source for any platform](/john/)- [in the cloud](/john/cloud/)- [Pro for Linux](/john/pro/linux/)- [Pro for macOS](/john/pro/macosx/)+ [Wordlists   *for password cracking*](/wordlists/)+ [passwdqc   *policy enforcement*](/passwdqc/)             - [Free & Open Source for Unix](/passwdqc/)- [Pro for Windows (Active Directory)](/passwdqc/windows/)+ [yescrypt   *KDF & password hashing*](/yescrypt/)+ [yespower   *Proof-of-Work (PoW)*](/yespower/)+ [crypt\_blowfish   *password hashing*](/crypt/)+ [phpass   *ditto in PHP*](/phpass/)+ [tcb   *better password shadowing*](/tcb/)+ [Pluggable Authentication Modules](/pam/)+ [scanlogd   *port scan detector*](/scanlogd/)+ [popa3d   *tiny POP3 daemon*](/popa3d/)+ [blists   *web interface to mailing lists*](/blists/)+ [msulogin   *single user mode login*](/msulogin/)+ [php\_mt\_seed   *mt\_rand() cracker*](/php_mt_seed/)* [Services](/services/)* Publications       + [Articles](/articles/)+ [Presentations](/presentations/)* Resources         + [Mailing lists](/lists/)+ [Community wiki](https://openwall.info/wiki/)+ [Source code repositories (GitHub)](https://github.com/openwall)+ [Source code repositories (CVSweb)](https://cvsweb.openwall.com)+ [File archive & mirrors](/mirrors/)+ [How to verify digital signatures](/signatures/)+ [OVE IDs](/ove/)* [What's new](/news) | |
| --- | --- |

| | [Hash Suite - Windows password security audit tool. GUI, reports in PDF.](https://hashsuite.openwall.net) | | --- | |
| --- | --- |

[[<prev]](2) [[next>]](4) [[<thread-prev]](2) [[day]](.) [[month]](..) [[year]](../..) [[list]](../../..)
```

Message-Id: <20150304031520.82D73B2E0DF@smtpvbsrv1.mitre.org>
Date: Tue,  3 Mar 2015 22:15:20 -0500 (EST)
From: cve-assign@...re.org
To: gmc@...library.com
Cc: cve-assign@...re.org, oss-security@...ts.openwall.com
Subject: Re: CVE request - Evergreen

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Thanks for the clarification. Reorganizing and rewording gives these
three CVE IDs:

CVE-2013-7435
<http://evergreen-ils.org/security-releases-evergreen-2-7-4-2-6-7-and-2-5-9/>
<http://evergreen-ils.org/downloads/ChangeLog-2.7.3-2.7.4>
[https://bugs.launchpad.net/evergreen/+bug/1206589](https://bugs.launchpad.net/evergreen/%2Bbug/1206589)
<http://git.evergreen-ils.org/?p=Evergreen.git;a=commit;h=ac588e879cf73ff1b65617e0bd273361d3529063>

scope =
 - in version 2.7.3, there is a major vulnerability in which a
   setting's history can be viewed by an unauthenticated
   attacker

CVE-2015-2203
<http://evergreen-ils.org/security-releases-evergreen-2-7-4-2-6-7-and-2-5-9/>
<http://evergreen-ils.org/downloads/ChangeLog-2.7.3-2.7.4>
[https://bugs.launchpad.net/evergreen/+bug/1206589](https://bugs.launchpad.net/evergreen/%2Bbug/1206589)
<http://git.evergreen-ils.org/?p=Evergreen.git;a=commit;h=ac588e879cf73ff1b65617e0bd273361d3529063>

scope =
 - in version 2.7.4, there is a minor vulnerability in which a
   setting's history can be viewed by all persons with the staff role,
   which would include unauthorized staff in many realistic
   deployments. This might be fixed in a future release by forcing all
   access to use cstore, or by some other undetermined change.

CVE-2015-2204
<http://evergreen-ils.org/security-releases-evergreen-2-7-4-2-6-7-and-2-5-9/>
<http://evergreen-ils.org/downloads/ChangeLog-2.7.3-2.7.4>
[https://bugs.launchpad.net/evergreen/+bug/1424755](https://bugs.launchpad.net/evergreen/%2Bbug/1424755)
<http://git.evergreen-ils.org/?p=Evergreen.git;a=commit;h=3a0f1cc7b2efa517ee4cd4c6a682237554fed307>

- --
CVE assignment team, MITRE CVE Numbering Authority
M/S M300
202 Burlington Road, Bedford, MA 01730 USA
[ PGP key available through <http://cve.mitre.org/cve/request_id.html> ]
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.14 (SunOS)

iQEcBAEBAgAGBQJU9nhRAAoJEKllVAevmvmspb0H/0a0gf5sm39980V0DRgH9op6
vrrrqEdcfoFSyG2vNst5Atnv+rQZEs9LoRSP8j/RbsbMCXdxz1Cyg7J67xIKhWKq
Dy5kuEzfoX1n96WOv/+MA5+35JmbX6/WZtojukeS/y6ubv12JBMleqFF8sZht/Ri
UZdMt/Uro+oMpm6POd/wuQt6YQ/z4Z6wjYLbamDhJqrW67bZYsA+dh5lbkzrjXXD
8QFWNSLnur/wcKtqTTw0kSoWdZAjj70u8RnFY3kHrmPtWR7MlVlaTU0PFLGnJoUC
5zk7+k5ULwWM3Fre8dPYIMaAU4ZRnP3OdpqN/7RTic+9op+0RxpoF7W+02VhQfM=
=ynfk
-----END PGP SIGNATURE-----

```

[Powered by blists](https://www.openwall.com/blists/) - [more mailing lists](https://lists.openwall.net)

Please check out the
[Open Source Software Security Wiki](https://oss-security.openwall.org/wiki/), which is counterpart to this
[mailing list](https://oss-security.openwall.org/wiki/mailing-lists/oss-security).

Confused about [mailing lists](/lists/) and their use?
[Read about mailing lists on Wikipedia](https://en.wikipedia.org/wiki/Electronic_mailing_list)
and check out these
[guidelines on proper formatting of your messages](https://www.complang.tuwien.ac.at/anton/mail-news-errors.html).



=== Content from bugs.launchpad.net_732e7c1b_20250126_053244.html ===

[Log in / Register](https://bugs.launchpad.net/evergreen/%2Bbug/1206589/%2Blogin)

[![](https://launchpadlibrarian.net/391553151/evg-medium.png)](https://launchpad.net/evergreen)

## [Evergreen](https://launchpad.net/evergreen)

* [Overview](https://launchpad.net/evergreen)
* [Code](https://code.launchpad.net/evergreen)
* [Bugs](https://bugs.launchpad.net/evergreen)
* [Blueprints](https://blueprints.launchpad.net/evergreen)
* [Translations](https://translations.launchpad.net/evergreen)
* [Answers](https://answers.launchpad.net/evergreen)

# Credit Card Processor settings visible in LSE History

Bug #1206589 reported by
[Jason Boyer](https://launchpad.net/~jboyer)
on 2013-07-30

[264](/%2Bhelp-bugs/bug-heat.html)

This bug affects 2 people

| Affects | | Status | Importance | Assigned to | Milestone |
| --- | --- | --- | --- | --- | --- |
|  | [Evergreen](https://bugs.launchpad.net/evergreen) | Fix Released | Critical | Unassigned | [Evergreen 2.8-beta](https://launchpad.net/evergreen/%2Bmilestone/2.8-beta) |
|  | [2.5](https://bugs.launchpad.net/evergreen/2.5) | Fix Released | Undecided | Unassigned | [Evergreen 2.5.9](https://launchpad.net/evergreen/%2Bmilestone/2.5.9) |
|  | [2.6](https://bugs.launchpad.net/evergreen/2.6) | Fix Released | Undecided | Unassigned | [Evergreen 2.6.7](https://launchpad.net/evergreen/%2Bmilestone/2.6.7) |
|  | [2.7](https://bugs.launchpad.net/evergreen/2.7) | Fix Released | Undecided | Unassigned | [Evergreen 2.7.4](https://launchpad.net/evergreen/%2Bmilestone/2.7.4) |

### Bug Description

Eg 2.4.0

OSRF 2.2

The Library Settings Editor will hide CC processor settings from users who lack the VIEW\_CREDIT\_CARD\_PROCESSING permission, but the history function still shows past settings.

reproduction:

User with ADMIN\_CREDIT\_CARD\_PROCESSING permission sets AuthorizeNet Login setting at CONS to XYZ

User without VIEW\_CREDIT\_CARD\_PROCESSING permission opens Lib setting editor, sees no indication that AuthorizeNet Login is set

User clicks History, sees the date, context, previous and new settings.

I would expect that the setting history function consult the permission's view\_perm, just like the editor does.

Tags:

[staffclient](/evergreen/%2Bbugs?field.tag=staffclient)

## CVE References

* [2013-7435](/bugs/cve/2013-7435 "The open-ils.pcrud endpoint in Evergr...")
* [2015-2203](/bugs/cve/2015-2203 "Evergreen 2.5.9, 2.6.7, and 2.7.4 all...")

[Galen Charlton (gmc)](https://launchpad.net/~gmc)
on 2013-09-26

| **information type**: | Public → Private Security |
| --- | --- |

[Ben Shum (bshum)](https://launchpad.net/~bshum)
on 2013-11-06

| Changed in evergreen: | |
| --- | --- |
| **status**: | New → Confirmed |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jason Stephenson (jstephenson)](https://launchpad.net/~jstephenson) wrote on 2015-02-24: |  |  | [#1](/evergreen/%2Bbug/1206589/comments/1) |
| --- | --- | --- | --- |

While the initial bug report indicates this a problem in the Library

Settings Editor's history functions only, the underlying cause turns

out to be yet another remote vulnerability. Any user who can

authenticate to Evergreen and make the proper open-ils.pcrud calls can

view the history of any setting, including those that are sensitive.

This happens because the permacrud action entries in the IDL for the

coustl object lists no required permission for retrieve. Thus, no

permission is required and once anonymous pcrud goes in, no login

would be required either.

An immediate fix for this would be to add a permission, just about any

permission that a patron would not have will do, to the retrieve

action in couustl's permacrud block.

A longer winded fix will appear in a forthcoming comment. There are a

number of things "wrong" about this feature.

While the initial bug report indicates this a problem in the Library
Settings Editor's history functions only, the underlying cause turns
out to be yet another remote vulnerability. Any user who can
authenticate to Evergreen and make the proper open-ils.pcrud calls can
view the history of any setting, including those that are sensitive.
This happens because the permacrud action entries in the IDL for the
coustl object lists no required permission for retrieve. Thus, no
permission is required and once anonymous pcrud goes in, no login
would be required either.
An immediate fix for this would be to add a permission, just about any
permission that a patron would not have will do, to the retrieve
action in couustl's permacrud block.
A longer winded fix will appear in a forthcoming comment. There are a
number of things "wrong" about this feature.

| Changed in evergreen: | |
| --- | --- |
| **importance**: | Undecided → Critical |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jason Stephenson (jstephenson)](https://launchpad.net/~jstephenson) wrote on 2015-02-24: |  |  | [#2](/evergreen/%2Bbug/1206589/comments/2) |
| --- | --- | --- | --- |

The collab/dyrcona/lp1206589-quick-fix branch in the security repo adds a retrieve permission of STAFF\_LOGIN to the coustl IDL entry, and it fixes a bug with the primary key entry that I noticed while looking into this.

After adding the STAFF\_LOGIN permission and testing a proof of concept with my wife's account, I got this error message which seemed to leak information to the user: open-ils.pcrud: no object found with primary key date\_applied of 2015-02-19T09:02:12-0500. Looking into that showed that the primary field in the IDL needed to change to id. Doing that resolved the strange error.

I chose STAFF\_LOGIN even though it does not resolve Jason's initial problem. STAFF\_LOGIN at a minimum requires a user to be able to login as staff in order to exploit this. That leaves us pretty much where the initial bug reports assumes we were with settings exposed only to unauthorized staff. If someone has a better idea for a permission to use, feel free to change it.

This also needs a good write up for the security releases this week. With people urged to upgrade. This one may be harder to patch accurately as sites are known to customize their IDL.

My next comment will contain my thoughts on a longer term fix for the LSE history feature's issues.

 The collab/dyrcona/lp1206589-quick-fix branch in the security repo adds a retrieve permission of STAFF\_LOGIN to the coustl IDL entry, and it fixes a bug with the primary key entry that I noticed while looking into this.
After adding the STAFF\_LOGIN permission and testing a proof of concept with my wife's account, I got this error message which seemed to leak information to the user: open-ils.pcrud: no object found with primary key date\_applied of 2015-02-19T09:02:12-0500. Looking into that showed that the primary field in the IDL needed to change to id. Doing that resolved the strange error.
I chose STAFF\_LOGIN even though it does not resolve Jason's initial problem. STAFF\_LOGIN at a minimum requires a user to be able to login as staff in order to exploit this. That leaves us pretty much where the initial bug reports assumes we were with settings exposed only to unauthorized staff. If someone has a better idea for a permission to use, feel free to change it.
This also needs a good write up for the security releases this week. With people urged to upgrade. This one may be harder to patch accurately as sites are known to customize their IDL.
My next comment will contain my thoughts on a longer term fix for the LSE history feature's issues.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jason Stephenson (jstephenson)](https://launchpad.net/~jstephenson) wrote on 2015-02-24: |  |  | [#3](/evergreen/%2Bbug/1206589/comments/3) |
| --- | --- | --- | --- |

[Download full text](https://bugs.launchpad.net/evergreen/%2Bbug/1206589/comments/3/%2Bdownload) (3.6 KiB)

The database table and IDL object are config.org\_unit\_setting\_type\_log

and coustl. These should probably be actor.org\_unit\_setting\_log and

aousl, respectively. It may be too late to change this without

inconveniencing someone, but I suggest changing the table name and the

IDL.

Because the table and IDL seem to be based on coust, the IDL uses

permissions based on ADMIN\_ORG\_UNIT\_SETTING\_TYPE, and a new permission

for managing the log: ADMIN\_ORG\_UNIT\_SETTING\_TYPE\_LOG. Given that

we're actually tracking changes to the settings themselves, and not to

the setting types, these permissions should be changed, or even

dropped. Log entries should be created and managed in the backend

without regard to the user's permissions. Log entries should only be

viewable to users who have the view permission for the referenced

setting at the referenced organizational unit. (More on how the

history is exposed appears later.)

The IDL lists open-ils.pcrud as a controller. This listing is

problematic since org. unit settings do not follow the pcrud model for

permissions. The open-ils.pcrud controller should be dropped. The

parent aous permissions should be used by log entry API calls. Given

that open-ils.cstore would be the remaining controller, the backend

can still manage the log without needing permissions.

The log records the date of the change, the org unit where the setting

applies, the original value, the new value, and the setting (field

name) that was changed. It does not track what user made the change,

nor at what workstation. I suggest adding the user and workstation as

new columns if possible.

The database trigger, limit\_log\_oust, limits the settings log to the

five most recent changes for any setting determined solely by the

field name. The limit of 5 is "hard coded" by using a combination of

dates and a limit of 4 on a subselect in a larger delete statement.

This limit should, itself, have a setting, either an internal or

global flag, or an org. unit setting itself. Furthermore, the limit

code should be expanded to look at both the org\_unit and the

field\_name, or if the table/IDL changes suggested above are adopted,

the parent aous. While this will expand the logs a bit, it will give

each site its own history. If an org. unit setting is the method of

controlling the limit, it also gives each location the chance to

control how much of the history they can see.

The staff client uses the openils.PermaCRUD JavaScript module to

retrieve information to display to the user. As mentioned above,

pcrud is the wrong permission model for org. unit settings.

Additionally, the IDL specifies an empy retrieve permission, which

means that none is required to view the history of any setting. This

not only exposes settings in the staff client, but anyone who can

currently login and make the appropriate open-ils.pcrud call remotely

could also gain access to the history of a given setting or settings.

Additionally, the pcrud search is done only on the setting field name

itself. Thus all settings are exposed in the history view and not

just those that concern the currently logged in user. It makes sense

to me that the retrieval should limit itself t...

[Read more...](/evergreen/%2Bbug/1206589/comments/3)

The database table and IDL object are config.org\_unit\_setting\_type\_log
and coustl. These should probably be actor.org\_unit\_setting\_log and
aousl, respectively. It may be too late to change this without
inconveniencing someone, but I suggest changing the table name and the
IDL.
Because the table and IDL seem to be based on coust, the IDL uses
permissions based on ADMIN\_ORG\_UNIT\_SETTING\_TYPE, and a new permission
for managing the log: ADMIN\_ORG\_UNIT\_SETTING\_TYPE\_LOG. Given that
we're actually tracking changes to the settings themselves, and not to
the setting types, these permissions should be changed, or even
dropped. Log entries should be created and managed in the backend
without regard to the user's permissions. Log entries should only be
viewable to users who have the view permission for the referenced
setting at the referenced organizational unit. (More on how the
history is exposed appears later.)
The IDL lists open-ils.pcrud as a controller. This listing is
problematic since org. unit settings do not follow the pcrud model for
permissions. The open-ils.pcrud controller should be dropped. The
parent aous permissions should be used by log entry API calls. Given
that open-ils.cstore would be the remaining controller, the backend
can still manage the log without needing permissions.
The log records the date of the change, the org unit where the setting
applies, the original value, the new value, and the setting (field
name) that was changed. It does not track what user made the change,
nor at what workstation. I suggest adding the user and workstation as
new columns if possible.
The database trigger, limit\_log\_oust, limits the settings log to the
five most recent changes for any setting determined solely by the
field name. The limit of 5 is "hard coded" by using a combination of
dates and a limit of 4 on a subselect in a larger delete statement.
This limit should, itself, have a setting, either an internal or
global flag, or an org. unit setting itself. Furthermore, the limit
code should be expanded to look at both the org\_unit and the
field\_name, or if the table/IDL changes suggested above are adopted,
the parent aous. While this will expand the logs a bit, it will give
each site its own history. If an org. unit setting is the method of
controlling the limit, it also gives each location the chance to
control how much of the history they can see.
The staff client uses the openils.PermaCRUD JavaScript module to
retrieve information to display to the user. As mentioned above,
pcrud is the wrong permission model for org. unit settings.
Additionally, the IDL specifies an empy retrieve permission, which
means that none is required to view the history of any setting. This
not only exposes settings in the staff client, but anyone who can
currently login and make the appropriate open-ils.pcrud call remotely
could also gain access to the history of a given setting or settings.
Additionally, the pcrud search is done only on the setting field name
itself. Thus all settings are exposed in the history view and not
just those that concern the currently logged in user. It makes sense
to me that the retrieval should limit itself to those org. unit's in
the user's branch of the hierarchy, i.e. ancestors and/or descendants.
Workstation org. unit should be preferred over home org. unit for
this.
Since I have suggested removing the open-ils.pcrud controller, leaving
cstore as the only mode of access to these settings, new API calls
would need to be added to search and retrieve the settings history. I
don't think we'd want update or delete as those operations are handled
in the database.
Any feedback is welcome.

[Galen Charlton (gmc)](https://launchpad.net/~gmc)
on 2015-03-03

| **information type**: | Private Security → Public Security |
| --- | --- |
| Changed in evergreen: | |
| **status**: | Confirmed → Fix Committed |
| **milestone**: | none → 2.8-beta |

[Evergreen Bug Maintenance (bugmaster)](https://launchpad.net/~bugmaster)
on 2015-04-02

| Changed in evergreen: | |
| --- | --- |
| **status**: | Fix Committed → Fix Released |

[See full activity log](https://bugs.launchpad.net/evergreen/%2Bbug/1206589/%2Bactivity)

To post a comment you must [log in](%2Blogin?comments=all).

* [Report a bug](/evergreen/%2Bfilebug)

This report contains
**Public Security**
information

Everyone can see this security related information.

You are
[not directly subscribed to this bug's notifications.](/evergreen/%2Bbug/1206589/%2Bsubscribe)

Subscribing...

* [Edit bug mail](https://bugs.launchpad.net/evergreen/%2Bbug/1206589/%2Bsubscriptions "View and change your subscriptions to this bug")

## Other bug subscribers

[Subscribe someone else](https://bugs.launchpad.net/evergreen/%2Bbug/1206589/%2Baddsubscriber "Launchpad will email that person whenever this bugs changes")

## Remote bug watches

Bug watches keep track of this bug in other bug trackers.

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
4d55102
([Get the code!](https://dev.launchpad.net/))



=== Content from evergreen-ils.org_b1e47988_20250125_023920.html ===
commit 71005a34c3f4d21f61fde01362697a0898f23d7e
Author: Ben Shum
Date: Wed Feb 4 14:42:16 2015 -0500
Bump OpenILS.pm version to 2.7.4
Signed-off-by: Ben Shum
1 1 Open-ILS/src/perlmods/lib/OpenILS.pm
commit a9fe81b813d8bc92b71a800e54e8ba8759c69df0
Author: Jason Stephenson
Date: Thu Feb 19 11:17:08 2015 -0500
LP#1424755: Add IMPORTANT SECURITY INFORMATION release note.
Signed-off-by: Jason Stephenson
Signed-off-by: Galen Charlton
Signed-off-by: Ben Shum
9 0 docs/RELEASE\_NOTES\_NEXT/security-bug-fix.txt
create mode 100644 docs/RELEASE\_NOTES\_NEXT/security-bug-fix.txt
commit e2a16e576e443084493fc0c327fb8fb80a9e1c51
Author: Jason Stephenson
Date: Wed Feb 18 16:28:31 2015 -0500
LP#1424755: Org Unit Setting view permissions can be bypassed
Fix private org. unit setting leakage by forcing the $auth argument
to true if not passed in when open-ils.actor.ou\_setting.ancestor\_default
or open-ils.actor.ou\_setting.ancestor\_default.batch are called.
Other than a change to the desc of the public methods to reflect that
they now check permissions if permissions are required, there are no
required api changes to the back or the front ends.
Signed-off-by: Jason Stephenson
Signed-off-by: Galen Charlton
Signed-off-by: Ben Shum
10 4 Open-ILS/src/perlmods/lib/OpenILS/Application/Actor.pm
commit 928094b536189fc2c7896d67ab6b97f3f241022b
Author: Jason Stephenson
Date: Tue Feb 24 14:05:16 2015 -0500
LP#1206589: Temporary Fix for Org. Unit Settings History Bug
This commit makes two changes to the coustl IDL entry.
1. It adds a retrieve permission of STAFF\_LOGIN. This at least
requires someone with staff permission to be able to view settings
history.
2. It fixed the primary key field from date\_applied to id. The
prior setting was just an outright error.
NOTE: This is intended as a short term fix for the Library Settings
Editor history feature.
Signed-off-by: Jason Stephenson
Signed-off-by: Ben Shum
2 2 Open-ILS/examples/fm\_IDL.xml
commit 0a2fe2443981e28ff84a35d7a4188071f114a1fd
Author: Kathy Lussier
Date: Mon Mar 2 15:06:03 2015 -0500
lp1427331: Remove relator information from author links
Removes the display and linking of relator information from the author field
on the search results page. The display of subfield e was limiting the number
or results retrieved when clicking these links.
Signed-off-by: Kathy Lussier
Signed-off-by: Dan Scott
1 1 Open-ILS/src/templates/opac/parts/misc\_util.tt2
commit 3794cfdf9913618d3ddb585f86009ad5cb67d7b6
Author: Dan Wells
Date: Tue Mar 3 12:11:35 2015 -0500
Revert LP#1205072
It was decided that these changes caused too much potential for
confusion, and would be better served by a simultaneous change to
making 'granularity' case insensitive. Pulling back for now.
Signed-off-by: Dan Wells
1 1 Open-ILS/src/support-scripts/action\_trigger\_runner.pl.in
5 8 Open-ILS/src/templates/conify/global/action\_trigger/event\_definition.tt2
0 1 Open-ILS/web/js/ui/default/conify/global/action\_trigger/event\_definition.js
0 13 docs/RELEASE\_NOTES\_NEXT/Administration/action-trigger-granularity.txt
2 2 docs/admin/actiontriggers.txt
delete mode 100644 docs/RELEASE\_NOTES\_NEXT/Administration/action-trigger-granularity.txt
commit 71d56c035ab939f5d7e4839cb88c58f16d94a8ba
Author: Galen Charlton
Date: Thu Nov 13 09:42:45 2014 -0800
LP#1287370: minor textual cleanup
- remove trailing spaces
- remove debug logging
Signed-off-by: Galen Charlton
Signed-off-by: Erica Rohlfs
Signed-off-by: Mike Rylander
Signed-off-by: Ben Shum
4 5 Open-ILS/web/js/dojo/openils/widget/AutoGrid.js
1 1 Open-ILS/web/js/ui/default/acq/financial/list\_funds.js
commit 21604aee487a1c78981e9bdecffc272885886693
Author: Bill Erickson
Date: Tue Aug 12 12:03:05 2014 -0400
LP#1287370: apply filter/offset persistence to the fund search page
This patch completes the AutoGrid work and applies the
filter & offset persistence to the fund search page.
Signed-off-by: Bill Erickson
Signed-off-by: Galen Charlton
Signed-off-by: Erica Rohlfs
Signed-off-by: Mike Rylander
Signed-off-by: Ben Shum
1 0 Open-ILS/src/templates/acq/fund/list.tt2
46 21 Open-ILS/web/js/dojo/openils/widget/AutoGrid.js
18 2 Open-ILS/web/js/ui/default/acq/financial/list\_funds.js
commit bdda621dec98c5cea7ae1d8dcf0bf42fa42df80c
Author: Bill Erickson
Date: Mon Aug 11 16:45:21 2014 -0400
LP#1287370: allow AutoGrid to persist filter state and page offset
By turning on a new AutoGrid option called urlNavigation,
the current filter and offset is stored in a URL parameter
called djgridops. This permits using the back button
to return to an AutoGrid page at the place in the search
results where the user left it.
Signed-off-by: Bill Erickson
Signed-off-by: Galen Charlton
Signed-off-by: Erica Rohlfs
Signed-off-by: Mike Rylander
Signed-off-by: Ben Shum
58 7 Open-ILS/web/js/dojo/openils/widget/AutoGrid.js
commit 1419de51d949afd4d573c0407d0ae6fd96e5d25d
Author: Adam Bowling
Date: Tue Jan 20 16:54:11 2015 -0500
LP #1406350 Mobile Device Navigation Issue Fix for Shelf Browser
Currently, when a browser window is narrowed too much, whether
in a mobile browser, or on a desktop or laptop machine, the
"Previous Page" and "Next Page" navigation links disappear. The
only solution that seems to solve this is by removing the
"THEAD" element from the shelf browser table.
This patch removes that tag, adds a new row to imitate a new
border as existed before, and modifies the CSS in .../opac/
css/style.css.tt2 to address that difference.
Signed-off-by: Adam Bowling
Signed-off-by: Yamil Suarez
Signed-off-by: Ben Shum
3 1 Open-ILS/src/templates/opac/css/style.css.tt2
3 2 Open-ILS/src/templates/opac/parts/record/cnbrowse.tt2
commit d49f53af0ecd3982ea27f2b95201ec91b1fb4b03
Author: Remington Steed
Date: Mon Mar 2 16:54:56 2015 -0500
LP#1205072: Correct and clarify the upgrade notes
Signed-off-by: Remington Steed
Signed-off-by: Dan Wells
5 3 docs/RELEASE\_NOTES\_NEXT/Administration/action-trigger-granularity.txt
commit ed6ed6fcaa70e70e1589a2a10af96a52657b50df
Author: Josh Stompro
Date: Tue Jan 13 13:36:40 2015 -0600
LP#1205072 - Assorted fixes for action trigger granularity settings
- Added "weekdays" option to match up with example crontab file
- Change granularity example back to lowercase
- Change granularity labels to lowercase in the docs
Signed-off-by: Josh Stompro
Signed-off-by: Remington Steed
Signed-off-by: Dan Wells
1 1 Open-ILS/src/support-scripts/action\_trigger\_runner.pl.in
1 0 Open-ILS/src/templates/conify/global/action\_trigger/event\_definition.tt2
2 2 docs/admin/actiontriggers.txt
commit a2c54d44817c5a85186183d3fe61f9ea30ac268b
Author: Bill Erickson
Date: Tue Dec 2 15:00:22 2014 -0500
LP#1205072 A/T granularity upgrade notes
Signed-off-by: Bill Erickson
Signed-off-by: Remington Steed
Signed-off-by: Dan Wells
11 0 docs/RELEASE\_NOTES\_NEXT/Administration/action-trigger-granularity.txt
create mode 100644 docs/RELEASE\_NOTES\_NEXT/Administration/action-trigger-granularity.txt
commit 34172c39751cf4a6e0f45c8653d9582fcf9c543c
Author: Bill Erickson
Date: Wed Nov 26 14:31:41 2014 -0500
LP#1205072 A/T granularity UI sane default, honors case
Present A/T granularity options as untranslated, lower-case strings to
match the crontab examples. Also, honor alternate case variations for
granularity values so that "Daily" and "daily" are both seprate, valid
options.
Signed-off-by: Bill Erickson
Signed-off-by: Remington Steed
Signed-off-by: Dan Wells
7 5 Open-ILS/src/templates/conify/global/action\_trigger/event\_definition.tt2
1 0 Open-ILS/web/js/ui/default/conify/global/action\_trigger/event\_definition.js
commit 151100ea708cc5c4c281a542295677abc1442998
Author: Mike Rylander
Date: Tue Mar 4 11:31:13 2014 -0500
LP#1287791: Restrict authority browse to controlled subfields
Back in bug 1175308 I added some logic that improves the behavior
of the MARC editor's right-click authority popup. Now we need to
go a little farther and adjust that logic to be more careful about
which subfields it uses to browse for authority records. Specifically,
it should only use controlled subfields.
Signed-off-by: Mike Rylander
Signed-off-by: Remington Steed
Signed-off-by: Dan Wells
19 1 Open-ILS/xul/staff\_client/server/cat/marcedit.js
commit a0c9d45a66568d26fdf886e313b140c1c8ed8fdc
Author: Galen Charlton
Date: Mon Mar 2 14:56:34 2015 +0000
LP#1155313: fix mangling of schema upgrade script name
Signed-off-by: Galen Charlton
25 0 Open-ILS/src/sql/Pg/upgrade/0914.schema.lpad-number-repair.sql
0 25 Open-ILS/src/sql/Pg/upgrade/0914.schema.redo\_vandelay\_merge\_profile\_sequence.sql
create mode 100644 Open-ILS/src/sql/Pg/upgrade/0914.schema.lpad-number-repair.sql
delete mode 100644 Open-ILS/src/sql/Pg/upgrade/0914.schema.redo\_vandelay\_merge\_profile\_sequence.sql
commit 10009982c5b4dc28e23fffb2a1cf85a10ba9094b
Author: Galen Charlton
Date: Mon Mar 2 14:20:55 2015 +0000
LP#1155313: recalculate normalized labels during upgrade
Signed-off-by: Galen Charlton
4 0 Open-ILS/src/sql/Pg/upgrade/0914.schema.redo\_vandelay\_merge\_profile\_sequence.sql
commit 79eb3de8fdac6467aa59ddf5ebc0a2d6c6cbda7f
Author: Galen Charlton
Date: Mon Mar 2 14:05:52 2015 +0000
LP#1155313: pin upgrade script to 0914
Signed-off-by: Galen Charlton
1 1 Open-ILS/src/sql/Pg/002.schema.config.sql
21 0 Open-ILS/src/sql/Pg/upgrade/0914.schema.redo\_vandelay\_merge\_profile\_sequence.sql
0 19 Open-ILS/src/sql/Pg/upgrade/XXXX.schema.lpad-number-repair.sql
create mode 100644 Open-ILS/src/sql/Pg/upgrade/0914.schema.redo\_vandelay\_merge\_profile\_sequence.sql
delete mode 100644 Open-ILS/src/sql/Pg/upgrade/XXXX.schema.lpad-number-repair.sql
commit a996868bd08de94f26dd09ed895a5f71af1ce942
Author: Galen Charlton
Date: Mon Mar 2 14:02:23 2015 +0000
LP#1155313: fix copy-and-paste-o in test case
Signed-off-by: Galen Charlton
1 1 Open-ILS/src/sql/Pg/t/lpad\_number\_substrings.pg
commit 7b3bc0873518add3c14ae7fe9b7b8ca153fe8748
Author: Dan Pearl
Date: Mon Jan 5 13:28:13 2015 -0500
LP#1155313: upgrade script and pgTAP tests for monograph\_part label normalization fix
Signed-off-by: Daniel Pearl
Signed-off-by: Galen Charlton
41 0 Open-ILS/src/sql/Pg/t/lpad\_number\_substrings.pg
19 0 Open-ILS/src/sql/Pg/upgrade/XXXX.schema.lpad-number-repair.sql
create mode 100644 Open-ILS/src/sql/Pg/t/lpad\_number\_substrings.pg
create mode 100644 Open-ILS/src/sql/Pg/upgrade/XXXX.schema.lpad-number-repair.sql
commit 73c869128467a55f63deeaba00482372ad4b9744
Author: Dan Pearl
Date: Fri Mar 15 15:04:37 2013 -0400
LP#1155313: Repair generation of label\_sortkey for monograph\_part entries
The evergreen.lpad\_number\_substrings function attempts to codify numeric
fields within labels. It does this by finding the strings, padding them
to a given size, and replacing them in the source string. For instance:
3 => 0000000003
15.4 => 00000000150000000004
The algorithm was fooled by repeated characters, like in 15.1:
15.1 => 00000000000000000150000000001 INCORRECT
This change will result in the correct value.
Signed-off-by: Dan Pearl
Signed-off-by: Galen Charlton
6 6 Open-ILS/src/sql/Pg/002.functions.config.sql
commit 38f3cfc0071e6664352b128e720bf18cd01496fd
Author: Josh Stompro
Date: Thu Jan 15 20:03:55 2015 -0600
LP#1395842: fix labels for A/T environment and parameter ID fields
Signed-off-by: Josh Stompro
Signed-off-by: Galen Charlton
2 2 Open-ILS/examples/fm\_IDL.xml
commit 888e54be1a819bb93558a461dfa6eadf5f5ed912
Author: Ben Shum
Date: Sat Feb 28 12:24:31 2015 -0500
LP#1426133: followup fix seed data sequence
Signed-off-by: Ben Shum
1 1 Open-ILS/src/sql/Pg/950.data.seed-values.sql
commit f847a92ddbd2e3231f48fa73ccfe6a9b9c769d78
Author: Jason Etheridge
Date: Thu Feb 26 09:26:47 2015 -0500
LP#1425967: look for Business::CreditCard in settings-tester.pl
and not Business::CreditCard::Object
Signed-off-by: Jason Etheridge
Signed-off-by: Ben Shum
1 1 Open-ILS/src/support-scripts/settings-tester.pl
commit 94d646f5c433481ddbb331382703b62a43dbd2a9
Author: Ben Shum
Date: Fri Feb 27 10:25:48 2015 -0500
LP#1426133: Stamping upgrade script for set merge\_profile\_id\_seq
Signed-off-by: Ben Shum
Conflicts:
Open-ILS/src/sql/Pg/002.schema.config.sql
1 1 Open-ILS/src/sql/Pg/002.schema.config.sql
24 0 Open-ILS/src/sql/Pg/upgrade/0913.schema.redo\_vandelay\_merge\_profile\_sequence.sql
0 24 Open-ILS/src/sql/Pg/upgrade/XXXX.schema.redo\_vandelay\_merge\_profile\_sequence.sql
create mode 100644 Open-ILS/src/sql/Pg/upgrade/0913.schema.redo\_vandelay\_merge\_profile\_sequence.sql
delete mode 100644 Open-ILS/src/sql/Pg/upgrade/XXXX.schema.redo\_vandelay\_merge\_profile\_sequence.sql
commit 8d75bafea9614ede49b27d572c40cc04f3bb715f
Author: Remington Steed
Date: Thu Feb 26 16:21:48 2015 -0500
LP#1426133: Set merge\_profile\_id\_seq explicitly
Many database tables need to explicitly set the id sequence (often to
100) to provide room for stock data with static ids. This commit does so
for vandelay.merge\_profile, and also updates the ids of any non-stock
profiles (both in the merge\_profile table and in related settings).
Signed-off-by: Remington Steed
Signed-off-by: Ben Shum
2 0 Open-ILS/src/sql/Pg/950.data.seed-values.sql
24 0 Open-ILS/src/sql/Pg/upgrade/XXXX.schema.redo\_vandelay\_merge\_profile\_sequence.sql
create mode 100644 Open-ILS/src/sql/Pg/upgrade/XXXX.schema.redo\_vandelay\_merge\_profile\_sequence.sql
commit 4dc66577e9864230272dad4f5ddf45ead9073887
Author: Dan Wells
Date: Thu Feb 12 13:08:52 2015 -0500
LP#1425191 Restore summarization of serial units
In a previous commit, code was added for force summaries to be limited
to a certain type (to prevent cross type contamination of summaries).
This had the negative side-effect of preventing summaries on units, as
the units were not requesting a 'type' for their summary.
While we could force the unit code to send a type, it seemed generally
more flexible to restore the removed support for returning all summary
information in the absense of a requested type. This could lead to
cross-type summaries for units, but that is a larger issue altogether
(i.e. how we can properly support cross-type units at all).
Signed-off-by: Dan Wells
Signed-off-by: Kathy Lussier
12 1 Open-ILS/src/perlmods/lib/OpenILS/Application/Serial.pm
commit a1b703ee1d67afb4a8ea25555c6f2908acf1a28e
Author: Kathy Lussier
Date: Wed Feb 25 15:20:51 2015 -0500
lp1373203: Allow users to escape metarecord holds (backport version)
Provides a means for users to escape a metarecord hold if they accidentally
clicked the Advanced Hold Options link. A "Go Back" link will be
provided to allow the user to return to a title hold. If the hold starts as a
metarecord hold, this link won't display since we don't know which bib the
patron wants.
Also fixes an issue where the hold cancel button always returned the user to
the previous screen.
Signed-off-by: Kathy Lussier
Signed-off-by: Ben Shum
10 3 Open-ILS/src/templates/opac/parts/place\_hold.tt2
commit fabb840587ffbca9f9e3ed83d7d33f8b9d1a505e
Author: Remington Steed
Date: Tue Feb 24 13:25:16 2015 -0500
LP#957466: Fix invalid MARCXML syntax
This commit fixes some invalid MARCXML syntax, and also makes the XPath
query more general to allow for namespaces on the tags.
Signed-off-by: Remington Steed
Signed-off-by: Dan Wells
2 2 Open-ILS/src/perlmods/lib/OpenILS/Application/AppUtils.pm
commit 1bee75f92d9e6fd5157867cbff16f6f3e5b32053
Author: Remington Steed
Date: Thu Feb 19 10:03:18 2015 -0500
LP#957466: Added pgTAP test for db function change
Signed-off-by: Remington Steed
Signed-off-by: Dan Wells
80 0 Open-ILS/src/sql/Pg/t/regress/lp957466\_update\_date\_and\_source.pg
create mode 100644 Open-ILS/src/sql/Pg/t/regress/lp957466\_update\_date\_and\_source.pg
commit 8a64ef33c48d2ec523dfa4b9ca0dfdc111c08cf7
Author: Jason Stephenson
Date: Wed Feb 18 10:13:56 2015 -0500
LP#957466: Stamping Upgrade Script
Signed-off-by: Jason Stephenson
Conflicts:
Open-ILS/src/sql/Pg/002.schema.config.sql
Signed-off-by: Dan Wells
1 1 Open-ILS/src/sql/Pg/002.schema.config.sql
66 0 Open-ILS/src/sql/Pg/upgrade/0908.function.vandelay-overlay\_bib\_record.sql
0 66 Open-ILS/src/sql/Pg/upgrade/XXXX.function.vandelay-overlay\_bib\_record.sql
create mode 100644 Open-ILS/src/sql/Pg/upgrade/0908.function.vandelay-overlay\_bib\_record.sql
delete mode 100644 Open-ILS/src/sql/Pg/upgrade/XXXX.function.vandelay-overlay\_bib\_record.sql
commit 4bf4b6e8bd414de8c06070b3554642607662b936
Author: Jason Stephenson
Date: Fri Feb 13 12:22:19 2015 -0500
LP#957466 Vandelay set the 905$u to current user if not defined
This version only adds a 905$u if none already exist in the document. It
does so by creating a new 905 tag with subfield u. It does not add on
to any possibly existing 905 tag that does not have a subfield u.
This will cause the code in the previous commit to trigger and update the
appropriate fields in biblio.record\_entry.
Signed-off-by: Jason Stephenson
Signed-off-by: Dan Wells
24 0 Open-ILS/src/perlmods/lib/OpenILS/Application/AppUtils.pm
5 0 Open-ILS/src/perlmods/lib/OpenILS/Application/Vandelay.pm
commit d1459e045d5a4da3b6220fa3267448a5a0f68eef
Author: Remington Steed
Date: Mon Oct 13 12:22:32 2014 -0400
LP#957466: Update editor/edit\_date/source on overlay
This commit does three things.
1. It removes some declared variables that are never used in this
function.
2. It updates the bib record edit\_date field (along with the editor) if
an editor is found in the MARC. If an editor is not found (or doesn't
match an Evergreen user), it seems best to leave the edit\_date
unchanged so as not to imply that the previous editor is responsible for
the newest edit.
3. If a bib source is chosen in the vandelay importer UI, it updates the
bib record with the source. To access this field, the reference to table
"queued\_record" is replaced by its child table "queued\_bib\_record".
Since the new table is a child of the other, all of the other needed
values are still available.
Signed-off-by: Remington Steed
Signed-off-by: Jason Stephenson
Signed-off-by: Martha Driscoll
Signed-off-by: Dan Wells
17 9 Open-ILS/src/sql/Pg/012.schema.vandelay.sql
66 0 Open-ILS/src/sql/Pg/upgrade/XXXX.function.vandelay-overlay\_bib\_record.sql
create mode 100644 Open-ILS/src/sql/Pg/upgrade/XXXX.function.vandelay-overlay\_bib\_record.sql
commit 2defa0d44052a21e2efa5ed42739e1badb4c3ade
Author: Galen Charlton
Date: Mon Feb 23 20:25:02 2015 +0000
LP#1154579: explicitly alert if copy location failed to be deleted
This patch adds an alert if the act of deleting a copy
location in the staff interface fails -- which would
most commonly happen if there are still active items
attached to the location to be deleted.
Signed-off-by: Galen Charlton
Signed-off-by: Ben Shum
4 1 Open-ILS/xul/staff\_client/server/admin/copy\_locations.js
commit 2c0d82dac53ef965e0588c678bfe7e788f1b7cd6
Author: Galen Charlton
Date: Thu Feb 5 16:52:36 2015 +0000
LP#904581: when calculating hold status, be more careful about fetching transits
This patch fixes a problem where if a hold meets the following
criteria, an "Invalid date format: at /usr/share/perl5/Error.pm"
error can be thrown when fetching its details:
- the hold has a captured item
- the captured item has status 8 (on hold shelf)
- there is another item that is currently in transit to fill the hold
- the pickup library (or one of its ancestors) has the
circ.hold\_shelf\_status\_delay library setting set.
Signed-off-by: Galen Charlton
Signed-off-by: Ben Shum
5 1 Open-ILS/src/perlmods/lib/OpenILS/Application/Circ/Holds.pm
commit f0ad0694c3e2981fb03cd417beb66215c302a7bc
Author: Galen Charlton
Date: Mon Feb 23 19:11:59 2015 +0000
Revert "LP#1419813 Fix default joins for config.rule\_age\_hold\_protection."
This reverts commit e775a06a92807da781886cb4a46024210fa5fd19.
4 4 Open-ILS/examples/fm\_IDL.xml
commit 78064b92135426be4b2795fafc68ac60a99308fa
Author: Galen Charlton
Date: Thu Feb 19 15:59:33 2015 +0000
LP#1418772: (follow-up) tweak undef-edness check
Use the Perl defined() function rather than "eq undef"
to avoid logging warnings about undefined values.
Signed-off-by: Galen Charlton
1 1 Open-ILS/src/perlmods/lib/OpenILS/WWW/EGCatLoader/Util.pm
commit 25c25e7ac885b22a8e09b39814d623e49956013b
Author: Steven Chan
Date: Mon Jul 22 12:39:48 2013 -0700
LP#1418772: Avoid internal server error on viewing full record when copy create\_date is null
In the TPAC client, when it tries to show record details containing a copy
record with no create date, it shows an Internal Server Error instead.
1. The error is caused by trying to execute the parse\_datetime() method
in the parse\_date() function in the WWW/EGCatLoader/util.pm module with
an empty date string. The function will normally translate a datetime
string from the database to a datetime string that is formatted for TPAC
templates. The fix is to not execute parse\_datetime() and just return
an empty string.
2. In the record/copy\_table.tt2 template, if an empty datetime string is
the value for copy\_info.create\_date, the format() method of the Date
plugin will show the current datetime by default. The fix is to show '-'
in its place, replicating the same template logic as for
copy\_info.due\_date.
Signed-off-by: Jeff Davis
Signed-off-by: Galen Charlton
3 0 Open-ILS/src/perlmods/lib/OpenILS/WWW/EGCatLoader/Util.pm
10 4 Open-ILS/src/templates/opac/parts/record/copy\_table.tt2
commit e775a06a92807da781886cb4a46024210fa5fd19
Author: Chris Sharp
Date: Mon Feb 9 09:24:11 2015 -0500
LP#1419813 Fix default joins for config.rule\_age\_hold\_protection.
config.rule\_age\_hold\_protection had a "has\_a" relationship
to several copy and copy-like sources when age protection
is optional. Changing those to "might\_have" to allow left
joins by default.
Signed-off-by: Chris Sharp
Signed-off-by: Galen Charlton
4 4 Open-ILS/examples/fm\_IDL.xml
commit 6f4c296821464cb7d8e56561880cfa4a8ebbf4cf
Author: Ben Shum
Date: Wed Feb 4 16:08:41 2015 -0500
Forward-port 2.7.2-2.7.3 upgrade script
Signed-off-by: Ben Shum
732 0 Open-ILS/src/sql/Pg/version-upgrade/2.7.2-2.7.3-upgrade-db.sql
create mode 100644 Open-ILS/src/sql/Pg/version-upgrade/2.7.2-2.7.3-upgrade-db.sql


=== Content from evergreen-ils.org_c7036de3_20250125_023921.html ===


* [Skip to primary sidebar](#genesis-sidebar-primary)
* [Skip to content](#breakthrough-page-title)

* [About Us](https://evergreen-ils.org/about-us/)
  + [Overview](https://evergreen-ils.org/about-us/)
  + [Annual Reports](https://evergreen-ils.org/about-us/annual-reports/)
  + [F.A.Q.](https://evergreen-ils.org/frequently-anticipated-questions/)
  + [Evergreen Event Code of Conduct](https://evergreen-ils.org/code-of-conduct/)
  + [Project Governance](https://evergreen-ils.org/governance/)
  + [Trademark Policy](https://evergreen-ils.org/trademark-policy/)
  + [Zoom Policy](https://evergreen-ils.org/about-us/zoom-policy/)
* [Documentation](https://evergreen-ils.org/eg-documentation/)
  + [Official Documentation](https://docs.evergreen-ils.org/docs/latest/index.html)
  + [Documentation Interest Group](http://evergreen-ils.org/dokuwiki/doku.php?id=evergreen-docs:dig)
  + [Evergreen Roadmap](http://evergreen-ils.org/dokuwiki/doku.php?id=faqs:evergreen_roadmap)
  + [Evergreen Wiki](http://wiki.evergreen-ils.org)
  + [Tabular Release Notes](https://evergreen-ils.org/eg-documentation/tabular-release-notes/)
* [Get Involved!](https://evergreen-ils.org/communicate/)
  + [Social Media](https://evergreen-ils.org/communicate/social-media/)
  + [Get Involved!](https://evergreen-ils.org/involvement/)
  + [Committees & Interest Groups](https://evergreen-ils.org/communicate/committees/)
  + [Communications](https://evergreen-ils.org/communicate/)
    - [Mailing Lists](https://evergreen-ils.org/communicate/mailing-lists/)
    - [IRC](https://evergreen-ils.org/communicate/irc/)
    - [Calendar](https://evergreen-ils.org/communicate/calendar/)
    - [Blog](https://evergreen-ils.org/communicate/blog/)
  + [Proposed Development Projects](http://wiki.evergreen-ils.org/doku.php?id=evergreen_features:proposed_development_projects)
* [Conference](https://evergreen-ils.org/conference/)
  + [All Conferences](https://evergreen-ils.org/conference/)
  + [2025 Evergreen International Online Conference](https://evergreen-ils.org/2025-evergreen-international-online-conference/)
  + [2024 Evergreen International Online Conference](https://evergreen-ils.org/conference/2024-evergreen-international-online-conference/)
  + [2023 Evergreen International Conference](https://evergreen-ils.org/conference/2023-evergreen-international-conference/)
  + [Event Photography Policy](https://evergreen-ils.org/conference/photography-policy/)
  + [Code of Conduct](https://evergreen-ils.org/code-of-conduct/)
* [Downloads](https://evergreen-ils.org/egdownloads/)
  + [Evergreen Downloads](https://evergreen-ils.org/egdownloads/)
  + [OpenSRF Downloads](https://evergreen-ils.org/opensrf-downloads/)
[![Evergreen ILS](https://i0.wp.com/evergreen-ils.org/wp-content/uploads/2024/06/evergreen-logo.png?fit=712%2C124&ssl=1)](https://evergreen-ils.org/)

Evergreen ILS

Open Source Library Software

# SECURITY RELEASES: Evergreen 2.7.4, 2.6.7, and 2.5.9

![](https://secure.gravatar.com/avatar/d63c02e623bbf2b79c84de531fd9a9c6?s=36&d=robohash&r=g)*by* [Galen Charlton](https://evergreen-ils.org/author/gmc/) *on* March 3, 2015

On behalf of the Evergreen contributors, the 2.7.x release maintainer (Ben Shum) and the 2.6.x and 2.5.x release maintainer (Dan Wells), we are pleased to announce the release of Evergreen 2.7.4, 2.6.7, and 2.5.9.

The new releases can be downloaded from:

<http://evergreen-ils.org/egdownloads/>

**THESE RELEASES CONTAIN SECURITY UPDATES, so you will want to upgrade as soon as possible.**

In particular, the following security issues are fixed:

* [Bug 1424755](https://bugs.launchpad.net/evergreen/%2Bbug/1424755): This bug allows unauthorized remote access to the value of certain library settings that are meant to be confidential.
* [Bug 1206589](https://bugs.launchpad.net/evergreen/%2Bbug/1206589): This bug allows unauthorized remote access to the log of changes to library settings, including ones meant to be confidential.

All prior supported releases are vulnerable to these bugs.

All three of these new releases also contain bugfixes that not related to the security issues. For more information on the changes in these releases, please consult their change logs:

* [2.7.4](http://evergreen-ils.org/downloads/ChangeLog-2.7.3-2.7.4)
* [2.6.7](http://evergreen-ils.org/downloads/ChangeLog-2.6.6-2.6.7)
* [2.5.9](http://evergreen-ils.org/downloads/ChangeLog-2.5.8-2.5.9)

Please note that 2.5.9 is the last release expected in the 2.5.x series.

**It is recommended that all Evergreen sites upgrade to one of the new releases as soon as possible.**

If you cannot do a full upgrade at this time, it is extremely important that that you patch your Evergreen system to protect against these exploits. To that end, two patches are available, one for [bug 1424755](http://evergreen-ils.org/downloads/patches/lp1424755.patch) and one for [bug 1206589](http://evergreen-ils.org/downloads/patches/lp1206589.patch), that you can download and apply to a running system.

In order to secure your system, you must download the two patches and copy them to each of your Evergreen servers — in particular, any that run the `open-ils.actor` and/or `open-ils.pcrud` services. You will need to perform the following steps on each server to completely patch your system.

First, you must find where the `Actor.pm` module is located. This is usually under `/usr/local` somewhere. The following command will find it for you:

```
find /usr/local -name Actor.pm
```

On an Ubuntu 12.04 system, the above prints out `/usr/local/share/perl/5.14.2/OpenILS/Application/Actor.pm` so we will use that as our example, just be sure that when you do this for real, you use the actual path printed by the above command. If it prints nothing, you will need to check other locations.

Once you have the path, you can run the patch command. Assuming that you are in the directory where you put the patch file, the following command should apply the patch:

```
sudo patch -b /usr/local/share/perl/5.14.2/OpenILS/Application/Actor.pm lp1424755.patch
```

Unless you have made local edits to the affected file, the patch should apply cleanly.

Next, you will need to apply the patch for bug 1206589. This can be done as the `opensrf` user:

```
patch -b /openils/conf/fm_IDL.xml lp1206589.patch
```

After you have applied the patches, you will need to restart the `open-ils.actor` and `open-ils.pcrud` services. You do this by running `osrf_control` with the appropriate options:

```
osrf_control [--localhost] --restart --service open-ils.actor
osrf_control [--localhost] --restart --service open-ils.pcrud
```

The `--localhost` is in brackets because you may or may not need it. Your system administrator should know if you do or not. If you do need it, remove the brackets. If you don’t need it, then omit the option entirely.

### Share this:

* [Facebook](https://evergreen-ils.org/security-releases-evergreen-2-7-4-2-6-7-and-2-5-9/?share=facebook "Click to share on Facebook")
* [Twitter](https://evergreen-ils.org/security-releases-evergreen-2-7-4-2-6-7-and-2-5-9/?share=twitter "Click to share on Twitter")
* Email
* More

* [Reddit](https://evergreen-ils.org/security-releases-evergreen-2-7-4-2-6-7-and-2-5-9/?share=reddit "Click to share on Reddit")
* [LinkedIn](https://evergreen-ils.org/security-releases-evergreen-2-7-4-2-6-7-and-2-5-9/?share=linkedin "Click to share on LinkedIn")
* [Pocket](https://evergreen-ils.org/security-releases-evergreen-2-7-4-2-6-7-and-2-5-9/?share=pocket "Click to share on Pocket")
* [Pinterest](https://evergreen-ils.org/security-releases-evergreen-2-7-4-2-6-7-and-2-5-9/?share=pinterest "Click to share on Pinterest")
* [Tumblr](https://evergreen-ils.org/security-releases-evergreen-2-7-4-2-6-7-and-2-5-9/?share=tumblr "Click to share on Tumblr")
* [Print](https://evergreen-ils.org/security-releases-evergreen-2-7-4-2-6-7-and-2-5-9/#print "Click to print")

### *Related*

Filed Under: [Announcements](https://evergreen-ils.org/category/announcements/), [Releases](https://evergreen-ils.org/category/releases/)

## Primary Sidebar

Search for:

Search

### Tags

* [Acquisitions](https://evergreen-ils.org/tag/acquisitions/) (2)
* [Acquisitions Interest Group](https://evergreen-ils.org/tag/acquisitions-interest-group/) (2)
* [action triggers](https://evergreen-ils.org/tag/action-triggers/) (1)
* [Alerts](https://evergreen-ils.org/tag/alerts/) (1)
* [api](https://evergreen-ils.org/tag/api/) (1)
* [ASN](https://evergreen-ils.org/tag/asn/) (1)
* [Aspen](https://evergreen-ils.org/tag/aspen/) (1)
* [Automated Shipment Notification](https://evergreen-ils.org/tag/automated-shipment-notification/) (1)
* [Baker & Taylor](https://evergreen-ils.org/tag/baker-taylor/) (1)
* [Basic Training](https://evergreen-ils.org/tag/basic-training/) (1)
* [baskets](https://evergreen-ils.org/tag/baskets/) (2)
* [batch changes](https://evergreen-ils.org/tag/batch-changes/) (1)
* [Batch Processing](https://evergreen-ils.org/tag/batch-processing/) (1)
* [batches](https://evergreen-ils.org/tag/batches/) (1)
* [Bibliocommons](https://evergreen-ils.org/tag/bibliocommons/) (1)
* [Bibliomation](https://evergreen-ils.org/tag/bibliomation/) (1)
* [bookbags](https://evergreen-ils.org/tag/bookbags/) (2)
* [Bootstrap OPAC](https://evergreen-ils.org/tag/bootstrap-opac/) (1)
* [buckets](https://evergreen-ils.org/tag/buckets/) (2)
* [bug tracking](https://evergreen-ils.org/tag/bug-tracking/) (1)
* [Career Development](https://evergreen-ils.org/tag/career-development/) (2)
* [carousels](https://evergreen-ils.org/tag/carousels/) (2)
* [Catalog](https://evergreen-ils.org/tag/catalog/) (1)
* [Catalog Search Speed](https://evergreen-ils.org/tag/catalog-search-speed/) (1)
* [Cataloging](https://evergreen-ils.org/tag/cataloging/) (2)
* [Cataloging Interest Group](https://evergreen-ils.org/tag/cataloging-interest-group/) (2)
* [ChiliPAC](https://evergreen-ils.org/tag/chilipac/) (1)
* [Circulation](https://evergreen-ils.org/tag/circulation/) (1)
* [circulation fines](https://evergreen-ils.org/tag/circulation-fines/) (1)
* [Circulation Interest Group](https://evergreen-ils.org/tag/circulation-interest-group/) (1)
* [Closing Remarks](https://evergreen-ils.org/tag/closing-remarks/) (1)
* [Collection Development](https://evergreen-ils.org/tag/collection-development/) (1)
* [Community Spotlight](https://evergreen-ils.org/tag/community-spotlight/) (1)
* [Consortium Leaders Interest Group](https://evergreen-ils.org/tag/consortium-leaders-interest-group/) (1)
* [Consortium Planning](https://evergreen-ils.org/tag/consortium-planning/) (1)
* [Contributing](https://evergreen-ils.org/tag/contributing/) (1)
* [cron jobs](https://evergreen-ils.org/tag/cron-jobs/) (1)
* [Curbside Pickup](https://evergreen-ils.org/tag/curbside-pickup/) (1)
* [cyber security](https://evergreen-ils.org/tag/cyber-security/) (1)
* [Database](https://evergreen-ils.org/tag/database/) (1)
* [datawork](https://evergreen-ils.org/tag/datawork/) (1)
* [DESADV](https://evergreen-ils.org/tag/desadv/) (1)
* [Development Update](https://evergreen-ils.org/tag/development-update/) (1)
* [DIG](https://evergreen-ils.org/tag/dig/) (1)
* [Discovery Layer](https://evergreen-ils.org/tag/discovery-layer/) (1)
* [Dispatch Advice Messages](https://evergreen-ils.org/tag/dispatch-advice-messages/) (1)
* [Docker](https://evergreen-ils.org/tag/docker/) (1)
* [Documentation Interest Group](https://evergreen-ils.org/tag/documentation-interest-group/) (1)
* [EDI](https://evergreen-ils.org/tag/edi/) (1)
* [Ejabberd](https://evergreen-ils.org/tag/ejabberd/) (1)
* [Elasticsearch](https://evergreen-ils.org/tag/elasticsearch/) (1)
* [Electronic Bib Import](https://evergreen-ils.org/tag/electronic-bib-import/) (1)
* [Emerald Elephant](https://evergreen-ils.org/tag/emerald-elephant/) (1)
* [Equinox](https://evergreen-ils.org/tag/equinox/) (1)
* [event definition](https://evergreen-ils.org/tag/event-definition/) (1)
* [Everything Permission](https://evergreen-ils.org/tag/everything-permission/) (1)
* [export](https://evergreen-ils.org/tag/export/) (1)
* [Feature Update](https://evergreen-ils.org/tag/feature-update/) (1)
* [fine free](https://evergreen-ils.org/tag/fine-free/) (1)
* [FLOSS manuals](https://evergreen-ils.org/tag/floss-manuals/) (1)
* [fulfillment](https://evergreen-ils.org/tag/fulfillment/) (1)
* [Google Summer of Code](https://evergreen-ils.org/tag/google-summer-of-code/) (3)
* [Import](https://evergreen-ils.org/tag/import/) (1)
* [Interest Groups](https://evergreen-ils.org/tag/interest-groups/) (4)
* [Keynote](https://evergreen-ils.org/tag/keynote/) (2)
* [Launchpad](https://evergreen-ils.org/tag/launchpad/) (1)
* [Lightning Talks](https://evergreen-ils.org/tag/lightning-talks/) (1)
* [MARC](https://evergreen-ils.org/tag/marc/) (1)
* [Messages](https://evergreen-ils.org/tag/messages/) (1)
* [MLS](https://evergreen-ils.org/tag/mls/) (1)
* [New Developers](https://evergreen-ils.org/tag/new-devs/) (1)
* [New Features](https://evergreen-ils.org/tag/new-features/) (2)
* [Newsletter](https://evergreen-ils.org/tag/newsletter/) (1)
* [Notes](https://evergreen-ils.org/tag/notes/) (1)
* [notifications](https://evergreen-ils.org/tag/notifications/) (1)
* [OPAC](https://evergreen-ils.org/tag/opac/) (1)
* [Open Athens](https://evergreen-ils.org/tag/open-athens/) (1)
* [Open Refine](https://evergreen-ils.org/tag/open-refine/) (1)
* [OpenSRF](https://evergreen-ils.org/tag/opensrf/) (1)
* [Performance Enhancements](https://evergreen-ils.org/tag/performance-enhancements/) (1)
* [Permissions](https://evergreen-ils.org/tag/permissions/) (1)
* [pillows](https://evergreen-ils.org/tag/pillows/) (1)
* [Professional Development](https://evergreen-ils.org/tag/professional-development/) (1)
* [quick server](https://evergreen-ils.org/tag/quick-server/) (1)
* [ransomware](https://evergreen-ils.org/tag/ransomware/) (1)
* [Redis](https://evergreen-ils.org/tag/redis/) (1)
* [Reports](https://evergreen-ils.org/tag/reports/) (2)
* [Reports Interest Group](https://evergreen-ils.org/tag/reports-interest-group/) (1)
* [Roundtable](https://evergreen-ils.org/tag/roundtable/) (1)
* [Staff Client](https://evergreen-ils.org/tag/staff-client/) (1)
* [Staff Client Basics](https://evergreen-ils.org/tag/staff-client-basics/) (1)
* [Subjects Plus](https://evergreen-ils.org/tag/subjects-plus/) (1)
* [System Administration](https://evergreen-ils.org/tag/system-administration/) (1)
* [System Administration Interest Group](https://evergreen-ils.org/tag/system-administration-interest-group/) (1)
* [System Internals](https://evergreen-ils.org/tag/system-internals/) (1)
* [template](https://evergreen-ils.org/tag/template/) (1)
* [template toolkit](https://evergreen-ils.org/tag/template-toolkit/) (1)
* [third party vendor](https://evergreen-ils.org/tag/third-party-vendor/) (1)
* [Tutorial](https://evergreen-ils.org/tag/tutorial/) (1)
* [UI](https://evergreen-ils.org/tag/ui/) (1)
* [UI Design](https://evergreen-ils.org/tag/ui-design/) (1)
* [UI Interest Group](https://evergreen-ils.org/tag/ui-interest-group/) (1)
* [User Experience](https://evergreen-ils.org/tag/ux/) (2)
* [vendor](https://evergreen-ils.org/tag/vendor/) (1)
* [video tagging](https://evergreen-ils.org/tag/video-tagging/) (1)
* [welcome](https://evergreen-ils.org/tag/welcome/) (2)
* [wiki](https://evergreen-ils.org/tag/wiki/) (1)
* [XMPP](https://evergreen-ils.org/tag/xmpp/) (1)

### Organizations

* [BC Libraries Cooperative](https://evergreen-ils.org/organization/bc-libraries-cooperative/) (1)
* [Bibliomation](https://evergreen-ils.org/organization/bibliomation/) (7)
* [Boston Public Library](https://evergreen-ils.org/organization/boston-public-library/) (1)
* [CWMARS](https://evergreen-ils.org/organization/cwmars/) (3)
* [Emmaus Public Library](https://evergreen-ils.org/organization/emmaus-public-library/) (1)
* [EquinoxOLI](https://evergreen-ils.org/organization/equinoxoli/) (9)
* [Evergreen Indiana](https://evergreen-ils.org/organization/evergreen-indiana/) (3)
* [Indiana State Library](https://evergreen-ils.org/organization/indiana-state-library/) (1)
* [King County Library System](https://evergreen-ils.org/organization/king-county-library-system/) (3)
* [Missouri Evergreen](https://evergreen-ils.org/organization/missouri-evergreen/) (2)
* [Missouri Evergreen Consortium](https://evergreen-ils.org/organization/missouri-evergreen-consortium/) (1)
* [MOBIUS](https://evergreen-ils.org/organization/mobius/) (3)
* [NC Cardinal](https://evergreen-ils.org/organization/nc-cardinal/) (4)
* [NOBLE](https://evergreen-ils.org/organization/noble/) (3)
* [PaILS](https://evergreen-ils.org/organization/pails/) (4)
* [PaILS/SPARK](https://evergreen-ils.org/organization/pails-spark/) (1)
* [PINES](https://evergreen-ils.org/organization/pines/) (9)
* [SPARK](https://evergreen-ils.org/organization/spark/) (2)

### People

* [Andrea Buntz Neiman](https://evergreen-ils.org/people/andrea-buntz-neiman/) (5)
* [Angela Kilsdonk](https://evergreen-ils.org/people/angela-kilsdonk/) (2)
* [Angie Devers](https://evergreen-ils.org/people/angie-devers/) (1)
* [Benjamin Murphy](https://evergreen-ils.org/people/benjamin-murphy/) (1)
* [Bill Erickson](https://evergreen-ils.org/people/bill-erickson/) (3)
* [Blake Graham-Henderson](https://evergreen-ils.org/people/blake-graham-henderson/) (1)
* [Chris Sharp](https://evergreen-ils.org/people/chris-sharp/) (3)
* [Christine Burns](https://evergreen-ils.org/people/christine-burns/) (1)
* [Dan Scott](https://evergreen-ils.org/people/dan-scott/) (1)
* [David Leonard](https://evergreen-ils.org/people/david-leonard/) (1)
* [Dawn Dale](https://evergreen-ils.org/people/dawn-dale/) (2)
* [Debbie Luchenbill](https://evergreen-ils.org/people/debbie-luchenbill/) (2)
* [Elaine Hardy](https://evergreen-ils.org/people/elaine-hardy/) (1)
* [Elizabeth Davis](https://evergreen-ils.org/people/elizabeth-davis/) (1)
* [Elizabeth Thomsen](https://evergreen-ils.org/people/elizabeth-thomsen/) (2)
* [Erica Reynolds](https://evergreen-ils.org/people/erica-reynolds/) (1)
* [Galen Charlton](https://evergreen-ils.org/people/galen-charlton/) (2)
* [George Duimovich](https://evergreen-ils.org/people/george-duimovich/) (1)
* [Gina Monti](https://evergreen-ils.org/people/gina-monti/) (4)
* [Jane Sandberg](https://evergreen-ils.org/people/jane-sandberg/) (1)
* [Jeanette Lundgren](https://evergreen-ils.org/people/jeanette-lundgren/) (1)
* [Jennifer Pringle](https://evergreen-ils.org/people/jennifer-pringle/) (1)
* [Jennifer Weston](https://evergreen-ils.org/people/jennifer-weston/) (4)
* [Jessamyn West](https://evergreen-ils.org/people/jessamyn-west/) (1)
* [Jessica Woolford](https://evergreen-ils.org/people/jessica-woolford/) (4)
* [Joe Lucia](https://evergreen-ils.org/people/joe-lucia/) (1)
* [Juris Poseika](https://evergreen-ils.org/people/juris-poseika/) (1)
* [Kate Coleman](https://evergreen-ils.org/people/kate-coleman/) (1)
* [Katherine Dannehl](https://evergreen-ils.org/people/katherine-dannehl/) (1)
* [Katie Greenleaf Martin](https://evergreen-ils.org/people/katie-greenleaf-martin/) (3)
* [Ken Cox](https://evergreen-ils.org/people/ken-cox/) (1)
* [Mark Noble](https://evergreen-ils.org/people/mark-noble/) (1)
* [Mary Llewellyn](https://evergreen-ils.org/people/mary-llewellyn/) (1)
* [Melissa Macomber](https://evergreen-ils.org/people/melissa-macomber/) (1)
* [Michele Morgan](https://evergreen-ils.org/people/michele-morgan/) (1)
* [Michelle Morgan](https://evergreen-ils.org/people/michelle-morgan/) (1)
* [Mickey Coalwell](https://evergreen-ils.org/people/mickey-coalwell/) (1)
* [Mike Rylander](https://evergreen-ils.org/people/mike-rylander/) (1)
* [Paula Allen](https://evergreen-ils.org/people/paula-allen/) (1)
* [Rogan Hamby](https://evergreen-ils.org/people/rogan-hamby/) (5)
* [Ruth Frasur Davis](https://evergreen-ils.org/people/ruth-frasur-davis/) (6)
* [Scott Johnson](https://evergreen-ils.org/people/scott-johnson/) (1)
* [Stephanie Leary](https://evergreen-ils.org/people/stephanie-leary/) (1)
* [Terran McCanna](https://evergreen-ils.org/people/terran-mccanna/) (1)
* [Tiffany Little](https://evergreen-ils.org/people/tiffany-little/) (2)
* [Veethika Mishra](https://evergreen-ils.org/people/veethika-mishra/) (1)

### About Evergreen

This is the project site for Evergreen, a highly-scalable software for libraries that helps library patrons find library materials, and helps libraries manage, catalog, and circulate those materials, no matter how large or complex the libraries.
© 2008-2020 GPLS and others. Evergreen is open source software, freely licensed under GNU GPLv2 or later.
The Evergreen Project is a 501(c)3 nonprofit organization.

![](https://i0.wp.com/www.paypal.com/en_US/i/scr/pixel.gif?resize=1%2C1&ssl=1)

### Community Calendar

* January 27, 12am EST
  [Community Bug Squashing Week](#W473fb4d516fcc4_1_67g7sh9a5a6lar0e8abiagbgma)
* January 27, 2pm EST
  [Collaborative code review / office hours](#W473fb4d516fcc4_2_1_6hq2bupg3vvbmmg7a116p6nmur)Hi Evergreen Community,

  You are cordially invited to weekly collaborative code review sessions.  In these, we'll meet for an hour to review recent pull requests, read code, run automated tests, try patches out, provide feedback, merge code that is ready... all the best stuff!

  We can meet at [https://princeton.zoom.us/my/sandbergja](https://www.google.com/url?q=https://princeton.zoom.us/my/sandbergja&sa=D&source=calendar&ust=1734889895666843&usg=AOvVaw2J91JLVUDQQCkv0nBR6zY3).

  All skill levels welcome!  You can join for as many or as few sessions as you'd like.  If you have submitted a pull request that has been languishing and needs some review, please bring that along too.  We're going for a fun, positive, and social tone. :-D

  This is not to take the place of any of the other great ways that developers can get feedback on their work (e.g. bug squashing week, the new developers working group, typical review process), just a fun supplement.

  Hope to see you there,

    -Jane
     https://princeton.zoom.us/my/sandbergja
* January 28, 3pm EST
  [Permissions Working Group Meeting](#W473fb4d516fcc4_3_1_4eoee42g7lfksdjpokesj54rhq)Join with Google Meet: https://meet.google.com/pyh-ifdw-yur
  Or dial: (US) +1 402-282-0229 PIN: 590248061#
  More phone numbers: https://tel.meet/pyh-ifdw-yur?pin=8085950378406&hs=7

  Learn more about Meet at: https://support.google.com/a/users/answer/9282720
* January 29, 2pm EST
  [Reports Interest Group Meeting](#W473fb4d516fcc4_4_1_43kntgspof547u95pcu784eb16R20230329T180000)
* January 29, 3pm EST
  [Authorities Working Group](#W473fb4d516fcc4_5_2ljgigeskl33gufns8oc5kudd5R20240711T180000)January topic: choosing dates for recurring meetings in 2025 -- and planning a community informational session in the spring.

  Evergreen Authorities Working Group - Everyone is welcome!
  Find out more on AWG Wiki page: <https://wiki.evergreen-ils.org/doku.php?id=cataloging:awg>

  Zoom Meeting Link: <https://us06web.zoom.us/j/84539583027?pwd=WIZbVhwyUJ0EDsY08lyLlwQCLZqoPN.1>

  Meeting ID: 845 3958 3027

  Passcode: 757262

  Want to dial into the call using your phone? Find your local number: <https://us06web.zoom.us/u/kA6oWqMo9>
* January 30, 2pm EST
  [New Devs Special BSW Session](#W473fb4d516fcc4_6_5cciqumneffreqbqlv950kc125)

  Thursday, January 30 · 2:00 – 4:00pm
  Time zone: America/New\_York
  Google Meet joining info
  Video call link: <https://meet.google.com/knx-mynz-xpn>
  Or dial: ‪(US) +1 320-302-2820‬ PIN: ‪555 187 560‬#
  More phone numbers: <https://tel.meet/knx-mynz-xpn?pin=8873967120208>

[More events →](https://calendar.google.com/calendar/embed?src=c_05a766b099f2c38cb45922aee618bdc832f8cd5b42e89eb7ff592fca4be827a1%40group.calendar.google.com)
### Community Links

* [Evergreen Bug Tracker](https://launchpad.net/evergreen)
* [Evergreen on Open HUB](https://www.openhub.net/p/evergreen)
* [Evergreen Wiki](https://wiki.evergreen-ils.org)
* [Git Repositories](http://git.evergreen-ils.org)
* [Join IRC!](https://web.libera.chat/#evergreen)
* [IRC Logs](http://irc.evergreen-ils.org/evergreen/today)
* [Official Documentation](http://docs.evergreen-ils.org)

© 2024 GPLS and others. Evergreen is open source software, freely licensed under GNU GPLv2 or later.

The Evergreen Project is a 501(c)3 nonprofit organization.

[Log in](https://evergreen-ils.org/wp-login.php)



=== Content from evergreen-ils.org_f199e12c_20250125_023920.html ===
commit 59a3478b091d2b88f27ae5160d60e052a1e493ba
Author: Dan Wells
Date: Mon Feb 24 12:09:57 2014 -0500
Bump OpenILS.pm version
Signed-off-by: Dan Wells
1 1 Open-ILS/src/perlmods/lib/OpenILS.pm
commit e7a71e3f44562d1f630af2daa3cb6cd5bb74c69b
Author: Jason Stephenson
Date: Thu Feb 19 11:17:08 2015 -0500
LP#1424755: Add IMPORTANT SECURITY INFORMATION release note.
Signed-off-by: Jason Stephenson
Signed-off-by: Galen Charlton
Signed-off-by: Ben Shum
9 0 docs/RELEASE\_NOTES\_NEXT/security-bug-fix.txt
create mode 100644 docs/RELEASE\_NOTES\_NEXT/security-bug-fix.txt
commit a18f1a430fc9de5096290ecff81ede15672edd12
Author: Jason Stephenson
Date: Wed Feb 18 16:28:31 2015 -0500
LP#1424755: Org Unit Setting view permissions can be bypassed
Fix private org. unit setting leakage by forcing the $auth argument
to true if not passed in when open-ils.actor.ou\_setting.ancestor\_default
or open-ils.actor.ou\_setting.ancestor\_default.batch are called.
Other than a change to the desc of the public methods to reflect that
they now check permissions if permissions are required, there are no
required api changes to the back or the front ends.
Signed-off-by: Jason Stephenson
Signed-off-by: Galen Charlton
Signed-off-by: Ben Shum
10 4 Open-ILS/src/perlmods/lib/OpenILS/Application/Actor.pm
commit a3e8d068781a3e1b4b638861797e3a06fb455a45
Author: Jason Stephenson
Date: Tue Feb 24 14:05:16 2015 -0500
LP#1206589: Temporary Fix for Org. Unit Settings History Bug
This commit makes two changes to the coustl IDL entry.
1. It adds a retrieve permission of STAFF\_LOGIN. This at least
requires someone with staff permission to be able to view settings
history.
2. It fixed the primary key field from date\_applied to id. The
prior setting was just an outright error.
NOTE: This is intended as a short term fix for the Library Settings
Editor history feature.
Signed-off-by: Jason Stephenson
Signed-off-by: Ben Shum
2 2 Open-ILS/examples/fm\_IDL.xml
commit 9fac38cc9cb52faf4038b04ebbe2389c60e64b22
Author: Dan Wells
Date: Tue Mar 3 15:15:43 2015 -0500
Forward port 2.6.5 and 2.6.6 upgrade scripts
Signed-off-by: Dan Wells
237 0 Open-ILS/src/sql/Pg/version-upgrade/2.6.4-2.6.5-upgrade-db.sql
733 0 Open-ILS/src/sql/Pg/version-upgrade/2.6.5-2.6.6-upgrade-db.sql
create mode 100644 Open-ILS/src/sql/Pg/version-upgrade/2.6.4-2.6.5-upgrade-db.sql
create mode 100644 Open-ILS/src/sql/Pg/version-upgrade/2.6.5-2.6.6-upgrade-db.sql
commit 7f2a49387141b5c98cd9e84aee54d9d902d81442
Author: Kathy Lussier
Date: Mon Mar 2 15:06:03 2015 -0500
lp1427331: Remove relator information from author links
Removes the display and linking of relator information from the author field
on the search results page. The display of subfield e was limiting the number
or results retrieved when clicking these links.
Signed-off-by: Kathy Lussier
Signed-off-by: Dan Scott
1 1 Open-ILS/src/templates/opac/parts/misc\_util.tt2
commit 81ce6b4a3ca2826d6c7305f8525fe63cd919a779
Author: Dan Wells
Date: Tue Mar 3 12:11:35 2015 -0500
Revert LP#1205072
It was decided that these changes caused too much potential for
confusion, and would be better served by a simultaneous change to
making 'granularity' case insensitive. Pulling back for now.
Signed-off-by: Dan Wells
1 1 Open-ILS/src/support-scripts/action\_trigger\_runner.pl.in
5 8 Open-ILS/src/templates/conify/global/action\_trigger/event\_definition.tt2
0 1 Open-ILS/web/js/ui/default/conify/global/action\_trigger/event\_definition.js
0 13 docs/RELEASE\_NOTES\_NEXT/Administration/action-trigger-granularity.txt
2 2 docs/admin/actiontriggers.txt
delete mode 100644 docs/RELEASE\_NOTES\_NEXT/Administration/action-trigger-granularity.txt
commit de221c982d60210bd96b860c6ccb39d7d1d9c55a
Author: Galen Charlton
Date: Thu Nov 13 09:42:45 2014 -0800
LP#1287370: minor textual cleanup
- remove trailing spaces
- remove debug logging
Signed-off-by: Galen Charlton
Signed-off-by: Erica Rohlfs
Signed-off-by: Mike Rylander
Signed-off-by: Ben Shum
4 5 Open-ILS/web/js/dojo/openils/widget/AutoGrid.js
1 1 Open-ILS/web/js/ui/default/acq/financial/list\_funds.js
commit 9d211e172b2695a055be446a5d51ca9bb4c9ae92
Author: Bill Erickson
Date: Tue Aug 12 12:03:05 2014 -0400
LP#1287370: apply filter/offset persistence to the fund search page
This patch completes the AutoGrid work and applies the
filter & offset persistence to the fund search page.
Signed-off-by: Bill Erickson
Signed-off-by: Galen Charlton
Signed-off-by: Erica Rohlfs
Signed-off-by: Mike Rylander
Signed-off-by: Ben Shum
1 0 Open-ILS/src/templates/acq/fund/list.tt2
46 21 Open-ILS/web/js/dojo/openils/widget/AutoGrid.js
18 2 Open-ILS/web/js/ui/default/acq/financial/list\_funds.js
commit e3f0ee293677af324193de63978aecaab4e2f0a1
Author: Bill Erickson
Date: Mon Aug 11 16:45:21 2014 -0400
LP#1287370: allow AutoGrid to persist filter state and page offset
By turning on a new AutoGrid option called urlNavigation,
the current filter and offset is stored in a URL parameter
called djgridops. This permits using the back button
to return to an AutoGrid page at the place in the search
results where the user left it.
Signed-off-by: Bill Erickson
Signed-off-by: Galen Charlton
Signed-off-by: Erica Rohlfs
Signed-off-by: Mike Rylander
Signed-off-by: Ben Shum
58 7 Open-ILS/web/js/dojo/openils/widget/AutoGrid.js
commit 052243f109b9005e310ba262b7c5c4d15f3900e8
Author: Adam Bowling
Date: Tue Jan 20 16:54:11 2015 -0500
LP #1406350 Mobile Device Navigation Issue Fix for Shelf Browser
Currently, when a browser window is narrowed too much, whether
in a mobile browser, or on a desktop or laptop machine, the
"Previous Page" and "Next Page" navigation links disappear. The
only solution that seems to solve this is by removing the
"THEAD" element from the shelf browser table.
This patch removes that tag, adds a new row to imitate a new
border as existed before, and modifies the CSS in .../opac/
css/style.css.tt2 to address that difference.
Signed-off-by: Adam Bowling
Signed-off-by: Yamil Suarez
Signed-off-by: Ben Shum
3 1 Open-ILS/src/templates/opac/css/style.css.tt2
3 2 Open-ILS/src/templates/opac/parts/record/cnbrowse.tt2
commit 49fbb02e6d3dc8acab94307c87cc0c9149c0e857
Author: Remington Steed
Date: Mon Mar 2 16:54:56 2015 -0500
LP#1205072: Correct and clarify the upgrade notes
Signed-off-by: Remington Steed
Signed-off-by: Dan Wells
5 3 docs/RELEASE\_NOTES\_NEXT/Administration/action-trigger-granularity.txt
commit d8635e5fd1e2aca43372fdd67341ea0039c05582
Author: Josh Stompro
Date: Tue Jan 13 13:36:40 2015 -0600
LP#1205072 - Assorted fixes for action trigger granularity settings
- Added "weekdays" option to match up with example crontab file
- Change granularity example back to lowercase
- Change granularity labels to lowercase in the docs
Signed-off-by: Josh Stompro
Signed-off-by: Remington Steed
Signed-off-by: Dan Wells
1 1 Open-ILS/src/support-scripts/action\_trigger\_runner.pl.in
1 0 Open-ILS/src/templates/conify/global/action\_trigger/event\_definition.tt2
2 2 docs/admin/actiontriggers.txt
commit 133d896417cbfa18b47460fae26819802f08aa53
Author: Bill Erickson
Date: Tue Dec 2 15:00:22 2014 -0500
LP#1205072 A/T granularity upgrade notes
Signed-off-by: Bill Erickson
Signed-off-by: Remington Steed
Signed-off-by: Dan Wells
11 0 docs/RELEASE\_NOTES\_NEXT/Administration/action-trigger-granularity.txt
create mode 100644 docs/RELEASE\_NOTES\_NEXT/Administration/action-trigger-granularity.txt
commit 3fa57743903ca60106418197fbd1bad1208c5d7d
Author: Bill Erickson
Date: Wed Nov 26 14:31:41 2014 -0500
LP#1205072 A/T granularity UI sane default, honors case
Present A/T granularity options as untranslated, lower-case strings to
match the crontab examples. Also, honor alternate case variations for
granularity values so that "Daily" and "daily" are both seprate, valid
options.
Signed-off-by: Bill Erickson
Signed-off-by: Remington Steed
Signed-off-by: Dan Wells
7 5 Open-ILS/src/templates/conify/global/action\_trigger/event\_definition.tt2
1 0 Open-ILS/web/js/ui/default/conify/global/action\_trigger/event\_definition.js
commit c3f01cbe10d8fba01a061e4f1c2ec2b240f787c6
Author: Mike Rylander
Date: Tue Mar 4 11:31:13 2014 -0500
LP#1287791: Restrict authority browse to controlled subfields
Back in bug 1175308 I added some logic that improves the behavior
of the MARC editor's right-click authority popup. Now we need to
go a little farther and adjust that logic to be more careful about
which subfields it uses to browse for authority records. Specifically,
it should only use controlled subfields.
Signed-off-by: Mike Rylander
Signed-off-by: Remington Steed
Signed-off-by: Dan Wells
19 1 Open-ILS/xul/staff\_client/server/cat/marcedit.js
commit c0903852267a70414ecdc69a56caf20cf076df56
Author: Galen Charlton
Date: Mon Mar 2 14:56:34 2015 +0000
LP#1155313: fix mangling of schema upgrade script name
Signed-off-by: Galen Charlton
25 0 Open-ILS/src/sql/Pg/upgrade/0914.schema.lpad-number-repair.sql
0 25 Open-ILS/src/sql/Pg/upgrade/0914.schema.redo\_vandelay\_merge\_profile\_sequence.sql
create mode 100644 Open-ILS/src/sql/Pg/upgrade/0914.schema.lpad-number-repair.sql
delete mode 100644 Open-ILS/src/sql/Pg/upgrade/0914.schema.redo\_vandelay\_merge\_profile\_sequence.sql
commit e600f9f1d8324a804adab0cc96de6d610d97db0d
Author: Galen Charlton
Date: Mon Mar 2 14:20:55 2015 +0000
LP#1155313: recalculate normalized labels during upgrade
Signed-off-by: Galen Charlton
4 0 Open-ILS/src/sql/Pg/upgrade/0914.schema.redo\_vandelay\_merge\_profile\_sequence.sql
commit 6d4a4b1f3dbc977b7bfe30aa18fa0d7c7af0a607
Author: Galen Charlton
Date: Mon Mar 2 14:05:52 2015 +0000
LP#1155313: pin upgrade script to 0914
Signed-off-by: Galen Charlton
1 1 Open-ILS/src/sql/Pg/002.schema.config.sql
21 0 Open-ILS/src/sql/Pg/upgrade/0914.schema.redo\_vandelay\_merge\_profile\_sequence.sql
0 19 Open-ILS/src/sql/Pg/upgrade/XXXX.schema.lpad-number-repair.sql
create mode 100644 Open-ILS/src/sql/Pg/upgrade/0914.schema.redo\_vandelay\_merge\_profile\_sequence.sql
delete mode 100644 Open-ILS/src/sql/Pg/upgrade/XXXX.schema.lpad-number-repair.sql
commit 8d363f3abcb0ed70095b019e1798fc52f40e574d
Author: Galen Charlton
Date: Mon Mar 2 14:02:23 2015 +0000
LP#1155313: fix copy-and-paste-o in test case
Signed-off-by: Galen Charlton
1 1 Open-ILS/src/sql/Pg/t/lpad\_number\_substrings.pg
commit 408a6c05951465cb976943597b35196fe81fae93
Author: Dan Pearl
Date: Mon Jan 5 13:28:13 2015 -0500
LP#1155313: upgrade script and pgTAP tests for monograph\_part label normalization fix
Signed-off-by: Daniel Pearl
Signed-off-by: Galen Charlton
41 0 Open-ILS/src/sql/Pg/t/lpad\_number\_substrings.pg
19 0 Open-ILS/src/sql/Pg/upgrade/XXXX.schema.lpad-number-repair.sql
create mode 100644 Open-ILS/src/sql/Pg/t/lpad\_number\_substrings.pg
create mode 100644 Open-ILS/src/sql/Pg/upgrade/XXXX.schema.lpad-number-repair.sql
commit b5ad7edb1efe254495e39cf028202b9cc279ad79
Author: Dan Pearl
Date: Fri Mar 15 15:04:37 2013 -0400
LP#1155313: Repair generation of label\_sortkey for monograph\_part entries
The evergreen.lpad\_number\_substrings function attempts to codify numeric
fields within labels. It does this by finding the strings, padding them
to a given size, and replacing them in the source string. For instance:
3 => 0000000003
15.4 => 00000000150000000004
The algorithm was fooled by repeated characters, like in 15.1:
15.1 => 00000000000000000150000000001 INCORRECT
This change will result in the correct value.
Signed-off-by: Dan Pearl
Signed-off-by: Galen Charlton
6 6 Open-ILS/src/sql/Pg/002.functions.config.sql
commit 411ccdf421424415a6f82bcbe064ae0a884bac3c
Author: Josh Stompro
Date: Thu Jan 15 20:03:55 2015 -0600
LP#1395842: fix labels for A/T environment and parameter ID fields
Signed-off-by: Josh Stompro
Signed-off-by: Galen Charlton
2 2 Open-ILS/examples/fm\_IDL.xml
commit 81fe9936fab06fa5259f713c02a71b75212fba72
Author: Ben Shum
Date: Sat Feb 28 12:24:31 2015 -0500
LP#1426133: followup fix seed data sequence
Signed-off-by: Ben Shum
1 1 Open-ILS/src/sql/Pg/950.data.seed-values.sql
commit 7f33a27de0fd6362e5cb63252f9f95c511336126
Author: Jason Etheridge
Date: Thu Feb 26 09:26:47 2015 -0500
LP#1425967: look for Business::CreditCard in settings-tester.pl
and not Business::CreditCard::Object
Signed-off-by: Jason Etheridge
Signed-off-by: Ben Shum
1 1 Open-ILS/src/support-scripts/settings-tester.pl
commit 26cffa596d4a340f2a1cc801bde9423ed85cc5c6
Author: Ben Shum
Date: Fri Feb 27 10:25:48 2015 -0500
LP#1426133: Stamping upgrade script for set merge\_profile\_id\_seq
Signed-off-by: Ben Shum
Conflicts:
Open-ILS/src/sql/Pg/002.schema.config.sql
1 1 Open-ILS/src/sql/Pg/002.schema.config.sql
24 0 Open-ILS/src/sql/Pg/upgrade/0913.schema.redo\_vandelay\_merge\_profile\_sequence.sql
0 24 Open-ILS/src/sql/Pg/upgrade/XXXX.schema.redo\_vandelay\_merge\_profile\_sequence.sql
create mode 100644 Open-ILS/src/sql/Pg/upgrade/0913.schema.redo\_vandelay\_merge\_profile\_sequence.sql
delete mode 100644 Open-ILS/src/sql/Pg/upgrade/XXXX.schema.redo\_vandelay\_merge\_profile\_sequence.sql
commit c86a5ade5cef4b3789c5108b0f56d17d846d7224
Author: Remington Steed
Date: Thu Feb 26 16:21:48 2015 -0500
LP#1426133: Set merge\_profile\_id\_seq explicitly
Many database tables need to explicitly set the id sequence (often to
100) to provide room for stock data with static ids. This commit does so
for vandelay.merge\_profile, and also updates the ids of any non-stock
profiles (both in the merge\_profile table and in related settings).
Signed-off-by: Remington Steed
Signed-off-by: Ben Shum
2 0 Open-ILS/src/sql/Pg/950.data.seed-values.sql
24 0 Open-ILS/src/sql/Pg/upgrade/XXXX.schema.redo\_vandelay\_merge\_profile\_sequence.sql
create mode 100644 Open-ILS/src/sql/Pg/upgrade/XXXX.schema.redo\_vandelay\_merge\_profile\_sequence.sql
commit c66b5864ba730eb018d766e5efe9eabb97756cf5
Author: Dan Wells
Date: Thu Feb 12 13:08:52 2015 -0500
LP#1425191 Restore summarization of serial units
In a previous commit, code was added for force summaries to be limited
to a certain type (to prevent cross type contamination of summaries).
This had the negative side-effect of preventing summaries on units, as
the units were not requesting a 'type' for their summary.
While we could force the unit code to send a type, it seemed generally
more flexible to restore the removed support for returning all summary
information in the absense of a requested type. This could lead to
cross-type summaries for units, but that is a larger issue altogether
(i.e. how we can properly support cross-type units at all).
Signed-off-by: Dan Wells
Signed-off-by: Kathy Lussier
12 1 Open-ILS/src/perlmods/lib/OpenILS/Application/Serial.pm
commit 8101fbb7374f93d88626104d91efbe048d8e6b1f
Author: Kathy Lussier
Date: Wed Feb 25 15:20:51 2015 -0500
lp1373203: Allow users to escape metarecord holds (backport version)
Provides a means for users to escape a metarecord hold if they accidentally
clicked the Advanced Hold Options link. A "Go Back" link will be
provided to allow the user to return to a title hold. If the hold starts as a
metarecord hold, this link won't display since we don't know which bib the
patron wants.
Also fixes an issue where the hold cancel button always returned the user to
the previous screen.
Signed-off-by: Kathy Lussier
Signed-off-by: Ben Shum
10 3 Open-ILS/src/templates/opac/parts/place\_hold.tt2
commit bd7fdad52897c6288406a95b0f78a76def9c221c
Author: Remington Steed
Date: Tue Feb 24 13:25:16 2015 -0500
LP#957466: Fix invalid MARCXML syntax
This commit fixes some invalid MARCXML syntax, and also makes the XPath
query more general to allow for namespaces on the tags.
Signed-off-by: Remington Steed
Signed-off-by: Dan Wells
2 2 Open-ILS/src/perlmods/lib/OpenILS/Application/AppUtils.pm
commit 301b0040a200b122e47d05463c79c6117f681ff1
Author: Remington Steed
Date: Thu Feb 19 10:03:18 2015 -0500
LP#957466: Added pgTAP test for db function change
Signed-off-by: Remington Steed
Signed-off-by: Dan Wells
80 0 Open-ILS/src/sql/Pg/t/regress/lp957466\_update\_date\_and\_source.pg
create mode 100644 Open-ILS/src/sql/Pg/t/regress/lp957466\_update\_date\_and\_source.pg
commit 3270e416c780e706cb54adf43e770ba04b23b2ea
Author: Jason Stephenson
Date: Wed Feb 18 10:13:56 2015 -0500
LP#957466: Stamping Upgrade Script
Signed-off-by: Jason Stephenson
Conflicts:
Open-ILS/src/sql/Pg/002.schema.config.sql
Signed-off-by: Dan Wells
1 1 Open-ILS/src/sql/Pg/002.schema.config.sql
66 0 Open-ILS/src/sql/Pg/upgrade/0908.function.vandelay-overlay\_bib\_record.sql
0 66 Open-ILS/src/sql/Pg/upgrade/XXXX.function.vandelay-overlay\_bib\_record.sql
create mode 100644 Open-ILS/src/sql/Pg/upgrade/0908.function.vandelay-overlay\_bib\_record.sql
delete mode 100644 Open-ILS/src/sql/Pg/upgrade/XXXX.function.vandelay-overlay\_bib\_record.sql
commit a3b416b1e4e633053dd776ff2bf8d59862c52a14
Author: Jason Stephenson
Date: Fri Feb 13 12:22:19 2015 -0500
LP#957466 Vandelay set the 905$u to current user if not defined
This version only adds a 905$u if none already exist in the document. It
does so by creating a new 905 tag with subfield u. It does not add on
to any possibly existing 905 tag that does not have a subfield u.
This will cause the code in the previous commit to trigger and update the
appropriate fields in biblio.record\_entry.
Signed-off-by: Jason Stephenson
Signed-off-by: Dan Wells
24 0 Open-ILS/src/perlmods/lib/OpenILS/Application/AppUtils.pm
5 0 Open-ILS/src/perlmods/lib/OpenILS/Application/Vandelay.pm
commit cf2aeda73ea429c26ff6a224320104d01816ac46
Author: Remington Steed
Date: Mon Oct 13 12:22:32 2014 -0400
LP#957466: Update editor/edit\_date/source on overlay
This commit does three things.
1. It removes some declared variables that are never used in this
function.
2. It updates the bib record edit\_date field (along with the editor) if
an editor is found in the MARC. If an editor is not found (or doesn't
match an Evergreen user), it seems best to leave the edit\_date
unchanged so as not to imply that the previous editor is responsible for
the newest edit.
3. If a bib source is chosen in the vandelay importer UI, it updates the
bib record with the source. To access this field, the reference to table
"queued\_record" is replaced by its child table "queued\_bib\_record".
Since the new table is a child of the other, all of the other needed
values are still available.
Signed-off-by: Remington Steed
Signed-off-by: Jason Stephenson
Signed-off-by: Martha Driscoll
Signed-off-by: Dan Wells
17 9 Open-ILS/src/sql/Pg/012.schema.vandelay.sql
66 0 Open-ILS/src/sql/Pg/upgrade/XXXX.function.vandelay-overlay\_bib\_record.sql
create mode 100644 Open-ILS/src/sql/Pg/upgrade/XXXX.function.vandelay-overlay\_bib\_record.sql
commit cd41e5ca11f39894196bc5021e4aad3225b99898
Author: Galen Charlton
Date: Mon Feb 23 20:25:02 2015 +0000
LP#1154579: explicitly alert if copy location failed to be deleted
This patch adds an alert if the act of deleting a copy
location in the staff interface fails -- which would
most commonly happen if there are still active items
attached to the location to be deleted.
Signed-off-by: Galen Charlton
Signed-off-by: Ben Shum
4 1 Open-ILS/xul/staff\_client/server/admin/copy\_locations.js
commit 9a3d9d67f98907527f8c6f45b1660124d94f74b8
Author: Galen Charlton
Date: Thu Feb 5 16:52:36 2015 +0000
LP#904581: when calculating hold status, be more careful about fetching transits
This patch fixes a problem where if a hold meets the following
criteria, an "Invalid date format: at /usr/share/perl5/Error.pm"
error can be thrown when fetching its details:
- the hold has a captured item
- the captured item has status 8 (on hold shelf)
- there is another item that is currently in transit to fill the hold
- the pickup library (or one of its ancestors) has the
circ.hold\_shelf\_status\_delay library setting set.
Signed-off-by: Galen Charlton
Signed-off-by: Ben Shum
5 1 Open-ILS/src/perlmods/lib/OpenILS/Application/Circ/Holds.pm
commit 48d3d82303d05c72110c83cdd92aa657222b2eab
Author: Galen Charlton
Date: Mon Feb 23 19:12:30 2015 +0000
Revert "LP#1419813 Fix default joins for config.rule\_age\_hold\_protection."
This reverts commit 8d8068f391b1bb6e363c410d8fe9af09cc5898f9.
4 4 Open-ILS/examples/fm\_IDL.xml
commit 7b95863d9ad82224eb08ad4d64361adaaf351202
Author: Galen Charlton
Date: Thu Feb 19 15:59:33 2015 +0000
LP#1418772: (follow-up) tweak undef-edness check
Use the Perl defined() function rather than "eq undef"
to avoid logging warnings about undefined values.
Signed-off-by: Galen Charlton
1 1 Open-ILS/src/perlmods/lib/OpenILS/WWW/EGCatLoader/Util.pm
commit e0f739cf93d84badbd6a572feb06d77d964c35e0
Author: Steven Chan
Date: Mon Jul 22 12:39:48 2013 -0700
LP#1418772: Avoid internal server error on viewing full record when copy create\_date is null
In the TPAC client, when it tries to show record details containing a copy
record with no create date, it shows an Internal Server Error instead.
1. The error is caused by trying to execute the parse\_datetime() method
in the parse\_date() function in the WWW/EGCatLoader/util.pm module with
an empty date string. The function will normally translate a datetime
string from the database to a datetime string that is formatted for TPAC
templates. The fix is to not execute parse\_datetime() and just return
an empty string.
2. In the record/copy\_table.tt2 template, if an empty datetime string is
the value for copy\_info.create\_date, the format() method of the Date
plugin will show the current datetime by default. The fix is to show '-'
in its place, replicating the same template logic as for
copy\_info.due\_date.
Signed-off-by: Jeff Davis
Conflicts:
Open-ILS/src/templates/opac/parts/record/copy\_table.tt2
3 0 Open-ILS/src/perlmods/lib/OpenILS/WWW/EGCatLoader/Util.pm
10 4 Open-ILS/src/templates/opac/parts/record/copy\_table.tt2
commit 8d8068f391b1bb6e363c410d8fe9af09cc5898f9
Author: Chris Sharp
Date: Mon Feb 9 09:24:11 2015 -0500
LP#1419813 Fix default joins for config.rule\_age\_hold\_protection.
config.rule\_age\_hold\_protection had a "has\_a" relationship
to several copy and copy-like sources when age protection
is optional. Changing those to "might\_have" to allow left
joins by default.
Signed-off-by: Chris Sharp
Signed-off-by: Galen Charlton
4 4 Open-ILS/examples/fm\_IDL.xml

