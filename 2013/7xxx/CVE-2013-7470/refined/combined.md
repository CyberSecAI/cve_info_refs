=== Content from github.com_ef030886_20250125_020646.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ftorvalds%2Flinux%2Fcommit%2Ff2e5ddcc0d12f9c4c7b254358ad245c9dddce13b)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ftorvalds%2Flinux%2Fcommit%2Ff2e5ddcc0d12f9c4c7b254358ad245c9dddce13b)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=torvalds%2Flinux)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[torvalds](/torvalds)
/
**[linux](/torvalds/linux)**
Public

* [Notifications](/login?return_to=%2Ftorvalds%2Flinux) You must be signed in to change notification settings
* [Fork
  54.9k](/login?return_to=%2Ftorvalds%2Flinux)
* [Star
   186k](/login?return_to=%2Ftorvalds%2Flinux)

* [Code](/torvalds/linux)
* [Pull requests
  437](/torvalds/linux/pulls)
* [Actions](/torvalds/linux/actions)
* [Projects
  0](/torvalds/linux/projects)
* [Security](/torvalds/linux/security)
* [Insights](/torvalds/linux/pulse)

Additional navigation options

* [Code](/torvalds/linux)
* [Pull requests](/torvalds/linux/pulls)
* [Actions](/torvalds/linux/actions)
* [Projects](/torvalds/linux/projects)
* [Security](/torvalds/linux/security)
* [Insights](/torvalds/linux/pulse)

## Commit

[Permalink](/torvalds/linux/commit/f2e5ddcc0d12f9c4c7b254358ad245c9dddce13b)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

net: fix cipso packet validation when !NETLABEL

[Browse files](/torvalds/linux/tree/f2e5ddcc0d12f9c4c7b254358ad245c9dddce13b)
Browse the repository at this point in the history

```
When CONFIG_NETLABEL is disabled, the cipso_v4_validate() function could loop
forever in the main loop if opt[opt_iter +1] == 0, this will causing a kernel
crash in an SMP system, since the CPU executing this function will
stall /not respond to IPIs.

This problem can be reproduced by running the IP Stack Integrity Checker
(<http://isic.sourceforge.net>) using the following command on a Linux machine
connected to DUT:

"icmpsic -s rand -d <DUT IP address> -r 123456"
wait (1-2 min)

Signed-off-by: Seif Mazareeb <seif@marvell.com>
Acked-by: Paul Moore <paul@paul-moore.com>
Signed-off-by: David S. Miller <davem@davemloft.net>
```

* Loading branch information

[![@davem330](https://avatars.githubusercontent.com/u/1053866?s=40&v=4)](/davem330)

Seif Mazareeb
authored and
[davem330](/torvalds/linux/commits?author=davem330 "View all commits by davem330")
committed
Oct 19, 2013

1 parent
[90c6bd3](/torvalds/linux/commit/90c6bd34f884cd9cee21f1d152baf6c18bcac949)

commit f2e5ddc

Showing
**1 changed file**
with
**4 additions**
and
**2 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

## There are no files selected for viewing

6 changes: 4 additions & 2 deletions

6
[include/net/cipso\_ipv4.h](#diff-843dfc067d58618141e2c5529e7896572652794b75e62a06121ea8e02aac87c6 "include/net/cipso_ipv4.h")

Show comments

[View file](/torvalds/linux/blob/f2e5ddcc0d12f9c4c7b254358ad245c9dddce13b/include/net/cipso_ipv4.h)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -290,6 +290,7 @@ static inline int cipso\_v4\_validate(const struct sk\_buff \*skb, |
|  |  | unsigned char err\_offset = 0; |
|  |  | u8 opt\_len = opt[1]; |
|  |  | u8 opt\_iter; |
|  |  | u8 tag\_len; |
|  |  |  |
|  |  | if (opt\_len < 8) { |
|  |  | err\_offset = 1; |
| Expand All | | @@ -302,11 +303,12 @@ static inline int cipso\_v4\_validate(const struct sk\_buff \*skb, |
|  |  | } |
|  |  |  |
|  |  | for (opt\_iter = 6; opt\_iter < opt\_len;) { |
|  |  | if (opt[opt\_iter + 1] > (opt\_len - opt\_iter)) { |
|  |  | tag\_len = opt[opt\_iter + 1]; |
|  |  | if ((tag\_len == 0) || (opt[opt\_iter + 1] > (opt\_len - opt\_iter))) { |
|  |  | err\_offset = opt\_iter + 1; |
|  |  | goto out; |
|  |  | } |
|  |  | opt\_iter += opt[opt\_iter + 1]; |
|  |  | opt\_iter += tag\_len; |
|  |  | } |
|  |  |  |
|  |  | out: |
| Expand Down | |  |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `f2e5ddc`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ftorvalds%2Flinux%2Fcommit%2Ff2e5ddcc0d12f9c4c7b254358ad245c9dddce13b) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from www.arista.com_9616398d_20250125_020649.html ===


* [Login](/en/login)

 [Wi-Fi Launchpad](https://login.wifi.arista.com/cas/login)
[Community Central](/community/community-forum)
 English

* [English](/en/support/advisories-notices/security-advisory)
* [日本語](/jp/support/advisories-notices/security-advisory)
* [中文](/zh/support/advisories-notices/security-advisory)
* [한국어](/ko/support/advisories-notices/security-advisory)

 [![Arista](/templates/arista_v2/img/logo_arista.png)](/ "Arista")

Toggle Navigation

* Solutions
  + [AI Networking Center](/en/solutions/ai-networking)
  + [Cloud Networking](/en/solutions/cloud-networking)
  + [Cloud-Grade Routing](/en/solutions/cloud-scale-routing)
  + [Cognitive Campus Workspaces](/en/solutions/cognitive-campus)
  + [Electronic Trading](/en/solutions/electronic-trading)
  + [Enterprise WAN](/en/solutions/enterprise-wan)
  + [Federal Government](/en/solutions/federal-government)
  + [Hybrid Cloud](/en/solutions/hybrid-cloud)
  + [IP Storage and Big Data](/en/solutions/big-data)
  + [Media & Entertainment](/en/solutions/media-entertainment)
  + [Network Observability](/en/solutions/network-observability)
  + [Security](/en/solutions/security)
  + [Telemetry and Analytics](/en/solutions/telemetry-analytics)
* Products
  + [Product Overview](#tab17)
  + [EOS](#tab18)
  + [CloudVision](#tab19)
  + [Featured Products](#tab20)
  + [Featured Platforms](#tab720)
  + [Security](#tab664)
  + [DANZ Monitoring Fabric](#tab652)
  + [Cognitive Wi-Fi](/en/products/cloudvision-cue)
  + [Transceivers/Cables](/en/products/transceivers-cables)

  Back
  + [Product Overview](/en/products)Cloud Network Design Choices, The Universal Spine and The Best Data Center Portfolio[![](/assets/images/product/Layer3_VXLAN_Design.png)](/products)

  + [EOS Overview](/en/products/eos)Arista Extensible Operating System (EOS®) is the core of Arista cloud networking solutions for next-generation data centers and cloud networks.[![](/assets/images/product/NetDL-160.png)](/products/eos)

  + [CloudVision Overview](/en/products/eos/eos-cloudvision)A Platform for Cloud Automation and Visibility
  + [CloudVision Universal Network Observability (CV UNO)](/products/eos/eos-cloudvision/cv-uno)[![](/assets/images/video/CV-UNO-Overview-menu.jpg)](https://www.youtube.com/embed/cmHl8IAzmGk?rel=0&wmode=transparent&modestbranding=1&showinfo=0)

  + [Platforms Overview](/en/products/platforms)
  + [7800 Series](#tab588)
  + [7700 Series](#tab1575)
  + [7500 Series](#tab23)
  + [7300 Series](#tab24)
  + [7280 Series](#tab25)
  + [AWE 7200R Series](#tab1539)
  + [7170 Series](#tab27)
  + [7130 Series](#tab446)
  + [7060X Series](#tab30)
  + [7050X Series](#tab31)
  + [7020R Series](#tab32)
  + [7010X Series](#tab33)
  + [750 Series](#tab688)
  + [720X Series](#tab636)
  + [720D Series](#tab1461)
  + [710P Series](#tab1352)
  + [Wi-Fi 7 Series](/en/products/wifi7-series)
  + [Wi-Fi 6E Series](/en/products/wifi6e-series)
  + [Wi-Fi 6 Series](/en/products/wifi6-series)

  + [Universal Cloud Networking](#tab721)
  + [Hyperscale Data Center](#tab722)
  + [Cloud Grade Routing](#tab723)
  + [Enterprise WAN](/en/solutions/enterprise-wan)
  + [Cognitive Campus](#tab724)
  + [R-Series Spine & Leaf](#tab725)
  + [X-Series Spine & Leaf](#tab726)
  + [Programmable](#tab727)
  + [800G Solutions](#tab1615)
  + [400G Solutions](#tab728)
  + [Flexible 10G & 1G Leaf](#tab729)
  + [Network Observability](#tab1324)
  + [Detection and Response](#tab1327)

  + [Network Access Control](/en/products/network-access-control)Simple Scalable Secure![](/assets/images/CV-AGNI-Menu.png)
  + [Multi-Domain Segmentation (MSS)](/en/products/multi-domain-segmentation)
  + [Arista NDR](/en/products/network-detection-and-response)
  + [Wireless Intrusion Prevention System](/en/products/wireless-intrusion-prevention-system)
  + [Edge Threat Management](/solutions/security/etm)
  + [Security Services](/en/products/security-services)

  + [DMF Overview](/en/products/danz-monitoring-fabric)Controller-driven visibility fabric delivering multi-tenant monitoring for pervasive, context-driven network observability[![](/assets/images/video/DANZ-Video-Thumbnail.png)](https://www.youtube.com/embed/TfR0ngz8WwE?rel=0&wmode=transparent&modestbranding=1&showinfo=0)
  + [Multi-Cloud Director Data Sheet](/assets/data/pdf/Datasheets/Arista-Multi-Cloud-Director-Datasheet.pdf)

  Back
  + [7800R4 Series](#tab1551)
  + [7800R3 Series](#tab1566)

  + [7700R4 Series Overview](/en/products/7700r4-series)
  + [7700R4 Data Sheet](/assets/data/pdf/Datasheets/7700R4-Distributed-Etherlink-Switch-Datasheet.pdf)

  + [7500R3 Series](#tab592)
  + [7500R Series](#tab66)

  + [7388X5 Series](#tab1172)
  + [7368X4 Series](#tab569)
  + [7358X4 Series](#tab1176)
  + [7300X Series](#tab568)

  + [7280R3 Series](#tab596)
  + [7280R3 Modular Series](/products/7280r3-series/7280r3-modular)

  + [AWE 7200R Series Overview](/en/products/awe-7200r-series)
  + [AWE 7200R Data Sheet](/assets/data/pdf/Datasheets/AWE-7200R-Datasheet.pdf)

  + [7170 Series Overview](/en/products/7170-series)High Performance Multi-function Programmable Platforms[![](/assets/images/video/7170-Company-Page.png)](https://www.youtube.com/embed/eNo78PHYF5k?rel=0&wmode=transparent&modestbranding=1&showinfo=0)
  + [7170 Quick Look](/en/products/7170-series-network-switch-datasheet)
  + [7170 Data Sheet](/assets/data/pdf/Datasheets/7170-Datasheet.pdf)
  + [7170B Data Sheet](/assets/data/pdf/Datasheets/7170B-Datasheet.pdf)
  + [7170 Profile Matrix](/en/support/product-documentation/supported-profile-features)

  + [7130 Series Overview](/en/products/7130-series)
  + [7130 Hardware](#tab486)
  + [7130 Applications](#tab490)
  + [7130 Developer](#tab548)

  + [7060X6 Series](#tab1587)
  + [7060X5 Series](#tab1185)
  + [7060X Series](#tab1184)

  + [7050X4 Series](#tab1180)
  + [7050X3 Series](#tab70)
  + [7050X Series](#tab71)

  + [7020R Series Overview](/en/products/7020r-series)High performance and deep buffer 1 & 10 GbE switch[![](/assets/images/video/7020R_Series.png)](https://www.youtube.com/embed/yIs3ZS0YZe0?rel=0&wmode=transparent&modestbranding=1&showinfo=0)
  + [7020R Quick Look](/en/products/7020r-series-network-switch-datasheet)
  + [7020R Data Sheet](/assets/data/pdf/Datasheets/7020R-48_Datasheet.pdf)

  + [7010X Series Overview](/en/products/7010x-series)High performance and power efficient feature rich datacenter 1GbE switch with 25GbE uplinks[![](/assets/images/video/Mega-Menu-7010x.jpg)](https://www.youtube.com/embed/tsKIZDfV9qk?rel=0&wmode=transparent&modestbranding=1&showinfo=0)
  + [7010X Data Sheet](/assets/data/pdf/Datasheets/7010TX-Datasheet.pdf)
  + [7010X Quick Look](/assets/data/pdf/Datasheets/7010X-Quick-Look.pdf)

  + [750 Series Overview](/en/products/750-series)Cognitive Campus Modular POE Leaf Switches[![](/assets/images/video/Campus-Modular-Leaf-Switches2.jpg)](https://www.youtube.com/embed/QxcPvf_jRmI?rel=0&wmode=transparent&modestbranding=1&showinfo=0)
  + [750 Data Sheet](/assets/data/pdf/Datasheets/CCS-750-Series-Datasheet.pdf)

  + [722XPM Series](#tab1274)
  + [720XP Series](#tab1275)

  + [720D Series Overview](/en/products/720d-series)Arista 720D Series Cognitive Campus POE Leaf Switches![](/assets/images/product/720D-Series-Menu.jpg)
  + [720D Data Sheet](/assets/data/pdf/Datasheets/CCS-720D-Datasheet.pdf)

  + [710P Series Overview](/en/products/710p-series)Compact, fanless, cognitive PoE switches[![](/assets/images/video/710P-Series-Intro.png)](https://www.youtube.com/embed/F4msz12fdc4?rel=0&wmode=transparent&modestbranding=1&showinfo=0)
  + [710P Data Sheet](/assets/data/pdf/Datasheets/CCS-710P-Datasheet.pdf)

  + [Leaf & Spine](#tab730)
  + [Spine & Routing](#tab731)
  + [Leaf & Routing](#tab732)

  + [Hyperscale Data Center](/en/products/hyperscale-data-center)![](/assets/images/product/Hyperscale-Data-Center.jpg)
  + [7700R4 Series](/en/products/7700r4-series)
  + [7368X4 & 7060X4 Series](#tab754)
  + [7260X3 Series](/en/products/7060x-series)
  + [7060X6 Series](/en/products/7060x6-series)
  + [7060X5 Series](/en/products/7060x5-series)
  + [7060X2 & 7060X Series](/en/products/7060x-series)

  + [Cloud Grade Routing](/en/products/cloud-grade-routing)![](/assets/images/product/Cloud-Grade-Routing.jpg)
  + [7800R3 Series](/en/products/7800r3-series)
  + [7500R3 Series](/en/products/7500r3-series)
  + [7280R3 Series](#tab765)
  + [7020R Series](/en/products/7020r-series)

  + [Spine & Edge Routing](#tab769)
  + [Wired](#tab775)
  + [Wireless](#tab1400)
  + [Network Access Control](/en/products/network-access-control)

  + [R-Series Spine & Leaf](/en/products/r-series-spine-leaf)![](/assets/images/product/R-Series.jpg)
  + [7800R3 Series](/en/products/7800r3-series)
  + [7500R3 Series](/en/products/7500r3-series)
  + [7280R3 Series](#tab787)
  + [7020R Series](/en/products/7020r-series)

  + [X-Series Spine & Leaf](/en/products/x-series-spine-leaf)![](/assets/images/product/X-Series.jpg)
  + [7300X Series](#tab792)
  + [7060X Series](#tab797)
  + [7050X Series](#tab803)

  + [Programmable](/en/products/programmable)![](/assets/images/product/Programmable.jpg)
  + [7170 Series](/en/products/7170-series)
  + [7130 Series](#tab810)

  + [7800R4 Series](/en/products/7800r4-series)
  + [7700R4 Series](/en/products/7700r4-series)
  + [7060X6 Series](/en/products/7060x6-series)

  + [400G Solutions](/en/products/400g-solutions)![](/assets/images/product/400G.jpg)
  + [7800R4 Series](/en/products/7800r4-series)
  + [7800R3 Series](/en/products/7800r3-series)
  + [7700R4 Series](/en/products/7700r4-series)
  + [7500R3 Series](/en/products/7500r3-series)
  + [7388X5 Series](/en/products/7388x5-series)
  + [7368X4 Series](/en/products/7368x4-series)
  + [7358X4 Series](/en/products/7358x4-series)
  + [7280R3 Series](/en/products/7280r3-series)
  + [7060X6 Series](/en/products/7060x6-series)
  + [7060X5 Series](/en/products/7060x5-series)
  + [7060X4 Series](/en/products/7060x-series)
  + [7050X4 Series](/en/products/7050x4-series)

  + [Flexible 10G & 1G Leaf](/en/products/flexible-10g-1g-leaf)![](/assets/images/product/10G-1G-Leaf.jpg)
  + [7020R Series](/en/products/7020r-series)
  + [7010X Series](/en/products/7010x-series)
  + [720XP Series](/en/products/720xp-series)

  + [Observability Overview](/en/solutions/network-observability)Pervasive network visibility, security monitoring and contextual analytics for networks at any scale![](/assets/images/product/observability_mm_banner.jpg)
  + [DANZ Monitoring Fabric](/en/products/danz-monitoring-fabric)

  + [Detection and Response Overview](/en/products/network-detection-and-response)Reduce business impact with AI-Driven security for the new network--campus, data center, IoT and cloud.![](/assets/images/logo/Arista-NDR-Thumbnail2.jpg)
  + [Security Services](/en/products/security-services)

  Back
  + [7800R4 Series Overview](/en/products/7800r4-series)
  + [7800R4 Data Sheet](/assets/data/pdf/Datasheets/7800R4-Series-AI-Spine-Datasheet.pdf)

  + [7800R3 Series Overview](/en/products/7800r3-series)Modular 100/400G Spine Switches[![](/assets/images/video/Introducing-the-7800R-Series.jpg)](https://www.youtube.com/embed/Z8VGvGuYw04?rel=0&wmode=transparent&modestbranding=1&showinfo=0)
  + [7800R3 Quick Look](/en/products/7800r3-series-network-switch-quick-look)
  + [7800R3 Data Sheet](/assets/data/pdf/Datasheets/7800R3-Data-Sheet.pdf)

  + [7500R3 Series Overview](/en/products/7500r3-series)Modular 100/400G Spine Switches[![](/assets/images/video/Introducing-7500R3-video.png)](https://www.youtube.com/embed/2X0b5vDJcfs?rel=0&wmode=transparent&modestbranding=1&showinfo=0)
  + [7500R3 Quick Look](/en/products/7500r3-series-network-switch-quick-look)
  + [7500R3 Data Sheet](/assets/data/pdf/Datasheets/7500R3-Data-Sheet.pdf)

  + [7500R Series Overview](/en/products/7500r-series)The industry’s highest performance universal spine and datacenter edge switches[![](/assets/images/video/Arista7500RDatacenterScale2017.png)](https://www.youtube.com/embed/KaEFvEib7WY?rel=0&wmode=transparent&modestbranding=1&showinfo=0)
  + [7500R Quick Look](/en/products/7500r-series-network-switch-datasheet)
  + [7500R Data Sheet](/assets/data/pdf/Datasheets/7500RDataSheet.pdf)

  + [7388X5 Series Overview](/en/products/7388x5-series)400GbE and 200GbE modular solutions for hyperscale cloud networks and I/O intensive environments[![](/assets/images/video/400G-Expanded-Video.png)](https://www.youtube.com/embed/8QLWpKvkbEw?rel=0&wmode=transparent?rel=0&wmode=transparent&modestbranding=1&showinfo=0)
  + [7388X5 Quick Look](/assets/data/pdf/Datasheets/7388X5-Series-Quick-Look.pdf)
  + [7388X5 Data Sheet](/assets/data/pdf/Datasheets/7388X5-Datasheet.pdf)

  + [7368X4 Series Overview](/en/products/7368x4-series)400GbE and 100GbE Modular solutions for hyperscale cloud and I/O intensive environments[![](/assets/images/video/Introducing-the-7368X4-Series.jpg)](https://www.youtube.com/embed/GkcI23iae98?rel=0&wmode=transparent?rel=0&wmode=transparent&modestbranding=1&showinfo=0)
  + [7368X4 Quick Look](/en/products/arista-7368x4-series-datasheet-quick-look)
  + [7368X4 Data Sheet](/assets/data/pdf/Datasheets/7368X4-Datasheet.pdf)

  + [7358X4 Series Overview](/en/products/7358x4-series)400GbE and 100GbE modular solutions for large Enterprises, AI and ML environments[![](/assets/images/video/Arista-7050X4-7358X4-Series-Introduction.png)](https://www.youtube.com/embed/gFKzSm2j5pE?rel=0&wmode=transparent?rel=0&wmode=transparent&modestbranding=1&showinfo=0)
  + [7358X4 Quick Look](/assets/data/pdf/Datasheets/7358X4-Series-Quick-Look.pdf)
  + [7358X4 Data Sheet](/assets/data/pdf/Datasheets/7358X4-Datasheet.pdf)

  + [7300X Series Overview](/en/products/7300-series)High Performance, high density and feature rich 10, 40, & 100GbE systems[![](/assets/images/video/7300X3-Video-Datasheet.jpg)](https://www.youtube.com/embed/WFTeB4sa6PQ?rel=0&wmode=transparent&modestbranding=1&showinfo=0)
  + [7300 Quick Look](/en/products/7300x-series-network-switch-datasheet)
  + [7300 Data Sheet](/assets/data/pdf/Datasheets/7300X_DS.pdf)

  + [7280R3 Series Overview](/en/products/7280r3-series)Dynamic Deep Buffer 25/50/100/400G[![](/assets/images/video/Introducing-the-7280R3-Series2.jpg)](https://www.youtube.com/embed/4tVdVfCINXk?rel=0&wmode=transparent&modestbranding=1&showinfo=0)
  + [7280R3 Data Sheet](/assets/data/pdf/Datasheets/7280R3-Data-Sheet.pdf)
  + [7280R3 Quick Look](/en/products/7280r3-series-network-switch-quick-look)
  + [7280R3A Data Sheet](/assets/data/pdf/Datasheets/7280R3A-Datasheet.pdf)
  + [7280R3A Quick Look](/en/products/7280r3a-series-data-center-switch-quick-look)
  + [7280R3 Modular Data Sheet](/assets/data/pdf/Datasheets/7280R3A-Modular-Datasheet.pdf)
  + [7280R3 Modular Quick Look](/en/products/7280r3a-modular-series-quick-look)

  + [7130 Hardware Overview](/en/products/7130-hardware)FPGA-enabled switches![](/assets/images/article/ip_cores.jpg)
  + [7130 Connect Series](/en/products/7130-connect)
  + [7130E Series](/en/products/7130e-series)
  + [7130L Series](/en/products/7130l-series)
  + [7130LBR Series](/en/products/7130lbr-series)
  + [7132LB Series](/en/products/7132lb-series)
  + [7135LB Series](/en/products/7135lb-series)

  + [7130 Applications Overview](/en/products/7130-applications)FPGA-based network applications![](/assets/images/article/development_kits.png)
  + [MetaWatch App](/en/products/7130-meta-watch)
  + [MetaMux App](/en/products/7130-meta-mux)
  + [MultiAccess App](/en/products/7130-multi-access)
  + [MetaProtect App](/en/products/7130-meta-protect)
  + [Exchange App](/en/products/7130-exchange-app)
  + [Switch App](/en/products/7130-switch-app)

  + [7130 Developer Overview](/en/products/7130-developer)Developer ecosystem![](/assets/images/article/Arista-7130-Developer-stock.png)
  + [IP Cores](/en/products/7130-ip-cores)
  + [Development Kits](/en/products/7130-development-kits)

  + [7060X6 Series Overview](/en/products/7060x6-series)Best of breed 800G solutions optimized for AI workloads and hyperscale cloud environments
  + [7060X6 Quick Look](/en/products/7060x6-series-quick-look)
  + [7060X6 Data Sheet](/assets/data/pdf/Datasheets/7060X6-Datasheet.pdf)

  + [7060X5 Series Overview](/en/products/7060x5-series)High Performance 400G solutions for hyperscale cloud networks and I/O intensive environments[![](/assets/images/video/400G-Expanded-Video.png)](https://www.youtube.com/embed/8QLWpKvkbEw?rel=0&wmode=transparent&modestbranding=1&showinfo=0)
  + [7060X5 Quick Look](/assets/data/pdf/Datasheets/7060X4_7060X5-QuickLook.pdf)
  + [7060X5 Data Sheet](/assets/data/pdf/Datasheets/7060X5-Datasheet.pdf)

  + [7060X Series Overview](/en/products/7060x-series)25/100GbE and 10/40GbE Leaf and Spine solutions for cloud scale and open networking[![](/assets/images/video/7060X_Introduction1.png)](https://www.youtube.com/embed/MonBNjDni7U?rel=0&wmode=transparent&modestbranding=1&showinfo=0)
  + [7060X & 7260X Quick Look](/en/products/7060x-and-7260x-series-network-switch-quick-look)
  + [7060X & 7260X Data Sheet](/assets/data/pdf/Datasheets/7060X_7260X_DS.pdf)

  + [7050X4 Series Overview](/en/products/7050x4-series)Versatile 100G / 400G leaf and spine switches with industry leading performance, rich features and power efficiency[![](/assets/images/video/Arista-7050X4-7358X4-Series-Introduction.png)](https://www.youtube.com/embed/gFKzSm2j5pE?rel=0&wmode=transparent&modestbranding=1&showinfo=0)
  + [7050X4 Quick Look](/assets/data/pdf/Datasheets/7050X4-Series-Quick-Look.pdf)
  + [7050X4 Data Sheet](/assets/data/pdf/Datasheets/7050X4-Datasheet.pdf)

  + [7050X3 Series Overview](/en/products/7050x3-series)Versatile leaf and spine switches with industry leading performance, advanced features and power efficiency[![](/assets/images/video/Arista-7050X3-Series-Introduction-v2.png)](https://www.youtube.com/embed/ygRAgiNanmU?rel=0&wmode=transparent&modestbranding=1&showinfo=0)
  + [7050X3 Quick Look](/en/products/7050x3-series-network-switch-datasheet)
  + [7050X3 Data Sheet](/assets/data/pdf/Datasheets/7050X3-Datasheet.pdf)

  + [7050X Series Overview](/en/products/7050x-series)Cloud scale fixed configuration leaf and spine switches[![](/assets/images/video/7050X_series_embed_play.png)](https://www.youtube.com/embed/R4ilmyYJkQU?rel=0&wmode=transparent&modestbranding=1&showinfo=0)
  + [7050X Quick Look](/en/products/7050x-series-network-switch-datasheet)
  + [7050X Data Sheet](/assets/data/pdf/Datasheets/7050TX-128_48_Datasheet_S.pdf)

  + [722XPM Series Overview](/en/products/722xpm-series)Secure Cognitive Campus POE Leaf Switches![](/assets/images/722x-mega-menu.png)
  + [722XPM Data Sheet](/assets/data/pdf/Datasheets/CCS-722XP-Datasheet.pdf)

  + [720XP Series Overview](/en/products/720xp-series)Cognitive Campus POE Leaf Switches[![](/assets/images/video/Arista-Campus-Leaf-Switches.jpg)](https://www.youtube.com/embed/PTbe-NNAqog?rel=0&wmode=transparent&modestbranding=1&showinfo=0)
  + [720XP Data Sheet](/assets/data/pdf/Datasheets/CCS-720XP-Datasheet.pdf)

  + [Leaf & Spine](/en/products/leaf-spine)![](/assets/images/product/UCN-Leaf-Spine.jpg)
  + [R Series](/en/products/r-series-spine-leaf)
  + [X Series](/en/products/x-series-spine-leaf)
  + [7170 Series](/en/products/7170-series)

  + [Spine & Routing](/en/products/spine-routing)![](/assets/images/product/UCN-Spine-Routing.jpg)
  + [7800R4 Series](/en/products/7800r4-series)
  + [7800R3 Series](/en/products/7800r3-series)
  + [7500R3 Series](/en/products/7500r3-series)
  + [7280R3 Modular Series](/products/7280r3-series/7280r3-modular)
  + [7368X4 Series](/en/products/7368x4-series)
  + [7300X3 Series](/en/products/7300-series)
  + [7300X Series](/en/products/7300-series)

  + [Leaf & Routing](/en/products/leaf-routing)![](/assets/images/product/UCN-Leaf-Routing.jpg)
  + [7280R3 Series](/en/products/7280r3-series)
  + [7280R3 Modular Series](/products/7280r3-series/7280r3-modular)
  + [7260X3 Series](/en/products/7060x-series)
  + [7060X4 Series](/en/products/7060x-series)
  + [7060X2 & 7060X Series](/en/products/7060x-series)
  + [7050X3 Series](/en/products/7050x3-series)
  + [7050X Series](/en/products/7050x-series)

  + [7368X4 Series](/en/products/7368x4-series)
  + [7060X4 Series](/en/products/7060x-series)

  + [7280R3 Series](/en/products/7280r3-series)
  + [7280R3 Modular Series](/products/7280r3-series/7280r3-modular)

  + [Spine & Edge Routing](/en/products/spine-edge-routing)![](/assets/images/product/Spine-Edge-Routing.jpg)
  + [7300X Series](/en/products/7300-series)
  + [7280R3 Series](/en/products/7280r3-series)
  + [7050X Series](/en/products/7050x-series)
  + [7020R Series](/en/products/7020r-series)

  + [Wired & Wireless](/en/products/wired-wireless)![](/assets/images/product/Wired-Wireless.jpg)
  + [7300X Series](/en/products/7300-series)
  + [7050X Series](/en/products/7050x-series)
  + [750 Series](/en/products/750-series)
  + [720XP Series](/en/products/720xp-series)
  + [722XPM Series](/en/products/722xpm-series)
  + [720D Series](/en/products/720d-series)
  + [710P Series](/en/products/710p-series)
  + [Cognitive Wi-Fi](/en/products/cloudvision-cue)

  + [Wi-Fi 6 Series](/en/products/wifi6-series)
  + [Wi-Fi 6E Series](/en/products/wifi6e-series)

  + [7280R3 Series](/en/products/7280r3-series)
  + [7280R3 Modular Series](/products/7280r3-series/7280r3-modular)

  + [7300X Series Spine](/en/products/7300x-series-spine)![](/assets/images/product/X-Series.jpg)
  + [7300X3 Series](/en/products/7300-series)
  + [7300X Series](/en/products/7300-series)

  + [7060X Series Spine](/en/products/7060x-series-spine)![](/assets/images/product/X-Series.jpg)
  + [7388X5 Series](/en/products/7388x5-series)
  + [7368X4 Series](/en/products/7368x4-series)
  + [7060X5 Series](/en/products/7060x5-series)
  + [7060X4 Series](/en/products/7060x-series)
  + [7260X3 Series](/en/products/7060x-series)
  + [7060X2 and 7060X](/en/products/7060x-series)

  + [7050X Series Spine](/en/products/7050x-series-spine)![](/assets/images/product/X-Series.jpg)
  + [7358X4 Series](/en/products/7358x4-series)
  + [7050X4 Series](/en/products/7050x4-series)
  + [7050X3 Series](/en/products/7050x3-series)
  + [7050X Series](/en/products/7050x-series)

  + [7130 Series Overview](/en/products/7130-series)
  + [7130 Hardware](/en/products/7130-hardware)
  + [7130 Applications](/en/products/7130-applications)
  + [7130 Developer](/en/products/7130-developer)
* Partner
  + [Partner Program](/en/partner/partner-program)
  + [Become a Partner](/en/partner/partner-application)
  + [Partner Code of Ethics and Business Conduct](/assets/data/pdf/Arista-Partner-Code-of-Ethics-and-Business-Conduct.pdf)
  + [Channel Partner Portal](/en/partner/partner-portal)
  + [Technology Partners](/en/partner/technology-partners)
* Support
  + [Support Overview](/en/support)
  + [Customer Support](/en/support/customer-support)
  + [Product Documentation](/en/support/product-documentation)
  + [Product Certifications](/en/support/product-certificate)
  + [Advisories & Notices](/en/support/advisories-notices)
  + [Product Lifecycle](/en/support/product-lifecycle)
  + [Software Download](/en/support/software-download)
  + [Transfer of Information](/en/support/toi)
  + [Support Portal](/en/community/support-portal)
  + [Training Partners](https://www.sdn-pros.com)
  + [Software Bug Portal](/en/support/software-bug-portal)
  + [CVP Upgrade Path](/en/support/cvp-upgrade-path)
  + [MLAG ISSU Check](/en/support/mlag-portal)
  + [Tech Library Portal](/en/tech-library)
* Company
  + [Company Overview](/en/company/company-overview)
  + [Corporate Responsibility](/en/company/corporate-responsibility)
  + [Management Team](/en/company/management-team)
  + [Blogs](https://blogs.arista.com/blog)
  + [Investor Relations](https://investors.arista.com)
  + [Events Calendar](https://events.arista.com/events-calendar)
  + [Webinars](/en/company/news/webinars)
  + [Video Library](/en/company/news/video-library)
  + [Testimonials](/en/company/customer-testimonials)
  + [Careers](/en/careers)
  + [News](/en/company/news)
  + [Contact Us](/en/company/contact-us)

* # Security Advisories

View All Support
X

* [Support Overview](/en/support)
* [Customer Support](/en/support/customer-support)
* [Product Documentation](/en/support/product-documentation)
* [Product Certifications](/en/support/product-certificate)
* [Advisories & Notices](/en/support/advisories-notices)
* [Product Lifecycle](/en/support/product-lifecycle)
* [Software Download](/en/support/software-download)
* [Transfer of Information](/en/support/toi)
* [Support Portal](/en/community/support-portal)
* [Training Partners](https://www.sdn-pros.com)
* [Software Bug Portal](/en/support/software-bug-portal)
* [MLAG ISSU Check](/en/support/mlag-portal)
* [CVP Upgrade Path](/en/support/cvp-upgrade-path)

## Security Advisory 0040 [PDF](/en/support/advisories-notices/security-advisory/7098-security-advisory-40?tmpl=component&format=pdf "PDF")

#### **Date:** April 16th, 2019

#### **Last Updated:** April 29th, 2019

#### **Version:** 1.1

| Revision | Date | Changes |
| --- | --- | --- |
| 1.0 | April 16th, 2019 | Initial Release |
| 1.1 | April 29th, 2019 | Updated with CVE reference and mitigation for impacted versions |

The CVE-ID tracking this issue is CVE-2013-7470

CVSSv3 Base Score: 5.9/10 (AV:N/AC:H/PR:N/UI:N/S:U/C:N/I:N/A:H)

#### **Description:**

A kernel crash can be triggered remotely through the network by certain malformed packets, specifically by sending an IP packet with rarely used packet options to a switch via a routed port.

This is a publicly found vulnerability and the exposure is specific to EosKernel-3.4 that was used in the EOS releases noted below. Arista is using an updated Kernel version in all of its recent EOS releases and, as such, those versions are not susceptible to this crash or soft lockup.

The Arista EOS versions that are affected, along with the resolution steps, are documented in the following sections.

#### Vulnerability Assessment for EOS/vEOS:

**Affected EOS/vEOS versions**

The code releases with Linux kernel version 3.4 are susceptible to this vulnerability. Affected releases are listed below. The release trains starting EOS-4.20 run version 3.18 of the Linux kernel and are not vulnerable.

#### **Affected Software Releases:**

| 4.18 | 4.19 |
| --- | --- |
| 4.18.10M  4.18.9M  4.18.8M  4.18.7M  4.18.6M  4.18.5F  4.18.4.2F  4.18.4.1F  4.18.4F  4.18.3.1F  4.18.3M  4.18.2.1F  4.18.2F  4.18.1.1F  4.18.2F  4.18.0F | 4.19.12M  4.19.11M  4.19.10M  4.19.9M  4.19.8M  4.19.7M  4.19.6.3M  4.19.6.2M  4.19.6.1M  4.19.6M  4.19.5M  4.19.4.1M  4.19.4M  4.19.3F  4.19.2.3F  4.19.2.2F  4.19.2.1F  4.19.2F  4.19.1F  4.19.0F |

Note: EOS release trains from 4.14 to 4.17, that are currently End-of-Software-Support per Arista’s software lifecycle policy, also use the impacted kernel version and are susceptible to this vulnerability. Please review the ‘Mitigation’ and ‘Resolution’ sections below to evaluate a feasible option for remediation.

#### **Affected Platforms:**

This vulnerability is in the Linux kernel and hence affects all platforms running the affected EOS/vEOS releases.

#### **Symptoms:**

The symptom of this exploit would be that of a kernel panic. As a result of this, the system can lead to an unexpected device restart. The kernel crash will point to a soft lockup in cipso\_v4\_validate. This can be triggered only with certain malformed packets on a routed port.

#### **Resolution:**

Bug 155692 tracks this vulnerability. The fix requires an update to the kernel and hence the recommended course of action is to upgrade to a fixed version of EOS.

The fix is available in the following EOS versions in each affected code train:

* EOS-4.18.11M
* EOS-4.19.12.1M

Please upgrade to any of these remediated versions at your earliest convenience.

#### Mitigation

The long-term resolution is upgrade to a remediated version of EOS. A temporary mitigation is to use a hotfix which can be installed as an EOS extension on any of the affected versions.

It is recommended to install this patch on affected versions of EOS to safeguard against this vulnerability.

Patch file download URL: [SecurityAdvisory0040Hotfix.swix](/assets/data/SecurityAdvisories/SA40/SecurityAdvisory0040Hotfix.swix)

sha512 checksum for verification: 7eea494a74245a06369ed11798bbcd13f6782932ee5586fb289ec6fc5dae4a300bc745a0aec4fb0e348d85d03c2aca37ad97c55313ced0f4c1632888944d2b1d

**Note:**

* The patch installation is platform independent and hitless. A reload of the switch or any process is not required for the patch to take effect.
* This patch adds iptables rules to do the following actions:

+ Drop any packet with two or more IP options
+ Drop any packet with CIPSO (IP option 134) as its only option.

* This mitigation could potentially have the side effect of dropping traffic that uses multiple IP options or IP option 134. If either of these cases apply, an upgrade is the best solution to address the vulnerability.

For instructions on installation and verification of EOS extensions, refer to this section in the EOS User Manual: [https://www.arista.com/en/um-eos/eos-section-6-7-managing-eos-extensions](/um-eos/eos-section-6-7-managing-eos-extensions)

#### References

[CVE-2013-7470](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-7470)

#### **For More Information:**

If you require further assistance, or if you have any further questions regarding this security notice, please contact the Arista Networks Technical Assistance Center (TAC) by one of the following methods:

#### **Open a Service Request:**

By email: This email address is being protected from spambots. You need JavaScript enabled to view it.
 By telephone: 408-547-5502
 866-476-0000

Get In Touch Today
[Contact Us](/en/company/contact-us)

![Arista](/templates/arista_v2/img/logo_arista_blue.png)
[Facebook](https://www.facebook.com/AristaNW) [Twitter](https://twitter.com/%40AristaNetworks) [LinkedIn](http://www.linkedin.com/company/arista-networks-inc)

* Support
  + [Support & Services](/en/support/customer-support)
  + [Training Partners](https://www.sdn-pros.com)
  + [Product Documentation](/en/support/product-documentation)
  + [Software Downloads](/en/support/software-download)
* Contacts & Help
  + [Contact Arista](/en/company/contact-us)
  + [Contact Technical Support](/en/support/customer-support)
  + [Order Status](https://orders.arista.com)
* News
  + [News Room](/en/company/news/in-the-news)
  + [Events Calendar](https://events.arista.com/events-calendar)
  + [Blogs](/blogs)
* About Arista
  + [Company](/en/company/company-overview)
  + [Management Team](/en/company/management-team)
  + [Careers](/en/careers)
  + [Investor Relations](http://investors.arista.com/)

© 2025 Arista Networks, Inc. All rights reserved.

* [Terms of Use](/en/terms-of-use)
* [Privacy Policy](/en/privacy-policy)
* [Fraud Alert](/en/fraud-alert)
* [Sitemap](/en/sitemap)



=== Content from support.f5.com_abeb3b8b_20250125_020647.html ===
Loading×Sorry to interruptCSS ErrorRefresh

=== Content from www.arista.com_719b1414_20250126_051444.html ===


* [Login](/en/login)

 [Wi-Fi Launchpad](https://login.wifi.arista.com/cas/login)
[Community Central](/community/community-forum)
 English

* [English](/en/qsg-book-search)
* [日本語](/jp/qsg-book-search)
* [中文](/zh/qsg-book-search)
* [한국어](/ko/qsg-book-search)

 [![Arista](/templates/arista_v2/img/logo_arista.png)](/ "Arista")

Toggle Navigation

* Solutions
  + [AI Networking Center](/en/solutions/ai-networking)
  + [Cloud Networking](/en/solutions/cloud-networking)
  + [Cloud-Grade Routing](/en/solutions/cloud-scale-routing)
  + [Cognitive Campus Workspaces](/en/solutions/cognitive-campus)
  + [Electronic Trading](/en/solutions/electronic-trading)
  + [Enterprise WAN](/en/solutions/enterprise-wan)
  + [Federal Government](/en/solutions/federal-government)
  + [Hybrid Cloud](/en/solutions/hybrid-cloud)
  + [IP Storage and Big Data](/en/solutions/big-data)
  + [Media & Entertainment](/en/solutions/media-entertainment)
  + [Network Observability](/en/solutions/network-observability)
  + [Security](/en/solutions/security)
  + [Telemetry and Analytics](/en/solutions/telemetry-analytics)
* Products
  + [Product Overview](#tab17)
  + [EOS](#tab18)
  + [CloudVision](#tab19)
  + [Featured Products](#tab20)
  + [Featured Platforms](#tab720)
  + [Security](#tab664)
  + [DANZ Monitoring Fabric](#tab652)
  + [Cognitive Wi-Fi](/en/products/cloudvision-cue)
  + [Transceivers/Cables](/en/products/transceivers-cables)

  Back
  + [Product Overview](/en/products)Cloud Network Design Choices, The Universal Spine and The Best Data Center Portfolio[![](/assets/images/product/Layer3_VXLAN_Design.png)](/products)

  + [EOS Overview](/en/products/eos)Arista Extensible Operating System (EOS®) is the core of Arista cloud networking solutions for next-generation data centers and cloud networks.[![](/assets/images/product/NetDL-160.png)](/products/eos)

  + [CloudVision Overview](/en/products/eos/eos-cloudvision)A Platform for Cloud Automation and Visibility
  + [CloudVision Universal Network Observability (CV UNO)](/products/eos/eos-cloudvision/cv-uno)[![](/assets/images/video/CV-UNO-Overview-menu.jpg)](https://www.youtube.com/embed/cmHl8IAzmGk?rel=0&wmode=transparent&modestbranding=1&showinfo=0)

  + [Platforms Overview](/en/products/platforms)
  + [7800 Series](#tab588)
  + [7700 Series](#tab1575)
  + [7500 Series](#tab23)
  + [7300 Series](#tab24)
  + [7280 Series](#tab25)
  + [AWE 7200R Series](#tab1539)
  + [7170 Series](#tab27)
  + [7130 Series](#tab446)
  + [7060X Series](#tab30)
  + [7050X Series](#tab31)
  + [7020R Series](#tab32)
  + [7010X Series](#tab33)
  + [750 Series](#tab688)
  + [720X Series](#tab636)
  + [720D Series](#tab1461)
  + [710P Series](#tab1352)
  + [Wi-Fi 7 Series](/en/products/wifi7-series)
  + [Wi-Fi 6E Series](/en/products/wifi6e-series)
  + [Wi-Fi 6 Series](/en/products/wifi6-series)

  + [Universal Cloud Networking](#tab721)
  + [Hyperscale Data Center](#tab722)
  + [Cloud Grade Routing](#tab723)
  + [Enterprise WAN](/en/solutions/enterprise-wan)
  + [Cognitive Campus](#tab724)
  + [R-Series Spine & Leaf](#tab725)
  + [X-Series Spine & Leaf](#tab726)
  + [Programmable](#tab727)
  + [800G Solutions](#tab1615)
  + [400G Solutions](#tab728)
  + [Flexible 10G & 1G Leaf](#tab729)
  + [Network Observability](#tab1324)
  + [Detection and Response](#tab1327)

  + [Network Access Control](/en/products/network-access-control)Simple Scalable Secure![](/assets/images/CV-AGNI-Menu.png)
  + [Multi-Domain Segmentation (MSS)](/en/products/multi-domain-segmentation)
  + [Arista NDR](/en/products/network-detection-and-response)
  + [Wireless Intrusion Prevention System](/en/products/wireless-intrusion-prevention-system)
  + [Edge Threat Management](/solutions/security/etm)
  + [Security Services](/en/products/security-services)

  + [DMF Overview](/en/products/danz-monitoring-fabric)Controller-driven visibility fabric delivering multi-tenant monitoring for pervasive, context-driven network observability[![](/assets/images/video/DANZ-Video-Thumbnail.png)](https://www.youtube.com/embed/TfR0ngz8WwE?rel=0&wmode=transparent&modestbranding=1&showinfo=0)
  + [Multi-Cloud Director Data Sheet](/assets/data/pdf/Datasheets/Arista-Multi-Cloud-Director-Datasheet.pdf)

  Back
  + [7800R4 Series](#tab1551)
  + [7800R3 Series](#tab1566)

  + [7700R4 Series Overview](/en/products/7700r4-series)
  + [7700R4 Data Sheet](/assets/data/pdf/Datasheets/7700R4-Distributed-Etherlink-Switch-Datasheet.pdf)

  + [7500R3 Series](#tab592)
  + [7500R Series](#tab66)

  + [7388X5 Series](#tab1172)
  + [7368X4 Series](#tab569)
  + [7358X4 Series](#tab1176)
  + [7300X Series](#tab568)

  + [7280R3 Series](#tab596)
  + [7280R3 Modular Series](/products/7280r3-series/7280r3-modular)

  + [AWE 7200R Series Overview](/en/products/awe-7200r-series)
  + [AWE 7200R Data Sheet](/assets/data/pdf/Datasheets/AWE-7200R-Datasheet.pdf)

  + [7170 Series Overview](/en/products/7170-series)High Performance Multi-function Programmable Platforms[![](/assets/images/video/7170-Company-Page.png)](https://www.youtube.com/embed/eNo78PHYF5k?rel=0&wmode=transparent&modestbranding=1&showinfo=0)
  + [7170 Quick Look](/en/products/7170-series-network-switch-datasheet)
  + [7170 Data Sheet](/assets/data/pdf/Datasheets/7170-Datasheet.pdf)
  + [7170B Data Sheet](/assets/data/pdf/Datasheets/7170B-Datasheet.pdf)
  + [7170 Profile Matrix](/en/support/product-documentation/supported-profile-features)

  + [7130 Series Overview](/en/products/7130-series)
  + [7130 Hardware](#tab486)
  + [7130 Applications](#tab490)
  + [7130 Developer](#tab548)

  + [7060X6 Series](#tab1587)
  + [7060X5 Series](#tab1185)
  + [7060X Series](#tab1184)

  + [7050X4 Series](#tab1180)
  + [7050X3 Series](#tab70)
  + [7050X Series](#tab71)

  + [7020R Series Overview](/en/products/7020r-series)High performance and deep buffer 1 & 10 GbE switch[![](/assets/images/video/7020R_Series.png)](https://www.youtube.com/embed/yIs3ZS0YZe0?rel=0&wmode=transparent&modestbranding=1&showinfo=0)
  + [7020R Quick Look](/en/products/7020r-series-network-switch-datasheet)
  + [7020R Data Sheet](/assets/data/pdf/Datasheets/7020R-48_Datasheet.pdf)

  + [7010X Series Overview](/en/products/7010x-series)High performance and power efficient feature rich datacenter 1GbE switch with 25GbE uplinks[![](/assets/images/video/Mega-Menu-7010x.jpg)](https://www.youtube.com/embed/tsKIZDfV9qk?rel=0&wmode=transparent&modestbranding=1&showinfo=0)
  + [7010X Data Sheet](/assets/data/pdf/Datasheets/7010TX-Datasheet.pdf)
  + [7010X Quick Look](/assets/data/pdf/Datasheets/7010X-Quick-Look.pdf)

  + [750 Series Overview](/en/products/750-series)Cognitive Campus Modular POE Leaf Switches[![](/assets/images/video/Campus-Modular-Leaf-Switches2.jpg)](https://www.youtube.com/embed/QxcPvf_jRmI?rel=0&wmode=transparent&modestbranding=1&showinfo=0)
  + [750 Data Sheet](/assets/data/pdf/Datasheets/CCS-750-Series-Datasheet.pdf)

  + [722XPM Series](#tab1274)
  + [720XP Series](#tab1275)

  + [720D Series Overview](/en/products/720d-series)Arista 720D Series Cognitive Campus POE Leaf Switches![](/assets/images/product/720D-Series-Menu.jpg)
  + [720D Data Sheet](/assets/data/pdf/Datasheets/CCS-720D-Datasheet.pdf)

  + [710P Series Overview](/en/products/710p-series)Compact, fanless, cognitive PoE switches[![](/assets/images/video/710P-Series-Intro.png)](https://www.youtube.com/embed/F4msz12fdc4?rel=0&wmode=transparent&modestbranding=1&showinfo=0)
  + [710P Data Sheet](/assets/data/pdf/Datasheets/CCS-710P-Datasheet.pdf)

  + [Leaf & Spine](#tab730)
  + [Spine & Routing](#tab731)
  + [Leaf & Routing](#tab732)

  + [Hyperscale Data Center](/en/products/hyperscale-data-center)![](/assets/images/product/Hyperscale-Data-Center.jpg)
  + [7700R4 Series](/en/products/7700r4-series)
  + [7368X4 & 7060X4 Series](#tab754)
  + [7260X3 Series](/en/products/7060x-series)
  + [7060X6 Series](/en/products/7060x6-series)
  + [7060X5 Series](/en/products/7060x5-series)
  + [7060X2 & 7060X Series](/en/products/7060x-series)

  + [Cloud Grade Routing](/en/products/cloud-grade-routing)![](/assets/images/product/Cloud-Grade-Routing.jpg)
  + [7800R3 Series](/en/products/7800r3-series)
  + [7500R3 Series](/en/products/7500r3-series)
  + [7280R3 Series](#tab765)
  + [7020R Series](/en/products/7020r-series)

  + [Spine & Edge Routing](#tab769)
  + [Wired](#tab775)
  + [Wireless](#tab1400)
  + [Network Access Control](/en/products/network-access-control)

  + [R-Series Spine & Leaf](/en/products/r-series-spine-leaf)![](/assets/images/product/R-Series.jpg)
  + [7800R3 Series](/en/products/7800r3-series)
  + [7500R3 Series](/en/products/7500r3-series)
  + [7280R3 Series](#tab787)
  + [7020R Series](/en/products/7020r-series)

  + [X-Series Spine & Leaf](/en/products/x-series-spine-leaf)![](/assets/images/product/X-Series.jpg)
  + [7300X Series](#tab792)
  + [7060X Series](#tab797)
  + [7050X Series](#tab803)

  + [Programmable](/en/products/programmable)![](/assets/images/product/Programmable.jpg)
  + [7170 Series](/en/products/7170-series)
  + [7130 Series](#tab810)

  + [7800R4 Series](/en/products/7800r4-series)
  + [7700R4 Series](/en/products/7700r4-series)
  + [7060X6 Series](/en/products/7060x6-series)

  + [400G Solutions](/en/products/400g-solutions)![](/assets/images/product/400G.jpg)
  + [7800R4 Series](/en/products/7800r4-series)
  + [7800R3 Series](/en/products/7800r3-series)
  + [7700R4 Series](/en/products/7700r4-series)
  + [7500R3 Series](/en/products/7500r3-series)
  + [7388X5 Series](/en/products/7388x5-series)
  + [7368X4 Series](/en/products/7368x4-series)
  + [7358X4 Series](/en/products/7358x4-series)
  + [7280R3 Series](/en/products/7280r3-series)
  + [7060X6 Series](/en/products/7060x6-series)
  + [7060X5 Series](/en/products/7060x5-series)
  + [7060X4 Series](/en/products/7060x-series)
  + [7050X4 Series](/en/products/7050x4-series)

  + [Flexible 10G & 1G Leaf](/en/products/flexible-10g-1g-leaf)![](/assets/images/product/10G-1G-Leaf.jpg)
  + [7020R Series](/en/products/7020r-series)
  + [7010X Series](/en/products/7010x-series)
  + [720XP Series](/en/products/720xp-series)

  + [Observability Overview](/en/solutions/network-observability)Pervasive network visibility, security monitoring and contextual analytics for networks at any scale![](/assets/images/product/observability_mm_banner.jpg)
  + [DANZ Monitoring Fabric](/en/products/danz-monitoring-fabric)

  + [Detection and Response Overview](/en/products/network-detection-and-response)Reduce business impact with AI-Driven security for the new network--campus, data center, IoT and cloud.![](/assets/images/logo/Arista-NDR-Thumbnail2.jpg)
  + [Security Services](/en/products/security-services)

  Back
  + [7800R4 Series Overview](/en/products/7800r4-series)
  + [7800R4 Data Sheet](/assets/data/pdf/Datasheets/7800R4-Series-AI-Spine-Datasheet.pdf)

  + [7800R3 Series Overview](/en/products/7800r3-series)Modular 100/400G Spine Switches[![](/assets/images/video/Introducing-the-7800R-Series.jpg)](https://www.youtube.com/embed/Z8VGvGuYw04?rel=0&wmode=transparent&modestbranding=1&showinfo=0)
  + [7800R3 Quick Look](/en/products/7800r3-series-network-switch-quick-look)
  + [7800R3 Data Sheet](/assets/data/pdf/Datasheets/7800R3-Data-Sheet.pdf)

  + [7500R3 Series Overview](/en/products/7500r3-series)Modular 100/400G Spine Switches[![](/assets/images/video/Introducing-7500R3-video.png)](https://www.youtube.com/embed/2X0b5vDJcfs?rel=0&wmode=transparent&modestbranding=1&showinfo=0)
  + [7500R3 Quick Look](/en/products/7500r3-series-network-switch-quick-look)
  + [7500R3 Data Sheet](/assets/data/pdf/Datasheets/7500R3-Data-Sheet.pdf)

  + [7500R Series Overview](/en/products/7500r-series)The industry’s highest performance universal spine and datacenter edge switches[![](/assets/images/video/Arista7500RDatacenterScale2017.png)](https://www.youtube.com/embed/KaEFvEib7WY?rel=0&wmode=transparent&modestbranding=1&showinfo=0)
  + [7500R Quick Look](/en/products/7500r-series-network-switch-datasheet)
  + [7500R Data Sheet](/assets/data/pdf/Datasheets/7500RDataSheet.pdf)

  + [7388X5 Series Overview](/en/products/7388x5-series)400GbE and 200GbE modular solutions for hyperscale cloud networks and I/O intensive environments[![](/assets/images/video/400G-Expanded-Video.png)](https://www.youtube.com/embed/8QLWpKvkbEw?rel=0&wmode=transparent?rel=0&wmode=transparent&modestbranding=1&showinfo=0)
  + [7388X5 Quick Look](/assets/data/pdf/Datasheets/7388X5-Series-Quick-Look.pdf)
  + [7388X5 Data Sheet](/assets/data/pdf/Datasheets/7388X5-Datasheet.pdf)

  + [7368X4 Series Overview](/en/products/7368x4-series)400GbE and 100GbE Modular solutions for hyperscale cloud and I/O intensive environments[![](/assets/images/video/Introducing-the-7368X4-Series.jpg)](https://www.youtube.com/embed/GkcI23iae98?rel=0&wmode=transparent?rel=0&wmode=transparent&modestbranding=1&showinfo=0)
  + [7368X4 Quick Look](/en/products/arista-7368x4-series-datasheet-quick-look)
  + [7368X4 Data Sheet](/assets/data/pdf/Datasheets/7368X4-Datasheet.pdf)

  + [7358X4 Series Overview](/en/products/7358x4-series)400GbE and 100GbE modular solutions for large Enterprises, AI and ML environments[![](/assets/images/video/Arista-7050X4-7358X4-Series-Introduction.png)](https://www.youtube.com/embed/gFKzSm2j5pE?rel=0&wmode=transparent?rel=0&wmode=transparent&modestbranding=1&showinfo=0)
  + [7358X4 Quick Look](/assets/data/pdf/Datasheets/7358X4-Series-Quick-Look.pdf)
  + [7358X4 Data Sheet](/assets/data/pdf/Datasheets/7358X4-Datasheet.pdf)

  + [7300X Series Overview](/en/products/7300-series)High Performance, high density and feature rich 10, 40, & 100GbE systems[![](/assets/images/video/7300X3-Video-Datasheet.jpg)](https://www.youtube.com/embed/WFTeB4sa6PQ?rel=0&wmode=transparent&modestbranding=1&showinfo=0)
  + [7300 Quick Look](/en/products/7300x-series-network-switch-datasheet)
  + [7300 Data Sheet](/assets/data/pdf/Datasheets/7300X_DS.pdf)

  + [7280R3 Series Overview](/en/products/7280r3-series)Dynamic Deep Buffer 25/50/100/400G[![](/assets/images/video/Introducing-the-7280R3-Series2.jpg)](https://www.youtube.com/embed/4tVdVfCINXk?rel=0&wmode=transparent&modestbranding=1&showinfo=0)
  + [7280R3 Data Sheet](/assets/data/pdf/Datasheets/7280R3-Data-Sheet.pdf)
  + [7280R3 Quick Look](/en/products/7280r3-series-network-switch-quick-look)
  + [7280R3A Data Sheet](/assets/data/pdf/Datasheets/7280R3A-Datasheet.pdf)
  + [7280R3A Quick Look](/en/products/7280r3a-series-data-center-switch-quick-look)
  + [7280R3 Modular Data Sheet](/assets/data/pdf/Datasheets/7280R3A-Modular-Datasheet.pdf)
  + [7280R3 Modular Quick Look](/en/products/7280r3a-modular-series-quick-look)

  + [7130 Hardware Overview](/en/products/7130-hardware)FPGA-enabled switches![](/assets/images/article/ip_cores.jpg)
  + [7130 Connect Series](/en/products/7130-connect)
  + [7130E Series](/en/products/7130e-series)
  + [7130L Series](/en/products/7130l-series)
  + [7130LBR Series](/en/products/7130lbr-series)
  + [7132LB Series](/en/products/7132lb-series)
  + [7135LB Series](/en/products/7135lb-series)

  + [7130 Applications Overview](/en/products/7130-applications)FPGA-based network applications![](/assets/images/article/development_kits.png)
  + [MetaWatch App](/en/products/7130-meta-watch)
  + [MetaMux App](/en/products/7130-meta-mux)
  + [MultiAccess App](/en/products/7130-multi-access)
  + [MetaProtect App](/en/products/7130-meta-protect)
  + [Exchange App](/en/products/7130-exchange-app)
  + [Switch App](/en/products/7130-switch-app)

  + [7130 Developer Overview](/en/products/7130-developer)Developer ecosystem![](/assets/images/article/Arista-7130-Developer-stock.png)
  + [IP Cores](/en/products/7130-ip-cores)
  + [Development Kits](/en/products/7130-development-kits)

  + [7060X6 Series Overview](/en/products/7060x6-series)Best of breed 800G solutions optimized for AI workloads and hyperscale cloud environments
  + [7060X6 Quick Look](/en/products/7060x6-series-quick-look)
  + [7060X6 Data Sheet](/assets/data/pdf/Datasheets/7060X6-Datasheet.pdf)

  + [7060X5 Series Overview](/en/products/7060x5-series)High Performance 400G solutions for hyperscale cloud networks and I/O intensive environments[![](/assets/images/video/400G-Expanded-Video.png)](https://www.youtube.com/embed/8QLWpKvkbEw?rel=0&wmode=transparent&modestbranding=1&showinfo=0)
  + [7060X5 Quick Look](/assets/data/pdf/Datasheets/7060X4_7060X5-QuickLook.pdf)
  + [7060X5 Data Sheet](/assets/data/pdf/Datasheets/7060X5-Datasheet.pdf)

  + [7060X Series Overview](/en/products/7060x-series)25/100GbE and 10/40GbE Leaf and Spine solutions for cloud scale and open networking[![](/assets/images/video/7060X_Introduction1.png)](https://www.youtube.com/embed/MonBNjDni7U?rel=0&wmode=transparent&modestbranding=1&showinfo=0)
  + [7060X & 7260X Quick Look](/en/products/7060x-and-7260x-series-network-switch-quick-look)
  + [7060X & 7260X Data Sheet](/assets/data/pdf/Datasheets/7060X_7260X_DS.pdf)

  + [7050X4 Series Overview](/en/products/7050x4-series)Versatile 100G / 400G leaf and spine switches with industry leading performance, rich features and power efficiency[![](/assets/images/video/Arista-7050X4-7358X4-Series-Introduction.png)](https://www.youtube.com/embed/gFKzSm2j5pE?rel=0&wmode=transparent&modestbranding=1&showinfo=0)
  + [7050X4 Quick Look](/assets/data/pdf/Datasheets/7050X4-Series-Quick-Look.pdf)
  + [7050X4 Data Sheet](/assets/data/pdf/Datasheets/7050X4-Datasheet.pdf)

  + [7050X3 Series Overview](/en/products/7050x3-series)Versatile leaf and spine switches with industry leading performance, advanced features and power efficiency[![](/assets/images/video/Arista-7050X3-Series-Introduction-v2.png)](https://www.youtube.com/embed/ygRAgiNanmU?rel=0&wmode=transparent&modestbranding=1&showinfo=0)
  + [7050X3 Quick Look](/en/products/7050x3-series-network-switch-datasheet)
  + [7050X3 Data Sheet](/assets/data/pdf/Datasheets/7050X3-Datasheet.pdf)

  + [7050X Series Overview](/en/products/7050x-series)Cloud scale fixed configuration leaf and spine switches[![](/assets/images/video/7050X_series_embed_play.png)](https://www.youtube.com/embed/R4ilmyYJkQU?rel=0&wmode=transparent&modestbranding=1&showinfo=0)
  + [7050X Quick Look](/en/products/7050x-series-network-switch-datasheet)
  + [7050X Data Sheet](/assets/data/pdf/Datasheets/7050TX-128_48_Datasheet_S.pdf)

  + [722XPM Series Overview](/en/products/722xpm-series)Secure Cognitive Campus POE Leaf Switches![](/assets/images/722x-mega-menu.png)
  + [722XPM Data Sheet](/assets/data/pdf/Datasheets/CCS-722XP-Datasheet.pdf)

  + [720XP Series Overview](/en/products/720xp-series)Cognitive Campus POE Leaf Switches[![](/assets/images/video/Arista-Campus-Leaf-Switches.jpg)](https://www.youtube.com/embed/PTbe-NNAqog?rel=0&wmode=transparent&modestbranding=1&showinfo=0)
  + [720XP Data Sheet](/assets/data/pdf/Datasheets/CCS-720XP-Datasheet.pdf)

  + [Leaf & Spine](/en/products/leaf-spine)![](/assets/images/product/UCN-Leaf-Spine.jpg)
  + [R Series](/en/products/r-series-spine-leaf)
  + [X Series](/en/products/x-series-spine-leaf)
  + [7170 Series](/en/products/7170-series)

  + [Spine & Routing](/en/products/spine-routing)![](/assets/images/product/UCN-Spine-Routing.jpg)
  + [7800R4 Series](/en/products/7800r4-series)
  + [7800R3 Series](/en/products/7800r3-series)
  + [7500R3 Series](/en/products/7500r3-series)
  + [7280R3 Modular Series](/products/7280r3-series/7280r3-modular)
  + [7368X4 Series](/en/products/7368x4-series)
  + [7300X3 Series](/en/products/7300-series)
  + [7300X Series](/en/products/7300-series)

  + [Leaf & Routing](/en/products/leaf-routing)![](/assets/images/product/UCN-Leaf-Routing.jpg)
  + [7280R3 Series](/en/products/7280r3-series)
  + [7280R3 Modular Series](/products/7280r3-series/7280r3-modular)
  + [7260X3 Series](/en/products/7060x-series)
  + [7060X4 Series](/en/products/7060x-series)
  + [7060X2 & 7060X Series](/en/products/7060x-series)
  + [7050X3 Series](/en/products/7050x3-series)
  + [7050X Series](/en/products/7050x-series)

  + [7368X4 Series](/en/products/7368x4-series)
  + [7060X4 Series](/en/products/7060x-series)

  + [7280R3 Series](/en/products/7280r3-series)
  + [7280R3 Modular Series](/products/7280r3-series/7280r3-modular)

  + [Spine & Edge Routing](/en/products/spine-edge-routing)![](/assets/images/product/Spine-Edge-Routing.jpg)
  + [7300X Series](/en/products/7300-series)
  + [7280R3 Series](/en/products/7280r3-series)
  + [7050X Series](/en/products/7050x-series)
  + [7020R Series](/en/products/7020r-series)

  + [Wired & Wireless](/en/products/wired-wireless)![](/assets/images/product/Wired-Wireless.jpg)
  + [7300X Series](/en/products/7300-series)
  + [7050X Series](/en/products/7050x-series)
  + [750 Series](/en/products/750-series)
  + [720XP Series](/en/products/720xp-series)
  + [722XPM Series](/en/products/722xpm-series)
  + [720D Series](/en/products/720d-series)
  + [710P Series](/en/products/710p-series)
  + [Cognitive Wi-Fi](/en/products/cloudvision-cue)

  + [Wi-Fi 6 Series](/en/products/wifi6-series)
  + [Wi-Fi 6E Series](/en/products/wifi6e-series)

  + [7280R3 Series](/en/products/7280r3-series)
  + [7280R3 Modular Series](/products/7280r3-series/7280r3-modular)

  + [7300X Series Spine](/en/products/7300x-series-spine)![](/assets/images/product/X-Series.jpg)
  + [7300X3 Series](/en/products/7300-series)
  + [7300X Series](/en/products/7300-series)

  + [7060X Series Spine](/en/products/7060x-series-spine)![](/assets/images/product/X-Series.jpg)
  + [7388X5 Series](/en/products/7388x5-series)
  + [7368X4 Series](/en/products/7368x4-series)
  + [7060X5 Series](/en/products/7060x5-series)
  + [7060X4 Series](/en/products/7060x-series)
  + [7260X3 Series](/en/products/7060x-series)
  + [7060X2 and 7060X](/en/products/7060x-series)

  + [7050X Series Spine](/en/products/7050x-series-spine)![](/assets/images/product/X-Series.jpg)
  + [7358X4 Series](/en/products/7358x4-series)
  + [7050X4 Series](/en/products/7050x4-series)
  + [7050X3 Series](/en/products/7050x3-series)
  + [7050X Series](/en/products/7050x-series)

  + [7130 Series Overview](/en/products/7130-series)
  + [7130 Hardware](/en/products/7130-hardware)
  + [7130 Applications](/en/products/7130-applications)
  + [7130 Developer](/en/products/7130-developer)
* Partner
  + [Partner Program](/en/partner/partner-program)
  + [Become a Partner](/en/partner/partner-application)
  + [Partner Code of Ethics and Business Conduct](/assets/data/pdf/Arista-Partner-Code-of-Ethics-and-Business-Conduct.pdf)
  + [Channel Partner Portal](/en/partner/partner-portal)
  + [Technology Partners](/en/partner/technology-partners)
* Support
  + [Support Overview](/en/support)
  + [Customer Support](/en/support/customer-support)
  + [Product Documentation](/en/support/product-documentation)
  + [Product Certifications](/en/support/product-certificate)
  + [Advisories & Notices](/en/support/advisories-notices)
  + [Product Lifecycle](/en/support/product-lifecycle)
  + [Software Download](/en/support/software-download)
  + [Transfer of Information](/en/support/toi)
  + [Support Portal](/en/community/support-portal)
  + [Training Partners](https://www.sdn-pros.com)
  + [Software Bug Portal](/en/support/software-bug-portal)
  + [CVP Upgrade Path](/en/support/cvp-upgrade-path)
  + [MLAG ISSU Check](/en/support/mlag-portal)
  + [Tech Library Portal](/en/tech-library)
* Company
  + [Company Overview](/en/company/company-overview)
  + [Corporate Responsibility](/en/company/corporate-responsibility)
  + [Management Team](/en/company/management-team)
  + [Blogs](https://blogs.arista.com/blog)
  + [Investor Relations](https://investors.arista.com)
  + [Events Calendar](https://events.arista.com/events-calendar)
  + [Webinars](/en/company/news/webinars)
  + [Video Library](/en/company/news/video-library)
  + [Testimonials](/en/company/customer-testimonials)
  + [Careers](/en/careers)
  + [News](/en/company/news)
  + [Contact Us](/en/company/contact-us)

* # Book Search Results

Total 6 results found for the keyword of "eos section 6 7 managing eos extensions"

[eos 4.33.1F User Manual - managing eos extensions](/en/um-eos/eos-managing-eos-extensions?searchword=eos%20section%206%207%20managing%20eos%20extensions)

managing eos extensions
The most simple and efficient way to make the most of the extensibility on which eos is built is
through the use of extensions. An extension is a pre-packaged optional feature ...

[eos 4.33.1F User Manual - AVA Sensor](/en/um-eos/eos-ava-sensor?searchword=eos%20section%206%207%20managing%20eos%20extensions)

... be enabled or disabled on the
fly without impacting regular packet forwarding functionality.
AVA Switch Sensor Extension
AVA switch sensor extends eos telemetry for network threat detection. The FlowWatcher
agent ...

[eos 4.33.1F User Manual - Switch Administration Commands](/en/um-eos/eos-switch-administration-commands?searchword=eos%20section%206%207%20managing%20eos%20extensions)

...
Note: In eos releases prior to 4.23.2, this command identified system peers
with IPv6 addresses by their reference IDs (the first four octets of the MD5 hash of
the IPv6 address). In later releases, ...

[eos 4.33.1F User Manual - Administering the Switch](/en/um-eos/eos-administering-the-switch?searchword=eos%20section%206%207%20managing%20eos%20extensions)

... sections:
managing the Switch Name
System Clock and Time Protocols
managing Display Attributes
Logging of Event Notifications
Event Monitor
managing eos extensions
Switch Administration
Commands ...

[eos 4.33.1F User Manual - Event Monitor](/en/um-eos/eos-event-monitor?searchword=eos%20section%206%207%20managing%20eos%20extensions)

Event Monitor
The event monitor writes system
event records to local files for access by SQLite database commands.
Note: Beginning with release eos-4.20.5F, event-monitor is not enabled by
default. ...

[eos 4.33.1F User Manual - Command-Line Interface (CLI)](/en/um-eos/eos-command-line-interface-cli?searchword=eos%20section%206%207%20managing%20eos%20extensions)

... CLI.
This chapter includes these sections:
Accessing the eos CLI
Processing Commands
Kernel-based Virtual Machine Commands and Configuration
Switch Platforms
Command Modes
managing Switch
Configuration ...

Get In Touch Today
[Contact Us](/en/company/contact-us)

![Arista](/templates/arista_v2/img/logo_arista_blue.png)
[Facebook](https://www.facebook.com/AristaNW) [Twitter](https://twitter.com/%40AristaNetworks) [LinkedIn](http://www.linkedin.com/company/arista-networks-inc)

* Support
  + [Support & Services](/en/support/customer-support)
  + [Training Partners](https://www.sdn-pros.com)
  + [Product Documentation](/en/support/product-documentation)
  + [Software Downloads](/en/support/software-download)
* Contacts & Help
  + [Contact Arista](/en/company/contact-us)
  + [Contact Technical Support](/en/support/customer-support)
  + [Order Status](https://orders.arista.com)
* News
  + [News Room](/en/company/news/in-the-news)
  + [Events Calendar](https://events.arista.com/events-calendar)
  + [Blogs](/blogs)
* About Arista
  + [Company](/en/company/company-overview)
  + [Management Team](/en/company/management-team)
  + [Careers](/en/careers)
  + [Investor Relations](http://investors.arista.com/)

© 2025 Arista Networks, Inc. All rights reserved.

* [Terms of Use](/en/terms-of-use)
* [Privacy Policy](/en/privacy-policy)
* [Fraud Alert](/en/fraud-alert)
* [Sitemap](/en/sitemap)



=== Content from cdn.kernel.org_b430629f_20250125_020644.html ===
commit 39773be9e3dfce1faf3a330bfda8f6d7a5824f9b
Author: Greg Kroah-Hartman
Date: Mon Nov 4 04:35:38 2013 -0800
Linux 3.11.7
commit 6aa9338a468dc3df23dd4a9310b90a5afec67c5e
Author: Enrico Mioso
Date: Tue Oct 15 15:06:47 2013 +0200
usb: serial: option: blacklist Olivetti Olicard200
commit fd8573f5828873343903215f203f14dc82de397c upstream.
Interface 6 of this device speaks QMI as per tests done by us.
Credits go to Antonella for providing the hardware.
Signed-off-by: Enrico Mioso
Signed-off-by: Antonella Pellizzari
Tested-by: Dan Williams
Signed-off-by: Greg Kroah-Hartman
commit 8fe6e9028f16f47b136b74db964b7a9d4bdd739d
Author: Greg Kroah-Hartman
Date: Sat Oct 5 18:14:18 2013 -0700
USB: serial: option: add support for Inovia SEW858 device
commit f4c19b8e165cff1a6607c21f8809441d61cab7ec upstream.
This patch adds the device id for the Inovia SEW858 device to the option driver.
Reported-by: Pavel Parkhomenko
Tested-by: Pavel Parkhomenko
Signed-off-by: Greg Kroah-Hartman
commit c158ec4a6052b94840cb5c75cedbc2ecd1f450b1
Author: Diego Elio Pettenò
Date: Tue Oct 8 20:03:37 2013 +0100
USB: serial: ti\_usb\_3410\_5052: add Abbott strip port ID to combined table as well.
commit c9d09dc7ad106492c17c587b6eeb99fe3f43e522 upstream.
Without this change, the USB cable for Freestyle Option and compatible
glucometers will not be detected by the driver.
Signed-off-by: Diego Elio Pettenò
Signed-off-by: Greg Kroah-Hartman
commit 7c0cc784b789f951372fd8859b40969fec27810e
Author: Roel Kluin
Date: Mon Oct 14 23:21:15 2013 +0200
serial: vt8500: add missing braces
commit d969de8d83401683420638c8107dcfedb2146f37 upstream.
Due to missing braces on an if statement, in presence of a device\_node a
port was always assigned -1, regardless of any alias entries in the
device tree. Conversely, if device\_node was NULL, an unitialized port
ended up being used.
This patch adds the missing braces, fixing the issues.
Signed-off-by: Roel Kluin
Acked-by: Tony Prisk
Signed-off-by: Greg Kroah-Hartman
commit 60fd01d9c7c5114e2bafaf5c57d2300aa9559c02
Author: Solomon Peachy
Date: Wed Oct 9 12:15:11 2013 -0400
wireless: cw1200: acquire hwbus lock around cw1200\_irq\_handler() call.
commit 4978705d26149a629b9f50ff221caed6f1ae3048 upstream.
This fixes "lost interrupt" problems that occurred on SPI-based systems.
cw1200\_irq\_handler() expects the hwbus to be locked, but on the
SPI-path, that lock wasn't taken (unlike in the SDIO-path, where the
generic SDIO-code takes care of acquiring the lock).
Signed-off-by: David Mosberger
Signed-off-by: Solomon Peachy
Signed-off-by: John W. Linville
Signed-off-by: Greg Kroah-Hartman
commit 4e30af352149c4d57d1857c2d734908917b08dac
Author: Johannes Berg
Date: Fri Oct 11 14:47:05 2013 +0200
wireless: radiotap: fix parsing buffer overrun
commit f5563318ff1bde15b10e736e97ffce13be08bc1a upstream.
When parsing an invalid radiotap header, the parser can overrun
the buffer that is passed in because it doesn't correctly check
1) the minimum radiotap header size
2) the space for extended bitmaps
The first issue doesn't affect any in-kernel user as they all
check the minimum size before calling the radiotap function.
The second issue could potentially affect the kernel if an skb
is passed in that consists only of the radiotap header with a
lot of extended bitmaps that extend past the SKB. In that case
a read-only buffer overrun by at most 4 bytes is possible.
Fix this by adding the appropriate checks to the parser.
Reported-by: Evan Huus
Signed-off-by: Johannes Berg
Signed-off-by: Greg Kroah-Hartman
commit 832307cb856d0e02740f255d90c29e31fba47606
Author: Hans-Frieder Vogt
Date: Sun Oct 6 21:13:40 2013 +0200
w1 - call request\_module with w1 master mutex unlocked
commit bc04d76d6942068f75c10790072280b847ec6f1f upstream.
request\_module for w1 slave modules needs to be called with the w1
master mutex unlocked. Because w1\_attach\_slave\_device gets always(?)
called with mutex locked, we need to temporarily unlock the w1 master
mutex for the loading of the w1 slave module.
Signed-off by: Hans-Frieder Vogt
Acked-by: Evgeniy Polyakov
Signed-off-by: Greg Kroah-Hartman
commit 7c0c220dc74fbc153c5c5c8383169c0915d22286
Author: Fengguang Wu
Date: Wed Oct 16 13:47:03 2013 -0700
writeback: fix negative bdi max pause
commit e3b6c655b91e01a1dade056cfa358581b47a5351 upstream.
Toralf runs trinity on UML/i386. After some time it hangs and the last
message line is
BUG: soft lockup - CPU#0 stuck for 22s! [trinity-child0:1521]
It's found that pages\_dirtied becomes very large. More than 1000000000
pages in this case:
period = HZ \* pages\_dirtied / task\_ratelimit;
BUG\_ON(pages\_dirtied > 2000000000);
BUG\_ON(pages\_dirtied > 1000000000); <---------
UML debug printf shows that we got negative pause here:
ick: pause : -984
ick: pages\_dirtied : 0
ick: task\_ratelimit: 0
pause:
+ if (pause < 0) {
+ extern int printf(char \*, ...);
+ printf("ick : pause : %li\n", pause);
+ printf("ick: pages\_dirtied : %lu\n", pages\_dirtied);
+ printf("ick: task\_ratelimit: %lu\n", task\_ratelimit);
+ BUG\_ON(1);
+ }
trace\_balance\_dirty\_pages(bdi,
Since pause is bounded by [min\_pause, max\_pause] where min\_pause is also
bounded by max\_pause. It's suspected and demonstrated that the
max\_pause calculation goes wrong:
ick: pause : -717
ick: min\_pause : -177
ick: max\_pause : -717
ick: pages\_dirtied : 14
ick: task\_ratelimit: 0
The problem lies in the two "long = unsigned long" assignments in
bdi\_max\_pause() which might go negative if the highest bit is 1, and the
min\_t(long, ...) check failed to protect it falling under 0. Fix all of
them by using "unsigned long" throughout the function.
Signed-off-by: Fengguang Wu
Reported-by: Toralf Förster
Tested-by: Toralf Förster
Reviewed-by: Jan Kara
Cc: Richard Weinberger
Cc: Geert Uytterhoeven
Signed-off-by: Andrew Morton
Signed-off-by: Linus Torvalds
Signed-off-by: Greg Kroah-Hartman
commit 40e806494937a96e21b01b3a72c212c4a8e45c01
Author: David Henningsson
Date: Mon Oct 14 10:16:22 2013 +0200
ALSA: hda - Fix inverted internal mic not indicated on some machines
commit ccb041571b73888785ef7828a276e380125891a4 upstream.
The create\_bind\_cap\_vol\_ctl does not create any control indicating
that an inverted dmic is present. Therefore, create multiple
capture volumes in this scenario, so we always have some indication
that the internal mic is inverted.
This happens on the Lenovo Ideapad U310 as well as the Lenovo Yoga 13
(both are based on the CX20590 codec), but the fix is generic and
could be needed for other codecs/machines too.
Thanks to Szymon Acedański for the pointer and a draft patch.
BugLink: https://bugs.launchpad.net/bugs/1239392
BugLink: https://bugs.launchpad.net/bugs/1227491
Reported-by: Szymon Acedański
Signed-off-by: David Henningsson
Signed-off-by: Takashi Iwai
Signed-off-by: Greg Kroah-Hartman
commit f4d891400a11576d76a7dfd0ff62c17fd371800c
Author: Takashi Iwai
Date: Mon Oct 14 16:02:15 2013 +0200
ALSA: us122l: Fix pcm\_usb\_stream mmapping regression
commit ac536a848a1643e4b87e8fbd376a63091afc2ccc upstream.
The pcm\_usb\_stream plugin requires the mremap explicitly for the read
buffer, as it expands itself once after reading the required size.
But the commit [314e51b9: mm: kill vma flag VM\_RESERVED and
mm->reserved\_vm counter] converted blindly to a combination of
VM\_DONTEXPAND | VM\_DONTDUMP like other normal drivers, and this
resulted in the failure of mremap().
For fixing this regression, we need to remove VM\_DONTEXPAND for the
read-buffer mmap.
Reported-and-tested-by: James Miller
Signed-off-by: Takashi Iwai
Signed-off-by: Greg Kroah-Hartman
commit 08899aecf62e61328acbadd35b8c98dbda7a5ec4
Author: Hugh Dickins
Date: Wed Oct 16 13:47:08 2013 -0700
mm: fix BUG in \_\_split\_huge\_page\_pmd
commit 750e8165f5e87b6a142be953640eabb13a9d350a upstream.
Occasionally we hit the BUG\_ON(pmd\_trans\_huge(\*pmd)) at the end of
\_\_split\_huge\_page\_pmd(): seen when doing madvise(,,MADV\_DONTNEED).
It's invalid: we don't always have down\_write of mmap\_sem there: a racing
do\_huge\_pmd\_wp\_page() might have copied-on-write to another huge page
before our split\_huge\_page() got the anon\_vma lock.
Forget the BUG\_ON, just go back and try again if this happens.
Signed-off-by: Hugh Dickins
Acked-by: Kirill A. Shutemov
Cc: Andrea Arcangeli
Cc: Naoya Horiguchi
Cc: David Rientjes
Signed-off-by: Andrew Morton
Signed-off-by: Linus Torvalds
Signed-off-by: Greg Kroah-Hartman
commit 4e31a0e20aa1788668b0322396c0e16e06b302da
Author: Weijie Yang
Date: Wed Oct 16 13:46:54 2013 -0700
mm/zswap: bugfix: memory leak when re-swapon
commit aa9bca05a467c61dcea4142b2877d5392de5bdce upstream.
zswap\_tree is not freed when swapoff, and it got re-kmalloced in swapon,
so a memory leak occurs.
Free the memory of zswap\_tree in zswap\_frontswap\_invalidate\_area().
Signed-off-by: Weijie Yang
Reviewed-by: Bob Liu
Cc: Minchan Kim
Reviewed-by: Minchan Kim
From: Weijie Yang
Subject: mm/zswap: bugfix: memory leak when invalidate and reclaim occur concurrently
Signed-off-by: Greg Kroah-Hartman
Consider the following scenario:
thread 0: reclaim entry x (get refcount, but not call zswap\_get\_swap\_cache\_page)
thread 1: call zswap\_frontswap\_invalidate\_page to invalidate entry x.
finished, entry x and its zbud is not freed as its refcount != 0
now, the swap\_map[x] = 0
thread 0: now call zswap\_get\_swap\_cache\_page
swapcache\_prepare return -ENOENT because entry x is not used any more
zswap\_get\_swap\_cache\_page return ZSWAP\_SWAPCACHE\_NOMEM
zswap\_writeback\_entry do nothing except put refcount
Now, the memory of zswap\_entry x and its zpage leak.
Modify:
- check the refcount in fail path, free memory if it is not referenced.
- use ZSWAP\_SWAPCACHE\_FAIL instead of ZSWAP\_SWAPCACHE\_NOMEM as the fail path
can be not only caused by nomem but also by invalidate.
[akpm@linux-foundation.org: coding-style fixes]
Signed-off-by: Weijie Yang
Reviewed-by: Bob Liu
Cc: Minchan Kim
Cc:
Acked-by: Seth Jennings
Signed-off-by: Andrew Morton
Signed-off-by: Linus Torvalds
commit 72d2ddf5f2218861f41b7d1a9da4c130d6d81911
Author: Cyrill Gorcunov
Date: Wed Oct 16 13:46:51 2013 -0700
mm: migration: do not lose soft dirty bit if page is in migration state
commit c3d16e16522fe3fe8759735850a0676da18f4b1d upstream.
If page migration is turned on in config and the page is migrating, we
may lose the soft dirty bit. If fork and mprotect are called on
migrating pages (once migration is complete) pages do not obtain the
soft dirty bit in the correspond pte entries. Fix it adding an
appropriate test on swap entries.
Signed-off-by: Cyrill Gorcunov
Cc: Pavel Emelyanov
Cc: Andy Lutomirski
Cc: Matt Mackall
Cc: Xiao Guangrong
Cc: Marcelo Tosatti
Cc: KOSAKI Motohiro
Cc: Stephen Rothwell
Cc: Peter Zijlstra
Cc: "Aneesh Kumar K.V"
Cc: Naoya Horiguchi
Cc: Mel Gorman
Signed-off-by: Andrew Morton
Signed-off-by: Linus Torvalds
Signed-off-by: Greg Kroah-Hartman
commit c0329006f4b3c7ab4dde75aa003de50982a44b91
Author: James Ralston
Date: Tue Sep 24 16:47:55 2013 -0700
i2c: ismt: initialize DMA buffer
commit bf4169100c909667ede6af67668b3ecce6928343 upstream.
This patch adds code to initialize the DMA buffer to compensate for
possible hardware data corruption.
Signed-off-by: James Ralston
[wsa: changed to use 'sizeof']
Signed-off-by: Wolfram Sang
Cc: Jean Delvare
Signed-off-by: Greg Kroah-Hartman
commit b04b881391b7779fe7af1110361d4a6487391000
Author: Mikulas Patocka
Date: Wed Oct 16 03:17:47 2013 +0100
dm snapshot: fix data corruption
commit e9c6a182649f4259db704ae15a91ac820e63b0ca upstream.
This patch fixes a particular type of data corruption that has been
encountered when loading a snapshot's metadata from disk.
When we allocate a new chunk in persistent\_prepare, we increment
ps->next\_free and we make sure that it doesn't point to a metadata area
by further incrementing it if necessary.
When we load metadata from disk on device activation, ps->next\_free is
positioned after the last used data chunk. However, if this last used
data chunk is followed by a metadata area, ps->next\_free is positioned
erroneously to the metadata area. A newly-allocated chunk is placed at
the same location as the metadata area, resulting in data or metadata
corruption.
This patch changes the code so that ps->next\_free skips the metadata
area when metadata are loaded in function read\_exceptions.
The patch also moves a piece of code from persistent\_prepare\_exception
to a separate function skip\_metadata to avoid code duplication.
CVE-2013-4299
Signed-off-by: Mikulas Patocka
Cc: Mike Snitzer
Signed-off-by: Alasdair G Kergon
Signed-off-by: Greg Kroah-Hartman
commit a4e22a835e37fd78fb3bd91efb29b26d0281f264
Author: Mika Westerberg
Date: Tue Oct 1 17:35:43 2013 +0300
gpio/lynxpoint: check if the interrupt is enabled in IRQ handler
commit 03d152d5582abc8a1c19cb107164c3724bbd4be4 upstream.
Checking LP\_INT\_STAT is not enough in the interrupt handler because its
contents get updated regardless of whether the pin has interrupt enabled or
not. This causes the driver to loop forever for GPIOs that are pulled up.
Fix this by checking the interrupt enable bit for the pin as well.
Signed-off-by: Mika Westerberg
Acked-by: Mathias Nyman
Signed-off-by: Linus Walleij
Signed-off-by: Greg Kroah-Hartman
commit 9f7cc4574847fc72e194bda5803e1541e65b796c
Author: Miklos Szeredi
Date: Thu Oct 10 16:48:19 2013 +0200
ext[34]: fix double put in tmpfile
commit 43ae9e3fc70ca0057ae0a24ef5eedff05e3fae06 upstream.
d\_tmpfile() already swallowed the inode ref.
Signed-off-by: Miklos Szeredi
Signed-off-by: Al Viro
Signed-off-by: Greg Kroah-Hartman
commit b0e0b97c59f6116b12cd33c59aa803a8aac1f6e0
Author: Linus Walleij
Date: Mon Oct 7 15:19:53 2013 +0200
ARM: integrator: deactivate timer0 on the Integrator/CP
commit 29114fd7db2fc82a34da8340d29b8fa413e03dca upstream.
This fixes a long-standing Integrator/CP regression from
commit 870e2928cf3368ca9b06bc925d0027b0a56bcd8e
"ARM: integrator-cp: convert use CLKSRC\_OF for timer init"
When this code was introduced, the both aliases pointing the
system to use timer1 as primary (clocksource) and timer2
as secondary (clockevent) was ignored, and the system would
simply use the first two timers found as clocksource and
clockevent.
However this made the system timeline accelerate by a
factor x25, as it turns out that the way the clocking
actually works (totally undocumented and found after some
trial-and-error) is that timer0 runs @ 25MHz and timer1
and timer2 runs @ 1MHz. Presumably this divider setting
is a boot-on default and configurable albeit the way to
configure it is not documented.
So as a quick fix to the problem, let's mark timer0 as
disabled, so the code will chose timer1 and timer2 as it
used to.
This also deletes the two aliases for the primary and
secondary timer as they have been superceded by the
auto-selection
Cc: Rob Herring
Cc: Russell King
Signed-off-by: Linus Walleij
Signed-off-by: Olof Johansson
Signed-off-by: Greg Kroah-Hartman
commit 3ec722ae43d74f5ab13e89999245c1ce862fe3ea
Author: AKASHI Takahiro
Date: Wed Oct 9 15:58:29 2013 +0100
ARM: 7851/1: check for number of arguments in syscall\_get/set\_arguments()
commit 3c1532df5c1b54b5f6246cdef94eeb73a39fe43a upstream.
In ftrace\_syscall\_enter(),
syscall\_get\_arguments(..., 0, n, ...)
if (i == 0) {  ...; n--;}
memcpy(..., n \* sizeof(args[0]));
If 'number of arguments(n)' is zero and 'argument index(i)' is also zero in
syscall\_get\_arguments(), none of arguments should be copied by memcpy().
Otherwise 'n--' can be a big positive number and unexpected amount of data
will be copied. Tracing system calls which take no argument, say sync(void),
may hit this case and eventually make the system corrupted.
This patch fixes the issue both in syscall\_get\_arguments() and
syscall\_set\_arguments().
Acked-by: Will Deacon
Signed-off-by: AKASHI Takahiro
Signed-off-by: Will Deacon
Signed-off-by: Russell King
Signed-off-by: Greg Kroah-Hartman
commit 9b013b05b356b9ede635bb580ab9e21a7d2c6382
Author: Mariusz Ceier
Date: Mon Oct 21 19:45:04 2013 +0200
davinci\_emac.c: Fix IFF\_ALLMULTI setup
[ Upstream commit d69e0f7ea95fef8059251325a79c004bac01f018 ]
When IFF\_ALLMULTI flag is set on interface and IFF\_PROMISC isn't,
emac\_dev\_mcast\_set should only enable RX of multicasts and reset
MACHASH registers.
It does this, but afterwards it either sets up multicast MACs
filtering or disables RX of multicasts and resets MACHASH registers
again, rendering IFF\_ALLMULTI flag useless.
This patch fixes emac\_dev\_mcast\_set, so that multicast MACs filtering and
disabling of RX of multicasts are skipped when IFF\_ALLMULTI flag is set.
Tested with kernel 2.6.37.
Signed-off-by: Mariusz Ceier
Acked-by: Mugunthan V N
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 35bb207b3d98b20fb2eb2e8d74f2c584b43ded4b
Author: Hannes Frederic Sowa
Date: Mon Oct 21 06:17:15 2013 +0200
ipv6: probe routes asynchronous in rt6\_probe
[ Upstream commit c2f17e827b419918c856131f592df9521e1a38e3 ]
Routes need to be probed asynchronous otherwise the call stack gets
exhausted when the kernel attemps to deliver another skb inline, like
e.g. xt\_TEE does, and we probe at the same time.
We update neigh->updated still at once, otherwise we would send to
many probes.
Cc: Julian Anastasov
Signed-off-by: Hannes Frederic Sowa
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 1881ed07b5e53e4d850fd1e58b715e1772592421
Author: Julian Anastasov
Date: Sun Oct 20 15:43:05 2013 +0300
netfilter: nf\_conntrack: fix rt6i\_gateway checks for H.323 helper
[ Upstream commit 56e42441ed54b092d6c7411138ce60d049e7c731 ]
Now when rt6\_nexthop() can return nexthop address we can use it
for proper nexthop comparison of directly connected destinations.
For more information refer to commit bbb5823cf742a7
("netfilter: nf\_conntrack: fix rt\_gateway checks for H.323 helper").
Signed-off-by: Julian Anastasov
Acked-by: Hannes Frederic Sowa
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 3125f8ba70a008cd14251eafbd22b5d23d90edf2
Author: Julian Anastasov
Date: Sun Oct 20 15:43:04 2013 +0300
ipv6: fill rt6i\_gateway with nexthop address
[ Upstream commit 550bab42f83308c9d6ab04a980cc4333cef1c8fa ]
Make sure rt6i\_gateway contains nexthop information in
all routes returned from lookup or when routes are directly
attached to skb for generated ICMP packets.
The effect of this patch should be a faster version of
rt6\_nexthop() and the consideration of local addresses as
nexthop.
Signed-off-by: Julian Anastasov
Acked-by: Hannes Frederic Sowa
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 0c80c90ad1632d30f310d5b6f5397ef3eba245d6
Author: Julian Anastasov
Date: Sun Oct 20 15:43:03 2013 +0300
ipv6: always prefer rt6i\_gateway if present
[ Upstream commit 96dc809514fb2328605198a0602b67554d8cce7b ]
In v3.9 6fd6ce2056de2709 ("ipv6: Do not depend on rt->n in
ip6\_finish\_output2()." changed the behaviour of ip6\_finish\_output2()
such that the recently introduced rt6\_nexthop() is used
instead of an assigned neighbor.
As rt6\_nexthop() prefers rt6i\_gateway only for gatewayed
routes this causes a problem for users like IPVS, xt\_TEE and
RAW(hdrincl) if they want to use different address for routing
compared to the destination address.
Another case is when redirect can create RTF\_DYNAMIC
route without RTF\_GATEWAY flag, we ignore the rt6i\_gateway
in rt6\_nexthop().
Fix the above problems by considering the rt6i\_gateway if
present, so that traffic routed to address on local subnet is
not wrongly diverted to the destination address.
Thanks to Simon Horman and Phil Oester for spotting the
problematic commit.
Thanks to Hannes Frederic Sowa for his review and help in testing.
Reported-by: Phil Oester
Reported-by: Mark Brooks
Signed-off-by: Julian Anastasov
Acked-by: Hannes Frederic Sowa
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 9d65a3cc82f3824bfa145f869b1076b3941463d4
Author: Hannes Frederic Sowa
Date: Tue Oct 22 00:07:47 2013 +0200
inet: fix possible memory corruption with UDP\_CORK and UFO
[ This is a simplified -stable version of a set of upstream commits. ]
This is a replacement patch only for stable which does fix the problems
handled by the following two commits in -net:
"ip\_output: do skb ufo init for peeked non ufo skb as well" (e93b7d748be887cd7639b113ba7d7ef792a7efb9)
"ip6\_output: do skb ufo init for peeked non ufo skb as well" (c547dbf55d5f8cf615ccc0e7265e98db27d3fb8b)
Three frames are written on a corked udp socket for which the output
netdevice has UFO enabled. If the first and third frame are smaller than
the mtu and the second one is bigger, we enqueue the second frame with
skb\_append\_datato\_frags without initializing the gso fields. This leads
to the third frame appended regulary and thus constructing an invalid skb.
This fixes the problem by always using skb\_append\_datato\_frags as soon
as the first frag got enqueued to the skb without marking the packet
as SKB\_GSO\_UDP.
The problem with only two frames for ipv6 was fixed by "ipv6: udp
packets following an UFO enqueued packet need also be handled by UFO"
(2811ebac2521ceac84f2bdae402455baa6a7fb47).
Cc: Jiri Pirko
Cc: Eric Dumazet
Cc: David Miller
Signed-off-by: Hannes Frederic Sowa
Signed-off-by: Greg Kroah-Hartman
commit ed6b1f4d5446e510d42577f0c55c748ef9cd36c8
Author: Seif Mazareeb
Date: Thu Oct 17 20:33:21 2013 -0700
net: fix cipso packet validation when !NETLABEL
[ Upstream commit f2e5ddcc0d12f9c4c7b254358ad245c9dddce13b ]
When CONFIG\_NETLABEL is disabled, the cipso\_v4\_validate() function could loop
forever in the main loop if opt[opt\_iter +1] == 0, this will causing a kernel
crash in an SMP system, since the CPU executing this function will
stall /not respond to IPIs.
This problem can be reproduced by running the IP Stack Integrity Checker
(http://isic.sourceforge.net) using the following command on a Linux machine
connected to DUT:
"icmpsic -s rand -d  -r 123456"
wait (1-2 min)
Signed-off-by: Seif Mazareeb
Acked-by: Paul Moore
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit a9d080970b19eaebb8a4f03c6912cc16f238d166
Author: Daniel Borkmann
Date: Thu Oct 17 22:51:31 2013 +0200
net: unix: inherit SOCK\_PASS{CRED, SEC} flags from socket to fix race
[ Upstream commit 90c6bd34f884cd9cee21f1d152baf6c18bcac949 ]
In the case of credentials passing in unix stream sockets (dgram
sockets seem not affected), we get a rather sparse race after
commit 16e5726 ("af\_unix: dont send SCM\_CREDENTIALS by default").
We have a stream server on receiver side that requests credential
passing from senders (e.g. nc -U). Since we need to set SO\_PASSCRED
on each spawned/accepted socket on server side to 1 first (as it's
not inherited), it can happen that in the time between accept() and
setsockopt() we get interrupted, the sender is being scheduled and
continues with passing data to our receiver. At that time SO\_PASSCRED
is neither set on sender nor receiver side, hence in cmsg's
SCM\_CREDENTIALS we get eventually pid:0, uid:65534, gid:65534
(== overflow{u,g}id) instead of what we actually would like to see.
On the sender side, here nc -U, the tests in maybe\_add\_creds()
invoked through unix\_stream\_sendmsg() would fail, as at that exact
time, as mentioned, the sender has neither SO\_PASSCRED on his side
nor sees it on the server side, and we have a valid 'other' socket
in place. Thus, sender believes it would just look like a normal
connection, not needing/requesting SO\_PASSCRED at that time.
As reverting 16e5726 would not be an option due to the significant
performance regression reported when having creds always passed,
one way/trade-off to prevent that would be to set SO\_PASSCRED on
the listener socket and allow inheriting these flags to the spawned
socket on server side in accept(). It seems also logical to do so
if we'd tell the listener socket to pass those flags onwards, and
would fix the race.
Before, strace:
recvmsg(4, {msg\_name(0)=NULL, msg\_iov(1)=[{"blub\n", 4096}],
msg\_controllen=32, {cmsg\_len=28, cmsg\_level=SOL\_SOCKET,
cmsg\_type=SCM\_CREDENTIALS{pid=0, uid=65534, gid=65534}},
msg\_flags=0}, 0) = 5
After, strace:
recvmsg(4, {msg\_name(0)=NULL, msg\_iov(1)=[{"blub\n", 4096}],
msg\_controllen=32, {cmsg\_len=28, cmsg\_level=SOL\_SOCKET,
cmsg\_type=SCM\_CREDENTIALS{pid=11580, uid=1000, gid=1000}},
msg\_flags=0}, 0) = 5
Signed-off-by: Daniel Borkmann
Cc: Eric Dumazet
Cc: Eric W. Biederman
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 668c036a5b31b514f4738f6239a44276178fb9bd
Author: Vasundhara Volam
Date: Thu Oct 17 11:47:14 2013 +0530
be2net: pass if\_id for v1 and V2 versions of TX\_CREATE cmd
[ Upstream commit 0fb88d61bc60779dde88b0fc268da17eb81d0412 ]
It is a required field for all TX\_CREATE cmd versions > 0.
This fixes a driver initialization failure, caused by recent SH-R Firmwares
(versions > 10.0.639.0) failing the TX\_CREATE cmd when if\_id field is
not passed.
Signed-off-by: Sathya Perla
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 00ab8cd727c68039a1f6b820abd7adb0ea64cf8a
Author: Salva Peiró
Date: Wed Oct 16 12:46:50 2013 +0200
wanxl: fix info leak in ioctl
[ Upstream commit 2b13d06c9584b4eb773f1e80bbaedab9a1c344e1 ]
The wanxl\_ioctl() code fails to initialize the two padding bytes of
struct sync\_serial\_settings after the ->loopback member. Add an explicit
memset(0) before filling the structure to avoid the info leak.
Signed-off-by: Salva Peiró
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit ac835dd77807529d243811066812169c56f49133
Author: Vlad Yasevich
Date: Tue Oct 15 22:01:31 2013 -0400
sctp: Perform software checksum if packet has to be fragmented.
[ Upstream commit d2dbbba77e95dff4b4f901fee236fef6d9552072 ]
IP/IPv6 fragmentation knows how to compute only TCP/UDP checksum.
This causes problems if SCTP packets has to be fragmented and
ipsummed has been set to PARTIAL due to checksum offload support.
This condition can happen when retransmitting after MTU discover,
or when INIT or other control chunks are larger then MTU.
Check for the rare fragmentation condition in SCTP and use software
checksum calculation in this case.
CC: Fan Du
Signed-off-by: Vlad Yasevich
Acked-by: Neil Horman
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 4043074ae37743627b5bbdecf4d41e2a27bcb784
Author: Fan Du
Date: Tue Oct 15 22:01:30 2013 -0400
sctp: Use software crc32 checksum when xfrm transform will happen.
[ Upstream commit 27127a82561a2a3ed955ce207048e1b066a80a2a ]
igb/ixgbe have hardware sctp checksum support, when this feature is enabled
and also IPsec is armed to protect sctp traffic, ugly things happened as
xfrm\_output checks CHECKSUM\_PARTIAL to do checksum operation(sum every thing
up and pack the 16bits result in the checksum field). The result is fail
establishment of sctp communication.
Signed-off-by: Fan Du
Cc: Neil Horman
Cc: Steffen Klassert
Signed-off-by: Vlad Yasevich
Acked-by: Neil Horman
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit fd105ec514aa39232e839d5c34f6b9198ed77076
Author: Vlad Yasevich
Date: Tue Oct 15 22:01:29 2013 -0400
net: dst: provide accessor function to dst->xfrm
[ Upstream commit e87b3998d795123b4139bc3f25490dd236f68212 ]
dst->xfrm is conditionally defined. Provide accessor funtion that
is always available.
Signed-off-by: Vlad Yasevich
Acked-by: Neil Horman
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit bbd7578868d2e51934ba592578d2d106a73ef648
Author: Vlad Yasevich
Date: Tue Oct 15 14:57:45 2013 -0400
bridge: Correctly clamp MAX forward\_delay when enabling STP
[ Upstream commit 4b6c7879d84ad06a2ac5b964808ed599187a188d ]
Commit be4f154d5ef0ca147ab6bcd38857a774133f5450
bridge: Clamp forward\_delay when enabling STP
had a typo when attempting to clamp maximum forward delay.
It is possible to set bridge\_forward\_delay to be higher then
permitted maximum when STP is off. When turning STP on, the
higher then allowed delay has to be clamed down to max value.
Signed-off-by: Vlad Yasevich
CC: Herbert Xu
CC: Stephen Hemminger
Reviewed-by: Veaceslav Falico
Acked-by: Herbert Xu
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 68ab7445f56cea1c3ad4de6777d31395323a74e2
Author: Jason Wang
Date: Tue Oct 15 11:18:59 2013 +0800
virtio-net: refill only when device is up during setting queues
[ Upstream commit 35ed159bfd96a7547ec277ed8b550c7cbd9841b6 ]
We used to schedule the refill work unconditionally after changing the
number of queues. This may lead an issue if the device is not
up. Since we only try to cancel the work in ndo\_stop(), this may cause
the refill work still work after removing the device. Fix this by only
schedule the work when device is up.
The bug were introduce by commit 9b9cd8024a2882e896c65222aa421d461354e3f2.
(virtio-net: fix the race between channels setting and refill)
Signed-off-by: Jason Wang
Cc: Rusty Russell
Cc: Michael S. Tsirkin
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit cfc85a8e6612dbf742b518a6cd7ec3c637822d63
Author: Jason Wang
Date: Tue Oct 15 11:18:58 2013 +0800
virtio-net: don't respond to cpu hotplug notifier if we're not ready
[ Upstream commit 3ab098df35f8b98b6553edc2e40234af512ba877 ]
We're trying to re-configure the affinity unconditionally in cpu hotplug
callback. This may lead the issue during resuming from s3/s4 since
- virt queues haven't been allocated at that time.
- it's unnecessary since thaw method will re-configure the affinity.
Fix this issue by checking the config\_enable and do nothing is we're not ready.
The bug were introduced by commit 8de4b2f3ae90c8fc0f17eeaab87d5a951b66ee17
(virtio-net: reset virtqueue affinity when doing cpu hotplug).
Acked-by: Michael S. Tsirkin
Cc: Rusty Russell
Cc: Michael S. Tsirkin
Cc: Wanlong Gao
Reviewed-by: Wanlong Gao
Signed-off-by: Jason Wang
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 433cc3e581bb79b9f4a2829141049a9d11d3a9d0
Author: Eric Dumazet
Date: Sat Oct 12 14:08:34 2013 -0700
bnx2x: record rx queue for LRO packets
[ Upstream commit 60e66fee56b2256dcb1dc2ea1b2ddcb6e273857d ]
RPS support is kind of broken on bnx2x, because only non LRO packets
get proper rx queue information. This triggers reorders, as it seems
bnx2x like to generate a non LRO packet for segment including TCP PUSH
flag : (this might be pure coincidence, but all the reorders I've
seen involve segments with a PUSH)
11:13:34.335847 IP A > B: . 415808:447136(31328) ack 1 win 457
11:13:34.335992 IP A > B: . 447136:448560(1424) ack 1 win 457
11:13:34.336391 IP A > B: . 448560:479888(31328) ack 1 win 457
11:13:34.336425 IP A > B: P 511216:512640(1424) ack 1 win 457
11:13:34.336423 IP A > B: . 479888:511216(31328) ack 1 win 457
11:13:34.336924 IP A > B: . 512640:543968(31328) ack 1 win 457
11:13:34.336963 IP A > B: . 543968:575296(31328) ack 1 win 457
We must call skb\_record\_rx\_queue() to properly give to RPS (and more
generally for TX queue selection on forward path) the receive queue
information.
Similar fix is needed for skb\_mark\_napi\_id(), but will be handled
in a separate patch to ease stable backports.
Signed-off-by: Eric Dumazet
Cc: Willem de Bruijn
Cc: Eilon Greenstein
Acked-by: Dmitry Kravkov
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 5d6463753fb915bbf3930bd8a3c5b2a864f7adeb
Author: Mathias Krause
Date: Mon Sep 30 22:03:07 2013 +0200
connector: use nlmsg\_len() to check message length
[ Upstream commit 162b2bedc084d2d908a04c93383ba02348b648b0 ]
The current code tests the length of the whole netlink message to be
at least as long to fit a cn\_msg. This is wrong as nlmsg\_len includes
the length of the netlink message header. Use nlmsg\_len() instead to
fix this "off-by-NLMSG\_HDRLEN" size check.
Signed-off-by: Mathias Krause
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 214351333b67444e0a431ee349534f2cee1f8cef
Author: Mathias Krause
Date: Mon Sep 30 22:05:40 2013 +0200
unix\_diag: fix info leak
[ Upstream commit 6865d1e834be84ddd5808d93d5035b492346c64a ]
When filling the netlink message we miss to wipe the pad field,
therefore leak one byte of heap memory to userland. Fix this by
setting pad to 0.
Signed-off-by: Mathias Krause
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 6b9588a38ee0dd352182d4f2f98cca7c5aa55680
Author: Salva Peiró
Date: Fri Oct 11 12:50:03 2013 +0300
farsync: fix info leak in ioctl
[ Upstream commit 96b340406724d87e4621284ebac5e059d67b2194 ]
The fst\_get\_iface() code fails to initialize the two padding bytes of
struct sync\_serial\_settings after the ->loopback member. Add an explicit
memset(0) before filling the structure to avoid the info leak.
Signed-off-by: Dan Carpenter
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 49cf14bacf02f6d9047dc0bf642e3fa2a2e99206
Author: stephen hemminger
Date: Sun Oct 6 15:16:49 2013 -0700
netem: free skb's in tree on reset
[ Upstream commit ff704050f2fc0f3382b5a70bba56a51a3feca79d ]
Netem can leak memory because packets get stored in red-black
tree and it is not cleared on reset.
Reported by: Сергеев Сергей
Signed-off-by: Stephen Hemminger
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 598b990bb1f1f6026dc35e7d6ca69e4cf30e52f4
Author: stephen hemminger
Date: Sun Oct 6 15:15:33 2013 -0700
netem: update backlog after drop
[ Upstream commit 638a52b801e40ed276ceb69b73579ad99365361a ]
When packet is dropped from rb-tree netem the backlog statistic should
also be updated.
Reported-by: Сергеев Сергей
Signed-off-by: Stephen Hemminger
Acked-by: Eric Dumazet
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit f1d1f701ef4efb986ccb9466aabea8e42bc3d384
Author: Eric Dumazet
Date: Thu Oct 10 06:30:09 2013 -0700
l2tp: must disable bh before calling l2tp\_xmit\_skb()
[ Upstream commit 455cc32bf128e114455d11ad919321ab89a2c312 ]
François Cachereul made a very nice bug report and suspected
the bh\_lock\_sock() / bh\_unlok\_sock() pair used in l2tp\_xmit\_skb() from
process context was not good.
This problem was added by commit 6af88da14ee284aaad6e4326da09a89191ab6165
("l2tp: Fix locking in l2tp\_core.c").
l2tp\_eth\_dev\_xmit() runs from BH context, so we must disable BH
from other l2tp\_xmit\_skb() users.
[ 452.060011] BUG: soft lockup - CPU#1 stuck for 23s! [accel-pppd:6662]
[ 452.061757] Modules linked in: l2tp\_ppp l2tp\_netlink l2tp\_core pppoe pppox
ppp\_generic slhc ipv6 ext3 mbcache jbd virtio\_balloon xfs exportfs dm\_mod
virtio\_blk ata\_generic virtio\_net floppy ata\_piix libata virtio\_pci virtio\_ring virtio [last unloaded: scsi\_wait\_scan]
[ 452.064012] CPU 1
[ 452.080015] BUG: soft lockup - CPU#2 stuck for 23s! [accel-pppd:6643]
[ 452.080015] CPU 2
[ 452.080015]
[ 452.080015] Pid: 6643, comm: accel-pppd Not tainted 3.2.46.mini #1 Bochs Bochs
[ 452.080015] RIP: 0010:[] [] do\_raw\_spin\_lock+0x17/0x1f
[ 452.080015] RSP: 0018:ffff88007125fc18 EFLAGS: 00000293
[ 452.080015] RAX: 000000000000aba9 RBX: ffffffff811d0703 RCX: 0000000000000000
[ 452.080015] RDX: 00000000000000ab RSI: ffff8800711f6896 RDI: ffff8800745c8110
[ 452.080015] RBP: ffff88007125fc18 R08: 0000000000000020 R09: 0000000000000000
[ 452.080015] R10: 0000000000000000 R11: 0000000000000280 R12: 0000000000000286
[ 452.080015] R13: 0000000000000020 R14: 0000000000000240 R15: 0000000000000000
[ 452.080015] FS: 00007fdc0cc24700(0000) GS:ffff8800b6f00000(0000) knlGS:0000000000000000
[ 452.080015] CS: 0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[ 452.080015] CR2: 00007fdb054899b8 CR3: 0000000074404000 CR4: 00000000000006a0
[ 452.080015] DR0: 0000000000000000 DR1: 0000000000000000 DR2: 0000000000000000
[ 452.080015] DR3: 0000000000000000 DR6: 00000000ffff0ff0 DR7: 0000000000000400
[ 452.080015] Process accel-pppd (pid: 6643, threadinfo ffff88007125e000, task ffff8800b27e6dd0)
[ 452.080015] Stack:
[ 452.080015] ffff88007125fc28 ffffffff81256559 ffff88007125fc98 ffffffffa01b2bd1
[ 452.080015] ffff88007125fc58 000000000000000c 00000000029490d0 0000009c71dbe25e
[ 452.080015] 000000000000005c 000000080000000e 0000000000000000 ffff880071170600
[ 452.080015] Call Trace:
[ 452.080015] [] \_raw\_spin\_lock+0xe/0x10
[ 452.080015] [] l2tp\_xmit\_skb+0x189/0x4ac [l2tp\_core]
[ 452.080015] [] pppol2tp\_sendmsg+0x15e/0x19c [l2tp\_ppp]
[ 452.080015] [] \_\_sock\_sendmsg\_nosec+0x22/0x24
[ 452.080015] [] sock\_sendmsg+0xa1/0xb6
[ 452.080015] [] ? \_\_schedule+0x5c1/0x616
[ 452.080015] [] ? \_\_dequeue\_signal+0xb7/0x10c
[ 452.080015] [] ? fget\_light+0x75/0x89
[ 452.080015] [] ? sockfd\_lookup\_light+0x20/0x56
[ 452.080015] [] sys\_sendto+0x10c/0x13b
[ 452.080015] [] system\_call\_fastpath+0x16/0x1b
[ 452.080015] Code: 81 48 89 e5 72 0c 31 c0 48 81 ff 45 66 25 81 0f 92 c0 5d c3 55 b8 00 01 00 00 48 89 e5 f0 66 0f c1 07 0f b6 d4 38 d0 74 06 f3 90 <8a> 07 eb f6 5d c3 90 90 55 48 89 e5 9c 58 0f 1f 44 00 00 5d c3
[ 452.080015] Call Trace:
[ 452.080015] [] \_raw\_spin\_lock+0xe/0x10
[ 452.080015] [] l2tp\_xmit\_skb+0x189/0x4ac [l2tp\_core]
[ 452.080015] [] pppol2tp\_sendmsg+0x15e/0x19c [l2tp\_ppp]
[ 452.080015] [] \_\_sock\_sendmsg\_nosec+0x22/0x24
[ 452.080015] [] sock\_sendmsg+0xa1/0xb6
[ 452.080015] [] ? \_\_schedule+0x5c1/0x616
[ 452.080015] [] ? \_\_dequeue\_signal+0xb7/0x10c
[ 452.080015] [] ? fget\_light+0x75/0x89
[ 452.080015] [] ? sockfd\_lookup\_light+0x20/0x56
[ 452.080015] [] sys\_sendto+0x10c/0x13b
[ 452.080015] [] system\_call\_fastpath+0x16/0x1b
[ 452.064012]
[ 452.064012] Pid: 6662, comm: accel-pppd Not tainted 3.2.46.mini #1 Bochs Bochs
[ 452.064012] RIP: 0010:[] [] do\_raw\_spin\_lock+0x19/0x1f
[ 452.064012] RSP: 0018:ffff8800b6e83ba0 EFLAGS: 00000297
[ 452.064012] RAX: 000000000000aaa9 RBX: ffff8800b6e83b40 RCX: 0000000000000002
[ 452.064012] RDX: 00000000000000aa RSI: 000000000000000a RDI: ffff8800745c8110
[ 452.064012] RBP: ffff8800b6e83ba0 R08: 000000000000c802 R09: 000000000000001c
[ 452.064012] R10: ffff880071096c4e R11: 0000000000000006 R12: ffff8800b6e83b18
[ 452.064012] R13: ffffffff8125d51e R14: ffff8800b6e83ba0 R15: ffff880072a589c0
[ 452.064012] FS: 00007fdc0b81e700(0000) GS:ffff8800b6e80000(0000) knlGS:0000000000000000
[ 452.064012] CS: 0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[ 452.064012] CR2: 0000000000625208 CR3: 0000000074404000 CR4: 00000000000006a0
[ 452.064012] DR0: 0000000000000000 DR1: 0000000000000000 DR2: 0000000000000000
[ 452.064012] DR3: 0000000000000000 DR6: 00000000ffff0ff0 DR7: 0000000000000400
[ 452.064012] Process accel-pppd (pid: 6662, threadinfo ffff88007129a000, task ffff8800744f7410)
[ 452.064012] Stack:
[ 452.064012] ffff8800b6e83bb0 ffffffff81256559 ffff8800b6e83bc0 ffffffff8121c64a
[ 452.064012] ffff8800b6e83bf0 ffffffff8121ec7a ffff880072a589c0 ffff880071096c62
[ 452.064012] 0000000000000011 ffffffff81430024 ffff8800b6e83c80 ffffffff8121f276
[ 452.064012] Call Trace:
[ 452.064012]
[ 452.064012] [] \_raw\_spin\_lock+0xe/0x10
[ 452.064012] [] spin\_lock+0x9/0xb
[ 452.064012] [] udp\_queue\_rcv\_skb+0x186/0x269
[ 452.064012] [] \_\_udp4\_lib\_rcv+0x297/0x4ae
[ 452.064012] [] ? raw\_rcv+0xe9/0xf0
[ 452.064012] [] udp\_rcv+0x1a/0x1c
[ 452.064012] [] ip\_local\_deliver\_finish+0x12b/0x1a5
[ 452.064012] [] ip\_local\_deliver+0x53/0x84
[ 452.064012] [] ip\_rcv\_finish+0x2bc/0x2f3
[ 452.064012] [] ip\_rcv+0x210/0x269
[ 452.064012] [] ? kvm\_clock\_get\_cycles+0x9/0xb
[ 452.064012] [] \_\_netif\_receive\_skb+0x3a5/0x3f7
[ 452.064012] [] netif\_receive\_skb+0x57/0x5e
[ 452.064012] [] ? \_\_netdev\_alloc\_skb+0x1f/0x3b
[ 452.064012] [] virtnet\_poll+0x4ba/0x5a4 [virtio\_net]
[ 452.064012] [] net\_rx\_action+0x73/0x184
[ 452.064012] [] ? l2tp\_xmit\_skb+0x27a/0x4ac [l2tp\_core]
[ 452.064012] [] \_\_do\_softirq+0xc3/0x1a8
[ 452.064012] [] ? ack\_APIC\_irq+0x10/0x12
[ 452.064012] [] ? \_raw\_spin\_lock+0xe/0x10
[ 452.064012] [] call\_softirq+0x1c/0x26
[ 452.064012] [] do\_softirq+0x45/0x82
[ 452.064012] [] irq\_exit+0x42/0x9c
[ 452.064012] [] do\_IRQ+0x8e/0xa5
[ 452.064012] [] common\_interrupt+0x6e/0x6e
[ 452.064012]
[ 452.064012] [] ? kfree+0x8a/0xa3
[ 452.064012] [] ? l2tp\_xmit\_skb+0x27a/0x4ac [l2tp\_core]
[ 452.064012] [] ? l2tp\_xmit\_skb+0x1dd/0x4ac [l2tp\_core]
[ 452.064012] [] pppol2tp\_sendmsg+0x15e/0x19c [l2tp\_ppp]
[ 452.064012] [] \_\_sock\_sendmsg\_nosec+0x22/0x24
[ 452.064012] [] sock\_sendmsg+0xa1/0xb6
[ 452.064012] [] ? \_\_schedule+0x5c1/0x616
[ 452.064012] [] ? \_\_dequeue\_signal+0xb7/0x10c
[ 452.064012] [] ? fget\_light+0x75/0x89
[ 452.064012] [] ? sockfd\_lookup\_light+0x20/0x56
[ 452.064012] [] sys\_sendto+0x10c/0x13b
[ 452.064012] [] system\_call\_fastpath+0x16/0x1b
[ 452.064012] Code: 89 e5 72 0c 31 c0 48 81 ff 45 66 25 81 0f 92 c0 5d c3 55 b8 00 01 00 00 48 89 e5 f0 66 0f c1 07 0f b6 d4 38 d0 74 06 f3 90 8a 07  f6 5d c3 90 90 55 48 89 e5 9c 58 0f 1f 44 00 00 5d c3 55 48
[ 452.064012] Call Trace:
[ 452.064012]  [] \_raw\_spin\_lock+0xe/0x10
[ 452.064012] [] spin\_lock+0x9/0xb
[ 452.064012] [] udp\_queue\_rcv\_skb+0x186/0x269
[ 452.064012] [] \_\_udp4\_lib\_rcv+0x297/0x4ae
[ 452.064012] [] ? raw\_rcv+0xe9/0xf0
[ 452.064012] [] udp\_rcv+0x1a/0x1c
[ 452.064012] [] ip\_local\_deliver\_finish+0x12b/0x1a5
[ 452.064012] [] ip\_local\_deliver+0x53/0x84
[ 452.064012] [] ip\_rcv\_finish+0x2bc/0x2f3
[ 452.064012] [] ip\_rcv+0x210/0x269
[ 452.064012] [] ? kvm\_clock\_get\_cycles+0x9/0xb
[ 452.064012] [] \_\_netif\_receive\_skb+0x3a5/0x3f7
[ 452.064012] [] netif\_receive\_skb+0x57/0x5e
[ 452.064012] [] ? \_\_netdev\_alloc\_skb+0x1f/0x3b
[ 452.064012] [] virtnet\_poll+0x4ba/0x5a4 [virtio\_net]
[ 452.064012] [] net\_rx\_action+0x73/0x184
[ 452.064012] [] ? l2tp\_xmit\_skb+0x27a/0x4ac [l2tp\_core]
[ 452.064012] [] \_\_do\_softirq+0xc3/0x1a8
[ 452.064012] [] ? ack\_APIC\_irq+0x10/0x12
[ 452.064012] [] ? \_raw\_spin\_lock+0xe/0x10
[ 452.064012] [] call\_softirq+0x1c/0x26
[ 452.064012] [] do\_softirq+0x45/0x82
[ 452.064012] [] irq\_exit+0x42/0x9c
[ 452.064012] [] do\_IRQ+0x8e/0xa5
[ 452.064012] [] common\_interrupt+0x6e/0x6e
[ 452.064012]  [] ? kfree+0x8a/0xa3
[ 452.064012] [] ? l2tp\_xmit\_skb+0x27a/0x4ac [l2tp\_core]
[ 452.064012] [] ? l2tp\_xmit\_skb+0x1dd/0x4ac [l2tp\_core]
[ 452.064012] [] pppol2tp\_sendmsg+0x15e/0x19c [l2tp\_ppp]
[ 452.064012] [] \_\_sock\_sendmsg\_nosec+0x22/0x24
[ 452.064012] [] sock\_sendmsg+0xa1/0xb6
[ 452.064012] [] ? \_\_schedule+0x5c1/0x616
[ 452.064012] [] ? \_\_dequeue\_signal+0xb7/0x10c
[ 452.064012] [] ? fget\_light+0x75/0x89
[ 452.064012] [] ? sockfd\_lookup\_light+0x20/0x56
[ 452.064012] [] sys\_sendto+0x10c/0x13b
[ 452.064012] [] system\_call\_fastpath+0x16/0x1b
Reported-by: François Cachereul
Tested-by: François Cachereul
Signed-off-by: Eric Dumazet
Cc: James Chapman
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 52f7719832d949815e989b18587bfcc67f6af64a
Author: Christophe Gouault
Date: Tue Oct 8 17:21:22 2013 +0200
vti: get rid of nf mark rule in prerouting
[ Upstream commit 7263a5187f9e9de45fcb51349cf0e031142c19a1 ]
This patch fixes and improves the use of vti interfaces (while
lightly changing the way of configuring them).
Currently:
- it is necessary to identify and mark inbound IPsec
packets destined to each vti interface, via netfilter rules in
the mangle table at prerouting hook.
- the vti module cannot retrieve the right tunnel in input since
commit b9959fd3: vti tunnels all have an i\_key, but the tunnel lookup
is done with flag TUNNEL\_NO\_KEY, so there no chance to retrieve them.
- the i\_key is used by the outbound processing as a mark to lookup
for the right SP and SA bundle.
This patch uses the o\_key to store the vti mark (instead of i\_key) and
enables:
- to avoid the need for previously marking the inbound skbuffs via a
netfilter rule.
- to properly retrieve the right tunnel in input, only based on the IPsec
packet outer addresses.
- to properly perform an inbound policy check (using the tunnel o\_key
as a mark).
- to properly perform an outbound SPD and SAD lookup (using the tunnel
o\_key as a mark).
- to keep the current mark of the skbuff. The skbuff mark is neither
used nor changed by the vti interface. Only the vti interface o\_key
is used.
SAs have a wildcard mark.
SPs have a mark equal to the vti interface o\_key.
The vti interface must be created as follows (i\_key = 0, o\_key = mark):
ip link add vti1 mode vti local 1.1.1.1 remote 2.2.2.2 okey 1
The SPs attached to vti1 must be created as follows (mark = vti1 o\_key):
ip xfrm policy add dir out mark 1 tmpl src 1.1.1.1 dst 2.2.2.2 \
proto esp mode tunnel
ip xfrm policy add dir in mark 1 tmpl src 2.2.2.2 dst 1.1.1.1 \
proto esp mode tunnel
The SAs are created with the default wildcard mark. There is no
distinction between global vs. vti SAs. Just their addresses will
possibly link them to a vti interface:
ip xfrm state add src 1.1.1.1 dst 2.2.2.2 proto esp spi 1000 mode tunnel \
enc "cbc(aes)" "azertyuiopqsdfgh"
ip xfrm state add src 2.2.2.2 dst 1.1.1.1 proto esp spi 2000 mode tunnel \
enc "cbc(aes)" "sqbdhgqsdjqjsdfh"
To avoid matching "global" (not vti) SPs in vti interfaces, global SPs
should no use the default wildcard mark, but explicitly match mark 0.
To avoid a double SPD lookup in input and output (in global and vti SPDs),
the NOPOLICY and NOXFRM options should be set on the vti interfaces:
echo 1 > /proc/sys/net/ipv4/conf/vti1/disable\_policy
echo 1 > /proc/sys/net/ipv4/conf/vti1/disable\_xfrm
The outgoing traffic is steered to vti1 by a route via the vti interface:
ip route add 192.168.0.0/16 dev vti1
The incoming IPsec traffic is steered to vti1 because its outer addresses
match the vti1 tunnel configuration.
Signed-off-by: Christophe Gouault
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 07cc588696a658581bd4fb79d238267dfb4d3aef
Author: Linus Lüssing
Date: Sun Oct 20 00:58:57 2013 +0200
Revert "bridge: only expire the mdb entry when query is received"
[ Upstream commit 454594f3b93a49ef568cd190c5af31376b105a7b ]
While this commit was a good attempt to fix issues occuring when no
multicast querier is present, this commit still has two more issues:
1) There are cases where mdb entries do not expire even if there is a
querier present. The bridge will unnecessarily continue flooding
multicast packets on the according ports.
2) Never removing an mdb entry could be exploited for a Denial of
Service by an attacker on the local link, slowly, but steadily eating up
all memory.
Actually, this commit became obsolete with
"bridge: disable snooping if there is no querier" (b00589af3b)
which included fixes for a few more cases.
Therefore reverting the following commits (the commit stated in the
commit message plus three of its follow up fixes):
====================
Revert "bridge: update mdb expiration timer upon reports."
This reverts commit f144febd93d5ee534fdf23505ab091b2b9088edc.
Revert "bridge: do not call setup\_timer() multiple times"
This reverts commit 1faabf2aab1fdaa1ace4e8c829d1b9cf7bfec2f1.
Revert "bridge: fix some kernel warning in multicast timer"
This reverts commit c7e8e8a8f7a70b343ca1e0f90a31e35ab2d16de1.
Revert "bridge: only expire the mdb entry when query is received"
This reverts commit 9f00b2e7cf241fa389733d41b615efdaa2cb0f5b.
====================
CC: Cong Wang
Signed-off-by: Linus Lüssing
Reviewed-by: Vlad Yasevich
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 9e393b6d30a4f56850fd506c9802da8fc633ac11
Author: Vlad Yasevich
Date: Thu Oct 10 15:57:59 2013 -0400
bridge: update mdb expiration timer upon reports.
[ Upstream commit f144febd93d5ee534fdf23505ab091b2b9088edc ]
commit 9f00b2e7cf241fa389733d41b615efdaa2cb0f5b
bridge: only expire the mdb entry when query is received
changed the mdb expiration timer to be armed only when QUERY is
received. Howerver, this causes issues in an environment where
the multicast server socket comes and goes very fast while a client
is trying to send traffic to it.
The root cause is a race where a sequence of LEAVE followed by REPORT
messages can race against QUERY messages generated in response to LEAVE.
The QUERY ends up starting the expiration timer, and that timer can
potentially expire after the new REPORT message has been received signaling
the new join operation. This leads to a significant drop in multicast
traffic and possible complete stall.
The solution is to have REPORT messages update the expiration timer
on entries that already exist.
Signed-off-by: Vlad Yasevich
CC: Cong Wang
CC: Herbert Xu
CC: Stephen Hemminger
Acked-by: Herbert Xu
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 073f9716b6ba92e3dabe87905601d39f0e52b8c5
Author: Marc Kleine-Budde
Date: Mon Oct 7 23:19:58 2013 +0200
net: vlan: fix nlmsg size calculation in vlan\_get\_size()
[ Upstream commit c33a39c575068c2ea9bffb22fd6de2df19c74b89 ]
This patch fixes the calculation of the nlmsg size, by adding the missing
nla\_total\_size().
Cc: Patrick McHardy
Signed-off-by: Marc Kleine-Budde
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 7c2506b622ec83eaf66d7ddf46e2188714d2ceb6
Author: Amir Vadai
Date: Mon Oct 7 13:38:13 2013 +0200
net/mlx4\_en: Fix pages never dma unmapped on rx
[ Upstream commit 021f1107ffdae7a82af6c53f4c52654062e365c6 ]
This patch fixes a bug introduced by commit 51151a16 (mlx4: allow
order-0 memory allocations in RX path).
dma\_unmap\_page never reached because condition to detect last fragment
in page is wrong. offset+frag\_stride can't be greater than size, need to
make sure no additional frag will fit in page => compare offset +
frag\_stride + next\_frag\_size instead.
next\_frag\_size is the same as the current one, since page is shared only
with frags of the same size.
CC: Eric Dumazet
Signed-off-by: Amir Vadai
Acked-by: Eric Dumazet
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 242ff63bf498150fbddaefc75cf52250c6c15fb4
Author: Amir Vadai
Date: Mon Oct 7 13:38:12 2013 +0200
net/mlx4\_en: Rename name of mlx4\_en\_rx\_alloc members
[ Upstream commit 70fbe0794393829d9acd686428d87c27b6f6984b ]
Add page prefix to page related members: @size and @offset into
@page\_size and @page\_offset
CC: Eric Dumazet
Signed-off-by: Amir Vadai
Acked-by: Eric Dumazet
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit a4626bf64790a725902a02f3979916f9342c0c34
Author: Paul Durrant
Date: Tue Oct 8 14:56:44 2013 +0100
xen-netback: Don't destroy the netdev until the vif is shut down
[ upstream commit id: 279f438e36c0a70b23b86d2090aeec50155034a9 ]
Without this patch, if a frontend cycles through states Closing
and Closed (which Windows frontends need to do) then the netdev
will be destroyed and requires re-invocation of hotplug scripts
to restore state before the frontend can move to Connected. Thus
when udev is not in use the backend gets stuck in InitWait.
With this patch, the netdev is left alone whilst the backend is
still online and is only de-registered and freed just prior to
destroying the vif (which is also nicely symmetrical with the
netdev allocation and registration being done during probe) so
no re-invocation of hotplug scripts is required.
Signed-off-by: Paul Durrant
Cc: David Vrabel
Cc: Wei Liu
Cc: Ian Campbell
Signed-off-by: Greg Kroah-Hartman
commit c298b2e28ec54a4be740fa4e0811a2bdd70bf545
Author: Fabio Estevam
Date: Sat Oct 5 17:56:59 2013 -0300
net: secure\_seq: Fix warning when CONFIG\_IPV6 and CONFIG\_INET are not selected
[ Upstream commit cb03db9d0e964568407fb08ea46cc2b6b7f67587 ]
net\_secret() is only used when CONFIG\_IPV6 or CONFIG\_INET are selected.
Building a defconfig with both of these symbols unselected (Using the ARM
at91sam9rl\_defconfig, for example) leads to the following build warning:
$ make at91sam9rl\_defconfig
#
# configuration written to .config
#
$ make net/core/secure\_seq.o
scripts/kconfig/conf --silentoldconfig Kconfig
CHK include/config/kernel.release
CHK include/generated/uapi/linux/version.h
CHK include/generated/utsrelease.h
make[1]: `include/generated/mach-types.h' is up to date.
CALL scripts/checksyscalls.sh
CC net/core/secure\_seq.o
net/core/secure\_seq.c:17:13: warning: 'net\_secret\_init' defined but not used [-Wunused-function]
Fix this warning by protecting the definition of net\_secret() with these
symbols.
Reported-by: Olof Johansson
Signed-off-by: Fabio Estevam
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit c5c06751157187520aca835756df95506118a4e7
Author: Marc Kleine-Budde
Date: Sat Oct 5 21:25:17 2013 +0200
can: dev: fix nlmsg size calculation in can\_get\_size()
[ Upstream commit fe119a05f8ca481623a8d02efcc984332e612528 ]
This patch fixes the calculation of the nlmsg size, by adding the missing
nla\_total\_size().
Signed-off-by: Marc Kleine-Budde
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit d02f1e02342ddebc6fb2e583e3a7e6f9af65a515
Author: Jiri Benc
Date: Fri Oct 4 17:04:48 2013 +0200
ipv4: fix ineffective source address selection
[ Upstream commit 0a7e22609067ff524fc7bbd45c6951dd08561667 ]
When sending out multicast messages, the source address in inet->mc\_addr is
ignored and rewritten by an autoselected one. This is caused by a typo in
commit 813b3b5db831 ("ipv4: Use caller's on-stack flowi as-is in output
route lookups").
Signed-off-by: Jiri Benc
Acked-by: Eric Dumazet
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 067cb429b87e651f83329ef4a86b997c0688cb81
Author: Mathias Krause
Date: Mon Sep 30 22:03:06 2013 +0200
proc connector: fix info leaks
[ Upstream commit e727ca82e0e9616ab4844301e6bae60ca7327682 ]
Initialize event\_data for all possible message types to prevent leaking
kernel stack contents to userland (up to 20 bytes). Also set the flags
member of the connector message to 0 to prevent leaking two more stack
bytes this way.
Signed-off-by: Mathias Krause
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit cef1e66ef92e7821e58e7dc32a2b764541a74ff4
Author: Willem de Bruijn
Date: Tue Oct 22 10:59:18 2013 -0400
sit: amend "allow to use rtnl ops on fb tunnel"
Amend backport to 3.11.y of
[ Upstream commit 205983c43700ac3a81e7625273a3fa83cd2759b5 ]
The discussion thread in the upstream commit mentions that in
backports to stable-\* branches, the line
- unregister\_netdevice\_queue(sitn->fb\_tunnel\_dev, &list);
must be omitted if that branch does not have commit 5e6700b3bf98
("sit: add support of x-netns"). This line has correctly been omitted
in the backport to 3.10, which indeed does not have that commit.
It was also removed in the backport to 3.11.y, which does have that
commit.
This causes the following steps to hit a BUG at net/core/dev.c:5039:
`modprobe sit; rmmod sit`
The bug demonstrates that it causes a device to be unregistered twice.
The simple fix is to apply the one line in the upstream commit that
was dropped in the backport to 3.11 (3783100374653e2e7fbdf68c710f5).
This brings the logic in line with upstream linux, net and net-next
branches.
Signed-off-by: Willem de Bruijn
Acked-by: Nicolas Dichtel
Reviewed-by: Veaceslav Falico
Signed-off-by: Greg Kroah-Hartman
commit 3365bb990a76d4d7dd4b36202aa7ade95bde7c70
Author: Dan Carpenter
Date: Thu Oct 3 00:27:20 2013 +0300
net: heap overflow in \_\_audit\_sockaddr()
[ Upstream commit 1661bf364ae9c506bc8795fef70d1532931be1e8 ]
We need to cap ->msg\_namelen or it leads to a buffer overflow when we
to the memcpy() in \_\_audit\_sockaddr(). It requires CAP\_AUDIT\_CONTROL to
exploit this bug.
The call tree is:
\_\_\_sys\_recvmsg()
move\_addr\_to\_user()
audit\_sockaddr()
\_\_audit\_sockaddr()
Reported-by: Jüri Aedla
Signed-off-by: Dan Carpenter
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit e795ffb6551b0c3b52233e585cef96879942638c
Author: Sebastian Hesselbarth
Date: Wed Oct 2 12:57:21 2013 +0200
net: mv643xx\_eth: fix orphaned statistics timer crash
[ Upstream commit f564412c935111c583b787bcc18157377b208e2e ]
The periodic statistics timer gets started at port \_probe() time, but
is stopped on \_stop() only. In a modular environment, this can cause
the timer to access already deallocated memory, if the module is unloaded
without starting the eth device. To fix this, we add the timer right
before the port is started, instead of at \_probe() time.
Signed-off-by: Sebastian Hesselbarth
Acked-by: Jason Cooper
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit d3ba0446d7c89ff8f1e66a3be9f5e9e01a1eaa50
Author: Sebastian Hesselbarth
Date: Wed Oct 2 12:57:20 2013 +0200
net: mv643xx\_eth: update statistics timer from timer context only
[ Upstream commit 041b4ddb84989f06ff1df0ca869b950f1ee3cb1c ]
Each port driver installs a periodic timer to update port statistics
by calling mib\_counters\_update. As mib\_counters\_update is also called
from non-timer context, we should not reschedule the timer there but
rather move it to timer-only context.
Signed-off-by: Sebastian Hesselbarth
Acked-by: Jason Cooper
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit f94b591b19d4c7c5d3aea008d1df8ec3d0abdd84
Author: David S. Miller
Date: Tue Oct 8 15:44:26 2013 -0400
l2tp: Fix build warning with ipv6 disabled.
[ Upstream commit 8d8a51e26a6d415e1470759f2cf5f3ee3ee86196 ]
net/l2tp/l2tp\_core.c: In function ‘l2tp\_verify\_udp\_checksum’:
net/l2tp/l2tp\_core.c:499:22: warning: unused variable ‘tunnel’ [-Wunused-variable]
Create a helper "l2tp\_tunnel()" to facilitate this, and as a side
effect get rid of a bunch of unnecessary void pointer casts.
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 84ee5cbb9a39a879806d79e0b4812c332418e52a
Author: François CACHEREUL
Date: Wed Oct 2 10:16:02 2013 +0200
l2tp: fix kernel panic when using IPv4-mapped IPv6 addresses
[ Upstream commit e18503f41f9b12132c95d7c31ca6ee5155e44e5c ]
IPv4 mapped addresses cause kernel panic.
The patch juste check whether the IPv6 address is an IPv4 mapped
address. If so, use IPv4 API instead of IPv6.
[ 940.026915] general protection fault: 0000 [#1]
[ 940.026915] Modules linked in: l2tp\_ppp l2tp\_netlink l2tp\_core pppox ppp\_generic slhc loop psmouse
[ 940.026915] CPU: 0 PID: 3184 Comm: memcheck-amd64- Not tainted 3.11.0+ #1
[ 940.026915] Hardware name: Bochs Bochs, BIOS Bochs 01/01/2007
[ 940.026915] task: ffff880007130e20 ti: ffff88000737e000 task.ti: ffff88000737e000
[ 940.026915] RIP: 0010:[] [] ip6\_xmit+0x276/0x326
[ 940.026915] RSP: 0018:ffff88000737fd28 EFLAGS: 00010286
[ 940.026915] RAX: c748521a75ceff48 RBX: ffff880000c30800 RCX: 0000000000000000
[ 940.026915] RDX: ffff88000075cc4e RSI: 0000000000000028 RDI: ffff8800060e5a40
[ 940.026915] RBP: ffff8800060e5a40 R08: 0000000000000000 R09: ffff88000075cc90
[ 940.026915] R10: 0000000000000000 R11: 0000000000000000 R12: ffff88000737fda0
[ 940.026915] R13: 0000000000000000 R14: 0000000000002000 R15: ffff880005d3b580
[ 940.026915] FS: 00007f163dc5e800(0000) GS:ffffffff81623000(0000) knlGS:0000000000000000
[ 940.026915] CS: 0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[ 940.026915] CR2: 00000004032dc940 CR3: 0000000005c25000 CR4: 00000000000006f0
[ 940.026915] Stack:
[ 940.026915] ffff88000075cc4e ffffffff81694e90 ffff880000c30b38 0000000000000020
[ 940.026915] 11000000523c4bac ffff88000737fdb4 0000000000000000 ffff880000c30800
[ 940.026915] ffff880005d3b580 ffff880000c30b38 ffff8800060e5a40 0000000000000020
[ 940.026915] Call Trace:
[ 940.026915] [] ? inet6\_csk\_xmit+0xa4/0xc4
[ 940.026915] [] ? l2tp\_xmit\_skb+0x503/0x55a [l2tp\_core]
[ 940.026915] [] ? pskb\_expand\_head+0x161/0x214
[ 940.026915] [] ? pppol2tp\_xmit+0xf2/0x143 [l2tp\_ppp]
[ 940.026915] [] ? ppp\_channel\_push+0x36/0x8b [ppp\_generic]
[ 940.026915] [] ? ppp\_write+0xaf/0xc5 [ppp\_generic]
[ 940.026915] [] ? vfs\_write+0xa2/0x106
[ 940.026915] [] ? SyS\_write+0x56/0x8a
[ 940.026915] [] ? system\_call\_fastpath+0x16/0x1b
[ 940.026915] Code: 00 49 8b 8f d8 00 00 00 66 83 7c 11 02 00 74 60 49
8b 47 58 48 83 e0 fe 48 8b 80 18 01 00 00 48 85 c0 74 13 48 8b 80 78 02
00 00 <48> ff 40 28 41 8b 57 68 48 01 50 30 48 8b 54 24 08 49 c7 c1 51
[ 940.026915] RIP [] ip6\_xmit+0x276/0x326
[ 940.026915] RSP
[ 940.057945] ---[ end trace be8aba9a61c8b7f3 ]---
[ 940.058583] Kernel panic - not syncing: Fatal exception in interrupt
Signed-off-by: François CACHEREUL
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 9ef3f9ace58ea785564189b5eb6967ef608abde7
Author: Matthias Schiffer
Date: Fri Sep 27 18:03:39 2013 +0200
batman-adv: set up network coding packet handlers during module init
[ Upstream commit 6c519bad7b19a2c14a075b400edabaa630330123 ]
batman-adv saves its table of packet handlers as a global state, so handlers
must be set up only once (and setting them up a second time will fail).
The recently-added network coding support tries to set up its handler each time
a new softif is registered, which obviously fails when more that one softif is
used (and in consequence, the softif creation fails).
Fix this by splitting up batadv\_nc\_init into batadv\_nc\_init (which is called
only once) and batadv\_nc\_mesh\_init (which is called for each softif); in
addition batadv\_nc\_free is renamed to batadv\_nc\_mesh\_free to keep naming
consistent.
Signed-off-by: Matthias Schiffer
Signed-off-by: Marek Lindner
Signed-off-by: Antonio Quartulli
Signed-off-by: Greg Kroah-Hartman
commit 8c89fd5551834088ebb4621921318b95594d4b31
Author: Eric Dumazet
Date: Tue Oct 1 21:04:11 2013 -0700
net: do not call sock\_put() on TIMEWAIT sockets
[ Upstream commit 80ad1d61e72d626e30ebe8529a0455e660ca4693 ]
commit 3ab5aee7fe84 ("net: Convert TCP & DCCP hash tables to use RCU /
hlist\_nulls") incorrectly used sock\_put() on TIMEWAIT sockets.
We should instead use inet\_twsk\_put()
Signed-off-by: Eric Dumazet
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 39fc1ed53e50b5a8b6f8a9da7867d214760be19d
Author: Yuchung Cheng
Date: Sat Oct 12 10:16:27 2013 -0700
tcp: fix incorrect ca\_state in tail loss probe
[ Upstream commit 031afe4990a7c9dbff41a3a742c44d3e740ea0a1 ]
On receiving an ACK that covers the loss probe sequence, TLP
immediately sets the congestion state to Open, even though some packets
are not recovered and retransmisssion are on the way. The later ACks
may trigger a WARN\_ON check in step D of tcp\_fastretrans\_alert(), e.g.,
https://bugzilla.redhat.com/show\_bug.cgi?id=989251
The fix is to follow the similar procedure in recovery by calling
tcp\_try\_keep\_open(). The sender switches to Open state if no packets
are retransmissted. Otherwise it goes to Disorder and let subsequent
ACKs move the state to Recovery or Open.
Reported-By: Michael Sterrett
Tested-By: Dormando
Signed-off-by: Yuchung Cheng
Acked-by: Neal Cardwell
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit dc0791aee672ca2fb8bd61e32a66f77d01bcafc8
Author: Eric Dumazet
Date: Fri Oct 4 10:31:41 2013 -0700
tcp: do not forget FIN in tcp\_shifted\_skb()
[ Upstream commit 5e8a402f831dbe7ee831340a91439e46f0d38acd ]
Yuchung found following problem :
There are bugs in the SACK processing code, merging part in
tcp\_shift\_skb\_data(), that incorrectly resets or ignores the sacked
skbs FIN flag. When a receiver first SACK the FIN sequence, and later
throw away ofo queue (e.g., sack-reneging), the sender will stop
retransmitting the FIN flag, and hangs forever.
Following packetdrill test can be used to reproduce the bug.
$ cat sack-merge-bug.pkt
`sysctl -q net.ipv4.tcp\_fack=0`
// Establish a connection and send 10 MSS.
0.000 socket(..., SOCK\_STREAM, IPPROTO\_TCP) = 3
+.000 setsockopt(3, SOL\_SOCKET, SO\_REUSEADDR, [1], 4) = 0
+.000 bind(3, ..., ...) = 0
+.000 listen(3, 1) = 0
+.050 < S 0:0(0) win 32792
+.000 > S. 0:0(0) ack 1
+.001 < . 1:1(0) ack 1 win 1024
+.000 accept(3, ..., ...) = 4
+.100 write(4, ..., 12000) = 12000
+.000 shutdown(4, SHUT\_WR) = 0
+.000 > . 1:10001(10000) ack 1
+.050 < . 1:1(0) ack 2001 win 257
+.000 > FP. 10001:12001(2000) ack 1
+.050 < . 1:1(0) ack 2001 win 257
+.050 < . 1:1(0) ack 2001 win 257
// SACK reneg
+.050 < . 1:1(0) ack 12001 win 257
+0 %{ print "unacked: ",tcpi\_unacked }%
+5 %{ print "" }%
First, a typo inverted left/right of one OR operation, then
code forgot to advance end\_seq if the merged skb carried FIN.
Bug was added in 2.6.29 by commit 832d11c5cd076ab
("tcp: Try to restore large SKBs while SACK processing")
Signed-off-by: Eric Dumazet
Signed-off-by: Yuchung Cheng
Acked-by: Neal Cardwell
Cc: Ilpo Järvinen
Acked-by: Ilpo Järvinen
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 18ddf5127c9f3ba842bb9e7228fafee6abbb6d6e
Author: Eric Dumazet
Date: Tue Oct 15 11:54:30 2013 -0700
tcp: must unclone packets before mangling them
[ Upstream commit c52e2421f7368fd36cbe330d2cf41b10452e39a9 ]
TCP stack should make sure it owns skbs before mangling them.
We had various crashes using bnx2x, and it turned out gso\_size
was cleared right before bnx2x driver was populating TC descriptor
of the \_previous\_ packet send. TCP stack can sometime retransmit
packets that are still in Qdisc.
Of course we could make bnx2x driver more robust (using
ACCESS\_ONCE(shinfo->gso\_size) for example), but the bug is TCP stack.
We have identified two points where skb\_unclone() was needed.
This patch adds a WARN\_ON\_ONCE() to warn us if we missed another
fix of this kind.
Kudos to Neal for finding the root cause of this bug. Its visible
using small MSS.
Signed-off-by: Eric Dumazet
Signed-off-by: Neal Cardwell
Cc: Yuchung Cheng
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 80bd5d8968d8d2813d05ff485127f45961745cc9
Author: Eric Dumazet
Date: Fri Sep 27 03:28:54 2013 -0700
tcp: TSQ can use a dynamic limit
[ Upstream commit c9eeec26e32e087359160406f96e0949b3cc6f10 ]
When TCP Small Queues was added, we used a sysctl to limit amount of
packets queues on Qdisc/device queues for a given TCP flow.
Problem is this limit is either too big for low rates, or too small
for high rates.
Now TCP stack has rate estimation in sk->sk\_pacing\_rate, and TSO
auto sizing, it can better control number of packets in Qdisc/device
queues.
New limit is two packets or at least 1 to 2 ms worth of packets.
Low rates flows benefit from this patch by having even smaller
number of packets in queues, allowing for faster recovery,
better RTT estimations.
High rates flows benefit from this patch by allowing more than 2 packets
in flight as we had reports this was a limiting factor to reach line
rate. [ In particular if TX completion is delayed because of coalescing
parameters ]
Example for a single flow on 10Gbp link controlled by FQ/pacing
14 packets in flight instead of 2
$ tc -s -d qd
qdisc fq 8001: dev eth0 root refcnt 32 limit 10000p flow\_limit 100p
buckets 1024 quantum 3028 initial\_quantum 15140
Sent 1168459366606 bytes 771822841 pkt (dropped 0, overlimits 0
requeues 6822476)
rate 9346Mbit 771713pps backlog 953820b 14p requeues 6822476
2047 flow, 2046 inactive, 1 throttled, delay 15673 ns
2372 gc, 0 highprio, 0 retrans, 9739249 throttled, 0 flows\_plimit
Note that sk\_pacing\_rate is currently set to twice the actual rate, but
this might be refined in the future when a flow is in congestion
avoidance.
Additional change : skb->destructor should be set to tcp\_wfree().
A future patch (for linux 3.13+) might remove tcp\_limit\_output\_bytes
Signed-off-by: Eric Dumazet
Cc: Wei Liu
Cc: Cong Wang
Cc: Yuchung Cheng
Cc: Neal Cardwell
Acked-by: Neal Cardwell
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit dbeb18b221975144a8bd9258c7dba4b0d7aa3a31
Author: Eric Dumazet
Date: Tue Aug 27 05:46:32 2013 -0700
tcp: TSO packets automatic sizing
[ Upstream commits 6d36824e730f247b602c90e8715a792003e3c5a7,
02cf4ebd82ff0ac7254b88e466820a290ed8289a, and parts of
7eec4174ff29cd42f2acfae8112f51c228545d40 ]
After hearing many people over past years complaining against TSO being
bursty or even buggy, we are proud to present automatic sizing of TSO
packets.
One part of the problem is that tcp\_tso\_should\_defer() uses an heuristic
relying on upcoming ACKS instead of a timer, but more generally, having
big TSO packets makes little sense for low rates, as it tends to create
micro bursts on the network, and general consensus is to reduce the
buffering amount.
This patch introduces a per socket sk\_pacing\_rate, that approximates
the current sending rate, and allows us to size the TSO packets so
that we try to send one packet every ms.
This field could be set by other transports.
Patch has no impact for high speed flows, where having large TSO packets
makes sense to reach line rate.
For other flows, this helps better packet scheduling and ACK clocking.
This patch increases performance of TCP flows in lossy environments.
A new sysctl (tcp\_min\_tso\_segs) is added, to specify the
minimal size of a TSO packet (default being 2).
A follow-up patch will provide a new packet scheduler (FQ), using
sk\_pacing\_rate as an input to perform optional per flow pacing.
This explains why we chose to set sk\_pacing\_rate to twice the current
rate, allowing 'slow start' ramp up.
sk\_pacing\_rate = 2 \* cwnd \* mss / srtt
v2: Neal Cardwell reported a suspect deferring of last two segments on
initial write of 10 MSS, I had to change tcp\_tso\_should\_defer() to take
into account tp->xmit\_size\_goal\_segs
Signed-off-by: Eric Dumazet
Cc: Neal Cardwell
Cc: Yuchung Cheng
Cc: Van Jacobson
Cc: Tom Herbert
Acked-by: Yuchung Cheng
Acked-by: Neal Cardwell
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman


=== Content from git.kernel.org_caa0c66b_20250125_020645.html ===


| [cgit logo](/) | [index](/) : [kernel/git/torvalds/linux.git](/pub/scm/linux/kernel/git/torvalds/linux.git/) | for-next master |
| --- | --- | --- |
| Linux kernel source tree | Linus Torvalds |

| [about](/pub/scm/linux/kernel/git/torvalds/linux.git/about/)[summary](/pub/scm/linux/kernel/git/torvalds/linux.git/)[refs](/pub/scm/linux/kernel/git/torvalds/linux.git/refs/?id=f2e5ddcc0d12f9c4c7b254358ad245c9dddce13b)[log](/pub/scm/linux/kernel/git/torvalds/linux.git/log/)[tree](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/?id=f2e5ddcc0d12f9c4c7b254358ad245c9dddce13b)[commit](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=f2e5ddcc0d12f9c4c7b254358ad245c9dddce13b)[diff](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=f2e5ddcc0d12f9c4c7b254358ad245c9dddce13b)[stats](/pub/scm/linux/kernel/git/torvalds/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Seif Mazareeb <seif@marvell.com> | 2013-10-17 20:33:21 -0700 |
| --- | --- | --- |
| committer | David S. Miller <davem@davemloft.net> | 2013-10-19 18:55:42 -0400 |
| commit | [f2e5ddcc0d12f9c4c7b254358ad245c9dddce13b](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=f2e5ddcc0d12f9c4c7b254358ad245c9dddce13b) ([patch](/pub/scm/linux/kernel/git/torvalds/linux.git/patch/?id=f2e5ddcc0d12f9c4c7b254358ad245c9dddce13b)) | |
| tree | [bd8dd49ab227109cf96093f3124f7753a5dc0ae3](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/?id=f2e5ddcc0d12f9c4c7b254358ad245c9dddce13b) | |
| parent | [90c6bd34f884cd9cee21f1d152baf6c18bcac949](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=90c6bd34f884cd9cee21f1d152baf6c18bcac949) ([diff](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=f2e5ddcc0d12f9c4c7b254358ad245c9dddce13b&id2=90c6bd34f884cd9cee21f1d152baf6c18bcac949)) | |
| download | [linux-f2e5ddcc0d12f9c4c7b254358ad245c9dddce13b.tar.gz](/pub/scm/linux/kernel/git/torvalds/linux.git/snapshot/linux-f2e5ddcc0d12f9c4c7b254358ad245c9dddce13b.tar.gz) | |

net: fix cipso packet validation when !NETLABELWhen CONFIG\_NETLABEL is disabled, the cipso\_v4\_validate() function could loop
forever in the main loop if opt[opt\_iter +1] == 0, this will causing a kernel
crash in an SMP system, since the CPU executing this function will
stall /not respond to IPIs.
This problem can be reproduced by running the IP Stack Integrity Checker
(http://isic.sourceforge.net) using the following command on a Linux machine
connected to DUT:
"icmpsic -s rand -d <DUT IP address> -r 123456"
wait (1-2 min)
Signed-off-by: Seif Mazareeb <seif@marvell.com>
Acked-by: Paul Moore <paul@paul-moore.com>
Signed-off-by: David S. Miller <davem@davemloft.net>
[Diffstat](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=f2e5ddcc0d12f9c4c7b254358ad245c9dddce13b)

| -rw-r--r-- | [include/net/cipso\_ipv4.h](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/include/net/cipso_ipv4.h?id=f2e5ddcc0d12f9c4c7b254358ad245c9dddce13b) | 6 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 4 insertions, 2 deletions

| diff --git a/include/net/cipso\_ipv4.h b/include/net/cipso\_ipv4.hindex a7a683e30b64e6..a8c2ef6d3b932a 100644--- a/[include/net/cipso\_ipv4.h](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/include/net/cipso_ipv4.h?id=90c6bd34f884cd9cee21f1d152baf6c18bcac949)+++ b/[include/net/cipso\_ipv4.h](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/include/net/cipso_ipv4.h?id=f2e5ddcc0d12f9c4c7b254358ad245c9dddce13b)@@ -290,6 +290,7 @@ static inline int cipso\_v4\_validate(const struct sk\_buff \*skb, unsigned char err\_offset = 0; u8 opt\_len = opt[1]; u8 opt\_iter;+ u8 tag\_len;  if (opt\_len < 8) { err\_offset = 1;@@ -302,11 +303,12 @@ static inline int cipso\_v4\_validate(const struct sk\_buff \*skb, }  for (opt\_iter = 6; opt\_iter < opt\_len;) {- if (opt[opt\_iter + 1] > (opt\_len - opt\_iter)) {+ tag\_len = opt[opt\_iter + 1];+ if ((tag\_len == 0) || (opt[opt\_iter + 1] > (opt\_len - opt\_iter))) { err\_offset = opt\_iter + 1; goto out; }- opt\_iter += opt[opt\_iter + 1];+ opt\_iter += tag\_len; }  out: |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-25 02:05:22 +0000


