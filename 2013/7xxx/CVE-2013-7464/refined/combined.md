=== Content from csrf.htmlpurifier.org_fe08e86b_20250125_114639.html ===

# csrf-magic 1.0.4 released

[csrf-magic 1.0.4](/releases/csrf-magic-1.0.4.tar.gz)
contains some bug fixes for secret hashing and JavaScript support, and also
has improved the default CSRF check failed splash page.

[Return to home](/)



=== Content from repo.or.cz_580b533f_20250125_114640.html ===

[![git](/git-logo.png)](http://git-scm.com/ "git homepage") [repo.or.cz](/) / [csrf-magic.git](/csrf-magic.git) / commit

commit
grep
author
committer
pickaxe
[?](/csrf-magic.git/search_help "search help") search:

re

[summary](/csrf-magic.git) | [log](/csrf-magic.git/shortlog/9d2537f70d58b16aeba89779aaf1573b8d618e11) | [graphiclog1](/git-browser/by-commit.html?r=csrf-magic.git) | [graphiclog2](/git-browser/by-date.html?r=csrf-magic.git) | commit | [commitdiff](/csrf-magic.git/commitdiff/9d2537f70d58b16aeba89779aaf1573b8d618e11) | [tree](/csrf-magic.git/tree/9d2537f70d58b16aeba89779aaf1573b8d618e11) | [refs](/csrf-magic.git/refs) | [edit](/editproj.cgi?name=csrf-magic.git) | [fork](/regproj.cgi?fork=csrf-magic.git)

(parent: [8769cbd](/csrf-magic.git/commit/8769cbdf942ff76d40d5fc78246642958225f0be)) | [patch](/csrf-magic.git/patch/9d2537f70d58b16aeba89779aaf1573b8d618e11)

[Fix bug grabbing wrong secret, thanks sparticvs for reporting.](/csrf-magic.git/commitdiff/9d2537f70d58b16aeba89779aaf1573b8d618e11)

| commit | 9d2537f70d58b16aeba89779aaf1573b8d618e11 |
| --- | --- |
| author | [Edward Z. Yang](/csrf-magic.git/search/9d2537f70d58b16aeba89779aaf1573b8d618e11?s=Edward+Z.+Yang;st=author "Search for commits authored by Edward Z. Yang") [<ezyang@mit.edu>](/csrf-magic.git/search/9d2537f70d58b16aeba89779aaf1573b8d618e11?s=ezyang@mit.edu;st=author "Search for commits authored by ezyang@mit.edu") |  |
|  | Wed, 17 Jul 2013 06:22:26 +0000 (16 23:22 -0700) |
| committer | [Edward Z. Yang](/csrf-magic.git/search/9d2537f70d58b16aeba89779aaf1573b8d618e11?s=Edward+Z.+Yang;st=committer "Search for commits committed by Edward Z. Yang") [<ezyang@mit.edu>](/csrf-magic.git/search/9d2537f70d58b16aeba89779aaf1573b8d618e11?s=ezyang@mit.edu;st=committer "Search for commits committed by ezyang@mit.edu") |  |
|  | Wed, 17 Jul 2013 06:22:26 +0000 (16 23:22 -0700) |
| tree | [66d74aa1cb680a0806695b0da2f85be6c06375e3](/csrf-magic.git/tree/9d2537f70d58b16aeba89779aaf1573b8d618e11) | [tree](/csrf-magic.git/tree/9d2537f70d58b16aeba89779aaf1573b8d618e11) | snapshot ([tar.gz](/csrf-magic.git/snapshot/9d2537f70d58b16aeba89779aaf1573b8d618e11.tar.gz) [zip](/csrf-magic.git/snapshot/9d2537f70d58b16aeba89779aaf1573b8d618e11.zip)) |
| parent | [8769cbdf942ff76d40d5fc78246642958225f0be](/csrf-magic.git/commit/8769cbdf942ff76d40d5fc78246642958225f0be) | [commit](/csrf-magic.git/commit/8769cbdf942ff76d40d5fc78246642958225f0be) | [diff](/csrf-magic.git/commitdiff/9d2537f70d58b16aeba89779aaf1573b8d618e11?hp=8769cbdf942ff76d40d5fc78246642958225f0be) |

Fix bug grabbing wrong secret, thanks sparticvs for reporting.

Signed-off-by: Edward Z. Yang <ezyang@mit.edu>

| [csrf-magic.php](/csrf-magic.git/blob/9d2537f70d58b16aeba89779aaf1573b8d618e11%3A/csrf-magic.php) |  | [diff](/csrf-magic.git/blobdiff/8769cbdf942ff76d40d5fc78246642958225f0be..9d2537f70d58b16aeba89779aaf1573b8d618e11%3A/csrf-magic.php) | [blob](/csrf-magic.git/blob/9d2537f70d58b16aeba89779aaf1573b8d618e11%3A/csrf-magic.php) | [blame](/csrf-magic.git/blame/9d2537f70d58b16aeba89779aaf1573b8d618e11%3A/csrf-magic.php) | [history](/csrf-magic.git/history/9d2537f70d58b16aeba89779aaf1573b8d618e11%3A/csrf-magic.php) |
| --- | --- | --- |

Wizard CSRF protection for PHP
[RSS](/csrf-magic.git/rss "log RSS feed")
[Atom](/csrf-magic.git/atom "log Atom feed")



=== Content from repo.or.cz_83001fd0_20250125_114639.html ===

[![git](/git-logo.png)](http://git-scm.com/ "git homepage") [repo.or.cz](/) / [csrf-magic.git](/csrf-magic.git) / blob

commit
grep
author
committer
pickaxe
[?](/csrf-magic.git/search_help "search help") search:

re

[summary](/csrf-magic.git) | [log](/csrf-magic.git/shortlog) | [graphiclog1](/git-browser/by-commit.html?r=csrf-magic.git) | [graphiclog2](/git-browser/by-date.html?r=csrf-magic.git) | [commit](/csrf-magic.git/commit/HEAD) | [commitdiff](/csrf-magic.git/commitdiff/HEAD) | [tree](/csrf-magic.git/tree/HEAD) | [refs](/csrf-magic.git/refs) | [edit](/editproj.cgi?name=csrf-magic.git) | [fork](/regproj.cgi?fork=csrf-magic.git)

[blame](/csrf-magic.git/blame/HEAD%3A/NEWS.txt) | [history](/csrf-magic.git/history/HEAD%3A/NEWS.txt) | [raw](/csrf-magic.git/blob_plain/HEAD%3A/NEWS.txt) | [HEAD](/csrf-magic.git/blob/HEAD%3A/NEWS.txt)

[Release 1.0.5.](/csrf-magic.git/commit/HEAD)

[[csrf-magic.git]](/csrf-magic.git/tree/HEAD "tree root") / [NEWS.txt](/csrf-magic.git/blob_plain/HEAD%3A/NEWS.txt "NEWS.txt")

| blob | 6962c99bb4e2a511260ce136908b25bcd2e97ecb |
| --- | --- |

 [1](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l1)
 [2](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l2)                             [[     news     ]]
 [3](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l3)
 [4](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l4) 1.0.5 released 2014-07-24
 [5](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l5)
 [6](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l6)   [BUG FIXES]
 [7](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l7)
 [8](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l8)     - In some server environments, IP address was not being detected
 [9](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l9)       properly.  Thanks Bianka Martinovic for reporting.
 [10](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l10)
 [11](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l11)   [SECURITY FIXES]
 [12](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l12)
 [13](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l13)     - Hashing now uses an HMAC to prevent length extension attacks.
 [14](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l14)
 [15](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l15)   [FEATURE]
 [16](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l16)
 [17](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l17)     - New option 'disable' which allows you to conditionally disable
 [18](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l18)       the CSRF protection.  Requested by Justin Carlson.
 [19](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l19)
 [20](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l20) 1.0.4 released 2013-07-17
 [21](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l21)
 [22](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l22)   [SECURITY FIXES]
 [23](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l23)
 [24](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l24)     - When secret key was not explicitly set, it was not being used
 [25](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l25)       by the csrf\_hash() function.  Thanks sparticvs for reporting.
 [26](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l26)
 [27](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l27)   [FEATURES]
 [28](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l28)
 [29](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l29)     - The default 'CSRF check failed' page now offers a handy 'Try
 [30](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l30)       again' button, which resubmits the form.
 [31](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l31)
 [32](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l32)   [BUG FIXES]
 [33](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l33)
 [34](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l34)     - The fix for 1.0.3 inadvertantly turned off XMLHttpRequest
 [35](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l35)       overloading for all browsers; it has now been fixed to only
 [36](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l36)       apply to IE.
 [37](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l37)
 [38](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l38) 1.0.3 released 2012-01-31
 [39](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l39)
 [40](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l40)  [BUG FIXES]
 [41](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l41)
 [42](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l42)     - Internet Explorer 8 adds support for XMLHttpRequest.prototype,
 [43](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l43)       but this support is broken for method overloading.  We
 [44](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l44)       explicitly disable JavaScript overloading for Internet Explorer.
 [45](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l45)       Thanks Kelly Lu for reporting. <lubird@gmail.com>
 [46](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l46)
 [47](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l47)     - A global declaration was omitted, resulting in a variable
 [48](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l48)       not being properly introduced in PHP 5.3.  Thanks Whitney Beck for
 [49](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l49)       reporting. <whitney.a.beck@gmail.com>
 [50](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l50)
 [51](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l51) 1.0.2 released 2009-03-08
 [52](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l52)
 [53](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l53)  [SECURITY FIXES]
 [54](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l54)
 [55](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l55)     - Due to a typo, csrf-magic accidentally treated the secret key
 [56](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l56)       as always present.  This means that there was a possible CSRF
 [57](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l57)       attack against users without any cookies.  No attacks in the
 [58](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l58)       wild were known at the time of this release.  Thanks Jakub
 [59](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l59)       Vrána for reporting.
 [60](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l60)
 [61](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l61) 1.0.1 released 2008-11-02
 [62](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l62)
 [63](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l63)  [NEW FEATURES]
 [64](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l64)
 [65](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l65)     - Support for composite tokens; this also fixes a bug with using
 [66](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l66)       IP-based tokens for users with cookies disabled.
 [67](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l67)
 [68](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l68)     - Native support cookie tokens; use csrf\_conf('cookie', $name) to
 [69](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l69)       specify the name of a cookie that the CSRF token should be
 [70](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l70)       placed in.  This is useful if you have a Squid cache, and need
 [71](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l71)       to configure it to ignore this token.
 [72](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l72)
 [73](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l73)     - Tips/tricks section in README.txt.
 [74](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l74)
 [75](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l75)     - There is now a two hour expiration time on all tokens.  This
 [76](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l76)       can be modified using csrf\_conf('expires', $seconds).
 [77](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l77)
 [78](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l78)     - ClickJacking protection using an iframe breaker.  Disable with
 [79](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l79)       csrf\_conf('frame-breaker', false).
 [80](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l80)
 [81](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l81)  [BUG FIXES]
 [82](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l82)
 [83](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l83)     - CsrfMagic.send() incorrectly submitted GET requests twice,
 [84](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l84)       once without the magic token and once with the token.  Reported
 [85](/csrf-magic.git/blob/HEAD%3A/NEWS.txt#l85)       by Kelly Lu <lubird@gmail.com>.
Wizard CSRF protection for PHP
[RSS](/csrf-magic.git/rss?f=NEWS.txt "history of NEWS.txt RSS feed")
[Atom](/csrf-magic.git/atom?f=NEWS.txt "history of NEWS.txt Atom feed")


