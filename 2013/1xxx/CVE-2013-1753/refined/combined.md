=== Content from bugs.python.org_f80a6a39_20250125_210822.html ===

# [homepage](.)

open

all

* [Python Home](https://www.python.org/ "Go to the Python homepage")
* [About](https://www.python.org/about/ "About The Python Language")
* [News](https://www.python.org/blogs/)
* [Documentation](https://www.python.org/doc/)
* [Downloads](https://www.python.org/downloads/)
* [Community](https://www.python.org/community/)
* [Foundation](https://www.python.org/psf/ "Python Software Foundation")
* [Developer's Guide](https://devguide.python.org/ "Python Developer's Guide")
* [Issue Tracker](. "Python Issue Tracker")
  + **Issues**
    - [Search](issue?@template=search&status=1)
    - [Random Issue](issue?@action=random)
  + **Summaries**
    - [Issues with patch](issue?status=1&@sort=-activity&@columns=id%2Cgithub%2Cactivity%2Ctitle%2Ccreator%2Cstatus&@dispname=Issues%20with%20patch&@startwith=0&@group=priority&keywords=2&@action=search&@filter=&@pagesize=50)
    - [Easy issues](issue?status=1&@sort=-activity&@columns=id%2Cgithub%2Cactivity%2Ctitle%2Ccreator%2Cstatus&@dispname=Easy%20issues&@startwith=0&@group=priority&keywords=6&@action=search&@filter=&@pagesize=50)
    - [Stats](issue?@template=stats)
  + **User**
    - Login

      Remember me?
    - [Lost your login?](user?@template=forgotten)
  + **Administration**
    - [User List](user?@sort=username)
    - [Committer List](user?iscommitter=1&@action=search&@sort=username&@pagesize=300)
  + **Help**
    - [Tracker Documentation](http://docs.python.org/devguide/triaging.html)
    - [Tracker Development](http://wiki.python.org/moin/TrackerDevelopment)
    - [Report Tracker Problem](https://github.com/python/psf-infra-meta/issues)

Issue16043

![](@@file/python-logo-small.png)
➜
[![](@@file/gh-icon.png)](https://github.com/python/cpython/issues)

This issue tracker **has been migrated to [GitHub](https://github.com/python/cpython/issues)**,
and is currently **read-only**.

For more information, [see the GitHub FAQs in the Python's Developer Guide.](https://devguide.python.org/gh-faq/ "GitHub FAQs")

[![](@@file/gh-icon.png)

This issue has been migrated to GitHub:
https://github.com/python/cpython/issues/60247](https://github.com/python/cpython/issues/60247)

classification

| [Title](http://docs.python.org/devguide/triaging.html#title): | xmlrpc: gzip\_decode has unlimited read() | | |
| --- | --- | --- | --- |
| [Type](http://docs.python.org/devguide/triaging.html#type): | resource usage | [Stage](http://docs.python.org/devguide/triaging.html#stage): | resolved |
| [Components](http://docs.python.org/devguide/triaging.html#components): | Library (Lib) | [Versions](http://docs.python.org/devguide/triaging.html#versions): | Python 3.1, Python 3.2, Python 3.3, Python 3.4, Python 2.7 |

process

| [Status](http://docs.python.org/devguide/triaging.html#status): | closed | [Resolution](http://docs.python.org/devguide/triaging.html#resolution): | fixed |
| --- | --- | --- | --- |
| [Dependencies](http://docs.python.org/devguide/triaging.html#dependencies): |  | [Superseder](http://docs.python.org/devguide/triaging.html#superseder): |  |
| [Assigned To](http://docs.python.org/devguide/triaging.html#assigned-to): | christian.heimes | [Nosy List](http://docs.python.org/devguide/triaging.html#nosy-list): | Arfrever, Jim.Jewett, barry, benjamin.peterson, christian.heimes, doko, flox, georg.brandl, larry, loewis, martin.panter, matejcik, python-dev, schmir, serhiy.storchaka |
| [Priority](http://docs.python.org/devguide/triaging.html#priority): | release blocker | [Keywords](http://docs.python.org/devguide/triaging.html#keywords): | patch |

Created on **2012-09-25 10:52** by **christian.heimes**, last changed **2022-04-11 14:57** by **admin**. This issue is now **closed**.

| Files | | | | |
| --- | --- | --- | --- | --- |
| File name | Uploaded | Description | Edit |
| [xmlrpc\_gzip\_27.patch](file28796/xmlrpc_gzip_27.patch) | christian.heimes, 2013-01-20 15:14 |  |  |
| [xmlrpc\_gzip\_27\_parameter.patch](file37343/xmlrpc_gzip_27_parameter.patch) | doko, 2014-12-02 12:39 |  | [review](/review/16043/#ps13342) |
| [xmlrpc\_gzip\_27\_parameter.patch](file37344/xmlrpc_gzip_27_parameter.patch) | doko, 2014-12-02 12:54 |  | [review](/review/16043/#ps13343) |

| Messages (16) | | | |
| --- | --- | --- | --- |
| [msg171246](#msg171246) - [(view)](msg171246) | Author: Christian Heimes (christian.heimes) \* (Python committer) | Date: 2012-09-25 10:52 |
| ``` The xmlrpc client library is the only stdlib module that has a gzip decompression handler for compressed HTTP streams. The gzip_decode() function decompresses HTTP bodies that are compressed and sent with Accept-Encoding: x-gzip.  A malicious server can send a specially prepared HTTP request that can consume lots of memory. For example 1 GB of \0 bytes is less than 1 MB of gzip data.  Suggestion: The gzip_decode() should only decode a sane amount of bytes (for example 50 MB) and raise an exception when more data is to be read. ``` | | | |
| [msg171247](#msg171247) - [(view)](msg171247) | Author: Christian Heimes (christian.heimes) \* (Python committer) | Date: 2012-09-25 10:58 |
| ``` Also see [#15955](issue15955 "[closed] bz2, lzma: add option to limit output size")  According to Nadeem it's not (easily) possible to detect how large the output is going to be. ``` | | | |
| [msg180296](#msg180296) - [(view)](msg180296) | Author: Christian Heimes (christian.heimes) \* (Python committer) | Date: 2013-01-20 15:14 |
| ``` The attached patch adds a limitation to xmlrpclib.gzip_decode(). ``` | | | |
| [msg182087](#msg182087) - [(view)](msg182087) | Author: Christian Heimes (christian.heimes) \* (Python committer) | Date: 2013-02-14 11:24 |
| ``` IMHO the patch should also limit the maximum amount of read bytes in Transport.parse_response(). Do you agree? ``` | | | |
| [msg182093](#msg182093) - [(view)](msg182093) | Author: Serhiy Storchaka (serhiy.storchaka) \* (Python committer) | Date: 2013-02-14 12:10 |
| ``` I think instead of global variable it will be better to add an optional parameter for gzip_decode() (with a sane default value) and related functions. Or at least in additional to it. ``` | | | |
| [msg182138](#msg182138) - [(view)](msg182138) | Author: Christian Heimes (christian.heimes) \* (Python committer) | Date: 2013-02-15 12:53 |
| ``` +1 for a keyword argument  I also have to add a limit to GzipDecodedResponse().  Python 2.6 and 3.1 are not affected by the issue. The problematic code was added in 2.7 and 3.2. ``` | | | |
| [msg182203](#msg182203) - [(view)](msg182203) | Author: Christian Heimes (christian.heimes) \* (Python committer) | Date: 2013-02-16 00:08 |
| ``` CVE-2013-1753 gzip bomb and unbound read DoS vulnerabilities in Python's xmlrpc library ``` | | | |
| [msg185061](#msg185061) - [(view)](msg185061) | Author: Benjamin Peterson (benjamin.peterson) \* (Python committer) | Date: 2013-03-23 14:46 |
| ``` Not blocking 2.7.4 as discussed on mailing list. ``` | | | |
| [msg196857](#msg196857) - [(view)](msg196857) | Author: Barry A. Warsaw (barry) \* (Python committer) | Date: 2013-09-03 18:32 |
| ``` blocker for 2.6.9 ``` | | | |
| [msg200345](#msg200345) - [(view)](msg200345) | Author: Larry Hastings (larry) \* (Python committer) | Date: 2013-10-19 01:20 |
| ``` Ping.  Can we get this fixed before beta 1? ``` | | | |
| [msg207176](#msg207176) - [(view)](msg207176) | Author: Martin v. Löwis (loewis) \* (Python committer) | Date: 2014-01-02 16:56 |
| ``` Demoting this from release blocker: apparently, the release-blocking property was only intended for 2.6.9, which has been released. ``` | | | |
| [msg213976](#msg213976) - [(view)](msg213976) | Author: Jim Jewett (Jim.Jewett) \* (Python triager) | Date: 2014-03-18 15:00 |
| ``` I'm putting it back to release blocker, because 3.3 should decide whether to fix it/call it security/remove itself from the list.  The patch contains several small changes.  I like the spelling fix (gsip -> gzip) in a test method, but otherwise, I prefer the alternative solution of an additional function parameter with a default.  I would prefer that the marker for "no limit" be None, rather than -1, 0, or anything less than 0.  I also don't see the point of raising a too-much-data ValueError *after* decoding.  While that *might* mean we set the default too low, all we would really know for sure is that there would be a bug in gzip.GzipFile().read -- and ValueError suggests otherwise. ``` | | | |
| [msg231989](#msg231989) - [(view)](msg231989) | Author: Matthias Klose (doko) \* (Python committer) | Date: 2014-12-02 12:39 |
| ``` updated patch to use an optional parameter "max_decode". ``` | | | |
| [msg231992](#msg231992) - [(view)](msg231992) | Author: Matthias Klose (doko) \* (Python committer) | Date: 2014-12-02 12:54 |
| ``` document the new exception ``` | | | |
| [msg232231](#msg232231) - [(view)](msg232231) | Author: Roundup Robot (python-dev) (Python triager) | Date: 2014-12-06 01:17 |
| ``` New changeset [d50096708b2d](https://hg.python.org/lookup/d50096708b2d) by Benjamin Peterson in branch '2.7': add a default limit for the amount of data xmlrpclib.gzip_decode will return (closes [#16043](issue16043 "[closed] xmlrpc: gzip_decode has unlimited read()")) <https://hg.python.org/cpython/rev/d50096708b2d> ``` | | | |
| [msg232235](#msg232235) - [(view)](msg232235) | Author: Roundup Robot (python-dev) (Python triager) | Date: 2014-12-06 01:36 |
| ``` New changeset [a0368f81af9a](https://hg.python.org/lookup/a0368f81af9a) by Benjamin Peterson in branch '3.2': add a default limit for the amount of data xmlrpclib.gzip_decode will return (closes [#16043](issue16043 "[closed] xmlrpc: gzip_decode has unlimited read()")) <https://hg.python.org/cpython/rev/a0368f81af9a>  New changeset [4a9418c6f8ae](https://hg.python.org/lookup/4a9418c6f8ae) by Benjamin Peterson in branch '3.3': merge 3.2 ([#16043](issue16043 "[closed] xmlrpc: gzip_decode has unlimited read()")) <https://hg.python.org/cpython/rev/4a9418c6f8ae>  New changeset [6b83e21c8679](https://hg.python.org/lookup/6b83e21c8679) by Benjamin Peterson in branch '3.4': merge 3.3 ([#16043](issue16043 "[closed] xmlrpc: gzip_decode has unlimited read()")) <https://hg.python.org/cpython/rev/6b83e21c8679>  New changeset [6f002c4741e2](https://hg.python.org/lookup/6f002c4741e2) by Benjamin Peterson in branch 'default': merge 3.4 ([#16043](issue16043 "[closed] xmlrpc: gzip_decode has unlimited read()")) <https://hg.python.org/cpython/rev/6f002c4741e2> ``` | | | |

| History | | | |
| --- | --- | --- | --- |
| Date | User | Action | Args |
| 2022-04-11 14:57:36 | admin | set | github: 60247 |
| 2014-12-06 01:36:14 | python-dev | set | messages: + <msg232235> |
| 2014-12-06 01:17:14 | python-dev | set | status: open -> closednosy: + [python-dev](user13902)messages: + <msg232231>resolution: fixedstage: patch review -> resolved |
| 2014-12-02 12:54:20 | doko | set | files: + [xmlrpc\_gzip\_27\_parameter.patch](file37344)messages: + <msg231992> |
| 2014-12-02 12:39:17 | doko | set | files: + [xmlrpc\_gzip\_27\_parameter.patch](file37343)nosy: + [doko](user169)messages: + <msg231989> |
| 2014-03-26 15:56:22 | matejcik | set | nosy: + [matejcik](user3981) |
| 2014-03-18 15:00:45 | Jim.Jewett | set | priority: critical -> release blockernosy: + [Jim.Jewett](user15267)messages: + <msg213976> |
| 2014-01-02 16:56:38 | loewis | set | priority: release blocker -> criticalnosy: + [loewis](user8)messages: + <msg207176> |
| 2013-10-19 01:20:09 | larry | set | messages: + <msg200345> |
| 2013-09-15 19:46:57 | Arfrever | set | versions: + Python 3.1 |
| 2013-09-15 15:45:15 | barry | set | versions: - Python 2.6 |
| 2013-09-03 18:32:44 | barry | set | priority: critical -> release blockermessages: + <msg196857> |
| 2013-06-17 06:34:45 | martin.panter | set | nosy: + [martin.panter](user14751) |
| 2013-03-23 14:46:10 | benjamin.peterson | set | priority: release blocker -> criticalmessages: + <msg185061> |
| 2013-02-22 23:32:27 | Arfrever | set | nosy: + [Arfrever](user9138) |
| 2013-02-22 13:00:14 | flox | set | nosy: + [flox](user11184) |
| 2013-02-20 22:27:27 | barry | set | nosy: + [barry](user19)versions: + Python 2.6 |
| 2013-02-16 00:08:01 | christian.heimes | set | messages: + <msg182203> |
| 2013-02-15 12:53:50 | christian.heimes | set | messages: + <msg182138> |
| 2013-02-14 12:10:37 | serhiy.storchaka | set | nosy: + [serhiy.storchaka](user15623)messages: + <msg182093> |
| 2013-02-14 11:24:29 | christian.heimes | set | messages: + <msg182087> |
| 2013-02-04 17:12:49 | christian.heimes | set | priority: critical -> release blockernosy: + [georg.brandl](user93), [larry](user2731), [benjamin.peterson](user4455) |
| 2013-01-20 15:14:03 | christian.heimes | set | files: + [xmlrpc\_gzip\_27.patch](file28796)priority: normal -> criticaldependencies: - [bz2, lzma: add option to limit output size](issue15955)assignee: [christian.heimes](user3108)versions: + Python 3.4keywords: + [patch](keyword2)messages: + <msg180296>stage: patch review |
| 2012-09-25 10:58:41 | christian.heimes | set | dependencies: + [bz2, lzma: add option to limit output size](issue15955)messages: + <msg171247> |
| 2012-09-25 10:53:04 | schmir | set | nosy: + [schmir](user3935) |
| 2012-09-25 10:52:06 | christian.heimes | create |  |

Supported by [The Python Software Foundation](https://python.org/psf-landing/ "The Python Software Foundation"),

Powered by [Roundup](http://roundup.sourceforge.net "Powered by the Roundup Issue Tracker")

Copyright © 1990-2022, [Python Software Foundation](http://python.org/psf)


