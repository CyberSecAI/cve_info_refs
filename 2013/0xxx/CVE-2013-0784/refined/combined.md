=== Content from bugzilla.mozilla.org_34c0facf_20250124_202811.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/827687)
* [XML](/show_bug.cgi?ctype=xml&id=827687)

Closed
[Bug 827687](/show_bug.cgi?id=827687)

Opened 12 years ago
Closed 12 years ago

# Out of bounds read [@ ElementAnimations::EnsureStyleRuleFor] with CSS animation

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

Out of bounds read [@ ElementAnimations::EnsureStyleRuleFor] with CSS animation

## Categories

### (Core :: CSS Parsing and Computation, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=CSS%20Parsing%20and%20Computation#CSS%20Parsing%20and%20Computation)

CSS Parsing and Computation
▾

Core :: CSS Parsing and Computation

Issues with loading CSS style sheets from the network, parsing style sheets and style attributes in HTML markup, performing the CSS cascade, selector matching, and producing correct computed values for CSS properties.

Example bugs:

* toggling class name on an element does not restyle the element
* background-color property does not support hsl() values

Specifications covered:

* CSS Cascading
* CSS Conditional
* CSS Logical Properties
* CSS Namespaces
* CSS Scoping
* CSS Style Attributes
* CSS Syntax
* CSS Values
* CSS Variables
* Media Queries
* Selectors

[See Open Bugs in This Component](/buglist.cgi?product=Core&component=CSS%20Parsing%20and%20Computation&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=CSS%20Parsing%20and%20Computation&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=CSS%20Parsing%20and%20Computation)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

All

All

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

critical

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla21

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Webcompat Score | --- |
| --- | --- |
| a11y-review | --- |
| Accessibility Severity | --- |
| Performance Impact | --- |
| Webcompat Priority | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox18 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=wontfix) |
| firefox19 | --- | [fixed](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=fixed) |
| firefox20 | --- | [fixed](/buglist.cgi?f1=cf_status_firefox20&o1=equals&v1=fixed) |
| firefox21 | [+](/buglist.cgi?f1=cf_tracking_firefox21&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox21&o1=equals&v1=fixed) |
| firefox-esr10 | --- | [wontfix](/buglist.cgi?f1=cf_status_esr10&o1=equals&v1=wontfix) |
| firefox-esr17 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=wontfix) |
| b2g18 | --- | [wontfix](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=wontfix) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox18 |  | wontfix |
| firefox19 |  | fixed |
| firefox20 |  | fixed |
| firefox21 | + | fixed |
| firefox-esr10 |  | wontfix |
| firefox-esr17 |  | wontfix |
| b2g18 |  | wontfix |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: jruderman, Assigned: dbaron)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/0a32391d55cfa63276f87eb9819dfbd0?d=mm&size=40)  [dbaron](/user_profile?user_id=3881)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/d2dc9227eafcd0ec5ba3712ee4f19b75?d=mm&size=40)  [jruderman](/user_profile?user_id=11608)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/1d91d22a4892f16f744b31fd4286144e?d=mm&size=40)  [emilio](/user_profile?user_id=546716)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

5 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[randomclasses](/show_bug.cgi?id=331889 "RESOLVED INACTIVE - [meta] Bugs found with \"Random Classes\" (adding random CSS stylesheets)")

Dependency [tree](/showdependencytree.cgi?id=827687&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=827687)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (4 keywords, Whiteboard: [asan][adv-main19+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[crash](/buglist.cgi?keywords=crash&resolution=---),
[csectype-intoverflow](/buglist.cgi?keywords=csectype-intoverflow&resolution=---),
[sec-moderate](/buglist.cgi?keywords=sec-moderate&resolution=---),
[testcase](/buglist.cgi?keywords=testcase&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[asan][adv-main19+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | in-testsuite |  |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (4 files, 1 obsolete file)

| [testcase (may crash)](/attachment.cgi?id=699002)  [12 years ago](#c0)  [Jesse Ruderman](/user_profile?user_id=11608)   391 bytes, text/html |  | [Details](/attachment.cgi?id=699002&action=edit) |
| --- | --- | --- |
| [stacks](/attachment.cgi?id=699003)  [12 years ago](#c1)  [Jesse Ruderman](/user_profile?user_id=11608)   3.99 KB, text/plain |  | [Details](/attachment.cgi?id=699003&action=edit) |
| [patch](/attachment.cgi?id=699009)  [12 years ago](#c3)  [David Baron :dbaron: (⌚️UTC-4, no longer working on Mozilla)](/user_profile?user_id=3881)   2.97 KB, patch | bzbarsky : [review+](#c10 "12 years ago")  akeybl : [approval-mozilla-aurora+](#c23 "12 years ago")  akeybl : [approval-mozilla-beta+](#c23 "12 years ago") | [Details](/attachment.cgi?id=699009&action=edit) | [Diff](/attachment.cgi?id=699009&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=827687&attachment=699009) |
| [patch 2: make these errors not be exploitable](/attachment.cgi?id=700125)  [12 years ago](#c8)  [David Baron :dbaron: (⌚️UTC-4, no longer working on Mozilla)](/user_profile?user_id=3881)   1.57 KB, patch |  | [Details](/attachment.cgi?id=700125&action=edit) | [Diff](/attachment.cgi?id=700125&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=827687&attachment=700125) |
| [patch 2: make these errors not be exploitable](/attachment.cgi?id=700809)  [12 years ago](#c12)  [David Baron :dbaron: (⌚️UTC-4, no longer working on Mozilla)](/user_profile?user_id=3881)   1.79 KB, patch | bzbarsky : [review+](#c13 "12 years ago")  akeybl : [approval-mozilla-aurora+](#a492122_425645 "12 years ago")  akeybl : [approval-mozilla-beta+](#a492122_425645 "12 years ago") | [Details](/attachment.cgi?id=700809&action=edit) | [Diff](/attachment.cgi?id=700809&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=827687&attachment=700809) |

Show Obsolete

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Jesse Ruderman](/user_profile?user_id=11608)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=827687#c0)• 12 years ago |
|  | |

Attached file
[testcase (may crash)](attachment.cgi?id=699002)
— [Details](attachment.cgi?id=699002&action=edit)

\* In a non-debug ASan build, this appears as a heap buffer overflow
[@ ElementAnimations::EnsureStyleRuleFor] (same signature as fixed [bug 765218](/show_bug.cgi?id=765218 "VERIFIED FIXED - Out of bounds read in ElementAnimations::EnsureStyleRuleFor")).
\* In a non-ASan build, this crashes infrequently.
\* But adding onload-reload to the testcase makes it reliable enough:
\* [bp-3a3f345f-bed8-46b1-a008-ee44f2130108](https://crash-stats.mozilla.org/report/index/3a3f345f-bed8-46b1-a008-ee44f2130108)
\* [bp-cda868fb-6a82-4e77-86c9-3944a2130108](https://crash-stats.mozilla.org/report/index/cda868fb-6a82-4e77-86c9-3944a2130108)
\* In a debug build, the crash is masked by the abort in [bug 662724](/show_bug.cgi?id=662724 "RESOLVED WORKSFORME - [css3-animations] \"ABORT: position should be in [0-1]\""):
###!!! ABORT: position should be in [0-1]: '0.0 <= positionInIteration && positionInIteration <= 1.0', file layout/style/nsAnimationManager.cpp, line 235

|  | [Jesse Ruderman](/user_profile?user_id=11608)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=827687#a16_11608)• 12 years ago |

Group: core-security

|  | [Jesse Ruderman](/user_profile?user_id=11608)  Reporter |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=827687#c1)• 12 years ago |
|  | |

Attached file
[stacks](attachment.cgi?id=699003)
— [Details](attachment.cgi?id=699003&action=edit)

It might be possible to get a better stack by disabling the assertion in a debug build. Or compiling a non-debug build without optimizations.

|  | [David Baron :dbaron: (⌚️UTC-4, no longer working on Mozilla)](/user_profile?user_id=3881)  Assignee |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=827687#c2)• 12 years ago |
|  | |

ElementAnimations::GetPositionInIteration has:
uint32\_t whichIteration = int(currentIterationCount);
if (whichIteration == aIterationCount && whichIteration != 0) {
// When the animation's iteration count is an integer (as it
// normally is), we need to end at 100% of its last iteration
// rather than 0% of the next one (unless it's zero).
--whichIteration;
}
double positionInIteration =
currentIterationCount - double(whichIteration);
which doesn't work when currentIterationCount is out of uint32\_t or int range (never mind uint32\_t vs. int, oops).
Also, while I'm here... we should really be using the length of the animation-name list in BuildAnimations, yikes!

|  | [David Baron :dbaron: (⌚️UTC-4, no longer working on Mozilla)](/user_profile?user_id=3881)  Assignee |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=827687#c3)• 12 years ago |
|  | |

Attached patch

[patch](attachment.cgi?id=699009&action=diff)
— [Details](attachment.cgi?id=699009&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=827687&attachment=699009)

[Attachment #699009](/attachment.cgi?id=699009&action=edit "patch") -
Flags: review?(bzbarsky)

|  | [David Baron :dbaron: (⌚️UTC-4, no longer working on Mozilla)](/user_profile?user_id=3881)  Assignee |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=827687#c4)• 12 years ago |
|  | |

(In reply to David Baron [:dbaron] from [comment #2](/show_bug.cgi?id=827687#c2 "RESOLVED FIXED - Out of bounds read [@ ElementAnimations::EnsureStyleRuleFor] with CSS animation"))
> Also, while I'm here... we should really be using the length of the
> animation-name list in BuildAnimations, yikes!
Filed this as [bug 827698](/show_bug.cgi?id=827698 "RESOLVED FIXED - [css3-animations] determine the number of animations using the length of the 'animation-name' list"), which will coincidentally make this testcase no longer show the bug, even without the patch here.

|  | [David Baron :dbaron: (⌚️UTC-4, no longer working on Mozilla)](/user_profile?user_id=3881)  Assignee |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=827687#c5)• 12 years ago |
|  | |

(So, for the record (and for when we add the testcase after opening this bug), the assertion was happening at (0-based) index 4, though I don't see any reason it wouldn't have also happened at index 1.)

|  | [David Baron :dbaron: (⌚️UTC-4, no longer working on Mozilla)](/user_profile?user_id=3881)  Assignee |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=827687#c6)• 12 years ago |
|  | |

<https://tbpl.mozilla.org/?tree=Try&rev=e63a1700f149>

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=827687#c7)• 12 years ago |
|  | |

What rating would you give this?

|  | [David Baron :dbaron: (⌚️UTC-4, no longer working on Mozilla)](/user_profile?user_id=3881)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=827687#a157829_3881)• 12 years ago |

Keywords: [csec-intoverflow](/buglist.cgi?keywords=csec-intoverflow&resolution=---)

|  | [David Baron :dbaron: (⌚️UTC-4, no longer working on Mozilla)](/user_profile?user_id=3881)  Assignee |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=827687#c8)• 12 years ago |
|  | |

Attached patch

[patch 2: make these errors not be exploitable](attachment.cgi?id=700125&action=diff) (obsolete)
— [Details](attachment.cgi?id=700125&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=827687&attachment=700125)

[Attachment #700125](/attachment.cgi?id=700125&action=edit "patch 2: make these errors not be exploitable") -
Flags: review?(bzbarsky)

|  | [David Baron :dbaron: (⌚️UTC-4, no longer working on Mozilla)](/user_profile?user_id=3881)  Assignee |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=827687#c9)• 12 years ago |
|  | |

It's reading past the end of an array and doing floating-point comparisons on the memory it finds there. What rating is that?

|  | [David Baron :dbaron: (⌚️UTC-4, no longer working on Mozilla)](/user_profile?user_id=3881)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=827687#a158517_3881)• 12 years ago |

OS: Mac OS X → AllHardware: x86\_64 → All

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209) |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=827687#c10)• 12 years ago |
|  | |

Comment on [attachment 699009](/attachment.cgi?id=699009 "patch") [[details]](/attachment.cgi?id=699009&action=edit "patch") [[diff]](/attachment.cgi?id=699009&action=diff "patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=827687&attachment=699009)
patch
>+ // see as previous case
s/as // ?
r=me
[Attachment #699009](/attachment.cgi?id=699009&action=edit "patch") -
Flags: review?(bzbarsky) → review+

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209) |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=827687#c11)• 12 years ago |
|  | |

Comment on [attachment 700125](/attachment.cgi?id=700125 "patch 2: make these errors not be exploitable") [[details]](/attachment.cgi?id=700125&action=edit "patch 2: make these errors not be exploitable") [[diff]](/attachment.cgi?id=700125&action=diff "patch 2: make these errors not be exploitable") [[review]](/page.cgi?id=splinter.html&ignore=&bug=827687&attachment=700125)
patch 2: make these errors not be exploitable
I don't see how the "continue" helps. Shouldn't it be "break"?

|  | [David Baron :dbaron: (⌚️UTC-4, no longer working on Mozilla)](/user_profile?user_id=3881)  Assignee |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=827687#c12)• 12 years ago |
|  | |

Attached patch

[patch 2: make these errors not be exploitable](attachment.cgi?id=700809&action=diff)
— [Details](attachment.cgi?id=700809&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=827687&attachment=700809)

I hate C.
[Attachment #700125](/attachment.cgi?id=700125&action=edit "patch 2: make these errors not be exploitable") -
Attachment is obsolete: true
[Attachment #700125](/attachment.cgi?id=700125&action=edit "patch 2: make these errors not be exploitable") -
Flags: review?(bzbarsky)
[Attachment #700809](/attachment.cgi?id=700809&action=edit "patch 2: make these errors not be exploitable") -
Flags: review?(bzbarsky)

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209) |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=827687#c13)• 12 years ago |
|  | |

Comment on [attachment 700809](/attachment.cgi?id=700809 "patch 2: make these errors not be exploitable") [[details]](/attachment.cgi?id=700809&action=edit "patch 2: make these errors not be exploitable") [[diff]](/attachment.cgi?id=700809&action=diff "patch 2: make these errors not be exploitable") [[review]](/page.cgi?id=splinter.html&ignore=&bug=827687&attachment=700809)
patch 2: make these errors not be exploitable
r=me
[Attachment #700809](/attachment.cgi?id=700809&action=edit "patch 2: make these errors not be exploitable") -
Flags: review?(bzbarsky) → review+

|  | [David Baron :dbaron: (⌚️UTC-4, no longer working on Mozilla)](/user_profile?user_id=3881)  Assignee |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=827687#c14)• 12 years ago |
|  | |

(In reply to David Baron [:dbaron] from [comment #9](/show_bug.cgi?id=827687#c9 "RESOLVED FIXED - Out of bounds read [@ ElementAnimations::EnsureStyleRuleFor] with CSS animation"))
> It's reading past the end of an array and doing floating-point comparisons
> on the memory it finds there. What rating is that?
It actually could do a little more than that, since it could get into the following pieces of code with memory (i.e., the segment variable) from off the end of the array:
ComputedTimingFunction::GetValue, via this code:
double valuePosition =
segment->mTimingFunction.GetValue(positionInSegment);
nsStyleAnimation::AddWeighted, via this code:
nsStyleAnimation::Interpolate(prop.mProperty,
segment->mFromValue, segment->mToValue,
valuePosition, \*val);
I don't see anything in either of these functions that's going to write to any of these bad pointers or going to call virtual functions through them, but the latter is a pretty big pile of code to audit to prove that it doesn't do anything bad.
So I haven't proven that this isn't sec-critical, although I'm also far from showing that it is. (I'm not sure it's worth trying either.)

|  | [David Baron :dbaron: (⌚️UTC-4, no longer working on Mozilla)](/user_profile?user_id=3881)  Assignee |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=827687#c15)• 12 years ago |
|  | |

Comment on [attachment 699009](/attachment.cgi?id=699009 "patch") [[details]](/attachment.cgi?id=699009&action=edit "patch") [[diff]](/attachment.cgi?id=699009&action=diff "patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=827687&attachment=699009)
patch
[Security approval request comment]
How easily could an exploit be constructed based on the patch?
I'm not sure. Given the pair of patches, it's relatively easy to tell what the problem is; probaly not that hard from either one alone.
Do comments in the patch, the check-in comment, or tests included in the patch paint a bulls-eye on the security problem?
No more than they have to.
Which older supported branches are affected by this flaw?
All supported ones.
If not all supported branches, which bug introduced the flaw?
N/A
Do you have backports for the affected branches? If not, how different, hard to create, and risky will they be?
Easy to create, and low risk.
How likely is this patch to cause regressions; how much testing does it need?
pretty low risk (patch 2 is even lower risk)
[Attachment #699009](/attachment.cgi?id=699009&action=edit "patch") -
Flags: sec-approval?

|  | [David Baron :dbaron: (⌚️UTC-4, no longer working on Mozilla)](/user_profile?user_id=3881)  Assignee |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=827687#c16)• 12 years ago |
|  | |

Comment on [attachment 700809](/attachment.cgi?id=700809 "patch 2: make these errors not be exploitable") [[details]](/attachment.cgi?id=700809&action=edit "patch 2: make these errors not be exploitable") [[diff]](/attachment.cgi?id=700809&action=diff "patch 2: make these errors not be exploitable") [[review]](/page.cgi?id=splinter.html&ignore=&bug=827687&attachment=700809)
patch 2: make these errors not be exploitable
[Security approval request comment]
same as previous comment, with the note that this patch is probably even lower risk
[Attachment #700809](/attachment.cgi?id=700809&action=edit "patch 2: make these errors not be exploitable") -
Flags: sec-approval?

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=827687#c17)• 12 years ago |
|  | |

I'd say call it sec-moderate. "doesn't look sec-critical, but tricky enough we can't say for sure it isn't"

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=827687#a258059_1689)• 12 years ago |

Keywords: [sec-moderate](/buglist.cgi?keywords=sec-moderate&resolution=---)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=827687#a258139_1689)• 12 years ago |

[status-b2g18](/buglist.cgi?f1=cf_status_b2g18&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=affected)
[status-firefox-esr10](/buglist.cgi?f1=cf_status_esr10&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_esr10&o1=equals&v1=wontfix)
[status-firefox19](/buglist.cgi?f1=cf_status_firefox19&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=affected)
[status-firefox20](/buglist.cgi?f1=cf_status_firefox20&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox20&o1=equals&v1=affected)
[status-firefox21](/buglist.cgi?f1=cf_status_firefox21&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox21&o1=equals&v1=affected)
[status-firefox-esr17](/buglist.cgi?f1=cf_status_firefox_esr17&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=affected)
[tracking-firefox21](/buglist.cgi?f1=cf_tracking_firefox21&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox21&o1=equals&v1=%2B)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=827687#a258204_1689)• 12 years ago |

Summary: Heap buffer overflow [@ ElementAnimations::EnsureStyleRuleFor] with CSS animation → Out of bounds read [@ ElementAnimations::EnsureStyleRuleFor] with CSS animation

|  | [David Baron :dbaron: (⌚️UTC-4, no longer working on Mozilla)](/user_profile?user_id=3881)  Assignee |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=827687#c18)• 12 years ago |
|  | |

Comment on [attachment 699009](/attachment.cgi?id=699009 "patch") [[details]](/attachment.cgi?id=699009&action=edit "patch") [[diff]](/attachment.cgi?id=699009&action=diff "patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=827687&attachment=699009)
patch
ok, I'll pull these requests given that sec-approval? is for sec-high and sec-critical
[Attachment #699009](/attachment.cgi?id=699009&action=edit "patch") -
Flags: sec-approval?

|  | [David Baron :dbaron: (⌚️UTC-4, no longer working on Mozilla)](/user_profile?user_id=3881)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=827687#a262442_3881)• 12 years ago |

[Attachment #700809](/attachment.cgi?id=700809&action=edit "patch 2: make these errors not be exploitable") -
Flags: sec-approval?

|  | [David Baron :dbaron: (⌚️UTC-4, no longer working on Mozilla)](/user_profile?user_id=3881)  Assignee |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=827687#c19)• 12 years ago |
|  | |

remote: <https://hg.mozilla.org/integration/mozilla-inbound/rev/52e73ebc07e4>
remote: <https://hg.mozilla.org/integration/mozilla-inbound/rev/d53d71d1c92e>

|  | [Ed Morley [:emorley]](/user_profile?user_id=373476) |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=827687#c20)• 12 years ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/52e73ebc07e4>
<https://hg.mozilla.org/mozilla-central/rev/d53d71d1c92e>Assignee: nobody → dbaronStatus: NEW → RESOLVEDClosed: 12 years ago
[status-firefox21](/buglist.cgi?f1=cf_status_firefox21&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox21&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox21&o1=equals&v1=fixed)Resolution: --- → FIXEDTarget Milestone: --- → mozilla21

|  | [David Baron :dbaron: (⌚️UTC-4, no longer working on Mozilla)](/user_profile?user_id=3881)  Assignee |  |
| --- | --- | --- |
| [Comment 21](/show_bug.cgi?id=827687#c21)• 12 years ago |
|  | |

Comment on [attachment 699009](/attachment.cgi?id=699009 "patch") [[details]](/attachment.cgi?id=699009&action=edit "patch") [[diff]](/attachment.cgi?id=699009&action=diff "patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=827687&attachment=699009)
patch
[Approval Request Comment]
Bug caused by (feature/regressing bug #): [bug 435442](/show_bug.cgi?id=435442 "RESOLVED FIXED - Implement Webkit's CSS Animation proposal") (implement css3-animations)
User impact if declined: crash, possibly with security implications
Testing completed (on m-c, etc.): on mozilla-central
Risk to taking this patch (and alternatives if risky): low
String or UUID changes made by this patch: none
[Attachment #699009](/attachment.cgi?id=699009&action=edit "patch") -
Flags: approval-mozilla-beta?
[Attachment #699009](/attachment.cgi?id=699009&action=edit "patch") -
Flags: approval-mozilla-aurora?

|  | [David Baron :dbaron: (⌚️UTC-4, no longer working on Mozilla)](/user_profile?user_id=3881)  Assignee |  |
| --- | --- | --- |
| [Comment 22](/show_bug.cgi?id=827687#c22)• 12 years ago |
|  | |

Comment on [attachment 700809](/attachment.cgi?id=700809 "patch 2: make these errors not be exploitable") [[details]](/attachment.cgi?id=700809&action=edit "patch 2: make these errors not be exploitable") [[diff]](/attachment.cgi?id=700809&action=diff "patch 2: make these errors not be exploitable") [[review]](/page.cgi?id=splinter.html&ignore=&bug=827687&attachment=700809)
patch 2: make these errors not be exploitable
[Approval Request Comment]
same as previous patch
[Attachment #700809](/attachment.cgi?id=700809&action=edit "patch 2: make these errors not be exploitable") -
Flags: approval-mozilla-beta?
[Attachment #700809](/attachment.cgi?id=700809&action=edit "patch 2: make these errors not be exploitable") -
Flags: approval-mozilla-aurora?

|  | [Alex Keybl [:akeybl]](/user_profile?user_id=425645) |  |
| --- | --- | --- |
| [Comment 23](/show_bug.cgi?id=827687#c23)• 12 years ago |
|  | |

Comment on [attachment 699009](/attachment.cgi?id=699009 "patch") [[details]](/attachment.cgi?id=699009&action=edit "patch") [[diff]](/attachment.cgi?id=699009&action=diff "patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=827687&attachment=699009)
patch
Given where we are in the cycle, let's land this low risk sg:moderate fix on pre-release branches.
[Attachment #699009](/attachment.cgi?id=699009&action=edit "patch") -
Flags: approval-mozilla-beta?
[Attachment #699009](/attachment.cgi?id=699009&action=edit "patch") -
Flags: approval-mozilla-beta+
[Attachment #699009](/attachment.cgi?id=699009&action=edit "patch") -
Flags: approval-mozilla-aurora?
[Attachment #699009](/attachment.cgi?id=699009&action=edit "patch") -
Flags: approval-mozilla-aurora+

|  | [Alex Keybl [:akeybl]](/user_profile?user_id=425645) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=827687#a492122_425645)• 12 years ago |

[Attachment #700809](/attachment.cgi?id=700809&action=edit "patch 2: make these errors not be exploitable") -
Flags: approval-mozilla-beta?
[Attachment #700809](/attachment.cgi?id=700809&action=edit "patch 2: make these errors not be exploitable") -
Flags: approval-mozilla-beta+
[Attachment #700809](/attachment.cgi?id=700809&action=edit "patch 2: make these errors not be exploitable") -
Flags: approval-mozilla-aurora?
[Attachment #700809](/attachment.cgi?id=700809&action=edit "patch 2: make these errors not be exploitable") -
Flags: approval-mozilla-aurora+

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 24](/show_bug.cgi?id=827687#c24)• 12 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-aurora/rev/3f9cc5d8098b>
<https://hg.mozilla.org/releases/mozilla-aurora/rev/ea3782d77355>
<https://hg.mozilla.org/releases/mozilla-beta/rev/328090eddb58>
<https://hg.mozilla.org/releases/mozilla-beta/rev/27549a1311a8>
[status-firefox18](/buglist.cgi?f1=cf_status_firefox18&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=affected)
[status-firefox19](/buglist.cgi?f1=cf_status_firefox19&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=fixed)
[status-firefox20](/buglist.cgi?f1=cf_status_firefox20&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox20&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox20&o1=equals&v1=fixed)

|  | [David Baron :dbaron: (⌚️UTC-4, no longer working on Mozilla)](/user_profile?user_id=3881)  Assignee |  |
| --- | --- | --- |
| [Comment 25](/show_bug.cgi?id=827687#c25)• 12 years ago |
|  | |

oh, thanks for landing.

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=827687#a1455975_1689)• 12 years ago |

[status-b2g18](/buglist.cgi?f1=cf_status_b2g18&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=wontfix)
[status-firefox18](/buglist.cgi?f1=cf_status_firefox18&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=wontfix)
[status-firefox-esr17](/buglist.cgi?f1=cf_status_firefox_esr17&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=wontfix)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=827687#a3249765_280903)• 12 years ago |

Whiteboard: [asan] → [asan][adv-main19+]

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=827687#a58836386_1689)• 10 years ago |

Group: core-security
You need to [log in](/show_bug.cgi?id=827687&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Jesse Ruderman](/user_profile?user_id=11608)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from bugzilla.mozilla.org_ed5839a9_20250124_202806.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/809295)
* [XML](/show_bug.cgi?ctype=xml&id=809295)

Closed
[Bug 809295](/show_bug.cgi?id=809295)

Opened 12 years ago
Closed 12 years ago

# Do a better job handling failure in JSCompartment::wrap

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

Do a better job handling failure in JSCompartment::wrap

## Categories

### (Core :: JavaScript Engine, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=JavaScript%20Engine#JavaScript%20Engine)

JavaScript Engine
▾

Core :: JavaScript Engine
The interpreter engine for the core JavaScript language, independent of the browser's object model. File ONLY core JavaScript language bugs in this category. For bugs involving browser objects such as "window" and "document", use the "DOM" component. For bugs involving calls between JavaScript and C++, use the "XPConnect" component.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=JavaScript%20Engine)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

unspecified

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

All

All

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

normal

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla19

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Accessibility Severity | --- |
| --- | --- |
| a11y-review | --- |
| Webcompat Score | --- |
| Performance Impact | --- |
| Webcompat Priority | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox18 | --- | [affected](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=affected) |
| firefox19 | --- | [fixed](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=fixed) |
| firefox-esr10 | --- | [unaffected](/buglist.cgi?f1=cf_status_esr10&o1=equals&v1=unaffected) |
| firefox-esr17 | --- | [unaffected](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=unaffected) |
| b2g18 | --- | [wontfix](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=wontfix) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox18 |  | affected |
| firefox19 |  | fixed |
| firefox-esr10 |  | unaffected |
| firefox-esr17 |  | unaffected |
| b2g18 |  | wontfix |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: billm, Assigned: billm)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/81db2831554209472ec9b0d5485ca1c9?d=mm&size=40)  [billm](/user_profile?user_id=389993)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

![](https://secure.gravatar.com/avatar/55857f92ded07119259dc6c1dd386205?d=mm&size=40)  [general](/user_profile?user_id=4729)

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/81db2831554209472ec9b0d5485ca1c9?d=mm&size=40)  [billm](/user_profile?user_id=389993)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/4fe52ee1503aecf7b6c976b8eb7c1753?d=mm&size=40)  [willyelm](/user_profile?user_id=714609)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

6 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[803376](/show_bug.cgi?id=803376 "RESOLVED FIXED - Stop doing TRANSPLANT GCs")

Dependency [tree](/showdependencytree.cgi?id=809295&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=809295)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Keywords: sec-audit, Whiteboard: [adv-main19+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[sec-audit](/buglist.cgi?keywords=sec-audit&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[adv-main19+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [RyanVM](/user_profile?user_id=75935) | [in-testsuite](#c4 "12 years ago") | ? |
| --- | --- | --- |
| [RyanVM](/user_profile?user_id=75935) | in-testsuite | ? |
| --- | --- | --- |
|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (1 file)

| [patch](/attachment.cgi?id=679003)  [12 years ago](#c0)  [Bill McCloskey [inactive unless it's an emergency] (:billm)](/user_profile?user_id=389993)   6.79 KB, patch | luke : [review+](#c2 "12 years ago") | [Details](/attachment.cgi?id=679003&action=edit) | [Diff](/attachment.cgi?id=679003&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=809295&attachment=679003) |
| --- | --- | --- |

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Bill McCloskey [inactive unless it's an emergency] (:billm)](/user_profile?user_id=389993)  Assignee |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=809295#c0)• 12 years ago |
|  | |

Attached patch

[patch](attachment.cgi?id=679003&action=diff)
— [Details](attachment.cgi?id=679003&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=809295&attachment=679003)

Since [bug 793904](/show_bug.cgi?id=793904 "RESOLVED FIXED - Intentionally crash if JS_TransplantObject fails"), we're supposed to crash intentionally if a brain transplant fails. However, I realized that I missed a few cases where a brain transplant happens, so this patch adds some more MOZ\_CRASH calls.
However, these extra calls make us crash during a JS reftest that uses up lots of stack and causes the recursion check in JSCompartment::wrap to fail. I considered taking out the recursion check, but it still seems useful given that PreCreate hooks could conceivably cause recursive wrap() calls. So instead I just gave the wrap() call a little extra C stack to work with than the rest of the engine gets. I think this makes sense, given how important it is that brain transplants succeed.
Note that C stack limit we use is a made-up number that's conservative, so we should have some leeway to exceed it as long as we don't go too far.
[Attachment #679003](/attachment.cgi?id=679003&action=edit "patch") -
Flags: review?(luke)

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=809295#c1)• 12 years ago |
|  | |

I'm going to mark this as sec-other, as [bug 793904](/show_bug.cgi?id=793904 "RESOLVED FIXED - Intentionally crash if JS_TransplantObject fails") wasn't a security bug. Feel free to mark it high or crit if you want this to be tracked more by CritSmash.Keywords: [sec-other](/buglist.cgi?keywords=sec-other&resolution=---)

|  | [Luke Wagner [:luke]](/user_profile?user_id=347312) |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=809295#c2)• 12 years ago |
|  | |

Comment on [attachment 679003](/attachment.cgi?id=679003 "patch") [[details]](/attachment.cgi?id=679003&action=edit "patch") [[diff]](/attachment.cgi?id=679003&action=diff "patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=809295&attachment=679003)
patch
Makes sense; nice compromise.
[Attachment #679003](/attachment.cgi?id=679003&action=edit "patch") -
Flags: review?(luke) → review+

|  | [Bill McCloskey [inactive unless it's an emergency] (:billm)](/user_profile?user_id=389993)  Assignee |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=809295#c3)• 12 years ago |
|  | |

<https://hg.mozilla.org/integration/mozilla-inbound/rev/83fe0193339b>

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=809295#c4)• 12 years ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/83fe0193339b>Status: NEW → RESOLVEDClosed: 12 years ago
[status-firefox19](/buglist.cgi?f1=cf_status_firefox19&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=fixed)Flags: in-testsuite?Resolution: --- → FIXEDTarget Milestone: --- → mozilla19

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=809295#a773587_1689)• 12 years ago |

[status-firefox-esr10](/buglist.cgi?f1=cf_status_esr10&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_esr10&o1=equals&v1=unaffected)
[status-firefox-esr17](/buglist.cgi?f1=cf_status_firefox_esr17&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=unaffected)Keywords: [sec-other](/buglist.cgi?keywords=sec-other&resolution=---) → [sec-audit](/buglist.cgi?keywords=sec-audit&resolution=---)

|  | [Alex Keybl [:akeybl]](/user_profile?user_id=425645) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=809295#a6645332_425645)• 12 years ago |

[status-b2g18](/buglist.cgi?f1=cf_status_b2g18&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=wontfix)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=809295#a8628341_280903)• 12 years ago |

Whiteboard: [adv-main19+]

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=809295#a8628356_280903)• 12 years ago |

[status-firefox18](/buglist.cgi?f1=cf_status_firefox18&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=affected)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=809295#a64202766_1689)• 10 years ago |

Group: core-security
You need to [log in](/show_bug.cgi?id=809295&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Bill McCloskey [inactive unless it's an emergency] (:billm)](/user_profile?user_id=389993)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from launchpad.net_4e2c79f1_20250126_032106.html ===

[Log in / Register](https://bugs.launchpad.net/ubuntu/%2Bsource/firefox/%2Bbug/1128883/%2Blogin)

[![](https://launchpadlibrarian.net/606381979/CoF%2064px.png)](https://launchpad.net/ubuntu)

## [Ubuntu](https://launchpad.net/ubuntu)[firefox package](https://launchpad.net/ubuntu/%2Bsource/firefox)

* [Overview](https://launchpad.net/ubuntu/%2Bsource/firefox)
* [Code](https://code.launchpad.net/ubuntu/%2Bsource/firefox)
* [Bugs](https://bugs.launchpad.net/ubuntu/%2Bsource/firefox)
* Blueprints
* [Translations](https://translations.launchpad.net/ubuntu/%2Bsource/firefox)
* [Answers](https://answers.launchpad.net/ubuntu/%2Bsource/firefox)

# Update to 19.0

Bug #1128883 reported by
[Chris Coulson](https://launchpad.net/~chrisccoulson)
on 2013-02-18

[6](/%2Bhelp-bugs/bug-heat.html)

This bug affects 1 person

| Affects | | Status | Importance | Assigned to | Milestone |
| --- | --- | --- | --- | --- | --- |
|  | [firefox (Ubuntu)](https://bugs.launchpad.net/ubuntu/%2Bsource/firefox "Latest release: 1:1snap1-0ubuntu7, uploaded to main on 2025-01-17 12:50:10.962487+00:00 by Nathan Teodosio (nteodosio), maintained by Ubuntu-Mozilla-Team (ubuntu-mozillateam)") | Fix Released | Undecided | Unassigned |  |

### Bug Description

...

## Related branches

[lp:~mozillateam/firefox/firefox.precise](https://code.launchpad.net/~mozillateam/firefox/firefox.precise)

[lp:~mozillateam/firefox/firefox.quantal](https://code.launchpad.net/~mozillateam/firefox/firefox.quantal)

[lp:~mozillateam/firefox/firefox.oneiric](https://code.launchpad.net/~mozillateam/firefox/firefox.oneiric)

[lp:~mozillateam/firefox/firefox.lucid](https://code.launchpad.net/~mozillateam/firefox/firefox.lucid)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Launchpad Janitor (janitor)](https://launchpad.net/~janitor) wrote on 2013-02-20: |  |  | [#1](/ubuntu/%2Bsource/firefox/%2Bbug/1128883/comments/1) |
| --- | --- | --- | --- |

This bug was fixed in the package firefox - 19.0+build1-0ubuntu0.12.04.1

---------------

firefox (19.0+build1-0ubuntu0.12.04.1) precise-security; urgency=low

\* New upstream stable release (FIREFOX\_19\_0\_BUILD1)

    - see LP: [#1128883](/bugs/1128883) for USN information

    - Fix LP: [#1096286](/bugs/1096286) - 404 error when using Chambers (UK) search.

      Temporarily remove the plugin

\* Update globalmenu-extension to 3.7.1

    - Update for imagelib changes in Firefox 19 and 20

    - Update for nsCAutoString removal in Firefox 19

    - Don't #include mozilla/dom/Element.h anywhere, as that now pulls

      in a lot of internal headers since Firefox 19

  \* Fix LP: [#1064423](/bugs/1064423) - "Submitting your report..." shows missing-icon icon.

    Install the throbber icon in the package

    - update debian/firefox.install.in

  \* Refresh patches

    - update debian/patches/allow-lockPref-everywhere.patch

    - update debian/patches/ionmonkey-hardfp-support.patch

    - update debian/patches/fix-broken-langpack-install-manifests.patch

  \* Switch to encrypted search for Google

    - update debian/searchplugins/en-GB/google.xml

    - update debian/searchplugins/en-US/google.xml

    - update debian/searchplugins/en-ZA/google.xml

    - update debian/searchplugins/ja/google-jp.xml

    - update debian/searchplugins/ku/google-ku.xml

 -- Chris Coulson <email address hidden> Fri, 15 Feb 2013 22:24:53 +0000

This bug was fixed in the package firefox - 19.0+build1-0ubuntu0.12.04.1
---------------
firefox (19.0+build1-0ubuntu0.12.04.1) precise-security; urgency=low
\* New upstream stable release (FIREFOX\_19\_0\_BUILD1)
- see LP: #1128883 for USN information
- Fix LP: #1096286 - 404 error when using Chambers (UK) search.
Temporarily remove the plugin
\* Update globalmenu-extension to 3.7.1
- Update for imagelib changes in Firefox 19 and 20
- Update for nsCAutoString removal in Firefox 19
- Don't #include mozilla/dom/Element.h anywhere, as that now pulls
in a lot of internal headers since Firefox 19
\* Fix LP: #1064423 - "Submitting your report..." shows missing-icon icon.
Install the throbber icon in the package
- update debian/firefox.install.in
\* Refresh patches
- update debian/patches/allow-lockPref-everywhere.patch
- update debian/patches/ionmonkey-hardfp-support.patch
- update debian/patches/fix-broken-langpack-install-manifests.patch
\* Switch to encrypted search for Google
- update debian/searchplugins/en-GB/google.xml
- update debian/searchplugins/en-US/google.xml
- update debian/searchplugins/en-ZA/google.xml
- update debian/searchplugins/ja/google-jp.xml
- update debian/searchplugins/ku/google-ku.xml
-- Chris Coulson <chris.coulson@canonical.com> Fri, 15 Feb 2013 22:24:53 +0000

| Changed in firefox (Ubuntu): | |
| --- | --- |
| **status**: | New → Fix Released |

[See full activity log](https://bugs.launchpad.net/ubuntu/%2Bsource/firefox/%2Bbug/1128883/%2Bactivity)

To post a comment you must [log in](%2Blogin?comments=all).

* [Report a bug](/ubuntu/%2Bsource/firefox/%2Bfilebug)

This report contains
**Public**
information

Everyone can see this information.

You are
[not directly subscribed to this bug's notifications.](/ubuntu/%2Bsource/firefox/%2Bbug/1128883/%2Bsubscribe)

Subscribing...

* [Edit bug mail](https://bugs.launchpad.net/ubuntu/%2Bsource/firefox/%2Bbug/1128883/%2Bsubscriptions "View and change your subscriptions to this bug")

## Other bug subscribers

[Subscribe someone else](https://bugs.launchpad.net/ubuntu/%2Bsource/firefox/%2Bbug/1128883/%2Baddsubscriber "Launchpad will email that person whenever this bugs changes")

## Remote bug watches

Bug watches keep track of this bug in other bug trackers.

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
4d55102
([Get the code!](https://dev.launchpad.net/))



=== Content from bugzilla.mozilla.org_67522d61_20250124_202759.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/797977)
* [XML](/show_bug.cgi?ctype=xml&id=797977)

Closed
[Bug 797977](/show_bug.cgi?id=797977)

Opened 12 years ago
Closed 12 years ago

# IonMonkey: Enable StackIter::fp() assertion.

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

IonMonkey: Enable StackIter::fp() assertion.

## Categories

### (Core :: JavaScript Engine, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=JavaScript%20Engine#JavaScript%20Engine)

JavaScript Engine
▾

Core :: JavaScript Engine
The interpreter engine for the core JavaScript language, independent of the browser's object model. File ONLY core JavaScript language bugs in this category. For bugs involving browser objects such as "window" and "document", use the "DOM" component. For bugs involving calls between JavaScript and C++, use the "XPConnect" component.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=JavaScript%20Engine)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

x86\_64

Linux

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

major

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla19

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Performance Impact | --- |
| --- | --- |
| Webcompat Priority | --- |
| Accessibility Severity | --- |
| Webcompat Score | --- |
| a11y-review | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox15 | --- | [unaffected](/buglist.cgi?f1=cf_status_firefox15&o1=equals&v1=unaffected) |
| firefox16 | --- | [unaffected](/buglist.cgi?f1=cf_status_firefox16&o1=equals&v1=unaffected) |
| firefox17 | --- | [unaffected](/buglist.cgi?f1=cf_status_firefox17&o1=equals&v1=unaffected) |
| firefox18 | --- | [affected](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=affected) |
| firefox19 | --- | [fixed](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=fixed) |
| firefox-esr10 | --- | [unaffected](/buglist.cgi?f1=cf_status_esr10&o1=equals&v1=unaffected) |
| firefox-esr17 | --- | [unaffected](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=unaffected) |
| b2g18 | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=unaffected) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox15 |  | unaffected |
| firefox16 |  | unaffected |
| firefox17 |  | unaffected |
| firefox18 |  | affected |
| firefox19 |  | fixed |
| firefox-esr10 |  | unaffected |
| firefox-esr17 |  | unaffected |
| b2g18 |  | unaffected |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: nbp, Assigned: nbp)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/f78625fe5901300b4689355a8e507ea2?d=mm&size=40)  [nbp](/user_profile?user_id=422187)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/f78625fe5901300b4689355a8e507ea2?d=mm&size=40)  [nbp](/user_profile?user_id=422187)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/4fe52ee1503aecf7b6c976b8eb7c1753?d=mm&size=40)  [willyelm](/user_profile?user_id=714609)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

7 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

---

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[Duplicates:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#duplicates)

[798792](/show_bug.cgi?id=798792 "RESOLVED DUPLICATE - Assertion failure: !fp->beginsIonActivation(), at vm/ArgumentsObject.cpp:39")

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Keywords: assertion, Whiteboard: [ion:p1][adv-main19+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[assertion](/buglist.cgi?keywords=assertion&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[ion:p1][adv-main19+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | in-testsuite |  |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (1 file, 3 obsolete files)

| [Embed !isIon() assertion in StackIter::fp().](/attachment.cgi?id=668275)  [12 years ago](#c1)  [Nicolas B. Pierron [:nbp]](/user_profile?user_id=422187)   3.02 KB, patch | luke : [review+](#c2 "12 years ago") | [Details](/attachment.cgi?id=668275&action=edit) | [Diff](/attachment.cgi?id=668275&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=797977&attachment=668275) |
| --- | --- | --- |
| [Rename StackIter::fp() to StackIter::interpFrame().](/attachment.cgi?id=668731)  [12 years ago](#c5)  [Nicolas B. Pierron [:nbp]](/user_profile?user_id=422187)   30.99 KB, patch | luke : [review+](#c6 "12 years ago") | [Details](/attachment.cgi?id=668731&action=edit) | [Diff](/attachment.cgi?id=668731&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=797977&attachment=668731) |
| [Rename StackIter::fp() to StackIter::interpFrame().](/attachment.cgi?id=669352)  [12 years ago](#c7)  [Nicolas B. Pierron [:nbp]](/user_profile?user_id=422187)   32.62 KB, patch | luke : [review+](#c8 "12 years ago") | [Details](/attachment.cgi?id=669352&action=edit) | [Diff](/attachment.cgi?id=669352&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=797977&attachment=669352) |
| [Rename StackIter::fp() to StackIter::interpFrame().](/attachment.cgi?id=669861)  [12 years ago](#c9)  [Nicolas B. Pierron [:nbp]](/user_profile?user_id=422187)   39.22 KB, patch | luke : [review+](#c10 "12 years ago") | [Details](/attachment.cgi?id=669861&action=edit) | [Diff](/attachment.cgi?id=669861&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=797977&attachment=669861) |

Show Obsolete

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Nicolas B. Pierron [:nbp]](/user_profile?user_id=422187)  Assignee |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=797977#c0)• 12 years ago |
|  | |

Currently there is a remaining comment on top of StackIter::fp() asking for adding !isIon() to the assertion, one use case is comming from fun\_getProperty and another is coming from pushExecuteFrame (under DebuggerFrame\_eval).
I am haven't investigated all the risk yet, so I flagging this as s-s in the mean time and flag it for ff18.

|  | [David Anderson [:dvander] - inactive, e-mail if emergency](/user_profile?user_id=309316) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=797977#a202_309316)• 12 years ago |

Whiteboard: [ion:p1:fx18] → [ion:p1]

|  | [Nicolas B. Pierron [:nbp]](/user_profile?user_id=422187)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=797977#a19856_422187)• 12 years ago |

Assignee: general → nicolas.b.pierronStatus: NEW → ASSIGNED

|  | [Nicolas B. Pierron [:nbp]](/user_profile?user_id=422187)  Assignee |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=797977#c1)• 12 years ago |
|  | |

Attached patch

[Embed !isIon() assertion in StackIter::fp().](attachment.cgi?id=668275&action=diff) (obsolete)
— [Details](attachment.cgi?id=668275&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=797977&attachment=668275)

Add extra assertions which should not break, and remove invalid use cases of StackIter::fp().
[Attachment #668275](/attachment.cgi?id=668275&action=edit "Embed !isIon() assertion in StackIter::fp().") -
Flags: review?(luke)

|  | [Luke Wagner [:luke]](/user_profile?user_id=347312) |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=797977#c2)• 12 years ago |
|  | |

Comment on [attachment 668275](/attachment.cgi?id=668275 "Embed !isIon() assertion in StackIter::fp().") [[details]](/attachment.cgi?id=668275&action=edit "Embed !isIon() assertion in StackIter::fp().") [[diff]](/attachment.cgi?id=668275&action=diff "Embed !isIon() assertion in StackIter::fp().") [[review]](/page.cgi?id=splinter.html&ignore=&bug=797977&attachment=668275)
Embed !isIon() assertion in StackIter::fp().
Great!
[Attachment #668275](/attachment.cgi?id=668275&action=edit "Embed !isIon() assertion in StackIter::fp().") -
Flags: review?(luke) → review+

|  | [Nicolas B. Pierron [:nbp]](/user_profile?user_id=422187)  Assignee |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=797977#c3)• 12 years ago |
|  | |

<https://hg.mozilla.org/integration/mozilla-inbound/rev/588135660310>

|  | [Nicolas B. Pierron [:nbp]](/user_profile?user_id=422187)  Assignee |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=797977#c4)• 12 years ago |
|  | |

Backout due to M-2 failure on OS X 10.8 (<https://tbpl.mozilla.org/php/getParsedLog.php?id=15856953&tree=Mozilla-Inbound>)
<https://hg.mozilla.org/integration/mozilla-inbound/rev/e09d7d9b5ed2>

|  | [Nicolas B. Pierron [:nbp]](/user_profile?user_id=422187)  Assignee |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=797977#c5)• 12 years ago |
|  | |

Attached patch

[Rename StackIter::fp() to StackIter::interpFrame().](attachment.cgi?id=668731&action=diff) (obsolete)
— [Details](attachment.cgi?id=668731&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=797977&attachment=668731)

Ok, this is no longer the same size of patch, but this one brings more sanity and gave me the opportunity to review all uses cases.
jsdbgapi is remaining unchanged with one restriction which is that JSStackFrame returned by the JS\_Broken\* function are only non-Ion interpreter frames.
[Attachment #668275](/attachment.cgi?id=668275&action=edit "Embed !isIon() assertion in StackIter::fp().") -
Attachment is obsolete: true
[Attachment #668731](/attachment.cgi?id=668731&action=edit "Rename StackIter::fp() to StackIter::interpFrame().") -
Flags: review?(luke)

|  | [Luke Wagner [:luke]](/user_profile?user_id=347312) |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=797977#c6)• 12 years ago |
|  | |

Comment on [attachment 668731](/attachment.cgi?id=668731 "Rename StackIter::fp() to StackIter::interpFrame().") [[details]](/attachment.cgi?id=668731&action=edit "Rename StackIter::fp() to StackIter::interpFrame().") [[diff]](/attachment.cgi?id=668731&action=diff "Rename StackIter::fp() to StackIter::interpFrame().") [[review]](/page.cgi?id=splinter.html&ignore=&bug=797977&attachment=668731)
Rename StackIter::fp() to StackIter::interpFrame().
Review of [attachment 668731](/attachment.cgi?id=668731 "Rename StackIter::fp() to StackIter::interpFrame().") [[details]](/attachment.cgi?id=668731&action=edit "Rename StackIter::fp() to StackIter::interpFrame().") [[diff]](/attachment.cgi?id=668731&action=diff "Rename StackIter::fp() to StackIter::interpFrame().") [[review]](/page.cgi?id=splinter.html&ignore=&bug=797977&attachment=668731):
-----------------------------------------------------------------
::: js/src/jsapi.cpp
@@ +7312,5 @@
> ScriptFrameIter i(cx);
> if (i.done())
> return cx->global();
> + RootedObject scopeChain(cx, i.scopeChain());
> + return &scopeChain->global();
return &i.scopeChain()->global();
seems fine; global() is a simple loop.
::: js/src/jscntxtinlines.h
@@ -586,5 @@
> }
>
> -/\* Get the current frame, first lazily instantiating stack frames if needed. \*/
> -static inline js::StackFrame \*
> -js\_GetTopStackFrame(JSContext \*cx, FrameExpandKind expand)
Happy to see this old wart go.
::: js/src/jscompartment.cpp
@@ +672,5 @@
>
> bool
> JSCompartment::hasScriptsOnStack()
> {
> + for (AllFramesIter f(rt->stackSpace); !f.done(); ++f) {
If you're going to make it longer, how about 'afi'?
@@ +678,5 @@
> + // If this is an Ion frame, check the IonActivation instead
> + if (f.fp()->beginsIonActivation())
> + continue;
> +#endif
> + if (f.fp()->script()->compartment() == this)
This code makes me think we need to rename AllFramesIter::fp to AllFramesIter::interpFrame and add AllFramesIter::isIon.
::: js/src/jsdbgapi.cpp
@@ +482,5 @@
> + js::mjit::ExpandInlineFrames(cx->compartment);
> +#endif
> + fp = cx->maybefp();
> + } else
> + fp = fp->prev();
{ } since the then-branch has 'em.
::: js/src/jsobj.cpp
@@ +4449,5 @@
> JS\_FRIEND\_API(bool)
> js::CheckUndeclaredVarAssignment(JSContext \*cx, JSString \*propname)
> {
> + JSScript \*script = cx->stack.currentScript();
> + if (!script)
I think you want currentScript(NULL, ALLOW\_CROSS\_COMPARTMENT).
::: js/src/shell/js.cpp
@@ +1383,5 @@
> JS\_ASSERT(!iter.done());
>
> + // interpFrame might assert that we are not using an IonMonkey
> + // fake-interpreter frame. This would not be fix unless we want to support
> + // IonMonkey frames in JS\_EvaluateUCInStackFrame.
This comment is confusing. How about "Debug-mode currently disables Ion compilation."
@@ +2508,5 @@
> JS\_ASSERT(cx->hasfp());
>
> + // interpFrame might assert that we are not using an IonMonkey
> + // fake-interpreter frame. This would not be fix unless we want to support
> + // IonMonkey frames in JS\_EvaluateUCInStackFrame.
ditto
::: js/src/vm/Stack.cpp
@@ +1055,5 @@
> if (evalInFrame) {
> /\* Though the prev-frame is given, need to search for prev-call. \*/
> StackSegment &seg = cx->stack.space().containingSegment(evalInFrame);
> StackIter iter(cx->runtime, seg);
> + JS\_ASSERT(!evalInFrame->beginsIonActivation());
Can you comment here "Debug-mode currently disables Ion compilation". Then you should be able to take out the "|| iter.isIon". That way we'll hit the assert eagerly if we ever add debug-mode instead and fix it correctly.
::: js/src/vm/Stack.h
@@ +1774,5 @@
> + // the interpreter and by JagerMonkey. IonMonkey does not maintain this
> + // interpreter frame but use one to indicate the presence of an activation
> + // of IonMonkey code on the C stack. Such fake interpreter frame contains
> + // mostly garbage, and so access to such frame is limited.
> + StackFrame \*interpFrame() const { JS\_ASSERT(isScript() && !isIon()); return fp\_; }
How about replacing the last two sentences with:
"When entering IonMonkey, the top interpreter frame (pushed by the caller) is kept on the stack as bookkeeping (with beginsIonActivation() set). The contents of the frame are ignored by Ion code (and GC) and thus immediately become garbage and must not be touched directly."
[Attachment #668731](/attachment.cgi?id=668731&action=edit "Rename StackIter::fp() to StackIter::interpFrame().") -
Flags: review?(luke) → review+

|  | [Nicolas B. Pierron [:nbp]](/user_profile?user_id=422187)  Assignee |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=797977#c7)• 12 years ago |
|  | |

Attached patch

[Rename StackIter::fp() to StackIter::interpFrame().](attachment.cgi?id=669352&action=diff) (obsolete)
— [Details](attachment.cgi?id=669352&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=797977&attachment=669352)

Compared to the previous version:
- Apply nits.
- Fix StackIter::\* for the native case (use fp\_ instead of interpFrame())
- Fix assertions (beginsIonActivation -> runningInIon), see [Bug 798792 comment 4](/show_bug.cgi?id=798792#c4 "RESOLVED DUPLICATE - Assertion failure: !fp->beginsIonActivation(), at vm/ArgumentsObject.cpp:39"). And fixing [Bug 798792](/show_bug.cgi?id=798792 "RESOLVED DUPLICATE - Assertion failure: !fp->beginsIonActivation(), at vm/ArgumentsObject.cpp:39") issue too.
- Add StackIter::compartment for checking that all debugged frames are not Ion frames.
[Attachment #668731](/attachment.cgi?id=668731&action=edit "Rename StackIter::fp() to StackIter::interpFrame().") -
Attachment is obsolete: true
[Attachment #669352](/attachment.cgi?id=669352&action=edit "Rename StackIter::fp() to StackIter::interpFrame().") -
Flags: review?(luke)

|  | [Luke Wagner [:luke]](/user_profile?user_id=347312) |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=797977#c8)• 12 years ago |
|  | |

Comment on [attachment 669352](/attachment.cgi?id=669352 "Rename StackIter::fp() to StackIter::interpFrame().") [[details]](/attachment.cgi?id=669352&action=edit "Rename StackIter::fp() to StackIter::interpFrame().") [[diff]](/attachment.cgi?id=669352&action=diff "Rename StackIter::fp() to StackIter::interpFrame().") [[review]](/page.cgi?id=splinter.html&ignore=&bug=797977&attachment=669352)
Rename StackIter::fp() to StackIter::interpFrame().
Review of [attachment 669352](/attachment.cgi?id=669352 "Rename StackIter::fp() to StackIter::interpFrame().") [[details]](/attachment.cgi?id=669352&action=edit "Rename StackIter::fp() to StackIter::interpFrame().") [[diff]](/attachment.cgi?id=669352&action=diff "Rename StackIter::fp() to StackIter::interpFrame().") [[review]](/page.cgi?id=splinter.html&ignore=&bug=797977&attachment=669352):
-----------------------------------------------------------------
::: js/src/jscompartment.cpp
@@ +676,5 @@
> + for (AllFramesIter afi(rt->stackSpace); !afi.done(); ++afi) {
> +#ifdef JS\_ION
> + // If this is an Ion frame, check the IonActivation instead
> + if (afi.fp()->runningInIon())
> + continue;
Again, could you rename AllFramesIter::fp to interpFrame and add a AllFramesIter::inIon() that can be used for this branch?
::: js/src/vm/Stack.cpp
@@ +1530,5 @@
> + break;
> +#endif
> + case SCRIPTED:
> + case NATIVE:
> + return fp\_->compartment();
NATIVE shouldn't use fp\_ (there might not be one or it might be in a different compartment). Use calls\_->callee().compartment() for the NATIVE case instead.
[Attachment #669352](/attachment.cgi?id=669352&action=edit "Rename StackIter::fp() to StackIter::interpFrame().") -
Flags: review?(luke) → review+

|  | [Nicolas B. Pierron [:nbp]](/user_profile?user_id=422187)  Assignee |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=797977#c9)• 12 years ago |
|  | |

Attached patch

[Rename StackIter::fp() to StackIter::interpFrame().](attachment.cgi?id=669861&action=diff)
— [Details](attachment.cgi?id=669861&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=797977&attachment=669861)

Delta:
- Fix StackIter Native's compartment.
- Rename AllFrameIter::fp() to AllFrameITer::interpFrame().
- Filter out Ion frames from AllFrameIter iterations, because they are either used for debug or handled in other path (such as jscompartment.cpp & jsscript.cpp)
\o/ No more un-garded usage of “StackFrame \*” which is an Ion activation frame.
Thanks for the renaming suggestion.
[Attachment #669352](/attachment.cgi?id=669352&action=edit "Rename StackIter::fp() to StackIter::interpFrame().") -
Attachment is obsolete: true
[Attachment #669861](/attachment.cgi?id=669861&action=edit "Rename StackIter::fp() to StackIter::interpFrame().") -
Flags: review?(luke)

|  | [Luke Wagner [:luke]](/user_profile?user_id=347312) |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=797977#c10)• 12 years ago |
|  | |

Comment on [attachment 669861](/attachment.cgi?id=669861 "Rename StackIter::fp() to StackIter::interpFrame().") [[details]](/attachment.cgi?id=669861&action=edit "Rename StackIter::fp() to StackIter::interpFrame().") [[diff]](/attachment.cgi?id=669861&action=diff "Rename StackIter::fp() to StackIter::interpFrame().") [[review]](/page.cgi?id=splinter.html&ignore=&bug=797977&attachment=669861)
Rename StackIter::fp() to StackIter::interpFrame().
Review of [attachment 669861](/attachment.cgi?id=669861 "Rename StackIter::fp() to StackIter::interpFrame().") [[details]](/attachment.cgi?id=669861&action=edit "Rename StackIter::fp() to StackIter::interpFrame().") [[diff]](/attachment.cgi?id=669861&action=diff "Rename StackIter::fp() to StackIter::interpFrame().") [[review]](/page.cgi?id=splinter.html&ignore=&bug=797977&attachment=669861):
-----------------------------------------------------------------
Nice job wading through all this and fixing the next 5 fuzz bugs :)
::: js/src/ion/IonFrameIterator.h
@@ +301,5 @@
> return si\_;
> }
> bool isFunctionFrame() const;
> bool isConstructing() const;
> + JSObject \*scopeChainObject() const;
scopeChain() would be shorter and more consistent.
::: js/src/jsscript.cpp
@@ +2572,5 @@
> \* - type inference data for the script assuming script->needsArgsObj; and
> \*/
> for (AllFramesIter i(cx->stack.space()); !i.done(); ++i) {
> + if (i.isIon())
> + continue;
How about a comment on this to the effect of:
We cannot reliably create an arguments object for Ion activations of this script. To maintain the invariant that "script->needsArgsObj implies fp->hasArgsObj", the Ion bail mechanism will create an arguments object right after restoring the StackFrame and before entering the interpreter. This delay is safe since the engine avoids any observation of a StackFrame when it beginsIonActivation (see StackIter::interpFrame comment).
::: js/src/vm/Debugger.cpp
@@ +1761,5 @@
> \* cx->fp() would return the topmost frame in the current context.
> \* Since there may be multiple contexts, use AllFramesIter instead.
> \*/
> for (AllFramesIter i(cx->stack.space()); !i.done(); ++i) {
> + /\* Debug-mode currently disables Ion compilation. \*/
By itself, this comment would seem to indicate that we shouldn't find any i.isIon() frames. Perhaps a slight expansion: "Debug-mode currently disables Ion compilation in the compartment of the debuggee." ?
::: js/src/vm/ScopeObject.cpp
@@ +1835,5 @@
> \*/
> for (AllFramesIter i(cx->runtime->stackSpace); !i.done(); ++i) {
> + /\* Debug-mode currently disables Ion compilation. \*/
> + if (i.isIon())
> + continue;
ditto
::: js/src/vm/Stack.cpp
@@ +825,5 @@
> {
> for (AllFramesIter i(\*this); !i.done(); ++i) {
> + /\* Debug-mode currently disables Ion compilation. \*/
> + if (i.isIon())
> + continue;
ditto
::: js/src/vm/Stack.h
@@ -1527,5 @@
> /\* The StackSpace currently hosting this ContextStack. \*/
> StackSpace &space() const { return \*space\_; }
>
> - /\* Return whether the given frame is in this context's stack. \*/
> - bool containsSlow(const StackFrame \*target) const;
nice catch
[Attachment #669861](/attachment.cgi?id=669861&action=edit "Rename StackIter::fp() to StackIter::interpFrame().") -
Flags: review?(luke) → review+

|  | [Nicolas B. Pierron [:nbp]](/user_profile?user_id=422187)  Assignee |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=797977#c11)• 12 years ago |
|  | |

My dev-branch on try, before rebasing and fixing a minor merge issue between 2 of my patches (in js/src/vm/ArgumentsObject.cpp):
<https://tbpl.mozilla.org/?tree=Try&rev=98d875f58193>
<https://hg.mozilla.org/integration/mozilla-inbound/rev/ebeca12019a2>

|  | [Ed Morley [:emorley]](/user_profile?user_id=373476) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=797977#c12)• 12 years ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/ebeca12019a2>Status: ASSIGNED → RESOLVEDClosed: 12 years ago
[status-firefox19](/buglist.cgi?f1=cf_status_firefox19&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=fixed)Resolution: --- → FIXEDTarget Milestone: --- → mozilla19

|  | [Alex Keybl [:akeybl]](/user_profile?user_id=425645) |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=797977#c14)• 12 years ago |
|  | |

What's the rating on this bug? Do we think that B2G is impacted?
[status-firefox-esr17](/buglist.cgi?f1=cf_status_firefox_esr17&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=unaffected)

|  | [Nicolas B. Pierron [:nbp]](/user_profile?user_id=422187)  Assignee |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=797977#c15)• 12 years ago |
|  | |

(In reply to Alex Keybl [:akeybl] from [comment #14](/show_bug.cgi?id=797977#c14 "RESOLVED FIXED - IonMonkey: Enable StackIter::fp() assertion."))
> What's the rating on this bug? Do we think that B2G is impacted?
This patch should hopefully not change any behavior. So I don't think is is needed for B2G.

|  | [David Anderson [:dvander] - inactive, e-mail if emergency](/user_profile?user_id=309316) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=797977#a9601572_309316)• 12 years ago |

[status-b2g18](/buglist.cgi?f1=cf_status_b2g18&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=unaffected)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=797977#a11503711_280903)• 12 years ago |

Whiteboard: [ion:p1] → [ion:p1][adv-main19+]

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=797977#a18152574_1689)• 12 years ago |

Group: core-security
You need to [log in](/show_bug.cgi?id=797977&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Nicolas B. Pierron [:nbp]](/user_profile?user_id=422187)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from bugzilla.mozilla.org_8d61b807_20250124_202758.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/790373)
* [XML](/show_bug.cgi?ctype=xml&id=790373)

Closed
[Bug 790373](/show_bug.cgi?id=790373)

Opened 12 years ago
Closed 12 years ago

# plugin scroll position listener callback may destroy listener list (crash of [bug 788436](/show_bug.cgi?id=788436 "RESOLVED FIXED - Firefox 17 crash in nsGfxScrollFrameInner::ScrollToImpl"))

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

plugin scroll position listener callback may destroy listener list (crash of bug 788436)

## Categories

### (Core Graveyard :: Plug-ins, defect)

[Product:](/describecomponents.cgi?product=Core%20Graveyard)

Core Graveyard
▾

Core Graveyard
Old, retired Core components
[See Open Bugs in This Product](/buglist.cgi?product=Core%20Graveyard&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core%20Graveyard)
Watch This Product

[Component:](/describecomponents.cgi?product=Core%20Graveyard&component=Plug-ins#Plug-ins)

Plug-ins
▾

Core Graveyard :: Plug-ins
Bugs in core Mozilla code that supports registering and using plug-ins. For bugs in specific plugins, please file those bugs under External Software Affecting Firefox.
[See Open Bugs in This Component](/buglist.cgi?product=Core%20Graveyard&component=Plug-ins&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core%20Graveyard&component=Plug-ins&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core%20Graveyard&component=Plug-ins)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

All

All

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

normal

## Tracking

### (firefox15 wontfix, firefox16 wontfix, firefox17 wontfix, firefox18 wontfix, firefox19 fixed, firefox-esr10 wontfix, firefox-esr17 wontfix, b2g18 unaffected)

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Performance Impact | --- |
| --- | --- |
| Webcompat Priority | --- |
| a11y-review | --- |
| Webcompat Score | --- |
| Accessibility Severity | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox15 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox15&o1=equals&v1=wontfix) |
| firefox16 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox16&o1=equals&v1=wontfix) |
| firefox17 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox17&o1=equals&v1=wontfix) |
| firefox18 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=wontfix) |
| firefox19 | --- | [fixed](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=fixed) |
| firefox-esr10 | --- | [wontfix](/buglist.cgi?f1=cf_status_esr10&o1=equals&v1=wontfix) |
| firefox-esr17 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=wontfix) |
| b2g18 | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=unaffected) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox15 |  | wontfix |
| firefox16 |  | wontfix |
| firefox17 |  | wontfix |
| firefox18 |  | wontfix |
| firefox19 |  | fixed |
| firefox-esr10 |  | wontfix |
| firefox-esr17 |  | wontfix |
| b2g18 |  | unaffected |

## People

### (Reporter: tnikkel, Assigned: smichaud)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/f4932c37bcceaf71fd2472886282a3cb?d=mm&size=40)  [smichaud](/user_profile?user_id=67806)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/0646a42110a02dd585f200f270716852?d=mm&size=40)  [tnikkel](/user_profile?user_id=255010)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](extensions/Gravatar/web/default.jpg)  [jimm](/user_profile?user_id=279663)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

9 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

[598397](/show_bug.cgi?id=598397 "RESOLVED FIXED - remove support for Carbon NPAPI")

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

---

Dependency [tree](/showdependencytree.cgi?id=790373&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=790373)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Keywords: csectype-wildptr, sec-critical, Whiteboard: to be fixed by bug 598397 [adv-main19+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[csectype-wildptr](/buglist.cgi?keywords=csectype-wildptr&resolution=---),
[sec-critical](/buglist.cgi?keywords=sec-critical&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

to be fixed by bug 598397 [adv-main19+]

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | in-testsuite |  |
|  | qe-verify |  |

## Crash Data

Signature:

[[@ nsGfxScrollFrameInner::ScrollToImpl ]](https://crash-stats.mozilla.org/signature/?signature=nsGfxScrollFrameInner%3A%3AScrollToImpl)

[[@ nsGfxScrollFrameInner::AsyncScrollCallback ]](https://crash-stats.mozilla.org/signature/?signature=nsGfxScrollFrameInner%3A%3AAsyncScrollCallback)

[[@ @0x0 | nsGfxScrollFrameInner::AsyncScrollCallback ]](https://crash-stats.mozilla.org/signature/?signature=%400x0%20%7C%20nsGfxScrollFrameInner%3A%3AAsyncScrollCallback)

[[@ nsGfxScrollFrameInner::ScrollToWithOrigin ]](https://crash-stats.mozilla.org/signature/?signature=nsGfxScrollFrameInner%3A%3AScrollToWithOrigin)

[[@ @0x0 | nsGfxScrollFrameInner::ScrollToWithOrigin ]](https://crash-stats.mozilla.org/signature/?signature=%400x0%20%7C%20nsGfxScrollFrameInner%3A%3AScrollToWithOrigin)

## Security

### (public)

This bug is publicly visible.

## User Story

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Timothy Nikkel (:tnikkel)](/user_profile?user_id=255010)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=790373#c0)• 12 years ago |
|  | |

smaug noticed that the crash in [bug 788436](/show_bug.cgi?id=788436 "RESOLVED FIXED - Firefox 17 crash in nsGfxScrollFrameInner::ScrollToImpl") could be caused because while we are iterating over the list of scroll position listeners in nsGfxScrollFrameInner::ScrollToImpl the nsPluginInstanceOwner::ScrollPositionWillChange call could easily end up in plugin code that could potentially do anything, including change the list of scroll position listeners and cause the crash.
Filing this non-public bug so we can discuss this potential security problem.

|  | [Timothy Nikkel (:tnikkel)](/user_profile?user_id=255010)  Reporter |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=790373#c1)• 12 years ago |
|  | |

This code only exists for Carbon plugins, and we are planning on getting rid of Carbon plugins in [bug 598397](/show_bug.cgi?id=598397 "RESOLVED FIXED - remove support for Carbon NPAPI").

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=790373#c2)• 12 years ago |
|  | |

Since we've seen instances involving both flash and silverlight it seems like the conditions are easy enough to cause should an attacker find this.Crash Signature: [@ nsGfxScrollFrameInner::ScrollToImpl]
[@ nsGfxScrollFrameInner::AsyncScrollCallback]
[@ @0x0 | nsGfxScrollFrameInner::AsyncScrollCallback]
[@ nsGfxScrollFrameInner::ScrollToWithOrigin]
[@ @0x0 | nsGfxScrollFrameInner::ScrollToWithOrigin]Keywords: [csec-wildptr](/buglist.cgi?keywords=csec-wildptr&resolution=---),
[sec-critical](/buglist.cgi?keywords=sec-critical&resolution=---)

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=790373#c3)• 12 years ago |
|  | |

It's very odd that Flash and Silverlight can trigger crashes in code that's only used by Carbon plugins -- neither of them uses the Carbon event model.

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=790373#a175187_1689)• 12 years ago |

Depends on: [598397](/show_bug.cgi?id=598397 "RESOLVED FIXED - remove support for Carbon NPAPI")

|  | [David Bolter [:davidb] (NeedInfo me for attention)](/user_profile?user_id=152868) |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=790373#c4)• 12 years ago |
|  | |

Steven, odd indeed. Josh when are we expecting to be rid of carbon plugins?

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=790373#c5)• 12 years ago |
|  | |

I suspect that getting rid of the nsPluginInstanceOwner::ScrollPositionWillChange code won't help. I suspect we end up there because of memory corruption, and if we got rid of that code we'd just crash somewhere else.
Note that (at [bug 788436 comment #19](/show_bug.cgi?id=788436#c19 "RESOLVED FIXED - Firefox 17 crash in nsGfxScrollFrameInner::ScrollToImpl")) someone crashes in that code scrolling a page without any plugins!
Timothy Nikkel is creating a tryserver build for him with the nsPluginInstanceOwner::ScrollPositionWillChange code removed, just to see what happens. So hopefully we'll know more in the not-too-distant future.

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=790373#c6)• 12 years ago |
|  | |

Another possibility, since the stacks at [bug 788436](/show_bug.cgi?id=788436 "RESOLVED FIXED - Firefox 17 crash in nsGfxScrollFrameInner::ScrollToImpl") are so badly truncated, is that the memory corruption has made all those stacks invalid -- that the crashes aren't happening in nsPluginInstanceOwner::ScrollPositionWillChange at all.

|  | [Steven Michaud [:smichaud] (Retired)](/user_profile?user_id=67806)  Assignee |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=790373#c7)• 12 years ago |
|  | |

(Following up [comment #5](/show_bug.cgi?id=790373#c5 "RESOLVED FIXED - plugin scroll position listener callback may destroy listener list (crash of bug 788436)") and [comment #6](/show_bug.cgi?id=790373#c6 "RESOLVED FIXED - plugin scroll position listener callback may destroy listener list (crash of bug 788436)"))
Both of my hunches were wrong.
[Bug 788436](/show_bug.cgi?id=788436 "RESOLVED FIXED - Firefox 17 crash in nsGfxScrollFrameInner::ScrollToImpl") was much more straightforward, and tnikkel has now fixed it.

|  | [David Bolter [:davidb] (NeedInfo me for attention)](/user_profile?user_id=152868) |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=790373#c8)• 12 years ago |
|  | |

Steven, can you get any traction here?Assignee: nobody → smichaud

|  | [Timothy Nikkel (:tnikkel)](/user_profile?user_id=255010)  Reporter |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=790373#c9)• 12 years ago |
|  | |

We found and fixed the crash of [bug 788436](/show_bug.cgi?id=788436 "RESOLVED FIXED - Firefox 17 crash in nsGfxScrollFrameInner::ScrollToImpl"). I don't think there is anything left that is important to do before we remove this code entirely as part of [bug 598397](/show_bug.cgi?id=598397 "RESOLVED FIXED - remove support for Carbon NPAPI").

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=790373#a782814_406194)• 12 years ago |

Whiteboard: to be fixed by bug 598397

|  | [Timothy Nikkel (:tnikkel)](/user_profile?user_id=255010)  Reporter |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=790373#c10)• 12 years ago |
|  | |

And to be clear of the crash in [bug 788436](/show_bug.cgi?id=788436 "RESOLVED FIXED - Firefox 17 crash in nsGfxScrollFrameInner::ScrollToImpl") was not the potential problem described in [comment 0](/show_bug.cgi?id=790373#c0 "RESOLVED FIXED - plugin scroll position listener callback may destroy listener list (crash of bug 788436)").

|  | [Josh Aas](/user_profile?user_id=18821) |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=790373#c11)• 12 years ago |
|  | |

(In reply to David Bolter [:davidb] from [comment #4](/show_bug.cgi?id=790373#c4 "RESOLVED FIXED - plugin scroll position listener callback may destroy listener list (crash of bug 788436)"))
> Steven, odd indeed. Josh when are we expecting to be rid of carbon plugins?
I am planning to remove support for them near the beginning of the Firefox 19 release cycle.

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=790373#a783807_406194)• 12 years ago |

[status-firefox-esr10](/buglist.cgi?f1=cf_status_esr10&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_esr10&o1=equals&v1=wontfix)
[status-firefox15](/buglist.cgi?f1=cf_status_firefox15&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_firefox15&o1=equals&v1=wontfix)
[status-firefox16](/buglist.cgi?f1=cf_status_firefox16&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_firefox16&o1=equals&v1=wontfix)
[status-firefox17](/buglist.cgi?f1=cf_status_firefox17&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_firefox17&o1=equals&v1=wontfix)
[status-firefox18](/buglist.cgi?f1=cf_status_firefox18&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=wontfix)

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=790373#a3000508_406194)• 12 years ago |

[status-firefox19](/buglist.cgi?f1=cf_status_firefox19&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=fixed)

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=790373#c12)• 12 years ago |
|  | |

Marking as fixed because Carbon plugins have been removed.Status: NEW → RESOLVEDClosed: 12 years agoResolution: --- → FIXED

|  | [Alex Keybl [:akeybl]](/user_profile?user_id=425645) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=790373#a6842980_425645)• 12 years ago |

[status-firefox-esr17](/buglist.cgi?f1=cf_status_firefox_esr17&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=wontfix)

|  | [Alex Keybl [:akeybl]](/user_profile?user_id=425645) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=790373#a11503827_425645)• 12 years ago |

[status-b2g18](/buglist.cgi?f1=cf_status_b2g18&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=unaffected)

|  | [Alex Keybl [:akeybl]](/user_profile?user_id=425645) |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=790373#c13)• 12 years ago |
|  | |

Unaffected for b2g18 because B2G doesn't have plugins \o/

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=790373#a13487569_280903)• 12 years ago |

Whiteboard: to be fixed by bug 598397 → to be fixed by bug 598397 [adv-main19+]

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=790373#a69062130_1689)• 10 years ago |

Group: core-security

|  | [BMO Automation](/user_profile?user_id=546015) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=790373#a305338252_546015)• 3 years ago |

Product: Core → Core Graveyard
You need to [log in](/show_bug.cgi?id=790373&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑



=== Content from bugzilla.mozilla.org_9a3e14d4_20250126_032101.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Sat Jan 25 2025 19:21:00 PST

* **Bug ID:**
  830943,
  799803,
  799907,
  819635,
  766452,
  827687,
  805294,
  801114,
  790373,
  809295,
  810169,
  797977

---

12 bugs found.

| [ID](/buglist.cgi?bug_id=830943%2C799803%2C799907%2C819635%2C766452%2C827687%2C805294%2C801114%2C790373%2C809295%2C810169%2C797977&query_format=advanced&order=bug_id%20DESC&query_based_on=) | [Type](/buglist.cgi?bug_id=830943%2C799803%2C799907%2C819635%2C766452%2C827687%2C805294%2C801114%2C790373%2C809295%2C810169%2C797977&query_format=advanced&order=bug_type%2Cbug_status%2Cpriority%2Cassigned_to%2Cbug_id&query_based_on=) | [Summary](/buglist.cgi?bug_id=830943%2C799803%2C799907%2C819635%2C766452%2C827687%2C805294%2C801114%2C790373%2C809295%2C810169%2C797977&query_format=advanced&order=short_desc%2Cbug_status%2Cpriority%2Cassigned_to%2Cbug_id&query_based_on=) | [Product](/buglist.cgi?bug_id=830943%2C799803%2C799907%2C819635%2C766452%2C827687%2C805294%2C801114%2C790373%2C809295%2C810169%2C797977&query_format=advanced&order=product%2Cbug_status%2Cpriority%2Cassigned_to%2Cbug_id&query_based_on=) | [Comp](/buglist.cgi?bug_id=830943%2C799803%2C799907%2C819635%2C766452%2C827687%2C805294%2C801114%2C790373%2C809295%2C810169%2C797977&query_format=advanced&order=component%2Cbug_status%2Cpriority%2Cassigned_to%2Cbug_id&query_based_on=) | [Assignee▲](/buglist.cgi?bug_id=830943%2C799803%2C799907%2C819635%2C766452%2C827687%2C805294%2C801114%2C790373%2C809295%2C810169%2C797977&query_format=advanced&order=assigned_to%20DESC%2Cbug_status%2Cpriority%2Cbug_id&query_based_on=) | [Status▲](/buglist.cgi?bug_id=830943%2C799803%2C799907%2C819635%2C766452%2C827687%2C805294%2C801114%2C790373%2C809295%2C810169%2C797977&query_format=advanced&order=bug_status%20DESC%2Cpriority%2Cassigned_to%2Cbug_id&query_based_on=) | [Resolution](/buglist.cgi?bug_id=830943%2C799803%2C799907%2C819635%2C766452%2C827687%2C805294%2C801114%2C790373%2C809295%2C810169%2C797977&query_format=advanced&order=resolution%2Cbug_status%2Cpriority%2Cassigned_to%2Cbug_id&query_based_on=) | [Updated](/buglist.cgi?bug_id=830943%2C799803%2C799907%2C819635%2C766452%2C827687%2C805294%2C801114%2C790373%2C809295%2C810169%2C797977&query_format=advanced&order=changeddate%2Cbug_status%2Cpriority%2Cassigned_to%2Cbug_id&query_based_on=) |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |
| [809295](/show_bug.cgi?id=809295 "RESOLVED FIXED - Do a better job handling failure in JSCompartment::wrap") |  | [Do a better job handling failure in JSCompartment::wrap](/show_bug.cgi?id=809295) | Core | JavaScript Engine | bill.mccloskey | RESO | FIXE | 2014-11-19 |
| [810169](/show_bug.cgi?id=810169 "RESOLVED FIXED - JSCompartment::global_ needs a read barrier") |  | [JSCompartment::global\_ needs a read barrier](/show_bug.cgi?id=810169) | Core | JavaScript Engine | bill.mccloskey | RESO | FIXE | 2014-11-19 |
| [827687](/show_bug.cgi?id=827687 "RESOLVED FIXED - Out of bounds read [@ ElementAnimations::EnsureStyleRuleFor] with CSS animation") |  | [Out of bounds read [@ ElementAnimations::EnsureStyleRuleFor] with CSS animation](/show_bug.cgi?id=827687) | Core | CSS Parsing and Comp | dbaron | RESO | FIXE | 2014-11-19 |
| [830943](/show_bug.cgi?id=830943 "RESOLVED FIXED - Incorrect behavior on emscripten \"bullet\" test") |  | [Incorrect behavior on emscripten "bullet" test](/show_bug.cgi?id=830943) | Core | JavaScript Engine | jdemooij | RESO | FIXE | 2013-11-25 |
| [819635](/show_bug.cgi?id=819635 "RESOLVED FIXED - IonMonkey: \"Assertion failure: [barrier verifier] Unmarked edge: <unknown>,\"") |  | [IonMonkey: "Assertion failure: [barrier verifier] Unmarked edge: <unknown>,"](/show_bug.cgi?id=819635) | Core | JavaScript Engine | kvijayan | RESO | FIXE | 2013-11-25 |
| [805294](/show_bug.cgi?id=805294 "RESOLVED FIXED - RegExpCompartment::sweep should mark the atom if the entry isn't removed") |  | [RegExpCompartment::sweep should mark the atom if the entry isn't removed](/show_bug.cgi?id=805294) | Core | JavaScript Engine | mail | RESO | FIXE | 2014-11-19 |
| [797977](/show_bug.cgi?id=797977 "RESOLVED FIXED - IonMonkey: Enable StackIter::fp() assertion.") |  | [IonMonkey: Enable StackIter::fp() assertion.](/show_bug.cgi?id=797977) | Core | JavaScript Engine | nicolas.b.pierron | RESO | FIXE | 2013-05-02 |
| [766452](/show_bug.cgi?id=766452 "RESOLVED FIXED - Crash [@ OpenTypeReorderingOutput::getStringIndex] with measureText, Kannada script, ZWJ") |  | [Crash [@ OpenTypeReorderingOutput::getStringIndex] with measureText, Kannada script, ZWJ](/show_bug.cgi?id=766452) | Core | Graphics | nobody | RESO | FIXE | 2016-06-21 |
| [790373](/show_bug.cgi?id=790373 "RESOLVED FIXED - plugin scroll position listener callback may destroy listener list (crash of bug 788436)") |  | [plugin scroll position listener callback may destroy listener list (crash of bug 788436)](/show_bug.cgi?id=790373) | Core Graveyard | Plug-ins | smichaud | RESO | FIXE | 2022-05-16 |
| [801114](/show_bug.cgi?id=801114 "RESOLVED FIXED - JSDebugErrorHook could trigger GC out of OOM handler") |  | [JSDebugErrorHook could trigger GC out of OOM handler](/show_bug.cgi?id=801114) | Core | JavaScript Engine | terrence.d.cole | RESO | FIXE | 2014-11-19 |
| [799907](/show_bug.cgi?id=799907 "VERIFIED FIXED - IonMonkey: Assertion failure: mir->type() == MIRType_Value, at ../ion/shared/Lowering-shared-inl.h:413 or Crash [@ js::ion::LinearScanAllocator::populateSafepoints]") |  | [IonMonkey: Assertion failure: mir->type() == MIRType\_Value, at ../ion/shared/Lowering-shared-inl.h:413 or Crash [@ js::ion::LinearScanAllocator::populateSafepoints]](/show_bug.cgi?id=799907) | Core | JavaScript Engine | dvander | VERI | FIXE | 2013-11-25 |
| [799803](/show_bug.cgi?id=799803 "VERIFIED FIXED - IonMonkey: Crash [@ JSString::isAtom] with invalid read") |  | [IonMonkey: Crash [@ JSString::isAtom] with invalid read](/show_bug.cgi?id=799803) | Core | JavaScript Engine | efaustbmo | VERI | FIXE | 2013-11-25 |

12 bugs found.

|  |  | [REST](/rest/bug?include_fields=id,summary,status&bug_id=830943%2C799803%2C799907%2C819635%2C766452%2C827687%2C805294%2C801114%2C790373%2C809295%2C810169%2C797977 "Query as a REST API request") | [CSV](/buglist.cgi?bug_id=830943%2C799803%2C799907%2C819635%2C766452%2C827687%2C805294%2C801114%2C790373%2C809295%2C810169%2C797977&query_format=advanced&ctype=csv&human=1) | [Feed](/buglist.cgi?bug_id=830943%2C799803%2C799907%2C819635%2C766452%2C827687%2C805294%2C801114%2C790373%2C809295%2C810169%2C797977&query_format=advanced&title=Bug%20List&ctype=atom) | [iCalendar](/buglist.cgi?bug_id=830943%2C799803%2C799907%2C819635%2C766452%2C827687%2C805294%2C801114%2C790373%2C809295%2C810169%2C797977&query_format=advanced&ctype=ics)  [Change Columns](/colchange.cgi?bug_id=830943%2C799803%2C799907%2C819635%2C766452%2C827687%2C805294%2C801114%2C790373%2C809295%2C810169%2C797977&query_format=advanced&query_based_on=) | [Edit Search](/query.cgi?bug_id=830943%2C799803%2C799907%2C819635%2C766452%2C827687%2C805294%2C801114%2C790373%2C809295%2C810169%2C797977&query_format=advanced) |  | as |
| --- | --- | --- | --- | --- | --- |



=== Content from bugzilla.mozilla.org_1e4ef784_20250124_202800.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/799803)
* [XML](/show_bug.cgi?ctype=xml&id=799803)

Closed
[Bug 799803](/show_bug.cgi?id=799803)

Opened 12 years ago
Closed 12 years ago

# IonMonkey: Crash [@ JSString::isAtom] with invalid read

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

IonMonkey: Crash [@ JSString::isAtom] with invalid read

## Categories

### (Core :: JavaScript Engine, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=JavaScript%20Engine#JavaScript%20Engine)

JavaScript Engine
▾

Core :: JavaScript Engine
The interpreter engine for the core JavaScript language, independent of the browser's object model. File ONLY core JavaScript language bugs in this category. For bugs involving browser objects such as "window" and "document", use the "DOM" component. For bugs involving calls between JavaScript and C++, use the "XPConnect" component.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=JavaScript%20Engine)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

x86

Linux

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

critical

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla19

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| a11y-review | --- |
| --- | --- |
| Webcompat Score | --- |
| Accessibility Severity | --- |
| Performance Impact | --- |
| Webcompat Priority | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox16 | --- | [unaffected](/buglist.cgi?f1=cf_status_firefox16&o1=equals&v1=unaffected) |
| firefox17 | --- | [unaffected](/buglist.cgi?f1=cf_status_firefox17&o1=equals&v1=unaffected) |
| firefox18 | --- | [affected](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=affected) |
| firefox19 | --- | [fixed](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=fixed) |
| firefox-esr10 | --- | [unaffected](/buglist.cgi?f1=cf_status_esr10&o1=equals&v1=unaffected) |
| firefox-esr17 | --- | [unaffected](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=unaffected) |
| b2g18 | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=unaffected) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox16 |  | unaffected |
| firefox17 |  | unaffected |
| firefox18 |  | affected |
| firefox19 |  | fixed |
| firefox-esr10 |  | unaffected |
| firefox-esr17 |  | unaffected |
| b2g18 |  | unaffected |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: decoder, Assigned: efaust)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/589235fc11e48fe6ffaa98fb085b4110?d=mm&size=40)  [efaust](/user_profile?user_id=442736)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

![](https://secure.gravatar.com/avatar/55857f92ded07119259dc6c1dd386205?d=mm&size=40)  [general](/user_profile?user_id=4729)

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/b29b83d12aba827b8ff68296e473bec5?d=mm&size=40)  [decoder](/user_profile?user_id=395101)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/4fe52ee1503aecf7b6c976b8eb7c1753?d=mm&size=40)  [willyelm](/user_profile?user_id=714609)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

11 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[IonFuzz](/show_bug.cgi?id=724444 "RESOLVED FIXED - [meta] IonMonkey fuzz bugs")

Dependency [tree](/showdependencytree.cgi?id=799803&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=799803)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (4 keywords, Whiteboard: [ion:p1:fx19] [jsbugmon:] [adv-main19+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[crash](/buglist.cgi?keywords=crash&resolution=---),
[csectype-wildptr](/buglist.cgi?keywords=csectype-wildptr&resolution=---),
[sec-high](/buglist.cgi?keywords=sec-high&resolution=---),
[testcase](/buglist.cgi?keywords=testcase&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[ion:p1:fx19] [jsbugmon:] [adv-main19+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [u279076](/user_profile?user_id=279076) | [in-testsuite](#c17 "12 years ago") | ? |
| --- | --- | --- |
| [u279076](/user_profile?user_id=279076) | in-testsuite | ? |
| --- | --- | --- |
|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | qe-verify |  |

## Crash Data

Signature:

[[@ JSString::isAtom ]](https://crash-stats.mozilla.org/signature/?signature=JSString%3A%3AisAtom)

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (1 file)

| [Fix](/attachment.cgi?id=675472)  [12 years ago](#c7)  [Eric Faust [:efaust]](/user_profile?user_id=442736)   2.93 KB, patch | nbp : [review+](#c8 "12 years ago")  abillings : [sec-approval+](#c13 "12 years ago") | [Details](/attachment.cgi?id=675472&action=edit) | [Diff](/attachment.cgi?id=675472&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=799803&attachment=675472) |
| --- | --- | --- |

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=799803#c0)• 12 years ago |
|  | |

The following testcase crashes on mozilla-central revision 22d192c5d1fd (run with --ion-eager):
var gTestcases = new Array();
var gTc = gTestcases.length;
function TestCase(n, d, e, a) {
this.bugnumber = typeof(BUGNUMER) != 'undefined' ? BUGNUMBER : '';
gTestcases[gTc++] = this;
TestCase.prototype.dump = function () {
+ this.path + this.bugnumber + 'reason: '
}
};
function reportCompare (expected, actual, description) {
var testcase = new TestCase();
}
function exitFunc (funcName) {
reportCompare();
}
function jsTestDriverEnd() {
for (var i = 0; i < gTestcases.length; i++)
gTestcases[i].dump();
}
evaluate("\
new TestCase ();\
new TestCase ();\
var BUGNUMBER = 359062;\
schedulegc(10);\
jsTestDriverEnd();\
print(expect = BUGNUMER = 'Test skipped. Script object required.');\
exitFunc ('test');\
jsTestDriverEnd();\
", { noScriptRval : true });

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=799803#c1)• 12 years ago |
|  | |

Crash trace:
==1819== Invalid read of size 4
==1819== at 0x806DDE4: JSString::isAtom() const (String.h:373)
==1819== by 0x832F6C1: js\_ConcatStrings(JSContext\*, JS::Handle<JSString\*>, JS::Handle<JSString\*>) (String.cpp:301)
==1819== by 0x817397F: js::AddOperation(JSContext\*, JS::Handle<JSScript\*>, unsigned char\*, JS::Value const&, JS::Value const&, JS::Value\*) (jsinterpinlines.h:566)
==1819== by 0x81906F4: js::AddValues(JSContext\*, JS::Handle<JSScript\*>, unsigned char\*, JS::Handle<JS::Value>, JS::Handle<JS::Value>, JS::Value\*) (jsinterp.cpp:4130)
==1819== by 0x7D8AE26: ???
==1819== Address 0x57a96 is not stack'd, malloc'd or (recently) free'dBlocks: [IonFuzz](/show_bug.cgi?id=724444 "RESOLVED FIXED - [meta] IonMonkey fuzz bugs")Whiteboard: [jsbugmon:update,bisect]

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=799803#a1962_395101)• 12 years ago |

Whiteboard: [jsbugmon:update,bisect] → [jsbugmon:update]

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=799803#c2)• 12 years ago |
|  | |

JSBugMon: Bisection requested, result:
autoBisect shows this is probably related to the following changeset:
The first bad revision is:
changeset: 108213:19da37cf65ae
user: Eric Faust
date: Wed Sep 26 19:02:56 2012 -0400
summary: [Bug 793284](/show_bug.cgi?id=793284 "RESOLVED FIXED - IonMonkey: TestCommonPropFunc() may cause bogus invalidations") - Use non-freezing checks in TestCommonPropFunc() to avoid bogus invalidations. (r=djvj)
This iteration took 83.941 seconds to run.

|  | [Marty Rosenberg [:mjrosenb]](/user_profile?user_id=419881) |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=799803#c3)• 12 years ago |
|  | |

cc'ing efaust, since it pointed at his commit.

|  | [Eric Faust [:efaust]](/user_profile?user_id=442736)  Assignee |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=799803#c4)• 12 years ago |
|  | |

This appears to continue to segfault without any of the common accessor code running at all. I verified this on a --enable-debug --disable-optimize stock shell build.
The revision pointed to changes the check for that optimization, forcing it to stop spewing stray ownProperty freezes on every inherited property, whether the properties had accessors or not, and whether the optimization was actually used or not.
As there doesn't appear to be any accessor redefinition in the test case, it appears that removing these random freezes has uncovered a freezing bug somewhere else, likely the this.bugnumber access is a good place to start.

|  | [Eric Faust [:efaust]](/user_profile?user_id=442736)  Assignee |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=799803#c5)• 12 years ago |
|  | |

Crash is indeed involving |this.bugnumber|
gdb notes:
#0 JSString::isAtom (this=0x57a96) at String.h:373
#1 0x000000010037d5ea in js\_ConcatStrings (cx=0x101915b90, left={<js::HandleBase<JSString \*>> = {<No data fields>}, ptr = 0x7fff5fbfa158}, right={<js::HandleBase<JSString \*>> = {<No data fields>}, ptr = 0x7fff5fbfa140}) at /Users/efaust/m-fuckme/js/src/vm/String.cpp:301
#2 0x000000010017e87c in AddOperation (cx=0x101915b90, script={<js::HandleBase<JSScript \*>> = {<No data fields>}, ptr = 0x7fff5fbfa2d0}, pc=0x10191cca5 "\033=", lhs=@0x7fff5fbfa240, rhs=@0x7fff5fbfa238, res=0x7fff5fbfa2a8) at jsinterpinlines.h:566
#3 0x0000000100181302 in js::AddValues (cx=0x101915b90, script={<js::HandleBase<JSScript \*>> = {<No data fields>}, ptr = 0x7fff5fbfa2d0}, pc=0x10191cca5 "\033=", lhs={<js::HandleBase<JS::Value>> = {<js::ValueOperations<JS::Handle<JS::Value> >> = {<No data fields>}, <No data fields>}, ptr = 0x7fff5fbfa2e0}, rhs={<js::HandleBase<JS::Value>> = {<js::ValueOperations<JS::Handle<JS::Value> >> = {<No data fields>}, <No data fields>}, ptr = 0x7fff5fbfa2e8}, res=0x7fff5fbfa2a8) at jsinterp.cpp:3991
#4 0x00000001018f0f8c in ?? ()
and:
(gdb) p this
$3 = (JSString \*) 0x57a96
(gdb) p /d this
$4 = 359062
It looks like the set |print(expect = BUGNUMER = 'Test skipped. Script object required.');| is not setting BUGNUMBER appropriately. If you print BUGNUMBER right after that print line, you see 359062 still there.
I am still struggling to understand how random slot property ownProperty freezes could save this. Scope object value sets, maybe, but it seems a long shot.

|  | [David Anderson [:dvander] - inactive, e-mail if emergency](/user_profile?user_id=309316) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=799803#a18407_309316)• 12 years ago |

Whiteboard: [jsbugmon:update] → [jsbugmon:update][ion:p1]

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=799803#a242298_280903)• 12 years ago |

[status-firefox-esr10](/buglist.cgi?f1=cf_status_esr10&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_esr10&o1=equals&v1=unaffected)
[status-firefox16](/buglist.cgi?f1=cf_status_firefox16&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_firefox16&o1=equals&v1=unaffected)
[status-firefox17](/buglist.cgi?f1=cf_status_firefox17&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_firefox17&o1=equals&v1=unaffected)
[status-firefox-esr17](/buglist.cgi?f1=cf_status_firefox_esr17&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=unaffected)

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=799803#c6)• 12 years ago |
|  | |

Assuming at least sec-high due to invalid read with a bad pointer and [comment 4](/show_bug.cgi?id=799803#c4 "VERIFIED FIXED - IonMonkey: Crash [@ JSString::isAtom] with invalid read") and 5 seem to indicate that there is some inconsistency in variables involved.Keywords: [csec-wildptr](/buglist.cgi?keywords=csec-wildptr&resolution=---),
[sec-high](/buglist.cgi?keywords=sec-high&resolution=---)

|  | [David Anderson [:dvander] - inactive, e-mail if emergency](/user_profile?user_id=309316) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=799803#a1181567_309316)• 12 years ago |

Whiteboard: [jsbugmon:update][ion:p1] → [jsbugmon:update][ion:p1:fx19]

|  | [Eric Faust [:efaust]](/user_profile?user_id=442736)  Assignee |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=799803#c7)• 12 years ago |
|  | |

Attached patch

[Fix](attachment.cgi?id=675472&action=diff)
— [Details](attachment.cgi?id=675472&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=799803&attachment=675472)

Good lord this was a fun one. Because we now regenerate TI after GC, we can enter situations where, mid-compilation, we generate TI that should invalidate the script we are actively compiling.
Many thanks to Brian Hackett for helping track this one down.Assignee: general → efaustbmoStatus: NEW → ASSIGNED
[Attachment #675472](/attachment.cgi?id=675472&action=edit "Fix") -
Flags: review?(nicolas.b.pierron)

|  | [Nicolas B. Pierron [:nbp]](/user_profile?user_id=422187) |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=799803#c8)• 12 years ago |
|  | |

Comment on [attachment 675472](/attachment.cgi?id=675472 "Fix") [[details]](/attachment.cgi?id=675472&action=edit "Fix") [[diff]](/attachment.cgi?id=675472&action=diff "Fix") [[review]](/page.cgi?id=splinter.html&ignore=&bug=799803&attachment=675472)
Fix
Review of [attachment 675472](/attachment.cgi?id=675472 "Fix") [[details]](/attachment.cgi?id=675472&action=edit "Fix") [[diff]](/attachment.cgi?id=675472&action=diff "Fix") [[review]](/page.cgi?id=splinter.html&ignore=&bug=799803&attachment=675472):
-----------------------------------------------------------------
Sounds good, still move the check to ensure that it is more resistant to other input paths.
::: js/src/jsinfer.cpp
@@ +2019,5 @@
> + \* inference information mid-compilation causes an invalidation of the
> + \* script being compiled.
> + \*/
> + RecompileInfo& info = cx->compartment->types.compiledInfo;
> + if (info.outputIndex != RecompileInfo::NoCompilerRunning) {
Even if this comes later, I would prefer that this check happens in:
TypeCompartment::addPendingRecompile(JSContext \*cx, const RecompileInfo &info)
and you should not check for Ion for because this can also appear in JM.
if (cx->compartment->types.compiledInfo.outputIndex != info.outputIndex)
co->invalidate()
or something like that.
[Attachment #675472](/attachment.cgi?id=675472&action=edit "Fix") -
Flags: review?(nicolas.b.pierron) → review+

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=799803#a1776388_395101)• 12 years ago |

Whiteboard: [jsbugmon:update][ion:p1:fx19] → [ion:p1:fx19] [jsbugmon:update,ignore]

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=799803#c9)• 12 years ago |
|  | |

JSBugMon: The testcase found in this bug no longer reproduces (tried revision 71290adea0c1).

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=799803#a1777143_395101)• 12 years ago |

Whiteboard: [ion:p1:fx19] [jsbugmon:update,ignore] → [ion:p1:fx19] [jsbugmon:bisectfix]

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=799803#a1779556_395101)• 12 years ago |

Whiteboard: [ion:p1:fx19] [jsbugmon:bisectfix] → [ion:p1:fx19] [jsbugmon:]

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=799803#c10)• 12 years ago |
|  | |

JSBugMon: Fix Bisection requested, result:
autoBisect shows this is probably related to the following changeset:
The first good revision is:
changeset: 111708:4a2c17905a17
user: Nicolas B. Pierron
date: Mon Oct 29 14:48:45 2012 -0700
summary: [Bug 792631](/show_bug.cgi?id=792631 "RESOLVED FIXED - IonMonkey: Slow property access perf regression.") - Add IC for missing properties. r=dvander
This iteration took 92.693 seconds to run.

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=799803#c11)• 12 years ago |
|  | |

Is the revision in [comment 10](/show_bug.cgi?id=799803#c10 "VERIFIED FIXED - IonMonkey: Crash [@ JSString::isAtom] with invalid read") a fix for this issue and this bug a duplicate, or is that modification just hiding the bug?Flags: needinfo?(nicolas.b.pierron)

|  | [David Anderson [:dvander] - inactive, e-mail if emergency](/user_profile?user_id=309316) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=799803#c12)• 12 years ago |
|  | |

Comment on [attachment 675472](/attachment.cgi?id=675472 "Fix") [[details]](/attachment.cgi?id=675472&action=edit "Fix") [[diff]](/attachment.cgi?id=675472&action=diff "Fix") [[review]](/page.cgi?id=splinter.html&ignore=&bug=799803&attachment=675472)
Fix
[Security approval request comment]
How easily can the security issue be deduced from the patch?
Not easily, not easily at all.
Do comments in the patch, the check-in comment, or tests included in the patch paint a bulls-eye on the security problem?
No.
Which older supported branches are affected by this flaw?
Firefox 18, if it reproduces there.
If not all supported branches, which bug introduced the flaw?
N/A, came with IonMonkey
Do you have backports for the affected branches? If not, how different, hard to create, and risky will they be?
Patch should apply to 18.
How likely is this patch to cause regressions; how much testing does it need?
Very low risk.
[Attachment #675472](/attachment.cgi?id=675472&action=edit "Fix") -
Flags: sec-approval?

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=799803#c13)• 12 years ago |
|  | |

Comment on [attachment 675472](/attachment.cgi?id=675472 "Fix") [[details]](/attachment.cgi?id=675472&action=edit "Fix") [[diff]](/attachment.cgi?id=675472&action=diff "Fix") [[review]](/page.cgi?id=splinter.html&ignore=&bug=799803&attachment=675472)
Fix
Be sure to ask for approval for 18.
[Attachment #675472](/attachment.cgi?id=675472&action=edit "Fix") -
Flags: sec-approval? → sec-approval+

|  | [David Anderson [:dvander] - inactive, e-mail if emergency](/user_profile?user_id=309316) |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=799803#c14)• 12 years ago |
|  | |

<https://hg.mozilla.org/integration/mozilla-inbound/rev/f75007880173>

|  | [Ed Morley [:emorley]](/user_profile?user_id=373476) |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=799803#c15)• 12 years ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/f75007880173>Status: ASSIGNED → RESOLVEDClosed: 12 years ago
[status-firefox18](/buglist.cgi?f1=cf_status_firefox18&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=affected)
[status-firefox19](/buglist.cgi?f1=cf_status_firefox19&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=fixed)Resolution: --- → FIXEDTarget Milestone: --- → mozilla19

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=799803#a1945040_395101)• 12 years ago |

Status: RESOLVED → VERIFIEDFlags: needinfo?(nicolas.b.pierron)

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=799803#c16)• 12 years ago |
|  | |

JSBugMon: This bug has been automatically verified fixed.

|  | [u279076](/user_profile?user_id=279076) |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=799803#c17)• 12 years ago |
|  | |

Can this be put in testsuite?Flags: in-testsuite?

|  | [Alex Keybl [:akeybl]](/user_profile?user_id=425645) |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=799803#c18)• 12 years ago |
|  | |

Do we think that B2G is impacted here? If you know of a good rule for whether or not B2G is impacted by JS , please let us know.

|  | [Nicolas B. Pierron [:nbp]](/user_profile?user_id=422187) |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=799803#c19)• 12 years ago |
|  | |

(In reply to Alex Keybl [:akeybl] from [comment #18](/show_bug.cgi?id=799803#c18 "VERIFIED FIXED - IonMonkey: Crash [@ JSString::isAtom] with invalid read"))
> Do we think that B2G is impacted here? If you know of a good rule for
> whether or not B2G is impacted by JS , please let us know.
B2G should not be impacted because the constraint system is currently tie to the type system, which is not enabled on B2G for memory consumption issues.

|  | [David Anderson [:dvander] - inactive, e-mail if emergency](/user_profile?user_id=309316) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=799803#a9144004_309316)• 12 years ago |

[status-b2g18](/buglist.cgi?f1=cf_status_b2g18&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=unaffected)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=799803#a11032542_280903)• 12 years ago |

Whiteboard: [ion:p1:fx19] [jsbugmon:] → [ion:p1:fx19] [jsbugmon:] [adv-main19+]

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=799803#a35580101_1689)• 11 years ago |

Group: core-security
You need to [log in](/show_bug.cgi?id=799803&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Eric Faust [:efaust]](/user_profile?user_id=442736)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from bugzilla.mozilla.org_b93ab71e_20250124_202809.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/819635)
* [XML](/show_bug.cgi?ctype=xml&id=819635)

Closed
[Bug 819635](/show_bug.cgi?id=819635)

Opened 12 years ago
Closed 12 years ago

# IonMonkey: "Assertion failure: [barrier verifier] Unmarked edge: <unknown>,"

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

IonMonkey: "Assertion failure: [barrier verifier] Unmarked edge: <unknown>,"

## Categories

### (Core :: JavaScript Engine, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=JavaScript%20Engine#JavaScript%20Engine)

JavaScript Engine
▾

Core :: JavaScript Engine
The interpreter engine for the core JavaScript language, independent of the browser's object model. File ONLY core JavaScript language bugs in this category. For bugs involving browser objects such as "window" and "document", use the "DOM" component. For bugs involving calls between JavaScript and C++, use the "XPConnect" component.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=JavaScript%20Engine)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

x86

Linux

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

critical

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla20

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Webcompat Priority | --- |
| --- | --- |
| Performance Impact | --- |
| Accessibility Severity | --- |
| Webcompat Score | --- |
| a11y-review | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox17 | --- | [unaffected](/buglist.cgi?f1=cf_status_firefox17&o1=equals&v1=unaffected) |
| firefox18 | [-](/buglist.cgi?f1=cf_tracking_firefox18&o1=equals&v1=-) | [wontfix](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=wontfix) |
| firefox19 | [+](/buglist.cgi?f1=cf_tracking_firefox19&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=fixed) |
| firefox20 | [+](/buglist.cgi?f1=cf_tracking_firefox20&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox20&o1=equals&v1=fixed) |
| firefox-esr10 | --- | [unaffected](/buglist.cgi?f1=cf_status_esr10&o1=equals&v1=unaffected) |
| firefox-esr17 | --- | [unaffected](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=unaffected) |
| b2g18 | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=unaffected) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox17 |  | unaffected |
| firefox18 | - | wontfix |
| firefox19 | + | fixed |
| firefox20 | + | fixed |
| firefox-esr10 |  | unaffected |
| firefox-esr17 |  | unaffected |
| b2g18 |  | unaffected |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: gkw, Assigned: djvj)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/55e0476b8efe4fd21a03a662d86e3578?d=mm&size=40)  [djvj](/user_profile?user_id=436087)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

![](https://secure.gravatar.com/avatar/55857f92ded07119259dc6c1dd386205?d=mm&size=40)  [general](/user_profile?user_id=4729)

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](extensions/Gravatar/web/default.jpg)  [gkw](/user_profile?user_id=132034)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/4fe52ee1503aecf7b6c976b8eb7c1753?d=mm&size=40)  [willyelm](/user_profile?user_id=714609)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

18 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[IonFuzz](/show_bug.cgi?id=724444 "RESOLVED FIXED - [meta] IonMonkey fuzz bugs"), [786146](/show_bug.cgi?id=786146 "RESOLVED FIXED - IonMonkey: eagerly generate stubs/wrappers, store in runtime")

Dependency [tree](/showdependencytree.cgi?id=819635&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=819635)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (5 keywords, Whiteboard: [adv-main19+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[assertion](/buglist.cgi?keywords=assertion&resolution=---),
[crash](/buglist.cgi?keywords=crash&resolution=---),
[regression](/buglist.cgi?keywords=regression&resolution=---),
[sec-critical](/buglist.cgi?keywords=sec-critical&resolution=---),
[testcase](/buglist.cgi?keywords=testcase&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[adv-main19+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [RyanVM](/user_profile?user_id=75935) | [in-testsuite](#c18 "12 years ago") | ? |
| --- | --- | --- |
| [RyanVM](/user_profile?user_id=75935) | in-testsuite | ? |
| --- | --- | --- |
|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (3 files)

| [stack](/attachment.cgi?id=690073)  [12 years ago](#c0)  [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)   2.30 KB, text/plain |  | [Details](/attachment.cgi?id=690073&action=edit) |
| --- | --- | --- |
| [patch to increase determinism](/attachment.cgi?id=692128)  [12 years ago](#c7)  [Bill McCloskey [inactive unless it's an emergency] (:billm)](/user_profile?user_id=389993)   3.14 KB, patch | bhackett1024 : [review+](#a548261_346231 "12 years ago")  RyanVM : [checkin+](#c10 "12 years ago") | [Details](/attachment.cgi?id=692128&action=edit) | [Diff](/attachment.cgi?id=692128&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=819635&attachment=692128) |
| [Fix](/attachment.cgi?id=693123)  [12 years ago](#c14)  [Kannan Vijayan [:djvj]](/user_profile?user_id=436087)   2.10 KB, patch | mjrosenb : [review+](#a893240_419881 "12 years ago")  bajaj : [approval-mozilla-aurora+](#c30 "12 years ago")  akeybl : [approval-mozilla-beta-](#c31 "12 years ago")  gkw : [checkin+](#a990718_132034 "12 years ago") | [Details](/attachment.cgi?id=693123&action=edit) | [Diff](/attachment.cgi?id=693123&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=819635&attachment=693123) |

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=819635#c0)• 12 years ago |
|  | |

Attached file
[stack](attachment.cgi?id=690073)
— [Details](attachment.cgi?id=690073&action=edit)

gcPreserveCode()
try {
RegExp("(")
} catch (e) {}
try {
ArrayBuffer()
gc()
with("") {
t()
}
} catch (e) {}
try {
x = {}
verifyprebarriers()
r
} catch (e) {}
try {
schedulegc(35)
print(/(())/y)
ArrayBuffer()
k
} catch (e) {}
try {
q
} catch (e) {}
try {
RegExp("?/")
} catch (e) {}
(function() {
for (z = 0; z < 3; z++) {
e = z
x.h = (function() {})
}
})()
crashes and throws the following error message on js opt shell on IonMonkey changeset 32638e411218 with --ion-eager:
Assertion failure: [barrier verifier] Unmarked edge: <unknown>,
s-s and assuming sec-critical because gc seems related. My js opt shell was compiled with --enable-more-deterministic and --enable-gczeal.
autoBisect shows this is probably related to the following changeset:
The first bad revision is:
changeset: 113229:6ba78023b367
user: Brian Hackett
date: Wed Nov 14 06:46:31 2012 -0800
summary: Eagerly generate a single copy of Ion stubs and wrappers, [bug 786146](/show_bug.cgi?id=786146 "RESOLVED FIXED - IonMonkey: eagerly generate stubs/wrappers, store in runtime"). r=dvander

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)  Reporter |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=819635#c1)• 12 years ago |
|  | |

I had tested this on a 32-bit shell in Ubuntu Linux 12.10.
I do not see the assertion failure in a 32-bit debug shell.OS: Mac OS X → LinuxHardware: x86\_64 → x86

|  | [Josh Aas](/user_profile?user_id=18821) |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=819635#c2)• 12 years ago |
|  | |

Over to bhackett for now as he wrote the patch we think caused the regression.Assignee: general → bhackett1024

|  | [Lukas Blakk [:lsblakk] use ?needinfo](/user_profile?user_id=272375) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=819635#a222833_272375)• 12 years ago |

[tracking-firefox19](/buglist.cgi?f1=cf_tracking_firefox19&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox19&o1=equals&v1=%3F) → [+](/buglist.cgi?f1=cf_tracking_firefox19&o1=equals&v1=%2B)
[tracking-firefox20](/buglist.cgi?f1=cf_tracking_firefox20&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox20&o1=equals&v1=%3F) → [+](/buglist.cgi?f1=cf_tracking_firefox20&o1=equals&v1=%2B)

|  | [Brian Hackett [Laid off!]](/user_profile?user_id=346231) |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=819635#c3)• 12 years ago |
|  | |

I think the autoBisect blame here is wrong. [Bug 786146](/show_bug.cgi?id=786146 "RESOLVED FIXED - IonMonkey: eagerly generate stubs/wrappers, store in runtime") just changes how IonCode stubs are stored, and the edge the verifier is complaining about here is between two objects (x and the empty lambda).
[Bug 786146](/show_bug.cgi?id=786146 "RESOLVED FIXED - IonMonkey: eagerly generate stubs/wrappers, store in runtime") does change the number of GC things allocated when we first try to Ion compile code in a compartment, which will perturb the point at which the GC happens due to that schedulegc(35) call.
Bill, does this look like any existing IGC bugs?

|  | [Brian Hackett [Laid off!]](/user_profile?user_id=346231) |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=819635#c4)• 12 years ago |
|  | |

Bill, can you look at [comment 3](/show_bug.cgi?id=819635#c3 "RESOLVED FIXED - IonMonkey: \"Assertion failure: [barrier verifier] Unmarked edge: <unknown>,\"")?Assignee: bhackett1024 → general

|  | [Bill McCloskey [inactive unless it's an emergency] (:billm)](/user_profile?user_id=389993) |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=819635#c5)• 12 years ago |
|  | |

David, this is the one where it's creating an IC for an existing property and for a new property. I'm going to look into why it's only reproducing in opt builds.
Also, David, if you add the assertion about the shape not changing, it does crash in a debug build.Assignee: general → dvander

|  | [David Anderson [:dvander] - inactive, e-mail if emergency](/user_profile?user_id=309316) |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=819635#c6)• 12 years ago |
|  | |

(Musical chairs!) Kannan - could you look at this? I think it's a pretty straightforward bug. We generate a setprop IC, but then nothing stops us from also generating an addrop IC. Probably we should only consider adding an addprop IC if the property was never found to begin with.Assignee: dvander → kvijayanStatus: NEW → ASSIGNED

|  | [Bill McCloskey [inactive unless it's an emergency] (:billm)](/user_profile?user_id=389993) |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=819635#c7)• 12 years ago |
|  | |

Attached patch

[patch to increase determinism](attachment.cgi?id=692128&action=diff)
— [Details](attachment.cgi?id=692128&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=819635&attachment=692128)

I tried to figure out why this only happens in opt builds. I found a problem where the match function for the initial shape table is triggering a read barrier. Since the set of things match is called on depends on address layout, it would be good to avoid that. The barrier is unnecessary there because we're not actually looking at the object, just at its address. We do have to be careful that we don't GC in between the hash table lookup and the actual use of the result, but that's an existing problem with all these weak tables.
After fixing this, it still doesn't reproduce properly in debug builds because of the conservative scanner. But at least this helps a little.
[Attachment #692128](/attachment.cgi?id=692128&action=edit "patch to increase determinism") -
Flags: review?(bhackett1024)

|  | [Bill McCloskey [inactive unless it's an emergency] (:billm)](/user_profile?user_id=389993) |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=819635#c8)• 12 years ago |
|  | |

Also, to be totally clear, [comment 7](/show_bug.cgi?id=819635#c7 "RESOLVED FIXED - IonMonkey: \"Assertion failure: [barrier verifier] Unmarked edge: <unknown>,\"") doesn't fix the bug.

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=819635#a545289_406194)• 12 years ago |

Whiteboard: [leave open]

|  | [Brian Hackett [Laid off!]](/user_profile?user_id=346231) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=819635#a548261_346231)• 12 years ago |

[Attachment #692128](/attachment.cgi?id=692128&action=edit "patch to increase determinism") -
Flags: review?(bhackett1024) → review+

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=819635#a549178_132034)• 12 years ago |

Keywords: [checkin-needed](/buglist.cgi?keywords=checkin-needed&resolution=---)

|  | [Kannan Vijayan [:djvj]](/user_profile?user_id=436087)  Assignee |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=819635#c9)• 12 years ago |
|  | |

Taking a look at it.

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=819635#c10)• 12 years ago |
|  | |

Comment on [attachment 692128](/attachment.cgi?id=692128 "patch to increase determinism") [[details]](/attachment.cgi?id=692128&action=edit "patch to increase determinism") [[diff]](/attachment.cgi?id=692128&action=diff "patch to increase determinism") [[review]](/page.cgi?id=splinter.html&ignore=&bug=819635&attachment=692128)
patch to increase determinism
<https://hg.mozilla.org/integration/mozilla-inbound/rev/9431f3821542>
[Attachment #692128](/attachment.cgi?id=692128&action=edit "patch to increase determinism") -
Flags: checkin+

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=819635#a742308_75935)• 12 years ago |

Keywords: [checkin-needed](/buglist.cgi?keywords=checkin-needed&resolution=---)

|  | [Ed Morley [:emorley]](/user_profile?user_id=373476) |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=819635#c11)• 12 years ago |
|  | |

(In reply to Ryan VanderMeulen from [comment #10](/show_bug.cgi?id=819635#c10 "RESOLVED FIXED - IonMonkey: \"Assertion failure: [barrier verifier] Unmarked edge: <unknown>,\""))
> Comment on [attachment 692128](/attachment.cgi?id=692128 "patch to increase determinism") [[details]](/attachment.cgi?id=692128&action=edit "patch to increase determinism") [[diff]](/attachment.cgi?id=692128&action=diff "patch to increase determinism") [[review]](/page.cgi?id=splinter.html&ignore=&bug=819635&attachment=692128)
> patch to increase determinism
>
> <https://hg.mozilla.org/integration/mozilla-inbound/rev/9431f3821542>
<https://hg.mozilla.org/mozilla-central/rev/9431f3821542>

|  | [Kannan Vijayan [:djvj]](/user_profile?user_id=436087)  Assignee |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=819635#c12)• 12 years ago |
|  | |

Bill,
I tried reproducing this with a tip-build (x86-32, enable-optimize, enable-more-deterministic, enable-gczeal) which includes your determinism patch, and I wasn't able to.
I am able to reproduce if I update to the revision mentioned in [comment 1](/show_bug.cgi?id=819635#c1 "RESOLVED FIXED - IonMonkey: \"Assertion failure: [barrier verifier] Unmarked edge: <unknown>,\""), so I'm proceeding with that.

|  | [Kannan Vijayan [:djvj]](/user_profile?user_id=436087)  Assignee |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=819635#c13)• 12 years ago |
|  | |

Well I can make the error go away by fixing the unnecessary-addprop-stub addition. However, the extra stub shouldn't be causing a marking error at all. It should sit there, never getting used and being unnecessary, but not interfere with GC.
Trying to track down the exact cause of the GC error.

|  | [Kannan Vijayan [:djvj]](/user_profile?user_id=436087)  Assignee |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=819635#c14)• 12 years ago |
|  | |

Attached patch

[Fix](attachment.cgi?id=693123&action=diff)
— [Details](attachment.cgi?id=693123&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=819635&attachment=693123)

Thanks to dvander and billm for helping me understand this. Here's what's happening and why:
1. The logic for Ion's SETPROP ICs can add both "setprop-existing" stubs (a setprop on a property that doesn't involve a shape change), and "setprop-adding" stubs (a setprop on a property that involves adding the property and changing the shape).
2. The attaching of the setprop stub is tried before the SetProperty operation is itself called, and the attach of the addprop stub is tried afterwards. The addprop doesn't check to see if a setprop stub has been added, and thus an addprop stub is always generated.
3. The erroneous addprop stub contains an unbarriered write to the property. This is OK for an actual addprop since we can guarantee that no old value is being overwritten. For an erroneous addprop, that guarantee doesn't hold. The GC error arises from here.
4. Most of the time, this addprop stub is never hit, since the generated setprop stub comes before the addprop stub, and succeeds wherever the bad addprop stub would have succeeded.
5. In this test case, a GC occurs in between the creation of the setprop stub and the creation of the addprop stub. The GC clears out all stubs in the cache, including the setprop stub, and the addprop stub becomes "visible" - no longer masked by the setprop stub as it usually is.
6. The next time around, the bad addprop stub gets executed, and performs an unbarriered write to an existing slot, and causes the GC invariant breakdown.
Fix attached. Fix is against tip, which doesn't reproduce the problem, so it'll have to be applied to the revision in [comment 1](/show_bug.cgi?id=819635#c1 "RESOLVED FIXED - IonMonkey: \"Assertion failure: [barrier verifier] Unmarked edge: <unknown>,\"") to test. I was thinking we might want a test for this bug, but it's really hard to reproduce so the test is likely to be largely useless.
[Attachment #693123](/attachment.cgi?id=693123&action=edit "Fix") -
Flags: review?(dvander)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=819635#c15)• 12 years ago |
|  | |

Does 9431f3821542 need to be backed out when this lands or is that OK to stay in the tree?

|  | [Kannan Vijayan [:djvj]](/user_profile?user_id=436087)  Assignee |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=819635#c16)• 12 years ago |
|  | |

It's OK to stay in the tree.

|  | [Marty Rosenberg [:mjrosenb]](/user_profile?user_id=419881) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=819635#a893240_419881)• 12 years ago |

[Attachment #693123](/attachment.cgi?id=693123&action=edit "Fix") -
Flags: review?(dvander) → review+

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)  Reporter |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=819635#c17)• 12 years ago |
|  | |

(In reply to Kannan Vijayan [:djvj] from [comment #14](/show_bug.cgi?id=819635#c14 "RESOLVED FIXED - IonMonkey: \"Assertion failure: [barrier verifier] Unmarked edge: <unknown>,\""))
> Created [attachment 693123](/attachment.cgi?id=693123 "Fix") [[details]](/attachment.cgi?id=693123&action=edit "Fix") [[diff]](/attachment.cgi?id=693123&action=diff "Fix") [[review]](/page.cgi?id=splinter.html&ignore=&bug=819635&attachment=693123)
> Fix
This landed:
<http://hg.mozilla.org/integration/mozilla-inbound/rev/d3d48381d324>

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=819635#c18)• 12 years ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/d3d48381d324>
(Leaving open per the whiteboard. Please resolve and set the status flags if it was not intended)Flags: in-testsuite?

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)  Reporter |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=819635#c19)• 12 years ago |
|  | |

Kannan, if there's nothing else in this bug, shall it be resolved?Flags: needinfo?(kvijayan)

|  | [Kannan Vijayan [:djvj]](/user_profile?user_id=436087)  Assignee |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=819635#c20)• 12 years ago |
|  | |

(In reply to Gary Kwong [:gkw] from [comment #19](/show_bug.cgi?id=819635#c19 "RESOLVED FIXED - IonMonkey: \"Assertion failure: [barrier verifier] Unmarked edge: <unknown>,\""))
> Kannan, if there's nothing else in this bug, shall it be resolved?
Minor additional fix: <https://hg.mozilla.org/integration/mozilla-inbound/rev/3030d272e4d0>
Now it can be resolved :) Sorry Gary - I had the OK for that patch earlier today but I burrowed into some baseline work and didn't get around to pushing.Flags: needinfo?(kvijayan)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=819635#a923540_75935)• 12 years ago |

Whiteboard: [leave open]

|  | [Kannan Vijayan [:djvj]](/user_profile?user_id=436087)  Assignee |  |
| --- | --- | --- |
| [Comment 21](/show_bug.cgi?id=819635#c21)• 12 years ago |
|  | |

Do I need to request approval for this to make it into firefox-19?

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)  Reporter |  |
| --- | --- | --- |
| [Comment 22](/show_bug.cgi?id=819635#c22)• 12 years ago |
|  | |

(In reply to Kannan Vijayan [:djvj] from [comment #21](/show_bug.cgi?id=819635#c21 "RESOLVED FIXED - IonMonkey: \"Assertion failure: [barrier verifier] Unmarked edge: <unknown>,\""))
> Do I need to request approval for this to make it into firefox-19?
Yes. Actually, sec-approval first because this affects the branches. I think next time we should request for sec-approval first before landing on m-c.

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)  Reporter |  |
| --- | --- | --- |
| [Comment 23](/show_bug.cgi?id=819635#c23)• 12 years ago |
|  | |

(In reply to Kannan Vijayan [:djvj] from [comment #20](/show_bug.cgi?id=819635#c20 "RESOLVED FIXED - IonMonkey: \"Assertion failure: [barrier verifier] Unmarked edge: <unknown>,\""))
> (In reply to Gary Kwong [:gkw] from [comment #19](/show_bug.cgi?id=819635#c19 "RESOLVED FIXED - IonMonkey: \"Assertion failure: [barrier verifier] Unmarked edge: <unknown>,\""))
> > Kannan, if there's nothing else in this bug, shall it be resolved?
>
> Minor additional fix:
> <https://hg.mozilla.org/integration/mozilla-inbound/rev/3030d272e4d0>
<http://hg.mozilla.org/mozilla-central/rev/3030d272e4d0>Status: ASSIGNED → RESOLVEDClosed: 12 years agoResolution: --- → FIXED

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=819635#a990199_132034)• 12 years ago |

[status-firefox20](/buglist.cgi?f1=cf_status_firefox20&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox20&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox20&o1=equals&v1=fixed)

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Comment 24](/show_bug.cgi?id=819635#c24)• 12 years ago |
|  | |

You need to request approval-aurora or something like that on the patch, then fill out the little form that pops up. Once you get approval, you can land it on Aurora.

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=819635#a990718_132034)• 12 years ago |

[Attachment #693123](/attachment.cgi?id=693123&action=edit "Fix") -
Flags: checkin+

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)  Reporter |  |
| --- | --- | --- |
| [Comment 25](/show_bug.cgi?id=819635#c25)• 12 years ago |
|  | |

> Yes. Actually, sec-approval first because this affects the branches. I think
> next time we should request for sec-approval first before landing on m-c.
(That said, it's too late for requesting sec-approval now since it's already landed)

|  | [Kannan Vijayan [:djvj]](/user_profile?user_id=436087)  Assignee |  |
| --- | --- | --- |
| [Comment 26](/show_bug.cgi?id=819635#c26)• 12 years ago |
|  | |

Comment on [attachment 693123](/attachment.cgi?id=693123 "Fix") [[details]](/attachment.cgi?id=693123&action=edit "Fix") [[diff]](/attachment.cgi?id=693123&action=diff "Fix") [[review]](/page.cgi?id=splinter.html&ignore=&bug=819635&attachment=693123)
Fix
[Security approval request comment]
How easily could an exploit be constructed based on the patch?
Pretty difficult but doable - force a script to become repeatedly invalidated, and also force repeated GCs until one occurs at the right point, freeing a JS-accessible object. Bogus object reference can now be used to write into freed memory. Exploit writer won't be able to tell if a given object refers to free memory or not, which will force them to spam this strategy across a large number of objects in the hopes that one of them ends up hitting critical memory with code in it.
Do comments in the patch, the check-in comment, or tests included in the patch paint a bulls-eye on the security problem?
No. Checkin comment does not allude in any way to the lurking security issue.
Which older supported branches are affected by this flaw?
firefox 18, 19 and 20 are affected.
If not all supported branches, which bug introduced the flaw?
Patch for [bug 750582](/show_bug.cgi?id=750582 "RESOLVED FIXED - IonMonkey: eager write on global non-writable properties. (jaeger/bug584647.js:2: Error: Assertion failed: got false, expected true)") (<https://hg.mozilla.org/mozilla-central/rev/68777651999a>)
Do you have backports for the affected branches? If not, how different, hard to create, and risky will they be?
Patch should apply cleanly to all affected branches. Low risk.
How likely is this patch to cause regressions; how much testing does it need?
Very unlikely. Needs minimal testing - the additional logic is trivial and can be reasoned to be obviously better than existing logic.
[Attachment #693123](/attachment.cgi?id=693123&action=edit "Fix") -
Flags: sec-approval?

|  | [Kannan Vijayan [:djvj]](/user_profile?user_id=436087)  Assignee |  |
| --- | --- | --- |
| [Comment 27](/show_bug.cgi?id=819635#c27)• 12 years ago |
|  | |

Comment on [attachment 693123](/attachment.cgi?id=693123 "Fix") [[details]](/attachment.cgi?id=693123&action=edit "Fix") [[diff]](/attachment.cgi?id=693123&action=diff "Fix") [[review]](/page.cgi?id=splinter.html&ignore=&bug=819635&attachment=693123)
Fix
I guess sec-approval is somewhat pointless now.
[Attachment #693123](/attachment.cgi?id=693123&action=edit "Fix") -
Flags: sec-approval?

|  | [Kannan Vijayan [:djvj]](/user_profile?user_id=436087)  Assignee |  |
| --- | --- | --- |
| [Comment 28](/show_bug.cgi?id=819635#c28)• 12 years ago |
|  | |

Browsed through the beta source tree and the problem is present there.
[status-firefox18](/buglist.cgi?f1=cf_status_firefox18&o1=isnotempty):
[unaffected](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=unaffected) → [affected](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=affected)

|  | [Kannan Vijayan [:djvj]](/user_profile?user_id=436087)  Assignee |  |
| --- | --- | --- |
| [Comment 29](/show_bug.cgi?id=819635#c29)• 12 years ago |
|  | |

Comment on [attachment 693123](/attachment.cgi?id=693123 "Fix") [[details]](/attachment.cgi?id=693123&action=edit "Fix") [[diff]](/attachment.cgi?id=693123&action=diff "Fix") [[review]](/page.cgi?id=splinter.html&ignore=&bug=819635&attachment=693123)
Fix
[Approval Request Comment]
Bug caused by (feature/regressing bug #):
[Bug 750582](/show_bug.cgi?id=750582 "RESOLVED FIXED - IonMonkey: eager write on global non-writable properties. (jaeger/bug584647.js:2: Error: Assertion failed: got false, expected true)") (<https://hg.mozilla.org/mozilla-central/rev/68777651999a>)
User impact if declined:
Security issue. Difficult to exploit, but if successful, attacker may be able to write arbitrary data into freed memory.
Testing completed (on m-c, etc.):
Green on m-c.
Risk to taking this patch (and alternatives if risky):
Low risk. Additional logic is trivial.
String or UUID changes made by this patch:
None.
[Attachment #693123](/attachment.cgi?id=693123&action=edit "Fix") -
Flags: approval-mozilla-beta?
[Attachment #693123](/attachment.cgi?id=693123&action=edit "Fix") -
Flags: approval-mozilla-aurora?

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=819635#a995052_132034)• 12 years ago |

[tracking-firefox18](/buglist.cgi?f1=cf_tracking_firefox18&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox18&o1=equals&v1=%3F)

|  | [Ed Morley [:emorley]](/user_profile?user_id=373476) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=819635#a995675_373476)• 12 years ago |

Target Milestone: --- → mozilla20

|  | [bhavana bajaj [:bajaj]](/user_profile?user_id=448925) |  |
| --- | --- | --- |
| [Comment 30](/show_bug.cgi?id=819635#c30)• 12 years ago |
|  | |

Comment on [attachment 693123](/attachment.cgi?id=693123 "Fix") [[details]](/attachment.cgi?id=693123&action=edit "Fix") [[diff]](/attachment.cgi?id=693123&action=diff "Fix") [[review]](/page.cgi?id=splinter.html&ignore=&bug=819635&attachment=693123)
Fix
Low risk enough to take it on Aurora 19.Approving
[Attachment #693123](/attachment.cgi?id=693123&action=edit "Fix") -
Flags: approval-mozilla-aurora? → approval-mozilla-aurora+

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=819635#a1153744_132034)• 12 years ago |

Keywords: [checkin-needed](/buglist.cgi?keywords=checkin-needed&resolution=---)

|  | [Alex Keybl [:akeybl]](/user_profile?user_id=425645) |  |
| --- | --- | --- |
| [Comment 31](/show_bug.cgi?id=819635#c31)• 12 years ago |
|  | |

Comment on [attachment 693123](/attachment.cgi?id=693123 "Fix") [[details]](/attachment.cgi?id=693123&action=edit "Fix") [[diff]](/attachment.cgi?id=693123&action=diff "Fix") [[review]](/page.cgi?id=splinter.html&ignore=&bug=819635&attachment=693123)
Fix
Given the lack of visibility around this issue, the difficulty to exploit, the fact that this was reported internally, and the fact that this would appear for the first time in our final beta, we won't take this for Firefox 18.
[Attachment #693123](/attachment.cgi?id=693123&action=edit "Fix") -
Flags: approval-mozilla-beta? → approval-mozilla-beta-

|  | [Alex Keybl [:akeybl]](/user_profile?user_id=425645) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=819635#a1157674_425645)• 12 years ago |

[status-firefox18](/buglist.cgi?f1=cf_status_firefox18&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=wontfix)
[tracking-firefox18](/buglist.cgi?f1=cf_tracking_firefox18&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox18&o1=equals&v1=%3F) → [-](/buglist.cgi?f1=cf_tracking_firefox18&o1=equals&v1=-)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 32](/show_bug.cgi?id=819635#c32)• 12 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-aurora/rev/e665dd1df75d>
<https://hg.mozilla.org/releases/mozilla-aurora/rev/f29f629b3699>
[status-firefox19](/buglist.cgi?f1=cf_status_firefox19&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=fixed)Keywords: [checkin-needed](/buglist.cgi?keywords=checkin-needed&resolution=---)

|  | [David Anderson [:dvander] - inactive, e-mail if emergency](/user_profile?user_id=309316) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=819635#a4014869_309316)• 12 years ago |

[status-b2g18](/buglist.cgi?f1=cf_status_b2g18&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=unaffected)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=819635#a5903489_280903)• 12 years ago |

Whiteboard: [adv-main19+]

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=819635#a30450687_1689)• 11 years ago |

Group: core-security
You need to [log in](/show_bug.cgi?id=819635&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from launchpad.net_4ba031cf_20250126_032103.html ===

[Log in / Register](https://bugs.launchpad.net/ubuntu/%2Bsource/thunderbird/%2Bbug/1131110/%2Blogin)

[![](https://launchpadlibrarian.net/606381979/CoF%2064px.png)](https://launchpad.net/ubuntu)

## [Ubuntu](https://launchpad.net/ubuntu)[thunderbird package](https://launchpad.net/ubuntu/%2Bsource/thunderbird)

* [Overview](https://launchpad.net/ubuntu/%2Bsource/thunderbird)
* [Code](https://code.launchpad.net/ubuntu/%2Bsource/thunderbird)
* [Bugs](https://bugs.launchpad.net/ubuntu/%2Bsource/thunderbird)
* Blueprints
* [Translations](https://translations.launchpad.net/ubuntu/%2Bsource/thunderbird)
* [Answers](https://answers.launchpad.net/ubuntu/%2Bsource/thunderbird)

# Update to 17.0.3

Bug #1131110 reported by
[Chris Coulson](https://launchpad.net/~chrisccoulson)
on 2013-02-21

[6](/%2Bhelp-bugs/bug-heat.html)

This bug affects 1 person

| Affects | | Status | Importance | Assigned to | Milestone |
| --- | --- | --- | --- | --- | --- |
|  | [thunderbird (Ubuntu)](https://bugs.launchpad.net/ubuntu/%2Bsource/thunderbird "Latest release: 1:115.18.0+build1-0ubuntu0.22.04.1, uploaded to main on 2025-01-07 12:59:11.073034+00:00 by Sebastien Bacher (seb128), maintained by Ubuntu-Mozilla-Team (ubuntu-mozillateam)") | Fix Released | Undecided | Unassigned |  |

### Bug Description

...

## Related branches

[lp:~mozillateam/thunderbird/thunderbird.quantal](https://code.launchpad.net/~mozillateam/thunderbird/thunderbird.quantal)

[lp:~mozillateam/thunderbird/thunderbird.precise](https://code.launchpad.net/~mozillateam/thunderbird/thunderbird.precise)

[lp:~mozillateam/thunderbird/thunderbird.oneiric](https://code.launchpad.net/~mozillateam/thunderbird/thunderbird.oneiric)

[lp:~mozillateam/thunderbird/thunderbird.lucid](https://code.launchpad.net/~mozillateam/thunderbird/thunderbird.lucid)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Launchpad Janitor (janitor)](https://launchpad.net/~janitor) wrote on 2013-02-25: |  |  | [#1](/ubuntu/%2Bsource/thunderbird/%2Bbug/1131110/comments/1) |
| --- | --- | --- | --- |

This bug was fixed in the package thunderbird - 17.0.3+build1-0ubuntu0.12.04.1

---------------

thunderbird (17.0.3+build1-0ubuntu0.12.04.1) precise-security; urgency=low

\* New upstream stable release (THUNDERBIRD\_17\_0\_3\_BUILD1)

    - see LP: [#1131110](/bugs/1131110) for USN information

 -- Chris Coulson <email address hidden> Thu, 21 Feb 2013 09:28:07 +0000

This bug was fixed in the package thunderbird - 17.0.3+build1-0ubuntu0.12.04.1
---------------
thunderbird (17.0.3+build1-0ubuntu0.12.04.1) precise-security; urgency=low
\* New upstream stable release (THUNDERBIRD\_17\_0\_3\_BUILD1)
- see LP: #1131110 for USN information
-- Chris Coulson <chris.coulson@canonical.com> Thu, 21 Feb 2013 09:28:07 +0000

| Changed in thunderbird (Ubuntu): | |
| --- | --- |
| **status**: | New → Fix Released |

[See full activity log](https://bugs.launchpad.net/ubuntu/%2Bsource/thunderbird/%2Bbug/1131110/%2Bactivity)

To post a comment you must [log in](%2Blogin?comments=all).

* [Report a bug](/ubuntu/%2Bsource/thunderbird/%2Bfilebug)

This report contains
**Public**
information

Everyone can see this information.

You are
[not directly subscribed to this bug's notifications.](/ubuntu/%2Bsource/thunderbird/%2Bbug/1131110/%2Bsubscribe)

Subscribing...

* [Edit bug mail](https://bugs.launchpad.net/ubuntu/%2Bsource/thunderbird/%2Bbug/1131110/%2Bsubscriptions "View and change your subscriptions to this bug")

## Other bug subscribers

[Subscribe someone else](https://bugs.launchpad.net/ubuntu/%2Bsource/thunderbird/%2Bbug/1131110/%2Baddsubscriber "Launchpad will email that person whenever this bugs changes")

## Remote bug watches

Bug watches keep track of this bug in other bug trackers.

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
4d55102
([Get the code!](https://dev.launchpad.net/))



=== Content from bugzilla.mozilla.org_b2bde79f_20250124_202802.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/799907)
* [XML](/show_bug.cgi?ctype=xml&id=799907)

Closed
[Bug 799907](/show_bug.cgi?id=799907)

Opened 12 years ago
Closed 12 years ago

# IonMonkey: Assertion failure: mir->type() == MIRType\_Value, at ../ion/shared/Lowering-shared-inl.h:413 or Crash [@ js::ion::LinearScanAllocator::populateSafepoints]

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

IonMonkey: Assertion failure: mir->type() == MIRType\_Value, at ../ion/shared/Lowering-shared-inl.h:413 or Crash [@ js::ion::LinearScanAllocator::populateSafepoints]

## Categories

### (Core :: JavaScript Engine, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=JavaScript%20Engine#JavaScript%20Engine)

JavaScript Engine
▾

Core :: JavaScript Engine
The interpreter engine for the core JavaScript language, independent of the browser's object model. File ONLY core JavaScript language bugs in this category. For bugs involving browser objects such as "window" and "document", use the "DOM" component. For bugs involving calls between JavaScript and C++, use the "XPConnect" component.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=JavaScript%20Engine)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

x86

Linux

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

critical

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla19

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Performance Impact | --- |
| --- | --- |
| Webcompat Priority | --- |
| Webcompat Score | --- |
| a11y-review | --- |
| Accessibility Severity | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox18 | --- | [affected](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=affected) |
| firefox19 | --- | [fixed](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=fixed) |
| firefox-esr10 | --- | [unaffected](/buglist.cgi?f1=cf_status_esr10&o1=equals&v1=unaffected) |
| firefox-esr17 | --- | [unaffected](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=unaffected) |
| b2g18 | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=unaffected) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox18 |  | affected |
| firefox19 |  | fixed |
| firefox-esr10 |  | unaffected |
| firefox-esr17 |  | unaffected |
| b2g18 |  | unaffected |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: decoder, Assigned: dvander)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](extensions/Gravatar/web/default.jpg)  [dvander](/user_profile?user_id=309316)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

![](https://secure.gravatar.com/avatar/55857f92ded07119259dc6c1dd386205?d=mm&size=40)  [general](/user_profile?user_id=4729)

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/b29b83d12aba827b8ff68296e473bec5?d=mm&size=40)  [decoder](/user_profile?user_id=395101)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/4fe52ee1503aecf7b6c976b8eb7c1753?d=mm&size=40)  [willyelm](/user_profile?user_id=714609)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

11 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[IonFuzz](/show_bug.cgi?id=724444 "RESOLVED FIXED - [meta] IonMonkey fuzz bugs")

Dependency [tree](/showdependencytree.cgi?id=799907&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=799907)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (4 keywords, Whiteboard: [jsbugmon:update][ion:p1][adv-main19+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[assertion](/buglist.cgi?keywords=assertion&resolution=---),
[crash](/buglist.cgi?keywords=crash&resolution=---),
[sec-critical](/buglist.cgi?keywords=sec-critical&resolution=---),
[testcase](/buglist.cgi?keywords=testcase&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[jsbugmon:update][ion:p1][adv-main19+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [u279076](/user_profile?user_id=279076) | [in-testsuite](#c9 "12 years ago") | ? |
| --- | --- | --- |
| [u279076](/user_profile?user_id=279076) | in-testsuite | ? |
| --- | --- | --- |
|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | qe-verify |  |

## Crash Data

Signature:

[[@ js::ion::LinearScanAllocator::populateSafepoints ]](https://crash-stats.mozilla.org/signature/?signature=js%3A%3Aion%3A%3ALinearScanAllocator%3A%3ApopulateSafepoints)

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (2 files)

| [Testcase for shell](/attachment.cgi?id=669924)  [12 years ago](#c0)  [Christian Holler (:decoder)](/user_profile?user_id=395101)   2.22 KB, application/javascript |  | [Details](/attachment.cgi?id=669924&action=edit) |
| --- | --- | --- |
| [fix](/attachment.cgi?id=670163)  [12 years ago](#c3)  [David Anderson [:dvander] - inactive, e-mail if emergency](/user_profile?user_id=309316)   1.18 KB, patch | djvj : [review+](#a39060_436087 "12 years ago") | [Details](/attachment.cgi?id=670163&action=edit) | [Diff](/attachment.cgi?id=670163&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=799907&attachment=670163) |

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=799907#c0)• 12 years ago |
|  | |

Attached file
[Testcase for shell](attachment.cgi?id=669924)
— [Details](attachment.cgi?id=669924&action=edit)

The attached testcase asserts on mozilla-central revision ec10630b1a54 (run with --ion-eager).

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=799907#c1)• 12 years ago |
|  | |

Crash trace from opt-build:
==32163== Invalid read of size 4
==32163== at 0x83890CA: js::ion::LinearScanAllocator::populateSafepoints() (LIR.h:90)
==32163== by 0x8345128: js::ion::CompileBackEnd(js::ion::IonBuilder\*) (Ion.cpp:881)
==32163== by 0x92C0B07: ???
==32163== by 0x92BC087: ???
==32163== Address 0x1c is not stack'd, malloc'd or (recently) free'd
S-s due to GC-relatedness and fragile test.Blocks: [IonFuzz](/show_bug.cgi?id=724444 "RESOLVED FIXED - [meta] IonMonkey fuzz bugs")Crash Signature: [@ js::ion::LinearScanAllocator::populateSafepoints]Keywords: [crash](/buglist.cgi?keywords=crash&resolution=---)Summary: Assertion failure: mir->type() == MIRType\_Value, at ../ion/shared/Lowering-shared-inl.h:413 or Crash [@ js::ion::LinearScanAllocator::populateSafepoints] → IonMonkey: Assertion failure: mir->type() == MIRType\_Value, at ../ion/shared/Lowering-shared-inl.h:413 or Crash [@ js::ion::LinearScanAllocator::populateSafepoints]Whiteboard: [jsbugmon:update,bisect]

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=799907#a1841_395101)• 12 years ago |

Whiteboard: [jsbugmon:update,bisect] → [jsbugmon:update]

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=799907#c2)• 12 years ago |
|  | |

JSBugMon: Bisection requested, result:
autoBisect shows this is probably related to the following changeset:
The first bad revision is:
changeset: 109322:825de541f566
user: Kannan Vijayan
date: Fri Oct 05 00:28:36 2012 -0400
summary: [Bug 786126](/show_bug.cgi?id=786126 "RESOLVED FIXED - IonMonkey: Significant regression in dromaeo_dom") - part 3 - Allow null/undefined in typeset of target object of GetProp ICs. (r=sstangl)
This iteration took 91.551 seconds to run.

|  | [David Anderson [:dvander] - inactive, e-mail if emergency](/user_profile?user_id=309316)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=799907#a24744_309316)• 12 years ago |

Whiteboard: [jsbugmon:update] → [jsbugmon:update][ion:p1]

|  | [David Anderson [:dvander] - inactive, e-mail if emergency](/user_profile?user_id=309316)  Assignee |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=799907#c3)• 12 years ago |
|  | |

Attached patch

[fix](attachment.cgi?id=670163&action=diff)
— [Details](attachment.cgi?id=670163&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=799907&attachment=670163)

IonMonkey's type information can sometimes be more accurate than TI's; in this case TI's typeset said "value" but Ion said "Object", so the explicit unbox was asserting. GetPropertyCache has an unboxing type policy though, so we can rely on that working instead.Assignee: general → dvanderStatus: NEW → ASSIGNED
[Attachment #670163](/attachment.cgi?id=670163&action=edit "fix") -
Flags: review?

|  | [David Anderson [:dvander] - inactive, e-mail if emergency](/user_profile?user_id=309316)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=799907#a38415_309316)• 12 years ago |

[Attachment #670163](/attachment.cgi?id=670163&action=edit "fix") -
Flags: review? → review?(kvijayan)

|  | [Kannan Vijayan [:djvj]](/user_profile?user_id=436087) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=799907#a39060_436087)• 12 years ago |

[Attachment #670163](/attachment.cgi?id=670163&action=edit "fix") -
Flags: review?(kvijayan) → review+

|  | [David Anderson [:dvander] - inactive, e-mail if emergency](/user_profile?user_id=309316)  Assignee |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=799907#c4)• 12 years ago |
|  | |

<https://hg.mozilla.org/integration/mozilla-inbound/rev/80482a232127>

|  | [Sean Stangl [:sstangl]](/user_profile?user_id=383201) |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=799907#c5)• 12 years ago |
|  | |

(In reply to David Anderson [:dvander] from [comment #3](/show_bug.cgi?id=799907#c3 "VERIFIED FIXED - IonMonkey: Assertion failure: mir->type() == MIRType_Value, at ../ion/shared/Lowering-shared-inl.h:413 or Crash [@ js::ion::LinearScanAllocator::populateSafepoints]"))
> Created [attachment 670163](/attachment.cgi?id=670163 "fix") [[details]](/attachment.cgi?id=670163&action=edit "fix") [[diff]](/attachment.cgi?id=670163&action=diff "fix") [[review]](/page.cgi?id=splinter.html&ignore=&bug=799907&attachment=670163)
> fix
>
> IonMonkey's type information can sometimes be more accurate than TI's; in
> this case TI's typeset said "value" but Ion said "Object", so the explicit
> unbox was asserting. GetPropertyCache has an unboxing type policy though, so
> we can rely on that working instead.
Another problem here is that we're looking at obj->type() to determine the type of a MIR node -- when it is actually a redundant MPhi of (Object, Object), but during the IonBuilder phase it is typed as MIRType\_Value. It's another one of those situations where we're looking at the MIR in order to build the MIR.
It's safe to just remove the erroneous condition, since it's redundant.

|  | [Ed Morley [:emorley]](/user_profile?user_id=373476) |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=799907#c6)• 12 years ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/80482a232127>Status: ASSIGNED → RESOLVEDClosed: 12 years ago
[status-firefox18](/buglist.cgi?f1=cf_status_firefox18&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=affected)
[status-firefox19](/buglist.cgi?f1=cf_status_firefox19&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=fixed)Resolution: --- → FIXEDTarget Milestone: --- → mozilla19

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=799907#a176908_395101)• 12 years ago |

Status: RESOLVED → VERIFIED

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=799907#c7)• 12 years ago |
|  | |

JSBugMon: This bug has been automatically verified fixed.

|  | [Alex Keybl [:akeybl]](/user_profile?user_id=425645) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=799907#a731817_425645)• 12 years ago |

[status-firefox-esr10](/buglist.cgi?f1=cf_status_esr10&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_esr10&o1=equals&v1=unaffected)

|  | [Bob Clary [:bc] (inactive)](/user_profile?user_id=23402) |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=799907#c8)• 12 years ago |
|  | |

crash automation hit this on Aurora/18 on Windows/Linux at
<https://docs.google.com/presentation/d/1FC1pyFCnK_8-2tAcPGmVUkWDginw_Okks_x0kL_OVG0/edit#slide=id.g20e781bb_0_26>

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=799907#a4364780_1689)• 12 years ago |

[status-firefox-esr17](/buglist.cgi?f1=cf_status_firefox_esr17&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=unaffected)

|  | [u279076](/user_profile?user_id=279076) |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=799907#c9)• 12 years ago |
|  | |

Can this be put in testsuite?Flags: in-testsuite?

|  | [David Anderson [:dvander] - inactive, e-mail if emergency](/user_profile?user_id=309316)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=799907#a9107560_309316)• 12 years ago |

[status-b2g18](/buglist.cgi?f1=cf_status_b2g18&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=unaffected)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=799907#c10)• 12 years ago |
|  | |

This never got a security rating. Can someone suggest one?Whiteboard: [jsbugmon:update][ion:p1] → [jsbugmon:update][ion:p1][adv-main19+]

|  | [David Anderson [:dvander] - inactive, e-mail if emergency](/user_profile?user_id=309316)  Assignee |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=799907#c11)• 12 years ago |
|  | |

This one is not really clear, it's either not exploitable at all or it's sg:critical. I'd just go with sg:critical.

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=799907#a11018864_280903)• 12 years ago |

Keywords: [sec-critical](/buglist.cgi?keywords=sec-critical&resolution=---)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=799907#a35543611_1689)• 11 years ago |

Group: core-security
You need to [log in](/show_bug.cgi?id=799907&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Christian Holler (:decoder)](/user_profile?user_id=395101)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from bugzilla.mozilla.org_16b040c8_20250124_202807.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/810169)
* [XML](/show_bug.cgi?ctype=xml&id=810169)

Closed
[Bug 810169](/show_bug.cgi?id=810169)

Opened 12 years ago
Closed 12 years ago

# JSCompartment::global\_ needs a read barrier

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

JSCompartment::global\_ needs a read barrier

## Categories

### (Core :: JavaScript Engine, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=JavaScript%20Engine#JavaScript%20Engine)

JavaScript Engine
▾

Core :: JavaScript Engine
The interpreter engine for the core JavaScript language, independent of the browser's object model. File ONLY core JavaScript language bugs in this category. For bugs involving browser objects such as "window" and "document", use the "DOM" component. For bugs involving calls between JavaScript and C++, use the "XPConnect" component.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=JavaScript%20Engine)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

unspecified

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

All

All

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

normal

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla20

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Webcompat Priority | --- |
| --- | --- |
| Performance Impact | --- |
| Accessibility Severity | --- |
| Webcompat Score | --- |
| a11y-review | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox17 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox17&o1=equals&v1=wontfix) |
| firefox18 | [-](/buglist.cgi?f1=cf_tracking_firefox18&o1=equals&v1=-) | [wontfix](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=wontfix) |
| firefox19 | [-](/buglist.cgi?f1=cf_tracking_firefox19&o1=equals&v1=-) | [fixed](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=fixed) |
| firefox20 | [-](/buglist.cgi?f1=cf_tracking_firefox20&o1=equals&v1=-) | [fixed](/buglist.cgi?f1=cf_status_firefox20&o1=equals&v1=fixed) |
| firefox-esr10 | --- | [unaffected](/buglist.cgi?f1=cf_status_esr10&o1=equals&v1=unaffected) |
| firefox-esr17 | [-](/buglist.cgi?f1=cf_tracking_firefox_esr17&o1=equals&v1=-) | [wontfix](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=wontfix) |
| b2g18 | --- | [wontfix](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=wontfix) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox17 |  | wontfix |
| firefox18 | - | wontfix |
| firefox19 | - | fixed |
| firefox20 | - | fixed |
| firefox-esr10 |  | unaffected |
| firefox-esr17 | - | wontfix |
| b2g18 |  | wontfix |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: billm, Assigned: billm)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/81db2831554209472ec9b0d5485ca1c9?d=mm&size=40)  [billm](/user_profile?user_id=389993)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

![](https://secure.gravatar.com/avatar/55857f92ded07119259dc6c1dd386205?d=mm&size=40)  [general](/user_profile?user_id=4729)

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/81db2831554209472ec9b0d5485ca1c9?d=mm&size=40)  [billm](/user_profile?user_id=389993)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/4fe52ee1503aecf7b6c976b8eb7c1753?d=mm&size=40)  [willyelm](/user_profile?user_id=714609)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

9 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

---

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Keywords: csectype-uaf, sec-critical, Whiteboard: [js:t][adv-main19+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[csectype-uaf](/buglist.cgi?keywords=csectype-uaf&resolution=---),
[sec-critical](/buglist.cgi?keywords=sec-critical&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[js:t][adv-main19+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | in-testsuite |  |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (1 file)

| [patch](/attachment.cgi?id=688041)  [12 years ago](#c2)  [Bill McCloskey [inactive unless it's an emergency] (:billm)](/user_profile?user_id=389993)   9.68 KB, patch | luke : [review+](#c3 "12 years ago")  akeybl : [approval-mozilla-aurora+](#c9 "12 years ago")  akeybl : [approval-mozilla-beta-](#c9 "12 years ago")  abillings : [sec-approval+](#a2237776_280903 "12 years ago") | [Details](/attachment.cgi?id=688041&action=edit) | [Diff](/attachment.cgi?id=688041&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=810169&attachment=688041) |
| --- | --- | --- |

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Bill McCloskey [inactive unless it's an emergency] (:billm)](/user_profile?user_id=389993)  Assignee |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=810169#c0)• 12 years ago |
|  | |

Let us have pity on this field, for it is weak.

|  | [Naveed Ihsanullah [:naveed]](/user_profile?user_id=441971) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=810169#a1013088_441971)• 12 years ago |

Whiteboard: [js:t]

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=810169#a1096558_406194)• 12 years ago |

Keywords: [csec-uaf](/buglist.cgi?keywords=csec-uaf&resolution=---),
[sec-critical](/buglist.cgi?keywords=sec-critical&resolution=---)

|  | [Josh Aas](/user_profile?user_id=18821) |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=810169#c1)• 12 years ago |
|  | |

Status update - pinged Bill, he says he will try to look into this today.

|  | [Bill McCloskey [inactive unless it's an emergency] (:billm)](/user_profile?user_id=389993)  Assignee |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=810169#c2)• 12 years ago |
|  | |

Attached patch

[patch](attachment.cgi?id=688041&action=diff)
— [Details](attachment.cgi?id=688041&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=810169&attachment=688041)

This converts the field to ReadBarriered. It also handles a potential problem where JSContext::global() might return an unrooted global.
Sorry about the code movement to inlines.h files. jscntxt.h is included before jscompartment.h, so it can't access the compartment's fields. And maybeGlobal() needs to be in an inlines file because it invokes a barrier now, and barrier code is in inline headers.
[Attachment #688041](/attachment.cgi?id=688041&action=edit "patch") -
Flags: review?(luke)

|  | [Luke Wagner [:luke]](/user_profile?user_id=347312) |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=810169#c3)• 12 years ago |
|  | |

Comment on [attachment 688041](/attachment.cgi?id=688041 "patch") [[details]](/attachment.cgi?id=688041&action=edit "patch") [[diff]](/attachment.cgi?id=688041&action=diff "patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=810169&attachment=688041)
patch
Review of [attachment 688041](/attachment.cgi?id=688041 "patch") [[details]](/attachment.cgi?id=688041&action=edit "patch") [[diff]](/attachment.cgi?id=688041&action=diff "patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=810169&attachment=688041):
-----------------------------------------------------------------
jscompartmentinlines.h is missing from the patch. Assuming it is just more moved definitions, r+.
::: js/src/jscompartment.h
@@ +560,5 @@
> JSContext::global() const
> {
> + /\*
> + \* It's safe to use |unsafeGet()| here because any compartment that is
> + \* on-stack will not be marked automatically, so there's no need for a read
s/not//
[Attachment #688041](/attachment.cgi?id=688041&action=edit "patch") -
Flags: review?(luke) → review+

|  | [Bill McCloskey [inactive unless it's an emergency] (:billm)](/user_profile?user_id=389993)  Assignee |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=810169#c4)• 12 years ago |
|  | |

Comment on [attachment 688041](/attachment.cgi?id=688041 "patch") [[details]](/attachment.cgi?id=688041&action=edit "patch") [[diff]](/attachment.cgi?id=688041&action=diff "patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=810169&attachment=688041)
patch
[Security approval request comment]
How easily can the security issue be deduced from the patch?
Not so easily. There's a single crucial line that changes a type to ReadBarriered. The rest of the patch is a fix for something that won't be a problem until we eliminate the conservative stack scanner.
Do comments in the patch, the check-in comment, or tests included in the patch paint a bulls-eye on the security problem?
No.
Which older supported branches are affected by this flaw?
The field in question was introduced in [bug 687724](/show_bug.cgi?id=687724 "RESOLVED FIXED - Per-tab reporting in about:memory") (FF16).
If not all supported branches, which bug introduced the flaw?
Do you have backports for the affected branches? If not, how different, hard to create, and risky will they be?
Backporting to 17 should be easy.
How likely is this patch to cause regressions; how much testing does it need?
Not likely to cause regressions.
[Attachment #688041](/attachment.cgi?id=688041&action=edit "patch") -
Flags: sec-approval?

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=810169#a2158559_406194)• 12 years ago |

[status-firefox-esr10](/buglist.cgi?f1=cf_status_esr10&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_esr10&o1=equals&v1=unaffected)
[status-firefox17](/buglist.cgi?f1=cf_status_firefox17&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_firefox17&o1=equals&v1=wontfix)
[status-firefox18](/buglist.cgi?f1=cf_status_firefox18&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=affected)
[status-firefox19](/buglist.cgi?f1=cf_status_firefox19&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=affected)
[status-firefox20](/buglist.cgi?f1=cf_status_firefox20&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox20&o1=equals&v1=affected)
[status-firefox-esr17](/buglist.cgi?f1=cf_status_firefox_esr17&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=affected)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=810169#a2237776_280903)• 12 years ago |

[Attachment #688041](/attachment.cgi?id=688041&action=edit "patch") -
Flags: sec-approval? → sec-approval+

|  | [Bill McCloskey [inactive unless it's an emergency] (:billm)](/user_profile?user_id=389993)  Assignee |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=810169#c5)• 12 years ago |
|  | |

<https://hg.mozilla.org/integration/mozilla-inbound/rev/d96db52bedc4>Flags: needinfo?(wmccloskey)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=810169#c6)• 12 years ago |
|  | |

Is this patch safe enough to land on 18? Or is this undiscoverable enough (seems obscure) that we can let it bake through a cycle?
[tracking-firefox18](/buglist.cgi?f1=cf_tracking_firefox18&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox18&o1=equals&v1=%3F)
[tracking-firefox19](/buglist.cgi?f1=cf_tracking_firefox19&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox19&o1=equals&v1=%2B)
[tracking-firefox20](/buglist.cgi?f1=cf_tracking_firefox20&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox20&o1=equals&v1=%2B)
[tracking-firefox-esr17](/buglist.cgi?f1=cf_tracking_firefox_esr17&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox_esr17&o1=equals&v1=%3F)

|  | [Ed Morley [:emorley]](/user_profile?user_id=373476) |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=810169#c7)• 12 years ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/d96db52bedc4>Status: NEW → RESOLVEDClosed: 12 years ago
[status-firefox20](/buglist.cgi?f1=cf_status_firefox20&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox20&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox20&o1=equals&v1=fixed)Resolution: --- → FIXEDTarget Milestone: --- → mozilla20

|  | [Bill McCloskey [inactive unless it's an emergency] (:billm)](/user_profile?user_id=389993)  Assignee |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=810169#c8)• 12 years ago |
|  | |

Comment on [attachment 688041](/attachment.cgi?id=688041 "patch") [[details]](/attachment.cgi?id=688041&action=edit "patch") [[diff]](/attachment.cgi?id=688041&action=diff "patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=810169&attachment=688041)
patch
As far as I know, [bug 743311](/show_bug.cgi?id=743311 "RESOLVED FIXED - Expose a way to list all global objects and be notified when a new global is created") (from FF19) is the first time we started relying on their being a read barrier on this field. However, it's possible I'm forgetting something; the problem could go back as far as [bug 687724](/show_bug.cgi?id=687724 "RESOLVED FIXED - Per-tab reporting in about:memory") (FF18). Also, the place where we use the field in [bug 743311](/show_bug.cgi?id=743311 "RESOLVED FIXED - Expose a way to list all global objects and be notified when a new global is created") can only be called from chrome code, which makes it less worrisome for security.
Overall, I don't think we have much to worry from this. We could take it or not on 18.
[Approval Request Comment]
Bug caused by (feature/regressing bug #): [bug 687724](/show_bug.cgi?id=687724 "RESOLVED FIXED - Per-tab reporting in about:memory") or [bug 743311](/show_bug.cgi?id=743311 "RESOLVED FIXED - Expose a way to list all global objects and be notified when a new global is created")?
User impact if declined: Possible crashes.
Testing completed (on m-c, etc.): On m-c.
Risk to taking this patch (and alternatives if risky): Low risk.
String or UUID changes made by this patch: None
[Attachment #688041](/attachment.cgi?id=688041&action=edit "patch") -
Flags: approval-mozilla-beta?
[Attachment #688041](/attachment.cgi?id=688041&action=edit "patch") -
Flags: approval-mozilla-aurora?Flags: needinfo?(wmccloskey)

|  | [Alex Keybl [:akeybl]](/user_profile?user_id=425645) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=810169#a2825846_425645)• 12 years ago |

[tracking-firefox18](/buglist.cgi?f1=cf_tracking_firefox18&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox18&o1=equals&v1=%3F) → [-](/buglist.cgi?f1=cf_tracking_firefox18&o1=equals&v1=-)
[tracking-firefox19](/buglist.cgi?f1=cf_tracking_firefox19&o1=isnotempty):
[+](/buglist.cgi?f1=cf_tracking_firefox19&o1=equals&v1=%2B) → [-](/buglist.cgi?f1=cf_tracking_firefox19&o1=equals&v1=-)
[tracking-firefox20](/buglist.cgi?f1=cf_tracking_firefox20&o1=isnotempty):
[+](/buglist.cgi?f1=cf_tracking_firefox20&o1=equals&v1=%2B) → [-](/buglist.cgi?f1=cf_tracking_firefox20&o1=equals&v1=-)
[tracking-firefox-esr17](/buglist.cgi?f1=cf_tracking_firefox_esr17&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox_esr17&o1=equals&v1=%3F) → [19+](/buglist.cgi?f1=cf_tracking_firefox_esr17&o1=equals&v1=19%2B)

|  | [Alex Keybl [:akeybl]](/user_profile?user_id=425645) |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=810169#c9)• 12 years ago |
|  | |

Comment on [attachment 688041](/attachment.cgi?id=688041 "patch") [[details]](/attachment.cgi?id=688041&action=edit "patch") [[diff]](/attachment.cgi?id=688041&action=diff "patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=810169&attachment=688041)
patch
Given that, let's land in 19/ESR17:19+ for the first time and limit risk.
[Attachment #688041](/attachment.cgi?id=688041&action=edit "patch") -
Flags: approval-mozilla-beta?
[Attachment #688041](/attachment.cgi?id=688041&action=edit "patch") -
Flags: approval-mozilla-beta-
[Attachment #688041](/attachment.cgi?id=688041&action=edit "patch") -
Flags: approval-mozilla-aurora?
[Attachment #688041](/attachment.cgi?id=688041&action=edit "patch") -
Flags: approval-mozilla-aurora+

|  | [Bill McCloskey [inactive unless it's an emergency] (:billm)](/user_profile?user_id=389993)  Assignee |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=810169#c10)• 12 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-aurora/rev/267d0c53fc6d>
Alex, I didn't understand your last comment. What does ESR17:19+ mean? Do I need to land anywhere else?

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=810169#c11)• 12 years ago |
|  | |

My understanding is that it means this should land on esr17 once Mozilla19 hits beta so that the fix is released at the same time for all builds that it landed on (in other words, we don't want an esr17 release with this fix shipping with a Mozilla18 release that doesn't).
[status-firefox18](/buglist.cgi?f1=cf_status_firefox18&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=wontfix)
[status-firefox19](/buglist.cgi?f1=cf_status_firefox19&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=fixed)

|  | [Bill McCloskey [inactive unless it's an emergency] (:billm)](/user_profile?user_id=389993)  Assignee |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=810169#c12)• 12 years ago |
|  | |

(In reply to Ryan VanderMeulen from [comment #11](/show_bug.cgi?id=810169#c11 "RESOLVED FIXED - JSCompartment::global_ needs a read barrier"))
> My understanding is that it means this should land on esr17 once Mozilla19
> hits beta so that the fix is released at the same time for all builds that
> it landed on (in other words, we don't want an esr17 release with this fix
> shipping with a Mozilla18 release that doesn't).
How will we remember to do that?

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=810169#c13)• 12 years ago |
|  | |

(Not speaking on behalf of the release drivers) Presumably that's what tracking-firefox-esr17:19+ is for.

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=810169#c14)• 12 years ago |
|  | |

Yes, I think at some later point they will ask you to land it. That's what has happened with some other sec bugs for which the landing was being held off until a later date.

|  | [Alex Keybl [:akeybl]](/user_profile?user_id=425645) |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=810169#c15)• 12 years ago |
|  | |

(In reply to Bill McCloskey (:billm) from [comment #8](/show_bug.cgi?id=810169#c8 "RESOLVED FIXED - JSCompartment::global_ needs a read barrier"))
> Comment on [attachment 688041](/attachment.cgi?id=688041 "patch") [[details]](/attachment.cgi?id=688041&action=edit "patch") [[diff]](/attachment.cgi?id=688041&action=diff "patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=810169&attachment=688041)
> patch
>
> As far as I know, [bug 743311](/show_bug.cgi?id=743311 "RESOLVED FIXED - Expose a way to list all global objects and be notified when a new global is created") (from FF19) is the first time we started
> relying on their being a read barrier on this field.
Upon further review, we'll actually wontfix for ESR17/B2G18. Sorry for the churn.
[status-b2g18](/buglist.cgi?f1=cf_status_b2g18&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=wontfix)
[status-firefox-esr17](/buglist.cgi?f1=cf_status_firefox_esr17&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=wontfix)
[tracking-firefox-esr17](/buglist.cgi?f1=cf_tracking_firefox_esr17&o1=isnotempty):
[19+](/buglist.cgi?f1=cf_tracking_firefox_esr17&o1=equals&v1=19%2B) → [-](/buglist.cgi?f1=cf_tracking_firefox_esr17&o1=equals&v1=-)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=810169#a8453999_280903)• 12 years ago |

Whiteboard: [js:t] → [js:t][adv-main19+]

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=810169#a64028312_1689)• 10 years ago |

Group: core-security
You need to [log in](/show_bug.cgi?id=810169&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Bill McCloskey [inactive unless it's an emergency] (:billm)](/user_profile?user_id=389993)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from www.mozilla.org_928d51bd_20250124_202753.html ===


## Help us improve your Mozilla experience

In addition to Cookies necessary for this site to function, we’d like your permission to set some additional Cookies to better understand your browsing needs and improve your experience. Rest assured — we value your privacy.

Accept All Additional Cookies

Reject All Additional Cookies

[Cookie settings](/en-US/privacy/websites/cookie-settings/)

Menu
[![Mozilla](https://www.mozilla.org/media/img/logos/m24/lockup-black.f2ddba3f0724.svg)](/en-US/)

* [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
  Firefox browsers](/en-US/firefox/)
  Close Firefox browsers menu
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for Desktop](/en-US/firefox/new/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for iOS](/en-US/firefox/browsers/mobile/ios/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for Android](/en-US/firefox/browsers/mobile/android/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/focus/logo.aac3e33175cb.svg)
    ## Firefox Focus](/en-US/firefox/browsers/mobile/focus/)
  + [## Firefox blog](https://blog.mozilla.org/firefox/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=firefox)
* [Products](/en-US/products/)
  Close Products menu
  + [![](https://www.mozilla.org/media/protocol/img/logos/mozilla/vpn/logo.c648f487bfb8.svg)
    ## Mozilla VPN](/en-US/products/vpn/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/monitor/logo.d97e5516f9e6.svg)
    ## Mozilla Monitor](https://monitor.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/relay/logo-white.d42a8b52e44c.svg)
    ## Firefox Relay](https://relay.firefox.com/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/protocol/img/logos/pocket/logo.17446bc33a5d.svg)
    ## Pocket](https://getpocket.com/firefox_learnmore/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/nav/icons/icon-mdn-plus.f54475f980ab.svg)
    ## MDN Plus](https://developer.mozilla.org/plus?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/logos/fakespot/logo-blue.3973b8fe9631.svg)
    ## Fakespot](https://fakespot.com/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/logos/thunderbird/logo-thunderbird.121e9c0fed45.svg)
    ## Thunderbird](https://www.thunderbird.net/)

  [All products](/en-US/products/)
* [About us](/en-US/about/)
  Close About us menu

  Our Mission

  + [## About Mozilla](/en-US/about/)
  + [## The Mozilla Manifesto](/en-US/about/manifesto/)
  + [## Get Involved](/en-US/contribute/)
  + [## Innovation Projects](https://future.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Blog](https://blog.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)

  Our Work

  + [## Mozilla Foundation](https://foundation.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla.ai](https://www.mozilla.ai/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla Ventures](https://mozilla.vc/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla Advertising](/en-US/advertising/)

## Menu

* Mozilla Security

## [Mozilla Security](/en-US/security/)

* [Advisories](/en-US/security/advisories/)
* [Known Vulnerabilities](/en-US/security/known-vulnerabilities/)
* [Mozilla Security Blog](https://blog.mozilla.com/security/)
* [Security Bug Bounty](/en-US/security/bug-bounty/)
* [Third-party Injection Policy](/en-US/security/third-party-software-injection/)

## [Client Bug Bounty](/en-US/security/client-bug-bounty/)

* [Frequently Asked Questions](/en-US/security/bug-bounty/faq/)
* [Hall of Fame](/en-US/security/bug-bounty/hall-of-fame/)

## [Web Bug Bounty](/en-US/security/web-bug-bounty/)

* [Eligible Websites](/en-US/security/bug-bounty/web-eligible-sites/)
* [Frequently Asked Questions](/en-US/security/bug-bounty/faq-webapp/)
* [Hall of Fame](/en-US/security/bug-bounty/web-hall-of-fame/)

# Mozilla Foundation Security Advisory 2013-21

## Miscellaneous memory safety hazards (rv:19.0 / rv:17.0.3)

Announced
February 19, 2013
Reporter
Mozilla Developers
Impact
Critical
Products
Firefox, Firefox ESR, SeaMonkey, Thunderbird, Thunderbird ESR
Fixed in

* Firefox 19
* Firefox ESR 17.0.3
* SeaMonkey 2.16
* Thunderbird 17.0.3
* Thunderbird ESR 17.0.3

### Description

Mozilla developers identified and fixed several memory safety bugs in the
browser engine used in Firefox and other Mozilla-based products. Some of these
bugs showed evidence of memory corruption under certain circumstances, and we
presume that with enough effort at least some of these could be exploited to run
arbitrary code.

In general these flaws cannot be exploited through email in the
Thunderbird and SeaMonkey products because scripting is disabled, but are
potentially a risk in browser or browser-like contexts in those products.

### References

Olli Pettay, Christoph Diehl, Gary Kwong, Jesse Ruderman, Andrew McCreight,
Joe Drew, and Wayne Mery reported memory safety problems and crashes that affect
Firefox ESR 17, and Firefox 18.

* [Memory safety bugs fixed in Firefox ESR 17.0.3, and Firefox 19](https://bugzilla.mozilla.org/buglist.cgi?bug_id=830975,832162,822858,761448,812380,690970,826471,830399,818241,780549) ([CVE-2013-0783](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-0783))

Alon Zakai, Christian Holler, Gary Kwong, Jesse Ruderman, Luke Wagner,
Terrence Cole, Timothy Nikkel, Olli Pettay, Bill McCloskey, and Nicolas Pierron
reported memory safety problems and crashes that affect Firefox 18.

* [Memory safety bugs fixed in Firefox 19](https://bugzilla.mozilla.org/buglist.cgi?bug_id=830943,799803,799907,819635,766452,827687,805294,801114,790373,809295,810169,797977) ([CVE-2013-0784](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-0784))

## Company

* [Leadership](/about/leadership/)
* [Press Center](https://blog.mozilla.org/category/mozilla/news/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=company)
* [Careers](/en-US/careers/)
* [Contact](/en-US/contact/)

## Support

* [Product Help](https://support.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)
* [File a Bug](https://bugzilla.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)
* [Localize Mozilla](https://pontoon.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)

## Resources

* [Advertise with Mozilla](/en-US/advertising/)
* [Firefox Release Notes](/firefox/134.0.2/releasenotes/)

## Developers

* [Developer Edition](/en-US/firefox/developer/)
* [Enterprise](/en-US/firefox/enterprise/)
* [Tools](https://firefox-source-docs.mozilla.org/devtools-user/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=developers)
* [MDN](https://developer.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer)

## Follow @Mozilla

* [X (formerly Twitter) (@mozilla)](https://twitter.com/mozilla)
* [Instagram (@mozilla)](https://www.instagram.com/mozilla/)
* [LinkedIn (@mozilla)](https://www.linkedin.com/company/mozilla-corporation/)
* [TikTok (@mozilla)](https://www.tiktok.com/%40mozilla)
* [Spotify (@mozilla)](https://open.spotify.com/show/0vT7LJMeVDxyQ2ZamHKu08?si=_uDRD6bRR_6M5YZyISGXgA)

## Follow @Firefox

* [X (formerly Twitter) (@firefox)](https://twitter.com/firefox)
* [Instagram (@firefox)](https://www.instagram.com/firefox/)
* [YouTube (@firefoxchannel)](https://www.youtube.com/user/firefoxchannel)
* [TikTok (@firefox)](https://www.tiktok.com/%40firefox)

[Donate](https://foundation.mozilla.org/?form=moco-donate-footer)

Visit [Mozilla Corporation’s](/en-US/) not-for-profit parent, the [Mozilla Foundation](https://foundation.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer).

Portions of this content are ©1998–2025 by individual mozilla.org contributors. Content available under a [Creative Commons license](/en-US/foundation/licensing/website-content/).

* [Website Privacy Notice](/en-US/privacy/websites/)
* [Cookies](/en-US/privacy/websites/cookie-settings/)
* [Legal](/en-US/about/legal/)
* [Community Participation Guidelines](/en-US/about/governance/policies/participation/)
* [About this site](/en-US/about/this-site/)

![](https://www.mozilla.org/media/img/logos/m24/wordmark-white.2d673bb5b33a.svg)



=== Content from bugzilla.mozilla.org_33eead91_20250124_202803.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/801114)
* [XML](/show_bug.cgi?ctype=xml&id=801114)

Closed
[Bug 801114](/show_bug.cgi?id=801114)

Opened 12 years ago
Closed 12 years ago

# JSDebugErrorHook could trigger GC out of OOM handler

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

JSDebugErrorHook could trigger GC out of OOM handler

## Categories

### (Core :: JavaScript Engine, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=JavaScript%20Engine#JavaScript%20Engine)

JavaScript Engine
▾

Core :: JavaScript Engine
The interpreter engine for the core JavaScript language, independent of the browser's object model. File ONLY core JavaScript language bugs in this category. For bugs involving browser objects such as "window" and "document", use the "DOM" component. For bugs involving calls between JavaScript and C++, use the "XPConnect" component.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=JavaScript%20Engine)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

All

All

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

normal

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla19

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Accessibility Severity | --- |
| --- | --- |
| a11y-review | --- |
| Webcompat Score | --- |
| Performance Impact | --- |
| Webcompat Priority | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox19 | --- | [fixed](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=fixed) |
| firefox-esr10 | --- | [wontfix](/buglist.cgi?f1=cf_status_esr10&o1=equals&v1=wontfix) |
| firefox-esr17 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=wontfix) |
| b2g18 | --- | [wontfix](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=wontfix) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox19 |  | fixed |
| firefox-esr10 |  | wontfix |
| firefox-esr17 |  | wontfix |
| b2g18 |  | wontfix |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: terrence, Assigned: terrence)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/045baa1e1ab4c1401b5ee569f11eaabf?d=mm&size=40)  [terrence](/user_profile?user_id=231770)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

![](https://secure.gravatar.com/avatar/55857f92ded07119259dc6c1dd386205?d=mm&size=40)  [general](/user_profile?user_id=4729)

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/045baa1e1ab4c1401b5ee569f11eaabf?d=mm&size=40)  [terrence](/user_profile?user_id=231770)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/4fe52ee1503aecf7b6c976b8eb7c1753?d=mm&size=40)  [willyelm](/user_profile?user_id=714609)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

5 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

---

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Keywords: sec-audit, Whiteboard: [adv-main19+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[sec-audit](/buglist.cgi?keywords=sec-audit&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[adv-main19+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [RyanVM](/user_profile?user_id=75935) | [in-testsuite](#c4 "12 years ago") | + |
| --- | --- | --- |
| [RyanVM](/user_profile?user_id=75935) | in-testsuite | + |
| --- | --- | --- |
|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (1 file)

| [v0](/attachment.cgi?id=672830)  [12 years ago](#c2)  [Terrence Cole [:terrence]](/user_profile?user_id=231770)   1.51 KB, patch | billm : [review+](#a528518_389993 "12 years ago") | [Details](/attachment.cgi?id=672830&action=edit) | [Diff](/attachment.cgi?id=672830&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=801114&attachment=672830) |
| --- | --- | --- |

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Terrence Cole [:terrence]](/user_profile?user_id=231770)  Assignee |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=801114#c0)• 12 years ago |
|  | |

SpiderMonkey's GC is not prepared to handle this case.
The JSDebugErrorHook is only used by JSD, which is only used by Firebug. We need to ensure that Firebug does nothing that could trigger GC in this path (including running any JS code). We should remove this callback from the OOM path for future versions. Since there isn't much of anything useful that Firebug (or anyone) could do with an OOM callback, I doubt this will be problematic.
Honza, do you see any problems from Firebug's perspective if we just remove this callback from js\_ReportOutOfMemory?

|  | [Jan Honza Odvarko [:Honza] (always need-info? me)](/user_profile?user_id=303767) |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=801114#c1)• 12 years ago |
|  | |

(In reply to Terrence Cole [:terrence] from [comment #0](/show_bug.cgi?id=801114#c0 "RESOLVED FIXED - JSDebugErrorHook could trigger GC out of OOM handler"))
> SpiderMonkey's GC is not prepared to handle this case.
>
> The JSDebugErrorHook is only used by JSD, which is only used by Firebug. We
> need to ensure that Firebug does nothing that could trigger GC in this path
> (including running any JS code).
Firebug's onError hook is here
<https://github.com/firebug/firebug/blob/master/extension/modules/firebug-service.js#L2173>
I don't know how to test that GC is triggered within the hook.
The hook doesn't do anything special except of iterating possible error breakpoints (it's the enumerateErrorBreakpoints call) and setting a flag if Firebug should break in consequent onDebug hook.
> We should remove this callback from the OOM path for future versions.
> Since there isn't much of anything useful
> that Firebug (or anyone) could do with an OOM callback, I doubt this will be
> problematic.
>
> Honza, do you see any problems from Firebug's perspective if we just remove
> this callback from js\_ReportOutOfMemory?
Firebug actually uses a condition, see:
<https://github.com/firebug/firebug/blob/master/extension/modules/firebug-service.js#L2221>
...to ignore the hook and bail out (not drop into onDebug) if message passed into onError is equal to "out of memory" so, I think it can be safely removed for this case.
I suppose that the hook still works for the other JS errors.
Honza

|  | [Terrence Cole [:terrence]](/user_profile?user_id=231770)  Assignee |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=801114#c2)• 12 years ago |
|  | |

Attached patch

[v0](attachment.cgi?id=672830&action=diff)
— [Details](attachment.cgi?id=672830&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=801114&attachment=672830)

(In reply to Jan Honza Odvarko from [comment #1](/show_bug.cgi?id=801114#c1 "RESOLVED FIXED - JSDebugErrorHook could trigger GC out of OOM handler"))
> (In reply to Terrence Cole [:terrence] from [comment #0](/show_bug.cgi?id=801114#c0 "RESOLVED FIXED - JSDebugErrorHook could trigger GC out of OOM handler"))
> > SpiderMonkey's GC is not prepared to handle this case.
> >
> > The JSDebugErrorHook is only used by JSD, which is only used by Firebug. We
> > need to ensure that Firebug does nothing that could trigger GC in this path
> > (including running any JS code).
> Firebug's onError hook is here
> <https://github.com/firebug/firebug/blob/master/extension/modules/firebug>-
> service.js#L2173
>
> I don't know how to test that GC is triggered within the hook.
There is JS code running, so it is already too late. :-)
> The hook doesn't do anything special except of iterating possible error
> breakpoints (it's the enumerateErrorBreakpoints call) and setting a flag if
> Firebug should break in consequent onDebug hook.
>
> > We should remove this callback from the OOM path for future versions.
> > Since there isn't much of anything useful
> > that Firebug (or anyone) could do with an OOM callback, I doubt this will be
> > problematic.
> >
> > Honza, do you see any problems from Firebug's perspective if we just remove
> > this callback from js\_ReportOutOfMemory?
> Firebug actually uses a condition, see:
> <https://github.com/firebug/firebug/blob/master/extension/modules/firebug>-
> service.js#L2221
>
> ...to ignore the hook and bail out (not drop into onDebug) if message passed
> into onError is equal to "out of memory" so, I think it can be safely
> removed for this case.
>
> I suppose that the hook still works for the other JS errors.
You are correct. Thank you for the links!
\*\*\*\*
Bill, this only removes the JSDebugErrorHook call from OOM: it keeps the clearPendingException and errorReporter callback. I /think/ this is the desired behavior, even if it's not entirely sane.
[Attachment #672830](/attachment.cgi?id=672830&action=edit "v0") -
Flags: review?(wmccloskey)

|  | [Bill McCloskey [inactive unless it's an emergency] (:billm)](/user_profile?user_id=389993) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=801114#a528518_389993)• 12 years ago |

[Attachment #672830](/attachment.cgi?id=672830&action=edit "v0") -
Flags: review?(wmccloskey) → review+

|  | [Terrence Cole [:terrence]](/user_profile?user_id=231770)  Assignee |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=801114#c3)• 12 years ago |
|  | |

<https://hg.mozilla.org/integration/mozilla-inbound/rev/d1984b76a0b2>

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=801114#c4)• 12 years ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/d1984b76a0b2>Status: ASSIGNED → RESOLVEDClosed: 12 years ago
[status-firefox19](/buglist.cgi?f1=cf_status_firefox19&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=fixed)Flags: in-testsuite+Resolution: --- → FIXEDTarget Milestone: --- → mozilla19

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=801114#a1128134_1689)• 12 years ago |

[status-firefox-esr10](/buglist.cgi?f1=cf_status_esr10&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_esr10&o1=equals&v1=wontfix)Keywords: [sec-audit](/buglist.cgi?keywords=sec-audit&resolution=---)

|  | [Alex Keybl [:akeybl]](/user_profile?user_id=425645) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=801114#a4156661_425645)• 12 years ago |

[status-firefox-esr17](/buglist.cgi?f1=cf_status_firefox_esr17&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=wontfix)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=801114#a8817699_1689)• 12 years ago |

[status-b2g18](/buglist.cgi?f1=cf_status_b2g18&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=wontfix)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=801114#a10800941_280903)• 12 years ago |

Whiteboard: [adv-main19+]

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=801114#a66375568_1689)• 10 years ago |

Group: core-security
You need to [log in](/show_bug.cgi?id=801114&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Terrence Cole [:terrence]](/user_profile?user_id=231770)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from lists.opensuse.org_66774ad5_20250124_202751.html ===


[![openSUSE](https://static.opensuse.org/favicon.svg)
Mailing Lists](/archives/ "openSUSE Mailing Lists")

[Sign In](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/X3R4DH2E64OYCB4JX5F35KZPG7RSDHET/)
[Sign Up](/accounts/signup/?next=/archives/list/security-announce%40lists.opensuse.org/message/X3R4DH2E64OYCB4JX5F35KZPG7RSDHET/)

[Manage this list](/manage/lists/security-announce.lists.opensuse.org/)
[Sign In](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/X3R4DH2E64OYCB4JX5F35KZPG7RSDHET/)
[Sign Up](/accounts/signup/?next=/archives/list/security-announce%40lists.opensuse.org/message/X3R4DH2E64OYCB4JX5F35KZPG7RSDHET/)

×
#### Keyboard Shortcuts

### Thread View

* `j`: Next unread message
* `k`: Previous unread message
* `j a`: Jump to all threads* `j l`: Jump to MailingList overview

[thread](/archives/list/security-announce%40lists.opensuse.org/thread/X3R4DH2E64OYCB4JX5F35KZPG7RSDHET/#X3R4DH2E64OYCB4JX5F35KZPG7RSDHET)

# [security-announce] openSUSE-SU-2013:0323-1: important: Mozilla: February 2013 update round (Firefox 19)

![](https://seccdn.libravatar.org/avatar/099a17325bdf082b643d1a6bbacde279.jpg?s=120&d=mm&r=g)
## [opensuse-security＠opensuse.org](/archives/users/1b72def497ef4503896cd7a5fe9fb8e0/ "See the profile for opensuse-security＠opensuse.org")

22 Feb
2013

22 Feb
'13

13:04

openSUSE Security Update: Mozilla: February 2013 update round (Firefox 19)
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
Announcement ID: openSUSE-SU-2013:0323-1
Rating: important
References: #796895 #804248
Cross-References: CVE-2013-0765 CVE-2013-0772 CVE-2013-0773
CVE-2013-0774 CVE-2013-0775 CVE-2013-0776
CVE-2013-0777 CVE-2013-0778 CVE-2013-0779
CVE-2013-0780 CVE-2013-0781 CVE-2013-0782
CVE-2013-0783
Affected Products:
openSUSE 12.2
openSUSE 12.1
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
An update that fixes 13 vulnerabilities is now available.
Description:
MozillaFirefox was updated to Firefox 19.0 (bnc#804248)
MozillaThunderbird was updated to Thunderbird 17.0.3
(bnc#804248) seamonkey was updated to SeaMonkey 2.16
(bnc#804248) xulrunner was updated to 17.0.3esr
(bnc#804248) chmsee was updated to version 2.0.
Changes in MozillaFirefox 19.0:
\* MFSA 2013-21/CVE-2013-0783/2013-0784 Miscellaneous
memory safety hazards
\* MFSA 2013-22/CVE-2013-0772 (bmo#801366) Out-of-bounds
read in image rendering
\* MFSA 2013-23/CVE-2013-0765 (bmo#830614) Wrapped WebIDL
objects can be wrapped again
\* MFSA 2013-24/CVE-2013-0773 (bmo#809652) Web content
bypass of COW and SOW security wrappers
\* MFSA 2013-25/CVE-2013-0774 (bmo#827193) Privacy leak in
JavaScript Workers
\* MFSA 2013-26/CVE-2013-0775 (bmo#831095) Use-after-free
in nsImageLoadingContent
\* MFSA 2013-27/CVE-2013-0776 (bmo#796475) Phishing on
HTTPS connection through malicious proxy
\* MFSA 2013-28/CVE-2013-0780/CVE-2013-0782/CVE-2013-0777/
CVE-2013-0778/CVE-2013-0779/CVE-2013-0781
Use-after-free, out of bounds read, and buffer overflow
issues found using Address Sanitizer
- removed obsolete patches
\* mozilla-webrtc.patch
\* mozilla-gstreamer-803287.patch
- added patch to fix session restore window order
(bmo#712763)
- update to Firefox 18.0.2
\* blocklist and CTP updates
\* fixes in JS engine
- update to Firefox 18.0.1
\* blocklist updates
\* backed out bmo#677092 (removed patch)
\* fixed problems involving HTTP proxy transactions
- Fix WebRTC to build on powerpc
Changes in MozillaThunderbird:
- update to Thunderbird 17.0.3 (bnc#804248)
\* MFSA 2013-21/CVE-2013-0783 Miscellaneous memory safety
hazards
\* MFSA 2013-24/CVE-2013-0773 (bmo#809652) Web content
bypass of COW and SOW security wrappers
\* MFSA 2013-25/CVE-2013-0774 (bmo#827193) Privacy leak in
JavaScript Workers
\* MFSA 2013-26/CVE-2013-0775 (bmo#831095) Use-after-free
in nsImageLoadingContent
\* MFSA 2013-27/CVE-2013-0776 (bmo#796475) Phishing on
HTTPS connection through malicious proxy
\* MFSA 2013-28/CVE-2013-0780/CVE-2013-0782
Use-after-free, out of bounds read, and buffer overflow
issues found using Address Sanitizer
- update Enigmail to 1.5.1
\* The release fixes the regressions found in the past few
weeks
Changes in seamonkey:
- update to SeaMonkey 2.16 (bnc#804248)
\* MFSA 2013-21/CVE-2013-0783/2013-0784 Miscellaneous
memory safety hazards
\* MFSA 2013-22/CVE-2013-0772 (bmo#801366) Out-of-bounds
read in image rendering
\* MFSA 2013-23/CVE-2013-0765 (bmo#830614) Wrapped WebIDL
objects can be wrapped again
\* MFSA 2013-24/CVE-2013-0773 (bmo#809652) Web content
bypass of COW and SOW security wrappers
\* MFSA 2013-25/CVE-2013-0774 (bmo#827193) Privacy leak in
JavaScript Workers
\* MFSA 2013-26/CVE-2013-0775 (bmo#831095) Use-after-free
in nsImageLoadingContent
\* MFSA 2013-27/CVE-2013-0776 (bmo#796475) Phishing on
HTTPS connection through malicious proxy
\* MFSA 2013-28/CVE-2013-0780/CVE-2013-0782/CVE-2013-0777/
CVE-2013-0778/CVE-2013-0779/CVE-2013-0781
Use-after-free, out of bounds read, and buffer overflow
issues found using Address Sanitizer
- removed obsolete patches
\* mozilla-webrtc.patch
\* mozilla-gstreamer-803287.patch
- update to SeaMonkey 2.15.2
\* Applications could not be removed from the "Application
details" dialog under Preferences, Helper Applications
(bmo#826771).
\* View / Message Body As could show menu items out of
context (bmo#831348)
- update to SeaMonkey 2.15.1
\* backed out bmo#677092 (removed patch)
\* fixed problems involving HTTP proxy transactions
- backed out restartless language packs as it broke
multi-locale setup (bmo#677092, bmo#818468)
Changes in xulrunner:
- update to 17.0.3esr (bnc#804248)
\* MFSA 2013-21/CVE-2013-0783 Miscellaneous memory safety
hazards
\* MFSA 2013-24/CVE-2013-0773 (bmo#809652) Web content
bypass of COW and SOW security wrappers
\* MFSA 2013-25/CVE-2013-0774 (bmo#827193) Privacy leak in
JavaScript Workers
\* MFSA 2013-26/CVE-2013-0775 (bmo#831095) Use-after-free
in nsImageLoadingContent
\* MFSA 2013-27/CVE-2013-0776 (bmo#796475) Phishing on
HTTPS connection through malicious proxy
\* MFSA 2013-28/CVE-2013-0780/CVE-2013-0782
Use-after-free, out of bounds read, and buffer overflow
issues found using Address Sanitizer
Patch Instructions:
To install this openSUSE Security Update use YaST online\_update.
Alternatively you can run the command listed for your product:
- openSUSE 12.2:
zypper in -t patch openSUSE-2013-141
- openSUSE 12.1:
zypper in -t patch openSUSE-2013-141
To bring your system up-to-date, use "zypper patch".
Package List:
- openSUSE 12.2 (i586 x86\_64):
MozillaFirefox-19.0-2.33.1
MozillaFirefox-branding-upstream-19.0-2.33.1
MozillaFirefox-buildsymbols-19.0-2.33.1
MozillaFirefox-debuginfo-19.0-2.33.1
MozillaFirefox-debugsource-19.0-2.33.1
MozillaFirefox-devel-19.0-2.33.1
MozillaFirefox-translations-common-19.0-2.33.1
MozillaFirefox-translations-other-19.0-2.33.1
MozillaThunderbird-17.0.3-49.31.1
MozillaThunderbird-buildsymbols-17.0.3-49.31.1
MozillaThunderbird-debuginfo-17.0.3-49.31.1
MozillaThunderbird-debugsource-17.0.3-49.31.1
MozillaThunderbird-devel-17.0.3-49.31.1
MozillaThunderbird-devel-debuginfo-17.0.3-49.31.1
MozillaThunderbird-translations-common-17.0.3-49.31.1
MozillaThunderbird-translations-other-17.0.3-49.31.1
chmsee-2.0-2.14.3
chmsee-debuginfo-2.0-2.14.3
chmsee-debugsource-2.0-2.14.3
enigmail-1.5.1+17.0.3-49.31.1
enigmail-debuginfo-1.5.1+17.0.3-49.31.1
mozilla-js-17.0.3-2.30.1
mozilla-js-debuginfo-17.0.3-2.30.1
seamonkey-2.16-2.34.2
seamonkey-debuginfo-2.16-2.34.2
seamonkey-debugsource-2.16-2.34.2
seamonkey-dom-inspector-2.16-2.34.2
seamonkey-irc-2.16-2.34.2
seamonkey-translations-common-2.16-2.34.2
seamonkey-translations-other-2.16-2.34.2
seamonkey-venkman-2.16-2.34.2
xulrunner-17.0.3-2.30.1
xulrunner-buildsymbols-17.0.3-2.30.1
xulrunner-debuginfo-17.0.3-2.30.1
xulrunner-debugsource-17.0.3-2.30.1
xulrunner-devel-17.0.3-2.30.1
xulrunner-devel-debuginfo-17.0.3-2.30.1
- openSUSE 12.2 (x86\_64):
mozilla-js-32bit-17.0.3-2.30.1
mozilla-js-debuginfo-32bit-17.0.3-2.30.1
xulrunner-32bit-17.0.3-2.30.1
xulrunner-debuginfo-32bit-17.0.3-2.30.1
- openSUSE 12.1 (i586 x86\_64):
MozillaFirefox-19.0-2.62.1
MozillaFirefox-branding-upstream-19.0-2.62.1
MozillaFirefox-buildsymbols-19.0-2.62.1
MozillaFirefox-debuginfo-19.0-2.62.1
MozillaFirefox-debugsource-19.0-2.62.1
MozillaFirefox-devel-19.0-2.62.1
MozillaFirefox-translations-common-19.0-2.62.1
MozillaFirefox-translations-other-19.0-2.62.1
MozillaThunderbird-17.0.3-33.51.1
MozillaThunderbird-buildsymbols-17.0.3-33.51.1
MozillaThunderbird-debuginfo-17.0.3-33.51.1
MozillaThunderbird-debugsource-17.0.3-33.51.1
MozillaThunderbird-devel-17.0.3-33.51.1
MozillaThunderbird-devel-debuginfo-17.0.3-33.51.1
MozillaThunderbird-translations-common-17.0.3-33.51.1
MozillaThunderbird-translations-other-17.0.3-33.51.1
chmsee-2.0-2.32.3
chmsee-debuginfo-2.0-2.32.3
chmsee-debugsource-2.0-2.32.3
enigmail-1.5.1+17.0.3-33.51.1
enigmail-debuginfo-1.5.1+17.0.3-33.51.1
mozilla-js-17.0.3-2.57.1
mozilla-js-debuginfo-17.0.3-2.57.1
seamonkey-2.16-2.53.1
seamonkey-debuginfo-2.16-2.53.1
seamonkey-debugsource-2.16-2.53.1
seamonkey-dom-inspector-2.16-2.53.1
seamonkey-irc-2.16-2.53.1
seamonkey-translations-common-2.16-2.53.1
seamonkey-translations-other-2.16-2.53.1
seamonkey-venkman-2.16-2.53.1
xulrunner-17.0.3-2.57.1
xulrunner-buildsymbols-17.0.3-2.57.1
xulrunner-debuginfo-17.0.3-2.57.1
xulrunner-debugsource-17.0.3-2.57.1
xulrunner-devel-17.0.3-2.57.1
xulrunner-devel-debuginfo-17.0.3-2.57.1
- openSUSE 12.1 (x86\_64):
mozilla-js-32bit-17.0.3-2.57.1
mozilla-js-debuginfo-32bit-17.0.3-2.57.1
xulrunner-32bit-17.0.3-2.57.1
xulrunner-debuginfo-32bit-17.0.3-2.57.1
- openSUSE 12.1 (ia64):
mozilla-js-debuginfo-x86-17.0.3-2.57.1
mozilla-js-x86-17.0.3-2.57.1
xulrunner-debuginfo-x86-17.0.3-2.57.1
xulrunner-x86-17.0.3-2.57.1
References:
<http://support.novell.com/security/cve/CVE-2013-0765.html>
<http://support.novell.com/security/cve/CVE-2013-0772.html>
<http://support.novell.com/security/cve/CVE-2013-0773.html>
<http://support.novell.com/security/cve/CVE-2013-0774.html>
<http://support.novell.com/security/cve/CVE-2013-0775.html>
<http://support.novell.com/security/cve/CVE-2013-0776.html>
<http://support.novell.com/security/cve/CVE-2013-0777.html>
<http://support.novell.com/security/cve/CVE-2013-0778.html>
<http://support.novell.com/security/cve/CVE-2013-0779.html>
<http://support.novell.com/security/cve/CVE-2013-0780.html>
<http://support.novell.com/security/cve/CVE-2013-0781.html>
<http://support.novell.com/security/cve/CVE-2013-0782.html>
<http://support.novell.com/security/cve/CVE-2013-0783.html>
<https://bugzilla.novell.com/796895>
<https://bugzilla.novell.com/804248>
--
To unsubscribe, e-mail: opensuse-security-announce+unsubscribe@opensuse.org
For additional commands, e-mail: opensuse-security-announce+help@opensuse.org

[0](#like "You must be logged-in to vote.")
[0](#dislike "You must be logged-in to vote.")

Reply

[Sign in to reply online](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/X3R4DH2E64OYCB4JX5F35KZPG7RSDHET/)
Use email software

[Back to the thread](/archives/list/security-announce%40lists.opensuse.org/thread/X3R4DH2E64OYCB4JX5F35KZPG7RSDHET/#X3R4DH2E64OYCB4JX5F35KZPG7RSDHET)

[Back to the list](/archives/list/security-announce%40lists.opensuse.org/)

![HyperKitty](/static/hyperkitty/img/logo.png)
Powered by [HyperKitty](http://hyperkitty.readthedocs.org) version 1.3.12.



=== Content from blog.mozilla.org_214f5ef1_20250126_032102.html ===

[Skip to content](#content)

[Mozilla](https://blog.mozilla.org/en/)

![search](https://blog.mozilla.org/wp-content/themes/foxtail/assets/images/icons/search.svg)

* [Internet Culture](https://blog.mozilla.org/en/category/internet-culture/)
  + [Deep Dives](https://blog.mozilla.org/en/category/internet-culture/deep-dives/)
  + [Mozilla Explains](https://blog.mozilla.org/en/category/internet-culture/mozilla-explains/)
  + [Interviews](https://blog.mozilla.org/en/category/internet-culture/interviews/)
  + [Videos](https://blog.mozilla.org/en/category/videos/)
* [Privacy & Security](https://blog.mozilla.org/en/category/privacy-security/)
* [Products](https://blog.mozilla.org/en/category/products/)
  + [Firefox](https://blog.mozilla.org/en/category/products/firefox/)
  + [Pocket](https://blog.mozilla.org/en/category/products/pocket/)
  + [Mozilla VPN](https://blog.mozilla.org/en/category/products/mozilla-vpn/)
* [Mozilla](https://blog.mozilla.org/en/category/mozilla/)
  + [News](https://blog.mozilla.org/en/category/mozilla/news/)
  + [Internet Policy](https://blog.mozilla.org/en/category/mozilla/internet-policy/)
  + [Leadership](https://blog.mozilla.org/en/category/mozilla/leadership/)
    - [Mitchell Baker, CEO](https://blog.mozilla.org/en/author/mitchellmozillacom/)
    - [Mark Surman, ED Foundation](https://blog.mozilla.org/en/author/markmozillafoundation-org/)
    - [Eric Rescorla, Firefox CTO](https://blog.mozilla.org/en/author/ekrmozilla-com/)

[Download Firefox](https://www.mozilla.org/firefox/new/?utm_source=blog.mozilla.org&utm_medium=referral&utm_campaign=blog-nav)

![search](https://blog.mozilla.org/wp-content/themes/foxtail/assets/images/icons/search.svg)

#### Search

Search for:

![](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2019/01/mozilla-logo-bw-rgb.png)
## News

Official announcements and press releases

[![Room filled with people listening to a speaker on stage. Demo Day visual image in the background.](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/12/Demo_Day_Blog_Header_-1-800x800.jpg)
Mozilla
## Mozilla Builders: Celebrating community-driven innovation in AI

Read More](https://blog.mozilla.org/en/mozilla/mozilla-builders-demo-day/)

[![The Mozilla logo in green on a black background](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/12/logo-lockup-video-poster-800x800.png)
Mozilla
## Mozilla welcomes new executive team members

Read More](https://blog.mozilla.org/en/mozilla/new-executives/)

[![Decorative image of wrapped gifts in front of an iphone](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2023/11/moz_header_holiday_firefox-phone-gifts_blue-03.png-800x800.png)
Products
## Shopping for everyone? We’ve got you covered with the Fakespot Holiday Gift Guide 2024

Read More](https://blog.mozilla.org/en/products/shopping-for-everyone-weve-got-you-covered-with-the-fakespot-holiday-gift-guide-2024/)

[![Text: Mozilla Builders](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/06/Blog-16_9-1920x1080-1-800x800.png)
Mozilla
## 14 AI projects to watch: Mozilla’s first Builders Accelerator cohort kicks off

Read More](https://blog.mozilla.org/en/mozilla/14-ai-projects-to-watch-mozillas-first-builders-accelerator-cohort-kicks-off/)

[![A check mark next to the text "Fakespot."](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2023/07/Fakespot_ProductBlog-2-800x800.jpg)
News
## Fakespot’s guide to trending back-to-school products

Read More](https://blog.mozilla.org/en/mozilla/news/fakespots-guide-to-trending-back-to-school-products/)

[![](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/06/IG_Highlights_Icon-800x800.png)
Mozilla
## BAFTA Award-Winner Siobhán McSweeney to host Mozilla’s 2nd Annual Rise25 Awards in Dublin, Ireland on Aug. 13

Read More](https://blog.mozilla.org/en/mozilla/bafta-award-winner-siobhan-mcsweeney-to-host-mozillas-2nd-annual-rise25-awards-in-dublin-ireland-on-august-13/)

[![](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/05/fx_website_meta-image_tips-tricks_alt-04-1-800x800.webp)
Mozilla
## Here’s what we’re working on in Firefox

Read More](https://blog.mozilla.org/en/mozilla/heres-what-were-working-on-in-firefox/)

[![A check mark next to the text "Fakespot."](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2023/07/Fakespot_ProductBlog-2-800x800.jpg)
News
## Fakespot reveals the product categories with the most and least reliable product reviews

Read More](https://blog.mozilla.org/en/mozilla/news/fakespot-reveals-the-product-categories-with-the-most-and-least-reliable-product-reviews-for-summer-and-back-to-school-shopping/)

[![A dark blue speech bubble with horizontal purple and red bars on a pink background.](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2020/03/fx_blog_header_announcements_001_1920x1080-800x800.jpg)
Firefox
## Engaging with our Firefox community: Highlights from our recent AMA

Read More](https://blog.mozilla.org/en/products/firefox/engaging-with-our-firefox-community-highlights-from-our-recent-ama/)

[![](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/06/IG_Highlights_Icon-800x800.png)
Mozilla
## Mozilla announces finalists for the 2nd annual Rise25 Awards

Read More](https://blog.mozilla.org/en/mozilla/mozilla-announces-finalists-for-the-2nd-annual-rise25-awards/)

[![Mozilla and Anonym logos](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/06/blog_1200x800_v2-800x800.png)
Mozilla
## Introducing Anonym: Raising the bar for privacy-preserving digital advertising

Read More](https://blog.mozilla.org/en/mozilla/mozilla-anonym-raising-the-bar-for-privacy-preserving-digital-advertising/)

[![logo - zero with a diagonal line through it, and the letters D, I, N](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/06/odintbanner-500x500.png)
Mozilla
## Keeping GenAI technologies secure is a shared responsibility

Read More](https://blog.mozilla.org/en/mozilla/keeping-genai-technologies-secure-is-a-shared-responsibility/)

1
[2](https://blog.mozilla.org/en/category/mozilla/news/page/2?utm_source=www.mozilla)
[3](https://blog.mozilla.org/en/category/mozilla/news/page/3?utm_source=www.mozilla)
…
[24](https://blog.mozilla.org/en/category/mozilla/news/page/24?utm_source=www.mozilla)
[next](https://blog.mozilla.org/en/category/mozilla/news/page/2?utm_source=www.mozilla)

![newsletter](https://blog.mozilla.org/wp-content/themes/foxtail/assets/images/newsletter.png)

### Keep up with all things Firefox

Get how-tos, advice and news to make your Firefox experience work best for you.

Your e-mail address

Country
- select -
Afghanistan
Akrotiri
Albania
Algeria
American Samoa
Andorra
Angola
Anguilla
Antarctica
Antigua and Barbuda
Argentina
Armenia
Aruba
Ashmore and Cartier Islands
Australia
Austria
Azerbaijan
Bahamas, The
Bahrain
Baker Island
Bangladesh
Barbados
Bassas da India
Belarus
Belgium
Belize
Benin
Bermuda
Bhutan
Bolivia
Bonaire, Sint Eustatius, and Saba
Bosnia and Herzegovina
Botswana
Bouvet Island
Brazil
British Indian Ocean Territory
Brunei
Bulgaria
Burkina Faso
Burma
Burundi
Cabo Verde
Cambodia
Cameroon
Canada
Cayman Islands
Central African Republic
Chad
Chile
China
Christmas Island
Clipperton Island
Cocos (Keeling) Islands
Colombia
Comoros
Congo (Brazzaville)
Congo (Kinshasa)
Cook Islands
Coral Sea Islands
Costa Rica
Croatia
Cuba
Curaçao
Cyprus
Czech Republic
Côte d’Ivoire
Denmark
Dhekelia
Diego Garcia
Djibouti
Dominica
Dominican Republic
Ecuador
Egypt
El Salvador
Equatorial Guinea
Eritrea
Estonia
Ethiopia
Europa Island
Falkland Islands (Islas Malvinas)
Faroe Islands
Fiji
Finland
France
French Guiana
French Polynesia
French Southern and Antarctic Lands
Gabon
Gambia, The
Gaza Strip
Georgia
Germany
Ghana
Gibraltar
Glorioso Islands
Greece
Greenland
Grenada
Guadeloupe
Guam
Guatemala
Guernsey
Guinea
Guinea-Bissau
Guyana
Haiti
Heard Island and McDonald Islands
Honduras
Hong Kong
Howland Island
Hungary
Iceland
India
Indonesia
Iran
Iraq
Ireland
Isle of Man
Israel
Italy
Jamaica
Jan Mayen
Japan
Jarvis Island
Jersey
Johnston Atoll
Jordan
Juan de Nova Island
Kazakhstan
Kenya
Kingman Reef
Kiribati
Korea, North
Korea, South
Kosovo
Kuwait
Kyrgyzstan
Laos
Latvia
Lebanon
Lesotho
Liberia
Libya
Liechtenstein
Lithuania
Luxembourg
Macau
Macedonia
Madagascar
Malawi
Malaysia
Maldives
Mali
Malta
Marshall Islands
Martinique
Mauritania
Mauritius
Mayotte
Mexico
Micronesia, Federated States of
Midway Islands
Moldova
Monaco
Mongolia
Montenegro
Montserrat
Morocco
Mozambique
Namibia
Nauru
Navassa Island
Nepal
Netherlands
New Caledonia
New Zealand
Nicaragua
Niger
Nigeria
Niue
Norfolk Island
Northern Mariana Islands
Norway
Oman
Pakistan
Palau
Palmyra Atoll
Panama
Papua New Guinea
Paracel Islands
Paraguay
Peru
Philippines
Pitcairn Islands
Poland
Portugal
Puerto Rico
Qatar
Reunion
Romania
Russia
Rwanda
Saint Barthelemy
Saint Helena, Ascension, and Tristan da Cunha
Saint Kitts and Nevis
Saint Lucia
Saint Martin
Saint Pierre and Miquelon
Saint Vincent and the Grenadines
Samoa
San Marino
Sao Tome and Principe
Saudi Arabia
Senegal
Serbia
Seychelles
Sierra Leone
Singapore
Sint Maarten
Slovakia
Slovenia
Solomon Islands
Somalia
South Africa
South Georgia and South Sandwich Islands
South Sudan
Spain
Spratly Islands
Sri Lanka
Sudan
Suriname
Svalbard
Swaziland
Sweden
Switzerland
Syria
Taiwan
Tajikistan
Tanzania
Thailand
Timor-Leste
Togo
Tokelau
Tonga
Trinidad and Tobago
Tromelin Island
Tunisia
Turkey
Turkmenistan
Turks and Caicos Islands
Tuvalu
Uganda
Ukraine
United Arab Emirates
United Kingdom
United States
Uruguay
Uzbekistan
Vanuatu
Vatican City
Venezuela
Vietnam
Virgin Islands, British
Virgin Islands, U.S.
Wake Island
Wallis and Futuna
West Bank
Western Sahara
Yemen
Zambia
Zimbabwe

Language
English
Bahasa Indonesia
Deutsch
Español
Français
Polski
Português
Русский
正體中文

Format

 HTML

 Text

I’m okay with Mozilla handling my info as explained in this [Privacy Policy](https://www.mozilla.org/privacy/).

Sign up now
We will only send you
Mozilla-related information.

## Thanks!

If you haven’t previously confirmed a subscription to a Mozilla-related newsletter you may have to do so. Please check your inbox or your spam filter for an e-mail from us.

[Mozilla](https://www.mozilla.org/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)

##### Mozilla

* [About](https://www.mozilla.org/about/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Contact Us](https://www.mozilla.org/contact/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Donate](https://donate.mozilla.org/?presets=50,30,20,10&amount=30¤cy=usd&utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)

##### Firefox

* [Download Firefox](https://www.mozilla.org/firefox/new/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Desktop](https://www.mozilla.org/firefox/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Mobile](https://www.mozilla.org/firefox/mobile/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Features](https://www.mozilla.org/firefox/features/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Beta, Nightly, Developer Edition](https://www.mozilla.org/firefox/channel/desktop/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)

##### Resources

* [Privacy Hub](https://www.mozilla.org/privacy/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Browser Comparison](https://www.mozilla.org/firefox/browsers/compare/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Brand Standards](https://mozilla.design/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)

##### Social

Follow @Firefox

* [Twitter (@mozilla)](https://twitter.com/firefox)
* [Instagram (@mozilla)](https://www.instagram.com/firefox/)
* [YouTube (@firefoxchannel)](https://www.youtube.com/user/firefoxchannel)

Follow @Mozilla

* [Twitter (@mozilla)](https://twitter.com/mozilla)
* [Instagram (@mozilla)](https://www.instagram.com/mozilla/)

* [Website Privacy Notice](https://www.mozilla.org/privacy/websites/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Legal](https://www.mozilla.org/about/legal/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)



=== Content from www.ubuntu.com_3a437d51_20250124_202755.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# USN-1748-1: Thunderbird vulnerabilities

25 February 2013

Several security issues were fixed in Thunderbird.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Releases

* [Ubuntu 12.10](/security/notices?release=quantal)
* [Ubuntu 12.04](/security/notices?release=precise)
* [Ubuntu 11.10](/security/notices?release=oneiric)
* [Ubuntu 10.04](/security/notices?release=lucid)

## Packages

* [thunderbird](/security/cves?package=thunderbird) - Mozilla Open Source mail and newsgroup client

## Details

Bobby Holley discovered vulnerabilities in Chrome Object Wrappers (COW) and

System Only Wrappers (SOW). If a user were tricked into opening a specially

crafted page and had scripting enabled, a remote attacker could exploit

this to bypass security protections to obtain sensitive information or

potentially execute code with the privileges of the user invoking

Thunderbird. ([CVE-2013-0773](/security/CVE-2013-0773))

Frederik Braun discovered that Thunderbird made the location of the active

browser profile available to JavaScript workers. Scripting for Thunderbird

is disabled by default in Ubuntu. ([CVE-2013-0774](/security/CVE-2013-0774))

A use-after-free vulnerability was discovered in Thunderbird. An attacker

could potentially exploit this to execute code with the privileges of the

user invoking Thunderbird if scripting were enabled. ([CVE-2013-0775](/security/CVE-2013-0775))

Michal Zalewski discovered that Thunderbird would not always show the

correct address when cancelling a proxy authentication prompt. A remote

attacker could exploit this to conduct URL spoofing and phishing attacks

if scripting were enabled.

([CVE-2013-0776](/security/CVE-2013-0776))

Abhishek Arya discovered several problems related to memory handling. If

the user were tricked into opening a specially crafted page, an attacker

could possibly exploit these to cause a denial of service via application

crash, or potentially execute code with the privileges of the user invoking

Thunderbird. ([CVE-2013-0777](/security/CVE-2013-0777), [CVE-2013-0778](/security/CVE-2013-0778), [CVE-2013-0779](/security/CVE-2013-0779), [CVE-2013-0780](/security/CVE-2013-0780),

[CVE-2013-0781](/security/CVE-2013-0781), [CVE-2013-0782](/security/CVE-2013-0782))

Olli Pettay, Christoph Diehl, Gary Kwong, Jesse Ruderman, Andrew McCreight,

Joe Drew, Wayne Mery, Alon Zakai, Christian Holler, Gary Kwong, Luke

Wagner, Terrence Cole, Timothy Nikkel, Bill McCloskey, and Nicolas Pierron

discovered multiple memory safety issues affecting Thunderbird. If a user

had scripting enabled and was tricked into opening a specially crafted

page, an attacker could possibly exploit these to cause a denial of service

via application crash. ([CVE-2013-0783](/security/CVE-2013-0783), [CVE-2013-0784](/security/CVE-2013-0784))

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Update instructions

The problem can be corrected by updating your system to the following package versions:

##### Ubuntu 12.10

* [thunderbird](https://launchpad.net/ubuntu/%2Bsource/thunderbird)
  -
  [17.0.3+build1-0ubuntu0.12.10.1](https://launchpad.net/ubuntu/%2Bsource/thunderbird/17.0.3%2Bbuild1-0ubuntu0.12.10.1)

##### Ubuntu 12.04

* [thunderbird](https://launchpad.net/ubuntu/%2Bsource/thunderbird)
  -
  [17.0.3+build1-0ubuntu0.12.04.1](https://launchpad.net/ubuntu/%2Bsource/thunderbird/17.0.3%2Bbuild1-0ubuntu0.12.04.1)

##### Ubuntu 11.10

* [thunderbird](https://launchpad.net/ubuntu/%2Bsource/thunderbird)
  -
  [17.0.3+build1-0ubuntu0.11.10.1](https://launchpad.net/ubuntu/%2Bsource/thunderbird/17.0.3%2Bbuild1-0ubuntu0.11.10.1)

##### Ubuntu 10.04

* [thunderbird](https://launchpad.net/ubuntu/%2Bsource/thunderbird)
  -
  [17.0.3+build1-0ubuntu0.10.04.1](https://launchpad.net/ubuntu/%2Bsource/thunderbird/17.0.3%2Bbuild1-0ubuntu0.10.04.1)

After a standard system update you need to restart Thunderbird to make all

the necessary changes.

## References

* [CVE-2013-0773](/security/CVE-2013-0773)
* [CVE-2013-0774](/security/CVE-2013-0774)
* [CVE-2013-0775](/security/CVE-2013-0775)
* [CVE-2013-0776](/security/CVE-2013-0776)
* [CVE-2013-0777](/security/CVE-2013-0777)
* [CVE-2013-0778](/security/CVE-2013-0778)
* [CVE-2013-0779](/security/CVE-2013-0779)
* [CVE-2013-0780](/security/CVE-2013-0780)
* [CVE-2013-0781](/security/CVE-2013-0781)
* [CVE-2013-0782](/security/CVE-2013-0782)
* [CVE-2013-0783](/security/CVE-2013-0783)
* [CVE-2013-0784](/security/CVE-2013-0784)
* <https://launchpad.net/bugs/1131110>

## Related notices

* [USN-1729-1](/security/notices/USN-1729-1)

### Join the discussion

* [Ubuntu security updates mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened)
* [Security announcements mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-security-announce)

### Need help with your security needs?

Ubuntu Pro provides up to ten-year security coverage for over 23,000 open-source packages within the Ubuntu Main and Universe repositories.

[Talk to an expert to find out what would work best for you](/contact-us/form?product=pro)

### Further reading

* *Loading...*

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page



=== Content from blog.mozilla.org_a1905f2a_20250126_032100.html ===

[Skip to content](#content)

[Mozilla](https://blog.mozilla.org/en/)

![search](https://blog.mozilla.org/wp-content/themes/foxtail/assets/images/icons/search.svg)

* [Internet Culture](https://blog.mozilla.org/en/category/internet-culture/)
  + [Deep Dives](https://blog.mozilla.org/en/category/internet-culture/deep-dives/)
  + [Mozilla Explains](https://blog.mozilla.org/en/category/internet-culture/mozilla-explains/)
  + [Interviews](https://blog.mozilla.org/en/category/internet-culture/interviews/)
  + [Videos](https://blog.mozilla.org/en/category/videos/)
* [Privacy & Security](https://blog.mozilla.org/en/category/privacy-security/)
* [Products](https://blog.mozilla.org/en/category/products/)
  + [Firefox](https://blog.mozilla.org/en/category/products/firefox/)
  + [Pocket](https://blog.mozilla.org/en/category/products/pocket/)
  + [Mozilla VPN](https://blog.mozilla.org/en/category/products/mozilla-vpn/)
* [Mozilla](https://blog.mozilla.org/en/category/mozilla/)
  + [News](https://blog.mozilla.org/en/category/mozilla/news/)
  + [Internet Policy](https://blog.mozilla.org/en/category/mozilla/internet-policy/)
  + [Leadership](https://blog.mozilla.org/en/category/mozilla/leadership/)
    - [Mitchell Baker, CEO](https://blog.mozilla.org/en/author/mitchellmozillacom/)
    - [Mark Surman, ED Foundation](https://blog.mozilla.org/en/author/markmozillafoundation-org/)
    - [Eric Rescorla, Firefox CTO](https://blog.mozilla.org/en/author/ekrmozilla-com/)

[Download Firefox](https://www.mozilla.org/firefox/new/?utm_source=blog.mozilla.org&utm_medium=referral&utm_campaign=blog-nav)

![search](https://blog.mozilla.org/wp-content/themes/foxtail/assets/images/icons/search.svg)

#### Search

Search for:

![](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2019/01/mozilla-logo-bw-rgb.png)
## News

Official announcements and press releases

[![Room filled with people listening to a speaker on stage. Demo Day visual image in the background.](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/12/Demo_Day_Blog_Header_-1-800x800.jpg)
Mozilla
## Mozilla Builders: Celebrating community-driven innovation in AI

Read More](https://blog.mozilla.org/en/mozilla/mozilla-builders-demo-day/)

[![The Mozilla logo in green on a black background](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/12/logo-lockup-video-poster-800x800.png)
Mozilla
## Mozilla welcomes new executive team members

Read More](https://blog.mozilla.org/en/mozilla/new-executives/)

[![Decorative image of wrapped gifts in front of an iphone](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2023/11/moz_header_holiday_firefox-phone-gifts_blue-03.png-800x800.png)
Products
## Shopping for everyone? We’ve got you covered with the Fakespot Holiday Gift Guide 2024

Read More](https://blog.mozilla.org/en/products/shopping-for-everyone-weve-got-you-covered-with-the-fakespot-holiday-gift-guide-2024/)

[![Text: Mozilla Builders](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/06/Blog-16_9-1920x1080-1-800x800.png)
Mozilla
## 14 AI projects to watch: Mozilla’s first Builders Accelerator cohort kicks off

Read More](https://blog.mozilla.org/en/mozilla/14-ai-projects-to-watch-mozillas-first-builders-accelerator-cohort-kicks-off/)

[![A check mark next to the text "Fakespot."](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2023/07/Fakespot_ProductBlog-2-800x800.jpg)
News
## Fakespot’s guide to trending back-to-school products

Read More](https://blog.mozilla.org/en/mozilla/news/fakespots-guide-to-trending-back-to-school-products/)

[![](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/06/IG_Highlights_Icon-800x800.png)
Mozilla
## BAFTA Award-Winner Siobhán McSweeney to host Mozilla’s 2nd Annual Rise25 Awards in Dublin, Ireland on Aug. 13

Read More](https://blog.mozilla.org/en/mozilla/bafta-award-winner-siobhan-mcsweeney-to-host-mozillas-2nd-annual-rise25-awards-in-dublin-ireland-on-august-13/)

[![](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/05/fx_website_meta-image_tips-tricks_alt-04-1-800x800.webp)
Mozilla
## Here’s what we’re working on in Firefox

Read More](https://blog.mozilla.org/en/mozilla/heres-what-were-working-on-in-firefox/)

[![A check mark next to the text "Fakespot."](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2023/07/Fakespot_ProductBlog-2-800x800.jpg)
News
## Fakespot reveals the product categories with the most and least reliable product reviews

Read More](https://blog.mozilla.org/en/mozilla/news/fakespot-reveals-the-product-categories-with-the-most-and-least-reliable-product-reviews-for-summer-and-back-to-school-shopping/)

[![A dark blue speech bubble with horizontal purple and red bars on a pink background.](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2020/03/fx_blog_header_announcements_001_1920x1080-800x800.jpg)
Firefox
## Engaging with our Firefox community: Highlights from our recent AMA

Read More](https://blog.mozilla.org/en/products/firefox/engaging-with-our-firefox-community-highlights-from-our-recent-ama/)

[![](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/06/IG_Highlights_Icon-800x800.png)
Mozilla
## Mozilla announces finalists for the 2nd annual Rise25 Awards

Read More](https://blog.mozilla.org/en/mozilla/mozilla-announces-finalists-for-the-2nd-annual-rise25-awards/)

[![Mozilla and Anonym logos](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/06/blog_1200x800_v2-800x800.png)
Mozilla
## Introducing Anonym: Raising the bar for privacy-preserving digital advertising

Read More](https://blog.mozilla.org/en/mozilla/mozilla-anonym-raising-the-bar-for-privacy-preserving-digital-advertising/)

[![logo - zero with a diagonal line through it, and the letters D, I, N](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/06/odintbanner-500x500.png)
Mozilla
## Keeping GenAI technologies secure is a shared responsibility

Read More](https://blog.mozilla.org/en/mozilla/keeping-genai-technologies-secure-is-a-shared-responsibility/)

1
[2](https://blog.mozilla.org/en/category/mozilla/news/page/2?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=compa)
[3](https://blog.mozilla.org/en/category/mozilla/news/page/3?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=compa)
…
[24](https://blog.mozilla.org/en/category/mozilla/news/page/24?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=compa)
[next](https://blog.mozilla.org/en/category/mozilla/news/page/2?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=compa)

![newsletter](https://blog.mozilla.org/wp-content/themes/foxtail/assets/images/newsletter.png)

### Keep up with all things Firefox

Get how-tos, advice and news to make your Firefox experience work best for you.

Your e-mail address

Country
- select -
Afghanistan
Akrotiri
Albania
Algeria
American Samoa
Andorra
Angola
Anguilla
Antarctica
Antigua and Barbuda
Argentina
Armenia
Aruba
Ashmore and Cartier Islands
Australia
Austria
Azerbaijan
Bahamas, The
Bahrain
Baker Island
Bangladesh
Barbados
Bassas da India
Belarus
Belgium
Belize
Benin
Bermuda
Bhutan
Bolivia
Bonaire, Sint Eustatius, and Saba
Bosnia and Herzegovina
Botswana
Bouvet Island
Brazil
British Indian Ocean Territory
Brunei
Bulgaria
Burkina Faso
Burma
Burundi
Cabo Verde
Cambodia
Cameroon
Canada
Cayman Islands
Central African Republic
Chad
Chile
China
Christmas Island
Clipperton Island
Cocos (Keeling) Islands
Colombia
Comoros
Congo (Brazzaville)
Congo (Kinshasa)
Cook Islands
Coral Sea Islands
Costa Rica
Croatia
Cuba
Curaçao
Cyprus
Czech Republic
Côte d’Ivoire
Denmark
Dhekelia
Diego Garcia
Djibouti
Dominica
Dominican Republic
Ecuador
Egypt
El Salvador
Equatorial Guinea
Eritrea
Estonia
Ethiopia
Europa Island
Falkland Islands (Islas Malvinas)
Faroe Islands
Fiji
Finland
France
French Guiana
French Polynesia
French Southern and Antarctic Lands
Gabon
Gambia, The
Gaza Strip
Georgia
Germany
Ghana
Gibraltar
Glorioso Islands
Greece
Greenland
Grenada
Guadeloupe
Guam
Guatemala
Guernsey
Guinea
Guinea-Bissau
Guyana
Haiti
Heard Island and McDonald Islands
Honduras
Hong Kong
Howland Island
Hungary
Iceland
India
Indonesia
Iran
Iraq
Ireland
Isle of Man
Israel
Italy
Jamaica
Jan Mayen
Japan
Jarvis Island
Jersey
Johnston Atoll
Jordan
Juan de Nova Island
Kazakhstan
Kenya
Kingman Reef
Kiribati
Korea, North
Korea, South
Kosovo
Kuwait
Kyrgyzstan
Laos
Latvia
Lebanon
Lesotho
Liberia
Libya
Liechtenstein
Lithuania
Luxembourg
Macau
Macedonia
Madagascar
Malawi
Malaysia
Maldives
Mali
Malta
Marshall Islands
Martinique
Mauritania
Mauritius
Mayotte
Mexico
Micronesia, Federated States of
Midway Islands
Moldova
Monaco
Mongolia
Montenegro
Montserrat
Morocco
Mozambique
Namibia
Nauru
Navassa Island
Nepal
Netherlands
New Caledonia
New Zealand
Nicaragua
Niger
Nigeria
Niue
Norfolk Island
Northern Mariana Islands
Norway
Oman
Pakistan
Palau
Palmyra Atoll
Panama
Papua New Guinea
Paracel Islands
Paraguay
Peru
Philippines
Pitcairn Islands
Poland
Portugal
Puerto Rico
Qatar
Reunion
Romania
Russia
Rwanda
Saint Barthelemy
Saint Helena, Ascension, and Tristan da Cunha
Saint Kitts and Nevis
Saint Lucia
Saint Martin
Saint Pierre and Miquelon
Saint Vincent and the Grenadines
Samoa
San Marino
Sao Tome and Principe
Saudi Arabia
Senegal
Serbia
Seychelles
Sierra Leone
Singapore
Sint Maarten
Slovakia
Slovenia
Solomon Islands
Somalia
South Africa
South Georgia and South Sandwich Islands
South Sudan
Spain
Spratly Islands
Sri Lanka
Sudan
Suriname
Svalbard
Swaziland
Sweden
Switzerland
Syria
Taiwan
Tajikistan
Tanzania
Thailand
Timor-Leste
Togo
Tokelau
Tonga
Trinidad and Tobago
Tromelin Island
Tunisia
Turkey
Turkmenistan
Turks and Caicos Islands
Tuvalu
Uganda
Ukraine
United Arab Emirates
United Kingdom
United States
Uruguay
Uzbekistan
Vanuatu
Vatican City
Venezuela
Vietnam
Virgin Islands, British
Virgin Islands, U.S.
Wake Island
Wallis and Futuna
West Bank
Western Sahara
Yemen
Zambia
Zimbabwe

Language
English
Bahasa Indonesia
Deutsch
Español
Français
Polski
Português
Русский
正體中文

Format

 HTML

 Text

I’m okay with Mozilla handling my info as explained in this [Privacy Policy](https://www.mozilla.org/privacy/).

Sign up now
We will only send you
Mozilla-related information.

## Thanks!

If you haven’t previously confirmed a subscription to a Mozilla-related newsletter you may have to do so. Please check your inbox or your spam filter for an e-mail from us.

[Mozilla](https://www.mozilla.org/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)

##### Mozilla

* [About](https://www.mozilla.org/about/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Contact Us](https://www.mozilla.org/contact/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Donate](https://donate.mozilla.org/?presets=50,30,20,10&amount=30¤cy=usd&utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)

##### Firefox

* [Download Firefox](https://www.mozilla.org/firefox/new/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Desktop](https://www.mozilla.org/firefox/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Mobile](https://www.mozilla.org/firefox/mobile/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Features](https://www.mozilla.org/firefox/features/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Beta, Nightly, Developer Edition](https://www.mozilla.org/firefox/channel/desktop/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)

##### Resources

* [Privacy Hub](https://www.mozilla.org/privacy/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Browser Comparison](https://www.mozilla.org/firefox/browsers/compare/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Brand Standards](https://mozilla.design/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)

##### Social

Follow @Firefox

* [Twitter (@mozilla)](https://twitter.com/firefox)
* [Instagram (@mozilla)](https://www.instagram.com/firefox/)
* [YouTube (@firefoxchannel)](https://www.youtube.com/user/firefoxchannel)

Follow @Mozilla

* [Twitter (@mozilla)](https://twitter.com/mozilla)
* [Instagram (@mozilla)](https://www.instagram.com/mozilla/)

* [Website Privacy Notice](https://www.mozilla.org/privacy/websites/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Legal](https://www.mozilla.org/about/legal/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)



=== Content from lists.opensuse.org_b3d2bfbe_20250124_202752.html ===


[![openSUSE](https://static.opensuse.org/favicon.svg)
Mailing Lists](/archives/ "openSUSE Mailing Lists")

[Sign In](/accounts/login/?next=/archives/list/updates%40lists.opensuse.org/message/SRUY4D3TGIGHV2G3XSXJB3X4GIIEO67B/)
[Sign Up](/accounts/signup/?next=/archives/list/updates%40lists.opensuse.org/message/SRUY4D3TGIGHV2G3XSXJB3X4GIIEO67B/)

[Manage this list](/manage/lists/updates.lists.opensuse.org/)
[Sign In](/accounts/login/?next=/archives/list/updates%40lists.opensuse.org/message/SRUY4D3TGIGHV2G3XSXJB3X4GIIEO67B/)
[Sign Up](/accounts/signup/?next=/archives/list/updates%40lists.opensuse.org/message/SRUY4D3TGIGHV2G3XSXJB3X4GIIEO67B/)

×
#### Keyboard Shortcuts

### Thread View

* `j`: Next unread message
* `k`: Previous unread message
* `j a`: Jump to all threads* `j l`: Jump to MailingList overview

[thread](/archives/list/updates%40lists.opensuse.org/thread/SRUY4D3TGIGHV2G3XSXJB3X4GIIEO67B/#SRUY4D3TGIGHV2G3XSXJB3X4GIIEO67B)

# openSUSE-SU-2013:0324-1: moderate: Mozilla Februarys

![](https://seccdn.libravatar.org/avatar/099a17325bdf082b643d1a6bbacde279.jpg?s=120&d=mm&r=g)
## [opensuse-security＠opensuse.org](/archives/users/1b72def497ef4503896cd7a5fe9fb8e0/ "See the profile for opensuse-security＠opensuse.org")

22 Feb
2013

22 Feb
'13

14:04

openSUSE Security Update: Mozilla Februarys
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
Announcement ID: openSUSE-SU-2013:0324-1
Rating: moderate
References:
Affected Products:
openSUSE 11.4
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
An update that contains security fixes can now be installed.
Description:
Firefox was updated to version 19.0. Seamonkey was updated
to version 2.16. Thunderbird was updated to version 17.0.3.
\* MFSA 2013-21/CVE-2013-0783/2013-0784 Miscellaneous
memory safety hazards
\* MFSA 2013-22/CVE-2013-0772 (bmo#801366) Out-of-bounds
read in image rendering
\* MFSA 2013-23/CVE-2013-0765 (bmo#830614) Wrapped WebIDL
objects can be wrapped again
\* MFSA 2013-24/CVE-2013-0773 (bmo#809652) Web content
bypass of COW and SOW security wrappers
\* MFSA 2013-25/CVE-2013-0774 (bmo#827193) Privacy leak in
JavaScript Workers
\* MFSA 2013-26/CVE-2013-0775 (bmo#831095) Use-after-free
in nsImageLoadingContent
\* MFSA 2013-27/CVE-2013-0776 (bmo#796475) Phishing on
HTTPS connection through malicious proxy
\* MFSA 2013-28/CVE-2013-0780/CVE-2013-0782/CVE-2013-0777/
CVE-2013-0778/CVE-2013-0779/CVE-2013-0781
Use-after-free, out of bounds read, and buffer overflow
issues found using Address Sanitizer
Patch Instructions:
To install this openSUSE Security Update use YaST online\_update.
Alternatively you can run the command listed for your product:
- openSUSE 11.4:
zypper in -t patch 2013-29
To bring your system up-to-date, use "zypper patch".
Package List:
- openSUSE 11.4 (i586 x86\_64):
MozillaFirefox-19.0-61.1
MozillaFirefox-branding-upstream-19.0-61.1
MozillaFirefox-buildsymbols-19.0-61.1
MozillaFirefox-debuginfo-19.0-61.1
MozillaFirefox-debugsource-19.0-61.1
MozillaFirefox-devel-19.0-61.1
MozillaFirefox-translations-common-19.0-61.1
MozillaFirefox-translations-other-19.0-61.1
MozillaThunderbird-17.0.3-49.1
MozillaThunderbird-buildsymbols-17.0.3-49.1
MozillaThunderbird-debuginfo-17.0.3-49.1
MozillaThunderbird-debugsource-17.0.3-49.1
MozillaThunderbird-devel-17.0.3-49.1
MozillaThunderbird-devel-debuginfo-17.0.3-49.1
MozillaThunderbird-translations-common-17.0.3-49.1
MozillaThunderbird-translations-other-17.0.3-49.1
enigmail-1.5.1+17.0.3-49.1
enigmail-debuginfo-1.5.1+17.0.3-49.1
seamonkey-2.16-53.1
seamonkey-debuginfo-2.16-53.1
seamonkey-debugsource-2.16-53.1
seamonkey-dom-inspector-2.16-53.1
seamonkey-irc-2.16-53.1
seamonkey-translations-common-2.16-53.1
seamonkey-translations-other-2.16-53.1
seamonkey-venkman-2.16-53.1
References:

[0](#like "You must be logged-in to vote.")
[0](#dislike "You must be logged-in to vote.")

Reply

[Sign in to reply online](/accounts/login/?next=/archives/list/updates%40lists.opensuse.org/message/SRUY4D3TGIGHV2G3XSXJB3X4GIIEO67B/)
Use email software

[Back to the thread](/archives/list/updates%40lists.opensuse.org/thread/SRUY4D3TGIGHV2G3XSXJB3X4GIIEO67B/#SRUY4D3TGIGHV2G3XSXJB3X4GIIEO67B)

[Back to the list](/archives/list/updates%40lists.opensuse.org/)

![HyperKitty](/static/hyperkitty/img/logo.png)
Powered by [HyperKitty](http://hyperkitty.readthedocs.org) version 1.3.12.



=== Content from bugzilla.mozilla.org_af81ea92_20250124_202804.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/805294)
* [XML](/show_bug.cgi?ctype=xml&id=805294)

Closed
[Bug 805294](/show_bug.cgi?id=805294)

Opened 12 years ago
Closed 12 years ago

# RegExpCompartment::sweep should mark the atom if the entry isn't removed

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

RegExpCompartment::sweep should mark the atom if the entry isn't removed

## Categories

### (Core :: JavaScript Engine, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=JavaScript%20Engine#JavaScript%20Engine)

JavaScript Engine
▾

Core :: JavaScript Engine
The interpreter engine for the core JavaScript language, independent of the browser's object model. File ONLY core JavaScript language bugs in this category. For bugs involving browser objects such as "window" and "document", use the "DOM" component. For bugs involving calls between JavaScript and C++, use the "XPConnect" component.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=JavaScript%20Engine)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

unspecified

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

All

All

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

normal

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla19

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Accessibility Severity | --- |
| --- | --- |
| Webcompat Score | --- |
| a11y-review | --- |
| Webcompat Priority | --- |
| Performance Impact | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox16 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox16&o1=equals&v1=wontfix) |
| firefox17 | [+](/buglist.cgi?f1=cf_tracking_firefox17&o1=equals&v1=%2B) | [wontfix](/buglist.cgi?f1=cf_status_firefox17&o1=equals&v1=wontfix) |
| firefox18 | [+](/buglist.cgi?f1=cf_tracking_firefox18&o1=equals&v1=%2B) | [wontfix](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=wontfix) |
| firefox19 | [+](/buglist.cgi?f1=cf_tracking_firefox19&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=fixed) |
| firefox-esr10 | --- | [unaffected](/buglist.cgi?f1=cf_status_esr10&o1=equals&v1=unaffected) |
| firefox-esr17 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=wontfix) |
| b2g18 | --- | [wontfix](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=wontfix) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox16 |  | wontfix |
| firefox17 | + | wontfix |
| firefox18 | + | wontfix |
| firefox19 | + | fixed |
| firefox-esr10 |  | unaffected |
| firefox-esr17 |  | wontfix |
| b2g18 |  | wontfix |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: luke, Assigned: luke)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](extensions/Gravatar/web/default.jpg)  [luke](/user_profile?user_id=347312)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](extensions/Gravatar/web/default.jpg)  [luke](/user_profile?user_id=347312)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/4fe52ee1503aecf7b6c976b8eb7c1753?d=mm&size=40)  [willyelm](/user_profile?user_id=714609)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

7 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

---

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Keywords: sec-high, Whiteboard: [adv-main19+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[sec-high](/buglist.cgi?keywords=sec-high&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[adv-main19+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [RyanVM](/user_profile?user_id=75935) | [in-testsuite](#c18 "12 years ago") | ? |
| --- | --- | --- |
| [RyanVM](/user_profile?user_id=75935) | in-testsuite | ? |
| --- | --- | --- |
|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (2 files, 1 obsolete file)

| [unmark before purge](/attachment.cgi?id=674920)  [12 years ago](#c1)  [Luke Wagner [:luke]](/user_profile?user_id=347312)   2.34 KB, patch |  | [Details](/attachment.cgi?id=674920&action=edit) | [Diff](/attachment.cgi?id=674920&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=805294&attachment=674920) |
| --- | --- | --- |
| [mark the atom](/attachment.cgi?id=674921)  [12 years ago](#c2)  [Luke Wagner [:luke]](/user_profile?user_id=347312)   3.14 KB, patch | ginnchen+exoracle : [feedback+](#c3 "12 years ago") | [Details](/attachment.cgi?id=674921&action=edit) | [Diff](/attachment.cgi?id=674921&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=805294&attachment=674921) |
| [fix](/attachment.cgi?id=675637)  [12 years ago](#c6)  [Luke Wagner [:luke]](/user_profile?user_id=347312)   5.88 KB, patch | billm : [review+](#c10 "12 years ago") | [Details](/attachment.cgi?id=675637&action=edit) | [Diff](/attachment.cgi?id=675637&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=805294&attachment=675637) |

Show Obsolete

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Luke Wagner [:luke]](/user_profile?user_id=347312)  Assignee |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=805294#c0)• 12 years ago |
|  | |

Normally, we clear out all entries of the regexp cache. The exception is when a regexp is currently executing and then that regexp gets to stay in the cache. In this case, we fail to mark the JSAtom that serves as the key, so it can become garbage. IIUC, we don't use the key other than for equality matching, so this error only manifests itself as the cache returning the wrong regexp for the given source (from the same compartment, so not an information leak).
I tried to write a test-case, but the conservative GC thwarted all my attempts, since the window of opportunity is small. [Credit to Ginn Chen for reproducing and tracking down this bug.]

|  | [Luke Wagner [:luke]](/user_profile?user_id=347312)  Assignee |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=805294#c1)• 12 years ago |
|  | |

Attached patch

[unmark before purge](attachment.cgi?id=674920&action=diff)
— [Details](attachment.cgi?id=674920&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=805294&attachment=674920)

This is a prerequisite for the next patch.
[Attachment #674920](/attachment.cgi?id=674920&action=edit "unmark before purge") -
Flags: review?(wmccloskey)

|  | [Luke Wagner [:luke]](/user_profile?user_id=347312)  Assignee |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=805294#c2)• 12 years ago |
|  | |

Attached patch

[mark the atom](attachment.cgi?id=674921&action=diff) (obsolete)
— [Details](attachment.cgi?id=674921&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=805294&attachment=674921)

Ginn, can you verify that this patch (applied on top of the other patch) fixes the problem you are seeing?
[Attachment #674921](/attachment.cgi?id=674921&action=edit "mark the atom") -
Flags: review?(wmccloskey)
[Attachment #674921](/attachment.cgi?id=674921&action=edit "mark the atom") -
Flags: feedback?(ginn.chen)

|  | [Ginn Chen](/user_profile?user_id=130269) |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=805294#c3)• 12 years ago |
|  | |

Comment on [attachment 674921](/attachment.cgi?id=674921 "mark the atom") [[details]](/attachment.cgi?id=674921&action=edit "mark the atom") [[diff]](/attachment.cgi?id=674921&action=diff "mark the atom") [[review]](/page.cgi?id=splinter.html&ignore=&bug=805294&attachment=674921)
mark the atom
The problem is gone with both patch applied.
Thanks!
[Attachment #674921](/attachment.cgi?id=674921&action=edit "mark the atom") -
Flags: feedback?(ginn.chen) → feedback+

|  | [Luke Wagner [:luke]](/user_profile?user_id=347312)  Assignee |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=805294#c4)• 12 years ago |
|  | |

So this fails all the mochitests. The cause is a RegExpObject with a dangling private pointer to a deleted RegExpShared. I think the reason is that JSCompartment::purge() gets called in some cases where we don't end up tracing the compartment. Bill: should I condition RegExpCompartment::purge on something so that it purges iff we trace the compartment?

|  | [Luke Wagner [:luke]](/user_profile?user_id=347312)  Assignee |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=805294#c5)• 12 years ago |
|  | |

Comment on [attachment 674921](/attachment.cgi?id=674921 "mark the atom") [[details]](/attachment.cgi?id=674921&action=edit "mark the atom") [[diff]](/attachment.cgi?id=674921&action=diff "mark the atom") [[review]](/page.cgi?id=splinter.html&ignore=&bug=805294&attachment=674921)
mark the atom
This patch has a flagrant igc violation: we purge RegExpShareds in the first slice, but we may not null out pointers to RegExpShareds until some later slice, leaving us completely unsafe in the interim.
[Attachment #674921](/attachment.cgi?id=674921&action=edit "mark the atom") -
Flags: review?(wmccloskey)

|  | [Luke Wagner [:luke]](/user_profile?user_id=347312)  Assignee |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=805294#c6)• 12 years ago |
|  | |

Attached patch

[fix](attachment.cgi?id=675637&action=diff)
— [Details](attachment.cgi?id=675637&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=805294&attachment=675637)

To address the previous problem, this patch keeps two tables: a map that holds the atom that is unconditionally cleared, and a pendingDeletes\_ set that is responsible for deleting RegExpShareds.
[Attachment #674921](/attachment.cgi?id=674921&action=edit "mark the atom") -
Attachment is obsolete: true
[Attachment #675637](/attachment.cgi?id=675637&action=edit "fix") -
Flags: review?(wmccloskey)

|  | [Luke Wagner [:luke]](/user_profile?user_id=347312)  Assignee |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=805294#c7)• 12 years ago |
|  | |

This time, looks green on try.

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=805294#a577598_406194)• 12 years ago |

Keywords: [sec-critical](/buglist.cgi?keywords=sec-critical&resolution=---)

|  | [Luke Wagner [:luke]](/user_profile?user_id=347312)  Assignee |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=805294#c8)• 12 years ago |
|  | |

I'm pretty sure this is, at most, sec-high. While there is a dangling pointer, it serves only to allow same-origin incorrect regexp execution. I'm not aware of any way that the dangling-pointer is actually dereferenced.

|  | [David Bolter [:davidb] (NeedInfo me for attention)](/user_profile?user_id=152868) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=805294#a673861_152868)• 12 years ago |

Keywords: [sec-critical](/buglist.cgi?keywords=sec-critical&resolution=---) → [sec-high](/buglist.cgi?keywords=sec-high&resolution=---)

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=805294#c9)• 12 years ago |
|  | |

It sounds like maybe this is a regression from IGC? I'm marking flags as such, but feel free to update as appropriate.
[status-firefox-esr10](/buglist.cgi?f1=cf_status_esr10&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_esr10&o1=equals&v1=unaffected)
[status-firefox16](/buglist.cgi?f1=cf_status_firefox16&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_firefox16&o1=equals&v1=wontfix)
[status-firefox17](/buglist.cgi?f1=cf_status_firefox17&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox17&o1=equals&v1=affected)
[status-firefox18](/buglist.cgi?f1=cf_status_firefox18&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=affected)
[status-firefox19](/buglist.cgi?f1=cf_status_firefox19&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=affected)

|  | [Bill McCloskey [inactive unless it's an emergency] (:billm)](/user_profile?user_id=389993) |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=805294#c10)• 12 years ago |
|  | |

Comment on [attachment 675637](/attachment.cgi?id=675637 "fix") [[details]](/attachment.cgi?id=675637&action=edit "fix") [[diff]](/attachment.cgi?id=675637&action=diff "fix") [[review]](/page.cgi?id=splinter.html&ignore=&bug=805294&attachment=675637)
fix
Review of [attachment 675637](/attachment.cgi?id=675637 "fix") [[details]](/attachment.cgi?id=675637&action=edit "fix") [[diff]](/attachment.cgi?id=675637&action=diff "fix") [[review]](/page.cgi?id=splinter.html&ignore=&bug=805294&attachment=675637):
-----------------------------------------------------------------
Sorry for the delay. I forgot about this after the work week.
::: js/src/jscompartment.cpp
@@ -562,1 @@
> regExps.sweep(rt);
I never understood this comment before, but now I think I do. A JIT chunk can hold on to a RegExpShared by keeping its activeUseCount incremented. We can't throw that RegExpShared away until we discard JIT code. So it's beneficial to discard JIT code before sweeping regexps. Otherwise we would have to wait until the next GC to throw the RegExpShared away. Could you maybe clarify the comment, rather than deleting it? I think it does have some value, since I often shuffle this code around without much thought.
::: js/src/vm/RegExpObject.h
@@ +261,5 @@
> typedef HashMap<Key, RegExpShared \*, Key, RuntimeAllocPolicy> Map;
> Map map\_;
>
> + typedef HashSet<RegExpShared \*, DefaultHasher<RegExpShared\*>, RuntimeAllocPolicy> PendingSet;
> + PendingSet pendingDeletes\_;
How about calling this inUse\_ or something like that? And it would be nice to have a one-line comment above the definitions of map\_ and inUse\_ (or whatever).
[Attachment #675637](/attachment.cgi?id=675637&action=edit "fix") -
Flags: review?(wmccloskey) → review+

|  | [Bill McCloskey [inactive unless it's an emergency] (:billm)](/user_profile?user_id=389993) |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=805294#c11)• 12 years ago |
|  | |

Comment on [attachment 674920](/attachment.cgi?id=674920 "unmark before purge") [[details]](/attachment.cgi?id=674920&action=edit "unmark before purge") [[diff]](/attachment.cgi?id=674920&action=diff "unmark before purge") [[review]](/page.cgi?id=splinter.html&ignore=&bug=805294&attachment=674920)
unmark before purge
If I'm not mistaken, we no longer need this patch.
[Attachment #674920](/attachment.cgi?id=674920&action=edit "unmark before purge") -
Flags: review?(wmccloskey)

|  | [Bill McCloskey [inactive unless it's an emergency] (:billm)](/user_profile?user_id=389993) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=805294#c12)• 12 years ago |
|  | |

Also, I just checked, and Ion does not do the crazy inlining of regexp creation that JM does. It never needs to touch RegExpShared at all.

|  | [Luke Wagner [:luke]](/user_profile?user_id=347312)  Assignee |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=805294#c13)• 12 years ago |
|  | |

(In reply to Bill McCloskey (:billm) from [comment #10](/show_bug.cgi?id=805294#c10 "RESOLVED FIXED - RegExpCompartment::sweep should mark the atom if the entry isn't removed"))
> I never understood this comment before, but now I think I do. A JIT chunk
> can hold on to a RegExpShared by keeping its activeUseCount incremented.
Ohhhh, I thought this was an abandoned relic of the purely-ref-counted RegExpShared days. You're right, it's totally still relevant. Thanks!

|  | [Luke Wagner [:luke]](/user_profile?user_id=347312)  Assignee |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=805294#c14)• 12 years ago |
|  | |

<https://hg.mozilla.org/integration/mozilla-inbound/rev/9b495a47e51d>

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=805294#a704699_406194)• 12 years ago |

[tracking-firefox17](/buglist.cgi?f1=cf_tracking_firefox17&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox17&o1=equals&v1=%3F)
[tracking-firefox18](/buglist.cgi?f1=cf_tracking_firefox18&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox18&o1=equals&v1=%3F)
[tracking-firefox19](/buglist.cgi?f1=cf_tracking_firefox19&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox19&o1=equals&v1=%3F)

|  | [Alex Keybl [:akeybl]](/user_profile?user_id=425645) |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=805294#c15)• 12 years ago |
|  | |

(In reply to Luke Wagner [:luke] from [comment #14](/show_bug.cgi?id=805294#c14 "RESOLVED FIXED - RegExpCompartment::sweep should mark the atom if the entry isn't removed"))
> <https://hg.mozilla.org/integration/mozilla-inbound/rev/9b495a47e51d>
Beta 5, going to build Tuesday, will be the final cutoff for non-exploited security fixes. Is this fix low risk enough to take in FF17?
[tracking-firefox17](/buglist.cgi?f1=cf_tracking_firefox17&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox17&o1=equals&v1=%3F) → [+](/buglist.cgi?f1=cf_tracking_firefox17&o1=equals&v1=%2B)
[tracking-firefox18](/buglist.cgi?f1=cf_tracking_firefox18&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox18&o1=equals&v1=%3F) → [+](/buglist.cgi?f1=cf_tracking_firefox18&o1=equals&v1=%2B)
[tracking-firefox19](/buglist.cgi?f1=cf_tracking_firefox19&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox19&o1=equals&v1=%3F) → [+](/buglist.cgi?f1=cf_tracking_firefox19&o1=equals&v1=%2B)

|  | [Alex Keybl [:akeybl]](/user_profile?user_id=425645) |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=805294#c16)• 12 years ago |
|  | |

(if so, please nominate for uplift)

|  | [Luke Wagner [:luke]](/user_profile?user_id=347312)  Assignee |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=805294#c17)• 12 years ago |
|  | |

The risk isn't zero and the reward is also pretty low. I was not even able to generate an observably-wrong test-case on x64 due to conservative stack scanning (the report came from an existing test on a non-tier 1 platform). Thus, I recommend against uplift.

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=805294#a766446_406194)• 12 years ago |

[status-firefox17](/buglist.cgi?f1=cf_status_firefox17&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox17&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_firefox17&o1=equals&v1=wontfix)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=805294#c18)• 12 years ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/9b495a47e51d>Status: ASSIGNED → RESOLVEDClosed: 12 years ago
[status-firefox19](/buglist.cgi?f1=cf_status_firefox19&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=fixed)Flags: in-testsuite?Resolution: --- → FIXEDTarget Milestone: --- → mozilla19

|  | [Alex Keybl [:akeybl]](/user_profile?user_id=425645) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=805294#a3109003_425645)• 12 years ago |

[status-firefox-esr17](/buglist.cgi?f1=cf_status_firefox_esr17&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=affected)

|  | [Alex Keybl [:akeybl]](/user_profile?user_id=425645) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=805294#a3109030_425645)• 12 years ago |

[status-firefox18](/buglist.cgi?f1=cf_status_firefox18&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=wontfix)
[status-firefox-esr17](/buglist.cgi?f1=cf_status_firefox_esr17&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=wontfix)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=805294#a7769797_1689)• 12 years ago |

[status-b2g18](/buglist.cgi?f1=cf_status_b2g18&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=wontfix)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=805294#a9752482_280903)• 12 years ago |

Whiteboard: [adv-main19+]

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=805294#a65327383_1689)• 10 years ago |

Group: core-security
You need to [log in](/show_bug.cgi?id=805294&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Luke Wagner [:luke]](/user_profile?user_id=347312)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from www.ubuntu.com_c6d6e8ee_20250124_202754.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# USN-1729-2: Firefox regression

1 March 2013

Due to a regression, Firefox might crash or freeze under normal use.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Releases

* [Ubuntu 12.10](/security/notices?release=quantal)
* [Ubuntu 12.04](/security/notices?release=precise)
* [Ubuntu 11.10](/security/notices?release=oneiric)

## Packages

* [firefox](/security/cves?package=firefox) - Mozilla Open Source web browser

## Details

USN-1729-1 fixed vulnerabilities in Firefox. This update introduced a

regression which sometimes resulted in freezes and crashes when using

multiple tabs with images displayed. This update fixes the problem.

We apologize for the inconvenience.

Original advisory details:

Olli Pettay, Christoph Diehl, Gary Kwong, Jesse Ruderman, Andrew McCreight,

Joe Drew, Wayne Mery, Alon Zakai, Christian Holler, Gary Kwong, Luke

Wagner, Terrence Cole, Timothy Nikkel, Bill McCloskey, and Nicolas Pierron

discovered multiple memory safety issues affecting Firefox. If the user

were tricked into opening a specially crafted page, an attacker could

possibly exploit these to cause a denial of service via application crash.

([CVE-2013-0783](/security/CVE-2013-0783), [CVE-2013-0784](/security/CVE-2013-0784))

Atte Kettunen discovered that Firefox could perform an out-of-bounds read

while rendering GIF format images. An attacker could exploit this to crash

Firefox. ([CVE-2013-0772](/security/CVE-2013-0772))

Boris Zbarsky discovered that Firefox did not properly handle some wrapped

WebIDL objects. If the user were tricked into opening a specially crafted

page, an attacker could possibly exploit this to cause a denial of service

via application crash, or potentially execute code with the privileges of

the user invoking Firefox. ([CVE-2013-0765](/security/CVE-2013-0765))

Bobby Holley discovered vulnerabilities in Chrome Object Wrappers (COW) and

System Only Wrappers (SOW). If a user were tricked into opening a specially

crafted page, a remote attacker could exploit this to bypass security

protections to obtain sensitive information or potentially execute code

with the privileges of the user invoking Firefox. ([CVE-2013-0773](/security/CVE-2013-0773))

Frederik Braun discovered that Firefox made the location of the active

browser profile available to JavaScript workers. ([CVE-2013-0774](/security/CVE-2013-0774))

A use-after-free vulnerability was discovered in Firefox. An attacker could

potentially exploit this to execute code with the privileges of the user

invoking Firefox. ([CVE-2013-0775](/security/CVE-2013-0775))

Michal Zalewski discovered that Firefox would not always show the correct

address when cancelling a proxy authentication prompt. A remote attacker

could exploit this to conduct URL spoofing and phishing attacks.

([CVE-2013-0776](/security/CVE-2013-0776))

Abhishek Arya discovered several problems related to memory handling. If

the user were tricked into opening a specially crafted page, an attacker

could possibly exploit these to cause a denial of service via application

crash, or potentially execute code with the privileges of the user invoking

Firefox. ([CVE-2013-0777](/security/CVE-2013-0777), [CVE-2013-0778](/security/CVE-2013-0778), [CVE-2013-0779](/security/CVE-2013-0779), [CVE-2013-0780](/security/CVE-2013-0780),

[CVE-2013-0781](/security/CVE-2013-0781), [CVE-2013-0782](/security/CVE-2013-0782))

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Update instructions

The problem can be corrected by updating your system to the following package versions:

##### Ubuntu 12.10

* [firefox](https://launchpad.net/ubuntu/%2Bsource/firefox)
  -
  [19.0+build1-0ubuntu0.12.10.2](https://launchpad.net/ubuntu/%2Bsource/firefox/19.0%2Bbuild1-0ubuntu0.12.10.2)

##### Ubuntu 12.04

* [firefox](https://launchpad.net/ubuntu/%2Bsource/firefox)
  -
  [19.0+build1-0ubuntu0.12.04.2](https://launchpad.net/ubuntu/%2Bsource/firefox/19.0%2Bbuild1-0ubuntu0.12.04.2)

##### Ubuntu 11.10

* [firefox](https://launchpad.net/ubuntu/%2Bsource/firefox)
  -
  [19.0+build1-0ubuntu0.11.10.2](https://launchpad.net/ubuntu/%2Bsource/firefox/19.0%2Bbuild1-0ubuntu0.11.10.2)

After a standard system update you need to restart Firefox to make all the

necessary changes.

## References

* <https://launchpad.net/bugs/1134409>

### Join the discussion

* [Ubuntu security updates mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened)
* [Security announcements mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-security-announce)

### Need help with your security needs?

Ubuntu Pro provides up to ten-year security coverage for over 23,000 open-source packages within the Ubuntu Main and Universe repositories.

[Talk to an expert to find out what would work best for you](/contact-us/form?product=pro)

### Further reading

* *Loading...*

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page



=== Content from www.ubuntu.com_df7b01d3_20250124_202754.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# USN-1729-1: Firefox vulnerabilities

20 February 2013

Firefox could be made to crash or run programs as your login if it opened a
malicious website.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Releases

* [Ubuntu 12.10](/security/notices?release=quantal)
* [Ubuntu 12.04](/security/notices?release=precise)
* [Ubuntu 11.10](/security/notices?release=oneiric)
* [Ubuntu 10.04](/security/notices?release=lucid)

## Packages

* [firefox](/security/cves?package=firefox) - Mozilla Open Source web browser

## Details

Olli Pettay, Christoph Diehl, Gary Kwong, Jesse Ruderman, Andrew McCreight,

Joe Drew, Wayne Mery, Alon Zakai, Christian Holler, Gary Kwong, Luke

Wagner, Terrence Cole, Timothy Nikkel, Bill McCloskey, and Nicolas Pierron

discovered multiple memory safety issues affecting Firefox. If the user

were tricked into opening a specially crafted page, an attacker could

possibly exploit these to cause a denial of service via application crash.

([CVE-2013-0783](/security/CVE-2013-0783), [CVE-2013-0784](/security/CVE-2013-0784))

Atte Kettunen discovered that Firefox could perform an out-of-bounds read

while rendering GIF format images. An attacker could exploit this to crash

Firefox. ([CVE-2013-0772](/security/CVE-2013-0772))

Boris Zbarsky discovered that Firefox did not properly handle some wrapped

WebIDL objects. If the user were tricked into opening a specially crafted

page, an attacker could possibly exploit this to cause a denial of service

via application crash, or potentially execute code with the privileges of

the user invoking Firefox. ([CVE-2013-0765](/security/CVE-2013-0765))

Bobby Holley discovered vulnerabilities in Chrome Object Wrappers (COW) and

System Only Wrappers (SOW). If a user were tricked into opening a specially

crafted page, a remote attacker could exploit this to bypass security

protections to obtain sensitive information or potentially execute code

with the privileges of the user invoking Firefox. ([CVE-2013-0773](/security/CVE-2013-0773))

Frederik Braun discovered that Firefox made the location of the active

browser profile available to JavaScript workers. ([CVE-2013-0774](/security/CVE-2013-0774))

A use-after-free vulnerability was discovered in Firefox. An attacker could

potentially exploit this to execute code with the privileges of the user

invoking Firefox. ([CVE-2013-0775](/security/CVE-2013-0775))

Michal Zalewski discovered that Firefox would not always show the correct

address when cancelling a proxy authentication prompt. A remote attacker

could exploit this to conduct URL spoofing and phishing attacks.

([CVE-2013-0776](/security/CVE-2013-0776))

Abhishek Arya discovered several problems related to memory handling. If

the user were tricked into opening a specially crafted page, an attacker

could possibly exploit these to cause a denial of service via application

crash, or potentially execute code with the privileges of the user invoking

Firefox. ([CVE-2013-0777](/security/CVE-2013-0777), [CVE-2013-0778](/security/CVE-2013-0778), [CVE-2013-0779](/security/CVE-2013-0779), [CVE-2013-0780](/security/CVE-2013-0780),

[CVE-2013-0781](/security/CVE-2013-0781), [CVE-2013-0782](/security/CVE-2013-0782))

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Update instructions

The problem can be corrected by updating your system to the following package versions:

##### Ubuntu 12.10

* [firefox](https://launchpad.net/ubuntu/%2Bsource/firefox)
  -
  [19.0+build1-0ubuntu0.12.10.1](https://launchpad.net/ubuntu/%2Bsource/firefox/19.0%2Bbuild1-0ubuntu0.12.10.1)

##### Ubuntu 12.04

* [firefox](https://launchpad.net/ubuntu/%2Bsource/firefox)
  -
  [19.0+build1-0ubuntu0.12.04.1](https://launchpad.net/ubuntu/%2Bsource/firefox/19.0%2Bbuild1-0ubuntu0.12.04.1)

##### Ubuntu 11.10

* [firefox](https://launchpad.net/ubuntu/%2Bsource/firefox)
  -
  [19.0+build1-0ubuntu0.11.10.1](https://launchpad.net/ubuntu/%2Bsource/firefox/19.0%2Bbuild1-0ubuntu0.11.10.1)

##### Ubuntu 10.04

* [firefox](https://launchpad.net/ubuntu/%2Bsource/firefox)
  -
  [19.0+build1-0ubuntu0.10.04.1](https://launchpad.net/ubuntu/%2Bsource/firefox/19.0%2Bbuild1-0ubuntu0.10.04.1)

After a standard system update you need to restart Firefox to make all the

necessary changes.

## References

* [CVE-2013-0765](/security/CVE-2013-0765)
* [CVE-2013-0772](/security/CVE-2013-0772)
* [CVE-2013-0773](/security/CVE-2013-0773)
* [CVE-2013-0774](/security/CVE-2013-0774)
* [CVE-2013-0775](/security/CVE-2013-0775)
* [CVE-2013-0776](/security/CVE-2013-0776)
* [CVE-2013-0777](/security/CVE-2013-0777)
* [CVE-2013-0778](/security/CVE-2013-0778)
* [CVE-2013-0779](/security/CVE-2013-0779)
* [CVE-2013-0780](/security/CVE-2013-0780)
* [CVE-2013-0781](/security/CVE-2013-0781)
* [CVE-2013-0782](/security/CVE-2013-0782)
* [CVE-2013-0783](/security/CVE-2013-0783)
* [CVE-2013-0784](/security/CVE-2013-0784)
* <https://launchpad.net/bugs/1128883>

## Related notices

* [USN-1748-1](/security/notices/USN-1748-1)

### Join the discussion

* [Ubuntu security updates mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened)
* [Security announcements mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-security-announce)

### Need help with your security needs?

Ubuntu Pro provides up to ten-year security coverage for over 23,000 open-source packages within the Ubuntu Main and Universe repositories.

[Talk to an expert to find out what would work best for you](/contact-us/form?product=pro)

### Further reading

* *Loading...*

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page



=== Content from bugzilla.mozilla.org_ef6341a7_20250124_202813.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/830943)
* [XML](/show_bug.cgi?ctype=xml&id=830943)

Closed
[Bug 830943](/show_bug.cgi?id=830943)

Opened 12 years ago
Closed 12 years ago

# Incorrect behavior on emscripten "bullet" test

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

Incorrect behavior on emscripten "bullet" test

## Categories

### (Core :: JavaScript Engine, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=JavaScript%20Engine#JavaScript%20Engine)

JavaScript Engine
▾

Core :: JavaScript Engine
The interpreter engine for the core JavaScript language, independent of the browser's object model. File ONLY core JavaScript language bugs in this category. For bugs involving browser objects such as "window" and "document", use the "DOM" component. For bugs involving calls between JavaScript and C++, use the "XPConnect" component.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=JavaScript%20Engine)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

unspecified

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

x86\_64

Linux

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

normal

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla21

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Webcompat Priority | --- |
| --- | --- |
| Performance Impact | --- |
| Accessibility Severity | --- |
| Webcompat Score | --- |
| a11y-review | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox18 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=wontfix) |
| firefox19 | [+](/buglist.cgi?f1=cf_tracking_firefox19&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=fixed) |
| firefox20 | [+](/buglist.cgi?f1=cf_tracking_firefox20&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox20&o1=equals&v1=fixed) |
| firefox21 | [+](/buglist.cgi?f1=cf_tracking_firefox21&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox21&o1=equals&v1=fixed) |
| firefox-esr17 | --- | [unaffected](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=unaffected) |
| b2g18 | --- | [disabled](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=disabled) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox18 |  | wontfix |
| firefox19 | + | fixed |
| firefox20 | + | fixed |
| firefox21 | + | fixed |
| firefox-esr17 |  | unaffected |
| b2g18 |  | disabled |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: azakai, Assigned: jandem)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/709c5feed942bf99f098bb24aa1cc86f?d=mm&size=40)  [jandem](/user_profile?user_id=375297)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/eb99fcafb63ef68fdb19a269f4d3e3eb?d=mm&size=40)  [azakai](/user_profile?user_id=381546)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/4fe52ee1503aecf7b6c976b8eb7c1753?d=mm&size=40)  [willyelm](/user_profile?user_id=714609)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

8 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

---

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Keywords: sec-critical, Whiteboard: [adv-main19+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[sec-critical](/buglist.cgi?keywords=sec-critical&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[adv-main19+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [RyanVM](/user_profile?user_id=75935) | [in-testsuite](#c19 "12 years ago") | + |
| --- | --- | --- |
| [RyanVM](/user_profile?user_id=75935) | in-testsuite | + |
| --- | --- | --- |
|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (4 files, 1 obsolete file)

| [bullet testcase](/attachment.cgi?id=702476)  [12 years ago](#c0)  [Alon Zakai (:azakai)](/user_profile?user_id=381546)   3.03 MB, application/javascript |  | [Details](/attachment.cgi?id=702476&action=edit) |
| --- | --- | --- |
| [Part 1: Fix](/attachment.cgi?id=702786)  [12 years ago](#c1)  [Jan de Mooij [:jandem]](/user_profile?user_id=375297)   1.25 KB, patch | dvander : [review+](#c5 "12 years ago")  akeybl : [approval-mozilla-aurora+](#c16 "12 years ago")  akeybl : [approval-mozilla-beta+](#c16 "12 years ago")  abillings : [sec-approval+](#a101683_280903 "12 years ago") | [Details](/attachment.cgi?id=702786&action=edit) | [Diff](/attachment.cgi?id=702786&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=830943&attachment=702786) |
| [Part 2: Add asserts, test case](/attachment.cgi?id=702788)  [12 years ago](#c2)  [Jan de Mooij [:jandem]](/user_profile?user_id=375297)   13.86 KB, patch |  | [Details](/attachment.cgi?id=702788&action=edit) | [Diff](/attachment.cgi?id=702788&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=830943&attachment=702788) |
| [Part 2: Add asserts, test case](/attachment.cgi?id=702794)  [12 years ago](#c4)  [Jan de Mooij [:jandem]](/user_profile?user_id=375297)   14.18 KB, patch | dvander : [review+](#a79610_309316 "12 years ago")  decoder : [feedback+](#c14 "12 years ago")  gkw : [feedback+](#c13 "12 years ago") | [Details](/attachment.cgi?id=702794&action=edit) | [Diff](/attachment.cgi?id=702794&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=830943&attachment=702794) |
| [another testcase, zlib](/attachment.cgi?id=703022)  [12 years ago](#c7)  [Alon Zakai (:azakai)](/user_profile?user_id=381546)   375.40 KB, text/plain |  | [Details](/attachment.cgi?id=703022&action=edit) |

Show Obsolete

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Alon Zakai (:azakai)](/user_profile?user_id=381546)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=830943#c0)• 12 years ago |
|  | |

Attached file
[bullet testcase](attachment.cgi?id=702476)
— [Details](attachment.cgi?id=702476&action=edit)

Another failure on the emscripten test suite on x86\_64. Works with --no-ion or in v8, fails with ion.

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=830943#a60293_375297)• 12 years ago |

Assignee: general → jdemooijGroup: core-security

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297)  Assignee |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=830943#c1)• 12 years ago |
|  | |

Attached patch

[Part 1: Fix](attachment.cgi?id=702786&action=diff)
— [Details](attachment.cgi?id=702786&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=830943&attachment=702786)

Tricky IonMonkey bug.
Lowering allocates argument slots for calls (allocateArguments and freeArguments). This only works if MPrepareCall and MCall are property "nested" though, and due to the way tableswitch blocks are ordered it's possible to break this invariant (with inlining + nested calls).
The attached patch fixes the tableswitch block ordering and makes sure the argument allocation code works properly. The next patch will add asserts to catch similar bugs.
[Attachment #702786](/attachment.cgi?id=702786&action=edit "Part 1: Fix") -
Flags: review?(dvander)

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297)  Assignee |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=830943#c2)• 12 years ago |
|  | |

Attached patch

[Part 2: Add asserts, test case](attachment.cgi?id=702788&action=diff) (obsolete)
— [Details](attachment.cgi?id=702788&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=830943&attachment=702788)

This patch adds a (debug-only) stack of MPrepareCall instructions to Lowering, so that we can ensure allocateArguments and freeArguments properly match. The testcase asserts without the previous patch.
[Attachment #702788](/attachment.cgi?id=702788&action=edit "Part 2: Add asserts, test case") -
Flags: review?(dvander)

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297)  Assignee |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=830943#c3)• 12 years ago |
|  | |

Pretty sure this bug has been here since Ion landed on m-c.
[status-firefox18](/buglist.cgi?f1=cf_status_firefox18&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=affected)
[status-firefox19](/buglist.cgi?f1=cf_status_firefox19&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=affected)
[status-firefox20](/buglist.cgi?f1=cf_status_firefox20&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox20&o1=equals&v1=affected)
[status-firefox21](/buglist.cgi?f1=cf_status_firefox21&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox21&o1=equals&v1=affected)
[tracking-firefox19](/buglist.cgi?f1=cf_tracking_firefox19&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox19&o1=equals&v1=%3F)
[tracking-firefox20](/buglist.cgi?f1=cf_tracking_firefox20&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox20&o1=equals&v1=%3F)
[tracking-firefox21](/buglist.cgi?f1=cf_tracking_firefox21&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox21&o1=equals&v1=%3F)

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=830943#a61445_375297)• 12 years ago |

Status: NEW → ASSIGNEDKeywords: [sec-critical](/buglist.cgi?keywords=sec-critical&resolution=---)

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297)  Assignee |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=830943#c4)• 12 years ago |
|  | |

Attached patch

[Part 2: Add asserts, test case](attachment.cgi?id=702794&action=diff)
— [Details](attachment.cgi?id=702794&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=830943&attachment=702794)

[Attachment #702788](/attachment.cgi?id=702788&action=edit "Part 2: Add asserts, test case") -
Attachment is obsolete: true
[Attachment #702788](/attachment.cgi?id=702788&action=edit "Part 2: Add asserts, test case") -
Flags: review?(dvander)
[Attachment #702794](/attachment.cgi?id=702794&action=edit "Part 2: Add asserts, test case") -
Flags: review?(dvander)

|  | [David Anderson [:dvander] - inactive, e-mail if emergency](/user_profile?user_id=309316) |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=830943#c5)• 12 years ago |
|  | |

Comment on [attachment 702786](/attachment.cgi?id=702786 "Part 1: Fix") [[details]](/attachment.cgi?id=702786&action=edit "Part 1: Fix") [[diff]](/attachment.cgi?id=702786&action=diff "Part 1: Fix") [[review]](/page.cgi?id=splinter.html&ignore=&bug=830943&attachment=702786)
Part 1: Fix
Good catch.
[Attachment #702786](/attachment.cgi?id=702786&action=edit "Part 1: Fix") -
Flags: review?(dvander) → review+

|  | [David Anderson [:dvander] - inactive, e-mail if emergency](/user_profile?user_id=309316) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=830943#a79610_309316)• 12 years ago |

[Attachment #702794](/attachment.cgi?id=702794&action=edit "Part 2: Add asserts, test case") -
Flags: review?(dvander) → review+

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297)  Assignee |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=830943#c6)• 12 years ago |
|  | |

Comment on [attachment 702786](/attachment.cgi?id=702786 "Part 1: Fix") [[details]](/attachment.cgi?id=702786&action=edit "Part 1: Fix") [[diff]](/attachment.cgi?id=702786&action=diff "Part 1: Fix") [[review]](/page.cgi?id=splinter.html&ignore=&bug=830943&attachment=702786)
Part 1: Fix
[Security approval request comment]
How easily could an exploit be constructed based on the patch?
Extremely hard.
Do comments in the patch, the check-in comment, or tests included in the patch paint a bulls-eye on the security problem?
No.
Which older supported branches are affected by this flaw?
Firefox 18, 19, 20
If not all supported branches, which bug introduced the flaw?
IonMonkey.
Do you have backports for the affected branches? If not, how different, hard to create, and risky will they be?
Backporting is easy, patch moves 2 lines of code.
How likely is this patch to cause regressions; how much testing does it need?
Regressions are unlikely, usual nightly testing + fuzzing should be enough.
[Attachment #702786](/attachment.cgi?id=702786&action=edit "Part 1: Fix") -
Flags: sec-approval?

|  | [Lukas Blakk [:lsblakk] use ?needinfo](/user_profile?user_id=272375) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=830943#a84366_272375)• 12 years ago |

[tracking-firefox19](/buglist.cgi?f1=cf_tracking_firefox19&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox19&o1=equals&v1=%3F) → [+](/buglist.cgi?f1=cf_tracking_firefox19&o1=equals&v1=%2B)
[tracking-firefox20](/buglist.cgi?f1=cf_tracking_firefox20&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox20&o1=equals&v1=%3F) → [+](/buglist.cgi?f1=cf_tracking_firefox20&o1=equals&v1=%2B)
[tracking-firefox21](/buglist.cgi?f1=cf_tracking_firefox21&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox21&o1=equals&v1=%3F) → [+](/buglist.cgi?f1=cf_tracking_firefox21&o1=equals&v1=%2B)

|  | [Alon Zakai (:azakai)](/user_profile?user_id=381546)  Reporter |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=830943#c7)• 12 years ago |
|  | |

Attached file
[another testcase, zlib](attachment.cgi?id=703022)
— [Details](attachment.cgi?id=703022&action=edit)

I found another failing testcase, same symptoms as before (fails with ion, works without it), and this patch fixes it as well. So I guess the testcase is not needed, but attaching anyhow if it's useful in some way.

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=830943#a101683_280903)• 12 years ago |

[Attachment #702786](/attachment.cgi?id=702786&action=edit "Part 1: Fix") -
Flags: sec-approval? → sec-approval+

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297)  Assignee |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=830943#c8)• 12 years ago |
|  | |

Part 1:
<https://hg.mozilla.org/integration/mozilla-inbound/rev/9db432271c1b>

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297)  Assignee |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=830943#c9)• 12 years ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/9db432271c1b>Status: ASSIGNED → RESOLVEDClosed: 12 years agoResolution: --- → FIXED

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297)  Assignee |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=830943#c10)• 12 years ago |
|  | |

Comment on [attachment 702786](/attachment.cgi?id=702786 "Part 1: Fix") [[details]](/attachment.cgi?id=702786&action=edit "Part 1: Fix") [[diff]](/attachment.cgi?id=702786&action=diff "Part 1: Fix") [[review]](/page.cgi?id=splinter.html&ignore=&bug=830943&attachment=702786)
Part 1: Fix
[Approval Request Comment]
Bug caused by (feature/regressing bug #): IonMonkey
User impact if declined: security bugs, crashes, correctness issues
Testing completed (on m-c, etc.): on m-c
Risk to taking this patch (and alternatives if risky): Very low risk
String or UUID changes made by this patch: None
[Attachment #702786](/attachment.cgi?id=702786&action=edit "Part 1: Fix") -
Flags: approval-mozilla-beta?
[Attachment #702786](/attachment.cgi?id=702786&action=edit "Part 1: Fix") -
Flags: approval-mozilla-aurora?

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297)  Assignee |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=830943#c11)• 12 years ago |
|  | |

Comment on [attachment 702794](/attachment.cgi?id=702794 "Part 2: Add asserts, test case") [[details]](/attachment.cgi?id=702794&action=edit "Part 2: Add asserts, test case") [[diff]](/attachment.cgi?id=702794&action=diff "Part 2: Add asserts, test case") [[review]](/page.cgi?id=splinter.html&ignore=&bug=830943&attachment=702794)
Part 2: Add asserts, test case
decoder, gary: can you guys give this patch (part 2) some fuzzing? It should be applied to m-c or m-i tip. I will land it when part 1 has made its way to mozilla-release, but it would be good to give this patch some fuzzing to find similar bugs before that happens.
[Attachment #702794](/attachment.cgi?id=702794&action=edit "Part 2: Add asserts, test case") -
Flags: feedback?(gary)
[Attachment #702794](/attachment.cgi?id=702794&action=edit "Part 2: Add asserts, test case") -
Flags: feedback?(choller)

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=830943#c12)• 12 years ago |
|  | |

Fuzzing on langfuzz1 now :)

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034) |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=830943#c13)• 12 years ago |
|  | |

Comment on [attachment 702794](/attachment.cgi?id=702794 "Part 2: Add asserts, test case") [[details]](/attachment.cgi?id=702794&action=edit "Part 2: Add asserts, test case") [[diff]](/attachment.cgi?id=702794&action=diff "Part 2: Add asserts, test case") [[review]](/page.cgi?id=splinter.html&ignore=&bug=830943&attachment=702794)
Part 2: Add asserts, test case
(In reply to Jan de Mooij [:jandem] from [comment #11](/show_bug.cgi?id=830943#c11 "RESOLVED FIXED - Incorrect behavior on emscripten \"bullet\" test"))
> Comment on [attachment 702794](/attachment.cgi?id=702794 "Part 2: Add asserts, test case") [[details]](/attachment.cgi?id=702794&action=edit "Part 2: Add asserts, test case") [[diff]](/attachment.cgi?id=702794&action=diff "Part 2: Add asserts, test case") [[review]](/page.cgi?id=splinter.html&ignore=&bug=830943&attachment=702794)
> Part 2: Add asserts, test case
I didn't hit anything particularly bad after some overnight fuzzing -> feedback+
[Attachment #702794](/attachment.cgi?id=702794&action=edit "Part 2: Add asserts, test case") -
Flags: feedback?(gary) → feedback+

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101) |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=830943#c14)• 12 years ago |
|  | |

Comment on [attachment 702794](/attachment.cgi?id=702794 "Part 2: Add asserts, test case") [[details]](/attachment.cgi?id=702794&action=edit "Part 2: Add asserts, test case") [[diff]](/attachment.cgi?id=702794&action=diff "Part 2: Add asserts, test case") [[review]](/page.cgi?id=splinter.html&ignore=&bug=830943&attachment=702794)
Part 2: Add asserts, test case
feedback+, no issues found till now :)
[Attachment #702794](/attachment.cgi?id=702794&action=edit "Part 2: Add asserts, test case") -
Flags: feedback?(choller) → feedback+

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297)  Assignee |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=830943#c15)• 12 years ago |
|  | |

(In reply to Gary Kwong [:gkw] from [comment #13](/show_bug.cgi?id=830943#c13 "RESOLVED FIXED - Incorrect behavior on emscripten \"bullet\" test"))
> I didn't hit anything particularly bad after some overnight fuzzing ->
> feedback+
(In reply to Christian Holler (:decoder) from [comment #14](/show_bug.cgi?id=830943#c14 "RESOLVED FIXED - Incorrect behavior on emscripten \"bullet\" test"))
> feedback+, no issues found till now :)
Thanks! Then I will just push this patch next month :)

|  | [Alex Keybl [:akeybl]](/user_profile?user_id=425645) |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=830943#c16)• 12 years ago |
|  | |

Comment on [attachment 702786](/attachment.cgi?id=702786 "Part 1: Fix") [[details]](/attachment.cgi?id=702786&action=edit "Part 1: Fix") [[diff]](/attachment.cgi?id=702786&action=diff "Part 1: Fix") [[review]](/page.cgi?id=splinter.html&ignore=&bug=830943&attachment=702786)
Part 1: Fix
Very low risk fix for a tracked sg:crit issue. Let's land on branches.
[Attachment #702786](/attachment.cgi?id=702786&action=edit "Part 1: Fix") -
Flags: approval-mozilla-beta?
[Attachment #702786](/attachment.cgi?id=702786&action=edit "Part 1: Fix") -
Flags: approval-mozilla-beta+
[Attachment #702786](/attachment.cgi?id=702786&action=edit "Part 1: Fix") -
Flags: approval-mozilla-aurora?
[Attachment #702786](/attachment.cgi?id=702786&action=edit "Part 1: Fix") -
Flags: approval-mozilla-aurora+

|  | [Alex Keybl [:akeybl]](/user_profile?user_id=425645) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=830943#a582320_425645)• 12 years ago |

[status-b2g18](/buglist.cgi?f1=cf_status_b2g18&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=unaffected)
[status-firefox-esr17](/buglist.cgi?f1=cf_status_firefox_esr17&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=unaffected)

|  | [Alex Keybl [:akeybl]](/user_profile?user_id=425645) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=830943#a582338_425645)• 12 years ago |

[status-b2g18](/buglist.cgi?f1=cf_status_b2g18&o1=isnotempty):
[unaffected](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=unaffected) → ---

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297)  Assignee |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=830943#c17)• 12 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-aurora/rev/6624fe215f6d>
<https://hg.mozilla.org/releases/mozilla-beta/rev/608e239e0e14>
[status-firefox19](/buglist.cgi?f1=cf_status_firefox19&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=fixed)
[status-firefox20](/buglist.cgi?f1=cf_status_firefox20&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox20&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox20&o1=equals&v1=fixed)
[status-firefox21](/buglist.cgi?f1=cf_status_firefox21&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox21&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox21&o1=equals&v1=fixed)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=830943#a791879_1689)• 12 years ago |

[status-b2g18](/buglist.cgi?f1=cf_status_b2g18&o1=isnotempty):
--- → [disabled](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=disabled)
[status-firefox18](/buglist.cgi?f1=cf_status_firefox18&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=wontfix)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=830943#a2514638_280903)• 12 years ago |

Whiteboard: [adv-main19+]

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297)  Assignee |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=830943#c18)• 12 years ago |
|  | |

Pushed part 2:
<https://hg.mozilla.org/integration/mozilla-inbound/rev/64bdaa6a86cd>
(Linux Try run looks good: <https://tbpl.mozilla.org/?tree=Try&rev=bdd7c595daf2>)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=830943#c19)• 12 years ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/64bdaa6a86cd>Flags: in-testsuite+Target Milestone: --- → mozilla21

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=830943#a27131309_1689)• 11 years ago |

Group: core-security
You need to [log in](/show_bug.cgi?id=830943&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Alon Zakai (:azakai)](/user_profile?user_id=381546)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from bugzilla.mozilla.org_c436fb03_20250124_202757.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/766452)
* [XML](/show_bug.cgi?ctype=xml&id=766452)

Closed
[Bug 766452](/show_bug.cgi?id=766452)

Opened 13 years ago
Closed 12 years ago

# Crash [@ OpenTypeReorderingOutput::getStringIndex] with measureText, Kannada script, ZWJ

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

Crash [@ OpenTypeReorderingOutput::getStringIndex] with measureText, Kannada script, ZWJ

## Categories

### (Core :: Graphics, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=Graphics#Graphics)

Graphics
▾

Core :: Graphics
Mapping of cross platform rendering interfaces to various 2D graphics APIs
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=Graphics&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=Graphics&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=Graphics)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

x86\_64

macOS

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

critical

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla19

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| a11y-review | --- |
| --- | --- |
| Webcompat Priority | --- |
| Performance Impact | --- |
| Accessibility Severity | --- |
| Webcompat Score | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox18 | --- | [affected](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=affected) |
| firefox19 | --- | [fixed](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=fixed) |
| firefox20 | --- | [fixed](/buglist.cgi?f1=cf_status_firefox20&o1=equals&v1=fixed) |
| firefox21 | --- | [fixed](/buglist.cgi?f1=cf_status_firefox21&o1=equals&v1=fixed) |
| firefox-esr17 | [-](/buglist.cgi?f1=cf_tracking_firefox_esr17&o1=equals&v1=-) | [wontfix](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=wontfix) |
| b2g18 | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=unaffected) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox18 |  | affected |
| firefox19 |  | fixed |
| firefox20 |  | fixed |
| firefox21 |  | fixed |
| firefox-esr17 | - | wontfix |
| b2g18 |  | unaffected |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: jruderman, Unassigned)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

*Unassigned*

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/d2dc9227eafcd0ec5ba3712ee4f19b75?d=mm&size=40)  [jruderman](/user_profile?user_id=11608)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/17436ade8da1b23d42b3df05b9c4fc77?d=mm&size=40)  [bhood](/user_profile?user_id=697075)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

4 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

[797402](/show_bug.cgi?id=797402 "RESOLVED FIXED - use harfbuzz for all OpenType text shaping on OS X")

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[textfuzzer](/show_bug.cgi?id=377438 "RESOLVED FIXED - [meta] Text fuzzer")

[379903](/show_bug.cgi?id=379903 "RESOLVED FIXED - [meta] Bugs found by Paul's \"Canvas API Fuzzer\"")

Dependency [tree](/showdependencytree.cgi?id=766452&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=766452)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Keywords: crash, sec-vector, testcase, Whiteboard: [rdar://11707231][adv-main19+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[crash](/buglist.cgi?keywords=crash&resolution=---),
[sec-vector](/buglist.cgi?keywords=sec-vector&resolution=---),
[testcase](/buglist.cgi?keywords=testcase&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[rdar://11707231][adv-main19+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [MatsPalmgren\_bugz](/user_profile?user_id=5168) | [in-testsuite](#a126342321_5168 "12 years ago") | + |
| --- | --- | --- |
| [MatsPalmgren\_bugz](/user_profile?user_id=5168) | in-testsuite | + |
| --- | --- | --- |
|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | qe-verify |  |

## Crash Data

Signature:

[[@ OpenTypeReorderingOutput::getStringIndex ]](https://crash-stats.mozilla.org/signature/?signature=OpenTypeReorderingOutput%3A%3AgetStringIndex)

[[@ CoreText@0x837b4 ]](https://crash-stats.mozilla.org/signature/?signature=CoreText%400x837b4)

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (3 files)

| [testcase (crashes Firefox when loaded)](/attachment.cgi?id=634753)  [13 years ago](#c0)  [Jesse Ruderman](/user_profile?user_id=11608)   122 bytes, text/html |  | [Details](/attachment.cgi?id=634753&action=edit) |
| --- | --- | --- |
| [stack trace](/attachment.cgi?id=634754)  [13 years ago](#c1)  [Jesse Ruderman](/user_profile?user_id=11608)   10.11 KB, text/plain |  | [Details](/attachment.cgi?id=634754&action=edit) |
| [modified testcase, also crashes Safari](/attachment.cgi?id=634808)  [13 years ago](#c2)  [Jonathan Kew [:jfkthame]](/user_profile?user_id=329583)   119 bytes, text/html |  | [Details](/attachment.cgi?id=634808&action=edit) |

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Jesse Ruderman](/user_profile?user_id=11608)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=766452#c0)• 13 years ago |
|  | |

Attached file
[testcase (crashes Firefox when loaded)](attachment.cgi?id=634753)
— [Details](attachment.cgi?id=634753&action=edit)

Loading the testcase makes Firefox crash
[@ OpenTypeReorderingOutput::getStringIndex ]
For Mac OS X 10.7.4 (11E53), this appears as
[@ CoreText@0x837b4 ] ([bp-53a19b57-4ff8-4617-8835-b68db2120620](https://crash-stats.mozilla.org/report/index/53a19b57-4ff8-4617-8835-b68db2120620))

|  | [Jesse Ruderman](/user_profile?user_id=11608)  Reporter |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=766452#c1)• 13 years ago |
|  | |

Attached file
[stack trace](attachment.cgi?id=634754)
— [Details](attachment.cgi?id=634754&action=edit)

|  | [Jonathan Kew [:jfkthame]](/user_profile?user_id=329583) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=766452#a11167_329583)• 13 years ago |

Group: core-security

|  | [Jonathan Kew [:jfkthame]](/user_profile?user_id=329583) |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=766452#c2)• 13 years ago |
|  | |

Attached file
[modified testcase, also crashes Safari](attachment.cgi?id=634808)
— [Details](attachment.cgi?id=634808&action=edit)

This is an Apple bug (within Core Text); here's a version of the testcase that crashes similarly (slightly different stack) in Safari on 10.7.

|  | [Jonathan Kew [:jfkthame]](/user_profile?user_id=329583) |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=766452#c3)• 13 years ago |
|  | |

(The original testcase didn't crash Safari, at least for me, because it happens to pick a different fallback font for the Kannada characters when no suitable font has been explicitly chosen.)

|  | [Jonathan Kew [:jfkthame]](/user_profile?user_id=329583) |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=766452#c4)• 13 years ago |
|  | |

I've filed [bug 766505](/show_bug.cgi?id=766505 "RESOLVED FIXED - update the default Mac font prefs to include Indic and other fonts now shipped with OS X") to update the Mac font prefs so that we'll use the AAT fonts shipped with current versions of OS X where possible. This prevents the crash with the original testcase, as we no longer fall back to Arial Unicode MS, and in general it will make this issue much less likely to show up.
Note that it doesn't really resolve the problem, though, because a page (like the second testcase) that explicitly chooses Arial Unicode MS (or, probably, other OpenType Kannada fonts) will still hit the Core Text bug here.

|  | [Jonathan Kew [:jfkthame]](/user_profile?user_id=329583) |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=766452#c5)• 13 years ago |
|  | |

Filed rdar://11707231 to report this to Apple.Whiteboard: [rdar://11707231]

|  | [Jesse Ruderman](/user_profile?user_id=11608)  Reporter |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=766452#c6)• 13 years ago |
|  | |

Thanks for investigating and for marking the bug as security-sensitive. The Safari crash is at null 2/3 of the time, but a random-looking address 1/3 of the time.

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=766452#a48768_1689)• 13 years ago |

Keywords: [sec-vector](/buglist.cgi?keywords=sec-vector&resolution=---)

|  | [Mats Palmgren (inactive)](/user_profile?user_id=5168) |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=766452#c7)• 12 years ago |
|  | |

Jonathan, did you get any response from Apple in rdar://11707231 ?Flags: needinfo?(jfkthame)

|  | [Jonathan Kew [:jfkthame]](/user_profile?user_id=329583) |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=766452#c8)• 12 years ago |
|  | |

Apple says: "We believe this issue has been addressed in OS X Mountain Lion 10.8, and there are no plans to backport the fix to OS X 10.7.x."
I haven't tested this myself yet, as I'm still running 10.7 here. Do you have a 10.8 system to verify this? Or maybe Jesse could do so.
Note that since [bug 797402](/show_bug.cgi?id=797402 "RESOLVED FIXED - use harfbuzz for all OpenType text shaping on OS X"), landed for FF19, we're no longer likely to run into this issue, as we shape Indic OpenType fonts using HarfBuzz instead of Core Text. (Setting gfx.font\_rendering.harfbuzz.scripts back to zero would force the use of the Core Text path in all cases, for testing purposes.)Flags: needinfo?(jfkthame)

|  | [Mats Palmgren (inactive)](/user_profile?user_id=5168) |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=766452#c9)• 12 years ago |
|  | |

Great, thanks. I'm also on 10.7 so I can't verify Apple has fixed it in 10.8.
I can confirm FF18 crashes, and that FF19 does not crash (with default prefs).
So can we resolve this bug since [bug 797402](/show_bug.cgi?id=797402 "RESOLVED FIXED - use harfbuzz for all OpenType text shaping on OS X") mitigates it (for all OSX versions)
in FF19 and later with default prefs?Depends on: [797402](/show_bug.cgi?id=797402 "RESOLVED FIXED - use harfbuzz for all OpenType text shaping on OS X")Flags: in-testsuite?

|  | [Jonathan Kew [:jfkthame]](/user_profile?user_id=329583) |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=766452#c10)• 12 years ago |
|  | |

Seems reasonable. Resolving as FIXED, even though for 10.7, it's fixed by changing our default prefs so as to avoid the problem code (in OS X) rather than fixing the underlying problem.
Note that FF18 remains vulnerable to this on OS X 10.7. Nothing we can do about that, really, unless we were to disable Indic OpenType shaping altogether for users of that version. But I don't think that's worth pursuing, with a fix already on the way in FF19.
Marking tracking-esr17? to bring this to esr drivers' notice; presumably esr17 remains vulnerable to this, as it would use the Core Text path for such fonts. I think we have three options there:
(a) Do nothing; accept that esr17 on OS X 10.7 may be vulnerable to this crash.
(b) Backport a harfbuzz update to support Indic shaping (I guess we'd want at least [bug 789687](/show_bug.cgi?id=789687 "RESOLVED FIXED - update harfbuzz to release 0.9.4 (or later)"), though if we're going to backport the library update, maybe we should go all the way to the current release), and then take the pref change from [bug 797402](/show_bug.cgi?id=797402 "RESOLVED FIXED - use harfbuzz for all OpenType text shaping on OS X") on esr17 as well; that would be the "proper" fix.
(c) Just take the pref change from [bug 797402](/show_bug.cgi?id=797402 "RESOLVED FIXED - use harfbuzz for all OpenType text shaping on OS X") on esr17, without updating harfbuzz. This would avoid the potential crash on 10.7, but would break shaping of Indic OpenType fonts for OS X users.
Personally, I'd lean towards (a), as I think (b) is too big a code change for ESR to justify for this issue, and (c) makes for a very negative user experience. (OK, crashing would also be a very negative experience, but I'm not aware of any indication that this is a widespread issue in the wild.) But over to ESR drivers here...Status: NEW → RESOLVEDClosed: 12 years ago
[status-firefox18](/buglist.cgi?f1=cf_status_firefox18&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=affected)
[status-firefox19](/buglist.cgi?f1=cf_status_firefox19&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=fixed)
[status-firefox20](/buglist.cgi?f1=cf_status_firefox20&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_firefox20&o1=equals&v1=fixed)
[status-firefox21](/buglist.cgi?f1=cf_status_firefox21&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_firefox21&o1=equals&v1=fixed)
[status-firefox-esr17](/buglist.cgi?f1=cf_status_firefox_esr17&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=affected)
[tracking-firefox-esr17](/buglist.cgi?f1=cf_tracking_firefox_esr17&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox_esr17&o1=equals&v1=%3F)Resolution: --- → FIXEDTarget Milestone: --- → mozilla19

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=766452#a19509565_1689)• 12 years ago |

[status-b2g18](/buglist.cgi?f1=cf_status_b2g18&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=unaffected)
[status-firefox-esr17](/buglist.cgi?f1=cf_status_firefox_esr17&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=wontfix)
[tracking-firefox-esr17](/buglist.cgi?f1=cf_tracking_firefox_esr17&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox_esr17&o1=equals&v1=%3F) → [-](/buglist.cgi?f1=cf_tracking_firefox_esr17&o1=equals&v1=-)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=766452#c11)• 12 years ago |
|  | |

Alex says the potential usability regression in (c) is too big for an ESR, even if we doubt very many macs are used in enterprises in the India region. Wontfixing for ESR-17

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=766452#a20699314_280903)• 12 years ago |

Whiteboard: [rdar://11707231] → [rdar://11707231][adv-main19+]

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=766452#a76286420_1689)• 10 years ago |

Group: core-security

|  | [Pulsebot](/user_profile?user_id=510726) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=766452#c12)• 9 years ago |
|  | |

Pushed by mpalmgren@mozilla.com:
<https://hg.mozilla.org/integration/mozilla-inbound/rev/3aa0385cd783>
crashtest.
<https://hg.mozilla.org/integration/mozilla-inbound/rev/472ed1fcc9b5>
crashtest.

|  | [Mats Palmgren (inactive)](/user_profile?user_id=5168) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=766452#a126342321_5168)• 9 years ago |

Flags: in-testsuite? → in-testsuite+

|  | [Wes Kocher (:KWierso) (Not reading bugmail; email directly if needed)](/user_profile?user_id=308534) |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=766452#c13)• 9 years ago |
| bugherder | |

<https://hg.mozilla.org/mozilla-central/rev/3aa0385cd783>
<https://hg.mozilla.org/mozilla-central/rev/472ed1fcc9b5>
You need to [log in](/show_bug.cgi?id=766452&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Jesse Ruderman](/user_profile?user_id=11608)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review


