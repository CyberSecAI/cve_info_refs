=== Content from bugzilla.mozilla.org_384992d8_20250126_054729.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Sat Jan 25 2025 21:47:29 PST

* **Bug ID:**
  814407,
  805814,
  816994,
  814839,
  812847,
  785358,
  808481,
  794426,
  805745

---

| [ID](/buglist.cgi?bug_id=814407%2C805814%2C816994%2C814839%2C812847%2C785358%2C808481%2C794426%2C805745&query_format=advanced&order=bug_id%20DESC&query_based_on=) | [Type](/buglist.cgi?bug_id=814407%2C805814%2C816994%2C814839%2C812847%2C785358%2C808481%2C794426%2C805745&query_format=advanced&order=bug_type%2Cbug_status%2Cpriority%2Cassigned_to%2Cbug_id&query_based_on=) | [Summary](/buglist.cgi?bug_id=814407%2C805814%2C816994%2C814839%2C812847%2C785358%2C808481%2C794426%2C805745&query_format=advanced&order=short_desc%2Cbug_status%2Cpriority%2Cassigned_to%2Cbug_id&query_based_on=) | [Product](/buglist.cgi?bug_id=814407%2C805814%2C816994%2C814839%2C812847%2C785358%2C808481%2C794426%2C805745&query_format=advanced&order=product%2Cbug_status%2Cpriority%2Cassigned_to%2Cbug_id&query_based_on=) | [Comp](/buglist.cgi?bug_id=814407%2C805814%2C816994%2C814839%2C812847%2C785358%2C808481%2C794426%2C805745&query_format=advanced&order=component%2Cbug_status%2Cpriority%2Cassigned_to%2Cbug_id&query_based_on=) | [Assignee▲](/buglist.cgi?bug_id=814407%2C805814%2C816994%2C814839%2C812847%2C785358%2C808481%2C794426%2C805745&query_format=advanced&order=assigned_to%20DESC%2Cbug_status%2Cpriority%2Cbug_id&query_based_on=) | [Status▲](/buglist.cgi?bug_id=814407%2C805814%2C816994%2C814839%2C812847%2C785358%2C808481%2C794426%2C805745&query_format=advanced&order=bug_status%20DESC%2Cpriority%2Cassigned_to%2Cbug_id&query_based_on=) | [Resolution](/buglist.cgi?bug_id=814407%2C805814%2C816994%2C814839%2C812847%2C785358%2C808481%2C794426%2C805745&query_format=advanced&order=resolution%2Cbug_status%2Cpriority%2Cassigned_to%2Cbug_id&query_based_on=) | [Updated](/buglist.cgi?bug_id=814407%2C805814%2C816994%2C814839%2C812847%2C785358%2C808481%2C794426%2C805745&query_format=advanced&order=changeddate%2Cbug_status%2Cpriority%2Cassigned_to%2Cbug_id&query_based_on=) |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |
| [805814](/show_bug.cgi?id=805814 "RESOLVED FIXED - Mesa heap buffer overflow, exposed by WebGL, mirroring Chrome issue 145525") |  | [Mesa heap buffer overflow, exposed by WebGL, mirroring Chrome issue 145525](/show_bug.cgi?id=805814) | Core | Graphics: CanvasWebG | jacob.benoit.1 | RESO | FIXE | 2016-12-01 |
| [814407](/show_bug.cgi?id=814407 "RESOLVED FIXED - Use after free in Mesa 8.0 after calling texImage2D on texture already attached to FBO in texture-attachment-formats.html test") |  | [Use after free in Mesa 8.0 after calling texImage2D on texture already attached to FBO in texture-attachment-formats.html test](/show_bug.cgi?id=814407) | Core | Graphics | jacob.benoit.1 | RESO | FIXE | 2014-02-28 |
| [814839](/show_bug.cgi?id=814839 "RESOLVED FIXED - WebGL crash [@mozilla::WebGLContext::Clear] during conformance test") |  | [WebGL crash [@mozilla::WebGLContext::Clear] during conformance test](/show_bug.cgi?id=814839) | Core | Graphics: CanvasWebG | milaninbugzilla | RESO | FIXE | 2013-08-23 |
| [794426](/show_bug.cgi?id=794426 "RESOLVED FIXED - Simultaneous calls to nsBuiltinDecoderStateMachine::StopAudioThread() cause problems") |  | [Simultaneous calls to nsBuiltinDecoderStateMachine::StopAudioThread() cause problems](/show_bug.cgi?id=794426) | Core | Audio/Video | roc | RESO | FIXE | 2015-10-16 |
| [812847](/show_bug.cgi?id=812847 "RESOLVED FIXED - Opus heap-buffer-overflow crash [@opus_multistream_decoder_init]") |  | [Opus heap-buffer-overflow crash [@opus\_multistream\_decoder\_init]](/show_bug.cgi?id=812847) | Core | Audio/Video | tterribe | RESO | FIXE | 2016-12-01 |
| [785358](/show_bug.cgi?id=785358 "VERIFIED FIXED - Assertion failure: fe->isType(type), at methodjit/Compiler.cpp:7623") |  | [Assertion failure: fe->isType(type), at methodjit/Compiler.cpp:7623](/show_bug.cgi?id=785358) | Core | JavaScript Engine | bhackett1024 | VERI | FIXE | 2013-04-30 |
| [808481](/show_bug.cgi?id=808481 "VERIFIED FIXED - \"Assertion failure: lifetime->entry == uint32_t(entryTarget - outerScript->code),\"") |  | ["Assertion failure: lifetime->entry == uint32\_t(entryTarget - outerScript->code),"](/show_bug.cgi?id=808481) | Core | JavaScript Engine | bhackett1024 | VERI | FIXE | 2013-04-30 |
| [816994](/show_bug.cgi?id=816994 "VERIFIED FIXED - Opus crash due to race [@opus_multistream_decode_native]") |  | [Opus crash due to race [@opus\_multistream\_decode\_native]](/show_bug.cgi?id=816994) | Core | Audio/Video | giles | VERI | FIXE | 2013-04-30 |
| [805745](/show_bug.cgi?id=805745 "VERIFIED FIXED - crash in nsWindow::OnPaint") |  | [crash in nsWindow::OnPaint](/show_bug.cgi?id=805745) | Core | Widget: Win32 | tnikkel | VERI | FIXE | 2013-04-30 |

9 bugs found.

|  |  | [REST](/rest/bug?include_fields=id,summary,status&bug_id=814407%2C805814%2C816994%2C814839%2C812847%2C785358%2C808481%2C794426%2C805745 "Query as a REST API request") | [CSV](/buglist.cgi?bug_id=814407%2C805814%2C816994%2C814839%2C812847%2C785358%2C808481%2C794426%2C805745&query_format=advanced&ctype=csv&human=1) | [Feed](/buglist.cgi?bug_id=814407%2C805814%2C816994%2C814839%2C812847%2C785358%2C808481%2C794426%2C805745&query_format=advanced&title=Bug%20List&ctype=atom) | [iCalendar](/buglist.cgi?bug_id=814407%2C805814%2C816994%2C814839%2C812847%2C785358%2C808481%2C794426%2C805745&query_format=advanced&ctype=ics)  [Change Columns](/colchange.cgi?bug_id=814407%2C805814%2C816994%2C814839%2C812847%2C785358%2C808481%2C794426%2C805745&query_format=advanced&query_based_on=) | [Edit Search](/query.cgi?bug_id=814407%2C805814%2C816994%2C814839%2C812847%2C785358%2C808481%2C794426%2C805745&query_format=advanced) |  | as |
| --- | --- | --- | --- | --- | --- |

[File
a new bug
in the "Core" product](/enter_bug.cgi?product=Core)



=== Content from lists.opensuse.org_6d48c287_20250125_034829.html ===


[![openSUSE](https://static.opensuse.org/favicon.svg)
Mailing Lists](/archives/ "openSUSE Mailing Lists")

[Sign In](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/G66UBQITDFVDWLB5VTID33IZ6IJYNOMK/)
[Sign Up](/accounts/signup/?next=/archives/list/security-announce%40lists.opensuse.org/message/G66UBQITDFVDWLB5VTID33IZ6IJYNOMK/)

[Manage this list](/manage/lists/security-announce.lists.opensuse.org/)
[Sign In](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/G66UBQITDFVDWLB5VTID33IZ6IJYNOMK/)
[Sign Up](/accounts/signup/?next=/archives/list/security-announce%40lists.opensuse.org/message/G66UBQITDFVDWLB5VTID33IZ6IJYNOMK/)

×
#### Keyboard Shortcuts

### Thread View

* `j`: Next unread message
* `k`: Previous unread message
* `j a`: Jump to all threads* `j l`: Jump to MailingList overview

[thread](/archives/list/security-announce%40lists.opensuse.org/thread/G66UBQITDFVDWLB5VTID33IZ6IJYNOMK/#G66UBQITDFVDWLB5VTID33IZ6IJYNOMK)

# [security-announce] openSUSE-SU-2013:0131-1: important: Mozilla Januarys

![](https://seccdn.libravatar.org/avatar/099a17325bdf082b643d1a6bbacde279.jpg?s=120&d=mm&r=g)
## [opensuse-security＠opensuse.org](/archives/users/1b72def497ef4503896cd7a5fe9fb8e0/ "See the profile for opensuse-security＠opensuse.org")

23 Jan
2013

23 Jan
'13

13:04

openSUSE Security Update: Mozilla Januarys
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
Announcement ID: openSUSE-SU-2013:0131-1
Rating: important
References: #796628 #796895
Cross-References: CVE-2012-0759 CVE-2012-5829 CVE-2013-0743
CVE-2013-0744 CVE-2013-0745 CVE-2013-0746
CVE-2013-0747 CVE-2013-0748 CVE-2013-0749
CVE-2013-0750 CVE-2013-0751 CVE-2013-0752
CVE-2013-0753 CVE-2013-0754 CVE-2013-0755
CVE-2013-0756 CVE-2013-0757 CVE-2013-0758
CVE-2013-0760 CVE-2013-0761 CVE-2013-0762
CVE-2013-0763 CVE-2013-0764 CVE-2013-0766
CVE-2013-0767 CVE-2013-0768 CVE-2013-0769
CVE-2013-0770 CVE-2013-0771
Affected Products:
openSUSE 11.4/standard/i586/patchinfo.40
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
An update that fixes 29 vulnerabilities is now available.
Description:
The Mozilla January 8th 2013 security release contains
updates:
Mozilla Firefox was updated to version 18.0. Mozilla
Seamonkey was updated to version 2.15. Mozilla Thunderbird
was updated to version 17.0.2.
\* MFSA 2013-01/CVE-2013-0749/CVE-2013-0769/CVE-2013-0770
Miscellaneous memory safety hazards
\* MFSA
2013-02/CVE-2013-0760/CVE-2013-0762/CVE-2013-0766/CVE-2013-0
767
CVE-2013-0761/CVE-2013-0763/CVE-2013-0771/CVE-2012-5829
Use-after-free and buffer overflow issues found using
Address Sanitizer
\* MFSA 2013-03/CVE-2013-0768 (bmo#815795) Buffer Overflow
in Canvas
\* MFSA 2013-04/CVE-2012-0759 (bmo#802026) URL spoofing in
addressbar during page loads
\* MFSA 2013-05/CVE-2013-0744 (bmo#814713) Use-after-free
when displaying table with many columns and column groups
\* MFSA 2013-06/CVE-2013-0751 (bmo#790454) Touch events are
shared across iframes
\* MFSA 2013-07/CVE-2013-0764 (bmo#804237) Crash due to
handling of SSL on threads
\* MFSA 2013-08/CVE-2013-0745 (bmo#794158)
AutoWrapperChanger fails to keep objects alive during
garbage collection
\* MFSA 2013-09/CVE-2013-0746 (bmo#816842) Compartment
mismatch with quickstubs returned values
\* MFSA 2013-10/CVE-2013-0747 (bmo#733305) Event
manipulation in plugin handler to bypass same-origin
policy
\* MFSA 2013-11/CVE-2013-0748 (bmo#806031) Address space
layout leaked in XBL objects
\* MFSA 2013-12/CVE-2013-0750 (bmo#805121) Buffer overflow
in Javascript string concatenation
\* MFSA 2013-13/CVE-2013-0752 (bmo#805024) Memory corruption
in XBL with XML bindings containing SVG
\* MFSA 2013-14/CVE-2013-0757 (bmo#813901) Chrome Object
Wrapper (COW) bypass through changing prototype
\* MFSA 2013-15/CVE-2013-0758 (bmo#813906) Privilege
escalation through plugin objects
\* MFSA 2013-16/CVE-2013-0753 (bmo#814001) Use-after-free in
serializeToStream
\* MFSA 2013-17/CVE-2013-0754 (bmo#814026) Use-after-free in
ListenerManager
\* MFSA 2013-18/CVE-2013-0755 (bmo#814027) Use-after-free in
Vibrate
\* MFSA 2013-19/CVE-2013-0756 (bmo#814029) Use-after-free in
Javascript Proxy objects
Mozilla NSPR was updated to 4.9.4, containing some small
bugfixes and new features.
Mozilla NSS was updated to 3.14.1 containing various new
features, security fix and bugfixes:
\* MFSA 2013-20/CVE-2013-0743 (bmo#825022, bnc#796628)
revoke mis-issued intermediate certificates from TURKTRUST
Cryptographic changes done:
\* Support for TLS 1.1 (RFC 4346)
\* Experimental support for DTLS 1.0 (RFC 4347) and
DTLS-SRTP (RFC 5764)
\* Support for AES-CTR, AES-CTS, and AES-GCM
\* Support for Keying Material Exporters for TLS (RFC 5705)
\* Support for certificate signatures using the MD5 hash
algorithm is now disabled by default
\* The NSS license has changed to MPL 2.0. Previous releases
were released under a MPL 1.1/GPL 2.0/LGPL 2.1
tri-license. For more information about MPL 2.0, please
see <http://www.mozilla.org/MPL/2.0/FAQ.html>. For an
additional explanation on GPL/LGPL compatibility, see
security/nss/COPYING in the source code.
\* Export and DES cipher suites are disabled by default.
Non-ECC AES and Triple DES cipher suites are enabled by
default
Please see <http://www.mozilla.org/security/announce/> for
more information.
Patch Instructions:
To install this openSUSE Security Update use YaST online\_update.
Alternatively you can run the command listed for your product:
- openSUSE 11.4/standard/i586/patchinfo.40:
zypper in -t patch 2013-4
To bring your system up-to-date, use "zypper patch".
Package List:
- openSUSE 11.4/standard/i586/patchinfo.40 (i586 x86\_64):
MozillaFirefox-18.0-57.1
MozillaFirefox-branding-upstream-18.0-57.1
MozillaFirefox-buildsymbols-18.0-57.1
MozillaFirefox-debuginfo-18.0-57.1
MozillaFirefox-debugsource-18.0-57.1
MozillaFirefox-devel-18.0-57.1
MozillaFirefox-translations-common-18.0-57.1
MozillaFirefox-translations-other-18.0-57.1
MozillaThunderbird-17.0.2-45.1
MozillaThunderbird-buildsymbols-17.0.2-45.1
MozillaThunderbird-debuginfo-17.0.2-45.1
MozillaThunderbird-debugsource-17.0.2-45.1
MozillaThunderbird-devel-17.0.2-45.1
MozillaThunderbird-devel-debuginfo-17.0.2-45.1
MozillaThunderbird-translations-common-17.0.2-45.1
MozillaThunderbird-translations-other-17.0.2-45.1
enigmail-1.5.0+17.0.2-45.1
enigmail-debuginfo-1.5.0+17.0.2-45.1
libfreebl3-3.14.1-51.1
libfreebl3-debuginfo-3.14.1-51.1
libsoftokn3-3.14.1-51.1
libsoftokn3-debuginfo-3.14.1-51.1
mozilla-nspr-4.9.4-20.1
mozilla-nspr-debuginfo-4.9.4-20.1
mozilla-nspr-debugsource-4.9.4-20.1
mozilla-nspr-devel-4.9.4-20.1
mozilla-nss-3.14.1-51.1
mozilla-nss-certs-3.14.1-51.1
mozilla-nss-certs-debuginfo-3.14.1-51.1
mozilla-nss-debuginfo-3.14.1-51.1
mozilla-nss-debugsource-3.14.1-51.1
mozilla-nss-devel-3.14.1-51.1
mozilla-nss-sysinit-3.14.1-51.1
mozilla-nss-sysinit-debuginfo-3.14.1-51.1
mozilla-nss-tools-3.14.1-51.1
mozilla-nss-tools-debuginfo-3.14.1-51.1
seamonkey-2.15-49.1
seamonkey-debuginfo-2.15-49.1
seamonkey-debugsource-2.15-49.1
seamonkey-dom-inspector-2.15-49.1
seamonkey-irc-2.15-49.1
seamonkey-translations-common-2.15-49.1
seamonkey-translations-other-2.15-49.1
seamonkey-venkman-2.15-49.1
- openSUSE 11.4/standard/i586/patchinfo.40 (x86\_64):
libfreebl3-32bit-3.14.1-51.1
libfreebl3-debuginfo-32bit-3.14.1-51.1
libsoftokn3-32bit-3.14.1-51.1
libsoftokn3-debuginfo-32bit-3.14.1-51.1
mozilla-nspr-32bit-4.9.4-20.1
mozilla-nspr-debuginfo-32bit-4.9.4-20.1
mozilla-nss-32bit-3.14.1-51.1
mozilla-nss-certs-32bit-3.14.1-51.1
mozilla-nss-certs-debuginfo-32bit-3.14.1-51.1
mozilla-nss-debuginfo-32bit-3.14.1-51.1
mozilla-nss-sysinit-32bit-3.14.1-51.1
mozilla-nss-sysinit-debuginfo-32bit-3.14.1-51.1
- openSUSE 11.4/standard/i586/patchinfo.40 (ia64):
libfreebl3-debuginfo-x86-3.14.1-51.1
libfreebl3-x86-3.14.1-51.1
libsoftokn3-debuginfo-x86-3.14.1-51.1
libsoftokn3-x86-3.14.1-51.1
mozilla-nspr-debuginfo-x86-4.9.4-20.1
mozilla-nspr-x86-4.9.4-20.1
mozilla-nss-certs-debuginfo-x86-3.14.1-51.1
mozilla-nss-certs-x86-3.14.1-51.1
mozilla-nss-debuginfo-x86-3.14.1-51.1
mozilla-nss-sysinit-debuginfo-x86-3.14.1-51.1
mozilla-nss-sysinit-x86-3.14.1-51.1
mozilla-nss-x86-3.14.1-51.1
References:
<http://support.novell.com/security/cve/CVE-2012-0759.html>
<http://support.novell.com/security/cve/CVE-2012-5829.html>
<http://support.novell.com/security/cve/CVE-2013-0743.html>
<http://support.novell.com/security/cve/CVE-2013-0744.html>
<http://support.novell.com/security/cve/CVE-2013-0745.html>
<http://support.novell.com/security/cve/CVE-2013-0746.html>
<http://support.novell.com/security/cve/CVE-2013-0747.html>
<http://support.novell.com/security/cve/CVE-2013-0748.html>
<http://support.novell.com/security/cve/CVE-2013-0749.html>
<http://support.novell.com/security/cve/CVE-2013-0750.html>
<http://support.novell.com/security/cve/CVE-2013-0751.html>
<http://support.novell.com/security/cve/CVE-2013-0752.html>
<http://support.novell.com/security/cve/CVE-2013-0753.html>
<http://support.novell.com/security/cve/CVE-2013-0754.html>
<http://support.novell.com/security/cve/CVE-2013-0755.html>
<http://support.novell.com/security/cve/CVE-2013-0756.html>
<http://support.novell.com/security/cve/CVE-2013-0757.html>
<http://support.novell.com/security/cve/CVE-2013-0758.html>
<http://support.novell.com/security/cve/CVE-2013-0760.html>
<http://support.novell.com/security/cve/CVE-2013-0761.html>
<http://support.novell.com/security/cve/CVE-2013-0762.html>
<http://support.novell.com/security/cve/CVE-2013-0763.html>
<http://support.novell.com/security/cve/CVE-2013-0764.html>
<http://support.novell.com/security/cve/CVE-2013-0766.html>
<http://support.novell.com/security/cve/CVE-2013-0767.html>
<http://support.novell.com/security/cve/CVE-2013-0768.html>
<http://support.novell.com/security/cve/CVE-2013-0769.html>
<http://support.novell.com/security/cve/CVE-2013-0770.html>
<http://support.novell.com/security/cve/CVE-2013-0771.html>
<https://bugzilla.novell.com/796628>
<https://bugzilla.novell.com/796895>
--
To unsubscribe, e-mail: opensuse-security-announce+unsubscribe@opensuse.org
For additional commands, e-mail: opensuse-security-announce+help@opensuse.org

[0](#like "You must be logged-in to vote.")
[0](#dislike "You must be logged-in to vote.")

Reply

[Sign in to reply online](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/G66UBQITDFVDWLB5VTID33IZ6IJYNOMK/)
Use email software

[Back to the thread](/archives/list/security-announce%40lists.opensuse.org/thread/G66UBQITDFVDWLB5VTID33IZ6IJYNOMK/#G66UBQITDFVDWLB5VTID33IZ6IJYNOMK)

[Back to the list](/archives/list/security-announce%40lists.opensuse.org/)

![HyperKitty](/static/hyperkitty/img/logo.png)
Powered by [HyperKitty](http://hyperkitty.readthedocs.org) version 1.3.12.



=== Content from bugzilla.mozilla.org_97c6989b_20250125_034835.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/794426)
* [XML](/show_bug.cgi?ctype=xml&id=794426)

Closed
[Bug 794426](/show_bug.cgi?id=794426)

Opened 12 years ago
Closed 12 years ago

# Simultaneous calls to nsBuiltinDecoderStateMachine::StopAudioThread() cause problems

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

Simultaneous calls to nsBuiltinDecoderStateMachine::StopAudioThread() cause problems

## Categories

### (Core :: Audio/Video, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=Audio%2FVideo#Audio%2FVideo)

Audio/Video
▾

Core :: Audio/Video
For problems related to media (video/audio) -- especially when the reporter is not sure which area of the media stack the problem is in. This category will mostly be for untriaged video/audio issues. Bugs in this category will typically be moved to another media category during the triage process.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=Audio%2FVideo&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=Audio%2FVideo&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=Audio%2FVideo)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

x86\_64

Windows 7

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

normal

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla20

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Accessibility Severity | --- |
| --- | --- |
| Webcompat Score | --- |
| Webcompat Priority | --- |
| Performance Impact | --- |
| a11y-review | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox17 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox17&o1=equals&v1=wontfix) |
| firefox18 | [+](/buglist.cgi?f1=cf_tracking_firefox18&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=fixed) |
| firefox19 | [+](/buglist.cgi?f1=cf_tracking_firefox19&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=fixed) |
| firefox20 | [+](/buglist.cgi?f1=cf_tracking_firefox20&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox20&o1=equals&v1=fixed) |
| firefox-esr10 | --- | [unaffected](/buglist.cgi?f1=cf_status_esr10&o1=equals&v1=unaffected) |
| firefox-esr17 | [18+](/buglist.cgi?f1=cf_tracking_firefox_esr17&o1=equals&v1=18%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=fixed) |
| b2g18 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=fixed) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox17 |  | wontfix |
| firefox18 | + | fixed |
| firefox19 | + | fixed |
| firefox20 | + | fixed |
| firefox-esr10 |  | unaffected |
| firefox-esr17 | 18+ | fixed |
| b2g18 |  | fixed |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: roc, Assigned: roc)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/e1cadeaaf04bd425d597a571ffe0f522?d=mm&size=40)  [roc](/user_profile?user_id=5038)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/e1cadeaaf04bd425d597a571ffe0f522?d=mm&size=40)  [roc](/user_profile?user_id=5038)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](extensions/Gravatar/web/default.jpg)  [jimm](/user_profile?user_id=279663)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

5 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

[826104](/show_bug.cgi?id=826104 "RESOLVED FIXED - Crash in MediaDecoder::UpdatePlaybackOffset"), [834667](/show_bug.cgi?id=834667 "VERIFIED FIXED - Firefox 17.0.2esr playing youtube video in html5 starts to leak serious amount of memory")

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[784918](/show_bug.cgi?id=784918 "RESOLVED FIXED - Heap-use-after-free in nsHTMLMediaElement::CaptureStreamInternal"), [813435](/show_bug.cgi?id=813435 "RESOLVED FIXED - Heap-use-after-free in mozilla::MediaDecoderStateMachine::StopAudioThread")

Dependency [tree](/showdependencytree.cgi?id=794426&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=794426)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Keywords: crash, sec-critical, Whiteboard: [adv-main18+][adv-esr17+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[crash](/buglist.cgi?keywords=crash&resolution=---),
[sec-critical](/buglist.cgi?keywords=sec-critical&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[adv-main18+][adv-esr17+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | in-testsuite |  |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (1 file, 1 obsolete file)

| [fix](/attachment.cgi?id=664897)  [12 years ago](#c1)  [Robert O'Callahan (:roc) (email my personal email if necessary)](/user_profile?user_id=5038)   6.42 KB, patch |  | [Details](/attachment.cgi?id=664897&action=edit) | [Diff](/attachment.cgi?id=664897&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=794426&attachment=664897) |
| --- | --- | --- |
| [fix](/attachment.cgi?id=688200)  [12 years ago](#c4)  [Robert O'Callahan (:roc) (email my personal email if necessary)](/user_profile?user_id=5038)   7.69 KB, patch | cpearce : [review+](#a6614597_287422 "12 years ago")  akeybl : [approval-mozilla-aurora+](#a7392518_425645 "12 years ago")  akeybl : [approval-mozilla-beta+](#a7392518_425645 "12 years ago")  akeybl : [approval-mozilla-b2g18+](#a7392518_425645 "12 years ago")  abillings : [sec-approval+](#c11 "12 years ago") | [Details](/attachment.cgi?id=688200&action=edit) | [Diff](/attachment.cgi?id=688200&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=794426&attachment=688200) |

Show Obsolete

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Robert O'Callahan (:roc) (email my personal email if necessary)](/user_profile?user_id=5038)  Assignee |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=794426#c0)• 12 years ago |
|  | |

Our code assumes that after the state machine thread has called StopAudioThread(), the audio thread is stopped. There is a situation where this is not true:
-- SetAudioCaptured gets called on the main thread, calling StopAudioThread from the main thread
-- main-thread StopAudioThread calls Shutdown() on the audio thread, and waits for it to shut down
-- meanwhile nsBuiltinDecoderStateMachine calls StopAudioThread()
-- state machine thread StopAudioThread calls Shutdown() on the audio thread, and returns immediately with an error because a thread can only be shut down by a single other thread
-- state machine thread carries on and cleans up stuff the audio thread is using --> crash

|  | [Robert O'Callahan (:roc) (email my personal email if necessary)](/user_profile?user_id=5038)  Assignee |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=794426#c1)• 12 years ago |
|  | |

Attached patch

[fix](attachment.cgi?id=664897&action=diff) (obsolete)
— [Details](attachment.cgi?id=664897&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=794426&attachment=664897)

[Attachment #664897](/attachment.cgi?id=664897&action=edit "fix") -
Flags: review?(cpearce)

|  | [Chris Pearce [:cpearce (Not reading bugmail)]](/user_profile?user_id=287422) |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=794426#c2)• 12 years ago |
|  | |

Comment on [attachment 664897](/attachment.cgi?id=664897 "fix") [[details]](/attachment.cgi?id=664897&action=edit "fix") [[diff]](/attachment.cgi?id=664897&action=diff "fix") [[review]](/page.cgi?id=splinter.html&ignore=&bug=794426&attachment=664897)
fix
Review of [attachment 664897](/attachment.cgi?id=664897 "fix") [[details]](/attachment.cgi?id=664897&action=edit "fix") [[diff]](/attachment.cgi?id=664897&action=diff "fix") [[review]](/page.cgi?id=splinter.html&ignore=&bug=794426&attachment=664897):
-----------------------------------------------------------------
I think we should avoid shutting down the audio thread from the main thread, as it will cause the JS context to block until the audio thread has shutdown, which may or may not be instantaneous; it'll introduce the possibility for jank.
How about in SetAudioCaptured() dispatching a runnable to the state machine thread to call StopAudioThread() instead? We can also have AudioLoop() check mAudioCaptured and exit if that's true to speed up the shutdown (similar to how we check for mState==SHUTDOWN).
::: content/media/nsBuiltinDecoderStateMachine.cpp
@@ +1517,5 @@
> if (mDecodeThread) {
> LOG(PR\_LOG\_DEBUG, ("%p Shutdown decode thread", mDecoder.get()));
> {
> ReentrantMonitorAutoExit exitMon(mDecoder->GetReentrantMonitor());
> + nsresult rv = mDecodeThread->Shutdown();
Does the same problem exist with the decode thread? Or are you just trying to prevent the same kind of error happening with the decode thread?

|  | [Chris Pearce [:cpearce (Not reading bugmail)]](/user_profile?user_id=287422) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=794426#a1611060_287422)• 12 years ago |

[Attachment #664897](/attachment.cgi?id=664897&action=edit "fix") -
Flags: review?(cpearce)

|  | [Robert O'Callahan (:roc) (email my personal email if necessary)](/user_profile?user_id=5038)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=794426#a5845901_5038)• 12 years ago |

Blocks: [784918](/show_bug.cgi?id=784918 "RESOLVED FIXED - Heap-use-after-free in nsHTMLMediaElement::CaptureStreamInternal")

|  | [Robert O'Callahan (:roc) (email my personal email if necessary)](/user_profile?user_id=5038)  Assignee |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=794426#c3)• 12 years ago |
|  | |

You're right that we need to not wait for the audio thread to shut down from SetAudioCaptured on the main thread.
The problem is that if the audio thread is running, and we're trying to copy data from the audio queue into one or more MediaStreams, MediaDecoderStateMachine::SendStreamData and MediaDecoderStateMachine::AudioLoop both want to be in charge of popping data from the audio queue. So we can't allow that to happen. I think probably the solution is to not run MediaDecoderStateMachine::SendStreamData at all until the audio thread has shut down.

|  | [Robert O'Callahan (:roc) (email my personal email if necessary)](/user_profile?user_id=5038)  Assignee |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=794426#c4)• 12 years ago |
|  | |

Attached patch

[fix](attachment.cgi?id=688200&action=diff)
— [Details](attachment.cgi?id=688200&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=794426&attachment=688200)

[Attachment #664897](/attachment.cgi?id=664897&action=edit "fix") -
Attachment is obsolete: true
[Attachment #688200](/attachment.cgi?id=688200&action=edit "fix") -
Flags: review?(cpearce)

|  | [Chris Pearce [:cpearce (Not reading bugmail)]](/user_profile?user_id=287422) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=794426#a6614597_287422)• 12 years ago |

[Attachment #688200](/attachment.cgi?id=688200&action=edit "fix") -
Flags: review?(cpearce) → review+

|  | [Robert O'Callahan (:roc) (email my personal email if necessary)](/user_profile?user_id=5038)  Assignee |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=794426#c5)• 12 years ago |
|  | |

<https://hg.mozilla.org/integration/mozilla-inbound/rev/9f30fd422239>

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=794426#c6)• 12 years ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/9f30fd422239>Status: NEW → RESOLVEDClosed: 12 years agoResolution: --- → FIXEDTarget Milestone: --- → mozilla20

|  | [Robert O'Callahan (:roc) (email my personal email if necessary)](/user_profile?user_id=5038)  Assignee |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=794426#c7)• 12 years ago |
|  | |

Comment on [attachment 688200](/attachment.cgi?id=688200 "fix") [[details]](/attachment.cgi?id=688200&action=edit "fix") [[diff]](/attachment.cgi?id=688200&action=diff "fix") [[review]](/page.cgi?id=splinter.html&ignore=&bug=794426&attachment=688200)
fix
[Approval Request Comment]
Bug caused by (feature/regressing bug #): MediaStreams captured from media elements
User impact if declined: possible security issue
Testing completed: just laned on m-c
Risk to taking this patch (and alternatives if risky): fairly low risk since it should only affect a feature that is pretty much unused currently
String or UUID changes made by this patch: None
[Attachment #688200](/attachment.cgi?id=688200&action=edit "fix") -
Flags: approval-mozilla-beta?
[Attachment #688200](/attachment.cgi?id=688200&action=edit "fix") -
Flags: approval-mozilla-b2g18?
[Attachment #688200](/attachment.cgi?id=688200&action=edit "fix") -
Flags: approval-mozilla-aurora?

|  | [Robert O'Callahan (:roc) (email my personal email if necessary)](/user_profile?user_id=5038)  Assignee |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=794426#c9)• 12 years ago |
|  | |

(In reply to Alex Keybl [:akeybl] from [comment #8](/show_bug.cgi?id=794426#c8 "RESOLVED FIXED - Simultaneous calls to nsBuiltinDecoderStateMachine::StopAudioThread() cause problems"))
> (In reply to Robert O'Callahan (:roc) (Mozilla Corporation) from [comment #7](/show_bug.cgi?id=794426#c7 "RESOLVED FIXED - Simultaneous calls to nsBuiltinDecoderStateMachine::StopAudioThread() cause problems"))
> > Bug caused by (feature/regressing bug #): MediaStreams captured from media
> > elements
>
> When did this land? Is it enabled by default?
Landed April 30 so it's been around for a while. Enabled by default.
> > User impact if declined: possible security issue
> > Testing completed: just laned on m-c
> > Risk to taking this patch (and alternatives if risky): fairly low risk since
> > it should only affect a feature that is pretty much unused currently
> > String or UUID changes made by this patch: None
>
> If this is a critical security bug, we should probably restrict it to the
> core-security group.
OK done.Group: core-security

|  | [Robert O'Callahan (:roc) (email my personal email if necessary)](/user_profile?user_id=5038)  Assignee |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=794426#c10)• 12 years ago |
|  | |

Comment on [attachment 688200](/attachment.cgi?id=688200 "fix") [[details]](/attachment.cgi?id=688200&action=edit "fix") [[diff]](/attachment.cgi?id=688200&action=diff "fix") [[review]](/page.cgi?id=splinter.html&ignore=&bug=794426&attachment=688200)
fix
[Security approval request comment]
How easily could an exploit be constructed based on the patch?
Not easily.
Do comments in the patch, the check-in comment, or tests included in the patch paint a bulls-eye on the security problem?
No.
Which older supported branches are affected by this flaw?
esr17 and release
If not all supported branches, which bug introduced the flaw?
Do you have backports for the affected branches? If not, how different, hard to create, and risky will they be?
Should be pretty easy to backport wherever needed.
How likely is this patch to cause regressions; how much testing does it need?
Not likely to cause noticeable regressions because it only affects a feature that's practically unused.
[Attachment #688200](/attachment.cgi?id=688200&action=edit "fix") -
Flags: sec-approval?

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=794426#c11)• 12 years ago |
|  | |

Comment on [attachment 688200](/attachment.cgi?id=688200 "fix") [[details]](/attachment.cgi?id=688200&action=edit "fix") [[diff]](/attachment.cgi?id=688200&action=diff "fix") [[review]](/page.cgi?id=splinter.html&ignore=&bug=794426&attachment=688200)
fix
sec-approval+. We should figure out if we want to take this on Aurora, Beta, and ESR.
[Attachment #688200](/attachment.cgi?id=688200&action=edit "fix") -
Flags: sec-approval? → sec-approval+

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=794426#a7301658_280903)• 12 years ago |

[status-firefox-esr10](/buglist.cgi?f1=cf_status_esr10&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_status_esr10&o1=equals&v1=%3F)
[status-firefox17](/buglist.cgi?f1=cf_status_firefox17&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox17&o1=equals&v1=affected)
[status-firefox18](/buglist.cgi?f1=cf_status_firefox18&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=affected)
[status-firefox19](/buglist.cgi?f1=cf_status_firefox19&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=affected)
[status-firefox20](/buglist.cgi?f1=cf_status_firefox20&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox20&o1=equals&v1=affected)
[status-firefox-esr17](/buglist.cgi?f1=cf_status_firefox_esr17&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=affected)
[tracking-firefox18](/buglist.cgi?f1=cf_tracking_firefox18&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox18&o1=equals&v1=%3F)
[tracking-firefox19](/buglist.cgi?f1=cf_tracking_firefox19&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox19&o1=equals&v1=%3F)
[tracking-firefox20](/buglist.cgi?f1=cf_tracking_firefox20&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox20&o1=equals&v1=%2B)
[tracking-firefox-esr17](/buglist.cgi?f1=cf_tracking_firefox_esr17&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox_esr17&o1=equals&v1=%3F)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=794426#a7388296_1689)• 12 years ago |

[status-firefox17](/buglist.cgi?f1=cf_status_firefox17&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox17&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_firefox17&o1=equals&v1=wontfix)
[tracking-firefox18](/buglist.cgi?f1=cf_tracking_firefox18&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox18&o1=equals&v1=%3F) → [+](/buglist.cgi?f1=cf_tracking_firefox18&o1=equals&v1=%2B)
[tracking-firefox-esr17](/buglist.cgi?f1=cf_tracking_firefox_esr17&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox_esr17&o1=equals&v1=%3F) → [18+](/buglist.cgi?f1=cf_tracking_firefox_esr17&o1=equals&v1=18%2B)Keywords: [crash](/buglist.cgi?keywords=crash&resolution=---),
[sec-critical](/buglist.cgi?keywords=sec-critical&resolution=---),
[testcase-wanted](/buglist.cgi?keywords=testcase-wanted&resolution=---)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=794426#a7388318_1689)• 12 years ago |

[status-firefox-esr10](/buglist.cgi?f1=cf_status_esr10&o1=isnotempty):
[?](/buglist.cgi?f1=cf_status_esr10&o1=equals&v1=%3F) → [unaffected](/buglist.cgi?f1=cf_status_esr10&o1=equals&v1=unaffected)
[tracking-firefox19](/buglist.cgi?f1=cf_tracking_firefox19&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox19&o1=equals&v1=%3F) → [+](/buglist.cgi?f1=cf_tracking_firefox19&o1=equals&v1=%2B)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=794426#c12)• 12 years ago |
|  | |

(In reply to Robert O'Callahan (:roc) (Mozilla Corporation) from [comment #10](/show_bug.cgi?id=794426#c10 "RESOLVED FIXED - Simultaneous calls to nsBuiltinDecoderStateMachine::StopAudioThread() cause problems"))
> [Security approval request comment]
The idea of sec-approval? is to ask /before/ landing on m-c for potentially serious security bugs, so we don't force ourselves into landing stuff in the last beta or two before release that will end up going out without sufficient regression testing.

|  | [Alex Keybl [:akeybl]](/user_profile?user_id=425645) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=794426#a7392518_425645)• 12 years ago |

[Attachment #688200](/attachment.cgi?id=688200&action=edit "fix") -
Flags: approval-mozilla-beta?
[Attachment #688200](/attachment.cgi?id=688200&action=edit "fix") -
Flags: approval-mozilla-beta+
[Attachment #688200](/attachment.cgi?id=688200&action=edit "fix") -
Flags: approval-mozilla-b2g18?
[Attachment #688200](/attachment.cgi?id=688200&action=edit "fix") -
Flags: approval-mozilla-b2g18+
[Attachment #688200](/attachment.cgi?id=688200&action=edit "fix") -
Flags: approval-mozilla-aurora?
[Attachment #688200](/attachment.cgi?id=688200&action=edit "fix") -
Flags: approval-mozilla-aurora+

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=794426#c13)• 12 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-aurora/rev/db3784061663>
<https://hg.mozilla.org/releases/mozilla-beta/rev/8fc480e6cfdc>
[status-b2g18](/buglist.cgi?f1=cf_status_b2g18&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=affected)
[status-firefox18](/buglist.cgi?f1=cf_status_firefox18&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=fixed)
[status-firefox19](/buglist.cgi?f1=cf_status_firefox19&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=fixed)
[status-firefox20](/buglist.cgi?f1=cf_status_firefox20&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox20&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox20&o1=equals&v1=fixed)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=794426#c14)• 12 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-b2g18/rev/8fc480e6cfdc>
[status-b2g18](/buglist.cgi?f1=cf_status_b2g18&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=fixed)

|  | [Robert O'Callahan (:roc) (email my personal email if necessary)](/user_profile?user_id=5038)  Assignee |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=794426#c15)• 12 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-esr17/rev/15b8772620ec>
[status-firefox-esr17](/buglist.cgi?f1=cf_status_firefox_esr17&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=fixed)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=794426#a8579840_280903)• 12 years ago |

Whiteboard: [adv-main18+][adv-esr17+]

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=794426#a9204883_1689)• 12 years ago |

Blocks: [813435](/show_bug.cgi?id=813435 "RESOLVED FIXED - Heap-use-after-free in mozilla::MediaDecoderStateMachine::StopAudioThread")

|  | [Matthew Gregan [:kinetik]](/user_profile?user_id=274575) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=794426#a9458971_274575)• 12 years ago |

Depends on: [826104](/show_bug.cgi?id=826104 "RESOLVED FIXED - Crash in MediaDecoder::UpdatePlaybackOffset")

|  | [Matthew Gregan [:kinetik]](/user_profile?user_id=274575) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=794426#a10493261_274575)• 12 years ago |

Depends on: [834667](/show_bug.cgi?id=834667 "VERIFIED FIXED - Firefox 17.0.2esr playing youtube video in html5 starts to leak serious amount of memory")

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=794426#a18711829_1689)• 12 years ago |

Group: core-security

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=794426#a96360113_75935)• 9 years ago |

Keywords: [testcase-wanted](/buglist.cgi?keywords=testcase-wanted&resolution=---)
You need to [log in](/show_bug.cgi?id=794426&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Robert O'Callahan (:roc) (email my personal email if necessary)](/user_profile?user_id=5038)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from bugzilla.mozilla.org_12d08a38_20250125_034840.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/808481)
* [XML](/show_bug.cgi?ctype=xml&id=808481)

Closed
[Bug 808481](/show_bug.cgi?id=808481)

Opened 12 years ago
Closed 12 years ago

# "Assertion failure: lifetime->entry == uint32\_t(entryTarget - outerScript->code),"

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

"Assertion failure: lifetime->entry == uint32\_t(entryTarget - outerScript->code),"

## Categories

### (Core :: JavaScript Engine, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=JavaScript%20Engine#JavaScript%20Engine)

JavaScript Engine
▾

Core :: JavaScript Engine
The interpreter engine for the core JavaScript language, independent of the browser's object model. File ONLY core JavaScript language bugs in this category. For bugs involving browser objects such as "window" and "document", use the "DOM" component. For bugs involving calls between JavaScript and C++, use the "XPConnect" component.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=JavaScript%20Engine)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

x86\_64

macOS

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

critical

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla20

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Performance Impact | --- |
| --- | --- |
| Webcompat Priority | --- |
| Webcompat Score | --- |
| Accessibility Severity | --- |
| a11y-review | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox16 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox16&o1=equals&v1=wontfix) |
| firefox17 | [+](/buglist.cgi?f1=cf_tracking_firefox17&o1=equals&v1=%2B) | [wontfix](/buglist.cgi?f1=cf_status_firefox17&o1=equals&v1=wontfix) |
| firefox18 | [+](/buglist.cgi?f1=cf_tracking_firefox18&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=fixed) |
| firefox19 | [+](/buglist.cgi?f1=cf_tracking_firefox19&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=fixed) |
| firefox20 | [+](/buglist.cgi?f1=cf_tracking_firefox20&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox20&o1=equals&v1=fixed) |
| firefox-esr10 | --- | [unaffected](/buglist.cgi?f1=cf_status_esr10&o1=equals&v1=unaffected) |
| firefox-esr17 | [18+](/buglist.cgi?f1=cf_tracking_firefox_esr17&o1=equals&v1=18%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=fixed) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox16 |  | wontfix |
| firefox17 | + | wontfix |
| firefox18 | + | fixed |
| firefox19 | + | fixed |
| firefox20 | + | fixed |
| firefox-esr10 |  | unaffected |
| firefox-esr17 | 18+ | fixed |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: gkw, Assigned: bhackett1024)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/764aa0af2fda6f02fb17dc9771bb18d9?d=mm&size=40)  [bhackett1024](/user_profile?user_id=346231)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

![](https://secure.gravatar.com/avatar/55857f92ded07119259dc6c1dd386205?d=mm&size=40)  [general](/user_profile?user_id=4729)

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](extensions/Gravatar/web/default.jpg)  [gkw](/user_profile?user_id=132034)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/4fe52ee1503aecf7b6c976b8eb7c1753?d=mm&size=40)  [willyelm](/user_profile?user_id=714609)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

11 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[747226](/show_bug.cgi?id=747226 "RESOLVED FIXED - IonMonkey: Crash in TypeScript::SetScope")

Dependency [tree](/showdependencytree.cgi?id=808481&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=808481)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (4 keywords, Whiteboard: [jsbugmon:update][adv-main18+][adv-esr17+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[assertion](/buglist.cgi?keywords=assertion&resolution=---),
[regression](/buglist.cgi?keywords=regression&resolution=---),
[sec-critical](/buglist.cgi?keywords=sec-critical&resolution=---),
[testcase](/buglist.cgi?keywords=testcase&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[jsbugmon:update][adv-main18+][adv-esr17+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [RyanVM](/user_profile?user_id=75935) | [in-testsuite](#c22 "12 years ago") | ? |
| --- | --- | --- |
| [RyanVM](/user_profile?user_id=75935) | in-testsuite | ? |
| --- | --- | --- |
|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (2 files)

| [stack](/attachment.cgi?id=678222)  [12 years ago](#c0)  [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)   7.34 KB, text/plain |  | [Details](/attachment.cgi?id=678222&action=edit) |
| --- | --- | --- |
| [patch](/attachment.cgi?id=689200)  [12 years ago](#c10)  [Brian Hackett [Laid off!]](/user_profile?user_id=346231)   2.46 KB, patch | dvander : [review+](#a2724371_309316 "12 years ago")  akeybl : [approval-mozilla-aurora+](#a3050501_425645 "12 years ago")  akeybl : [approval-mozilla-beta+](#a3050501_425645 "12 years ago")  akeybl : [approval-mozilla-esr17+](#a3050501_425645 "12 years ago")  abillings : [sec-approval+](#c16 "12 years ago") | [Details](/attachment.cgi?id=689200&action=edit) | [Diff](/attachment.cgi?id=689200&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=808481&attachment=689200) |

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=808481#c0)• 12 years ago |
|  | |

Attached file
[stack](attachment.cgi?id=678222)
— [Details](attachment.cgi?id=678222&action=edit)

mjitChunkLimit(35)
eval("\
0;\
L: switch(5) {\
case 1: c:break\
}\
while(a);\
")
asserts js debug shell on m-c changeset 2937fd8e35a1 with -a at Assertion failure: lifetime->entry == uint32\_t(entryTarget - outerScript->code),
Assuming related to [bug 747226](/show_bug.cgi?id=747226 "RESOLVED FIXED - IonMonkey: Crash in TypeScript::SetScope"). s-s and assuming sec-critical because similar previously-found assertions were also s-s.
===
Due to skipped revisions, the first bad revision could be any of:
changeset: 106120:300ac3d58291
user: David Anderson
date: Thu Apr 19 15:02:11 2012 -0700
summary: Enable JITs and type inference by default, and give Ion first chance ([bug 724751](/show_bug.cgi?id=724751 "RESOLVED FIXED - IonMonkey: Change shell behavior so --ion -n is default"), r=jandem).
changeset: 106121:de015aff650d
user: David Anderson
date: Thu Apr 19 15:02:47 2012 -0700
summary: Enable IonMonkey in the browser, and introduce an about:config option to pref it off ([bug 745390](/show_bug.cgi?id=745390 "RESOLVED FIXED - IonMonkey: Add and enable browser config options"), r=dmandelin).
changeset: 106122:9e64f779b611
user: David Anderson
date: Thu Apr 19 16:57:58 2012 -0700
summary: Disable TypeScript::SetScope ([bug 747226](/show_bug.cgi?id=747226 "RESOLVED FIXED - IonMonkey: Crash in TypeScript::SetScope"), r=bhackett).
changeset: 106123:bc1833f2111e
user: Christian Holler
date: Mon Apr 23 17:32:32 2012 +0200
summary: [Bug 747902](/show_bug.cgi?id=747902 "RESOLVED FIXED - Readd --ion -m -n flags to shell for compatiblity") - Add --ion, -n and -m flags back for compatibility

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)  Reporter |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=808481#c1)• 12 years ago |
|  | |

Likely a WONTFIX for 16 since it's too late, nominating for the others.
[status-firefox-esr10](/buglist.cgi?f1=cf_status_esr10&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_esr10&o1=equals&v1=unaffected)
[status-firefox16](/buglist.cgi?f1=cf_status_firefox16&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_firefox16&o1=equals&v1=wontfix)
[status-firefox17](/buglist.cgi?f1=cf_status_firefox17&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox17&o1=equals&v1=affected)
[status-firefox18](/buglist.cgi?f1=cf_status_firefox18&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=affected)
[status-firefox19](/buglist.cgi?f1=cf_status_firefox19&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=affected)
[status-firefox-esr17](/buglist.cgi?f1=cf_status_firefox_esr17&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=affected)
[tracking-firefox17](/buglist.cgi?f1=cf_tracking_firefox17&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox17&o1=equals&v1=%3F)
[tracking-firefox18](/buglist.cgi?f1=cf_tracking_firefox18&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox18&o1=equals&v1=%3F)
[tracking-firefox19](/buglist.cgi?f1=cf_tracking_firefox19&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox19&o1=equals&v1=%3F)
[tracking-firefox-esr17](/buglist.cgi?f1=cf_tracking_firefox_esr17&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox_esr17&o1=equals&v1=%3F)Keywords: [sec-critical](/buglist.cgi?keywords=sec-critical&resolution=---)

|  | [Lukas Blakk [:lsblakk] use ?needinfo](/user_profile?user_id=272375) |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=808481#c2)• 12 years ago |
|  | |

David - assigning to you since you're likely the culprit if law of averages are to be believed. Is there an obvious backout here that could return us to a known state? We're going to build on beta 5 tomorrow so the clock's ticking the 17 release.Assignee: general → dvander
[status-firefox-esr17](/buglist.cgi?f1=cf_status_firefox_esr17&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=affected) → ---
[tracking-firefox17](/buglist.cgi?f1=cf_tracking_firefox17&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox17&o1=equals&v1=%3F) → [+](/buglist.cgi?f1=cf_tracking_firefox17&o1=equals&v1=%2B)
[tracking-firefox18](/buglist.cgi?f1=cf_tracking_firefox18&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox18&o1=equals&v1=%3F) → [+](/buglist.cgi?f1=cf_tracking_firefox18&o1=equals&v1=%2B)
[tracking-firefox19](/buglist.cgi?f1=cf_tracking_firefox19&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox19&o1=equals&v1=%3F) → [+](/buglist.cgi?f1=cf_tracking_firefox19&o1=equals&v1=%2B)
[tracking-firefox-esr17](/buglist.cgi?f1=cf_tracking_firefox_esr17&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox_esr17&o1=equals&v1=%3F) → ---

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)  Reporter |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=808481#c3)• 12 years ago |
|  | |

jandem / bhackett were also working on similar assertions before - see [bug 781859](/show_bug.cgi?id=781859 "VERIFIED FIXED - Assertion failure: lifetime && lifetime->head == uint32_t(head - outerScript->code) && lifetime->entry == uint32_t(entryTarget - outerScript->code), at methodjit/LoopState.cpp:80") and its various dupes.

|  | [Lukas Blakk [:lsblakk] use ?needinfo](/user_profile?user_id=272375) |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=808481#c4)• 12 years ago |
|  | |

Wontfixing for 17, if someone has a low-risk fix that can be verified and uplifted before Monday's last beta going to build, please nominate.
[status-firefox17](/buglist.cgi?f1=cf_status_firefox17&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox17&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_firefox17&o1=equals&v1=wontfix)

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)  Reporter |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=808481#c5)• 12 years ago |
|  | |

(In reply to Lukas Blakk [:lsblakk] from [comment #4](/show_bug.cgi?id=808481#c4 "VERIFIED FIXED - \"Assertion failure: lifetime->entry == uint32_t(entryTarget - outerScript->code),\""))
> Wontfixing for 17, if someone has a low-risk fix that can be verified and
> uplifted before Monday's last beta going to build, please nominate.
If it's wontfix for 17, it should at least be tracking for 17 esr.
[status-firefox-esr17](/buglist.cgi?f1=cf_status_firefox_esr17&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=affected)
[tracking-firefox-esr17](/buglist.cgi?f1=cf_tracking_firefox_esr17&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox_esr17&o1=equals&v1=%3F)

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101) |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=808481#c6)• 12 years ago |
|  | |

Just found this as well, assuming it's the same thing (32 bit debug build, also only reproduces with -a):
mjitChunkLimit(10);
for (var i = 0; i < 20; i++)
function f0(p0) {
var v0;
if (i)
'bar';
while (v0 & v0)
break;
}
f0(0);

|  | [Josh Aas](/user_profile?user_id=18821) |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=808481#c7)• 12 years ago |
|  | |

David - thoughts on this bug?

|  | [David Anderson [:dvander] - inactive, e-mail if emergency](/user_profile?user_id=309316) |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=808481#c8)• 12 years ago |
|  | |

Sorry, I missed the earlier ping on this bug. Law of average blaming me is definitely fair :) but this one is deep in JM+TI territory. There's no obvious backout.
Brian or Jan, could you take a look?Assignee: dvander → general

|  | [Josh Aas](/user_profile?user_id=18821) |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=808481#c9)• 12 years ago |
|  | |

Assigning to Jan, who said he'd talk to Brian about this as a next step.Assignee: general → jdemooij

|  | [Brian Hackett [Laid off!]](/user_profile?user_id=346231)  Assignee |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=808481#c10)• 12 years ago |
|  | |

Attached patch

[patch](attachment.cgi?id=689200&action=diff)
— [Details](attachment.cgi?id=689200&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=808481&attachment=689200)

Bug in the state machine used for picking chunk boundaries. This code doesn't want to start new chunks after jumps which target their fallthrough opcode, but it also wants to start new chunks at the goto before a for or while loop. When these goals conflict it ends up using a chunk boundary at the first opcode in the loop, effectively treating it like a do-while loop during compilation. This might cause problems with the LoopState analysis, not sure. The attached patch fixes this situation by making the state machine even more horrible.
[Attachment #689200](/attachment.cgi?id=689200&action=edit "patch") -
Flags: review?(dvander)

|  | [David Anderson [:dvander] - inactive, e-mail if emergency](/user_profile?user_id=309316) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=808481#a2724371_309316)• 12 years ago |

[Attachment #689200](/attachment.cgi?id=689200&action=edit "patch") -
Flags: review?(dvander) → review+

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)  Reporter |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=808481#c11)• 12 years ago |
|  | |

(just a drive-by comment that the patch will likely need sec-approval since the issue is present on the branches)Flags: needinfo?(bhackett1024)

|  | [David Bolter [:davidb] (NeedInfo me for attention)](/user_profile?user_id=152868) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=808481#a2727640_152868)• 12 years ago |

[status-firefox20](/buglist.cgi?f1=cf_status_firefox20&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox20&o1=equals&v1=affected)
[tracking-firefox20](/buglist.cgi?f1=cf_tracking_firefox20&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox20&o1=equals&v1=%2B)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=808481#c12)• 12 years ago |
|  | |

It will need sec-approval because it is a sec-critical bug, per policy.

|  | [Brian Hackett [Laid off!]](/user_profile?user_id=346231)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=808481#a2729468_346231)• 12 years ago |

[Attachment #689200](/attachment.cgi?id=689200&action=edit "patch") -
Flags: sec-approval?

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)  Reporter |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=808481#c13)• 12 years ago |
|  | |

There's a questionaire in the comments which appears, that one needs to fill out when nominating for sec-approval:
[Security approval request comment]
How easily can the security issue be deduced from the patch?
Do comments in the patch, the check-in comment, or tests included in the patch paint a bulls-eye on the security problem?
Which older supported branches are affected by this flaw?
If not all supported branches, which bug introduced the flaw?
Do you have backports for the affected branches? If not, how different, hard to create, and risky will they be?
How likely is this patch to cause regressions; how much testing does it need?

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=808481#c14)• 12 years ago |
|  | |

Gary, when they set sec-approval to ?, the comment field gets auto-populated with that.
To be clear, if this \*didn't\* affect branches (We'd never shipped it to anything outside trunk), this could just be checked in without approval.

|  | [Brian Hackett [Laid off!]](/user_profile?user_id=346231)  Assignee |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=808481#c15)• 12 years ago |
|  | |

[Security approval request comment]
How easily can the security issue be deduced from the patch?
Not at all.
Do comments in the patch, the check-in comment, or tests included in the patch paint a bulls-eye on the security problem?
No.
Which older supported branches are affected by this flaw?
Back to Fx 12
If not all supported branches, which bug introduced the flaw?
[bug 706914](/show_bug.cgi?id=706914 "RESOLVED FIXED - JM: Compile large scripts in chunks")
Do you have backports for the affected branches? If not, how different, hard to create, and risky will they be?
Backporting is trivial.
How likely is this patch to cause regressions; how much testing does it need?
Not likely at all.Flags: needinfo?(bhackett1024)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=808481#c16)• 12 years ago |
|  | |

Comment on [attachment 689200](/attachment.cgi?id=689200 "patch") [[details]](/attachment.cgi?id=689200&action=edit "patch") [[diff]](/attachment.cgi?id=689200&action=diff "patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=808481&attachment=689200)
patch
Looks good. Sec-approval+. We should have branch patches made.
[Attachment #689200](/attachment.cgi?id=689200&action=edit "patch") -
Flags: sec-approval? → sec-approval+

|  | [Alex Keybl [:akeybl]](/user_profile?user_id=425645) |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=808481#c17)• 12 years ago |
|  | |

Please nominate for branch approval as soon as possible (aurora/beta/esr17). Thanks!
[tracking-firefox-esr17](/buglist.cgi?f1=cf_tracking_firefox_esr17&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox_esr17&o1=equals&v1=%3F) → [18+](/buglist.cgi?f1=cf_tracking_firefox_esr17&o1=equals&v1=18%2B)

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=808481#a2792666_375297)• 12 years ago |

Assignee: jdemooij → bhackett1024

|  | [Brian Hackett [Laid off!]](/user_profile?user_id=346231)  Assignee |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=808481#c18)• 12 years ago |
|  | |

<https://hg.mozilla.org/integration/mozilla-inbound/rev/ffcf9d812533>

|  | [Brian Hackett [Laid off!]](/user_profile?user_id=346231)  Assignee |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=808481#c19)• 12 years ago |
|  | |

Comment on [attachment 689200](/attachment.cgi?id=689200 "patch") [[details]](/attachment.cgi?id=689200&action=edit "patch") [[diff]](/attachment.cgi?id=689200&action=diff "patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=808481&attachment=689200)
patch
[Approval Request Comment]
See [comment 15](/show_bug.cgi?id=808481#c15 "VERIFIED FIXED - \"Assertion failure: lifetime->entry == uint32_t(entryTarget - outerScript->code),\"").
[Attachment #689200](/attachment.cgi?id=689200&action=edit "patch") -
Flags: approval-mozilla-esr17?
[Attachment #689200](/attachment.cgi?id=689200&action=edit "patch") -
Flags: approval-mozilla-beta?
[Attachment #689200](/attachment.cgi?id=689200&action=edit "patch") -
Flags: approval-mozilla-aurora?

|  | [(no longer active)](/user_profile?user_id=251051) |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=808481#c20)• 12 years ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/ffcf9d812533>Status: NEW → RESOLVEDClosed: 12 years ago
[status-firefox20](/buglist.cgi?f1=cf_status_firefox20&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox20&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox20&o1=equals&v1=fixed)Resolution: --- → FIXEDTarget Milestone: --- → mozilla20

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=808481#a2980334_395101)• 12 years ago |

Status: RESOLVED → VERIFIED

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101) |  |
| --- | --- | --- |
| [Comment 21](/show_bug.cgi?id=808481#c21)• 12 years ago |
|  | |

JSBugMon: This bug has been automatically verified fixed.

|  | [Alex Keybl [:akeybl]](/user_profile?user_id=425645) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=808481#a3050501_425645)• 12 years ago |

[Attachment #689200](/attachment.cgi?id=689200&action=edit "patch") -
Flags: approval-mozilla-esr17?
[Attachment #689200](/attachment.cgi?id=689200&action=edit "patch") -
Flags: approval-mozilla-esr17+
[Attachment #689200](/attachment.cgi?id=689200&action=edit "patch") -
Flags: approval-mozilla-beta?
[Attachment #689200](/attachment.cgi?id=689200&action=edit "patch") -
Flags: approval-mozilla-beta+
[Attachment #689200](/attachment.cgi?id=689200&action=edit "patch") -
Flags: approval-mozilla-aurora?
[Attachment #689200](/attachment.cgi?id=689200&action=edit "patch") -
Flags: approval-mozilla-aurora+

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 22](/show_bug.cgi?id=808481#c22)• 12 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-aurora/rev/27b107941342>
<https://hg.mozilla.org/releases/mozilla-beta/rev/6f53a5061508>
<https://hg.mozilla.org/releases/mozilla-esr17/rev/fee2b552544a>
[status-firefox18](/buglist.cgi?f1=cf_status_firefox18&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=fixed)
[status-firefox19](/buglist.cgi?f1=cf_status_firefox19&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=fixed)
[status-firefox-esr17](/buglist.cgi?f1=cf_status_firefox_esr17&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=fixed)Flags: in-testsuite?

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=808481#a5076547_280903)• 12 years ago |

Whiteboard: [jsbugmon:update] → [jsbugmon:update][adv-main18+][adv-esr17+]

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=808481#a15272136_1689)• 12 years ago |

Group: core-security
You need to [log in](/show_bug.cgi?id=808481&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from www.ubuntu.com_8b6dc374_20250125_034832.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# USN-1681-2: Thunderbird vulnerabilities

9 January 2013

Several security issues were fixed in Thunderbird.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Releases

* [Ubuntu 12.10](/security/notices?release=quantal)
* [Ubuntu 12.04](/security/notices?release=precise)
* [Ubuntu 11.10](/security/notices?release=oneiric)
* [Ubuntu 10.04](/security/notices?release=lucid)

## Packages

* [thunderbird](/security/cves?package=thunderbird) - Mozilla Open Source mail and newsgroup client

## Details

USN-1681-1 fixed vulnerabilities in Firefox. This update provides the

corresponding updates for Thunderbird.

Original advisory details:

Christoph Diehl, Christian Holler, Mats Palmgren, Chiaki Ishikawa, Bill

Gianopoulos, Benoit Jacob, Gary Kwong, Robert O'Callahan, Jesse Ruderman,

and Julian Seward discovered multiple memory safety issues affecting

Firefox. If the user were tricked into opening a specially crafted page, an

attacker could possibly exploit these to cause a denial of service via

application crash, or potentially execute code with the privileges of the

user invoking Firefox. ([CVE-2013-0769](/security/CVE-2013-0769), [CVE-2013-0749](/security/CVE-2013-0749), [CVE-2013-0770](/security/CVE-2013-0770))

Abhishek Arya discovered several user-after-free and buffer overflows in

Firefox. An attacker could exploit these to cause a denial of service via

application crash, or potentially execute code with the privileges of the

user invoking Firefox. ([CVE-2013-0760](/security/CVE-2013-0760), [CVE-2013-0761](/security/CVE-2013-0761), [CVE-2013-0762](/security/CVE-2013-0762),

[CVE-2013-0763](/security/CVE-2013-0763), [CVE-2013-0766](/security/CVE-2013-0766), [CVE-2013-0767](/security/CVE-2013-0767), [CVE-2013-0771](/security/CVE-2013-0771), [CVE-2012-5829](/security/CVE-2012-5829))

A stack buffer was discovered in Firefox. If the user were tricked into

opening a specially crafted page, an attacker could possibly exploit this

to cause a denial of service via application crash, or potentially execute

code with the privileges of the user invoking Firefox. ([CVE-2013-0768](/security/CVE-2013-0768))

Masato Kinugawa discovered that Firefox did not always properly display URL

values in the address bar. A remote attacker could exploit this to conduct

URL spoofing and phishing attacks. ([CVE-2013-0759](/security/CVE-2013-0759))

Atte Kettunen discovered that Firefox did not properly handle HTML tables

with a large number of columns and column groups. If the user were tricked

into opening a specially crafted page, an attacker could exploit this to

cause a denial of service via application crash, or potentially execute

code with the privileges of the user invoking Firefox. ([CVE-2013-0744](/security/CVE-2013-0744))

Jerry Baker discovered that Firefox did not always properly handle

threading when performing downloads over SSL connections. An attacker could

exploit this to cause a denial of service via application crash.

([CVE-2013-0764](/security/CVE-2013-0764))

Olli Pettay and Boris Zbarsky discovered flaws in the Javacript engine of

Firefox. An attacker could cause a denial of service via application crash,

or potentially execute code with the privileges of the user invoking

Firefox. ([CVE-2013-0745](/security/CVE-2013-0745), [CVE-2013-0746](/security/CVE-2013-0746))

Jesse Ruderman discovered a flaw in the way Firefox handled plugins. If a

user were tricked into opening a specially crafted page, a remote attacker

could exploit this to bypass security protections to conduct clickjacking

attacks. ([CVE-2013-0747](/security/CVE-2013-0747))

Jesse Ruderman discovered an information leak in Firefox. An attacker could

exploit this to reveal memory address layout which could help in bypassing

ASLR protections. ([CVE-2013-0748](/security/CVE-2013-0748))

An integer overflow was discovered in the Javascript engine, leading to a

heap-based buffer overflow. If the user were tricked into opening a

specially crafted page, an attacker could possibly exploit this to execute

code with the privileges of the user invoking Firefox. ([CVE-2013-0750](/security/CVE-2013-0750))

Sviatoslav Chagaev discovered that Firefox did not properly handle XBL

files with multiple XML bindings with SVG content. An attacker could cause

a denial of service via application crash, or potentially execute code with

the privileges of the user invoking Firefox. ([CVE-2013-0752](/security/CVE-2013-0752))

Mariusz Mlynski discovered two flaws to gain access to privileged chrome

functions. An attacker could possibly exploit this to execute code with the

privileges of the user invoking Firefox. ([CVE-2013-0757](/security/CVE-2013-0757), [CVE-2013-0758](/security/CVE-2013-0758))

Several use-after-free issues were discovered in Firefox. If the user were

tricked into opening a specially crafted page, an attacker could possibly

exploit this to execute code with the privileges of the user invoking

Firefox. ([CVE-2013-0753](/security/CVE-2013-0753), [CVE-2013-0754](/security/CVE-2013-0754), [CVE-2013-0755](/security/CVE-2013-0755), [CVE-2013-0756](/security/CVE-2013-0756))

Two intermediate CA certificates were mis-issued by the TURKTRUST

certificate authority. If a remote attacker were able to perform a

machine-in-the-middle attack, this flaw could be exploited to view sensitive

information. ([CVE-2013-0743](/security/CVE-2013-0743))

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Update instructions

The problem can be corrected by updating your system to the following package versions:

##### Ubuntu 12.10

* [thunderbird](https://launchpad.net/ubuntu/%2Bsource/thunderbird)
  -
  [17.0.2+build1-0ubuntu0.12.10.1](https://launchpad.net/ubuntu/%2Bsource/thunderbird/17.0.2%2Bbuild1-0ubuntu0.12.10.1)

##### Ubuntu 12.04

* [thunderbird](https://launchpad.net/ubuntu/%2Bsource/thunderbird)
  -
  [17.0.2+build1-0ubuntu0.12.04.1](https://launchpad.net/ubuntu/%2Bsource/thunderbird/17.0.2%2Bbuild1-0ubuntu0.12.04.1)

##### Ubuntu 11.10

* [thunderbird](https://launchpad.net/ubuntu/%2Bsource/thunderbird)
  -
  [17.0.2+build1-0ubuntu0.11.10.1](https://launchpad.net/ubuntu/%2Bsource/thunderbird/17.0.2%2Bbuild1-0ubuntu0.11.10.1)

##### Ubuntu 10.04

* [thunderbird](https://launchpad.net/ubuntu/%2Bsource/thunderbird)
  -
  [17.0.2+build1-0ubuntu0.10.04.1](https://launchpad.net/ubuntu/%2Bsource/thunderbird/17.0.2%2Bbuild1-0ubuntu0.10.04.1)

After a standard system update you need to restart Thunderbird to make all

the necessary changes.

## References

* [CVE-2013-0769](/security/CVE-2013-0769)
* [CVE-2013-0749](/security/CVE-2013-0749)
* [CVE-2013-0770](/security/CVE-2013-0770)
* [CVE-2013-0760](/security/CVE-2013-0760)
* [CVE-2013-0762](/security/CVE-2013-0762)
* [CVE-2013-0766](/security/CVE-2013-0766)
* [CVE-2013-0767](/security/CVE-2013-0767)
* [CVE-2013-0761](/security/CVE-2013-0761)
* [CVE-2013-0763](/security/CVE-2013-0763)
* [CVE-2013-0771](/security/CVE-2013-0771)
* [CVE-2012-5829](/security/CVE-2012-5829)
* [CVE-2013-0768](/security/CVE-2013-0768)
* [CVE-2013-0759](/security/CVE-2013-0759)
* [CVE-2013-0744](/security/CVE-2013-0744)
* [CVE-2013-0764](/security/CVE-2013-0764)
* [CVE-2013-0745](/security/CVE-2013-0745)
* [CVE-2013-0746](/security/CVE-2013-0746)
* [CVE-2013-0747](/security/CVE-2013-0747)
* [CVE-2013-0748](/security/CVE-2013-0748)
* [CVE-2013-0750](/security/CVE-2013-0750)
* [CVE-2013-0752](/security/CVE-2013-0752)
* [CVE-2013-0757](/security/CVE-2013-0757)
* [CVE-2013-0758](/security/CVE-2013-0758)
* [CVE-2013-0753](/security/CVE-2013-0753)
* [CVE-2013-0754](/security/CVE-2013-0754)
* [CVE-2013-0755](/security/CVE-2013-0755)
* [CVE-2013-0756](/security/CVE-2013-0756)
* [CVE-2013-0743](/security/CVE-2013-0743)
* <https://launchpad.net/bugs/1096456>

## Related notices

* [USN-1681-1](/security/notices/USN-1681-1)
* [USN-1638-1](/security/notices/USN-1638-1)
* [USN-1636-1](/security/notices/USN-1636-1)
* [USN-1687-1](/security/notices/USN-1687-1)
* [USN-1687-2](/security/notices/USN-1687-2)

### Join the discussion

* [Ubuntu security updates mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened)
* [Security announcements mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-security-announce)

### Need help with your security needs?

Ubuntu Pro provides up to ten-year security coverage for over 23,000 open-source packages within the Ubuntu Main and Universe repositories.

[Talk to an expert to find out what would work best for you](/contact-us/form?product=pro)

### Further reading

* *Loading...*

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page



=== Content from bugzilla.mozilla.org_aeaaf6e9_20250125_034839.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/805814)
* [XML](/show_bug.cgi?ctype=xml&id=805814)

Closed
[Bug 805814](/show_bug.cgi?id=805814)

Opened 12 years ago
Closed 12 years ago

# Mesa heap buffer overflow, exposed by WebGL, mirroring Chrome issue 145525

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

Mesa heap buffer overflow, exposed by WebGL, mirroring Chrome issue 145525

## Categories

### (Core :: Graphics: CanvasWebGL, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=Graphics%3A%20CanvasWebGL#Graphics%3A%20CanvasWebGL)

Graphics: CanvasWebGL
▾

Core :: Graphics: CanvasWebGL
Bugs with the WebGL Canvas Context.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=Graphics%3A%20CanvasWebGL&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=Graphics%3A%20CanvasWebGL&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=Graphics%3A%20CanvasWebGL)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

unspecified

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

x86\_64

Linux

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

normal

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla20

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| a11y-review | --- |
| --- | --- |
| Webcompat Score | --- |
| Accessibility Severity | --- |
| Performance Impact | --- |
| Webcompat Priority | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox17 | [+](/buglist.cgi?f1=cf_tracking_firefox17&o1=equals&v1=%2B) | [wontfix](/buglist.cgi?f1=cf_status_firefox17&o1=equals&v1=wontfix) |
| firefox18 | [+](/buglist.cgi?f1=cf_tracking_firefox18&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=fixed) |
| firefox19 | [+](/buglist.cgi?f1=cf_tracking_firefox19&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=fixed) |
| firefox20 | [+](/buglist.cgi?f1=cf_tracking_firefox20&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox20&o1=equals&v1=fixed) |
| firefox-esr10 | --- | [unaffected](/buglist.cgi?f1=cf_status_esr10&o1=equals&v1=unaffected) |
| firefox-esr17 | [18+](/buglist.cgi?f1=cf_tracking_firefox_esr17&o1=equals&v1=18%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=fixed) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox17 | + | wontfix |
| firefox18 | + | fixed |
| firefox19 | + | fixed |
| firefox20 | + | fixed |
| firefox-esr10 |  | unaffected |
| firefox-esr17 | 18+ | fixed |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: bjacob, Assigned: bjacob)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/8f64ddf291d83cdc891c05ee5d5cc5dc?d=mm&size=40)  [bjacob](/user_profile?user_id=382769)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/8f64ddf291d83cdc891c05ee5d5cc5dc?d=mm&size=40)  [bjacob](/user_profile?user_id=382769)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/ca6a57abf052ac63d917d5dae1cc0f00?d=mm&size=40)  [jgilbert](/user_profile?user_id=419431)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

14 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

[816670](/show_bug.cgi?id=816670 "RESOLVED FIXED - Use Angle's new SH_ENFORCE_PACKING_RESTRICTIONS")

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

---

Dependency [tree](/showdependencytree.cgi?id=805814&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=805814)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

[code.google.com/p/chromium/issues/det...](http://code.google.com/p/chromium/issues/detail?id=145525 "http://code.google.com/p/chromium/issues/detail?id=145525")

[bugzilla.redhat.com/show\_bug.cgi?id=8...](https://bugzilla.redhat.com/show_bug.cgi?id=883243 "https://bugzilla.redhat.com/show_bug.cgi?id=883243")

## Details

### (5 keywords, Whiteboard: [adv-main18+][adv-esr17+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[crash](/buglist.cgi?keywords=crash&resolution=---),
[csectype-bounds](/buglist.cgi?keywords=csectype-bounds&resolution=---),
[sec-critical](/buglist.cgi?keywords=sec-critical&resolution=---),
[sec-vector](/buglist.cgi?keywords=sec-vector&resolution=---),
[testcase](/buglist.cgi?keywords=testcase&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[adv-main18+][adv-esr17+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | in-testsuite |  |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (4 files)

| [Testcase](/attachment.cgi?id=675567)  [12 years ago](#c0)  [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)   1.22 KB, text/html |  | [Details](/attachment.cgi?id=675567&action=edit) |
| --- | --- | --- |
| [import angle r1317 (only that revision)](/attachment.cgi?id=688237)  [12 years ago](#c15)  [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)   47.89 KB, patch | jgilbert : [review+](#c22 "12 years ago")  abillings : [sec-approval+](#a3639777_280903 "12 years ago") | [Details](/attachment.cgi?id=688237&action=edit) | [Diff](/attachment.cgi?id=688237&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=805814&attachment=688237) |
| [turn on packing restrictions](/attachment.cgi?id=688239)  [12 years ago](#c16)  [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)   1.17 KB, patch | jgilbert : [review+](#a3405121_419431 "12 years ago")  bajaj : [approval-mozilla-aurora+](#a4007509_448925 "12 years ago")  bajaj : [approval-mozilla-beta+](#a4007509_448925 "12 years ago")  bajaj : [approval-mozilla-esr17+](#a4007509_448925 "12 years ago")  abillings : [sec-approval+](#a3639762_280903 "12 years ago") | [Details](/attachment.cgi?id=688239&action=edit) | [Diff](/attachment.cgi?id=688239&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=805814&attachment=688239) |
| [repro case](/attachment.cgi?id=688270)  [12 years ago](#c19)  [miaubiz](/user_profile?user_id=399762)   1.70 KB, text/plain |  | [Details](/attachment.cgi?id=688270&action=edit) |

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=805814#c0)• 12 years ago |
|  | |

Attached file
[Testcase](attachment.cgi?id=675567)
— [Details](attachment.cgi?id=675567&action=edit)

This is <http://code.google.com/p/chromium/issues/detail?id=145525> originally reported by miaubiz.
VULNERABILITY DETAILS
heap buffer overflow in gpu process with webgl
VERSION
Chrome Version: dev
Operating System: 64bit linux
REPRODUCTION CASE
<html>
<head>
<script id="vshader" type="x-shader/x-vertex">
attribute vec4 vPosition;
void main()
{
gl\_Position = vPosition;
}
</script>
<script id="fshader" type="x-shader/x-fragment">
precision mediump float;
uniform float color[3];
void main()
{
gl\_FragColor = vec4(color[0], 0, 0, 0);
}
</script>
<script>
function shader(gl, program, shaderType, shaderId) {
var shaderSource = document.getElementById(shaderId).text
var shader = gl.createShader(shaderType);
gl.shaderSource(shader, shaderSource);
gl.compileShader(shader);
gl.attachShader(program, shader)
}
function loadProgram(gl) {
var program = gl.createProgram();
shader(gl, program, gl.VERTEX\_SHADER, "vshader")
shader(gl, program, gl.FRAGMENT\_SHADER, "fshader")
gl.linkProgram(program);
return program;
}
var gl = document.createElement('canvas').getContext('experimental-webgl')
var program = loadProgram(gl)
var elemLoc = gl.getUniformLocation(program, "color[2]");
var value = gl.getUniform(program, elemLoc);
</script>
</head>
<body>
</body>
</html>
FOR CRASHES, PLEASE INCLUDE THE FOLLOWING ADDITIONAL INFORMATION
Type of crash: gpu + asan
Crash State:
==21671== ERROR: AddressSanitizer heap-buffer-overflow on address 0x7fffe06962b8 at pc 0x55555f2a4226 bp 0x7fffffff7b20 sp 0x7fffffff78e8
WRITE of size 1 at 0x7fffe06962b8 thread T0
#0 0x55555f2a4225 in \_\_interceptor\_memcpy ??:0
#1 0x7fffe967640b in ?? ??:0
0x7fffe06962b8 is located 4 bytes to the right of 52-byte region [0x7fffe0696280,0x7fffe06962b4)
allocated by thread T0 here:
#0 0x55555f2a78e1 in \_\_interceptor\_calloc ??:0
#1 0x7fffe74936f7 in ?? ??:0

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=805814#a22_382769)• 12 years ago |

Group: core-security

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=805814#a80_382769)• 12 years ago |

Whiteboard: sec-critical

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=805814#c1)• 12 years ago |
|  | |

Discussion seems to be still going on on the Chromium bug, but from what I gather the favored approach there is to make additional restrictions on shaders and enforce them in the ANGLE shader compiler.

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=805814#c2)• 12 years ago |
|  | |

[Comment 11](/show_bug.cgi?id=805814#c11 "RESOLVED FIXED - Mesa heap buffer overflow, exposed by WebGL, mirroring Chrome issue 145525") on the Chromium bug says:
client glx vendor string: Mesa Project and SGI
client glx version string: 1.4
OpenGL vendor string: VMware, Inc.
OpenGL renderer string: Gallium 0.4 on llvmpipe (LLVM 0x300)
OpenGL version string: 2.1 Mesa 8.0.2
OpenGL shading language version string: 1.20

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=805814#c3)• 12 years ago |
|  | |

And in [comment 13](/show_bug.cgi?id=805814#c13 "RESOLVED FIXED - Mesa heap buffer overflow, exposed by WebGL, mirroring Chrome issue 145525") on the Chromium bug, we see that the bug is not specific to one particular driver:
OpenGL vendor string: Tungsten Graphics, Inc
OpenGL renderer string: Mesa DRI Intel(R) Ivybridge Desktop
OpenGL version string: 2.1 Mesa 8.0.2
OpenGL shading language version string: 1.30

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=805814#a440496_280903)• 12 years ago |

Keywords: [sec-critical](/buglist.cgi?keywords=sec-critical&resolution=---)

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=805814#a440521_406194)• 12 years ago |

Whiteboard: sec-critical

|  | [David Bolter [:davidb] (NeedInfo me for attention)](/user_profile?user_id=152868) |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=805814#c4)• 12 years ago |
|  | |

Benoit can you own this bug? What can we do?Assignee: nobody → bjacob

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=805814#c5)• 12 years ago |
|  | |

Assuming that if this is a driver bug we have to work around then it affects all branches. Please correct if this was unmasked by some recent WebGL code change.
[status-firefox-esr10](/buglist.cgi?f1=cf_status_esr10&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_esr10&o1=equals&v1=affected)
[status-firefox17](/buglist.cgi?f1=cf_status_firefox17&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox17&o1=equals&v1=affected)
[status-firefox18](/buglist.cgi?f1=cf_status_firefox18&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=affected)
[status-firefox19](/buglist.cgi?f1=cf_status_firefox19&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=affected)
[tracking-firefox17](/buglist.cgi?f1=cf_tracking_firefox17&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox17&o1=equals&v1=%3F)
[tracking-firefox18](/buglist.cgi?f1=cf_tracking_firefox18&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox18&o1=equals&v1=%2B)
[tracking-firefox19](/buglist.cgi?f1=cf_tracking_firefox19&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox19&o1=equals&v1=%2B)See Also: → <http://code.google.com/p/chromium/issues/detail?id=145525>

|  | [Lukas Blakk [:lsblakk] use ?needinfo](/user_profile?user_id=272375) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=805814#a1236452_272375)• 12 years ago |

[tracking-firefox17](/buglist.cgi?f1=cf_tracking_firefox17&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox17&o1=equals&v1=%3F) → [+](/buglist.cgi?f1=cf_tracking_firefox17&o1=equals&v1=%2B)

|  | [Lukas Blakk [:lsblakk] use ?needinfo](/user_profile?user_id=272375) |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=805814#c6)• 12 years ago |
|  | |

Benoit - what needs to be done here? We are going to build on final beta today - so we need to know our options asap.Flags: needinfo?(bjacob)

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=805814#c7)• 12 years ago |
|  | |

At this point in the cycle it probably makes sense to just ship with the vulnerability this time around. Also, the Chromium bug shows that they decided to ship with it in Chrome 22.
I need to have a conversation with Chromium devs to understand what is the status on their side. All I can see in their bug is a patch to Mesa that they will ship in Chrome OS, I can't see a fix in desktop Chromium.Flags: needinfo?(bjacob)

|  | [Lukas Blakk [:lsblakk] use ?needinfo](/user_profile?user_id=272375) |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=805814#c8)• 12 years ago |
|  | |

Thank you, let's keep at this for 18 in that case.
[status-firefox17](/buglist.cgi?f1=cf_status_firefox17&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox17&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_firefox17&o1=equals&v1=wontfix)

|  | [miaubiz](/user_profile?user_id=399762) |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=805814#c9)• 12 years ago |
|  | |

there will be no patch for desktop chromium.
"The way we're currently handling many of the Mesa issues is to patch them in Chrome OS (because it is our responsibility to do so) and letting Linux distributions patch their own Mesa libs
In fact, I just took a Mesa update to my Ubuntu 12.04 a couple of days ago. It's a fix for your older issue (the buffer overflow) so hopefully Ubuntu will continue to catch up and patch this OOB read too! "

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=805814#c10)• 12 years ago |
|  | |

Thanks miaubiz.
Do you know what the thinking of the Chromium security team is there --- is it that the vulnerability is not considered exploitable, or is it something else?
Also can you confirm that it is known that the bug cannot be worked around by the browser engine?

|  | [miaubiz](/user_profile?user_id=399762) |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=805814#c11)• 12 years ago |
|  | |

@bjacob:
I couldn't figure it out. and there's 78 comments on there so copy pasting a large chunk of them is infeasible.
it's clearly exploitable though. ben...@gmail.com is cc:d since [comment 66](/show_bug.cgi?id=805814#c66 "RESOLVED FIXED - Mesa heap buffer overflow, exposed by WebGL, mirroring Chrome issue 145525") so you should have gotten a copy of atleast the more recent comments there.
the number of uniforms the shader will use is definitely not available to the browser engine. if the browser passes the invalid shader off to mesa, then it is too late to react once mesa has compiled the shader.
the alternative is to make a conservative estimate of the number of uniforms a shader will use, and prevent anything close to the maximum from reaching mesa. the conservative number of allowed uniforms will then end up disallowing valid high end WebGL content from running. this is much more complex than blacklisting the drivers outright until mesa is patched, and the result is presumably not much better.

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=805814#c12)• 12 years ago |
|  | |

Ken explained details in today's WebGL conference call.
What's happening is that when some parts of a uniform array are not actually used by the shaders, the driver feels free to optimize them away and not allocate storage for them; but it will still allow addressing them, effectively allowing to address illegal memory in the program's address space.
The solution chosen by the Chrome team, with which I agree, is to implement in the ANGLE shader compiler the packing algorithm mentioned in a non-normative way in the GLSL spec. In this way, shaders will be rejected if they declare very large arrays that should be rejected but aren't rejected by the driver because it takes advantage of the knowledge that large parts of them are unused. From what I gather from the conversation on the Chrome bug, this is considered enough to prevent the present testcase.
The support for doing this check in ANGLE landed in [r1317](https://viewvc.svn.mozilla.org/vc?view=rev&revision=1317). We must update out ANGLE copy and use that.

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=805814#a2956280_382769)• 12 years ago |

Depends on: [816670](/show_bug.cgi?id=816670 "RESOLVED FIXED - Use Angle's new SH_ENFORCE_PACKING_RESTRICTIONS")

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=805814#a2961662_1689)• 12 years ago |

[status-firefox20](/buglist.cgi?f1=cf_status_firefox20&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox20&o1=equals&v1=affected)
[status-firefox-esr17](/buglist.cgi?f1=cf_status_firefox_esr17&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=affected)
[tracking-firefox20](/buglist.cgi?f1=cf_tracking_firefox20&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox20&o1=equals&v1=%2B)
[tracking-firefox-esr17](/buglist.cgi?f1=cf_tracking_firefox_esr17&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox_esr17&o1=equals&v1=%3F)Keywords: [crash](/buglist.cgi?keywords=crash&resolution=---),
[sec-vector](/buglist.cgi?keywords=sec-vector&resolution=---),
[testcase](/buglist.cgi?keywords=testcase&resolution=---)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=805814#c13)• 12 years ago |
|  | |

ChromeOS has assigned [CVE-2012-5129](https://www.cve.org/CVERecord?id=CVE-2012-5129) to the Mesa bug. We'll need a different CVE to cover the ANGLE workaround (though if Google assigns one we can re-use that), but our advisory should mention this is related to [CVE-2012-5129](https://www.cve.org/CVERecord?id=CVE-2012-5129).
We're running out of time to get an ANGLE update into Firefox 18, what's the ETA on that?

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=805814#a3341038_1689)• 12 years ago |

See Also: → <https://bugzilla.redhat.com/show_bug.cgi?id=883243>

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=805814#c14)• 12 years ago |
|  | |

I didn't realize that we still wanted the ANGLE update in firefox 18. Jeff Gilbert is working on the ANGLE update ([bug 801158](/show_bug.cgi?id=801158 "RESOLVED FIXED - Update ANGLE to latest HEAD")), but for the beta channel, a wholesale ANGLE update is too risky. So the only thing we can do about this for 18 is to cherry pick the particular ANGLE revision (1317) that fixes this. Let me see if it applies cleanly.

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=805814#c15)• 12 years ago |
|  | |

Attached patch

[import angle r1317 (only that revision)](attachment.cgi?id=688237&action=diff)
— [Details](attachment.cgi?id=688237&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=805814&attachment=688237)

This patch is `svn diff -c 1317` + adding a cpp file to two of our makefiles.
[Attachment #688237](/attachment.cgi?id=688237&action=edit "import angle r1317 (only that revision)") -
Flags: review?(jgilbert)

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=805814#c16)• 12 years ago |
|  | |

Attached patch

[turn on packing restrictions](attachment.cgi?id=688239&action=diff)
— [Details](attachment.cgi?id=688239&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=805814&attachment=688239)

This should cause the testcase to be rejected before being passed to the Mesa shader compiler, avoiding the problem.
[Attachment #688239](/attachment.cgi?id=688239&action=edit "turn on packing restrictions") -
Flags: review?(jgilbert)

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=805814#c17)• 12 years ago |
|  | |

This is not working... needs some debugging.

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=805814#c18)• 12 years ago |
|  | |

The new packing restrictions code is actually working beautifully. The problem was that I apparently attached the wrong testcase here. The present bug is about bad things that happen when a shader tries to use too many variables, but the testcase here doesn't do anything like that. Also, I ran it in valgrind against current m-c and 2 different versions and it doesn't cause any V error.
Now looking for the right testcase in Chromium bug...

|  | [miaubiz](/user_profile?user_id=399762) |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=805814#c19)• 12 years ago |
|  | |

Attached file
[repro case](attachment.cgi?id=688270)
— [Details](attachment.cgi?id=688270&action=edit)

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=805814#c20)• 12 years ago |
|  | |

I still can't reproduce this in valgrind, as when I run in valgrind I hit an assertion failure before I get to the point where it would reproduce:
Assertion failure: !thing->compartment()->scheduledForDestruction, at /hack/mozilla-central/js/src/gc/Marking.cpp:108
Will try the ASan builds...

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Comment 21](/show_bug.cgi?id=805814#c21)• 12 years ago |
|  | |

But, good news! Now that we have the right testcase, the program linking does fail with this WebGL warning:
[11:36:11.894] Error: WebGL: linkProgram: a fragment shader used in this program failed to compile, with this log:
ERROR: too many uniforms
@ file:///home/bjacob/Downloads/zl.html:35
Which is exactly the message that the new ANGLE packing validation generates.
So regardlesss of whether I'm able to reproduce (I'm busy atm and may not find time to), it is guaranteed that with the patch we are safe.

|  | [Kelsey Gilbert [:jgilbert]](/user_profile?user_id=419431) |  |
| --- | --- | --- |
| [Comment 22](/show_bug.cgi?id=805814#c22)• 12 years ago |
|  | |

Comment on [attachment 688237](/attachment.cgi?id=688237 "import angle r1317 (only that revision)") [[details]](/attachment.cgi?id=688237&action=edit "import angle r1317 (only that revision)") [[diff]](/attachment.cgi?id=688237&action=diff "import angle r1317 (only that revision)") [[review]](/page.cgi?id=splinter.html&ignore=&bug=805814&attachment=688237)
import angle [r1317](https://viewvc.svn.mozilla.org/vc?view=rev&revision=1317) (only that revision)
Review of [attachment 688237](/attachment.cgi?id=688237 "import angle r1317 (only that revision)") [[details]](/attachment.cgi?id=688237&action=edit "import angle r1317 (only that revision)") [[diff]](/attachment.cgi?id=688237&action=diff "import angle r1317 (only that revision)") [[review]](/page.cgi?id=splinter.html&ignore=&bug=805814&attachment=688237):
-----------------------------------------------------------------
Gross, but I guess we need it. We're not going to be able to backport the update to ANGLE's HEAD.
I didn't really review the variable packer, but I can if we need to. R+ otherwise.
::: gfx/angle/src/compiler/VariablePacker.cpp
@@ +104,5 @@
> + case SH\_SAMPLER\_2D\_RECT\_ARB:
> + return 1;
> + default:
> + ASSERT(false);
> + return 100000;
Seems like an arbitrary choice. I believe this attempts to make it impossible to back the variable, which should trigger the error condition. (Which is what we want)
@@ +191,5 @@
> +
> +bool VariablePacker::CheckVariablesWithinPackingLimits(int maxVectors, const TVariableInfoList& in\_variables)
> +{
> + ASSERT(maxVectors > 0);
> + maxRows\_ = maxVectors;
This is such a weird syntax.
@@ +197,5 @@
> + bottomNonFullRow\_ = maxRows\_ - 1;
> + TVariableInfoList variables(in\_variables);
> +
> + // As per GLSL 1.017 Appendix A, Section 7 variables are packed in specific
> + // order by type, then by size of array, largest first.
Doing things by the spec. Love it.
::: gfx/angle/tests/compiler\_tests/VariablePacker\_test.cpp
@@ +1,1 @@
> +//
This file seems like cruft. Eventually, would it be useful to adapt these ANGLE tests into our CPP test stuff?
[Attachment #688237](/attachment.cgi?id=688237&action=edit "import angle r1317 (only that revision)") -
Flags: review?(jgilbert) → review+

|  | [Kelsey Gilbert [:jgilbert]](/user_profile?user_id=419431) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=805814#a3405121_419431)• 12 years ago |

[Attachment #688239](/attachment.cgi?id=688239&action=edit "turn on packing restrictions") -
Flags: review?(jgilbert) → review+

|  | [Alex Keybl [:akeybl]](/user_profile?user_id=425645) |  |
| --- | --- | --- |
| [Comment 23](/show_bug.cgi?id=805814#c23)• 12 years ago |
|  | |

Can we get a sec-approval nomination here in preparation for landing on m-c? Would be great to get this landed on branches Monday, in preparation for beta 4.

|  | [Kelsey Gilbert [:jgilbert]](/user_profile?user_id=419431) |  |
| --- | --- | --- |
| [Comment 24](/show_bug.cgi?id=805814#c24)• 12 years ago |
|  | |

Comment on [attachment 688237](/attachment.cgi?id=688237 "import angle r1317 (only that revision)") [[details]](/attachment.cgi?id=688237&action=edit "import angle r1317 (only that revision)") [[diff]](/attachment.cgi?id=688237&action=diff "import angle r1317 (only that revision)") [[review]](/page.cgi?id=splinter.html&ignore=&bug=805814&attachment=688237)
import angle [r1317](https://viewvc.svn.mozilla.org/vc?view=rev&revision=1317) (only that revision)
[Security approval request comment]
How easily can the security issue be deduced from the patch?
Would be very difficult for this patch, though it's possible there are breadcrumbs in comments somewhere upstream in ANGLE.
Do comments in the patch, the check-in comment, or tests included in the patch paint a bulls-eye on the security problem?
No.
Which older supported branches are affected by this flaw?
All branches since Firefox 4.
If not all supported branches, which bug introduced the flaw?
WebGL.
Do you have backports for the affected branches? If not, how different, hard to create, and risky will they be?
Presumably we'd pull this into Aurora 19 and Beta 18, possibly ESR 17?
How likely is this patch to cause regressions; how much testing does it need?
Unlikely to cause regressions. We have good test coverage.
[Attachment #688237](/attachment.cgi?id=688237&action=edit "import angle r1317 (only that revision)") -
Flags: sec-approval?

|  | [Kelsey Gilbert [:jgilbert]](/user_profile?user_id=419431) |  |
| --- | --- | --- |
| [Comment 25](/show_bug.cgi?id=805814#c25)• 12 years ago |
|  | |

Comment on [attachment 688239](/attachment.cgi?id=688239 "turn on packing restrictions") [[details]](/attachment.cgi?id=688239&action=edit "turn on packing restrictions") [[diff]](/attachment.cgi?id=688239&action=diff "turn on packing restrictions") [[review]](/page.cgi?id=splinter.html&ignore=&bug=805814&attachment=688239)
turn on packing restrictions
[Security approval request comment]
How easily can the security issue be deduced from the patch?
Not easily, but there's a reason we're adding what we're adding. This plugs a hole that's not well known to others, but fairly well known to WebGL people.
Do comments in the patch, the check-in comment, or tests included in the patch paint a bulls-eye on the security problem?
No, just that the patch adds a single line.
Which older supported branches are affected by this flaw?
All.
If not all supported branches, which bug introduced the flaw?
Do you have backports for the affected branches? If not, how different, hard to create, and risky will they be?
It depends on how difficult it is to backport the ANGLE portion. It should be possible, though. Targets are likely Aurora 19, Beta 18, ESR 17.
How likely is this patch to cause regressions; how much testing does it need?
Unlikely to cause regressions given our test coverage.
[Attachment #688239](/attachment.cgi?id=688239&action=edit "turn on packing restrictions") -
Flags: sec-approval?

|  | [Kelsey Gilbert [:jgilbert]](/user_profile?user_id=419431) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=805814#a3581132_419431)• 12 years ago |

Status: NEW → ASSIGNED

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 26](/show_bug.cgi?id=805814#c26)• 12 years ago |
|  | |

Comment on [attachment 688239](/attachment.cgi?id=688239 "turn on packing restrictions") [[details]](/attachment.cgi?id=688239&action=edit "turn on packing restrictions") [[diff]](/attachment.cgi?id=688239&action=diff "turn on packing restrictions") [[review]](/page.cgi?id=splinter.html&ignore=&bug=805814&attachment=688239)
turn on packing restrictions
sec-approval+.
Please prepare patches for affected branches and nominate them so we can try to get this into 18 and 19 too.

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=805814#a3639762_280903)• 12 years ago |

[Attachment #688239](/attachment.cgi?id=688239&action=edit "turn on packing restrictions") -
Flags: sec-approval? → sec-approval+

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=805814#a3639777_280903)• 12 years ago |

[Attachment #688237](/attachment.cgi?id=688237&action=edit "import angle r1317 (only that revision)") -
Flags: sec-approval? → sec-approval+

|  | [Alex Keybl [:akeybl]](/user_profile?user_id=425645) |  |
| --- | --- | --- |
| [Comment 27](/show_bug.cgi?id=805814#c27)• 12 years ago |
|  | |

Please land today on mozilla-central and prepare branch patches for landing tomorrow. We'd like this to make it into Firefox 18 Beta 4.

|  | [Lukas Blakk [:lsblakk] use ?needinfo](/user_profile?user_id=272375) |  |
| --- | --- | --- |
| [Comment 28](/show_bug.cgi?id=805814#c28)• 12 years ago |
|  | |

Tracking for ESR 17 that will ship with Firefox 18 - nominate asap.
[tracking-firefox-esr17](/buglist.cgi?f1=cf_tracking_firefox_esr17&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox_esr17&o1=equals&v1=%3F) → [18+](/buglist.cgi?f1=cf_tracking_firefox_esr17&o1=equals&v1=18%2B)

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Comment 29](/show_bug.cgi?id=805814#c29)• 12 years ago |
|  | |

<http://hg.mozilla.org/integration/mozilla-inbound/rev/23eb16f8bf3b>
<http://hg.mozilla.org/integration/mozilla-inbound/rev/7e67e86f81d6>Target Milestone: --- → mozilla20

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Comment 30](/show_bug.cgi?id=805814#c30)• 12 years ago |
|  | |

Comment on [attachment 688239](/attachment.cgi?id=688239 "turn on packing restrictions") [[details]](/attachment.cgi?id=688239&action=edit "turn on packing restrictions") [[diff]](/attachment.cgi?id=688239&action=diff "turn on packing restrictions") [[review]](/page.cgi?id=splinter.html&ignore=&bug=805814&attachment=688239)
turn on packing restrictions
Note this approval request covers the \*two\* patches here.
[Approval Request Comment]
If this is not a sec:{high,crit} bug, please state case for ESR consideration:
User impact if declined: This is sec-critical
Fix Landed on Version: 20
Risk to taking this patch (and alternatives if risky): Low risk. The custom mozilla change here (the present patch) is tiny and zero-risk. The ANGLE patch (the other patch attached to this bug, also covered by this approval request) looks big, but it was reviewed upstream by ANGLE devs and is already used in Chromium. It's something that we want anyways because it makes sense. It's unlikely that a bug in there would be worse than the sec-critical vulnerability that it's fixing.
String or UUID changes made by this patch: None.
[Attachment #688239](/attachment.cgi?id=688239&action=edit "turn on packing restrictions") -
Flags: approval-mozilla-esr17?
[Attachment #688239](/attachment.cgi?id=688239&action=edit "turn on packing restrictions") -
Flags: approval-mozilla-beta?
[Attachment #688239](/attachment.cgi?id=688239&action=edit "turn on packing restrictions") -
Flags: approval-mozilla-aurora?

|  | [bhavana bajaj [:bajaj]](/user_profile?user_id=448925) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=805814#a4006479_448925)• 12 years ago |

[tracking-firefox-esr10](/buglist.cgi?f1=cf_tracking_esr10&o1=isnotempty):
--- → [18+](/buglist.cgi?f1=cf_tracking_esr10&o1=equals&v1=18%2B)

|  | [bhavana bajaj [:bajaj]](/user_profile?user_id=448925) |  |
| --- | --- | --- |
| [Comment 31](/show_bug.cgi?id=805814#c31)• 12 years ago |
|  | |

Setting the tracking-firefox-esr10: --- → 18+ as esr10 is marked affected as well

|  | [bhavana bajaj [:bajaj]](/user_profile?user_id=448925) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=805814#a4007509_448925)• 12 years ago |

[Attachment #688239](/attachment.cgi?id=688239&action=edit "turn on packing restrictions") -
Flags: approval-mozilla-esr17?
[Attachment #688239](/attachment.cgi?id=688239&action=edit "turn on packing restrictions") -
Flags: approval-mozilla-esr17+
[Attachment #688239](/attachment.cgi?id=688239&action=edit "turn on packing restrictions") -
Flags: approval-mozilla-beta?
[Attachment #688239](/attachment.cgi?id=688239&action=edit "turn on packing restrictions") -
Flags: approval-mozilla-beta+
[Attachment #688239](/attachment.cgi?id=688239&action=edit "turn on packing restrictions") -
Flags: approval-mozilla-aurora?
[Attachment #688239](/attachment.cgi?id=688239&action=edit "turn on packing restrictions") -
Flags: approval-mozilla-aurora+

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Comment 32](/show_bug.cgi?id=805814#c32)• 12 years ago |
|  | |

There is no chance that we can backport the fix to ESR10. What I can counter-offer, is blacklisting Mesa on ESR10.
[tracking-firefox-esr10](/buglist.cgi?f1=cf_tracking_esr10&o1=isnotempty):
[18+](/buglist.cgi?f1=cf_tracking_esr10&o1=equals&v1=18%2B) → ---

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Comment 33](/show_bug.cgi?id=805814#c33)• 12 years ago |
|  | |

Wait, we have already recently blacklisted WebGL on Mesa on ESR10. I just verified: at GfxInfoX11.cpp:297 we have:
if (mIsMesa) {
if (aFeature == nsIGfxInfo::FEATURE\_WEBGL\_OPENGL) {
\*aStatus = nsIGfxInfo::FEATURE\_BLOCKED\_DRIVER\_VERSION;
aSuggestedDriverVersion.AssignLiteral("Not Mesa");
}
So ESR10 is unaffected.

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=805814#a4010389_382769)• 12 years ago |

[status-firefox-esr10](/buglist.cgi?f1=cf_status_esr10&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_esr10&o1=equals&v1=affected) → [unaffected](/buglist.cgi?f1=cf_status_esr10&o1=equals&v1=unaffected)

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=805814#a4010416_382769)• 12 years ago |

[status-firefox20](/buglist.cgi?f1=cf_status_firefox20&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox20&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox20&o1=equals&v1=fixed)

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Comment 34](/show_bug.cgi?id=805814#c34)• 12 years ago |
|  | |

<http://hg.mozilla.org/releases/mozilla-aurora/rev/d78cebd0fcd4>
<http://hg.mozilla.org/releases/mozilla-aurora/rev/3cd3e56dd691>
<https://hg.mozilla.org/releases/mozilla-beta/rev/756875fbb2bb>
<https://hg.mozilla.org/releases/mozilla-beta/rev/3bf8ca7f948c>
[status-firefox18](/buglist.cgi?f1=cf_status_firefox18&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=fixed)
[status-firefox19](/buglist.cgi?f1=cf_status_firefox19&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=fixed)

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Comment 35](/show_bug.cgi?id=805814#c35)• 12 years ago |
|  | |

<http://hg.mozilla.org/releases/mozilla-esr17/rev/ac125a3b2b60>
<http://hg.mozilla.org/releases/mozilla-esr17/rev/12d64ab0f2ac>
[status-firefox-esr17](/buglist.cgi?f1=cf_status_firefox_esr17&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=fixed)

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Comment 36](/show_bug.cgi?id=805814#c36)• 12 years ago |
|  | |

A tiny bustage fix on esr17:
<https://hg.mozilla.org/releases/mozilla-esr17/rev/2c147a5abc87>

|  | [Ed Morley [:emorley]](/user_profile?user_id=373476) |  |
| --- | --- | --- |
| [Comment 37](/show_bug.cgi?id=805814#c37)• 12 years ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/23eb16f8bf3b>
<https://hg.mozilla.org/mozilla-central/rev/7e67e86f81d6>Status: ASSIGNED → RESOLVEDClosed: 12 years agoResolution: --- → FIXED

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=805814#a5906746_280903)• 12 years ago |

Whiteboard: [adv-main18+][adv-esr17+]

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=805814#a16108585_1689)• 12 years ago |

Group: core-security

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=805814#a129364390_1689)• 8 years ago |

Keywords: [csectype-bounds](/buglist.cgi?keywords=csectype-bounds&resolution=---)
You need to [log in](/show_bug.cgi?id=805814&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from www.ubuntu.com_7edded77_20250125_034832.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# USN-1681-4: Firefox regression

5 February 2013

USN-1681-1 introduced a regression in Firefox.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Releases

* [Ubuntu 12.10](/security/notices?release=quantal)
* [Ubuntu 12.04](/security/notices?release=precise)
* [Ubuntu 11.10](/security/notices?release=oneiric)
* [Ubuntu 10.04](/security/notices?release=lucid)

## Packages

* [firefox](/security/cves?package=firefox) - Mozilla Open Source web browser

## Details

USN-1681-1 fixed vulnerabilities in Firefox. Due to an upstream regression,

Firefox suffered from instabilities when accessing some websites. This

update fixes the problem.

We apologize for the inconvenience.

Original advisory details:

Christoph Diehl, Christian Holler, Mats Palmgren, Chiaki Ishikawa, Bill

Gianopoulos, Benoit Jacob, Gary Kwong, Robert O'Callahan, Jesse Ruderman,

and Julian Seward discovered multiple memory safety issues affecting

Firefox. If the user were tricked into opening a specially crafted page, an

attacker could possibly exploit these to cause a denial of service via

application crash, or potentially execute code with the privileges of the

user invoking Firefox. ([CVE-2013-0769](/security/CVE-2013-0769), [CVE-2013-0749](/security/CVE-2013-0749), [CVE-2013-0770](/security/CVE-2013-0770))

Abhishek Arya discovered several user-after-free and buffer overflows in

Firefox. An attacker could exploit these to cause a denial of service via

application crash, or potentially execute code with the privileges of the

user invoking Firefox. ([CVE-2013-0760](/security/CVE-2013-0760), [CVE-2013-0761](/security/CVE-2013-0761), [CVE-2013-0762](/security/CVE-2013-0762),

[CVE-2013-0763](/security/CVE-2013-0763), [CVE-2013-0766](/security/CVE-2013-0766), [CVE-2013-0767](/security/CVE-2013-0767), [CVE-2013-0771](/security/CVE-2013-0771), [CVE-2012-5829](/security/CVE-2012-5829))

A stack buffer was discovered in Firefox. If the user were tricked into

opening a specially crafted page, an attacker could possibly exploit this

to cause a denial of service via application crash, or potentially execute

code with the privileges of the user invoking Firefox. ([CVE-2013-0768](/security/CVE-2013-0768))

Masato Kinugawa discovered that Firefox did not always properly display URL

values in the address bar. A remote attacker could exploit this to conduct

URL spoofing and phishing attacks. ([CVE-2013-0759](/security/CVE-2013-0759))

Atte Kettunen discovered that Firefox did not properly handle HTML tables

with a large number of columns and column groups. If the user were tricked

into opening a specially crafted page, an attacker could exploit this to

cause a denial of service via application crash, or potentially execute

code with the privileges of the user invoking Firefox. ([CVE-2013-0744](/security/CVE-2013-0744))

Jerry Baker discovered that Firefox did not always properly handle

threading when performing downloads over SSL connections. An attacker could

exploit this to cause a denial of service via application crash.

([CVE-2013-0764](/security/CVE-2013-0764))

Olli Pettay and Boris Zbarsky discovered flaws in the Javacript engine of

Firefox. An attacker could cause a denial of service via application crash,

or potentially execute code with the privileges of the user invoking

Firefox. ([CVE-2013-0745](/security/CVE-2013-0745), [CVE-2013-0746](/security/CVE-2013-0746))

Jesse Ruderman discovered a flaw in the way Firefox handled plugins. If a

user were tricked into opening a specially crafted page, a remote attacker

could exploit this to bypass security protections to conduct clickjacking

attacks. ([CVE-2013-0747](/security/CVE-2013-0747))

Jesse Ruderman discovered an information leak in Firefox. An attacker could

exploit this to reveal memory address layout which could help in bypassing

ASLR protections. ([CVE-2013-0748](/security/CVE-2013-0748))

An integer overflow was discovered in the Javascript engine, leading to a

heap-based buffer overflow. If the user were tricked into opening a

specially crafted page, an attacker could possibly exploit this to execute

code with the privileges of the user invoking Firefox. ([CVE-2013-0750](/security/CVE-2013-0750))

Sviatoslav Chagaev discovered that Firefox did not properly handle XBL

files with multiple XML bindings with SVG content. An attacker could cause

a denial of service via application crash, or potentially execute code with

the privileges of the user invoking Firefox. ([CVE-2013-0752](/security/CVE-2013-0752))

Mariusz Mlynski discovered two flaws to gain access to privileged chrome

functions. An attacker could possibly exploit this to execute code with the

privileges of the user invoking Firefox. ([CVE-2013-0757](/security/CVE-2013-0757), [CVE-2013-0758](/security/CVE-2013-0758))

Several use-after-free issues were discovered in Firefox. If the user were

tricked into opening a specially crafted page, an attacker could possibly

exploit this to execute code with the privileges of the user invoking

Firefox. ([CVE-2013-0753](/security/CVE-2013-0753), [CVE-2013-0754](/security/CVE-2013-0754), [CVE-2013-0755](/security/CVE-2013-0755), [CVE-2013-0756](/security/CVE-2013-0756))

Two intermediate CA certificates were mis-issued by the TURKTRUST

certificate authority. If a remote attacker were able to perform a

machine-in-the-middle attack, this flaw could be exploited to view sensitive

information. ([CVE-2013-0743](/security/CVE-2013-0743))

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Update instructions

The problem can be corrected by updating your system to the following package versions:

##### Ubuntu 12.10

* [firefox](https://launchpad.net/ubuntu/%2Bsource/firefox)
  -
  [18.0.2+build1-0ubuntu0.12.10.1](https://launchpad.net/ubuntu/%2Bsource/firefox/18.0.2%2Bbuild1-0ubuntu0.12.10.1)

##### Ubuntu 12.04

* [firefox](https://launchpad.net/ubuntu/%2Bsource/firefox)
  -
  [18.0.2+build1-0ubuntu0.12.04.1](https://launchpad.net/ubuntu/%2Bsource/firefox/18.0.2%2Bbuild1-0ubuntu0.12.04.1)

##### Ubuntu 11.10

* [firefox](https://launchpad.net/ubuntu/%2Bsource/firefox)
  -
  [18.0.2+build1-0ubuntu0.11.10.1](https://launchpad.net/ubuntu/%2Bsource/firefox/18.0.2%2Bbuild1-0ubuntu0.11.10.1)

##### Ubuntu 10.04

* [firefox](https://launchpad.net/ubuntu/%2Bsource/firefox)
  -
  [18.0.2+build1-0ubuntu0.10.04.1](https://launchpad.net/ubuntu/%2Bsource/firefox/18.0.2%2Bbuild1-0ubuntu0.10.04.1)

After a standard system update you need to restart Firefox to make all the

necessary changes.

## References

* <https://launchpad.net/bugs/1116725>

### Join the discussion

* [Ubuntu security updates mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened)
* [Security announcements mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-security-announce)

### Need help with your security needs?

Ubuntu Pro provides up to ten-year security coverage for over 23,000 open-source packages within the Ubuntu Main and Universe repositories.

[Talk to an expert to find out what would work best for you](/contact-us/form?product=pro)

### Further reading

* *Loading...*

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page



=== Content from www.ubuntu.com_09291b7f_20250125_034831.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# USN-1681-1: Firefox vulnerabilities

9 January 2013

Several security issues were fixed in Firefox.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Releases

* [Ubuntu 12.10](/security/notices?release=quantal)
* [Ubuntu 12.04](/security/notices?release=precise)
* [Ubuntu 11.10](/security/notices?release=oneiric)
* [Ubuntu 10.04](/security/notices?release=lucid)

## Packages

* [firefox](/security/cves?package=firefox) - Mozilla Open Source web browser

## Details

Christoph Diehl, Christian Holler, Mats Palmgren, Chiaki Ishikawa, Bill

Gianopoulos, Benoit Jacob, Gary Kwong, Robert O'Callahan, Jesse Ruderman,

and Julian Seward discovered multiple memory safety issues affecting

Firefox. If the user were tricked into opening a specially crafted page, an

attacker could possibly exploit these to cause a denial of service via

application crash, or potentially execute code with the privileges of the

user invoking Firefox. ([CVE-2013-0769](/security/CVE-2013-0769), [CVE-2013-0749](/security/CVE-2013-0749), [CVE-2013-0770](/security/CVE-2013-0770))

Abhishek Arya discovered several user-after-free and buffer overflows in

Firefox. An attacker could exploit these to cause a denial of service via

application crash, or potentially execute code with the privileges of the

user invoking Firefox. ([CVE-2013-0760](/security/CVE-2013-0760), [CVE-2013-0761](/security/CVE-2013-0761), [CVE-2013-0762](/security/CVE-2013-0762),

[CVE-2013-0763](/security/CVE-2013-0763), [CVE-2013-0766](/security/CVE-2013-0766), [CVE-2013-0767](/security/CVE-2013-0767), [CVE-2013-0771](/security/CVE-2013-0771), [CVE-2012-5829](/security/CVE-2012-5829))

A stack buffer was discovered in Firefox. If the user were tricked into

opening a specially crafted page, an attacker could possibly exploit this

to cause a denial of service via application crash, or potentially execute

code with the privileges of the user invoking Firefox. ([CVE-2013-0768](/security/CVE-2013-0768))

Masato Kinugawa discovered that Firefox did not always properly display URL

values in the address bar. A remote attacker could exploit this to conduct

URL spoofing and phishing attacks. ([CVE-2013-0759](/security/CVE-2013-0759))

Atte Kettunen discovered that Firefox did not properly handle HTML tables

with a large number of columns and column groups. If the user were tricked

into opening a specially crafted page, an attacker could exploit this to

cause a denial of service via application crash, or potentially execute

code with the privileges of the user invoking Firefox. ([CVE-2013-0744](/security/CVE-2013-0744))

Jerry Baker discovered that Firefox did not always properly handle

threading when performing downloads over SSL connections. An attacker could

exploit this to cause a denial of service via application crash.

([CVE-2013-0764](/security/CVE-2013-0764))

Olli Pettay and Boris Zbarsky discovered flaws in the Javacript engine of

Firefox. An attacker could cause a denial of service via application crash,

or potentially execute code with the privileges of the user invoking

Firefox. ([CVE-2013-0745](/security/CVE-2013-0745), [CVE-2013-0746](/security/CVE-2013-0746))

Jesse Ruderman discovered a flaw in the way Firefox handled plugins. If a

user were tricked into opening a specially crafted page, a remote attacker

could exploit this to bypass security protections to conduct clickjacking

attacks. ([CVE-2013-0747](/security/CVE-2013-0747))

Jesse Ruderman discovered an information leak in Firefox. An attacker could

exploit this to reveal memory address layout which could help in bypassing

ASLR protections. ([CVE-2013-0748](/security/CVE-2013-0748))

An integer overflow was discovered in the Javascript engine, leading to a

heap-based buffer overflow. If the user were tricked into opening a

specially crafted page, an attacker could possibly exploit this to execute

code with the privileges of the user invoking Firefox. ([CVE-2013-0750](/security/CVE-2013-0750))

Sviatoslav Chagaev discovered that Firefox did not properly handle XBL

files with multiple XML bindings with SVG content. An attacker could cause

a denial of service via application crash, or potentially execute code with

the privileges of the user invoking Firefox. ([CVE-2013-0752](/security/CVE-2013-0752))

Mariusz Mlynski discovered two flaws to gain access to privileged chrome

functions. An attacker could possibly exploit this to execute code with the

privileges of the user invoking Firefox. ([CVE-2013-0757](/security/CVE-2013-0757), [CVE-2013-0758](/security/CVE-2013-0758))

Several use-after-free issues were discovered in Firefox. If the user were

tricked into opening a specially crafted page, an attacker could possibly

exploit this to execute code with the privileges of the user invoking

Firefox. ([CVE-2013-0753](/security/CVE-2013-0753), [CVE-2013-0754](/security/CVE-2013-0754), [CVE-2013-0755](/security/CVE-2013-0755), [CVE-2013-0756](/security/CVE-2013-0756))

Two intermediate CA certificates were mis-issued by the TURKTRUST

certificate authority. If a remote attacker were able to perform a

machine-in-the-middle attack, this flaw could be exploited to view sensitive

information. ([CVE-2013-0743](/security/CVE-2013-0743))

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Update instructions

The problem can be corrected by updating your system to the following package versions:

##### Ubuntu 12.10

* [firefox](https://launchpad.net/ubuntu/%2Bsource/firefox)
  -
  [18.0+build1-0ubuntu0.12.10.3](https://launchpad.net/ubuntu/%2Bsource/firefox/18.0%2Bbuild1-0ubuntu0.12.10.3)

##### Ubuntu 12.04

* [firefox](https://launchpad.net/ubuntu/%2Bsource/firefox)
  -
  [18.0+build1-0ubuntu0.12.04.3](https://launchpad.net/ubuntu/%2Bsource/firefox/18.0%2Bbuild1-0ubuntu0.12.04.3)

##### Ubuntu 11.10

* [firefox](https://launchpad.net/ubuntu/%2Bsource/firefox)
  -
  [18.0+build1-0ubuntu0.11.10.3](https://launchpad.net/ubuntu/%2Bsource/firefox/18.0%2Bbuild1-0ubuntu0.11.10.3)

##### Ubuntu 10.04

* [firefox](https://launchpad.net/ubuntu/%2Bsource/firefox)
  -
  [18.0+build1-0ubuntu0.10.04.3](https://launchpad.net/ubuntu/%2Bsource/firefox/18.0%2Bbuild1-0ubuntu0.10.04.3)

After a standard system update you need to restart Firefox to make all the

necessary changes.

## References

* [CVE-2013-0769](/security/CVE-2013-0769)
* [CVE-2013-0749](/security/CVE-2013-0749)
* [CVE-2013-0770](/security/CVE-2013-0770)
* [CVE-2013-0760](/security/CVE-2013-0760)
* [CVE-2013-0762](/security/CVE-2013-0762)
* [CVE-2013-0766](/security/CVE-2013-0766)
* [CVE-2013-0767](/security/CVE-2013-0767)
* [CVE-2013-0761](/security/CVE-2013-0761)
* [CVE-2013-0763](/security/CVE-2013-0763)
* [CVE-2013-0771](/security/CVE-2013-0771)
* [CVE-2012-5829](/security/CVE-2012-5829)
* [CVE-2013-0768](/security/CVE-2013-0768)
* [CVE-2013-0759](/security/CVE-2013-0759)
* [CVE-2013-0744](/security/CVE-2013-0744)
* [CVE-2013-0764](/security/CVE-2013-0764)
* [CVE-2013-0745](/security/CVE-2013-0745)
* [CVE-2013-0746](/security/CVE-2013-0746)
* [CVE-2013-0747](/security/CVE-2013-0747)
* [CVE-2013-0748](/security/CVE-2013-0748)
* [CVE-2013-0750](/security/CVE-2013-0750)
* [CVE-2013-0752](/security/CVE-2013-0752)
* [CVE-2013-0757](/security/CVE-2013-0757)
* [CVE-2013-0758](/security/CVE-2013-0758)
* [CVE-2013-0753](/security/CVE-2013-0753)
* [CVE-2013-0754](/security/CVE-2013-0754)
* [CVE-2013-0755](/security/CVE-2013-0755)
* [CVE-2013-0756](/security/CVE-2013-0756)
* [CVE-2013-0743](/security/CVE-2013-0743)
* <https://launchpad.net/bugs/1096387>

## Related notices

* [USN-1681-2](/security/notices/USN-1681-2)
* [USN-1638-1](/security/notices/USN-1638-1)
* [USN-1636-1](/security/notices/USN-1636-1)
* [USN-1687-1](/security/notices/USN-1687-1)
* [USN-1687-2](/security/notices/USN-1687-2)

### Join the discussion

* [Ubuntu security updates mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened)
* [Security announcements mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-security-announce)

### Need help with your security needs?

Ubuntu Pro provides up to ten-year security coverage for over 23,000 open-source packages within the Ubuntu Main and Universe repositories.

[Talk to an expert to find out what would work best for you](/contact-us/form?product=pro)

### Further reading

* *Loading...*

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page



=== Content from bugzilla.mozilla.org_5c387d90_20250125_034833.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/785358)
* [XML](/show_bug.cgi?ctype=xml&id=785358)

Closed
[Bug 785358](/show_bug.cgi?id=785358)

Opened 12 years ago
Closed 12 years ago

# Assertion failure: fe->isType(type), at methodjit/Compiler.cpp:7623

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

Assertion failure: fe->isType(type), at methodjit/Compiler.cpp:7623

## Categories

### (Core :: JavaScript Engine, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=JavaScript%20Engine#JavaScript%20Engine)

JavaScript Engine
▾

Core :: JavaScript Engine
The interpreter engine for the core JavaScript language, independent of the browser's object model. File ONLY core JavaScript language bugs in this category. For bugs involving browser objects such as "window" and "document", use the "DOM" component. For bugs involving calls between JavaScript and C++, use the "XPConnect" component.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=JavaScript%20Engine)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

x86\_64

Linux

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

critical

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla18

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| a11y-review | --- |
| --- | --- |
| Accessibility Severity | --- |
| Webcompat Score | --- |
| Webcompat Priority | --- |
| Performance Impact | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox15 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox15&o1=equals&v1=wontfix) |
| firefox16 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox16&o1=equals&v1=wontfix) |
| firefox17 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox17&o1=equals&v1=wontfix) |
| firefox18 | --- | [fixed](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=fixed) |
| firefox19 | --- | [fixed](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=fixed) |
| firefox20 | --- | [fixed](/buglist.cgi?f1=cf_status_firefox20&o1=equals&v1=fixed) |
| firefox-esr10 | --- | [unaffected](/buglist.cgi?f1=cf_status_esr10&o1=equals&v1=unaffected) |
| firefox-esr17 | [18+](/buglist.cgi?f1=cf_tracking_firefox_esr17&o1=equals&v1=18%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=fixed) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox15 |  | wontfix |
| firefox16 |  | wontfix |
| firefox17 |  | wontfix |
| firefox18 |  | fixed |
| firefox19 |  | fixed |
| firefox20 |  | fixed |
| firefox-esr10 |  | unaffected |
| firefox-esr17 | 18+ | fixed |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: decoder, Assigned: bhackett1024)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/764aa0af2fda6f02fb17dc9771bb18d9?d=mm&size=40)  [bhackett1024](/user_profile?user_id=346231)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

![](https://secure.gravatar.com/avatar/55857f92ded07119259dc6c1dd386205?d=mm&size=40)  [general](/user_profile?user_id=4729)

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/b29b83d12aba827b8ff68296e473bec5?d=mm&size=40)  [decoder](/user_profile?user_id=395101)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/4fe52ee1503aecf7b6c976b8eb7c1753?d=mm&size=40)  [willyelm](/user_profile?user_id=714609)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

12 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

---

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Keywords: assertion, sec-critical, testcase, Whiteboard: [jsbugmon:verify-branch=mozilla-esr17,ignore][adv-main18+][adv-esr17+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[assertion](/buglist.cgi?keywords=assertion&resolution=---),
[sec-critical](/buglist.cgi?keywords=sec-critical&resolution=---),
[testcase](/buglist.cgi?keywords=testcase&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[jsbugmon:verify-branch=mozilla-esr17,ignore][adv-main18+][adv-esr17+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [u279076](/user_profile?user_id=279076) | [in-testsuite](#c16 "12 years ago") | ? |
| --- | --- | --- |
| [u279076](/user_profile?user_id=279076) | in-testsuite | ? |
| --- | --- | --- |
|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (1 file)

| [patch](/attachment.cgi?id=655357)  [12 years ago](#c3)  [Brian Hackett [Laid off!]](/user_profile?user_id=346231)   1.45 KB, patch | dvander : [review+](#a300223_309316 "12 years ago")  lsblakk : [approval-mozilla-esr17+](#a10071008_272375 "12 years ago") | [Details](/attachment.cgi?id=655357&action=edit) | [Diff](/attachment.cgi?id=655357&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=785358&attachment=655357) |
| --- | --- | --- |

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=785358#c0)• 12 years ago |
|  | |

The following test asserts on mozilla-central revision ad7963c93bd8 (options -m -a -n):
try {
a = []
function f(o) {
o[5] = {}
}
with(a) f()
} catch(exc1) {}
evaluate("f({});");

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=785358#a2396_395101)• 12 years ago |

Whiteboard: [jsbugmon:update,bisect] → [jsbugmon:update]

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=785358#c1)• 12 years ago |
|  | |

JSBugMon: Bisection requested, result:
autoBisect shows this is probably related to the following changeset:
The first bad revision is:
changeset: 103051:bf07c6253287
user: Brian Hackett
date: Wed Aug 22 12:28:34 2012 -0600
summary: Allow purging analysis-temporary while retaining jitcode, [bug 778724](/show_bug.cgi?id=778724 "RESOLVED FIXED - Allow purging analysis-temporary while retaining jitcode"). r=luke

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=785358#c2)• 12 years ago |
|  | |

CCing bhackett and luke by [comment 1](/show_bug.cgi?id=785358#c1 "VERIFIED FIXED - Assertion failure: fe->isType(type), at methodjit/Compiler.cpp:7623").

|  | [Brian Hackett [Laid off!]](/user_profile?user_id=346231)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=785358#a121848_346231)• 12 years ago |

Group: core-security

|  | [Brian Hackett [Laid off!]](/user_profile?user_id=346231)  Assignee |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=785358#c3)• 12 years ago |
|  | |

Attached patch

[patch](attachment.cgi?id=655357&action=diff)
— [Details](attachment.cgi?id=655357&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=785358&attachment=655357)

[Bug 778724](/show_bug.cgi?id=778724 "RESOLVED FIXED - Allow purging analysis-temporary while retaining jitcode") is innocent here, the different recompilation pattern it introduces exposed the bug. This is a regression from [bug 731398](/show_bug.cgi?id=731398 "RESOLVED FIXED - Realtime raytracer regression"); this bug allows initializers in run-once scripts to produce objects with singleton type, which TI will not try to guess at the result until the initializer actually runs. But JM will still treat these opcodes as definitely producing objects, a refinement of the type information which it shouldn't be doing.Assignee: general → bhackett1024
[Attachment #655357](/attachment.cgi?id=655357&action=edit "patch") -
Flags: review?(dvander)

|  | [David Anderson [:dvander] - inactive, e-mail if emergency](/user_profile?user_id=309316) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=785358#a300223_309316)• 12 years ago |

[Attachment #655357](/attachment.cgi?id=655357&action=edit "patch") -
Flags: review?(dvander) → review+

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=785358#a365530_406194)• 12 years ago |

[status-firefox-esr10](/buglist.cgi?f1=cf_status_esr10&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_esr10&o1=equals&v1=unaffected)
[status-firefox15](/buglist.cgi?f1=cf_status_firefox15&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_firefox15&o1=equals&v1=wontfix)
[status-firefox16](/buglist.cgi?f1=cf_status_firefox16&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox16&o1=equals&v1=affected)
[status-firefox17](/buglist.cgi?f1=cf_status_firefox17&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox17&o1=equals&v1=affected)
[status-firefox18](/buglist.cgi?f1=cf_status_firefox18&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=affected)

|  | [David Bolter [:davidb] (NeedInfo me for attention)](/user_profile?user_id=152868) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=785358#a459374_152868)• 12 years ago |

Keywords: [sec-critical](/buglist.cgi?keywords=sec-critical&resolution=---)

|  | [Brian Hackett [Laid off!]](/user_profile?user_id=346231)  Assignee |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=785358#c4)• 12 years ago |
|  | |

<https://hg.mozilla.org/integration/mozilla-inbound/rev/1dce4807ad01>

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=785358#a515992_395101)• 12 years ago |

Whiteboard: [jsbugmon:update] → [jsbugmon:update,ignore]

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=785358#c5)• 12 years ago |
|  | |

JSBugMon: The testcase found in this bug no longer reproduces (tried revision 1b0b56afa33a).

|  | [Ed Morley [:emorley]](/user_profile?user_id=373476) |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=785358#c6)• 12 years ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/1dce4807ad01>Status: NEW → RESOLVEDClosed: 12 years ago
[status-firefox18](/buglist.cgi?f1=cf_status_firefox18&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=fixed)Resolution: --- → FIXEDTarget Milestone: --- → mozilla18

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=785358#a520076_395101)• 12 years ago |

Status: RESOLVED → VERIFIED

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=785358#c7)• 12 years ago |
|  | |

JSBugMon: This bug has been automatically verified fixed.

|  | [Matt Wobensmith [:mwobensmith][:matt:]](/user_profile?user_id=452604) |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=785358#c8)• 12 years ago |
|  | |

Confirmed assert on 2012-8-24, nightly jsshell
I can confirm fixed (or unable to reproduce) on jsshell for beta/Aurora/nightly, 2012-11-20. However, above comments say it was only fixed for 18.
Is this correct? What would we expect to see here?

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034) |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=785358#c9)• 12 years ago |
|  | |

Assuming affected for 17 - decoder, do you mind rechecking if 17 is still affected?
(wontfix'ing for 16 since 17 is out of the door)
[status-firefox16](/buglist.cgi?f1=cf_status_firefox16&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox16&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_firefox16&o1=equals&v1=wontfix)
[status-firefox19](/buglist.cgi?f1=cf_status_firefox19&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=fixed)
[status-firefox20](/buglist.cgi?f1=cf_status_firefox20&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_firefox20&o1=equals&v1=fixed)
[status-firefox-esr17](/buglist.cgi?f1=cf_status_firefox_esr17&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=affected)Flags: needinfo?(choller)

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=785358#a9114351_395101)• 12 years ago |

Whiteboard: [jsbugmon:update,ignore] → [jsbugmon:verify-branch=mozilla-release]

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=785358#a9119878_395101)• 12 years ago |

Whiteboard: [jsbugmon:verify-branch=mozilla-release] → [jsbugmon:verify-branch=mozilla-release,ignore]

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=785358#c10)• 12 years ago |
|  | |

JSBugMon: This bug has been automatically confirmed to be still valid on branch mozilla-release (reproduced on revision 53fc01ba93c2).Flags: needinfo?(choller)

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=785358#a9120230_132034)• 12 years ago |

[tracking-firefox-esr17](/buglist.cgi?f1=cf_tracking_firefox_esr17&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox_esr17&o1=equals&v1=%3F)

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=785358#c11)• 12 years ago |
|  | |

Also trying to confirm for ESR17 branch.Whiteboard: [jsbugmon:verify-branch=mozilla-release,ignore] → [jsbugmon:verify-branch=mozilla-esr17]

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=785358#a9122341_395101)• 12 years ago |

Whiteboard: [jsbugmon:verify-branch=mozilla-esr17] → [jsbugmon:verify-branch=mozilla-esr17,ignore]

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=785358#c12)• 12 years ago |
|  | |

JSBugMon: This bug has been automatically confirmed to be still valid on branch mozilla-esr17 (reproduced on revision 30b9dd4e9966).

|  | [Lukas Blakk [:lsblakk] use ?needinfo](/user_profile?user_id=272375) |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=785358#c13)• 12 years ago |
|  | |

Tracking for ESR 17 that will ship with Firefox 18 - can someone please nominate for esr17 approval (assuming this patch lands cleanly there) or prepare an esr17 patch?
[tracking-firefox-esr17](/buglist.cgi?f1=cf_tracking_firefox_esr17&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox_esr17&o1=equals&v1=%3F) → [18+](/buglist.cgi?f1=cf_tracking_firefox_esr17&o1=equals&v1=18%2B)

|  | [Brian Hackett [Laid off!]](/user_profile?user_id=346231)  Assignee |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=785358#c14)• 12 years ago |
|  | |

Comment on [attachment 655357](/attachment.cgi?id=655357 "patch") [[details]](/attachment.cgi?id=655357&action=edit "patch") [[diff]](/attachment.cgi?id=655357&action=diff "patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=785358&attachment=655357)
patch
[Approval Request Comment]
Fix Landed on Version: 18
Risk to taking this patch (and alternatives if risky): None
[Attachment #655357](/attachment.cgi?id=655357&action=edit "patch") -
Flags: approval-mozilla-esr17?

|  | [Lukas Blakk [:lsblakk] use ?needinfo](/user_profile?user_id=272375) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=785358#a10071008_272375)• 12 years ago |

[Attachment #655357](/attachment.cgi?id=655357&action=edit "patch") -
Flags: approval-mozilla-esr17? → approval-mozilla-esr17+

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=785358#a10071213_132034)• 12 years ago |

Keywords: [checkin-needed](/buglist.cgi?keywords=checkin-needed&resolution=---)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=785358#c15)• 12 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-esr17/rev/7b48b8242078>
[status-firefox17](/buglist.cgi?f1=cf_status_firefox17&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox17&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_firefox17&o1=equals&v1=wontfix)
[status-firefox-esr17](/buglist.cgi?f1=cf_status_firefox_esr17&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=fixed)Keywords: [checkin-needed](/buglist.cgi?keywords=checkin-needed&resolution=---)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=785358#a11364558_280903)• 12 years ago |

Whiteboard: [jsbugmon:verify-branch=mozilla-esr17,ignore] → [jsbugmon:verify-branch=mozilla-esr17,ignore][adv-main18+][adv-esr17+]

|  | [u279076](/user_profile?user_id=279076) |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=785358#c16)• 12 years ago |
|  | |

Can this be put in testsuite?Flags: in-testsuite?

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=785358#a21564214_1689)• 12 years ago |

Group: core-security
You need to [log in](/show_bug.cgi?id=785358&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Brian Hackett [Laid off!]](/user_profile?user_id=346231)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from bugzilla.mozilla.org_43b33282_20250125_034837.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/805745)
* [XML](/show_bug.cgi?ctype=xml&id=805745)

Closed
[Bug 805745](/show_bug.cgi?id=805745)

Opened 12 years ago
Closed 12 years ago

# crash in nsWindow::OnPaint

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

crash in nsWindow::OnPaint

## Categories

### (Core :: Widget: Win32, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=Widget%3A%20Win32#Widget%3A%20Win32)

Widget: Win32
▾

Core :: Widget: Win32
Mapping of cross platform widget interfaces to Win32 platform APIs.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=Widget%3A%20Win32&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=Widget%3A%20Win32&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=Widget%3A%20Win32)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

19 Branch

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

All

Windows 7

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

critical

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla20

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Webcompat Priority | --- |
| --- | --- |
| a11y-review | --- |
| Webcompat Score | --- |
| Accessibility Severity | --- |
| Performance Impact | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox17 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox17&o1=equals&v1=wontfix) |
| firefox18 | [+](/buglist.cgi?f1=cf_tracking_firefox18&o1=equals&v1=%2B) | [verified](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=verified) |
| firefox19 | [+](/buglist.cgi?f1=cf_tracking_firefox19&o1=equals&v1=%2B) | [verified](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=verified) |
| firefox20 | [+](/buglist.cgi?f1=cf_tracking_firefox20&o1=equals&v1=%2B) | [verified](/buglist.cgi?f1=cf_status_firefox20&o1=equals&v1=verified) |
| firefox-esr10 | --- | [unaffected](/buglist.cgi?f1=cf_status_esr10&o1=equals&v1=unaffected) |
| firefox-esr17 | [18+](/buglist.cgi?f1=cf_tracking_firefox_esr17&o1=equals&v1=18%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=fixed) |
| b2g18 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=fixed) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox17 |  | wontfix |
| firefox18 | + | verified |
| firefox19 | + | verified |
| firefox20 | + | verified |
| firefox-esr10 |  | unaffected |
| firefox-esr17 | 18+ | fixed |
| b2g18 |  | fixed |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: scoobidiver, Assigned: tnikkel)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/0646a42110a02dd585f200f270716852?d=mm&size=40)  [tnikkel](/user_profile?user_id=255010)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

![](https://secure.gravatar.com/avatar/7bb698c4991c5af83adabe3c3b8ee8aa?d=mm&size=40)  [mwobensmith](/user_profile?user_id=452604)

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/43a258096978fdc5ca10d5b423b0c178?d=mm&size=40)  [scoobidiver](/user_profile?user_id=386758)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/605ee8cd1c9a74704916c7bdc4e4865d?d=mm&size=40)  [rkraesig](/user_profile?user_id=699639)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

19 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

[813024](/show_bug.cgi?id=813024 "RESOLVED FIXED - crash in mozilla::layers::BasicLayerManager::SetDefaultTarget")

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[782980](/show_bug.cgi?id=782980 "RESOLVED FIXED - Temporary blank boxes on right and bottom while resizing browser window"), [793983](/show_bug.cgi?id=793983 "VERIFIED FIXED - Firefox 17 crash in nsWindow::OnPaint"), [822999](/show_bug.cgi?id=822999 "RESOLVED WORKSFORME - startup crash in nsWindow::OnPaint")

Dependency [tree](/showdependencytree.cgi?id=805745&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=805745)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (5 keywords, Whiteboard: [startupcrash][adv-main18+][adv-esr17+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[crash](/buglist.cgi?keywords=crash&resolution=---),
[regression](/buglist.cgi?keywords=regression&resolution=---),
[sec-critical](/buglist.cgi?keywords=sec-critical&resolution=---),
[testcase](/buglist.cgi?keywords=testcase&resolution=---),
[topcrash](/buglist.cgi?keywords=topcrash&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[startupcrash][adv-main18+][adv-esr17+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [u279076](/user_profile?user_id=279076) | [in-testsuite](#c91 "12 years ago") | ? |
| --- | --- | --- |
| [u279076](/user_profile?user_id=279076) | in-testsuite | ? |
| --- | --- | --- |
|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | qe-verify |  |

## Crash Data

Signature:

[[@ mozilla::layers::ImageContainer::Release() ]](https://crash-stats.mozilla.org/signature/?signature=mozilla%3A%3Alayers%3A%3AImageContainer%3A%3ARelease%28%29)

[[@ nsBaseWidget::AutoLayerManagerSetup::~AutoLayerManagerSetup() ]](https://crash-stats.mozilla.org/signature/?signature=nsBaseWidget%3A%3AAutoLayerManagerSetup%3A%3A~AutoLayerManagerSetup%28%29)

[[@ @0x0 | nsBaseWidget::AutoLayerManagerSetup::~AutoLayerManagerSetup() ]](https://crash-stats.mozilla.org/signature/?signature=%400x0%20%7C%20nsBaseWidget%3A%3AAutoLayerManagerSetup%3A%3A~AutoLayerManagerSetup%28%29)

[[@ nsWindow::OnPaint(HDC\_\_\*, unsigned int) ]](https://crash-stats.mozilla.org/signature/?signature=nsWindow%3A%3AOnPaint%28HDC__%2A%2C%20unsigned%20int%29)

[[@ gfxContext::~gfxContext() ]](https://crash-stats.mozilla.org/signature/?signature=gfxContext%3A%3A~gfxContext%28%29)

[[@ \_moz\_cairo\_destroy ]](https://crash-stats.mozilla.org/signature/?signature=_moz_cairo_destroy)

[[@ gfxASurface::Release() ]](https://crash-stats.mozilla.org/signature/?signature=gfxASurface%3A%3ARelease%28%29)

[[@ mozilla::layers::Layer::~Layer() ]](https://crash-stats.mozilla.org/signature/?signature=mozilla%3A%3Alayers%3A%3ALayer%3A%3A~Layer%28%29)

[[@ nsTArray<mozilla::css::ComputedTimingFunction\*, nsTArrayInfallibleAllocator>::Clear() | nsTArray<void\*, nsTArrayInfallibleAllocator>::~nsTArray<void\*, nsTArrayInfallibleAllocator>() | mozilla::layers::AnimData::~AnimData() ]](https://crash-stats.mozilla.org/signature/?signature=nsTArray%3Cmozilla%3A%3Acss%3A%3AComputedTimingFunction%2A%2C%20nsTArrayInfallibleAllocator%3E%3A%3AClear%28%29%20%7C%20nsTArray%3Cvoid%2A%2C%20nsTArrayInfallibleAllocator%3E%3A%3A~nsTArray%3Cvoid%2A%2C%20nsTArrayInfallibleAllocator%3E%28%29%20%7C%20mozilla%3A%3Alayers%3A%3AAnimData%3A%3A~AnimData%28%29)

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (9 files, 1 obsolete file)

| [Move the forced repaint from the Paint notification to the WillPaint notification.](/attachment.cgi?id=690653)  [12 years ago](#c43)  [Timothy Nikkel (:tnikkel)](/user_profile?user_id=255010)   2.26 KB, patch | mattwoodrow : [review+](#a3955130_380838 "12 years ago")  bajaj : [approval-mozilla-aurora+](#c73 "12 years ago")  bajaj : [approval-mozilla-beta+](#c73 "12 years ago")  akeybl : [approval-mozilla-esr17+](#a4905605_425645 "12 years ago")  akeybl : [sec-approval+](#a4111116_425645 "12 years ago") | [Details](/attachment.cgi?id=690653&action=edit) | [Diff](/attachment.cgi?id=690653&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=805745&attachment=690653) |
| --- | --- | --- |
| [Re-get the view after calling PaintWindow because it can flush (via WillPaint).](/attachment.cgi?id=690654)  [12 years ago](#c44)  [Timothy Nikkel (:tnikkel)](/user_profile?user_id=255010)   1.17 KB, patch | mattwoodrow : [review+](#a3955152_380838 "12 years ago") | [Details](/attachment.cgi?id=690654&action=edit) | [Diff](/attachment.cgi?id=690654&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=805745&attachment=690654) |
| [WillPaint notification can flush, so re-get the listener after it on GTK2 widget backend.](/attachment.cgi?id=690655)  [12 years ago](#c45)  [Timothy Nikkel (:tnikkel)](/user_profile?user_id=255010)   1.10 KB, patch | karlt : [review+](#a3958463_274246 "12 years ago") | [Details](/attachment.cgi?id=690655&action=edit) | [Diff](/attachment.cgi?id=690655&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=805745&attachment=690655) |
| [WillPaint notification can flush, so re-get the listener after it on Windows widget backend.](/attachment.cgi?id=690657)  [12 years ago](#c46)  [Timothy Nikkel (:tnikkel)](/user_profile?user_id=255010)   1.06 KB, patch | jimm : [review+](#c50 "12 years ago") | [Details](/attachment.cgi?id=690657&action=edit) | [Diff](/attachment.cgi?id=690657&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=805745&attachment=690657) |
| [Paint notification can flush (via WillPaint), so re-check if the listener still exists after on puppet widget backend.](/attachment.cgi?id=690659)  [12 years ago](#c47)  [Timothy Nikkel (:tnikkel)](/user_profile?user_id=255010)   1017 bytes, patch | cjones : [review+](#c49 "12 years ago") | [Details](/attachment.cgi?id=690659&action=edit) | [Diff](/attachment.cgi?id=690659&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=805745&attachment=690659) |
| [winrt widget patch](/attachment.cgi?id=690817)  [12 years ago](#c51)  [Jim Mathies [:jimm]](/user_profile?user_id=279663)   2.17 KB, patch | tnikkel : [review+](#c53 "12 years ago") | [Details](/attachment.cgi?id=690817&action=edit) | [Diff](/attachment.cgi?id=690817&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=805745&attachment=690817) |
| [WillPaint notification can flush, so re-get the listener after it on Windows widget backend.](/attachment.cgi?id=690867)  [12 years ago](#c54)  [Timothy Nikkel (:tnikkel)](/user_profile?user_id=255010)   2.97 KB, patch | tnikkel : [review+](#c54 "12 years ago") | [Details](/attachment.cgi?id=690867&action=edit) | [Diff](/attachment.cgi?id=690867&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=805745&attachment=690867) |
| [Reproduce Crash using Ubi Case](/attachment.cgi?id=696660)  [12 years ago](#c90)  [Kamil Jozwiak [:kjozwiak]](/user_profile?user_id=455785)   56.64 KB, text/html |  | [Details](/attachment.cgi?id=696660&action=edit) |
| [reduced test case without jquery](/attachment.cgi?id=697326)  [12 years ago](#c95)  [Kamil Jozwiak [:kjozwiak]](/user_profile?user_id=455785)   432 bytes, text/html |  | [Details](/attachment.cgi?id=697326&action=edit) |
| [mochitest](/attachment.cgi?id=706939)  [12 years ago](#c99)  [Kamil Jozwiak [:kjozwiak]](/user_profile?user_id=455785)   2.31 KB, patch | kjozwiak : [review?](#c99 "12 years ago") tnikkel | [Details](/attachment.cgi?id=706939&action=edit) | [Diff](/attachment.cgi?id=706939&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=805745&attachment=706939) |

Show Obsolete

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Scoobidiver (away)](/user_profile?user_id=386758)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=805745#c0)• 12 years ago |
|  | |

It first appeared in 19.0a1/20121025. The regression range is:
<http://hg.mozilla.org/mozilla-central/pushloghtml?fromchange=93cc1ee94291&tochange=5c82f5a5e90d>
Signature mozilla::layers::ImageContainer::Release() More Reports Search
UUID 08f4bce0-c20d-4cee-bee6-221822121026
Date Processed 2012-10-26 07:17:09
Uptime 16
Install Age 16 seconds since version was first installed.
Install Time 2012-10-26 07:16:28
Product Firefox
Version 19.0a1
Build ID 20121025030620
Release Channel nightly
OS Windows NT
OS Version 6.1.7601 Service Pack 1
Build Architecture x86
Build Architecture Info AuthenticAMD family 16 model 6 stepping 2
Crash Reason EXCEPTION\_ACCESS\_VIOLATION\_WRITE
Crash Address 0x740075
App Notes
AdapterVendorID: 0x1002, AdapterDeviceID: 0x68e0, AdapterSubsysID: 00000000, AdapterDriverVersion: 8.713.3.0
D3D10 Layers? D3D10 Layers-
Processor Notes This dump is too long and has triggered the automatic truncation routine
EMCheckCompatibility True
Adapter Vendor ID 0x1002
Adapter Device ID 0x68e0
Total Virtual Memory 4294836224
Available Virtual Memory 3903037440
System Memory Use Percentage 55
Available Page File 2922856448
Available Physical Memory 951963648
Frame Module Signature Source
0 xul.dll mozilla::layers::ImageContainer::Release obj-firefox/dist/include/ImageContainer.h:265
1 xul.dll nsRefPtr<mozilla::layers::ImageContainer>::~nsRefPtr<mozilla::layers::ImageConta obj-firefox/dist/include/nsAutoPtr.h:874
2 xul.dll mozilla::layers::ImageLayer::~ImageLayer gfx/layers/ImageLayers.cpp:18
3 xul.dll mozilla::layers::ImageLayer::`scalar deleting destructor'
4 xul.dll nsWindow::OnPaint widget/windows/nsWindowGfx.cpp:420
5 xul.dll nsWindow::ProcessMessage widget/windows/nsWindow.cpp:4727
6 xul.dll nsWindow::WindowProcInternal widget/windows/nsWindow.cpp:4336
7 xul.dll CallWindowProcCrashProtected xpcom/base/nsCrashOnException.cpp:32
8 xul.dll nsWindow::WindowProc widget/windows/nsWindow.cpp:4282
9 user32.dll InternalCallWinProc
10 user32.dll NtUserGetDC
11 user32.dll DispatchClientMessage
12 user32.dll \_\_fnDWORD
13 ntdll.dll KiUserCallbackDispatcher
14 ntdll.dll KiUserApcDispatcher
15 xul.dll nsWindow::Show widget/windows/nsWindow.cpp:1189
16 xul.dll nsXULWindow::SetVisibility xpfe/appshell/src/nsXULWindow.cpp:795
17 xul.dll nsXULWindow::OnChromeLoaded xpfe/appshell/src/nsXULWindow.cpp:992
18 xul.dll nsWebShellWindow::OnStateChange xpfe/appshell/src/nsWebShellWindow.cpp:563
19 xul.dll nsDocLoader::DoFireOnStateChange uriloader/base/nsDocLoader.cpp:1351
20 xul.dll nsDocLoader::doStopDocumentLoad uriloader/base/nsDocLoader.cpp:942
...
More reports at:
<https://crash-stats.mozilla.com/report/list?signature=mozilla%3A%3Alayers%3A%3AImageContainer%3A%3ARelease%28%29>

|  | [Scoobidiver (away)](/user_profile?user_id=386758)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=805745#a16923_386758)• 12 years ago |

Crash Signature: [@ mozilla::layers::ImageContainer::Release()] → [@ mozilla::layers::ImageContainer::Release()]
[@ nsBaseWidget::AutoLayerManagerSetup::~AutoLayerManagerSetup()]Hardware: x86 → All

|  | [Scoobidiver (away)](/user_profile?user_id=386758)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=805745#a94483_386758)• 12 years ago |

Crash Signature: [@ mozilla::layers::ImageContainer::Release()]
[@ nsBaseWidget::AutoLayerManagerSetup::~AutoLayerManagerSetup()] → [@ mozilla::layers::ImageContainer::Release()]
[@ nsBaseWidget::AutoLayerManagerSetup::~AutoLayerManagerSetup()]
[@ nsWindow::OnPaint(HDC\_\_\*, unsigned int)]

|  | [Scoobidiver (away)](/user_profile?user_id=386758)  Reporter |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=805745#c1)• 12 years ago |
|  | |

It might be a regression from [bug 782547](/show_bug.cgi?id=782547 "VERIFIED FIXED - Accessible focus not fired after dismissing OS print dialog").Crash Signature: [@ mozilla::layers::ImageContainer::Release()]
[@ nsBaseWidget::AutoLayerManagerSetup::~AutoLayerManagerSetup()]
[@ nsWindow::OnPaint(HDC\_\_\*, unsigned int)] → [@ mozilla::layers::ImageContainer::Release()]
[@ nsBaseWidget::AutoLayerManagerSetup::~AutoLayerManagerSetup()]
[@ nsWindow::OnPaint(HDC\_\_\*, unsigned int)]
[@ gfxContext::~gfxContext()]Component: Graphics: Layers → Widget: Win32Summary: crash in mozilla::layers::ImageContainer::Release → crash in nsWindow::OnPaint

|  | [Scoobidiver (away)](/user_profile?user_id=386758)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=805745#a196862_386758)• 12 years ago |

Crash Signature: [@ mozilla::layers::ImageContainer::Release()]
[@ nsBaseWidget::AutoLayerManagerSetup::~AutoLayerManagerSetup()]
[@ nsWindow::OnPaint(HDC\_\_\*, unsigned int)]
[@ gfxContext::~gfxContext()] → [@ mozilla::layers::ImageContainer::Release()]
[@ nsBaseWidget::AutoLayerManagerSetup::~AutoLayerManagerSetup()]
[@ nsWindow::OnPaint(HDC\_\_\*, unsigned int)]
[@ gfxContext::~gfxContext()]
[@ \_moz\_cairo\_destroy]

|  | [Scoobidiver (away)](/user_profile?user_id=386758)  Reporter |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=805745#c2)• 12 years ago |
|  | |

With combined signatures, it's #3 top crasher over the last three days.
[status-firefox18](/buglist.cgi?f1=cf_status_firefox18&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=unaffected)
[status-firefox19](/buglist.cgi?f1=cf_status_firefox19&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=affected)
[tracking-firefox19](/buglist.cgi?f1=cf_tracking_firefox19&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox19&o1=equals&v1=%3F)Keywords: [topcrash](/buglist.cgi?keywords=topcrash&resolution=---)

|  | [Scoobidiver (away)](/user_profile?user_id=386758)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=805745#a444866_386758)• 12 years ago |

Crash Signature: [@ mozilla::layers::ImageContainer::Release()]
[@ nsBaseWidget::AutoLayerManagerSetup::~AutoLayerManagerSetup()]
[@ nsWindow::OnPaint(HDC\_\_\*, unsigned int)]
[@ gfxContext::~gfxContext()]
[@ \_moz\_cairo\_destroy] → [@ mozilla::layers::ImageContainer::Release()]
[@ nsBaseWidget::AutoLayerManagerSetup::~AutoLayerManagerSetup()]
[@ nsWindow::OnPaint(HDC\_\_\*, unsigned int)]
[@ gfxContext::~gfxContext()]
[@ \_moz\_cairo\_destroy]
[@ gfxASurface::Release()]

|  | [Scoobidiver (away)](/user_profile?user_id=386758)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=805745#a531898_386758)• 12 years ago |

Crash Signature: [@ mozilla::layers::ImageContainer::Release()]
[@ nsBaseWidget::AutoLayerManagerSetup::~AutoLayerManagerSetup()]
[@ nsWindow::OnPaint(HDC\_\_\*, unsigned int)]
[@ gfxContext::~gfxContext()]
[@ \_moz\_cairo\_destroy]
[@ gfxASurface::Release()] → [@ mozilla::layers::ImageContainer::Release()]
[@ nsBaseWidget::AutoLayerManagerSetup::~AutoLayerManagerSetup()]
[@ nsWindow::OnPaint(HDC\_\_\* unsigned int)]
[@ gfxContext::~gfxContext()]
[@ \_moz\_cairo\_destroy]
[@ gfxASurface::Release()]
[@ mozilla::l…

|  | [Neil Deakin](/user_profile?user_id=6102) |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=805745#c3)• 12 years ago |
|  | |

(In reply to Scoobidiver from [comment #1](/show_bug.cgi?id=805745#c1 "VERIFIED FIXED - crash in nsWindow::OnPaint"))
> It might be a regression from [bug 782547](/show_bug.cgi?id=782547 "VERIFIED FIXED - Accessible focus not fired after dismissing OS print dialog").
Did you mean that that bug caused this crash to occur more frequently? That patch was only in for a few days and the crash reports show crashes over a wide range of different builds.

|  | [Scoobidiver (away)](/user_profile?user_id=386758)  Reporter |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=805745#c4)• 12 years ago |
|  | |

(In reply to Neil Deakin from [comment #3](/show_bug.cgi?id=805745#c3 "VERIFIED FIXED - crash in nsWindow::OnPaint"))
> Did you mean that that bug caused this crash to occur more frequently?
I suspect it but it might be another one as no lines in the stack trace have been changed by one of the patch in the regression range.
> the crash reports show crashes over a wide range of different builds.
But startup crashes have happened since October 25th.
More reports at:
<https://crash-stats.mozilla.com/report/list?signature=nsBaseWidget%3A%3AAutoLayerManagerSetup%3A%3A~AutoLayerManagerSetup%28%29>
<https://crash-stats.mozilla.com/report/list?signature=_moz_cairo_destroy>
[https://crash-stats.mozilla.com/report/list?signature=nsWindow%3A%3AOnPaint%28HDC\_\_\*%2C+unsigned+int%29](https://crash-stats.mozilla.com/report/list?signature=nsWindow%3A%3AOnPaint%28HDC__*%2C+unsigned+int%29)
<https://crash-stats.mozilla.com/report/list?signature=gfxASurface%3A%3ARelease%28%29>
<https://crash-stats.mozilla.com/report/list?signature=gfxContext%3A%3A~gfxContext%28%29>
<https://crash-stats.mozilla.com/report/list?signature=mozilla%3A%3Alayers%3A%3ALayer%3A%3A~Layer%28%29>

|  | [Robert Kaiser](/user_profile?user_id=5189) |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=805745#c5)• 12 years ago |
|  | |

gfxASurface::Release() saw a significant increase on 2012-10-31, we really need to get some traction on those issues.

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=805745#c6)• 12 years ago |
|  | |

gfxASurface::Release() saw a first peak starting Oct 29, then decreased before ramping up again. Two separate bugs? A backout/re-landing? People taking time for Halloween?
gfxASurface::Release() seems to be a consistent READ access violation at 0x15 so looks like a null deref, but it's trying to read member mSurfaceValid which means "this" is null-- how does that happen? Maybe the surface is a member of some other structure and this is a use-after-free of that object? There could well be a security problem lurking here.

|  | [Alex Keybl [:akeybl]](/user_profile?user_id=425645) |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=805745#c7)• 12 years ago |
|  | |

Neil - can we try temporarily backing out [bug 782547](/show_bug.cgi?id=782547 "VERIFIED FIXED - Accessible focus not fired after dismissing OS print dialog") given it's our best guess as to the regressing bug right now?
Also adding roc/vlad as the module owners for Core::Widget, and adding qawanted/needURLs to see if we're able to repro internally.Assignee: nobody → enndeakin
[tracking-firefox19](/buglist.cgi?f1=cf_tracking_firefox19&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox19&o1=equals&v1=%3F) → [+](/buglist.cgi?f1=cf_tracking_firefox19&o1=equals&v1=%2B)Keywords: [needURLs](/buglist.cgi?keywords=needURLs&resolution=---),
[qawanted](/buglist.cgi?keywords=qawanted&resolution=---)

|  | [Neil Deakin](/user_profile?user_id=6102) |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=805745#c8)• 12 years ago |
|  | |

The patch in [bug 782547](/show_bug.cgi?id=782547 "VERIFIED FIXED - Accessible focus not fired after dismissing OS print dialog") was only in from around Oct 24 and was backed out on Oct 27.

|  | [Marcia Knous [:marcia]](/user_profile?user_id=8519) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=805745#a1178566_8519)• 12 years ago |

Keywords: [needURLs](/buglist.cgi?keywords=needURLs&resolution=---)QA Contact: mozillamarcia.knous

|  | [Scoobidiver (away)](/user_profile?user_id=386758)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=805745#a1469638_386758)• 12 years ago |

Crash Signature: [@ mozilla::layers::ImageContainer::Release()]
[@ nsBaseWidget::AutoLayerManagerSetup::~AutoLayerManagerSetup()]
[@ nsWindow::OnPaint(HDC\_\_\* → [@ mozilla::layers::ImageContainer::Release()]
[@ nsBaseWidget::AutoLayerManagerSetup::~AutoLayerManagerSetup()]
[@ @0x0 | nsBaseWidget::AutoLayerManagerSetup::~AutoLayerManagerSetup()]
[@ nsWindow::OnPaint(HDC\_\_\*

|  | [Scoobidiver (away)](/user_profile?user_id=386758)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=805745#a1488352_386758)• 12 years ago |

Crash Signature: [@ mozilla::layers::ImageContainer::Release()]
[@ nsBaseWidget::AutoLayerManagerSetup::~AutoLayerManagerSetup()]
[@ @0x0 | nsBaseWidget::AutoLayerManagerSetup::~AutoLayerManagerSetup()]
[@ nsWindow::OnPaint(HDC\_\_\* → [@ mozilla::layers::ImageContainer::Release()]
[@ nsBaseWidget::AutoLayerManagerSetup::~AutoLayerManagerSetup()]
[@ @0x0 | nsBaseWidget::AutoLayerManagerSetup::~AutoLayerManagerSetup() ]
[@ nsWindow::OnPaint(HDC\_\_\*

|  | [Neil Deakin](/user_profile?user_id=6102) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=805745#a1511500_6102)• 12 years ago |

Assignee: enndeakin → nobody

|  | [Scoobidiver (away)](/user_profile?user_id=386758)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=805745#a1954699_386758)• 12 years ago |

Crash Signature: unsigned int)]
[@ gfxContext::~gfxContext()]
[@ \_moz\_cairo\_destroy]
[@ gfxASurface::Release()]
[@ mozilla::layers::Layer::~Layer()] → unsigned int)]
[@ gfxContext::~gfxContext()]
[@ \_moz\_cairo\_destroy]
[@ gfxASurface::Release()]
[@ mozilla::layers::Layer::~Layer()]
[@ nsTArray<mozilla::css::ComputedTimingFunction\*, nsTArrayInfallibleAllocator>::Clear() | nsTArray<void\* nsTArrayInfa…

|  | [Leman Bennett [Omega]](/user_profile?user_id=240182) |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=805745#c10)• 12 years ago |
|  | |

I ran into this crash using Ubisoft's Shop order form. It practically stops you from buying anything from the store using Firefox due to the crash. It happens as soon as you click on a drop down to input data. Confirmed on both Nightly and Fx17.

|  | [Scoobidiver (away)](/user_profile?user_id=386758)  Reporter |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=805745#c11)• 12 years ago |
|  | |

(In reply to Leman Bennett (Omega X) from [comment #10](/show_bug.cgi?id=805745#c10 "VERIFIED FIXED - crash in nsWindow::OnPaint"))
> Confirmed on both Nightly and Fx17.
So it's not this bug because 17.0 and 18.0 are unaffected.
What are your crash IDs?

|  | [Leman Bennett [Omega]](/user_profile?user_id=240182) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=805745#c12)• 12 years ago |
|  | |

<https://crash-stats.mozilla.com/report/index/bp-cbd938cf-9aa5-445c-8a39-d80e82121127>
<https://crash-stats.mozilla.com/report/index/bp-30420c7e-4fe8-4394-9e9f-c518f2121127>
<https://crash-stats.mozilla.com/report/index/bp-c121ca79-daa6-4217-bf48-13b592121127>
Despite the difference in signature, all crashes were the exact same way. Select the dropdown, then crash.

|  | [Scoobidiver (away)](/user_profile?user_id=386758)  Reporter |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=805745#c13)• 12 years ago |
|  | |

(In reply to Leman Bennett (Omega X) from [comment #12](/show_bug.cgi?id=805745#c12 "VERIFIED FIXED - crash in nsWindow::OnPaint"))
> <https://crash-stats.mozilla.com/report/index/bp-cbd938cf-9aa5-445c-8a39>-
> d80e82121127
> <https://crash-stats.mozilla.com/report/index/bp-30420c7e-4fe8-4394-9e9f>-
> c518f2121127
> <https://crash-stats.mozilla.com/report/index/bp-c121ca79-daa6-4217-bf48>-
> 13b592121127
It's [bug 716844](/show_bug.cgi?id=716844 "NEW - Crash @ nsWindow::OnPaint") and [bug 793983](/show_bug.cgi?id=793983 "VERIFIED FIXED - Firefox 17 crash in nsWindow::OnPaint") (likely a dupe of [bug 716844](/show_bug.cgi?id=716844 "NEW - Crash @ nsWindow::OnPaint")), not this bug.

|  | [Leman Bennett [Omega]](/user_profile?user_id=240182) |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=805745#c14)• 12 years ago |
|  | |

I doubt that this is a 10 month old crash. Maybe 793983.

|  | [u279076](/user_profile?user_id=279076) |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=805745#c15)• 12 years ago |
|  | |

Marcia, have you been able to reproduce this crash?

|  | [Milan Sreckovic [:milan] (needinfo for best results)](/user_profile?user_id=456486) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=805745#a2810955_456486)• 12 years ago |

Assignee: nobody → bas

|  | [Bas Schouten (:bas.schouten)](/user_profile?user_id=272464) |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=805745#c16)• 12 years ago |
|  | |

I can reproduce this on Fx17 but -not- on a debug build of nightly. I'll look into this a little more.

|  | [Bas Schouten (:bas.schouten)](/user_profile?user_id=272464) |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=805745#c17)• 12 years ago |
|  | |

I strongly suspect this might be related to [bug 743975](/show_bug.cgi?id=743975 "RESOLVED FIXED - View event handling cleanup")

|  | [u279076](/user_profile?user_id=279076) |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=805745#c18)• 12 years ago |
|  | |

Bas, can you provide more details about how you reproduce this issue?

|  | [Bas Schouten (:bas.schouten)](/user_profile?user_id=272464) |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=805745#c19)• 12 years ago |
|  | |

(In reply to Anthony Hughes, Mozilla QA (:ashughes) from [comment #18](/show_bug.cgi?id=805745#c18 "VERIFIED FIXED - crash in nsWindow::OnPaint"))
> Bas, can you provide more details about how you reproduce this issue?
1. Go to <http://shop.ubi.com/>
2. Select platform 'PC'
3. Pre-order FarCry 3
4. Go to check-out
5. Select one of the drop-down listboxes
This reproduces in Optimized builds -not- in unoptimized builds.

|  | [Bas Schouten (:bas.schouten)](/user_profile?user_id=272464) |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=805745#c20)• 12 years ago |
|  | |

I'm marking this security sensitive. Putting more details in a restricted comment.Group: core-security

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=805745#a2817504_1689)• 12 years ago |

Keywords: [sec-critical](/buglist.cgi?keywords=sec-critical&resolution=---),
[testcase-wanted](/buglist.cgi?keywords=testcase-wanted&resolution=---)
[Comment 21](#c21) is private:
false

|  | [Bas Schouten (:bas.schouten)](/user_profile?user_id=272464) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=805745#a2823059_272464)• 12 years ago |

[status-firefox17](/buglist.cgi?f1=cf_status_firefox17&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox17&o1=equals&v1=affected)

|  | [Bas Schouten (:bas.schouten)](/user_profile?user_id=272464) |  |
| --- | --- | --- |
| [Comment 27](/show_bug.cgi?id=805745#c27)• 12 years ago |
|  | |

The problem has been rootcaused and I've talked to several people about possible ways of fixing it but it's hard.
Re-assigning to Timothy Nikkel as he knows a lot more about this code and is on the review list for one of the possible causes of this issue.Assignee: bas → tnikkel

|  | [Timothy Nikkel (:tnikkel)](/user_profile?user_id=255010)  Assignee |  |
| --- | --- | --- |
| [Comment 28](/show_bug.cgi?id=805745#c28)• 12 years ago |
|  | |

The crash of [comment 19](/show_bug.cgi?id=805745#c19 "VERIFIED FIXED - crash in nsWindow::OnPaint") is almost certainly caused by [bug 782980](/show_bug.cgi?id=782980 "RESOLVED FIXED - Temporary blank boxes on right and bottom while resizing browser window"). It added the ProcessPendingUpdates call in nsViewManager::Refresh which flushes and can therefore destroy anything.Blocks: [782980](/show_bug.cgi?id=782980 "RESOLVED FIXED - Temporary blank boxes on right and bottom while resizing browser window")

|  | [Robert O'Callahan (:roc) (email my personal email if necessary)](/user_profile?user_id=5038) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=805745#a2951014_5038)• 12 years ago |

Blocks: [813024](/show_bug.cgi?id=813024 "RESOLVED FIXED - crash in mozilla::layers::BasicLayerManager::SetDefaultTarget")

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=805745#a2988724_1689)• 12 years ago |

[status-firefox17](/buglist.cgi?f1=cf_status_firefox17&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox17&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_firefox17&o1=equals&v1=wontfix)
[status-firefox18](/buglist.cgi?f1=cf_status_firefox18&o1=isnotempty):
[unaffected](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=unaffected) → [affected](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=affected)
[status-firefox20](/buglist.cgi?f1=cf_status_firefox20&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox20&o1=equals&v1=affected)
[tracking-firefox20](/buglist.cgi?f1=cf_tracking_firefox20&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox20&o1=equals&v1=%2B)

|  | [Robert Kaiser](/user_profile?user_id=5189) |  |
| --- | --- | --- |
| [Comment 29](/show_bug.cgi?id=805745#c29)• 12 years ago |
|  | |

gfxASurface::Release() is the #3 topcrash in 20.0a1 and 19.0a2 - see <https://crash-stats.mozilla.com/report/list?signature=gfxASurface%3A%3ARelease%28%29&version=Firefox%3A19.0a2> - can we please get some progress here? Timothy? Bas?

|  | [u279076](/user_profile?user_id=279076) |  |
| --- | --- | --- |
| [Comment 30](/show_bug.cgi?id=805745#c30)• 12 years ago |
|  | |

(In reply to Bas Schouten (:bas.schouten) from [comment #19](/show_bug.cgi?id=805745#c19 "VERIFIED FIXED - crash in nsWindow::OnPaint"))
> This reproduces in Optimized builds -not- in unoptimized builds.
Is there somewhere I can get optimized builds to try to confirm a regression range? or is qawanted no longer needed on this to get a fix?

|  | [Timothy Nikkel (:tnikkel)](/user_profile?user_id=255010)  Assignee |  |
| --- | --- | --- |
| [Comment 31](/show_bug.cgi?id=805745#c31)• 12 years ago |
|  | |

No, I don't think we need any qa help with this right now.Keywords: [qawanted](/buglist.cgi?keywords=qawanted&resolution=---),
[testcase-wanted](/buglist.cgi?keywords=testcase-wanted&resolution=---)

|  | [Timothy Nikkel (:tnikkel)](/user_profile?user_id=255010)  Assignee |  |
| --- | --- | --- |
| [Comment 32](/show_bug.cgi?id=805745#c32)• 12 years ago |
|  | |

(In reply to Robert Kaiser (:kairo@mozilla.com) from [comment #29](/show_bug.cgi?id=805745#c29 "VERIFIED FIXED - crash in nsWindow::OnPaint"))
> gfxASurface::Release() is the #3 topcrash in 20.0a1 and 19.0a2 - see
> <https://crash-stats.mozilla.com/report/>
> list?signature=gfxASurface%3A%3ARelease%28%29&version=Firefox%3A19.0a2 - can
> we please get some progress here? Timothy? Bas?
I'm looking into this, I just haven't had anything to post yet.

|  | [Scoobidiver (away)](/user_profile?user_id=386758)  Reporter |  |
| --- | --- | --- |
| [Comment 33](/show_bug.cgi?id=805745#c33)• 12 years ago |
|  | |

(In reply to Timothy Nikkel (:tn) from [comment #28](/show_bug.cgi?id=805745#c28 "VERIFIED FIXED - crash in nsWindow::OnPaint"))
> The crash of [comment 19](/show_bug.cgi?id=805745#c19 "VERIFIED FIXED - crash in nsWindow::OnPaint") is almost certainly caused by [bug 782980](/show_bug.cgi?id=782980 "RESOLVED FIXED - Temporary blank boxes on right and bottom while resizing browser window").
It's [bug 793983](/show_bug.cgi?id=793983 "VERIFIED FIXED - Firefox 17 crash in nsWindow::OnPaint").
(In reply to Robert Kaiser (:kairo@mozilla.com) from [comment #29](/show_bug.cgi?id=805745#c29 "VERIFIED FIXED - crash in nsWindow::OnPaint"))
> gfxASurface::Release() is the #3 topcrash in 20.0a1 and 19.0a2
This crash is indeed a regression in 19.0.No longer blocks: [782980](/show_bug.cgi?id=782980 "RESOLVED FIXED - Temporary blank boxes on right and bottom while resizing browser window")
[status-firefox18](/buglist.cgi?f1=cf_status_firefox18&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=affected) → [unaffected](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=unaffected)

|  | [Timothy Nikkel (:tnikkel)](/user_profile?user_id=255010)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=805745#a3674365_255010)• 12 years ago |

Blocks: [782980](/show_bug.cgi?id=782980 "RESOLVED FIXED - Temporary blank boxes on right and bottom while resizing browser window")
[status-firefox18](/buglist.cgi?f1=cf_status_firefox18&o1=isnotempty):
[unaffected](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=unaffected) → [affected](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=affected)

|  | [Scoobidiver (away)](/user_profile?user_id=386758)  Reporter |  |
| --- | --- | --- |
| [Comment 34](/show_bug.cgi?id=805745#c34)• 12 years ago |
|  | |

To clarify the scope of this bug, it occurs on startup and is a regression in 19.0 (first showed up around 19.0a1/20121025). It's #2 top browser crasher in 19.0a2 and #15 in 20.0a1.
Non-startup crashes with some signatures in common with this bug described in [comment 10](/show_bug.cgi?id=805745#c10 "VERIFIED FIXED - crash in nsWindow::OnPaint"), [comment 16](/show_bug.cgi?id=805745#c16 "VERIFIED FIXED - crash in nsWindow::OnPaint"), [comment 19](/show_bug.cgi?id=805745#c19 "VERIFIED FIXED - crash in nsWindow::OnPaint"), and [comment 28](/show_bug.cgi?id=805745#c28 "VERIFIED FIXED - crash in nsWindow::OnPaint") are tracked in [bug 793983](/show_bug.cgi?id=793983 "VERIFIED FIXED - Firefox 17 crash in nsWindow::OnPaint").No longer blocks: [782980](/show_bug.cgi?id=782980 "RESOLVED FIXED - Temporary blank boxes on right and bottom while resizing browser window")
[status-firefox18](/buglist.cgi?f1=cf_status_firefox18&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=affected) → [unaffected](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=unaffected)

|  | [Timothy Nikkel (:tnikkel)](/user_profile?user_id=255010)  Assignee |  |
| --- | --- | --- |
| [Comment 35](/show_bug.cgi?id=805745#c35)• 12 years ago |
|  | |

I disagree, I'm going to track it this way, it'll work out for the best.Blocks: [782980](/show_bug.cgi?id=782980 "RESOLVED FIXED - Temporary blank boxes on right and bottom while resizing browser window")
[status-firefox18](/buglist.cgi?f1=cf_status_firefox18&o1=isnotempty):
[unaffected](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=unaffected) → [affected](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=affected)

|  | [u279076](/user_profile?user_id=279076) |  |
| --- | --- | --- |
| [Comment 36](/show_bug.cgi?id=805745#c36)• 12 years ago |
|  | |

Timothy, Kairo asked that we get some QA on this bug. Is there some help that you need here? If so, ccing Matt Wobensmith to assist. Please advise, thank you.Keywords: [qawanted](/buglist.cgi?keywords=qawanted&resolution=---)QA Contact: mozillamarcia.knous → mwobensmith

|  | [Timothy Nikkel (:tnikkel)](/user_profile?user_id=255010)  Assignee |  |
| --- | --- | --- |
| [Comment 37](/show_bug.cgi?id=805745#c37)• 12 years ago |
|  | |

I don't need any QA help, I'm in the process of writing the patch now.

|  | [u279076](/user_profile?user_id=279076) |  |
| --- | --- | --- |
| [Comment 38](/show_bug.cgi?id=805745#c38)• 12 years ago |
|  | |

(In reply to Timothy Nikkel (:tn) from [comment #37](/show_bug.cgi?id=805745#c37 "VERIFIED FIXED - crash in nsWindow::OnPaint"))
> I don't need any QA help, I'm in the process of writing the patch now.
Okay, thank you Timothy and apologies if this was distracting.
Kairo, I assume this addresses your concerns. QA will be standing by for builds with Timothy's patch to test.Keywords: [qawanted](/buglist.cgi?keywords=qawanted&resolution=---)

|  | [Timothy Nikkel (:tnikkel)](/user_profile?user_id=255010)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=805745#a3931286_255010)• 12 years ago |

Blocks: [793983](/show_bug.cgi?id=793983 "VERIFIED FIXED - Firefox 17 crash in nsWindow::OnPaint")

|  | [Robert Kaiser](/user_profile?user_id=5189) |  |
| --- | --- | --- |
| [Comment 39](/show_bug.cgi?id=805745#c39)• 12 years ago |
|  | |

I don't remember me saying we need QA here, just that we need progress here of some sort - but thanks, Anthony, for trying to get things going.
I'm even more delighted to hear about Timothy's progress, though, I'd surely be happy to get this one off the topcrash list!
That said, from a code POV, if this really affects 18 and is a sec-crit, we should request tracking and later approval for that train.

|  | [Timothy Nikkel (:tnikkel)](/user_profile?user_id=255010)  Assignee |  |
| --- | --- | --- |
| [Comment 40](/show_bug.cgi?id=805745#c40)• 12 years ago |
|  | |

(In reply to Robert Kaiser (:kairo@mozilla.com) from [comment #39](/show_bug.cgi?id=805745#c39 "VERIFIED FIXED - crash in nsWindow::OnPaint"))
> I don't remember me saying we need QA here, just that we need progress here
> of some sort - but thanks, Anthony, for trying to get things going.
> I'm even more delighted to hear about Timothy's progress, though, I'd surely
> be happy to get this one off the topcrash list!
[Bug 782980](/show_bug.cgi?id=782980 "RESOLVED FIXED - Temporary blank boxes on right and bottom while resizing browser window") added a flush to the painting call path, which can destroy almost anything. Previously we would flush before painting on a WillPaint notification so the path should be mostly safe against this. I'm making it completely safe for this, which involves making the widget-backend specific painting code for each backend we have handle this case (destroying of |this|).
> That said, from a code POV, if this really affects 18 and is a sec-crit, we
> should request tracking and later approval for that train.
It would affect anywhere that [bug 782980](/show_bug.cgi?id=782980 "RESOLVED FIXED - Temporary blank boxes on right and bottom while resizing browser window") landed, that bug has milestone 17, so 17, 18, 19, etc should be affected by that logic.

|  | [Robert Kaiser](/user_profile?user_id=5189) |  |
| --- | --- | --- |
| [Comment 41](/show_bug.cgi?id=805745#c41)• 12 years ago |
|  | |

Requesting tracking for 18 based on [comment 40](/show_bug.cgi?id=805745#c40 "VERIFIED FIXED - crash in nsWindow::OnPaint") saying this affects 17 and 18 and that it's marked sec-crit.
None of the crash signatures listed here are in the top 300 browser crashes on 18.0b3, though, while gfxASurface::Release() is still #2 on Aurora 19.
[tracking-firefox18](/buglist.cgi?f1=cf_tracking_firefox18&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox18&o1=equals&v1=%3F)

|  | [Timothy Nikkel (:tnikkel)](/user_profile?user_id=255010)  Assignee |  |
| --- | --- | --- |
| [Comment 42](/show_bug.cgi?id=805745#c42)• 12 years ago |
|  | |

I think the nsView::DidPaintWindow crashes are probably caused by the same thing.

|  | [Alex Keybl [:akeybl]](/user_profile?user_id=425645) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=805745#a3949098_425645)• 12 years ago |

[tracking-firefox18](/buglist.cgi?f1=cf_tracking_firefox18&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox18&o1=equals&v1=%3F) → [+](/buglist.cgi?f1=cf_tracking_firefox18&o1=equals&v1=%2B)

|  | [Timothy Nikkel (:tnikkel)](/user_profile?user_id=255010)  Assignee |  |
| --- | --- | --- |
| [Comment 43](/show_bug.cgi?id=805745#c43)• 12 years ago |
|  | |

Attached patch

[Move the forced repaint from the Paint notification to the WillPaint notification.](attachment.cgi?id=690653&action=diff)
— [Details](attachment.cgi?id=690653&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=805745&attachment=690653)

[Attachment #690653](/attachment.cgi?id=690653&action=edit "Move the forced repaint from the Paint notification to the WillPaint notification.") -
Flags: review?(matt.woodrow)

|  | [Timothy Nikkel (:tnikkel)](/user_profile?user_id=255010)  Assignee |  |
| --- | --- | --- |
| [Comment 44](/show_bug.cgi?id=805745#c44)• 12 years ago |
|  | |

Attached patch

[Re-get the view after calling PaintWindow because it can flush (via WillPaint).](attachment.cgi?id=690654&action=diff)
— [Details](attachment.cgi?id=690654&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=805745&attachment=690654)

[Attachment #690654](/attachment.cgi?id=690654&action=edit "Re-get the view after calling PaintWindow because it can flush (via WillPaint).") -
Flags: review?(matt.woodrow)

|  | [Timothy Nikkel (:tnikkel)](/user_profile?user_id=255010)  Assignee |  |
| --- | --- | --- |
| [Comment 45](/show_bug.cgi?id=805745#c45)• 12 years ago |
|  | |

Attached patch

[WillPaint notification can flush, so re-get the listener after it on GTK2 widget backend.](attachment.cgi?id=690655&action=diff)
— [Details](attachment.cgi?id=690655&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=805745&attachment=690655)

Karl, please double check that I don't miss doing something important in this function by adding an early return false.
[Attachment #690655](/attachment.cgi?id=690655&action=edit "WillPaint notification can flush, so re-get the listener after it on GTK2 widget backend.") -
Flags: review?(karlt)

|  | [Timothy Nikkel (:tnikkel)](/user_profile?user_id=255010)  Assignee |  |
| --- | --- | --- |
| [Comment 46](/show_bug.cgi?id=805745#c46)• 12 years ago |
|  | |

Attached patch

[WillPaint notification can flush, so re-get the listener after it on Windows widget backend.](attachment.cgi?id=690657&action=diff) (obsolete)
— [Details](attachment.cgi?id=690657&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=805745&attachment=690657)

This is early enough in the function that there shouldn't be any state that we need to cleanup by my reading of this function.
[Attachment #690657](/attachment.cgi?id=690657&action=edit "WillPaint notification can flush, so re-get the listener after it on Windows widget backend.") -
Flags: review?(jmathies)

|  | [Timothy Nikkel (:tnikkel)](/user_profile?user_id=255010)  Assignee |  |
| --- | --- | --- |
| [Comment 47](/show_bug.cgi?id=805745#c47)• 12 years ago |
|  | |

Attached patch

[Paint notification can flush (via WillPaint), so re-check if the listener still exists after on puppet widget backend.](attachment.cgi?id=690659&action=diff)
— [Details](attachment.cgi?id=690659&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=805745&attachment=690659)

[Attachment #690659](/attachment.cgi?id=690659&action=edit "Paint notification can flush (via WillPaint), so re-check if the listener still exists after on puppet widget backend.") -
Flags: review?(jones.chris.g)

|  | [Timothy Nikkel (:tnikkel)](/user_profile?user_id=255010)  Assignee |  |
| --- | --- | --- |
| [Comment 48](/show_bug.cgi?id=805745#c48)• 12 years ago |
|  | |

I checked that the major widget backends hold a reference to the widget during a paint event so we don't have to worry about it going away, just Destroy etc being called on it.

|  | [Matt Woodrow (:mattwoodrow)](/user_profile?user_id=380838) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=805745#a3955130_380838)• 12 years ago |

[Attachment #690653](/attachment.cgi?id=690653&action=edit "Move the forced repaint from the Paint notification to the WillPaint notification.") -
Flags: review?(matt.woodrow) → review+

|  | [Matt Woodrow (:mattwoodrow)](/user_profile?user_id=380838) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=805745#a3955152_380838)• 12 years ago |

[Attachment #690654](/attachment.cgi?id=690654&action=edit "Re-get the view after calling PaintWindow because it can flush (via WillPaint).") -
Flags: review?(matt.woodrow) → review+

|  | [Karl Tomlinson (:karlt)](/user_profile?user_id=274246) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=805745#a3958463_274246)• 12 years ago |

[Attachment #690655](/attachment.cgi?id=690655&action=edit "WillPaint notification can flush, so re-get the listener after it on GTK2 widget backend.") -
Flags: review?(karlt) → review+

|  | [Chris Jones [:cjones] inactive; ni?/f?/r? if you need me](/user_profile?user_id=336288) |  |
| --- | --- | --- |
| [Comment 49](/show_bug.cgi?id=805745#c49)• 12 years ago |
|  | |

Comment on [attachment 690659](/attachment.cgi?id=690659 "Paint notification can flush (via WillPaint), so re-check if the listener still exists after on puppet widget backend.") [[details]](/attachment.cgi?id=690659&action=edit "Paint notification can flush (via WillPaint), so re-check if the listener still exists after on puppet widget backend.") [[diff]](/attachment.cgi?id=690659&action=diff "Paint notification can flush (via WillPaint), so re-check if the listener still exists after on puppet widget backend.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=805745&attachment=690659)
Paint notification can flush (via WillPaint), so re-check if the listener still exists after on puppet widget backend.
Nit, { }.
[Attachment #690659](/attachment.cgi?id=690659&action=edit "Paint notification can flush (via WillPaint), so re-check if the listener still exists after on puppet widget backend.") -
Flags: review?(jones.chris.g) → review+

|  | [Jim Mathies [:jimm]](/user_profile?user_id=279663) |  |
| --- | --- | --- |
| [Comment 50](/show_bug.cgi?id=805745#c50)• 12 years ago |
|  | |

Comment on [attachment 690657](/attachment.cgi?id=690657 "WillPaint notification can flush, so re-get the listener after it on Windows widget backend.") [[details]](/attachment.cgi?id=690657&action=edit "WillPaint notification can flush, so re-get the listener after it on Windows widget backend.") [[diff]](/attachment.cgi?id=690657&action=diff "WillPaint notification can flush, so re-get the listener after it on Windows widget backend.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=805745&attachment=690657)
WillPaint notification can flush, so re-get the listener after it on Windows widget backend.
How about PaintWindow and DidPaintWindow? Do we need the same refresh there?
This seems a little brittle. Could listener come from a helper that always gets the current value from mAttachedWidgetListener or mWidgetListener and checks mDestroyCalled and then returns a result callers can check?
[Attachment #690657](/attachment.cgi?id=690657&action=edit "WillPaint notification can flush, so re-get the listener after it on Windows widget backend.") -
Flags: review?(jmathies) → review+

|  | [Jim Mathies [:jimm]](/user_profile?user_id=279663) |  |
| --- | --- | --- |
| [Comment 51](/show_bug.cgi?id=805745#c51)• 12 years ago |
|  | |

Attached patch

[winrt widget patch](attachment.cgi?id=690817&action=diff)
— [Details](attachment.cgi?id=690817&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=805745&attachment=690817)

[Attachment #690817](/attachment.cgi?id=690817&action=edit "winrt widget patch") -
Flags: review?(tnikkel)

|  | [Timothy Nikkel (:tnikkel)](/user_profile?user_id=255010)  Assignee |  |
| --- | --- | --- |
| [Comment 52](/show_bug.cgi?id=805745#c52)• 12 years ago |
|  | |

(In reply to Jim Mathies [:jimm] from [comment #50](/show_bug.cgi?id=805745#c50 "VERIFIED FIXED - crash in nsWindow::OnPaint"))
> How about PaintWindow and DidPaintWindow? Do we need the same refresh there?
Only WillPaintWindow should be allowed to flush.
> This seems a little brittle. Could listener come from a helper that always
> gets the current value from mAttachedWidgetListener or mWidgetListener and
> checks mDestroyCalled and then returns a result callers can check?
I can do that.

|  | [Timothy Nikkel (:tnikkel)](/user_profile?user_id=255010)  Assignee |  |
| --- | --- | --- |
| [Comment 53](/show_bug.cgi?id=805745#c53)• 12 years ago |
|  | |

Comment on [attachment 690817](/attachment.cgi?id=690817 "winrt widget patch") [[details]](/attachment.cgi?id=690817&action=edit "winrt widget patch") [[diff]](/attachment.cgi?id=690817&action=diff "winrt widget patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=805745&attachment=690817)
winrt widget patch
This looks fine, although I don't think you need to re-get the listener after PaintWindow. Add a comment why you are re-getting the listener after WillPaintWindow though?
Does the winrt code hold a reference to |this| during a call to MetroWidget::Paint? Because I think it should if it doesn't.
[Attachment #690817](/attachment.cgi?id=690817&action=edit "winrt widget patch") -
Flags: review?(tnikkel) → review+

|  | [Timothy Nikkel (:tnikkel)](/user_profile?user_id=255010)  Assignee |  |
| --- | --- | --- |
| [Comment 54](/show_bug.cgi?id=805745#c54)• 12 years ago |
|  | |

Attached patch

[WillPaint notification can flush, so re-get the listener after it on Windows widget backend.](attachment.cgi?id=690867&action=diff)
— [Details](attachment.cgi?id=690867&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=805745&attachment=690867)

[Attachment #690657](/attachment.cgi?id=690657&action=edit "WillPaint notification can flush, so re-get the listener after it on Windows widget backend.") -
Attachment is obsolete: true
[Attachment #690867](/attachment.cgi?id=690867&action=edit "WillPaint notification can flush, so re-get the listener after it on Windows widget backend.") -
Flags: review+

|  | [Timothy Nikkel (:tnikkel)](/user_profile?user_id=255010)  Assignee |  |
| --- | --- | --- |
| [Comment 55](/show_bug.cgi?id=805745#c55)• 12 years ago |
|  | |

Comment on [attachment 690653](/attachment.cgi?id=690653 "Move the forced repaint from the Paint notification to the WillPaint notification.") [[details]](/attachment.cgi?id=690653&action=edit "Move the forced repaint from the Paint notification to the WillPaint notification.") [[diff]](/attachment.cgi?id=690653&action=diff "Move the forced repaint from the Paint notification to the WillPaint notification.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=805745&attachment=690653)
Move the forced repaint from the Paint notification to the WillPaint notification.
I'm using this secapproval request for all patches in this bug.
[Security approval request comment]
How easily can the security issue be deduced from the patch?
The patches point out where destruction of objects can happen where we use them afterwards, but they don't obviously provide a way to hit that case. However there are STR posted in the open [bug 793983](/show_bug.cgi?id=793983 "VERIFIED FIXED - Firefox 17 crash in nsWindow::OnPaint"). The check-in comments pretty much restate what is already added by in-code comments in the patches.
Do comments in the patch, the check-in comment, or tests included in the patch paint a bulls-eye on the security problem?
Same answer as above.
Which older supported branches are affected by this flaw?
version 17 and after
If not all supported branches, which bug introduced the flaw?
[bug 782980](/show_bug.cgi?id=782980 "RESOLVED FIXED - Temporary blank boxes on right and bottom while resizing browser window")
Do you have backports for the affected branches? If not, how different, hard to create, and risky will they be?
if the patches don't apply as is, backports should be straight forward.
How likely is this patch to cause regressions; how much testing does it need?
It should only be handling cases where we would crash before, so relatively safe.
[Attachment #690653](/attachment.cgi?id=690653&action=edit "Move the forced repaint from the Paint notification to the WillPaint notification.") -
Flags: sec-approval?

|  | [Jim Mathies [:jimm]](/user_profile?user_id=279663) |  |
| --- | --- | --- |
| [Comment 56](/show_bug.cgi?id=805745#c56)• 12 years ago |
|  | |

(In reply to Timothy Nikkel (:tn) from [comment #53](/show_bug.cgi?id=805745#c53 "VERIFIED FIXED - crash in nsWindow::OnPaint"))
> Comment on [attachment 690817](/attachment.cgi?id=690817 "winrt widget patch") [[details]](/attachment.cgi?id=690817&action=edit "winrt widget patch") [[diff]](/attachment.cgi?id=690817&action=diff "winrt widget patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=805745&attachment=690817)
> winrt widget patch
>
> This looks fine, although I don't think you need to re-get the listener
> after PaintWindow. Add a comment why you are re-getting the listener after
> WillPaintWindow though?
>
> Does the winrt code hold a reference to |this| during a call to
> MetroWidget::Paint? Because I think it should if it doesn't.
Yes there are a few since there is only one main widget.

|  | [Timothy Nikkel (:tnikkel)](/user_profile?user_id=255010)  Assignee |  |
| --- | --- | --- |
| [Comment 57](/show_bug.cgi?id=805745#c57)• 12 years ago |
|  | |

<https://tbpl.mozilla.org/?tree=Try&rev=2dc6ec396b9f>

|  | [Alex Keybl [:akeybl]](/user_profile?user_id=425645) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=805745#a4111101_425645)• 12 years ago |

[status-firefox-esr10](/buglist.cgi?f1=cf_status_esr10&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_esr10&o1=equals&v1=unaffected)
[status-firefox-esr17](/buglist.cgi?f1=cf_status_firefox_esr17&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=affected)
[tracking-firefox-esr17](/buglist.cgi?f1=cf_tracking_firefox_esr17&o1=isnotempty):
--- → [18+](/buglist.cgi?f1=cf_tracking_firefox_esr17&o1=equals&v1=18%2B)

|  | [Alex Keybl [:akeybl]](/user_profile?user_id=425645) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=805745#a4111116_425645)• 12 years ago |

[Attachment #690653](/attachment.cgi?id=690653&action=edit "Move the forced repaint from the Paint notification to the WillPaint notification.") -
Flags: sec-approval? → sec-approval+

|  | [Alex Keybl [:akeybl]](/user_profile?user_id=425645) |  |
| --- | --- | --- |
| [Comment 58](/show_bug.cgi?id=805745#c58)• 12 years ago |
|  | |

Please also prepare/nominate patches for branches.

|  | [Timothy Nikkel (:tnikkel)](/user_profile?user_id=255010)  Assignee |  |
| --- | --- | --- |
| [Comment 59](/show_bug.cgi?id=805745#c59)• 12 years ago |
|  | |

<https://hg.mozilla.org/integration/mozilla-inbound/rev/9f6c579151c5>
<https://hg.mozilla.org/integration/mozilla-inbound/rev/789e54325d76>
<https://hg.mozilla.org/integration/mozilla-inbound/rev/9aae7b226f3d>
<https://hg.mozilla.org/integration/mozilla-inbound/rev/65d0aedb6ac4>
<https://hg.mozilla.org/integration/mozilla-inbound/rev/956f6e2b4b70>Status: NEW → RESOLVEDClosed: 12 years agoResolution: --- → FIXEDTarget Milestone: --- → mozilla20

|  | [Timothy Nikkel (:tnikkel)](/user_profile?user_id=255010)  Assignee |  |
| --- | --- | --- |
| [Comment 60](/show_bug.cgi?id=805745#c60)• 12 years ago |
|  | |

Not fixed until merged to m-c.Status: RESOLVED → REOPENEDResolution: FIXED → ---

|  | [Timothy Nikkel (:tnikkel)](/user_profile?user_id=255010)  Assignee |  |
| --- | --- | --- |
| [Comment 61](/show_bug.cgi?id=805745#c61)• 12 years ago |
|  | |

Jim, I'll leave landing the winrt patch to you as that code isn't merged to m-c/inbound yet.

|  | [Bas Schouten (:bas.schouten)](/user_profile?user_id=272464) |  |
| --- | --- | --- |
| [Comment 62](/show_bug.cgi?id=805745#c62)• 12 years ago |
|  | |

Is there anything we can do here to detect if something here goes wrong again? As far as I can tell this is still a pretty fragile balance, I'm worried we'll regress something like this again if we don't pay close attention.

|  | [Ed Morley [:emorley]](/user_profile?user_id=373476) |  |
| --- | --- | --- |
| [Comment 63](/show_bug.cgi?id=805745#c63)• 12 years ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/9f6c579151c5>
<https://hg.mozilla.org/mozilla-central/rev/789e54325d76>
<https://hg.mozilla.org/mozilla-central/rev/9aae7b226f3d>
<https://hg.mozilla.org/mozilla-central/rev/65d0aedb6ac4>
<https://hg.mozilla.org/mozilla-central/rev/956f6e2b4b70>Status: REOPENED → RESOLVEDClosed: 12 years ago → 12 years ago
[status-firefox20](/buglist.cgi?f1=cf_status_firefox20&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox20&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox20&o1=equals&v1=fixed)Resolution: --- → FIXED

|  | [Timothy Nikkel (:tnikkel)](/user_profile?user_id=255010)  Assignee |  |
| --- | --- | --- |
| [Comment 64](/show_bug.cgi?id=805745#c64)• 12 years ago |
|  | |

Maybe we can add a test based on [comment 19](/show_bug.cgi?id=805745#c19 "VERIFIED FIXED - crash in nsWindow::OnPaint").

|  | [Scoobidiver (away)](/user_profile?user_id=386758)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=805745#a4327625_386758)• 12 years ago |

No longer blocks: [813024](/show_bug.cgi?id=813024 "RESOLVED FIXED - crash in mozilla::layers::BasicLayerManager::SetDefaultTarget")Depends on: [813024](/show_bug.cgi?id=813024 "RESOLVED FIXED - crash in mozilla::layers::BasicLayerManager::SetDefaultTarget")

|  | [Scoobidiver (away)](/user_profile?user_id=386758)  Reporter |  |
| --- | --- | --- |
| [Comment 65](/show_bug.cgi?id=805745#c65)• 12 years ago |
|  | |

64-bit crashes are not fixed: <https://crash-stats.mozilla.com/report/list?signature=%400x0+|+nsBaseWidget%3A%3AAutoLayerManagerSetup%3A%3A~AutoLayerManagerSetup%28%29>

|  | [Timothy Nikkel (:tnikkel)](/user_profile?user_id=255010)  Assignee |  |
| --- | --- | --- |
| [Comment 66](/show_bug.cgi?id=805745#c66)• 12 years ago |
|  | |

Backed out "Move the forced repaint from the Paint notification to the WillPaint notification." because it made [bug 813024](/show_bug.cgi?id=813024 "RESOLVED FIXED - crash in mozilla::layers::BasicLayerManager::SetDefaultTarget") much worse
<https://hg.mozilla.org/integration/mozilla-inbound/rev/62a769a3ae0e>

|  | [Timothy Nikkel (:tnikkel)](/user_profile?user_id=255010)  Assignee |  |
| --- | --- | --- |
| [Comment 67](/show_bug.cgi?id=805745#c67)• 12 years ago |
|  | |

Relanded because I landed a fix for [bug 813024](/show_bug.cgi?id=813024 "RESOLVED FIXED - crash in mozilla::layers::BasicLayerManager::SetDefaultTarget").
<https://hg.mozilla.org/integration/mozilla-inbound/rev/a268b5d3166d>

|  | [Timothy Nikkel (:tnikkel)](/user_profile?user_id=255010)  Assignee |  |
| --- | --- | --- |
| [Comment 68](/show_bug.cgi?id=805745#c68)• 12 years ago |
|  | |

We can open a new bug to deal with the crashes that remain, because we've clearly fixed some of the crashes.

|  | [Ed Morley [:emorley]](/user_profile?user_id=373476) |  |
| --- | --- | --- |
| [Comment 69](/show_bug.cgi?id=805745#c69)• 12 years ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/a268b5d3166d>

|  | [bhavana bajaj [:bajaj]](/user_profile?user_id=448925) |  |
| --- | --- | --- |
| [Comment 70](/show_bug.cgi?id=805745#c70)• 12 years ago |
|  | |

(In reply to Timothy Nikkel (:tn) from [comment #67](/show_bug.cgi?id=805745#c67 "VERIFIED FIXED - crash in nsWindow::OnPaint"))
> Relanded because I landed a fix for [bug 813024](/show_bug.cgi?id=813024 "RESOLVED FIXED - crash in mozilla::layers::BasicLayerManager::SetDefaultTarget").
> <https://hg.mozilla.org/integration/mozilla-inbound/rev/a268b5d3166d>
This seems to have fixed top-crasher,[Bug 793983](/show_bug.cgi?id=793983 "VERIFIED FIXED - Firefox 17 crash in nsWindow::OnPaint").Can we have [comment# 64](/show_bug.cgi?id=805745#c64 "VERIFIED FIXED - crash in nsWindow::OnPaint") addressed and a patch uplifted for branches if it is low risk & well tested before tomorrow(beta 5 going to build) ?

|  | [Timothy Nikkel (:tnikkel)](/user_profile?user_id=255010)  Assignee |  |
| --- | --- | --- |
| [Comment 71](/show_bug.cgi?id=805745#c71)• 12 years ago |
|  | |

(In reply to bhavana bajaj [:bajaj] from [comment #70](/show_bug.cgi?id=805745#c70 "VERIFIED FIXED - crash in nsWindow::OnPaint"))
> (In reply to Timothy Nikkel (:tn) from [comment #67](/show_bug.cgi?id=805745#c67 "VERIFIED FIXED - crash in nsWindow::OnPaint"))
> > Relanded because I landed a fix for [bug 813024](/show_bug.cgi?id=813024 "RESOLVED FIXED - crash in mozilla::layers::BasicLayerManager::SetDefaultTarget").
> > <https://hg.mozilla.org/integration/mozilla-inbound/rev/a268b5d3166d>
>
> This seems to have fixed top-crasher,[Bug 793983](/show_bug.cgi?id=793983 "VERIFIED FIXED - Firefox 17 crash in nsWindow::OnPaint").Can we have [comment# 64](/show_bug.cgi?id=805745#c64 "VERIFIED FIXED - crash in nsWindow::OnPaint")
> addressed and a patch uplifted for branches if it is low risk & well tested
> before tomorrow(beta 5 going to build) ?
I'm not sure it will be well tested by tomorrow. The initial landing here made [bug 813024](/show_bug.cgi?id=813024 "RESOLVED FIXED - crash in mozilla::layers::BasicLayerManager::SetDefaultTarget") worse, and the fix for [bug 813024](/show_bug.cgi?id=813024 "RESOLVED FIXED - crash in mozilla::layers::BasicLayerManager::SetDefaultTarget") won't be in a nightly until tomorrow, we'd need to land [bug 813024](/show_bug.cgi?id=813024 "RESOLVED FIXED - crash in mozilla::layers::BasicLayerManager::SetDefaultTarget") as well as this bug on branches.

|  | [Timothy Nikkel (:tnikkel)](/user_profile?user_id=255010)  Assignee |  |
| --- | --- | --- |
| [Comment 72](/show_bug.cgi?id=805745#c72)• 12 years ago |
|  | |

Comment on [attachment 690653](/attachment.cgi?id=690653 "Move the forced repaint from the Paint notification to the WillPaint notification.") [[details]](/attachment.cgi?id=690653&action=edit "Move the forced repaint from the Paint notification to the WillPaint notification.") [[diff]](/attachment.cgi?id=690653&action=diff "Move the forced repaint from the Paint notification to the WillPaint notification.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=805745&attachment=690653)
Move the forced repaint from the Paint notification to the WillPaint notification.
This is a request for all the patches.
[Approval Request Comment]
Bug caused by (feature/regressing bug #): [bug 782980](/show_bug.cgi?id=782980 "RESOLVED FIXED - Temporary blank boxes on right and bottom while resizing browser window")
User impact if declined: reproducible crashes
Testing completed (on m-c, etc.): been on nightly
Risk to taking this patch (and alternatives if risky): should just fix crashes, no real alternatives
String or UUID changes made by this patch: none
[Attachment #690653](/attachment.cgi?id=690653&action=edit "Move the forced repaint from the Paint notification to the WillPaint notification.") -
Flags: approval-mozilla-beta?
[Attachment #690653](/attachment.cgi?id=690653&action=edit "Move the forced repaint from the Paint notification to the WillPaint notification.") -
Flags: approval-mozilla-aurora?

|  | [bhavana bajaj [:bajaj]](/user_profile?user_id=448925) |  |
| --- | --- | --- |
| [Comment 73](/show_bug.cgi?id=805745#c73)• 12 years ago |
|  | |

Comment on [attachment 690653](/attachment.cgi?id=690653 "Move the forced repaint from the Paint notification to the WillPaint notification.") [[details]](/attachment.cgi?id=690653&action=edit "Move the forced repaint from the Paint notification to the WillPaint notification.") [[diff]](/attachment.cgi?id=690653&action=diff "Move the forced repaint from the Paint notification to the WillPaint notification.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=805745&attachment=690653)
Move the forced repaint from the Paint notification to the WillPaint notification.
A relatively safe patch fixing a lot of crashes.Approving on branches.
[Attachment #690653](/attachment.cgi?id=690653&action=edit "Move the forced repaint from the Paint notification to the WillPaint notification.") -
Flags: approval-mozilla-beta?
[Attachment #690653](/attachment.cgi?id=690653&action=edit "Move the forced repaint from the Paint notification to the WillPaint notification.") -
Flags: approval-mozilla-beta+
[Attachment #690653](/attachment.cgi?id=690653&action=edit "Move the forced repaint from the Paint notification to the WillPaint notification.") -
Flags: approval-mozilla-aurora?
[Attachment #690653](/attachment.cgi?id=690653&action=edit "Move the forced repaint from the Paint notification to the WillPaint notification.") -
Flags: approval-mozilla-aurora+

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=805745#a4628207_132034)• 12 years ago |

Keywords: [checkin-needed](/buglist.cgi?keywords=checkin-needed&resolution=---)

|  | [Timothy Nikkel (:tnikkel)](/user_profile?user_id=255010)  Assignee |  |
| --- | --- | --- |
| [Comment 74](/show_bug.cgi?id=805745#c74)• 12 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-beta/rev/254fe89b5c61>
<https://hg.mozilla.org/releases/mozilla-beta/rev/1a013ff8e15f>
<https://hg.mozilla.org/releases/mozilla-beta/rev/b0d963f152be>
<https://hg.mozilla.org/releases/mozilla-beta/rev/af287e869ef5>
"Re-get the view after calling PaintWindow because it can flush (via WillPaint)." didn't need to be landed on beta as the problematic code doesn't exist there.
[status-firefox18](/buglist.cgi?f1=cf_status_firefox18&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=fixed)

|  | [Timothy Nikkel (:tnikkel)](/user_profile?user_id=255010)  Assignee |  |
| --- | --- | --- |
| [Comment 75](/show_bug.cgi?id=805745#c75)• 12 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-aurora/rev/6268ef939d15>
<https://hg.mozilla.org/releases/mozilla-aurora/rev/c987ef477b34>
<https://hg.mozilla.org/releases/mozilla-aurora/rev/572fcc921c2e>
<https://hg.mozilla.org/releases/mozilla-aurora/rev/eedd02509207>
<https://hg.mozilla.org/releases/mozilla-aurora/rev/a87c44ff3252>
[status-firefox19](/buglist.cgi?f1=cf_status_firefox19&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=fixed)Keywords: [checkin-needed](/buglist.cgi?keywords=checkin-needed&resolution=---)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 76](/show_bug.cgi?id=805745#c76)• 12 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-b2g18/rev/af287e869ef5>
<https://hg.mozilla.org/releases/mozilla-b2g18/rev/b0d963f152be>
<https://hg.mozilla.org/releases/mozilla-b2g18/rev/1a013ff8e15f>
<https://hg.mozilla.org/releases/mozilla-b2g18/rev/254fe89b5c61>
[status-b2g18](/buglist.cgi?f1=cf_status_b2g18&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=fixed)

|  | [u279076](/user_profile?user_id=279076) |  |
| --- | --- | --- |
| [Comment 77](/show_bug.cgi?id=805745#c77)• 12 years ago |
|  | |

Considering this was only reproducible in optimized builds, would it be possible to get optimized builds generated for each of the branches where this is fixed for verification?

|  | [Timothy Nikkel (:tnikkel)](/user_profile?user_id=255010)  Assignee |  |
| --- | --- | --- |
| [Comment 78](/show_bug.cgi?id=805745#c78)• 12 years ago |
|  | |

Optimized builds are what we ship to users, so they should be easily available.

|  | [u279076](/user_profile?user_id=279076) |  |
| --- | --- | --- |
| [Comment 79](/show_bug.cgi?id=805745#c79)• 12 years ago |
|  | |

(In reply to Timothy Nikkel (:tn) from [comment #78](/show_bug.cgi?id=805745#c78 "VERIFIED FIXED - crash in nsWindow::OnPaint"))
> Optimized builds are what we ship to users, so they should be easily
> available.
Okay, thanks. I'll make an attempt at reproducing and verifying this fixed after my meetings today.

|  | [u279076](/user_profile?user_id=279076) |  |
| --- | --- | --- |
| [Comment 80](/show_bug.cgi?id=805745#c80)• 12 years ago |
|  | |

Crash reproduced using a slight revision of the steps in [comment 19](/show_bug.cgi?id=805745#c19 "VERIFIED FIXED - crash in nsWindow::OnPaint") (Farcry 3 is no longer preorder):
1. Load <http://shop.ubi.com>
2. Select "Far Cry" from "Our Brands" menu
3. Select "Add to Cart" from "Far Cry 3"
4. Select "Add to Cart" from "PC Download"
5. Select "Checkout"
6. Click the down arrow on one of the dropdown boxes for the "Billing Information"
> Crash after a couple second hang
Reproduced in 2012-11-27 Firefox Nightly. Will now try to verify fixed.

|  | [u279076](/user_profile?user_id=279076) |  |
| --- | --- | --- |
| [Comment 81](/show_bug.cgi?id=805745#c81)• 12 years ago |
|  | |

Verified fixed in:
\* Firefox 20.0a1 2012-12-19
\* Firefox 19.0a2 2012-12-19
\* Firefox 18.0b5 build 1Status: RESOLVED → VERIFIED
[status-firefox18](/buglist.cgi?f1=cf_status_firefox18&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=verified)
[status-firefox19](/buglist.cgi?f1=cf_status_firefox19&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=verified)
[status-firefox20](/buglist.cgi?f1=cf_status_firefox20&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox20&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox20&o1=equals&v1=verified)

|  | [u279076](/user_profile?user_id=279076) |  |
| --- | --- | --- |
| [Comment 82](/show_bug.cgi?id=805745#c82)• 12 years ago |
|  | |

I'm wondering if it would be useful to come up with a minimized testcase so we can get this checked into the testsuite. If so, I can get someone in QA to assist with that.

|  | [Timothy Nikkel (:tnikkel)](/user_profile?user_id=255010)  Assignee |  |
| --- | --- | --- |
| [Comment 83](/show_bug.cgi?id=805745#c83)• 12 years ago |
|  | |

I'm not sure if this is sufficient to generate a crash but the important pieces of the ubi testcase where a select that has a onfocus handler that caused a frame reconstruct, so for example changing the CSS display of the select between block and inline would do it.

|  | [u279076](/user_profile?user_id=279076) |  |
| --- | --- | --- |
| [Comment 84](/show_bug.cgi?id=805745#c84)• 12 years ago |
|  | |

(In reply to Timothy Nikkel (:tn) from [comment #83](/show_bug.cgi?id=805745#c83 "VERIFIED FIXED - crash in nsWindow::OnPaint"))
> I'm not sure if this is sufficient to generate a crash but the important
> pieces of the ubi testcase where a select that has a onfocus handler that
> caused a frame reconstruct, so for example changing the CSS display of the
> select between block and inline would do it.
What would you need to have an in-testsuite testcase? Isolate the HTML/CSS/JS into a mochitest?

|  | [Timothy Nikkel (:tnikkel)](/user_profile?user_id=255010)  Assignee |  |
| --- | --- | --- |
| [Comment 85](/show_bug.cgi?id=805745#c85)• 12 years ago |
|  | |

I would just construct a page meeting the description of [comment 83](/show_bug.cgi?id=805745#c83 "VERIFIED FIXED - crash in nsWindow::OnPaint") and see if it reproduces the problem. If not I would try reducing the ubi testcase. And then turn that into an automated test by putting it into mochitest format and automating the clicking to cause the crash.

|  | [u279076](/user_profile?user_id=279076) |  |
| --- | --- | --- |
| [Comment 86](/show_bug.cgi?id=805745#c86)• 12 years ago |
|  | |

(In reply to Timothy Nikkel (:tn) from [comment #85](/show_bug.cgi?id=805745#c85 "VERIFIED FIXED - crash in nsWindow::OnPaint"))
> I would just construct a page meeting the description of [comment 83](/show_bug.cgi?id=805745#c83 "VERIFIED FIXED - crash in nsWindow::OnPaint") and see
> if it reproduces the problem. If not I would try reducing the ubi testcase.
> And then turn that into an automated test by putting it into mochitest
> format and automating the clicking to cause the crash.
Okay, thank you Timothy. I'm ccing Kamil on this bug to fulfill that request. Kamil is one of our trusted community security testers.
Kamil, as a first step, can you try to mock up and attach a minimized HTML test based on [comment 83](/show_bug.cgi?id=805745#c83 "VERIFIED FIXED - crash in nsWindow::OnPaint") which reproduces this crash. If unsuccessful, try creating a minimized HTML test for the shop.ubi.com test outlined in [comment 81](/show_bug.cgi?id=805745#c81 "VERIFIED FIXED - crash in nsWindow::OnPaint"). Thanks

|  | [Scoobidiver (away)](/user_profile?user_id=386758)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=805745#a4772406_386758)• 12 years ago |

Blocks: [822999](/show_bug.cgi?id=822999 "RESOLVED WORKSFORME - startup crash in nsWindow::OnPaint")

|  | [Timothy Nikkel (:tnikkel)](/user_profile?user_id=255010)  Assignee |  |
| --- | --- | --- |
| [Comment 87](/show_bug.cgi?id=805745#c87)• 12 years ago |
|  | |

Comment on [attachment 690653](/attachment.cgi?id=690653 "Move the forced repaint from the Paint notification to the WillPaint notification.") [[details]](/attachment.cgi?id=690653&action=edit "Move the forced repaint from the Paint notification to the WillPaint notification.") [[diff]](/attachment.cgi?id=690653&action=diff "Move the forced repaint from the Paint notification to the WillPaint notification.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=805745&attachment=690653)
Move the forced repaint from the Paint notification to the WillPaint notification.
[Approval Request Comment]
If this is not a sec:{high,crit} bug, please state case for ESR consideration: it's listed as sec-crit
User impact if declined: some amount of crashes
Fix Landed on Version: 18, 19, 20
Risk to taking this patch (and alternatives if risky): not very risky
String or UUID changes made by this patch: none
See <https://wiki.mozilla.org/Release_Management/ESR_Landing_Process> for more info.
[Attachment #690653](/attachment.cgi?id=690653&action=edit "Move the forced repaint from the Paint notification to the WillPaint notification.") -
Flags: approval-mozilla-esr17?

|  | [Kamil Jozwiak [:kjozwiak]](/user_profile?user_id=455785) |  |
| --- | --- | --- |
| [Comment 88](/show_bug.cgi?id=805745#c88)• 12 years ago |
|  | |

(In reply to Anthony Hughes, Mozilla QA (:ashughes) from [comment #86](/show_bug.cgi?id=805745#c86 "VERIFIED FIXED - crash in nsWindow::OnPaint"))
> Kamil, as a first step, can you try to mock up and attach a minimized HTML
> test based on [comment 83](/show_bug.cgi?id=805745#c83 "VERIFIED FIXED - crash in nsWindow::OnPaint") which reproduces this crash.
Yup will do!

|  | [Alex Keybl [:akeybl]](/user_profile?user_id=425645) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=805745#a4905605_425645)• 12 years ago |

[Attachment #690653](/attachment.cgi?id=690653&action=edit "Move the forced repaint from the Paint notification to the WillPaint notification.") -
Flags: approval-mozilla-esr17? → approval-mozilla-esr17+

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=805745#a4923886_132034)• 12 years ago |

Keywords: [checkin-needed](/buglist.cgi?keywords=checkin-needed&resolution=---)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 89](/show_bug.cgi?id=805745#c89)• 12 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-esr17/rev/d3f6ea42bf2b>
<https://hg.mozilla.org/releases/mozilla-esr17/rev/835cfd3111b6>
<https://hg.mozilla.org/releases/mozilla-esr17/rev/4fa6d2e7f89d>
<https://hg.mozilla.org/releases/mozilla-esr17/rev/02abf9bf846b>
(I went with the same set of patches that landed on beta)
[status-firefox-esr17](/buglist.cgi?f1=cf_status_firefox_esr17&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=fixed)Keywords: [checkin-needed](/buglist.cgi?keywords=checkin-needed&resolution=---)

|  | [Kamil Jozwiak [:kjozwiak]](/user_profile?user_id=455785) |  |
| --- | --- | --- |
| [Comment 90](/show_bug.cgi?id=805745#c90)• 12 years ago |
|  | |

Attached file
[Reproduce Crash using Ubi Case](attachment.cgi?id=696660)
— [Details](attachment.cgi?id=696660&action=edit)

Went through the Ubi case that was mentioned above and narrowed it down to a single drop down. Reproduced the problem several times using the following build:
<http://ftp.mozilla.org/pub/mozilla.org/firefox/nightly/2012/11/2012-11-27-04-20-13-mozilla-aurora/firefox-19.0a2.en-US.win32.installer.exe>

|  | [u279076](/user_profile?user_id=279076) |  |
| --- | --- | --- |
| [Comment 91](/show_bug.cgi?id=805745#c91)• 12 years ago |
|  | |

Thanks for the minimized test, Kamil.
Timothy or Ryan, is the attached testcase enough to generate an in-testsuite test for this bug? If so, can one of you mentor Kamil in writing a patch?Flags: in-testsuite?Keywords: [testcase](/buglist.cgi?keywords=testcase&resolution=---)

|  | [Timothy Nikkel (:tnikkel)](/user_profile?user_id=255010)  Assignee |  |
| --- | --- | --- |
| [Comment 92](/show_bug.cgi?id=805745#c92)• 12 years ago |
|  | |

It looks good, but hopefully we can get rid jquery from the testcase, it's a lot of extra stuff we don't need. I hope that if we just rewrite the bit of inline javascript at the bottom to work without jquery that will be enough.

|  | [u279076](/user_profile?user_id=279076) |  |
| --- | --- | --- |
| [Comment 93](/show_bug.cgi?id=805745#c93)• 12 years ago |
|  | |

(In reply to Timothy Nikkel (:tn) from [comment #92](/show_bug.cgi?id=805745#c92 "VERIFIED FIXED - crash in nsWindow::OnPaint"))
> It looks good, but hopefully we can get rid jquery from the testcase, it's a
> lot of extra stuff we don't need. I hope that if we just rewrite the bit of
> inline javascript at the bottom to work without jquery that will be enough.
Kamil, can you take a crack at this?

|  | [Kamil Jozwiak [:kjozwiak]](/user_profile?user_id=455785) |  |
| --- | --- | --- |
| [Comment 94](/show_bug.cgi?id=805745#c94)• 12 years ago |
|  | |

(In reply to Anthony Hughes, Mozilla QA (:ashughes) from [comment #93](/show_bug.cgi?id=805745#c93 "VERIFIED FIXED - crash in nsWindow::OnPaint"))
> (In reply to Timothy Nikkel (:tn) from [comment #92](/show_bug.cgi?id=805745#c92 "VERIFIED FIXED - crash in nsWindow::OnPaint"))
> > It looks good, but hopefully we can get rid jquery from the testcase, it's a
> > lot of extra stuff we don't need. I hope that if we just rewrite the bit of
> > inline javascript at the bottom to work without jquery that will be enough.
>
> Kamil, can you take a crack at this?
Yup, I will try removing the jquery. I took a look at it but it was hard to go through as there's a lot. Will try narrowing it down without the jquery.

|  | [Kamil Jozwiak [:kjozwiak]](/user_profile?user_id=455785) |  |
| --- | --- | --- |
| [Comment 95](/show_bug.cgi?id=805745#c95)• 12 years ago |
|  | |

Attached file
[reduced test case without jquery](attachment.cgi?id=697326)
— [Details](attachment.cgi?id=697326&action=edit)

Went through the test case and completely removed jquery leaving only plain javascript. The file has been reduced to 432 bytes from 57,997 bytes.
The crash happens when the style is set to focus and the iframe having a height of 1.
Let me know if this works!

|  | [Timothy Nikkel (:tnikkel)](/user_profile?user_id=255010)  Assignee |  |
| --- | --- | --- |
| [Comment 96](/show_bug.cgi?id=805745#c96)• 12 years ago |
|  | |

That looks great, thanks!
Do you want someone to help you turning it into a mochitest or do you want someone else to do that part?

|  | [Kamil Jozwiak [:kjozwiak]](/user_profile?user_id=455785) |  |
| --- | --- | --- |
| [Comment 97](/show_bug.cgi?id=805745#c97)• 12 years ago |
|  | |

(In reply to Timothy Nikkel (:tn) from [comment #96](/show_bug.cgi?id=805745#c96 "VERIFIED FIXED - crash in nsWindow::OnPaint"))
> That looks great, thanks!
>
> Do you want someone to help you turning it into a mochitest or do you want
> someone else to do that part?
I am up for it! Might take a little longer then usual as I've never built the code but I am definitely up for it. I'll read up on the MDN docs and get back to you if I have trouble.

|  | [Timothy Nikkel (:tnikkel)](/user_profile?user_id=255010)  Assignee |  |
| --- | --- | --- |
| [Comment 98](/show_bug.cgi?id=805745#c98)• 12 years ago |
|  | |

Sure. It might help to look at an example. Here is a relatively simple mochitest that you can use as a template <http://mxr.mozilla.org/mozilla-central/source/content/events/test/test_bug447736.html?force=1>
To send a mouse event to open the dropdown you could use the synthesizeMouse function from EventUtils.js. There are numerous examples in the tree of it being used.

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=805745#a6004367_280903)• 12 years ago |

Whiteboard: [startupcrash] → [startupcrash][adv-main18+][adv-esr17+]

|  | [Kamil Jozwiak [:kjozwiak]](/user_profile?user_id=455785) |  |
| --- | --- | --- |
| [Comment 99](/show_bug.cgi?id=805745#c99)• 12 years ago |
|  | |

Attached patch

[mochitest](attachment.cgi?id=706939&action=diff)
— [Details](attachment.cgi?id=706939&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=805745&attachment=706939)

I created a test that does the same as the simplified test case.
It synthesizes mouse events to the drop down so that it expands.
This makes the focus event fire and the style is changed which usually causes a crash.
I checked out the code for an old aurora build so I could see if the manual test crashes.
But I was having trouble reproducing the crash even with that older checked out code, when it is run from the objdir.
But when I install it, it reproduces fine.
When I run the newly created automated test, even know it does the same as what I do manually, it doesn't crash.
So I'm not sure if you want to:
1) Add the test because maybe it would crash on the test servers if this bug still existed
2) Make a suggestion on how I can reproduce it with the test.
or 3) Not take this patch since I can't get it to crash.
If you do want to go ahead with the patch, please let me know if you'd like me to post this in a new bug instead since this bug is already resolved.
[Attachment #706939](/attachment.cgi?id=706939&action=edit "mochitest") -
Flags: review?(tnikkel)

|  | [Timothy Nikkel (:tnikkel)](/user_profile?user_id=255010)  Assignee |  |
| --- | --- | --- |
| [Comment 100](/show_bug.cgi?id=805745#c100)• 12 years ago |
|  | |

Comment on [attachment 706939](/attachment.cgi?id=706939 "mochitest") [[details]](/attachment.cgi?id=706939&action=edit "mochitest") [[diff]](/attachment.cgi?id=706939&action=diff "mochitest") [[review]](/page.cgi?id=splinter.html&ignore=&bug=805745&attachment=706939)
mochitest
This looks good, thank you!
We should just check that it does fail in an unpatched build. I can do that.

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=805745#a16135694_1689)• 12 years ago |

Group: core-security
You need to [log in](/show_bug.cgi?id=805745&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Timothy Nikkel (:tnikkel)](/user_profile?user_id=255010)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from bugzilla.mozilla.org_e0c3c2eb_20250125_034844.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/814407)
* [XML](/show_bug.cgi?ctype=xml&id=814407)

Closed
[Bug 814407](/show_bug.cgi?id=814407)

Opened 12 years ago
Closed 12 years ago

# Use after free in Mesa 8.0 after calling texImage2D on texture already attached to FBO in texture-attachment-formats.html test

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

Use after free in Mesa 8.0 after calling texImage2D on texture already attached to FBO in texture-attachment-formats.html test

## Categories

### (Core :: Graphics, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=Graphics#Graphics)

Graphics
▾

Core :: Graphics
Mapping of cross platform rendering interfaces to various 2D graphics APIs
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=Graphics&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=Graphics&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=Graphics)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

x86

Linux

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

critical

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla20

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Performance Impact | --- |
| --- | --- |
| Webcompat Priority | --- |
| Webcompat Score | --- |
| Accessibility Severity | --- |
| a11y-review | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox17 | --- | [affected](/buglist.cgi?f1=cf_status_firefox17&o1=equals&v1=affected) |
| firefox18 | [+](/buglist.cgi?f1=cf_tracking_firefox18&o1=equals&v1=%2B) | [verified](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=verified) |
| firefox19 | [+](/buglist.cgi?f1=cf_tracking_firefox19&o1=equals&v1=%2B) | [verified](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=verified) |
| firefox20 | [+](/buglist.cgi?f1=cf_tracking_firefox20&o1=equals&v1=%2B) | [verified](/buglist.cgi?f1=cf_status_firefox20&o1=equals&v1=verified) |
| firefox-esr10 | --- | [unaffected](/buglist.cgi?f1=cf_status_esr10&o1=equals&v1=unaffected) |
| firefox-esr17 | [18+](/buglist.cgi?f1=cf_tracking_firefox_esr17&o1=equals&v1=18%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=fixed) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox17 |  | affected |
| firefox18 | + | verified |
| firefox19 | + | verified |
| firefox20 | + | verified |
| firefox-esr10 |  | unaffected |
| firefox-esr17 | 18+ | fixed |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: wgianopoulos, Assigned: bjacob)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/8f64ddf291d83cdc891c05ee5d5cc5dc?d=mm&size=40)  [bjacob](/user_profile?user_id=382769)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/aabcc5d8e79670ebda1e9004891220e2?d=mm&size=40)  [wgianopoulos](/user_profile?user_id=104622)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/17436ade8da1b23d42b3df05b9c4fc77?d=mm&size=40)  [bhood](/user_profile?user_id=697075)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

13 people

## References

### ( [URL](https://www.khronos.org/registry/webgl/sdk/tests/conformance/textures/texture-attachment-formats.html "https://www.khronos.org/registry/webgl/sdk/tests/conformance/textures/texture-attachment-formats.html") )

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

[880734](/show_bug.cgi?id=880734 "VERIFIED FIXED - New Google Maps does not show/update the map when being loaded or dragged around")

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[978422](/show_bug.cgi?id=978422 "RESOLVED FIXED - ReattachTextureToAnyFramebufferToWorkAroundBugs no longer needed")

Dependency [tree](/showdependencytree.cgi?id=814407&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=814407)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[khronos.org/registry/webgl/sdk/tests/...](https://www.khronos.org/registry/webgl/sdk/tests/conformance/textures/texture-attachment-formats.html "https://www.khronos.org/registry/webgl/sdk/tests/conformance/textures/texture-attachment-formats.html")

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Keywords: sec-critical, Whiteboard: [adv-main18+][adv-esr17+][qa-])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[sec-critical](/buglist.cgi?keywords=sec-critical&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[adv-main18+][adv-esr17+][qa-]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | in-testsuite |  |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (2 files)

| [check for null buffer data in readpixels (should never happen, but apparently does)](/attachment.cgi?id=684430)  [12 years ago](#c9)  [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)   1.90 KB, patch | jgilbert : [review+](#c10 "12 years ago") | [Details](/attachment.cgi?id=684430&action=edit) | [Diff](/attachment.cgi?id=684430&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=814407&attachment=684430) |
| --- | --- | --- |
| [reattach textures when a texture image is replaced](/attachment.cgi?id=684785)  [12 years ago](#c29)  [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)   5.60 KB, patch | jgilbert : [review+](#c38 "12 years ago")  akeybl : [approval-mozilla-aurora+](#a1555771_425645 "12 years ago")  akeybl : [approval-mozilla-beta+](#a1555771_425645 "12 years ago")  akeybl : [approval-mozilla-esr17+](#a1555771_425645 "12 years ago")  abillings : [sec-approval+](#c40 "12 years ago") | [Details](/attachment.cgi?id=684785&action=edit) | [Diff](/attachment.cgi?id=684785&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=814407&attachment=684785) |

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Bill Gianopoulos [:WG9s]](/user_profile?user_id=104622)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=814407#c0)• 12 years ago |
|  | |

The WebGL conformance test now fails under fedora 18 with the latest xorg drivers and trunk Firefox on both NVDIA and AMD/ATI graphics.
I have this issue on 4 different systems crash reports and graphics info in follow-on comments.

|  | [Bill Gianopoulos [:WG9s]](/user_profile?user_id=104622)  Reporter |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=814407#c1)• 12 years ago |
|  | |

[bp-0bd24467-e147-4238-9e3a-366762121122](https://crash-stats.mozilla.org/report/index/0bd24467-e147-4238-9e3a-366762121122)
about:support graphics section is:
Adapter DescriptionX.Org -- Gallium 0.4 on AMD RS780
Device IDGallium 0.4 on AMD RS780
Driver Version2.1 Mesa 8.0.4GPU
Accelerated Windows1/1
OpenGLVendor IDX.OrgWebGL
RendererX.Org -- Gallium 0.4 on AMD RS780
AzureCanvasBackend cairo
AzureContentBackend none
AzureFallbackCanvasBackend none

|  | [Bill Gianopoulos [:WG9s]](/user_profile?user_id=104622)  Reporter |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=814407#c2)• 12 years ago |
|  | |

[bp-cdf263d1-9fa8-47cd-a17e-b25802121122](https://crash-stats.mozilla.org/report/index/cdf263d1-9fa8-47cd-a17e-b25802121122)
about:support graphics section is:
Adapter Descriptionnouveau -- Gallium 0.4 on NVC1
Device IDGallium 0.4 on NVC1
Driver Version2.1 Mesa 8.0.4
GPU Accelerated Windows1/1
OpenGLVendor ID nouveau
WebGL Renderer nouveau -- Gallium 0.4 on NVC1
AzureCanvasBackend cairo
AzureContentBackend none
AzureFallbackCanvasBackend none

|  | [Bill Gianopoulos [:WG9s]](/user_profile?user_id=104622)  Reporter |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=814407#c3)• 12 years ago |
|  | |

[bp-f3e08f2a-42ad-4622-8cfb-5c0572121122](https://crash-stats.mozilla.org/report/index/f3e08f2a-42ad-4622-8cfb-5c0572121122)
about:support graphics section is:
Adapter Description X.Org R300 Project -- Gallium 0.4 on ATI RV410
Device ID Gallium 0.4 on ATI RV410
Driver Version 2.1 Mesa 8.0.4
GPU Accelerated Windows 0/3
Basic Vendor ID X.Org R300 Project
WebGL Renderer X.Org R300 Project -- Gallium 0.4 on ATI RV410
AzureCanvasBackend cairo
AzureContentBackend none
AzureFallbackCanvasBackend none

|  | [Bill Gianopoulos [:WG9s]](/user_profile?user_id=104622)  Reporter |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=814407#c4)• 12 years ago |
|  | |

[bp-c2b57357-0706-4162-ba9c-0df4c2121122](https://crash-stats.mozilla.org/report/index/c2b57357-0706-4162-ba9c-0df4c2121122)
about:support graphics section is:
Adapter Description X.Org -- Gallium 0.4 on AMD SUMO
Device ID Gallium 0.4 on AMD SUMO
Driver Version 2.1 Mesa 8.0.4
GPU Accelerated Windows 0/1 Basic Blocked for your graphics card because of unresolved driver issues.
Vendor ID X.Org
WebGL Renderer X.Org -- Gallium 0.4 on AMD SUMO
AzureCanvasBackend cairo
AzureContentBackend none
AzureFallbackCanvasBackend none

|  | [Bill Gianopoulos [:WG9s]](/user_profile?user_id=104622)  Reporter |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=814407#c5)• 12 years ago |
|  | |

With the same hardware, the test completes without crashing under Windows 7.

|  | [Bill Gianopoulos [:WG9s]](/user_profile?user_id=104622)  Reporter |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=814407#c6)• 12 years ago |
|  | |

Oh and BTW I said this before. but having a way to copy paste in a bug readable form jsut the graphics section of about:support in the clipboard so that is can be pasted into a bug sould be jsue do much more helpful.

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=814407#c7)• 12 years ago |
|  | |

This page is the test runner, that runs hundreds of conformance tests. As a starting point it would be very useful to know which one crashes.

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=814407#c8)• 12 years ago |
|  | |

(In reply to Bill Gianopoulos [:WG9s] from [comment #1](/show_bug.cgi?id=814407#c1 "RESOLVED FIXED - Use after free in Mesa 8.0 after calling texImage2D on texture already attached to FBO in texture-attachment-formats.html test"))
> [bp-0bd24467-e147-4238-9e3a-366762121122](https://crash-stats.mozilla.org/report/index/0bd24467-e147-4238-9e3a-366762121122)
segfault at code-segment-looking address deep in radeon driver. The stack looks smashed.
(In reply to Bill Gianopoulos [:WG9s] from [comment #2](/show_bug.cgi?id=814407#c2 "RESOLVED FIXED - Use after free in Mesa 8.0 after calling texImage2D on texture already attached to FBO in texture-attachment-formats.html test"))
> [bp-cdf263d1-9fa8-47cd-a17e-b25802121122](https://crash-stats.mozilla.org/report/index/cdf263d1-9fa8-47cd-a17e-b25802121122)
null deref in readpixels. Looks like a legitimate bug in our code: in WebGLContext::Readpixels() we apparently should check that data!=null.
(In reply to Bill Gianopoulos [:WG9s] from [comment #3](/show_bug.cgi?id=814407#c3 "RESOLVED FIXED - Use after free in Mesa 8.0 after calling texImage2D on texture already attached to FBO in texture-attachment-formats.html test"))
> [bp-f3e08f2a-42ad-4622-8cfb-5c0572121122](https://crash-stats.mozilla.org/report/index/f3e08f2a-42ad-4622-8cfb-5c0572121122)
same as [comment #1](/show_bug.cgi?id=814407#c1 "RESOLVED FIXED - Use after free in Mesa 8.0 after calling texImage2D on texture already attached to FBO in texture-attachment-formats.html test")
(In reply to Bill Gianopoulos [:WG9s] from [comment #4](/show_bug.cgi?id=814407#c4 "RESOLVED FIXED - Use after free in Mesa 8.0 after calling texImage2D on texture already attached to FBO in texture-attachment-formats.html test"))
> [bp-c2b57357-0706-4162-ba9c-0df4c2121122](https://crash-stats.mozilla.org/report/index/c2b57357-0706-4162-ba9c-0df4c2121122)
same as [comment #1](/show_bug.cgi?id=814407#c1 "RESOLVED FIXED - Use after free in Mesa 8.0 after calling texImage2D on texture already attached to FBO in texture-attachment-formats.html test")

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=814407#c9)• 12 years ago |
|  | |

Attached patch

[check for null buffer data in readpixels (should never happen, but apparently does)](attachment.cgi?id=684430&action=diff)
— [Details](attachment.cgi?id=684430&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=814407&attachment=684430)

[Attachment #684430](/attachment.cgi?id=684430&action=edit "check for null buffer data in readpixels (should never happen, but apparently does)") -
Flags: review?(jgilbert)

|  | [Kelsey Gilbert [:jgilbert]](/user_profile?user_id=419431) |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=814407#c10)• 12 years ago |
|  | |

Comment on [attachment 684430](/attachment.cgi?id=684430 "check for null buffer data in readpixels (should never happen, but apparently does)") [[details]](/attachment.cgi?id=684430&action=edit "check for null buffer data in readpixels (should never happen, but apparently does)") [[diff]](/attachment.cgi?id=684430&action=diff "check for null buffer data in readpixels (should never happen, but apparently does)") [[review]](/page.cgi?id=splinter.html&ignore=&bug=814407&attachment=684430)
check for null buffer data in readpixels (should never happen, but apparently does)
Review of [attachment 684430](/attachment.cgi?id=684430 "check for null buffer data in readpixels (should never happen, but apparently does)") [[details]](/attachment.cgi?id=684430&action=edit "check for null buffer data in readpixels (should never happen, but apparently does)") [[diff]](/attachment.cgi?id=684430&action=diff "check for null buffer data in readpixels (should never happen, but apparently does)") [[review]](/page.cgi?id=splinter.html&ignore=&bug=814407&attachment=684430):
-----------------------------------------------------------------
Bizarre.
[Attachment #684430](/attachment.cgi?id=684430&action=edit "check for null buffer data in readpixels (should never happen, but apparently does)") -
Flags: review?(jgilbert) → review+

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=814407#c11)• 12 years ago |
|  | |

<http://hg.mozilla.org/integration/mozilla-inbound/rev/f9a5cb869c1e>
Let's actually close this bug; please open a separate bug for the radeon failures; it would greatly help if you could identify the precise crashing test page as said in [comment 7](/show_bug.cgi?id=814407#c7 "RESOLVED FIXED - Use after free in Mesa 8.0 after calling texImage2D on texture already attached to FBO in texture-attachment-formats.html test").Assignee: nobody → bjacobTarget Milestone: --- → mozilla20

|  | [Bill Gianopoulos [:WG9s]](/user_profile?user_id=104622)  Reporter |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=814407#c12)• 12 years ago |
|  | |

(In reply to Benoit Jacob [:bjacob] from [comment #11](/show_bug.cgi?id=814407#c11 "RESOLVED FIXED - Use after free in Mesa 8.0 after calling texImage2D on texture already attached to FBO in texture-attachment-formats.html test"))
> <http://hg.mozilla.org/integration/mozilla-inbound/rev/f9a5cb869c1e>
>
> Let's actually close this bug; please open a separate bug for the radeon
> failures; it would greatly help if you could identify the precise crashing
> test page as said in [comment 7](/show_bug.cgi?id=814407#c7 "RESOLVED FIXED - Use after free in Mesa 8.0 after calling texImage2D on texture already attached to FBO in texture-attachment-formats.html test").
Well you know we are supposed to be running this test on all builds. If we actually ran the latest version instead of some old version there would be no question here. I have no idea why I should have to identify this it clearly fails the WebGL conformance test with a the browser crashes issue. Why is it yup to me to identify the actual reason?

|  | [Bill Gianopoulos [:WG9s]](/user_profile?user_id=104622)  Reporter |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=814407#c13)• 12 years ago |
|  | |

I was going to include this patch in my personal builds that I make universally available at <https://www.wg9s.com/mozilla/firefox/> but because of this odd attitude about this, I an NOT inclined to do so.

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=814407#c14)• 12 years ago |
|  | |

(In reply to Bill Gianopoulos [:WG9s] from [comment #12](/show_bug.cgi?id=814407#c12 "RESOLVED FIXED - Use after free in Mesa 8.0 after calling texImage2D on texture already attached to FBO in texture-attachment-formats.html test"))
> Why is it yup to me to identify the actual reason?
I didn't mean to look like I was assigning work to you. I was simply pointing out what would be the most useful thing to do to get this investigated. Otherwise, hopefully someone else has time to look into this.

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=814407#c15)• 12 years ago |
|  | |

We can certainly keep this bug open to save you the effort of filing another bug for the AMD issue, if you wish.Whiteboard: [leave open]

|  | [Bill Gianopoulos [:WG9s]](/user_profile?user_id=104622)  Reporter |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=814407#c16)• 12 years ago |
|  | |

With the patch here applied, the conformance test still crashes with NVIDIA graphics.

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=814407#c17)• 12 years ago |
|  | |

I'd be interested in a new crash link then.

|  | [Bill Gianopoulos [:WG9s]](/user_profile?user_id=104622)  Reporter |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=814407#c18)• 12 years ago |
|  | |

If I had a way to produce one on a non-official build ...

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=814407#c19)• 12 years ago |
|  | |

I know. Let's wait until it hits Nightly.

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=814407#c20)• 12 years ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/f9a5cb869c1e>

|  | [Bill Gianopoulos [:WG9s]](/user_profile?user_id=104622)  Reporter |  |
| --- | --- | --- |
| [Comment 21](/show_bug.cgi?id=814407#c21)• 12 years ago |
|  | |

(In reply to Benoit Jacob [:bjacob] from [comment #17](/show_bug.cgi?id=814407#c17 "RESOLVED FIXED - Use after free in Mesa 8.0 after calling texImage2D on texture already attached to FBO in texture-attachment-formats.html test"))
> I'd be interested in a new crash link then.
OK I updated the URL link to be the test that actually causes the crash. It is the exact same test that triggers the crash in the AMD/ATI driver, so the root cause of both might be the same.
New link with today;s nightly which includes your previous fix is:
[bp-af7e1011-25c6-47db-b29d-c0e112121123](https://crash-stats.mozilla.org/report/index/af7e1011-25c6-47db-b29d-c0e112121123)URL: [https://www.khronos.org/registry/webg...](https://www.khronos.org/registry/webgl/sdk/tests/webgl-conformance-tests.html) → [https://www.khronos.org/registry/webg...](https://www.khronos.org/registry/webgl/sdk/tests/conformance/textures/texture-attachment-formats.html)

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Comment 22](/show_bug.cgi?id=814407#c22)• 12 years ago |
|  | |

Ah, so the good thing with bugs that reproduce with two different Mesa Gallium drivers, is they tend to also reproduce with llvmpipe, which means I could reproduce.
But I could only reproduce with Mesa 8.0.3, not with Mesa Git, indicating that the bug is already fixed by Mesa devs. Might not be worth reporting.
C++ stack:
(gdb) bt
#0 0x00007fed287f183d in nanosleep () at ../sysdeps/unix/syscall-template.S:82
#1 0x00007fed287f16dc in \_\_sleep (seconds=0) at ../sysdeps/unix/sysv/linux/sleep.c:138
#2 0x00007fed2303f714 in ah\_crap\_handler (signum=11) at /hack/mozilla-inbound/toolkit/xre/nsSigHandlers.cpp:87
#3 0x00007fed230495e0 in nsProfileLock::FatalSignalHandler (signo=11, info=0x7fffb5431ff0, context=0x7fffb5431ec0)
at /hack/mozilla-inbound/obj-firefox-debug/toolkit/profile/nsProfileLock.cpp:190
#4 <signal handler called>
#5 0x00007fed2988208d in \_mesa\_get\_format\_info (format=1515870810) at src/mesa/main/formats.c:1530
#6 0x00007fed2988217e in \_mesa\_get\_format\_bits (format=1515870810, pname=3410) at src/mesa/main/formats.c:1571
#7 0x00007fed29885bfe in renderbuffer\_exists (ctx=0x7fecf8086000, fb=0x7fecf80e5800, format=6144, reading=1 '\001')
at src/mesa/main/framebuffer.c:797
#8 0x00007fed29885d51 in \_mesa\_source\_buffer\_exists (ctx=0x7fecf8086000, format=6144) at src/mesa/main/framebuffer.c:848
#9 0x00007fed298c8273 in \_mesa\_error\_check\_format\_type (ctx=0x7fecf8086000, format=6408, type=5121, drawing=0 '\000')
at src/mesa/main/readpix.c:706
#10 0x00007fed298c878d in \_mesa\_ReadnPixelsARB (x=0, y=0, width=2, height=2, format=6408, type=5121, bufSize=2147483647,
pixels=0x7fed0f4bd450) at src/mesa/main/readpix.c:817
#11 0x00007fed298c8a68 in \_mesa\_ReadPixels (x=0, y=0, width=2, height=2, format=6408, type=5121, pixels=0x7fed0f4bd450)
at src/mesa/main/readpix.c:883
#12 0x00007fed2393653f in mozilla::gl::GLContext::raw\_fReadPixels (this=0x7fecf80e3000, x=0, y=0, width=2, height=2, format=6408,
type=5121, pixels=0x7fed0f4bd450) at ../../../dist/include/GLContext.h:2640
#13 0x00007fed23935275 in mozilla::gl::GLContext::fReadPixels (this=0x7fecf80e3000, x=0, y=0, width=2, height=2, format=6408,
type=5121, pixels=0x7fed0f4bd450) at ../../../dist/include/GLContext.h:1355
#14 0x00007fed23945ec3 in mozilla::WebGLContext::ReadPixels (this=0x7fecfcdcb400, x=0, y=0, width=2, height=2, format=6408, type=5121,
pixels=0x7fffb54328d0, rv=...) at /hack/mozilla-inbound/content/canvas/src/WebGLContextGL.cpp:3253
#15 0x00007fed24a88474 in mozilla::dom::WebGLRenderingContextBinding::readPixels (cx=0x7fed04dcaf00, obj=..., self=0x7fecfcdcb400,
argc=7, vp=0x7fed10dff3c8) at /hack/mozilla-inbound/obj-firefox-debug/dom/bindings/WebGLRenderingContextBinding.cpp:6749
#16 0x00007fed24a906a4 in mozilla::dom::WebGLRenderingContextBinding::genericMethod (cx=0x7fed04dcaf00, argc=7, vp=0x7fed10dff3c8)
at /hack/mozilla-inbound/obj-firefox-debug/dom/bindings/WebGLRenderingContextBinding.cpp:9625
#17 0x00007fed25786356 in js::CallJSNative (cx=0x7fed04dcaf00,
native=0x7fed24a9056b <mozilla::dom::WebGLRenderingContextBinding::genericMethod(JSContext\*, unsigned int, JS::Value\*)>, args=...)
JS stack:
(gdb) call DumpJSStack()
0 anonymous() ["<https://www.khronos.org/registry/webgl/sdk/tests/conformance/resources/webgl-test-utils.js>":694]
this = [object Window]
1 anonymous() ["<https://www.khronos.org/registry/webgl/sdk/tests/conformance/resources/webgl-test-utils.js>":735]
this = [object Window]
2 anonymous() ["<https://www.khronos.org/registry/webgl/sdk/tests/conformance/resources/webgl-test-utils.js>":748]
this = [object Object]
3 testFormat() ["<https://www.khronos.org/registry/webgl/sdk/tests/conformance/textures/texture-attachment-formats.html>":113]
this = [object Window]
4 <TOP LEVEL> ["<https://www.khronos.org/registry/webgl/sdk/tests/conformance/textures/texture-attachment-formats.html>":183]
this = [object Window]

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Comment 23](/show_bug.cgi?id=814407#c23)• 12 years ago |
|  | |

This is a use-after-free inside Mesa. May be security sensitive.
(gdb) frame
#7 0x00007fed29885bfe in renderbuffer\_exists (ctx=0x7fecf8086000, fb=0x7fecf80e5800, format=6144, reading=1 '\001')
at src/mesa/main/framebuffer.c:797
797 ASSERT(\_mesa\_get\_format\_bits(readBuf->Format, GL\_RED\_BITS) > 0 ||
(gdb) p/x \*readBuf
$8 = {Mutex = {\_\_data = {\_\_lock = 0x5a5a5a5a, \_\_count = 0x5a5a5a5a, \_\_owner = 0x5a5a5a5a, \_\_nusers = 0x5a5a5a5a, \_\_kind = 0x5a5a5a5a,
\_\_spins = 0x5a5a5a5a, \_\_list = {\_\_prev = 0x5a5a5a5a5a5a5a5a, \_\_next = 0x5a5a5a5a5a5a5a5a}}, \_\_size = {0x5a <repeats 40 times>},
\_\_align = 0x5a5a5a5a5a5a5a5a}, ClassID = 0x5a5a5a5a, Name = 0x5a5a5a5a, RefCount = 0x5a5a5a5a, Width = 0x5a5a5a5a,
Height = 0x5a5a5a5a, Purgeable = 0x5a, AttachedAnytime = 0x5a, NumSamples = 0x5a, InternalFormat = 0x5a5a5a5a,
\_BaseFormat = 0x5a5a5a5a, Format = 0x5a5a5a5a, Delete = 0x5a5a5a5a5a5a5a5a, AllocStorage = 0x5a5a5a5a5a5a5a5a}Group: core-security

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=814407#a89486_382769)• 12 years ago |

Summary: WebGL conformance test crashes on Linux → Use after free in Mesa 8.0 (fixed in Mesa Git) triggered by glReadPixels in texture-attachment-formats.html test

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Comment 24](/show_bug.cgi?id=814407#c24)• 12 years ago |
|  | |

Adding some dump()'s to the test reveals with framebuffer configuration causes the crash:
format = ALPHA
type = UNSIGNED\_BYTE
channels = -1,-1,-1,3
bits = 0,0,0,8
mustBeFramebufferComplete = false
So this is a crash with framebuffers having only alpha, not actual color (RGB), in their color buffer.

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Comment 25](/show_bug.cgi?id=814407#c25)• 12 years ago |
|  | |

Removing it, we crash subsequently in
format = RGB
type = UNSIGNED\_BYTE
channels = 0,1,2,-1
bits = 8,8,8,0
mustBeFramebufferComplete = false
But we don't crash in
format = RGBA
type = UNSIGNED\_BYTE
channels = 0,1,2,3
bits = 8,8,8,8
mustBeFramebufferComplete = true
Could it be that Mesa 8.0 required the color attachment to be RGBA?

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Comment 26](/show_bug.cgi?id=814407#c26)• 12 years ago |
|  | |

Nope, in fact this has nothing to do with the choice of format: it always crashes on the \_second\_ format test. Which fits well with the fact that it's a use-after-free.

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Comment 27](/show_bug.cgi?id=814407#c27)• 12 years ago |
|  | |

Found a work-around.
The bug happens when a texture is already bound to a framebuffer object, and we re-upload an image to it with texImage2D.
The work-around is to re-attach it to the FBO (framebufferTexture2D) immediately after the texImage2D call.
CC'ing a few Mesa and Chromium people.

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=814407#a90855_382769)• 12 years ago |

Summary: Use after free in Mesa 8.0 (fixed in Mesa Git) triggered by glReadPixels in texture-attachment-formats.html test → Use after free in Mesa 8.0 after calling texImage2D on texture already attached to FBO in texture-attachment-formats.html test

|  | [Bill Gianopoulos [:WG9s]](/user_profile?user_id=104622)  Reporter |  |
| --- | --- | --- |
| [Comment 28](/show_bug.cgi?id=814407#c28)• 12 years ago |
|  | |

I have also verified that using AMD/ATI graphics, the entire suite runs to completion if I disable this one test. Using NVDIA graphics I also have to disable textures/texture-size-limit.html (see [bug 814716](/show_bug.cgi?id=814716 "RESOLVED FIXED - WebGL conformance test locks up GPU under Linux with NVIDIA graphics using nouveau drivers")).

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Comment 29](/show_bug.cgi?id=814407#c29)• 12 years ago |
|  | |

Attached patch

[reattach textures when a texture image is replaced](attachment.cgi?id=684785&action=diff)
— [Details](attachment.cgi?id=684785&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=814407&attachment=684785)

This works around the problem for me here on Mesa 8.0.3 llvmpipe.
\* without patch: crash in mesa as described above
\* with patch: no crash. The test runs to completion with a few test failures.
Try builds:
<https://tbpl.mozilla.org/?tree=Try&rev=fede02ff2e83>
[Attachment #684785](/attachment.cgi?id=684785&action=edit "reattach textures when a texture image is replaced") -
Flags: review?(jgilbert)

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Comment 30](/show_bug.cgi?id=814407#c30)• 12 years ago |
|  | |

My limited understanding is that Use-after-free bugs are sec-critical.Keywords: [sec-critical](/buglist.cgi?keywords=sec-critical&resolution=---)

|  | [Bill Gianopoulos [:WG9s]](/user_profile?user_id=104622)  Reporter |  |
| --- | --- | --- |
| [Comment 31](/show_bug.cgi?id=814407#c31)• 12 years ago |
|  | |

(In reply to Benoit Jacob [:bjacob] from [comment #29](/show_bug.cgi?id=814407#c29 "RESOLVED FIXED - Use after free in Mesa 8.0 after calling texImage2D on texture already attached to FBO in texture-attachment-formats.html test"))
> Created [attachment 684785](/attachment.cgi?id=684785 "reattach textures when a texture image is replaced") [[details]](/attachment.cgi?id=684785&action=edit "reattach textures when a texture image is replaced") [[diff]](/attachment.cgi?id=684785&action=diff "reattach textures when a texture image is replaced") [[review]](/page.cgi?id=splinter.html&ignore=&bug=814407&attachment=684785)
> reattach textures when a texture image is replaced
I have verified that with this patch included, this test runs to completion on both nouveau and the Xorg AMD/ATI driver.

|  | [Christoph Diehl [:posidron]](/user_profile?user_id=368570) |  |
| --- | --- | --- |
| [Comment 32](/show_bug.cgi?id=814407#c32)• 12 years ago |
|  | |

Please use ASan builds to run the conformance test suite!
If this is a use-after-free it is discoverable with an ASan build. GDB will NOT tell you - not without some debugging - that this is a use-after-free bug and such bugs stay then undiscovered.
Instructions: <https://developer.mozilla.org/en-US/docs/Thread_Sanitizer>
If you don't want to compile by yourself, download a build at: <https://people.mozilla.com/~choller/firefox/asan/>

|  | [Christoph Diehl [:posidron]](/user_profile?user_id=368570) |  |
| --- | --- | --- |
| [Comment 33](/show_bug.cgi?id=814407#c33)• 12 years ago |
|  | |

Argh!
Instructions: <https://developer.mozilla.org/en/Building_Firefox_with_Address_Sanitizer>

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Comment 34](/show_bug.cgi?id=814407#c34)• 12 years ago |
|  | |

(In reply to Christoph Diehl [:cdiehl] from [comment #32](/show_bug.cgi?id=814407#c32 "RESOLVED FIXED - Use after free in Mesa 8.0 after calling texImage2D on texture already attached to FBO in texture-attachment-formats.html test"))
> Please use ASan builds to run the conformance test suite!
>
> If this is a use-after-free it is discoverable with an ASan build. GDB will
> NOT tell you - not without some debugging - that this is a use-after-free
> bug and such bugs stay then undiscovered.
In some cases it will strongly suggest so: in [comment 23](/show_bug.cgi?id=814407#c23 "RESOLVED FIXED - Use after free in Mesa 8.0 after calling texImage2D on texture already attached to FBO in texture-attachment-formats.html test") we see that we are crashing as we are dereferencing pointers stored in some structure filled with 0x5a bytes. These 0x5a bytes are how jemalloc marks free'd memory in debug builds.

|  | [Bill Gianopoulos [:WG9s]](/user_profile?user_id=104622)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=814407#a212711_104622)• 12 years ago |

[status-firefox17](/buglist.cgi?f1=cf_status_firefox17&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox17&o1=equals&v1=affected)
[status-firefox18](/buglist.cgi?f1=cf_status_firefox18&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=affected)
[status-firefox19](/buglist.cgi?f1=cf_status_firefox19&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=affected)

|  | [Bill Gianopoulos [:WG9s]](/user_profile?user_id=104622)  Reporter |  |
| --- | --- | --- |
| [Comment 35](/show_bug.cgi?id=814407#c35)• 12 years ago |
|  | |

This issue seems to be prestnt in firefos=x 17 relase version so setting affected flags appropriately.

|  | [Bill Gianopoulos [:WG9s]](/user_profile?user_id=104622)  Reporter |  |
| --- | --- | --- |
| [Comment 36](/show_bug.cgi?id=814407#c36)• 12 years ago |
|  | |

Hmm auto correct strikes again. Trying to say it is present in Firefox 17 release. So, I set affected flags as I thought appropriately.

|  | [Bill Gianopoulos [:WG9s]](/user_profile?user_id=104622)  Reporter |  |
| --- | --- | --- |
| [Comment 37](/show_bug.cgi?id=814407#c37)• 12 years ago |
|  | |

Oh I should mention that my daily builds at <http://www.wg9s.com/mozilla/firefox/> include these patches.

|  | [Kelsey Gilbert [:jgilbert]](/user_profile?user_id=419431) |  |
| --- | --- | --- |
| [Comment 38](/show_bug.cgi?id=814407#c38)• 12 years ago |
|  | |

Comment on [attachment 684785](/attachment.cgi?id=684785 "reattach textures when a texture image is replaced") [[details]](/attachment.cgi?id=684785&action=edit "reattach textures when a texture image is replaced") [[diff]](/attachment.cgi?id=684785&action=diff "reattach textures when a texture image is replaced") [[review]](/page.cgi?id=splinter.html&ignore=&bug=814407&attachment=684785)
reattach textures when a texture image is replaced
Review of [attachment 684785](/attachment.cgi?id=684785 "reattach textures when a texture image is replaced") [[details]](/attachment.cgi?id=684785&action=edit "reattach textures when a texture image is replaced") [[diff]](/attachment.cgi?id=684785&action=diff "reattach textures when a texture image is replaced") [[review]](/page.cgi?id=splinter.html&ignore=&bug=814407&attachment=684785):
-----------------------------------------------------------------
Nit.
::: content/canvas/src/WebGLContextGL.cpp
@@ +5308,5 @@
> + framebuffer = framebuffer->getNext())
> + {
> + if (framebuffer->ColorAttachment().Texture() == tex) {
> + framebuffer->FramebufferTexture2D(
> + LOCAL\_GL\_FRAMEBUFFER, LOCAL\_GL\_COLOR\_ATTACHMENT0,
2-space indents in 4-space land. Should probably stick to at least 4-space even for this line-overflow stuff.
[Attachment #684785](/attachment.cgi?id=684785&action=edit "reattach textures when a texture image is replaced") -
Flags: review?(jgilbert) → review+

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Comment 39](/show_bug.cgi?id=814407#c39)• 12 years ago |
|  | |

Comment on [attachment 684785](/attachment.cgi?id=684785 "reattach textures when a texture image is replaced") [[details]](/attachment.cgi?id=684785&action=edit "reattach textures when a texture image is replaced") [[diff]](/attachment.cgi?id=684785&action=diff "reattach textures when a texture image is replaced") [[review]](/page.cgi?id=splinter.html&ignore=&bug=814407&attachment=684785)
reattach textures when a texture image is replaced
[Security approval request comment]
How easily can the security issue be deduced from the patch?
Quite easily.
Do comments in the patch, the check-in comment, or tests included in the patch paint a bulls-eye on the security problem?
No, but the patch itself is pretty explicit about that.
Which older supported branches are affected by this flaw?
Every version since Firefox 6 enabled WebGL on Mesa.
Do you have backports for the affected branches? If not, how different, hard to create, and risky will they be?
Should be trivial to backport.
How likely is this patch to cause regressions; how much testing does it need?
Not likely to cause a regression. WebGL conformance tests run as part of mochitest-1 should be extensive enough.
[Attachment #684785](/attachment.cgi?id=684785&action=edit "reattach textures when a texture image is replaced") -
Flags: sec-approval?

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 40](/show_bug.cgi?id=814407#c40)• 12 years ago |
|  | |

Comment on [attachment 684785](/attachment.cgi?id=684785 "reattach textures when a texture image is replaced") [[details]](/attachment.cgi?id=684785&action=edit "reattach textures when a texture image is replaced") [[diff]](/attachment.cgi?id=684785&action=diff "reattach textures when a texture image is replaced") [[review]](/page.cgi?id=splinter.html&ignore=&bug=814407&attachment=684785)
reattach textures when a texture image is replaced
Sec-approval+ on or after December 15. Please don't check it in before then and we should have nominated patches for all affected branches.
[Attachment #684785](/attachment.cgi?id=684785&action=edit "reattach textures when a texture image is replaced") -
Flags: sec-approval? → sec-approval+

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=814407#a537413_280903)• 12 years ago |

[status-firefox-esr10](/buglist.cgi?f1=cf_status_esr10&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_esr10&o1=equals&v1=affected)
[status-firefox20](/buglist.cgi?f1=cf_status_firefox20&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox20&o1=equals&v1=affected)
[status-firefox-esr17](/buglist.cgi?f1=cf_status_firefox_esr17&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=affected)
[tracking-firefox-esr10](/buglist.cgi?f1=cf_tracking_esr10&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_esr10&o1=equals&v1=%3F)
[tracking-firefox18](/buglist.cgi?f1=cf_tracking_firefox18&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox18&o1=equals&v1=%3F)
[tracking-firefox19](/buglist.cgi?f1=cf_tracking_firefox19&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox19&o1=equals&v1=%3F)
[tracking-firefox20](/buglist.cgi?f1=cf_tracking_firefox20&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox20&o1=equals&v1=%3F)
[tracking-firefox-esr17](/buglist.cgi?f1=cf_tracking_firefox_esr17&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox_esr17&o1=equals&v1=%3F)

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Comment 41](/show_bug.cgi?id=814407#c41)• 12 years ago |
|  | |

Comment on [attachment 684785](/attachment.cgi?id=684785 "reattach textures when a texture image is replaced") [[details]](/attachment.cgi?id=684785&action=edit "reattach textures when a texture image is replaced") [[diff]](/attachment.cgi?id=684785&action=diff "reattach textures when a texture image is replaced") [[review]](/page.cgi?id=splinter.html&ignore=&bug=814407&attachment=684785)
reattach textures when a texture image is replaced
[Approval Request Comment]
If this is not a sec:{high,crit} bug, please state case for ESR consideration: this is sec:crit
User impact if declined: sec:crit affecting certain linux users
Fix Landed on Version: will land on m-c around Dec 15
Risk to taking this patch (and alternatives if risky): see above sec-approval comment. Low risk.
String or UUID changes made by this patch: none
[Attachment #684785](/attachment.cgi?id=684785&action=edit "reattach textures when a texture image is replaced") -
Flags: approval-mozilla-esr17?
[Attachment #684785](/attachment.cgi?id=684785&action=edit "reattach textures when a texture image is replaced") -
Flags: approval-mozilla-beta?
[Attachment #684785](/attachment.cgi?id=684785&action=edit "reattach textures when a texture image is replaced") -
Flags: approval-mozilla-aurora?

|  | [Alex Keybl [:akeybl]](/user_profile?user_id=425645) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=814407#a538828_425645)• 12 years ago |

[tracking-firefox-esr10](/buglist.cgi?f1=cf_tracking_esr10&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_esr10&o1=equals&v1=%3F) → [18+](/buglist.cgi?f1=cf_tracking_esr10&o1=equals&v1=18%2B)
[tracking-firefox18](/buglist.cgi?f1=cf_tracking_firefox18&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox18&o1=equals&v1=%3F) → [+](/buglist.cgi?f1=cf_tracking_firefox18&o1=equals&v1=%2B)
[tracking-firefox19](/buglist.cgi?f1=cf_tracking_firefox19&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox19&o1=equals&v1=%3F) → [+](/buglist.cgi?f1=cf_tracking_firefox19&o1=equals&v1=%2B)
[tracking-firefox20](/buglist.cgi?f1=cf_tracking_firefox20&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox20&o1=equals&v1=%3F) → [+](/buglist.cgi?f1=cf_tracking_firefox20&o1=equals&v1=%2B)
[tracking-firefox-esr17](/buglist.cgi?f1=cf_tracking_firefox_esr17&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox_esr17&o1=equals&v1=%3F) → [18+](/buglist.cgi?f1=cf_tracking_firefox_esr17&o1=equals&v1=18%2B)Whiteboard: [leave open] → [leave open][embargoed till 12/15]

|  | [Bill Gianopoulos [:WG9s]](/user_profile?user_id=104622)  Reporter |  |
| --- | --- | --- |
| [Comment 42](/show_bug.cgi?id=814407#c42)• 12 years ago |
|  | |

(In reply to Al Billings [:abillings] from [comment #40](/show_bug.cgi?id=814407#c40 "RESOLVED FIXED - Use after free in Mesa 8.0 after calling texImage2D on texture already attached to FBO in texture-attachment-formats.html test"))
> Comment on [attachment 684785](/attachment.cgi?id=684785 "reattach textures when a texture image is replaced") [[details]](/attachment.cgi?id=684785&action=edit "reattach textures when a texture image is replaced") [[diff]](/attachment.cgi?id=684785&action=diff "reattach textures when a texture image is replaced") [[review]](/page.cgi?id=splinter.html&ignore=&bug=814407&attachment=684785)
> reattach textures when a texture image is replaced
>
> Sec-approval+ on or after December 15. Please don't check it in before then
OK. I am therefore beginning tomorrow, no longer including these patches in my builds that I make available for download. I cannot continue to provide builds that include patches that I don't provide and still be consistent with this being open source. If this had been for a shorter term, then that would not have been as much of an issue.

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=814407#a640421_280903)• 12 years ago |

Whiteboard: [leave open][embargoed till 12/15] → [leave open]

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Comment 43](/show_bug.cgi?id=814407#c43)• 12 years ago |
|  | |

Filed Mesa security bug: <https://bugs.freedesktop.org/show_bug.cgi?id=57735>

|  | [Alex Keybl [:akeybl]](/user_profile?user_id=425645) |  |
| --- | --- | --- |
| [Comment 44](/show_bug.cgi?id=814407#c44)• 12 years ago |
|  | |

Correction to earlier comment - we're going to be approving/landing these changes on 12/10 instead of 12/15 to make sure they make it into our fourth beta.

|  | [Alex Keybl [:akeybl]](/user_profile?user_id=425645) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=814407#a1555771_425645)• 12 years ago |

[Attachment #684785](/attachment.cgi?id=684785&action=edit "reattach textures when a texture image is replaced") -
Flags: approval-mozilla-esr17?
[Attachment #684785](/attachment.cgi?id=684785&action=edit "reattach textures when a texture image is replaced") -
Flags: approval-mozilla-esr17+
[Attachment #684785](/attachment.cgi?id=684785&action=edit "reattach textures when a texture image is replaced") -
Flags: approval-mozilla-beta?
[Attachment #684785](/attachment.cgi?id=684785&action=edit "reattach textures when a texture image is replaced") -
Flags: approval-mozilla-beta+
[Attachment #684785](/attachment.cgi?id=684785&action=edit "reattach textures when a texture image is replaced") -
Flags: approval-mozilla-aurora?
[Attachment #684785](/attachment.cgi?id=684785&action=edit "reattach textures when a texture image is replaced") -
Flags: approval-mozilla-aurora+

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Comment 45](/show_bug.cgi?id=814407#c45)• 12 years ago |
|  | |

<http://hg.mozilla.org/integration/mozilla-inbound/rev/8d394324e01c>Whiteboard: [leave open]

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Comment 46](/show_bug.cgi?id=814407#c46)• 12 years ago |
|  | |

<http://hg.mozilla.org/releases/mozilla-beta/rev/ba70d7cad253>
<http://hg.mozilla.org/releases/mozilla-aurora/rev/f537b3b6e9ef>
[status-firefox18](/buglist.cgi?f1=cf_status_firefox18&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=fixed)
[status-firefox19](/buglist.cgi?f1=cf_status_firefox19&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=fixed)
[status-firefox20](/buglist.cgi?f1=cf_status_firefox20&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox20&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox20&o1=equals&v1=fixed)

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Comment 47](/show_bug.cgi?id=814407#c47)• 12 years ago |
|  | |

<http://hg.mozilla.org/releases/mozilla-esr17/rev/37eb9957ebb1>
[status-firefox-esr17](/buglist.cgi?f1=cf_status_firefox_esr17&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=fixed)

|  | [Ed Morley [:emorley]](/user_profile?user_id=373476) |  |
| --- | --- | --- |
| [Comment 48](/show_bug.cgi?id=814407#c48)• 12 years ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/8d394324e01c>Status: NEW → RESOLVEDClosed: 12 years agoResolution: --- → FIXED

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Comment 49](/show_bug.cgi?id=814407#c49)• 12 years ago |
|  | |

ESR10 is unaffected because Mesa is blacklisted there.
[status-firefox-esr10](/buglist.cgi?f1=cf_status_esr10&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_esr10&o1=equals&v1=affected) → [unaffected](/buglist.cgi?f1=cf_status_esr10&o1=equals&v1=unaffected)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=814407#a3575694_280903)• 12 years ago |

Whiteboard: [adv-main18+][adv-esr17+]

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=814407#a3647506_280903)• 12 years ago |

[tracking-firefox-esr10](/buglist.cgi?f1=cf_tracking_esr10&o1=isnotempty):
[18+](/buglist.cgi?f1=cf_tracking_esr10&o1=equals&v1=18%2B) → ---

|  | [u279076](/user_profile?user_id=279076) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=814407#a4171115_279076)• 12 years ago |

Keywords: [verifyme](/buglist.cgi?keywords=verifyme&resolution=---)

|  | [Matt Wobensmith [:mwobensmith][:matt:]](/user_profile?user_id=452604) |  |
| --- | --- | --- |
| [Comment 50](/show_bug.cgi?id=814407#c50)• 12 years ago |
|  | |

Bill, as I wrote in [bug 814716](/show_bug.cgi?id=814716 "RESOLVED FIXED - WebGL conformance test locks up GPU under Linux with NVIDIA graphics using nouveau drivers"), if you have affected configs/drivers, please run the latest trunk/Aurora/beta builds against them to make sure we've addressed the crash(es). Thank you.Keywords: [verifyme](/buglist.cgi?keywords=verifyme&resolution=---)Whiteboard: [adv-main18+][adv-esr17+] → [adv-main18+][adv-esr17+][qa-]

|  | [Bill Gianopoulos [:WG9s]](/user_profile?user_id=104622)  Reporter |  |
| --- | --- | --- |
| [Comment 51](/show_bug.cgi?id=814407#c51)• 12 years ago |
|  | |

I have verified that this issue is resolved in current trunk, aurora and beta builds. HTe actual builds I used to perform the test are:
Mozilla/5.0 (X11; Linux i686 on x86\_64; rv:21.0) Gecko/20130112 Firefox/21.0 ID:20130112030947
Mozilla/5.0 (X11; Linux i686 on x86\_64; rv:20.0) Gecko/20130112 Firefox/20.0 ID:20130112042018
Mozilla/5.0 (X11; Linux i686 on x86\_64; rv:19.0) Gecko/20100101 Firefox/19.0 ID:20130109111322

|  | [Matt Wobensmith [:mwobensmith][:matt:]](/user_profile?user_id=452604) |  |
| --- | --- | --- |
| [Comment 52](/show_bug.cgi?id=814407#c52)• 12 years ago |
|  | |

Great work, Bill. Setting to verified for these three branches. Thank you.
[status-firefox18](/buglist.cgi?f1=cf_status_firefox18&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=verified)
[status-firefox19](/buglist.cgi?f1=cf_status_firefox19&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=verified)
[status-firefox20](/buglist.cgi?f1=cf_status_firefox20&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox20&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox20&o1=equals&v1=verified)

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Comment 53](/show_bug.cgi?id=814407#c53)• 12 years ago |
|  | |

Bill: thanks for verifying; it is intentional that the "correct way" patch wasn't backported: it was not necessary to fix the bug, and we try to only take necessary patches on beta.

|  | [Bill Gianopoulos [:WG9s]](/user_profile?user_id=104622)  Reporter |  |
| --- | --- | --- |
| [Comment 54](/show_bug.cgi?id=814407#c54)• 12 years ago |
|  | |

(In reply to Benoit Jacob [:bjacob] from [comment #53](/show_bug.cgi?id=814407#c53 "RESOLVED FIXED - Use after free in Mesa 8.0 after calling texImage2D on texture already attached to FBO in texture-attachment-formats.html test"))
> Bill: thanks for verifying; it is intentional that the "correct way" patch
> wasn't backported: it was not necessary to fix the bug, and we try to only
> take necessary patches on beta.
Was this comment meant for [Bug 814716](/show_bug.cgi?id=814716 "RESOLVED FIXED - WebGL conformance test locks up GPU under Linux with NVIDIA graphics using nouveau drivers")?

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Comment 55](/show_bug.cgi?id=814407#c55)• 12 years ago |
|  | |

Oh, yes. Too much bugmail.

|  | [Bill Gianopoulos [:WG9s]](/user_profile?user_id=104622)  Reporter |  |
| --- | --- | --- |
| [Comment 56](/show_bug.cgi?id=814407#c56)• 12 years ago |
|  | |

Isn't this fixed everywhere now? Does it still need to be hidden?

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=814407#a13777812_1689)• 12 years ago |

Group: core-security

|  | [Karl Tomlinson (:karlt)](/user_profile?user_id=274246) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=814407#a17399386_274246)• 12 years ago |

Depends on: [880734](/show_bug.cgi?id=880734 "VERIFIED FIXED - New Google Maps does not show/update the map when being loaded or dragged around")

|  | [Kelsey Gilbert [:jgilbert]](/user_profile?user_id=419431) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=814407#a40051155_419431)• 11 years ago |

Blocks: [978422](/show_bug.cgi?id=978422 "RESOLVED FIXED - ReattachTextureToAnyFramebufferToWorkAroundBugs no longer needed")
You need to [log in](/show_bug.cgi?id=814407&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from bugzilla.mozilla.org_a9e51473_20250125_034845.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/814839)
* [XML](/show_bug.cgi?ctype=xml&id=814839)

Closed
[Bug 814839](/show_bug.cgi?id=814839)

Opened 12 years ago
Closed 12 years ago

# WebGL crash [@mozilla::WebGLContext::Clear] during conformance test

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

WebGL crash [@mozilla::WebGLContext::Clear] during conformance test

## Categories

### (Core :: Graphics: CanvasWebGL, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=Graphics%3A%20CanvasWebGL#Graphics%3A%20CanvasWebGL)

Graphics: CanvasWebGL
▾

Core :: Graphics: CanvasWebGL
Bugs with the WebGL Canvas Context.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=Graphics%3A%20CanvasWebGL&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=Graphics%3A%20CanvasWebGL&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=Graphics%3A%20CanvasWebGL)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

x86\_64

macOS

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

critical

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla20

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| a11y-review | --- |
| --- | --- |
| Accessibility Severity | --- |
| Webcompat Score | --- |
| Webcompat Priority | --- |
| Performance Impact | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox17 | --- | [affected](/buglist.cgi?f1=cf_status_firefox17&o1=equals&v1=affected) |
| firefox18 | [+](/buglist.cgi?f1=cf_tracking_firefox18&o1=equals&v1=%2B) | [verified](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=verified) |
| firefox19 | [+](/buglist.cgi?f1=cf_tracking_firefox19&o1=equals&v1=%2B) | [verified](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=verified) |
| firefox20 | [+](/buglist.cgi?f1=cf_tracking_firefox20&o1=equals&v1=%2B) | [verified](/buglist.cgi?f1=cf_status_firefox20&o1=equals&v1=verified) |
| firefox-esr10 | --- | [unaffected](/buglist.cgi?f1=cf_status_esr10&o1=equals&v1=unaffected) |
| firefox-esr17 | [18+](/buglist.cgi?f1=cf_tracking_firefox_esr17&o1=equals&v1=18%2B) | [verified](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=verified) |
| b2g18 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=fixed) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox17 |  | affected |
| firefox18 | + | verified |
| firefox19 | + | verified |
| firefox20 | + | verified |
| firefox-esr10 |  | unaffected |
| firefox-esr17 | 18+ | verified |
| b2g18 |  | fixed |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: posidron, Assigned: milan)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/afff8630fb0a0c0a44853cd700ac0a4d?d=mm&size=40)  [milan](/user_profile?user_id=456486)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/9e7272cd8191f064be3b2b7dcd6a8903?d=mm&size=40)  [posidron](/user_profile?user_id=368570)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/ca6a57abf052ac63d917d5dae1cc0f00?d=mm&size=40)  [jgilbert](/user_profile?user_id=419431)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

9 people

## References

### ( [URL](https://www.khronos.org/registry/webgl/sdk/tests/conformance/extensions/webgl-depth-texture.html "https://www.khronos.org/registry/webgl/sdk/tests/conformance/extensions/webgl-depth-texture.html") )

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[685184](/show_bug.cgi?id=685184 "RESOLVED FIXED - WebGL's renderbufferStorage does not emulate DEPTH_STENCIL on platforms without native support"), [907946](/show_bug.cgi?id=907946 "RESOLVED FIXED - Re-enable EXT_packed_depth_stencil on OS X 10.9"), [908905](/show_bug.cgi?id=908905 "RESOLVED FIXED - Reduce blocking of packed_depth_stencil on mac+nv")

Dependency [tree](/showdependencytree.cgi?id=814839&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=814839)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[khronos.org/registry/webgl/sdk/tests/...](https://www.khronos.org/registry/webgl/sdk/tests/conformance/extensions/webgl-depth-texture.html "https://www.khronos.org/registry/webgl/sdk/tests/conformance/extensions/webgl-depth-texture.html")

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Keywords: sec-critical, testcase, Whiteboard: [adv-main18+][adv-esr17+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[sec-critical](/buglist.cgi?keywords=sec-critical&resolution=---),
[testcase](/buglist.cgi?keywords=testcase&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[adv-main18+][adv-esr17+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | in-testsuite |  |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (6 files, 2 obsolete files)

| [callstack](/attachment.cgi?id=684839)  [12 years ago](#c0)  [Christoph Diehl [:posidron]](/user_profile?user_id=368570)   4.94 KB, text/plain |  | [Details](/attachment.cgi?id=684839&action=edit) |
| --- | --- | --- |
| [Blacklist OSX & Nvidia in WebGLContext::IsExtensionSupported](/attachment.cgi?id=692433)  [12 years ago](#c12)  [Milan Sreckovic [:milan] (needinfo for best results)](/user_profile?user_id=456486)   1.04 KB, patch | bjacob : [feedback+](#c15 "12 years ago")  jgilbert : [feedback-](#c23 "12 years ago") | [Details](/attachment.cgi?id=692433&action=edit) | [Diff](/attachment.cgi?id=692433&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=814839&attachment=692433) |
| [Blacklist OSX & Nvidia in WebGLContext::InitAndValidateGL](/attachment.cgi?id=692434)  [12 years ago](#c13)  [Milan Sreckovic [:milan] (needinfo for best results)](/user_profile?user_id=456486)   1.01 KB, patch | bjacob : [feedback-](#c16 "12 years ago") | [Details](/attachment.cgi?id=692434&action=edit) | [Diff](/attachment.cgi?id=692434&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=814839&attachment=692434) |
| [Blacklist OSX & Nvidia in GLContext::InitExtensions](/attachment.cgi?id=693020)  [12 years ago](#c24)  [Milan Sreckovic [:milan] (needinfo for best results)](/user_profile?user_id=456486)   878 bytes, patch | jgilbert : [review+](#a2019355_419431 "12 years ago")  bjacob : [review+](#c25 "12 years ago") | [Details](/attachment.cgi?id=693020&action=edit) | [Diff](/attachment.cgi?id=693020&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=814839&attachment=693020) |
| [Updated with code review comments (trivial)](/attachment.cgi?id=693086)  [12 years ago](#c26)  [Milan Sreckovic [:milan] (needinfo for best results)](/user_profile?user_id=456486)   883 bytes, patch | milan : [review+](#c26 "12 years ago")  abillings : [sec-approval+](#c32 "12 years ago") | [Details](/attachment.cgi?id=693086&action=edit) | [Diff](/attachment.cgi?id=693086&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=814839&attachment=693086) |
| [Beta patch](/attachment.cgi?id=693548)  [12 years ago](#c33)  [Milan Sreckovic [:milan] (needinfo for best results)](/user_profile?user_id=456486)   883 bytes, patch |  | [Details](/attachment.cgi?id=693548&action=edit) | [Diff](/attachment.cgi?id=693548&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=814839&attachment=693548) |
| [Aurora patch](/attachment.cgi?id=693549)  [12 years ago](#c34)  [Milan Sreckovic [:milan] (needinfo for best results)](/user_profile?user_id=456486)   883 bytes, patch |  | [Details](/attachment.cgi?id=693549&action=edit) | [Diff](/attachment.cgi?id=693549&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=814839&attachment=693549) |
| [17esr patch](/attachment.cgi?id=693551)  [12 years ago](#c35)  [Milan Sreckovic [:milan] (needinfo for best results)](/user_profile?user_id=456486)   883 bytes, patch |  | [Details](/attachment.cgi?id=693551&action=edit) | [Diff](/attachment.cgi?id=693551&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=814839&attachment=693551) |

Show Obsolete

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Christoph Diehl [:posidron]](/user_profile?user_id=368570)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=814839#c0)• 12 years ago |
|  | |

Attached file
[callstack](attachment.cgi?id=684839)
— [Details](attachment.cgi?id=684839&action=edit)

<https://www.khronos.org/registry/webgl/sdk/tests/conformance/extensions/webgl-depth-texture.html>
Device ID: 0x fd5
GPU Accelerated Windows: 1/1 OpenGL
Vendor ID: 0x10de
WebGL Renderer: NVIDIA Corporation -- NVIDIA GeForce GT 650M OpenGL Engine

|  | [Christoph Diehl [:posidron]](/user_profile?user_id=368570)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=814839#a296_368570)• 12 years ago |

Keywords: [testcase](/buglist.cgi?keywords=testcase&resolution=---)

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769) |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=814839#c1)• 12 years ago |
|  | |

What OS and/or driver version?

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769) |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=814839#c2)• 12 years ago |
|  | |

Also, [comment 0](/show_bug.cgi?id=814839#c0 "RESOLVED FIXED - WebGL crash [@mozilla::WebGLContext::Clear] during conformance test") says it's webgl-depth-texture.html but the callstack attachment has a different URL at the top. Which is it?

|  | [Christoph Diehl [:posidron]](/user_profile?user_id=368570)  Reporter |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=814839#c3)• 12 years ago |
|  | |

ProductName: Mac OS X
ProductVersion: 10.8.2
BuildVersion: 12C3006
It's webgl-depth-texture.htmlURL: [https://www.khronos.org/registry/webg...](https://www.khronos.org/registry/webgl/sdk/tests/conformance/extensions/webgl-depth-texture.html)

|  | [Christoph Diehl [:posidron]](/user_profile?user_id=368570)  Reporter |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=814839#c4)• 12 years ago |
|  | |

Driver Version: NVIDIA-8.6.22

|  | [David Bolter [:davidb] (NeedInfo me for attention)](/user_profile?user_id=152868) |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=814839#c5)• 12 years ago |
|  | |

Assigning to Milan for now, maybe bjacob will steal it though :)Assignee: nobody → milan

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=814839#a1072281_1689)• 12 years ago |

[status-firefox20](/buglist.cgi?f1=cf_status_firefox20&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox20&o1=equals&v1=affected)
[tracking-firefox20](/buglist.cgi?f1=cf_tracking_firefox20&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox20&o1=equals&v1=%2B)Summary: WebGL crash [@mozilla::WebGLContext::Clear] → WebGL crash [@mozilla::WebGLContext::Clear] during conformance test

|  | [Milan Sreckovic [:milan] (needinfo for best results)](/user_profile?user_id=456486)  Assignee |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=814839#c6)• 12 years ago |
|  | |

Safari on this test:
FAIL Unable to fetch WebGL rendering context for Canvas
FAIL successfullyParsed should be true. Threw exception ReferenceError: Can't find variable: successfullyParsed

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769) |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=814839#c7)• 12 years ago |
|  | |

In Safari, WebGL isn't enabled by default. You have to go to the developer menu to enable it.
It would be very interesting to know if it reproduces there.
Another thing to do is APItrace it.

|  | [Milan Sreckovic [:milan] (needinfo for best results)](/user_profile?user_id=456486)  Assignee |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=814839#c8)• 12 years ago |
|  | |

Right - with WebGL enabled, it admits it doesn't support that extension:
PASS WebGL context exists
Testing binding enum with extension disabled
PASS gl.texImage2D(gl.TEXTURE\_2D, 0, gl.DEPTH\_COMPONENT, 1, 1, 0, gl.DEPTH\_COMPONENT, gl.UNSIGNED\_SHORT, null) generated expected GL error: INVALID\_ENUM.
PASS gl.texImage2D(gl.TEXTURE\_2D, 0, gl.DEPTH\_COMPONENT, 1, 1, 0, gl.DEPTH\_COMPONENT, gl.UNSIGNED\_INT, null) generated expected GL error: INVALID\_ENUM.
PASS No WEBGL\_depth\_texture support -- this is legal
PASS WEBGL\_depth\_texture not listed as supported and getExtension failed -- this is legal
PASS successfullyParsed is true
TEST COMPLETE

|  | [Milan Sreckovic [:milan] (needinfo for best results)](/user_profile?user_id=456486)  Assignee |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=814839#c9)• 12 years ago |
|  | |

Do we know if this is crash happens outside of OSX?Keywords: [qawanted](/buglist.cgi?keywords=qawanted&resolution=---)Whiteboard: [qawanted - what platforms crash]

|  | [Milan Sreckovic [:milan] (needinfo for best results)](/user_profile?user_id=456486)  Assignee |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=814839#c10)• 12 years ago |
|  | |

And, on OSX, is it just Nvidia graphics?

|  | [Milan Sreckovic [:milan] (needinfo for best results)](/user_profile?user_id=456486)  Assignee |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=814839#c11)• 12 years ago |
|  | |

Benoit/Jeff, why is gl->IsExtensionSupported(GLContext::EXT\_packed\_depth\_stencil) and indication that WEBGL\_depth\_texture is supported? Is there a better test, before we start special casing OSX (and Nvidia?)

|  | [Milan Sreckovic [:milan] (needinfo for best results)](/user_profile?user_id=456486)  Assignee |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=814839#c12)• 12 years ago |
|  | |

Attached patch

[Blacklist OSX & Nvidia in WebGLContext::IsExtensionSupported](attachment.cgi?id=692433&action=diff) (obsolete)
— [Details](attachment.cgi?id=692433&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=814839&attachment=692433)

Option 1, suggested by bjacob
[Attachment #692433](/attachment.cgi?id=692433&action=edit "Blacklist OSX & Nvidia in WebGLContext::IsExtensionSupported") -
Flags: feedback?(jgilbert)
[Attachment #692433](/attachment.cgi?id=692433&action=edit "Blacklist OSX & Nvidia in WebGLContext::IsExtensionSupported") -
Flags: feedback?(bjacob)

|  | [Milan Sreckovic [:milan] (needinfo for best results)](/user_profile?user_id=456486)  Assignee |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=814839#c13)• 12 years ago |
|  | |

Attached patch

[Blacklist OSX & Nvidia in WebGLContext::InitAndValidateGL](attachment.cgi?id=692434&action=diff) (obsolete)
— [Details](attachment.cgi?id=692434&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=814839&attachment=692434)

Is this the right place instead?
[Attachment #692434](/attachment.cgi?id=692434&action=edit "Blacklist OSX & Nvidia in WebGLContext::InitAndValidateGL") -
Flags: feedback?(jgilbert)
[Attachment #692434](/attachment.cgi?id=692434&action=edit "Blacklist OSX & Nvidia in WebGLContext::InitAndValidateGL") -
Flags: feedback?(bjacob)

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769) |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=814839#c14)• 12 years ago |
|  | |

(In reply to Milan Sreckovic from [comment #11](/show_bug.cgi?id=814839#c11 "RESOLVED FIXED - WebGL crash [@mozilla::WebGLContext::Clear] during conformance test"))
> Benoit/Jeff, why is
> gl->IsExtensionSupported(GLContext::EXT\_packed\_depth\_stencil) and indication
> that WEBGL\_depth\_texture is supported? Is there a better test, before we
> start special casing OSX (and Nvidia?)
Hm, so the test we have here is
if (gl->IsGLES2() &&
gl->IsExtensionSupported(GLContext::OES\_packed\_depth\_stencil) &&
gl->IsExtensionSupported(GLContext::OES\_depth\_texture))
So it is testing for OES\_depth\_texture as it should, but you're right, it also tests for OES\_packed\_depth\_stencil and I have no idea why it does that. Jeff reviewed that patch ([bug 738866](/show_bug.cgi?id=738866 "RESOLVED FIXED - Implement WebGL WEBGL_depth_texture extension")) so he should know.
Anyhow, this is only adding a \_restriction\_ on the condition to enable this extension, so it can't be responsible for enabling it when it shouldn't.

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769) |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=814839#c15)• 12 years ago |
|  | |

Comment on [attachment 692433](/attachment.cgi?id=692433 "Blacklist OSX & Nvidia in WebGLContext::IsExtensionSupported") [[details]](/attachment.cgi?id=692433&action=edit "Blacklist OSX & Nvidia in WebGLContext::IsExtensionSupported") [[diff]](/attachment.cgi?id=692433&action=diff "Blacklist OSX & Nvidia in WebGLContext::IsExtensionSupported") [[review]](/page.cgi?id=splinter.html&ignore=&bug=814839&attachment=692433)
Blacklist OSX & Nvidia in WebGLContext::IsExtensionSupported
Review of [attachment 692433](/attachment.cgi?id=692433 "Blacklist OSX & Nvidia in WebGLContext::IsExtensionSupported") [[details]](/attachment.cgi?id=692433&action=edit "Blacklist OSX & Nvidia in WebGLContext::IsExtensionSupported") [[diff]](/attachment.cgi?id=692433&action=diff "Blacklist OSX & Nvidia in WebGLContext::IsExtensionSupported") [[review]](/page.cgi?id=splinter.html&ignore=&bug=814839&attachment=692433):
-----------------------------------------------------------------
That is the right place.
[Attachment #692433](/attachment.cgi?id=692433&action=edit "Blacklist OSX & Nvidia in WebGLContext::IsExtensionSupported") -
Flags: feedback?(jgilbert)
[Attachment #692433](/attachment.cgi?id=692433&action=edit "Blacklist OSX & Nvidia in WebGLContext::IsExtensionSupported") -
Flags: feedback?(bjacob)
[Attachment #692433](/attachment.cgi?id=692433&action=edit "Blacklist OSX & Nvidia in WebGLContext::IsExtensionSupported") -
Flags: feedback+

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769) |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=814839#c16)• 12 years ago |
|  | |

Comment on [attachment 692434](/attachment.cgi?id=692434 "Blacklist OSX & Nvidia in WebGLContext::InitAndValidateGL") [[details]](/attachment.cgi?id=692434&action=edit "Blacklist OSX & Nvidia in WebGLContext::InitAndValidateGL") [[diff]](/attachment.cgi?id=692434&action=diff "Blacklist OSX & Nvidia in WebGLContext::InitAndValidateGL") [[review]](/page.cgi?id=splinter.html&ignore=&bug=814839&attachment=692434)
Blacklist OSX & Nvidia in WebGLContext::InitAndValidateGL
Review of [attachment 692434](/attachment.cgi?id=692434 "Blacklist OSX & Nvidia in WebGLContext::InitAndValidateGL") [[details]](/attachment.cgi?id=692434&action=edit "Blacklist OSX & Nvidia in WebGLContext::InitAndValidateGL") [[diff]](/attachment.cgi?id=692434&action=diff "Blacklist OSX & Nvidia in WebGLContext::InitAndValidateGL") [[review]](/page.cgi?id=splinter.html&ignore=&bug=814839&attachment=692434):
-----------------------------------------------------------------
The interesting --- I didn't know that we had MarkExtensionUnsupported. As said above, the extension to disable here would be the depth\_texture extension since we do check for it too; but if we were to take that route, I'd rather do it directly in gfx/gl/GLContext.\* since that isn't WebGL specific.
[Attachment #692434](/attachment.cgi?id=692434&action=edit "Blacklist OSX & Nvidia in WebGLContext::InitAndValidateGL") -
Flags: feedback?(jgilbert)
[Attachment #692434](/attachment.cgi?id=692434&action=edit "Blacklist OSX & Nvidia in WebGLContext::InitAndValidateGL") -
Flags: feedback?(bjacob)
[Attachment #692434](/attachment.cgi?id=692434&action=edit "Blacklist OSX & Nvidia in WebGLContext::InitAndValidateGL") -
Flags: feedback-

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769) |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=814839#c17)• 12 years ago |
|  | |

I meant: "Ah, Interesting!"

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769) |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=814839#c18)• 12 years ago |
|  | |

Wait a minute, what tree does your patch apply to ? In all the trees I looked at, the code looks like in [comment 14](/show_bug.cgi?id=814839#c14 "RESOLVED FIXED - WebGL crash [@mozilla::WebGLContext::Clear] during conformance test"), with the gl->IsExtensionSupported(GLContext::OES\_depth\_texture).

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769) |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=814839#c19)• 12 years ago |
|  | |

Comment on [attachment 692433](/attachment.cgi?id=692433 "Blacklist OSX & Nvidia in WebGLContext::IsExtensionSupported") [[details]](/attachment.cgi?id=692433&action=edit "Blacklist OSX & Nvidia in WebGLContext::IsExtensionSupported") [[diff]](/attachment.cgi?id=692433&action=diff "Blacklist OSX & Nvidia in WebGLContext::IsExtensionSupported") [[review]](/page.cgi?id=splinter.html&ignore=&bug=814839&attachment=692433)
Blacklist OSX & Nvidia in WebGLContext::IsExtensionSupported
Sorry -- I was confused above, was looking at the wrong if().
Jeff, please comment on the rationale for this EXT\_packed\_depth\_stencil test?
[Attachment #692433](/attachment.cgi?id=692433&action=edit "Blacklist OSX & Nvidia in WebGLContext::IsExtensionSupported") -
Flags: feedback?(jgilbert)

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769) |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=814839#c20)• 12 years ago |
|  | |

(In reply to Milan Sreckovic from [comment #10](/show_bug.cgi?id=814839#c10 "RESOLVED FIXED - WebGL crash [@mozilla::WebGLContext::Clear] during conformance test"))
> And, on OSX, is it just Nvidia graphics?
Tested on a Mac with AMD graphics, works fine. Crash is NVIDIA specific.

|  | [Milan Sreckovic [:milan] (needinfo for best results)](/user_profile?user_id=456486)  Assignee |  |
| --- | --- | --- |
| [Comment 21](/show_bug.cgi?id=814839#c21)• 12 years ago |
|  | |

Removing qawanted, bjacob confirmed it runs on AMD.Keywords: [qawanted](/buglist.cgi?keywords=qawanted&resolution=---)Whiteboard: [qawanted - what platforms crash]

|  | [Kelsey Gilbert [:jgilbert]](/user_profile?user_id=419431) |  |
| --- | --- | --- |
| [Comment 22](/show_bug.cgi?id=814839#c22)• 12 years ago |
|  | |

(In reply to Benoit Jacob [:bjacob] from [comment #19](/show_bug.cgi?id=814839#c19 "RESOLVED FIXED - WebGL crash [@mozilla::WebGLContext::Clear] during conformance test"))
> Comment on [attachment 692433](/attachment.cgi?id=692433 "Blacklist OSX & Nvidia in WebGLContext::IsExtensionSupported") [[details]](/attachment.cgi?id=692433&action=edit "Blacklist OSX & Nvidia in WebGLContext::IsExtensionSupported") [[diff]](/attachment.cgi?id=692433&action=diff "Blacklist OSX & Nvidia in WebGLContext::IsExtensionSupported") [[review]](/page.cgi?id=splinter.html&ignore=&bug=814839&attachment=692433)
> Blacklist OSX & Nvidia in WebGLContext::IsExtensionSupported
>
> Sorry -- I was confused above, was looking at the wrong if().
>
> Jeff, please comment on the rationale for this EXT\_packed\_depth\_stencil test?
WEBGL\_depth\_texture requires both depth and depth-stencil textures.
That said, WebGL actually requires depth-stencil in the core spec, so technically we need to blocklist WebGL on systems where this is not supported, until we can emulate it.
This means that while we shouldn't check for {OES,EXT}\_packed\_depth\_stencil, it's not because we don't need it, but because this functionality is required already by WebGL.

|  | [Kelsey Gilbert [:jgilbert]](/user_profile?user_id=419431) |  |
| --- | --- | --- |
| [Comment 23](/show_bug.cgi?id=814839#c23)• 12 years ago |
|  | |

Comment on [attachment 692433](/attachment.cgi?id=692433 "Blacklist OSX & Nvidia in WebGLContext::IsExtensionSupported") [[details]](/attachment.cgi?id=692433&action=edit "Blacklist OSX & Nvidia in WebGLContext::IsExtensionSupported") [[diff]](/attachment.cgi?id=692433&action=diff "Blacklist OSX & Nvidia in WebGLContext::IsExtensionSupported") [[review]](/page.cgi?id=splinter.html&ignore=&bug=814839&attachment=692433)
Blacklist OSX & Nvidia in WebGLContext::IsExtensionSupported
Review of [attachment 692433](/attachment.cgi?id=692433 "Blacklist OSX & Nvidia in WebGLContext::IsExtensionSupported") [[details]](/attachment.cgi?id=692433&action=edit "Blacklist OSX & Nvidia in WebGLContext::IsExtensionSupported") [[diff]](/attachment.cgi?id=692433&action=diff "Blacklist OSX & Nvidia in WebGLContext::IsExtensionSupported") [[review]](/page.cgi?id=splinter.html&ignore=&bug=814839&attachment=692433):
-----------------------------------------------------------------
This should be done at the end of GLContext::InitExtensions.
[Attachment #692433](/attachment.cgi?id=692433&action=edit "Blacklist OSX & Nvidia in WebGLContext::IsExtensionSupported") -
Flags: feedback?(jgilbert) → feedback-

|  | [Milan Sreckovic [:milan] (needinfo for best results)](/user_profile?user_id=456486)  Assignee |  |
| --- | --- | --- |
| [Comment 24](/show_bug.cgi?id=814839#c24)• 12 years ago |
|  | |

Attached patch

[Blacklist OSX & Nvidia in GLContext::InitExtensions](attachment.cgi?id=693020&action=diff)
— [Details](attachment.cgi?id=693020&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=814839&attachment=693020)

Option 3, suggested by jgilbert
[Attachment #692433](/attachment.cgi?id=692433&action=edit "Blacklist OSX & Nvidia in WebGLContext::IsExtensionSupported") -
Attachment is obsolete: true
[Attachment #692434](/attachment.cgi?id=692434&action=edit "Blacklist OSX & Nvidia in WebGLContext::InitAndValidateGL") -
Attachment is obsolete: true
[Attachment #693020](/attachment.cgi?id=693020&action=edit "Blacklist OSX & Nvidia in GLContext::InitExtensions") -
Flags: review?(jgilbert)
[Attachment #693020](/attachment.cgi?id=693020&action=edit "Blacklist OSX & Nvidia in GLContext::InitExtensions") -
Flags: review?(bjacob)

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769) |  |
| --- | --- | --- |
| [Comment 25](/show_bug.cgi?id=814839#c25)• 12 years ago |
|  | |

Comment on [attachment 693020](/attachment.cgi?id=693020 "Blacklist OSX & Nvidia in GLContext::InitExtensions") [[details]](/attachment.cgi?id=693020&action=edit "Blacklist OSX & Nvidia in GLContext::InitExtensions") [[diff]](/attachment.cgi?id=693020&action=diff "Blacklist OSX & Nvidia in GLContext::InitExtensions") [[review]](/page.cgi?id=splinter.html&ignore=&bug=814839&attachment=693020)
Blacklist OSX & Nvidia in GLContext::InitExtensions
Review of [attachment 693020](/attachment.cgi?id=693020 "Blacklist OSX & Nvidia in GLContext::InitExtensions") [[details]](/attachment.cgi?id=693020&action=edit "Blacklist OSX & Nvidia in GLContext::InitExtensions") [[diff]](/attachment.cgi?id=693020&action=diff "Blacklist OSX & Nvidia in GLContext::InitExtensions") [[review]](/page.cgi?id=splinter.html&ignore=&bug=814839&attachment=693020):
-----------------------------------------------------------------
Note: as I have never used MarkExtensionUnsupported, I suggest that you run this locally to verify that it does take effect.
::: gfx/gl/GLContext.cpp
@@ +599,5 @@
> + // to properly support this. See 814839
> + if (WorkAroundDriverBugs() &&
> + Vendor() == gl::GLContext::VendorNVIDIA) {
> + MarkExtensionUnsupported(gl::GLContext::EXT\_packed\_depth\_stencil);
> + }
Just a style nit: after a multi-line if() condition, the opening curly brace '{' should be on a new line.
[Attachment #693020](/attachment.cgi?id=693020&action=edit "Blacklist OSX & Nvidia in GLContext::InitExtensions") -
Flags: review?(bjacob) → review+

|  | [Kelsey Gilbert [:jgilbert]](/user_profile?user_id=419431) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=814839#a2019355_419431)• 12 years ago |

[Attachment #693020](/attachment.cgi?id=693020&action=edit "Blacklist OSX & Nvidia in GLContext::InitExtensions") -
Flags: review?(jgilbert) → review+

|  | [Milan Sreckovic [:milan] (needinfo for best results)](/user_profile?user_id=456486)  Assignee |  |
| --- | --- | --- |
| [Comment 26](/show_bug.cgi?id=814839#c26)• 12 years ago |
|  | |

Attached patch

[Updated with code review comments (trivial)](attachment.cgi?id=693086&action=diff)
— [Details](attachment.cgi?id=693086&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=814839&attachment=693086)

Applying nit comments to the r+ patch.
[Attachment #693086](/attachment.cgi?id=693086&action=edit "Updated with code review comments (trivial)") -
Flags: review+
[Attachment #693086](/attachment.cgi?id=693086&action=edit "Updated with code review comments (trivial)") -
Flags: checkin?

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769) |  |
| --- | --- | --- |
| [Comment 27](/show_bug.cgi?id=814839#c27)• 12 years ago |
|  | |

Comment on [attachment 693086](/attachment.cgi?id=693086 "Updated with code review comments (trivial)") [[details]](/attachment.cgi?id=693086&action=edit "Updated with code review comments (trivial)") [[diff]](/attachment.cgi?id=693086&action=diff "Updated with code review comments (trivial)") [[review]](/page.cgi?id=splinter.html&ignore=&bug=814839&attachment=693086)
Updated with code review comments (trivial)
[Security approval request comment]
How easily can the security issue be deduced from the patch?
Nothing specific, aside from "there is a security problem with depth textures on Mac NVIDIA", can be deduced from the patch, as this patch just disables this functionality on this driver. I think it's safe to land now.
Do comments in the patch, the check-in comment, or tests included in the patch paint a bulls-eye on the security problem?
No, they just show that there exists a security issue with depth textures on this driver.
Which older supported branches are affected by this flaw?
All branches >= 17 when [bug 738866](/show_bug.cgi?id=738866 "RESOLVED FIXED - Implement WebGL WEBGL_depth_texture extension") landed, exposing this functionality.
If not all supported branches, which bug introduced the flaw?
[Bug 738866](/show_bug.cgi?id=738866 "RESOLVED FIXED - Implement WebGL WEBGL_depth_texture extension").
Do you have backports for the affected branches? If not, how different, hard to create, and risky will they be?
Should be simple enough to backport, not necessarily trivial if MarkExtensionUnsupported wasn't available yet in some branch, but still simple.
How likely is this patch to cause regressions; how much testing does it need?
Safe, won't cause regressions. Only testing it needs is verify that it does disable depth textures on Mac NVIDIA.
[Attachment #693086](/attachment.cgi?id=693086&action=edit "Updated with code review comments (trivial)") -
Flags: sec-approval?

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 28](/show_bug.cgi?id=814839#c28)• 12 years ago |
|  | |

Adding release management so we can discuss when we want to get this in since it affects 17 and later.
[status-firefox17](/buglist.cgi?f1=cf_status_firefox17&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox17&o1=equals&v1=affected)
[status-firefox18](/buglist.cgi?f1=cf_status_firefox18&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=affected)
[status-firefox19](/buglist.cgi?f1=cf_status_firefox19&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=affected)
[status-firefox-esr17](/buglist.cgi?f1=cf_status_firefox_esr17&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=affected)
[tracking-firefox18](/buglist.cgi?f1=cf_tracking_firefox18&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox18&o1=equals&v1=%3F)
[tracking-firefox19](/buglist.cgi?f1=cf_tracking_firefox19&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox19&o1=equals&v1=%3F)
[tracking-firefox-esr17](/buglist.cgi?f1=cf_tracking_firefox_esr17&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox_esr17&o1=equals&v1=%3F)

|  | [Alex Keybl [:akeybl]](/user_profile?user_id=425645) |  |
| --- | --- | --- |
| [Comment 29](/show_bug.cgi?id=814839#c29)• 12 years ago |
|  | |

As long as there won't be a major perf hit, we're good to land on all branches given the low risk of regression. Please prepare an ESR17 patch as well.
[status-firefox-esr10](/buglist.cgi?f1=cf_status_esr10&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_esr10&o1=equals&v1=unaffected)
[tracking-firefox18](/buglist.cgi?f1=cf_tracking_firefox18&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox18&o1=equals&v1=%3F) → [+](/buglist.cgi?f1=cf_tracking_firefox18&o1=equals&v1=%2B)
[tracking-firefox19](/buglist.cgi?f1=cf_tracking_firefox19&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox19&o1=equals&v1=%3F) → [+](/buglist.cgi?f1=cf_tracking_firefox19&o1=equals&v1=%2B)
[tracking-firefox-esr17](/buglist.cgi?f1=cf_tracking_firefox_esr17&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox_esr17&o1=equals&v1=%3F) → [18+](/buglist.cgi?f1=cf_tracking_firefox_esr17&o1=equals&v1=18%2B)

|  | [Milan Sreckovic [:milan] (needinfo for best results)](/user_profile?user_id=456486)  Assignee |  |
| --- | --- | --- |
| [Comment 30](/show_bug.cgi?id=814839#c30)• 12 years ago |
|  | |

I'll put together the backports.

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769) |  |
| --- | --- | --- |
| [Comment 31](/show_bug.cgi?id=814839#c31)• 12 years ago |
|  | |

In comments 28 and 29 did you mean to grant sec-approval? Or should we wait a bit longer before landing on central? (My recommendation is not to wait as this fix is not giving away a precise vulnerability).

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 32](/show_bug.cgi?id=814839#c32)• 12 years ago |
|  | |

Comment on [attachment 693086](/attachment.cgi?id=693086 "Updated with code review comments (trivial)") [[details]](/attachment.cgi?id=693086&action=edit "Updated with code review comments (trivial)") [[diff]](/attachment.cgi?id=693086&action=diff "Updated with code review comments (trivial)") [[review]](/page.cgi?id=splinter.html&ignore=&bug=814839&attachment=693086)
Updated with code review comments (trivial)
Giving explicit sec-approval+.
[Attachment #693086](/attachment.cgi?id=693086&action=edit "Updated with code review comments (trivial)") -
Flags: sec-approval? → sec-approval+

|  | [Milan Sreckovic [:milan] (needinfo for best results)](/user_profile?user_id=456486)  Assignee |  |
| --- | --- | --- |
| [Comment 33](/show_bug.cgi?id=814839#c33)• 12 years ago |
|  | |

Attached patch

[Beta patch](attachment.cgi?id=693548&action=diff)
— [Details](attachment.cgi?id=693548&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=814839&attachment=693548)

|  | [Milan Sreckovic [:milan] (needinfo for best results)](/user_profile?user_id=456486)  Assignee |  |
| --- | --- | --- |
| [Comment 34](/show_bug.cgi?id=814839#c34)• 12 years ago |
|  | |

Attached patch

[Aurora patch](attachment.cgi?id=693549&action=diff)
— [Details](attachment.cgi?id=693549&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=814839&attachment=693549)

|  | [Milan Sreckovic [:milan] (needinfo for best results)](/user_profile?user_id=456486)  Assignee |  |
| --- | --- | --- |
| [Comment 35](/show_bug.cgi?id=814839#c35)• 12 years ago |
|  | |

Attached patch

[17esr patch](attachment.cgi?id=693551&action=diff)
— [Details](attachment.cgi?id=693551&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=814839&attachment=693551)

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769) |  |
| --- | --- | --- |
| [Comment 36](/show_bug.cgi?id=814839#c36)• 12 years ago |
|  | |

<https://hg.mozilla.org/integration/mozilla-inbound/rev/d5f731147e6c>
<https://hg.mozilla.org/releases/mozilla-aurora/rev/3d1343748fc7>
<https://hg.mozilla.org/releases/mozilla-beta/rev/f2fcf38b2b56>
<https://hg.mozilla.org/releases/mozilla-esr17/rev/5e7c575794d8>
[status-firefox18](/buglist.cgi?f1=cf_status_firefox18&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=fixed)
[status-firefox19](/buglist.cgi?f1=cf_status_firefox19&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=fixed)
[status-firefox20](/buglist.cgi?f1=cf_status_firefox20&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox20&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox20&o1=equals&v1=fixed)
[status-firefox-esr17](/buglist.cgi?f1=cf_status_firefox_esr17&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=fixed)Target Milestone: --- → mozilla20

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 37](/show_bug.cgi?id=814839#c37)• 12 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-b2g18/rev/f2fcf38b2b56>
[status-b2g18](/buglist.cgi?f1=cf_status_b2g18&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=fixed)

|  | [Ed Morley [:emorley]](/user_profile?user_id=373476) |  |
| --- | --- | --- |
| [Comment 38](/show_bug.cgi?id=814839#c38)• 12 years ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/d5f731147e6c>Status: NEW → RESOLVEDClosed: 12 years agoResolution: --- → FIXED

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=814839#a3415135_280903)• 12 years ago |

Whiteboard: [adv-main18+][adv-esr17+]

|  | [Ed Morley [:emorley]](/user_profile?user_id=373476) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=814839#a3810173_373476)• 12 years ago |

[Attachment #693086](/attachment.cgi?id=693086&action=edit "Updated with code review comments (trivial)") -
Flags: checkin?

|  | [Matt Wobensmith [:mwobensmith][:matt:]](/user_profile?user_id=452604) |  |
| --- | --- | --- |
| [Comment 39](/show_bug.cgi?id=814839#c39)• 12 years ago |
|  | |

Confirmed crash on 17.0.1 ESR, confirmed fix on 17.0.2 ESR.
[status-firefox-esr17](/buglist.cgi?f1=cf_status_firefox_esr17&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=verified)

|  | [u279076](/user_profile?user_id=279076) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=814839#a4008097_279076)• 12 years ago |

Keywords: [verifyme](/buglist.cgi?keywords=verifyme&resolution=---)

|  | [Matt Wobensmith [:mwobensmith][:matt:]](/user_profile?user_id=452604) |  |
| --- | --- | --- |
| [Comment 40](/show_bug.cgi?id=814839#c40)• 12 years ago |
|  | |

Confirmed crash on trunk, 2012-11-24
Confirmed fixed on trunk, 2013-01-09
Confirmed fixed on Aurora, 2013-01-09
Confirmed fixed on beta, 2013-01-09
[status-firefox18](/buglist.cgi?f1=cf_status_firefox18&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=verified)
[status-firefox19](/buglist.cgi?f1=cf_status_firefox19&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=verified)
[status-firefox20](/buglist.cgi?f1=cf_status_firefox20&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox20&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox20&o1=equals&v1=verified)

|  | [Matt Wobensmith [:mwobensmith][:matt:]](/user_profile?user_id=452604) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=814839#a4027133_452604)• 12 years ago |

Keywords: [verifyme](/buglist.cgi?keywords=verifyme&resolution=---)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=814839#a13615162_1689)• 12 years ago |

Group: core-security

|  | [Guillaume Abadie](/user_profile?user_id=471899) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=814839#a23365159_471899)• 11 years ago |

Blocks: [907946](/show_bug.cgi?id=907946 "RESOLVED FIXED - Re-enable EXT_packed_depth_stencil on OS X 10.9")

|  | [Kelsey Gilbert [:jgilbert]](/user_profile?user_id=419431) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=814839#a23539083_419431)• 11 years ago |

Blocks: [685184](/show_bug.cgi?id=685184 "RESOLVED FIXED - WebGL's renderbufferStorage does not emulate DEPTH_STENCIL on platforms without native support")

|  | [Kelsey Gilbert [:jgilbert]](/user_profile?user_id=419431) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=814839#a23540534_419431)• 11 years ago |

Blocks: [908905](/show_bug.cgi?id=908905 "RESOLVED FIXED - Reduce blocking of packed_depth_stencil on mac+nv")

|  | [Kelsey Gilbert [:jgilbert]](/user_profile?user_id=419431) |  |
| --- | --- | --- |
| [Comment 41](/show_bug.cgi?id=814839#c41)• 11 years ago |
|  | |

This does not reproduce for me on 10.8.3 with a GeForce 9400M.
Also, I believe this fix was over-cautious, and we should have only blocked depth\_texture on the affected machines. I filed [bug 908905](/show_bug.cgi?id=908905 "RESOLVED FIXED - Reduce blocking of packed_depth_stencil on mac+nv") for this.
You need to [log in](/show_bug.cgi?id=814839&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Christoph Diehl [:posidron]](/user_profile?user_id=368570)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from www.mozilla.org_83b72421_20250125_034830.html ===


## Help us improve your Mozilla experience

In addition to Cookies necessary for this site to function, we’d like your permission to set some additional Cookies to better understand your browsing needs and improve your experience. Rest assured — we value your privacy.

Accept All Additional Cookies

Reject All Additional Cookies

[Cookie settings](/en-US/privacy/websites/cookie-settings/)

Menu
[![Mozilla](https://www.mozilla.org/media/img/logos/m24/lockup-black.f2ddba3f0724.svg)](/en-US/)

* [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
  Firefox browsers](/en-US/firefox/)
  Close Firefox browsers menu
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for Desktop](/en-US/firefox/new/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for iOS](/en-US/firefox/browsers/mobile/ios/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for Android](/en-US/firefox/browsers/mobile/android/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/focus/logo.aac3e33175cb.svg)
    ## Firefox Focus](/en-US/firefox/browsers/mobile/focus/)
  + [## Firefox blog](https://blog.mozilla.org/firefox/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=firefox)
* [Products](/en-US/products/)
  Close Products menu
  + [![](https://www.mozilla.org/media/protocol/img/logos/mozilla/vpn/logo.c648f487bfb8.svg)
    ## Mozilla VPN](/en-US/products/vpn/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/monitor/logo.d97e5516f9e6.svg)
    ## Mozilla Monitor](https://monitor.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/relay/logo-white.d42a8b52e44c.svg)
    ## Firefox Relay](https://relay.firefox.com/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/protocol/img/logos/pocket/logo.17446bc33a5d.svg)
    ## Pocket](https://getpocket.com/firefox_learnmore/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/nav/icons/icon-mdn-plus.f54475f980ab.svg)
    ## MDN Plus](https://developer.mozilla.org/plus?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/logos/fakespot/logo-blue.3973b8fe9631.svg)
    ## Fakespot](https://fakespot.com/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/logos/thunderbird/logo-thunderbird.121e9c0fed45.svg)
    ## Thunderbird](https://www.thunderbird.net/)

  [All products](/en-US/products/)
* [About us](/en-US/about/)
  Close About us menu

  Our Mission

  + [## About Mozilla](/en-US/about/)
  + [## The Mozilla Manifesto](/en-US/about/manifesto/)
  + [## Get Involved](/en-US/contribute/)
  + [## Innovation Projects](https://future.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Blog](https://blog.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)

  Our Work

  + [## Mozilla Foundation](https://foundation.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla.ai](https://www.mozilla.ai/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla Ventures](https://mozilla.vc/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla Advertising](/en-US/advertising/)

## Menu

* Mozilla Security

## [Mozilla Security](/en-US/security/)

* [Advisories](/en-US/security/advisories/)
* [Known Vulnerabilities](/en-US/security/known-vulnerabilities/)
* [Mozilla Security Blog](https://blog.mozilla.com/security/)
* [Security Bug Bounty](/en-US/security/bug-bounty/)
* [Third-party Injection Policy](/en-US/security/third-party-software-injection/)

## [Client Bug Bounty](/en-US/security/client-bug-bounty/)

* [Frequently Asked Questions](/en-US/security/bug-bounty/faq/)
* [Hall of Fame](/en-US/security/bug-bounty/hall-of-fame/)

## [Web Bug Bounty](/en-US/security/web-bug-bounty/)

* [Eligible Websites](/en-US/security/bug-bounty/web-eligible-sites/)
* [Frequently Asked Questions](/en-US/security/bug-bounty/faq-webapp/)
* [Hall of Fame](/en-US/security/bug-bounty/web-hall-of-fame/)

# Mozilla Foundation Security Advisory 2013-01

## Miscellaneous memory safety hazards (rv:18.0/ rv:10.0.12 / rv:17.0.2)

Announced
January 8, 2013
Reporter
Mozilla Developers
Impact
Critical
Products
Firefox, Firefox ESR, SeaMonkey, Thunderbird, Thunderbird ESR
Fixed in

* Firefox 18
* Firefox ESR 10.0.12
* Firefox ESR 17.0.2
* SeaMonkey 2.15
* Thunderbird 17.0.2
* Thunderbird ESR 10.0.12
* Thunderbird ESR 17.0.2

### Description

Mozilla developers identified and fixed several memory safety bugs in the
browser engine used in Firefox and other Mozilla-based products. Some of these
bugs showed evidence of memory corruption under certain circumstances, and we
presume that with enough effort at least some of these could be exploited to run
arbitrary code.

In general these flaws cannot be exploited through email in the Thunderbird and SeaMonkey products because scripting is disabled, but are potentially a risk in browser or browser-like contexts in those products.

### References

Christoph Diehl, Christian Holler, Mats Palmgren, and Chiaki Ishikawa reported memory safety problems and crashes that affect Firefox ESR 10, Firefox ESR 17, and Firefox 17.

* [Memory safety bugs fixed in Firefox ESR 10.0.12, Firefox ESR 17.0.1, and Firefox 18](https://bugzilla.mozilla.org/buglist.cgi?bug_id=811382,768243,801195,806483,809064) ([CVE-2013-0769](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-0769))

Bill Gianopoulos, Benoit Jacob, Christoph Diehl, Christian Holler, Gary Kwong, Robert O'Callahan, and Scoobidiver reported memory safety problems and crashes that affect Firefox ESR 17 and Firefox 17.

* [Memory safety bugs fixed in Firefox ESR 17.0.1 and Firefox 18](https://bugzilla.mozilla.org/buglist.cgi?bug_id=814407,805814,816994,814839,812847,785358,808481,794426,805745) ([CVE-2013-0749](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-0749))

Jesse Ruderman, Christian Holler, Julian Seward, and Scoobidiver reported memory safety problems and crashes that affect Firefox 17.

* [Memory safety bugs fixed in Firefox 18](https://bugzilla.mozilla.org/buglist.cgi?bug_id=768750,756581,795284,787818) ([CVE-2013-0770](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-0770))

## Company

* [Leadership](/about/leadership/)
* [Press Center](https://blog.mozilla.org/category/mozilla/news/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=company)
* [Careers](/en-US/careers/)
* [Contact](/en-US/contact/)

## Support

* [Product Help](https://support.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)
* [File a Bug](https://bugzilla.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)
* [Localize Mozilla](https://pontoon.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)

## Resources

* [Advertise with Mozilla](/en-US/advertising/)
* [Firefox Release Notes](/firefox/134.0.2/releasenotes/)

## Developers

* [Developer Edition](/en-US/firefox/developer/)
* [Enterprise](/en-US/firefox/enterprise/)
* [Tools](https://firefox-source-docs.mozilla.org/devtools-user/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=developers)
* [MDN](https://developer.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer)

## Follow @Mozilla

* [X (formerly Twitter) (@mozilla)](https://twitter.com/mozilla)
* [Instagram (@mozilla)](https://www.instagram.com/mozilla/)
* [LinkedIn (@mozilla)](https://www.linkedin.com/company/mozilla-corporation/)
* [TikTok (@mozilla)](https://www.tiktok.com/%40mozilla)
* [Spotify (@mozilla)](https://open.spotify.com/show/0vT7LJMeVDxyQ2ZamHKu08?si=_uDRD6bRR_6M5YZyISGXgA)

## Follow @Firefox

* [X (formerly Twitter) (@firefox)](https://twitter.com/firefox)
* [Instagram (@firefox)](https://www.instagram.com/firefox/)
* [YouTube (@firefoxchannel)](https://www.youtube.com/user/firefoxchannel)
* [TikTok (@firefox)](https://www.tiktok.com/%40firefox)

[Donate](https://foundation.mozilla.org/?form=moco-donate-footer)

Visit [Mozilla Corporation’s](/en-US/) not-for-profit parent, the [Mozilla Foundation](https://foundation.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer).

Portions of this content are ©1998–2025 by individual mozilla.org contributors. Content available under a [Creative Commons license](/en-US/foundation/licensing/website-content/).

* [Website Privacy Notice](/en-US/privacy/websites/)
* [Cookies](/en-US/privacy/websites/cookie-settings/)
* [Legal](/en-US/about/legal/)
* [Community Participation Guidelines](/en-US/about/governance/policies/participation/)
* [About this site](/en-US/about/this-site/)

![](https://www.mozilla.org/media/img/logos/m24/wordmark-white.2d673bb5b33a.svg)



=== Content from bugzilla.mozilla.org_f38e98b2_20250125_034847.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/816994)
* [XML](/show_bug.cgi?ctype=xml&id=816994)

Closed
[Bug 816994](/show_bug.cgi?id=816994)

Opened 12 years ago
Closed 12 years ago

# Opus crash due to race [@opus\_multistream\_decode\_native]

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

Opus crash due to race [@opus\_multistream\_decode\_native]

## Categories

### (Core :: Audio/Video, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=Audio%2FVideo#Audio%2FVideo)

Audio/Video
▾

Core :: Audio/Video
For problems related to media (video/audio) -- especially when the reporter is not sure which area of the media stack the problem is in. This category will mostly be for untriaged video/audio issues. Bugs in this category will typically be moved to another media category during the triage process.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=Audio%2FVideo&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=Audio%2FVideo&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=Audio%2FVideo)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

x86\_64

All

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

critical

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla20

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Performance Impact | --- |
| --- | --- |
| Accessibility Severity | --- |
| Webcompat Score | --- |
| a11y-review | --- |
| Webcompat Priority | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox17 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox17&o1=equals&v1=wontfix) |
| firefox18 | [+](/buglist.cgi?f1=cf_tracking_firefox18&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=fixed) |
| firefox19 | [+](/buglist.cgi?f1=cf_tracking_firefox19&o1=equals&v1=%2B) | [verified](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=verified) |
| firefox20 | [+](/buglist.cgi?f1=cf_tracking_firefox20&o1=equals&v1=%2B) | [verified](/buglist.cgi?f1=cf_status_firefox20&o1=equals&v1=verified) |
| firefox-esr10 | --- | [unaffected](/buglist.cgi?f1=cf_status_esr10&o1=equals&v1=unaffected) |
| firefox-esr17 | [18+](/buglist.cgi?f1=cf_tracking_firefox_esr17&o1=equals&v1=18%2B) | [verified](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=verified) |
| b2g18 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=fixed) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox17 |  | wontfix |
| firefox18 | + | fixed |
| firefox19 | + | verified |
| firefox20 | + | verified |
| firefox-esr10 |  | unaffected |
| firefox-esr17 | 18+ | verified |
| b2g18 |  | fixed |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: posidron, Assigned: rillian)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/b13b00660f5b6351c2fbafb414f7a180?d=mm&size=40)  [rillian](/user_profile?user_id=170965)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

![](https://secure.gravatar.com/avatar/eae3698bd33e06ad8fb792ae7c6ffd5d?d=mm&size=40)  [u279076](/user_profile?user_id=279076)

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/9e7272cd8191f064be3b2b7dcd6a8903?d=mm&size=40)  [posidron](/user_profile?user_id=368570)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](extensions/Gravatar/web/default.jpg)  [jimm](/user_profile?user_id=279663)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

13 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[fuzzing-opus](/show_bug.cgi?id=750714 "RESOLVED FIXED - Fuzzing: Opus"), [817946](/show_bug.cgi?id=817946 "RESOLVED DUPLICATE - Something (double-free?) is causing libmozsqlite3.so to be a little too crashy")

Dependency [tree](/showdependencytree.cgi?id=816994&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=816994)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (4 keywords, Whiteboard: [adv-main18+][adv-esr17+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[crash](/buglist.cgi?keywords=crash&resolution=---),
[sec-critical](/buglist.cgi?keywords=sec-critical&resolution=---),
[testcase](/buglist.cgi?keywords=testcase&resolution=---),
[verifyme](/buglist.cgi?keywords=verifyme&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[adv-main18+][adv-esr17+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [rillian](/user_profile?user_id=170965) | [in-testsuite](#c48 "12 years ago") | - |
| --- | --- | --- |
| [rillian](/user_profile?user_id=170965) | in-testsuite | - |
| --- | --- | --- |
|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (6 files, 3 obsolete files)

| [testcase](/attachment.cgi?id=687099)  [12 years ago](#c0)  [Christoph Diehl [:posidron]](/user_profile?user_id=368570)   6.16 KB, audio/ogg |  | [Details](/attachment.cgi?id=687099&action=edit) |
| --- | --- | --- |
| [callstack](/attachment.cgi?id=687100)  [12 years ago](#c1)  [Christoph Diehl [:posidron]](/user_profile?user_id=368570)   4.91 KB, text/plain |  | [Details](/attachment.cgi?id=687100&action=edit) |
| [callstack\_crashreporter](/attachment.cgi?id=687102)  [12 years ago](#c2)  [Christoph Diehl [:posidron]](/user_profile?user_id=368570)   81.25 KB, text/plain |  | [Details](/attachment.cgi?id=687102&action=edit) |
| [testcase](/attachment.cgi?id=687183)  [12 years ago](#c4)  [Ralph Giles (:rillian)](/user_profile?user_id=170965)   6.16 KB, audio/ogg |  | [Details](/attachment.cgi?id=687183&action=edit) |
| [gc callstack](/attachment.cgi?id=688517)  [12 years ago](#c7)  [Ralph Giles (:rillian)](/user_profile?user_id=170965)   8.26 KB, text/plain |  | [Details](/attachment.cgi?id=688517&action=edit) |
| [Don't try to decode Opus packets larger than 120 ms](/attachment.cgi?id=690665)  [12 years ago](#c14)  [Timothy B. Terriberry (:derf)](/user_profile?user_id=12273)   1.53 KB, patch | rillian : [review+](#c16 "12 years ago") | [Details](/attachment.cgi?id=690665&action=edit) | [Diff](/attachment.cgi?id=690665&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=816994&attachment=690665) |
| [Reject packets with invalid lengths](/attachment.cgi?id=691018)  [12 years ago](#c24)  [Ralph Giles (:rillian)](/user_profile?user_id=170965)   1.89 KB, patch | derf : [review+](#c25 "12 years ago") | [Details](/attachment.cgi?id=691018&action=edit) | [Diff](/attachment.cgi?id=691018&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=816994&attachment=691018) |
| [Reject packets with invalid lengths](/attachment.cgi?id=691399)  [12 years ago](#c32)  [Ralph Giles (:rillian)](/user_profile?user_id=170965)   1.84 KB, patch | rillian : [review+](#c32 "12 years ago")  bajaj : [approval-mozilla-aurora+](#a1235395_448925 "12 years ago")  abillings : [sec-approval+](#a1227195_280903 "12 years ago") | [Details](/attachment.cgi?id=691399&action=edit) | [Diff](/attachment.cgi?id=691399&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=816994&attachment=691399) |
| [backport to earlier releases](/attachment.cgi?id=692455)  [12 years ago](#c38)  [Ralph Giles (:rillian)](/user_profile?user_id=170965)   1.85 KB, patch | bajaj : [approval-mozilla-beta+](#a1235416_448925 "12 years ago")  akeybl : [approval-mozilla-esr17+](#c42 "12 years ago") | [Details](/attachment.cgi?id=692455&action=edit) | [Diff](/attachment.cgi?id=692455&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=816994&attachment=692455) |

Show Obsolete

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Christoph Diehl [:posidron]](/user_profile?user_id=368570)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=816994#c0)• 12 years ago |
|  | |

Attached audio
[testcase](attachment.cgi?id=687099) (obsolete)
— [Details](attachment.cgi?id=687099&action=edit)

I am guessing that this crash is triggered by a race condition inside the media decoder state machine. To reproduce reload the testcase with cmd+r or f5 a few times. The crashing location will vary on each execution.
Tested with changeset: 114362:c63d5cff18ba

|  | [Christoph Diehl [:posidron]](/user_profile?user_id=368570)  Reporter |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=816994#c1)• 12 years ago |
|  | |

Attached file
[callstack](attachment.cgi?id=687100)
— [Details](attachment.cgi?id=687100&action=edit)

|  | [Christoph Diehl [:posidron]](/user_profile?user_id=368570)  Reporter |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=816994#c2)• 12 years ago |
|  | |

Attached file
[callstack\_crashreporter](attachment.cgi?id=687102)
— [Details](attachment.cgi?id=687102&action=edit)

|  | [Christoph Diehl [:posidron]](/user_profile?user_id=368570)  Reporter |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=816994#c3)• 12 years ago |
|  | |

Marked as s-s because I have seen ASan reporting heap-buffer-overflow signatures as well.

|  | [Ralph Giles (:rillian)](/user_profile?user_id=170965)  Assignee |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=816994#c4)• 12 years ago |
|  | |

Attached audio
[testcase](attachment.cgi?id=687183)
— [Details](attachment.cgi?id=687183&action=edit)

I ran the testcase through rogg\_crcfix so it fails without needing to patch out the libogg crc verification.
[Attachment #687099](/attachment.cgi?id=687099&action=edit "testcase") -
Attachment is obsolete: true

|  | [Josh Aas](/user_profile?user_id=18821) |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=816994#c5)• 12 years ago |
|  | |

Can we get an assignee here?

|  | [Timothy B. Terriberry (:derf)](/user_profile?user_id=12273) |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=816994#c6)• 12 years ago |
|  | |

I tried to reproduce this last week and failed, so assigning to rillian, who says he has managed to reproduce.Assignee: nobody → giles

|  | [Ralph Giles (:rillian)](/user_profile?user_id=170965)  Assignee |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=816994#c7)• 12 years ago |
|  | |

Attached file
[gc callstack](attachment.cgi?id=688517)
— [Details](attachment.cgi?id=688517&action=edit)

I can reproduce this easily with a normal build, no asan required, but I've not made much progress tracking this down. Here's another backtrace, from a segfault inside the garbage collector, in case that's helpful.
Any ideas how to pursue this?

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=816994#c8)• 12 years ago |
|  | |

Although this could be a more recent regression, for now I'm going to assume it's been there in Opus all along until we know better.
[status-firefox-esr10](/buglist.cgi?f1=cf_status_esr10&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_esr10&o1=equals&v1=unaffected)
[status-firefox17](/buglist.cgi?f1=cf_status_firefox17&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_firefox17&o1=equals&v1=wontfix)
[status-firefox18](/buglist.cgi?f1=cf_status_firefox18&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=affected)
[status-firefox19](/buglist.cgi?f1=cf_status_firefox19&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=affected)
[status-firefox20](/buglist.cgi?f1=cf_status_firefox20&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox20&o1=equals&v1=affected)
[status-firefox-esr17](/buglist.cgi?f1=cf_status_firefox_esr17&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=affected)
[tracking-firefox20](/buglist.cgi?f1=cf_tracking_firefox20&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox20&o1=equals&v1=%2B)

|  | [Ralph Giles (:rillian)](/user_profile?user_id=170965)  Assignee |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=816994#c9)• 12 years ago |
|  | |

That will speed up my bisection. Thanks!

|  | [Ralph Giles (:rillian)](/user_profile?user_id=170965)  Assignee |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=816994#c10)• 12 years ago |
|  | |

Oh, wait. Did you actually verify the problem, or just guess?

|  | [Ralph Giles (:rillian)](/user_profile?user_id=170965)  Assignee |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=816994#c11)• 12 years ago |
|  | |

I did a besection, just testing a normal build with the crc-fixed testcase, and hitting reload 10-20 times to see if I could get it to segfault. The first bad commit was:
commit d682b69bcedcbbf041e9a2ba67bed073736217da (git)
Author: Alexandros Chronopoulos <achronop@gmail.com>
Date: Thu Aug 9 15:53:23 2012 -0700
[Bug 748144](/show_bug.cgi?id=748144 "RESOLVED FIXED - Opus codec in <audio> and <video> should support multichannel audio") - Support multichannel Opus files. r=rillian
Which looks more helpful than I was expecting.

|  | [Ralph Giles (:rillian)](/user_profile?user_id=170965)  Assignee |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=816994#c12)• 12 years ago |
|  | |

Another variation of the crash:
-919025920[7fff9c009dc0]: 2e300d0 Decoder playing 960 frames of data to stream for AudioData at 396000
Assertion failure: addr % CellSize == 0, at /home/giles/mozilla/firefox/js/src/gc/Heap.h:819
Program received signal SIGSEGV, Segmentation fault.
0x00007ffff4922d45 in js::gc::Cell::address (this=0x7fff7800ada2)
at /home/giles/mozilla/firefox/js/src/gc/Heap.h:819
819 JS\_ASSERT(addr % CellSize == 0);
Missing separate debuginfos, use: debuginfo-install alsa-plugins-pulseaudio-1.0.26-1.fc17.x86\_64 gsm-1.0.13-6.fc17.x86\_64 json-c-0.9-4.fc17.x86\_64
(gdb) bt
#0 0x00007ffff4922d45 in js::gc::Cell::address (this=0x7fff7800ada2)
at /home/giles/mozilla/firefox/js/src/gc/Heap.h:819
#1 0x00007ffff4922daa in js::gc::Cell::arenaHeader (this=0x7fff7800ada2)
at /home/giles/mozilla/firefox/js/src/gc/Heap.h:935
#2 0x00007ffff4924c1c in js::gc::Cell::compartment (this=0x7fff7800ada2)
at /home/giles/mozilla/firefox/js/src/gc/Heap.h:980
#3 0x00007ffff4c6a8dd in CheckMarkedThing<JSString> (trc=0x7fffffff5050,
thing=0x7fff7800ada2)
at /home/giles/mozilla/firefox/js/src/gc/Marking.cpp:106
#4 0x00007ffff4c68da8 in MarkInternal<JSString> (trc=0x7fffffff5050, thingp=
0x7fffcaa17268) at /home/giles/mozilla/firefox/js/src/gc/Marking.cpp:145
#5 0x00007ffff4c68365 in MarkUnbarriered<JSString> (trc=0x7fffffff5050,
thingp=0x7fffcaa17268, name=0x7ffff56e0ce7 "left child")
at /home/giles/mozilla/firefox/js/src/gc/Marking.cpp:175
#6 0x00007ffff4c62b19 in js::gc::MarkStringUnbarriered (trc=0x7fffffff5050,
thingp=0x7fffcaa17268, name=0x7ffff56e0ce7 "left child")
at /home/giles/mozilla/firefox/js/src/gc/Marking.cpp:317
...

|  | [Ralph Giles (:rillian)](/user_profile?user_id=170965)  Assignee |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=816994#c13)• 12 years ago |
|  | |

Stack pointer seems to be getting corrupted somehow. When it crashes in the opus code, it's pretty commonly here:
614 ptr = (char\*)st + align(sizeof(OpusMSDecoder));
0x00007ffff43c68cd <+111>: mov $0x10c,%edi
=> 0x00007ffff43c68d2 <+116>: callq 0x7ffff43c53e8 <align>
and in some instances rsp points to unmapped memory, so the callq segfaults trying to push rip.

|  | [Timothy B. Terriberry (:derf)](/user_profile?user_id=12273) |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=816994#c14)• 12 years ago |
|  | |

Attached patch

[Don't try to decode Opus packets larger than 120 ms](attachment.cgi?id=690665&action=diff) (obsolete)
— [Details](attachment.cgi?id=690665&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=816994&attachment=690665)

(In reply to Ralph Giles (:rillian) from [comment #13](/show_bug.cgi?id=816994#c13 "VERIFIED FIXED - Opus crash due to race [@opus_multistream_decode_native]"))
> Stack pointer seems to be getting corrupted somehow. When it crashes in the
> opus code, it's pretty commonly here:
Okay, that was enough to start making some guesses. media/libopus/src/opus\_multistream.c:613 reads
ALLOC(buf, 2\*frame\_size, opus\_val16)
frame\_size is documented to have a maximum of 63\*2880 in nsOggReader::DecodeOpus() (and this documentation is correct). 2\*63\*2880\*sizeof(opus\_val16) (which in this case is float, since we're not using a fixed-point build) is 1,451,520 bytes, or 1.38 MB. Our media thread stacks are 128 kB. So that's a problem.
This is obviously ridiculous: 63\*2880 is 3.78 seconds of audio, and the maximum valid Opus packet size is 120 ms (giving a buffer size of 2\*5760\*4==45 kB here). It will get rejected by libopus later, but the damage to the stack has already been done.
The simple fix is to reject the packet earlier. The best place is before we allocate the buffer for the frame.
[Attachment #690665](/attachment.cgi?id=690665&action=edit "Don't try to decode Opus packets larger than 120 ms") -
Flags: review?(giles)

|  | [Timothy B. Terriberry (:derf)](/user_profile?user_id=12273) |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=816994#c15)• 12 years ago |
|  | |

Greenish on try: <https://tbpl.mozilla.org/?tree=Try&rev=9840e1d7fab9>

|  | [Ralph Giles (:rillian)](/user_profile?user_id=170965)  Assignee |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=816994#c16)• 12 years ago |
|  | |

Comment on [attachment 690665](/attachment.cgi?id=690665 "Don't try to decode Opus packets larger than 120 ms") [[details]](/attachment.cgi?id=690665&action=edit "Don't try to decode Opus packets larger than 120 ms") [[diff]](/attachment.cgi?id=690665&action=diff "Don't try to decode Opus packets larger than 120 ms") [[review]](/page.cgi?id=splinter.html&ignore=&bug=816994&attachment=690665)
Don't try to decode Opus packets larger than 120 ms
Review of [attachment 690665](/attachment.cgi?id=690665 "Don't try to decode Opus packets larger than 120 ms") [[details]](/attachment.cgi?id=690665&action=edit "Don't try to decode Opus packets larger than 120 ms") [[diff]](/attachment.cgi?id=690665&action=diff "Don't try to decode Opus packets larger than 120 ms") [[review]](/page.cgi?id=splinter.html&ignore=&bug=816994&attachment=690665):
-----------------------------------------------------------------
Thanks for your help with this, Tim. I'd seen the allocation was large, but didn't think about the thread's stack size being the problem.
Looks good to me, and I can't make it crash with this patch. Some comments below.
::: content/media/ogg/OggReader.cpp
@@ +424,5 @@
> int32\_t samples = opus\_packet\_get\_samples\_per\_frame(aPacket->packet,
> (opus\_int32) mOpusState->mRate);
> int32\_t frames = frames\_number\*samples;
>
> + // The maximum valid value is 5760 (120 ms).
I would be be more verbose here, e.g.
// Valid Opus packets must be no more than 120 ms,
// so reject any reporting more than 5760 samples.
@@ +425,5 @@
> (opus\_int32) mOpusState->mRate);
> int32\_t frames = frames\_number\*samples;
>
> + // The maximum valid value is 5760 (120 ms).
> + if (frames <= 0 || frames > 5760)
The <= zero check is an important guard for the subsequent allocation, and detects error returns from opus\_packet\_get\_nb\_frames, but I suppose we could tighten this to the minimum as well?
The minimum opus frame size is 2.5 ms, or 120 samples, so we could check for (frames < 120) instead.
Currently opus\_packet\_get\_samples\_per\_frame() will never return a negative, so checking for frames < 0 is sufficient to detect a failure. But, get\_nb\_frames only returns an error if the buffer is short, in which case the subsequent get\_samples\_per\_frame call could segfault reading the toc byte for the packetS o really we should check right immediately afterward.
[Attachment #690665](/attachment.cgi?id=690665&action=edit "Don't try to decode Opus packets larger than 120 ms") -
Flags: review?(giles) → review+

|  | [Ralph Giles (:rillian)](/user_profile?user_id=170965)  Assignee |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=816994#c17)• 12 years ago |
|  | |

Christoph, can you please confirm this fixes your original testcase?

|  | [Ralph Giles (:rillian)](/user_profile?user_id=170965)  Assignee |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=816994#c18)• 12 years ago |
|  | |

I believe I understand the crash in the opus code now, but I don't understand how this was causing the similar segfaults in js::gc. The jit does fancy things with the stack frames, but I would have thought the context switch in and out of the decode thread would just save and restore the invalid stack pointer without affecting other code.
Is it just that we managed to write into someone else's stack frame with our bogus pointer?

|  | [Ralph Giles (:rillian)](/user_profile?user_id=170965)  Assignee |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=816994#c19)• 12 years ago |
|  | |

Validated test case file on Fedora Linux 17 x86\_64 with official builds:
firefox-19.0a2: crashed
firefox-18.0b3: crashed
firefox-17.0.1: crashed
firefox-16.0.2: can't reproduce
Which is as expected. The call into the code with the stack overflow was added in ff17.
dveditz, why is firefox-17 wontfix? If we're indeed writing to the ionmonkey stack, couldn't this be exploitable?OS: Mac OS X → All

|  | [Christoph Diehl [:posidron]](/user_profile?user_id=368570)  Reporter |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=816994#c20)• 12 years ago |
|  | |

Have tested again with the applied patch but still crashes.

|  | [Ralph Giles (:rillian)](/user_profile?user_id=170965)  Assignee |  |
| --- | --- | --- |
| [Comment 21](/show_bug.cgi?id=816994#c21)• 12 years ago |
|  | |

(In reply to Christoph Diehl [:cdiehl] from [comment #20](/show_bug.cgi?id=816994#c20 "VERIFIED FIXED - Opus crash due to race [@opus_multistream_decode_native]"))
> Have tested again with the applied patch but still crashes.
Well, darn. We should still land Tim's fix though; that's a real bug.

|  | [Christoph Diehl [:posidron]](/user_profile?user_id=368570)  Reporter |  |
| --- | --- | --- |
| [Comment 22](/show_bug.cgi?id=816994#c22)• 12 years ago |
|  | |

I am terrible sorry, I thought doing 'make obj/content/media' was enough.
The patch does fix the problem.

|  | [Ralph Giles (:rillian)](/user_profile?user_id=170965)  Assignee |  |
| --- | --- | --- |
| [Comment 23](/show_bug.cgi?id=816994#c23)• 12 years ago |
|  | |

whew! thanks for retesting.

|  | [Ralph Giles (:rillian)](/user_profile?user_id=170965)  Assignee |  |
| --- | --- | --- |
| [Comment 24](/show_bug.cgi?id=816994#c24)• 12 years ago |
|  | |

Attached patch

[Reject packets with invalid lengths](attachment.cgi?id=691018&action=diff) (obsolete)
— [Details](attachment.cgi?id=691018&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=816994&attachment=691018)

Tim, here's a patch implementing my comments from #16. Let me know if you like it better.
[Attachment #691018](/attachment.cgi?id=691018&action=edit "Reject packets with invalid lengths") -
Flags: review?(tterribe)

|  | [Timothy B. Terriberry (:derf)](/user_profile?user_id=12273) |  |
| --- | --- | --- |
| [Comment 25](/show_bug.cgi?id=816994#c25)• 12 years ago |
|  | |

Comment on [attachment 691018](/attachment.cgi?id=691018 "Reject packets with invalid lengths") [[details]](/attachment.cgi?id=691018&action=edit "Reject packets with invalid lengths") [[diff]](/attachment.cgi?id=691018&action=diff "Reject packets with invalid lengths") [[review]](/page.cgi?id=splinter.html&ignore=&bug=816994&attachment=691018)
Reject packets with invalid lengths
Review of [attachment 691018](/attachment.cgi?id=691018 "Reject packets with invalid lengths") [[details]](/attachment.cgi?id=691018&action=edit "Reject packets with invalid lengths") [[diff]](/attachment.cgi?id=691018&action=diff "Reject packets with invalid lengths") [[review]](/page.cgi?id=splinter.html&ignore=&bug=816994&attachment=691018):
-----------------------------------------------------------------
(In reply to Ralph Giles (:rillian) from [comment #18](/show_bug.cgi?id=816994#c18 "VERIFIED FIXED - Opus crash due to race [@opus_multistream_decode_native]"))
> Is it just that we managed to write into someone else's stack frame with our
> bogus pointer?
That seems the most likely to me.
(In reply to Ralph Giles (:rillian) from [comment #19](/show_bug.cgi?id=816994#c19 "VERIFIED FIXED - Opus crash due to race [@opus_multistream_decode_native]"))
> dveditz, why is firefox-17 wontfix? If we're indeed writing to the ionmonkey
> stack, couldn't this be exploitable?
I think he just means that this should land on the ESR branch (once we request and get approval).
Anyway, patch LGTM.
::: content/media/ogg/OggReader.cpp
@@ +427,5 @@
> (opus\_int32) mOpusState->mRate);
> int32\_t frames = frames\_number\*samples;
>
> + // Valid Opus packets must be no shorter than 2.5 ms
> + // and no longer than 120 ms. Reject any reporting
It seems kind of odd to call out one case when we reject in two different cases.
[Attachment #691018](/attachment.cgi?id=691018&action=edit "Reject packets with invalid lengths") -
Flags: review?(tterribe) → review+

|  | [Timothy B. Terriberry (:derf)](/user_profile?user_id=12273) |  |
| --- | --- | --- |
| [Comment 26](/show_bug.cgi?id=816994#c26)• 12 years ago |
|  | |

(In reply to Ralph Giles (:rillian) from [comment #18](/show_bug.cgi?id=816994#c18 "VERIFIED FIXED - Opus crash due to race [@opus_multistream_decode_native]"))
> Currently opus\_packet\_get\_samples\_per\_frame() will never return a negative,
> so checking for frames < 0 is sufficient to detect a failure. But,
> get\_nb\_frames only returns an error if the buffer is short, in which case
> the subsequent get\_samples\_per\_frame call could segfault reading the toc
> byte for the packetS o really we should check right immediately afterward.
Good catch, BTW. I've known this in the half-dozen times I implemented this function (including GetOpusDeltaGP() in OggCodecState.cpp!), but managed to miss that here.

|  | [Ralph Giles (:rillian)](/user_profile?user_id=170965)  Assignee |  |
| --- | --- | --- |
| [Comment 27](/show_bug.cgi?id=816994#c27)• 12 years ago |
|  | |

Comment on [attachment 690665](/attachment.cgi?id=690665 "Don't try to decode Opus packets larger than 120 ms") [[details]](/attachment.cgi?id=690665&action=edit "Don't try to decode Opus packets larger than 120 ms") [[diff]](/attachment.cgi?id=690665&action=diff "Don't try to decode Opus packets larger than 120 ms") [[review]](/page.cgi?id=splinter.html&ignore=&bug=816994&attachment=690665)
Don't try to decode Opus packets larger than 120 ms
Marking obsolete in favour of the newer patch.
[Attachment #690665](/attachment.cgi?id=690665&action=edit "Don't try to decode Opus packets larger than 120 ms") -
Attachment is obsolete: true

|  | [Ralph Giles (:rillian)](/user_profile?user_id=170965)  Assignee |  |
| --- | --- | --- |
| [Comment 28](/show_bug.cgi?id=816994#c28)• 12 years ago |
|  | |

(In reply to Timothy B. Terriberry (:derf) from [comment #25](/show_bug.cgi?id=816994#c25 "VERIFIED FIXED - Opus crash due to race [@opus_multistream_decode_native]"))
> > + // Valid Opus packets must be no shorter than 2.5 ms
> > + // and no longer than 120 ms. Reject any reporting
>
> It seems kind of odd to call out one case when we reject in two different
> cases.
I don't understand what you mean here. I tried to describe both bounds checks.

|  | [Ralph Giles (:rillian)](/user_profile?user_id=170965)  Assignee |  |
| --- | --- | --- |
| [Comment 29](/show_bug.cgi?id=816994#c29)• 12 years ago |
|  | |

(In reply to Ralph Giles (:rillian) from [comment #28](/show_bug.cgi?id=816994#c28 "VERIFIED FIXED - Opus crash due to race [@opus_multistream_decode_native]"))
> I don't understand what you mean here. I tried to describe both bounds
> checks.
Oh, you meant the next line. Sorry. How about:
// Valid Opus packets must be no shorter than 2.5 ms
// and no longer than 120 ms. Reject any reporting
// a duration outside that range in samples.
Or is it clear enough without the second sentence?

|  | [Timothy B. Terriberry (:derf)](/user_profile?user_id=12273) |  |
| --- | --- | --- |
| [Comment 30](/show_bug.cgi?id=816994#c30)• 12 years ago |
|  | |

(In reply to Ralph Giles (:rillian) from [comment #29](/show_bug.cgi?id=816994#c29 "VERIFIED FIXED - Opus crash due to race [@opus_multistream_decode_native]"))
> Or is it clear enough without the second sentence?
Either way is fine.

|  | [Ralph Giles (:rillian)](/user_profile?user_id=170965)  Assignee |  |
| --- | --- | --- |
| [Comment 31](/show_bug.cgi?id=816994#c31)• 12 years ago |
|  | |

clear try <https://tbpl.mozilla.org/?tree=Try&rev=edc54ecea8c1>

|  | [Ralph Giles (:rillian)](/user_profile?user_id=170965)  Assignee |  |
| --- | --- | --- |
| [Comment 32](/show_bug.cgi?id=816994#c32)• 12 years ago |
|  | |

Attached patch

[Reject packets with invalid lengths](attachment.cgi?id=691399&action=diff)
— [Details](attachment.cgi?id=691399&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=816994&attachment=691399)

Updated patch with improved comments. Carrying forward previous r+.
[Attachment #691018](/attachment.cgi?id=691018&action=edit "Reject packets with invalid lengths") -
Attachment is obsolete: true
[Attachment #691399](/attachment.cgi?id=691399&action=edit "Reject packets with invalid lengths") -
Flags: review+

|  | [Ralph Giles (:rillian)](/user_profile?user_id=170965)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=816994#a1042882_170965)• 12 years ago |

Keywords: [checkin-needed](/buglist.cgi?keywords=checkin-needed&resolution=---)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 33](/show_bug.cgi?id=816994#c33)• 12 years ago |
|  | |

Before this lands, be sure to ask for sec-approval on the patch and, ideally, I think we'd want branch patches for affected versions depending on the risk involved in taking it.

|  | [Ralph Giles (:rillian)](/user_profile?user_id=170965)  Assignee |  |
| --- | --- | --- |
| [Comment 34](/show_bug.cgi?id=816994#c34)• 12 years ago |
|  | |

Thanks for the reminder.Keywords: [checkin-needed](/buglist.cgi?keywords=checkin-needed&resolution=---)

|  | [Ralph Giles (:rillian)](/user_profile?user_id=170965)  Assignee |  |
| --- | --- | --- |
| [Comment 35](/show_bug.cgi?id=816994#c35)• 12 years ago |
|  | |

Comment on [attachment 691399](/attachment.cgi?id=691399 "Reject packets with invalid lengths") [[details]](/attachment.cgi?id=691399&action=edit "Reject packets with invalid lengths") [[diff]](/attachment.cgi?id=691399&action=diff "Reject packets with invalid lengths") [[review]](/page.cgi?id=splinter.html&ignore=&bug=816994&attachment=691399)
Reject packets with invalid lengths
[Security approval request comment]
> How easily can the security issue be deduced from the patch?
The patch doesn't refer to the stack overflow, it just describes rejecting packets with invalid header data. There's also a reference to a potential--but non-exploitable--heap segfault fix which could mislead an attacker.
> Do comments in the patch, the check-in comment, or tests included in the patch paint a bulls-eye on the security problem?
We are limiting the return values we use from a fairly simple function, so someone digging deeper could see what part of the data to play with mutating. I don't think that qualifies as a bulls-eye though; the stack overflow happens away from the site of this change.
> Which older supported branches are affected by this flaw?
Supported branches back to Firefox 17 are affected, when this code initially landed.
> If not all supported branches, which bug introduced the flaw?
[Bug 748144](/show_bug.cgi?id=748144 "RESOLVED FIXED - Opus codec in <audio> and <video> should support multichannel audio").
> Do you have backports for the affected branches? If not, how different, hard to create, and risky will they be?
I can post backports. They're straightforward; the code itself hasn't changed, but the enclosing class and file names have, so the patch must be adapted to that.
> How likely is this patch to cause regressions; how much testing does it need?
Risk of causing other problems is low. The patch simply rejects invalid data earlier in the parsing sequence.
To verify, check that the testcase from this bug does not crash the browser, and that the content/media/test/test\_playback.html mochitest still passes.
[Attachment #691399](/attachment.cgi?id=691399&action=edit "Reject packets with invalid lengths") -
Flags: sec-approval?

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=816994#a1227195_280903)• 12 years ago |

[Attachment #691399](/attachment.cgi?id=691399&action=edit "Reject packets with invalid lengths") -
Flags: sec-approval? → sec-approval+

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 36](/show_bug.cgi?id=816994#c36)• 12 years ago |
|  | |

I'm giving this sec-approval+ for central. We should prepare branch patches and nominate them. I'm cc'ing release management so they can decide when they want to take this on what branches.
[tracking-firefox18](/buglist.cgi?f1=cf_tracking_firefox18&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox18&o1=equals&v1=%3F)
[tracking-firefox19](/buglist.cgi?f1=cf_tracking_firefox19&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox19&o1=equals&v1=%3F)
[tracking-firefox-esr17](/buglist.cgi?f1=cf_tracking_firefox_esr17&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox_esr17&o1=equals&v1=%3F)

|  | [Ralph Giles (:rillian)](/user_profile?user_id=170965)  Assignee |  |
| --- | --- | --- |
| [Comment 37](/show_bug.cgi?id=816994#c37)• 12 years ago |
|  | |

Comment on [attachment 691399](/attachment.cgi?id=691399 "Reject packets with invalid lengths") [[details]](/attachment.cgi?id=691399&action=edit "Reject packets with invalid lengths") [[diff]](/attachment.cgi?id=691399&action=diff "Reject packets with invalid lengths") [[review]](/page.cgi?id=splinter.html&ignore=&bug=816994&attachment=691399)
Reject packets with invalid lengths
Patch applies unmodified to the Aurora tree.
[Approval Request Comment]
Bug caused by (feature/regressing bug #): [Bug 748144](/show_bug.cgi?id=748144 "RESOLVED FIXED - Opus codec in <audio> and <video> should support multichannel audio").
User impact if declined:
Users will be exposed to a security issue: crashes possibly exploitable by malicious web content.
Testing completed (on m-c, etc.):
Passes try push on m-c. Verified patch fixes the crash on aurora.
Risk to taking this patch (and alternatives if risky):
Risk is low. The patch merely rejects invalid data earlier in the parsing sequence.
String or UUID changes made by this patch:
No changes, only interior code is affected.
[Attachment #691399](/attachment.cgi?id=691399&action=edit "Reject packets with invalid lengths") -
Flags: approval-mozilla-aurora?

|  | [Ralph Giles (:rillian)](/user_profile?user_id=170965)  Assignee |  |
| --- | --- | --- |
| [Comment 38](/show_bug.cgi?id=816994#c38)• 12 years ago |
|  | |

Attached patch

[backport to earlier releases](attachment.cgi?id=692455&action=diff)
— [Details](attachment.cgi?id=692455&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=816994&attachment=692455)

Backported to Firefox 18 (current beta tree). This is the same code change, just updated for enclosing class and filename changes.
[Approval Request Comment]
> Bug caused by (feature/regressing bug #):
[Bug 748144](/show_bug.cgi?id=748144 "RESOLVED FIXED - Opus codec in <audio> and <video> should support multichannel audio").
> User impact if declined:
Users will be exposed to a security issue: crashes possibly exploitable by malicious web content.
> Testing completed (on m-c, etc.):
Passes try push on m-c. Verified patch fixes the crash on beta.
> Risk to taking this patch (and alternatives if risky):
Risk is low. The patch merely rejects invalid data earlier in the parsing sequence.
> String or UUID changes made by this patch:
No changes, only interior code is affected.
[Attachment #692455](/attachment.cgi?id=692455&action=edit "backport to earlier releases") -
Flags: approval-mozilla-beta?

|  | [bhavana bajaj [:bajaj]](/user_profile?user_id=448925) |  |
| --- | --- | --- |
| [Comment 39](/show_bug.cgi?id=816994#c39)• 12 years ago |
|  | |

Approving patch for aurora/beta as it is low risk.Juan, can you please help with some testing here around opus/ogg to verify this patch ?

|  | [bhavana bajaj [:bajaj]](/user_profile?user_id=448925) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=816994#a1235375_448925)• 12 years ago |

QA Contact: jbecerra

|  | [bhavana bajaj [:bajaj]](/user_profile?user_id=448925) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=816994#a1235395_448925)• 12 years ago |

[Attachment #691399](/attachment.cgi?id=691399&action=edit "Reject packets with invalid lengths") -
Flags: approval-mozilla-aurora? → approval-mozilla-aurora+

|  | [bhavana bajaj [:bajaj]](/user_profile?user_id=448925) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=816994#a1235416_448925)• 12 years ago |

[Attachment #692455](/attachment.cgi?id=692455&action=edit "backport to earlier releases") -
Flags: approval-mozilla-beta? → approval-mozilla-beta+

|  | [bhavana bajaj [:bajaj]](/user_profile?user_id=448925) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=816994#a1235437_448925)• 12 years ago |

Keywords: [qawanted](/buglist.cgi?keywords=qawanted&resolution=---),
[verifyme](/buglist.cgi?keywords=verifyme&resolution=---)

|  | [bhavana bajaj [:bajaj]](/user_profile?user_id=448925) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=816994#a1235482_448925)• 12 years ago |

[tracking-firefox18](/buglist.cgi?f1=cf_tracking_firefox18&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox18&o1=equals&v1=%3F) → [+](/buglist.cgi?f1=cf_tracking_firefox18&o1=equals&v1=%2B)
[tracking-firefox19](/buglist.cgi?f1=cf_tracking_firefox19&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox19&o1=equals&v1=%3F) → [+](/buglist.cgi?f1=cf_tracking_firefox19&o1=equals&v1=%2B)

|  | [Ralph Giles (:rillian)](/user_profile?user_id=170965)  Assignee |  |
| --- | --- | --- |
| [Comment 40](/show_bug.cgi?id=816994#c40)• 12 years ago |
|  | |

Thanks bajaj, Juan.

|  | [Ralph Giles (:rillian)](/user_profile?user_id=170965)  Assignee |  |
| --- | --- | --- |
| [Comment 41](/show_bug.cgi?id=816994#c41)• 12 years ago |
|  | |

Comment on [attachment 692455](/attachment.cgi?id=692455 "backport to earlier releases") [[details]](/attachment.cgi?id=692455&action=edit "backport to earlier releases") [[diff]](/attachment.cgi?id=692455&action=diff "backport to earlier releases") [[review]](/page.cgi?id=splinter.html&ignore=&bug=816994&attachment=692455)
backport to earlier releases
This bug also affects Firefox 17. The ff18 patch applies to the esr17 branch and I've verified it resolves the issue and that the content/media mochitests are unaffected in my local testing.
[Approval Request Comment]
> If this is not a sec:{high,crit} bug, please state case for ESR consideration:
This is a sec-critical bug.
> User impact if declined:
Users will be exposed to crashes possibly exploitable by malicious web content.
> Fix Landed on Version:
We have approval for m-c, aurora, and beta. Waiting for coordination with release management before landing anywhere.
> Risk to taking this patch (and alternatives if risky):
Risk is low. The patch merely rejects invalid data earlier in the parsing sequence.
> String or UUID changes made by this patch:
No changes, only interior code is affected.
See <https://wiki.mozilla.org/Release_Management/ESR_Landing_Process> for more info.
[Attachment #692455](/attachment.cgi?id=692455&action=edit "backport to earlier releases") -
Flags: approval-mozilla-esr17?

|  | [Alex Keybl [:akeybl]](/user_profile?user_id=425645) |  |
| --- | --- | --- |
| [Comment 42](/show_bug.cgi?id=816994#c42)• 12 years ago |
|  | |

Comment on [attachment 692455](/attachment.cgi?id=692455 "backport to earlier releases") [[details]](/attachment.cgi?id=692455&action=edit "backport to earlier releases") [[diff]](/attachment.cgi?id=692455&action=diff "backport to earlier releases") [[review]](/page.cgi?id=splinter.html&ignore=&bug=816994&attachment=692455)
backport to earlier releases
Feel free to land to all branches given your testing. QA will continue to test opus/ogg in parallel to beta 5, but we don't need to block the landing on this testing.
[Attachment #692455](/attachment.cgi?id=692455&action=edit "backport to earlier releases") -
Flags: approval-mozilla-esr17? → approval-mozilla-esr17+

|  | [u279076](/user_profile?user_id=279076) |  |
| --- | --- | --- |
| [Comment 43](/show_bug.cgi?id=816994#c43)• 12 years ago |
|  | |

I've spoken with Alex and Ralph about this bug and the feeling is that the risk to uplifting this to ESR is low. My suggestion is that QA coordinates exploratory testing around Opus in Beta5. If we find any issues, we can always backout of ESR and Beta at that time. However that remains a very low risk.

|  | [u279076](/user_profile?user_id=279076) |  |
| --- | --- | --- |
| [Comment 44](/show_bug.cgi?id=816994#c44)• 12 years ago |
|  | |

Taking QA Contact so I can coordinate some Opus testing.QA Contact: jbecerra → anthony.s.hughes

|  | [Christoph Diehl [:posidron]](/user_profile?user_id=368570)  Reporter |  |
| --- | --- | --- |
| [Comment 45](/show_bug.cgi?id=816994#c45)• 12 years ago |
|  | |

Btw.
It runs and will run also as a fuzzing job on my private and our future cloud servers.

|  | [Ralph Giles (:rillian)](/user_profile?user_id=170965)  Assignee |  |
| --- | --- | --- |
| [Comment 46](/show_bug.cgi?id=816994#c46)• 12 years ago |
|  | |

Thanks everyone.Keywords: [checkin-needed](/buglist.cgi?keywords=checkin-needed&resolution=---)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 47](/show_bug.cgi?id=816994#c47)• 12 years ago |
|  | |

<https://hg.mozilla.org/integration/mozilla-inbound/rev/746f31757355>
Once this hits m-c, it can be uplifted to the release branches.Flags: in-testsuite?Keywords: [checkin-needed](/buglist.cgi?keywords=checkin-needed&resolution=---)

|  | [Ralph Giles (:rillian)](/user_profile?user_id=170965)  Assignee |  |
| --- | --- | --- |
| [Comment 48](/show_bug.cgi?id=816994#c48)• 12 years ago |
|  | |

Since the crash isn't reliable I don't think I can make a useful testsuite entry for it. The steps to reproduce in the description are the best way to verify the bug.Flags: in-testsuite? → in-testsuite-

|  | [Ed Morley [:emorley]](/user_profile?user_id=373476) |  |
| --- | --- | --- |
| [Comment 49](/show_bug.cgi?id=816994#c49)• 12 years ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/746f31757355>Status: NEW → RESOLVEDClosed: 12 years ago
[status-firefox20](/buglist.cgi?f1=cf_status_firefox20&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox20&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox20&o1=equals&v1=fixed)Resolution: --- → FIXEDTarget Milestone: --- → mozilla20

|  | [u279076](/user_profile?user_id=279076) |  |
| --- | --- | --- |
| [Comment 50](/show_bug.cgi?id=816994#c50)• 12 years ago |
|  | |

Looks like this got approval for Beta but didn't land in time. Can we make sure it gets landed for Beta 6?

|  | [Ralph Giles (:rillian)](/user_profile?user_id=170965)  Assignee |  |
| --- | --- | --- |
| [Comment 51](/show_bug.cgi?id=816994#c51)• 12 years ago |
|  | |

I think we were waiting for inbound to cycle into nightly. What's the cut-off date for Beta 6?

|  | [Ralph Giles (:rillian)](/user_profile?user_id=170965)  Assignee |  |
| --- | --- | --- |
| [Comment 52](/show_bug.cgi?id=816994#c52)• 12 years ago |
|  | |

After consultation with bajaj, the plan is to review this for beta6 in tomorrow's triage, and then land or not based on the decision there.
I'll go ahead and push to aurora.

|  | [Ralph Giles (:rillian)](/user_profile?user_id=170965)  Assignee |  |
| --- | --- | --- |
| [Comment 53](/show_bug.cgi?id=816994#c53)• 12 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-aurora/rev/76f0542c5ee9>

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=816994#a1678430_75935)• 12 years ago |

[status-firefox19](/buglist.cgi?f1=cf_status_firefox19&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=fixed)

|  | [u279076](/user_profile?user_id=279076) |  |
| --- | --- | --- |
| [Comment 54](/show_bug.cgi?id=816994#c54)• 12 years ago |
|  | |

Dropping qawanted since there's nothing for us to investigate. Will continue to track for verification.Keywords: [qawanted](/buglist.cgi?keywords=qawanted&resolution=---)

|  | [Ralph Giles (:rillian)](/user_profile?user_id=170965)  Assignee |  |
| --- | --- | --- |
| [Comment 55](/show_bug.cgi?id=816994#c55)• 12 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-beta/rev/a3e6bd7f9736>
[status-firefox18](/buglist.cgi?f1=cf_status_firefox18&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=fixed)

|  | [Ralph Giles (:rillian)](/user_profile?user_id=170965)  Assignee |  |
| --- | --- | --- |
| [Comment 56](/show_bug.cgi?id=816994#c56)• 12 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-esr17/rev/fd5e61ad71da>
[status-firefox18](/buglist.cgi?f1=cf_status_firefox18&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=fixed) → [affected](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=affected)
[status-firefox19](/buglist.cgi?f1=cf_status_firefox19&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=fixed) → [affected](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=affected)
[status-firefox20](/buglist.cgi?f1=cf_status_firefox20&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox20&o1=equals&v1=fixed) → [affected](/buglist.cgi?f1=cf_status_firefox20&o1=equals&v1=affected)
[status-firefox-esr17](/buglist.cgi?f1=cf_status_firefox_esr17&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=fixed)
[tracking-firefox18](/buglist.cgi?f1=cf_tracking_firefox18&o1=isnotempty):
[+](/buglist.cgi?f1=cf_tracking_firefox18&o1=equals&v1=%2B) → ---
[tracking-firefox19](/buglist.cgi?f1=cf_tracking_firefox19&o1=isnotempty):
[+](/buglist.cgi?f1=cf_tracking_firefox19&o1=equals&v1=%2B) → ---
[tracking-firefox-esr17](/buglist.cgi?f1=cf_tracking_firefox_esr17&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox_esr17&o1=equals&v1=%3F) → ---Target Milestone: mozilla20 → ---

|  | [Ralph Giles (:rillian)](/user_profile?user_id=170965)  Assignee |  |
| --- | --- | --- |
| [Comment 57](/show_bug.cgi?id=816994#c57)• 12 years ago |
|  | |

I...have no idea how I messed up the flags on this bug. I thought I just set status-firefox-esr17 to fixed.
I've put back what I can, but I don't seem to have an option to set the tracking flags for ff18 and ff19 to '+'.
[status-firefox18](/buglist.cgi?f1=cf_status_firefox18&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=fixed)
[status-firefox19](/buglist.cgi?f1=cf_status_firefox19&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=fixed)
[status-firefox20](/buglist.cgi?f1=cf_status_firefox20&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox20&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox20&o1=equals&v1=fixed)
[tracking-firefox18](/buglist.cgi?f1=cf_tracking_firefox18&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox18&o1=equals&v1=%3F)
[tracking-firefox19](/buglist.cgi?f1=cf_tracking_firefox19&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox19&o1=equals&v1=%3F)
[tracking-firefox-esr17](/buglist.cgi?f1=cf_tracking_firefox_esr17&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox_esr17&o1=equals&v1=%3F)Target Milestone: --- → mozilla20

|  | [bhavana bajaj [:bajaj]](/user_profile?user_id=448925) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=816994#a1759400_448925)• 12 years ago |

[tracking-firefox18](/buglist.cgi?f1=cf_tracking_firefox18&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox18&o1=equals&v1=%3F) → [+](/buglist.cgi?f1=cf_tracking_firefox18&o1=equals&v1=%2B)
[tracking-firefox19](/buglist.cgi?f1=cf_tracking_firefox19&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox19&o1=equals&v1=%3F) → [+](/buglist.cgi?f1=cf_tracking_firefox19&o1=equals&v1=%2B)
[tracking-firefox-esr17](/buglist.cgi?f1=cf_tracking_firefox_esr17&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox_esr17&o1=equals&v1=%3F) → [18+](/buglist.cgi?f1=cf_tracking_firefox_esr17&o1=equals&v1=18%2B)

|  | [u279076](/user_profile?user_id=279076) |  |
| --- | --- | --- |
| [Comment 58](/show_bug.cgi?id=816994#c58)• 12 years ago |
|  | |

(In reply to Christoph Diehl [:cdiehl] from [comment #0](/show_bug.cgi?id=816994#c0 "VERIFIED FIXED - Opus crash due to race [@opus_multistream_decode_native]"))
> Created [attachment 687099](/attachment.cgi?id=687099 "testcase") [[details]](/attachment.cgi?id=687099&action=edit "testcase")
> testcase
Testcase failed to crash the following builds:
\* Firefox Nightly 20.0a1 2012-12-21
\* Firefox Aurora 19.0a2 2012-12-21
\* Firefox 17.0.1esrpre 2012-12-21
Will need to wait for 18.0b6 builds next week to verify for Fx18.Status: RESOLVED → VERIFIED
[status-firefox19](/buglist.cgi?f1=cf_status_firefox19&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=verified)
[status-firefox20](/buglist.cgi?f1=cf_status_firefox20&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox20&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox20&o1=equals&v1=verified)
[status-firefox-esr17](/buglist.cgi?f1=cf_status_firefox_esr17&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=verified)

|  | [David Baron :dbaron: (⌚️UTC-4, no longer working on Mozilla)](/user_profile?user_id=3881) |  |
| --- | --- | --- |
| [Comment 59](/show_bug.cgi?id=816994#c59)• 12 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-b2g18/rev/a3e6bd7f9736>
[status-b2g18](/buglist.cgi?f1=cf_status_b2g18&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_b2g18&o1=equals&v1=fixed)

|  | [Chris Jones [:cjones] inactive; ni?/f?/r? if you need me](/user_profile?user_id=336288) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=816994#a1854848_336288)• 12 years ago |

Blocks: [817946](/show_bug.cgi?id=817946 "RESOLVED DUPLICATE - Something (double-free?) is causing libmozsqlite3.so to be a little too crashy")

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=816994#a2881230_280903)• 12 years ago |

Whiteboard: [adv-main18+][adv-esr17+]

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=816994#a13081376_1689)• 12 years ago |

Group: core-security
You need to [log in](/show_bug.cgi?id=816994&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Christoph Diehl [:posidron]](/user_profile?user_id=368570)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from lists.opensuse.org_6fdf4cdc_20250125_034828.html ===


[![openSUSE](https://static.opensuse.org/favicon.svg)
Mailing Lists](/archives/ "openSUSE Mailing Lists")

[Sign In](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/QH4KWAEL3OVAD5Z2OSLTFSWAHESDWTWO/)
[Sign Up](/accounts/signup/?next=/archives/list/security-announce%40lists.opensuse.org/message/QH4KWAEL3OVAD5Z2OSLTFSWAHESDWTWO/)

[Manage this list](/manage/lists/security-announce.lists.opensuse.org/)
[Sign In](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/QH4KWAEL3OVAD5Z2OSLTFSWAHESDWTWO/)
[Sign Up](/accounts/signup/?next=/archives/list/security-announce%40lists.opensuse.org/message/QH4KWAEL3OVAD5Z2OSLTFSWAHESDWTWO/)

×
#### Keyboard Shortcuts

### Thread View

* `j`: Next unread message
* `k`: Previous unread message
* `j a`: Jump to all threads* `j l`: Jump to MailingList overview

[thread](/archives/list/security-announce%40lists.opensuse.org/thread/QH4KWAEL3OVAD5Z2OSLTFSWAHESDWTWO/#QH4KWAEL3OVAD5Z2OSLTFSWAHESDWTWO)

# [security-announce] SUSE-SU-2013:0049-1: important: Security update for MozillaFirefox

![](https://seccdn.libravatar.org/avatar/099a17325bdf082b643d1a6bbacde279.jpg?s=120&d=mm&r=g)
## [opensuse-security＠opensuse.org](/archives/users/1b72def497ef4503896cd7a5fe9fb8e0/ "See the profile for opensuse-security＠opensuse.org")

18 Jan
2013

18 Jan
'13

19:04

...
> ) o Bill Gianopoulos, Benoit Jacob, Christoph Diehl,
> Christian Holler, Gary Kwong, Robert O'Callahan, and
> Scoobidiver reported memory safety problems and crashes
> that affect Firefox ESR 17 and Firefox 17. (CVE-2013-0749
> <<http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-0749>
> ) o Jesse Ruderman, Christian Holler, Julian Seward, and
> Scoobidiver reported memory safety problems and crashes
> that affect Firefox 17. (CVE-2013-0770
> <<http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-0770>
> )

SUSE Security Update: Security update for MozillaFirefox
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
Announcement ID: SUSE-SU-2013:0049-1
Rating: important
References: #796628 #796895
Affected Products:
SUSE Linux Enterprise Server 10 SP4
SUSE Linux Enterprise Desktop 10 SP4
SLE SDK 10 SP4
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
An update that contains security fixes can now be
installed. It includes two new package versions.
Description:
Mozilla Firefox was updated to the 10.0.12ESR release.
\*
MFSA 2013-01: Mozilla developers identified and fixed
several memory safety bugs in the browser engine used in
Firefox and other Mozilla-based products. Some of these
bugs showed evidence of memory corruption under certain
circumstances, and we presume that with enough effort at
least some of these could be exploited to run arbitrary
code.
o Christoph Diehl, Christian Holler, Mats
Palmgren, and Chiaki Ishikawa reported memory safety
problems and crashes that affect Firefox ESR 10, Firefox
ESR 17, and Firefox 17. ( CVE-2013-0769
<<http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-0769>
\*
MFSA 2013-02: Security researcher Abhishek Arya
(Inferno) of the Google Chrome Security Team discovered a
series critically rated of use-after-free, out of bounds
read, and buffer overflow issues using the Address
Sanitizer tool in shipped software. These issues are
potentially exploitable, allowing for remote code
execution. We would also like to thank Abhishek for
reporting three additional user-after-free and out of
bounds read flaws introduced during Firefox development
that were fixed before general release.
The following issue was fixed in Firefox 18:
o Global-buffer-overflow in
CharDistributionAnalysis::HandleOneChar (CVE-2013-0760
<<http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-0760>

...
> )

The following issues were fixed in Firefox 18, ESR
17.0.1, and ESR 10.0.12:
o Heap-use-after-free in imgRequest::OnStopFrame
(CVE-2013-0762
<<http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-0762>

...
> ) o Heap-use-after-free in ~nsHTMLEditRules
> (CVE-2013-0766
> <<http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-0766>
> ) o Out of bounds read in
> nsSVGPathElement::GetPathLengthScale ( CVE-2013-0767
> <<http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-0767>
> )

The following issues were fixed in Firefox 18 and ESR
17.0.1:
o Heap-use-after-free in
mozilla::TrackUnionStream::EndTrack ( CVE-2013-0761
<<http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-0761>

...
> ) o Heap-use-after-free in Mesa, triggerable by resizing
> a WebGL canvas (CVE-2013-0763
> <<http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-0763>
> ) o Heap-buffer-overflow in
> gfxTextRun::ShrinkToLigatureBoundaries (CVE-2013-0771
> <<http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-0771>
> )

...
> )

The following issue was fixed in Firefox 18 and in
the earlier ESR 10.0.11 release:
o Heap-buffer-overflow in nsWindow::OnExposeEvent
(CVE-2012-5829
<<http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2012-5829>
\*
MFSA 2013-03: Security researcher miaubiz used the
Address Sanitizer tool to discover a buffer overflow in
Canvas when specific bad height and width values were given
through HTML. This could lead to a potentially exploitable
crash. (CVE-2013-0768
<<http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-0768>

...
> )

Miaubiz also found a potentially exploitable crash
when 2D and 3D content was mixed which was introduced
during Firefox development and fixed before general release.
\*
MFSA 2013-04: Security researcher Masato Kinugawa
found a flaw in which the displayed URL values within the
addressbar can be spoofed by a page during loading. This
allows for phishing attacks where a malicious page can
spoof the identify of another site. ( CVE-2013-0759
<<http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-0759>

...
> )

\*
MFSA 2013-05: Using the Address Sanitizer tool,
security researcher Atte Kettunen from OUSPG discovered
that the combination of large numbers of columns and column
groups in a table could cause the array containing the
columns during rendering to overwrite itself. This can lead
to a user-after-free causing a potentially exploitable
crash. ( CVE-2013-0744
<<http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-0744>

...
> )

\*
MFSA 2013-06: Mozilla developer Wesley Johnston
reported that when there are two or more iframes on the
same HTML page, an iframe is able to see the touch events
and their targets that occur within the other iframes on
the page. If the iframes are from the same origin, they can
also access the properties and methods of the targets of
other iframes but same-origin policy (SOP) restricts access
across domains. This allows for information leakage and
possibilities for cross-site scripting (XSS) if another
vulnerability can be used to get around SOP restrictions.
(CVE-2013-0751
<<http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-0751>

...
> )

\*
MFSA 2013-07: Mozilla community member Jerry Baker
reported a crashing issue found through Thunderbird when
downloading messages over a Secure Sockets Layer (SSL)
connection. This was caused by a bug in the networking code
assuming that secure connections were entirely handled on
the socket transport thread when they can occur on a
variety of threads. The resulting crash was potentially
exploitable. (CVE-2013-0764
<<http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-0764>

...
> )

\*
MFSA 2013-08: Mozilla developer Olli Pettay
discovered that the AutoWrapperChanger class fails to keep
some javascript objects alive during garbage collection.
This can lead to an exploitable crash allowing for
arbitrary code execution. (CVE-2013-0745
<<http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-0745>

...
> )

\*
MFSA 2013-09: Mozilla developer Boris Zbarsky
reported reported a problem where jsval-returning
quickstubs fail to wrap their return values, causing a
compartment mismatch. This mismatch can cause garbage
collection to occur incorrectly and lead to a potentially
exploitable crash. (CVE-2013-0746
<<http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-0746>

...
> )

\*
MFSA 2013-10: Mozilla security researcher Jesse
Ruderman reported that events in the plugin handler can be
manipulated by web content to bypass same-origin policy
(SOP) restrictions. This can allow for clickjacking on
malicious web pages. (CVE-2013-0747
<<http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-0747>

...
> )

\*
MFSA 2013-11: Mozilla security researcher Jesse
Ruderman discovered that using the toString function of XBL
objects can lead to inappropriate information leakage by
revealing the address space layout instead of just the ID
of the object. This layout information could potentially be
used to bypass ASLR and other security protections.
(CVE-2013-0748
<<http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-0748>

...
> )

\*
MFSA 2013-12: Security researcher pa\_kt reported a
flaw via TippingPoint's Zero Day Initiative that an integer
overflow is possible when calculating the length for a
Javascript string concatenation, which is then used for
memory allocation. This results in a buffer overflow,
leading to a potentially exploitable memory corruption.
(CVE-2013-0750
<<http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-0750>

...
> )

\*
MFSA 2013-13: Security researcher Sviatoslav Chagaev
reported that when using an XBL file containing multiple
XML bindings with SVG content, a memory corruption can
occur. In concern with remote XUL, this can lead to an
exploitable crash. (CVE-2013-0752
<<http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-0752>

...
> )

\*
MFSA 2013-14: Security researcher Mariusz Mlynski
reported that it is possible to change the prototype of an
object and bypass Chrome Object Wrappers (COW) to gain
access to chrome privileged functions. This could allow for
arbitrary code execution. (CVE-2013-0757
<<http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-0757>

...
> )

\*
MFSA 2013-15: Security researcher Mariusz Mlynski
reported that it is possible to open a chrome privileged
web page through plugin objects through interaction with
SVG elements. This could allow for arbitrary code
execution. (CVE-2013-0758
<<http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-0758>

...
> )

\*
MFSA 2013-16: Security researcher regenrecht
reported, via TippingPoint's Zero Day Initiative, a
use-after-free in XMLSerializer by the exposing of
serializeToStream to web content. This can lead to
arbitrary code execution when exploited. (CVE-2013-0753
<<http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-0753>

...
> )

\*
MFSA 2013-17: Security researcher regenrecht
reported, via TippingPoint's Zero Day Initiative, a
use-after-free within the ListenerManager when garbage
collection is forced after data in listener objects have
been allocated in some circumstances. This results in a
use-after-free which can lead to arbitrary code execution.
(CVE-2013-0754
<<http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-0754>

...
> )

\*
MFSA 2013-18: Security researcher regenrecht
reported, via TippingPoint's Zero Day Initiative, a
use-after-free using the domDoc pointer within Vibrate
library. This can lead to arbitrary code execution when
exploited. (CVE-2013-0755
<<http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-0755>

...
> )

\*
MFSA 2013-19: Security researcher regenrecht
reported, via TippingPoint's Zero Day Initiative, a garbage
collection flaw in Javascript Proxy objects. This can lead
to a use-after-free leading to arbitrary code execution.
(CVE-2013-0756
<<http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-0756>

...
> )

\*
MFSA 2013-20: Google reported to Mozilla that
TURKTRUST, a certificate authority in Mozilla's root
program, had mis-issued two intermediate certificates to
customers. The issue was not specific to Firefox but there
was evidence that one of the certificates was used for
man-in-the-middle (MITM) traffic management of domain names
that the customer did not legitimately own or control. This
issue was resolved by revoking the trust for these specific
mis-issued certificates. (CVE-2013-0743
<<http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-0743>

...
> )

Package List:
- SUSE Linux Enterprise Server 10 SP4 (i586 ia64 ppc s390x x86\_64) [New Version: 3.14.1 and 4.9.4]:
mozilla-nspr-4.9.4-0.6.1
mozilla-nspr-devel-4.9.4-0.6.1
mozilla-nss-3.14.1-0.6.1
mozilla-nss-devel-3.14.1-0.6.1
mozilla-nss-tools-3.14.1-0.6.1
- SUSE Linux Enterprise Server 10 SP4 (i586 ia64 ppc s390x):
MozillaFirefox-10.0.12-0.6.1
MozillaFirefox-translations-10.0.12-0.6.1
- SUSE Linux Enterprise Server 10 SP4 (s390x x86\_64) [New Version: 3.14.1 and 4.9.4]:
mozilla-nspr-32bit-4.9.4-0.6.1
mozilla-nss-32bit-3.14.1-0.6.1
- SUSE Linux Enterprise Server 10 SP4 (ia64) [New Version: 3.14.1 and 4.9.4]:
mozilla-nspr-x86-4.9.4-0.6.1
mozilla-nss-x86-3.14.1-0.6.1
- SUSE Linux Enterprise Server 10 SP4 (ppc) [New Version: 3.14.1 and 4.9.4]:
mozilla-nspr-64bit-4.9.4-0.6.1
mozilla-nss-64bit-3.14.1-0.6.1
- SUSE Linux Enterprise Desktop 10 SP4 (i586 x86\_64) [New Version: 3.14.1 and 4.9.4]:
mozilla-nspr-4.9.4-0.6.1
mozilla-nspr-devel-4.9.4-0.6.1
mozilla-nss-3.14.1-0.6.1
mozilla-nss-devel-3.14.1-0.6.1
mozilla-nss-tools-3.14.1-0.6.1
- SUSE Linux Enterprise Desktop 10 SP4 (x86\_64) [New Version: 3.14.1 and 4.9.4]:
mozilla-nspr-32bit-4.9.4-0.6.1
mozilla-nss-32bit-3.14.1-0.6.1
- SUSE Linux Enterprise Desktop 10 SP4 (i586):
MozillaFirefox-10.0.12-0.6.1
MozillaFirefox-translations-10.0.12-0.6.1
- SLE SDK 10 SP4 (i586 ia64 ppc s390x x86\_64) [New Version: 3.14.1]:
mozilla-nss-tools-3.14.1-0.6.1
- SLE SDK 10 SP4 (i586 ia64 ppc s390x):
MozillaFirefox-branding-upstream-10.0.12-0.6.1
References:
<https://bugzilla.novell.com/796628>
<https://bugzilla.novell.com/796895>
[http://download.novell.com/patch/finder/?keywords=dbe0a7820fa20c51a9e400f8a2...](http://download.novell.com/patch/finder/?keywords=dbe0a7820fa20c51a9e400f8a2814641)
--
To unsubscribe, e-mail: opensuse-security-announce+unsubscribe@opensuse.org
For additional commands, e-mail: opensuse-security-announce+help@opensuse.org

[0](#like "You must be logged-in to vote.")
[0](#dislike "You must be logged-in to vote.")

Reply

[Sign in to reply online](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/QH4KWAEL3OVAD5Z2OSLTFSWAHESDWTWO/)
Use email software

[Back to the thread](/archives/list/security-announce%40lists.opensuse.org/thread/QH4KWAEL3OVAD5Z2OSLTFSWAHESDWTWO/#QH4KWAEL3OVAD5Z2OSLTFSWAHESDWTWO)

[Back to the list](/archives/list/security-announce%40lists.opensuse.org/)

![HyperKitty](/static/hyperkitty/img/logo.png)
Powered by [HyperKitty](http://hyperkitty.readthedocs.org) version 1.3.12.



=== Content from bugzilla.mozilla.org_c19c4849_20250125_034842.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/812847)
* [XML](/show_bug.cgi?ctype=xml&id=812847)

Closed
[Bug 812847](/show_bug.cgi?id=812847)

Opened 12 years ago
Closed 12 years ago

# Opus heap-buffer-overflow crash [@opus\_multistream\_decoder\_init]

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

Opus heap-buffer-overflow crash [@opus\_multistream\_decoder\_init]

## Categories

### (Core :: Audio/Video, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=Audio%2FVideo#Audio%2FVideo)

Audio/Video
▾

Core :: Audio/Video
For problems related to media (video/audio) -- especially when the reporter is not sure which area of the media stack the problem is in. This category will mostly be for untriaged video/audio issues. Bugs in this category will typically be moved to another media category during the triage process.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=Audio%2FVideo&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=Audio%2FVideo&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=Audio%2FVideo)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

All

All

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

critical

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla20

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Accessibility Severity | --- |
| --- | --- |
| Performance Impact | --- |
| Webcompat Score | --- |
| a11y-review | --- |
| Webcompat Priority | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox16 | --- | [unaffected](/buglist.cgi?f1=cf_status_firefox16&o1=equals&v1=unaffected) |
| firefox17 | --- | [affected](/buglist.cgi?f1=cf_status_firefox17&o1=equals&v1=affected) |
| firefox18 | [+](/buglist.cgi?f1=cf_tracking_firefox18&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=fixed) |
| firefox19 | [+](/buglist.cgi?f1=cf_tracking_firefox19&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=fixed) |
| firefox20 | --- | [fixed](/buglist.cgi?f1=cf_status_firefox20&o1=equals&v1=fixed) |
| firefox-esr10 | --- | [unaffected](/buglist.cgi?f1=cf_status_esr10&o1=equals&v1=unaffected) |
| firefox-esr17 | [18+](/buglist.cgi?f1=cf_tracking_firefox_esr17&o1=equals&v1=18%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=fixed) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox16 |  | unaffected |
| firefox17 |  | affected |
| firefox18 | + | fixed |
| firefox19 | + | fixed |
| firefox20 |  | fixed |
| firefox-esr10 |  | unaffected |
| firefox-esr17 | 18+ | fixed |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: posidron, Assigned: derf)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/89961d436f7cf3d3e5ed59de93b30746?d=mm&size=40)  [derf](/user_profile?user_id=12273)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/9e7272cd8191f064be3b2b7dcd6a8903?d=mm&size=40)  [posidron](/user_profile?user_id=368570)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](extensions/Gravatar/web/default.jpg)  [jimm](/user_profile?user_id=279663)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

6 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[fuzzing-opus](/show_bug.cgi?id=750714 "RESOLVED FIXED - Fuzzing: Opus")

[748144](/show_bug.cgi?id=748144 "RESOLVED FIXED - Opus codec in <audio> and <video> should support multichannel audio")

Dependency [tree](/showdependencytree.cgi?id=812847&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=812847)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (4 keywords, Whiteboard: [adv-main18+][adv-esr17+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[crash](/buglist.cgi?keywords=crash&resolution=---),
[csectype-bounds](/buglist.cgi?keywords=csectype-bounds&resolution=---),
[sec-critical](/buglist.cgi?keywords=sec-critical&resolution=---),
[testcase](/buglist.cgi?keywords=testcase&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[adv-main18+][adv-esr17+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [derf](/user_profile?user_id=12273) | [in-testsuite](#a223269_12273 "12 years ago") | + |
| --- | --- | --- |
| [derf](/user_profile?user_id=12273) | in-testsuite | + |
| --- | --- | --- |
|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (6 files, 3 obsolete files)

| [testcase](/attachment.cgi?id=682838)  [12 years ago](#c0)  [Christoph Diehl [:posidron]](/user_profile?user_id=368570)   5.86 KB, audio/ogg |  | [Details](/attachment.cgi?id=682838&action=edit) |
| --- | --- | --- |
| [callstack](/attachment.cgi?id=682839)  [12 years ago](#c1)  [Christoph Diehl [:posidron]](/user_profile?user_id=368570)   8.27 KB, text/plain |  | [Details](/attachment.cgi?id=682839&action=edit) |
| [Validate Opus channel count](/attachment.cgi?id=682844)  [12 years ago](#c2)  [Timothy B. Terriberry (:derf)](/user_profile?user_id=12273)   2.90 KB, patch |  | [Details](/attachment.cgi?id=682844&action=edit) | [Diff](/attachment.cgi?id=682844&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=812847&attachment=682844) |
| [Validate Opus channel count v2](/attachment.cgi?id=682845)  [12 years ago](#c3)  [Timothy B. Terriberry (:derf)](/user_profile?user_id=12273)   3.02 KB, patch | kinetik : [review+](#a14605_274575 "12 years ago") | [Details](/attachment.cgi?id=682845&action=edit) | [Diff](/attachment.cgi?id=682845&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=812847&attachment=682845) |
| [Validate Opus channel count v2 (rebased for m-a and m-b)](/attachment.cgi?id=682988)  [12 years ago](#c5)  [Timothy B. Terriberry (:derf)](/user_profile?user_id=12273)   3.03 KB, patch | derf : [review+](#c5 "12 years ago")  akeybl : [approval-mozilla-aurora+](#a320184_425645 "12 years ago")  akeybl : [approval-mozilla-beta+](#a320184_425645 "12 years ago")  abillings : [sec-approval+](#c10 "12 years ago") | [Details](/attachment.cgi?id=682988&action=edit) | [Diff](/attachment.cgi?id=682988&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=812847&attachment=682988) |
| [Validate Opus channel count v2 (rebased for esr17)](/attachment.cgi?id=682992)  [12 years ago](#c6)  [Timothy B. Terriberry (:derf)](/user_profile?user_id=12273)   3.03 KB, patch | derf : [review+](#c6 "12 years ago")  akeybl : [approval-mozilla-esr17+](#a320190_425645 "12 years ago") | [Details](/attachment.cgi?id=682992&action=edit) | [Diff](/attachment.cgi?id=682992&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=812847&attachment=682992) |
| [test files to verify the new header checks](/attachment.cgi?id=683375)  [12 years ago](#c9)  [Ralph Giles (:rillian)](/user_profile?user_id=170965)   72.69 KB, patch |  | [Details](/attachment.cgi?id=683375&action=edit) | [Diff](/attachment.cgi?id=683375&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=812847&attachment=683375) |
| [Add a mochitest to guard regressions](/attachment.cgi?id=683467)  [12 years ago](#c11)  [Ralph Giles (:rillian)](/user_profile?user_id=170965)   72.36 KB, patch | kinetik : [review+](#c13 "12 years ago") | [Details](/attachment.cgi?id=683467&action=edit) | [Diff](/attachment.cgi?id=683467&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=812847&attachment=683467) |
| [Add mochitest to guard regressions](/attachment.cgi?id=683657)  [12 years ago](#c14)  [Ralph Giles (:rillian)](/user_profile?user_id=170965)   72.32 KB, patch | rillian : [review+](#c14 "12 years ago")  derf : [checkin+](#c15 "12 years ago") | [Details](/attachment.cgi?id=683657&action=edit) | [Diff](/attachment.cgi?id=683657&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=812847&attachment=683657) |

Show Obsolete

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Christoph Diehl [:posidron]](/user_profile?user_id=368570)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=812847#c0)• 12 years ago |
|  | |

Attached audio
[testcase](attachment.cgi?id=682838)
— [Details](attachment.cgi?id=682838&action=edit)

media/libopus/src/opus\_multistream.c:537
st->layout.nb\_channels = channels;
We see the following warning before the crash:
WARNING: Opus end trimming removed more than a full packet.: file /Users/cdiehl/Code/Mozilla/mc-asan-opt/content/media/ogg/OggCodecState.cpp, line 1147
Tested with m-c changeset: 113558:9a6d708faf3f

|  | [Christoph Diehl [:posidron]](/user_profile?user_id=368570)  Reporter |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=812847#c1)• 12 years ago |
|  | |

Attached file
[callstack](attachment.cgi?id=682839)
— [Details](attachment.cgi?id=682839&action=edit)

|  | [Timothy B. Terriberry (:derf)](/user_profile?user_id=12273)  Assignee |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=812847#c2)• 12 years ago |
|  | |

Attached patch

[Validate Opus channel count](attachment.cgi?id=682844&action=diff) (obsolete)
— [Details](attachment.cgi?id=682844&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=812847&attachment=682844)

Assignee: nobody → tterribeStatus: NEW → ASSIGNED
[Attachment #682844](/attachment.cgi?id=682844&action=edit "Validate Opus channel count") -
Flags: review?(kinetik)

|  | [Timothy B. Terriberry (:derf)](/user_profile?user_id=12273)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=812847#a5828_12273)• 12 years ago |

Blocks: [748144](/show_bug.cgi?id=748144 "RESOLVED FIXED - Opus codec in <audio> and <video> should support multichannel audio")
[status-firefox-esr10](/buglist.cgi?f1=cf_status_esr10&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_esr10&o1=equals&v1=unaffected)
[status-firefox16](/buglist.cgi?f1=cf_status_firefox16&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_firefox16&o1=equals&v1=unaffected)
[status-firefox17](/buglist.cgi?f1=cf_status_firefox17&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox17&o1=equals&v1=affected)
[status-firefox18](/buglist.cgi?f1=cf_status_firefox18&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=affected)
[status-firefox19](/buglist.cgi?f1=cf_status_firefox19&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=affected)
[status-firefox-esr17](/buglist.cgi?f1=cf_status_firefox_esr17&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=affected)

|  | [Timothy B. Terriberry (:derf)](/user_profile?user_id=12273)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=812847#a5962_12273)• 12 years ago |

OS: Mac OS X → AllHardware: x86\_64 → All

|  | [Timothy B. Terriberry (:derf)](/user_profile?user_id=12273)  Assignee |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=812847#c3)• 12 years ago |
|  | |

Attached patch

[Validate Opus channel count v2](attachment.cgi?id=682845&action=diff)
— [Details](attachment.cgi?id=682845&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=812847&attachment=682845)

Oops, forgot to qref.
[Attachment #682844](/attachment.cgi?id=682844&action=edit "Validate Opus channel count") -
Attachment is obsolete: true
[Attachment #682844](/attachment.cgi?id=682844&action=edit "Validate Opus channel count") -
Flags: review?(kinetik)
[Attachment #682845](/attachment.cgi?id=682845&action=edit "Validate Opus channel count v2") -
Flags: review?(kinetik)

|  | [Matthew Gregan [:kinetik]](/user_profile?user_id=274575) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=812847#a14605_274575)• 12 years ago |

[Attachment #682845](/attachment.cgi?id=682845&action=edit "Validate Opus channel count v2") -
Flags: review?(kinetik) → review+

|  | [Timothy B. Terriberry (:derf)](/user_profile?user_id=12273)  Assignee |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=812847#c4)• 12 years ago |
|  | |

Try run: <https://tbpl.mozilla.org/?tree=Try&rev=45902212727d>
<https://hg.mozilla.org/mozilla-central/rev/0ef0c9db3b2b>Status: ASSIGNED → RESOLVEDClosed: 12 years ago
[status-firefox19](/buglist.cgi?f1=cf_status_firefox19&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox19&o1=equals&v1=fixed)Resolution: --- → FIXED

|  | [Timothy B. Terriberry (:derf)](/user_profile?user_id=12273)  Assignee |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=812847#c5)• 12 years ago |
|  | |

Attached patch

[Validate Opus channel count v2 (rebased for m-a and m-b)](attachment.cgi?id=682988&action=diff)
— [Details](attachment.cgi?id=682988&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=812847&attachment=682988)

This patch is identical to the prior one, except that it applies to nsOggCodecState.cpp instead of OggCodecState.cpp, since the former was renamed in [bug 811381](/show_bug.cgi?id=811381 "RESOLVED FIXED - Remove ns prefix from media code"). Carrying forward r=kinetik.
[Approval Request Comment]
Bug caused by (feature/regressing bug #): 748144
User impact if declined: Specially crafted files can trigger a buffer overflow that writes attacker-controlled values into the heap.
Testing completed (on m-c, etc.): Passes try, and now on m-c.
Risk to taking this patch (and alternatives if risky): Low. Only affects Opus file playback, and can only increase the number of files we refuse to play (all of which should be invalid files to begin with).
String or UUID changes made by this patch: None.
[Attachment #682988](/attachment.cgi?id=682988&action=edit "Validate Opus channel count v2 (rebased for m-a and m-b)") -
Flags: review+
[Attachment #682988](/attachment.cgi?id=682988&action=edit "Validate Opus channel count v2 (rebased for m-a and m-b)") -
Flags: approval-mozilla-beta?
[Attachment #682988](/attachment.cgi?id=682988&action=edit "Validate Opus channel count v2 (rebased for m-a and m-b)") -
Flags: approval-mozilla-aurora?

|  | [Timothy B. Terriberry (:derf)](/user_profile?user_id=12273)  Assignee |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=812847#c6)• 12 years ago |
|  | |

Attached patch

[Validate Opus channel count v2 (rebased for esr17)](attachment.cgi?id=682992&action=diff)
— [Details](attachment.cgi?id=682992&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=812847&attachment=682992)

This patch is identical to the aurora/beta one, except that one line of diff context was changed. Carrying forward r=kinetik.
[Approval Request Comment]
If this is not a sec:{high,crit} bug, please state case for ESR consideration: This is a sec:crit bug.
User impact if declined: Specially crafted files can trigger a buffer overflow that writes attacker-controlled values into the heap.
Fix Landed on Version: firefox19
Risk to taking this patch (and alternatives if risky): Low. Only affects Opus file playback, and can only increase the number of files we refuse to play (all of which should be invalid files to begin with).
String or UUID changes made by this patch: None.
[Attachment #682992](/attachment.cgi?id=682992&action=edit "Validate Opus channel count v2 (rebased for esr17)") -
Flags: review+
[Attachment #682992](/attachment.cgi?id=682992&action=edit "Validate Opus channel count v2 (rebased for esr17)") -
Flags: approval-mozilla-esr17?

|  | [Timothy B. Terriberry (:derf)](/user_profile?user_id=12273)  Assignee |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=812847#c7)• 12 years ago |
|  | |

Comment on [attachment 682988](/attachment.cgi?id=682988 "Validate Opus channel count v2 (rebased for m-a and m-b)") [[details]](/attachment.cgi?id=682988&action=edit "Validate Opus channel count v2 (rebased for m-a and m-b)") [[diff]](/attachment.cgi?id=682988&action=diff "Validate Opus channel count v2 (rebased for m-a and m-b)") [[review]](/page.cgi?id=splinter.html&ignore=&bug=812847&attachment=682988)
Validate Opus channel count v2 (rebased for m-a and m-b)
[Security approval request comment]
How easily can the security issue be deduced from the patch?
That there is a problem can be deduced fairly easily. What the exact problem is requires more knowledge of the code. It is easy to mistake this for an issue with the multichannel downmixing code (which would just be an invalid read from the static const downmixing matrices).
Discovering the actual issue requires knowing that opus\_multistream\_encoder\_get\_size() will return 0 when its arguments fail validation, and that jemalloc will successfully return a non-NULL pointer of a 0-byte allocation, which will then pass the NULL check in opus\_multistream\_encoder\_create(), and cause it to try to write into the 0-byte buffer.
Do comments in the patch, the check-in comment, or tests included in the patch paint a bulls-eye on the security problem?
No.
Which older supported branches are affected by this flaw?
aurora, beta, and esr17.
If not all supported branches, which bug introduced the flaw?
[Bug 748114](/show_bug.cgi?id=748114 "RESOLVED FIXED - Read localization files asynchronously").
Do you have backports for the affected branches? If not, how different, hard to create, and risky will they be?
Yes.
How likely is this patch to cause regressions; how much testing does it need?
Unlikely to cause regressions. It rejects strictly more files than before as invalid, and has been tested not to reject previously valid files. Current automated tests should suffice for the latter.
[Attachment #682988](/attachment.cgi?id=682988&action=edit "Validate Opus channel count v2 (rebased for m-a and m-b)") -
Flags: sec-approval?

|  | [Ralph Giles (:rillian)](/user_profile?user_id=170965) |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=812847#c8)• 12 years ago |
|  | |

Tim has asked me to make make testcases to verify the fix doesn't regress.Status: RESOLVED → REOPENEDResolution: FIXED → ---

|  | [Ralph Giles (:rillian)](/user_profile?user_id=170965) |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=812847#c9)• 12 years ago |
|  | |

Attached patch

[test files to verify the new header checks](attachment.cgi?id=683375&action=diff) (obsolete)
— [Details](attachment.cgi?id=683375&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=812847&attachment=683375)

Work in progress. The files should verify all the new checks added by the patch against ff19. Mochitest wrapper isn't working yet.

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=812847#c10)• 12 years ago |
|  | |

Comment on [attachment 682988](/attachment.cgi?id=682988 "Validate Opus channel count v2 (rebased for m-a and m-b)") [[details]](/attachment.cgi?id=682988&action=edit "Validate Opus channel count v2 (rebased for m-a and m-b)") [[diff]](/attachment.cgi?id=682988&action=diff "Validate Opus channel count v2 (rebased for m-a and m-b)") [[review]](/page.cgi?id=splinter.html&ignore=&bug=812847&attachment=682988)
Validate Opus channel count v2 (rebased for m-a and m-b)
sec-approval+
[Attachment #682988](/attachment.cgi?id=682988&action=edit "Validate Opus channel count v2 (rebased for m-a and m-b)") -
Flags: sec-approval? → sec-approval+

|  | [Ralph Giles (:rillian)](/user_profile?user_id=170965) |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=812847#c11)• 12 years ago |
|  | |

Attached patch

[Add a mochitest to guard regressions](attachment.cgi?id=683467&action=diff) (obsolete)
— [Details](attachment.cgi?id=683467&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=812847&attachment=683467)

Regression test is working now, and ready for review.
[Attachment #683375](/attachment.cgi?id=683375&action=edit "test files to verify the new header checks") -
Attachment is obsolete: true
[Attachment #683467](/attachment.cgi?id=683467&action=edit "Add a mochitest to guard regressions") -
Flags: review?(kinetik)

|  | [Matthew Gregan [:kinetik]](/user_profile?user_id=274575) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=812847#c12)• 12 years ago |
|  | |

(In reply to Ralph Giles (:rillian) from [comment #11](/show_bug.cgi?id=812847#c11 "RESOLVED FIXED - Opus heap-buffer-overflow crash [@opus_multistream_decoder_init]"))
> Created [attachment 683467](/attachment.cgi?id=683467 "Add a mochitest to guard regressions") [[details]](/attachment.cgi?id=683467&action=edit "Add a mochitest to guard regressions") [[diff]](/attachment.cgi?id=683467&action=diff "Add a mochitest to guard regressions") [[review]](/page.cgi?id=splinter.html&ignore=&bug=812847&attachment=683467)
> Add a mochitest to guard regressions
>
> Regression test is working now, and ready for review.
Try push: <https://tbpl.mozilla.org/?tree=Try&rev=c529b92abd52>

|  | [Matthew Gregan [:kinetik]](/user_profile?user_id=274575) |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=812847#c13)• 12 years ago |
|  | |

Comment on [attachment 683467](/attachment.cgi?id=683467 "Add a mochitest to guard regressions") [[details]](/attachment.cgi?id=683467&action=edit "Add a mochitest to guard regressions") [[diff]](/attachment.cgi?id=683467&action=diff "Add a mochitest to guard regressions") [[review]](/page.cgi?id=splinter.html&ignore=&bug=812847&attachment=683467)
Add a mochitest to guard regressions
Review of [attachment 683467](/attachment.cgi?id=683467 "Add a mochitest to guard regressions") [[details]](/attachment.cgi?id=683467&action=edit "Add a mochitest to guard regressions") [[diff]](/attachment.cgi?id=683467&action=diff "Add a mochitest to guard regressions") [[review]](/page.cgi?id=splinter.html&ignore=&bug=812847&attachment=683467):
-----------------------------------------------------------------
::: content/media/test/test\_invalid\_reject.html
@@ +17,5 @@
> + var v = document.createElement('video');
> + v.token = token;
> + manager.started(token);
> +
> + v.name = test.name;
Nit: I don't think v.name and v.token are used anywhere.
[Attachment #683467](/attachment.cgi?id=683467&action=edit "Add a mochitest to guard regressions") -
Flags: review?(kinetik) → review+

|  | [Ralph Giles (:rillian)](/user_profile?user_id=170965) |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=812847#c14)• 12 years ago |
|  | |

Attached patch

[Add mochitest to guard regressions](attachment.cgi?id=683657&action=diff)
— [Details](attachment.cgi?id=683657&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=812847&attachment=683657)

Try push is green, one unrelated orange on Linux, and tests are running, except on arm where we don't run media tests.
Updating patch to address nits, Carrying forward previous r+. Ready to land.
[Attachment #683467](/attachment.cgi?id=683467&action=edit "Add a mochitest to guard regressions") -
Attachment is obsolete: true
[Attachment #683657](/attachment.cgi?id=683657&action=edit "Add mochitest to guard regressions") -
Flags: review+

|  | [Ralph Giles (:rillian)](/user_profile?user_id=170965) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=812847#a222750_170965)• 12 years ago |

Keywords: [checkin-needed](/buglist.cgi?keywords=checkin-needed&resolution=---)

|  | [Timothy B. Terriberry (:derf)](/user_profile?user_id=12273)  Assignee |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=812847#c15)• 12 years ago |
|  | |

Comment on [attachment 683657](/attachment.cgi?id=683657 "Add mochitest to guard regressions") [[details]](/attachment.cgi?id=683657&action=edit "Add mochitest to guard regressions") [[diff]](/attachment.cgi?id=683657&action=diff "Add mochitest to guard regressions") [[review]](/page.cgi?id=splinter.html&ignore=&bug=812847&attachment=683657)
Add mochitest to guard regressions
<https://hg.mozilla.org/integration/mozilla-inbound/rev/18201f6cee4c>
[Attachment #683657](/attachment.cgi?id=683657&action=edit "Add mochitest to guard regressions") -
Flags: checkin+

|  | [Timothy B. Terriberry (:derf)](/user_profile?user_id=12273)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=812847#a223269_12273)• 12 years ago |

Flags: in-testsuite+

|  | [Ralph Giles (:rillian)](/user_profile?user_id=170965) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=812847#a223678_170965)• 12 years ago |

Keywords: [checkin-needed](/buglist.cgi?keywords=checkin-needed&resolution=---)

|  | [Alex Keybl [:akeybl]](/user_profile?user_id=425645) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=812847#a226956_425645)• 12 years ago |

[tracking-firefox18](/buglist.cgi?f1=cf_tracking_firefox18&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox18&o1=equals&v1=%2B)
[tracking-firefox19](/buglist.cgi?f1=cf_tracking_firefox19&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox19&o1=equals&v1=%2B)
[tracking-firefox-esr17](/buglist.cgi?f1=cf_tracking_firefox_esr17&o1=isnotempty):
--- → [18+](/buglist.cgi?f1=cf_tracking_firefox_esr17&o1=equals&v1=18%2B)

|  | [Ralph Giles (:rillian)](/user_profile?user_id=170965) |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=812847#c16)• 12 years ago |
|  | |

(In reply to Ralph Giles (:rillian) from [comment #14](/show_bug.cgi?id=812847#c14 "RESOLVED FIXED - Opus heap-buffer-overflow crash [@opus_multistream_decoder_init]"))
> except on arm where we don't run media tests.
I was incorrect here. Ted tells me the mochitest-<n> mechanism divides tests by index, not by directory, and the arm runs use more bins. Many of the media tests are run on arm, there's just part of mochitest-2, which wasn't part of the try push. Fortunately they were green on the inbound push.

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=812847#c17)• 12 years ago |
|  | |

(In reply to Timothy B. Terriberry (:derf) from [comment #15](/show_bug.cgi?id=812847#c15 "RESOLVED FIXED - Opus heap-buffer-overflow crash [@opus_multistream_decoder_init]"))
> Comment on [attachment 683657](/attachment.cgi?id=683657 "Add mochitest to guard regressions") [[details]](/attachment.cgi?id=683657&action=edit "Add mochitest to guard regressions") [[diff]](/attachment.cgi?id=683657&action=diff "Add mochitest to guard regressions") [[review]](/page.cgi?id=splinter.html&ignore=&bug=812847&attachment=683657)
> Add mochitest to guard regressions
>
> <https://hg.mozilla.org/integration/mozilla-inbound/rev/18201f6cee4c>
<https://hg.mozilla.org/mozilla-central/rev/18201f6cee4c>

|  | [Timothy B. Terriberry (:derf)](/user_profile?user_id=12273)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=812847#a255235_12273)• 12 years ago |

Status: REOPENED → RESOLVEDClosed: 12 years ago → 12 years agoResolution: --- → FIXED

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=812847#a255311_75935)• 12 years ago |

[status-firefox20](/buglist.cgi?f1=cf_status_firefox20&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_firefox20&o1=equals&v1=fixed)Target Milestone: --- → mozilla20

|  | [Alex Keybl [:akeybl]](/user_profile?user_id=425645) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=812847#a320184_425645)• 12 years ago |

[Attachment #682988](/attachment.cgi?id=682988&action=edit "Validate Opus channel count v2 (rebased for m-a and m-b)") -
Flags: approval-mozilla-beta?
[Attachment #682988](/attachment.cgi?id=682988&action=edit "Validate Opus channel count v2 (rebased for m-a and m-b)") -
Flags: approval-mozilla-beta+
[Attachment #682988](/attachment.cgi?id=682988&action=edit "Validate Opus channel count v2 (rebased for m-a and m-b)") -
Flags: approval-mozilla-aurora?
[Attachment #682988](/attachment.cgi?id=682988&action=edit "Validate Opus channel count v2 (rebased for m-a and m-b)") -
Flags: approval-mozilla-aurora+

|  | [Alex Keybl [:akeybl]](/user_profile?user_id=425645) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=812847#a320190_425645)• 12 years ago |

[Attachment #682992](/attachment.cgi?id=682992&action=edit "Validate Opus channel count v2 (rebased for esr17)") -
Flags: approval-mozilla-esr17? → approval-mozilla-esr17+

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=812847#c18)• 12 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-beta/rev/0996d275581d>
<https://hg.mozilla.org/releases/mozilla-esr17/rev/1a9a28682df6>
I'm assuming we'll want to uplift the tests at some point too.
[status-firefox18](/buglist.cgi?f1=cf_status_firefox18&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox18&o1=equals&v1=fixed)
[status-firefox-esr17](/buglist.cgi?f1=cf_status_firefox_esr17&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox_esr17&o1=equals&v1=fixed)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=812847#a3959830_280903)• 12 years ago |

Whiteboard: [adv-main18+][adv-esr17+]

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=812847#a14159733_1689)• 12 years ago |

Group: core-security

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=812847#a127415533_1689)• 8 years ago |

Keywords: [csectype-bounds](/buglist.cgi?keywords=csectype-bounds&resolution=---)
You need to [log in](/show_bug.cgi?id=812847&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Christoph Diehl [:posidron]](/user_profile?user_id=368570)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from lists.opensuse.org_ca6a0baf_20250125_034828.html ===


[![openSUSE](https://static.opensuse.org/favicon.svg)
Mailing Lists](/archives/ "openSUSE Mailing Lists")

[Sign In](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/WHILK22YMT7URJEJKNHFQIE2P45MRS4C/)
[Sign Up](/accounts/signup/?next=/archives/list/security-announce%40lists.opensuse.org/message/WHILK22YMT7URJEJKNHFQIE2P45MRS4C/)

[Manage this list](/manage/lists/security-announce.lists.opensuse.org/)
[Sign In](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/WHILK22YMT7URJEJKNHFQIE2P45MRS4C/)
[Sign Up](/accounts/signup/?next=/archives/list/security-announce%40lists.opensuse.org/message/WHILK22YMT7URJEJKNHFQIE2P45MRS4C/)

×
#### Keyboard Shortcuts

### Thread View

* `j`: Next unread message
* `k`: Previous unread message
* `j a`: Jump to all threads* `j l`: Jump to MailingList overview

[thread](/archives/list/security-announce%40lists.opensuse.org/thread/WHILK22YMT7URJEJKNHFQIE2P45MRS4C/#WHILK22YMT7URJEJKNHFQIE2P45MRS4C)

# [security-announce] SUSE-SU-2013:0048-1: important: Security update for MozillaFirefox

![](https://seccdn.libravatar.org/avatar/099a17325bdf082b643d1a6bbacde279.jpg?s=120&d=mm&r=g)
## [opensuse-security＠opensuse.org](/archives/users/1b72def497ef4503896cd7a5fe9fb8e0/ "See the profile for opensuse-security＠opensuse.org")

18 Jan
2013

18 Jan
'13

18:04

...
> ) o Bill Gianopoulos, Benoit Jacob, Christoph Diehl,
> Christian Holler, Gary Kwong, Robert O'Callahan, and
> Scoobidiver reported memory safety problems and crashes
> that affect Firefox ESR 17 and Firefox 17. (CVE-2013-0749
> <<http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-0749>
> ) o Jesse Ruderman, Christian Holler, Julian Seward, and
> Scoobidiver reported memory safety problems and crashes
> that affect Firefox 17. (CVE-2013-0770
> <<http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-0770>
> )

SUSE Security Update: Security update for MozillaFirefox
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
Announcement ID: SUSE-SU-2013:0048-1
Rating: important
References: #796895
Cross-References: CVE-2012-5829 CVE-2013-0743 CVE-2013-0744
CVE-2013-0745 CVE-2013-0746 CVE-2013-0747
CVE-2013-0748 CVE-2013-0749 CVE-2013-0750
CVE-2013-0751 CVE-2013-0752 CVE-2013-0753
CVE-2013-0754 CVE-2013-0755 CVE-2013-0756
CVE-2013-0757 CVE-2013-0758 CVE-2013-0759
CVE-2013-0760 CVE-2013-0761 CVE-2013-0762
CVE-2013-0763 CVE-2013-0764 CVE-2013-0766
CVE-2013-0767 CVE-2013-0768 CVE-2013-0769
CVE-2013-0770 CVE-2013-0771
Affected Products:
SUSE Linux Enterprise Software Development Kit 11 SP2
SUSE Linux Enterprise Server 11 SP2 for VMware
SUSE Linux Enterprise Server 11 SP2
SUSE Linux Enterprise Desktop 11 SP2
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
An update that fixes 29 vulnerabilities is now available.
It includes three new package versions.
Description:
Mozilla Firefox was updated to the 10.0.12ESR release.
\*
MFSA 2013-01: Mozilla developers identified and fixed
several memory safety bugs in the browser engine used in
Firefox and other Mozilla-based products. Some of these
bugs showed evidence of memory corruption under certain
circumstances, and we presume that with enough effort at
least some of these could be exploited to run arbitrary
code.
o Christoph Diehl, Christian Holler, Mats
Palmgren, and Chiaki Ishikawa reported memory safety
problems and crashes that affect Firefox ESR 10, Firefox
ESR 17, and Firefox 17. ( CVE-2013-0769
<<http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-0769>
\*
MFSA 2013-02: Security researcher Abhishek Arya
(Inferno) of the Google Chrome Security Team discovered a
series critically rated of use-after-free, out of bounds
read, and buffer overflow issues using the Address
Sanitizer tool in shipped software. These issues are
potentially exploitable, allowing for remote code
execution. We would also like to thank Abhishek for
reporting three additional user-after-free and out of
bounds read flaws introduced during Firefox development
that were fixed before general release.
The following issue was fixed in Firefox 18:
o Global-buffer-overflow in
CharDistributionAnalysis::HandleOneChar (CVE-2013-0760
<<http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-0760>

...
> )

The following issues were fixed in Firefox 18, ESR
17.0.1, and ESR 10.0.12:
o Heap-use-after-free in imgRequest::OnStopFrame
(CVE-2013-0762
<<http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-0762>

...
> ) o Heap-use-after-free in ~nsHTMLEditRules
> (CVE-2013-0766
> <<http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-0766>
> ) o Out of bounds read in
> nsSVGPathElement::GetPathLengthScale ( CVE-2013-0767
> <<http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-0767>
> )

The following issues were fixed in Firefox 18 and ESR
17.0.1:
o Heap-use-after-free in
mozilla::TrackUnionStream::EndTrack ( CVE-2013-0761
<<http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-0761>

...
> ) o Heap-use-after-free in Mesa, triggerable by resizing
> a WebGL canvas (CVE-2013-0763
> <<http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-0763>
> ) o Heap-buffer-overflow in
> gfxTextRun::ShrinkToLigatureBoundaries (CVE-2013-0771
> <<http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-0771>
> )

...
> )

The following issue was fixed in Firefox 18 and in
the earlier ESR 10.0.11 release:
o Heap-buffer-overflow in nsWindow::OnExposeEvent
(CVE-2012-5829
<<http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2012-5829>
\*
MFSA 2013-03: Security researcher miaubiz used the
Address Sanitizer tool to discover a buffer overflow in
Canvas when specific bad height and width values were given
through HTML. This could lead to a potentially exploitable
crash. (CVE-2013-0768
<<http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-0768>

...
> )

Miaubiz also found a potentially exploitable crash
when 2D and 3D content was mixed which was introduced
during Firefox development and fixed before general release.
\*
MFSA 2013-04: Security researcher Masato Kinugawa
found a flaw in which the displayed URL values within the
addressbar can be spoofed by a page during loading. This
allows for phishing attacks where a malicious page can
spoof the identify of another site. ( CVE-2013-0759
<<http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-0759>

...
> )

\*
MFSA 2013-05: Using the Address Sanitizer tool,
security researcher Atte Kettunen from OUSPG discovered
that the combination of large numbers of columns and column
groups in a table could cause the array containing the
columns during rendering to overwrite itself. This can lead
to a user-after-free causing a potentially exploitable
crash. ( CVE-2013-0744
<<http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-0744>

...
> )

\*
MFSA 2013-06: Mozilla developer Wesley Johnston
reported that when there are two or more iframes on the
same HTML page, an iframe is able to see the touch events
and their targets that occur within the other iframes on
the page. If the iframes are from the same origin, they can
also access the properties and methods of the targets of
other iframes but same-origin policy (SOP) restricts access
across domains. This allows for information leakage and
possibilities for cross-site scripting (XSS) if another
vulnerability can be used to get around SOP restrictions.
(CVE-2013-0751
<<http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-0751>

...
> )

\*
MFSA 2013-07: Mozilla community member Jerry Baker
reported a crashing issue found through Thunderbird when
downloading messages over a Secure Sockets Layer (SSL)
connection. This was caused by a bug in the networking code
assuming that secure connections were entirely handled on
the socket transport thread when they can occur on a
variety of threads. The resulting crash was potentially
exploitable. (CVE-2013-0764
<<http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-0764>

...
> )

\*
MFSA 2013-08: Mozilla developer Olli Pettay
discovered that the AutoWrapperChanger class fails to keep
some javascript objects alive during garbage collection.
This can lead to an exploitable crash allowing for
arbitrary code execution. (CVE-2013-0745
<<http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-0745>

...
> )

\*
MFSA 2013-09: Mozilla developer Boris Zbarsky
reported reported a problem where jsval-returning
quickstubs fail to wrap their return values, causing a
compartment mismatch. This mismatch can cause garbage
collection to occur incorrectly and lead to a potentially
exploitable crash. (CVE-2013-0746
<<http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-0746>

...
> )

\*
MFSA 2013-10: Mozilla security researcher Jesse
Ruderman reported that events in the plugin handler can be
manipulated by web content to bypass same-origin policy
(SOP) restrictions. This can allow for clickjacking on
malicious web pages. (CVE-2013-0747
<<http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-0747>

...
> )

\*
MFSA 2013-11: Mozilla security researcher Jesse
Ruderman discovered that using the toString function of XBL
objects can lead to inappropriate information leakage by
revealing the address space layout instead of just the ID
of the object. This layout information could potentially be
used to bypass ASLR and other security protections.
(CVE-2013-0748
<<http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-0748>

...
> )

\*
MFSA 2013-12: Security researcher pa\_kt reported a
flaw via TippingPoint's Zero Day Initiative that an integer
overflow is possible when calculating the length for a
Javascript string concatenation, which is then used for
memory allocation. This results in a buffer overflow,
leading to a potentially exploitable memory corruption.
(CVE-2013-0750
<<http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-0750>

...
> )

\*
MFSA 2013-13: Security researcher Sviatoslav Chagaev
reported that when using an XBL file containing multiple
XML bindings with SVG content, a memory corruption can
occur. In concern with remote XUL, this can lead to an
exploitable crash. (CVE-2013-0752
<<http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-0752>

...
> )

\*
MFSA 2013-14: Security researcher Mariusz Mlynski
reported that it is possible to change the prototype of an
object and bypass Chrome Object Wrappers (COW) to gain
access to chrome privileged functions. This could allow for
arbitrary code execution. (CVE-2013-0757
<<http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-0757>

...
> )

\*
MFSA 2013-15: Security researcher Mariusz Mlynski
reported that it is possible to open a chrome privileged
web page through plugin objects through interaction with
SVG elements. This could allow for arbitrary code
execution. (CVE-2013-0758
<<http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-0758>

...
> )

\*
MFSA 2013-16: Security researcher regenrecht
reported, via TippingPoint's Zero Day Initiative, a
use-after-free in XMLSerializer by the exposing of
serializeToStream to web content. This can lead to
arbitrary code execution when exploited. (CVE-2013-0753
<<http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-0753>

...
> )

\*
MFSA 2013-17: Security researcher regenrecht
reported, via TippingPoint's Zero Day Initiative, a
use-after-free within the ListenerManager when garbage
collection is forced after data in listener objects have
been allocated in some circumstances. This results in a
use-after-free which can lead to arbitrary code execution.
(CVE-2013-0754
<<http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-0754>

...
> )

\*
MFSA 2013-18: Security researcher regenrecht
reported, via TippingPoint's Zero Day Initiative, a
use-after-free using the domDoc pointer within Vibrate
library. This can lead to arbitrary code execution when
exploited. (CVE-2013-0755
<<http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-0755>

...
> )

\*
MFSA 2013-19: Security researcher regenrecht
reported, via TippingPoint's Zero Day Initiative, a garbage
collection flaw in Javascript Proxy objects. This can lead
to a use-after-free leading to arbitrary code execution.
(CVE-2013-0756
<<http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-0756>

...
> )

\*
MFSA 2013-20: Google reported to Mozilla that
TURKTRUST, a certificate authority in Mozilla's root
program, had mis-issued two intermediate certificates to
customers. The issue was not specific to Firefox but there
was evidence that one of the certificates was used for
man-in-the-middle (MITM) traffic management of domain names
that the customer did not legitimately own or control. This
issue was resolved by revoking the trust for these specific
mis-issued certificates. (CVE-2013-0743
<<http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-0743>

...
> )

Patch Instructions:
To install this SUSE Security Update use YaST online\_update.
Alternatively you can run the command listed for your product:
- SUSE Linux Enterprise Software Development Kit 11 SP2:
zypper in -t patch sdksp2-firefox-201301-7224
- SUSE Linux Enterprise Server 11 SP2 for VMware:
zypper in -t patch slessp2-firefox-201301-7224
- SUSE Linux Enterprise Server 11 SP2:
zypper in -t patch slessp2-firefox-201301-7224
- SUSE Linux Enterprise Desktop 11 SP2:
zypper in -t patch sledsp2-firefox-201301-7224
To bring your system up-to-date, use "zypper patch".
Package List:
- SUSE Linux Enterprise Software Development Kit 11 SP2 (i586 ia64 ppc64 s390x x86\_64) [New Version: 3.14.1 and 4.9.4]:
mozilla-nspr-devel-4.9.4-0.3.1
mozilla-nss-devel-3.14.1-0.3.1
- SUSE Linux Enterprise Server 11 SP2 for VMware (i586 x86\_64) [New Version: 10.0.12,3.14.1 and 4.9.4]:
MozillaFirefox-10.0.12-0.4.1
MozillaFirefox-translations-10.0.12-0.4.1
libfreebl3-3.14.1-0.3.1
mozilla-nspr-4.9.4-0.3.1
mozilla-nss-3.14.1-0.3.1
mozilla-nss-tools-3.14.1-0.3.1
- SUSE Linux Enterprise Server 11 SP2 for VMware (x86\_64) [New Version: 3.14.1 and 4.9.4]:
libfreebl3-32bit-3.14.1-0.3.1
mozilla-nspr-32bit-4.9.4-0.3.1
mozilla-nss-32bit-3.14.1-0.3.1
- SUSE Linux Enterprise Server 11 SP2 (i586 ia64 ppc64 s390x x86\_64) [New Version: 10.0.12,3.14.1 and 4.9.4]:
MozillaFirefox-10.0.12-0.4.1
MozillaFirefox-translations-10.0.12-0.4.1
libfreebl3-3.14.1-0.3.1
mozilla-nspr-4.9.4-0.3.1
mozilla-nss-3.14.1-0.3.1
mozilla-nss-tools-3.14.1-0.3.1
- SUSE Linux Enterprise Server 11 SP2 (ppc64 s390x x86\_64) [New Version: 3.14.1 and 4.9.4]:
libfreebl3-32bit-3.14.1-0.3.1
mozilla-nspr-32bit-4.9.4-0.3.1
mozilla-nss-32bit-3.14.1-0.3.1
- SUSE Linux Enterprise Server 11 SP2 (ia64) [New Version: 3.14.1 and 4.9.4]:
libfreebl3-x86-3.14.1-0.3.1
mozilla-nspr-x86-4.9.4-0.3.1
mozilla-nss-x86-3.14.1-0.3.1
- SUSE Linux Enterprise Desktop 11 SP2 (i586 x86\_64) [New Version: 10.0.12,3.14.1 and 4.9.4]:
MozillaFirefox-10.0.12-0.4.1
MozillaFirefox-translations-10.0.12-0.4.1
libfreebl3-3.14.1-0.3.1
mozilla-nspr-4.9.4-0.3.1
mozilla-nss-3.14.1-0.3.1
mozilla-nss-tools-3.14.1-0.3.1
- SUSE Linux Enterprise Desktop 11 SP2 (x86\_64) [New Version: 3.14.1 and 4.9.4]:
libfreebl3-32bit-3.14.1-0.3.1
mozilla-nspr-32bit-4.9.4-0.3.1
mozilla-nss-32bit-3.14.1-0.3.1
References:
<http://support.novell.com/security/cve/CVE-2012-5829.html>
<http://support.novell.com/security/cve/CVE-2013-0743.html>
<http://support.novell.com/security/cve/CVE-2013-0744.html>
<http://support.novell.com/security/cve/CVE-2013-0745.html>
<http://support.novell.com/security/cve/CVE-2013-0746.html>
<http://support.novell.com/security/cve/CVE-2013-0747.html>
<http://support.novell.com/security/cve/CVE-2013-0748.html>
<http://support.novell.com/security/cve/CVE-2013-0749.html>
<http://support.novell.com/security/cve/CVE-2013-0750.html>
<http://support.novell.com/security/cve/CVE-2013-0751.html>
<http://support.novell.com/security/cve/CVE-2013-0752.html>
<http://support.novell.com/security/cve/CVE-2013-0753.html>
<http://support.novell.com/security/cve/CVE-2013-0754.html>
<http://support.novell.com/security/cve/CVE-2013-0755.html>
<http://support.novell.com/security/cve/CVE-2013-0756.html>
<http://support.novell.com/security/cve/CVE-2013-0757.html>
<http://support.novell.com/security/cve/CVE-2013-0758.html>
<http://support.novell.com/security/cve/CVE-2013-0759.html>
<http://support.novell.com/security/cve/CVE-2013-0760.html>
<http://support.novell.com/security/cve/CVE-2013-0761.html>
<http://support.novell.com/security/cve/CVE-2013-0762.html>
<http://support.novell.com/security/cve/CVE-2013-0763.html>
<http://support.novell.com/security/cve/CVE-2013-0764.html>
<http://support.novell.com/security/cve/CVE-2013-0766.html>
<http://support.novell.com/security/cve/CVE-2013-0767.html>
<http://support.novell.com/security/cve/CVE-2013-0768.html>
<http://support.novell.com/security/cve/CVE-2013-0769.html>
<http://support.novell.com/security/cve/CVE-2013-0770.html>
<http://support.novell.com/security/cve/CVE-2013-0771.html>
<https://bugzilla.novell.com/796895>
[http://download.novell.com/patch/finder/?keywords=9589e71e3266116ae59aa9d6e4...](http://download.novell.com/patch/finder/?keywords=9589e71e3266116ae59aa9d6e45add05)
--
To unsubscribe, e-mail: opensuse-security-announce+unsubscribe@opensuse.org
For additional commands, e-mail: opensuse-security-announce+help@opensuse.org

[0](#like "You must be logged-in to vote.")
[0](#dislike "You must be logged-in to vote.")

Reply

[Sign in to reply online](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/WHILK22YMT7URJEJKNHFQIE2P45MRS4C/)
Use email software

[Back to the thread](/archives/list/security-announce%40lists.opensuse.org/thread/WHILK22YMT7URJEJKNHFQIE2P45MRS4C/#WHILK22YMT7URJEJKNHFQIE2P45MRS4C)

[Back to the list](/archives/list/security-announce%40lists.opensuse.org/)

![HyperKitty](/static/hyperkitty/img/logo.png)
Powered by [HyperKitty](http://hyperkitty.readthedocs.org) version 1.3.12.



=== Content from lists.opensuse.org_3439c4ec_20250125_034829.html ===


[![openSUSE](https://static.opensuse.org/favicon.svg)
Mailing Lists](/archives/ "openSUSE Mailing Lists")

[Sign In](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/RESRIEPX6WBLU5NE7WAUPHOJMXFM5DTP/)
[Sign Up](/accounts/signup/?next=/archives/list/security-announce%40lists.opensuse.org/message/RESRIEPX6WBLU5NE7WAUPHOJMXFM5DTP/)

[Manage this list](/manage/lists/security-announce.lists.opensuse.org/)
[Sign In](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/RESRIEPX6WBLU5NE7WAUPHOJMXFM5DTP/)
[Sign Up](/accounts/signup/?next=/archives/list/security-announce%40lists.opensuse.org/message/RESRIEPX6WBLU5NE7WAUPHOJMXFM5DTP/)

×
#### Keyboard Shortcuts

### Thread View

* `j`: Next unread message
* `k`: Previous unread message
* `j a`: Jump to all threads* `j l`: Jump to MailingList overview

[thread](/archives/list/security-announce%40lists.opensuse.org/thread/RESRIEPX6WBLU5NE7WAUPHOJMXFM5DTP/#RESRIEPX6WBLU5NE7WAUPHOJMXFM5DTP)

# [security-announce] openSUSE-SU-2013:0149-1: important: Mozilla Januarys

![](https://seccdn.libravatar.org/avatar/099a17325bdf082b643d1a6bbacde279.jpg?s=120&d=mm&r=g)
## [opensuse-security＠opensuse.org](/archives/users/1b72def497ef4503896cd7a5fe9fb8e0/ "See the profile for opensuse-security＠opensuse.org")

23 Jan
2013

23 Jan
'13

13:05

openSUSE Security Update: Mozilla Januarys
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
Announcement ID: openSUSE-SU-2013:0149-1
Rating: important
References: #796628
Cross-References: CVE-2012-5829 CVE-2013-0743 CVE-2013-0744
CVE-2013-0745 CVE-2013-0746 CVE-2013-0747
CVE-2013-0748 CVE-2013-0749 CVE-2013-0750
CVE-2013-0751 CVE-2013-0752 CVE-2013-0753
CVE-2013-0754 CVE-2013-0755 CVE-2013-0756
CVE-2013-0757 CVE-2013-0758 CVE-2013-0759
CVE-2013-0760 CVE-2013-0761 CVE-2013-0762
CVE-2013-0763 CVE-2013-0764 CVE-2013-0766
CVE-2013-0767 CVE-2013-0768 CVE-2013-0769
CVE-2013-0770 CVE-2013-0771
Affected Products:
openSUSE 12.2
openSUSE 12.1
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
An update that fixes 29 vulnerabilities is now available.
Description:
The Mozilla January 8th 2013 security release contains
updates:
Mozilla Firefox was updated to version 18.0. Mozilla
Seamonkey was updated to version 2.15. Mozilla Thunderbird
was updated to version 17.0.2. Mozilla XULRunner was
updated to version 17.0.2.
\* MFSA 2013-01/CVE-2013-0749/CVE-2013-0769/CVE-2013-0770
Miscellaneous memory safety hazards
\* MFSA
2013-02/CVE-2013-0760/CVE-2013-0762/CVE-2013-0766/CVE-2013-0
767
CVE-2013-0761/CVE-2013-0763/CVE-2013-0771/CVE-2012-5829
Use-after-free and buffer overflow issues found using
Address Sanitizer
\* MFSA 2013-03/CVE-2013-0768 (bmo#815795) Buffer Overflow
in Canvas
\* MFSA 2013-04/CVE-2012-0759 (bmo#802026) URL spoofing in
addressbar during page loads
\* MFSA 2013-05/CVE-2013-0744 (bmo#814713) Use-after-free
when displaying table with many columns and column groups
\* MFSA 2013-06/CVE-2013-0751 (bmo#790454) Touch events are
shared across iframes
\* MFSA 2013-07/CVE-2013-0764 (bmo#804237) Crash due to
handling of SSL on threads
\* MFSA 2013-08/CVE-2013-0745 (bmo#794158)
AutoWrapperChanger fails to keep objects alive during
garbage collection
\* MFSA 2013-09/CVE-2013-0746 (bmo#816842) Compartment
mismatch with quickstubs returned values
\* MFSA 2013-10/CVE-2013-0747 (bmo#733305) Event
manipulation in plugin handler to bypass same-origin
policy
\* MFSA 2013-11/CVE-2013-0748 (bmo#806031) Address space
layout leaked in XBL objects
\* MFSA 2013-12/CVE-2013-0750 (bmo#805121) Buffer overflow
in Javascript string concatenation
\* MFSA 2013-13/CVE-2013-0752 (bmo#805024) Memory corruption
in XBL with XML bindings containing SVG
\* MFSA 2013-14/CVE-2013-0757 (bmo#813901) Chrome Object
Wrapper (COW) bypass through changing prototype
\* MFSA 2013-15/CVE-2013-0758 (bmo#813906) Privilege
escalation through plugin objects
\* MFSA 2013-16/CVE-2013-0753 (bmo#814001) Use-after-free in
serializeToStream
\* MFSA 2013-17/CVE-2013-0754 (bmo#814026) Use-after-free in
ListenerManager
\* MFSA 2013-18/CVE-2013-0755 (bmo#814027) Use-after-free in
Vibrate
\* MFSA 2013-19/CVE-2013-0756 (bmo#814029) Use-after-free in
Javascript Proxy objects
Mozilla NSPR was updated to 4.9.4, containing some small
bugfixes and new features.
Mozilla NSS was updated to 3.14.1 containing various new
features, security fix and bugfixes:
\* MFSA 2013-20/CVE-2013-0743 (bmo#825022, bnc#796628)
revoke mis-issued intermediate certificates from TURKTRUST
Cryptographic changes done:
\* Support for TLS 1.1 (RFC 4346)
\* Experimental support for DTLS 1.0 (RFC 4347) and
DTLS-SRTP (RFC 5764)
\* Support for AES-CTR, AES-CTS, and AES-GCM
\* Support for Keying Material Exporters for TLS (RFC 5705)
\* Support for certificate signatures using the MD5 hash
algorithm is now disabled by default
\* The NSS license has changed to MPL 2.0. Previous releases
were released under a MPL 1.1/GPL 2.0/LGPL 2.1
tri-license. For more information about MPL 2.0, please
see <http://www.mozilla.org/MPL/2.0/FAQ.html>. For an
additional explanation on GPL/LGPL compatibility, see
security/nss/COPYING in the source code.
\* Export and DES cipher suites are disabled by default.
Non-ECC AES and Triple DES cipher suites are enabled by
default
Please see <http://www.mozilla.org/security/announce/> for
more information.
Patch Instructions:
To install this openSUSE Security Update use YaST online\_update.
Alternatively you can run the command listed for your product:
- openSUSE 12.2:
zypper in -t patch openSUSE-2013-17
- openSUSE 12.1:
zypper in -t patch openSUSE-2013-17
To bring your system up-to-date, use "zypper patch".
Package List:
- openSUSE 12.2 (i586 x86\_64):
MozillaFirefox-18.0-2.29.2
MozillaFirefox-branding-upstream-18.0-2.29.2
MozillaFirefox-buildsymbols-18.0-2.29.2
MozillaFirefox-debuginfo-18.0-2.29.2
MozillaFirefox-debugsource-18.0-2.29.2
MozillaFirefox-devel-18.0-2.29.2
MozillaFirefox-translations-common-18.0-2.29.2
MozillaFirefox-translations-other-18.0-2.29.2
MozillaThunderbird-17.0.2-49.27.2
MozillaThunderbird-buildsymbols-17.0.2-49.27.2
MozillaThunderbird-debuginfo-17.0.2-49.27.2
MozillaThunderbird-debugsource-17.0.2-49.27.2
MozillaThunderbird-devel-17.0.2-49.27.2
MozillaThunderbird-devel-debuginfo-17.0.2-49.27.2
MozillaThunderbird-translations-common-17.0.2-49.27.2
MozillaThunderbird-translations-other-17.0.2-49.27.2
enigmail-1.5.0+17.0.2-49.27.2
enigmail-debuginfo-1.5.0+17.0.2-49.27.2
libfreebl3-3.14.1-2.11.2
libfreebl3-debuginfo-3.14.1-2.11.2
libsoftokn3-3.14.1-2.11.2
libsoftokn3-debuginfo-3.14.1-2.11.2
mozilla-js-17.0.2-2.26.1
mozilla-js-debuginfo-17.0.2-2.26.1
mozilla-nspr-4.9.4-1.8.1
mozilla-nspr-debuginfo-4.9.4-1.8.1
mozilla-nspr-debugsource-4.9.4-1.8.1
mozilla-nspr-devel-4.9.4-1.8.1
mozilla-nss-3.14.1-2.11.2
mozilla-nss-certs-3.14.1-2.11.2
mozilla-nss-certs-debuginfo-3.14.1-2.11.2
mozilla-nss-debuginfo-3.14.1-2.11.2
mozilla-nss-debugsource-3.14.1-2.11.2
mozilla-nss-devel-3.14.1-2.11.2
mozilla-nss-sysinit-3.14.1-2.11.2
mozilla-nss-sysinit-debuginfo-3.14.1-2.11.2
mozilla-nss-tools-3.14.1-2.11.2
mozilla-nss-tools-debuginfo-3.14.1-2.11.2
seamonkey-2.15-2.30.1
seamonkey-debuginfo-2.15-2.30.1
seamonkey-debugsource-2.15-2.30.1
seamonkey-dom-inspector-2.15-2.30.1
seamonkey-irc-2.15-2.30.1
seamonkey-translations-common-2.15-2.30.1
seamonkey-translations-other-2.15-2.30.1
seamonkey-venkman-2.15-2.30.1
xulrunner-17.0.2-2.26.1
xulrunner-buildsymbols-17.0.2-2.26.1
xulrunner-debuginfo-17.0.2-2.26.1
xulrunner-debugsource-17.0.2-2.26.1
xulrunner-devel-17.0.2-2.26.1
xulrunner-devel-debuginfo-17.0.2-2.26.1
- openSUSE 12.2 (x86\_64):
libfreebl3-32bit-3.14.1-2.11.2
libfreebl3-debuginfo-32bit-3.14.1-2.11.2
libsoftokn3-32bit-3.14.1-2.11.2
libsoftokn3-debuginfo-32bit-3.14.1-2.11.2
mozilla-js-32bit-17.0.2-2.26.1
mozilla-js-debuginfo-32bit-17.0.2-2.26.1
mozilla-nspr-32bit-4.9.4-1.8.1
mozilla-nspr-debuginfo-32bit-4.9.4-1.8.1
mozilla-nss-32bit-3.14.1-2.11.2
mozilla-nss-certs-32bit-3.14.1-2.11.2
mozilla-nss-certs-debuginfo-32bit-3.14.1-2.11.2
mozilla-nss-debuginfo-32bit-3.14.1-2.11.2
mozilla-nss-sysinit-32bit-3.14.1-2.11.2
mozilla-nss-sysinit-debuginfo-32bit-3.14.1-2.11.2
xulrunner-32bit-17.0.2-2.26.1
xulrunner-debuginfo-32bit-17.0.2-2.26.1
- openSUSE 12.1 (i586 x86\_64):
MozillaFirefox-18.0-2.58.2
MozillaFirefox-branding-upstream-18.0-2.58.2
MozillaFirefox-buildsymbols-18.0-2.58.2
MozillaFirefox-debuginfo-18.0-2.58.2
MozillaFirefox-debugsource-18.0-2.58.2
MozillaFirefox-devel-18.0-2.58.2
MozillaFirefox-translations-common-18.0-2.58.2
MozillaFirefox-translations-other-18.0-2.58.2
MozillaThunderbird-17.0.2-33.47.2
MozillaThunderbird-buildsymbols-17.0.2-33.47.2
MozillaThunderbird-debuginfo-17.0.2-33.47.2
MozillaThunderbird-debugsource-17.0.2-33.47.2
MozillaThunderbird-devel-17.0.2-33.47.2
MozillaThunderbird-devel-debuginfo-17.0.2-33.47.2
MozillaThunderbird-translations-common-17.0.2-33.47.2
MozillaThunderbird-translations-other-17.0.2-33.47.2
enigmail-1.5.0+17.0.2-33.47.2
enigmail-debuginfo-1.5.0+17.0.2-33.47.2
libfreebl3-3.14.1-9.21.3
libfreebl3-debuginfo-3.14.1-9.21.3
libsoftokn3-3.14.1-9.21.3
libsoftokn3-debuginfo-3.14.1-9.21.3
mozilla-js-17.0.2-2.53.1
mozilla-js-debuginfo-17.0.2-2.53.1
mozilla-nspr-4.9.4-3.11.1
mozilla-nspr-debuginfo-4.9.4-3.11.1
mozilla-nspr-debugsource-4.9.4-3.11.1
mozilla-nspr-devel-4.9.4-3.11.1
mozilla-nss-3.14.1-9.21.3
mozilla-nss-certs-3.14.1-9.21.3
mozilla-nss-certs-debuginfo-3.14.1-9.21.3
mozilla-nss-debuginfo-3.14.1-9.21.3
mozilla-nss-debugsource-3.14.1-9.21.3
mozilla-nss-devel-3.14.1-9.21.3
mozilla-nss-sysinit-3.14.1-9.21.3
mozilla-nss-sysinit-debuginfo-3.14.1-9.21.3
mozilla-nss-tools-3.14.1-9.21.3
mozilla-nss-tools-debuginfo-3.14.1-9.21.3
seamonkey-2.15-2.49.1
seamonkey-debuginfo-2.15-2.49.1
seamonkey-debugsource-2.15-2.49.1
seamonkey-dom-inspector-2.15-2.49.1
seamonkey-irc-2.15-2.49.1
seamonkey-translations-common-2.15-2.49.1
seamonkey-translations-other-2.15-2.49.1
seamonkey-venkman-2.15-2.49.1
xulrunner-17.0.2-2.53.1
xulrunner-buildsymbols-17.0.2-2.53.1
xulrunner-debuginfo-17.0.2-2.53.1
xulrunner-debugsource-17.0.2-2.53.1
xulrunner-devel-17.0.2-2.53.1
xulrunner-devel-debuginfo-17.0.2-2.53.1
- openSUSE 12.1 (x86\_64):
libfreebl3-32bit-3.14.1-9.21.3
libfreebl3-debuginfo-32bit-3.14.1-9.21.3
libsoftokn3-32bit-3.14.1-9.21.3
libsoftokn3-debuginfo-32bit-3.14.1-9.21.3
mozilla-js-32bit-17.0.2-2.53.1
mozilla-js-debuginfo-32bit-17.0.2-2.53.1
mozilla-nspr-32bit-4.9.4-3.11.1
mozilla-nspr-debuginfo-32bit-4.9.4-3.11.1
mozilla-nss-32bit-3.14.1-9.21.3
mozilla-nss-certs-32bit-3.14.1-9.21.3
mozilla-nss-certs-debuginfo-32bit-3.14.1-9.21.3
mozilla-nss-debuginfo-32bit-3.14.1-9.21.3
mozilla-nss-sysinit-32bit-3.14.1-9.21.3
mozilla-nss-sysinit-debuginfo-32bit-3.14.1-9.21.3
xulrunner-32bit-17.0.2-2.53.1
xulrunner-debuginfo-32bit-17.0.2-2.53.1
- openSUSE 12.1 (ia64):
libfreebl3-debuginfo-x86-3.14.1-9.21.3
libfreebl3-x86-3.14.1-9.21.3
libsoftokn3-debuginfo-x86-3.14.1-9.21.3
libsoftokn3-x86-3.14.1-9.21.3
mozilla-js-debuginfo-x86-17.0.2-2.53.1
mozilla-js-x86-17.0.2-2.53.1
mozilla-nspr-debuginfo-x86-4.9.4-3.11.1
mozilla-nspr-x86-4.9.4-3.11.1
mozilla-nss-certs-debuginfo-x86-3.14.1-9.21.3
mozilla-nss-certs-x86-3.14.1-9.21.3
mozilla-nss-debuginfo-x86-3.14.1-9.21.3
mozilla-nss-sysinit-debuginfo-x86-3.14.1-9.21.3
mozilla-nss-sysinit-x86-3.14.1-9.21.3
mozilla-nss-x86-3.14.1-9.21.3
xulrunner-debuginfo-x86-17.0.2-2.53.1
xulrunner-x86-17.0.2-2.53.1
References:
<http://support.novell.com/security/cve/CVE-2012-5829.html>
<http://support.novell.com/security/cve/CVE-2013-0743.html>
<http://support.novell.com/security/cve/CVE-2013-0744.html>
<http://support.novell.com/security/cve/CVE-2013-0745.html>
<http://support.novell.com/security/cve/CVE-2013-0746.html>
<http://support.novell.com/security/cve/CVE-2013-0747.html>
<http://support.novell.com/security/cve/CVE-2013-0748.html>
<http://support.novell.com/security/cve/CVE-2013-0749.html>
<http://support.novell.com/security/cve/CVE-2013-0750.html>
<http://support.novell.com/security/cve/CVE-2013-0751.html>
<http://support.novell.com/security/cve/CVE-2013-0752.html>
<http://support.novell.com/security/cve/CVE-2013-0753.html>
<http://support.novell.com/security/cve/CVE-2013-0754.html>
<http://support.novell.com/security/cve/CVE-2013-0755.html>
<http://support.novell.com/security/cve/CVE-2013-0756.html>
<http://support.novell.com/security/cve/CVE-2013-0757.html>
<http://support.novell.com/security/cve/CVE-2013-0758.html>
<http://support.novell.com/security/cve/CVE-2013-0759.html>
<http://support.novell.com/security/cve/CVE-2013-0760.html>
<http://support.novell.com/security/cve/CVE-2013-0761.html>
<http://support.novell.com/security/cve/CVE-2013-0762.html>
<http://support.novell.com/security/cve/CVE-2013-0763.html>
<http://support.novell.com/security/cve/CVE-2013-0764.html>
<http://support.novell.com/security/cve/CVE-2013-0766.html>
<http://support.novell.com/security/cve/CVE-2013-0767.html>
<http://support.novell.com/security/cve/CVE-2013-0768.html>
<http://support.novell.com/security/cve/CVE-2013-0769.html>
<http://support.novell.com/security/cve/CVE-2013-0770.html>
<http://support.novell.com/security/cve/CVE-2013-0771.html>
<https://bugzilla.novell.com/796628>
--
To unsubscribe, e-mail: opensuse-security-announce+unsubscribe@opensuse.org
For additional commands, e-mail: opensuse-security-announce+help@opensuse.org

[0](#like "You must be logged-in to vote.")
[0](#dislike "You must be logged-in to vote.")

Reply

[Sign in to reply online](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/RESRIEPX6WBLU5NE7WAUPHOJMXFM5DTP/)
Use email software

[Back to the thread](/archives/list/security-announce%40lists.opensuse.org/thread/RESRIEPX6WBLU5NE7WAUPHOJMXFM5DTP/#RESRIEPX6WBLU5NE7WAUPHOJMXFM5DTP)

[Back to the list](/archives/list/security-announce%40lists.opensuse.org/)

![HyperKitty](/static/hyperkitty/img/logo.png)
Powered by [HyperKitty](http://hyperkitty.readthedocs.org) version 1.3.12.


