=== Content from www.mandriva.com_57644b5e_20250124_170630.html ===


* [Tuxedo.org](https://tuxedo.org/ "Go to: Tuxedo")
* Store
* Mandriva Linux
* Enterprise Solutions
* Contact Us
* Language ![](/sites/all/themes/mandriva_customer/images/arrow-grey-bottom.gif)
  + English (International)
  + Français
  + Ð ÑÑÑÐºÐ¸Ð¹

# [Mandriva](/mandriva/)

* Download
* Mandriva Linux
* Community
* Help

## One

### The Linux desktopthat's easy to try and easy to keep

Download
![Mandriva One](/sites/all/themes/mandriva_customer/images/front/packshot_Mandriva_One.png)

## Powerpack

### Mandriva Linux- and more

Download
![Mandriva Linux Powerpack](/sites/all/themes/mandriva_customer/images/front/en-49.png)

## Mandriva Flash

### The mobile and installable Linux desktopon a USB key

Buy on Store
![Mandriva Flash](/sites/all/themes/mandriva_customer/images/front/mandriva-flash2.png)

### [Community](community)

* User Forums
* Support - FAQ
* Free Software
* Become a member

### Enterprise Solutions

* Enterprise Linux Products
* Asset Management Solution
* Professional Services
* Support & Maintenance

* Go to site »

### Mandriva Partners

* Worldwide offices
* Partner Program
* Technology Partners
* OEM
* Classmate PC with Mandriva Linux

### News

* Mandriva presents the launch of its new mobile desktop: Mandriva Flash 2008 Spring
* Speaking about Mandriva Linux 2008 Spring in media
* Speaking about Mandriva Linux 2008 Spring in media
* Mandriva presents its latest distribution: Mandriva Linux 2008 Spring
* Mandriva and Novatice Technologies present Edutice, The ready to use solution dedicated to educationand multimedia spaces
* # [Top 50 Online Casinos UK in 2023](https://montycasinos.com/online-casinos/)

more

* Download
  + Mandriva Linux 2008
  + Writing an ISO image
* Mandriva Linux
  + One
  + Powerpack
  + Mandriva Flash
* Community
  + Start
  + Register
  + Stay informed
  + Participate
  + Free software
* Help
  + Getting help
  + Knowledge Base
  + Documentation
  + Forums
  + Support Requests
  + Customer Care
  + Enterprise Support
* Enterprise Solutions
  + Products
  + Support
  + Services
  + Partners
  + Go to site »

Language
English (International)
Français
Ð ÑÑÑÐºÐ¸Ð¹

* © 2007 Mandriva S.A.
* About Us
* Legal Information
* Privacy Policy
* Contact Us



=== Content from access.redhat.com_f5c450b1_20250126_022815.html ===


[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

**We're sorry but cve-details doesn't work properly without JavaScript enabled. Please enable it to continue.**

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from access.redhat.com_5180912e_20250126_022814.html ===


[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

**We're sorry but cve-details doesn't work properly without JavaScript enabled. Please enable it to continue.**

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from github.com_5ba4a679_20250124_170635.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ftorvalds%2Flinux%2Fcommit%2F7d5145d8eb2b9791533ffe4dc003b129b9696c48)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ftorvalds%2Flinux%2Fcommit%2F7d5145d8eb2b9791533ffe4dc003b129b9696c48)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=torvalds%2Flinux)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[torvalds](/torvalds)
/
**[linux](/torvalds/linux)**
Public

* [Notifications](/login?return_to=%2Ftorvalds%2Flinux) You must be signed in to change notification settings
* [Fork
  54.9k](/login?return_to=%2Ftorvalds%2Flinux)
* [Star
   186k](/login?return_to=%2Ftorvalds%2Flinux)

* [Code](/torvalds/linux)
* [Pull requests
  437](/torvalds/linux/pulls)
* [Actions](/torvalds/linux/actions)
* [Projects
  0](/torvalds/linux/projects)
* [Security](/torvalds/linux/security)
* [Insights](/torvalds/linux/pulse)

Additional navigation options

* [Code](/torvalds/linux)
* [Pull requests](/torvalds/linux/pulls)
* [Actions](/torvalds/linux/actions)
* [Projects](/torvalds/linux/projects)
* [Security](/torvalds/linux/security)
* [Insights](/torvalds/linux/pulse)

## Commit

[Permalink](/torvalds/linux/commit/7d5145d8eb2b9791533ffe4dc003b129b9696c48)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

xen/netback: don't leak pages on failure in xen\_netbk\_tx\_check\_gop.

[Browse files](/torvalds/linux/tree/7d5145d8eb2b9791533ffe4dc003b129b9696c48)
Browse the repository at this point in the history

```
Signed-off-by: Matthew Daley <mattjd@gmail.com>
Reviewed-by: Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>
Acked-by: Ian Campbell <ian.campbell@citrix.com>
Acked-by: Jan Beulich <JBeulich@suse.com>
Signed-off-by: David S. Miller <davem@davemloft.net>
```

* Loading branch information

[![@davem330](https://avatars.githubusercontent.com/u/1053866?s=40&v=4)](/davem330)

Matthew Daley
authored and
[davem330](/torvalds/linux/commits?author=davem330 "View all commits by davem330")
committed
Feb 8, 2013

1 parent
[4885628](/torvalds/linux/commit/48856286b64e4b66ec62b94e504d0b29c1ade664)

commit 7d5145d

Showing
**1 changed file**
with
**13 additions**
and
**25 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

## There are no files selected for viewing

38 changes: 13 additions & 25 deletions

38
[drivers/net/xen-netback/netback.c](#diff-1dc1ad846af0c4901ceff7627377057351a6132e88d2c878880c9a32e12734ed "drivers/net/xen-netback/netback.c")

Show comments

[View file](/torvalds/linux/blob/7d5145d8eb2b9791533ffe4dc003b129b9696c48/drivers/net/xen-netback/netback.c)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -147,7 +147,8 @@ void xen\_netbk\_remove\_xenvif(struct xenvif \*vif) |
|  |  | atomic\_dec(&netbk->netfront\_count); |
|  |  | } |
|  |  |  |
|  |  | static void xen\_netbk\_idx\_release(struct xen\_netbk \*netbk, u16 pending\_idx); |
|  |  | static void xen\_netbk\_idx\_release(struct xen\_netbk \*netbk, u16 pending\_idx, |
|  |  | u8 status); |
|  |  | static void make\_tx\_response(struct xenvif \*vif, |
|  |  | struct xen\_netif\_tx\_request \*txp, |
|  |  | s8 st); |
| Expand Down  Expand Up | | @@ -1007,30 +1008,20 @@ static int xen\_netbk\_tx\_check\_gop(struct xen\_netbk \*netbk, |
|  |  | { |
|  |  | struct gnttab\_copy \*gop = \*gopp; |
|  |  | u16 pending\_idx = \*((u16 \*)skb->data); |
|  |  | struct pending\_tx\_info \*pending\_tx\_info = netbk->pending\_tx\_info; |
|  |  | struct xenvif \*vif = pending\_tx\_info[pending\_idx].vif; |
|  |  | struct xen\_netif\_tx\_request \*txp; |
|  |  | struct skb\_shared\_info \*shinfo = skb\_shinfo(skb); |
|  |  | int nr\_frags = shinfo->nr\_frags; |
|  |  | int i, err, start; |
|  |  |  |
|  |  | /\* Check status of header. \*/ |
|  |  | err = gop->status; |
|  |  | if (unlikely(err)) { |
|  |  | pending\_ring\_idx\_t index; |
|  |  | index = pending\_index(netbk->pending\_prod++); |
|  |  | txp = &pending\_tx\_info[pending\_idx].req; |
|  |  | make\_tx\_response(vif, txp, XEN\_NETIF\_RSP\_ERROR); |
|  |  | netbk->pending\_ring[index] = pending\_idx; |
|  |  | xenvif\_put(vif); |
|  |  | } |
|  |  | if (unlikely(err)) |
|  |  | xen\_netbk\_idx\_release(netbk, pending\_idx, XEN\_NETIF\_RSP\_ERROR); |
|  |  |  |
|  |  | /\* Skip first skb fragment if it is on same page as header fragment. \*/ |
|  |  | start = (frag\_get\_pending\_idx(&shinfo->frags[0]) == pending\_idx); |
|  |  |  |
|  |  | for (i = start; i < nr\_frags; i++) { |
|  |  | int j, newerr; |
|  |  | pending\_ring\_idx\_t index; |
|  |  |  |
|  |  | pending\_idx = frag\_get\_pending\_idx(&shinfo->frags[i]); |
|  |  |  |
| Expand All | | @@ -1039,27 +1030,23 @@ static int xen\_netbk\_tx\_check\_gop(struct xen\_netbk \*netbk, |
|  |  | if (likely(!newerr)) { |
|  |  | /\* Had a previous error? Invalidate this fragment. \*/ |
|  |  | if (unlikely(err)) |
|  |  | xen\_netbk\_idx\_release(netbk, pending\_idx); |
|  |  | xen\_netbk\_idx\_release(netbk, pending\_idx, XEN\_NETIF\_RSP\_OKAY); |
|  |  | continue; |
|  |  | } |
|  |  |  |
|  |  | /\* Error on this fragment: respond to client with an error. \*/ |
|  |  | txp = &netbk->pending\_tx\_info[pending\_idx].req; |
|  |  | make\_tx\_response(vif, txp, XEN\_NETIF\_RSP\_ERROR); |
|  |  | index = pending\_index(netbk->pending\_prod++); |
|  |  | netbk->pending\_ring[index] = pending\_idx; |
|  |  | xenvif\_put(vif); |
|  |  | xen\_netbk\_idx\_release(netbk, pending\_idx, XEN\_NETIF\_RSP\_ERROR); |
|  |  |  |
|  |  | /\* Not the first error? Preceding frags already invalidated. \*/ |
|  |  | if (err) |
|  |  | continue; |
|  |  |  |
|  |  | /\* First error: invalidate header and preceding fragments. \*/ |
|  |  | pending\_idx = \*((u16 \*)skb->data); |
|  |  | xen\_netbk\_idx\_release(netbk, pending\_idx); |
|  |  | xen\_netbk\_idx\_release(netbk, pending\_idx, XEN\_NETIF\_RSP\_OKAY); |
|  |  | for (j = start; j < i; j++) { |
|  |  | pending\_idx = frag\_get\_pending\_idx(&shinfo->frags[j]); |
|  |  | xen\_netbk\_idx\_release(netbk, pending\_idx); |
|  |  | xen\_netbk\_idx\_release(netbk, pending\_idx, XEN\_NETIF\_RSP\_OKAY); |
|  |  | } |
|  |  |  |
|  |  | /\* Remember the error: invalidate all subsequent fragments. \*/ |
| Expand Down  Expand Up | | @@ -1093,7 +1080,7 @@ static void xen\_netbk\_fill\_frags(struct xen\_netbk \*netbk, struct sk\_buff \*skb) |
|  |  |  |
|  |  | /\* Take an extra reference to offset xen\_netbk\_idx\_release \*/ |
|  |  | get\_page(netbk->mmap\_pages[pending\_idx]); |
|  |  | xen\_netbk\_idx\_release(netbk, pending\_idx); |
|  |  | xen\_netbk\_idx\_release(netbk, pending\_idx, XEN\_NETIF\_RSP\_OKAY); |
|  |  | } |
|  |  | } |
|  |  |  |
| Expand Down  Expand Up | | @@ -1476,7 +1463,7 @@ static void xen\_netbk\_tx\_submit(struct xen\_netbk \*netbk) |
|  |  | txp->size -= data\_len; |
|  |  | } else { |
|  |  | /\* Schedule a response immediately. \*/ |
|  |  | xen\_netbk\_idx\_release(netbk, pending\_idx); |
|  |  | xen\_netbk\_idx\_release(netbk, pending\_idx, XEN\_NETIF\_RSP\_OKAY); |
|  |  | } |
|  |  |  |
|  |  | if (txp->flags & XEN\_NETTXF\_csum\_blank) |
| Expand Down  Expand Up | | @@ -1528,7 +1515,8 @@ static void xen\_netbk\_tx\_action(struct xen\_netbk \*netbk) |
|  |  | xen\_netbk\_tx\_submit(netbk); |
|  |  | } |
|  |  |  |
|  |  | static void xen\_netbk\_idx\_release(struct xen\_netbk \*netbk, u16 pending\_idx) |
|  |  | static void xen\_netbk\_idx\_release(struct xen\_netbk \*netbk, u16 pending\_idx, |
|  |  | u8 status) |
|  |  | { |
|  |  | struct xenvif \*vif; |
|  |  | struct pending\_tx\_info \*pending\_tx\_info; |
| Expand All | | @@ -1542,7 +1530,7 @@ static void xen\_netbk\_idx\_release(struct xen\_netbk \*netbk, u16 pending\_idx) |
|  |  |  |
|  |  | vif = pending\_tx\_info->vif; |
|  |  |  |
|  |  | make\_tx\_response(vif, &pending\_tx\_info->req, XEN\_NETIF\_RSP\_OKAY); |
|  |  | make\_tx\_response(vif, &pending\_tx\_info->req, status); |
|  |  |  |
|  |  | index = pending\_index(netbk->pending\_prod++); |
|  |  | netbk->pending\_ring[index] = pending\_idx; |
| Expand Down | |  |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `7d5145d`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ftorvalds%2Flinux%2Fcommit%2F7d5145d8eb2b9791533ffe4dc003b129b9696c48) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from www.openwall.com_ededf50a_20250124_170631.html ===


| [Openwall](/) * [Products](/)   + [Openwall GNU/\*/Linux   *server OS*](/Owl/)+ [Linux Kernel Runtime Guard](/lkrg/)+ [John the Ripper   *password cracker*](/john/)         - [Free & Open Source for any platform](/john/)- [in the cloud](/john/cloud/)- [Pro for Linux](/john/pro/linux/)- [Pro for macOS](/john/pro/macosx/)+ [Wordlists   *for password cracking*](/wordlists/)+ [passwdqc   *policy enforcement*](/passwdqc/)             - [Free & Open Source for Unix](/passwdqc/)- [Pro for Windows (Active Directory)](/passwdqc/windows/)+ [yescrypt   *KDF & password hashing*](/yescrypt/)+ [yespower   *Proof-of-Work (PoW)*](/yespower/)+ [crypt\_blowfish   *password hashing*](/crypt/)+ [phpass   *ditto in PHP*](/phpass/)+ [tcb   *better password shadowing*](/tcb/)+ [Pluggable Authentication Modules](/pam/)+ [scanlogd   *port scan detector*](/scanlogd/)+ [popa3d   *tiny POP3 daemon*](/popa3d/)+ [blists   *web interface to mailing lists*](/blists/)+ [msulogin   *single user mode login*](/msulogin/)+ [php\_mt\_seed   *mt\_rand() cracker*](/php_mt_seed/)* [Services](/services/)* Publications       + [Articles](/articles/)+ [Presentations](/presentations/)* Resources         + [Mailing lists](/lists/)+ [Community wiki](https://openwall.info/wiki/)+ [Source code repositories (GitHub)](https://github.com/openwall)+ [Source code repositories (CVSweb)](https://cvsweb.openwall.com)+ [File archive & mirrors](/mirrors/)+ [How to verify digital signatures](/signatures/)+ [OVE IDs](/ove/)* [What's new](/news) | |
| --- | --- |

| | [Hash Suite - Windows password security audit tool. GUI, reports in PDF.](https://hashsuite.openwall.net) | | --- | |
| --- | --- |

[[<prev]](11) [[next>]](13) [[day]](.) [[month]](..) [[year]](../..) [[list]](../../..)
```

Message-Id: <E1U2iPx-0008FR-V8@xenbits.xen.org>
Date: Tue, 05 Feb 2013 13:18:33 +0000
From: Xen.org security team <security@....org>
To: oss-security@...ts.openwall.com
CC: Xen.org security team <security@....org>
Subject: Xen Security Advisory 39 (CVE-2013-0216,CVE-2013-0217) - Linux
 netback DoS via malicious guest ring.

(Copy of previously sent advisory)

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

    Xen Security Advisory CVE-2013-0216,CVE-2013-0217 / XSA-39
			      version 2

          Linux netback DoS via malicious guest ring.

UPDATES IN VERSION 2
====================

Public release.

ISSUE DESCRIPTION
=================

The Xen netback implementation contains a couple of flaws which can
allow a guest to cause a DoS in the backend domain, potentially
affecting other domains in the system.

CVE-2013-0216 is a failure to sanity check the ring producer/consumer
pointers which can allow a guest to cause netback to loop for an
extended period preventing other work from occurring.

CVE-2013-0217 is a memory leak on an error path which is guest
triggerable.

IMPACT
======

A malicious guest can mount a DoS affecting the entire system.

VULNERABLE SYSTEMS
==================

All systems running guests with access to PV network devices are
vulnerable.

CVE-2013-0216 affects both mainline ("pvops") and classic-Xen patch
kernels.

CVE-2013-0217 affects only mainline ("pvops") kernels.

MITIGATION
==========

Running HVM guests with only emulated or passthrough NICs or PV guests
with only passthrough NICs will avoid this vulnerability.

RESOLUTION
==========

Applying the appropriate attached patches in sequence resolves this issue.

xsa39-pvops-*.patch            Apply to mainline Linux 3.8-rc2
xsa39-classic-*.patch          Apply to linux-2.6.18-xen tree.

All patches for the given branch should be applied in numerical order.

$ sha256sum xsa39*.patch
4b75961673b940f5eb31451080dd668b9119eb88db1df44db1a3ba4b0d037ce1  xsa39-classic-0001-xen-netback-garbage-ring.patch
096143750b99eb2d88970338c3f9debfbbfdaef766525a620281b28528ebe0ce  xsa39-classic-0002-xen-netback-wrap-around.patch
99cf93e37985908243b974cc726f57e592e62ae005eca52969f11fb6fdea6fb5  xsa39-pvops-0001-xen-netback-shutdown-the-ring-if-it-contains-garbage.patch
e0c4226b0910ca455f22ae117e8346d87053e9faf03ec155dd6c31e2f58a1969  xsa39-pvops-0002-xen-netback-don-t-leak-pages-on-failure-in-xen_netbk.patch
70e6cb644a57cdda7f29eb86086a8e697706c3fc974a44c52322e451fd6b9d5c  xsa39-pvops-0003-xen-netback-free-already-allocated-memory-on-failure.patch
5d0db59bbd5ad3a7efae78a6c26fc2491b7c553e5519dd946d1422a116af73dd  xsa39-pvops-0004-netback-correct-netbk_tx_err-to-handle-wrap-around.patch
$
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.10 (GNU/Linux)

iQEcBAEBAgAGBQJREQI5AAoJEIP+FMlX6CvZLbcIAL7gpD+EzDjb+g3ZlORl1jPV
+icqyDoPWeWructbggY+YcJJc2IavNrRXBSN/9edSTUXSi7YTW+Tjeh8bcLza1JM
McWKxPtJB8CKEIAjAeT8qMVaNUNQuJQTtTLtXHGuQE6xwxK8YmgLzQSx91OOp9Bx
49GK1Ptnp7bQoEoc7B3oN6GXr/hs/FvaD0Cr481yUxXX1GxV+AL7sxXiJ4kXu1rE
UTSLFAzUfw1KWI5wP3GQCREhysCvgIq4mZyD5+TF8MUagpg+m1aURs2AUUxrJ/Zw
o+LVEKWYRsTtWIRtwYOdPHn73bllyPOrBgimTDBM9rY9CztOnN8yoPRlUz0Sux0=
=UhBt
-----END PGP SIGNATURE-----

Download attachment "[xsa39-classic-0001-xen-netback-garbage-ring.patch](12/1)" of type "application/octet-stream" (7936 bytes)

Download attachment "[xsa39-classic-0002-xen-netback-wrap-around.patch](12/2)" of type "application/octet-stream" (464 bytes)

Download attachment "[xsa39-pvops-0001-xen-netback-shutdown-the-ring-if-it-contains-garbage.patch](12/3)" of type "application/octet-stream" (8321 bytes)

Download attachment "[xsa39-pvops-0002-xen-netback-don-t-leak-pages-on-failure-in-xen_netbk.patch](12/4)" of type "application/octet-stream" (5021 bytes)

Download attachment "[xsa39-pvops-0003-xen-netback-free-already-allocated-memory-on-failure.patch](12/5)" of type "application/octet-stream" (1467 bytes)

Download attachment "[xsa39-pvops-0004-netback-correct-netbk_tx_err-to-handle-wrap-around.patch](12/6)" of type "application/octet-stream" (868 bytes)

```

[Powered by blists](https://www.openwall.com/blists/) - [more mailing lists](https://lists.openwall.net)

Please check out the
[Open Source Software Security Wiki](https://oss-security.openwall.org/wiki/), which is counterpart to this
[mailing list](https://oss-security.openwall.org/wiki/mailing-lists/oss-security).

Confused about [mailing lists](/lists/) and their use?
[Read about mailing lists on Wikipedia](https://en.wikipedia.org/wiki/Electronic_mailing_list)
and check out these
[guidelines on proper formatting of your messages](https://www.complang.tuwien.ac.at/anton/mail-news-errors.html).



=== Content from www.kernel.org_bb0176dd_20250124_170627.html ===
commit 7773647c3ea250586c2ee44559f6f1bdc2a5c885
Author: Greg Kroah-Hartman
Date: Thu Feb 14 10:57:59 2013 -0800
Linux 3.7.8
commit 330b8abd83d4af378953af708cc10ddf3a5877fd
Author: Marcin Slusarz
Date: Mon Feb 4 21:52:54 2013 +0100
drm/nouveau: add lockdep annotations
commit 5f97ab913cf0fbc378ea8ffc3ee66f4890d11c55 upstream.
1) Lockdep thinks all nouveau subdevs belong to the same class and can be
locked in arbitrary order, which is not true (at least in general case).
Tell it to distinguish subdevs by (o)class type.
2) DRM client can be locked under user client lock - tell lockdep to put
DRM client lock in a separate class.
Reported-by: Arend van Spriel
Reported-by: Peter Hurley
Reported-by: Maarten Lankhorst
Reported-by: Daniel J Blueman
Signed-off-by: Marcin Slusarz
Signed-off-by: Ben Skeggs
Signed-off-by: Greg Kroah-Hartman
commit c7c40b35837b6ea218a5aec82169c93bdc68235f
Author: Eric Dumazet
Date: Fri Jan 11 14:46:37 2013 +0000
net: splice: fix \_\_splice\_segment()
[ Upstream commit bc9540c637c3d8712ccbf9dcf28621f380ed5e64 ]
commit 9ca1b22d6d2 (net: splice: avoid high order page splitting)
forgot that skb->head could need a copy into several page frags.
This could be the case for loopback traffic mostly.
Also remove now useless skb argument from linear\_to\_page()
and \_\_splice\_segment() prototypes.
Signed-off-by: Eric Dumazet
Cc: Willy Tarreau
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 4dd53a6c90a9045524888de2930b56b7833175b2
Author: Eric Dumazet
Date: Sat Jan 5 21:31:18 2013 +0000
net: splice: avoid high order page splitting
[ Upstream commit 82bda6195615891181115f579a480aa5001ce7e9 ]
splice() can handle pages of any order, but network code tries hard to
split them in PAGE\_SIZE units. Not quite successfully anyway, as
\_\_splice\_segment() assumed poff < PAGE\_SIZE. This is true for
the skb->data part, not necessarily for the fragments.
This patch removes this logic to give the pages as they are in the skb.
Signed-off-by: Eric Dumazet
Cc: Willy Tarreau
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 0f0ac9b6a73fe6025723fa4a51c8da2ccead6bff
Author: Eric Dumazet
Date: Wed Jan 9 20:59:09 2013 +0000
tcp: fix splice() and tcp collapsing interaction
[ Upstream commit f26845b43c75d3f32f98d194c1327b5b1e6b3fb0 ]
Under unusual circumstances, TCP collapse can split a big GRO TCP packet
while its being used in a splice(socket->pipe) operation.
skb\_splice\_bits() releases the socket lock before calling
splice\_to\_pipe().
[ 1081.353685] WARNING: at net/ipv4/tcp.c:1330 tcp\_cleanup\_rbuf+0x4d/0xfc()
[ 1081.371956] Hardware name: System x3690 X5 -[7148Z68]-
[ 1081.391820] cleanup rbuf bug: copied AD3BCF1 seq AD370AF rcvnxt AD3CF13
To fix this problem, we must eat skbs in tcp\_recv\_skb().
Remove the inline keyword from tcp\_recv\_skb() definition since
it has three call sites.
Reported-by: Christian Becker
Cc: Willy Tarreau
Signed-off-by: Eric Dumazet
Tested-by: Willy Tarreau
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 09ea1383126d942a993b0895cec16e0961db5af9
Author: Eric Dumazet
Date: Thu Jan 10 07:06:10 2013 +0000
tcp: splice: fix an infinite loop in tcp\_read\_sock()
[ Upstream commit ff905b1e4aad8ccbbb0d42f7137f19482742ff07 ]
commit 02275a2ee7c0 (tcp: don't abort splice() after small transfers)
added a regression.
[ 83.843570] INFO: rcu\_sched self-detected stall on CPU
[ 83.844575] INFO: rcu\_sched detected stalls on CPUs/tasks: { 6} (detected by 0, t=21002 jiffies, g=4457, c=4456, q=13132)
[ 83.844582] Task dump for CPU 6:
[ 83.844584] netperf R running task 0 8966 8952 0x0000000c
[ 83.844587] 0000000000000000 0000000000000006 0000000000006c6c 0000000000000000
[ 83.844589] 000000000000006c 0000000000000096 ffffffff819ce2bc ffffffffffffff10
[ 83.844592] ffffffff81088679 0000000000000010 0000000000000246 ffff880c4b9ddcd8
[ 83.844594] Call Trace:
[ 83.844596] [] ? vprintk\_emit+0x1c9/0x4c0
[ 83.844601] [] ? schedule+0x29/0x70
[ 83.844606] [] ? tcp\_splice\_data\_recv+0x42/0x50
[ 83.844610] [] ? tcp\_read\_sock+0xda/0x260
[ 83.844613] [] ? tcp\_prequeue\_process+0xb0/0xb0
[ 83.844615] [] ? tcp\_splice\_read+0xc0/0x250
[ 83.844618] [] ? sock\_splice\_read+0x22/0x30
[ 83.844622] [] ? do\_splice\_to+0x7b/0xa0
[ 83.844627] [] ? sys\_splice+0x59c/0x5d0
[ 83.844630] [] ? putname+0x2b/0x40
[ 83.844633] [] ? do\_sys\_open+0x174/0x1e0
[ 83.844636] [] ? system\_call\_fastpath+0x16/0x1b
if recv\_actor() returns 0, we should stop immediately,
because looping wont give a chance to drain the pipe.
Signed-off-by: Eric Dumazet
Cc: Willy Tarreau
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 301008f5b5a734d5d1ddd5c4a95d69812ae4c7e7
Author: Willy Tarreau
Date: Sun Dec 2 11:49:27 2012 +0000
tcp: don't abort splice() after small transfers
[ Upstream commit 02275a2ee7c0ea475b6f4a6428f5df592bc9d30b ]
TCP coalescing added a regression in splice(socket->pipe) performance,
for some workloads because of the way tcp\_read\_sock() is implemented.
The reason for this is the break when (offset + 1 != skb->len).
As we released the socket lock, this condition is possible if TCP stack
added a fragment to the skb, which can happen with TCP coalescing.
So let's go back to the beginning of the loop when this happens,
to give a chance to splice more frags per system call.
Doing so fixes the issue and makes GRO 10% faster than LRO
on CPU-bound splice() workloads instead of the opposite.
Signed-off-by: Willy Tarreau
Signed-off-by: Eric Dumazet
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit fa237a5c85320c6597caaea5dfeff5e2d995e666
Author: Ilpo Järvinen
Date: Mon Feb 4 02:14:25 2013 +0000
tcp: fix for zero packets\_in\_flight was too broad
[ Upstream commit 6731d2095bd4aef18027c72ef845ab1087c3ba63 ]
There are transients during normal FRTO procedure during which
the packets\_in\_flight can go to zero between write\_queue state
updates and firing the resulting segments out. As FRTO processing
occurs during that window the check must be more precise to
not match "spuriously" :-). More specificly, e.g., when
packets\_in\_flight is zero but FLAG\_DATA\_ACKED is true the problematic
branch that set cwnd into zero would not be taken and new segments
might be sent out later.
Signed-off-by: Ilpo Järvinen
Tested-by: Eric Dumazet
Acked-by: Neal Cardwell
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit b80440945d3644f4dcc1d0817e2f07d9c8d1ef8a
Author: Eric Dumazet
Date: Sun Feb 3 09:13:05 2013 +0000
tcp: frto should not set snd\_cwnd to 0
[ Upstream commit 2e5f421211ff76c17130b4597bc06df4eeead24f ]
Commit 9dc274151a548 (tcp: fix ABC in tcp\_slow\_start())
uncovered a bug in FRTO code :
tcp\_process\_frto() is setting snd\_cwnd to 0 if the number
of in flight packets is 0.
As Neal pointed out, if no packet is in flight we lost our
chance to disambiguate whether a loss timeout was spurious.
We should assume it was a proper loss.
Reported-by: Pasi Kärkkäinen
Signed-off-by: Neal Cardwell
Signed-off-by: Eric Dumazet
Cc: Ilpo Järvinen
Cc: Yuchung Cheng
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit e90bb8480d31f54d1ccc12602e5800f7ff31dcc1
Author: Eric Dumazet
Date: Sat Feb 2 05:23:16 2013 +0000
tcp: fix an infinite loop in tcp\_slow\_start()
[ Upstream commit 973ec449bb4f2b8c514bacbcb4d9506fc31c8ce3 ]
Since commit 9dc274151a548 (tcp: fix ABC in tcp\_slow\_start()),
a nul snd\_cwnd triggers an infinite loop in tcp\_slow\_start()
Avoid this infinite loop and log a one time error for further
analysis. FRTO code is suspected to cause this bug.
Reported-by: Pasi Kärkkäinen
Signed-off-by: Eric Dumazet
Cc: Neal Cardwell
Cc: Yuchung Cheng
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 3005cf62aac8c1b68c0201ead876b30a6c0f9ddd
Author: Yuchung Cheng
Date: Thu Jan 31 11:16:46 2013 -0800
tcp: detect SYN/data drop when F-RTO is disabled
[ Upstream commit 66555e92fb7a619188c02cceae4bbc414f15f96d ]
On receiving the SYN-ACK, Fast Open checks icsk\_retransmit for SYN
retransmission to detect SYN/data drops. But if F-RTO is disabled,
icsk\_retransmit is reset at step D of tcp\_fastretrans\_alert() (
under tcp\_ack()) before tcp\_rcv\_fastopen\_synack(). The fix is to use
total\_retrans instead which accounts for SYN retransmission regardless
the use of F-RTO.
Signed-off-by: Yuchung Cheng
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 3cea56174bd3d79f8bb9ec500dfc95c4660a6ca9
Author: Daniel Borkmann
Date: Fri Feb 8 03:04:35 2013 +0000
net: sctp: sctp\_endpoint\_free: zero out secret key data
[ Upstream commit b5c37fe6e24eec194bb29d22fdd55d73bcc709bf ]
On sctp\_endpoint\_destroy, previously used sensitive keying material
should be zeroed out before the memory is returned, as we already do
with e.g. auth keys when released.
Signed-off-by: Daniel Borkmann
Acked-by: Vlad Yasevich
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 86e4935c889c0e4aadd3f7cf86a22ea09f959600
Author: Daniel Borkmann
Date: Fri Feb 8 03:04:34 2013 +0000
net: sctp: sctp\_setsockopt\_auth\_key: use kzfree instead of kfree
[ Upstream commit 6ba542a291a5e558603ac51cda9bded347ce7627 ]
In sctp\_setsockopt\_auth\_key, we create a temporary copy of the user
passed shared auth key for the endpoint or association and after
internal setup, we free it right away. Since it's sensitive data, we
should zero out the key before returning the memory back to the
allocator. Thus, use kzfree instead of kfree, just as we do in
sctp\_auth\_key\_put().
Signed-off-by: Daniel Borkmann
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 2a64537939d88f55564c276c61b5c4660636d9d0
Author: Neil Horman
Date: Thu Jan 17 11:15:08 2013 +0000
sctp: refactor sctp\_outq\_teardown to insure proper re-initalization
[ Upstream commit 2f94aabd9f6c925d77aecb3ff020f1cc12ed8f86 ]
Jamie Parsons reported a problem recently, in which the re-initalization of an
association (The duplicate init case), resulted in a loss of receive window
space. He tracked down the root cause to sctp\_outq\_teardown, which discarded
all the data on an outq during a re-initalization of the corresponding
association, but never reset the outq->outstanding\_data field to zero. I wrote,
and he tested this fix, which does a proper full re-initalization of the outq,
fixing this problem, and hopefully future proofing us from simmilar issues down
the road.
Signed-off-by: Neil Horman
Reported-by: Jamie Parsons
Tested-by: Jamie Parsons
CC: Jamie Parsons
CC: Vlad Yasevich
CC: "David S. Miller"
CC: netdev@vger.kernel.org
Acked-by: Vlad Yasevich
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 4ad45ec2e4660a7643a0434b1db47085532afdb1
Author: Steffen Klassert
Date: Tue Jan 22 00:01:28 2013 +0000
ipv4: Fix route refcount on pmtu discovery
[ Upstream commit b44108dbdbaa07c609bb5755e8dd6c2035236251 ]
git commit 9cb3a50c (ipv4: Invalidate the socket cached route on
pmtu events if possible) introduced a refcount problem. We don't
get a refcount on the route if we get it from\_\_sk\_dst\_get(), but
we need one if we want to reuse this route because \_\_sk\_dst\_set()
releases the refcount of the old route. This patch adds proper
refcount handling for that case. We introduce a 'new' flag to
indicate that we are going to use a new route and we release the
old route only if we replace it by a new one.
Reported-by: Julian Anastasov
Signed-off-by: Steffen Klassert
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 5874dd2fa88cc8b977b839a70679d61624e89ad4
Author: Steffen Klassert
Date: Mon Jan 21 02:00:03 2013 +0000
ipv4: Add a socket release callback for datagram sockets
[ Upstream commit 8141ed9fcedb278f4a3a78680591bef1e55f75fb ]
This implements a socket release callback function to check
if the socket cached route got invalid during the time
we owned the socket. The function is used from udp, raw
and ping sockets.
Signed-off-by: Steffen Klassert
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 1f35a1715c629c1756bf47a6166ead2754ed6d1d
Author: Steffen Klassert
Date: Mon Jan 21 01:59:11 2013 +0000
ipv4: Invalidate the socket cached route on pmtu events if possible
[ Upstream commit 9cb3a50c5f63ed745702972f66eaee8767659acd ]
The route lookup in ipv4\_sk\_update\_pmtu() might return a route
different from the route we cached at the socket. This is because
standart routes are per cpu, so each cpu has it's own struct rtable.
This means that we do not invalidate the socket cached route if the
NET\_RX\_SOFTIRQ is not served by the same cpu that the sending socket
uses. As a result, the cached route reused until we disconnect.
With this patch we invalidate the socket cached route if possible.
If the socket is owened by the user, we can't update the cached
route directly. A followup patch will implement socket release
callback functions for datagram sockets to handle this case.
Reported-by: Yurij M. Plotnikov
Signed-off-by: Steffen Klassert
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit c88be877a5955ba10e7bd35c8be9dddeef84b116
Author: Steffen Klassert
Date: Wed Jan 16 22:09:49 2013 +0000
ipv6: Add an error handler for icmp6
[ Upstream commit 6f809da27c94425e07be4a64d5093e1df95188e9 ]
pmtu and redirect events are now handled in the protocols error handler,
so add an error handler for icmp6 to do this. It is needed in the case
when we have no socket context. Based on a patch by Duan Jiong.
Reported-by: Duan Jiong
Signed-off-by: Steffen Klassert
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit b8291bbfa392773abe54aed10e6c5553d8cde8b3
Author: Steffen Klassert
Date: Wed Jan 16 20:58:10 2013 +0000
ipv4: Don't update the pmtu on mtu locked routes
[ Upstream commit fa1e492aa3cbafba9f8fc6d05e5b08a3091daf4a ]
Routes with locked mtu should not use learned pmtu informations,
so do not update the pmtu on these routes.
Reported-by: Julian Anastasov
Signed-off-by: Steffen Klassert
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 0196923c77f46e98e38bc39e42e5f2c646c6733c
Author: Steffen Klassert
Date: Wed Jan 16 20:55:01 2013 +0000
ipv4: Remove output route check in ipv4\_mtu
[ Upstream commit 38d523e2948162776903349c89d65f7b9370dadb ]
The output route check was introduced with git commit 261663b0
(ipv4: Don't use the cached pmtu informations for input routes)
during times when we cached the pmtu informations on the
inetpeer. Now the pmtu informations are back in the routes,
so this check is obsolete. It also had some unwanted side effects,
as reported by Timo Teras and Lukas Tribus.
Signed-off-by: Steffen Klassert
Acked-by: Timo Teräs
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 8bd686bf8a379fe7fe0fb79b6e1ced508eddec4a
Author: Ian Campbell
Date: Wed Feb 6 23:41:38 2013 +0000
netback: correct netbk\_tx\_err to handle wrap around.
[ Upstream commit b9149729ebdcfce63f853aa54a404c6a8f6ebbf3 ]
Signed-off-by: Ian Campbell
Acked-by: Jan Beulich
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 5847062310d46afd500e3177fdea8e710127f831
Author: Ian Campbell
Date: Wed Feb 6 23:41:37 2013 +0000
xen/netback: free already allocated memory on failure in xen\_netbk\_get\_requests
[ Upstream commit 4cc7c1cb7b11b6f3515bd9075527576a1eecc4aa ]
Signed-off-by: Ian Campbell
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit bf23a4d77d92acc048bd74c604e840ab3dd6bade
Author: Matthew Daley
Date: Wed Feb 6 23:41:36 2013 +0000
xen/netback: don't leak pages on failure in xen\_netbk\_tx\_check\_gop.
[ Upstream commit 7d5145d8eb2b9791533ffe4dc003b129b9696c48 ]
Signed-off-by: Matthew Daley
Reviewed-by: Konrad Rzeszutek Wilk
Acked-by: Ian Campbell
Acked-by: Jan Beulich
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 036610027dd4ada9996ded5a80b75dd8911980af
Author: Ian Campbell
Date: Wed Feb 6 23:41:35 2013 +0000
xen/netback: shutdown the ring if it contains garbage.
[ Upstream commit 48856286b64e4b66ec62b94e504d0b29c1ade664 ]
A buggy or malicious frontend should not be able to confuse netback.
If we spot anything which is not as it should be then shutdown the
device and don't try to continue with the ring in a potentially
hostile state. Well behaved and non-hostile frontends will not be
penalised.
As well as making the existing checks for such errors fatal also add a
new check that ensures that there isn't an insane number of requests
on the ring (i.e. more than would fit in the ring). If the ring
contains garbage then previously is was possible to loop over this
insane number, getting an error each time and therefore not generating
any more pending requests and therefore not exiting the loop in
xen\_netbk\_tx\_build\_gops for an externded period.
Also turn various netdev\_dbg calls which no precipitate a fatal error
into netdev\_err, they are rate limited because the device is shutdown
afterwards.
This fixes at least one known DoS/softlockup of the backend domain.
Signed-off-by: Ian Campbell
Reviewed-by: Konrad Rzeszutek Wilk
Acked-by: Jan Beulich
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 3d96b3ff38e03ad8574f08fffd9d7e3657419670
Author: Heiko Carstens
Date: Fri Feb 8 00:19:11 2013 +0000
atm/iphase: rename fregt\_t -> ffreg\_t
[ Upstream commit ab54ee80aa7585f9666ff4dd665441d7ce41f1e8 ]
We have conflicting type qualifiers for "freg\_t" in s390's ptrace.h and the
iphase atm device driver, which causes the compile error below.
Unfortunately the s390 typedef can't be renamed, since it's a user visible api,
nor can I change the include order in s390 code to avoid the conflict.
So simply rename the iphase typedef to a new name. Fixes this compile error:
In file included from drivers/atm/iphase.c:66:0:
drivers/atm/iphase.h:639:25: error: conflicting type qualifiers for 'freg\_t'
In file included from next/arch/s390/include/asm/ptrace.h:9:0,
from next/arch/s390/include/asm/lowcore.h:12,
from next/arch/s390/include/asm/thread\_info.h:30,
from include/linux/thread\_info.h:54,
from include/linux/preempt.h:9,
from include/linux/spinlock.h:50,
from include/linux/seqlock.h:29,
from include/linux/time.h:5,
from include/linux/stat.h:18,
from include/linux/module.h:10,
from drivers/atm/iphase.c:43:
next/arch/s390/include/uapi/asm/ptrace.h:197:3: note: previous declaration of 'freg\_t' was here
Signed-off-by: Heiko Carstens
Acked-by: chas williams - CONTRACTOR
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit ea6a9fca541b3dfdc8085f1493f4794f9baddfe9
Author: Tommi Rantala
Date: Wed Feb 6 03:24:02 2013 +0000
ipv6/ip6\_gre: fix error case handling in ip6gre\_tunnel\_xmit()
[ Upstream commit 41ab3e31bd50b42c85ac0aa0469642866aee2a9a ]
ip6gre\_tunnel\_xmit() is leaking the skb when we hit this error branch,
and the -1 return value from this function is bogus. Use the error
handling we already have in place in ip6gre\_tunnel\_xmit() for this error
case to fix this.
Signed-off-by: Tommi Rantala
Acked-by: Eric Dumazet
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 29cb024d2df4072cba88d8c7e62cc7617fbb689d
Author: Phil Sutter
Date: Fri Feb 1 07:21:41 2013 +0000
packet: fix leakage of tx\_ring memory
[ Upstream commit 9665d5d62487e8e7b1f546c00e11107155384b9a ]
When releasing a packet socket, the routine packet\_set\_ring() is reused
to free rings instead of allocating them. But when calling it for the
first time, it fills req->tp\_block\_nr with the value of rb->pg\_vec\_len
which in the second invocation makes it bail out since req->tp\_block\_nr
is greater zero but req->tp\_block\_size is zero.
This patch solves the problem by passing a zeroed auto-variable to
packet\_set\_ring() upon each invocation from packet\_release().
As far as I can tell, this issue exists even since 69e3c75 (net: TX\_RING
and packet mmap), i.e. the original inclusion of TX ring support into
af\_packet, but applies only to sockets with both RX and TX ring
allocated, which is probably why this was unnoticed all the time.
Signed-off-by: Phil Sutter
Cc: Johann Baudy
Cc: Daniel Borkmann
Acked-by: Daniel Borkmann
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit bec1a03d483aa8e50657f2599d228fc879d385ea
Author: David S. Miller
Date: Tue Jan 29 22:58:04 2013 -0500
via-rhine: Fix bugs in NAPI support.
[ Upstream commit 559bcac35facfed49ab4f408e162971612dcfdf3 ]
1) rhine\_tx() should use dev\_kfree\_skb() not dev\_kfree\_skb\_irq()
2) rhine\_slow\_event\_task's NAPI triggering logic is racey, it
should just hit the interrupt mask register. This is the
same as commit 7dbb491878a2c51d372a8890fa45a8ff80358af1
("r8169: avoid NAPI scheduling delay.") made to fix the same
problem in the r8169 driver. From Francois Romieu.
Reported-by: Jamie Gloudon
Tested-by: Jamie Gloudon
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 854b033a4cd8c405731f7ddb26d3ab8d39225cf1
Author: Marcelo Ricardo Leitner
Date: Tue Jan 29 22:26:08 2013 +0000
ipv6: do not create neighbor entries for local delivery
[ Upstream commit bd30e947207e2ea0ff2c08f5b4a03025ddce48d3 ]
They will be created at output, if ever needed. This avoids creating
empty neighbor entries when TPROXYing/Forwarding packets for addresses
that are not even directly reachable.
Note that IPv4 already handles it this way. No neighbor entries are
created for local input.
Tested by myself and customer.
Signed-off-by: Jiri Pirko
Signed-off-by: Marcelo Ricardo Leitner
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit badaed3effae5565307a25a3692ebde36e25fa33
Author: Cong Wang
Date: Sun Jan 27 21:14:08 2013 +0000
pktgen: correctly handle failures when adding a device
[ Upstream commit 604dfd6efc9b79bce432f2394791708d8e8f6efc ]
The return value of pktgen\_add\_device() is not checked, so
even if we fail to add some device, for example, non-exist one,
we still see "OK:...". This patch fixes it.
After this patch, I got:
# echo "add\_device non-exist" > /proc/net/pktgen/kpktgend\_0
-bash: echo: write error: No such device
# cat /proc/net/pktgen/kpktgend\_0
Running:
Stopped:
Result: ERROR: can not add device non-exist
# echo "add\_device eth0" > /proc/net/pktgen/kpktgend\_0
# cat /proc/net/pktgen/kpktgend\_0
Running:
Stopped: eth0
Result: OK: add\_device=eth0
(Candidate for -stable)
Cc: David S. Miller
Signed-off-by: Cong Wang
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 70b40e0ec5a61b7c073690c2a2fc1da13b520254
Author: Pravin B Shelar
Date: Wed Jan 23 11:45:42 2013 +0000
IP\_GRE: Fix kernel panic in IP\_GRE with GRE csum.
[ Upstream commit 5465740ace36f179de5bb0ccb5d46ddeb945e309 ]
Due to IP\_GRE GSO support, GRE can recieve non linear skb which
results in panic in case of GRE\_CSUM. Following patch fixes it by
using correct csum API.
Bug introduced in commit 6b78f16e4bdde3936b (gre: add GSO support)
Signed-off-by: Pravin B Shelar
Acked-by: Eric Dumazet
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit be730f3d2049d1161ea22ada338dd1aeaef20065
Author: Eric Dumazet
Date: Fri Jan 25 07:44:41 2013 +0000
net: loopback: fix a dst refcounting issue
[ Upstream commit 794ed393b707f01858f5ebe2ae5eabaf89d00022 ]
Ben Greear reported crashes in ip\_rcv\_finish() on a stress
test involving many macvlans.
We tracked the bug to a dst use after free. ip\_rcv\_finish()
was calling dst->input() and got garbage for dst->input value.
It appears the bug is in loopback driver, lacking
a skb\_dst\_force() before calling netif\_rx().
As a result, a non refcounted dst, normally protected by a
RCU read\_lock section, was escaping this section and could
be freed before the packet being processed.
[] loopback\_xmit+0x64/0x83
[] dev\_hard\_start\_xmit+0x26c/0x35e
[] dev\_queue\_xmit+0x2c4/0x37c
[] ? dev\_hard\_start\_xmit+0x35e/0x35e
[] ? eth\_header+0x28/0xb6
[] neigh\_resolve\_output+0x176/0x1a7
[] ip\_finish\_output2+0x297/0x30d
[] ? ip\_finish\_output2+0x137/0x30d
[] ip\_finish\_output+0x63/0x68
[] ip\_output+0x61/0x67
[] dst\_output+0x17/0x1b
[] ip\_local\_out+0x1e/0x23
[] ip\_queue\_xmit+0x315/0x353
[] ? ip\_send\_unicast\_reply+0x2cc/0x2cc
[] tcp\_transmit\_skb+0x7ca/0x80b
[] tcp\_connect+0x53c/0x587
[] ? getnstimeofday+0x44/0x7d
[] ? ktime\_get\_real+0x11/0x3e
[] tcp\_v4\_connect+0x3c2/0x431
[] \_\_inet\_stream\_connect+0x84/0x287
[] ? inet\_stream\_connect+0x22/0x49
[] ? \_local\_bh\_enable\_ip+0x84/0x9f
[] ? local\_bh\_enable+0xd/0x11
[] ? lock\_sock\_nested+0x6e/0x79
[] ? inet\_stream\_connect+0x22/0x49
[] inet\_stream\_connect+0x33/0x49
[] sys\_connect+0x75/0x98
This bug was introduced in linux-2.6.35, in commit
7fee226ad2397b (net: add a noref bit on skb dst)
skb\_dst\_force() is enforced in dev\_queue\_xmit() for devices having a
qdisc.
Reported-by: Ben Greear
Signed-off-by: Eric Dumazet
Tested-by: Ben Greear
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit d432256090663bd155fad2c0649cc2d9e0c56c99
Author: Timo Teräs
Date: Mon Jan 21 22:30:35 2013 +0000
r8169: remove the obsolete and incorrect AMD workaround
[ Upstream commit 5d0feaff230c0abfe4a112e6f09f096ed99e0b2d ]
This was introduced in commit 6dccd16 "r8169: merge with version
6.001.00 of Realtek's r8169 driver". I did not find the version
6.001.00 online, but in 6.002.00 or any later r8169 from Realtek
this hunk is no longer present.
Also commit 05af214 "r8169: fix Ethernet Hangup for RTL8110SC
rev d" claims to have fixed this issue otherwise.
The magic compare mask of 0xfffe000 is dubious as it masks
parts of the Reserved part, and parts of the VLAN tag. But this
does not make much sense as the VLAN tag parts are perfectly
valid there. In matter of fact this seems to be triggered with
any VLAN tagged packet as RxVlanTag bit is matched. I would
suspect 0xfffe0000 was intended to test reserved part only.
Finally, this hunk is evil as it can cause more packets to be
handled than what was NAPI quota causing net/core/dev.c:
net\_rx\_action(): WARN\_ON\_ONCE(work > weight) to trigger, and
mess up the NAPI state causing device to hang.
As result, any system using VLANs and having high receive
traffic (so that NAPI poll budget limits rtl\_rx) would result
in device hang.
Signed-off-by: Timo Teräs
Acked-by: Francois Romieu
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit b463269054078fbb6d9a0b4d86ff3ceafd4b28b4
Author: Eric Dumazet
Date: Tue Jan 22 06:33:05 2013 +0000
netxen: fix off by one bug in netxen\_release\_tx\_buffer()
[ Upstream commit a05948f296ce103989b28a2606e47d2e287c3c89 ]
Christoph Paasch found netxen could trigger a BUG in its dismantle
phase, in netxen\_release\_tx\_buffer(), using full size TSO packets.
cmd\_buf->frag\_count includes the skb->data part, so the loop must
start at index 1 instead of 0, or else we can make an out
of bound access to cmd\_buff->frag\_array[MAX\_SKB\_FRAGS + 2]
Christoph provided the fixes in netxen\_map\_tx\_skb() function.
In case of a dma mapping error, its better to clear the dma fields
so that we don't try to unmap them again in netxen\_release\_tx\_buffer()
Reported-by: Christoph Paasch
Signed-off-by: Eric Dumazet
Tested-by: Christoph Paasch
Cc: Sony Chacko
Cc: Rajesh Borundia
Signed-off-by: Christoph Paasch
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit fdab75e4f3b49683ab917717ea5183c6dbce708d
Author: Tilman Schmidt
Date: Mon Jan 21 11:57:21 2013 +0000
isdn/gigaset: fix zero size border case in debug dump
[ Upstream commit d721a1752ba544df8d7d36959038b26bc92bdf80 ]
If subtracting 12 from l leaves zero we'd do a zero size allocation,
leading to an oops later when we try to set the NUL terminator.
Reported-by: Dan Carpenter
Signed-off-by: Tilman Schmidt
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 0e3fd03bdeb3cc0ce601723d2406be53b829be25
Author: Eric Dumazet
Date: Sat Jan 19 16:10:37 2013 +0000
tcp: fix incorrect LOCKDROPPEDICMPS counter
[ Upstream commit b74aa930ef49a3c0d8e4c1987f89decac768fb2c ]
commit 563d34d057 (tcp: dont drop MTU reduction indications)
added an error leading to incorrect accounting of
LINUX\_MIB\_LOCKDROPPEDICMPS
If socket is owned by the user, we want to increment
this SNMP counter, unless the message is a
(ICMP\_DEST\_UNREACH,ICMP\_FRAG\_NEEDED) one.
Reported-by: Maciej ¯enczykowski
Signed-off-by: Eric Dumazet
Cc: Neal Cardwell
Signed-off-by: Maciej ¯enczykowski
Acked-by: Neal Cardwell
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit ec9336e3e7dc3f048f2c4d42e1b9851ea3211c35
Author: Or Gerlitz
Date: Thu Jan 17 05:30:43 2013 +0000
net/mlx4\_core: Set number of msix vectors under SRIOV mode to firmware defaults
[ Upstream commit ca4c7b35f75492de7fbf5ee95be07481c348caee ]
The lines
if (mlx4\_is\_mfunc(dev)) {
nreq = 2;
} else {
which hard code the number of requested msi-x vectors under multi-function
mode to two can be removed completely, since the firmware sets num\_eqs and
reserved\_eqs appropriately Thus, the code line:
nreq = min\_t(int, dev->caps.num\_eqs - dev->caps.reserved\_eqs, nreq);
is by itself sufficient and correct for all cases. Currently, for mfunc
mode num\_eqs = 32 and reserved\_eqs = 28, hence four vectors will be enabled.
This triples (one vector is used for the async events and commands EQ) the
horse power provided for processing of incoming packets on netdev RSS scheme,
IO initiators/targets commands processing flows, etc.
Reviewed-by: Jack Morgenstein
Signed-off-by: Amir Vadai
Signed-off-by: Or Gerlitz
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit cef928e94f080a5b54bab3401b2611b9fc77b53e
Author: Yan Burman
Date: Thu Jan 17 05:30:42 2013 +0000
net/mlx4\_en: Fix bridged vSwitch configuration for non SRIOV mode
[ Upstream commit 213815a1e6ae70b9648483b110bc5081795f99e8 ]
Commit 5b4c4d36860e "mlx4\_en: Allow communication between functions on
same host" introduced a regression under which a bridge acting as vSwitch
whose uplink is an mlx4 Ethernet device become non-operative in native
(non sriov) mode. This happens since broadcast ARP requests sent by VMs
were loopback-ed by the HW and hence the bridge learned VM source MACs
on both the VM and the uplink ports.
The fix is to place the DMAC in the send WQE only under SRIOV/eSwitch
configuration or when the device is in selftest.
Reviewed-by: Or Gerlitz
Signed-off-by: Yan Burman
Signed-off-by: Amir Vadai
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 665dbf232cda5132238a4c525f8ab62d65fa0cf9
Author: Rob Herring
Date: Wed Jan 16 13:36:37 2013 +0000
net: calxedaxgmac: throw away overrun frames
[ Upstream commit d6fb3be544b46a7611a3373fcaa62b5b0be01888 ]
The xgmac driver assumes 1 frame per descriptor. If a frame larger than
the descriptor's buffer size is received, the frame will spill over into
the next descriptor. So check for received frames that span more than one
descriptor and discard them. This prevents a crash if we receive erroneous
large packets.
Signed-off-by: Rob Herring
Cc: netdev@vger.kernel.org
Cc: linux-kernel@vger.kernel.org
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 6a56fc1543efd880e4b26cb44e230328c2e97c66
Author: Eric Dumazet
Date: Thu Jan 17 13:30:49 2013 -0800
macvlan: fix macvlan\_get\_size()
[ Upstream commit 01fe944f1024bd4e5c327ddbe8d657656b66af2f ]
commit df8ef8f3aaa (macvlan: add FDB bridge ops and macvlan flags)
forgot to update macvlan\_get\_size() after the addition of
IFLA\_MACVLAN\_FLAGS
Signed-off-by: Eric Dumazet
Cc: John Fastabend
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit c716ba51a90f43e58aeda9cc7afb937977592ffc
Author: Romain KUNTZ
Date: Wed Jan 16 12:47:40 2013 +0000
ipv6: fix header length calculation in ip6\_append\_data()
[ Upstream commit 7efdba5bd9a2f3e2059beeb45c9fa55eefe1bced ]
Commit 299b0767 (ipv6: Fix IPsec slowpath fragmentation problem)
has introduced a error in the header length calculation that
provokes corrupted packets when non-fragmentable extensions
headers (Destination Option or Routing Header Type 2) are used.
rt->rt6i\_nfheader\_len is the length of the non-fragmentable
extension header, and it should be substracted to
rt->dst.header\_len, and not to exthdrlen, as it was done before
commit 299b0767.
This patch reverts to the original and correct behavior. It has
been successfully tested with and without IPsec on packets
that include non-fragmentable extensions headers.
Signed-off-by: Romain Kuntz
Acked-by: Steffen Klassert
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 042e1808bea6a9751a106d4ed0e1f44b7fa136ce
Author: Stephen Hemminger
Date: Wed Jan 16 09:55:57 2013 -0800
MAINTAINERS: Stephen Hemminger email change
[ Upstream commit adbbf69d1a54abf424e91875746a610dcc80017d ]
I changed my email because the vyatta.com mail server is now
redirected to brocade.com; and the Brocade mail system
is not friendly to Linux desktop users.
Signed-off-by: Stephen Hemminger
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit d0f5d39ef79b9b4023f51664e15a5373ea3ea9eb
Author: Eric Dumazet
Date: Sun Jan 13 18:21:51 2013 +0000
tcp: fix a panic on UP machines in reqsk\_fastopen\_remove
[ Upstream commit cce894bb824429fd312706c7012acae43e725865 ]
spin\_is\_locked() on a non !SMP build is kind of useless.
BUG\_ON(!spin\_is\_locked(xx)) is guaranteed to crash.
Just remove this check in reqsk\_fastopen\_remove() as
the callers do hold the socket lock.
Reported-by: Ketan Kulkarni
Signed-off-by: Eric Dumazet
Cc: Jerry Chu
Cc: Yuchung Cheng
Cc: Dave Taht
Acked-by: H.K. Jerry Chu
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 10bff21d37cd8751f4fd445dbffd3603f45ff453
Author: Stanislaw Gruszka
Date: Thu Jan 10 23:19:10 2013 +0000
net, wireless: overwrite default\_ethtool\_ops
[ Upstream commit d07d7507bfb4e23735c9b83e397c43e1e8a173e8 ]
Since:
commit 2c60db037034d27f8c636403355d52872da92f81
Author: Eric Dumazet
Date: Sun Sep 16 09:17:26 2012 +0000
net: provide a default dev->ethtool\_ops
wireless core does not correctly assign ethtool\_ops.
After alloc\_netdev\*() call, some cfg80211 drivers provide they own
ethtool\_ops, but some do not. For them, wireless core provide generic
cfg80211\_ethtool\_ops, which is assigned in NETDEV\_REGISTER notify call:
if (!dev->ethtool\_ops)
dev->ethtool\_ops = &cfg80211\_ethtool\_ops;
But after Eric's commit, dev->ethtool\_ops is no longer NULL (on cfg80211
drivers without custom ethtool\_ops), but points to &default\_ethtool\_ops.
In order to fix the problem, provide function which will overwrite
default\_ethtool\_ops and use it by wireless core.
Signed-off-by: Stanislaw Gruszka
Acked-by: Johannes Berg
Acked-by: Ben Hutchings
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 0e352e0658b3093553aabc80ef8caf6d0024c968
Author: Romain Kuntz
Date: Wed Jan 9 15:02:26 2013 +0100
ipv6: fix the noflags test in addrconf\_get\_prefix\_route
[ Upstream commit 85da53bf1c336bb07ac038fb951403ab0478d2c5 ]
The tests on the flags in addrconf\_get\_prefix\_route() does no make
much sense: the 'noflags' parameter contains the set of flags that
must not match with the route flags, so the test must be done
against 'noflags', and not against 'flags'.
Signed-off-by: Romain Kuntz
Acked-by: YOSHIFUJI Hideaki
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit dcc1565d8eb4abeebe8910c564cd601f953a7a1f
Author: Cong Wang
Date: Mon Jan 7 21:17:00 2013 +0000
net: prevent setting ttl=0 via IP\_TTL
[ Upstream commit c9be4a5c49cf51cc70a993f004c5bb30067a65ce ]
A regression is introduced by the following commit:
commit 4d52cfbef6266092d535237ba5a4b981458ab171
Author: Eric Dumazet
Date: Tue Jun 2 00:42:16 2009 -0700
net: ipv4/ip\_sockglue.c cleanups
Pure cleanups
but it is not a pure cleanup...
- if (val != -1 && (val < 1 || val>255))
+ if (val != -1 && (val < 0 || val > 255))
Since there is no reason provided to allow ttl=0, change it back.
Reported-by: nitin padalia
Cc: nitin padalia
Cc: Eric Dumazet
Cc: David S. Miller
Signed-off-by: Cong Wang
Acked-by: Eric Dumazet
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 99de47aaa41e7da936fb73380b120ed0c05c5b10
Author: Mike Snitzer
Date: Thu Jan 31 14:11:14 2013 +0000
dm thin: fix queue limits stacking
commit 0f640dca08330dfc7820d610578e5935b5e654b2 upstream.
thin\_io\_hints() is blindly copying the queue limits from the thin-pool
which can lead to incorrect limits being set. The fix here simply
deletes the thin\_io\_hints() hook which leaves the existing stacking
infrastructure to set the limits correctly.
When a thin-pool uses an MD device for the data device a thin device
from the thin-pool must respect MD's constraints about disallowing a bio
from spanning multiple chunks. Otherwise we can see problems. If the raid0
chunksize is 1152K and thin-pool chunksize is 256K I see the following
md/raid0 error (with extra debug tracing added to thin\_endio) when
mkfs.xfs is executed against the thin device:
md/raid0:md99: make\_request bug: can't convert block across chunks or bigger than 1152k 6688 127
device-mapper: thin: bio sector=2080 err=-5 bi\_size=130560 bi\_rw=17 bi\_vcnt=32 bi\_idx=0
This extra DM debugging shows that the failing bio is spanning across
the first and second logical 1152K chunk (sector 2080 + 255 takes the
bio beyond the first chunk's boundary of sector 2304). So the bio
splitting that DM is doing clearly isn't respecting the MD limits.
max\_hw\_sectors\_kb is 127 for both the thin-pool and thin device
(queue\_max\_hw\_sectors returns 255 so we'll excuse sysfs's lack of
precision). So this explains why bi\_size is 130560.
But the thin device's max\_hw\_sectors\_kb should be 4 (PAGE\_SIZE) given
that it doesn't have a .merge function (for bio\_add\_page to consult
indirectly via dm\_merge\_bvec) yet the thin-pool does sit above an MD
device that has a compulsory merge\_bvec\_fn. This scenario is exactly
why DM must resort to sending single PAGE\_SIZE bios to the underlying
layer. Some additional context for this is available in the header for
commit 8cbeb67a ("dm: avoid unsupported spanning of md stripe boundaries").
Long story short, the reason a thin device doesn't properly get
configured to have a max\_hw\_sectors\_kb of 4 (PAGE\_SIZE) is that
thin\_io\_hints() is blindly copying the queue limits from the thin-pool
device directly to the thin device's queue limits.
Fix this by eliminating thin\_io\_hints. Doing so is safe because the
block layer's queue limits stacking already enables the upper level thin
device to inherit the thin-pool device's discard and minimum\_io\_size and
optimal\_io\_size limits that get set in pool\_io\_hints. But avoiding the
queue limits copy allows the thin and thin-pool limits to be different
where it is important, namely max\_hw\_sectors\_kb.
Reported-by: Daniel Browning
Signed-off-by: Mike Snitzer
Cc: stable@vger.kernel.org
Signed-off-by: Alasdair G Kergon
Signed-off-by: Greg Kroah-Hartman
commit 7422eb949449d1b069357b61825679349e18ff8e
Author: Linus Walleij
Date: Thu Dec 20 10:20:15 2012 +0100
mfd: db8500-prcmu: Fix irqdomain usage
commit 89d9b1c99374997d68910ba49d5b7df80e7f2061 upstream.
This fixes two issues with the DB8500 PRCMU irqdomain:
- You have to state the irq base 0 to get a linear domain
for the DT case from irq\_domain\_add\_simple()
- The irqdomain was not used to translate the initial irq
request using irq\_create\_mapping() making the linear
case fail as it was lacking a proper descriptor.
I took this opportunity to fix two lines of whitespace
errors in related code as I was anyway messing around with
it.
Acked-by Lee Jones
Signed-off-by: Linus Walleij
Signed-off-by: Samuel Ortiz
Signed-off-by: CAI Qian
Signed-off-by: Greg Kroah-Hartman
commit 15e81f0b10fc9d7d9be7af46b3e80bc8c361963c
Author: Felix Fietkau
Date: Sun Jan 20 21:55:20 2013 +0100
ath9k\_hw: fix calibration issues on chainmask that don't include chain 0
commit 4a8f199508d79ff8a7d1e22f47b912baaf225336 upstream.
Signed-off-by: Felix Fietkau
Signed-off-by: John W. Linville
Signed-off-by: CAI Qian
Signed-off-by: Greg Kroah-Hartman
commit 0dc2f4dcf99e372f49538e6c9949891d08d3091d
Author: Mauro Carvalho Chehab
Date: Sat Oct 27 14:26:25 2012 -0300
media: pwc-if: must check vb2\_queue\_init() success
commit eda94710d6502672c5ee7de198fa78a63ddfae3a upstream.
drivers/media/usb/pwc/pwc-if.c: In function 'usb\_pwc\_probe':
drivers/media/usb/pwc/pwc-if.c:1003:16: warning: ignoring return value of 'vb2\_queue\_init', declared with attribute warn\_unused\_result [-Wunused-result]
In the past, it used to have a logic there at queue init that would
BUG() on errors. This logic got removed. Drivers are now required
to explicitly handle the queue initialization errors, or very bad
things may happen.
Signed-off-by: Mauro Carvalho Chehab
Signed-off-by: Paul Bolle
commit 6d468d117d8853f9235480cf6329b99868290b23
Author: Bruce Allan
Date: Mon Jan 28 00:43:48 2013 +0000
e1000e: enable ECC on I217/I218 to catch packet buffer memory errors
commit 286003048aaef49b26bb9d93611dc69085e8982e upstream.
In rare instances, memory errors have been detected in the internal packet
buffer memory on I217/I218 when stressed under certain environmental
conditions. Enable Error Correcting Code (ECC) in hardware to catch both
correctable and uncorrectable errors. Correctable errors will be handled
by the hardware. Uncorrectable errors in the packet buffer will cause the
packet to be received with an error indication in the buffer descriptor
causing the packet to be discarded. If the uncorrectable error is in the
descriptor itself, the hardware will stop and interrupt the driver
indicating the error. The driver will then reset the hardware in order to
clear the error and restart.
Both types of errors will be accounted for in statistics counters.
Signed-off-by: Bruce Allan
Tested-by: Jeff Pieper
Signed-off-by: Jeff Kirsher
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit ff888473a24be9e8761e6baabbc73386b5f747b9
Author: Bing Zhao
Date: Tue Jan 29 14:38:02 2013 -0800
mwifiex: fix incomplete scan in case of IE parsing error
commit 8a7d7cbf7b5ff9912ef50b3e94c9ad9f37b1c75f upstream.
A scan request is split into multiple scan commands queued in
scan\_pending\_q. Each scan command will be sent to firmware and
its response is handlded one after another.
If any error is detected while parsing IE in command response
buffer the remaining data will be ignored and error is returned.
We should check if there is any more scan commands pending in
the queue before returning error. This ensures that we will call
cfg80211\_scan\_done if this is the last scan command, or send
next scan command in scan\_pending\_q to firmware.
Signed-off-by: Bing Zhao
Signed-off-by: Amitkumar Karwar
Signed-off-by: John W. Linville
Signed-off-by: Greg Kroah-Hartman
commit 10755f7e244ef8ed49d278db4aafd50d9f15fd4c
Author: Alexander Stein
Date: Thu Dec 13 10:06:10 2012 +0100
can: c\_can: Set reserved bit in IFx\_MASK2 to 1 on write
commit 2bd3bc4e8472424f1a6009825397639a8968920a upstream.
According to C\_CAN documentation, the reserved bit in IFx\_MASK2 register is
fixed 1.
Signed-off-by: Alexander Stein
Signed-off-by: Marc Kleine-Budde
Signed-off-by: Greg Kroah-Hartman
commit 55cfe9ec97cadf1a54486b1e3f516304f1473e20
Author: Emmanuel Grumbach
Date: Mon Jan 21 13:12:57 2013 +0200
Revert "iwlwifi: fix the reclaimed packet tracking upon flush queue"
commit ae023b2795d36f0f077e157428eb7eafa29ee412 upstream.
This reverts commit f590dcec944552f9a4a61155810f3abd17d6465d
which has been reported to cause issues.
See https://lkml.org/lkml/2013/1/20/4 for further details.
Signed-off-by: Emmanuel Grumbach
Signed-off-by: Johannes Berg
Signed-off-by: Greg Kroah-Hartman
commit 524c0f23f7feff47470de9dff0f49ad018897782
Author: Johan Hedberg
Date: Tue Jan 29 10:44:23 2013 -0600
Bluetooth: Fix handling of unexpected SMP PDUs
commit 8cf9fa1240229cbdd888236c0c43fcbad680cf00 upstream.
The conn->smp\_chan pointer can be NULL if SMP PDUs arrive at unexpected
moments. To avoid NULL pointer dereferences the code should be checking
for this and disconnect if an unexpected SMP PDU arrives. This patch
fixes the issue by adding a check for conn->smp\_chan for all other PDUs
except pairing request and security request (which are are the first
PDUs to come to initialize the SMP context).
Signed-off-by: Johan Hedberg
Acked-by: Marcel Holtmann
Signed-off-by: Gustavo Padovan
Signed-off-by: Greg Kroah-Hartman
commit cbadbcec8966fe7efa16786a5080013398a5d332
Author: Sjur Brændeland
Date: Tue Jan 22 09:50:26 2013 +1030
virtio\_console: Don't access uninitialized data.
commit aded024a12b32fc1ed9a80639681daae2d07ec25 upstream.
Don't access uninitialized work-queue when removing device.
The work queue is initialized only if the device multi-queue.
So don't call cancel\_work unless this is a multi-queue device.
This fixes the following panic:
Kernel panic - not syncing: BUG!
Call Trace:
62031b28: [<6026085d>] panic+0x16b/0x2d3
62031b30: [<6004ef5e>] flush\_work+0x0/0x1d7
62031b60: [<602606f2>] panic+0x0/0x2d3
62031b68: [<600333b0>] memcpy+0x0/0x140
62031b80: [<6002d58a>] unblock\_signals+0x0/0x84
62031ba0: [<602609c5>] printk+0x0/0xa0
62031bd8: [<60264e51>] \_\_mutex\_unlock\_slowpath+0x13d/0x148
62031c10: [<6004ef5e>] flush\_work+0x0/0x1d7
62031c18: [<60050234>] try\_to\_grab\_pending+0x0/0x17e
62031c38: [<6004e984>] get\_work\_gcwq+0x71/0x8f
62031c48: [<60050539>] \_\_cancel\_work\_timer+0x5b/0x115
62031c78: [<628acc85>] unplug\_port+0x0/0x191 [virtio\_console]
62031c98: [<6005061c>] cancel\_work\_sync+0x12/0x14
62031ca8: [<628ace96>] virtcons\_remove+0x80/0x15c [virtio\_console]
62031ce8: [<628191de>] virtio\_dev\_remove+0x1e/0x7e [virtio]
62031d08: [<601cf242>] \_\_device\_release\_driver+0x75/0xe4
62031d28: [<601cf2dd>] device\_release\_driver+0x2c/0x40
62031d48: [<601ce0dd>] driver\_unbind+0x7d/0xc6
62031d88: [<601cd5d9>] drv\_attr\_store+0x27/0x29
62031d98: [<60115f61>] sysfs\_write\_file+0x100/0x14d
62031df8: [<600b737d>] vfs\_write+0xcb/0x184
62031e08: [<600b58b8>] filp\_close+0x88/0x94
62031e38: [<600b7686>] sys\_write+0x59/0x88
62031e88: [<6001ced1>] handle\_syscall+0x5d/0x80
62031ea8: [<60030a74>] userspace+0x405/0x531
62031f08: [<600d32cc>] sys\_dup+0x0/0x5e
62031f28: [<601b11d6>] strcpy+0x0/0x18
62031f38: [<600be46c>] do\_execve+0x10/0x12
62031f48: [<600184c7>] run\_init\_process+0x43/0x45
62031fd8: [<60019a91>] new\_thread\_handler+0xba/0xbc
Signed-off-by: Sjur Brændeland
Signed-off-by: Rusty Russell
Signed-off-by: Greg Kroah-Hartman
commit 2803d6bda44c70f3bf48a22eb66277c8ffefa0a9
Author: Mike Marciniszyn
Date: Thu Jan 24 18:59:34 2013 +0000
IB/qib: Fix for broken sparse warning fix
commit d359f35430c4ea4dd4e24d809aeaeff1fa54c314 upstream.
Commit 1fb9fed6d489 ("IB/qib: Fix QP RCU sparse warning") broke QP
hash list deletion in qp\_remove() badly.
This patch restores the former for loop behavior, while still fixing
the sparse warnings.
Reviewed-by: Gary Leshner
Signed-off-by: Mike Marciniszyn
Signed-off-by: Roland Dreier
Signed-off-by: Greg Kroah-Hartman
commit 9ba54b84e8d588c6403275ed3835820e04ff4cf5
Author: Alim Akhtar
Date: Wed Jan 30 08:02:27 2013 -0500
regulator: s2mps11: fix incorrect register for buck10
commit c76edd52bf19c9d01da7edc4ff04d3707c299779 upstream.
For BUCK10 the control registers are wrongly set as buck9 control register
This patch corrects the control registers for buck10
Signed-off-by: Alim Akhtar
Signed-off-by: Mark Brown
Signed-off-by: Greg Kroah-Hartman
commit 7e027c2b4a655e7864f3d8e99e7bff6c5c518c0a
Author: Stephen Warren
Date: Tue Jan 29 12:01:13 2013 -0700
regulator: clear state each invocation of of\_regulator\_match
commit a2f95c363701deba2205f81929b40222ea6f4f80 upstream.
of\_regulator\_match() saves some dynamcially allocated state into the
match table that's passed to it. By implementation and not contract, for
each match table entry, if non-NULL state is already present,
of\_regulator\_match() will not overwrite it. of\_regulator\_match() is
typically called each time a regulator is probe()d. This means it is
called with the same match table over and over again if a regulator
triggers deferred probe. This results in stale, kfree()d data being left
in the match table from probe to probe, which causes a variety of crashes
or use of invalid data.
Explicitly free all output state from of\_regulator\_match() before
generating new results in order to avoid this.
Signed-off-by: Stephen Warren
Signed-off-by: Mark Brown
Signed-off-by: Greg Kroah-Hartman
commit 42e14e4033ccc1f2093c4cd2f85272923dbdb893
Author: Marek Szyprowski
Date: Fri Jan 25 09:25:40 2013 +0100
regulator: max8998: fix incorrect min\_uV value for ldo10
commit 36a6f8c035760dcbd0c3acb4c2fd56268588a9cb upstream.
Correct value for minimal voltage for ldo10 output is 950000 uV. This
patch fixes the typo introduced by patch adf6178ad5552a7f2f742a8c85343c50
("regulator: max8998: Use uV in voltage\_map\_desc"), what solves broken
probe of max8998 in v3.8-rc4.
Signed-off-by: Marek Szyprowski
Signed-off-by: Mark Brown
Signed-off-by: Greg Kroah-Hartman
commit 1174e03b914aa8120e1dfedb3dfa5121757d4d90
Author: Larry Finger
Date: Sat Feb 2 15:55:00 2013 -0600
rtlwifi: Fix scheduling while atomic bug
commit a5ffbe0a1993a27072742ef7db6cf9839956fce9 upstream.
Kernel commits 41affd5 and 6539306 changed the locking in rtl\_lps\_leave()
from a spinlock to a mutex by doing the calls indirectly from a work queue
to reduce the time that interrupts were disabled. This change was fine for
most systems; however a scheduling while atomic bug was reported in
https://bugzilla.redhat.com/show\_bug.cgi?id=903881. The backtrace indicates
that routine rtl\_is\_special(), which calls rtl\_lps\_leave() in three places
was entered in atomic context. These direct calls are replaced by putting a
request on the appropriate work queue.
Signed-off-by: Larry Finger
Reported-and-tested-by: Nathaniel Doherty
Cc: Nathaniel Doherty
Cc: Stanislaw Gruszka
Signed-off-by: John W. Linville
Signed-off-by: Greg Kroah-Hartman
commit 5b1c796c15bb53d927b0c40fa2231b89d942ebb9
Author: Larry Finger
Date: Sun Jan 27 16:24:25 2013 -0600
rtlwifi: Fix the usage of the wrong variable in usb.c
commit 0a06ad8e3a1cb5311b7dbafde45410aa1bce9d40 upstream.
In routine \_rtl\_rx\_pre\_process(), skb\_dequeue() is called to get an skb;
however, the wrong variable name is used in subsequent calls.
Reported-by: Guenter Roeck
Signed-off-by: Larry Finger
Cc: Guenter Roeck
Signed-off-by: John W. Linville
Signed-off-by: Greg Kroah-Hartman


=== Content from bugzilla.redhat.com_2e55f856_20250124_170632.html ===


* Login
  + Log in using an SSO provider:- [Fedora Account System](saml2_login.cgi?idp=Fedora%20Account%20System&target=show_bug.cgi%3Fid%3D910883)
    - [Red Hat Associate](saml2_login.cgi?idp=Red%20Hat%20Associate&target=show_bug.cgi%3Fid%3D910883)
    - [Red Hat Customer](saml2_login.cgi?idp=Red%20Hat%20Customer&target=show_bug.cgi%3Fid%3D910883)+ Login using a Red Hat Bugzilla account
  + Forgot Password
  + [Create an Account](createaccount.cgi)

Red Hat Bugzilla – Bug 910883

* [Home](./)
* [New](enter_bug.cgi)
* Search
  + [Simple Search](query.cgi?format=specific)
  + [Advanced Search](query.cgi?format=advanced)
* My Links
  + [Browse](describecomponents.cgi)
  + [Requests](request.cgi)
  + Reports
  + Current State
    - [Search](query.cgi)
    - [Tabular reports](query.cgi?format=report-table)
    - [Graphical reports](query.cgi?format=report-graph)
    - [Duplicates](duplicates.cgi)
  + Other Reports
    - [User Changes](https://bugzilla.redhat.com/page.cgi?id=user_activity.html)
  + Plotly Reports
    - [Bug Status](https://bugzilla.redhat.com/page.cgi?id=bug_status.html)
    - [Bug Severity](https://bugzilla.redhat.com/page.cgi?id=bug_severity.html)
    - [Non-Defaults](https://bugzilla.redhat.com/page.cgi?id=non_defaults.html)
* [Product Dashboard](page.cgi?id=productdashboard.html)

- Help
  * [Page Help!](docs/en/html/using/understanding.html)
  * [Bug Writing Guidelines](page.cgi?id=bug-writing.html)
  * [What's new](page.cgi?id=whats-new.html)
  * [Browser Support Policy](https://access.redhat.com/help/browsers)
  * [5.0.4.rh103 Release notes](page.cgi?id=release-notes.html)
  * [FAQ](page.cgi?id=faq.html)
  * [Guides index](docs/en/html/index.html)
  * [User guide](docs/en/html/using/index.html)
  * [Web Services](docs/en/html/integrating/api/Bugzilla/WebService/Bug.html)
  * [Contact](page.cgi?id=redhat/contact.html)
  * [Legal](page.cgi?id=terms-conditions.html)
- [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")

This site requires JavaScript to be enabled to function correctly, please enable it.

[**Bug 910883**](show_bug.cgi?id=910883)
(CVE-2013-0216, CVE-2013-0217)
- [CVE-2013-0216](https://access.redhat.com/security/cve/CVE-2013-0216) [CVE-2013-0217](https://access.redhat.com/security/cve/CVE-2013-0217) kernel: xen: Linux netback DoS via malicious guest ring.

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
CVE-2013-0216 CVE-2013-0217 kernel: xen: Linux netback DoS via malicious gues...

| | [Keywords](describekeywords.cgi): | Security | | --- | --- | | [Status](page.cgi?id=fields.html#bug_status): | CLOSED ERRATA | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | CVE-2013-0216, CVE-2013-0217 | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components. Select a Classification to narrow down this list.") | Security Response | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Other | | [Component:](describecomponents.cgi?product=Security Response "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | vulnerability | | [Sub Component:](page.cgi?id=fields.html#rh_sub_components "The sub component of a specific component") | --- | | [Version:](page.cgi?id=fields.html#version "The version field defines the version of the software the bug was found in.") | unspecified | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | All | | [OS:](page.cgi?id=fields.html#op_sys "The operating system the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Linux | | [Priority:](page.cgi?id=fields.html#priority) | medium | | [Severity:](page.cgi?id=fields.html#bug_severity) | medium | | [Target Milestone:](page.cgi?id=fields.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | --- | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Red Hat Product Security | | [QA Contact:](page.cgi?id=fields.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") |  | | [Docs Contact:](page.cgi?id=fields.html#docs_contact "The person responsible for documenting once the bug has been resolved.") |  | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | [Depends On:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") | [910884](show_bug.cgi?id=910884) [910885](show_bug.cgi?id=910885) [910886](show_bug.cgi?id=910886 "CLOSED ERRATA - CVE-2013-0216 kernel: xen: Linux netback DoS via malicious guest ring. [fedora-all]") | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") | [910879](show_bug.cgi?id=910879) | | TreeView+ | [depends on](buglist.cgi?bug_id=910883&bug_id_type=anddependson&format=tvp) / [blocked](buglist.cgi?bug_id=910883&bug_id_type=andblocked&format=tvp&tvp_dir=blocked) |  | |  | | [Reported:](page.cgi?id=fields.html#reporter) | 2013-02-13 19:15 UTC by Petr Matousek | | --- | --- | | [Modified:](page.cgi?id=fields.html#modified) | 2023-05-11 12:25 UTC ([History](show_activity.cgi?id=910883)) | | [CC List:](page.cgi?id=fields.html#cclist) | 21 users (show)  agordeev anton bfan dhoward drjones imammedo jforbes kernel-mgr kraxel leiwang lersek lwang m.a.young moli pbonzini plougher qguan rvrbovsk sforsber virt-maint wshi | | Fixed In Version: |  | | | Doc Type: | Bug Fix | | | Doc Text: |  | | | Clone Of: |  | | | Environment: |  | | | Last Closed: | 2013-04-16 19:25:08 UTC | | | Embargoed: |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | [(Terms of Use)](page.cgi?id=terms-conditions.html) | | | --- | --- | --- | |  | | |    Links | System | ID | Private | Priority | Status | Summary | Last Updated | | Red Hat Product Errata | [RHSA-2013:0747](https://access.redhat.com/errata/RHSA-2013%3A0747) | 0 | normal | SHIPPED\_LIVE | Moderate: kernel security and bug fix update | 2013-04-16 23:03:57 UTC | |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=910883#c0)  Petr Matousek    2013-02-13 19:15:33 UTC  ``` The Xen netback implementation contains a couple of flaws which can allow a guest to cause a DoS in the backend domain, potentially affecting other domains in the system.  [CVE-2013-0216](https://access.redhat.com/security/cve/CVE-2013-0216) is a failure to sanity check the ring producer/consumer pointers which can allow a guest to cause netback to loop for an extended period preventing other work from occurring.  [CVE-2013-0217](https://access.redhat.com/security/cve/CVE-2013-0217) is a memory leak on an error path which is guest triggerable.  A malicious guest with access to PV network devices can mount a DoS affecting the entire system.  Acknowledgements:  Red Hat would like to thank the Xen project for reporting this issue.   ```  [Comment 2](show_bug.cgi?id=910883#c2)  Petr Matousek    2013-02-13 19:20:23 UTC  ``` Created kernel tracking bugs for this issue  Affects: fedora-all [[bug 910886](show_bug.cgi?id=910886 "CLOSED ERRATA - CVE-2013-0216 kernel: xen: Linux netback DoS via malicious guest ring. [fedora-all]")]   ```  [Comment 4](show_bug.cgi?id=910883#c4)  Petr Matousek    2013-02-13 19:25:48 UTC  ``` Statement CVE-2013-0216:  This issue did affect the versions of the kernel-xen package as shipped with Red Hat Enterprise Linux 5.  This issue did not affect Red Hat Enterprise Linux 6 and Red Hat Enterprise MRG 2.   ```  [Comment 5](show_bug.cgi?id=910883#c5)  Petr Matousek    2013-02-13 19:26:11 UTC  ``` Statement CVE-2013-0217:   Not vulnerable.  This issue did not affect the versions of the kernel-xen package as shipped with Red Hat Enterprise Linux 5.  This issue did not affect Red Hat Enterprise Linux 6 and Red Hat Enterprise MRG 2.   ```  [Comment 19](show_bug.cgi?id=910883#c19)  errata-xmlrpc    2013-04-16 19:04:41 UTC  ``` This issue has been addressed in following products:    Red Hat Enterprise Linux 5  Via RHSA-2013:0747 <https://rhn.redhat.com/errata/RHSA-2013-0747.html>   ``` |  |
| --- | --- |

---

| Note You need to [log in](show_bug.cgi?id=910883&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. |
| --- |

---

[Privacy](page.cgi?id=redhat/privacy.html)
[Contact](page.cgi?id=redhat/contact.html)
[FAQ](page.cgi?id=faq.html)
[Legal](page.cgi?id=terms-conditions.html)


