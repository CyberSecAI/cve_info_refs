=== Content from bugs.launchpad.net_ded09aae_20250125_215547.html ===

[Log in / Register](https://bugs.launchpad.net/ossa/%2Bbug/1212179/%2Blogin)

[![](https://launchpadlibrarian.net/140604387/os64.png)](https://launchpad.net/ossa)

## [OpenStack Security Advisory](https://launchpad.net/ossa)

* [Overview](https://launchpad.net/ossa)
* [Code](https://code.launchpad.net/ossa)
* [Bugs](https://bugs.launchpad.net/ossa)
* [Blueprints](https://blueprints.launchpad.net/ossa)
* [Translations](https://translations.launchpad.net/ossa)
* [Answers](https://answers.launchpad.net/ossa)

# [OSSA 2013-024] nova should check the is\_public of flavor when creating an instance

Bug #1212179 reported by
[Ken'ichi Ohmichi](https://launchpad.net/~oomichi)
on 2013-08-14

[260](/%2Bhelp-bugs/bug-heat.html)

This bug affects 2 people

| Affects | | Status | Importance | Assigned to | Milestone |
| --- | --- | --- | --- | --- | --- |
|  | [OpenStack Compute (nova)](https://bugs.launchpad.net/nova) | Fix Released | Critical | [Russell Bryant](https://launchpad.net/~russellb) | [OpenStack Compute (nova) 2013.2 "havana"](https://launchpad.net/nova/%2Bmilestone/2013.2) |
|  | [Grizzly](https://bugs.launchpad.net/nova/grizzly) | Fix Released | Critical | [Russell Bryant](https://launchpad.net/~russellb) | [OpenStack Compute (nova) 2013.1.4](https://launchpad.net/nova/%2Bmilestone/2013.1.4) |
|  | [OpenStack Security Advisory](https://bugs.launchpad.net/ossa) | Fix Released | High | [Thierry Carrez](https://launchpad.net/~ttx) |  |

### Bug Description

If creating a flavor with is\_public "false", the flavor should be accessible only by admin or user who is granted to access.

Now "get flavor details" API checks the is\_public of flavor but "create an instance" API does not check.

In the following case, a user (not admin) cannot access non-public flavor through "get flavor details" API, this is right behavior.

However, he can access non-public flavor through "create an instance" API.

=== admin ==============================================================

$ nova flavor-create --is-public false private-flavor 6 512 0 1

+----+----------------+-----------+------+-----------+------+-------+-------------+-----------+

| ID | Name | Memory\_MB | Disk | Ephemeral | Swap | VCPUs | RXTX\_Factor | Is\_Public |

+----+----------------+-----------+------+-----------+------+-------+-------------+-----------+

| 6 | private-flavor | 512 | 0 | 0 | | 1 | 1.0 | False |

+----+----------------+-----------+------+-----------+------+-------+-------------+-----------+

$

$ curl -i <http://192.168.0.30:8774/v2/7a5c62d3cadb40d28e3c25acf7a05b05/flavors/5> -X GET -H "X-Auth-Project-Id: demo" -H "User-Agent: python-novaclient" -H "Accept: application/json" -H "X-Auth-Token: [..]"

HTTP/1.1 200 OK

Content-Type: application/json

Content-Length: 428

X-Compute-Request-Id: req-53ab8206-f458-441c-a0ca-d17e333f4247

Date: Wed, 14 Aug 2013 09:38:10 GMT

{"flavor": {"name": "m1.xlarge", "links": [{"href": "<http://192.168.0.30:8774/v2/7a5c62d3cadb40d28e3c25acf7a05b05/flavors/5>", "rel": "self"}, {"href": "<http://192.168.0.30:8774/7a5c62d3cadb40d28e3c25acf7a05b05/flavors/5>", "rel": "bookmark"}], "ram": 16384, "OS-FLV-DISABLED:disabled": false, "vcpus": 8, "swap": "", "os-flavor-access:is\_public": true, "rxtx\_factor": 1.0, "OS-FLV-EXT-DATA:ephemeral": 0, "disk": 160, "id": "5"}}

$

=== user("demo" user on devstack) ==============================================================

$ nova flavor-list

+----+-----------+-----------+------+-----------+------+-------+-------------+-----------+

| ID | Name | Memory\_MB | Disk | Ephemeral | Swap | VCPUs | RXTX\_Factor | Is\_Public |

+----+-----------+-----------+------+-----------+------+-------+-------------+-----------+

| 1 | m1.tiny | 512 | 1 | 0 | | 1 | 1.0 | True |

| 2 | m1.small | 2048 | 20 | 0 | | 1 | 1.0 | True |

| 3 | m1.medium | 4096 | 40 | 0 | | 2 | 1.0 | True |

| 4 | m1.large | 8192 | 80 | 0 | | 4 | 1.0 | True |

| 42 | m1.nano | 64 | 0 | 0 | | 1 | 1.0 | True |

| 5 | m1.xlarge | 16384 | 160 | 0 | | 8 | 1.0 | True |

| 84 | m1.micro | 128 | 0 | 0 | | 1 | 1.0 | True |

+----+-----------+-----------+------+-----------+------+-------+-------------+-----------+

$

$ curl -i <http://192.168.0.30:8774/v2/7a5c62d3cadb40d28e3c25acf7a05b05/flavors/6> -X GET -H "X-Auth-Project-Id: demo" -H "User-Agent: python-novaclient" -H "Accept: application/json" -H "X-Auth-Token: [..]"

HTTP/1.1 404 Not Found

Content-Length: 78

Content-Type: application/json; charset=UTF-8

X-Compute-Request-Id: req-a7ac7e99-6d29-4893-97a7-6705083739df

Date: Wed, 14 Aug 2013 09:36:52 GMT

{"itemNotFound": {"message": "The resource could not be found.", "code": 404}}

$

$ curl -i <http://192.168.0.30:8774/v2/7a5c62d3cadb40d28e3c25acf7a05b05/servers> -X POST -H "X-Auth-Project-Id: demo" -H "User-Agent: python-novaclient" -H "Content-Type: application/json" -H "Accept: application/json" -H "X-Auth-Token: [..]" -d '{"server": {"min\_count": 1, "flavorRef": "6", "name": "test-not-public", "imageRef": "428f795d-01b0-44c8-a162-9ad86d1fea35", "max\_count": 1}}'

HTTP/1.1 202 Accepted

Location: <http://192.168.0.30:8774/v2/7a5c62d3cadb40d28e3c25acf7a05b05/servers/91407b32-7ed1-4108-9e62-192b3312ff20>

Content-Type: application/json

Content-Length: 440

X-Compute-Request-Id: req-7e561044-100a-4d70-8b83-cebd21dca8e2

Date: Wed, 14 Aug 2013 09:41:50 GMT

{"server": {"security\_groups": [{"name": "default"}], "OS-DCF:diskConfig": "MANUAL", "id": "91407b32-7ed1-4108-9e62-192b3312ff20", "links": [{"href": "<http://192.168.0.30:8774/v2/7a5c62d3cadb40d28e3c25acf7a05b05/servers/91407b32-7ed1-4108-9e62-192b3312ff20>", "rel": "self"}, {"href": "<http://192.168.0.30:8774/7a5c62d3cadb40d28e3c25acf7a05b05/servers/91407b32-7ed1-4108-9e62-192b3312ff20>", "rel": "bookmark"}], "adminPass": "xvFhTwd3yAzE"}}

$ nova list

+--------------------------------------+-----------------+--------+------------+-------------+------------------+

| ID | Name | Status | Task State | Power State | Networks |

+--------------------------------------+-----------------+--------+------------+-------------+------------------+

| 91407b32-7ed1-4108-9e62-192b3312ff20 | test-not-public | ACTIVE | None | Running | private=10.0.0.3 |

+--------------------------------------+-----------------+--------+------------+-------------+------------------+

$

## Related branches

[lp:ubuntu/quantal-security/nova](https://code.launchpad.net/~ubuntu-branches/ubuntu/quantal/nova/quantal-security)

[lp:ubuntu/quantal-updates/nova](https://code.launchpad.net/~ubuntu-branches/ubuntu/quantal/nova/quantal-updates)

[lp:ubuntu/raring-security/nova](https://code.launchpad.net/~ubuntu-branches/ubuntu/raring/nova/raring-security)

[lp:ubuntu/raring-updates/nova](https://code.launchpad.net/~ubuntu-branches/ubuntu/raring/nova/raring-updates)

## CVE References

* [2013-4278](/bugs/cve/2013-4278 "The \"create an instance\" API in OpenS...")

[OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack)
on 2013-08-14

| Changed in nova: | |
| --- | --- |
| **assignee**: | nobody → Ken'ichi Ohmichi (oomichi) |
| **status**: | New → In Progress |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jeremy Stanley (fungi)](https://launchpad.net/~fungi) wrote on 2013-08-14: |  |  | [#1](/ossa/%2Bbug/1212179/comments/1) |
| --- | --- | --- | --- |

Since the other instance of this problem resulted in issuing an advisory (OSSA 2013-019), I'm assuming this one warrants one as well. Opinions?

Since the other instance of this problem resulted in issuing an advisory (OSSA 2013-019), I'm assuming this one warrants one as well. Opinions?

| Changed in ossa: | |
| --- | --- |
| **status**: | New → Incomplete |
| **information type**: | Public → Public Security |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2013-08-14: |  |  | [#2](/ossa/%2Bbug/1212179/comments/2) |
| --- | --- | --- | --- |

I suspect you are right.

I suspect you are right.

| Changed in ossa: | |
| --- | --- |
| **status**: | Incomplete → Confirmed |
| **importance**: | Undecided → Medium |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Russell Bryant (russellb)](https://launchpad.net/~russellb) wrote on 2013-08-19: |  |  | [#3](/ossa/%2Bbug/1212179/comments/3) |
| --- | --- | --- | --- |

Can you confirm that you're testing with a version that includes the fix for OSSA 2013-019 ? This sounds like a duplicate to me.

Can you confirm that you're testing with a version that includes the fix for OSSA 2013-019 ? This sounds like a duplicate to me.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2013-08-19: |  |  | [#4](/ossa/%2Bbug/1212179/comments/4) |
| --- | --- | --- | --- |

According to Russell that looks like a duplicate for [bug 1194093](/bugs/1194093), rather than a continuation: instance-create was fixed in OSSA 2013-019.

Ken'ichi Ohmichi: Could you check that you can reproduce the issue with current master branch ? Or one with <http://github.com/openstack/nova/commit/b65d506a5f9d9b2b20777a9aceb44a8ffed6a5de> in ?

According to Russell that looks like a duplicate for bug 1194093, rather than a continuation: instance-create was fixed in OSSA 2013-019.
Ken'ichi Ohmichi: Could you check that you can reproduce the issue with current master branch ? Or one with http://github.com/openstack/nova/commit/b65d506a5f9d9b2b20777a9aceb44a8ffed6a5de in ?

| Changed in ossa: | |
| --- | --- |
| **status**: | Confirmed → Incomplete |
| **importance**: | Medium → Undecided |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Ken'ichi Ohmichi (oomichi)](https://launchpad.net/~oomichi) wrote on 2013-08-20: |  |  | [#5](/ossa/%2Bbug/1212179/comments/5) |
| --- | --- | --- | --- |

> Can you confirm that you're testing with a version that includes the fix for OSSA 2013-019 ?

> This sounds like a duplicate to me.

I have confirmed my environment including OSSA 2013-019(commit-id: b65d506a5f9d9b2b20777a9aceb44a8ffed6a5de).

On the environment, this problem happens.

Please see the part "user("demo" user on devstack)" of this report.

"show flavor" API (curl -i <http://192.168.0.30:8774/v2/7a5c62d3cadb40d28e3c25acf7a05b05/flavors/6> -X GET) returns HTTP404 against not-public flavor.

However, "create instance" API (curl -i <http://192.168.0.30:8774/v2/7a5c62d3cadb40d28e3c25acf7a05b05/servers> -X POST) returns HTTP202, not 404.

This problem is related to OSSA 2013-019.

The commit (b65d506a5f9d9b2b20777a9aceb44a8ffed6a5de) fixes "list flavors" and "show flavor" APIS, but it does not include "create instance" API.

> Can you confirm that you're testing with a version that includes the fix for OSSA 2013-019 ?
> This sounds like a duplicate to me.
I have confirmed my environment including OSSA 2013-019(commit-id: b65d506a5f9d9b2b20777a9aceb44a8ffed6a5de).
On the environment, this problem happens.
Please see the part "user("demo" user on devstack)" of this report.
"show flavor" API (curl -i http://192.168.0.30:8774/v2/7a5c62d3cadb40d28e3c25acf7a05b05/flavors/6 -X GET) returns HTTP404 against not-public flavor.
However, "create instance" API (curl -i http://192.168.0.30:8774/v2/7a5c62d3cadb40d28e3c25acf7a05b05/servers -X POST) returns HTTP202, not 404.
This problem is related to OSSA 2013-019.
The commit (b65d506a5f9d9b2b20777a9aceb44a8ffed6a5de) fixes "list flavors" and "show flavor" APIS, but it does not include "create instance" API.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Ken'ichi Ohmichi (oomichi)](https://launchpad.net/~oomichi) wrote on 2013-08-20: |  |  | [#6](/ossa/%2Bbug/1212179/comments/6) |
| --- | --- | --- | --- |

Hi Russell,

One more thing.

We need to port the patch of OSSA 2013-019(commit-id: b65d506a5f9d9b2b20777a9aceb44a8ffed6a5de) to nova v3 tree.

I have posted the patch for doing it, I am happy if you review it. (<https://review.openstack.org/#/c/41843/>)

Hi Russell,
One more thing.
We need to port the patch of OSSA 2013-019(commit-id: b65d506a5f9d9b2b20777a9aceb44a8ffed6a5de) to nova v3 tree.
I have posted the patch for doing it, I am happy if you review it. (https://review.openstack.org/#/c/41843/)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Russell Bryant (russellb)](https://launchpad.net/~russellb) wrote on 2013-08-20: |  |  | [#7](/ossa/%2Bbug/1212179/comments/7) |
| --- | --- | --- | --- |

[Download full text](https://bugs.launchpad.net/ossa/%2Bbug/1212179/comments/7/%2Bdownload) (4.1 KiB)

At first I thought I couldn't reproduce this, but I was only trying with novaclient. With novaclient, it looks like it doesn't work. It actually fails on trying to get flavor details and doesn't make it far enough to try to boot the server. So, it does appear there is a problem here.

$ . openrc admin

$ nova flavor-create test2 8 512 4 2 --is-public False

+----+-------+-----------+------+-----------+------+-------+-------------+-----------+

| ID | Name | Memory\_MB | Disk | Ephemeral | Swap | VCPUs | RXTX\_Factor | Is\_Public |

+----+-------+-----------+------+-----------+------+-------+-------------+-----------+

| 8 | test2 | 512 | 4 | 0 | | 2 | 1.0 | False |

+----+-------+-----------+------+-----------+------+-------+-------------+-----------+

$ nova flavor-list --all

+----+-----------+-----------+------+-----------+------+-------+-------------+-----------+

| ID | Name | Memory\_MB | Disk | Ephemeral | Swap | VCPUs | RXTX\_Factor | Is\_Public |

+----+-----------+-----------+------+-----------+------+-------+-------------+-----------+

| 1 | m1.tiny | 512 | 1 | 0 | | 1 | 1.0 | True |

| 2 | m1.small | 2048 | 20 | 0 | | 1 | 1.0 | True |

| 3 | m1.medium | 4096 | 40 | 0 | | 2 | 1.0 | True |

| 4 | m1.large | 8192 | 80 | 0 | | 4 | 1.0 | True |

| 42 | m1.nano | 64 | 0 | 0 | | 1 | 1.0 | True |

| 5 | m1.xlarge | 16384 | 160 | 0 | | 8 | 1.0 | True |

| 8 | test2 | 512 | 4 | 0 | | 2 | 1.0 | False |

| 84 | m1.micro | 128 | 0 | 0 | | 1 | 1.0 | True |

+----+-----------+-----------+------+-----------+------+-------+-------------+-----------+

$ . openrc demo

$ nova flavor-list --all

+----+-----------+-----------+------+-----------+------+-------+-------------+-----------+

| ID | Name | Memory\_MB | Disk | Ephemeral | Swap | VCPUs | RXTX\_Factor | Is\_Public |

+----+-----------+-----------+------+-----------+------+-------+-------------+-----------+

| 1 | m1.tiny | 512 | 1 | 0 | | 1 | 1.0 | True |

| 2 | m1.small | 2048 | 20 | 0 | | 1 | 1.0 | True |

| 3 | m1.medium | 4096 | 40 | 0 | | 2 | 1.0 | True |

| 4 | m1.large | 8192 | 80 | 0 | | 4 | 1.0 | True |

| 42 | m1.nano | 64 | 0 | 0 | | 1 | 1.0 | True |

| 5 | m1.xlarge | 16384 | 160 | 0 | | 8 | 1.0 | True |

| 84 | m1.micro | 128 | 0 | 0 | | 1 | 1.0 | True |

+----+-----------+-----------+------+-----------+------+-------+-------------+-----------+

$ nova boot --flavor 8 --image 899f3f21-e3eb-41b2-b9b9-e805e1ec1e02 test

ERROR: No flavor with a name or ID of '8' exists.

$ curl -i <http://162.209.53.10:8774/v2/c7708d0551034f97b1c5fceb848cfcf1/servers> -X POST -H "X-Auth-Project-Id: demo"...

[Read more...](/ossa/%2Bbug/1212179/comments/7)

At first I thought I couldn't reproduce this, but I was only trying with novaclient. With novaclient, it looks like it doesn't work. It actually fails on trying to get flavor details and doesn't make it far enough to try to boot the server. So, it does appear there is a problem here.
$ . openrc admin
$ nova flavor-create test2 8 512 4 2 --is-public False
+----+-------+-----------+------+-----------+------+-------+-------------+-----------+
| ID | Name | Memory\_MB | Disk | Ephemeral | Swap | VCPUs | RXTX\_Factor | Is\_Public |
+----+-------+-----------+------+-----------+------+-------+-------------+-----------+
| 8 | test2 | 512 | 4 | 0 | | 2 | 1.0 | False |
+----+-------+-----------+------+-----------+------+-------+-------------+-----------+
$ nova flavor-list --all
+----+-----------+-----------+------+-----------+------+-------+-------------+-----------+
| ID | Name | Memory\_MB | Disk | Ephemeral | Swap | VCPUs | RXTX\_Factor | Is\_Public |
+----+-----------+-----------+------+-----------+------+-------+-------------+-----------+
| 1 | m1.tiny | 512 | 1 | 0 | | 1 | 1.0 | True |
| 2 | m1.small | 2048 | 20 | 0 | | 1 | 1.0 | True |
| 3 | m1.medium | 4096 | 40 | 0 | | 2 | 1.0 | True |
| 4 | m1.large | 8192 | 80 | 0 | | 4 | 1.0 | True |
| 42 | m1.nano | 64 | 0 | 0 | | 1 | 1.0 | True |
| 5 | m1.xlarge | 16384 | 160 | 0 | | 8 | 1.0 | True |
| 8 | test2 | 512 | 4 | 0 | | 2 | 1.0 | False |
| 84 | m1.micro | 128 | 0 | 0 | | 1 | 1.0 | True |
+----+-----------+-----------+------+-----------+------+-------+-------------+-----------+
$ . openrc demo
$ nova flavor-list --all
+----+-----------+-----------+------+-----------+------+-------+-------------+-----------+
| ID | Name | Memory\_MB | Disk | Ephemeral | Swap | VCPUs | RXTX\_Factor | Is\_Public |
+----+-----------+-----------+------+-----------+------+-------+-------------+-----------+
| 1 | m1.tiny | 512 | 1 | 0 | | 1 | 1.0 | True |
| 2 | m1.small | 2048 | 20 | 0 | | 1 | 1.0 | True |
| 3 | m1.medium | 4096 | 40 | 0 | | 2 | 1.0 | True |
| 4 | m1.large | 8192 | 80 | 0 | | 4 | 1.0 | True |
| 42 | m1.nano | 64 | 0 | 0 | | 1 | 1.0 | True |
| 5 | m1.xlarge | 16384 | 160 | 0 | | 8 | 1.0 | True |
| 84 | m1.micro | 128 | 0 | 0 | | 1 | 1.0 | True |
+----+-----------+-----------+------+-----------+------+-------+-------------+-----------+
$ nova boot --flavor 8 --image 899f3f21-e3eb-41b2-b9b9-e805e1ec1e02 test
ERROR: No flavor with a name or ID of '8' exists.
$ curl -i http://162.209.53.10:8774/v2/c7708d0551034f97b1c5fceb848cfcf1/servers -X POST -H "X-Auth-Project-Id: demo" -H "User-Agent: python-novaclient" -H "Content-Type: application/json" -H "Accept: application/json" -H "X-Auth-Token:..." -d '{"server": {"min\_count": 1, "flavorRef": "8", "name": "test2", "imageRef": "899f3f21-e3eb-41b2-b9b9-e805e1ec1e02", "max\_count": 1}}'
HTTP/1.1 202 Accepted
Location: http://162.209.53.10:8774/v2/c7708d0551034f97b1c5fceb848cfcf1/servers/9fb1fcdf-e7a7-40cb-af58-94111c5316bd
Content-Type: application/json
Content-Length: 442
X-Compute-Request-Id: req-5d8e375f-1b05-4bc9-abaf-692ff73077d6
Date: Tue, 20 Aug 2013 13:31:56 GMT
{"server": {"security\_groups": [{"name": "default"}], "OS-DCF:diskConfig": "MANUAL", "id": "9fb1fcdf-e7a7-40cb-af58-94111c5316bd", "links": [{"href": "http://162.209.53.10:8774/v2/c7708d0551034f97b1c5fceb848cfcf1/servers/9fb1fcdf-e7a7-40cb-af58-94111c5316bd", "rel": "self"}, {"href": "http://162.209.53.10:8774/c7708d0551034f97b1c5fceb848cfcf1/servers/9fb1fcdf-e7a7-40cb-af58-94111c5316bd", "rel": "bookmark"}], "adminPass": "fgWiM7FXrac4"}}

[Russell Bryant (russellb)](https://launchpad.net/~russellb)
on 2013-08-20

| Changed in nova: | |
| --- | --- |
| **importance**: | Undecided → Critical |

[Thierry Carrez (ttx)](https://launchpad.net/~ttx)
on 2013-08-20

| Changed in nova: | |
| --- | --- |
| **milestone**: | none → havana-3 |
| Changed in ossa: | |
| **importance**: | Undecided → High |
| **status**: | Incomplete → Confirmed |

[Russell Bryant (russellb)](https://launchpad.net/~russellb)
on 2013-08-20

| Changed in nova: | |
| --- | --- |
| **assignee**: | Ken'ichi Ohmichi (oomichi) → Russell Bryant (russellb) |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2013-08-21:  [**Fix merged to nova (master)**](/ossa/%2Bbug/1212179/comments/8) |  |  | [#8](/ossa/%2Bbug/1212179/comments/8) |
| --- | --- | --- | --- |

Reviewed: <https://review.openstack.org/42922>

Committed: <http://github.com/openstack/nova/commit/4054cc4a22a1fea997dec76afb5646fd6c6ea6b9>

Submitter: Jenkins

Branch: master

commit 4054cc4a22a1fea997dec76afb5646fd6c6ea6b9

Author: Russell Bryant <email address hidden>

Date: Tue Aug 20 11:06:12 2013 -0400

Enforce flavor access during instance boot

The code in the servers API did not pass the context when retrieving

    flavor details. That means it would use an admin context instead,

    bypassing all flavor access control checks.

This patch includes the fix, and the corresponding unit test, for both

    the v2 and v3 APIs.

Closes-bug: #1212179

Change-Id: I681ae9965e19767df22fa74c3315e4e03a459d3b

Reviewed: https://review.openstack.org/42922
Committed: http://github.com/openstack/nova/commit/4054cc4a22a1fea997dec76afb5646fd6c6ea6b9
Submitter: Jenkins
Branch: master
commit 4054cc4a22a1fea997dec76afb5646fd6c6ea6b9
Author: Russell Bryant <rbryant@redhat.com>
Date: Tue Aug 20 11:06:12 2013 -0400
Enforce flavor access during instance boot
The code in the servers API did not pass the context when retrieving
flavor details. That means it would use an admin context instead,
bypassing all flavor access control checks.
This patch includes the fix, and the corresponding unit test, for both
the v2 and v3 APIs.
Closes-bug: #1212179
Change-Id: I681ae9965e19767df22fa74c3315e4e03a459d3b

| Changed in nova: | |
| --- | --- |
| **status**: | In Progress → Fix Committed |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Ken'ichi Ohmichi (oomichi)](https://launchpad.net/~oomichi) wrote on 2013-08-21:  [**Re: nova should check the is\_public of flavor when creating an instance**](/ossa/%2Bbug/1212179/comments/9) |  |  | [#9](/ossa/%2Bbug/1212179/comments/9) |
| --- | --- | --- | --- |

Too fast fixing, thanks!

Too fast fixing, thanks!

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2013-08-21: |  |  | [#10](/ossa/%2Bbug/1212179/comments/10) |
| --- | --- | --- | --- |

Russell: could you backport the fix for Folsom/Grizzly (if they are affected as well) ?

Proposed Impact description:

=========================

Title: Resource limit circumvention in Nova private flavors

Reporter: Ken'ichi Ohmichi (NEC)

Products: Nova

Affects: All versions

Description:

Ken'ichi Ohmichi from NEC reported that the fix for OSSA 2013-019 (CVE-2013-2256) was incomplete. Any tenant was still able to boot any other tenant's private flavors by guessing a flavor ID. This potentially allowed circumvention of any resource limits enforced through the os-flavor-access:is\_public property.

=========================

Russell: could you backport the fix for Folsom/Grizzly (if they are affected as well) ?
Proposed Impact description:
=========================
Title: Resource limit circumvention in Nova private flavors
Reporter: Ken'ichi Ohmichi (NEC)
Products: Nova
Affects: All versions
Description:
Ken'ichi Ohmichi from NEC reported that the fix for OSSA 2013-019 (CVE-2013-2256) was incomplete. Any tenant was still able to boot any other tenant's private flavors by guessing a flavor ID. This potentially allowed circumvention of any resource limits enforced through the os-flavor-access:is\_public property.
=========================

| Changed in ossa: | |
| --- | --- |
| **assignee**: | nobody → Thierry Carrez (ttx) |
| **status**: | Confirmed → Triaged |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2013-08-21: |  |  | [#11](/ossa/%2Bbug/1212179/comments/11) |
| --- | --- | --- | --- |

I suspect we can reuse the same CVE. Asking the CNA for confirmation.

I suspect we can reuse the same CVE. Asking the CNA for confirmation.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2013-08-22:  [**Fix proposed to nova (stable/grizzly)**](/ossa/%2Bbug/1212179/comments/12) |  |  | [#12](/ossa/%2Bbug/1212179/comments/12) |
| --- | --- | --- | --- |

Fix proposed to branch: stable/grizzly

Review: <https://review.openstack.org/43281>

Fix proposed to branch: stable/grizzly
Review: https://review.openstack.org/43281

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2013-08-22:  [**Fix proposed to nova (stable/folsom)**](/ossa/%2Bbug/1212179/comments/13) |  |  | [#13](/ossa/%2Bbug/1212179/comments/13) |
| --- | --- | --- | --- |

Fix proposed to branch: stable/folsom

Review: <https://review.openstack.org/43296>

Fix proposed to branch: stable/folsom
Review: https://review.openstack.org/43296

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2013-08-22:  [**Re: nova should check the is\_public of flavor when creating an instance**](/ossa/%2Bbug/1212179/comments/14) |  |  | [#14](/ossa/%2Bbug/1212179/comments/14) |
| --- | --- | --- | --- |

Please review impact statement

Please review impact statement

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2013-08-22: |  |  | [#15](/ossa/%2Bbug/1212179/comments/15) |
| --- | --- | --- | --- |

This was assigned CVE-2013-4278

This was assigned CVE-2013-4278

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2013-08-23:  [**Fix merged to nova (stable/folsom)**](/ossa/%2Bbug/1212179/comments/16) |  |  | [#16](/ossa/%2Bbug/1212179/comments/16) |
| --- | --- | --- | --- |

Reviewed: <https://review.openstack.org/43296>

Committed: <http://github.com/openstack/nova/commit/6825959560e06725d26625fd21f5c0b78b305492>

Submitter: Jenkins

Branch: stable/folsom

commit 6825959560e06725d26625fd21f5c0b78b305492

Author: Russell Bryant <email address hidden>

Date: Tue Aug 20 11:06:12 2013 -0400

Enforce flavor access during instance boot

The code in the servers API did not pass the context when retrieving

    flavor details. That means it would use an admin context instead,

    bypassing all flavor access control checks.

This patch includes the fix, and the corresponding unit test for the v2

    API.

Closes-bug: #1212179

(cherry picked from commit 4054cc4a22a1fea997dec76afb5646fd6c6ea6b9)

Conflicts:

     nova/api/openstack/compute/plugins/v3/servers.py

     nova/api/openstack/compute/servers.py

     nova/tests/api/openstack/compute/plugins/v3/test\_servers.py

     nova/tests/api/openstack/compute/test\_servers.py

Change-Id: I681ae9965e19767df22fa74c3315e4e03a459d3b

Reviewed: https://review.openstack.org/43296
Committed: http://github.com/openstack/nova/commit/6825959560e06725d26625fd21f5c0b78b305492
Submitter: Jenkins
Branch: stable/folsom
commit 6825959560e06725d26625fd21f5c0b78b305492
Author: Russell Bryant <rbryant@redhat.com>
Date: Tue Aug 20 11:06:12 2013 -0400
Enforce flavor access during instance boot
The code in the servers API did not pass the context when retrieving
flavor details. That means it would use an admin context instead,
bypassing all flavor access control checks.
This patch includes the fix, and the corresponding unit test for the v2
API.
Closes-bug: #1212179
(cherry picked from commit 4054cc4a22a1fea997dec76afb5646fd6c6ea6b9)
Conflicts:
nova/api/openstack/compute/plugins/v3/servers.py
nova/api/openstack/compute/servers.py
nova/tests/api/openstack/compute/plugins/v3/test\_servers.py
nova/tests/api/openstack/compute/test\_servers.py
Change-Id: I681ae9965e19767df22fa74c3315e4e03a459d3b

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Russell Bryant (russellb)](https://launchpad.net/~russellb) wrote on 2013-08-23:  [**Re: nova should check the is\_public of flavor when creating an instance**](/ossa/%2Bbug/1212179/comments/17) |  |  | [#17](/ossa/%2Bbug/1212179/comments/17) |
| --- | --- | --- | --- |

The description is fine, thanks!

The description is fine, thanks!

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2013-08-24:  [**Fix merged to nova (stable/grizzly)**](/ossa/%2Bbug/1212179/comments/18) |  |  | [#18](/ossa/%2Bbug/1212179/comments/18) |
| --- | --- | --- | --- |

Reviewed: <https://review.openstack.org/43281>

Committed: <http://github.com/openstack/nova/commit/8b686195afe7e6dfb46c56c1ef2fe9c993d8e495>

Submitter: Jenkins

Branch: stable/grizzly

commit 8b686195afe7e6dfb46c56c1ef2fe9c993d8e495

Author: Russell Bryant <email address hidden>

Date: Tue Aug 20 11:06:12 2013 -0400

Enforce flavor access during instance boot

The code in the servers API did not pass the context when retrieving

    flavor details. That means it would use an admin context instead,

    bypassing all flavor access control checks.

This patch includes the fix, and the corresponding unit test for the v2

    API.

Closes-bug: #1212179

(cherry picked from commit 4054cc4a22a1fea997dec76afb5646fd6c6ea6b9)

Conflicts:

     nova/api/openstack/compute/plugins/v3/servers.py

     nova/api/openstack/compute/servers.py

     nova/tests/api/openstack/compute/plugins/v3/test\_servers.py

     nova/tests/api/openstack/compute/test\_servers.py

Change-Id: I681ae9965e19767df22fa74c3315e4e03a459d3b

Reviewed: https://review.openstack.org/43281
Committed: http://github.com/openstack/nova/commit/8b686195afe7e6dfb46c56c1ef2fe9c993d8e495
Submitter: Jenkins
Branch: stable/grizzly
commit 8b686195afe7e6dfb46c56c1ef2fe9c993d8e495
Author: Russell Bryant <rbryant@redhat.com>
Date: Tue Aug 20 11:06:12 2013 -0400
Enforce flavor access during instance boot
The code in the servers API did not pass the context when retrieving
flavor details. That means it would use an admin context instead,
bypassing all flavor access control checks.
This patch includes the fix, and the corresponding unit test for the v2
API.
Closes-bug: #1212179
(cherry picked from commit 4054cc4a22a1fea997dec76afb5646fd6c6ea6b9)
Conflicts:
nova/api/openstack/compute/plugins/v3/servers.py
nova/api/openstack/compute/servers.py
nova/tests/api/openstack/compute/plugins/v3/test\_servers.py
nova/tests/api/openstack/compute/test\_servers.py
Change-Id: I681ae9965e19767df22fa74c3315e4e03a459d3b

[Thierry Carrez (ttx)](https://launchpad.net/~ttx)
on 2013-08-27

| Changed in ossa: | |
| --- | --- |
| **status**: | Triaged → In Progress |
| **status**: | In Progress → Fix Committed |

[Thierry Carrez (ttx)](https://launchpad.net/~ttx)
on 2013-08-28

| Changed in ossa: | |
| --- | --- |
| **status**: | Fix Committed → Fix Released |
| **summary**: | - nova should check the is\_public of flavor when creating an instance+ [OSSA 2013-024] nova should check the is\_public of flavor when creating+ an instance |

[Thierry Carrez (ttx)](https://launchpad.net/~ttx)
on 2013-09-05

| Changed in nova: | |
| --- | --- |
| **status**: | Fix Committed → Fix Released |

[Thierry Carrez (ttx)](https://launchpad.net/~ttx)
on 2013-10-17

| Changed in nova: | |
| --- | --- |
| **milestone**: | havana-3 → 2013.2 |

[Sean Dague (sdague)](https://launchpad.net/~sdague)
on 2014-09-19

| **no longer affects**: | nova/folsom |
| --- | --- |

[See full activity log](https://bugs.launchpad.net/ossa/%2Bbug/1212179/%2Bactivity)

To post a comment you must [log in](%2Blogin?comments=all).

* [Report a bug](/ossa/%2Bfilebug)

This report contains
**Public Security**
information

Everyone can see this security related information.

You are
[not directly subscribed to this bug's notifications.](/ossa/%2Bbug/1212179/%2Bsubscribe)

Subscribing...

* [Edit bug mail](https://bugs.launchpad.net/ossa/%2Bbug/1212179/%2Bsubscriptions "View and change your subscriptions to this bug")

## Other bug subscribers

[Subscribe someone else](https://bugs.launchpad.net/ossa/%2Bbug/1212179/%2Baddsubscriber "Launchpad will email that person whenever this bugs changes")

## Remote bug watches

Bug watches keep track of this bug in other bug trackers.

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
4d55102
([Get the code!](https://dev.launchpad.net/))



=== Content from rhn.redhat.com_20636270_20250125_215546.html ===

Note: Our personalized web services require that your browser be enabled for JavaScript and cookies

[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

[Red Hat Product Errata](/errata)
RHSA-2013:1199 - Security Advisory

Issued:
2013-09-03
Updated:
2013-09-03
# RHSA-2013:1199 - Security Advisory

* [Overview](#overview)
* [Updated Packages](#packages)

## Synopsis

Moderate: openstack-nova security and bug fix update

## Type/Severity

Security Advisory: Moderate

## Red Hat Insights patch analysis

Identify and remediate systems affected by this advisory.

[View affected systems](https://console.redhat.com/insights/patch/advisories/RHSA-2013%3A1199)

## Topic

Updated openstack-nova packages that fix multiple security issues and
various bugs are now available for Red Hat OpenStack 3.0.

The Red Hat Security Response Team has rated this update as having moderate
security impact. Common Vulnerability Scoring System (CVSS) base scores,
which give detailed severity ratings, are available for each vulnerability
from the CVE links in the References section.

## Description

The openstack-nova packages provide OpenStack Compute (Nova), which
provides services for provisioning, managing, and using virtual machine
instances.

It was found that the fixes for CVE-2013-1664 and CVE-2013-1665, released
via RHSA-2013:0657, did not fully correct the issues in the Extensible
Markup Language (XML) parser used by Nova. A remote attacker could use
this flaw to send a specially-crafted request to a Nova API, causing
Nova to consume an excessive amount of CPU and memory, or possibly crash.
(CVE-2013-4179)

A denial of service flaw was found in the way Nova handled network source
security group policy updates. An authenticated user could send a large
number of server creation operations, causing nova-network to become
unresponsive. (CVE-2013-4185)

An information disclosure flaw and a resource limit bypass were found in
the way Nova handled virtual hardware templates (flavors). These allowed
tenants to show and boot other tenants' flavors and bypass resource limits
enforced via the os-flavor-access:is\_public property. (CVE-2013-2256)

It was discovered that, in some configurations, certain messages in
console-log could cause nova-compute to become unresponsive, resulting in a
denial of service. (CVE-2013-4261)

Red Hat would like to thank the OpenStack project for reporting
CVE-2013-2256 and CVE-2013-4185. Upstream acknowledges hzrandd from NetEase
as the original reporter of CVE-2013-2256, and Vishvananda Ishaya
from Nebula as the original reporter of CVE-2013-4185. Upstream also
acknowledges Ken'ichi Ohmichi from NEC for providing a corrected fix for
CVE-2013-2256.

The CVE-2013-4179 issue was discovered by Grant Murphy of the Red Hat
Product Security Team, and CVE-2013-4261 was discovered by Jaroslav Henner
of Red Hat.

This update also fixes a number of bugs in openstack-nova.

Additionally, openstack-nova has been rebased to the latest stable release
2013.1.3. (BZ#993100)

All users of openstack-nova are advised to upgrade to these updated
packages, which correct these issues. After installing the updated
packages, the running Nova services will be restarted automatically.

## Solution

Before applying this update, make sure all previously released errata
relevant to your system have been applied.

This update is available via the Red Hat Network. Details on how to
use the Red Hat Network to apply this update are available at
<https://access.redhat.com/site/articles/11258>

## Affected Products

* Red Hat OpenStack grizzly x86\_64

## Fixes

* [BZ - 971188](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=971188)
  - Console log lacks dashes.
* [BZ - 975882](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=975882)
  - Nova doesn't close qpid connections after certain error conditions
* [BZ - 989707](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=989707)
  - CVE-2013-4179 OpenStack: Nova XML entities DoS
* [BZ - 993331](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=993331)
  - CVE-2013-4185 OpenStack: Nova network source security groups denial of service
* [BZ - 993340](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=993340)
  - CVE-2013-2256 OpenStack: Nova private flavors resource limit circumvention
* [BZ - 997649](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=997649)
  - config\_drive\_cdrom not effective
* [BZ - 997840](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=997840)
  - live block migration stopped working, claiming DestinationDiskExists
* [BZ - 998598](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=998598)
  - nova interface-attach fails with HTTP 400; TypeError: get\_config() takes exactly 6 arguments...
* [BZ - 999271](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=999271)
  - CVE-2013-4261 OpenStack: openstack-nova-compute console-log DoS

## CVEs

* [CVE-2013-2256](https://www.redhat.com/security/data/cve/CVE-2013-2256.html)
* [CVE-2013-4261](https://www.redhat.com/security/data/cve/CVE-2013-4261.html)
* [CVE-2013-4179](https://www.redhat.com/security/data/cve/CVE-2013-4179.html)
* [CVE-2013-4185](https://www.redhat.com/security/data/cve/CVE-2013-4185.html)

## References

* <https://access.redhat.com/security/updates/classification/#moderate>
* <https://rhn.redhat.com/errata/RHSA-2013-0657.html>

**Note:**
More recent versions of these packages may be available.
Click a package name for more details.
## Red Hat OpenStack grizzly

| SRPM | |
| --- | --- |
| openstack-nova-2013.1.3-3.el6ost.src.rpm | SHA-256: f50f21a099981e82c21bf3784f73f9a8dcd23208b5f491e686998ce6d969bc7b |
| x86\_64 | |
| openstack-nova-2013.1.3-3.el6ost.noarch.rpm | SHA-256: 6dbb2bd3508642df6526e174f3422f727d1de7ec618258ffc787a2ee97869a07 |
| openstack-nova-api-2013.1.3-3.el6ost.noarch.rpm | SHA-256: 6be67a282ef831f941f14a937968e97fdd2448a9e37df655c6eaca54813545f8 |
| openstack-nova-cells-2013.1.3-3.el6ost.noarch.rpm | SHA-256: 7206b77b43bb7bbc6c9db8a42efda87e5fcf25f32460e633cecdefed1dfd2469 |
| openstack-nova-cert-2013.1.3-3.el6ost.noarch.rpm | SHA-256: e790bfa7bec9b780ea775cc7e4ac9c15dbde3243199cb241949b5f80ff29db3f |
| openstack-nova-common-2013.1.3-3.el6ost.noarch.rpm | SHA-256: 59ec6dd1bc045f7005bcf8547a7025b123a032955ace73785d4e31b32e1c32d9 |
| openstack-nova-compute-2013.1.3-3.el6ost.noarch.rpm | SHA-256: 75829cba77c297727eb9312a152865aeaa7d076fca65711efff96ca8bb0cff24 |
| openstack-nova-conductor-2013.1.3-3.el6ost.noarch.rpm | SHA-256: 5820adbc437b867843648319170e21d2726603996c506c4a3b4f077c59ca8eaa |
| openstack-nova-console-2013.1.3-3.el6ost.noarch.rpm | SHA-256: 843f7f881a37c8a54500954d456ba7982417c05f078b75e3065b45b99e34fb94 |
| openstack-nova-doc-2013.1.3-3.el6ost.noarch.rpm | SHA-256: f2ac80658c0164e4fb132c4512f7dade18c058060e78419271ae5f2362130fc2 |
| openstack-nova-network-2013.1.3-3.el6ost.noarch.rpm | SHA-256: ca4cb13a8287ecf5328d306366bc3481913f38875530abd0b6e1a8cd30ad20e6 |
| openstack-nova-objectstore-2013.1.3-3.el6ost.noarch.rpm | SHA-256: 521976ef0d0a9d687f9b1b3132d1948849db890ebfd631ef6482564d97d74d68 |
| openstack-nova-scheduler-2013.1.3-3.el6ost.noarch.rpm | SHA-256: c540dffeef2052ee2bbb74df2e14a997a640e2c4ba7952d068b3f672717c1e9b |
| python-nova-2013.1.3-3.el6ost.noarch.rpm | SHA-256: 280ab74a1b86cf9f2b7c2972f34a6eaaf339f4d11381ad1a0c06277c5feee129 |

The Red Hat security contact is secalert@redhat.com.
More contact details at <https://access.redhat.com/security/team/contact/>.

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from review.openstack.org_d3771b0f_20250126_121501.html ===




=== Content from launchpad.net_1d0b4763_20250126_121458.html ===

[Log in / Register](https://launchpad.net/~ttx/%2Blogin)

[![](https://launchpadlibrarian.net/116816327/ttx64.jpg)](https://launchpad.net/~ttx)

## [Thierry Carrez](https://launchpad.net/~ttx)

* Overview
* [Code](https://code.launchpad.net/~ttx)
* [Bugs](https://bugs.launchpad.net/~ttx)
* [Blueprints](https://blueprints.launchpad.net/~ttx)
* [Translations](https://translations.launchpad.net/~ttx)
* [Answers](https://answers.launchpad.net/~ttx)

Chair of the Technical Committee and Release Manager for OpenStack.

Python Software Foundation member.

Ubuntu core developer.

* [Related packages](https://launchpad.net/~ttx/%2Brelated-packages)
* [Related projects](https://launchpad.net/~ttx/%2Brelated-projects)

## User information

Launchpad Id:
ttx

Email:
[Log in](%2Blogin) for email information.

Member since:
2008-05-12

[![Icon of Cassandra Ubuntu Packaging](https://launchpadlibrarian.net/59580596/cassandra-ubuntu-icon.png "Member of Cassandra Ubuntu Packaging")](/~cassandra-ubuntu)
[![Icon of (deprecated) OpenStack PPA maintainers](https://launchpadlibrarian.net/87891894/ppa.gif "Member of (deprecated) OpenStack PPA maintainers")](/~openstack-ppa)
[![Icon of Designate Drivers](https://launchpadlibrarian.net/360468067/designate_14.jpg "Member of Designate Drivers")](/~designate-drivers)
[![Icon of Launchpad Beta Testers](https://launchpadlibrarian.net/600856498/Canonical_Launchpad_icon_14px.png "Member of Launchpad Beta Testers")](/~launchpad-beta-testers)
[![Icon of Martin Pitt's fan](https://launchpadlibrarian.net/16410730/immaginexz0.png "Member of Martin Pitt's fan")](/~we-love-pitti)
[![Icon of Nova](https://launchpadlibrarian.net/52560219/os14.png "Member of Nova")](/~nova)
[![Icon of OpenStack release team](https://launchpadlibrarian.net/73211233/openstack-release.png "Member of OpenStack release team")](/~openstack-release)
[![Icon of OpenStack Security SIG](https://launchpadlibrarian.net/203991792/os14.png "Member of OpenStack Security SIG")](/~openstack-ossg)
[![Icon of OpenStack Team](https://launchpadlibrarian.net/52313052/os14.png "Member of OpenStack Team")](/~openstack)
[![Icon of Python OpenStack Client Drivers](https://launchpadlibrarian.net/697274978/osc-icon.png "Member of Python OpenStack Client Drivers")](/~python-openstackclient-drivers)
[![Icon of Python OpenStack Client](https://launchpadlibrarian.net/697274843/osc-icon.png "Member of Python OpenStack Client")](/~python-openstackclient)
[![Icon of Soren's Target Audience](https://launchpadlibrarian.net/20548684/golf.png "Member of Soren's Target Audience")](/~sorens-target-audience)
[![Icon of Ubuntu Contributing Developers](https://launchpadlibrarian.net/17290192/wrench_emblem-trans.png "Member of Ubuntu Contributing Developers")](/~ubuntu-developer-members)
[![Icon of Ubuntu Members](https://launchpadlibrarian.net/606495581/CoF%2014px.png "Member of Ubuntu Members")](/~ubuntumembers)
[![Icon of Ubuntu Server papercutters](https://launchpadlibrarian.net/38078797/14.png "Member of Ubuntu Server papercutters")](/~server-papercutters)

Signed Ubuntu Code of Conduct:
Yes

Languages:

English, French

OpenPGP keys:

22A7943050DB1E67EC2B641A507AF89025B10423

SSH keys:

[ttx@stardust](%2Bsshkeys)

[ttx@mercury](%2Bsshkeys)

Time zone:

Europe/Paris
(UTC+0100)

Karma:
[0](https://launchpad.net/~ttx/%2Bkarma)
[Karma help](/%2Bhelp-registry/karma.html)

Social accounts:
![IRC](/@@/social-irc "IRC")
**ttx**
 on
**FreeNode**

## [All bugs in progress](https://launchpad.net/~ttx/%2Bassignedbugs?search=Search&field.status=In+Progress) Assigned bugs

||  | #1473369 [new mock release broke a bunch of unit tests](https://bugs.launchpad.net/python-muranoclient/kilo/%2Bbug/1473369) |  |
| --- | --- | --- |
| in [python-muranoclient](/python-muranoclient), [Glance](/glance), [glance\_store](/glance-store), [Murano](/murano), [neutron](/neutron), [OpenStack Object Storage (swift)](/swift) | | |

| --- | --- | --- | --- | --- | --- |

## Personal package archives

| [Test Openstack 2011.3](/~ttx/%2Barchive/ubuntu/2011.3) |
| --- |
| [Extra packages](/~ttx/%2Barchive/ubuntu/extras) |
| [Bexar update candidates](/~ttx/%2Barchive/ubuntu/nova-bexar-updates) |
| [Junk PPA](/~ttx/%2Barchive/ubuntu/ppa) |
| [Terracotta stack](/~ttx/%2Barchive/ubuntu/terracotta) |

## [All memberships](https://launchpad.net/~ttx/%2Bparticipation) Latest memberships

| [kata-containers](/~kata-containers)  Joined on 2018-10-09 | |
| --- | --- |
| [OpenStack Folsom Stable Maintainers](/~openstack-folsom-maint)  Joined on 2013-04-11 | |
| [OpenStack Python3 Migration Team](/~openstack-py3-team)  Joined on 2013-03-20 | |
| [OpenStack Security SIG](/~openstack-ossg)  Joined on 2012-05-25 | |
| [Swift Drivers](/~swift-drivers)  Joined on 2012-04-06 | |

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
4d55102
([Get the code!](https://dev.launchpad.net/))



=== Content from bugs.launchpad.net_2cb2ab0c_20250126_121503.html ===

[Log in / Register](https://bugs.launchpad.net/nova/%2Bbug/1212179/%2Blogin)

[![](https://launchpadlibrarian.net/324577028/nova64.png)](https://launchpad.net/nova)

## [OpenStack Compute (nova)](https://launchpad.net/nova)

* [Overview](https://launchpad.net/nova)
* [Code](https://code.launchpad.net/nova)
* [Bugs](https://bugs.launchpad.net/nova)
* [Blueprints](https://blueprints.launchpad.net/nova)
* [Translations](https://translations.launchpad.net/nova)
* [Answers](https://answers.launchpad.net/nova)

# [OSSA 2013-024] nova should check the is\_public of flavor when creating an instance

Bug #1212179 reported by
[Ken'ichi Ohmichi](https://launchpad.net/~oomichi)
on 2013-08-14

[260](/%2Bhelp-bugs/bug-heat.html)

This bug affects 2 people

| Affects | | Status | Importance | Assigned to | Milestone |
| --- | --- | --- | --- | --- | --- |
|  | [OpenStack Compute (nova)](https://bugs.launchpad.net/nova) | Fix Released | Critical | [Russell Bryant](https://launchpad.net/~russellb) | [OpenStack Compute (nova) 2013.2 "havana"](https://launchpad.net/nova/%2Bmilestone/2013.2) |
|  | [Grizzly](https://bugs.launchpad.net/nova/grizzly) | Fix Released | Critical | [Russell Bryant](https://launchpad.net/~russellb) | [OpenStack Compute (nova) 2013.1.4](https://launchpad.net/nova/%2Bmilestone/2013.1.4) |
|  | [OpenStack Security Advisory](https://bugs.launchpad.net/ossa) | Fix Released | High | [Thierry Carrez](https://launchpad.net/~ttx) |  |

### Bug Description

If creating a flavor with is\_public "false", the flavor should be accessible only by admin or user who is granted to access.

Now "get flavor details" API checks the is\_public of flavor but "create an instance" API does not check.

In the following case, a user (not admin) cannot access non-public flavor through "get flavor details" API, this is right behavior.

However, he can access non-public flavor through "create an instance" API.

=== admin ==============================================================

$ nova flavor-create --is-public false private-flavor 6 512 0 1

+----+----------------+-----------+------+-----------+------+-------+-------------+-----------+

| ID | Name | Memory\_MB | Disk | Ephemeral | Swap | VCPUs | RXTX\_Factor | Is\_Public |

+----+----------------+-----------+------+-----------+------+-------+-------------+-----------+

| 6 | private-flavor | 512 | 0 | 0 | | 1 | 1.0 | False |

+----+----------------+-----------+------+-----------+------+-------+-------------+-----------+

$

$ curl -i <http://192.168.0.30:8774/v2/7a5c62d3cadb40d28e3c25acf7a05b05/flavors/5> -X GET -H "X-Auth-Project-Id: demo" -H "User-Agent: python-novaclient" -H "Accept: application/json" -H "X-Auth-Token: [..]"

HTTP/1.1 200 OK

Content-Type: application/json

Content-Length: 428

X-Compute-Request-Id: req-53ab8206-f458-441c-a0ca-d17e333f4247

Date: Wed, 14 Aug 2013 09:38:10 GMT

{"flavor": {"name": "m1.xlarge", "links": [{"href": "<http://192.168.0.30:8774/v2/7a5c62d3cadb40d28e3c25acf7a05b05/flavors/5>", "rel": "self"}, {"href": "<http://192.168.0.30:8774/7a5c62d3cadb40d28e3c25acf7a05b05/flavors/5>", "rel": "bookmark"}], "ram": 16384, "OS-FLV-DISABLED:disabled": false, "vcpus": 8, "swap": "", "os-flavor-access:is\_public": true, "rxtx\_factor": 1.0, "OS-FLV-EXT-DATA:ephemeral": 0, "disk": 160, "id": "5"}}

$

=== user("demo" user on devstack) ==============================================================

$ nova flavor-list

+----+-----------+-----------+------+-----------+------+-------+-------------+-----------+

| ID | Name | Memory\_MB | Disk | Ephemeral | Swap | VCPUs | RXTX\_Factor | Is\_Public |

+----+-----------+-----------+------+-----------+------+-------+-------------+-----------+

| 1 | m1.tiny | 512 | 1 | 0 | | 1 | 1.0 | True |

| 2 | m1.small | 2048 | 20 | 0 | | 1 | 1.0 | True |

| 3 | m1.medium | 4096 | 40 | 0 | | 2 | 1.0 | True |

| 4 | m1.large | 8192 | 80 | 0 | | 4 | 1.0 | True |

| 42 | m1.nano | 64 | 0 | 0 | | 1 | 1.0 | True |

| 5 | m1.xlarge | 16384 | 160 | 0 | | 8 | 1.0 | True |

| 84 | m1.micro | 128 | 0 | 0 | | 1 | 1.0 | True |

+----+-----------+-----------+------+-----------+------+-------+-------------+-----------+

$

$ curl -i <http://192.168.0.30:8774/v2/7a5c62d3cadb40d28e3c25acf7a05b05/flavors/6> -X GET -H "X-Auth-Project-Id: demo" -H "User-Agent: python-novaclient" -H "Accept: application/json" -H "X-Auth-Token: [..]"

HTTP/1.1 404 Not Found

Content-Length: 78

Content-Type: application/json; charset=UTF-8

X-Compute-Request-Id: req-a7ac7e99-6d29-4893-97a7-6705083739df

Date: Wed, 14 Aug 2013 09:36:52 GMT

{"itemNotFound": {"message": "The resource could not be found.", "code": 404}}

$

$ curl -i <http://192.168.0.30:8774/v2/7a5c62d3cadb40d28e3c25acf7a05b05/servers> -X POST -H "X-Auth-Project-Id: demo" -H "User-Agent: python-novaclient" -H "Content-Type: application/json" -H "Accept: application/json" -H "X-Auth-Token: [..]" -d '{"server": {"min\_count": 1, "flavorRef": "6", "name": "test-not-public", "imageRef": "428f795d-01b0-44c8-a162-9ad86d1fea35", "max\_count": 1}}'

HTTP/1.1 202 Accepted

Location: <http://192.168.0.30:8774/v2/7a5c62d3cadb40d28e3c25acf7a05b05/servers/91407b32-7ed1-4108-9e62-192b3312ff20>

Content-Type: application/json

Content-Length: 440

X-Compute-Request-Id: req-7e561044-100a-4d70-8b83-cebd21dca8e2

Date: Wed, 14 Aug 2013 09:41:50 GMT

{"server": {"security\_groups": [{"name": "default"}], "OS-DCF:diskConfig": "MANUAL", "id": "91407b32-7ed1-4108-9e62-192b3312ff20", "links": [{"href": "<http://192.168.0.30:8774/v2/7a5c62d3cadb40d28e3c25acf7a05b05/servers/91407b32-7ed1-4108-9e62-192b3312ff20>", "rel": "self"}, {"href": "<http://192.168.0.30:8774/7a5c62d3cadb40d28e3c25acf7a05b05/servers/91407b32-7ed1-4108-9e62-192b3312ff20>", "rel": "bookmark"}], "adminPass": "xvFhTwd3yAzE"}}

$ nova list

+--------------------------------------+-----------------+--------+------------+-------------+------------------+

| ID | Name | Status | Task State | Power State | Networks |

+--------------------------------------+-----------------+--------+------------+-------------+------------------+

| 91407b32-7ed1-4108-9e62-192b3312ff20 | test-not-public | ACTIVE | None | Running | private=10.0.0.3 |

+--------------------------------------+-----------------+--------+------------+-------------+------------------+

$

## Related branches

[lp:ubuntu/quantal-security/nova](https://code.launchpad.net/~ubuntu-branches/ubuntu/quantal/nova/quantal-security)

[lp:ubuntu/quantal-updates/nova](https://code.launchpad.net/~ubuntu-branches/ubuntu/quantal/nova/quantal-updates)

[lp:ubuntu/raring-security/nova](https://code.launchpad.net/~ubuntu-branches/ubuntu/raring/nova/raring-security)

[lp:ubuntu/raring-updates/nova](https://code.launchpad.net/~ubuntu-branches/ubuntu/raring/nova/raring-updates)

## CVE References

* [2013-4278](/bugs/cve/2013-4278 "The \"create an instance\" API in OpenS...")

[OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack)
on 2013-08-14

| Changed in nova: | |
| --- | --- |
| **assignee**: | nobody → Ken'ichi Ohmichi (oomichi) |
| **status**: | New → In Progress |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jeremy Stanley (fungi)](https://launchpad.net/~fungi) wrote on 2013-08-14: |  |  | [#1](/nova/%2Bbug/1212179/comments/1) |
| --- | --- | --- | --- |

Since the other instance of this problem resulted in issuing an advisory (OSSA 2013-019), I'm assuming this one warrants one as well. Opinions?

Since the other instance of this problem resulted in issuing an advisory (OSSA 2013-019), I'm assuming this one warrants one as well. Opinions?

| Changed in ossa: | |
| --- | --- |
| **status**: | New → Incomplete |
| **information type**: | Public → Public Security |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2013-08-14: |  |  | [#2](/nova/%2Bbug/1212179/comments/2) |
| --- | --- | --- | --- |

I suspect you are right.

I suspect you are right.

| Changed in ossa: | |
| --- | --- |
| **status**: | Incomplete → Confirmed |
| **importance**: | Undecided → Medium |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Russell Bryant (russellb)](https://launchpad.net/~russellb) wrote on 2013-08-19: |  |  | [#3](/nova/%2Bbug/1212179/comments/3) |
| --- | --- | --- | --- |

Can you confirm that you're testing with a version that includes the fix for OSSA 2013-019 ? This sounds like a duplicate to me.

Can you confirm that you're testing with a version that includes the fix for OSSA 2013-019 ? This sounds like a duplicate to me.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2013-08-19: |  |  | [#4](/nova/%2Bbug/1212179/comments/4) |
| --- | --- | --- | --- |

According to Russell that looks like a duplicate for [bug 1194093](/bugs/1194093), rather than a continuation: instance-create was fixed in OSSA 2013-019.

Ken'ichi Ohmichi: Could you check that you can reproduce the issue with current master branch ? Or one with <http://github.com/openstack/nova/commit/b65d506a5f9d9b2b20777a9aceb44a8ffed6a5de> in ?

According to Russell that looks like a duplicate for bug 1194093, rather than a continuation: instance-create was fixed in OSSA 2013-019.
Ken'ichi Ohmichi: Could you check that you can reproduce the issue with current master branch ? Or one with http://github.com/openstack/nova/commit/b65d506a5f9d9b2b20777a9aceb44a8ffed6a5de in ?

| Changed in ossa: | |
| --- | --- |
| **status**: | Confirmed → Incomplete |
| **importance**: | Medium → Undecided |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Ken'ichi Ohmichi (oomichi)](https://launchpad.net/~oomichi) wrote on 2013-08-20: |  |  | [#5](/nova/%2Bbug/1212179/comments/5) |
| --- | --- | --- | --- |

> Can you confirm that you're testing with a version that includes the fix for OSSA 2013-019 ?

> This sounds like a duplicate to me.

I have confirmed my environment including OSSA 2013-019(commit-id: b65d506a5f9d9b2b20777a9aceb44a8ffed6a5de).

On the environment, this problem happens.

Please see the part "user("demo" user on devstack)" of this report.

"show flavor" API (curl -i <http://192.168.0.30:8774/v2/7a5c62d3cadb40d28e3c25acf7a05b05/flavors/6> -X GET) returns HTTP404 against not-public flavor.

However, "create instance" API (curl -i <http://192.168.0.30:8774/v2/7a5c62d3cadb40d28e3c25acf7a05b05/servers> -X POST) returns HTTP202, not 404.

This problem is related to OSSA 2013-019.

The commit (b65d506a5f9d9b2b20777a9aceb44a8ffed6a5de) fixes "list flavors" and "show flavor" APIS, but it does not include "create instance" API.

> Can you confirm that you're testing with a version that includes the fix for OSSA 2013-019 ?
> This sounds like a duplicate to me.
I have confirmed my environment including OSSA 2013-019(commit-id: b65d506a5f9d9b2b20777a9aceb44a8ffed6a5de).
On the environment, this problem happens.
Please see the part "user("demo" user on devstack)" of this report.
"show flavor" API (curl -i http://192.168.0.30:8774/v2/7a5c62d3cadb40d28e3c25acf7a05b05/flavors/6 -X GET) returns HTTP404 against not-public flavor.
However, "create instance" API (curl -i http://192.168.0.30:8774/v2/7a5c62d3cadb40d28e3c25acf7a05b05/servers -X POST) returns HTTP202, not 404.
This problem is related to OSSA 2013-019.
The commit (b65d506a5f9d9b2b20777a9aceb44a8ffed6a5de) fixes "list flavors" and "show flavor" APIS, but it does not include "create instance" API.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Ken'ichi Ohmichi (oomichi)](https://launchpad.net/~oomichi) wrote on 2013-08-20: |  |  | [#6](/nova/%2Bbug/1212179/comments/6) |
| --- | --- | --- | --- |

Hi Russell,

One more thing.

We need to port the patch of OSSA 2013-019(commit-id: b65d506a5f9d9b2b20777a9aceb44a8ffed6a5de) to nova v3 tree.

I have posted the patch for doing it, I am happy if you review it. (<https://review.openstack.org/#/c/41843/>)

Hi Russell,
One more thing.
We need to port the patch of OSSA 2013-019(commit-id: b65d506a5f9d9b2b20777a9aceb44a8ffed6a5de) to nova v3 tree.
I have posted the patch for doing it, I am happy if you review it. (https://review.openstack.org/#/c/41843/)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Russell Bryant (russellb)](https://launchpad.net/~russellb) wrote on 2013-08-20: |  |  | [#7](/nova/%2Bbug/1212179/comments/7) |
| --- | --- | --- | --- |

[Download full text](https://bugs.launchpad.net/nova/%2Bbug/1212179/comments/7/%2Bdownload) (4.1 KiB)

At first I thought I couldn't reproduce this, but I was only trying with novaclient. With novaclient, it looks like it doesn't work. It actually fails on trying to get flavor details and doesn't make it far enough to try to boot the server. So, it does appear there is a problem here.

$ . openrc admin

$ nova flavor-create test2 8 512 4 2 --is-public False

+----+-------+-----------+------+-----------+------+-------+-------------+-----------+

| ID | Name | Memory\_MB | Disk | Ephemeral | Swap | VCPUs | RXTX\_Factor | Is\_Public |

+----+-------+-----------+------+-----------+------+-------+-------------+-----------+

| 8 | test2 | 512 | 4 | 0 | | 2 | 1.0 | False |

+----+-------+-----------+------+-----------+------+-------+-------------+-----------+

$ nova flavor-list --all

+----+-----------+-----------+------+-----------+------+-------+-------------+-----------+

| ID | Name | Memory\_MB | Disk | Ephemeral | Swap | VCPUs | RXTX\_Factor | Is\_Public |

+----+-----------+-----------+------+-----------+------+-------+-------------+-----------+

| 1 | m1.tiny | 512 | 1 | 0 | | 1 | 1.0 | True |

| 2 | m1.small | 2048 | 20 | 0 | | 1 | 1.0 | True |

| 3 | m1.medium | 4096 | 40 | 0 | | 2 | 1.0 | True |

| 4 | m1.large | 8192 | 80 | 0 | | 4 | 1.0 | True |

| 42 | m1.nano | 64 | 0 | 0 | | 1 | 1.0 | True |

| 5 | m1.xlarge | 16384 | 160 | 0 | | 8 | 1.0 | True |

| 8 | test2 | 512 | 4 | 0 | | 2 | 1.0 | False |

| 84 | m1.micro | 128 | 0 | 0 | | 1 | 1.0 | True |

+----+-----------+-----------+------+-----------+------+-------+-------------+-----------+

$ . openrc demo

$ nova flavor-list --all

+----+-----------+-----------+------+-----------+------+-------+-------------+-----------+

| ID | Name | Memory\_MB | Disk | Ephemeral | Swap | VCPUs | RXTX\_Factor | Is\_Public |

+----+-----------+-----------+------+-----------+------+-------+-------------+-----------+

| 1 | m1.tiny | 512 | 1 | 0 | | 1 | 1.0 | True |

| 2 | m1.small | 2048 | 20 | 0 | | 1 | 1.0 | True |

| 3 | m1.medium | 4096 | 40 | 0 | | 2 | 1.0 | True |

| 4 | m1.large | 8192 | 80 | 0 | | 4 | 1.0 | True |

| 42 | m1.nano | 64 | 0 | 0 | | 1 | 1.0 | True |

| 5 | m1.xlarge | 16384 | 160 | 0 | | 8 | 1.0 | True |

| 84 | m1.micro | 128 | 0 | 0 | | 1 | 1.0 | True |

+----+-----------+-----------+------+-----------+------+-------+-------------+-----------+

$ nova boot --flavor 8 --image 899f3f21-e3eb-41b2-b9b9-e805e1ec1e02 test

ERROR: No flavor with a name or ID of '8' exists.

$ curl -i <http://162.209.53.10:8774/v2/c7708d0551034f97b1c5fceb848cfcf1/servers> -X POST -H "X-Auth-Project-Id: demo"...

[Read more...](/nova/%2Bbug/1212179/comments/7)

At first I thought I couldn't reproduce this, but I was only trying with novaclient. With novaclient, it looks like it doesn't work. It actually fails on trying to get flavor details and doesn't make it far enough to try to boot the server. So, it does appear there is a problem here.
$ . openrc admin
$ nova flavor-create test2 8 512 4 2 --is-public False
+----+-------+-----------+------+-----------+------+-------+-------------+-----------+
| ID | Name | Memory\_MB | Disk | Ephemeral | Swap | VCPUs | RXTX\_Factor | Is\_Public |
+----+-------+-----------+------+-----------+------+-------+-------------+-----------+
| 8 | test2 | 512 | 4 | 0 | | 2 | 1.0 | False |
+----+-------+-----------+------+-----------+------+-------+-------------+-----------+
$ nova flavor-list --all
+----+-----------+-----------+------+-----------+------+-------+-------------+-----------+
| ID | Name | Memory\_MB | Disk | Ephemeral | Swap | VCPUs | RXTX\_Factor | Is\_Public |
+----+-----------+-----------+------+-----------+------+-------+-------------+-----------+
| 1 | m1.tiny | 512 | 1 | 0 | | 1 | 1.0 | True |
| 2 | m1.small | 2048 | 20 | 0 | | 1 | 1.0 | True |
| 3 | m1.medium | 4096 | 40 | 0 | | 2 | 1.0 | True |
| 4 | m1.large | 8192 | 80 | 0 | | 4 | 1.0 | True |
| 42 | m1.nano | 64 | 0 | 0 | | 1 | 1.0 | True |
| 5 | m1.xlarge | 16384 | 160 | 0 | | 8 | 1.0 | True |
| 8 | test2 | 512 | 4 | 0 | | 2 | 1.0 | False |
| 84 | m1.micro | 128 | 0 | 0 | | 1 | 1.0 | True |
+----+-----------+-----------+------+-----------+------+-------+-------------+-----------+
$ . openrc demo
$ nova flavor-list --all
+----+-----------+-----------+------+-----------+------+-------+-------------+-----------+
| ID | Name | Memory\_MB | Disk | Ephemeral | Swap | VCPUs | RXTX\_Factor | Is\_Public |
+----+-----------+-----------+------+-----------+------+-------+-------------+-----------+
| 1 | m1.tiny | 512 | 1 | 0 | | 1 | 1.0 | True |
| 2 | m1.small | 2048 | 20 | 0 | | 1 | 1.0 | True |
| 3 | m1.medium | 4096 | 40 | 0 | | 2 | 1.0 | True |
| 4 | m1.large | 8192 | 80 | 0 | | 4 | 1.0 | True |
| 42 | m1.nano | 64 | 0 | 0 | | 1 | 1.0 | True |
| 5 | m1.xlarge | 16384 | 160 | 0 | | 8 | 1.0 | True |
| 84 | m1.micro | 128 | 0 | 0 | | 1 | 1.0 | True |
+----+-----------+-----------+------+-----------+------+-------+-------------+-----------+
$ nova boot --flavor 8 --image 899f3f21-e3eb-41b2-b9b9-e805e1ec1e02 test
ERROR: No flavor with a name or ID of '8' exists.
$ curl -i http://162.209.53.10:8774/v2/c7708d0551034f97b1c5fceb848cfcf1/servers -X POST -H "X-Auth-Project-Id: demo" -H "User-Agent: python-novaclient" -H "Content-Type: application/json" -H "Accept: application/json" -H "X-Auth-Token:..." -d '{"server": {"min\_count": 1, "flavorRef": "8", "name": "test2", "imageRef": "899f3f21-e3eb-41b2-b9b9-e805e1ec1e02", "max\_count": 1}}'
HTTP/1.1 202 Accepted
Location: http://162.209.53.10:8774/v2/c7708d0551034f97b1c5fceb848cfcf1/servers/9fb1fcdf-e7a7-40cb-af58-94111c5316bd
Content-Type: application/json
Content-Length: 442
X-Compute-Request-Id: req-5d8e375f-1b05-4bc9-abaf-692ff73077d6
Date: Tue, 20 Aug 2013 13:31:56 GMT
{"server": {"security\_groups": [{"name": "default"}], "OS-DCF:diskConfig": "MANUAL", "id": "9fb1fcdf-e7a7-40cb-af58-94111c5316bd", "links": [{"href": "http://162.209.53.10:8774/v2/c7708d0551034f97b1c5fceb848cfcf1/servers/9fb1fcdf-e7a7-40cb-af58-94111c5316bd", "rel": "self"}, {"href": "http://162.209.53.10:8774/c7708d0551034f97b1c5fceb848cfcf1/servers/9fb1fcdf-e7a7-40cb-af58-94111c5316bd", "rel": "bookmark"}], "adminPass": "fgWiM7FXrac4"}}

[Russell Bryant (russellb)](https://launchpad.net/~russellb)
on 2013-08-20

| Changed in nova: | |
| --- | --- |
| **importance**: | Undecided → Critical |

[Thierry Carrez (ttx)](https://launchpad.net/~ttx)
on 2013-08-20

| Changed in nova: | |
| --- | --- |
| **milestone**: | none → havana-3 |
| Changed in ossa: | |
| **importance**: | Undecided → High |
| **status**: | Incomplete → Confirmed |

[Russell Bryant (russellb)](https://launchpad.net/~russellb)
on 2013-08-20

| Changed in nova: | |
| --- | --- |
| **assignee**: | Ken'ichi Ohmichi (oomichi) → Russell Bryant (russellb) |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2013-08-21:  [**Fix merged to nova (master)**](/nova/%2Bbug/1212179/comments/8) |  |  | [#8](/nova/%2Bbug/1212179/comments/8) |
| --- | --- | --- | --- |

Reviewed: <https://review.openstack.org/42922>

Committed: <http://github.com/openstack/nova/commit/4054cc4a22a1fea997dec76afb5646fd6c6ea6b9>

Submitter: Jenkins

Branch: master

commit 4054cc4a22a1fea997dec76afb5646fd6c6ea6b9

Author: Russell Bryant <email address hidden>

Date: Tue Aug 20 11:06:12 2013 -0400

Enforce flavor access during instance boot

The code in the servers API did not pass the context when retrieving

    flavor details. That means it would use an admin context instead,

    bypassing all flavor access control checks.

This patch includes the fix, and the corresponding unit test, for both

    the v2 and v3 APIs.

Closes-bug: #1212179

Change-Id: I681ae9965e19767df22fa74c3315e4e03a459d3b

Reviewed: https://review.openstack.org/42922
Committed: http://github.com/openstack/nova/commit/4054cc4a22a1fea997dec76afb5646fd6c6ea6b9
Submitter: Jenkins
Branch: master
commit 4054cc4a22a1fea997dec76afb5646fd6c6ea6b9
Author: Russell Bryant <rbryant@redhat.com>
Date: Tue Aug 20 11:06:12 2013 -0400
Enforce flavor access during instance boot
The code in the servers API did not pass the context when retrieving
flavor details. That means it would use an admin context instead,
bypassing all flavor access control checks.
This patch includes the fix, and the corresponding unit test, for both
the v2 and v3 APIs.
Closes-bug: #1212179
Change-Id: I681ae9965e19767df22fa74c3315e4e03a459d3b

| Changed in nova: | |
| --- | --- |
| **status**: | In Progress → Fix Committed |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Ken'ichi Ohmichi (oomichi)](https://launchpad.net/~oomichi) wrote on 2013-08-21:  [**Re: nova should check the is\_public of flavor when creating an instance**](/nova/%2Bbug/1212179/comments/9) |  |  | [#9](/nova/%2Bbug/1212179/comments/9) |
| --- | --- | --- | --- |

Too fast fixing, thanks!

Too fast fixing, thanks!

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2013-08-21: |  |  | [#10](/nova/%2Bbug/1212179/comments/10) |
| --- | --- | --- | --- |

Russell: could you backport the fix for Folsom/Grizzly (if they are affected as well) ?

Proposed Impact description:

=========================

Title: Resource limit circumvention in Nova private flavors

Reporter: Ken'ichi Ohmichi (NEC)

Products: Nova

Affects: All versions

Description:

Ken'ichi Ohmichi from NEC reported that the fix for OSSA 2013-019 (CVE-2013-2256) was incomplete. Any tenant was still able to boot any other tenant's private flavors by guessing a flavor ID. This potentially allowed circumvention of any resource limits enforced through the os-flavor-access:is\_public property.

=========================

Russell: could you backport the fix for Folsom/Grizzly (if they are affected as well) ?
Proposed Impact description:
=========================
Title: Resource limit circumvention in Nova private flavors
Reporter: Ken'ichi Ohmichi (NEC)
Products: Nova
Affects: All versions
Description:
Ken'ichi Ohmichi from NEC reported that the fix for OSSA 2013-019 (CVE-2013-2256) was incomplete. Any tenant was still able to boot any other tenant's private flavors by guessing a flavor ID. This potentially allowed circumvention of any resource limits enforced through the os-flavor-access:is\_public property.
=========================

| Changed in ossa: | |
| --- | --- |
| **assignee**: | nobody → Thierry Carrez (ttx) |
| **status**: | Confirmed → Triaged |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2013-08-21: |  |  | [#11](/nova/%2Bbug/1212179/comments/11) |
| --- | --- | --- | --- |

I suspect we can reuse the same CVE. Asking the CNA for confirmation.

I suspect we can reuse the same CVE. Asking the CNA for confirmation.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2013-08-22:  [**Fix proposed to nova (stable/grizzly)**](/nova/%2Bbug/1212179/comments/12) |  |  | [#12](/nova/%2Bbug/1212179/comments/12) |
| --- | --- | --- | --- |

Fix proposed to branch: stable/grizzly

Review: <https://review.openstack.org/43281>

Fix proposed to branch: stable/grizzly
Review: https://review.openstack.org/43281

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2013-08-22:  [**Fix proposed to nova (stable/folsom)**](/nova/%2Bbug/1212179/comments/13) |  |  | [#13](/nova/%2Bbug/1212179/comments/13) |
| --- | --- | --- | --- |

Fix proposed to branch: stable/folsom

Review: <https://review.openstack.org/43296>

Fix proposed to branch: stable/folsom
Review: https://review.openstack.org/43296

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2013-08-22:  [**Re: nova should check the is\_public of flavor when creating an instance**](/nova/%2Bbug/1212179/comments/14) |  |  | [#14](/nova/%2Bbug/1212179/comments/14) |
| --- | --- | --- | --- |

Please review impact statement

Please review impact statement

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2013-08-22: |  |  | [#15](/nova/%2Bbug/1212179/comments/15) |
| --- | --- | --- | --- |

This was assigned CVE-2013-4278

This was assigned CVE-2013-4278

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2013-08-23:  [**Fix merged to nova (stable/folsom)**](/nova/%2Bbug/1212179/comments/16) |  |  | [#16](/nova/%2Bbug/1212179/comments/16) |
| --- | --- | --- | --- |

Reviewed: <https://review.openstack.org/43296>

Committed: <http://github.com/openstack/nova/commit/6825959560e06725d26625fd21f5c0b78b305492>

Submitter: Jenkins

Branch: stable/folsom

commit 6825959560e06725d26625fd21f5c0b78b305492

Author: Russell Bryant <email address hidden>

Date: Tue Aug 20 11:06:12 2013 -0400

Enforce flavor access during instance boot

The code in the servers API did not pass the context when retrieving

    flavor details. That means it would use an admin context instead,

    bypassing all flavor access control checks.

This patch includes the fix, and the corresponding unit test for the v2

    API.

Closes-bug: #1212179

(cherry picked from commit 4054cc4a22a1fea997dec76afb5646fd6c6ea6b9)

Conflicts:

     nova/api/openstack/compute/plugins/v3/servers.py

     nova/api/openstack/compute/servers.py

     nova/tests/api/openstack/compute/plugins/v3/test\_servers.py

     nova/tests/api/openstack/compute/test\_servers.py

Change-Id: I681ae9965e19767df22fa74c3315e4e03a459d3b

Reviewed: https://review.openstack.org/43296
Committed: http://github.com/openstack/nova/commit/6825959560e06725d26625fd21f5c0b78b305492
Submitter: Jenkins
Branch: stable/folsom
commit 6825959560e06725d26625fd21f5c0b78b305492
Author: Russell Bryant <rbryant@redhat.com>
Date: Tue Aug 20 11:06:12 2013 -0400
Enforce flavor access during instance boot
The code in the servers API did not pass the context when retrieving
flavor details. That means it would use an admin context instead,
bypassing all flavor access control checks.
This patch includes the fix, and the corresponding unit test for the v2
API.
Closes-bug: #1212179
(cherry picked from commit 4054cc4a22a1fea997dec76afb5646fd6c6ea6b9)
Conflicts:
nova/api/openstack/compute/plugins/v3/servers.py
nova/api/openstack/compute/servers.py
nova/tests/api/openstack/compute/plugins/v3/test\_servers.py
nova/tests/api/openstack/compute/test\_servers.py
Change-Id: I681ae9965e19767df22fa74c3315e4e03a459d3b

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Russell Bryant (russellb)](https://launchpad.net/~russellb) wrote on 2013-08-23:  [**Re: nova should check the is\_public of flavor when creating an instance**](/nova/%2Bbug/1212179/comments/17) |  |  | [#17](/nova/%2Bbug/1212179/comments/17) |
| --- | --- | --- | --- |

The description is fine, thanks!

The description is fine, thanks!

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2013-08-24:  [**Fix merged to nova (stable/grizzly)**](/nova/%2Bbug/1212179/comments/18) |  |  | [#18](/nova/%2Bbug/1212179/comments/18) |
| --- | --- | --- | --- |

Reviewed: <https://review.openstack.org/43281>

Committed: <http://github.com/openstack/nova/commit/8b686195afe7e6dfb46c56c1ef2fe9c993d8e495>

Submitter: Jenkins

Branch: stable/grizzly

commit 8b686195afe7e6dfb46c56c1ef2fe9c993d8e495

Author: Russell Bryant <email address hidden>

Date: Tue Aug 20 11:06:12 2013 -0400

Enforce flavor access during instance boot

The code in the servers API did not pass the context when retrieving

    flavor details. That means it would use an admin context instead,

    bypassing all flavor access control checks.

This patch includes the fix, and the corresponding unit test for the v2

    API.

Closes-bug: #1212179

(cherry picked from commit 4054cc4a22a1fea997dec76afb5646fd6c6ea6b9)

Conflicts:

     nova/api/openstack/compute/plugins/v3/servers.py

     nova/api/openstack/compute/servers.py

     nova/tests/api/openstack/compute/plugins/v3/test\_servers.py

     nova/tests/api/openstack/compute/test\_servers.py

Change-Id: I681ae9965e19767df22fa74c3315e4e03a459d3b

Reviewed: https://review.openstack.org/43281
Committed: http://github.com/openstack/nova/commit/8b686195afe7e6dfb46c56c1ef2fe9c993d8e495
Submitter: Jenkins
Branch: stable/grizzly
commit 8b686195afe7e6dfb46c56c1ef2fe9c993d8e495
Author: Russell Bryant <rbryant@redhat.com>
Date: Tue Aug 20 11:06:12 2013 -0400
Enforce flavor access during instance boot
The code in the servers API did not pass the context when retrieving
flavor details. That means it would use an admin context instead,
bypassing all flavor access control checks.
This patch includes the fix, and the corresponding unit test for the v2
API.
Closes-bug: #1212179
(cherry picked from commit 4054cc4a22a1fea997dec76afb5646fd6c6ea6b9)
Conflicts:
nova/api/openstack/compute/plugins/v3/servers.py
nova/api/openstack/compute/servers.py
nova/tests/api/openstack/compute/plugins/v3/test\_servers.py
nova/tests/api/openstack/compute/test\_servers.py
Change-Id: I681ae9965e19767df22fa74c3315e4e03a459d3b

[Thierry Carrez (ttx)](https://launchpad.net/~ttx)
on 2013-08-27

| Changed in ossa: | |
| --- | --- |
| **status**: | Triaged → In Progress |
| **status**: | In Progress → Fix Committed |

[Thierry Carrez (ttx)](https://launchpad.net/~ttx)
on 2013-08-28

| Changed in ossa: | |
| --- | --- |
| **status**: | Fix Committed → Fix Released |
| **summary**: | - nova should check the is\_public of flavor when creating an instance+ [OSSA 2013-024] nova should check the is\_public of flavor when creating+ an instance |

[Thierry Carrez (ttx)](https://launchpad.net/~ttx)
on 2013-09-05

| Changed in nova: | |
| --- | --- |
| **status**: | Fix Committed → Fix Released |

[Thierry Carrez (ttx)](https://launchpad.net/~ttx)
on 2013-10-17

| Changed in nova: | |
| --- | --- |
| **milestone**: | havana-3 → 2013.2 |

[Sean Dague (sdague)](https://launchpad.net/~sdague)
on 2014-09-19

| **no longer affects**: | nova/folsom |
| --- | --- |

[See full activity log](https://bugs.launchpad.net/nova/%2Bbug/1212179/%2Bactivity)

To post a comment you must [log in](%2Blogin?comments=all).

* [Report a bug](/nova/%2Bfilebug)

This report contains
**Public Security**
information

Everyone can see this security related information.

You are
[not directly subscribed to this bug's notifications.](/nova/%2Bbug/1212179/%2Bsubscribe)

Subscribing...

* [Edit bug mail](https://bugs.launchpad.net/nova/%2Bbug/1212179/%2Bsubscriptions "View and change your subscriptions to this bug")

## Other bug subscribers

[Subscribe someone else](https://bugs.launchpad.net/nova/%2Bbug/1212179/%2Baddsubscriber "Launchpad will email that person whenever this bugs changes")

## Remote bug watches

Bug watches keep track of this bug in other bug trackers.

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
4d55102
([Get the code!](https://dev.launchpad.net/))



=== Content from lists.openstack.org_94d629c3_20250125_215545.html ===

# [Open Stack](/)

* [Home](http://openstack.org/ "Go to the Home page")
* [Projects](http://openstack.org/projects/ "Go to the OpenStack Projects page")
* [User Stories](http://openstack.org/user-stories/ "Go to the User Stories page")
* [Community](http://openstack.org/community/ "Go to the Community page")
* [Blog](http://openstack.org/blog/ "Go to the OpenStack Blog")
* [Wiki](http://wiki.openstack.org/ "Go to the OpenStack Wiki")
* [Documentation](http://docs.openstack.org/ "Go to OpenStack Documentation")

# [openstack-announce] [OSSA 2013-024] Resource limit circumvention in Nova private flavors (CVE-2013-4278)

**Thierry Carrez**
thierry at openstack.org

*Wed Aug 28 13:11:11 UTC 2013*

* Previous message: [[openstack-announce] OpenStack Community Weekly Newsletter (Aug 10-23)](000137.html)
* Next message: [[openstack-announce] OpenStack Community Weekly Newsletter (Aug 23-30)](000139.html)
* **Messages sorted by:**
  [[ date ]](date.html#138)
  [[ thread ]](thread.html#138)
  [[ subject ]](subject.html#138)
  [[ author ]](author.html#138)

---

```
-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA256

OpenStack Security Advisory: 2013-024
CVE: CVE-2013-4278
Date: August 28, 2013
Title: Resource limit circumvention in Nova private flavors
Reporter: Ken'ichi Ohmichi (NEC)
Products: Nova
Affects: All versions

Description:
Ken'ichi Ohmichi from NEC reported that the fix for OSSA 2013-019
(CVE-2013-2256) was incomplete. Any tenant was still able to boot any
other tenant's private flavors by guessing a flavor ID. This potentially
allowed circumvention of any resource limits enforced through the
os-flavor-access:is_public property.

Havana (development branch) fix:
<https://review.openstack.org/#/c/42922/>

Grizzly fix:
<https://review.openstack.org/#/c/43281/>

Folsom fix:
<https://review.openstack.org/#/c/43296/>

References:
<http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-4278>
[https://bugs.launchpad.net/nova/+bug/1212179](https://bugs.launchpad.net/nova/%2Bbug/1212179)

Regards,

- --
Thierry Carrez
OpenStack Vulnerability Management Team
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.12 (GNU/Linux)
Comment: Using GnuPG with undefined - <http://www.enigmail.net/>

iQIbBAEBCAAGBQJSHfbsAAoJEFB6+JAlsQQjPUkP9i/41IQPecZ/1V7nsQLPWssp
AUgP5tEwEUGVNGaMM6ptaQtQxrLD+aACi7z8zRZgJopHrDptbIckbRikeSxrzsLB
eWQxynkFPhcjRQTFZOuoEwDdqYUFCr614uGUmCFomYTBIWEZS3ea5aN7PAO4fd62
6hsOHr6xcj7JcZY1GlVNZBcpWel9rvxcXroPrPqmecyDdSPCuiWj8QNiWQ8Y62Vy
ZSOzHjyAWe32sqMSYp3zygdhpX1yacTVf76jDNw+FcLHkqFf4kRX7uJCCPFKNpIk
2nngSjWZEizIkinIc+mzt2vFKt7JMjCJsy7uLKIp9HsJzVN8qH0x6axe3nuMoliC
xdzybOzlCfEOU+L1q0fVVAiuTnXqE562mnm7HchHiUpKHJRv+4hWwukOsy2Wv+aD
TweNziKwmxYdakhEduql4BJ1/6Mqk+1014Q/uOAyO8iKra8JO9i/ZULvuJgQNIao
oXdFCJoKItP+UouaZ4PrRwilwWgVu4rsRWL1STcHgnHorFrCJQ0iO/W9ofn+ft4z
R2q3tBpJDaeorM2D/Q2VkzYvUzAEAa+BCh1CRxMCVIMh6VmSv40TzczmgrdSRUVj
7cKaxc0xiLiPOoYorWuL0A7RPkadOMk9SihmakX70UR5NyfoqdOoAYnl8xcKNaD8
MlxVcQfdPQMWbw6UltQ=
=DGPB
-----END PGP SIGNATURE-----

```

---

* Previous message: [[openstack-announce] OpenStack Community Weekly Newsletter (Aug 10-23)](000137.html)
* Next message: [[openstack-announce] OpenStack Community Weekly Newsletter (Aug 23-30)](000139.html)
* **Messages sorted by:**
  [[ date ]](date.html#138)
  [[ thread ]](thread.html#138)
  [[ subject ]](subject.html#138)
  [[ author ]](author.html#138)

---

[More information about the OpenStack-announce
mailing list](http://lists.openstack.org/cgi-bin/mailman/listinfo/openstack-announce)

---

### OpenStack

* [Projects](http://openstack.org/projects/)
* [OpenStack Security](http://openstack.org/openstack-security/)
* [Common Questions](http://openstack.org/projects/openstack-faq/)
* [Blog](http://openstack.org/blog/)

### Community

* [User Groups](http://openstack.org/community/)
* [Events](http://openstack.org/events/)
* [Jobs](http://openstack.org/jobs/)
* [Companies](http://openstack.org/companies/)
* [Contribute](http://wiki.openstack.org/HowToContribute)

### Documentation

* [OpenStack Manuals](http://docs.openstack.org/)
* [Getting Started](http://docs.openstack.org/diablo/openstack-compute/starter/content/)
* [Wiki](http://wiki.openstack.org/)

### Branding & Legal

* [Logos & Guidelines](http://openstack.org/brand/)
* [Trademark Policy](http://openstack.org/brand/openstack-trademark-policy/)
* [Privacy Policy](http://openstack.org/privacy/)
* [OpenStack CLA](http://wiki.openstack.org/CLA)

---



=== Content from bugs.launchpad.net_836e0037_20250126_121505.html ===

[Log in / Register](https://bugs.launchpad.net/nova/%2Bbug/1212179/%2Blogin)

[![](https://launchpadlibrarian.net/324577028/nova64.png)](https://launchpad.net/nova)

## [OpenStack Compute (nova)](https://launchpad.net/nova)

* [Overview](https://launchpad.net/nova)
* [Code](https://code.launchpad.net/nova)
* [Bugs](https://bugs.launchpad.net/nova)
* [Blueprints](https://blueprints.launchpad.net/nova)
* [Translations](https://translations.launchpad.net/nova)
* [Answers](https://answers.launchpad.net/nova)

# [OSSA 2013-024] nova should check the is\_public of flavor when creating an instance

Bug #1212179 reported by
[Ken'ichi Ohmichi](https://launchpad.net/~oomichi)
on 2013-08-14

[260](/%2Bhelp-bugs/bug-heat.html)

This bug affects 2 people

| Affects | | Status | Importance | Assigned to | Milestone |
| --- | --- | --- | --- | --- | --- |
|  | [OpenStack Compute (nova)](https://bugs.launchpad.net/nova) | Fix Released | Critical | [Russell Bryant](https://launchpad.net/~russellb) | [OpenStack Compute (nova) 2013.2 "havana"](https://launchpad.net/nova/%2Bmilestone/2013.2) |
|  | [Grizzly](https://bugs.launchpad.net/nova/grizzly) | Fix Released | Critical | [Russell Bryant](https://launchpad.net/~russellb) | [OpenStack Compute (nova) 2013.1.4](https://launchpad.net/nova/%2Bmilestone/2013.1.4) |
|  | [OpenStack Security Advisory](https://bugs.launchpad.net/ossa) | Fix Released | High | [Thierry Carrez](https://launchpad.net/~ttx) |  |

### Bug Description

If creating a flavor with is\_public "false", the flavor should be accessible only by admin or user who is granted to access.

Now "get flavor details" API checks the is\_public of flavor but "create an instance" API does not check.

In the following case, a user (not admin) cannot access non-public flavor through "get flavor details" API, this is right behavior.

However, he can access non-public flavor through "create an instance" API.

=== admin ==============================================================

$ nova flavor-create --is-public false private-flavor 6 512 0 1

+----+----------------+-----------+------+-----------+------+-------+-------------+-----------+

| ID | Name | Memory\_MB | Disk | Ephemeral | Swap | VCPUs | RXTX\_Factor | Is\_Public |

+----+----------------+-----------+------+-----------+------+-------+-------------+-----------+

| 6 | private-flavor | 512 | 0 | 0 | | 1 | 1.0 | False |

+----+----------------+-----------+------+-----------+------+-------+-------------+-----------+

$

$ curl -i <http://192.168.0.30:8774/v2/7a5c62d3cadb40d28e3c25acf7a05b05/flavors/5> -X GET -H "X-Auth-Project-Id: demo" -H "User-Agent: python-novaclient" -H "Accept: application/json" -H "X-Auth-Token: [..]"

HTTP/1.1 200 OK

Content-Type: application/json

Content-Length: 428

X-Compute-Request-Id: req-53ab8206-f458-441c-a0ca-d17e333f4247

Date: Wed, 14 Aug 2013 09:38:10 GMT

{"flavor": {"name": "m1.xlarge", "links": [{"href": "<http://192.168.0.30:8774/v2/7a5c62d3cadb40d28e3c25acf7a05b05/flavors/5>", "rel": "self"}, {"href": "<http://192.168.0.30:8774/7a5c62d3cadb40d28e3c25acf7a05b05/flavors/5>", "rel": "bookmark"}], "ram": 16384, "OS-FLV-DISABLED:disabled": false, "vcpus": 8, "swap": "", "os-flavor-access:is\_public": true, "rxtx\_factor": 1.0, "OS-FLV-EXT-DATA:ephemeral": 0, "disk": 160, "id": "5"}}

$

=== user("demo" user on devstack) ==============================================================

$ nova flavor-list

+----+-----------+-----------+------+-----------+------+-------+-------------+-----------+

| ID | Name | Memory\_MB | Disk | Ephemeral | Swap | VCPUs | RXTX\_Factor | Is\_Public |

+----+-----------+-----------+------+-----------+------+-------+-------------+-----------+

| 1 | m1.tiny | 512 | 1 | 0 | | 1 | 1.0 | True |

| 2 | m1.small | 2048 | 20 | 0 | | 1 | 1.0 | True |

| 3 | m1.medium | 4096 | 40 | 0 | | 2 | 1.0 | True |

| 4 | m1.large | 8192 | 80 | 0 | | 4 | 1.0 | True |

| 42 | m1.nano | 64 | 0 | 0 | | 1 | 1.0 | True |

| 5 | m1.xlarge | 16384 | 160 | 0 | | 8 | 1.0 | True |

| 84 | m1.micro | 128 | 0 | 0 | | 1 | 1.0 | True |

+----+-----------+-----------+------+-----------+------+-------+-------------+-----------+

$

$ curl -i <http://192.168.0.30:8774/v2/7a5c62d3cadb40d28e3c25acf7a05b05/flavors/6> -X GET -H "X-Auth-Project-Id: demo" -H "User-Agent: python-novaclient" -H "Accept: application/json" -H "X-Auth-Token: [..]"

HTTP/1.1 404 Not Found

Content-Length: 78

Content-Type: application/json; charset=UTF-8

X-Compute-Request-Id: req-a7ac7e99-6d29-4893-97a7-6705083739df

Date: Wed, 14 Aug 2013 09:36:52 GMT

{"itemNotFound": {"message": "The resource could not be found.", "code": 404}}

$

$ curl -i <http://192.168.0.30:8774/v2/7a5c62d3cadb40d28e3c25acf7a05b05/servers> -X POST -H "X-Auth-Project-Id: demo" -H "User-Agent: python-novaclient" -H "Content-Type: application/json" -H "Accept: application/json" -H "X-Auth-Token: [..]" -d '{"server": {"min\_count": 1, "flavorRef": "6", "name": "test-not-public", "imageRef": "428f795d-01b0-44c8-a162-9ad86d1fea35", "max\_count": 1}}'

HTTP/1.1 202 Accepted

Location: <http://192.168.0.30:8774/v2/7a5c62d3cadb40d28e3c25acf7a05b05/servers/91407b32-7ed1-4108-9e62-192b3312ff20>

Content-Type: application/json

Content-Length: 440

X-Compute-Request-Id: req-7e561044-100a-4d70-8b83-cebd21dca8e2

Date: Wed, 14 Aug 2013 09:41:50 GMT

{"server": {"security\_groups": [{"name": "default"}], "OS-DCF:diskConfig": "MANUAL", "id": "91407b32-7ed1-4108-9e62-192b3312ff20", "links": [{"href": "<http://192.168.0.30:8774/v2/7a5c62d3cadb40d28e3c25acf7a05b05/servers/91407b32-7ed1-4108-9e62-192b3312ff20>", "rel": "self"}, {"href": "<http://192.168.0.30:8774/7a5c62d3cadb40d28e3c25acf7a05b05/servers/91407b32-7ed1-4108-9e62-192b3312ff20>", "rel": "bookmark"}], "adminPass": "xvFhTwd3yAzE"}}

$ nova list

+--------------------------------------+-----------------+--------+------------+-------------+------------------+

| ID | Name | Status | Task State | Power State | Networks |

+--------------------------------------+-----------------+--------+------------+-------------+------------------+

| 91407b32-7ed1-4108-9e62-192b3312ff20 | test-not-public | ACTIVE | None | Running | private=10.0.0.3 |

+--------------------------------------+-----------------+--------+------------+-------------+------------------+

$

## Related branches

[lp:ubuntu/quantal-security/nova](https://code.launchpad.net/~ubuntu-branches/ubuntu/quantal/nova/quantal-security)

[lp:ubuntu/quantal-updates/nova](https://code.launchpad.net/~ubuntu-branches/ubuntu/quantal/nova/quantal-updates)

[lp:ubuntu/raring-security/nova](https://code.launchpad.net/~ubuntu-branches/ubuntu/raring/nova/raring-security)

[lp:ubuntu/raring-updates/nova](https://code.launchpad.net/~ubuntu-branches/ubuntu/raring/nova/raring-updates)

## CVE References

* [2013-4278](/bugs/cve/2013-4278 "The \"create an instance\" API in OpenS...")

[OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack)
on 2013-08-14

| Changed in nova: | |
| --- | --- |
| **assignee**: | nobody → Ken'ichi Ohmichi (oomichi) |
| **status**: | New → In Progress |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jeremy Stanley (fungi)](https://launchpad.net/~fungi) wrote on 2013-08-14: |  |  | [#1](/nova/%2Bbug/1212179/comments/1) |
| --- | --- | --- | --- |

Since the other instance of this problem resulted in issuing an advisory (OSSA 2013-019), I'm assuming this one warrants one as well. Opinions?

Since the other instance of this problem resulted in issuing an advisory (OSSA 2013-019), I'm assuming this one warrants one as well. Opinions?

| Changed in ossa: | |
| --- | --- |
| **status**: | New → Incomplete |
| **information type**: | Public → Public Security |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2013-08-14: |  |  | [#2](/nova/%2Bbug/1212179/comments/2) |
| --- | --- | --- | --- |

I suspect you are right.

I suspect you are right.

| Changed in ossa: | |
| --- | --- |
| **status**: | Incomplete → Confirmed |
| **importance**: | Undecided → Medium |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Russell Bryant (russellb)](https://launchpad.net/~russellb) wrote on 2013-08-19: |  |  | [#3](/nova/%2Bbug/1212179/comments/3) |
| --- | --- | --- | --- |

Can you confirm that you're testing with a version that includes the fix for OSSA 2013-019 ? This sounds like a duplicate to me.

Can you confirm that you're testing with a version that includes the fix for OSSA 2013-019 ? This sounds like a duplicate to me.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2013-08-19: |  |  | [#4](/nova/%2Bbug/1212179/comments/4) |
| --- | --- | --- | --- |

According to Russell that looks like a duplicate for [bug 1194093](/bugs/1194093), rather than a continuation: instance-create was fixed in OSSA 2013-019.

Ken'ichi Ohmichi: Could you check that you can reproduce the issue with current master branch ? Or one with <http://github.com/openstack/nova/commit/b65d506a5f9d9b2b20777a9aceb44a8ffed6a5de> in ?

According to Russell that looks like a duplicate for bug 1194093, rather than a continuation: instance-create was fixed in OSSA 2013-019.
Ken'ichi Ohmichi: Could you check that you can reproduce the issue with current master branch ? Or one with http://github.com/openstack/nova/commit/b65d506a5f9d9b2b20777a9aceb44a8ffed6a5de in ?

| Changed in ossa: | |
| --- | --- |
| **status**: | Confirmed → Incomplete |
| **importance**: | Medium → Undecided |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Ken'ichi Ohmichi (oomichi)](https://launchpad.net/~oomichi) wrote on 2013-08-20: |  |  | [#5](/nova/%2Bbug/1212179/comments/5) |
| --- | --- | --- | --- |

> Can you confirm that you're testing with a version that includes the fix for OSSA 2013-019 ?

> This sounds like a duplicate to me.

I have confirmed my environment including OSSA 2013-019(commit-id: b65d506a5f9d9b2b20777a9aceb44a8ffed6a5de).

On the environment, this problem happens.

Please see the part "user("demo" user on devstack)" of this report.

"show flavor" API (curl -i <http://192.168.0.30:8774/v2/7a5c62d3cadb40d28e3c25acf7a05b05/flavors/6> -X GET) returns HTTP404 against not-public flavor.

However, "create instance" API (curl -i <http://192.168.0.30:8774/v2/7a5c62d3cadb40d28e3c25acf7a05b05/servers> -X POST) returns HTTP202, not 404.

This problem is related to OSSA 2013-019.

The commit (b65d506a5f9d9b2b20777a9aceb44a8ffed6a5de) fixes "list flavors" and "show flavor" APIS, but it does not include "create instance" API.

> Can you confirm that you're testing with a version that includes the fix for OSSA 2013-019 ?
> This sounds like a duplicate to me.
I have confirmed my environment including OSSA 2013-019(commit-id: b65d506a5f9d9b2b20777a9aceb44a8ffed6a5de).
On the environment, this problem happens.
Please see the part "user("demo" user on devstack)" of this report.
"show flavor" API (curl -i http://192.168.0.30:8774/v2/7a5c62d3cadb40d28e3c25acf7a05b05/flavors/6 -X GET) returns HTTP404 against not-public flavor.
However, "create instance" API (curl -i http://192.168.0.30:8774/v2/7a5c62d3cadb40d28e3c25acf7a05b05/servers -X POST) returns HTTP202, not 404.
This problem is related to OSSA 2013-019.
The commit (b65d506a5f9d9b2b20777a9aceb44a8ffed6a5de) fixes "list flavors" and "show flavor" APIS, but it does not include "create instance" API.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Ken'ichi Ohmichi (oomichi)](https://launchpad.net/~oomichi) wrote on 2013-08-20: |  |  | [#6](/nova/%2Bbug/1212179/comments/6) |
| --- | --- | --- | --- |

Hi Russell,

One more thing.

We need to port the patch of OSSA 2013-019(commit-id: b65d506a5f9d9b2b20777a9aceb44a8ffed6a5de) to nova v3 tree.

I have posted the patch for doing it, I am happy if you review it. (<https://review.openstack.org/#/c/41843/>)

Hi Russell,
One more thing.
We need to port the patch of OSSA 2013-019(commit-id: b65d506a5f9d9b2b20777a9aceb44a8ffed6a5de) to nova v3 tree.
I have posted the patch for doing it, I am happy if you review it. (https://review.openstack.org/#/c/41843/)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Russell Bryant (russellb)](https://launchpad.net/~russellb) wrote on 2013-08-20: |  |  | [#7](/nova/%2Bbug/1212179/comments/7) |
| --- | --- | --- | --- |

[Download full text](https://bugs.launchpad.net/nova/%2Bbug/1212179/comments/7/%2Bdownload) (4.1 KiB)

At first I thought I couldn't reproduce this, but I was only trying with novaclient. With novaclient, it looks like it doesn't work. It actually fails on trying to get flavor details and doesn't make it far enough to try to boot the server. So, it does appear there is a problem here.

$ . openrc admin

$ nova flavor-create test2 8 512 4 2 --is-public False

+----+-------+-----------+------+-----------+------+-------+-------------+-----------+

| ID | Name | Memory\_MB | Disk | Ephemeral | Swap | VCPUs | RXTX\_Factor | Is\_Public |

+----+-------+-----------+------+-----------+------+-------+-------------+-----------+

| 8 | test2 | 512 | 4 | 0 | | 2 | 1.0 | False |

+----+-------+-----------+------+-----------+------+-------+-------------+-----------+

$ nova flavor-list --all

+----+-----------+-----------+------+-----------+------+-------+-------------+-----------+

| ID | Name | Memory\_MB | Disk | Ephemeral | Swap | VCPUs | RXTX\_Factor | Is\_Public |

+----+-----------+-----------+------+-----------+------+-------+-------------+-----------+

| 1 | m1.tiny | 512 | 1 | 0 | | 1 | 1.0 | True |

| 2 | m1.small | 2048 | 20 | 0 | | 1 | 1.0 | True |

| 3 | m1.medium | 4096 | 40 | 0 | | 2 | 1.0 | True |

| 4 | m1.large | 8192 | 80 | 0 | | 4 | 1.0 | True |

| 42 | m1.nano | 64 | 0 | 0 | | 1 | 1.0 | True |

| 5 | m1.xlarge | 16384 | 160 | 0 | | 8 | 1.0 | True |

| 8 | test2 | 512 | 4 | 0 | | 2 | 1.0 | False |

| 84 | m1.micro | 128 | 0 | 0 | | 1 | 1.0 | True |

+----+-----------+-----------+------+-----------+------+-------+-------------+-----------+

$ . openrc demo

$ nova flavor-list --all

+----+-----------+-----------+------+-----------+------+-------+-------------+-----------+

| ID | Name | Memory\_MB | Disk | Ephemeral | Swap | VCPUs | RXTX\_Factor | Is\_Public |

+----+-----------+-----------+------+-----------+------+-------+-------------+-----------+

| 1 | m1.tiny | 512 | 1 | 0 | | 1 | 1.0 | True |

| 2 | m1.small | 2048 | 20 | 0 | | 1 | 1.0 | True |

| 3 | m1.medium | 4096 | 40 | 0 | | 2 | 1.0 | True |

| 4 | m1.large | 8192 | 80 | 0 | | 4 | 1.0 | True |

| 42 | m1.nano | 64 | 0 | 0 | | 1 | 1.0 | True |

| 5 | m1.xlarge | 16384 | 160 | 0 | | 8 | 1.0 | True |

| 84 | m1.micro | 128 | 0 | 0 | | 1 | 1.0 | True |

+----+-----------+-----------+------+-----------+------+-------+-------------+-----------+

$ nova boot --flavor 8 --image 899f3f21-e3eb-41b2-b9b9-e805e1ec1e02 test

ERROR: No flavor with a name or ID of '8' exists.

$ curl -i <http://162.209.53.10:8774/v2/c7708d0551034f97b1c5fceb848cfcf1/servers> -X POST -H "X-Auth-Project-Id: demo"...

[Read more...](/nova/%2Bbug/1212179/comments/7)

At first I thought I couldn't reproduce this, but I was only trying with novaclient. With novaclient, it looks like it doesn't work. It actually fails on trying to get flavor details and doesn't make it far enough to try to boot the server. So, it does appear there is a problem here.
$ . openrc admin
$ nova flavor-create test2 8 512 4 2 --is-public False
+----+-------+-----------+------+-----------+------+-------+-------------+-----------+
| ID | Name | Memory\_MB | Disk | Ephemeral | Swap | VCPUs | RXTX\_Factor | Is\_Public |
+----+-------+-----------+------+-----------+------+-------+-------------+-----------+
| 8 | test2 | 512 | 4 | 0 | | 2 | 1.0 | False |
+----+-------+-----------+------+-----------+------+-------+-------------+-----------+
$ nova flavor-list --all
+----+-----------+-----------+------+-----------+------+-------+-------------+-----------+
| ID | Name | Memory\_MB | Disk | Ephemeral | Swap | VCPUs | RXTX\_Factor | Is\_Public |
+----+-----------+-----------+------+-----------+------+-------+-------------+-----------+
| 1 | m1.tiny | 512 | 1 | 0 | | 1 | 1.0 | True |
| 2 | m1.small | 2048 | 20 | 0 | | 1 | 1.0 | True |
| 3 | m1.medium | 4096 | 40 | 0 | | 2 | 1.0 | True |
| 4 | m1.large | 8192 | 80 | 0 | | 4 | 1.0 | True |
| 42 | m1.nano | 64 | 0 | 0 | | 1 | 1.0 | True |
| 5 | m1.xlarge | 16384 | 160 | 0 | | 8 | 1.0 | True |
| 8 | test2 | 512 | 4 | 0 | | 2 | 1.0 | False |
| 84 | m1.micro | 128 | 0 | 0 | | 1 | 1.0 | True |
+----+-----------+-----------+------+-----------+------+-------+-------------+-----------+
$ . openrc demo
$ nova flavor-list --all
+----+-----------+-----------+------+-----------+------+-------+-------------+-----------+
| ID | Name | Memory\_MB | Disk | Ephemeral | Swap | VCPUs | RXTX\_Factor | Is\_Public |
+----+-----------+-----------+------+-----------+------+-------+-------------+-----------+
| 1 | m1.tiny | 512 | 1 | 0 | | 1 | 1.0 | True |
| 2 | m1.small | 2048 | 20 | 0 | | 1 | 1.0 | True |
| 3 | m1.medium | 4096 | 40 | 0 | | 2 | 1.0 | True |
| 4 | m1.large | 8192 | 80 | 0 | | 4 | 1.0 | True |
| 42 | m1.nano | 64 | 0 | 0 | | 1 | 1.0 | True |
| 5 | m1.xlarge | 16384 | 160 | 0 | | 8 | 1.0 | True |
| 84 | m1.micro | 128 | 0 | 0 | | 1 | 1.0 | True |
+----+-----------+-----------+------+-----------+------+-------+-------------+-----------+
$ nova boot --flavor 8 --image 899f3f21-e3eb-41b2-b9b9-e805e1ec1e02 test
ERROR: No flavor with a name or ID of '8' exists.
$ curl -i http://162.209.53.10:8774/v2/c7708d0551034f97b1c5fceb848cfcf1/servers -X POST -H "X-Auth-Project-Id: demo" -H "User-Agent: python-novaclient" -H "Content-Type: application/json" -H "Accept: application/json" -H "X-Auth-Token:..." -d '{"server": {"min\_count": 1, "flavorRef": "8", "name": "test2", "imageRef": "899f3f21-e3eb-41b2-b9b9-e805e1ec1e02", "max\_count": 1}}'
HTTP/1.1 202 Accepted
Location: http://162.209.53.10:8774/v2/c7708d0551034f97b1c5fceb848cfcf1/servers/9fb1fcdf-e7a7-40cb-af58-94111c5316bd
Content-Type: application/json
Content-Length: 442
X-Compute-Request-Id: req-5d8e375f-1b05-4bc9-abaf-692ff73077d6
Date: Tue, 20 Aug 2013 13:31:56 GMT
{"server": {"security\_groups": [{"name": "default"}], "OS-DCF:diskConfig": "MANUAL", "id": "9fb1fcdf-e7a7-40cb-af58-94111c5316bd", "links": [{"href": "http://162.209.53.10:8774/v2/c7708d0551034f97b1c5fceb848cfcf1/servers/9fb1fcdf-e7a7-40cb-af58-94111c5316bd", "rel": "self"}, {"href": "http://162.209.53.10:8774/c7708d0551034f97b1c5fceb848cfcf1/servers/9fb1fcdf-e7a7-40cb-af58-94111c5316bd", "rel": "bookmark"}], "adminPass": "fgWiM7FXrac4"}}

[Russell Bryant (russellb)](https://launchpad.net/~russellb)
on 2013-08-20

| Changed in nova: | |
| --- | --- |
| **importance**: | Undecided → Critical |

[Thierry Carrez (ttx)](https://launchpad.net/~ttx)
on 2013-08-20

| Changed in nova: | |
| --- | --- |
| **milestone**: | none → havana-3 |
| Changed in ossa: | |
| **importance**: | Undecided → High |
| **status**: | Incomplete → Confirmed |

[Russell Bryant (russellb)](https://launchpad.net/~russellb)
on 2013-08-20

| Changed in nova: | |
| --- | --- |
| **assignee**: | Ken'ichi Ohmichi (oomichi) → Russell Bryant (russellb) |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2013-08-21:  [**Fix merged to nova (master)**](/nova/%2Bbug/1212179/comments/8) |  |  | [#8](/nova/%2Bbug/1212179/comments/8) |
| --- | --- | --- | --- |

Reviewed: <https://review.openstack.org/42922>

Committed: <http://github.com/openstack/nova/commit/4054cc4a22a1fea997dec76afb5646fd6c6ea6b9>

Submitter: Jenkins

Branch: master

commit 4054cc4a22a1fea997dec76afb5646fd6c6ea6b9

Author: Russell Bryant <email address hidden>

Date: Tue Aug 20 11:06:12 2013 -0400

Enforce flavor access during instance boot

The code in the servers API did not pass the context when retrieving

    flavor details. That means it would use an admin context instead,

    bypassing all flavor access control checks.

This patch includes the fix, and the corresponding unit test, for both

    the v2 and v3 APIs.

Closes-bug: #1212179

Change-Id: I681ae9965e19767df22fa74c3315e4e03a459d3b

Reviewed: https://review.openstack.org/42922
Committed: http://github.com/openstack/nova/commit/4054cc4a22a1fea997dec76afb5646fd6c6ea6b9
Submitter: Jenkins
Branch: master
commit 4054cc4a22a1fea997dec76afb5646fd6c6ea6b9
Author: Russell Bryant <rbryant@redhat.com>
Date: Tue Aug 20 11:06:12 2013 -0400
Enforce flavor access during instance boot
The code in the servers API did not pass the context when retrieving
flavor details. That means it would use an admin context instead,
bypassing all flavor access control checks.
This patch includes the fix, and the corresponding unit test, for both
the v2 and v3 APIs.
Closes-bug: #1212179
Change-Id: I681ae9965e19767df22fa74c3315e4e03a459d3b

| Changed in nova: | |
| --- | --- |
| **status**: | In Progress → Fix Committed |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Ken'ichi Ohmichi (oomichi)](https://launchpad.net/~oomichi) wrote on 2013-08-21:  [**Re: nova should check the is\_public of flavor when creating an instance**](/nova/%2Bbug/1212179/comments/9) |  |  | [#9](/nova/%2Bbug/1212179/comments/9) |
| --- | --- | --- | --- |

Too fast fixing, thanks!

Too fast fixing, thanks!

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2013-08-21: |  |  | [#10](/nova/%2Bbug/1212179/comments/10) |
| --- | --- | --- | --- |

Russell: could you backport the fix for Folsom/Grizzly (if they are affected as well) ?

Proposed Impact description:

=========================

Title: Resource limit circumvention in Nova private flavors

Reporter: Ken'ichi Ohmichi (NEC)

Products: Nova

Affects: All versions

Description:

Ken'ichi Ohmichi from NEC reported that the fix for OSSA 2013-019 (CVE-2013-2256) was incomplete. Any tenant was still able to boot any other tenant's private flavors by guessing a flavor ID. This potentially allowed circumvention of any resource limits enforced through the os-flavor-access:is\_public property.

=========================

Russell: could you backport the fix for Folsom/Grizzly (if they are affected as well) ?
Proposed Impact description:
=========================
Title: Resource limit circumvention in Nova private flavors
Reporter: Ken'ichi Ohmichi (NEC)
Products: Nova
Affects: All versions
Description:
Ken'ichi Ohmichi from NEC reported that the fix for OSSA 2013-019 (CVE-2013-2256) was incomplete. Any tenant was still able to boot any other tenant's private flavors by guessing a flavor ID. This potentially allowed circumvention of any resource limits enforced through the os-flavor-access:is\_public property.
=========================

| Changed in ossa: | |
| --- | --- |
| **assignee**: | nobody → Thierry Carrez (ttx) |
| **status**: | Confirmed → Triaged |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2013-08-21: |  |  | [#11](/nova/%2Bbug/1212179/comments/11) |
| --- | --- | --- | --- |

I suspect we can reuse the same CVE. Asking the CNA for confirmation.

I suspect we can reuse the same CVE. Asking the CNA for confirmation.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2013-08-22:  [**Fix proposed to nova (stable/grizzly)**](/nova/%2Bbug/1212179/comments/12) |  |  | [#12](/nova/%2Bbug/1212179/comments/12) |
| --- | --- | --- | --- |

Fix proposed to branch: stable/grizzly

Review: <https://review.openstack.org/43281>

Fix proposed to branch: stable/grizzly
Review: https://review.openstack.org/43281

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2013-08-22:  [**Fix proposed to nova (stable/folsom)**](/nova/%2Bbug/1212179/comments/13) |  |  | [#13](/nova/%2Bbug/1212179/comments/13) |
| --- | --- | --- | --- |

Fix proposed to branch: stable/folsom

Review: <https://review.openstack.org/43296>

Fix proposed to branch: stable/folsom
Review: https://review.openstack.org/43296

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2013-08-22:  [**Re: nova should check the is\_public of flavor when creating an instance**](/nova/%2Bbug/1212179/comments/14) |  |  | [#14](/nova/%2Bbug/1212179/comments/14) |
| --- | --- | --- | --- |

Please review impact statement

Please review impact statement

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2013-08-22: |  |  | [#15](/nova/%2Bbug/1212179/comments/15) |
| --- | --- | --- | --- |

This was assigned CVE-2013-4278

This was assigned CVE-2013-4278

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2013-08-23:  [**Fix merged to nova (stable/folsom)**](/nova/%2Bbug/1212179/comments/16) |  |  | [#16](/nova/%2Bbug/1212179/comments/16) |
| --- | --- | --- | --- |

Reviewed: <https://review.openstack.org/43296>

Committed: <http://github.com/openstack/nova/commit/6825959560e06725d26625fd21f5c0b78b305492>

Submitter: Jenkins

Branch: stable/folsom

commit 6825959560e06725d26625fd21f5c0b78b305492

Author: Russell Bryant <email address hidden>

Date: Tue Aug 20 11:06:12 2013 -0400

Enforce flavor access during instance boot

The code in the servers API did not pass the context when retrieving

    flavor details. That means it would use an admin context instead,

    bypassing all flavor access control checks.

This patch includes the fix, and the corresponding unit test for the v2

    API.

Closes-bug: #1212179

(cherry picked from commit 4054cc4a22a1fea997dec76afb5646fd6c6ea6b9)

Conflicts:

     nova/api/openstack/compute/plugins/v3/servers.py

     nova/api/openstack/compute/servers.py

     nova/tests/api/openstack/compute/plugins/v3/test\_servers.py

     nova/tests/api/openstack/compute/test\_servers.py

Change-Id: I681ae9965e19767df22fa74c3315e4e03a459d3b

Reviewed: https://review.openstack.org/43296
Committed: http://github.com/openstack/nova/commit/6825959560e06725d26625fd21f5c0b78b305492
Submitter: Jenkins
Branch: stable/folsom
commit 6825959560e06725d26625fd21f5c0b78b305492
Author: Russell Bryant <rbryant@redhat.com>
Date: Tue Aug 20 11:06:12 2013 -0400
Enforce flavor access during instance boot
The code in the servers API did not pass the context when retrieving
flavor details. That means it would use an admin context instead,
bypassing all flavor access control checks.
This patch includes the fix, and the corresponding unit test for the v2
API.
Closes-bug: #1212179
(cherry picked from commit 4054cc4a22a1fea997dec76afb5646fd6c6ea6b9)
Conflicts:
nova/api/openstack/compute/plugins/v3/servers.py
nova/api/openstack/compute/servers.py
nova/tests/api/openstack/compute/plugins/v3/test\_servers.py
nova/tests/api/openstack/compute/test\_servers.py
Change-Id: I681ae9965e19767df22fa74c3315e4e03a459d3b

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Russell Bryant (russellb)](https://launchpad.net/~russellb) wrote on 2013-08-23:  [**Re: nova should check the is\_public of flavor when creating an instance**](/nova/%2Bbug/1212179/comments/17) |  |  | [#17](/nova/%2Bbug/1212179/comments/17) |
| --- | --- | --- | --- |

The description is fine, thanks!

The description is fine, thanks!

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2013-08-24:  [**Fix merged to nova (stable/grizzly)**](/nova/%2Bbug/1212179/comments/18) |  |  | [#18](/nova/%2Bbug/1212179/comments/18) |
| --- | --- | --- | --- |

Reviewed: <https://review.openstack.org/43281>

Committed: <http://github.com/openstack/nova/commit/8b686195afe7e6dfb46c56c1ef2fe9c993d8e495>

Submitter: Jenkins

Branch: stable/grizzly

commit 8b686195afe7e6dfb46c56c1ef2fe9c993d8e495

Author: Russell Bryant <email address hidden>

Date: Tue Aug 20 11:06:12 2013 -0400

Enforce flavor access during instance boot

The code in the servers API did not pass the context when retrieving

    flavor details. That means it would use an admin context instead,

    bypassing all flavor access control checks.

This patch includes the fix, and the corresponding unit test for the v2

    API.

Closes-bug: #1212179

(cherry picked from commit 4054cc4a22a1fea997dec76afb5646fd6c6ea6b9)

Conflicts:

     nova/api/openstack/compute/plugins/v3/servers.py

     nova/api/openstack/compute/servers.py

     nova/tests/api/openstack/compute/plugins/v3/test\_servers.py

     nova/tests/api/openstack/compute/test\_servers.py

Change-Id: I681ae9965e19767df22fa74c3315e4e03a459d3b

Reviewed: https://review.openstack.org/43281
Committed: http://github.com/openstack/nova/commit/8b686195afe7e6dfb46c56c1ef2fe9c993d8e495
Submitter: Jenkins
Branch: stable/grizzly
commit 8b686195afe7e6dfb46c56c1ef2fe9c993d8e495
Author: Russell Bryant <rbryant@redhat.com>
Date: Tue Aug 20 11:06:12 2013 -0400
Enforce flavor access during instance boot
The code in the servers API did not pass the context when retrieving
flavor details. That means it would use an admin context instead,
bypassing all flavor access control checks.
This patch includes the fix, and the corresponding unit test for the v2
API.
Closes-bug: #1212179
(cherry picked from commit 4054cc4a22a1fea997dec76afb5646fd6c6ea6b9)
Conflicts:
nova/api/openstack/compute/plugins/v3/servers.py
nova/api/openstack/compute/servers.py
nova/tests/api/openstack/compute/plugins/v3/test\_servers.py
nova/tests/api/openstack/compute/test\_servers.py
Change-Id: I681ae9965e19767df22fa74c3315e4e03a459d3b

[Thierry Carrez (ttx)](https://launchpad.net/~ttx)
on 2013-08-27

| Changed in ossa: | |
| --- | --- |
| **status**: | Triaged → In Progress |
| **status**: | In Progress → Fix Committed |

[Thierry Carrez (ttx)](https://launchpad.net/~ttx)
on 2013-08-28

| Changed in ossa: | |
| --- | --- |
| **status**: | Fix Committed → Fix Released |
| **summary**: | - nova should check the is\_public of flavor when creating an instance+ [OSSA 2013-024] nova should check the is\_public of flavor when creating+ an instance |

[Thierry Carrez (ttx)](https://launchpad.net/~ttx)
on 2013-09-05

| Changed in nova: | |
| --- | --- |
| **status**: | Fix Committed → Fix Released |

[Thierry Carrez (ttx)](https://launchpad.net/~ttx)
on 2013-10-17

| Changed in nova: | |
| --- | --- |
| **milestone**: | havana-3 → 2013.2 |

[Sean Dague (sdague)](https://launchpad.net/~sdague)
on 2014-09-19

| **no longer affects**: | nova/folsom |
| --- | --- |

[See full activity log](https://bugs.launchpad.net/nova/%2Bbug/1212179/%2Bactivity)

To post a comment you must [log in](%2Blogin?comments=all).

* [Report a bug](/nova/%2Bfilebug)

This report contains
**Public Security**
information

Everyone can see this security related information.

You are
[not directly subscribed to this bug's notifications.](/nova/%2Bbug/1212179/%2Bsubscribe)

Subscribing...

* [Edit bug mail](https://bugs.launchpad.net/nova/%2Bbug/1212179/%2Bsubscriptions "View and change your subscriptions to this bug")

## Other bug subscribers

[Subscribe someone else](https://bugs.launchpad.net/nova/%2Bbug/1212179/%2Baddsubscriber "Launchpad will email that person whenever this bugs changes")

## Remote bug watches

Bug watches keep track of this bug in other bug trackers.

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
4d55102
([Get the code!](https://dev.launchpad.net/))



=== Content from launchpad.net_358978c3_20250126_121459.html ===

[Log in / Register](https://launchpad.net/~hudson-openstack/%2Blogin)

[![](/@@/person-logo)](https://launchpad.net/~hudson-openstack)

## [OpenStack Infra](https://launchpad.net/~hudson-openstack)

* Overview
* [Code](https://code.launchpad.net/~hudson-openstack)
* [Bugs](https://bugs.launchpad.net/~hudson-openstack)
* [Blueprints](https://blueprints.launchpad.net/~hudson-openstack)
* [Translations](https://translations.launchpad.net/~hudson-openstack)
* [Answers](https://answers.launchpad.net/~hudson-openstack)

* [Related packages](https://launchpad.net/~hudson-openstack/%2Brelated-packages)
* [Related projects](https://launchpad.net/~hudson-openstack/%2Brelated-projects)

## User information

Launchpad Id:
hudson-openstack

Email:
[Log in](%2Blogin) for email information.

Member since:
2010-07-14

[![Icon of Burrow](https://launchpadlibrarian.net/67728214/os14.png "Member of Burrow")](/~burrow)
[![Icon of Citrix OpenStack development team](https://launchpadlibrarian.net/64472709/Citrix%2014.png "Member of Citrix OpenStack development team")](/~citrix-openstack)
[![Icon of (deprecated) OpenStack PPA maintainers](https://launchpadlibrarian.net/87891894/ppa.gif "Member of (deprecated) OpenStack PPA maintainers")](/~openstack-ppa)
[![Icon of Designate Core](https://launchpadlibrarian.net/360468328/designate_14.jpg "Member of Designate Core")](/~designate-core)
[![Icon of Designate Drivers](https://launchpadlibrarian.net/360468067/designate_14.jpg "Member of Designate Drivers")](/~designate-drivers)
[![Icon of MidoNet Bugs](https://launchpadlibrarian.net/228074955/midonet_14x14.png "Member of MidoNet Bugs")](/~midonet-bugs)
[![Icon of Nova Bug Team](https://launchpadlibrarian.net/108832444/bug.gif "Member of Nova Bug Team")](/~nova-bugs)
[![Icon of Nova](https://launchpadlibrarian.net/52560219/os14.png "Member of Nova")](/~nova)
[![Icon of OpenStack Team](https://launchpadlibrarian.net/52313052/os14.png "Member of OpenStack Team")](/~openstack)

Languages:

English

OpenPGP keys:

72571ACC301E6FE900837F5CDF85501232EE128C

SSH keys:

[hudson@hudson](%2Bsshkeys)

[jenkins@vpcslave](%2Bsshkeys)

Time zone:

UTC
(UTC+0000)

Karma:
[6503](https://launchpad.net/~hudson-openstack/%2Bkarma)
[Karma help](/%2Bhelp-registry/karma.html)

## [All memberships](https://launchpad.net/~hudson-openstack/%2Bparticipation) Latest memberships

| [Compute Hyper-V Bugs](/~compute-hyperv-bugs)  Joined on 2019-08-28 | |
| --- | --- |
| [OS-Win Bugs](/~os-win-bugs)  Joined on 2019-08-28 | |
| [Networking Hyper-V Bugs](/~networking-hyperv-bugs)  Joined on 2019-08-28 | |
| [kolla-drivers](/~kolla-drivers)  Joined on 2019-05-20 | |
| [fixtures-git-bugs](/~fixtures-git-bugs)  Joined on 2018-03-25 | |

## [Recent activities](https://launchpad.net/~hudson-openstack/%2Bkarma) Most active in

| [StarlingX](/starlingx) |  |
| --- | --- |
| [kolla-ansible](/kolla-ansible) |  |
| [kolla](/kolla) |  |
| [kayobe](/kayobe) |  |
| [OpenStack Compute (nova)](/nova) |  |

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
4d55102
([Get the code!](https://dev.launchpad.net/))



=== Content from review.openstack.org_aefac4e7_20250126_121501.html ===



