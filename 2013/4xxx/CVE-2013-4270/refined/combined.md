=== Content from www.redhat.com_c01f4ddc_20250126_034540.html ===


[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

**We're sorry but cve-details doesn't work properly without JavaScript enabled. Please enable it to continue.**

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from access.redhat.com_552fc08f_20250126_034544.html ===


[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

**We're sorry but cve-details doesn't work properly without JavaScript enabled. Please enable it to continue.**

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from www.redhat.com_f772d4e5_20250126_034543.html ===


[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

**We're sorry but cve-details doesn't work properly without JavaScript enabled. Please enable it to continue.**

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from bugzilla.redhat.com_6eb0cdfe_20250126_034541.html ===


* Login
  + Log in using an SSO provider:- [Fedora Account System](saml2_login.cgi?idp=Fedora%20Account%20System&target=show_bug.cgi%3Fid%3D1027778)
    - [Red Hat Associate](saml2_login.cgi?idp=Red%20Hat%20Associate&target=show_bug.cgi%3Fid%3D1027778)
    - [Red Hat Customer](saml2_login.cgi?idp=Red%20Hat%20Customer&target=show_bug.cgi%3Fid%3D1027778)+ Login using a Red Hat Bugzilla account
  + Forgot Password
  + [Create an Account](createaccount.cgi)

Red Hat Bugzilla – Bug 1027778

* [Home](./)
* [New](enter_bug.cgi)
* Search
  + [Simple Search](query.cgi?format=specific)
  + [Advanced Search](query.cgi?format=advanced)
* My Links
  + [Browse](describecomponents.cgi)
  + [Requests](request.cgi)
  + Reports
  + Current State
    - [Search](query.cgi)
    - [Tabular reports](query.cgi?format=report-table)
    - [Graphical reports](query.cgi?format=report-graph)
    - [Duplicates](duplicates.cgi)
  + Other Reports
    - [User Changes](https://bugzilla.redhat.com/page.cgi?id=user_activity.html)
  + Plotly Reports
    - [Bug Status](https://bugzilla.redhat.com/page.cgi?id=bug_status.html)
    - [Bug Severity](https://bugzilla.redhat.com/page.cgi?id=bug_severity.html)
    - [Non-Defaults](https://bugzilla.redhat.com/page.cgi?id=non_defaults.html)
* [Product Dashboard](page.cgi?id=productdashboard.html)

- Help
  * [Page Help!](docs/en/html/using/understanding.html)
  * [Bug Writing Guidelines](page.cgi?id=bug-writing.html)
  * [What's new](page.cgi?id=whats-new.html)
  * [Browser Support Policy](https://access.redhat.com/help/browsers)
  * [5.0.4.rh103 Release notes](page.cgi?id=release-notes.html)
  * [FAQ](page.cgi?id=faq.html)
  * [Guides index](docs/en/html/index.html)
  * [User guide](docs/en/html/using/index.html)
  * [Web Services](docs/en/html/integrating/api/Bugzilla/WebService/Bug.html)
  * [Contact](page.cgi?id=redhat/contact.html)
  * [Legal](page.cgi?id=terms-conditions.html)
- [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")

This site requires JavaScript to be enabled to function correctly, please enable it.

[**Bug 1027778**](show_bug.cgi?id=1027778)
(CVE-2013-2930)
- [CVE-2013-2930](https://access.redhat.com/security/cve/CVE-2013-2930) kernel: perf/ftrace: insufficient check in perf\_trace\_event\_perm()

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
CVE-2013-2930 kernel: perf/ftrace: insufficient check in perf\_trace\_event\_perm()

| | [Keywords](describekeywords.cgi): | Security | | --- | --- | | [Status](page.cgi?id=fields.html#bug_status): | CLOSED ERRATA | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | CVE-2013-2930 | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components. Select a Classification to narrow down this list.") | Security Response | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Other | | [Component:](describecomponents.cgi?product=Security Response "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | vulnerability | | [Sub Component:](page.cgi?id=fields.html#rh_sub_components "The sub component of a specific component") | --- | | [Version:](page.cgi?id=fields.html#version "The version field defines the version of the software the bug was found in.") | unspecified | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | All | | [OS:](page.cgi?id=fields.html#op_sys "The operating system the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Linux | | [Priority:](page.cgi?id=fields.html#priority) | medium | | [Severity:](page.cgi?id=fields.html#bug_severity) | medium | | [Target Milestone:](page.cgi?id=fields.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | --- | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Red Hat Product Security | | [QA Contact:](page.cgi?id=fields.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") |  | | [Docs Contact:](page.cgi?id=fields.html#docs_contact "The person responsible for documenting once the bug has been resolved.") |  | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | [Depends On:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") | [1027779](show_bug.cgi?id=1027779) [1027781](show_bug.cgi?id=1027781) [1027783](show_bug.cgi?id=1027783) | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") | [1027789](show_bug.cgi?id=1027789) | | TreeView+ | [depends on](buglist.cgi?bug_id=1027778&bug_id_type=anddependson&format=tvp) / [blocked](buglist.cgi?bug_id=1027778&bug_id_type=andblocked&format=tvp&tvp_dir=blocked) |  | |  | | [Reported:](page.cgi?id=fields.html#reporter) | 2013-11-07 12:06 UTC by Petr Matousek | | --- | --- | | [Modified:](page.cgi?id=fields.html#modified) | 2021-02-17 07:11 UTC ([History](show_activity.cgi?id=1027778)) | | [CC List:](page.cgi?id=fields.html#cclist) | 20 users (show)  agordeev anton aquini bhu dhoward esammons fhrbata iboverma jkacur jolsa jross kernel-mgr lgoncalv lwang mcressma npajkovs pholasek pmatouse security-response-team williams | | Fixed In Version: |  | | | Doc Type: | Bug Fix | | | Doc Text: |  | | | Clone Of: |  | | | Environment: |  | | | Last Closed: | 2014-01-28 18:29:30 UTC | | | Embargoed: |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | [(Terms of Use)](page.cgi?id=terms-conditions.html) | | | --- | --- | --- | |  | | |    Links | System | ID | Private | Priority | Status | Summary | Last Updated | | Red Hat Product Errata | [RHSA-2014:0100](https://access.redhat.com/errata/RHSA-2014%3A0100) | 0 | normal | SHIPPED\_LIVE | Important: kernel-rt security and bug fix update | 2014-01-28 22:38:58 UTC | |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=1027778#c0)  Petr Matousek    2013-11-07 12:06:17 UTC  ``` A flaw was found in the way perf_trace_event_perm() function in the Linux kernel checked permissions for function tracer functionality, allowing unprivileged local user to enable function tracing.  As a result, unprivileged local user could make the system unusable (DoS).  Introduced by: <http://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/commit/?id=ced39002f5ea>  Fixed by: <http://git.kernel.org/cgit/linux/kernel/git/rostedt/linux-trace.git/commit/?h=ftrace/urgent&id=d1356abac98cce8e7765186f8093da1442d74d1d>   ```  [Comment 4](show_bug.cgi?id=1027778#c4)  Petr Matousek    2013-11-07 12:51:08 UTC  ``` Statement:  This issue does not affect the version of the kernel package as shipped with Red Hat Enterprise Linux 5 and 6.   ```  [Comment 5](show_bug.cgi?id=1027778#c5)  Jarod Wilson    2013-12-05 14:09:18 UTC  ``` Patch(es) available on kernel-3.10.0-58.el7   ```  [Comment 7](show_bug.cgi?id=1027778#c7)  Jarod Wilson    2013-12-05 20:13:48 UTC  ``` This is the tracking bug, not the RHEL7 bug, not quite sure how that didn't get caught at commit time. Fixing...   ```  [Comment 12](show_bug.cgi?id=1027778#c12)  errata-xmlrpc    2014-01-28 17:40:46 UTC  ``` This issue has been addressed in following products:    MRG for RHEL-6 v.2  Via RHSA-2014:0100 <https://rhn.redhat.com/errata/RHSA-2014-0100.html>   ``` |  |
| --- | --- |

---

| Note You need to [log in](show_bug.cgi?id=1027778&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. |
| --- |

---

[Privacy](page.cgi?id=redhat/privacy.html)
[Contact](page.cgi?id=redhat/contact.html)
[FAQ](page.cgi?id=faq.html)
[Legal](page.cgi?id=terms-conditions.html)



=== Content from www.redhat.com_818edfe0_20250126_034543.html ===


[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

**We're sorry but cve-details doesn't work properly without JavaScript enabled. Please enable it to continue.**

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from access.redhat.com_f3632052_20250126_034544.html ===


[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)

  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Product Documentation](https://access.redhat.com/documentation)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)

  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform)
  [All Product Docs](//docs.redhat.com/en/products/)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)

  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Classifications](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Severety Ratings](https://access.redhat.com/security/security-updates/#/cve)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)

  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

 Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

# Severity ratings

## Understanding Red Hat security ratings

Red Hat Product Security rates the severity of security issues found
in Red Hat products using a four-point scale (Low, Moderate,
Important, and Critical), as well as including a separate Common
Vulnerability Scoring System (CVSS) base score. These scoring systems
provide a prioritized risk assessment to help you understand and
schedule upgrades to your systems, enabling informed decisions on the
risk each issue places on your unique environment.

The four-point scale tells you how serious Red Hat considers an issue
to be, helping you judge the severity and determine the most important
updates. The scale takes into account the potential risk based on a technical analysis of the exact flaw and its type. The risk level of a flaw does not change if an exploit or worm is later released for a flaw, or if one is available before the release of a fix. A flaw will only be re-evaluated if new technical details emerge.

The following table provides severity ratings for Red Hat products and systems. For flaws specific to AI models, see [Red Hat security ratings for AI models](https://access.redhat.com/security/ai).

| **Severity ratings** | **Security flaw description** |
| --- | --- |
| **Critical impact** | This rating is given to flaws that could be easily exploited by a remote unauthenticated attacker and lead to system compromise (arbitrary code execution) without requiring user interaction, or easily cause system compromise via inference end points on AI systems. Flaws that require authentication, local or physical access to a system, or an unlikely configuration are not classified as Critical impact. These are the types of vulnerabilities that can be exploited by worms. |
| **Important impact** | This rating is given to flaws that can easily compromise the confidentiality, integrity or availability of resources. These are the types of vulnerabilities that allow local or authenticated users to gain additional privileges, allow unauthenticated remote users to view resources that should otherwise be protected by authentication or other controls, allow authenticated remote users to execute arbitrary code, allow remote users to cause a denial of service, or can cause system compromise via inference end points on AI systems. |
| **Moderate impact** | This rating is given to flaws that may be more difficult to exploit but could still lead to some compromise of the confidentiality, integrity or availability of resources under certain circumstances. It is also given to flaws that could be exploited to cause denial of service-like conditions on AI systems via an inference end point, or allow attackers to steal other users’ data from the AI system without authorization. These are the types of vulnerabilities that could have had a Critical or Important impact but are less easily exploited based on a technical evaluation of the flaw and/or affect unlikely configurations. || **Low impact** | This rating is given to all other issues that may have a security impact. These are the types of vulnerabilities that are believed to require unlikely circumstances to be able to be exploited, or where a successful exploit would give minimal consequences. This includes flaws that are present in a program’s source code but to which no current or theoretically possible, but unproven, exploitation vectors exist or were found during the technical analysis of the flaw. |

A Red Hat security advisory can contain fixes for more than one
vulnerability and for packages for more than one product (such as both
Red Hat Enterprise Linux 7 and 8). Each issue in an advisory has a
severity rating for each product. The overall severity of an advisory
is the highest severity out of all the individual issues, across all
the products the advisory targets. For simplicity, advisories only
show the overall severity. The advisories contain links to the
relevant entries in Red Hat's bug-tracking system, where you can
examine individual severity ratings and additional commentary, as well
as links to the relevant pages in Red Hat’s CVE database.

When a technology—enabled and most likely used by default—completely
blocks the exploitation of a particular vulnerability across all
architectures, we will adjust the severity level. When a technology
reduces the risk of a vulnerability, we may adjust the severity level
and give an explanation of the decision in the bug-tracking  and CVE
database entries.

## Common Vulnerability Scoring System (CVSS)

Common Vulnerability Scoring System (CVSS) base scores provide
additional guidance about a vulnerability, giving a detailed severity
rating by scoring the constant aspects of a vulnerability: Attack
Vector, Attack Complexity, User Interaction, Privileges Required,
Scope, Confidentiality, Integrity, and Availability.

CVSS version 2 base metrics are available for all vulnerabilities from
2009-2016, as well as selected earlier vulnerabilities. In 2016, Red
Hat adopted the CVSS v3 standard, and all vulnerabilities going
forward will use version 3.1 for scoring. These scores are found on
the
[CVE pages](https://access.redhat.com/security/security-updates/#/cve)
(linked from the References section of each Red Hat Security Advisory).

Red Hat does not solely use the CVSS rating to determine the priority
with which flaws are fixed, or to determine the severity rating of the
vulnerability. It is used as a guideline to identify and describe key
metrics of a flaw, however the priority for which flaws are fixed is
determined by the overall severity of the flaw using the
aforementioned four-point scale.  CVSS is meant to help customers
prioritize the order in which they remediate flaws.

### CVSS v3 Base Metrics

The CVSS v3 base metrics group covers the constant aspects of a
vulnerability:

* Attack Vector (AV) - Expresses the "remoteness" of the attack and
  how the vulnerability is exploited.
* Attack Complexity (AC) - Speaks to the difficulty of executing an
  attack and what factors are needed for it to be successful. (Along
  with User Interaction, Attack Complexity was formerly part of the
  Access Complexity metric.).
* User Interaction (UI) - Determines whether the attack requires an
  active human to participate or if the attack can be automated.
* Privileges Required (PR) - Documents the level of user
  authentication required for the attack to be successful. (This
  replaces the former Authentication metric.).
* Scope (S) - Determines whether an attacker can impact a component
  beyond its security scope/authority.
* Confidentiality (C) - Determines whether unauthorized parties can
  access data and to what extent.
* Integrity (I) - Measures the impact to the trustworthiness and
  veracity of data.
* Availability (A) - Refers to the impact to accessibility of data or
  services for authorized users.

A formula translates these measurements into a single, numerical base
score, ranging from 0.0 (no risk) to 10.0 (highest risk). Refer to
[Common Vulnerability Scoring System v3.1: User Guide](https://www.first.org/cvss/user-guide)
for detailed descriptions of the base metrics. It is important to note
that the CVSS base metrics were designed to be used with the other
CVSS metric groups, notably the Temporal and Environmental metrics, to
provide an accurate representation of risk in customer environments.
Alone, the Base metrics offer a shallow view of the vulnerability
itself without accounting for deployment or the environment.

### How Red Hat Uses CVSS v3 Base Metrics

We aim to comply with the CVSS v3 standard when assigning base scores,
and Red Hat uses base metrics that reflect how a vulnerability affects
our products specifically.  In addition, we do not use the Qualitative
Severity Rating Scale in the CVSS v3.1 User Guide to rate severity,
and our severity ratings are always based on the aforementioned
four-point scale.  In some circumstances, it may not be obvious why a
flaw received a particular score. The following are some common
vulnerability types with our interpretation and typical scoring:

#### Libraries

It is not always possible to know how third-party applications use
libraries, making it difficult to give accurate CVSS v3 base metrics
for flaws in system libraries. When rating these flaws, we take into
account the way the library is used by applications that we ship, and
also look at other popular software that may use the library in a way
that would cause an issue to be of higher severity, and adjust the
score appropriately.

#### Other Common Scores

Flaws where a local, unprivileged user can cause a kernel to crash
(denial of service) typically score 5.5 (for example,
[CVE-2019-9213](https://access.redhat.com/security/cve/CVE-2019-9213)).

Flaws that allow a local, unprivileged user to escalate their
privileges to root typically score 7.8 (for example,
[CVE-2019-18634](https://access.redhat.com/security/cve/CVE-2019-18634)).

Cross-site scripting flaws are generally scored as having Low impact
to Integrity and/or Confidentiality, with no impact to Availability,
in line with scoring from other vendors and NVD. A typical score for
these flaws is 6.1 (for example,
[CVE-2020-11023](https://access.redhat.com/security/cve/CVE-2020-11023)).

### Base Score Variations Across Products

It is common for a given CVE-named vulnerability to have several
different CVSS base metrics, depending on the product, version, and
architecture. Examples of this include:

* A vulnerability that only affected some architectures. For example,
  [CVE-2019-15031](https://access.redhat.com/security/cve/CVE-2019-15031)
  only affected PowerPC.
* A vulnerability that is mitigated by source code protection
  mechanisms on some platforms. For example,
  [CVE-2018-1125](https://access.redhat.com/security/cve/CVE-2018-1125)
  could have led to arbitrary code execution on Red Hat Enterprise
  Linux, but it is only a denial of service because it was compiled
  with FORTIFY protections.
* A vulnerability that affected more than one product.  For example,
  [CVE-2020-14060](https://access.redhat.com/security/cve/CVE-2020-14060)
  affected a component in both OpenShift and OpenStack.  The severity
  to OpenStack was lower (Low) as compared to OpenShift (Moderate)
  based on its usage; the overall vulnerability itself was rated
  Important.

If CVSS v3 base scores are significantly different across products, we
note that separately wherever possible. If we do not split the score,
we report the metric that gives the highest CVSS v3 base score (the
worst-case outcome).

### Differences Between NVD and Red Hat Scores

For open source software shipped by multiple vendors, the CVSS base
scores may vary for each vendor's version, depending on the version
they ship, how they ship it, the platform, and even how the software
is compiled. This makes scoring vulnerabilities difficult for
third-party vulnerability databases, such as NVD, who can give only a
single CVSS base score to each vulnerability, or when comparing to
other vendors who score based on the characteristics of use in their
own products. See the
[National Vulnerability Database](https://nvd.nist.gov/vuln-metrics/cvss)
for more information regarding NVD security ratings.

These differences can cause the scores to vary widely. Other reasons
may include how the source code was compiled with certain compiler
flags or hardening technologies that reduce or eliminate the security
severity of a flaw, or how the software is used within the product.
Software running standalone may suffer from a flaw, but its use within
a product may preclude the vulnerable code from ever being used in a
way that could be exploited.

For example, NVD may rate a flaw in a particular service as having
High Impact on the CVSS CIA Triad (Confidentiality, Integrity,
Availability) where the service in question is typically run as the
root user with full privileges on a system. However, in a Red Hat
product, the service may be specifically configured to run as a
dedicated non-privileged user running entirely in a SELinux sandbox,
greatly reducing the immediate impact from compromise, resulting in
Low impact.

For these reasons, we recommend that, whenever possible, you use a
CVSS base score provided by Red Hat in preference to a score from a
third party. Please
[let us know](https://access.redhat.com/site/security/team/contact/)
if you believe we have given an incorrect CVSS v3 base score for a
particular vulnerability. We are happy to discuss and update if
needed.

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com)

### Help

* [Contact Customer Portal](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Systems Status

### About

* [Red Hat Subscription Value](https://access.redhat.com/subscription-value)
* [About Red Hat](https://www.redhat.com/about/)
* [Red Hat Jobs](http://jobs.redhat.com)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

Copyright © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)

×
### Formatting Tips

Here are the common uses of Markdown.

Code blocks
```
~~~
Code surrounded in tildes is easier to read
~~~
```

Links/URLs`[Red Hat Customer Portal](https://access.redhat.com)`

[Learn more](/help/markdown)
Close



=== Content from github.com_bfee0f44_20250124_215351.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ftorvalds%2Flinux%2Fcommit%2F2433c8f094a008895e66f25bd1773cdb01c91d01)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ftorvalds%2Flinux%2Fcommit%2F2433c8f094a008895e66f25bd1773cdb01c91d01)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=torvalds%2Flinux)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[torvalds](/torvalds)
/
**[linux](/torvalds/linux)**
Public

* [Notifications](/login?return_to=%2Ftorvalds%2Flinux) You must be signed in to change notification settings
* [Fork
  54.9k](/login?return_to=%2Ftorvalds%2Flinux)
* [Star
   186k](/login?return_to=%2Ftorvalds%2Flinux)

* [Code](/torvalds/linux)
* [Pull requests
  437](/torvalds/linux/pulls)
* [Actions](/torvalds/linux/actions)
* [Projects
  0](/torvalds/linux/projects)
* [Security](/torvalds/linux/security)
* [Insights](/torvalds/linux/pulse)

Additional navigation options

* [Code](/torvalds/linux)
* [Pull requests](/torvalds/linux/pulls)
* [Actions](/torvalds/linux/actions)
* [Projects](/torvalds/linux/projects)
* [Security](/torvalds/linux/security)
* [Insights](/torvalds/linux/pulse)

## Commit

[Permalink](/torvalds/linux/commit/2433c8f094a008895e66f25bd1773cdb01c91d01)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

net: Update the sysctl permissions handler to test effective uid/gid

[Browse files](/torvalds/linux/tree/2433c8f094a008895e66f25bd1773cdb01c91d01)
Browse the repository at this point in the history

```
Modify the code to use current_euid(), and in_egroup_p, as in done
in fs/proc/proc_sysctl.c:test_perm()

Cc: stable@vger.kernel.org
Reviewed-by: Eric Sandeen <sandeen@redhat.com>
Reported-by: Eric Sandeen <sandeen@redhat.com>
Signed-off-by: "Eric W. Biederman" <ebiederm@xmission.com>
Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
```

* Loading branch information

[![@ebiederm](https://avatars.githubusercontent.com/u/7477136?s=40&v=4)](/ebiederm) [![@torvalds](https://avatars.githubusercontent.com/u/1024025?s=40&v=4)](/torvalds)

[ebiederm](/torvalds/linux/commits?author=ebiederm "View all commits by ebiederm")
authored and
[torvalds](/torvalds/linux/commits?author=torvalds "View all commits by torvalds")
committed
Oct 6, 2013

1 parent
[13caa8e](/torvalds/linux/commit/13caa8ed93513dd216ede0c84d833e39fc2e3e2a)

commit 2433c8f

Showing
**1 changed file**
with
**2 additions**
and
**2 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

## There are no files selected for viewing

4 changes: 2 additions & 2 deletions

4
[net/sysctl\_net.c](#diff-af0a34dc5ae7614638817dc0cb56513cee453571f6656dd74e83df5587c4c8a9 "net/sysctl_net.c")

Show comments

[View file](/torvalds/linux/blob/2433c8f094a008895e66f25bd1773cdb01c91d01/net/sysctl_net.c)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -47,12 +47,12 @@ static int net\_ctl\_permissions(struct ctl\_table\_header \*head, |
|  |  |  |
|  |  | /\* Allow network administrator to have same access as root. \*/ |
|  |  | if (ns\_capable(net->user\_ns, CAP\_NET\_ADMIN) || |
|  |  | uid\_eq(root\_uid, current\_uid())) { |
|  |  | uid\_eq(root\_uid, current\_euid())) { |
|  |  | int mode = (table->mode >> 6) & 7; |
|  |  | return (mode << 6) | (mode << 3) | mode; |
|  |  | } |
|  |  | /\* Allow netns root group to have the same access as the root group \*/ |
|  |  | if (gid\_eq(root\_gid, current\_gid())) { |
|  |  | if (in\_egroup\_p(root\_gid)) { |
|  |  | int mode = (table->mode >> 3) & 7; |
|  |  | return (mode << 3) | mode; |
|  |  | } |
| Expand Down | |  |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `2433c8f`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ftorvalds%2Flinux%2Fcommit%2F2433c8f094a008895e66f25bd1773cdb01c91d01) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from www.kernel.org_46285c42_20250124_215343.html ===
commit a145cb954f3eb95c682ba8f7f85227784b3cb34b
Author: Greg Kroah-Hartman
Date: Sun Oct 13 18:14:45 2013 -0700
Linux 3.11.5
commit fe164452c52395b47286b0ba3dfc9b3b3041f547
Author: Kent Overstreet
Date: Thu Oct 10 17:31:15 2013 -0700
bcache: Fix a null ptr deref regression
commit 2fe80d3bbf1c8bd9efc5b8154207c8dd104e7306 upstream.
Commit c0f04d88e46d ("bcache: Fix flushes in writeback mode") was fixing
a reported data corruption bug, but it seems some last minute
refactoring or rebasing introduced a null pointer deref.
Signed-off-by: Kent Overstreet
Reported-by: Gabriel de Perthuis
Signed-off-by: Linus Torvalds
Signed-off-by: Greg Kroah-Hartman
commit c0684969f66a2f636f5c9a78fe7267b38ccd149f
Author: Bjørn Mork
Date: Tue Sep 10 15:06:20 2013 +0200
net: qmi\_wwan: add new Qualcomm devices
commit 0470667caa8261beb8a9141102b04a5357dd45b5 upstream.
Adding the device list from the Windows driver description files
included with a new Qualcomm MDM9615 based device, "Alcatel-sbell
ASB TL131 TDD LTE", from China Mobile. This device is tested
and verified to work. The others are assumed to work based on
using the same Windows driver.
Many of these devices support multiple QMI/wwan ports, requiring
multiple interface matching entries. All devices are composite,
providing a mix of one or more serial, storage or Android Debug
Brigde functions in addition to the wwan function.
This device list included an update of one previously known device,
which was incorrectly assumed to have a Gobi 2K layout. This is
corrected.
Reported-by: 王康
Signed-off-by: Bjørn Mork
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 54e4243b67f631403d689dadfc802013012905e7
Author: David Herrmann
Date: Mon Sep 9 18:33:54 2013 +0200
HID: uhid: allocate static minor
commit 19872d20c890073c5207d9e02bb8f14d451a11eb upstream.
udev has this nice feature of creating "dead" /dev/ device-nodes if
it finds a devnode: modalias. Once the node is accessed, the kernel
automatically loads the module that provides the node. However, this
requires udev to know the major:minor code to use for the node. This
feature was introduced by:
commit 578454ff7eab61d13a26b568f99a89a2c9edc881
Author: Kay Sievers
Date: Thu May 20 18:07:20 2010 +0200
driver core: add devname module aliases to allow module on-demand auto-loading
However, uhid uses dynamic minor numbers so this doesn't actually work. We
need to load uhid to know which minor it's going to use.
Hence, allocate a static minor (just like uinput does) and we're good
to go.
Reported-by: Tom Gundersen
Signed-off-by: David Herrmann
Signed-off-by: Jiri Kosina
Signed-off-by: Greg Kroah-Hartman
commit 9dfe194e32d837b34ac62e06e6357e21442ba009
Author: Marcel Holtmann
Date: Sun Sep 1 11:02:46 2013 -0700
HID: uhid: add devname module alias
commit 60cbd53e4bf623fe978e6f23a6da642e730fde3a upstream.
For simple device node creation, add the devname module alias.
Signed-off-by: Marcel Holtmann
Reviewed-by: David Herrmann
Signed-off-by: Jiri Kosina
Signed-off-by: Greg Kroah-Hartman
commit 95f5af75db038b378b7fe2bad64d828f0f35a991
Author: Anders F. U. Kiær
Date: Tue Oct 1 19:22:05 2013 +0200
HID: add Holtek USB ID 04d9:a081 SHARKOON DarkGlider
commit 7da7cbbbeb60e0939fecdf9723b388136c175e5c upstream.
Added id, bindings and comments for Holtek USB ID 04d9:a081 SHARKOON
DarkGlider Gaming mouse to use the same corrections of the report
descriptor as Holtek 04d9:a04a. As the mouse exceed HID\_MAX\_USAGES
at the same offsets in the reported descriptor.
Tested on the hardware.
Signed-off-by: Anders F. U. Kiær
Signed-off-by: Jiri Kosina
Signed-off-by: Greg Kroah-Hartman
commit 872de0f11f2817020d91aa51ecd8b97be16a516e
Author: Stefan Achatz
Date: Fri Aug 30 14:10:07 2013 +0200
HID: roccat: add support for KonePureOptical v2
commit a4be0ed39f2b1ea990804ea54e39bc42d17ed5a5 upstream.
KonePureOptical is a KonePure with different sensor.
Signed-off-by: Stefan Achatz
Signed-off-by: Jiri Kosina
Signed-off-by: Greg Kroah-Hartman
commit bd525da042d6221b98676f840facf1f9c780ba84
Author: Josef Bacik
Date: Thu Aug 22 17:03:29 2013 -0400
Btrfs: remove ourselves from the cluster list under lock
commit b8d0c69b9469ffd33df30fee3e990f2d4aa68a09 upstream.
A user was reporting weird warnings from btrfs\_put\_delayed\_ref() and I noticed
that we were doing this list\_del\_init() on our head ref outside of
delayed\_refs->lock. This is a problem if we have people still on the list, we
could end up modifying old pointers and such. Fix this by removing us from the
list before we do our run\_delayed\_ref on our head ref. Thanks,
Signed-off-by: Josef Bacik
Signed-off-by: Chris Mason
Signed-off-by: Greg Kroah-Hartman
commit 1aa65a004a258d3a83eb9f55f4277d9688ec35c5
Author: Josef Bacik
Date: Mon Aug 12 10:56:14 2013 -0400
Btrfs: skip subvol entries when checking if we've created a dir already
commit a05254143cd183b18002cbba7759a1e4629aa762 upstream.
We have logic to see if we've already created a parent directory by check to see
if an inode inside of that directory has a lower inode number than the one we
are currently processing. The logic is that if there is a lower inode number
then we would have had to made sure the directory was created at that previous
point. The problem is that subvols inode numbers count from the lowest objectid
in the root tree, which may be less than our current progress. So just skip if
our dir item key is a root item. This fixes the original test and the xfstest
version I made that added an extra subvol create. Thanks,
Reported-by: Emil Karlson
Signed-off-by: Josef Bacik
Signed-off-by: Chris Mason
Signed-off-by: Greg Kroah-Hartman
commit 5c9f7ebcf25e00906b62239a457a7bb22b90135d
Author: Josef Bacik
Date: Tue Jul 30 16:30:30 2013 -0400
Btrfs: change how we queue blocks for backref checking
commit b6c60c8018c4e9beb2f83fc82c09f9d033766571 upstream.
Previously we only added blocks to the list to have their backrefs checked if
the level of the block is right above the one we are searching for. This is
because we want to make sure we don't add the entire path up to the root to the
lists to make sure we process things one at a time. This assumes that if any
blocks in the path to the root are going to be not checked (shared in other
words) then they will be in the level right above the current block on up. This
isn't quite right though since we can have blocks higher up the list that are
shared because they are attached to a reloc root. But we won't add this block
to be checked and then later on we will BUG\_ON(!upper->checked). So instead
keep track of wether or not we've queued a block to be checked in this current
search, and if we haven't go ahead and queue it to be checked. This patch fixed
the panic I was seeing where we BUG\_ON(!upper->checked). Thanks,
Signed-off-by: Josef Bacik
Signed-off-by: Chris Mason
Signed-off-by: Greg Kroah-Hartman
commit 6593b34b1251c27d1949878f04bf58130d47625f
Author: Josef Bacik
Date: Mon Jul 22 12:50:37 2013 -0400
Btrfs: reset ret in record\_one\_backref
commit 50f1319cb5f7690e4d9de18d1a75ea89296d0e53 upstream.
I was getting warnings when running find ./ -type f -exec btrfs fi defrag -f {}
\; from record\_one\_backref because ret was set. Turns out it was because it was
set to 1 because the search slot didn't come out exact and we never reset it.
So reset it to 0 right after the search so we don't leak this and get
uneccessary warnings. Thanks,
Signed-off-by: Josef Bacik
Signed-off-by: Chris Mason
Signed-off-by: Greg Kroah-Hartman
commit 557801d93e4f3e77c7149da1acd6b068c32c90fb
Author: Martin Schwidefsky
Date: Fri Sep 27 15:24:38 2013 +0200
s390: fix system call restart after inferior call
commit dbbfe487e5f3fc00c9fe5207d63309859704d12f upstream.
Git commit 616498813b11ffef "s390: system call path micro optimization"
introduced a regression in regard to system call restarting and inferior
function calls via the ptrace interface. The pointer to the system call
table needs to be loaded in sysc\_sigpending if do\_signal returns with
TIF\_SYSCALl set after it restored a system call context.
Signed-off-by: Martin Schwidefsky
Signed-off-by: Greg Kroah-Hartman
commit 4d686ca4def8f3c56de1f73340770edc58c5251f
Author: Chris Metcalf
Date: Thu Sep 26 13:24:53 2013 -0400
tile: use a more conservative \_\_my\_cpu\_offset in CONFIG\_PREEMPT
commit f862eefec0b68e099a9fa58d3761ffb10bad97e1 upstream.
It turns out the kernel relies on barrier() to force a reload of the
percpu offset value. Since we can't easily modify the definition of
barrier() to include "tp" as an output register, we instead provide a
definition of \_\_my\_cpu\_offset as extended assembly that includes a fake
stack read to hazard against barrier(), forcing gcc to know that it
must reread "tp" and recompute anything based on "tp" after a barrier.
This fixes observed hangs in the slub allocator when we are looping
on a percpu cmpxchg\_double.
A similar fix for ARMv7 was made in June in change 509eb76ebf97.
Signed-off-by: Chris Metcalf
Signed-off-by: Greg Kroah-Hartman
commit 4bb5b1a014026ff17f88e0cbb9e21fb6a0869e6d
Author: Franck Jullien
Date: Wed Jul 24 15:17:48 2013 +0200
mmc: fix null pointer use in mmc\_blk\_remove\_req
commit 8efb83a2f8518a6ffcc074177f8d659c5165ef37 upstream.
A previous commit (fdfa20c1631210d0) reordered the shutdown sequence
in mmc\_blk\_remove\_req. However, mmc\_cleanup\_queue is now called before
we get the card pointer, and mmc\_cleanup\_queue sets mq->card to NULL.
This patch moves the card pointer assignment before mmc\_cleanup\_queue.
Signed-off-by: Franck Jullien
Signed-off-by: Chris Ball
Cc: Adrian Hunter
Signed-off-by: Greg Kroah-Hartman
commit 6f94b7b0a15c04649b67135c7edaaeb591131e8f
Author: David Herrmann
Date: Wed Oct 2 13:47:28 2013 +0200
HID: wiimote: fix FF deadlock
commit f50f9aabf32db7414551ffdfdccc71be5f3d6e7d upstream.
The input core has an internal spinlock that is acquired during event
injection via input\_event() and friends but also held during FF callbacks.
That means, there is no way to share a lock between event-injection and FF
handling. Unfortunately, this is what is required for wiimote state
tracking and what we do with state.lock and input->lock.
This deadlock can be triggered when using continuous data reporting and FF
on a wiimote device at the same time. I takes me at least 30m of
stress-testing to trigger it but users reported considerably shorter
times (http://bpaste.net/show/132504/) when using some gaming-console
emulators.
The real problem is that we have two copies of internal state, one in the
wiimote objects and the other in the input device. As the input-lock is
not supposed to be accessed from outside of input-core, we have no other
chance than offloading FF handling into a worker. This actually works
pretty nice and also allows to implictly merge fast rumble changes into a
single request.
Due to the 3-layered workers (rumble+queue+l2cap) this might reduce FF
responsiveness. Initial tests were fine so lets fix the race first and if
it turns out to be too slow we can always handle FF out-of-band and skip
the queue-worker.
Reported-by: Thomas Schneider
Signed-off-by: David Herrmann
Signed-off-by: Jiri Kosina
Signed-off-by: Greg Kroah-Hartman
commit b5419a98b659a7588cda0b3005f7a6e8c9a63f35
Author: Olof Johansson
Date: Mon Sep 16 09:01:24 2013 -0700
ARM: multi\_v7\_defconfig: enable ARM\_ATAG\_DTB\_COMPAT
commit a0396b9bd5a4a7baf598b60d2ca53c605c440a42 upstream.
Without this, legacy platforms that can boot with a multiplatform
kernel but that need the DTB to be appended, won't have a way to pass
firmware-set bootargs to the kernel.
This is needed to boot multi\_v7\_defconfig on snowball, for instance.
Signed-off-by: Olof Johansson
Cc: Kevin Hilman
Signed-off-by: Greg Kroah-Hartman
commit 10c7a5f1b2fc1a5a8b5288c24853cfa1caf423f4
Author: Takashi Iwai
Date: Mon Sep 30 12:13:44 2013 +0200
ALSA: hda - Fix GPIO for Acer Aspire 3830TG
commit 4a4370442c996be0fd08234a167c8a127c2488bb upstream.
Acer Aspire 3830TG seems requiring GPIO bit 0 as the primary mute
control. When a machine is booted after Windows 8, the GPIO pin is
turned off and it results in the silent output.
This patch adds the manual fixup of GPIO bit 0 for this model.
Reported-by: Christopher
Signed-off-by: Takashi Iwai
Signed-off-by: Greg Kroah-Hartman
commit f5909743240448cffe37fc66ce032582e8c472d6
Author: Stephen Warren
Date: Tue Aug 6 14:38:51 2013 -0600
ARM: tegra: unify Tegra's Kconfig a bit more
commit 20984c44b5a08620778ea14fa5807489170fd5ca upstream.
Move all common select clauses from ARCH\_TEGRA\_\*\_SOC to ARCH\_TEGRA to
eliminate duplication. The USB-related selects all should have been
common too, but were missing from Tegra114 previously. Move these to
ARCH\_TEGRA too. The latter fixes a build break when only Tegra114
support was enabled, but not Tegra20 or Tegra30 support.
Signed-off-by: Stephen Warren
Reported-by: Paul Walmsley
Signed-off-by: Greg Kroah-Hartman
commit 2e5ab49a2fc61392ec303c0c82e1060c3ace3e10
Author: Ben Skeggs
Date: Tue Sep 10 12:11:01 2013 +1000
drm/nouveau/bios/init: stub opcode 0xaa
commit 5495e39fb3695182b9f2a72fe4169056cada37a1 upstream.
Signed-off-by: Ben Skeggs
Signed-off-by: Greg Kroah-Hartman
commit d9645bbc32d900eca739e1aa8d2762e330e7a93c
Author: Mark Tinguely
Date: Mon Sep 23 12:18:58 2013 -0500
xfs: fix node forward in xfs\_node\_toosmall
commit 997def25e4b9cee3b01609e18a52f926bca8bd2b upstream.
Commit f5ea1100 cleans up the disk to host conversions for
node directory entries, but because a variable is reused in
xfs\_node\_toosmall() the next node is not correctly found.
If the original node is small enough (<= 3/8 of the node size),
this change may incorrectly cause a node collapse when it should
not. That will cause an assert in xfstest generic/319:
Assertion failed: first <= last && last < BBTOB(bp->b\_length),
file: /root/newest/xfs/fs/xfs/xfs\_trans\_buf.c, line: 569
Keep the original node header to get the correct forward node.
(When a node is considered for a merge with a sibling, it overwrites the
sibling pointers of the original incore nodehdr with the sibling's
pointers. This leads to loop considering the original node as a merge
candidate with itself in the second pass, and so it incorrectly
determines a merge should occur.)
[v3: added Dave Chinner's (slightly modified) suggestion to the commit header,
cleaned up whitespace. -bpm]
Signed-off-by: Mark Tinguely
Reviewed-by: Ben Myers
Signed-off-by: Ben Myers
Signed-off-by: Greg Kroah-Hartman
commit 311a38441f3b71bf993f6b18d56cbfa43007d48c
Author: Lv Zheng
Date: Fri Sep 13 13:13:23 2013 +0800
ACPI / IPMI: Fix atomic context requirement of ipmi\_msg\_handler()
commit 06a8566bcf5cf7db9843a82cde7a33c7bf3947d9 upstream.
This patch fixes the issues indicated by the test results that
ipmi\_msg\_handler() is invoked in atomic context.
BUG: scheduling while atomic: kipmi0/18933/0x10000100
Modules linked in: ipmi\_si acpi\_ipmi ...
CPU: 3 PID: 18933 Comm: kipmi0 Tainted: G AW 3.10.0-rc7+ #2
Hardware name: QCI QSSC-S4R/QSSC-S4R, BIOS QSSC-S4R.QCI.01.00.0027.070120100606 07/01/2010
ffff8838245eea00 ffff88103fc63c98 ffffffff814c4a1e ffff88103fc63ca8
ffffffff814bfbab ffff88103fc63d28 ffffffff814c73e0 ffff88103933cbd4
0000000000000096 ffff88103fc63ce8 ffff88102f618000 ffff881035c01fd8
Call Trace:
 [] dump\_stack+0x19/0x1b
[] \_\_schedule\_bug+0x46/0x54
[] \_\_schedule+0x83/0x59c
[] \_\_cond\_resched+0x22/0x2d
[] \_cond\_resched+0x14/0x1d
[] mutex\_lock+0x11/0x32
[] ? \_\_default\_send\_IPI\_dest\_field.constprop.0+0x53/0x58
[] ipmi\_msg\_handler+0x23/0x166 [ipmi\_si]
[] deliver\_response+0x55/0x5a
[] handle\_new\_recv\_msgs+0xb67/0xc65
[] ? read\_tsc+0x9/0x19
[] ? \_raw\_spin\_lock\_irq+0xa/0xc
[] ipmi\_thread+0x5c/0x146 [ipmi\_si]
...
Also Tony Camuso says:
We were getting occasional "Scheduling while atomic" call traces
during boot on some systems. Problem was first seen on a Cisco C210
but we were able to reproduce it on a Cisco c220m3. Setting
CONFIG\_LOCKDEP and LOCKDEP\_SUPPORT to 'y' exposed a lockdep around
tx\_msg\_lock in acpi\_ipmi.c struct acpi\_ipmi\_device.
=================================
[ INFO: inconsistent lock state ]
2.6.32-415.el6.x86\_64-debug-splck #1
---------------------------------
inconsistent {SOFTIRQ-ON-W} -> {IN-SOFTIRQ-W} usage.
ksoftirqd/3/17 [HC0[0]:SC1[1]:HE1:SE0] takes:
(&ipmi\_device->tx\_msg\_lock){+.?...}, at: [] ipmi\_msg\_handler+0x71/0x126
{SOFTIRQ-ON-W} state was registered at:
[] \_\_lock\_acquire+0x63c/0x1570
[] lock\_acquire+0xa4/0x120
[] \_\_mutex\_lock\_common+0x4c/0x400
[] mutex\_lock\_nested+0x4a/0x60
[] acpi\_ipmi\_space\_handler+0x11b/0x234
[] acpi\_ev\_address\_space\_dispatch+0x170/0x1be
The fix implemented by this change has been tested by Tony:
Tested the patch in a boot loop with lockdep debug enabled and never
saw the problem in over 400 reboots.
Reported-and-tested-by: Tony Camuso
Signed-off-by: Lv Zheng
Reviewed-by: Huang Ying
Signed-off-by: Rafael J. Wysocki
Cc: Jonghwan Choi
Signed-off-by: Greg Kroah-Hartman
commit 36b6481134dc79cd80ab9b410334623134042e9d
Author: Michael Grzeschik
Date: Tue Sep 17 15:56:06 2013 +0200
dmaengine: imx-dma: fix slow path issue in prep\_dma\_cyclic
commit edc530fe7ee5a562680615d2e7cd205879c751a7 upstream.
When perparing cyclic\_dma buffers by the sound layer, it will dump the
following lockdep trace. The leading snd\_pcm\_action\_single get called
with read\_lock\_irq called. To fix this, we change the kcalloc call from
GFP\_KERNEL to GFP\_ATOMIC.
WARNING: at kernel/lockdep.c:2740 lockdep\_trace\_alloc+0xcc/0x114()
DEBUG\_LOCKS\_WARN\_ON(irqs\_disabled\_flags(flags))
Modules linked in:
CPU: 0 PID: 832 Comm: aplay Not tainted 3.11.0-20130823+ #903
Backtrace:
[] (dump\_backtrace+0x0/0x10c) from [] (show\_stack+0x18/0x1c)
r6:c004c090 r5:00000009 r4:c2e0bd18 r3:00404000
[] (show\_stack+0x0/0x1c) from [] (dump\_stack+0x20/0x28)
[] (dump\_stack+0x0/0x28) from [] (warn\_slowpath\_common+0x54/0x70)
[] (warn\_slowpath\_common+0x0/0x70) from [] (warn\_slowpath\_fmt+0x38/0x40)
r8:00004000 r7:a3b90000 r6:000080d0 r5:60000093 r4:c2e0a000 r3:00000009
[] (warn\_slowpath\_fmt+0x0/0x40) from [] (lockdep\_trace\_alloc+0xcc/0x114)
r3:c03955d8 r2:c03907db
[] (lockdep\_trace\_alloc+0x0/0x114) from [] (\_\_kmalloc+0x34/0x118)
r6:000080d0 r5:c3800120 r4:000080d0 r3:c040a0f8
[] (\_\_kmalloc+0x0/0x118) from [] (imxdma\_prep\_dma\_cyclic+0x64/0x168)
r7:a3b90000 r6:00000004 r5:c39d8420 r4:c3847150
[] (imxdma\_prep\_dma\_cyclic+0x0/0x168) from [] (snd\_dmaengine\_pcm\_trigger+0xa8/0x160)
[] (snd\_dmaengine\_pcm\_trigger+0x0/0x160) from [] (soc\_pcm\_trigger+0x90/0xb4)
r8:c058c7b0 r7:c3b8140c r6:c39da560 r5:00000001 r4:c3b81000
[] (soc\_pcm\_trigger+0x0/0xb4) from [] (snd\_pcm\_do\_start+0x2c/0x38)
r7:00000000 r6:00000003 r5:c058c7b0 r4:c3b81000
[] (snd\_pcm\_do\_start+0x0/0x38) from [] (snd\_pcm\_action\_single+0x40/0x6c)
[] (snd\_pcm\_action\_single+0x0/0x6c) from [] (snd\_pcm\_action\_lock\_irq+0x7c/0x9c)
r7:00000003 r6:c3b810f0 r5:c3b810f0 r4:c3b81000
[] (snd\_pcm\_action\_lock\_irq+0x0/0x9c) from [] (snd\_pcm\_common\_ioctl1+0x7f8/0xfd0)
r8:c3b7f888 r7:005407b8 r6:c2c991c0 r5:c3b81000 r4:c3b81000 r3:00004142
[] (snd\_pcm\_common\_ioctl1+0x0/0xfd0) from [] (snd\_pcm\_playback\_ioctl1+0x464/0x488)
[] (snd\_pcm\_playback\_ioctl1+0x0/0x488) from [] (snd\_pcm\_playback\_ioctl+0x34/0x40)
r8:c3b7f888 r7:00004142 r6:00000004 r5:c2c991c0 r4:005407b8
[] (snd\_pcm\_playback\_ioctl+0x0/0x40) from [] (vfs\_ioctl+0x30/0x44)
[] (vfs\_ioctl+0x0/0x44) from [] (do\_vfs\_ioctl+0x55c/0x5c0)
[] (do\_vfs\_ioctl+0x0/0x5c0) from [] (SyS\_ioctl+0x40/0x68)
[] (SyS\_ioctl+0x0/0x68) from [] (ret\_fast\_syscall+0x0/0x44)
r8:c0009544 r7:00000036 r6:bedeaa58 r5:00000000 r4:000000c0
Signed-off-by: Michael Grzeschik
Signed-off-by: Vinod Koul
Cc: Jonghwan Choi
Signed-off-by: Greg Kroah-Hartman
commit f9fa9891694cee70b74684e06bf9e9523d02677f
Author: Michael Grzeschik
Date: Tue Sep 17 15:56:08 2013 +0200
dmaengine: imx-dma: fix callback path in tasklet
commit fcaaba6c7136fe47e5a13352f99a64b019b6d2c5 upstream.
We need to free the ld\_active list head before jumping into the callback
routine. Otherwise the callback could run into issue\_pending and change
our ld\_active list head we just going to free. This will run the channel
list into an currupted and undefined state.
Signed-off-by: Michael Grzeschik
Signed-off-by: Vinod Koul
Cc: Jonghwan Choi
Signed-off-by: Greg Kroah-Hartman
commit 0d2849483477202aa9e376460ad370c878d16781
Author: Michael Grzeschik
Date: Tue Sep 17 15:56:07 2013 +0200
dmaengine: imx-dma: fix lockdep issue between irqhandler and tasklet
commit 5a276fa6bdf82fd442046969603968c83626ce0b upstream.
The tasklet and irqhandler are using spin\_lock while other routines are
using spin\_lock\_irqsave/restore. This leads to lockdep issues as
described bellow. This patch is changing the code to use
spinlock\_irq\_save/restore in both code pathes.
As imxdma\_xfer\_desc always gets called with spin\_lock\_irqsave lock held,
this patch also removes the spare call inside the routine to avoid
double locking.
[ 403.358162] =================================
[ 403.362549] [ INFO: inconsistent lock state ]
[ 403.366945] 3.10.0-20130823+ #904 Not tainted
[ 403.371331] ---------------------------------
[ 403.375721] inconsistent {IN-HARDIRQ-W} -> {HARDIRQ-ON-W} usage.
[ 403.381769] swapper/0 [HC0[0]:SC1[1]:HE1:SE0] takes:
[ 403.386762] (&(&imxdma->lock)->rlock){?.-...}, at: [] imxdma\_tasklet+0x20/0x134
[ 403.395201] {IN-HARDIRQ-W} state was registered at:
[ 403.400108] [] mark\_lock+0x2a0/0x6b4
[ 403.404798] [] \_\_lock\_acquire+0x650/0x1a64
[ 403.410004] [] lock\_acquire+0x94/0xa8
[ 403.414773] [] \_raw\_spin\_lock+0x54/0x8c
[ 403.419720] [] dma\_irq\_handler+0x78/0x254
[ 403.424845] [] handle\_irq\_event\_percpu+0x38/0x1b4
[ 403.430670] [] handle\_irq\_event+0x44/0x64
[ 403.435789] [] handle\_level\_irq+0xd8/0xf0
[ 403.440903] [] generic\_handle\_irq+0x28/0x38
[ 403.446194] [] handle\_IRQ+0x68/0x8c
[ 403.450789] [] avic\_handle\_irq+0x3c/0x48
[ 403.455811] [] \_\_irq\_svc+0x44/0x74
[ 403.460314] [] cpu\_startup\_entry+0x88/0xf4
[ 403.465525] [] rest\_init+0xb8/0xe0
[ 403.470045] [] start\_kernel+0x28c/0x2d4
[ 403.474986] [] 0xa0008040
[ 403.478709] irq event stamp: 50854
[ 403.482140] hardirqs last enabled at (50854): [] tasklet\_action+0x38/0xdc
[ 403.489954] hardirqs last disabled at (50853): [] tasklet\_action+0x20/0xdc
[ 403.497761] softirqs last enabled at (50850): [] \_local\_bh\_enable+0x14/0x18
[ 403.505741] softirqs last disabled at (50851): [] irq\_exit+0x88/0xdc
[ 403.513026]
[ 403.513026] other info that might help us debug this:
[ 403.519593] Possible unsafe locking scenario:
[ 403.519593]
[ 403.525548] CPU0
[ 403.528020] ----
[ 403.530491] lock(&(&imxdma->lock)->rlock);
[ 403.534828]
[ 403.537474] lock(&(&imxdma->lock)->rlock);
[ 403.541983]
[ 403.541983] \*\*\* DEADLOCK \*\*\*
[ 403.541983]
[ 403.547951] no locks held by swapper/0.
[ 403.551813]
[ 403.551813] stack backtrace:
[ 403.556222] CPU: 0 PID: 0 Comm: swapper Not tainted 3.10.0-20130823+ #904
[ 403.563039] Backtrace:
[ 403.565581] [] (dump\_backtrace+0x0/0x10c) from [] (show\_stack+0x18/0x1c)
[ 403.574054] r6:00000000 r5:c05c51d8 r4:c040bd58 r3:00200000
[ 403.579872] [] (show\_stack+0x0/0x1c) from [] (dump\_stack+0x20/0x28)
[ 403.587955] [] (dump\_stack+0x0/0x28) from [] (print\_usage\_bug.part.28+0x224/0x28c)
[ 403.597340] [] (print\_usage\_bug.part.28+0x0/0x28c) from [] (mark\_lock+0x440/0x6b4)
[ 403.606682] r8:c004a41c r7:00000000 r6:c040bd58 r5:c040c040 r4:00000002
[ 403.613566] [] (mark\_lock+0x0/0x6b4) from [] (\_\_lock\_acquire+0x6cc/0x1a64)
[ 403.622244] [] (\_\_lock\_acquire+0x0/0x1a64) from [] (lock\_acquire+0x94/0xa8)
[ 403.631010] [] (lock\_acquire+0x0/0xa8) from [] (\_raw\_spin\_lock+0x54/0x8c)
[ 403.639614] [] (\_raw\_spin\_lock+0x0/0x8c) from [] (imxdma\_tasklet+0x20/0x134)
[ 403.648434] r6:c3847010 r5:c040e890 r4:c38470d4
[ 403.653194] [] (imxdma\_tasklet+0x0/0x134) from [] (tasklet\_action+0x8c/0xdc)
[ 403.662013] r8:c0599160 r7:00000000 r6:00000000 r5:c040e890 r4:c3847114 r3:c019d75c
[ 403.670042] [] (tasklet\_action+0x0/0xdc) from [] (\_\_do\_softirq+0xe4/0x1f0)
[ 403.678687] r7:00000101 r6:c0402000 r5:c059919c r4:00000001
[ 403.684498] [] (\_\_do\_softirq+0x0/0x1f0) from [] (irq\_exit+0x88/0xdc)
[ 403.692652] [] (irq\_exit+0x0/0xdc) from [] (handle\_IRQ+0x6c/0x8c)
[ 403.700514] r4:00000030 r3:00000110
[ 403.704192] [] (handle\_IRQ+0x0/0x8c) from [] (avic\_handle\_irq+0x3c/0x48)
[ 403.712664] r5:c0403f28 r4:c0593ebc
[ 403.716343] [] (avic\_handle\_irq+0x0/0x48) from [] (\_\_irq\_svc+0x44/0x74)
[ 403.724733] Exception stack(0xc0403f28 to 0xc0403f70)
[ 403.729841] 3f20: 00000001 00000004 00000000 20000013 c0402000 c04104a8
[ 403.738078] 3f40: 00000002 c0b69620 a0004000 41069264 a03fb5f4 c0403f7c c0403f40 c0403f70
[ 403.746301] 3f60: c004b92c c0009e74 20000013 ffffffff
[ 403.751383] r6:ffffffff r5:20000013 r4:c0009e74 r3:c004b92c
[ 403.757210] [] (arch\_cpu\_idle+0x0/0x4c) from [] (cpu\_startup\_entry+0x88/0xf4)
[ 403.766161] [] (cpu\_startup\_entry+0x0/0xf4) from [] (rest\_init+0xb8/0xe0)
[ 403.774753] [] (rest\_init+0x0/0xe0) from [] (start\_kernel+0x28c/0x2d4)
[ 403.783051] r6:c03fc484 r5:ffffffff r4:c040a0e0
[ 403.787797] [] (start\_kernel+0x0/0x2d4) from [] (0xa0008040)
Signed-off-by: Michael Grzeschik
Signed-off-by: Vinod Koul
Cc: Jonghwan Choi
Signed-off-by: Greg Kroah-Hartman
commit 681231c66e1953a91addca97eb83d5565d3bffaa
Author: Rafał Miłecki
Date: Tue Oct 8 11:36:58 2013 +0200
drm/radeon: fix hdmi callbacks for rv6xx (incorrectly added to r520)
Commit 99d79aa2f3b7729e7290e8bda5d0dd8b0240ec62 was backported slightly
wrong adding callbacks in the wrong struct. This moves callbacks to the
correct place (matching mainline patch/code).
Signed-off-by: Rafał Miłecki
Reviewed-by: Alex Deucher
Signed-off-by: Greg Kroah-Hartman
commit 3e1fee600177eed70abbd7e7703a40b5edb6cb8f
Author: Frederic Weisbecker
Date: Tue Sep 24 00:50:25 2013 +0200
irq: Force hardirq exit's softirq processing on its own stack
commit ded797547548a5b8e7b92383a41e4c0e6b0ecb7f upstream.
The commit facd8b80c67a3cf64a467c4a2ac5fb31f2e6745b
("irq: Sanitize invoke\_softirq") converted irq exit
calls of do\_softirq() to \_\_do\_softirq() on all architectures,
assuming it was only used there for its irq disablement
properties.
But as a side effect, the softirqs processed in the end
of the hardirq are always called on the inline current
stack that is used by irq\_exit() instead of the softirq
stack provided by the archs that override do\_softirq().
The result is mostly safe if the architecture runs irq\_exit()
on a separate irq stack because then softirqs are processed
on that same stack that is near empty at this stage (assuming
hardirq aren't nesting).
Otherwise irq\_exit() runs in the task stack and so does the softirq
too. The interrupted call stack can be randomly deep already and
the softirq can dig through it even further. To add insult to the
injury, this softirq can be interrupted by a new hardirq, maximizing
the chances for a stack overrun as reported in powerpc for example:
do\_IRQ: stack overflow: 1920
CPU: 0 PID: 1602 Comm: qemu-system-ppc Not tainted 3.10.4-300.1.fc19.ppc64p7 #1
Call Trace:
[c0000000050a8740] .show\_stack+0x130/0x200 (unreliable)
[c0000000050a8810] .dump\_stack+0x28/0x3c
[c0000000050a8880] .do\_IRQ+0x2b8/0x2c0
[c0000000050a8930] hardware\_interrupt\_common+0x154/0x180
--- Exception: 501 at .cp\_start\_xmit+0x3a4/0x820 [8139cp]
LR = .cp\_start\_xmit+0x390/0x820 [8139cp]
[c0000000050a8d40] .dev\_hard\_start\_xmit+0x394/0x640
[c0000000050a8e00] .sch\_direct\_xmit+0x110/0x260
[c0000000050a8ea0] .dev\_queue\_xmit+0x260/0x630
[c0000000050a8f40] .br\_dev\_queue\_push\_xmit+0xc4/0x130 [bridge]
[c0000000050a8fc0] .br\_dev\_xmit+0x198/0x270 [bridge]
[c0000000050a9070] .dev\_hard\_start\_xmit+0x394/0x640
[c0000000050a9130] .dev\_queue\_xmit+0x428/0x630
[c0000000050a91d0] .ip\_finish\_output+0x2a4/0x550
[c0000000050a9290] .ip\_local\_out+0x50/0x70
[c0000000050a9310] .ip\_queue\_xmit+0x148/0x420
[c0000000050a93b0] .tcp\_transmit\_skb+0x4e4/0xaf0
[c0000000050a94a0] .\_\_tcp\_ack\_snd\_check+0x7c/0xf0
[c0000000050a9520] .tcp\_rcv\_established+0x1e8/0x930
[c0000000050a95f0] .tcp\_v4\_do\_rcv+0x21c/0x570
[c0000000050a96c0] .tcp\_v4\_rcv+0x734/0x930
[c0000000050a97a0] .ip\_local\_deliver\_finish+0x184/0x360
[c0000000050a9840] .ip\_rcv\_finish+0x148/0x400
[c0000000050a98d0] .\_\_netif\_receive\_skb\_core+0x4f8/0xb00
[c0000000050a99d0] .netif\_receive\_skb+0x44/0x110
[c0000000050a9a70] .br\_handle\_frame\_finish+0x2bc/0x3f0 [bridge]
[c0000000050a9b20] .br\_nf\_pre\_routing\_finish+0x2ac/0x420 [bridge]
[c0000000050a9bd0] .br\_nf\_pre\_routing+0x4dc/0x7d0 [bridge]
[c0000000050a9c70] .nf\_iterate+0x114/0x130
[c0000000050a9d30] .nf\_hook\_slow+0xb4/0x1e0
[c0000000050a9e00] .br\_handle\_frame+0x290/0x330 [bridge]
[c0000000050a9ea0] .\_\_netif\_receive\_skb\_core+0x34c/0xb00
[c0000000050a9fa0] .netif\_receive\_skb+0x44/0x110
[c0000000050aa040] .napi\_gro\_receive+0xe8/0x120
[c0000000050aa0c0] .cp\_rx\_poll+0x31c/0x590 [8139cp]
[c0000000050aa1d0] .net\_rx\_action+0x1dc/0x310
[c0000000050aa2b0] .\_\_do\_softirq+0x158/0x330
[c0000000050aa3b0] .irq\_exit+0xc8/0x110
[c0000000050aa430] .do\_IRQ+0xdc/0x2c0
[c0000000050aa4e0] hardware\_interrupt\_common+0x154/0x180
--- Exception: 501 at .bad\_range+0x1c/0x110
LR = .get\_page\_from\_freelist+0x908/0xbb0
[c0000000050aa7d0] .list\_del+0x18/0x50 (unreliable)
[c0000000050aa850] .get\_page\_from\_freelist+0x908/0xbb0
[c0000000050aa9e0] .\_\_alloc\_pages\_nodemask+0x21c/0xae0
[c0000000050aaba0] .alloc\_pages\_vma+0xd0/0x210
[c0000000050aac60] .handle\_pte\_fault+0x814/0xb70
[c0000000050aad50] .\_\_get\_user\_pages+0x1a4/0x640
[c0000000050aae60] .get\_user\_pages\_fast+0xec/0x160
[c0000000050aaf10] .\_\_gfn\_to\_pfn\_memslot+0x3b0/0x430 [kvm]
[c0000000050aafd0] .kvmppc\_gfn\_to\_pfn+0x64/0x130 [kvm]
[c0000000050ab070] .kvmppc\_mmu\_map\_page+0x94/0x530 [kvm]
[c0000000050ab190] .kvmppc\_handle\_pagefault+0x174/0x610 [kvm]
[c0000000050ab270] .kvmppc\_handle\_exit\_pr+0x464/0x9b0 [kvm]
[c0000000050ab320] kvm\_start\_lightweight+0x1ec/0x1fc [kvm]
[c0000000050ab4f0] .kvmppc\_vcpu\_run\_pr+0x168/0x3b0 [kvm]
[c0000000050ab9c0] .kvmppc\_vcpu\_run+0xc8/0xf0 [kvm]
[c0000000050aba50] .kvm\_arch\_vcpu\_ioctl\_run+0x5c/0x1a0 [kvm]
[c0000000050abae0] .kvm\_vcpu\_ioctl+0x478/0x730 [kvm]
[c0000000050abc90] .do\_vfs\_ioctl+0x4ec/0x7c0
[c0000000050abd80] .SyS\_ioctl+0xd4/0xf0
[c0000000050abe30] syscall\_exit+0x0/0x98
Since this is a regression, this patch proposes a minimalistic
and low-risk solution by blindly forcing the hardirq exit processing of
softirqs on the softirq stack. This way we should reduce significantly
the opportunities for task stack overflow dug by softirqs.
Longer term solutions may involve extending the hardirq stack coverage to
irq\_exit(), etc...
Reported-by: Benjamin Herrenschmidt
Acked-by: Linus Torvalds
Signed-off-by: Frederic Weisbecker
Cc: Benjamin Herrenschmidt
Cc: Paul Mackerras
Cc: Ingo Molnar
Cc: Thomas Gleixner
Cc: Peter Zijlstra
Cc: H. Peter Anvin
Cc: Linus Torvalds
Cc: Paul Mackerras
Cc: James Hogan
Cc: James E.J. Bottomley
Cc: Helge Deller
Cc: Martin Schwidefsky
Cc: Heiko Carstens
Cc: David S. Miller
Cc: Andrew Morton
Signed-off-by: Greg Kroah-Hartman
commit 3eb17daca655363dfd12241f50837b8593cd5ec7
Author: Eric W. Biederman
Date: Sat Oct 5 13:15:30 2013 -0700
net: Update the sysctl permissions handler to test effective uid/gid
commit 2433c8f094a008895e66f25bd1773cdb01c91d01 upstream.
Modify the code to use current\_euid(), and in\_egroup\_p, as in done
in fs/proc/proc\_sysctl.c:test\_perm()
Reviewed-by: Eric Sandeen
Reported-by: Eric Sandeen
Signed-off-by: "Eric W. Biederman"
Signed-off-by: Linus Torvalds
Signed-off-by: Greg Kroah-Hartman
commit 67c90f9d826e5cee09d3dcb4554462f0ba6df38e
Author: Nicholas Bellinger
Date: Thu Oct 3 13:37:21 2013 -0700
iscsi-target: Only perform wait\_for\_tasks when performing shutdown
commit e255a28598e8e63070322fc89bd34189dd660a89 upstream.
This patch changes transport\_generic\_free\_cmd() to only wait\_for\_tasks
when shutdown=true is passed to iscsit\_free\_cmd().
With the advent of >= v3.10 iscsi-target code using se\_cmd->cmd\_kref,
the extra wait\_for\_tasks with shutdown=false is unnecessary, and may
end up causing an extra context switch when releasing WRITEs.
Signed-off-by: Nicholas Bellinger
Signed-off-by: Greg Kroah-Hartman
commit 126f292a117cf69989c0d17169abfdd715619c7b
Author: Rafael Aquini
Date: Mon Sep 30 13:45:16 2013 -0700
mm: avoid reinserting isolated balloon pages into LRU lists
commit 117aad1e9e4d97448d1df3f84b08bd65811e6d6a upstream.
Isolated balloon pages can wrongly end up in LRU lists when
migrate\_pages() finishes its round without draining all the isolated
page list.
The same issue can happen when reclaim\_clean\_pages\_from\_list() tries to
reclaim pages from an isolated page list, before migration, in the CMA
path. Such balloon page leak opens a race window against LRU lists
shrinkers that leads us to the following kernel panic:
BUG: unable to handle kernel NULL pointer dereference at 0000000000000028
IP: [] shrink\_page\_list+0x24e/0x897
PGD 3cda2067 PUD 3d713067 PMD 0
Oops: 0000 [#1] SMP
CPU: 0 PID: 340 Comm: kswapd0 Not tainted 3.12.0-rc1-22626-g4367597 #87
Hardware name: Bochs Bochs, BIOS Bochs 01/01/2011
RIP: shrink\_page\_list+0x24e/0x897
RSP: 0000:ffff88003da499b8 EFLAGS: 00010286
RAX: 0000000000000000 RBX: ffff88003e82bd60 RCX: 00000000000657d5
RDX: 0000000000000000 RSI: 000000000000031f RDI: ffff88003e82bd40
RBP: ffff88003da49ab0 R08: 0000000000000001 R09: 0000000081121a45
R10: ffffffff81121a45 R11: ffff88003c4a9a28 R12: ffff88003e82bd40
R13: ffff88003da0e800 R14: 0000000000000001 R15: ffff88003da49d58
FS: 0000000000000000(0000) GS:ffff88003fc00000(0000) knlGS:0000000000000000
CS: 0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000067d9000 CR3: 000000003ace5000 CR4: 00000000000407b0
Call Trace:
shrink\_inactive\_list+0x240/0x3de
shrink\_lruvec+0x3e0/0x566
\_\_shrink\_zone+0x94/0x178
shrink\_zone+0x3a/0x82
balance\_pgdat+0x32a/0x4c2
kswapd+0x2f0/0x372
kthread+0xa2/0xaa
ret\_from\_fork+0x7c/0xb0
Code: 80 7d 8f 01 48 83 95 68 ff ff ff 00 4c 89 e7 e8 5a 7b 00 00 48 85 c0 49 89 c5 75 08 80 7d 8f 00 74 3e eb 31 48 8b 80 18 01 00 00 <48> 8b 74 0d 48 8b 78 30 be 02 00 00 00 ff d2 eb
RIP [] shrink\_page\_list+0x24e/0x897
RSP
CR2: 0000000000000028
---[ end trace 703d2451af6ffbfd ]---
Kernel panic - not syncing: Fatal exception
This patch fixes the issue, by assuring the proper tests are made at
putback\_movable\_pages() & reclaim\_clean\_pages\_from\_list() to avoid
isolated balloon pages being wrongly reinserted in LRU lists.
[akpm@linux-foundation.org: clarify awkward comment text]
Signed-off-by: Rafael Aquini
Reported-by: Luiz Capitulino
Tested-by: Luiz Capitulino
Cc: Mel Gorman
Cc: Rik van Riel
Cc: Hugh Dickins
Cc: Johannes Weiner
Signed-off-by: Andrew Morton
Signed-off-by: Linus Torvalds
Signed-off-by: Greg Kroah-Hartman
commit 95f985cc6a26d421ddd6617822235dd4597c13ea
Author: Christian Lamparter
Date: Tue Sep 24 21:56:46 2013 +0200
p54usb: add USB ID for Corega WLUSB2GTST USB adapter
commit 1e43692cdb7cc445d6347d8a5207d9cef0c71434 upstream.
Added USB ID for Corega WLUSB2GTST USB adapter.
Reported-by: Joerg Kalisch
Signed-off-by: Christian Lamparter
Signed-off-by: John W. Linville
Signed-off-by: Greg Kroah-Hartman
commit a349c365d5db2b96780078249c73285ac2941920
Author: Larry Finger
Date: Wed Sep 18 21:21:35 2013 -0500
rtlwifi: Align private space in rtl\_priv struct
commit 60ce314d1750fef843e9db70050e09e49f838b69 upstream.
The private array at the end of the rtl\_priv struct is not aligned.
On ARM architecture, this causes an alignment trap and is fixed by aligning
that array with \_\_align(sizeof(void \*)). That should properly align that
space according to the requirements of all architectures.
Reported-by: Jason Andrews
Tested-by: Jason Andrews
Signed-off-by: Larry Finger
Signed-off-by: John W. Linville
Signed-off-by: Greg Kroah-Hartman
commit 5cd8446d12b70185dc2a89993e5b58d5623d9432
Author: Jack Wang
Date: Mon Sep 30 10:09:05 2013 +0200
ib\_srpt: always set response for task management
commit c807f64340932e19f0d2ac9b30c8381e1f60663a upstream.
The SRP specification requires:
"Response data shall be provided in any SRP\_RSP response that is sent in
response to an SRP\_TSK\_MGMT request (see 6.7). The information in the
RSP\_CODE field (see table 24) shall indicate the completion status of
the task management function."
So fix this to avoid the SRP initiator interprets task management functions
that succeeded as failed.
Signed-off-by: Jack Wang
Signed-off-by: Nicholas Bellinger
Signed-off-by: Greg Kroah-Hartman
commit 08c8454beba7398842b7d5310d69f9e6ce3b8f47
Author: Nicholas Bellinger
Date: Wed Sep 18 12:48:27 2013 -0700
ib\_srpt: Destroy cm\_id before destroying QP.
commit 0b41d6ca616ddeb3b6c0a80e8770b6f53cd42806 upstream.
This patch fixes a bug where ib\_destroy\_cm\_id() was incorrectly being called
after srpt\_destroy\_ch\_ib() had destroyed the active QP.
This would result in the following failed SRP\_LOGIN\_REQ messages:
Received SRP\_LOGIN\_REQ with i\_port\_id 0x0:0x2590ffff1762bd, t\_port\_id 0x2c903009f8f40:0x2c903009f8f40 and it\_iu\_len 260 on port 1 (guid=0xfe80000000000000:0x2c903009f8f41)
Received SRP\_LOGIN\_REQ with i\_port\_id 0x0:0x2590ffff1758f9, t\_port\_id 0x2c903009f8f40:0x2c903009f8f40 and it\_iu\_len 260 on port 2 (guid=0xfe80000000000000:0x2c903009f8f42)
Received SRP\_LOGIN\_REQ with i\_port\_id 0x0:0x2590ffff175941, t\_port\_id 0x2c903009f8f40:0x2c903009f8f40 and it\_iu\_len 260 on port 2 (guid=0xfe80000000000000:0x2c90300a3cfb2)
Received SRP\_LOGIN\_REQ with i\_port\_id 0x0:0x2590ffff176299, t\_port\_id 0x2c903009f8f40:0x2c903009f8f40 and it\_iu\_len 260 on port 1 (guid=0xfe80000000000000:0x2c90300a3cfb1)
mlx4\_core 0000:84:00.0: command 0x19 failed: fw status = 0x9
rejected SRP\_LOGIN\_REQ because creating a new RDMA channel failed.
Received SRP\_LOGIN\_REQ with i\_port\_id 0x0:0x2590ffff176299, t\_port\_id 0x2c903009f8f40:0x2c903009f8f40 and it\_iu\_len 260 on port 1 (guid=0xfe80000000000000:0x2c90300a3cfb1)
mlx4\_core 0000:84:00.0: command 0x19 failed: fw status = 0x9
rejected SRP\_LOGIN\_REQ because creating a new RDMA channel failed.
Received SRP\_LOGIN\_REQ with i\_port\_id 0x0:0x2590ffff176299, t\_port\_id 0x2c903009f8f40:0x2c903009f8f40 and it\_iu\_len 260 on port 1 (guid=0xfe80000000000000:0x2c90300a3cfb1)
Reported-by: Navin Ahuja
Signed-off-by: Nicholas Bellinger
Signed-off-by: Greg Kroah-Hartman
commit 38038ddd5b625af75f038501ae5e0f07ed892f95
Author: David Vrabel
Date: Tue Oct 1 19:00:49 2013 +0100
xen/hvc: allow xenboot console to be used again
commit a9fbf4d591da6cd1d3eaab826c7c15f77fc8f6a3 upstream.
Commit d0380e6c3c0f6edb986d8798a23acfaf33d5df23 (early\_printk:
consolidate random copies of identical code) added in 3.10 introduced
a check for con->index == -1 in early\_console\_register().
Initialize index to -1 for the xenboot console so earlyprintk=xen
works again.
Signed-off-by: David Vrabel
Cc: Jiri Slaby
Signed-off-by: Greg Kroah-Hartman
commit daf2f72265f68c1c1100d1bc6a4c4faed0344be2
Author: Michal Malý
Date: Sat Sep 28 19:50:27 2013 +0200
USB: serial: option: Ignore card reader interface on Huawei E1750
commit eb2addd4044b4b2ce77693bde5bc810536dd96ee upstream.
Hi,
my Huawei 3G modem has an embedded Smart Card reader which causes
trouble when the modem is being detected (a bunch of " (ttyUSBx):
open blocked by driver for more than 7 seconds!" in messages.log). This
trivial patch corrects the problem for me. The modem identifies itself
as "12d1:1406 Huawei Technologies Co., Ltd. E1750" in lsusb although the
description on the body says "Model E173u-1"
Signed-off-by: Michal Malý
Cc: Bjørn Mork
Signed-off-by: Greg Kroah-Hartman
commit de1ea2e145864889db295e1723386fa986aa1fd6
Author: David Cohen
Date: Tue Oct 1 14:32:58 2013 -0700
usb: chipidea: add Intel Clovertrail pci id
commit a214339d764a07b99dc0418685d6cc8a0a1970d5 upstream.
Also clean up the last item of the pci id list to be "cleaner".
Signed-off-by: David Cohen
Signed-off-by: Greg Kroah-Hartman
commit 3ebf6d7dae94cd4a92cf23d428bc9f196835e6f2
Author: Bing Zhao
Date: Fri Sep 20 19:56:45 2013 -0700
mwifiex: fix PCIe hs\_cfg cancel cmd timeout
commit b7be1522def9a9988b67afd0be999c50a96394b5 upstream.
For pcie8897, the hs\_cfg cancel command (0xe5) times out when host
comes out of suspend. This is caused by an incompleted host sleep
handshake between driver and firmware.
Like SDIO interface, PCIe also needs to go through firmware power
save events to complete the handshake for host sleep configuration.
Only USB interface doesn't require power save events for hs\_cfg.
Signed-off-by: Bing Zhao
Signed-off-by: Amitkumar Karwar
Signed-off-by: John W. Linville
Signed-off-by: Greg Kroah-Hartman
commit eaac40050d90a35e97cf965529de4c5ef127d0d4
Author: Amitkumar Karwar
Date: Tue Sep 24 19:31:24 2013 -0700
mwifiex: fix hang issue for USB chipsets
commit bd1c6142edce787b8ac1be15635f845aa9905333 upstream.
Bug 60815 - Interface hangs in mwifiex\_usb
https://bugzilla.kernel.org/show\_bug.cgi?id=60815
We have 4 bytes of interface header for packets delivered to SDIO
and PCIe, but not for USB interface.
In Tx AMSDU case, currently 4 bytes of garbage data is unnecessarily
appended for USB packets. This sometimes leads to a firmware hang,
because it may not interpret the data packet correctly.
Problem is fixed by removing this redundant headroom for USB.
Tested-by: Dmitry Khromov
Signed-off-by: Amitkumar Karwar
Signed-off-by: Bing Zhao
Signed-off-by: John W. Linville
Signed-off-by: Greg Kroah-Hartman
commit 1d1f004891d5aa00ee75974e4864e8d5b321e491
Author: Bing Zhao
Date: Tue Sep 24 19:31:25 2013 -0700
mwifiex: fix NULL pointer dereference in usb suspend handler
commit 346ece0b7ba2730b4d633b9e371fe55488803102 upstream.
Bug 60815 - Interface hangs in mwifiex\_usb
https://bugzilla.kernel.org/show\_bug.cgi?id=60815
[ 2.883807] BUG: unable to handle kernel NULL pointer dereference
at 0000000000000048
[ 2.883813] IP: [] pfifo\_fast\_enqueue+0x90/0x90
[ 2.883834] CPU: 1 PID: 3220 Comm: kworker/u8:90 Not tainted
3.11.1-monotone-l0 #6
[ 2.883834] Hardware name: Microsoft Corporation Surface with
Windows 8 Pro/Surface with Windows 8 Pro,
BIOS 1.03.0450 03/29/2013
On Surface Pro, suspend to ram gives a NULL pointer dereference in
pfifo\_fast\_enqueue(). The stack trace reveals that the offending
call is clearing carrier in mwifiex\_usb suspend handler.
Since commit 1499d9f "mwifiex: don't drop carrier flag over suspend"
has removed the carrier flag handling over suspend/resume in SDIO
and PCIe drivers, I'm removing it in USB driver too. This also fixes
the bug for Surface Pro.
Tested-by: Dmitry Khromov
Signed-off-by: Bing Zhao
Signed-off-by: John W. Linville
Signed-off-by: Greg Kroah-Hartman
commit 3b12032f89e27f139828bad8120149b1584bc898
Author: Trond Myklebust
Date: Thu Sep 26 14:08:36 2013 -0400
NFSv4.1: nfs4\_fl\_prepare\_ds - fix bugs when the connect attempt fails
commit 52b26a3e1bb3e065c32b3febdac1e1f117d88e15 upstream.
- Fix an Oops when nfs4\_ds\_connect() returns an error.
- Always check the device status after waiting for a connect to complete.
Reported-by: Andy Adamson
Reported-by: Jeff Layton
Signed-off-by: Trond Myklebust
Signed-off-by: Greg Kroah-Hartman
commit d6170004af8bed70922ef94fa404ccb617d000e5
Author: Ian Abbott
Date: Wed Oct 2 14:57:51 2013 +0100
staging: comedi: ni\_65xx: (bug fix) confine insn\_bits to one subdevice
commit 677a31565692d596ef42ea589b53ba289abf4713 upstream.
The `insn\_bits` handler `ni\_65xx\_dio\_insn\_bits()` has a `for` loop that
currently writes (optionally) and reads back up to 5 "ports" consisting
of 8 channels each. It reads up to 32 1-bit channels but can only read
and write a whole port at once - it needs to handle up to 5 ports as the
first channel it reads might not be aligned on a port boundary. It
breaks out of the loop early if the next port it handles is beyond the
final port on the card. It also breaks out early on the 5th port in the
loop if the first channel was aligned. Unfortunately, it doesn't check
that the current port it is dealing with belongs to the comedi subdevice
the `insn\_bits` handler is acting on. That's a bug.
Redo the `for` loop to terminate after the final port belonging to the
subdevice, changing the loop variable in the process to simplify things
a bit. The `for` loop could now try and handle more than 5 ports if the
subdevice has more than 40 channels, but the test `if (bitshift >= 32)`
ensures it will break out early after 4 or 5 ports (depending on whether
the first channel is aligned on a port boundary). (`bitshift` will be
between -7 and 7 inclusive on the first iteration, increasing by 8 for
each subsequent operation.)
Signed-off-by: Ian Abbott
Signed-off-by: Greg Kroah-Hartman
commit 29416e26236a2e6b9cfe67260835300dc07b2d26
Author: Tetsuo Handa
Date: Mon Sep 30 13:45:08 2013 -0700
kernel/kmod.c: check for NULL in call\_usermodehelper\_exec()
commit 4c1c7be95c345cf2ad537a0c48e9aeadc7304527 upstream.
If /proc/sys/kernel/core\_pattern contains only "|", a NULL pointer
dereference happens upon core dump because argv\_split("") returns
argv[0] == NULL.
This bug was once fixed by commit 264b83c07a84 ("usermodehelper: check
subprocess\_info->path != NULL") but was by error reintroduced by commit
7f57cfa4e2aa ("usermodehelper: kill the sub\_info->path[0] check").
This bug seems to exist since 2.6.19 (the version which core dump to
pipe was added). Depending on kernel version and config, some side
effect might happen immediately after this oops (e.g. kernel panic with
2.6.32-358.18.1.el6).
Signed-off-by: Tetsuo Handa
Acked-by: Oleg Nesterov
Signed-off-by: Andrew Morton
Signed-off-by: Linus Torvalds
Signed-off-by: Greg Kroah-Hartman
commit 3e446da23ffc230fbd3d9cf52f2a2d94ba8e941c
Author: Darrick J. Wong
Date: Mon Sep 30 13:45:09 2013 -0700
mm/bounce.c: fix a regression where MS\_SNAP\_STABLE (stable pages snapshotting) was ignored
commit 83b2944fd2532b92db099cb3ada12df32a05b368 upstream.
The "force" parameter in \_\_blk\_queue\_bounce was being ignored, which
means that stable page snapshots are not always happening (on ext3).
This of course leads to DIF disks reporting checksum errors, so fix this
regression.
The regression was introduced in commit 6bc454d15004 ("bounce: Refactor
\_\_blk\_queue\_bounce to not use bi\_io\_vec")
Reported-by: Mel Gorman
Signed-off-by: Darrick J. Wong
Cc: Kent Overstreet
Signed-off-by: Andrew Morton
Signed-off-by: Linus Torvalds
Signed-off-by: Greg Kroah-Hartman
commit b8a118efef12f11e6f726d46b9d918200d59e479
Author: David Miller
Date: Wed Oct 2 14:25:09 2013 -0400
mm: Fix generic hugetlb pte check return type.
[ Upstream commit 26794942461f438a6bc725ec7294b08a6bd782c4 ]
The include/asm-generic/hugetlb.h stubs that just vector huge\_pte\_\*()
calls to the pte\_\*() implementations won't work in certain situations.
x86 and sparc, for example, return "unsigned long" from the bit
checks, and just go "return pte\_val(pte) & PTE\_BIT\_FOO;"
But since huge\_pte\_\*() returns 'int', if any high bits on 64-bit are
relevant, they get chopped off.
The net effect is that we can loop forever trying to COW a huge page,
because the huge\_pte\_write() check signals false all the time.
Reported-by: Gurudas Pai
Tested-by: Gurudas Pai
Signed-off-by: David S. Miller
Acked-by: David Rientjes
Signed-off-by: Greg Kroah-Hartman
commit 8e810c7aabe8a9c7451a7ef2fd2fe09ad6fafae5
Author: Kirill Tkhai
Date: Fri Jul 26 01:17:15 2013 +0400
sparc32: Fix exit flag passed from traced sys\_sigreturn
[ Upstream commit 7a3b0f89e3fea680f93932691ca41a68eee7ab5e ]
Pass 1 in %o1 to indicate that syscall\_trace accounts exit.
Signed-off-by: Kirill Tkhai
CC: David Miller
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit a2a4623f0cdb10525a69f52bfe4ff8e51f889dc2
Author: Kirill Tkhai
Date: Fri Jul 26 17:21:12 2013 +0400
sparc64: Fix not SRA'ed %o5 in 32-bit traced syscall
[ Upstream commit ab2abda6377723e0d5fbbfe5f5aa16a5523344d1 ]
(From v1 to v2: changed comment)
On the way linux\_sparc\_syscall32->linux\_syscall\_trace32->goto 2f,
register %o5 doesn't clear its second 32-bit.
Fix that.
Signed-off-by: Kirill Tkhai
CC: David Miller
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 3a55b1aeb552077db8b6700e9a93a16ca1a8d94b
Author: David S. Miller
Date: Thu Aug 22 16:38:46 2013 -0700
sparc64: Fix off by one in trampoline TLB mapping installation loop.
[ Upstream commit 63d499662aeec1864ec36d042aca8184ea6a938e ]
Reported-by: Kirill Tkhai
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 7de5c6bba258f2d3390ed73c938a98f15440213b
Author: David S. Miller
Date: Thu Aug 1 18:08:34 2013 -0700
esp\_scsi: Fix tag state corruption when autosensing.
[ Upstream commit 21af8107f27878813d0364733c0b08813c2c192a ]
Meelis Roos reports a crash in esp\_free\_lun\_tag() in the presense
of a disk which has died.
The issue is that when we issue an autosense command, we do so by
hijacking the original command that caused the check-condition.
When we do so we clear out the ent->tag[] array when we issue it via
find\_and\_prep\_issuable\_command(). This is so that the autosense
command is forced to be issued non-tagged.
That is problematic, because it is the value of ent->tag[] which
determines whether we issued the original scsi command as tagged
vs. non-tagged (see esp\_alloc\_lun\_tag()).
And that, in turn, is what trips up the sanity checks in
esp\_free\_lun\_tag(). That function needs the original ->tag[] values
in order to free up the tag slot properly.
Fix this by remembering the original command's tag values, and
having esp\_alloc\_lun\_tag() and esp\_free\_lun\_tag() use them.
Reported-by: Meelis Roos
Tested-by: Meelis Roos
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 1e0a3f6f4660aca6578d768038972cd12727f64d
Author: Kirill Tkhai
Date: Fri Aug 2 19:23:18 2013 +0400
sparc64: Fix ITLB handler of null page
[ Upstream commit 1c2696cdaad84580545a2e9c0879ff597880b1a9 ]
1)Use kvmap\_itlb\_longpath instead of kvmap\_dtlb\_longpath.
2)Handle page #0 only, don't handle page #1: bleu -> blu
(KERNBASE is 0x400000, so #1 does not exist too. But everything
is possible in the future. Fix to not to have problems later.)
3)Remove unused kvmap\_itlb\_nonlinear.
Signed-off-by: Kirill Tkhai
CC: David Miller
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 47da75cd1eccef5e203c326bcf74a70701d4f158
Author: Kirill Tkhai
Date: Mon Aug 12 16:02:24 2013 +0400
sparc64: Remove RWSEM export leftovers
[ Upstream commit 61d9b9355b0d427bd1e732bd54628ff9103e496f ]
The functions
\_\_down\_read
\_\_down\_read\_trylock
\_\_down\_write
\_\_down\_write\_trylock
\_\_up\_read
\_\_up\_write
\_\_downgrade\_write
are implemented inline, so remove corresponding EXPORT\_SYMBOLs
(They lead to compile errors on RT kernel).
Signed-off-by: Kirill Tkhai
CC: David Miller
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit e07bd058eae5c8c210e9238ef1895b80d628952d
Author: Kees Cook
Date: Tue Oct 1 22:13:34 2013 -0700
sparc: fix ldom\_reboot buffer overflow harder
[ Upstream commit 20928bd3f08afb036c096d9559d581926b895918 ]
The length argument to strlcpy was still wrong. It could overflow the end of
full\_boot\_str by 5 bytes. Instead of strcat and strlcpy, just use snprint.
Reported-by: Brad Spengler
Signed-off-by: Kees Cook
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit bbe57190784d7a3bc024853da48e0eef5b5c4b2e
Author: David S. Miller
Date: Fri Sep 27 13:46:04 2013 -0700
sparc64: Fix buggy strlcpy() conversion in ldom\_reboot().
[ Upstream commit 2bd161a605f1f84a5fc8a4fe8410113a94f79355 ]
Commit 117a0c5fc9c2d06045bd217385b2b39ea426b5a6 ("sparc: kernel: using
strlcpy() instead of strcpy()") added a bug to ldom\_reboot in
arch/sparc/kernel/ds.c
- strcpy(full\_boot\_str + strlen("boot "), boot\_command);
+ strlcpy(full\_boot\_str + strlen("boot "), boot\_command,
+ sizeof(full\_boot\_str + strlen("boot ")));
That last sizeof() expression evaluates to sizeof(size\_t) which is
not what was intended.
Also even the corrected:
sizeof(full\_boot\_str) + strlen("boot ")
is not right as the destination buffer length is just plain
"sizeof(full\_boot\_str)" and that's what the final argument
should be.
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 38d7d8fe82963c73447177676d32494140652690
Author: Davidlohr Bueso
Date: Mon Sep 23 17:04:45 2013 -0700
ipc: fix race with LSMs
commit 53dad6d3a8e5ac1af8bacc6ac2134ae1a8b085f1 upstream.
Currently, IPC mechanisms do security and auditing related checks under
RCU. However, since security modules can free the security structure,
for example, through selinux\_[sem,msg\_queue,shm]\_free\_security(), we can
race if the structure is freed before other tasks are done with it,
creating a use-after-free condition. Manfred illustrates this nicely,
for instance with shared mem and selinux:
-> do\_shmat calls rcu\_read\_lock()
-> do\_shmat calls shm\_object\_check().
Checks that the object is still valid - but doesn't acquire any locks.
Then it returns.
-> do\_shmat calls security\_shm\_shmat (e.g. selinux\_shm\_shmat)
-> selinux\_shm\_shmat calls ipc\_has\_perm()
-> ipc\_has\_perm accesses ipc\_perms->security
shm\_close()
-> shm\_close acquires rw\_mutex & shm\_lock
-> shm\_close calls shm\_destroy
-> shm\_destroy calls security\_shm\_free (e.g. selinux\_shm\_free\_security)
-> selinux\_shm\_free\_security calls ipc\_free\_security(&shp->shm\_perm)
-> ipc\_free\_security calls kfree(ipc\_perms->security)
This patch delays the freeing of the security structures after all RCU
readers are done. Furthermore it aligns the security life cycle with
that of the rest of IPC - freeing them based on the reference counter.
For situations where we need not free security, the current behavior is
kept. Linus states:
"... the old behavior was suspect for another reason too: having the
security blob go away from under a user sounds like it could cause
various other problems anyway, so I think the old code was at least
\_prone\_ to bugs even if it didn't have catastrophic behavior."
I have tested this patch with IPC testcases from LTP on both my
quad-core laptop and on a 64 core NUMA server. In both cases selinux is
enabled, and tests pass for both voluntary and forced preemption models.
While the mentioned races are theoretical (at least no one as reported
them), I wanted to make sure that this new logic doesn't break anything
we weren't aware of.
Suggested-by: Linus Torvalds
Signed-off-by: Davidlohr Bueso
Acked-by: Manfred Spraul
Signed-off-by: Linus Torvalds
Signed-off-by: Greg Kroah-Hartman
commit f4e9906e4bf46437d7bc59f093190a8de643c91b
Author: Davidlohr Bueso
Date: Mon Sep 30 13:45:26 2013 -0700
ipc,msg: prevent race with rmid in msgsnd,msgrcv
commit 4271b05a227dc6175b66c3d9941aeab09048aeb2 upstream.
This fixes a race in both msgrcv() and msgsnd() between finding the msg
and actually dealing with the queue, as another thread can delete shmid
underneath us if we are preempted before acquiring the
kern\_ipc\_perm.lock.
Manfred illustrates this nicely:
Assume a preemptible kernel that is preempted just after
msq = msq\_obtain\_object\_check(ns, msqid)
in do\_msgrcv(). The only lock that is held is rcu\_read\_lock().
Now the other thread processes IPC\_RMID. When the first task is
resumed, then it will happily wait for messages on a deleted queue.
Fix this by checking for if the queue has been deleted after taking the
lock.
Signed-off-by: Davidlohr Bueso
Reported-by: Manfred Spraul
Cc: Rik van Riel
Cc: Mike Galbraith
Signed-off-by: Andrew Morton
Signed-off-by: Linus Torvalds
Signed-off-by: Greg Kroah-Hartman
commit a4e89936a1067a220c2e3946a89233fb8b7abd61
Author: Manfred Spraul
Date: Mon Sep 30 13:45:04 2013 -0700
ipc/sem.c: fix race in sem\_lock()
commit 5e9d527591421ccdb16acb8c23662231135d8686 upstream.
The exclusion of complex operations in sem\_lock() is insufficient: after
acquiring the per-semaphore lock, a simple op must first check that
sem\_perm.lock is not locked and only after that test check
complex\_count. The current code does it the other way around - and that
creates a race. Details are below.
The patch is a complete rewrite of sem\_lock(), based in part on the code
from Mike Galbraith. It removes all gotos and all loops and thus the
risk of livelocks.
I have tested the patch (together with the next one) on my i3 laptop and
it didn't cause any problems.
The bug is probably also present in 3.10 and 3.11, but for these kernels
it might be simpler just to move the test of sma->complex\_count after
the spin\_is\_locked() test.
Details of the bug:
Assume:
- sma->complex\_count = 0.
- Thread 1: semtimedop(complex op that must sleep)
- Thread 2: semtimedop(simple op).
Pseudo-Trace:
Thread 1: sem\_lock(): acquire sem\_perm.lock
Thread 1: sem\_lock(): check for ongoing simple ops
Nothing ongoing, thread 2 is still before sem\_lock().
Thread 1: try\_atomic\_semop()
<<< preempted.
Thread 2: sem\_lock():
static inline int sem\_lock(struct sem\_array \*sma, struct sembuf \*sops,
int nsops)
{
int locknum;
again:
if (nsops == 1 && !sma->complex\_count) {
struct sem \*sem = sma->sem\_base + sops->sem\_num;
/\* Lock just the semaphore we are interested in. \*/
spin\_lock(&sem->lock);
/\*
\* If sma->complex\_count was set while we were spinning,
\* we may need to look at things we did not lock here.
\*/
if (unlikely(sma->complex\_count)) {
spin\_unlock(&sem->lock);
goto lock\_array;
}
<<<<<<<<<
<<< complex\_count is still 0.
<<<
<<< Here it is preempted
<<<<<<<<<
Thread 1: try\_atomic\_semop() returns, notices that it must sleep.
Thread 1: increases sma->complex\_count.
Thread 1: drops sem\_perm.lock
Thread 2:
/\*
\* Another process is holding the global lock on the
\* sem\_array; we cannot enter our critical section,
\* but have to wait for the global lock to be released.
\*/
if (unlikely(spin\_is\_locked(&sma->sem\_perm.lock))) {
spin\_unlock(&sem->lock);
spin\_unlock\_wait(&sma->sem\_perm.lock);
goto again;
}
<<< sem\_perm.lock already dropped, thus no "goto again;"
locknum = sops->sem\_num;
Signed-off-by: Manfred Spraul
Cc: Mike Galbraith
Cc: Rik van Riel
Cc: Davidlohr Bueso
Signed-off-by: Andrew Morton
Signed-off-by: Linus Torvalds
Signed-off-by: Greg Kroah-Hartman
commit 8f67918af09fc0ffd426a9b6f87697976d3fbc7b
Author: Vyacheslav Dubeyko
Date: Mon Sep 30 13:45:12 2013 -0700
nilfs2: fix issue with race condition of competition between segments for dirty blocks
commit 7f42ec3941560f0902fe3671e36f2c20ffd3af0a upstream.
Many NILFS2 users were reported about strange file system corruption
(for example):
NILFS: bad btree node (blocknr=185027): level = 0, flags = 0x0, nchildren = 768
NILFS error (device sda4): nilfs\_bmap\_last\_key: broken bmap (inode number=11540)
But such error messages are consequence of file system's issue that takes
place more earlier. Fortunately, Jerome Poulin
and Anton Eliasson  were reported about another
issue not so recently. These reports describe the issue with segctor
thread's crash:
BUG: unable to handle kernel paging request at 0000000000004c83
IP: nilfs\_end\_page\_io+0x12/0xd0 [nilfs2]
Call Trace:
nilfs\_segctor\_do\_construct+0xf25/0x1b20 [nilfs2]
nilfs\_segctor\_construct+0x17b/0x290 [nilfs2]
nilfs\_segctor\_thread+0x122/0x3b0 [nilfs2]
kthread+0xc0/0xd0
ret\_from\_fork+0x7c/0xb0
These two issues have one reason. This reason can raise third issue
too. Third issue results in hanging of segctor thread with eating of
100% CPU.
REPRODUCING PATH:
One of the possible way or the issue reproducing was described by
Jermoe me Poulin :
1. init S to get to single user mode.
2. sysrq+E to make sure only my shell is running
3. start network-manager to get my wifi connection up
4. login as root and launch "screen"
5. cd /boot/log/nilfs which is a ext3 mount point and can log when NILFS dies.
6. lscp | xz -9e > lscp.txt.xz
7. mount my snapshot using mount -o cp=3360839,ro /dev/vgUbuntu/root /mnt/nilfs
8. start a screen to dump /proc/kmsg to text file since rsyslog is killed
9. start a screen and launch strace -f -o find-cat.log -t find
/mnt/nilfs -type f -exec cat {} > /dev/null \;
10. start a screen and launch strace -f -o apt-get.log -t apt-get update
11. launch the last command again as it did not crash the first time
12. apt-get crashes
13. ps aux > ps-aux-crashed.log
13. sysrq+W
14. sysrq+E wait for everything to terminate
15. sysrq+SUSB
Simplified way of the issue reproducing is starting kernel compilation
task and "apt-get update" in parallel.
REPRODUCIBILITY:
The issue is reproduced not stable [60% - 80%]. It is very important to
have proper environment for the issue reproducing. The critical
conditions for successful reproducing:
(1) It should have big modified file by mmap() way.
(2) This file should have the count of dirty blocks are greater that
several segments in size (for example, two or three) from time to time
during processing.
(3) It should be intensive background activity of files modification
in another thread.
INVESTIGATION:
First of all, it is possible to see that the reason of crash is not valid
page address:
NILFS [nilfs\_segctor\_complete\_write]:2100 bh->b\_count 0, bh->b\_blocknr 13895680, bh->b\_size 13897727, bh->b\_page 0000000000001a82
NILFS [nilfs\_segctor\_complete\_write]:2101 segbuf->sb\_segnum 6783
Moreover, value of b\_page (0x1a82) is 6786. This value looks like segment
number. And b\_blocknr with b\_size values look like block numbers. So,
buffer\_head's pointer points on not proper address value.
Detailed investigation of the issue is discovered such picture:
[-----------------------------SEGMENT 6783-------------------------------]
NILFS [nilfs\_segctor\_do\_construct]:2310 nilfs\_segctor\_begin\_construction
NILFS [nilfs\_segctor\_do\_construct]:2321 nilfs\_segctor\_collect
NILFS [nilfs\_segctor\_do\_construct]:2336 nilfs\_segctor\_assign
NILFS [nilfs\_segctor\_do\_construct]:2367 nilfs\_segctor\_update\_segusage
NILFS [nilfs\_segctor\_do\_construct]:2371 nilfs\_segctor\_prepare\_write
NILFS [nilfs\_segctor\_do\_construct]:2376 nilfs\_add\_checksums\_on\_logs
NILFS [nilfs\_segctor\_do\_construct]:2381 nilfs\_segctor\_write
NILFS [nilfs\_segbuf\_submit\_bio]:464 bio->bi\_sector 111149024, segbuf->sb\_segnum 6783
[-----------------------------SEGMENT 6784-------------------------------]
NILFS [nilfs\_segctor\_do\_construct]:2310 nilfs\_segctor\_begin\_construction
NILFS [nilfs\_segctor\_do\_construct]:2321 nilfs\_segctor\_collect
NILFS [nilfs\_lookup\_dirty\_data\_buffers]:782 bh->b\_count 1, bh->b\_page ffffea000709b000, page->index 0, i\_ino 1033103, i\_size 25165824
NILFS [nilfs\_lookup\_dirty\_data\_buffers]:783 bh->b\_assoc\_buffers.next ffff8802174a6798, bh->b\_assoc\_buffers.prev ffff880221cffee8
NILFS [nilfs\_segctor\_do\_construct]:2336 nilfs\_segctor\_assign
NILFS [nilfs\_segctor\_do\_construct]:2367 nilfs\_segctor\_update\_segusage
NILFS [nilfs\_segctor\_do\_construct]:2371 nilfs\_segctor\_prepare\_write
NILFS [nilfs\_segctor\_do\_construct]:2376 nilfs\_add\_checksums\_on\_logs
NILFS [nilfs\_segctor\_do\_construct]:2381 nilfs\_segctor\_write
NILFS [nilfs\_segbuf\_submit\_bh]:575 bh->b\_count 1, bh->b\_page ffffea000709b000, page->index 0, i\_ino 1033103, i\_size 25165824
NILFS [nilfs\_segbuf\_submit\_bh]:576 segbuf->sb\_segnum 6784
NILFS [nilfs\_segbuf\_submit\_bh]:577 bh->b\_assoc\_buffers.next ffff880218a0d5f8, bh->b\_assoc\_buffers.prev ffff880218bcdf50
NILFS [nilfs\_segbuf\_submit\_bio]:464 bio->bi\_sector 111150080, segbuf->sb\_segnum 6784, segbuf->sb\_nbio 0
[----------] ditto
NILFS [nilfs\_segbuf\_submit\_bio]:464 bio->bi\_sector 111164416, segbuf->sb\_segnum 6784, segbuf->sb\_nbio 15
[-----------------------------SEGMENT 6785-------------------------------]
NILFS [nilfs\_segctor\_do\_construct]:2310 nilfs\_segctor\_begin\_construction
NILFS [nilfs\_segctor\_do\_construct]:2321 nilfs\_segctor\_collect
NILFS [nilfs\_lookup\_dirty\_data\_buffers]:782 bh->b\_count 2, bh->b\_page ffffea000709b000, page->index 0, i\_ino 1033103, i\_size 25165824
NILFS [nilfs\_lookup\_dirty\_data\_buffers]:783 bh->b\_assoc\_buffers.next ffff880219277e80, bh->b\_assoc\_buffers.prev ffff880221cffc88
NILFS [nilfs\_segctor\_do\_construct]:2367 nilfs\_segctor\_update\_segusage
NILFS [nilfs\_segctor\_do\_construct]:2371 nilfs\_segctor\_prepare\_write
NILFS [nilfs\_segctor\_do\_construct]:2376 nilfs\_add\_checksums\_on\_logs
NILFS [nilfs\_segctor\_do\_construct]:2381 nilfs\_segctor\_write
NILFS [nilfs\_segbuf\_submit\_bh]:575 bh->b\_count 2, bh->b\_page ffffea000709b000, page->index 0, i\_ino 1033103, i\_size 25165824
NILFS [nilfs\_segbuf\_submit\_bh]:576 segbuf->sb\_segnum 6785
NILFS [nilfs\_segbuf\_submit\_bh]:577 bh->b\_assoc\_buffers.next ffff880218a0d5f8, bh->b\_assoc\_buffers.prev ffff880222cc7ee8
NILFS [nilfs\_segbuf\_submit\_bio]:464 bio->bi\_sector 111165440, segbuf->sb\_segnum 6785, segbuf->sb\_nbio 0
[----------] ditto
NILFS [nilfs\_segbuf\_submit\_bio]:464 bio->bi\_sector 111177728, segbuf->sb\_segnum 6785, segbuf->sb\_nbio 12
NILFS [nilfs\_segctor\_do\_construct]:2399 nilfs\_segctor\_wait
NILFS [nilfs\_segbuf\_wait]:676 segbuf->sb\_segnum 6783
NILFS [nilfs\_segbuf\_wait]:676 segbuf->sb\_segnum 6784
NILFS [nilfs\_segbuf\_wait]:676 segbuf->sb\_segnum 6785
NILFS [nilfs\_segctor\_complete\_write]:2100 bh->b\_count 0, bh->b\_blocknr 13895680, bh->b\_size 13897727, bh->b\_page 0000000000001a82
BUG: unable to handle kernel paging request at 0000000000001a82
IP: [] nilfs\_end\_page\_io+0x12/0xd0 [nilfs2]
Usually, for every segment we collect dirty files in list. Then, dirty
blocks are gathered for every dirty file, prepared for write and
submitted by means of nilfs\_segbuf\_submit\_bh() call. Finally, it takes
place complete write phase after calling nilfs\_end\_bio\_write() on the
block layer. Buffers/pages are marked as not dirty on final phase and
processed files removed from the list of dirty files.
It is possible to see that we had three prepare\_write and submit\_bio
phases before segbuf\_wait and complete\_write phase. Moreover, segments
compete between each other for dirty blocks because on every iteration
of segments processing dirty buffer\_heads are added in several lists of
payload\_buffers:
[SEGMENT 6784]: bh->b\_assoc\_buffers.next ffff880218a0d5f8, bh->b\_assoc\_buffers.prev ffff880218bcdf50
[SEGMENT 6785]: bh->b\_assoc\_buffers.next ffff880218a0d5f8, bh->b\_assoc\_buffers.prev ffff880222cc7ee8
The next pointer is the same but prev pointer has changed. It means
that buffer\_head has next pointer from one list but prev pointer from
another. Such modification can be made several times. And, finally, it
can be resulted in various issues: (1) segctor hanging, (2) segctor
crashing, (3) file system metadata corruption.
FIX:
This patch adds:
(1) setting of BH\_Async\_Write flag in nilfs\_segctor\_prepare\_write()
for every proccessed dirty block;
(2) checking of BH\_Async\_Write flag in
nilfs\_lookup\_dirty\_data\_buffers() and
nilfs\_lookup\_dirty\_node\_buffers();
(3) clearing of BH\_Async\_Write flag in nilfs\_segctor\_complete\_write(),
nilfs\_abort\_logs(), nilfs\_forget\_buffer(), nilfs\_clear\_dirty\_page().
Reported-by: Jerome Poulin
Reported-by: Anton Eliasson
Cc: Paul Fertser
Cc: ARAI Shun-ichi
Cc: Piotr Szymaniak
Cc: Juan Barry Manuel Canham
Cc: Zahid Chowdhury
Cc: Elmer Zhang
Cc: Kenneth Langga
Signed-off-by: Vyacheslav Dubeyko
Acked-by: Ryusuke Konishi
Signed-off-by: Andrew Morton
Signed-off-by: Linus Torvalds
Signed-off-by: Greg Kroah-Hartman
commit cca2f2a8812309f45db931c5d6bb1f1cb3eee117
Author: Johan Hedberg
Date: Fri Sep 13 08:58:18 2013 +0300
Bluetooth: Fix rfkill functionality during the HCI setup stage
commit bf5430360ebe4b2d0c51d91f782e649107b502eb upstream.
We need to let the setup stage complete cleanly even when the HCI device
is rfkilled. Otherwise the HCI device will stay in an undefined state
and never get notified to user space through mgmt (even when it gets
unblocked through rfkill).
This patch makes sure that hci\_dev\_open() can be called in the HCI\_SETUP
stage, that blocking the device doesn't abort the setup stage, and that
the device gets proper powered down as soon as the setup stage completes
in case it was blocked meanwhile.
The bug that this patch fixed can be very easily reproduced using e.g.
the rfkill command line too. By running "rfkill block all" before
inserting a Bluetooth dongle the resulting HCI device goes into a state
where it is never announced over mgmt, not even when "rfkill unblock all"
is run.
Signed-off-by: Johan Hedberg
Acked-by: Marcel Holtmann
Signed-off-by: Gustavo Padovan
Signed-off-by: Greg Kroah-Hartman
commit fe3500ee45a4649a6837051572a02872e3017375
Author: Johan Hedberg
Date: Fri Sep 13 08:58:17 2013 +0300
Bluetooth: Introduce a new HCI\_RFKILLED flag
commit 5e130367d43ff22836bbae380d197d600fe8ddbb upstream.
This makes it more convenient to check for rfkill (no need to check for
dev->rfkill before calling rfkill\_blocked()) and also avoids potential
races if the RFKILL state needs to be checked from within the rfkill
callback.
Signed-off-by: Johan Hedberg
Acked-by: Marcel Holtmann
Signed-off-by: Gustavo Padovan
Signed-off-by: Greg Kroah-Hartman
commit 8eb8de3184c823fb3d4a4ddcae1fa4a9b1162b29
Author: Raphael Kubo da Costa
Date: Mon Sep 2 14:57:51 2013 +0300
Bluetooth: Add support for BCM20702A0 [0b05, 17cb]
commit 38a172bef8c93ecbfd69715fd88396988e4073fd upstream.
Yet another vendor specific ID for this chipset; this one for the ASUS
USB-BT400 Bluetooth 4.0 adapter.
T: Bus=03 Lev=02 Prnt=02 Port=01 Cnt=01 Dev#= 6 Spd=12 MxCh= 0
D: Ver= 2.00 Cls=ff(vend.) Sub=01 Prot=01 MxPS=64 #Cfgs= 1
P: Vendor=0b05 ProdID=17cb Rev=01.12
S: Manufacturer=Broadcom Corp
S: Product=BCM20702A0
S: SerialNumber=000272C64400
C: #Ifs= 4 Cfg#= 1 Atr=a0 MxPwr=100mA
I: If#= 0 Alt= 0 #EPs= 3 Cls=ff(vend.) Sub=01 Prot=01 Driver=(none)
I: If#= 1 Alt= 0 #EPs= 2 Cls=ff(vend.) Sub=01 Prot=01 Driver=(none)
I: If#= 2 Alt= 0 #EPs= 2 Cls=ff(vend.) Sub=ff Prot=ff Driver=(none)
I: If#= 3 Alt= 0 #EPs= 0 Cls=fe(app. ) Sub=01 Prot=01 Driver=(none)
Signed-off-by: Raphael Kubo da Costa
Signed-off-by: Gustavo Padovan
Signed-off-by: Greg Kroah-Hartman
commit 800a63ce43cd78388594c2370de11c096e412bd6
Author: Peng Chen
Date: Fri Aug 30 17:41:40 2013 +0800
Bluetooth: Add a new PID/VID 0cf3/e005 for AR3012.
commit 0a3658cccdf5326ea508efeb1879b0e2508bb0c3 upstream.
usb device info:
T: Bus=06 Lev=01 Prnt=01 Port=01 Cnt=01 Dev#= 15 Spd=12 MxCh= 0
D: Ver= 1.10 Cls=e0(wlcon) Sub=01 Prot=01 MxPS=64 #Cfgs= 1
P: Vendor=0cf3 ProdID=e005 Rev= 0.02
C:\* #Ifs= 2 Cfg#= 1 Atr=e0 MxPwr=100mA
I:\* If#= 0 Alt= 0 #EPs= 3 Cls=e0(wlcon) Sub=01 Prot=01 Driver=btusb
E: Ad=81(I) Atr=03(Int.) MxPS= 16 Ivl=1ms
E: Ad=82(I) Atr=02(Bulk) MxPS= 64 Ivl=0ms
E: Ad=02(O) Atr=02(Bulk) MxPS= 64 Ivl=0ms
I:\* If#= 1 Alt= 0 #EPs= 2 Cls=e0(wlcon) Sub=01 Prot=01 Driver=btusb
E: Ad=83(I) Atr=01(Isoc) MxPS= 0 Ivl=1ms
E: Ad=03(O) Atr=01(Isoc) MxPS= 0 Ivl=1ms
Signed-off-by: Peng Chen
Signed-off-by: Gustavo Padovan
Signed-off-by: Greg Kroah-Hartman
commit 2d1c789bb88cdcc4a9dd731575d5ed634d9a4965
Author: Andre Guedes
Date: Wed Jul 31 16:25:29 2013 -0300
Bluetooth: Fix encryption key size for peripheral role
commit 89cbb4da0abee2f39d75f67f9fd57f7410c8b65c upstream.
This patch fixes the connection encryption key size information when
the host is playing the peripheral role. We should set conn->enc\_key\_
size in hci\_le\_ltk\_request\_evt, otherwise it is left uninitialized.
Signed-off-by: Andre Guedes
Signed-off-by: Gustavo Padovan
Signed-off-by: Greg Kroah-Hartman
commit 441e69e1d6e12050c74fb80b1368c0194cd51e05
Author: Andre Guedes
Date: Wed Jul 31 16:25:28 2013 -0300
Bluetooth: Fix security level for peripheral role
commit f8776218e8546397be64ad2bc0ebf4748522d6e3 upstream.
While playing the peripheral role, the host gets a LE Long Term Key
Request Event from the controller when a connection is established
with a bonded device. The host then informs the LTK which should be
used for the connection. Once the link is encrypted, the host gets
an Encryption Change Event.
Therefore we should set conn->pending\_sec\_level instead of conn->
sec\_level in hci\_le\_ltk\_request\_evt. This way, conn->sec\_level is
properly updated in hci\_encrypt\_change\_evt.
Moreover, since we have a LTK associated to the device, we have at
least BT\_SECURITY\_MEDIUM security level.
Signed-off-by: Andre Guedes
Signed-off-by: Gustavo Padovan
Signed-off-by: Greg Kroah-Hartman
commit 17828296b122ed60cf5274cfb481aa1cc0308250
Author: Arend van Spriel
Date: Wed Sep 25 12:11:01 2013 +0200
brcmfmac: obtain platform data upon module initialization
commit db4efbbeb457b6f9f4d8c4b090d1170d12f026e1 upstream.
The driver uses platform\_driver\_probe() to obtain platform data
if any. However, that function is placed in the .init section so
it must be called upon driver module initialization.
The problem was reported by Fenguang Wu resulting in a kernel
oops because the .init section was already freed.
[ 48.966342] Switched to clocksource tsc
[ 48.970002] kernel tried to execute NX-protected page - exploit attempt? (uid: 0)
[ 48.970851] BUG: unable to handle kernel paging request at ffffffff82196446
[ 48.970957] IP: [] classes\_init+0x26/0x26
[ 48.970957] PGD 1e76067 PUD 1e77063 PMD f388063 PTE 8000000002196163
[ 48.970957] Oops: 0011 [#1]
[ 48.970957] CPU: 0 PID: 17 Comm: kworker/0:1 Not tainted 3.11.0-rc7-00444-gc52dd7f #23
[ 48.970957] Workqueue: events brcmf\_driver\_init
[ 48.970957] task: ffff8800001d2000 ti: ffff8800001d4000 task.ti: ffff8800001d4000
[ 48.970957] RIP: 0010:[] [] classes\_init+0x26/0x26
[ 48.970957] RSP: 0000:ffff8800001d5d40 EFLAGS: 00000286
[ 48.970957] RAX: 0000000000000001 RBX: ffffffff820c5620 RCX: 0000000000000000
[ 48.970957] RDX: 0000000000000001 RSI: ffffffff816f7380 RDI: ffffffff820c56c0
[ 48.970957] RBP: ffff8800001d5d50 R08: ffff8800001d2508 R09: 0000000000000002
[ 48.970957] R10: 0000000000000000 R11: 0001f7ce298c5620 R12: ffff8800001c76b0
[ 48.970957] R13: ffffffff81e91d40 R14: 0000000000000000 R15: ffff88000e0ce300
[ 48.970957] FS: 0000000000000000(0000) GS:ffffffff81e84000(0000) knlGS:0000000000000000
[ 48.970957] CS: 0010 DS: 0000 ES: 0000 CR0: 000000008005003b
[ 48.970957] CR2: ffffffff82196446 CR3: 0000000001e75000 CR4: 00000000000006b0
[ 48.970957] DR0: 0000000000000000 DR1: 0000000000000000 DR2: 0000000000000000
[ 48.970957] DR3: 0000000000000000 DR6: 0000000000000000 DR7: 0000000000000000
[ 48.970957] Stack:
[ 48.970957] ffffffff816f7df8 ffffffff820c5620 ffff8800001d5d60 ffffffff816eeec9
[ 48.970957] ffff8800001d5de0 ffffffff81073dc5 ffffffff81073d68 ffff8800001d5db8
[ 48.970957] 0000000000000086 ffffffff820c5620 ffffffff824f7fd0 0000000000000000
[ 48.970957] Call Trace:
[ 48.970957] [] ? brcmf\_sdio\_init+0x18/0x70
[ 48.970957] [] brcmf\_driver\_init+0x9/0x10
[ 48.970957] [] process\_one\_work+0x1d5/0x480
[ 48.970957] [] ? process\_one\_work+0x178/0x480
[ 48.970957] [] worker\_thread+0x118/0x3a0
[ 48.970957] [] ? process\_one\_work+0x480/0x480
[ 48.970957] [] kthread+0xe7/0xf0
[ 48.970957] [] ? finish\_task\_switch.constprop.57+0x37/0xd0
[ 48.970957] [] ? \_\_kthread\_parkme+0x80/0x80
[ 48.970957] [] ret\_from\_fork+0x7a/0xb0
[ 48.970957] [] ? \_\_kthread\_parkme+0x80/0x80
[ 48.970957] Code: cc cc cc cc cc cc cc cc cc cc cc cc cc cc cc cc cc cc cc cc cc cc cc cc cc cc cc cc cc cc cc cc cc cc cc cc cc
cc cc cc cc cc cc  cc cc cc cc cc cc cc cc cc cc cc cc cc cc cc cc cc cc cc cc
[ 48.970957] RIP [] classes\_init+0x26/0x26
[ 48.970957] RSP
[ 48.970957] CR2: ffffffff82196446
[ 48.970957] ---[ end trace 62980817cd525f14 ]---
Reported-by: Fengguang Wu
Reviewed-by: Hante Meuleman
Reviewed-by: Pieter-Paul Giesberts
Tested-by: Fengguang Wu
Signed-off-by: Arend van Spriel
Signed-off-by: John W. Linville
Signed-off-by: Greg Kroah-Hartman
commit a327074d8674c8ce44afca35a1a93fab11870f0d
Author: Maxim Patlasov
Date: Fri Sep 13 19:20:16 2013 +0400
fuse: fix fallocate vs. ftruncate race
commit 0ab08f576b9e6a6b689fc6b4e632079b978e619b upstream.
A former patch introducing FUSE\_I\_SIZE\_UNSTABLE flag provided detailed
description of races between ftruncate and anyone who can extend i\_size:
> 1. As in the previous scenario fuse\_dentry\_revalidate() discovered that i\_size
> changed (due to our own fuse\_do\_setattr()) and is going to call
> truncate\_pagecache() for some 'new\_size' it believes valid right now. But by
> the time that particular truncate\_pagecache() is called ...
> 2. fuse\_do\_setattr() returns (either having called truncate\_pagecache() or
> not -- it doesn't matter).
> 3. The file is extended either by write(2) or ftruncate(2) or fallocate(2).
> 4. mmap-ed write makes a page in the extended region dirty.
This patch adds necessary bits to fuse\_file\_fallocate() to protect from that
race.
Signed-off-by: Maxim Patlasov
Signed-off-by: Miklos Szeredi
Signed-off-by: Greg Kroah-Hartman
commit 3a06b47c8aba5928a1a14a0c9c0592e32f74b671
Author: Maxim Patlasov
Date: Fri Sep 13 19:19:54 2013 +0400
fuse: wait for writeback in fuse\_file\_fallocate()
commit bde52788bdb755b9e4b75db6c434f30e32a0ca0b upstream.
The patch fixes a race between mmap-ed write and fallocate(PUNCH\_HOLE):
1) An user makes a page dirty via mmap-ed write.
2) The user performs fallocate(2) with mode == PUNCH\_HOLE|KEEP\_SIZE
and  covering the page.
3) Before truncate\_pagecache\_range call from fuse\_file\_fallocate,
the page goes to write-back. The page is fully processed by fuse\_writepage
(including end\_page\_writeback on the page), but fuse\_flush\_writepages did
nothing because fi->writectr < 0.
4) truncate\_pagecache\_range is called and fuse\_file\_fallocate is finishing
by calling fuse\_release\_nowrite. The latter triggers processing queued
write-back request which will write stale data to the hole soon.
Changed in v2 (thanks to Brian for suggestion):
- Do not truncate page cache until FUSE\_FALLOCATE succeeded. Otherwise,
we can end up in returning -ENOTSUPP while user data is already punched
from page cache. Use filemap\_write\_and\_wait\_range() instead.
Changed in v3 (thanks to Miklos for suggestion):
- fuse\_wait\_on\_writeback() is prone to livelocks; use fuse\_set\_nowrite()
instead. So far as we need a dirty-page barrier only, fuse\_sync\_writes()
should be enough.
- rebased to for-linus branch of fuse.git
Signed-off-by: Maxim Patlasov
Signed-off-by: Miklos Szeredi
Signed-off-by: Greg Kroah-Hartman
commit c7ab1ac72571ea06719e989a9fade5f51e1b8688
Author: Paul E. McKenney
Date: Tue Oct 1 17:11:35 2013 +1000
powerpc: Restore registers on error exit from csum\_partial\_copy\_generic()
commit 8f21bd0090052e740944f9397e2be5ac7957ded7 upstream.
The csum\_partial\_copy\_generic() function saves the PowerPC non-volatile
r14, r15, and r16 registers for the main checksum-and-copy loop.
Unfortunately, it fails to restore them upon error exit from this loop,
which results in silent corruption of these registers in the presumably
rare event of an access exception within that loop.
This commit therefore restores these register on error exit from the loop.
Signed-off-by: Paul E. McKenney
Signed-off-by: Anton Blanchard
Signed-off-by: Benjamin Herrenschmidt
Signed-off-by: Greg Kroah-Hartman
commit 907a2dd41bc56bb8bee077ad09e5a84ea652e79b
Author: Madhavan Srinivasan
Date: Wed Oct 2 00:34:10 2013 +0530
powerpc/sysfs: Disable writing to PURR in guest mode
commit d1211af3049f4c9c1d8d4eb8f8098cc4f4f0d0c7 upstream.
arch/powerpc/kernel/sysfs.c exports PURR with write permission.
This may be valid for kernel in phyp mode. But writing to
the file in guest mode causes crash due to a priviledge violation
Signed-off-by: Madhavan Srinivasan
Signed-off-by: Benjamin Herrenschmidt
Signed-off-by: Greg Kroah-Hartman
commit 8feeb87d772d6611d7eaf9e0e870d1ed981ef322
Author: Nathan Fontenot
Date: Fri Sep 27 10:18:09 2013 -0500
powerpc: Fix memory hotplug with sparse vmemmap
commit f7e3334a6bcb42e7295a9bd9cb36ca4e6e4e66b4 upstream.
Previous commit 46723bfa540... introduced a new config option
HAVE\_BOOTMEM\_INFO\_NODE that ended up breaking memory hot-remove for ppc
when sparse vmemmap is not defined.
This patch defines HAVE\_BOOTMEM\_INFO\_NODE for ppc and adds the call to
register\_page\_bootmem\_info\_node. Without this we get a BUG\_ON for memory
hot remove in put\_page\_bootmem().
This also adds a stub for register\_page\_bootmem\_memmap to allow ppc to build
with sparse vmemmap defined. Leaving this as a stub is fine since the same
vmemmap addresses are also handled in vmemmap\_populate and as such are
properly mapped.
Signed-off-by: Nathan Fontenot
Signed-off-by: Benjamin Herrenschmidt
Signed-off-by: Greg Kroah-Hartman
commit 698dc640e9dc5722d8ce4bf34524986ef5236390
Author: Paul E. McKenney
Date: Tue Oct 1 16:54:05 2013 +1000
powerpc: Fix parameter clobber in csum\_partial\_copy\_generic()
commit d9813c3681a36774b254c0cdc9cce53c9e22c756 upstream.
The csum\_partial\_copy\_generic() uses register r7 to adjust the remaining
bytes to process. Unfortunately, r7 also holds a parameter, namely the
address of the flag to set in case of access exceptions while reading
the source buffer. Lacking a quantum implementation of PowerPC, this
commit instead uses register r9 to do the adjusting, leaving r7's
pointer uncorrupted.
Signed-off-by: Paul E. McKenney
Signed-off-by: Anton Blanchard
Signed-off-by: Benjamin Herrenschmidt
Signed-off-by: Greg Kroah-Hartman
commit 6de61dfab8587ebe36be11150496ca76e1915e7e
Author: Prarit Bhargava
Date: Mon Sep 23 09:33:36 2013 -0400
powerpc/vio: Fix modalias\_show return values
commit e82b89a6f19bae73fb064d1b3dd91fcefbb478f4 upstream.
modalias\_show() should return an empty string on error, not -ENODEV.
This causes the following false and annoying error:
> find /sys/devices -name modalias -print0 | xargs -0 cat >/dev/null
cat: /sys/devices/vio/4000/modalias: No such device
cat: /sys/devices/vio/4001/modalias: No such device
cat: /sys/devices/vio/4002/modalias: No such device
cat: /sys/devices/vio/4004/modalias: No such device
cat: /sys/devices/vio/modalias: No such device
Signed-off-by: Prarit Bhargava
Signed-off-by: Benjamin Herrenschmidt
Signed-off-by: Greg Kroah-Hartman
commit fb1c209733e25177b634f825848c78c998f54e30
Author: Michael Neuling
Date: Wed Oct 2 17:15:15 2013 +1000
powerpc/tm: Turn interrupts hard off in tm\_reclaim()
commit c69e63b0f135fa51d6e1c38b5ac8a1def15ea3fa upstream.
We can't take IRQs in tm\_reclaim as we might have a bogus r13 and r1.
This turns IRQs hard off in this function.
Signed-off-by: Michael Neuling
Signed-off-by: Benjamin Herrenschmidt
Signed-off-by: Greg Kroah-Hartman
commit 39302163d7368f0960f30cf7d785eec2ccae1c26
Author: Michael Neuling
Date: Thu Sep 26 13:29:09 2013 +1000
powerpc/tm: Switch out userspace PPR and DSCR sooner
commit e9bdc3d6143d1c4b8d8ce5231fc958268331f983 upstream.
When we do a treclaim or trecheckpoint we end up running with userspace
PPR and DSCR values. Currently we don't do anything special to avoid
running with user values which could cause a severe performance
degradation.
This patch moves the PPR and DSCR save and restore around treclaim and
trecheckpoint so that we run with user values for a much shorter period.
More care is taken with the PPR as it's impact is greater than the DSCR.
This is similar to user exceptions, where we run HTM\_MEDIUM early to
ensure that we don't run with a userspace PPR values in the kernel.
Signed-off-by: Michael Neuling
Signed-off-by: Benjamin Herrenschmidt
Signed-off-by: Greg Kroah-Hartman
commit ee4801ffed249525a8080581fdd6380f324c6086
Author: Michael Ellerman
Date: Wed Oct 2 18:04:06 2013 +1000
powerpc/perf: Fix handling of FAB events
commit a53b27b3abeef406de92a2bb0ceb6fb4c3fb8fc4 upstream.
Commit 4df4899 "Add power8 EBB support" included a bug in the handling
of the FAB\_CRESP\_MATCH and FAB\_TYPE\_MATCH fields.
These values are pulled out of the event code using EVENT\_THR\_CTL\_SHIFT,
however we were then or'ing that value directly into MMCR1.
This meant we were failing to set the FAB fields correctly, and also
potentially corrupting the value for PMC4SEL. Leading to no counts for
the FAB events and incorrect counts for PMC4.
The fix is simply to shift left the FAB value correctly before or'ing it
with MMCR1.
Reported-by: Sooraj Ravindran Nair
Signed-off-by: Michael Ellerman
Signed-off-by: Benjamin Herrenschmidt
Signed-off-by: Greg Kroah-Hartman
commit 1a92f1a5860c38105a80293717db9448d6fbce78
Author: Nishanth Aravamudan
Date: Tue Oct 1 14:04:53 2013 -0700
powerpc/iommu: Use GFP\_KERNEL instead of GFP\_ATOMIC in iommu\_init\_table()
commit 1cf389df090194a0976dc867b7fffe99d9d490cb upstream.
Under heavy (DLPAR?) stress, we tripped this panic() in
arch/powerpc/kernel/iommu.c::iommu\_init\_table():
page = alloc\_pages\_node(nid, GFP\_ATOMIC, get\_order(sz));
if (!page)
panic("iommu\_init\_table: Can't allocate %ld bytes\n", sz);
Before the panic() we got a page allocation failure for an order-2
allocation. There appears to be memory free, but perhaps not in the
ATOMIC context. I looked through all the call-sites of
iommu\_init\_table() and didn't see any obvious reason to need an ATOMIC
allocation. Most call-sites in fact have an explicit GFP\_KERNEL
allocation shortly before the call to iommu\_init\_table(), indicating we
are not in an atomic context. There is some indirection for some paths,
but I didn't see any locks indicating that GFP\_KERNEL is inappropriate.
With this change under the same conditions, we have not been able to
reproduce the panic.
Signed-off-by: Nishanth Aravamudan
Signed-off-by: Benjamin Herrenschmidt
Signed-off-by: Greg Kroah-Hartman
commit c92d069acbd6b7852eee27f062b62d1521efe75b
Author: Will Deacon
Date: Wed Aug 21 13:56:34 2013 +0100
iommu/arm-smmu: don't enable SMMU device until probing has completed
commit fd90cecbde065eac6ecc3ef38abace725ad27010 upstream.
We currently reset and enable the SMMU before the device has finished
being probed, so if we fail later on (for example, because we couldn't
request a global irq successfully) then we will leave the device in an
active state.
This patch delays the reset and enabling of the SMMU hardware until
probing has completed.
Signed-off-by: Will Deacon
Signed-off-by: Greg Kroah-Hartman
commit 81ac5e7f75c97089f3e86955768f81096c7c5c22
Author: Dan Carpenter
Date: Wed Aug 21 09:34:20 2013 +0100
iommu/arm-smmu: fix iommu\_present() test in init
commit 6614ee77f49d37f9bb77eb3e81431ca8fcc4042e upstream.
The extra semi-colon on the end breaks the test.
Tested-by: Will Deacon
Signed-off-by: Dan Carpenter
Signed-off-by: Will Deacon
Signed-off-by: Greg Kroah-Hartman
commit 5f854447d6119d0dc79680fe0c1ced324fe2e03b
Author: Dan Carpenter
Date: Wed Aug 21 09:33:30 2013 +0100
iommu/arm-smmu: fix a signedness bug
commit faea13b72dbdb77e4d6ad83344596486611708b0 upstream.
Unsigned char is never equal to -1.
Tested-by: Will Deacon
Signed-off-by: Dan Carpenter
Signed-off-by: Will Deacon
Signed-off-by: Greg Kroah-Hartman
commit bbe7602997289ee415a7767150ef6b599d56cf4a
Author: Joerg Roedel
Date: Wed Sep 25 12:11:33 2013 +0200
ARM: mach-integrator: Add stub for pci\_v3\_early\_init() for !CONFIG\_PCI
commit 4dc3231f818baf7415c67ee06c51ace0973ae736 upstream.
This fixes a compile error where CONFIG\_PCI is disabled:
LD init/built-in.o
arch/arm/mach-integrator/built-in.o: In function `ap\_map\_io':
integrator\_cp.c:(.init.text+0x570): undefined reference to `pci\_v3\_early\_init'
make[1]: \*\*\* [vmlinux] Error 1
make: \*\*\* [sub-make] Error 2
Signed-off-by: Joerg Roedel
Reviewed-by: Linus Walleij
Signed-off-by: Olof Johansson
Signed-off-by: Greg Kroah-Hartman
commit c6bdbcd2f5f55d7f61a61ceee2f342bcfeddbe15
Author: Olof Johansson
Date: Wed Sep 11 15:27:41 2013 -0700
ARM: kvm: rename cpu\_reset to avoid name clash
commit ac570e0493815e0b41681c89cb50d66421429d27 upstream.
cpu\_reset is already #defined in  as processor.reset,
so it expands here and causes problems.
Signed-off-by: Olof Johansson
Signed-off-by: Christoffer Dall
Signed-off-by: Greg Kroah-Hartman
commit 961bd4a98ca7e14b6656a10c943aa3f5e8aa099f
Author: Dan Carpenter
Date: Fri Sep 13 10:53:36 2013 +0300
ASoC: ab8500-codec: info leak in anc\_status\_control\_put()
commit d63733aed90b432e5cc489ddfa28e342f91b4652 upstream.
If the user passes an invalid value it leads to an info leak when we
print the error message or it could oops. This is called with user
supplied data from snd\_ctl\_elem\_write().
Signed-off-by: Dan Carpenter
Signed-off-by: Mark Brown
Signed-off-by: Greg Kroah-Hartman
commit dd0395fd28b3baf53a1cf0878638c5e6f472e391
Author: Dan Carpenter
Date: Fri Sep 13 10:52:49 2013 +0300
ASoC: 88pm860x: array overflow in snd\_soc\_put\_volsw\_2r\_st()
commit d967967e8d1116fb38bad25e58714b5dddd03cca upstream.
This is called from snd\_ctl\_elem\_write() with user supplied data so we
need to add some bounds checking.
Signed-off-by: Dan Carpenter
Signed-off-by: Mark Brown
Signed-off-by: Greg Kroah-Hartman
commit 83b7e1568698b35be50f26eddfa17aafdb57e43d
Author: Dan Carpenter
Date: Fri Sep 13 10:52:14 2013 +0300
ASoC: max98095: a couple array underflows
commit f8d7b13e14357ed19d2ca2799539600418dc3939 upstream.
The ->put() function are called from snd\_ctl\_elem\_write() with user
supplied data. The limit checks here could underflow leading to a
crash.
Signed-off-by: Dan Carpenter
Signed-off-by: Mark Brown
Signed-off-by: Greg Kroah-Hartman
commit e64141c1c311b840235d99baf17a3620cd35cb19
Author: Javier Martinez Canillas
Date: Wed Sep 25 02:36:54 2013 +0200
gpio/omap: auto-setup a GPIO when used as an IRQ
commit fac7fa162a19100298d5d91359960037dc5bfca9 upstream.
The OMAP GPIO controller HW requires a pin to be configured in GPIO
input mode in order to operate as an interrupt input. Since drivers
should not be aware of whether an interrupt pin is also a GPIO or not,
the HW should be fully configured/enabled as an IRQ if a driver solely
uses IRQ APIs such as request\_irq(), and never calls any GPIO-related
APIs. As such, add the missing HW setup to the OMAP GPIO controller's
irq\_chip driver.
Since this bypasses the GPIO subsystem we have to ensure that another
driver won't be able to request the same GPIO pin that is used as an
IRQ and set its direction as output. Requesting the GPIO and setting
its direction as input is allowed though.
This fixes smsc911x ethernet support for tobi and igep OMAP3 boards
and OMAP4 SDP SPI based ethernet that use a GPIO as an interrupt line.
Acked-by: Stephen Warren
Tested-by: George Cherian
Tested-by: Aaro Koskinen
Tested-by: Lars Poeschel
Reviewed-by: Kevin Hilman
Tested-by: Kevin Hilman
Acked-by: Santosh Shilimkar
Acked-by: Tony Lindgren
Signed-off-by: Javier Martinez Canillas
Signed-off-by: Linus Walleij
Signed-off-by: Greg Kroah-Hartman
commit 80bd2ccb14f0b09d4daa8a87d5668d91e8f3702d
Author: Javier Martinez Canillas
Date: Wed Sep 25 02:36:52 2013 +0200
gpio/omap: maintain GPIO and IRQ usage separately
commit fa365e4d729065b5e85165df3dc9699ed47489cc upstream.
The GPIO OMAP controller pins can be used as IRQ and GPIO
independently so is necessary to keep track GPIO pins and
IRQ lines usage separately to make sure that the bank will
always be enabled while being used.
Also move gpio\_is\_input() definition in preparation for the
next patch that setups the controller's irq\_chip driver when
a caller requests an interrupt line.
Acked-by: Stephen Warren
Tested-by: George Cherian
Tested-by: Aaro Koskinen
Tested-by: Lars Poeschel
Reviewed-by: Kevin Hilman
Tested-by: Kevin Hilman
Acked-by: Santosh Shilimkar
Acked-by: Tony Lindgren
Signed-off-by: Javier Martinez Canillas
Signed-off-by: Linus Walleij
Signed-off-by: Greg Kroah-Hartman
commit b53bd7476d61cdf45458029769a043993913bc40
Author: Dan Aloni
Date: Mon Sep 30 13:45:02 2013 -0700
fs/binfmt\_elf.c: prevent a coredump with a large vm\_map\_count from Oopsing
commit 72023656961b8c81a168a7a6762d589339d0d7ec upstream.
A high setting of max\_map\_count, and a process core-dumping with a large
enough vm\_map\_count could result in an NT\_FILE note not being written,
and the kernel crashing immediately later because it has assumed
otherwise.
Reproduction of the oops-causing bug described here:
https://lkml.org/lkml/2013/8/30/50
Rge ussue originated in commit 2aa362c49c31 ("coredump: extend core dump
note section to contain file names of mapped file") from Oct 4, 2012.
This patch make that section optional in that case. fill\_files\_note()
should signify the error, and also let the info struct in
elf\_core\_dump() be zero-initialized so that we can check for the
optionally written note.
[akpm@linux-foundation.org: avoid abusing E2BIG, remove a couple of not-really-needed local variables]
[akpm@linux-foundation.org: fix sparse warning]
Signed-off-by: Dan Aloni
Cc: Al Viro
Cc: Denys Vlasenko
Reported-by: Martin MOKREJS
Tested-by: Martin MOKREJS
Signed-off-by: Andrew Morton
Signed-off-by: Linus Torvalds
Signed-off-by: Greg Kroah-Hartman
commit f05f1c657da0414362444919341d97d07e53b30d
Author: Nishanth Menon
Date: Fri Sep 27 08:25:14 2013 -0500
regulator: ti-abb: Fix bias voltage glitch in transition to bypass mode
commit bf00ca35cec8f0894dcfd90f88b03af1d5c7b86f upstream.
As documented in Application Note SWPA117 v2.1(NDA), LDO override has a
requirement that when switching from Bias active + override active
mode(FBB/RBB) to Bypass(nominal) mode, LDO reset must be performed
\*after\* LDO transitions to Bypass(nominal) mode.
The same rule in reverse applies when switching from a ABB bypass mode
to ABB enabled - LDO override \*must\* be performed prior to transition to
required ABB mode, if we do not do that, the same glitch takes place.
Currently while transitioning to ABB bypass, we reset the LDO overide
prior to the transition which causes a few milliseconds where ABB LDO
voltage could go all the way to 800mV(based on SoC process node),
during this period, the delta voltage between VDD rail and VBB rail
could cause the system to improperly function.
Signed-off-by: Nishanth Menon
Signed-off-by: Mark Brown
Signed-off-by: Greg Kroah-Hartman
commit d9b834c61f22b8fc38a32cfde86017381f370336
Author: Gabor Juhos
Date: Wed Sep 25 15:32:35 2013 +0200
avr32: fix clockevents kernel warning
commit 1b0135b5e20c56b2edae29e92b91c0b12c983432 upstream.
Since commit 01426478df3a8791ff5c8b6b82d409e699cfaf38
(avr32: Use generic idle loop) the kernel throws the
following warning on avr32:
WARNING: at 900322e4 [verbose debug info unavailable]
Modules linked in:
CPU: 0 PID: 0 Comm: swapper Not tainted 3.12.0-rc2 #117
task: 901c3ecc ti: 901c0000 task.ti: 901c0000
PC is at cpu\_idle\_poll\_ctrl+0x1c/0x38
LR is at comparator\_mode+0x3e/0x40
pc : [<900322e4>] lr : [<90014882>] Not tainted
sp : 901c1f74 r12: 00000000 r11: 901c74a0
r10: 901d2510 r9 : 00000001 r8 : 901db4de
r7 : 901c74a0 r6 : 00000001 r5 : 00410020 r4 : 901db574
r3 : 00410024 r2 : 90206fe0 r1 : 00000000 r0 : 007f0000
Flags: qvnzc
Mode bits: hjmde....G
CPU Mode: Supervisor
Call trace:
[<90039ede>] clockevents\_set\_mode+0x16/0x2e
[<90039f00>] clockevents\_shutdown+0xa/0x1e
[<9003a078>] clockevents\_exchange\_device+0x58/0x70
[<9003a78c>] tick\_check\_new\_device+0x38/0x54
[<9003a1a2>] clockevents\_register\_device+0x32/0x90
[<900035c4>] time\_init+0xa8/0x108
[<90000520>] start\_kernel+0x128/0x23c
When the 'avr32\_comparator' clockevent device is registered,
the clockevent core sets the mode of that clockevent device
to CLOCK\_EVT\_MODE\_SHUTDOWN. Due to this, the 'comparator\_mode'
function calls the 'cpu\_idle\_poll\_ctrl' to disables idle poll.
This results in the aforementioned warning because the polling
is not enabled yet.
Change the code to only disable idle poll if it is enabled by
the same function to avoid the warning.
Signed-off-by: Gabor Juhos
Acked-by: Hans-Christian Egtvedt
Signed-off-by: Greg Kroah-Hartman
commit a3e15ec9f732f9dbdcf327dd50ec376bdef75728
Author: Nicolas Dichtel
Date: Tue Oct 1 18:05:00 2013 +0200
ip6tnl: allow to use rtnl ops on fb tunnel
[ Upstream commit bb8140947a247b9aa15652cc24dc555ebb0b64b0 ]
rtnl ops where introduced by c075b13098b3 ("ip6tnl: advertise tunnel param via
rtnl"), but I forget to assign rtnl ops to fb tunnels.
Now that it is done, we must remove the explicit call to
unregister\_netdevice\_queue(), because the fallback tunnel is added to the queue
in ip6\_tnl\_destroy\_tunnels() when checking rtnl\_link\_ops of all netdevices (this
is valid since commit 0bd8762824e7 ("ip6tnl: add x-netns support")).
Signed-off-by: Nicolas Dichtel
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 3783100374653e2e7fbdf68c710f5f9562880326
Author: Nicolas Dichtel
Date: Tue Oct 1 18:04:59 2013 +0200
sit: allow to use rtnl ops on fb tunnel
[ Upstream commit 205983c43700ac3a81e7625273a3fa83cd2759b5 ]
rtnl ops where introduced by ba3e3f50a0e5 ("sit: advertise tunnel param via
rtnl"), but I forget to assign rtnl ops to fb tunnels.
Now that it is done, we must remove the explicit call to
unregister\_netdevice\_queue(), because the fallback tunnel is added to the queue
in sit\_destroy\_tunnels() when checking rtnl\_link\_ops of all netdevices (this
is valid since commit 5e6700b3bf98 ("sit: add support of x-netns")).
Signed-off-by: Nicolas Dichtel
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 196eb57b30433a60f2a488e06dd46cf56999b15c
Author: Steffen Klassert
Date: Tue Oct 1 11:35:51 2013 +0200
ip\_tunnel\_core: Change \_\_skb\_push back to skb\_push
[ Upstream commit 78a3694d44a029242dd0830b34ab20ef1704be35 ]
Git commit 0e6fbc5b ("ip\_tunnels: extend iptunnel\_xmit()")
moved the IP header installation to iptunnel\_xmit() and
changed skb\_push() to \_\_skb\_push(). This makes possible
bugs hard to track down, so change it back to skb\_push().
Cc: Pravin Shelar
Signed-off-by: Steffen Klassert
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 0accb77476d803ae62f2519c04e32f9eb2495698
Author: Steffen Klassert
Date: Tue Oct 1 11:33:59 2013 +0200
ip\_tunnel: Fix a memory corruption in ip\_tunnel\_xmit
[ Upstream commit 3e08f4a72f689c6296d336c2aab4bddd60c93ae2 ]
We might extend the used aera of a skb beyond the total
headroom when we install the ipip header. Fix this by
calling skb\_cow\_head() unconditionally.
Bug was introduced with commit c544193214
("GRE: Refactor GRE tunneling code.")
Cc: Pravin Shelar
Signed-off-by: Steffen Klassert
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit eeb6df7a3b949813f257680802fda8dd4a3996ab
Author: Ricardo Ribalda
Date: Tue Oct 1 08:17:10 2013 +0200
ll\_temac: Reset dma descriptors indexes on ndo\_open
[ Upstream commit 7167cf0e8cd10287b7912b9ffcccd9616f382922 ]
The dma descriptors indexes are only initialized on the probe function.
If a packet is on the buffer when temac\_stop is called, the dma
descriptors indexes can be left on a incorrect state where no other
package can be sent.
So an interface could be left in an usable state after ifdow/ifup.
This patch makes sure that the descriptors indexes are in a proper
status when the device is open.
Signed-off-by: Ricardo Ribalda Delgado
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 6b13db47f96a5ec8705ea90fc209256f227ec1b1
Author: Salam Noureddine
Date: Sun Sep 29 13:41:34 2013 -0700
ipv6 mcast: use in6\_dev\_put in timer handlers instead of \_\_in6\_dev\_put
[ Upstream commit 9260d3e1013701aa814d10c8fc6a9f92bd17d643 ]
It is possible for the timer handlers to run after the call to
ipv6\_mc\_down so use in6\_dev\_put instead of \_\_in6\_dev\_put in the
handler function in order to do proper cleanup when the refcnt
reaches 0. Otherwise, the refcnt can reach zero without the
inet6\_dev being destroyed and we end up leaking a reference to
the net\_device and see messages like the following,
unregister\_netdevice: waiting for eth0 to become free. Usage count = 1
Tested on linux-3.4.43.
Signed-off-by: Salam Noureddine
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 6644f8f7fd8b580ba118d6403a670b2daab06e01
Author: Salam Noureddine
Date: Sun Sep 29 13:39:42 2013 -0700
ipv4 igmp: use in\_dev\_put in timer handlers instead of \_\_in\_dev\_put
[ Upstream commit e2401654dd0f5f3fb7a8d80dad9554d73d7ca394 ]
It is possible for the timer handlers to run after the call to
ip\_mc\_down so use in\_dev\_put instead of \_\_in\_dev\_put in the handler
function in order to do proper cleanup when the refcnt reaches 0.
Otherwise, the refcnt can reach zero without the in\_device being
destroyed and we end up leaking a reference to the net\_device and
see messages like the following,
unregister\_netdevice: waiting for eth0 to become free. Usage count = 1
Tested on linux-3.4.43.
Signed-off-by: Salam Noureddine
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit ea3ba3a33a3bc71bff6e6d58b3cfd1adbc94b2af
Author: Hannes Frederic Sowa
Date: Sun Sep 29 05:40:50 2013 +0200
ipv6: gre: correct calculation of max\_headroom
[ Upstream commit 3da812d860755925da890e8c713f2d2e2d7b1bae ]
gre\_hlen already accounts for sizeof(struct ipv6\_hdr) + gre header,
so initialize max\_headroom to zero. Otherwise the
if (encap\_limit >= 0) {
max\_headroom += 8;
mtu -= 8;
}
increments an uninitialized variable before max\_headroom was reset.
Found with coverity: 728539
Cc: Dmitry Kozlov
Signed-off-by: Hannes Frederic Sowa
Acked-by: Eric Dumazet
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 57451ff312bea094ecd5abdd983e910cbd8cfd24
Author: Neil Horman
Date: Fri Sep 27 12:22:15 2013 -0400
bonding: Fix broken promiscuity reference counting issue
[ Upstream commit 5a0068deb611109c5ba77358be533f763f395ee4 ]
Recently grabbed this report:
https://bugzilla.redhat.com/show\_bug.cgi?id=1005567
Of an issue in which the bonding driver, with an attached vlan encountered the
following errors when bond0 was taken down and back up:
dummy1: promiscuity touches roof, set promiscuity failed. promiscuity feature of
device might be broken.
The error occurs because, during \_\_bond\_release\_one, if we release our last
slave, we take on a random mac address and issue a NETDEV\_CHANGEADDR
notification. With an attached vlan, the vlan may see that the vlan and bond
mac address were in sync, but no longer are. This triggers a call to dev\_uc\_add
and dev\_set\_rx\_mode, which enables IFF\_PROMISC on the bond device. Then, when
we complete \_\_bond\_release\_one, we use the current state of the bond flags to
determine if we should decrement the promiscuity of the releasing slave. But
since the bond changed promiscuity state during the release operation, we
incorrectly decrement the slave promisc count when it wasn't in promiscuous mode
to begin with, causing the above error
Fix is pretty simple, just cache the bonding flags at the start of the function
and use those when determining the need to set promiscuity.
This is also needed for the ALLMULTI flag
Reported-by: Mark Wu
CC: Jay Vosburgh
CC: Andy Gospodarek
CC: Mark Wu
CC: "David S. Miller"
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 39f8795aaca352e482c1d0a0dff4be5feeef00e9
Author: Peter Korsgaard
Date: Mon Sep 30 23:28:20 2013 +0200
dm9601: fix IFF\_ALLMULTI handling
[ Upstream commit bf0ea6380724beb64f27a722dfc4b0edabff816e ]
Pass-all-multicast is controlled by bit 3 in RX control, not bit 2
(pass undersized frames).
Reported-by: Joseph Chang
Signed-off-by: Peter Korsgaard
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 55f08149b0ebdd3ed44f9b361829ca924c35e3a8
Author: Pravin B Shelar
Date: Wed Sep 25 09:57:47 2013 -0700
ip\_tunnel: Do not use stale inner\_iph pointer.
[ Upstream commit d4a71b155c12d0d429c6b69d94076d6d57e2a7a7 ]
While sending packet skb\_cow\_head() can change skb header which
invalidates inner\_iph pointer to skb header. Following patch
avoid using it. Found by code inspection.
This bug was introduced by commit 0e6fbc5b6c6218 (ip\_tunnels: extend
iptunnel\_xmit()).
Signed-off-by: Pravin B Shelar
Acked-by: Eric Dumazet
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 1d9aa1c2278f3c77af5c5c5132afe596a97f8d13
Author: Eric Dumazet
Date: Tue Sep 24 06:19:57 2013 -0700
net: net\_secret should not depend on TCP
[ Upstream commit 9a3bab6b05383f1e4c3716b3615500c51285959e ]
A host might need net\_secret[] and never open a single socket.
Problem added in commit aebda156a570782
("net: defer net\_secret[] initialization")
Based on prior patch from Hannes Frederic Sowa.
Reported-by: Hannes Frederic Sowa
Signed-off-by: Eric Dumazet
Acked-by: Hannes Frederic Sowa
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 3e459c8c1de3e9098e7fb0b97d5cb6121bef48a8
Author: Catalin(ux) M. BOIE
Date: Mon Sep 23 23:04:19 2013 +0300
IPv6 NAT: Do not drop DNATed 6to4/6rd packets
[ Upstream commit 7df37ff33dc122f7bd0614d707939fe84322d264 ]
When a router is doing DNAT for 6to4/6rd packets the latest
anti-spoofing commit 218774dc ("ipv6: add anti-spoofing checks for
6to4 and 6rd") will drop them because the IPv6 address embedded does
not match the IPv4 destination. This patch will allow them to pass by
testing if we have an address that matches on 6to4/6rd interface. I
have been hit by this problem using Fedora and IPV6TO4\_IPV4ADDR.
Also, log the dropped packets (with rate limit).
Signed-off-by: Catalin(ux) M. BOIE
Acked-by: Hannes Frederic Sowa
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 3c984a0f41f7cfffe2c44f3e66c1883270b07bfc
Author: Roger Luethi
Date: Sat Sep 21 14:24:11 2013 +0200
via-rhine: fix VLAN priority field (PCP, IEEE 802.1p)
[ Upstream commit 207070f5221e2a901d56a49df9cde47d9b716cd7 ]
Outgoing packets sent by via-rhine have their VLAN PCP field off by one
(when hardware acceleration is enabled). The TX descriptor expects only VID
and PCP (without a CFI/DEI bit).
Peter Boström noticed and reported the bug.
Signed-off-by: Roger Luethi
Cc: Peter Boström
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit e44294a4239f412272553f9c0a168e545b1f341b
Author: Hannes Frederic Sowa
Date: Sat Sep 21 06:27:00 2013 +0200
ipv6: udp packets following an UFO enqueued packet need also be handled by UFO
[ Upstream commit 2811ebac2521ceac84f2bdae402455baa6a7fb47 ]
In the following scenario the socket is corked:
If the first UDP packet is larger then the mtu we try to append it to the
write queue via ip6\_ufo\_append\_data. A following packet, which is smaller
than the mtu would be appended to the already queued up gso-skb via
plain ip6\_append\_data. This causes random memory corruptions.
In ip6\_ufo\_append\_data we also have to be careful to not queue up the
same skb multiple times. So setup the gso frame only when no first skb
is available.
This also fixes a shortcoming where we add the current packet's length to
cork->length but return early because of a packet > mtu with dontfrag set
(instead of sutracting it again).
Found with trinity.
Cc: YOSHIFUJI Hideaki
Signed-off-by: Hannes Frederic Sowa
Reported-by: Dmitry Vyukov
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit a1c008db75b819e29a62ff3fbeffe493bf7ece93
Author: Mikulas Patocka
Date: Fri Sep 20 13:53:22 2013 -0400
skge: fix invalid value passed to pci\_unmap\_sigle
[ Upstream commit 3361dc9538832a2a9150a8c722374ca844bf8dc8 ]
In my patch c194992cbe71c20bb3623a566af8d11b0bfaa721 ("skge: fix
broken driver") I didn't fix the skge bug correctly. The value of the
new mapping (not old) was passed to pci\_unmap\_single.
If we enable CONFIG\_DMA\_API\_DEBUG, it results in this warning:
WARNING: CPU: 0 PID: 0 at lib/dma-debug.c:986 check\_sync+0x4c4/0x580()
skge 0000:02:07.0: DMA-API: device driver tries to sync DMA memory it has
not allocated [device address=0x000000023a0096c0] [size=1536 bytes]
This patch makes the skge driver pass the correct value to
pci\_unmap\_single and fixes the warning. It copies the old descriptor to
on-stack variable "ee" and unmaps it if mapping of the new descriptor
succeeded.
This patch should be backported to 3.11-stable.
Signed-off-by: Mikulas Patocka
Reported-by: Francois Romieu
Tested-by: Mikulas Patocka
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit c66097370b7dcfc508dc5a7b8e52adc77fba9961
Author: Ansis Atteka
Date: Wed Sep 18 15:29:53 2013 -0700
ip: generate unique IP identificator if local fragmentation is allowed
[ Upstream commit 703133de331a7a7df47f31fb9de51dc6f68a9de8 ]
If local fragmentation is allowed, then ip\_select\_ident() and
ip\_select\_ident\_more() need to generate unique IDs to ensure
correct defragmentation on the peer.
For example, if IPsec (tunnel mode) has to encrypt large skbs
that have local\_df bit set, then all IP fragments that belonged
to different ESP datagrams would have used the same identificator.
If one of these IP fragments would get lost or reordered, then
peer could possibly stitch together wrong IP fragments that did
not belong to the same datagram. This would lead to a packet loss
or data corruption.
Signed-off-by: Ansis Atteka
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit b55876a61f91eb73dcbf3eae25923f13f12eb5ab
Author: Ansis Atteka
Date: Wed Sep 18 15:29:52 2013 -0700
ip: use ip\_hdr() in \_\_ip\_make\_skb() to retrieve IP header
[ Upstream commit 749154aa56b57652a282cbde57a57abc278d1205 ]
skb->data already points to IP header, but for the sake of
consistency we can also use ip\_hdr() to retrieve it.
Signed-off-by: Ansis Atteka
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 5ebe03a86dc7a7837b7451c4190c276356ff6de1
Author: Duan Jiong
Date: Wed Sep 18 20:03:27 2013 +0800
net:dccp: do not report ICMP redirects to user space
[ Upstream commit bd784a140712fd06674f2240eecfc4ccae421129 ]
DCCP shouldn't be setting sk\_err on redirects as it
isn't an error condition. it should be doing exactly
what tcp is doing and leaving the error handler without
touching the socket.
Signed-off-by: Duan Jiong
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 0f316d06ee3e54e9ea1ebe29668a40a7dd625648
Author: Antonio Quartulli
Date: Wed Sep 11 19:14:44 2013 +0200
batman-adv: set the TAG flag for the vid passed to BLA
[ Upstream commit 4c18c425b2d228415b635e97a64737d7f27c5536 ]
When receiving or sending a packet a packet on a VLAN, the
vid has to be marked with the TAG flag in order to make any
component in batman-adv understand that the packet is coming
from a really tagged network.
This fix the Bridge Loop Avoidance behaviour which was not
able to send announces over VLAN interfaces.
Introduced by 0b1da1765fdb00ca5d53bc95c9abc70dfc9aae5b
("batman-adv: change VID semantic in the BLA code")
Signed-off-by: Antonio Quartulli
Acked-by: Simon Wunderlich
Signed-off-by: Marek Lindner
Signed-off-by: Greg Kroah-Hartman
commit 936cac0cc8457c4d79b14244ceb050a7487edabe
Author: Sridhar Samudrala
Date: Tue Sep 17 12:12:40 2013 -0700
vxlan: Avoid creating fdb entry with NULL destination
[ Upstream commit 2936b6ab455433a5ad14c7a1d2473afe1fa3faa7 ]
Commit afbd8bae9c798c5cdbe4439d3a50536b5438247c
vxlan: add implicit fdb entry for default destination
creates an implicit fdb entry for default destination. This results
in an invalid fdb entry if default destination is not specified.
For ex:
ip link add vxlan1 type vxlan id 100
creates the following fdb entry
00:00:00:00:00:00 dev vxlan1 dst 0.0.0.0 self permanent
This patch fixes this issue by creating an fdb entry only if a
valid default destination is specified.
Signed-off-by: Sridhar Samudrala
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 6a5bb65640a56fbb23e578e2891eb3639458cabb
Author: Vineet Gupta
Date: Wed Sep 4 17:17:15 2013 +0530
ethernet/arc/arc\_emac: Fix huge delays in large file copies
[ Upstream commit 27082ee1b92f4d41e78b85fe40f6ab39673fba00 ]
copying large files to a NFS mounted host was taking absurdly large
time.
Turns out that TX BD reclaim had a sublte bug.
Loop starts off from @txbd\_dirty cursor and stops when it hits a BD
still in use by controller. However when it stops it needs to keep the
cursor at that very BD to resume scanning in next iteration. However it
was erroneously incrementing the cursor, causing the next scan(s) to
fail too, unless the BD chain was completely drained out.
[ARCLinux]$ ls -l -sh /disk/log.txt
17976 -rw-r--r-- 1 root root 17.5M Sep /disk/log.txt
========== Before =====================
[ARCLinux]$ time cp /disk/log.txt /mnt/.
real 31m 7.95s
user 0m 0.00s
sys 0m 0.10s
========== After =====================
[ARCLinux]$ time cp /disk/log.txt /mnt/.
real 0m 24.33s
user 0m 0.00s
sys 0m 0.19s
Signed-off-by: Vineet Gupta
Cc: Alexey Brodkin  (commit\_signer:3/4=75%)
Cc: "David S. Miller"  (commit\_signer:3/4=75%)
Cc: netdev@vger.kernel.org
Cc: linux-kernel@vger.kernel.org
Cc: arc-linux-dev@synopsys.com
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 6f4a38bf6dfeda68612299aaf7cb8f0e5f7e1245
Author: Daniel Borkmann
Date: Mon Sep 16 12:36:02 2013 +0200
net: sctp: rfc4443: do not report ICMP redirects to user space
[ Upstream commit 3f96a532113131d5a65ac9e00fc83cfa31b0295f ]
Adapt the same behaviour for SCTP as present in TCP for ICMP redirect
messages. For IPv6, RFC4443, section 2.4. says:
...
(e) An ICMPv6 error message MUST NOT be originated as a result of
receiving the following:
...
(e.2) An ICMPv6 redirect message [IPv6-DISC].
...
Therefore, do not report an error to user space, just invoke dst's redirect
callback and leave, same for IPv4 as done in TCP as well. The implication
w/o having this patch could be that the reception of such packets would
generate a poll notification and in worst case it could even tear down the
whole connection. Therefore, stop updating sk\_err on redirects.
Reported-by: Duan Jiong
Reported-by: Hannes Frederic Sowa
Suggested-by: Vlad Yasevich
Signed-off-by: Daniel Borkmann
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 63e80cdb250fe817e0d6dd101cb92f73d006de9a
Author: Ding Zhi
Date: Mon Sep 16 11:31:15 2013 +0200
ip6\_tunnels: raddr and laddr are inverted in nl msg
[ Upstream commit 0d2ede929f61783aebfb9228e4d32a0546ee4d23 ]
IFLA\_IPTUN\_LOCAL and IFLA\_IPTUN\_REMOTE were inverted.
Introduced by c075b13098b3 (ip6tnl: advertise tunnel param via rtnl).
Signed-off-by: Ding Zhi
Signed-off-by: Nicolas Dichtel
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 120edba7e46f928b7fd13b40ede405bbd6a1b290
Author: Hong Zhiguo
Date: Sat Sep 14 22:42:28 2013 +0800
bridge: fix NULL pointer deref of br\_port\_get\_rcu
[ Upstream commit 716ec052d2280d511e10e90ad54a86f5b5d4dcc2 ]
The NULL deref happens when br\_handle\_frame is called between these
2 lines of del\_nbp:
dev->priv\_flags &= ~IFF\_BRIDGE\_PORT;
/\* --> br\_handle\_frame is called at this time \*/
netdev\_rx\_handler\_unregister(dev);
In br\_handle\_frame the return of br\_port\_get\_rcu(dev) is dereferenced
without check but br\_port\_get\_rcu(dev) returns NULL if:
!(dev->priv\_flags & IFF\_BRIDGE\_PORT)
Eric Dumazet pointed out the testing of IFF\_BRIDGE\_PORT is not necessary
here since we're in rcu\_read\_lock and we have synchronize\_net() in
netdev\_rx\_handler\_unregister. So remove the testing of IFF\_BRIDGE\_PORT
and by the previous patch, make sure br\_port\_get\_rcu is called in
bridging code.
Signed-off-by: Hong Zhiguo
Acked-by: Eric Dumazet
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 6a0cacf7e1ddc3669019f260ab86f11024a73ce3
Author: Hong Zhiguo
Date: Sat Sep 14 22:42:27 2013 +0800
bridge: use br\_port\_get\_rtnl within rtnl lock
[ Upstream commit 1fb1754a8c70d69ab480763c423e0a74369c4a67 ]
current br\_port\_get\_rcu is problematic in bridging path
(NULL deref). Change these calls in netlink path first.
Signed-off-by: Hong Zhiguo
Acked-by: Eric Dumazet
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 0e308361d7ca0bf8b23fd472b90aae0fb10a1c32
Author: Herbert Xu
Date: Thu Sep 12 17:12:05 2013 +1000
bridge: Clamp forward\_delay when enabling STP
[ Upstream commit be4f154d5ef0ca147ab6bcd38857a774133f5450 ]
At some point limits were added to forward\_delay. However, the
limits are only enforced when STP is enabled. This created a
scenario where you could have a value outside the allowed range
while STP is disabled, which then stuck around even after STP
is enabled.
This patch fixes this by clamping the value when we enable STP.
I had to move the locking around a bit to ensure that there is
no window where someone could insert a value outside the range
while we're in the middle of enabling STP.
Signed-off-by: Herbert Xu
Cheers,
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 2e122eb8248a02f941b1e53a43e4e6431f41b5cc
Author: Chris Healy
Date: Wed Sep 11 21:37:47 2013 -0700
resubmit bridge: fix message\_age\_timer calculation
[ Upstream commit 9a0620133ccce9dd35c00a96405c8d80938c2cc0 ]
This changes the message\_age\_timer calculation to use the BPDU's max age as
opposed to the local bridge's max age. This is in accordance with section
8.6.2.3.2 Step 2 of the 802.1D-1998 sprecification.
With the current implementation, when running with very large bridge
diameters, convergance will not always occur even if a root bridge is
configured to have a longer max age.
Tested successfully on bridge diameters of ~200.
Signed-off-by: Chris Healy
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 1bc5d1065ee4ed31bc6632d707118e5d7bafdf57
Author: David Vrabel
Date: Wed Sep 11 14:52:48 2013 +0100
xen-netback: count number required slots for an skb more carefully
[ Upstream commit 6e43fc04a6bc357d260583b8440882f28069207f ]
When a VM is providing an iSCSI target and the LUN is used by the
backend domain, the generated skbs for direct I/O writes to the disk
have large, multi-page skb->data but no frags.
With some lengths and starting offsets, xen\_netbk\_count\_skb\_slots()
would be one short because the simple calculation of
DIV\_ROUND\_UP(skb\_headlen(), PAGE\_SIZE) was not accounting for the
decisions made by start\_new\_rx\_buffer() which does not guarantee
responses are fully packed.
For example, a skb with length < 2 pages but which spans 3 pages would
be counted as requiring 2 slots but would actually use 3 slots.
skb->data:
| 1111|222222222222|3333 |
Fully packed, this would need 2 slots:
|111122222222|22223333 |
But because the 2nd page wholy fits into a slot it is not split across
slots and goes into a slot of its own:
|1111 |222222222222|3333 |
Miscounting the number of slots means netback may push more responses
than the number of available requests. This will cause the frontend
to get very confused and report "Too many frags/slots". The frontend
never recovers and will eventually BUG.
Fix this by counting the number of required slots more carefully. In
xen\_netbk\_count\_skb\_slots(), more closely follow the algorithm used by
xen\_netbk\_gop\_skb() by introducing xen\_netbk\_count\_frag\_slots() which
is the dry-run equivalent of netbk\_gop\_frag\_copy().
Signed-off-by: David Vrabel
Acked-by: Ian Campbell
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit dca97a6264d985986ee3a38ed01df8cfa6b40288
Author: Daniel Borkmann
Date: Wed Sep 11 16:58:36 2013 +0200
net: sctp: fix ipv6 ipsec encryption bug in sctp\_v6\_xmit
[ Upstream commit 95ee62083cb6453e056562d91f597552021e6ae7 ]
Alan Chester reported an issue with IPv6 on SCTP that IPsec traffic is not
being encrypted, whereas on IPv4 it is. Setting up an AH + ESP transport
does not seem to have the desired effect:
SCTP + IPv4:
22:14:20.809645 IP (tos 0x2,ECT(0), ttl 64, id 0, offset 0, flags [DF], proto AH (51), length 116)
192.168.0.2 > 192.168.0.5: AH(spi=0x00000042,sumlen=16,seq=0x1): ESP(spi=0x00000044,seq=0x1), length 72
22:14:20.813270 IP (tos 0x2,ECT(0), ttl 64, id 0, offset 0, flags [DF], proto AH (51), length 340)
192.168.0.5 > 192.168.0.2: AH(spi=0x00000043,sumlen=16,seq=0x1):
SCTP + IPv6:
22:31:19.215029 IP6 (class 0x02, hlim 64, next-header SCTP (132) payload length: 364)
fe80::222:15ff:fe87:7fc.3333 > fe80::92e6:baff:fe0d:5a54.36767: sctp
1) [INIT ACK] [init tag: 747759530] [rwnd: 62464] [OS: 10] [MIS: 10]
Moreover, Alan says:
This problem was seen with both Racoon and Racoon2. Other people have seen
this with OpenSwan. When IPsec is configured to encrypt all upper layer
protocols the SCTP connection does not initialize. After using Wireshark to
follow packets, this is because the SCTP packet leaves Box A unencrypted and
Box B believes all upper layer protocols are to be encrypted so it drops
this packet, causing the SCTP connection to fail to initialize. When IPsec
is configured to encrypt just SCTP, the SCTP packets are observed unencrypted.
In fact, using `socat sctp6-listen:3333 -` on one end and transferring "plaintext"
string on the other end, results in cleartext on the wire where SCTP eventually
does not report any errors, thus in the latter case that Alan reports, the
non-paranoid user might think he's communicating over an encrypted transport on
SCTP although he's not (tcpdump ... -X):
...
0x0030: 5d70 8e1a 0003 001a 177d eb6c 0000 0000 ]p.......}.l....
0x0040: 0000 0000 706c 6169 6e74 6578 740a 0000 ....plaintext...
Only in /proc/net/xfrm\_stat we can see XfrmInTmplMismatch increasing on the
receiver side. Initial follow-up analysis from Alan's bug report was done by
Alexey Dobriyan. Also thanks to Vlad Yasevich for feedback on this.
SCTP has its own implementation of sctp\_v6\_xmit() not calling inet6\_csk\_xmit().
This has the implication that it probably never really got updated along with
changes in inet6\_csk\_xmit() and therefore does not seem to invoke xfrm handlers.
SCTP's IPv4 xmit however, properly calls ip\_queue\_xmit() to do the work. Since
a call to inet6\_csk\_xmit() would solve this problem, but result in unecessary
route lookups, let us just use the cached flowi6 instead that we got through
sctp\_v6\_get\_dst(). Since all SCTP packets are being sent through sctp\_packet\_transmit(),
we do the route lookup / flow caching in sctp\_transport\_route(), hold it in
tp->dst and skb\_dst\_set() right after that. If we would alter fl6->daddr in
sctp\_v6\_xmit() to np->opt->srcrt, we possibly could run into the same effect
of not having xfrm layer pick it up, hence, use fl6\_update\_dst() in sctp\_v6\_get\_dst()
instead to get the correct source routed dst entry, which we assign to the skb.
Also source address routing example from 625034113 ("sctp: fix sctp to work with
ipv6 source address routing") still works with this patch! Nevertheless, in RFC5095
it is actually 'recommended' to not use that anyway due to traffic amplification [1].
So it seems we're not supposed to do that anyway in sctp\_v6\_xmit(). Moreover, if
we overwrite the flow destination here, the lower IPv6 layer will be unable to
put the correct destination address into IP header, as routing header is added in
ipv6\_push\_nfrag\_opts() but then probably with wrong final destination. Things aside,
result of this patch is that we do not have any XfrmInTmplMismatch increase plus on
the wire with this patch it now looks like:
SCTP + IPv6:
08:17:47.074080 IP6 2620:52:0:102f:7a2b:cbff:fe27:1b0a > 2620:52:0:102f:213:72ff:fe32:7eba:
AH(spi=0x00005fb4,seq=0x1): ESP(spi=0x00005fb5,seq=0x1), length 72
08:17:47.074264 IP6 2620:52:0:102f:213:72ff:fe32:7eba > 2620:52:0:102f:7a2b:cbff:fe27:1b0a:
AH(spi=0x00003d54,seq=0x1): ESP(spi=0x00003d55,seq=0x1), length 296
This fixes Kernel Bugzilla 24412. This security issue seems to be present since
2.6.18 kernels. Lets just hope some big passive adversary in the wild didn't have
its fun with that. lksctp-tools IPv6 regression test suite passes as well with
this patch.
[1] http://www.secdev.org/conf/IPv6\_RH\_security-csw07.pdf
Reported-by: Alan Chester
Reported-by: Alexey Dobriyan
Signed-off-by: Daniel Borkmann
Cc: Steffen Klassert
Cc: Hannes Frederic Sowa
Acked-by: Vlad Yasevich
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 6fc265f7a86d81e052508d03da555188f5882c3e
Author: Jason Wang
Date: Wed Sep 11 18:09:48 2013 +0800
tuntap: correctly handle error in tun\_set\_iff()
[ Upstream commit 662ca437e714caaab855b12415d6ffd815985bc0 ]
Commit c8d68e6be1c3b242f1c598595830890b65cea64a
(tuntap: multiqueue support) only call free\_netdev() on error in
tun\_set\_iff(). This causes several issues:
- memory of tun security were leaked
- use after free since the flow gc timer was not deleted and the tfile
were not detached
This patch solves the above issues.
Reported-by: Wannes Rombouts
Cc: Michael S. Tsirkin
Signed-off-by: Jason Wang
Acked-by: Michael S. Tsirkin
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 8ef8f14f527d12332fc459b0cabb6424872cb3fc
Author: Nikolay Aleksandrov
Date: Thu Sep 19 15:02:35 2013 +0200
netpoll: fix NULL pointer dereference in netpoll\_cleanup
[ Upstream commit d0fe8c888b1fd1a2f84b9962cabcb98a70988aec ]
I've been hitting a NULL ptr deref while using netconsole because the
np->dev check and the pointer manipulation in netpoll\_cleanup are done
without rtnl and the following sequence happens when having a netconsole
over a vlan and we remove the vlan while disabling the netconsole:
CPU 1 CPU2
removes vlan and calls the notifier
enters store\_enabled(), calls
netdev\_cleanup which checks np->dev
and then waits for rtnl
executes the netconsole netdev
release notifier making np->dev
== NULL and releases rtnl
continues to dereference a member of
np->dev which at this point is == NULL
Signed-off-by: Nikolay Aleksandrov
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit f6dbceef21f13dc27e9b51a2ff372072fee962a4
Author: Sonic Zhang
Date: Wed Sep 11 11:31:53 2013 +0800
netpoll: Should handle ETH\_P\_ARP other than ETH\_P\_IP in netpoll\_neigh\_reply
[ Upstream commit b0dd663b60944a3ce86430fa35549fb37968bda0 ]
The received ARP request type in the Ethernet packet head is ETH\_P\_ARP other than ETH\_P\_IP.
[ Bug introduced by commit b7394d2429c198b1da3d46ac39192e891029ec0f
("netpoll: prepare for ipv6") ]
Signed-off-by: Sonic Zhang
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit b3483fd035fc4bb3e902fbbca11f5eec7dfa947e
Author: Francois Romieu
Date: Sun Sep 8 01:15:35 2013 +0200
r8169: enforce RX\_MULTI\_EN for the 8168f.
[ Upstream commit 3ced8c955e74d319f3e3997f7169c79d524dfd06 ]
Same narrative as eb2dc35d99028b698cdedba4f5522bc43e576bd2 ("r8169: RxConfig
hack for the 8168evl.") regarding AMD IOMMU errors.
RTL\_GIGA\_MAC\_VER\_36 - 8168f as well - has not been reported to behave the
same.
Tested-by: David R
Tested-by: Frédéric Leroy
Cc: Hayes Wang
Signed-off-by: Francois Romieu
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 122f032845078092adcb98b5e12a7cd94b08b5bc
Author: Vimalkumar
Date: Tue Sep 10 17:36:37 2013 -0700
net\_sched: htb: fix a typo in htb\_change\_class()
[ Upstream commit f3ad857e3da1abaea780dc892b592cd86c541c52 ]
Fix a typo added in commit 56b765b79 ("htb: improved accuracy at high
rates")
cbuffer should not be a copy of buffer.
Signed-off-by: Vimalkumar
Signed-off-by: Eric Dumazet
Cc: Jesper Dangaard Brouer
Cc: Jiri Pirko
Reviewed-by: Jiri Pirko
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 56fee7fee4bfbcb812eb719d1937eda8ddabc059
Author: Eric Dumazet
Date: Thu Sep 26 08:44:06 2013 -0700
net: flow\_dissector: fix thoff for IPPROTO\_AH
[ Upstream commit b86783587b3d1d552326d955acee37eac48800f1 ]
In commit 8ed781668dd49 ("flow\_keys: include thoff into flow\_keys for
later usage"), we missed that existing code was using nhoff as a
temporary variable that could not always contain transport header
offset.
This is not a problem for TCP/UDP because port offset (@poff)
is 0 for these protocols.
Signed-off-by: Eric Dumazet
Cc: Daniel Borkmann
Cc: Nikolay Aleksandrov
Acked-by: Nikolay Aleksandrov
Acked-by: Daniel Borkmann
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit bfd16631035163f9ceeda50d544b0ac7c29838d8
Author: Eric Dumazet
Date: Sat Sep 7 12:02:57 2013 -0700
net: fix multiqueue selection
[ Upstream commit 50d1784ee4683f073c0362ee360bfae7a3333d6c ]
commit 416186fbf8c5b4e4465 ("net: Split core bits of netdev\_pick\_tx
into \_\_netdev\_pick\_tx") added a bug that disables caching of queue
index in the socket.
This is the source of packet reorders for TCP flows, and
again this is happening more often when using FQ pacing.
Old code was doing
if (queue\_index != old\_index)
sk\_tx\_queue\_set(sk, queue\_index);
Alexander renamed the variables but forgot to change sk\_tx\_queue\_set()
2nd parameter.
if (queue\_index != new\_index)
sk\_tx\_queue\_set(sk, queue\_index);
This means we store -1 over and over in sk->sk\_tx\_queue\_mapping
Signed-off-by: Eric Dumazet
Cc: Alexander Duyck
Acked-by: Alexander Duyck
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 6d88c9f48083a2c76347ca4390362f0bfb8c2bd2
Author: Daniel Borkmann
Date: Sat Sep 7 20:51:21 2013 +0200
net: sctp: fix smatch warning in sctp\_send\_asconf\_del\_ip
[ Upstream commit 88362ad8f9a6cea787420b57cc27ccacef000dbe ]
This was originally reported in [1] and posted by Neil Horman [2], he said:
Fix up a missed null pointer check in the asconf code. If we don't find
a local address, but we pass in an address length of more than 1, we may
dereference a NULL laddr pointer. Currently this can't happen, as the only
users of the function pass in the value 1 as the addrcnt parameter, but
its not hot path, and it doesn't hurt to check for NULL should that ever
be the case.
The callpath from sctp\_asconf\_mgmt() looks okay. But this could be triggered
from sctp\_setsockopt\_bindx() call with SCTP\_BINDX\_REM\_ADDR and addrcnt > 1
while passing all possible addresses from the bind list to SCTP\_BINDX\_REM\_ADDR
so that we do \*not\* find a single address in the association's bind address
list that is not in the packed array of addresses. If this happens when we
have an established association with ASCONF-capable peers, then we could get
a NULL pointer dereference as we only check for laddr == NULL && addrcnt == 1
and call later sctp\_make\_asconf\_update\_ip() with NULL laddr.
BUT: this actually won't happen as sctp\_bindx\_rem() will catch such a case
and return with an error earlier. As this is incredably unintuitive and error
prone, add a check to catch at least future bugs here. As Neil says, its not
hot path. Introduced by 8a07eb0a5 ("sctp: Add ASCONF operation on the
single-homed host").
[1] http://www.spinics.net/lists/linux-sctp/msg02132.html
[2] http://www.spinics.net/lists/linux-sctp/msg02133.html
Reported-by: Dan Carpenter
Signed-off-by: Neil Horman
Signed-off-by: Daniel Borkmann
Cc: Michio Honda
Acked-By: Neil Horman
Acked-by: Vlad Yasevich
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 7ee57d2c33149913e581a9408946cc0b53cf5a9d
Author: Daniel Borkmann
Date: Sat Sep 7 16:44:59 2013 +0200
net: sctp: fix bug in sctp\_poll for SOCK\_SELECT\_ERR\_QUEUE
[ Upstream commit a0fb05d1aef0f5df936f80b726d1b3bfd4275f95 ]
If we do not add braces around ...
mask |= POLLERR |
sock\_flag(sk, SOCK\_SELECT\_ERR\_QUEUE) ? POLLPRI : 0;
... then this condition always evaluates to true as POLLERR is
defined as 8 and binary or'd with whatever result comes out of
sock\_flag(). Hence instead of (X | Y) ? A : B, transform it into
X | (Y ? A : B). Unfortunatelty, commit 8facd5fb73 ("net: fix
smatch warnings inside datagram\_poll") forgot about SCTP. :-(
Introduced by 7d4c04fc170 ("net: add option to enable error queue
packets waking select").
Signed-off-by: Daniel Borkmann
Cc: Jacob Keller
Acked-by: Neil Horman
Acked-by: Vlad Yasevich
Acked-by: Jacob Keller
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 12a5dc7cb582e1dd3cac0b82b43b9c26a049e794
Author: Daniel Borkmann
Date: Sat Sep 7 15:13:20 2013 +0200
net: fib: fib6\_add: fix potential NULL pointer dereference
[ Upstream commit ae7b4e1f213aa659aedf9c6ecad0bf5f0476e1e2 ]
When the kernel is compiled with CONFIG\_IPV6\_SUBTREES, and we return
with an error in fn = fib6\_add\_1(), then error codes are encoded into
the return pointer e.g. ERR\_PTR(-ENOENT). In such an error case, we
write the error code into err and jump to out, hence enter the if(err)
condition. Now, if CONFIG\_IPV6\_SUBTREES is enabled, we check for:
if (pn != fn && pn->leaf == rt)
...
if (pn != fn && !pn->leaf && !(pn->fn\_flags & RTN\_RTINFO))
...
Since pn is NULL and fn is f.e. ERR\_PTR(-ENOENT), then pn != fn
evaluates to true and causes a NULL-pointer dereference on further
checks on pn. Fix it, by setting both NULL in error case, so that
pn != fn already evaluates to false and no further dereference
takes place.
This was first correctly implemented in 4a287eba2 ("IPv6 routing,
NLM\_F\_\* flag support: REPLACE and EXCL flags support, warn about
missing CREATE flag"), but the bug got later on introduced by
188c517a0 ("ipv6: return errno pointers consistently for fib6\_add\_1()").
Signed-off-by: Daniel Borkmann
Cc: Lin Ming
Cc: Matti Vaittinen
Cc: Hannes Frederic Sowa
Acked-by: Hannes Frederic Sowa
Acked-by: Matti Vaittinen
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 825e186e6a5cf14a539c55a5eca2cf17f442e57a
Author: Jiri Pirko
Date: Fri Sep 6 16:02:25 2013 +0200
ipv6/exthdrs: accept tlv which includes only padding
[ Upstream commit 8112b1fe071be01a28a774ed55909e6f4b29712d ]
In rfc4942 and rfc2460 I cannot find anything which would implicate to
drop packets which have only padding in tlv.
Current behaviour breaks TAHI Test v6LC.1.2.6.
Problem was intruduced in:
9b905fe6843 "ipv6/exthdrs: strict Pad1 and PadN check"
Signed-off-by: Jiri Pirko
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 893da29ecf2fd0aceb8d54ba8b3075e26728a33d
Author: Dave Jones
Date: Thu Sep 5 13:43:34 2013 -0400
tcp: Add missing braces to do\_tcp\_setsockopt
[ Upstream commit e2e5c4c07caf810d7849658dca42f598b3938e21 ]
Signed-off-by: Dave Jones
Acked-by: Neal Cardwell
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit a0a686e2f93fab512b074fa334794d27c90e9898
Author: Dave Jones
Date: Thu Sep 5 00:11:19 2013 -0400
caif: Add missing braces to multiline if in cfctrl\_linkup\_request
[ Upstream commit 0c1db731bfcf3a9fd6c58132134f8b0f423552f0 ]
The indentation here implies this was meant to be a multi-line if.
Introduced several years back in commit c85c2951d4da1236e32f1858db418221e624aba5
("caif: Handle dev\_queue\_xmit errors.")
Signed-off-by: Dave Jones
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 971610ebfb945c194f828c98b55040606aee2367
Author: Sergei Shtylyov
Date: Wed Sep 4 02:41:27 2013 +0400
sh\_eth: fix napi\_{en|dis}able() calls racing against interrupts
[ Upstream commit d2779e99468fd83ef1493c34f3803fec9aad8345 ]
While implementing NAPI for the driver, I overlooked the race conditions where
interrupt handler might have called napi\_schedule\_prep() before napi\_enable()
was called or after napi\_disable() was called. If RX interrupt happens, this
would cause the endless interrupts and messages like:
sh-eth eth0: ignoring interrupt, status 0x00040000, mask 0x01ff009f.
The interrupt wouldn't even be masked by the kernel eventually since the handler
would return IRQ\_HANDLED all the time.
As a fix, move napi\_enable() call before request\_irq() call and napi\_disable()
call after free\_irq() call.
Signed-off-by: Sergei Shtylyov
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 3ff9ad9d2be9c139d55adab0604d3914c0ba97a9
Author: Jiri Kosina
Date: Mon Jul 22 17:11:44 2013 +0200
HID: fix unused rsize usage
commit bc197eedef1ae082ec662c64c3f4aa302821fb7a upstream.
27ce4050 ("HID: fix data access in implement()") by mistake removed
a setting of buffer size in hidp. Fix that by putting it back.
Reported-by: kbuild test robot
Signed-off-by: Jiri Kosina
Signed-off-by: Greg Kroah-Hartman
commit fe6c9b48ebc920ff21c10c50ab2729440c734254
Author: Jiri Kosina
Date: Wed Jul 10 19:56:27 2013 +0200
HID: fix data access in implement()
commit 27ce405039bfe6d3f4143415c638f56a3df77dca upstream.
implement() is setting bytes in LE data stream. In case the data is not
aligned to 64bits, it reads past the allocated buffer. It doesn't really
change any value there (it's properly bitmasked), but in case that this
read past the boundary hits a page boundary, pagefault happens when
accessing 64bits of 'x' in implement(), and kernel oopses.
This happens much more often when numbered reports are in use, as the
initial 8bit skip in the buffer makes the whole process work on values
which are not aligned to 64bits.
This problem dates back to attempts in 2005 and 2006 to make implement()
and extract() as generic as possible, and even back then the problem
was realized by Adam Kroperlin, but falsely assumed to be impossible
to cause any harm:
http://www.mail-archive.com/linux-usb-devel@lists.sourceforge.net/msg47690.html
I have made several attempts at fixing it "on the spot" directly in
implement(), but the results were horrible; the special casing for processing
last 64bit chunk and switching to different math makes it unreadable mess.
I therefore took a path to allocate a few bytes more which will never make
it into final report, but are there as a cushion for all the 64bit math
operations happening in implement() and extract().
All callers of hid\_output\_report() are converted at the same time to allocate
the buffer by newly introduced hid\_alloc\_report\_buf() helper.
Bruno noticed that the whole raw\_size test can be dropped as well, as
hid\_alloc\_report\_buf() makes sure that the buffer is always of a proper
size.
Reviewed-by: Benjamin Tissoires
Acked-by: Gustavo Padovan
Signed-off-by: Jiri Kosina
Signed-off-by: Greg Kroah-Hartman
commit 3cd1fa8b0cd14f25f0a6cfb60db3251f2d361095
Author: Dan Carpenter
Date: Tue Sep 24 15:27:45 2013 -0700
cciss: fix info leak in cciss\_ioctl32\_passthru()
commit 58f09e00ae095e46ef9edfcf3a5fd9ccdfad065e upstream.
The arg64 struct has a hole after ->buf\_size which isn't cleared. Or if
any of the calls to copy\_from\_user() fail then that would cause an
information leak as well.
This was assigned CVE-2013-2147.
Signed-off-by: Dan Carpenter
Acked-by: Mike Miller
Signed-off-by: Andrew Morton
Signed-off-by: Linus Torvalds
Signed-off-by: Greg Kroah-Hartman
commit d19ac1faca409e8451c143941c42ad50afa16ae8
Author: Dan Carpenter
Date: Tue Sep 24 15:27:44 2013 -0700
cpqarray: fix info leak in ida\_locked\_ioctl()
commit 627aad1c01da6f881e7f98d71fd928ca0c316b1a upstream.
The pciinfo struct has a two byte hole after ->dev\_fn so stack
information could be leaked to the user.
This was assigned CVE-2013-2147.
Signed-off-by: Dan Carpenter
Acked-by: Mike Miller
Signed-off-by: Andrew Morton
Signed-off-by: Linus Torvalds
Signed-off-by: Greg Kroah-Hartman
commit ba3460519e393d0f212403ae3535305f423d84ed
Author: J. Bruce Fields
Date: Thu Aug 15 16:55:26 2013 -0400
nfsd4: fix leak of inode reference on delegation failure
commit bf7bd3e98be5c74813bee6ad496139fb0a011b3b upstream.
This fixes a regression from 68a3396178e6688ad7367202cdf0af8ed03c8727
"nfsd4: shut down more of delegation earlier".
After that commit, nfs4\_set\_delegation() failures result in
nfs4\_put\_delegation being called, but nfs4\_put\_delegation doesn't free
the nfs4\_file that has already been set by alloc\_init\_deleg().
This can result in an oops on later unmounting the exported filesystem.
Note also delaying the fi\_had\_conflict check we're able to return a
better error (hence give 4.1 clients a better idea why the delegation
failed; though note CONFLICT isn't an exact match here, as that's
supposed to indicate a current conflict, but all we know here is that
there was one recently).
Reported-by: Toralf Förster
Tested-by: Toralf Förster
Signed-off-by: J. Bruce Fields
Signed-off-by: Greg Kroah-Hartman


=== Content from www.redhat.com_9a81feba_20250126_034543.html ===


[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

**We're sorry but cve-details doesn't work properly without JavaScript enabled. Please enable it to continue.**

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from rhn.redhat.com_a3f4ab3a_20250124_215334.html ===

Note: Our personalized web services require that your browser be enabled for JavaScript and cookies

[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

[Red Hat Product Errata](/errata)
RHSA-2014:0100 - Security Advisory

Issued:
2014-01-28
Updated:
2014-01-28
# RHSA-2014:0100 - Security Advisory

* [Overview](#overview)
* [Updated Packages](#packages)

## Synopsis

Important: kernel-rt security and bug fix update

## Type/Severity

Security Advisory: Important

## Red Hat Insights patch analysis

Identify and remediate systems affected by this advisory.

[View affected systems](https://console.redhat.com/insights/patch/advisories/RHSA-2014%3A0100)

## Topic

Updated kernel-rt packages that fix multiple security issues and several
bugs are now available for Red Hat Enterprise MRG 2.4.

The Red Hat Security Response Team has rated this update as having
important security impact. Common Vulnerability Scoring System (CVSS) base
scores, which give detailed severity ratings, are available for each
vulnerability from the CVE links in the References section.

## Description

The kernel-rt packages contain the Linux kernel, the core of any Linux
operating system.

* A flaw was found in the way the Linux kernel's TCP/IP protocol suite

implementation handled sending of certain UDP packets over sockets that
used the UDP\_CORK option when the UDP Fragmentation Offload (UFO) feature
was enabled on the output device. A local, unprivileged user could use this
flaw to cause a denial of service or, potentially, escalate their
privileges on the system. (CVE-2013-4470, Important)

* A flaw was found in the way the perf\_trace\_event\_perm() function in the

Linux kernel checked permissions for the function tracer functionality.
An unprivileged local user could use this flaw to enable function tracing
and cause a denial of service on the system. (CVE-2013-2930, Moderate)

* A flaw was found in the way the net\_ctl\_permissions() function in the

Linux kernel checked access permissions. A local, unprivileged user could
potentially use this flaw to access certain files in /proc/sys/net
regardless of the underlying file system permissions. (CVE-2013-4270,
Moderate)

* A flaw was found in the way the Linux kernel's Adaptec RAID controller

(aacraid) checked permissions of compat IOCTLs. A local attacker could use
this flaw to bypass intended security restrictions. (CVE-2013-6383,
Moderate)

* A flaw was found in the way the get\_dumpable() function return value was

interpreted in the ptrace subsystem of the Linux kernel. When
'fs.suid\_dumpable' was set to 2, a local, unprivileged local user could
use this flaw to bypass intended ptrace restrictions and obtain
potentially sensitive information. (CVE-2013-2929, Low)

* An invalid pointer dereference flaw was found in the Marvell 8xxx

Libertas WLAN (libertas) driver in the Linux kernel. A local user able to
write to a file that is provided by the libertas driver and located on the
debug file system (debugfs) could use this flaw to crash the system. Note:
The debugfs file system must be mounted locally to exploit this issue.
It is not mounted by default. (CVE-2013-6378, Low)

* A NULL pointer dereference flaw was found in the Linux kernel's IPv6

source address-based routing implementation. A local attacker who has the
CAP\_NET\_ADMIN capability could use this flaw to crash the system.
(CVE-2013-6431, Low)

Red Hat would like to thank Hannes Frederic Sowa for reporting
CVE-2013-4470. The CVE-2013-4270 issue was discovered by Miroslav Vadkerti
of Red Hat.

This update also fixes multiple bugs. Documentation for these changes will
be available shortly from the Technical Notes document linked to in the
References section.

Users should upgrade to these updated packages, which upgrade the kernel-rt
kernel to version kernel-rt-3.8.13-rt27, correct these issues, and fix the
bugs noted in the Red Hat Enterprise MRG 2 Technical Notes. The system must
be rebooted for this update to take effect.

## Solution

Before applying this update, make sure all previously released errata
relevant to your system have been applied.

This update is available via the Red Hat Network. Details on how to use the
Red Hat Network to apply this update are available at
<https://access.redhat.com/site/articles/11258>

To install kernel packages manually, use "rpm -ivh [package]". Do not use
"rpm -Uvh" as that will remove the running kernel binaries from your
system. You may use "rpm -e" to remove old kernels after determining that
the new kernel functions properly on your system.

## Affected Products

* MRG Realtime 2 x86\_64

## Fixes

* [BZ - 1016729](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=1016729)
  - Apply IB performance patches to 3.8 realtime kernel
* [BZ - 1023477](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=1023477)
  - CVE-2013-4470 Kernel: net: memory corruption with UDP\_CORK and UFO
* [BZ - 1027752](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=1027752)
  - CVE-2013-4270 kernel: net: permissions flaw in /proc/sys/net
* [BZ - 1027778](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=1027778)
  - CVE-2013-2930 kernel: perf/ftrace: insufficient check in perf\_trace\_event\_perm()
* [BZ - 1028148](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=1028148)
  - CVE-2013-2929 kernel: exec/ptrace: get\_dumpable() incorrect tests
* [BZ - 1033530](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=1033530)
  - CVE-2013-6383 Kernel: AACRAID Driver compat IOCTL missing capability check
* [BZ - 1033578](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=1033578)
  - CVE-2013-6378 Kernel: drivers: libertas: potential oops in debugfs
* [BZ - 1037770](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=1037770)
  - Recent -rt kernels compiled without CONFIG\_NETFILTER\_XT\_MATCH\_ADDRTYPE
* [BZ - 1039054](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=1039054)
  - CVE-2013-6431 kernel: net: fib: fib6\_add: potential NULL pointer dereference
* [BZ - 1039743](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=1039743)
  - kernel: panic when unloading ip6\_tunnel module

## CVEs

* [CVE-2013-4470](https://www.redhat.com/security/data/cve/CVE-2013-4470.html)
* [CVE-2013-6378](https://www.redhat.com/security/data/cve/CVE-2013-6378.html)
* [CVE-2013-6383](https://www.redhat.com/security/data/cve/CVE-2013-6383.html)
* [CVE-2013-2930](https://www.redhat.com/security/data/cve/CVE-2013-2930.html)
* [CVE-2013-2929](https://www.redhat.com/security/data/cve/CVE-2013-2929.html)
* [CVE-2013-4270](https://www.redhat.com/security/data/cve/CVE-2013-4270.html)
* [CVE-2013-6431](https://www.redhat.com/security/data/cve/CVE-2013-6431.html)

## References

* <https://access.redhat.com/security/updates/classification/#important>
* <https://access.redhat.com/site/documentation/en-US/Red_Hat_Enterprise_MRG/2/html/Technical_Notes/RHSA-2014-0100.html>

**Note:**
More recent versions of these packages may be available.
Click a package name for more details.
## MRG Realtime 2

| SRPM | |
| --- | --- |
| kernel-rt-3.8.13-rt27.33.el6rt.src.rpm | SHA-256: 58f2573facc586ca63e07f6acacb555ab697f69328bc0bf837b2a842e2532729 |
| x86\_64 | |
| kernel-rt-3.8.13-rt27.33.el6rt.x86\_64.rpm | SHA-256: 7e7c8c0995914e378e38a1b2d7ab6d6f8062b2792a5671b51faa2afde5433348 |
| kernel-rt-debug-3.8.13-rt27.33.el6rt.x86\_64.rpm | SHA-256: b1de1846b717e17fcd896f120f6126700db6964a8c2678b941282aa0f383d8ee |
| kernel-rt-debug-debuginfo-3.8.13-rt27.33.el6rt.x86\_64.rpm | SHA-256: af40ed828dafb1f69ae3ec5e07a0363f393287937b1aa8f5222d3d58f57637c5 |
| kernel-rt-debug-devel-3.8.13-rt27.33.el6rt.x86\_64.rpm | SHA-256: 885dbec6c83af3b7b6023cbe1ac659c3f0f744e2e2969642dbe3a3f7f050f132 |
| kernel-rt-debuginfo-3.8.13-rt27.33.el6rt.x86\_64.rpm | SHA-256: 4516d5572b6191f33e4515b8d927612b6dd541a60cb8ea4a1317a5ad3d1c384a |
| kernel-rt-debuginfo-common-x86\_64-3.8.13-rt27.33.el6rt.x86\_64.rpm | SHA-256: 0769e076cd91642eb053c0f2f4ff3df842cbdf23a1923834f397466522f4efe8 |
| kernel-rt-devel-3.8.13-rt27.33.el6rt.x86\_64.rpm | SHA-256: 51cfb9c8db441dc0a7cb9a261de0b235e3001f5870dd973dc4c214e312cf5843 |
| kernel-rt-doc-3.8.13-rt27.33.el6rt.noarch.rpm | SHA-256: c6894699520fa74b6ae140fa0fc34d008450f587202bc8b4d4d19f3a9ad7cad3 |
| kernel-rt-firmware-3.8.13-rt27.33.el6rt.noarch.rpm | SHA-256: 03591397c98407025afad2063b2efff5a1205006c999af33827bfe65c1c5ebfc |
| kernel-rt-trace-3.8.13-rt27.33.el6rt.x86\_64.rpm | SHA-256: 9fc8c9f5ea5525cc8ac430ed3f93b5a77158c8501766dacaf956af934f0ef3d9 |
| kernel-rt-trace-debuginfo-3.8.13-rt27.33.el6rt.x86\_64.rpm | SHA-256: 299f4403b2c214d5e81e82d6c3bc1e1a530cca645ded300dfebd46561aada5f1 |
| kernel-rt-trace-devel-3.8.13-rt27.33.el6rt.x86\_64.rpm | SHA-256: e86bf59081024305dad08a8e9864811e99e552ee8e2653e9a5875f73ff4209ab |
| kernel-rt-vanilla-3.8.13-rt27.33.el6rt.x86\_64.rpm | SHA-256: 183100f1080e6b925401b3f780948f9f990812b56122f916b63d513279671192 |
| kernel-rt-vanilla-debuginfo-3.8.13-rt27.33.el6rt.x86\_64.rpm | SHA-256: 9182b3c8b0306475125f12e703ef1d3119d15153a94ce026029817173f4ab5c0 |
| kernel-rt-vanilla-devel-3.8.13-rt27.33.el6rt.x86\_64.rpm | SHA-256: 5f564c4485f560f231c48c46f43800736737167a02d8ce3da700c184c4a22051 |

The Red Hat security contact is secalert@redhat.com.
More contact details at <https://access.redhat.com/security/team/contact/>.

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from bugzilla.redhat.com_a9fe1197_20250126_034542.html ===


* Login
  + Log in using an SSO provider:- [Fedora Account System](saml2_login.cgi?idp=Fedora%20Account%20System&target=show_bug.cgi%3Fid%3D1027752)
    - [Red Hat Associate](saml2_login.cgi?idp=Red%20Hat%20Associate&target=show_bug.cgi%3Fid%3D1027752)
    - [Red Hat Customer](saml2_login.cgi?idp=Red%20Hat%20Customer&target=show_bug.cgi%3Fid%3D1027752)+ Login using a Red Hat Bugzilla account
  + Forgot Password
  + [Create an Account](createaccount.cgi)

Red Hat Bugzilla – Bug 1027752

* [Home](./)
* [New](enter_bug.cgi)
* Search
  + [Simple Search](query.cgi?format=specific)
  + [Advanced Search](query.cgi?format=advanced)
* My Links
  + [Browse](describecomponents.cgi)
  + [Requests](request.cgi)
  + Reports
  + Current State
    - [Search](query.cgi)
    - [Tabular reports](query.cgi?format=report-table)
    - [Graphical reports](query.cgi?format=report-graph)
    - [Duplicates](duplicates.cgi)
  + Other Reports
    - [User Changes](https://bugzilla.redhat.com/page.cgi?id=user_activity.html)
  + Plotly Reports
    - [Bug Status](https://bugzilla.redhat.com/page.cgi?id=bug_status.html)
    - [Bug Severity](https://bugzilla.redhat.com/page.cgi?id=bug_severity.html)
    - [Non-Defaults](https://bugzilla.redhat.com/page.cgi?id=non_defaults.html)
* [Product Dashboard](page.cgi?id=productdashboard.html)

- Help
  * [Page Help!](docs/en/html/using/understanding.html)
  * [Bug Writing Guidelines](page.cgi?id=bug-writing.html)
  * [What's new](page.cgi?id=whats-new.html)
  * [Browser Support Policy](https://access.redhat.com/help/browsers)
  * [5.0.4.rh103 Release notes](page.cgi?id=release-notes.html)
  * [FAQ](page.cgi?id=faq.html)
  * [Guides index](docs/en/html/index.html)
  * [User guide](docs/en/html/using/index.html)
  * [Web Services](docs/en/html/integrating/api/Bugzilla/WebService/Bug.html)
  * [Contact](page.cgi?id=redhat/contact.html)
  * [Legal](page.cgi?id=terms-conditions.html)
- [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")

This site requires JavaScript to be enabled to function correctly, please enable it.

[**Bug 1027752**](show_bug.cgi?id=1027752)
(CVE-2013-4270)
- [CVE-2013-4270](https://access.redhat.com/security/cve/CVE-2013-4270) kernel: net: permissions flaw in /proc/sys/net

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
CVE-2013-4270 kernel: net: permissions flaw in /proc/sys/net

| | [Keywords](describekeywords.cgi): | Security | | --- | --- | | [Status](page.cgi?id=fields.html#bug_status): | CLOSED ERRATA | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | CVE-2013-4270 | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components. Select a Classification to narrow down this list.") | Security Response | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Other | | [Component:](describecomponents.cgi?product=Security Response "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | vulnerability | | [Sub Component:](page.cgi?id=fields.html#rh_sub_components "The sub component of a specific component") | --- | | [Version:](page.cgi?id=fields.html#version "The version field defines the version of the software the bug was found in.") | unspecified | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | All | | [OS:](page.cgi?id=fields.html#op_sys "The operating system the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Linux | | [Priority:](page.cgi?id=fields.html#priority) | medium | | [Severity:](page.cgi?id=fields.html#bug_severity) | medium | | [Target Milestone:](page.cgi?id=fields.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | --- | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Red Hat Product Security | | [QA Contact:](page.cgi?id=fields.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") |  | | [Docs Contact:](page.cgi?id=fields.html#docs_contact "The person responsible for documenting once the bug has been resolved.") |  | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | [Depends On:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") | [987055](show_bug.cgi?id=987055) [1027755](show_bug.cgi?id=1027755) [1027757](show_bug.cgi?id=1027757) | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") | [1027758](show_bug.cgi?id=1027758) | | TreeView+ | [depends on](buglist.cgi?bug_id=1027752&bug_id_type=anddependson&format=tvp) / [blocked](buglist.cgi?bug_id=1027752&bug_id_type=andblocked&format=tvp&tvp_dir=blocked) |  | |  | | [Reported:](page.cgi?id=fields.html#reporter) | 2013-11-07 11:28 UTC by Petr Matousek | | --- | --- | | [Modified:](page.cgi?id=fields.html#modified) | 2023-05-12 00:56 UTC ([History](show_activity.cgi?id=1027752)) | | [CC List:](page.cgi?id=fields.html#cclist) | 30 users (show)  agordeev anton aquini bhu davej dhoward esammons fhrbata gansalmon iboverma itamar jforbes jkacur jkurik jonathan jross jwboyer kernel-maint kernel-mgr lgoncalv lwang madhu.chinakonda matt mcressma npajkovs pholasek plougher rt-maint rvrbovsk williams | | Fixed In Version: |  | | | Doc Type: | Bug Fix | | | Doc Text: |  | | | Clone Of: |  | | | Environment: |  | | | Last Closed: | 2014-01-28 18:33:07 UTC | | | Embargoed: |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | [(Terms of Use)](page.cgi?id=terms-conditions.html) | | | --- | --- | --- | |  | | |    Links | System | ID | Private | Priority | Status | Summary | Last Updated | | Red Hat Product Errata | [RHSA-2014:0100](https://access.redhat.com/errata/RHSA-2014%3A0100) | 0 | normal | SHIPPED\_LIVE | Important: kernel-rt security and bug fix update | 2014-01-28 22:38:58 UTC | |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=1027752#c0)  Petr Matousek    2013-11-07 11:28:48 UTC  ``` A flaw was found in the way net_ctl_permissions() function in the Linux kernel checked permissions.  As a result, an unprivileged local user could potentially use this flaw to access files in /proc/sys/net in a way that he would otherwise be unable to.  Introduced by:  <http://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/commit/?id=cff109768b2d9c03095848f4cd4b0754117262aa>  Fixed by:  <http://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/commit/?id=2433c8f094a008895e66f25bd1773cdb01c91d01>  Acknowledgements:  This issue was discovered by Miroslav Vadkerti of Red Hat.   ```  [Comment 2](show_bug.cgi?id=1027752#c2)  Petr Matousek    2013-11-07 11:34:48 UTC  ``` Statement:  This issue does not affect the version of the kernel package as shipped with Red Hat Enterprise Linux 5 and 6.   ```  [Comment 3](show_bug.cgi?id=1027752#c3)  errata-xmlrpc    2014-01-28 17:40:29 UTC  ``` This issue has been addressed in following products:    MRG for RHEL-6 v.2  Via RHSA-2014:0100 <https://rhn.redhat.com/errata/RHSA-2014-0100.html>   ``` |  |
| --- | --- |

---

| Note You need to [log in](show_bug.cgi?id=1027752&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. |
| --- |

---

[Privacy](page.cgi?id=redhat/privacy.html)
[Contact](page.cgi?id=redhat/contact.html)
[FAQ](page.cgi?id=faq.html)
[Legal](page.cgi?id=terms-conditions.html)



=== Content from bugzilla.redhat.com_5d34238d_20250124_215348.html ===


* Login
  + Log in using an SSO provider:- [Fedora Account System](saml2_login.cgi?idp=Fedora%20Account%20System&target=show_bug.cgi%3Fid%3D1027752)
    - [Red Hat Associate](saml2_login.cgi?idp=Red%20Hat%20Associate&target=show_bug.cgi%3Fid%3D1027752)
    - [Red Hat Customer](saml2_login.cgi?idp=Red%20Hat%20Customer&target=show_bug.cgi%3Fid%3D1027752)+ Login using a Red Hat Bugzilla account
  + Forgot Password
  + [Create an Account](createaccount.cgi)

Red Hat Bugzilla – Bug 1027752

* [Home](./)
* [New](enter_bug.cgi)
* Search
  + [Simple Search](query.cgi?format=specific)
  + [Advanced Search](query.cgi?format=advanced)
* My Links
  + [Browse](describecomponents.cgi)
  + [Requests](request.cgi)
  + Reports
  + Current State
    - [Search](query.cgi)
    - [Tabular reports](query.cgi?format=report-table)
    - [Graphical reports](query.cgi?format=report-graph)
    - [Duplicates](duplicates.cgi)
  + Other Reports
    - [User Changes](https://bugzilla.redhat.com/page.cgi?id=user_activity.html)
  + Plotly Reports
    - [Bug Status](https://bugzilla.redhat.com/page.cgi?id=bug_status.html)
    - [Bug Severity](https://bugzilla.redhat.com/page.cgi?id=bug_severity.html)
    - [Non-Defaults](https://bugzilla.redhat.com/page.cgi?id=non_defaults.html)
* [Product Dashboard](page.cgi?id=productdashboard.html)

- Help
  * [Page Help!](docs/en/html/using/understanding.html)
  * [Bug Writing Guidelines](page.cgi?id=bug-writing.html)
  * [What's new](page.cgi?id=whats-new.html)
  * [Browser Support Policy](https://access.redhat.com/help/browsers)
  * [5.0.4.rh103 Release notes](page.cgi?id=release-notes.html)
  * [FAQ](page.cgi?id=faq.html)
  * [Guides index](docs/en/html/index.html)
  * [User guide](docs/en/html/using/index.html)
  * [Web Services](docs/en/html/integrating/api/Bugzilla/WebService/Bug.html)
  * [Contact](page.cgi?id=redhat/contact.html)
  * [Legal](page.cgi?id=terms-conditions.html)
- [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")

This site requires JavaScript to be enabled to function correctly, please enable it.

[**Bug 1027752**](show_bug.cgi?id=1027752)
(CVE-2013-4270)
- [CVE-2013-4270](https://access.redhat.com/security/cve/CVE-2013-4270) kernel: net: permissions flaw in /proc/sys/net

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
CVE-2013-4270 kernel: net: permissions flaw in /proc/sys/net

| | [Keywords](describekeywords.cgi): | Security | | --- | --- | | [Status](page.cgi?id=fields.html#bug_status): | CLOSED ERRATA | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | CVE-2013-4270 | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components. Select a Classification to narrow down this list.") | Security Response | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Other | | [Component:](describecomponents.cgi?product=Security Response "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | vulnerability | | [Sub Component:](page.cgi?id=fields.html#rh_sub_components "The sub component of a specific component") | --- | | [Version:](page.cgi?id=fields.html#version "The version field defines the version of the software the bug was found in.") | unspecified | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | All | | [OS:](page.cgi?id=fields.html#op_sys "The operating system the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Linux | | [Priority:](page.cgi?id=fields.html#priority) | medium | | [Severity:](page.cgi?id=fields.html#bug_severity) | medium | | [Target Milestone:](page.cgi?id=fields.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | --- | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Red Hat Product Security | | [QA Contact:](page.cgi?id=fields.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") |  | | [Docs Contact:](page.cgi?id=fields.html#docs_contact "The person responsible for documenting once the bug has been resolved.") |  | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | [Depends On:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") | [987055](show_bug.cgi?id=987055) [1027755](show_bug.cgi?id=1027755) [1027757](show_bug.cgi?id=1027757) | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") | [1027758](show_bug.cgi?id=1027758) | | TreeView+ | [depends on](buglist.cgi?bug_id=1027752&bug_id_type=anddependson&format=tvp) / [blocked](buglist.cgi?bug_id=1027752&bug_id_type=andblocked&format=tvp&tvp_dir=blocked) |  | |  | | [Reported:](page.cgi?id=fields.html#reporter) | 2013-11-07 11:28 UTC by Petr Matousek | | --- | --- | | [Modified:](page.cgi?id=fields.html#modified) | 2023-05-12 00:56 UTC ([History](show_activity.cgi?id=1027752)) | | [CC List:](page.cgi?id=fields.html#cclist) | 30 users (show)  agordeev anton aquini bhu davej dhoward esammons fhrbata gansalmon iboverma itamar jforbes jkacur jkurik jonathan jross jwboyer kernel-maint kernel-mgr lgoncalv lwang madhu.chinakonda matt mcressma npajkovs pholasek plougher rt-maint rvrbovsk williams | | Fixed In Version: |  | | | Doc Type: | Bug Fix | | | Doc Text: |  | | | Clone Of: |  | | | Environment: |  | | | Last Closed: | 2014-01-28 18:33:07 UTC | | | Embargoed: |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | [(Terms of Use)](page.cgi?id=terms-conditions.html) | | | --- | --- | --- | |  | | |    Links | System | ID | Private | Priority | Status | Summary | Last Updated | | Red Hat Product Errata | [RHSA-2014:0100](https://access.redhat.com/errata/RHSA-2014%3A0100) | 0 | normal | SHIPPED\_LIVE | Important: kernel-rt security and bug fix update | 2014-01-28 22:38:58 UTC | |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=1027752#c0)  Petr Matousek    2013-11-07 11:28:48 UTC  ``` A flaw was found in the way net_ctl_permissions() function in the Linux kernel checked permissions.  As a result, an unprivileged local user could potentially use this flaw to access files in /proc/sys/net in a way that he would otherwise be unable to.  Introduced by:  <http://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/commit/?id=cff109768b2d9c03095848f4cd4b0754117262aa>  Fixed by:  <http://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/commit/?id=2433c8f094a008895e66f25bd1773cdb01c91d01>  Acknowledgements:  This issue was discovered by Miroslav Vadkerti of Red Hat.   ```  [Comment 2](show_bug.cgi?id=1027752#c2)  Petr Matousek    2013-11-07 11:34:48 UTC  ``` Statement:  This issue does not affect the version of the kernel package as shipped with Red Hat Enterprise Linux 5 and 6.   ```  [Comment 3](show_bug.cgi?id=1027752#c3)  errata-xmlrpc    2014-01-28 17:40:29 UTC  ``` This issue has been addressed in following products:    MRG for RHEL-6 v.2  Via RHSA-2014:0100 <https://rhn.redhat.com/errata/RHSA-2014-0100.html>   ``` |  |
| --- | --- |

---

| Note You need to [log in](show_bug.cgi?id=1027752&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. |
| --- |

---

[Privacy](page.cgi?id=redhat/privacy.html)
[Contact](page.cgi?id=redhat/contact.html)
[FAQ](page.cgi?id=faq.html)
[Legal](page.cgi?id=terms-conditions.html)



=== Content from www.ubuntu.com_6cc9eeed_20250124_215346.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# USN-2049-1: Linux kernel vulnerabilities

7 December 2013

Several security issues were fixed in the kernel.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Releases

* [Ubuntu 13.10](/security/notices?release=saucy)

## Packages

* [linux](/security/cves?package=linux) - Linux kernel

## Details

Miroslav Vadkerti discovered a flaw in how the permissions for network

sysctls are handled in the Linux kernel. An unprivileged local user could

exploit this flaw to have privileged access to files in /proc/sys/net/.

([CVE-2013-4270](/security/CVE-2013-4270))

A flaw was discovered in the Linux kernel's dm snapshot facility. A remote

authenticated user could exploit this flaw to obtain sensitive information

or modify/corrupt data. ([CVE-2013-4299](/security/CVE-2013-4299))

Wannes Rombouts reported a vulnerability in the networking tuntap interface

of the Linux kernel. A local user with the CAP\_NET\_ADMIN capability could

leverage this flaw to gain full admin privileges. ([CVE-2013-4343](/security/CVE-2013-4343))

Alan Chester reported a flaw in the IPv6 Stream Control Transmission

Protocol (SCTP) of the Linux kernel. A remote attacker could exploit this

flaw to obtain sensitive information by sniffing network traffic.

([CVE-2013-4350](/security/CVE-2013-4350))

Dmitry Vyukov reported a flaw in the Linux kernel's handling of IPv6 UDP

Fragmentation Offload (UFO) processing. A remote attacker could leverage

this flaw to cause a denial of service (system crash). ([CVE-2013-4387](/security/CVE-2013-4387))

Hannes Frederic Sowa discovered a flaw in the Linux kernel's UDP

Fragmentation Offload (UFO). An unprivileged local user could exploit this

flaw to cause a denial of service (system crash) or possibly gain

administrative privileges. ([CVE-2013-4470](/security/CVE-2013-4470))

A flaw was discovered in the Linux kernel's fib6 error-code encoding for

IPv6. A local user with the CAT\_NET\_ADMIN capability could exploit this

flaw to cause a denial of service (system crash). ([CVE-2013-6431](/security/CVE-2013-6431))

Evan Huus reported a buffer overflow in the Linux kernel's radiotap header

parsing. A remote attacker could cause a denial of service (buffer over-

read) via a specially crafted header. ([CVE-2013-7027](/security/CVE-2013-7027))

An information leak was discovered in the Linux kernel's SIOCWANDEV ioctl

call. A local user with the CAP\_NET\_ADMIN capability could exploit this

flaw to obtain potentially sensitive information from kernel memory.

([CVE-2014-1444](/security/CVE-2014-1444))

An information leak was discovered in the wanxl ioctl function the Linux

kernel. A local user could exploit this flaw to obtain potentially

sensitive information from kernel memory. ([CVE-2014-1445](/security/CVE-2014-1445))

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Update instructions

The problem can be corrected by updating your system to the following package versions:

##### Ubuntu 13.10

* [linux-image-3.11.0-14-generic](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [3.11.0-14.21](https://launchpad.net/ubuntu/%2Bsource/linux/3.11.0-14.21)
* [linux-image-3.11.0-14-generic-lpae](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [3.11.0-14.21](https://launchpad.net/ubuntu/%2Bsource/linux/3.11.0-14.21)

After a standard system update you need to reboot your computer to make

all the necessary changes.

ATTENTION: Due to an unavoidable ABI change the kernel updates have

been given a new version number, which requires you to recompile and

reinstall all third party kernel modules you might have installed. If

you use linux-restricted-modules, you have to update that package as

well to get modules which work with the new kernel version. Unless you

manually uninstalled the standard kernel metapackages (e.g. linux-generic,

linux-server, linux-powerpc), a standard system upgrade will automatically

perform this as well.

## References

* [CVE-2013-4270](/security/CVE-2013-4270)
* [CVE-2013-4299](/security/CVE-2013-4299)
* [CVE-2013-4343](/security/CVE-2013-4343)
* [CVE-2013-4350](/security/CVE-2013-4350)
* [CVE-2013-4387](/security/CVE-2013-4387)
* [CVE-2013-4470](/security/CVE-2013-4470)
* [CVE-2013-6431](/security/CVE-2013-6431)
* [CVE-2013-7027](/security/CVE-2013-7027)
* [CVE-2014-1444](/security/CVE-2014-1444)
* [CVE-2014-1445](/security/CVE-2014-1445)

## Related notices

* [USN-2023-1](/security/notices/USN-2023-1)
* [USN-2020-1](/security/notices/USN-2020-1)
* [USN-2046-1](/security/notices/USN-2046-1)
* [USN-2041-1](/security/notices/USN-2041-1)
* [USN-2067-1](/security/notices/USN-2067-1)
* [USN-2042-1](/security/notices/USN-2042-1)
* [USN-2066-1](/security/notices/USN-2066-1)
* [USN-2045-1](/security/notices/USN-2045-1)
* [USN-2043-1](/security/notices/USN-2043-1)
* [USN-2016-1](/security/notices/USN-2016-1)
* [USN-2040-1](/security/notices/USN-2040-1)
* [USN-2015-1](/security/notices/USN-2015-1)
* [USN-2050-1](/security/notices/USN-2050-1)
* [USN-2044-1](/security/notices/USN-2044-1)
* [USN-2019-1](/security/notices/USN-2019-1)
* [USN-2038-1](/security/notices/USN-2038-1)
* [USN-2021-1](/security/notices/USN-2021-1)
* [USN-2022-1](/security/notices/USN-2022-1)
* [USN-2039-1](/security/notices/USN-2039-1)
* [USN-2024-1](/security/notices/USN-2024-1)
* [USN-2234-1](/security/notices/USN-2234-1)
* [USN-2233-1](/security/notices/USN-2233-1)
* [USN-2069-1](/security/notices/USN-2069-1)
* [USN-2073-1](/security/notices/USN-2073-1)
* [USN-2071-1](/security/notices/USN-2071-1)
* [USN-2129-1](/security/notices/USN-2129-1)
* [USN-2128-1](/security/notices/USN-2128-1)
* [USN-2074-1](/security/notices/USN-2074-1)
* [USN-2076-1](/security/notices/USN-2076-1)
* [USN-2068-1](/security/notices/USN-2068-1)
* [USN-2072-1](/security/notices/USN-2072-1)

### Join the discussion

* [Ubuntu security updates mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened)
* [Security announcements mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-security-announce)

### Need help with your security needs?

Ubuntu Pro provides up to ten-year security coverage for over 23,000 open-source packages within the Ubuntu Main and Universe repositories.

[Talk to an expert to find out what would work best for you](/contact-us/form?product=pro)

### Further reading

* *Loading...*

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page


