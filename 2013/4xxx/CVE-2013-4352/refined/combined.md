=== Content from lists.apache.org_ad504cfc_20250125_211627.html ===


[![Foal logo](images/logo.png)](./)

* ![Display Settings](images/cog.png "Display Settings")
  **Email display mode:**

  ---

   Modern rendering

   Legacy rendering
* ![Logged out](images/user_loggedout.png "Not logged in")

This site requires JavaScript enabled. Please enable it.



=== Content from lists.apache.org_4a1fa2fc_20250125_211624.html ===


[![Foal logo](images/logo.png)](./)

* ![Display Settings](images/cog.png "Display Settings")
  **Email display mode:**

  ---

   Modern rendering

   Legacy rendering
* ![Logged out](images/user_loggedout.png "Not logged in")

This site requires JavaScript enabled. Please enable it.



=== Content from lists.apache.org_319f42b6_20250125_211622.html ===


[![Foal logo](images/logo.png)](./)

* ![Display Settings](images/cog.png "Display Settings")
  **Email display mode:**

  ---

   Modern rendering

   Legacy rendering
* ![Logged out](images/user_loggedout.png "Not logged in")

This site requires JavaScript enabled. Please enable it.



=== Content from httpd.apache.org_e52639eb_20250125_211618.html ===

[![](/images/httpd_logo_wide_new.png)](/)
[![](https://www.apache.org/images/SupportApache-small.png)](https://www.apache.org/foundation/contributing.html)

# Essentials[¶](#essentials "Permanent link")

* [Download!](/download.cgi)
* [About](/ABOUT_APACHE.html)
* [License](https://www.apache.org/licenses/)
* [FAQ](https://wiki.apache.org/httpd/FAQ)
* [Security Reports](/security_report.html)

# Source Repositories[¶](#source-repositories "Permanent link")

* [General Information](/dev/devnotes.html)
* [Trunk](https://svn.apache.org/viewvc/httpd/httpd/trunk/)
* [2.4](https://svn.apache.org/viewvc/httpd/httpd/branches/2.4.x/)

# [Documentation](/docs/)[¶](#documentation "Permanent link")

* [Version 2.4](/docs/2.4/)
* [Trunk (dev)](/docs/trunk/)
* [Wiki](https://wiki.apache.org/httpd/)

# [Get Involved](/contribute/)[¶](#get-involved "Permanent link")

* [Mailing Lists](/lists.html)
* [Bug Reports](/bug_report.html)
* [Developer Info](/dev/)
* [User Support](/support.html)

# Subprojects[¶](#subprojects "Permanent link")

* [Docs](/docs-project/)
* [Test](/test/)
* [Flood](/test/flood/)
* [libapreq](/apreq/)
* [Modules](/modules)
* [mod\_fcgid](/mod_fcgid/)
* [mod\_ftp](/mod_ftp/)

# Related Projects[¶](#related-projects "Permanent link")

* [Apache Traffic Server](https://trafficserver.apache.org/)
* [Apache Traffic Control](https://trafficcontrol.apache.org/)
* [Tomcat](https://tomcat.apache.org/)
* [APR](https://apr.apache.org/)
* [mod\_perl](https://perl.apache.org/)

# [Miscellaneous](/info/)[¶](#miscellaneous "Permanent link")

* [Contributors](/contributors/)
* [Thanks!](https://www.apache.org/foundation/thanks.html)
* [Sponsorship](https://www.apache.org/foundation/sponsorship.html)

# Apache HTTP Server 2.4 vulnerabilities

This page lists all security vulnerabilities fixed in released versions of Apache HTTP Server 2.4. Each vulnerability is given a security [impact rating](/security/impact_levels.html) by the Apache security team - please note that this rating may well vary from platform to platform. We also list the versions the flaw is known to affect, and where a flaw has not been verified list the version with a question mark.

Please note that if a vulnerability is shown below as being fixed in a "-dev" release then this means that a fix has been applied to the development source tree and will be part of an upcoming full release.

Please send comments or corrections for these vulnerabilities to the [Security Team](/security_report.html).

*The initial GA release, Apache httpd 2.4.1, includes fixes for all vulnerabilities which have been resolved in Apache httpd 2.2.22 and all older releases. Consult the [Apache httpd 2.2 vulnerabilities list](vulnerabilities_22.html) for more information.*

# Fixed in Apache HTTP Server 2.4.62

### important: Apache HTTP Server: source code disclosure with handlers configured via AddType ([CVE-2024-40725](https://www.cve.org/CVERecord?id=CVE-2024-40725))

A partial fix for CVE-2024-39884 in the core of Apache HTTP Server 2.4.61 ignores some use of the legacy content-type based configuration of handlers. "AddType" and similar configuration, under some circumstances where files are requested indirectly, result in source code disclosure of local content. For example, PHP scripts may be served instead of interpreted.

Users are recommended to upgrade to version 2.4.62, which fixes this issue.

| Reported to security team | 2024-07-09 |
| --- | --- |
| fixed by r1919249 in 2.4.x | 2024-07-15 |
| Update 2.4.62 released | 2024-07-17 |
| Affects | 2.4.60 through 2.4.61 |

### important: Apache HTTP Server: SSRF with mod\_rewrite in server/vhost context on Windows ([CVE-2024-40898](https://www.cve.org/CVERecord?id=CVE-2024-40898))

SSRF in Apache HTTP Server on Windows with mod\_rewrite in server/vhost context, allows to potentially leak NTLM hashes to a malicious server via SSRF and malicious requests.

Users are recommended to upgrade to version 2.4.62 which fixes this issue.

Acknowledgements:

* finder: Smi1e (DBAPPSecurity Ltd.)
* finder: xiaojunjie (DBAPPSecurity Ltd.)

| Reported to security team | 2024-07-12 |
| --- | --- |
| fixed by r1919248 in 2.4.x | 2024-07-15 |
| Update 2.4.62 released | 2024-07-17 |
| Affects | 2.4.0 through 2.4.61 |

# Fixed in Apache HTTP Server 2.4.61

### important: Apache HTTP Server: source code disclosure with handlers configured via AddType ([CVE-2024-39884](https://www.cve.org/CVERecord?id=CVE-2024-39884))

A regression in the core of Apache HTTP Server 2.4.60 ignores some use of the legacy content-type based configuration of handlers. "AddType" and similar configuration, under some circumstances where files are requested indirectly, result in source code disclosure of local content. For example, PHP scripts may be served instead of interpreted.

Users are recommended to upgrade to version 2.4.61, which fixes this issue.

| Reported to security team | 2024-07-01 |
| --- | --- |
| fixed by r1918839 in 2.4.x | 2024-07-03 |
| Update 2.4.61 released | 2024-07-03 |
| Affects | 2.4.60 |

# Fixed in Apache HTTP Server 2.4.60

### low: Apache HTTP Server: DoS by Null pointer in websocket over HTTP/2 ([CVE-2024-36387](https://www.cve.org/CVERecord?id=CVE-2024-36387))

Serving WebSocket protocol upgrades over a HTTP/2 connection could result in a Null Pointer dereference, leading to a crash of the server process, degrading performance.

Acknowledgements: finder: Marc Stern (<marc.stern@approach-cyber.com>)

| fixed in r1918003 in trunk | 2024-05-27 |
| --- | --- |
| fixed by r1918557 in 2.4.x | 2024-07-01 |
| Update 2.4.60 released | 2024-07-01 |
| Affects | 2.4.55 through 2.4.59 |

### important: Apache HTTP Server on WIndows UNC SSRF ([CVE-2024-38472](https://www.cve.org/CVERecord?id=CVE-2024-38472))

SSRF in Apache HTTP Server on Windows allows to potentially leak NTLM hashes to a malicious server via SSRF and malicious requests or content

Users are recommended to upgrade to version 2.4.60 which fixes this issue. Note: Existing configurations that access UNC paths will have to configure new directive "UNCList" to allow access during request processing.

Acknowledgements: finder: Orange Tsai (@orange\_8361) from DEVCORE

| Reported to security team | 2024-04-01 |
| --- | --- |
| fixed by r1918558 in 2.4.x | 2024-07-01 |
| Update 2.4.60 released | 2024-07-01 |
| Affects | 2.4.0 through 2.4.59 |

### moderate: Apache HTTP Server proxy encoding problem ([CVE-2024-38473](https://www.cve.org/CVERecord?id=CVE-2024-38473))

Encoding problem in mod\_proxy in Apache HTTP Server 2.4.59 and earlier allows request URLs with incorrect encoding to be sent to backend services, potentially bypassing authentication via crafted requests. This affects configurations where mechanisms other than ProxyPass/ProxyPassMatch or RewriteRule with the 'P' flag are used to configure a request to be proxied, such as SetHandler or inadvertent proxying via CVE-2024-39573. Note that these alternate mechanisms may be used within .htaccess.

Users are recommended to upgrade to version 2.4.60, which fixes this issue.

Acknowledgements: finder: Orange Tsai (@orange\_8361) from DEVCORE

| Reported to security team | 2024-04-01 |
| --- | --- |
| fixed by r1918559, r1918666, r1918600, r1918625, r1918668 in 2.4.x | 2024-07-01 |
| Update 2.4.60 released | 2024-07-01 |
| Affects | 2.4.0 through 2.4.59 |

### important: Apache HTTP Server weakness with encoded question marks in backreferences ([CVE-2024-38474](https://www.cve.org/CVERecord?id=CVE-2024-38474))

Substitution encoding issue in mod\_rewrite in Apache HTTP Server 2.4.59 and earlier allows attacker to execute scripts in directories permitted by the configuration but not directly reachable by any URL or source disclosure of scripts meant to only to be executed as CGI.

Users are recommended to upgrade to version 2.4.60, which fixes this issue.

Some RewriteRules that capture and substitute unsafely will now fail unless rewrite flag "UnsafeAllow3F" is specified.

Acknowledgements: finder: Orange Tsai (@orange\_8361) from DEVCORE

| Reported to security team | 2024-04-01 |
| --- | --- |
| fixed by r1918561 in 2.4.x | 2024-07-01 |
| Update 2.4.60 released | 2024-07-01 |
| Affects | 2.4.0 through 2.4.59 |

### important: Apache HTTP Server weakness in mod\_rewrite when first segment of substitution matches filesystem path. ([CVE-2024-38475](https://www.cve.org/CVERecord?id=CVE-2024-38475))

Improper escaping of output in mod\_rewrite in Apache HTTP Server 2.4.59 and earlier allows an attacker to map URLs to filesystem locations that are permitted to be served by the server but are not intentionally/directly reachable by any URL, resulting in code execution or source code disclosure.

Substitutions in server context that use a backreferences or variables as the first segment of the substitution are affected. Some unsafe RewiteRules will be broken by this change and the rewrite flag "UnsafePrefixStat" can be used to opt back in once ensuring the substitution is appropriately constrained.

Acknowledgements: finder: Orange Tsai (@orange\_8361) from DEVCORE

| Reported to security team | 2024-04-01 |
| --- | --- |
| fixed by r1918561 in 2.4.x | 2024-07-01 |
| Update 2.4.60 released | 2024-07-01 |
| Affects | 2.4.0 through 2.4.59 |

### important: Apache HTTP Server may use exploitable/malicious backend application output to run local handlers via internal redirect ([CVE-2024-38476](https://www.cve.org/CVERecord?id=CVE-2024-38476))

Vulnerability in core of Apache HTTP Server 2.4.59 and earlier are vulnerably to information disclosure, SSRF or local script execution via backend applications whose response headers are malicious or exploitable.

Note: Some legacy uses of the 'AddType' directive to connect a request to a handler must be ported to 'SetHandler' after this fix.

Users are recommended to upgrade to version 2.4.60, which fixes this issue.

Acknowledgements: finder: Orange Tsai (@orange\_8361) from DEVCORE

| Reported to security team | 2024-04-01 |
| --- | --- |
| fixed by r1918560 in 2.4.x | 2024-07-01 |
| Update 2.4.60 released | 2024-07-01 |
| Affects | 2.4.0 through 2.4.59 |

### important: Apache HTTP Server: Crash resulting in Denial of Service in mod\_proxy via a malicious request ([CVE-2024-38477](https://www.cve.org/CVERecord?id=CVE-2024-38477))

null pointer dereference in mod\_proxy in Apache HTTP Server 2.4.59 and earlier allows an attacker to crash the server via a malicious request.

Users are recommended to upgrade to version 2.4.60, which fixes this issue.

Acknowledgements: finder: Orange Tsai (@orange\_8361) from DEVCORE

| Reported | 2024-04-01 |
| --- | --- |
| fixed by r1918607 in 2.4.x | 2024-07-01 |
| Update 2.4.60 released | 2024-07-01 |
| Affects | 2.4.0 through 2.4.59 |

### moderate: Apache HTTP Server: mod\_rewrite proxy handler substitution ([CVE-2024-39573](https://www.cve.org/CVERecord?id=CVE-2024-39573))

Potential SSRF in mod\_rewrite in Apache HTTP Server 2.4.59 and earlier allows an attacker to cause unsafe RewriteRules to unexpectedly setup URL's to be handled by mod\_proxy.

Users are recommended to upgrade to version 2.4.60, which fixes this issue.

Acknowledgements: finder: Orange Tsai (@orange\_8361) from DEVCORE

| Reported to security team | 2024-04-01 |
| --- | --- |
| Update 2.4.60 released | 2024-07-01 |
| Affects | 2.4.0 through 2.4.59 |

# Fixed in Apache HTTP Server 2.4.59

### moderate: Apache HTTP Server: HTTP response splitting ([CVE-2023-38709](https://www.cve.org/CVERecord?id=CVE-2023-38709))

Faulty input validation in the core of Apache allows malicious or exploitable backend/content generators to split HTTP responses.

This issue affects Apache HTTP Server: through 2.4.58.

Acknowledgements: finder: Orange Tsai (@orange\_8361) from DEVCORE

| Reported to security team | 2023-06-26 |
| --- | --- |
| Update 2.4.59 released | 2024-04-04 |
| Affects | through 2.4.58 |

### low: Apache HTTP Server: HTTP Response Splitting in multiple modules ([CVE-2024-24795](https://www.cve.org/CVERecord?id=CVE-2024-24795))

HTTP Response splitting in multiple modules in Apache HTTP Server allows an attacker that can inject malicious response headers into backend applications to cause an HTTP desynchronization attack.

Users are recommended to upgrade to version 2.4.59, which fixes this issue.

Acknowledgements:

* finder: Keran Mu, Tsinghua University and Zhongguancun Laboratory.
* finder: Jianjun Chen, Tsinghua University and Zhongguancun Laboratory.

| Reported to security team | 2023-09-06 |
| --- | --- |
| Update 2.4.59 released | 2024-04-04 |
| Affects | 2.4.0 through 2.4.58 |

### moderate: Apache HTTP Server: HTTP/2 DoS by memory exhaustion on endless continuation frames ([CVE-2024-27316](https://www.cve.org/CVERecord?id=CVE-2024-27316))

HTTP/2 incoming headers exceeding the limit are temporarily buffered in nghttp2 in order to generate an informative HTTP 413 response. If a client does not stop sending headers, this leads to memory exhaustion.

Acknowledgements: finder: Bartek Nowotarski (https://nowotarski.info/)

| Reported to security team | 2024-02-22 |
| --- | --- |
| Update 2.4.59 released | 2024-04-04 |
| Affects | 2.4.17 through 2.4.58 |

# Fixed in Apache HTTP Server 2.4.58

### low: mod\_macro buffer over-read ([CVE-2023-31122](https://www.cve.org/CVERecord?id=CVE-2023-31122))

Out-of-bounds Read vulnerability in mod\_macro of Apache HTTP Server.This issue affects Apache HTTP Server: through 2.4.57.

Acknowledgements: finder: David Shoon (github/davidshoon)

| Update 2.4.58 released | 2023-10-19 |
| --- | --- |
| Affects | through 2.4.57 |

### low: Apache HTTP Server: DoS in HTTP/2 with initial windows size 0 ([CVE-2023-43622](https://www.cve.org/CVERecord?id=CVE-2023-43622))

An attacker, opening a HTTP/2 connection with an initial window size of 0, was able to block handling of that connection indefinitely in Apache HTTP Server. This could be used to exhaust worker resources in the server, similar to the well known "slow loris" attack pattern.

This has been fixed in version 2.4.58, so that such connection are terminated properly after the configured connection timeout.

This issue affects Apache HTTP Server: from 2.4.55 through 2.4.57.

Users are recommended to upgrade to version 2.4.58, which fixes the issue.

Acknowledgements:

* finder: Prof. Sven Dietrich (City University of New York)
* finder: Isa Jafarov (City University of New York)
* finder: Prof. Heejo Lee (Korea University)
* finder: Choongin Lee (Korea University)

| Reported to security team | 2023-09-15 |
| --- | --- |
| Update 2.4.58 released | 2023-10-19 |
| Affects | 2.4.55 through 2.4.57 |

### moderate: Apache HTTP Server: HTTP/2 stream memory not reclaimed right away on RST ([CVE-2023-45802](https://www.cve.org/CVERecord?id=CVE-2023-45802))

When a HTTP/2 stream was reset (RST frame) by a client, there was a time window were the request's memory resources were not reclaimed immediately. Instead, de-allocation was deferred to connection close. A client could send new requests and resets, keeping the connection busy and open and causing the memory footprint to keep on growing. On connection close, all resources were reclaimed, but the process might run out of memory before that.

This was found by the reporter during testing of CVE-2023-44487 (HTTP/2 Rapid Reset Exploit) with their own test client. During "normal" HTTP/2 use, the probability to hit this bug is very low. The kept memory would not become noticeable before the connection closes or times out.

Users are recommended to upgrade to version 2.4.58, which fixes the issue.

Acknowledgements:

* finder: Will Dormann of Vul Labs
* finder: David Warren of Vul Labs

| Reported to security team | 2023-10-12 |
| --- | --- |
| Update 2.4.58 released | 2023-10-19 |
| Affects | 2.4.17 through 2.4.57 |

# Fixed in Apache HTTP Server 2.4.56

### important: HTTP request splitting with mod\_rewrite and mod\_proxy ([CVE-2023-25690](https://www.cve.org/CVERecord?id=CVE-2023-25690))

Some mod\_proxy configurations on Apache HTTP Server versions 2.4.0 through 2.4.55 allow a HTTP Request Smuggling attack.

Configurations are affected when mod\_proxy is enabled along with some form of RewriteRule or ProxyPassMatch in which a non-specific pattern matches some portion of the user-supplied request-target (URL) data and is then re-inserted into the proxied request-target using variable substitution.

For example, something like:

RewriteEngine on

RewriteRule "^/here/(.\*)" "http://example.com:8080/elsewhere?$1"; [P]

ProxyPassReverse /here/ http://example.com:8080/

Request splitting/smuggling could result in bypass of access controls in the proxy server, proxying unintended URLs to existing origin servers, and cache poisoning.

Acknowledgements: finder: Lars Krapf of Adobe

| Reported to security team | 2023-02-02 |
| --- | --- |
| fixed by r1908095 in 2.4.x | 2023-03-07 |
| Update 2.4.56 released | 2023-03-07 |
| Affects | 2.4.0 through 2.4.55 |

### moderate: Apache HTTP Server: mod\_proxy\_uwsgi HTTP response splitting ([CVE-2023-27522](https://www.cve.org/CVERecord?id=CVE-2023-27522))

HTTP Response Smuggling vulnerability in Apache HTTP Server via mod\_proxy\_uwsgi. This issue affects Apache HTTP Server: from 2.4.30 through 2.4.55.

Special characters in the origin response header can truncate/split the response forwarded to the client.

Acknowledgements: finder: Dimas Fariski Setyawan Putra (nyxsorcerer)

| Reported to security team | 2023-01-29 |
| --- | --- |
| fixed by r1908094 in 2.4.x | 2023-03-07 |
| Update 2.4.56 released | 2023-03-07 |
| Affects | 2.4.30 through 2.4.55 |

# Fixed in Apache HTTP Server 2.4.55

### moderate: mod\_dav out of bounds read, or write of zero byte ([CVE-2006-20001](https://www.cve.org/CVERecord?id=CVE-2006-20001))

A carefully crafted If: request header can cause a memory read, or write of a single zero byte, in a pool (heap) memory location beyond the header value sent. This could cause the process to crash.

This issue affects Apache HTTP Server 2.4.54 and earlier.

| Described in first edition of "The Art of Software Security Assessment" | 2006-10-31 |
| --- | --- |
| Reported to security team | 2022-08-10 |
| Update 2.4.55 released | 2023-01-17 |
| Affects | 2.4 through 2.4.54 |

### moderate: Apache HTTP Server: mod\_proxy\_ajp Possible request smuggling ([CVE-2022-36760](https://www.cve.org/CVERecord?id=CVE-2022-36760))

Inconsistent Interpretation of HTTP Requests ('HTTP Request Smuggling') vulnerability in mod\_proxy\_ajp of Apache HTTP Server allows an attacker to smuggle requests to the AJP server it forwards requests to. This issue affects Apache HTTP Server Apache HTTP Server 2.4 version 2.4.54 and prior versions.

Acknowledgements: finder: ZeddYu\_Lu from Qi'anxin Research Institute of Legendsec at Qi'anxin Group

| Reported to security team | 2022-07-12 |
| --- | --- |
| Update 2.4.55 released | 2023-01-17 |
| Affects | 2.4 through 2.4.54 |

### moderate: Apache HTTP Server: mod\_proxy prior to 2.4.55 allows a backend to trigger HTTP response splitting ([CVE-2022-37436](https://www.cve.org/CVERecord?id=CVE-2022-37436))

Prior to Apache HTTP Server 2.4.55, a malicious backend can cause the response headers to be truncated early, resulting in some headers being incorporated into the response body. If the later headers have any security purpose, they will not be interpreted by the client.

Acknowledgements: finder: Dimas Fariski Setyawan Putra (@nyxsorcerer)

| Reported to security team | 2022-07-14 |
| --- | --- |
| Update 2.4.55 released | 2023-01-17 |
| Affects | before 2.4.55 |

# Fixed in Apache HTTP Server 2.4.54

### moderate: mod\_proxy\_ajp: Possible request smuggling ([CVE-2022-26377](https://www.cve.org/CVERecord?id=CVE-2022-26377))

Inconsistent Interpretation of HTTP Requests ('HTTP Request Smuggling') vulnerability in mod\_proxy\_ajp of Apache HTTP Server allows an attacker to smuggle requests to the AJP server it forwards requests to. This issue affects Apache HTTP Server Apache HTTP Server 2.4 version 2.4.53 and prior versions.

Acknowledgements: Ricter Z @ 360 Noah Lab

| Reported to security team | 2022-03-02 |
| --- | --- |
| Update 2.4.54 released | 2022-06-08 |
| Affects | <=2.4.53 |

### low: read beyond bounds in mod\_isapi ([CVE-2022-28330](https://www.cve.org/CVERecord?id=CVE-2022-28330))

Apache HTTP Server 2.4.53 and earlier on Windows may read beyond bounds when configured to process requests with the mod\_isapi module.

Acknowledgements: The Apache HTTP Server project would like to thank Ronald Crane (Zippenhop LLC) for reporting this issue

| Update 2.4.54 released | 2022-06-08 |
| --- | --- |
| Affects | <=2.4.53 |

### low: read beyond bounds via ap\_rwrite() ([CVE-2022-28614](https://www.cve.org/CVERecord?id=CVE-2022-28614))

The ap\_rwrite() function in Apache HTTP Server 2.4.53 and earlier may read unintended memory if an attacker can cause the server to reflect very large input using ap\_rwrite() or ap\_rputs(), such as with mod\_luas r:puts() function.

Modules compiled and distributed separately from Apache HTTP Server that use the "ap\_rputs" function and may pass it a very large (INT\_MAX or larger) string must be compiled against current headers to resolve the issue.

Acknowledgements: The Apache HTTP Server project would like to thank Ronald Crane (Zippenhop LLC) for reporting this issue

| Update released in 2.4.54 | 2022-06-08 |
| --- | --- |
| Affects | <=2.4.53 |

### low: Read beyond bounds in ap\_strcmp\_match() ([CVE-2022-28615](https://www.cve.org/CVERecord?id=CVE-2022-28615))

Apache HTTP Server 2.4.53 and earlier may crash or disclose information due to a read beyond bounds in ap\_strcmp\_match() when provided with an extremely large input buffer. While no code distributed with the server can be coerced into such a call, third-party modules or lua scripts that use ap\_strcmp\_match() may hypothetically be affected.

Acknowledgements: The Apache HTTP Server project would like to thank Ronald Crane (Zippenhop LLC) for reporting this issue

| Update 2.4.54 released | 2022-06-08 |
| --- | --- |
| Affects | <=2.4.53 |

### low: Denial of service in mod\_lua r:parsebody ([CVE-2022-29404](https://www.cve.org/CVERecord?id=CVE-2022-29404))

In Apache HTTP Server 2.4.53 and earlier, a malicious request to a lua script that calls r:parsebody(0) may cause a denial of service due to no default limit on possible input size.

Acknowledgements: The Apache HTTP Server project would like to thank Ronald Crane (Zippenhop LLC) for reporting this issue

| Update 2.4.54 released | 2022-06-08 |
| --- | --- |
| Affects | <=2.4.53 |

### low: mod\_sed denial of service ([CVE-2022-30522](https://www.cve.org/CVERecord?id=CVE-2022-30522))

If Apache HTTP Server 2.4.53 is configured to do transformations with mod\_sed in contexts where the input to mod\_sed may be very large, mod\_sed may make excessively large memory allocations and trigger an abort.

Acknowledgements: This issue was found by Brian Moussalli from the JFrog Security Research team

| Update 2.4.54 released | 2022-06-08 |
| --- | --- |
| Affects | 2.4.53 |

### low: Information Disclosure in mod\_lua with websockets ([CVE-2022-30556](https://www.cve.org/CVERecord?id=CVE-2022-30556))

Apache HTTP Server 2.4.53 and earlier may return lengths to applications calling r:wsread() that point past the end of the storage allocated for the buffer.

Acknowledgements: The Apache HTTP Server project would like to thank Ronald Crane (Zippenhop LLC) for reporting this issue

| Update 2.4.54 released | 2022-06-08 |
| --- | --- |
| Affects | <=2.4.53 |

### low: mod\_proxy X-Forwarded-For dropped by hop-by-hop mechanism ([CVE-2022-31813](https://www.cve.org/CVERecord?id=CVE-2022-31813))

Apache HTTP Server 2.4.53 and earlier may not send the X-Forwarded-\* headers to the origin server based on client side Connection header hop-by-hop mechanism.

This may be used to bypass IP based authentication on the origin server/application.

Acknowledgements: The Apache HTTP Server project would like to thank Gaetan Ferry (Synacktiv) for reporting this issue

| Update 2.4.54 released | 2022-06-08 |
| --- | --- |
| Affects | <=2.4.53 |

# Fixed in Apache HTTP Server 2.4.53

### moderate: mod\_lua Use of uninitialized value of in r:parsebody ([CVE-2022-22719](https://www.cve.org/CVERecord?id=CVE-2022-22719))

A carefully crafted request body can cause a read to a random memory area which could cause the process to crash.

This issue affects Apache HTTP Server 2.4.52 and earlier.

Acknowledgements: Chamal De Silva

| Reported to security team | 2021-12-18 |
| --- | --- |
| fixed by r1898694 in 2.4.x | 2022-03-07 |
| Update 2.4.53 released | 2022-03-14 |
| Affects | <=2.4.52 |

### important: HTTP request smuggling vulnerability in Apache HTTP Server 2.4.52 and earlier ([CVE-2022-22720](https://www.cve.org/CVERecord?id=CVE-2022-22720))

Apache HTTP Server 2.4.52 and earlier fails to close inbound connection when errors are encountered discarding the request body, exposing the server to HTTP Request Smuggling

Acknowledgements: James Kettle <james.kettle portswigger.net>

| Reported to security team | 2021-12-17 |
| --- | --- |
| fixed by r1898692 in 2.4.x | 2022-03-07 |
| Update 2.4.53 released | 2022-03-14 |
| Affects | <=2.4.52 |

### low: core: Possible buffer overflow with very large or unlimited LimitXMLRequestBody ([CVE-2022-22721](https://www.cve.org/CVERecord?id=CVE-2022-22721))

If LimitXMLRequestBody is set to allow request bodies larger than 350MB (defaults to 1M) on 32 bit systems an integer overflow happens which later causes out of bounds writes.

This issue affects Apache HTTP Server 2.4.52 and earlier.

Acknowledgements: Anonymous working with Trend Micro Zero Day Initiative

| Reported to security team | 2021-12-16 |
| --- | --- |
| fixed by r1898693 in 2.4.x | 2022-03-07 |
| Update 2.4.53 released | 2022-03-14 |
| Affects | <=2.4.52 |

### important: mod\_sed: Read/write beyond bounds ([CVE-2022-23943](https://www.cve.org/CVERecord?id=CVE-2022-23943))

Out-of-bounds Write vulnerability in mod\_sed of Apache HTTP Server allows an attacker to overwrite heap memory with possibly attacker provided data.

This issue affects Apache HTTP Server 2.4 version 2.4.52 and prior versions.

Acknowledgements: Ronald Crane (Zippenhop LLC)

| Reported to security team | 2022-01-13 |
| --- | --- |
| fixed by r1898695, r1898772 in 2.4.x | 2022-03-09 |
| Update 2.4.53 released | 2022-03-14 |
| Affects | <=2.4.52 |

# Fixed in Apache HTTP Server 2.4.52

### moderate: Possible NULL dereference or SSRF in forward proxy configurations in Apache HTTP Server 2.4.51 and earlier ([CVE-2021-44224](https://www.cve.org/CVERecord?id=CVE-2021-44224))

A crafted URI sent to httpd configured as a forward proxy (ProxyRequests on) can cause a crash (NULL pointer dereference) or, for configurations mixing forward and reverse proxy declarations, can allow for requests to be directed to a declared Unix Domain Socket endpoint (Server Side Request Forgery).

This issue affects Apache HTTP Server 2.4.7 up to 2.4.51 (included).

Acknowledgements:

* æ¼äº®é¼
* TengMA(@Te3t123)

| Reported to security team | 2021-11-18 |
| --- | --- |
| fixed by r1895955, r1896044 in 2.4.x | 2021-12-14 |
| Update 2.4.52 released | 2021-12-20 |
| Affects | >=2.4.7, <=2.4.51 |

### important: Possible buffer overflow when parsing multipart content in mod\_lua of Apache HTTP Server 2.4.51 and earlier ([CVE-2021-44790](https://www.cve.org/CVERecord?id=CVE-2021-44790))

A carefully crafted request body can cause a buffer overflow in the mod\_lua multipart parser (r:parsebody() called from Lua scripts).

The Apache httpd team is not aware of an exploit for the vulnerabilty though it might be possible to craft one.

This issue affects Apache HTTP Server 2.4.51 and earlier.

Acknowledgements: Chamal

| Reported to security team | 2021-12-07 |
| --- | --- |
| Fixed by r1896039 in 2.4.x | 2021-12-16 |
| Update 2.4.52 released | 2021-12-20 |
| Affects | <=2.4.51 |

# Fixed in Apache HTTP Server 2.4.51

### critical: Path Traversal and Remote Code Execution in Apache HTTP Server 2.4.49 and 2.4.50 (incomplete fix of CVE-2021-41773) ([CVE-2021-42013](https://www.cve.org/CVERecord?id=CVE-2021-42013))

It was found that the fix for CVE-2021-41773 in Apache HTTP Server 2.4.50 was insufficient. An attacker could use a path traversal attack to map URLs to files outside the directories configured by Alias-like directives.

If files outside of these directories are not protected by the usual default configuration "require all denied", these requests can succeed. If CGI scripts are also enabled for these aliased pathes, this could allow for remote code execution.

This issue only affects Apache 2.4.49 and Apache 2.4.50 and not earlier versions.

Acknowledgements:

* Reported by Juan Escobar from Dreamlab Technologies
* Reported by Fernando Muñoz from NULL Life CTF Team
* Reported by Shungo Kumasaka
* Reported by Nattapon Jongcharoen

| Reported to security team | 2021-10-06 |
| --- | --- |
| fixed by r1893977, r1893980, r1893982 in 2.4.x | 2021-10-07 |
| Update 2.4.51 released | 2021-10-07 |
| Affects | 2.4.50, 2.4.49 |

# Fixed in Apache HTTP Server 2.4.50

### moderate: null pointer dereference in h2 fuzzing ([CVE-2021-41524](https://www.cve.org/CVERecord?id=CVE-2021-41524))

While fuzzing the 2.4.49 httpd, a new null pointer dereference was detected during HTTP/2 request processing,

allowing an external source to DoS the server. This requires a specially crafted request.

The vulnerability was recently introduced in version 2.4.49. No exploit is known to the project.

Acknowledgements: Apache httpd team would like to thank LI ZHI XIN from NSFocus Security Team for reporting this issue.

| Reported to security team | 2021-09-17 |
| --- | --- |
| fixed by r1893655 in 2.4.x | 2021-09-26 |
| Update 2.4.50 released | 2021-10-04 |
| Affects | 2.4.49 |

### critical: Path traversal and file disclosure vulnerability in Apache HTTP Server 2.4.49 ([CVE-2021-41773](https://www.cve.org/CVERecord?id=CVE-2021-41773))

A flaw was found in a change made to path normalization in Apache HTTP Server 2.4.49. An attacker could use a path traversal attack to map URLs to files outside the directories configured by Alias-like directives.

If files outside of these directories are not protected by the usual default configuration "require all denied", these requests can succeed. If CGI scripts are also enabled for these aliased pathes, this could allow for remote code execution.

This issue is known to be exploited in the wild.

This issue only affects Apache 2.4.49 and not earlier versions.

Acknowledgements: This issue was reported by Ash Daulton along with the cPanel Security Team

| Reported to security team | 2021-09-29 |
| --- | --- |
| fixed by r1893775 in 2.4.x | 2021-10-01 |
| Update 2.4.50 released | 2021-10-04 |
| Affects | 2.4.49 |

# Fixed in Apache HTTP Server 2.4.49

### moderate: Request splitting via HTTP/2 method injection and mod\_proxy ([CVE-2021-33193](https://www.cve.org/CVERecord?id=CVE-2021-33193))

A crafted method sent through HTTP/2 will bypass validation and be forwarded by mod\_proxy, which can lead to request splitting or cache poisoning.

This issue affects Apache HTTP Server 2.4.17 to 2.4.48.

Acknowledgements: Reported by James Kettle of PortSwigger

| Reported to security team | 2021-05-11 |
| --- | --- |
| Issue public | 2021-08-06 |
| Update 2.4.49 released | 2021-09-16 |
| Affects | <=2.4.48, !<2.4.17 |

### moderate: NULL pointer dereference in httpd core ([CVE-2021-34798](https://www.cve.org/CVERecord?id=CVE-2021-34798))

Malformed requests may cause the server to dereference a NULL pointer.

This issue affects Apache HTTP Server 2.4.48 and earlier.

Acknowledgements: The issue was discovered by the Apache HTTP security team

| Update 2.4.49 released | 2021-09-16 |
| --- | --- |
| Affects | <=2.4.48 |

### moderate: mod\_proxy\_uwsgi out of bound read ([CVE-2021-36160](https://www.cve.org/CVERecord?id=CVE-2021-36160))

A carefully crafted request uri-path can cause mod\_proxy\_uwsgi to read above the allocated memory and crash (DoS).

This issue affects Apache HTTP Server versions 2.4.30 to 2.4.48 (inclusive).

Acknowledgements: LI ZHI XIN from NSFocus Security Team

| Reported to security team | 2021-04-26 |
| --- | --- |
| Update 2.4.49 release | 2021-09-16 |
| Affects | <=2.4.48, !<2.4.30 |

### low: ap\_escape\_quotes buffer overflow ([CVE-2021-39275](https://www.cve.org/CVERecord?id=CVE-2021-39275))

ap\_escape\_quotes() may write beyond the end of a buffer when given malicious input.

No included modules pass untrusted data to these functions, but third-party / external modules may.

This issue affects Apache HTTP Server 2.4.48 and earlier.

Acknowledgements: ClusterFuzz

| Update 2.4.49 released | 2021-09-16 |
| --- | --- |
| Affects | <=2.4.48 |

### important: mod\_proxy SSRF ([CVE-2021-40438](https://www.cve.org/CVERecord?id=CVE-2021-40438))

A crafted request uri-path can cause mod\_proxy to forward the request to an origin server choosen by the remote user.

This issue affects Apache HTTP Server 2.4.48 and earlier.

Acknowledgements: The issue was discovered by the Apache HTTP security team while analysing CVE-2021-36160

| Update 2.4.49 released | 2021-09-16 |
| --- | --- |
| Affects | <=2.4.48 |

# Fixed in Apache HTTP Server 2.4.48

### moderate: mod\_proxy\_wstunnel tunneling of non Upgraded connections ([CVE-2019-17567](https://www.cve.org/CVERecord?id=CVE-2019-17567))

Apache HTTP Server versions 2.4.6 to 2.4.46 mod\_proxy\_wstunnel configured on an URL that is not necessarily Upgraded by the origin server was tunneling the whole connection regardless, thus allowing for subsequent requests on the same connection to pass through with no HTTP validation, authentication or authorization possibly configured.

Acknowledgements: Reported by Mikhail Egorov (<0ang3el gmail.com>)

| Reported to security team | 2019-10-05 |
| --- | --- |
| Issue public | 2021-06-01 |
| Update 2.4.48 released | 2021-06-01 |
| Affects | 2.4.46, 2.4.43, 2.4.41, 2.4.39, 2.4.38, 2.4.37, 2.4.35, 2.4.34, 2.4.33, 2.4.29, 2.4.28, 2.4.27, 2.4.26, 2.4.25, 2.4.23, 2.4.20, 2.4.18, 2.4.17, 2.4.16, 2.4.12, 2.4.10, 2.4.9, 2.4.7, 2.4.6 |

### moderate: Improper Handling of Insufficient Privileges ([CVE-2020-13938](https://www.cve.org/CVERecord?id=CVE-2020-13938))

Apache HTTP Server versions 2.4.0 to 2.4.46 Unprivileged local users can stop httpd on Windows

Acknowledgements: Discovered by Ivan Zhakov

| Reported to security team | 2021-01-26 |
| --- | --- |
| Issue public | 2021-06-01 |
| Update 2.4.48 released | 2021-06-01 |
| Affects | 2.4.46, 2.4.43, 2.4.41, 2.4.39, 2.4.38, 2.4.37, 2.4.35, 2.4.34, 2.4.33, 2.4.29, 2.4.28, 2.4.27, 2.4.26, 2.4.25, 2.4.23, 2.4.20, 2.4.18, 2.4.17, 2.4.16, 2.4.12, 2.4.10, 2.4.9, 2.4.7, 2.4.6, 2.4.4, 2.4.3, 2.4.2, 2.4.1, 2.4.0 |

### low: mod\_proxy\_http NULL pointer dereference ([CVE-2020-13950](https://www.cve.org/CVERecord?id=CVE-2020-13950))

Apache HTTP Server versions 2.4.41 to 2.4.46 mod\_proxy\_http can be made to crash (NULL pointer dereference) with specially crafted requests using both Content-Length and Transfer-Encoding headers, leading to a Denial of Service

Acknowledgements: Reported by Marc Stern (<marc.stern@approach-cyber.com>)

| Reported to security team | 2020-09-11 |
| --- | --- |
| Issue public | 2021-06-01 |
| Update 2.4.48 released | 2021-06-01 |
| Affects | 2.4.46, 2.4.43, 2.4.41 |

### low: mod\_auth\_digest possible stack overflow by one nul byte ([CVE-2020-35452](https://www.cve.org/CVERecord?id=CVE-2020-35452))

Apache HTTP Server versions 2.4.0 to 2.4.46 A specially crafted Digest nonce can cause a stack overflow in mod\_auth\_digest. There is no report of this overflow being exploitable, nor the Apache HTTP Server team could create one, though some particular compiler and/or compilation option might make it possible, with limited consequences anyway due to the size (a single byte) and the value (zero byte) of the overflow

Acknowledgements: This issue was discovered and reported by GHSL team member @antonio-morales (Antonio Morales)

| Reported to security team | 2020-11-11 |
| --- | --- |
| Issue public | 2021-06-01 |
| Update 2.4.48 released | 2021-06-01 |
| Affects | 2.4.46, 2.4.43, 2.4.41, 2.4.39, 2.4.38, 2.4.37, 2.4.35, 2.4.34, 2.4.33, 2.4.29, 2.4.28, 2.4.27, 2.4.26, 2.4.25, 2.4.23, 2.4.20, 2.4.18, 2.4.17, 2.4.16, 2.4.12, 2.4.10, 2.4.9, 2.4.7, 2.4.6, 2.4.4, 2.4.3, 2.4.2, 2.4.1, 2.4.0 |

### low: mod\_session NULL pointer dereference ([CVE-2021-26690](https://www.cve.org/CVERecord?id=CVE-2021-26690))

Apache HTTP Server versions 2.4.0 to 2.4.46 A specially crafted Cookie header handled by mod\_session can cause a NULL pointer dereference and crash, leading to a possible Denial Of Service

Acknowledgements: This issue was discovered and reported by GHSL team member @antonio-morales (Antonio Morales)

| Reported to security team | 2021-02-08 |
| --- | --- |
| Issue public | 2021-06-01 |
| Update 2.4.48 released | 2021-06-01 |
| Affects | 2.4.46, 2.4.43, 2.4.41, 2.4.39, 2.4.38, 2.4.37, 2.4.35, 2.4.34, 2.4.33, 2.4.29, 2.4.28, 2.4.27, 2.4.26, 2.4.25, 2.4.23, 2.4.20, 2.4.18, 2.4.17, 2.4.16, 2.4.12, 2.4.10, 2.4.9, 2.4.7, 2.4.6, 2.4.4, 2.4.3, 2.4.2, 2.4.1, 2.4.0 |

### low: mod\_session response handling heap overflow ([CVE-2021-26691](https://www.cve.org/CVERecord?id=CVE-2021-26691))

Apache HTTP Server versions 2.4.0 to 2.4.46 A specially crafted SessionHeader sent by an origin server could cause a heap overflow

Acknowledgements: Discovered internally Christophe Jaillet

| Reported to security team | 2021-03-01 |
| --- | --- |
| Issue public | 2021-06-01 |
| Update 2.4.48 released | 2021-06-01 |
| Affects | 2.4.46, 2.4.43, 2.4.41, 2.4.39, 2.4.38, 2.4.37, 2.4.35, 2.4.34, 2.4.33, 2.4.29, 2.4.28, 2.4.27, 2.4.26, 2.4.25, 2.4.23, 2.4.20, 2.4.18, 2.4.17, 2.4.16, 2.4.12, 2.4.10, 2.4.9, 2.4.7, 2.4.6, 2.4.4, 2.4.3, 2.4.2, 2.4.1, 2.4.0 |

### moderate: Unexpected URL matching with 'MergeSlashes OFF' ([CVE-2021-30641](https://www.cve.org/CVERecord?id=CVE-2021-30641))

Apache HTTP Server versions 2.4.39 to 2.4.46 Unexpected matching behavior with 'MergeSlashes OFF'

Acknowledgements: Discovered by Christoph Anton Mitterer

| Reported to security team | 2021-04-14 |
| --- | --- |
| Issue public | 2021-06-01 |
| Update 2.4.48 released | 2021-06-01 |
| Affects | 2.4.46, 2.4.43, 2.4.41, 2.4.39 |

### important: NULL pointer dereference on specially crafted HTTP/2 request ([CVE-2021-31618](https://www.cve.org/CVERecord?id=CVE-2021-31618))

Apache HTTP Server protocol handler for the HTTP/2 protocol checks received request headers against the size limitations as configured for the server and used for the HTTP/1 protocol as well. On violation of these restrictions and HTTP response is sent to the client with a status code indicating why the request was rejected.

This rejection response was not fully initialised in the HTTP/2 protocol handler if the offending header was the very first one received or appeared in a a footer. This led to a NULL pointer dereference on initialised memory, crashing reliably the child process. Since such a triggering HTTP/2 request is easy to craft and submit, this can be exploited to DoS the server.

This issue affected mod\_http2 1.15.17 and Apache HTTP Server version 2.4.47 only. Apache HTTP Server 2.4.47 was never released.

Acknowledgements: Apache HTTP server would like to thank LI ZHI XIN from NSFoucs for reporting this.

| Reported to security team | 2021-04-22 |
| --- | --- |
| Issue public | 2021-06-01 |
| Update 2.4.48 released | 2021-06-01 |
| Affects | 2.4.47 |

# Fixed in Apache HTTP Server 2.4.44

### important: Push Diary Crash on Specifically Crafted HTTP/2 Header ([CVE-2020-9490](https://www.cve.org/CVERecord?id=CVE-2020-9490))

In Apache HTTP Server versions 2.4.20 to 2.4.43, a specially crafted value for the 'Cache-Digest' header in a HTTP/2 request would result in a crash when the server actually tries to HTTP/2 PUSH a resource afterwards. Configuring the HTTP/2 feature via "H2Push off" will mitigate this vulnerability for unpatched servers.

Acknowledgements: Felix Wilhelm of Google Project Zero

| Reported to security team | 2020-04-24 |
| --- | --- |
| Issue public | 2020-08-07 |
| Update 2.4.44 released | 2020-08-07 |
| Affects | 2.4.43, 2.4.39, 2.4.38, 2.4.37, 2.4.35, 2.4.34, 2.4.33, 2.4.30, 2.4.29, 2.4.28, 2.4.27, 2.4.26, 2.4.25, 2.4.23, 2.4.20 |

### moderate: mod\_proxy\_uwsgi buffer overflow ([CVE-2020-11984](https://www.cve.org/CVERecord?id=CVE-2020-11984))

In Apache HTTP Server versions 2.4.32 to 2.4.43, mod\_proxy\_uwsgi has a information disclosure and possible RCE

Acknowledgements: Discovered by Felix Wilhelm of Google Project Zero

| Reported to security team | 2020-07-22 |
| --- | --- |
| Issue public | 2020-08-07 |
| Update 2.4.44 released | 2020-08-07 |
| Affects | 2.4.39, 2.4.38, 2.4.37, 2.4.35, 2.4.34, 2.4.33 |

### moderate: Push Diary Crash on Specifically Crafted HTTP/2 Header ([CVE-2020-11993](https://www.cve.org/CVERecord?id=CVE-2020-11993))

In Apache HTTP Server versions 2.4.20 to 2.4.43, when trace/debug was enabled for the HTTP/2 module and on certain traffic edge patterns, logging statements were made on the wrong connection, causing concurrent use of memory pools.

Configuring the LogLevel of mod\_http2 above "info" will mitigate this vulnerability for unpatched servers.

Acknowledgements: Felix Wilhelm of Google Project Zero

| Reported to security team | 2020-06-16 |
| --- | --- |
| Issue public | 2020-08-07 |
| Update 2.4.44 released | 2020-08-07 |
| Affects | 2.4.43, 2.4.39, 2.4.38, 2.4.37, 2.4.35, 2.4.34, 2.4.33, 2.4.30, 2.4.29, 2.4.28, 2.4.27, 2.4.26, 2.4.25, 2.4.23, 2.4.20 |

# Fixed in Apache HTTP Server 2.4.42

### low: mod\_rewrite CWE-601 open redirect ([CVE-2020-1927](https://www.cve.org/CVERecord?id=CVE-2020-1927))

In Apache HTTP Server versions 2.4.0 to 2.4.41 some mod\_rewrite configurations vulnerable to open redirect.

Acknowledgements: The issue was discovered by Fabrice Perez

| Reported to security team | 2019-12-05 |
| --- | --- |
| Issue public | 2020-04-01 |
| Update 2.4.42 released | 2020-04-01 |
| Affects | 2.4.41, 2.4.40, 2.4.39, 2.4.38, 2.4.37, 2.4.35, 2.4.34, 2.4.33, 2.4.30, 2.4.29, 2.4.28, 2.4.27, 2.4.26, 2.4.25, 2.4.23, 2.4.20, 2.4.18, 2.4.17, 2.4.16, 2.4.12, 2.4.10, 2.4.9, 2.4.7, 2.4.6, 2.4.4, 2.4.3, 2.4.2, 2.4.1, 2.4.0 |

### low: mod\_proxy\_ftp use of uninitialized value ([CVE-2020-1934](https://www.cve.org/CVERecord?id=CVE-2020-1934))

in Apache HTTP Server versions 2.4.0 to 2.4.41, mod\_proxy\_ftp use of uninitialized value with malicious FTP backend.

Acknowledgements: The issue was discovered by Chamal De Silva

| Reported to security team | 2020-01-03 |
| --- | --- |
| Issue public | 2020-04-01 |
| Update 2.4.42 released | 2020-04-01 |
| Affects | 2.4.41, 2.4.40, 2.4.39, 2.4.38, 2.4.37, 2.4.35, 2.4.34, 2.4.33, 2.4.30, 2.4.29, 2.4.28, 2.4.27, 2.4.26, 2.4.25, 2.4.23, 2.4.20, 2.4.18, 2.4.17, 2.4.16, 2.4.12, 2.4.10, 2.4.9, 2.4.7, 2.4.6, 2.4.4, 2.4.3, 2.4.2, 2.4.1, 2.4.0 |

# Fixed in Apache HTTP Server 2.4.41

### moderate: mod\_http2, DoS attack by exhausting h2 workers. ([CVE-2019-9517](https://www.cve.org/CVERecord?id=CVE-2019-9517))

A malicious client could perform a DoS attack by flooding a connection with requests and basically never reading responses on the TCP connection. Depending on h2 worker dimensioning, it was possible to block those with relatively few connections.

Acknowledgements: The issue was discovered by Jonathan Looney of Netflix.

| Reported to security team | 2019-04-10 |
| --- | --- |
| Issue public | 2019-08-14 |
| Update 2.4.41 released | 2019-08-14 |
| Affects | 2.4.39, 2.4.38, 2.4.37, 2.4.35, 2.4.34, 2.4.33, 2.4.32, 2.4.29, 2.4.28, 2.4.27, 2.4.26, 2.4.25, 2.4.23, 2.4.20 |

### moderate: mod\_http2, memory corruption on early pushes ([CVE-2019-10081](https://www.cve.org/CVERecord?id=CVE-2019-10081))

HTTP/2 very early pushes, for example configured with "H2PushResource", could lead to an overwrite of memory in the pushing request's pool, leading to crashes. The memory copied is that of the configured push link header values, not data supplied by the client.

Acknowledgements: The issue was discovered by Craig Young of Tripwire VERT, <vuln-report@secur3.us>.

| Reported to security team | 2019-04-10 |
| --- | --- |
| Issue public | 2019-08-14 |
| Update 2.4.41 released | 2019-08-14 |
| Affects | 2.4.39, 2.4.38, 2.4.37, 2.4.35, 2.4.34, 2.4.33, 2.4.32, 2.4.29, 2.4.28, 2.4.27, 2.4.26, 2.4.25, 2.4.23, 2.4.20 |

### moderate: mod\_http2, read-after-free in h2 connection shutdown ([CVE-2019-10082](https://www.cve.org/CVERecord?id=CVE-2019-10082))

Using fuzzed network input, the http/2 session handling could be made to read memory after being freed, during connection shutdown.

Acknowledgements: The issue was discovered by Craig Young of Tripwire VERT, <vuln-report@secur3.us>.

| Reported to security team | 2019-04-12 |
| --- | --- |
| Issue public | 2019-08-14 |
| Update 2.4.41 released | 2019-08-14 |
| Affects | 2.4.39, 2.4.38, 2.4.37, 2.4.35, 2.4.34, 2.4.33, 2.4.32, 2.4.29, 2.4.28, 2.4.27, 2.4.26, 2.4.25, 2.4.23, 2.4.20, 2.4.18 |

### low: Limited cross-site scripting in mod\_proxy error page ([CVE-2019-10092](https://www.cve.org/CVERecord?id=CVE-2019-10092))

A limited cross-site scripting issue was reported affecting the mod\_proxy error page. An attacker could cause the link on the error page to be malfomed and instead point to a page of their choice. This would only be exploitable where a server was set up with proxying enabled but was misconfigured in such a way that the Proxy Error page was displayed. We have taken this opportunity to also remove request data from many other in-built error messages. Note however this issue did not affect them directly and their output was already escaped to prevent cross-site scripting attacks.

Acknowledgements: This issue was reported by Matei "Mal" Badanoiu

| Reported to security team | 2019-07-09 |
| --- | --- |
| Issue public | 2019-08-14 |
| Update 2.4.41 released | 2019-08-14 |
| Affects | 2.4.39, 2.4.38, 2.4.37, 2.4.35, 2.4.34, 2.4.33, 2.4.30, 2.4.29, 2.4.28, 2.4.27, 2.4.26, 2.4.25, 2.4.23, 2.4.20, 2.4.18, 2.4.17, 2.4.16, 2.4.12, 2.4.10, 2.4.9, 2.4.7, 2.4.6, 2.4.4, 2.4.3, 2.4.2, 2.4.1, 2.4.0 |

### moderate: CVE-2019-10097 mod\_remoteip: Stack buffer overflow and NULL pointer dereference ([CVE-2019-10097](https://www.cve.org/CVERecord?id=CVE-2019-10097))

When mod\_remoteip was configured to use a trusted intermediary proxy server using the "PROXY" protocol, a specially crafted PROXY header could trigger a stack buffer overflow or NULL pointer deference. This vulnerability could only be triggered by a trusted proxy and not by untrusted HTTP clients.

Acknowledgements: The issue was discovered by Daniel McCarney <cpu@letsencrypt.org> Let's Encrypt / Internet Security Research Group (ISRG)

| Reported to security team | 2019-07-23 |
| --- | --- |
| Issue public | 2019-08-14 |
| Update 2.4.41 released | 2019-08-14 |
| Affects | 2.4.38, 2.4.37, 2.4.35, 2.4.34, 2.4.33 |

### low: mod\_rewrite potential open redirect ([CVE-2019-10098](https://www.cve.org/CVERecord?id=CVE-2019-10098))

Redirects configured with mod\_rewrite that were intended to be self-referential might be fooled by encoded newlines and redirect instead to an an unexpected URL within the request URL.

Acknowledgements: The issue was discovered by Yukitsugu Sasaki

| Reported to security team | 2019-03-26 |
| --- | --- |
| Issue public | 2019-08-14 |
| Update 2.4.41 released | 2019-08-14 |
| Affects | 2.4.39, 2.4.38, 2.4.37, 2.4.35, 2.4.34, 2.4.33, 2.4.30, 2.4.29, 2.4.28, 2.4.27, 2.4.26, 2.4.25, 2.4.23, 2.4.20, 2.4.18, 2.4.17, 2.4.16, 2.4.12, 2.4.10, 2.4.9, 2.4.7, 2.4.6, 2.4.4, 2.4.3, 2.4.2, 2.4.1, 2.4.0 |

# Fixed in Apache HTTP Server 2.4.39

### low: mod\_http2, read-after-free on a string compare ([CVE-2019-0196](https://www.cve.org/CVERecord?id=CVE-2019-0196))

Using fuzzed network input, the http/2 request handling could be made to access freed memory in string comparision when determining the method of a request and thus process the request incorrectly.

Acknowledgements: The issue was discovered by Craig Young, <vuln-report@secur3.us>.

| Reported to security team | 2019-01-29 |
| --- | --- |
| Issue public | 2019-04-01 |
| Update 2.4.39 released | 2019-04-01 |
| Affects | 2.4.38, 2.4.37, 2.4.35, 2.4.34, 2.4.33, 2.4.30, 2.4.29, 2.4.28, 2.4.27, 2.4.26, 2.4.25, 2.4.23, 2.4.20, 2.4.18, 2.4.17 |

### low: mod\_http2, possible crash on late upgrade ([CVE-2019-0197](https://www.cve.org/CVERecord?id=CVE-2019-0197))

When HTTP/2 was enabled for a http: host or H2Upgrade was enabled for h2 on a https: host, an Upgrade request from http/1.1 to http/2 that was not the first request on a connection could lead to a misconfiguration and crash. A server that never enabled the h2 protocol or that only enabled it for https: and did not configure the "H2Upgrade on" is unaffected by this.

Acknowledgements: The issue was discovered by Stefan Eissing, greenbytes.de.

| Reported to security team | 2019-01-29 |
| --- | --- |
| Issue public | 2019-04-01 |
| Update 2.4.39 released | 2019-04-01 |
| Affects | 2.4.38, 2.4.37, 2.4.35, 2.4.34 |

### important: Apache HTTP Server privilege escalation from modules' scripts ([CVE-2019-0211](https://www.cve.org/CVERecord?id=CVE-2019-0211))

In Apache HTTP Server 2.4 releases 2.4.17 to 2.4.38, with MPM event, worker or prefork, code executing in less-privileged child processes or threads (including scripts executed by an in-process scripting interpreter) could execute arbitrary code with the privileges of the parent process (usually root) by manipulating the scoreboard. Non-Unix systems are not affected.

Acknowledgements: The issue was discovered by Charles Fol.

| Reported to security team | 2019-02-22 |
| --- | --- |
| Issue public | 2019-04-01 |
| Update 2.4.39 released | 2019-04-01 |
| Affects | 2.4.38, 2.4.37, 2.4.35, 2.4.34, 2.4.33, 2.4.30, 2.4.29, 2.4.28, 2.4.27, 2.4.26, 2.4.25, 2.4.23, 2.4.20, 2.4.18, 2.4.17 |

### important: mod\_ssl access control bypass ([CVE-2019-0215](https://www.cve.org/CVERecord?id=CVE-2019-0215))

In Apache HTTP Server 2.4 releases 2.4.37 and 2.4.38, a bug in mod\_ssl when using per-location client certificate verification with TLSv1.3 allowed a client supporting Post-Handshake Authentication to bypass configured access control restrictions.

Acknowledgements: The issue was discovered by Michael Kaufmann.

| Reported to security team | 2019-01-23 |
| --- | --- |
| Issue public | 2019-04-01 |
| Update 2.4.39 released | 2019-04-01 |
| Affects | 2.4.38, 2.4.37 |

### important: mod\_auth\_digest access control bypass ([CVE-2019-0217](https://www.cve.org/CVERecord?id=CVE-2019-0217))

In Apache HTTP Server 2.4 release 2.4.38 and prior, a race condition in mod\_auth\_digest when running in a threaded server could allow a user with valid credentials to authenticate using another username, bypassing configured access control restrictions.

Acknowledgements: The issue was discovered by Simon Kappel.

| Reported to security team | 2019-01-29 |
| --- | --- |
| Issue public | 2019-04-01 |
| Update 2.4.39 released | 2019-04-01 |
| Affects | 2.4.38, 2.4.37, 2.4.35, 2.4.34, 2.4.33, 2.4.30, 2.4.29, 2.4.28, 2.4.27, 2.4.26, 2.4.25, 2.4.23, 2.4.20, 2.4.18, 2.4.17, 2.4.16, 2.4.12, 2.4.10, 2.4.9, 2.4.7, 2.4.6, 2.4.4, 2.4.3, 2.4.2, 2.4.1, 2.4.0 |

### low: Apache httpd URL normalization inconsistincy ([CVE-2019-0220](https://www.cve.org/CVERecord?id=CVE-2019-0220))

When the path component of a request URL contains multiple consecutive slashes ('/'), directives such as LocationMatch and RewriteRule must account for duplicates in regular expressions while other aspects of the servers processing will implicitly collapse them.

Acknowledgements: The issue was discovered by Bernhard Lorenz <bernhard.lorenz@alphastrike.io> of Alpha Strike Labs GmbH.

| Reported to security team | 2019-01-20 |
| --- | --- |
| Issue public | 2019-04-01 |
| Update 2.4.39 released | 2019-04-01 |
| Affects | 2.4.38, 2.4.37, 2.4.35, 2.4.34, 2.4.33, 2.4.30, 2.4.29, 2.4.28, 2.4.27, 2.4.26, 2.4.25, 2.4.23, 2.4.20, 2.4.18, 2.4.17, 2.4.16, 2.4.12, 2.4.10, 2.4.9, 2.4.7, 2.4.6, 2.4.4, 2.4.3, 2.4.2, 2.4.1, 2.4.0 |

# Fixed in Apache HTTP Server 2.4.38

### low: DoS for HTTP/2 connections via slow request bodies ([CVE-2018-17189](https://www.cve.org/CVERecord?id=CVE-2018-17189))

By sending request bodies in a slow loris way to plain resources, the h2 stream for that request unnecessarily occupied a server thread cleaning up that incoming data. This affects only HTTP/2 connections. A possible mitigation is to not enable the h2 protocol.

Acknowledgements: The issue was discovered by Gal Goldshtein of F5 Networks.

| Reported to security team | 2018-10-16 |
| --- | --- |
| Issue public | 2019-01-22 |
| Update 2.4.38 released | 2019-02-28 |
| Affects | 2.4.37, 2.4.35, 2.4.34, 2.4.33, 2.4.30, 2.4.29, 2.4.28, 2.4.27, 2.4.26, 2.4.25, 2.4.23, 2.4.20, 2.4.18, 2.4.17 |

### low: mod\_session\_cookie does not respect expiry time ([CVE-2018-17199](https://www.cve.org/CVERecord?id=CVE-2018-17199))

In Apache HTTP Server 2.4 release 2.4.37 and prior, mod\_session checks the session expiry time before decoding the session. This causes session expiry time to be ignored for mod\_session\_cookie sessions since the expiry time is loaded when the session is decoded.

Acknowledgements: The issue was discovered by Diego Angulo from ImExHS.

| Reported to security team | 2018-10-08 |
| --- | --- |
| Issue public | 2019-01-22 |
| Update 2.4.38 released | 2019-02-28 |
| Affects | 2.4.37, 2.4.35, 2.4.34, 2.4.33, 2.4.30, 2.4.29, 2.4.28, 2.4.27, 2.4.26, 2.4.25, 2.4.23, 2.4.20, 2.4.18, 2.4.17, 2.4.16, 2.4.12, 2.4.10, 2.4.9, 2.4.7, 2.4.6, 2.4.4, 2.4.3, 2.4.2, 2.4.1, 2.4.0 |

### important: mod\_ssl 2.4.37 remote DoS when used with OpenSSL 1.1.1 ([CVE-2019-0190](https://www.cve.org/CVERecord?id=CVE-2019-0190))

A bug exists in the way mod\_ssl handled client renegotiations. A remote attacker could send a carefully crafted request that would cause mod\_ssl to enter a loop leading to a denial of service. This bug can be only triggered with Apache HTTP Server version 2.4.37 when using OpenSSL version 1.1.1 or later, due to an interaction in changes to handling of renegotiation attempts.

Acknowledgements: The issue was discovered through user bug reports.

| Reported to security team | 2019-01-01 |
| --- | --- |
| Issue public | 2019-01-22 |
| Update 2.4.38 released | 2019-02-28 |
| Affects | 2.4.37 |

# Fixed in Apache HTTP Server 2.4.35

### low: DoS for HTTP/2 connections by continuous SETTINGS ([CVE-2018-11763](https://www.cve.org/CVERecord?id=CVE-2018-11763))

By sending continous SETTINGS frames of maximum size an ongoing HTTP/2 connection could be kept busy and would never time out. This can be abused for a DoS on the server. This only affect a server that has enabled the h2 protocol.

Acknowledgements: The issue was discovered by Gal Goldshtein of F5 Networks.

| Reported to security team | 2018-07-18 |
| --- | --- |
| Issue public | 2018-09-25 |
| Update 2.4.35 released | 2018-09-29 |
| Affects | 2.4.34, 2.4.33, 2.4.30, 2.4.29, 2.4.28, 2.4.27, 2.4.26, 2.4.25, 2.4.23, 2.4.20, 2.4.18 |

# Fixed in Apache HTTP Server 2.4.34

### low: DoS for HTTP/2 connections by crafted requests ([CVE-2018-1333](https://www.cve.org/CVERecord?id=CVE-2018-1333))

By specially crafting HTTP/2 requests, workers would be allocated 60 seconds longer than necessary, leading to worker exhaustion and a denial of service. This issue only affects servers that have configured and enabled HTTP/2 support, which is not the default

Acknowledgements: The issue was discovered by Craig Young of Tripwire VERT.

| Reported to security team | 2018-05-08 |
| --- | --- |
| Issue public | 2018-07-18 |
| Update 2.4.34 released | 2018-07-15 |
| Affects | 2.4.33, 2.4.29, 2.4.28, 2.4.27, 2.4.26, 2.4.25, 2.4.23, 2.4.20, 2.4.18 |

### moderate: mod\_md, DoS via Coredumps on specially crafted requests ([CVE-2018-8011](https://www.cve.org/CVERecord?id=CVE-2018-8011))

By specially crafting HTTP requests, the mod\_md challenge handler would dereference a NULL pointer and cause the child process to segfault. This could be used to DoS the server.

Acknowledgements: The issue was discovered by Daniel Caminada <daniel.caminada@ergon.ch>.

| Reported to security team | 2018-06-29 |
| --- | --- |
| Issue public | 2018-07-18 |
| Update 2.4.34 released | 2018-07-15 |
| Affects | 2.4.33 |

# Fixed in Apache HTTP Server 2.4.33

### low: Out of bound write in mod\_authnz\_ldap when using too small Accept-Language values ([CVE-2017-15710](https://www.cve.org/CVERecord?id=CVE-2017-15710))

mod\_authnz\_ldap, if configured with AuthLDAPCharsetConfig, uses the Accept-Language header value to lookup the right charset encoding when verifying the user's credentials. If the header value is not present in the charset conversion table, a fallback mechanism is used to truncate it to a two characters value to allow a quick retry (for example, 'en-US' is truncated to 'en'). A header value of less than two characters forces an out of bound write of one NUL byte to a memory location that is not part of the string. In the worst case, quite unlikely, the process would crash which could be used as a Denial of Service attack. In the more likely case, this memory is already reserved for future use and the issue has no effect at all.

Acknowledgements: The Apache HTTP Server security team would like to thank Alex Nichols and Jakob Hirsch for reporting this issue.

| Reported to security team | 2017-12-07 |
| --- | --- |
| Issue public | 2018-03-21 |
| Update 2.4.33 released | 2018-03-21 |
| Affects | 2.4.29, 2.4.28, 2.4.27, 2.4.26, 2.4.25, 2.4.23, 2.4.20, 2.4.18, 2.4.17, 2.4.16, 2.4.12, 2.4.10, 2.4.9, 2.4.7, 2.4.6, 2.4.4, 2.4.3, 2.4.2, 2.4.1 |

### low: <FilesMatch> bypass with a trailing newline in the file name ([CVE-2017-15715](https://www.cve.org/CVERecord?id=CVE-2017-15715))

The expression specified in <FilesMatch> could match '$' to a newline character in a malicious filename, rather than matching only the end of the filename. This could be exploited in environments where uploads of some files are are externally blocked, but only by matching the trailing portion of the filename.

Acknowledgements: The issue was discovered by Elar Lang - security.elarlang.eu

| Reported to security team | 2017-11-24 |
| --- | --- |
| Issue public | 2018-03-21 |
| Update 2.4.33 released | 2018-03-21 |
| Affects | 2.4.29, 2.4.28, 2.4.27, 2.4.26, 2.4.25, 2.4.23, 2.4.20, 2.4.18, 2.4.17, 2.4.16, 2.4.12, 2.4.10, 2.4.9, 2.4.7, 2.4.6, 2.4.4, 2.4.3, 2.4.2, 2.4.1 |

### moderate: Tampering of mod\_session data for CGI applications ([CVE-2018-1283](https://www.cve.org/CVERecord?id=CVE-2018-1283))

When mod\_session is configured to forward its session data to CGI applications (SessionEnv on, not the default), a remote user may influence their content by using a "Session" header. This comes from the "HTTP\_SESSION" variable name used by mod\_session to forward its data to CGIs, since the prefix "HTTP\_" is also used by the Apache HTTP Server to pass HTTP header fields, per CGI specifications. The severity is set to Moderate because "SessionEnv on" is not a default nor common configuration, it should be considered more severe when this is the case though, because of the possible remote exploitation.

Acknowledgements: The issue was discovered internally by the Apache HTTP Server team.

| Reported to security team | 2017-11-14 |
| --- | --- |
| Issue public | 2018-03-21 |
| Update 2.4.33 released | 2018-03-21 |
| Affects | 2.4.29, 2.4.28, 2.4.27, 2.4.26, 2.4.25, 2.4.23, 2.4.20, 2.4.18, 2.4.17, 2.4.16, 2.4.12, 2.4.10, 2.4.9, 2.4.7, 2.4.6, 2.4.4, 2.4.3, 2.4.2, 2.4.1 |

### low: Possible out of bound access after failure in reading the HTTP request ([CVE-2018-1301](https://www.cve.org/CVERecord?id=CVE-2018-1301))

A specially crafted request could have crashed the Apache HTTP Server prior to version 2.4.33, due to an out of bound access after a size limit is reached by reading the HTTP header. This vulnerability is considered very hard if not impossible to trigger in non-debug mode (both log and build level), so it is classified as low risk for common server usage.

Acknowledgements: The issue was discovered by Robert Swiecki, bug found by honggfuzz.

| Reported to security team | 2018-01-23 |
| --- | --- |
| Issue public | 2018-03-21 |
| Update 2.4.33 released | 2018-03-21 |
| Affects | 2.4.29, 2.4.28, 2.4.27, 2.4.26, 2.4.25, 2.4.23, 2.4.20, 2.4.18, 2.4.17, 2.4.16, 2.4.12, 2.4.10, 2.4.9, 2.4.7, 2.4.6, 2.4.4, 2.4.3, 2.4.2, 2.4.1 |

### low: Possible write of after free on HTTP/2 stream shutdown ([CVE-2018-1302](https://www.cve.org/CVERecord?id=CVE-2018-1302))

When an HTTP/2 stream was destroyed after being handled, the Apache HTTP Server prior to version 2.4.33 could have written a NULL pointer potentially to an already freed memory. The memory pools maintained by the server make this vulnerabilty hard to trigger in usual configurations, the reporter and the team could not reproduce it outside debug builds, so it is classified as low risk.

Acknowledgements: The issue was discovered by Robert Swiecki, bug found by honggfuzz.

| Reported to security team | 2018-01-23 |
| --- | --- |
| Issue public | 2018-03-21 |
| Update 2.4.33 released | 2018-03-21 |
| Affects | 2.4.29, 2.4.28, 2.4.27, 2.4.26, 2.4.25, 2.4.23, 2.4.20, 2.4.18, 2.4.17 |

### low: Possible out of bound read in mod\_cache\_socache ([CVE-2018-1303](https://www.cve.org/CVERecord?id=CVE-2018-1303))

A specially crafted HTTP request header could have crashed the Apache HTTP Server prior to version 2.4.33 due to an out of bound read while preparing data to be cached in shared memory. It could be used as a Denial of Service attack against users of mod\_cache\_socache.

Acknowledgements: The issue was discovered by Robert Swiecki, bug found by honggfuzz.

| Reported to security team | 2018-01-23 |
| --- | --- |
| Issue public | 2018-03-21 |
| Update 2.4.33 released | 2018-03-21 |
| Affects | 2.4.29, 2.4.28, 2.4.27, 2.4.26, 2.4.25, 2.4.23, 2.4.20, 2.4.18, 2.4.17, 2.4.16, 2.4.12, 2.4.10, 2.4.9, 2.4.7, 2.4.6 |

### low: Weak Digest auth nonce generation in mod\_auth\_digest ([CVE-2018-1312](https://www.cve.org/CVERecord?id=CVE-2018-1312))

When generating an HTTP Digest authentication challenge, the nonce sent to prevent reply attacks was not correctly generated using a pseudo-random seed. In a cluster of servers using a common Digest authentication configuration, HTTP requests could be replayed across servers by an attacker without detection.

Acknowledgements: The issue was discovered by Nicolas Daniels.

| Reported to security team | 2013-03-05 |
| --- | --- |
| Issue public | 2018-03-21 |
| Update 2.4.33 released | 2018-03-21 |
| Affects | 2.4.29, 2.4.28, 2.4.27, 2.4.26, 2.4.25, 2.4.23, 2.4.20, 2.4.18, 2.4.17, 2.4.16, 2.4.12, 2.4.10, 2.4.9, 2.4.7, 2.4.6, 2.4.4, 2.4.3, 2.4.2, 2.4.1 |

# Fixed in Apache HTTP Server 2.4.28

### low: Use-after-free when using <Limit > with an unrecognized method in .htaccess ("OptionsBleed") ([CVE-2017-9798](https://www.cve.org/CVERecord?id=CVE-2017-9798))

When an unrecognized HTTP Method is given in an <Limit {method}> directive in an .htaccess file, and that .htaccess file is processed by the corresponding request, the global methods table is corrupted in the current worker process, resulting in erratic behaviour. This behavior may be avoided by listing all unusual HTTP Methods in a global httpd.conf RegisterHttpMethod directive in httpd release 2.4.25 and later. To permit other .htaccess directives while denying the <Limit > directive, see the AllowOverrideList directive. Source code patch (2.4) is at; CVE-2017-9798-patch-2.4.patch Source code patch (2.2) is at; CVE-2017-9798-patch-2.2.patch Note 2.2 is end-of-life, no further release with this fix is planned. Users are encouraged to migrate to 2.4.28 or later for this and other fixes.

Acknowledgements: We would like to thank Hanno Böck for reporting this issue.

| Reported to security team | 2017-07-12 |
| --- | --- |
| Issue public | 2017-09-18 |
| Update 2.4.28 released | 2017-10-05 |
| Update 2.2.35-never released | -- |
| Affects | 2.4.27, 2.4.26, 2.4.25, 2.4.23, 2.4.20, 2.4.18, 2.4.17, 2.4.16, 2.4.12, 2.4.10, 2.4.9, 2.4.7, 2.4.6, 2.4.4, 2.4.3, 2.4.2, 2.4.1, 2.2.34, 2.2.32, 2.2.31, 2.2.29, 2.2.27, 2.2.26, 2.2.25, 2.2.24, 2.2.23, 2.2.22, 2.2.21, 2.2.20, 2.2.19, 2.2.18, 2.2.17, 2.2.16, 2.2.15, 2.2.14, 2.2.13, 2.2.12, 2.2.11, 2.2.10, 2.2.9, 2.2.8, 2.2.6, 2.2.5, 2.2.4, 2.2.3, 2.2.2, 2.2.0 |

# Fixed in Apache HTTP Server 2.4.27

### important: Uninitialized memory reflection in mod\_auth\_digest ([CVE-2017-9788](https://www.cve.org/CVERecord?id=CVE-2017-9788))

The value placeholder in [Proxy-]Authorization headers of type 'Digest' was not initialized or reset before or between successive key=value assignments. by mod\_auth\_digest. Providing an initial key with no '=' assignment could reflect the stale value of uninitialized pool memory used by the prior request, leading to leakage of potentially confidential information, and a segfault.

Acknowledgements: We would like to thank Robert ÅwiÄcki for reporting this issue.

| Reported to security team | 2017-06-28 |
| --- | --- |
| Issue public | 2017-07-11 |
| Update 2.4.27 released | 2017-07-11 |
| Update 2.2.34 released | 2017-07-11 |
| Affects | 2.4.26, 2.4.25, 2.4.23, 2.4.20, 2.4.18, 2.4.17, 2.4.16, 2.4.12, 2.4.10, 2.4.9, 2.4.7, 2.4.6, 2.4.4, 2.4.3, 2.4.2, 2.4.1, 2.2.32, 2.2.31, 2.2.29, 2.2.27, 2.2.26, 2.2.25, 2.2.24, 2.2.23, 2.2.22, 2.2.21, 2.2.20, 2.2.19, 2.2.18, 2.2.17, 2.2.16, 2.2.15, 2.2.14, 2.2.13, 2.2.12, 2.2.11, 2.2.10, 2.2.9, 2.2.8, 2.2.6, 2.2.5, 2.2.4, 2.2.3, 2.2.2, 2.2.0 |

### important: Read after free in mod\_http2 ([CVE-2017-9789](https://www.cve.org/CVERecord?id=CVE-2017-9789))

When under stress, closing many connections, the HTTP/2 handling code would sometimes access memory after it has been freed, resulting in potentially erratic behaviour.

Acknowledgements: We would like to thank Robert ÅwiÄcki for reporting this issue.

| Reported to security team | 2017-06-30 |
| --- | --- |
| Issue public | 2017-07-11 |
| Update 2.4.27 released | 2017-07-11 |
| Affects | 2.4.26 |

# Fixed in Apache HTTP Server 2.4.26

### important: ap\_get\_basic\_auth\_pw() Authentication Bypass ([CVE-2017-3167](https://www.cve.org/CVERecord?id=CVE-2017-3167))

Use of the ap\_get\_basic\_auth\_pw() by third-party modules outside of the authentication phase may lead to authentication requirements being bypassed. Third-party module writers SHOULD use ap\_get\_basic\_auth\_components(), available in 2.2.34 and 2.4.26, instead of ap\_get\_basic\_auth\_pw(). Modules which call the legacy ap\_get\_basic\_auth\_pw() during the authentication phase MUST either immediately authenticate the user after the call, or else stop the request immediately with an error response, to avoid incorrectly authenticating the current request.

Acknowledgements: We would like to thank Emmanuel Dreyfus for reporting this issue.

| Reported to security team | 2017-02-06 |
| --- | --- |
| Issue public | 2017-06-19 |
| Update 2.4.26 released | 2017-06-19 |
| Update 2.2.34 released | 2017-07-11 |
| Affects | 2.4.25, 2.4.23, 2.4.20, 2.4.18, 2.4.17, 2.4.16, 2.4.12, 2.4.10, 2.4.9, 2.4.7, 2.4.6, 2.4.4, 2.4.3, 2.4.2, 2.4.1, 2.2.32, 2.2.31, 2.2.29, 2.2.27, 2.2.26, 2.2.25, 2.2.24, 2.2.23, 2.2.22, 2.2.21, 2.2.20, 2.2.19, 2.2.18, 2.2.17, 2.2.16, 2.2.15, 2.2.14, 2.2.13, 2.2.12, 2.2.11, 2.2.10, 2.2.9, 2.2.8, 2.2.6, 2.2.5, 2.2.4, 2.2.3, 2.2.2, 2.2.0 |

### important: mod\_ssl Null Pointer Dereference ([CVE-2017-3169](https://www.cve.org/CVERecord?id=CVE-2017-3169))

mod\_ssl may dereference a NULL pointer when third-party modules call ap\_hook\_process\_connection() during an HTTP request to an HTTPS port.

Acknowledgements: We would like to thank Vasileios Panopoulos and AdNovum Informatik AG for reporting this issue.

| Reported to security team | 2016-12-05 |
| --- | --- |
| Issue public | 2017-06-19 |
| Update 2.4.26 released | 2017-06-19 |
| Update 2.2.34 released | 2017-07-11 |
| Affects | 2.4.25, 2.4.23, 2.4.20, 2.4.18, 2.4.17, 2.4.16, 2.4.12, 2.4.10, 2.4.9, 2.4.7, 2.4.6, 2.4.4, 2.4.3, 2.4.2, 2.4.1, 2.2.32, 2.2.31, 2.2.29, 2.2.27, 2.2.26, 2.2.25, 2.2.24, 2.2.23, 2.2.22, 2.2.21, 2.2.20, 2.2.19, 2.2.18, 2.2.17, 2.2.16, 2.2.15, 2.2.14, 2.2.13, 2.2.12, 2.2.11, 2.2.10, 2.2.9, 2.2.8, 2.2.6, 2.2.5, 2.2.4, 2.2.3, 2.2.2, 2.2.0 |

### important: mod\_http2 Null Pointer Dereference ([CVE-2017-7659](https://www.cve.org/CVERecord?id=CVE-2017-7659))

A maliciously constructed HTTP/2 request could cause mod\_http2 to dereference a NULL pointer and crash the server process.

Acknowledgements: We would like to thank Robert ÅwiÄcki for reporting this issue.

| Reported to security team | 2016-11-18 |
| --- | --- |
| Issue public | 2017-06-19 |
| Update 2.4.26 released | 2017-06-19 |
| Affects | 2.4.25 |

### important: ap\_find\_token() Buffer Overread ([CVE-2017-7668](https://www.cve.org/CVERecord?id=CVE-2017-7668))

The HTTP strict parsing changes added in 2.2.32 and 2.4.24 introduced a bug in token list parsing, which allows ap\_find\_token() to search past the end of its input string. By maliciously crafting a sequence of request headers, an attacker may be able to cause a segmentation fault, or to force ap\_find\_token() to return an incorrect value.

Acknowledgements: We would like to thank Javier Jiménez (javijmor@gmail.com) for reporting this issue.

| Reported to security team | 2017-05-06 |
| --- | --- |
| Issue public | 2017-06-19 |
| Update 2.4.26 released | 2017-06-19 |
| Update 2.2.34 released | 2017-07-11 |
| Affects | 2.4.25, 2.2.32 |

### important: mod\_mime Buffer Overread ([CVE-2017-7679](https://www.cve.org/CVERecord?id=CVE-2017-7679))

mod\_mime can read one byte past the end of a buffer when sending a malicious Content-Type response header.

Acknowledgements: We would like to thank ChenQin and Hanno Böck for reporting this issue.

| Reported to security team | 2015-11-15 |
| --- | --- |
| Issue public | 2017-06-19 |
| Update 2.4.26 released | 2017-06-19 |
| Update 2.2.34 released | 2017-07-11 |
| Affects | 2.4.25, 2.4.23, 2.4.20, 2.4.18, 2.4.17, 2.4.16, 2.4.12, 2.4.10, 2.4.9, 2.4.7, 2.4.6, 2.4.4, 2.4.3, 2.4.2, 2.4.1, 2.2.32, 2.2.31, 2.2.29, 2.2.27, 2.2.26, 2.2.25, 2.2.24, 2.2.23, 2.2.22, 2.2.21, 2.2.20, 2.2.19, 2.2.18, 2.2.17, 2.2.16, 2.2.15, 2.2.14, 2.2.13, 2.2.12, 2.2.11, 2.2.10, 2.2.9, 2.2.8, 2.2.6, 2.2.5, 2.2.4, 2.2.3, 2.2.2, 2.2.0 |

# Fixed in Apache HTTP Server 2.4.25

### low: Padding Oracle in Apache mod\_session\_crypto ([CVE-2016-0736](https://www.cve.org/CVERecord?id=CVE-2016-0736))

Prior to Apache HTTP release 2.4.25, mod\_sessioncrypto was encrypting its data/cookie using the configured ciphers with possibly either CBC or ECB modes of operation (AES256-CBC by default), hence no selectable or builtin authenticated encryption. This made it vulnerable to padding oracle attacks, particularly with CBC. An authentication tag (SipHash MAC) is now added to prevent such attacks.

Acknowledgements: We would like to thank individuals at the RedTeam Pentesting GmbH for reporting this issue.

| Reported to security team | 2016-01-20 |
| --- | --- |
| Issue public | 2016-12-20 |
| Update 2.4.25 released | 2016-12-20 |
| Affects | 2.4.23, 2.4.20, 2.4.18, 2.4.17, 2.4.16, 2.4.12, 2.4.10, 2.4.9, 2.4.7, 2.4.6, 2.4.4, 2.4.3, 2.4.2, 2.4.1 |

### low: DoS vulnerability in mod\_auth\_digest ([CVE-2016-2161](https://www.cve.org/CVERecord?id=CVE-2016-2161))

Malicious input to mod\_auth\_digest will cause the server to crash, and each instance continues to crash even for subsequently valid requests.

Acknowledgements: We would like to thank Maksim Malyutin for reporting this issue.

| Reported to security team | 2016-07-11 |
| --- | --- |
| Issue public | 2016-12-20 |
| Update 2.4.25 released | 2016-12-20 |
| Affects | 2.4.23, 2.4.20, 2.4.18, 2.4.17, 2.4.16, 2.4.12, 2.4.10, 2.4.9, 2.4.7, 2.4.6, 2.4.4, 2.4.3, 2.4.2, 2.4.1 |

### moderate: mod\_userdir CRLF injection ([CVE-2016-4975](https://www.cve.org/CVERecord?id=CVE-2016-4975))

Possible CRLF injection allowing HTTP response splitting attacks for sites which use mod\_userdir. This issue was mitigated by changes made in 2.4.25 and 2.2.32 which prohibit CR or LF injection into the "Location" or other outbound header key or value.

Acknowledgements: The issue was discovered by Sergey Bobrov

| Reported to security team | 2016-07-24 |
| --- | --- |
| Issue public | 2018-08-14 |
| Update 2.4.25 released | 2016-12-20 |
| Update 2.2.32 released | 2017-01-13 |
| Affects | 2.4.23, 2.4.20, 2.4.18, 2.4.17, 2.4.16, 2.4.12, 2.4.10, 2.4.9, 2.4.7, 2.4.6, 2.4.4, 2.4.3, 2.4.2, 2.4.1, 2.2.31, 2.2.29, 2.2.27, 2.2.26, 2.2.25, 2.2.24, 2.2.23, 2.2.22, 2.2.21, 2.2.20, 2.2.19, 2.2.18, 2.2.17, 2.2.16, 2.2.15, 2.2.14, 2.2.13, 2.2.12, 2.2.11, 2.2.10, 2.2.9, 2.2.8, 2.2.6, 2.2.5, 2.2.4, 2.2.3, 2.2.2, 2.2.0 |

### n/a: HTTP\_PROXY environment variable "httpoxy" mitigation ([CVE-2016-5387](https://www.cve.org/CVERecord?id=CVE-2016-5387))

HTTP\_PROXY is a well-defined environment variable in a CGI process, which collided with a number of libraries which failed to avoid colliding with this CGI namespace. A mitigation is provided for the httpd CGI environment to avoid populating the "HTTP\_PROXY" variable from a "Proxy:" header, which has never been registered by IANA. This workaround and patch are documented in the ASF Advisory at asf-httpoxy-response.txt and incorporated in the 2.4.25 and 2.2.32 releases. Note: This is not assigned an httpd severity, as it is a defect in other software which overloaded well-established CGI environment variables, and does not reflect an error in HTTP server software.

Acknowledgements: We would like to thank Dominic Scheirlinck and Scott Geary of Vend for reporting and proposing a fix for this issue.

| Reported to security team | 2016-07-02 |
| --- | --- |
| Issue public | 2016-07-18 |
| Update 2.4.25 released | 2016-12-20 |
| Update 2.2.32 released | 2016-07-18 |
| Affects | 2.4.23, 2.4.20, 2.4.18, 2.4.17, 2.4.16, 2.4.12, 2.4.10, 2.4.9, 2.4.7, 2.4.6, 2.4.4, 2.4.3, 2.4.2, 2.4.1, 2.2.31, 2.2.29, 2.2.27, 2.2.26, 2.2.25, 2.2.24, 2.2.23, 2.2.22, 2.2.21, 2.2.20, 2.2.19, 2.2.18, 2.2.17, 2.2.16, 2.2.15, 2.2.14, 2.2.13, 2.2.12, 2.2.11, 2.2.10, 2.2.9, 2.2.8, 2.2.6, 2.2.5, 2.2.4, 2.2.3, 2.2.2, 2.2.0 |

### low: HTTP/2 CONTINUATION denial of service ([CVE-2016-8740](https://www.cve.org/CVERecord?id=CVE-2016-8740))

The HTTP/2 protocol implementation (mod\_http2) had an incomplete handling of the LimitRequestFields directive. This allowed an attacker to inject unlimited request headers into the server, leading to eventual memory exhaustion.

Acknowledgements: We would like to thank Naveen Tiwari and CDF/SEFCOM at Arizona State University to reporting this issue.

| Reported to security team | 2016-11-22 |
| --- | --- |
| Issue public | 2016-12-04 |
| Update 2.4.25 released | 2016-12-20 |
| Affects | 2.4.23, 2.4.20, 2.4.18, 2.4.17 |

### important: Apache HTTP Request Parsing Whitespace Defects ([CVE-2016-8743](https://www.cve.org/CVERecord?id=CVE-2016-8743))

Apache HTTP Server, prior to release 2.4.25 (and 2.2.32), accepted a broad pattern of unusual whitespace patterns from the user-agent, including bare CR, FF, VTAB in parsing the request line and request header lines, as well as HTAB in parsing the request line. Any bare CR present in request lines was treated as whitespace and remained in the request field member "the\_request", while a bare CR in the request header field name would be honored as whitespace, and a bare CR in the request header field value was retained the input headers array. Implied additional whitespace was accepted in the request line and prior to the ':' delimiter of any request header lines.

RFC7230 Section 3.5 calls out some of these whitespace exceptions, and section 3.2.3 eliminated and clarified the role of implied whitespace in the grammer of this specification. Section 3.1.1 requires exactly one single SP between the method and request-target, and between the request-target and HTTP-version, followed immediately by a CRLF sequence. None of these fields permit any (unencoded) CTL character whatsoever. Section 3.2.4 explicitly disallowed any whitespace from the request header field prior to the ':' character, while Section 3.2 disallows all CTL characters in the request header line other than the HTAB character as whitespace.

These defects represent a security concern when httpd is participating in any chain of proxies or interacting with back-end application servers, either through mod\_proxy or using conventional CGI mechanisms. In each case where one agent accepts such CTL characters and does not treat them as whitespace, there is the possiblity in a proxy chain of generating two responses from a server behind the uncautious proxy agent. In a sequence of two requests, this results in request A to the first proxy being interpreted as requests A + A' by the backend server, and if requests A and B were submitted to the first proxy in a keepalive connection, the proxy may interpret response A' as the response to request B, polluting the cache or potentially serving the A' content to a different downstream user-agent.

These defects are addressed with the release of Apache HTTP Server 2.4.25 and coordinated by a new directive; HttpProtocolOptions Strict which is the default behavior of 2.4.25 and later.

By toggling from 'Strict' behavior to 'Unsafe' behavior, some of the restrictions may be relaxed to allow some invalid HTTP/1.1 clients to communicate with the server, but this will reintroduce the possibility of the problems described in this assessment. Note that relaxing the behavior to 'Unsafe' will still not permit raw CTLs other than HTAB (where permitted), but will allow other RFC requirements to not be enforced, such as exactly two SP characters in the request line.

Acknowledgements: We would like to thank David Dennerline at IBM Security's X-Force Researchers as well as Régis Leroy for each reporting this issue.

| Reported to security team | 2016-02-10 |
| --- | --- |
| Issue public | 2016-12-20 |
| Update 2.4.25 released | 2016-12-20 |
| Update 2.2.32 released | 2017-01-13 |
| Affects | 2.4.23, 2.4.20, 2.4.18, 2.4.17, 2.4.16, 2.4.12, 2.4.10, 2.4.9, 2.4.7, 2.4.6, 2.4.4, 2.4.3, 2.4.2, 2.4.1, 2.2.31, 2.2.29, 2.2.27, 2.2.26, 2.2.25, 2.2.24, 2.2.23, 2.2.22, 2.2.21, 2.2.20, 2.2.19, 2.2.18, 2.2.17, 2.2.16, 2.2.15, 2.2.14, 2.2.13, 2.2.12, 2.2.11, 2.2.10, 2.2.9, 2.2.8, 2.2.6, 2.2.5, 2.2.4, 2.2.3, 2.2.2, 2.2.0 |

### low: IP address spoofing when proxying using mod\_remoteip and mod\_rewrite ([CVE-2020-11985](https://www.cve.org/CVERecord?id=CVE-2020-11985))

For configurations using proxying with mod\_remoteip and certain mod\_rewrite rules, an attacker could spoof their IP address for logging and PHP scripts. Note this issue was fixed in Apache HTTP Server 2.4.24 but was retrospectively allocated a low severity CVE in 2020.

Acknowledgements:

| Reported to security team | 2016-10-13 |
| --- | --- |
| Issue public | 2020-08-07 |
| Update 2.4.25 released | 2020-08-07 |
| Affects | 2.4.23, 2.4.20, 2.4.18, 2.4.17, 2.4.16, 2.4.12, 2.4.10, 2.4.9, 2.4.7, 2.4.6, 2.4.4, 2.4.3, 2.4.2, 2.4.1 |

# Fixed in Apache HTTP Server 2.4.23

### important: TLS/SSL X.509 client certificate auth bypass with HTTP/2 ([CVE-2016-4979](https://www.cve.org/CVERecord?id=CVE-2016-4979))

For configurations enabling support for HTTP/2, SSL client certificate validation was not enforced if configured, allowing clients unauthorized access to protected resources over HTTP/2. This issue affected releases 2.4.18 and 2.4.20 only.

Acknowledgements: This issue was reported by Erki Aring.

| Reported to security team | 2016-06-30 |
| --- | --- |
| Issue public | 2016-07-05 |
| Update 2.4.23 released | 2016-07-05 |
| Affects | 2.4.20, 2.4.18 |

# Fixed in Apache HTTP Server 2.4.20

### low: mod\_http2: denial of service by thread starvation ([CVE-2016-1546](https://www.cve.org/CVERecord?id=CVE-2016-1546))

By manipulating the flow control windows on streams, a client was able to block server threads for long times, causing starvation of worker threads. Connections could still be opened, but no streams where processed for these. This issue affected HTTP/2 support in 2.4.17 and 2.4.18.

Acknowledgements: This issue was reported by Noam Mazor.

| Reported to security team | 2016-02-02 |
| --- | --- |
| Issue public | 2016-04-11 |
| Update 2.4.20 released | 2016-04-11 |
| Affects | 2.4.18, 2.4.17 |

# Fixed in Apache HTTP Server 2.4.16

### low: mod\_lua: Crash in websockets PING handling ([CVE-2015-0228](https://www.cve.org/CVERecord?id=CVE-2015-0228))

A stack recursion crash in the mod\_lua module was found. A Lua script executing the r:wsupgrade() function could crash the process if a malicious client sent a carefully crafted PING request. This issue affected releases 2.4.7 through 2.4.12 inclusive.

Acknowledgements: This issue was reported by Guido Vranken.

| Reported to security team | 2015-01-28 |
| --- | --- |
| Issue public | 2015-02-04 |
| Update 2.4.16 released | 2015-07-15 |
| Affects | 2.4.12, 2.4.10, 2.4.9, 2.4.7 |

### low: Crash in ErrorDocument 400 handling ([CVE-2015-0253](https://www.cve.org/CVERecord?id=CVE-2015-0253))

A crash in ErrorDocument handling was found. If ErrorDocument 400 was configured pointing to a local URL-path with the INCLUDES filter active, a NULL dereference would occur when handling the error, causing the child process to crash. This issue affected the 2.4.12 release only.

| Reported to security team | 2015-02-03 |
| --- | --- |
| Issue public | 2015-03-05 |
| Update 2.4.16 released | 2015-07-15 |
| Affects | 2.4.12 |

### low: HTTP request smuggling attack against chunked request parser ([CVE-2015-3183](https://www.cve.org/CVERecord?id=CVE-2015-3183))

An HTTP request smuggling attack was possible due to a bug in parsing of chunked requests. A malicious client could force the server to misinterpret the request length, allowing cache poisoning or credential hijacking if an intermediary proxy is in use.

Acknowledgements: This issue was reported by Régis Leroy.

| Reported to security team | 2015-04-04 |
| --- | --- |
| Issue public | 2015-06-09 |
| Update 2.4.16 released | 2015-07-15 |
| Update 2.2.31 released | 2015-07-16 |
| Affects | 2.4.12, 2.4.10, 2.4.9, 2.4.7, 2.4.6, 2.4.4, 2.4.3, 2.4.2, 2.4.1, 2.2.29, 2.2.27, 2.2.26, 2.2.25, 2.2.24, 2.2.23, 2.2.22, 2.2.21, 2.2.20, 2.2.19, 2.2.18, 2.2.17, 2.2.16, 2.2.15, 2.2.14, 2.2.13, 2.2.12, 2.2.11, 2.2.10, 2.2.9, 2.2.8, 2.2.6, 2.2.5, 2.2.4, 2.2.3, 2.2.2, 2.2.0 |

### low: ap\_some\_auth\_required API unusable ([CVE-2015-3185](https://www.cve.org/CVERecord?id=CVE-2015-3185))

A design error in the "ap\_some\_auth\_required" function renders the API unusuable in httpd 2.4.x. In particular the API is documented to answering if the request required authentication but only answers if there are Require lines in the applicable configuration. Since 2.4.x Require lines are used for authorization as well and can appear in configurations even when no authentication is required and the request is entirely unrestricted. This could lead to modules using this API to allow access when they should otherwise not do so. API users should use the new ap\_some\_authn\_required API added in 2.4.16 instead.

Acknowledgements: This issue was reported by Ben Reser.

| Reported to security team | 2013-08-05 |
| --- | --- |
| Issue public | 2015-06-09 |
| Update 2.4.16 released | 2015-07-15 |
| Affects | 2.4.12, 2.4.10, 2.4.9, 2.4.7, 2.4.6, 2.4.5, 2.4.4, 2.4.3, 2.4.2, 2.4.1, 2.4.0 |

# Fixed in Apache HTTP Server 2.4.12

### low: HTTP Trailers processing bypass ([CVE-2013-5704](https://www.cve.org/CVERecord?id=CVE-2013-5704))

HTTP trailers could be used to replace HTTP headers late during request processing, potentially undoing or otherwise confusing modules that examined or modified request headers earlier. This fix adds the "MergeTrailers" directive to restore legacy behavior.

Acknowledgements: This issue was reported by Martin Holst Swende.

| Reported to security team | 2013-09-06 |
| --- | --- |
| Issue public | 2013-10-19 |
| Update 2.4.12 released | 2015-01-30 |
| Update 2.2.29 released | 2014-09-03 |
| Affects | 2.4.10, 2.4.9, 2.4.7, 2.4.6, 2.4.4, 2.4.3, 2.4.2, 2.4.1, 2.2.27, 2.2.26, 2.2.25, 2.2.24, 2.2.23, 2.2.22, 2.2.21, 2.2.20, 2.2.19, 2.2.18, 2.2.17, 2.2.16, 2.2.15, 2.2.14, 2.2.13, 2.2.12, 2.2.11, 2.2.10, 2.2.9, 2.2.8, 2.2.6, 2.2.5, 2.2.4, 2.2.3, 2.2.2, 2.2.0 |

### low: mod\_cache crash with empty Content-Type header ([CVE-2014-3581](https://www.cve.org/CVERecord?id=CVE-2014-3581))

A NULL pointer deference was found in mod\_cache. A malicious HTTP server could cause a crash in a caching forward proxy configuration. This crash would only be a denial of service if using a threaded MPM.

| Reported to security team | 2014-09-08 |
| --- | --- |
| Issue public | 2014-09-08 |
| Update 2.4.12 released | 2015-01-30 |
| Affects | 2.4.10, 2.4.9, 2.4.7, 2.4.6, 2.4.4, 2.4.3, 2.4.2, 2.4.1 |

### low: mod\_proxy\_fcgi out-of-bounds memory read ([CVE-2014-3583](https://www.cve.org/CVERecord?id=CVE-2014-3583))

An out-of-bounds memory read was found in mod\_proxy\_fcgi. A malicious FastCGI server could send a carefully crafted response which could lead to a crash when reading past the end of a heap memory or stack buffer. This issue affects version 2.4.10 only.

Acknowledgements: This issue was reported by Teguh P. Alko.

| Reported to security team | 2014-09-17 |
| --- | --- |
| Issue public | 2014-11-12 |
| Update 2.4.12 released | 2015-01-30 |
| Affects | 2.4.10 |

### low: mod\_lua multiple "Require" directive handling is broken ([CVE-2014-8109](https://www.cve.org/CVERecord?id=CVE-2014-8109))

Fix handling of the Require line in mod\_lau when a LuaAuthzProvider is used in multiple Require directives with different arguments. This could lead to different authentication rules than expected.

| Reported to security team | 2014-11-09 |
| --- | --- |
| Issue public | 2014-11-09 |
| Update 2.4.12 released | 2015-01-30 |
| Affects | 2.4.10, 2.4.9, 2.4.7, 2.4.6, 2.4.4, 2.4.3, 2.4.2, 2.4.1 |

# Fixed in Apache HTTP Server 2.4.10

### moderate: mod\_proxy denial of service ([CVE-2014-0117](https://www.cve.org/CVERecord?id=CVE-2014-0117))

A flaw was found in mod\_proxy in httpd versions 2.4.6 to 2.4.9. A remote attacker could send a carefully crafted request to a server configured as a reverse proxy, and cause the child process to crash. This could lead to a denial of service against a threaded MPM.

Acknowledgements: This issue was reported by Marek Kroemeke, AKAT-1 and 22733db72ab3ed94b5f8a1ffcde850251fe6f466 via HP ZDI

| Reported to security team | 2014-04-07 |
| --- | --- |
| Issue public | 2014-07-15 |
| Update 2.4.10 released | 2014-07-15 |
| Affects | 2.4.9, 2.4.7, 2.4.6 |

### moderate: mod\_deflate denial of service ([CVE-2014-0118](https://www.cve.org/CVERecord?id=CVE-2014-0118))

A resource consumption flaw was found in mod\_deflate. If request body decompression was configured (using the "DEFLATE" input filter), a remote attacker could cause the server to consume significant memory and/or CPU resources. The use of request body decompression is not a common configuration.

Acknowledgements: This issue was reported by Giancarlo Pellegrino and Davide Balzarotti

| Reported to security team | 2014-02-19 |
| --- | --- |
| Issue public | 2014-07-14 |
| Update 2.4.10 released | 2014-07-15 |
| Update 2.2.29 released | 2014-09-03 |
| Affects | 2.4.9, 2.4.7, 2.4.6, 2.4.4, 2.4.3, 2.4.2, 2.4.1, 2.2.27, 2.2.26, 2.2.25, 2.2.24, 2.2.23, 2.2.22, 2.2.21, 2.2.20, 2.2.19, 2.2.18, 2.2.17, 2.2.16, 2.2.15, 2.2.14, 2.2.13, 2.2.12, 2.2.11, 2.2.10, 2.2.9, 2.2.8, 2.2.6, 2.2.5, 2.2.4, 2.2.3, 2.2.2, 2.2.0 |

### moderate: mod\_status buffer overflow ([CVE-2014-0226](https://www.cve.org/CVERecord?id=CVE-2014-0226))

A race condition was found in mod\_status. An attacker able to access a public server status page on a server using a threaded MPM could send a carefully crafted request which could lead to a heap buffer overflow. Note that it is not a default or recommended configuration to have a public accessible server status page.

Acknowledgements: This issue was reported by Marek Kroemeke, AKAT-1 and 22733db72ab3ed94b5f8a1ffcde850251fe6f466 via HP ZDI

| Reported to security team | 2014-05-30 |
| --- | --- |
| Issue public | 2014-07-14 |
| Update 2.4.10 released | 2014-07-15 |
| Update 2.2.29 released | 2014-09-03 |
| Affects | 2.4.9, 2.4.7, 2.4.6, 2.4.4, 2.4.3, 2.4.2, 2.4.1, 2.2.27, 2.2.26, 2.2.25, 2.2.24, 2.2.23, 2.2.22, 2.2.21, 2.2.20, 2.2.19, 2.2.18, 2.2.17, 2.2.16, 2.2.15, 2.2.14, 2.2.13, 2.2.12, 2.2.11, 2.2.10, 2.2.9, 2.2.8, 2.2.6, 2.2.5, 2.2.4, 2.2.3, 2.2.2, 2.2.0 |

### important: mod\_cgid denial of service ([CVE-2014-0231](https://www.cve.org/CVERecord?id=CVE-2014-0231))

A flaw was found in mod\_cgid. If a server using mod\_cgid hosted CGI scripts which did not consume standard input, a remote attacker could cause child processes to hang indefinitely, leading to denial of service.

Acknowledgements: This issue was reported by Rainer Jung of the ASF

| Reported to security team | 2014-06-16 |
| --- | --- |
| Issue public | 2014-07-14 |
| Update 2.4.10 released | 2014-07-15 |
| Update 2.2.29 released | 2014-09-03 |
| Affects | 2.4.9, 2.4.7, 2.4.6, 2.4.4, 2.4.3, 2.4.2, 2.4.1, 2.2.27, 2.2.26, 2.2.25, 2.2.24, 2.2.23, 2.2.22, 2.2.21, 2.2.20, 2.2.19, 2.2.18, 2.2.17, 2.2.16, 2.2.15, 2.2.14, 2.2.13, 2.2.12, 2.2.11, 2.2.10, 2.2.9, 2.2.8, 2.2.6, 2.2.5, 2.2.4, 2.2.3, 2.2.2, 2.2.0 |

### important: WinNT MPM denial of service ([CVE-2014-3523](https://www.cve.org/CVERecord?id=CVE-2014-3523))

A flaw was found in the WinNT MPM in httpd versions 2.4.1 to 2.4.9, when using the default AcceptFilter for that platform. A remote attacker could send carefully crafted requests that would leak memory and eventually lead to a denial of service against the server.

Acknowledgements: This issue was reported by Jeff Trawick of the ASF

| Reported to security team | 2014-07-01 |
| --- | --- |
| Issue public | 2014-07-15 |
| Update 2.4.10 released | 2014-07-15 |
| Affects | 2.4.9, 2.4.7, 2.4.6, 2.4.4, 2.4.3, 2.4.2, 2.4.1 |

# Fixed in Apache HTTP Server 2.4.9

### moderate: mod\_dav crash ([CVE-2013-6438](https://www.cve.org/CVERecord?id=CVE-2013-6438))

XML parsing code in mod\_dav incorrectly calculates the end of the string when removing leading spaces and places a NUL character outside the buffer, causing random crashes. This XML parsing code is only used with DAV provider modules that support DeltaV, of which the only publicly released provider is mod\_dav\_svn.

Acknowledgements: This issue was reported by Ning Zhang & Amin Tora of Neustar

| Reported to security team | 2013-12-10 |
| --- | --- |
| Issue public | 2014-03-17 |
| Update 2.4.9 released | 2014-03-17 |
| Update 2.2.27 released | 2014-03-26 |
| Affects | 2.4.7, 2.4.6, 2.4.4, 2.4.3, 2.4.2, 2.4.1, 2.2.26, 2.2.25, 2.2.24, 2.2.23, 2.2.22, 2.2.21, 2.2.20, 2.2.19, 2.2.18, 2.2.17, 2.2.16, 2.2.15, 2.2.14, 2.2.13, 2.2.12, 2.2.11, 2.2.10, 2.2.9, 2.2.8, 2.2.6, 2.2.5, 2.2.4, 2.2.3, 2.2.2, 2.2.0 |

### low: mod\_log\_config crash ([CVE-2014-0098](https://www.cve.org/CVERecord?id=CVE-2014-0098))

A flaw was found in mod\_log\_config. A remote attacker could send a specific truncated cookie causing a crash. This crash would only be a denial of service if using a threaded MPM.

Acknowledgements: This issue was reported by Rainer M Canavan

| Reported to security team | 2014-02-25 |
| --- | --- |
| Issue public | 2014-03-17 |
| Update 2.4.9 released | 2014-03-17 |
| Update 2.2.27 released | 2014-03-26 |
| Affects | 2.4.7, 2.4.6, 2.4.4, 2.4.3, 2.4.2, 2.4.1, 2.2.26, 2.2.25, 2.2.24, 2.2.23, 2.2.22, 2.2.21, 2.2.20, 2.2.19, 2.2.18, 2.2.17, 2.2.16, 2.2.15, 2.2.14, 2.2.13, 2.2.12, 2.2.11, 2.2.10, 2.2.9, 2.2.8, 2.2.6, 2.2.5, 2.2.4, 2.2.3, 2.2.2, 2.2.0 |

# Fixed in Apache HTTP Server 2.4.7

### low: mod\_cache crash ([CVE-2013-4352](https://www.cve.org/CVERecord?id=CVE-2013-4352))

A NULL pointer dereference was found in mod\_cache. A malicious HTTP server could cause a crash in a caching forward proxy configuration. (Note that this vulnerability was fixed in the 2.4.7 release, but the security impact was not disclosed at the time of the release.)

| Reported to security team | 2013-09-14 |
| --- | --- |
| Issue public | 2014-07-14 |
| Update 2.4.7 released | 2013-11-26 |
| Affects | 2.4.6 |

# Fixed in Apache HTTP Server 2.4.6

### moderate: mod\_dav crash ([CVE-2013-1896](https://www.cve.org/CVERecord?id=CVE-2013-1896))

Sending a MERGE request against a URI handled by mod\_dav\_svn with the source href (sent as part of the request body as XML) pointing to a URI that is not configured for DAV will trigger a segfault.

Acknowledgements: This issue was reported by Ben Reser

| Reported to security team | 2013-03-07 |
| --- | --- |
| Issue public | 2013-05-23 |
| Update 2.4.6 released | 2013-07-22 |
| Update 2.2.25 released | 2013-07-22 |
| Affects | 2.4.4, 2.4.3, 2.4.2, 2.4.1, 2.2.23, 2.2.22, 2.2.21, 2.2.20, 2.2.19, 2.2.18, 2.2.17, 2.2.16, 2.2.15, 2.2.14, 2.2.13, 2.2.12, 2.2.11, 2.2.10, 2.2.9, 2.2.8, 2.2.6, 2.2.5, 2.2.4, 2.2.3, 2.2.2, 2.2.0 |

### moderate: mod\_session\_dbd session fixation flaw ([CVE-2013-2249](https://www.cve.org/CVERecord?id=CVE-2013-2249))

A flaw in mod\_session\_dbd caused it to proceed with save operations for a session without considering the dirty flag and the requirement for a new session ID.

Acknowledgements: This issue was reported by Takashi Sato

| Reported to security team | 2013-05-29 |
| --- | --- |
| Issue public | 2013-07-22 |
| Update 2.4.6 released | 2013-07-22 |
| Affects | 2.4.4, 2.4.3, 2.4.2, 2.4.1 |

# Fixed in Apache HTTP Server 2.4.4

### low: XSS due to unescaped hostnames ([CVE-2012-3499](https://www.cve.org/CVERecord?id=CVE-2012-3499))

Various XSS flaws due to unescaped hostnames and URIs HTML output in mod\_info, mod\_status, mod\_imagemap, mod\_ldap, and mod\_proxy\_ftp.

Acknowledgements: This issue was reported by Niels Heinen of Google

| Reported to security team | 2012-07-11 |
| --- | --- |
| Issue public | 2013-02-18 |
| Update 2.4.4 released | 2013-02-25 |
| Update 2.2.24 released | 2013-02-25 |
| Affects | 2.4.3, 2.4.2, 2.4.1, 2.2.23, 2.2.22, 2.2.21, 2.2.20, 2.2.19, 2.2.18, 2.2.17, 2.2.16, 2.2.15, 2.2.14, 2.2.13, 2.2.12, 2.2.11, 2.2.10, 2.2.9, 2.2.8, 2.2.6, 2.2.5, 2.2.4, 2.2.3, 2.2.2, 2.2.0 |

### moderate: XSS in mod\_proxy\_balancer ([CVE-2012-4558](https://www.cve.org/CVERecord?id=CVE-2012-4558))

A XSS flaw affected the mod\_proxy\_balancer manager interface.

Acknowledgements: This issue was reported by Niels Heinen of Google

| Reported to security team | 2012-10-07 |
| --- | --- |
| Issue public | 2013-02-18 |
| Update 2.4.4 released | 2013-02-25 |
| Update 2.2.24 released | 2013-02-25 |
| Affects | 2.4.3, 2.4.2, 2.4.1, 2.2.23, 2.2.22, 2.2.21, 2.2.20, 2.2.19, 2.2.18, 2.2.17, 2.2.16, 2.2.15, 2.2.14, 2.2.13, 2.2.12, 2.2.11, 2.2.10, 2.2.9, 2.2.8, 2.2.6, 2.2.5, 2.2.4, 2.2.3, 2.2.2, 2.2.0 |

# Fixed in Apache HTTP Server 2.4.3

### low: XSS in mod\_negotiation when untrusted uploads are supported ([CVE-2012-2687](https://www.cve.org/CVERecord?id=CVE-2012-2687))

Possible XSS for sites which use mod\_negotiation and allow untrusted uploads to locations which have MultiViews enabled. Note: This issue is also known as CVE-2008-0455.

| Reported to security team | 2012-05-31 |
| --- | --- |
| Issue public | 2012-06-13 |
| Update 2.2.23 released | 2012-09-13 |
| Update 2.4.3 released | 2012-08-21 |
| Affects | 2.4.2, 2.4.1, 2.2.22, 2.2.21, 2.2.20, 2.2.19, 2.2.18, 2.2.17, 2.2.16, 2.2.15, 2.2.14, 2.2.13, 2.2.12, 2.2.11, 2.2.10, 2.2.9, 2.2.8, 2.2.6, 2.2.5, 2.2.4, 2.2.3, 2.2.2, 2.2.0 |

### important: Response mixup when using mod\_proxy\_ajp or mod\_proxy\_http ([CVE-2012-3502](https://www.cve.org/CVERecord?id=CVE-2012-3502))

The modules mod\_proxy\_ajp and mod\_proxy\_http did not always close the connection to the back end server when necessary as part of error handling. This could lead to an information disclosure due to a response mixup between users.

| Reported to security team | 2012-08-16 |
| --- | --- |
| Issue public | 2012-08-16 |
| Update 2.4.3 released | 2012-08-21 |
| Affects | 2.4.2, 2.4.1 |

# Fixed in Apache HTTP Server 2.4.2

### low: insecure LD\_LIBRARY\_PATH handling ([CVE-2012-0883](https://www.cve.org/CVERecord?id=CVE-2012-0883))

Insecure handling of LD\_LIBRARY\_PATH was found that could lead to the current working directory to be searched for DSOs. This could allow a local user to execute code as root if an administrator runs apachectl from an untrusted directory.

| Reported to security team | 2012-02-14 |
| --- | --- |
| Issue public | 2012-03-02 |
| Update 2.4.2 released | 2012-04-17 |
| Update 2.2.23 released | 2012-09-13 |
| Affects | 2.4.1, 2.2.22, 2.2.21, 2.2.20, 2.2.19, 2.2.18, 2.2.17, 2.2.16, 2.2.15, 2.2.14, 2.2.13, 2.2.12, 2.2.11, 2.2.10, 2.2.9, 2.2.8, 2.2.6, 2.2.5, 2.2.4, 2.2.3, 2.2.2, 2.2.0 |

Copyright © 1997-2025 The Apache Software Foundation.

Apache HTTP Server, Apache, and the Apache feather logo are trademarks of The Apache Software Foundation.



=== Content from bugzilla.redhat.com_2611199b_20250125_211622.html ===


* Login
  + Log in using an SSO provider:- [Fedora Account System](saml2_login.cgi?idp=Fedora%20Account%20System&target=show_bug.cgi%3Fid%3D1120604)
    - [Red Hat Associate](saml2_login.cgi?idp=Red%20Hat%20Associate&target=show_bug.cgi%3Fid%3D1120604)
    - [Red Hat Customer](saml2_login.cgi?idp=Red%20Hat%20Customer&target=show_bug.cgi%3Fid%3D1120604)+ Login using a Red Hat Bugzilla account
  + Forgot Password
  + [Create an Account](createaccount.cgi)

Red Hat Bugzilla – Bug 1120604

* [Home](./)
* [New](enter_bug.cgi)
* Search
  + [Simple Search](query.cgi?format=specific)
  + [Advanced Search](query.cgi?format=advanced)
* My Links
  + [Browse](describecomponents.cgi)
  + [Requests](request.cgi)
  + Reports
  + Current State
    - [Search](query.cgi)
    - [Tabular reports](query.cgi?format=report-table)
    - [Graphical reports](query.cgi?format=report-graph)
    - [Duplicates](duplicates.cgi)
  + Other Reports
    - [User Changes](https://bugzilla.redhat.com/page.cgi?id=user_activity.html)
  + Plotly Reports
    - [Bug Status](https://bugzilla.redhat.com/page.cgi?id=bug_status.html)
    - [Bug Severity](https://bugzilla.redhat.com/page.cgi?id=bug_severity.html)
    - [Non-Defaults](https://bugzilla.redhat.com/page.cgi?id=non_defaults.html)
* [Product Dashboard](page.cgi?id=productdashboard.html)

- Help
  * [Page Help!](docs/en/html/using/understanding.html)
  * [Bug Writing Guidelines](page.cgi?id=bug-writing.html)
  * [What's new](page.cgi?id=whats-new.html)
  * [Browser Support Policy](https://access.redhat.com/help/browsers)
  * [5.0.4.rh103 Release notes](page.cgi?id=release-notes.html)
  * [FAQ](page.cgi?id=faq.html)
  * [Guides index](docs/en/html/index.html)
  * [User guide](docs/en/html/using/index.html)
  * [Web Services](docs/en/html/integrating/api/Bugzilla/WebService/Bug.html)
  * [Contact](page.cgi?id=redhat/contact.html)
  * [Legal](page.cgi?id=terms-conditions.html)
- [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")

This site requires JavaScript to be enabled to function correctly, please enable it.

[**Bug 1120604**](show_bug.cgi?id=1120604)
(CVE-2013-4352)
- [CVE-2013-4352](https://access.redhat.com/security/cve/CVE-2013-4352) httpd: mod\_cache NULL pointer dereference crash

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
CVE-2013-4352 httpd: mod\_cache NULL pointer dereference crash

| | [Keywords](describekeywords.cgi): | Security | | --- | --- | | [Status](page.cgi?id=fields.html#bug_status): | CLOSED ERRATA | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | CVE-2013-4352 | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components. Select a Classification to narrow down this list.") | Security Response | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Other | | [Component:](describecomponents.cgi?product=Security Response "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | vulnerability | | [Sub Component:](page.cgi?id=fields.html#rh_sub_components "The sub component of a specific component") | --- | | [Version:](page.cgi?id=fields.html#version "The version field defines the version of the software the bug was found in.") | unspecified | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | All | | [OS:](page.cgi?id=fields.html#op_sys "The operating system the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Linux | | [Priority:](page.cgi?id=fields.html#priority) | medium | | [Severity:](page.cgi?id=fields.html#bug_severity) | medium | | [Target Milestone:](page.cgi?id=fields.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | --- | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Red Hat Product Security | | [QA Contact:](page.cgi?id=fields.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") |  | | [Docs Contact:](page.cgi?id=fields.html#docs_contact "The person responsible for documenting once the bug has been resolved.") |  | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | [Depends On:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") | [1120607](show_bug.cgi?id=1120607) [1120608](show_bug.cgi?id=1120608) [1120614](show_bug.cgi?id=1120614 "CLOSED ERRATA - CVE-2014-0231 CVE-2014-0118 CVE-2014-0117 CVE-2014-0226 CVE-2013-4352 httpd: various flaws [fedora-all]") [1121037](show_bug.cgi?id=1121037) [1121038](show_bug.cgi?id=1121038) | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") | [1120610](show_bug.cgi?id=1120610) [1120623](show_bug.cgi?id=1120623) | | TreeView+ | [depends on](buglist.cgi?bug_id=1120604&bug_id_type=anddependson&format=tvp) / [blocked](buglist.cgi?bug_id=1120604&bug_id_type=andblocked&format=tvp&tvp_dir=blocked) |  | |  | | [Reported:](page.cgi?id=fields.html#reporter) | 2014-07-17 09:18 UTC by Murray McAllister | | --- | --- | | [Modified:](page.cgi?id=fields.html#modified) | 2021-02-17 06:23 UTC ([History](show_activity.cgi?id=1120604)) | | [CC List:](page.cgi?id=fields.html#cclist) | 38 users (show)  aneelica anmiller bdunne cdewolf dajohnso dandread darran.lofthouse dclarizi dknox fnasser gmccullo huwang jason.greene jawilson jclere jdoyle jfrey jkaluza jorton jprause jrafanie jrusnack jvlcek kseifried lgao mmaslano myarboro obarenbo pahan pgier pslavice rmeggins rsvoboda vdanen vtunka webstack-team weli xlecauch | | Fixed In Version: | httpd 2.4.7 | | | Doc Type: | Bug Fix | | | Doc Text: | A NULL pointer dereference flaw was found in the mod\_cache httpd module. A malicious HTTP server could cause the httpd child process to crash when the Apache HTTP Server was used as a forward proxy with caching. | | | Clone Of: |  | | | Environment: |  | | | Last Closed: | 2014-11-21 20:24:42 UTC | | | Embargoed: |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | [(Terms of Use)](page.cgi?id=terms-conditions.html) | | | --- | --- | --- | |  | | |    Links | System | ID | Private | Priority | Status | Summary | Last Updated | | Red Hat Product Errata | [RHSA-2014:0921](https://access.redhat.com/errata/RHSA-2014%3A0921) | 0 | normal | SHIPPED\_LIVE | Important: httpd security update | 2014-07-23 14:00:19 UTC | | Red Hat Product Errata | [RHSA-2014:0922](https://access.redhat.com/errata/RHSA-2014%3A0922) | 0 | normal | SHIPPED\_LIVE | Important: httpd24-httpd security update | 2014-07-23 14:00:09 UTC | |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=1120604#c0)  Murray McAllister    2014-07-17 09:18:30 UTC  ``` The following flaw has been fixed in the Apache HTTP Server:  "A NULL pointer dereference was found in mod_cache. A malicious HTTP server could cause a crash in a caching forward proxy configuration."  External References:  <http://httpd.apache.org/security/vulnerabilities_24.html>   ```  [Comment 2](show_bug.cgi?id=1120604#c2)  Murray McAllister    2014-07-17 09:41:40 UTC  ```  Created httpd tracking bugs for this issue:  Affects: fedora-all [[bug 1120614](show_bug.cgi?id=1120614 "CLOSED ERRATA - CVE-2014-0231 CVE-2014-0118 CVE-2014-0117 CVE-2014-0226 CVE-2013-4352 httpd: various flaws [fedora-all]")]   ```  [Comment 4](show_bug.cgi?id=1120604#c4)  Vincent Danen    2014-07-18 13:19:29 UTC  ``` Statement:  This issue did not affect the versions of httpd as shipped with Red Hat Enterprise Linux 5 and 6 as only httpd version 2.4.6 included the vulnerable code.   ```  [Comment 5](show_bug.cgi?id=1120604#c5)  Tomas Hoger    2014-07-23 07:07:26 UTC  ``` Upstream commit: <http://svn.apache.org/viewvc?view=revision&revision=1523235>   ```  [Comment 6](show_bug.cgi?id=1120604#c6)  errata-xmlrpc    2014-07-23 10:01:06 UTC  ``` This issue has been addressed in following products:    Red Hat Software Collections 1 for Red Hat Enterprise Linux 6   Red Hat Software Collections 1 for Red Hat Enterprise Linux 6.4 EUS   Red Hat Software Collections 1 for Red Hat Enterprise Linux 7  Via RHSA-2014:0922 <https://rhn.redhat.com/errata/RHSA-2014-0922.html>   ```  [Comment 7](show_bug.cgi?id=1120604#c7)  errata-xmlrpc    2014-07-23 10:01:52 UTC  ``` This issue has been addressed in following products:    Red Hat Enterprise Linux 7  Via RHSA-2014:0921 <https://rhn.redhat.com/errata/RHSA-2014-0921.html>   ```  [Comment 8](show_bug.cgi?id=1120604#c8)  Martin Prpič    2014-07-28 11:28:40 UTC  ``` IssueDescription:  A NULL pointer dereference flaw was found in the mod_cache httpd module. A malicious HTTP server could cause the httpd child process to crash when the Apache HTTP Server was used as a forward proxy with caching.   ``` |  |
| --- | --- |

---

| Note You need to [log in](show_bug.cgi?id=1120604&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. |
| --- |

---

[Privacy](page.cgi?id=redhat/privacy.html)
[Contact](page.cgi?id=redhat/contact.html)
[FAQ](page.cgi?id=faq.html)
[Legal](page.cgi?id=terms-conditions.html)



=== Content from lists.apache.org_283745a9_20250125_211625.html ===


[![Foal logo](images/logo.png)](./)

* ![Display Settings](images/cog.png "Display Settings")
  **Email display mode:**

  ---

   Modern rendering

   Legacy rendering
* ![Logged out](images/user_loggedout.png "Not logged in")

This site requires JavaScript enabled. Please enable it.



=== Content from lists.apache.org_acbcfcfd_20250125_211627.html ===


[![Foal logo](images/logo.png)](./)

* ![Display Settings](images/cog.png "Display Settings")
  **Email display mode:**

  ---

   Modern rendering

   Legacy rendering
* ![Logged out](images/user_loggedout.png "Not logged in")

This site requires JavaScript enabled. Please enable it.



=== Content from svn.apache.org_b4fc3d69_20250125_211621.html ===


| **[/](/viewvc?diff_format=h&view=roots)[[Apache-SVN]](/viewvc/?diff_format=h)/[httpd](/viewvc/httpd/?diff_format=h)/[httpd](/viewvc/httpd/httpd/?diff_format=h)/[trunk](/viewvc/httpd/httpd/trunk/?diff_format=h)/[modules](/viewvc/httpd/httpd/trunk/modules/?diff_format=h)/[cache](/viewvc/httpd/httpd/trunk/modules/cache/?diff_format=h)/[cache\_storage.c](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?diff_format=h&view=log)** |  |
| --- | --- |

[![ViewVC logotype](/vc-static/images/viewvc-logo.png)](http://www.viewvc.org/ "ViewVC Home")
# Diff of /httpd/httpd/trunk/modules/cache/cache\_storage.c

[![Parent Directory](/vc-static/images/back_small.png) Parent Directory](/viewvc/httpd/httpd/trunk/modules/cache/?diff_format=h)
| [![Revision Log](/vc-static/images/log.png) Revision Log](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?diff_format=h&view=log)
| [![View Patch](/vc-static/images/diff.png) Patch](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=1491564&r2=1523235&view=patch)

###

|  | revision [1491564](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?diff_format=h&revision=1491564&view=markup) by *trawick*, Mon Jun 10 18:43:45 2013 UTC | revision [1523235](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?diff_format=h&revision=1523235&view=markup) by *minfrin*, Sat Sep 14 13:32:25 2013 UTC |
| --- | --- | --- |
| **#** | **Line 713**   int cache\_invalidate(cache\_request\_rec \* | **Line 713**   int cache\_invalidate(cache\_request\_rec \* |
| [713](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=1523235&diff_format=h#l713) | || APR\_SUCCESS | || APR\_SUCCESS |
| [714](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=1523235&diff_format=h#l714) | != cache\_canonicalise\_key(r, r->pool, location, | != cache\_canonicalise\_key(r, r->pool, location, |
| [715](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=1523235&diff_format=h#l715) | &location\_uri, &location\_key) | &location\_uri, &location\_key) |
| [716](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=1523235&diff_format=h#l716) | || strcmp(r->parsed\_uri.hostname, location\_uri.hostname)) { | || !(r->parsed\_uri.hostname && location\_uri.hostname |
| [717](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=1523235&diff_format=h#l717) |  | && !strcmp(r->parsed\_uri.hostname, |
| [718](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=1523235&diff_format=h#l718) |  | location\_uri.hostname))) { |
| [719](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=1523235&diff_format=h#l719) | location\_key = NULL; | location\_key = NULL; |
| [720](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=1523235&diff_format=h#l720) | } | } |
| [721](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=1523235&diff_format=h#l721) | } | } |
| **#** | **Line 726**   int cache\_invalidate(cache\_request\_rec \* | **Line 728**   int cache\_invalidate(cache\_request\_rec \* |
| [728](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=1523235&diff_format=h#l728) | || APR\_SUCCESS | || APR\_SUCCESS |
| [729](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=1523235&diff_format=h#l729) | != cache\_canonicalise\_key(r, r->pool, content\_location, | != cache\_canonicalise\_key(r, r->pool, content\_location, |
| [730](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=1523235&diff_format=h#l730) | &content\_location\_uri, &content\_location\_key) | &content\_location\_uri, &content\_location\_key) |
| [731](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=1523235&diff_format=h#l731) | || strcmp(r->parsed\_uri.hostname, | || !(r->parsed\_uri.hostname && content\_location\_uri.hostname |
| [732](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=1523235&diff_format=h#l732) | content\_location\_uri.hostname)) { | && !strcmp(r->parsed\_uri.hostname, |
| [733](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=1523235&diff_format=h#l733) |  | content\_location\_uri.hostname))) { |
| [734](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=1523235&diff_format=h#l734) | content\_location\_key = NULL; | content\_location\_key = NULL; |
| [735](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=1523235&diff_format=h#l735) | } | } |
| [736](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=1523235&diff_format=h#l736) | } | } |

---

| Colored Diff Long Colored Diff Full Colored Diff Unidiff Context Diff Side by Side | | Legend:  | Removed from v.1491564 |  | | --- | --- | | changed lines | | |  | Added in v.1523235 | | | --- | --- | --- | --- | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |

---

| infrastructure at apache.org | **[ViewVC Help](/vc-static/help_rootview.html)** |
| --- | --- |
| Powered by [ViewVC 1.1.26](http://viewvc.tigris.org/) |  |



=== Content from svn.apache.org_1231e0c8_20250125_211620.html ===


| **[/](/viewvc?view=roots)[[Apache-SVN]](/viewvc/)/[httpd](/viewvc/httpd/)/[httpd](/viewvc/httpd/httpd/)/[trunk](/viewvc/httpd/httpd/trunk/)/[modules](/viewvc/httpd/httpd/trunk/modules/)/[cache](/viewvc/httpd/httpd/trunk/modules/cache/)/cache\_storage.c** |  |
| --- | --- |

[![ViewVC logotype](/vc-static/images/viewvc-logo.png)](http://www.viewvc.org/ "ViewVC Home")
# Log of /httpd/httpd/trunk/modules/cache/cache\_storage.c

[![Parent Directory](/vc-static/images/back_small.png) Parent Directory](/viewvc/httpd/httpd/trunk/modules/cache/)
| [![Revision Log](/vc-static/images/log.png) Revision Log](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log)

---

| Links to HEAD: | ([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=markup)) ([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=co)) ([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=annotate)) |
| --- | --- |
| Sticky Revision: |  |

---

Revision [**1856493**](/viewvc?view=revision&revision=1856493) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=1856493&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=1856493&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=1856493))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=1856493)

Modified
*Thu Mar 28 16:39:39 2019 UTC*
(5 years, 10 months ago)
by *ylavic*

File length: 29155 byte(s)

Diff to [previous 1851146](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=1851146&r2=1856493)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=1851146&r2=1856493&diff_format=h))
```
mod_cache: Fix parsing of quoted Cache-Control token arguments. PR 63288.

Make cache_strqtok() return both the token and its unquoted argument (if any),
or an error if the parsing fails.

Cache-Control integer values (max-age, max-stale, ...) can then be parsed w/o
taking care of the (optional) quoting.

Suggested by: fielding

```

---

Revision [**1851146**](/viewvc?view=revision&revision=1851146) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=1851146&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=1851146&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=1851146))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=1851146)

Modified
*Sat Jan 12 07:51:48 2019 UTC*
(6 years ago)
by *jailletc36*

File length: 28994 byte(s)

Diff to [previous 1783842](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=1783842&r2=1851146)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=1783842&r2=1851146&diff_format=h))
```
When a :port is included in the CacheKeyBaseURL the ":" is lost from the actual cache key value.  This doesn't harm apache by itself, the real problem arise if some external program which "knows" about the cache keys structure is used to modify the cache.

When CacheKeyBaseURL is not use, the ":" is kept.

So, be consistent when building the key and keep the ":" in all cases.

PR 53915 [Rein Tollevik <rein basefarm.no>]

+ merge 2 lines of a comment to have it more compact

```

---

Revision [**1783842**](/viewvc?view=revision&revision=1783842) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=1783842&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=1783842&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=1783842))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=1783842)

Modified
*Tue Feb 21 08:20:45 2017 UTC*
(7 years, 11 months ago)
by *ylavic*

File length: 28982 byte(s)

Diff to [previous 1756553](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=1756553&r2=1783842)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=1756553&r2=1783842&diff_format=h))
```
mod_cache: Fix a regression in 2.4.25 for the forward proxy case by
computing and using the same entity key according to when the cache
checks, loads and saves the request.  PR 60577.

```

---

Revision [**1756553**](/viewvc?view=revision&revision=1756553) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=1756553&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=1756553&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=1756553))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=1756553)

Modified
*Tue Aug 16 21:48:09 2016 UTC*
(8 years, 5 months ago)
by *ylavic*

File length: 28798 byte(s)

Diff to [previous 1747469](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=1747469&r2=1756553)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=1747469&r2=1756553&diff_format=h))
```
mod_cache: Use the actual URI path and query-string for identifying the
cached entity (key), such that rewrites are taken into account when
running afterwards (CacheQuickHandler off).  PR 21935.

```

---

Revision [**1747469**](/viewvc?view=revision&revision=1747469) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=1747469&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=1747469&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=1747469))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=1747469)

Modified
*Thu Jun 9 00:06:42 2016 UTC*
(8 years, 7 months ago)
by *wrowe*

File length: 28348 byte(s)

Diff to [previous 1715880](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=1715880&r2=1747469)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=1715880&r2=1747469&diff_format=h))
```
Rename ap_casecmpstr[n]() to ap_cstr_casecmp[n](), update with APR doxygen

```

---

Revision [**1715880**](/viewvc?view=revision&revision=1715880) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=1715880&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=1715880&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=1715880))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=1715880)

Modified
*Mon Nov 23 16:48:35 2015 UTC*
(9 years, 2 months ago)
by *ylavic*

File length: 28344 byte(s)

Diff to [previous 1705983](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=1705983&r2=1715880)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=1705983&r2=1715880&diff_format=h))
```
More ap_casecmpstr[n]() usages (follow up to [r1715876](/viewvc?view=revision&revision=1715876)).

```

---

Revision [**1705983**](/viewvc?view=revision&revision=1705983) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=1705983&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=1705983&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=1705983))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=1705983)

Modified
*Wed Sep 30 08:35:35 2015 UTC*
(9 years, 3 months ago)
by *jailletc36*

File length: 28338 byte(s)

Diff to [previous 1563381](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=1563381&r2=1705983)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=1563381&r2=1705983&diff_format=h))
```
Fix some style issues on files that can easily be synch'ed with 2.4.x

```

---

Revision [**1563381**](/viewvc?view=revision&revision=1563381) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=1563381&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=1563381&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=1563381))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=1563381)

Modified
*Sat Feb 1 08:26:33 2014 UTC*
(10 years, 11 months ago)
by *jailletc36*

File length: 28337 byte(s)

Diff to [previous 1523235](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=1523235&r2=1563381)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=1523235&r2=1563381&diff_format=h))
```
s/apr_pstrndup/apr_pstrmemdup/ when applicable

```

---

Revision [**1523235**](/viewvc?view=revision&revision=1523235) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=1523235&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=1523235&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=1523235))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=1523235)

Modified
*Sat Sep 14 13:32:25 2013 UTC*
(11 years, 4 months ago)
by *minfrin*

File length: 28335 byte(s)

Diff to [previous 1491564](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=1491564&r2=1523235)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=1491564&r2=1523235&diff_format=h))
```
SECURITY (CVE-2013-4352): Fix a NULL pointer deference which allowed
untrusted origin servers to crash mod_cache in a forward proxy configuration.

mod_cache: Avoid a crash with strcmp() when the hostname is not provided.

```

---

Revision [**1491564**](/viewvc?view=revision&revision=1491564) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=1491564&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=1491564&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=1491564))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=1491564)

Modified
*Mon Jun 10 18:43:45 2013 UTC*
(11 years, 7 months ago)
by *trawick*

File length: 28129 byte(s)

Diff to [previous 1480283](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=1480283&r2=1491564)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=1480283&r2=1491564&diff_format=h))
```
const goodness with nasty strrchr and strchr functions
(resolve warning in maintainer mode)

```

---

Revision [**1480283**](/viewvc?view=revision&revision=1480283) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=1480283&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=1480283&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=1480283))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=1480283)

Modified
*Wed May 8 14:06:48 2013 UTC*
(11 years, 8 months ago)
by *minfrin*

File length: 28102 byte(s)

Diff to [previous 1479905](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=1479905&r2=1480283)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=1479905&r2=1480283&diff_format=h))
```
Ensure that Warning headers are correctly handled as per RFC2616.

```

---

Revision [**1479905**](/viewvc?view=revision&revision=1479905) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=1479905&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=1479905&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=1479905))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=1479905)

Modified
*Tue May 7 13:42:31 2013 UTC*
(11 years, 8 months ago)
by *minfrin*

File length: 27101 byte(s)

Diff to [previous 1479222](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=1479222&r2=1479905)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=1479222&r2=1479905&diff_format=h))
```
core, mod_cache: Ensure RFC2616 compliance in ap_meets_conditions()
with weak validation combined with If-Range and Range headers. Break
out explicit conditional header checks to be useable elsewhere in the
server. Ensure weak validation RFC compliance in the byteranges filter.
Ensure RFC validation compliance when serving cached entities. PR 16142

```

---

Revision [**1479222**](/viewvc?view=revision&revision=1479222) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=1479222&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=1479222&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=1479222))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=1479222)

Modified
*Sun May 5 01:12:48 2013 UTC*
(11 years, 8 months ago)
by *minfrin*

File length: 25877 byte(s)

Diff to [previous 1478798](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=1478798&r2=1479222)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=1478798&r2=1479222&diff_format=h))
```
mod_cache: Honour Cache-Control: no-store in a request.

```

---

Revision [**1478798**](/viewvc?view=revision&revision=1478798) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=1478798&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=1478798&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=1478798))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=1478798)

Modified
*Fri May 3 14:05:01 2013 UTC*
(11 years, 8 months ago)
by *fuankg*

File length: 25779 byte(s)

Diff to [previous 1478748](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=1478748&r2=1478798)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=1478748&r2=1478798&diff_format=h))
```
Silent no-prototype compiler warning.

```

---

Revision [**1478748**](/viewvc?view=revision&revision=1478748) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=1478748&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=1478748&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=1478748))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=1478748)

Modified
*Fri May 3 12:19:26 2013 UTC*
(11 years, 8 months ago)
by *minfrin*

File length: 25772 byte(s)

Diff to [previous 1478441](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=1478441&r2=1478748)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=1478441&r2=1478748&diff_format=h))
```
mod_cache: Make sure Vary processing handles multivalued Vary headers and
multivalued headers referred to via Vary.

```

---

Revision [**1478441**](/viewvc?view=revision&revision=1478441) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=1478441&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=1478441&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=1478441))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=1478441)

Modified
*Thu May 2 16:51:27 2013 UTC*
(11 years, 8 months ago)
by *minfrin*

File length: 25858 byte(s)

Diff to [previous 1478173](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=1478173&r2=1478441)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=1478173&r2=1478441&diff_format=h))
```
mod_cache: When serving from cache, only the last header of a multivalued
header was taken into account. Fixed.

```

---

Revision [**1478173**](/viewvc?view=revision&revision=1478173) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=1478173&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=1478173&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=1478173))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=1478173)

Modified
*Wed May 1 20:06:57 2013 UTC*
(11 years, 8 months ago)
by *minfrin*

File length: 26468 byte(s)

Diff to [previous 1478140](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=1478140&r2=1478173)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=1478140&r2=1478173&diff_format=h))
```
Apply log message tags to messages.

```

---

Revision [**1478140**](/viewvc?view=revision&revision=1478140) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=1478140&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=1478140&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=1478140))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=1478140)

Modified
*Wed May 1 18:49:04 2013 UTC*
(11 years, 8 months ago)
by *minfrin*

File length: 26453 byte(s)

Diff to [previous 1452281](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=1452281&r2=1478140)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=1452281&r2=1478140&diff_format=h))
```
mod_cache: Invalidate cached entities in response to RFC2616 Section
13.10 Invalidation After Updates or Deletions. PR 15868

Resolves outstanding issue with [r1070179](/viewvc?view=revision&revision=1070179) as per
<http://www.gossamer-threads.com/lists/apache/dev/395830?do=post_view_threaded#395830>

```

---

Revision [**1452281**](/viewvc?view=revision&revision=1452281) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=1452281&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=1452281&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=1452281))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=1452281)

Modified
*Mon Mar 4 13:02:09 2013 UTC*
(11 years, 10 months ago)
by *jailletc36*

File length: 23963 byte(s)

Diff to [previous 1209766](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=1209766&r2=1452281)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=1209766&r2=1452281&diff_format=h))
```
cache_storage: remove useless test + update function name in debug log + skip as soon as we know headers do not match

```

---

Revision [**1209766**](/viewvc?view=revision&revision=1209766) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=1209766&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=1209766&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=1209766))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=1209766)

Modified
*Fri Dec 2 23:02:04 2011 UTC*
(13 years, 1 month ago)
by *sf*

File length: 23951 byte(s)

Diff to [previous 1070179](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=1070179&r2=1209766)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=1070179&r2=1209766&diff_format=h))
```
Add lots of unique tags to error log messages

```

---

Revision [**1070179**](/viewvc?view=revision&revision=1070179) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=1070179&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=1070179&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=1070179))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=1070179)

Modified
*Sun Feb 13 02:03:29 2011 UTC*
(13 years, 11 months ago)
by *minfrin*

File length: 23831 byte(s)

Diff to [previous 1023462](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=1023462&r2=1070179)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=1023462&r2=1070179&diff_format=h))
```
mod_cache: When a request other than GET or HEAD arrives, we must
invalidate existing cache entities as per RFC2616 13.10. PR 15868.

```

---

Revision [**1023462**](/viewvc?view=revision&revision=1023462) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=1023462&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=1023462&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=1023462))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=1023462)

Modified
*Sun Oct 17 11:34:03 2010 UTC*
(14 years, 3 months ago)
by *minfrin*

File length: 22609 byte(s)

Diff to [previous 1023398](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=1023398&r2=1023462)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=1023398&r2=1023462&diff_format=h))
```
Use ap_log_rerror() instead of ap_log_error() across mod_cache and
mod_disk_cache.

```

---

Revision [**1023398**](/viewvc?view=revision&revision=1023398) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=1023398&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=1023398&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=1023398))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=1023398)

Modified
*Sun Oct 17 01:24:24 2010 UTC*
(14 years, 3 months ago)
by *minfrin*

File length: 22703 byte(s)

Diff to [previous 1023396](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=1023396&r2=1023398)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=1023396&r2=1023398&diff_format=h))
```
Don't attempt to kill a stale entry that cannot be revalidated so early
in the process, as this will happen later anyway as necessary. We may want
to serve the stale entry should the backend not be available.

```

---

Revision [**1023396**](/viewvc?view=revision&revision=1023396) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=1023396&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=1023396&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=1023396))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=1023396)

Modified
*Sun Oct 17 00:50:28 2010 UTC*
(14 years, 3 months ago)
by *minfrin*

File length: 23526 byte(s)

Diff to [previous 1023394](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=1023394&r2=1023396)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=1023394&r2=1023396&diff_format=h))
```
Don't attempt to remove the existing conditional headers until we have
committed to adding our own.

```

---

Revision [**1023394**](/viewvc?view=revision&revision=1023394) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=1023394&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=1023394&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=1023394))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=1023394)

Modified
*Sun Oct 17 00:20:41 2010 UTC*
(14 years, 3 months ago)
by *minfrin*

File length: 23475 byte(s)

Diff to [previous 1023392](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=1023392&r2=1023394)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=1023392&r2=1023394&diff_format=h))
```
Support Cache-Control: only-if-cached, as per RFC2616 14.9.4.

```

---

Revision [**1023392**](/viewvc?view=revision&revision=1023392) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=1023392&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=1023392&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=1023392))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=1023392)

Modified
*Sun Oct 17 00:01:45 2010 UTC*
(14 years, 3 months ago)
by *minfrin*

File length: 22765 byte(s)

Diff to [previous 1023390](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=1023390&r2=1023392)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=1023390&r2=1023392&diff_format=h))
```
Fix the error cases in the cache_select() loop. On error we must loop around
to the next provider, not return DECLINED too early, except for the
revalidate case, where returning DECLINED is correct behaviour.

```

---

Revision [**1023390**](/viewvc?view=revision&revision=1023390) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=1023390&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=1023390&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=1023390))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=1023390)

Modified
*Sat Oct 16 23:42:25 2010 UTC*
(14 years, 3 months ago)
by *minfrin*

File length: 22305 byte(s)

Diff to [previous 1023360](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=1023360&r2=1023390)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=1023360&r2=1023390&diff_format=h))
```
Fix the return values in the cache_select() function, we don't return APR
error codes in this case.

```

---

Revision [**1023360**](/viewvc?view=revision&revision=1023360) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=1023360&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=1023360&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=1023360))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=1023360)

Modified
*Sat Oct 16 19:30:08 2010 UTC*
(14 years, 3 months ago)
by *minfrin*

File length: 22303 byte(s)

Diff to [previous 1004373](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=1004373&r2=1023360)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=1004373&r2=1023360&diff_format=h))
```
Begin the process of optimising the parsing of Cache-Control headers. Parse
the incoming Cache-Control and Pragma headers once, instead of on each test.

```

---

Revision [**1004373**](/viewvc?view=revision&revision=1004373) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=1004373&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=1004373&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=1004373))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=1004373)

Modified
*Mon Oct 4 19:27:22 2010 UTC*
(14 years, 3 months ago)
by *minfrin*

File length: 22296 byte(s)

Diff to [previous 1003963](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=1003963&r2=1004373)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=1003963&r2=1004373&diff_format=h))
```
mod_cache: Don't regenerate the cache key if we have already generated it.

```

---

Revision [**1003963**](/viewvc?view=revision&revision=1003963) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=1003963&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=1003963&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=1003963))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=1003963)

Modified
*Sun Oct 3 13:23:39 2010 UTC*
(14 years, 3 months ago)
by *minfrin*

File length: 22206 byte(s)

Diff to [previous 1000395](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=1000395&r2=1003963)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=1000395&r2=1003963&diff_format=h))
```
mod_cache: Allow control over the base URL of reverse proxied requests
using the CacheKeyBaseURL directive, so that the cache key can be
calculated from the endpoint URL instead of the server URL.

```

---

Revision [**1000395**](/viewvc?view=revision&revision=1000395) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=1000395&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=1000395&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=1000395))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=1000395)

Modified
*Thu Sep 23 10:17:07 2010 UTC*
(14 years, 4 months ago)
by *minfrin*

File length: 21653 byte(s)

Diff to [previous 1000247](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=1000247&r2=1000395)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=1000247&r2=1000395&diff_format=h))
```
Remove a relic from the original error code, and fix segfaults in the
process.

```

---

Revision [**1000247**](/viewvc?view=revision&revision=1000247) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=1000247&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=1000247&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=1000247))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=1000247)

Modified
*Wed Sep 22 21:35:38 2010 UTC*
(14 years, 4 months ago)
by *minfrin*

File length: 21703 byte(s)

Diff to [previous 1000211](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=1000211&r2=1000247)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=1000211&r2=1000247&diff_format=h))
```
Make cache_provider_list and cache_request_rec private by moving them
out of mod_cache.h.

```

---

Revision [**1000211**](/viewvc?view=revision&revision=1000211) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=1000211&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=1000211&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=1000211))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=1000211)

Modified
*Wed Sep 22 20:44:50 2010 UTC*
(14 years, 4 months ago)
by *minfrin*

File length: 21592 byte(s)

Diff to [previous 1000187](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=1000187&r2=1000211)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=1000187&r2=1000211&diff_format=h))
```
Make cache_server_conf, cache_enable and cache_disable private. Remove
public prefixes from ap_cache_accept_headers, ap_cache_try_lock and
ap_cache_get_providers.

```

---

Revision [**1000187**](/viewvc?view=revision&revision=1000187) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=1000187&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=1000187&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=1000187))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=1000187)

Modified
*Wed Sep 22 20:28:11 2010 UTC*
(14 years, 4 months ago)
by *minfrin*

File length: 21649 byte(s)

Diff to [previous 1000152](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=1000152&r2=1000187)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=1000152&r2=1000187&diff_format=h))
```
Make ap_cache_accept_headers, ap_cache_accept_headers, ap_cache_try_lock and
ap_cache_check_freshness private.

```

---

Revision [**1000152**](/viewvc?view=revision&revision=1000152) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=1000152&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=1000152&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=1000152))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=1000152)

Modified
*Wed Sep 22 19:35:26 2010 UTC*
(14 years, 4 months ago)
by *minfrin*

File length: 21628 byte(s)

Diff to [previous 999681](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=999681&r2=1000152)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=999681&r2=1000152&diff_format=h))
```
Remove the MOD_CACHE_REQUEST_REC hack, and pass the cache_request_rec
structure through mod_cache's function parameters in the usual way.

```

---

Revision [**999681**](/viewvc?view=revision&revision=999681) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=999681&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=999681&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=999681))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=999681)

Modified
*Tue Sep 21 22:55:22 2010 UTC*
(14 years, 4 months ago)
by *minfrin*

File length: 21896 byte(s)

Diff to [previous 999630](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=999630&r2=999681)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=999630&r2=999681&diff_format=h))
```
Move private cache_* declarations out of the public mod_cache.h file.

```

---

Revision [**999630**](/viewvc?view=revision&revision=999630) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=999630&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=999630&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=999630))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=999630)

Modified
*Tue Sep 21 20:43:44 2010 UTC*
(14 years, 4 months ago)
by *minfrin*

File length: 21868 byte(s)

Diff to [previous 992625](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=992625&r2=999630)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=992625&r2=999630&diff_format=h))
```
mod_cache: Give the cache provider the opportunity to choose to cache
or not cache based on the buckets present in the brigade, such as the
presence of a FILE bucket.

```

---

Revision [**992625**](/viewvc?view=revision&revision=992625) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=992625&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=992625&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=992625))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=992625)

Modified
*Sat Sep 4 15:20:30 2010 UTC*
(14 years, 4 months ago)
by *minfrin*

File length: 21840 byte(s)

Diff to [previous 992614](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=992614&r2=992625)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=992614&r2=992625&diff_format=h))
```
mod_cache: Check the request to determine whether we are allowed
to return cached content at all, and respect a "Cache-Control:
no-cache" header from a client. Previously, "no-cache" would
behave like "max-age=0".

```

---

Revision [**992614**](/viewvc?view=revision&revision=992614) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=992614&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=992614&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=992614))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=992614)

Modified
*Sat Sep 4 14:42:30 2010 UTC*
(14 years, 4 months ago)
by *minfrin*

File length: 21769 byte(s)

Diff to [previous 966348](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=966348&r2=992614)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=966348&r2=992614&diff_format=h))
```
mod_cache: Use a proper filter context to hold filter data instead
of misusing the per-request configuration. Fixes a segfault on trunk
when the normal handler is used.

```

---

Revision [**966348**](/viewvc?view=revision&revision=966348) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=966348&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=966348&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=966348))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=966348)

Modified
*Wed Jul 21 18:25:01 2010 UTC*
(14 years, 6 months ago)
by *pquerna*

File length: 21724 byte(s)

Diff to [previous 951895](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=951895&r2=966348)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=951895&r2=966348&diff_format=h))
```
CVE-2010-1452: Fix handling of missing path segments in the parsed URI structure.

If a specially crafted request was sent, it is possible to crash mod_dav,
mod_cache or mod_session, as they accessed a field that is set to NULL
by the URI parser, assuming that it always put in a valid string.

PR: 49246
Submitted by: Mark Drayton
Patch by: Jeff Trawick

```

---

Revision [**951895**](/viewvc?view=revision&revision=951895) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=951895&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=951895&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=951895))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=951895)

Modified
*Sun Jun 6 16:59:50 2010 UTC*
(14 years, 7 months ago)
by *sf*

File length: 21748 byte(s)

Diff to [previous 897705](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=897705&r2=951895)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=897705&r2=951895&diff_format=h))
```
Use the new APLOG_USE_MODULE/AP_DECLARE_MODULE macros everywhere to take
advantage of per-module loglevels

```

---

Revision [**897705**](/viewvc?view=revision&revision=897705) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=897705&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=897705&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=897705))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=897705)

Modified
*Sun Jan 10 21:07:26 2010 UTC*
(15 years ago)
by *sf*

File length: 21722 byte(s)

Diff to [previous 892289](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=892289&r2=897705)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=892289&r2=897705&diff_format=h))
```
Allow several of the configured session identifiers to be found and removed in
a single request.

```

---

Revision [**892289**](/viewvc?view=revision&revision=892289) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=892289&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=892289&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=892289))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=892289)

Modified
*Fri Dec 18 16:03:13 2009 UTC*
(15 years, 1 month ago)
by *rpluem*

File length: 21742 byte(s)

Diff to [previous 808212](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=808212&r2=892289)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=808212&r2=892289&diff_format=h))
```
* Do an exact match of the keys defined by CacheIgnoreURLSessionIdentifiers
  against the querystring instead of a partial match.

PR: 48401
Submitted by: Dodou Wang <wangdong.08 gmail.com>
Reviewed by: rpluem

```

---

Revision [**808212**](/viewvc?view=revision&revision=808212) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=808212&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=808212&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=808212))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=808212)

Modified
*Wed Aug 26 22:46:35 2009 UTC*
(15 years, 5 months ago)
by *minfrin*

File length: 20327 byte(s)

Diff to [previous 778439](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=778439&r2=808212)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=778439&r2=808212&diff_format=h))
```
mod_cache: Introduce the thundering herd lock, a mechanism to keep
the flood of requests at bay that strike a backend webserver as
a cached entity goes stale.

```

---

Revision [**778439**](/viewvc?view=revision&revision=778439) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=778439&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=778439&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=778439))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=778439)

Modified
*Mon May 25 15:24:47 2009 UTC*
(15 years, 8 months ago)
by *rpluem*

File length: 20328 byte(s)

Diff to [previous 777042](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=777042&r2=778439)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=777042&r2=778439&diff_format=h))
```
* Correctly detect if CacheIgnoreURLSessionIdentifiers is set.

```

---

Revision [**777042**](/viewvc?view=revision&revision=777042) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=777042&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=777042&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=777042))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=777042)

Modified
*Thu May 21 10:42:54 2009 UTC*
(15 years, 8 months ago)
by *rpluem*

File length: 20356 byte(s)

Diff to [previous 645455](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=645455&r2=777042)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=645455&r2=777042&diff_format=h))
```
* Add CacheIgnoreURLSessionIdentifiers directive to ignore
  defined session identifiers encoded in the URL when caching.

```

---

Revision [**645455**](/viewvc?view=revision&revision=645455) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=645455&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=645455&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=645455))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=645455)

Modified
*Mon Apr 7 10:45:43 2008 UTC*
(16 years, 9 months ago)
by *pquerna*

File length: 18427 byte(s)

Diff to [previous 636653](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=636653&r2=645455)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=636653&r2=645455&diff_format=h))
```
Remove all references to CORE_PRIVATE.

```

---

Revision [**636653**](/viewvc?view=revision&revision=636653) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=636653&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=636653&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=636653))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=636653)

Modified
*Thu Mar 13 07:28:40 2008 UTC*
(16 years, 10 months ago)
by *rpluem*

File length: 18449 byte(s)

Diff to [previous 506621](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=506621&r2=636653)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=506621&r2=636653&diff_format=h))
```
* Do not do Range requests if we use our own conditionals for validating
  a cache entity: If we get 304 the Range does not matter and otherwise the
  entity changed and we want to have the complete entity.

PR: 44579

```

---

Revision [**506621**](/viewvc?view=revision&revision=506621) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=506621&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=506621&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=506621))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=506621)

Modified
*Mon Feb 12 20:29:04 2007 UTC*
(17 years, 11 months ago)
by *rpluem*

File length: 18130 byte(s)

Diff to [previous 504183](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=504183&r2=506621)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=504183&r2=506621&diff_format=h))
```
* Save the key we generate during our first run of cache_generate_key_default
  on each request in the request_config. During consecutive runs of
  cache_generate_key_default during processing the request we restore it
  from there as we might not be able to generate the same key again as
  the ingredients used to compose the key might have changed and we constantly
  must use a key that could be generated during the quick handler phase.

PR: 41475

```

---

Revision [**504183**](/viewvc?view=revision&revision=504183) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=504183&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=504183&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=504183))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=504183)

Modified
*Tue Feb 6 15:55:50 2007 UTC*
(17 years, 11 months ago)
by *rpluem*

File length: 16932 byte(s)

Diff to [previous 481886](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=481886&r2=504183)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=481886&r2=504183&diff_format=h))
```
* Add CacheIgnoreQueryString directive to cache requests with a query string
  even if no expiration time is specified. Futhermore the query string will not
  be used for key generation such that requests to the same URI path, but with
  different query strings are mapped to the same cache entity. Turning this
  setting to ON violates RFC 2616/13.9 and thus it is turned off by default.

PR: 41484
Submitted by: Fredrik Widlund <fredrik.widlund qbrick.com>
Reviewed by: rpluem

```

---

Revision [**481886**](/viewvc?view=revision&revision=481886) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=481886&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=481886&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=481886))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=481886)

Modified
*Sun Dec 3 20:51:13 2006 UTC*
(18 years, 1 month ago)
by *rpluem*

File length: 16408 byte(s)

Diff to [previous 476625](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=476625&r2=481886)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=476625&r2=481886&diff_format=h))
```
* Remove expired content from cache that cannot be revalidated.

PR: 30370

```

---

Revision [**476625**](/viewvc?view=revision&revision=476625) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=476625&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=476625&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=476625))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=476625)

Modified
*Sat Nov 18 22:17:33 2006 UTC*
(18 years, 2 months ago)
by *rpluem*

File length: 15762 byte(s)

Diff to [previous 420983](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=420983&r2=476625)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=420983&r2=476625&diff_format=h))
```
* Use the query string stored in r->parsed_uri.query instead of r->args
  as r->args could have been changed (e.g. via mod_rewrite) after the quick
  handler hook. This causes resources to be stored under a key, where they
  cannot be fetched again in the quick handler.

PR: 40805

```

---

Revision [**420983**](/viewvc?view=revision&revision=420983) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=420983&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=420983&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=420983))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=420983)

Modified
*Tue Jul 11 20:33:53 2006 UTC*
(18 years, 6 months ago)
by *fielding*

File length: 15750 byte(s)

Diff to [previous 410370](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=410370&r2=420983)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=410370&r2=420983&diff_format=h))
```
update license header text

```

---

Revision [**410370**](/viewvc?view=revision&revision=410370) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=410370&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=410370&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=410370))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=410370)

Modified
*Tue May 30 20:48:09 2006 UTC*
(18 years, 8 months ago)
by *rpluem*

File length: 15603 byte(s)

Diff to [previous 408729](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=408729&r2=410370)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=408729&r2=410370&diff_format=h))
```
* Keep the Content-Type for successfully revalidated
  cached objects, by unsetting possible Content-Type headers in
  r->headers_out and r->err_headers_out as they may be different to what
  we have received from the cache.
  Actually they are not needed as r->content_type set by
  ap_set_content_type a few lines above will be used in the store_headers
  functions of the storage providers as a fallback and the HTTP_HEADER filter
  does overwrite the Content-Type header with r->content_type anyway.

PR: 39647

```

---

Revision [**408729**](/viewvc?view=revision&revision=408729) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=408729&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=408729&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=408729))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=408729)

Modified
*Mon May 22 19:05:09 2006 UTC*
(18 years, 8 months ago)
by *rpluem*

File length: 14978 byte(s)

Diff to [previous 408154](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=408154&r2=408729)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=408154&r2=408729&diff_format=h))
```
* Cleanup the code by replacing some inline code to lower-case a string with
  ap_str_tolower.

Proposed by: Joe Orton

```

---

Revision [**408154**](/viewvc?view=revision&revision=408154) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=408154&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=408154&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=408154))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=408154)

Modified
*Sun May 21 10:29:09 2006 UTC*
(18 years, 8 months ago)
by *rpluem*

File length: 15190 byte(s)

Diff to [previous 407357](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=407357&r2=408154)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=407357&r2=408154&diff_format=h))
```
* Fix const compiler warning introduced by [r407357](/viewvc?view=revision&revision=407357).

Noticed by: Joe Orton

```

---

Revision [**407357**](/viewvc?view=revision&revision=407357) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=407357&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=407357&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=407357))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=407357)

Modified
*Wed May 17 19:16:43 2006 UTC*
(18 years, 8 months ago)
by *rpluem*

File length: 15119 byte(s)

Diff to [previous 395228](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=395228&r2=407357)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=395228&r2=407357&diff_format=h))
```
* Handle the cases "no proxy request" and "reverse proxy request" in the same
  manner, when setting scheme and port_str. This is needed because if a cached
  entry is looked up by mod_cache's quick handler r->proxyreq
  is still unset in the reverse proxy case as it only gets set in the
  translate name hook (either by ProxyPass or mod_rewrite) which is run
  after the quick handler hook. This is different to the forward proxy
  case where it gets set before the quick handler is run (in the
  post_read_request hook).
  If a cache entry is created by the CACHE_SAVE filter we always have
  r->proxyreq set correctly.
  Also set scheme to ap_http_scheme(r) instead of "http" to handle SSL
  correctly.

PR: 39593

```

---

Revision [**395228**](/viewvc?view=revision&revision=395228) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=395228&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=395228&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=395228))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=395228)

Modified
*Wed Apr 19 12:11:27 2006 UTC*
(18 years, 9 months ago)
by *colm*

File length: 14674 byte(s)

Diff to [previous 367798](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=367798&r2=395228)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=367798&r2=395228&diff_format=h))
```
Update the copyright year in all .c, .h and .xml files

```

---

Revision [**367798**](/viewvc?view=revision&revision=367798) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=367798&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=367798&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=367798))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=367798)

Modified
*Tue Jan 10 21:34:11 2006 UTC*
(19 years ago)
by *rpluem*

File length: 14674 byte(s)

Diff to [previous 332306](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=332306&r2=367798)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=332306&r2=367798&diff_format=h))
```
* Fix PR38017 by handling the selection of the hostname in the same way for
  non proxied and reverse proxied requests.

  We need to handle both cases in the same manner as for the reverse proxy
  case we have the following situation:

  If a cached entry is looked up by mod_cache's quick handler r->proxyreq
  is still unset in the reverse proxy case as it only gets set in the
  translate name hook (either by ProxyPass or mod_rewrite) which is run
  after the quick handler hook. This is different to the forward proxy
  case where it gets set before the quick handler is run (in the
  post_read_request hook).
  If a cache entry is created by the CACHE_SAVE filter we always have
  r->proxyreq set correctly.
  So we must ensure that in the reverse proxy case we use the same code
  path and using the canonical name seems to be the right thing to do
  in the reverse proxy case.

```

---

Revision [**332306**](/viewvc?view=revision&revision=332306) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=332306&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=332306&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=332306))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=332306)

Modified
*Thu Nov 10 15:11:44 2005 UTC*
(19 years, 2 months ago)
by *jim*

File length: 13756 byte(s)

Diff to [previous 291588](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=291588&r2=332306)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=291588&r2=332306&diff_format=h))
```
No functional Change: Removing trailing whitespace. This also
means that "blank" lines consisting of just spaces or
tabs are now really blank lines

```

---

Revision [**291588**](/viewvc?view=revision&revision=291588) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=291588&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=291588&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=291588))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=291588)

Modified
*Mon Sep 26 09:21:45 2005 UTC*
(19 years, 4 months ago)
by *colm*

File length: 13796 byte(s)

Diff to [previous 239420](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=239420&r2=291588)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=239420&r2=291588&diff_format=h))
```

Fixes and cleanups for mod_cache;

    * Add r->uri to the debug messages in the quick handler; makes debugging
      easier.

    * Always reset headers_in for lookup's, some modules make subrequests
      and then rewrite the url. Having a conditional request at this point
      is not what they expect (nor reasonable for them to handle).

    * Don't store a per-request config on lookups; for the same reason.

    * Return DECLINED when in lookup mode and ap_meets_conditions() indicated
      we have the content but don't know if it's fresh or not. We have no idea
      whether the backend will have a 404, a 304 or any other kind of a
      response - so we have to assume we cannot handle the request.

    * remove the unused "url" argument from the cache_create_entity() function

    * Whitespace/comment fixups in mod_cache.h

```

---

Revision [**239420**](/viewvc?view=revision&revision=239420) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=239420&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=239420&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=239420))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=239420)

Modified
*Tue Aug 23 15:25:08 2005 UTC*
(19 years, 5 months ago)
by *colm*

File length: 13807 byte(s)

Diff to [previous 239407](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=239407&r2=239420)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=239407&r2=239420&diff_format=h))
```

remove some unused variables and re-name cache_select_url() to simply
cache_select()

```

---

Revision [**239407**](/viewvc?view=revision&revision=239407) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=239407&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=239407&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=239407))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=239407)

Modified
*Tue Aug 23 13:50:47 2005 UTC*
(19 years, 5 months ago)
by *colm*

File length: 13822 byte(s)

Diff to [previous 232335](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=232335&r2=239407)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=232335&r2=239407&diff_format=h))
```

Improve the cache hit/miss ratio by canonicalising the url key. hostname's
are matched case-insensitively, port-based vhosts are catered for and the
scheme included for future multi-scheme caching compatibility.

```

---

Revision [**232335**](/viewvc?view=revision&revision=232335) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=232335&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=232335&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=232335))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=232335)

Modified
*Fri Aug 12 16:57:13 2005 UTC*
(19 years, 5 months ago)
by *jerenkrantz*

File length: 11279 byte(s)

Diff to [previous 232272](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=232272&r2=232335)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=232272&r2=232335&diff_format=h))
```
Move the debuging log message about the removal of a url from
cache_remove_url_filter to cache_remove_url.

Submitted by: Rudiger Plum <ruediger.pluem vodafone.com>
Reviewed by: Justin Erenkrantz

```

---

Revision [**232272**](/viewvc?view=revision&revision=232272) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=232272&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=232272&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=232272))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=232272)

Modified
*Fri Aug 12 11:32:55 2005 UTC*
(19 years, 5 months ago)
by *jorton*

File length: 11150 byte(s)

Diff to [previous 231487](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=231487&r2=232272)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=231487&r2=232272&diff_format=h))
```
* modules/cache/cache_storage.c (cache_remove_url): Remove unused
variables.

```

---

Revision [**231487**](/viewvc?view=revision&revision=231487) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=231487&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=231487&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=231487))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=231487)

Modified
*Thu Aug 11 17:35:48 2005 UTC*
(19 years, 5 months ago)
by *jerenkrantz*

File length: 11187 byte(s)

Diff to [previous 157162](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=157162&r2=231487)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=157162&r2=231487&diff_format=h))
```
mod_cache: Implement remove URL via a filter.

Remove entities from the cache when re-validation receives a 404 or other
content-no-longer-present error.

Suggested by: Paul Querna, Justin Erenkrantz
Submitted by: Rudiger Plum <ruediger.pluem vodafone.com>
Reviewed by: Justin Erenkrantz

```

---

Revision [**157162**](/viewvc?view=revision&revision=157162) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=157162&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=157162&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=157162))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=157162)

Modified
*Fri Mar 11 21:39:45 2005 UTC*
(19 years, 10 months ago)
by *striker*

File length: 11122 byte(s)

Diff to [previous 156330](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=156330&r2=157162)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=156330&r2=157162&diff_format=h))
```
Another mod_cache fixlet.

* modules/cache/mod_cache.c

  (cache_url_handler): Add more debug output.  Restore original request
   headers when CACHE_SAVE filter isn't added to fix up after the request.

* modules/cache/cache_storage.c

  (cache_select_url): Add more debug output.

```

---

Revision [**156330**](/viewvc?view=revision&revision=156330) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=156330&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=156330&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=156330))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=156330)

Modified
*Sun Mar 6 18:57:22 2005 UTC*
(19 years, 10 months ago)
by *striker*

File length: 10909 byte(s)

Diff to [previous 153385](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=153385&r2=156330)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=153385&r2=156330&diff_format=h))
```
More mod_cache tweakage...

* modules/cache/mod_cache.c

  (cache_save_filter): Instead of unconditionally returning a 304 when
   the original request was conditional and we issued a cache revalidating
   request, handle the request as if it came in while our cache was
   still valid.

* modules/cache/cache_storage.c

  (cache_select_url): Strip off the conditional headers from the original
   request, prior to adding our own for the purpose of revalidating our
   cached response.

```

---

Revision [**153385**](/viewvc?view=revision&revision=153385) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=153385&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=153385&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=153385))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=153385)

Modified
*Fri Feb 11 12:16:06 2005 UTC*
(19 years, 11 months ago)
by *jorton*

File length: 10434 byte(s)

Diff to [previous 152973](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=152973&r2=153385)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=152973&r2=153385&diff_format=h))
```
* modules/cache/mod_disk_cache.c (store_body): Fix format string
warnings; print integers using _FMT strings.

* modules/cache/cache_util.c (ap_cache_check_freshness): Remove unused
variable.

* modules/cache/cache_storage.c (cache_select_url): Remove unused
variable.

```

---

Revision [**152973**](/viewvc?view=revision&revision=152973) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=152973&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=152973&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=152973))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=152973)

Modified
*Wed Feb 9 01:38:59 2005 UTC*
(19 years, 11 months ago)
by *jerenkrantz*

File length: 10474 byte(s)

Diff to [previous 152948](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=152948&r2=152973)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=152948&r2=152973&diff_format=h))
```
More work to properly handle revalidated responses correctly.

* modules/cache/mod_cache.c: If we add a new Expires value, tell our client;
  merge in headers properly (or better than before) so that we can update the
  header fields on a revalidated but with updated header fields.
* modules/cache/mod_cache.h, modules/cache/cache_storage.c:
  Add preserve_orig flag to ap_cache_accept_headers to allow updating of fields.
* modules/cache/mod_disk_cache.c: Load status value from disk.

```

---

Revision [**152948**](/viewvc?view=revision&revision=152948) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=152948&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=152948&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=152948))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=152948)

Modified
*Tue Feb 8 22:23:31 2005 UTC*
(19 years, 11 months ago)
by *striker*

File length: 10175 byte(s)

Diff to [previous 152680](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=152680&r2=152948)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=152680&r2=152948&diff_format=h))
```
More mod_cache tweakage.

* modules/cache/cache_storage.c

  (cache_select_url): Add If-Modified-Since regardless of having
    an ETag or not.  See: RFC2616, 14.26.

```

---

Revision [**152680**](/viewvc?view=revision&revision=152680) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=152680&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=152680&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=152680))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=152680)

Modified
*Tue Feb 8 17:56:38 2005 UTC*
(19 years, 11 months ago)
by *jerenkrantz*

File length: 10203 byte(s)

Diff to [previous 152679](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=152679&r2=152680)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=152679&r2=152680&diff_format=h))
```
Return the proper status and headers when serving a revalidated response.

* modules/cache/mod_cache.c
  (cache_save_filter): Load in the cached status and headers; send a flush
  rather than an EOS when the client request is conditional.
* modules/cache/mod_cache.h: Export ap_cache_accept_headers.
* modules/cache/cache_storage.c: Rename accept_headers to
  ap_cache_accept_headers.

```

---

Revision [**152679**](/viewvc?view=revision&revision=152679) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=152679&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=152679&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=152679))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=152679)

Modified
*Tue Feb 8 17:39:56 2005 UTC*
(19 years, 11 months ago)
by *jerenkrantz*

File length: 10177 byte(s)

Diff to [previous 151408](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=151408&r2=152679)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=151408&r2=152679&diff_format=h))
```
Cleanup structures in mod_cache and friends to remove unused or unnecessary
fields.  Also resolves a number of latent bugs due to the wrong fields being
accessed.

```

---

Revision [**151408**](/viewvc?view=revision&revision=151408) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=151408&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=151408&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=151408))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=151408)

Modified
*Fri Feb 4 20:28:49 2005 UTC*
(19 years, 11 months ago)
by *jerenkrantz*

File length: 10626 byte(s)

Diff to [previous 106737](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=106737&r2=151408)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=106737&r2=151408&diff_format=h))
```
Update copyright year to 2005 and standardize on current copyright owner line.

```

---

Revision [**106737**](/viewvc?view=revision&revision=106737) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=106737&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=106737&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=106737))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=106737)

Modified
*Sat Nov 27 19:06:48 2004 UTC*
(20 years, 2 months ago)
by *jerenkrantz*

File length: 10590 byte(s)

Copied from: [*httpd/httpd/trunk/modules/experimental/cache\_storage.c*](/viewvc/httpd/httpd/trunk/modules/experimental/cache_storage.c?view=log&pathrev=106736) revision 106736

Diff to [previous 106103](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=106103&r2=106737)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=106103&r2=106737&diff_format=h))
```
At long last, promote mod_cache and friends out of experimental/.

Also, take quick pass through docs files to remove experimental label for them.

Reviewed by: Paul Querna, Bill Stoddard, Justin Erenkrantz

```

---

Revision [**106103**](/viewvc?view=revision&revision=106103) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=106103&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=106103&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=106103))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=106103)

Modified
*Sun Nov 21 18:50:36 2004 UTC*
(20 years, 2 months ago)
by *nd*

Original Path: [*httpd/httpd/trunk/modules/experimental/cache\_storage.c*](/viewvc/httpd/httpd/trunk/modules/experimental/cache_storage.c?view=log&pathrev=106103)

File length: 10590 byte(s)

Diff to [previous 105322](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=105322&r2=106103)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=105322&r2=106103&diff_format=h))
```
general property cleanup

```

---

Revision [**105322**](/viewvc?view=revision&revision=105322) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=105322&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=105322&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=105322))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=105322)

Modified
*Tue Sep 28 17:37:54 2004 UTC*
(20 years, 4 months ago)
by *jerenkrantz*

Original Path: [*httpd/httpd/trunk/modules/experimental/cache\_storage.c*](/viewvc/httpd/httpd/trunk/modules/experimental/cache_storage.c?view=log&pathrev=105322)

File length: 10590 byte(s)

Diff to [previous 105280](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=105280&r2=105322)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=105280&r2=105322&diff_format=h))
```
Try to correctly follow RFC 2616 13.3 on validating stale cache responses by
teaching mod_cache's cache_select_url and cache_save_filter how to deal with
this corner case.

* modules/experimental/cache_storage.c
  (cache_select_url): If we have a stale entry, save the handle so that
  cache_save_filter can use it later, and make the request conditional.
* modules/experimental/cache_util.c
  (ap_cache_request_is_conditional): Take in a table rather than request_rec.
* modules/experimental/mod_cache.c
  (cache_out_filter): Fix bogus comment.
  (cache_save_filter): If we have already responded to the client, block all
  data; correctly merge in 'stale' handles that are not really stale; set
  r->status where appropriate; serve cached response if 'fresh'
* modules/experimental/mod_cache.h
  (cache_info): Add a status field.
  (cache_request_rec): Add stale handle field and note we may block responses.
  (ap_cache_request_is_conditional): Update prototype.
* modules/experimental/mod_disk_cache.c
  (store_headers): Use cache_info status instead of r->status.
* modules/experimental/mod_mem_cache.c
  (recall_headers): Properly recall the status field.
  (store_headers): Store the status field via cache_info status.

```

---

Revision [**105280**](/viewvc?view=revision&revision=105280) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=105280&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=105280&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=105280))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=105280)

Modified
*Fri Sep 24 01:22:47 2004 UTC*
(20 years, 4 months ago)
by *jerenkrantz*

Original Path: [*httpd/httpd/trunk/modules/experimental/cache\_storage.c*](/viewvc/httpd/httpd/trunk/modules/experimental/cache_storage.c?view=log&pathrev=105280)

File length: 9632 byte(s)

Diff to [previous 105260](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=105260&r2=105280)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=105260&r2=105280&diff_format=h))
```
Tell mod_mem_cache that we will no longer be serving this object if it is stale.

Submitted by: Bill Stoddard
Reviewed by:  Justin Erenkrantz

```

---

Revision [**105260**](/viewvc?view=revision&revision=105260) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=105260&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=105260&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=105260))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=105260)

Modified
*Wed Sep 22 22:25:45 2004 UTC*
(20 years, 4 months ago)
by *jerenkrantz*

Original Path: [*httpd/httpd/trunk/modules/experimental/cache\_storage.c*](/viewvc/httpd/httpd/trunk/modules/experimental/cache_storage.c?view=log&pathrev=105260)

File length: 9582 byte(s)

Diff to [previous 105236](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=105236&r2=105260)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=105236&r2=105260&diff_format=h))
```
Cleanup a style nit.  No functional changes.

```

---

Revision [**105236**](/viewvc?view=revision&revision=105236) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=105236&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=105236&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=105236))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=105236)

Modified
*Tue Sep 21 22:56:23 2004 UTC*
(20 years, 4 months ago)
by *jerenkrantz*

Original Path: [*httpd/httpd/trunk/modules/experimental/cache\_storage.c*](/viewvc/httpd/httpd/trunk/modules/experimental/cache_storage.c?view=log&pathrev=105236)

File length: 9581 byte(s)

Diff to [previous 104510](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=104510&r2=105236)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=104510&r2=105236&diff_format=h))
```
Fix Expires (freshness) handling in mod_cache.

Previously, if the cached copy was stale, the response would go into an
indeterminate state.  Therefore, the freshness check must be done before we
'accept' the response and, if it fails (i.e.  stale), we can't allow any side
effects.

This caused a number of changes to how mod_disk_cache reads its headers as
ap_scan_script_header_err() purposely has side-effects and that's
unacceptable.  So, factor out only what we need.

Also, remove the broken conditional filter code as you can't reliably alter the
filter list once the response is started.  (Regardless, cache_select_url()
has the freshness checks now.)

Assist to Sascha Schumann for reporting mod_cache was busted.

```

---

Revision [**104510**](/viewvc?view=revision&revision=104510) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=104510&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=104510&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=104510))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=104510)

Modified
*Thu Aug 5 19:12:34 2004 UTC*
(20 years, 5 months ago)
by *jerenkrantz*

Original Path: [*httpd/httpd/trunk/modules/experimental/cache\_storage.c*](/viewvc/httpd/httpd/trunk/modules/experimental/cache_storage.c?view=log&pathrev=104510)

File length: 7477 byte(s)

Diff to [previous 104458](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=104458&r2=104510)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=104458&r2=104510&diff_format=h))
```
Remove cache hooks and custom vtable format in favor of the ap_provider_* API.

Cache-related configuration directives remain the same.

```

---

Revision [**104458**](/viewvc?view=revision&revision=104458) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=104458&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=104458&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=104458))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=104458)

Modified
*Tue Aug 3 08:20:21 2004 UTC*
(20 years, 5 months ago)
by *jerenkrantz*

Original Path: [*httpd/httpd/trunk/modules/experimental/cache\_storage.c*](/viewvc/httpd/httpd/trunk/modules/experimental/cache_storage.c?view=log&pathrev=104458)

File length: 9392 byte(s)

Diff to [previous 102618](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=102618&r2=104458)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=102618&r2=104458&diff_format=h))
```
Avoid confusion when reading mod_cache code.  write_ and read_ often imply
network code; store_ and recall_ are more understandable prefixes in this
context.

Reviewed by:	Roy Fielding, Cliff Woolley

```

---

Revision [**102618**](/viewvc?view=revision&revision=102618) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=102618&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=102618&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=102618))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=102618)

Modified
*Mon Feb 9 20:31:03 2004 UTC*
(20 years, 11 months ago)
by *nd*

Original Path: [*httpd/httpd/trunk/modules/experimental/cache\_storage.c*](/viewvc/httpd/httpd/trunk/modules/experimental/cache_storage.c?view=log&pathrev=102618)

File length: 9308 byte(s)

Diff to [previous 102560](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=102560&r2=102618)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=102560&r2=102618&diff_format=h))
```
fix name of The Apache Software Foundation

```

---

Revision [**102560**](/viewvc?view=revision&revision=102560) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=102560&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=102560&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=102560))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=102560)

Modified
*Sun Feb 8 11:44:42 2004 UTC*
(20 years, 11 months ago)
by *nd*

Original Path: [*httpd/httpd/trunk/modules/experimental/cache\_storage.c*](/viewvc/httpd/httpd/trunk/modules/experimental/cache_storage.c?view=log&pathrev=102560)

File length: 9304 byte(s)

Diff to [previous 102525](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=102525&r2=102560)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=102525&r2=102560&diff_format=h))
```
fix copyright dates according to the first check in

```

---

Revision [**102525**](/viewvc?view=revision&revision=102525) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=102525&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=102525&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=102525))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=102525)

Modified
*Fri Feb 6 22:58:42 2004 UTC*
(20 years, 11 months ago)
by *nd*

Original Path: [*httpd/httpd/trunk/modules/experimental/cache\_storage.c*](/viewvc/httpd/httpd/trunk/modules/experimental/cache_storage.c?view=log&pathrev=102525)

File length: 9304 byte(s)

Diff to [previous 102135](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=102135&r2=102525)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=102135&r2=102525&diff_format=h))
```
apply Apache License, Version 2.0

```

---

Revision [**102135**](/viewvc?view=revision&revision=102135) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=102135&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=102135&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=102135))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=102135)

Modified
*Thu Jan 1 13:26:26 2004 UTC*
(21 years ago)
by *nd*

Original Path: [*httpd/httpd/trunk/modules/experimental/cache\_storage.c*](/viewvc/httpd/httpd/trunk/modules/experimental/cache_storage.c?view=log&pathrev=102135)

File length: 11523 byte(s)

Diff to [previous 101221](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=101221&r2=102135)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=101221&r2=102135&diff_format=h))
```
update license to 2004.

```

---

Revision [**101221**](/viewvc?view=revision&revision=101221) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=101221&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=101221&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=101221))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=101221)

Modified
*Thu Sep 11 18:24:26 2003 UTC*
(21 years, 4 months ago)
by *rederpj*

Original Path: [*httpd/httpd/trunk/modules/experimental/cache\_storage.c*](/viewvc/httpd/httpd/trunk/modules/experimental/cache_storage.c?view=log&pathrev=101221)

File length: 11523 byte(s)

Diff to [previous 101218](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=101218&r2=101221)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=101218&r2=101221&diff_format=h))
```

Fix a couple of AIX xlc_r compiler issues in the cache code I previously
committed. [Paul J. Reder]

```

---

Revision [**101218**](/viewvc?view=revision&revision=101218) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=101218&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=101218&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=101218))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=101218)

Modified
*Thu Sep 11 14:56:03 2003 UTC*
(21 years, 4 months ago)
by *rederpj*

Original Path: [*httpd/httpd/trunk/modules/experimental/cache\_storage.c*](/viewvc/httpd/httpd/trunk/modules/experimental/cache_storage.c?view=log&pathrev=101218)

File length: 11517 byte(s)

Diff to [previous 98573](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=98573&r2=101218)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=98573&r2=101218&diff_format=h))
```

  Modified the cache code to be header-location agnostic. Also
  fixed a number of other cache code bugs related to PR 15852.
  Includes a patch submitted by Sushma Rai <rsushma@novell.com>.
  This fixes mod_mem_cache but not mod_disk_cache yet so I'm not
  closing the PR since that is what they are using. [Paul J. Reder]

```

---

Revision [**98573**](/viewvc?view=revision&revision=98573) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=98573&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=98573&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=98573))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=98573)

Modified
*Mon Feb 3 17:53:28 2003 UTC*
(21 years, 11 months ago)
by *nd*

Original Path: [*httpd/httpd/trunk/modules/experimental/cache\_storage.c*](/viewvc/httpd/httpd/trunk/modules/experimental/cache_storage.c?view=log&pathrev=98573)

File length: 11353 byte(s)

Diff to [previous 96773](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=96773&r2=98573)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=96773&r2=98573&diff_format=h))
```
finished that boring job:
update license to 2003.

Happy New Year! ;-))

```

---

Revision [**96773**](/viewvc?view=revision&revision=96773) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=96773&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=96773&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=96773))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=96773)

Modified
*Thu Sep 12 16:56:56 2002 UTC*
(22 years, 4 months ago)
by *rederpj*

Original Path: [*httpd/httpd/trunk/modules/experimental/cache\_storage.c*](/viewvc/httpd/httpd/trunk/modules/experimental/cache_storage.c?view=log&pathrev=96773)

File length: 11353 byte(s)

Diff to [previous 96302](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=96302&r2=96773)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=96302&r2=96773&diff_format=h))
```

mod_cache: cache_storage.c. Add the hostname and any request
args to the key generated for caching. This provides a unique
key for each virtual host and for each request with unique
args. [Paul J. Reder, args code provided by Kris Verbeeck]

```

---

Revision [**96302**](/viewvc?view=revision&revision=96302) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=96302&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=96302&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=96302))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=96302)

Modified
*Sat Aug 3 22:39:42 2002 UTC*
(22 years, 5 months ago)
by *wrowe*

Original Path: [*httpd/httpd/trunk/modules/experimental/cache\_storage.c*](/viewvc/httpd/httpd/trunk/modules/experimental/cache_storage.c?view=log&pathrev=96302)

File length: 11208 byte(s)

Diff to [previous 95856](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=95856&r2=96302)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=95856&r2=96302&diff_format=h))
```

  We describe body lengths throughout apr in apr_off_t lengths.  While we
  all agree we won't ever cache an entity that huge in memory, the disk
  cache is another matter [e.g. if we cache an existing file.]

```

---

Revision [**95856**](/viewvc?view=revision&revision=95856) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=95856&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=95856&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=95856))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=95856)

Modified
*Sun Jun 23 06:10:00 2002 UTC*
(22 years, 7 months ago)
by *wrowe*

Original Path: [*httpd/httpd/trunk/modules/experimental/cache\_storage.c*](/viewvc/httpd/httpd/trunk/modules/experimental/cache_storage.c?view=log&pathrev=95856)

File length: 11210 byte(s)

Diff to [previous 95847](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=95847&r2=95856)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=95847&r2=95856&diff_format=h))
```

  No crutches.

```

---

Revision [**95847**](/viewvc?view=revision&revision=95847) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=95847&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=95847&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=95847))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=95847)

Modified
*Sat Jun 22 19:29:15 2002 UTC*
(22 years, 7 months ago)
by *stoddard*

Original Path: [*httpd/httpd/trunk/modules/experimental/cache\_storage.c*](/viewvc/httpd/httpd/trunk/modules/experimental/cache_storage.c?view=log&pathrev=95847)

File length: 11204 byte(s)

Diff to [previous 95846](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=95846&r2=95847)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=95846&r2=95847&diff_format=h))
```
Cleanup some leftover cruft from the last commit.

```

---

Revision [**95846**](/viewvc?view=revision&revision=95846) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=95846&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=95846&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=95846))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=95846)

Modified
*Sat Jun 22 19:22:40 2002 UTC*
(22 years, 7 months ago)
by *stoddard*

Original Path: [*httpd/httpd/trunk/modules/experimental/cache\_storage.c*](/viewvc/httpd/httpd/trunk/modules/experimental/cache_storage.c?view=log&pathrev=95846)

File length: 11232 byte(s)

Diff to [previous 95514](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=95514&r2=95846)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=95514&r2=95846&diff_format=h))
```
Move the req_hdrs pointer from the cache_object_t to the cache_handle_t. Each
thread serving a request needs to update the req_hdrs pointer so it needs to
reside in r->pool (where the cache_handle_t resides).

```

---

Revision [**95514**](/viewvc?view=revision&revision=95514) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=95514&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=95514&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=95514))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=95514)

Modified
*Wed Jun 5 03:45:13 2002 UTC*
(22 years, 7 months ago)
by *stoddard*

Original Path: [*httpd/httpd/trunk/modules/experimental/cache\_storage.c*](/viewvc/httpd/httpd/trunk/modules/experimental/cache_storage.c?view=log&pathrev=95514)

File length: 11286 byte(s)

Diff to [previous 95319](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=95319&r2=95514)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=95319&r2=95514&diff_format=h))
```
Add content negotiation and expiration policy to mod_cache and mod_mem_cache.
mod_disk_cache still needs work.

```

---

Revision [**95319**](/viewvc?view=revision&revision=95319) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=95319&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=95319&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=95319))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=95319)

Modified
*Tue May 28 18:04:43 2002 UTC*
(22 years, 8 months ago)
by *stoddard*

Original Path: [*httpd/httpd/trunk/modules/experimental/cache\_storage.c*](/viewvc/httpd/httpd/trunk/modules/experimental/cache_storage.c?view=log&pathrev=95319)

File length: 9009 byte(s)

Diff to [previous 94056](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=94056&r2=95319)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=94056&r2=95319&diff_format=h))
```
Fix problem where mod_cache/mod_disk_cache was setting content_type to
text/plain for all cached remote responses.

```

---

Revision [**94056**](/viewvc?view=revision&revision=94056) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=94056&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=94056&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=94056))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=94056)

Modified
*Wed Mar 20 17:41:55 2002 UTC*
(22 years, 10 months ago)
by *stoddard*

Original Path: [*httpd/httpd/trunk/modules/experimental/cache\_storage.c*](/viewvc/httpd/httpd/trunk/modules/experimental/cache_storage.c?view=log&pathrev=94056)

File length: 9079 byte(s)

Diff to [previous 94027](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=94027&r2=94056)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=94027&r2=94056&diff_format=h))
```
Commit 1 of 2 to:
1. rename ap_rset_content_type to ap_set_content_type
2. reverse the arguments on the call to aligh with ap_set_content_length

```

---

Revision [**94027**](/viewvc?view=revision&revision=94027) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=94027&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=94027&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=94027))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=94027)

Modified
*Wed Mar 20 01:58:47 2002 UTC*
(22 years, 10 months ago)
by *stoddard*

Original Path: [*httpd/httpd/trunk/modules/experimental/cache\_storage.c*](/viewvc/httpd/httpd/trunk/modules/experimental/cache_storage.c?view=log&pathrev=94027)

File length: 9080 byte(s)

Diff to [previous 93918](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=93918&r2=94027)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=93918&r2=94027&diff_format=h))
```
First commit to introduce accessor function to set r->content_type..

```

---

Revision [**93918**](/viewvc?view=revision&revision=93918) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=93918&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=93918&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=93918))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=93918)

Modified
*Wed Mar 13 20:48:07 2002 UTC*
(22 years, 10 months ago)
by *fielding*

Original Path: [*httpd/httpd/trunk/modules/experimental/cache\_storage.c*](/viewvc/httpd/httpd/trunk/modules/experimental/cache_storage.c?view=log&pathrev=93918)

File length: 9073 byte(s)

Diff to [previous 93777](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=93777&r2=93918)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=93777&r2=93918&diff_format=h))
```
Update our copyright for this year.

```

---

Revision [**93777**](/viewvc?view=revision&revision=93777) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=93777&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=93777&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=93777))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=93777)

Modified
*Thu Mar 7 22:13:15 2002 UTC*
(22 years, 10 months ago)
by *stoddard*

Original Path: [*httpd/httpd/trunk/modules/experimental/cache\_storage.c*](/viewvc/httpd/httpd/trunk/modules/experimental/cache_storage.c?view=log&pathrev=93777)

File length: 9073 byte(s)

Diff to [previous 93423](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=93423&r2=93777)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=93423&r2=93777&diff_format=h))
```
Change the return type on read_headers, write_headers, read_body and write_body.
Sanitize some of the return codes.

```

---

Revision [**93423**](/viewvc?view=revision&revision=93423) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=93423&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=93423&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=93423))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=93423)

Modified
*Fri Feb 15 03:54:47 2002 UTC*
(22 years, 11 months ago)
by *stoddard*

Original Path: [*httpd/httpd/trunk/modules/experimental/cache\_storage.c*](/viewvc/httpd/httpd/trunk/modules/experimental/cache_storage.c?view=log&pathrev=93423)

File length: 9082 byte(s)

Diff to [previous 93333](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=93333&r2=93423)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=93333&r2=93423&diff_format=h))
```
Fix a nasty little bug that could be hosing mod_mem_cache as well as mod_disk_cache

```

---

Revision [**93333**](/viewvc?view=revision&revision=93333) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=93333&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=93333&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=93333))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=93333)

Modified
*Fri Feb 8 06:09:34 2002 UTC*
(22 years, 11 months ago)
by *ianh*

Original Path: [*httpd/httpd/trunk/modules/experimental/cache\_storage.c*](/viewvc/httpd/httpd/trunk/modules/experimental/cache_storage.c?view=log&pathrev=93333)

File length: 9069 byte(s)

Diff to [previous 93242](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=93242&r2=93333)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=93242&r2=93333&diff_format=h))
```
style police
PR:
Obtained from:
Submitted by:
Reviewed by:

```

---

Revision [**93242**](/viewvc?view=revision&revision=93242) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=93242&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=93242&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=93242))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=93242)

Modified
*Tue Feb 5 00:15:42 2002 UTC*
(22 years, 11 months ago)
by *ianh*

Original Path: [*httpd/httpd/trunk/modules/experimental/cache\_storage.c*](/viewvc/httpd/httpd/trunk/modules/experimental/cache_storage.c?view=log&pathrev=93242)

File length: 9068 byte(s)

Diff to [previous 93207](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=93207&r2=93242)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=93207&r2=93242&diff_format=h))
```
add a optional function ap_cache_generate_key
which allows a 3rd party module to generate the key name based
on the request_rec.

the idea here is for it to also be able to mess with expiry times
and cachability

add another option.. CacheIgnoreCacheControl. this ignores a 'incoming request's
attempts to get a fresh copy. Mainly I see this as being usefull in r-proxy's

```

---

Revision [**93207**](/viewvc?view=revision&revision=93207) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=93207&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=93207&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=93207))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=93207)

Modified
*Sun Feb 3 19:04:15 2002 UTC*
(22 years, 11 months ago)
by *stoddard*

Original Path: [*httpd/httpd/trunk/modules/experimental/cache\_storage.c*](/viewvc/httpd/httpd/trunk/modules/experimental/cache_storage.c?view=log&pathrev=93207)

File length: 8712 byte(s)

Diff to [previous 93196](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=93196&r2=93207)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=93196&r2=93207&diff_format=h))
```
mod_disk_cache cleanup.  Pass request_rec on the open_entity call.

```

---

Revision [**93196**](/viewvc?view=revision&revision=93196) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=93196&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=93196&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=93196))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=93196)

Modified
*Sun Feb 3 06:24:55 2002 UTC*
(22 years, 11 months ago)
by *stoddard*

Original Path: [*httpd/httpd/trunk/modules/experimental/cache\_storage.c*](/viewvc/httpd/httpd/trunk/modules/experimental/cache_storage.c?view=log&pathrev=93196)

File length: 8717 byte(s)

Diff to [previous 93030](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=93030&r2=93196)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=93030&r2=93196&diff_format=h))
```
Support files for mod_disk_cache. Some tweaks to arguments on various hook
calls. Still lots of cleanup work to do here...

```

---

Revision [**93030**](/viewvc?view=revision&revision=93030) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=93030&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=93030&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=93030))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=93030)

Modified
*Fri Jan 25 20:09:33 2002 UTC*
(23 years ago)
by *ianh*

Original Path: [*httpd/httpd/trunk/modules/experimental/cache\_storage.c*](/viewvc/httpd/httpd/trunk/modules/experimental/cache_storage.c?view=log&pathrev=93030)

File length: 8629 byte(s)

Diff to [previous 92805](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=92805&r2=93030)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=92805&r2=93030&diff_format=h))
```

I haven't created the optional function to specify the cache_key yet,
That will come after this patch.

ok.. brief summary of whats changed

* new Optional Directives
	* CacheMemEntrySize -- max size of a individual entry in memory
		cache
	* CacheIgnoreNoLastMod - so we can cache mod-included files

* it tries to figure out the size of the request based on buckets if the
	content-length header isn't set

* mem_cache now caches the subprocess_env & notes tables
* the CACHE_IN/OUT/CONDITIONAL run at FTYPE_CONTENT+1, so that
	all other content filters run BEFORE the cache in.

note: the code is still experimental, and we need a bit more work
mainly...
* garbage collection
* cache stats/reporting
* manual removal of a key.

```

---

Revision [**92805**](/viewvc?view=revision&revision=92805) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=92805&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=92805&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=92805))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=92805)

Modified
*Thu Jan 10 09:11:33 2002 UTC*
(23 years ago)
by *wrowe*

Original Path: [*httpd/httpd/trunk/modules/experimental/cache\_storage.c*](/viewvc/httpd/httpd/trunk/modules/experimental/cache_storage.c?view=log&pathrev=92805)

File length: 9848 byte(s)

Diff to [previous 92734](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=92734&r2=92805)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=92734&r2=92805&diff_format=h))
```

  Fix a handful of AP_MODULE_DECLARE_DATA exports for .so modules.

```

---

Revision [**92734**](/viewvc?view=revision&revision=92734) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=92734&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=92734&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=92734))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=92734)

Modified
*Fri Jan 4 17:58:36 2002 UTC*
(23 years ago)
by *ianh*

Original Path: [*httpd/httpd/trunk/modules/experimental/cache\_storage.c*](/viewvc/httpd/httpd/trunk/modules/experimental/cache_storage.c?view=log&pathrev=92734)

File length: 9841 byte(s)

Diff to [previous 91005](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=91005&r2=92734)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=91005&r2=92734&diff_format=h))
```
cache now can cache things for minutes.
add remove_entity function to type on mem_cache (so we can remove items from the cache)
PR:
Obtained from:
Submitted by:
Reviewed by:

```

---

Revision [**91005**](/viewvc?view=revision&revision=91005) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=91005&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=91005&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=91005))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=91005)

Modified
*Tue Sep 11 17:41:05 2001 UTC*
(23 years, 4 months ago)
by *stoddard*

Original Path: [*httpd/httpd/trunk/modules/experimental/cache\_storage.c*](/viewvc/httpd/httpd/trunk/modules/experimental/cache_storage.c?view=log&pathrev=91005)

File length: 9854 byte(s)

Diff to [previous 90994](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=90994&r2=91005)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=90994&r2=91005&diff_format=h))
```
Maintain info structure in mod_mem_cache. This fixes bug where the content
type was lost when content was put in the cache.

```

---

Revision [**90994**](/viewvc?view=revision&revision=90994) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=90994&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=90994&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=90994))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=90994)

Modified
*Mon Sep 10 18:09:56 2001 UTC*
(23 years, 4 months ago)
by *stoddard*

Original Path: [*httpd/httpd/trunk/modules/experimental/cache\_storage.c*](/viewvc/httpd/httpd/trunk/modules/experimental/cache_storage.c?view=log&pathrev=90994)

File length: 9719 byte(s)

Diff to [previous 90947](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=90947&r2=90994)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=90947&r2=90994&diff_format=h))
```
Introduce the notion of a multi part cache object. Part of the cache_object
is common across any cache implementation, the other part is private to
the particular implementation (eg, mem_cache_object_t/mod_mem_cache).
Use a cache_handle_t allocated out of the request pool to hold references
to the callback functions and common cache object.

The cache_handle_t contains implementation specific callback functions and
a reference to a common cache_object_t.  The cache_object_t contains
a reference to an implementation specific cache object extension (mem_cache_object_t
for example).

All this simplifies managing the callback function pointers (don't want to
save them in each cache entry) and collections of cache_object_t keyed
to a single url.

```

---

Revision [**90947**](/viewvc?view=revision&revision=90947) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=90947&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=90947&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=90947))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=90947)

Modified
*Fri Sep 7 02:56:11 2001 UTC*
(23 years, 4 months ago)
by *stoddard*

Original Path: [*httpd/httpd/trunk/modules/experimental/cache\_storage.c*](/viewvc/httpd/httpd/trunk/modules/experimental/cache_storage.c?view=log&pathrev=90947)

File length: 9481 byte(s)

Diff to [previous 90901](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=90901&r2=90947)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=90901&r2=90947&diff_format=h))
```
Pass headers on read/write header calls.  Update mod_mem_cache to cache headers.
So much to do so little time ...

```

---

Revision [**90901**](/viewvc?view=revision&revision=90901) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=90901&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=90901&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=90901))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=90901)

Modified
*Wed Sep 5 13:33:42 2001 UTC*
(23 years, 4 months ago)
by *trawick*

Original Path: [*httpd/httpd/trunk/modules/experimental/cache\_storage.c*](/viewvc/httpd/httpd/trunk/modules/experimental/cache_storage.c?view=log&pathrev=90901)

File length: 10037 byte(s)

Diff to [previous 90642](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=90642&r2=90901)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=90642&r2=90901&diff_format=h))
```
fix a module reference so that it doesn't look like two files
are trying to declare it

```

---

Revision [**90642**](/viewvc?view=revision&revision=90642) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=90642&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=90642&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=90642))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=90642)

Modified
*Fri Aug 24 17:21:39 2001 UTC*
(23 years, 5 months ago)
by *stoddard*

Original Path: [*httpd/httpd/trunk/modules/experimental/cache\_storage.c*](/viewvc/httpd/httpd/trunk/modules/experimental/cache_storage.c?view=log&pathrev=90642)

File length: 10037 byte(s)

Diff to [previous 90637](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=90637&r2=90642)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=90637&r2=90642&diff_format=h))
```
Fix seg fault when requesting a page that returns a 'don't cache' header.

```

---

Revision [**90637**](/viewvc?view=revision&revision=90637) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=90637&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=90637&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=90637))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=90637)

Modified
*Fri Aug 24 17:01:21 2001 UTC*
(23 years, 5 months ago)
by *stoddard*

Original Path: [*httpd/httpd/trunk/modules/experimental/cache\_storage.c*](/viewvc/httpd/httpd/trunk/modules/experimental/cache_storage.c?view=log&pathrev=90637)

File length: 10060 byte(s)

Diff to [previous 90579](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=90579&r2=90637)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=90579&r2=90637&diff_format=h))
```
Eliminate a cache_handle leak. cache_handle is now allocated out of the
request pool.

```

---

Revision [**90579**](/viewvc?view=revision&revision=90579) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=90579&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=90579&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=90579))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=90579)

Modified
*Thu Aug 23 19:46:55 2001 UTC*
(23 years, 5 months ago)
by *trawick*

Original Path: [*httpd/httpd/trunk/modules/experimental/cache\_storage.c*](/viewvc/httpd/httpd/trunk/modules/experimental/cache_storage.c?view=log&pathrev=90579)

File length: 9980 byte(s)

Diff to [previous 90549](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=90549&r2=90579)
([colored](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?r1=90549&r2=90579&diff_format=h))
```
mod_cache cleanup:

change the module variable from tcache_module to cache_module

clear up various gcc warnings

don't segfault when the silly user (me) configures CACHE_OUT
manually

```

---

Revision [**90549**](/viewvc?view=revision&revision=90549) -
([view](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=90549&view=markup))
([download](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?revision=90549&view=co))
([annotate](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?annotate=90549))
- [[select for diffs]](/viewvc/httpd/httpd/trunk/modules/cache/cache_storage.c?view=log&r1=90549)

Added
*Thu Aug 23 14:15:00 2001 UTC*
(23 years, 5 months ago)
by *stoddard*

Original Path: [*httpd/httpd/trunk/modules/experimental/cache\_storage.c*](/viewvc/httpd/httpd/trunk/modules/experimental/cache_storage.c?view=log&pathrev=90549)

File length: 9947 byte(s)
```
Experimental cache based on Graham Leggett's layered cache design.  mod_cache
implements a quick handler, and three filters. The filters are
CACHE_IN for loading the cache, CACHE_OUT for serving content out of the cache
and CACHE_CONDITIONAL, which handles stale entries in the cache.

mod_cache implements code that makes RFC compliant caching decisions. It
interfaces with the actual storage mechanism via calls to functions defined in
cache_storage.c.  This commit includes a simple in memory (malloc'ed memory)
cache implementation that demonstrates autoloading and serving files
keyed on URL.

This is not even close to production ready. You have been warned :-)

```

---

This form allows you to request diffs between any two revisions of this file.
For each of the two "sides" of the diff,
enter a numeric revision.

|  | Diffs between  and |
| --- | --- |
|  | Type of Diff should be a Colored Diff Long Colored Diff Full Colored Diff Unidiff Context Diff Side by Side |

---

| infrastructure at apache.org | **[ViewVC Help](/vc-static/help_log.html)** |
| --- | --- |
| Powered by [ViewVC 1.1.26](http://viewvc.tigris.org/) |  |



=== Content from lists.apache.org_9571df72_20250125_211624.html ===


[![Foal logo](images/logo.png)](./)

* ![Display Settings](images/cog.png "Display Settings")
  **Email display mode:**

  ---

   Modern rendering

   Legacy rendering
* ![Logged out](images/user_loggedout.png "Not logged in")

This site requires JavaScript enabled. Please enable it.



=== Content from lists.apache.org_aef3df22_20250125_211622.html ===


[![Foal logo](images/logo.png)](./)

* ![Display Settings](images/cog.png "Display Settings")
  **Email display mode:**

  ---

   Modern rendering

   Legacy rendering
* ![Logged out](images/user_loggedout.png "Not logged in")

This site requires JavaScript enabled. Please enable it.



=== Content from access.redhat.com_c09ecd46_20250126_120054.html ===


[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

**We're sorry but cve-details doesn't work properly without JavaScript enabled. Please enable it to continue.**

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from lists.apache.org_6b8df184_20250125_211624.html ===


[![Foal logo](images/logo.png)](./)

* ![Display Settings](images/cog.png "Display Settings")
  **Email display mode:**

  ---

   Modern rendering

   Legacy rendering
* ![Logged out](images/user_loggedout.png "Not logged in")

This site requires JavaScript enabled. Please enable it.



=== Content from lists.apache.org_5c66d9d2_20250125_211626.html ===


[![Foal logo](images/logo.png)](./)

* ![Display Settings](images/cog.png "Display Settings")
  **Email display mode:**

  ---

   Modern rendering

   Legacy rendering
* ![Logged out](images/user_loggedout.png "Not logged in")

This site requires JavaScript enabled. Please enable it.



=== Content from lists.apache.org_ba0752cb_20250125_211623.html ===


[![Foal logo](images/logo.png)](./)

* ![Display Settings](images/cog.png "Display Settings")
  **Email display mode:**

  ---

   Modern rendering

   Legacy rendering
* ![Logged out](images/user_loggedout.png "Not logged in")

This site requires JavaScript enabled. Please enable it.



=== Content from lists.apache.org_a805a856_20250125_211625.html ===


[![Foal logo](images/logo.png)](./)

* ![Display Settings](images/cog.png "Display Settings")
  **Email display mode:**

  ---

   Modern rendering

   Legacy rendering
* ![Logged out](images/user_loggedout.png "Not logged in")

This site requires JavaScript enabled. Please enable it.



=== Content from lists.apache.org_616e103a_20250125_211623.html ===


[![Foal logo](images/logo.png)](./)

* ![Display Settings](images/cog.png "Display Settings")
  **Email display mode:**

  ---

   Modern rendering

   Legacy rendering
* ![Logged out](images/user_loggedout.png "Not logged in")

This site requires JavaScript enabled. Please enable it.


