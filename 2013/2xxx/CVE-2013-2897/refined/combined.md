=== Content from openwall.com_2b27a420_20250125_153345.html ===


| [Openwall](/) * [Products](/)   + [Openwall GNU/\*/Linux   *server OS*](/Owl/)+ [Linux Kernel Runtime Guard](/lkrg/)+ [John the Ripper   *password cracker*](/john/)         - [Free & Open Source for any platform](/john/)- [in the cloud](/john/cloud/)- [Pro for Linux](/john/pro/linux/)- [Pro for macOS](/john/pro/macosx/)+ [Wordlists   *for password cracking*](/wordlists/)+ [passwdqc   *policy enforcement*](/passwdqc/)             - [Free & Open Source for Unix](/passwdqc/)- [Pro for Windows (Active Directory)](/passwdqc/windows/)+ [yescrypt   *KDF & password hashing*](/yescrypt/)+ [yespower   *Proof-of-Work (PoW)*](/yespower/)+ [crypt\_blowfish   *password hashing*](/crypt/)+ [phpass   *ditto in PHP*](/phpass/)+ [tcb   *better password shadowing*](/tcb/)+ [Pluggable Authentication Modules](/pam/)+ [scanlogd   *port scan detector*](/scanlogd/)+ [popa3d   *tiny POP3 daemon*](/popa3d/)+ [blists   *web interface to mailing lists*](/blists/)+ [msulogin   *single user mode login*](/msulogin/)+ [php\_mt\_seed   *mt\_rand() cracker*](/php_mt_seed/)* [Services](/services/)* Publications       + [Articles](/articles/)+ [Presentations](/presentations/)* Resources         + [Mailing lists](/lists/)+ [Community wiki](https://openwall.info/wiki/)+ [Source code repositories (GitHub)](https://github.com/openwall)+ [Source code repositories (CVSweb)](https://cvsweb.openwall.com)+ [File archive & mirrors](/mirrors/)+ [How to verify digital signatures](/signatures/)+ [OVE IDs](/ove/)* [What's new](/news) | |
| --- | --- |

| | [Hash Suite - Windows password security audit tool. GUI, reports in PDF.](https://hashsuite.openwall.net) | | --- | |
| --- | --- |

[[<prev]](12) [[next>]](../../../2013/08/29/1) [[day]](.) [[month]](..) [[year]](../..) [[list]](../../..)
```

Message-ID: <20130828213206.GM14644@outflux.net>
Date: Wed, 28 Aug 2013 14:32:06 -0700
From: Kees Cook <keescook@...omium.org>
To: oss-security@...ts.openwall.com
Subject: Linux HID security flaws

Hi,

I've found several issues in the Linux HID code. They are making their way
into the Linux kernel via the linux-input tree now:

<http://marc.info/?l=linux-input&m=137772180514608&w=1>
0001-HID-validate-HID-report-id-size.patch
CVE-2013-2888
Requires CONFIG_HID
Memory write via arbitrary heap array index. This is the most serious,
IMO, as it allows (on 32-bit) access to the entire memory range (the
index is unsigned 32 bit). This is mitigated slightly by the fact that
the starting address is at an "unknown" location on the heap, and that
the value written is an "arbitrary" kernel pointer. Still, this could
almost certainly be turned into full kernel execution given enough
study.

<http://marc.info/?l=linux-input&m=137772181214612&w=1>
0002-HID-provide-a-helper-for-validating-hid-reports.patch
Routine that many of the driver fixes use to verify their report sanity.

<http://marc.info/?l=linux-input&m=137772182014614&w=1>
0003-HID-zeroplus-validate-output-report-details.patch
CVE-2013-2889
Requires CONFIG_HID_ZEROPLUS
Small past-end-of-heap-alloc zeroing.

<http://marc.info/?l=linux-input&m=137772182814616&w=1>
0004-HID-sony-validate-HID-output-report-details.patch
CVE-2013-2890
Requires CONFIG_HID_SONY
Small past-end-of-heap-alloc zeroing

<http://marc.info/?l=linux-input&m=137772184614622&w=1>
0005-HID-steelseries-validate-output-report-details.patch
CVE-2013-2891
Requires CONFIG_HID_STEELSERIES
16 byte past-end-of-heap-alloc zeroing

<http://marc.info/?l=linux-input&m=137772185414625&w=1>
0006-HID-pantherlord-validate-output-report-details.patch
CVE-2013-2892
Requires CONFIG_HID_PANTHERLORD
Small past-end-of-heap-alloc zeroing

<http://marc.info/?l=linux-input&m=137772186714627&w=1>
0007-HID-LG-validate-HID-output-report-details.patch
CVE-2013-2893
Requires CONFIG_LOGITECH_FF or CONFIG_LOGIG940_FF or CONFIG_LOGIWHEELS_FF
Userspace-assisted small past-end-of-heap-alloc zeroing

<http://marc.info/?l=linux-input&m=137772187514628&w=1>
0008-HID-lenovo-tpkbd-validate-output-report-details.patch
CVE-2013-2894
Requires CONFIG_HID_LENOVO_TPKBD
Small past-end-of-heap-alloc zeroing

<http://marc.info/?l=linux-input&m=137772188314631&w=1>
0009-HID-logitech-dj-validate-output-report-details.patch
CVE-2013-2895
Requires CONFIG_HID_LOGITECH_DJ
Can leak up to 12K of kernel memory contents to device, or NULL deref Oops
DoS

<http://marc.info/?l=linux-input&m=137772189314633&w=1>
0010-HID-ntrig-validate-feature-report-details.patch
CVE-2013-2896
Requires CONFIG_HID_NTRIG
Triggers NULL deref Oops DoS

<http://marc.info/?l=linux-input&m=137772190214635&w=1>
0011-HID-multitouch-validate-feature-report-details.patch
CVE-2013-2897
Requires CONFIG_HID_MULTITOUCH
Slightly flexible heap overwrite with static value 0x2, or NULL deref Oops
DoS

<http://marc.info/?l=linux-input&m=137772191114645&w=1>
0012-HID-sensor-hub-validate-feature-report-details.patch
CVE-2013-2898
Requires CONFIG_HID_SENSOR_HUB
Potential kernel caller confusion via past-end-of-heap-allocation read

<http://marc.info/?l=linux-input&m=137772191714649&w=1>
0013-HID-picolcd_core-validate-output-report-details.patch
CVE-2013-2899
Requires CONFIG_HID_PICOLCD
Userspace-assisted NULL deref Oops DoS

<http://marc.info/?t=137772196600012&r=1&w=1>
0014-HID-check-for-NULL-field-when-setting-values.patch
Just a defensive change, since several drivers would have been less
vulnerable with this check.

-Kees

--
Kees Cook
Chrome OS Security

```

[Powered by blists](https://www.openwall.com/blists/) - [more mailing lists](https://lists.openwall.net)

Please check out the
[Open Source Software Security Wiki](https://oss-security.openwall.org/wiki/), which is counterpart to this
[mailing list](https://oss-security.openwall.org/wiki/mailing-lists/oss-security).

Confused about [mailing lists](/lists/) and their use?
[Read about mailing lists on Wikipedia](https://en.wikipedia.org/wiki/Electronic_mailing_list)
and check out these
[guidelines on proper formatting of your messages](https://www.complang.tuwien.ac.at/anton/mail-news-errors.html).



=== Content from www.kernel.org_db2e9df0_20250125_153402.html ===
commit 260716c872b0d2702ebf15c9228c6e86e0ea404a
Author: Ben Hutchings
Date: Fri Jan 3 04:33:36 2014 +0000
Linux 3.2.54
commit 295efae476b7941e55a0d46ad4f1044d7f7ecbe0
Author: KOBAYASHI Yoshitake
Date: Sun Jul 7 07:35:45 2013 +0900
mmc: block: fix a bug of error handling in MMC driver
commit c8760069627ad3b0dbbea170f0c4c58b16e18d3d upstream.
Current MMC driver doesn't handle generic error (bit19 of device
status) in write sequence. As a result, write data gets lost when
generic error occurs. For example, a generic error when updating a
filesystem management information causes a loss of write data and
corrupts the filesystem. In the worst case, the system will never
boot.
This patch includes the following functionality:
1. To enable error checking for the response of CMD12 and CMD13
in write command sequence
2. To retry write sequence when a generic error occurs
Messages are added for v2 to show what occurs.
[Backported to 3.4-stable]
Signed-off-by: KOBAYASHI Yoshitake
Signed-off-by: Chris Ball
Signed-off-by: Ben Hutchings
commit 969a08e9048ddd0d655a19e692673cdb95116ce6
Author: Steven Rostedt (Red Hat)
Date: Mon Nov 25 20:59:46 2013 -0500
ftrace: Fix function graph with loading of modules
commit 8a56d7761d2d041ae5e8215d20b4167d8aa93f51 upstream.
Commit 8c4f3c3fa9681 "ftrace: Check module functions being traced on reload"
fixed module loading and unloading with respect to function tracing, but
it missed the function graph tracer. If you perform the following
# cd /sys/kernel/debug/tracing
# echo function\_graph > current\_tracer
# modprobe nfsd
# echo nop > current\_tracer
You'll get the following oops message:
------------[ cut here ]------------
WARNING: CPU: 2 PID: 2910 at /linux.git/kernel/trace/ftrace.c:1640 \_\_ftrace\_hash\_rec\_update.part.35+0x168/0x1b9()
Modules linked in: nfsd exportfs nfs\_acl lockd ipt\_MASQUERADE sunrpc ip6t\_REJECT nf\_conntrack\_ipv6 nf\_defrag\_ipv6 ip6table\_filter ip6\_tables uinput snd\_hda\_codec\_idt
CPU: 2 PID: 2910 Comm: bash Not tainted 3.13.0-rc1-test #7
Hardware name: To Be Filled By O.E.M. To Be Filled By O.E.M./To be filled by O.E.M., BIOS SDBLI944.86P 05/08/2007
0000000000000668 ffff8800787efcf8 ffffffff814fe193 ffff88007d500000
0000000000000000 ffff8800787efd38 ffffffff8103b80a 0000000000000668
ffffffff810b2b9a ffffffff81a48370 0000000000000001 ffff880037aea000
Call Trace:
[] dump\_stack+0x4f/0x7c
[] warn\_slowpath\_common+0x81/0x9b
[] ? \_\_ftrace\_hash\_rec\_update.part.35+0x168/0x1b9
[] warn\_slowpath\_null+0x1a/0x1c
[] \_\_ftrace\_hash\_rec\_update.part.35+0x168/0x1b9
[] ? \_\_mutex\_lock\_slowpath+0x364/0x364
[] ftrace\_shutdown+0xd7/0x12b
[] unregister\_ftrace\_graph+0x49/0x78
[] graph\_trace\_reset+0xe/0x10
[] tracing\_set\_tracer+0xa7/0x26a
[] tracing\_set\_trace\_write+0x8b/0xbd
[] ? ftrace\_return\_to\_handler+0xb2/0xde
[] ? \_\_sb\_end\_write+0x5e/0x5e
[] vfs\_write+0xab/0xf6
[] ftrace\_graph\_caller+0x85/0x85
[] SyS\_write+0x59/0x82
[] ftrace\_graph\_caller+0x85/0x85
[] system\_call\_fastpath+0x16/0x1b
---[ end trace 940358030751eafb ]---
The above mentioned commit didn't go far enough. Well, it covered the
function tracer by adding checks in \_\_register\_ftrace\_function(). The
problem is that the function graph tracer circumvents that (for a slight
efficiency gain when function graph trace is running with a function
tracer. The gain was not worth this).
The problem came with ftrace\_startup() which should always be called after
\_\_register\_ftrace\_function(), if you want this bug to be completely fixed.
Anyway, this solution moves \_\_register\_ftrace\_function() inside of
ftrace\_startup() and removes the need to call them both.
Reported-by: Dave Wysochanski
Fixes: ed926f9b35cd ("ftrace: Use counters to enable functions to trace")
Signed-off-by: Steven Rostedt
Signed-off-by: Ben Hutchings
commit 874d3954a35ca03d491926146238aa2bf8f308f3
Author: Steven Rostedt (Red Hat)
Date: Tue Jul 30 00:04:32 2013 -0400
ftrace: Check module functions being traced on reload
commit 8c4f3c3fa9681dc549cd35419b259496082fef8b upstream.
There's been a nasty bug that would show up and not give much info.
The bug displayed the following warning:
WARNING: at kernel/trace/ftrace.c:1529 \_\_ftrace\_hash\_rec\_update+0x1e3/0x230()
Pid: 20903, comm: bash Tainted: G O 3.6.11+ #38405.trunk
Call Trace:
[] warn\_slowpath\_common+0x7f/0xc0
[] warn\_slowpath\_null+0x1a/0x20
[] \_\_ftrace\_hash\_rec\_update+0x1e3/0x230
[] ftrace\_hash\_move+0x28/0x1d0
[] ? kfree+0x2c/0x110
[] ftrace\_regex\_release+0x8e/0x150
[] \_\_fput+0xae/0x220
[] \_\_\_\_fput+0xe/0x10
[] task\_work\_run+0x72/0x90
[] do\_notify\_resume+0x6c/0xc0
[] ? trace\_hardirqs\_on\_thunk+0x3a/0x3c
[] int\_signal+0x12/0x17
---[ end trace 793179526ee09b2c ]---
It was finally narrowed down to unloading a module that was being traced.
It was actually more than that. When functions are being traced, there's
a table of all functions that have a ref count of the number of active
tracers attached to that function. When a function trace callback is
registered to a function, the function's record ref count is incremented.
When it is unregistered, the function's record ref count is decremented.
If an inconsistency is detected (ref count goes below zero) the above
warning is shown and the function tracing is permanently disabled until
reboot.
The ftrace callback ops holds a hash of functions that it filters on
(and/or filters off). If the hash is empty, the default means to filter
all functions (for the filter\_hash) or to disable no functions (for the
notrace\_hash).
When a module is unloaded, it frees the function records that represent
the module functions. These records exist on their own pages, that is
function records for one module will not exist on the same page as
function records for other modules or even the core kernel.
Now when a module unloads, the records that represents its functions are
freed. When the module is loaded again, the records are recreated with
a default ref count of zero (unless there's a callback that traces all
functions, then they will also be traced, and the ref count will be
incremented).
The problem is that if an ftrace callback hash includes functions of the
module being unloaded, those hash entries will not be removed. If the
module is reloaded in the same location, the hash entries still point
to the functions of the module but the module's ref counts do not reflect
that.
With the help of Steve and Joern, we found a reproducer:
Using uinput module and uinput\_release function.
cd /sys/kernel/debug/tracing
modprobe uinput
echo uinput\_release > set\_ftrace\_filter
echo function > current\_tracer
rmmod uinput
modprobe uinput
# check /proc/modules to see if loaded in same addr, otherwise try again
echo nop > current\_tracer
[BOOM]
The above loads the uinput module, which creates a table of functions that
can be traced within the module.
We add uinput\_release to the filter\_hash to trace just that function.
Enable function tracincg, which increments the ref count of the record
associated to uinput\_release.
Remove uinput, which frees the records including the one that represents
uinput\_release.
Load the uinput module again (and make sure it's at the same address).
This recreates the function records all with a ref count of zero,
including uinput\_release.
Disable function tracing, which will decrement the ref count for uinput\_release
which is now zero because of the module removal and reload, and we have
a mismatch (below zero ref count).
The solution is to check all currently tracing ftrace callbacks to see if any
are tracing any of the module's functions when a module is loaded (it already does
that with callbacks that trace all functions). If a callback happens to have
a module function being traced, it increments that records ref count and starts
tracing that function.
There may be a strange side effect with this, where tracing module functions
on unload and then reloading a new module may have that new module's functions
being traced. This may be something that confuses the user, but it's not
a big deal. Another approach is to disable all callback hashes on module unload,
but this leaves some ftrace callbacks that may not be registered, but can
still have hashes tracing the module's function where ftrace doesn't know about
it. That situation can cause the same bug. This solution solves that case too.
Another benefit of this solution, is it is possible to trace a module's
function on unload and load.
Link: http://lkml.kernel.org/r/20130705142629.GA325@redhat.com
Reported-by: Jörn Engel
Reported-by: Dave Jones
Reported-by: Steve Hodgson
Tested-by: Steve Hodgson
Signed-off-by: Steven Rostedt
[bwh: Backported to 3.2: adjust context, indentation]
Signed-off-by: Ben Hutchings
commit 195c821e74fc44042a86f9d7f101dc6f03a826b1
Author: Steven Rostedt
Date: Mon Dec 19 19:07:36 2011 -0500
ftrace: Create ftrace\_hash\_empty() helper routine
commit 06a51d9307380c78bb5c92e68fc80ad2c7d7f890 upstream.
There are two types of hashes in the ftrace\_ops; one type
is the filter\_hash and the other is the notrace\_hash. Either
one may be null, meaning it has no elements. But when elements
are added, the hash is allocated.
Throughout the code, a check needs to be made to see if a hash
exists or the hash has elements, but the check if the hash exists
is usually missing causing the possible "NULL pointer dereference bug".
Add a helper routine called "ftrace\_hash\_empty()" that returns
true if the hash doesn't exist or its count is zero. As they mean
the same thing.
Last-bug-reported-by: Jiri Olsa
Signed-off-by: Steven Rostedt
Signed-off-by: Ben Hutchings
commit 4f02a39322708b815cd2f623632ce9ea19a955e1
Author: Steven Rostedt
Date: Mon Dec 19 18:44:44 2011 -0500
ftrace: Fix ftrace hash record update with notrace
commit c842e975520f8ab09e293cc92f51a1f396251fd5 upstream.
When disabling the "notrace" records, that means we want to trace them.
If the notrace\_hash is zero, it means that we want to trace all
records. But to disable a zero notrace\_hash means nothing.
The check for the notrace\_hash count was incorrect with:
if (hash && !hash->count)
return
With the correct comment above it that states that we do nothing
if the notrace\_hash has zero count. But !hash also means that
the notrace hash has zero count. I think this was done to
protect against dereferencing NULL. But if !hash is true, then
we go through the following loop without doing a single thing.
Fix it to:
if (!hash || !hash->count)
return;
Signed-off-by: Steven Rostedt
Signed-off-by: Ben Hutchings
commit f7d537dc8714abf422238419d057376a772be9fd
Author: Jason Wang
Date: Fri Nov 1 15:01:10 2013 +0800
net: flow\_dissector: fail on evil iph->ihl
commit 6f092343855a71e03b8d209815d8c45bf3a27fcd upstream.
We don't validate iph->ihl which may lead a dead loop if we meet a IPIP
skb whose iph->ihl is zero. Fix this by failing immediately when iph->ihl
is evil (less than 5).
This issue were introduced by commit ec5efe7946280d1e84603389a1030ccec0a767ae
(rps: support IPIP encapsulation).
Cc: Eric Dumazet
Cc: Petr Matousek
Cc: Michael S. Tsirkin
Cc: Daniel Borkmann
Signed-off-by: Jason Wang
Acked-by: Eric Dumazet
Signed-off-by: David S. Miller
[bwh: Backported to 3.2: the affected code is in \_\_skb\_get\_rxhash()]
Signed-off-by: Ben Hutchings
commit cc5285f4c67a48e5775d633267f8e284626a990a
Author: Dan Carpenter
Date: Thu Oct 31 21:00:10 2013 +0300
xfs: underflow bug in xfs\_attrlist\_by\_handle()
commit 31978b5cc66b8ba8a7e8eef60b12395d41b7b890 upstream.
If we allocate less than sizeof(struct attrlist) then we end up
corrupting memory or doing a ZERO\_PTR\_SIZE dereference.
This can only be triggered with CAP\_SYS\_ADMIN.
Reported-by: Nico Golde
Reported-by: Fabian Yamaguchi
Signed-off-by: Dan Carpenter
Reviewed-by: Dave Chinner
Signed-off-by: Ben Myers
(cherry picked from commit 071c529eb672648ee8ca3f90944bcbcc730b4c06)
Signed-off-by: Ben Hutchings
commit 1016f060cfaf7c575fce3a92c987d21202da3261
Author: Mahesh Rajashekhara
Date: Thu Oct 31 14:01:02 2013 +0530
aacraid: prevent invalid pointer dereference
commit b4789b8e6be3151a955ade74872822f30e8cd914 upstream.
It appears that driver runs into a problem here if fibsize is too small
because we allocate user\_srbcmd with fibsize size only but later we
access it until user\_srbcmd->sg.count to copy it over to srbcmd.
It is not correct to test (fibsize < sizeof(\*user\_srbcmd)) because this
structure already includes one sg element and this is not needed for
commands without data. So, we would recommend to add the following
(instead of test for fibsize == 0).
Signed-off-by: Mahesh Rajashekhara
Reported-by: Nico Golde
Reported-by: Fabian Yamaguchi
Signed-off-by: Linus Torvalds
Signed-off-by: Ben Hutchings
commit e3715d06207f877ac6c15b2627515f63e2c59f57
Author: Dan Carpenter
Date: Wed Oct 30 20:12:51 2013 +0300
libertas: potential oops in debugfs
commit a497e47d4aec37aaf8f13509f3ef3d1f6a717d88 upstream.
If we do a zero size allocation then it will oops. Also we can't be
sure the user passes us a NUL terminated string so I've added a
terminator.
This code can only be triggered by root.
Reported-by: Nico Golde
Reported-by: Fabian Yamaguchi
Signed-off-by: Dan Carpenter
Acked-by: Dan Williams
Signed-off-by: John W. Linville
Signed-off-by: Ben Hutchings
commit b5c70f452589114e6a551803bf312eed1b57f964
Author: Russell King
Date: Fri Sep 7 18:22:28 2012 +0100
ARM: 7527/1: uaccess: explicitly check \_\_user pointer when !CPU\_USE\_DOMAINS
commit 8404663f81d212918ff85f493649a7991209fa04 upstream.
The {get,put}\_user macros don't perform range checking on the provided
\_\_user address when !CPU\_HAS\_DOMAINS.
This patch reworks the out-of-line assembly accessors to check the user
address against a specified limit, returning -EFAULT if is is out of
range.
[will: changed get\_user register allocation to match put\_user]
[rmk: fixed building on older ARM architectures]
Reported-by: Catalin Marinas
Signed-off-by: Will Deacon
Signed-off-by: Russell King
[bwh: Backported to 3.2: TUSER() was called T()]
Signed-off-by: Ben Hutchings
commit 960c9d696b30cfed659cd56d4c7f1bfac7d9c424
Author: Alex Williamson
Date: Mon Dec 10 10:32:57 2012 -0700
KVM: Fix iommu map/unmap to handle memory slot moves
commit e40f193f5bb022e927a57a4f5d5194e4f12ddb74 upstream.
The iommu integration into memory slots expects memory slots to be
added or removed and doesn't handle the move case. We can unmap
slots from the iommu after we mark them invalid and map them before
installing the final memslot array. Also re-order the kmemdup vs
map so we don't leave iommu mappings if we get ENOMEM.
Reviewed-by: Gleb Natapov
Signed-off-by: Alex Williamson
Signed-off-by: Marcelo Tosatti
[bwh: Backported to 3.2: adjust context]
Signed-off-by: Ben Hutchings
commit c2152747e746aceaa85360eb20b719a835c9d101
Author: Marcelo Tosatti
Date: Fri Aug 24 15:54:58 2012 -0300
KVM: perform an invalid memslot step for gpa base change
commit 12d6e7538e2d418c08f082b1b44ffa5fb7270ed8 upstream.
PPC must flush all translations before the new memory slot
is visible.
Signed-off-by: Marcelo Tosatti
Signed-off-by: Avi Kivity
[bwh: Backported to 3.2: adjust context]
Signed-off-by: Ben Hutchings
commit d1b8de7813fc2127dc16cd9f282bb63611583997
Author: Neil Horman
Date: Tue Sep 17 08:33:11 2013 -0400
crypto: ansi\_cprng - Fix off by one error in non-block size request
commit 714b33d15130cbb5ab426456d4e3de842d6c5b8a upstream.
Stephan Mueller reported to me recently a error in random number generation in
the ansi cprng. If several small requests are made that are less than the
instances block size, the remainder for loop code doesn't increment
rand\_data\_valid in the last iteration, meaning that the last bytes in the
rand\_data buffer gets reused on the subsequent smaller-than-a-block request for
random data.
The fix is pretty easy, just re-code the for loop to make sure that
rand\_data\_valid gets incremented appropriately
Signed-off-by: Neil Horman
Reported-by: Stephan Mueller
CC: Stephan Mueller
CC: Petr Matousek
CC: Herbert Xu
CC: "David S. Miller"
Signed-off-by: Herbert Xu
Signed-off-by: Ben Hutchings
commit 0b568069764b25b7114b241c361a904838280639
Author: Benjamin Tissoires
Date: Wed Sep 11 21:56:58 2013 +0200
HID: multitouch: validate indexes details
commit 8821f5dc187bdf16cfb32ef5aa8c3035273fa79a upstream.
When working on report indexes, always validate that they are in bounds.
Without this, a HID device could report a malicious feature report that
could trick the driver into a heap overflow:
[ 634.885003] usb 1-1: New USB device found, idVendor=0596, idProduct=0500
...
[ 676.469629] BUG kmalloc-192 (Tainted: G W ): Redzone overwritten
Note that we need to change the indexes from s8 to s16 as they can
be between -1 and 255.
CVE-2013-2897
Signed-off-by: Benjamin Tissoires
Acked-by: Kees Cook
Signed-off-by: Jiri Kosina
[bwh: Backported to 3.2: mt\_device::{cc,cc\_value,inputmode}\_index do not
exist and the corresponding indices do not need to be validated.
mt\_device::maxcontact\_report\_id does not exist either. So all we need
to do is to widen mt\_device::inputmode.]
Signed-off-by: Ben Hutchings
commit ebca8c26fb22fca588fdcf5e5baa409da399247f
Author: fan.du
Date: Sun Dec 1 16:28:48 2013 +0800
{pktgen, xfrm} Update IPv4 header total len and checksum after tranformation
[ Upstream commit 3868204d6b89ea373a273e760609cb08020beb1a ]
commit a553e4a6317b2cfc7659542c10fe43184ffe53da ("[PKTGEN]: IPSEC support")
tried to support IPsec ESP transport transformation for pktgen, but acctually
this doesn't work at all for two reasons(The orignal transformed packet has
bad IPv4 checksum value, as well as wrong auth value, reported by wireshark)
- After transpormation, IPv4 header total length needs update,
because encrypted payload's length is NOT same as that of plain text.
- After transformation, IPv4 checksum needs re-caculate because of payload
has been changed.
With this patch, armmed pktgen with below cofiguration, Wireshark is able to
decrypted ESP packet generated by pktgen without any IPv4 checksum error or
auth value error.
pgset "flag IPSEC"
pgset "flows 1"
Signed-off-by: Fan Du
Signed-off-by: David S. Miller
Signed-off-by: Ben Hutchings
commit 24e3644c3770b8b5914cd4e13c5594c41bb0d791
Author: Hannes Frederic Sowa
Date: Fri Nov 29 06:39:44 2013 +0100
ipv6: fix possible seqlock deadlock in ip6\_finish\_output2
[ Upstream commit 7f88c6b23afbd31545c676dea77ba9593a1a14bf ]
IPv6 stats are 64 bits and thus are protected with a seqlock. By not
disabling bottom-half we could deadlock here if we don't disable bh and
a softirq reentrantly updates the same mib.
Cc: Eric Dumazet
Signed-off-by: Hannes Frederic Sowa
Acked-by: Eric Dumazet
Signed-off-by: David S. Miller
Signed-off-by: Ben Hutchings
commit ecdfea672aa99721206b7dfec5bd8e6c9d1a6a9e
Author: Eric Dumazet
Date: Thu Nov 28 09:51:22 2013 -0800
inet: fix possible seqlock deadlocks
[ Upstream commit f1d8cba61c3c4b1eb88e507249c4cb8d635d9a76 ]
In commit c9e9042994d3 ("ipv4: fix possible seqlock deadlock") I left
another places where IP\_INC\_STATS\_BH() were improperly used.
udp\_sendmsg(), ping\_v4\_sendmsg() and tcp\_v4\_connect() are called from
process context, not from softirq context.
This was detected by lockdep seqlock support.
Reported-by: jongman heo
Fixes: 584bdf8cbdf6 ("[IPV4]: Fix "ipOutNoRoutes" counter error for TCP and UDP")
Fixes: c319b4d76b9e ("net: ipv4: add IPPROTO\_ICMP socket kind")
Signed-off-by: Eric Dumazet
Cc: Hannes Frederic Sowa
Acked-by: Hannes Frederic Sowa
Signed-off-by: David S. Miller
Signed-off-by: Ben Hutchings
commit 05340764e797226e1d9e91a76a0489ed72b3c355
Author: Veaceslav Falico
Date: Fri Nov 29 09:53:23 2013 +0100
af\_packet: block BH in prb\_shutdown\_retire\_blk\_timer()
[ Upstream commit ec6f809ff6f19fafba3212f6aff0dda71dfac8e8 ]
Currently we're using plain spin\_lock() in prb\_shutdown\_retire\_blk\_timer(),
however the timer might fire right in the middle and thus try to re-aquire
the same spinlock, leaving us in a endless loop.
To fix that, use the spin\_lock\_bh() to block it.
Fixes: f6fb8f100b80 ("af-packet: TPACKET\_V3 flexible buffer implementation.")
CC: "David S. Miller"
CC: Daniel Borkmann
CC: Willem de Bruijn
CC: Phil Sutter
CC: Eric Dumazet
Reported-by: Jan Stancek
Tested-by: Jan Stancek
Signed-off-by: Veaceslav Falico
Acked-by: Daniel Borkmann
Signed-off-by: David S. Miller
Signed-off-by: Ben Hutchings
commit ea15a900813efe07bf1cb210fa6388659b264e33
Author: Daniel Borkmann
Date: Thu Nov 21 16:50:58 2013 +0100
packet: fix use after free race in send path when dev is released
[ Upstream commit e40526cb20b5ee53419452e1f03d97092f144418 ]
Salam reported a use after free bug in PF\_PACKET that occurs when
we're sending out frames on a socket bound device and suddenly the
net device is being unregistered. It appears that commit 827d9780
introduced a possible race condition between {t,}packet\_snd() and
packet\_notifier(). In the case of a bound socket, packet\_notifier()
can drop the last reference to the net\_device and {t,}packet\_snd()
might end up suddenly sending a packet over a freed net\_device.
To avoid reverting 827d9780 and thus introducing a performance
regression compared to the current state of things, we decided to
hold a cached RCU protected pointer to the net device and maintain
it on write side via bind spin\_lock protected register\_prot\_hook()
and \_\_unregister\_prot\_hook() calls.
In {t,}packet\_snd() path, we access this pointer under rcu\_read\_lock
through packet\_cached\_dev\_get() that holds reference to the device
to prevent it from being freed through packet\_notifier() while
we're in send path. This is okay to do as dev\_put()/dev\_hold() are
per-cpu counters, so this should not be a performance issue. Also,
the code simplifies a bit as we don't need need\_rls\_dev anymore.
Fixes: 827d978037d7 ("af-packet: Use existing netdev reference for bound sockets.")
Reported-by: Salam Noureddine
Signed-off-by: Daniel Borkmann
Signed-off-by: Salam Noureddine
Cc: Ben Greear
Cc: Eric Dumazet
Signed-off-by: David S. Miller
Signed-off-by: Ben Hutchings
commit 78d910855826dc20f3b763d8de54e04ad123d51b
Author: Ding Tianhong
Date: Sat Dec 7 22:12:05 2013 +0800
bridge: flush br's address entry in fdb when remove the bridge dev
[ Upstream commit f873042093c0b418d2351fe142222b625c740149 ]
When the following commands are executed:
brctl addbr br0
ifconfig br0 hw ether
rmmod bridge
The calltrace will occur:
[ 563.312114] device eth1 left promiscuous mode
[ 563.312188] br0: port 1(eth1) entered disabled state
[ 563.468190] kmem\_cache\_destroy bridge\_fdb\_cache: Slab cache still has objects
[ 563.468197] CPU: 6 PID: 6982 Comm: rmmod Tainted: G O 3.12.0-0.7-default+ #9
[ 563.468199] Hardware name: Bochs Bochs, BIOS Bochs 01/01/2007
[ 563.468200] 0000000000000880 ffff88010f111e98 ffffffff814d1c92 ffff88010f111eb8
[ 563.468204] ffffffff81148efd ffff88010f111eb8 0000000000000000 ffff88010f111ec8
[ 563.468206] ffffffffa062a270 ffff88010f111ed8 ffffffffa063ac76 ffff88010f111f78
[ 563.468209] Call Trace:
[ 563.468218] [] dump\_stack+0x6a/0x78
[ 563.468234] [] kmem\_cache\_destroy+0xfd/0x100
[ 563.468242] [] br\_fdb\_fini+0x10/0x20 [bridge]
[ 563.468247] [] br\_deinit+0x4e/0x50 [bridge]
[ 563.468254] [] SyS\_delete\_module+0x199/0x2b0
[ 563.468259] [] system\_call\_fastpath+0x16/0x1b
[ 570.377958] Bridge firewalling registered
--------------------------- cut here -------------------------------
The reason is that when the bridge dev's address is changed, the
br\_fdb\_change\_mac\_address() will add new address in fdb, but when
the bridge was removed, the address entry in the fdb did not free,
the bridge\_fdb\_cache still has objects when destroy the cache, Fix
this by flushing the bridge address entry when removing the bridge.
v2: according to the Toshiaki Makita and Vlad's suggestion, I only
delete the vlan0 entry, it still have a leak here if the vlan id
is other number, so I need to call fdb\_delete\_by\_port(br, NULL, 1)
to flush all entries whose dst is NULL for the bridge.
Suggested-by: Toshiaki Makita
Suggested-by: Vlad Yasevich
Signed-off-by: Ding Tianhong
Signed-off-by: David S. Miller
Signed-off-by: Ben Hutchings
commit 13c9836c6291fe729829d344a2a8f129f65ea908
Author: Vlad Yasevich
Date: Tue Nov 19 20:47:15 2013 -0500
net: core: Always propagate flag changes to interfaces
[ Upstream commit d2615bf450694c1302d86b9cc8a8958edfe4c3a4 ]
The following commit:
b6c40d68ff6498b7f63ddf97cf0aa818d748dee7
net: only invoke dev->change\_rx\_flags when device is UP
tried to fix a problem with VLAN devices and promiscuouse flag setting.
The issue was that VLAN device was setting a flag on an interface that
was down, thus resulting in bad promiscuity count.
This commit blocked flag propagation to any device that is currently
down.
A later commit:
deede2fabe24e00bd7e246eb81cd5767dc6fcfc7
vlan: Don't propagate flag changes on down interfaces
fixed VLAN code to only propagate flags when the VLAN interface is up,
thus fixing the same issue as above, only localized to VLAN.
The problem we have now is that if we have create a complex stack
involving multiple software devices like bridges, bonds, and vlans,
then it is possible that the flags would not propagate properly to
the physical devices. A simple examle of the scenario is the
following:
eth0----> bond0 ----> bridge0 ---> vlan50
If bond0 or eth0 happen to be down at the time bond0 is added to
the bridge, then eth0 will never have promisc mode set which is
currently required for operation as part of the bridge. As a
result, packets with vlan50 will be dropped by the interface.
The only 2 devices that implement the special flag handling are
VLAN and DSA and they both have required code to prevent incorrect
flag propagation. As a result we can remove the generic solution
introduced in b6c40d68ff6498b7f63ddf97cf0aa818d748dee7 and leave
it to the individual devices to decide whether they will block
flag propagation or not.
Reported-by: Stefan Priebe
Suggested-by: Veaceslav Falico
Signed-off-by: Vlad Yasevich
Signed-off-by: David S. Miller
Signed-off-by: Ben Hutchings
commit d82a49060d356db083d47417b360f4c914520a26
Author: Ying Xue
Date: Tue Nov 19 18:09:27 2013 +0800
atm: idt77252: fix dev refcnt leak
[ Upstream commit b5de4a22f157ca345cdb3575207bf46402414bc1 ]
init\_card() calls dev\_get\_by\_name() to get a network deceive. But it
doesn't decrease network device reference count after the device is
used.
Signed-off-by: Ying Xue
Signed-off-by: David S. Miller
Signed-off-by: Ben Hutchings
commit add32c5ead45be1c675239901e86618c594ebdbe
Author: Hannes Frederic Sowa
Date: Sat Nov 23 07:22:33 2013 +0100
ipv6: fix leaking uninitialized port number of offender sockaddr
[ Upstream commit 1fa4c710b6fe7b0aac9907240291b6fe6aafc3b8 ]
Offenders don't have port numbers, so set it to 0.
Signed-off-by: Hannes Frederic Sowa
Signed-off-by: David S. Miller
Signed-off-by: Ben Hutchings
commit 26fe7ef27e2db83b33ac7fb1cb3bca829cbcb8e2
Author: Dan Carpenter
Date: Wed Nov 27 15:40:21 2013 +0300
net: clamp ->msg\_namelen instead of returning an error
[ Upstream commit db31c55a6fb245fdbb752a2ca4aefec89afabb06 ]
If kmsg->msg\_namelen > sizeof(struct sockaddr\_storage) then in the
original code that would lead to memory corruption in the kernel if you
had audit configured. If you didn't have audit configured it was
harmless.
There are some programs such as beta versions of Ruby which use too
large of a buffer and returning an error code breaks them. We should
clamp the ->msg\_namelen value instead.
Fixes: 1661bf364ae9 ("net: heap overflow in \_\_audit\_sockaddr()")
Reported-by: Eric Wong
Signed-off-by: Dan Carpenter
Tested-by: Eric Wong
Acked-by: Eric Dumazet
Signed-off-by: David S. Miller
Signed-off-by: Ben Hutchings
commit b38ecb9bbbb42b71833ff4439283f51120a35c1a
Author: Hannes Frederic Sowa
Date: Sat Nov 23 00:46:12 2013 +0100
inet: fix addr\_len/msg->msg\_namelen assignment in recv\_error and rxpmtu functions
[ Upstream commit 85fbaa75037d0b6b786ff18658ddf0b4014ce2a4 ]
Commit bceaa90240b6019ed73b49965eac7d167610be69 ("inet: prevent leakage
of uninitialized memory to user in recv syscalls") conditionally updated
addr\_len if the msg\_name is written to. The recv\_error and rxpmtu
functions relied on the recvmsg functions to set up addr\_len before.
As this does not happen any more we have to pass addr\_len to those
functions as well and set it to the size of the corresponding sockaddr
length.
This broke traceroute and such.
Fixes: bceaa90240b6 ("inet: prevent leakage of uninitialized memory to user in recv syscalls")
Reported-by: Brad Spengler
Reported-by: Tom Labanowski
Cc: mpb
Cc: David S. Miller
Cc: Eric Dumazet
Signed-off-by: Hannes Frederic Sowa
Signed-off-by: David S. Miller
Signed-off-by: Ben Hutchings
commit a3fd2196b6b82d93dc2878c5291de8014ba61d13
Author: Hannes Frederic Sowa
Date: Thu Nov 21 03:14:34 2013 +0100
net: add BUG\_ON if kernel advertises msg\_namelen > sizeof(struct sockaddr\_storage)
[ Upstream commit 68c6beb373955da0886d8f4f5995b3922ceda4be ]
In that case it is probable that kernel code overwrote part of the
stack. So we should bail out loudly here.
The BUG\_ON may be removed in future if we are sure all protocols are
conformant.
Suggested-by: Eric Dumazet
Signed-off-by: Hannes Frederic Sowa
Signed-off-by: David S. Miller
Signed-off-by: Ben Hutchings
commit a598f7fa9c24c3ef458043d59c237b8fc5d1adad
Author: Hannes Frederic Sowa
Date: Thu Nov 21 03:14:22 2013 +0100
net: rework recvmsg handler msg\_name and msg\_namelen logic
[ Upstream commit f3d3342602f8bcbf37d7c46641cb9bca7618eb1c ]
This patch now always passes msg->msg\_namelen as 0. recvmsg handlers must
set msg\_namelen to the proper size <= sizeof(struct sockaddr\_storage)
to return msg\_name to the user.
This prevents numerous uninitialized memory leaks we had in the
recvmsg handlers and makes it harder for new code to accidentally leak
uninitialized memory.
Optimize for the case recvfrom is called with NULL as address. We don't
need to copy the address at all, so set it to NULL before invoking the
recvmsg handler. We can do so, because all the recvmsg handlers must
cope with the case a plain read() is called on them. read() also sets
msg\_name to NULL.
Also document these changes in include/linux/net.h as suggested by David
Miller.
Changes since RFC:
Set msg->msg\_name = NULL if user specified a NULL in msg\_name but had a
non-null msg\_namelen in verify\_iovec/verify\_compat\_iovec. This doesn't
affect sendto as it would bail out earlier while trying to copy-in the
address. It also more naturally reflects the logic by the callers of
verify\_iovec.
With this change in place I could remove "
if (!uaddr || msg\_sys->msg\_namelen == 0)
msg->msg\_name = NULL
".
This change does not alter the user visible error logic as we ignore
msg\_namelen as long as msg\_name is NULL.
Also remove two unnecessary curly brackets in \_\_\_sys\_recvmsg and change
comments to netdev style.
Cc: David Miller
Suggested-by: Eric Dumazet
Signed-off-by: Hannes Frederic Sowa
Signed-off-by: David S. Miller
Signed-off-by: Ben Hutchings
commit 05d3c1eece356052d8119663d5415c2fcb4680d8
Author: Hannes Frederic Sowa
Date: Mon Nov 18 04:20:45 2013 +0100
inet: prevent leakage of uninitialized memory to user in recv syscalls
[ Upstream commit bceaa90240b6019ed73b49965eac7d167610be69 ]
Only update \*addr\_len when we actually fill in sockaddr, otherwise we
can return uninitialized memory from the stack to the caller in the
recvfrom, recvmmsg and recvmsg syscalls. Drop the the (addr\_len == NULL)
checks because we only get called with a valid addr\_len pointer either
from sock\_common\_recvmsg or inet\_recvmsg.
If a blocking read waits on a socket which is concurrently shut down we
now return zero and set msg\_msgnamelen to 0.
Reported-by: mpb
Suggested-by: Eric Dumazet
Signed-off-by: Hannes Frederic Sowa
Signed-off-by: David S. Miller
Signed-off-by: Ben Hutchings
commit 9b4a3a7250034edd8c2d9096be4c082a747823a6
Author: Eric Dumazet
Date: Thu Nov 14 13:37:54 2013 -0800
ipv4: fix possible seqlock deadlock
[ Upstream commit c9e9042994d37cbc1ee538c500e9da1bb9d1bcdf ]
ip4\_datagram\_connect() being called from process context,
it should use IP\_INC\_STATS() instead of IP\_INC\_STATS\_BH()
otherwise we can deadlock on 32bit arches, or get corruptions of
SNMP counters.
Fixes: 584bdf8cbdf6 ("[IPV4]: Fix "ipOutNoRoutes" counter error for TCP and UDP")
Signed-off-by: Eric Dumazet
Reported-by: Dave Jones
Signed-off-by: David S. Miller
Signed-off-by: Ben Hutchings
commit 51839840d1888aa8a62d1abc2d39e5cb019bca72
Author: Chris Metcalf
Date: Thu Nov 14 12:09:21 2013 -0500
connector: improved unaligned access error fix
[ Upstream commit 1ca1a4cf59ea343a1a70084fe7cc96f37f3cf5b1 ]
In af3e095a1fb4, Erik Jacobsen fixed one type of unaligned access
bug for ia64 by converting a 64-bit write to use put\_unaligned().
Unfortunately, since gcc will convert a short memset() to a series
of appropriately-aligned stores, the problem is now visible again
on tilegx, where the memset that zeros out proc\_event is converted
to three 64-bit stores, causing an unaligned access panic.
A better fix for the original problem is to ensure that proc\_event
is aligned to 8 bytes here. We can do that relatively easily by
arranging to start the struct cn\_msg aligned to 8 bytes and then
offset by 4 bytes. Doing so means that the immediately following
proc\_event structure is then correctly aligned to 8 bytes.
The result is that the memset() stores are now aligned, and as an
added benefit, we can remove the put\_unaligned() calls in the code.
Signed-off-by: Chris Metcalf
Signed-off-by: David S. Miller
Signed-off-by: Ben Hutchings
commit 6cddf1b77783bc4606a5e963de416350b800f82a
Author: Dan Carpenter
Date: Thu Nov 14 11:21:10 2013 +0300
isdnloop: use strlcpy() instead of strcpy()
[ Upstream commit f9a23c84486ed350cce7bb1b2828abd1f6658796 ]
These strings come from a copy\_from\_user() and there is no way to be
sure they are NUL terminated.
Signed-off-by: Dan Carpenter
Signed-off-by: David S. Miller
Signed-off-by: Ben Hutchings
commit 3df3359dc058f0bfcfddd761caf849fe807122c5
Author: Nikolay Aleksandrov
Date: Wed Nov 13 17:07:46 2013 +0100
bonding: fix two race conditions in bond\_store\_updelay/downdelay
[ Upstream commit b869ccfab1e324507fa3596e3e1308444fb68227 ]
This patch fixes two race conditions between bond\_store\_updelay/downdelay
and bond\_store\_miimon which could lead to division by zero as miimon can
be set to 0 while either updelay/downdelay are being set and thus miss the
zero check in the beginning, the zero div happens because updelay/downdelay
are stored as new\_value / bond->params.miimon. Use rtnl to synchronize with
miimon setting.
CC: Jay Vosburgh
CC: Andy Gospodarek
CC: Veaceslav Falico
Signed-off-by: Nikolay Aleksandrov
Acked-by: Veaceslav Falico
Signed-off-by: David S. Miller
Signed-off-by: Ben Hutchings
commit 1bc5b60197d01f5ebb4043ade11de540b2652024
Author: Jukka Rissanen
Date: Wed Nov 13 11:03:39 2013 +0200
6lowpan: Uncompression of traffic class field was incorrect
[ Upstream commit 1188f05497e7bd2f2614b99c54adfbe7413d5749 ]
If priority/traffic class field in IPv6 header is set (seen when
using ssh), the uncompression sets the TC and Flow fields incorrectly.
Example:
This is IPv6 header of a sent packet. Note the priority/TC (=1) in
the first byte.
00000000: 61 00 00 00 00 2c 06 40 fe 80 00 00 00 00 00 00
00000010: 02 02 72 ff fe c6 42 10 fe 80 00 00 00 00 00 00
00000020: 02 1e ab ff fe 4c 52 57
This gets compressed like this in the sending side
00000000: 72 31 04 06 02 1e ab ff fe 4c 52 57 ec c2 00 16
00000010: aa 2d fe 92 86 4e be c6 ....
In the receiving end, the packet gets uncompressed to this
IPv6 header
00000000: 60 06 06 02 00 2a 1e 40 fe 80 00 00 00 00 00 00
00000010: 02 02 72 ff fe c6 42 10 fe 80 00 00 00 00 00 00
00000020: ab ff fe 4c 52 57 ec c2
First four bytes are set incorrectly and we have also lost
two bytes from destination address.
The fix is to switch the case values in switch statement
when checking the TC field.
Signed-off-by: Jukka Rissanen
Signed-off-by: David S. Miller
Signed-off-by: Ben Hutchings
commit b27fed08ea288af57fbe466095961b45f1acc2c5
Author: Veaceslav Falico
Date: Tue Nov 12 15:37:40 2013 +0100
bonding: don't permit to use ARP monitoring in 802.3ad mode
[ Upstream commit ec9f1d15db8185f63a2c3143dc1e90ba18541b08 ]
Currently the ARP monitoring is not supported with 802.3ad, and it's
prohibited to use it via the module params.
However we still can set it afterwards via sysfs, cause we only check for
\*LB modes there.
To fix this - add a check for 802.3ad mode in bonding\_store\_arp\_interval.
CC: Jay Vosburgh
CC: Andy Gospodarek
Signed-off-by: Veaceslav Falico
Signed-off-by: David S. Miller
Signed-off-by: Ben Hutchings
commit 12516ee18158670b880446cedb4a88a144702928
Author: Daniel Borkmann
Date: Mon Nov 11 12:20:32 2013 +0100
random32: fix off-by-one in seeding requirement
[ Upstream commit 51c37a70aaa3f95773af560e6db3073520513912 ]
For properly initialising the Tausworthe generator [1], we have
a strict seeding requirement, that is, s1 > 1, s2 > 7, s3 > 15.
Commit 697f8d0348 ("random32: seeding improvement") introduced
a \_\_seed() function that imposes boundary checks proposed by the
errata paper [2] to properly ensure above conditions.
However, we're off by one, as the function is implemented as:
"return (x < m) ? x + m : x;", and called with \_\_seed(X, 1),
\_\_seed(X, 7), \_\_seed(X, 15). Thus, an unwanted seed of 1, 7, 15
would be possible, whereas the lower boundary should actually
be of at least 2, 8, 16, just as GSL does. Fix this, as otherwise
an initialization with an unwanted seed could have the effect
that Tausworthe's PRNG properties cannot not be ensured.
Note that this PRNG is \*not\* used for cryptography in the kernel.
[1] http://www.iro.umontreal.ca/~lecuyer/myftp/papers/tausme.ps
[2] http://www.iro.umontreal.ca/~lecuyer/myftp/papers/tausme2.ps
Joint work with Hannes Frederic Sowa.
Fixes: 697f8d0348a6 ("random32: seeding improvement")
Cc: Stephen Hemminger
Cc: Florian Weimer
Cc: Theodore Ts'o
Signed-off-by: Daniel Borkmann
Signed-off-by: Hannes Frederic Sowa
Signed-off-by: David S. Miller
Signed-off-by: Ben Hutchings
commit 088ab1d96adc0e00ade2d246ea3d8304b3ce887f
Author: Duan Jiong
Date: Fri Nov 8 09:56:53 2013 +0800
ipv6: use rt6\_get\_dflt\_router to get default router in rt6\_route\_rcv
[ Upstream commit f104a567e673f382b09542a8dc3500aa689957b4 ]
As the rfc 4191 said, the Router Preference and Lifetime values in a
::/0 Route Information Option should override the preference and lifetime
values in the Router Advertisement header. But when the kernel deals with
a ::/0 Route Information Option, the rt6\_get\_route\_info() always return
NULL, that means that overriding will not happen, because those default
routers were added without flag RTF\_ROUTEINFO in rt6\_add\_dflt\_router().
In order to deal with that condition, we should call rt6\_get\_dflt\_router
when the prefix length is 0.
Signed-off-by: Duan Jiong
Acked-by: Hannes Frederic Sowa
Signed-off-by: David S. Miller
Signed-off-by: Ben Hutchings
commit 6b23a9a0fbd5ec9a6b5d0034156134864adaf768
Author: Andreas Henriksson
Date: Thu Nov 7 18:26:38 2013 +0100
net: Fix "ip rule delete table 256"
[ Upstream commit 13eb2ab2d33c57ebddc57437a7d341995fc9138c ]
When trying to delete a table >= 256 using iproute2 the local table
will be deleted.
The table id is specified as a netlink attribute when it needs more then
8 bits and iproute2 then sets the table field to RT\_TABLE\_UNSPEC (0).
Preconditions to matching the table id in the rule delete code
doesn't seem to take the "table id in netlink attribute" into condition
so the frh\_get\_table helper function never gets to do its job when
matching against current rule.
Use the helper function twice instead of peaking at the table value directly.
Originally reported at: http://bugs.debian.org/724783
Reported-by: Nicolas HICHER
Signed-off-by: Andreas Henriksson
Signed-off-by: David S. Miller
Signed-off-by: Ben Hutchings
commit dc55b2a5a8f2abd303198c8169c52550a010391d
Author: Sergei Trofimovich
Date: Sun Dec 30 01:37:30 2012 +0300
um: add missing declaration of 'getrlimit()' and friends
commit fdfa4c952844fce881df8c76de9c7180cbe913ab upstream.
arch/um/os-Linux/start\_up.c: In function 'check\_coredump\_limit':
arch/um/os-Linux/start\_up.c:338:16: error: storage size of 'lim' isn't known
arch/um/os-Linux/start\_up.c:339:2: error: implicit declaration of function 'getrlimit' [-Werror=implicit-function-declaration]
Signed-off-by: Sergei Trofimovich
CC: Jeff Dike
CC: Richard Weinberger
CC: Al Viro
CC: user-mode-linux-devel@lists.sourceforge.net
CC: user-mode-linux-user@lists.sourceforge.net
CC: linux-kernel@vger.kernel.org
Signed-off-by: Richard Weinberger
Signed-off-by: Ben Hutchings
commit 49c5317fa0fa5d0dfa5d15dc3010e2578beddb16
Author: Ben Segall
Date: Wed Oct 16 11:16:32 2013 -0700
sched: Avoid throttle\_cfs\_rq() racing with period\_timer stopping
commit f9f9ffc237dd924f048204e8799da74f9ecf40cf upstream.
throttle\_cfs\_rq() doesn't check to make sure that period\_timer is running,
and while update\_curr/assign\_cfs\_runtime does, a concurrently running
period\_timer on another cpu could cancel itself between this cpu's
update\_curr and throttle\_cfs\_rq(). If there are no other cfs\_rqs running
in the tg to restart the timer, this causes the cfs\_rq to be stranded
forever.
Fix this by calling \_\_start\_cfs\_bandwidth() in throttle if the timer is
inactive.
(Also add some sched\_debug lines for cfs\_bandwidth.)
Tested: make a run/sleep task in a cgroup, loop switching the cgroup
between 1ms/100ms quota and unlimited, checking for timer\_active=0 and
throttled=1 as a failure. With the throttle\_cfs\_rq() change commented out
this fails, with the full patch it passes.
Signed-off-by: Ben Segall
Signed-off-by: Peter Zijlstra
Cc: pjt@google.com
Link: http://lkml.kernel.org/r/20131016181632.22647.84174.stgit@sword-of-the-dawn.mtv.corp.google.com
Signed-off-by: Ingo Molnar
[bwh: Backported to 3.2: adjust filenames]
Signed-off-by: Ben Hutchings
commit dae9d455d193fd2bc03fca65d255053f4debf8aa
Author: Linus Pizunski
Date: Thu Dec 12 17:12:23 2013 -0800
drivers/rtc/rtc-at91rm9200.c: correct alarm over day/month wrap
commit eb3c227289840eed95ddfb0516046f08d8993940 upstream.
Update month and day of month to the alarm month/day instead of current
day/month when setting the RTC alarm mask.
Signed-off-by: Linus Pizunski
Signed-off-by: Nicolas Ferre
Signed-off-by: Andrew Morton
Signed-off-by: Linus Torvalds
Signed-off-by: Ben Hutchings
commit 117bd60788c1cfd2281a62cbc0d32798725cfd23
Author: Paul Moore
Date: Wed Dec 4 16:10:51 2013 -0500
selinux: handle TCP SYN-ACK packets correctly in selinux\_ip\_postroute()
commit 446b802437f285de68ffb8d6fac3c44c3cab5b04 upstream.
In selinux\_ip\_postroute() we perform access checks based on the
packet's security label. For locally generated traffic we get the
packet's security label from the associated socket; this works in all
cases except for TCP SYN-ACK packets. In the case of SYN-ACK packet's
the correct security label is stored in the connection's request\_sock,
not the server's socket. Unfortunately, at the point in time when
selinux\_ip\_postroute() is called we can't query the request\_sock
directly, we need to recreate the label using the same logic that
originally labeled the associated request\_sock.
See the inline comments for more explanation.
Reported-by: Janak Desai
Tested-by: Janak Desai
Signed-off-by: Paul Moore
Signed-off-by: Ben Hutchings
commit c726922d43fcd4db302f181a98bd0a54dc6c86f4
Author: Paul Moore
Date: Wed Dec 4 16:10:45 2013 -0500
selinux: handle TCP SYN-ACK packets correctly in selinux\_ip\_output()
commit 47180068276a04ed31d24fe04c673138208b07a9 upstream.
In selinux\_ip\_output() we always label packets based on the parent
socket. While this approach works in almost all cases, it doesn't
work in the case of TCP SYN-ACK packets when the correct label is not
the label of the parent socket, but rather the label of the larval
socket represented by the request\_sock struct.
Unfortunately, since the request\_sock isn't queued on the parent
socket until \*after\* the SYN-ACK packet is sent, we can't lookup the
request\_sock to determine the correct label for the packet; at this
point in time the best we can do is simply pass/NF\_ACCEPT the packet.
It must be said that simply passing the packet without any explicit
labeling action, while far from ideal, is not terrible as the SYN-ACK
packet will inherit any IP option based labeling from the initial
connection request so the label \*should\* be correct and all our
access controls remain in place so we shouldn't have to worry about
information leaks.
Reported-by: Janak Desai
Tested-by: Janak Desai
Signed-off-by: Paul Moore
Signed-off-by: Ben Hutchings
commit 245d4b4480c20ffb50f0eddadcc6516b9017d863
Author: Andy Honig
Date: Tue Nov 19 14:12:18 2013 -0800
KVM: x86: Fix potential divide by 0 in lapic (CVE-2013-6367)
commit b963a22e6d1a266a67e9eecc88134713fd54775c upstream.
Under guest controllable circumstances apic\_get\_tmcct will execute a
divide by zero and cause a crash. If the guest cpuid support
tsc deadline timers and performs the following sequence of requests
the host will crash.
- Set the mode to periodic
- Set the TMICT to 0
- Set the mode bits to 11 (neither periodic, nor one shot, nor tsc deadline)
- Set the TMICT to non-zero.
Then the lapic\_timer.period will be 0, but the TMICT will not be. If the
guest then reads from the TMCCT then the host will perform a divide by 0.
This patch ensures that if the lapic\_timer.period is 0, then the division
does not occur.
Reported-by: Andrew Honig
Signed-off-by: Andrew Honig
Signed-off-by: Paolo Bonzini
[bwh: Backported to 3.2: s/kvm\_apic\_get\_reg/apic\_get\_reg/]
Signed-off-by: Ben Hutchings
commit 4a94970b318e0d7387c2d84fa7c92ea782ae52b3
Author: Andy Honig
Date: Mon Nov 18 16:09:22 2013 -0800
KVM: Improve create VCPU parameter (CVE-2013-4587)
commit 338c7dbadd2671189cec7faf64c84d01071b3f96 upstream.
In multiple functions the vcpu\_id is used as an offset into a bitfield. Ag
malicious user could specify a vcpu\_id greater than 255 in order to set or
clear bits in kernel memory. This could be used to elevate priveges in the
kernel. This patch verifies that the vcpu\_id provided is less than 255.
The api documentation already specifies that the vcpu\_id must be less than
max\_vcpus, but this is currently not checked.
Reported-by: Andrew Honig
Signed-off-by: Andrew Honig
Signed-off-by: Paolo Bonzini
Signed-off-by: Ben Hutchings
commit 96e7025c23fe7d09401edbfa8990144cbf8dc93b
Author: Linus Torvalds
Date: Thu Dec 12 09:38:42 2013 -0800
futex: fix handling of read-only-mapped hugepages
commit f12d5bfceb7e1f9051563381ec047f7f13956c3c upstream.
The hugepage code had the exact same bug that regular pages had in
commit 7485d0d3758e ("futexes: Remove rw parameter from
get\_futex\_key()").
The regular page case was fixed by commit 9ea71503a8ed ("futex: Fix
regression with read only mappings"), but the transparent hugepage case
(added in a5b338f2b0b1: "thp: update futex compound knowledge") case
remained broken.
Found by Dave Jones and his trinity tool.
Reported-and-tested-by: Dave Jones
Acked-by: Thomas Gleixner
Cc: Mel Gorman
Cc: Darren Hart
Cc: Andrea Arcangeli
Cc: Oleg Nesterov
Signed-off-by: Linus Torvalds
Signed-off-by: Ben Hutchings
commit cf3f5a3dbf78b72541dc9f295101cb90a5465d5c
Author: Dan Carpenter
Date: Thu Dec 12 08:05:33 2013 +0100
hwmon: Prevent some divide by zeros in FAN\_TO\_REG()
commit 3806b45ba4655147a011df03242cc197ab986c43 upstream.
The "rpm \* div" operations can overflow here, so this patch adds an
upper limit to rpm to prevent that. Jean Delvare helped me with this
patch.
Signed-off-by: Dan Carpenter
Acked-by: Roger Lucas
Signed-off-by: Jean Delvare
[bwh: Backported to 3.2: adjust context]
Signed-off-by: Ben Hutchings
commit 362ab737e651f41282a979b9275717537b99451d
Author: Jean Delvare
Date: Thu Dec 12 08:05:32 2013 +0100
hwmon: (w83l768ng) Fix fan speed control range
commit 33a7ab91d509fa33b4bcd3ce0038cc80298050da upstream.
The W83L786NG stores the fan speed on 4 bits while the sysfs interface
uses a 0-255 range. Thus the driver should scale the user input down
to map it to the device range, and scale up the value read from the
device before presenting it to the user. The reserved register nibble
should be left unchanged.
Signed-off-by: Jean Delvare
Reviewed-by: Guenter Roeck
[bwh: Backported to 3.2: adjust context]
Signed-off-by: Ben Hutchings
commit 22b6374e8ea14ddcc8f7c4e1928d527303ebe406
Author: Brian Carnes
Date: Thu Dec 12 08:05:32 2013 +0100
hwmon: (w83l786ng) Fix fan speed control mode setting and reporting
commit cf7559bc053471f32373d71d04a9aa19e0b48d59 upstream.
The wrong mask is used, which causes some fan speed control modes
(pwmX\_enable) to be incorrectly reported, and some modes to be
impossible to set.
[JD: add subject and description.]
Signed-off-by: Brian Carnes
Signed-off-by: Jean Delvare
Signed-off-by: Ben Hutchings
commit 325aa5f2c58217c2da531847231c77e612915fbf
Author: Sergei Ianovich
Date: Tue Dec 10 08:39:15 2013 +0400
ARM: pxa: prevent PXA270 occasional reboot freezes
commit ff88b4724fde18056a4c539f7327389aec0f4c2d upstream.
Erratum 71 of PXA270M Processor Family Specification Update
(April 19, 2010) explains that watchdog reset time is just
8us insead of 10ms in EMTS.
If SDRAM is not reset, it causes memory bus congestion and
the device hangs. We put SDRAM in selfresh mode before watchdog
reset, removing potential freezes.
Without this patch PXA270-based ICP DAS LP-8x4x hangs after up to 40
reboots. With this patch it has successfully rebooted 500 times.
Signed-off-by: Sergei Ianovich
Tested-by: Marek Vasut
Signed-off-by: Haojian Zhuang
Signed-off-by: Olof Johansson
[bwh: Backported to 3.2: adjust context]
Signed-off-by: Ben Hutchings
commit 1e8def391a2ff4d0270685f25afe178cd0fb4545
Author: Dmitry Eremin-Solenikov
Date: Sat Nov 16 16:47:50 2013 +0400
ARM: pxa: tosa: fix keys mapping
commit 506cac15ac86f204b83e3cfccde73eeb4e7c5f34 upstream.
When converting from tosa-keyboard driver to matrix keyboard, tosa keys
received extra 1 column shift. Replace that with correct values to make
keyboard work again.
Fixes: f69a6548c9d5 ('[ARM] pxa/tosa: make use of the matrix keypad driver')
Signed-off-by: Dmitry Eremin-Solenikov
Signed-off-by: Haojian Zhuang
Signed-off-by: Olof Johansson
Signed-off-by: Ben Hutchings
commit 2941fcfe04bb2473fdbe07eac48da7ccb74c89ae
Author: Mikulas Patocka
Date: Thu Dec 5 17:33:29 2013 -0500
dm bufio: initialize read-only module parameters
commit 4cb57ab4a2e61978f3a9b7d4f53988f30d61c27f upstream.
Some module parameters in dm-bufio are read-only. These parameters
inform the user about memory consumption. They are not supposed to be
changed by the user.
However, despite being read-only, these parameters can be set on
modprobe or insmod command line, for example:
modprobe dm-bufio current\_allocated\_bytes=12345
The kernel doesn't expect that these variables can be non-zero at module
initialization and if the user sets them, it results in BUG.
This patch initializes the variables in the module init routine, so that
user-supplied values are ignored.
Signed-off-by: Mikulas Patocka
Signed-off-by: Mike Snitzer
Signed-off-by: Ben Hutchings
commit d7b05fbb31ac1c454c5bbf303da75b3e1810de51
Author: Matthew Garrett
Date: Fri Nov 29 14:44:43 2013 -0500
x86, efi: Don't use (U)EFI time services on 32 bit
commit 04bf9ba720fcc4fa313fa122b799ae0989b6cd50 upstream.
UEFI time services are often broken once we're in virtual mode. We were
already refusing to use them on 64-bit systems, but it turns out that
they're also broken on some 32-bit firmware, including the Dell Venue.
Disable them for now, we can revisit once we have the 1:1 mappings code
incorporated.
Signed-off-by: Matthew Garrett
Link: http://lkml.kernel.org/r/1385754283-2464-1-git-send-email-matthew.garrett@nebula.com
Cc: Matt Fleming
Signed-off-by: H. Peter Anvin
[bwh: Backported to 3.2: deleted code is slightly different]
Signed-off-by: Ben Hutchings
commit 4fe644c42cb5980bfa920fdf9f1d1bc306328c52
Author: H. Peter Anvin
Date: Tue Dec 10 14:56:06 2013 -0800
x86, build, icc: Remove uninitialized\_var() from compiler-intel.h
commit 503cf95c061a0551eb684da364509297efbe55d9 upstream.
When compiling with icc,  ends up included
because the icc environment defines \_\_GNUC\_\_. Thus, we neither need
nor want to have this macro defined in both compiler-gcc.h and
compiler-intel.h, and the fact that they are inconsistent just makes
the compiler spew warnings.
Reported-by: Sunil K. Pandey
Cc: Kevin B. Smith
Signed-off-by: H. Peter Anvin
Link: http://lkml.kernel.org/n/tip-0mbwou1zt7pafij09b897lg3@git.kernel.org
[bwh: Backported to 3.2: adjust context]
Signed-off-by: Ben Hutchings
commit a86ed8caf2fda2069ed910b42f80d7e7b7bc49d1
Author: Mikulas Patocka
Date: Fri Nov 22 19:52:06 2013 -0500
dm table: fail dm\_table\_create on dm\_round\_up overflow
commit 5b2d06576c5410c10d95adfd5c4d8b24de861d87 upstream.
The dm\_round\_up function may overflow to zero. In this case,
dm\_table\_create() must fail rather than go on to allocate an empty array
with alloc\_targets().
This fixes a possible memory corruption that could be caused by passing
too large a number in "param->target\_count".
Signed-off-by: Mikulas Patocka
Signed-off-by: Mike Snitzer
Signed-off-by: Ben Hutchings
commit 8bd981aa4b609d3c97fceb4d81b212b68952b29c
Author: Mikulas Patocka
Date: Fri Nov 29 18:13:37 2013 -0500
dm snapshot: avoid snapshot space leak on crash
commit 230c83afdd9cd384348475bea1e14b80b3b6b1b8 upstream.
There is a possible leak of snapshot space in case of crash.
The reason for space leaking is that chunks in the snapshot device are
allocated sequentially, but they are finished (and stored in the metadata)
out of order, depending on the order in which copying finished.
For example, supposed that the metadata contains the following records
SUPERBLOCK
METADATA (blocks 0 ... 250)
DATA 0
DATA 1
DATA 2
...
DATA 250
Now suppose that you allocate 10 new data blocks 251-260. Suppose that
copying of these blocks finish out of order (block 260 finished first
and the block 251 finished last). Now, the snapshot device looks like
this:
SUPERBLOCK
METADATA (blocks 0 ... 250, 260, 259, 258, 257, 256)
DATA 0
DATA 1
DATA 2
...
DATA 250
DATA 251
DATA 252
DATA 253
DATA 254
DATA 255
METADATA (blocks 255, 254, 253, 252, 251)
DATA 256
DATA 257
DATA 258
DATA 259
DATA 260
Now, if the machine crashes after writing the first metadata block but
before writing the second metadata block, the space for areas DATA 250-255
is leaked, it contains no valid data and it will never be used in the
future.
This patch makes dm-snapshot complete exceptions in the same order they
were allocated, thus fixing this bug.
Note: when backporting this patch to the stable kernel, change the version
field in the following way:
\* if version in the stable kernel is {1, 11, 1}, change it to {1, 12, 0}
\* if version in the stable kernel is {1, 10, 0} or {1, 10, 1}, change it
to {1, 10, 2}
Userspace reads the version to determine if the bug was fixed, so the
version change is needed.
Signed-off-by: Mikulas Patocka
Signed-off-by: Mike Snitzer
Signed-off-by: Ben Hutchings
commit 9f3d21798a11bdffa0a3af543c4a6941bca22282
Author: Stefano Panella
Date: Tue Dec 10 14:20:28 2013 +0000
ALSA: memalloc.h - fix wrong truncation of dma\_addr\_t
commit 932e9dec380c67ec15ac3eb073bb55797d8b4801 upstream.
When running a 32bit kernel the hda\_intel driver is still reporting
a 64bit dma\_mask if the HW supports it.
From sound/pci/hda/hda\_intel.c:
/\* allow 64bit DMA address if supported by H/W \*/
if ((gcap & ICH6\_GCAP\_64OK) && !pci\_set\_dma\_mask(pci, DMA\_BIT\_MASK(64)))
pci\_set\_consistent\_dma\_mask(pci, DMA\_BIT\_MASK(64));
else {
pci\_set\_dma\_mask(pci, DMA\_BIT\_MASK(32));
pci\_set\_consistent\_dma\_mask(pci, DMA\_BIT\_MASK(32));
}
which means when there is a call to dma\_alloc\_coherent from
snd\_malloc\_dev\_pages a machine address bigger than 32bit can be returned.
This can be true in particular if running the 32bit kernel as a pv dom0
under the Xen Hypervisor or PAE on bare metal.
The problem is that when calling setup\_bdle to program the BLE the
dma\_addr\_t returned from the dma\_alloc\_coherent is wrongly truncated
from snd\_sgbuf\_get\_addr if running a 32bit kernel:
static inline dma\_addr\_t snd\_sgbuf\_get\_addr(struct snd\_dma\_buffer \*dmab,
size\_t offset)
{
struct snd\_sg\_buf \*sgbuf = dmab->private\_data;
dma\_addr\_t addr = sgbuf->table[offset >> PAGE\_SHIFT].addr;
addr &= PAGE\_MASK;
return addr + offset % PAGE\_SIZE;
}
where PAGE\_MASK in a 32bit kernel is zeroing the upper 32bit af addr.
Without this patch the HW will fetch the 32bit truncated address,
which is not the one obtained from dma\_alloc\_coherent and will result
to a non working audio but can corrupt host memory at a random location.
The current patch apply to v3.13-rc3-74-g6c843f5
Signed-off-by: Stefano Panella
Reviewed-by: Frediano Ziglio
Signed-off-by: Takashi Iwai
Signed-off-by: Ben Hutchings
commit 612e9718fa791e611c17e1949841766b122a817b
Author: H. Peter Anvin
Date: Mon Dec 9 15:43:38 2013 -0800
x86, build: Pass in additional -mno-mmx, -mno-sse options
commit 8b3b005d675726e38bc504d2e35a991e55819155 upstream.
In checkin
5551a34e5aea x86-64, build: Always pass in -mno-sse
we unconditionally added -mno-sse to the main build, to keep newer
compilers from generating SSE instructions from autovectorization.
However, this did not extend to the special environments
(arch/x86/boot, arch/x86/boot/compressed, and arch/x86/realmode/rm).
Add -mno-sse to the compiler command line for these environments, and
add -mno-mmx to all the environments as well, as we don't want a
compiler to generate MMX code either.
This patch also removes a $(cc-option) call for -m32, since we have
long since stopped supporting compilers too old for the -m32 option,
and in fact hardcode it in other places in the Makefiles.
Reported-by: Kevin B. Smith
Cc: Sunil K. Pandey
Signed-off-by: H. Peter Anvin
Cc: H. J. Lu
Link: http://lkml.kernel.org/n/tip-j21wzqv790q834n7yc6g80j1@git.kernel.org
[bwh: Backported to 3.2:
- Drop changes to arch/x86/Makefile, which sets these flags earlier
- Adjust context
- Drop changes to arch/x86/realmode/rm/Makefile which doesn't exist]
Signed-off-by: Ben Hutchings
commit 46b831f219fa519f61e3bff8aeabb75298f706d1
Author: Konstantin Khlebnikov
Date: Thu Dec 5 14:23:48 2013 +0100
ARM: 7913/1: fix framepointer check in unwind\_frame
commit 3abb6671a9c04479c4bd026798a05f857393b7e2 upstream.
This patch fixes corner case when (fp + 4) overflows unsigned long,
for example: fp = 0xFFFFFFFF -> fp + 4 == 3.
Signed-off-by: Konstantin Khlebnikov
Signed-off-by: Russell King
Signed-off-by: Ben Hutchings
commit 07b4041f9b344111091f6acc11a8d407d0ff78c7
Author: Konstantin Khlebnikov
Date: Thu Dec 5 14:21:36 2013 +0100
ARM: 7912/1: check stack pointer in get\_wchan
commit 1b15ec7a7427d4188ba91b9bbac696250a059d22 upstream.
get\_wchan() is lockless. Task may wakeup at any time and change its own stack,
thus each next stack frame may be overwritten and filled with random stuff.
/proc/$pid/stack interface had been disabled for non-current tasks, see [1]
But 'wchan' still allows to trigger stack frame unwinding on volatile stack.
This patch fixes oops in unwind\_frame() by adding stack pointer validation on
each step (as x86 code do), unwind\_frame() already checks frame pointer.
Also I've found another report of this oops on stackoverflow (irony).
Link: http://www.spinics.net/lists/arm-kernel/msg110589.html [1]
Link: http://stackoverflow.com/questions/18479894/unwind-frame-cause-a-kernel-paging-error
Signed-off-by: Konstantin Khlebnikov
Acked-by: Will Deacon
Signed-off-by: Russell King
Signed-off-by: Ben Hutchings
commit 6c91c0aefd4430b87534794e2c3481e7b476e51b
Author: Tom Lendacky
Date: Thu Dec 5 13:09:53 2013 -0600
crypto: scatterwalk - Use sg\_chain\_ptr on chain entries
commit 389a5390583a18e45bc4abd4439291abec5e7a63 upstream.
Now that scatterwalk\_sg\_chain sets the chain pointer bit the sg\_page
call in scatterwalk\_sg\_next hits a BUG\_ON when CONFIG\_DEBUG\_SG is
enabled. Use sg\_chain\_ptr instead of sg\_page on a chain entry.
Signed-off-by: Tom Lendacky
Signed-off-by: Herbert Xu
Signed-off-by: Ben Hutchings
commit ec61938f01744d104f7c5b4553990e6d4a669bea
Author: Alan Cox
Date: Tue Dec 3 13:56:56 2013 -0800
drivers/char/i8k.c: add Dell XPLS L421X
commit 9aa5b0181bdf335f0b731d8502e128a862884bcd upstream.
Addresses https://bugzilla.kernel.org/show\_bug.cgi?id=60772
Signed-off-by: Alan Cox
Reported-by: Leho Kraav
Signed-off-by: Andrew Morton
Signed-off-by: Greg Kroah-Hartman
Signed-off-by: Ben Hutchings
commit 871d7214744f86b8edcc7b7d5dc7d4ff1f26d7bd
Author: Julius Werner
Date: Thu Nov 7 10:59:14 2013 -0800
usb: hub: Use correct reset for wedged USB3 devices that are NOTATTACHED
commit 2d51f3cd11f414c56a87dc018196b85fd50b04a4 upstream.
This patch adds a check for USB\_STATE\_NOTATTACHED to the
hub\_port\_warm\_reset\_required() workaround for ports that end up in
Compliance Mode in hub\_events() when trying to decide which reset
function to use. Trying to call usb\_reset\_device() with a NOTATTACHED
device will just fail and leave the port broken.
Signed-off-by: Julius Werner
Acked-by: Alan Stern
Signed-off-by: Greg Kroah-Hartman
Signed-off-by: Ben Hutchings
commit 87da9b02a3e94abb76c1da4305252cfaa6e960f1
Author: David Cluytens
Date: Tue Dec 3 14:18:57 2013 +0100
USB: cdc-acm: Added support for the Lenovo RD02-D400 USB Modem
commit 3b59d16c513da258ec8f6a0b4db85f257a0380d6 upstream.
Signed-off-by: David Cluytens
Signed-off-by: Greg Kroah-Hartman
Signed-off-by: Ben Hutchings
commit 388cb68af553ec19842b6e7a142df97424ced84c
Author: Bo Shen
Date: Tue Dec 3 18:04:54 2013 +0800
ASoC: wm8731: fix dsp mode configuration
commit b4af6ef99a60c5b56df137d7accd81ba1ee1254e upstream.
According to WM8731 "PD, Rev 4.9 October 2012" datasheet, when it
works in DSP mode A, LRP = 1, while works in DSP mode B, LRP = 0.
So, fix LRP for DSP mode as the datesheet specification.
Signed-off-by: Bo Shen
Acked-by: Charles Keepax
Signed-off-by: Mark Brown
Signed-off-by: Ben Hutchings
commit e83ec2b76f528aa8e06e3219f1763f3344b6dec6
Author: Liu Gang
Date: Fri Nov 22 16:12:40 2013 +0800
powerpc/gpio: Fix the wrong GPIO input data on MPC8572/MPC8536
commit 1aeef303b5d9e243c41d5b80f8bb059366514a10 upstream.
For MPC8572/MPC8536, the status of GPIOs defined as output
cannot be determined by reading GPDAT register, so the code
use shadow data register instead. But the code may give the
wrong status of GPIOs defined as input under some scenarios:
1. If some pins were configured as inputs and were asserted
high before booting the kernel, the shadow data has been
initialized with those pin values.
2. Some pins have been configured as output first and have
been set to the high value, then reconfigured as input.
The above cases will make the shadow data for those input
pins to be set to high. Then reading the pin status will
always return high even if the actual pin status is low.
The code should eliminate the effects of the shadow data to
the input pins, and the status of those pins should be
read directly from GPDAT.
Acked-by: Scott Wood
Acked-by: Anatolij Gustschin
Signed-off-by: Liu Gang
Signed-off-by: Linus Walleij
Signed-off-by: Ben Hutchings
commit bc76bef573fcbe221fef9d0ce4fd0be9f9e941cc
Author: Colin Leitner
Date: Mon Nov 4 19:40:43 2013 +0100
USB: pl2303: fixed handling of CS5 setting
commit a313249937820f8b1996133fc285efbd6aad2c5b upstream.
This patch fixes the CS5 setting on the PL2303 USB-to-serial devices. CS5 has a
value of 0 and the CSIZE setting has been skipped altogether by the enclosing
if. Tested on 3.11.6 and the scope shows the correct output after the fix has
been applied.
Tagged to be added to stable, because it fixes a user visible driver bug and is
simple enough to backport easily.
Signed-off-by: Colin Leitner
Signed-off-by: Johan Hovold
Signed-off-by: Greg Kroah-Hartman
[bwh: Backported to 3.2:
- Old code is cosmetically different]
Signed-off-by: Ben Hutchings
commit 75a4cfafc7379ed99dbb85f4b92de7e86a534876
Author: Colin Leitner
Date: Tue Nov 5 18:02:34 2013 +0100
USB: ftdi\_sio: fixed handling of unsupported CSIZE setting
commit 8704211f65a2106ba01b6ac9727cdaf9ca11594c upstream.
FTDI UARTs support only 7 or 8 data bits. Until now the ftdi\_sio driver would
only report this limitation for CS6 to dmesg and fail to reflect this fact to
tcgetattr.
This patch reverts the unsupported CSIZE setting and reports the fact with less
severance to dmesg for both CS5 and CS6.
To test the patch it's sufficient to call
stty -F /dev/ttyUSB0 cs5
which will succeed without the patch and report an error with the patch
applied.
As an additional fix this patch ensures that the control request will always
include a data bit size.
Signed-off-by: Colin Leitner
Signed-off-by: Johan Hovold
Signed-off-by: Greg Kroah-Hartman
[bwh: Backported to 3.2:
- Old code is cosmetically different
- s/ddev/\&port->dev/]
Signed-off-by: Ben Hutchings
commit f702d75487c72e1b4aabce4a34064b7e1853f1e6
Author: Colin Leitner
Date: Fri Nov 8 22:52:34 2013 +0100
USB: mos7840: correct handling of CS5 setting
commit 78692cc3382e0603a47e1f2aaeffe0d99891994d upstream.
This patch removes an erroneous check of CSIZE, which made it impossible to set
CS5.
Compiles clean, but couldn't test against hardware.
Signed-off-by: Colin Leitner
Signed-off-by: Johan Hovold
Signed-off-by: Greg Kroah-Hartman
Signed-off-by: Ben Hutchings
commit 481a741aeb74f6051a4f06cd7517d7cf1848f216
Author: Colin Leitner
Date: Fri Nov 8 22:53:11 2013 +0100
USB: spcp8x5: correct handling of CS5 setting
commit 711fbdfbf2bc4827214a650afe3f64767a1aba16 upstream.
This patch removes an erroneous check of CSIZE, which made it impossible to set
CS5.
Compiles clean, but couldn't test against hardware.
Signed-off-by: Colin Leitner
Signed-off-by: Johan Hovold
Signed-off-by: Greg Kroah-Hartman
Signed-off-by: Ben Hutchings
commit c1bf8d8873657cd703ef4221156b0d7edec3760a
Author: Fangxiaozhi (Franko)
Date: Mon Dec 2 09:00:11 2013 +0000
USB: option: support new huawei devices
commit 2bf308d7bc5e8cdd69672199f59532f35339133c upstream.
Add new supporting declarations to option.c, to support Huawei new
devices with new bInterfaceProtocol value.
Signed-off-by: fangxiaozhi
Signed-off-by: Greg Kroah-Hartman
Signed-off-by: Ben Hutchings
commit ec0556e105eedd58e015555caa76aef138fa6f57
Author: Gustavo Zacarias
Date: Mon Nov 11 09:59:15 2013 -0300
USB: serial: option: blacklist interface 1 for Huawei E173s-6
commit 8f173e22abf2258ddfa73f46eadbb6a6c29f1631 upstream.
Interface 1 on this device isn't for option to bind to otherwise an oops
on usb\_wwan with log flooding will happen when accessing the port:
tty\_release: ttyUSB1: read/write wait queue active!
It doesn't seem to respond to QMI if it's added to qmi\_wwan so don't add
it there - it's likely used by the card reader.
Signed-off-by: Gustavo Zacarias
Signed-off-by: Greg Kroah-Hartman
Signed-off-by: Ben Hutchings
commit 61e5e44d5f275afec7ddcf02c83537b664b25195
Author: James Bottomley
Date: Fri Nov 15 14:58:00 2013 -0800
enclosure: fix WARN\_ON in dual path device removing
commit a1470c7bf3a4676e62e4c0fb204e339399eb5c59 upstream.
Bug report from: wenxiong@linux.vnet.ibm.com
The issue is happened in dual controller configuration. We got the
sysfs warnings when rmmod the ipr module.
enclosure\_unregister() in drivers/msic/enclosure.c, call device\_unregister()
for each componment deivce, device\_unregister() ->device\_del()->kobject\_del()
->sysfs\_remove\_dir(). In sysfs\_remove\_dir(), set kobj->sd = NULL.
For each componment device,
enclosure\_component\_release()->enclosure\_remove\_links()->sysfs\_remove\_link()
in which checking kobj->sd again, it has been set as NULL when doing
device\_unregister. So we saw all these sysfs WARNING.
Tested-by: wenxiong@linux.vnet.ibm.com
Signed-off-by: James Bottomley
Signed-off-by: Ben Hutchings
commit e4394d6137fccf28a5f91b2813fa5ea7956dae40
Author: Stephen M. Cameron
Date: Fri Nov 1 11:02:25 2013 -0500
hpsa: return 0 from driver probe function on success, not 1
commit 88bf6d62db4393fa03a58bada9d746312d5b496f upstream.
A return value of 1 is interpreted as an error. See pci\_driver.
in local\_pci\_probe(). If you're wondering how this ever could
have worked, it's because it used to be the case that only return
values less than zero were interpreted as failure. But even in
the current kernel if the driver registers its various entry
points with the kernel, and then returns a value which is
interpreted as failure, those registrations aren't undone, so
the driver still mostly works. However, the driver's remove
function wouldn't be called on rmmod, and pci power management
functions wouldn't work. In the case of Smart Array, since it
has a battery backed cache (or else no cache) even if the driver
is not shut down properly as long as there is no outstanding
i/o, nothing too bad happens, which is why it took so long to
notice.
Requesting backport to stable because the change to pci-driver.c
which requires driver probe functions to return 0 occurred between
2.6.35 and 2.6.36 (the pci power management breakage) and again
between 3.7 and 3.8 (pci\_dev->driver getting set to NULL in
local\_pci\_probe() preventing driver remove function from being
called on rmmod.)
Signed-off-by: Stephen M. Cameron
Signed-off-by: James Bottomley
Signed-off-by: Ben Hutchings
commit 249e9834a03c3bd1f66b97f0c5ceca4ed5a2ee5b
Author: Stephen M. Cameron
Date: Mon Sep 23 13:33:41 2013 -0500
hpsa: do not discard scsi status on aborted commands
commit 2e311fbabdc23b7eaec77313dc3b9a151a5407b5 upstream.
We inadvertantly discarded the scsi status for aborted commands.
For some commands (e.g. reads from tape drives) these can't be retried,
and if we discarded the scsi status, the scsi mid layer couldn't notice
anything was wrong and the error was not reported.
Signed-off-by: Stephen M. Cameron
Signed-off-by: James Bottomley
Signed-off-by: Ben Hutchings
commit cb80debe9515e8b7385ed1d3d602a08465b9fa3e
Author: Russell King
Date: Thu Nov 28 21:55:41 2013 +0000
ARM: footbridge: fix VGA initialisation
commit 43659222e7a0113912ed02f6b2231550b3e471ac upstream.
It's no good setting vga\_base after the VGA console has been
initialised, because if we do that we get this:
Unable to handle kernel paging request at virtual address 000b8000
pgd = c0004000
[000b8000] \*pgd=07ffc831, \*pte=00000000, \*ppte=00000000
0Internal error: Oops: 5017 [#1] ARM
Modules linked in:
CPU: 0 PID: 0 Comm: swapper Not tainted 3.12.0+ #49
task: c03e2974 ti: c03d8000 task.ti: c03d8000
PC is at vgacon\_startup+0x258/0x39c
LR is at request\_resource+0x10/0x1c
pc : [] lr : [] psr: 60000053
sp : c03d9f68 ip : 000b8000 fp : c03d9f8c
r10: 000055aa r9 : 4401a103 r8 : ffffaa55
r7 : c03e357c r6 : c051b460 r5 : 000000ff r4 : 000c0000
r3 : 000b8000 r2 : c03e0514 r1 : 00000000 r0 : c0304971
Flags: nZCv IRQs on FIQs off Mode SVC\_32 ISA ARM Segment kernel
which is an access to the 0xb8000 without the PCI offset required to
make it work.
Fixes: cc22b4c18540 ("ARM: set vga memory base at run-time")
Signed-off-by: Russell King
[bwh: Backported to 3.2: adjust context]
Signed-off-by: Ben Hutchings
commit 23e32f51b6d88cedfc3a36d513b1792d5d3f09a0
Author: Shawn Landden
Date: Sun Nov 24 22:36:28 2013 -0800
net: update consumers of MSG\_MORE to recognize MSG\_SENDPAGE\_NOTLAST
commit d3f7d56a7a4671d395e8af87071068a195257bf6 upstream.
Commit 35f9c09fe (tcp: tcp\_sendpages() should call tcp\_push() once)
added an internal flag MSG\_SENDPAGE\_NOTLAST, similar to
MSG\_MORE.
algif\_hash, algif\_skcipher, and udp used MSG\_MORE from tcp\_sendpages()
and need to see the new flag as identical to MSG\_MORE.
This fixes sendfile() on AF\_ALG.
v3: also fix udp
Cc: Tom Herbert
Cc: Eric Dumazet
Cc: David S. Miller
Reported-and-tested-by: Shawn Landden
Original-patch: Richard Weinberger
Signed-off-by: Shawn Landden
Signed-off-by: David S. Miller
Signed-off-by: Ben Hutchings
commit 824a6ef95e0bdae46d78620317abe2eeb5fcb47c
Author: Linus Walleij
Date: Thu Nov 28 14:33:52 2013 +0100
net: smc91: fix crash regression on the versatile
commit a0c20fb02592d372e744d1d739cda3e1b3defaae upstream.
After commit e9e4ea74f06635f2ffc1dffe5ef40c854faa0a90
"net: smc91x: dont't use SMC\_outw for fixing up halfword-aligned data"
The Versatile SMSC LAN91C111 is crashing like this:
------------[ cut here ]------------
kernel BUG at /home/linus/linux/drivers/net/ethernet/smsc/smc91x.c:599!
Internal error: Oops - BUG: 0 [#1] ARM
Modules linked in:
CPU: 0 PID: 43 Comm: udhcpc Not tainted 3.13.0-rc1+ #24
task: c6ccfaa0 ti: c6cd0000 task.ti: c6cd0000
PC is at smc\_hardware\_send\_pkt+0x198/0x22c
LR is at smc\_hardware\_send\_pkt+0x24/0x22c
pc : [] lr : [] psr: 20000013
sp : c6cd1d08 ip : 00000001 fp : 00000000
r10: c02adb08 r9 : 00000000 r8 : c6ced802
r7 : c786fba0 r6 : 00000146 r5 : c8800000 r4 : c78d6000
r3 : 0000000f r2 : 00000146 r1 : 00000000 r0 : 00000031
Flags: nzCv IRQs on FIQs on Mode SVC\_32 ISA ARM Segment user
Control: 0005317f Table: 06cf4000 DAC: 00000015
Process udhcpc (pid: 43, stack limit = 0xc6cd01c0)
Stack: (0xc6cd1d08 to 0xc6cd2000)
1d00: 00000010 c8800000 c78d6000 c786fba0 c78d6000 c01be868
1d20: c01be7a4 00004000 00000000 c786fba0 c6c12b80 c0208554 000004d0 c780fc60
1d40: 00000220 c01fb734 00000000 00000000 00000000 c6c9a440 c6c12b80 c78d6000
1d60: c786fba0 c6c9a440 00000000 c021d1d8 00000000 00000000 c6c12b80 c78d6000
1d80: c786fba0 00000001 c6c9a440 c02087f8 c6c9a4a0 00080008 00000000 00000000
1da0: c78d6000 c786fba0 c78d6000 00000138 00000000 00000000 00000000 00000000
1dc0: 00000000 c027ba74 00000138 00000138 00000001 00000010 c6cedc00 00000000
1de0: 00000008 c7404400 c6cd1eec c6cd1f14 c067a73c c065c0b8 00000000 c067a740
1e00: 01ffffff 002040d0 00000000 00000000 00000000 00000000 00000000 ffffffff
1e20: 43004400 00110022 c6cdef20 c027ae8c c6ccfaa0 be82d65c 00000014 be82d3cc
1e40: 00000000 00000000 00000000 c01f2870 00000000 00000000 00000000 c6cd1e88
1e60: c6ccfaa0 00000000 00000000 00000000 00000000 00000000 00000000 00000000
1e80: 00000000 00000000 00000031 c7802310 c7802300 00000138 c7404400 c0771da0
1ea0: 00000000 c6cd1eec c7800340 00000138 be82d65c 00000014 be82d3cc c6cd1f08
1ec0: 00000014 00000000 c7404400 c7404400 00000138 c01f4628 c78d6000 00000000
1ee0: 00000000 be82d3cc 00000138 c6cd1f08 00000014 c6cd1ee4 00000001 00000000
1f00: 00000000 00000000 00080011 00000002 06000000 ffffffff 0000ffff 00000002
1f20: 06000000 ffffffff 0000ffff c00928c8 c065c520 c6cd1f58 00000003 c009299c
1f40: 00000003 c065c520 c7404400 00000000 c7404400 c01f2218 c78106b0 c7441cb0
1f60: 00000000 00000006 c06799fc 00000000 00000000 00000006 00000000 c01f3ee0
1f80: 00000000 00000000 be82d678 be82d65c 00000014 00000001 00000122 c00139c8
1fa0: c6cd0000 c0013840 be82d65c 00000014 00000006 be82d3cc 00000138 00000000
1fc0: be82d65c 00000014 00000001 00000122 00000000 00000000 00018cb1 00000000
1fe0: 00003801 be82d3a8 0003a0c7 b6e9af08 60000010 00000006 00000000 00000000
[] (smc\_hardware\_send\_pkt+0x198/0x22c) from [] (smc\_hard\_start\_xmit+0xc4/0x1e8)
[] (smc\_hard\_start\_xmit+0xc4/0x1e8) from [] (dev\_hard\_start\_xmit+0x460/0x4cc)
[] (dev\_hard\_start\_xmit+0x460/0x4cc) from [] (sch\_direct\_xmit+0x94/0x18c)
[] (sch\_direct\_xmit+0x94/0x18c) from [] (dev\_queue\_xmit+0x238/0x42c)
[] (dev\_queue\_xmit+0x238/0x42c) from [] (packet\_sendmsg+0xbe8/0xd28)
[] (packet\_sendmsg+0xbe8/0xd28) from [] (sock\_sendmsg+0x84/0xa8)
[] (sock\_sendmsg+0x84/0xa8) from [] (SyS\_sendto+0xb8/0xdc)
[] (SyS\_sendto+0xb8/0xdc) from [] (ret\_fast\_syscall+0x0/0x2c)
Code: e3130002 1a000001 e3130001 0affffcd (e7f001f2)
---[ end trace 81104fe70e8da7fe ]---
Kernel panic - not syncing: Fatal exception in interrupt
This is because the macro operations in smc91x.h defined
for Versatile are missing SMC\_outsw() as used in this
commit.
The Versatile needs and uses the same accessors as the other
platforms in the first if(...) clause, just switch it to using
that and we have one problem less to worry about.
This includes a hunk of a patch from Will Deacon fixin
the other 32bit platforms as well: Innokom, Ramses, PXA,
PCM027.
Checkpatch complains about spacing, but I have opted to
follow the style of this .h-file.
Cc: Russell King
Cc: Nicolas Pitre
Cc: Eric Miao
Cc: Jonathan Cameron
Signed-off-by: Will Deacon
Signed-off-by: Linus Walleij
Signed-off-by: David S. Miller
Signed-off-by: Ben Hutchings
commit 47c55eb0a98d1f513f0bc1bc8065c7cc276c3335
Author: Wei Yongjun
Date: Fri Oct 25 06:34:03 2013 -0300
saa7164: fix return value check in saa7164\_initdev()
commit 89f4d45b2752df5d222b5f63919ce59e2d8afaf4 upstream.
In case of error, the function kthread\_run() returns ERR\_PTR()
and never returns NULL. The NULL test in the return value check
should be replaced with IS\_ERR().
Signed-off-by: Wei Yongjun
Signed-off-by: Hans Verkuil
Signed-off-by: Mauro Carvalho Chehab
[bwh: Backported to 3.2: adjust filename]
Signed-off-by: Ben Hutchings
commit ba25ea524dc7ff4a5e8cc60f1778ef7645380d53
Author: Horia Geanta
Date: Thu Nov 28 15:11:15 2013 +0200
crypto: ccm - Fix handling of zero plaintext when computing mac
commit 5638cabf3e4883f38dfb246c30980cebf694fbda upstream.
There are cases when cryptlen can be zero in crypto\_ccm\_auth():
-encryptiom: input scatterlist length is zero (no plaintext)
-decryption: input scatterlist contains only the mac
plus the condition of having different source and destination buffers
(or else scatterlist length = max(plaintext\_len, ciphertext\_len)).
These are not handled correctly, leading to crashes like:
root@p4080ds:~/crypto# insmod tcrypt.ko mode=45
------------[ cut here ]------------
kernel BUG at crypto/scatterwalk.c:37!
Oops: Exception in kernel mode, sig: 5 [#1]
SMP NR\_CPUS=8 P4080 DS
Modules linked in: tcrypt(+) crc32c xts xcbc vmac pcbc ecb gcm ghash\_generic gf128mul ccm ctr seqiv
CPU: 3 PID: 1082 Comm: cryptomgr\_test Not tainted 3.11.0 #14
task: ee12c5b0 ti: eecd0000 task.ti: eecd0000
NIP: c0204d98 LR: f9225848 CTR: c0204d80
REGS: eecd1b70 TRAP: 0700 Not tainted (3.11.0)
MSR: 00029002  CR: 22044022 XER: 20000000
GPR00: f9225c94 eecd1c20 ee12c5b0 eecd1c28 ee879400 ee879400 00000000 ee607464
GPR08: 00000001 00000001 00000000 006b0000 c0204d80 00000000 00000002 c0698e20
GPR16: ee987000 ee895000 fffffff4 ee879500 00000100 eecd1d58 00000001 00000000
GPR24: ee879400 00000020 00000000 00000000 ee5b2800 ee607430 00000004 ee607460
NIP [c0204d98] scatterwalk\_start+0x18/0x30
LR [f9225848] get\_data\_to\_compute+0x28/0x2f0 [ccm]
Call Trace:
[eecd1c20] [f9225974] get\_data\_to\_compute+0x154/0x2f0 [ccm] (unreliable)
[eecd1c70] [f9225c94] crypto\_ccm\_auth+0x184/0x1d0 [ccm]
[eecd1cb0] [f9225d40] crypto\_ccm\_encrypt+0x60/0x2d0 [ccm]
[eecd1cf0] [c020d77c] \_\_test\_aead+0x3ec/0xe20
[eecd1e20] [c020f35c] test\_aead+0x6c/0xe0
[eecd1e40] [c020f420] alg\_test\_aead+0x50/0xd0
[eecd1e60] [c020e5e4] alg\_test+0x114/0x2e0
[eecd1ee0] [c020bd1c] cryptomgr\_test+0x4c/0x60
[eecd1ef0] [c0047058] kthread+0xa8/0xb0
[eecd1f40] [c000eb0c] ret\_from\_kernel\_thread+0x5c/0x64
Instruction dump:
0f080000 81290024 552807fe 0f080000 5529003a 4bffffb4 90830000 39400000
39000001 8124000c 2f890000 7d28579e <0f090000> 81240008 91230004 4e800020
---[ end trace 6d652dfcd1be37bd ]---
Cc: Jussi Kivilinna
Signed-off-by: Horia Geanta
Signed-off-by: Herbert Xu
Signed-off-by: Ben Hutchings
commit 8ccf25d7c6295ab6112711419d3c056a2331e430
Author: Gerald Schaefer
Date: Tue Nov 19 17:12:47 2013 +0100
crypto: s390 - Fix aes-xts parameter corruption
commit 9dda2769af4f3f3093434648c409bb351120d9e8 upstream.
Some s390 crypto algorithms incorrectly use the crypto\_tfm structure to
store private data. As the tfm can be shared among multiple threads, this
can result in data corruption.
This patch fixes aes-xts by moving the xts and pcc parameter blocks from
the tfm onto the stack (48 + 96 bytes).
Signed-off-by: Gerald Schaefer
Signed-off-by: Herbert Xu
[bwh: Backported to 3.2: adjust context]
Signed-off-by: Ben Hutchings
commit ae77e5647c092c36b89db2db86b19df23fcaa51b
Author: Tom Lendacky
Date: Tue Nov 12 11:46:10 2013 -0600
crypto: scatterwalk - Set the chain pointer indication bit
commit 41da8b5adba77e22584f8b45f9641504fa885308 upstream.
The scatterwalk\_crypto\_chain function invokes the scatterwalk\_sg\_chain
function to chain two scatterlists, but the chain pointer indication
bit is not set. When the resulting scatterlist is used, for example,
by sg\_nents to count the number of scatterlist entries, a segfault occurs
because sg\_nents does not follow the chain pointer to the chained scatterlist.
Update scatterwalk\_sg\_chain to set the chain pointer indication bit as is
done by the sg\_chain function.
Signed-off-by: Tom Lendacky
Signed-off-by: Herbert Xu
Signed-off-by: Ben Hutchings
commit 2543b0df8eaf67f046828af6bbec82187de1990f
Author: Tom Lendacky
Date: Tue Nov 12 11:46:04 2013 -0600
crypto: authenc - Find proper IV address in ablkcipher callback
commit fc019c7122dfcd69c50142b57a735539aec5da95 upstream.
When performing an asynchronous ablkcipher operation the authenc
completion callback routine is invoked, but it does not locate and use
the proper IV.
The callback routine, crypto\_authenc\_encrypt\_done, is updated to use
the same method of calculating the address of the IV as is done in
crypto\_authenc\_encrypt function which sets up the callback.
Signed-off-by: Tom Lendacky
Signed-off-by: Herbert Xu
Signed-off-by: Ben Hutchings
commit d8d9e54e147be106f1439848d016801056f49d55
Author: Peter Zijlstra
Date: Tue Nov 26 15:03:41 2013 +0100
cpuset: Fix memory allocator deadlock
commit 0fc0287c9ed1ffd3706f8b4d9b314aa102ef1245 upstream.
Juri hit the below lockdep report:
[ 4.303391] ======================================================
[ 4.303392] [ INFO: SOFTIRQ-safe -> SOFTIRQ-unsafe lock order detected ]
[ 4.303394] 3.12.0-dl-peterz+ #144 Not tainted
[ 4.303395] ------------------------------------------------------
[ 4.303397] kworker/u4:3/689 [HC0[0]:SC0[0]:HE0:SE1] is trying to acquire:
[ 4.303399] (&p->mems\_allowed\_seq){+.+...}, at: [] new\_slab+0x6c/0x290
[ 4.303417]
[ 4.303417] and this task is already holding:
[ 4.303418] (&(&q->\_\_queue\_lock)->rlock){..-...}, at: [] blk\_execute\_rq\_nowait+0x5b/0x100
[ 4.303431] which would create a new lock dependency:
[ 4.303432] (&(&q->\_\_queue\_lock)->rlock){..-...} -> (&p->mems\_allowed\_seq){+.+...}
[ 4.303436]
[ 4.303898] the dependencies between the lock to be acquired and SOFTIRQ-irq-unsafe lock:
[ 4.303918] -> (&p->mems\_allowed\_seq){+.+...} ops: 2762 {
[ 4.303922] HARDIRQ-ON-W at:
[ 4.303923] [] \_\_lock\_acquire+0x65a/0x1ff0
[ 4.303926] [] lock\_acquire+0x93/0x140
[ 4.303929] [] kthreadd+0x86/0x180
[ 4.303931] [] ret\_from\_fork+0x7c/0xb0
[ 4.303933] SOFTIRQ-ON-W at:
[ 4.303933] [] \_\_lock\_acquire+0x68c/0x1ff0
[ 4.303935] [] lock\_acquire+0x93/0x140
[ 4.303940] [] kthreadd+0x86/0x180
[ 4.303955] [] ret\_from\_fork+0x7c/0xb0
[ 4.303959] INITIAL USE at:
[ 4.303960] [] \_\_lock\_acquire+0x344/0x1ff0
[ 4.303963] [] lock\_acquire+0x93/0x140
[ 4.303966] [] kthreadd+0x86/0x180
[ 4.303969] [] ret\_from\_fork+0x7c/0xb0
[ 4.303972] }
Which reports that we take mems\_allowed\_seq with interrupts enabled. A
little digging found that this can only be from
cpuset\_change\_task\_nodemask().
This is an actual deadlock because an interrupt doing an allocation will
hit get\_mems\_allowed()->...->\_\_read\_seqcount\_begin(), which will spin
forever waiting for the write side to complete.
Cc: John Stultz
Cc: Mel Gorman
Reported-by: Juri Lelli
Signed-off-by: Peter Zijlstra
Tested-by: Juri Lelli
Acked-by: Li Zefan
Acked-by: Mel Gorman
Signed-off-by: Tejun Heo
Signed-off-by: Ben Hutchings
commit 2908084d0144ffb5d1a7616348a86acac5247a10
Author: Greg Kroah-Hartman
Date: Wed Nov 27 09:32:49 2013 -0800
Staging: tidspbridge: disable driver
commit 930ba4a374b96560ef9fde2145cdc454a164ddcc upstream.
There seems to be no active maintainer for the driver, and there is an
unfixed security bug, so disable the driver for now.
Hopefully someone steps up to be the maintainer, and works to get this
out of staging, otherwise it will be deleted soon.
Reported-by: Nico Golde
Reported-by: Dan Carpenter
Cc: Omar Ramirez Luna
Cc: Omar Ramirez Luna
Cc: Kanigeri, Hari
Cc: Ameya Palande
Cc: Guzman Lugo, Fernando
Cc: Hebbar, Shivananda
Cc: Ramos Falcon, Ernesto
Cc: Felipe Contreras
Cc: Anna, Suman
Cc: Gupta, Ramesh
Cc: Gomez Castellanos, Ivan
Cc: Andy Shevchenko
Cc: Armando Uribe De Leon
Cc: Deepak Chitriki
Cc: Menon, Nishanth
Cc: Phil Carmody
Cc: Ohad Ben-Cohen
Signed-off-by: Greg Kroah-Hartman
[bwh: Backported to 3.2: adjust context; no dependency on !ARCH\_MULTIPLATFORM]
Signed-off-by: Ben Hutchings
commit 8525fdf426fd4ad935f7f38c0d4663bc55504440
Author: Dan Williams
Date: Tue Oct 22 18:35:19 2013 -0700
libsas: fix usage of ata\_tf\_to\_fis
commit ae5fbae0ccd982dfca0ce363036ed92f5b13f150 upstream.
Since commit 110dd8f19df5 "[SCSI] libsas: fix scr\_read/write users and
update the libata documentation" we have been passing pmp=1 and is\_cmd=0
to ata\_tf\_to\_fis(). Praveen reports that eSATA attached drives do not
discover correctly. His investigation found that the BIOS was passing
pmp=0 while Linux was passing pmp=1 and failing to discover the drives.
Update libsas to follow the libata example of pulling the pmp setting
from the ata\_link and correct is\_cmd to be 1 since all tf's submitted
through ->qc\_issue are commands. Presumably libsas lldds do not care
about is\_cmd as they have sideband mechanisms to perform link
management.
http://marc.info/?l=linux-scsi&m=138179681726990
[jejb: checkpatch fix]
Signed-off-by: Dan Williams
Reported-by: Praveen Murali
Tested-by: Praveen Murali
Signed-off-by: James Bottomley
Signed-off-by: Ben Hutchings
commit e8a972ca97341ac335425551e7611380937639db
Author: Steven Rostedt (Red Hat)
Date: Tue Nov 26 09:22:54 2013 -0500
tracing: Allow events to have NULL strings
commit 4e58e54754dc1fec21c3a9e824bc108b05fdf46e upstream.
If an TRACE\_EVENT() uses \_\_assign\_str() or \_\_get\_str on a NULL pointer
then the following oops will happen:
BUG: unable to handle kernel NULL pointer dereference at (null)
IP: [] strlen+0x10/0x1a
\*pde = 00000000 ^M
Oops: 0000 [#1] PREEMPT SMP
Modules linked in:
CPU: 1 PID: 0 Comm: swapper/1 Not tainted 3.13.0-rc1-test+ #2
Hardware name: /DG965MQ, BIOS MQ96510J.86A.0372.2006.0605.1717 06/05/2006^M
task: f5cde9f0 ti: f5e5e000 task.ti: f5e5e000
EIP: 0060:[] EFLAGS: 00210046 CPU: 1
EIP is at strlen+0x10/0x1a
EAX: 00000000 EBX: c2472da8 ECX: ffffffff EDX: c2472da8
ESI: c1c5e5fc EDI: 00000000 EBP: f5e5fe84 ESP: f5e5fe80
DS: 007b ES: 007b FS: 00d8 GS: 00e0 SS: 0068
CR0: 8005003b CR2: 00000000 CR3: 01f32000 CR4: 000007d0
Stack:
f5f18b90 f5e5feb8 c10687a8 0759004f 00000005 00000005 00000005 00200046
00000002 00000000 c1082a93 f56c7e28 c2472da8 c1082a93 f5e5fee4 c106bc61^M
00000000 c1082a93 00000000 00000000 00000001 00200046 00200082 00000000
Call Trace:
[] ftrace\_raw\_event\_lock+0x39/0xc0
[] ? ktime\_get+0x29/0x69
[] ? ktime\_get+0x29/0x69
[] lock\_release+0x57/0x1a5
[] ? ktime\_get+0x29/0x69
[] read\_seqcount\_begin.constprop.7+0x4d/0x75
[] ? ktime\_get+0x29/0x69^M
[] ktime\_get+0x29/0x69
[] \_\_tick\_nohz\_idle\_enter+0x1e/0x426
[] ? lock\_release\_holdtime.part.19+0x48/0x4d
[] ? time\_hardirqs\_off+0xe/0x28
[] ? trace\_hardirqs\_off\_caller+0x3f/0xaf
[] tick\_nohz\_idle\_enter+0x59/0x62
[] cpu\_startup\_entry+0x64/0x192
[] start\_secondary+0x277/0x27c
Code: 90 89 c6 89 d0 88 c4 ac 38 e0 74 09 84 c0 75 f7 be 01 00 00 00 89 f0 48 5e 5d c3 55 89 e5 57 66 66 66 66 90 83 c9 ff 89 c7 31 c0  ae f7 d1 8d 41 ff 5f 5d c3 55 89 e5 57 66 66 66 66 90 31 ff
EIP: [] strlen+0x10/0x1a SS:ESP 0068:f5e5fe80
CR2: 0000000000000000
---[ end trace 01bc47bf519ec1b2 ]---
New tracepoints have been added that have allowed for NULL pointers
being assigned to strings. To fix this, change the TRACE\_EVENT() code
to check for NULL and if it is, it will assign "(null)" to it instead
(similar to what glibc printf does).
Reported-by: Shuah Khan
Reported-by: Jovi Zhangwei
Link: http://lkml.kernel.org/r/CAGdX0WFeEuy+DtpsJzyzn0343qEEjLX97+o1VREFkUEhndC+5Q@mail.gmail.com
Link: http://lkml.kernel.org/r/528D6972.9010702@samsung.com
Fixes: 9cbf117662e2 ("tracing/events: provide string with undefined size support")
Signed-off-by: Steven Rostedt
Signed-off-by: Ben Hutchings
commit 5547e2c69ba441c91699f6cb922552277aa5c28a
Author: Kailang Yang
Date: Tue Nov 26 15:41:40 2013 +0800
ALSA: hda/realtek - Set pcbeep amp for ALC668
commit 9ad54547cf6f4410eba83bb95dfd2a0966718d6d upstream.
Set the missing pcbeep default amp for ALC668.
Signed-off-by: Kailang Yang
Signed-off-by: Takashi Iwai
Signed-off-by: Ben Hutchings
commit b7536448ffe4212f4300682f240ae381c7074a65
Author: Kailang Yang
Date: Tue Nov 26 15:17:50 2013 +0800
ALSA: hda/realtek - Add support of ALC231 codec
commit ba4c4d0a9021ab034554d532a98133d668b87599 upstream.
It's compatible with ALC269.
Signed-off-by: Kailang Yang
Signed-off-by: Takashi Iwai
[bwh: Backported to 3.2: adjust context]
Signed-off-by: Ben Hutchings
commit 58ed97c6f882b3b52c09d0c565eff8164a240279
Author: Laxman Dewangan
Date: Mon Nov 25 19:39:47 2013 +0530
irq: Enable all irqs unconditionally in irq\_resume
commit ac01810c9d2814238f08a227062e66a35a0e1ea2 upstream.
When the system enters suspend, it disables all interrupts in
suspend\_device\_irqs(), including the interrupts marked EARLY\_RESUME.
On the resume side things are different. The EARLY\_RESUME interrupts
are reenabled in sys\_core\_ops->resume and the non EARLY\_RESUME
interrupts are reenabled in the normal system resume path.
When suspend\_noirq() failed or suspend is aborted for any other
reason, we might omit the resume side call to sys\_core\_ops->resume()
and therefor the interrupts marked EARLY\_RESUME are not reenabled and
stay disabled forever.
To solve this, enable all irqs unconditionally in irq\_resume()
regardless whether interrupts marked EARLY\_RESUMEhave been already
enabled or not.
This might try to reenable already enabled interrupts in the non
failure case, but the only affected platform is XEN and it has been
confirmed that it does not cause any side effects.
[ tglx: Massaged changelog. ]
Signed-off-by: Laxman Dewangan
Acked-by-and-tested-by: Konrad Rzeszutek Wilk
Acked-by: Heiko Stuebner
Reviewed-by: Pavel Machek
Cc:
Cc:
Cc:
Cc:
Link: http://lkml.kernel.org/r/1385388587-16442-1-git-send-email-ldewangan@nvidia.com
Signed-off-by: Thomas Gleixner
Signed-off-by: Ben Hutchings
commit 6f484718617526801dcb4294c0e9a2367dfc6d7c
Author: Oliver Hartkopp
Date: Thu Nov 21 18:03:07 2013 +0100
can: sja1000: fix {pre,post}\_irq() handling and IRQ handler return value
commit 2fea6cd303c0d0cd9067da31d873b6a6d5bd75e7 upstream.
This patch fixes the issue that the sja1000\_interrupt() function may have
returned IRQ\_NONE without processing the optional pre\_irq() and post\_irq()
function before. Further the irq processing counter 'n' is moved to the end of
the while statement to return correct IRQ\_[NONE|HANDLED] values at error
conditions.
Reported-by: Wolfgang Grandegger
Acked-by: Wolfgang Grandegger
Signed-off-by: Oliver Hartkopp
Signed-off-by: Marc Kleine-Budde
[bwh: Backported to 3.2: s/SJA1000\_IER/REG\_IER/; s/SJA1000\_IR/REG\_IR/]
Signed-off-by: Ben Hutchings
commit e06c33874253cf44ae5d3484111db7b17bc09b5f
Author: Rashika Kheria
Date: Sun Nov 10 22:13:53 2013 +0530
Staging: zram: Fix memory leak by refcount mismatch
commit 1b672224d128ec2570eb37572ff803cfe452b4f7 upstream.
As suggested by Minchan Kim and Jerome Marchand "The code in reset\_store
get the block device (bdget\_disk()) but it does not put it (bdput()) when
it's done using it. The usage count is therefore incremented but never
decremented."
This patch also puts bdput() for all error cases.
Acked-by: Minchan Kim
Acked-by: Jerome Marchand
Signed-off-by: Rashika Kheria
Signed-off-by: Greg Kroah-Hartman
[bwh: Backported to 3.2: adjust filename, context]
Signed-off-by: Ben Hutchings
commit dccfb68c26308eb5fa3321110c9a4b51e89d67e3
Author: Rashika Kheria
Date: Wed Oct 30 18:36:32 2013 +0530
Staging: zram: Fix access of NULL pointer
commit 46a51c80216cb891f271ad021f59009f34677499 upstream.
This patch fixes the bug in reset\_store caused by accessing NULL pointer.
The bdev gets its value from bdget\_disk() which could fail when memory
pressure is severe and hence can return NULL because allocation of
inode in bdget could fail.
Hence, this patch introduces a check for bdev to prevent reference to a
NULL pointer in the later part of the code. It also removes unnecessary
check of bdev for fsync\_bdev().
Acked-by: Jerome Marchand
Signed-off-by: Rashika Kheria
Acked-by: Minchan Kim
Signed-off-by: Greg Kroah-Hartman
[bwh: Backported to 3.2: adjust filename]
Signed-off-by: Ben Hutchings
commit 653106814a7591093b28f23a5d0d207121672781
Author: Alan Stern
Date: Fri Nov 1 12:05:12 2013 -0400
usb: dwc3: fix implementation of endpoint wedge
commit a535d81c92615b8ffb99b7e1fd1fb01effaed1af upstream.
The dwc3 UDC driver doesn't implement endpoint wedging correctly.
When an endpoint is wedged, the gadget driver should be allowed to
clear the wedge by calling usb\_ep\_clear\_halt(). Only the host is
prevented from resetting the endpoint.
This patch fixes the implementation.
Signed-off-by: Alan Stern
Tested-by: Pratyush Anand
Signed-off-by: Felipe Balbi
Signed-off-by: Ben Hutchings
commit eeddb0ad331b977136b213d5656d4ab08f52484f
Author: Michael Grzeschik
Date: Mon Nov 11 23:43:32 2013 +0100
usb: gadget: composite: reset delayed\_status on reset\_config
commit 2bac51a1827a18821150ed8c9f9752c02f9c2b02 upstream.
The delayed\_status value is used to keep track of status response
packets on ep0. It needs to be reset or the set\_config function would
still delay the answer, if the usb device got unplugged while waiting
for setup\_continue to be called.
Signed-off-by: Michael Grzeschik
Signed-off-by: Felipe Balbi
Signed-off-by: Ben Hutchings
commit 757bf43df88029f70acb519517234a8d0d83636c
Author: Johan Hovold
Date: Sat Nov 9 12:38:09 2013 +0100
USB: serial: fix race in generic write
commit 6f6485463aada1ec6a0f3db6a03eb8e393d6bb55 upstream.
Fix race in generic write implementation, which could lead to
temporarily degraded throughput.
The current generic write implementation introduced by commit
27c7acf22047 ("USB: serial: reimplement generic fifo-based writes") has
always had this bug, although it's fairly hard to trigger and the
consequences are not likely to be noticed.
Specifically, a write() on one CPU while the completion handler is
running on another could result in only one of the two write urbs being
utilised to empty the remainder of the write fifo (unless there is a
second write() that doesn't race during that time).
Signed-off-by: Johan Hovold
Signed-off-by: Greg Kroah-Hartman
[bwh: Backported to 3.2: deleted code is a bit different]
Signed-off-by: Ben Hutchings
commit aea59757e00e792fae1f174742170564cdb2908b
Author: Johannes Berg
Date: Wed Nov 20 11:28:27 2013 +0100
mac80211: don't attempt to reorder multicast frames
commit 051a41fa4ee14f5c39668f0980973b9a195de560 upstream.
Multicast frames can't be transmitted as part of an aggregation
session (such a session couldn't even be set up) so don't try to
reorder them. Trying to do so would cause the reorder to stop
working correctly since multicast QoS frames (as transmitted by
the Aruba APs this was found with) would cause sequence number
confusion in the buffer.
Reported-by: Blaise Gassend
Signed-off-by: Johannes Berg
Signed-off-by: Ben Hutchings
commit 9d2a88738ff77faf2c08999b08616342d67e01e3
Author: Mark Brown
Date: Fri Nov 22 14:17:18 2013 +0000
ASoC: wm8990: Mark the register map as dirty when powering down
commit 2ab2b74277a86afe0dd92976db695a2bb8b93366 upstream.
Otherwise we'll skip sync on resume.
Signed-off-by: Mark Brown
Acked-by: Charles Keepax
Signed-off-by: Ben Hutchings
commit 286cfe15641d42d5a3846eb1009cf79b7934439b
Author: Michael Neuling
Date: Mon Nov 25 11:12:20 2013 +1100
powerpc/signals: Improved mark VSX not saved with small contexts fix
commit ec67ad82814bee92251fd963bf01c7a173856555 upstream.
In a recent patch:
commit c13f20ac48328b05cd3b8c19e31ed6c132b44b42
Author: Michael Neuling
powerpc/signals: Mark VSX not saved with small contexts
We fixed an issue but an improved solution was later discussed after the patch
was merged.
Firstly, this patch doesn't handle the 64bit signals case, which could also hit
this issue (but has never been reported).
Secondly, the original patch isn't clear what MSR VSX should be set to. The
new approach below always clears the MSR VSX bit (to indicate no VSX is in the
context) and sets it only in the specific case where VSX is available (ie. when
VSX has been used and the signal context passed has space to provide the
state).
This reverts the original patch and replaces it with the improved solution. It
also adds a 64 bit version.
Signed-off-by: Michael Neuling
Signed-off-by: Benjamin Herrenschmidt
Signed-off-by: Ben Hutchings
commit 9ed46e8a9a81cb97217061138b4199526706aec3
Author: Samir Benmendil
Date: Sun Nov 17 23:56:17 2013 +0100
ahci: add Marvell 9230 to the AHCI PCI device list
commit 6d5278a68a75891db1df5ae1ecf83d288fc58c65 upstream.
Tested with a DAWICONTROL DC-624e on 3.10.10
Signed-off-by: Samir Benmendil
Signed-off-by: Tejun Heo
Reviewed-by: Levente Kurusa
Signed-off-by: Ben Hutchings
commit 56f1f4bb5770a1e7f92c0b631f4579973d271d71
Author: Xiangliang Yu
Date: Wed Mar 20 22:34:56 2013 -0600
PCI: Define macro for Marvell vendor ID
commit 8e7ee6f5dfb56a32da760d990be908ed35b1c5bf upstream.
Define PCI\_VENDOR\_ID\_MARVELL\_EXT macro for 0x1b4b vendor ID
Signed-off-by: Xiangliang Yu
Signed-off-by: Myron Stowe
Signed-off-by: Bjorn Helgaas
Signed-off-by: Ben Hutchings
commit 6b7cfe5a757a18cfb48311bb60e86b33b04c9394
Author: Alistair Popple
Date: Fri Nov 22 13:08:29 2013 +1100
ahci: add support for IBM Akebono platform device
commit 2435dcb98cfe13c246aa27df393e22bc24bbcd20 upstream.
The new IBM Akebono board has a PPC476GTR SoC with an AHCI compliant
SATA controller. This patch adds a compatible property for the new SoC
to the AHCI platform driver.
Signed-off-by: Alistair Popple
Signed-off-by: Tejun Heo
[bwh: Backported to 3.2: adjust context]
Signed-off-by: Ben Hutchings
commit fd7d0ba4df561f3906b10c676761d31cd7d28c79
Author: Junxiao Bi
Date: Thu Nov 21 14:31:56 2013 -0800
configfs: fix race between dentry put and lookup
commit 76ae281f6307331aa063288edb6422ae99f435f0 upstream.
A race window in configfs, it starts from one dentry is UNHASHED and end
before configfs\_d\_iput is called. In this window, if a lookup happen,
since the original dentry was UNHASHED, so a new dentry will be
allocated, and then in configfs\_attach\_attr(), sd->s\_dentry will be
updated to the new dentry. Then in configfs\_d\_iput(),
BUG\_ON(sd->s\_dentry != dentry) will be triggered and system panic.
sys\_open: sys\_close:
... fput
dput
dentry\_kill
\_\_d\_drop <--- dentry unhashed here,
but sd->dentry still point
to this dentry.
lookup\_real
configfs\_lookup
configfs\_attach\_attr---> update sd->s\_dentry
to new allocated dentry here.
d\_kill
configfs\_d\_iput <--- BUG\_ON(sd->s\_dentry != dentry)
triggered here.
To fix it, change configfs\_d\_iput to not update sd->s\_dentry if
sd->s\_count > 2, that means there are another dentry is using the sd
beside the one that is going to be put. Use configfs\_dirent\_lock in
configfs\_attach\_attr to sync with configfs\_d\_iput.
With the following steps, you can reproduce the bug.
1. enable ocfs2, this will mount configfs at /sys/kernel/config and
fill configure in it.
2. run the following script.
while [ 1 ]; do cat /sys/kernel/config/cluster/$your\_cluster\_name/idle\_timeout\_ms > /dev/null; done &
while [ 1 ]; do cat /sys/kernel/config/cluster/$your\_cluster\_name/idle\_timeout\_ms > /dev/null; done &
Signed-off-by: Junxiao Bi
Cc: Joel Becker
Cc: Al Viro
Signed-off-by: Andrew Morton
Signed-off-by: Linus Torvalds
Signed-off-by: Ben Hutchings
commit 47e67db4779d6fdb0d3a71283265a272d99af2b3
Author: Eric Seppanen
Date: Wed Nov 20 14:19:52 2013 -0800
iscsi-target: chap auth shouldn't match username with trailing garbage
commit 86784c6bdeeef78eed94d298be7a8879f6a97ee2 upstream.
In iSCSI negotiations with initiator CHAP enabled, usernames with
trailing garbage are permitted, because the string comparison only
checks the strlen of the configured username.
e.g. "usernameXXXXX" will be permitted to match "username".
Just check one more byte so the trailing null char is also matched.
Signed-off-by: Eric Seppanen
Signed-off-by: Nicholas Bellinger
[bwh: Backported to 3.2: adjust context]
Signed-off-by: Ben Hutchings
commit 6d8fcca06072afed5d917c980ac233abd4f03e0b
Author: Eric Seppanen
Date: Wed Nov 20 14:19:51 2013 -0800
iscsi-target: fix extract\_param to handle buffer length corner case
commit 369653e4fb511928511b0ce81f41c812ff1f28b6 upstream.
extract\_param() is called with max\_length set to the total size of the
output buffer. It's not safe to allow a parameter length equal to the
buffer size as the terminating null would be written one byte past the
end of the output buffer.
Signed-off-by: Eric Seppanen
Signed-off-by: Nicholas Bellinger
[bwh: Backported to 3.2: adjust context]
Signed-off-by: Ben Hutchings
commit 3bf4e8c8072d395099cde6f6f84b69ea015b70d8
Author: Michael Neuling
Date: Wed Nov 20 16:18:54 2013 +1100
powerpc/signals: Mark VSX not saved with small contexts
commit c13f20ac48328b05cd3b8c19e31ed6c132b44b42 upstream.
The VSX MSR bit in the user context indicates if the context contains VSX
state. Currently we set this when the process has touched VSX at any stage.
Unfortunately, if the user has not provided enough space to save the VSX state,
we can't save it but we currently still set the MSR VSX bit.
This patch changes this to clear the MSR VSX bit when the user doesn't provide
enough space. This indicates that there is no valid VSX state in the user
context.
This is needed to support get/set/make/swapcontext for applications that use
VSX but only provide a small context. For example, getcontext in glibc
provides a smaller context since the VSX registers don't need to be saved over
the glibc function call. But since the program calling getcontext may have
used VSX, the kernel currently says the VSX state is valid when it's not. If
the returned context is then used in setcontext (ie. a small context without
VSX but with MSR VSX set), the kernel will refuse the context. This situation
has been reported by the glibc community.
Based on patch from Carlos O'Donell.
Tested-by: Haren Myneni
Signed-off-by: Michael Neuling
Signed-off-by: Benjamin Herrenschmidt
Signed-off-by: Ben Hutchings
commit 36d04a55f34ab580aab001e497b97410f0ad5079
Author: Anton Blanchard
Date: Sun Nov 17 11:39:05 2013 +1100
powerpc/pseries: Duplicate dtl entries sometimes sent to userspace
commit 84b073868b9d9e754ae48b828337633d1b386482 upstream.
When reading from the dispatch trace log (dtl) userspace interface, I
sometimes see duplicate entries. One example:
# hexdump -C dtl.out
00000000 07 04 00 0c 00 00 48 44 00 00 00 00 00 00 00 00
00000010 00 0c a0 b4 16 83 6d 68 00 00 00 00 00 00 00 00
00000020 00 00 00 00 10 00 13 50 80 00 00 00 00 00 d0 32
00000030 07 04 00 0c 00 00 48 44 00 00 00 00 00 00 00 00
00000040 00 0c a0 b4 16 83 6d 68 00 00 00 00 00 00 00 00
00000050 00 00 00 00 10 00 13 50 80 00 00 00 00 00 d0 32
The problem is in scan\_dispatch\_log() where we call dtl\_consumer()
but bail out before incrementing the index.
To fix this I moved dtl\_consumer() after the timebase comparison.
Signed-off-by: Anton Blanchard
Signed-off-by: Benjamin Herrenschmidt
[bwh: Backported to 3.2: adjust context]
Signed-off-by: Ben Hutchings
commit 22007773be6c56f9ad1891f3e680996f72386063
Author: Yinghai Lu
Date: Mon Nov 18 17:02:45 2013 -0700
PCI: Remove duplicate pci\_disable\_device() from pcie\_portdrv\_remove()
commit e7cc5cf74544d97d7b69e2701595037474db1f96 upstream.
The pcie\_portdrv .probe() method calls pci\_enable\_device() once, in
pcie\_port\_device\_register(), but the .remove() method calls
pci\_disable\_device() twice, in pcie\_port\_device\_remove() and in
pcie\_portdrv\_remove().
That causes a "disabling already-disabled device" warning when removing a
PCIe port device. This happens all the time when removing Thunderbolt
devices, but is also easy to reproduce with, e.g.,
"echo 0000:00:1c.3 > /sys/bus/pci/drivers/pcieport/unbind"
This patch removes the disable from pcie\_portdrv\_remove().
[bhelgaas: changelog, tag for stable]
Reported-by: David Bulkow
Reported-by: Mika Westerberg
Signed-off-by: Yinghai Lu
Signed-off-by: Bjorn Helgaas
Signed-off-by: Ben Hutchings
commit 3b327af6ff9f42a44ee4690860b34b76308d90e4
Author: Trond Myklebust
Date: Tue Nov 19 16:34:14 2013 -0500
NFSv4: Update list of irrecoverable errors on DELEGRETURN
commit c97cf606e43b85a6cf158b810375dd77312024db upstream.
If the DELEGRETURN errors out with something like NFS4ERR\_BAD\_STATEID
then there is no recovery possible. Just quit without returning an error.
Also, note that the client must not assume that the NFSv4 lease has been
renewed when it sees an error on DELEGRETURN.
Signed-off-by: Trond Myklebust
Signed-off-by: Ben Hutchings
commit a687a58fd0fa69d405d777eba5f23a0c00cce2e7
Author: Andy Adamson
Date: Fri Nov 15 16:36:16 2013 -0500
NFSv4 wait on recovery for async session errors
commit 4a82fd7c4e78a1b7a224f9ae8bb7e1fd95f670e0 upstream.
When the state manager is processing the NFS4CLNT\_DELEGRETURN flag, session
draining is off, but DELEGRETURN can still get a session error.
The async handler calls nfs4\_schedule\_session\_recovery returns -EAGAIN, and
the DELEGRETURN done then restarts the RPC task in the prepare state.
With the state manager still processing the NFS4CLNT\_DELEGRETURN flag with
session draining off, these DELEGRETURNs will cycle with errors filling up the
session slots.
This prevents OPEN reclaims (from nfs\_delegation\_claim\_opens) required by the
NFS4CLNT\_DELEGRETURN state manager processing from completing, hanging the
state manager in the \_\_rpc\_wait\_for\_completion\_task in nfs4\_run\_open\_task
as seen in this kernel thread dump:
kernel: 4.12.32.53-ma D 0000000000000000 0 3393 2 0x00000000
kernel: ffff88013995fb60 0000000000000046 ffff880138cc5400 ffff88013a9df140
kernel: ffff8800000265c0 ffffffff8116eef0 ffff88013fc10080 0000000300000001
kernel: ffff88013a4ad058 ffff88013995ffd8 000000000000fbc8 ffff88013a4ad058
kernel: Call Trace:
kernel: [] ? cache\_alloc\_refill+0x1c0/0x240
kernel: [] ? rpc\_wait\_bit\_killable+0x0/0xa0 [sunrpc]
kernel: [] rpc\_wait\_bit\_killable+0x42/0xa0 [sunrpc]
kernel: [] \_\_wait\_on\_bit+0x5f/0x90
kernel: [] ? rpc\_wait\_bit\_killable+0x0/0xa0 [sunrpc]
kernel: [] out\_of\_line\_wait\_on\_bit+0x78/0x90
kernel: [] ? wake\_bit\_function+0x0/0x50
kernel: [] \_\_rpc\_wait\_for\_completion\_task+0x2d/0x30 [sunrpc]
kernel: [] nfs4\_run\_open\_task+0x11c/0x160 [nfs]
kernel: [] nfs4\_open\_recover\_helper+0x87/0x120 [nfs]
kernel: [] nfs4\_open\_recover+0xc6/0x150 [nfs]
kernel: [] ? nfs4\_open\_recoverdata\_alloc+0x2f/0x60 [nfs]
kernel: [] nfs4\_open\_delegation\_recall+0x6a/0xa0 [nfs]
kernel: [] nfs\_end\_delegation\_return+0x120/0x2e0 [nfs]
kernel: [] ? queue\_work+0x1f/0x30
kernel: [] nfs\_client\_return\_marked\_delegations+0xd7/0x110 [nfs]
kernel: [] nfs4\_run\_state\_manager+0x548/0x620 [nfs]
kernel: [] ? nfs4\_run\_state\_manager+0x0/0x620 [nfs]
kernel: [] kthread+0x96/0xa0
kernel: [] child\_rip+0xa/0x20
kernel: [] ? kthread+0x0/0xa0
kernel: [] ? child\_rip+0x0/0x20
The state manager can not therefore process the DELEGRETURN session errors.
Change the async handler to wait for recovery on session errors.
Signed-off-by: Andy Adamson
Signed-off-by: Trond Myklebust
[bwh: Backported to 3.2:
- Adjust context
- There's no restart\_call label]
Signed-off-by: Ben Hutchings
commit 1c7fd3120a35b27aad3ed7b2a6e72714938c4e66
Author: Andreas Bießmann
Date: Thu Oct 24 12:31:04 2013 +0200
avr32: fix out-of-range jump in large kernels
commit d617b338bbfdd77e9cbd8e7dc949cee3dd73d575 upstream.
This patch fixes following error (for big kernels):
---8<---
arch/avr32/boot/u-boot/head.o: In function `no\_tag\_table':
(.init.text+0x44): relocation truncated to fit: R\_AVR32\_22H\_PCREL against symbol `panic' defined in .text.unlikely section in kernel/built-in.o
arch/avr32/kernel/built-in.o: In function `bad\_return':
(.ex.text+0x236): relocation truncated to fit: R\_AVR32\_22H\_PCREL against symbol `panic' defined in .text.unlikely section in kernel/built-in.o
--->8---
It comes up when the kernel increases and 'panic()' is too far away to fit in
the +/- 2MiB range. Which in turn issues from the 21-bit displacement in
'br{cond4}' mnemonic which is one of the two ways to do jumps (rjmp has just
10-bit displacement and therefore a way smaller range). This fact was stated
before in 8d29b7b9f81d6b83d869ff054e6c189d6da73f1f.
One solution to solve this is to add a local storage for the symbol address
and just load the $pc with that value.
Signed-off-by: Andreas Bießmann
Acked-by: Hans-Christian Egtvedt
Cc: Haavard Skinnemoen
Signed-off-by: Ben Hutchings
commit 3f308887de69a2fbb30d0c715edba4bf2fbfb49e
Author: Andreas Bießmann
Date: Thu Oct 24 12:31:03 2013 +0200
avr32: setup crt for early panic()
commit 7a2a74f4b856993218aa7cdeeb6c3103101340db upstream.
Before the CRT was (fully) set up in kernel\_entry (bss cleared before in
\_start, but also not before jump to panic() in no\_tag\_table case).
This patch fixes this up to have a fully working CRT when branching to panic()
in no\_tag\_table.
Signed-off-by: Andreas Bießmann
Acked-by: Hans-Christian Egtvedt
Cc: Haavard Skinnemoen
Signed-off-by: Ben Hutchings
commit bca06620c941f2427f13710e330adcef1cf30007
Author: J. Bruce Fields
Date: Tue Nov 19 17:32:43 2013 -0500
nfsd4: fix xdr decoding of large non-write compounds
commit 365da4adebb1c012febf81019ad3dc5bb52e2a13 upstream.
This fixes a regression from 247500820ebd02ad87525db5d9b199e5b66f6636
"nfsd4: fix decoding of compounds across page boundaries". The previous
code was correct: argp->pagelist is initialized in
nfs4svc\_deocde\_compoundargs to rqstp->rq\_arg.pages, and is therefore a
pointer to the page \*after\* the page we are currently decoding.
The reason that patch nevertheless fixed a problem with decoding
compounds containing write was a bug in the write decoding introduced by
5a80a54d21c96590d013378d8c5f65f879451ab4 "nfsd4: reorganize write
decoding", after which write decoding no longer adhered to the rule that
argp->pagelist point to the next page.
Signed-off-by: J. Bruce Fields
[bwh: Backported to 3.2: adjust context; there is only one instance to fix]
Signed-off-by: Ben Hutchings
commit 9bbbbf7ff19de7a05190217a62e9f599f18ecd7d
Author: Christoph Hellwig
Date: Mon Nov 18 05:07:47 2013 -0800
nfsd: make sure to balance get/put\_write\_access
commit 987da4791052fa298b7cfcde4dea9f6f2bbc786b upstream.
Use a straight goto error label style in nfsd\_setattr to make sure
we always do the put\_write\_access call after we got it earlier.
Note that the we have been failing to do that in the case
nfsd\_break\_lease() returns an error, a bug introduced into 2.6.38 with
6a76bebefe15d9a08864f824d7f8d5beaf37c997 "nfsd4: break lease on nfsd
setattr".
Signed-off-by: Christoph Hellwig
Signed-off-by: J. Bruce Fields
[bwh: Backported to 3.2: notify\_change() takes only 2 arguments]
Signed-off-by: Ben Hutchings
commit 31b5291df068fd1e3009f44da8f61c39ae8d9ab0
Author: Christoph Hellwig
Date: Mon Nov 18 05:07:30 2013 -0800
nfsd: split up nfsd\_setattr
commit 818e5a22e907fbae75e9c1fd78233baec9fa64b6 upstream.
Split out two helpers to make the code more readable and easier to verify
for correctness.
Signed-off-by: Christoph Hellwig
Signed-off-by: J. Bruce Fields
[bwh: Backported to 3.2: s/umode\_t/int/]
Signed-off-by: Ben Hutchings
commit 40715dd3c93ca914d749d56ad3e3df0748e28f48
Author: Mikulas Patocka
Date: Fri Nov 15 16:12:20 2013 -0500
dm delay: fix a possible deadlock due to shared workqueue
commit 718822c1c112dc99e0c72c8968ee1db9d9d910f0 upstream.
The dm-delay target uses a shared workqueue for multiple instances. This
can cause deadlock if two or more dm-delay targets are stacked on the top
of each other.
This patch changes dm-delay to use a per-instance workqueue.
Signed-off-by: Mikulas Patocka
Signed-off-by: Mike Snitzer
Signed-off-by: Ben Hutchings
commit baf48b7f96f5cd7f8b510dba67bcbdf96df296ff
Author: Steve French
Date: Fri Nov 15 20:41:32 2013 -0600
setfacl removes part of ACL when setting POSIX ACLs to Samba
commit b1d93356427be6f050dc55c86eb019d173700af6 upstream.
setfacl over cifs mounts can remove the default ACL when setting the
(non-default part of) the ACL and vice versa (we were leaving at 0
rather than setting to -1 the count field for the unaffected
half of the ACL. For example notice the setfacl removed
the default ACL in this sequence:
steven@steven-GA-970A-DS3:~/cifs-2.6$ getfacl /mnt/test-dir ; setfacl
-m default:user:test:rwx,user:test:rwx /mnt/test-dir
getfacl: Removing leading '/' from absolute path names
user::rwx
group::r-x
other::r-x
default:user::rwx
default:user:test:rwx
default:group::r-x
default:mask::rwx
default:other::r-x
steven@steven-GA-970A-DS3:~/cifs-2.6$ getfacl /mnt/test-dir
getfacl: Removing leading '/' from absolute path names
user::rwx
user:test:rwx
group::r-x
mask::rwx
other::r-x
Signed-off-by: Steve French
Acked-by: Jeremy Allison
[bwh: Backported to 3.2: adjust context]
Signed-off-by: Ben Hutchings
commit c9cc1d7f04d2dfb034162b9a21d2183c1b302501
Author: Jerome Glisse
Date: Tue Nov 12 10:51:16 2013 -0500
radeon: workaround pinning failure on low ram gpu
commit 97b6ff6be9da7675aab339334fda996d6c5077d9 upstream.
GPU with low amount of ram can fails at pinning new framebuffer before
unpinning old one. On such failure, retry with unpinning old one before
pinning new one allowing to work around the issue. This is somewhat
ugly but only affect those old GPU we care about.
Signed-off-by: Jerome Glisse
Signed-off-by: Alex Deucher
Signed-off-by: Ben Hutchings
commit d5f5d50e583b1e4de2dc420baf69bbf386225de0
Author: Larry Finger
Date: Sun Nov 10 22:11:16 2013 -0600
rtlwifi: rtl8192cu: Fix more pointer arithmetic errors
commit eafbdde9c5629bea58df07275c5917eb42afbbe7 upstream.
This driver uses a number of macros to get and set various fields in the
RX and TX descriptors. To work correctly, a u8 pointer to the descriptor
must be used; however, in some cases a descriptor structure pointer is used
instead. In addition, a duplicated statement is removed.
Signed-off-by: Larry Finger
Reported-by: Mark Cave-Ayland
Signed-off-by: John W. Linville
Signed-off-by: Ben Hutchings
commit 145569875a7bfadf98574d87ac80b8c68f0b44f2
Author: Daniel Vetter
Date: Mon Nov 4 08:13:45 2013 +0100
drm/i915: flush cursors harder
commit b2ea8ef559b4d94190009f3651b5b3ab7c05afd3 upstream.
Apparently they need the same treatment as primary planes. This fixes
modesetting failures because of stuck cursors (!) on Thomas' i830M
machine.
I've figured while at it I'll also roll it out for the ivb 3 pipe
version of this function. I didn't do this for i845/i865 since Bspec
says the update mechanism works differently, and there's some
additional rules about what can be updated in which order.
Tested-by: Thomas Richter
Cc: Thomas Richter
Cc: Ville Syrjälä
Signed-off-by: Daniel Vetter
Signed-off-by: Ben Hutchings
commit f35b19b0a1f3cd9e4e308e3848ee67b5acf95ee3
Author: Guenter Roeck
Date: Fri Nov 15 10:40:38 2013 +0100
hwmon: (lm90) Fix max6696 alarm handling
commit e41fae2b1ed8c78283d73651cd65be0228c0dd1c upstream.
Bit 2 of status register 2 on MAX6696 (external diode 2 open)
sets ALERT; the bit thus has to be listed in alert\_alarms.
Also display a message in the alert handler if the condition
is encountered.
Even though not all overtemperature conditions cause ALERT
to be set, we should not ignore them in the alert handler.
Display messages for all out-of-range conditions.
Reported-by: Jean Delvare
Signed-off-by: Guenter Roeck
Signed-off-by: Jean Delvare
Signed-off-by: Ben Hutchings
commit 41e8cbd9240c43424a698495eab0acbfe096203e
Author: Jonathan Austin
Date: Thu Aug 29 18:41:11 2013 +0100
ARM: integrator\_cp: Set LCD{0,1} enable lines when turning on CLCD
commit 30aeadd44deea3f3b0df45b9a70ee0fd5f8d6dc2 upstream.
This turns on the internal integrator LCD display(s). It seems that the code
to do this got lost in refactoring of the CLCD driver.
Signed-off-by: Jonathan Austin
Acked-by: Linus Walleij
Signed-off-by: Olof Johansson
Signed-off-by: Ben Hutchings
commit ad308321f9f96de08e776deb8ad16e9ff87276eb
Author: Takashi Iwai
Date: Thu Nov 14 15:45:12 2013 +0100
ALSA: pcsp: Fix the order of input device unregistration
commit 6408eac2665955343cd0e4bcd7d6237ce39611ed upstream.
The current code may access to the already freed object. The input
device must be accessed and unregistered before freeing the top level
sound object.
Signed-off-by: Takashi Iwai
[bwh: Backported to 3.2: adjust context]
Signed-off-by: Ben Hutchings
commit a6c07367f2ccb25a96a76ba26c8a2d54f9469ecc
Author: Ben Skeggs
Date: Wed Nov 13 15:18:32 2013 +1000
drm/nouveau: when bailing out of a pushbuf ioctl, do not remove previous fence
commit 9360bd1112d8874d21942e2ae74f5416b00a8db6 upstream.
Signed-off-by: Ben Skeggs
Signed-off-by: Ben Hutchings
commit f2414ee66a2901b376845bfec33f33b2a79fd004
Author: Mathias Krause
Date: Tue Nov 12 15:11:47 2013 -0800
ipc, msg: fix message length check for negative values
commit 4e9b45a19241354daec281d7a785739829b52359 upstream.
On 64 bit systems the test for negative message sizes is bogus as the
size, which may be positive when evaluated as a long, will get truncated
to an int when passed to load\_msg(). So a long might very well contain a
positive value but when truncated to an int it would become negative.
That in combination with a small negative value of msg\_ctlmax (which will
be promoted to an unsigned type for the comparison against msgsz, making
it a big positive value and therefore make it pass the check) will lead to
two problems: 1/ The kmalloc() call in alloc\_msg() will allocate a too
small buffer as the addition of alen is effectively a subtraction. 2/ The
copy\_from\_user() call in load\_msg() will first overflow the buffer with
userland data and then, when the userland access generates an access
violation, the fixup handler copy\_user\_handle\_tail() will try to fill the
remainder with zeros -- roughly 4GB. That almost instantly results in a
system crash or reset.
,-[ Reproducer (needs to be run as root) ]--
| #include
| #include
| #include
| #include
|
| int main(void) {
| long msg = 1;
| int fd;
|
| fd = open("/proc/sys/kernel/msgmax", O\_WRONLY);
| write(fd, "-1", 2);
| close(fd);
|
| msgsnd(0, &msg, 0xfffffff0, IPC\_NOWAIT);
|
| return 0;
| }
'---
Fix the issue by preventing msgsz from getting truncated by consistently
using size\_t for the message length. This way the size checks in
do\_msgsnd() could still be passed with a negative value for msg\_ctlmax but
we would fail on the buffer allocation in that case and error out.
Also change the type of m\_ts from int to size\_t to avoid similar nastiness
in other code paths -- it is used in similar constructs, i.e. signed vs.
unsigned checks. It should never become negative under normal
circumstances, though.
Setting msg\_ctlmax to a negative value is an odd configuration and should
be prevented. As that might break existing userland, it will be handled
in a separate commit so it could easily be reverted and reworked without
reintroducing the above described bug.
Hardening mechanisms for user copy operations would have catched that bug
early -- e.g. checking slab object sizes on user copy operations as the
usercopy feature of the PaX patch does. Or, for that matter, detect the
long vs. int sign change due to truncation, as the size overflow plugin
of the very same patch does.
[akpm@linux-foundation.org: fix i386 min() warnings]
Signed-off-by: Mathias Krause
Cc: Pax Team
Cc: Davidlohr Bueso
Cc: Brad Spengler
Cc: Manfred Spraul
Signed-off-by: Andrew Morton
Signed-off-by: Linus Torvalds
[bwh: Backported to 3.2:
- Adjust context
- Drop changes to alloc\_msg() and copy\_msg(), which don't exist]
Signed-off-by: Ben Hutchings
commit 5967d03f7124b03aaa32bc24f72f32dd54226d41
Author: Ilija Hadzic
Date: Tue Nov 12 15:11:45 2013 -0800
devpts: plug the memory leak in kill\_sb
commit 66da0e1f9034140ae2f571ef96e254a25083906c upstream.
When devpts is unmounted, there may be a no-longer-used IDR tree hanging
off the superblock we are about to kill. This needs to be cleaned up
before destroying the SB.
The leak is usually not a big deal because unmounting devpts is typically
done when shutting down the whole machine. However, shutting down an LXC
container instead of a physical machine exposes the problem (the garbage
is detectable with kmemleak).
Signed-off-by: Ilija Hadzic
Cc: Sukadev Bhattiprolu
Signed-off-by: Andrew Morton
Signed-off-by: Linus Torvalds
Signed-off-by: Ben Hutchings
commit 983e0bc2210a853af015841de33a06abd873a4fe
Author: Kees Cook
Date: Tue Nov 12 15:11:17 2013 -0800
exec/ptrace: fix get\_dumpable() incorrect tests
commit d049f74f2dbe71354d43d393ac3a188947811348 upstream.
The get\_dumpable() return value is not boolean. Most users of the
function actually want to be testing for non-SUID\_DUMP\_USER(1) rather than
SUID\_DUMP\_DISABLE(0). The SUID\_DUMP\_ROOT(2) is also considered a
protected state. Almost all places did this correctly, excepting the two
places fixed in this patch.
Wrong logic:
if (dumpable == SUID\_DUMP\_DISABLE) { /\* be protective \*/ }
or
if (dumpable == 0) { /\* be protective \*/ }
or
if (!dumpable) { /\* be protective \*/ }
Correct logic:
if (dumpable != SUID\_DUMP\_USER) { /\* be protective \*/ }
or
if (dumpable != 1) { /\* be protective \*/ }
Without this patch, if the system had set the sysctl fs/suid\_dumpable=2, a
user was able to ptrace attach to processes that had dropped privileges to
that user. (This may have been partially mitigated if Yama was enabled.)
The macros have been moved into the file that declares get/set\_dumpable(),
which means things like the ia64 code can see them too.
CVE-2013-2929
Reported-by: Vasily Kulikov
Signed-off-by: Kees Cook
Cc: "Luck, Tony"
Cc: Oleg Nesterov
Cc: "Eric W. Biederman"
Signed-off-by: Andrew Morton
Signed-off-by: Linus Torvalds
[bwh: Backported to 3.2: adjust context]
Signed-off-by: Ben Hutchings
commit fa01206912e5bc7c48e0a89d0da820062b018854
Author: Johan Hovold
Date: Tue Nov 12 15:09:39 2013 -0800
backlight: atmel-pwm-bl: fix gpio polarity in remove
commit ad5066d4c2b1d696749f8d7816357c23b648c4d3 upstream.
Make sure to honour gpio polarity also at remove so that the backlight is
actually disabled on boards with active-low enable pin.
Signed-off-by: Johan Hovold
Acked-by: Jingoo Han
Signed-off-by: Andrew Morton
Signed-off-by: Linus Torvalds
[bwh: Backported to 3.2: adjust context]
Signed-off-by: Ben Hutchings
commit 281f5afc26c7d7604685c8c1d686154f3354a5d1
Author: Johan Hovold
Date: Tue Nov 12 15:09:38 2013 -0800
backlight: atmel-pwm-bl: fix reported brightness
commit 185d91442550110db67a7dc794a32efcea455a36 upstream.
The driver supports 16-bit brightness values, but the value returned
from get\_brightness was truncated to eight bits.
Signed-off-by: Johan Hovold
Cc: Jingoo Han
Signed-off-by: Andrew Morton
Signed-off-by: Linus Torvalds
Signed-off-by: Ben Hutchings
commit 373dcf178f11e09037edea51478f8340dcb583e3
Author: Ryan Mallon
Date: Tue Nov 12 15:08:51 2013 -0800
vsprintf: check real user/group id for %pK
commit 312b4e226951f707e120b95b118cbc14f3d162b2 upstream.
Some setuid binaries will allow reading of files which have read
permission by the real user id. This is problematic with files which
use %pK because the file access permission is checked at open() time,
but the kptr\_restrict setting is checked at read() time. If a setuid
binary opens a %pK file as an unprivileged user, and then elevates
permissions before reading the file, then kernel pointer values may be
leaked.
This happens for example with the setuid pppd application on Ubuntu 12.04:
$ head -1 /proc/kallsyms
00000000 T startup\_32
$ pppd file /proc/kallsyms
pppd: In file /proc/kallsyms: unrecognized option 'c1000000'
This will only leak the pointer value from the first line, but other
setuid binaries may leak more information.
Fix this by adding a check that in addition to the current process having
CAP\_SYSLOG, that effective user and group ids are equal to the real ids.
If a setuid binary reads the contents of a file which uses %pK then the
pointer values will be printed as NULL if the real user is unprivileged.
Update the sysctl documentation to reflect the changes, and also correct
the documentation to state the kptr\_restrict=0 is the default.
This is a only temporary solution to the issue. The correct solution is
to do the permission check at open() time on files, and to replace %pK
with a function which checks the open() time permission. %pK uses in
printk should be removed since no sane permission check can be done, and
instead protected by using dmesg\_restrict.
Signed-off-by: Ryan Mallon
Cc: Kees Cook
Cc: Alexander Viro
Cc: Joe Perches
Cc: "Eric W. Biederman"
Signed-off-by: Andrew Morton
Signed-off-by: Linus Torvalds
[bwh: Backported to 3.2:
- Adjust context
- Compare ids directly instead of using {uid,gid}\_eq()]
Signed-off-by: Ben Hutchings
commit faf9abb6ece3e058e7e78db2af8182ae09be8491
Author: Mauro Carvalho Chehab
Date: Tue Nov 12 15:06:49 2013 -0800
cris: media platform drivers: fix build
commit 72a0c5571351f5184195754d23db3e14495b2080 upstream.
On cris arch, the functions below aren't defined:
drivers/media/platform/sh\_veu.c: In function 'sh\_veu\_reg\_read':
drivers/media/platform/sh\_veu.c:228:2: error: implicit declaration of function 'ioread32' [-Werror=implicit-function-declaration]
drivers/media/platform/sh\_veu.c: In function 'sh\_veu\_reg\_write':
drivers/media/platform/sh\_veu.c:234:2: error: implicit declaration of function 'iowrite32' [-Werror=implicit-function-declaration]
drivers/media/platform/vsp1/vsp1.h: In function 'vsp1\_read':
drivers/media/platform/vsp1/vsp1.h:66:2: error: implicit declaration of function 'ioread32' [-Werror=implicit-function-declaration]
drivers/media/platform/vsp1/vsp1.h: In function 'vsp1\_write':
drivers/media/platform/vsp1/vsp1.h:71:2: error: implicit declaration of function 'iowrite32' [-Werror=implicit-function-declaration]
drivers/media/platform/vsp1/vsp1.h: In function 'vsp1\_read':
drivers/media/platform/vsp1/vsp1.h:66:2: error: implicit declaration of function 'ioread32' [-Werror=implicit-function-declaration]
drivers/media/platform/vsp1/vsp1.h: In function 'vsp1\_write':
drivers/media/platform/vsp1/vsp1.h:71:2: error: implicit declaration of function 'iowrite32' [-Werror=implicit-function-declaration]
drivers/media/platform/soc\_camera/rcar\_vin.c: In function 'rcar\_vin\_setup':
drivers/media/platform/soc\_camera/rcar\_vin.c:284:3: error: implicit declaration of function 'iowrite32' [-Werror=implicit-function-declaration]
drivers/media/platform/soc\_camera/rcar\_vin.c: In function 'rcar\_vin\_request\_capture\_stop':
drivers/media/platform/soc\_camera/rcar\_vin.c:353:2: error: implicit declaration of function 'ioread32' [-Werror=implicit-function-declaration]
Yet, they're available, as CONFIG\_GENERIC\_IOMAP is defined. What happens
is that asm/io.h was not including asm-generic/iomap.h.
Suggested-by: Ben Hutchings
Signed-off-by: Mauro Carvalho Chehab
Cc: Mikael Starvik
Cc: Jesper Nilsson
Signed-off-by: Andrew Morton
Signed-off-by: Linus Torvalds
Signed-off-by: Ben Hutchings
commit 43f8e23a88f7ac34ec4b92086d78772766c59495
Author: Thomas Renninger
Date: Tue Nov 12 17:39:43 2013 +0100
x86/microcode/amd: Tone down printk(), don't treat a missing firmware file as an error
commit 11f918d3e2d3861b6931e97b3aa778e4984935aa upstream.
Do it the same way as done in microcode\_intel.c: use pr\_debug()
for missing firmware files.
There seem to be CPUs out there for which no microcode update
has been submitted to kernel-firmware repo yet resulting in
scary sounding error messages in dmesg:
microcode: failed to load file amd-ucode/microcode\_amd\_fam16h.bin
Signed-off-by: Thomas Renninger
Acked-by: Borislav Petkov
Link: http://lkml.kernel.org/r/1384274383-43510-1-git-send-email-trenn@suse.de
Signed-off-by: Ingo Molnar
Signed-off-by: Ben Hutchings
commit 5c7fd2a8b7e2dc5a3cc585aa4079f655ca0402d5
Author: Takashi Iwai
Date: Tue Nov 12 08:06:20 2013 +0100
ALSA: msnd: Avoid duplicated driver name
commit 092f9cd16aac7d054af1755c945f37c1b33399e6 upstream.
msnd\_pinnacle.c is used for both snd-msnd-pinnacle and
snd-msnd-classic drivers, and both should have different driver
names. Using the same driver name results in the sysfs warning for
duplicated entries like
kobject: 'msnd-pinnacle.7' (cec33408): kobject\_release, parent (null) (delayed)
kobject: 'msnd-pinnacle' (cecd4980): kobject\_release, parent cf3ad9b0 (delayed)
------------[ cut here ]------------
WARNING: CPU: 0 PID: 1 at fs/sysfs/dir.c:486 sysfs\_warn\_dup+0x7d/0xa0()
sysfs: cannot create duplicate filename '/bus/isa/drivers/msnd-pinnacle'
......
Reported-by: Fengguang Wu
Signed-off-by: Takashi Iwai
Signed-off-by: Ben Hutchings
commit 1a59149d07ae9d87bce045d780d35c827c12654d
Author: Dan Williams
Date: Fri Nov 8 13:39:44 2013 -0600
prism54: set netdev type to "wlan"
commit 8e3ffa471091c560deb6738ed9ab7445b7a5fd04 upstream.
Userspace uses the netdev devtype for stuff like device naming and type
detection. Be nice and set it. Remove the pointless #if/#endif around
SET\_NETDEV\_DEV too.
Signed-off-by: Dan Williams
Signed-off-by: John W. Linville
Signed-off-by: Ben Hutchings
commit 425b0e67595dcbc20bc5b1a2a92ad0965754629c
Author: Huang Shijie
Date: Mon Nov 11 12:13:45 2013 +0800
mtd: gpmi: fix kernel BUG due to racing DMA operations
commit 7b3d2fb92067bcb29f0f085a9fa9fa64920a6646 upstream.
[1] The gpmi uses the nand\_command\_lp to issue the commands to NAND chips.
The gpmi issues a DMA operation with gpmi\_cmd\_ctrl when it handles
a NAND\_CMD\_NONE control command. So when we read a page(NAND\_CMD\_READ0)
from the NAND, we may send two DMA operations back-to-back.
If we do not serialize the two DMA operations, we will meet a bug when
1.1) we enable CONFIG\_DMA\_API\_DEBUG, CONFIG\_DMADEVICES\_DEBUG,
and CONFIG\_DEBUG\_SG.
1.2) Use the following commands in an UART console and a SSH console:
cmd 1: while true;do dd if=/dev/mtd0 of=/dev/null;done
cmd 1: while true;do dd if=/dev/mmcblk0 of=/dev/null;done
The kernel log shows below:
-----------------------------------------------------------------
kernel BUG at lib/scatterlist.c:28!
Unable to handle kernel NULL pointer dereference at virtual address 00000000
.........................
[<80044a0c>] (\_\_bug+0x18/0x24) from [<80249b74>] (sg\_next+0x48/0x4c)
[<80249b74>] (sg\_next+0x48/0x4c) from [<80255398>] (debug\_dma\_unmap\_sg+0x170/0x1a4)
[<80255398>] (debug\_dma\_unmap\_sg+0x170/0x1a4) from [<8004af58>] (dma\_unmap\_sg+0x14/0x6c)
[<8004af58>] (dma\_unmap\_sg+0x14/0x6c) from [<8027e594>] (mxs\_dma\_tasklet+0x18/0x1c)
[<8027e594>] (mxs\_dma\_tasklet+0x18/0x1c) from [<8007d444>] (tasklet\_action+0x114/0x164)
-----------------------------------------------------------------
1.3) Assume the two DMA operations is X (first) and Y (second).
The root cause of the bug:
Assume process P issues DMA X, and sleep on the completion
@this->dma\_done. X's tasklet callback is dma\_irq\_callback. It firstly
wake up the process sleeping on the completion @this->dma\_done,
and then trid to unmap the scatterlist S. The waked process P will
issue Y in another ARM core. Y initializes S->sg\_magic to zero
with sg\_init\_one(), while dma\_irq\_callback is unmapping S at the same
time.
See the diagram:
ARM core 0 | ARM core 1
-------------------------------------------------------------
(P issues DMA X, then sleep) --> |
|
(X's tasklet wakes P) --> |
|
| <-- (P begin to issue DMA Y)
|
(X's tasklet unmap the |
scatterlist S with dma\_unmap\_sg) --> | <-- (Y calls sg\_init\_one() to init
| scatterlist S)
|
[2] This patch serialize both the X and Y in the following way:
Unmap the DMA scatterlist S firstly, and wake up the process at the end
of the DMA callback, in such a way, Y will be executed after X.
After this patch:
ARM core 0 | ARM core 1
-------------------------------------------------------------
(P issues DMA X, then sleep) --> |
|
(X's tasklet unmap the |
scatterlist S with dma\_unmap\_sg) --> |
|
(X's tasklet wakes P) --> |
|
| <-- (P begin to issue DMA Y)
|
| <-- (Y calls sg\_init\_one() to init
| scatterlist S)
|
Signed-off-by: Huang Shijie
Signed-off-by: Brian Norris
Signed-off-by: Ben Hutchings
commit feb8633cb1169a294c7c9bbefa0d3a442b48c31a
Author: Avinash Patil
Date: Tue Nov 5 15:01:44 2013 -0800
mwifiex: correct packet length for packets from SDIO interface
commit d03b4aa77e1187b77dfe37d14a923547f00baa66 upstream.
While receiving a packet on SDIO interface, we allocate skb with
size multiple of SDIO block size. We need to resize this skb
after RX using packet length from RX header.
Signed-off-by: Avinash Patil
Signed-off-by: Bing Zhao
Signed-off-by: John W. Linville
Signed-off-by: Ben Hutchings
commit 0b778af8a6a94450f86195fafc37724bac8f8282
Author: Larry Finger
Date: Tue Nov 5 15:15:30 2013 -0600
rtlwifi: rtl8192de: Fix incorrect signal strength for unassociated AP
commit 3545f3d5f4af715c914394123ce7725a9cf0a1c4 upstream.
The routine that processes received frames was returning the RSSI value for the
signal strength; however, that value is available only for associated APs. As
a result, the strength was the absurd value of 10 dBm. As a result, scans
return incorrect values for the strength, which causes unwanted attempts to roam.
Signed-off-by: Larry Finger
Signed-off-by: John W. Linville
[bwh: Backported to 3.2: adjust context]
Signed-off-by: Ben Hutchings
commit 44025275e695973553af7b2a1a60f11ba913752c
Author: Larry Finger
Date: Tue Nov 5 15:15:29 2013 -0600
rtlwifi: rtl8192cu: Fix incorrect signal strength for unassociated AP
commit 78dbfecb95be4635b995af3bd29fa10013409fcd upstream.
The routine that processes received frames was returning the RSSI value for the
signal strength; however, that value is available only for associated APs. As
a result, the strength was the absurd value of 10 dBm. As a result, scans
return incorrect values for the strength, which causes unwanted attempts to roam.
Signed-off-by: Larry Finger
Signed-off-by: John W. Linville
[bwh: Backported to 3.2: adjust context]
Signed-off-by: Ben Hutchings
commit dec25887508d356601982d1993da0e36a135d2b4
Author: Larry Finger
Date: Tue Nov 5 15:15:28 2013 -0600
rtlwifi: rtl8192se: Fix incorrect signal strength for unassociated AP
commit b4ade797668e33b4e8353c2701ce01d7084dfafa upstream.
The routine that processes received frames was returning the RSSI value for the
signal strength; however, that value is available only for associated APs. As
a result, the strength was the absurd value of 10 dBm. As a result, scans
return incorrect values for the strength, which causes unwanted attempts to roam.
This patch fixes https://bugzilla.kernel.org/show\_bug.cgi?id=63881.
Signed-off-by: Larry Finger
Reported-by: Matthieu Baerts
Signed-off-by: John W. Linville
[bwh: Backported to 3.2: adjust context]
Signed-off-by: Ben Hutchings
commit 8e1028cb190c079976dd2dd8af63142ba28fc532
Author: Mark Cave-Ayland
Date: Sat Nov 2 14:28:35 2013 -0500
rtlwifi: Fix endian error in extracting packet type
commit 0c5d63f0ab6728f05ddefa25aff55e31297f95e6 upstream.
All of the rtlwifi drivers have an error in the routine that tests if
the data is "special". If it is, the subsequant transmission will be
at the lowest rate to enhance reliability. The 16-bit quantity is
big-endian, but was being extracted in native CPU mode. One of the
effects of this bug is to inhibit association under some conditions
as the TX rate is too high.
Based on suggestions by Joe Perches, the entire routine is rewritten.
One of the local headers contained duplicates of some of the ETH\_P\_XXX
definitions. These are deleted.
Signed-off-by: Larry Finger
Cc: Mark Cave-Ayland
Signed-off-by: John W. Linville
[bwh: Backported to 3.2: adjust context; use rtl\_lps\_leave()]
Signed-off-by: Ben Hutchings
commit d0086d127275aa318344fff8d92984af5335fba9
Author: Felipe Pena
Date: Fri Oct 18 21:52:40 2013 -0300
rtlwifi: rtl8192se: Fix wrong assignment
commit 3aef7dde8dcf09e0124f0a2665845a507331972b upstream.
There is a typo in the struct member name on assignment when checking
rtlphy->current\_chan\_bw == HT\_CHANNEL\_WIDTH\_20\_40, the check uses pwrgroup\_ht40
for bound limit and uses pwrgroup\_ht20 when assigning instead.
Signed-off-by: Felipe Pena
Acked-by: Larry Finger
Signed-off-by: John W. Linville
Signed-off-by: Ben Hutchings
commit 434700a29d1e1b0a31dd03dc8b5d0f5424a09bca
Author: Jan Kara
Date: Fri Oct 4 09:29:12 2013 -0400
IB/qib: Convert qib\_user\_sdma\_pin\_pages() to use get\_user\_pages\_fast()
commit 603e7729920e42b3c2f4dbfab9eef4878cb6e8fa upstream.
qib\_user\_sdma\_queue\_pkts() gets called with mmap\_sem held for
writing. Except for get\_user\_pages() deep down in
qib\_user\_sdma\_pin\_pages() we don't seem to need mmap\_sem at all. Even
more interestingly the function qib\_user\_sdma\_queue\_pkts() (and also
qib\_user\_sdma\_coalesce() called somewhat later) call copy\_from\_user()
which can hit a page fault and we deadlock on trying to get mmap\_sem
when handling that fault.
So just make qib\_user\_sdma\_pin\_pages() use get\_user\_pages\_fast() and
leave mmap\_sem locking for mm.
This deadlock has actually been observed in the wild when the node
is under memory pressure.
Reviewed-by: Mike Marciniszyn
Signed-off-by: Jan Kara
Signed-off-by: Roland Dreier
[bwh: Backported to 3.2:
- Adjust context
- Adjust indentation and nr\_pages argument in qib\_user\_sdma\_pin\_pages()]
Signed-off-by: Ben Hutchings
commit 0ecfc95da4f159e3a773bf1c0554e5f064bda491
Author: Jan Kara
Date: Fri Oct 4 09:29:06 2013 -0400
IB/ipath: Convert ipath\_user\_sdma\_pin\_pages() to use get\_user\_pages\_fast()
commit 4adcf7fb6783e354aab38824d803fa8c4f8e8a27 upstream.
ipath\_user\_sdma\_queue\_pkts() gets called with mmap\_sem held for
writing. Except for get\_user\_pages() deep down in
ipath\_user\_sdma\_pin\_pages() we don't seem to need mmap\_sem at all.
Even more interestingly the function ipath\_user\_sdma\_queue\_pkts() (and
also ipath\_user\_sdma\_coalesce() called somewhat later) call
copy\_from\_user() which can hit a page fault and we deadlock on trying
to get mmap\_sem when handling that fault. So just make
ipath\_user\_sdma\_pin\_pages() use get\_user\_pages\_fast() and leave
mmap\_sem locking for mm.
This deadlock has actually been observed in the wild when the node
is under memory pressure.
Signed-off-by: Jan Kara
Signed-off-by: Mike Marciniszyn
[ Merged in fix for call to get\_user\_pages\_fast from Tetsuo Handa
. - Roland ]
Signed-off-by: Roland Dreier
Signed-off-by: Ben Hutchings
commit 628b0a15e2f673a0b7559598ddb696b2efca12f4
Author: Trond Myklebust
Date: Fri Nov 8 16:03:50 2013 -0500
SUNRPC: Fix a data corruption issue when retransmitting RPC calls
commit a6b31d18b02ff9d7915c5898c9b5ca41a798cd73 upstream.
The following scenario can cause silent data corruption when doing
NFS writes. It has mainly been observed when doing database writes
using O\_DIRECT.
1) The RPC client uses sendpage() to do zero-copy of the page data.
2) Due to networking issues, the reply from the server is delayed,
and so the RPC client times out.
3) The client issues a second sendpage of the page data as part of
an RPC call retransmission.
4) The reply to the first transmission arrives from the server
\_before\_ the client hardware has emptied the TCP socket send
buffer.
5) After processing the reply, the RPC state machine rules that
the call to be done, and triggers the completion callbacks.
6) The application notices the RPC call is done, and reuses the
pages to store something else (e.g. a new write).
7) The client NIC drains the TCP socket send buffer. Since the
page data has now changed, it reads a corrupted version of the
initial RPC call, and puts it on the wire.
This patch fixes the problem in the following manner:
The ordering guarantees of TCP ensure that when the server sends a
reply, then we know that the \_first\_ transmission has completed. Using
zero-copy in that situation is therefore safe.
If a time out occurs, we then send the retransmission using sendmsg()
(i.e. no zero-copy), We then know that the socket contains a full copy of
the data, and so it will retransmit a faithful reproduction even if the
RPC call completes, and the application reuses the O\_DIRECT buffer in
the meantime.
Signed-off-by: Trond Myklebust
Signed-off-by: Ben Hutchings
commit a43045731dfe130d925c9fb7d9d75294f6165731
Author: Mikulas Patocka
Date: Mon Oct 14 12:13:24 2013 -0400
block: fix a probe argument to blk\_register\_region
commit a207f5937630dd35bd2550620bef416937a1365e upstream.
The probe function is supposed to return NULL on failure (as we can see in
kobj\_lookup: kobj = probe(dev, index, data); ... if (kobj) return kobj;
However, in loop and brd, it returns negative error from ERR\_PTR.
This causes a crash if we simulate disk allocation failure and run
less -f /dev/loop0 because the negative number is interpreted as a pointer:
BUG: unable to handle kernel NULL pointer dereference at 00000000000002b4
IP: [] \_\_blkdev\_get+0x28/0x450
PGD 23c677067 PUD 23d6d1067 PMD 0
Oops: 0000 [#1] PREEMPT SMP
Modules linked in: loop hpfs nvidia(PO) ip6table\_filter ip6\_tables uvesafb cfbcopyarea cfbimgblt cfbfillrect fbcon font bitblit fbcon\_rotate fbcon\_cw fbcon\_ud fbcon\_ccw softcursor fb fbdev msr ipt\_MASQUERADE iptable\_nat nf\_nat\_ipv4 nf\_conntrack\_ipv4 nf\_defrag\_ipv4 xt\_state ipt\_REJECT xt\_tcpudp iptable\_filter ip\_tables x\_tables bridge stp llc tun ipv6 cpufreq\_stats cpufreq\_ondemand cpufreq\_userspace cpufreq\_powersave cpufreq\_conservative hid\_generic spadfs usbhid hid fuse raid0 snd\_usb\_audio snd\_pcm\_oss snd\_mixer\_oss md\_mod snd\_pcm snd\_timer snd\_page\_alloc snd\_hwdep snd\_usbmidi\_lib dmi\_sysfs snd\_rawmidi nf\_nat\_ftp nf\_nat nf\_conntrack\_ftp nf\_conntrack snd soundcore lm85 hwmon\_vid ohci\_hcd ehci\_pci ehci\_hcd serverworks sata\_svw libata acpi\_cpufreq freq\_table mperf ide\_core usbcore kvm\_amd kvm tg3 i2c\_piix4 libphy microcode e100 usb\_common ptp skge i2c\_core pcspkr k10temp evdev floppy hwmon pps\_core mii rtc\_cmos button processor unix [last unloaded: nvidia]
CPU: 1 PID: 6831 Comm: less Tainted: P W O 3.10.15-devel #18
Hardware name: empty empty/S3992-E, BIOS 'V1.06 ' 06/09/2009
task: ffff880203cc6bc0 ti: ffff88023e47c000 task.ti: ffff88023e47c000
RIP: 0010:[] [] \_\_blkdev\_get+0x28/0x450
RSP: 0018:ffff88023e47dbd8 EFLAGS: 00010286
RAX: ffffffffffffff74 RBX: ffffffffffffff74 RCX: 0000000000000000
RDX: 0000000000000000 RSI: 0000000000000000 RDI: 0000000000000001
RBP: ffff88023e47dc18 R08: 0000000000000002 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000000 R12: ffff88023f519658
R13: ffffffff8118c300 R14: 0000000000000000 R15: ffff88023f519640
FS: 00007f2070bf7700(0000) GS:ffff880247400000(0000) knlGS:0000000000000000
CS: 0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000000002b4 CR3: 000000023da1d000 CR4: 00000000000007e0
DR0: 0000000000000000 DR1: 0000000000000000 DR2: 0000000000000000
DR3: 0000000000000000 DR6: 00000000ffff0ff0 DR7: 0000000000000400
Stack:
0000000000000002 0000001d00000000 000000003e47dc50 ffff88023f519640
ffff88043d5bb668 ffffffff8118c300 ffff88023d683550 ffff88023e47de60
ffff88023e47dc98 ffffffff8118c10d 0000001d81605698 0000000000000292
Call Trace:
[] ? blkdev\_get\_by\_dev+0x60/0x60
[] blkdev\_get+0x1dd/0x370
[] ? blkdev\_get\_by\_dev+0x60/0x60
[] ? \_raw\_spin\_unlock+0x2c/0x50
[] ? blkdev\_get\_by\_dev+0x60/0x60
[] blkdev\_open+0x65/0x80
[] do\_dentry\_open.isra.18+0x23e/0x2f0
[] finish\_open+0x34/0x50
[] do\_last.isra.62+0x2d2/0xc50
[] path\_openat.isra.63+0xb8/0x4d0
[] ? might\_fault+0x4e/0xa0
[] do\_filp\_open+0x40/0x90
[] ? \_raw\_spin\_unlock+0x2c/0x50
[] ? \_\_alloc\_fd+0xa5/0x1f0
[] do\_sys\_open+0xef/0x1d0
[] SyS\_open+0x19/0x20
[] system\_call\_fastpath+0x1a/0x1f
Code: 44 00 00 55 48 89 e5 41 57 49 89 ff 41 56 41 89 d6 41 55 41 54 4c 8d 67 18 53 48 83 ec 18 89 75 cc e9 f2 00 00 00 0f 1f 44 00 00 <48> 8b 80 40 03 00 00 48 89 df 4c 8b 68 58 e8 d5
a4 07 00 44 89
RIP [] \_\_blkdev\_get+0x28/0x450
RSP
CR2: 00000000000002b4
---[ end trace bb7f32dbf02398dc ]---
The brd change should be backported to stable kernels starting with 2.6.25.
The loop change should be backported to stable kernels starting with 2.6.22.
Signed-off-by: Mikulas Patocka
Acked-by: Tejun Heo
Signed-off-by: Jens Axboe
Signed-off-by: Ben Hutchings
commit ba664b2ff72b154488bc8404ede7be7b5801a3f8
Author: Mikulas Patocka
Date: Mon Oct 14 12:12:24 2013 -0400
loop: fix crash if blk\_alloc\_queue fails
commit 3ec981e30fae1f3c8728a05c730acaa1f627bcfb upstream.
loop: fix crash if blk\_alloc\_queue fails
If blk\_alloc\_queue fails, loop\_add cleans up, but it doesn't clean up the
identifier allocated with idr\_alloc. That causes crash on module unload in
idr\_for\_each(&loop\_index\_idr, &loop\_exit\_cb, NULL); where we attempt to
remove non-existed device with that id.
BUG: unable to handle kernel NULL pointer dereference at 0000000000000380
IP: [] del\_gendisk+0x19/0x2d0
PGD 43d399067 PUD 43d0ad067 PMD 0
Oops: 0000 [#1] PREEMPT SMP
Modules linked in: loop(-) dm\_snapshot dm\_zero dm\_mirror dm\_region\_hash dm\_log dm\_loop dm\_mod ip6table\_filter ip6\_tables uvesafb cfbcopyarea cfbimgblt cfbfillrect fbcon font bitblit fbcon\_rotate fbcon\_cw fbcon\_ud fbcon\_ccw softcursor fb fbdev msr ipt\_MASQUERADE iptable\_nat nf\_nat\_ipv4 nf\_conntrack\_ipv4 nf\_defrag\_ipv4 xt\_state ipt\_REJECT xt\_tcpudp iptable\_filter ip\_tables x\_tables bridge stp llc tun ipv6 cpufreq\_userspace cpufreq\_stats cpufreq\_ondemand cpufreq\_conservative cpufreq\_powersave spadfs fuse hid\_generic usbhid hid raid0 md\_mod dmi\_sysfs nf\_nat\_ftp nf\_nat nf\_conntrack\_ftp nf\_conntrack snd\_usb\_audio snd\_pcm\_oss snd\_mixer\_oss snd\_pcm snd\_timer snd\_page\_alloc lm85 hwmon\_vid snd\_hwdep snd\_usbmidi\_lib snd\_rawmidi snd soundcore acpi\_cpufreq ohci\_hcd freq\_table tg3 ehci\_pci mperf ehci\_hcd kvm\_amd kvm sata\_svw serverworks libphy libata ide\_core k10temp usbcore hwmon microcode ptp pcspkr pps\_core e100 skge mii usb\_common i2c\_piix4 floppy evdev rtc\_cmos i2c\_core processor but!
ton unix
CPU: 7 PID: 2735 Comm: rmmod Tainted: G W 3.10.15-devel #15
Hardware name: empty empty/S3992-E, BIOS 'V1.06 ' 06/09/2009
task: ffff88043d38e780 ti: ffff88043d21e000 task.ti: ffff88043d21e000
RIP: 0010:[] [] del\_gendisk+0x19/0x2d0
RSP: 0018:ffff88043d21fe10 EFLAGS: 00010282
RAX: ffffffffa05102e0 RBX: 0000000000000000 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffff88043ea82800 RDI: 0000000000000000
RBP: ffff88043d21fe48 R08: 0000000000000000 R09: 0000000000000001
R10: 0000000000000001 R11: 0000000000000000 R12: 00000000000000ff
R13: 0000000000000080 R14: 0000000000000000 R15: ffff88043ea82800
FS: 00007ff646534700(0000) GS:ffff880447000000(0000) knlGS:0000000000000000
CS: 0010 DS: 0000 ES: 0000 CR0: 000000008005003b
CR2: 0000000000000380 CR3: 000000043e9bf000 CR4: 00000000000007e0
DR0: 0000000000000000 DR1: 0000000000000000 DR2: 0000000000000000
DR3: 0000000000000000 DR6: 00000000ffff0ff0 DR7: 0000000000000400
Stack:
ffffffff8100aba4 0000000000000092 ffff88043d21fe48 ffff88043ea82800
00000000000000ff ffff88043d21fe98 0000000000000000 ffff88043d21fe60
ffffffffa05102b4 0000000000000000 ffff88043d21fe70 ffffffffa05102ec
Call Trace:
[] ? native\_sched\_clock+0x24/0x80
[] loop\_remove+0x14/0x40 [loop]
[] loop\_exit\_cb+0xc/0x10 [loop]
[] idr\_for\_each+0x104/0x190
[] ? loop\_remove+0x40/0x40 [loop]
[] ? trace\_hardirqs\_on\_caller+0x105/0x1d0
[] loop\_exit+0x34/0xa58 [loop]
[] SyS\_delete\_module+0x13a/0x260
[] ? trace\_hardirqs\_on\_thunk+0x3a/0x3f
[] system\_call\_fastpath+0x1a/0x1f
Code: f0 4c 8b 6d f8 c9 c3 66 66 2e 0f 1f 84 00 00 00 00 00 55 48 89 e5 41 56 41 55 4c 8d af 80 00 00 00 41 54 53 48 89 fb 48 83 ec 18 <48> 83 bf 80 03 00
00 00 74 4d e8 98 fe ff ff 31 f6 48 c7 c7 20
RIP [] del\_gendisk+0x19/0x2d0
RSP
CR2: 0000000000000380
---[ end trace 64ec069ec70f1309 ]---
Signed-off-by: Mikulas Patocka
Acked-by: Tejun Heo
Signed-off-by: Jens Axboe
Signed-off-by: Ben Hutchings
commit 9be9b3e8f63644f30360164ff0efa997366af67c
Author: Mikulas Patocka
Date: Mon Oct 14 12:11:36 2013 -0400
blk-core: Fix memory corruption if blkcg\_init\_queue fails
commit fff4996b7db7955414ac74386efa5e07fd766b50 upstream.
If blkcg\_init\_queue fails, blk\_alloc\_queue\_node doesn't call bdi\_destroy
to clean up structures allocated by the backing dev.
------------[ cut here ]------------
WARNING: at lib/debugobjects.c:260 debug\_print\_object+0x85/0xa0()
ODEBUG: free active (active state 0) object type: percpu\_counter hint: (null)
Modules linked in: dm\_loop dm\_mod ip6table\_filter ip6\_tables uvesafb cfbcopyarea cfbimgblt cfbfillrect fbcon font bitblit fbcon\_rotate fbcon\_cw fbcon\_ud fbcon\_ccw softcursor fb fbdev ipt\_MASQUERADE iptable\_nat nf\_nat\_ipv4 msr nf\_conntrack\_ipv4 nf\_defrag\_ipv4 xt\_state ipt\_REJECT xt\_tcpudp iptable\_filter ip\_tables x\_tables bridge stp llc tun ipv6 cpufreq\_userspace cpufreq\_stats cpufreq\_powersave cpufreq\_ondemand cpufreq\_conservative spadfs fuse hid\_generic usbhid hid raid0 md\_mod dmi\_sysfs nf\_nat\_ftp nf\_nat nf\_conntrack\_ftp nf\_conntrack lm85 hwmon\_vid snd\_usb\_audio snd\_pcm\_oss snd\_mixer\_oss snd\_pcm snd\_timer snd\_page\_alloc snd\_hwdep snd\_usbmidi\_lib snd\_rawmidi snd soundcore acpi\_cpufreq freq\_table mperf sata\_svw serverworks kvm\_amd ide\_core ehci\_pci ohci\_hcd libata ehci\_hcd kvm usbcore tg3 usb\_common libphy k10temp pcspkr ptp i2c\_piix4 i2c\_core evdev microcode hwmon rtc\_cmos pps\_core e100 skge floppy mii processor button unix
CPU: 0 PID: 2739 Comm: lvchange Tainted: G W
3.10.15-devel #14
Hardware name: empty empty/S3992-E, BIOS 'V1.06 ' 06/09/2009
0000000000000009 ffff88023c3c1ae8 ffffffff813c8fd4 ffff88023c3c1b20
ffffffff810399eb ffff88043d35cd58 ffffffff81651940 ffff88023c3c1bf8
ffffffff82479d90 0000000000000005 ffff88023c3c1b80 ffffffff81039a67
Call Trace:
[] dump\_stack+0x19/0x1b
[] warn\_slowpath\_common+0x6b/0xa0
[] warn\_slowpath\_fmt+0x47/0x50
[] ? debug\_check\_no\_obj\_freed+0xcf/0x250
[] debug\_print\_object+0x85/0xa0
[] debug\_check\_no\_obj\_freed+0x203/0x250
[] kmem\_cache\_free+0x20c/0x3a0
[] blk\_alloc\_queue\_node+0x2a9/0x2c0
[] blk\_alloc\_queue+0xe/0x10
[] dm\_create+0x1a3/0x530 [dm\_mod]
[] ? list\_version\_get\_info+0xe0/0xe0 [dm\_mod]
[] dev\_create+0x57/0x2b0 [dm\_mod]
[] ? list\_version\_get\_info+0xe0/0xe0 [dm\_mod]
[] ? list\_version\_get\_info+0xe0/0xe0 [dm\_mod]
[] ctl\_ioctl+0x268/0x500 [dm\_mod]
[] ? get\_lock\_stats+0x22/0x70
[] dm\_ctl\_ioctl+0xe/0x20 [dm\_mod]
[] do\_vfs\_ioctl+0x2ed/0x520
[] ? fget\_light+0x377/0x4e0
[] SyS\_ioctl+0x4b/0x90
[] system\_call\_fastpath+0x1a/0x1f
---[ end trace 4b5ff0d55673d986 ]---
------------[ cut here ]------------
This fix should be backported to stable kernels starting with 2.6.37. Note
that in the kernels prior to 3.5 the affected code is different, but the
bug is still there - bdi\_init is called and bdi\_destroy isn't.
Signed-off-by: Mikulas Patocka
Acked-by: Tejun Heo
Signed-off-by: Jens Axboe
[bwh: Backported to 3.2: add bdi\_destroy() to the single error path
after the call to bdi\_init()]
Signed-off-by: Ben Hutchings
commit c76cf3d0c317ebd020361ae737641bd53ab0d30b
Author: Jeff Moyer
Date: Tue Oct 8 14:36:41 2013 -0400
block: fix race between request completion and timeout handling
commit 4912aa6c11e6a5d910264deedbec2075c6f1bb73 upstream.
crocode i2c\_i801 i2c\_core iTCO\_wdt iTCO\_vendor\_support shpchp ioatdma dca be2net sg ses enclosure ext4 mbcache jbd2 sd\_mod crc\_t10dif ahci megaraid\_sas(U) dm\_mirror dm\_region\_hash dm\_log dm\_mod [last unloaded: scsi\_wait\_scan]
Pid: 491, comm: scsi\_eh\_0 Tainted: G W ---------------- 2.6.32-220.13.1.el6.x86\_64 #1 IBM -[8722PAX]-/00D1461
RIP: 0010:[] [] blk\_requeue\_request+0x94/0xa0
RSP: 0018:ffff881057eefd60 EFLAGS: 00010012
RAX: ffff881d99e3e8a8 RBX: ffff881d99e3e780 RCX: ffff881d99e3e8a8
RDX: ffff881d99e3e8a8 RSI: ffff881d99e3e780 RDI: ffff881d99e3e780
RBP: ffff881057eefd80 R08: ffff881057eefe90 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000000 R12: ffff881057f92338
R13: 0000000000000000 R14: ffff881057f92338 R15: ffff883058188000
FS: 0000000000000000(0000) GS:ffff880040200000(0000) knlGS:0000000000000000
CS: 0010 DS: 0018 ES: 0018 CR0: 000000008005003b
CR2: 00000000006d3ec0 CR3: 000000302cd7d000 CR4: 00000000000406b0
DR0: 0000000000000000 DR1: 0000000000000000 DR2: 0000000000000000
DR3: 0000000000000000 DR6: 00000000ffff0ff0 DR7: 0000000000000400
Process scsi\_eh\_0 (pid: 491, threadinfo ffff881057eee000, task ffff881057e29540)
Stack:
0000000000001057 0000000000000286 ffff8810275efdc0 ffff881057f16000
<0> ffff881057eefdd0 ffffffff81362323 ffff881057eefe20 ffffffff8135f393
<0> ffff881057e29af8 ffff8810275efdc0 ffff881057eefe78 ffff881057eefe90
Call Trace:
[] \_\_scsi\_queue\_insert+0xa3/0x150
[] ? scsi\_eh\_ready\_devs+0x5e3/0x850
[] scsi\_queue\_insert+0x13/0x20
[] scsi\_eh\_flush\_done\_q+0x104/0x160
[] scsi\_error\_handler+0x35b/0x660
[] ? scsi\_error\_handler+0x0/0x660
[] kthread+0x96/0xa0
[] child\_rip+0xa/0x20
[] ? kthread+0x0/0xa0
[] ? child\_rip+0x0/0x20
Code: 00 00 eb d1 4c 8b 2d 3c 8f 97 00 4d 85 ed 74 bf 49 8b 45 00 49 83 c5 08 48 89 de 4c 89 e7 ff d0 49 8b 45 00 48 85 c0 75 eb eb a4 <0f> 0b eb fe 0f 1f 84 00 00 00 00 00 55 48 89 e5 0f 1f 44 00 00
RIP [] blk\_requeue\_request+0x94/0xa0
RSP
The RIP is this line:
BUG\_ON(blk\_queued\_rq(rq));
After digging through the code, I think there may be a race between the
request completion and the timer handler running.
A timer is started for each request put on the device's queue (see
blk\_start\_request->blk\_add\_timer). If the request does not complete
before the timer expires, the timer handler (blk\_rq\_timed\_out\_timer)
will mark the request complete atomically:
static inline int blk\_mark\_rq\_complete(struct request \*rq)
{
return test\_and\_set\_bit(REQ\_ATOM\_COMPLETE, &rq->atomic\_flags);
}
and then call blk\_rq\_timed\_out. The latter function will call
scsi\_times\_out, which will return one of BLK\_EH\_HANDLED,
BLK\_EH\_RESET\_TIMER or BLK\_EH\_NOT\_HANDLED. If BLK\_EH\_RESET\_TIMER is
returned, blk\_clear\_rq\_complete is called, and blk\_add\_timer is again
called to simply wait longer for the request to complete.
Now, if the request happens to complete while this is going on, what
happens? Given that we know the completion handler will bail if it
finds the REQ\_ATOM\_COMPLETE bit set, we need to focus on the completion
handler running after that bit is cleared. So, from the above
paragraph, after the call to blk\_clear\_rq\_complete. If the completion
sets REQ\_ATOM\_COMPLETE before the BUG\_ON in blk\_add\_timer, we go boom
there (I haven't seen this in the cores). Next, if we get the
completion before the call to list\_add\_tail, then the timer will
eventually fire for an old req, which may either be freed or reallocated
(there is evidence that this might be the case). Finally, if the
completion comes in \*after\* the addition to the timeout list, I think
it's harmless. The request will be removed from the timeout list,
req\_atom\_complete will be set, and all will be well.
This will only actually explain the coredumps \*IF\* the request
structure was freed, reallocated \*and\* queued before the error handler
thread had a chance to process it. That is possible, but it may make
sense to keep digging for another race. I think that if this is what
was happening, we would see other instances of this problem showing up
as null pointer or garbage pointer dereferences, for example when the
request structure was not re-used. It looks like we actually do run
into that situation in other reports.
This patch moves the BUG\_ON(test\_bit(REQ\_ATOM\_COMPLETE,
&req->atomic\_flags)); from blk\_add\_timer to the only caller that could
trip over it (blk\_start\_request). It then inverts the calls to
blk\_clear\_rq\_complete and blk\_add\_timer in blk\_rq\_timed\_out to address
the race. I've boot tested this patch, but nothing more.
Signed-off-by: Jeff Moyer
Acked-by: Hannes Reinecke
Signed-off-by: Jens Axboe
Signed-off-by: Ben Hutchings
commit d8c3245c97490cb68ceaa983b5fce19055b4e331
Author: Fenghua Yu
Date: Wed Oct 23 18:30:12 2013 -0700
x86/apic: Disable I/O APIC before shutdown of the local APIC
commit 522e66464467543c0d88d023336eec4df03ad40b upstream.
In reboot and crash path, when we shut down the local APIC, the I/O APIC is
still active. This may cause issues because external interrupts
can still come in and disturb the local APIC during shutdown process.
To quiet external interrupts, disable I/O APIC before shutdown local APIC.
Signed-off-by: Fenghua Yu
Link: http://lkml.kernel.org/r/1382578212-4677-1-git-send-email-fenghua.yu@intel.com
[ I suppose the 'issue' is a hang during shutdown. It's a fine change nevertheless. ]
Signed-off-by: Ingo Molnar
[bwh: Backported to 3.2: adjust context]
Signed-off-by: Ben Hutchings
commit a3e38398c95c83c06c1b8028e406f3aca23ec43d
Author: Ursula Braun
Date: Wed Nov 6 09:04:52 2013 +0100
qeth: avoid buffer overflow in snmp ioctl
commit 6fb392b1a63ae36c31f62bc3fc8630b49d602b62 upstream.
Check user-defined length in snmp ioctl request and allow request
only if it fits into a qeth command buffer.
Signed-off-by: Ursula Braun
Signed-off-by: Frank Blaschka
Reviewed-by: Heiko Carstens
Reported-by: Nico Golde
Reported-by: Fabian Yamaguchi
Signed-off-by: David S. Miller
Signed-off-by: Ben Hutchings
commit 2a4c85e77b4bd77a83382f74c99da1c388a0fab2
Author: Brian Norris
Date: Wed Jul 24 18:32:07 2013 -0700
mtd: m25p80: fix allocation size
commit 778d226a1462572b51d6777cdb1d611543410cb4 upstream.
This patch fixes two memory errors:
1. During a probe failure (in mtd\_device\_parse\_register?) the command
buffer would not be freed.
2. The command buffer's size is determined based on the 'fast\_read'
boolean, but the assignment of fast\_read is made after this
allocation. Thus, the buffer may be allocated "too small".
To fix the first, just switch to the devres version of kzalloc.
To fix the second, increase MAX\_CMD\_SIZE unconditionally. It's not worth
saving a byte to fiddle around with the conditions here.
This problem was reported by Yuhang Wang a while back.
Signed-off-by: Brian Norris
Reported-by: Yuhang Wang
Reviewed-by: Sourav Poddar
[bwh: Backported to 3.2: adjust context]
Signed-off-by: Ben Hutchings
commit eba485ec7b69e8b8dfd700ae9e0779865f877644
Author: Wang Haitao
Date: Thu Aug 22 19:32:38 2013 +0800
mtd: map: fixed bug in 64-bit systems
commit a4d62babf988fe5dfde24437fa135ef147bc7aa0 upstream.
Hardware:
CPU: XLP832,the 64-bit OS
NOR Flash:S29GL128S 128M
Software:
Kernel:2.6.32.41
Filesystem:JFFS2
When writing files, errors appear:
Write len 182 but return retlen 180
Write of 182 bytes at 0x072c815c failed. returned -5, retlen 180
Write len 186 but return retlen 184
Write of 186 bytes at 0x072caff4 failed. returned -5, retlen 184
These errors exist only in 64-bit systems,not in 32-bit systems. After analysis, we
found that the left shift operation is wrong in map\_word\_load\_partial. For instance:
unsigned char buf[3] ={0x9e,0x3a,0xea};
map\_bankwidth(map) is 4;
for (i=0; i < 3; i++) {
int bitpos;
bitpos = (map\_bankwidth(map)-1-i)\*8;
orig.x[0] &= ~(0xff << bitpos);
orig.x[0] |= buf[i] << bitpos;
}
The value of orig.x[0] is expected to be 0x9e3aeaff, but in this situation(64-bit
System) we'll get the wrong value of 0xffffffff9e3aeaff due to the 64-bit sign
extension:
buf[i] is defined as "unsigned char" and the left-shift operation will convert it
to the type of "signed int", so when left-shift buf[i] by 24 bits, the final result
will get the wrong value: 0xffffffff9e3aeaff.
If the left-shift bits are less than 24, then sign extension will not occur. Whereas
the bankwidth of the nor flash we used is 4, therefore this BUG emerges.
Signed-off-by: Pang Xunlei
Signed-off-by: Zhang Yi
Signed-off-by: Lu Zhongjun
Signed-off-by: Brian Norris
Signed-off-by: Ben Hutchings
commit 229236a87b7b65e41cc2c1acc36e5bc610dd8c23
Author: Brian Norris
Date: Tue Aug 27 18:45:10 2013 -0700
mtd: nand: hack ONFI for non-power-of-2 dimensions
commit 4355b70cf48363c50a9de450b01178c83aba8f6a upstream.
Some bright specification writers decided to write this in the ONFI spec
(from ONFI 3.0, Section 3.1):
"The number of blocks and number of pages per block is not required to
be a power of two. In the case where one of these values is not a
power of two, the corresponding address shall be rounded to an
integral number of bits such that it addresses a range up to the
subsequent power of two value. The host shall not access upper
addresses in a range that is shown as not supported."
This breaks every assumption MTD makes about NAND block/chip-size
dimensions -- they \*must\* be a power of two!
And of course, an enterprising manufacturer has made use of this lovely
freedom. Exhibit A: Micron MT29F32G08CBADAWP
"- Plane size: 2 planes x 1064 blocks per plane
- Device size: 32Gb: 2128 blockss [sic]"
This quickly hits a BUG() in nand\_base.c, since the extra dimensions
overflow so we think it's a second chip (on my single-chip setup):
ONFI param page 0 valid
ONFI flash detected
NAND device: Manufacturer ID: 0x2c, Chip ID: 0x44 (Micron MT29F32G08CBADAWP), 4256MiB, page size: 8192, OOB size: 744
------------[ cut here ]------------
kernel BUG at drivers/mtd/nand/nand\_base.c:203!
Internal error: Oops - BUG: 0 [#1] SMP ARM
[... trim ...]
[] (nand\_select\_chip+0x18/0x2c) from [] (nand\_do\_read\_ops+0x90/0x424)
[] (nand\_do\_read\_ops+0x90/0x424) from [] (nand\_read+0x54/0x78)
[] (nand\_read+0x54/0x78) from [] (mtd\_read+0x84/0xbc)
[] (mtd\_read+0x84/0xbc) from [] (scan\_read.clone.4+0x4c/0x64)
[] (scan\_read.clone.4+0x4c/0x64) from [] (search\_bbt+0x148/0x290)
[] (search\_bbt+0x148/0x290) from [] (nand\_scan\_bbt+0xd4/0x5c0)
[... trim ...]
---[ end trace 0c9363860d865ff2 ]---
So to fix this, just truncate these dimensions down to the greatest
power-of-2 dimension that is less than or equal to the specified
dimension.
Signed-off-by: Brian Norris
[bwh: Backported to 3.2:
- Adjust context
- p->lun\_count is not used]
Signed-off-by: Ben Hutchings
commit 9712d74ae8182e8d364c6a8ad2cdcb404e04b714
Author: Takashi Iwai
Date: Wed Nov 6 18:47:42 2013 +0100
ALSA: hda - Add support for CX20952
commit 8f42d7698751a45cd9f7134a5da49bc5b6206179 upstream.
It's a superset of the existing CX2075x codecs, so we can reuse the
existing parser code.
Signed-off-by: Takashi Iwai
Signed-off-by: Ben Hutchings
commit 103ebb406f8ddb3008848d6a243299e5b7ddf2f3
Author: Aaron Lu
Date: Wed Nov 6 08:41:31 2013 +0800
PM / hibernate: Avoid overflow in hibernate\_preallocate\_memory()
commit fd432b9f8c7c88428a4635b9f5a9c6e174df6e36 upstream.
When system has a lot of highmem (e.g. 16GiB using a 32 bits kernel),
the code to calculate how much memory we need to preallocate in
normal zone may cause overflow. As Leon has analysed:
It looks that during computing 'alloc' variable there is overflow:
alloc = (3943404 - 1970542) - 1978280 = -5418 (signed)
And this function goes to err\_out.
Fix this by avoiding that overflow.
References: https://bugzilla.kernel.org/show\_bug.cgi?id=60817
Reported-and-tested-by: Leon Drugi
Signed-off-by: Aaron Lu
Signed-off-by: Rafael J. Wysocki
Signed-off-by: Ben Hutchings
commit d81980f44bbc6e82d978e03258ab487a2d4e8057
Author: Thomas Hellstrom
Date: Mon Oct 28 02:02:19 2013 -0700
drm/ttm: Fix memory type compatibility check
commit 59c8e66378fb78adbcd05f0d09783dde6fef282b upstream.
Also check the busy placements before deciding to move a buffer object.
Failing to do this may result in a completely unneccessary move within a
single memory type.
Signed-off-by: Thomas Hellstrom
Reviewed-by: Jakob Bornecrantz
[bwh: Backported to 3.2: adjust context]
Signed-off-by: Ben Hutchings
commit f42c03d9cd1b0f1ff1c76aa4456ee15984cc721d
Author: Mathias Krause
Date: Mon Sep 30 22:04:25 2013 +0200
audit: use nlmsg\_len() to get message payload length
commit 4d8fe7376a12bf4524783dd95cbc00f1fece6232 upstream.
Using the nlmsg\_len member of the netlink header to test if the message
is valid is wrong as it includes the size of the netlink header itself.
Thereby allowing to send short netlink messages that pass those checks.
Use nlmsg\_len() instead to test for the right message length. The result
of nlmsg\_len() is guaranteed to be non-negative as the netlink message
already passed the checks of nlmsg\_ok().
Also switch to min\_t() to please checkpatch.pl.
Cc: Al Viro
Cc: Eric Paris
Signed-off-by: Mathias Krause
Signed-off-by: Richard Guy Briggs
Signed-off-by: Eric Paris
[bwh: Backported to 3.2: there aren't any optional fields for AUDIT\_TTY\_SET
so adjust the size test similarly as for AUDIT\_SET]
Signed-off-by: Ben Hutchings
commit 71deebc1112584a061ffef2d1c703bef17fd3c80
Author: Mathias Krause
Date: Mon Sep 30 22:04:24 2013 +0200
audit: fix info leak in AUDIT\_GET requests
commit 64fbff9ae0a0a843365d922e0057fc785f23f0e3 upstream.
We leak 4 bytes of kernel stack in response to an AUDIT\_GET request as
we miss to initialize the mask member of status\_set. Fix that.
Cc: Al Viro
Cc: Eric Paris
Signed-off-by: Mathias Krause
Signed-off-by: Richard Guy Briggs
Signed-off-by: Eric Paris
Signed-off-by: Ben Hutchings
commit e08af7677ad9dc4337e4b634a81103d72e8371be
Author: Tyler Hicks
Date: Thu Jul 25 18:02:55 2013 -0700
audit: printk USER\_AVC messages when audit isn't enabled
commit 0868a5e150bc4c47e7a003367cd755811eb41e0b upstream.
When the audit=1 kernel parameter is absent and auditd is not running,
AUDIT\_USER\_AVC messages are being silently discarded.
AUDIT\_USER\_AVC messages should be sent to userspace using printk(), as
mentioned in the commit message of 4a4cd633 ("AUDIT: Optimise the
audit-disabled case for discarding user messages").
When audit\_enabled is 0, audit\_receive\_msg() discards all user messages
except for AUDIT\_USER\_AVC messages. However, audit\_log\_common\_recv\_msg()
refuses to allocate an audit\_buffer if audit\_enabled is 0. The fix is to
special case AUDIT\_USER\_AVC messages in both functions.
It looks like commit 50397bd1 ("[AUDIT] clean up audit\_receive\_msg()")
introduced this bug.
Signed-off-by: Tyler Hicks
Cc: Al Viro
Cc: Eric Paris
Cc: linux-audit@redhat.com
Acked-by: Kees Cook
Signed-off-by: Richard Guy Briggs
Signed-off-by: Eric Paris
Signed-off-by: Ben Hutchings
commit 898c8e6f438614624032f9ae887cab87f7558e45
Author: Herbert Xu
Date: Tue Nov 5 19:36:27 2013 +0800
crypto: s390 - Fix aes-cbc IV corruption
commit f262f0f5cad0c9eca61d1d383e3b67b57dcbe5ea upstream.
The cbc-aes-s390 algorithm incorrectly places the IV in the tfm
data structure. As the tfm is shared between multiple threads,
this introduces a possibility of data corruption.
This patch fixes this by moving the parameter block containing
the IV and key onto the stack (the block is 48 bytes long).
The same bug exists elsewhere in the s390 crypto system and they
will be fixed in subsequent patches.
Signed-off-by: Herbert Xu
[bwh: Backported to 3.2: adjust context]
Signed-off-by: Ben Hutchings
commit da4eda14795e2e246fc340ba181a95b09ac5205c
Author: Greg Edwards
Date: Mon Nov 4 09:08:12 2013 -0700
KVM: IOMMU: hva align mapping page size
commit 27ef63c7e97d1e5dddd85051c03f8d44cc887f34 upstream.
When determining the page size we could use to map with the IOMMU, the
page size should also be aligned with the hva, not just the gfn. The
gfn may not reflect the real alignment within the hugetlbfs file.
Most of the time, this works fine. However, if the hugetlbfs file is
backed by non-contiguous huge pages, a multi-huge page memslot starts at
an unaligned offset within the hugetlbfs file, and the gfn is aligned
with respect to the huge page size, kvm\_host\_page\_size() will return the
huge page size and we will use that to map with the IOMMU.
When we later unpin that same memslot, the IOMMU returns the unmap size
as the huge page size, and we happily unpin that many pfns in
monotonically increasing order, not realizing we are spanning
non-contiguous huge pages and partially unpin the wrong huge page.
Ensure the IOMMU mapping page size is aligned with the hva corresponding
to the gfn, which does reflect the alignment within the hugetlbfs file.
Reviewed-by: Marcelo Tosatti
Signed-off-by: Greg Edwards
Signed-off-by: Gleb Natapov
[bwh: Backported to 3.2: s/\_\_gfn\_to\_hva\_memslot/gfn\_to\_hva\_memslot/]
Signed-off-by: Ben Hutchings
commit 17318fb39430c776003caddfbd2b6ed6259fff90
Author: James Ralston
Date: Mon Nov 4 09:24:58 2013 -0800
ahci: Add Device IDs for Intel Wildcat Point-LP
commit 9f961a5f6efc87a79571d7166257b36af28ffcfe upstream.
This patch adds the AHCI-mode SATA Device IDs for the Intel Wildcat Point-LP PCH.
Signed-off-by: James Ralston
Signed-off-by: Tejun Heo
Signed-off-by: Ben Hutchings
commit ba3aaf91e684c9ed669300af5054b7ea14708ce7
Author: Phil Edworthy
Date: Thu Oct 31 23:06:17 2013 -0700
ASoC: ak4642: prevent un-necessary changes to SG\_SL1
commit 7b5bfb82882b9b1c8423ce0ed6852ca3762d967a upstream.
If you record the sound during playback,
the playback sound becomes silent.
Modify so that the codec driver does not clear
SG\_SL1::DACL bit which is controlled under widget
Signed-off-by: Phil Edworthy
Signed-off-by: Kuninori Morimoto
Signed-off-by: Mark Brown
Signed-off-by: Ben Hutchings
commit 67e2113ded5fe78bfe352a3fb21446cf790ce6b0
Author: Theodore Ts'o
Date: Thu Oct 31 23:00:24 2013 -0400
ext4: avoid bh leak in retry path of ext4\_expand\_extra\_isize\_ea()
commit dcb9917ba041866686fe152850364826c4622a36 upstream.
Reported-by: Dave Jones
Signed-off-by: "Theodore Ts'o"
Signed-off-by: Ben Hutchings
commit 75b23979f42e053e816515cee912bbfc822da166
Author: Shiva Krishna Merla
Date: Wed Oct 30 03:26:38 2013 +0000
dm mpath: fix race condition between multipath\_dtr and pg\_init\_done
commit 954a73d5d3073df2231820c718fdd2f18b0fe4c9 upstream.
Whenever multipath\_dtr() is happening we must prevent queueing any
further path activation work. Implement this by adding a new
'pg\_init\_disabled' flag to the multipath structure that denotes future
path activation work should be skipped if it is set. By disabling
pg\_init and then re-enabling in flush\_multipath\_work() we also avoid the
potential for pg\_init to be initiated while suspending an mpath device.
Without this patch a race condition exists that may result in a kernel
panic:
1) If after pg\_init\_done() decrements pg\_init\_in\_progress to 0, a call
to wait\_for\_pg\_init\_completion() assumes there are no more pending path
management commands.
2) If pg\_init\_required is set by pg\_init\_done(), due to retryable
mode\_select errors, then process\_queued\_ios() will again queue the
path activation work.
3) If free\_multipath() completes before activate\_path() work is called a
NULL pointer dereference like the following can be seen when
accessing members of the recently destructed multipath:
BUG: unable to handle kernel NULL pointer dereference at 0000000000000090
RIP: 0010:[] [] activate\_path+0x1b/0x30 [dm\_multipath]
[] worker\_thread+0x170/0x2a0
[] ? autoremove\_wake\_function+0x0/0x40
[switch to disabling pg\_init in flush\_multipath\_work & header edits by Mike Snitzer]
Signed-off-by: Shiva Krishna Merla
Reviewed-by: Krishnasamy Somasundaram
Tested-by: Speagle Andy
Acked-by: Junichi Nomura
Signed-off-by: Mike Snitzer
[bwh: Backported to 3.2:
- Adjust context
- Bump version to 1.3.2 not 1.6.0]
Signed-off-by: Ben Hutchings
commit e8edf57cb72b8d90d495ad78306daf9c9763ea5c
Author: Markus Pargmann
Date: Mon Oct 28 09:54:40 2013 +0100
can: c\_can: Fix RX message handling, handle lost message before EOB
commit 5d0f801a2ccec3b1fdabc3392c8d99ed0413d216 upstream.
If we handle end of block messages with higher priority than a lost message,
we can run into an endless interrupt loop.
This is reproducable with a am335x processor and "cansequence -r" at 1Mbit.
As soon as we loose a packet we can't escape from an interrupt loop.
This patch fixes the problem by handling lost packets before EOB packets.
Signed-off-by: Markus Pargmann
Signed-off-by: Marc Kleine-Budde
Signed-off-by: Ben Hutchings
commit 224a07b498254bf980d8c797064e00ec950e56ef
Author: Mikulas Patocka
Date: Thu Oct 31 13:55:45 2013 -0400
dm: allocate buffer for messages with small number of arguments using GFP\_NOIO
commit f36afb3957353d2529cb2b00f78fdccd14fc5e9c upstream.
dm-mpath and dm-thin must process messages even if some device is
suspended, so we allocate argv buffer with GFP\_NOIO. These messages have
a small fixed number of arguments.
On the other hand, dm-switch needs to process bulk data using messages
so excessive use of GFP\_NOIO could cause trouble.
The patch also lowers the default number of arguments from 64 to 8, so
that there is smaller load on GFP\_NOIO allocations.
Signed-off-by: Mikulas Patocka
Acked-by: Alasdair G Kergon
Signed-off-by: Mike Snitzer
Signed-off-by: Ben Hutchings
commit f38808475d3ef744bc6e2610e33fb4c92dc85654
Author: Prarit Bhargava
Date: Thu Oct 17 08:00:11 2013 -0400
powerpc/vio: use strcpy in modalias\_show
commit 411cabf79e684171669ad29a0628c400b4431e95 upstream.
Commit e82b89a6f19bae73fb064d1b3dd91fcefbb478f4 used strcat instead of
strcpy which can result in an overflow of newlines on the buffer.
Signed-off-by: Prarit Bhargava
Cc: benh@kernel.crashing.org
Cc: ben@decadent.org.uk
Signed-off-by: Benjamin Herrenschmidt
Signed-off-by: Ben Hutchings
commit 87ab8e5eb9b4fa4db73dc759e340da92d97117b3
Author: Prarit Bhargava
Date: Mon Sep 23 09:33:36 2013 -0400
powerpc/vio: Fix modalias\_show return values
commit e82b89a6f19bae73fb064d1b3dd91fcefbb478f4 upstream.
modalias\_show() should return an empty string on error, not -ENODEV.
This causes the following false and annoying error:
> find /sys/devices -name modalias -print0 | xargs -0 cat >/dev/null
cat: /sys/devices/vio/4000/modalias: No such device
cat: /sys/devices/vio/4001/modalias: No such device
cat: /sys/devices/vio/4002/modalias: No such device
cat: /sys/devices/vio/4004/modalias: No such device
cat: /sys/devices/vio/modalias: No such device
Signed-off-by: Prarit Bhargava
Signed-off-by: Benjamin Herrenschmidt
Signed-off-by: Ben Hutchings
commit 4a6c6bb2be9c0c7bf82089b29afa178f2e53fd8e
Author: Thomas Pugliese
Date: Wed Oct 23 14:44:29 2013 -0500
usb: wusbcore: change WA\_SEGS\_MAX to a legal value
commit f74b75e7f920c700636cccca669c7d16d12e9202 upstream.
change WA\_SEGS\_MAX to a number that is legal according to the WUSB
spec.
Signed-off-by: Thomas Pugliese
Signed-off-by: Greg Kroah-Hartman
[bwh: Backported to 3.2: adjust context]
Signed-off-by: Ben Hutchings
commit d83ceadbcef3426b566bdd6dea16043bfaa12a75
Author: Thomas Pugliese
Date: Wed Oct 23 14:44:26 2013 -0500
usb: wusbcore: set the RPIPE wMaxPacketSize value correctly
commit 7b6bc07ab554e929c85d51b3d5b26cf7f12c6a3b upstream.
For isochronous endpoints, set the RPIPE wMaxPacketSize value using
wOverTheAirPacketSize from the endpoint companion descriptor instead of
wMaxPacketSize from the normal endpoint descriptor.
Signed-off-by: Thomas Pugliese
Signed-off-by: Greg Kroah-Hartman
[bwh: Backported to 3.2: adjust context]
Signed-off-by: Ben Hutchings
commit 5275be6714bfcc5efe8685ecc3b558e9a0371e06
Author: Russell King
Date: Wed Oct 16 00:09:02 2013 +0100
ARM: sa11x0/assabet: ensure CS2 is configured appropriately
commit f3964fe1c9d9a887d65faf594669852e4dec46e0 upstream.
The CS2 region contains the Assabet board configuration and status
registers, which are 32-bit. Unfortunately, some boot loaders do not
configure this region correctly, leaving it setup as a 16-bit region.
Fix this.
Signed-off-by: Russell King
Signed-off-by: Ben Hutchings
commit e9985b96e1505dda3207b8addac47c3a45a8e776
Author: Takashi Iwai
Date: Mon Oct 28 11:24:23 2013 +0100
ALSA: 6fire: Fix probe of multiple cards
commit 9b389a8a022110b4bc055a19b888283544d9eba6 upstream.
The probe code of snd-usb-6fire driver overrides the devices[] pointer
wrongly without checking whether it's already occupied or not. This
would screw up the device disconnection later.
Spotted by coverity CID 141423.
Signed-off-by: Takashi Iwai
Signed-off-by: Ben Hutchings
commit a499dd1760871482373c47bb5fe089311cc953fb
Author: Shan Hai
Date: Mon Oct 28 16:08:01 2013 +0800
drivers/libata: Set max sector to 65535 for Slimtype DVD A DS8A9SH drive
commit 0523f037f65dba10191b0fa9c51266f90ba64630 upstream.
The "Slimtype DVD A DS8A9SH" drive locks up with following backtrace when
the max sector is smaller than 65535 bytes, fix it by adding a quirk to set
the max sector to 65535 bytes.
INFO: task flush-11:0:663 blocked for more than 120 seconds.
"echo 0 > /proc/sys/kernel/hung\_task\_timeout\_secs" disables this message.
flush-11:0 D 00000000ffff5ceb 0 663 2 0x00000000
ffff88026d3b1710 0000000000000046 0000000000000001 0000000000000000
ffff88026f2530c0 ffff88026d365860 ffff88026d3b16e0 ffffffff812ffd52
ffff88026d4fd3d0 0000000100000001 ffff88026d3b16f0 ffff88026d3b1fd8
Call Trace:
[] ? cfq\_may\_queue+0x52/0xf0
[] schedule+0x18/0x30
[] io\_schedule+0x42/0x60
[] get\_request\_wait+0xeb/0x1f0
[] ? autoremove\_wake\_function+0x0/0x40
[] ? elv\_merge+0x42/0x210
[] \_\_make\_request+0x8e/0x4e0
[] generic\_make\_request+0x21e/0x5e0
[] submit\_bio+0x5d/0xd0
[] submit\_bh+0xf2/0x130
[] \_\_block\_write\_full\_page+0x1dc/0x3a0
[] ? end\_buffer\_async\_write+0x0/0x120
[] ? blkdev\_get\_block+0x0/0x70
[] ? blkdev\_get\_block+0x0/0x70
[] ? end\_buffer\_async\_write+0x0/0x120
[] block\_write\_full\_page\_endio+0xde/0x100
[] block\_write\_full\_page+0x10/0x20
[] blkdev\_writepage+0x13/0x20
[] \_\_writepage+0x15/0x40
[] write\_cache\_pages+0x1cf/0x3e0
[] ? \_\_writepage+0x0/0x40
[] generic\_writepages+0x22/0x30
[] do\_writepages+0x1f/0x40
[] writeback\_single\_inode+0xe7/0x3b0
[] writeback\_sb\_inodes+0x184/0x280
[] writeback\_inodes\_wb+0x6b/0x1a0
[] wb\_writeback+0x23b/0x2a0
[] wb\_do\_writeback+0x17d/0x190
[] bdi\_writeback\_task+0x4b/0xe0
[] ? bdi\_start\_fn+0x0/0x100
[] bdi\_start\_fn+0x81/0x100
[] ? bdi\_start\_fn+0x0/0x100
[] kthread+0x8e/0xa0
[] ? finish\_task\_switch+0x54/0xc0
[] kernel\_thread\_helper+0x4/0x10
[] ? kthread+0x0/0xa0
[] ? kernel\_thread\_helper+0x0/0x10
The above trace was triggered by
"dd if=/dev/zero of=/dev/sr0 bs=2048 count=32768"
Signed-off-by: Shan Hai
Signed-off-by: Tejun Heo
Signed-off-by: Ben Hutchings
commit daade495c07b60f65a2689a3ad47c9fb1be42ebc
Author: xiangliang yu
Date: Sun Oct 27 08:03:04 2013 -0400
ahci: disabled FBS prior to issuing software reset
commit 89dafa20f3daab5b3e0c13d0068a28e8e64e2102 upstream.
Tested with Marvell 88se9125, attached with one port mulitplier(5 ports)
and one disk, we will get following boot log messages if using current
code:
ata8: SATA link up 6.0 Gbps (SStatus 133 SControl 330)
ata8.15: Port Multiplier 1.2, 0x1b4b:0x9715 r160, 5 ports, feat 0x1/0x1f
ahci 0000:03:00.0: FBS is enabled
ata8.00: hard resetting link
ata8.00: SATA link down (SStatus 0 SControl 330)
ata8.01: hard resetting link
ata8.01: SATA link down (SStatus 0 SControl 330)
ata8.02: hard resetting link
ata8.02: SATA link down (SStatus 0 SControl 330)
ata8.03: hard resetting link
ata8.03: SATA link up 6.0 Gbps (SStatus 133 SControl 133)
ata8.04: hard resetting link
ata8.04: failed to resume link (SControl 133)
ata8.04: failed to read SCR 0 (Emask=0x40)
ata8.04: failed to read SCR 0 (Emask=0x40)
ata8.04: failed to read SCR 1 (Emask=0x40)
ata8.04: failed to read SCR 0 (Emask=0x40)
ata8.03: native sectors (2) is smaller than sectors (976773168)
ata8.03: ATA-8: ST3500413AS, JC4B, max UDMA/133
ata8.03: 976773168 sectors, multi 0: LBA48 NCQ (depth 31/32)
ata8.03: configured for UDMA/133
ata8.04: failed to IDENTIFY (I/O error, err\_mask=0x100)
ata8.15: hard resetting link
ata8.15: SATA link up 6.0 Gbps (SStatus 133 SControl 330)
ata8.15: Port Multiplier vendor mismatch '0x1b4b' != '0x133'
ata8.15: PMP revalidation failed (errno=-19)
ata8.15: hard resetting link
ata8.15: SATA link up 6.0 Gbps (SStatus 133 SControl 330)
ata8.15: Port Multiplier vendor mismatch '0x1b4b' != '0x133'
ata8.15: PMP revalidation failed (errno=-19)
ata8.15: limiting SATA link speed to 3.0 Gbps
ata8.15: hard resetting link
ata8.15: SATA link up 3.0 Gbps (SStatus 123 SControl 320)
ata8.15: Port Multiplier vendor mismatch '0x1b4b' != '0x133'
ata8.15: PMP revalidation failed (errno=-19)
ata8.15: failed to recover PMP after 5 tries, giving up
ata8.15: Port Multiplier detaching
ata8.03: disabled
ata8.00: disabled
ata8: EH complete
The reason is that current detection code doesn't follow AHCI spec:
First,the port multiplier detection process look like this:
ahci\_hardreset(link, class, deadline)
if (class == ATA\_DEV\_PMP) {
sata\_pmp\_attach(dev) /\* will enable FBS \*/
sata\_pmp\_init\_links(ap, nr\_ports);
ata\_for\_each\_link(link, ap, EDGE) {
sata\_std\_hardreset(link, class, deadline);
if (link\_is\_online) /\* do soft reset \*/
ahci\_softreset(link, class, deadline);
}
}
But, according to chapter 9.3.9 in AHCI spec: Prior to issuing software
reset, software shall clear PxCMD.ST to '0' and then clear PxFBS.EN to
'0'.
The patch test ok with kernel 3.11.1.
tj: Patch white space contaminated, applied manually with trivial
updates.
Signed-off-by: Xiangliang Yu
Signed-off-by: Tejun Heo
Signed-off-by: Ben Hutchings
commit 756d23aae591c9d60e8247a6e567208c18dfa3bc
Author: Gwendal Grignou
Date: Fri Oct 25 16:28:57 2013 -0700
libata: Fix display of sata speed
commit 3e85c3ecbc520751324a191d23bb94873ed01b10 upstream.
6.0 Gbps link speed was not decoded properly:
speed was reported at 3.0 Gbps only.
Tested: On a machine where libata reports 6.0 Gbps in
/var/log/messages:
ata1: SATA link up 6.0 Gbps (SStatus 133 SControl 300)
Before:
cat /sys/class/ata\_link/link1/sata\_spd
3.0 Gbps
After:
cat /sys/class/ata\_link/link1/sata\_spd
6.0 Gbps
Signed-off-by: Gwendal Grignou
Signed-off-by: Tejun Heo
Signed-off-by: Ben Hutchings
commit 02241fe0aa59a8a00e00f15a01bcb7c581ef4cd8
Author: Rui li
Date: Fri Oct 25 10:57:21 2013 +0800
USB：add new zte 3g-dongle's pid to option.c
commit 0636fc507a976cdc40f21bdbcce6f0b98ff1dfe9 upstream.
Signed-off-by: Rui li
Signed-off-by: Greg Kroah-Hartman
Signed-off-by: Ben Hutchings
commit ae1bef09a739c7b1eaef7f18297c87cee6c0e690
Author: KOSAKI Motohiro
Date: Mon Oct 14 17:33:16 2013 -0400
alarmtimer: return EINVAL instead of ENOTSUPP if rtcdev doesn't exist
commit 98d6f4dd84a134d942827584a3c5f67ffd8ec35f upstream.
Fedora Ruby maintainer reported latest Ruby doesn't work on Fedora Rawhide
on ARM. (http://bugs.ruby-lang.org/issues/9008)
Because of, commit 1c6b39ad3f (alarmtimers: Return -ENOTSUPP if no
RTC device is present) intruduced to return ENOTSUPP when
clock\_get{time,res} can't find a RTC device. However this is incorrect.
First, ENOTSUPP isn't exported to userland (ENOTSUP or EOPNOTSUP are the
closest userland equivlents).
Second, Posix and Linux man pages agree that clock\_gettime and
clock\_getres should return EINVAL if clk\_id argument is invalid.
While the arugment that the clockid is valid, but just not supported
on this hardware could be made, this is just a technicality that
doesn't help userspace applicaitons, and only complicates error
handling.
Thus, this patch changes the code to use EINVAL.
Cc: Thomas Gleixner
Cc: Frederic Weisbecker
Reported-by: Vit Ondruch
Signed-off-by: KOSAKI Motohiro
[jstultz: Tweaks to commit message to include full rational]
Signed-off-by: John Stultz
Signed-off-by: Ben Hutchings
commit 3044670ab992479da23ed94234e0fe9d1cddb722
Author: Stanislaw Gruszka
Date: Tue Oct 15 14:31:12 2013 +0200
rt2x00: check if device is still available on rt2x00mac\_flush()
commit 5671ab05cf2a579218985ef56595387932d78ee4 upstream.
Fix random kernel panic with below messages when remove dongle.
[ 2212.355447] BUG: unable to handle kernel NULL pointer dereference at 0000000000000250
[ 2212.355527] IP: [] rt2x00usb\_kick\_tx\_entry+0x12/0x160 [rt2x00usb]
[ 2212.355599] PGD 0
[ 2212.355626] Oops: 0000 [#1] SMP
[ 2212.355664] Modules linked in: rt2800usb rt2x00usb rt2800lib crc\_ccitt rt2x00lib mac80211 cfg80211 tun arc4 fuse rfcomm bnep snd\_hda\_codec\_realtek snd\_hda\_intel snd\_hda\_codec btusb uvcvideo bluetooth snd\_hwdep x86\_pkg\_temp\_thermal snd\_seq coretemp aesni\_intel aes\_x86\_64 snd\_seq\_device glue\_helper snd\_pcm ablk\_helper videobuf2\_vmalloc sdhci\_pci videobuf2\_memops videobuf2\_core sdhci videodev mmc\_core serio\_raw snd\_page\_alloc microcode i2c\_i801 snd\_timer hid\_multitouch thinkpad\_acpi lpc\_ich mfd\_core snd tpm\_tis wmi tpm tpm\_bios soundcore acpi\_cpufreq i915 i2c\_algo\_bit drm\_kms\_helper drm i2c\_core video [last unloaded: cfg80211]
[ 2212.356224] CPU: 0 PID: 34 Comm: khubd Not tainted 3.12.0-rc3-wl+ #3
[ 2212.356268] Hardware name: LENOVO 3444CUU/3444CUU, BIOS G6ET93WW (2.53 ) 02/04/2013
[ 2212.356319] task: ffff880212f687c0 ti: ffff880212f66000 task.ti: ffff880212f66000
[ 2212.356392] RIP: 0010:[] [] rt2x00usb\_kick\_tx\_entry+0x12/0x160 [rt2x00usb]
[ 2212.356481] RSP: 0018:ffff880212f67750 EFLAGS: 00010202
[ 2212.356519] RAX: 000000000000000c RBX: 000000000000000c RCX: 0000000000000293
[ 2212.356568] RDX: ffff8801f4dc219a RSI: 0000000000000000 RDI: 0000000000000240
[ 2212.356617] RBP: ffff880212f67778 R08: ffffffffa02667e0 R09: 0000000000000002
[ 2212.356665] R10: 0001f95254ab4b40 R11: ffff880212f675be R12: ffff8801f4dc2150
[ 2212.356712] R13: 0000000000000000 R14: ffffffffa02667e0 R15: 000000000000000d
[ 2212.356761] FS: 0000000000000000(0000) GS:ffff88021e200000(0000) knlGS:0000000000000000
[ 2212.356813] CS: 0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[ 2212.356852] CR2: 0000000000000250 CR3: 0000000001a0c000 CR4: 00000000001407f0
[ 2212.356899] Stack:
[ 2212.356917] 000000000000000c ffff8801f4dc2150 0000000000000000 ffffffffa02667e0
[ 2212.356980] 000000000000000d ffff880212f677b8 ffffffffa03a31ad ffff8801f4dc219a
[ 2212.357038] ffff8801f4dc2150 0000000000000000 ffff8800b93217a0 ffff8801f49bc800
[ 2212.357099] Call Trace:
[ 2212.357122] [] ? rt2x00usb\_interrupt\_txdone+0x90/0x90 [rt2x00usb]
[ 2212.357174] [] rt2x00queue\_for\_each\_entry+0xed/0x170 [rt2x00lib]
[ 2212.357244] [] rt2x00usb\_kick\_queue+0x5c/0x60 [rt2x00usb]
[ 2212.357314] [] rt2x00queue\_flush\_queue+0x62/0xa0 [rt2x00lib]
[ 2212.357386] [] rt2x00mac\_flush+0x30/0x70 [rt2x00lib]
[ 2212.357470] [] ieee80211\_flush\_queues+0xbd/0x140 [mac80211]
[ 2212.357555] [] ieee80211\_set\_disassoc+0x2d2/0x3d0 [mac80211]
[ 2212.357645] [] ieee80211\_mgd\_deauth+0x1d3/0x240 [mac80211]
[ 2212.357718] [] ? try\_to\_wake\_up+0xec/0x290
[ 2212.357788] [] ieee80211\_deauth+0x18/0x20 [mac80211]
[ 2212.357872] [] cfg80211\_mlme\_deauth+0x9c/0x140 [cfg80211]
[ 2212.357913] [] cfg80211\_mlme\_down+0x5c/0x60 [cfg80211]
[ 2212.357962] [] cfg80211\_disconnect+0x188/0x1a0 [cfg80211]
[ 2212.358014] [] ? \_\_cfg80211\_stop\_sched\_scan+0x1c/0x130 [cfg80211]
[ 2212.358067] [] cfg80211\_leave+0xc4/0xe0 [cfg80211]
[ 2212.358124] [] cfg80211\_netdev\_notifier\_call+0x3ab/0x5e0 [cfg80211]
[ 2212.358177] [] ? inetdev\_event+0x38/0x510
[ 2212.358217] [] ? \_\_wake\_up+0x44/0x50
[ 2212.358254] [] notifier\_call\_chain+0x4c/0x70
[ 2212.358293] [] raw\_notifier\_call\_chain+0x16/0x20
[ 2212.358361] [] call\_netdevice\_notifiers\_info+0x35/0x60
[ 2212.358429] [] \_\_dev\_close\_many+0x49/0xd0
[ 2212.358487] [] dev\_close\_many+0x88/0x100
[ 2212.358546] [] rollback\_registered\_many+0xb0/0x220
[ 2212.358612] [] unregister\_netdevice\_many+0x19/0x60
[ 2212.358694] [] ieee80211\_remove\_interfaces+0x112/0x190 [mac80211]
[ 2212.358791] [] ieee80211\_unregister\_hw+0x4f/0x100 [mac80211]
[ 2212.361994] [] rt2x00lib\_remove\_dev+0x161/0x1a0 [rt2x00lib]
[ 2212.365240] [] rt2x00usb\_disconnect+0x2e/0x70 [rt2x00usb]
[ 2212.368470] [] usb\_unbind\_interface+0x64/0x1c0
[ 2212.371734] [] \_\_device\_release\_driver+0x7f/0xf0
[ 2212.374999] [] device\_release\_driver+0x23/0x30
[ 2212.378131] [] bus\_remove\_device+0x108/0x180
[ 2212.381358] [] device\_del+0x135/0x1d0
[ 2212.384454] [] usb\_disable\_device+0xb0/0x270
[ 2212.387451] [] usb\_disconnect+0xad/0x1d0
[ 2212.390294] [] hub\_thread+0x63d/0x1660
[ 2212.393034] [] ? wake\_up\_atomic\_t+0x30/0x30
[ 2212.395728] [] ? hub\_port\_debounce+0x130/0x130
[ 2212.398412] [] kthread+0xc0/0xd0
[ 2212.401058] [] ? insert\_kthread\_work+0x40/0x40
[ 2212.403639] [] ret\_from\_fork+0x7c/0xb0
[ 2212.406193] [] ? insert\_kthread\_work+0x40/0x40
[ 2212.408732] Code: 24 58 08 00 00 bf 80 00 00 00 e8 3a c3 e0 e0 5b 41 5c 5d c3 0f 1f 44 00 00 0f 1f 44 00 00 55 48 89 e5 41 57 41 56 41 55 41 54 53 <48> 8b 47 10 48 89 fb 4c 8b 6f 28 4c 8b 20 49 8b 04 24 4c 8b 30
[ 2212.414671] RIP [] rt2x00usb\_kick\_tx\_entry+0x12/0x160 [rt2x00usb]
[ 2212.417646] RSP
[ 2212.420547] CR2: 0000000000000250
[ 2212.441024] ---[ end trace 5442918f33832bce ]---
Signed-off-by: Stanislaw Gruszka
Acked-by: Helmut Schaa
Signed-off-by: John W. Linville
Signed-off-by: Ben Hutchings
commit c13355c7b4a21643c7c940f94a589731224b1ada
Author: Stanislaw Gruszka
Date: Tue Oct 15 14:28:48 2013 +0200
rt2400pci: fix RSSI read
commit 2bf127a5cc372b9319afcbae10b090663b621c8b upstream.
RSSI value is provided on word3 not on word2.
Signed-off-by: Stanislaw Gruszka
Signed-off-by: John W. Linville
Signed-off-by: Ben Hutchings
commit 40c8b4ee658b72eb8c4627c0620a5bb44427d869
Author: Julius Werner
Date: Tue Oct 15 17:45:00 2013 -0700
usb: hub: Clear Port Reset Change during init/resume
commit e92aee330837e4911553761490a8fb843f2053a6 upstream.
This patch adds the Port Reset Change flag to the set of bits that are
preemptively cleared on init/resume of a hub. In theory this bit should
never be set unexpectedly... in practice it can still happen if BIOS,
SMM or ACPI code plays around with USB devices without cleaning up
correctly. This is especially dangerous for XHCI root hubs, which don't
generate any more Port Status Change Events until all change bits are
cleared, so this is a good precaution to have (similar to how it's
already done for the Warm Port Reset Change flag).
Signed-off-by: Julius Werner
Acked-by: Alan Stern
Signed-off-by: Greg Kroah-Hartman
[bwh: Backported to 3.2:
- Adjust context
- s/usb\_clear\_port\_feature/clear\_port\_feature/]
Signed-off-by: Ben Hutchings
commit 7e6337b694966dd7d3b9d904c830b48a4e6a80a6
Author: Sarah Sharp
Date: Mon Sep 30 17:26:29 2013 +0300
usb: Disable USB 2.0 Link PM before device reset.
commit dcc01c0864823f91c3bf3ffca6613e2351702b87 upstream.
Before the USB core resets a device, we need to disable the L1 timeout
for the roothub, if USB 2.0 Link PM is enabled. Otherwise the port may
transition into L1 in between descriptor fetches, before we know if the
USB device descriptors changed. LPM will be re-enabled after the
full device descriptors are fetched, and we can confirm the device still
supports USB 2.0 LPM after the reset.
We don't need to wait for the USB device to exit L1 before resetting the
device, since the xHCI roothub port diagrams show a transition to the
Reset state from any of the Ux states (see Figure 34 in the 2012-08-14
xHCI specification update).
This patch should be backported to kernels as old as 3.2, that contain
the commit 65580b4321eb36f16ae8b5987bfa1bb948fc5112 "xHCI: set USB2
hardware LPM". That was the first commit to enable USB 2.0
hardware-driven Link Power Management.
Signed-off-by: Sarah Sharp
[bwh: Backported to 3.2: adjust context]
Signed-off-by: Ben Hutchings
commit 868272660822f69f4653b1d2609a02231d3944e6
Author: Johan Hovold
Date: Wed Oct 9 17:01:09 2013 +0200
USB: mos7840: fix tiocmget error handling
commit a91ccd26e75235d86248d018fe3779732bcafd8d upstream.
Make sure to return errors from tiocmget rather than rely on
uninitialised stack data.
Signed-off-by: Johan Hovold
Signed-off-by: Greg Kroah-Hartman
Signed-off-by: Ben Hutchings
commit 920362294face70e146b4b2f65dc642c2e9b67f8
Author: Trond Myklebust
Date: Tue Oct 1 14:24:58 2013 -0400
NFSv4: Fix a use-after-free situation in \_nfs4\_proc\_getlk()
commit a6f951ddbdfb7bd87d31a44f61abe202ed6ce57f upstream.
In nfs4\_proc\_getlk(), when some error causes a retry of the call to
\_nfs4\_proc\_getlk(), we can end up with Oopses of the form
BUG: unable to handle kernel NULL pointer dereference at 0000000000000134
IP: [] \_raw\_spin\_lock+0xe/0x30
Call Trace:
[] \_atomic\_dec\_and\_lock+0x4d/0x70
[] nfs4\_put\_lock\_state+0x32/0xb0 [nfsv4]
[] nfs4\_fl\_release\_lock+0x15/0x20 [nfsv4]
[] \_nfs4\_proc\_getlk.isra.40+0x146/0x170 [nfsv4]
[] nfs4\_proc\_lock+0x399/0x5a0 [nfsv4]
The problem is that we don't clear the request->fl\_ops after the first
try and so when we retry, nfs4\_set\_lock\_state() exits early without
setting the lock stateid.
Regression introduced by commit 70cc6487a4e08b8698c0e2ec935fb48d10490162
(locks: make ->lock release private data before returning in GETLK case)
Reported-by: Weston Andros Adamson
Reported-by: Jorge Mora
Signed-off-by: Trond Myklebust
Signed-off-by: Ben Hutchings
commit b18bcfee90ed988e8e4f2072ce97173bbe05b201
Author: Paul Moore
Date: Thu Sep 26 17:00:46 2013 -0400
selinux: correct locking in selinux\_netlbl\_socket\_connect)
commit 42d64e1add3a1ce8a787116036163b8724362145 upstream.
The SELinux/NetLabel glue code has a locking bug that affects systems
with NetLabel enabled, see the kernel error message below. This patch
corrects this problem by converting the bottom half socket lock to a
more conventional, and correct for this call-path, lock\_sock() call.
===============================
[ INFO: suspicious RCU usage. ]
3.11.0-rc3+ #19 Not tainted
-------------------------------
net/ipv4/cipso\_ipv4.c:1928 suspicious rcu\_dereference\_protected() usage!
other info that might help us debug this:
rcu\_scheduler\_active = 1, debug\_locks = 0
2 locks held by ping/731:
#0: (slock-AF\_INET/1){+.-...}, at: [...] selinux\_netlbl\_socket\_connect
#1: (rcu\_read\_lock){.+.+..}, at: [<...>] netlbl\_conn\_setattr
stack backtrace:
CPU: 1 PID: 731 Comm: ping Not tainted 3.11.0-rc3+ #19
Hardware name: Bochs Bochs, BIOS Bochs 01/01/2011
0000000000000001 ffff88006f659d28 ffffffff81726b6a ffff88003732c500
ffff88006f659d58 ffffffff810e4457 ffff88006b845a00 0000000000000000
000000000000000c ffff880075aa2f50 ffff88006f659d90 ffffffff8169bec7
Call Trace:
[] dump\_stack+0x54/0x74
[] lockdep\_rcu\_suspicious+0xe7/0x120
[] cipso\_v4\_sock\_setattr+0x187/0x1a0
[] netlbl\_conn\_setattr+0x187/0x190
[] ? netlbl\_conn\_setattr+0x5/0x190
[] selinux\_netlbl\_socket\_connect+0xae/0xc0
[] selinux\_socket\_connect+0x135/0x170
[] ? might\_fault+0x57/0xb0
[] security\_socket\_connect+0x16/0x20
[] SYSC\_connect+0x73/0x130
[] ? sysret\_check+0x22/0x5d
[] ? trace\_hardirqs\_on\_caller+0xfd/0x1c0
[] ? trace\_hardirqs\_on\_thunk+0x3a/0x3f
[] SyS\_connect+0xe/0x10
[] system\_call\_fastpath+0x16/0x1b
Signed-off-by: Paul Moore
Signed-off-by: Ben Hutchings


=== Content from lists.opensuse.org_535c50d9_20250125_153344.html ===


[![openSUSE](https://static.opensuse.org/favicon.svg)
Mailing Lists](/archives/ "openSUSE Mailing Lists")

[Sign In](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/45VR2J6DOCMZ7DOFZ5B4QZ5CLCL3DYNQ/)
[Sign Up](/accounts/signup/?next=/archives/list/security-announce%40lists.opensuse.org/message/45VR2J6DOCMZ7DOFZ5B4QZ5CLCL3DYNQ/)

[Manage this list](/manage/lists/security-announce.lists.opensuse.org/)
[Sign In](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/45VR2J6DOCMZ7DOFZ5B4QZ5CLCL3DYNQ/)
[Sign Up](/accounts/signup/?next=/archives/list/security-announce%40lists.opensuse.org/message/45VR2J6DOCMZ7DOFZ5B4QZ5CLCL3DYNQ/)

×
#### Keyboard Shortcuts

### Thread View

* `j`: Next unread message
* `k`: Previous unread message
* `j a`: Jump to all threads* `j l`: Jump to MailingList overview

[thread](/archives/list/security-announce%40lists.opensuse.org/thread/45VR2J6DOCMZ7DOFZ5B4QZ5CLCL3DYNQ/#45VR2J6DOCMZ7DOFZ5B4QZ5CLCL3DYNQ)

# [security-announce] openSUSE-SU-2015:0566-1: important: kernel update for Evergreen 11.4, includes leap second deadlock fix

![](https://seccdn.libravatar.org/avatar/099a17325bdf082b643d1a6bbacde279.jpg?s=120&d=mm&r=g)
## [opensuse-security＠opensuse.org](/archives/users/1b72def497ef4503896cd7a5fe9fb8e0/ "See the profile for opensuse-security＠opensuse.org")

21 Mar
2015

21 Mar
'15

14:04

openSUSE Security Update: kernel update for Evergreen 11.4, includes leap second deadlock fix
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
Announcement ID: openSUSE-SU-2015:0566-1
Rating: important
References: #771619 #778463 #833588 #835839 #847652 #853040
#864049 #865442 #867531 #867723 #870161 #875051
#876633 #880892 #883096 #883724 #883948 #887082
#892490 #892782 #895680 #896382 #896390 #896391
#896392 #897995 #898693 #899192 #901885 #902232
#902346 #902349 #902351 #902675 #903640 #904013
#904700 #905100 #905312 #905799 #906586 #907189
#907338 #907396 #907818 #909077 #909078 #910251
#912654 #912705 #915335
Cross-References: CVE-2012-4398 CVE-2013-2893 CVE-2013-2897
CVE-2013-2899 CVE-2013-2929 CVE-2013-7263
CVE-2014-0131 CVE-2014-0181 CVE-2014-2309
CVE-2014-3181 CVE-2014-3184 CVE-2014-3185
CVE-2014-3186 CVE-2014-3601 CVE-2014-3610
CVE-2014-3646 CVE-2014-3647 CVE-2014-3673
CVE-2014-3687 CVE-2014-3688 CVE-2014-3690
CVE-2014-4508 CVE-2014-4608 CVE-2014-4943
CVE-2014-5471 CVE-2014-5472 CVE-2014-7826
CVE-2014-7841 CVE-2014-7842 CVE-2014-8133
CVE-2014-8134 CVE-2014-8369 CVE-2014-8559
CVE-2014-8709 CVE-2014-9090 CVE-2014-9322
CVE-2014-9584 CVE-2014-9585
Affected Products:
openSUSE Evergreen 11.4
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
An update that solves 38 vulnerabilities and has 13 fixes
is now available.
Description:
kernel update for Evergreen 11.4, includes leap second deadlock fix and
fixes for other security and stability issues
Patch Instructions:
To install this openSUSE Security Update use YaST online\_update.
Alternatively you can run the command listed for your product:
- openSUSE Evergreen 11.4:
zypper in -t patch 2015-10=1
To bring your system up-to-date, use "zypper patch".
Package List:
- openSUSE Evergreen 11.4 (i586 x86\_64):
kernel-debug-3.0.101-99.1
kernel-debug-base-3.0.101-99.1
kernel-debug-base-debuginfo-3.0.101-99.1
kernel-debug-debuginfo-3.0.101-99.1
kernel-debug-debugsource-3.0.101-99.1
kernel-debug-devel-3.0.101-99.1
kernel-debug-devel-debuginfo-3.0.101-99.1
kernel-debug-hmac-3.0.101-99.1
kernel-default-3.0.101-99.1
kernel-default-base-3.0.101-99.1
kernel-default-base-debuginfo-3.0.101-99.1
kernel-default-debuginfo-3.0.101-99.1
kernel-default-debugsource-3.0.101-99.1
kernel-default-devel-3.0.101-99.1
kernel-default-devel-debuginfo-3.0.101-99.1
kernel-default-hmac-3.0.101-99.1
kernel-desktop-3.0.101-99.1
kernel-desktop-base-3.0.101-99.1
kernel-desktop-base-debuginfo-3.0.101-99.1
kernel-desktop-debuginfo-3.0.101-99.1
kernel-desktop-debugsource-3.0.101-99.1
kernel-desktop-devel-3.0.101-99.1
kernel-desktop-devel-debuginfo-3.0.101-99.1
kernel-desktop-hmac-3.0.101-99.1
kernel-ec2-3.0.101-99.1
kernel-ec2-base-3.0.101-99.1
kernel-ec2-base-debuginfo-3.0.101-99.1
kernel-ec2-debuginfo-3.0.101-99.1
kernel-ec2-debugsource-3.0.101-99.1
kernel-ec2-devel-3.0.101-99.1
kernel-ec2-devel-debuginfo-3.0.101-99.1
kernel-ec2-extra-3.0.101-99.1
kernel-ec2-extra-debuginfo-3.0.101-99.1
kernel-ec2-hmac-3.0.101-99.1
kernel-source-3.0.101-99.1
kernel-source-vanilla-3.0.101-99.1
kernel-syms-3.0.101-99.1
kernel-trace-3.0.101-99.1
kernel-trace-base-3.0.101-99.1
kernel-trace-base-debuginfo-3.0.101-99.1
kernel-trace-debuginfo-3.0.101-99.1
kernel-trace-debugsource-3.0.101-99.1
kernel-trace-devel-3.0.101-99.1
kernel-trace-devel-debuginfo-3.0.101-99.1
kernel-trace-hmac-3.0.101-99.1
kernel-vanilla-3.0.101-99.1
kernel-vanilla-base-3.0.101-99.1
kernel-vanilla-base-debuginfo-3.0.101-99.1
kernel-vanilla-debuginfo-3.0.101-99.1
kernel-vanilla-debugsource-3.0.101-99.1
kernel-vanilla-devel-3.0.101-99.1
kernel-vanilla-devel-debuginfo-3.0.101-99.1
kernel-vanilla-hmac-3.0.101-99.1
kernel-xen-3.0.101-99.1
kernel-xen-base-3.0.101-99.1
kernel-xen-base-debuginfo-3.0.101-99.1
kernel-xen-debuginfo-3.0.101-99.1
kernel-xen-debugsource-3.0.101-99.1
kernel-xen-devel-3.0.101-99.1
kernel-xen-devel-debuginfo-3.0.101-99.1
kernel-xen-hmac-3.0.101-99.1
preload-1.2-6.77.1
preload-debuginfo-1.2-6.77.1
preload-debugsource-1.2-6.77.1
preload-kmp-default-1.2\_3.0.101\_99-6.77.1
preload-kmp-default-debuginfo-1.2\_3.0.101\_99-6.77.1
preload-kmp-desktop-1.2\_3.0.101\_99-6.77.1
preload-kmp-desktop-debuginfo-1.2\_3.0.101\_99-6.77.1
- openSUSE Evergreen 11.4 (noarch):
kernel-docs-3.0.101-99.2
- openSUSE Evergreen 11.4 (i586):
kernel-pae-3.0.101-99.1
kernel-pae-base-3.0.101-99.1
kernel-pae-base-debuginfo-3.0.101-99.1
kernel-pae-debuginfo-3.0.101-99.1
kernel-pae-debugsource-3.0.101-99.1
kernel-pae-devel-3.0.101-99.1
kernel-pae-devel-debuginfo-3.0.101-99.1
kernel-pae-hmac-3.0.101-99.1
kernel-vmi-3.0.101-99.1
kernel-vmi-base-3.0.101-99.1
kernel-vmi-base-debuginfo-3.0.101-99.1
kernel-vmi-debuginfo-3.0.101-99.1
kernel-vmi-debugsource-3.0.101-99.1
kernel-vmi-devel-3.0.101-99.1
kernel-vmi-devel-debuginfo-3.0.101-99.1
kernel-vmi-hmac-3.0.101-99.1
References:
<http://support.novell.com/security/cve/CVE-2012-4398.html>
<http://support.novell.com/security/cve/CVE-2013-2893.html>
<http://support.novell.com/security/cve/CVE-2013-2897.html>
<http://support.novell.com/security/cve/CVE-2013-2899.html>
<http://support.novell.com/security/cve/CVE-2013-2929.html>
<http://support.novell.com/security/cve/CVE-2013-7263.html>
<http://support.novell.com/security/cve/CVE-2014-0131.html>
<http://support.novell.com/security/cve/CVE-2014-0181.html>
<http://support.novell.com/security/cve/CVE-2014-2309.html>
<http://support.novell.com/security/cve/CVE-2014-3181.html>
<http://support.novell.com/security/cve/CVE-2014-3184.html>
<http://support.novell.com/security/cve/CVE-2014-3185.html>
<http://support.novell.com/security/cve/CVE-2014-3186.html>
<http://support.novell.com/security/cve/CVE-2014-3601.html>
<http://support.novell.com/security/cve/CVE-2014-3610.html>
<http://support.novell.com/security/cve/CVE-2014-3646.html>
<http://support.novell.com/security/cve/CVE-2014-3647.html>
<http://support.novell.com/security/cve/CVE-2014-3673.html>
<http://support.novell.com/security/cve/CVE-2014-3687.html>
<http://support.novell.com/security/cve/CVE-2014-3688.html>
<http://support.novell.com/security/cve/CVE-2014-3690.html>
<http://support.novell.com/security/cve/CVE-2014-4508.html>
<http://support.novell.com/security/cve/CVE-2014-4608.html>
<http://support.novell.com/security/cve/CVE-2014-4943.html>
<http://support.novell.com/security/cve/CVE-2014-5471.html>
<http://support.novell.com/security/cve/CVE-2014-5472.html>
<http://support.novell.com/security/cve/CVE-2014-7826.html>
<http://support.novell.com/security/cve/CVE-2014-7841.html>
<http://support.novell.com/security/cve/CVE-2014-7842.html>
<http://support.novell.com/security/cve/CVE-2014-8133.html>
<http://support.novell.com/security/cve/CVE-2014-8134.html>
<http://support.novell.com/security/cve/CVE-2014-8369.html>
<http://support.novell.com/security/cve/CVE-2014-8559.html>
<http://support.novell.com/security/cve/CVE-2014-8709.html>
<http://support.novell.com/security/cve/CVE-2014-9090.html>
<http://support.novell.com/security/cve/CVE-2014-9322.html>
<http://support.novell.com/security/cve/CVE-2014-9584.html>
<http://support.novell.com/security/cve/CVE-2014-9585.html>
<https://bugzilla.suse.com/771619>
<https://bugzilla.suse.com/778463>
<https://bugzilla.suse.com/833588>
<https://bugzilla.suse.com/835839>
<https://bugzilla.suse.com/847652>
<https://bugzilla.suse.com/853040>
<https://bugzilla.suse.com/864049>
<https://bugzilla.suse.com/865442>
<https://bugzilla.suse.com/867531>
<https://bugzilla.suse.com/867723>
<https://bugzilla.suse.com/870161>
<https://bugzilla.suse.com/875051>
<https://bugzilla.suse.com/876633>
<https://bugzilla.suse.com/880892>
<https://bugzilla.suse.com/883096>
<https://bugzilla.suse.com/883724>
<https://bugzilla.suse.com/883948>
<https://bugzilla.suse.com/887082>
<https://bugzilla.suse.com/892490>
<https://bugzilla.suse.com/892782>
<https://bugzilla.suse.com/895680>
<https://bugzilla.suse.com/896382>
<https://bugzilla.suse.com/896390>
<https://bugzilla.suse.com/896391>
<https://bugzilla.suse.com/896392>
<https://bugzilla.suse.com/897995>
<https://bugzilla.suse.com/898693>
<https://bugzilla.suse.com/899192>
<https://bugzilla.suse.com/901885>
<https://bugzilla.suse.com/902232>
<https://bugzilla.suse.com/902346>
<https://bugzilla.suse.com/902349>
<https://bugzilla.suse.com/902351>
<https://bugzilla.suse.com/902675>
<https://bugzilla.suse.com/903640>
<https://bugzilla.suse.com/904013>
<https://bugzilla.suse.com/904700>
<https://bugzilla.suse.com/905100>
<https://bugzilla.suse.com/905312>
<https://bugzilla.suse.com/905799>
<https://bugzilla.suse.com/906586>
<https://bugzilla.suse.com/907189>
<https://bugzilla.suse.com/907338>
<https://bugzilla.suse.com/907396>
<https://bugzilla.suse.com/907818>
<https://bugzilla.suse.com/909077>
<https://bugzilla.suse.com/909078>
<https://bugzilla.suse.com/910251>
<https://bugzilla.suse.com/912654>
<https://bugzilla.suse.com/912705>
<https://bugzilla.suse.com/915335>
--
To unsubscribe, e-mail: opensuse-security-announce+unsubscribe@opensuse.org
For additional commands, e-mail: opensuse-security-announce+help@opensuse.org

[0](#like "You must be logged-in to vote.")
[0](#dislike "You must be logged-in to vote.")

Reply

[Sign in to reply online](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/45VR2J6DOCMZ7DOFZ5B4QZ5CLCL3DYNQ/)
Use email software

[Back to the thread](/archives/list/security-announce%40lists.opensuse.org/thread/45VR2J6DOCMZ7DOFZ5B4QZ5CLCL3DYNQ/#45VR2J6DOCMZ7DOFZ5B4QZ5CLCL3DYNQ)

[Back to the list](/archives/list/security-announce%40lists.opensuse.org/)

![HyperKitty](/static/hyperkitty/img/logo.png)
Powered by [HyperKitty](http://hyperkitty.readthedocs.org) version 1.3.12.



=== Content from marc.info_601b41b1_20250125_153345.html ===

```
[[prev in list](?l=linux-input&m=137772189314633&w=1)] [[next in list](?l=linux-input&m=137772191114645&w=1)] [prev in thread] [[next in thread](?l=linux-input&m=137776676326006&w=1)]
List:       [linux-input](?l=linux-input&r=1&w=1)
Subject:    [[PATCH 11/14] HID: multitouch: validate feature report details](?t=137772196600008&r=1&w=1)
From:       [Jiri Kosina <jkosina () suse ! cz>](?a=116429103900007&r=1&w=1)
Date:       [2013-08-28 20:31:37](?l=linux-input&r=1&w=1&b=201308)
Message-ID: [alpine.LNX.2.00.1308282221440.22181 () pobox ! suse ! cz](?i=alpine.LNX.2.00.1308282221440.22181%20()%20pobox%20!%20suse%20!%20cz)
[Download RAW [message](?l=linux-input&m=137772190214635&q=mbox) or [body](?l=linux-input&m=137772190214635&q=raw)]

From: Kees Cook <keescook@chromium.org>

When working on report indexes, always validate that they are in bounds.
Without this, a HID device could report a malicious feature report that
could trick the driver into a heap overflow:

[  634.885003] usb 1-1: New USB device found, idVendor=0596, idProduct=0500
...
[  676.469629] BUG kmalloc-192 (Tainted: G        W   ): Redzone \
overwritten

CVE-2013-2897

Signed-off-by: Kees Cook <keescook@chromium.org>
Cc: stable@kernel.org
---
 drivers/hid/hid-multitouch.c |   25 ++++++++++++++++++++-----
 1 file changed, 20 insertions(+), 5 deletions(-)

diff --git a/drivers/hid/hid-multitouch.c b/drivers/hid/hid-multitouch.c
index cb0e361..2aa275e 100644
--- a/drivers/hid/hid-multitouch.c
+++ b/drivers/hid/hid-multitouch.c
@@ -330,9 +330,18 @@ static void mt_feature_mapping(struct hid_device \
*hdev,  break;
 			}
 		}
+		/* Ignore if value index is out of bounds. */
+		if (td->inputmode_index < 0 ||
+		    td->inputmode_index >= field->report_count) {
+			dev_err(&hdev->dev, "HID_DG_INPUTMODE out of range\n");
+			td->inputmode = -1;
+		}

 		break;
 	case HID_DG_CONTACTMAX:
+		/* Ignore if value count is out of bounds. */
+		if (field->report_count < 1)
+			break;
 		td->maxcontact_report_id = field->report->id;
 		td->maxcontacts = field->value[[0]](#0);
 		if (!td->maxcontacts &&
@@ -743,15 +752,21 @@ static void mt_touch_report(struct hid_device *hid, \
struct hid_report *report)  unsigned count;
 	int r, n;

+	if (report->maxfield == 0)
+		return;
+
 	/*
 	 * Includes multi-packet support where subsequent
 	 * packets are sent with zero contactcount.
 	 */
-	if (td->cc_index >= 0) {
-		struct hid_field *field = report->field[td->cc_index];
-		int value = field->value[td->cc_value_index];
-		if (value)
-			td->num_expected = value;
+	if (td->cc_index >= 0 && td->cc_index < report->maxfield) {
+		field = report->field[td->cc_index];
+		if (td->cc_value_index >= 0 &&
+		    td->cc_value_index < field->report_count) {
+			int value = field->value[td->cc_value_index];
+			if (value)
+				td->num_expected = value;
+		}
 	}

 	for (r = 0; r < report->maxfield; r++) {

--
Jiri Kosina
SUSE Labs
--
To unsubscribe from this list: send the line "unsubscribe linux-input" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  <http://vger.kernel.org/majordomo-info.html>

[[prev in list](?l=linux-input&m=137772189314633&w=1)] [[next in list](?l=linux-input&m=137772191114645&w=1)] [prev in thread] [[next in thread](?l=linux-input&m=137776676326006&w=1)]

```

[Configure](?q=configure) |
[About](?q=about) |
[News](?q=news) |
Add a list |
Sponsored by [KoreLogic](http://www.korelogic.com/)



=== Content from lists.opensuse.org_9da83416_20250125_153344.html ===


[![openSUSE](https://static.opensuse.org/favicon.svg)
Mailing Lists](/archives/ "openSUSE Mailing Lists")

[Sign In](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/UHQROQICGL52MGFXDJOGBY7YPIPBN2UL/)
[Sign Up](/accounts/signup/?next=/archives/list/security-announce%40lists.opensuse.org/message/UHQROQICGL52MGFXDJOGBY7YPIPBN2UL/)

[Manage this list](/manage/lists/security-announce.lists.opensuse.org/)
[Sign In](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/UHQROQICGL52MGFXDJOGBY7YPIPBN2UL/)
[Sign Up](/accounts/signup/?next=/archives/list/security-announce%40lists.opensuse.org/message/UHQROQICGL52MGFXDJOGBY7YPIPBN2UL/)

×
#### Keyboard Shortcuts

### Thread View

* `j`: Next unread message
* `k`: Previous unread message
* `j a`: Jump to all threads* `j l`: Jump to MailingList overview

[thread](/archives/list/security-announce%40lists.opensuse.org/thread/UHQROQICGL52MGFXDJOGBY7YPIPBN2UL/#UHQROQICGL52MGFXDJOGBY7YPIPBN2UL)

# [security-announce] SUSE-SU-2015:0481-1: important: Security update for Linux kernel

![](https://seccdn.libravatar.org/avatar/099a17325bdf082b643d1a6bbacde279.jpg?s=120&d=mm&r=g)
## [opensuse-security＠opensuse.org](/archives/users/1b72def497ef4503896cd7a5fe9fb8e0/ "See the profile for opensuse-security＠opensuse.org")

11 Mar
2015

11 Mar
'15

19:05

SUSE Security Update: Security update for Linux kernel
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
Announcement ID: SUSE-SU-2015:0481-1
Rating: important
References: #771619 #779488 #833588 #835839 #847652 #857643
#864049 #865442 #867531 #867723 #870161 #875051
#876633 #880892 #883096 #883948 #887082 #892490
#892782 #895680 #896382 #896390 #896391 #896392
#897995 #898693 #899192 #901885 #902232 #902346
#902349 #902351 #902675 #903640 #904013 #904700
#905100 #905312 #905799 #906586 #907189 #907338
#907396 #909078 #912654 #912705 #915335
Cross-References: CVE-2012-4398 CVE-2013-2893 CVE-2013-2897
CVE-2013-2899 CVE-2013-2929 CVE-2013-7263
CVE-2014-0131 CVE-2014-0181 CVE-2014-2309
CVE-2014-3181 CVE-2014-3184 CVE-2014-3185
CVE-2014-3186 CVE-2014-3601 CVE-2014-3610
CVE-2014-3646 CVE-2014-3647 CVE-2014-3673
CVE-2014-3687 CVE-2014-3688 CVE-2014-3690
CVE-2014-4608 CVE-2014-4943 CVE-2014-5471
CVE-2014-5472 CVE-2014-7826 CVE-2014-7841
CVE-2014-7842 CVE-2014-8134 CVE-2014-8369
CVE-2014-8559 CVE-2014-8709 CVE-2014-9584
CVE-2014-9585
Affected Products:
SUSE Linux Enterprise Server 11 SP2 LTSS
SLE 11 SERVER Unsupported Extras
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
An update that solves 34 vulnerabilities and has 13 fixes
is now available. It includes one version update.
Description:
The SUSE Linux Enterprise 11 Service Pack 2 LTSS kernel has been updated
to fix security issues on kernels on the x86\_64 architecture.
The following security bugs have been fixed:
\* CVE-2012-4398: The \_\_request\_module function in kernel/kmod.c in the
Linux kernel before 3.4 did not set a certain killable attribute,
which allowed local users to cause a denial of service (memory
consumption) via a crafted application (bnc#779488).
\* CVE-2013-2893: The Human Interface Device (HID) subsystem in the
Linux kernel through 3.11, when CONFIG\_LOGITECH\_FF,
CONFIG\_LOGIG940\_FF, or CONFIG\_LOGIWHEELS\_FF is enabled, allowed
physically proximate attackers to cause a denial of service
(heap-based out-of-bounds write) via a crafted device, related to
(1) drivers/hid/hid-lgff.c, (2) drivers/hid/hid-lg3ff.c, and (3)
drivers/hid/hid-lg4ff.c (bnc#835839).
\* CVE-2013-2897: Multiple array index errors in
drivers/hid/hid-multitouch.c in the Human Interface Device (HID)
subsystem in the Linux kernel through 3.11, when
CONFIG\_HID\_MULTITOUCH is enabled, allowed physically proximate
attackers to cause a denial of service (heap memory corruption, or
NULL pointer dereference and OOPS) via a crafted device (bnc#835839).
\* CVE-2013-2899: drivers/hid/hid-picolcd\_core.c in the Human Interface
Device (HID) subsystem in the Linux kernel through 3.11, when
CONFIG\_HID\_PICOLCD is enabled, allowed physically proximate
attackers to cause a denial of service (NULL pointer dereference and
OOPS) via a crafted device (bnc#835839).
\* CVE-2013-2929: The Linux kernel before 3.12.2 did not properly use
the get\_dumpable function, which allowed local users to bypass
intended ptrace restrictions or obtain sensitive information from
IA64 scratch registers via a crafted application, related to
kernel/ptrace.c and arch/ia64/include/asm/processor.h (bnc#847652).
\* CVE-2013-7263: The Linux kernel before 3.12.4 updates certain length
values before ensuring that associated data structures have been
initialized, which allowed local users to obtain sensitive
information from kernel stack memory via a (1) recvfrom, (2)
recvmmsg, or (3) recvmsg system call, related to net/ipv4/ping.c,
net/ipv4/raw.c, net/ipv4/udp.c, net/ipv6/raw.c, and net/ipv6/udp.c
(bnc#857643).
\* CVE-2014-0131: Use-after-free vulnerability in the skb\_segment
function in net/core/skbuff.c in the Linux kernel through 3.13.6
allowed attackers to obtain sensitive information from kernel memory
by leveraging the absence of a certain orphaning operation
(bnc#867723).
\* CVE-2014-0181: The Netlink implementation in the Linux kernel
through 3.14.1 did not provide a mechanism for authorizing socket
operations based on the opener of a socket, which allowed local
users to bypass intended access restrictions and modify network
configurations by using a Netlink socket for the (1) stdout or (2)
stderr of a setuid program (bnc#875051).
\* CVE-2014-2309: The ip6\_route\_add function in net/ipv6/route.c in the
Linux kernel through 3.13.6 did not properly count the addition of
routes, which allowed remote attackers to cause a denial of service
(memory consumption) via a flood of ICMPv6 Router Advertisement
packets (bnc#867531).
\* CVE-2014-3181: Multiple stack-based buffer overflows in the
magicmouse\_raw\_event function in drivers/hid/hid-magicmouse.c in the
Magic Mouse HID driver in the Linux kernel through 3.16.3 allowed
physically proximate attackers to cause a denial of service (system
crash) or possibly execute arbitrary code via a crafted device that
provides a large amount of (1) EHCI or (2) XHCI data associated with
an event (bnc#896382).
\* CVE-2014-3184: The report\_fixup functions in the HID subsystem in
the Linux kernel before 3.16.2 might have allowed physically
proximate attackers to cause a denial of service (out-of-bounds
write) via a crafted device that provides a small report descriptor,
related to (1) drivers/hid/hid-cherry.c, (2) drivers/hid/hid-kye.c,
(3) drivers/hid/hid-lg.c, (4) drivers/hid/hid-monterey.c, (5)
drivers/hid/hid-petalynx.c, and (6) drivers/hid/hid-sunplus.c
(bnc#896390).
\* CVE-2014-3185: Multiple buffer overflows in the
command\_port\_read\_callback function in
drivers/usb/serial/whiteheat.c in the Whiteheat USB Serial Driver in
the Linux kernel before 3.16.2 allowed physically proximate
attackers to execute arbitrary code or cause a denial of service
(memory corruption and system crash) via a crafted device that
provides a large amount of (1) EHCI or (2) XHCI data associated with
a bulk response (bnc#896391).
\* CVE-2014-3186: Buffer overflow in the picolcd\_raw\_event function in
devices/hid/hid-picolcd\_core.c in the PicoLCD HID device driver in
the Linux kernel through 3.16.3, as used in Android on Nexus 7
devices, allowed physically proximate attackers to cause a denial of
service (system crash) or possibly execute arbitrary code via a
crafted device that sends a large report (bnc#896392).
\* CVE-2014-3601: The kvm\_iommu\_map\_pages function in virt/kvm/iommu.c
in the Linux kernel through 3.16.1 miscalculates the number of pages
during the handling of a mapping failure, which allowed guest OS
users to (1) cause a denial of service (host OS memory corruption)
or possibly have unspecified other impact by triggering a large gfn
value or (2) cause a denial of service (host OS memory consumption)
by triggering a small gfn value that leads to permanently pinned
pages (bnc#892782).
\* CVE-2014-3610: The WRMSR processing functionality in the KVM
subsystem in the Linux kernel through 3.17.2 did not properly handle
the writing of a non-canonical address to a model-specific register,
which allowed guest OS users to cause a denial of service (host OS
crash) by leveraging guest OS privileges, related to the
wrmsr\_interception function in arch/x86/kvm/svm.c and the
handle\_wrmsr function in arch/x86/kvm/vmx.c (bnc#899192).
\* CVE-2014-3646: arch/x86/kvm/vmx.c in the KVM subsystem in the Linux
kernel through 3.17.2 did not have an exit handler for the INVVPID
instruction, which allowed guest OS users to cause a denial of
service (guest OS crash) via a crafted application (bnc#899192).
\* CVE-2014-3647: arch/x86/kvm/emulate.c in the KVM subsystem in the
Linux kernel through 3.17.2 did not properly perform RIP changes,
which allowed guest OS users to cause a denial of service (guest OS
crash) via a crafted application (bnc#899192).
\* CVE-2014-3673: The SCTP implementation in the Linux kernel through
3.17.2 allowed remote attackers to cause a denial of service (system
crash) via a malformed ASCONF chunk, related to
net/sctp/sm\_make\_chunk.c and net/sctp/sm\_statefuns.c (bnc#902346).
\* CVE-2014-3687: The sctp\_assoc\_lookup\_asconf\_ack function in
net/sctp/associola.c in the SCTP implementation in the Linux kernel
through 3.17.2 allowed remote attackers to cause a denial of service
(panic) via duplicate ASCONF chunks that trigger an incorrect uncork
within the side-effect interpreter (bnc#902349).
\* CVE-2014-3688: The SCTP implementation in the Linux kernel before
3.17.4 allowed remote attackers to cause a denial of service (memory
consumption) by triggering a large number of chunks in an
associations output queue, as demonstrated by ASCONF probes, related
to net/sctp/inqueue.c and net/sctp/sm\_statefuns.c (bnc#902351).
\* CVE-2014-3690: arch/x86/kvm/vmx.c in the KVM subsystem in the Linux
kernel before 3.17.2 on Intel processors did not ensure that the
value in the CR4 control register remains the same after a VM entry,
which allowed host OS users to kill arbitrary processes or cause a
denial of service (system disruption) by leveraging /dev/kvm access,
as demonstrated by PR\_SET\_TSC prctl calls within a modified copy of
QEMU (bnc#902232).
\* CVE-2014-4608: Multiple integer overflows in the
lzo1x\_decompress\_safe function in lib/lzo/lzo1x\_decompress\_safe.c in
the LZO decompressor in the Linux kernel before 3.15.2 allowed
context-dependent attackers to cause a denial of service (memory
corruption) via a crafted Literal Run (bnc#883948).
\* CVE-2014-4943: The PPPoL2TP feature in net/l2tp/l2tp\_ppp.c in the
Linux kernel through 3.15.6 allowed local users to gain privileges
by leveraging data-structure differences between an l2tp socket and
an inet socket (bnc#887082).
\* CVE-2014-5471: Stack consumption vulnerability in the
parse\_rock\_ridge\_inode\_internal function in fs/isofs/rock.c in the
Linux kernel through 3.16.1 allowed local users to cause a denial of
service (uncontrolled recursion, and system crash or reboot) via a
crafted iso9660 image with a CL entry referring to a directory entry
that has a CL entry (bnc#892490).
\* CVE-2014-5472: The parse\_rock\_ridge\_inode\_internal function in
fs/isofs/rock.c in the Linux kernel through 3.16.1 allowed local
users to cause a denial of service (unkillable mount process) via a
crafted iso9660 image with a self-referential CL entry (bnc#892490).
\* CVE-2014-7826: kernel/trace/trace\_syscalls.c in the Linux kernel
through 3.17.2 did not properly handle private syscall numbers
during use of the ftrace subsystem, which allowed local users to
gain privileges or cause a denial of service (invalid pointer
dereference) via a crafted application (bnc#904013).
\* CVE-2014-7841: The sctp\_process\_param function in
net/sctp/sm\_make\_chunk.c in the SCTP implementation in the Linux
kernel before 3.17.4, when ASCONF is used, allowed remote attackers
to cause a denial of service (NULL pointer dereference and system
crash) via a malformed INIT chunk (bnc#905100).
\* CVE-2014-7842: Race condition in arch/x86/kvm/x86.c in the Linux
kernel before 3.17.4 allowed guest OS users to cause a denial of
service (guest OS crash) via a crafted application that performs an
MMIO transaction or a PIO transaction to trigger a guest userspace
emulation error report, a similar issue to CVE-2010-5313
(bnc#905312).
\* CVE-2014-8134: The paravirt\_ops\_setup function in
arch/x86/kernel/kvm.c in the Linux kernel through 3.18 uses an
improper paravirt\_enabled setting for KVM guest kernels, which made
it easier for guest OS users to bypass the ASLR protection mechanism
via a crafted application that reads a 16-bit value (bnc#909078).
\* CVE-2014-8369: The kvm\_iommu\_map\_pages function in virt/kvm/iommu.c
in the Linux kernel through 3.17.2 miscalculates the number of pages
during the handling of a mapping failure, which allowed guest OS
users to cause a denial of service (host OS page unpinning) or
possibly have unspecified other impact by leveraging guest OS
privileges. NOTE: this vulnerability exists because of an incorrect
fix for CVE-2014-3601 (bnc#902675).
\* CVE-2014-8559: The d\_walk function in fs/dcache.c in the Linux
kernel through 3.17.2 did not properly maintain the semantics of
rename\_lock, which allowed local users to cause a denial of service
(deadlock and system hang) via a crafted application (bnc#903640).
\* CVE-2014-8709: The ieee80211\_fragment function in net/mac80211/tx.c
in the Linux kernel before 3.13.5 did not properly maintain a
certain tail pointer, which allowed remote attackers to obtain
sensitive cleartext information by reading packets (bnc#904700).
\* CVE-2014-9584: The parse\_rock\_ridge\_inode\_internal function in
fs/isofs/rock.c in the Linux kernel before 3.18.2 did not validate a
length value in the Extensions Reference (ER) System Use Field,
which allowed local users to obtain sensitive information from
kernel memory via a crafted iso9660 image (bnc#912654).
\* CVE-2014-9585: The vdso\_addr function in arch/x86/vdso/vma.c in the
Linux kernel through 3.18.2 did not properly choose memory locations
for the vDSO area, which made it easier for local users to bypass
the ASLR protection mechanism by guessing a location at the end of a
PMD (bnc#912705).
The following non-security bugs have been fixed:
\* Fix HDIO\_DRIVE\_\* ioctl() Linux 3.9 regression (bnc#833588,
bnc#905799).
\* HID: add usage\_index in struct hid\_usage (bnc#835839).
\* Revert PM / reboot: call syscore\_shutdown() after
disable\_nonboot\_cpus() Reduce time to shutdown large machines
(bnc#865442 bnc#907396).
\* Revert kernel/sys.c: call disable\_nonboot\_cpus() in kernel\_restart()
Reduce time to shutdown large machines (bnc#865442 bnc#907396).
\* dm-mpath: fix panic on deleting sg device (bnc#870161).
\* futex: Unlock hb->lock in futex\_wait\_requeue\_pi() error path (fix
bnc#880892).
\* handle more than just WS2008 in heartbeat negotiation (bnc#901885).
\* memcg: do not expose uninitialized mem\_cgroup\_per\_node to world
(bnc#883096).
\* mm: fix BUG in \_\_split\_huge\_page\_pmd (bnc#906586).
\* pagecachelimit: reduce lru\_lock congestion for heavy parallel
reclaim fix (bnc#895680, bnc#907189).
\* s390/3215: fix hanging console issue (bnc#898693, bnc#897995,
LTC#115466).
\* s390/cio: improve cio\_commit\_config (bnc#864049, bnc#898693,
LTC#104168).
\* scsi\_dh\_alua: disable ALUA handling for non-disk devices
(bnc#876633).
\* target/rd: Refactor rd\_build\_device\_space + rd\_release\_device\_space.
\* timekeeping: Avoid possible deadlock from clock\_was\_set\_delayed
(bnc#771619, bnc#915335).
\* xfs: recheck buffer pinned status after push trylock failure
(bnc#907338).
\* xfs: remove log force from xfs\_buf\_trylock() (bnc#907338).
Security Issues:
\* CVE-2012-4398
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2012-4398>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2012-4398%3E)
\* CVE-2013-2893
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-2893>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-2893%3E)
\* CVE-2013-2897
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-2897>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-2897%3E)
\* CVE-2013-2899
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-2899>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-2899%3E)
\* CVE-2013-2929
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-2929>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-2929%3E)
\* CVE-2013-7263
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-7263>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-7263%3E)
\* CVE-2014-0131
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-0131>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-0131%3E)
\* CVE-2014-0181
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-0181>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-0181%3E)
\* CVE-2014-2309
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-2309>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-2309%3E)
\* CVE-2014-3181
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-3181>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-3181%3E)
\* CVE-2014-3184
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-3184>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-3184%3E)
\* CVE-2014-3185
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-3185>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-3185%3E)
\* CVE-2014-3186
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-3186>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-3186%3E)
\* CVE-2014-3601
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-3601>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-3601%3E)
\* CVE-2014-3610
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-3610>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-3610%3E)
\* CVE-2014-3646
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-3646>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-3646%3E)
\* CVE-2014-3647
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-3647>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-3647%3E)
\* CVE-2014-3673
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-3673>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-3673%3E)
\* CVE-2014-3687
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-3687>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-3687%3E)
\* CVE-2014-3688
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-3688>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-3688%3E)
\* CVE-2014-3690
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-3690>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-3690%3E)
\* CVE-2014-4608
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-4608>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-4608%3E)
\* CVE-2014-4943
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-4943>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-4943%3E)
\* CVE-2014-5471
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-5471>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-5471%3E)
\* CVE-2014-5472
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-5472>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-5472%3E)
\* CVE-2014-7826
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-7826>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-7826%3E)
\* CVE-2014-7841
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-7841>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-7841%3E)
\* CVE-2014-7842
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-7842>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-7842%3E)
\* CVE-2014-8134
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-8134>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-8134%3E)
\* CVE-2014-8369
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-8369>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-8369%3E)
\* CVE-2014-8559
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-8559>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-8559%3E)
\* CVE-2014-8709
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-8709>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-8709%3E)
\* CVE-2014-9584
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-9584>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-9584%3E)
\* CVE-2014-9585
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-9585>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-9585%3E)
Indications:
Everyone using the Linux Kernel on x86\_64 architecture should update.
Special Instructions and Notes:
Please reboot the system after installing this update.
Patch Instructions:
To install this SUSE Security Update use YaST online\_update.
Alternatively you can run the command listed for your product:
- SUSE Linux Enterprise Server 11 SP2 LTSS:
zypper in -t patch slessp2-kernel=10239 slessp2-kernel=10245 slessp2-kernel=10246
To bring your system up-to-date, use "zypper patch".
Package List:
- SUSE Linux Enterprise Server 11 SP2 LTSS (i586 s390x x86\_64) [New Version: 3.0.101]:
kernel-default-3.0.101-0.7.29.1
kernel-default-base-3.0.101-0.7.29.1
kernel-default-devel-3.0.101-0.7.29.1
kernel-source-3.0.101-0.7.29.1
kernel-syms-3.0.101-0.7.29.1
kernel-trace-3.0.101-0.7.29.1
kernel-trace-base-3.0.101-0.7.29.1
kernel-trace-devel-3.0.101-0.7.29.1
- SUSE Linux Enterprise Server 11 SP2 LTSS (i586 x86\_64) [New Version: 3.0.101]:
kernel-ec2-3.0.101-0.7.29.1
kernel-ec2-base-3.0.101-0.7.29.1
kernel-ec2-devel-3.0.101-0.7.29.1
kernel-xen-3.0.101-0.7.29.1
kernel-xen-base-3.0.101-0.7.29.1
kernel-xen-devel-3.0.101-0.7.29.1
xen-kmp-default-4.1.6\_08\_3.0.101\_0.7.29-0.5.19
xen-kmp-trace-4.1.6\_08\_3.0.101\_0.7.29-0.5.19
- SUSE Linux Enterprise Server 11 SP2 LTSS (s390x) [New Version: 3.0.101]:
kernel-default-man-3.0.101-0.7.29.1
- SUSE Linux Enterprise Server 11 SP2 LTSS (i586) [New Version: 3.0.101]:
kernel-pae-3.0.101-0.7.29.1
kernel-pae-base-3.0.101-0.7.29.1
kernel-pae-devel-3.0.101-0.7.29.1
xen-kmp-pae-4.1.6\_08\_3.0.101\_0.7.29-0.5.19
- SLE 11 SERVER Unsupported Extras (i586 s390x x86\_64):
ext4-writeable-kmp-default-0\_3.0.101\_0.7.29-0.14.142
ext4-writeable-kmp-trace-0\_3.0.101\_0.7.29-0.14.142
kernel-default-extra-3.0.101-0.7.29.1
- SLE 11 SERVER Unsupported Extras (i586 x86\_64):
ext4-writeable-kmp-xen-0\_3.0.101\_0.7.29-0.14.142
kernel-xen-extra-3.0.101-0.7.29.1
- SLE 11 SERVER Unsupported Extras (i586):
ext4-writeable-kmp-pae-0\_3.0.101\_0.7.29-0.14.142
kernel-pae-extra-3.0.101-0.7.29.1
References:
<http://support.novell.com/security/cve/CVE-2012-4398.html>
<http://support.novell.com/security/cve/CVE-2013-2893.html>
<http://support.novell.com/security/cve/CVE-2013-2897.html>
<http://support.novell.com/security/cve/CVE-2013-2899.html>
<http://support.novell.com/security/cve/CVE-2013-2929.html>
<http://support.novell.com/security/cve/CVE-2013-7263.html>
<http://support.novell.com/security/cve/CVE-2014-0131.html>
<http://support.novell.com/security/cve/CVE-2014-0181.html>
<http://support.novell.com/security/cve/CVE-2014-2309.html>
<http://support.novell.com/security/cve/CVE-2014-3181.html>
<http://support.novell.com/security/cve/CVE-2014-3184.html>
<http://support.novell.com/security/cve/CVE-2014-3185.html>
<http://support.novell.com/security/cve/CVE-2014-3186.html>
<http://support.novell.com/security/cve/CVE-2014-3601.html>
<http://support.novell.com/security/cve/CVE-2014-3610.html>
<http://support.novell.com/security/cve/CVE-2014-3646.html>
<http://support.novell.com/security/cve/CVE-2014-3647.html>
<http://support.novell.com/security/cve/CVE-2014-3673.html>
<http://support.novell.com/security/cve/CVE-2014-3687.html>
<http://support.novell.com/security/cve/CVE-2014-3688.html>
<http://support.novell.com/security/cve/CVE-2014-3690.html>
<http://support.novell.com/security/cve/CVE-2014-4608.html>
<http://support.novell.com/security/cve/CVE-2014-4943.html>
<http://support.novell.com/security/cve/CVE-2014-5471.html>
<http://support.novell.com/security/cve/CVE-2014-5472.html>
<http://support.novell.com/security/cve/CVE-2014-7826.html>
<http://support.novell.com/security/cve/CVE-2014-7841.html>
<http://support.novell.com/security/cve/CVE-2014-7842.html>
<http://support.novell.com/security/cve/CVE-2014-8134.html>
<http://support.novell.com/security/cve/CVE-2014-8369.html>
<http://support.novell.com/security/cve/CVE-2014-8559.html>
<http://support.novell.com/security/cve/CVE-2014-8709.html>
<http://support.novell.com/security/cve/CVE-2014-9584.html>
<http://support.novell.com/security/cve/CVE-2014-9585.html>
<https://bugzilla.suse.com/771619>
<https://bugzilla.suse.com/779488>
<https://bugzilla.suse.com/833588>
<https://bugzilla.suse.com/835839>
<https://bugzilla.suse.com/847652>
<https://bugzilla.suse.com/857643>
<https://bugzilla.suse.com/864049>
<https://bugzilla.suse.com/865442>
<https://bugzilla.suse.com/867531>
<https://bugzilla.suse.com/867723>
<https://bugzilla.suse.com/870161>
<https://bugzilla.suse.com/875051>
<https://bugzilla.suse.com/876633>
<https://bugzilla.suse.com/880892>
<https://bugzilla.suse.com/883096>
<https://bugzilla.suse.com/883948>
<https://bugzilla.suse.com/887082>
<https://bugzilla.suse.com/892490>
<https://bugzilla.suse.com/892782>
<https://bugzilla.suse.com/895680>
<https://bugzilla.suse.com/896382>
<https://bugzilla.suse.com/896390>
<https://bugzilla.suse.com/896391>
<https://bugzilla.suse.com/896392>
<https://bugzilla.suse.com/897995>
<https://bugzilla.suse.com/898693>
<https://bugzilla.suse.com/899192>
<https://bugzilla.suse.com/901885>
<https://bugzilla.suse.com/902232>
<https://bugzilla.suse.com/902346>
<https://bugzilla.suse.com/902349>
<https://bugzilla.suse.com/902351>
<https://bugzilla.suse.com/902675>
<https://bugzilla.suse.com/903640>
<https://bugzilla.suse.com/904013>
<https://bugzilla.suse.com/904700>
<https://bugzilla.suse.com/905100>
<https://bugzilla.suse.com/905312>
<https://bugzilla.suse.com/905799>
<https://bugzilla.suse.com/906586>
<https://bugzilla.suse.com/907189>
<https://bugzilla.suse.com/907338>
<https://bugzilla.suse.com/907396>
<https://bugzilla.suse.com/909078>
<https://bugzilla.suse.com/912654>
<https://bugzilla.suse.com/912705>
<https://bugzilla.suse.com/915335>
[http://download.suse.com/patch/finder/?keywords=1aca006b7fb12ba06b40aba05772...](http://download.suse.com/patch/finder/?keywords=1aca006b7fb12ba06b40aba057729bf1)
[http://download.suse.com/patch/finder/?keywords=276c3f04008f2b450bc62f6bb64d...](http://download.suse.com/patch/finder/?keywords=276c3f04008f2b450bc62f6bb64d06fc)
[http://download.suse.com/patch/finder/?keywords=450d3910ce461844d33188377a39...](http://download.suse.com/patch/finder/?keywords=450d3910ce461844d33188377a397db4)
[http://download.suse.com/patch/finder/?keywords=55fa96c03a923b1679e1f132d850...](http://download.suse.com/patch/finder/?keywords=55fa96c03a923b1679e1f132d850294c)
[http://download.suse.com/patch/finder/?keywords=9462f7a25fba741ea356e4bc7df2...](http://download.suse.com/patch/finder/?keywords=9462f7a25fba741ea356e4bc7df2eff7)
[http://download.suse.com/patch/finder/?keywords=9d8f78866ba011d27c2f208e892f...](http://download.suse.com/patch/finder/?keywords=9d8f78866ba011d27c2f208e892fe2d8)
--
To unsubscribe, e-mail: opensuse-security-announce+unsubscribe@opensuse.org
For additional commands, e-mail: opensuse-security-announce+help@opensuse.org

[0](#like "You must be logged-in to vote.")
[0](#dislike "You must be logged-in to vote.")

Reply

[Sign in to reply online](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/UHQROQICGL52MGFXDJOGBY7YPIPBN2UL/)
Use email software

[Back to the thread](/archives/list/security-announce%40lists.opensuse.org/thread/UHQROQICGL52MGFXDJOGBY7YPIPBN2UL/#UHQROQICGL52MGFXDJOGBY7YPIPBN2UL)

[Back to the list](/archives/list/security-announce%40lists.opensuse.org/)

![HyperKitty](/static/hyperkitty/img/logo.png)
Powered by [HyperKitty](http://hyperkitty.readthedocs.org) version 1.3.12.



=== Content from www.ubuntu.com_a3e23a4f_20250125_153349.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# USN-2021-1: Linux kernel vulnerabilities

8 November 2013

Several security issues were fixed in the kernel.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Releases

* [Ubuntu 12.10](/security/notices?release=quantal)

## Packages

* [linux](/security/cves?package=linux) - Linux kernel

## Details

An information leak was discovered in the handling of ICMPv6 Router

Advertisement (RA) messages in the Linux kernel's IPv6 network stack. A

remote attacker could exploit this flaw to cause a denial of service

(excessive retries and address-generation outage), and consequently obtain

sensitive information. ([CVE-2013-0343](/security/CVE-2013-0343))

Kees Cook discovered flaw in the Human Interface Device (HID) subsystem of

the Linux kernel. A physically proximate attacker could exploit this flaw

to execute arbitrary code or cause a denial of service (heap memory

corruption) via a specially crafted device that provides an invalid Report

ID. ([CVE-2013-2888](/security/CVE-2013-2888))

Kees Cook discovered flaw in the Human Interface Device (HID) subsystem

when CONFIG\_HID\_ZEROPLUS is enabled. A physically proximate attacker could

leverage this flaw to cause a denial of service via a specially crafted

device. ([CVE-2013-2889](/security/CVE-2013-2889))

Kees Cook discovered a flaw in the Human Interface Device (HID) subsystem

of the Linux kerenl when CONFIG\_HID\_PANTHERLORD is enabled. A physically

proximate attacker could cause a denial of service (heap out-of-bounds

write) via a specially crafted device. ([CVE-2013-2892](/security/CVE-2013-2892))

Kees Cook discovered another flaw in the Human Interface Device (HID)

subsystem of the Linux kernel when any of CONFIG\_LOGITECH\_FF,

CONFIG\_LOGIG940\_FF, or CONFIG\_LOGIWHEELS\_FF are enabled. A physcially

proximate attacker can leverage this flaw to cause a denial of service vias

a specially crafted device. ([CVE-2013-2893](/security/CVE-2013-2893))

Kees Cook discovered another flaw in the Human Interface Device (HID)

subsystem of the Linux kernel when CONFIG\_HID\_LOGITECH\_DJ is enabled. A

physically proximate attacker could cause a denial of service (OOPS) or

obtain sensitive information from kernel memory via a specially crafted

device. ([CVE-2013-2895](/security/CVE-2013-2895))

Kees Cook discovered a vulnerability in the Linux Kernel's Human Interface

Device (HID) subsystem's support for N-Trig touch screens. A physically

proximate attacker could exploit this flaw to cause a denial of service

(OOPS) via a specially crafted device. ([CVE-2013-2896](/security/CVE-2013-2896))

Kees Cook discovered yet another flaw in the Human Interface Device (HID)

subsystem of the Linux kernel when CONFIG\_HID\_MULTITOUCH is enabled. A

physically proximate attacker could leverage this flaw to cause a denial of

service (OOPS) via a specially crafted device. ([CVE-2013-2897](/security/CVE-2013-2897))

Kees Cook discovered a flaw in the Human Interface Device (HID) subsystem

of the Linux kernel whe CONFIG\_HID\_PICOLCD is enabled. A physically

proximate attacker could exploit this flaw to cause a denial of service

(OOPS) via a specially crafted device. ([CVE-2013-2899](/security/CVE-2013-2899))

Alan Chester reported a flaw in the IPv6 Stream Control Transmission

Protocol (SCTP) of the Linux kernel. A remote attacker could exploit this

flaw to obtain sensitive information by sniffing network traffic.

([CVE-2013-4350](/security/CVE-2013-4350))

Dmitry Vyukov reported a flaw in the Linux kernel's handling of IPv6 UDP

Fragmentation Offload (UFO) processing. A remote attacker could leverage

this flaw to cause a denial of service (system crash). ([CVE-2013-4387](/security/CVE-2013-4387))

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Update instructions

The problem can be corrected by updating your system to the following package versions:

##### Ubuntu 12.10

* [linux-image-3.5.0-43-generic](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [3.5.0-43.66](https://launchpad.net/ubuntu/%2Bsource/linux/3.5.0-43.66)
* [linux-image-3.5.0-43-powerpc64-smp](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [3.5.0-43.66](https://launchpad.net/ubuntu/%2Bsource/linux/3.5.0-43.66)
* [linux-image-3.5.0-43-powerpc-smp](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [3.5.0-43.66](https://launchpad.net/ubuntu/%2Bsource/linux/3.5.0-43.66)
* [linux-image-3.5.0-43-omap](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [3.5.0-43.66](https://launchpad.net/ubuntu/%2Bsource/linux/3.5.0-43.66)
* [linux-image-3.5.0-43-highbank](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [3.5.0-43.66](https://launchpad.net/ubuntu/%2Bsource/linux/3.5.0-43.66)

After a standard system update you need to reboot your computer to make

all the necessary changes.

ATTENTION: Due to an unavoidable ABI change the kernel updates have

been given a new version number, which requires you to recompile and

reinstall all third party kernel modules you might have installed. If

you use linux-restricted-modules, you have to update that package as

well to get modules which work with the new kernel version. Unless you

manually uninstalled the standard kernel metapackages (e.g. linux-generic,

linux-server, linux-powerpc), a standard system upgrade will automatically

perform this as well.

## References

* [CVE-2013-0343](/security/CVE-2013-0343)
* [CVE-2013-2888](/security/CVE-2013-2888)
* [CVE-2013-2889](/security/CVE-2013-2889)
* [CVE-2013-2892](/security/CVE-2013-2892)
* [CVE-2013-2893](/security/CVE-2013-2893)
* [CVE-2013-2895](/security/CVE-2013-2895)
* [CVE-2013-2896](/security/CVE-2013-2896)
* [CVE-2013-2897](/security/CVE-2013-2897)
* [CVE-2013-2899](/security/CVE-2013-2899)
* [CVE-2013-4350](/security/CVE-2013-4350)
* [CVE-2013-4387](/security/CVE-2013-4387)

## Related notices

* [USN-2019-1](/security/notices/USN-2019-1)
* [USN-2038-1](/security/notices/USN-2038-1)
* [USN-2023-1](/security/notices/USN-2023-1)
* [USN-2020-1](/security/notices/USN-2020-1)
* [USN-1976-1](/security/notices/USN-1976-1)
* [USN-1977-1](/security/notices/USN-1977-1)
* [USN-2022-1](/security/notices/USN-2022-1)
* [USN-2039-1](/security/notices/USN-2039-1)
* [USN-2050-1](/security/notices/USN-2050-1)
* [USN-2024-1](/security/notices/USN-2024-1)
* [USN-1998-1](/security/notices/USN-1998-1)
* [USN-1995-1](/security/notices/USN-1995-1)
* [USN-2016-1](/security/notices/USN-2016-1)
* [USN-2015-1](/security/notices/USN-2015-1)
* [USN-2041-1](/security/notices/USN-2041-1)
* [USN-2045-1](/security/notices/USN-2045-1)
* [USN-2049-1](/security/notices/USN-2049-1)
* [USN-2234-1](/security/notices/USN-2234-1)
* [USN-2233-1](/security/notices/USN-2233-1)

### Join the discussion

* [Ubuntu security updates mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened)
* [Security announcements mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-security-announce)

### Need help with your security needs?

Ubuntu Pro provides up to ten-year security coverage for over 23,000 open-source packages within the Ubuntu Main and Universe repositories.

[Talk to an expert to find out what would work best for you](/contact-us/form?product=pro)

### Further reading

* *Loading...*

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page



=== Content from www.ubuntu.com_a79b3877_20250125_153346.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# USN-2015-1: Linux kernel vulnerabilities

8 November 2013

Several security issues were fixed in the kernel.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Releases

* [Ubuntu 10.04](/security/notices?release=lucid)

## Packages

* [linux](/security/cves?package=linux) - Linux kernel

## Details

Dan Carpenter discovered an information leak in the HP Smart Array and

Compaq SMART2 disk-array driver in the Linux kernel. A local user could

exploit this flaw to obtain sensitive information from kernel memory.

([CVE-2013-2147](/security/CVE-2013-2147))

Kees Cook discovered flaw in the Human Interface Device (HID) subsystem

when CONFIG\_HID\_ZEROPLUS is enabled. A physically proximate attacker could

leverage this flaw to cause a denial of service via a specially crafted

device. ([CVE-2013-2889](/security/CVE-2013-2889))

Kees Cook discovered another flaw in the Human Interface Device (HID)

subsystem of the Linux kernel when any of CONFIG\_LOGITECH\_FF,

CONFIG\_LOGIG940\_FF, or CONFIG\_LOGIWHEELS\_FF are enabled. A physcially

proximate attacker can leverage this flaw to cause a denial of service vias

a specially crafted device. ([CVE-2013-2893](/security/CVE-2013-2893))

Kees Cook discovered yet another flaw in the Human Interface Device (HID)

subsystem of the Linux kernel when CONFIG\_HID\_MULTITOUCH is enabled. A

physically proximate attacker could leverage this flaw to cause a denial of

service (OOPS) via a specially crafted device. ([CVE-2013-2897](/security/CVE-2013-2897))

A flaw was discovered in the Linux kernel's dm snapshot facility. A remote

authenticated user could exploit this flaw to obtain sensitive information

or modify/corrupt data. ([CVE-2013-4299](/security/CVE-2013-4299))

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Update instructions

The problem can be corrected by updating your system to the following package versions:

##### Ubuntu 10.04

* [linux-image-2.6.32-53-lpia](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [2.6.32-53.115](https://launchpad.net/ubuntu/%2Bsource/linux/2.6.32-53.115)
* [linux-image-2.6.32-53-generic-pae](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [2.6.32-53.115](https://launchpad.net/ubuntu/%2Bsource/linux/2.6.32-53.115)
* [linux-image-2.6.32-53-sparc64](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [2.6.32-53.115](https://launchpad.net/ubuntu/%2Bsource/linux/2.6.32-53.115)
* [linux-image-2.6.32-53-ia64](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [2.6.32-53.115](https://launchpad.net/ubuntu/%2Bsource/linux/2.6.32-53.115)
* [linux-image-2.6.32-53-386](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [2.6.32-53.115](https://launchpad.net/ubuntu/%2Bsource/linux/2.6.32-53.115)
* [linux-image-2.6.32-53-powerpc](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [2.6.32-53.115](https://launchpad.net/ubuntu/%2Bsource/linux/2.6.32-53.115)
* [linux-image-2.6.32-53-versatile](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [2.6.32-53.115](https://launchpad.net/ubuntu/%2Bsource/linux/2.6.32-53.115)
* [linux-image-2.6.32-53-generic](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [2.6.32-53.115](https://launchpad.net/ubuntu/%2Bsource/linux/2.6.32-53.115)
* [linux-image-2.6.32-53-powerpc64-smp](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [2.6.32-53.115](https://launchpad.net/ubuntu/%2Bsource/linux/2.6.32-53.115)
* [linux-image-2.6.32-53-preempt](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [2.6.32-53.115](https://launchpad.net/ubuntu/%2Bsource/linux/2.6.32-53.115)
* [linux-image-2.6.32-53-powerpc-smp](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [2.6.32-53.115](https://launchpad.net/ubuntu/%2Bsource/linux/2.6.32-53.115)
* [linux-image-2.6.32-53-server](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [2.6.32-53.115](https://launchpad.net/ubuntu/%2Bsource/linux/2.6.32-53.115)
* [linux-image-2.6.32-53-sparc64-smp](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [2.6.32-53.115](https://launchpad.net/ubuntu/%2Bsource/linux/2.6.32-53.115)
* [linux-image-2.6.32-53-virtual](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [2.6.32-53.115](https://launchpad.net/ubuntu/%2Bsource/linux/2.6.32-53.115)

After a standard system update you need to reboot your computer to make

all the necessary changes.

ATTENTION: Due to an unavoidable ABI change the kernel updates have

been given a new version number, which requires you to recompile and

reinstall all third party kernel modules you might have installed. If

you use linux-restricted-modules, you have to update that package as

well to get modules which work with the new kernel version. Unless you

manually uninstalled the standard kernel metapackages (e.g. linux-generic,

linux-server, linux-powerpc), a standard system upgrade will automatically

perform this as well.

## References

* [CVE-2013-2147](/security/CVE-2013-2147)
* [CVE-2013-2889](/security/CVE-2013-2889)
* [CVE-2013-2893](/security/CVE-2013-2893)
* [CVE-2013-2897](/security/CVE-2013-2897)
* [CVE-2013-4299](/security/CVE-2013-4299)

## Related notices

* [USN-2023-1](/security/notices/USN-2023-1)
* [USN-2020-1](/security/notices/USN-2020-1)
* [USN-2017-1](/security/notices/USN-2017-1)
* [USN-1999-1](/security/notices/USN-1999-1)
* [USN-1994-1](/security/notices/USN-1994-1)
* [USN-2018-1](/security/notices/USN-2018-1)
* [USN-1996-1](/security/notices/USN-1996-1)
* [USN-2016-1](/security/notices/USN-2016-1)
* [USN-2050-1](/security/notices/USN-2050-1)
* [USN-1997-1](/security/notices/USN-1997-1)
* [USN-2019-1](/security/notices/USN-2019-1)
* [USN-2038-1](/security/notices/USN-2038-1)
* [USN-2021-1](/security/notices/USN-2021-1)
* [USN-2022-1](/security/notices/USN-2022-1)
* [USN-2039-1](/security/notices/USN-2039-1)
* [USN-2024-1](/security/notices/USN-2024-1)
* [USN-2046-1](/security/notices/USN-2046-1)
* [USN-2041-1](/security/notices/USN-2041-1)
* [USN-2067-1](/security/notices/USN-2067-1)
* [USN-2042-1](/security/notices/USN-2042-1)
* [USN-2066-1](/security/notices/USN-2066-1)
* [USN-2045-1](/security/notices/USN-2045-1)
* [USN-2043-1](/security/notices/USN-2043-1)
* [USN-2040-1](/security/notices/USN-2040-1)
* [USN-2044-1](/security/notices/USN-2044-1)
* [USN-2049-1](/security/notices/USN-2049-1)

### Join the discussion

* [Ubuntu security updates mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened)
* [Security announcements mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-security-announce)

### Need help with your security needs?

Ubuntu Pro provides up to ten-year security coverage for over 23,000 open-source packages within the Ubuntu Main and Universe repositories.

[Talk to an expert to find out what would work best for you](/contact-us/form?product=pro)

### Further reading

* *Loading...*

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page



=== Content from www.ubuntu.com_34531523_20250125_153349.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# USN-2022-1: Linux kernel (OMAP4) vulnerabilities

8 November 2013

Several security issues were fixed in the kernel.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Releases

* [Ubuntu 12.10](/security/notices?release=quantal)

## Packages

* [linux-ti-omap4](/security/cves?package=linux-ti-omap4) - Linux kernel for OMAP4

## Details

An information leak was discovered in the handling of ICMPv6 Router

Advertisement (RA) messages in the Linux kernel's IPv6 network stack. A

remote attacker could exploit this flaw to cause a denial of service

(excessive retries and address-generation outage), and consequently obtain

sensitive information. ([CVE-2013-0343](/security/CVE-2013-0343))

Kees Cook discovered flaw in the Human Interface Device (HID) subsystem of

the Linux kernel. A physically proximate attacker could exploit this flaw

to execute arbitrary code or cause a denial of service (heap memory

corruption) via a specially crafted device that provides an invalid Report

ID. ([CVE-2013-2888](/security/CVE-2013-2888))

Kees Cook discovered flaw in the Human Interface Device (HID) subsystem

when CONFIG\_HID\_ZEROPLUS is enabled. A physically proximate attacker could

leverage this flaw to cause a denial of service via a specially crafted

device. ([CVE-2013-2889](/security/CVE-2013-2889))

Kees Cook discovered a flaw in the Human Interface Device (HID) subsystem

of the Linux kerenl when CONFIG\_HID\_PANTHERLORD is enabled. A physically

proximate attacker could cause a denial of service (heap out-of-bounds

write) via a specially crafted device. ([CVE-2013-2892](/security/CVE-2013-2892))

Kees Cook discovered another flaw in the Human Interface Device (HID)

subsystem of the Linux kernel when any of CONFIG\_LOGITECH\_FF,

CONFIG\_LOGIG940\_FF, or CONFIG\_LOGIWHEELS\_FF are enabled. A physcially

proximate attacker can leverage this flaw to cause a denial of service vias

a specially crafted device. ([CVE-2013-2893](/security/CVE-2013-2893))

Kees Cook discovered another flaw in the Human Interface Device (HID)

subsystem of the Linux kernel when CONFIG\_HID\_LOGITECH\_DJ is enabled. A

physically proximate attacker could cause a denial of service (OOPS) or

obtain sensitive information from kernel memory via a specially crafted

device. ([CVE-2013-2895](/security/CVE-2013-2895))

Kees Cook discovered a vulnerability in the Linux Kernel's Human Interface

Device (HID) subsystem's support for N-Trig touch screens. A physically

proximate attacker could exploit this flaw to cause a denial of service

(OOPS) via a specially crafted device. ([CVE-2013-2896](/security/CVE-2013-2896))

Kees Cook discovered yet another flaw in the Human Interface Device (HID)

subsystem of the Linux kernel when CONFIG\_HID\_MULTITOUCH is enabled. A

physically proximate attacker could leverage this flaw to cause a denial of

service (OOPS) via a specially crafted device. ([CVE-2013-2897](/security/CVE-2013-2897))

Kees Cook discovered a flaw in the Human Interface Device (HID) subsystem

of the Linux kernel whe CONFIG\_HID\_PICOLCD is enabled. A physically

proximate attacker could exploit this flaw to cause a denial of service

(OOPS) via a specially crafted device. ([CVE-2013-2899](/security/CVE-2013-2899))

Alan Chester reported a flaw in the IPv6 Stream Control Transmission

Protocol (SCTP) of the Linux kernel. A remote attacker could exploit this

flaw to obtain sensitive information by sniffing network traffic.

([CVE-2013-4350](/security/CVE-2013-4350))

Dmitry Vyukov reported a flaw in the Linux kernel's handling of IPv6 UDP

Fragmentation Offload (UFO) processing. A remote attacker could leverage

this flaw to cause a denial of service (system crash). ([CVE-2013-4387](/security/CVE-2013-4387))

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Update instructions

The problem can be corrected by updating your system to the following package versions:

##### Ubuntu 12.10

* [linux-image-3.5.0-235-omap4](https://launchpad.net/ubuntu/%2Bsource/linux-ti-omap4)
  -
  [3.5.0-235.51](https://launchpad.net/ubuntu/%2Bsource/linux-ti-omap4/3.5.0-235.51)

After a standard system update you need to reboot your computer to make

all the necessary changes.

ATTENTION: Due to an unavoidable ABI change the kernel updates have

been given a new version number, which requires you to recompile and

reinstall all third party kernel modules you might have installed. If

you use linux-restricted-modules, you have to update that package as

well to get modules which work with the new kernel version. Unless you

manually uninstalled the standard kernel metapackages (e.g. linux-generic,

linux-server, linux-powerpc), a standard system upgrade will automatically

perform this as well.

## References

* [CVE-2013-0343](/security/CVE-2013-0343)
* [CVE-2013-2888](/security/CVE-2013-2888)
* [CVE-2013-2889](/security/CVE-2013-2889)
* [CVE-2013-2892](/security/CVE-2013-2892)
* [CVE-2013-2893](/security/CVE-2013-2893)
* [CVE-2013-2895](/security/CVE-2013-2895)
* [CVE-2013-2896](/security/CVE-2013-2896)
* [CVE-2013-2897](/security/CVE-2013-2897)
* [CVE-2013-2899](/security/CVE-2013-2899)
* [CVE-2013-4350](/security/CVE-2013-4350)
* [CVE-2013-4387](/security/CVE-2013-4387)

## Related notices

* [USN-2019-1](/security/notices/USN-2019-1)
* [USN-2038-1](/security/notices/USN-2038-1)
* [USN-2023-1](/security/notices/USN-2023-1)
* [USN-2020-1](/security/notices/USN-2020-1)
* [USN-1976-1](/security/notices/USN-1976-1)
* [USN-1977-1](/security/notices/USN-1977-1)
* [USN-2021-1](/security/notices/USN-2021-1)
* [USN-2039-1](/security/notices/USN-2039-1)
* [USN-2050-1](/security/notices/USN-2050-1)
* [USN-2024-1](/security/notices/USN-2024-1)
* [USN-1998-1](/security/notices/USN-1998-1)
* [USN-1995-1](/security/notices/USN-1995-1)
* [USN-2016-1](/security/notices/USN-2016-1)
* [USN-2015-1](/security/notices/USN-2015-1)
* [USN-2041-1](/security/notices/USN-2041-1)
* [USN-2045-1](/security/notices/USN-2045-1)
* [USN-2049-1](/security/notices/USN-2049-1)
* [USN-2234-1](/security/notices/USN-2234-1)
* [USN-2233-1](/security/notices/USN-2233-1)

### Join the discussion

* [Ubuntu security updates mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened)
* [Security announcements mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-security-announce)

### Need help with your security needs?

Ubuntu Pro provides up to ten-year security coverage for over 23,000 open-source packages within the Ubuntu Main and Universe repositories.

[Talk to an expert to find out what would work best for you](/contact-us/form?product=pro)

### Further reading

* *Loading...*

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page



=== Content from www.ubuntu.com_b2d5dac5_20250125_153351.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# USN-2023-1: Linux kernel vulnerabilities

8 November 2013

Several security issues were fixed in the kernel.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Releases

* [Ubuntu 13.04](/security/notices?release=raring)

## Packages

* [linux](/security/cves?package=linux) - Linux kernel

## Details

An information leak was discovered in the handling of ICMPv6 Router

Advertisement (RA) messages in the Linux kernel's IPv6 network stack. A

remote attacker could exploit this flaw to cause a denial of service

(excessive retries and address-generation outage), and consequently obtain

sensitive information. ([CVE-2013-0343](/security/CVE-2013-0343))

Dan Carpenter discovered an information leak in the HP Smart Array and

Compaq SMART2 disk-array driver in the Linux kernel. A local user could

exploit this flaw to obtain sensitive information from kernel memory.

([CVE-2013-2147](/security/CVE-2013-2147))

Kees Cook discovered flaw in the Human Interface Device (HID) subsystem

when CONFIG\_HID\_ZEROPLUS is enabled. A physically proximate attacker could

leverage this flaw to cause a denial of service via a specially crafted

device. ([CVE-2013-2889](/security/CVE-2013-2889))

Kees Cook discovered another flaw in the Human Interface Device (HID)

subsystem of the Linux kernel when any of CONFIG\_LOGITECH\_FF,

CONFIG\_LOGIG940\_FF, or CONFIG\_LOGIWHEELS\_FF are enabled. A physcially

proximate attacker can leverage this flaw to cause a denial of service vias

a specially crafted device. ([CVE-2013-2893](/security/CVE-2013-2893))

Kees Cook discovered a flaw in the Human Interface Device (HID) subsystem

of the Linux kernel when CONFIG\_HID\_LENOVO\_TPKBD is enabled. A physically

proximate attacker could exploit this flaw to cause a denial of service via

a specially crafted device. ([CVE-2013-2894](/security/CVE-2013-2894))

Kees Cook discovered another flaw in the Human Interface Device (HID)

subsystem of the Linux kernel when CONFIG\_HID\_LOGITECH\_DJ is enabled. A

physically proximate attacker could cause a denial of service (OOPS) or

obtain sensitive information from kernel memory via a specially crafted

device. ([CVE-2013-2895](/security/CVE-2013-2895))

Kees Cook discovered yet another flaw in the Human Interface Device (HID)

subsystem of the Linux kernel when CONFIG\_HID\_MULTITOUCH is enabled. A

physically proximate attacker could leverage this flaw to cause a denial of

service (OOPS) via a specially crafted device. ([CVE-2013-2897](/security/CVE-2013-2897))

Miroslav Vadkerti discovered a flaw in how the permissions for network

sysctls are handled in the Linux kernel. An unprivileged local user could

exploit this flaw to have privileged access to files in /proc/sys/net/.

([CVE-2013-4270](/security/CVE-2013-4270))

Wannes Rombouts reported a vulnerability in the networking tuntap interface

of the Linux kernel. A local user with the CAP\_NET\_ADMIN capability could

leverage this flaw to gain full admin privileges. ([CVE-2013-4343](/security/CVE-2013-4343))

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Update instructions

The problem can be corrected by updating your system to the following package versions:

##### Ubuntu 13.04

* [linux-image-3.8.0-33-generic](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [3.8.0-33.48](https://launchpad.net/ubuntu/%2Bsource/linux/3.8.0-33.48)

After a standard system update you need to reboot your computer to make

all the necessary changes.

ATTENTION: Due to an unavoidable ABI change the kernel updates have

been given a new version number, which requires you to recompile and

reinstall all third party kernel modules you might have installed. If

you use linux-restricted-modules, you have to update that package as

well to get modules which work with the new kernel version. Unless you

manually uninstalled the standard kernel metapackages (e.g. linux-generic,

linux-server, linux-powerpc), a standard system upgrade will automatically

perform this as well.

## References

* [CVE-2013-0343](/security/CVE-2013-0343)
* [CVE-2013-2147](/security/CVE-2013-2147)
* [CVE-2013-2889](/security/CVE-2013-2889)
* [CVE-2013-2893](/security/CVE-2013-2893)
* [CVE-2013-2894](/security/CVE-2013-2894)
* [CVE-2013-2895](/security/CVE-2013-2895)
* [CVE-2013-2897](/security/CVE-2013-2897)
* [CVE-2013-4270](/security/CVE-2013-4270)
* [CVE-2013-4343](/security/CVE-2013-4343)

## Related notices

* [USN-2019-1](/security/notices/USN-2019-1)
* [USN-2038-1](/security/notices/USN-2038-1)
* [USN-2020-1](/security/notices/USN-2020-1)
* [USN-1976-1](/security/notices/USN-1976-1)
* [USN-1977-1](/security/notices/USN-1977-1)
* [USN-2021-1](/security/notices/USN-2021-1)
* [USN-2022-1](/security/notices/USN-2022-1)
* [USN-2039-1](/security/notices/USN-2039-1)
* [USN-2050-1](/security/notices/USN-2050-1)
* [USN-2024-1](/security/notices/USN-2024-1)
* [USN-2017-1](/security/notices/USN-2017-1)
* [USN-1999-1](/security/notices/USN-1999-1)
* [USN-1994-1](/security/notices/USN-1994-1)
* [USN-2018-1](/security/notices/USN-2018-1)
* [USN-1996-1](/security/notices/USN-1996-1)
* [USN-2016-1](/security/notices/USN-2016-1)
* [USN-2015-1](/security/notices/USN-2015-1)
* [USN-1997-1](/security/notices/USN-1997-1)
* [USN-2049-1](/security/notices/USN-2049-1)

### Join the discussion

* [Ubuntu security updates mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened)
* [Security announcements mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-security-announce)

### Need help with your security needs?

Ubuntu Pro provides up to ten-year security coverage for over 23,000 open-source packages within the Ubuntu Main and Universe repositories.

[Talk to an expert to find out what would work best for you](/contact-us/form?product=pro)

### Further reading

* *Loading...*

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page



=== Content from www.ubuntu.com_f39910f1_20250125_153353.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# USN-2039-1: Linux kernel (OMAP4) vulnerabilities

3 December 2013

Several security issues were fixed in the kernel.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Releases

* [Ubuntu 12.04](/security/notices?release=precise)

## Packages

* [linux-ti-omap4](/security/cves?package=linux-ti-omap4) - Linux kernel for OMAP4

## Details

An information leak was discovered in the handling of ICMPv6 Router

Advertisement (RA) messages in the Linux kernel's IPv6 network stack. A

remote attacker could exploit this flaw to cause a denial of service

(excessive retries and address-generation outage), and consequently obtain

sensitive information. ([CVE-2013-0343](/security/CVE-2013-0343))

A flaw was discovered in the Xen subsystem of the Linux kernel when it

provides read-only access to a disk that supports TRIM or SCSI UNMAP to a

guest OS. A privileged user in the guest OS could exploit this flaw to

destroy data on the disk, even though the guest OS should not be able to

write to the disk. ([CVE-2013-2140](/security/CVE-2013-2140))

Kees Cook discovered flaw in the Human Interface Device (HID) subsystem of

the Linux kernel. A physically proximate attacker could exploit this flaw

to execute arbitrary code or cause a denial of service (heap memory

corruption) via a specially crafted device that provides an invalid Report

ID. ([CVE-2013-2888](/security/CVE-2013-2888))

Kees Cook discovered flaw in the Human Interface Device (HID) subsystem

when CONFIG\_HID\_ZEROPLUS is enabled. A physically proximate attacker could

leverage this flaw to cause a denial of service via a specially crafted

device. ([CVE-2013-2889](/security/CVE-2013-2889))

Kees Cook discovered a flaw in the Human Interface Device (HID) subsystem

of the Linux kerenl when CONFIG\_HID\_PANTHERLORD is enabled. A physically

proximate attacker could cause a denial of service (heap out-of-bounds

write) via a specially crafted device. ([CVE-2013-2892](/security/CVE-2013-2892))

Kees Cook discovered another flaw in the Human Interface Device (HID)

subsystem of the Linux kernel when any of CONFIG\_LOGITECH\_FF,

CONFIG\_LOGIG940\_FF, or CONFIG\_LOGIWHEELS\_FF are enabled. A physcially

proximate attacker can leverage this flaw to cause a denial of service vias

a specially crafted device. ([CVE-2013-2893](/security/CVE-2013-2893))

Kees Cook discovered another flaw in the Human Interface Device (HID)

subsystem of the Linux kernel when CONFIG\_HID\_LOGITECH\_DJ is enabled. A

physically proximate attacker could cause a denial of service (OOPS) or

obtain sensitive information from kernel memory via a specially crafted

device. ([CVE-2013-2895](/security/CVE-2013-2895))

Kees Cook discovered a vulnerability in the Linux Kernel's Human Interface

Device (HID) subsystem's support for N-Trig touch screens. A physically

proximate attacker could exploit this flaw to cause a denial of service

(OOPS) via a specially crafted device. ([CVE-2013-2896](/security/CVE-2013-2896))

Kees Cook discovered yet another flaw in the Human Interface Device (HID)

subsystem of the Linux kernel when CONFIG\_HID\_MULTITOUCH is enabled. A

physically proximate attacker could leverage this flaw to cause a denial of

service (OOPS) via a specially crafted device. ([CVE-2013-2897](/security/CVE-2013-2897))

Kees Cook discovered a flaw in the Human Interface Device (HID) subsystem

of the Linux kernel whe CONFIG\_HID\_PICOLCD is enabled. A physically

proximate attacker could exploit this flaw to cause a denial of service

(OOPS) via a specially crafted device. ([CVE-2013-2899](/security/CVE-2013-2899))

Alan Chester reported a flaw in the IPv6 Stream Control Transmission

Protocol (SCTP) of the Linux kernel. A remote attacker could exploit this

flaw to obtain sensitive information by sniffing network traffic.

([CVE-2013-4350](/security/CVE-2013-4350))

Dmitry Vyukov reported a flaw in the Linux kernel's handling of IPv6 UDP

Fragmentation Offload (UFO) processing. A remote attacker could leverage

this flaw to cause a denial of service (system crash). ([CVE-2013-4387](/security/CVE-2013-4387))

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Update instructions

The problem can be corrected by updating your system to the following package versions:

##### Ubuntu 12.04

* [linux-image-3.2.0-1441-omap4](https://launchpad.net/ubuntu/%2Bsource/linux-ti-omap4)
  -
  [3.2.0-1441.60](https://launchpad.net/ubuntu/%2Bsource/linux-ti-omap4/3.2.0-1441.60)

After a standard system update you need to reboot your computer to make

all the necessary changes.

ATTENTION: Due to an unavoidable ABI change the kernel updates have

been given a new version number, which requires you to recompile and

reinstall all third party kernel modules you might have installed. If

you use linux-restricted-modules, you have to update that package as

well to get modules which work with the new kernel version. Unless you

manually uninstalled the standard kernel metapackages (e.g. linux-generic,

linux-server, linux-powerpc), a standard system upgrade will automatically

perform this as well.

## References

* [CVE-2013-0343](/security/CVE-2013-0343)
* [CVE-2013-2140](/security/CVE-2013-2140)
* [CVE-2013-2888](/security/CVE-2013-2888)
* [CVE-2013-2889](/security/CVE-2013-2889)
* [CVE-2013-2892](/security/CVE-2013-2892)
* [CVE-2013-2893](/security/CVE-2013-2893)
* [CVE-2013-2895](/security/CVE-2013-2895)
* [CVE-2013-2896](/security/CVE-2013-2896)
* [CVE-2013-2897](/security/CVE-2013-2897)
* [CVE-2013-2899](/security/CVE-2013-2899)
* [CVE-2013-4350](/security/CVE-2013-4350)
* [CVE-2013-4387](/security/CVE-2013-4387)

## Related notices

* [USN-2019-1](/security/notices/USN-2019-1)
* [USN-2038-1](/security/notices/USN-2038-1)
* [USN-2023-1](/security/notices/USN-2023-1)
* [USN-2020-1](/security/notices/USN-2020-1)
* [USN-1976-1](/security/notices/USN-1976-1)
* [USN-1977-1](/security/notices/USN-1977-1)
* [USN-2021-1](/security/notices/USN-2021-1)
* [USN-2022-1](/security/notices/USN-2022-1)
* [USN-2050-1](/security/notices/USN-2050-1)
* [USN-2024-1](/security/notices/USN-2024-1)
* [USN-1943-1](/security/notices/USN-1943-1)
* [USN-1947-1](/security/notices/USN-1947-1)
* [USN-1946-1](/security/notices/USN-1946-1)
* [USN-1938-1](/security/notices/USN-1938-1)
* [USN-1944-1](/security/notices/USN-1944-1)
* [USN-1945-1](/security/notices/USN-1945-1)
* [USN-1998-1](/security/notices/USN-1998-1)
* [USN-1995-1](/security/notices/USN-1995-1)
* [USN-2016-1](/security/notices/USN-2016-1)
* [USN-2015-1](/security/notices/USN-2015-1)
* [USN-2041-1](/security/notices/USN-2041-1)
* [USN-2045-1](/security/notices/USN-2045-1)
* [USN-2049-1](/security/notices/USN-2049-1)
* [USN-2234-1](/security/notices/USN-2234-1)
* [USN-2233-1](/security/notices/USN-2233-1)

### Join the discussion

* [Ubuntu security updates mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened)
* [Security announcements mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-security-announce)

### Need help with your security needs?

Ubuntu Pro provides up to ten-year security coverage for over 23,000 open-source packages within the Ubuntu Main and Universe repositories.

[Talk to an expert to find out what would work best for you](/contact-us/form?product=pro)

### Further reading

* *Loading...*

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page



=== Content from www.ubuntu.com_69e76eff_20250125_153348.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# USN-2020-1: Linux kernel (Raring HWE) vulnerabilities

8 November 2013

Several security issues were fixed in the kernel.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Releases

* [Ubuntu 12.04](/security/notices?release=precise)

## Packages

* [linux-lts-raring](/security/cves?package=linux-lts-raring) - Linux hardware enablement kernel from Raring

## Details

An information leak was discovered in the handling of ICMPv6 Router

Advertisement (RA) messages in the Linux kernel's IPv6 network stack. A

remote attacker could exploit this flaw to cause a denial of service

(excessive retries and address-generation outage), and consequently obtain

sensitive information. ([CVE-2013-0343](/security/CVE-2013-0343))

Dan Carpenter discovered an information leak in the HP Smart Array and

Compaq SMART2 disk-array driver in the Linux kernel. A local user could

exploit this flaw to obtain sensitive information from kernel memory.

([CVE-2013-2147](/security/CVE-2013-2147))

Kees Cook discovered flaw in the Human Interface Device (HID) subsystem

when CONFIG\_HID\_ZEROPLUS is enabled. A physically proximate attacker could

leverage this flaw to cause a denial of service via a specially crafted

device. ([CVE-2013-2889](/security/CVE-2013-2889))

Kees Cook discovered another flaw in the Human Interface Device (HID)

subsystem of the Linux kernel when any of CONFIG\_LOGITECH\_FF,

CONFIG\_LOGIG940\_FF, or CONFIG\_LOGIWHEELS\_FF are enabled. A physcially

proximate attacker can leverage this flaw to cause a denial of service vias

a specially crafted device. ([CVE-2013-2893](/security/CVE-2013-2893))

Kees Cook discovered a flaw in the Human Interface Device (HID) subsystem

of the Linux kernel when CONFIG\_HID\_LENOVO\_TPKBD is enabled. A physically

proximate attacker could exploit this flaw to cause a denial of service via

a specially crafted device. ([CVE-2013-2894](/security/CVE-2013-2894))

Kees Cook discovered another flaw in the Human Interface Device (HID)

subsystem of the Linux kernel when CONFIG\_HID\_LOGITECH\_DJ is enabled. A

physically proximate attacker could cause a denial of service (OOPS) or

obtain sensitive information from kernel memory via a specially crafted

device. ([CVE-2013-2895](/security/CVE-2013-2895))

Kees Cook discovered yet another flaw in the Human Interface Device (HID)

subsystem of the Linux kernel when CONFIG\_HID\_MULTITOUCH is enabled. A

physically proximate attacker could leverage this flaw to cause a denial of

service (OOPS) via a specially crafted device. ([CVE-2013-2897](/security/CVE-2013-2897))

Miroslav Vadkerti discovered a flaw in how the permissions for network

sysctls are handled in the Linux kernel. An unprivileged local user could

exploit this flaw to have privileged access to files in /proc/sys/net/.

([CVE-2013-4270](/security/CVE-2013-4270))

Wannes Rombouts reported a vulnerability in the networking tuntap interface

of the Linux kernel. A local user with the CAP\_NET\_ADMIN capability could

leverage this flaw to gain full admin privileges. ([CVE-2013-4343](/security/CVE-2013-4343))

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Update instructions

The problem can be corrected by updating your system to the following package versions:

##### Ubuntu 12.04

* [linux-image-3.8.0-33-generic](https://launchpad.net/ubuntu/%2Bsource/linux-lts-raring)
  -
  [3.8.0-33.48~precise1](https://launchpad.net/ubuntu/%2Bsource/linux-lts-raring/3.8.0-33.48~precise1)

After a standard system update you need to reboot your computer to make

all the necessary changes.

ATTENTION: Due to an unavoidable ABI change the kernel updates have

been given a new version number, which requires you to recompile and

reinstall all third party kernel modules you might have installed. If

you use linux-restricted-modules, you have to update that package as

well to get modules which work with the new kernel version. Unless you

manually uninstalled the standard kernel metapackages (e.g. linux-generic,

linux-server, linux-powerpc), a standard system upgrade will automatically

perform this as well.

## References

* [CVE-2013-0343](/security/CVE-2013-0343)
* [CVE-2013-2147](/security/CVE-2013-2147)
* [CVE-2013-2889](/security/CVE-2013-2889)
* [CVE-2013-2893](/security/CVE-2013-2893)
* [CVE-2013-2894](/security/CVE-2013-2894)
* [CVE-2013-2895](/security/CVE-2013-2895)
* [CVE-2013-2897](/security/CVE-2013-2897)
* [CVE-2013-4270](/security/CVE-2013-4270)
* [CVE-2013-4343](/security/CVE-2013-4343)

## Related notices

* [USN-2019-1](/security/notices/USN-2019-1)
* [USN-2038-1](/security/notices/USN-2038-1)
* [USN-2023-1](/security/notices/USN-2023-1)
* [USN-1976-1](/security/notices/USN-1976-1)
* [USN-1977-1](/security/notices/USN-1977-1)
* [USN-2021-1](/security/notices/USN-2021-1)
* [USN-2022-1](/security/notices/USN-2022-1)
* [USN-2039-1](/security/notices/USN-2039-1)
* [USN-2050-1](/security/notices/USN-2050-1)
* [USN-2024-1](/security/notices/USN-2024-1)
* [USN-2017-1](/security/notices/USN-2017-1)
* [USN-1999-1](/security/notices/USN-1999-1)
* [USN-1994-1](/security/notices/USN-1994-1)
* [USN-2018-1](/security/notices/USN-2018-1)
* [USN-1996-1](/security/notices/USN-1996-1)
* [USN-2016-1](/security/notices/USN-2016-1)
* [USN-2015-1](/security/notices/USN-2015-1)
* [USN-1997-1](/security/notices/USN-1997-1)
* [USN-2049-1](/security/notices/USN-2049-1)

### Join the discussion

* [Ubuntu security updates mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened)
* [Security announcements mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-security-announce)

### Need help with your security needs?

Ubuntu Pro provides up to ten-year security coverage for over 23,000 open-source packages within the Ubuntu Main and Universe repositories.

[Talk to an expert to find out what would work best for you](/contact-us/form?product=pro)

### Further reading

* *Loading...*

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page



=== Content from www.ubuntu.com_83c3762a_20250125_153352.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# USN-2038-1: Linux kernel vulnerabilities

3 December 2013

Several security issues were fixed in the kernel.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Releases

* [Ubuntu 12.04](/security/notices?release=precise)

## Packages

* [linux](/security/cves?package=linux) - Linux kernel

## Details

An information leak was discovered in the handling of ICMPv6 Router

Advertisement (RA) messages in the Linux kernel's IPv6 network stack. A

remote attacker could exploit this flaw to cause a denial of service

(excessive retries and address-generation outage), and consequently obtain

sensitive information. ([CVE-2013-0343](/security/CVE-2013-0343))

A flaw was discovered in the Xen subsystem of the Linux kernel when it

provides read-only access to a disk that supports TRIM or SCSI UNMAP to a

guest OS. A privileged user in the guest OS could exploit this flaw to

destroy data on the disk, even though the guest OS should not be able to

write to the disk. ([CVE-2013-2140](/security/CVE-2013-2140))

Kees Cook discovered flaw in the Human Interface Device (HID) subsystem of

the Linux kernel. A physically proximate attacker could exploit this flaw

to execute arbitrary code or cause a denial of service (heap memory

corruption) via a specially crafted device that provides an invalid Report

ID. ([CVE-2013-2888](/security/CVE-2013-2888))

Kees Cook discovered flaw in the Human Interface Device (HID) subsystem

when CONFIG\_HID\_ZEROPLUS is enabled. A physically proximate attacker could

leverage this flaw to cause a denial of service via a specially crafted

device. ([CVE-2013-2889](/security/CVE-2013-2889))

Kees Cook discovered a flaw in the Human Interface Device (HID) subsystem

of the Linux kerenl when CONFIG\_HID\_PANTHERLORD is enabled. A physically

proximate attacker could cause a denial of service (heap out-of-bounds

write) via a specially crafted device. ([CVE-2013-2892](/security/CVE-2013-2892))

Kees Cook discovered another flaw in the Human Interface Device (HID)

subsystem of the Linux kernel when any of CONFIG\_LOGITECH\_FF,

CONFIG\_LOGIG940\_FF, or CONFIG\_LOGIWHEELS\_FF are enabled. A physcially

proximate attacker can leverage this flaw to cause a denial of service vias

a specially crafted device. ([CVE-2013-2893](/security/CVE-2013-2893))

Kees Cook discovered another flaw in the Human Interface Device (HID)

subsystem of the Linux kernel when CONFIG\_HID\_LOGITECH\_DJ is enabled. A

physically proximate attacker could cause a denial of service (OOPS) or

obtain sensitive information from kernel memory via a specially crafted

device. ([CVE-2013-2895](/security/CVE-2013-2895))

Kees Cook discovered a vulnerability in the Linux Kernel's Human Interface

Device (HID) subsystem's support for N-Trig touch screens. A physically

proximate attacker could exploit this flaw to cause a denial of service

(OOPS) via a specially crafted device. ([CVE-2013-2896](/security/CVE-2013-2896))

Kees Cook discovered yet another flaw in the Human Interface Device (HID)

subsystem of the Linux kernel when CONFIG\_HID\_MULTITOUCH is enabled. A

physically proximate attacker could leverage this flaw to cause a denial of

service (OOPS) via a specially crafted device. ([CVE-2013-2897](/security/CVE-2013-2897))

Kees Cook discovered a flaw in the Human Interface Device (HID) subsystem

of the Linux kernel whe CONFIG\_HID\_PICOLCD is enabled. A physically

proximate attacker could exploit this flaw to cause a denial of service

(OOPS) via a specially crafted device. ([CVE-2013-2899](/security/CVE-2013-2899))

Alan Chester reported a flaw in the IPv6 Stream Control Transmission

Protocol (SCTP) of the Linux kernel. A remote attacker could exploit this

flaw to obtain sensitive information by sniffing network traffic.

([CVE-2013-4350](/security/CVE-2013-4350))

Dmitry Vyukov reported a flaw in the Linux kernel's handling of IPv6 UDP

Fragmentation Offload (UFO) processing. A remote attacker could leverage

this flaw to cause a denial of service (system crash). ([CVE-2013-4387](/security/CVE-2013-4387))

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Update instructions

The problem can be corrected by updating your system to the following package versions:

##### Ubuntu 12.04

* [linux-image-3.2.0-57-highbank](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [3.2.0-57.87](https://launchpad.net/ubuntu/%2Bsource/linux/3.2.0-57.87)
* [linux-image-3.2.0-57-powerpc64-smp](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [3.2.0-57.87](https://launchpad.net/ubuntu/%2Bsource/linux/3.2.0-57.87)
* [linux-image-3.2.0-57-powerpc-smp](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [3.2.0-57.87](https://launchpad.net/ubuntu/%2Bsource/linux/3.2.0-57.87)
* [linux-image-3.2.0-57-generic-pae](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [3.2.0-57.87](https://launchpad.net/ubuntu/%2Bsource/linux/3.2.0-57.87)
* [linux-image-3.2.0-57-virtual](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [3.2.0-57.87](https://launchpad.net/ubuntu/%2Bsource/linux/3.2.0-57.87)
* [linux-image-3.2.0-57-omap](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [3.2.0-57.87](https://launchpad.net/ubuntu/%2Bsource/linux/3.2.0-57.87)
* [linux-image-3.2.0-57-generic](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [3.2.0-57.87](https://launchpad.net/ubuntu/%2Bsource/linux/3.2.0-57.87)

After a standard system update you need to reboot your computer to make

all the necessary changes.

ATTENTION: Due to an unavoidable ABI change the kernel updates have

been given a new version number, which requires you to recompile and

reinstall all third party kernel modules you might have installed. If

you use linux-restricted-modules, you have to update that package as

well to get modules which work with the new kernel version. Unless you

manually uninstalled the standard kernel metapackages (e.g. linux-generic,

linux-server, linux-powerpc), a standard system upgrade will automatically

perform this as well.

## References

* [CVE-2013-0343](/security/CVE-2013-0343)
* [CVE-2013-2140](/security/CVE-2013-2140)
* [CVE-2013-2888](/security/CVE-2013-2888)
* [CVE-2013-2889](/security/CVE-2013-2889)
* [CVE-2013-2892](/security/CVE-2013-2892)
* [CVE-2013-2893](/security/CVE-2013-2893)
* [CVE-2013-2895](/security/CVE-2013-2895)
* [CVE-2013-2896](/security/CVE-2013-2896)
* [CVE-2013-2897](/security/CVE-2013-2897)
* [CVE-2013-2899](/security/CVE-2013-2899)
* [CVE-2013-4350](/security/CVE-2013-4350)
* [CVE-2013-4387](/security/CVE-2013-4387)

## Related notices

* [USN-2019-1](/security/notices/USN-2019-1)
* [USN-2023-1](/security/notices/USN-2023-1)
* [USN-2020-1](/security/notices/USN-2020-1)
* [USN-1976-1](/security/notices/USN-1976-1)
* [USN-1977-1](/security/notices/USN-1977-1)
* [USN-2021-1](/security/notices/USN-2021-1)
* [USN-2022-1](/security/notices/USN-2022-1)
* [USN-2039-1](/security/notices/USN-2039-1)
* [USN-2050-1](/security/notices/USN-2050-1)
* [USN-2024-1](/security/notices/USN-2024-1)
* [USN-1943-1](/security/notices/USN-1943-1)
* [USN-1947-1](/security/notices/USN-1947-1)
* [USN-1946-1](/security/notices/USN-1946-1)
* [USN-1938-1](/security/notices/USN-1938-1)
* [USN-1944-1](/security/notices/USN-1944-1)
* [USN-1945-1](/security/notices/USN-1945-1)
* [USN-1998-1](/security/notices/USN-1998-1)
* [USN-1995-1](/security/notices/USN-1995-1)
* [USN-2016-1](/security/notices/USN-2016-1)
* [USN-2015-1](/security/notices/USN-2015-1)
* [USN-2041-1](/security/notices/USN-2041-1)
* [USN-2045-1](/security/notices/USN-2045-1)
* [USN-2049-1](/security/notices/USN-2049-1)
* [USN-2234-1](/security/notices/USN-2234-1)
* [USN-2233-1](/security/notices/USN-2233-1)

### Join the discussion

* [Ubuntu security updates mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened)
* [Security announcements mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-security-announce)

### Need help with your security needs?

Ubuntu Pro provides up to ten-year security coverage for over 23,000 open-source packages within the Ubuntu Main and Universe repositories.

[Talk to an expert to find out what would work best for you](/contact-us/form?product=pro)

### Further reading

* *Loading...*

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page



=== Content from www.ubuntu.com_6c98f8a0_20250125_153348.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# USN-2019-1: Linux kernel (Quantal HWE) vulnerabilities

8 November 2013

Several security issues were fixed in the kernel.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Releases

* [Ubuntu 12.04](/security/notices?release=precise)

## Packages

* [linux-lts-quantal](/security/cves?package=linux-lts-quantal) - Linux hardware enablement kernel from Quantal

## Details

An information leak was discovered in the handling of ICMPv6 Router

Advertisement (RA) messages in the Linux kernel's IPv6 network stack. A

remote attacker could exploit this flaw to cause a denial of service

(excessive retries and address-generation outage), and consequently obtain

sensitive information. ([CVE-2013-0343](/security/CVE-2013-0343))

Kees Cook discovered flaw in the Human Interface Device (HID) subsystem of

the Linux kernel. A physically proximate attacker could exploit this flaw

to execute arbitrary code or cause a denial of service (heap memory

corruption) via a specially crafted device that provides an invalid Report

ID. ([CVE-2013-2888](/security/CVE-2013-2888))

Kees Cook discovered flaw in the Human Interface Device (HID) subsystem

when CONFIG\_HID\_ZEROPLUS is enabled. A physically proximate attacker could

leverage this flaw to cause a denial of service via a specially crafted

device. ([CVE-2013-2889](/security/CVE-2013-2889))

Kees Cook discovered a flaw in the Human Interface Device (HID) subsystem

of the Linux kerenl when CONFIG\_HID\_PANTHERLORD is enabled. A physically

proximate attacker could cause a denial of service (heap out-of-bounds

write) via a specially crafted device. ([CVE-2013-2892](/security/CVE-2013-2892))

Kees Cook discovered another flaw in the Human Interface Device (HID)

subsystem of the Linux kernel when any of CONFIG\_LOGITECH\_FF,

CONFIG\_LOGIG940\_FF, or CONFIG\_LOGIWHEELS\_FF are enabled. A physcially

proximate attacker can leverage this flaw to cause a denial of service vias

a specially crafted device. ([CVE-2013-2893](/security/CVE-2013-2893))

Kees Cook discovered another flaw in the Human Interface Device (HID)

subsystem of the Linux kernel when CONFIG\_HID\_LOGITECH\_DJ is enabled. A

physically proximate attacker could cause a denial of service (OOPS) or

obtain sensitive information from kernel memory via a specially crafted

device. ([CVE-2013-2895](/security/CVE-2013-2895))

Kees Cook discovered a vulnerability in the Linux Kernel's Human Interface

Device (HID) subsystem's support for N-Trig touch screens. A physically

proximate attacker could exploit this flaw to cause a denial of service

(OOPS) via a specially crafted device. ([CVE-2013-2896](/security/CVE-2013-2896))

Kees Cook discovered yet another flaw in the Human Interface Device (HID)

subsystem of the Linux kernel when CONFIG\_HID\_MULTITOUCH is enabled. A

physically proximate attacker could leverage this flaw to cause a denial of

service (OOPS) via a specially crafted device. ([CVE-2013-2897](/security/CVE-2013-2897))

Kees Cook discovered a flaw in the Human Interface Device (HID) subsystem

of the Linux kernel whe CONFIG\_HID\_PICOLCD is enabled. A physically

proximate attacker could exploit this flaw to cause a denial of service

(OOPS) via a specially crafted device. ([CVE-2013-2899](/security/CVE-2013-2899))

Alan Chester reported a flaw in the IPv6 Stream Control Transmission

Protocol (SCTP) of the Linux kernel. A remote attacker could exploit this

flaw to obtain sensitive information by sniffing network traffic.

([CVE-2013-4350](/security/CVE-2013-4350))

Dmitry Vyukov reported a flaw in the Linux kernel's handling of IPv6 UDP

Fragmentation Offload (UFO) processing. A remote attacker could leverage

this flaw to cause a denial of service (system crash). ([CVE-2013-4387](/security/CVE-2013-4387))

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Update instructions

The problem can be corrected by updating your system to the following package versions:

##### Ubuntu 12.04

* [linux-image-3.5.0-43-generic](https://launchpad.net/ubuntu/%2Bsource/linux-lts-quantal)
  -
  [3.5.0-43.66~precise1](https://launchpad.net/ubuntu/%2Bsource/linux-lts-quantal/3.5.0-43.66~precise1)

After a standard system update you need to reboot your computer to make

all the necessary changes.

ATTENTION: Due to an unavoidable ABI change the kernel updates have

been given a new version number, which requires you to recompile and

reinstall all third party kernel modules you might have installed. If

you use linux-restricted-modules, you have to update that package as

well to get modules which work with the new kernel version. Unless you

manually uninstalled the standard kernel metapackages (e.g. linux-generic,

linux-server, linux-powerpc), a standard system upgrade will automatically

perform this as well.

## References

* [CVE-2013-0343](/security/CVE-2013-0343)
* [CVE-2013-2888](/security/CVE-2013-2888)
* [CVE-2013-2889](/security/CVE-2013-2889)
* [CVE-2013-2892](/security/CVE-2013-2892)
* [CVE-2013-2893](/security/CVE-2013-2893)
* [CVE-2013-2895](/security/CVE-2013-2895)
* [CVE-2013-2896](/security/CVE-2013-2896)
* [CVE-2013-2897](/security/CVE-2013-2897)
* [CVE-2013-2899](/security/CVE-2013-2899)
* [CVE-2013-4350](/security/CVE-2013-4350)
* [CVE-2013-4387](/security/CVE-2013-4387)

## Related notices

* [USN-2038-1](/security/notices/USN-2038-1)
* [USN-2023-1](/security/notices/USN-2023-1)
* [USN-2020-1](/security/notices/USN-2020-1)
* [USN-1976-1](/security/notices/USN-1976-1)
* [USN-1977-1](/security/notices/USN-1977-1)
* [USN-2021-1](/security/notices/USN-2021-1)
* [USN-2022-1](/security/notices/USN-2022-1)
* [USN-2039-1](/security/notices/USN-2039-1)
* [USN-2050-1](/security/notices/USN-2050-1)
* [USN-2024-1](/security/notices/USN-2024-1)
* [USN-1998-1](/security/notices/USN-1998-1)
* [USN-1995-1](/security/notices/USN-1995-1)
* [USN-2016-1](/security/notices/USN-2016-1)
* [USN-2015-1](/security/notices/USN-2015-1)
* [USN-2041-1](/security/notices/USN-2041-1)
* [USN-2045-1](/security/notices/USN-2045-1)
* [USN-2049-1](/security/notices/USN-2049-1)
* [USN-2234-1](/security/notices/USN-2234-1)
* [USN-2233-1](/security/notices/USN-2233-1)

### Join the discussion

* [Ubuntu security updates mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened)
* [Security announcements mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-security-announce)

### Need help with your security needs?

Ubuntu Pro provides up to ten-year security coverage for over 23,000 open-source packages within the Ubuntu Main and Universe repositories.

[Talk to an expert to find out what would work best for you](/contact-us/form?product=pro)

### Further reading

* *Loading...*

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page



=== Content from www.ubuntu.com_6e5b256a_20250125_153354.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# USN-2050-1: Linux kernel (OMAP4) vulnerabilities

7 December 2013

Several security issues were fixed in the kernel.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Releases

* [Ubuntu 13.10](/security/notices?release=saucy)

## Packages

* [linux-ti-omap4](/security/cves?package=linux-ti-omap4) - Linux kernel for OMAP4

## Details

An information leak was discovered in the handling of ICMPv6 Router

Advertisement (RA) messages in the Linux kernel's IPv6 network stack. A

remote attacker could exploit this flaw to cause a denial of service

(excessive retries and address-generation outage), and consequently obtain

sensitive information. ([CVE-2013-0343](/security/CVE-2013-0343))

Dan Carpenter discovered an information leak in the HP Smart Array and

Compaq SMART2 disk-array driver in the Linux kernel. A local user could

exploit this flaw to obtain sensitive information from kernel memory.

([CVE-2013-2147](/security/CVE-2013-2147))

Kees Cook discovered flaw in the Human Interface Device (HID) subsystem of

the Linux kernel. A physically proximate attacker could exploit this flaw

to execute arbitrary code or cause a denial of service (heap memory

corruption) via a specially crafted device that provides an invalid Report

ID. ([CVE-2013-2888](/security/CVE-2013-2888))

Kees Cook discovered flaw in the Human Interface Device (HID) subsystem

when CONFIG\_HID\_ZEROPLUS is enabled. A physically proximate attacker could

leverage this flaw to cause a denial of service via a specially crafted

device. ([CVE-2013-2889](/security/CVE-2013-2889))

Kees Cook discovered a flaw in the Human Interface Device (HID) subsystem

of the Linux kerenl when CONFIG\_HID\_PANTHERLORD is enabled. A physically

proximate attacker could cause a denial of service (heap out-of-bounds

write) via a specially crafted device. ([CVE-2013-2892](/security/CVE-2013-2892))

Kees Cook discovered another flaw in the Human Interface Device (HID)

subsystem of the Linux kernel when any of CONFIG\_LOGITECH\_FF,

CONFIG\_LOGIG940\_FF, or CONFIG\_LOGIWHEELS\_FF are enabled. A physcially

proximate attacker can leverage this flaw to cause a denial of service vias

a specially crafted device. ([CVE-2013-2893](/security/CVE-2013-2893))

Kees Cook discovered another flaw in the Human Interface Device (HID)

subsystem of the Linux kernel when CONFIG\_HID\_LOGITECH\_DJ is enabled. A

physically proximate attacker could cause a denial of service (OOPS) or

obtain sensitive information from kernel memory via a specially crafted

device. ([CVE-2013-2895](/security/CVE-2013-2895))

Kees Cook discovered a vulnerability in the Linux Kernel's Human Interface

Device (HID) subsystem's support for N-Trig touch screens. A physically

proximate attacker could exploit this flaw to cause a denial of service

(OOPS) via a specially crafted device. ([CVE-2013-2896](/security/CVE-2013-2896))

Kees Cook discovered yet another flaw in the Human Interface Device (HID)

subsystem of the Linux kernel when CONFIG\_HID\_MULTITOUCH is enabled. A

physically proximate attacker could leverage this flaw to cause a denial of

service (OOPS) via a specially crafted device. ([CVE-2013-2897](/security/CVE-2013-2897))

Kees Cook discovered a flaw in the Human Interface Device (HID) subsystem

of the Linux kernel whe CONFIG\_HID\_PICOLCD is enabled. A physically

proximate attacker could exploit this flaw to cause a denial of service

(OOPS) via a specially crafted device. ([CVE-2013-2899](/security/CVE-2013-2899))

A flaw was discovered in the Linux kernel's dm snapshot facility. A remote

authenticated user could exploit this flaw to obtain sensitive information

or modify/corrupt data. ([CVE-2013-4299](/security/CVE-2013-4299))

Alan Chester reported a flaw in the IPv6 Stream Control Transmission

Protocol (SCTP) of the Linux kernel. A remote attacker could exploit this

flaw to obtain sensitive information by sniffing network traffic.

([CVE-2013-4350](/security/CVE-2013-4350))

Dmitry Vyukov reported a flaw in the Linux kernel's handling of IPv6 UDP

Fragmentation Offload (UFO) processing. A remote attacker could leverage

this flaw to cause a denial of service (system crash). ([CVE-2013-4387](/security/CVE-2013-4387))

Hannes Frederic Sowa discovered a flaw in the Linux kernel's UDP

Fragmentation Offload (UFO). An unprivileged local user could exploit this

flaw to cause a denial of service (system crash) or possibly gain

administrative privileges. ([CVE-2013-4470](/security/CVE-2013-4470))

An information leak was discovered in the Linux kernel's SIOCWANDEV ioctl

call. A local user with the CAP\_NET\_ADMIN capability could exploit this

flaw to obtain potentially sensitive information from kernel memory.

([CVE-2014-1444](/security/CVE-2014-1444))

An information leak was discovered in the wanxl ioctl function the Linux

kernel. A local user could exploit this flaw to obtain potentially

sensitive information from kernel memory. ([CVE-2014-1445](/security/CVE-2014-1445))

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Update instructions

The problem can be corrected by updating your system to the following package versions:

##### Ubuntu 13.10

* [linux-image-3.5.0-236-omap4](https://launchpad.net/ubuntu/%2Bsource/linux-ti-omap4)
  -
  [3.5.0-236.52](https://launchpad.net/ubuntu/%2Bsource/linux-ti-omap4/3.5.0-236.52)

After a standard system update you need to reboot your computer to make

all the necessary changes.

ATTENTION: Due to an unavoidable ABI change the kernel updates have

been given a new version number, which requires you to recompile and

reinstall all third party kernel modules you might have installed. If

you use linux-restricted-modules, you have to update that package as

well to get modules which work with the new kernel version. Unless you

manually uninstalled the standard kernel metapackages (e.g. linux-generic,

linux-server, linux-powerpc), a standard system upgrade will automatically

perform this as well.

## References

* [CVE-2013-0343](/security/CVE-2013-0343)
* [CVE-2013-2147](/security/CVE-2013-2147)
* [CVE-2013-2888](/security/CVE-2013-2888)
* [CVE-2013-2889](/security/CVE-2013-2889)
* [CVE-2013-2892](/security/CVE-2013-2892)
* [CVE-2013-2893](/security/CVE-2013-2893)
* [CVE-2013-2895](/security/CVE-2013-2895)
* [CVE-2013-2896](/security/CVE-2013-2896)
* [CVE-2013-2897](/security/CVE-2013-2897)
* [CVE-2013-2899](/security/CVE-2013-2899)
* [CVE-2013-4299](/security/CVE-2013-4299)
* [CVE-2013-4350](/security/CVE-2013-4350)
* [CVE-2013-4387](/security/CVE-2013-4387)
* [CVE-2013-4470](/security/CVE-2013-4470)
* [CVE-2014-1444](/security/CVE-2014-1444)
* [CVE-2014-1445](/security/CVE-2014-1445)

## Related notices

* [USN-2019-1](/security/notices/USN-2019-1)
* [USN-2038-1](/security/notices/USN-2038-1)
* [USN-2023-1](/security/notices/USN-2023-1)
* [USN-2020-1](/security/notices/USN-2020-1)
* [USN-1976-1](/security/notices/USN-1976-1)
* [USN-1977-1](/security/notices/USN-1977-1)
* [USN-2021-1](/security/notices/USN-2021-1)
* [USN-2022-1](/security/notices/USN-2022-1)
* [USN-2039-1](/security/notices/USN-2039-1)
* [USN-2024-1](/security/notices/USN-2024-1)
* [USN-2017-1](/security/notices/USN-2017-1)
* [USN-1999-1](/security/notices/USN-1999-1)
* [USN-1994-1](/security/notices/USN-1994-1)
* [USN-2018-1](/security/notices/USN-2018-1)
* [USN-1996-1](/security/notices/USN-1996-1)
* [USN-2016-1](/security/notices/USN-2016-1)
* [USN-2015-1](/security/notices/USN-2015-1)
* [USN-1997-1](/security/notices/USN-1997-1)
* [USN-1998-1](/security/notices/USN-1998-1)
* [USN-1995-1](/security/notices/USN-1995-1)
* [USN-2046-1](/security/notices/USN-2046-1)
* [USN-2041-1](/security/notices/USN-2041-1)
* [USN-2067-1](/security/notices/USN-2067-1)
* [USN-2042-1](/security/notices/USN-2042-1)
* [USN-2066-1](/security/notices/USN-2066-1)
* [USN-2045-1](/security/notices/USN-2045-1)
* [USN-2043-1](/security/notices/USN-2043-1)
* [USN-2040-1](/security/notices/USN-2040-1)
* [USN-2044-1](/security/notices/USN-2044-1)
* [USN-2049-1](/security/notices/USN-2049-1)
* [USN-2234-1](/security/notices/USN-2234-1)
* [USN-2233-1](/security/notices/USN-2233-1)
* [USN-2069-1](/security/notices/USN-2069-1)
* [USN-2073-1](/security/notices/USN-2073-1)
* [USN-2129-1](/security/notices/USN-2129-1)
* [USN-2128-1](/security/notices/USN-2128-1)

### Join the discussion

* [Ubuntu security updates mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened)
* [Security announcements mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-security-announce)

### Need help with your security needs?

Ubuntu Pro provides up to ten-year security coverage for over 23,000 open-source packages within the Ubuntu Main and Universe repositories.

[Talk to an expert to find out what would work best for you](/contact-us/form?product=pro)

### Further reading

* *Loading...*

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page



=== Content from www.ubuntu.com_3d3082c9_20250125_153347.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# USN-2016-1: Linux kernel (EC2) vulnerabilities

8 November 2013

Several security issues were fixed in the kernel.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Releases

* [Ubuntu 10.04](/security/notices?release=lucid)

## Packages

* [linux-ec2](/security/cves?package=linux-ec2) - Linux kernel for EC2

## Details

Dan Carpenter discovered an information leak in the HP Smart Array and

Compaq SMART2 disk-array driver in the Linux kernel. A local user could

exploit this flaw to obtain sensitive information from kernel memory.

([CVE-2013-2147](/security/CVE-2013-2147))

Kees Cook discovered flaw in the Human Interface Device (HID) subsystem

when CONFIG\_HID\_ZEROPLUS is enabled. A physically proximate attacker could

leverage this flaw to cause a denial of service via a specially crafted

device. ([CVE-2013-2889](/security/CVE-2013-2889))

Kees Cook discovered another flaw in the Human Interface Device (HID)

subsystem of the Linux kernel when any of CONFIG\_LOGITECH\_FF,

CONFIG\_LOGIG940\_FF, or CONFIG\_LOGIWHEELS\_FF are enabled. A physcially

proximate attacker can leverage this flaw to cause a denial of service vias

a specially crafted device. ([CVE-2013-2893](/security/CVE-2013-2893))

Kees Cook discovered yet another flaw in the Human Interface Device (HID)

subsystem of the Linux kernel when CONFIG\_HID\_MULTITOUCH is enabled. A

physically proximate attacker could leverage this flaw to cause a denial of

service (OOPS) via a specially crafted device. ([CVE-2013-2897](/security/CVE-2013-2897))

A flaw was discovered in the Linux kernel's dm snapshot facility. A remote

authenticated user could exploit this flaw to obtain sensitive information

or modify/corrupt data. ([CVE-2013-4299](/security/CVE-2013-4299))

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Update instructions

The problem can be corrected by updating your system to the following package versions:

##### Ubuntu 10.04

* [linux-image-2.6.32-358-ec2](https://launchpad.net/ubuntu/%2Bsource/linux-ec2)
  -
  [2.6.32-358.71](https://launchpad.net/ubuntu/%2Bsource/linux-ec2/2.6.32-358.71)

After a standard system update you need to reboot your computer to make

all the necessary changes.

ATTENTION: Due to an unavoidable ABI change the kernel updates have

been given a new version number, which requires you to recompile and

reinstall all third party kernel modules you might have installed. If

you use linux-restricted-modules, you have to update that package as

well to get modules which work with the new kernel version. Unless you

manually uninstalled the standard kernel metapackages (e.g. linux-generic,

linux-server, linux-powerpc), a standard system upgrade will automatically

perform this as well.

## References

* [CVE-2013-2147](/security/CVE-2013-2147)
* [CVE-2013-2889](/security/CVE-2013-2889)
* [CVE-2013-2893](/security/CVE-2013-2893)
* [CVE-2013-2897](/security/CVE-2013-2897)
* [CVE-2013-4299](/security/CVE-2013-4299)

## Related notices

* [USN-2023-1](/security/notices/USN-2023-1)
* [USN-2020-1](/security/notices/USN-2020-1)
* [USN-2017-1](/security/notices/USN-2017-1)
* [USN-1999-1](/security/notices/USN-1999-1)
* [USN-1994-1](/security/notices/USN-1994-1)
* [USN-2018-1](/security/notices/USN-2018-1)
* [USN-1996-1](/security/notices/USN-1996-1)
* [USN-2015-1](/security/notices/USN-2015-1)
* [USN-2050-1](/security/notices/USN-2050-1)
* [USN-1997-1](/security/notices/USN-1997-1)
* [USN-2019-1](/security/notices/USN-2019-1)
* [USN-2038-1](/security/notices/USN-2038-1)
* [USN-2021-1](/security/notices/USN-2021-1)
* [USN-2022-1](/security/notices/USN-2022-1)
* [USN-2039-1](/security/notices/USN-2039-1)
* [USN-2024-1](/security/notices/USN-2024-1)
* [USN-2046-1](/security/notices/USN-2046-1)
* [USN-2041-1](/security/notices/USN-2041-1)
* [USN-2067-1](/security/notices/USN-2067-1)
* [USN-2042-1](/security/notices/USN-2042-1)
* [USN-2066-1](/security/notices/USN-2066-1)
* [USN-2045-1](/security/notices/USN-2045-1)
* [USN-2043-1](/security/notices/USN-2043-1)
* [USN-2040-1](/security/notices/USN-2040-1)
* [USN-2044-1](/security/notices/USN-2044-1)
* [USN-2049-1](/security/notices/USN-2049-1)

### Join the discussion

* [Ubuntu security updates mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened)
* [Security announcements mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-security-announce)

### Need help with your security needs?

Ubuntu Pro provides up to ten-year security coverage for over 23,000 open-source packages within the Ubuntu Main and Universe repositories.

[Talk to an expert to find out what would work best for you](/contact-us/form?product=pro)

### Further reading

* *Loading...*

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page



=== Content from www.ubuntu.com_697b575b_20250125_153351.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# USN-2024-1: Linux kernel (OMAP4) vulnerabilities

8 November 2013

Several security issues were fixed in the kernel.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Releases

* [Ubuntu 13.04](/security/notices?release=raring)

## Packages

* [linux-ti-omap4](/security/cves?package=linux-ti-omap4) - Linux kernel for OMAP4

## Details

An information leak was discovered in the handling of ICMPv6 Router

Advertisement (RA) messages in the Linux kernel's IPv6 network stack. A

remote attacker could exploit this flaw to cause a denial of service

(excessive retries and address-generation outage), and consequently obtain

sensitive information. ([CVE-2013-0343](/security/CVE-2013-0343))

Kees Cook discovered flaw in the Human Interface Device (HID) subsystem of

the Linux kernel. A physically proximate attacker could exploit this flaw

to execute arbitrary code or cause a denial of service (heap memory

corruption) via a specially crafted device that provides an invalid Report

ID. ([CVE-2013-2888](/security/CVE-2013-2888))

Kees Cook discovered flaw in the Human Interface Device (HID) subsystem

when CONFIG\_HID\_ZEROPLUS is enabled. A physically proximate attacker could

leverage this flaw to cause a denial of service via a specially crafted

device. ([CVE-2013-2889](/security/CVE-2013-2889))

Kees Cook discovered a flaw in the Human Interface Device (HID) subsystem

of the Linux kerenl when CONFIG\_HID\_PANTHERLORD is enabled. A physically

proximate attacker could cause a denial of service (heap out-of-bounds

write) via a specially crafted device. ([CVE-2013-2892](/security/CVE-2013-2892))

Kees Cook discovered another flaw in the Human Interface Device (HID)

subsystem of the Linux kernel when any of CONFIG\_LOGITECH\_FF,

CONFIG\_LOGIG940\_FF, or CONFIG\_LOGIWHEELS\_FF are enabled. A physcially

proximate attacker can leverage this flaw to cause a denial of service vias

a specially crafted device. ([CVE-2013-2893](/security/CVE-2013-2893))

Kees Cook discovered another flaw in the Human Interface Device (HID)

subsystem of the Linux kernel when CONFIG\_HID\_LOGITECH\_DJ is enabled. A

physically proximate attacker could cause a denial of service (OOPS) or

obtain sensitive information from kernel memory via a specially crafted

device. ([CVE-2013-2895](/security/CVE-2013-2895))

Kees Cook discovered a vulnerability in the Linux Kernel's Human Interface

Device (HID) subsystem's support for N-Trig touch screens. A physically

proximate attacker could exploit this flaw to cause a denial of service

(OOPS) via a specially crafted device. ([CVE-2013-2896](/security/CVE-2013-2896))

Kees Cook discovered yet another flaw in the Human Interface Device (HID)

subsystem of the Linux kernel when CONFIG\_HID\_MULTITOUCH is enabled. A

physically proximate attacker could leverage this flaw to cause a denial of

service (OOPS) via a specially crafted device. ([CVE-2013-2897](/security/CVE-2013-2897))

Kees Cook discovered a flaw in the Human Interface Device (HID) subsystem

of the Linux kernel whe CONFIG\_HID\_PICOLCD is enabled. A physically

proximate attacker could exploit this flaw to cause a denial of service

(OOPS) via a specially crafted device. ([CVE-2013-2899](/security/CVE-2013-2899))

Alan Chester reported a flaw in the IPv6 Stream Control Transmission

Protocol (SCTP) of the Linux kernel. A remote attacker could exploit this

flaw to obtain sensitive information by sniffing network traffic.

([CVE-2013-4350](/security/CVE-2013-4350))

Dmitry Vyukov reported a flaw in the Linux kernel's handling of IPv6 UDP

Fragmentation Offload (UFO) processing. A remote attacker could leverage

this flaw to cause a denial of service (system crash). ([CVE-2013-4387](/security/CVE-2013-4387))

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Update instructions

The problem can be corrected by updating your system to the following package versions:

##### Ubuntu 13.04

* [linux-image-3.5.0-235-omap4](https://launchpad.net/ubuntu/%2Bsource/linux-ti-omap4)
  -
  [3.5.0-235.51](https://launchpad.net/ubuntu/%2Bsource/linux-ti-omap4/3.5.0-235.51)

After a standard system update you need to reboot your computer to make

all the necessary changes.

ATTENTION: Due to an unavoidable ABI change the kernel updates have

been given a new version number, which requires you to recompile and

reinstall all third party kernel modules you might have installed. If

you use linux-restricted-modules, you have to update that package as

well to get modules which work with the new kernel version. Unless you

manually uninstalled the standard kernel metapackages (e.g. linux-generic,

linux-server, linux-powerpc), a standard system upgrade will automatically

perform this as well.

## References

* [CVE-2013-0343](/security/CVE-2013-0343)
* [CVE-2013-2888](/security/CVE-2013-2888)
* [CVE-2013-2889](/security/CVE-2013-2889)
* [CVE-2013-2892](/security/CVE-2013-2892)
* [CVE-2013-2893](/security/CVE-2013-2893)
* [CVE-2013-2895](/security/CVE-2013-2895)
* [CVE-2013-2896](/security/CVE-2013-2896)
* [CVE-2013-2897](/security/CVE-2013-2897)
* [CVE-2013-2899](/security/CVE-2013-2899)
* [CVE-2013-4350](/security/CVE-2013-4350)
* [CVE-2013-4387](/security/CVE-2013-4387)

## Related notices

* [USN-2019-1](/security/notices/USN-2019-1)
* [USN-2038-1](/security/notices/USN-2038-1)
* [USN-2023-1](/security/notices/USN-2023-1)
* [USN-2020-1](/security/notices/USN-2020-1)
* [USN-1976-1](/security/notices/USN-1976-1)
* [USN-1977-1](/security/notices/USN-1977-1)
* [USN-2021-1](/security/notices/USN-2021-1)
* [USN-2022-1](/security/notices/USN-2022-1)
* [USN-2039-1](/security/notices/USN-2039-1)
* [USN-2050-1](/security/notices/USN-2050-1)
* [USN-1998-1](/security/notices/USN-1998-1)
* [USN-1995-1](/security/notices/USN-1995-1)
* [USN-2016-1](/security/notices/USN-2016-1)
* [USN-2015-1](/security/notices/USN-2015-1)
* [USN-2041-1](/security/notices/USN-2041-1)
* [USN-2045-1](/security/notices/USN-2045-1)
* [USN-2049-1](/security/notices/USN-2049-1)
* [USN-2234-1](/security/notices/USN-2234-1)
* [USN-2233-1](/security/notices/USN-2233-1)

### Join the discussion

* [Ubuntu security updates mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened)
* [Security announcements mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-security-announce)

### Need help with your security needs?

Ubuntu Pro provides up to ten-year security coverage for over 23,000 open-source packages within the Ubuntu Main and Universe repositories.

[Talk to an expert to find out what would work best for you](/contact-us/form?product=pro)

### Further reading

* *Loading...*

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page


