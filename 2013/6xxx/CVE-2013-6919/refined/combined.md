=== Content from www.rafayhackingarticles.net_b117a64a_20250124_162035.html ===


* [Home](http://www.rafayhackingarticles.net/)
* About
* Categories
  + item 3
  + Parent 3
  + item 4
* Tags
* Contact
* Services
* Interviews
* Advertise

[![RHA Blog](https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjr-d6EBEuEfqzONMveUL2pQbPiShJZ9Ad-x97f2bHz3C3ds31T25J3-QSbbVyDJ-MhaQ4R-7yG200L7OS2ZlTyYnCJgR1_Fizy87kc18aocbC14FABxqNhE4FVrcxPJOqds9GogvLxSeM/s1600/logo-png.png)](http://www.rafayhackingarticles.net/)

Hacker, Researcher and Author.

[Home](http://www.rafayhackingarticles.net/)
Unlabelled
phpThumb Server Side Request Forgery

# phpThumb Server Side Request Forgery

[Rafay](https://www.blogger.com/profile/15944091083959815608 "author profile")

[5:41:00 PM](http://www.rafayhackingarticles.net/2013/11/phpthumb-server-side-request-forgery.html "permanent link")

[![](https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEh9nWJ6tlLt3hFWt0FeYDzy75gI4GffUSf0pBb6Et_0gE4QsoO9AVErIIgiFRfZCtqbSUwcEeXltjvEcDsubJa0AmEM0SSL9cPwIKDdxtr78Spz77Z3HCF3QzpOFWPi3T7XURV5sKKdOIs/s1600/blackhat_hackers.jpg)](https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEh9nWJ6tlLt3hFWt0FeYDzy75gI4GffUSf0pBb6Et_0gE4QsoO9AVErIIgiFRfZCtqbSUwcEeXltjvEcDsubJa0AmEM0SSL9cPwIKDdxtr78Spz77Z3HCF3QzpOFWPi3T7XURV5sKKdOIs/s1600/blackhat_hackers.jpg)

Recently me along with my friend "**Deepankar Arora**" discovered a server side request forgery vulnerability inside of the phpThumb's latest version. The vulnerability is not inside the script itself, bit it occurs due to the fact that the webmasters do not configure phpThumb properly and also due to the fact that the high security settings were not turned on by default until now, before we talk about the details, let us briefly introduce the readers to SSRF vulnerability.

#### What is a Server Side Request Forgery?

A server side request forgery is not a single vulnerability, however it represents different classes of vulnerability which includes attacks such as XXE, http response splitting etc. In a server side request forgery an attacker creates forged packets to communicate with the intra/internet by using the vulnerable server as a pivot point. Several other different attacks can be performed, however we will keep it at a basic level so that they can be understood easily.
#### Explanation

The debug mode in phpThumb was introduced for trouble shooting purposes, however the debug mode when turned can result in a server side request forgery. By exploiting it a SSRF vulnerability an attacker may be able to scan local or remote ports, fingerprint services etc.

Let's take a look at the piece of code responsible for fetching an external image:
> if ($rawImageData = phpthumb\_functions::SafeURLread($phpThumb->src, $error, $phpThumb->config\_http\_fopen\_timeout,
>
> $phpThumb->config\_http\_follow\_redirect)) {
>
>         $phpThumb->DebugMessage('SafeURLread('.$phpThumb->src.') succeeded'.($error ? ' with messsages: "'.$error.'"' :
>
> ''), \_\_FILE\_\_, \_\_LINE\_\_);
>
>         $phpThumb->DebugMessage('Setting source data from URL "'.$phpThumb->src.'"', \_\_FILE\_\_, \_\_LINE\_\_);
>
>         $phpThumb->setSourceData($rawImageData, urlencode($phpThumb->src));
>
>     } else {
>
>         $phpThumb->ErrorImage($error);
>
>     }
>
> }
>
>  if ($rawImageData = phpthumb\_functions::SafeURLread($\_GET['**src'**], $error, $phpThumb->config\_http\_fopen\_timeout,
>
> $phpThumb->config\_http\_follow\_redirect)) {
>
>             $md5s = md5($rawImageData);
>
>         }

The above code is responsible for fetching an external image file with the "src" parameter. The code doesn't checks if the image retrieved is actually a valid image i.e. .jpg, .png, .gif etc. Therefore, under debug mode set to "**True**" it would display the error message received from the lower layer network sockets which would enable an attacker to launch a server side request forgery attack.

Furthermore, I noticed that there was a validation being performed for protocols such as **file://**.

**if (preg\_match('#^(f|ht)tp\://#i', $phpThumb->src)) {**

However, this doesn't prevent this attack completely, as an attacker may be able to leverage other protocols such as gopher://, dict:// etc in order to exploit this vulnerability.

Scanme.nmap.org has known ports 22, 80 and 25 open, In case where the server errors are turned on, there would be a distinct response by probing open ports vs closed ports.

#### Proof of Concept

**http://site.com/phpthumb/phpThumb.php?h=32&w=32&src=http://scanme.nmap.org:22&phpThumbDebug=9** // Open Port

**http://site.com/phpthumb/phpThumb.php?h=32&w=32&src=http://scanme.nmap.org:80&phpThumbDebug=9** // Open port

**http://site.com/phpthumb/phpThumb.php?**

**h=32&w=32&src=http://scanme.nmap.org:1337&phpThumbDebug=9** // Closed port

**Probing For Open-Port 80**

[![](https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEh6teeOjtj_G4GSIDWCuYTJsZMW5gAneBXfLzDv6g2jCAsI0rHSwCUbksvr_KvNbJ9saDOCoAIo-1BBrxdyuCOp8sCm8DmOma-pF3X79p5hfgiog2PMFIcOVWJuT0hHoQszt8jsGyZ7WGU/s640/openport2.png)](https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEh6teeOjtj_G4GSIDWCuYTJsZMW5gAneBXfLzDv6g2jCAsI0rHSwCUbksvr_KvNbJ9saDOCoAIo-1BBrxdyuCOp8sCm8DmOma-pF3X79p5hfgiog2PMFIcOVWJuT0hHoQszt8jsGyZ7WGU/s1600/openport2.png)

**Probing For An Open-Port 22**

[![](https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhsodcejrvNtcJqv4Rr9ZvYqt3sipDLKQ3DTF7tWHsCo-isDHdHnaJVBDoF7FrQKaDy5UxnZbO4B7Tx1otbCNOe1X5zlSIqxT0ECJdZXsMgITBGZM-b6p6tWvTW9X4pHBD2Z2GHfoQ7SVQ/s640/openport.png)](https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhsodcejrvNtcJqv4Rr9ZvYqt3sipDLKQ3DTF7tWHsCo-isDHdHnaJVBDoF7FrQKaDy5UxnZbO4B7Tx1otbCNOe1X5zlSIqxT0ECJdZXsMgITBGZM-b6p6tWvTW9X4pHBD2Z2GHfoQ7SVQ/s1600/openport.png)

**Probing For a Closed-Port 1337**

[![](https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjg-eaibmZ_gzqQQKosZhT61RyhWc9YzBh9CwnpXfgri0k3IWbiWOr78oW4dayhSSh_BmygQDvIZQonnUbrTTTCJP2pxZerk5gdsN3rPEnI-yiyFuPYS8Gsha4-0EiLDIwMVvnhqE5oTQg/s640/closedport.png)](https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjg-eaibmZ_gzqQQKosZhT61RyhWc9YzBh9CwnpXfgri0k3IWbiWOr78oW4dayhSSh_BmygQDvIZQonnUbrTTTCJP2pxZerk5gdsN3rPEnI-yiyFuPYS8Gsha4-0EiLDIwMVvnhqE5oTQg/s1600/closedport.png)

**SSRF Inside-Out**

In the similar manner an attacker may be able to leverage this attack to scan ports for the intranet. Following are the most common hosts found on the intranet that is worth looking for.

**1)** intranet
**2)** webmail
**3)** jira
**4)** helpdesk
**5)** bugzilla
**6)** localhost

In case where the debug mode is disabled, the attacker would receive the following error message:

[![](https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjZuZ7aaS4Yojejagci1pTT4dE07cLOL9-tuT47m5qA-cWrydfpVh3t1jb4PlkRK9H3GU4rj0hY1ViU1FzXMsdNqkQyrYH6B4kqg6H5dw23ApKYzl9RbwaojuV6Lr5wL93gWIT2g6F5Xzw/s640/phpThumb.png)](https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjZuZ7aaS4Yojejagci1pTT4dE07cLOL9-tuT47m5qA-cWrydfpVh3t1jb4PlkRK9H3GU4rj0hY1ViU1FzXMsdNqkQyrYH6B4kqg6H5dw23ApKYzl9RbwaojuV6Lr5wL93gWIT2g6F5Xzw/s1600/phpThumb.png)

**Recommendations**

It is recommended to turn off the "debug" mode. The debug mode can be modifying by changing the following lines inside the PHP code.

**"$PHPTHUMB\_CONFIG['disable\_debug']= false;"**

With:

**"$PHPTHUMB\_CONFIG['disable\_debug']= true;".**

#### Fix

**1)** The authors explicitly disabled all other protocols then http/https/ftp protocols. This minimizes few of the attack vectors.

**https://github.com/JamesHeinrich/phpThumb/commit/457a37d4a22ac9cdbbfe19577376622e58df81b0**

**2)** The debug\_mode has been disabled and the "High Security Mode" has been enabled by default in version phpThumb 1.7.12. Take a look at the author's note:

[![](https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEi4FkWo-zZlc0Nk8Qk1nQZFI-HXLL0UX0rOFQ5VDQVcjGsyQ14X1QzqlbjOfZ-ETPjGpkHm7-zMgYdUFBFJjg1fy-3lwj8DTOWXXK_NMJWHP1wi3gBtyMlGn2uUw5J7rRxe_K0VT-dJpeQ/s640/1.png)](https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEi4FkWo-zZlc0Nk8Qk1nQZFI-HXLL0UX0rOFQ5VDQVcjGsyQ14X1QzqlbjOfZ-ETPjGpkHm7-zMgYdUFBFJjg1fy-3lwj8DTOWXXK_NMJWHP1wi3gBtyMlGn2uUw5J7rRxe_K0VT-dJpeQ/s1600/1.png)

[![](https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEio76OYINVGBgoWJ76zFg_l4CqDdK62fqwNn9fVKnkZbfPk5hc4YmpeFtSJHcKK3EPTteIONgNSq7C3trH8xgL5Iz-SAF4jDofD7HRCDeaeXl33MltPA5X6yWhWUzE6SinLvsZvZiKUGhM/s1600/2.png)](https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEio76OYINVGBgoWJ76zFg_l4CqDdK62fqwNn9fVKnkZbfPk5hc4YmpeFtSJHcKK3EPTteIONgNSq7C3trH8xgL5Iz-SAF4jDofD7HRCDeaeXl33MltPA5X6yWhWUzE6SinLvsZvZiKUGhM/s1600/2.png)

**3)** Further security improvements are to be done in the future versions.

Special thanks to "**David Vieira-Kurz**" from Majorsecurity for his advice on this issue.

[![](http://img2.blogblog.com/img/icon18_edit_allbkg.gif)](https://www.blogger.com/post-edit.g?blogID=3121270199089759062&postID=8197617936839344620&from=pencil "Edit Post")

SHARES

[Share](http://www.facebook.com/share.php?v=4&u=http://www.rafayhackingarticles.net/2013/11/phpthumb-server-side-request-forgery.html&t=phpThumb Server Side Request Forgery "Share on Facebook!")

[Pin it](http://pinterest.com/pin/create/button/?url=http://www.rafayhackingarticles.net/2013/11/phpthumb-server-side-request-forgery.html&media=https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEh9nWJ6tlLt3hFWt0FeYDzy75gI4GffUSf0pBb6Et_0gE4QsoO9AVErIIgiFRfZCtqbSUwcEeXltjvEcDsubJa0AmEM0SSL9cPwIKDdxtr78Spz77Z3HCF3QzpOFWPi3T7XURV5sKKdOIs/s72-c/blackhat_hackers.jpg&description=phpThumb Server Side Request Forgery "Pin it!")

[Tweet](http://twitter.com/home?status=phpThumb Server Side Request Forgery-http://www.rafayhackingarticles.net/2013/11/phpthumb-server-side-request-forgery.html "Share on Twitter!")

[Share](http://www.linkedin.com/shareArticle?mini=true&url=http://www.rafayhackingarticles.net/2013/11/phpthumb-server-side-request-forgery.html "Share on Linkedin!")

[Share](https://plus.google.com/share?url=http://www.rafayhackingarticles.net/2013/11/phpthumb-server-side-request-forgery.html "Share on Google Plus!")

[Share](http://www.stumbleupon.com/submit?url=http://www.rafayhackingarticles.net/2013/11/phpthumb-server-side-request-forgery.html "Stumble it!")

[![](https://3.bp.blogspot.com/-eYyUk4KGuBg/Vs-oFm656VI/AAAAAAAAQfE/maUNyJ9PWqE/s1600/logo-icon.png)Buffer](https://buffer.com/add?url=http://www.rafayhackingarticles.net/2013/11/phpthumb-server-side-request-forgery.html&picture=https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEh9nWJ6tlLt3hFWt0FeYDzy75gI4GffUSf0pBb6Et_0gE4QsoO9AVErIIgiFRfZCtqbSUwcEeXltjvEcDsubJa0AmEM0SSL9cPwIKDdxtr78Spz77Z3HCF3QzpOFWPi3T7XURV5sKKdOIs/s72-c/blackhat_hackers.jpg&text=phpThumb Server Side Request Forgery&via=stc_network "Share on Buffer!")

Print

#### 3 comments:

1. ![](//resources.blogblog.com/img/blank.gif)[thenoobcoder](http://madleets.com)[November 29, 2013 at 10:34 PM](http://www.rafayhackingarticles.net/2013/11/phpthumb-server-side-request-forgery.html?showComment=1385793268466#c3088582638439889712)

   Where are the Google Dorks ?

   Reply[Delete](https://www.blogger.com/delete-comment.g?blogID=3121270199089759062&postID=3088582638439889712)Replies
   Reply
2. ![](//resources.blogblog.com/img/blank.gif)Anonymous[November 30, 2013 at 1:34 AM](http://www.rafayhackingarticles.net/2013/11/phpthumb-server-side-request-forgery.html?showComment=1385804060353#c3753768208508728656)

   Its known one, since 2012 nov. check packetstrom sec..

   Reply[Delete](https://www.blogger.com/delete-comment.g?blogID=3121270199089759062&postID=3753768208508728656)Replies
   Reply
3. ![](//www.blogger.com/img/blogger_logo_round_35.png)[Rafay](https://www.blogger.com/profile/15944091083959815608)[June 17, 2014 at 5:33 AM](http://www.rafayhackingarticles.net/2013/11/phpthumb-server-side-request-forgery.html?showComment=1403008421085#c6484500332476573678)

   Link?

   Reply[Delete](https://www.blogger.com/delete-comment.g?blogID=3121270199089759062&postID=6484500332476573678)Replies
   Reply

Add commentLoad more...

Subscribe to:
[Post Comments (Atom)](http://www.rafayhackingarticles.net/feeds/8197617936839344620/comments/default)

## Rafay's Blackhat Talk

## Webinar on WAF Bypass

Over 26k+ Subscribers!

Receive free ethical hacking related tips and tricks by submitting your email ID below.

[Like](https://facebook.com/rafaybalochofficialpage "Follow RHA updates on Facebook!")
[17k+ people like RHA.](https://facebook.com/rafaybalochofficialpage)
[Follow **@rafaybaloch**](https://twitter.com/rafaybaloch "Follow RafayBaloch (@rafaybaloch) on Twitter")
[11.9k+ followers](https://twitter.com/rafaybaloch)

## Random

## Popular

* [![](https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEh9nWJ6tlLt3hFWt0FeYDzy75gI4GffUSf0pBb6Et_0gE4QsoO9AVErIIgiFRfZCtqbSUwcEeXltjvEcDsubJa0AmEM0SSL9cPwIKDdxtr78Spz77Z3HCF3QzpOFWPi3T7XURV5sKKdOIs/w72-h72-p-k-no-nu/blackhat_hackers.jpg)](http://www.rafayhackingarticles.net/2013/11/phpthumb-server-side-request-forgery.html)

  [phpThumb Server Side Request Forgery](http://www.rafayhackingarticles.net/2013/11/phpthumb-server-side-request-forgery.html)
* [![](https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEh7mEyjnD46SoYMwFVCidffZj9UT7YSNSzXnt0dqoxGivJLP0Q0l0rmFXhIp0Hx25brHRv0SIcuh27n2SnafALyZjbC_B7iokFsQNDdr0mZtsgIh_DpKqUobd7JI6BZnxC14Pzd89QeKLU/w72-h72-p-k-no-nu/1.png)](http://www.rafayhackingarticles.net/2013/12/bypassing-modern-wafs-xss-filters-cheat.html)

  [Bypassing Modern WAF's XSS Filters - Cheat Sheet](http://www.rafayhackingarticles.net/2013/12/bypassing-modern-wafs-xss-filters-cheat.html)
* [![](https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjMEtucXqVr6izUDX6ffS7WulxSY3YydnXajzWN8-keVY5JQfLim7lJeRsWgN3c1XuunT49Fn2oij7sEncgtHT7HlVVS4z3DFdQ9tCOA1z0Uh5ZGdeAEnCBzMUD44Yzu0boFLrL7KQ9KIA/w72-h72-p-k-no-nu/frederic-pretty-hacker-hoax.jpg)](http://www.rafayhackingarticles.net/2013/12/7-qualities-of-highly-effective-hackers.html)

  [7 Qualities of Highly Effective Hackers](http://www.rafayhackingarticles.net/2013/12/7-qualities-of-highly-effective-hackers.html)
* [![](https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiLB680zfTc-m18zkZ9q6fPnEoleRD8FJNrHUHnnTRzgHfm9nbtNQXeGNmbWHRDNYoEtgNZ6Hz2cw-GdqcRh57DRatmKHdLOlODH4LtN9-m_llj7_vq1BBBmmMmS-nR25b3RpIQFkiNNrU/w72-h72-p-k-no-nu/download.jpg)](http://www.rafayhackingarticles.net/2013/12/code-igniter-xss-filter-multiple.html)

  [Code Igniter XSS Filter Multiple Bypasses](http://www.rafayhackingarticles.net/2013/12/code-igniter-xss-filter-multiple.html)

## Comments

recentcomments

## Categories

[Hacking News](http://www.rafayhackingarticles.net/search/label/Hacking%20News)
(42)

[Website hacking](http://www.rafayhackingarticles.net/search/label/Website%20hacking)
(15)

[Security tips](http://www.rafayhackingarticles.net/search/label/Security%20tips)
(10)

[Hack Facebook](http://www.rafayhackingarticles.net/search/label/Hack%20Facebook)
(7)

[Webserver Security](http://www.rafayhackingarticles.net/search/label/Webserver%20Security)
(6)

[contests](http://www.rafayhackingarticles.net/search/label/contests)
(6)

[DOM XSS](http://www.rafayhackingarticles.net/search/label/DOM%20XSS)
(5)

[Metasploit](http://www.rafayhackingarticles.net/search/label/Metasploit)
(5)

[android](http://www.rafayhackingarticles.net/search/label/android)
(5)

[facebook](http://www.rafayhackingarticles.net/search/label/facebook)
(5)

[sql injection](http://www.rafayhackingarticles.net/search/label/sql%20injection)
(5)

[Others](http://www.rafayhackingarticles.net/search/label/Others)
(4)

[Reverse Engineering](http://www.rafayhackingarticles.net/search/label/Reverse%20Engineering)
(4)

[Gmail hacks](http://www.rafayhackingarticles.net/search/label/Gmail%20hacks)
(3)

[Hacking Tools](http://www.rafayhackingarticles.net/search/label/Hacking%20Tools)
(3)

[Security flaws](http://www.rafayhackingarticles.net/search/label/Security%20flaws)
(3)

[Sponsored Reivews](http://www.rafayhackingarticles.net/search/label/Sponsored%20Reivews)
(3)

[Wordpress Security](http://www.rafayhackingarticles.net/search/label/Wordpress%20Security)
(3)

[Computer Forensics](http://www.rafayhackingarticles.net/search/label/Computer%20Forensics)
(2)

[Cracks and Keygens](http://www.rafayhackingarticles.net/search/label/Cracks%20and%20Keygens)
(2)

[Cryptography](http://www.rafayhackingarticles.net/search/label/Cryptography)
(2)

[Hacking basics](http://www.rafayhackingarticles.net/search/label/Hacking%20basics)
(2)

[bug bounty](http://www.rafayhackingarticles.net/search/label/bug%20bounty)
(2)

[videos](http://www.rafayhackingarticles.net/search/label/videos)
(2)

[Cheat and tricks](http://www.rafayhackingarticles.net/search/label/Cheat%20and%20tricks)
(1)

[Computer hacking](http://www.rafayhackingarticles.net/search/label/Computer%20hacking)
(1)

[Course Reviews](http://www.rafayhackingarticles.net/search/label/Course%20Reviews)
(1)

[Password Cracking](http://www.rafayhackingarticles.net/search/label/Password%20Cracking)
(1)

[SSI Vulnerability](http://www.rafayhackingarticles.net/search/label/SSI%20Vulnerability)
(1)

[Stuxnet](http://www.rafayhackingarticles.net/search/label/Stuxnet)
(1)

[iPhone Hacking](http://www.rafayhackingarticles.net/search/label/iPhone%20Hacking)
(1)

SIGN UP FOR MY FREE NEWSLETTERLearn How to Excel In Penetration Testing & Become an Expert Security Researcher.

Contact us

 © 2016 All Rights Reserved by [RHA Info Sec.](http://www.rafayhackingarticles.net/)
[Top](#top)

## Contact Form

Name

Email
\*

Message
\*

Powered by [Blogger](https://www.blogger.com).



=== Content from github.com_a2be4eb8_20250124_162044.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FJamesHeinrich%2FphpThumb%2Fblob%2Fmaster%2Fdocs%2Fphpthumb.changelog.txt)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FJamesHeinrich%2FphpThumb%2Fblob%2Fmaster%2Fdocs%2Fphpthumb.changelog.txt)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fblob%2Fshow&source=header-repo&source_repo=JamesHeinrich%2FphpThumb)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[JamesHeinrich](/JamesHeinrich)
/
**[phpThumb](/JamesHeinrich/phpThumb)**
Public

* [Notifications](/login?return_to=%2FJamesHeinrich%2FphpThumb) You must be signed in to change notification settings
* [Fork
  99](/login?return_to=%2FJamesHeinrich%2FphpThumb)
* [Star
   318](/login?return_to=%2FJamesHeinrich%2FphpThumb)

* [Code](/JamesHeinrich/phpThumb)
* [Issues
  28](/JamesHeinrich/phpThumb/issues)
* [Pull requests
  0](/JamesHeinrich/phpThumb/pulls)
* [Actions](/JamesHeinrich/phpThumb/actions)
* [Projects
  0](/JamesHeinrich/phpThumb/projects)
* [Wiki](/JamesHeinrich/phpThumb/wiki)
* [Security](/JamesHeinrich/phpThumb/security)
* [Insights](/JamesHeinrich/phpThumb/pulse)

Additional navigation options

* [Code](/JamesHeinrich/phpThumb)
* [Issues](/JamesHeinrich/phpThumb/issues)
* [Pull requests](/JamesHeinrich/phpThumb/pulls)
* [Actions](/JamesHeinrich/phpThumb/actions)
* [Projects](/JamesHeinrich/phpThumb/projects)
* [Wiki](/JamesHeinrich/phpThumb/wiki)
* [Security](/JamesHeinrich/phpThumb/security)
* [Insights](/JamesHeinrich/phpThumb/pulse)

## Files

 master
## Breadcrumbs

1. [phpThumb](/JamesHeinrich/phpThumb/tree/master)
2. /[docs](/JamesHeinrich/phpThumb/tree/master/docs)
/
# phpthumb.changelog.txt

Copy path Blame  Blame
## Latest commit

## History

[History](/JamesHeinrich/phpThumb/commits/master/docs/phpthumb.changelog.txt)1592 lines (1512 loc) · 72.6 KB master
## Breadcrumbs

1. [phpThumb](/JamesHeinrich/phpThumb/tree/master)
2. /[docs](/JamesHeinrich/phpThumb/tree/master/docs)
/
# phpthumb.changelog.txt

Top
## File metadata and controls

* Code
* Blame

1592 lines (1512 loc) · 72.6 KB[Raw](https://github.com/JamesHeinrich/phpThumb/raw/refs/heads/master/docs/phpthumb.changelog.txt)1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192939495969798991001011021031041051061071081091101111121131141151161171181191201211221231241251261271281291301311321331341351361371381391401411421431441451461471481491501511521531541551561571581591601611621631641651661671681691701711721731741751761771781791801811821831841851861871881891901911921931941951961971981992002012022032042052062072082092102112122132142152162172182192202212222232242252262272282292302312322332342352362372382392402412422432442452462472482492502512522532542552562572582592602612622632642652662672682692702712722732742752762772782792802812822832842852862872882892902912922932942952962972982993003013023033043053063073083093103113123133143153163173183193203213223233243253263273283293303313323333343353363373383393403413423433443453463473483493503513523533543553563573583593603613623633643653663673683693703713723733743753763773783793803813823833843853863873883893903913923933943953963973983994004014024034044054064074084094104114124134144154164174184194204214224234244254264274284294304314324334344354364374384394404414424434444454464474484494504514524534544554564574584594604614624634644654664674684694704714724734744754764774784794804814824834844854864874884894904914924934944954964974984995005015025035045055065075085095105115125135145155165175185195205215225235245255265275285295305315325335345355365375385395405415425435445455465475485495505515525535545555565575585595605615625635645655665675685695705715725735745755765775785795805815825835845855865875885895905915925935945955965975985996006016026036046056066076086096106116126136146156166176186196206216226236246256266276286296306316326336346356366376386396406416426436446456466476486496506516526536546556566576586596606616626636646656666676686696706716726736746756766776786796806816826836846856866876886896906916926936946956966976986997007017027037047057067077087097107117127137147157167177187197207217227237247257267277287297307317327337347357367377387397407417427437447457467477487497507517527537547557567577587597607617627637647657667677687697707717727737747757767777787797807817827837847857867877887897907917927937947957967977987998008018028038048058068078088098108118128138148158168178188198208218228238248258268278288298308318328338348358368378388398408418428438448458468478488498508518528538548558568578588598608618628638648658668678688698708718728738748758768778788798808818828838848858868878888898908918928938948958968978988999009019029039049059069079089099109119129139149159169179189199209219229239249259269279289299309319329339349359369379389399409419429439449459469479489499509519529539549559569579589599609619629639649659669679689699709719729739749759769779789799809819829839849859869879889899909919929939949959969979989991000//////////////////////////////////////////////////////////////////// phpThumb() by James Heinrich <info@silisoftware.com> //// available at http://phpthumb.sourceforge.net //// and/or https://github.com/JamesHeinrich/phpThumb ////////////////////////////////////////////////////////////////////
¤ = structure change or important new feature\* = less important new feature or change
v1.7.22-202312071641 \* [bugfix: #219] PHP 8 compatibility \* [bugfix: #218] PHP 7 compatibility
v1.7.21-202307141720 \* [bugfix: #215] PHP 8.2 compatibility \* [bugfix: #214] PHP 8.2 compatibility (Dynamic Properties are deprecated) \* [bugfix: #213] PHP 8.2 compatibility \* [bugfix: #212] PHP 8.2 compatibility \* [bugfix: #211] quality parameter fix for ImageMagick processing \* [bugfix: #208] PHP 8.2 compatibility \* [bugfix: #207] PHP 8.2 compatibility
v1.7.20-202212091316 \* [bugfix: #203] Support https in file\_get\_contents polyfill \* [bugfix: #202] Test if property is set when testing array (@ operator fix) \* [bugfix: #201] Test if file exists when getting modified time (@ operator fix) \* [bugfix: #200] IMAGETYPE\_AVIF not included in ImageTypeToMIMEtype()
v1.7.19-202210110924 ¤ #193 Composer - script hsp-generate for generate High Security Password \* [bugfix: #196] PHP8 compatibility \* [bugfix: #191] IMAGETYPE\_AVIF not defined
v1.7.18-202208061319 ¤ add support for AVIF image format (requires PHP 8.1.0) for native PHP support. \* [bugfix: G190] ensure that all used IMG\_ and IMAGETYPE\_ constants are always defined. \* [bugfix: G188] fix some potential null-parameter warnings \* [bugfix: G187] PHP8 compatibility \* [bugfix: G185] PHP8 compatibility \* [bugfix: G183] better message auth
v1.7.17-202109221111 \* [bugfix: G171] problem with class\_exists and autoloading \* [bugfix: G173] file\_get\_contents instead of readfile \* [bugfix: G178] missing quality parameter in webp \* [bugfix: G181] missing webp in ImageCreateFromFilename
v1.7.16-202012161640 ¤ PHP 8.0 compatibility \* [bugfix: G168] bad call to $this inside static function \* [bugfix: G167] realPathSafe() issues on Windows \* [bugfix: G164] open\_basedir on Windows prevents caching \* [bugfix: G155] PHP 7.4 compatibility \* [bugfix: G154] regex for external image source
v1.7.15-202004301145 ¤ PHP 7.4 curly brace substring compatibility ¤ add basic support for WebP \* [bugfix: G18] fopen() fails when using remote images from SSL \* [bugfix: G65] ImageMagick -flatten vs PNG transparency \* [bugfix: G75] improved InitializeTempDirSetting \* [bugfix: G76] fix memory limit detection \* [bugfix: G78] AllowOutputEnlargement and Zoom-Crop \* [bugfix: G90] missing $PHPTHUMB\_CONFIG \* [bugfix: G91] missing config\_ prefix in allow\_local\_http\_src \* [bugfix: G93] ImageMagick unsharp amount/threshold \* [bugfix: G94] cannot declare class phpthumb\_functions \* [bugfix: G96] language level migration fixes \* [bugfix: G108] add 'line-height' for text in image \* [bugfix: G113] fix PNGs losing transparency \* [bugfix: G123] improved default thumbnail filename \* [bugfix: G126] overlay on transparent image \* [bugfix: G133] fix 'wmi' and 'wmt' filters \* [bugfix: G134] fix fsockopen http status text \* [bugfix: G140] parse\_url return user/pass \* [bugfix: G142] allow transparent background when using 'far' \* [bugfix: G144] fix class\_exists \* [bugfix: G149] magic quotes deprecated in PHP 7.4.2 \* bugfix: ImageMagick v7+ parameter order (in, op, out)
v1.7.14-201608101311 ¤ improved PHP7 compatability \* [bugfix: #1021] demo.gallery updates for phpThumbURL \* [bugfix: G65] PNG transparency \* [bugfix: G70] set a default timezone if one is not set \* [bugfix: G69] overlay margins \* [bugfix: G66] lowercase all PHP function names \* [bugfix: G64] Can't put thumbnail into a frame \* [bugfix: #1014] PDF thumbnail not rendered correctly \* [bugfix: #1008] phpThumbURL accept array parameters \* [bugfix: #988] mysqli support in demo \* [bugfix: G41] fail when memory\_limit = -1 \* [bugfix: G35] no temp directory set \* [bugfix: G33] realpath not working on some systems \* [bugfix: #991] ImprovedImageRotate not static \* set Last-Modified header on all requests \* [bugfix: G19] phpThumbURL() rawurlencode \* [bugfix: G26] ImageInterlace in RenderOutput() \* [bugfix: #775] file\_exists\_ignoreopenbasedir \* escapeshellarg disabled workaround \* [bugfix: #977] $PHPTHUMB\_DEFAULTS not working \* [bugfix: G24] enable ImagePNG quality \* [bugfix: G25] escapeshellarg may exist but be disabled
v1.7.13-201406261000 - June 26, 2014 \* Bugfix: incorrect variable name in phpThumb.php could prevent all hash values from matching
v1.7.12-201406260900 - June 26, 2014 ¤ high\_security\_mode enabled by default and strongly recommended ¤ debug mode must be disabled to allow thumbnail generation Thanks to Rafay Baloch (www.rafayhackingarticles.net) for recommending some security configuration changes \* default config\_cache\_directory\_depth is now 2 (was 4) \* Bugfix: temp files used with ImageMagick might not get deleted from cache directory \* Bugfix (G:17): 'far' parameter not working as intended \* Bugfix (G:16): $PHPTHUMB\_DEFAULTS configuration ignored \* Bugfix (G:15): $PHPTHUMB\_DEFAULTS\_GETSTRINGOVERRIDE logic wrong \* Bugfix (G:11): config\_cache\_maxsize does not count wasted space \* Bugfix (G:10): error images ignored relevant config options \* Bugfix (#962): support symlinked subfolders for image source \* Bugfix (#934): source image region (sx/sy/sw/sh) did not work when using ImageMagick \* Bugfix (#925): add configurable URL separator \* Bugfix (#921): non-static phpUnsharpMask::applyUnsharpMask() \* Bugfix (#920): $PHPTHUMB\_DEFAULTS with array value gives array-to-string PHP error \* Bugfix (#909): unnecessary calls of shell commands when cached \* Bugfix (#618): cached files inside subdirs won't be deleted \* Bugfix (#594): ImageMagick variants not detected (e.g. OpenMP)
v1.7.11-201108081344 - August 8, 2011 ¤ Added even more explicit escaping of command line parameters ¤ $PHPTHUMB\_CONFIG['high\_security\_password'] needs to be more complex than before. Previously 5 characters length was required, now password strength calculated based on character type (a-z, A-Z, 0-9, other) and count. See PasswordStrength() function in phpThumb.php ¤ deliberate delay inserted on failed hash in high\_security mode to slow down brute force attempts ¤ 'file' paramter removed (use object mode instead) ¤ 'goto' paramter removed (use object mode instead) ¤ Disable all demos by default, user will need to comment out a line to run the demo ¤ CleanUpCacheDirectory() is now only called once per hour, and skipped entirely if cache directory is not writable \* Bugfix: crop broken if width or height set to 1.00 \* Bugfix: gamma filter for ImageMagick was broken \* Bugfix: newer versions of ImageMagick have changed "-gaussian" filter to "-gaussian-blur" \* Bugfix: newer versions of ImageMagick have changed date format from DD/MM/YY to YYYY-MM-DD \* Bugfix: image not found errors when using virtual subdirectories \* Bugfix: assorted errors in phpThumb.demo.check.php \* Bugfix (#265): source images other than JPEG/PNG/GIF would not generate thumbnails for remote (http) images but work locally \* Bugfix (#253): ImageMagick not found if outside open\_basedir \* Bugfix (#243): port ignored in URLreadFsock() \* Bugfix (#240): Any temporary file created through phpThumb\_tempnam() is automatically deleted at the end of the script via phpThumb object destructor (PHP5 only) \* Bugfix (#216): uninitialized string offset \* Bugfix (#209): don't try ImageMagick first if config\_prefer\_imagemagick == false \* Bugfix (#127): CleanUpURLencoding() ignored port number \* Bugfix (#38): CleanUpCacheDirectory() ignored config\_cache\_prefix \* Bugfix (#31): ExtractEXIFgetImageSize() may throw errors on non- JPEG/TIFF images when calling exif\_read\_data()
v1.7.10 - April 24, 2011 \* ImageMagickVersion() returned unknown-version for versions with hyphenated subversion numbers (thanks r34wangØuwaterloo\*ca) \* replace all ereg\* functions with preg\* equivalents for PHP v5.3.0+ compatability \* Bugfix: security vulnerabilities when used with ImageMagick
v1.7.9 - May 28, 2008 \* "ra" (rotation) now handled by ImageMagick directly. Note: If output to transparent-supporting format (PNG,GIF) them ImageMagick support only enabled for v6.3.7 and above when rotating to nonmultiples of 90° (e.g. rotate by 30°). Transparent area behind rotate image buggy in v6.2.9 and working fine in v6.3.7 (exact version where fixed is unknown, reports welcome) \* Debug now shows server software version \* Debug now checks for GetImageSize() availability \* Better error message when neither ImageMagick nor GD are installed on server (thanks kevinmØbuenacg\*com) \* Bugfix: uncaught image-too-large exception when using HTTP source image and ImageMagick is unavailable or fails (thanks jslaggerØjsamdirect\*com) \* Bugfix: phpThumb could sometimes die without showing an error message when using an HTTP/data image source that is too large for GD processing with PHP memory limit (thanks jslaggerØjsamdirect\*com) \* Bugfix: prevent error images from clobbering debug output \* Bugfix: temp file for ImageMagick processing not created correctly when source image is HTTP or from non-file data (thanks jonahØschwartzdev\*com, tsolanØgmail\*com) \* Bugfix: Filters are only removed from the processing queue if ImageMagick supports them AND returns successfully (thanks tsolanØgmail\*com) \* Bugfix: ImageCreateFromStringReplacement() doesn't need to fail in safe\_mode if can still write temp file somewhere (thanks avatar1983Øgmail\*com) \* Bugfix: ImageMagickThumbnailToGD() doesn't need to fail in safe\_mode if can still write temp file somewhere (thanks avatar1983Øgmail\*com) \* Bugfix: better error messages when safe\_mode enabled and using MySQL database for image source (thanks avatar1983Øgmail\*com) \* Bugfix: "wmt" alignment broken for built-in fonts (thanks mailØmmjaeger\*com) \* Bugfix: CleanUpCacheDirectory() has some undefined variables that might have been the cause of the images- don't-show-on-first-page-load bug (thanks hgØdynweb\*net) \* Bugfix: phpThumb.php would not correctly skip unneeded processing if source image was smaller than target size (thanks adam\*kingØcarnegiecycling\*com\*au) \* Bugfix: phpThumb.demo.check.php incorrectly calculated age of ImageMagick version (for versions < 180 days old)
v1.7.8 - September 16, 2007 ¤ Added 'stc' (Source Transparent Color) filter (Feature Request #1672440) ¤ 'zc' now supports directed crop (top/bottom/left/right) (thanks leeØvirtualinkdesign\*com, chrisØsostreassoc\*com) ¤ new class function resetObject() should be used to reset default class paramters to default to allow reusing a single object on multiple images (see phpThumb.demo.object.php) (thanks bjohnsonØaccomplishhosting\*com) ¤ "wmt" and "wmi" filters now support absolute positioning using alignment values: {xoffset}x{yoffset} (eg: "10x20") (Feature Request #1567113) (thanks mailØpedrocandeias\*com; squidlibertyØusers\*sourceforge\*net) ¤ "wmi" filter now supports watermark scaling & rotation (Feature Request #1788063) (thanks glen\*fiebichØ2020promo\*com) ¤ Added "size" filter. NOTE: try not to use this filter, it is inefficient and for special purposes only, please see phpthumb.readme.txt entry before using. (thanks glen\*fiebichØ2020promo\*com) \* Added wildcard domain options for config settings nooffsitelink\_valid\_domains and nohotlink\_valid\_domains (thanks meØjohannes\*jarolim\*com) \* Output image format defaults to input format (based on filename) (thanks bjohnsonØaccomplishhosting\*com) \* Sepia filter now uses ImageFilter under PHP5 (thanks richard\*comleyØmademedia\*co\*uk) \* "f" parameters now accepts formats with leading "." (eg "&f=.png") to allow you to fool things that look at the last characters of the URL to determine image type (thanks alexØalexderas\*nl) \* Added section to phpthumb.demo.check.php to test cache file creation and deletion \* Bugfix [#1715256]: ImageMagick output not always used if fltr set incorrectly (thanks danakiØusers\*sourceforge\*net) \* Bugfix [#1541673]: ResolveFilenameToAbsolute() fails in RenderToFile() if target file does not exist (thanks jasonpellØusers\*sourceforge\*net) \* Bugfix [#1703373]: CleanUpURLencoding() broken if path element equals "0" (thanks izeronØusers\*sourceforge\*net) \* Bugfix [#1573399]: phpthumb\_filters::Colorize() broken under PHP5 (thanks cerwØusers\*sourceforge\*net) \* Bugfix [#1573399]: ImageMagick version of colorize filter missing quotes (thanks cerwØusers\*sourceforge\*net) \* Bugfix [#1733462]: SafeExec broken (thanks hansfnØusers\*sourceforge\*net) \* Bugfix [#1751821]: open\_basedir restriction gives warning when trying to initialize config\_temp\_dir (thanks k-mystikØusers\*sourceforge\*net) \* Bugfix: [#1751880]: open\_basedirs not initialized properly under Windows (thanks k-mystikØusers\*sourceforge\*net) \* Bugfix: "A non well formed numeric value encountered" error when using "cont" filter in PHP5 (thanks isnbitØyahoo\*com) \* Bugfix: Colorize filter ignored $amount under PHP5 (thanks richard\*comleyØmademedia\*co\*uk) \* Bugfix: double-drawn color in corders of Bevel filter (thanks m\*westmijzeØstudent\*utwente\*nl) \* Bugfix: 'nocache' parameter was forbidden (thanks andreasØkringelstan\*se) \* Bugfix: disabled functions (set\_time\_limit, shell\_exec, etc) not always correctly detected (thanks ryandemmerØgmail\*com, dr\*creatorØgmail\*com) \* Bugfix: phpThumbURL() was broken if \_\_FILE\_\_ and $PHPTHUMB\_CONFIG['document\_root'] had different slash styles (\ vs /) (thanks jobbetØskarin\*com) \* Bugfix: 'wmt' watermark text not properly right- or center- aligned with TTF fonts \* Bugfix: force stderr output to stdout in SafeExec \* Bugfix: filter-generated debug messages not passed back \* Bugfix: /demo/phpThumb.demo.gallery.php was not getting correct DOCUMENT\_ROOT value on some servers (thanks latex\*dragonØgmail\*com) \* Bugfix: HTTP source images with no parameters were not being passed through directly (thanks chrisØmegawap\*net) \* Bugfix: "unknown image type" errors on non-GD-supported remote image sources (thanks chrisØgorillachicago\*com) \* Bugfix: remote images not found if server returned 302 message with text other than "Found" (thanks cveleØdefault\*co\*yu, kevinØkevinevans\*net) \* Bugfix: resetObject() was clobbering debug messages (thanks kevinØkevinevans\*net) \* Bugfix: CleanUpURLencoding() was broken (thanks kevinØkevinevans\*net) \* Bugfix: Cache auto-purging was generally broken, especially if the cache contained a directory or filename of "0" (thanks hannoØxcalak\*info; webdesignØweisshart\*de)
v1.7.7 - December 25, 2006 ¤ Added phpThumb.demo.gallery.php -- basic image gallery demo ¤ Added option for image watermark for anti-hotlinking. See phpThumb.config.php "nooffsitelink\_watermark\_src" (thanks rik\_helsenØrad\*be) ¤ Added config option "imagemagick\_use\_thumbnail" to control use of ImageMagick's "-thumbnail" command vs "-resize" (the former discards non-visible metadata, the latter retains it) Most times you want the smallest filesize so keep the default setting (imagemagick\_use\_thumbnail==true) (thanks niklasØmysticalgarden\*se) \* Bugfix [#1620056]: EnsureDirectoryExists() failed to create some directory structures (thanks jeromyØlocallinux\*com) \* Bugfix [#1620056]: CleanUpCacheDirectory() would not purge files from subdirectories if (cache\_directory\_depth > 0) (thanks kingsquareØusers\*sourceforge\*net) \* Bugfix: nooffsitelink\_\* broken when running on non-standard HTTP port (thanks marianbucur17Øyahoo\*com)
v1.7.6 - December 09, 2006 ¤ Added "sia" (Save Image As) parameter to provide default filename when saving generated thumbnails (thanks web\_mkØhotmail\*com) ¤ Changed "lvl" filter parameters, and added option to choose between four different methods (two internal, two from ImageMagick). Added configurable threshold parameter. (thanks publicØwoktiny\*com for code for new internal method) ¤ "wb" (White Balance) filter now processed by ImageMagick \* Changed GD max source pixels to 1/6 (from 1/5) available memory, and changed SourceImageIsTooLarge() to account for already-used memory (if known) \* More graceful error handling in object mode when source larger than PHP memory limit and ImageMagick unavailable (thanks djasonØdjason\*com) \* Added ImageMagickFormatsList() \* CleanUpCacheDirectory() now also purges zero-byte orphan files left over from aborted thumbnailings \* Bugfix [#1606069]: Changed default urlencoded space character from "+" to "%20" \* Bugfix [#1608664]: "Unsupported operand types" in "wmi" filter (thanks haydurØhaydur\*com; squidliberty) \* Bugfix: debug mode now supports text output in all modes \* Bugfix: ImageMagick creation attempted before GD creation \* Bugfix: no longer fails silently if GD creation runs out of memory \* Bugfix: poor alpha rendering from PNG to GIF with ImageMagick \* Bugfix: "wb" filter had no effect when "lvl" filter applied in ImageMagick instead of GD
v1.7.5 - October 03, 2006 ¤ Deprecated parameters "err", "file", "goto" ¤ Added broad cache directory feature (see phpThumb.config.php "cache\_directory\_depth") to spread cache files across many directories for improved performance and ability to store very large numbers (30000+) of cached files (thanks despoixØopenxtrem\*com) ¤ phpThumb now follows HTTP redirects (status=302) to new HTTP image URLs (configurable: config\_http\_follow\_redirect) (thanks shannahØsfu\*ca) ¤ Added "rot" (ROTate) filter which is similar to "ra" parameter but now allows rotation of output of other filters (for example, rotate image after fltr[]=mask is applied) (thanks markØwoodjoint\*ca) ¤ Added WBMP output support (built-in GD or via ImageMagick) (code was already mostly present, just was not allowed format) ¤ [#1567113] "wmi" filter now accepts both x and y margins and can be in pixels or percent of thumbnail dimensions (thanks squidlibertyØusers\*sourceforge\*net) \* "hist" filter now accepts both X and Y margins \* Added config variables: config\_http\_fopen\_timeout = 10; config\_http\_follow\_redirect = true \* Changed MIME type for WBMP to image/vnd.wap.wbmp \* Bugfix: Check for GD format support before attempting output \* Bugfix: Opening HTTP source images with URL query parameters was broken (eg: http://host/show?id=123) (thanks ivo\*beckersØinfopractica\*nl)
v1.7.4 - August 17, 2006 ¤ Improved version of /demo/phpThumb.demo.showpic.php uses phpThumb.php so any filters can be applied, as well as resized image popups. New file: /demo/javascript\_api.js Uses Javascript API by James Austin <jamesdozØhotmail\*com> (http://aspandjavascript.co.uk/javascript/javascript\_api/) ¤ Added "sfn" (Source Frame Number) parameter to specify source frame in multi-frame/multi-page source formats, such as GIF, TIFF, PDF, etc (thanks despoixØopenxtrem\*com) ¤ Added "dpi" (Dots Per Inch) parameter to specify rasterising resolution for vector source formats (PDF, WMF) (requires ImageMagick) (thanks despoixØopenxtrem\*com) \* Added /demo/phpThumb.demo.object.simple.php \* Added debug points inside GenerateThumbnail \* Explicit error message for unsupported PDF source images \* Bugfix: SafeURLread broken with GETstring parameters in fsockopen mode \* Bugfix: [#1540523] CleanUpCacheDirectory() does not delete files as expected (thanks patricksleeØusers\*sourceforge\*net) \* Bugfix: added useful error message when no source specified in object mode (thanks infoØdoepud\*co\*uk) \* Bugfix: timeout value ignored in URLreadFsock() \* Bugfix: timeout missing in SafeURLread CURL part \* Bugfix: ImageMagick now checked with --version (not -version) \* Bugfix: better ImageMagick (numeric) version number matching \* Bugfix: noGD errors showing up when GD imagecreate functions fail and ImageMagick not available (thanks caseyyØgmail\*com) \* Bugfix: "-thumbnail" parameter not present in older versions of ImageMagick, now using -resize if -thumbnail unavailable (thanks atombomb96Øbtopenworld\*com) \* Bugfix: "-resize" parameter requires explicit dimensions ("100x100" instead of "100x") in older ImageMagick versions (thanks atombomb96Øbtopenworld\*com) \* Bugfix: phpThumb crashed with no output if ImageMagick failed to resize but output image larger than max\_source\_pixels (thanks atombomb96Øbtopenworld\*com) \* Bugfix: phpThumb might die with no output on some large source images when ImageMagick unavailable. (thanks atombomb96Øbtopenworld\*com)
v1.7.3 - July 11, 2006 \* Now returns useful message for HTTP sources if 404-file- not-found (or similar) errors occur \* Added new fsockopen() section in SafeURLread() \* Removed PNG alpha warning for IE 7 (alpha PNGs now work) \* Bugfix: ImageMagick failing version check and dumping text output (thanks infoØdevsystem\*net) \* Bugfix: curl\_exec failing with text output (thanks infoØdevsystem\*net) \* Bugfix: workaround for PHP Bug #36102 (fopen(http) crash in PHP v4.4.2 \* Bugfix: "Unknown image type identified by..." problem when opening http:// source images (thanks webmasterØdanceage\*com)
v1.7.2 - June 22, 2006 ¤ [#1256693] Added $this->exif\_raw\_data which is returned data from exif\_read\_data() on source image. Requires PHP v4.2.0+ (thanks tebiØusers\*sourceforge\*net) ¤ Added $this->outputImageData and RenderOutput() to allow easy outputting of thumbnail data to a database or such. Call RenderOutput() instead of RenderToFile() and then access raw data in $this->outputImageData (thanks r\*cremerØswitch\*nl) ¤ Added 'crop' filter, which is applied after resizing (as opposed to sx,sy,sw,sh which are before resizing) (thanks scottØscottjehl\*com) \* Enable creating new images with PATH\_INFO style call (thanks edenØinstyleit\*com\*au) \* Added warning message to encourage users not to use full HTTP paths for "src" parameter \* Added fallback 'preg\_quote' to phpthumb.functions.php in case your PHP installation does not have preg\_\* functions (thanks mortenØemeskay\*dk) \* Added fallback 'imagesavealpha' if GD < v2.0.1 (thanks oliver\*heegerØweb\*de) \* Added fallback 'imagealphablending' if GD < v2.0.1 (thanks oliver\*heegerØweb\*de) \* Added 'nocache' parameter that suppresses writing to cache file, but only if high\_security\_enabled is set (thanks federicoØdonelleschi\*com) \* Attempt to detect supported ImageMagick features (thanks simonØjapancentre\*com) \* Added temp dir detection to phpThumb.demo.check.php \* Added ImageMagick dir to phpThumb.demo.check.php \* Added ImageMagick features to phpThumb.demo.check.php \* Default (config\_allow\_src\_above\_docroot = true) when PHP running in "cli" mode (thanks flobeeØgmail\*com) \* Bugfix: [#1470791] 'iar' not working properly with ImageMagick (thanks w1xØusers\*sourceforge\*net) \* Bugfix: [#1498564] illegal characters in cache filenames (thanks carl-evertØusers\*sourceforge\*net) \* Bugfix: 'sx','sy','sw','sh','zc' cache parameters broken (thanks federicoØdonelleschi\*com) \* Bugfix: 'config\_max\_source\_pixels' incorrectly handled (thanks oliver\*heegerØweb\*de) \* Bugfix: 'aoe' not working properly (thanks w1xØusers\*sourceforge\*net) \* Bugfix: setParameter() was broken for arrays \* Bugfix: setSourceFilename() wasn't setting 'src' \* Bugfix: suppress stat()-related file permission notices (thanks lanceØmainecoastdesign\*com) \* Bugfix: image format now initialized during ErrorImage() \* Bugfix: domain matching now case-insensitive \* Bugfix: some versions of ImageMagick not detected (thanks arvidØfys\*ku\*dk) \* Bugfix: sometimes no image returned in safe\_mode (thanks bkainersØgmail\*com) \* Bugfix: 'far' not always handled correctly (thanks matthew\*newtonØrealworldweb\*com) \* Bugfix: PATH\_INFO method not working if no filters specified (thanks jjimenezØpracticaldata\*com) \* Bugfix: first (internal) call to ImageMagickVersion() failed under Windows \* Bugfix: Images source-cropped AND resized with ImageMagick were wrong size (cropped size, not resized size) (thanks joao\*saleiroØwebfuel\*pt) \* Bugfix: stat() warnings in CleanUpCacheDirectory() (thanks christianØhss-haage\*de) \* Bugfix: $PHPTHUMB\_DEFAULTS not working when no other processing parameters specified (thanks tbittnersØcox\*net)
v1.7.1 - March 16, 2006 \* /demo/phpThumb.demo.check.php now checks: - server software - local and master config values (with ini\_get and get\_cfg\_var respectively) (thanks nEUTRonØgmx\*tm) - existance of assorted PHP functions and explains their importance \* Bugfix: config\_error\_die\_on\_error now defaults to FALSE to prevent object-mode errors dying in an error image (thanks moshØtobt\*de; riteshgupta1974Øgmail\*com) \* Bugfix: setParameter() now handles array parameters (such as 'fltr') by appending $value to $parameter \* Bugfix: /demo/phpThumb.demo.check.php incorrect CURL value under PHP5 (thanks nEUTRonØgmx\*tm) \* Bugfix: [#1439110] Limit fread() calls to 8kB (see http://bugs.php.net/bug.php?id=35859) (thanks andig2Øusers\*sourceforge\*net) \* Bugfix: Prevent RenderToFilename() from trying to render to URLs (thanks Tim\*MasseyØitrm\*co\*uk) \* Bugfix: [#1438657] missing path in phpThumbURL() (thanks terracesØusers\*sourceforge\*net) \* Bugfix: zoomcrop was broken for non-square output (thanks alisonØsemidivine\*com, federicoØdonelleschi\*com) \* Bugfix: suppress error messages when stat access to temp dir is disabled (thanks rfineØvnuinc\*com) \* Bugfix: ImageMagick processing was broken for source images of types not supported by GetImageSize (thanks rfineØvnuinc\*com)
v1.7.0 - February 15, 2006 ¤ ImageMagick output is used directly far more frequently for much improved speed and minor quality improvement. ¤ ImageMagick now processes most of the image filters if possible (will fall back to GD methods if unavailable) ¤ GD support is now optional if ImageMagick is installed. Known limitations include: - no support for HTTP source images - ICO output is buggy (in some ImageMagick versions) - most &fltr[] filters don't work at all - 'ar', 'ra', 'far' don't work ¤ Added output support for ICO (icon) format (&f=ico). Currently only supports single-image icons, but multi- resolution support may be added in future versions New file: phpthumb.ico.php ¤ Added output support for BMP (bitmap) format (&f=bmp). Currently only supports 24-bit RGB format (for simplicity) ¤ Added new configuration & compatability checker New file: demo/phpThumb.demo.check.php \* ImageMagick-generated thumbnails now have extra hidden contents (EXIF data, etc) stripped (by using -thumbnail instead of -resize) resulting in smaller filesizes \* Added background fill color, opacity and extent options to 'wmt' filter (thanks craigØpc-fanatics\*com) \* Added metacharacter (^\*) support for 'wmt', currently: source filesize in bytes (^Fb), kB (^Fk), MB (^Fm), source image width (^X), source image height (^Y), thumbnail width (^x), thumbnail height (^y) and caret (^^) (Feature Request #1357815) (thanks ticklemeozmoØusers\*sourceforge\*net) \* Moved ImageDestroy call from OutputThumbnail to end of phpThumb.php to allow multiple calls to OutputThumbnail \* Added config\_http\_user\_agent for site with browsersniffers (thanks redrobØgmail\*com) \* Added $PHPTHUMB\_CONFIG['disable\_pathinfo\_parsing'] (default false) which disables parsing $\_SERVER[PATH\_INFO] for parameters. If you want to parse PATH\_INFO, set to false \* Added $PHPTHUMB\_CONFIG['disable\_imagecopyresampled'] (default false) which replaces ImageCopyResampled with ImageCopyResampleBicubic for buggy PHP-GD versions (thanks g\*pelagattiØnetface\*it) \* Added $PHPTHUMB\_CONFIG['cache\_prefix'] to allow sharing of cache files across virtual servers (Feature Request #1395332) (thanks doggyfrØusers\*sourceforge\*net) \* Added $PHPTHUMB\_CONFIG['disable\_onlycreateable\_passthru'] with default=true (increased speed) to allow direct passthru of images that don't have GD support. (Feature Request #1396446) (thanks zedboyØusers\*sourceforge\*net) \* Removed $PHPTHUMB\_CONFIG['cache\_differentiate\_offsite'] because it is now automatically tied in with nooffsitelink\_enabled (thanks doggysworldØlibertysurf\*fr) \* Removed phpThumb.demo.cacheconvert2.php \* Debug messages are now passed back from filters \* $PHPTHUMB\_CONFIG['cache\_source\_filemtime\_ignore\_remote'] now defaults to true for much-improved cached performance (thanks redrobØgmail\*com) \* $PHPTHUMB\_CONFIG['cache\_differentiate\_offsite'] now defaults to false \* Added $PHPTHUMB\_DEFAULTS['ar']='x' to phpThumb.config.php.default \* Added ImageDestroy($this->gdimg\_source) to GenerateThumbnail() to save memory before applying image filters \* gd\_info() no longer member of phpthumb\_functions \* cache files now default to using SERVER\_NAME without 'www.' \* phpUnsharpMask::applyUnsharpMask() should be faster under PHP5 by using ImageFilter(IMG\_FILTER\_GAUSSIAN\_BLUR) when radius==1 \* Added alternate CURL method for HTTP source images if allow\_url\_fopen is disabled (thanks webweberØmotiondraw\*com) \* Replaced $this->osslash with DIRECTORY\_SEPARATOR constant \* Bugfix: [#1398327] 'new' got broken (1x1 images) \* Bugfix: [#1412552] HTTP source images with special characters were not getting urlencoded \* Bugfix: ImageSaveAlpha errors on GD v2.0.0 \* Bugfix: phpThumbDebug now entirely disabled if high\_security=true \* Bugfix: source images with transparency lost transparency when rotated (thanks roalklØyahoo\*com) \* Bugfix: square source images were not resized when only (w|h)(p|l) parameters passed \* Bugfix: source images are passed through unmodified in more cases \* Bugfix: ImageMagick not used on systems where it exists outside defined open\_basedir \* Bugfix: ImageMagickVersion() now returns correct versionstring \* Bugfix: ImageMagick warnings no longer cause ImageMagick to fail \* Bugfix: ErrorImage no longer fatal to phpThumbDebug \* Bugfix: "Array to string conversion" in foreach($a as $v) loops (thanks zeeshanØtargetedmedia\*co\*uk) \* Bugfix: safe mode warnings in ImageCreateFromStringReplacement (thanks adminØalex-home\*net) \* Bugfix: nooffsitelink broken if !nooffsitelink\_require\_refer (thanks depronØgmx\*net) \* Bugfix: phpThumb failed when magic\_quotes\_runtime=true (thanks stansawyerØyahoo\*com) \* Bugfix: several issues with HTTP image sources (thanks redrobØgmail\*com) \* Bugfix: phpThumb\_tempnam() would return incomplete temp filenames under Windows, which may result in orphaned zero-byte temp files in C:\ if multiple drives exist
v1.6.2 - November 24, 2005 ¤ Animated GIF output is now possible if ImageMagick is available and no filters (other than resize) are applied (thanks brandenbassØgmail\*com for idea) \* Added $PHPTHUMB\_CONFIG['cache\_force\_passthru'] to work around cached-image-only-works-second-time issue (thanks yakoØ11y11\*com) \* Bugfix: black borders on some image edges (thanks atelierØdelirius\*ch && chuckØcatalyststudio\*com) \* Bugfix: uncaught PHP warning in RenderToFile DebugMessage \* Bugfix: allow phpThumbDebug in noGD PHP installations \* Bugfix: 'hash' warning in high\_security mode (thanks bernhardØwtf\*at) \* Bugfix: non-TTF rotated text watermarks now work (unrotated) with no warnings if ImageRotate is unavailable (thanks aparviaiØusers\*sourceforge\*net)
v1.6.1 - August 26, 2005 ¤ Filters now use GD functions where available (using ImageFilter, only available in PHP v5.0.0+ with bundled version of GD). Enabled for: colorize, negative, grayscale, brightness, contrast, gaussian blur, selective blur, mean removal (thanks donlaurØmac\*com) ¤ Added config\_prefer\_imagemagick (defaults=true) ¤ Added phpthumb\_filters::Grayscale() 'gray' ¤ Added phpthumb\_filters::ReduceColorDepth() 'rcd' ¤ Added phpthumb\_filters::Brightness() 'brit' ¤ Added phpthumb\_filters::Contrast() 'cont' ¤ Added phpthumb\_filters::Saturation() 'sat' ¤ Added phpthumb\_filters::EdgeDetect() 'edge' [PHP5 only] ¤ Added phpthumb\_filters::BlurGaussian() 'gblr' [PHP5 only] ¤ Added phpthumb\_filters::BlurSelective() 'gblr' [PHP5 only] ¤ Added phpthumb\_filters::MeanRemoval() 'mean' [PHP5 only] ¤ Added phpthumb\_filters::Smooth() 'smth' [PHP5 only] \* New timing debug info in phpThumbDebug \* Added config\_cache\_differentiate\_offsite \* config\_die\_on\_error now defaults to false \* ResolveSource works better \* cache filenames with 'fltr' parameters have changed \* Filters now skip processing if amount=0 or similar \* [#1263051] 'far' now accepts L,R,T,B,C as values giving alignment of left/right/top/bottom/center respectively. Old value of '1' defaults to centered (thanks webgrappaØusers\*sourceforge\*net) \* Bugfix: RenderToFile() now fails properly when output format is unknown \* Bugfix: PNG transparency wasn't working with 'far' \* Bugfix: source images with EXIF thumbnails that differ in aspect ratio no longer use EXIF thumbnails as source unless no other options exist \* Bugfix: setting 'src' with setParameter now invokes setSourceFilename to properly set $this->sourceFilename (thanks Gazou) \* Bugfix: 'zc' had poor quality when used with ImageMagick \* Bugfix: 'aoe' parameter broken when not using ImageMagick (thanks frankieali4Øhotmail\*com) \* Bugfix: fixed issue with symbolic links (thanks hornet136Øgmail\*com) \* Bugfix: config\_max\_source\_pixels now defaults to same calculation as used in phpThumb.config.php (thanks vukshaØhotmail\*com) \* Bugfix: Offsite cached thumbnails no longer use unique referer (now either nothing or "\_offsite") (thanks swaayeØyahoo\*com) \* Bugfix: "Unknown image type identified by “<?ph”" errors in some installations (thanks frankieali4Øhotmail\*com)
v1.6.0 - July 18, 2005 ¤ Included new file phpThumb.demo.random.php to select a random image from a specified folder, optionally only landscape and/or portrait and/or square images, and to display it to phpThumb.php (thanks mikeØgdaymate\*nl) ¤ Added /docs/phpthumb.faq.txt ¤ Added /demo/readme.demos.txt ¤ Added 'wp', 'hp', 'wl', 'hl', 'ws', 'hs' parameters for width and height of portrait, landscape and square images. This allows you to display any image aspect ratio at the size you want without knowing ahead of time whether the image is wide or tall. (thanks mikeØgdaymate\*nl) ¤ phpThumb.php can now also be called by passing parameters in $\_SERVER['PATH\_INFO']. Please see phpthumb.readme.txt (thanks javierØguegue\*net) ¤ MySQL data pulling configuration moved from phpThumb.php to phpThumb.config.php \* "file" and "goto" parameters are now disabled by default (configurable in phpThumb.config.php but not recommended) \* Cached files are now used from first instance, avoiding call to OutputThumbnail and preventing browser-side cache failure \* Added config\_allow\_src\_above\_docroot (default=false) to prevent browsing filesystem outside document\_root (thanks davidØint0x80\*com) \* Added config\_allow\_src\_above\_phpthumb (default=true) to prevent access to files except in subdirectories of phpThumb installation (thanks davidØint0x80\*com) \* Added setParameter() and getParameter() functions (thanks werner\*kraussØhallstatt\*net) \* SafeBackTick() renamed to SafeExec() and all execution functions are tried (exec, shell\_exec, system, passthru) are tried in case one or more are disabled (thanks bkainersØgmail\*com) \* config\_output\_allow\_enlarging has been removed from phpthumb.class.php, and 'output\_allow\_enlarging' has been removed from phpThumb.config.php \* New default detection method for $PHPTHUMB\_CONFIG['document\_root'] \* Bugfix: inconsitant handling of boolean parameters passed "0" (isset vs !empty()) (thanks manniØzapto\*de) \* Bugfix: text watermarks now support multiple lines (thanks hanno\*vandenbergØhccnet\*nl) \* Bugfix: suppress error message in ImageCreateFromStringReplacement() (thanks srimandadapuØyahoo\*com) \* Bugfix: 'aoe' was ignored in object mode (thanks tonyØnylink\*com) \* Bugfix: ResolveFilenameToAbsolute() failed on non- existant filenames (file to be written, for example) \* Bugfix: 'aoe' parameter was ignored in cache filename (thanks tonyØnylink\*com) \* Bugfix: non-TTF watermark text had inverted opacity scale. All 'wmt' is now 100=opaque, 0=transparent (thanks mailØmmjaeger\*com) \* Bugfix: cache file failed if document\_root had trailing slash. (thanks lovingloboØgmail\*com) \* Bugfix: [#1219422] Cache filename structure modified to avoid excessively long filenames (cache filenames are now limited to 142 characters + length of $\_SERVER['SERVER\_NAME']) (thanks trungieØusers\*sourceforge\*net) \* Bugfix: [#1211729] phpThumb.php fails to locate phpThumb.config.php if the two files are in the same directory but phpThumb.php is run through a sym link. (thanks allanbushØusers\*sourceforge\*net)
v1.5.4 - May 27, 2005 \* Security issue with passthrough addressed (thanks davidØint0x80\*com) \* 'wmt' now reads TTF fonts from the config font directory, or from anywhere if a path is specified in the font filename (thanks mailØmmjaeger\*com) \* Changed default error\_die\_on\_source\_failure to true in phpThumb.config.php \* Bugfix: Firefox (possibly other browsers) did not like the new (faster) cache retrieval method with Location header redirection if the cached filename does not have a recognized filename extension (.jpeg, .png, .gif). Cached images have therefore been renamed from \*\_jpeg to \*.jpeg and the \_qXX parameter has been removed for PNG and GIF output. Please use the included cache renamer: /demo/phpThumb.demo.cacheconvert2.php (thanks mailØmmjaeger\*com) \* Bugfix: Changed "Content-type" to "Content-Type" in all header calls \* Bugfix: 'wmt' text opacity was broken (thanks mstuhuØweb\*de) \* Bugfix: variable name typo in phpThumb.demo.object.php (thanks mbØmarko-bischof\*de) \* Bugfix: no GD support for source image format now reported as such for remote images (thanks andgu842Østudent\*liu\*se) \* Bugfix: very narrow images no longer produce Invalid Image Dimensions error (thanks mailØmmjaeger\*com)
v1.5.3 - May 4, 2005 ¤ Added new filters: - 'wb' (White Balance) [ex: &fltr[]=wb|<c>] where <c> is the target hex color to white balance on, this color is what "should be" white, or light gray. The filter attempts to maintain brightness so any gray color can theoretically be used. If <c> is omitted the filter guesses based on brightest pixels in each of RGB ¤ Cached files are used by a Location header instead of being passed through phpThumb.php using readfile (thanks newtnØthrillnerds\*com) \* Added 'cache\_source\_filemtime\_ignore\_local' and 'cache\_source\_filemtime\_ignore\_remote' configurations to ignore source modification and/or removal (thanks raynerapeØgmail\*com) \* Added 'md5s' parameter, which is the MD5 hash of the source image -- if this parameter is passed with the hash of the source image then the source image is not checked for existance or modification and the cached file is used (if available). If 'md5s' is passed an empty string then phpThumb.php dies and outputs the correct MD5 hash value. This parameter is the single- file equivalent of 'cache\_source\_filemtime\_ignore\_\*' configuration paramters (thanks raynerapeØgmail\*com) \* Added /demo/phpThumb.demo.object.php \* Unused parameter 'bgt' removed \* Added empty /cache/source/ directory to distribution \* Added /demo/ and /docs/ and /fonts/ directories \* Set default config\_use\_exif\_thumbnail\_for\_speed = false \* Bugfix: Wrapped output buffering around all include\_once calls to prevent headers getting sent accidentally \* Bugfix: md5\_file and imagecolorallocatealpha calls were undefined under PHP v4.1.x (thanks tomØemile\*com) \* Bugfix: default 'f' parameter ('jpeg') overrode config\_output\_format in object mode (thanks mailØmmjaeger\*com) \* Bugfix: suppressed error message for IIS shell\_exec errors (thanks tomØemile\*com) \* Bugfix: Added PHP version check for stream\_set\_timeout for HTTP sources (thanks raynerapeØgmail\*com) \* Bugfix: overlay margins of 0.5-1.0 cause invalid image dimensions error (thanks mailØmmjaeger\*com) \* Bugfix: underlay margins were not working (thanks mailØmmjaeger\*com) \* Bugfix: [#1187735] EXIF thumbnails were incorrectly output to the browser directly if requested thumbnail exactly matched EXIF dimensions (thanks rebootØusers\*sourceforge\*net)
v1.5.2 - April 20, 2005 ¤ phpThumb.config.php is renamed to phpThumb.config.php.default to prevent accidental overwriting. Please migrate your old settings to the new file, delete your old config and rename the default to phpThumb.config.php ¤ Added new filters: - 'blur' (Blur) [ex: &fltr[]=blur|<radius>] where (0 < <radius> < 25) (default = 1) (thanks thoensiØnetcom\*no for code) - 'hist' (Histogram) [ex: &fltr[]=hist|<b>|<c>|<w>|<h>|<a>|<o>|<m>] Where <b> is the color band(s) to display, from back to front (one or more of "rgba\*" for Red Green Blue Alpha and Grayscale respectively); <c> is a semicolon-seperated list of hex colors to use for each graph band (defaults to FF0000, 00FF00, 0000FF, 999999, FFFFFF respectively); <w> and <h> are the width and height of the overlaid histogram in pixels, or if <= 1 then percentage of source image width/height; <a> is the alignment (same as for "wmi" and "wmt"); <o> is opacity from 0 to 100; <m> is the edge (and inter-tile) margin in percent - 'over' (OVERlay/underlay image) overlays an image on the thumbnail, or overlays the thumbnail on another image (to create a picture frame for example) [ex: &fltr[]=over|<i>|<u>|<m>|<o>] where <i> is the image filename; <u> is "0" (default) for overlay the image on top of the thumbnail or "1" for overlay the thumbnail on top of the image; <m> is the margin - can be absolute pixels, or if < 1 is a percentage of the thumbnail size [must be < 0.5] (default is 0 for overlay and 10% for underlay); <o> is opacity (0 = transparent, 100 = opaque) (thanks raynerapeØgmail\*com, shabazz3Ømsu\*edu) - 'gray' (GRAYscale) [ex: &fltr[]=gray] is an alias to 100% desaturation \* New configuration 'cache\_source\_directory' allows the unprocessed source image to be cached when source is HTTP or from a database (thanks raynerapeØgmail\*com) \* Added 'cache' subdirectory to phpThumb distribution since this is the default location for the cache folder. \* Default value for config\_error\_die\_on\_source\_failure changed to true (thanks shabazz3Ømsu\*edu) \* Added checks to make sure $this->gdimg\_output is a resource before allowing calls to RenderToFile or OutputThumbnail \* Better error messages when phpThumb.config.php missing \* Bugfix: watermark overlay margins were wrong \* Bugfix: 'lvl' filter no longer processes if not needed \* Bugfix: off-server thumbnail error message was wrong \* Bugfix: several PHP safe mode fixes (thanks virginiaØalertbutnotalarmed\*com) \* Bugfix: cache filenames broken for filter parameters with paths (thanks srcericØusers.sourceforge.net)
v1.5.1 - April 06, 2005 \* Added some security upgrades: - 'config\_\*' parameters cannot be passed by GETstring - 'config\_nooffsitelink\_require\_refer' is a new option (disabled by default) that only allows calls to phpThumb() from a refering domain listed in 'config\_nooffsitelink\_valid\_domains' - disallowed paramters now generate an error image if present in the GETstring - 'high\_security\_enabled' if set to true enabled new mode of verification, and requires a small function to generate a hash for calls to phpThumb: echo '<img src="'.phpThumbURL('src=pic.jpg&w=50').'">'; This function is supplied at the bottom of phpThumb.config.php (thanks paulØstonie\*co\*uk) ¤ Added new parameter "new" (phpThumb.php only) which can create a new image without using "src" parameter. Set "&new=<b>|<o>" where <b> is the background hex color, <o> is (optional) opacity (0=transparent, 100=opaque). (thanks mailØmmjaeger\*com) ¤ Added new filters: - 'sep' (Sepia) [ex: &fltr[]=sep|<value>|<color>] where <value> is a number between 0 and 100 for the amount of colorization (default=50), and <color> is the hex color to colorize to (default=A28065). (thanks mailØmmjaeger\*com) - 'lvl' (Levels) [ex: &fltr[]=lvl|<channel>|<min>|<max> where <channel> can be one of 'r', 'g', 'b', 'a' (for Red, Green, Blue, Alpha respectively), or '\*' for all channels based on average grayscale value (default). <min> and <max> are the clip points for the levels (range = 0-255) and are set to clip 0.1% of each end by default. Use -1 for min and/or max to invoke auto- detect mode. Using default parameters (&fltr[]=lvl) is similar to Auto Contrast in Adobe Photoshop. \* Bugfix: Image MIME header was incorrect for cached images. \* Bugfix: Cache was broken for images pulled from a database in phpThumb.php (thanks dragutin\*cvetkovicØdragontech-ltd\*com) \* Bugfix: Hotlink/Offsite prevention was broken when image was already cached. \* Bugfix: ImageMagick path was incorrect in some cases (thanks joshgØtwcny\*rr\*com) \* Bugfix: ProportionalResize() in phpthumb.functions.php had a broken check for default values (thanks Bert\*ClaeysØarinso\*com) \* Bugfix: transparency now preserved for GIF & PNG input (thanks tristanØcyrax\*ch) \* Bugfix: transparency now supported for GIF output (thanks j\_ivanovØabv\*bg) \* Bugfix: alpha transparency could be lost in ApplyMask() (thanks analyzerxØgmail\*com) \* Bugfix: errors on 16/32-bit BMPs (thanks mattØhellstrominc\*com) \* Bugfix: Added datestamp to cached filenames for remote (HTTP) files, and better warning for caching (thanks a\*gambinoØabramo\*it) \* Faster BMP parsing (thanks sgeppertØmail\*utexas\*edu) \* Added 'error\_die\_on\_source\_failure' configuration to allow invalid source images to show an error rather than output unmodified source image. (thanks mindpixelØgmail\*com) \* Added $phpThumb->fatalerror which will contain the text of the fatal error if 'error\_die\_on\_error' is false. (thanks mindpixelØgmail\*com)
[View remainder of file in raw view](https://github.com/JamesHeinrich/phpThumb/raw/refs/heads/master/docs/phpthumb.changelog.txt)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


