=== Content from wiki.mozilla.org_45914eeb_20250126_120523.html ===


# BMO/UserGuide/BugFields

From MozillaWiki
< [BMO](/BMO "BMO")‎ | [UserGuide](/BMO/UserGuide "BMO/UserGuide")

[Jump to navigation](#mw-head)
[Jump to search](#searchInput)
## Bugzilla Field Descriptions

Alias
A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.Assignee
This is the person in charge of resolving the bug. Every time this field changes, the status changes to NEW to make it easy to see which new bugs have appeared on a person's list.Blocks
This bug must be resolved before the bugs listed in this field can be resolved.Bug ID
The numeric id of a bug, unique within this entire installation of Bugzilla.CC
Users who may not have a direct role to play on this bug, but who are interested in its progress.Changed
When this bug was last updated.Classification
Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorization.Comment
Bugs have comments added to them by Bugzilla users. You can search for some text in those comments.Comment Tag
Comments can have arbitrary tags added to them to help with filtering as well as mark comments as spam or abusive.Component
Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.Creation date
When the bug was filed.Depends on
The bugs listed here must be resolved before this bug can be resolved.Duplicates
List of bugs that have been marked a duplicate of the bug currently being viewed.Keywords
Keywords are a controlled vocabulary for characterizing bugs across Products and Components. Examples of this field are `regression`, `sec-high`, and `topcrash`. Bugzilla administrators manage [the list of keywords](https://bugzilla.mozilla.org/describekeywords.cgi). If you believe you need a new keyword, [please contact the administrators to discuss](https://bugzilla.mozilla.org/enter_bug.cgi?product=bugzilla.mozilla.org&component=Administration).Mentors
Mentors are users who have offered to help the bug owner with such tasks as setting up a development environment, finding relevant information to fixing the bug, how to submit a patch for review, and finally how to get the fix committed.Needinfo
More information has been requested from specific individuals, or anyone, to move the bug forward to completion.OS
This is the operating system against which the bug was reported.Platform
This is the hardware platform against which the bug was reported (ARM, ARM64, x86, x86\_64, etc).Priority

| Priority | Description |
| --- | --- |
| **--** | No decision |
| **P1** | Fix in the current release cycle |
| **P2** | Fix in the next release cycle or the following (nightly + 1 or nightly + 2) |
| **P3** | Backlog |
| **P4** | Do not use. This priority is for the Web Platform Test bot. |
| **P5** | Will not fix, but will accept a patch |

This field describes the importance and order in which a bug should be fixed compared to other bugs. This field is utilized by the programmers/engineers/release managers/managers to prioritize the work to be done. See the Firefox [triage documentation](https://firefox-source-docs.mozilla.org/bug-mgmt/policies/triage-bugzilla.html) and [priority definitions](https://firefox-source-docs.mozilla.org/bug-mgmt/guides/priority.html), or for the main Bugzilla project, [Bugzilla:Priority\_System](/Bugzilla%3APriority_System "Bugzilla:Priority System").Product
Bugs are categorised into Products and Components. Select a Classification to narrow down this list.QA Contact
The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.Rank
Used by some groups to provide finer-grained ordering for working on bugs than afforded by the Priority field. Use of this field is restricted to the `rank-setters` group.Regressed by
This bug has been introduced by the bugs listed here.Regressions
This bug has introduced the bugs listed here.Reporter
The person who filed this bug.See Also
This allows you to refer to bugs in other bug tracker installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with a comma. You should normally use this field to refer to bugs in other bug tracker installations, or bugs which are related to, but not known to be duplicates of the bug. Bugs which are regressions should be listed in the Regressed by field (above)Severity
This field describes the impact of a bug. This field is utilized by the programmers/engineers/release managers/managers to determine the severity of issues and used as input for the priority of the bug. It should not be set by people filing bugs. See the Firefox [triage documentation](https://firefox-source-docs.mozilla.org/bug-mgmt/policies/triage-bugzilla.html) and [severity documentation](https://firefox-source-docs.mozilla.org/bug-mgmt/guides/severity.html).

| Severity | Description |
| --- | --- |
| **--** | Default value for new bugs; bug triagers for components (ie engineers and other core project folks) are expected to update the bug's severity from this value. To avoid them missing new bugs for triage, do not alter this default when filing bugs. |
| **S1** | (Catastrophic) Blocks development/testing, may impact more than 25% of users, causes data loss, likely dot release driver, and no workaround available |
| **S2** | (Serious) Major functionality/product severely impaired or a high impact issue and a satisfactory workaround does not exist |
| **S3** | (Normal) Blocks non-critical functionality or a work around exists |
| **S4** | (Small/Trivial) minor significance, cosmetic issues, low or no impact to users |
| **N/A** | (Not Applicable) The above definitions do not apply to this bug; this value is reserved for bugs of type Task or Enhancement |

Summary
The bug summary is a short sentence which succinctly describes what the bug is about.Target Milestone
For Firefox-related bugs, when a change set (patch) lands in Mozilla-Central, the [sheriffs](/Sheriffing "Sheriffing") will set this field to the corresponding release value for the current Nightly.
Release status and tracking flags are used to mark intentions for when a fix or other patch should land.
If you need to track a bug against a set of milestones other than upcoming versions of Firefox, please tell the Bugzilla team, you may want a custom status flag.Triage Owner
User that is responsible [for triaging bugs in a specific component](https://firefox-source-docs.mozilla.org/bug-mgmt/policies/triage-bugzilla.html).Type
This field describes the [type of a bug](https://firefox-source-docs.mozilla.org/bug-mgmt/guides/bug-types.html).

| Type | Description |
| --- | --- |
| **defect** | regression, crash, hang, security vulnerability and any other general issue. |
| **enhancement** | new feature, improvement in UI, performance, etc. and any other request for user-facing changes and enhancements in the product; not engineering changes |
| **task** | refactoring, removal, replacement, enabling or disabling of functionality and any other engineering task |

URL
Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.Version
The version field defines the version of the software the bug was found in.Votes
Some bugs can be voted for, and you can limit your search to bugs with more than a certain number of votes. Votes are not used by Mozilla developers to set priorities.Whiteboard
Each bug has a free-form single line text entry box for adding tags and status information

Retrieved from "<https://wiki.mozilla.org/index.php?title=BMO/UserGuide/BugFields&oldid=1250790>"

## Navigation menu

### Personal tools

* [Log in](/index.php?title=Special:UserLogin&returnto=BMO%2FUserGuide%2FBugFields "You are encouraged to log in; however, it is not mandatory [o]")
* [Request account](/Special%3ARequestAccount "You are encouraged to create an account and log in; however, it is not mandatory")

### Namespaces

* [Page](/BMO/UserGuide/BugFields "View the content page [c]")
* [Discussion](/index.php?title=Talk:BMO/UserGuide/BugFields&action=edit&redlink=1 "Discussion about the content page (page does not exist) [t]")

English

### Views

* [Read](/BMO/UserGuide/BugFields)
* [View source](/index.php?title=BMO/UserGuide/BugFields&action=edit "This page is protected.
  You can view its source [e]")
* [View history](/index.php?title=BMO/UserGuide/BugFields&action=history "Past revisions of this page [h]")

More

### Search

### Navigation

* [Main page](/Main_Page "Visit the main page [z]")
* [Product releases](/Releases)
* [New pages](/Special%3ANewPages)
* [Recent changes](/Special%3ARecentChanges "A list of recent changes in the wiki [r]")
* [Recent uploads](/Special%3ANewFiles)
* [Random page](/Special%3ARandom "Load a random page [x]")
* [Help](/MozillaWiki%3AHelp "The place to find out")

### How to Contribute

* [All-hands meeting](/WeeklyUpdates)
* [Other meetings](/Community_Calendar)
* [Contribute to Mozilla](/Contribute)
* [Community Portal](//community.mozilla.org)
* [Community Participation Guidelines](//www.mozilla.org/en-US/about/governance/policies/participation/)

### MozillaWiki

* [About](/MozillaWiki%3AAbout)
* [Team](/MozillaWiki%3ATeam)
* [Policies](/MozillaWiki%3APolicies)
* [Report a wiki bug](//bugzilla.mozilla.org/enter_bug.cgi?product=Websites&component=wiki.mozilla.org)

### Around Mozilla

* [Mozilla Support](//support.mozilla.org/)
* [Mozilla Developer Network](//developer.mozilla.org/)
* [Planet Mozilla](//planet.mozilla.org/)
* [Mozilla Blog](//blog.mozilla.org/)
* [Research](//www.mozilla.org/research/)

### Tools

* [What links here](/Special%3AWhatLinksHere/BMO/UserGuide/BugFields "A list of all wiki pages that link here [j]")
* [Related changes](/Special%3ARecentChangesLinked/BMO/UserGuide/BugFields "Recent changes in pages linked from this page [k]")
* [Special pages](/Special%3ASpecialPages "A list of all special pages [q]")
* Printable version
* [Permanent link](/index.php?title=BMO/UserGuide/BugFields&oldid=1250790 "Permanent link to this revision of this page")
* [Page information](/index.php?title=BMO/UserGuide/BugFields&action=info "More information about this page")

* This page was last edited on 14 May 2024, at 14:22.

* [Privacy policy](/MozillaWiki%3APrivacy_policy)
* [About MozillaWiki](/MozillaWiki%3AAbout)
* [Mobile view](https://wiki.mozilla.org/index.php?title=BMO/UserGuide/BugFields&mobileaction=toggle_view_mobile)

* [![Powered by MediaWiki](/resources/assets/poweredby_mediawiki_88x31.png)](https://www.mediawiki.org/)



=== Content from wiki.mozilla.org_ef8238f3_20250126_120523.html ===


# BMO/UserGuide/Whiteboard

From MozillaWiki
< [BMO](/BMO "BMO")‎ | [UserGuide](/BMO/UserGuide "BMO/UserGuide")

[Jump to navigation](#mw-head)
[Jump to search](#searchInput)

Each bug has a free-form single line text entry box for adding tags and status information. This wiki page is dedicated to collect a comprehensive list of whiteboard tags used in the Mozilla project.

## Contents

* [1 Whiteboard considered harmful](#Whiteboard_considered_harmful)
* [2 Contributor mentoring](#Contributor_mentoring)
* [3 Automated Testing](#Automated_Testing)
* [4 Autonag](#Autonag)
* [5 Release Engineering](#Release_Engineering)
* [6 Sheriffing](#Sheriffing)
* [7 Firefox](#Firefox)
* [8 Community reported bugs](#Community_reported_bugs)
* [9 Firefox OS](#Firefox_OS)
* [10 Tor](#Tor)
* [11 Web Compatibility](#Web_Compatibility)
* [12 Scrum Development](#Scrum_Development)
* [13 What does this whiteboard keyword mean?](#What_does_this_whiteboard_keyword_mean?)
## Whiteboard considered harmful

It is recommended that you request alternative metadata instead of using whiteboard tagging.

* Updating whiteboards tags through the API is non-trivial
* There is no global auto-suggest for whiteboard tags
* There is no verification of whiteboard tags; typos will not be caught and prevented
* Renaming a whiteboard tag requires writing a script to update every bug with that tag, changing its last modified timestamp and generating bugmail; other solutions involve a simple change by administrators
* Whiteboard tags cannot be disabled; people might continue to provide them after they are no longer relevant thinking they still apply
* If desired it's possible to restrict who can set flags to particular values; it will never be possible to prevent accidental or other changes to the whiteboard from any user with editbugs or the bug's reporter

Consider using a keyword, a flag, or a status flag. You can request this on [Bugzilla](https://bugzilla.mozilla.org/enter_bug.cgi?product=bugzilla.mozilla.org&component=Administration).

## Contributor mentoring

For more information, see [Mentors](/Mentors "Mentors").

* `[lang=]`: The programming language involved for this bug.
* `[mentor-lang=]`: (human/natural) language other than English the mentor will be able to communicate to the contributor with.

## Automated Testing

* `[test disabled]`: Indicates an automated test has been disabled. Typically used in bugs filed for intermittent test failures, to indicate that the absence of new failures in the bug is due to the test being disabled - as well as remind module owners that the test needs fixing and re-enabling.

## Autonag

`[no-nag]`: Indicates that a bug should not be modified or commented in by our [Autonag](/Release_Management/autonag "Release Management/autonag") scripts.

## Release Engineering

* `[capacity]`: This bug will help increase (or free up) capacity for our automated build & test machines.

## Sheriffing

* `[leave open]`: This has [been deprecated](https://groups.google.com/forum/#!topic/mozilla.dev.platform/Ie9OXcWbTSs) in favour of the 'leave-open' keyword. Used to ensure that the bug updating tool mcMerge does not close the bug when commits referencing it are merged into mozilla-central.
* `[retriggered]`: Used by sheriffs when investigating Fresh Oranges [[1]](https://charts.mozilla.org/FreshOranges/index.html) to find where a failure started from, using backfills and retriggers

## Firefox

* `dupeme`, `dupme`, or `DUPEME`: we're pretty sure this bug report is a duplicate of another bug, but cannot recall which one or cannot find it.
* `[qa-]`: QE (Quality Engineering) verification not required - superseded by the qe-verify flag.
* `[adv-mainNN+]` (where `NN` is some number): a security advisory about this bug for the release `NN` will be (has been) written.
* `[MemShrink]`: [a project](/Performance/MemShrink "Performance/MemShrink") to reduce memory consumption.

## Community reported bugs

* `[nightly-community]`: This bug was reported by a member of the Firefox Nightly community. Used to triage community-reported bugs and measure the impact of our core community on product quality.
* `[mozfr-community]`: This bug was reported by a member of the MozFR French-speaking community. Used to evaluate the impact of the mozfr.org community on product quality.

## Firefox OS

[Template:Note: This project is no longer active, but we leave these definitions for bug tracker historian purposes](/index.php?title=Template:Note:_This_project_is_no_longer_active,_but_we_leave_these_definitions_for_bug_tracker_historian_purposes&action=edit&redlink=1 "Template:Note: This project is no longer active, but we leave these definitions for bug tracker historian purposes (page does not exist)")

* `[POVB]`: Part of vendor build; the fix of this bug is not in the Mozilla codebase, but it's in our interest to track it.
* `[priority]`: Indicates we are asked by a partner to address this issue with priority.
* `[tarako_only]`: Special pref or feature that only lands on branch for Tarako (low memory phone), i.e. 1.3T branch of Gaia and Gecko. To be picked up on future releases.
* `[p=]/[u=]/[c=]/[s=]`: See [Scrum Development](/BMO/Whiteboard#Scrum_Development "BMO/Whiteboard"). Firefox OS uses the u= tag as the milestone instead, see [Firefox OS Performance Triage](/FirefoxOS/Performance/Triage#Scrumbugs_Tags "FirefoxOS/Performance/Triage")
* `[ft:<name of the team>]`, `[systemsfe]`, etc: Bugs identified to be owned by a "functional team" within B2G engineering. Each team owns a specific set of Bugzilla components, and tags are used to denote owned bugs outside of these components.

## Tor

* `[tor ###]` Part of the [Tor uplift project](/Security/Tor_Uplift/Tracking "Security/Tor Uplift/Tracking"). For example, `[tor 16620]` indicates a corresponding ticket at <https://trac.torproject.org/16620>. See also <https://torpat.ch/uplift>

## Web Compatibility

[Our whiteboard keywords](/Compatibility/BugsGuide "Compatibility/BugsGuide") are already described.

## Scrum Development

The following flags are used by tools like [scrumbu.gs](https://scrumbu.gs/help/) for managing sprints using the scrum development framework:

* `[p=]`: A rough estimate from engineer on how long the bug is going to take.
* `[u=]`: The user (in the scrum sense) that this story affects
* `[c=]`: The component (in the scrum sense) that this story affects
* `[s=]`: An explicit sprint slug this bug should belong to.

If you are not managing a product, you probably don't have to set these.

## What does this whiteboard keyword mean?

If you know what one of the following whiteboard keywords means, please describe it and put it into one of the above categories above (or create a new one):

* `[2.0-FL-bug-bash]` (example: <https://bugzilla.mozilla.org/show_bug.cgi?id=1021384>)
* `[games]` (example: <https://bugzilla.mozilla.org/show_bug.cgi?id=1017892>)
* `[reserve-photon-structure]` ([examples](https://bugzilla.mozilla.org/buglist.cgi?list_id=14108939&status_whiteboard_type=substring&status_whiteboard=%5Breserve-photon-structure%5D&order=Bug%20Number&query_format=advanced))
* `[TCP]` (example: <https://bugzilla.mozilla.org/show_bug.cgi?id=920036>)
  + my guess: Tablet Contribution Program?

Retrieved from "<https://wiki.mozilla.org/index.php?title=BMO/UserGuide/Whiteboard&oldid=1245932>"

## Navigation menu

### Personal tools

* [Log in](/index.php?title=Special:UserLogin&returnto=BMO%2FUserGuide%2FWhiteboard "You are encouraged to log in; however, it is not mandatory [o]")
* [Request account](/Special%3ARequestAccount "You are encouraged to create an account and log in; however, it is not mandatory")

### Namespaces

* [Page](/BMO/UserGuide/Whiteboard "View the content page [c]")
* [Discussion](/index.php?title=Talk:BMO/UserGuide/Whiteboard&action=edit&redlink=1 "Discussion about the content page (page does not exist) [t]")

English

### Views

* [Read](/BMO/UserGuide/Whiteboard)
* [View source](/index.php?title=BMO/UserGuide/Whiteboard&action=edit "This page is protected.
  You can view its source [e]")
* [View history](/index.php?title=BMO/UserGuide/Whiteboard&action=history "Past revisions of this page [h]")

More

### Search

### Navigation

* [Main page](/Main_Page "Visit the main page [z]")
* [Product releases](/Releases)
* [New pages](/Special%3ANewPages)
* [Recent changes](/Special%3ARecentChanges "A list of recent changes in the wiki [r]")
* [Recent uploads](/Special%3ANewFiles)
* [Random page](/Special%3ARandom "Load a random page [x]")
* [Help](/MozillaWiki%3AHelp "The place to find out")

### How to Contribute

* [All-hands meeting](/WeeklyUpdates)
* [Other meetings](/Community_Calendar)
* [Contribute to Mozilla](/Contribute)
* [Community Portal](//community.mozilla.org)
* [Community Participation Guidelines](//www.mozilla.org/en-US/about/governance/policies/participation/)

### MozillaWiki

* [About](/MozillaWiki%3AAbout)
* [Team](/MozillaWiki%3ATeam)
* [Policies](/MozillaWiki%3APolicies)
* [Report a wiki bug](//bugzilla.mozilla.org/enter_bug.cgi?product=Websites&component=wiki.mozilla.org)

### Around Mozilla

* [Mozilla Support](//support.mozilla.org/)
* [Mozilla Developer Network](//developer.mozilla.org/)
* [Planet Mozilla](//planet.mozilla.org/)
* [Mozilla Blog](//blog.mozilla.org/)
* [Research](//www.mozilla.org/research/)

### Tools

* [What links here](/Special%3AWhatLinksHere/BMO/UserGuide/Whiteboard "A list of all wiki pages that link here [j]")
* [Related changes](/Special%3ARecentChangesLinked/BMO/UserGuide/Whiteboard "Recent changes in pages linked from this page [k]")
* [Special pages](/Special%3ASpecialPages "A list of all special pages [q]")
* Printable version
* [Permanent link](/index.php?title=BMO/UserGuide/Whiteboard&oldid=1245932 "Permanent link to this revision of this page")
* [Page information](/index.php?title=BMO/UserGuide/Whiteboard&action=info "More information about this page")

* This page was last edited on 27 March 2023, at 15:08.

* [Privacy policy](/MozillaWiki%3APrivacy_policy)
* [About MozillaWiki](/MozillaWiki%3AAbout)
* [Mobile view](https://wiki.mozilla.org/index.php?title=BMO/UserGuide/Whiteboard&mobileaction=toggle_view_mobile)

* [![Powered by MediaWiki](/resources/assets/poweredby_mediawiki_88x31.png)](https://www.mediawiki.org/)



=== Content from wiki.mozilla.org_73f8d6fa_20250126_120524.html ===


# BMO/UserGuide/BugFields

From MozillaWiki
< [BMO](/BMO "BMO")‎ | [UserGuide](/BMO/UserGuide "BMO/UserGuide")

[Jump to navigation](#mw-head)
[Jump to search](#searchInput)
## Bugzilla Field Descriptions

Alias
A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.Assignee
This is the person in charge of resolving the bug. Every time this field changes, the status changes to NEW to make it easy to see which new bugs have appeared on a person's list.Blocks
This bug must be resolved before the bugs listed in this field can be resolved.Bug ID
The numeric id of a bug, unique within this entire installation of Bugzilla.CC
Users who may not have a direct role to play on this bug, but who are interested in its progress.Changed
When this bug was last updated.Classification
Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorization.Comment
Bugs have comments added to them by Bugzilla users. You can search for some text in those comments.Comment Tag
Comments can have arbitrary tags added to them to help with filtering as well as mark comments as spam or abusive.Component
Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.Creation date
When the bug was filed.Depends on
The bugs listed here must be resolved before this bug can be resolved.Duplicates
List of bugs that have been marked a duplicate of the bug currently being viewed.Keywords
Keywords are a controlled vocabulary for characterizing bugs across Products and Components. Examples of this field are `regression`, `sec-high`, and `topcrash`. Bugzilla administrators manage [the list of keywords](https://bugzilla.mozilla.org/describekeywords.cgi). If you believe you need a new keyword, [please contact the administrators to discuss](https://bugzilla.mozilla.org/enter_bug.cgi?product=bugzilla.mozilla.org&component=Administration).Mentors
Mentors are users who have offered to help the bug owner with such tasks as setting up a development environment, finding relevant information to fixing the bug, how to submit a patch for review, and finally how to get the fix committed.Needinfo
More information has been requested from specific individuals, or anyone, to move the bug forward to completion.OS
This is the operating system against which the bug was reported.Platform
This is the hardware platform against which the bug was reported (ARM, ARM64, x86, x86\_64, etc).Priority

| Priority | Description |
| --- | --- |
| **--** | No decision |
| **P1** | Fix in the current release cycle |
| **P2** | Fix in the next release cycle or the following (nightly + 1 or nightly + 2) |
| **P3** | Backlog |
| **P4** | Do not use. This priority is for the Web Platform Test bot. |
| **P5** | Will not fix, but will accept a patch |

This field describes the importance and order in which a bug should be fixed compared to other bugs. This field is utilized by the programmers/engineers/release managers/managers to prioritize the work to be done. See the Firefox [triage documentation](https://firefox-source-docs.mozilla.org/bug-mgmt/policies/triage-bugzilla.html) and [priority definitions](https://firefox-source-docs.mozilla.org/bug-mgmt/guides/priority.html), or for the main Bugzilla project, [Bugzilla:Priority\_System](/Bugzilla%3APriority_System "Bugzilla:Priority System").Product
Bugs are categorised into Products and Components. Select a Classification to narrow down this list.QA Contact
The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.Rank
Used by some groups to provide finer-grained ordering for working on bugs than afforded by the Priority field. Use of this field is restricted to the `rank-setters` group.Regressed by
This bug has been introduced by the bugs listed here.Regressions
This bug has introduced the bugs listed here.Reporter
The person who filed this bug.See Also
This allows you to refer to bugs in other bug tracker installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with a comma. You should normally use this field to refer to bugs in other bug tracker installations, or bugs which are related to, but not known to be duplicates of the bug. Bugs which are regressions should be listed in the Regressed by field (above)Severity
This field describes the impact of a bug. This field is utilized by the programmers/engineers/release managers/managers to determine the severity of issues and used as input for the priority of the bug. It should not be set by people filing bugs. See the Firefox [triage documentation](https://firefox-source-docs.mozilla.org/bug-mgmt/policies/triage-bugzilla.html) and [severity documentation](https://firefox-source-docs.mozilla.org/bug-mgmt/guides/severity.html).

| Severity | Description |
| --- | --- |
| **--** | Default value for new bugs; bug triagers for components (ie engineers and other core project folks) are expected to update the bug's severity from this value. To avoid them missing new bugs for triage, do not alter this default when filing bugs. |
| **S1** | (Catastrophic) Blocks development/testing, may impact more than 25% of users, causes data loss, likely dot release driver, and no workaround available |
| **S2** | (Serious) Major functionality/product severely impaired or a high impact issue and a satisfactory workaround does not exist |
| **S3** | (Normal) Blocks non-critical functionality or a work around exists |
| **S4** | (Small/Trivial) minor significance, cosmetic issues, low or no impact to users |
| **N/A** | (Not Applicable) The above definitions do not apply to this bug; this value is reserved for bugs of type Task or Enhancement |

Summary
The bug summary is a short sentence which succinctly describes what the bug is about.Target Milestone
For Firefox-related bugs, when a change set (patch) lands in Mozilla-Central, the [sheriffs](/Sheriffing "Sheriffing") will set this field to the corresponding release value for the current Nightly.
Release status and tracking flags are used to mark intentions for when a fix or other patch should land.
If you need to track a bug against a set of milestones other than upcoming versions of Firefox, please tell the Bugzilla team, you may want a custom status flag.Triage Owner
User that is responsible [for triaging bugs in a specific component](https://firefox-source-docs.mozilla.org/bug-mgmt/policies/triage-bugzilla.html).Type
This field describes the [type of a bug](https://firefox-source-docs.mozilla.org/bug-mgmt/guides/bug-types.html).

| Type | Description |
| --- | --- |
| **defect** | regression, crash, hang, security vulnerability and any other general issue. |
| **enhancement** | new feature, improvement in UI, performance, etc. and any other request for user-facing changes and enhancements in the product; not engineering changes |
| **task** | refactoring, removal, replacement, enabling or disabling of functionality and any other engineering task |

URL
Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.Version
The version field defines the version of the software the bug was found in.Votes
Some bugs can be voted for, and you can limit your search to bugs with more than a certain number of votes. Votes are not used by Mozilla developers to set priorities.Whiteboard
Each bug has a free-form single line text entry box for adding tags and status information

Retrieved from "<https://wiki.mozilla.org/index.php?title=BMO/UserGuide/BugFields&oldid=1250790>"

## Navigation menu

### Personal tools

* [Log in](/index.php?title=Special:UserLogin&returnto=BMO%2FUserGuide%2FBugFields "You are encouraged to log in; however, it is not mandatory [o]")
* [Request account](/Special%3ARequestAccount "You are encouraged to create an account and log in; however, it is not mandatory")

### Namespaces

* [Page](/BMO/UserGuide/BugFields "View the content page [c]")
* [Discussion](/index.php?title=Talk:BMO/UserGuide/BugFields&action=edit&redlink=1 "Discussion about the content page (page does not exist) [t]")

English

### Views

* [Read](/BMO/UserGuide/BugFields)
* [View source](/index.php?title=BMO/UserGuide/BugFields&action=edit "This page is protected.
  You can view its source [e]")
* [View history](/index.php?title=BMO/UserGuide/BugFields&action=history "Past revisions of this page [h]")

More

### Search

### Navigation

* [Main page](/Main_Page "Visit the main page [z]")
* [Product releases](/Releases)
* [New pages](/Special%3ANewPages)
* [Recent changes](/Special%3ARecentChanges "A list of recent changes in the wiki [r]")
* [Recent uploads](/Special%3ANewFiles)
* [Random page](/Special%3ARandom "Load a random page [x]")
* [Help](/MozillaWiki%3AHelp "The place to find out")

### How to Contribute

* [All-hands meeting](/WeeklyUpdates)
* [Other meetings](/Community_Calendar)
* [Contribute to Mozilla](/Contribute)
* [Community Portal](//community.mozilla.org)
* [Community Participation Guidelines](//www.mozilla.org/en-US/about/governance/policies/participation/)

### MozillaWiki

* [About](/MozillaWiki%3AAbout)
* [Team](/MozillaWiki%3ATeam)
* [Policies](/MozillaWiki%3APolicies)
* [Report a wiki bug](//bugzilla.mozilla.org/enter_bug.cgi?product=Websites&component=wiki.mozilla.org)

### Around Mozilla

* [Mozilla Support](//support.mozilla.org/)
* [Mozilla Developer Network](//developer.mozilla.org/)
* [Planet Mozilla](//planet.mozilla.org/)
* [Mozilla Blog](//blog.mozilla.org/)
* [Research](//www.mozilla.org/research/)

### Tools

* [What links here](/Special%3AWhatLinksHere/BMO/UserGuide/BugFields "A list of all wiki pages that link here [j]")
* [Related changes](/Special%3ARecentChangesLinked/BMO/UserGuide/BugFields "Recent changes in pages linked from this page [k]")
* [Special pages](/Special%3ASpecialPages "A list of all special pages [q]")
* Printable version
* [Permanent link](/index.php?title=BMO/UserGuide/BugFields&oldid=1250790 "Permanent link to this revision of this page")
* [Page information](/index.php?title=BMO/UserGuide/BugFields&action=info "More information about this page")

* This page was last edited on 14 May 2024, at 14:22.

* [Privacy policy](/MozillaWiki%3APrivacy_policy)
* [About MozillaWiki](/MozillaWiki%3AAbout)
* [Mobile view](https://wiki.mozilla.org/index.php?title=BMO/UserGuide/BugFields&mobileaction=toggle_view_mobile)

* [![Powered by MediaWiki](/resources/assets/poweredby_mediawiki_88x31.png)](https://www.mediawiki.org/)



=== Content from bugzilla.mozilla.org_7e043c6f_20250125_212944.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/728639)
* [XML](/show_bug.cgi?ctype=xml&id=728639)

Closed
[Bug 728639](/show_bug.cgi?id=728639)
(CVE-2012-0465)

Opened 13 years ago
Closed 13 years ago

# [SECURITY] User lockout policy can be bypassed by altering the X-FORWARDED-FOR header

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

[SECURITY] User lockout policy can be bypassed by altering the X-FORWARDED-FOR header

## Categories

### (Bugzilla :: User Accounts, defect)

[Product:](/describecomponents.cgi?product=Bugzilla)

Bugzilla
▾

Bugzilla
The [Bugzilla](http://www.bugzilla.org) bug-tracking system.

**Note:** This is **not** the place to request configuration, permission, or account changes to this installation of Bugzilla (bugzilla.mozilla.org). File such changes under the appropriate component in the [**bugzilla.mozilla.org**](enter_bug.cgi?product=bugzilla.mozilla.org) product.
[See Open Bugs in This Product](/buglist.cgi?product=Bugzilla&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Bugzilla)
Watch This Product

[Component:](/describecomponents.cgi?product=Bugzilla&component=User%20Accounts#User%20Accounts)

User Accounts
▾

Bugzilla :: User Accounts
Anything about managing a user account from the user's perspective. `userprefs.cgi`, saved queries, creating accounts, changing passwords, logging in, etc.
[See Open Bugs in This Component](/buglist.cgi?product=Bugzilla&component=User%20Accounts&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Bugzilla&component=User%20Accounts&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Bugzilla&component=User%20Accounts)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

3.5.3

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

All

All

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

major

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

Bugzilla 3.6

## People

### (Reporter: soroush.dalili, Assigned: LpSolit)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](extensions/Gravatar/web/default.jpg)  [LpSolit](/user_profile?user_id=120380)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

![](https://secure.gravatar.com/avatar/9df24a05a7e63cf07e49d30ddfeee31a?d=mm&size=40)  [default-qa](/user_profile?user_id=5086)

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/70cff1c9d567c93425f66e1314f33406?d=mm&size=40)  [soroush.dalili](/user_profile?user_id=298796)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

---

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

11 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[741079](/show_bug.cgi?id=741079 "RESOLVED FIXED - Security advisory for Bugzilla 4.2.1, 4.0.6 and 3.6.9")

[729001](/show_bug.cgi?id=729001 "RESOLVED FIXED - reverse resolve the ip address in account lockout notifications")

Dependency [tree](/showdependencytree.cgi?id=728639&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=728639)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Keywords: reporter-external, Whiteboard: [infrasec:auth][ws:moderate])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

CVE-2012-0465

[Keywords:](/describekeywords.cgi)

[reporter-external](/buglist.cgi?keywords=reporter-external&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[infrasec:auth][ws:moderate]

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [LpSolit](/user_profile?user_id=120380) | [approval](#c28 "13 years ago") | + |
| --- | --- | --- |
| [LpSolit](/user_profile?user_id=120380) | approval | + |
| --- | --- | --- |
| [LpSolit](/user_profile?user_id=120380) | [approval4.2](#c28 "13 years ago") | + |
| --- | --- | --- |
| [LpSolit](/user_profile?user_id=120380) | approval4.2 | + |
| --- | --- | --- |
| [LpSolit](/user_profile?user_id=120380) | [blocking4.2.1](#c21 "13 years ago") | + |
| --- | --- | --- |
| [LpSolit](/user_profile?user_id=120380) | blocking4.2.1 | + |
| --- | --- | --- |
| [LpSolit](/user_profile?user_id=120380) | [approval4.0](#c28 "13 years ago") | + |
| --- | --- | --- |
| [LpSolit](/user_profile?user_id=120380) | approval4.0 | + |
| --- | --- | --- |
| [LpSolit](/user_profile?user_id=120380) | [blocking4.0.6](#c21 "13 years ago") | + |
| --- | --- | --- |
| [LpSolit](/user_profile?user_id=120380) | blocking4.0.6 | + |
| --- | --- | --- |
| [LpSolit](/user_profile?user_id=120380) | [approval3.6](#c28 "13 years ago") | + |
| --- | --- | --- |
| [LpSolit](/user_profile?user_id=120380) | approval3.6 | + |
| --- | --- | --- |
| [LpSolit](/user_profile?user_id=120380) | [blocking3.6.9](#c21 "13 years ago") | + |
| --- | --- | --- |
| [LpSolit](/user_profile?user_id=120380) | blocking3.6.9 | + |
| --- | --- | --- |
| [rforbes](/user_profile?user_id=411311) | [sec-bounty](#a54020371_411311 "11 years ago") | + |
| --- | --- | --- |
| [rforbes](/user_profile?user_id=411311) | sec-bounty | + |
| --- | --- | --- |
|  | approval5.0 | ? |
| --- | --- | --- |
|  | approval5.2 | ? |
|  | approval6.0 | ? |
|  | blocking5.0.4.1 | ? |
|  | blocking5.2 | ? |
|  | blocking6.0 | ? |
|  | approval4.4 | ? |
|  | blocking4.4.14 | ? |
|  | sec-bounty-hof |  |
|  | documentation | ? + - |
|  | testcase |  | | |
|  | relnote |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (3 files, 1 obsolete file)

| [patch, v1](/attachment.cgi?id=598653)  [13 years ago](#c4)  [Frédéric Buclin](/user_profile?user_id=120380)   1.89 KB, patch | glob : [review-](#c8 "13 years ago") | [Details](/attachment.cgi?id=598653&action=edit) | [Diff](/attachment.cgi?id=598653&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=728639&attachment=598653) |
| --- | --- | --- |
| [patch for 4.0, v2](/attachment.cgi?id=609352)  [13 years ago](#c19)  [Frédéric Buclin](/user_profile?user_id=120380)   6.86 KB, patch | glob : [review+](#c20 "13 years ago") | [Details](/attachment.cgi?id=609352&action=edit) | [Diff](/attachment.cgi?id=609352&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=728639&attachment=609352) |
| [patch for 3.6, v1](/attachment.cgi?id=614477)  [13 years ago](#c27)  [Frédéric Buclin](/user_profile?user_id=120380)   6.13 KB, patch | LpSolit : [review+](#c27 "13 years ago") | [Details](/attachment.cgi?id=614477&action=edit) | [Diff](/attachment.cgi?id=614477&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=728639&attachment=614477) |
| [patch for 4.2 + trunk, v2.1](/attachment.cgi?id=616179)  [13 years ago](#c29)  [Frédéric Buclin](/user_profile?user_id=120380)   6.85 KB, patch | LpSolit : [review+](#c29 "13 years ago") | [Details](/attachment.cgi?id=616179&action=edit) | [Diff](/attachment.cgi?id=616179&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=728639&attachment=616179) |

Show Obsolete

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Soroush Dalili](/user_profile?user_id=298796)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=728639#c0)• 13 years ago |
|  | |

User Agent: Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; .NET4.0C; .NET4.0E)
Steps to reproduce:
It is possible to bypass the user lockout policy by using the "X-FORWARDED-FOR" in the header of the request.
The problem is because of the "remote\_ip" function in "Bugzilla/Util.pm" which adds this header value to the user's IP address (there is also no validation on this field). However, this "X-FORWARDED-FOR" can be controlled by an attacker to brute force the other people username/password. The "remote\_ip" function also has been used in lockout modules ("Bugzilla/User.pm: account\_ip\_login\_failures()") which is the reason of having this issue.
Please let me know if it can be eligible for the bug bounty too.
Actual results:
It is possible to brute force a password without being locked by setting the "X-FORWARDED-FOR" value in the header of the authentication request to one of these:
1- A complete random IP or String
2- A string with the length of more than 26 characters. Ex.: "123456789012345678901234567"
Expected results:
It should prevent from brute force attack.
My recommendation is:
1- First we need to have a complete validation (characters, length, format) for $ENV{'HTTP\_X\_FORWARDED\_FOR'} in the "remote\_ip" function.
2- This value should not be used in the user's lockout process as it can be controlled by the user. Only the main IP address should be fine for this action ($ENV{'REMOTE\_ADDR'}) although it can be a proxy IP address.

|  | [Reed Loden [:reed]](/user_profile?user_id=159758) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=728639#a6867_159758)• 13 years ago |

Assignee: general → user-accountsComponent: Bugzilla-General → User Accounts

|  | [Reed Loden [:reed]](/user_profile?user_id=159758) |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=728639#c1)• 13 years ago |
|  | |

<https://github.com/jsocol/commonware/blob/master/commonware/request/middleware.py> has a fairly good Python-based way of doing validation.Status: UNCONFIRMED → NEWEver confirmed: true

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=728639#c2)• 13 years ago |
|  | |

remote\_ip() has been added in Bugzilla 3.5.3, see [bug 527586](/show_bug.cgi?id=527586 "RESOLVED FIXED - Use X-Forwarded-For instead of REMOTE_ADDR for trusted proxies"). Note that "X-FORWARDED-FOR" is only taken into account if the 'inbound\_proxies' parameter is set.
(In reply to Reed Loden [:reed] (very busy) from [comment #1](/show_bug.cgi?id=728639#c1 "RESOLVED FIXED - [SECURITY] User lockout policy can be bypassed by altering the X-FORWARDED-FOR header"))
> middleware.py has a fairly good Python-based way of doing validation.
But this validation won't help if the attacker is free to set the IP address he wants, right? He just has to pass a valid IP address to defeat this check. The equivalent of socket.inet\_aton(ip) in Python is Socket::getaddrinfo() in Perl, but it doesn't check that this is really the IP address the request is coming from.Target Milestone: --- → Bugzilla 3.6Version: 4.0.4 → 3.5.3

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=728639#c3)• 13 years ago |
|  | |

If I understand correctly how the X-Forwarded-For header is built, a trusted proxy will append the real remote IP address to the existing X-Forwarded-For header, and so this header could look like so (in the example below, there are 3 trusted proxies in the chain):
fake\_or\_real1, fake\_or\_real2, real\_remote\_ip, trusted\_proxy1, trusted\_proxy2
So the first addresses when starting from the left cannot be trusted, because they are easily faked by the client. The last addresses on the right are our trusted proxies and so we are confident about them. So if we take the last IP address not matching one of our trusted proxies (the one I named real\_remote\_ip), we get the real address of the remote machine, because this one has been inserted by the first trusted proxy in the chain, right? At this point, we don't care if this IP address is the one of the client machine itself or some intermediate proxy. In both cases is this the IP we want to block.

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=728639#c4)• 13 years ago |
|  | |

Attached patch

[patch, v1](attachment.cgi?id=598653&action=diff) (obsolete)
— [Details](attachment.cgi?id=598653&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=728639&attachment=598653)

Assignee: user-accounts → LpSolitStatus: NEW → ASSIGNED
[Attachment #598653](/attachment.cgi?id=598653&action=edit "patch, v1") -
Flags: review?(glob)
[Attachment #598653](/attachment.cgi?id=598653&action=edit "patch, v1") -
Flags: review?(dkl)

|  | [Soroush Dalili](/user_profile?user_id=298796)  Reporter |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=728639#c5)• 13 years ago |
|  | |

I still think we need to have validation before Splitting the X-Forwarded-For header by the comma "," character, because:
1- It can lead to denial of service if someone manage to send a lot of "," characters in X-Forwarded-For header in many requests (because of the for loop).
2- Is there any reason that you want to cover all the characters' sets in X-Forwarded-For header? As far as I know, it should only contain 0-9\,\ \. and its length should be limited to the number of possible proxies\*17; unless it can be set to anything by the trusted proxies (it is better to validate the format really - just be careful about the reDoS issues)
I should also say, as long as we do not have any CAPTCHA in here, this lockout policy can lead to a permanent DoS for the targeted users.

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=728639#c6)• 13 years ago |
|  | |

(In reply to Soroush Dalili from [comment #5](/show_bug.cgi?id=728639#c5 "RESOLVED FIXED - [SECURITY] User lockout policy can be bypassed by altering the X-FORWARDED-FOR header"))
> 1- It can lead to denial of service if someone manage to send a lot of ","
> characters in X-Forwarded-For header in many requests (because of the for
> loop).
As we start from the end of the list, we will stop at the first external IP and ignore everything else. Your DoS won't work here. There is nothing bad you can do here which you couldn't do elsewhere.
> 2- Is there any reason that you want to cover all the characters' sets in
> X-Forwarded-For header?
We trust what our trusted proxy returns. We will never look at what external proxies or machines sent to us, so that's fine.
> I should also say, as long as we do not have any CAPTCHA in here, this
> lockout policy can lead to a permanent DoS for the targeted users.
As we lock accounts on a per IP address basis, only your IP will be block.

|  | [Reed Loden [:reed]](/user_profile?user_id=159758) |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=728639#c7)• 13 years ago |
|  | |

(In reply to Frédéric Buclin from [comment #2](/show_bug.cgi?id=728639#c2 "RESOLVED FIXED - [SECURITY] User lockout policy can be bypassed by altering the X-FORWARDED-FOR header"))
> (In reply to Reed Loden [:reed] (very busy) from [comment #1](/show_bug.cgi?id=728639#c1 "RESOLVED FIXED - [SECURITY] User lockout policy can be bypassed by altering the X-FORWARDED-FOR header"))
> > middleware.py has a fairly good Python-based way of doing validation.
>
> But this validation won't help if the attacker is free to set the IP address
> he wants, right? He just has to pass a valid IP address to defeat this
> check. The equivalent of socket.inet\_aton(ip) in Python is
> Socket::getaddrinfo() in Perl, but it doesn't check that this is really the
> IP address the request is coming from.
By "validation", I meant the whole process including the X-Forwarded-For header, not just checking the IP.
However, on that note, we should be validating the IP using something like Data::Validation::IP::is\_ipv4() or Socket::getaddrinfo(). If anything in $ENV{'HTTP\_X\_FORWARDED\_FOR'} is invalid, we should revert to using $ENV{'REMOTE\_ADDR'}. Just because we trust our proxy servers doesn't mean we should trust them to always return correct data and do the right thing with validation. We should still validate ourselves ("Trust, but verify" policy).
Also, are we doing any type of validation on what goes into Bugzilla->params->{'inbound\_proxies'}? If not, we probably should. A typo could be pretty bad.

|  | [Reed Loden [:reed]](/user_profile?user_id=159758) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=728639#a48189_159758)• 13 years ago |

Severity: normal → majorSummary: User lockout policy can be bypassed by using X-FORWARDED-FOR header → [SECURITY] User lockout policy can be bypassed by using X-FORWARDED-FOR headerWhiteboard: [infrasec:auth][ws:moderate]

|  | [:glob ✱](/user_profile?user_id=13647) |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=728639#c8)• 13 years ago |
|  | |

Comment on [attachment 598653](/attachment.cgi?id=598653 "patch, v1") [[details]](/attachment.cgi?id=598653&action=edit "patch, v1") [[diff]](/attachment.cgi?id=598653&action=diff "patch, v1") [[review]](/page.cgi?id=splinter.html&ignore=&bug=728639&attachment=598653)
patch, v1
i agree with reed -- we should be validating the IPs in x-forwarded-for and inbound\_proxies.
putting a dependency on Data::Validation::IP is an overkill, we should inline the is\_ipv4 method from that module instead:
sub is\_ipv4 {
my $value = shift;
return unless defined($value);
my (@octets) = $value =~ /^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/;
return unless @octets == 4;
foreach my $part (@octets) {
return unless $part >= 0 && $part <= 255 && $part !~ /^0\d{1,2}$/;
}
return 1;
}
aside from the lack of validation, your patch is fine.
[Attachment #598653](/attachment.cgi?id=598653&action=edit "patch, v1") -
Flags: review?(glob) → review-

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=728639#c9)• 13 years ago |
|  | |

I disagree. This would break IPv6 IP addresses.

|  | [:glob ✱](/user_profile?user_id=13647) |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=728639#c10)• 13 years ago |
|  | |

(In reply to Frédéric Buclin from [comment #9](/show_bug.cgi?id=728639#c9 "RESOLVED FIXED - [SECURITY] User lockout policy can be bypassed by altering the X-FORWARDED-FOR header"))
> I disagree. This would break IPv6 IP addresses.
Data::Validation::IP has is\_ipv6() which we could inline too.

|  | [Reed Loden [:reed]](/user_profile?user_id=159758) |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=728639#c11)• 13 years ago |
|  | |

(In reply to Frédéric Buclin from [comment #9](/show_bug.cgi?id=728639#c9 "RESOLVED FIXED - [SECURITY] User lockout policy can be bypassed by altering the X-FORWARDED-FOR header"))
> I disagree. This would break IPv6 IP addresses.
This code already doesn't support IPv6 correctly (see the hardcoded "127.0.0.1"). However, it's just as simple to copy Data::Validation::IP::is\_ipv6() as well.

|  | [Dave Miller [:justdave]](/user_profile?user_id=10297) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=728639#c12)• 13 years ago |
|  | |

Did someone recently change the account lockout code to how the X-Forwarded-For path? This might be a b.m.o hack. I know until recently it was listing the proxy server because we were getting lockouts from bzAPI people listing the bzAPI server as the IP. The lockout notices I got for Soroush's attempts to test this listed the X-Forwarded-For path in the lockout notice (which is not good - should have only been listing the "real\_remote\_ip" as defined in [comment 3](/show_bug.cgi?id=728639#c3 "RESOLVED FIXED - [SECURITY] User lockout policy can be bypassed by altering the X-FORWARDED-FOR header").
FWIW, I almost locked out Soroush's account permanently (at least until he would get in contact with us to validate he was in control of his own account) based on these lockouts because a) it was obvious someone was trying to brute force his account, and b) he has filed several security bugs. But then I saw this bug and realized he was just testing this bug. :)

|  | [Dave Miller [:justdave]](/user_profile?user_id=10297) |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=728639#c13)• 13 years ago |
|  | |

OK, from discussion on IRC it looks like the (correct) code that was locally hacked on b.m.o in version 3.4 got incorrectly imported upstream in 3.6 ([bug 527586](/show_bug.cgi?id=527586 "RESOLVED FIXED - Use X-Forwarded-For instead of REMOTE_ADDR for trusted proxies")), and has been broken since. Not quite sure why we're only seeing this on b.m.o now when we've been on 4.0 for a while now.

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=728639#c14)• 13 years ago |
|  | |

(In reply to Reed Loden [:reed] (very busy) from [comment #11](/show_bug.cgi?id=728639#c11 "RESOLVED FIXED - [SECURITY] User lockout policy can be bypassed by altering the X-FORWARDED-FOR header"))
> (In reply to Frédéric Buclin from [comment #9](/show_bug.cgi?id=728639#c9 "RESOLVED FIXED - [SECURITY] User lockout policy can be bypassed by altering the X-FORWARDED-FOR header"))
> > I disagree. This would break IPv6 IP addresses.
>
> This code already doesn't support IPv6 correctly (see the hardcoded
> "127.0.0.1").
The hardcoded 127.0.0.1 is fine, as we only use it if we got no remote IP address at all. Else we would use the IPv6 one set into $ENV{'REMOTE\_ADDR'}.
(In reply to Dave Miller [:justdave] from [comment #13](/show_bug.cgi?id=728639#c13 "RESOLVED FIXED - [SECURITY] User lockout policy can be bypassed by altering the X-FORWARDED-FOR header"))
> Not quite sure why we're only seeing this on b.m.o now when we've been on 4.0 for a while now.
Probably because there aren't so many attackers around trying to brute force passwords in b.m.o.

|  | [Reed Loden [:reed]](/user_profile?user_id=159758) |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=728639#c15)• 13 years ago |
|  | |

(In reply to Frédéric Buclin from [comment #14](/show_bug.cgi?id=728639#c14 "RESOLVED FIXED - [SECURITY] User lockout policy can be bypassed by altering the X-FORWARDED-FOR header"))
> (In reply to Reed Loden [:reed] (very busy) from [comment #11](/show_bug.cgi?id=728639#c11 "RESOLVED FIXED - [SECURITY] User lockout policy can be bypassed by altering the X-FORWARDED-FOR header"))
> > (In reply to Frédéric Buclin from [comment #9](/show_bug.cgi?id=728639#c9 "RESOLVED FIXED - [SECURITY] User lockout policy can be bypassed by altering the X-FORWARDED-FOR header"))
> > > I disagree. This would break IPv6 IP addresses.
> >
> > This code already doesn't support IPv6 correctly (see the hardcoded
> > "127.0.0.1").
>
> The hardcoded 127.0.0.1 is fine, as we only use it if we got no remote IP
> address at all. Else we would use the IPv6 one set into $ENV{'REMOTE\_ADDR'}.
... which would still be invalid for an IPv6-only box, as it should be ::1 then. ;)
> (In reply to Dave Miller [:justdave] from [comment #13](/show_bug.cgi?id=728639#c13 "RESOLVED FIXED - [SECURITY] User lockout policy can be bypassed by altering the X-FORWARDED-FOR header"))
> > Not quite sure why we're only seeing this on b.m.o now when we've been on 4.0 for a while now.
>
> Probably because there aren't so many attackers around trying to brute force
> passwords in b.m.o.
Keep in mind that until fairly recently, admin notifications for account lockouts were broken ([bug 707594](/show_bug.cgi?id=707594 "RESOLVED FIXED - Account lockout notifications are not notifying the maintainer")).

|  | [:glob ✱](/user_profile?user_id=13647) |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=728639#c16)• 13 years ago |
|  | |

(In reply to Reed Loden [:reed] (very busy) from [comment #15](/show_bug.cgi?id=728639#c15 "RESOLVED FIXED - [SECURITY] User lockout policy can be bypassed by altering the X-FORWARDED-FOR header"))
> > The hardcoded 127.0.0.1 is fine, as we only use it if we got no remote IP
> > address at all. Else we would use the IPv6 one set into $ENV{'REMOTE\_ADDR'}.
>
> ... which would still be invalid for an IPv6-only box, as it should be ::1
> then. ;)
this should always work (however i don't have an ipv6-only box to test on):
> inet\_ntoa(inet\_aton("localhost"))

|  | [Dave Miller [:justdave]](/user_profile?user_id=10297) |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=728639#c17)• 13 years ago |
|  | |

(In reply to Byron Jones ‹:glob› from [comment #16](/show_bug.cgi?id=728639#c16 "RESOLVED FIXED - [SECURITY] User lockout policy can be bypassed by altering the X-FORWARDED-FOR header"))
> this should always work (however i don't have an ipv6-only box to test on):
>
> > inet\_ntoa(inet\_aton("localhost"))
Not necessarily. Most ipv6-capable boxes I've seen map ::1 to "localhost6" in the hosts file, and "localhost" still goes to 127.0.0.1.

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=728639#c18)• 13 years ago |
|  | |

(In reply to Dave Miller [:justdave] from [comment #17](/show_bug.cgi?id=728639#c17 "RESOLVED FIXED - [SECURITY] User lockout policy can be bypassed by altering the X-FORWARDED-FOR header"))
> Not necessarily. Most ipv6-capable boxes I've seen map ::1 to "localhost6"
> in the hosts file, and "localhost" still goes to 127.0.0.1.
We don't care about 127.0.0.1 vs ::1. In both cases, we didn't get the remote IP address and so we fall back to some default. We could fall back to "unknown" that this wouldn't change the story.

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=728639#a2726245_120380)• 13 years ago |

Blocks: [729001](/show_bug.cgi?id=729001 "RESOLVED FIXED - reverse resolve the ip address in account lockout notifications")

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=728639#c19)• 13 years ago |
|  | |

Attached patch

[patch for 4.0, v2](attachment.cgi?id=609352&action=diff)
— [Details](attachment.cgi?id=609352&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=728639&attachment=609352)

Now with validators. Note that I have no proxy to play with.
[Attachment #598653](/attachment.cgi?id=598653&action=edit "patch, v1") -
Attachment is obsolete: true
[Attachment #609352](/attachment.cgi?id=609352&action=edit "patch for 4.0, v2") -
Flags: review?(glob)
[Attachment #609352](/attachment.cgi?id=609352&action=edit "patch for 4.0, v2") -
Flags: review?(dkl)
[Attachment #598653](/attachment.cgi?id=598653&action=edit "patch, v1") -
Flags: review?(dkl)

|  | [:glob ✱](/user_profile?user_id=13647) |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=728639#c20)• 13 years ago |
|  | |

Comment on [attachment 609352](/attachment.cgi?id=609352 "patch for 4.0, v2") [[details]](/attachment.cgi?id=609352&action=edit "patch for 4.0, v2") [[diff]](/attachment.cgi?id=609352&action=diff "patch for 4.0, v2") [[review]](/page.cgi?id=splinter.html&ignore=&bug=728639&attachment=609352)
patch for 4.0, v2
r=glob
this looks good to me.
[Attachment #609352](/attachment.cgi?id=609352&action=edit "patch for 4.0, v2") -
Flags: review?(glob) → review+

|  | [:glob ✱](/user_profile?user_id=13647) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=728639#a3240015_13647)• 13 years ago |

Flags: approval?

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Comment 21](/show_bug.cgi?id=728639#c21)• 13 years ago |
|  | |

Thanks! Let's take it for the next releases.Flags: blocking4.2.1+Flags: blocking4.0.6+Flags: blocking3.6.9+Flags: approval4.2?Flags: approval4.0?

|  | [Soroush Dalili](/user_profile?user_id=298796)  Reporter |  |
| --- | --- | --- |
| [Comment 22](/show_bug.cgi?id=728639#c22)• 13 years ago |
|  | |

Thanks for the fix. Could you also please let me know if it can be eligible for the bug bounty?

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=728639#a3422389_120380)• 13 years ago |

[Attachment #609352](/attachment.cgi?id=609352&action=edit "patch for 4.0, v2") -
Flags: review?(dkl)

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=728639#a3577203_120380)• 13 years ago |

Blocks: [741079](/show_bug.cgi?id=741079 "RESOLVED FIXED - Security advisory for Bugzilla 4.2.1, 4.0.6 and 3.6.9")

|  | [Michael Coates [:mcoates] (acct no longer active)](/user_profile?user_id=376659) |  |
| --- | --- | --- |
| [Comment 23](/show_bug.cgi?id=728639#c23)• 13 years ago |
|  | |

(In reply to Soroush Dalili from [comment #22](/show_bug.cgi?id=728639#c22 "RESOLVED FIXED - [SECURITY] User lockout policy can be bypassed by altering the X-FORWARDED-FOR header"))
> Thanks for the fix. Could you also please let me know if it can be eligible
> for the bug bounty?
We'll review this during our next bounty review sessions and provide feedback.
Thanks.

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 26](/show_bug.cgi?id=728639#c26)• 13 years ago |
|  | |

(In reply to Soroush Dalili from [comment #22](/show_bug.cgi?id=728639#c22 "RESOLVED FIXED - [SECURITY] User lockout policy can be bypassed by altering the X-FORWARDED-FOR header"))
> Thanks for the fix. Could you also please let me know if it can be eligible
> for the bug bounty?
We've decided this is eligible for a bounty of $1000. You should be hearing from Chris (or one of us) soon.

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=728639#a4630242_1689)• 13 years ago |

Alias: CVE-2012-0465

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Comment 27](/show_bug.cgi?id=728639#c27)• 13 years ago |
|  | |

Attached patch

[patch for 3.6, v1](attachment.cgi?id=614477&action=diff)
— [Details](attachment.cgi?id=614477&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=728639&attachment=614477)

This is the same patch as for other branches. I simply had to fix bitrot in the EXPORT list of Bugzilla::Util. So it doesn't need another review.
[Attachment #614477](/attachment.cgi?id=614477&action=edit "patch for 3.6, v1") -
Flags: review+

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=728639#a4634761_120380)• 13 years ago |

Flags: approval3.6?

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Comment 28](/show_bug.cgi?id=728639#c28)• 13 years ago |
|  | |

It's release time.Flags: approval?Flags: approval4.2?Flags: approval4.2+Flags: approval4.0?Flags: approval4.0+Flags: approval3.6?Flags: approval3.6+Flags: approval+

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Comment 29](/show_bug.cgi?id=728639#c29)• 13 years ago |
|  | |

Attached patch

[patch for 4.2 + trunk, v2.1](attachment.cgi?id=616179&action=diff)
— [Details](attachment.cgi?id=616179&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=728639&attachment=616179)

Fix a slight bitrot in the EXPORT list of Bugzilla::Util due to another patch which has been checked in meanwhile. This patch is for 4.2 + trunk.
[Attachment #616179](/attachment.cgi?id=616179&action=edit "patch for 4.2 + trunk, v2.1") -
Flags: review+

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=728639#a5145759_120380)• 13 years ago |

[Attachment #609352](/attachment.cgi?id=609352&action=edit "patch for 4.0, v2") -
Attachment description: patch for 4.0 - 4.3, v2 → patch for 4.0, v2

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Comment 30](/show_bug.cgi?id=728639#c30)• 13 years ago |
|  | |

Committing to: bzr+ssh://lpsolit%40gmail.com@bzr.mozilla.org/bugzilla/trunk/
modified Bugzilla/Util.pm
modified Bugzilla/Config/Advanced.pm
modified Bugzilla/Config/Common.pm
Committed revision 8206.
Committing to: bzr+ssh://lpsolit%40gmail.com@bzr.mozilla.org/bugzilla/4.2/
modified Bugzilla/Util.pm
modified Bugzilla/Config/Advanced.pm
modified Bugzilla/Config/Common.pm
Committed revision 8080.
Committing to: bzr+ssh://lpsolit%40gmail.com@bzr.mozilla.org/bugzilla/4.0/
modified Bugzilla/Util.pm
modified Bugzilla/Config/Advanced.pm
modified Bugzilla/Config/Common.pm
Committed revision 7705.
Committing to: bzr+ssh://lpsolit%40gmail.com@bzr.mozilla.org/bugzilla/3.6/
modified Bugzilla/Util.pm
modified Bugzilla/Config/Advanced.pm
modified Bugzilla/Config/Common.pm
Committed revision 7285.Status: ASSIGNED → RESOLVEDClosed: 13 years agoResolution: --- → FIXEDSummary: [SECURITY] User lockout policy can be bypassed by using X-FORWARDED-FOR header → [SECURITY] User lockout policy can be bypassed by altering the X-FORWARDED-FOR header

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Comment 31](/show_bug.cgi?id=728639#c31)• 13 years ago |
|  | |

Security advisory sent.Group: bugzilla-security

|  | [Soroush Dalili](/user_profile?user_id=298796)  Reporter |  |
| --- | --- | --- |
| [Comment 32](/show_bug.cgi?id=728639#c32)• 13 years ago |
|  | |

Thank you very much for the fix and the advisory.

|  | [Raymond Forbes[:rforbes]](/user_profile?user_id=411311) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=728639#a54020371_411311)• 11 years ago |

Flags: sec-bounty+

|  | [David Lawrence [:dkl]](/user_profile?user_id=5898) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=728639#a387401394_5898)• 8 months ago |

Keywords: [reporter-external](/buglist.cgi?keywords=reporter-external&resolution=---)
You need to [log in](/show_bug.cgi?id=728639&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Frédéric Buclin](/user_profile?user_id=120380)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review


