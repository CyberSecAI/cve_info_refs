=== Content from bugzilla.mozilla.org_82e12000_20250125_001329.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/697224)
* [XML](/show_bug.cgi?ctype=xml&id=697224)

Closed
[Bug 697224](/show_bug.cgi?id=697224)

Opened 13 years ago
Closed 12 years ago

# User.get should return a list of all your saved searches

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

User.get should return a list of all your saved searches

## Categories

### (Bugzilla :: WebService, enhancement)

[Product:](/describecomponents.cgi?product=Bugzilla)

Bugzilla
▾

Bugzilla
The [Bugzilla](http://www.bugzilla.org) bug-tracking system.

**Note:** This is **not** the place to request configuration, permission, or account changes to this installation of Bugzilla (bugzilla.mozilla.org). File such changes under the appropriate component in the [**bugzilla.mozilla.org**](enter_bug.cgi?product=bugzilla.mozilla.org) product.
[See Open Bugs in This Product](/buglist.cgi?product=Bugzilla&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Bugzilla)
Watch This Product

[Component:](/describecomponents.cgi?product=Bugzilla&component=WebService#WebService)

WebService
▾

Bugzilla :: WebService
For issues and bugs in the WebService interface. xmlrpc.cgi, jsonrcpc.cgi, rest.cgi, and Bugzilla/WebService/\*.pm
[See Open Bugs in This Component](/buglist.cgi?product=Bugzilla&component=WebService&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Bugzilla&component=WebService&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Bugzilla&component=WebService)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

unspecified

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

All

All

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

enhancement

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

normal

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

Bugzilla 4.4

## People

### (Reporter: jlong, Assigned: koosha.khajeh)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/bfab2307e96ecb0e1b6c21bb064760e8?d=mm&size=40)  [koosha.khajeh](/user_profile?user_id=437465)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

![](https://secure.gravatar.com/avatar/9df24a05a7e63cf07e49d30ddfeee31a?d=mm&size=40)  [default-qa](/user_profile?user_id=5086)

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/6bb149ad2abfeb95fc367813910ba35e?d=mm&size=40)  [jlong](/user_profile?user_id=402289)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

---

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

3 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[903436](/show_bug.cgi?id=903436 "RESOLVED DUPLICATE - Implement the ability to return the buglist of a saved search using WebServices")

Dependency [tree](/showdependencytree.cgi?id=697224&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=697224)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

---

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [LpSolit](/user_profile?user_id=120380) | [approval](#a25746135_120380 "12 years ago") | + |
| --- | --- | --- |
| [LpSolit](/user_profile?user_id=120380) | approval | + |
| --- | --- | --- |
| [LpSolit](/user_profile?user_id=120380) | [testcase](#c26 "12 years ago") | + |
| --- | --- | --- |
| [LpSolit](/user_profile?user_id=120380) | testcase | + | | |
| --- | --- | --- | --- | --- |
|  | approval5.0 | ? |
| --- | --- | --- |
|  | approval5.2 | ? |
|  | approval6.0 | ? |
|  | blocking5.0.4.1 | ? |
|  | blocking5.2 | ? |
|  | blocking6.0 | ? |
|  | approval4.4 | ? |
|  | blocking4.4.14 | ? |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | documentation | ? + - |
|  | relnote |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (1 file, 3 obsolete files)

| [patch - v1](/attachment.cgi?id=639488)  [13 years ago](#c2)  [Koosha KM](/user_profile?user_id=437465)   1.38 KB, patch | dkl : [review-](#c3 "13 years ago") | [Details](/attachment.cgi?id=639488&action=edit) | [Diff](/attachment.cgi?id=639488&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=697224&attachment=639488) |
| --- | --- | --- |
| [patch - v1.1](/attachment.cgi?id=639719)  [13 years ago](#c6)  [Koosha KM](/user_profile?user_id=437465)   2.31 KB, patch | dkl : [review-](#c7 "13 years ago") | [Details](/attachment.cgi?id=639719&action=edit) | [Diff](/attachment.cgi?id=639719&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=697224&attachment=639719) |
| [patch - v1.2](/attachment.cgi?id=639989)  [13 years ago](#c9)  [Koosha KM](/user_profile?user_id=437465)   2.07 KB, patch | dkl : [review+](#c10 "13 years ago")  LpSolit : [review-](#c15 "12 years ago") | [Details](/attachment.cgi?id=639989&action=edit) | [Diff](/attachment.cgi?id=639989&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=697224&attachment=639989) |
| [patch - v1.3](/attachment.cgi?id=651362)  [12 years ago](#c16)  [Koosha KM](/user_profile?user_id=437465)   3.93 KB, patch | LpSolit : [review+](#c22 "12 years ago") | [Details](/attachment.cgi?id=651362&action=edit) | [Diff](/attachment.cgi?id=651362&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=697224&attachment=651362) |

Show Obsolete

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [James Long (:jlongster)](/user_profile?user_id=402289)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=697224#c0)• 13 years ago |
|  | |

It'd be really nice if we had access to a user's saved searches. This way we could allow users to create searches in bugzilla but have a client which can use them.
Two additional methods would be needed. One to get a list of saved searches, and another one to execute a saved search.
This would be exposed via the WebService using XMLRPC or JSONRPC.

|  | [Frédéric Buclin](/user_profile?user_id=120380) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=697224#a268353_120380)• 13 years ago |

Severity: normal → enhancementOS: Mac OS X → AllHardware: x86 → All

|  | [Max Kanat-Alexander](/user_profile?user_id=73187) |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=697224#c1)• 13 years ago |
|  | |

Since bugs have to focus on only adding one thing at a time, I'm changing the summary to focus on getting information about saved searches. If you'd like to also execute them, filing a separate bug for that would be good.Summary: Add methods to get and execute a user's saved searches to the WebService → Add methods to get a user's saved searches to the WebService (new "User.saved\_searches" or add to User.get)

|  | [Koosha KM](/user_profile?user_id=437465)  Assignee |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=697224#c2)• 13 years ago |
|  | |

Attached patch

[patch - v1](attachment.cgi?id=639488&action=diff) (obsolete)
— [Details](attachment.cgi?id=639488&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=697224&attachment=639488)

Assignee: webservice → koosha.khajehStatus: NEW → ASSIGNED
[Attachment #639488](/attachment.cgi?id=639488&action=edit "patch - v1") -
Flags: review?(dkl)
[Attachment #639488](/attachment.cgi?id=639488&action=edit "patch - v1") -
Flags: review?(LpSolit)

|  | [Koosha KM](/user_profile?user_id=437465)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=697224#a21955943_437465)• 13 years ago |

Target Milestone: --- → Bugzilla 4.4

|  | [David Lawrence [:dkl]](/user_profile?user_id=5898) |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=697224#c3)• 13 years ago |
|  | |

Comment on [attachment 639488](/attachment.cgi?id=639488 "patch - v1") [[details]](/attachment.cgi?id=639488&action=edit "patch - v1") [[diff]](/attachment.cgi?id=639488&action=diff "patch - v1") [[review]](/page.cgi?id=splinter.html&ignore=&bug=697224&attachment=639488)
patch - v1
Review of [attachment 639488](/attachment.cgi?id=639488 "patch - v1") [[details]](/attachment.cgi?id=639488&action=edit "patch - v1") [[diff]](/attachment.cgi?id=639488&action=diff "patch - v1") [[review]](/page.cgi?id=splinter.html&ignore=&bug=697224&attachment=639488):
-----------------------------------------------------------------
Instead of returning just the list of names, let's instead return a list of hashes with the data for each saved search. So it would look like this:
saved\_searches => [
{
id => 1,
name => 'foo',
url => 'product=TestProduct1&component=component1...',
},
{
id => 2,
name => 'bar',
url => 'product=TestProduct2&component=component2...',
},
]
Create a utility function such as \_saved\_search\_to\_hash() to do the hash conversion properly. See Bugzilla::WebService::Bug::\_flag\_to\_hash() and similar for examples.
Make sure to wrap each value with the proper $self->type() calls as well.
dkl
[Attachment #639488](/attachment.cgi?id=639488&action=edit "patch - v1") -
Flags: review?(dkl) → review-

|  | [Frédéric Buclin](/user_profile?user_id=120380) |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=697224#c4)• 13 years ago |
|  | |

@dkl: what's this id key? What does it represent?

|  | [Frédéric Buclin](/user_profile?user_id=120380) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=697224#a22017698_120380)• 13 years ago |

[Attachment #639488](/attachment.cgi?id=639488&action=edit "patch - v1") -
Flags: review?(LpSolit)

|  | [David Lawrence [:dkl]](/user_profile?user_id=5898) |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=697224#c5)• 13 years ago |
|  | |

(In reply to Frédéric Buclin from [comment #4](/show_bug.cgi?id=697224#c4 "RESOLVED FIXED - User.get should return a list of all your saved searches"))
> @dkl: what's this id key? What does it represent?
It is the 'id' of the saved search as it is in the database. It should be returned as a type 'int'. Although it is not necessary now it may be useful in the future and it is consistent to return the 'id' in the data structure. See Bugzilla::WebService::Bug::\_flag\_to\_hash, Bugzilla::WebService::Product::\_component\_to\_hash and others like them.
dkl

|  | [Koosha KM](/user_profile?user_id=437465)  Assignee |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=697224#c6)• 13 years ago |
|  | |

Attached patch

[patch - v1.1](attachment.cgi?id=639719&action=diff) (obsolete)
— [Details](attachment.cgi?id=639719&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=697224&attachment=639719)

[Attachment #639488](/attachment.cgi?id=639488&action=edit "patch - v1") -
Attachment is obsolete: true
[Attachment #639719](/attachment.cgi?id=639719&action=edit "patch - v1.1") -
Flags: review?(LpSolit)

|  | [Koosha KM](/user_profile?user_id=437465)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=697224#a22024391_437465)• 13 years ago |

[Attachment #639719](/attachment.cgi?id=639719&action=edit "patch - v1.1") -
Flags: review?(dkl)

|  | [David Lawrence [:dkl]](/user_profile?user_id=5898) |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=697224#c7)• 13 years ago |
|  | |

Comment on [attachment 639719](/attachment.cgi?id=639719 "patch - v1.1") [[details]](/attachment.cgi?id=639719&action=edit "patch - v1.1") [[diff]](/attachment.cgi?id=639719&action=diff "patch - v1.1") [[review]](/page.cgi?id=splinter.html&ignore=&bug=697224&attachment=639719)
patch - v1.1
Review of [attachment 639719](/attachment.cgi?id=639719 "patch - v1.1") [[details]](/attachment.cgi?id=639719&action=edit "patch - v1.1") [[diff]](/attachment.cgi?id=639719&action=diff "patch - v1.1") [[review]](/page.cgi?id=splinter.html&ignore=&bug=697224&attachment=639719):
-----------------------------------------------------------------
\*\*\* ERROR: =item without previous =over at line 838 in file Bugzilla/WebService/User.pm
not ok 119 - Bugzilla/WebService/User.pm has incorrect POD syntax --ERROR
# Failed test 'Bugzilla/WebService/User.pm has incorrect POD syntax --ERROR'
# at t/011pod.t line 47.
Otherwise works fine functionally so we are almost done.
dkl
::: Bugzilla/WebService/User.pm
@@ +202,4 @@
> }
>
> my $in\_group = $self->\_filter\_users\_by\_group(
> + \@user\_objects, $params);
whitespace change?
@@ +214,4 @@
> groups => $self->\_filter\_bless\_groups($\_->groups),
> email\_enabled => $self->type('boolean', $\_->email\_enabled),
> login\_denied\_text => $self->type('string', $\_->disabledtext),
> + saved\_searches => [map {$self->\_query\_to\_hash($\_)} @{ $\_->queries }],
Nit: add space after map { and before }
map { $self->\_query\_to\_hash($\_) }
@@ +802,5 @@
> =back
>
> +=item saved\_searches
> +
> +C<array> An array of hashes each of which represents a user's saved search and has
An array of hashes, each of which...
@@ +809,5 @@
> +=over
> +
> +=item id
> +
> +C<int> The id of the saved search as stored in database.
(Derived from the Product.components POD and may be better here)
C<int> An integer id uniquely identifying the saved search in this installation only.
@@ +821,5 @@
> +C<string> The CGI parameters for the saved search.
> +
> +=back
> +
> +B<Note>: The elements of the returning array (i.e. hashes) are ordered by the
s/returning/returned/
@@ +822,5 @@
> +
> +=back
> +
> +B<Note>: The elements of the returning array (i.e. hashes) are ordered by the
> +name of saved searches.
name of each saved search.
[Attachment #639719](/attachment.cgi?id=639719&action=edit "patch - v1.1") -
Flags: review?(dkl) → review-

|  | [Koosha KM](/user_profile?user_id=437465)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=697224#a22117309_437465)• 13 years ago |

[Attachment #639719](/attachment.cgi?id=639719&action=edit "patch - v1.1") -
Flags: review?(LpSolit) → review-

|  | [Koosha KM](/user_profile?user_id=437465)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=697224#a22117361_437465)• 13 years ago |

[Attachment #639719](/attachment.cgi?id=639719&action=edit "patch - v1.1") -
Flags: review-

|  | [Koosha KM](/user_profile?user_id=437465)  Assignee |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=697224#c8)• 13 years ago |
|  | |

(In reply to David Lawrence [:dkl] from [comment #7](/show_bug.cgi?id=697224#c7 "RESOLVED FIXED - User.get should return a list of all your saved searches"))
> Comment on [attachment 639719](/attachment.cgi?id=639719 "patch - v1.1") [[details]](/attachment.cgi?id=639719&action=edit "patch - v1.1") [[diff]](/attachment.cgi?id=639719&action=diff "patch - v1.1") [[review]](/page.cgi?id=splinter.html&ignore=&bug=697224&attachment=639719)
> patch - v1.1
>
> Review of [attachment 639719](/attachment.cgi?id=639719 "patch - v1.1") [[details]](/attachment.cgi?id=639719&action=edit "patch - v1.1") [[diff]](/attachment.cgi?id=639719&action=diff "patch - v1.1") [[review]](/page.cgi?id=splinter.html&ignore=&bug=697224&attachment=639719):
> -----------------------------------------------------------------
>
> \*\*\* ERROR: =item without previous =over at line 838 in file
> Bugzilla/WebService/User.pm
> not ok 119 - Bugzilla/WebService/User.pm has incorrect POD syntax --ERROR
> # Failed test 'Bugzilla/WebService/User.pm has incorrect POD syntax
> --ERROR'
> # at t/011pod.t line 47.
>
> Otherwise works fine functionally so we are almost done.
>
Works fine on my system. I don't think this problem is coming from my patch. Look for you local changes.

|  | [Koosha KM](/user_profile?user_id=437465)  Assignee |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=697224#c9)• 13 years ago |
|  | |

Attached patch

[patch - v1.2](attachment.cgi?id=639989&action=diff) (obsolete)
— [Details](attachment.cgi?id=639989&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=697224&attachment=639989)

[Attachment #639719](/attachment.cgi?id=639719&action=edit "patch - v1.1") -
Attachment is obsolete: true
[Attachment #639989](/attachment.cgi?id=639989&action=edit "patch - v1.2") -
Flags: review?(dkl)

|  | [David Lawrence [:dkl]](/user_profile?user_id=5898) |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=697224#c10)• 13 years ago |
|  | |

Comment on [attachment 639989](/attachment.cgi?id=639989 "patch - v1.2") [[details]](/attachment.cgi?id=639989&action=edit "patch - v1.2") [[diff]](/attachment.cgi?id=639989&action=diff "patch - v1.2") [[review]](/page.cgi?id=splinter.html&ignore=&bug=697224&attachment=639989)
patch - v1.2
Review of [attachment 639989](/attachment.cgi?id=639989 "patch - v1.2") [[details]](/attachment.cgi?id=639989&action=edit "patch - v1.2") [[diff]](/attachment.cgi?id=639989&action=diff "patch - v1.2") [[review]](/page.cgi?id=splinter.html&ignore=&bug=697224&attachment=639989):
-----------------------------------------------------------------
Looks good and works as expected. r=dkl
[Attachment #639989](/attachment.cgi?id=639989&action=edit "patch - v1.2") -
Flags: review?(dkl) → review+

|  | [David Lawrence [:dkl]](/user_profile?user_id=5898) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=697224#a22293765_5898)• 13 years ago |

Flags: approval?

|  | [Koosha KM](/user_profile?user_id=437465)  Assignee |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=697224#c11)• 13 years ago |
|  | |

(In reply to David Lawrence [:dkl] from [comment #7](/show_bug.cgi?id=697224#c7 "RESOLVED FIXED - User.get should return a list of all your saved searches"))
> Comment on [attachment 639719](/attachment.cgi?id=639719 "patch - v1.1") [[details]](/attachment.cgi?id=639719&action=edit "patch - v1.1") [[diff]](/attachment.cgi?id=639719&action=diff "patch - v1.1") [[review]](/page.cgi?id=splinter.html&ignore=&bug=697224&attachment=639719) [diff] [review]
> patch - v1.1
>
> Review of [attachment 639719](/attachment.cgi?id=639719 "patch - v1.1") [[details]](/attachment.cgi?id=639719&action=edit "patch - v1.1") [[diff]](/attachment.cgi?id=639719&action=diff "patch - v1.1") [[review]](/page.cgi?id=splinter.html&ignore=&bug=697224&attachment=639719) [diff] [review]:
> -----------------------------------------------------------------
>
> \*\*\* ERROR: =item without previous =over at line 838 in file
> Bugzilla/WebService/User.pm
> not ok 119 - Bugzilla/WebService/User.pm has incorrect POD syntax --ERROR
> # Failed test 'Bugzilla/WebService/User.pm has incorrect POD syntax
> --ERROR'
> # at t/011pod.t line 47.
>
> Otherwise works fine functionally so we are almost done.
>
I'm sorry. You were right. I didn't check the generated HTML. I thought errors show up while generating the doc not in the resultant doc (I knew that before but I forgot it!!!).
Anyway, a '=over' before line 804 solves the issue.

|  | [David Lawrence [:dkl]](/user_profile?user_id=5898) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=697224#c12)• 13 years ago |
|  | |

(In reply to Koosha Khajeh Moogahi [:koosha] from [comment #11](/show_bug.cgi?id=697224#c11 "RESOLVED FIXED - User.get should return a list of all your saved searches"))
> I'm sorry. You were right. I didn't check the generated HTML. I thought
> errors show up while generating the doc not in the resultant doc (I knew
> that before but I forgot it!!!).
>
> Anyway, a '=over' before line 804 solves the issue.
Cool. We can fix it on commit. Remind me or whoever does the commit to fix it then.
dkl

|  | [Koosha KM](/user_profile?user_id=437465)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=697224#a22628953_437465)• 13 years ago |

[Attachment #639989](/attachment.cgi?id=639989&action=edit "patch - v1.2") -
Flags: review?(LpSolit)

|  | [Frédéric Buclin](/user_profile?user_id=120380) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=697224#a23565054_120380)• 13 years ago |

[Attachment #639989](/attachment.cgi?id=639989&action=edit "patch - v1.2") -
Flags: review?(LpSolit)

|  | [Frédéric Buclin](/user_profile?user_id=120380) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=697224#a23565069_120380)• 13 years ago |

Flags: approval? → approval+Keywords: [relnote](/buglist.cgi?keywords=relnote&resolution=---)

|  | [David Lawrence [:dkl]](/user_profile?user_id=5898) |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=697224#c13)• 13 years ago |
|  | |

Committing to: bzr+ssh://dlawrence%40mozilla.com@bzr.mozilla.org/bugzilla/trunk
modified Bugzilla/WebService/User.pm
Committed revision 8301.Status: ASSIGNED → RESOLVEDClosed: 13 years agoResolution: --- → FIXED

|  | [Frédéric Buclin](/user_profile?user_id=120380) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=697224#a23904864_120380)• 12 years ago |

Flags: testcase?

|  | [Frédéric Buclin](/user_profile?user_id=120380) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=697224#a25045746_120380)• 12 years ago |

Blocks: [CVE-2012-4198](/show_bug.cgi?id=781850 "RESOLVED FIXED - [SECURITY] Do not leak the existence of groups when using User.get()")

|  | [Frédéric Buclin](/user_profile?user_id=120380) |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=697224#c14)• 12 years ago |
|  | |

Oops, I'm withdrawing my approval. It's not acceptable to disclose saved searches to all users, even to admins. They should only be accessible if you are querying your own account.
I backed out the patch:
Committing to: bzr+ssh://lpsolit%40gmail.com@bzr.mozilla.org/bugzilla/trunk/
modified Bugzilla/WebService/User.pm
Committed revision 8341.Status: RESOLVED → REOPENEDFlags: approval+Resolution: FIXED → ---Summary: Add methods to get a user's saved searches to the WebService (new "User.saved\_searches" or add to User.get) → User.get should return a list of all your saved searches

|  | [Frédéric Buclin](/user_profile?user_id=120380) |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=697224#c15)• 12 years ago |
|  | |

Comment on [attachment 639989](/attachment.cgi?id=639989 "patch - v1.2") [[details]](/attachment.cgi?id=639989&action=edit "patch - v1.2") [[diff]](/attachment.cgi?id=639989&action=diff "patch - v1.2") [[review]](/page.cgi?id=splinter.html&ignore=&bug=697224&attachment=639989)
patch - v1.2
r- per my previous comment. From the UI, admins have no way to get this information, unless they impersonate the user account, in which case the user is informed by email that someone is looking at his account. There is no reason to let everyone silently get this information using User.get. This information should be returned only if you query your own account.
[Attachment #639989](/attachment.cgi?id=639989&action=edit "patch - v1.2") -
Flags: review-

|  | [Koosha KM](/user_profile?user_id=437465)  Assignee |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=697224#c16)• 12 years ago |
|  | |

Attached patch

[patch - v1.3](attachment.cgi?id=651362&action=diff)
— [Details](attachment.cgi?id=651362&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=697224&attachment=651362)

This patch also removes the existing redundant code.
[Attachment #639989](/attachment.cgi?id=639989&action=edit "patch - v1.2") -
Attachment is obsolete: true
[Attachment #651362](/attachment.cgi?id=651362&action=edit "patch - v1.3") -
Flags: review?(LpSolit)

|  | [Frédéric Buclin](/user_profile?user_id=120380) |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=697224#c17)• 12 years ago |
|  | |

Comment on [attachment 651362](/attachment.cgi?id=651362 "patch - v1.3") [[details]](/attachment.cgi?id=651362&action=edit "patch - v1.3") [[diff]](/attachment.cgi?id=651362&action=diff "patch - v1.3") [[review]](/page.cgi?id=splinter.html&ignore=&bug=697224&attachment=651362)
patch - v1.3
>+ # Make the @users array bigger in advance to gain some performance.
>+ $#users += $#$in\_group;
This is a bad idea:
>perl -MTime::HiRes -wE 'my @a; my $t1 = Time::HiRes::time(); push(@a, $\_) for (1..1e7); my $t2 = Time::HiRes::time(); say $t2 - $t1; say scalar(@a)'
1.28934717178345
10000000
>perl -MTime::HiRes -wE 'my @a; $#a = 1e7; my $t1 = Time::HiRes::time(); push(@a, $\_) for (1..1e7); my $t2 = Time::HiRes::time(); say $t2 - $t1; say scalar(@a)'
1.55815100669861
20000001
As you can see, the code is much slower and @users now has the wrong size. Drop this hack from your patch.
>+ foreach my $user (@$in\_group) {
>+ push(@users, filter($params, $user\_info));
>+}
The closing } of the foreach loop has the wrong indentation.
Otherwise your patch looks good, but I need to test it first before setting r+/-.

|  | [Koosha KM](/user_profile?user_id=437465)  Assignee |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=697224#c18)• 12 years ago |
|  | |

(In reply to Frédéric Buclin from [comment #17](/show_bug.cgi?id=697224#c17 "RESOLVED FIXED - User.get should return a list of all your saved searches"))
> Comment on [attachment 651362](/attachment.cgi?id=651362 "patch - v1.3") [[details]](/attachment.cgi?id=651362&action=edit "patch - v1.3") [[diff]](/attachment.cgi?id=651362&action=diff "patch - v1.3") [[review]](/page.cgi?id=splinter.html&ignore=&bug=697224&attachment=651362)
> patch - v1.3
>
> >+ # Make the @users array bigger in advance to gain some performance.
> >+ $#users += $#$in\_group;
>
> This is a bad idea:
>
I don't know, but this is what the Camel book recommends:
"You can gain some measure of efficiency by pre-extending an array that is going to get big."
Please correct this on checkin: "In other word" => "In other words".

|  | [Koosha KM](/user_profile?user_id=437465)  Assignee |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=697224#c19)• 12 years ago |
|  | |

I got it. If we're going to pre-extend the array, we must use the index-based assignment and not use push().
$users[$i] = ...

|  | [Koosha KM](/user_profile?user_id=437465)  Assignee |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=697224#c20)• 12 years ago |
|  | |

But, push() is more readable.

|  | [Frédéric Buclin](/user_profile?user_id=120380) |  |
| --- | --- | --- |
| [Comment 21](/show_bug.cgi?id=697224#c21)• 12 years ago |
|  | |

(In reply to Koosha Khajeh Moogahi [:koosha] from [comment #18](/show_bug.cgi?id=697224#c18 "RESOLVED FIXED - User.get should return a list of all your saved searches"))
> "You can gain some measure of efficiency by pre-extending an array that is
> going to get big."
An array with less than 50 items is not big. We are not talking about 10000000 items here. We shouldn't start with such pseudo perf-improvements, else our code is quickly going to become messy.
If you are really interested in improving performances, use Devel::NYTProf. ;)

|  | [Frédéric Buclin](/user_profile?user_id=120380) |  |
| --- | --- | --- |
| [Comment 22](/show_bug.cgi?id=697224#c22)• 12 years ago |
|  | |

Comment on [attachment 651362](/attachment.cgi?id=651362 "patch - v1.3") [[details]](/attachment.cgi?id=651362&action=edit "patch - v1.3") [[diff]](/attachment.cgi?id=651362&action=diff "patch - v1.3") [[review]](/page.cgi?id=splinter.html&ignore=&bug=697224&attachment=651362)
patch - v1.3
>+B<Note>: The elements of the returned array (i.e. hashes) are ordered by the
>+name of each saved search.
This information is really not important and should be removed.
>+B<Note>: Only the saved searches of the logged in user will be returned. In other
>+word, you won't be authorized to access other users' saved searches even if you are
>+the administrator.
This should be merged with the already existing Note.
I like the code refactoring. Avoiding duplicated code is nice and makes it clearer what is returned or not. :) Your patch is working fine, thanks! r=LpSolit
[Attachment #651362](/attachment.cgi?id=651362&action=edit "patch - v1.3") -
Flags: review?(LpSolit) → review+

|  | [Frédéric Buclin](/user_profile?user_id=120380) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=697224#a25746135_120380)• 12 years ago |

Flags: approval+

|  | [Frédéric Buclin](/user_profile?user_id=120380) |  |
| --- | --- | --- |
| [Comment 23](/show_bug.cgi?id=697224#c23)• 12 years ago |
|  | |

Committing to: bzr+ssh://lpsolit%40gmail.com@bzr.mozilla.org/bugzilla/trunk/
modified Bugzilla/WebService/User.pm
Committed revision 8350.Status: REOPENED → RESOLVEDClosed: 13 years ago → 12 years agoResolution: --- → FIXED

|  | [Koosha KM](/user_profile?user_id=437465)  Assignee |  |
| --- | --- | --- |
| [Comment 24](/show_bug.cgi?id=697224#c24)• 12 years ago |
|  | |

(In reply to Frédéric Buclin from [comment #17](/show_bug.cgi?id=697224#c17 "RESOLVED FIXED - User.get should return a list of all your saved searches"))
> Comment on [attachment 651362](/attachment.cgi?id=651362 "patch - v1.3") [[details]](/attachment.cgi?id=651362&action=edit "patch - v1.3") [[diff]](/attachment.cgi?id=651362&action=diff "patch - v1.3") [[review]](/page.cgi?id=splinter.html&ignore=&bug=697224&attachment=651362) [diff] [review]
> patch - v1.3
>
> >+ # Make the @users array bigger in advance to gain some performance.
> >+ $#users += $#$in\_group;
>
> This is a bad idea:
You forgot to remove these lines on chekin!

|  | [Frédéric Buclin](/user_profile?user_id=120380) |  |
| --- | --- | --- |
| [Comment 25](/show_bug.cgi?id=697224#c25)• 12 years ago |
|  | |

(In reply to Koosha Khajeh Moogahi [:koosha] from [comment #24](/show_bug.cgi?id=697224#c24 "RESOLVED FIXED - User.get should return a list of all your saved searches"))
> You forgot to remove these lines on chekin!
Ah right, thanks. This is now done.

|  | [Frédéric Buclin](/user_profile?user_id=120380) |  |
| --- | --- | --- |
| [Comment 26](/show_bug.cgi?id=697224#c26)• 12 years ago |
|  | |

About QA tests:
As we cannot create saved searches using the WebServices, I can only check that they aren't leaked to other users. But I cannot check that the correct data is returned (or I would have to mix a Selenium and a WS test script).
Committing to: bzr+ssh://lpsolit%40gmail.com@bzr.mozilla.org/bugzilla/qa/4.4/
modified t/webservice\_user\_get.t
Committed revision 233.Flags: testcase? → testcase+

|  | [Frédéric Buclin](/user_profile?user_id=120380) |  |
| --- | --- | --- |
| [Comment 27](/show_bug.cgi?id=697224#c27)• 12 years ago |
|  | |

Added to the relnotes for 4.4.Keywords: [relnote](/buglist.cgi?keywords=relnote&resolution=---)

|  | [Frédéric Buclin](/user_profile?user_id=120380) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=697224#a32390489_120380)• 12 years ago |

No longer blocks: [CVE-2012-4198](/show_bug.cgi?id=781850 "RESOLVED FIXED - [SECURITY] Do not leak the existence of groups when using User.get()")

|  | [Frédéric Buclin](/user_profile?user_id=120380) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=697224#a56488271_120380)• 11 years ago |

Blocks: [903436](/show_bug.cgi?id=903436 "RESOLVED DUPLICATE - Implement the ability to return the buglist of a saved search using WebServices")

|  | [Frédéric Buclin](/user_profile?user_id=120380) |  |
| --- | --- | --- |
| [Comment 28](/show_bug.cgi?id=697224#c28)• 11 years ago |
|  | |

(In reply to Max Kanat-Alexander from [comment #1](/show_bug.cgi?id=697224#c1 "RESOLVED FIXED - User.get should return a list of all your saved searches"))
> Since bugs have to focus on only adding one thing at a time, I'm changing
> the summary to focus on getting information about saved searches. If you'd
> like to also execute them, filing a separate bug for that would be good.
Filed as [bug 903436](/show_bug.cgi?id=903436 "RESOLVED DUPLICATE - Implement the ability to return the buglist of a saved search using WebServices").
You need to [log in](/show_bug.cgi?id=697224&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Koosha KM](/user_profile?user_id=437465)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from bugzilla.mozilla.org_2ddd5b9b_20250125_001330.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/781850)
* [XML](/show_bug.cgi?ctype=xml&id=781850)

Closed
[Bug 781850](/show_bug.cgi?id=781850)
(CVE-2012-4198)

Opened 12 years ago
Closed 12 years ago

# [SECURITY] Do not leak the existence of groups when using User.get()

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

[SECURITY] Do not leak the existence of groups when using User.get()

## Categories

### (Bugzilla :: WebService, defect)

[Product:](/describecomponents.cgi?product=Bugzilla)

Bugzilla
▾

Bugzilla
The [Bugzilla](http://www.bugzilla.org) bug-tracking system.

**Note:** This is **not** the place to request configuration, permission, or account changes to this installation of Bugzilla (bugzilla.mozilla.org). File such changes under the appropriate component in the [**bugzilla.mozilla.org**](enter_bug.cgi?product=bugzilla.mozilla.org) product.
[See Open Bugs in This Product](/buglist.cgi?product=Bugzilla&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Bugzilla)
Watch This Product

[Component:](/describecomponents.cgi?product=Bugzilla&component=WebService#WebService)

WebService
▾

Bugzilla :: WebService
For issues and bugs in the WebService interface. xmlrpc.cgi, jsonrcpc.cgi, rest.cgi, and Bugzilla/WebService/\*.pm
[See Open Bugs in This Component](/buglist.cgi?product=Bugzilla&component=WebService&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Bugzilla&component=WebService&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Bugzilla&component=WebService)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

3.7.1

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

All

All

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

major

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

Bugzilla 4.0

## People

### (Reporter: LpSolit, Assigned: LpSolit)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](extensions/Gravatar/web/default.jpg)  [LpSolit](/user_profile?user_id=120380)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

![](https://secure.gravatar.com/avatar/9df24a05a7e63cf07e49d30ddfeee31a?d=mm&size=40)  [default-qa](/user_profile?user_id=5086)

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](extensions/Gravatar/web/default.jpg)  [LpSolit](/user_profile?user_id=120380)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

---

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

3 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

[548198](/show_bug.cgi?id=548198 "RESOLVED FIXED - Add a method of limiting the User.get results by group id")

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[805640](/show_bug.cgi?id=805640 "RESOLVED FIXED - Security advisory for Bugzilla 4.4rc1, 4.2.4, 4.0.9 and 3.6.12")

Dependency [tree](/showdependencytree.cgi?id=781850&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=781850)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

CVE-2012-4198

[Keywords:](/describekeywords.cgi)

---

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [LpSolit](/user_profile?user_id=120380) | [approval](#a8206868_120380 "12 years ago") | + |
| --- | --- | --- |
| [LpSolit](/user_profile?user_id=120380) | approval | + |
| --- | --- | --- |
| [LpSolit](/user_profile?user_id=120380) | [approval4.4](#a8206868_120380 "12 years ago") | + |
| --- | --- | --- |
| [LpSolit](/user_profile?user_id=120380) | approval4.4 | + |
| --- | --- | --- |
| [LpSolit](/user_profile?user_id=120380) | [blocking4.4](#c0 "12 years ago") | + |
| --- | --- | --- |
| [LpSolit](/user_profile?user_id=120380) | blocking4.4 | + |
| --- | --- | --- |
| [LpSolit](/user_profile?user_id=120380) | [approval4.2](#a8206868_120380 "12 years ago") | + |
| --- | --- | --- |
| [LpSolit](/user_profile?user_id=120380) | approval4.2 | + |
| --- | --- | --- |
| [LpSolit](/user_profile?user_id=120380) | [blocking4.2.4](#c2 "12 years ago") | + |
| --- | --- | --- |
| [LpSolit](/user_profile?user_id=120380) | blocking4.2.4 | + |
| --- | --- | --- |
| [LpSolit](/user_profile?user_id=120380) | [approval4.0](#a8206868_120380 "12 years ago") | + |
| --- | --- | --- |
| [LpSolit](/user_profile?user_id=120380) | approval4.0 | + |
| --- | --- | --- |
| [LpSolit](/user_profile?user_id=120380) | [blocking4.0.9](#c2 "12 years ago") | + |
| --- | --- | --- |
| [LpSolit](/user_profile?user_id=120380) | blocking4.0.9 | + |
| --- | --- | --- |
| [LpSolit](/user_profile?user_id=120380) | [testcase](#c13 "12 years ago") | + |
| --- | --- | --- |
| [LpSolit](/user_profile?user_id=120380) | testcase | + | | |
| --- | --- | --- | --- | --- |
|  | approval5.0 | ? |
| --- | --- | --- |
|  | approval5.2 | ? |
|  | approval6.0 | ? |
|  | blocking5.0.4.1 | ? |
|  | blocking5.2 | ? |
|  | blocking6.0 | ? |
|  | blocking4.4.14 | ? |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | documentation | ? + - |
|  | relnote |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (3 files)

| [patch for 4.4 + trunk, v1](/attachment.cgi?id=669185)  [12 years ago](#c3)  [Frédéric Buclin](/user_profile?user_id=120380)   3.26 KB, patch | dkl : [review+](#c4 "12 years ago") | [Details](/attachment.cgi?id=669185&action=edit) | [Diff](/attachment.cgi?id=669185&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=781850&attachment=669185) |
| --- | --- | --- |
| [patch for 4.2, v1](/attachment.cgi?id=671395)  [12 years ago](#c6)  [Frédéric Buclin](/user_profile?user_id=120380)   2.33 KB, patch | dkl : [review+](#c8 "12 years ago") | [Details](/attachment.cgi?id=671395&action=edit) | [Diff](/attachment.cgi?id=671395&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=781850&attachment=671395) |
| [patch for 4.0, v1](/attachment.cgi?id=671396)  [12 years ago](#c7)  [Frédéric Buclin](/user_profile?user_id=120380)   2.43 KB, patch | dkl : [review+](#c9 "12 years ago") | [Details](/attachment.cgi?id=671396&action=edit) | [Diff](/attachment.cgi?id=671396&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=781850&attachment=671396) |

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=781850#c0)• 12 years ago |
|  | |

I just realized that User.get becomes way too verbose in Bugzilla 4.4. With a powerless account, I can access personal information, some of which power users shouldn't have access to either (even with admin or editusers privs):
- (confidential) groups a user belongs to, [bug 548198](/show_bug.cgi?id=548198 "RESOLVED FIXED - Add a method of limiting the User.get results by group id") (Bugzilla 4.0!)
- unshared saved searches, [bug 697224](/show_bug.cgi?id=697224 "RESOLVED FIXED - User.get should return a list of all your saved searches") (Bugzilla 4.4)
This is totally unacceptable and this information must only be disclosed if you are querying your own account, i.e. the user ID matches Bugzilla->user->id.
I know I approved [bug 697224](/show_bug.cgi?id=697224 "RESOLVED FIXED - User.get should return a list of all your saved searches"), but I didn't realize that all users could have access to this information. I clearly withdraw my approval here.
Said differently, saved searches should never be disclosed to anyone but you. From the UI, admins have no way to get this information, except by impersonating the user account, in which case the user is informed by email that someone is looking at his account. So there is no reason that someone can have access to this information using User.get, even for admins.
About groups, User.get is disclosing if a group exists or not, defeating [CVE-2011-2380](https://www.cve.org/CVERecord?id=CVE-2011-2380), see [bug 653477](/show_bug.cgi?id=653477 "RESOLVED FIXED - [SECURITY] Group names can be guessed when creating or editing a bug"). Bugzilla::Group->check\_no\_disclose() must be used instead of Bugzilla::Group->check().Flags: blocking4.4+

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=781850#c1)• 12 years ago |
|  | |

I backed out [bug 697224](/show_bug.cgi?id=697224 "RESOLVED FIXED - User.get should return a list of all your saved searches"). Only Bugzilla 4.3.2 had this code, so we are fine here. So this bug now focuses on the disclose of confidential groups only.

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=781850#a1169_120380)• 12 years ago |

Severity: critical → major

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=781850#c2)• 12 years ago |
|  | |

(In reply to Frédéric Buclin from [comment #0](/show_bug.cgi?id=781850#c0 "RESOLVED FIXED - [SECURITY] Do not leak the existence of groups when using User.get()"))
> Bugzilla::Group->check\_no\_disclose() must be used instead of Bugzilla::Group->check().
Actually, I simply had to fix the error ID passed to check(). check\_no\_disclose() must only be used for bugs.Assignee: webservice → LpSolitStatus: NEW → ASSIGNEDFlags: blocking4.2.4+Flags: blocking4.0.9+Summary: Do not leak personal information to all users → [SECURITY] Do not leak the existence of groups when using User.get()Target Milestone: Bugzilla 4.4 → Bugzilla 4.0Version: 4.3.2 → 3.7.1

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=781850#c3)• 12 years ago |
|  | |

Attached patch

[patch for 4.4 + trunk, v1](attachment.cgi?id=669185&action=diff)
— [Details](attachment.cgi?id=669185&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=781850&attachment=669185)

It's now illegal to pass a group name if you don't belong to this group (to not disclose if this group exists or not). It's still fine to pass a group ID you don't belong to, though, because its name is not disclosed.
[Attachment #669185](/attachment.cgi?id=669185&action=edit "patch for 4.4 + trunk, v1") -
Flags: review?(dkl)

|  | [David Lawrence [:dkl]](/user_profile?user_id=5898) |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=781850#c4)• 12 years ago |
|  | |

Comment on [attachment 669185](/attachment.cgi?id=669185 "patch for 4.4 + trunk, v1") [[details]](/attachment.cgi?id=669185&action=edit "patch for 4.4 + trunk, v1") [[diff]](/attachment.cgi?id=669185&action=diff "patch for 4.4 + trunk, v1") [[review]](/page.cgi?id=splinter.html&ignore=&bug=781850&attachment=669185)
patch for 4.4 + trunk, v1
Review of [attachment 669185](/attachment.cgi?id=669185 "patch for 4.4 + trunk, v1") [[details]](/attachment.cgi?id=669185&action=edit "patch for 4.4 + trunk, v1") [[diff]](/attachment.cgi?id=669185&action=diff "patch for 4.4 + trunk, v1") [[review]](/page.cgi?id=splinter.html&ignore=&bug=781850&attachment=669185):
-----------------------------------------------------------------
Looks good and works as expected. r=dkl
::: Bugzilla/WebService/User.pm
@@ +889,5 @@
>
> +=item 804 (Invalid Group Name)
> +
> +You passed a group name which doesn't exist or which you don't belong to
> +in the C<groups> argument.
Nit: may sound better this way
You passed a group name in the C<groups> argument which either does not exist or you do not belong to it.
I am fine either way.
[Attachment #669185](/attachment.cgi?id=669185&action=edit "patch for 4.4 + trunk, v1") -
Flags: review?(dkl) → review+

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=781850#a5205886_120380)• 12 years ago |

[Attachment #669185](/attachment.cgi?id=669185&action=edit "patch for 4.4 + trunk, v1") -
Attachment description: patch, v1 → patch for 4.4 + trunk, v1

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=781850#c5)• 12 years ago |
|  | |

I need to backport it to 4.2 and 4.0 as the patch doesn't apply cleanly to these older branches.Flags: approval?Flags: approval4.4?

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=781850#c6)• 12 years ago |
|  | |

Attached patch

[patch for 4.2, v1](attachment.cgi?id=671395&action=diff)
— [Details](attachment.cgi?id=671395&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=781850&attachment=671395)

Patch for 4.2.x only.
[Attachment #671395](/attachment.cgi?id=671395&action=edit "patch for 4.2, v1") -
Flags: review?(dkl)

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=781850#c7)• 12 years ago |
|  | |

Attached patch

[patch for 4.0, v1](attachment.cgi?id=671396&action=diff)
— [Details](attachment.cgi?id=671396&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=781850&attachment=671396)

Patch for 4.0.x only. The only difference compared to the patch for 4.2 is in Constants.pm.
[Attachment #671396](/attachment.cgi?id=671396&action=edit "patch for 4.0, v1") -
Flags: review?(dkl)

|  | [David Lawrence [:dkl]](/user_profile?user_id=5898) |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=781850#c8)• 12 years ago |
|  | |

Comment on [attachment 671395](/attachment.cgi?id=671395 "patch for 4.2, v1") [[details]](/attachment.cgi?id=671395&action=edit "patch for 4.2, v1") [[diff]](/attachment.cgi?id=671395&action=diff "patch for 4.2, v1") [[review]](/page.cgi?id=splinter.html&ignore=&bug=781850&attachment=671395)
patch for 4.2, v1
Review of [attachment 671395](/attachment.cgi?id=671395 "patch for 4.2, v1") [[details]](/attachment.cgi?id=671395&action=edit "patch for 4.2, v1") [[diff]](/attachment.cgi?id=671395&action=diff "patch for 4.2, v1") [[review]](/page.cgi?id=splinter.html&ignore=&bug=781850&attachment=671395):
-----------------------------------------------------------------
r=dkl
[Attachment #671395](/attachment.cgi?id=671395&action=edit "patch for 4.2, v1") -
Flags: review?(dkl) → review+

|  | [David Lawrence [:dkl]](/user_profile?user_id=5898) |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=781850#c9)• 12 years ago |
|  | |

Comment on [attachment 671396](/attachment.cgi?id=671396 "patch for 4.0, v1") [[details]](/attachment.cgi?id=671396&action=edit "patch for 4.0, v1") [[diff]](/attachment.cgi?id=671396&action=diff "patch for 4.0, v1") [[review]](/page.cgi?id=splinter.html&ignore=&bug=781850&attachment=671396)
patch for 4.0, v1
Review of [attachment 671396](/attachment.cgi?id=671396 "patch for 4.0, v1") [[details]](/attachment.cgi?id=671396&action=edit "patch for 4.0, v1") [[diff]](/attachment.cgi?id=671396&action=diff "patch for 4.0, v1") [[review]](/page.cgi?id=splinter.html&ignore=&bug=781850&attachment=671396):
-----------------------------------------------------------------
r=dkl
[Attachment #671396](/attachment.cgi?id=671396&action=edit "patch for 4.0, v1") -
Flags: review?(dkl) → review+

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=781850#a5759646_120380)• 12 years ago |

Flags: approval4.2?Flags: approval4.0?

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=781850#a6585926_120380)• 12 years ago |

Blocks: [805640](/show_bug.cgi?id=805640 "RESOLVED FIXED - Security advisory for Bugzilla 4.4rc1, 4.2.4, 4.0.9 and 3.6.12")

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=781850#c10)• 12 years ago |
|  | |

No need for another CVE number for this bug (I think), it's another form of [CVE-2011-2380](https://www.cve.org/CVERecord?id=CVE-2011-2380).Alias: CVE-2011-2380-p2

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=781850#c11)• 12 years ago |
|  | |

You can't re-use year-old CVEs that way, use [CVE-2012-4198](https://www.cve.org/CVERecord?id=CVE-2012-4198) instead.Alias: CVE-2011-2380-p2 → CVE-2012-4198

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=781850#a7344743_120380)• 12 years ago |

No longer depends on: [697224](/show_bug.cgi?id=697224 "RESOLVED FIXED - User.get should return a list of all your saved searches")

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=781850#a8206868_120380)• 12 years ago |

Flags: approval?Flags: approval4.4?Flags: approval4.4+Flags: approval4.2?Flags: approval4.2+Flags: approval4.0?Flags: approval4.0+Flags: approval+

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=781850#c12)• 12 years ago |
|  | |

Committing to: bzr+ssh://lpsolit%40gmail.com@bzr.mozilla.org/bugzilla/trunk/
modified Bugzilla/WebService/Constants.pm
modified Bugzilla/WebService/User.pm
Committed revision 8468.
Committing to: bzr+ssh://lpsolit%40gmail.com@bzr.mozilla.org/bugzilla/4.4/
modified Bugzilla/WebService/Constants.pm
modified Bugzilla/WebService/User.pm
Committed revision 8453.
Committing to: bzr+ssh://lpsolit%40gmail.com@bzr.mozilla.org/bugzilla/4.2/
modified Bugzilla/WebService/Constants.pm
modified Bugzilla/WebService/User.pm
Committed revision 8167.
Committing to: bzr+ssh://lpsolit%40gmail.com@bzr.mozilla.org/bugzilla/4.0/
modified Bugzilla/WebService/Constants.pm
modified Bugzilla/WebService/User.pm
Committed revision 7733.Status: ASSIGNED → RESOLVEDClosed: 12 years agoResolution: --- → FIXED

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=781850#c13)• 12 years ago |
|  | |

Committing to: bzr+ssh://lpsolit%40gmail.com@bzr.mozilla.org/bugzilla/qa/4.4/
modified t/webservice\_user\_get.t
Committed revision 235.
Committing to: bzr+ssh://lpsolit%40gmail.com@bzr.mozilla.org/bugzilla/qa/4.2/
modified t/webservice\_user\_get.t
Committed revision 227.
Committing to: bzr+ssh://lpsolit%40gmail.com@bzr.mozilla.org/bugzilla/qa/4.0/
modified t/webservice\_user\_get.t
Committed revision 208.Flags: testcase+

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=781850#c14)• 12 years ago |
|  | |

Security advisory sent. Removing the security flag.Group: bugzilla-security
You need to [log in](/show_bug.cgi?id=781850&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Frédéric Buclin](/user_profile?user_id=120380)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review


