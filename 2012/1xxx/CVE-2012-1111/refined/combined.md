=== Content from seclists.org_b3b4952b_20250125_132245.html ===

[![](/shared/images/nst-icons.svg#menu)](#menu)
![](/shared/images/nst-icons.svg#close)
[![Home page logo](/images/sitelogo.png)](/)
[Nmap.org](https://nmap.org/)
[Npcap.com](https://npcap.com/)
[Seclists.org](https://seclists.org/)
[Sectools.org](https://sectools.org)
[Insecure.org](https://insecure.org/)

![](/shared/images/nst-icons.svg#search)

[![oss-sec logo](/images/oss-sec-logo.png)](/oss-sec/)
## [oss-sec](/oss-sec/) mailing list archives

[![Previous](/images/left-icon-16x16.png)](556)
[By Date](date.html#557)
[![Next](/images/right-icon-16x16.png)](558)

[![Previous](/images/left-icon-16x16.png)](576)
[By Thread](index.html#557)
[![Next](/images/right-icon-16x16.png)](566)

![](/shared/images/nst-icons.svg#search)

# CVE Request: lightdm

---

*From*: Marc Deslauriers <marc.deslauriers () canonical com>

*Date*: Mon, 05 Mar 2012 07:54:48 -0500

---

```
Could we please get a CVE assigned to the following issue:

lightdm leaks file descriptors to child processes. A local attacker can use this to bypass
intended permissions and write to the log file, cause a denial of service, or possibly
have another unknown impact.

Bug:
[https://bugs.launchpad.net/ubuntu/+source/lightdm/+bug/927060](https://bugs.launchpad.net/ubuntu/%2Bsource/lightdm/%2Bbug/927060)
<http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=658678>

Thanks,

Marc.

--
Marc Deslauriers
Ubuntu Security Engineer     | <http://www.ubuntu.com/>
Canonical Ltd.               | <http://www.canonical.com/>

```

---

[![Previous](/images/left-icon-16x16.png)](556)
[By Date](date.html#557)
[![Next](/images/right-icon-16x16.png)](558)

[![Previous](/images/left-icon-16x16.png)](576)
[By Thread](index.html#557)
[![Next](/images/right-icon-16x16.png)](566)

### Current thread:

* **CVE Request: lightdm** *Marc Deslauriers (Mar 05)*
  + [Re: CVE Request: lightdm](566) *Kurt Seifried (Mar 05)*

![](/shared/images/nst-icons.svg#search)

## [Nmap Security Scanner](https://nmap.org/)

* [Ref Guide](https://nmap.org/book/man.html)* [Install Guide](https://nmap.org/book/install.html)* [Docs](https://nmap.org/docs.html)* [Download](https://nmap.org/download.html)* [Nmap OEM](https://nmap.org/oem/)

## [Npcap packet capture](https://npcap.com/)

* [User's Guide](https://npcap.com/guide/)* [API docs](https://npcap.com/guide/npcap-devguide.html#npcap-api)* [Download](https://npcap.com/#download)* [Npcap OEM](https://npcap.com/oem/)

## [Security Lists](https://seclists.org/)

* [Nmap Announce](https://seclists.org/nmap-announce/)* [Nmap Dev](https://seclists.org/nmap-dev/)* [Full Disclosure](https://seclists.org/fulldisclosure/)* [Open Source Security](https://seclists.org/oss-sec/)* [BreachExchange](https://seclists.org/dataloss/)

## [Security Tools](https://sectools.org)

* [Vuln scanners](https://sectools.org/tag/vuln-scanners/)* [Password audit](https://sectools.org/tag/pass-audit/)* [Web scanners](https://sectools.org/tag/web-scanners/)* [Wireless](https://sectools.org/tag/wireless/)* [Exploitation](https://sectools.org/tag/sploits/)

## [About](https://insecure.org/)

* [About/Contact](https://insecure.org/fyodor/)* [Privacy](https://insecure.org/privacy.html)* [Advertising](https://insecure.org/advertising.html)* [Nmap Public Source License](https://nmap.org/npsl/)

[![](/shared/images/nst-icons.svg#twitter)](https://twitter.com/nmap "Visit us on Twitter")
[![](/shared/images/nst-icons.svg#facebook)](https://facebook.com/nmap "Visit us on Facebook")
[![](/shared/images/nst-icons.svg#github)](https://github.com/nmap/ "Visit us on Github")
[![](/shared/images/nst-icons.svg#reddit)](https://reddit.com/r/nmap/ "Discuss Nmap on Reddit")



=== Content from lists.opensuse.org_1ada4fcf_20250125_132244.html ===


[![openSUSE](https://static.opensuse.org/favicon.svg)
Mailing Lists](/archives/ "openSUSE Mailing Lists")

[Sign In](/accounts/login/?next=/archives/list/updates%40lists.opensuse.org/message/U7GS3NCA4QITZ4T7UYJMQRSCP2RTZT54/)
[Sign Up](/accounts/signup/?next=/archives/list/updates%40lists.opensuse.org/message/U7GS3NCA4QITZ4T7UYJMQRSCP2RTZT54/)

[Manage this list](/manage/lists/updates.lists.opensuse.org/)
[Sign In](/accounts/login/?next=/archives/list/updates%40lists.opensuse.org/message/U7GS3NCA4QITZ4T7UYJMQRSCP2RTZT54/)
[Sign Up](/accounts/signup/?next=/archives/list/updates%40lists.opensuse.org/message/U7GS3NCA4QITZ4T7UYJMQRSCP2RTZT54/)

×
#### Keyboard Shortcuts

### Thread View

* `j`: Next unread message
* `k`: Previous unread message
* `j a`: Jump to all threads* `j l`: Jump to MailingList overview

[thread](/archives/list/updates%40lists.opensuse.org/thread/U7GS3NCA4QITZ4T7UYJMQRSCP2RTZT54/#U7GS3NCA4QITZ4T7UYJMQRSCP2RTZT54)

# openSUSE-SU-2012:0354-1: moderate: update for lightdm

![](https://seccdn.libravatar.org/avatar/099a17325bdf082b643d1a6bbacde279.jpg?s=120&d=mm&r=g)
## [opensuse-security＠opensuse.org](/archives/users/1b72def497ef4503896cd7a5fe9fb8e0/ "See the profile for opensuse-security＠opensuse.org")

12 Mar
2012

12 Mar
'12

22:15

openSUSE Security Update: update for lightdm
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
Announcement ID: openSUSE-SU-2012:0354-1
Rating: moderate
References: #745339
Cross-References: CVE-2012-1111
Affected Products:
openSUSE 12.1
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
An update that fixes one vulnerability is now available.
Description:
- update to version 1.0.9
- stop file descriptors leaking into the session
processes (bnc#745339, lp#927060, CVE-2012-1111)
- fix compilation against gthread
- change session directory once user permissions are set
so it works on NFS filesystems that don't allow root to
access files
- fix object cleanup on exit
- fix lightdm --debug not working on newer GLib
- drop privileges when reading ~/.dmrc (CVE-2011-3153)
- fix crash calling lightdm\_get\_layout
- drop lightdm-CVE-2011-3153.patch which has been included
upstream
Patch Instructions:
To install this openSUSE Security Update use YaST online\_update.
Alternatively you can run the command listed for your product:
- openSUSE 12.1:
zypper in -t patch openSUSE-2012-154
To bring your system up-to-date, use "zypper patch".
Package List:
- openSUSE 12.1 (i586 x86\_64):
liblightdm-gobject-1-0-1.0.9-8.1
liblightdm-gobject-1-0-debuginfo-1.0.9-8.1
liblightdm-qt-1-0-1.0.9-8.1
liblightdm-qt-1-0-debuginfo-1.0.9-8.1
lightdm-1.0.9-8.1
lightdm-debuginfo-1.0.9-8.1
lightdm-debugsource-1.0.9-8.1
lightdm-gobject-devel-1.0.9-8.1
lightdm-gtk-greeter-1.0.9-8.1
lightdm-gtk-greeter-debuginfo-1.0.9-8.1
lightdm-qt-devel-1.0.9-8.1
lightdm-qt-greeter-1.0.9-8.1
lightdm-qt-greeter-debuginfo-1.0.9-8.1
- openSUSE 12.1 (noarch):
lightdm-gtk-greeter-branding-openSUSE-12.1-4.4.1
lightdm-gtk-greeter-branding-upstream-1.0.9-8.1
lightdm-lang-1.0.9-8.1
References:
<http://support.novell.com/security/cve/CVE-2012-1111.html>
<https://bugzilla.novell.com/745339>

[0](#like "You must be logged-in to vote.")
[0](#dislike "You must be logged-in to vote.")

Reply

[Sign in to reply online](/accounts/login/?next=/archives/list/updates%40lists.opensuse.org/message/U7GS3NCA4QITZ4T7UYJMQRSCP2RTZT54/)
Use email software

[Back to the thread](/archives/list/updates%40lists.opensuse.org/thread/U7GS3NCA4QITZ4T7UYJMQRSCP2RTZT54/#U7GS3NCA4QITZ4T7UYJMQRSCP2RTZT54)

[Back to the list](/archives/list/updates%40lists.opensuse.org/)

![HyperKitty](/static/hyperkitty/img/logo.png)
Powered by [HyperKitty](http://hyperkitty.readthedocs.org) version 1.3.12.



=== Content from bugzilla.novell.com_1da8cd90_20250125_132251.html ===




=== Content from bugs.launchpad.net_519c23bf_20250126_085455.html ===

[Log in / Register](https://bugs.launchpad.net/ubuntu/%2Bsource/lightdm/%2Bbug/927060/%2Blogin)

[![](https://launchpadlibrarian.net/606381979/CoF%2064px.png)](https://launchpad.net/ubuntu)

## [Ubuntu](https://launchpad.net/ubuntu)[lightdm package](https://launchpad.net/ubuntu/%2Bsource/lightdm)

* [Overview](https://launchpad.net/ubuntu/%2Bsource/lightdm)
* [Code](https://code.launchpad.net/ubuntu/%2Bsource/lightdm)
* [Bugs](https://bugs.launchpad.net/ubuntu/%2Bsource/lightdm)
* Blueprints
* [Translations](https://translations.launchpad.net/ubuntu/%2Bsource/lightdm)
* [Answers](https://answers.launchpad.net/ubuntu/%2Bsource/lightdm)

# lightdm leaks FDs to child processes

Bug #927060 reported by
[Yves-Alexis Perez](https://launchpad.net/~corsac)
on 2012-02-05

[266](/%2Bhelp-bugs/bug-heat.html)

This bug affects 1 person

| Affects | | Status | Importance | Assigned to | Milestone |
| --- | --- | --- | --- | --- | --- |
|  | [Light Display Manager](https://bugs.launchpad.net/lightdm) | Fix Released | High | [Robert Ancell](https://launchpad.net/~robert-ancell) |  |
|  | [lightdm (Debian)](https://bugs.launchpad.net/debian/%2Bsource/lightdm "Latest release: 1.32.0-6, uploaded to main on 2024-06-22 04:32:58.644021+00:00 by Debian Xfce Maintainers (debian-xfce), maintained by Debian Xfce Maintainers (debian-xfce)") | Fix Released | Unknown | [debbugs #658678](https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=658678) |  |
|  | [lightdm (Ubuntu)](https://bugs.launchpad.net/ubuntu/%2Bsource/lightdm "Latest release: 1.32.0-6ubuntu2, uploaded to universe on 2025-01-07 18:26:10.774357+00:00 by Simon Quigley (tsimonq2), maintained by Ubuntu Developers (ubuntu-devel-discuss-lists)") | Fix Released | High | [Robert Ancell](https://launchpad.net/~robert-ancell) |  |
|  | [Oneiric](https://bugs.launchpad.net/ubuntu/oneiric/%2Bsource/lightdm) | Fix Released | High | [Marc Deslauriers](https://launchpad.net/~mdeslaur) |  |
|  | [Precise](https://bugs.launchpad.net/ubuntu/precise/%2Bsource/lightdm) | Fix Released | High | [Robert Ancell](https://launchpad.net/~robert-ancell) |  |

### Bug Description

affects lightdm

 affects debian

 security yes

 summary "lightdm leaks FDs to child processes"

 done

tag 658678 security

thanks

On dim., 2012-02-05 at 00:27 -0500, Austin Clements wrote:

> Package: lightdm

> Version: 1.0.6-3

> Severity: normal

>

> Dear Maintainer,

>

> lightdm appears to leak several file descriptors to the child process

> it creates for the session, which propagate to nearly every process

> running in an interactive session.

>

> For example, running ls -l /proc/self/fd from a terminal in X yields

>

> lrwx------ 1 amdragon amdragon 64 Feb 4 23:52 0 -> /dev/pts/15

> lrwx------ 1 amdragon amdragon 64 Feb 4 23:52 1 -> /dev/pts/15

> lr-x------ 1 amdragon amdragon 64 Feb 4 23:52 13 -> pipe:[10098]

> l-wx------ 1 amdragon amdragon 64 Feb 4 23:52 14 -> pipe:[10098]

> lr-x------ 1 amdragon amdragon 64 Feb 4 23:52 15 -> pipe:[10099]

> l-wx------ 1 amdragon amdragon 64 Feb 4 23:52 16 -> pipe:[10099]

> lrwx------ 1 amdragon amdragon 64 Feb 4 23:52 2 -> /dev/pts/15

> lr-x------ 1 amdragon amdragon 64 Feb 4 23:52 3 -> /proc/27874/fd/

> lr-x------ 1 amdragon amdragon 64 Feb 4 23:52 4 -> pipe:[9306]

> l-wx------ 1 amdragon amdragon 64 Feb 4 23:52 5 -> pipe:[9306]

> l-wx------ 1 amdragon amdragon 64 Feb 4 23:52 6

> -> /var/log/lightdm/lightdm.log

>

> FDs 4 through 16 were inherited from the lightdm process, as can be

> seen from its open FDs,

>

> $ sudo ls -l /proc/`pidof lightdm`/fd

> total 0

> lrwx------ 1 root root 64 Feb 4 23:54 0 -> /dev/null

> lrwx------ 1 root root 64 Feb 4 23:54 1 -> /dev/null

> lr-x------ 1 root root 64 Feb 4 23:54 10 -> pipe:[9315]

> l-wx------ 1 root root 64 Feb 4 23:54 11 -> pipe:[9315]

> lrwx------ 1 root root 64 Feb 4 23:54 12 -> socket:[10302]

> lr-x------ 1 root root 64 Feb 4 23:54 13 -> pipe:[10098]

> l-wx------ 1 root root 64 Feb 4 23:54 14 -> pipe:[10098]

> lr-x------ 1 root root 64 Feb 4 23:54 15 -> pipe:[10099]

> l-wx------ 1 root root 64 Feb 4 23:54 16 -> pipe:[10099]

> lrwx------ 1 root root 64 Feb 4 23:54 17 -> socket:[10101]

> lrwx------ 1 root root 64 Feb 4 23:54 2 -> /dev/null

> lrwx------ 1 root root 64 Feb 4 23:54 3 -> anon\_inode:[eventfd]

> lr-x------ 1 root root 64 Feb 4 23:54 4 -> pipe:[9306]

> l-wx------ 1 root root 64 Feb 4 23:54 5 -> pipe:[9306]

> l-wx------ 1 root root 64 Feb 4 23:54 6

> -> /var/log/lightdm/lightdm.log

> lrwx------ 1 root root 64 Feb 4 23:54 7 -> anon\_inode:[eventfd]

> lrwx------ 1 root root 64 Feb 4 23:54 8 -> socket:[8076]

> lrwx------ 1 root root 64 Feb 4 23:54 9 -> anon\_inode:[eventfd]

>

> FD 6 is particularly worrisome, as it allows any process to write to

> the root-owned lightdm log.

>

> It might be relevant that I use an .xsession script and Xmonad with no

> desktop environment.

Yep, you seem to be right. I don't inherit them in all my processes, but

indeed xfce4-session has them. Forwarding to upstream and tagging

security.

I'm not completely sure what are the security impact right now as I

don't exactly know what the relevant “shared” fd except the lightdm.log.

There's one where the pipe is opened by Xorg too but that might be

normal.

Regards,

--

Yves-Alexis

Tags:

[patch](/ubuntu/%2Bsource/lightdm/%2Bbugs?field.tag=patch)

## Related branches

[lp:ubuntu/oneiric-security/lightdm](https://code.launchpad.net/~ubuntu-branches/ubuntu/oneiric/lightdm/oneiric-security)

[lp:ubuntu/oneiric-updates/lightdm](https://code.launchpad.net/~ubuntu-branches/ubuntu/oneiric/lightdm/oneiric-updates)

[lp:ubuntu/precise/lightdm](https://code.launchpad.net/~ubuntu-branches/ubuntu/precise/lightdm/precise)

[Yves-Alexis Perez (corsac)](https://launchpad.net/~corsac)
on 2012-02-06

| **affects**: | debian → lightdm (Debian) |
| --- | --- |
| Changed in lightdm (Debian): | |
| **importance**: | Undecided → Unknown |
| **status**: | New → Unknown |

[Robert Ancell (robert-ancell)](https://launchpad.net/~robert-ancell)
on 2012-02-06

| Changed in lightdm: | |
| --- | --- |
| **status**: | New → Triaged |
| **importance**: | Undecided → High |

[Bug Watch Updater (bug-watch-updater)](https://launchpad.net/~bug-watch-updater)
on 2012-02-06

| Changed in lightdm (Debian): | |
| --- | --- |
| **status**: | Unknown → Confirmed |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Yves-Alexis Perez (corsac)](https://launchpad.net/~corsac) wrote on 2012-02-10: |  |  | [#1](/ubuntu/%2Bsource/lightdm/%2Bbug/927060/comments/1) |
| --- | --- | --- | --- |

Any news on this?

Any news on this?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Robert Ancell (robert-ancell)](https://launchpad.net/~robert-ancell) wrote on 2012-02-15: |  |  | [#2](/ubuntu/%2Bsource/lightdm/%2Bbug/927060/comments/2) |
| --- | --- | --- | --- |

No change yet...

No change yet...

[Robert Ancell (robert-ancell)](https://launchpad.net/~robert-ancell)
on 2012-03-02

| Changed in lightdm: | |
| --- | --- |
| **assignee**: | nobody → Robert Ancell (robert-ancell) |
| **status**: | Triaged → In Progress |
| Changed in lightdm (Ubuntu): | |
| **status**: | New → In Progress |
| **importance**: | Undecided → High |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Robert Ancell (robert-ancell)](https://launchpad.net/~robert-ancell) wrote on 2012-03-02: |  |  | [#3](/ubuntu/%2Bsource/lightdm/%2Bbug/927060/comments/3) |
| --- | --- | --- | --- |

* [Fix for lightdm-1.0 branch.](https://bugs.launchpad.net/ubuntu/%2Bsource/lightdm/%2Bbug/927060/%2Battachment/2800010/%2Bfiles/lightdm-1.0-bug-927060-dont-leak-fds.patch)
  [Edit](/ubuntu/%2Bsource/lightdm/%2Bbug/927060/%2Battachment/2800010)
  (6.7 KiB,
  text/plain)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Robert Ancell (robert-ancell)](https://launchpad.net/~robert-ancell) wrote on 2012-03-02: |  |  | [#4](/ubuntu/%2Bsource/lightdm/%2Bbug/927060/comments/4) |
| --- | --- | --- | --- |

* [Fix for lightdm trunk.](https://bugs.launchpad.net/ubuntu/%2Bsource/lightdm/%2Bbug/927060/%2Battachment/2800012/%2Bfiles/lightdm-trunk-bug-927060-dont-leak-fds.patch)
  [Edit](/ubuntu/%2Bsource/lightdm/%2Bbug/927060/%2Battachment/2800012)
  (12.0 KiB,
  text/plain)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Robert Ancell (robert-ancell)](https://launchpad.net/~robert-ancell) wrote on 2012-03-02: |  |  | [#5](/ubuntu/%2Bsource/lightdm/%2Bbug/927060/comments/5) |
| --- | --- | --- | --- |

I've identified and fixed the leaks for both the trunk and 1.0. These patches are not pushed anywhere except this bug and when committed will be immediately released in lightdm 1.0.8 and 1.1.4. Both patches contain regression tests to check no unknown file descriptors are passed to a session after a login.

The leaking file descriptors (7) were:

- The lightdm daemon log (write)

- The signal pipe used in the daemon to send signal notifications into the GLib main loop (read/write) - could potentially stop the daemon by simulating a SIGTERM.

- Two pipes used by the greeter to communicate with the daemon (both read/write). This pipe should be unused by this point (it would have been used to negotiate the session) but I haven't investigated if you could do any damage with it at this point.

These patches also need to be updated to check what happens when an XDMCP/VNC server is running as those fds might also leak.

I'm asking the Canonical security team to help with the timing of these releases; Yves-Alexis, Guido, let me know what you guys need there too.

I've identified and fixed the leaks for both the trunk and 1.0. These patches are not pushed anywhere except this bug and when committed will be immediately released in lightdm 1.0.8 and 1.1.4. Both patches contain regression tests to check no unknown file descriptors are passed to a session after a login.
The leaking file descriptors (7) were:
- The lightdm daemon log (write)
- The signal pipe used in the daemon to send signal notifications into the GLib main loop (read/write) - could potentially stop the daemon by simulating a SIGTERM.
- Two pipes used by the greeter to communicate with the daemon (both read/write). This pipe should be unused by this point (it would have been used to negotiate the session) but I haven't investigated if you could do any damage with it at this point.
These patches also need to be updated to check what happens when an XDMCP/VNC server is running as those fds might also leak.
I'm asking the Canonical security team to help with the timing of these releases; Yves-Alexis, Guido, let me know what you guys need there too.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Robert Ancell (robert-ancell)](https://launchpad.net/~robert-ancell) wrote on 2012-03-02: |  |  | [#6](/ubuntu/%2Bsource/lightdm/%2Bbug/927060/comments/6) |
| --- | --- | --- | --- |

* [lightdm-trunk-bug-927060-dont-leak-fds.patch](https://bugs.launchpad.net/ubuntu/%2Bsource/lightdm/%2Bbug/927060/%2Battachment/2800022/%2Bfiles/lightdm-trunk-bug-927060-dont-leak-fds.patch)
  [Edit](/ubuntu/%2Bsource/lightdm/%2Bbug/927060/%2Battachment/2800022)
  (16.7 KiB,
  text/plain)

Updated patch with regression tests that confirm XDMCP and VNC sessions don't have the socket file descriptors leaked to them.

Updated patch with regression tests that confirm XDMCP and VNC sessions don't have the socket file descriptors leaked to them.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Yves-Alexis Perez (corsac)](https://launchpad.net/~corsac) wrote on 2012-03-02: |  |  | [#7](/ubuntu/%2Bsource/lightdm/%2Bbug/927060/comments/7) |
| --- | --- | --- | --- |

I'm ok for a release (as it's not in stable it's ok to push a new upstream release), I can upload a 1.0.8 to Debian today.

I'm ok for a release (as it's not in stable it's ok to push a new upstream release), I can upload a 1.0.8 to Debian today.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Guido Berhoerster (gber)](https://launchpad.net/~gber) wrote on 2012-03-02: |  |  | [#8](/ubuntu/%2Bsource/lightdm/%2Bbug/927060/comments/8) |
| --- | --- | --- | --- |

That'd be ok from my side as well, if you plan to delay the release please let me know the date.

That'd be ok from my side as well, if you plan to delay the release please let me know the date.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Yves-Alexis Perez (corsac)](https://launchpad.net/~corsac) wrote on 2012-03-03: |  |  | [#9](/ubuntu/%2Bsource/lightdm/%2Bbug/927060/comments/9) |
| --- | --- | --- | --- |

Any news for a release? (I can prepare packages with patches since the bug is public anyway, but if you prefer coordinated release it'd be nice to do it faster than slower :)

Any news for a release? (I can prepare packages with patches since the bug is public anyway, but if you prefer coordinated release it'd be nice to do it faster than slower :)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Yves-Alexis Perez (corsac)](https://launchpad.net/~corsac) wrote on 2012-03-04: |  |  | [#10](/ubuntu/%2Bsource/lightdm/%2Bbug/927060/comments/10) |
| --- | --- | --- | --- |

Ping?

Ping?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Robert Ancell (robert-ancell)](https://launchpad.net/~robert-ancell) wrote on 2012-03-05: |  |  | [#11](/ubuntu/%2Bsource/lightdm/%2Bbug/927060/comments/11) |
| --- | --- | --- | --- |

OK, security team says good to go. I've pushed these changes the the lightdm bzr branches and you guys can release whenever you like.

OK, security team says good to go. I've pushed these changes the the lightdm bzr branches and you guys can release whenever you like.

[Marc Deslauriers (mdeslaur)](https://launchpad.net/~mdeslaur)
on 2012-03-05

| Changed in lightdm (Ubuntu Precise): | |
| --- | --- |
| **assignee**: | nobody → Robert Ancell (robert-ancell) |
| Changed in lightdm (Ubuntu Oneiric): | |
| **assignee**: | nobody → Marc Deslauriers (mdeslaur) |
| **status**: | New → In Progress |
| **importance**: | Undecided → High |

[Robert Ancell (robert-ancell)](https://launchpad.net/~robert-ancell)
on 2012-03-05

| Changed in lightdm: | |
| --- | --- |
| **status**: | In Progress → Fix Released |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Guido Berhoerster (gber)](https://launchpad.net/~gber) wrote on 2012-03-05: |  |  | [#12](/ubuntu/%2Bsource/lightdm/%2Bbug/927060/comments/12) |
| --- | --- | --- | --- |

Could you make this bug publicly accessible and obtain a CVE for it?

Could you make this bug publicly accessible and obtain a CVE for it?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Martin Pitt (pitti)](https://launchpad.net/~pitti) wrote on 2012-03-05: |  |  | [#13](/ubuntu/%2Bsource/lightdm/%2Bbug/927060/comments/13) |
| --- | --- | --- | --- |

The Debian bug is public, so I see little reason to keep this private. Making public.

The Debian bug is public, so I see little reason to keep this private. Making public.

| **visibility**: | private → public |
| --- | --- |

[Ubuntu Foundations Team Bug Bot (crichton)](https://launchpad.net/~crichton)
on 2012-03-05

| **tags**: | added: patch |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Marc Deslauriers (mdeslaur)](https://launchpad.net/~mdeslaur) wrote on 2012-03-05: |  |  | [#14](/ubuntu/%2Bsource/lightdm/%2Bbug/927060/comments/14) |
| --- | --- | --- | --- |

CVE requested: <http://www.openwall.com/lists/oss-security/2012/03/05/13>

CVE requested: http://www.openwall.com/lists/oss-security/2012/03/05/13

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Launchpad Janitor (janitor)](https://launchpad.net/~janitor) wrote on 2012-03-05: |  |  | [#15](/ubuntu/%2Bsource/lightdm/%2Bbug/927060/comments/15) |
| --- | --- | --- | --- |

This bug was fixed in the package lightdm - 1.0.6-0ubuntu1.4

---------------

lightdm (1.0.6-0ubuntu1.4) oneiric-security; urgency=low

\* SECURITY UPDATE: file descriptor leak to child processes (LP: [#927060](/bugs/927060))

    - debian/patches/12\_dont-leak-fds.patch: clean up file descriptors in

      src/\*.c, add tests to tests/\*.

    - CVE number pending

 -- Marc Deslauriers <email address hidden> Sun, 04 Mar 2012 19:29:04 -0500

This bug was fixed in the package lightdm - 1.0.6-0ubuntu1.4
---------------
lightdm (1.0.6-0ubuntu1.4) oneiric-security; urgency=low
\* SECURITY UPDATE: file descriptor leak to child processes (LP: #927060)
- debian/patches/12\_dont-leak-fds.patch: clean up file descriptors in
src/\*.c, add tests to tests/\*.
- CVE number pending
-- Marc Deslauriers <marc.deslauriers@ubuntu.com> Sun, 04 Mar 2012 19:29:04 -0500

| Changed in lightdm (Ubuntu Oneiric): | |
| --- | --- |
| **status**: | In Progress → Fix Released |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Launchpad Janitor (janitor)](https://launchpad.net/~janitor) wrote on 2012-03-06: |  |  | [#16](/ubuntu/%2Bsource/lightdm/%2Bbug/927060/comments/16) |
| --- | --- | --- | --- |

This bug was fixed in the package lightdm - 1.1.6-0ubuntu1

---------------

lightdm (1.1.6-0ubuntu1) precise; urgency=low

\* Upload the new version to Ubuntu

  \* Reshuffle a bit the vcs to use merge upstream correctly

[ Robert Ancell ]

  \* New upstream release:

    - Fix session wrapper working the same as it did in 1.1.3 (lp: [#944736](/bugs/944736))

    - Stop file descriptors leaking into the session processes (lp: [#927060](/bugs/927060))

[ Martin Pitt ]

  \* debian/control: Fix liblightdm-gobject-1-doc architecture to "all".

 -- Sebastien Bacher <email address hidden> Tue, 06 Mar 2012 13:45:29 +0100

This bug was fixed in the package lightdm - 1.1.6-0ubuntu1
---------------
lightdm (1.1.6-0ubuntu1) precise; urgency=low
\* Upload the new version to Ubuntu
\* Reshuffle a bit the vcs to use merge upstream correctly
[ Robert Ancell ]
\* New upstream release:
- Fix session wrapper working the same as it did in 1.1.3 (lp: #944736)
- Stop file descriptors leaking into the session processes (lp: #927060)
[ Martin Pitt ]
\* debian/control: Fix liblightdm-gobject-1-doc architecture to "all".
-- Sebastien Bacher <seb128@ubuntu.com> Tue, 06 Mar 2012 13:45:29 +0100

| Changed in lightdm (Ubuntu Precise): | |
| --- | --- |
| **status**: | In Progress → Fix Released |

[Bug Watch Updater (bug-watch-updater)](https://launchpad.net/~bug-watch-updater)
on 2012-03-12

| Changed in lightdm (Debian): | |
| --- | --- |
| **status**: | Confirmed → Fix Released |

[See full activity log](https://bugs.launchpad.net/ubuntu/%2Bsource/lightdm/%2Bbug/927060/%2Bactivity)

To post a comment you must [log in](%2Blogin?comments=all).

* [Report a bug](/ubuntu/%2Bsource/lightdm/%2Bfilebug)

This report contains
**Public Security**
information

Everyone can see this security related information.

You are
[not directly subscribed to this bug's notifications.](/ubuntu/%2Bsource/lightdm/%2Bbug/927060/%2Bsubscribe)

Subscribing...

* [Edit bug mail](https://bugs.launchpad.net/ubuntu/%2Bsource/lightdm/%2Bbug/927060/%2Bsubscriptions "View and change your subscriptions to this bug")

## Other bug subscribers

[Subscribe someone else](https://bugs.launchpad.net/ubuntu/%2Bsource/lightdm/%2Bbug/927060/%2Baddsubscriber "Launchpad will email that person whenever this bugs changes")

## Patches

* [Fix for lightdm-1.0 branch.](https://bugs.launchpad.net/ubuntu/%2Bsource/lightdm/%2Bbug/927060/%2Battachment/2800010/%2Bfiles/lightdm-1.0-bug-927060-dont-leak-fds.patch)
  [Edit](/ubuntu/%2Bsource/lightdm/%2Bbug/927060/%2Battachment/2800010 "Change patch details")
* [Fix for lightdm trunk.](https://bugs.launchpad.net/ubuntu/%2Bsource/lightdm/%2Bbug/927060/%2Battachment/2800012/%2Bfiles/lightdm-trunk-bug-927060-dont-leak-fds.patch)
  [Edit](/ubuntu/%2Bsource/lightdm/%2Bbug/927060/%2Battachment/2800012 "Change patch details")
* [lightdm-trunk-bug-927060-dont-leak-fds.patch](https://bugs.launchpad.net/ubuntu/%2Bsource/lightdm/%2Bbug/927060/%2Battachment/2800022/%2Bfiles/lightdm-trunk-bug-927060-dont-leak-fds.patch)
  [Edit](/ubuntu/%2Bsource/lightdm/%2Bbug/927060/%2Battachment/2800022 "Change patch details")

* [Add patch](/ubuntu/%2Bsource/lightdm/%2Bbug/927060/%2Baddcomment?field.patch=on)

## Remote bug watches

* [debbugs #658678](https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=658678)

  [done normal security]
  [Edit](/bugs/927060/%2Bwatch/95854 "Change watch details")

Bug watches keep track of this bug in other bug trackers.

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
4d55102
([Get the code!](https://dev.launchpad.net/))



=== Content from seclists.org_2636b740_20250125_132246.html ===

[![](/shared/images/nst-icons.svg#menu)](#menu)
![](/shared/images/nst-icons.svg#close)
[![Home page logo](/images/sitelogo.png)](/)
[Nmap.org](https://nmap.org/)
[Npcap.com](https://npcap.com/)
[Seclists.org](https://seclists.org/)
[Sectools.org](https://sectools.org)
[Insecure.org](https://insecure.org/)

![](/shared/images/nst-icons.svg#search)

[![oss-sec logo](/images/oss-sec-logo.png)](/oss-sec/)
## [oss-sec](/oss-sec/) mailing list archives

[![Previous](/images/left-icon-16x16.png)](565)
[By Date](date.html#566)
[![Next](/images/right-icon-16x16.png)](567)

[![Previous](/images/left-icon-16x16.png)](557)
[By Thread](index.html#566)
[![Next](/images/right-icon-16x16.png)](558)

![](/shared/images/nst-icons.svg#search)

# Re: CVE Request: lightdm

---

*From*: Kurt Seifried <kseifried () redhat com>

*Date*: Mon, 05 Mar 2012 15:07:19 -0700

---

```
On 03/05/2012 05:54 AM, Marc Deslauriers wrote:

```
> ```
> Could we please get a CVE assigned to the following issue:
>
> lightdm leaks file descriptors to child processes. A local attacker can use this to bypass
> intended permissions and write to the log file, cause a denial of service, or possibly
> have another unknown impact.
>
> Bug:
> [https://bugs.launchpad.net/ubuntu/+source/lightdm/+bug/927060](https://bugs.launchpad.net/ubuntu/%2Bsource/lightdm/%2Bbug/927060)
> <http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=658678>
>
> Thanks,
>
> Marc.
>
>
>
> ```

```

Please use CVE-2012-1111 for this issue.

--
Kurt Seifried Red Hat Security Response Team (SRT)

```

---

[![Previous](/images/left-icon-16x16.png)](565)
[By Date](date.html#566)
[![Next](/images/right-icon-16x16.png)](567)

[![Previous](/images/left-icon-16x16.png)](557)
[By Thread](index.html#566)
[![Next](/images/right-icon-16x16.png)](558)

### Current thread:

* [CVE Request: lightdm](557) *Marc Deslauriers (Mar 05)*
  + **Re: CVE Request: lightdm** *Kurt Seifried (Mar 05)*

![](/shared/images/nst-icons.svg#search)

## [Nmap Security Scanner](https://nmap.org/)

* [Ref Guide](https://nmap.org/book/man.html)* [Install Guide](https://nmap.org/book/install.html)* [Docs](https://nmap.org/docs.html)* [Download](https://nmap.org/download.html)* [Nmap OEM](https://nmap.org/oem/)

## [Npcap packet capture](https://npcap.com/)

* [User's Guide](https://npcap.com/guide/)* [API docs](https://npcap.com/guide/npcap-devguide.html#npcap-api)* [Download](https://npcap.com/#download)* [Npcap OEM](https://npcap.com/oem/)

## [Security Lists](https://seclists.org/)

* [Nmap Announce](https://seclists.org/nmap-announce/)* [Nmap Dev](https://seclists.org/nmap-dev/)* [Full Disclosure](https://seclists.org/fulldisclosure/)* [Open Source Security](https://seclists.org/oss-sec/)* [BreachExchange](https://seclists.org/dataloss/)

## [Security Tools](https://sectools.org)

* [Vuln scanners](https://sectools.org/tag/vuln-scanners/)* [Password audit](https://sectools.org/tag/pass-audit/)* [Web scanners](https://sectools.org/tag/web-scanners/)* [Wireless](https://sectools.org/tag/wireless/)* [Exploitation](https://sectools.org/tag/sploits/)

## [About](https://insecure.org/)

* [About/Contact](https://insecure.org/fyodor/)* [Privacy](https://insecure.org/privacy.html)* [Advertising](https://insecure.org/advertising.html)* [Nmap Public Source License](https://nmap.org/npsl/)

[![](/shared/images/nst-icons.svg#twitter)](https://twitter.com/nmap "Visit us on Twitter")
[![](/shared/images/nst-icons.svg#facebook)](https://facebook.com/nmap "Visit us on Facebook")
[![](/shared/images/nst-icons.svg#github)](https://github.com/nmap/ "Visit us on Github")
[![](/shared/images/nst-icons.svg#reddit)](https://reddit.com/r/nmap/ "Discuss Nmap on Reddit")



=== Content from bugs.launchpad.net_e5c83272_20250125_132247.html ===

[Log in / Register](https://bugs.launchpad.net/ubuntu/%2Bsource/lightdm/%2Bbug/927060/%2Blogin)

[![](https://launchpadlibrarian.net/606381979/CoF%2064px.png)](https://launchpad.net/ubuntu)

## [Ubuntu](https://launchpad.net/ubuntu)[lightdm package](https://launchpad.net/ubuntu/%2Bsource/lightdm)

* [Overview](https://launchpad.net/ubuntu/%2Bsource/lightdm)
* [Code](https://code.launchpad.net/ubuntu/%2Bsource/lightdm)
* [Bugs](https://bugs.launchpad.net/ubuntu/%2Bsource/lightdm)
* Blueprints
* [Translations](https://translations.launchpad.net/ubuntu/%2Bsource/lightdm)
* [Answers](https://answers.launchpad.net/ubuntu/%2Bsource/lightdm)

# lightdm leaks FDs to child processes

Bug #927060 reported by
[Yves-Alexis Perez](https://launchpad.net/~corsac)
on 2012-02-05

[266](/%2Bhelp-bugs/bug-heat.html)

This bug affects 1 person

| Affects | | Status | Importance | Assigned to | Milestone |
| --- | --- | --- | --- | --- | --- |
|  | [Light Display Manager](https://bugs.launchpad.net/lightdm) | Fix Released | High | [Robert Ancell](https://launchpad.net/~robert-ancell) |  |
|  | [lightdm (Debian)](https://bugs.launchpad.net/debian/%2Bsource/lightdm "Latest release: 1.32.0-6, uploaded to main on 2024-06-22 04:32:58.644021+00:00 by Debian Xfce Maintainers (debian-xfce), maintained by Debian Xfce Maintainers (debian-xfce)") | Fix Released | Unknown | [debbugs #658678](https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=658678) |  |
|  | [lightdm (Ubuntu)](https://bugs.launchpad.net/ubuntu/%2Bsource/lightdm "Latest release: 1.32.0-6ubuntu2, uploaded to universe on 2025-01-07 18:26:10.774357+00:00 by Simon Quigley (tsimonq2), maintained by Ubuntu Developers (ubuntu-devel-discuss-lists)") | Fix Released | High | [Robert Ancell](https://launchpad.net/~robert-ancell) |  |
|  | [Oneiric](https://bugs.launchpad.net/ubuntu/oneiric/%2Bsource/lightdm) | Fix Released | High | [Marc Deslauriers](https://launchpad.net/~mdeslaur) |  |
|  | [Precise](https://bugs.launchpad.net/ubuntu/precise/%2Bsource/lightdm) | Fix Released | High | [Robert Ancell](https://launchpad.net/~robert-ancell) |  |

### Bug Description

affects lightdm

 affects debian

 security yes

 summary "lightdm leaks FDs to child processes"

 done

tag 658678 security

thanks

On dim., 2012-02-05 at 00:27 -0500, Austin Clements wrote:

> Package: lightdm

> Version: 1.0.6-3

> Severity: normal

>

> Dear Maintainer,

>

> lightdm appears to leak several file descriptors to the child process

> it creates for the session, which propagate to nearly every process

> running in an interactive session.

>

> For example, running ls -l /proc/self/fd from a terminal in X yields

>

> lrwx------ 1 amdragon amdragon 64 Feb 4 23:52 0 -> /dev/pts/15

> lrwx------ 1 amdragon amdragon 64 Feb 4 23:52 1 -> /dev/pts/15

> lr-x------ 1 amdragon amdragon 64 Feb 4 23:52 13 -> pipe:[10098]

> l-wx------ 1 amdragon amdragon 64 Feb 4 23:52 14 -> pipe:[10098]

> lr-x------ 1 amdragon amdragon 64 Feb 4 23:52 15 -> pipe:[10099]

> l-wx------ 1 amdragon amdragon 64 Feb 4 23:52 16 -> pipe:[10099]

> lrwx------ 1 amdragon amdragon 64 Feb 4 23:52 2 -> /dev/pts/15

> lr-x------ 1 amdragon amdragon 64 Feb 4 23:52 3 -> /proc/27874/fd/

> lr-x------ 1 amdragon amdragon 64 Feb 4 23:52 4 -> pipe:[9306]

> l-wx------ 1 amdragon amdragon 64 Feb 4 23:52 5 -> pipe:[9306]

> l-wx------ 1 amdragon amdragon 64 Feb 4 23:52 6

> -> /var/log/lightdm/lightdm.log

>

> FDs 4 through 16 were inherited from the lightdm process, as can be

> seen from its open FDs,

>

> $ sudo ls -l /proc/`pidof lightdm`/fd

> total 0

> lrwx------ 1 root root 64 Feb 4 23:54 0 -> /dev/null

> lrwx------ 1 root root 64 Feb 4 23:54 1 -> /dev/null

> lr-x------ 1 root root 64 Feb 4 23:54 10 -> pipe:[9315]

> l-wx------ 1 root root 64 Feb 4 23:54 11 -> pipe:[9315]

> lrwx------ 1 root root 64 Feb 4 23:54 12 -> socket:[10302]

> lr-x------ 1 root root 64 Feb 4 23:54 13 -> pipe:[10098]

> l-wx------ 1 root root 64 Feb 4 23:54 14 -> pipe:[10098]

> lr-x------ 1 root root 64 Feb 4 23:54 15 -> pipe:[10099]

> l-wx------ 1 root root 64 Feb 4 23:54 16 -> pipe:[10099]

> lrwx------ 1 root root 64 Feb 4 23:54 17 -> socket:[10101]

> lrwx------ 1 root root 64 Feb 4 23:54 2 -> /dev/null

> lrwx------ 1 root root 64 Feb 4 23:54 3 -> anon\_inode:[eventfd]

> lr-x------ 1 root root 64 Feb 4 23:54 4 -> pipe:[9306]

> l-wx------ 1 root root 64 Feb 4 23:54 5 -> pipe:[9306]

> l-wx------ 1 root root 64 Feb 4 23:54 6

> -> /var/log/lightdm/lightdm.log

> lrwx------ 1 root root 64 Feb 4 23:54 7 -> anon\_inode:[eventfd]

> lrwx------ 1 root root 64 Feb 4 23:54 8 -> socket:[8076]

> lrwx------ 1 root root 64 Feb 4 23:54 9 -> anon\_inode:[eventfd]

>

> FD 6 is particularly worrisome, as it allows any process to write to

> the root-owned lightdm log.

>

> It might be relevant that I use an .xsession script and Xmonad with no

> desktop environment.

Yep, you seem to be right. I don't inherit them in all my processes, but

indeed xfce4-session has them. Forwarding to upstream and tagging

security.

I'm not completely sure what are the security impact right now as I

don't exactly know what the relevant “shared” fd except the lightdm.log.

There's one where the pipe is opened by Xorg too but that might be

normal.

Regards,

--

Yves-Alexis

Tags:

[patch](/ubuntu/%2Bsource/lightdm/%2Bbugs?field.tag=patch)

## Related branches

[lp:ubuntu/oneiric-security/lightdm](https://code.launchpad.net/~ubuntu-branches/ubuntu/oneiric/lightdm/oneiric-security)

[lp:ubuntu/oneiric-updates/lightdm](https://code.launchpad.net/~ubuntu-branches/ubuntu/oneiric/lightdm/oneiric-updates)

[lp:ubuntu/precise/lightdm](https://code.launchpad.net/~ubuntu-branches/ubuntu/precise/lightdm/precise)

[Yves-Alexis Perez (corsac)](https://launchpad.net/~corsac)
on 2012-02-06

| **affects**: | debian → lightdm (Debian) |
| --- | --- |
| Changed in lightdm (Debian): | |
| **importance**: | Undecided → Unknown |
| **status**: | New → Unknown |

[Robert Ancell (robert-ancell)](https://launchpad.net/~robert-ancell)
on 2012-02-06

| Changed in lightdm: | |
| --- | --- |
| **status**: | New → Triaged |
| **importance**: | Undecided → High |

[Bug Watch Updater (bug-watch-updater)](https://launchpad.net/~bug-watch-updater)
on 2012-02-06

| Changed in lightdm (Debian): | |
| --- | --- |
| **status**: | Unknown → Confirmed |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Yves-Alexis Perez (corsac)](https://launchpad.net/~corsac) wrote on 2012-02-10: |  |  | [#1](/ubuntu/%2Bsource/lightdm/%2Bbug/927060/comments/1) |
| --- | --- | --- | --- |

Any news on this?

Any news on this?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Robert Ancell (robert-ancell)](https://launchpad.net/~robert-ancell) wrote on 2012-02-15: |  |  | [#2](/ubuntu/%2Bsource/lightdm/%2Bbug/927060/comments/2) |
| --- | --- | --- | --- |

No change yet...

No change yet...

[Robert Ancell (robert-ancell)](https://launchpad.net/~robert-ancell)
on 2012-03-02

| Changed in lightdm: | |
| --- | --- |
| **assignee**: | nobody → Robert Ancell (robert-ancell) |
| **status**: | Triaged → In Progress |
| Changed in lightdm (Ubuntu): | |
| **status**: | New → In Progress |
| **importance**: | Undecided → High |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Robert Ancell (robert-ancell)](https://launchpad.net/~robert-ancell) wrote on 2012-03-02: |  |  | [#3](/ubuntu/%2Bsource/lightdm/%2Bbug/927060/comments/3) |
| --- | --- | --- | --- |

* [Fix for lightdm-1.0 branch.](https://bugs.launchpad.net/ubuntu/%2Bsource/lightdm/%2Bbug/927060/%2Battachment/2800010/%2Bfiles/lightdm-1.0-bug-927060-dont-leak-fds.patch)
  [Edit](/ubuntu/%2Bsource/lightdm/%2Bbug/927060/%2Battachment/2800010)
  (6.7 KiB,
  text/plain)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Robert Ancell (robert-ancell)](https://launchpad.net/~robert-ancell) wrote on 2012-03-02: |  |  | [#4](/ubuntu/%2Bsource/lightdm/%2Bbug/927060/comments/4) |
| --- | --- | --- | --- |

* [Fix for lightdm trunk.](https://bugs.launchpad.net/ubuntu/%2Bsource/lightdm/%2Bbug/927060/%2Battachment/2800012/%2Bfiles/lightdm-trunk-bug-927060-dont-leak-fds.patch)
  [Edit](/ubuntu/%2Bsource/lightdm/%2Bbug/927060/%2Battachment/2800012)
  (12.0 KiB,
  text/plain)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Robert Ancell (robert-ancell)](https://launchpad.net/~robert-ancell) wrote on 2012-03-02: |  |  | [#5](/ubuntu/%2Bsource/lightdm/%2Bbug/927060/comments/5) |
| --- | --- | --- | --- |

I've identified and fixed the leaks for both the trunk and 1.0. These patches are not pushed anywhere except this bug and when committed will be immediately released in lightdm 1.0.8 and 1.1.4. Both patches contain regression tests to check no unknown file descriptors are passed to a session after a login.

The leaking file descriptors (7) were:

- The lightdm daemon log (write)

- The signal pipe used in the daemon to send signal notifications into the GLib main loop (read/write) - could potentially stop the daemon by simulating a SIGTERM.

- Two pipes used by the greeter to communicate with the daemon (both read/write). This pipe should be unused by this point (it would have been used to negotiate the session) but I haven't investigated if you could do any damage with it at this point.

These patches also need to be updated to check what happens when an XDMCP/VNC server is running as those fds might also leak.

I'm asking the Canonical security team to help with the timing of these releases; Yves-Alexis, Guido, let me know what you guys need there too.

I've identified and fixed the leaks for both the trunk and 1.0. These patches are not pushed anywhere except this bug and when committed will be immediately released in lightdm 1.0.8 and 1.1.4. Both patches contain regression tests to check no unknown file descriptors are passed to a session after a login.
The leaking file descriptors (7) were:
- The lightdm daemon log (write)
- The signal pipe used in the daemon to send signal notifications into the GLib main loop (read/write) - could potentially stop the daemon by simulating a SIGTERM.
- Two pipes used by the greeter to communicate with the daemon (both read/write). This pipe should be unused by this point (it would have been used to negotiate the session) but I haven't investigated if you could do any damage with it at this point.
These patches also need to be updated to check what happens when an XDMCP/VNC server is running as those fds might also leak.
I'm asking the Canonical security team to help with the timing of these releases; Yves-Alexis, Guido, let me know what you guys need there too.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Robert Ancell (robert-ancell)](https://launchpad.net/~robert-ancell) wrote on 2012-03-02: |  |  | [#6](/ubuntu/%2Bsource/lightdm/%2Bbug/927060/comments/6) |
| --- | --- | --- | --- |

* [lightdm-trunk-bug-927060-dont-leak-fds.patch](https://bugs.launchpad.net/ubuntu/%2Bsource/lightdm/%2Bbug/927060/%2Battachment/2800022/%2Bfiles/lightdm-trunk-bug-927060-dont-leak-fds.patch)
  [Edit](/ubuntu/%2Bsource/lightdm/%2Bbug/927060/%2Battachment/2800022)
  (16.7 KiB,
  text/plain)

Updated patch with regression tests that confirm XDMCP and VNC sessions don't have the socket file descriptors leaked to them.

Updated patch with regression tests that confirm XDMCP and VNC sessions don't have the socket file descriptors leaked to them.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Yves-Alexis Perez (corsac)](https://launchpad.net/~corsac) wrote on 2012-03-02: |  |  | [#7](/ubuntu/%2Bsource/lightdm/%2Bbug/927060/comments/7) |
| --- | --- | --- | --- |

I'm ok for a release (as it's not in stable it's ok to push a new upstream release), I can upload a 1.0.8 to Debian today.

I'm ok for a release (as it's not in stable it's ok to push a new upstream release), I can upload a 1.0.8 to Debian today.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Guido Berhoerster (gber)](https://launchpad.net/~gber) wrote on 2012-03-02: |  |  | [#8](/ubuntu/%2Bsource/lightdm/%2Bbug/927060/comments/8) |
| --- | --- | --- | --- |

That'd be ok from my side as well, if you plan to delay the release please let me know the date.

That'd be ok from my side as well, if you plan to delay the release please let me know the date.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Yves-Alexis Perez (corsac)](https://launchpad.net/~corsac) wrote on 2012-03-03: |  |  | [#9](/ubuntu/%2Bsource/lightdm/%2Bbug/927060/comments/9) |
| --- | --- | --- | --- |

Any news for a release? (I can prepare packages with patches since the bug is public anyway, but if you prefer coordinated release it'd be nice to do it faster than slower :)

Any news for a release? (I can prepare packages with patches since the bug is public anyway, but if you prefer coordinated release it'd be nice to do it faster than slower :)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Yves-Alexis Perez (corsac)](https://launchpad.net/~corsac) wrote on 2012-03-04: |  |  | [#10](/ubuntu/%2Bsource/lightdm/%2Bbug/927060/comments/10) |
| --- | --- | --- | --- |

Ping?

Ping?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Robert Ancell (robert-ancell)](https://launchpad.net/~robert-ancell) wrote on 2012-03-05: |  |  | [#11](/ubuntu/%2Bsource/lightdm/%2Bbug/927060/comments/11) |
| --- | --- | --- | --- |

OK, security team says good to go. I've pushed these changes the the lightdm bzr branches and you guys can release whenever you like.

OK, security team says good to go. I've pushed these changes the the lightdm bzr branches and you guys can release whenever you like.

[Marc Deslauriers (mdeslaur)](https://launchpad.net/~mdeslaur)
on 2012-03-05

| Changed in lightdm (Ubuntu Precise): | |
| --- | --- |
| **assignee**: | nobody → Robert Ancell (robert-ancell) |
| Changed in lightdm (Ubuntu Oneiric): | |
| **assignee**: | nobody → Marc Deslauriers (mdeslaur) |
| **status**: | New → In Progress |
| **importance**: | Undecided → High |

[Robert Ancell (robert-ancell)](https://launchpad.net/~robert-ancell)
on 2012-03-05

| Changed in lightdm: | |
| --- | --- |
| **status**: | In Progress → Fix Released |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Guido Berhoerster (gber)](https://launchpad.net/~gber) wrote on 2012-03-05: |  |  | [#12](/ubuntu/%2Bsource/lightdm/%2Bbug/927060/comments/12) |
| --- | --- | --- | --- |

Could you make this bug publicly accessible and obtain a CVE for it?

Could you make this bug publicly accessible and obtain a CVE for it?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Martin Pitt (pitti)](https://launchpad.net/~pitti) wrote on 2012-03-05: |  |  | [#13](/ubuntu/%2Bsource/lightdm/%2Bbug/927060/comments/13) |
| --- | --- | --- | --- |

The Debian bug is public, so I see little reason to keep this private. Making public.

The Debian bug is public, so I see little reason to keep this private. Making public.

| **visibility**: | private → public |
| --- | --- |

[Ubuntu Foundations Team Bug Bot (crichton)](https://launchpad.net/~crichton)
on 2012-03-05

| **tags**: | added: patch |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Marc Deslauriers (mdeslaur)](https://launchpad.net/~mdeslaur) wrote on 2012-03-05: |  |  | [#14](/ubuntu/%2Bsource/lightdm/%2Bbug/927060/comments/14) |
| --- | --- | --- | --- |

CVE requested: <http://www.openwall.com/lists/oss-security/2012/03/05/13>

CVE requested: http://www.openwall.com/lists/oss-security/2012/03/05/13

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Launchpad Janitor (janitor)](https://launchpad.net/~janitor) wrote on 2012-03-05: |  |  | [#15](/ubuntu/%2Bsource/lightdm/%2Bbug/927060/comments/15) |
| --- | --- | --- | --- |

This bug was fixed in the package lightdm - 1.0.6-0ubuntu1.4

---------------

lightdm (1.0.6-0ubuntu1.4) oneiric-security; urgency=low

\* SECURITY UPDATE: file descriptor leak to child processes (LP: [#927060](/bugs/927060))

    - debian/patches/12\_dont-leak-fds.patch: clean up file descriptors in

      src/\*.c, add tests to tests/\*.

    - CVE number pending

 -- Marc Deslauriers <email address hidden> Sun, 04 Mar 2012 19:29:04 -0500

This bug was fixed in the package lightdm - 1.0.6-0ubuntu1.4
---------------
lightdm (1.0.6-0ubuntu1.4) oneiric-security; urgency=low
\* SECURITY UPDATE: file descriptor leak to child processes (LP: #927060)
- debian/patches/12\_dont-leak-fds.patch: clean up file descriptors in
src/\*.c, add tests to tests/\*.
- CVE number pending
-- Marc Deslauriers <marc.deslauriers@ubuntu.com> Sun, 04 Mar 2012 19:29:04 -0500

| Changed in lightdm (Ubuntu Oneiric): | |
| --- | --- |
| **status**: | In Progress → Fix Released |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Launchpad Janitor (janitor)](https://launchpad.net/~janitor) wrote on 2012-03-06: |  |  | [#16](/ubuntu/%2Bsource/lightdm/%2Bbug/927060/comments/16) |
| --- | --- | --- | --- |

This bug was fixed in the package lightdm - 1.1.6-0ubuntu1

---------------

lightdm (1.1.6-0ubuntu1) precise; urgency=low

\* Upload the new version to Ubuntu

  \* Reshuffle a bit the vcs to use merge upstream correctly

[ Robert Ancell ]

  \* New upstream release:

    - Fix session wrapper working the same as it did in 1.1.3 (lp: [#944736](/bugs/944736))

    - Stop file descriptors leaking into the session processes (lp: [#927060](/bugs/927060))

[ Martin Pitt ]

  \* debian/control: Fix liblightdm-gobject-1-doc architecture to "all".

 -- Sebastien Bacher <email address hidden> Tue, 06 Mar 2012 13:45:29 +0100

This bug was fixed in the package lightdm - 1.1.6-0ubuntu1
---------------
lightdm (1.1.6-0ubuntu1) precise; urgency=low
\* Upload the new version to Ubuntu
\* Reshuffle a bit the vcs to use merge upstream correctly
[ Robert Ancell ]
\* New upstream release:
- Fix session wrapper working the same as it did in 1.1.3 (lp: #944736)
- Stop file descriptors leaking into the session processes (lp: #927060)
[ Martin Pitt ]
\* debian/control: Fix liblightdm-gobject-1-doc architecture to "all".
-- Sebastien Bacher <seb128@ubuntu.com> Tue, 06 Mar 2012 13:45:29 +0100

| Changed in lightdm (Ubuntu Precise): | |
| --- | --- |
| **status**: | In Progress → Fix Released |

[Bug Watch Updater (bug-watch-updater)](https://launchpad.net/~bug-watch-updater)
on 2012-03-12

| Changed in lightdm (Debian): | |
| --- | --- |
| **status**: | Confirmed → Fix Released |

[See full activity log](https://bugs.launchpad.net/ubuntu/%2Bsource/lightdm/%2Bbug/927060/%2Bactivity)

To post a comment you must [log in](%2Blogin?comments=all).

* [Report a bug](/ubuntu/%2Bsource/lightdm/%2Bfilebug)

This report contains
**Public Security**
information

Everyone can see this security related information.

You are
[not directly subscribed to this bug's notifications.](/ubuntu/%2Bsource/lightdm/%2Bbug/927060/%2Bsubscribe)

Subscribing...

* [Edit bug mail](https://bugs.launchpad.net/ubuntu/%2Bsource/lightdm/%2Bbug/927060/%2Bsubscriptions "View and change your subscriptions to this bug")

## Other bug subscribers

[Subscribe someone else](https://bugs.launchpad.net/ubuntu/%2Bsource/lightdm/%2Bbug/927060/%2Baddsubscriber "Launchpad will email that person whenever this bugs changes")

## Patches

* [Fix for lightdm-1.0 branch.](https://bugs.launchpad.net/ubuntu/%2Bsource/lightdm/%2Bbug/927060/%2Battachment/2800010/%2Bfiles/lightdm-1.0-bug-927060-dont-leak-fds.patch)
  [Edit](/ubuntu/%2Bsource/lightdm/%2Bbug/927060/%2Battachment/2800010 "Change patch details")
* [Fix for lightdm trunk.](https://bugs.launchpad.net/ubuntu/%2Bsource/lightdm/%2Bbug/927060/%2Battachment/2800012/%2Bfiles/lightdm-trunk-bug-927060-dont-leak-fds.patch)
  [Edit](/ubuntu/%2Bsource/lightdm/%2Bbug/927060/%2Battachment/2800012 "Change patch details")
* [lightdm-trunk-bug-927060-dont-leak-fds.patch](https://bugs.launchpad.net/ubuntu/%2Bsource/lightdm/%2Bbug/927060/%2Battachment/2800022/%2Bfiles/lightdm-trunk-bug-927060-dont-leak-fds.patch)
  [Edit](/ubuntu/%2Bsource/lightdm/%2Bbug/927060/%2Battachment/2800022 "Change patch details")

* [Add patch](/ubuntu/%2Bsource/lightdm/%2Bbug/927060/%2Baddcomment?field.patch=on)

## Remote bug watches

* [debbugs #658678](https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=658678)

  [done normal security]
  [Edit](/bugs/927060/%2Bwatch/95854 "Change watch details")

Bug watches keep track of this bug in other bug trackers.

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
4d55102
([Get the code!](https://dev.launchpad.net/))


