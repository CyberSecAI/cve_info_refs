=== Content from www.openwall.com_b196689f_20250126_002702.html ===


| [Openwall](/) * [Products](/)   + [Openwall GNU/\*/Linux   *server OS*](/Owl/)+ [Linux Kernel Runtime Guard](/lkrg/)+ [John the Ripper   *password cracker*](/john/)         - [Free & Open Source for any platform](/john/)- [in the cloud](/john/cloud/)- [Pro for Linux](/john/pro/linux/)- [Pro for macOS](/john/pro/macosx/)+ [Wordlists   *for password cracking*](/wordlists/)+ [passwdqc   *policy enforcement*](/passwdqc/)             - [Free & Open Source for Unix](/passwdqc/)- [Pro for Windows (Active Directory)](/passwdqc/windows/)+ [yescrypt   *KDF & password hashing*](/yescrypt/)+ [yespower   *Proof-of-Work (PoW)*](/yespower/)+ [crypt\_blowfish   *password hashing*](/crypt/)+ [phpass   *ditto in PHP*](/phpass/)+ [tcb   *better password shadowing*](/tcb/)+ [Pluggable Authentication Modules](/pam/)+ [scanlogd   *port scan detector*](/scanlogd/)+ [popa3d   *tiny POP3 daemon*](/popa3d/)+ [blists   *web interface to mailing lists*](/blists/)+ [msulogin   *single user mode login*](/msulogin/)+ [php\_mt\_seed   *mt\_rand() cracker*](/php_mt_seed/)* [Services](/services/)* Publications       + [Articles](/articles/)+ [Presentations](/presentations/)* Resources         + [Mailing lists](/lists/)+ [Community wiki](https://openwall.info/wiki/)+ [Source code repositories (GitHub)](https://github.com/openwall)+ [Source code repositories (CVSweb)](https://cvsweb.openwall.com)+ [File archive & mirrors](/mirrors/)+ [How to verify digital signatures](/signatures/)+ [OVE IDs](/ove/)* [What's new](/news) | |
| --- | --- |

| | [Follow @Openwall on Twitter for new release announcements and other news](https://twitter.com/openwall) | | --- | |
| --- | --- |

[[<prev]](3) [[next>]](5) [[thread-next>]](9) [[day]](.) [[month]](..) [[year]](../..) [[list]](../../..)
```

Message-ID: <20120314152447.GP3308@redhat.com>
Date: Wed, 14 Mar 2012 09:24:47 -0600
From: Vincent Danen <vdanen@...hat.com>
To: oss-security@...ts.openwall.com
Subject: CVE request: pyfribidi buffer overflow flaw

Could a CVE be assigned for this issue please?  I don't think it's come
through here yet.

A buffer overflow flaw was reported in pyfribidi's
fribidi_utf8_to_unicode() function, due to it handling at most 3 bytes
for a single unicode character.  If a 4-byte utf-8 sequence was
supplied, it would generate 2 unicode characters which would overflow
the logical buffer.  This has been fixed in pyfribidi 0.11.

References:

<http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=663189>
<https://github.com/pediapress/pyfribidi/issues/2>
<https://github.com/pediapress/pyfribidi/commit/d2860c655357975e7b32d84e6b45e98f0dcecd7a>
<http://www.securityfocus.com/bid/52451/info>
<https://bugzilla.redhat.com/show_bug.cgi?id=801896>

--
Vincent Danen / Red Hat Security Response Team

```

[Powered by blists](https://www.openwall.com/blists/) - [more mailing lists](https://lists.openwall.net)

Please check out the
[Open Source Software Security Wiki](https://oss-security.openwall.org/wiki/), which is counterpart to this
[mailing list](https://oss-security.openwall.org/wiki/mailing-lists/oss-security).

Confused about [mailing lists](/lists/) and their use?
[Read about mailing lists on Wikipedia](https://en.wikipedia.org/wiki/Electronic_mailing_list)
and check out these
[guidelines on proper formatting of your messages](https://www.complang.tuwien.ac.at/anton/mail-news-errors.html).



=== Content from github.com_a6828022_20250126_002707.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fpediapress%2Fpyfribidi%2Fcommit%2Fd2860c655357975e7b32d84e6b45e98f0dcecd7a)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fpediapress%2Fpyfribidi%2Fcommit%2Fd2860c655357975e7b32d84e6b45e98f0dcecd7a)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=pediapress%2Fpyfribidi)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[pediapress](/pediapress)
/
**[pyfribidi](/pediapress/pyfribidi)**
Public

* [Notifications](/login?return_to=%2Fpediapress%2Fpyfribidi) You must be signed in to change notification settings
* [Fork
  10](/login?return_to=%2Fpediapress%2Fpyfribidi)
* [Star
   12](/login?return_to=%2Fpediapress%2Fpyfribidi)

* [Code](/pediapress/pyfribidi)
* [Issues
  6](/pediapress/pyfribidi/issues)
* [Pull requests
  3](/pediapress/pyfribidi/pulls)
* [Actions](/pediapress/pyfribidi/actions)
* [Projects
  0](/pediapress/pyfribidi/projects)
* [Wiki](/pediapress/pyfribidi/wiki)
* [Security](/pediapress/pyfribidi/security)
* [Insights](/pediapress/pyfribidi/pulse)

Additional navigation options

* [Code](/pediapress/pyfribidi)
* [Issues](/pediapress/pyfribidi/issues)
* [Pull requests](/pediapress/pyfribidi/pulls)
* [Actions](/pediapress/pyfribidi/actions)
* [Projects](/pediapress/pyfribidi/projects)
* [Wiki](/pediapress/pyfribidi/wiki)
* [Security](/pediapress/pyfribidi/security)
* [Insights](/pediapress/pyfribidi/pulse)

## Commit

[Permalink](/pediapress/pyfribidi/commit/d2860c655357975e7b32d84e6b45e98f0dcecd7a)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

refactor pyfribidi.c module

[Browse files](/pediapress/pyfribidi/tree/d2860c655357975e7b32d84e6b45e98f0dcecd7a)
Browse the repository at this point in the history

```
pyfribidi.c is now compiled as _pyfribidi. This module only handles
unicode internally and doesn't use the fribidi_utf8_to_unicode
function (which can't handle 4 byte utf-8 sequences). This fixes the
buffer overflow in issue [#2](https://github.com/pediapress/pyfribidi/issues/2).

The code is now also much simpler: pyfribidi.c is down from 280 to 130
lines of code.

We now ship a pure python pyfribidi that handles the case when
non-unicode strings are passed in.

We now also adapt the size of the output string if clean=True is
passed.
```

* Loading branch information

[![@schmir](https://avatars.githubusercontent.com/u/40620?s=40&v=4)](/schmir)

[schmir](/pediapress/pyfribidi/commits?author=schmir "View all commits by schmir")
committed
Mar 9, 2012

1 parent
[c80f50c](/pediapress/pyfribidi/commit/c80f50cc1a60ee4490e92e1b0502cfda02633ed3)

commit d2860c6

 Show file tree

 Hide file tree

Showing
**5 changed files**
with
**127 additions**
and
**310 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* MANIFEST.in
  [MANIFEST.in](#diff-41d5a52589e0480be9c099d2bba7a8135b8b0d71bcbb8df3582a8df1c2295003)
* pyfribidi.c
  [pyfribidi.c](#diff-a448891f6e8369632688d71c73e57db90bd35274439f36ebe145294f8aba085f)
* pyfribidi.h
  [pyfribidi.h](#diff-7d9dee53346069682d7c1a2b93cee4ce922fe1f0c446658f6904c23f6b640792)
* pyfribidi.py
  [pyfribidi.py](#diff-b9ca6155227290d0a367eb402fddeb389a9c853faebdad585296cc4f83046f7f)
* setup.py
  [setup.py](#diff-60f61ab7a8d1910d86d9fda2261620314edcae5894d5aaa236b821c7256badd7)

## There are no files selected for viewing

2 changes: 1 addition & 1 deletion

2
[MANIFEST.in](#diff-41d5a52589e0480be9c099d2bba7a8135b8b0d71bcbb8df3582a8df1c2295003 "MANIFEST.in")

Show comments

[View file](/pediapress/pyfribidi/blob/d2860c655357975e7b32d84e6b45e98f0dcecd7a/MANIFEST.in)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -160,7 +160,7 @@ include fribidi-src/test/test\_UTF-8\_reordernsm.input |
|  |  | include fribidi-src/test/test\_UTF-8\_reordernsm.reference |
|  |  | include fribidi\_systray.py |
|  |  | include pyfribidi.c |
|  |  | include pyfribidi.h |
|  |  | include pyfribidi.py |
|  |  | include pyfribidi2.py |
|  |  | include setup.cfg |
|  |  | include setup.py |
| Expand Down | |  |

331 changes: 90 additions & 241 deletions

331
[pyfribidi.c](#diff-a448891f6e8369632688d71c73e57db90bd35274439f36ebe145294f8aba085f "pyfribidi.c")

Show comments

[View file](/pediapress/pyfribidi/blob/d2860c655357975e7b32d84e6b45e98f0dcecd7a/pyfribidi.c)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -17,267 +17,116 @@ |
|  |  |  |
|  |  | /\* Copyright (C) 2005,2006,2010 Yaacov Zamir, Nir Soffer \*/ |
|  |  |  |
|  |  | /\* FriBidi python binding: |
|  |  |  |
|  |  | Install: |
|  |  | python setup.py install |
|  |  |  |
|  |  | \*/ |
|  |  |  |
|  |  | #include <Python.h> /\* must be first \*/ |
|  |  | #include <Python.h> |
|  |  | #include <fribidi.h> |
|  |  | #undef \_POSIX\_C\_SOURCE |
|  |  |  |
|  |  | #include "pyfribidi.h" |
|  |  |  |
|  |  | #define MAX\_STR\_LEN 65000 |
|  |  |  |
|  |  | static PyObject \* |
|  |  | \_pyfribidi\_log2vis (PyObject \* self, PyObject \* args, PyObject \* kw) |
|  |  | unicode\_log2vis (PyUnicodeObject\* string, |
|  |  | FriBidiParType base\_direction, int clean, int reordernsm) |
|  |  | { |
|  |  | PyObject \*logical = NULL; /\* input unicode or string object \*/ |
|  |  | FriBidiParType base = FRIBIDI\_TYPE\_RTL; /\* optional direction \*/ |
|  |  | const char \*encoding = "utf-8"; /\* optional input string encoding \*/ |
|  |  | int clean = 0; /\* optional flag to clean the string \*/ |
|  |  | int reordernsm = 1; /\* optional flag to allow reordering of non spacing marks\*/ |
|  |  |  |
|  |  | static char \*kwargs[] = |
|  |  | { "logical", "base\_direction", "encoding", "clean", "reordernsm", NULL }; |
|  |  |  |
|  |  | if (!PyArg\_ParseTupleAndKeywords (args, kw, "O|isii", kwargs, |
|  |  | &logical, &base, &encoding, &clean, &reordernsm)) |
|  |  | return NULL; |
|  |  |  |
|  |  | /\* Validate base \*/ |
|  |  |  |
|  |  | if (!(base == FRIBIDI\_TYPE\_RTL || |
|  |  | base == FRIBIDI\_TYPE\_LTR || base == FRIBIDI\_TYPE\_ON)) |
|  |  | return PyErr\_Format (PyExc\_ValueError, |
|  |  | "invalid value %d: use either RTL, LTR or ON", |
|  |  | base); |
|  |  |  |
|  |  | /\* Check object type and delegate to one of the log2vis functions \*/ |
|  |  |  |
|  |  | if (PyUnicode\_Check (logical)) |
|  |  | return log2vis\_unicode (logical, base, clean, reordernsm); |
|  |  | else if (PyString\_Check (logical)) |
|  |  | return log2vis\_encoded\_string (logical, encoding, base, clean, reordernsm); |
|  |  | else |
|  |  | return PyErr\_Format (PyExc\_TypeError, |
|  |  | "expected unicode or str, not %s", |
|  |  | logical->ob\_type->tp\_name); |
|  |  | int i; |
|  |  | int length = string->length; |
|  |  | FriBidiChar \*logical = NULL; /\* input fribidi unicode buffer \*/ |
|  |  | FriBidiChar \*visual = NULL; /\* output fribidi unicode buffer \*/ |
|  |  | FriBidiStrIndex new\_len = 0; /\* length of the UTF-8 buffer \*/ |
|  |  | PyUnicodeObject \*result = NULL; |
|  |  |  |
|  |  | /\* Allocate fribidi unicode buffers |
|  |  | TODO - Don't copy strings if sizeof(FriBidiChar) == sizeof(Py\_UNICODE) |
|  |  | \*/ |
|  |  |  |
|  |  | logical = PyMem\_New (FriBidiChar, length + 1); |
|  |  | if (logical == NULL) { |
|  |  | PyErr\_NoMemory(); |
|  |  | goto cleanup; |
|  |  | } |
|  |  |  |
|  |  | visual = PyMem\_New (FriBidiChar, length + 1); |
|  |  | if (visual == NULL) { |
|  |  | PyErr\_NoMemory(); |
|  |  | goto cleanup; |
|  |  | } |
|  |  |  |
|  |  | for (i=0; i<length; ++i) { |
|  |  | logical[i] = string->str[i]; |
|  |  | } |
|  |  |  |
|  |  | /\* Convert to unicode and order visually \*/ |
|  |  | fribidi\_set\_reorder\_nsm(reordernsm); |
|  |  |  |
|  |  | if (!fribidi\_log2vis (logical, length, &base\_direction, visual, |
|  |  | NULL, NULL, NULL)) { |
|  |  |  |
|  |  | PyErr\_SetString (PyExc\_RuntimeError, |
|  |  | "fribidi failed to order string"); |
|  |  | goto cleanup; |
|  |  | } |
|  |  |  |
|  |  | /\* Cleanup the string if requested \*/ |
|  |  | if (clean) { |
|  |  | length = fribidi\_remove\_bidi\_marks (visual, length, NULL, NULL, NULL); |
|  |  | } |
|  |  |  |
|  |  | result = (PyUnicodeObject\*) PyUnicode\_FromUnicode(NULL, length); |
|  |  | if (result == NULL) { |
|  |  | goto cleanup; |
|  |  | } |
|  |  |  |
|  |  | for (i=0; i<length; ++i) { |
|  |  | result->str[i] = visual[i]; |
|  |  | } |
|  |  |  |
|  |  | cleanup: |
|  |  | /\* Delete unicode buffers \*/ |
|  |  | PyMem\_Del (logical); |
|  |  | PyMem\_Del (visual); |
|  |  |  |
|  |  | return (PyObject \*)result; |
|  |  | } |
|  |  |  |
|  |  | /\* |
|  |  | log2vis\_unicode - reorder unicode string visually |
|  |  |  |
|  |  | Return value: new reference |
|  |  |  |
|  |  | Return Python unicode object ordered visually or NULL if an exception |
|  |  | was raised. |
|  |  |  |
|  |  | Since Python and fribidi don't now know each other unicode format, |
|  |  | encode input string as utf-8 and invoke log2vis\_utf8. |
|  |  |  |
|  |  | Arguments: |
|  |  |  |
|  |  | - unicode: Python unicode object |
|  |  | - base\_direction: input string base direction, e.g right to left |
|  |  | \*/ |
|  |  |  |
|  |  | static PyObject \* |
|  |  | log2vis\_unicode (PyObject \* unicode, FriBidiParType base\_direction, int clean, int reordernsm) |
|  |  | \_pyfribidi\_log2vis (PyObject \* self, PyObject \* args, PyObject \* kw) |
|  |  | { |
|  |  | PyObject \*logical = NULL; /\* input string encoded in utf-8 \*/ |
|  |  | PyObject \*visual = NULL; /\* output string encoded in utf-8 \*/ |
|  |  | PyObject \*result = NULL; /\* unicode output string \*/ |
|  |  |  |
|  |  | int length = PyUnicode\_GET\_SIZE (unicode); |
|  |  |  |
|  |  | logical = PyUnicode\_AsUTF8String (unicode); |
|  |  | if (logical == NULL) |
|  |  | goto cleanup; |
|  |  |  |
|  |  | visual = log2vis\_utf8 (logical, length, base\_direction, clean, reordernsm); |
|  |  | if (visual == NULL) |
|  |  | goto cleanup; |
|  |  |  |
|  |  | result = PyUnicode\_DecodeUTF8 (PyString\_AS\_STRING (visual), |
|  |  | PyString\_GET\_SIZE (visual), "strict"); |
|  |  |  |
|  |  | cleanup: |
|  |  | Py\_XDECREF (logical); |
|  |  | Py\_XDECREF (visual); |
|  |  |  |
|  |  | return result; |
|  |  | PyUnicodeObject \*logical = NULL; /\* input unicode or string object \*/ |
|  |  | FriBidiParType base = FRIBIDI\_TYPE\_RTL; /\* optional direction \*/ |
|  |  | int clean = 0; /\* optional flag to clean the string \*/ |
|  |  | int reordernsm = 1; /\* optional flag to allow reordering of non spacing marks\*/ |
|  |  |  |
|  |  | static char \*kwargs[] = |
|  |  | { "logical", "base\_direction", "clean", "reordernsm", NULL }; |
|  |  |  |
|  |  | if (!PyArg\_ParseTupleAndKeywords (args, kw, "U|iii", kwargs, |
|  |  | &logical, &base, &clean, &reordernsm)) { |
|  |  | return NULL; |
|  |  | } |
|  |  |  |
|  |  | /\* Validate base \*/ |
|  |  |  |
|  |  | if (!(base == FRIBIDI\_TYPE\_RTL |
|  |  | || base == FRIBIDI\_TYPE\_LTR |
|  |  | || base == FRIBIDI\_TYPE\_ON)) { |
|  |  | return PyErr\_Format (PyExc\_ValueError, |
|  |  | "invalid value %d: use either RTL, LTR or ON", |
|  |  | base); |
|  |  | } |
|  |  |  |
|  |  | return unicode\_log2vis (logical, base, clean, reordernsm); |
|  |  | } |
|  |  |  |
|  |  | /\* |
|  |  | log2vis\_encoded\_string - reorder encoded string visually |
|  |  |  |
|  |  | Return value: new reference |
|  |  |  |
|  |  | Return Python string object ordered visually or NULL if an exception |
|  |  | was raised. The returned string use the same encoding. |
|  |  |  |
|  |  | Invoke either log2vis\_utf8 or log2vis\_unicode. |
|  |  |  |
|  |  | - string: Python string object using encoding |
|  |  | - encoding: string encoding, any encoding name known to Python |
|  |  | - base\_direction: input string base direction, e.g right to left |
|  |  | \*/ |
|  |  |  |
|  |  | static PyObject \* |
|  |  | log2vis\_encoded\_string (PyObject \* string, const char \*encoding, |
|  |  | FriBidiParType base\_direction, int clean, int reordernsm) |
|  |  | { |
|  |  | PyObject \*logical = NULL; /\* logical unicode object \*/ |
|  |  | PyObject \*result = NULL; /\* output string object \*/ |
|  |  |  |
|  |  | /\* Always needed for the string length \*/ |
|  |  | logical = PyUnicode\_Decode (PyString\_AS\_STRING (string), |
|  |  | PyString\_GET\_SIZE (string), |
|  |  | encoding, "strict"); |
|  |  | if (logical == NULL) |
|  |  | return NULL; |
|  |  |  |
|  |  | if (strcmp (encoding, "utf-8") == 0) |
|  |  | /\* Shortcut for utf8 strings (little faster) \*/ |
|  |  | result = log2vis\_utf8 (string, |
|  |  | PyUnicode\_GET\_SIZE (logical), |
|  |  | base\_direction, clean, reordernsm); |
|  |  | else |
|  |  | { |
|  |  | /\* Invoke log2vis\_unicode and encode back to encoding \*/ |
|  |  |  |
|  |  | PyObject \*visual = log2vis\_unicode (logical, base\_direction, clean, reordernsm); |
|  |  |  |
|  |  | if (visual) |
|  |  | { |
|  |  | result = PyUnicode\_Encode (PyUnicode\_AS\_UNICODE |
|  |  | (visual), |
|  |  | PyUnicode\_GET\_SIZE (visual), |
|  |  | encoding, "strict"); |
|  |  | Py\_DECREF (visual); |
|  |  | } |
|  |  | } |
|  |  |  |
|  |  | Py\_DECREF (logical); |
|  |  |  |
|  |  | return result; |
|  |  | } |
|  |  |  |
|  |  | /\* |
|  |  | log2vis\_utf8 - reorder string visually |
|  |  |  |
|  |  | Return value: new reference |
|  |  |  |
|  |  | Return Python string object ordered visually or NULL if an exception |
|  |  | was raised. |
|  |  |  |
|  |  | Arguments: |
|  |  |  |
|  |  | - string: Python string object using utf-8 encoding |
|  |  | - unicode\_length: number of characters in string. This is not the |
|  |  | number of bytes in the string, which may be much bigger than the |
|  |  | number of characters, because utf-8 uses 1-4 bytes per character. |
|  |  | - base\_direction: input string base direction, e.g right to left |
|  |  | \*/ |
|  |  |  |
|  |  | static PyObject \* |
|  |  | log2vis\_utf8 (PyObject \* string, int unicode\_length, |
|  |  | FriBidiParType base\_direction, int clean, int reordernsm) |
|  |  | { |
|  |  | FriBidiChar \*logical = NULL; /\* input fribidi unicode buffer \*/ |
|  |  | FriBidiChar \*visual = NULL; /\* output fribidi unicode buffer \*/ |
|  |  | char \*visual\_utf8 = NULL; /\* output fribidi UTF-8 buffer \*/ |
|  |  | FriBidiStrIndex new\_len = 0; /\* length of the UTF-8 buffer \*/ |
|  |  | PyObject \*result = NULL; /\* failure \*/ |
|  |  |  |
|  |  | /\* Allocate fribidi unicode buffers \*/ |
|  |  |  |
|  |  | logical = PyMem\_New (FriBidiChar, unicode\_length + 1); |
|  |  | if (logical == NULL) |
|  |  | { |
|  |  | PyErr\_SetString (PyExc\_MemoryError, |
|  |  | "failed to allocate unicode buffer"); |
|  |  | goto cleanup; |
|  |  | } |
|  |  |  |
|  |  | visual = PyMem\_New (FriBidiChar, unicode\_length + 1); |
|  |  | if (visual == NULL) |
|  |  | { |
|  |  | PyErr\_SetString (PyExc\_MemoryError, |
|  |  | "failed to allocate unicode buffer"); |
|  |  | goto cleanup; |
|  |  | } |
|  |  |  |
|  |  | /\* Convert to unicode and order visually \*/ |
|  |  | fribidi\_set\_reorder\_nsm(reordernsm); |
|  |  | fribidi\_utf8\_to\_unicode (PyString\_AS\_STRING (string), |
|  |  | PyString\_GET\_SIZE (string), logical); |
|  |  |  |
|  |  | if (!fribidi\_log2vis (logical, unicode\_length, &base\_direction, visual, |
|  |  | NULL, NULL, NULL)) |
|  |  | { |
|  |  | PyErr\_SetString (PyExc\_RuntimeError, |
|  |  | "fribidi failed to order string"); |
|  |  | goto cleanup; |
|  |  | } |
|  |  |  |
|  |  | /\* Cleanup the string if requested \*/ |
|  |  | if (clean) |
|  |  | fribidi\_remove\_bidi\_marks (visual, unicode\_length, NULL, NULL, NULL); |
|  |  |  |
|  |  | /\* Allocate fribidi UTF-8 buffer \*/ |
|  |  |  |
|  |  | visual\_utf8 = PyMem\_New(char, (unicode\_length \* 4)+1); |
|  |  | if (visual\_utf8 == NULL) |
|  |  | { |
|  |  | PyErr\_SetString (PyExc\_MemoryError, |
|  |  | "failed to allocate UTF-8 buffer"); |
|  |  | goto cleanup; |
|  |  | } |
|  |  |  |
|  |  | /\* Encode the reordered string and create result string \*/ |
|  |  |  |
|  |  | new\_len = fribidi\_unicode\_to\_utf8 (visual, unicode\_length, visual\_utf8); |
|  |  |  |
|  |  | result = PyString\_FromStringAndSize (visual\_utf8, new\_len); |
|  |  | if (result == NULL) |
|  |  | /\* XXX does it raise any error? \*/ |
|  |  | goto cleanup; |
|  |  |  |
|  |  | cleanup: |
|  |  | /\* Delete unicode buffers \*/ |
|  |  | PyMem\_Del (logical); |
|  |  | PyMem\_Del (visual); |
|  |  | PyMem\_Del (visual\_utf8); |
|  |  |  |
|  |  | return result; |
|  |  | } |
|  |  |  |
|  |  | static PyMethodDef PyfribidiMethods[] = { |
|  |  | {"log2vis", (PyCFunction) \_pyfribidi\_log2vis, |
|  |  | METH\_VARARGS | METH\_KEYWORDS, |
|  |  | \_pyfribidi\_log2vis\_\_doc\_\_}, |
|  |  | {"log2vis", (PyCFunction) \_pyfribidi\_log2vis, METH\_VARARGS | METH\_KEYWORDS, NULL}, |
|  |  | {NULL, NULL, 0, NULL} |
|  |  | }; |
|  |  |  |
|  |  |  |
|  |  | PyMODINIT\_FUNC |
|  |  | initpyfribidi (void) |
|  |  | init\_pyfribidi (void) |
|  |  | { |
|  |  | PyObject \*module; |
|  |  |  |
|  |  | /\* XXX What should be done if we fail here? \*/ |
|  |  |  |
|  |  | module = Py\_InitModule3 ("pyfribidi", PyfribidiMethods, |
|  |  | \_pyfribidi\_\_doc\_\_); |
|  |  |  |
|  |  | PyObject \*module = Py\_InitModule ("\_pyfribidi", PyfribidiMethods); |
|  |  | PyModule\_AddIntConstant (module, "RTL", (long) FRIBIDI\_TYPE\_RTL); |
|  |  | PyModule\_AddIntConstant (module, "LTR", (long) FRIBIDI\_TYPE\_LTR); |
|  |  | PyModule\_AddIntConstant (module, "ON", (long) FRIBIDI\_TYPE\_ON); |
|  |  |  |
|  |  | PyModule\_AddStringConstant (module, "\_\_author\_\_", |
|  |  | "Yaacov Zamir and Nir Soffer"); |
|  |  | } |

 Loading

Oops, something went wrong.
 Retry

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `d2860c6`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fpediapress%2Fpyfribidi%2Fcommit%2Fd2860c655357975e7b32d84e6b45e98f0dcecd7a) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from bugzilla.wikimedia.org_5647d2c3_20250126_002706.html ===
Page Menu[HomePhabricator](/)

* SearchConfigure Global Search

[Log In](https://phabricator.wikimedia.org/auth/start/?next=%2FT37055)[Create Task](/maniphest/task/edit/nocreate/) [Maniphest](/maniphest/)  T37055
# backtrace when getting a PDFClosed, Resolved[Public](/policy/explain/PHID-TASK-knhwojsuftncwhukchak/view/)Actions

* [Edit Task](/maniphest/task/edit/37055/)
* Edit Related Tasks...
* [Create Subtask](/maniphest/task/subtask/37055/)
* [Edit Parent Tasks](/search/rel/task.has-parent/PHID-TASK-knhwojsuftncwhukchak/)
* [Edit Subtasks](/search/rel/task.has-subtask/PHID-TASK-knhwojsuftncwhukchak/)
* [Merge Duplicates In](/search/rel/task.merge-in/PHID-TASK-knhwojsuftncwhukchak/)
* [Close As Duplicate](/search/rel/task.close-as-duplicate/PHID-TASK-knhwojsuftncwhukchak/)
* Edit Related Objects...
* [Edit Commits](/search/rel/task.has-commit/PHID-TASK-knhwojsuftncwhukchak/)
* [Edit Mocks](/search/rel/task.has-mock/PHID-TASK-knhwojsuftncwhukchak/)
* Subscribe
* [Mute Notifications](/subscriptions/mute/PHID-TASK-knhwojsuftncwhukchak/)
* [Protect as security issue](/wmf/escalate-task/37055/)
* [Award Token](/token/give/PHID-TASK-knhwojsuftncwhukchak/)
* [Flag For Later](/flag/edit/PHID-TASK-knhwojsuftncwhukchak/)

Assigned ToNoneAuthored By

|  | [MarkAHershberger](/p/MarkAHershberger/) |
| --- | --- |
| Mar 8 2012, 6:14 AM2012-03-08 06:14:00 (UTC+0) |

Tags

* [Collection](/tag/collection/) [(Backlog)](/project/board/329/)
Referenced FilesNoneSubscribers

|  | [MarkAHershberger](/p/MarkAHershberger/) |
| --- | --- |

|  | [• wikibugs-l-list](/p/wikibugs-l-list/) |
| --- | --- |

# Description

From email. I'll ask the original reporter to comment:

I was trying to get a pdf of the "List of country-name etymologies"

article. The error message I got is below.

Render server error

An error occured on the render server: RuntimeError: command failed with returncode 9: [mw-render", '-w\ u'rl', \*-c\ u'cache/0f/0ff5d04f 1 aOcbe 17/collectionzip'. '-o'. u'cache/0f/0ff5d04f 1

aOcbe 17/outputrl'. '--status'.

u'qserve://localhost:14311/0ff5d04f1a0cbe17render-rr.

'--template-blacklist'. u'MediaWikiPDF Template Blacklist',

'-template-exclusion-

category'. u'Exclude in print', '-print-ternplate-prefix'. u'Print'.

'-print-template-pattern'. u'SVPrint', '-language', u'en'] Last Output:

2012-03-08T00 34 50 mwlib.options.warn » Both -print-template-pattern and

-print-tern pi ate-prefix (deprecated) specified. Using -print-template-

pattern only. 1% reading /tmp/tmpMrbGw1/revisions-1txt 1% laying out

2012-03-08T00 35 03 rlwriter.info » rendering:

u'http//en.wikipedia.org/w/index.php?oldid=480048504' 1% laying out List of

country-name etymologies75.0% laying out List of country-name

etymologies""" glibc detected " **/home/pp/local/bin/python: free():

invalid next size (fast): 0x0000000002b1cd00** \* in function system,

file/home/pp/local/bin/nslave.py, line 63

---

**Version**: unspecified

**Severity**: normal

# Details

Reference bz35055
### Event Timeline

[• bzimport](/p/bzimport/) raised the priority of this task from  to Low.[Nov 22 2014, 12:18 AM2014-11-22 00:18:29 (UTC+0)](#401661)[• bzimport](/p/bzimport/) added a project: [Collection](/tag/collection/).[• bzimport](/p/bzimport/) set Reference to bz35055.[• bzimport](/p/bzimport/) added a subscriber: Unknown Object (MLST).[MarkAHershberger](/p/MarkAHershberger/) created this task.[Mar 8 2012, 6:14 AM2012-03-08 06:14:00 (UTC+0)](#401674)[• bzimport](/p/bzimport/) added a comment.[Mar 8 2012, 2:39 PM2012-03-08 14:39:39 (UTC+0)](#401680)Comment Actions

**ralf\_wikimedia** wrote:

that's caused by a bug in fribidi: <https://github.com/pediapress/pyfribidi/issues/2>

[• bzimport](/p/bzimport/) added a comment.[Mar 9 2012, 1:16 AM2012-03-09 01:16:55 (UTC+0)](#401687)Comment Actions

**ralf\_wikimedia** wrote:

I've fixed the bug in pyfribi and upgraded on the pdf cluster.

[Log In to Comment](/login/?next=)Content licensed under Creative Commons Attribution-ShareAlike (CC BY-SA) 4.0 unless otherwise noted; code licensed under GNU General Public License (GPL) 2.0 or later and other open source licenses. By using this site, you agree to the Terms of Use, Privacy Policy, and Code of Conduct. · [Wikimedia Foundation](https://wikimediafoundation.org/) · [Privacy Policy](https://foundation.wikimedia.org/wiki/Special%3AMyLanguage/Policy%3ANon-wiki_privacy_policy) · [Code of Conduct](https://www.mediawiki.org/wiki/Special%3AMyLanguage/Code_of_Conduct) · [Terms of Use](https://foundation.wikimedia.org/wiki/Special%3AMyLanguage/Policy%3ATerms_of_Use/Phabricator) · [Disclaimer](https://foundation.wikimedia.org/wiki/Special%3AMyLanguage/Policy%3AGeneral_disclaimer) · [CC-BY-SA](https://creativecommons.org/licenses/by-sa/4.0/) · [GPL](https://www.gnu.org/licenses/old-licenses/gpl-2.0.html) · [Credits](https://www.mediawiki.org/wiki/Phabricator/Credits)

=== Content from www.openwall.com_ff0141a7_20250126_130609.html ===


| [Openwall](/) * [Products](/)   + [Openwall GNU/\*/Linux   *server OS*](/Owl/)+ [Linux Kernel Runtime Guard](/lkrg/)+ [John the Ripper   *password cracker*](/john/)         - [Free & Open Source for any platform](/john/)- [in the cloud](/john/cloud/)- [Pro for Linux](/john/pro/linux/)- [Pro for macOS](/john/pro/macosx/)+ [Wordlists   *for password cracking*](/wordlists/)+ [passwdqc   *policy enforcement*](/passwdqc/)             - [Free & Open Source for Unix](/passwdqc/)- [Pro for Windows (Active Directory)](/passwdqc/windows/)+ [yescrypt   *KDF & password hashing*](/yescrypt/)+ [yespower   *Proof-of-Work (PoW)*](/yespower/)+ [crypt\_blowfish   *password hashing*](/crypt/)+ [phpass   *ditto in PHP*](/phpass/)+ [tcb   *better password shadowing*](/tcb/)+ [Pluggable Authentication Modules](/pam/)+ [scanlogd   *port scan detector*](/scanlogd/)+ [popa3d   *tiny POP3 daemon*](/popa3d/)+ [blists   *web interface to mailing lists*](/blists/)+ [msulogin   *single user mode login*](/msulogin/)+ [php\_mt\_seed   *mt\_rand() cracker*](/php_mt_seed/)* [Services](/services/)* Publications       + [Articles](/articles/)+ [Presentations](/presentations/)* Resources         + [Mailing lists](/lists/)+ [Community wiki](https://openwall.info/wiki/)+ [Source code repositories (GitHub)](https://github.com/openwall)+ [Source code repositories (CVSweb)](https://cvsweb.openwall.com)+ [File archive & mirrors](/mirrors/)+ [How to verify digital signatures](/signatures/)+ [OVE IDs](/ove/)* [What's new](/news) | |
| --- | --- |

| | [Hash Suite - Windows password security audit tool. GUI, reports in PDF.](https://hashsuite.openwall.net) | | --- | |
| --- | --- |

# blists - web interface to mailing list archives

blists is a web interface to mailing list archives that works off indexed mbox files.
There are two programs: *bindex* and *bit*.
*bindex* generates or updates the index file (yes, incremental updates are supported).
*bit* is a CGI/SSI program that generates web pages on the fly.
Both programs are written in C and are very fast.

You can view the latest <README> file,
which describes blists in more detail and provides installation instructions.
It is also included in the archive below.

Download ([release notes](/lists/announce/2017/11/19/1)):

* [blists 2.0](blists-2.0.tar.gz) and
  its [signature](blists-2.0.tar.gz.sign)* [blists 1.0](blists-1.0.tar.gz) and
    its [signature](blists-1.0.tar.gz.sign)

These files are also
[available from the Openwall file archive](https://download.openwall.net/pub/projects/blists/).
The source code of blists can be browsed on
[GitHub](https://github.com/openwall/blists) or via
[CVSweb](https://cvsweb.openwall.com/blists).

Follow [this link](/signatures/) for information on verifying the signatures.

To see blists in action, check out our
[Open Source and information security mailing list archives](https://lists.openwall.net).

blists is a registered project with
[Open Hub](https://www.openhub.net/p/blists).

Quick Comment:

413830



=== Content from bugs.debian.org_fd4a1f03_20250126_002657.html ===

# Debian Bug report logs - #663189 buffer overflow in python-pyfribidi

[![version graph](version.cgi?height=2;width=2;found=pyfribidi%2F0.10.0-2;fixed=pyfribidi%2F0.11.0-1;package=src%3Apyfribidi;absolute=0;collapse=1)](version.cgi?collapse=1;info=1;fixed=pyfribidi%2F0.11.0-1;package=src%3Apyfribidi;absolute=0;found=pyfribidi%2F0.10.0-2)

Package:
[src:pyfribidi](pkgreport.cgi?src=pyfribidi);
Maintainer for [src:pyfribidi](pkgreport.cgi?src=pyfribidi) is [Debian Python Team <team+python@tracker.debian.org>](pkgreport.cgi?maint=team%2Bpython%40tracker.debian.org);

Reported by: [Ralf Schmitt <ralf@systemexit.de>](pkgreport.cgi?submitter=ralf%40systemexit.de)

Date: Fri, 9 Mar 2012 09:15:02 UTC

Severity: *grave*

Tags: confirmed, security

Found in version pyfribidi/0.10.0-2

Fixed in version pyfribidi/0.11.0-1

**Done:** أحمد المحمودي (Ahmed El-Mahmoudy) <aelmahmoudy@sabily.org>

Bug is archived. No further changes may be made.

Display info messages

View this report as an [mbox folder](bugreport.cgi?bug=663189;mbox=yes), [status mbox](bugreport.cgi?bug=663189;mbox=yes;mboxstatus=yes), [maintainer mbox](bugreport.cgi?bug=663189;mbox=yes;mboxmaint=yes)

---

**Report forwarded**
to `debian-bugs-dist@lists.debian.org, Debian Python Modules Team <python-modules-team@lists.alioth.debian.org>`:

`Bug#663189`; Package `src:pyfribidi`.
(Fri, 09 Mar 2012 09:15:05 GMT) ([full text](bugreport.cgi?bug=663189;msg=2), [mbox](bugreport.cgi?bug=663189;mbox=yes;msg=2), [link](#1)).

---

**Acknowledgement sent**
to `Ralf Schmitt <ralf@systemexit.de>`:

New Bug report received and forwarded. Copy sent to `Debian Python Modules Team <python-modules-team@lists.alioth.debian.org>`.
(Fri, 09 Mar 2012 09:15:14 GMT) ([full text](bugreport.cgi?bug=663189;msg=4), [mbox](bugreport.cgi?bug=663189;mbox=yes;msg=4), [link](#3)).

---

[Message #5](#5) received at submit@bugs.debian.org ([full text](bugreport.cgi?bug=663189;msg=5), [mbox](bugreport.cgi?bug=663189;mbox=yes;msg=5), reply):

![](/cgi-bin/libravatar.cgi?email=ralf%40systemexit.de)
From: Ralf Schmitt <ralf@systemexit.de>
To: submit@bugs.debian.org
Subject: buffer overflow in python-pyfribidi
Date: Fri, 09 Mar 2012 10:11:26 +0100
```
Package: python-pyfribidi
Architecture: i386
Source: pyfribidi
Version: 0.10.0-2

There's a buffer overflow in pyfribidi:

# python2.6 -c 'import pyfribidi; pyfribidi.log2vis(unichr(0x10000)*5)'
Segmentation fault

The reason is the following (see
<https://github.com/pediapress/pyfribidi/issues/2>):

fribidi_utf8_to_unicode consumes at most 3 bytes for a single unicode
character, i.e. it does not handle unicode character above 0xffff. For a
4 byte utf-8 sequence it will generate 2 unicode characters, which
overflows the logical buffer.

It's fixed with
<https://github.com/pediapress/pyfribidi/commit/d2860c655357975e7b32d84e6b45e98f0dcecd7a>
(or with pyfribidi 0.11 from pypi)

IMHO the issue is security relevant.

--
Cheers
Ralf

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Debian Python Modules Team <python-modules-team@lists.alioth.debian.org>`:

`Bug#663189`; Package `src:pyfribidi`.
(Fri, 09 Mar 2012 11:30:03 GMT) ([full text](bugreport.cgi?bug=663189;msg=7), [mbox](bugreport.cgi?bug=663189;mbox=yes;msg=7), [link](#6)).

---

[Message #8](#8) received at 663189@bugs.debian.org ([full text](bugreport.cgi?bug=663189;msg=8), [mbox](bugreport.cgi?bug=663189;mbox=yes;msg=8), reply):

![](/cgi-bin/libravatar.cgi?email=jwilk%40debian.org)
From: Jakub Wilk <jwilk@debian.org>
To: Ralf Schmitt <ralf@systemexit.de>, 663189@bugs.debian.org
Cc: control@bugs.debian.org
Subject: Bug#663189: buffer overflow in python-pyfribidi
Date: Fri, 9 Mar 2012 12:26:27 +0100
```
severity 663189 grave
tags 663189 + confirmed security
thanks

* Ralf Schmitt <ralf@systemexit.de>, 2012-03-09, 10:11:
># python2.6 -c 'import pyfribidi; pyfribidi.log2vis(unichr(0x10000)*5)'
>Segmentation fault
>
>The reason is the following (see
><https://github.com/pediapress/pyfribidi/issues/2>):
>
>fribidi_utf8_to_unicode consumes at most 3 bytes for a single unicode
>character, i.e. it does not handle unicode character above 0xffff.

As far as I can see this is not true. In Debian, we allocate 4 bytes per
characters. (An upstream version, which the Debian package is based on,
is completely broken in this respect: it allocates a buffer of static
size. See bug #570068)

>For a 4 byte utf-8 sequence it will generate 2 unicode characters,
>which overflows the logical buffer.

I'm confused. What is "it" in your sentence? Why 2 Unicode characters?

Anyway I tried to double the buffer size (8 bytes per characters of
original string) but this didn't fix the crash. So likely the problem
lies somewhere else.

--
Jakub Wilk

```

---

**Severity set to 'grave' from 'normal'**
Request was from `Jakub Wilk <jwilk@debian.org>`
to `control@bugs.debian.org`.
(Fri, 09 Mar 2012 11:30:06 GMT) ([full text](bugreport.cgi?bug=663189;msg=10), [mbox](bugreport.cgi?bug=663189;mbox=yes;msg=10), [link](#9)).

---

**Added tag(s) confirmed and security.**
Request was from `Jakub Wilk <jwilk@debian.org>`
to `control@bugs.debian.org`.
(Fri, 09 Mar 2012 11:30:07 GMT) ([full text](bugreport.cgi?bug=663189;msg=12), [mbox](bugreport.cgi?bug=663189;mbox=yes;msg=12), [link](#11)).

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Debian Python Modules Team <python-modules-team@lists.alioth.debian.org>`:

`Bug#663189`; Package `src:pyfribidi`.
(Fri, 09 Mar 2012 11:51:41 GMT) ([full text](bugreport.cgi?bug=663189;msg=14), [mbox](bugreport.cgi?bug=663189;mbox=yes;msg=14), [link](#13)).

---

**Acknowledgement sent**
to `Ralf Schmitt <ralf@systemexit.de>`:

Extra info received and forwarded to list. Copy sent to `Debian Python Modules Team <python-modules-team@lists.alioth.debian.org>`.
(Fri, 09 Mar 2012 11:51:48 GMT) ([full text](bugreport.cgi?bug=663189;msg=16), [mbox](bugreport.cgi?bug=663189;mbox=yes;msg=16), [link](#15)).

---

[Message #17](#17) received at 663189@bugs.debian.org ([full text](bugreport.cgi?bug=663189;msg=17), [mbox](bugreport.cgi?bug=663189;mbox=yes;msg=17), reply):

![](/cgi-bin/libravatar.cgi?email=ralf%40systemexit.de)
From: Ralf Schmitt <ralf@systemexit.de>
To: 663189@bugs.debian.org
Cc: control@bugs.debian.org
Subject: Re: Bug#663189: buffer overflow in python-pyfribidi
Date: Fri, 09 Mar 2012 12:49:11 +0100
```
Jakub Wilk <jwilk@debian.org> writes:

>>The reason is the following (see
>><https://github.com/pediapress/pyfribidi/issues/2>):
>>
>> fribidi_utf8_to_unicode consumes at most 3 bytes for a single
>> unicode character, i.e. it does not handle unicode character above
>> 0xffff.
>
> As far as I can see this is not true. In Debian, we allocate 4 bytes
> per characters. (An upstream version, which the Debian package is
> based on, is completely broken in this respect: it allocates a buffer
> of static size. See bug #570068)

upstream is pretty much dead in this case. I've published our version on
PyPI. However, I didn't ask or inform the original authors about that.

>
>> For a 4 byte utf-8 sequence it will generate 2 unicode characters,
>> which overflows the logical buffer.
>
> I'm confused. What is "it" in your sentence? Why 2 Unicode characters?

"it" refers to the 4 byte utf-8 sequence.

here's the inner loop of "fribidi_utf8_to_unicode" from
fribidi-char-sets-utf8.c:

,----
|   length = 0;
|   while ((FriBidiStrIndex) (s - t) < len)
|     {
|       register unsigned char ch = *s;
|       if (ch <= 0x7f)		/* one byte */
| 	{
| 	  *us++ = *s++;
| 	}
|       else if (ch <= 0xdf)	/* 2 byte */
| 	{
| 	  *us++ = ((*s & 0x1f) << 6) + (*(s + 1) & 0x3f);
| 	  s += 2;
| 	}
|       else			/* 3 byte */
| 	{
| 	  *us++ =
| 	    ((int) (*s & 0x0f) << 12) +
| 	    ((*(s + 1) & 0x3f) << 6) + (*(s + 2) & 0x3f);
| 	  s += 3;
| 	}
|       length++;
|     }
`----

Assume you have a 4-byte utf-8 sequence. One loop step consumes a maximum of
3 bytes of that 4-byte sequence (there's no "4 byte" case), leaving
1-byte of that sequence for further processing. this 1 byte will
generate another unicode character. pyfribidi uses the length of the
python unicode string as buffer size, which is less than what the
fribidi_utf8_to_unicode generates. and there you have your buffer
overflow.

to confirm the issue, you can add an assert and check that
fribidi_utf8_to_unicode's return value (the length of the string) equals
unicode_length.

>
> Anyway I tried to double the buffer size (8 bytes per characters of
> original string) but this didn't fix the crash. So likely the problem
> lies somewhere else.

I'm pretty sure my analysis is correct and I'm not so quite sure what
you did here.

--
Cheers
Ralf

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Debian Python Modules Team <python-modules-team@lists.alioth.debian.org>`:

`Bug#663189`; Package `src:pyfribidi`.
(Fri, 09 Mar 2012 11:52:00 GMT) ([full text](bugreport.cgi?bug=663189;msg=19), [mbox](bugreport.cgi?bug=663189;mbox=yes;msg=19), [link](#18)).

---

[Message #20](#20) received at 663189@bugs.debian.org ([full text](bugreport.cgi?bug=663189;msg=20), [mbox](bugreport.cgi?bug=663189;mbox=yes;msg=20), reply):

![](/cgi-bin/libravatar.cgi?email=jwilk%40debian.org)
From: Jakub Wilk <jwilk@debian.org>
To: Ralf Schmitt <ralf@systemexit.de>, 663189@bugs.debian.org
Subject: Re: Bug#663189: buffer overflow in python-pyfribidi
Date: Fri, 9 Mar 2012 12:49:16 +0100
```
* Ralf Schmitt <ralf@systemexit.de>, 2012-03-09, 10:11:
>It's fixed with
><https://github.com/pediapress/pyfribidi/commit/d2860c655357975e7b32d84e6b45e98f0dcecd7a>
>(or with pyfribidi 0.11 from pypi)

Right, 0.11 on pypi looks much saner than the current one. Thanks.

--
Jakub Wilk

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Debian Python Modules Team <python-modules-team@lists.alioth.debian.org>`:

`Bug#663189`; Package `src:pyfribidi`.
(Fri, 09 Mar 2012 13:03:05 GMT) ([full text](bugreport.cgi?bug=663189;msg=22), [mbox](bugreport.cgi?bug=663189;mbox=yes;msg=22), [link](#21)).

---

[Message #23](#23) received at 663189@bugs.debian.org ([full text](bugreport.cgi?bug=663189;msg=23), [mbox](bugreport.cgi?bug=663189;mbox=yes;msg=23), reply):

![](/cgi-bin/libravatar.cgi?email=jwilk%40debian.org)
From: Jakub Wilk <jwilk@debian.org>
To: Ralf Schmitt <ralf@systemexit.de>, 663189@bugs.debian.org
Subject: Re: Bug#663189: buffer overflow in python-pyfribidi
Date: Fri, 9 Mar 2012 13:23:29 +0100
```
* Ralf Schmitt <ralf@systemexit.de>, 2012-03-09, 12:49:
>>>fribidi_utf8_to_unicode consumes at most 3 bytes for a single unicode
>>>character, i.e. it does not handle unicode character above 0xffff.

Now I woke up I finally understand what you meant here. :) Sorry for the
noise.

>here's the inner loop of "fribidi_utf8_to_unicode" from
>fribidi-char-sets-utf8.c:
>
>,----
>|   length = 0;
>|   while ((FriBidiStrIndex) (s - t) < len)
>|     {
>|       register unsigned char ch = *s;
>|       if (ch <= 0x7f)		/* one byte */
>| 	{
>| 	  *us++ = *s++;
>| 	}
>|       else if (ch <= 0xdf)	/* 2 byte */
>| 	{
>| 	  *us++ = ((*s & 0x1f) << 6) + (*(s + 1) & 0x3f);
>| 	  s += 2;
>| 	}
>|       else			/* 3 byte */
>| 	{
>| 	  *us++ =
>| 	    ((int) (*s & 0x0f) << 12) +
>| 	    ((*(s + 1) & 0x3f) << 6) + (*(s + 2) & 0x3f);
>| 	  s += 3;
>| 	}
>|       length++;
>|     }
>`----

Ugh. That's so broken...

--
Jakub Wilk

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Debian Python Modules Team <python-modules-team@lists.alioth.debian.org>`:

`Bug#663189`; Package `src:pyfribidi`.
(Sat, 10 Mar 2012 09:33:04 GMT) ([full text](bugreport.cgi?bug=663189;msg=25), [mbox](bugreport.cgi?bug=663189;mbox=yes;msg=25), [link](#24)).

---

**Acknowledgement sent**
to `أحمد المحمودي <aelmahmoudy@sabily.org>`:

Extra info received and forwarded to list. Copy sent to `Debian Python Modules Team <python-modules-team@lists.alioth.debian.org>`.
(Sat, 10 Mar 2012 09:33:07 GMT) ([full text](bugreport.cgi?bug=663189;msg=27), [mbox](bugreport.cgi?bug=663189;mbox=yes;msg=27), [link](#26)).

---

[Message #28](#28) received at 663189@bugs.debian.org ([full text](bugreport.cgi?bug=663189;msg=28), [mbox](bugreport.cgi?bug=663189;mbox=yes;msg=28), reply):

![](/cgi-bin/libravatar.cgi?email=aelmahmoudy%40sabily.org)
From: أحمد المحمودي <aelmahmoudy@sabily.org>
To: Ralf Schmitt <ralf@systemexit.de>, 663189@bugs.debian.org
Subject: Re: Bug#663189: buffer overflow in python-pyfribidi
Date: Sat, 10 Mar 2012 10:51:09 +0200
```
[[Message part 1](bugreport.cgi?att=0;bug=663189;msg=28) (text/plain, inline)]
```
```
On Fri, Mar 09, 2012 at 12:49:11PM +0100, Ralf Schmitt wrote:
> upstream is pretty much dead in this case. I've published our version on
> PyPI. However, I didn't ask or inform the original authors about that.
---end quoted text---

  Why do you include a convenience copy of fribidi source code in your
  pyfribidi distribution ?

--
 ‎أحمد المحمودي (Ahmed El-Mahmoudy)
  Digital design engineer
 GPG KeyID: 0xEDDDA1B7
 GPG Fingerprint: 8206 A196 2084 7E6D 0DF8  B176 BC19 6A94 EDDD A1B7

```
```
[[signature.asc](bugreport.cgi?att=1;bug=663189;filename=signature.asc;msg=28) (application/pgp-signature, inline)]
```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Debian Python Modules Team <python-modules-team@lists.alioth.debian.org>`:

`Bug#663189`; Package `src:pyfribidi`.
(Sat, 10 Mar 2012 09:33:12 GMT) ([full text](bugreport.cgi?bug=663189;msg=30), [mbox](bugreport.cgi?bug=663189;mbox=yes;msg=30), [link](#29)).

---

**Acknowledgement sent**
to `أحمد المحمودي <aelmahmoudy@sabily.org>`:

Extra info received and forwarded to list. Copy sent to `Debian Python Modules Team <python-modules-team@lists.alioth.debian.org>`.
(Sat, 10 Mar 2012 09:33:13 GMT) ([full text](bugreport.cgi?bug=663189;msg=32), [mbox](bugreport.cgi?bug=663189;mbox=yes;msg=32), [link](#31)).

---

[Message #33](#33) received at 663189@bugs.debian.org ([full text](bugreport.cgi?bug=663189;msg=33), [mbox](bugreport.cgi?bug=663189;mbox=yes;msg=33), reply):

![](/cgi-bin/libravatar.cgi?email=aelmahmoudy%40sabily.org)
From: أحمد المحمودي <aelmahmoudy@sabily.org>
To: Ralf Schmitt <ralf@systemexit.de>, 663189@bugs.debian.org
Subject: Re: Bug#663189: buffer overflow in python-pyfribidi
Date: Sat, 10 Mar 2012 10:55:24 +0200
```
[[Message part 1](bugreport.cgi?att=0;bug=663189;msg=33) (text/plain, inline)]
```
```
On Fri, Mar 09, 2012 at 12:49:16PM +0100, Jakub Wilk wrote:
> Right, 0.11 on pypi looks much saner than the current one. Thanks.
---end quoted text---

  The package is ready at:
  <http://mentors.debian.net/debian/pool/main/p/pyfribidi/pyfribidi_0.11.0-1.dsc>

--
 ‎أحمد المحمودي (Ahmed El-Mahmoudy)
  Digital design engineer
 GPG KeyID: 0xEDDDA1B7
 GPG Fingerprint: 8206 A196 2084 7E6D 0DF8  B176 BC19 6A94 EDDD A1B7

```
```
[[signature.asc](bugreport.cgi?att=1;bug=663189;filename=signature.asc;msg=33) (application/pgp-signature, inline)]
```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Debian Python Modules Team <python-modules-team@lists.alioth.debian.org>`:

`Bug#663189`; Package `src:pyfribidi`.
(Sat, 10 Mar 2012 10:30:04 GMT) ([full text](bugreport.cgi?bug=663189;msg=35), [mbox](bugreport.cgi?bug=663189;mbox=yes;msg=35), [link](#34)).

---

**Acknowledgement sent**
to `Ralf Schmitt <ralf@systemexit.de>`:

Extra info received and forwarded to list. Copy sent to `Debian Python Modules Team <python-modules-team@lists.alioth.debian.org>`.
(Sat, 10 Mar 2012 10:30:05 GMT) ([full text](bugreport.cgi?bug=663189;msg=37), [mbox](bugreport.cgi?bug=663189;mbox=yes;msg=37), [link](#36)).

---

[Message #38](#38) received at 663189@bugs.debian.org ([full text](bugreport.cgi?bug=663189;msg=38), [mbox](bugreport.cgi?bug=663189;mbox=yes;msg=38), reply):

![](/cgi-bin/libravatar.cgi?email=ralf%40systemexit.de)
From: Ralf Schmitt <ralf@systemexit.de>
To: أحمد المحمودي
<aelmahmoudy@sabily.org>
Cc: 663189@bugs.debian.org
Subject: Re: Bug#663189: buffer overflow in python-pyfribidi
Date: Sat, 10 Mar 2012 11:27:37 +0100
```
أحمد المحمودي <aelmahmoudy@sabily.org> writes:

>
>   Why do you include a convenience copy of fribidi source code in your
>   pyfribidi distribution ?

just so that I can tell people to "pip install pyfribidi" intead of
telling them to install the frididi headers first. This can easily be
disabled by setting USE_SYSTEM_LIB, like in "USE_SYSTEM_LIB=1 pip
install pyfribidi".

--
Cheers
Ralf

```

---

**Reply sent**
to `أحمد المحمودي (Ahmed El-Mahmoudy) <aelmahmoudy@sabily.org>`:

You have taken responsibility.
(Wed, 14 Mar 2012 22:21:17 GMT) ([full text](bugreport.cgi?bug=663189;msg=40), [mbox](bugreport.cgi?bug=663189;mbox=yes;msg=40), [link](#39)).

---

**Notification sent**
to `Ralf Schmitt <ralf@systemexit.de>`:

Bug acknowledged by developer.
(Wed, 14 Mar 2012 22:21:17 GMT) ([full text](bugreport.cgi?bug=663189;msg=42), [mbox](bugreport.cgi?bug=663189;mbox=yes;msg=42), [link](#41)).

---

[Message #43](#43) received at 663189-close@bugs.debian.org ([full text](bugreport.cgi?bug=663189;msg=43), [mbox](bugreport.cgi?bug=663189;mbox=yes;msg=43), reply):

![](/cgi-bin/libravatar.cgi?email=aelmahmoudy%40sabily.org)
From: أحمد المحمودي (Ahmed El-Mahmoudy) <aelmahmoudy@sabily.org>
To: 663189-close@bugs.debian.org
Subject: Bug#663189: fixed in pyfribidi 0.11.0-1
Date: Wed, 14 Mar 2012 22:19:39 +0000
```
Source: pyfribidi
Source-Version: 0.11.0-1

We believe that the bug you reported is fixed in the latest version of
pyfribidi, which is due to be installed in the Debian FTP archive:

pyfribidi_0.11.0-1.debian.tar.gz
  to main/p/pyfribidi/pyfribidi_0.11.0-1.debian.tar.gz
pyfribidi_0.11.0-1.dsc
  to main/p/pyfribidi/pyfribidi_0.11.0-1.dsc
pyfribidi_0.11.0.orig.tar.bz2
  to main/p/pyfribidi/pyfribidi_0.11.0.orig.tar.bz2
python-pyfribidi-dbg_0.11.0-1_amd64.deb
  to main/p/pyfribidi/python-pyfribidi-dbg_0.11.0-1_amd64.deb
python-pyfribidi_0.11.0-1_amd64.deb
  to main/p/pyfribidi/python-pyfribidi_0.11.0-1_amd64.deb

A summary of the changes between this version and the previous one is
attached.

Thank you for reporting the bug, which will now be closed.  If you
have further comments please address them to 663189@bugs.debian.org,
and the maintainer will reopen the bug report if appropriate.

Debian distribution maintenance software
pp.
أحمد المحمودي (Ahmed El-Mahmoudy) <aelmahmoudy@sabily.org> (supplier of updated pyfribidi package)

(This message was generated automatically at their request; if you
believe that there is a problem with it please contact the archive
administrators by mailing ftpmaster@debian.org)

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA512

Format: 1.8
Date: Sat, 10 Mar 2012 10:43:02 +0200
Source: pyfribidi
Binary: python-pyfribidi python-pyfribidi-dbg
Architecture: source amd64
Version: 0.11.0-1
Distribution: unstable
Urgency: low
Maintainer: Debian Python Modules Team <python-modules-team@lists.alioth.debian.org>
Changed-By: أحمد المحمودي (Ahmed El-Mahmoudy) <aelmahmoudy@sabily.org>
Description:
 python-pyfribidi - FriBidi Python bindings
 python-pyfribidi-dbg - FriBidi Python bindings (debug symbols)
Closes: [663189](bugreport.cgi?bug=663189)
Changes:
 pyfribidi (0.11.0-1) unstable; urgency=low
 .
   [ أحمد المحمودي (Ahmed El-Mahmoudy) ]
   * New upstream release. (Closes: #[663189](bugreport.cgi?bug=663189))
   * debian/control: Updated Standards-Version to 3.9.3
   * Bumped compat level to 9.
   * Removed all patches as they are no longer needed.
   * debian/watch: Added pypi URL.
   * Removed debian/source.lintian-overrides
   * Updated debian/python-pyfribidi.install
 .
   [ Piotr Ożarowski ]
   * DM-Upload-Allowed set to yes
Checksums-Sha1:
 5c4c6a7dd216d002fa3a3ddbda378ad2a566f282 2285 pyfribidi_0.11.0-1.dsc
 cc9bb369dc56abd91d383d4624bba4b8860b6c16 555875 pyfribidi_0.11.0.orig.tar.bz2
 9567e628227d0774b554b137dbdd87e320de195a 4037 pyfribidi_0.11.0-1.debian.tar.gz
 81a0d7e7e7fe8de7ff7c1ffd327e02a09fdf7b09 55350 python-pyfribidi_0.11.0-1_amd64.deb
 c070de6d54fc70861756001895db246d58b54420 180504 python-pyfribidi-dbg_0.11.0-1_amd64.deb
Checksums-Sha256:
 b17ef6af426c152c0dac333e5f56c50ca0df4f0bd9d2aa688d1454fadb38f6cf 2285 pyfribidi_0.11.0-1.dsc
 cfd0acea3afb85b5f5d7080ea6482ba47c58eb6635c2152b11566d7227405253 555875 pyfribidi_0.11.0.orig.tar.bz2
 090823af119ad1732bd63638166c248e25c61e0d56cccaed63d47fe8699ccfa7 4037 pyfribidi_0.11.0-1.debian.tar.gz
 7442191093a12d2d6956cb8d9e76f133a7c48e6c93c23b1873112b2b6775b1f1 55350 python-pyfribidi_0.11.0-1_amd64.deb
 43fbbba16654350fbc8221d9f914138b5ef94b6e03da1266bd0adde6034b225b 180504 python-pyfribidi-dbg_0.11.0-1_amd64.deb
Files:
 0da8602c000d738c00013002cc3f884c 2285 python optional pyfribidi_0.11.0-1.dsc
 fb6131173d26fe139609973645e33302 555875 python optional pyfribidi_0.11.0.orig.tar.bz2
 10768bb9eeffcf39b4e12fda4a99eb88 4037 python optional pyfribidi_0.11.0-1.debian.tar.gz
 b2e2ef74867c44f46424e73190bbc450 55350 python optional python-pyfribidi_0.11.0-1_amd64.deb
 9005cea73ae78015925821446717ad1b 180504 debug extra python-pyfribidi-dbg_0.11.0-1_amd64.deb

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.12 (GNU/Linux)

iQIcBAEBCgAGBQJPYRUpAAoJEK728aKnRXZFVlIP/0FG0QO5gy03VKshh5+lSoE9
eGZmLRAvDlAqkYZq4YSlFP4UqN05KpI0rz1pyRznAL2wu+ruDIOk5IzafwR3Iwly
PQ1XkvJAj1Bz/gobyDeHBDebdXHeRxb7Z1Pvq2qrs9dZveycrLASVit/+Zab37UT
SdfTc6+JYINmyMv3bp6AMtXqLSQcLfUZtKL/lzP1gLualTjP4dQLN9i2a0eSFvdG
Ivz/f524JcRt+JPKpCa5VbJqmpwBxtbG4wNu+z5Tosjd3CcbHM8rK2bXbICkcgNO
xVrkX3uE7rt1YrQU6TAIbK3r26GOyhrbAGfJglpi1oRCRv2f2lxDgnGvCc0+0qi5
M46Lyp0g32HNmzDkqUBDeg7QdrXCY/ImYMLe++hKKBqiPf8Zvzc3URFgNqMBBUax
whlMYHguD/7Akm1lQx78gJdKciGTueR3eBieCwP4e0uYjvxSbOJMglTKam0YCW8r
MWpgqX3OsZS/VKRaAdP7DID3shu/oKBgjzmpi7QQ10t71Q4z8WbxCHKYFxurYPI6
XrVcDG1m//JK69ffELolkLM9Z2Ji1gawVrCv0WIYoMVAmSQrcSTwba4zFYEtZyx1
HNzyL59gJHblxtp3chnDdc36ei/cQWvnKB0Tglz8aAPe1/cSwfP03cVxbk+J7oVz
Wi3LS8N9TNnV+KCW6Ijd
=06+K
-----END PGP SIGNATURE-----

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Debian Python Modules Team <python-modules-team@lists.alioth.debian.org>`:

`Bug#663189`; Package `src:pyfribidi`.
(Wed, 21 Mar 2012 10:39:15 GMT) ([full text](bugreport.cgi?bug=663189;msg=45), [mbox](bugreport.cgi?bug=663189;mbox=yes;msg=45), [link](#44)).

---

**Acknowledgement sent**
to `Jonathan Wiltshire <jmw@debian.org>`:

Extra info received and forwarded to list. Copy sent to `Debian Python Modules Team <python-modules-team@lists.alioth.debian.org>`.
(Wed, 21 Mar 2012 10:39:16 GMT) ([full text](bugreport.cgi?bug=663189;msg=47), [mbox](bugreport.cgi?bug=663189;mbox=yes;msg=47), [link](#46)).

---

[Message #48](#48) received at 663189@bugs.debian.org ([full text](bugreport.cgi?bug=663189;msg=48), [mbox](bugreport.cgi?bug=663189;mbox=yes;msg=48), reply):

![](/cgi-bin/libravatar.cgi?email=jmw%40debian.org)
From: Jonathan Wiltshire <jmw@debian.org>
To: 663189@bugs.debian.org
Subject: buffer overflow in python-pyfribidi
Date: Wed, 21 Mar 2012 10:37:56 +0000 (GMT)
```
Dear maintainer,

Recently you fixed one or more security problems and as a result you closed
this bug. These problems were not serious enough for a Debian Security
Advisory, so they are now on my radar for fixing in the following suites
through point releases:

squeeze (6.0.5) 	- use target "stable"

Please prepare a minimal-changes upload targetting each of these suites,
and submit a debdiff to the Release Team [0] for consideration. They will
offer additional guidance or instruct you to upload your package.

I will happily assist you at any stage if the patch is straightforward and
you need help. Please keep me in CC at all times so I can
track the progress of this request.

For details of this process and the rationale, please see the original
announcement [1] and my blog post [2].

0: debian-release@lists.debian.org
1: <201101232332.11736.thijs@debian.org>
2: <http://deb.li/prsc>

Thanks,

with his security hat on:
--
Jonathan Wiltshire                                      jmw@debian.org
Debian Developer                         <http://people.debian.org/~jmw>

4096R: 0xD3524C51 / 0A55 B7C5 1223 3942 86EC  74C3 5394 479D D352 4C51

```

---

**Bug archived.**
Request was from `Debbugs Internal Request <owner@bugs.debian.org>`
to `internal_control@bugs.debian.org`.
(Sun, 02 Jun 2013 08:26:32 GMT) ([full text](bugreport.cgi?bug=663189;msg=50), [mbox](bugreport.cgi?bug=663189;mbox=yes;msg=50), [link](#49)).

---

Send a report that [this bug log contains spam](https://bugs.debian.org/cgi-bin/bugspam.cgi?bug=663189).

---

Debian bug tracking system administrator <owner@bugs.debian.org>.
Last modified:
Sun Jan 26 00:26:56 2025;
Machine Name:
bembo

[Debian Bug tracking system](https://www.debian.org/Bugs/)

Debbugs is free software and licensed under the terms of the GNU General
Public License version 2. The current version can be obtained
from <https://bugs.debian.org/debbugs-source/>.

Copyright © 1999 Darren O. Benham,
1997,2003 nCipher Corporation Ltd,
1994-97 Ian Jackson,
2005-2017 Don Armstrong, and many other contributors.



=== Content from access.redhat.com_b5f1e484_20250126_130607.html ===


[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

**We're sorry but cve-details doesn't work properly without JavaScript enabled. Please enable it to continue.**

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from groups.google.com_fcaf83c2_20250126_002700.html ===
[![](https://fonts.gstatic.com/s/i/productlogos/groups/v9/web-48dp/logo_groups_color_1x_web_48dp.png)Groups](./my-groups "Groups")ConversationsAll groups and messagesSend feedback to GoogleHelpTraining[Sign in](https://accounts.google.com/ServiceLogin?hl=en&passive=true&continue=https://groups.google.com&ec=GAZA0AM)[Groups](./my-groups "Groups")
## linux.debian.bugs.dist

[Conversations](./g/linux.debian.bugs.dist)[About](./g/linux.debian.bugs.dist/about)[Privacy](https://policies.google.com/privacy?hl=en_US) • [Terms](https://policies.google.com/terms?hl=en_US)

*info*Google Groups no longer supports new Usenet posts or subscriptions. Historical content remains viewable.Dismiss[Learn more](https://support.google.com/groups?p=usenet)Groups keyboard shortcuts have been updatedDismissSee shortcuts
# Bug#663189: buffer overflow in python-pyfribidi

 33 viewsSkip to first unread message![Ralf Schmitt's profile photo](https://lh3.googleusercontent.com/a/default-user=s40-c)
### Ralf Schmitt

unread,Mar 9, 2012, 9:20:02 AM3/9/12DeleteYou do not have permission to delete messages in this groupCopy linkReport messageShow original messageEither email addresses are anonymous for this group or you need the view member email addresses permission to view the original messageto Package: python-pyfribidi

Architecture: i386

Source: pyfribidi

Version: 0.10.0-2

There's a buffer overflow in pyfribidi:

# python2.6 -c 'import pyfribidi; pyfribidi.log2vis(unichr(0x10000)\*5)'

Segmentation fault

The reason is the following (see

<https://github.com/pediapress/pyfribidi/issues/2>):

fribidi\_utf8\_to\_unicode consumes at most 3 bytes for a single unicode

character, i.e. it does not handle unicode character above 0xffff. For a

4 byte utf-8 sequence it will generate 2 unicode characters, which

overflows the logical buffer.

It's fixed with

<https://github.com/pediapress/pyfribidi/commit/d2860c655357975e7b32d84e6b45e98f0dcecd7a>

(or with pyfribidi 0.11 from pypi)

IMHO the issue is security relevant.

--

Cheers

Ralf

--

To UNSUBSCRIBE, email to debian-bugs-...@lists.debian.org

with a subject of "unsubscribe". Trouble? Contact listm...@lists.debian.org

![Jakub Wilk's profile photo](https://lh3.googleusercontent.com/a/default-user=s40-c)
### Jakub Wilk

unread,Mar 9, 2012, 11:40:01 AM3/9/12DeleteYou do not have permission to delete messages in this groupCopy linkReport messageShow original messageEither email addresses are anonymous for this group or you need the view member email addresses permission to view the original messageto severity 663189 grave

tags 663189 + confirmed security

thanks

\* Ralf Schmitt <ra...@systemexit.de>, 2012-03-09, 10:11:

># python2.6 -c 'import pyfribidi; pyfribidi.log2vis(unichr(0x10000)\*5)'

>Segmentation fault

>

>The reason is the following (see

><https://github.com/pediapress/pyfribidi/issues/2>):

>

>fribidi\_utf8\_to\_unicode consumes at most 3 bytes for a single unicode

>character, i.e. it does not handle unicode character above 0xffff.

As far as I can see this is not true. In Debian, we allocate 4 bytes per

characters. (An upstream version, which the Debian package is based on,

is completely broken in this respect: it allocates a buffer of static

size. See bug #570068)

>For a 4 byte utf-8 sequence it will generate 2 unicode characters,

>which overflows the logical buffer.

I'm confused. What is "it" in your sentence? Why 2 Unicode characters?

Anyway I tried to double the buffer size (8 bytes per characters of

original string) but this didn't fix the crash. So likely the problem

lies somewhere else.

--

Jakub Wilk

![Ralf Schmitt's profile photo](https://lh3.googleusercontent.com/a/default-user=s40-c)
### Ralf Schmitt

unread,Mar 9, 2012, 12:00:01 PM3/9/12DeleteYou do not have permission to delete messages in this groupCopy linkReport messageShow original messageEither email addresses are anonymous for this group or you need the view member email addresses permission to view the original messageto Jakub Wilk <jw...@debian.org> writes:

>>The reason is the following (see

>><https://github.com/pediapress/pyfribidi/issues/2>):

>>

>> fribidi\_utf8\_to\_unicode consumes at most 3 bytes for a single

>> unicode character, i.e. it does not handle unicode character above

>> 0xffff.

>

> As far as I can see this is not true. In Debian, we allocate 4 bytes

> per characters. (An upstream version, which the Debian package is

> based on, is completely broken in this respect: it allocates a buffer

> of static size. See bug #570068)

upstream is pretty much dead in this case. I've published our version on

PyPI. However, I didn't ask or inform the original authors about that.

>

>> For a 4 byte utf-8 sequence it will generate 2 unicode characters,

>> which overflows the logical buffer.

>

> I'm confused. What is "it" in your sentence? Why 2 Unicode characters?

"it" refers to the 4 byte utf-8 sequence.

here's the inner loop of "fribidi\_utf8\_to\_unicode" from

fribidi-char-sets-utf8.c:

,----

| length = 0;

| while ((FriBidiStrIndex) (s - t) < len)

| {

| register unsigned char ch = \*s;

| if (ch <= 0x7f) /\* one byte \*/

| {

| \*us++ = \*s++;

| }

| else if (ch <= 0xdf) /\* 2 byte \*/

| {

| \*us++ = ((\*s & 0x1f) << 6) + (\*(s + 1) & 0x3f);

| s += 2;

| }

| else /\* 3 byte \*/

| {

| \*us++ =

| ((int) (\*s & 0x0f) << 12) +

| ((\*(s + 1) & 0x3f) << 6) + (\*(s + 2) & 0x3f);

| s += 3;

| }

| length++;

| }

`----

Assume you have a 4-byte utf-8 sequence. One loop step consumes a maximum of

3 bytes of that 4-byte sequence (there's no "4 byte" case), leaving

1-byte of that sequence for further processing. this 1 byte will

generate another unicode character. pyfribidi uses the length of the

python unicode string as buffer size, which is less than what the

fribidi\_utf8\_to\_unicode generates. and there you have your buffer

overflow.

to confirm the issue, you can add an assert and check that

fribidi\_utf8\_to\_unicode's return value (the length of the string) equals

unicode\_length.

>

> Anyway I tried to double the buffer size (8 bytes per characters of

> original string) but this didn't fix the crash. So likely the problem

> lies somewhere else.

I'm pretty sure my analysis is correct and I'm not so quite sure what

you did here.

--

Cheers

Ralf

![Jakub Wilk's profile photo](https://lh3.googleusercontent.com/a/default-user=s40-c)
### Jakub Wilk

unread,Mar 9, 2012, 12:00:01 PM3/9/12DeleteYou do not have permission to delete messages in this groupCopy linkReport messageShow original messageEither email addresses are anonymous for this group or you need the view member email addresses permission to view the original messageto \* Ralf Schmitt <ra...@systemexit.de>, 2012-03-09, 10:11:

>It's fixed with

><https://github.com/pediapress/pyfribidi/commit/d2860c655357975e7b32d84e6b45e98f0dcecd7a>

>(or with pyfribidi 0.11 from pypi)

Right, 0.11 on pypi looks much saner than the current one. Thanks.

--

Jakub Wilk

![Jakub Wilk's profile photo](https://lh3.googleusercontent.com/a/default-user=s40-c)
### Jakub Wilk

unread,Mar 9, 2012, 1:10:02 PM3/9/12DeleteYou do not have permission to delete messages in this groupCopy linkReport messageShow original messageEither email addresses are anonymous for this group or you need the view member email addresses permission to view the original messageto \* Ralf Schmitt <ra...@systemexit.de>, 2012-03-09, 12:49:

>>>fribidi\_utf8\_to\_unicode consumes at most 3 bytes for a single unicode

>>>character, i.e. it does not handle unicode character above 0xffff.

Now I woke up I finally understand what you meant here. :) Sorry for the

noise.

>here's the inner loop of "fribidi\_utf8\_to\_unicode" from

>fribidi-char-sets-utf8.c:

>

>,----

>| length = 0;

>| while ((FriBidiStrIndex) (s - t) < len)

>| {

>| register unsigned char ch = \*s;

>| if (ch <= 0x7f) /\* one byte \*/

>| {

>| \*us++ = \*s++;

>| }

>| else if (ch <= 0xdf) /\* 2 byte \*/

>| {

>| \*us++ = ((\*s & 0x1f) << 6) + (\*(s + 1) & 0x3f);

>| s += 2;

>| }

>| else /\* 3 byte \*/

>| {

>| \*us++ =

>| ((int) (\*s & 0x0f) << 12) +

>| ((\*(s + 1) & 0x3f) << 6) + (\*(s + 2) & 0x3f);

>| s += 3;

>| }

>| length++;

>| }

>`----

Ugh. That's so broken...

--

Jakub Wilk

![أحمد المحمودي's profile photo](//lh3.googleusercontent.com/a-/ALV-UjUNWaju2CqVERztvPl1D6sPsI1cLhMEK40j0jKZBiQYyW5VuQ=s40-c)
### أحمد المحمودي‎

unread,Mar 10, 2012, 9:40:02 AM3/10/12DeleteYou do not have permission to delete messages in this groupCopy linkReport messageShow original messageEither email addresses are anonymous for this group or you need the view member email addresses permission to view the original messageto On Fri, Mar 09, 2012 at 12:49:16PM +0100, Jakub Wilk wrote:

> Right, 0.11 on pypi looks much saner than the current one. Thanks.

---end quoted text---

 The package is ready at:

 <http://mentors.debian.net/debian/pool/main/p/pyfribidi/pyfribidi_0.11.0-1.dsc>

--

 ‎أحمد المحمودي (Ahmed El-Mahmoudy)

 Digital design engineer

 GPG KeyID: 0xEDDDA1B7

 GPG Fingerprint: 8206 A196 2084 7E6D 0DF8 B176 BC19 6A94 EDDD A1B7

signature.asc[](https://groups.google.com/group/linux.debian.bugs.dist/attach/ae24ea755288c868/signature.asc?part=0.1)0 new messages

=== Content from lists.openwall.net_ae5d8845_20250126_130609.html ===


| [lists.openwall.net](https://lists.openwall.net) [lists](/)  /  [announce](https://www.openwall.com/lists/announce/)  [owl-users](https://www.openwall.com/lists/owl-users/)  [owl-dev](https://www.openwall.com/lists/owl-dev/)  [john-users](https://www.openwall.com/lists/john-users/)  [john-dev](https://www.openwall.com/lists/john-dev/)  [passwdqc-users](https://www.openwall.com/lists/passwdqc-users/)  [yescrypt](https://www.openwall.com/lists/yescrypt/)  [popa3d-users](https://www.openwall.com/lists/popa3d-users/)  /  [oss-security](https://www.openwall.com/lists/oss-security/)  [kernel-hardening](https://www.openwall.com/lists/kernel-hardening/)  [musl](https://www.openwall.com/lists/musl/)  [sabotage](https://www.openwall.com/lists/sabotage/)  [tlsify](https://www.openwall.com/lists/tlsify/)  [passwords](https://www.openwall.com/lists/passwords/)  /  [crypt-dev](https://www.openwall.com/lists/crypt-dev/)  [xvendor](https://www.openwall.com/lists/xvendor/)  /  [Bugtraq](/bugtraq/)  [Full-Disclosure](/full-disclosure/)  [linux-kernel](/linux-kernel/)  linux-[netdev](/netdev/)  [linux-ext4](/linux-ext4/)  [linux-hardening](/linux-hardening/)  [linux-cve-announce](/linux-cve-announce/)  [PHC](/phc-discussions/)| *Open Source and information security mailing list archives*|  | | | | |
| --- | --- | --- | --- | --- |

| | [Hash Suite: Windows password security audit tool. GUI, reports in PDF.](https://hashsuite.openwall.net) | | --- | |
| --- | --- |

# Open Source and information security mailing list archives

### Openwall-hosted community mailing lists

* [oss-security](https://www.openwall.com/lists/oss-security/)
  ([info](https://oss-security.openwall.org/wiki/mailing-lists/oss-security)) -
  Open Source software security discussions
  (there's also a [wiki](https://oss-security.openwall.org/wiki/))* [kernel-hardening](https://www.openwall.com/lists/kernel-hardening/) -
    Linux kernel security hardening discussions (see also linux-hardening below)* [libc-coord](https://www.openwall.com/lists/libc-coord/) -
      [coordination of work on standard C libraries (libc)](https://www.openwall.com/lists/libc-coord/2020/01/30/1)* [musl](https://www.openwall.com/lists/musl/) - discussions around
        [musl](https://www.musl-libc.org),
        a new standard C library for Linux* [passwords](https://www.openwall.com/lists/passwords/) - discussions on anything related to passwords
          except what better fits on other mailing lists* [sabotage](https://www.openwall.com/lists/sabotage/) -
            discussions around Sabotage Linux,
            an experimental distribution based on musl and BusyBox* [tlsify](https://www.openwall.com/lists/tlsify/) - [a TLS API](https://www.openwall.com/lists/tlsify/2015/09/28/1)
              for file-descriptor-oriented applications to make use of secure (TLS) sockets
              without invasive changes to their programming model

### Openwall mailing lists

* [announce](https://www.openwall.com/lists/announce/) - announcements only, very low traffic* [owl-users](https://www.openwall.com/lists/owl-users/) -
    [Openwall GNU/\*/Linux](https://www.openwall.com/Owl/) (Owl) user discussions* [owl-dev](https://www.openwall.com/lists/owl-dev/) - Owl development discussions* [lkrg-users](https://www.openwall.com/lists/lkrg-users/) -
        [Linux Kernel Runtime Guard](https://www.openwall.com/lkrg/) user discussions* [john-users](https://www.openwall.com/lists/john-users/) -
          [John the Ripper](https://www.openwall.com/john/) password cracker user discussions

          See also:
          [selected most useful and currently relevant postings](https://openwall.info/wiki/john/mailing-list-excerpts)* [john-dev](https://www.openwall.com/lists/john-dev/) -
            John the Ripper development discussions* [passwdqc-users](https://www.openwall.com/lists/passwdqc-users/) -
              [passwdqc](https://www.openwall.com/passwdqc/)
              password/passphrase strength checking and policy enforcement toolset user discussions* [yescrypt](https://www.openwall.com/lists/yescrypt/) -
                discussions around [yescrypt](https://www.openwall.com/yescrypt/) KDF and password hashing scheme* [popa3d-users](https://www.openwall.com/lists/popa3d-users/) -
                  [popa3d](https://www.openwall.com/popa3d/) Unix POP3 daemon user discussions

### Obsolete/inactive Openwall(-hosted) mailing lists

* [crypt-dev](https://www.openwall.com/lists/crypt-dev/) -
  [design and implementation of a new password hashing method for servers](https://www.openwall.com/lists/crypt-dev/2011/04/05/2)* [xvendor](https://www.openwall.com/lists/xvendor/)
    ([info](https://www.openwall.com/community/xvendor)) -
    collaboration and information exchange between OS distribution vendors
    (mostly Linux) on non-security topics

### Other (third-party) mailing lists

* [Bugtraq](bugtraq/) -
  security vulnerability announcements and discussions, pre-moderated* [Full-Disclosure](full-disclosure/) -
    security vulnerability announcements and discussions, originally not moderated but now also pre-moderated* [linux-kernel](linux-kernel/) -
      Linux kernel development discussions, very high volume* [netdev](netdev/) -
        Linux networking subsystem development discussions, high volume* [linux-ext4](linux-ext4/) -
          Linux ext4 filesystem development* [linux-hardening](linux-hardening/) -
            Linux kernel security hardening discussions (focused on upstream maintenance of the changes)* [linux-cve-announce](linux-cve-announce/) -
              [Linux kernel CVE announcements](https://docs.kernel.org/process/cve.html)* [PHC discussions](phc-discussions/) -
                [Password Hashing Competition](https://password-hashing.net)
                discussions

Quick Comment:

| [Powered by Openwall GNU/*/Linux](https://www.openwall.com/Owl/ "Powered by Openwall GNU/*/Linux - security-enhanced \"Linux distribution\"") [Powered by OpenVZ](https://openvz.org "Powered by OpenVZ - OS virtualization solution for Linux") 784129 | |
| --- | --- |



=== Content from bugzilla.redhat.com_fba2a212_20250126_130608.html ===


* Login
  + Log in using an SSO provider:- [Fedora Account System](saml2_login.cgi?idp=Fedora%20Account%20System&target=show_bug.cgi%3Fid%3D801896)
    - [Red Hat Associate](saml2_login.cgi?idp=Red%20Hat%20Associate&target=show_bug.cgi%3Fid%3D801896)
    - [Red Hat Customer](saml2_login.cgi?idp=Red%20Hat%20Customer&target=show_bug.cgi%3Fid%3D801896)+ Login using a Red Hat Bugzilla account
  + Forgot Password
  + [Create an Account](createaccount.cgi)

Red Hat Bugzilla – Bug 801896

* [Home](./)
* [New](enter_bug.cgi)
* Search
  + [Simple Search](query.cgi?format=specific)
  + [Advanced Search](query.cgi?format=advanced)
* My Links
  + [Browse](describecomponents.cgi)
  + [Requests](request.cgi)
  + Reports
  + Current State
    - [Search](query.cgi)
    - [Tabular reports](query.cgi?format=report-table)
    - [Graphical reports](query.cgi?format=report-graph)
    - [Duplicates](duplicates.cgi)
  + Other Reports
    - [User Changes](https://bugzilla.redhat.com/page.cgi?id=user_activity.html)
  + Plotly Reports
    - [Bug Status](https://bugzilla.redhat.com/page.cgi?id=bug_status.html)
    - [Bug Severity](https://bugzilla.redhat.com/page.cgi?id=bug_severity.html)
    - [Non-Defaults](https://bugzilla.redhat.com/page.cgi?id=non_defaults.html)
* [Product Dashboard](page.cgi?id=productdashboard.html)

- Help
  * [Page Help!](docs/en/html/using/understanding.html)
  * [Bug Writing Guidelines](page.cgi?id=bug-writing.html)
  * [What's new](page.cgi?id=whats-new.html)
  * [Browser Support Policy](https://access.redhat.com/help/browsers)
  * [5.0.4.rh103 Release notes](page.cgi?id=release-notes.html)
  * [FAQ](page.cgi?id=faq.html)
  * [Guides index](docs/en/html/index.html)
  * [User guide](docs/en/html/using/index.html)
  * [Web Services](docs/en/html/integrating/api/Bugzilla/WebService/Bug.html)
  * [Contact](page.cgi?id=redhat/contact.html)
  * [Legal](page.cgi?id=terms-conditions.html)
- [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")

This site requires JavaScript to be enabled to function correctly, please enable it.

[**Bug 801896**](show_bug.cgi?id=801896)
(CVE-2012-1176)
- [CVE-2012-1176](https://access.redhat.com/security/cve/CVE-2012-1176) pyfribidi: buffer overflow when handling 4-byte utf-8 sequences

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
CVE-2012-1176 pyfribidi: buffer overflow when handling 4-byte utf-8 sequences

| | [Keywords](describekeywords.cgi): | Security | | --- | --- | | [Status](page.cgi?id=fields.html#bug_status): | CLOSED ERRATA | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | CVE-2012-1176 | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components. Select a Classification to narrow down this list.") | Security Response | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Other | | [Component:](describecomponents.cgi?product=Security Response "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | vulnerability | | [Sub Component:](page.cgi?id=fields.html#rh_sub_components "The sub component of a specific component") | --- | | [Version:](page.cgi?id=fields.html#version "The version field defines the version of the software the bug was found in.") | unspecified | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | All | | [OS:](page.cgi?id=fields.html#op_sys "The operating system the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Linux | | [Priority:](page.cgi?id=fields.html#priority) | low | | [Severity:](page.cgi?id=fields.html#bug_severity) | low | | [Target Milestone:](page.cgi?id=fields.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | --- | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Red Hat Product Security | | [QA Contact:](page.cgi?id=fields.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") |  | | [Docs Contact:](page.cgi?id=fields.html#docs_contact "The person responsible for documenting once the bug has been resolved.") |  | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | [Depends On:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") | [801897](show_bug.cgi?id=801897 "CLOSED ERRATA - pyfribidi: buffer overflow when handling 4-byte utf-8 sequences [fedora-all]") | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") |  | | TreeView+ | [depends on](buglist.cgi?bug_id=801896&bug_id_type=anddependson&format=tvp) / [blocked](buglist.cgi?bug_id=801896&bug_id_type=andblocked&format=tvp&tvp_dir=blocked) |  | |  | | [Reported:](page.cgi?id=fields.html#reporter) | 2012-03-09 19:06 UTC by Vincent Danen | | --- | --- | | [Modified:](page.cgi?id=fields.html#modified) | 2019-09-29 12:51 UTC ([History](show_activity.cgi?id=801896)) | | [CC List:](page.cgi?id=fields.html#cclist) | 2 users (show)  gwync hdegoede | | Fixed In Version: |  | | | Doc Type: | Bug Fix | | | Doc Text: |  | | | Clone Of: |  | | | Environment: |  | | | Last Closed: | 2015-08-22 15:09:03 UTC | | | Embargoed: |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | [(Terms of Use)](page.cgi?id=terms-conditions.html) | | | --- | --- | --- | |  | | | |  |
| --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=801896#c0)  Vincent Danen    2012-03-09 19:06:06 UTC  ``` A buffer overflow flaw was reported [1].[2] in pyfribidi's fribidi_utf8_to_unicode() function, due to it handling at most 3 bytes for a single unicode character.  If a 4-byte utf-8 sequence was supplied, it would generate 2 unicode characters which would overflow the logical buffer.  This has been fixed in pyfribidi 0.11 [3].  [1] <http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=663189> [2] <https://github.com/pediapress/pyfribidi/issues/2> [3] <https://github.com/pediapress/pyfribidi/commit/d2860c655357975e7b32d84e6b45e98f0dcecd7a>   ```  [Comment 1](show_bug.cgi?id=801896#c1)  Vincent Danen    2012-03-09 19:06:46 UTC  ``` Created pyfribidi tracking bugs for this issue  Affects: fedora-all [[bug 801897](show_bug.cgi?id=801897 "CLOSED ERRATA - pyfribidi: buffer overflow when handling 4-byte utf-8 sequences [fedora-all]")]   ```  [Comment 2](show_bug.cgi?id=801896#c2)  Vincent Danen    2012-03-14 18:12:19 UTC  ``` This was assigned the name CVE-2012-1176:  <http://www.openwall.com/lists/oss-security/2012/03/14/9>   ``` |  |
| --- | --- |

---

| Note You need to [log in](show_bug.cgi?id=801896&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. |
| --- |

---

[Privacy](page.cgi?id=redhat/privacy.html)
[Contact](page.cgi?id=redhat/contact.html)
[FAQ](page.cgi?id=faq.html)
[Legal](page.cgi?id=terms-conditions.html)



=== Content from github.com_4577fe1a_20250126_002708.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fpediapress%2Fpyfribidi%2Fissues%2Fcreated_by%2F2%29%3A)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fpediapress%2Fpyfribidi%2Fissues%2Fcreated_by%2F2%29%3A)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fissues%2Findex&source=header-repo&source_repo=pediapress%2Fpyfribidi)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[pediapress](/pediapress)
/
**[pyfribidi](/pediapress/pyfribidi)**
Public

* [Notifications](/login?return_to=%2Fpediapress%2Fpyfribidi) You must be signed in to change notification settings
* [Fork
  10](/login?return_to=%2Fpediapress%2Fpyfribidi)
* [Star
   12](/login?return_to=%2Fpediapress%2Fpyfribidi)

* [Code](/pediapress/pyfribidi)
* [Issues
  6](/pediapress/pyfribidi/issues)
* [Pull requests
  3](/pediapress/pyfribidi/pulls)
* [Actions](/pediapress/pyfribidi/actions)
* [Projects
  0](/pediapress/pyfribidi/projects)
* [Wiki](/pediapress/pyfribidi/wiki)
* [Security](/pediapress/pyfribidi/security)
* [Insights](/pediapress/pyfribidi/pulse)

Additional navigation options

* [Code](/pediapress/pyfribidi)
* [Issues](/pediapress/pyfribidi/issues)
* [Pull requests](/pediapress/pyfribidi/pulls)
* [Actions](/pediapress/pyfribidi/actions)
* [Projects](/pediapress/pyfribidi/projects)
* [Wiki](/pediapress/pyfribidi/wiki)
* [Security](/pediapress/pyfribidi/security)
* [Insights](/pediapress/pyfribidi/pulse)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from www.openwall.com_ba127786_20250126_002702.html ===


| [Openwall](/) * [Products](/)   + [Openwall GNU/\*/Linux   *server OS*](/Owl/)+ [Linux Kernel Runtime Guard](/lkrg/)+ [John the Ripper   *password cracker*](/john/)         - [Free & Open Source for any platform](/john/)- [in the cloud](/john/cloud/)- [Pro for Linux](/john/pro/linux/)- [Pro for macOS](/john/pro/macosx/)+ [Wordlists   *for password cracking*](/wordlists/)+ [passwdqc   *policy enforcement*](/passwdqc/)             - [Free & Open Source for Unix](/passwdqc/)- [Pro for Windows (Active Directory)](/passwdqc/windows/)+ [yescrypt   *KDF & password hashing*](/yescrypt/)+ [yespower   *Proof-of-Work (PoW)*](/yespower/)+ [crypt\_blowfish   *password hashing*](/crypt/)+ [phpass   *ditto in PHP*](/phpass/)+ [tcb   *better password shadowing*](/tcb/)+ [Pluggable Authentication Modules](/pam/)+ [scanlogd   *port scan detector*](/scanlogd/)+ [popa3d   *tiny POP3 daemon*](/popa3d/)+ [blists   *web interface to mailing lists*](/blists/)+ [msulogin   *single user mode login*](/msulogin/)+ [php\_mt\_seed   *mt\_rand() cracker*](/php_mt_seed/)* [Services](/services/)* Publications       + [Articles](/articles/)+ [Presentations](/presentations/)* Resources         + [Mailing lists](/lists/)+ [Community wiki](https://openwall.info/wiki/)+ [Source code repositories (GitHub)](https://github.com/openwall)+ [Source code repositories (CVSweb)](https://cvsweb.openwall.com)+ [File archive & mirrors](/mirrors/)+ [How to verify digital signatures](/signatures/)+ [OVE IDs](/ove/)* [What's new](/news) | |
| --- | --- |

| | [Hash Suite - Windows password security audit tool. GUI, reports in PDF.](https://hashsuite.openwall.net) | | --- | |
| --- | --- |

[[<prev]](8) [[next>]](10) [[<thread-prev]](4) [[day]](.) [[month]](..) [[year]](../..) [[list]](../../..)
```

Message-ID: <4F60DD87.8090109@redhat.com>
Date: Wed, 14 Mar 2012 12:03:51 -0600
From: Kurt Seifried <kseifried@...hat.com>
To: oss-security@...ts.openwall.com
CC: Vincent Danen <vdanen@...hat.com>
Subject: Re: CVE request: pyfribidi buffer overflow flaw

On 03/14/2012 09:24 AM, Vincent Danen wrote:
> Could a CVE be assigned for this issue please?  I don't think it's come
> through here yet.
>
> A buffer overflow flaw was reported in pyfribidi's
> fribidi_utf8_to_unicode() function, due to it handling at most 3 bytes
> for a single unicode character.  If a 4-byte utf-8 sequence was
> supplied, it would generate 2 unicode characters which would overflow
> the logical buffer.  This has been fixed in pyfribidi 0.11.
>
> References:
>
> <http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=663189>
> <https://github.com/pediapress/pyfribidi/issues/2>
> <https://github.com/pediapress/pyfribidi/commit/d2860c655357975e7b32d84e6b45e98f0dcecd7a>
>
> <http://www.securityfocus.com/bid/52451/info>
> <https://bugzilla.redhat.com/show_bug.cgi?id=801896>
>

Please use CVE-2012-1176 for this issue.

--
Kurt Seifried Red Hat Security Response Team (SRT)

```

[Powered by blists](https://www.openwall.com/blists/) - [more mailing lists](https://lists.openwall.net)

Please check out the
[Open Source Software Security Wiki](https://oss-security.openwall.org/wiki/), which is counterpart to this
[mailing list](https://oss-security.openwall.org/wiki/mailing-lists/oss-security).

Confused about [mailing lists](/lists/) and their use?
[Read about mailing lists on Wikipedia](https://en.wikipedia.org/wiki/Electronic_mailing_list)
and check out these
[guidelines on proper formatting of your messages](https://www.complang.tuwien.ac.at/anton/mail-news-errors.html).


