=== Content from bugzilla.gnome.org_d6864f28_20250125_225004.html ===


| GNOME Bugzilla â BugÂ 679441 | Dual-monitor lock | Last modified: 2012-07-19 11:07:32 UTC |
| --- | --- | --- |

|  |
| --- |

* [Home](./)

After an [evaluation](https://wiki.gnome.org/Initiatives/DevelopmentInfrastructure), GNOME has moved from Bugzilla to [GitLab](https://gitlab.gnome.org/). [Learn more about GitLab](https://wiki.gnome.org/GitLab).
**No new issues can be reported in GNOME Bugzilla anymore.**

**To report an issue in a GNOME project, [go to GNOME GitLab](https://gitlab.gnome.org/GNOME)**.
Do **not** go to GNOME Gitlab for: [Bluefish](https://sourceforge.net/p/bluefish/tickets), [Doxygen](https://github.com/doxygen/doxygen/issues), [GnuCash](https://bugs.gnucash.org/), [GStreamer](https://gitlab.freedesktop.org/gstreamer/), [java-gnome](https://github.com/afcowie/java-gnome/issues), [LDTP](https://github.com/ldtp/ldtp2/issues), [NetworkManager](https://gitlab.freedesktop.org/NetworkManager/NetworkManager/issues), [Tomboy](https://github.com/tomboy-notes/tomboy/issues).

[**BugÂ 679441**](show_bug.cgi?id=679441) -
Dual-monitor lock

|  | |
| --- | --- |
| [Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.") | Dual-monitor lock |

| | [Status](page.cgi?id=fields.html#bug_status): | RESOLVED FIXED | | --- | --- | |  | | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components. Select a Classification to narrow down this list.") | gnome-screensaver | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Deprecated | | [Component:](describecomponents.cgi?product=gnome-screensaver "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | general | | [Version:](page.cgi?id=fields.html#version "The version field defines the version of the software the bug was found in.") | 3.4.x | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Other Linux | |  | | | [Importance](page.cgi?id=fields.html#importance): | Normal normal | | [TargetÂ Milestone](page.cgi?id=fields.html#target_milestone): | --- | | [Assigned To](page.cgi?id=fields.html#assigned_to): | gnome-screensaver maintainers | | [QA Contact:](page.cgi?id=fields.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") | gnome-screensaver maintainers | |  | | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | |  | | | Duplicates: | [680068](show_bug.cgi?id=680068 "RESOLVED DUPLICATE - Multihead different screen size and rotation. Unlock prone to fail.")  ([view as bug list](buglist.cgi?bug_id=680068)) | | | [Depends on:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") |  | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") |  | | Â | | Â | | Reported: | 2012-07-05 13:03 UTC by Georgi Yonchev | | --- | --- | | Modified: | 2012-07-19 11:07 UTC | |  | | | [See Also:](page.cgi?id=fields.html#see_also "This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with a comma. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields.") |  | | [GNOME target:](page.cgi?id=fields.html#cf_gnome_target "A custom Drop Down field in this installation of GNOME Bugzilla.") | --- | | | [GNOME version:](page.cgi?id=fields.html#cf_gnome_version "A custom Drop Down field in this installation of GNOME Bugzilla.") | --- | | |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | | | | --- | --- | --- | | [**debug output**](attachment.cgi?id=218163 "View the content of the attachment") (4.55 KB, application/zip)  [2012-07-06 09:28 UTC](#attach_218163 "Go to the comment associated with the attachment"), Georgi Yonchev | Â | [Details](attachment.cgi?id=218163&action=edit) | | [**gs-window-x11: defer setting bg color until realization**](attachment.cgi?id=219060 "View the content of the attachment") (2.01 KB, patch)  [2012-07-17 19:45 UTC](#attach_219060 "Go to the comment associated with the attachment"), Ray Strode [halfline] | committed | [Details](attachment.cgi?id=219060&action=edit) | [Review](review?bug=679441&attachment=219060) | |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=679441#c0)  Georgi Yonchev    2012-07-05 13:03:09 UTC  ``` When locking dual monitors, only the monitor with focus at the moment of locking gets locked. The second monitor remains visible and usable with the mouse (for example if there is a browser opened, I can click around and browse!), the keyboard is OK - every key press goes to the password input box (which is visible only on the locked monitor [sometimes there are some glitches, and the password dialog is not shown at all - only black screen]).  current version 3.4.2  After downgrade to version 3.4.1 the problem is gone. ``` [Comment 1](show_bug.cgi?id=679441#c1)  Ray Strode [halfline]    2012-07-05 18:16:09 UTC  ``` there were only 3 changes between 3.4.1 and 3.4.2 and it's hard for me to explain how any of those changes could cause this sort of issue.  What distribution are you using?  Do you know if they apply any distro patches?  If you're building from source, can you try reverting the three patches 1 by 1 and identifying the culprit? ``` [Comment 2](show_bug.cgi?id=679441#c2)  Jeff Skaistis    2012-07-05 21:44:38 UTC  ``` I have the same issues, using Arch Linux.  Under 3.4.2, the following will happen: - Locking only blanks the primary display. - Locking with more than one virtual workspace active causes gnome-shell to spin at 100% CPU, and unlock dialog will never appear. Have to kill the gnome session from a console to recover.  When I get some time later, I'll try to build with the patches and see what happens. ``` [Comment 3](show_bug.cgi?id=679441#c3)  Georgi Yonchev    2012-07-06 09:25:01 UTC  ``` My distro is also Arch (x86_64), as far as I see there are no patches applied by Arch for this package.  I'll attach the debug output of both 3.4.1 and 3.4.2 versions. ``` [Comment 4](show_bug.cgi?id=679441#c4)  Georgi Yonchev    2012-07-06 09:28:09 UTC  ``` Created [attachment 218163](attachment.cgi?id=218163 "debug output") [[details]](attachment.cgi?id=218163&action=edit "debug output") debug output  debug output from versions 3.4.2 and 3.4.1 ``` [Comment 5](show_bug.cgi?id=679441#c5)  Jeff Skaistis    2012-07-06 12:49:52 UTC  ``` Another report of this issue in [Bug 679246](show_bug.cgi?id=679246 "RESOLVED OBSOLETE - Password Dialogue gone wrong after suspend"). ``` [Comment 6](show_bug.cgi?id=679441#c6)  skipperTux    2012-07-07 15:28:50 UTC  ``` I am having the same issue on Arch (x64_64) with version 3.4.2 and a dual monitor setup using the nouveau driver. When waking up the system, the secondary screen shows, the primary stays blank and there is no login dialog. ``` [Comment 7](show_bug.cgi?id=679441#c7)  Michael Helmling    2012-07-09 08:11:31 UTC  ``` I am having a very similar issue on Arch (x86_64) since upgrade from 3.4.1 to 3.4.2.  In my case, it's not a dual monitor setup, but I am using a tiling window manager (xmonad) with gnome panel + session. When I lock the screen, the "session locked" screen appears as a single window in its own tile; the other tiles are still visible and react to the mouse. Keyboard input is trapped by the password dialog, however if I click some icon in the status bar which triggers a workspace switch, I even get the keyboard back, which makes this a serious security issue.  Since no relevant packages other than gnome-screensaver were updated at that time, I am pretty sure the issue has something to do with this package. It is interesting, however, that all affected users seem to use arch linux ... ``` [Comment 8](show_bug.cgi?id=679441#c8)  AndrÃ© Klapper    2012-07-09 10:42:31 UTC  ``` I only see comments about being affected by people using Arch Linux so far...  As written before: If you're building from source, can you try reverting the three patches 1 by 1 and identifying the culprit?  Also, is everybody using Nvidia hardware?  All Nouveau driver, or the proprietary one? ``` [Comment 9](show_bug.cgi?id=679441#c9)  Michael Helmling    2012-07-09 11:32:51 UTC  ``` I am using the intel driver; tested both xf86-video-intel-{sna,uxa}. ``` [Comment 10](show_bug.cgi?id=679441#c10)  Ionut Biru    2012-07-09 13:13:11 UTC  ``` Hi, We do not alter or modify the sources in any way. Since you guys think is an arch issue(which is not the case), I have created this packages for testing:  gnome-screensaver 3.4.2-1.1 reverting only the commit " window: don't use GtkRC to override drawing area's background"  gnome-screensaver 3.4.2-1.2 reverting only the commit " window: only show panel on primary head"  <http://pkgbuild.com/~ioni/gnome-screensaver>  Please test this packages and let us know which one works and which doesn't. ``` [Comment 11](show_bug.cgi?id=679441#c11)  Raoul Millais    2012-07-09 13:22:37 UTC  ``` I am using the intel (i915) driver on Arch (x64_64) with version 3.4.2 and a dual monitor setup.  I am also experiencing this bug. ``` [Comment 12](show_bug.cgi?id=679441#c12)  Michael Helmling    2012-07-09 14:46:32 UTC  ``` Ionut, thanks for creating the packages. In my case (single monitor, xmonad),  - bug is gone with 3.4.2-1.1 - bug is present with 3.4.2-1.2 ``` [Comment 13](show_bug.cgi?id=679441#c13)  AndrÃ© Klapper    2012-07-09 14:52:04 UTC  ``` (In reply to [comment #12](show_bug.cgi?id=679441#c12)) > In my case (single monitor, xmonad), > - bug is gone with 3.4.2-1.1 > - bug is present with 3.4.2-1.2  Which means that likely <http://git.gnome.org/browse/gnome-screensaver/commit/?id=fc6695ecb9023b7049fa0dba91276d39f983425e> triggered this, which was about fixing [bug 677793](show_bug.cgi?id=677793 "RESOLVED FIXED - only show the \"top bar\" on the primary display").  halfline: ping?   (In reply to [comment #10](show_bug.cgi?id=679441#c10)) > Since you guys think is an arch issue(which is not the case)  Oh I didn't say or mean that, just summarized previous comments so far. :) ``` [Comment 14](show_bug.cgi?id=679441#c14)  Michael Berg    2012-07-10 13:57:49 UTC  ``` Expieriencing similiar issue but it more like #679246 and [comment 2](show_bug.cgi?id=679441#c2): one Monitor stays visible and the other turns black. cant see the password-box nor enter the password blind. have to restart gdm. arch with gnome-screensaver 3.4.2-1 ``` [Comment 15](show_bug.cgi?id=679441#c15)  bugzilla.gnome.org    2012-07-11 12:48:32 UTC  ``` Bug is fixed for me using Ionut's 3.4.2-1.1  Arch Linux x86_64, all packages up to date  Dual Head, Nouveau driver.  Left (main) screen would remain black with just the date/time visible.  Right screen would sometimes remain semi-usable:    could create a new firefox tab by clicking on the plus with the mouse    could close windows by clicking on the X    could not resize or shade windows    could not type using the keyboard ``` [Comment 16](show_bug.cgi?id=679441#c16)  Ray Strode [halfline]    2012-07-11 20:15:32 UTC  ``` Okay, I've reverted the patch for now and done a 3.4.3 release. ``` [Comment 17](show_bug.cgi?id=679441#c17)  Georgi Yonchev    2012-07-13 06:44:39 UTC  ``` Sad to say, but in 3.4.3 the problem is still here.   Q: Am I the only one that can confirm? ``` [Comment 18](show_bug.cgi?id=679441#c18)  robert    2012-07-13 07:55:58 UTC  ``` I can confirm this. I'm using arch linux x86_64 and the latest update to 3.4.3 didn't solve the problem for me. ``` [Comment 19](show_bug.cgi?id=679441#c19)  Benedict Etzel    2012-07-13 07:57:06 UTC  ``` I can also confirm this issue is still present in 3.4.3 on Arch Linux x86_64. It isn't constantly reproducible however, it worked twice correctly, hiding the second monitor but then returned to the erroneous behaviour. ``` [Comment 20](show_bug.cgi?id=679441#c20)  Michael    2012-07-13 09:37:24 UTC  ``` Yup still there. The first two times I tried it didn't crash gnome shell but left the secondary monitor unprotected. Tried again and here it goes freezing again. ``` [Comment 21](show_bug.cgi?id=679441#c21)  Michael Berg    2012-07-13 12:55:57 UTC  ``` Can confirm erroneous behaviour with arch and 3.4.3.  using both the intel and on another pc the ati open source drivers ``` [Comment 22](show_bug.cgi?id=679441#c22)  C Anthony    2012-07-13 16:30:32 UTC  ``` yes same issue on 3.4.3 (obviously still Arch [x86_64] ;-)  Ray, it appears you have reverted the wrong patch [fc6695ec] by mistake ... the 2+ users above confirmed Ionut's "1.1" pkg, which reverted 43ee32ed (window: don't use GtkRC to override drawing area's background).  i can confirm this behavior:  - commit [fc6695ec](https://git.gnome.org/browse/gnome-screensaver/commit/?id=fc6695ec) (NO ISSUE)     * window: only show panel on primary head)  - commit [43ee32ed](https://git.gnome.org/browse/gnome-screensaver/commit/?id=43ee32ed) (AUTHDIALOG MISSING/BLACK; ONLY LOCKS 1/2 SCREEN)     * window: don't use GtkRC to override drawing area's background  however, thanks to some comments and reading source, i found addtl details:  - both initially fade to 100% black  - non primary screen made visible again [trans] the SAME MOMENT top-panel is painted  - if mouse is on NON-PRIMARY output [trans], auth-dialog WILL NOT be visible upon activation (on keypress, etc; output still transparent)  - if mouse is on PRIMARY screen [black], auth-dialog WILL be made visible when activated (keypress, etc; output displays auth-dialog as expected)  - however, after some pressing esc and moving mouse, it's possible to get into situation where GS thinks the incorrect output is primary, thereby reversing the roles for a time (IOW, mouse@non-primary -> visible, mouse@primary -> invisible)  - aside from the initial fading, at NO POINT IN TIME will the non-primary output EVER switch from transparent (user desktop is visible!) to black/auth-dialog.  ... after realizing the intended primary-only behaviour, i am now capable of restoring my desktop even when faced with the glitches onlined by this bug. it seems nothing is locked or broken per se, you simply cannot see the dialog if your mouse happens to be on the transparent [non-primary] monitor, AND sometimes GS gets the two mixed up.  i tried to crank a patch quick but i'm short on time and unfamiliar with GTK API :-(, but hopefully i've shed additional light. thanks! ``` [Comment 23](show_bug.cgi?id=679441#c23)  C Anthony    2012-07-13 23:29:21 UTC  ``` well i lied ... there are times i actually lock, or, as it seems, the mouse is incapable of being seen and/or focusing on the underlying windows (though i have no idea really, as they are either both black or one-trans/one-black).  happens more when apps are open on desktop; when i tested earlier i had zero apps open.  either way, it's super annoying ;-), and it's * definitely* 43ee32ed causing all the headache ... once that goes away [revert] ... life moves forward again. ``` [Comment 24](show_bug.cgi?id=679441#c24)  C Anthony    2012-07-15 17:49:28 UTC  ``` can we get a respin of the last point release? this bug appears CONFIRMED, and is a simple regression to fix.  however, wrong patch was reverted (AFAICT that patch can be reapplied), thus it's NOT fixed ...  i have 4 machines with dual+ monitors (work/home/etc), various hardware, and every single one of them is affected :-( ``` [Comment 25](show_bug.cgi?id=679441#c25)  Alexandre Rostovtsev    2012-07-15 21:57:45 UTC  ``` Gentoo users are also reporting that commit [43ee32ed](https://git.gnome.org/browse/gnome-screensaver/commit/?id=43ee32ed) is the one that causes problems on dual-head: <https://bugs.gentoo.org/show_bug.cgi?id=425070#c28>  3.4.3 had reverted the wrong commit and therefore is still broken. ``` [Comment 26](show_bug.cgi?id=679441#c26)  Renato Ferreira    2012-07-17 06:12:06 UTC  ``` I can also confirm this bug under Arch Linux with version 3.4.3. For now I have just downgraded the package, but reverting the correct patch seems to be the best solution. ``` [Comment 27](show_bug.cgi?id=679441#c27)  Ray Strode [halfline]    2012-07-17 19:33:30 UTC  ``` The only explanation I can come up with is that realizing the drawing area early is causing issues.  Under normal conditions it gets realized right before it's mapped to the screen.  It's not immediately obvious to me why that would be a problem, and try as I might, I can't reproduce what you guys are seeing, so what I'm going to do is:  1) revert the reversion and revert the offending commit and do another 3.4 release 2) add a new commit that changes the gtk_widget_realize call to handler to the "realize" signal instead, so we don't force things to happen early but instead just react to them happening.  Then I'll do a 3.5 release ``` [Comment 28](show_bug.cgi?id=679441#c28)  Ray Strode [halfline]    2012-07-17 19:45:31 UTC  ``` Created [attachment 219060](attachment.cgi?id=219060 "gs-window-x11: defer setting bg color until realization") [[details]](attachment.cgi?id=219060&action=edit "gs-window-x11: defer setting bg color until realization") [[review]](review?bug=679441&attachment=219060) gs-window-x11: defer setting bg color until realization  commit [43ee32edaddb9b9b9f4b43c47ca73d7b4eea9fae](https://git.gnome.org/browse/gnome-screensaver/commit/?id=43ee32edaddb9b9b9f4b43c47ca73d7b4eea9fae) changed the drawing area associated with each monitors screensaver window to get realized early.  That change is seemingly causing problems for users.  This commit stops preemptively realizing the drawing areas, and instead makes the background color settings get applied reactively in response to realization.  <http://bugzilla.gnome.org/show_bug.cgi?id=679441> ``` [Comment 29](show_bug.cgi?id=679441#c29)  Ray Strode [halfline]    2012-07-17 19:46:19 UTC  ``` Comment on [attachment 219060](attachment.cgi?id=219060 "gs-window-x11: defer setting bg color until realization") [[details]](attachment.cgi?id=219060&action=edit "gs-window-x11: defer setting bg color until realization") [[review]](review?bug=679441&attachment=219060) gs-window-x11: defer setting bg color until realization  okay i've pushed that patch to master ``` [Comment 30](show_bug.cgi?id=679441#c30)  Ray Strode [halfline]    2012-07-17 20:00:27 UTC  ``` I've released 3.4.4 and 3.5.4.  I'd appreciate feedback on if they make the situation better. ``` [Comment 31](show_bug.cgi?id=679441#c31)  Ray Strode [halfline]    2012-07-17 20:52:44 UTC  ``` *** [Bug 680068](show_bug.cgi?id=680068 "RESOLVED DUPLICATE - Multihead different screen size and rotation. Unlock prone to fail.") has been marked as a duplicate of this bug. *** ``` [Comment 32](show_bug.cgi?id=679441#c32)  Renato Ferreira    2012-07-17 21:48:44 UTC  ``` I can confirm that both 3.4.4 and 3.5.4 fix this bug under Arch Linux. With either version, both monitors get locked properly. ``` [Comment 33](show_bug.cgi?id=679441#c33)  Blake Arnold    2012-07-17 22:05:49 UTC  ``` I can also confirm that 3.5.4 fixes the bug under the following OS. Thanks for the great work!  Linux 3.4.4-3-ARCH x86_64 ``` [Comment 34](show_bug.cgi?id=679441#c34)  Georgi Yonchev    2012-07-18 07:32:34 UTC  ``` Me happy :) Confirming and closing this issue as fixed. tested version 3.4.4 +1 halfline! ``` [Comment 35](show_bug.cgi?id=679441#c35)  skipperTux    2012-07-19 11:07:32 UTC  ``` Issue is resolved with gnome-screensaver 3.4.4 on Linux 3.4.5-1-ARCH. Both monitors get locked and unlocked properly. Thanks for the effort. ``` |  |
| --- | --- |

---

---

* + [Home](./)
  + | New
  + | [Browse](page.cgi?id=browse.html&product=gnome-screensaver)
  + | [Search](query.cgi)
  + |

    [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
  + | [Reports](page.cgi?id=reports.html)
  + |
    [Help](http://www.bugzilla.org/docs/4.4/en/html/bug_page.html)
  + |
    [Log In](show_bug.cgi?id=679441&GoAheadAndLogIn=1)

    Remember

    [x]
  + |
    [Forgot Password](show_bug.cgi?id=679441&GoAheadAndLogIn=1#forgot)
    Login:

    [x]



=== Content from www.openwall.com_30c19b57_20250125_225003.html ===


| [Openwall](/) * [Products](/)   + [Openwall GNU/\*/Linux   *server OS*](/Owl/)+ [Linux Kernel Runtime Guard](/lkrg/)+ [John the Ripper   *password cracker*](/john/)         - [Free & Open Source for any platform](/john/)- [in the cloud](/john/cloud/)- [Pro for Linux](/john/pro/linux/)- [Pro for macOS](/john/pro/macosx/)+ [Wordlists   *for password cracking*](/wordlists/)+ [passwdqc   *policy enforcement*](/passwdqc/)             - [Free & Open Source for Unix](/passwdqc/)- [Pro for Windows (Active Directory)](/passwdqc/windows/)+ [yescrypt   *KDF & password hashing*](/yescrypt/)+ [yespower   *Proof-of-Work (PoW)*](/yespower/)+ [crypt\_blowfish   *password hashing*](/crypt/)+ [phpass   *ditto in PHP*](/phpass/)+ [tcb   *better password shadowing*](/tcb/)+ [Pluggable Authentication Modules](/pam/)+ [scanlogd   *port scan detector*](/scanlogd/)+ [popa3d   *tiny POP3 daemon*](/popa3d/)+ [blists   *web interface to mailing lists*](/blists/)+ [msulogin   *single user mode login*](/msulogin/)+ [php\_mt\_seed   *mt\_rand() cracker*](/php_mt_seed/)* [Services](/services/)* Publications       + [Articles](/articles/)+ [Presentations](/presentations/)* Resources         + [Mailing lists](/lists/)+ [Community wiki](https://openwall.info/wiki/)+ [Source code repositories (GitHub)](https://github.com/openwall)+ [Source code repositories (CVSweb)](https://cvsweb.openwall.com)+ [File archive & mirrors](/mirrors/)+ [How to verify digital signatures](/signatures/)+ [OVE IDs](/ove/)* [What's new](/news) | |
| --- | --- |

| | [Follow @Openwall on Twitter for new release announcements and other news](https://twitter.com/openwall) | | --- | |
| --- | --- |

[[<prev]](4) [[next>]](6) [[<thread-prev]](3) [[day]](.) [[month]](..) [[year]](../..) [[list]](../../..)
```

Message-ID: <501C11CE.1040206@redhat.com>
Date: Fri, 03 Aug 2012 12:00:46 -0600
From: Kurt Seifried <kseifried@...hat.com>
To: oss-security@...ts.openwall.com
CC: Marcus Meissner <meissner@...e.de>
Subject: Re: gnome-screensaver 3.4.2 locked only active screen

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On 08/03/2012 07:12 AM, Marcus Meissner wrote:
> Hi,
>
> (FYI ... if no one shipped g-s 3.4.2, it probably does not need a
> CVE. openSUSE 12.2 fixed it during development.)
>
> gnome-screensaver 3.4.2 (the only version affected) had the
> screenlock on multi-display settings only locking the screen with
> active focus. The other displayscreens staid unlocked and usable.
>
> <https://bugzilla.gnome.org/679441>
>
> Ciao, Marcus

The bug entry shows multiple people complaining so looks like it's out
there. Please use CVE-2012-3452 for this issue.

- --
Kurt Seifried Red Hat Security Response Team (SRT)
PGP: 0x5E267993 A90B F995 7350 148F 66BF 7554 160D 4553 5E26 7993

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.12 (GNU/Linux)
Comment: Using GnuPG with Mozilla - <http://enigmail.mozdev.org/>

iQIcBAEBAgAGBQJQHBHOAAoJEBYNRVNeJnmToAkP/0MSpx/h5wMy418bALPn0kmK
6nXkem9mvSsURW6LMvlOIscvWcCOLL90orV5HQQnfRf2zoxfWaSEylYxwCuWenFq
nVMDBcc8kehBcyc1NrFNEyKiSS640/hvlBUjUtwIsYHFmkTnYa24M507LEhs/5tn
Ey/t5KqNtWt5xCyvrU9tEjcv4lWfW700sDMYl9TgDIDBu6CLHAPDWmAvbTUugaL9
RvFnaFaXfb8fLF3h2dJuxMEr0vFn3l//tdtHBi4N4v8u5Q1+uOii0skFObw+SZis
4CRAfGi9t4ss5Vcp8RjuSBngQmHSXVssoETRnRBT00QgK52V2NVELLQy1QeG0nUr
6Z6mcwX2Vi/AA4T0oIDEh5WHYrZyYkQ1EOZ5XmE65DLqykmAQzfAw21A9e6W7unq
UH8FseAZCBGdjn0slgjKbtSO15GiUmtQ9ir6VURf8khkzxRJsAC4MF1UWvspjshA
HDVUf67bLfgMnoGs44li0xujDB7v6nwRizwy5siZm6kaid/B8PxBjRWU6i8IRWfP
O1HQ2p/HCmRVs3nIcJonaeGRfhBK6ooXasfiYKrKOjhSWd5tMt5HcfSsIA+H1blO
z68n5DgIhiuZA+SQmhQHKAgkQYY4DHmjDMozKE4pUNxR+VNZziXVpwWor9dl7NQU
JEbKXtUjdkT45fbfp8Ke
=B99R
-----END PGP SIGNATURE-----

```

[Powered by blists](https://www.openwall.com/blists/) - [more mailing lists](https://lists.openwall.net)

Please check out the
[Open Source Software Security Wiki](https://oss-security.openwall.org/wiki/), which is counterpart to this
[mailing list](https://oss-security.openwall.org/wiki/mailing-lists/oss-security).

Confused about [mailing lists](/lists/) and their use?
[Read about mailing lists on Wikipedia](https://en.wikipedia.org/wiki/Electronic_mailing_list)
and check out these
[guidelines on proper formatting of your messages](https://www.complang.tuwien.ac.at/anton/mail-news-errors.html).



=== Content from www.openwall.com_75d08e66_20250125_225003.html ===


| [Openwall](/) * [Products](/)   + [Openwall GNU/\*/Linux   *server OS*](/Owl/)+ [Linux Kernel Runtime Guard](/lkrg/)+ [John the Ripper   *password cracker*](/john/)         - [Free & Open Source for any platform](/john/)- [in the cloud](/john/cloud/)- [Pro for Linux](/john/pro/linux/)- [Pro for macOS](/john/pro/macosx/)+ [Wordlists   *for password cracking*](/wordlists/)+ [passwdqc   *policy enforcement*](/passwdqc/)             - [Free & Open Source for Unix](/passwdqc/)- [Pro for Windows (Active Directory)](/passwdqc/windows/)+ [yescrypt   *KDF & password hashing*](/yescrypt/)+ [yespower   *Proof-of-Work (PoW)*](/yespower/)+ [crypt\_blowfish   *password hashing*](/crypt/)+ [phpass   *ditto in PHP*](/phpass/)+ [tcb   *better password shadowing*](/tcb/)+ [Pluggable Authentication Modules](/pam/)+ [scanlogd   *port scan detector*](/scanlogd/)+ [popa3d   *tiny POP3 daemon*](/popa3d/)+ [blists   *web interface to mailing lists*](/blists/)+ [msulogin   *single user mode login*](/msulogin/)+ [php\_mt\_seed   *mt\_rand() cracker*](/php_mt_seed/)* [Services](/services/)* Publications       + [Articles](/articles/)+ [Presentations](/presentations/)* Resources         + [Mailing lists](/lists/)+ [Community wiki](https://openwall.info/wiki/)+ [Source code repositories (GitHub)](https://github.com/openwall)+ [Source code repositories (CVSweb)](https://cvsweb.openwall.com)+ [File archive & mirrors](/mirrors/)+ [How to verify digital signatures](/signatures/)+ [OVE IDs](/ove/)* [What's new](/news) | |
| --- | --- |

| | [Follow @Openwall on Twitter for new release announcements and other news](https://twitter.com/openwall) | | --- | |
| --- | --- |

[[<prev]](2) [[next>]](4) [[thread-next>]](5) [[day]](.) [[month]](..) [[year]](../..) [[list]](../../..)
```

Message-ID: <20120803131217.GA16635@suse.de>
Date: Fri, 3 Aug 2012 15:12:17 +0200
From: Marcus Meissner <meissner@...e.de>
To: OSS Security List <oss-security@...ts.openwall.com>
Subject: gnome-screensaver 3.4.2 locked only active screen

Hi,

(FYI ... if no one shipped g-s 3.4.2, it probably does not need a CVE.
 openSUSE 12.2 fixed it during development.)

gnome-screensaver 3.4.2 (the only version affected) had the screenlock
on multi-display settings only locking the screen with active focus.
The other displayscreens staid unlocked and usable.

<https://bugzilla.gnome.org/679441>

Ciao, Marcus
--
Open Linux Security Engineer Position at SUSE: <http://bit.ly/Li4RbS>

```

[Powered by blists](https://www.openwall.com/blists/) - [more mailing lists](https://lists.openwall.net)

Please check out the
[Open Source Software Security Wiki](https://oss-security.openwall.org/wiki/), which is counterpart to this
[mailing list](https://oss-security.openwall.org/wiki/mailing-lists/oss-security).

Confused about [mailing lists](/lists/) and their use?
[Read about mailing lists on Wikipedia](https://en.wikipedia.org/wiki/Electronic_mailing_list)
and check out these
[guidelines on proper formatting of your messages](https://www.complang.tuwien.ac.at/anton/mail-news-errors.html).



=== Content from bugzilla.gnome.org_8564e5f3_20250126_123348.html ===


| GNOME Bugzilla â BugÂ 679441 | Dual-monitor lock | Last modified: 2012-07-19 11:07:32 UTC |
| --- | --- | --- |

|  |
| --- |

* [Home](./)

After an [evaluation](https://wiki.gnome.org/Initiatives/DevelopmentInfrastructure), GNOME has moved from Bugzilla to [GitLab](https://gitlab.gnome.org/). [Learn more about GitLab](https://wiki.gnome.org/GitLab).
**No new issues can be reported in GNOME Bugzilla anymore.**

**To report an issue in a GNOME project, [go to GNOME GitLab](https://gitlab.gnome.org/GNOME)**.
Do **not** go to GNOME Gitlab for: [Bluefish](https://sourceforge.net/p/bluefish/tickets), [Doxygen](https://github.com/doxygen/doxygen/issues), [GnuCash](https://bugs.gnucash.org/), [GStreamer](https://gitlab.freedesktop.org/gstreamer/), [java-gnome](https://github.com/afcowie/java-gnome/issues), [LDTP](https://github.com/ldtp/ldtp2/issues), [NetworkManager](https://gitlab.freedesktop.org/NetworkManager/NetworkManager/issues), [Tomboy](https://github.com/tomboy-notes/tomboy/issues).

[**BugÂ 679441**](show_bug.cgi?id=679441) -
Dual-monitor lock

|  | |
| --- | --- |
| [Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.") | Dual-monitor lock |

| | [Status](page.cgi?id=fields.html#bug_status): | RESOLVED FIXED | | --- | --- | |  | | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components. Select a Classification to narrow down this list.") | gnome-screensaver | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Deprecated | | [Component:](describecomponents.cgi?product=gnome-screensaver "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | general | | [Version:](page.cgi?id=fields.html#version "The version field defines the version of the software the bug was found in.") | 3.4.x | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Other Linux | |  | | | [Importance](page.cgi?id=fields.html#importance): | Normal normal | | [TargetÂ Milestone](page.cgi?id=fields.html#target_milestone): | --- | | [Assigned To](page.cgi?id=fields.html#assigned_to): | gnome-screensaver maintainers | | [QA Contact:](page.cgi?id=fields.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") | gnome-screensaver maintainers | |  | | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | |  | | | Duplicates: | [680068](show_bug.cgi?id=680068 "RESOLVED DUPLICATE - Multihead different screen size and rotation. Unlock prone to fail.")  ([view as bug list](buglist.cgi?bug_id=680068)) | | | [Depends on:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") |  | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") |  | | Â | | Â | | Reported: | 2012-07-05 13:03 UTC by Georgi Yonchev | | --- | --- | | Modified: | 2012-07-19 11:07 UTC | |  | | | [See Also:](page.cgi?id=fields.html#see_also "This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with a comma. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields.") |  | | [GNOME target:](page.cgi?id=fields.html#cf_gnome_target "A custom Drop Down field in this installation of GNOME Bugzilla.") | --- | | | [GNOME version:](page.cgi?id=fields.html#cf_gnome_version "A custom Drop Down field in this installation of GNOME Bugzilla.") | --- | | |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | | | | --- | --- | --- | | [**debug output**](attachment.cgi?id=218163 "View the content of the attachment") (4.55 KB, application/zip)  [2012-07-06 09:28 UTC](#attach_218163 "Go to the comment associated with the attachment"), Georgi Yonchev | Â | [Details](attachment.cgi?id=218163&action=edit) | | [**gs-window-x11: defer setting bg color until realization**](attachment.cgi?id=219060 "View the content of the attachment") (2.01 KB, patch)  [2012-07-17 19:45 UTC](#attach_219060 "Go to the comment associated with the attachment"), Ray Strode [halfline] | committed | [Details](attachment.cgi?id=219060&action=edit) | [Review](review?bug=679441&attachment=219060) | |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=679441#c0)  Georgi Yonchev    2012-07-05 13:03:09 UTC  ``` When locking dual monitors, only the monitor with focus at the moment of locking gets locked. The second monitor remains visible and usable with the mouse (for example if there is a browser opened, I can click around and browse!), the keyboard is OK - every key press goes to the password input box (which is visible only on the locked monitor [sometimes there are some glitches, and the password dialog is not shown at all - only black screen]).  current version 3.4.2  After downgrade to version 3.4.1 the problem is gone. ``` [Comment 1](show_bug.cgi?id=679441#c1)  Ray Strode [halfline]    2012-07-05 18:16:09 UTC  ``` there were only 3 changes between 3.4.1 and 3.4.2 and it's hard for me to explain how any of those changes could cause this sort of issue.  What distribution are you using?  Do you know if they apply any distro patches?  If you're building from source, can you try reverting the three patches 1 by 1 and identifying the culprit? ``` [Comment 2](show_bug.cgi?id=679441#c2)  Jeff Skaistis    2012-07-05 21:44:38 UTC  ``` I have the same issues, using Arch Linux.  Under 3.4.2, the following will happen: - Locking only blanks the primary display. - Locking with more than one virtual workspace active causes gnome-shell to spin at 100% CPU, and unlock dialog will never appear. Have to kill the gnome session from a console to recover.  When I get some time later, I'll try to build with the patches and see what happens. ``` [Comment 3](show_bug.cgi?id=679441#c3)  Georgi Yonchev    2012-07-06 09:25:01 UTC  ``` My distro is also Arch (x86_64), as far as I see there are no patches applied by Arch for this package.  I'll attach the debug output of both 3.4.1 and 3.4.2 versions. ``` [Comment 4](show_bug.cgi?id=679441#c4)  Georgi Yonchev    2012-07-06 09:28:09 UTC  ``` Created [attachment 218163](attachment.cgi?id=218163 "debug output") [[details]](attachment.cgi?id=218163&action=edit "debug output") debug output  debug output from versions 3.4.2 and 3.4.1 ``` [Comment 5](show_bug.cgi?id=679441#c5)  Jeff Skaistis    2012-07-06 12:49:52 UTC  ``` Another report of this issue in [Bug 679246](show_bug.cgi?id=679246 "RESOLVED OBSOLETE - Password Dialogue gone wrong after suspend"). ``` [Comment 6](show_bug.cgi?id=679441#c6)  skipperTux    2012-07-07 15:28:50 UTC  ``` I am having the same issue on Arch (x64_64) with version 3.4.2 and a dual monitor setup using the nouveau driver. When waking up the system, the secondary screen shows, the primary stays blank and there is no login dialog. ``` [Comment 7](show_bug.cgi?id=679441#c7)  Michael Helmling    2012-07-09 08:11:31 UTC  ``` I am having a very similar issue on Arch (x86_64) since upgrade from 3.4.1 to 3.4.2.  In my case, it's not a dual monitor setup, but I am using a tiling window manager (xmonad) with gnome panel + session. When I lock the screen, the "session locked" screen appears as a single window in its own tile; the other tiles are still visible and react to the mouse. Keyboard input is trapped by the password dialog, however if I click some icon in the status bar which triggers a workspace switch, I even get the keyboard back, which makes this a serious security issue.  Since no relevant packages other than gnome-screensaver were updated at that time, I am pretty sure the issue has something to do with this package. It is interesting, however, that all affected users seem to use arch linux ... ``` [Comment 8](show_bug.cgi?id=679441#c8)  AndrÃ© Klapper    2012-07-09 10:42:31 UTC  ``` I only see comments about being affected by people using Arch Linux so far...  As written before: If you're building from source, can you try reverting the three patches 1 by 1 and identifying the culprit?  Also, is everybody using Nvidia hardware?  All Nouveau driver, or the proprietary one? ``` [Comment 9](show_bug.cgi?id=679441#c9)  Michael Helmling    2012-07-09 11:32:51 UTC  ``` I am using the intel driver; tested both xf86-video-intel-{sna,uxa}. ``` [Comment 10](show_bug.cgi?id=679441#c10)  Ionut Biru    2012-07-09 13:13:11 UTC  ``` Hi, We do not alter or modify the sources in any way. Since you guys think is an arch issue(which is not the case), I have created this packages for testing:  gnome-screensaver 3.4.2-1.1 reverting only the commit " window: don't use GtkRC to override drawing area's background"  gnome-screensaver 3.4.2-1.2 reverting only the commit " window: only show panel on primary head"  <http://pkgbuild.com/~ioni/gnome-screensaver>  Please test this packages and let us know which one works and which doesn't. ``` [Comment 11](show_bug.cgi?id=679441#c11)  Raoul Millais    2012-07-09 13:22:37 UTC  ``` I am using the intel (i915) driver on Arch (x64_64) with version 3.4.2 and a dual monitor setup.  I am also experiencing this bug. ``` [Comment 12](show_bug.cgi?id=679441#c12)  Michael Helmling    2012-07-09 14:46:32 UTC  ``` Ionut, thanks for creating the packages. In my case (single monitor, xmonad),  - bug is gone with 3.4.2-1.1 - bug is present with 3.4.2-1.2 ``` [Comment 13](show_bug.cgi?id=679441#c13)  AndrÃ© Klapper    2012-07-09 14:52:04 UTC  ``` (In reply to [comment #12](show_bug.cgi?id=679441#c12)) > In my case (single monitor, xmonad), > - bug is gone with 3.4.2-1.1 > - bug is present with 3.4.2-1.2  Which means that likely <http://git.gnome.org/browse/gnome-screensaver/commit/?id=fc6695ecb9023b7049fa0dba91276d39f983425e> triggered this, which was about fixing [bug 677793](show_bug.cgi?id=677793 "RESOLVED FIXED - only show the \"top bar\" on the primary display").  halfline: ping?   (In reply to [comment #10](show_bug.cgi?id=679441#c10)) > Since you guys think is an arch issue(which is not the case)  Oh I didn't say or mean that, just summarized previous comments so far. :) ``` [Comment 14](show_bug.cgi?id=679441#c14)  Michael Berg    2012-07-10 13:57:49 UTC  ``` Expieriencing similiar issue but it more like #679246 and [comment 2](show_bug.cgi?id=679441#c2): one Monitor stays visible and the other turns black. cant see the password-box nor enter the password blind. have to restart gdm. arch with gnome-screensaver 3.4.2-1 ``` [Comment 15](show_bug.cgi?id=679441#c15)  bugzilla.gnome.org    2012-07-11 12:48:32 UTC  ``` Bug is fixed for me using Ionut's 3.4.2-1.1  Arch Linux x86_64, all packages up to date  Dual Head, Nouveau driver.  Left (main) screen would remain black with just the date/time visible.  Right screen would sometimes remain semi-usable:    could create a new firefox tab by clicking on the plus with the mouse    could close windows by clicking on the X    could not resize or shade windows    could not type using the keyboard ``` [Comment 16](show_bug.cgi?id=679441#c16)  Ray Strode [halfline]    2012-07-11 20:15:32 UTC  ``` Okay, I've reverted the patch for now and done a 3.4.3 release. ``` [Comment 17](show_bug.cgi?id=679441#c17)  Georgi Yonchev    2012-07-13 06:44:39 UTC  ``` Sad to say, but in 3.4.3 the problem is still here.   Q: Am I the only one that can confirm? ``` [Comment 18](show_bug.cgi?id=679441#c18)  robert    2012-07-13 07:55:58 UTC  ``` I can confirm this. I'm using arch linux x86_64 and the latest update to 3.4.3 didn't solve the problem for me. ``` [Comment 19](show_bug.cgi?id=679441#c19)  Benedict Etzel    2012-07-13 07:57:06 UTC  ``` I can also confirm this issue is still present in 3.4.3 on Arch Linux x86_64. It isn't constantly reproducible however, it worked twice correctly, hiding the second monitor but then returned to the erroneous behaviour. ``` [Comment 20](show_bug.cgi?id=679441#c20)  Michael    2012-07-13 09:37:24 UTC  ``` Yup still there. The first two times I tried it didn't crash gnome shell but left the secondary monitor unprotected. Tried again and here it goes freezing again. ``` [Comment 21](show_bug.cgi?id=679441#c21)  Michael Berg    2012-07-13 12:55:57 UTC  ``` Can confirm erroneous behaviour with arch and 3.4.3.  using both the intel and on another pc the ati open source drivers ``` [Comment 22](show_bug.cgi?id=679441#c22)  C Anthony    2012-07-13 16:30:32 UTC  ``` yes same issue on 3.4.3 (obviously still Arch [x86_64] ;-)  Ray, it appears you have reverted the wrong patch [fc6695ec] by mistake ... the 2+ users above confirmed Ionut's "1.1" pkg, which reverted 43ee32ed (window: don't use GtkRC to override drawing area's background).  i can confirm this behavior:  - commit [fc6695ec](https://git.gnome.org/browse/gnome-screensaver/commit/?id=fc6695ec) (NO ISSUE)     * window: only show panel on primary head)  - commit [43ee32ed](https://git.gnome.org/browse/gnome-screensaver/commit/?id=43ee32ed) (AUTHDIALOG MISSING/BLACK; ONLY LOCKS 1/2 SCREEN)     * window: don't use GtkRC to override drawing area's background  however, thanks to some comments and reading source, i found addtl details:  - both initially fade to 100% black  - non primary screen made visible again [trans] the SAME MOMENT top-panel is painted  - if mouse is on NON-PRIMARY output [trans], auth-dialog WILL NOT be visible upon activation (on keypress, etc; output still transparent)  - if mouse is on PRIMARY screen [black], auth-dialog WILL be made visible when activated (keypress, etc; output displays auth-dialog as expected)  - however, after some pressing esc and moving mouse, it's possible to get into situation where GS thinks the incorrect output is primary, thereby reversing the roles for a time (IOW, mouse@non-primary -> visible, mouse@primary -> invisible)  - aside from the initial fading, at NO POINT IN TIME will the non-primary output EVER switch from transparent (user desktop is visible!) to black/auth-dialog.  ... after realizing the intended primary-only behaviour, i am now capable of restoring my desktop even when faced with the glitches onlined by this bug. it seems nothing is locked or broken per se, you simply cannot see the dialog if your mouse happens to be on the transparent [non-primary] monitor, AND sometimes GS gets the two mixed up.  i tried to crank a patch quick but i'm short on time and unfamiliar with GTK API :-(, but hopefully i've shed additional light. thanks! ``` [Comment 23](show_bug.cgi?id=679441#c23)  C Anthony    2012-07-13 23:29:21 UTC  ``` well i lied ... there are times i actually lock, or, as it seems, the mouse is incapable of being seen and/or focusing on the underlying windows (though i have no idea really, as they are either both black or one-trans/one-black).  happens more when apps are open on desktop; when i tested earlier i had zero apps open.  either way, it's super annoying ;-), and it's * definitely* 43ee32ed causing all the headache ... once that goes away [revert] ... life moves forward again. ``` [Comment 24](show_bug.cgi?id=679441#c24)  C Anthony    2012-07-15 17:49:28 UTC  ``` can we get a respin of the last point release? this bug appears CONFIRMED, and is a simple regression to fix.  however, wrong patch was reverted (AFAICT that patch can be reapplied), thus it's NOT fixed ...  i have 4 machines with dual+ monitors (work/home/etc), various hardware, and every single one of them is affected :-( ``` [Comment 25](show_bug.cgi?id=679441#c25)  Alexandre Rostovtsev    2012-07-15 21:57:45 UTC  ``` Gentoo users are also reporting that commit [43ee32ed](https://git.gnome.org/browse/gnome-screensaver/commit/?id=43ee32ed) is the one that causes problems on dual-head: <https://bugs.gentoo.org/show_bug.cgi?id=425070#c28>  3.4.3 had reverted the wrong commit and therefore is still broken. ``` [Comment 26](show_bug.cgi?id=679441#c26)  Renato Ferreira    2012-07-17 06:12:06 UTC  ``` I can also confirm this bug under Arch Linux with version 3.4.3. For now I have just downgraded the package, but reverting the correct patch seems to be the best solution. ``` [Comment 27](show_bug.cgi?id=679441#c27)  Ray Strode [halfline]    2012-07-17 19:33:30 UTC  ``` The only explanation I can come up with is that realizing the drawing area early is causing issues.  Under normal conditions it gets realized right before it's mapped to the screen.  It's not immediately obvious to me why that would be a problem, and try as I might, I can't reproduce what you guys are seeing, so what I'm going to do is:  1) revert the reversion and revert the offending commit and do another 3.4 release 2) add a new commit that changes the gtk_widget_realize call to handler to the "realize" signal instead, so we don't force things to happen early but instead just react to them happening.  Then I'll do a 3.5 release ``` [Comment 28](show_bug.cgi?id=679441#c28)  Ray Strode [halfline]    2012-07-17 19:45:31 UTC  ``` Created [attachment 219060](attachment.cgi?id=219060 "gs-window-x11: defer setting bg color until realization") [[details]](attachment.cgi?id=219060&action=edit "gs-window-x11: defer setting bg color until realization") [[review]](review?bug=679441&attachment=219060) gs-window-x11: defer setting bg color until realization  commit [43ee32edaddb9b9b9f4b43c47ca73d7b4eea9fae](https://git.gnome.org/browse/gnome-screensaver/commit/?id=43ee32edaddb9b9b9f4b43c47ca73d7b4eea9fae) changed the drawing area associated with each monitors screensaver window to get realized early.  That change is seemingly causing problems for users.  This commit stops preemptively realizing the drawing areas, and instead makes the background color settings get applied reactively in response to realization.  <http://bugzilla.gnome.org/show_bug.cgi?id=679441> ``` [Comment 29](show_bug.cgi?id=679441#c29)  Ray Strode [halfline]    2012-07-17 19:46:19 UTC  ``` Comment on [attachment 219060](attachment.cgi?id=219060 "gs-window-x11: defer setting bg color until realization") [[details]](attachment.cgi?id=219060&action=edit "gs-window-x11: defer setting bg color until realization") [[review]](review?bug=679441&attachment=219060) gs-window-x11: defer setting bg color until realization  okay i've pushed that patch to master ``` [Comment 30](show_bug.cgi?id=679441#c30)  Ray Strode [halfline]    2012-07-17 20:00:27 UTC  ``` I've released 3.4.4 and 3.5.4.  I'd appreciate feedback on if they make the situation better. ``` [Comment 31](show_bug.cgi?id=679441#c31)  Ray Strode [halfline]    2012-07-17 20:52:44 UTC  ``` *** [Bug 680068](show_bug.cgi?id=680068 "RESOLVED DUPLICATE - Multihead different screen size and rotation. Unlock prone to fail.") has been marked as a duplicate of this bug. *** ``` [Comment 32](show_bug.cgi?id=679441#c32)  Renato Ferreira    2012-07-17 21:48:44 UTC  ``` I can confirm that both 3.4.4 and 3.5.4 fix this bug under Arch Linux. With either version, both monitors get locked properly. ``` [Comment 33](show_bug.cgi?id=679441#c33)  Blake Arnold    2012-07-17 22:05:49 UTC  ``` I can also confirm that 3.5.4 fixes the bug under the following OS. Thanks for the great work!  Linux 3.4.4-3-ARCH x86_64 ``` [Comment 34](show_bug.cgi?id=679441#c34)  Georgi Yonchev    2012-07-18 07:32:34 UTC  ``` Me happy :) Confirming and closing this issue as fixed. tested version 3.4.4 +1 halfline! ``` [Comment 35](show_bug.cgi?id=679441#c35)  skipperTux    2012-07-19 11:07:32 UTC  ``` Issue is resolved with gnome-screensaver 3.4.4 on Linux 3.4.5-1-ARCH. Both monitors get locked and unlocked properly. Thanks for the effort. ``` |  |
| --- | --- |

---

---

* + [Home](./)
  + | New
  + | [Browse](page.cgi?id=browse.html&product=gnome-screensaver)
  + | [Search](query.cgi)
  + |

    [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
  + | [Reports](page.cgi?id=reports.html)
  + |
    [Help](http://www.bugzilla.org/docs/4.4/en/html/bug_page.html)
  + |
    [Log In](show_bug.cgi?id=679441&GoAheadAndLogIn=1)

    Remember

    [x]
  + |
    [Forgot Password](show_bug.cgi?id=679441&GoAheadAndLogIn=1#forgot)
    Login:

    [x]


