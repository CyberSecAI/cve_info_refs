=== Content from github.com_96d246da_20250124_193409.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fuakfdotb%2Foneapp%2Fcommit%2F5413ac804f1b09f9decc46a6c37b08352c49669c)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fuakfdotb%2Foneapp%2Fcommit%2F5413ac804f1b09f9decc46a6c37b08352c49669c)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=uakfdotb%2Foneapp)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[uakfdotb](/uakfdotb)
/
**[oneapp](/uakfdotb/oneapp)**
Public

* [Notifications](/login?return_to=%2Fuakfdotb%2Foneapp) You must be signed in to change notification settings
* [Fork
  0](/login?return_to=%2Fuakfdotb%2Foneapp)
* [Star
   0](/login?return_to=%2Fuakfdotb%2Foneapp)

* [Code](/uakfdotb/oneapp)
* [Issues
  0](/uakfdotb/oneapp/issues)
* [Pull requests
  0](/uakfdotb/oneapp/pulls)
* [Actions](/uakfdotb/oneapp/actions)
* [Projects
  0](/uakfdotb/oneapp/projects)
* [Security](/uakfdotb/oneapp/security)
* [Insights](/uakfdotb/oneapp/pulse)

Additional navigation options

* [Code](/uakfdotb/oneapp)
* [Issues](/uakfdotb/oneapp/issues)
* [Pull requests](/uakfdotb/oneapp/pulls)
* [Actions](/uakfdotb/oneapp/actions)
* [Projects](/uakfdotb/oneapp/projects)
* [Security](/uakfdotb/oneapp/security)
* [Insights](/uakfdotb/oneapp/pulse)

## Commit

[Permalink](/uakfdotb/oneapp/commit/5413ac804f1b09f9decc46a6c37b08352c49669c)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

All users are now unified in the users table. Club and site administr…

[Browse files](/uakfdotb/oneapp/tree/5413ac804f1b09f9decc46a6c37b08352c49669c)
Browse the repository at this point in the history

```
…ators are determined by associations with groups in the user_groups table. Additionally, a few critical MySQL injection vulnerabilities are fixed in this revision.
```

* Loading branch information

[![@perennate](https://avatars.githubusercontent.com/u/1284285?s=40&v=4)](/perennate)

[perennate](/uakfdotb/oneapp/commits?author=perennate "View all commits by perennate")
committed
May 10, 2012

1 parent
[7c0bb66](/uakfdotb/oneapp/commit/7c0bb66b6f7fa8392e2db7aef9cf6e85a0283494)

commit 5413ac8

 Show file tree

 Hide file tree

Showing
**29 changed files**
with
**427 additions**
and
**409 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* admin

  + admin/comments.php
    [comments.php](#diff-2b13211e5180ad76dbe24305359b061ccb0cdda890176c9b1e4009a73f0a1f8a)
  + admin/easy\_question.php
    [easy\_question.php](#diff-2f15793c4253da88e7b515f4ec5cb7c4003ccbb7ef38313fe5aed3e5eaab6bfc)
  + admin/gen\_pdf.php
    [gen\_pdf.php](#diff-da93b3b5894a7fca7eadb88305b25cc0ed709b42e1e3e38266a4978fc585bdf0)
  + admin/index.php
    [index.php](#diff-59a8ada2c7b98dfd72d4b79144d2327149f0a18901f0fd3b31bd7cf1f4760f89)
  + admin/man\_club.php
    [man\_club.php](#diff-464a714a05f35f2d4ccb8dd2b1d8ce82cc33c466abd297591cb66972604dc0f2)
  + admin/man\_notes.php
    [man\_notes.php](#diff-44a6c6f70f1596f930620cfdccd31f8c4d9adc16313f7a461bb55d97c25d7e8e)
  + admin/man\_questions.php
    [man\_questions.php](#diff-7c1f38e8221a0cb272abd8bb6efef90cfabf50e92f492ecd8d11170122395e2f)
  + admin/preview.php
    [preview.php](#diff-0b17c268e047415f910e7974cce517bf2fbc02f203d2f322a5db5d5512929035)
  + admin/statistics.php
    [statistics.php](#diff-24f6e832b6739c496aac9a3b7eebffa99489ce8079e19651946340aa5b7e109c)
  + admin/user\_detail.php
    [user\_detail.php](#diff-404d0f52ccbc93c14ad50a90440d0e5e659b15e5be6f0d6a731e12f61065f6e9)
  + admin/view\_recommendation.php
    [view\_recommendation.php](#diff-f41223d1c8626e29c912f5a212200495dd6e32e28a92f477f21ea09b68c5a21c)
  + admin/view\_submit.php
    [view\_submit.php](#diff-97f83f22cdaf641446d4ed410c2bb67199a46107cb600ca48d824fbf4491dbc4)
* astyle

  + one

    - admin

      * astyle/one/admin/index\_login.php
        [index\_login.php](#diff-b95337c1e5af5d5ae385e3ffb06bf9647c75406a1bc79f3721091ac76a7dff21)
      * astyle/one/admin/man\_club.php
        [man\_club.php](#diff-1d733cc2345a34c36f5012322eafbf9e91ad0e6432a07aaa1fc00b9d04fcc5e3)
    - root

      * astyle/one/root/index\_login.php
        [index\_login.php](#diff-e349caa091b21a097a54b749fb69c63e682fd4a9fe46432a3630c15bb64e6ab0)
      * astyle/one/root/man\_admins.php
        [man\_admins.php](#diff-b0fcd60522b749f582eedcf43fbb61f2072aea0e45c034020ae6ee055b486c3d)
  + two

    - admin

      * astyle/two/admin/index\_login.php
        [index\_login.php](#diff-e968d58a892381074e536b759e0671dcf2059cc6606f6478591f7a00b1c3d733)
    - root

      * astyle/two/root/index\_login.php
        [index\_login.php](#diff-bc3ec92158f7f724fb9841a884a58b1893c4a136da9874c51cd6ce07e7791c92)
      * astyle/two/root/man\_admins.php
        [man\_admins.php](#diff-e041e7e0e72c6a5cbb57e8105c7d9fde31567c1af71ca975e0f7ee18e66afd13)
* include

  + include/common.php
    [common.php](#diff-2f18a94a2218dacf9411b9f9ac8a6d661a579bfb5fa74312939743b0a4233836)
* install.sql
  [install.sql](#diff-8c7d46317bbdf6df6068afebf70f1ac5f939c37fe4811021f76e78847396e0d1)
* install

  + install/install.php
    [install.php](#diff-7b56c8ba8d31fce73086ef07085559611b4219b1c2d6e723a623f71b581f2745)
* login.php
  [login.php](#diff-b5866acb4c2b0d900c2623c453f9cf056193de7d29b280e8a9ceb7ef94bd28ad)
* page

  + admin

    - page/admin/index\_login.php
      [index\_login.php](#diff-6c48ea69b92221761766315a9490d7f06c3146b65a0506c611715356a25a82f2)
    - page/admin/man\_club.php
      [man\_club.php](#diff-3bf9b9a7dad35155e79d4441d5219daa37755a512aff955176bf353a446d13b8)
  + root

    - page/root/index\_login.php
      [index\_login.php](#diff-8d03e38ee368dcc05a0716e5d8858141e196879a4c80c2f8981f6729744f552c)
    - page/root/man\_admins.php
      [man\_admins.php](#diff-d6450c8331419806b98a57a9a797fd415763fc9fcb631c6a1b04ea0ae60f5c2f)
* root

  + root/index.php
    [index.php](#diff-54a8df04b87059af4f156df303a5f271553c72dcf44700510a9515816574ace3)
  + root/man\_admins.php
    [man\_admins.php](#diff-6cf310248a4b54676fe83dec4219fe8f2f9dd01c336caaf9f9ff919c1256618a)

## There are no files selected for viewing

10 changes: 5 additions & 5 deletions

10
[admin/comments.php](#diff-2b13211e5180ad76dbe24305359b061ccb0cdda890176c9b1e4009a73f0a1f8a "admin/comments.php")

Show comments

[View file](/uakfdotb/oneapp/blob/5413ac804f1b09f9decc46a6c37b08352c49669c/admin/comments.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -5,15 +5,15 @@ |
|  |  | include("../include/session.php"); |
|  |  |  |
|  |  | //check for $\_REQUEST['id'] here because this page should never be accessed without an id set |
|  |  | if(isset($\_SESSION['admin\_id']) && $\_REQUEST['id']) { |
|  |  | $club\_id = escape(getAdminClub($\_SESSION['admin\_id'])); |
|  |  | $admin\_id = escape($\_SESSION['admin\_id']); |
|  |  | if(isset($\_SESSION['admin']) && isset($\_REQUEST['id'])) { |
|  |  | $club\_id = $\_SESSION['admin\_club\_id']; |
|  |  | $user\_id = $\_SESSION['user\_id']; |
|  |  | $app\_id = escape($\_REQUEST['id']); |
|  |  |  |
|  |  | if($club\_id != 0) { |
|  |  | //retrieve and display comments (if not found in table, comments have not been set yet so default to blank) |
|  |  | $current\_comments = ""; |
|  |  | $result = mysql\_query("SELECT comments FROM club\_notes WHERE application\_id='$app\_id' AND admin\_id='$admin\_id'"); |
|  |  | $result = mysql\_query("SELECT comments FROM club\_notes WHERE application\_id='$app\_id' AND user\_id='$user\_id'"); |
|  |  | if($row = mysql\_fetch\_array($result)) { |
|  |  | $current\_comments = $row[0]; |
|  |  | } |
| Expand All | | @@ -23,6 +23,6 @@ |
|  |  | get\_page\_advanced("index", "admin", array('warning' => "General application admin does not have comments!")); |
|  |  | } |
|  |  | } else { |
|  |  | header('Location: index.php?error=' . urlencode("You are not logged in!")); |
|  |  | header('Location: index.php'); |
|  |  | } |
|  |  | ?> |

4 changes: 2 additions & 2 deletions

4
[admin/easy\_question.php](#diff-2f15793c4253da88e7b515f4ec5cb7c4003ccbb7ef38313fe5aed3e5eaab6bfc "admin/easy_question.php")

Show comments

[View file](/uakfdotb/oneapp/blob/5413ac804f1b09f9decc46a6c37b08352c49669c/admin/easy_question.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -7,8 +7,8 @@ |
|  |  | include("../include/apply\_gen.php"); |
|  |  | include("../include/latex.php"); |
|  |  |  |
|  |  | if(isset($\_SESSION['admin\_id'])) { |
|  |  | $club\_id = escape(getAdminClub($\_SESSION['admin\_id'])); |
|  |  | if(isset($\_SESSION['admin'])) { |
|  |  | $club\_id = $\_SESSION['admin\_club\_id']; |
|  |  |  |
|  |  | if(isset($\_REQUEST['type'])) { |
|  |  | if(isset($\_REQUEST['done'])) { |
| Expand Down | |  |

4 changes: 2 additions & 2 deletions

4
[admin/gen\_pdf.php](#diff-da93b3b5894a7fca7eadb88305b25cc0ed709b42e1e3e38266a4978fc585bdf0 "admin/gen_pdf.php")

Show comments

[View file](/uakfdotb/oneapp/blob/5413ac804f1b09f9decc46a6c37b08352c49669c/admin/gen_pdf.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -7,8 +7,8 @@ |
|  |  | include("../include/apply\_gen.php"); |
|  |  | include("../include/latex.php"); |
|  |  |  |
|  |  | if(isset($\_SESSION['admin\_id'])) { |
|  |  | $club\_id = escape(getAdminClub($\_SESSION['admin\_id'])); |
|  |  | if(isset($\_SESSION['admin'])) { |
|  |  | $club\_id = $\_SESSION['admin\_club\_id']; |
|  |  | include("category\_manager.php"); //sets database and whereString based on club/category |
|  |  |  |
|  |  | $message = ""; |
| Expand Down | |  |

80 changes: 65 additions & 15 deletions

80
[admin/index.php](#diff-59a8ada2c7b98dfd72d4b79144d2327149f0a18901f0fd3b31bd7cf1f4760f89 "admin/index.php")

Show comments

[View file](/uakfdotb/oneapp/blob/5413ac804f1b09f9decc46a6c37b08352c49669c/admin/index.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -8,28 +8,78 @@ |
|  |  | $error = $\_REQUEST['error']; |
|  |  | } |
|  |  |  |
|  |  | if(isset($\_REQUEST['username']) && isset($\_REQUEST['password'])) { |
|  |  | $checkResult = checkAdmin($\_REQUEST['username'], $\_REQUEST['password']); |
|  |  | if(!isset($\_SESSION['admin']) && (isset($\_SESSION['user\_id']) || isset($\_REQUEST['username'])) && isset($\_REQUEST['password']) && isset($\_REQUEST['club'])) { |
|  |  | if(!isset($\_SESSION['user\_id'])) { |
|  |  | //log in first |
|  |  | $loginResult = checkLogin($\_REQUEST['username'], $\_REQUEST['password']); |
|  |  |  |
|  |  | if($result >= 0) { |
|  |  | $\_SESSION['user\_id'] = $loginResult; |
|  |  | } else if($result == -2) { |
|  |  | $error = "Please try again later (you are locked out for too many failed attempts)."; |
|  |  | } else if($result == -3) { |
|  |  | $error = "Login and registration are currently disabled."; |
|  |  | } else if($result == -1) { |
|  |  | $error = "Login information is not correct."; |
|  |  | } else { |
|  |  | $error = "Internal error!"; |
|  |  | } |
|  |  | } |
|  |  |  |
|  |  | if($checkResult !== FALSE) { |
|  |  | $\_SESSION['admin\_id'] = $checkResult; |
|  |  | } else { |
|  |  | $error = "Incorrect username/password. You may be locked from your account. "; |
|  |  | //only continue if we haven't failed already |
|  |  | if(isset($\_SESSION['user\_id'])) { |
|  |  | $attempt\_club\_id = escape(intval($\_REQUEST['club'])); |
|  |  | $checkResult = checkAdminLogin($\_SESSION['user\_id'], $\_REQUEST['password'], $attempt\_club\_id); |
|  |  |  |
|  |  | if($checkResult === TRUE) { |
|  |  | $\_SESSION['admin'] = true; |
|  |  | $\_SESSION['admin\_club\_id'] = $attempt\_club\_id; |
|  |  |  |
|  |  | //make sure a admin\_notes\_settings entry exists for this user |
|  |  | $result = mysql\_query("SELECT COUNT(\*) FROM admin\_notes\_settings WHERE user\_id = '" . $\_SESSION['user\_id'] . "'"); |
|  |  | $row = mysql\_fetch\_row($result); |
|  |  |  |
|  |  | if($row[0] == 0) { |
|  |  | mysql\_query("INSERT INTO admin\_notes\_settings (user\_id, box\_enabled, cat\_enabled, comment\_enabled) VALUES ('" . $\_SESSION['user\_id'] . "', '0', '0', '0')"); |
|  |  | } |
|  |  | } else if($checkResult === -1) { |
|  |  | $error = "Login information is not correct."; |
|  |  | } else if($checkResult === -2) { |
|  |  | $error = "Please try again later (you are locked out for too many failed attempts)."; |
|  |  | } else if($checkResult === 1) { |
|  |  | $error = "Invalid club specified."; |
|  |  | } |
|  |  | } |
|  |  | } else if(isset($\_REQUEST['action']) && isset($\_SESSION['admin\_id'])) { |
|  |  | } else if(isset($\_REQUEST['action']) && isset($\_SESSION['admin'])) { |
|  |  | if($\_REQUEST['action'] == 'logout') { |
|  |  | $success = "You are now logged out."; |
|  |  | session\_unset(); |
|  |  | $success = "You are now logged out of the club administration area."; |
|  |  | unset($\_SESSION['admin']); |
|  |  | unset($\_SESSION['admin\_club\_id']); |
|  |  | } |
|  |  | } |
|  |  |  |
|  |  | if(isset($\_SESSION['admin\_id'])) { |
|  |  | get\_page\_advanced("index", "admin"); |
|  |  | } else if(isset($error)) { |
|  |  | get\_page\_advanced("index\_login", "admin", array('error' => $error)); |
|  |  | $parameters = array(); |
|  |  |  |
|  |  | if(isset($error)) { |
|  |  | $parameters['error'] = $error; |
|  |  | } else if(isset($success)) { |
|  |  | get\_page\_advanced("index\_login", "admin", array('success' => $success)); |
|  |  | $parameters['success'] = $success; |
|  |  | } |
|  |  |  |
|  |  | if(isset($\_SESSION['admin'])) { |
|  |  | get\_page\_advanced("index", "admin", $parameters); |
|  |  | } else { |
|  |  | get\_page\_advanced("index\_login", "admin"); |
|  |  | if(isset($\_SESSION['user\_id'])) { |
|  |  | $parameters['user\_loggedin'] = true; |
|  |  | $parameters['clubs'] = getAdminClubs($\_SESSION['user\_id']); |
|  |  | } else { |
|  |  | $parameters['user\_loggedin'] = false; |
|  |  |  |
|  |  | //list normal clubs, and general application |
|  |  | $parameters['clubs'] = listClubsIdName(); |
|  |  | $parameters['clubs'][0] = 'General application'; |
|  |  | } |
|  |  |  |
|  |  | get\_page\_advanced("index\_login", "admin", $parameters); |
|  |  | } |
|  |  | ?> |

70 changes: 24 additions & 46 deletions

70
[admin/man\_club.php](#diff-464a714a05f35f2d4ccb8dd2b1d8ce82cc33c466abd297591cb66972604dc0f2 "admin/man_club.php")

Show comments

[View file](/uakfdotb/oneapp/blob/5413ac804f1b09f9decc46a6c37b08352c49669c/admin/man_club.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -4,65 +4,43 @@ |
|  |  | include("../include/db\_connect.php"); |
|  |  | include("../include/session.php"); |
|  |  |  |
|  |  | if(isset($\_SESSION['admin\_id'])) { |
|  |  | $club\_id = escape(getAdminClub($\_SESSION['admin\_id'])); |
|  |  | $admin\_id = escape($\_SESSION['admin\_id']); |
|  |  | if(isset($\_SESSION['admin'])) { |
|  |  | $club\_id = $\_SESSION['admin\_club\_id']; |
|  |  | $user\_id = $\_SESSION['user\_id']; |
|  |  |  |
|  |  | if($club\_id != 0) { |
|  |  | if(isset($\_REQUEST['action'])){ |
|  |  | $currpass = mysql\_query("SELECT password FROM admins WHERE id='" . $\_SESSION['admin\_id'] . "'"); |
|  |  | $currpass = mysql\_fetch\_array($currpass); |
|  |  | if($\_REQUEST['old\_password']==$currpass[0]){ |
|  |  | if(isset($\_REQUEST['description']) && isset($\_REQUEST['view\_time']) && isset($\_REQUEST['open\_time']) && isset($\_REQUEST['close\_time']) && isset($\_REQUEST['user\_type'])) { |
|  |  | $description = escape($\_REQUEST['description']); |
|  |  | $view\_time = strtotime($\_REQUEST['view\_time']); |
|  |  | $open\_time = strtotime($\_REQUEST['open\_time']); |
|  |  | $close\_time = strtotime($\_REQUEST['close\_time']); |
|  |  | $num\_recommend = escape($\_REQUEST['num\_recommend']); |
|  |  | $user\_type = escape($\_REQUEST['user\_type']); |
|  |  | if($user\_type == "Name"){ |
|  |  | $usernot = 1; |
|  |  | } else { |
|  |  | $usernot = 0; |
|  |  | } |
|  |  |  |
|  |  | mysql\_query("UPDATE clubs SET description='$description', view\_time='$view\_time', open\_time='$open\_time', close\_time='$close\_time', num\_recommend='$num\_recommend' WHERE id='$club\_id'"); |
|  |  | $success = "Account Updated!"; |
|  |  | } |
|  |  | if(isset($\_REQUEST['new\_password'])) { |
|  |  | $changepass = changeAdminPass($admin\_id,$\_REQUEST['new\_password'],$\_REQUEST['new\_password\_conf']); |
|  |  | if($changepass == 1){ |
|  |  | $success = "Password Updated!"; |
|  |  | } else if($changepass == -2){ |
|  |  | $error = "New password does not match!"; |
|  |  | } else { |
|  |  | $error = "Invaid new password!"; |
|  |  | } |
|  |  | } |
|  |  | } else { |
|  |  | $error = "Incorrect password! If you have forgotten this password, contact your rood advisor."; |
|  |  | } |
|  |  | } else { |
|  |  | $info = "You need your current password to make any changes!"; |
|  |  | if(isset($\_REQUEST['description']) && isset($\_REQUEST['view\_time']) && isset($\_REQUEST['open\_time']) && isset($\_REQUEST['close\_time'])) { |
|  |  | $description = escape($\_REQUEST['description']); |
|  |  | $view\_time = strtotime($\_REQUEST['view\_time']); |
|  |  | $open\_time = strtotime($\_REQUEST['open\_time']); |
|  |  | $close\_time = strtotime($\_REQUEST['close\_time']); |
|  |  | $num\_recommend = escape($\_REQUEST['num\_recommend']); |
|  |  |  |
|  |  | mysql\_query("UPDATE clubs SET description='$description', view\_time='$view\_time', open\_time='$open\_time', close\_time='$close\_time', num\_recommend='$num\_recommend' WHERE id='$club\_id'"); |
|  |  | $success = "Club updated successfully."; |
|  |  | } |
|  |  |  |
|  |  | $result = mysql\_query("SELECT c.name, a.email, c.description, c.view\_time, c.open\_time, c.close\_time, c.num\_recommend FROM clubs c, admins a WHERE c.id='$club\_id' AND a.id='$admin\_id'"); |
|  |  | $result = mysql\_query("SELECT name, description, view\_time, open\_time, close\_time, num\_recommend FROM clubs WHERE id='$club\_id'"); |
|  |  |  |
|  |  | if($row = mysql\_fetch\_array($result)) { |
|  |  | if( isset($error) ) { |
|  |  | get\_page\_advanced("man\_club", "admin", array('error'=> $error, 'email' => $row['email'], 'club\_name' => $row['name'], 'description' => $row['description'], 'view\_time' => $row['view\_time'], 'open\_time' => $row['open\_time'], 'close\_time' => $row['close\_time'], 'num\_recommend' => $row['num\_recommend'])); |
|  |  | $parameters = array('club\_name' => $row['name'], 'description' => $row['description'], 'view\_time' => $row['view\_time'], 'open\_time' => $row['open\_time'], 'close\_time' => $row['close\_time'], 'num\_recommend' => $row['num\_recommend']); |
|  |  |  |
|  |  | if(isset($error)) { |
|  |  | $parameters['error'] = $error; |
|  |  | } else if( isset($success) ){ |
|  |  | get\_page\_advanced("man\_club", "admin", array('success' => $success, 'email' => $row['email'], 'club\_name' => $row['name'], 'description' => $row['description'], 'view\_time' => $row['view\_time'], 'open\_time' => $row['open\_time'], 'close\_time' => $row['close\_time'], 'num\_recommend' => $row['num\_recommend'])); |
|  |  | $parameters['success'] = $success; |
|  |  | } else if( isset($info) ){ |
|  |  | get\_page\_advanced("man\_club", "admin", array('info' => $info, 'email' => $row['email'], 'club\_name' => $row['name'], 'description' => $row['description'], 'view\_time' => $row['view\_time'], 'open\_time' => $row['open\_time'], 'close\_time' => $row['close\_time'], 'num\_recommend' => $row['num\_recommend'])); |
|  |  | $parameters['info'] = $info; |
|  |  | } else if( isset($warning) ){ |
|  |  | get\_page\_advanced("man\_club", "admin", array('warning' => $warning, 'email' => $row['email'], 'club\_name' => $row['name'], 'description' => $row['description'], 'view\_time' => $row['view\_time'], 'open\_time' => $row['open\_time'], 'close\_time' => $row['close\_time'], 'num\_recommend' => $row['num\_recommend'])); |
|  |  | } else { |
|  |  | get\_page\_advanced("man\_club", "admin", array('email' => $row['email'], 'club\_name' => $row['name'], 'description' => $row['description'], 'view\_time' => $row['view\_time'], 'open\_time' => $row['open\_time'], 'close\_time' => $row['close\_time'], 'num\_recommend' => $row['num\_recommend'])); |
|  |  | $parameters['warning'] = $warning; |
|  |  | } |
|  |  |  |
|  |  | get\_page\_advanced("man\_club", "admin", $parameters); |
|  |  | } else { |
|  |  | get\_page\_advanced("message", "admin", array('message' => "Error: your club cannot be found in the clubs table.", 'title' => "Manage Club")); |
|  |  | } |
|  |  | } else { |
|  |  | get\_page\_advanced("message", "admin", array('message' => "Error: general application does not have club settings.", 'title' => "Manage Club")); |
|  |  | } |
|  |  | } else { |
|  |  | header('Location: index.php?error=' . urlencode("You are not logged in!")); |
| Expand Down | |  |

18 changes: 9 additions & 9 deletions

18
[admin/man\_notes.php](#diff-44a6c6f70f1596f930620cfdccd31f8c4d9adc16313f7a461bb55d97c25d7e8e "admin/man_notes.php")

Show comments

[View file](/uakfdotb/oneapp/blob/5413ac804f1b09f9decc46a6c37b08352c49669c/admin/man_notes.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -4,9 +4,9 @@ |
|  |  | include("../include/db\_connect.php"); |
|  |  | include("../include/session.php"); |
|  |  |  |
|  |  | if(isset($\_SESSION['admin\_id'])) { |
|  |  | $club\_id = escape(getAdminClub($\_SESSION['admin\_id'])); |
|  |  | $admin\_id = escape($\_SESSION['admin\_id']); |
|  |  | if(isset($\_SESSION['admin'])) { |
|  |  | $club\_id = $\_SESSION['admin\_club\_id']; |
|  |  | $user\_id = $\_SESSION['user\_id']; |
|  |  |  |
|  |  | if($club\_id != 0) { |
|  |  | //first, notes enabled/disabled settings |
| Expand All | | @@ -15,11 +15,11 @@ |
|  |  | $cat\_enabled = isset($\_REQUEST['cat\_enabled']) ? 1 : 0; |
|  |  | $comment\_enabled = isset($\_REQUEST['comment\_enabled']) ? 1 : 0; |
|  |  |  |
|  |  | mysql\_query("UPDATE admins SET box\_enabled = '$box\_enabled', cat\_enabled = '$cat\_enabled', comment\_enabled = '$comment\_enabled' WHERE id = '" . $\_SESSION['admin\_id'] . "'"); |
|  |  | mysql\_query("UPDATE admin\_notes\_settings SET box\_enabled = '$box\_enabled', cat\_enabled = '$cat\_enabled', comment\_enabled = '$comment\_enabled' WHERE user\_id = '$user\_id'"); |
|  |  | $success = "Note preferences updated successfully!"; |
|  |  | } |
|  |  |  |
|  |  | $result = mysql\_query("SELECT box\_enabled, cat\_enabled, comment\_enabled FROM admins WHERE id='" . $\_SESSION['admin\_id'] . "'"); |
|  |  | $result = mysql\_query("SELECT box\_enabled, cat\_enabled, comment\_enabled FROM admin\_notes\_settings WHERE user\_id='$user\_id'"); |
|  |  |  |
|  |  | $box\_enabled = false; |
|  |  | $cat\_enabled = false; |
| Expand All | | @@ -37,20 +37,20 @@ |
|  |  | $catName = escape($\_REQUEST['name']); |
|  |  |  |
|  |  | if($\_REQUEST['action'] == "delete") { |
|  |  | mysql\_query("DELETE FROM club\_notes\_categories WHERE admin\_id = '$admin\_id' AND name = '$catName'"); |
|  |  | mysql\_query("DELETE FROM club\_notes\_categories WHERE club\_id = '$club\_id' AND name = '$catName'"); |
|  |  | $success = "Category deleted!"; |
|  |  | } else if($\_REQUEST['action'] == "add") { |
|  |  | $result = mysql\_query("SELECT name FROM club\_notes\_categories WHERE admin\_id = '$admin\_id' AND name = '$catName'"); |
|  |  | $result = mysql\_query("SELECT name FROM club\_notes\_categories WHERE club\_id = '$club\_id' AND name = '$catName'"); |
|  |  | if($row = mysql\_fetch\_array($result)) { |
|  |  | $error = "Category already exists!"; |
|  |  | } else { |
|  |  | mysql\_query("INSERT INTO club\_notes\_categories (name, admin\_id) VALUES ('$catName', '$admin\_id')"); |
|  |  | mysql\_query("INSERT INTO club\_notes\_categories (name, club\_id) VALUES ('$catName', '$club\_id')"); |
|  |  | $success = "Category added!"; |
|  |  | } |
|  |  | } |
|  |  | } |
|  |  |  |
|  |  | $result = mysql\_query("SELECT name FROM club\_notes\_categories WHERE admin\_id = '$admin\_id'"); |
|  |  | $result = mysql\_query("SELECT name FROM club\_notes\_categories WHERE club\_id = '$club\_id'"); |
|  |  | $categories = array(); |
|  |  |  |
|  |  | while($row = mysql\_fetch\_array($result)) { |
| Expand Down | |  |

4 changes: 2 additions & 2 deletions

4
[admin/man\_questions.php](#diff-7c1f38e8221a0cb272abd8bb6efef90cfabf50e92f492ecd8d11170122395e2f "admin/man_questions.php")

Show comments

[View file](/uakfdotb/oneapp/blob/5413ac804f1b09f9decc46a6c37b08352c49669c/admin/man_questions.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -7,8 +7,8 @@ |
|  |  | include("../include/apply\_gen.php"); |
|  |  | include("../include/apply\_admin.php"); |
|  |  |  |
|  |  | if(isset($\_SESSION['admin\_id'])) { |
|  |  | $club\_id = escape(getAdminClub($\_SESSION['admin\_id'])); |
|  |  | if(isset($\_SESSION['admin'])) { |
|  |  | $club\_id = $\_SESSION['admin\_club\_id']; |
|  |  | include("category\_manager.php"); |
|  |  |  |
|  |  | $message = ""; |
| Expand Down | |  |

4 changes: 2 additions & 2 deletions

4
[admin/preview.php](#diff-0b17c268e047415f910e7974cce517bf2fbc02f203d2f322a5db5d5512929035 "admin/preview.php")

Show comments

[View file](/uakfdotb/oneapp/blob/5413ac804f1b09f9decc46a6c37b08352c49669c/admin/preview.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -6,8 +6,8 @@ |
|  |  |  |
|  |  | include("../include/apply\_gen.php"); |
|  |  |  |
|  |  | if(isset($\_SESSION['admin\_id'])) { |
|  |  | $club\_id = escape(getAdminClub($\_SESSION['admin\_id'])); |
|  |  | if(isset($\_SESSION['admin'])) { |
|  |  | $club\_id = $\_SESSION['admin\_club\_id']; |
|  |  | include("category\_manager.php"); |
|  |  |  |
|  |  | $result = mysql\_query("SELECT varname, vardesc, vartype FROM $database WHERE $whereString ORDER BY orderId"); |
| Expand Down | |  |

4 changes: 2 additions & 2 deletions

4
[admin/statistics.php](#diff-24f6e832b6739c496aac9a3b7eebffa99489ce8079e19651946340aa5b7e109c "admin/statistics.php")

Show comments

[View file](/uakfdotb/oneapp/blob/5413ac804f1b09f9decc46a6c37b08352c49669c/admin/statistics.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -7,8 +7,8 @@ |
|  |  | include("../include/apply\_gen.php"); |
|  |  | include("../include/statistics.php"); |
|  |  |  |
|  |  | if(isset($\_SESSION['admin\_id'])) { |
|  |  | $club\_id = escape(getAdminClub($\_SESSION['admin\_id'])); |
|  |  | if(isset($\_SESSION['admin'])) { |
|  |  | $club\_id = $\_SESSION['club\_id']; |
|  |  |  |
|  |  | $adminStat = adminStatistics($club\_id); |
|  |  | $responseStat = responseStatistics($club\_id, true, 8); |
| Expand Down | |  |

2 changes: 1 addition & 1 deletion

2
[admin/user\_detail.php](#diff-404d0f52ccbc93c14ad50a90440d0e5e659b15e5be6f0d6a731e12f61065f6e9 "admin/user_detail.php")

Show comments

[View file](/uakfdotb/oneapp/blob/5413ac804f1b09f9decc46a6c37b08352c49669c/admin/user_detail.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -4,7 +4,7 @@ |
|  |  | include("../include/db\_connect.php"); |
|  |  | include("../include/session.php"); |
|  |  |  |
|  |  | if(isset($\_SESSION['admin\_id']) && isset($\_REQUEST['id'])) { |
|  |  | if(isset($\_SESSION['admin']) && isset($\_REQUEST['id'])) { |
|  |  | //todo: admins currently can get information of users that didn't apply to their club |
|  |  | $user\_id = escape($\_REQUEST['id']); |
|  |  | $userinfo = getUserInformation($user\_id); //userinfo is array(username, email) |
| Expand Down | |  |

2 changes: 1 addition & 1 deletion

2
[admin/view\_recommendation.php](#diff-f41223d1c8626e29c912f5a212200495dd6e32e28a92f477f21ea09b68c5a21c "admin/view_recommendation.php")

Show comments

[View file](/uakfdotb/oneapp/blob/5413ac804f1b09f9decc46a6c37b08352c49669c/admin/view_recommendation.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -4,7 +4,7 @@ |
|  |  | include("../include/db\_connect.php"); |
|  |  | include("../include/session.php"); |
|  |  |  |
|  |  | if(isset($\_SESSION['admin\_id']) && isset($\_REQUEST['peer\_pdf']) && isset($\_REQUEST['user\_id'])) { |
|  |  | if(isset($\_SESSION['admin']) && isset($\_REQUEST['peer\_pdf']) && isset($\_REQUEST['user\_id'])) { |
|  |  | //todo: admins can see any peer recommendations if they know the user ID |
|  |  | $peer\_pdf = escape($\_REQUEST['peer\_pdf']); |
|  |  | $user\_id = escape($\_REQUEST['user\_id']); |
| Expand Down | |  |

17 changes: 9 additions & 8 deletions

17
[admin/view\_submit.php](#diff-97f83f22cdaf641446d4ed410c2bb67199a46107cb600ca48d824fbf4491dbc4 "admin/view_submit.php")

Show comments

[View file](/uakfdotb/oneapp/blob/5413ac804f1b09f9decc46a6c37b08352c49669c/admin/view_submit.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -6,14 +6,15 @@ |
|  |  |  |
|  |  | include("../include/apply\_submit.php"); |
|  |  |  |
|  |  | if(isset($\_SESSION['admin\_id'])) { |
|  |  | $club\_id = escape(getAdminClub($\_SESSION['admin\_id'])); |
|  |  | $admin\_id = escape($\_SESSION['admin\_id']); |
|  |  | if(isset($\_SESSION['admin'])) { |
|  |  | $club\_id = $\_SESSION['admin\_club\_id']; |
|  |  | $user\_id = $\_SESSION['user\_id']; |
|  |  |  |
|  |  | if($club\_id != 0) { |
|  |  | //check if this admin is using textboxes and categories |
|  |  | $result = mysql\_query("SELECT box\_enabled, cat\_enabled, comment\_enabled FROM admins WHERE id='" . escape($\_SESSION['admin\_id']) . "'"); |
|  |  | $result = mysql\_query("SELECT box\_enabled, cat\_enabled, comment\_enabled FROM admin\_notes\_settings WHERE user\_id='$user\_id'"); |
|  |  | $row = mysql\_fetch\_array($result); |
|  |  |  |
|  |  | $box\_enabled = ($row['box\_enabled'] == 1) ? true : false; |
|  |  | $cat\_enabled = ($row['cat\_enabled'] == 1) ? true : false; |
|  |  | $comment\_enabled = ($row['comment\_enabled'] == 1) ? true : false; |
| Expand All | | @@ -27,7 +28,7 @@ |
|  |  | //we will need to construct a map from the application database IDs to the box and category note values if enabled |
|  |  | // we do this now so that we can check if an entry exists already for updating the notes table |
|  |  | if($box\_enabled || $cat\_enabled || $comment\_enabled) { |
|  |  | $toolsResult = mysql\_query("SELECT application\_id, box, category, comments FROM club\_notes WHERE admin\_id = '$admin\_id'"); |
|  |  | $toolsResult = mysql\_query("SELECT application\_id, box, category, comments FROM club\_notes WHERE club\_id = '$club\_id'"); |
|  |  |  |
|  |  | while($row = mysql\_fetch\_array($toolsResult)) { |
|  |  | $toolsMap[$row['application\_id']] = array($row['box'], $row['category'], $row['comments']); |
| Expand All | | @@ -46,7 +47,7 @@ |
|  |  | //if the tools map does not contain the ID, then we have to add it to database |
|  |  | if(!isset($toolsMap[$application\_id])) { |
|  |  | $toolsMap[$application\_id] = array('', ''); |
|  |  | mysql\_query("INSERT INTO club\_notes (application\_id, admin\_id) VALUES ('$application\_id', '$admin\_id')"); |
|  |  | mysql\_query("INSERT INTO club\_notes (application\_id, club\_id) VALUES ('$application\_id', '$club\_id')"); |
|  |  | } |
|  |  |  |
|  |  | //now we check what needs to be updated |
| Expand All | | @@ -71,7 +72,7 @@ |
|  |  |  |
|  |  | if(strlen($updateString) > 0) { |
|  |  | $updateString = substr($updateString, 0, -2); |
|  |  | mysql\_query("UPDATE club\_notes SET $updateString WHERE application\_id='$application\_id' AND admin\_id='$admin\_id'"); |
|  |  | mysql\_query("UPDATE club\_notes SET $updateString WHERE application\_id='$application\_id' AND club\_id='$club\_id'"); |
|  |  | } |
|  |  | } |
|  |  | } |
| Expand All | | @@ -95,7 +96,7 @@ |
|  |  | //category filter manager |
|  |  | if($cat\_enabled) { |
|  |  | //first, we retrieve a list of categories (this will be used in dropdown as well) |
|  |  | $catResult = mysql\_query("SELECT name FROM club\_notes\_categories WHERE admin\_id = '$admin\_id'"); |
|  |  | $catResult = mysql\_query("SELECT name FROM club\_notes\_categories WHERE club\_id = '$club\_id'"); |
|  |  |  |
|  |  | while($row = mysql\_fetch\_array($catResult)) { |
|  |  | array\_push($catList, $row[0]); |
| Expand Down | |  |

 Loading

Oops, something went wrong.
 Retry

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `5413ac8`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fuakfdotb%2Foneapp%2Fcommit%2F5413ac804f1b09f9decc46a6c37b08352c49669c) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


