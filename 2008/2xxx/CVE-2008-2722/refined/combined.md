=== Content from gallery.menalto.com_292f8613_20250125_034603.html ===


[documentation](http://codex.galleryproject.org/)
[downloads](http://galleryproject.org/downloads)

[![Gallery - YOUR PHOTOS ON YOUR WEBSITE](http://galleryproject.org/themes/gmc/logo.png)](index.html)

[forums](forum.html)

[development](http://galleryproject.org/dev)

---

## Gallery

### Random Image

[![The owner of an album can choose to include a poll where visitors can vote on which image they think is the best, or what they t](gallery2/main.php%3Fg2_view=core.DownloadItem&g2_itemId=10327&g2_serialNumber=2)](gallery/screenshots/screenshotsG1/aav.jpg.html)
#### The owner of an album can choose to include a poll where visitors can vote on which image they think is the best, or what they t

## Hosting Partner

InMotion Hosting provides Gallery with financial and development support, as well as an affiliate bonus for each new customer we send their way. Gallery 3 is supported out-of-the-box on their service, and their support team is knowledgable in working with Gallery 3.

## Support Gallery!

**Gallery is freeware!**
We've spent thousands of hours developing and supporting it.
If you enjoy the product, please take a moment and [make a donation](http://gallery.sourceforge.net/donate.php?donate_tag=website_sidebar) to help support further development and webserver costs!

## New forum topics

* [Langues in edit photos and else options only english](node/113280.html)
* [remove photo names under thumbnails (but keep album names) theme edit help needed!](node/113277.html "1 comment")
* [Replacement for Gallery 3 ?](node/113269.html "3 comments")
* [Need Support Help](node/113266.html)
* [Location of Gallery3 tags on the server](node/113265.html "1 comment")
[more](forum.html "Read the latest forum topics.")

## User Testimonial

 "Gallery is the tenth script of its kind I've installed on my server. I've found several other scripts that looked promising when viewing the feature lists at the respective sites, only to have the installation process result in a nightmare of confusion (and I'm not a novice at this phase of the process).
Gallery's install was brilliantly conceived. In this early stage of using Gallery, I'm e...[(read more)](testimonials%3Fhighlight%3D400.html#400)"  Harry Governick 12/08/2007 [More testimonials](testimonials.html)

[Home](index.html)
# Gallery 2.2.5 Security Fix Release

Submitted by valiant on Thu, 2008-06-12 00:55

**Gallery 2.2.5** is now available for [download](http://codex.gallery2.org/Gallery2%3ADownload#Packages). This release fixes critical security issues, no new features have been added. Users of all previous Gallery 2 versions are **strongly encouraged** to upgrade to version 2.2.5 as soon as possible! All issues addressed in this release have been discovered in internal security audits.

Since 2.2.5 is a security release, it shares the same installation requirements as 2.2.4. If you haven't upgraded to 2.2.x yet, please review the [Gallery 2.2 release notes](http://gallery.menalto.com/gallery_2.2_released) for highlights of changes and the requirements. Read on for more details and upgrade instructions.

## Upgrading Instructions

Upgrading is quick and easy

* Users of Gallery 2.1 or earlier should review release notes for requirement changes and update all application files.
* Users of Gallery 2.2 or later (2.2.1, 2.2.2, 2.2.3 or 2.2.4) can use an update file to upgrade specific core files and then upgrade the affected modules via [Downloadable Plugins](http://codex.gallery2.org/Gallery2%3AGet_More_Plugins).
* After the upgrade, users of the [Password module](http://codex.gallery2.org/Gallery2%3AModules%3Apassword) should check if any non-album items are password protected directly in their gallery. If this is the case, the password protection should be removed from that item and it should be protected with normal view permissions or moved into an album that is password protected.

Regardless of your Gallery's version, review the [upgrading instructions](http://codex.gallery2.org/Gallery2%3AUpgrading) for complete details.

## Security Vulnerabilities

Gallery 2.2.5 addresses the following security vulnerabilities:

* XSS through host and path component of request URL - The complete request URL is now properly sanitized (applying the same input filtering as for all other inputs). This severe vulnerability affects all modules.
* Information disclosure in album-select module - Fixed exposure of album titles through the album-select module when a guest would add a new album to a hidden album.
* Permission escalation through zip archive extraction - No longer creating sub-albums when adding items from a zip archive if the active user does not have the necessary permission to do so.
* Information disclosure through embed.php - embed.php is no longer susceptible to spoofing the remote address and thus no longer discloses the local filesystem path of the Gallery 2 installation folder.
* View permissions not enforced for password protected items - No longer offering the option to protect non-album items directly and only offering the feature for albums since full protection only applies to the items within the album.

[![](http://galleryproject.org/themes/gmc/images/forum_post.gif)](gallery_2.2.5_released.html#comment-277516)
Submitted by lysp on Thu, 2008-06-12 10:53.

I did an svn update using the 2\_2 branch.

Got the following errors during the system check stage,

Quote:
> Notice: Undefined offset: 3 in /home/username/public\_html/photos/modules/core/classes/GalleryUtilities.class on line 1224
>
> Notice: Undefined offset: 2 in /home/username/public\_html/photos/modules/core/classes/GalleryUtilities.class on line 1224
>
> Notice: Undefined offset: 1 in /home/username/public\_html/photos/modules/core/classes/GalleryUtilities.class on line 1224
>
> Notice: Undefined offset: 4 in /home/username/public\_html/photos/modules/core/classes/GalleryUtilities.class on line 1224
>
> Notice: Undefined offset: 3 in /home/username/public\_html/photos/modules/core/classes/GalleryUtilities.class on line 1224
>
> Notice: Undefined offset: 2 in /home/username/public\_html/photos/modules/core/classes/GalleryUtilities.class on line 1224
>
> Notice: Undefined offset: 1 in /home/username/public\_html/photos/modules/core/classes/GalleryUtilities.class on line 1224
>
> Notice: Undefined offset: 4 in /home/username/public\_html/photos/modules/core/classes/GalleryUtilities.class on line 1224
>
> Notice: Undefined offset: 3 in /home/username/public\_html/photos/modules/core/classes/GalleryUtilities.class on line 1224
>
> Notice: Undefined offset: 2 in /home/username/public\_html/photos/modules/core/classes/GalleryUtilities.class on line 1224

The upgrade still worked though.

![scaturan's picture](http://galleryproject.org/files/pictures/picture-49219.png "scaturan's picture")
[![](http://galleryproject.org/themes/gmc/images/forum_post.gif)](gallery_2.2.5_released.html#comment-277529)
Submitted by scaturan on Thu, 2008-06-12 13:44.

thank you!

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_

<http://scaturan.buriguri.jp/blog/wpg2>

![schultmc's picture](http://galleryproject.org/files/pictures/picture-17574.gif "schultmc's picture")
[![](http://galleryproject.org/themes/gmc/images/forum_post.gif)](gallery_2.2.5_released.html#comment-277544)
Submitted by schultmc on Thu, 2008-06-12 15:28.

Version 2.2.5-1 of the Debian gallery2 package was uploaded in the morning (EDT) of Thursday, June 12, 2008 and should be available in Debian unstable as of the archive push in the afternoon (EDT) on Thursday, June 12, 2008.

--

Debian gallery package maintainer

[![](http://galleryproject.org/themes/gmc/images/forum_post.gif)](gallery_2.2.5_released.html#comment-277548)
Submitted by valiant on Thu, 2008-06-12 17:21.

@lysp:

that usually happens when you've got a corrupt MANIFEST file. MANIFEST files are at gallery2/MANIFEST, gallery2/modules/\*/MANIFEST and gallery2/themes/\*/MANIFEST.

fix: replace them. if you're using SVN, delete the file and get it again with svn up.

--------------

Documentation: [Support / Troubleshooting](http://codex.gallery2.org/Category%3AGallery_2%3ATroubleshooting) | [Installation, Upgrade, Configuration and Usage](http://codex.gallery2.org/)

[![](http://galleryproject.org/themes/gmc/images/forum_post.gif)](gallery_2.2.5_released.html#comment-277596)
Submitted by surgeon on Fri, 2008-06-13 05:55.

Is there any ChangeLog?

[![](http://galleryproject.org/themes/gmc/images/forum_post.gif)](gallery_2.2.5_released.html#comment-277597)
Submitted by valiant on Fri, 2008-06-13 06:07.

The above story mentions all changes in this release compared to the last previous release (2.2.5 vs. 2.2.4).

There's no detailed changelog for G2. for all details, you can use the Subversion history (e.g. via <http://fisheye3.atlassian.com/browse/gallery/trunk/>), for a high level history, there's the README.html which has highlights for all major releases.

--------------

Documentation: [Support / Troubleshooting](http://codex.gallery2.org/Category%3AGallery_2%3ATroubleshooting) | [Installation, Upgrade, Configuration and Usage](http://codex.gallery2.org/)

![bharat's picture](http://galleryproject.org/files/pictures/picture-8.jpg "bharat's picture")
[![](http://galleryproject.org/themes/gmc/images/forum_post.gif)](gallery_2.2.5_released.html#comment-277718)
Submitted by bharat on Sat, 2008-06-14 20:33.
**lysp wrote:**
> I did an svn update using the 2\_2 branch.
>
> Got the following errors during the system check stage,
>
> Quote:
> > Notice: Undefined offset: 3 in /home/username/public\_html/photos/modules/core/classes/GalleryUtilities.class on line 1224

This looks like something went wrong in the MANIFEST checking code (the code that verifies that your code is ok). It is probably from having an extra 3rd party module, though, since we've verified all of the stuff that we shipped with the package. Do you have any of those? Either way, if the upgrade completed successfully you're ok.

[![](http://galleryproject.org/themes/gmc/images/forum_post.gif)](gallery_2.2.5_released.html#comment-277821)
Submitted by lysp on Mon, 2008-06-16 06:15.

All the manifests were changed/corrupted:

Quote:
> M themes/classic/MANIFEST
>
> M themes/siriux/MANIFEST
>
> M themes/matrix/MANIFEST
>
> M themes/matrix/templates/theme.tpl
>
> M themes/floatrix/MANIFEST
>
> M themes/ajaxian/MANIFEST
>
> M modules/flashvideo/MANIFEST
>
> M modules/register/MANIFEST
>
> M modules/netpbm/MANIFEST
>
> M modules/debug/MANIFEST
>
> M modules/members/MANIFEST
>
> M modules/uploadapplet/MANIFEST
>
> M modules/hidden/MANIFEST
>
> M modules/imageframe/MANIFEST
>
> M modules/imageblock/MANIFEST
>
> M modules/imagemagick/MANIFEST
>
> M modules/useralbum/MANIFEST
>
> ? modules/rating/MANIFEST.mine
>
> ? modules/rating/MANIFEST.r17064
>
> ? modules/rating/MANIFEST.r17295
>
> C modules/rating/MANIFEST
>
> etc, etc

What i think i may have done now i think of it is run the "update modules" from the admin system.

Would this cause issues? And does this need to be avoided by people running svn versions?

![bharat's picture](http://galleryproject.org/files/pictures/picture-8.jpg "bharat's picture")
[![](http://galleryproject.org/themes/gmc/images/forum_post.gif)](gallery_2.2.5_released.html#comment-277822)
Submitted by bharat on Mon, 2008-06-16 06:21.

Oh. It looks like you might have run lib/tools/makeManifest.php (or the older perl version) which would update your local manifests. That would definitely do it. See how your ratings MANIFEST has a C marker? That means that it's in conflict which is probably why you're seeing the warnings you saw during the upgrade. This isn't fatal, but you should fix it. Easiest way to fix it is to run this command:

```

svn revert `find . -name MANIFEST`

```

This assumes that you didn't intentionally mean to modify any of those files. Even if you did, it's ok to revert them.. you can always regenerate them if you want.

[![](http://galleryproject.org/themes/gmc/images/forum_post.gif)](gallery_2.2.5_released.html#comment-277981)
Submitted by lysp on Wed, 2008-06-18 01:42.

Thanks.. had already reverted them - although the longer way.

Not sure I remember running the manifest tool. If it's not linked in the admin system then I'm almost definitely sure I didn't run it.

It's all fixed now though. Maybe this might be another path to consider in the upgrade script? As other people may have run into the same issue.

![saimon's picture](http://galleryproject.org/files/pictures/picture-197166.jpg "saimon's picture")
[![](http://galleryproject.org/themes/gmc/images/forum_post.gif)](gallery_2.2.5_released.html#comment-278951)
Submitted by saimon on Mon, 2008-06-30 14:23.

Hello,

Ever since I upgraded the gallery 2.2.5 can I no longer see my photos big. I see the index, but I don't see the photos enlarged.

In addition I had a gellery protected with the password and now I will not be longer display the password field.

What happened? What can I do? Please help.

I'm not an expert ...

greetings saimon

[![](http://galleryproject.org/themes/gmc/images/forum_post.gif)](gallery_2.2.5_released.html#comment-278985)
Submitted by valiant on Mon, 2008-06-30 23:19.

@saimon:

Please open a new forum topic in the G2 support forum to discuss your case. And please include a link to your Gallery in that topic.

Thanks!

--------------

Documentation: [Support / Troubleshooting](http://codex.gallery2.org/Category%3AGallery_2%3ATroubleshooting) | [Installation, Upgrade, Configuration and Usage](http://codex.gallery2.org/)

![caddymob's picture](http://galleryproject.org/files/pictures/picture-145599.jpg "caddymob's picture")
[![](http://galleryproject.org/themes/gmc/images/forum_post.gif)](gallery_2.2.5_released.html#comment-278992)
Submitted by caddymob on Tue, 2008-07-01 02:56.

valiant -- I'm really not sure if this is helpful, but I had problems when switching to a new host due (I think) to php5 run as a cgi. I have this post with my solution. You tell me, does it make sense or did I get lucky?

<http://gallery.menalto.com/node/79055#comment-278986>

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_

[Highly Dynamic Photography | Jason Corneveaux](http://corneveaux.com/gallery2/main.php)

![DWRZ's picture](http://galleryproject.org/files/pictures/picture-136900.jpg "DWRZ's picture")
[![](http://galleryproject.org/themes/gmc/images/forum_post.gif)](gallery_2.2.5_released.html#comment-280978)
Submitted by DWRZ on Thu, 2008-07-24 13:54.

I've never had any issues before with upgrading gallery2. This upgrade however, did much more harm than good. My site is basically unusable now, and worse this comes at a time when I really need it.

---

[![SourceForge Logo](http://gallery.sourceforge.net/sflogo.php)](http://sourceforge.net/projects/gallery)

[![Donate](http://galleryproject.org/themes/gmc/images/gallery_donate.png)](http://gallery.sourceforge.net/donate.php?donate_tag=website_footer)

[![Syndicate content](http://galleryproject.org/misc/feed.png "Syndicate content")](node/feed)
All logos, trademarks and content in this site are property of their respective owners. Posts and comments are the property of their posters. All else is Â© Copyright 2000-2014 [Bharat Mediratta](http://www.menalto.com/bharat/index.html).

![](http://galleryproject.org/themes/gmc/images/downloads-icon-hover.png)
![](http://galleryproject.org/themes/gmc/images/docs-icon-hover.png)
![](http://galleryproject.org/themes/gmc/images/search-icon-hover.png)
![](http://galleryproject.org/themes/gmc/images/forums-icon-hover.png)
![](http://galleryproject.org/themes/gmc/images/support-icon-hover.png)
![](http://galleryproject.org/themes/gmc/images/dev-icon-hover.png)
![](http://galleryproject.org/themes/gmc/images/myaccount-icon-hover.png)


