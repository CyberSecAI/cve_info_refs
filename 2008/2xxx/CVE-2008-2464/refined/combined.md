=== Content from www.kb.cert.org_61fa9558_20250124_184520.html ===


search

menu

icon-carat-right

cmu-wordmark

* ×
* [Home](/vuls/)
* [Notes](/vuls/bypublished/desc/)
* [Search](/vuls/search/)
* [Report a Vulnerability](/vuls/report/)
* [Disclosure Guidance](/vuls/guidance/)
* [VINCE](/vince/)

[[Carnegie Mellon University](https://www.cmu.edu)](https://www.cmu.edu/)

# [Software Engineering Institute](https://www.sei.cmu.edu/)

## CERT Coordination Center

* [Home](/vuls/)
* [Notes](/vuls/bypublished/desc/)
* [Search](/vuls/search/)
* [Report a Vulnerability](/vuls/report/)
* [Disclosure Guidance](/vuls/guidance/)
* [VINCE](/vince/)

* [Home](/vuls/)
* [Notes](/vuls/bypublished/desc/)
* Current:  VU#817940

## NetBSD malformed ICMPv6 MLD-QUERY denial of service

#### Vulnerability Note VU#817940

Original Release Date: 2008-09-05 | Last Revised: 2008-09-05

---

### Overview

NetBSD fails to properly handle ICMPv6 MLD query packets, which can allow a remote, unauthenticated attacker to cause a denial of service.

### Description

| ICMPv6, which is defined in [RFC 4443](http://tools.ietf.org/html/rfc4443), is a version of the ICMP protocol for IPv6. Multicast Listener Discovery (MLD) for IPv6, which is defined in [RFC 2710](http://tools.ietf.org/html/rfc2710), uses ICMPv6 message types. MLD is used to discover the presence of multicast listeners on a router's directly attached links. MLD messages are sent with a link-local IPv6 source and a hop limit of one, which restricts the traffic to the local link. NetBSD fails to properly handle an ICMPv6 MLD-QUERY packet that has a Maximum-Response-Delay field set to the value of less than 0x0010. Upon receiving such a packet, code in the NetBSD kernel will attempt a division by zero and the system will stop. |
| --- |

### Impact

| An attacker on a local link can cause a NetBSD system to crash, resulting in a denial-of-service condition. |
| --- |

### Solution

| **Apply an update**  This issue is addressed in NetBSD [Security Advisory 2008-011](http://ftp.netbsd.org/pub/NetBSD/security/advisories/NetBSD-SA2008-011.txt.asc). |
| --- |

### Vendor Information

817940
Filter by status:
All
Affected
Not Affected
Unknown

Filter by content:
 Additional information available

 Sort by:
Status
Alphabetical

Expand all

**Javascript is disabled. Click [here](/vuls/vendor/VU%23817940/) to view vendors.**
### [NetBSD](#WDON-7J7KWA) Affected

Updated:  September 05, 2008

### Status

Affected

### Vendor Statement

We have not received a statement from the vendor.

### Vendor Information

The vendor has not provided us with any further information regarding this vulnerability.

### Addendum

This issue is addressed in NetBSD [Security Advisory 2008-011](http://ftp.netbsd.org/pub/NetBSD/security/advisories/NetBSD-SA2008-011.txt.asc).

If you have feedback, comments, or additional information about this vulnerability, please send us email.

### CVSS Metrics

| Group | Score | Vector |
| --- | --- | --- |
| Base |  |  |
| Temporal |  |  |
| Environmental |  |  |

### References

* <http://ftp.netbsd.org/pub/NetBSD/security/advisories/NetBSD-SA2008-011.txt.asc>
* <http://cvsweb.netbsd.org/bsdweb.cgi/src/sys/netinet6/mld6.c>
* <http://cert.fi/haavoittuvuudet/2008/advisory-netbsd.html>
* <http://tools.ietf.org/html/rfc4443>
* <http://tools.ietf.org/html/rfc2710>
### Acknowledgements

Thanks to CERT-FI Vulnerability Coordination for reporting this vulnerability, who in turn credit Codenomicon.

This document was written by Will Dormann.

### Other Information

| **CVE IDs:** | [CVE-2008-2464](http://web.nvd.nist.gov/vuln/detail/CVE-2008-2464) |
| --- | --- |
| **Severity Metric:** | 3.12 |
| **Date Public:** | 2008-08-22 |
| **Date First Published:** | 2008-09-05 |
| **Date Last Updated:** | 2008-09-05 15:17 UTC |
| **Document Revision:** | 11 |

* [About vulnerability notes](https://vuls.cert.org/confluence/display/VIN/Vulnerability%2BNote%2BHelp)
* Contact us about this vulnerability
* [Provide a vendor statement](https://vuls.cert.org/confluence/display/VIN/Case%2BHandling#CaseHandling-Givingavendorstatusandstatement)

Sponsored by [CISA.](https://www.cisa.gov/cybersecurity)

 [Download PGP Key](https://vuls.cert.org/confluence/pages/viewpage.action?pageId=25985026)

[Read CERT/CC Blog](https://insights.sei.cmu.edu/cert/)

[Learn about Vulnerability Analysis](https://www.sei.cmu.edu/research-capabilities/all-work/display.cfm?customel_datapageid_4050=21304)

Carnegie Mellon University

Software Engineering Institute

4500 Fifth Avenue

Pittsburgh, PA 15213-2612

412-268-5800

[Office Locations](http://www.sei.cmu.edu/locations/index.cfm) | [Additional Sites Directory](http://www.sei.cmu.edu/additional-sites-directory/index.cfm) | [Legal](https://vuls.cert.org/confluence/display/VIN/VINCE%2BCode%2Bof%2BConduct#VINCECodeofConduct-TermsofUse) | [Privacy Notice](https://www.sei.cmu.edu/legal/privacy-notice/index.cfm) | [CMU Ethics Hotline](https://www.cmu.edu/hr/ethics-hotline/) | [www.sei.cmu.edu](http://www.sei.cmu.edu)

Â©2022 Carnegie Mellon University

[Contact SEI](https://www.sei.cmu.edu/contact-us/)
#### Contact CERT/CC

 412-268-5800



=== Content from cert.fi_65274438_20250124_184506.html ===

[Nykyinen kieli suomi, Skip to language switcher, Gå till språkväljare, Siirry kielivalitsimeen](#languageswitcher)[Siirry pääsisältöön](#main)[![Etusivu: Kyberturvallisuuskeskus](/dist/node/svg/00e263c841093e736a4c668932ffa9a9.svg)![Etusivu: Kyberturvallisuuskeskus](/dist/node/svg/852d887226d97c7b49736a10b0323f6e.svg)](/fi)HaeHae[Siirry hakuun](/fi/search)HaeSuomiSuomiNäytä sisältöValikkoValikko

* [Etusivu](/fi/)
* [Ajankohtaista](/fi/ajankohtaiset)Näytä alavalikko Ajankohtaista
* [Palvelumme](/fi/palvelumme)Näytä alavalikko Palvelumme
* [Toimintamme](/fi/toimintamme)Näytä alavalikko Toimintamme
* [Ota yhteyttä](/fi/ota-yhteytta)Näytä alavalikko Ota yhteyttä
* [Ilmoita tietoturvaloukkauksesta](/fi/ilmoita)
# Traficomin Kyberturvallisuuskeskus![](/sites/default/files/styles/media_image_lg/public/media/images/Nainen%20hymyilee%20tietokoneella.jpg)
### [Määräyshankepäätös: Määräys viestintäverkon kriittisistä osista (Ulkoinen linkki)](https://traficom.fi/fi/ajankohtaista/maarayshankepaatos-maarays-viestintaverkon-kriittisista-osista-0)

Julkaistu 24.01.2025 15:50Liikenne- ja viestintävirasto Traficom on antanut 23.1.2025 seuraavan määräyshankepäätöksen: Määräys viestintäverkon kriittisistä osista (TRAFICOM/36420/03.04.05.00/2025).
### [Internetin kauppapaikoilla leviää nyt haittaohjelma - toimi näin](/fi/ajankohtaista/internetin-kauppapaikoilla-leviaa-nyt-haittaohjelma-toimi-nain)

Julkaistu 24.01.2025 13:25Poliisi kertoi viime viikolla puhelimiin asennettavasta haittaohjelmasta, jota levitetään internetin kauppapaikoilla. Haittaohjelman avulla huijari voi saada koko puhelimesi hallintaansa ja päästä ...
### [Kyberturvallisuuskeskuksen viikkokatsaus - 04/2025](/fi/ajankohtaista/kyberturvallisuuskeskuksen-viikkokatsaus-042025)

Julkaistu 24.01.2025 8:47Tällä viikolla kerromme uusien tekniikoiden ja tekoälypalveluiden turvallisesta käyttöönotosta. Mukana asiaa myös ohjelmistoturvallisuudesta.
### [Kyberturvallisuuskeskuksen viikkokatsaus - 3/2025](/fi/ajankohtaista/kyberturvallisuuskeskuksen-viikkokatsaus-32025)

Julkaistu 17.01.2025 9:09Hakukoneiden hakutuloksiin ei kannata luottaa kritiikittömästi. Tälläkin viikolla on nähty väärennettyjen hakutulosten johtavan kalastelusivuille. Tällä viikolla kerromme myös, kuinka Suomessa järj...
### [Sonicwall SMA1000 laitteiden hallintakäyttöliittymässä kriittinen haavoittuvuus](/fi/haavoittuvuus_5/2025)

Haavoittuvuus5/2025

Julkaistu 23.01.2025 12:45
### [Kriittinen rsync-haavoittuvuus vaatii välitöntä korjausta](/fi/haavoittuvuus_4/2025)

Haavoittuvuus4/2025

Julkaistu 16.01.2025 13:13
### [Fortinetin FortiOS ja FortiProxy -tuotteissa kriittinen haavoittuvuus](/fi/haavoittuvuus_3/2025)

Haavoittuvuus3/2025

Julkaistu 15.01.2025 10:30
### [Ivanti Connect Secure -haavoittuvuuden hyväksikäyttöä havaittu](/fi/haavoittuvuus_2/2025)

Haavoittuvuus2/2025

Julkaistu 08.01.2025Päivitetty 10.01.2025 12:03
## Oikopolut

![](/sites/default/files/icons/svg/ohjeet_ja_suositukset_valkoinen.svg)
### Oppaat ja ohjeet

### Oppaat ja ohjeet

* [Tietoturvaohjeita yksityishenkilöille](/fi/ajankohtaista/ohjeet-ja-oppaat/ohjeet-ja-oppaat-yksityishenkiloille)
* [Tietoturvaohjeita organisaatioille ja yrityksille](/fi/ajankohtaista/ohjeet-ja-oppaat/ohjeet-ja-oppaat-organisaatioille-ja-yrityksille)
* [Ohjeita tietoturva-ammattilaisille](/fi/ajankohtaista/ohjeet-ja-oppaat/ohjeet-ja-oppaat-tietoturva-ammattilaisille)
![](/sites/default/files/icons/svg/tietoturva_nyt_valkoinen.svg)
### Ajankohtaista

### Ajankohtaista

* [Palvelunestohyökkäysten tilanne syksyllä 2024](/fi/ajankohtaista/palvelunestohyokkaystilanne-suomessa)
* [Kvanttiturvallisia algoritmeja lisätty kansalliseen kriteeristöön](/fi/ajankohtaista/kvanttiturvallisia-algoritmeja-lisatty-kansalliseen-kriteeristoon)
* [Digitaalinen skimmaus - vinkkejä verkkokaupan suojaamiseen](/fi/ajankohtaista/digitaalinen-skimmaus-vinkkeja-verkkokaupan-suojaamiseen)
![](/sites/default/files/icons/svg/ohjeet_ja_suositukset_valkoinen.svg)
### Suosituimmat ohjeemme

### Suosituimmat ohjeemme

* [Neuvoja identiteettivarkauden tai tietovuodon uhrille](/fi/ajankohtaista/neuvoja-identiteettivarkauden-tai-tietovuodon-uhrille)
* [Kotiverkon ja reitittimen tietoturva](/fi/ajankohtaista/ohjeet-ja-oppaat/kotiverkon-ja-reitittimen-tietoturva)
* [Näin suojaudut nettihuijaukselta](/fi/ajankohtaista/ohjeet-ja-oppaat/nain-suojaudut-nettihuijaukselta)
![](/sites/default/files/icons/svg/tietoturva_valkoinen.svg)
### Etsitkö näitä?

### Etsitkö näitä?

* [Kybersää](/fi/ajankohtaista/kybersaa)
* [Kybermittari](/fi/palvelumme/tilannekuva-ja-verkostojohtaminen/kybermittari)
* [NIS2 - Euroopan unionin kyberturvallisuusdirektiivi](/fi/toimintamme/saantely-ja-valvonta/nis2-euroopan-unionin-kyberturvallisuusdirektiivi)
* [Kyberkestävyyssäädös (Cyber Resilience Act, CRA)](/fi/toimintamme/saantely-ja-valvonta/kyberkestavyyssaados-cyber-resilience-act-cra)
## Nyt valppaana verkossa!

![Verkossa kaikki ei ehkä ole sitä miltä näyttää. nytvalppaana.fi](/sites/default/files/styles/media_image_lg/public/media/images/Traficom_nytvalppaana_YouTube_video_2_FI_0.jpg)Verkossa kaikki ei ehkä ole sitä miltä näyttää. Opettele tunnistamaan yleisimmät huijaukset ja suojaa omat tietosi mahdollisimman hyvin. [www.nytvalppaana.fi (Ulkoinen linkki)](https://nytvalppaana.fi/fi/nyt-valppaana-verkossa)
## Case Qt Group: missä mennään yrityksen valmistautumisessa CRA:han?

![](/sites/default/files/styles/media_image_lg/public/media/images/Traficom_KTK_tt-ohjelmistokehitys_hero_graafinen_v2_040724-JPG.jpg) Tämän webinaarin ehdit kuunnella vaikka työmatkalla! To 23.1. klo 8.30-9.00.[Ilmoittaudu mukaan! (Ulkoinen linkki)](https://traficom.fi/fi/ajankohtaista/tilaisuudet/case-qt-group-missa-mennaan-yrityksen-valmistautumisessa-crahan-2312025)
## Ohjelmistoturvallisuus 2025 - yritykset ja sääntely –webinaari

![](/sites/default/files/styles/media_image_lg/public/media/images/Traficom_KTK_tt-ohjelmistokehitys_hero_valokuva_040724-JPG.jpg)Onko organisaatiosi valmis ohjelmistoalan sääntelyn muutoksiin? Tämä webinaari tarjoaa yrityksille konkreettisia työkaluja valmistautumiseen.
[Ilmoittaudu mukaan! (Ulkoinen linkki)](https://traficom.fi/fi/ajankohtaista/tilaisuudet/ohjelmistoturvallisuus-2025-yritykset-ja-saantely-webinaari-1122025)
## Alatunniste

[![Etusivu: Kyberturvallisuuskeskus](/dist/node/svg/27508b33a3ad769660feb48fd97d50ac.svg)![Etusivu: Kyberturvallisuuskeskus](/dist/node/svg/27508b33a3ad769660feb48fd97d50ac.svg)](/fi)Liikenne- ja viestintävirasto Traficomin Kyberturvallisuuskeskus kehittää ja valvoo viestintäverkkojen ja -palveluiden toimintavarmuutta ja turvallisuutta. Tuotamme kyberturvallisuuden tilannekuvaa.
### Yhteystiedot

Käyntiosoite: Dynamicum, Erik Palménin aukio 1, 00560 HELSINKI

Postiosoite: Kyberturvallisuuskeskus, Liikenne- ja viestintävirasto Traficom, PL 313, 00059 TRAFICOM

Vaihde: 029 534 5000

### Seuraa meitä

[Facebook](https://www.facebook.com/TraficominKyberturvallisuuskeskus) [X](https://twitter.com/CERTFI) [LinkedIn (Traficom)](https://www.linkedin.com/company/traficom/) [Instagram (Traficom)](https://www.instagram.com/traficom_finland/) [YouTube (Traficom)](https://www.youtube.com/channel/UC4uKHTjTnw7rj5475kvVJxA/featured)
### Tutustu myös

[Traficom (Ulkoinen linkki)](https://www.traficom.fi)

* [Tietoa sivustosta](/fi/tietoa-sivustosta-3)
* [Saavutettavuusseloste](/fi/saavutettavuusselosteet)

* [Hallitse evästeitä](/fi/privacy)



=== Content from cvsweb.netbsd.org_3bc9f1f3_20250124_184518.html ===


| [[BACK]](/bsdweb.cgi/src/sys/netinet6/mld6.c?f=h#rev1.47)**Return to [mld6.c](/bsdweb.cgi/src/sys/netinet6/mld6.c?f=h#rev1.47) CVS log** [TXT] | [DIR] **Up to [[cvs.NetBSD.org]](/bsdweb.cgi/?f=h#dirlist) / [src](/bsdweb.cgi/src/?f=h#dirlist) / [sys](/bsdweb.cgi/src/sys/?f=h#dirlist) / [netinet6](/bsdweb.cgi/src/sys/netinet6/?f=h#dirlist)** |
| --- | --- |

| Please note that diffs are not public domain; they are subject to the copyright notices on the relevant files. |
| --- |

### Diff for /src/sys/netinet6/mld6.c between versions 1.46 and 1.47

| [version 1.46](mld6.c?f=h;rev=1.46), 2008/05/22 01:06:40 | [version 1.47](mld6.c?f=h;rev=1.47), 2008/08/22 17:11:39 |
| --- | --- |
| **[Line 262](mld6.c?f=h;content-type=text%2Fx-cvsweb-markup;ln=1;rev=1.46#l262)**  mld\_timerresid(struct in6\_multi \*in6m) | **[Line 262](mld6.c?f=h;content-type=text%2Fx-cvsweb-markup;ln=1;rev=1.47#l262)**  mld\_timerresid(struct in6\_multi \*in6m) |
| } | } |
|  |  |
| /\* return the remaining time in milliseconds \*/ | /\* return the remaining time in milliseconds \*/ |
| return (((u\_long)(diff.tv\_sec \* 1000000 + diff.tv\_usec)) / 1000); | return diff.tv\_sec \* 1000 + diff.tv\_usec / 1000; |
| } | } |
|  |  |
| static void | static void |
| **[Line 330](mld6.c?f=h;content-type=text%2Fx-cvsweb-markup;ln=1;rev=1.46#l330)**  mld\_input(struct mbuf \*m, int off) | **[Line 330](mld6.c?f=h;content-type=text%2Fx-cvsweb-markup;ln=1;rev=1.47#l330)**  mld\_input(struct mbuf \*m, int off) |
| struct in6\_multi \*in6m = NULL; | struct in6\_multi \*in6m = NULL; |
| struct in6\_addr mld\_addr, all\_in6; | struct in6\_addr mld\_addr, all\_in6; |
| struct in6\_ifaddr \*ia; | struct in6\_ifaddr \*ia; |
| int timer = 0;          /\* timer value in the MLD query header \*/ | u\_long timer = 0;       /\* timer value in the MLD query header \*/ |
|  |  |
| IP6\_EXTHDR\_GET(mldh, struct mld\_hdr \*, m, off, sizeof(\*mldh)); | IP6\_EXTHDR\_GET(mldh, struct mld\_hdr \*, m, off, sizeof(\*mldh)); |
| if (mldh == NULL) { | if (mldh == NULL) { |
| **[Line 441](mld6.c?f=h;content-type=text%2Fx-cvsweb-markup;ln=1;rev=1.46#l441)**  mld\_input(struct mbuf \*m, int off) | **[Line 441](mld6.c?f=h;content-type=text%2Fx-cvsweb-markup;ln=1;rev=1.47#l441)**  mld\_input(struct mbuf \*m, int off) |
| mld\_sendpkt(in6m, MLD\_LISTENER\_REPORT, NULL); | mld\_sendpkt(in6m, MLD\_LISTENER\_REPORT, NULL); |
| in6m->in6m\_state = MLD\_IREPORTEDLAST; | in6m->in6m\_state = MLD\_IREPORTEDLAST; |
| } else if (in6m->in6m\_timer == IN6M\_TIMER\_UNDEF || | } else if (in6m->in6m\_timer == IN6M\_TIMER\_UNDEF || |
| mld\_timerresid(in6m) > (u\_long)timer) { | mld\_timerresid(in6m) > timer) { |
| in6m->in6m\_timer = arc4random() % | in6m->in6m\_timer = |
| (int)(((long)timer \* hz) / 1000); | 1 + (arc4random() % timer) \* hz / 1000; |
| mld\_starttimer(in6m); | mld\_starttimer(in6m); |
| } | } |
| } | } |

---

Diff format:

Colored
Long colored
Unified
Context
Side by side

| Removed from v.1.46 |  |
| --- | --- |
| changed lines | |
|  | Added in v.1.47 |

---

CVSweb <webmaster@jp.NetBSD.org>


=== Content from cvsweb.netbsd.org_93426d55_20250124_184516.html ===

[![The NetBSD Project](/images/powered-by-NetBSD.png)](http://www.NetBSD.org/)
# CVS log for src/sys/netinet6/mld6.c

[![[BACK]](/icons/back.gif)](./#mld6.c) **Up to [[cvs.NetBSD.org]](/bsdweb.cgi/#dirlist) / [src](/bsdweb.cgi/src/#dirlist) / [sys](/bsdweb.cgi/src/sys/#dirlist) / [netinet6](/bsdweb.cgi/src/sys/netinet6/#dirlist)**

[Request diff between arbitrary revisions](#diff)

---

Keyword substitution: kv

Default branch: MAIN

---

Revision **1.99.2.2**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.99.2.2;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.99.2.2;content-type=text%2Fplain), [markup](mld6.c?rev=1.99.2.2;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.99.2.2) - [select for diffs](mld6.c?r1=1.99.2.2#rev1.99.2.2)

*Mon Apr 13 08:05:17 2020 UTC* (4 years, 9 months ago) by *martin*

Branches: [phil-wifi](./mld6.c?only_with_tag=phil-wifi)

Diff to: previous 1.99.2.1: [preferred](mld6.c.diff?r1=1.99.2.1;r2=1.99.2.2), [colored](mld6.c.diff?r1=1.99.2.1;r2=1.99.2.2;f=h); branchpoint 1.99: [preferred](mld6.c.diff?r1=1.99;r2=1.99.2.2), [colored](mld6.c.diff?r1=1.99;r2=1.99.2.2;f=h); next MAIN 1.100: [preferred](mld6.c.diff?r1=1.100;r2=1.99.2.2), [colored](mld6.c.diff?r1=1.100;r2=1.99.2.2;f=h)

Changes since revision 1.99.2.1: +10 -6
lines
```

Mostly merge changes from HEAD upto 20200411

```

---

Revision **1.101**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.101;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.101;content-type=text%2Fplain), [markup](mld6.c?rev=1.101;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.101) - [select for diffs](mld6.c?r1=1.101#rev1.101)

*Wed Sep 25 09:53:38 2019 UTC* (5 years, 4 months ago) by *ozaki-r*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

CVS tags: [thorpej-ifq-base](./mld6.c?only_with_tag=thorpej-ifq-base),
[thorpej-ifq](./mld6.c?only_with_tag=thorpej-ifq),
[thorpej-i2c-spi-conf2-base](./mld6.c?only_with_tag=thorpej-i2c-spi-conf2-base),
[thorpej-i2c-spi-conf2](./mld6.c?only_with_tag=thorpej-i2c-spi-conf2),
[thorpej-i2c-spi-conf-base](./mld6.c?only_with_tag=thorpej-i2c-spi-conf-base),
[thorpej-i2c-spi-conf](./mld6.c?only_with_tag=thorpej-i2c-spi-conf),
[thorpej-futex2-base](./mld6.c?only_with_tag=thorpej-futex2-base),
[thorpej-futex2](./mld6.c?only_with_tag=thorpej-futex2),
[thorpej-futex-base](./mld6.c?only_with_tag=thorpej-futex-base),
[thorpej-futex](./mld6.c?only_with_tag=thorpej-futex),
[thorpej-cfargs2-base](./mld6.c?only_with_tag=thorpej-cfargs2-base),
[thorpej-cfargs2](./mld6.c?only_with_tag=thorpej-cfargs2),
[thorpej-cfargs-base](./mld6.c?only_with_tag=thorpej-cfargs-base),
[thorpej-cfargs](./mld6.c?only_with_tag=thorpej-cfargs),
[thorpej-altq-separation-base](./mld6.c?only_with_tag=thorpej-altq-separation-base),
[thorpej-altq-separation](./mld6.c?only_with_tag=thorpej-altq-separation),
[phil-wifi-20200421](./mld6.c?only_with_tag=phil-wifi-20200421),
[phil-wifi-20200411](./mld6.c?only_with_tag=phil-wifi-20200411),
[phil-wifi-20200406](./mld6.c?only_with_tag=phil-wifi-20200406),
[phil-wifi-20191119](./mld6.c?only_with_tag=phil-wifi-20191119),
[perseant-exfatfs-base-20240630](./mld6.c?only_with_tag=perseant-exfatfs-base-20240630),
[perseant-exfatfs-base](./mld6.c?only_with_tag=perseant-exfatfs-base),
[perseant-exfatfs](./mld6.c?only_with_tag=perseant-exfatfs),
[netbsd-10-base](./mld6.c?only_with_tag=netbsd-10-base),
[netbsd-10-1-RELEASE](./mld6.c?only_with_tag=netbsd-10-1-RELEASE),
[netbsd-10-0-RELEASE](./mld6.c?only_with_tag=netbsd-10-0-RELEASE),
[netbsd-10-0-RC6](./mld6.c?only_with_tag=netbsd-10-0-RC6),
[netbsd-10-0-RC5](./mld6.c?only_with_tag=netbsd-10-0-RC5),
[netbsd-10-0-RC4](./mld6.c?only_with_tag=netbsd-10-0-RC4),
[netbsd-10-0-RC3](./mld6.c?only_with_tag=netbsd-10-0-RC3),
[netbsd-10-0-RC2](./mld6.c?only_with_tag=netbsd-10-0-RC2),
[netbsd-10-0-RC1](./mld6.c?only_with_tag=netbsd-10-0-RC1),
[netbsd-10](./mld6.c?only_with_tag=netbsd-10),
[is-mlppp-base](./mld6.c?only_with_tag=is-mlppp-base),
[is-mlppp](./mld6.c?only_with_tag=is-mlppp),
[cjep\_sun2x-base1](./mld6.c?only_with_tag=cjep_sun2x-base1),
[cjep\_sun2x-base](./mld6.c?only_with_tag=cjep_sun2x-base),
[cjep\_sun2x](./mld6.c?only_with_tag=cjep_sun2x),
[cjep\_staticlib\_x-base1](./mld6.c?only_with_tag=cjep_staticlib_x-base1),
[cjep\_staticlib\_x-base](./mld6.c?only_with_tag=cjep_staticlib_x-base),
[cjep\_staticlib\_x](./mld6.c?only_with_tag=cjep_staticlib_x),
[bouyer-xenpvh-base2](./mld6.c?only_with_tag=bouyer-xenpvh-base2),
[bouyer-xenpvh-base1](./mld6.c?only_with_tag=bouyer-xenpvh-base1),
[bouyer-xenpvh-base](./mld6.c?only_with_tag=bouyer-xenpvh-base),
[bouyer-xenpvh](./mld6.c?only_with_tag=bouyer-xenpvh),
[bouyer-sunxi-drm-base](./mld6.c?only_with_tag=bouyer-sunxi-drm-base),
[bouyer-sunxi-drm](./mld6.c?only_with_tag=bouyer-sunxi-drm),
[ad-namecache-base3](./mld6.c?only_with_tag=ad-namecache-base3),
[ad-namecache-base2](./mld6.c?only_with_tag=ad-namecache-base2),
[ad-namecache-base1](./mld6.c?only_with_tag=ad-namecache-base1),
[ad-namecache-base](./mld6.c?only_with_tag=ad-namecache-base),
[ad-namecache](./mld6.c?only_with_tag=ad-namecache),
[HEAD](./mld6.c?only_with_tag=HEAD)

Diff to: previous 1.100: [preferred](mld6.c.diff?r1=1.100;r2=1.101), [colored](mld6.c.diff?r1=1.100;r2=1.101;f=h)

Changes since revision 1.100: +10 -6
lines
```

Make panic messages more informative

```

---

Revision **1.99.2.1**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.99.2.1;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.99.2.1;content-type=text%2Fplain), [markup](mld6.c?rev=1.99.2.1;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.99.2.1) - [select for diffs](mld6.c?r1=1.99.2.1#rev1.99.2.1)

*Mon Jun 10 22:09:48 2019 UTC* (5 years, 7 months ago) by *christos*

Branches: [phil-wifi](./mld6.c?only_with_tag=phil-wifi)

Diff to: previous 1.99: [preferred](mld6.c.diff?r1=1.99;r2=1.99.2.1), [colored](mld6.c.diff?r1=1.99;r2=1.99.2.1;f=h)

Changes since revision 1.99: +3 -3
lines
```

Sync with HEAD

```

---

Revision **1.91.2.3**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.91.2.3;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.91.2.3;content-type=text%2Fplain), [markup](mld6.c?rev=1.91.2.3;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.91.2.3) - [select for diffs](mld6.c?r1=1.91.2.3#rev1.91.2.3)

*Wed Dec 26 14:02:05 2018 UTC* (6 years, 1 month ago) by *pgoyette*

Branches: [pgoyette-compat](./mld6.c?only_with_tag=pgoyette-compat)

CVS tags: [pgoyette-compat-merge-20190127](./mld6.c?only_with_tag=pgoyette-compat-merge-20190127)

Diff to: previous 1.91.2.2: [preferred](mld6.c.diff?r1=1.91.2.2;r2=1.91.2.3), [colored](mld6.c.diff?r1=1.91.2.2;r2=1.91.2.3;f=h); branchpoint 1.91: [preferred](mld6.c.diff?r1=1.91;r2=1.91.2.3), [colored](mld6.c.diff?r1=1.91;r2=1.91.2.3;f=h); next MAIN 1.92: [preferred](mld6.c.diff?r1=1.92;r2=1.91.2.3), [colored](mld6.c.diff?r1=1.92;r2=1.91.2.3;f=h)

Changes since revision 1.91.2.2: +3 -3
lines
```

Sync with HEAD, resolve a few conflicts

```

---

Revision **1.100**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.100;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.100;content-type=text%2Fplain), [markup](mld6.c?rev=1.100;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.100) - [select for diffs](mld6.c?r1=1.100#rev1.100)

*Sat Dec 22 14:28:57 2018 UTC* (6 years, 1 month ago) by *maxv*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

CVS tags: [phil-wifi-20190609](./mld6.c?only_with_tag=phil-wifi-20190609),
[pgoyette-compat-20190127](./mld6.c?only_with_tag=pgoyette-compat-20190127),
[pgoyette-compat-20190118](./mld6.c?only_with_tag=pgoyette-compat-20190118),
[pgoyette-compat-1226](./mld6.c?only_with_tag=pgoyette-compat-1226),
[netbsd-9-base](./mld6.c?only_with_tag=netbsd-9-base),
[netbsd-9-4-RELEASE](./mld6.c?only_with_tag=netbsd-9-4-RELEASE),
[netbsd-9-3-RELEASE](./mld6.c?only_with_tag=netbsd-9-3-RELEASE),
[netbsd-9-2-RELEASE](./mld6.c?only_with_tag=netbsd-9-2-RELEASE),
[netbsd-9-1-RELEASE](./mld6.c?only_with_tag=netbsd-9-1-RELEASE),
[netbsd-9-0-RELEASE](./mld6.c?only_with_tag=netbsd-9-0-RELEASE),
[netbsd-9-0-RC2](./mld6.c?only_with_tag=netbsd-9-0-RC2),
[netbsd-9-0-RC1](./mld6.c?only_with_tag=netbsd-9-0-RC1),
[netbsd-9](./mld6.c?only_with_tag=netbsd-9),
[isaki-audio2-base](./mld6.c?only_with_tag=isaki-audio2-base),
[isaki-audio2](./mld6.c?only_with_tag=isaki-audio2)

Diff to: previous 1.99: [preferred](mld6.c.diff?r1=1.99;r2=1.100), [colored](mld6.c.diff?r1=1.99;r2=1.100;f=h)

Changes since revision 1.99: +3 -3
lines
```

Replace M_ALIGN and MH_ALIGN by m_align.

```

---

Revision **1.91.2.2**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.91.2.2;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.91.2.2;content-type=text%2Fplain), [markup](mld6.c?rev=1.91.2.2;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.91.2.2) - [select for diffs](mld6.c?r1=1.91.2.2#rev1.91.2.2)

*Mon Jun 25 07:26:07 2018 UTC* (6 years, 7 months ago) by *pgoyette*

Branches: [pgoyette-compat](./mld6.c?only_with_tag=pgoyette-compat)

Diff to: previous 1.91.2.1: [preferred](mld6.c.diff?r1=1.91.2.1;r2=1.91.2.2), [colored](mld6.c.diff?r1=1.91.2.1;r2=1.91.2.2;f=h); branchpoint 1.91: [preferred](mld6.c.diff?r1=1.91;r2=1.91.2.2), [colored](mld6.c.diff?r1=1.91;r2=1.91.2.2;f=h)

Changes since revision 1.91.2.1: +46 -23
lines
```

Sync with HEAD

```

---

Revision **1.89.2.2**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.89.2.2;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.89.2.2;content-type=text%2Fplain), [markup](mld6.c?rev=1.89.2.2;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.89.2.2) - [select for diffs](mld6.c?r1=1.89.2.2#rev1.89.2.2)

*Thu Jun 7 17:48:31 2018 UTC* (6 years, 7 months ago) by *martin*

Branches: [netbsd-8](./mld6.c?only_with_tag=netbsd-8)

CVS tags: [netbsd-8-3-RELEASE](./mld6.c?only_with_tag=netbsd-8-3-RELEASE),
[netbsd-8-2-RELEASE](./mld6.c?only_with_tag=netbsd-8-2-RELEASE),
[netbsd-8-1-RELEASE](./mld6.c?only_with_tag=netbsd-8-1-RELEASE),
[netbsd-8-1-RC1](./mld6.c?only_with_tag=netbsd-8-1-RC1),
[netbsd-8-0-RELEASE](./mld6.c?only_with_tag=netbsd-8-0-RELEASE),
[netbsd-8-0-RC2](./mld6.c?only_with_tag=netbsd-8-0-RC2)

Diff to: previous 1.89.2.1: [preferred](mld6.c.diff?r1=1.89.2.1;r2=1.89.2.2), [colored](mld6.c.diff?r1=1.89.2.1;r2=1.89.2.2;f=h); branchpoint 1.89: [preferred](mld6.c.diff?r1=1.89;r2=1.89.2.2), [colored](mld6.c.diff?r1=1.89;r2=1.89.2.2;f=h); next MAIN 1.90: [preferred](mld6.c.diff?r1=1.90;r2=1.89.2.2), [colored](mld6.c.diff?r1=1.90;r2=1.89.2.2;f=h)

Changes since revision 1.89.2.1: +46 -23
lines
```

Pull up following revision(s) (requested by ozaki-r in ticket #842):

	sys/netinet6/mld6.c: revision 1.93-1.99
	sys/netinet6/in6_var.h: revision 1.99,1.100
	sys/netinet6/in6.c: revision 1.267,1.268
	sys/netinet6/nd6.c: revision 1.249

Don't hold softnet_lock in mld_timeo
Then we can get rid of remaining abuses of mutex_owned(softnet_lock).

Release in6_multilock on callout_halt of mld_timeo to avoid a deadlock
Improve atomicity of in6_leavegroup and in6_delmulti

Avoid NULL pointer dereference on imm->i6mm_maddr

Make a refcount decrement and a removal from a list of an item atomic
in6m_refcount of an in6m can be incremented if the in6m is on the list
(if_multiaddrs) in in6_addmulti or mld_input.  So we must avoid such an
increment when we try to destroy an in6m.  To this end we must make
an in6m_refcount decrement and a removal of an in6m from if_multiaddrs
atomic.

Make a deletion of in6m in nd6_rtrequest atomic

Move LIST_REMOVE
mld_stoptimer releases in6_multilock temporarily, so we must LIST_REMOVE first.

Avoid double LIST_REMOVE which corrupts lists
Mark in6m as used for non-DIAGNOSTIC builds.

```

---

Revision **1.99**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.99;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.99;content-type=text%2Fplain), [markup](mld6.c?rev=1.99;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.99) - [select for diffs](mld6.c?r1=1.99#rev1.99)

*Tue May 29 04:39:26 2018 UTC* (6 years, 7 months ago) by *ozaki-r*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

CVS tags: [phil-wifi-base](./mld6.c?only_with_tag=phil-wifi-base),
[pgoyette-compat-1126](./mld6.c?only_with_tag=pgoyette-compat-1126),
[pgoyette-compat-1020](./mld6.c?only_with_tag=pgoyette-compat-1020),
[pgoyette-compat-0930](./mld6.c?only_with_tag=pgoyette-compat-0930),
[pgoyette-compat-0906](./mld6.c?only_with_tag=pgoyette-compat-0906),
[pgoyette-compat-0728](./mld6.c?only_with_tag=pgoyette-compat-0728),
[pgoyette-compat-0625](./mld6.c?only_with_tag=pgoyette-compat-0625)

Branch point for: [phil-wifi](./mld6.c?only_with_tag=phil-wifi)

Diff to: previous 1.98: [preferred](mld6.c.diff?r1=1.98;r2=1.99), [colored](mld6.c.diff?r1=1.98;r2=1.99;f=h)

Changes since revision 1.98: +8 -7
lines
```

Avoid double LIST_REMOVE which corrupts lists

```

---

Revision **1.98**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.98;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.98;content-type=text%2Fplain), [markup](mld6.c?rev=1.98;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.98) - [select for diffs](mld6.c?r1=1.98#rev1.98)

*Tue May 29 04:38:59 2018 UTC* (6 years, 7 months ago) by *ozaki-r*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

Diff to: previous 1.97: [preferred](mld6.c.diff?r1=1.97;r2=1.98), [colored](mld6.c.diff?r1=1.97;r2=1.98;f=h)

Changes since revision 1.97: +3 -3
lines
```

Move LIST_REMOVE

mld_stoptimer releases in6_multilock temporarily, so we must LIST_REMOVE first.

```

---

Revision **1.97**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.97;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.97;content-type=text%2Fplain), [markup](mld6.c?rev=1.97;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.97) - [select for diffs](mld6.c?r1=1.97#rev1.97)

*Tue May 29 04:38:29 2018 UTC* (6 years, 7 months ago) by *ozaki-r*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

Diff to: previous 1.96: [preferred](mld6.c.diff?r1=1.96;r2=1.97), [colored](mld6.c.diff?r1=1.96;r2=1.97;f=h)

Changes since revision 1.96: +15 -2
lines
```

Make a deletion of in6m in nd6_rtrequest atomic

```

---

Revision **1.96**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.96;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.96;content-type=text%2Fplain), [markup](mld6.c?rev=1.96;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.96) - [select for diffs](mld6.c?r1=1.96#rev1.96)

*Tue May 29 04:37:58 2018 UTC* (6 years, 7 months ago) by *ozaki-r*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

Diff to: previous 1.95: [preferred](mld6.c.diff?r1=1.95;r2=1.96), [colored](mld6.c.diff?r1=1.95;r2=1.96;f=h)

Changes since revision 1.95: +10 -7
lines
```

Make a refcount decrement and a removal from a list of an item atomic

in6m_refcount of an in6m can be incremented if the in6m is on the list
(if_multiaddrs) in in6_addmulti or mld_input.  So we must avoid such an
increment when we try to destroy an in6m.  To this end we must make
an in6m_refcount decrement and a removal of an in6m from if_multiaddrs
atomic.

```

---

Revision **1.95**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.95;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.95;content-type=text%2Fplain), [markup](mld6.c?rev=1.95;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.95) - [select for diffs](mld6.c?r1=1.95#rev1.95)

*Tue May 29 04:36:47 2018 UTC* (6 years, 7 months ago) by *ozaki-r*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

Diff to: previous 1.94: [preferred](mld6.c.diff?r1=1.94;r2=1.95), [colored](mld6.c.diff?r1=1.94;r2=1.95;f=h)

Changes since revision 1.94: +16 -7
lines
```

Improve atomicity of in6_leavegroup and in6_delmulti

```

---

Revision **1.94**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.94;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.94;content-type=text%2Fplain), [markup](mld6.c?rev=1.94;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.94) - [select for diffs](mld6.c?r1=1.94#rev1.94)

*Tue May 29 04:36:15 2018 UTC* (6 years, 7 months ago) by *ozaki-r*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

Diff to: previous 1.93: [preferred](mld6.c.diff?r1=1.93;r2=1.94), [colored](mld6.c.diff?r1=1.93;r2=1.94;f=h)

Changes since revision 1.93: +4 -2
lines
```

Release in6_multilock on callout_halt of mld_timeo to avoid a deadlock

```

---

Revision **1.93**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.93;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.93;content-type=text%2Fplain), [markup](mld6.c?rev=1.93;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.93) - [select for diffs](mld6.c?r1=1.93#rev1.93)

*Tue May 29 04:35:28 2018 UTC* (6 years, 7 months ago) by *ozaki-r*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

Diff to: previous 1.92: [preferred](mld6.c.diff?r1=1.92;r2=1.93), [colored](mld6.c.diff?r1=1.92;r2=1.93;f=h)

Changes since revision 1.92: +7 -12
lines
```

Don't hold softnet_lock in mld_timeo

Then we can get rid of remaining abuses of mutex_owned(softnet_lock).

```

---

Revision **1.91.2.1**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.91.2.1;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.91.2.1;content-type=text%2Fplain), [markup](mld6.c?rev=1.91.2.1;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.91.2.1) - [select for diffs](mld6.c?r1=1.91.2.1#rev1.91.2.1)

*Wed May 2 07:20:23 2018 UTC* (6 years, 8 months ago) by *pgoyette*

Branches: [pgoyette-compat](./mld6.c?only_with_tag=pgoyette-compat)

Diff to: previous 1.91: [preferred](mld6.c.diff?r1=1.91;r2=1.91.2.1), [colored](mld6.c.diff?r1=1.91;r2=1.91.2.1;f=h)

Changes since revision 1.91: +2 -5
lines
```

Synch with HEAD

```

---

Revision **1.92**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.92;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.92;content-type=text%2Fplain), [markup](mld6.c?rev=1.92;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.92) - [select for diffs](mld6.c?r1=1.92#rev1.92)

*Tue May 1 07:21:39 2018 UTC* (6 years, 8 months ago) by *maxv*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

CVS tags: [pgoyette-compat-0521](./mld6.c?only_with_tag=pgoyette-compat-0521),
[pgoyette-compat-0502](./mld6.c?only_with_tag=pgoyette-compat-0502)

Diff to: previous 1.91: [preferred](mld6.c.diff?r1=1.91;r2=1.92), [colored](mld6.c.diff?r1=1.91;r2=1.92;f=h)

Changes since revision 1.91: +2 -5
lines
```

Remove now unused net_osdep.h includes, the other BSDs did the same.

```

---

Revision **1.91**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.91;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.91;content-type=text%2Fplain), [markup](mld6.c?rev=1.91;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.91) - [select for diffs](mld6.c?r1=1.91#rev1.91)

*Thu Feb 1 07:49:19 2018 UTC* (6 years, 11 months ago) by *maxv*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

CVS tags: [pgoyette-compat-base](./mld6.c?only_with_tag=pgoyette-compat-base),
[pgoyette-compat-0422](./mld6.c?only_with_tag=pgoyette-compat-0422),
[pgoyette-compat-0415](./mld6.c?only_with_tag=pgoyette-compat-0415),
[pgoyette-compat-0407](./mld6.c?only_with_tag=pgoyette-compat-0407),
[pgoyette-compat-0330](./mld6.c?only_with_tag=pgoyette-compat-0330),
[pgoyette-compat-0322](./mld6.c?only_with_tag=pgoyette-compat-0322),
[pgoyette-compat-0315](./mld6.c?only_with_tag=pgoyette-compat-0315)

Branch point for: [pgoyette-compat](./mld6.c?only_with_tag=pgoyette-compat)

Diff to: previous 1.90: [preferred](mld6.c.diff?r1=1.90;r2=1.91), [colored](mld6.c.diff?r1=1.90;r2=1.91;f=h)

Changes since revision 1.90: +21 -25
lines
```

Style, and remove the 'len' argument from mld_allocbuf(), it is misleading,
we only want a static struct. Beyond that no functional change.

```

---

Revision **1.89.2.1**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.89.2.1;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.89.2.1;content-type=text%2Fplain), [markup](mld6.c?rev=1.89.2.1;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.89.2.1) - [select for diffs](mld6.c?r1=1.89.2.1#rev1.89.2.1)

*Tue Jan 2 10:20:34 2018 UTC* (7 years ago) by *snj*

Branches: [netbsd-8](./mld6.c?only_with_tag=netbsd-8)

CVS tags: [netbsd-8-0-RC1](./mld6.c?only_with_tag=netbsd-8-0-RC1)

Diff to: previous 1.89: [preferred](mld6.c.diff?r1=1.89;r2=1.89.2.1), [colored](mld6.c.diff?r1=1.89;r2=1.89.2.1;f=h)

Changes since revision 1.89: +4 -12
lines
```

Pull up following revision(s) (requested by ozaki-r in ticket #456):
	sys/arch/arm/sunxi/sunxi_emac.c: 1.9
	sys/dev/ic/dwc_gmac.c: 1.43-1.44
	sys/dev/pci/if_iwm.c: 1.75
	sys/dev/pci/if_wm.c: 1.543
	sys/dev/pci/ixgbe/ixgbe.c: 1.112
	sys/dev/pci/ixgbe/ixv.c: 1.74
	sys/kern/sys_socket.c: 1.75
	sys/net/agr/if_agr.c: 1.43
	sys/net/bpf.c: 1.219
	sys/net/if.c: 1.397, 1.399, 1.401-1.403, 1.406-1.410, 1.412-1.416
	sys/net/if.h: 1.242-1.247, 1.250, 1.252-1.257
	sys/net/if_bridge.c: 1.140 via patch, 1.142-1.146
	sys/net/if_etherip.c: 1.40
	sys/net/if_ethersubr.c: 1.243, 1.246
	sys/net/if_faith.c: 1.57
	sys/net/if_gif.c: 1.132
	sys/net/if_l2tp.c: 1.15, 1.17
	sys/net/if_loop.c: 1.98-1.101
	sys/net/if_media.c: 1.35
	sys/net/if_pppoe.c: 1.131-1.132
	sys/net/if_spppsubr.c: 1.176-1.177
	sys/net/if_tun.c: 1.142
	sys/net/if_vlan.c: 1.107, 1.109, 1.114-1.121
	sys/net/npf/npf_ifaddr.c: 1.3
	sys/net/npf/npf_os.c: 1.8-1.9
	sys/net/rtsock.c: 1.230
	sys/netcan/if_canloop.c: 1.3-1.5
	sys/netinet/if_arp.c: 1.255
	sys/netinet/igmp.c: 1.65
	sys/netinet/in.c: 1.210-1.211
	sys/netinet/in_pcb.c: 1.180
	sys/netinet/ip_carp.c: 1.92, 1.94
	sys/netinet/ip_flow.c: 1.81
	sys/netinet/ip_input.c: 1.362
	sys/netinet/ip_mroute.c: 1.147
	sys/netinet/ip_output.c: 1.283, 1.285, 1.287
	sys/netinet6/frag6.c: 1.61
	sys/netinet6/in6.c: 1.251, 1.255
	sys/netinet6/in6_pcb.c: 1.162
	sys/netinet6/ip6_flow.c: 1.35
	sys/netinet6/ip6_input.c: 1.183
	sys/netinet6/ip6_output.c: 1.196
	sys/netinet6/mld6.c: 1.90
	sys/netinet6/nd6.c: 1.239-1.240
	sys/netinet6/nd6_nbr.c: 1.139
	sys/netinet6/nd6_rtr.c: 1.136
	sys/netipsec/ipsec_output.c: 1.65
	sys/rump/net/lib/libnetinet/netinet_component.c: 1.9-1.10
kmem_intr_free kmem_intr_[z]alloced memory
the underlying pools are the same but api-wise those should match
Unify IFEF_*_MPSAFE into IFEF_MPSAFE
There are already two flags for if_output and if_start, however, it seems such
MPSAFE flags are eventually needed for all if_XXX operations. Having discrete
flags for each operation is wasteful of if_extflags bits. So let's unify
the flags into one: IFEF_MPSAFE.
Fortunately IFEF_*_MPSAFE flags have never been included in any releases, so
we can change them without breaking backward compatibility of the releases
(though the kernel version of -current should be bumped).
Note that if an interface have both MP-safe and non-MP-safe operations at a
time, we have to set the IFEF_MPSAFE flag and let callees of non-MP-safe
opeartions take the kernel lock.
Proposed on tech-kern@ and tech-net@
Provide macros for softnet_lock and KERNEL_LOCK hiding NET_MPSAFE switch
It reduces C&P codes such as "#ifndef NET_MPSAFE KERNEL_LOCK(1, NULL); ..."
scattered all over the source code and makes it easy to identify remaining
KERNEL_LOCK and/or softnet_lock that are held even if NET_MPSAFE.
No functional change
Hold KERNEL_LOCK on if_ioctl selectively based on IFEF_MPSAFE
If IFEF_MPSAFE is set, hold the lock and otherwise don't hold.
This change requires additions of KERNEL_LOCK to subsequence functions from
if_ioctl such as ifmedia_ioctl and ifioctl_common to protect non-MP-safe
components.
Proposed on tech-kern@ and tech-net@
Ensure to hold if_ioctl_lock when calling if_flags_set
Fix locking against myself on ifpromisc
vlan_unconfig_locked could be called with holding if_ioctl_lock.
Ensure to not turn on IFF_RUNNING of an interface until its initialization completes
And ensure to turn off it before destruction as per IFF_RUNNING's description
"resource allocated". (The description is a bit doubtful though, I believe the
change is still proper.)
Ensure to hold if_ioctl_lock on if_up and if_down
One exception for if_down is if_detach; in the case the lock isn't needed
because it's guaranteed that no other one can access ifp at that point.
Make if_link_queue MP-safe if IFEF_MPSAFE
if_link_queue is a queue to store events of link state changes, which is
used to pass events from (typically) an interrupt handler to
if_link_state_change softint. The queue was protected by KERNEL_LOCK so far,
but if IFEF_MPSAFE is enabled, it becomes unsafe because (perhaps) an interrupt
handler of an interface with IFEF_MPSAFE doesn't take KERNEL_LOCK. Protect it
by a spin mutex.
Additionally with this change KERNEL_LOCK of if_link_state_change softint is
omitted if NET_MPSAFE is enabled.
Note that the spin mutex is now ifp->if_snd.ifq_lock as well as the case of
if_timer (see the comment).
Use IFADDR_WRITER_FOREACH instead of IFADDR_READER_FOREACH
At that point no other one modifies the list so IFADDR_READER_FOREACH
is unnecessary. Use of IFADDR_READER_FOREACH is harmless in general though,
if we try to detect contract violations of pserialize, using it violates
the contract. So avoid using it makes life easy.
Ensure to call if_addr_init with holding if_ioctl_lock
Get rid of outdated comments
Fix build of kernels without ether
By throwing out if_enable_vlan_mtu and if_disable_vlan_mtu that
created a unnecessary dependency from if.c to if_ethersubr.c.
PR [kern/52790](http://gnats.NetBSD.org/52790)
Rename IFNET_LOCK to IFNET_GLOBAL_LOCK
IFNET_LOCK will be used in another lock, if_ioctl_lock (might be renamed then).
Wrap if_ioctl_lock with IFNET_* macros (NFC)
Also if_ioctl_lock perhaps needs to be renamed to something because it's now
not just for ioctl...
Reorder some destruction routines in if_detach
- Destroy if_ioctl_lock at the end of the if_detach because it's used in various
  destruction routines
- Move psref_target_destroy after pr_purgeif because we want to use psref in
  pr_purgeif (otherwise destruction procedures can be tricky)
Ensure to call if_mcast_op with holding IFNET_LOCK
Note that CARP doesn't deal with IFNET_LOCK yet.
Remove IFNET_GLOBAL_LOCK where it's unnecessary because IFNET_LOCK is held
Describe which lock is used to protect each member variable of struct ifnet
Requested by skrll@
Write a guideline for converting an interface to IFEF_MPSAFE
Requested by skrll@
Note that IFNET_LOCK must not be held in softint
Don't set IFEF_MPSAFE unless NET_MPSAFE at this point
Because recent investigations show that interfaces with IFEF_MPSAFE need to
follow additional restrictions to work with the flag safely. We should enable it
on an interface by default only if the interface surely satisfies the
restrictions, which are described in if.h.
Note that enabling IFEF_MPSAFE solely gains a few benefit on performance because
the network stack is still serialized by the big kernel locks by default.

```

---

Revision **1.55.8.2**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.55.8.2;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.55.8.2;content-type=text%2Fplain), [markup](mld6.c?rev=1.55.8.2;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.55.8.2) - [select for diffs](mld6.c?r1=1.55.8.2#rev1.55.8.2)

*Sun Dec 3 11:39:04 2017 UTC* (7 years, 1 month ago) by *jdolecek*

Branches: [tls-maxphys](./mld6.c?only_with_tag=tls-maxphys)

Diff to: previous 1.55.8.1: [preferred](mld6.c.diff?r1=1.55.8.1;r2=1.55.8.2), [colored](mld6.c.diff?r1=1.55.8.1;r2=1.55.8.2;f=h); branchpoint 1.55: [preferred](mld6.c.diff?r1=1.55;r2=1.55.8.2), [colored](mld6.c.diff?r1=1.55;r2=1.55.8.2;f=h); next MAIN 1.56: [preferred](mld6.c.diff?r1=1.56;r2=1.55.8.2), [colored](mld6.c.diff?r1=1.56;r2=1.55.8.2;f=h)

Changes since revision 1.55.8.1: +324 -279
lines
```

update from HEAD

```

---

Revision **1.90**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.90;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.90;content-type=text%2Fplain), [markup](mld6.c?rev=1.90;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.90) - [select for diffs](mld6.c?r1=1.90#rev1.90)

*Fri Nov 17 07:37:12 2017 UTC* (7 years, 2 months ago) by *ozaki-r*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

CVS tags: [tls-maxphys-base-20171202](./mld6.c?only_with_tag=tls-maxphys-base-20171202)

Diff to: previous 1.89: [preferred](mld6.c.diff?r1=1.89;r2=1.90), [colored](mld6.c.diff?r1=1.89;r2=1.90;f=h)

Changes since revision 1.89: +4 -12
lines
```

Provide macros for softnet_lock and KERNEL_LOCK hiding NET_MPSAFE switch

It reduces C&P codes such as "#ifndef NET_MPSAFE KERNEL_LOCK(1, NULL); ..."
scattered all over the source code and makes it easy to identify remaining
KERNEL_LOCK and/or softnet_lock that are held even if NET_MPSAFE.

No functional change

```

---

Revision **1.61.2.8**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.61.2.8;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.61.2.8;content-type=text%2Fplain), [markup](mld6.c?rev=1.61.2.8;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.61.2.8) - [select for diffs](mld6.c?r1=1.61.2.8#rev1.61.2.8)

*Mon Aug 28 17:53:12 2017 UTC* (7 years, 4 months ago) by *skrll*

Branches: [nick-nhusb](./mld6.c?only_with_tag=nick-nhusb)

Diff to: previous 1.61.2.7: [preferred](mld6.c.diff?r1=1.61.2.7;r2=1.61.2.8), [colored](mld6.c.diff?r1=1.61.2.7;r2=1.61.2.8;f=h); branchpoint 1.61: [preferred](mld6.c.diff?r1=1.61;r2=1.61.2.8), [colored](mld6.c.diff?r1=1.61;r2=1.61.2.8;f=h); next MAIN 1.62: [preferred](mld6.c.diff?r1=1.62;r2=1.61.2.8), [colored](mld6.c.diff?r1=1.62;r2=1.61.2.8;f=h)

Changes since revision 1.61.2.7: +257 -283
lines
```

Sync with HEAD

```

---

Revision **1.88.4.1**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.88.4.1;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.88.4.1;content-type=text%2Fplain), [markup](mld6.c?rev=1.88.4.1;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.88.4.1) - [select for diffs](mld6.c?r1=1.88.4.1#rev1.88.4.1)

*Fri May 19 00:22:58 2017 UTC* (7 years, 8 months ago) by *pgoyette*

Branches: [prg-localcount2](./mld6.c?only_with_tag=prg-localcount2)

Diff to: previous 1.88: [preferred](mld6.c.diff?r1=1.88;r2=1.88.4.1), [colored](mld6.c.diff?r1=1.88;r2=1.88.4.1;f=h); next MAIN 1.89: [preferred](mld6.c.diff?r1=1.89;r2=1.88.4.1), [colored](mld6.c.diff?r1=1.89;r2=1.88.4.1;f=h)

Changes since revision 1.88: +2 -3
lines
```

Resolve conflicts from previous merge (all resulting from $NetBSD
keywork expansion)

```

---

Revision **1.89**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.89;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.89;content-type=text%2Fplain), [markup](mld6.c?rev=1.89;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.89) - [select for diffs](mld6.c?r1=1.89#rev1.89)

*Sat May 13 20:13:26 2017 UTC* (7 years, 8 months ago) by *kardel*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

CVS tags: [prg-localcount2-base3](./mld6.c?only_with_tag=prg-localcount2-base3),
[perseant-stdc-iso10646-base](./mld6.c?only_with_tag=perseant-stdc-iso10646-base),
[perseant-stdc-iso10646](./mld6.c?only_with_tag=perseant-stdc-iso10646),
[nick-nhusb-base-20170825](./mld6.c?only_with_tag=nick-nhusb-base-20170825),
[netbsd-8-base](./mld6.c?only_with_tag=netbsd-8-base),
[matt-nb8-mediatek-base](./mld6.c?only_with_tag=matt-nb8-mediatek-base),
[matt-nb8-mediatek](./mld6.c?only_with_tag=matt-nb8-mediatek)

Branch point for: [netbsd-8](./mld6.c?only_with_tag=netbsd-8)

Diff to: previous 1.88: [preferred](mld6.c.diff?r1=1.88;r2=1.89), [colored](mld6.c.diff?r1=1.88;r2=1.89;f=h)

Changes since revision 1.88: +2 -3
lines
```

avoid a double ifa_release() and thus a panic when e. g. running ifmcstat

```

---

Revision **1.77.2.1**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.77.2.1;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.77.2.1;content-type=text%2Fplain), [markup](mld6.c?rev=1.77.2.1;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.77.2.1) - [select for diffs](mld6.c?r1=1.77.2.1#rev1.77.2.1)

*Fri Apr 21 16:54:06 2017 UTC* (7 years, 9 months ago) by *bouyer*

Branches: [bouyer-socketcan](./mld6.c?only_with_tag=bouyer-socketcan)

Diff to: previous 1.77: [preferred](mld6.c.diff?r1=1.77;r2=1.77.2.1), [colored](mld6.c.diff?r1=1.77;r2=1.77.2.1;f=h); next MAIN 1.78: [preferred](mld6.c.diff?r1=1.78;r2=1.77.2.1), [colored](mld6.c.diff?r1=1.78;r2=1.77.2.1;f=h)

Changes since revision 1.77: +261 -283
lines
```

Sync with HEAD

```

---

Revision **1.72.2.4**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.72.2.4;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.72.2.4;content-type=text%2Fplain), [markup](mld6.c?rev=1.72.2.4;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.72.2.4) - [select for diffs](mld6.c?r1=1.72.2.4#rev1.72.2.4)

*Mon Mar 20 06:57:51 2017 UTC* (7 years, 10 months ago) by *pgoyette*

Branches: [pgoyette-localcount](./mld6.c?only_with_tag=pgoyette-localcount)

Diff to: previous 1.72.2.3: [preferred](mld6.c.diff?r1=1.72.2.3;r2=1.72.2.4), [colored](mld6.c.diff?r1=1.72.2.3;r2=1.72.2.4;f=h); branchpoint 1.72: [preferred](mld6.c.diff?r1=1.72;r2=1.72.2.4), [colored](mld6.c.diff?r1=1.72;r2=1.72.2.4;f=h); next MAIN 1.73: [preferred](mld6.c.diff?r1=1.73;r2=1.72.2.4), [colored](mld6.c.diff?r1=1.73;r2=1.72.2.4;f=h)

Changes since revision 1.72.2.3: +263 -285
lines
```

Sync with HEAD

```

---

Revision **1.88**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.88;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.88;content-type=text%2Fplain), [markup](mld6.c?rev=1.88;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.88) - [select for diffs](mld6.c?r1=1.88#rev1.88)

*Thu Mar 2 09:48:20 2017 UTC* (7 years, 10 months ago) by *ozaki-r*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

CVS tags: [prg-localcount2-base2](./mld6.c?only_with_tag=prg-localcount2-base2),
[prg-localcount2-base1](./mld6.c?only_with_tag=prg-localcount2-base1),
[prg-localcount2-base](./mld6.c?only_with_tag=prg-localcount2-base),
[pgoyette-localcount-20170426](./mld6.c?only_with_tag=pgoyette-localcount-20170426),
[pgoyette-localcount-20170320](./mld6.c?only_with_tag=pgoyette-localcount-20170320),
[jdolecek-ncq-base](./mld6.c?only_with_tag=jdolecek-ncq-base),
[jdolecek-ncq](./mld6.c?only_with_tag=jdolecek-ncq),
[bouyer-socketcan-base1](./mld6.c?only_with_tag=bouyer-socketcan-base1)

Branch point for: [prg-localcount2](./mld6.c?only_with_tag=prg-localcount2)

Diff to: previous 1.87: [preferred](mld6.c.diff?r1=1.87;r2=1.88), [colored](mld6.c.diff?r1=1.87;r2=1.88;f=h)

Changes since revision 1.87: +22 -4
lines
```

Plug a race condition on accessing i6mm_maddr

```

---

Revision **1.87**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.87;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.87;content-type=text%2Fplain), [markup](mld6.c?rev=1.87;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.87) - [select for diffs](mld6.c?r1=1.87#rev1.87)

*Thu Mar 2 09:16:46 2017 UTC* (7 years, 10 months ago) by *ozaki-r*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

Diff to: previous 1.86: [preferred](mld6.c.diff?r1=1.86;r2=1.87), [colored](mld6.c.diff?r1=1.86;r2=1.87;f=h)

Changes since revision 1.86: +16 -2
lines
```

Fix racy in6m_sol

Relook up the entry instead of reusing it, which makes locking simple.

```

---

Revision **1.86**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.86;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.86;content-type=text%2Fplain), [markup](mld6.c?rev=1.86;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.86) - [select for diffs](mld6.c?r1=1.86#rev1.86)

*Thu Mar 2 05:27:39 2017 UTC* (7 years, 10 months ago) by *ozaki-r*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

Diff to: previous 1.85: [preferred](mld6.c.diff?r1=1.85;r2=1.86), [colored](mld6.c.diff?r1=1.85;r2=1.86;f=h)

Changes since revision 1.85: +3 -13
lines
```

Protect ia6_memberships by in6_ifaddr_lock

```

---

Revision **1.85**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.85;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.85;content-type=text%2Fplain), [markup](mld6.c?rev=1.85;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.85) - [select for diffs](mld6.c?r1=1.85#rev1.85)

*Wed Mar 1 09:09:37 2017 UTC* (7 years, 10 months ago) by *ozaki-r*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

Diff to: previous 1.84: [preferred](mld6.c.diff?r1=1.84;r2=1.85), [colored](mld6.c.diff?r1=1.84;r2=1.85;f=h)

Changes since revision 1.84: +181 -69
lines
```

Make IPv6 multicast MP-safe partially

To complete the task, we need to make users of IPv6 multicast MP-safe, for
example socket/PCB and CARP.

```

---

Revision **1.84**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.84;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.84;content-type=text%2Fplain), [markup](mld6.c?rev=1.84;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.84) - [select for diffs](mld6.c?r1=1.84#rev1.84)

*Wed Mar 1 08:54:12 2017 UTC* (7 years, 10 months ago) by *ozaki-r*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

Diff to: previous 1.83: [preferred](mld6.c.diff?r1=1.83;r2=1.84), [colored](mld6.c.diff?r1=1.83;r2=1.84;f=h)

Changes since revision 1.83: +12 -2
lines
```

Provide in6_multi_group

Use it when checking if we belong to the group, instead of in6_lookup_multi.

No functional change.

```

---

Revision **1.83**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.83;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.83;content-type=text%2Fplain), [markup](mld6.c?rev=1.83;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.83) - [select for diffs](mld6.c?r1=1.83#rev1.83)

*Thu Feb 23 07:57:10 2017 UTC* (7 years, 11 months ago) by *ozaki-r*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

Diff to: previous 1.82: [preferred](mld6.c.diff?r1=1.82;r2=1.83), [colored](mld6.c.diff?r1=1.82;r2=1.83;f=h)

Changes since revision 1.82: +55 -226
lines
```

Remove mkludge stuffs

For unknown reasons, IPv6 multicast addresses are linked to a first
IPv6 address assigned to an interface. Due to the design, when removing
a first address having multicast addresses, we need to save them to
somewhere and later restore them once a new IPv6 address is activated.
mkludge stuffs support the operations.

This change links multicast addresses to an interface directly and
throws the kludge away.

Note that as usual some obsolete member variables remain for [kvm(3)](http://man.NetBSD.org/kvm.3)
users. And also sysctl net.inet6.multicast_kludge remains to avoid
breaking old ifmcstat.

TODO: currently ifnet has a list of in6_multi but obviously the list
should be protocol independent. Provide a common structure (if_multi
or something) to handle in6_multi and in_multi together as well as
ifaddr does for in_ifaddr and in6_ifaddr.

```

---

Revision **1.82**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.82;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.82;content-type=text%2Fplain), [markup](mld6.c?rev=1.82;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.82) - [select for diffs](mld6.c?r1=1.82#rev1.82)

*Wed Feb 22 07:46:00 2017 UTC* (7 years, 11 months ago) by *ozaki-r*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

Diff to: previous 1.81: [preferred](mld6.c.diff?r1=1.81;r2=1.82), [colored](mld6.c.diff?r1=1.81;r2=1.82;f=h)

Changes since revision 1.81: +4 -4
lines
```

Stop using useless IN6_*_MULTI macros

```

---

Revision **1.81**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.81;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.81;content-type=text%2Fplain), [markup](mld6.c?rev=1.81;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.81) - [select for diffs](mld6.c?r1=1.81#rev1.81)

*Tue Feb 7 02:38:08 2017 UTC* (7 years, 11 months ago) by *ozaki-r*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

Diff to: previous 1.80: [preferred](mld6.c.diff?r1=1.80;r2=1.81), [colored](mld6.c.diff?r1=1.80;r2=1.81;f=h)

Changes since revision 1.80: +4 -2
lines
```

Add missing NULL checks for m_get_rcvif

```

---

Revision **1.61.2.7**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.61.2.7;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.61.2.7;content-type=text%2Fplain), [markup](mld6.c?rev=1.61.2.7;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.61.2.7) - [select for diffs](mld6.c?r1=1.61.2.7#rev1.61.2.7)

*Sun Feb 5 13:40:59 2017 UTC* (7 years, 11 months ago) by *skrll*

Branches: [nick-nhusb](./mld6.c?only_with_tag=nick-nhusb)

Diff to: previous 1.61.2.6: [preferred](mld6.c.diff?r1=1.61.2.6;r2=1.61.2.7), [colored](mld6.c.diff?r1=1.61.2.6;r2=1.61.2.7;f=h); branchpoint 1.61: [preferred](mld6.c.diff?r1=1.61;r2=1.61.2.7), [colored](mld6.c.diff?r1=1.61;r2=1.61.2.7;f=h)

Changes since revision 1.61.2.6: +13 -10
lines
```

Sync with HEAD

```

---

Revision **1.80**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.80;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.80;content-type=text%2Fplain), [markup](mld6.c?rev=1.80;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.80) - [select for diffs](mld6.c?r1=1.80#rev1.80)

*Tue Jan 24 07:09:25 2017 UTC* (8 years ago) by *ozaki-r*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

CVS tags: [nick-nhusb-base-20170204](./mld6.c?only_with_tag=nick-nhusb-base-20170204)

Diff to: previous 1.79: [preferred](mld6.c.diff?r1=1.79;r2=1.80), [colored](mld6.c.diff?r1=1.79;r2=1.80;f=h)

Changes since revision 1.79: +7 -7
lines
```

Tweak softnet_lock and NET_MPSAFE

- Don't hold softnet_lock in some functions if NET_MPSAFE
- Add softnet_lock to sysctl_net_inet_icmp_redirtimeout
- Add softnet_lock to expire_upcalls of ip_mroute.c
- Restore softnet_lock for in{,6}_pcbpurgeif{,0} if NET_MPSAFE
- Mark some softnet_lock for future work

```

---

Revision **1.79**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.79;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.79;content-type=text%2Fplain), [markup](mld6.c?rev=1.79;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.79) - [select for diffs](mld6.c?r1=1.79#rev1.79)

*Mon Jan 16 15:44:47 2017 UTC* (8 years ago) by *christos*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

Diff to: previous 1.78: [preferred](mld6.c.diff?r1=1.78;r2=1.79), [colored](mld6.c.diff?r1=1.78;r2=1.79;f=h)

Changes since revision 1.78: +4 -4
lines
```

ip6_sprintf -> IN6_PRINT so that we pass the size.

```

---

Revision **1.78**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.78;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.78;content-type=text%2Fplain), [markup](mld6.c?rev=1.78;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.78) - [select for diffs](mld6.c?r1=1.78#rev1.78)

*Mon Jan 16 07:33:36 2017 UTC* (8 years ago) by *ryo*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

Diff to: previous 1.77: [preferred](mld6.c.diff?r1=1.77;r2=1.78), [colored](mld6.c.diff?r1=1.77;r2=1.78;f=h)

Changes since revision 1.77: +6 -3
lines
```

Make ip6_sprintf(), in_fmtaddr(), lla_snprintf() and icmp6_redirect_diag() mpsafe.

Reviewed by ozaki-r@

```

---

Revision **1.77**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.77;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.77;content-type=text%2Fplain), [markup](mld6.c?rev=1.77;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.77) - [select for diffs](mld6.c?r1=1.77#rev1.77)

*Wed Jan 11 13:08:29 2017 UTC* (8 years ago) by *ozaki-r*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

CVS tags: [bouyer-socketcan-base](./mld6.c?only_with_tag=bouyer-socketcan-base)

Branch point for: [bouyer-socketcan](./mld6.c?only_with_tag=bouyer-socketcan)

Diff to: previous 1.76: [preferred](mld6.c.diff?r1=1.76;r2=1.77), [colored](mld6.c.diff?r1=1.76;r2=1.77;f=h)

Changes since revision 1.76: +2 -3
lines
```

Get rid of unnecessary header inclusions

```

---

Revision **1.76**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.76;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.76;content-type=text%2Fplain), [markup](mld6.c?rev=1.76;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.76) - [select for diffs](mld6.c?r1=1.76#rev1.76)

*Tue Jan 10 05:42:34 2017 UTC* (8 years ago) by *ozaki-r*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

Diff to: previous 1.75: [preferred](mld6.c.diff?r1=1.75;r2=1.76), [colored](mld6.c.diff?r1=1.75;r2=1.76;f=h)

Changes since revision 1.75: +4 -3
lines
```

Enable some sysctl knobs on rump kernels for ifmcstat

```

---

Revision **1.72.2.3**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.72.2.3;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.72.2.3;content-type=text%2Fplain), [markup](mld6.c?rev=1.72.2.3;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.72.2.3) - [select for diffs](mld6.c?r1=1.72.2.3#rev1.72.2.3)

*Sat Jan 7 08:56:51 2017 UTC* (8 years ago) by *pgoyette*

Branches: [pgoyette-localcount](./mld6.c?only_with_tag=pgoyette-localcount)

Diff to: previous 1.72.2.2: [preferred](mld6.c.diff?r1=1.72.2.2;r2=1.72.2.3), [colored](mld6.c.diff?r1=1.72.2.2;r2=1.72.2.3;f=h); branchpoint 1.72: [preferred](mld6.c.diff?r1=1.72;r2=1.72.2.3), [colored](mld6.c.diff?r1=1.72;r2=1.72.2.3;f=h)

Changes since revision 1.72.2.2: +7 -2
lines
```

Sync with HEAD.  (Note that most of these changes are simply $NetBSD$
tag issues.)

```

---

Revision **1.61.2.6**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.61.2.6;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.61.2.6;content-type=text%2Fplain), [markup](mld6.c?rev=1.61.2.6;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.61.2.6) - [select for diffs](mld6.c?r1=1.61.2.6#rev1.61.2.6)

*Mon Dec 5 10:55:28 2016 UTC* (8 years, 1 month ago) by *skrll*

Branches: [nick-nhusb](./mld6.c?only_with_tag=nick-nhusb)

Diff to: previous 1.61.2.5: [preferred](mld6.c.diff?r1=1.61.2.5;r2=1.61.2.6), [colored](mld6.c.diff?r1=1.61.2.5;r2=1.61.2.6;f=h); branchpoint 1.61: [preferred](mld6.c.diff?r1=1.61;r2=1.61.2.6), [colored](mld6.c.diff?r1=1.61;r2=1.61.2.6;f=h)

Changes since revision 1.61.2.5: +7 -2
lines
```

Sync with HEAD

```

---

Revision **1.75**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.75;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.75;content-type=text%2Fplain), [markup](mld6.c?rev=1.75;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.75) - [select for diffs](mld6.c?r1=1.75#rev1.75)

*Fri Nov 18 06:50:04 2016 UTC* (8 years, 2 months ago) by *knakahara*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

CVS tags: [pgoyette-localcount-20170107](./mld6.c?only_with_tag=pgoyette-localcount-20170107),
[nick-nhusb-base-20161204](./mld6.c?only_with_tag=nick-nhusb-base-20161204)

Diff to: previous 1.74: [preferred](mld6.c.diff?r1=1.74;r2=1.75), [colored](mld6.c.diff?r1=1.74;r2=1.75;f=h)

Changes since revision 1.74: +7 -2
lines
```

fix: "ifconfig destory" can stalls when "ifconfig" is done parallel.
This problem occurs only if NET_MPSAFE on.

ifconfig destroy side:
    kernel entry point is ifioctl => if_clone_destroy.
    pr_purgeif() acquires softnet_lock, and then ifa_remove() calls
    pserialize_perform() holding softnet_lock.
ifconfig side:
    kernel entry point is socreate.
    pr_attach()(udp_attach_wrapper()) calls sosetlock(). In this call path,
    sosetlock() try to acquire softnet_lock.
These can cause dead lock.

```

---

Revision **1.61.2.5**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.61.2.5;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.61.2.5;content-type=text%2Fplain), [markup](mld6.c?rev=1.61.2.5;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.61.2.5) - [select for diffs](mld6.c?r1=1.61.2.5#rev1.61.2.5)

*Wed Oct 5 20:56:09 2016 UTC* (8 years, 3 months ago) by *skrll*

Branches: [nick-nhusb](./mld6.c?only_with_tag=nick-nhusb)

Diff to: previous 1.61.2.4: [preferred](mld6.c.diff?r1=1.61.2.4;r2=1.61.2.5), [colored](mld6.c.diff?r1=1.61.2.4;r2=1.61.2.5;f=h); branchpoint 1.61: [preferred](mld6.c.diff?r1=1.61;r2=1.61.2.5), [colored](mld6.c.diff?r1=1.61;r2=1.61.2.5;f=h)

Changes since revision 1.61.2.4: +55 -9
lines
```

Sync with HEAD

```

---

Revision **1.72.2.2**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.72.2.2;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.72.2.2;content-type=text%2Fplain), [markup](mld6.c?rev=1.72.2.2;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.72.2.2) - [select for diffs](mld6.c?r1=1.72.2.2#rev1.72.2.2)

*Sat Aug 6 00:19:10 2016 UTC* (8 years, 5 months ago) by *pgoyette*

Branches: [pgoyette-localcount](./mld6.c?only_with_tag=pgoyette-localcount)

Diff to: previous 1.72.2.1: [preferred](mld6.c.diff?r1=1.72.2.1;r2=1.72.2.2), [colored](mld6.c.diff?r1=1.72.2.1;r2=1.72.2.2;f=h); branchpoint 1.72: [preferred](mld6.c.diff?r1=1.72;r2=1.72.2.2), [colored](mld6.c.diff?r1=1.72;r2=1.72.2.2;f=h)

Changes since revision 1.72.2.1: +51 -9
lines
```

Sync with HEAD

```

---

Revision **1.74**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.74;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.74;content-type=text%2Fplain), [markup](mld6.c?rev=1.74;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.74) - [select for diffs](mld6.c?r1=1.74#rev1.74)

*Mon Aug 1 03:15:31 2016 UTC* (8 years, 5 months ago) by *ozaki-r*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

CVS tags: [pgoyette-localcount-20161104](./mld6.c?only_with_tag=pgoyette-localcount-20161104),
[pgoyette-localcount-20160806](./mld6.c?only_with_tag=pgoyette-localcount-20160806),
[nick-nhusb-base-20161004](./mld6.c?only_with_tag=nick-nhusb-base-20161004),
[localcount-20160914](./mld6.c?only_with_tag=localcount-20160914)

Diff to: previous 1.73: [preferred](mld6.c.diff?r1=1.73;r2=1.74), [colored](mld6.c.diff?r1=1.73;r2=1.74;f=h)

Changes since revision 1.73: +51 -9
lines
```

Apply pserialize and psref to struct ifaddr and its variants

This change makes struct ifaddr and its variants (in_ifaddr and in6_ifaddr)
MP-safe by using pserialize and psref. At this moment, pserialize_perform
and psref_target_destroy are disabled because (1) we don't need them
because of softnet_lock (2) they cause a deadlock because of softnet_lock.
So we'll enable them when we remove softnet_lock in the future.

```

---

Revision **1.72.2.1**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.72.2.1;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.72.2.1;content-type=text%2Fplain), [markup](mld6.c?rev=1.72.2.1;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.72.2.1) - [select for diffs](mld6.c?r1=1.72.2.1#rev1.72.2.1)

*Tue Jul 26 03:24:23 2016 UTC* (8 years, 6 months ago) by *pgoyette*

Branches: [pgoyette-localcount](./mld6.c?only_with_tag=pgoyette-localcount)

Diff to: previous 1.72: [preferred](mld6.c.diff?r1=1.72;r2=1.72.2.1), [colored](mld6.c.diff?r1=1.72;r2=1.72.2.1;f=h)

Changes since revision 1.72: +6 -2
lines
```

Sync with HEAD

```

---

Revision **1.73**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.73;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.73;content-type=text%2Fplain), [markup](mld6.c?rev=1.73;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.73) - [select for diffs](mld6.c?r1=1.73#rev1.73)

*Wed Jul 20 07:37:51 2016 UTC* (8 years, 6 months ago) by *ozaki-r*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

CVS tags: [pgoyette-localcount-20160726](./mld6.c?only_with_tag=pgoyette-localcount-20160726)

Diff to: previous 1.72: [preferred](mld6.c.diff?r1=1.72;r2=1.73), [colored](mld6.c.diff?r1=1.72;r2=1.73;f=h)

Changes since revision 1.72: +6 -2
lines
```

Apply pserialize to some iterations of IP address lists

```

---

Revision **1.61.2.4**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.61.2.4;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.61.2.4;content-type=text%2Fplain), [markup](mld6.c?rev=1.61.2.4;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.61.2.4) - [select for diffs](mld6.c?r1=1.61.2.4#rev1.61.2.4)

*Sat Jul 9 20:25:22 2016 UTC* (8 years, 6 months ago) by *skrll*

Branches: [nick-nhusb](./mld6.c?only_with_tag=nick-nhusb)

Diff to: previous 1.61.2.3: [preferred](mld6.c.diff?r1=1.61.2.3;r2=1.61.2.4), [colored](mld6.c.diff?r1=1.61.2.3;r2=1.61.2.4;f=h); branchpoint 1.61: [preferred](mld6.c.diff?r1=1.61;r2=1.61.2.4), [colored](mld6.c.diff?r1=1.61;r2=1.61.2.4;f=h)

Changes since revision 1.61.2.3: +30 -22
lines
```

Sync with HEAD

```

---

Revision **1.72**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.72;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.72;content-type=text%2Fplain), [markup](mld6.c?rev=1.72;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.72) - [select for diffs](mld6.c?r1=1.72#rev1.72)

*Fri Jul 8 04:33:30 2016 UTC* (8 years, 6 months ago) by *ozaki-r*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

CVS tags: [pgoyette-localcount-base](./mld6.c?only_with_tag=pgoyette-localcount-base),
[nick-nhusb-base-20160907](./mld6.c?only_with_tag=nick-nhusb-base-20160907)

Branch point for: [pgoyette-localcount](./mld6.c?only_with_tag=pgoyette-localcount)

Diff to: previous 1.71: [preferred](mld6.c.diff?r1=1.71;r2=1.72), [colored](mld6.c.diff?r1=1.71;r2=1.72;f=h)

Changes since revision 1.71: +5 -5
lines
```

Replace macros to get an IP address with proper inline functions

The inline functions are more friendly for applying psz/psref;
they consist of only simple interations.

```

---

Revision **1.71**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.71;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.71;content-type=text%2Fplain), [markup](mld6.c?rev=1.71;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.71) - [select for diffs](mld6.c?r1=1.71#rev1.71)

*Thu Jul 7 09:32:03 2016 UTC* (8 years, 6 months ago) by *ozaki-r*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

Diff to: previous 1.70: [preferred](mld6.c.diff?r1=1.70;r2=1.71), [colored](mld6.c.diff?r1=1.70;r2=1.71;f=h)

Changes since revision 1.70: +4 -4
lines
```

Switch the address list of intefaces to [pslist(9)](http://man.NetBSD.org/pslist.9)

As usual, we leave the old list to avoid breaking [kvm(3)](http://man.NetBSD.org/kvm.3) users.

```

---

Revision **1.70**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.70;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.70;content-type=text%2Fplain), [markup](mld6.c?rev=1.70;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.70) - [select for diffs](mld6.c?r1=1.70#rev1.70)

*Mon Jul 4 06:48:14 2016 UTC* (8 years, 6 months ago) by *ozaki-r*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

Diff to: previous 1.69: [preferred](mld6.c.diff?r1=1.69;r2=1.70), [colored](mld6.c.diff?r1=1.69;r2=1.70;f=h)

Changes since revision 1.69: +3 -3
lines
```

Use [pslist(9)](http://man.NetBSD.org/pslist.9) for the global in6_ifaddr list

psz and psref will be applied in another commit.

No functional change intended.

```

---

Revision **1.69**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.69;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.69;content-type=text%2Fplain), [markup](mld6.c?rev=1.69;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.69) - [select for diffs](mld6.c?r1=1.69#rev1.69)

*Wed Jun 22 07:48:17 2016 UTC* (8 years, 7 months ago) by *ozaki-r*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

Diff to: previous 1.68: [preferred](mld6.c.diff?r1=1.68;r2=1.69), [colored](mld6.c.diff?r1=1.68;r2=1.69;f=h)

Changes since revision 1.68: +2 -6
lines
```

Remove unnecessary NULL checks of ifa->ifa_addr

If it's NULL, it should be a bug. There many IFADDR_FOREACH that don't do
NULL check. If it can be NULL, they should fire already.

```

---

Revision **1.68**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.68;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.68;content-type=text%2Fplain), [markup](mld6.c?rev=1.68;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.68) - [select for diffs](mld6.c?r1=1.68#rev1.68)

*Tue Jun 21 03:28:27 2016 UTC* (8 years, 7 months ago) by *ozaki-r*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

Diff to: previous 1.67: [preferred](mld6.c.diff?r1=1.67;r2=1.68), [colored](mld6.c.diff?r1=1.67;r2=1.68;f=h)

Changes since revision 1.67: +3 -3
lines
```

Replace ifp of ip_moptions and ip6_moptions with if_index

The motivation is the same as the mbuf's rcvif case; avoid having a pointer
of an ifnet object in ip_moptions and ip6_moptions, which is not MP-safe.

ip_moptions and ip6_moptions can be stored in a PCB for inet or inet6
that's life time is different from ifnet one and so an ifnet object can be
disappeared anytime we get it via them. Thus we need to look up an ifnet
object by if_index every time for safe.

```

---

Revision **1.67**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.67;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.67;content-type=text%2Fplain), [markup](mld6.c?rev=1.67;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.67) - [select for diffs](mld6.c?r1=1.67#rev1.67)

*Thu Jun 16 03:03:33 2016 UTC* (8 years, 7 months ago) by *ozaki-r*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

Diff to: previous 1.66: [preferred](mld6.c.diff?r1=1.66;r2=1.67), [colored](mld6.c.diff?r1=1.66;r2=1.67;f=h)

Changes since revision 1.66: +13 -4
lines
```

Use if_get_byindex instead of if_byindex for MP-safe

```

---

Revision **1.66**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.66;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.66;content-type=text%2Fplain), [markup](mld6.c?rev=1.66;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.66) - [select for diffs](mld6.c?r1=1.66#rev1.66)

*Fri Jun 10 13:31:44 2016 UTC* (8 years, 7 months ago) by *ozaki-r*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

Diff to: previous 1.65: [preferred](mld6.c.diff?r1=1.65;r2=1.66), [colored](mld6.c.diff?r1=1.65;r2=1.66;f=h)

Changes since revision 1.65: +11 -8
lines
```

Avoid storing a pointer of an interface in a mbuf

Having a pointer of an interface in a mbuf isn't safe if we remove big
kernel locks; an interface object (ifnet) can be destroyed anytime in any
packet processing and accessing such object via a pointer is racy. Instead
we have to get an object from the interface collection (ifindex2ifnet) via
an interface index (if_index) that is stored to a mbuf instead of an
pointer.

The change provides two APIs: m_{get,put}_rcvif_psref that use [psref(9)](http://man.NetBSD.org/psref.9)
for sleep-able critical sections and m_{get,put}_rcvif that use
[pserialize(9)](http://man.NetBSD.org/pserialize.9) for other critical sections. The change also adds another
API called m_get_rcvif_NOMPSAFE, that is NOT MP-safe and for transition
moratorium, i.e., it is intended to be used for places where are not
planned to be MP-ified soon.

The change adds some overhead due to psref to performance sensitive paths,
however the overhead is not serious, 2% down at worst.

Proposed on tech-kern and tech-net.

```

---

Revision **1.65**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.65;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.65;content-type=text%2Fplain), [markup](mld6.c?rev=1.65;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.65) - [select for diffs](mld6.c?r1=1.65#rev1.65)

*Fri Jun 10 13:27:16 2016 UTC* (8 years, 7 months ago) by *ozaki-r*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

Diff to: previous 1.64: [preferred](mld6.c.diff?r1=1.64;r2=1.65), [colored](mld6.c.diff?r1=1.64;r2=1.65;f=h)

Changes since revision 1.64: +3 -3
lines
```

Introduce m_set_rcvif and m_reset_rcvif

The API is used to set (or reset) a received interface of a mbuf.
They are counterpart of m_get_rcvif, which will come in another
commit, hide internal of rcvif operation, and reduce the diff of
the upcoming change.

No functional change.

```

---

Revision **1.61.2.3**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.61.2.3;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.61.2.3;content-type=text%2Fplain), [markup](mld6.c?rev=1.61.2.3;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.61.2.3) - [select for diffs](mld6.c?r1=1.61.2.3#rev1.61.2.3)

*Sun Dec 27 12:10:07 2015 UTC* (9 years, 1 month ago) by *skrll*

Branches: [nick-nhusb](./mld6.c?only_with_tag=nick-nhusb)

Diff to: previous 1.61.2.2: [preferred](mld6.c.diff?r1=1.61.2.2;r2=1.61.2.3), [colored](mld6.c.diff?r1=1.61.2.2;r2=1.61.2.3;f=h); branchpoint 1.61: [preferred](mld6.c.diff?r1=1.61;r2=1.61.2.3), [colored](mld6.c.diff?r1=1.61;r2=1.61.2.3;f=h)

Changes since revision 1.61.2.2: +7 -4
lines
```

Sync with HEAD (as of 26th Dec)

```

---

Revision **1.59.2.2.2.1**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.59.2.2.2.1;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.59.2.2.2.1;content-type=text%2Fplain), [markup](mld6.c?rev=1.59.2.2.2.1;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.59.2.2.2.1) - [select for diffs](mld6.c?r1=1.59.2.2.2.1#rev1.59.2.2.2.1)

*Wed Nov 18 08:34:49 2015 UTC* (9 years, 2 months ago) by *msaitoh*

Branches: [netbsd-7-0](./mld6.c?only_with_tag=netbsd-7-0)

CVS tags: [netbsd-7-0-2-RELEASE](./mld6.c?only_with_tag=netbsd-7-0-2-RELEASE),
[netbsd-7-0-1-RELEASE](./mld6.c?only_with_tag=netbsd-7-0-1-RELEASE)

Diff to: previous 1.59.2.2: [preferred](mld6.c.diff?r1=1.59.2.2;r2=1.59.2.2.2.1), [colored](mld6.c.diff?r1=1.59.2.2;r2=1.59.2.2.2.1;f=h); next MAIN 1.59.2.3: [preferred](mld6.c.diff?r1=1.59.2.3;r2=1.59.2.2.2.1), [colored](mld6.c.diff?r1=1.59.2.3;r2=1.59.2.2.2.1;f=h)

Changes since revision 1.59.2.2: +7 -4
lines
```

Pull up following revision(s) (requested by joerg in ticket #1035):
	sys/netinet6/mld6.c: revision 1.64
Ensure that the callout of the multicast address is valid before
hooking it up.

```

---

Revision **1.59.2.3**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.59.2.3;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.59.2.3;content-type=text%2Fplain), [markup](mld6.c?rev=1.59.2.3;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.59.2.3) - [select for diffs](mld6.c?r1=1.59.2.3#rev1.59.2.3)

*Wed Nov 18 08:33:08 2015 UTC* (9 years, 2 months ago) by *msaitoh*

Branches: [netbsd-7](./mld6.c?only_with_tag=netbsd-7)

CVS tags: [netbsd-7-nhusb-base-20170116](./mld6.c?only_with_tag=netbsd-7-nhusb-base-20170116),
[netbsd-7-nhusb-base](./mld6.c?only_with_tag=netbsd-7-nhusb-base),
[netbsd-7-nhusb](./mld6.c?only_with_tag=netbsd-7-nhusb),
[netbsd-7-2-RELEASE](./mld6.c?only_with_tag=netbsd-7-2-RELEASE),
[netbsd-7-1-RELEASE](./mld6.c?only_with_tag=netbsd-7-1-RELEASE),
[netbsd-7-1-RC2](./mld6.c?only_with_tag=netbsd-7-1-RC2),
[netbsd-7-1-RC1](./mld6.c?only_with_tag=netbsd-7-1-RC1),
[netbsd-7-1-2-RELEASE](./mld6.c?only_with_tag=netbsd-7-1-2-RELEASE),
[netbsd-7-1-1-RELEASE](./mld6.c?only_with_tag=netbsd-7-1-1-RELEASE),
[netbsd-7-1](./mld6.c?only_with_tag=netbsd-7-1)

Diff to: previous 1.59.2.2: [preferred](mld6.c.diff?r1=1.59.2.2;r2=1.59.2.3), [colored](mld6.c.diff?r1=1.59.2.2;r2=1.59.2.3;f=h); branchpoint 1.59: [preferred](mld6.c.diff?r1=1.59;r2=1.59.2.3), [colored](mld6.c.diff?r1=1.59;r2=1.59.2.3;f=h); next MAIN 1.60: [preferred](mld6.c.diff?r1=1.60;r2=1.59.2.3), [colored](mld6.c.diff?r1=1.60;r2=1.59.2.3;f=h)

Changes since revision 1.59.2.2: +7 -4
lines
```

Pull up following revision(s) (requested by joerg in ticket #1035):
	sys/netinet6/mld6.c: revision 1.64
Ensure that the callout of the multicast address is valid before
hooking it up.

```

---

Revision **1.64**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.64;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.64;content-type=text%2Fplain), [markup](mld6.c?rev=1.64;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.64) - [select for diffs](mld6.c?r1=1.64#rev1.64)

*Thu Nov 12 15:01:06 2015 UTC* (9 years, 2 months ago) by *joerg*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

CVS tags: [nick-nhusb-base-20160529](./mld6.c?only_with_tag=nick-nhusb-base-20160529),
[nick-nhusb-base-20160422](./mld6.c?only_with_tag=nick-nhusb-base-20160422),
[nick-nhusb-base-20160319](./mld6.c?only_with_tag=nick-nhusb-base-20160319),
[nick-nhusb-base-20151226](./mld6.c?only_with_tag=nick-nhusb-base-20151226)

Diff to: previous 1.63: [preferred](mld6.c.diff?r1=1.63;r2=1.64), [colored](mld6.c.diff?r1=1.63;r2=1.64;f=h)

Changes since revision 1.63: +7 -4
lines
```

Ensure that the callout of the multicast address is valid before
hooking it up.

```

---

Revision **1.61.2.2**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.61.2.2;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.61.2.2;content-type=text%2Fplain), [markup](mld6.c?rev=1.61.2.2;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.61.2.2) - [select for diffs](mld6.c?r1=1.61.2.2#rev1.61.2.2)

*Tue Sep 22 12:06:11 2015 UTC* (9 years, 4 months ago) by *skrll*

Branches: [nick-nhusb](./mld6.c?only_with_tag=nick-nhusb)

Diff to: previous 1.61.2.1: [preferred](mld6.c.diff?r1=1.61.2.1;r2=1.61.2.2), [colored](mld6.c.diff?r1=1.61.2.1;r2=1.61.2.2;f=h); branchpoint 1.61: [preferred](mld6.c.diff?r1=1.61;r2=1.61.2.2), [colored](mld6.c.diff?r1=1.61;r2=1.61.2.2;f=h)

Changes since revision 1.61.2.1: +8 -6
lines
```

Sync with HEAD

```

---

Revision **1.63**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.63;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.63;content-type=text%2Fplain), [markup](mld6.c?rev=1.63;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.63) - [select for diffs](mld6.c?r1=1.63#rev1.63)

*Mon Aug 24 22:21:27 2015 UTC* (9 years, 5 months ago) by *pooka*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

CVS tags: [nick-nhusb-base-20150921](./mld6.c?only_with_tag=nick-nhusb-base-20150921)

Diff to: previous 1.62: [preferred](mld6.c.diff?r1=1.62;r2=1.63), [colored](mld6.c.diff?r1=1.62;r2=1.63;f=h)

Changes since revision 1.62: +4 -2
lines
```

sprinkle _KERNEL_OPT

```

---

Revision **1.61.2.1**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.61.2.1;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.61.2.1;content-type=text%2Fplain), [markup](mld6.c?rev=1.61.2.1;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.61.2.1) - [select for diffs](mld6.c?r1=1.61.2.1#rev1.61.2.1)

*Mon Apr 6 15:18:23 2015 UTC* (9 years, 9 months ago) by *skrll*

Branches: [nick-nhusb](./mld6.c?only_with_tag=nick-nhusb)

Diff to: previous 1.61: [preferred](mld6.c.diff?r1=1.61;r2=1.61.2.1), [colored](mld6.c.diff?r1=1.61;r2=1.61.2.1;f=h)

Changes since revision 1.61: +3 -2
lines
```

Sync with HEAD

```

---

Revision **1.59.2.2**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.59.2.2;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.59.2.2;content-type=text%2Fplain), [markup](mld6.c?rev=1.59.2.2;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.59.2.2) - [select for diffs](mld6.c?r1=1.59.2.2#rev1.59.2.2)

*Fri Jan 23 09:27:15 2015 UTC* (10 years ago) by *martin*

Branches: [netbsd-7](./mld6.c?only_with_tag=netbsd-7)

CVS tags: [netbsd-7-0-RELEASE](./mld6.c?only_with_tag=netbsd-7-0-RELEASE),
[netbsd-7-0-RC3](./mld6.c?only_with_tag=netbsd-7-0-RC3),
[netbsd-7-0-RC2](./mld6.c?only_with_tag=netbsd-7-0-RC2),
[netbsd-7-0-RC1](./mld6.c?only_with_tag=netbsd-7-0-RC1)

Branch point for: [netbsd-7-0](./mld6.c?only_with_tag=netbsd-7-0)

Diff to: previous 1.59.2.1: [preferred](mld6.c.diff?r1=1.59.2.1;r2=1.59.2.2), [colored](mld6.c.diff?r1=1.59.2.1;r2=1.59.2.2;f=h); branchpoint 1.59: [preferred](mld6.c.diff?r1=1.59;r2=1.59.2.2), [colored](mld6.c.diff?r1=1.59;r2=1.59.2.2;f=h)

Changes since revision 1.59.2.1: +3 -2
lines
```

Pull up following revision(s) (requested by pettai in ticket #441):
	sys/netinet6/ip6_var.h: revision 1.64
	sys/netinet6/in6.h: revision 1.82
	sys/netinet6/in6_src.c: revision 1.56
	sys/netinet6/mld6.c: revision 1.62
	sys/netinet6/ip6_input.c: revision 1.150
	sys/netinet6/ip6_output.c: revision 1.161
Add net.inet6.ip6.prefer_tempaddr sysctl knob so that we can prefer
IPv6 temporary addresses as the source address.
Fixes PR [kern/47100](http://gnats.NetBSD.org/47100) based on a patch by Dieter Roelants.

```

---

Revision **1.62**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.62;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.62;content-type=text%2Fplain), [markup](mld6.c?rev=1.62;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.62) - [select for diffs](mld6.c?r1=1.62#rev1.62)

*Tue Jan 20 21:27:36 2015 UTC* (10 years ago) by *roy*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

CVS tags: [nick-nhusb-base-20150606](./mld6.c?only_with_tag=nick-nhusb-base-20150606),
[nick-nhusb-base-20150406](./mld6.c?only_with_tag=nick-nhusb-base-20150406)

Diff to: previous 1.61: [preferred](mld6.c.diff?r1=1.61;r2=1.62), [colored](mld6.c.diff?r1=1.61;r2=1.62;f=h)

Changes since revision 1.61: +3 -2
lines
```

Add net.inet6.ip6.prefer_tempaddr sysctl knob so that we can prefer
IPv6 temporary addresses as the source address.

Fixes PR [kern/47100](http://gnats.NetBSD.org/47100) based on a patch by Dieter Roelants.

```

---

Revision **1.59.2.1**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.59.2.1;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.59.2.1;content-type=text%2Fplain), [markup](mld6.c?rev=1.59.2.1;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.59.2.1) - [select for diffs](mld6.c?r1=1.59.2.1#rev1.59.2.1)

*Mon Dec 29 17:33:49 2014 UTC* (10 years ago) by *martin*

Branches: [netbsd-7](./mld6.c?only_with_tag=netbsd-7)

Diff to: previous 1.59: [preferred](mld6.c.diff?r1=1.59;r2=1.59.2.1), [colored](mld6.c.diff?r1=1.59;r2=1.59.2.1;f=h)

Changes since revision 1.59: +13 -2
lines
```

Pull up following revision(s) (requested by ozaki-r in ticket #360):
	sys/netinet6/mld6.c: revision 1.61
Ensure callout isn't running and pending before callout_destroy
Call callout_halt before callout_destroy. And also let callout (mld_timeo)
not call callout_schedule when we already called callout_halt.
This fixes PR [47881](http://gnats.NetBSD.org/47881).

```

---

Revision **1.55.4.1**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.55.4.1;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.55.4.1;content-type=text%2Fplain), [markup](mld6.c?rev=1.55.4.1;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.55.4.1) - [select for diffs](mld6.c?r1=1.55.4.1#rev1.55.4.1)

*Mon Dec 29 15:45:44 2014 UTC* (10 years ago) by *martin*

Branches: [netbsd-6](./mld6.c?only_with_tag=netbsd-6)

Diff to: previous 1.55: [preferred](mld6.c.diff?r1=1.55;r2=1.55.4.1), [colored](mld6.c.diff?r1=1.55;r2=1.55.4.1;f=h); next MAIN 1.56: [preferred](mld6.c.diff?r1=1.56;r2=1.55.4.1), [colored](mld6.c.diff?r1=1.56;r2=1.55.4.1;f=h)

Changes since revision 1.55: +13 -2
lines
```

Pull up following revision(s) (requested by ozaki-r in ticket #1224):
	sys/netinet6/mld6.c: revision 1.61
Ensure callout isn't running and pending before callout_destroy
Call callout_halt before callout_destroy. And also let callout (mld_timeo)
not call callout_schedule when we already called callout_halt.
This fixes PR [47881](http://gnats.NetBSD.org/47881).

```

---

Revision **1.61**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.61;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.61;content-type=text%2Fplain), [markup](mld6.c?rev=1.61;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.61) - [select for diffs](mld6.c?r1=1.61#rev1.61)

*Wed Nov 12 03:24:25 2014 UTC* (10 years, 2 months ago) by *ozaki-r*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

CVS tags: [nick-nhusb-base](./mld6.c?only_with_tag=nick-nhusb-base)

Branch point for: [nick-nhusb](./mld6.c?only_with_tag=nick-nhusb)

Diff to: previous 1.60: [preferred](mld6.c.diff?r1=1.60;r2=1.61), [colored](mld6.c.diff?r1=1.60;r2=1.61;f=h)

Changes since revision 1.60: +13 -2
lines
```

Ensure callout isn't running and pending before callout_destroy

Call callout_halt before callout_destroy. And also let callout (mld_timeo)
not call callout_schedule when we already called callout_halt.

This fixes PR [47881](http://gnats.NetBSD.org/47881).

```

---

Revision **1.60**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.60;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.60;content-type=text%2Fplain), [markup](mld6.c?rev=1.60;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.60) - [select for diffs](mld6.c?r1=1.60#rev1.60)

*Tue Sep 9 20:16:12 2014 UTC* (10 years, 4 months ago) by *rmind*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

Diff to: previous 1.59: [preferred](mld6.c.diff?r1=1.59;r2=1.60), [colored](mld6.c.diff?r1=1.59;r2=1.60;f=h)

Changes since revision 1.59: +9 -9
lines
```

Eliminate IFAREF() and IFAFREE() macros in favour of functions.

```

---

Revision **1.55.8.1**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.55.8.1;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.55.8.1;content-type=text%2Fplain), [markup](mld6.c?rev=1.55.8.1;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.55.8.1) - [select for diffs](mld6.c?r1=1.55.8.1#rev1.55.8.1)

*Wed Aug 20 00:04:36 2014 UTC* (10 years, 5 months ago) by *tls*

Branches: [tls-maxphys](./mld6.c?only_with_tag=tls-maxphys)

Diff to: previous 1.55: [preferred](mld6.c.diff?r1=1.55;r2=1.55.8.1), [colored](mld6.c.diff?r1=1.55;r2=1.55.8.1;f=h)

Changes since revision 1.55: +152 -3
lines
```

Rebase to HEAD as of a few days ago.

```

---

Revision **1.55.22.1**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.55.22.1;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.55.22.1;content-type=text%2Fplain), [markup](mld6.c?rev=1.55.22.1;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.55.22.1) - [select for diffs](mld6.c?r1=1.55.22.1#rev1.55.22.1)

*Sun Aug 10 06:56:30 2014 UTC* (10 years, 5 months ago) by *tls*

Branches: [tls-earlyentropy](./mld6.c?only_with_tag=tls-earlyentropy)

Diff to: previous 1.55: [preferred](mld6.c.diff?r1=1.55;r2=1.55.22.1), [colored](mld6.c.diff?r1=1.55;r2=1.55.22.1;f=h); next MAIN 1.56: [preferred](mld6.c.diff?r1=1.56;r2=1.55.22.1), [colored](mld6.c.diff?r1=1.56;r2=1.55.22.1;f=h)

Changes since revision 1.55: +152 -3
lines
```

Rebase.

```

---

Revision **1.59**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.59;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.59;content-type=text%2Fplain), [markup](mld6.c?rev=1.59;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.59) - [select for diffs](mld6.c?r1=1.59#rev1.59)

*Sat Jul 26 22:21:16 2014 UTC* (10 years, 6 months ago) by *joerg*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

CVS tags: [tls-maxphys-base](./mld6.c?only_with_tag=tls-maxphys-base),
[tls-earlyentropy-base](./mld6.c?only_with_tag=tls-earlyentropy-base),
[netbsd-7-base](./mld6.c?only_with_tag=netbsd-7-base)

Branch point for: [netbsd-7](./mld6.c?only_with_tag=netbsd-7)

Diff to: previous 1.58: [preferred](mld6.c.diff?r1=1.58;r2=1.59), [colored](mld6.c.diff?r1=1.58;r2=1.59;f=h)

Changes since revision 1.58: +8 -2
lines
```

PR [49036](http://gnats.NetBSD.org/49036): net.inet6 has not been created when the sysctl constructor
for net.inet6.multicast is run.

```

---

Revision **1.58**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.58;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.58;content-type=text%2Fplain), [markup](mld6.c?rev=1.58;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.58) - [select for diffs](mld6.c?r1=1.58#rev1.58)

*Fri Jul 25 07:12:55 2014 UTC* (10 years, 6 months ago) by *ozaki-r*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

Diff to: previous 1.57: [preferred](mld6.c.diff?r1=1.57;r2=1.58), [colored](mld6.c.diff?r1=1.57;r2=1.58;f=h)

Changes since revision 1.57: +4 -4
lines
```

Use IFADDR_FOREACH for iterating if_addrlist of ifnet

```

---

Revision **1.57**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.57;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.57;content-type=text%2Fplain), [markup](mld6.c?rev=1.57;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.57) - [select for diffs](mld6.c?r1=1.57#rev1.57)

*Tue Jun 10 09:38:30 2014 UTC* (10 years, 7 months ago) by *joerg*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

Diff to: previous 1.56: [preferred](mld6.c.diff?r1=1.56;r2=1.57), [colored](mld6.c.diff?r1=1.56;r2=1.57;f=h)

Changes since revision 1.56: +145 -2
lines
```

Introduce new sysctls for obtaining interface-specific addresses:
- net.sdl for the active link-layer adddress (the MAC)
- net.ether.multicast for the Ethernet multicast addresses
- net.inet6.multicast for the IPv6 multicast groups
- net.inet6.multicast_kludge for temporarily removed multicast groups

Use this sysctls for replacing the kmem grovelling in [ifmcstat(8)](http://man.NetBSD.org/ifmcstat.8).

```

---

Revision **1.56**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.56;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.56;content-type=text%2Fplain), [markup](mld6.c?rev=1.56;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.56) - [select for diffs](mld6.c?r1=1.56#rev1.56)

*Mon Jun 2 11:02:20 2014 UTC* (10 years, 7 months ago) by *joerg*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

Diff to: previous 1.55: [preferred](mld6.c.diff?r1=1.55;r2=1.56), [colored](mld6.c.diff?r1=1.55;r2=1.56;f=h)

Changes since revision 1.55: +3 -3
lines
```

Use explicit initializer.

```

---

Revision **1.54.2.1**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.54.2.1;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.54.2.1;content-type=text%2Fplain), [markup](mld6.c?rev=1.54.2.1;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.54.2.1) - [select for diffs](mld6.c?r1=1.54.2.1#rev1.54.2.1)

*Tue Apr 17 00:08:45 2012 UTC* (12 years, 9 months ago) by *yamt*

Branches: [yamt-pagecache](./mld6.c?only_with_tag=yamt-pagecache)

CVS tags: [yamt-pagecache-tag8](./mld6.c?only_with_tag=yamt-pagecache-tag8)

Diff to: previous 1.54: [preferred](mld6.c.diff?r1=1.54;r2=1.54.2.1), [colored](mld6.c.diff?r1=1.54;r2=1.54.2.1;f=h); next MAIN 1.55: [preferred](mld6.c.diff?r1=1.55;r2=1.54.2.1), [colored](mld6.c.diff?r1=1.55;r2=1.54.2.1;f=h)

Changes since revision 1.54: +5 -4
lines
```

sync with head

```

---

Revision **1.55**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.55;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.55;content-type=text%2Fplain), [markup](mld6.c?rev=1.55;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.55) - [select for diffs](mld6.c?r1=1.55#rev1.55)

*Sat Nov 19 22:51:29 2011 UTC* (13 years, 2 months ago) by *tls*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

CVS tags: [yamt-pagecache-base9](./mld6.c?only_with_tag=yamt-pagecache-base9),
[yamt-pagecache-base8](./mld6.c?only_with_tag=yamt-pagecache-base8),
[yamt-pagecache-base7](./mld6.c?only_with_tag=yamt-pagecache-base7),
[yamt-pagecache-base6](./mld6.c?only_with_tag=yamt-pagecache-base6),
[yamt-pagecache-base5](./mld6.c?only_with_tag=yamt-pagecache-base5),
[yamt-pagecache-base4](./mld6.c?only_with_tag=yamt-pagecache-base4),
[rmind-smpnet-nbase](./mld6.c?only_with_tag=rmind-smpnet-nbase),
[rmind-smpnet-base](./mld6.c?only_with_tag=rmind-smpnet-base),
[rmind-smpnet](./mld6.c?only_with_tag=rmind-smpnet),
[riastradh-xf86-video-intel-2-7-1-pre-2-21-15](./mld6.c?only_with_tag=riastradh-xf86-video-intel-2-7-1-pre-2-21-15),
[riastradh-drm2-base3](./mld6.c?only_with_tag=riastradh-drm2-base3),
[riastradh-drm2-base2](./mld6.c?only_with_tag=riastradh-drm2-base2),
[riastradh-drm2-base1](./mld6.c?only_with_tag=riastradh-drm2-base1),
[riastradh-drm2-base](./mld6.c?only_with_tag=riastradh-drm2-base),
[riastradh-drm2](./mld6.c?only_with_tag=riastradh-drm2),
[netbsd-6-base](./mld6.c?only_with_tag=netbsd-6-base),
[netbsd-6-1-RELEASE](./mld6.c?only_with_tag=netbsd-6-1-RELEASE),
[netbsd-6-1-RC4](./mld6.c?only_with_tag=netbsd-6-1-RC4),
[netbsd-6-1-RC3](./mld6.c?only_with_tag=netbsd-6-1-RC3),
[netbsd-6-1-RC2](./mld6.c?only_with_tag=netbsd-6-1-RC2),
[netbsd-6-1-RC1](./mld6.c?only_with_tag=netbsd-6-1-RC1),
[netbsd-6-1-5-RELEASE](./mld6.c?only_with_tag=netbsd-6-1-5-RELEASE),
[netbsd-6-1-4-RELEASE](./mld6.c?only_with_tag=netbsd-6-1-4-RELEASE),
[netbsd-6-1-3-RELEASE](./mld6.c?only_with_tag=netbsd-6-1-3-RELEASE),
[netbsd-6-1-2-RELEASE](./mld6.c?only_with_tag=netbsd-6-1-2-RELEASE),
[netbsd-6-1-1-RELEASE](./mld6.c?only_with_tag=netbsd-6-1-1-RELEASE),
[netbsd-6-1](./mld6.c?only_with_tag=netbsd-6-1),
[netbsd-6-0-RELEASE](./mld6.c?only_with_tag=netbsd-6-0-RELEASE),
[netbsd-6-0-RC2](./mld6.c?only_with_tag=netbsd-6-0-RC2),
[netbsd-6-0-RC1](./mld6.c?only_with_tag=netbsd-6-0-RC1),
[netbsd-6-0-6-RELEASE](./mld6.c?only_with_tag=netbsd-6-0-6-RELEASE),
[netbsd-6-0-5-RELEASE](./mld6.c?only_with_tag=netbsd-6-0-5-RELEASE),
[netbsd-6-0-4-RELEASE](./mld6.c?only_with_tag=netbsd-6-0-4-RELEASE),
[netbsd-6-0-3-RELEASE](./mld6.c?only_with_tag=netbsd-6-0-3-RELEASE),
[netbsd-6-0-2-RELEASE](./mld6.c?only_with_tag=netbsd-6-0-2-RELEASE),
[netbsd-6-0-1-RELEASE](./mld6.c?only_with_tag=netbsd-6-0-1-RELEASE),
[netbsd-6-0](./mld6.c?only_with_tag=netbsd-6-0),
[matt-nb6-plus-nbase](./mld6.c?only_with_tag=matt-nb6-plus-nbase),
[matt-nb6-plus-base](./mld6.c?only_with_tag=matt-nb6-plus-base),
[matt-nb6-plus](./mld6.c?only_with_tag=matt-nb6-plus),
[khorben-n900](./mld6.c?only_with_tag=khorben-n900),
[jmcneill-usbmp-pre-base2](./mld6.c?only_with_tag=jmcneill-usbmp-pre-base2),
[jmcneill-usbmp-base9](./mld6.c?only_with_tag=jmcneill-usbmp-base9),
[jmcneill-usbmp-base8](./mld6.c?only_with_tag=jmcneill-usbmp-base8),
[jmcneill-usbmp-base7](./mld6.c?only_with_tag=jmcneill-usbmp-base7),
[jmcneill-usbmp-base6](./mld6.c?only_with_tag=jmcneill-usbmp-base6),
[jmcneill-usbmp-base5](./mld6.c?only_with_tag=jmcneill-usbmp-base5),
[jmcneill-usbmp-base4](./mld6.c?only_with_tag=jmcneill-usbmp-base4),
[jmcneill-usbmp-base3](./mld6.c?only_with_tag=jmcneill-usbmp-base3),
[jmcneill-usbmp-base2](./mld6.c?only_with_tag=jmcneill-usbmp-base2),
[jmcneill-usbmp-base10](./mld6.c?only_with_tag=jmcneill-usbmp-base10),
[jmcneill-usbmp-base](./mld6.c?only_with_tag=jmcneill-usbmp-base),
[jmcneill-usbmp](./mld6.c?only_with_tag=jmcneill-usbmp),
[agc-symver-base](./mld6.c?only_with_tag=agc-symver-base),
[agc-symver](./mld6.c?only_with_tag=agc-symver)

Branch point for: [tls-maxphys](./mld6.c?only_with_tag=tls-maxphys),
[tls-earlyentropy](./mld6.c?only_with_tag=tls-earlyentropy),
[netbsd-6](./mld6.c?only_with_tag=netbsd-6)

Diff to: previous 1.54: [preferred](mld6.c.diff?r1=1.54;r2=1.55), [colored](mld6.c.diff?r1=1.54;r2=1.55;f=h)

Changes since revision 1.54: +5 -4
lines
```

First step of random number subsystem rework described in
<20111022023242.BA26F14A158@mail.netbsd.org>.  This change includes
the following:

	An initial cleanup and minor reorganization of the entropy pool
	code in sys/dev/rnd.c and sys/dev/rndpool.c.  Several bugs are
	fixed.  Some effort is made to accumulate entropy more quickly at
	boot time.

	A generic interface, "rndsink", is added, for stream generators to
	request that they be re-keyed with good quality entropy from the pool
	as soon as it is available.

	The arc4random()/arc4randbytes() implementation in libkern is
	adjusted to use the rndsink interface for rekeying, which helps
	address the problem of low-quality keys at boot time.

	An implementation of the FIPS 140-2 statistical tests for random
	number generator quality is provided (libkern/rngtest.c).  This
	is based on Greg Rose's implementation from Qualcomm.

	A new random stream generator, nist_ctr_drbg, is provided.  It is
	based on an implementation of the NIST SP800-90 CTR_DRBG by
	Henric Jungheim.  This generator users AES in a modified counter
	mode to generate a backtracking-resistant random stream.

	An abstraction layer, "cprng", is provided for in-kernel consumers
	of randomness.  The arc4random/arc4randbytes API is deprecated for
	in-kernel use.  It is replaced by "cprng_strong".  The current
	cprng_fast implementation wraps the existing arc4random
	implementation.  The current cprng_strong implementation wraps the
	new CTR_DRBG implementation.  Both interfaces are rekeyed from
	the entropy pool automatically at intervals justifiable from best
	current cryptographic practice.

	In some quick tests, cprng_fast() is about the same speed as
	the old arc4randbytes(), and cprng_strong() is about 20% faster
	than rnd_extract_data().  Performance is expected to improve.

	The AES code in src/crypto/rijndael is no longer an optional
	kernel component, as it is required by cprng_strong, which is
	not an optional kernel component.

	The entropy pool output is subjected to the rngtest tests at
	startup time; if it fails, the system will reboot.  There is
	approximately a 3/10000 chance of a false positive from these
	tests.  Entropy pool _input_ from hardware random numbers is
	subjected to the rngtest tests at attach time, as well as the
	FIPS continuous-output test, to detect bad or stuck hardware
	RNGs; if any are detected, they are detached, but the system
	continues to run.

	A problem with [rndctl(8)](http://man.NetBSD.org/rndctl.8) is fixed -- datastructures with
	pointers in arrays are no longer passed to userspace (this
	was not a security problem, but rather a major issue for
	compat32).  A new kernel will require a new rndctl.

	The sysctl kern.arandom() and kern.urandom() nodes are hooked
	up to the new generators, but the /dev/*random pseudodevices
	are not, yet.

	Manual pages for the new kernel interfaces are forthcoming.

```

---

Revision **1.54**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.54;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.54;content-type=text%2Fplain), [markup](mld6.c?rev=1.54;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.54) - [select for diffs](mld6.c?r1=1.54#rev1.54)

*Wed Oct 19 01:53:07 2011 UTC* (13 years, 3 months ago) by *dyoung*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

CVS tags: [yamt-pagecache-base3](./mld6.c?only_with_tag=yamt-pagecache-base3),
[yamt-pagecache-base2](./mld6.c?only_with_tag=yamt-pagecache-base2),
[yamt-pagecache-base](./mld6.c?only_with_tag=yamt-pagecache-base),
[jmcneill-audiomp3-base](./mld6.c?only_with_tag=jmcneill-audiomp3-base),
[jmcneill-audiomp3](./mld6.c?only_with_tag=jmcneill-audiomp3)

Branch point for: [yamt-pagecache](./mld6.c?only_with_tag=yamt-pagecache)

Diff to: previous 1.53: [preferred](mld6.c.diff?r1=1.53;r2=1.54), [colored](mld6.c.diff?r1=1.53;r2=1.54;f=h)

Changes since revision 1.53: +8 -8
lines
```

Use if_addr_init() and if_mcast_op() instead of ifp->if_ioctl().

```

---

Revision **1.53**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.53;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.53;content-type=text%2Fplain), [markup](mld6.c?rev=1.53;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.53) - [select for diffs](mld6.c?r1=1.53#rev1.53)

*Wed Aug 31 18:31:03 2011 UTC* (13 years, 4 months ago) by *plunky*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

Diff to: previous 1.52: [preferred](mld6.c.diff?r1=1.52;r2=1.53), [colored](mld6.c.diff?r1=1.52;r2=1.53;f=h)

Changes since revision 1.52: +3 -3
lines
```

NULL does not need a cast

```

---

Revision **1.51.6.1**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.51.6.1;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.51.6.1;content-type=text%2Fplain), [markup](mld6.c?rev=1.51.6.1;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.51.6.1) - [select for diffs](mld6.c?r1=1.51.6.1#rev1.51.6.1)

*Mon Jun 6 09:10:00 2011 UTC* (13 years, 7 months ago) by *jruoho*

Branches: [jruoho-x86intr](./mld6.c?only_with_tag=jruoho-x86intr)

Diff to: previous 1.51: [preferred](mld6.c.diff?r1=1.51;r2=1.51.6.1), [colored](mld6.c.diff?r1=1.51;r2=1.51.6.1;f=h); next MAIN 1.52: [preferred](mld6.c.diff?r1=1.52;r2=1.51.6.1), [colored](mld6.c.diff?r1=1.52;r2=1.51.6.1;f=h)

Changes since revision 1.51: +3 -3
lines
```

Sync with HEAD.

```

---

Revision **1.51.4.1**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.51.4.1;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.51.4.1;content-type=text%2Fplain), [markup](mld6.c?rev=1.51.4.1;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.51.4.1) - [select for diffs](mld6.c?r1=1.51.4.1#rev1.51.4.1)

*Tue May 31 03:05:09 2011 UTC* (13 years, 7 months ago) by *rmind*

Branches: [rmind-uvmplock](./mld6.c?only_with_tag=rmind-uvmplock)

Diff to: previous 1.51: [preferred](mld6.c.diff?r1=1.51;r2=1.51.4.1), [colored](mld6.c.diff?r1=1.51;r2=1.51.4.1;f=h); next MAIN 1.52: [preferred](mld6.c.diff?r1=1.52;r2=1.51.4.1), [colored](mld6.c.diff?r1=1.52;r2=1.51.4.1;f=h)

Changes since revision 1.51: +3 -3
lines
```

sync with head

```

---

Revision **1.52**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.52;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.52;content-type=text%2Fplain), [markup](mld6.c?rev=1.52;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.52) - [select for diffs](mld6.c?r1=1.52#rev1.52)

*Thu Apr 21 06:58:31 2011 UTC* (13 years, 9 months ago) by *dholland*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

CVS tags: [rmind-uvmplock-nbase](./mld6.c?only_with_tag=rmind-uvmplock-nbase),
[rmind-uvmplock-base](./mld6.c?only_with_tag=rmind-uvmplock-base),
[cherry-xenmp-base](./mld6.c?only_with_tag=cherry-xenmp-base),
[cherry-xenmp](./mld6.c?only_with_tag=cherry-xenmp)

Diff to: previous 1.51: [preferred](mld6.c.diff?r1=1.51;r2=1.52), [colored](mld6.c.diff?r1=1.51;r2=1.52;f=h)

Changes since revision 1.51: +3 -3
lines
```

Prune dead assignment, from Henning Petersen in PR [44890](http://gnats.NetBSD.org/44890).

```

---

Revision **1.45.2.2**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.45.2.2;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.45.2.2;content-type=text%2Fplain), [markup](mld6.c?rev=1.45.2.2;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.45.2.2) - [select for diffs](mld6.c?r1=1.45.2.2#rev1.45.2.2)

*Wed Aug 19 18:48:25 2009 UTC* (15 years, 5 months ago) by *yamt*

Branches: [yamt-nfs-mp](./mld6.c?only_with_tag=yamt-nfs-mp)

Diff to: previous 1.45.2.1: [preferred](mld6.c.diff?r1=1.45.2.1;r2=1.45.2.2), [colored](mld6.c.diff?r1=1.45.2.1;r2=1.45.2.2;f=h); branchpoint 1.45: [preferred](mld6.c.diff?r1=1.45;r2=1.45.2.2), [colored](mld6.c.diff?r1=1.45;r2=1.45.2.2;f=h); next MAIN 1.46: [preferred](mld6.c.diff?r1=1.46;r2=1.45.2.2), [colored](mld6.c.diff?r1=1.46;r2=1.45.2.2;f=h)

Changes since revision 1.45.2.1: +6 -9
lines
```

sync with head.

```

---

Revision **1.51**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.51;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.51;content-type=text%2Fplain), [markup](mld6.c?rev=1.51;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.51) - [select for diffs](mld6.c?r1=1.51#rev1.51)

*Tue Aug 4 22:04:23 2009 UTC* (15 years, 5 months ago) by *dyoung*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

CVS tags: [yamt-nfs-mp-base9](./mld6.c?only_with_tag=yamt-nfs-mp-base9),
[yamt-nfs-mp-base8](./mld6.c?only_with_tag=yamt-nfs-mp-base8),
[yamt-nfs-mp-base7](./mld6.c?only_with_tag=yamt-nfs-mp-base7),
[yamt-nfs-mp-base11](./mld6.c?only_with_tag=yamt-nfs-mp-base11),
[yamt-nfs-mp-base10](./mld6.c?only_with_tag=yamt-nfs-mp-base10),
[uebayasi-xip-base4](./mld6.c?only_with_tag=uebayasi-xip-base4),
[uebayasi-xip-base3](./mld6.c?only_with_tag=uebayasi-xip-base3),
[uebayasi-xip-base2](./mld6.c?only_with_tag=uebayasi-xip-base2),
[uebayasi-xip-base1](./mld6.c?only_with_tag=uebayasi-xip-base1),
[uebayasi-xip-base](./mld6.c?only_with_tag=uebayasi-xip-base),
[uebayasi-xip](./mld6.c?only_with_tag=uebayasi-xip),
[matt-premerge-20091211](./mld6.c?only_with_tag=matt-premerge-20091211),
[matt-mips64-premerge-20101231](./mld6.c?only_with_tag=matt-mips64-premerge-20101231),
[jym-xensuspend-nbase](./mld6.c?only_with_tag=jym-xensuspend-nbase),
[jruoho-x86intr-base](./mld6.c?only_with_tag=jruoho-x86intr-base),
[bouyer-quota2-nbase](./mld6.c?only_with_tag=bouyer-quota2-nbase),
[bouyer-quota2-base](./mld6.c?only_with_tag=bouyer-quota2-base),
[bouyer-quota2](./mld6.c?only_with_tag=bouyer-quota2)

Branch point for: [rmind-uvmplock](./mld6.c?only_with_tag=rmind-uvmplock),
[jruoho-x86intr](./mld6.c?only_with_tag=jruoho-x86intr)

Diff to: previous 1.50: [preferred](mld6.c.diff?r1=1.50;r2=1.51), [colored](mld6.c.diff?r1=1.50;r2=1.51;f=h)

Changes since revision 1.50: +6 -9
lines
```

Use malloc(...|M_ZERO) instead of malloc(...) followed by memset(,0,).

```

---

Revision **1.48.4.1**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.48.4.1;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.48.4.1;content-type=text%2Fplain), [markup](mld6.c?rev=1.48.4.1;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.48.4.1) - [select for diffs](mld6.c?r1=1.48.4.1#rev1.48.4.1)

*Wed May 13 17:22:29 2009 UTC* (15 years, 8 months ago) by *jym*

Branches: [jym-xensuspend](./mld6.c?only_with_tag=jym-xensuspend)

Diff to: previous 1.48: [preferred](mld6.c.diff?r1=1.48;r2=1.48.4.1), [colored](mld6.c.diff?r1=1.48;r2=1.48.4.1;f=h); next MAIN 1.49: [preferred](mld6.c.diff?r1=1.49;r2=1.48.4.1), [colored](mld6.c.diff?r1=1.49;r2=1.48.4.1;f=h)

Changes since revision 1.48: +3 -3
lines
```

Sync with HEAD.

Commit is split, to avoid a "too many arguments" protocol error.

```

---

Revision **1.45.2.1**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.45.2.1;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.45.2.1;content-type=text%2Fplain), [markup](mld6.c?rev=1.45.2.1;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.45.2.1) - [select for diffs](mld6.c?r1=1.45.2.1#rev1.45.2.1)

*Mon May 4 08:14:19 2009 UTC* (15 years, 8 months ago) by *yamt*

Branches: [yamt-nfs-mp](./mld6.c?only_with_tag=yamt-nfs-mp)

Diff to: previous 1.45: [preferred](mld6.c.diff?r1=1.45;r2=1.45.2.1), [colored](mld6.c.diff?r1=1.45;r2=1.45.2.1;f=h)

Changes since revision 1.45: +10 -15
lines
```

sync with head.

```

---

Revision **1.47.2.2**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.47.2.2;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.47.2.2;content-type=text%2Fplain), [markup](mld6.c?rev=1.47.2.2;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.47.2.2) - [select for diffs](mld6.c?r1=1.47.2.2#rev1.47.2.2)

*Tue Apr 28 07:37:24 2009 UTC* (15 years, 9 months ago) by *skrll*

Branches: [nick-hppapmap](./mld6.c?only_with_tag=nick-hppapmap)

Diff to: previous 1.47.2.1: [preferred](mld6.c.diff?r1=1.47.2.1;r2=1.47.2.2), [colored](mld6.c.diff?r1=1.47.2.1;r2=1.47.2.2;f=h); branchpoint 1.47: [preferred](mld6.c.diff?r1=1.47;r2=1.47.2.2), [colored](mld6.c.diff?r1=1.47;r2=1.47.2.2;f=h); next MAIN 1.48: [preferred](mld6.c.diff?r1=1.48;r2=1.47.2.2), [colored](mld6.c.diff?r1=1.48;r2=1.47.2.2;f=h)

Changes since revision 1.47.2.1: +3 -3
lines
```

Sync with HEAD.

```

---

Revision **1.50**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.50;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.50;content-type=text%2Fplain), [markup](mld6.c?rev=1.50;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.50) - [select for diffs](mld6.c?r1=1.50#rev1.50)

*Sat Apr 18 14:58:05 2009 UTC* (15 years, 9 months ago) by *tsutsui*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

CVS tags: [yamt-nfs-mp-base6](./mld6.c?only_with_tag=yamt-nfs-mp-base6),
[yamt-nfs-mp-base5](./mld6.c?only_with_tag=yamt-nfs-mp-base5),
[yamt-nfs-mp-base4](./mld6.c?only_with_tag=yamt-nfs-mp-base4),
[yamt-nfs-mp-base3](./mld6.c?only_with_tag=yamt-nfs-mp-base3),
[nick-hppapmap-base4](./mld6.c?only_with_tag=nick-hppapmap-base4),
[nick-hppapmap-base3](./mld6.c?only_with_tag=nick-hppapmap-base3),
[nick-hppapmap-base](./mld6.c?only_with_tag=nick-hppapmap-base),
[jymxensuspend-base](./mld6.c?only_with_tag=jymxensuspend-base),
[jym-xensuspend-base](./mld6.c?only_with_tag=jym-xensuspend-base)

Diff to: previous 1.49: [preferred](mld6.c.diff?r1=1.49;r2=1.50), [colored](mld6.c.diff?r1=1.49;r2=1.50;f=h)

Changes since revision 1.49: +3 -3
lines
```

Remove extra whitespace added by a stupid tool.
XXX: more in src/sys/arch

```

---

Revision **1.49**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.49;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.49;content-type=text%2Fplain), [markup](mld6.c?rev=1.49;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.49) - [select for diffs](mld6.c?r1=1.49#rev1.49)

*Wed Mar 18 17:06:52 2009 UTC* (15 years, 10 months ago) by *cegger*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

Diff to: previous 1.48: [preferred](mld6.c.diff?r1=1.48;r2=1.49), [colored](mld6.c.diff?r1=1.48;r2=1.49;f=h)

Changes since revision 1.48: +3 -3
lines
```

bcopy -> memcpy

```

---

Revision **1.47.2.1**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.47.2.1;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.47.2.1;content-type=text%2Fplain), [markup](mld6.c?rev=1.47.2.1;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.47.2.1) - [select for diffs](mld6.c?r1=1.47.2.1#rev1.47.2.1)

*Mon Jan 19 13:20:14 2009 UTC* (16 years ago) by *skrll*

Branches: [nick-hppapmap](./mld6.c?only_with_tag=nick-hppapmap)

Diff to: previous 1.47: [preferred](mld6.c.diff?r1=1.47;r2=1.47.2.1), [colored](mld6.c.diff?r1=1.47;r2=1.47.2.1;f=h)

Changes since revision 1.47: +3 -6
lines
```

Sync with HEAD.

```

---

Revision **1.41.18.4**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.41.18.4;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.41.18.4;content-type=text%2Fplain), [markup](mld6.c?rev=1.41.18.4;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.41.18.4) - [select for diffs](mld6.c?r1=1.41.18.4#rev1.41.18.4)

*Sat Jan 17 13:29:33 2009 UTC* (16 years ago) by *mjf*

Branches: [mjf-devfs2](./mld6.c?only_with_tag=mjf-devfs2)

Diff to: previous 1.41.18.3: [preferred](mld6.c.diff?r1=1.41.18.3;r2=1.41.18.4), [colored](mld6.c.diff?r1=1.41.18.3;r2=1.41.18.4;f=h); branchpoint 1.41: [preferred](mld6.c.diff?r1=1.41;r2=1.41.18.4), [colored](mld6.c.diff?r1=1.41;r2=1.41.18.4;f=h); next MAIN 1.42: [preferred](mld6.c.diff?r1=1.42;r2=1.41.18.4), [colored](mld6.c.diff?r1=1.42;r2=1.41.18.4;f=h)

Changes since revision 1.41.18.3: +1 -4
lines
```

Sync with HEAD.

```

---

Revision **1.46.4.2**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.46.4.2;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.46.4.2;content-type=text%2Fplain), [markup](mld6.c?rev=1.46.4.2;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.46.4.2) - [select for diffs](mld6.c?r1=1.46.4.2#rev1.46.4.2)

*Sat Dec 13 01:15:27 2008 UTC* (16 years, 1 month ago) by *haad*

Branches: [haad-dm](./mld6.c?only_with_tag=haad-dm)

Diff to: previous 1.46.4.1: [preferred](mld6.c.diff?r1=1.46.4.1;r2=1.46.4.2), [colored](mld6.c.diff?r1=1.46.4.1;r2=1.46.4.2;f=h); branchpoint 1.46: [preferred](mld6.c.diff?r1=1.46;r2=1.46.4.2), [colored](mld6.c.diff?r1=1.46;r2=1.46.4.2;f=h); next MAIN 1.47: [preferred](mld6.c.diff?r1=1.47;r2=1.46.4.2), [colored](mld6.c.diff?r1=1.47;r2=1.46.4.2;f=h)

Changes since revision 1.46.4.1: +3 -6
lines
```

Update haad-dm branch to haad-dm-base2.

```

---

Revision **1.48**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.48;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.48;content-type=text%2Fplain), [markup](mld6.c?rev=1.48;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.48) - [select for diffs](mld6.c?r1=1.48#rev1.48)

*Fri Nov 7 00:20:18 2008 UTC* (16 years, 2 months ago) by *dyoung*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

CVS tags: [nick-hppapmap-base2](./mld6.c?only_with_tag=nick-hppapmap-base2),
[mjf-devfs2-base](./mld6.c?only_with_tag=mjf-devfs2-base),
[haad-nbase2](./mld6.c?only_with_tag=haad-nbase2),
[haad-dm-base2](./mld6.c?only_with_tag=haad-dm-base2),
[haad-dm-base](./mld6.c?only_with_tag=haad-dm-base),
[ad-audiomp2-base](./mld6.c?only_with_tag=ad-audiomp2-base),
[ad-audiomp2](./mld6.c?only_with_tag=ad-audiomp2)

Branch point for: [jym-xensuspend](./mld6.c?only_with_tag=jym-xensuspend)

Diff to: previous 1.47: [preferred](mld6.c.diff?r1=1.47;r2=1.48), [colored](mld6.c.diff?r1=1.47;r2=1.48;f=h)

Changes since revision 1.47: +3 -6
lines
```

*** Summary ***

When a link-layer address changes (e.g., ifconfig ex0 link
02:de:ad:be:ef:02 active), send a gratuitous ARP and/or a Neighbor
Advertisement to update the network-/link-layer address bindings
on our LAN peers.

Refuse a change of ethernet address to the address 00:00:00:00:00:00
or to any multicast/broadcast address.  (Thanks matt@.)

Reorder ifnet ioctl operations so that driver ioctls may inherit
the functions of their "class"---ether_ioctl(), fddi_ioctl(), et
cetera---and the class ioctls may inherit from the generic ioctl,
ifioctl_common(), but both driver- and class-ioctls may override
the generic behavior.  Make network drivers share more code.

Distinguish a "factory" link-layer address from others for the
purposes of both protecting that address from deletion and computing
EUI64.

Return consistent, appropriate error codes from network drivers.

Improve readability.  KNF.

*** Details ***

In if_attach(), always initialize the interface ioctl routine,
ifnet->if_ioctl, if the driver has not already initialized it.
Delete if_ioctl == NULL tests everywhere else, because it cannot
happen.

In the ioctl routines of network interfaces, inherit common ioctl
behaviors by calling either ifioctl_common() or whichever ioctl
routine is appropriate for the class of interface---e.g., ether_ioctl()
for ethernets.

Stop (ab)using SIOCSIFADDR and start to use SIOCINITIFADDR.  In
the user->kernel interface, SIOCSIFADDR's argument was an ifreq,
but on the protocol->ifnet interface, SIOCSIFADDR's argument was
an ifaddr.  That was confusing, and it would work against me as I
make it possible for a network interface to overload most ioctls.
On the protocol->ifnet interface, replace SIOCSIFADDR with
SIOCINITIFADDR.  In ifioctl(), return EPERM if userland tries to
invoke SIOCINITIFADDR.

In ifioctl(), give the interface the first shot at handling most
interface ioctls, and give the protocol the second shot, instead
of the other way around. Finally, let compatibility code (COMPAT_OSOCK)
take a shot.

Pull device initialization out of switch statements under
SIOCINITIFADDR.  For example, pull ..._init() out of any switch
statement that looks like this:

        switch (...->sa_family) {
        case ...:
                ..._init();
                ...
                break;
        ...
        default:
                ..._init();
                ...
                break;
        }

Rewrite many if-else clauses that handle all permutations of IFF_UP
and IFF_RUNNING to use a switch statement,

        switch (x & (IFF_UP|IFF_RUNNING)) {
        case 0:
                ...
                break;
        case IFF_RUNNING:
                ...
                break;
        case IFF_UP:
                ...
                break;
        case IFF_UP|IFF_RUNNING:
                ...
                break;
        }

unifdef lots of code containing #ifdef FreeBSD, #ifdef NetBSD, and
#ifdef SIOCSIFMTU, especially in [fwip(4)](http://man.NetBSD.org/fwip.4) and in [ndis(4)](http://man.NetBSD.org/ndis.4).

In [ipw(4)](http://man.NetBSD.org/ipw.4), remove an if_set_sadl() call that is out of place.

In [nfe(4)](http://man.NetBSD.org/nfe.4), reuse the jumbo MTU logic in ether_ioctl().

Let ethernets register a callback for setting h/w state such as
promiscuous mode and the multicast filter in accord with a change
in the if_flags: ether_set_ifflags_cb() registers a callback that
returns ENETRESET if the caller should reset the ethernet by calling
if_init(), 0 on success, != 0 on failure.  Pull common code from
[ex(4)](http://man.NetBSD.org/ex.4), [gem(4)](http://man.NetBSD.org/gem.4), [nfe(4)](http://man.NetBSD.org/nfe.4), [sip(4)](http://man.NetBSD.org/sip.4), [tlp(4)](http://man.NetBSD.org/tlp.4), [vge(4)](http://man.NetBSD.org/vge.4) into ether_ioctl(),
and register if_flags callbacks for those drivers.

Return ENOTTY instead of EINVAL for inappropriate ioctls.  In
[zyd(4)](http://man.NetBSD.org/zyd.4), use ENXIO instead of ENOTTY to indicate that the device is
not any longer attached.

Add to if_set_sadl() a boolean 'factory' argument that indicates
whether a link-layer address was assigned by the factory or some
other source.  In a comment, recommend using the factory address
for generating an EUI64, and update in6_get_hw_ifid() to prefer a
factory address to any other link-layer address.

Add a routing message, RTM_LLINFO_UPD, that tells protocols to
update the binding of network-layer addresses to link-layer addresses.
Implement this message in IPv4 and IPv6 by sending a gratuitous
ARP or a neighbor advertisement, respectively.  Generate RTM_LLINFO_UPD
messages on a change of an interface's link-layer address.

In ether_ioctl(), do not let SIOCALIFADDR set a link-layer address
that is broadcast/multicast or equal to 00:00:00:00:00:00.

Make ether_ioctl() call ifioctl_common() to handle ioctls that it
does not understand.

In [gif(4)](http://man.NetBSD.org/gif.4), initialize if_softc and use it, instead of assuming that
the gif_softc and ifp overlap.

Let ifioctl_common() handle SIOCGIFADDR.

Sprinkle rtcache_invariants(), which checks on DIAGNOSTIC kernels
that certain invariants on a struct route are satisfied.

In [agr(4)](http://man.NetBSD.org/agr.4), rewrite agr_ioctl_filter() to be a bit more explicit
about the ioctls that we do not allow on an [agr(4)](http://man.NetBSD.org/agr.4) member interface.

bzero -> memset.  Delete unnecessary casts to void *.  Use
sockaddr_in_init() and sockaddr_in6_init().  Compare pointers with
NULL instead of "testing truth".  Replace some instances of (type
*)0 with NULL.  Change some K&R prototypes to ANSI C, and join
lines.

```

---

Revision **1.46.4.1**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.46.4.1;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.46.4.1;content-type=text%2Fplain), [markup](mld6.c?rev=1.46.4.1;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.46.4.1) - [select for diffs](mld6.c?r1=1.46.4.1#rev1.46.4.1)

*Sun Oct 19 22:17:52 2008 UTC* (16 years, 3 months ago) by *haad*

Branches: [haad-dm](./mld6.c?only_with_tag=haad-dm)

Diff to: previous 1.46: [preferred](mld6.c.diff?r1=1.46;r2=1.46.4.1), [colored](mld6.c.diff?r1=1.46;r2=1.46.4.1;f=h)

Changes since revision 1.46: +7 -7
lines
```

Sync with HEAD.

```

---

Revision **1.41.18.3**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.41.18.3;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.41.18.3;content-type=text%2Fplain), [markup](mld6.c?rev=1.41.18.3;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.41.18.3) - [select for diffs](mld6.c?r1=1.41.18.3#rev1.41.18.3)

*Sun Sep 28 10:40:59 2008 UTC* (16 years, 4 months ago) by *mjf*

Branches: [mjf-devfs2](./mld6.c?only_with_tag=mjf-devfs2)

Diff to: previous 1.41.18.2: [preferred](mld6.c.diff?r1=1.41.18.2;r2=1.41.18.3), [colored](mld6.c.diff?r1=1.41.18.2;r2=1.41.18.3;f=h); branchpoint 1.41: [preferred](mld6.c.diff?r1=1.41;r2=1.41.18.3), [colored](mld6.c.diff?r1=1.41;r2=1.41.18.3;f=h)

Changes since revision 1.41.18.2: +5 -5
lines
```

Sync with HEAD.

```

---

Revision **1.45.4.2**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.45.4.2;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.45.4.2;content-type=text%2Fplain), [markup](mld6.c?rev=1.45.4.2;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.45.4.2) - [select for diffs](mld6.c?r1=1.45.4.2#rev1.45.4.2)

*Thu Sep 18 04:37:01 2008 UTC* (16 years, 4 months ago) by *wrstuden*

Branches: [wrstuden-revivesa](./mld6.c?only_with_tag=wrstuden-revivesa)

Diff to: previous 1.45.4.1: [preferred](mld6.c.diff?r1=1.45.4.1;r2=1.45.4.2), [colored](mld6.c.diff?r1=1.45.4.1;r2=1.45.4.2;f=h); branchpoint 1.45: [preferred](mld6.c.diff?r1=1.45;r2=1.45.4.2), [colored](mld6.c.diff?r1=1.45;r2=1.45.4.2;f=h); next MAIN 1.46: [preferred](mld6.c.diff?r1=1.46;r2=1.45.4.2), [colored](mld6.c.diff?r1=1.46;r2=1.45.4.2;f=h)

Changes since revision 1.45.4.1: +7 -7
lines
```

Sync with wrstuden-revivesa-base-2.

```

---

Revision **1.36.8.1**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.36.8.1;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.36.8.1;content-type=text%2Fplain), [markup](mld6.c?rev=1.36.8.1;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.36.8.1) - [select for diffs](mld6.c?r1=1.36.8.1#rev1.36.8.1)

*Thu Sep 4 08:46:51 2008 UTC* (16 years, 4 months ago) by *skrll*

Branches: [wrstuden-fixsa](./mld6.c?only_with_tag=wrstuden-fixsa)

Diff to: previous 1.36: [preferred](mld6.c.diff?r1=1.36;r2=1.36.8.1), [colored](mld6.c.diff?r1=1.36;r2=1.36.8.1;f=h); next MAIN 1.37: [preferred](mld6.c.diff?r1=1.37;r2=1.36.8.1), [colored](mld6.c.diff?r1=1.37;r2=1.36.8.1;f=h)

Changes since revision 1.36: +7 -7
lines
```

Sync with netbsd-4.

```

---

Revision **1.36.12.1**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.36.12.1;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.36.12.1;content-type=text%2Fplain), [markup](mld6.c?rev=1.36.12.1;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.36.12.1) - [select for diffs](mld6.c?r1=1.36.12.1#rev1.36.12.1)

*Sat Aug 23 17:03:31 2008 UTC* (16 years, 5 months ago) by *bouyer*

Branches: [netbsd-4-0](./mld6.c?only_with_tag=netbsd-4-0)

CVS tags: [netbsd-4-0-1-RELEASE](./mld6.c?only_with_tag=netbsd-4-0-1-RELEASE)

Diff to: previous 1.36: [preferred](mld6.c.diff?r1=1.36;r2=1.36.12.1), [colored](mld6.c.diff?r1=1.36;r2=1.36.12.1;f=h); next MAIN 1.37: [preferred](mld6.c.diff?r1=1.37;r2=1.36.12.1), [colored](mld6.c.diff?r1=1.37;r2=1.36.12.1;f=h)

Changes since revision 1.36: +7 -7
lines
```

Pull up following revision(s) (requested by adrianp in ticket #1187):
	sys/netinet6/mld6.c: revision 1.47
Fix from matt@ for malformed ICMPv6 MLD query (CVE-2008-2464).

```

---

Revision **1.36.2.1**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.36.2.1;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.36.2.1;content-type=text%2Fplain), [markup](mld6.c?rev=1.36.2.1;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.36.2.1) - [select for diffs](mld6.c?r1=1.36.2.1#rev1.36.2.1)

*Sat Aug 23 17:02:31 2008 UTC* (16 years, 5 months ago) by *bouyer*

Branches: [netbsd-4](./mld6.c?only_with_tag=netbsd-4)

CVS tags: [wrstuden-fixsa-newbase](./mld6.c?only_with_tag=wrstuden-fixsa-newbase),
[wrstuden-fixsa-base](./mld6.c?only_with_tag=wrstuden-fixsa-base)

Diff to: previous 1.36: [preferred](mld6.c.diff?r1=1.36;r2=1.36.2.1), [colored](mld6.c.diff?r1=1.36;r2=1.36.2.1;f=h); next MAIN 1.37: [preferred](mld6.c.diff?r1=1.37;r2=1.36.2.1), [colored](mld6.c.diff?r1=1.37;r2=1.36.2.1;f=h)

Changes since revision 1.36: +7 -7
lines
```

Pull up following revision(s) (requested by adrianp in ticket #1187):
	sys/netinet6/mld6.c: revision 1.47
Fix from matt@ for malformed ICMPv6 MLD query (CVE-2008-2464).

```

---

Revision **1.47**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.47;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.47;content-type=text%2Fplain), [markup](mld6.c?rev=1.47;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.47) - [select for diffs](mld6.c?r1=1.47#rev1.47)

*Fri Aug 22 17:11:39 2008 UTC* (16 years, 5 months ago) by *adrianp*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

CVS tags: [wrstuden-revivesa-base-4](./mld6.c?only_with_tag=wrstuden-revivesa-base-4),
[wrstuden-revivesa-base-3](./mld6.c?only_with_tag=wrstuden-revivesa-base-3),
[wrstuden-revivesa-base-2](./mld6.c?only_with_tag=wrstuden-revivesa-base-2),
[netbsd-5-base](./mld6.c?only_with_tag=netbsd-5-base),
[netbsd-5-2-RELEASE](./mld6.c?only_with_tag=netbsd-5-2-RELEASE),
[netbsd-5-2-RC1](./mld6.c?only_with_tag=netbsd-5-2-RC1),
[netbsd-5-2-3-RELEASE](./mld6.c?only_with_tag=netbsd-5-2-3-RELEASE),
[netbsd-5-2-2-RELEASE](./mld6.c?only_with_tag=netbsd-5-2-2-RELEASE),
[netbsd-5-2-1-RELEASE](./mld6.c?only_with_tag=netbsd-5-2-1-RELEASE),
[netbsd-5-2](./mld6.c?only_with_tag=netbsd-5-2),
[netbsd-5-1-RELEASE](./mld6.c?only_with_tag=netbsd-5-1-RELEASE),
[netbsd-5-1-RC4](./mld6.c?only_with_tag=netbsd-5-1-RC4),
[netbsd-5-1-RC3](./mld6.c?only_with_tag=netbsd-5-1-RC3),
[netbsd-5-1-RC2](./mld6.c?only_with_tag=netbsd-5-1-RC2),
[netbsd-5-1-RC1](./mld6.c?only_with_tag=netbsd-5-1-RC1),
[netbsd-5-1-5-RELEASE](./mld6.c?only_with_tag=netbsd-5-1-5-RELEASE),
[netbsd-5-1-4-RELEASE](./mld6.c?only_with_tag=netbsd-5-1-4-RELEASE),
[netbsd-5-1-3-RELEASE](./mld6.c?only_with_tag=netbsd-5-1-3-RELEASE),
[netbsd-5-1-2-RELEASE](./mld6.c?only_with_tag=netbsd-5-1-2-RELEASE),
[netbsd-5-1-1-RELEASE](./mld6.c?only_with_tag=netbsd-5-1-1-RELEASE),
[netbsd-5-1](./mld6.c?only_with_tag=netbsd-5-1),
[netbsd-5-0-RELEASE](./mld6.c?only_with_tag=netbsd-5-0-RELEASE),
[netbsd-5-0-RC4](./mld6.c?only_with_tag=netbsd-5-0-RC4),
[netbsd-5-0-RC3](./mld6.c?only_with_tag=netbsd-5-0-RC3),
[netbsd-5-0-RC2](./mld6.c?only_with_tag=netbsd-5-0-RC2),
[netbsd-5-0-RC1](./mld6.c?only_with_tag=netbsd-5-0-RC1),
[netbsd-5-0-2-RELEASE](./mld6.c?only_with_tag=netbsd-5-0-2-RELEASE),
[netbsd-5-0-1-RELEASE](./mld6.c?only_with_tag=netbsd-5-0-1-RELEASE),
[netbsd-5-0](./mld6.c?only_with_tag=netbsd-5-0),
[netbsd-5](./mld6.c?only_with_tag=netbsd-5),
[matt-nb5-pq3-base](./mld6.c?only_with_tag=matt-nb5-pq3-base),
[matt-nb5-pq3](./mld6.c?only_with_tag=matt-nb5-pq3),
[matt-nb5-mips64-u2-k2-k4-k7-k8-k9](./mld6.c?only_with_tag=matt-nb5-mips64-u2-k2-k4-k7-k8-k9),
[matt-nb5-mips64-u1-k1-k5](./mld6.c?only_with_tag=matt-nb5-mips64-u1-k1-k5),
[matt-nb5-mips64-premerge-20101231](./mld6.c?only_with_tag=matt-nb5-mips64-premerge-20101231),
[matt-nb5-mips64-premerge-20091211](./mld6.c?only_with_tag=matt-nb5-mips64-premerge-20091211),
[matt-nb5-mips64-k15](./mld6.c?only_with_tag=matt-nb5-mips64-k15),
[matt-nb5-mips64](./mld6.c?only_with_tag=matt-nb5-mips64),
[matt-nb4-mips64-k7-u2a-k9b](./mld6.c?only_with_tag=matt-nb4-mips64-k7-u2a-k9b),
[matt-mips64-base2](./mld6.c?only_with_tag=matt-mips64-base2),
[haad-dm-base1](./mld6.c?only_with_tag=haad-dm-base1)

Branch point for: [nick-hppapmap](./mld6.c?only_with_tag=nick-hppapmap)

Diff to: previous 1.46: [preferred](mld6.c.diff?r1=1.46;r2=1.47), [colored](mld6.c.diff?r1=1.46;r2=1.47;f=h)

Changes since revision 1.46: +7 -7
lines
```

Fix from matt@ for malformed ICMPv6 MLD query (CVE-2008-2464).

```

---

Revision **1.45.4.1**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.45.4.1;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.45.4.1;content-type=text%2Fplain), [markup](mld6.c?rev=1.45.4.1;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.45.4.1) - [select for diffs](mld6.c?r1=1.45.4.1#rev1.45.4.1)

*Mon Jun 23 04:31:59 2008 UTC* (16 years, 7 months ago) by *wrstuden*

Branches: [wrstuden-revivesa](./mld6.c?only_with_tag=wrstuden-revivesa)

Diff to: previous 1.45: [preferred](mld6.c.diff?r1=1.45;r2=1.45.4.1), [colored](mld6.c.diff?r1=1.45;r2=1.45.4.1;f=h)

Changes since revision 1.45: +4 -6
lines
```

Sync w/ -current. 34 merge conflicts to follow.

```

---

Revision **1.44.2.2**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.44.2.2;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.44.2.2;content-type=text%2Fplain), [markup](mld6.c?rev=1.44.2.2;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.44.2.2) - [select for diffs](mld6.c?r1=1.44.2.2#rev1.44.2.2)

*Wed Jun 4 02:05:48 2008 UTC* (16 years, 7 months ago) by *yamt*

Branches: [yamt-pf42](./mld6.c?only_with_tag=yamt-pf42)

Diff to: previous 1.44.2.1: [preferred](mld6.c.diff?r1=1.44.2.1;r2=1.44.2.2), [colored](mld6.c.diff?r1=1.44.2.1;r2=1.44.2.2;f=h); branchpoint 1.44: [preferred](mld6.c.diff?r1=1.44;r2=1.44.2.2), [colored](mld6.c.diff?r1=1.44;r2=1.44.2.2;f=h); next MAIN 1.45: [preferred](mld6.c.diff?r1=1.45;r2=1.44.2.2), [colored](mld6.c.diff?r1=1.45;r2=1.44.2.2;f=h)

Changes since revision 1.44.2.1: +4 -6
lines
```

sync with head

```

---

Revision **1.41.18.2**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.41.18.2;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.41.18.2;content-type=text%2Fplain), [markup](mld6.c?rev=1.41.18.2;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.41.18.2) - [select for diffs](mld6.c?r1=1.41.18.2#rev1.41.18.2)

*Mon Jun 2 13:24:27 2008 UTC* (16 years, 7 months ago) by *mjf*

Branches: [mjf-devfs2](./mld6.c?only_with_tag=mjf-devfs2)

Diff to: previous 1.41.18.1: [preferred](mld6.c.diff?r1=1.41.18.1;r2=1.41.18.2), [colored](mld6.c.diff?r1=1.41.18.1;r2=1.41.18.2;f=h); branchpoint 1.41: [preferred](mld6.c.diff?r1=1.41;r2=1.41.18.2), [colored](mld6.c.diff?r1=1.41;r2=1.41.18.2;f=h)

Changes since revision 1.41.18.1: +12 -9
lines
```

Sync with HEAD.

```

---

Revision **1.46**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.46;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.46;content-type=text%2Fplain), [markup](mld6.c?rev=1.46;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.46) - [select for diffs](mld6.c?r1=1.46#rev1.46)

*Thu May 22 01:06:40 2008 UTC* (16 years, 8 months ago) by *dyoung*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

CVS tags: [yamt-pf42-base4](./mld6.c?only_with_tag=yamt-pf42-base4),
[yamt-pf42-base3](./mld6.c?only_with_tag=yamt-pf42-base3),
[wrstuden-revivesa-base-1](./mld6.c?only_with_tag=wrstuden-revivesa-base-1),
[wrstuden-revivesa-base](./mld6.c?only_with_tag=wrstuden-revivesa-base),
[simonb-wapbl-nbase](./mld6.c?only_with_tag=simonb-wapbl-nbase),
[simonb-wapbl-base](./mld6.c?only_with_tag=simonb-wapbl-base),
[simonb-wapbl](./mld6.c?only_with_tag=simonb-wapbl)

Branch point for: [haad-dm](./mld6.c?only_with_tag=haad-dm)

Diff to: previous 1.45: [preferred](mld6.c.diff?r1=1.45;r2=1.46), [colored](mld6.c.diff?r1=1.45;r2=1.46;f=h)

Changes since revision 1.45: +4 -6
lines
```

Don't cast to void * unnecessarily.

```

---

Revision **1.44.2.1**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.44.2.1;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.44.2.1;content-type=text%2Fplain), [markup](mld6.c?rev=1.44.2.1;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.44.2.1) - [select for diffs](mld6.c?r1=1.44.2.1#rev1.44.2.1)

*Sun May 18 12:35:35 2008 UTC* (16 years, 8 months ago) by *yamt*

Branches: [yamt-pf42](./mld6.c?only_with_tag=yamt-pf42)

Diff to: previous 1.44: [preferred](mld6.c.diff?r1=1.44;r2=1.44.2.1), [colored](mld6.c.diff?r1=1.44;r2=1.44.2.1;f=h)

Changes since revision 1.44: +9 -5
lines
```

sync with head.

```

---

Revision **1.45**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.45;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.45;content-type=text%2Fplain), [markup](mld6.c?rev=1.45;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.45) - [select for diffs](mld6.c?r1=1.45#rev1.45)

*Thu Apr 24 11:38:38 2008 UTC* (16 years, 9 months ago) by *ad*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

CVS tags: [yamt-pf42-base2](./mld6.c?only_with_tag=yamt-pf42-base2),
[yamt-nfs-mp-base2](./mld6.c?only_with_tag=yamt-nfs-mp-base2),
[yamt-nfs-mp-base](./mld6.c?only_with_tag=yamt-nfs-mp-base),
[hpcarm-cleanup-nbase](./mld6.c?only_with_tag=hpcarm-cleanup-nbase)

Branch point for: [yamt-nfs-mp](./mld6.c?only_with_tag=yamt-nfs-mp),
[wrstuden-revivesa](./mld6.c?only_with_tag=wrstuden-revivesa)

Diff to: previous 1.44: [preferred](mld6.c.diff?r1=1.44;r2=1.45), [colored](mld6.c.diff?r1=1.44;r2=1.45;f=h)

Changes since revision 1.44: +9 -5
lines
```

Merge the socket locking patch:

- Socket layer becomes MP safe.
- Unix protocols become MP safe.
- Allows protocol processing interrupts to safely block on locks.
- Fixes a number of race conditions.

With much feedback from matt@ and plunky@.

```

---

Revision **1.44**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.44;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.44;content-type=text%2Fplain), [markup](mld6.c?rev=1.44;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.44) - [select for diffs](mld6.c?r1=1.44#rev1.44)

*Tue Apr 15 03:57:04 2008 UTC* (16 years, 9 months ago) by *thorpej*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

CVS tags: [yamt-pf42-baseX](./mld6.c?only_with_tag=yamt-pf42-baseX),
[yamt-pf42-base](./mld6.c?only_with_tag=yamt-pf42-base)

Branch point for: [yamt-pf42](./mld6.c?only_with_tag=yamt-pf42)

Diff to: previous 1.43: [preferred](mld6.c.diff?r1=1.43;r2=1.44), [colored](mld6.c.diff?r1=1.43;r2=1.44;f=h)

Changes since revision 1.43: +5 -4
lines
```

Make ip6 and icmp6 stats per-cpu.

```

---

Revision **1.43**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.43;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.43;content-type=text%2Fplain), [markup](mld6.c?rev=1.43;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.43) - [select for diffs](mld6.c?r1=1.43#rev1.43)

*Tue Apr 8 15:04:35 2008 UTC* (16 years, 9 months ago) by *thorpej*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

Diff to: previous 1.42: [preferred](mld6.c.diff?r1=1.42;r2=1.43), [colored](mld6.c.diff?r1=1.42;r2=1.43;f=h)

Changes since revision 1.42: +4 -4
lines
```

Change ICMP6 stats from a structure to an array of uint64_t's.

Note: This is ABI-compatible with the old icmp6stat structure; old netstat
binaries will continue to work properly.

```

---

Revision **1.41.18.1**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.41.18.1;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.41.18.1;content-type=text%2Fplain), [markup](mld6.c?rev=1.41.18.1;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.41.18.1) - [select for diffs](mld6.c?r1=1.41.18.1#rev1.41.18.1)

*Thu Apr 3 12:43:09 2008 UTC* (16 years, 9 months ago) by *mjf*

Branches: [mjf-devfs2](./mld6.c?only_with_tag=mjf-devfs2)

Diff to: previous 1.41: [preferred](mld6.c.diff?r1=1.41;r2=1.41.18.1), [colored](mld6.c.diff?r1=1.41;r2=1.41.18.1;f=h)

Changes since revision 1.41: +3 -3
lines
```

Sync with HEAD.

```

---

Revision **1.41.14.1**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.41.14.1;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.41.14.1;content-type=text%2Fplain), [markup](mld6.c?rev=1.41.14.1;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.41.14.1) - [select for diffs](mld6.c?r1=1.41.14.1#rev1.41.14.1)

*Mon Mar 24 07:16:24 2008 UTC* (16 years, 10 months ago) by *keiichi*

Branches: [keiichi-mipv6](./mld6.c?only_with_tag=keiichi-mipv6)

Diff to: previous 1.41: [preferred](mld6.c.diff?r1=1.41;r2=1.41.14.1), [colored](mld6.c.diff?r1=1.41;r2=1.41.14.1;f=h); next MAIN 1.42: [preferred](mld6.c.diff?r1=1.42;r2=1.41.14.1), [colored](mld6.c.diff?r1=1.42;r2=1.41.14.1;f=h)

Changes since revision 1.41: +3 -3
lines
```

sync with head.

```

---

Revision **1.39.8.2**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.39.8.2;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.39.8.2;content-type=text%2Fplain), [markup](mld6.c?rev=1.39.8.2;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.39.8.2) - [select for diffs](mld6.c?r1=1.39.8.2#rev1.39.8.2)

*Sun Mar 23 02:05:07 2008 UTC* (16 years, 10 months ago) by *matt*

Branches: [matt-armv6](./mld6.c?only_with_tag=matt-armv6)

Diff to: previous 1.39.8.1: [preferred](mld6.c.diff?r1=1.39.8.1;r2=1.39.8.2), [colored](mld6.c.diff?r1=1.39.8.1;r2=1.39.8.2;f=h); branchpoint 1.39: [preferred](mld6.c.diff?r1=1.39;r2=1.39.8.2), [colored](mld6.c.diff?r1=1.39;r2=1.39.8.2;f=h); next MAIN 1.40: [preferred](mld6.c.diff?r1=1.40;r2=1.39.8.2), [colored](mld6.c.diff?r1=1.40;r2=1.39.8.2;f=h)

Changes since revision 1.39.8.1: +3 -3
lines
```

sync with HEAD

```

---

Revision **1.27.4.5**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.27.4.5;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.27.4.5;content-type=text%2Fplain), [markup](mld6.c?rev=1.27.4.5;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.27.4.5) - [select for diffs](mld6.c?r1=1.27.4.5#rev1.27.4.5)

*Mon Mar 17 09:15:42 2008 UTC* (16 years, 10 months ago) by *yamt*

Branches: [yamt-lazymbuf](./mld6.c?only_with_tag=yamt-lazymbuf)

Diff to: previous 1.27.4.4: [preferred](mld6.c.diff?r1=1.27.4.4;r2=1.27.4.5), [colored](mld6.c.diff?r1=1.27.4.4;r2=1.27.4.5;f=h); branchpoint 1.27: [preferred](mld6.c.diff?r1=1.27;r2=1.27.4.5), [colored](mld6.c.diff?r1=1.27;r2=1.27.4.5;f=h); next MAIN 1.28: [preferred](mld6.c.diff?r1=1.28;r2=1.27.4.5), [colored](mld6.c.diff?r1=1.28;r2=1.27.4.5;f=h)

Changes since revision 1.27.4.4: +3 -3
lines
```

sync with head.

```

---

Revision **1.42**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.42;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.42;content-type=text%2Fplain), [markup](mld6.c?rev=1.42;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.42) - [select for diffs](mld6.c?r1=1.42#rev1.42)

*Wed Feb 27 19:40:56 2008 UTC* (16 years, 11 months ago) by *matt*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

CVS tags: [yamt-lazymbuf-base15](./mld6.c?only_with_tag=yamt-lazymbuf-base15),
[yamt-lazymbuf-base14](./mld6.c?only_with_tag=yamt-lazymbuf-base14),
[matt-armv6-nbase](./mld6.c?only_with_tag=matt-armv6-nbase),
[keiichi-mipv6-nbase](./mld6.c?only_with_tag=keiichi-mipv6-nbase),
[keiichi-mipv6-base](./mld6.c?only_with_tag=keiichi-mipv6-base),
[ad-socklock-base1](./mld6.c?only_with_tag=ad-socklock-base1)

Diff to: previous 1.41: [preferred](mld6.c.diff?r1=1.41;r2=1.42), [colored](mld6.c.diff?r1=1.41;r2=1.42;f=h)

Changes since revision 1.41: +3 -3
lines
```

Convert to ansi definitions from old-style definitons.
Remember that func() is not ansi, func(void) is.

```

---

Revision **1.39.8.1**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.39.8.1;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.39.8.1;content-type=text%2Fplain), [markup](mld6.c?rev=1.39.8.1;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.39.8.1) - [select for diffs](mld6.c?r1=1.39.8.1#rev1.39.8.1)

*Tue Nov 6 23:34:07 2007 UTC* (17 years, 2 months ago) by *matt*

Branches: [matt-armv6](./mld6.c?only_with_tag=matt-armv6)

CVS tags: [matt-armv6-prevmlocking](./mld6.c?only_with_tag=matt-armv6-prevmlocking)

Diff to: previous 1.39: [preferred](mld6.c.diff?r1=1.39;r2=1.39.8.1), [colored](mld6.c.diff?r1=1.39;r2=1.39.8.1;f=h)

Changes since revision 1.39: +11 -28
lines
```

sync with HEAD

```

---

Revision **1.27.4.4**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.27.4.4;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.27.4.4;content-type=text%2Fplain), [markup](mld6.c?rev=1.27.4.4;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.27.4.4) - [select for diffs](mld6.c?r1=1.27.4.4#rev1.27.4.4)

*Sat Oct 27 11:36:14 2007 UTC* (17 years, 3 months ago) by *yamt*

Branches: [yamt-lazymbuf](./mld6.c?only_with_tag=yamt-lazymbuf)

Diff to: previous 1.27.4.3: [preferred](mld6.c.diff?r1=1.27.4.3;r2=1.27.4.4), [colored](mld6.c.diff?r1=1.27.4.3;r2=1.27.4.4;f=h); branchpoint 1.27: [preferred](mld6.c.diff?r1=1.27;r2=1.27.4.4), [colored](mld6.c.diff?r1=1.27;r2=1.27.4.4;f=h)

Changes since revision 1.27.4.3: +9 -20
lines
```

sync with head.

```

---

Revision **1.39.6.2**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.39.6.2;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.39.6.2;content-type=text%2Fplain), [markup](mld6.c?rev=1.39.6.2;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.39.6.2) - [select for diffs](mld6.c?r1=1.39.6.2#rev1.39.6.2)

*Fri Oct 26 15:49:09 2007 UTC* (17 years, 3 months ago) by *joerg*

Branches: [jmcneill-pm](./mld6.c?only_with_tag=jmcneill-pm)

Diff to: previous 1.39.6.1: [preferred](mld6.c.diff?r1=1.39.6.1;r2=1.39.6.2), [colored](mld6.c.diff?r1=1.39.6.1;r2=1.39.6.2;f=h); branchpoint 1.39: [preferred](mld6.c.diff?r1=1.39;r2=1.39.6.2), [colored](mld6.c.diff?r1=1.39;r2=1.39.6.2;f=h); next MAIN 1.40: [preferred](mld6.c.diff?r1=1.40;r2=1.39.6.2), [colored](mld6.c.diff?r1=1.40;r2=1.39.6.2;f=h)

Changes since revision 1.39.6.1: +9 -20
lines
```

Sync with HEAD.

Follow the merge of pmap.c on i386 and amd64 and move
pmap_init_tmp_pgtbl into arch/x86/x86/pmap.c. Modify the ACPI wakeup
code to restore CR4 before jumping back into kernel space as the large
page option might cover that.

```

---

Revision **1.37.2.4**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.37.2.4;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.37.2.4;content-type=text%2Fplain), [markup](mld6.c?rev=1.37.2.4;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.37.2.4) - [select for diffs](mld6.c?r1=1.37.2.4#rev1.37.2.4)

*Tue Oct 23 20:17:22 2007 UTC* (17 years, 3 months ago) by *ad*

Branches: [vmlocking](./mld6.c?only_with_tag=vmlocking)

Diff to: previous 1.37.2.3: [preferred](mld6.c.diff?r1=1.37.2.3;r2=1.37.2.4), [colored](mld6.c.diff?r1=1.37.2.3;r2=1.37.2.4;f=h); branchpoint 1.37: [preferred](mld6.c.diff?r1=1.37;r2=1.37.2.4), [colored](mld6.c.diff?r1=1.37;r2=1.37.2.4;f=h); next MAIN 1.38: [preferred](mld6.c.diff?r1=1.38;r2=1.37.2.4), [colored](mld6.c.diff?r1=1.38;r2=1.37.2.4;f=h)

Changes since revision 1.37.2.3: +9 -20
lines
```

Sync with head.

```

---

Revision **1.40.2.1**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.40.2.1;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.40.2.1;content-type=text%2Fplain), [markup](mld6.c?rev=1.40.2.1;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.40.2.1) - [select for diffs](mld6.c?r1=1.40.2.1#rev1.40.2.1)

*Thu Oct 18 08:33:13 2007 UTC* (17 years, 3 months ago) by *yamt*

Branches: [yamt-x86pmap](./mld6.c?only_with_tag=yamt-x86pmap)

Diff to: previous 1.40: [preferred](mld6.c.diff?r1=1.40;r2=1.40.2.1), [colored](mld6.c.diff?r1=1.40;r2=1.40.2.1;f=h); next MAIN 1.41: [preferred](mld6.c.diff?r1=1.41;r2=1.40.2.1), [colored](mld6.c.diff?r1=1.41;r2=1.40.2.1;f=h)

Changes since revision 1.40: +9 -20
lines
```

sync with head.

```

---

Revision **1.41**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.41;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.41;content-type=text%2Fplain), [markup](mld6.c?rev=1.41;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.41) - [select for diffs](mld6.c?r1=1.41#rev1.41)

*Tue Oct 16 20:31:33 2007 UTC* (17 years, 3 months ago) by *joerg*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

CVS tags: [yamt-x86pmap-base4](./mld6.c?only_with_tag=yamt-x86pmap-base4),
[yamt-kmem-base3](./mld6.c?only_with_tag=yamt-kmem-base3),
[yamt-kmem-base2](./mld6.c?only_with_tag=yamt-kmem-base2),
[yamt-kmem-base](./mld6.c?only_with_tag=yamt-kmem-base),
[yamt-kmem](./mld6.c?only_with_tag=yamt-kmem),
[vmlocking2-base3](./mld6.c?only_with_tag=vmlocking2-base3),
[vmlocking2-base2](./mld6.c?only_with_tag=vmlocking2-base2),
[vmlocking2-base1](./mld6.c?only_with_tag=vmlocking2-base1),
[vmlocking2](./mld6.c?only_with_tag=vmlocking2),
[vmlocking-nbase](./mld6.c?only_with_tag=vmlocking-nbase),
[reinoud-bufcleanup-nbase](./mld6.c?only_with_tag=reinoud-bufcleanup-nbase),
[reinoud-bufcleanup-base](./mld6.c?only_with_tag=reinoud-bufcleanup-base),
[nick-net80211-sync-base](./mld6.c?only_with_tag=nick-net80211-sync-base),
[nick-net80211-sync](./mld6.c?only_with_tag=nick-net80211-sync),
[mjf-devfs-base](./mld6.c?only_with_tag=mjf-devfs-base),
[mjf-devfs](./mld6.c?only_with_tag=mjf-devfs),
[matt-armv6-base](./mld6.c?only_with_tag=matt-armv6-base),
[jmcneill-pm-base](./mld6.c?only_with_tag=jmcneill-pm-base),
[jmcneill-base](./mld6.c?only_with_tag=jmcneill-base),
[hpcarm-cleanup-base](./mld6.c?only_with_tag=hpcarm-cleanup-base),
[cube-autoconf-base](./mld6.c?only_with_tag=cube-autoconf-base),
[cube-autoconf](./mld6.c?only_with_tag=cube-autoconf),
[bouyer-xeni386-nbase](./mld6.c?only_with_tag=bouyer-xeni386-nbase),
[bouyer-xeni386-merge1](./mld6.c?only_with_tag=bouyer-xeni386-merge1),
[bouyer-xeni386-base](./mld6.c?only_with_tag=bouyer-xeni386-base),
[bouyer-xeni386](./mld6.c?only_with_tag=bouyer-xeni386),
[bouyer-xenamd64-base2](./mld6.c?only_with_tag=bouyer-xenamd64-base2),
[bouyer-xenamd64-base](./mld6.c?only_with_tag=bouyer-xenamd64-base),
[bouyer-xenamd64](./mld6.c?only_with_tag=bouyer-xenamd64)

Branch point for: [mjf-devfs2](./mld6.c?only_with_tag=mjf-devfs2),
[keiichi-mipv6](./mld6.c?only_with_tag=keiichi-mipv6)

Diff to: previous 1.40: [preferred](mld6.c.diff?r1=1.40;r2=1.41), [colored](mld6.c.diff?r1=1.40;r2=1.41;f=h)

Changes since revision 1.40: +9 -20
lines
```

Inline callout_t in struct in6_multi. This fixes a number of possible
memory leaks. Explicitly destroy the callout before freeing it.
Use callout_setfunc/callout_schedule instead of repeating it for
callout_reset.

Bump NetBSD version to 4.99.34 for kvm users.

```

---

Revision **1.37.2.3**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.37.2.3;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.37.2.3;content-type=text%2Fplain), [markup](mld6.c?rev=1.37.2.3;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.37.2.3) - [select for diffs](mld6.c?r1=1.37.2.3#rev1.37.2.3)

*Tue Oct 9 13:44:56 2007 UTC* (17 years, 3 months ago) by *ad*

Branches: [vmlocking](./mld6.c?only_with_tag=vmlocking)

Diff to: previous 1.37.2.2: [preferred](mld6.c.diff?r1=1.37.2.2;r2=1.37.2.3), [colored](mld6.c.diff?r1=1.37.2.2;r2=1.37.2.3;f=h); branchpoint 1.37: [preferred](mld6.c.diff?r1=1.37;r2=1.37.2.3), [colored](mld6.c.diff?r1=1.37;r2=1.37.2.3;f=h)

Changes since revision 1.37.2.2: +4 -10
lines
```

Sync with head.

```

---

Revision **1.39.6.1**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.39.6.1;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.39.6.1;content-type=text%2Fplain), [markup](mld6.c?rev=1.39.6.1;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.39.6.1) - [select for diffs](mld6.c?r1=1.39.6.1#rev1.39.6.1)

*Mon Sep 3 16:49:08 2007 UTC* (17 years, 4 months ago) by *jmcneill*

Branches: [jmcneill-pm](./mld6.c?only_with_tag=jmcneill-pm)

Diff to: previous 1.39: [preferred](mld6.c.diff?r1=1.39;r2=1.39.6.1), [colored](mld6.c.diff?r1=1.39;r2=1.39.6.1;f=h)

Changes since revision 1.39: +4 -10
lines
```

Sync with HEAD.

```

---

Revision **1.27.4.3**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.27.4.3;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.27.4.3;content-type=text%2Fplain), [markup](mld6.c?rev=1.27.4.3;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.27.4.3) - [select for diffs](mld6.c?r1=1.27.4.3#rev1.27.4.3)

*Mon Sep 3 14:43:40 2007 UTC* (17 years, 4 months ago) by *yamt*

Branches: [yamt-lazymbuf](./mld6.c?only_with_tag=yamt-lazymbuf)

Diff to: previous 1.27.4.2: [preferred](mld6.c.diff?r1=1.27.4.2;r2=1.27.4.3), [colored](mld6.c.diff?r1=1.27.4.2;r2=1.27.4.3;f=h); branchpoint 1.27: [preferred](mld6.c.diff?r1=1.27;r2=1.27.4.3), [colored](mld6.c.diff?r1=1.27;r2=1.27.4.3;f=h)

Changes since revision 1.27.4.2: +27 -54
lines
```

sync with head.

```

---

Revision **1.39.2.1**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.39.2.1;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.39.2.1;content-type=text%2Fplain), [markup](mld6.c?rev=1.39.2.1;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.39.2.1) - [select for diffs](mld6.c?r1=1.39.2.1#rev1.39.2.1)

*Mon Sep 3 10:23:48 2007 UTC* (17 years, 4 months ago) by *skrll*

Branches: [nick-csl-alignment](./mld6.c?only_with_tag=nick-csl-alignment)

Diff to: previous 1.39: [preferred](mld6.c.diff?r1=1.39;r2=1.39.2.1), [colored](mld6.c.diff?r1=1.39;r2=1.39.2.1;f=h); next MAIN 1.40: [preferred](mld6.c.diff?r1=1.40;r2=1.39.2.1), [colored](mld6.c.diff?r1=1.40;r2=1.39.2.1;f=h)

Changes since revision 1.39: +4 -10
lines
```

Sync with HEAD.

```

---

Revision **1.40**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.40;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.40;content-type=text%2Fplain), [markup](mld6.c?rev=1.40;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.40) - [select for diffs](mld6.c?r1=1.40#rev1.40)

*Fri Aug 31 21:40:41 2007 UTC* (17 years, 4 months ago) by *dyoung*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

CVS tags: [yamt-x86pmap-base3](./mld6.c?only_with_tag=yamt-x86pmap-base3),
[yamt-x86pmap-base2](./mld6.c?only_with_tag=yamt-x86pmap-base2),
[yamt-x86pmap-base](./mld6.c?only_with_tag=yamt-x86pmap-base),
[vmlocking-base](./mld6.c?only_with_tag=vmlocking-base),
[nick-csl-alignment-base5](./mld6.c?only_with_tag=nick-csl-alignment-base5)

Branch point for: [yamt-x86pmap](./mld6.c?only_with_tag=yamt-x86pmap)

Diff to: previous 1.39: [preferred](mld6.c.diff?r1=1.39;r2=1.40), [colored](mld6.c.diff?r1=1.39;r2=1.40;f=h)

Changes since revision 1.39: +4 -10
lines
```

Use sockaddr_in6_init().

```

---

Revision **1.37.4.1**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.37.4.1;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.37.4.1;content-type=text%2Fplain), [markup](mld6.c?rev=1.37.4.1;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.37.4.1) - [select for diffs](mld6.c?r1=1.37.4.1#rev1.37.4.1)

*Wed Jul 11 20:11:47 2007 UTC* (17 years, 6 months ago) by *mjf*

Branches: [mjf-ufs-trans](./mld6.c?only_with_tag=mjf-ufs-trans)

Diff to: previous 1.37: [preferred](mld6.c.diff?r1=1.37;r2=1.37.4.1), [colored](mld6.c.diff?r1=1.37;r2=1.37.4.1;f=h); next MAIN 1.38: [preferred](mld6.c.diff?r1=1.38;r2=1.37.4.1), [colored](mld6.c.diff?r1=1.38;r2=1.37.4.1;f=h)

Changes since revision 1.37: +22 -43
lines
```

Sync with head.

```

---

Revision **1.39**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.39;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.39;content-type=text%2Fplain), [markup](mld6.c?rev=1.39;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.39) - [select for diffs](mld6.c?r1=1.39#rev1.39)

*Mon Jul 9 21:11:13 2007 UTC* (17 years, 6 months ago) by *ad*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

CVS tags: [nick-csl-alignment-base](./mld6.c?only_with_tag=nick-csl-alignment-base),
[mjf-ufs-trans-base](./mld6.c?only_with_tag=mjf-ufs-trans-base),
[matt-mips64-base](./mld6.c?only_with_tag=matt-mips64-base),
[matt-mips64](./mld6.c?only_with_tag=matt-mips64),
[hpcarm-cleanup](./mld6.c?only_with_tag=hpcarm-cleanup)

Branch point for: [nick-csl-alignment](./mld6.c?only_with_tag=nick-csl-alignment),
[matt-armv6](./mld6.c?only_with_tag=matt-armv6),
[jmcneill-pm](./mld6.c?only_with_tag=jmcneill-pm)

Diff to: previous 1.38: [preferred](mld6.c.diff?r1=1.38;r2=1.39), [colored](mld6.c.diff?r1=1.38;r2=1.39;f=h)

Changes since revision 1.38: +3 -3
lines
```

Merge some of the less invasive changes from the vmlocking branch:

- kthread, callout, devsw API changes
- select()/poll() improvements
- miscellaneous MT safety improvements

```

---

Revision **1.37.2.2**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.37.2.2;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.37.2.2;content-type=text%2Fplain), [markup](mld6.c?rev=1.37.2.2;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.37.2.2) - [select for diffs](mld6.c?r1=1.37.2.2#rev1.37.2.2)

*Sun Jul 1 21:50:53 2007 UTC* (17 years, 6 months ago) by *ad*

Branches: [vmlocking](./mld6.c?only_with_tag=vmlocking)

Diff to: previous 1.37.2.1: [preferred](mld6.c.diff?r1=1.37.2.1;r2=1.37.2.2), [colored](mld6.c.diff?r1=1.37.2.1;r2=1.37.2.2;f=h); branchpoint 1.37: [preferred](mld6.c.diff?r1=1.37;r2=1.37.2.2), [colored](mld6.c.diff?r1=1.37;r2=1.37.2.2;f=h)

Changes since revision 1.37.2.1: +3 -3
lines
```

Adapt to callout API change.

```

---

Revision **1.37.2.1**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.37.2.1;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.37.2.1;content-type=text%2Fplain), [markup](mld6.c?rev=1.37.2.1;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.37.2.1) - [select for diffs](mld6.c?r1=1.37.2.1#rev1.37.2.1)

*Fri Jun 8 14:17:57 2007 UTC* (17 years, 7 months ago) by *ad*

Branches: [vmlocking](./mld6.c?only_with_tag=vmlocking)

Diff to: previous 1.37: [preferred](mld6.c.diff?r1=1.37;r2=1.37.2.1), [colored](mld6.c.diff?r1=1.37;r2=1.37.2.1;f=h)

Changes since revision 1.37: +21 -42
lines
```

Sync with head.

```

---

Revision **1.38**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.38;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.38;content-type=text%2Fplain), [markup](mld6.c?rev=1.38;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.38) - [select for diffs](mld6.c?r1=1.38#rev1.38)

*Wed May 23 17:15:03 2007 UTC* (17 years, 8 months ago) by *christos*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

Diff to: previous 1.37: [preferred](mld6.c.diff?r1=1.37;r2=1.38), [colored](mld6.c.diff?r1=1.37;r2=1.38;f=h)

Changes since revision 1.37: +21 -42
lines
```

Ansify + add a few comments, from Karl SjÃ¶dahl

```

---

Revision **1.36.4.1**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.36.4.1;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.36.4.1;content-type=text%2Fplain), [markup](mld6.c?rev=1.36.4.1;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.36.4.1) - [select for diffs](mld6.c?r1=1.36.4.1#rev1.36.4.1)

*Mon Mar 12 05:59:59 2007 UTC* (17 years, 10 months ago) by *rmind*

Branches: [yamt-idlelwp](./mld6.c?only_with_tag=yamt-idlelwp)

Diff to: previous 1.36: [preferred](mld6.c.diff?r1=1.36;r2=1.36.4.1), [colored](mld6.c.diff?r1=1.36;r2=1.36.4.1;f=h); next MAIN 1.37: [preferred](mld6.c.diff?r1=1.37;r2=1.36.4.1), [colored](mld6.c.diff?r1=1.37;r2=1.36.4.1;f=h)

Changes since revision 1.36: +5 -5
lines
```

Sync with HEAD.

```

---

Revision **1.37**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.37;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.37;content-type=text%2Fplain), [markup](mld6.c?rev=1.37;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.37) - [select for diffs](mld6.c?r1=1.37#rev1.37)

*Sun Mar 4 06:03:27 2007 UTC* (17 years, 10 months ago) by *christos*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

CVS tags: [yamt-idlelwp-base8](./mld6.c?only_with_tag=yamt-idlelwp-base8),
[thorpej-atomic-base](./mld6.c?only_with_tag=thorpej-atomic-base),
[thorpej-atomic](./mld6.c?only_with_tag=thorpej-atomic),
[reinoud-bufcleanup](./mld6.c?only_with_tag=reinoud-bufcleanup)

Branch point for: [vmlocking](./mld6.c?only_with_tag=vmlocking),
[mjf-ufs-trans](./mld6.c?only_with_tag=mjf-ufs-trans)

Diff to: previous 1.36: [preferred](mld6.c.diff?r1=1.36;r2=1.37), [colored](mld6.c.diff?r1=1.36;r2=1.37;f=h)

Changes since revision 1.36: +5 -5
lines
```

Kill caddr_t; there will be some MI fallout, but it will be fixed shortly.

```

---

Revision **1.32.12.2**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.32.12.2;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.32.12.2;content-type=text%2Fplain), [markup](mld6.c?rev=1.32.12.2;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.32.12.2) - [select for diffs](mld6.c?r1=1.32.12.2#rev1.32.12.2)

*Fri Jan 12 01:04:15 2007 UTC* (18 years ago) by *ad*

Branches: [newlock2](./mld6.c?only_with_tag=newlock2)

Diff to: previous 1.32.12.1: [preferred](mld6.c.diff?r1=1.32.12.1;r2=1.32.12.2), [colored](mld6.c.diff?r1=1.32.12.1;r2=1.32.12.2;f=h); branchpoint 1.32: [preferred](mld6.c.diff?r1=1.32;r2=1.32.12.2), [colored](mld6.c.diff?r1=1.32;r2=1.32.12.2;f=h); next MAIN 1.33: [preferred](mld6.c.diff?r1=1.33;r2=1.32.12.2), [colored](mld6.c.diff?r1=1.33;r2=1.32.12.2;f=h)

Changes since revision 1.32.12.1: +43 -43
lines
```

Sync with head.

```

---

Revision **1.27.4.2**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.27.4.2;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.27.4.2;content-type=text%2Fplain), [markup](mld6.c?rev=1.27.4.2;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.27.4.2) - [select for diffs](mld6.c?r1=1.27.4.2#rev1.27.4.2)

*Sat Dec 30 20:50:39 2006 UTC* (18 years ago) by *yamt*

Branches: [yamt-lazymbuf](./mld6.c?only_with_tag=yamt-lazymbuf)

Diff to: previous 1.27.4.1: [preferred](mld6.c.diff?r1=1.27.4.1;r2=1.27.4.2), [colored](mld6.c.diff?r1=1.27.4.1;r2=1.27.4.2;f=h); branchpoint 1.27: [preferred](mld6.c.diff?r1=1.27;r2=1.27.4.2), [colored](mld6.c.diff?r1=1.27;r2=1.27.4.2;f=h)

Changes since revision 1.27.4.1: +45 -48
lines
```

sync with head.

```

---

Revision **1.32.14.2**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.32.14.2;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.32.14.2;content-type=text%2Fplain), [markup](mld6.c?rev=1.32.14.2;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.32.14.2) - [select for diffs](mld6.c?r1=1.32.14.2#rev1.32.14.2)

*Sun Dec 10 07:19:16 2006 UTC* (18 years, 1 month ago) by *yamt*

Branches: [yamt-splraiseipl](./mld6.c?only_with_tag=yamt-splraiseipl)

Diff to: previous 1.32.14.1: [preferred](mld6.c.diff?r1=1.32.14.1;r2=1.32.14.2), [colored](mld6.c.diff?r1=1.32.14.1;r2=1.32.14.2;f=h); branchpoint 1.32: [preferred](mld6.c.diff?r1=1.32;r2=1.32.14.2), [colored](mld6.c.diff?r1=1.32;r2=1.32.14.2;f=h); next MAIN 1.33: [preferred](mld6.c.diff?r1=1.33;r2=1.32.14.2), [colored](mld6.c.diff?r1=1.33;r2=1.32.14.2;f=h)

Changes since revision 1.32.14.1: +44 -44
lines
```

sync with head.

```

---

Revision **1.36**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.36;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.36;content-type=text%2Fplain), [markup](mld6.c?rev=1.36;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.36) - [select for diffs](mld6.c?r1=1.36#rev1.36)

*Wed Nov 29 03:05:12 2006 UTC* (18 years, 2 months ago) by *dyoung*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

CVS tags: [yamt-splraiseipl-base5](./mld6.c?only_with_tag=yamt-splraiseipl-base5),
[yamt-splraiseipl-base4](./mld6.c?only_with_tag=yamt-splraiseipl-base4),
[yamt-splraiseipl-base3](./mld6.c?only_with_tag=yamt-splraiseipl-base3),
[wrstuden-fixsa-base-1](./mld6.c?only_with_tag=wrstuden-fixsa-base-1),
[post-newlock2-merge](./mld6.c?only_with_tag=post-newlock2-merge),
[newlock2-nbase](./mld6.c?only_with_tag=newlock2-nbase),
[newlock2-base](./mld6.c?only_with_tag=newlock2-base),
[netbsd-4-base](./mld6.c?only_with_tag=netbsd-4-base),
[netbsd-4-0-RELEASE](./mld6.c?only_with_tag=netbsd-4-0-RELEASE),
[netbsd-4-0-RC5](./mld6.c?only_with_tag=netbsd-4-0-RC5),
[netbsd-4-0-RC4](./mld6.c?only_with_tag=netbsd-4-0-RC4),
[netbsd-4-0-RC3](./mld6.c?only_with_tag=netbsd-4-0-RC3),
[netbsd-4-0-RC2](./mld6.c?only_with_tag=netbsd-4-0-RC2),
[netbsd-4-0-RC1](./mld6.c?only_with_tag=netbsd-4-0-RC1),
[matt-nb4-arm-base](./mld6.c?only_with_tag=matt-nb4-arm-base),
[matt-nb4-arm](./mld6.c?only_with_tag=matt-nb4-arm),
[ad-audiomp-base](./mld6.c?only_with_tag=ad-audiomp-base),
[ad-audiomp](./mld6.c?only_with_tag=ad-audiomp)

Branch point for: [yamt-idlelwp](./mld6.c?only_with_tag=yamt-idlelwp),
[wrstuden-fixsa](./mld6.c?only_with_tag=wrstuden-fixsa),
[netbsd-4-0](./mld6.c?only_with_tag=netbsd-4-0),
[netbsd-4](./mld6.c?only_with_tag=netbsd-4)

Diff to: previous 1.35: [preferred](mld6.c.diff?r1=1.35;r2=1.36), [colored](mld6.c.diff?r1=1.35;r2=1.36;f=h)

Changes since revision 1.35: +18 -19
lines
```

Fix a spelling error.

Annotate a memory leak.

When copying one multicast address list to another, IFAREF before IFAFREE
to protect against using an ifaddr after (accidentally) freeing it.

LIST_REMOVE() a multicast address from its old list before
LIST_INSERT_HEAD() on its new list.

Do not count on in6_delmulti() removing its multicast-record argument
from the multicast address list that the record belongs to, because
clearly that is not what it (always) does.

```

---

Revision **1.35**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.35;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.35;content-type=text%2Fplain), [markup](mld6.c?rev=1.35;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.35) - [select for diffs](mld6.c?r1=1.35#rev1.35)

*Mon Nov 20 04:26:22 2006 UTC* (18 years, 2 months ago) by *dyoung*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

Diff to: previous 1.34: [preferred](mld6.c.diff?r1=1.34;r2=1.35), [colored](mld6.c.diff?r1=1.34;r2=1.35;f=h)

Changes since revision 1.34: +40 -39
lines
```

Cosmetic: use LIST_ macros.  Shorten some staircases.

Defensive programming: set an in6_multi's ifaddr reference to NULL
after releasing it, to protect against reuse.

```

---

Revision **1.32.12.1**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.32.12.1;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.32.12.1;content-type=text%2Fplain), [markup](mld6.c?rev=1.32.12.1;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.32.12.1) - [select for diffs](mld6.c?r1=1.32.12.1#rev1.32.12.1)

*Sat Nov 18 21:39:37 2006 UTC* (18 years, 2 months ago) by *ad*

Branches: [newlock2](./mld6.c?only_with_tag=newlock2)

Diff to: previous 1.32: [preferred](mld6.c.diff?r1=1.32;r2=1.32.12.1), [colored](mld6.c.diff?r1=1.32;r2=1.32.12.1;f=h)

Changes since revision 1.32: +4 -7
lines
```

Sync with head.

```

---

Revision **1.34**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.34;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.34;content-type=text%2Fplain), [markup](mld6.c?rev=1.34;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.34) - [select for diffs](mld6.c?r1=1.34#rev1.34)

*Thu Nov 16 01:33:45 2006 UTC* (18 years, 2 months ago) by *christos*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

Diff to: previous 1.33: [preferred](mld6.c.diff?r1=1.33;r2=1.34), [colored](mld6.c.diff?r1=1.33;r2=1.34;f=h)

Changes since revision 1.33: +3 -3
lines
```

__unused removal on arguments; approved by core.

```

---

Revision **1.32.14.1**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.32.14.1;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.32.14.1;content-type=text%2Fplain), [markup](mld6.c?rev=1.32.14.1;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.32.14.1) - [select for diffs](mld6.c?r1=1.32.14.1#rev1.32.14.1)

*Sun Oct 22 06:07:35 2006 UTC* (18 years, 3 months ago) by *yamt*

Branches: [yamt-splraiseipl](./mld6.c?only_with_tag=yamt-splraiseipl)

Diff to: previous 1.32: [preferred](mld6.c.diff?r1=1.32;r2=1.32.14.1), [colored](mld6.c.diff?r1=1.32;r2=1.32.14.1;f=h)

Changes since revision 1.32: +4 -7
lines
```

sync with head

```

---

Revision **1.33**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.33;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.33;content-type=text%2Fplain), [markup](mld6.c?rev=1.33;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.33) - [select for diffs](mld6.c?r1=1.33#rev1.33)

*Thu Oct 12 01:32:39 2006 UTC* (18 years, 3 months ago) by *christos*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

CVS tags: [yamt-splraiseipl-base2](./mld6.c?only_with_tag=yamt-splraiseipl-base2)

Diff to: previous 1.32: [preferred](mld6.c.diff?r1=1.32;r2=1.33), [colored](mld6.c.diff?r1=1.32;r2=1.33;f=h)

Changes since revision 1.32: +4 -7
lines
```

- sprinkle __unused on function decls.
- fix a couple of unused bugs
- no more -Wno-unused for i386

```

---

Revision **1.29.2.1**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.29.2.1;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.29.2.1;content-type=text%2Fplain), [markup](mld6.c?rev=1.29.2.1;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.29.2.1) - [select for diffs](mld6.c?r1=1.29.2.1#rev1.29.2.1)

*Sat Sep 9 02:58:55 2006 UTC* (18 years, 4 months ago) by *rpaulo*

Branches: [rpaulo-netinet-merge-pcb](./mld6.c?only_with_tag=rpaulo-netinet-merge-pcb)

Diff to: previous 1.29: [preferred](mld6.c.diff?r1=1.29;r2=1.29.2.1), [colored](mld6.c.diff?r1=1.29;r2=1.29.2.1;f=h); next MAIN 1.30: [preferred](mld6.c.diff?r1=1.30;r2=1.29.2.1), [colored](mld6.c.diff?r1=1.30;r2=1.29.2.1;f=h)

Changes since revision 1.29: +553 -134
lines
```

sync with head

```

---

Revision **1.27.4.1**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.27.4.1;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.27.4.1;content-type=text%2Fplain), [markup](mld6.c?rev=1.27.4.1;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.27.4.1) - [select for diffs](mld6.c?r1=1.27.4.1#rev1.27.4.1)

*Wed Jun 21 15:11:09 2006 UTC* (18 years, 7 months ago) by *yamt*

Branches: [yamt-lazymbuf](./mld6.c?only_with_tag=yamt-lazymbuf)

Diff to: previous 1.27: [preferred](mld6.c.diff?r1=1.27;r2=1.27.4.1), [colored](mld6.c.diff?r1=1.27;r2=1.27.4.1;f=h)

Changes since revision 1.27: +602 -170
lines
```

sync with head.

```

---

Revision **1.29.4.1**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.29.4.1;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.29.4.1;content-type=text%2Fplain), [markup](mld6.c?rev=1.29.4.1;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.29.4.1) - [select for diffs](mld6.c?r1=1.29.4.1#rev1.29.4.1)

*Sat Apr 22 11:40:12 2006 UTC* (18 years, 9 months ago) by *simonb*

Branches: [simonb-timecounters](./mld6.c?only_with_tag=simonb-timecounters)

CVS tags: [simonb-timcounters-final](./mld6.c?only_with_tag=simonb-timcounters-final)

Diff to: previous 1.29: [preferred](mld6.c.diff?r1=1.29;r2=1.29.4.1), [colored](mld6.c.diff?r1=1.29;r2=1.29.4.1;f=h); next MAIN 1.30: [preferred](mld6.c.diff?r1=1.30;r2=1.29.4.1), [colored](mld6.c.diff?r1=1.30;r2=1.29.4.1;f=h)

Changes since revision 1.29: +553 -134
lines
```

Sync with head.

```

---

Revision **1.30.2.1**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.30.2.1;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.30.2.1;content-type=text%2Fplain), [markup](mld6.c?rev=1.30.2.1;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.30.2.1) - [select for diffs](mld6.c?r1=1.30.2.1#rev1.30.2.1)

*Mon Mar 13 09:07:39 2006 UTC* (18 years, 10 months ago) by *yamt*

Branches: [yamt-pdpolicy](./mld6.c?only_with_tag=yamt-pdpolicy)

Diff to: previous 1.30: [preferred](mld6.c.diff?r1=1.30;r2=1.30.2.1), [colored](mld6.c.diff?r1=1.30;r2=1.30.2.1;f=h); next MAIN 1.31: [preferred](mld6.c.diff?r1=1.31;r2=1.30.2.1), [colored](mld6.c.diff?r1=1.31;r2=1.30.2.1;f=h)

Changes since revision 1.30: +552 -133
lines
```

sync with head.

```

---

Revision **1.32**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.32;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.32;content-type=text%2Fplain), [markup](mld6.c?rev=1.32;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.32) - [select for diffs](mld6.c?r1=1.32#rev1.32)

*Mon Mar 6 20:33:52 2006 UTC* (18 years, 10 months ago) by *rpaulo*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

CVS tags: [yamt-splraiseipl-base](./mld6.c?only_with_tag=yamt-splraiseipl-base),
[yamt-pdpolicy-base9](./mld6.c?only_with_tag=yamt-pdpolicy-base9),
[yamt-pdpolicy-base8](./mld6.c?only_with_tag=yamt-pdpolicy-base8),
[yamt-pdpolicy-base7](./mld6.c?only_with_tag=yamt-pdpolicy-base7),
[yamt-pdpolicy-base6](./mld6.c?only_with_tag=yamt-pdpolicy-base6),
[yamt-pdpolicy-base5](./mld6.c?only_with_tag=yamt-pdpolicy-base5),
[yamt-pdpolicy-base4](./mld6.c?only_with_tag=yamt-pdpolicy-base4),
[yamt-pdpolicy-base3](./mld6.c?only_with_tag=yamt-pdpolicy-base3),
[yamt-pdpolicy-base2](./mld6.c?only_with_tag=yamt-pdpolicy-base2),
[simonb-timecounters-base](./mld6.c?only_with_tag=simonb-timecounters-base),
[rpaulo-netinet-merge-pcb-base](./mld6.c?only_with_tag=rpaulo-netinet-merge-pcb-base),
[peter-altq-base](./mld6.c?only_with_tag=peter-altq-base),
[peter-altq](./mld6.c?only_with_tag=peter-altq),
[gdamore-uart-base](./mld6.c?only_with_tag=gdamore-uart-base),
[gdamore-uart](./mld6.c?only_with_tag=gdamore-uart),
[elad-kernelauth-base](./mld6.c?only_with_tag=elad-kernelauth-base),
[elad-kernelauth](./mld6.c?only_with_tag=elad-kernelauth),
[chap-midi-nbase](./mld6.c?only_with_tag=chap-midi-nbase),
[chap-midi-base](./mld6.c?only_with_tag=chap-midi-base),
[chap-midi](./mld6.c?only_with_tag=chap-midi),
[abandoned-netbsd-4-base](./mld6.c?only_with_tag=abandoned-netbsd-4-base),
[abandoned-netbsd-4](./mld6.c?only_with_tag=abandoned-netbsd-4)

Branch point for: [yamt-splraiseipl](./mld6.c?only_with_tag=yamt-splraiseipl),
[newlock2](./mld6.c?only_with_tag=newlock2)

Diff to: previous 1.31: [preferred](mld6.c.diff?r1=1.31;r2=1.32), [colored](mld6.c.diff?r1=1.31;r2=1.32;f=h)

Changes since revision 1.31: +8 -8
lines
```

Rename local variables called delay that shadow the delay() decl.
Pointed out by Robert Swindells.

```

---

Revision **1.31**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.31;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.31;content-type=text%2Fplain), [markup](mld6.c?rev=1.31;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.31) - [select for diffs](mld6.c?r1=1.31#rev1.31)

*Sun Mar 5 23:47:08 2006 UTC* (18 years, 10 months ago) by *rpaulo*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

Diff to: previous 1.30: [preferred](mld6.c.diff?r1=1.30;r2=1.31), [colored](mld6.c.diff?r1=1.30;r2=1.31;f=h)

Changes since revision 1.30: +552 -133
lines
```

NDP-related improvements:
        RFC4191
	- supports host-side router-preference

	RFC3542
	- if DAD fails on a interface, disables IPv6 operation on the
          interface
	- don't advertise MLD report before DAD finishes

	Others
	- fixes integer overflow for valid and preferred lifetimes
	- improves timer granularity for MLD, using callout-timer.
	- reflects rtadvd's IPv6 host variable information into kernel
	  (router only)
	- adds a sysctl option to enable/disable pMTUd for multicast
          packets
	- performs NUD on PPP/GRE interface by default
	- Redirect works regardless of ip6_accept_rtadv
	- removes RFC1885-related code

From the KAME project via SUZUKI Shinsuke.
Reviewed by core.

```

---

Revision **1.30**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.30;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.30;content-type=text%2Fplain), [markup](mld6.c?rev=1.30;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.30) - [select for diffs](mld6.c?r1=1.30#rev1.30)

*Fri Mar 3 14:07:06 2006 UTC* (18 years, 10 months ago) by *rpaulo*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

CVS tags: [yamt-pdpolicy-base](./mld6.c?only_with_tag=yamt-pdpolicy-base)

Branch point for: [yamt-pdpolicy](./mld6.c?only_with_tag=yamt-pdpolicy)

Diff to: previous 1.29: [preferred](mld6.c.diff?r1=1.29;r2=1.30), [colored](mld6.c.diff?r1=1.29;r2=1.30;f=h)

Changes since revision 1.29: +3 -3
lines
```

Fix typos in comments.

From: the KAME project via SUZUKI Shinsuke.

```

---

Revision **1.28.2.1**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.28.2.1;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.28.2.1;content-type=text%2Fplain), [markup](mld6.c?rev=1.28.2.1;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.28.2.1) - [select for diffs](mld6.c?r1=1.28.2.1#rev1.28.2.1)

*Wed Feb 1 14:52:42 2006 UTC* (18 years, 11 months ago) by *yamt*

Branches: [yamt-uio\_vmspace](./mld6.c?only_with_tag=yamt-uio_vmspace)

Diff to: previous 1.28: [preferred](mld6.c.diff?r1=1.28;r2=1.28.2.1), [colored](mld6.c.diff?r1=1.28;r2=1.28.2.1;f=h); next MAIN 1.29: [preferred](mld6.c.diff?r1=1.29;r2=1.28.2.1), [colored](mld6.c.diff?r1=1.29;r2=1.28.2.1;f=h)

Changes since revision 1.28: +54 -41
lines
```

sync with head.

```

---

Revision **1.29**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.29;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.29;content-type=text%2Fplain), [markup](mld6.c?rev=1.29;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.29) - [select for diffs](mld6.c?r1=1.29#rev1.29)

*Sat Jan 21 00:15:36 2006 UTC* (19 years ago) by *rpaulo*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

CVS tags: [yamt-uio\_vmspace-base5](./mld6.c?only_with_tag=yamt-uio_vmspace-base5)

Branch point for: [simonb-timecounters](./mld6.c?only_with_tag=simonb-timecounters),
[rpaulo-netinet-merge-pcb](./mld6.c?only_with_tag=rpaulo-netinet-merge-pcb)

Diff to: previous 1.28: [preferred](mld6.c.diff?r1=1.28;r2=1.29), [colored](mld6.c.diff?r1=1.28;r2=1.29;f=h)

Changes since revision 1.28: +54 -41
lines
```

Better support of IPv6 scoped addresses.

- most of the kernel code will not care about the actual encoding of
  scope zone IDs and won't touch "s6_addr16[1]" directly.
- similarly, most of the kernel code will not care about link-local
  scoped addresses as a special case.
- scope boundary check will be stricter.  For example, the current
  *BSD code allows a packet with src=::1 and dst=(some global IPv6
  address) to be sent outside of the node, if the application do:
    s = socket(AF_INET6);
    bind(s, "::1");
    sendto(s, some_global_IPv6_addr);
  This is clearly wrong, since ::1 is only meaningful within a single
  node, but the current implementation of the *BSD kernel cannot
  reject this attempt.
- and, while there, don't try to remove the ff02::/32 interface route
  entry in in6_ifdetach() as it's already gone.

This also includes some level of support for the standard source
address selection algorithm defined in RFC3484, which will be
completed on in the future.

From the KAME project via JINMEI Tatuya.
Approved by core@.

```

---

Revision **1.28**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.28;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.28;content-type=text%2Fplain), [markup](mld6.c?rev=1.28;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.28) - [select for diffs](mld6.c?r1=1.28#rev1.28)

*Sun Dec 11 12:25:02 2005 UTC* (19 years, 1 month ago) by *christos*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

Branch point for: [yamt-uio\_vmspace](./mld6.c?only_with_tag=yamt-uio_vmspace)

Diff to: previous 1.27: [preferred](mld6.c.diff?r1=1.27;r2=1.28), [colored](mld6.c.diff?r1=1.27;r2=1.28;f=h)

Changes since revision 1.27: +2 -2
lines
```

merge ktrace-lwp.

```

---

Revision **1.26.8.1**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.26.8.1;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.26.8.1;content-type=text%2Fplain), [markup](mld6.c?rev=1.26.8.1;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.26.8.1) - [select for diffs](mld6.c?r1=1.26.8.1#rev1.26.8.1)

*Fri Apr 29 11:29:34 2005 UTC* (19 years, 9 months ago) by *kent*

Branches: [kent-audio2](./mld6.c?only_with_tag=kent-audio2)

Diff to: previous 1.26: [preferred](mld6.c.diff?r1=1.26;r2=1.26.8.1), [colored](mld6.c.diff?r1=1.26;r2=1.26.8.1;f=h); next MAIN 1.27: [preferred](mld6.c.diff?r1=1.27;r2=1.26.8.1), [colored](mld6.c.diff?r1=1.27;r2=1.26.8.1;f=h)

Changes since revision 1.26: +3 -3
lines
```

sync with -current

```

---

Revision **1.26.10.1**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.26.10.1;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.26.10.1;content-type=text%2Fplain), [markup](mld6.c?rev=1.26.10.1;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.26.10.1) - [select for diffs](mld6.c?r1=1.26.10.1#rev1.26.10.1)

*Sat Mar 19 08:36:41 2005 UTC* (19 years, 10 months ago) by *yamt*

Branches: [yamt-km](./mld6.c?only_with_tag=yamt-km)

Diff to: previous 1.26: [preferred](mld6.c.diff?r1=1.26;r2=1.26.10.1), [colored](mld6.c.diff?r1=1.26;r2=1.26.10.1;f=h); next MAIN 1.27: [preferred](mld6.c.diff?r1=1.27;r2=1.26.10.1), [colored](mld6.c.diff?r1=1.27;r2=1.26.10.1;f=h)

Changes since revision 1.26: +3 -3
lines
```

sync with head.  xen and whitespace.  xen part is not finished.

```

---

Revision **1.22.2.4**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.22.2.4;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.22.2.4;content-type=text%2Fplain), [markup](mld6.c?rev=1.22.2.4;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.22.2.4) - [select for diffs](mld6.c?r1=1.22.2.4#rev1.22.2.4)

*Fri Mar 4 16:53:31 2005 UTC* (19 years, 10 months ago) by *skrll*

Branches: [ktrace-lwp](./mld6.c?only_with_tag=ktrace-lwp)

Diff to: previous 1.22.2.3: [preferred](mld6.c.diff?r1=1.22.2.3;r2=1.22.2.4), [colored](mld6.c.diff?r1=1.22.2.3;r2=1.22.2.4;f=h); next MAIN 1.23: [preferred](mld6.c.diff?r1=1.23;r2=1.22.2.4), [colored](mld6.c.diff?r1=1.23;r2=1.22.2.4;f=h)

Changes since revision 1.22.2.3: +3 -3
lines
```

Sync with HEAD.

Hi Perry!

```

---

Revision **1.27**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.27;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.27;content-type=text%2Fplain), [markup](mld6.c?rev=1.27;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.27) - [select for diffs](mld6.c?r1=1.27#rev1.27)

*Sat Feb 26 22:45:12 2005 UTC* (19 years, 11 months ago) by *perry*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

CVS tags: [yamt-vop-base3](./mld6.c?only_with_tag=yamt-vop-base3),
[yamt-vop-base2](./mld6.c?only_with_tag=yamt-vop-base2),
[yamt-vop-base](./mld6.c?only_with_tag=yamt-vop-base),
[yamt-vop](./mld6.c?only_with_tag=yamt-vop),
[yamt-readahead-pervnode](./mld6.c?only_with_tag=yamt-readahead-pervnode),
[yamt-readahead-perfile](./mld6.c?only_with_tag=yamt-readahead-perfile),
[yamt-readahead-base3](./mld6.c?only_with_tag=yamt-readahead-base3),
[yamt-readahead-base2](./mld6.c?only_with_tag=yamt-readahead-base2),
[yamt-readahead-base](./mld6.c?only_with_tag=yamt-readahead-base),
[yamt-readahead](./mld6.c?only_with_tag=yamt-readahead),
[yamt-km-base4](./mld6.c?only_with_tag=yamt-km-base4),
[yamt-km-base3](./mld6.c?only_with_tag=yamt-km-base3),
[thorpej-vnode-attr-base](./mld6.c?only_with_tag=thorpej-vnode-attr-base),
[thorpej-vnode-attr](./mld6.c?only_with_tag=thorpej-vnode-attr),
[netbsd-3-base](./mld6.c?only_with_tag=netbsd-3-base),
[netbsd-3-1-RELEASE](./mld6.c?only_with_tag=netbsd-3-1-RELEASE),
[netbsd-3-1-RC4](./mld6.c?only_with_tag=netbsd-3-1-RC4),
[netbsd-3-1-RC3](./mld6.c?only_with_tag=netbsd-3-1-RC3),
[netbsd-3-1-RC2](./mld6.c?only_with_tag=netbsd-3-1-RC2),
[netbsd-3-1-RC1](./mld6.c?only_with_tag=netbsd-3-1-RC1),
[netbsd-3-1-1-RELEASE](./mld6.c?only_with_tag=netbsd-3-1-1-RELEASE),
[netbsd-3-1](./mld6.c?only_with_tag=netbsd-3-1),
[netbsd-3-0-RELEASE](./mld6.c?only_with_tag=netbsd-3-0-RELEASE),
[netbsd-3-0-RC6](./mld6.c?only_with_tag=netbsd-3-0-RC6),
[netbsd-3-0-RC5](./mld6.c?only_with_tag=netbsd-3-0-RC5),
[netbsd-3-0-RC4](./mld6.c?only_with_tag=netbsd-3-0-RC4),
[netbsd-3-0-RC3](./mld6.c?only_with_tag=netbsd-3-0-RC3),
[netbsd-3-0-RC2](./mld6.c?only_with_tag=netbsd-3-0-RC2),
[netbsd-3-0-RC1](./mld6.c?only_with_tag=netbsd-3-0-RC1),
[netbsd-3-0-3-RELEASE](./mld6.c?only_with_tag=netbsd-3-0-3-RELEASE),
[netbsd-3-0-2-RELEASE](./mld6.c?only_with_tag=netbsd-3-0-2-RELEASE),
[netbsd-3-0-1-RELEASE](./mld6.c?only_with_tag=netbsd-3-0-1-RELEASE),
[netbsd-3-0](./mld6.c?only_with_tag=netbsd-3-0),
[netbsd-3](./mld6.c?only_with_tag=netbsd-3),
[ktrace-lwp-base](./mld6.c?only_with_tag=ktrace-lwp-base),
[kent-audio2-base](./mld6.c?only_with_tag=kent-audio2-base)

Branch point for: [yamt-lazymbuf](./mld6.c?only_with_tag=yamt-lazymbuf)

Diff to: previous 1.26: [preferred](mld6.c.diff?r1=1.26;r2=1.27), [colored](mld6.c.diff?r1=1.26;r2=1.27;f=h)

Changes since revision 1.26: +3 -3
lines
```

nuke trailing whitespace

```

---

Revision **1.22.2.3**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.22.2.3;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.22.2.3;content-type=text%2Fplain), [markup](mld6.c?rev=1.22.2.3;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.22.2.3) - [select for diffs](mld6.c?r1=1.22.2.3#rev1.22.2.3)

*Tue Sep 21 13:37:36 2004 UTC* (20 years, 4 months ago) by *skrll*

Branches: [ktrace-lwp](./mld6.c?only_with_tag=ktrace-lwp)

Diff to: previous 1.22.2.2: [preferred](mld6.c.diff?r1=1.22.2.2;r2=1.22.2.3), [colored](mld6.c.diff?r1=1.22.2.2;r2=1.22.2.3;f=h)

Changes since revision 1.22.2.2: +2 -2
lines
```

Fix the sync with head I botched.

```

---

Revision **1.22.2.2**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.22.2.2;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.22.2.2;content-type=text%2Fplain), [markup](mld6.c?rev=1.22.2.2;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.22.2.2) - [select for diffs](mld6.c?r1=1.22.2.2#rev1.22.2.2)

*Sat Sep 18 14:55:15 2004 UTC* (20 years, 4 months ago) by *skrll*

Branches: [ktrace-lwp](./mld6.c?only_with_tag=ktrace-lwp)

Diff to: previous 1.22.2.1: [preferred](mld6.c.diff?r1=1.22.2.1;r2=1.22.2.2), [colored](mld6.c.diff?r1=1.22.2.1;r2=1.22.2.2;f=h)

Changes since revision 1.22.2.1: +0 -0
lines
```

Sync with HEAD.

```

---

Revision **1.22.2.1**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.22.2.1;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.22.2.1;content-type=text%2Fplain), [markup](mld6.c?rev=1.22.2.1;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.22.2.1) - [select for diffs](mld6.c?r1=1.22.2.1#rev1.22.2.1)

*Tue Aug 3 10:55:14 2004 UTC* (20 years, 5 months ago) by *skrll*

Branches: [ktrace-lwp](./mld6.c?only_with_tag=ktrace-lwp)

Diff to: previous 1.22: [preferred](mld6.c.diff?r1=1.22;r2=1.22.2.1), [colored](mld6.c.diff?r1=1.22;r2=1.22.2.1;f=h)

Changes since revision 1.22: +37 -7
lines
```

Sync with HEAD

```

---

Revision **1.26**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.26;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.26;content-type=text%2Fplain), [markup](mld6.c?rev=1.26;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.26) - [select for diffs](mld6.c?r1=1.26#rev1.26)

*Sun Mar 28 08:28:50 2004 UTC* (20 years, 10 months ago) by *christos*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

CVS tags: [yamt-km-base2](./mld6.c?only_with_tag=yamt-km-base2),
[yamt-km-base](./mld6.c?only_with_tag=yamt-km-base),
[netbsd-2-base](./mld6.c?only_with_tag=netbsd-2-base),
[netbsd-2-1-RELEASE](./mld6.c?only_with_tag=netbsd-2-1-RELEASE),
[netbsd-2-1-RC6](./mld6.c?only_with_tag=netbsd-2-1-RC6),
[netbsd-2-1-RC5](./mld6.c?only_with_tag=netbsd-2-1-RC5),
[netbsd-2-1-RC4](./mld6.c?only_with_tag=netbsd-2-1-RC4),
[netbsd-2-1-RC3](./mld6.c?only_with_tag=netbsd-2-1-RC3),
[netbsd-2-1-RC2](./mld6.c?only_with_tag=netbsd-2-1-RC2),
[netbsd-2-1-RC1](./mld6.c?only_with_tag=netbsd-2-1-RC1),
[netbsd-2-1](./mld6.c?only_with_tag=netbsd-2-1),
[netbsd-2-0-base](./mld6.c?only_with_tag=netbsd-2-0-base),
[netbsd-2-0-RELEASE](./mld6.c?only_with_tag=netbsd-2-0-RELEASE),
[netbsd-2-0-RC5](./mld6.c?only_with_tag=netbsd-2-0-RC5),
[netbsd-2-0-RC4](./mld6.c?only_with_tag=netbsd-2-0-RC4),
[netbsd-2-0-RC3](./mld6.c?only_with_tag=netbsd-2-0-RC3),
[netbsd-2-0-RC2](./mld6.c?only_with_tag=netbsd-2-0-RC2),
[netbsd-2-0-RC1](./mld6.c?only_with_tag=netbsd-2-0-RC1),
[netbsd-2-0-3-RELEASE](./mld6.c?only_with_tag=netbsd-2-0-3-RELEASE),
[netbsd-2-0-2-RELEASE](./mld6.c?only_with_tag=netbsd-2-0-2-RELEASE),
[netbsd-2-0-1-RELEASE](./mld6.c?only_with_tag=netbsd-2-0-1-RELEASE),
[netbsd-2-0](./mld6.c?only_with_tag=netbsd-2-0),
[netbsd-2](./mld6.c?only_with_tag=netbsd-2),
[kent-audio1-beforemerge](./mld6.c?only_with_tag=kent-audio1-beforemerge),
[kent-audio1-base](./mld6.c?only_with_tag=kent-audio1-base),
[kent-audio1](./mld6.c?only_with_tag=kent-audio1)

Branch point for: [yamt-km](./mld6.c?only_with_tag=yamt-km),
[kent-audio2](./mld6.c?only_with_tag=kent-audio2)

Diff to: previous 1.25: [preferred](mld6.c.diff?r1=1.25;r2=1.26), [colored](mld6.c.diff?r1=1.25;r2=1.26;f=h)

Changes since revision 1.25: +2 -5
lines
```

no need for splsoftnet, because the caller does it already.

```

---

Revision **1.18.10.1**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.18.10.1;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.18.10.1;content-type=text%2Fplain), [markup](mld6.c?rev=1.18.10.1;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.18.10.1) - [select for diffs](mld6.c?r1=1.18.10.1#rev1.18.10.1)

*Thu Oct 2 20:21:48 2003 UTC* (21 years, 3 months ago) by *tron*

Branches: [netbsd-1-6](./mld6.c?only_with_tag=netbsd-1-6)

CVS tags: [netbsd-1-6-PATCH002-RELEASE](./mld6.c?only_with_tag=netbsd-1-6-PATCH002-RELEASE),
[netbsd-1-6-PATCH002-RC4](./mld6.c?only_with_tag=netbsd-1-6-PATCH002-RC4),
[netbsd-1-6-PATCH002-RC3](./mld6.c?only_with_tag=netbsd-1-6-PATCH002-RC3),
[netbsd-1-6-PATCH002-RC2](./mld6.c?only_with_tag=netbsd-1-6-PATCH002-RC2),
[netbsd-1-6-PATCH002-RC1](./mld6.c?only_with_tag=netbsd-1-6-PATCH002-RC1),
[netbsd-1-6-PATCH002](./mld6.c?only_with_tag=netbsd-1-6-PATCH002)

Diff to: previous 1.18: [preferred](mld6.c.diff?r1=1.18;r2=1.18.10.1), [colored](mld6.c.diff?r1=1.18;r2=1.18.10.1;f=h); next MAIN 1.19: [preferred](mld6.c.diff?r1=1.19;r2=1.18.10.1), [colored](mld6.c.diff?r1=1.19;r2=1.18.10.1;f=h)

Changes since revision 1.18: +30 -19
lines
```

Pull up revision 1.22 via patch (requested by itojun in ticket #1491):
- sync up MLD declaration with RFC3542 (s/MLD6/MLD/)
part of advanced API update (RFC2292 -> 3542).

```

---

Revision **1.25**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.25;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.25;content-type=text%2Fplain), [markup](mld6.c?rev=1.25;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.25) - [select for diffs](mld6.c?r1=1.25#rev1.25)

*Fri Aug 22 21:53:09 2003 UTC* (21 years, 5 months ago) by *itojun*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

Diff to: previous 1.24: [preferred](mld6.c.diff?r1=1.24;r2=1.25), [colored](mld6.c.diff?r1=1.24;r2=1.25;f=h)

Changes since revision 1.24: +3 -3
lines
```

change the additional arg to be passed to ip{,6}_output to struct socket *.

this fixes KAME policy lookup which was broken by the previous commit.

```

---

Revision **1.24**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.24;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.24;content-type=text%2Fplain), [markup](mld6.c?rev=1.24;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.24) - [select for diffs](mld6.c?r1=1.24#rev1.24)

*Fri Aug 22 20:20:10 2003 UTC* (21 years, 5 months ago) by *jonathan*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

Diff to: previous 1.23: [preferred](mld6.c.diff?r1=1.23;r2=1.24), [colored](mld6.c.diff?r1=1.23;r2=1.24;f=h)

Changes since revision 1.23: +4 -3
lines
```

Replace the set_socket() method of passing an extra struct socket*
argument to ip6_output() with a new explicit struct in6pcb* argument.
(The underlying socket can be obtained via in6pcb->inp6_socket.)

In preparation for fast-ipsec.  Reviewed by itojun.

```

---

Revision **1.23**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.23;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.23;content-type=text%2Fplain), [markup](mld6.c?rev=1.23;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.23) - [select for diffs](mld6.c?r1=1.23#rev1.23)

*Thu Aug 7 16:33:29 2003 UTC* (21 years, 5 months ago) by *agc*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

Diff to: previous 1.22: [preferred](mld6.c.diff?r1=1.22;r2=1.23), [colored](mld6.c.diff?r1=1.22;r2=1.23;f=h)

Changes since revision 1.22: +35 -3
lines
```

Move UCB-licensed code from 4-clause to 3-clause licence.

Patches provided by Joel Baker in PR [22364](http://gnats.NetBSD.org/22364), verified by myself.

```

---

Revision **1.22**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.22;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.22;content-type=text%2Fplain), [markup](mld6.c?rev=1.22;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.22) - [select for diffs](mld6.c?r1=1.22#rev1.22)

*Fri Jun 6 08:13:44 2003 UTC* (21 years, 7 months ago) by *itojun*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

Branch point for: [ktrace-lwp](./mld6.c?only_with_tag=ktrace-lwp)

Diff to: previous 1.21: [preferred](mld6.c.diff?r1=1.21;r2=1.22), [colored](mld6.c.diff?r1=1.21;r2=1.22;f=h)

Changes since revision 1.21: +76 -77
lines
```

- sync up MLD declaration with RFC3542 (s/MLD6/MLD/)
- routing header declaration with RFC3542
  (note: sizeof(ip6_rthdr0) has changed!)
  also, sync up with RFC2460 routing header definition (no "strict" source
  routing mode any more)

part of advanced API update (RFC2292 -> 3542).

```

---

Revision **1.21**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.21;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.21;content-type=text%2Fplain), [markup](mld6.c?rev=1.21;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.21) - [select for diffs](mld6.c?r1=1.21#rev1.21)

*Wed May 14 06:47:43 2003 UTC* (21 years, 8 months ago) by *itojun*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

Diff to: previous 1.20: [preferred](mld6.c.diff?r1=1.20;r2=1.21), [colored](mld6.c.diff?r1=1.20;r2=1.21;f=h)

Changes since revision 1.20: +2 -7
lines
```

always use PULLDOWN_TEST codepath.

```

---

Revision **1.13.4.2**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.13.4.2;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.13.4.2;content-type=text%2Fplain), [markup](mld6.c?rev=1.13.4.2;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.13.4.2) - [select for diffs](mld6.c?r1=1.13.4.2#rev1.13.4.2)

*Sun Jun 23 17:51:19 2002 UTC* (22 years, 7 months ago) by *jdolecek*

Branches: [kqueue](./mld6.c?only_with_tag=kqueue)

Diff to: previous 1.13.4.1: [preferred](mld6.c.diff?r1=1.13.4.1;r2=1.13.4.2), [colored](mld6.c.diff?r1=1.13.4.1;r2=1.13.4.2;f=h); branchpoint 1.13: [preferred](mld6.c.diff?r1=1.13;r2=1.13.4.2), [colored](mld6.c.diff?r1=1.13;r2=1.13.4.2;f=h); next MAIN 1.14: [preferred](mld6.c.diff?r1=1.14;r2=1.13.4.2), [colored](mld6.c.diff?r1=1.14;r2=1.13.4.2;f=h)

Changes since revision 1.13.4.1: +31 -20
lines
```

catch up with -current on kqueue branch

```

---

Revision **1.18.8.1**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.18.8.1;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.18.8.1;content-type=text%2Fplain), [markup](mld6.c?rev=1.18.8.1;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.18.8.1) - [select for diffs](mld6.c?r1=1.18.8.1#rev1.18.8.1)

*Thu Jun 20 15:52:50 2002 UTC* (22 years, 7 months ago) by *gehenna*

Branches: [gehenna-devsw](./mld6.c?only_with_tag=gehenna-devsw)

Diff to: previous 1.18: [preferred](mld6.c.diff?r1=1.18;r2=1.18.8.1), [colored](mld6.c.diff?r1=1.18;r2=1.18.8.1;f=h); next MAIN 1.19: [preferred](mld6.c.diff?r1=1.19;r2=1.18.8.1), [colored](mld6.c.diff?r1=1.19;r2=1.18.8.1;f=h)

Changes since revision 1.18: +31 -20
lines
```

catch up with -current.

```

---

Revision **1.13.2.6**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.13.2.6;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.13.2.6;content-type=text%2Fplain), [markup](mld6.c?rev=1.13.2.6;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.13.2.6) - [select for diffs](mld6.c?r1=1.13.2.6#rev1.13.2.6)

*Thu Jun 20 03:49:27 2002 UTC* (22 years, 7 months ago) by *nathanw*

Branches: [nathanw\_sa](./mld6.c?only_with_tag=nathanw_sa)

CVS tags: [nathanw\_sa\_end](./mld6.c?only_with_tag=nathanw_sa_end)

Diff to: previous 1.13.2.5: [preferred](mld6.c.diff?r1=1.13.2.5;r2=1.13.2.6), [colored](mld6.c.diff?r1=1.13.2.5;r2=1.13.2.6;f=h); branchpoint 1.13: [preferred](mld6.c.diff?r1=1.13;r2=1.13.2.6), [colored](mld6.c.diff?r1=1.13;r2=1.13.2.6;f=h); next MAIN 1.14: [preferred](mld6.c.diff?r1=1.14;r2=1.13.2.6), [colored](mld6.c.diff?r1=1.14;r2=1.13.2.6;f=h)

Changes since revision 1.13.2.5: +31 -20
lines
```

Catch up to -current.

```

---

Revision **1.20**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.20;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.20;content-type=text%2Fplain), [markup](mld6.c?rev=1.20;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.20) - [select for diffs](mld6.c?r1=1.20#rev1.20)

*Sun Jun 9 14:43:13 2002 UTC* (22 years, 7 months ago) by *itojun*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

CVS tags: [nathanw\_sa\_before\_merge](./mld6.c?only_with_tag=nathanw_sa_before_merge),
[nathanw\_sa\_base](./mld6.c?only_with_tag=nathanw_sa_base),
[kqueue-beforemerge](./mld6.c?only_with_tag=kqueue-beforemerge),
[kqueue-base](./mld6.c?only_with_tag=kqueue-base),
[kqueue-aftermerge](./mld6.c?only_with_tag=kqueue-aftermerge),
[gmcgarry\_ucred\_base](./mld6.c?only_with_tag=gmcgarry_ucred_base),
[gmcgarry\_ucred](./mld6.c?only_with_tag=gmcgarry_ucred),
[gmcgarry\_ctxsw\_base](./mld6.c?only_with_tag=gmcgarry_ctxsw_base),
[gmcgarry\_ctxsw](./mld6.c?only_with_tag=gmcgarry_ctxsw),
[gehenna-devsw-base](./mld6.c?only_with_tag=gehenna-devsw-base),
[fvdl\_fs64\_base](./mld6.c?only_with_tag=fvdl_fs64_base)

Diff to: previous 1.19: [preferred](mld6.c.diff?r1=1.19;r2=1.20), [colored](mld6.c.diff?r1=1.19;r2=1.20;f=h)

Changes since revision 1.19: +3 -3
lines
```

whitespace cleanup

```

---

Revision **1.19**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.19;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.19;content-type=text%2Fplain), [markup](mld6.c?rev=1.19;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.19) - [select for diffs](mld6.c?r1=1.19#rev1.19)

*Sat Jun 8 21:22:34 2002 UTC* (22 years, 7 months ago) by *itojun*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

Diff to: previous 1.18: [preferred](mld6.c.diff?r1=1.18;r2=1.19), [colored](mld6.c.diff?r1=1.18;r2=1.19;f=h)

Changes since revision 1.18: +30 -19
lines
```

sync with latest KAME in6_ifaddr/prefix/default router manipulation.
behavior changes:
- two iocts used by [ndp(8)](http://man.NetBSD.org/ndp.8) are now obsolete (backward compat provided).
  use sysctl path instead.
- lo0 does not get ::1 automatically.  it will get ::1 when lo0 comes up.

```

---

Revision **1.13.2.5**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.13.2.5;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.13.2.5;content-type=text%2Fplain), [markup](mld6.c?rev=1.13.2.5;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.13.2.5) - [select for diffs](mld6.c?r1=1.13.2.5#rev1.13.2.5)

*Thu Feb 28 04:15:14 2002 UTC* (22 years, 11 months ago) by *nathanw*

Branches: [nathanw\_sa](./mld6.c?only_with_tag=nathanw_sa)

Diff to: previous 1.13.2.4: [preferred](mld6.c.diff?r1=1.13.2.4;r2=1.13.2.5), [colored](mld6.c.diff?r1=1.13.2.4;r2=1.13.2.5;f=h); branchpoint 1.13: [preferred](mld6.c.diff?r1=1.13;r2=1.13.2.5), [colored](mld6.c.diff?r1=1.13;r2=1.13.2.5;f=h)

Changes since revision 1.13.2.4: +2 -2
lines
```

Catch up to -current.

```

---

Revision **1.13.2.4**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.13.2.4;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.13.2.4;content-type=text%2Fplain), [markup](mld6.c?rev=1.13.2.4;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.13.2.4) - [select for diffs](mld6.c?r1=1.13.2.4#rev1.13.2.4)

*Fri Jan 11 23:39:46 2002 UTC* (23 years ago) by *nathanw*

Branches: [nathanw\_sa](./mld6.c?only_with_tag=nathanw_sa)

Diff to: previous 1.13.2.3: [preferred](mld6.c.diff?r1=1.13.2.3;r2=1.13.2.4), [colored](mld6.c.diff?r1=1.13.2.3;r2=1.13.2.4;f=h); branchpoint 1.13: [preferred](mld6.c.diff?r1=1.13;r2=1.13.2.4), [colored](mld6.c.diff?r1=1.13;r2=1.13.2.4;f=h)

Changes since revision 1.13.2.3: +6 -2
lines
```

More catchup.

```

---

Revision **1.13.4.1**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.13.4.1;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.13.4.1;content-type=text%2Fplain), [markup](mld6.c?rev=1.13.4.1;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.13.4.1) - [select for diffs](mld6.c?r1=1.13.4.1#rev1.13.4.1)

*Thu Jan 10 20:03:26 2002 UTC* (23 years ago) by *thorpej*

Branches: [kqueue](./mld6.c?only_with_tag=kqueue)

Diff to: previous 1.13: [preferred](mld6.c.diff?r1=1.13;r2=1.13.4.1), [colored](mld6.c.diff?r1=1.13;r2=1.13.4.1;f=h)

Changes since revision 1.13: +23 -18
lines
```

Sync kqueue branch with -current.

```

---

Revision **1.18**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.18;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.18;content-type=text%2Fplain), [markup](mld6.c?rev=1.18;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.18) - [select for diffs](mld6.c?r1=1.18#rev1.18)

*Tue Jan 8 04:37:32 2002 UTC* (23 years ago) by *itojun*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

CVS tags: [newlock-base](./mld6.c?only_with_tag=newlock-base),
[newlock](./mld6.c?only_with_tag=newlock),
[netbsd-1-6-base](./mld6.c?only_with_tag=netbsd-1-6-base),
[netbsd-1-6-RELEASE](./mld6.c?only_with_tag=netbsd-1-6-RELEASE),
[netbsd-1-6-RC3](./mld6.c?only_with_tag=netbsd-1-6-RC3),
[netbsd-1-6-RC2](./mld6.c?only_with_tag=netbsd-1-6-RC2),
[netbsd-1-6-RC1](./mld6.c?only_with_tag=netbsd-1-6-RC1),
[netbsd-1-6-PATCH001-RELEASE](./mld6.c?only_with_tag=netbsd-1-6-PATCH001-RELEASE),
[netbsd-1-6-PATCH001-RC3](./mld6.c?only_with_tag=netbsd-1-6-PATCH001-RC3),
[netbsd-1-6-PATCH001-RC2](./mld6.c?only_with_tag=netbsd-1-6-PATCH001-RC2),
[netbsd-1-6-PATCH001-RC1](./mld6.c?only_with_tag=netbsd-1-6-PATCH001-RC1),
[netbsd-1-6-PATCH001](./mld6.c?only_with_tag=netbsd-1-6-PATCH001),
[ifpoll-base](./mld6.c?only_with_tag=ifpoll-base),
[eeh-devprop-base](./mld6.c?only_with_tag=eeh-devprop-base),
[eeh-devprop](./mld6.c?only_with_tag=eeh-devprop)

Branch point for: [netbsd-1-6](./mld6.c?only_with_tag=netbsd-1-6),
[gehenna-devsw](./mld6.c?only_with_tag=gehenna-devsw)

Diff to: previous 1.17: [preferred](mld6.c.diff?r1=1.17;r2=1.18), [colored](mld6.c.diff?r1=1.17;r2=1.18;f=h)

Changes since revision 1.17: +6 -2
lines
```

do not log() in per-packet input path.  sync w/kame

```

---

Revision **1.13.2.3**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.13.2.3;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.13.2.3;content-type=text%2Fplain), [markup](mld6.c?rev=1.13.2.3;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.13.2.3) - [select for diffs](mld6.c?r1=1.13.2.3#rev1.13.2.3)

*Tue Jan 8 00:34:23 2002 UTC* (23 years ago) by *nathanw*

Branches: [nathanw\_sa](./mld6.c?only_with_tag=nathanw_sa)

Diff to: previous 1.13.2.2: [preferred](mld6.c.diff?r1=1.13.2.2;r2=1.13.2.3), [colored](mld6.c.diff?r1=1.13.2.2;r2=1.13.2.3;f=h); branchpoint 1.13: [preferred](mld6.c.diff?r1=1.13;r2=1.13.2.3), [colored](mld6.c.diff?r1=1.13;r2=1.13.2.3;f=h)

Changes since revision 1.13.2.2: +4 -4
lines
```

Catch up to -current.

```

---

Revision **1.17**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.17;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.17;content-type=text%2Fplain), [markup](mld6.c?rev=1.17;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.17) - [select for diffs](mld6.c?r1=1.17#rev1.17)

*Tue Dec 18 03:04:04 2001 UTC* (23 years, 1 month ago) by *itojun*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

Diff to: previous 1.16: [preferred](mld6.c.diff?r1=1.16;r2=1.17), [colored](mld6.c.diff?r1=1.16;r2=1.17;f=h)

Changes since revision 1.16: +4 -4
lines
```

reduce white space/cosmetic diffs w/kame.

```

---

Revision **1.13.2.2**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.13.2.2;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.13.2.2;content-type=text%2Fplain), [markup](mld6.c?rev=1.13.2.2;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.13.2.2) - [select for diffs](mld6.c?r1=1.13.2.2#rev1.13.2.2)

*Wed Nov 14 19:18:13 2001 UTC* (23 years, 2 months ago) by *nathanw*

Branches: [nathanw\_sa](./mld6.c?only_with_tag=nathanw_sa)

Diff to: previous 1.13.2.1: [preferred](mld6.c.diff?r1=1.13.2.1;r2=1.13.2.2), [colored](mld6.c.diff?r1=1.13.2.1;r2=1.13.2.2;f=h); branchpoint 1.13: [preferred](mld6.c.diff?r1=1.13;r2=1.13.2.2), [colored](mld6.c.diff?r1=1.13;r2=1.13.2.2;f=h)

Changes since revision 1.13.2.1: +4 -1
lines
```

Catch up to -current.

```

---

Revision **1.16**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.16;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.16;content-type=text%2Fplain), [markup](mld6.c?rev=1.16;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.16) - [select for diffs](mld6.c?r1=1.16#rev1.16)

*Tue Nov 13 00:57:04 2001 UTC* (23 years, 2 months ago) by *lukem*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

Diff to: previous 1.15: [preferred](mld6.c.diff?r1=1.15;r2=1.16), [colored](mld6.c.diff?r1=1.15;r2=1.16;f=h)

Changes since revision 1.15: +4 -1
lines
```

add RCSIDs

```

---

Revision **1.13.2.1**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.13.2.1;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.13.2.1;content-type=text%2Fplain), [markup](mld6.c?rev=1.13.2.1;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.13.2.1) - [select for diffs](mld6.c?r1=1.13.2.1#rev1.13.2.1)

*Mon Oct 22 20:42:04 2001 UTC* (23 years, 3 months ago) by *nathanw*

Branches: [nathanw\_sa](./mld6.c?only_with_tag=nathanw_sa)

Diff to: previous 1.13: [preferred](mld6.c.diff?r1=1.13;r2=1.13.2.1), [colored](mld6.c.diff?r1=1.13;r2=1.13.2.1;f=h)

Changes since revision 1.13: +15 -17
lines
```

Catch up to -current.

```

---

Revision **1.15**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.15;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.15;content-type=text%2Fplain), [markup](mld6.c?rev=1.15;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.15) - [select for diffs](mld6.c?r1=1.15#rev1.15)

*Thu Oct 18 09:09:26 2001 UTC* (23 years, 3 months ago) by *itojun*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

CVS tags: [thorpej-mips-cache-base](./mld6.c?only_with_tag=thorpej-mips-cache-base),
[thorpej-mips-cache](./mld6.c?only_with_tag=thorpej-mips-cache)

Diff to: previous 1.14: [preferred](mld6.c.diff?r1=1.14;r2=1.15), [colored](mld6.c.diff?r1=1.14;r2=1.15;f=h)

Changes since revision 1.14: +13 -16
lines
```

simplify per-if stats.

```

---

Revision **1.14**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.14;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.14;content-type=text%2Fplain), [markup](mld6.c?rev=1.14;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.14) - [select for diffs](mld6.c?r1=1.14#rev1.14)

*Tue Oct 16 06:24:45 2001 UTC* (23 years, 3 months ago) by *itojun*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

Diff to: previous 1.13: [preferred](mld6.c.diff?r1=1.13;r2=1.14), [colored](mld6.c.diff?r1=1.13;r2=1.14;f=h)

Changes since revision 1.13: +3 -2
lines
```

more whitespace/comment sync with kame

```

---

Revision **1.6.2.2**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.6.2.2;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.6.2.2;content-type=text%2Fplain), [markup](mld6.c?rev=1.6.2.2;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.6.2.2) - [select for diffs](mld6.c?r1=1.6.2.2#rev1.6.2.2)

*Sun Feb 11 19:17:27 2001 UTC* (23 years, 11 months ago) by *bouyer*

Branches: [thorpej\_scsipi](./mld6.c?only_with_tag=thorpej_scsipi)

Diff to: previous 1.6.2.1: [preferred](mld6.c.diff?r1=1.6.2.1;r2=1.6.2.2), [colored](mld6.c.diff?r1=1.6.2.1;r2=1.6.2.2;f=h); branchpoint 1.6: [preferred](mld6.c.diff?r1=1.6;r2=1.6.2.2), [colored](mld6.c.diff?r1=1.6;r2=1.6.2.2;f=h); next MAIN 1.7: [preferred](mld6.c.diff?r1=1.7;r2=1.6.2.2), [colored](mld6.c.diff?r1=1.7;r2=1.6.2.2;f=h)

Changes since revision 1.6.2.1: +22 -19
lines
```

Sync with HEAD.

```

---

Revision **1.13**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.13;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.13;content-type=text%2Fplain), [markup](mld6.c?rev=1.13;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.13) - [select for diffs](mld6.c?r1=1.13#rev1.13)

*Sat Feb 10 04:14:29 2001 UTC* (23 years, 11 months ago) by *itojun*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

CVS tags: [thorpej\_scsipi\_nbase](./mld6.c?only_with_tag=thorpej_scsipi_nbase),
[thorpej\_scsipi\_beforemerge](./mld6.c?only_with_tag=thorpej_scsipi_beforemerge),
[thorpej\_scsipi\_base](./mld6.c?only_with_tag=thorpej_scsipi_base),
[thorpej-devvp-base3](./mld6.c?only_with_tag=thorpej-devvp-base3),
[thorpej-devvp-base2](./mld6.c?only_with_tag=thorpej-devvp-base2),
[thorpej-devvp-base](./mld6.c?only_with_tag=thorpej-devvp-base),
[thorpej-devvp](./mld6.c?only_with_tag=thorpej-devvp),
[pre-chs-ubcperf](./mld6.c?only_with_tag=pre-chs-ubcperf),
[post-chs-ubcperf](./mld6.c?only_with_tag=post-chs-ubcperf)

Branch point for: [nathanw\_sa](./mld6.c?only_with_tag=nathanw_sa),
[kqueue](./mld6.c?only_with_tag=kqueue)

Diff to: previous 1.12: [preferred](mld6.c.diff?r1=1.12;r2=1.13), [colored](mld6.c.diff?r1=1.12;r2=1.13;f=h)

Changes since revision 1.12: +22 -19
lines
```

to sync with kame better, (1) remove register declaration for variables,
(2) sync whitespaces, (3) update comments. (4) bring in some of portability
and logging enhancements.  no functional changes here.

```

---

Revision **1.6.2.1**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.6.2.1;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.6.2.1;content-type=text%2Fplain), [markup](mld6.c?rev=1.6.2.1;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.6.2.1) - [select for diffs](mld6.c?r1=1.6.2.1#rev1.6.2.1)

*Mon Nov 20 18:10:56 2000 UTC* (24 years, 2 months ago) by *bouyer*

Branches: [thorpej\_scsipi](./mld6.c?only_with_tag=thorpej_scsipi)

Diff to: previous 1.6: [preferred](mld6.c.diff?r1=1.6;r2=1.6.2.1), [colored](mld6.c.diff?r1=1.6;r2=1.6.2.1;f=h)

Changes since revision 1.6: +121 -94
lines
```

Update thorpej_scsipi to -current as of a month ago

```

---

Revision **1.12**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.12;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.12;content-type=text%2Fplain), [markup](mld6.c?rev=1.12;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.12) - [select for diffs](mld6.c?r1=1.12#rev1.12)

*Wed Mar 1 12:49:48 2000 UTC* (24 years, 11 months ago) by *itojun*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

CVS tags: [netbsd-1-5-base](./mld6.c?only_with_tag=netbsd-1-5-base),
[netbsd-1-5-RELEASE](./mld6.c?only_with_tag=netbsd-1-5-RELEASE),
[netbsd-1-5-PATCH003](./mld6.c?only_with_tag=netbsd-1-5-PATCH003),
[netbsd-1-5-PATCH002](./mld6.c?only_with_tag=netbsd-1-5-PATCH002),
[netbsd-1-5-PATCH001](./mld6.c?only_with_tag=netbsd-1-5-PATCH001),
[netbsd-1-5-BETA2](./mld6.c?only_with_tag=netbsd-1-5-BETA2),
[netbsd-1-5-BETA](./mld6.c?only_with_tag=netbsd-1-5-BETA),
[netbsd-1-5-ALPHA2](./mld6.c?only_with_tag=netbsd-1-5-ALPHA2),
[netbsd-1-5](./mld6.c?only_with_tag=netbsd-1-5),
[minoura-xpg4dl-base](./mld6.c?only_with_tag=minoura-xpg4dl-base),
[minoura-xpg4dl](./mld6.c?only_with_tag=minoura-xpg4dl)

Diff to: previous 1.11: [preferred](mld6.c.diff?r1=1.11;r2=1.12), [colored](mld6.c.diff?r1=1.11;r2=1.12;f=h)

Changes since revision 1.11: +1 -5
lines
```

introduce m->m_pkthdr.aux to hold random data which needs to be passed
between protocol handlers.

ipsec socket pointers, ipsec decryption/auth information, tunnel
decapsulation information are in my mind - there can be several other usage.
at this moment, we use this for ipsec socket pointer passing.  this will
avoid reuse of m->m_pkthdr.rcvif in ipsec code.

due to the change, MHLEN will be decreased by sizeof(void *) - for example,
for i386, MHLEN was 100 bytes, but is now 96 bytes.
we may want to increase MSIZE from 128 to 256 for some of our architectures.

take caution if you use it for keeping some data item for long period
of time - use extra caution on M_PREPEND() or m_adj(), as they may result
in loss of m->m_pkthdr.aux pointer (and mbuf leak).

this will bump kernel version.

(as discussed in tech-net, tested in kame tree)

```

---

Revision **1.11**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.11;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.11;content-type=text%2Fplain), [markup](mld6.c?rev=1.11;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.11) - [select for diffs](mld6.c?r1=1.11#rev1.11)

*Sat Feb 26 08:39:20 2000 UTC* (24 years, 11 months ago) by *itojun*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

Diff to: previous 1.10: [preferred](mld6.c.diff?r1=1.10;r2=1.11), [colored](mld6.c.diff?r1=1.10;r2=1.11;f=h)

Changes since revision 1.10: +47 -31
lines
```

bring in recent KAME changes (only important and stable ones, as usual).
- remove net.inet6.ip6.nd6_proxyall.  introduce proxy NDP code works
  just like "arp -s".
- revise source address selection.
  be more careful about use of yet-to-be-valid addresses as source.
- as router, transmit ICMP6_DST_UNREACH_BEYONDSCOPE against out-of-scope
  packet forwarding attempt.
- path MTU discovery takes care of routing header properly.
- be more strict about mbuf chain parsing.

```

---

Revision **1.10**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.10;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.10;content-type=text%2Fplain), [markup](mld6.c?rev=1.10;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.10) - [select for diffs](mld6.c?r1=1.10#rev1.10)

*Sun Feb 6 12:49:47 2000 UTC* (24 years, 11 months ago) by *itojun*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

CVS tags: [chs-ubc2-newbase](./mld6.c?only_with_tag=chs-ubc2-newbase)

Diff to: previous 1.9: [preferred](mld6.c.diff?r1=1.9;r2=1.10), [colored](mld6.c.diff?r1=1.9;r2=1.10;f=h)

Changes since revision 1.9: +3 -3
lines
```

fix include pathname for better rfc2292 compliance.

```

---

Revision **1.9**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.9;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.9;content-type=text%2Fplain), [markup](mld6.c?rev=1.9;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.9) - [select for diffs](mld6.c?r1=1.9#rev1.9)

*Thu Jan 6 15:46:10 2000 UTC* (25 years ago) by *itojun*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

Diff to: previous 1.8: [preferred](mld6.c.diff?r1=1.8;r2=1.9), [colored](mld6.c.diff?r1=1.8;r2=1.9;f=h)

Changes since revision 1.8: +1 -33
lines
```

remove extra portability #ifdef (like #ifdef __FreeBSD__) in KAME IPv6/IPsec
code, from netbsd-current repository.
#ifdef'ed version is always available from ftp.kame.net.

XXX please do not make too many diff-unfriendly changes, we'll need to take
bunch of diffs on upgrade...

```

---

Revision **1.6.8.1**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.6.8.1;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.6.8.1;content-type=text%2Fplain), [markup](mld6.c?rev=1.6.8.1;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.6.8.1) - [select for diffs](mld6.c?r1=1.6.8.1#rev1.6.8.1)

*Mon Dec 27 18:36:27 1999 UTC* (25 years, 1 month ago) by *wrstuden*

Branches: [wrstuden-devbsize](./mld6.c?only_with_tag=wrstuden-devbsize)

Diff to: previous 1.6: [preferred](mld6.c.diff?r1=1.6;r2=1.6.8.1), [colored](mld6.c.diff?r1=1.6;r2=1.6.8.1;f=h); next MAIN 1.7: [preferred](mld6.c.diff?r1=1.7;r2=1.6.8.1), [colored](mld6.c.diff?r1=1.7;r2=1.6.8.1;f=h)

Changes since revision 1.6: +147 -100
lines
```

Pull up to last week's -current.

```

---

Revision **1.8**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.8;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.8;content-type=text%2Fplain), [markup](mld6.c?rev=1.8;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.8) - [select for diffs](mld6.c?r1=1.8#rev1.8)

*Wed Dec 15 06:28:44 1999 UTC* (25 years, 1 month ago) by *itojun*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

CVS tags: [wrstuden-devbsize-base](./mld6.c?only_with_tag=wrstuden-devbsize-base),
[wrstuden-devbsize-19991221](./mld6.c?only_with_tag=wrstuden-devbsize-19991221)

Diff to: previous 1.7: [preferred](mld6.c.diff?r1=1.7;r2=1.8), [colored](mld6.c.diff?r1=1.7;r2=1.8;f=h)

Changes since revision 1.7: +3 -2
lines
```

do not overwrite traffic class field when we write IPv6 version field.

```

---

Revision **1.7**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.7;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.7;content-type=text%2Fplain), [markup](mld6.c?rev=1.7;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.7) - [select for diffs](mld6.c?r1=1.7#rev1.7)

*Mon Dec 13 15:17:23 1999 UTC* (25 years, 1 month ago) by *itojun*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

Diff to: previous 1.6: [preferred](mld6.c.diff?r1=1.6;r2=1.7), [colored](mld6.c.diff?r1=1.6;r2=1.7;f=h)

Changes since revision 1.6: +145 -99
lines
```

sync IPv6 part with latest KAME tree.   IPsec part is left unmodified
due to massive changes in KAME side.
- IPv6 output goes through nd6_output
- faith can capture IPv4 packets as well - you can run IPv4-to-IPv6 translator
  using heavily modified DNS servers
- per-interface statistics (required for IPv6 MIB)
- interface autoconfig is revisited
- udp input handling has a big change for mapped address support.
- introduce in4_cksum() for non-overwriting checksumming
- introduce m_pulldown()
- neighbor discovery cleanups/improvements
- netinet/in.h strictly conforms to RFC2553 (no extra defs visible to userland)
- IFA_STATS is fixed a bit (not tested)
- and more more more.

TODO:
- cleanup os-independency #ifdef
- avoid rcvif dual use (for IPsec) to help ifdetach

(sorry for jumbo commit, I can't separate this any more...)

```

---

Revision **1.1.2.3**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.1.2.3;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.1.2.3;content-type=text%2Fplain), [markup](mld6.c?rev=1.1.2.3;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.1.2.3) - [select for diffs](mld6.c?r1=1.1.2.3#rev1.1.2.3)

*Tue Nov 30 13:35:58 1999 UTC* (25 years, 2 months ago) by *itojun*

Branches: [kame](./mld6.c?only_with_tag=kame)

CVS tags: [kame\_141\_19991130](./mld6.c?only_with_tag=kame_141_19991130)

Diff to: previous 1.1.2.2: [preferred](mld6.c.diff?r1=1.1.2.2;r2=1.1.2.3), [colored](mld6.c.diff?r1=1.1.2.2;r2=1.1.2.3;f=h); next MAIN 1.2: [preferred](mld6.c.diff?r1=1.2;r2=1.1.2.3), [colored](mld6.c.diff?r1=1.2;r2=1.1.2.3;f=h)

Changes since revision 1.1.2.2: +147 -98
lines
```

bring in latest KAME (as of 19991130, KAME/NetBSD141) into kame branch
just for reference purposes.
This commit includes 1.4 -> 1.4.1 sync for kame branch.

The branch does not compile at all (due to the lack of ALTQ and some other
source code).  Please do not try to modify the branch, this is just for
referenre purposes.

synchronization to latest KAME will take place on HEAD branch soon.

```

---

Revision **1.2.2.3**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.2.2.3;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.2.2.3;content-type=text%2Fplain), [markup](mld6.c?rev=1.2.2.3;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.2.2.3) - [select for diffs](mld6.c?r1=1.2.2.3#rev1.2.2.3)

*Mon Aug 2 22:36:06 1999 UTC* (25 years, 5 months ago) by *thorpej*

Branches: [chs-ubc2](./mld6.c?only_with_tag=chs-ubc2)

Diff to: previous 1.2.2.2: [preferred](mld6.c.diff?r1=1.2.2.2;r2=1.2.2.3), [colored](mld6.c.diff?r1=1.2.2.2;r2=1.2.2.3;f=h); next MAIN 1.3: [preferred](mld6.c.diff?r1=1.3;r2=1.2.2.3), [colored](mld6.c.diff?r1=1.3;r2=1.2.2.3;f=h)

Changes since revision 1.2.2.2: +7 -2
lines
```

Update from trunk.

```

---

Revision **1.6**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.6;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.6;content-type=text%2Fplain), [markup](mld6.c?rev=1.6;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.6) - [select for diffs](mld6.c?r1=1.6#rev1.6)

*Sat Jul 31 18:41:17 1999 UTC* (25 years, 6 months ago) by *itojun*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

CVS tags: [fvdl-softdep-base](./mld6.c?only_with_tag=fvdl-softdep-base),
[fvdl-softdep](./mld6.c?only_with_tag=fvdl-softdep),
[comdex-fall-1999-base](./mld6.c?only_with_tag=comdex-fall-1999-base),
[comdex-fall-1999](./mld6.c?only_with_tag=comdex-fall-1999),
[chs-ubc2-base](./mld6.c?only_with_tag=chs-ubc2-base)

Branch point for: [wrstuden-devbsize](./mld6.c?only_with_tag=wrstuden-devbsize),
[thorpej\_scsipi](./mld6.c?only_with_tag=thorpej_scsipi)

Diff to: previous 1.5: [preferred](mld6.c.diff?r1=1.5;r2=1.6), [colored](mld6.c.diff?r1=1.5;r2=1.6;f=h)

Changes since revision 1.5: +3 -1
lines
```

sync with recent KAME.
- loosen ipsec restriction on packet diredtion.
- revise icmp6 redirect handling on IsRouter bit.
- tcp/udp notification processing (link-local address case)
- cosmetic fixes (better code share across *BSD).

```

---

Revision **1.5**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.5;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.5;content-type=text%2Fplain), [markup](mld6.c?rev=1.5;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.5) - [select for diffs](mld6.c?r1=1.5#rev1.5)

*Fri Jul 9 22:57:29 1999 UTC* (25 years, 6 months ago) by *thorpej*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

Diff to: previous 1.4: [preferred](mld6.c.diff?r1=1.4;r2=1.5), [colored](mld6.c.diff?r1=1.4;r2=1.5;f=h)

Changes since revision 1.4: +2 -1
lines
```

defopt IPSEC and IPSEC_ESP (both into opt_ipsec.h).

```

---

Revision **1.1.2.2**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.1.2.2;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.1.2.2;content-type=text%2Fplain), [markup](mld6.c?rev=1.1.2.2;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.1.2.2) - [select for diffs](mld6.c?r1=1.1.2.2#rev1.1.2.2)

*Tue Jul 6 11:03:02 1999 UTC* (25 years, 6 months ago) by *itojun*

Branches: [kame](./mld6.c?only_with_tag=kame)

CVS tags: [kame\_14\_19990705](./mld6.c?only_with_tag=kame_14_19990705)

Diff to: previous 1.1.2.1: [preferred](mld6.c.diff?r1=1.1.2.1;r2=1.1.2.2), [colored](mld6.c.diff?r1=1.1.2.1;r2=1.1.2.2;f=h)

Changes since revision 1.1.2.1: +2 -2
lines
```

KAME/NetBSD 1.4, SNAP kit 1999/07/05.
NOTE: this branch is just for reference purposes (i.e. for taking cvs diff).
do not touch anything on the branch.  actual work must be done on HEAD branch.

```

---

Revision **1.4**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.4;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.4;content-type=text%2Fplain), [markup](mld6.c?rev=1.4;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.4) - [select for diffs](mld6.c?r1=1.4#rev1.4)

*Sun Jul 4 02:01:15 1999 UTC* (25 years, 6 months ago) by *itojun*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

Diff to: previous 1.3: [preferred](mld6.c.diff?r1=1.3;r2=1.4), [colored](mld6.c.diff?r1=1.3;r2=1.4;f=h)

Changes since revision 1.3: +3 -3
lines
```

s/splnet/splsoftnet/ in IPv6/IPsec part.
hope I made no mistake (the kernel works fine but I need a regress test)

Suggested by: thorpej

```

---

Revision **1.3**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.3;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.3;content-type=text%2Fplain), [markup](mld6.c?rev=1.3;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.3) - [select for diffs](mld6.c?r1=1.3#rev1.3)

*Sat Jul 3 21:30:19 1999 UTC* (25 years, 6 months ago) by *thorpej*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

Diff to: previous 1.2: [preferred](mld6.c.diff?r1=1.2;r2=1.3), [colored](mld6.c.diff?r1=1.2;r2=1.3;f=h)

Changes since revision 1.2: +2 -0
lines
```

RCS ID police.

```

---

Revision **1.2.2.2**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.2.2.2;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.2.2.2;content-type=text%2Fplain), [markup](mld6.c?rev=1.2.2.2;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.2.2.2) - [select for diffs](mld6.c?r1=1.2.2.2#rev1.2.2.2)

*Thu Jul 1 23:48:29 1999 UTC* (25 years, 7 months ago) by *thorpej*

Branches: [chs-ubc2](./mld6.c?only_with_tag=chs-ubc2)

Diff to: previous 1.2.2.1: [preferred](mld6.c.diff?r1=1.2.2.1;r2=1.2.2.2), [colored](mld6.c.diff?r1=1.2.2.1;r2=1.2.2.2;f=h)

Changes since revision 1.2.2.1: +435 -0
lines
```

Sync w/ -current.

```

---

Revision **1.2.2.1**

*Thu Jul 1 08:12:57 1999 UTC* (25 years, 7 months ago) by *thorpej*

Branches: [chs-ubc2](./mld6.c?only_with_tag=chs-ubc2)

***FILE REMOVED***

Changes since revision 1.2: +0 -435
lines
```

file mld6.c was added on branch chs-ubc2 on 1999-07-01 23:48:29 +0000

```

---

Revision **1.2**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.2;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.2;content-type=text%2Fplain), [markup](mld6.c?rev=1.2;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.2) - [select for diffs](mld6.c?r1=1.2#rev1.2)

*Thu Jul 1 08:12:57 1999 UTC* (25 years, 7 months ago) by *itojun*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

Branch point for: [chs-ubc2](./mld6.c?only_with_tag=chs-ubc2)

Diff to: previous 1.1: [preferred](mld6.c.diff?r1=1.1;r2=1.2), [colored](mld6.c.diff?r1=1.1;r2=1.2;f=h)

Changes since revision 1.1: +435 -0
lines
```

IPv6 kernel code, based on KAME/NetBSD 1.4, SNAP kit 19990628.
(Sorry for a big commit, I can't separate this into several pieces...)
Pls check sys/netinet6/TODO and sys/netinet6/IMPLEMENTATION for details.

- sys/kern: do not assume single mbuf, accept chained mbuf on passing
  data from userland to kernel (or other way round).
- "midway" ATM card: ATM PVC pseudo device support, like those done in ALTQ
  package (ftp://ftp.csl.sony.co.jp/pub/kjc/).
- sys/netinet/tcp*: IPv4/v6 dual stack tcp support.
- sys/netinet/{ip6,icmp6}.h, sys/net/pfkeyv2.h: IETF document assumes those
  file to be there so we patch it up.
- sys/netinet: IPsec additions are here and there.
- sys/netinet6/*: most of IPv6 code sits here.
- sys/netkey: IPsec key management code
- dev/pci/pcidevs: regen

In my understanding no code here is subject to export control so it
should be safe.

```

---

Revision **1.1.2.1**: [download](/bsdweb.cgi/~checkout~/src/sys/netinet6/mld6.c?rev=1.1.2.1;content-type=text%2Fx-csrc) - view: [text](mld6.c?rev=1.1.2.1;content-type=text%2Fplain), [markup](mld6.c?rev=1.1.2.1;content-type=text%2Fx-cvsweb-markup), [annotated](mld6.c?annotate=1.1.2.1) - [select for diffs](mld6.c?r1=1.1.2.1#rev1.1.2.1)

*Mon Jun 28 06:37:06 1999 UTC* (25 years, 7 months ago) by *itojun*

Branches: [kame](./mld6.c?only_with_tag=kame)

CVS tags: [kame\_14\_19990628](./mld6.c?only_with_tag=kame_14_19990628)

Diff to: previous 1.1: [preferred](mld6.c.diff?r1=1.1;r2=1.1.2.1), [colored](mld6.c.diff?r1=1.1;r2=1.1.2.1;f=h)

Changes since revision 1.1: +435 -0
lines
```

KAME/NetBSD 1.4 SNAP kit, dated 19990628.

NOTE: this branch (kame) is used just for refernce.  this may not compile
due to multiple reasons.

```

---

Revision **1.1**

*Mon Jun 28 06:37:06 1999 UTC* (25 years, 7 months ago) by *itojun*

Branches: [MAIN](./mld6.c?only_with_tag=MAIN)

Branch point for: [kame](./mld6.c?only_with_tag=kame)

***FILE REMOVED***
```

file mld6.c was initially added on branch kame.

```

---

Diff request

This form allows you to request diffs between any two revisions of a file.
You may select a symbolic revision name using the selection box or you may
type in a numeric name using the type-in text box.

| Diffs between | Use Text Field yamt-x86pmap-base4 yamt-x86pmap-base3 yamt-x86pmap-base2 yamt-x86pmap-base yamt-x86pmap yamt-vop-base3 yamt-vop-base2 yamt-vop-base yamt-vop yamt-uio\_vmspace-base5 yamt-uio\_vmspace yamt-splraiseipl-base5 yamt-splraiseipl-base4 yamt-splraiseipl-base3 yamt-splraiseipl-base2 yamt-splraiseipl-base yamt-splraiseipl yamt-readahead-pervnode yamt-readahead-perfile yamt-readahead-base3 yamt-readahead-base2 yamt-readahead-base yamt-readahead yamt-pf42-baseX yamt-pf42-base4 yamt-pf42-base3 yamt-pf42-base2 yamt-pf42-base yamt-pf42 yamt-pdpolicy-base9 yamt-pdpolicy-base8 yamt-pdpolicy-base7 yamt-pdpolicy-base6 yamt-pdpolicy-base5 yamt-pdpolicy-base4 yamt-pdpolicy-base3 yamt-pdpolicy-base2 yamt-pdpolicy-base yamt-pdpolicy yamt-pagecache-tag8 yamt-pagecache-base9 yamt-pagecache-base8 yamt-pagecache-base7 yamt-pagecache-base6 yamt-pagecache-base5 yamt-pagecache-base4 yamt-pagecache-base3 yamt-pagecache-base2 yamt-pagecache-base yamt-pagecache yamt-nfs-mp-base9 yamt-nfs-mp-base8 yamt-nfs-mp-base7 yamt-nfs-mp-base6 yamt-nfs-mp-base5 yamt-nfs-mp-base4 yamt-nfs-mp-base3 yamt-nfs-mp-base2 yamt-nfs-mp-base11 yamt-nfs-mp-base10 yamt-nfs-mp-base yamt-nfs-mp yamt-lazymbuf-base15 yamt-lazymbuf-base14 yamt-lazymbuf yamt-kmem-base3 yamt-kmem-base2 yamt-kmem-base yamt-kmem yamt-km-base4 yamt-km-base3 yamt-km-base2 yamt-km-base yamt-km yamt-idlelwp-base8 yamt-idlelwp wrstuden-revivesa-base-4 wrstuden-revivesa-base-3 wrstuden-revivesa-base-2 wrstuden-revivesa-base-1 wrstuden-revivesa-base wrstuden-revivesa wrstuden-fixsa-newbase wrstuden-fixsa-base-1 wrstuden-fixsa-base wrstuden-fixsa wrstuden-devbsize-base wrstuden-devbsize-19991221 wrstuden-devbsize vmlocking2-base3 vmlocking2-base2 vmlocking2-base1 vmlocking2 vmlocking-nbase vmlocking-base vmlocking uebayasi-xip-base4 uebayasi-xip-base3 uebayasi-xip-base2 uebayasi-xip-base1 uebayasi-xip-base uebayasi-xip tls-maxphys-base-20171202 tls-maxphys-base tls-maxphys tls-earlyentropy-base tls-earlyentropy thorpej\_scsipi\_nbase thorpej\_scsipi\_beforemerge thorpej\_scsipi\_base thorpej\_scsipi thorpej-vnode-attr-base thorpej-vnode-attr thorpej-mips-cache-base thorpej-mips-cache thorpej-ifq-base thorpej-ifq thorpej-i2c-spi-conf2-base thorpej-i2c-spi-conf2 thorpej-i2c-spi-conf-base thorpej-i2c-spi-conf thorpej-futex2-base thorpej-futex2 thorpej-futex-base thorpej-futex thorpej-devvp-base3 thorpej-devvp-base2 thorpej-devvp-base thorpej-devvp thorpej-cfargs2-base thorpej-cfargs2 thorpej-cfargs-base thorpej-cfargs thorpej-atomic-base thorpej-atomic thorpej-altq-separation-base thorpej-altq-separation simonb-wapbl-nbase simonb-wapbl-base simonb-wapbl simonb-timecounters-base simonb-timecounters simonb-timcounters-final rpaulo-netinet-merge-pcb-base rpaulo-netinet-merge-pcb rmind-uvmplock-nbase rmind-uvmplock-base rmind-uvmplock rmind-smpnet-nbase rmind-smpnet-base rmind-smpnet riastradh-xf86-video-intel-2-7-1-pre-2-21-15 riastradh-drm2-base3 riastradh-drm2-base2 riastradh-drm2-base1 riastradh-drm2-base riastradh-drm2 reinoud-bufcleanup-nbase reinoud-bufcleanup-base reinoud-bufcleanup prg-localcount2-base3 prg-localcount2-base2 prg-localcount2-base1 prg-localcount2-base prg-localcount2 pre-chs-ubcperf post-newlock2-merge post-chs-ubcperf phil-wifi-base phil-wifi-20200421 phil-wifi-20200411 phil-wifi-20200406 phil-wifi-20191119 phil-wifi-20190609 phil-wifi pgoyette-localcount-base pgoyette-localcount-20170426 pgoyette-localcount-20170320 pgoyette-localcount-20170107 pgoyette-localcount-20161104 pgoyette-localcount-20160806 pgoyette-localcount-20160726 pgoyette-localcount pgoyette-compat-merge-20190127 pgoyette-compat-base pgoyette-compat-20190127 pgoyette-compat-20190118 pgoyette-compat-1226 pgoyette-compat-1126 pgoyette-compat-1020 pgoyette-compat-0930 pgoyette-compat-0906 pgoyette-compat-0728 pgoyette-compat-0625 pgoyette-compat-0521 pgoyette-compat-0502 pgoyette-compat-0422 pgoyette-compat-0415 pgoyette-compat-0407 pgoyette-compat-0330 pgoyette-compat-0322 pgoyette-compat-0315 pgoyette-compat peter-altq-base peter-altq perseant-stdc-iso10646-base perseant-stdc-iso10646 perseant-exfatfs-base-20240630 perseant-exfatfs-base perseant-exfatfs nick-nhusb-base-20170825 nick-nhusb-base-20170204 nick-nhusb-base-20161204 nick-nhusb-base-20161004 nick-nhusb-base-20160907 nick-nhusb-base-20160529 nick-nhusb-base-20160422 nick-nhusb-base-20160319 nick-nhusb-base-20151226 nick-nhusb-base-20150921 nick-nhusb-base-20150606 nick-nhusb-base-20150406 nick-nhusb-base nick-nhusb nick-net80211-sync-base nick-net80211-sync nick-hppapmap-base4 nick-hppapmap-base3 nick-hppapmap-base2 nick-hppapmap-base nick-hppapmap nick-csl-alignment-base5 nick-csl-alignment-base nick-csl-alignment newlock2-nbase newlock2-base newlock2 newlock-base newlock netbsd-9-base netbsd-9-4-RELEASE netbsd-9-3-RELEASE netbsd-9-2-RELEASE netbsd-9-1-RELEASE netbsd-9-0-RELEASE netbsd-9-0-RC2 netbsd-9-0-RC1 netbsd-9 netbsd-8-base netbsd-8-3-RELEASE netbsd-8-2-RELEASE netbsd-8-1-RELEASE netbsd-8-1-RC1 netbsd-8-0-RELEASE netbsd-8-0-RC2 netbsd-8-0-RC1 netbsd-8 netbsd-7-nhusb-base-20170116 netbsd-7-nhusb-base netbsd-7-nhusb netbsd-7-base netbsd-7-2-RELEASE netbsd-7-1-RELEASE netbsd-7-1-RC2 netbsd-7-1-RC1 netbsd-7-1-2-RELEASE netbsd-7-1-1-RELEASE netbsd-7-1 netbsd-7-0-RELEASE netbsd-7-0-RC3 netbsd-7-0-RC2 netbsd-7-0-RC1 netbsd-7-0-2-RELEASE netbsd-7-0-1-RELEASE netbsd-7-0 netbsd-7 netbsd-6-base netbsd-6-1-RELEASE netbsd-6-1-RC4 netbsd-6-1-RC3 netbsd-6-1-RC2 netbsd-6-1-RC1 netbsd-6-1-5-RELEASE netbsd-6-1-4-RELEASE netbsd-6-1-3-RELEASE netbsd-6-1-2-RELEASE netbsd-6-1-1-RELEASE netbsd-6-1 netbsd-6-0-RELEASE netbsd-6-0-RC2 netbsd-6-0-RC1 netbsd-6-0-6-RELEASE netbsd-6-0-5-RELEASE netbsd-6-0-4-RELEASE netbsd-6-0-3-RELEASE netbsd-6-0-2-RELEASE netbsd-6-0-1-RELEASE netbsd-6-0 netbsd-6 netbsd-5-base netbsd-5-2-RELEASE netbsd-5-2-RC1 netbsd-5-2-3-RELEASE netbsd-5-2-2-RELEASE netbsd-5-2-1-RELEASE netbsd-5-2 netbsd-5-1-RELEASE netbsd-5-1-RC4 netbsd-5-1-RC3 netbsd-5-1-RC2 netbsd-5-1-RC1 netbsd-5-1-5-RELEASE netbsd-5-1-4-RELEASE netbsd-5-1-3-RELEASE netbsd-5-1-2-RELEASE netbsd-5-1-1-RELEASE netbsd-5-1 netbsd-5-0-RELEASE netbsd-5-0-RC4 netbsd-5-0-RC3 netbsd-5-0-RC2 netbsd-5-0-RC1 netbsd-5-0-2-RELEASE netbsd-5-0-1-RELEASE netbsd-5-0 netbsd-5 netbsd-4-base netbsd-4-0-RELEASE netbsd-4-0-RC5 netbsd-4-0-RC4 netbsd-4-0-RC3 netbsd-4-0-RC2 netbsd-4-0-RC1 netbsd-4-0-1-RELEASE netbsd-4-0 netbsd-4 netbsd-3-base netbsd-3-1-RELEASE netbsd-3-1-RC4 netbsd-3-1-RC3 netbsd-3-1-RC2 netbsd-3-1-RC1 netbsd-3-1-1-RELEASE netbsd-3-1 netbsd-3-0-RELEASE netbsd-3-0-RC6 netbsd-3-0-RC5 netbsd-3-0-RC4 netbsd-3-0-RC3 netbsd-3-0-RC2 netbsd-3-0-RC1 netbsd-3-0-3-RELEASE netbsd-3-0-2-RELEASE netbsd-3-0-1-RELEASE netbsd-3-0 netbsd-3 netbsd-2-base netbsd-2-1-RELEASE netbsd-2-1-RC6 netbsd-2-1-RC5 netbsd-2-1-RC4 netbsd-2-1-RC3 netbsd-2-1-RC2 netbsd-2-1-RC1 netbsd-2-1 netbsd-2-0-base netbsd-2-0-RELEASE netbsd-2-0-RC5 netbsd-2-0-RC4 netbsd-2-0-RC3 netbsd-2-0-RC2 netbsd-2-0-RC1 netbsd-2-0-3-RELEASE netbsd-2-0-2-RELEASE netbsd-2-0-1-RELEASE netbsd-2-0 netbsd-2 netbsd-10-base netbsd-10-1-RELEASE netbsd-10-0-RELEASE netbsd-10-0-RC6 netbsd-10-0-RC5 netbsd-10-0-RC4 netbsd-10-0-RC3 netbsd-10-0-RC2 netbsd-10-0-RC1 netbsd-10 netbsd-1-6-base netbsd-1-6-RELEASE netbsd-1-6-RC3 netbsd-1-6-RC2 netbsd-1-6-RC1 netbsd-1-6-PATCH002-RELEASE netbsd-1-6-PATCH002-RC4 netbsd-1-6-PATCH002-RC3 netbsd-1-6-PATCH002-RC2 netbsd-1-6-PATCH002-RC1 netbsd-1-6-PATCH002 netbsd-1-6-PATCH001-RELEASE netbsd-1-6-PATCH001-RC3 netbsd-1-6-PATCH001-RC2 netbsd-1-6-PATCH001-RC1 netbsd-1-6-PATCH001 netbsd-1-6 netbsd-1-5-base netbsd-1-5-RELEASE netbsd-1-5-PATCH003 netbsd-1-5-PATCH002 netbsd-1-5-PATCH001 netbsd-1-5-BETA2 netbsd-1-5-BETA netbsd-1-5-ALPHA2 netbsd-1-5 nathanw\_sa\_end nathanw\_sa\_before\_merge nathanw\_sa\_base nathanw\_sa mjf-ufs-trans-base mjf-ufs-trans mjf-devfs2-base mjf-devfs2 mjf-devfs-base mjf-devfs minoura-xpg4dl-base minoura-xpg4dl matt-premerge-20091211 matt-nb8-mediatek-base matt-nb8-mediatek matt-nb6-plus-nbase matt-nb6-plus-base matt-nb6-plus matt-nb5-pq3-base matt-nb5-pq3 matt-nb5-mips64-u2-k2-k4-k7-k8-k9 matt-nb5-mips64-u1-k1-k5 matt-nb5-mips64-premerge-20101231 matt-nb5-mips64-premerge-20091211 matt-nb5-mips64-k15 matt-nb5-mips64 matt-nb4-mips64-k7-u2a-k9b matt-nb4-arm-base matt-nb4-arm matt-mips64-premerge-20101231 matt-mips64-base2 matt-mips64-base matt-mips64 matt-armv6-prevmlocking matt-armv6-nbase matt-armv6-base matt-armv6 localcount-20160914 ktrace-lwp-base ktrace-lwp kqueue-beforemerge kqueue-base kqueue-aftermerge kqueue khorben-n900 kent-audio2-base kent-audio2 kent-audio1-beforemerge kent-audio1-base kent-audio1 keiichi-mipv6-nbase keiichi-mipv6-base keiichi-mipv6 kame\_14\_19990705 kame\_14\_19990628 kame\_141\_19991130 kame jymxensuspend-base jym-xensuspend-nbase jym-xensuspend-base jym-xensuspend jruoho-x86intr-base jruoho-x86intr jmcneill-usbmp-pre-base2 jmcneill-usbmp-base9 jmcneill-usbmp-base8 jmcneill-usbmp-base7 jmcneill-usbmp-base6 jmcneill-usbmp-base5 jmcneill-usbmp-base4 jmcneill-usbmp-base3 jmcneill-usbmp-base2 jmcneill-usbmp-base10 jmcneill-usbmp-base jmcneill-usbmp jmcneill-pm-base jmcneill-pm jmcneill-base jmcneill-audiomp3-base jmcneill-audiomp3 jdolecek-ncq-base jdolecek-ncq isaki-audio2-base isaki-audio2 is-mlppp-base is-mlppp ifpoll-base hpcarm-cleanup-nbase hpcarm-cleanup-base hpcarm-cleanup haad-nbase2 haad-dm-base2 haad-dm-base1 haad-dm-base haad-dm gmcgarry\_ucred\_base gmcgarry\_ucred gmcgarry\_ctxsw\_base gmcgarry\_ctxsw gehenna-devsw-base gehenna-devsw gdamore-uart-base gdamore-uart fvdl\_fs64\_base fvdl-softdep-base fvdl-softdep elad-kernelauth-base elad-kernelauth eeh-devprop-base eeh-devprop cube-autoconf-base cube-autoconf comdex-fall-1999-base comdex-fall-1999 cjep\_sun2x-base1 cjep\_sun2x-base cjep\_sun2x cjep\_staticlib\_x-base1 cjep\_staticlib\_x-base cjep\_staticlib\_x chs-ubc2-newbase chs-ubc2-base chs-ubc2 cherry-xenmp-base cherry-xenmp chap-midi-nbase chap-midi-base chap-midi bouyer-xenpvh-base2 bouyer-xenpvh-base1 bouyer-xenpvh-base bouyer-xenpvh bouyer-xeni386-nbase bouyer-xeni386-merge1 bouyer-xeni386-base bouyer-xeni386 bouyer-xenamd64-base2 bouyer-xenamd64-base bouyer-xenamd64 bouyer-sunxi-drm-base bouyer-sunxi-drm bouyer-socketcan-base1 bouyer-socketcan-base bouyer-socketcan bouyer-quota2-nbase bouyer-quota2-base bouyer-quota2 agc-symver-base agc-symver ad-socklock-base1 ad-namecache-base3 ad-namecache-base2 ad-namecache-base1 ad-namecache-base ad-namecache ad-audiomp2-base ad-audiomp2 ad-audiomp-base ad-audiomp abandoned-netbsd-4-base abandoned-netbsd-4 MAIN HEAD |  |
| --- | --- | --- |
| and | Use Text Field yamt-x86pmap-base4 yamt-x86pmap-base3 yamt-x86pmap-base2 yamt-x86pmap-base yamt-x86pmap yamt-vop-base3 yamt-vop-base2 yamt-vop-base yamt-vop yamt-uio\_vmspace-base5 yamt-uio\_vmspace yamt-splraiseipl-base5 yamt-splraiseipl-base4 yamt-splraiseipl-base3 yamt-splraiseipl-base2 yamt-splraiseipl-base yamt-splraiseipl yamt-readahead-pervnode yamt-readahead-perfile yamt-readahead-base3 yamt-readahead-base2 yamt-readahead-base yamt-readahead yamt-pf42-baseX yamt-pf42-base4 yamt-pf42-base3 yamt-pf42-base2 yamt-pf42-base yamt-pf42 yamt-pdpolicy-base9 yamt-pdpolicy-base8 yamt-pdpolicy-base7 yamt-pdpolicy-base6 yamt-pdpolicy-base5 yamt-pdpolicy-base4 yamt-pdpolicy-base3 yamt-pdpolicy-base2 yamt-pdpolicy-base yamt-pdpolicy yamt-pagecache-tag8 yamt-pagecache-base9 yamt-pagecache-base8 yamt-pagecache-base7 yamt-pagecache-base6 yamt-pagecache-base5 yamt-pagecache-base4 yamt-pagecache-base3 yamt-pagecache-base2 yamt-pagecache-base yamt-pagecache yamt-nfs-mp-base9 yamt-nfs-mp-base8 yamt-nfs-mp-base7 yamt-nfs-mp-base6 yamt-nfs-mp-base5 yamt-nfs-mp-base4 yamt-nfs-mp-base3 yamt-nfs-mp-base2 yamt-nfs-mp-base11 yamt-nfs-mp-base10 yamt-nfs-mp-base yamt-nfs-mp yamt-lazymbuf-base15 yamt-lazymbuf-base14 yamt-lazymbuf yamt-kmem-base3 yamt-kmem-base2 yamt-kmem-base yamt-kmem yamt-km-base4 yamt-km-base3 yamt-km-base2 yamt-km-base yamt-km yamt-idlelwp-base8 yamt-idlelwp wrstuden-revivesa-base-4 wrstuden-revivesa-base-3 wrstuden-revivesa-base-2 wrstuden-revivesa-base-1 wrstuden-revivesa-base wrstuden-revivesa wrstuden-fixsa-newbase wrstuden-fixsa-base-1 wrstuden-fixsa-base wrstuden-fixsa wrstuden-devbsize-base wrstuden-devbsize-19991221 wrstuden-devbsize vmlocking2-base3 vmlocking2-base2 vmlocking2-base1 vmlocking2 vmlocking-nbase vmlocking-base vmlocking uebayasi-xip-base4 uebayasi-xip-base3 uebayasi-xip-base2 uebayasi-xip-base1 uebayasi-xip-base uebayasi-xip tls-maxphys-base-20171202 tls-maxphys-base tls-maxphys tls-earlyentropy-base tls-earlyentropy thorpej\_scsipi\_nbase thorpej\_scsipi\_beforemerge thorpej\_scsipi\_base thorpej\_scsipi thorpej-vnode-attr-base thorpej-vnode-attr thorpej-mips-cache-base thorpej-mips-cache thorpej-ifq-base thorpej-ifq thorpej-i2c-spi-conf2-base thorpej-i2c-spi-conf2 thorpej-i2c-spi-conf-base thorpej-i2c-spi-conf thorpej-futex2-base thorpej-futex2 thorpej-futex-base thorpej-futex thorpej-devvp-base3 thorpej-devvp-base2 thorpej-devvp-base thorpej-devvp thorpej-cfargs2-base thorpej-cfargs2 thorpej-cfargs-base thorpej-cfargs thorpej-atomic-base thorpej-atomic thorpej-altq-separation-base thorpej-altq-separation simonb-wapbl-nbase simonb-wapbl-base simonb-wapbl simonb-timecounters-base simonb-timecounters simonb-timcounters-final rpaulo-netinet-merge-pcb-base rpaulo-netinet-merge-pcb rmind-uvmplock-nbase rmind-uvmplock-base rmind-uvmplock rmind-smpnet-nbase rmind-smpnet-base rmind-smpnet riastradh-xf86-video-intel-2-7-1-pre-2-21-15 riastradh-drm2-base3 riastradh-drm2-base2 riastradh-drm2-base1 riastradh-drm2-base riastradh-drm2 reinoud-bufcleanup-nbase reinoud-bufcleanup-base reinoud-bufcleanup prg-localcount2-base3 prg-localcount2-base2 prg-localcount2-base1 prg-localcount2-base prg-localcount2 pre-chs-ubcperf post-newlock2-merge post-chs-ubcperf phil-wifi-base phil-wifi-20200421 phil-wifi-20200411 phil-wifi-20200406 phil-wifi-20191119 phil-wifi-20190609 phil-wifi pgoyette-localcount-base pgoyette-localcount-20170426 pgoyette-localcount-20170320 pgoyette-localcount-20170107 pgoyette-localcount-20161104 pgoyette-localcount-20160806 pgoyette-localcount-20160726 pgoyette-localcount pgoyette-compat-merge-20190127 pgoyette-compat-base pgoyette-compat-20190127 pgoyette-compat-20190118 pgoyette-compat-1226 pgoyette-compat-1126 pgoyette-compat-1020 pgoyette-compat-0930 pgoyette-compat-0906 pgoyette-compat-0728 pgoyette-compat-0625 pgoyette-compat-0521 pgoyette-compat-0502 pgoyette-compat-0422 pgoyette-compat-0415 pgoyette-compat-0407 pgoyette-compat-0330 pgoyette-compat-0322 pgoyette-compat-0315 pgoyette-compat peter-altq-base peter-altq perseant-stdc-iso10646-base perseant-stdc-iso10646 perseant-exfatfs-base-20240630 perseant-exfatfs-base perseant-exfatfs nick-nhusb-base-20170825 nick-nhusb-base-20170204 nick-nhusb-base-20161204 nick-nhusb-base-20161004 nick-nhusb-base-20160907 nick-nhusb-base-20160529 nick-nhusb-base-20160422 nick-nhusb-base-20160319 nick-nhusb-base-20151226 nick-nhusb-base-20150921 nick-nhusb-base-20150606 nick-nhusb-base-20150406 nick-nhusb-base nick-nhusb nick-net80211-sync-base nick-net80211-sync nick-hppapmap-base4 nick-hppapmap-base3 nick-hppapmap-base2 nick-hppapmap-base nick-hppapmap nick-csl-alignment-base5 nick-csl-alignment-base nick-csl-alignment newlock2-nbase newlock2-base newlock2 newlock-base newlock netbsd-9-base netbsd-9-4-RELEASE netbsd-9-3-RELEASE netbsd-9-2-RELEASE netbsd-9-1-RELEASE netbsd-9-0-RELEASE netbsd-9-0-RC2 netbsd-9-0-RC1 netbsd-9 netbsd-8-base netbsd-8-3-RELEASE netbsd-8-2-RELEASE netbsd-8-1-RELEASE netbsd-8-1-RC1 netbsd-8-0-RELEASE netbsd-8-0-RC2 netbsd-8-0-RC1 netbsd-8 netbsd-7-nhusb-base-20170116 netbsd-7-nhusb-base netbsd-7-nhusb netbsd-7-base netbsd-7-2-RELEASE netbsd-7-1-RELEASE netbsd-7-1-RC2 netbsd-7-1-RC1 netbsd-7-1-2-RELEASE netbsd-7-1-1-RELEASE netbsd-7-1 netbsd-7-0-RELEASE netbsd-7-0-RC3 netbsd-7-0-RC2 netbsd-7-0-RC1 netbsd-7-0-2-RELEASE netbsd-7-0-1-RELEASE netbsd-7-0 netbsd-7 netbsd-6-base netbsd-6-1-RELEASE netbsd-6-1-RC4 netbsd-6-1-RC3 netbsd-6-1-RC2 netbsd-6-1-RC1 netbsd-6-1-5-RELEASE netbsd-6-1-4-RELEASE netbsd-6-1-3-RELEASE netbsd-6-1-2-RELEASE netbsd-6-1-1-RELEASE netbsd-6-1 netbsd-6-0-RELEASE netbsd-6-0-RC2 netbsd-6-0-RC1 netbsd-6-0-6-RELEASE netbsd-6-0-5-RELEASE netbsd-6-0-4-RELEASE netbsd-6-0-3-RELEASE netbsd-6-0-2-RELEASE netbsd-6-0-1-RELEASE netbsd-6-0 netbsd-6 netbsd-5-base netbsd-5-2-RELEASE netbsd-5-2-RC1 netbsd-5-2-3-RELEASE netbsd-5-2-2-RELEASE netbsd-5-2-1-RELEASE netbsd-5-2 netbsd-5-1-RELEASE netbsd-5-1-RC4 netbsd-5-1-RC3 netbsd-5-1-RC2 netbsd-5-1-RC1 netbsd-5-1-5-RELEASE netbsd-5-1-4-RELEASE netbsd-5-1-3-RELEASE netbsd-5-1-2-RELEASE netbsd-5-1-1-RELEASE netbsd-5-1 netbsd-5-0-RELEASE netbsd-5-0-RC4 netbsd-5-0-RC3 netbsd-5-0-RC2 netbsd-5-0-RC1 netbsd-5-0-2-RELEASE netbsd-5-0-1-RELEASE netbsd-5-0 netbsd-5 netbsd-4-base netbsd-4-0-RELEASE netbsd-4-0-RC5 netbsd-4-0-RC4 netbsd-4-0-RC3 netbsd-4-0-RC2 netbsd-4-0-RC1 netbsd-4-0-1-RELEASE netbsd-4-0 netbsd-4 netbsd-3-base netbsd-3-1-RELEASE netbsd-3-1-RC4 netbsd-3-1-RC3 netbsd-3-1-RC2 netbsd-3-1-RC1 netbsd-3-1-1-RELEASE netbsd-3-1 netbsd-3-0-RELEASE netbsd-3-0-RC6 netbsd-3-0-RC5 netbsd-3-0-RC4 netbsd-3-0-RC3 netbsd-3-0-RC2 netbsd-3-0-RC1 netbsd-3-0-3-RELEASE netbsd-3-0-2-RELEASE netbsd-3-0-1-RELEASE netbsd-3-0 netbsd-3 netbsd-2-base netbsd-2-1-RELEASE netbsd-2-1-RC6 netbsd-2-1-RC5 netbsd-2-1-RC4 netbsd-2-1-RC3 netbsd-2-1-RC2 netbsd-2-1-RC1 netbsd-2-1 netbsd-2-0-base netbsd-2-0-RELEASE netbsd-2-0-RC5 netbsd-2-0-RC4 netbsd-2-0-RC3 netbsd-2-0-RC2 netbsd-2-0-RC1 netbsd-2-0-3-RELEASE netbsd-2-0-2-RELEASE netbsd-2-0-1-RELEASE netbsd-2-0 netbsd-2 netbsd-10-base netbsd-10-1-RELEASE netbsd-10-0-RELEASE netbsd-10-0-RC6 netbsd-10-0-RC5 netbsd-10-0-RC4 netbsd-10-0-RC3 netbsd-10-0-RC2 netbsd-10-0-RC1 netbsd-10 netbsd-1-6-base netbsd-1-6-RELEASE netbsd-1-6-RC3 netbsd-1-6-RC2 netbsd-1-6-RC1 netbsd-1-6-PATCH002-RELEASE netbsd-1-6-PATCH002-RC4 netbsd-1-6-PATCH002-RC3 netbsd-1-6-PATCH002-RC2 netbsd-1-6-PATCH002-RC1 netbsd-1-6-PATCH002 netbsd-1-6-PATCH001-RELEASE netbsd-1-6-PATCH001-RC3 netbsd-1-6-PATCH001-RC2 netbsd-1-6-PATCH001-RC1 netbsd-1-6-PATCH001 netbsd-1-6 netbsd-1-5-base netbsd-1-5-RELEASE netbsd-1-5-PATCH003 netbsd-1-5-PATCH002 netbsd-1-5-PATCH001 netbsd-1-5-BETA2 netbsd-1-5-BETA netbsd-1-5-ALPHA2 netbsd-1-5 nathanw\_sa\_end nathanw\_sa\_before\_merge nathanw\_sa\_base nathanw\_sa mjf-ufs-trans-base mjf-ufs-trans mjf-devfs2-base mjf-devfs2 mjf-devfs-base mjf-devfs minoura-xpg4dl-base minoura-xpg4dl matt-premerge-20091211 matt-nb8-mediatek-base matt-nb8-mediatek matt-nb6-plus-nbase matt-nb6-plus-base matt-nb6-plus matt-nb5-pq3-base matt-nb5-pq3 matt-nb5-mips64-u2-k2-k4-k7-k8-k9 matt-nb5-mips64-u1-k1-k5 matt-nb5-mips64-premerge-20101231 matt-nb5-mips64-premerge-20091211 matt-nb5-mips64-k15 matt-nb5-mips64 matt-nb4-mips64-k7-u2a-k9b matt-nb4-arm-base matt-nb4-arm matt-mips64-premerge-20101231 matt-mips64-base2 matt-mips64-base matt-mips64 matt-armv6-prevmlocking matt-armv6-nbase matt-armv6-base matt-armv6 localcount-20160914 ktrace-lwp-base ktrace-lwp kqueue-beforemerge kqueue-base kqueue-aftermerge kqueue khorben-n900 kent-audio2-base kent-audio2 kent-audio1-beforemerge kent-audio1-base kent-audio1 keiichi-mipv6-nbase keiichi-mipv6-base keiichi-mipv6 kame\_14\_19990705 kame\_14\_19990628 kame\_141\_19991130 kame jymxensuspend-base jym-xensuspend-nbase jym-xensuspend-base jym-xensuspend jruoho-x86intr-base jruoho-x86intr jmcneill-usbmp-pre-base2 jmcneill-usbmp-base9 jmcneill-usbmp-base8 jmcneill-usbmp-base7 jmcneill-usbmp-base6 jmcneill-usbmp-base5 jmcneill-usbmp-base4 jmcneill-usbmp-base3 jmcneill-usbmp-base2 jmcneill-usbmp-base10 jmcneill-usbmp-base jmcneill-usbmp jmcneill-pm-base jmcneill-pm jmcneill-base jmcneill-audiomp3-base jmcneill-audiomp3 jdolecek-ncq-base jdolecek-ncq isaki-audio2-base isaki-audio2 is-mlppp-base is-mlppp ifpoll-base hpcarm-cleanup-nbase hpcarm-cleanup-base hpcarm-cleanup haad-nbase2 haad-dm-base2 haad-dm-base1 haad-dm-base haad-dm gmcgarry\_ucred\_base gmcgarry\_ucred gmcgarry\_ctxsw\_base gmcgarry\_ctxsw gehenna-devsw-base gehenna-devsw gdamore-uart-base gdamore-uart fvdl\_fs64\_base fvdl-softdep-base fvdl-softdep elad-kernelauth-base elad-kernelauth eeh-devprop-base eeh-devprop cube-autoconf-base cube-autoconf comdex-fall-1999-base comdex-fall-1999 cjep\_sun2x-base1 cjep\_sun2x-base cjep\_sun2x cjep\_staticlib\_x-base1 cjep\_staticlib\_x-base cjep\_staticlib\_x chs-ubc2-newbase chs-ubc2-base chs-ubc2 cherry-xenmp-base cherry-xenmp chap-midi-nbase chap-midi-base chap-midi bouyer-xenpvh-base2 bouyer-xenpvh-base1 bouyer-xenpvh-base bouyer-xenpvh bouyer-xeni386-nbase bouyer-xeni386-merge1 bouyer-xeni386-base bouyer-xeni386 bouyer-xenamd64-base2 bouyer-xenamd64-base bouyer-xenamd64 bouyer-sunxi-drm-base bouyer-sunxi-drm bouyer-socketcan-base1 bouyer-socketcan-base bouyer-socketcan bouyer-quota2-nbase bouyer-quota2-base bouyer-quota2 agc-symver-base agc-symver ad-socklock-base1 ad-namecache-base3 ad-namecache-base2 ad-namecache-base1 ad-namecache-base ad-namecache ad-audiomp2-base ad-audiomp2 ad-audiomp-base ad-audiomp abandoned-netbsd-4-base abandoned-netbsd-4 MAIN HEAD |  |

Log view options

| Preferred diff type: | Colored Long colored Unified Context Side by side |  |
| --- | --- | --- |
| View only branch: | Show all branches yamt-x86pmap yamt-vop yamt-uio\_vmspace yamt-splraiseipl yamt-readahead yamt-pf42 yamt-pdpolicy yamt-pagecache yamt-nfs-mp yamt-lazymbuf yamt-kmem yamt-km yamt-idlelwp wrstuden-revivesa wrstuden-fixsa wrstuden-devbsize vmlocking2 vmlocking uebayasi-xip tls-maxphys tls-earlyentropy thorpej\_scsipi thorpej-vnode-attr thorpej-mips-cache thorpej-ifq thorpej-i2c-spi-conf2 thorpej-i2c-spi-conf thorpej-futex2 thorpej-futex thorpej-devvp thorpej-cfargs2 thorpej-cfargs thorpej-atomic thorpej-altq-separation simonb-wapbl simonb-timecounters rpaulo-netinet-merge-pcb rmind-uvmplock rmind-smpnet riastradh-drm2 reinoud-bufcleanup prg-localcount2 phil-wifi pgoyette-localcount pgoyette-compat peter-altq perseant-stdc-iso10646 perseant-exfatfs nick-nhusb nick-net80211-sync nick-hppapmap nick-csl-alignment newlock2 newlock netbsd-9 netbsd-8 netbsd-7-nhusb netbsd-7-1 netbsd-7-0 netbsd-7 netbsd-6-1 netbsd-6-0 netbsd-6 netbsd-5-2 netbsd-5-1 netbsd-5-0 netbsd-5 netbsd-4-0 netbsd-4 netbsd-3-1 netbsd-3-0 netbsd-3 netbsd-2-1 netbsd-2-0 netbsd-2 netbsd-10 netbsd-1-6 netbsd-1-5 nathanw\_sa mjf-ufs-trans mjf-devfs2 mjf-devfs minoura-xpg4dl matt-nb8-mediatek matt-nb6-plus matt-nb5-pq3 matt-nb5-mips64 matt-nb4-arm matt-mips64 matt-armv6 ktrace-lwp kqueue khorben-n900 kent-audio2 kent-audio1 keiichi-mipv6 kame jym-xensuspend jruoho-x86intr jmcneill-usbmp jmcneill-pm jmcneill-audiomp3 jdolecek-ncq isaki-audio2 is-mlppp hpcarm-cleanup haad-dm gmcgarry\_ucred gmcgarry\_ctxsw gehenna-devsw gdamore-uart fvdl-softdep elad-kernelauth eeh-devprop cube-autoconf comdex-fall-1999 cjep\_sun2x cjep\_staticlib\_x chs-ubc2 cherry-xenmp chap-midi bouyer-xenpvh bouyer-xeni386 bouyer-xenamd64 bouyer-sunxi-drm bouyer-socketcan bouyer-quota2 agc-symver ad-namecache ad-audiomp2 ad-audiomp abandoned-netbsd-4 MAIN |  |
| Sort log by: | Not sorted Commit date Revision |  |

---

CVSweb <webmaster@jp.NetBSD.org>


=== Content from ftp.netbsd.org_7aa7d234_20250124_184518.html ===
-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1
NetBSD Security Advisory 2008-011
=================================
Topic: ICMPv6 MLD query
Version: NetBSD-current: affected
NetBSD 4.0: affected
NetBSD 3.1.\*: not affected
NetBSD 3.1: not affected
NetBSD 3.0.\*: not affected
NetBSD 3.0: not affected
Severity: Denial of service
Fixed: NetBSD-current: August 22, 2008
NetBSD-4-0 branch: August 23, 2008
(4.0.1 will include the fix)
NetBSD-4 branch: August 23, 2008
(4.1 will include the fix)
Abstract
========
A malformed ICMPv6 MLD (RFC 2710) query directed at a NetBSD host can
result in a denial of service (system panic).
This vulnerability has been assigned CVE-2008-2464.
Technical Details
=================
An error occurs when processing an MLD packet with certain values
in the Maximum Response Delay field.
Solutions and Workarounds
=========================
Only kernels compiled with the following option are vulnerable to this issue:
options INET6
As a temporary workaround recompile the kernel with the above option
commented out. The default NetBSD GENERIC kernels have this
option enabled.
For all NetBSD versions, you need to obtain fixed kernel sources,
rebuild and install the new kernel, and reboot the system.
The fixed source may be obtained from the NetBSD CVS repository.
The following instructions briefly summarise how to upgrade your
kernel. In these instructions, replace:
ARCH with your architecture (from uname -m), and
KERNCONF with the name of your kernel configuration file.
To update from CVS, re-build, and re-install the kernel:
# cd src
# cvs update -d -P sys/netinet6/mld6.c
# ./build.sh kernel=KERNCONF
# mv /netbsd /netbsd.old
# cp sys/arch/ARCH/compile/obj/KERNCONF/netbsd /netbsd
# shutdown -r now
For more information on how to do this, see:
http://www.NetBSD.org/guide/en/chap-kernel.html
Thanks To
=========
Matt Thomas for the fix and CERT-FI for co-ordination of the issue.
Miikka Saukko, Ossi Herrala and Jukka Taimisto from the CROSS project
at Codenomicon Ltd. are credited with discovering this issue and providing
an initial fix.
Revision History
================
2008-09-04 Initial release
More Information
================
Advisories may be updated as new information becomes available.
The most recent version of this advisory (PGP signed) can be found at
ftp://ftp.NetBSD.org/pub/NetBSD/security/advisories/NetBSD-SA2008-011.txt.asc
Information about NetBSD and NetBSD security can be found at
http://www.NetBSD.org/ and http://www.NetBSD.org/Security/.
Copyright 2008, The NetBSD Foundation, Inc. All Rights Reserved.
Redistribution permitted only in full, unmodified form.
$NetBSD: NetBSD-SA2008-011.txt,v 1.4 2008/09/04 20:32:25 adrianp Exp $
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.9 (NetBSD)
iQCVAwUBSMBF5T5Ru2/4N2IFAQJlswQAwkQI9ituVlp6GTjvruX0ufDYjnWaN2rJ
p37o4AdBXlyQlsnlvyAuDgmW9daTaaRkfKeW9xyk5lI6Z7quRa/rf+r6s8Xk2YA+
iICaaGR5TBPzkSmJ1d7qgdiPvJhstsAzfazazTXlz+GixQzWOUb6P+AJSGbjGX3L
9Ziphg4ZnIA=
=aChz
-----END PGP SIGNATURE-----

