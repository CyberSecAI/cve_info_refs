=== Content from lists.xensource.com_d5d09b2c_20250125_034144.html ===


|  |  |
| --- | --- |
|  |  |
| |  | | --- |  [Xen](/) |  |
| | [Home](http://www.xen.org/) | [Products](http://www.xen.org/products/) | [Support](http://www.xen.org/support/) | [Community](http://www.xen.org/community/) | [News](http://www.xen.org/news/) | | --- | --- | --- | --- | --- | |  |
|  |  |
| xen-devel [[Top](../)] [[All Lists](/archives/html)]       | [<prev](msg00845.html) **[[Date](index.html#00846)]** [next>](msg00847.html) | [[Advanced](/archives/cgi-bin/namazu.cgi?idxname=xen-devel)] | [<prev](msg00845.html) **[[Thread](threads.html#00846)]** [next>](msg00847.html) | | --- | --- | --- |       Re: [Xen-devel] PATCH: Actually make /local/domain/$DOMID readonly to th  | from [[*Daniel P. Berrange*](/archives/cgi-bin/namazu.cgi?query=%2Bfrom%3Aberrange%40redhat.com&idxname=xen-devel&sort=date%3Alate)] | [[Permanent Link](/archives/cgi-bin/mesg.cgi?a=xen-devel&i=20081218174951.GZ23277%40redhat.com)][[Original](/archives/cgi-bin/extract-mesg.cgi?a=xen-devel&m=2008-12&i=20081218174951.GZ23277%40redhat.com)] | | --- | --- |    | **To**: | Keir Fraser <keir.fraser@xxxxxxxxxxxxx> | | --- | --- | | **Subject**: | Re: [Xen-devel] PATCH: Actually make /local/domain/$DOMID readonly to the guest | | **From**: | "Daniel P. Berrange" <berrange@xxxxxxxxxx> | | **Date**: | Thu, 18 Dec 2008 17:49:51 +0000 | | **Cc**: | xen-devel@xxxxxxxxxxxxxxxxxxx | | **Delivery-date**: | Thu, 18 Dec 2008 09:50:20 -0800 | | **Envelope-to**: | www-data@xxxxxxxxxxxxxxxxxxx | | **In-reply-to**: | <C5703706.10B0%keir.fraser@xxxxxxxxxxxxx> | | **List-help**: | <mailto:xen-devel-request@lists.xensource.com?subject=help> | | **List-id**: | Xen developer discussion <xen-devel.lists.xensource.com> | | **List-post**: | <mailto:xen-devel@lists.xensource.com> | | **List-subscribe**: | <<http://lists.xensource.com/mailman/listinfo/xen-devel>>, <mailto:xen-devel-request@lists.xensource.com?subject=subscribe> | | **List-unsubscribe**: | <<http://lists.xensource.com/mailman/listinfo/xen-devel>>, <mailto:xen-devel-request@lists.xensource.com?subject=unsubscribe> | | **References**: | <20081218155306.GV23277@xxxxxxxxxx> <C5703706.10B0%keir.fraser@xxxxxxxxxxxxx> | | **Reply-to**: | "Daniel P. Berrange" <berrange@xxxxxxxxxx> | | **Sender**: | xen-devel-bounces@xxxxxxxxxxxxxxxxxxx | | **User-agent**: | Mutt/1.4.1i |     | ``` On Thu, Dec 18, 2008 at 05:21:10PM +0000, Keir Fraser wrote: > On 18/12/2008 15:53, "Daniel P. Berrange" <berrange@xxxxxxxxxx> wrote: >  > > Explicitly give Dom0 permissions on the /local/domain/$DOMID so it > > becomes the owner of the path. The guest is then granted read perm > > on the path. >  > Thanks Daniel, that's a nasty one! >  > However there are other places in xend that commit the same error, and this > interface weakness would doubtless bite us again in future. Hence the patch > I actually committed (c/s 18933) actually takes a different strategy: in the > bowels of the xend xenstore C package I check to see if the caller is try to > change permissions of the node owner, and if so I fudge in dom0 as the owner > instead. A bit grim, but I think probably a safer bet in this instance.  I think that looks correct to me. The easy way to test is to try and write to '/local/domain/$DOMID/console/tty' from within the guest and see if it succeeds or not    Daniel -- |: Red Hat, Engineering, London   -o-   <http://people.redhat.com/berrange/> :| |: <http://libvirt.org>  -o-  <http://virt-manager.org>  -o-  <http://ovirt.org> :| |: <http://autobuild.org>       -o-         <http://search.cpan.org/~danberr/> :| |: GnuPG: 7D3B9505  -o-  F3C9 553F A1DA 4AC2 5648 23C1 B3DF F742 7D3B 9505 :|  _______________________________________________ Xen-devel mailing list Xen-devel@xxxxxxxxxxxxxxxxxxx <http://lists.xensource.com/xen-devel>   ``` | | --- |   | [[More with this subject...](/archives/cgi-bin/namazu.cgi?query=%2Bsubject:%2F%5E%28%3F:%5E%5Cs%2A%28re%7Csv%7Cfwd%7Cfw%29%5B%5C%5B%5C%5D%5Cd%5D%2A%5B:%3E-%5D%2B%5Cs%2A%29%2A%5C%5BXen%5C-devel%5C%5D%5Cs%2BPATCH%5C:%5Cs%2BActually%5Cs%2Bmake%5Cs%2B%5C%2Flocal%5C%2Fdomain%5C%2F%5C%24DOMID%5Cs%2Breadonly%5Cs%2Bto%5Cs%2Bthe%5Cs%2Bguest%5Cs%2A%24%2F&idxname=xen-devel&sort=date%3Alate)] | | --- |   | [**<Prev in Thread**](msg00845.html)] | **Current Thread** | [[**Next in Thread>**](msg00847.html) | | --- | --- | --- | | * **[[Xen-devel] PATCH: Actually make /local/domain/$DOMID readonly to the guest](msg00842.html)**, *Daniel P. Berrange*   + **[Re: [Xen-devel] PATCH: Actually make /local/domain/$DOMID readonly to the guest](msg00845.html)**, *Keir Fraser*     - **Re: [Xen-devel] PATCH: Actually make /local/domain/$DOMID readonly to the guest**,       *Daniel P. Berrange* <=       * **[Re: [Xen-devel] PATCH: Actually make /local/domain/$DOMID readonly to the guest](msg00847.html)**, *Keir Fraser* | | | |

| Previous by Date: | **[Re: [Xen-devel] PATCH: Actually make /local/domain/$DOMID readonly to the guest](msg00845.html)**, *Keir Fraser* |
| --- | --- |
| Next by Date: | **[Re: [Xen-devel] PATCH: Actually make /local/domain/$DOMID readonly to the guest](msg00847.html)**, *Keir Fraser* |
| Previous by Thread: | **[Re: [Xen-devel] PATCH: Actually make /local/domain/$DOMID readonly to the guest](msg00845.html)**, *Keir Fraser* |
| Next by Thread: | **[Re: [Xen-devel] PATCH: Actually make /local/domain/$DOMID readonly to the guest](msg00847.html)**, *Keir Fraser* |
| Indexes: | [[**Date**](index.html#00846)] [[**Thread**](threads.html#00846)] [[**Top**](../)] [[**All Lists**](/archives/html)] |

  ||  |  |

| Copyright ©, Citrix Systems Inc. All rights reserved. [Legal and Privacy](http://www.xen.org/community/trademark.html) | Citrix [This site is hosted by Citrix](http://www.citrix.com) |
| --- | --- |



=== Content from lists.xensource.com_9eced84e_20250125_034144.html ===


|  |  |
| --- | --- |
|  |  |
| |  | | --- |  [Xen](/) |  |
| | [Home](http://www.xen.org/) | [Products](http://www.xen.org/products/) | [Support](http://www.xen.org/support/) | [Community](http://www.xen.org/community/) | [News](http://www.xen.org/news/) | | --- | --- | --- | --- | --- | |  |
|  |  |
| xen-devel [[Top](../)] [[All Lists](/archives/html)]       | [<prev](msg00841.html) **[[Date](index.html#00842)]** [next>](msg00843.html) | [[Advanced](/archives/cgi-bin/namazu.cgi?idxname=xen-devel)] | [<prev](msg00841.html) **[[Thread](threads.html#00842)]** [next>](msg00845.html) | | --- | --- | --- |       [Xen-devel] PATCH: Actually make /local/domain/$DOMID readonly to the gu  | from [[*Daniel P. Berrange*](/archives/cgi-bin/namazu.cgi?query=%2Bfrom%3Aberrange%40redhat.com&idxname=xen-devel&sort=date%3Alate)] | [[Permanent Link](/archives/cgi-bin/mesg.cgi?a=xen-devel&i=20081218155306.GV23277%40redhat.com)][[Original](/archives/cgi-bin/extract-mesg.cgi?a=xen-devel&m=2008-12&i=20081218155306.GV23277%40redhat.com)] | | --- | --- |    | **To**: | xen-devel@xxxxxxxxxxxxxxxxxxx | | --- | --- | | **Subject**: | [Xen-devel] PATCH: Actually make /local/domain/$DOMID readonly to the guest | | **From**: | "Daniel P. Berrange" <berrange@xxxxxxxxxx> | | **Date**: | Thu, 18 Dec 2008 15:53:07 +0000 | | **Delivery-date**: | Thu, 18 Dec 2008 07:53:34 -0800 | | **Envelope-to**: | www-data@xxxxxxxxxxxxxxxxxxx | | **List-help**: | <mailto:xen-devel-request@lists.xensource.com?subject=help> | | **List-id**: | Xen developer discussion <xen-devel.lists.xensource.com> | | **List-post**: | <mailto:xen-devel@lists.xensource.com> | | **List-subscribe**: | <<http://lists.xensource.com/mailman/listinfo/xen-devel>>, <mailto:xen-devel-request@lists.xensource.com?subject=subscribe> | | **List-unsubscribe**: | <<http://lists.xensource.com/mailman/listinfo/xen-devel>>, <mailto:xen-devel-request@lists.xensource.com?subject=unsubscribe> | | **Reply-to**: | "Daniel P. Berrange" <berrange@xxxxxxxxxx> | | **Sender**: | xen-devel-bounces@xxxxxxxxxxxxxxxxxxx | | **User-agent**: | Mutt/1.4.1i |     | ``` A few months back change 18564 fixed a permissions flaw in xenstore which allowed guests to over-write critical data used by the host      changeset:   18564:60937c4c5a67     user:        Keir Fraser <keir.fraser@xxxxxxxxxx>     date:        Thu Oct 02 10:37:28 2008 +0100     files:       tools/python/xen/xend/XendDomainInfo.py  tools/python/xen/xend/image.py     description:     xend: Make only selected subdirs of /local/domain/<domid> writable by the  guest.      This protects critical data like     /local/domain/<domid>/console/{tty,limit}. It also means we can trust     .../vm, and hence do not need /vm_path. Various parts of the previous     two changesets disappear.      Signed-off-by: Keir Fraser <keir.fraser@xxxxxxxxxx>   One of the parts in this patch was  @@ -1269,8 +1301,11 @@ class XendDomainInfo:      def _recreateDomFunc(self, t):          t.remove()          t.mkdir() -        t.set_permissions({'dom' : self.domid}) +        t.set_permissions({'dom' : self.domid, 'read' : True})          t.write('vm', self.vmpath) +        for i in [ 'device', 'control', 'error' ]: +            t.mkdir(i) +            t.set_permissions(i, {'dom' : self.domid})   Most people reading this chunk would assume that the call       t.set_permissions({'dom' : self.domid, 'read' : True})  would make the xenstore path in question read only to the guest listed. Unfortunately the 'set_permissions' call turns out to be bizarre  The first permission record listed does not set permissions at all. It in fact sets the 'owner' of the path. The owner is given full access to do whatever they like in that path, regardless of what permissions bits are set.  To actually restrict the permissions on a path for a guest, you have to first give a different guest permissions on the path so it becomes the 'owner'.  The upshot is that changeset  18564:60937c4c5a67 didn't do anything to protect xenstore data from the guest as we thought it did :-(  The increment fix is to explicitly make Dom0 the owner of all the  /local/domain/$DOMID  paths, and then give the DomU read permission  So we need the following additional patch applied:    diff -r a76b4e00e186 tools/python/xen/xend/XendDomainInfo.py --- a/tools/python/xen/xend/XendDomainInfo.py   Tue Dec 16 13:14:25 2008 +0000 +++ b/tools/python/xen/xend/XendDomainInfo.py   Thu Dec 18 10:20:42 2008 -0500 @@ -1359,7 +1359,18 @@ class XendDomainInfo:      def _recreateDomFunc(self, t):          t.remove()          t.mkdir() -        t.set_permissions({'dom' : self.domid, 'read' : True}) +        # +        # The first permission record on any node indicates +        # the domain owner. Thus any permissions associated +        # with the first record are ignored, since the owner +        # is allowed todo anything. +        # +        # Thus to make the node read-only to the guest +        # we must explicitly give Dom0 permission making +        # it the owner, even though Dom0 already has all the +        # permissions inherited from the parent. +        # +        t.set_permissions({'dom' : 0 }, {'dom' : self.domid, 'read' : True})          t.write('vm', self.vmpath)          for i in [ 'device', 'control', 'error', 'memory' ]:              t.mkdir(i)  Explicitly give Dom0 permissions on the /local/domain/$DOMID so it becomes the owner of the path. The guest is then granted read perm on the path.     Signed-off-by: Daniel P. Berrange <berrange@xxxxxxxxxx>  Daniel --  |: Red Hat, Engineering, London   -o-   <http://people.redhat.com/berrange/> :| |: <http://libvirt.org>  -o-  <http://virt-manager.org>  -o-  <http://ovirt.org> :| |: <http://autobuild.org>       -o-         <http://search.cpan.org/~danberr/> :| |: GnuPG: 7D3B9505  -o-  F3C9 553F A1DA 4AC2 5648 23C1 B3DF F742 7D3B 9505 :|  _______________________________________________ Xen-devel mailing list Xen-devel@xxxxxxxxxxxxxxxxxxx <http://lists.xensource.com/xen-devel>   ``` | | --- |   | [[More with this subject...](/archives/cgi-bin/namazu.cgi?query=%2Bsubject:%2F%5E%28%3F:%5E%5Cs%2A%28re%7Csv%7Cfwd%7Cfw%29%5B%5C%5B%5C%5D%5Cd%5D%2A%5B:%3E-%5D%2B%5Cs%2A%29%2A%5C%5BXen%5C-devel%5C%5D%5Cs%2BPATCH%5C:%5Cs%2BActually%5Cs%2Bmake%5Cs%2B%5C%2Flocal%5C%2Fdomain%5C%2F%5C%24DOMID%5Cs%2Breadonly%5Cs%2Bto%5Cs%2Bthe%5Cs%2Bguest%5Cs%2A%24%2F&idxname=xen-devel&sort=date%3Alate)] | | --- |   | **<Prev in Thread**] | **Current Thread** | [[**Next in Thread>**](msg00845.html) | | --- | --- | --- | | * **[Xen-devel] PATCH: Actually make /local/domain/$DOMID readonly to the guest**,   *Daniel P. Berrange* <=   + **[Re: [Xen-devel] PATCH: Actually make /local/domain/$DOMID readonly to the guest](msg00845.html)**, *Keir Fraser*     - **[Re: [Xen-devel] PATCH: Actually make /local/domain/$DOMID readonly to the guest](msg00846.html)**, *Daniel P. Berrange*       * **[Re: [Xen-devel] PATCH: Actually make /local/domain/$DOMID readonly to the guest](msg00847.html)**, *Keir Fraser* | | | |

| Previous by Date: | **[Re: [Xen-devel] Re: 2.6.26-rc8 pv\_ops causes Unhandled invalid opcode fault/trap](msg00841.html)**, *Guillaume Rousse* |
| --- | --- |
| Next by Date: | **[Re: [Xen-devel] Disabling cirrus-vga](msg00843.html)**, *billy lau* |
| Previous by Thread: | **[Re: [Xen-devel] Re: 2.6.26-rc8 pv\_ops causes Unhandled invalid opcode fault/trap](msg00841.html)**, *Guillaume Rousse* |
| Next by Thread: | **[Re: [Xen-devel] PATCH: Actually make /local/domain/$DOMID readonly to the guest](msg00845.html)**, *Keir Fraser* |
| Indexes: | [[**Date**](index.html#00842)] [[**Thread**](threads.html#00842)] [[**Top**](../)] [[**All Lists**](/archives/html)] |

  ||  |  |

| Copyright ©, Citrix Systems Inc. All rights reserved. [Legal and Privacy](http://www.xen.org/community/trademark.html) | Citrix [This site is hosted by Citrix](http://www.citrix.com) |
| --- | --- |



=== Content from lists.xensource.com_8be44c63_20250125_034145.html ===


|  |  |
| --- | --- |
|  |  |
| |  | | --- |  [Xen](/) |  |
| | [Home](http://www.xen.org/) | [Products](http://www.xen.org/products/) | [Support](http://www.xen.org/support/) | [Community](http://www.xen.org/community/) | [News](http://www.xen.org/news/) | | --- | --- | --- | --- | --- | |  |
|  |  |
| xen-devel [[Top](../)] [[All Lists](/archives/html)]       | [<prev](msg00846.html) **[[Date](index.html#00847)]** [next>](msg00848.html) | [[Advanced](/archives/cgi-bin/namazu.cgi?idxname=xen-devel)] | [<prev](msg00846.html) **[[Thread](threads.html#00847)]** [next>](msg00848.html) | | --- | --- | --- |       Re: [Xen-devel] PATCH: Actually make /local/domain/$DOMID readonly to th  | from [[*Keir Fraser*](/archives/cgi-bin/namazu.cgi?query=%2Bfrom%3Akeir.fraser%40eu.citrix.com&idxname=xen-devel&sort=date%3Alate)] | [[Permanent Link](/archives/cgi-bin/mesg.cgi?a=xen-devel&i=C5703EAD.20608%25keir.fraser%40eu.citrix.com)][[Original](/archives/cgi-bin/extract-mesg.cgi?a=xen-devel&m=2008-12&i=C5703EAD.20608%25keir.fraser%40eu.citrix.com)] | | --- | --- |    | **To**: | "Daniel P. Berrange" <berrange@xxxxxxxxxx> | | --- | --- | | **Subject**: | Re: [Xen-devel] PATCH: Actually make /local/domain/$DOMID readonly to the guest | | **From**: | Keir Fraser <keir.fraser@xxxxxxxxxxxxx> | | **Date**: | Thu, 18 Dec 2008 17:53:49 +0000 | | **Cc**: | xen-devel@xxxxxxxxxxxxxxxxxxx | | **Delivery-date**: | Thu, 18 Dec 2008 09:53:58 -0800 | | **Envelope-to**: | www-data@xxxxxxxxxxxxxxxxxxx | | **In-reply-to**: | <20081218174951.GZ23277@xxxxxxxxxx> | | **List-help**: | <mailto:xen-devel-request@lists.xensource.com?subject=help> | | **List-id**: | Xen developer discussion <xen-devel.lists.xensource.com> | | **List-post**: | <mailto:xen-devel@lists.xensource.com> | | **List-subscribe**: | <<http://lists.xensource.com/mailman/listinfo/xen-devel>>, <mailto:xen-devel-request@lists.xensource.com?subject=subscribe> | | **List-unsubscribe**: | <<http://lists.xensource.com/mailman/listinfo/xen-devel>>, <mailto:xen-devel-request@lists.xensource.com?subject=unsubscribe> | | **Sender**: | xen-devel-bounces@xxxxxxxxxxxxxxxxxxx | | **Thread-index**: | AclhOZSLUDC1Veoldk6O5/dr823FDg== | | **Thread-topic**: | [Xen-devel] PATCH: Actually make /local/domain/$DOMID readonly to the guest | | **User-agent**: | Microsoft-Entourage/12.14.0.081024 |     | ``` On 18/12/2008 17:49, "Daniel P. Berrange" <berrange@xxxxxxxxxx> wrote:  >> However there are other places in xend that commit the same error, and this >> interface weakness would doubtless bite us again in future. Hence the patch >> I actually committed (c/s 18933) actually takes a different strategy: in the >> bowels of the xend xenstore C package I check to see if the caller is try to >> change permissions of the node owner, and if so I fudge in dom0 as the owner >> instead. A bit grim, but I think probably a safer bet in this instance. >  > I think that looks correct to me. The easy way to test is to try and > write to '/local/domain/$DOMID/console/tty' from within the guest and > see if it succeeds or not  Yes, I actually tested that, and it was no longer writeable. Same for a few susceptible nodes under /vm too.   -- Keir    _______________________________________________ Xen-devel mailing list Xen-devel@xxxxxxxxxxxxxxxxxxx <http://lists.xensource.com/xen-devel>   ``` | | --- |   | [[More with this subject...](/archives/cgi-bin/namazu.cgi?query=%2Bsubject:%2F%5E%28%3F:%5E%5Cs%2A%28re%7Csv%7Cfwd%7Cfw%29%5B%5C%5B%5C%5D%5Cd%5D%2A%5B:%3E-%5D%2B%5Cs%2A%29%2A%5C%5BXen%5C-devel%5C%5D%5Cs%2BPATCH%5C:%5Cs%2BActually%5Cs%2Bmake%5Cs%2B%5C%2Flocal%5C%2Fdomain%5C%2F%5C%24DOMID%5Cs%2Breadonly%5Cs%2Bto%5Cs%2Bthe%5Cs%2Bguest%5Cs%2A%24%2F&idxname=xen-devel&sort=date%3Alate)] | | --- |   | [**<Prev in Thread**](msg00846.html)] | **Current Thread** | [**Next in Thread>** | | --- | --- | --- | | * **[[Xen-devel] PATCH: Actually make /local/domain/$DOMID readonly to the guest](msg00842.html)**, *Daniel P. Berrange*   + **[Re: [Xen-devel] PATCH: Actually make /local/domain/$DOMID readonly to the guest](msg00845.html)**, *Keir Fraser*     - **[Re: [Xen-devel] PATCH: Actually make /local/domain/$DOMID readonly to the guest](msg00846.html)**, *Daniel P. Berrange*       * **Re: [Xen-devel] PATCH: Actually make /local/domain/$DOMID readonly to the guest**,         *Keir Fraser* <= | | | |

| Previous by Date: | **[Re: [Xen-devel] PATCH: Actually make /local/domain/$DOMID readonly to the guest](msg00846.html)**, *Daniel P. Berrange* |
| --- | --- |
| Next by Date: | **[[Xen-devel] Fwd: [Xen-users] firewall domU](msg00848.html)**, *Thiago Camargo Martins Cordeiro* |
| Previous by Thread: | **[Re: [Xen-devel] PATCH: Actually make /local/domain/$DOMID readonly to the guest](msg00846.html)**, *Daniel P. Berrange* |
| Next by Thread: | **[[Xen-devel] Fwd: [Xen-users] firewall domU](msg00848.html)**, *Thiago Camargo Martins Cordeiro* |
| Indexes: | [[**Date**](index.html#00847)] [[**Thread**](threads.html#00847)] [[**Top**](../)] [[**All Lists**](/archives/html)] |

  ||  |  |

| Copyright ©, Citrix Systems Inc. All rights reserved. [Legal and Privacy](http://www.xen.org/community/trademark.html) | Citrix [This site is hosted by Citrix](http://www.citrix.com) |
| --- | --- |



=== Content from openwall.com_555fc3e9_20250125_034146.html ===


| [Openwall](/) * [Products](/)   + [Openwall GNU/\*/Linux   *server OS*](/Owl/)+ [Linux Kernel Runtime Guard](/lkrg/)+ [John the Ripper   *password cracker*](/john/)         - [Free & Open Source for any platform](/john/)- [in the cloud](/john/cloud/)- [Pro for Linux](/john/pro/linux/)- [Pro for macOS](/john/pro/macosx/)+ [Wordlists   *for password cracking*](/wordlists/)+ [passwdqc   *policy enforcement*](/passwdqc/)             - [Free & Open Source for Unix](/passwdqc/)- [Pro for Windows (Active Directory)](/passwdqc/windows/)+ [yescrypt   *KDF & password hashing*](/yescrypt/)+ [yespower   *Proof-of-Work (PoW)*](/yespower/)+ [crypt\_blowfish   *password hashing*](/crypt/)+ [phpass   *ditto in PHP*](/phpass/)+ [tcb   *better password shadowing*](/tcb/)+ [Pluggable Authentication Modules](/pam/)+ [scanlogd   *port scan detector*](/scanlogd/)+ [popa3d   *tiny POP3 daemon*](/popa3d/)+ [blists   *web interface to mailing lists*](/blists/)+ [msulogin   *single user mode login*](/msulogin/)+ [php\_mt\_seed   *mt\_rand() cracker*](/php_mt_seed/)* [Services](/services/)* Publications       + [Articles](/articles/)+ [Presentations](/presentations/)* Resources         + [Mailing lists](/lists/)+ [Community wiki](https://openwall.info/wiki/)+ [Source code repositories (GitHub)](https://github.com/openwall)+ [Source code repositories (CVSweb)](https://cvsweb.openwall.com)+ [File archive & mirrors](/mirrors/)+ [How to verify digital signatures](/signatures/)+ [OVE IDs](/ove/)* [What's new](/news) | |
| --- | --- |

| | [Follow @Openwall on Twitter for new release announcements and other news](https://twitter.com/openwall) | | --- | |
| --- | --- |

[[<prev]](../../../2008/12/17/31) [[next>]](2) [[thread-next>]](../../../2008/12/24/1) [[day]](.) [[month]](..) [[year]](../..) [[list]](../../..)
```

Message-Id: <1229680780.19341.7.camel@iankko.englab.brq.redhat.com>
Date: Fri, 19 Dec 2008 10:59:40 +0100
From: Jan Lieskovsky <jlieskov@...hat.com>
To: "Steven M. Christey" <coley@...re.org>
Cc: oss-security@...ts.openwall.com
Subject: CVE Request -- Xen (Upstream patch for CVE-2008-4405 is incomplete)

Hello Steve,

  originally CVE id of CVE-2008-4405 has been assigned to
the following Xen backend issue:

Original references:
<http://lists.xensource.com/archives/html/xen-devel/2008-09/msg00992.html>
<http://lists.xensource.com/archives/html/xen-devel/2008-09/msg00994.html>
(place where was pointed out, this is a security problem -^).
<http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2008-4405>

Original patch:
<http://xenbits.xensource.com/staging/xen-3.3-testing.hg?rev/e0e17216ba70>

The problem:

Daniel P.Berrange has discovered, this original patch is incomplete
to fix this issue. More details here:

<http://lists.xensource.com/archives/html/xen-devel/2008-12/msg00842.html>

Credit goes to: Daniel P.Berrange

Steve, could you please allocate a new CVE id for this revised
fix?

Thanks, Jan.
--
Jan iankko Lieskovsky / Red Hat Security Response Team

```

[Powered by blists](https://www.openwall.com/blists/) - [more mailing lists](https://lists.openwall.net)

Please check out the
[Open Source Software Security Wiki](https://oss-security.openwall.org/wiki/), which is counterpart to this
[mailing list](https://oss-security.openwall.org/wiki/mailing-lists/oss-security).

Confused about [mailing lists](/lists/) and their use?
[Read about mailing lists on Wikipedia](https://en.wikipedia.org/wiki/Electronic_mailing_list)
and check out these
[guidelines on proper formatting of your messages](https://www.complang.tuwien.ac.at/anton/mail-news-errors.html).



=== Content from lists.xensource.com_14a6f355_20250125_034144.html ===


|  |  |
| --- | --- |
|  |  |
| |  | | --- |  [Xen](/) |  |
| | [Home](http://www.xen.org/) | [Products](http://www.xen.org/products/) | [Support](http://www.xen.org/support/) | [Community](http://www.xen.org/community/) | [News](http://www.xen.org/news/) | | --- | --- | --- | --- | --- | |  |
|  |  |
| xen-devel [[Top](../)] [[All Lists](/archives/html)]       | [<prev](msg00844.html) **[[Date](index.html#00845)]** [next>](msg00846.html) | [[Advanced](/archives/cgi-bin/namazu.cgi?idxname=xen-devel)] | [<prev](msg00842.html) **[[Thread](threads.html#00845)]** [next>](msg00846.html) | | --- | --- | --- |       Re: [Xen-devel] PATCH: Actually make /local/domain/$DOMID readonly to th  | from [[*Keir Fraser*](/archives/cgi-bin/namazu.cgi?query=%2Bfrom%3Akeir.fraser%40eu.citrix.com&idxname=xen-devel&sort=date%3Alate)] | [[Permanent Link](/archives/cgi-bin/mesg.cgi?a=xen-devel&i=C5703706.10B0%25keir.fraser%40eu.citrix.com)][[Original](/archives/cgi-bin/extract-mesg.cgi?a=xen-devel&m=2008-12&i=C5703706.10B0%25keir.fraser%40eu.citrix.com)] | | --- | --- |    | **To**: | "Daniel P. Berrange" <berrange@xxxxxxxxxx>, <xen-devel@xxxxxxxxxxxxxxxxxxx> | | --- | --- | | **Subject**: | Re: [Xen-devel] PATCH: Actually make /local/domain/$DOMID readonly to the guest | | **From**: | Keir Fraser <keir.fraser@xxxxxxxxxxxxx> | | **Date**: | Thu, 18 Dec 2008 17:21:10 +0000 | | **Cc**: |  | | **Delivery-date**: | Thu, 18 Dec 2008 09:21:31 -0800 | | **Envelope-to**: | www-data@xxxxxxxxxxxxxxxxxxx | | **In-reply-to**: | <20081218155306.GV23277@xxxxxxxxxx> | | **List-help**: | <mailto:xen-devel-request@lists.xensource.com?subject=help> | | **List-id**: | Xen developer discussion <xen-devel.lists.xensource.com> | | **List-post**: | <mailto:xen-devel@lists.xensource.com> | | **List-subscribe**: | <<http://lists.xensource.com/mailman/listinfo/xen-devel>>, <mailto:xen-devel-request@lists.xensource.com?subject=subscribe> | | **List-unsubscribe**: | <<http://lists.xensource.com/mailman/listinfo/xen-devel>>, <mailto:xen-devel-request@lists.xensource.com?subject=unsubscribe> | | **Sender**: | xen-devel-bounces@xxxxxxxxxxxxxxxxxxx | | **Thread-index**: | AclhNQTkJZcLtJDvHE+FHpHYPJ9/DQ== | | **Thread-topic**: | [Xen-devel] PATCH: Actually make /local/domain/$DOMID readonly to the guest | | **User-agent**: | Microsoft-Entourage/12.14.0.081024 |     | ``` On 18/12/2008 15:53, "Daniel P. Berrange" <berrange@xxxxxxxxxx> wrote:  > Explicitly give Dom0 permissions on the /local/domain/$DOMID so it > becomes the owner of the path. The guest is then granted read perm > on the path.  Thanks Daniel, that's a nasty one!  However there are other places in xend that commit the same error, and this interface weakness would doubtless bite us again in future. Hence the patch I actually committed (c/s 18933) actually takes a different strategy: in the bowels of the xend xenstore C package I check to see if the caller is try to change permissions of the node owner, and if so I fudge in dom0 as the owner instead. A bit grim, but I think probably a safer bet in this instance.  What do you think of it? If it seems okay I will backport and will have to do new RCs of 3.2.3 and 3.3.1.   Thanks again,  Keir    _______________________________________________ Xen-devel mailing list Xen-devel@xxxxxxxxxxxxxxxxxxx <http://lists.xensource.com/xen-devel>   ``` | | --- |   | [[More with this subject...](/archives/cgi-bin/namazu.cgi?query=%2Bsubject:%2F%5E%28%3F:%5E%5Cs%2A%28re%7Csv%7Cfwd%7Cfw%29%5B%5C%5B%5C%5D%5Cd%5D%2A%5B:%3E-%5D%2B%5Cs%2A%29%2A%5C%5BXen%5C-devel%5C%5D%5Cs%2BPATCH%5C:%5Cs%2BActually%5Cs%2Bmake%5Cs%2B%5C%2Flocal%5C%2Fdomain%5C%2F%5C%24DOMID%5Cs%2Breadonly%5Cs%2Bto%5Cs%2Bthe%5Cs%2Bguest%5Cs%2A%24%2F&idxname=xen-devel&sort=date%3Alate)] | | --- |   | [**<Prev in Thread**](msg00842.html)] | **Current Thread** | [[**Next in Thread>**](msg00846.html) | | --- | --- | --- | | * **[[Xen-devel] PATCH: Actually make /local/domain/$DOMID readonly to the guest](msg00842.html)**, *Daniel P. Berrange*   + **Re: [Xen-devel] PATCH: Actually make /local/domain/$DOMID readonly to the guest**,     *Keir Fraser* <=     - **[Re: [Xen-devel] PATCH: Actually make /local/domain/$DOMID readonly to the guest](msg00846.html)**, *Daniel P. Berrange*       * **[Re: [Xen-devel] PATCH: Actually make /local/domain/$DOMID readonly to the guest](msg00847.html)**, *Keir Fraser* | | | |

| Previous by Date: | **[[Xen-devel] Testing candidate 3.3.1-rc3](msg00844.html)**, *Boris Derzhavets* |
| --- | --- |
| Next by Date: | **[Re: [Xen-devel] PATCH: Actually make /local/domain/$DOMID readonly to the guest](msg00846.html)**, *Daniel P. Berrange* |
| Previous by Thread: | **[[Xen-devel] PATCH: Actually make /local/domain/$DOMID readonly to the guest](msg00842.html)**, *Daniel P. Berrange* |
| Next by Thread: | **[Re: [Xen-devel] PATCH: Actually make /local/domain/$DOMID readonly to the guest](msg00846.html)**, *Daniel P. Berrange* |
| Indexes: | [[**Date**](index.html#00845)] [[**Thread**](threads.html#00845)] [[**Top**](../)] [[**All Lists**](/archives/html)] |

  ||  |  |

| Copyright ©, Citrix Systems Inc. All rights reserved. [Legal and Privacy](http://www.xen.org/community/trademark.html) | Citrix [This site is hosted by Citrix](http://www.citrix.com) |
| --- | --- |


