=== Content from git.kernel.org_6a94fc95_20250115_083431.html ===


| [cgit logo](/) | [index](/) : [kernel/git/next/linux-next.git](/pub/scm/linux/kernel/git/next/linux-next.git/) | akpm akpm-base fs-current fs-next master pending-fixes stable |
| --- | --- | --- |
| The linux-next integration testing tree | Linux Next Group |

| [about](/pub/scm/linux/kernel/git/next/linux-next.git/about/)[summary](/pub/scm/linux/kernel/git/next/linux-next.git/)[refs](/pub/scm/linux/kernel/git/next/linux-next.git/refs/?id=ffe2a22562444720b05bdfeb999c03e810d84cbb)[log](/pub/scm/linux/kernel/git/next/linux-next.git/log/)[tree](/pub/scm/linux/kernel/git/next/linux-next.git/tree/?id=ffe2a22562444720b05bdfeb999c03e810d84cbb)[commit](/pub/scm/linux/kernel/git/next/linux-next.git/commit/?id=ffe2a22562444720b05bdfeb999c03e810d84cbb)[diff](/pub/scm/linux/kernel/git/next/linux-next.git/diff/?id=ffe2a22562444720b05bdfeb999c03e810d84cbb)[stats](/pub/scm/linux/kernel/git/next/linux-next.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Pietro Borrello <borrello@diag.uniroma1.it> | 2023-01-28 16:29:17 +0000 |
| --- | --- | --- |
| committer | Jakub Kicinski <kuba@kernel.org> | 2023-01-30 21:06:08 -0800 |
| commit | [ffe2a22562444720b05bdfeb999c03e810d84cbb](/pub/scm/linux/kernel/git/next/linux-next.git/commit/?id=ffe2a22562444720b05bdfeb999c03e810d84cbb) ([patch](/pub/scm/linux/kernel/git/next/linux-next.git/patch/?id=ffe2a22562444720b05bdfeb999c03e810d84cbb)) | |
| tree | [a569626672c79e0b68e338034c69f8f10e4f85d3](/pub/scm/linux/kernel/git/next/linux-next.git/tree/?id=ffe2a22562444720b05bdfeb999c03e810d84cbb) | |
| parent | [84115f0e74ea73eccc44842a125f242a02097493](/pub/scm/linux/kernel/git/next/linux-next.git/commit/?id=84115f0e74ea73eccc44842a125f242a02097493) ([diff](/pub/scm/linux/kernel/git/next/linux-next.git/diff/?id=ffe2a22562444720b05bdfeb999c03e810d84cbb&id2=84115f0e74ea73eccc44842a125f242a02097493)) | |
| download | [linux-next-ffe2a22562444720b05bdfeb999c03e810d84cbb.tar.gz](/pub/scm/linux/kernel/git/next/linux-next.git/snapshot/linux-next-ffe2a22562444720b05bdfeb999c03e810d84cbb.tar.gz) | |

net/tls: tls\_is\_tx\_ready() checked list\_entrytls\_is\_tx\_ready() checks that list\_first\_entry() does not return NULL.
This condition can never happen. For empty lists, list\_first\_entry()
returns the list\_entry() of the head, which is a type confusion.
Use list\_first\_entry\_or\_null() which returns NULL in case of empty
lists.
Fixes: a42055e8d2c3 ("net/tls: Add support for async encryption of records for performance")
Signed-off-by: Pietro Borrello <borrello@diag.uniroma1.it>
Link: [https://lore.kernel.org/r/20230128-list-entry-null-check-tls-v1-1-525bbfe6f0d0@diag.uniroma1.it](https://lore.kernel.org/r/20230128-list-entry-null-check-tls-v1-1-525bbfe6f0d0%40diag.uniroma1.it)
Signed-off-by: Jakub Kicinski <kuba@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/next/linux-next.git/diff/?id=ffe2a22562444720b05bdfeb999c03e810d84cbb)

| -rw-r--r-- | [net/tls/tls\_sw.c](/pub/scm/linux/kernel/git/next/linux-next.git/diff/net/tls/tls_sw.c?id=ffe2a22562444720b05bdfeb999c03e810d84cbb) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/net/tls/tls\_sw.c b/net/tls/tls\_sw.cindex 9ed9786341259e..a83d2b4275fa69 100644--- a/[net/tls/tls\_sw.c](/pub/scm/linux/kernel/git/next/linux-next.git/tree/net/tls/tls_sw.c?id=84115f0e74ea73eccc44842a125f242a02097493)+++ b/[net/tls/tls\_sw.c](/pub/scm/linux/kernel/git/next/linux-next.git/tree/net/tls/tls_sw.c?id=ffe2a22562444720b05bdfeb999c03e810d84cbb)@@ -2427,7 +2427,7 @@ static bool tls\_is\_tx\_ready(struct tls\_sw\_context\_tx \*ctx) { struct tls\_rec \*rec; - rec = list\_first\_entry(&ctx->tx\_list, struct tls\_rec, list);+ rec = list\_first\_entry\_or\_null(&ctx->tx\_list, struct tls\_rec, list); if (!rec) return false; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-15 08:32:56 +0000


