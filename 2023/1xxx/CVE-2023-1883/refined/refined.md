Based on the provided content, here's an analysis of the vulnerability addressed by the commit `db77df8`:

**Root Cause of Vulnerability:**

The vulnerability stems from a lack of proper check for the active status of news or FAQ items before allowing comments. Previously, the code only checked if comments were disabled but not if the news or FAQ entry itself was active. This allowed users to submit comments on inactive items.

**Weaknesses/Vulnerabilities Present:**

- **Logic Error:** The primary weakness is a logical flaw in the comment submission process. The code failed to verify the active status of the target item before processing a comment.
- **Inconsistency:** The comment submission logic did not consider that comments should only be allowed for active entries and not only if comment was disabled or not.

**Impact of Exploitation:**

- **Unintended Comments on Inactive Content:** Users could post comments on news or FAQ entries that are intended to be inactive or hidden, leading to possible confusion or information leakage.
- **Potential for Spam/Abuse:** If inactive content was used for staging or testing, allowing comments on them could open a door to spam or abuse as they might not be moderated.

**Attack Vectors:**

- **Comment Submission Form:** An attacker would use the comment submission form on the website/application to post comments.

**Required Attacker Capabilities/Position:**

- **Website Access:** The attacker requires general access to the website/application where the vulnerable phpMyFAQ instance is running.
- **Knowledge of Inactive Content:** The attacker might need to have knowledge or guess the IDs of inactive news or FAQ entries to target them.
**Technical Details:**
The commit addresses the vulnerability by adding a check `!$faq->isActive($id, $languageCode, $type)` within the conditional statement in `ajaxservice.php`. This ensures that comments are only accepted for active news or FAQ entries. The `isActive` function in `Faq.php` is updated to check the `active` column in the database table `faqnews` or `faqdata` to confirm if an entry is marked as active (either 'y' or 'yes'), returning `true` if the entry is inactive.

The commit modifies two files:

1.  `phpmyfaq/ajaxservice.php`:
    -   Adds a check for the active status using `$faq->isActive()`.

2.  `src/phpMyFAQ/Faq.php`:
    -   Implements the `isActive()` method to determine if a news or FAQ record is active by checking the corresponding database table.

   -   Modified function `commentDisabled` to check the type of content if it is news or faq