=== Content from snyk.io_bd5c5458_20250114_222744.html ===
You need to enable JavaScript to run this app.[Skip to main content](#main-content)

* Products

  Products

  + [What is Snyk?

    Developer-first security in action](/product/)
  + [Snyk Code

    Secure your code as it's written](/product/snyk-code/)
  + [Snyk Open Source

    Avoid vulnerable dependencies](/product/open-source-security-management/)
  + [Snyk Container

    Keep your base images secure](/product/container-vulnerability-management/)
  + [Snyk IaC

    Fix IaC misconfigurations in-code](/product/infrastructure-as-code-security/)
  + [Snyk AppRisk

    Reduce risk across your business](/product/snyk-apprisk/)
  + [Pricing](/plans/)

  Solutions

  + [Why Snyk?

    Modern security in a single platform](/platform/)
  + [Application security

    Build secure, stay secure](/solutions/application-security/)
  + [Software supply chain security

    Mitigate supply chain risk](/solutions/software-supply-chain-security/)
  + [Secure-AI-generated code

    AI writes, Snyk secures](/solutions/secure-ai-generated-code/)
  + [Zero-day vulnerabilities

    Fix the first day with Snyk](/solutions/zero-day-vulnerability-security/)
  + [Security Intelligence

    Comprehensive vulnerability data](/platform/security-intelligence/)

  Platform

  + [DeepCode AI

    Purpose-built security AI](/platform/deepcode-ai/)
  + [Integrations

    SDLC-spanning security](/integrations/)
  + [Code Checker

    Write better code for free](/code-checker/)

  Audience

  + [Snyk for devs

    Dev-centric info on demand](https://go.snyk.io/2024-dev-onboarding.html)
  + [Snyk for government

    Mission-informed AppSec](/government-security-solution/)
  + [Leaders handbook

    SAST essentials for genAI](/lp/securing-ai-generated-code/)![default-report.b205b2e0](https://res.cloudinary.com/snyk/image/upload/v1729618965/default-report.b205b2e0.svg)

  Secure Adoption in Gen AI Era Report

  [Read report](https://go.snyk.io/secure-adoption-in-genai-era.html "Read report")
* Resources

  Our resources

  + [Resource library

    Browse our extensive database](/resource-library/)
  + [Customer resources

    The one stop shop for customers](/customer-resources/)
  + [Ethical hacking

    How ethical hacking can help you](/ethical-hacking-resources/)
  + [Security leaders

    Insights from industry leaders](/security-leaders/)
  + [Top 10 vulns

    See the most common vuln types](/snyk-top-10/)
  + [Blog Section](/blog/)
  + [Snyk's podcasts](/podcasts/the-secure-developer/)
  + [Snyk’s YouTube](https://www.youtube.com/snyksec)

  Our ecosystem

  + [Snyk Learn

    Security education from Snyk](https://learn.snyk.io)
  + [Snyk user docs

    Get started with Snyk](https://docs.snyk.io/)
  + [Snyk Support

    How can we help?](https://support.snyk.io/hc/en-us)
  + [Snyk Vuln Database

    Find new vulnerabilities](https://security.snyk.io/)
  + [Snyk Updates

    Stay in the loop](https://updates.snyk.io/)

  Our community

  + [Events & webinars](/events/)
  + [Ambassadors](/snyk-ambassadors/)
  + [Discord channel](https://snyk.co/discordcommunity)![feature-snyk-snowflake](/_next/image/?url=https%3A%2F%2Fres.cloudinary.com%2Fsnyk%2Fimage%2Fupload%2Fv1717461856%2Ffeature-snyk-snowflake.jpg&w=2560&q=75)

  Extend the power of your AppSec data with the new Snyk and Snowflake integration

  [Read blog](/blog/snyk-snowflake-data-share/ "Read blog")
* Company

  Company

  ## The developer security platform

  Snyk gives you the visibility, context, and control you need to work alongside developers on reducing application risk.

  [More about us](/about/ "More about us")
  + [Our services

    Maximize your AppSec ROI](/services/)
  + [Our customers

    We help customers save time and money](/customers/)
  + [Our partners

    Bringing business class security with partners](/partners/)
  + [Case studies

    Check out our customer stories and stats](/case-studies/)
  + [Newsroom

    See the latest press releases](/news/)
  + [Contact us

    Get in touch with any feedback or questions](/contact-us/)
  + [Careers

    Join Snyk today](/careers/)![Snyk_Probely](/_next/image/?url=https%3A%2F%2Fres.cloudinary.com%2Fsnyk%2Fimage%2Fupload%2Fv1730905024%2FSnyk_Probely.jpg&w=2560&q=75)

  Snyk Acquires Developer-First DAST Provider Probely

  [Read press release](/news/snyk-acquires-developer-first-dast-provider-probely/ "Read press release")
* [Pricing](/plans/)

ENSelect your languageEnglishDeutschFrançais日本語Português (BR)Login

Free and Team Plan Customers

* [Snyk

  app.snyk.io](https://app.snyk.io)

Enterprise Plan Customers

* [*🇺🇸*

  Snyk US - 1

  app.snyk.io](https://app.snyk.io)
* [*🇺🇸*

  Snyk US - 2

  app.us.snyk.io](https://app.us.snyk.io)
* [*🇪🇺*

  Snyk EU

  app.eu.snyk.io](https://app.eu.snyk.io)
* [*🇦🇺*

  Snyk AU

  app.au.snyk.io](https://app.au.snyk.io)

The region where your data is hosted follows local agreements, and it may not align with your own location. [Find out more](https://docs.snyk.io/working-with-snyk/regional-hosting-and-data-residency).[Sign up](https://app.snyk.io/signup "Sign up")[Book a live demo](/schedule-a-demo/ "Book a live demo")[Snyk Blog](/blog/)
# API authentication vulnerability found in Snyk Kubernetes integration (CVE-2023-1065)

Written by: ![Hannah Foxwell](/_next/image/?url=https%3A%2F%2Fres.cloudinary.com%2Fsnyk%2Fimage%2Fupload%2Fv1677615928%2Fhannah-foxwell.jpg&w=48&q=75)

[Hannah Foxwell](/contributors/hannah-foxwell/)

![](/_next/static/media/default-blog.7c0dd586.svg)

February 28, 2023

 0 mins read

We would like to inform Snyk customers of some important changes to Snyk Container’s Kubernetes Monitor integration to address vulnerabilities found in the API authentication. At this time, the [Kubernetes integration](https://docs.snyk.io/scan-containers/kubernetes-workload-and-image-scanning/kubernetes-integration-overview) is only available on Snyk's [Enterprise plan](https://docs.snyk.io/snyk-processes/plans). Only Enterprise customers who have deployed the Snyk Kubernetes Monitor are impacted.

## CVE-2023-1065

[CVE-2023-1065](https://www.cve.org/CVERecord?id=CVE-2023-1065) is a medium severity vulnerability that **does not expose** the user of the integration to any direct security risk and no user data could be leaked, but it could have resulted in irrelevant data being posted to a Snyk organization — which could in turn obfuscate other, relevant, security issues.

Details of the vulnerable API endpoints and how to upgrade your integration can be found below.

## CVE-2023-1065 Snyk Kubernetes Monitor Authentication Vulnerability

The purpose of the Snyk Kubernetes Monitor is to allow users to automatically identify, import, and scan containers running in your Kubernetes cluster. To do this, users deploy the [Snyk Controller](https://artifacthub.io/packages/helm/snyk/snyk-monitor) and obtain a [Snyk Integration ID](https://docs.snyk.io/scan-containers/kubernetes-workload-and-image-scanning/kubernetes-integration-overview/viewing-your-kubernetes-integration-settings) to post the data back to the Snyk Platform. The above vulnerability impacts this POST API endpoint, which uses the Integration ID to route scan results to a user’s Snyk Organization.

## How to upgrade and stay safe

Snyk has updated the Kubernetes Monitor with more robust authentication, which will need to be deployed to your Kubernetes clusters. If you are using the integration, we advise that you upgrade as soon as possible. An overview of the [Snyk Kubernetes integration](https://docs.snyk.io/scan-containers/kubernetes-workload-and-image-scanning/kubernetes-integration-overview) and instructions on how to [upgrade the Snyk Kubernetes Monitor](https://github.com/snyk/kubernetes-monitor/blob/staging/snyk-monitor/README.md#updating-from-v1-to-v2-existing-installations-only) are available in the documentation.

The new controller will post data back to a new, more secure API endpoint. The current insecure API endpoints will be deprecated in six weeks on April 11. At that time, older versions of the Snyk Kubernetes Monitor will become unusable.

## More information

You can find more [details on this medium severity vulnerability](https://www.cve.org/CVERecord?id=CVE-2023-1065) in the public vulnerability database.

We would like to thank the Tesco Cybersecurity Team for finding and disclosing this vulnerability to us. Snyk is proud to be one of the leading proponents of responsible disclosure programs and open source technology. One of the main tenets of a robust and modern security posture is to encourage external testing of software that compliments internal testing and tooling.

At Snyk, it’s our business to know that all software has the potential to include vulnerabilities. Our users’ safety is paramount, and we will continue to take all steps necessary to ensure our software is rigorously tested.

To stress, this is a medium severity vulnerability whose potential impact is limited to the usability of Snyk. However, our customers have come to rely on us for continuous detection and remediation of vulnerabilities, as well as incident response during 0-day events. For that reason, we consider our availability and accuracy to be mission-critical for our users and take this problem very seriously.

We apologize for any inconvenience caused to customers needing to upgrade the Snyk Kubernetes Monitor. Please reach out with any questions through our [Snyk Support portal](https://support.snyk.io/hc/en-us).

Posted in:[Container Security](/blog/?topic=container-security)[Vulnerability Insights](/blog/?topic=vulnerability-insights)![](/_next/static/media/default-blog.7c0dd586.svg)
### Snyk Top 10: Vulnerabilites you should know

Find out which types of vulnerabilities are most likely to appear in your projects based on Snyk scan results and security research.

[See the report](/snyk-top-10/ "See the report")
## Products & Solutions

* [What is Snyk?](/product/)
* [Developer Security Platform](/platform/)
* [Pricing](/plans/)
## Our Resources

* [Resource library](/resource-library/)
* [Blog](/blog/)
* [Snyk’s podcasts](/podcasts/the-secure-developer/)
## Our Ecosystem

* [Snyk Learn](/platform/learn/)
* [Snyk User Docs](https://docs.snyk.io/)
* [Snyk Support](https://support.snyk.io/hc/en-us)
* [Snyk Vuln Database](https://security.snyk.io/)
* [Snyk Updates](https://updates.snyk.io/)
* [Snyk Trust Center](https://trust.snyk.io/home)
## Company & Community

* [About Snyk](/about/)
* [Contact us](/contact-us/)
* [Book a demo](/schedule-a-demo/)
* [Careers](/careers/)
* [Events & webinars](/events/)
* [Ambassadors](/snyk-ambassadors/)
## Why Snyk

* [Snyk With GitHub](/comparison/github-and-snyk/)
* [Snyk vs Veracode](/comparison/snyk-vs-veracode/)
* [Snyk vs Checkmarx](/comparison/snyk-vs-checkmarx/)
* [Snyk vs Synopsys](/comparison/snyk-vs-synopsys/)

## The developer security platform

Snyk gives you the visibility, context, and control you need to work alongside developers on reducing application risk.

[More about us](/about/ "More about us")

© 2025 Snyk Limited
Registered in England and Wales

* [Legal terms](/policies/terms-of-service/)
* [Privacy Notice](/policies/privacy/)
* [Terms of use](/policies/website-terms-of-use/)
* [California residents: do not sell my information](https://preferences.snyk.io/dont_sell)


=== Content from github.com_d4a1cf6e_20250114_222742.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fsnyk%2Fkubernetes-monitor%2Fpull%2F1275)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fsnyk%2Fkubernetes-monitor%2Fpull%2F1275)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fpull_requests_fragments%2Fpull_request_layout&source=header-repo&source_repo=snyk%2Fkubernetes-monitor)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[snyk](/snyk)
/
**[kubernetes-monitor](/snyk/kubernetes-monitor)**
Public

* [Notifications](/login?return_to=%2Fsnyk%2Fkubernetes-monitor) You must be signed in to change notification settings
* [Fork
  74](/login?return_to=%2Fsnyk%2Fkubernetes-monitor)
* [Star
   88](/login?return_to=%2Fsnyk%2Fkubernetes-monitor)

* [Code](/snyk/kubernetes-monitor)
* [Issues
  13](/snyk/kubernetes-monitor/issues)
* [Pull requests
  9](/snyk/kubernetes-monitor/pulls)
* [Discussions](/snyk/kubernetes-monitor/discussions)
* [Actions](/snyk/kubernetes-monitor/actions)
* [Security](/snyk/kubernetes-monitor/security)
* [Insights](/snyk/kubernetes-monitor/pulse)

Additional navigation options

* [Code](/snyk/kubernetes-monitor)
* [Issues](/snyk/kubernetes-monitor/issues)
* [Pull requests](/snyk/kubernetes-monitor/pulls)
* [Discussions](/snyk/kubernetes-monitor/discussions)
* [Actions](/snyk/kubernetes-monitor/actions)
* [Security](/snyk/kubernetes-monitor/security)
* [Insights](/snyk/kubernetes-monitor/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fsnyk%2Fkubernetes-monitor%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fsnyk%2Fkubernetes-monitor%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# RELEASE V2 #1275

 Merged

[kat1906](/kat1906)
merged 15 commits into
[master](/snyk/kubernetes-monitor/tree/master "snyk/kubernetes-monitor:master")
from
[staging](/snyk/kubernetes-monitor/tree/staging "snyk/kubernetes-monitor:staging")

Feb 28, 2023

 Merged

# [RELEASE V2](#top) #1275

[kat1906](/kat1906)
merged 15 commits into
[master](/snyk/kubernetes-monitor/tree/master "snyk/kubernetes-monitor:master")
from
[staging](/snyk/kubernetes-monitor/tree/staging "snyk/kubernetes-monitor:staging")

Feb 28, 2023

[Conversation
0](/snyk/kubernetes-monitor/pull/1275)
[Commits
15](/snyk/kubernetes-monitor/pull/1275/commits)
[Checks
0](/snyk/kubernetes-monitor/pull/1275/checks)
[Files changed](/snyk/kubernetes-monitor/pull/1275/files)

## Conversation

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

[![kat1906](https://avatars.githubusercontent.com/u/30568078?s=60&v=4)](/kat1906)

Copy link

Contributor

### @kat1906 **[kat1906](/kat1906)** commented [Feb 28, 2023](#issue-1603443275)

 *No description provided.*

Sorry, something went wrong.

All reactions

 [snaftaly](/snaftaly)
and others
added 15 commits
[February 20, 2023 12:20](#commits-pushed-b20a635)

[![@snaftaly](https://avatars.githubusercontent.com/u/11232557?s=40&v=4)](/snaftaly)

`[test: use latest argo-rollouts installation](/snyk/kubernetes-monitor/pull/1275/commits/b20a6352bb718e72514ff1e118f86e0e8cbe8675 "test: use latest argo-rollouts installation

Issue in argo-rollouts that were causing tests to fail in eks
and aks was fixed. Therefore, the latest version can be used
again.")`
 …

`[b20a635](/snyk/kubernetes-monitor/pull/1275/commits/b20a6352bb718e72514ff1e118f86e0e8cbe8675)`

```
Issue in argo-rollouts that were causing tests to fail in eks
and aks was fixed. Therefore, the latest version can be used
again.
```

[![@mihaibuzgau](https://avatars.githubusercontent.com/u/1262576?s=40&v=4)](/mihaibuzgau)

`[fix: allow snyk-monitor to run on arm64](/snyk/kubernetes-monitor/pull/1275/commits/6eef45ab7187007e70aba8cf1c917f1afa1c5e97 "fix: allow snyk-monitor to run on arm64")`

`[6eef45a](/snyk/kubernetes-monitor/pull/1275/commits/6eef45ab7187007e70aba8cf1c917f1afa1c5e97)`

[![@mihaibuzgau](https://avatars.githubusercontent.com/u/1262576?s=40&v=4)](/mihaibuzgau)

`[Merge pull request](/snyk/kubernetes-monitor/pull/1275/commits/d500b93f520bbb674a72455433974e9e145efab2 "Merge pull request #1266 from snyk/fix/allow_arm64

allow snyk-monitor to run on arm64") [#1266](https://github.com/snyk/kubernetes-monitor/pull/1266) [from snyk/fix/allow_arm64](/snyk/kubernetes-monitor/pull/1275/commits/d500b93f520bbb674a72455433974e9e145efab2 "Merge pull request #1266 from snyk/fix/allow_arm64

allow snyk-monitor to run on arm64")`
 …

`[d500b93](/snyk/kubernetes-monitor/pull/1275/commits/d500b93f520bbb674a72455433974e9e145efab2)`

```
allow snyk-monitor to run on arm64
```

[![@snaftaly](https://avatars.githubusercontent.com/u/11232557?s=40&v=4)](/snaftaly)

`[Merge pull request](/snyk/kubernetes-monitor/pull/1275/commits/64ee33f9e5c4a71b9497f0d4cc70f4288ed95355 "Merge pull request #1268 from snyk/test/get-latest-argo-rollouts-with-bug-fix

test: use latest argo-rollouts installation") [#1268](https://github.com/snyk/kubernetes-monitor/pull/1268) [from snyk/test/get-latest-argo-rollouts-with…](/snyk/kubernetes-monitor/pull/1275/commits/64ee33f9e5c4a71b9497f0d4cc70f4288ed95355 "Merge pull request #1268 from snyk/test/get-latest-argo-rollouts-with-bug-fix

test: use latest argo-rollouts installation")`
 …

`[64ee33f](/snyk/kubernetes-monitor/pull/1275/commits/64ee33f9e5c4a71b9497f0d4cc70f4288ed95355)`

```
…-bug-fix

test: use latest argo-rollouts installation
```

[![@snaftaly](https://avatars.githubusercontent.com/u/11232557?s=40&v=4)](/snaftaly)

`[Revert "test: use latest argo-rollouts installation"](/snyk/kubernetes-monitor/pull/1275/commits/4085e16ccc190fa78355a4ee7676561c91eec1b1 "Revert \"test: use latest argo-rollouts installation\"

This reverts commit b20a6352bb718e72514ff1e118f86e0e8cbe8675.")`
 …

`[4085e16](/snyk/kubernetes-monitor/pull/1275/commits/4085e16ccc190fa78355a4ee7676561c91eec1b1)`

```
This reverts commit [b20a635](https://github.com/snyk/kubernetes-monitor/commit/b20a6352bb718e72514ff1e118f86e0e8cbe8675).
```

[![@snaftaly](https://avatars.githubusercontent.com/u/11232557?s=40&v=4)](/snaftaly)

`[Merge pull request](/snyk/kubernetes-monitor/pull/1275/commits/d47dbe1bcdc1c2c6cfea37de17446e7e8b557685 "Merge pull request #1271 from snyk/test/re-use-older-argo-rollouts-version

Revert \"test: use latest argo-rollouts installation\"") [#1271](https://github.com/snyk/kubernetes-monitor/pull/1271) [from snyk/test/re-use-older-argo-rollouts-ve…](/snyk/kubernetes-monitor/pull/1275/commits/d47dbe1bcdc1c2c6cfea37de17446e7e8b557685 "Merge pull request #1271 from snyk/test/re-use-older-argo-rollouts-version

Revert \"test: use latest argo-rollouts installation\"")`
 …

`[d47dbe1](/snyk/kubernetes-monitor/pull/1275/commits/d47dbe1bcdc1c2c6cfea37de17446e7e8b557685)`

```
…rsion

Revert "test: use latest argo-rollouts installation"
```

[![@ivanstanev](https://avatars.githubusercontent.com/u/16717473?s=40&v=4)](/ivanstanev) [![@ahmed-agabani-snyk](https://avatars.githubusercontent.com/u/70949530?s=40&v=4)](/ahmed-agabani-snyk)

`[feat: retry transmitting data to upstream on known http errors](/snyk/kubernetes-monitor/pull/1275/commits/857530e7e8bc2d066c32ac423644c247f9f8c23e "feat: retry transmitting data to upstream on known http errors")`

`[857530e](/snyk/kubernetes-monitor/pull/1275/commits/857530e7e8bc2d066c32ac423644c247f9f8c23e)`

[![@kat1906](https://avatars.githubusercontent.com/u/30568078?s=40&v=4)](/kat1906)

`[Merge pull request](/snyk/kubernetes-monitor/pull/1275/commits/fdac49a549b294a7c97c583dcd62cda65e58f723 "Merge pull request #1272 from snyk/feat/transmitter-retry-2

feat: retry transmitting data to upstream on known http errors") [#1272](https://github.com/snyk/kubernetes-monitor/pull/1272) [from snyk/feat/transmitter-retry-2](/snyk/kubernetes-monitor/pull/1275/commits/fdac49a549b294a7c97c583dcd62cda65e58f723 "Merge pull request #1272 from snyk/feat/transmitter-retry-2

feat: retry transmitting data to upstream on known http errors")`
 …

`[fdac49a](/snyk/kubernetes-monitor/pull/1275/commits/fdac49a549b294a7c97c583dcd62cda65e58f723)`

```
feat: retry transmitting data to upstream on known http errors
```

[![@shlomiSnyk](https://avatars.githubusercontent.com/u/106168748?s=40&v=4)](/shlomiSnyk)

`[feat: bump Snyk docker plugin to 6.0.0](/snyk/kubernetes-monitor/pull/1275/commits/9852024392f13e7847ef1a3367f1b3e32664f383 "feat: bump Snyk docker plugin to 6.0.0

bump Snyk docker plugin to 6.0.0 as a part of RedHat support")`
 …

`[9852024](/snyk/kubernetes-monitor/pull/1275/commits/9852024392f13e7847ef1a3367f1b3e32664f383)`

```
bump Snyk docker plugin to 6.0.0 as a part of RedHat support
```

[![@kat1906](https://avatars.githubusercontent.com/u/30568078?s=40&v=4)](/kat1906)

`[Merge pull request](/snyk/kubernetes-monitor/pull/1275/commits/130c30e33df1e07590dbf8eaeb0c2c78b856a6ce "Merge pull request #1273 from snyk/feat/bump-snyk-docker-plugin-to-6-0-0

feat: bump Snyk docker plugin to 6.0.0") [#1273](https://github.com/snyk/kubernetes-monitor/pull/1273) [from snyk/feat/bump-snyk-docker-plugin-to-6-0-0](/snyk/kubernetes-monitor/pull/1275/commits/130c30e33df1e07590dbf8eaeb0c2c78b856a6ce "Merge pull request #1273 from snyk/feat/bump-snyk-docker-plugin-to-6-0-0

feat: bump Snyk docker plugin to 6.0.0")`
 …

`[130c30e](/snyk/kubernetes-monitor/pull/1275/commits/130c30e33df1e07590dbf8eaeb0c2c78b856a6ce)`

```
feat: bump Snyk docker plugin to 6.0.0
```

[![@minsiyang](https://avatars.githubusercontent.com/u/63360483?s=40&v=4)](/minsiyang) [![@kat1906](https://avatars.githubusercontent.com/u/30568078?s=40&v=4)](/kat1906)

`[feat: call authenticated snyk API endpoints with token](/snyk/kubernetes-monitor/pull/1275/commits/5b9a7821680bbfb6c4a900ab05d898ce2b2cc157 "feat: call authenticated snyk API endpoints with token

BREAKING CHANGE: use a service account API token to perform
authenticated requests to snyk API.")`
 …

`[5b9a782](/snyk/kubernetes-monitor/pull/1275/commits/5b9a7821680bbfb6c4a900ab05d898ce2b2cc157)`

```
BREAKING CHANGE: use a service account API token to perform
authenticated requests to snyk API.
```

[![@snaftaly](https://avatars.githubusercontent.com/u/11232557?s=40&v=4)](/snaftaly) [![@kat1906](https://avatars.githubusercontent.com/u/30568078?s=40&v=4)](/kat1906)

`[test: update url in system tests](/snyk/kubernetes-monitor/pull/1275/commits/e14ee69c84c1ae73d3b0065d6f46e9eba15201b2 "test: update url in system tests")`

`[e14ee69](/snyk/kubernetes-monitor/pull/1275/commits/e14ee69c84c1ae73d3b0065d6f46e9eba15201b2)`

[![@snaftaly](https://avatars.githubusercontent.com/u/11232557?s=40&v=4)](/snaftaly) [![@kat1906](https://avatars.githubusercontent.com/u/30568078?s=40&v=4)](/kat1906)

`[test: use integration ID and service account token from env var](/snyk/kubernetes-monitor/pull/1275/commits/59204b5f9c9257f9dd3fb16bcd4ed5296d6ba497 "test: use integration ID and service account token from env var

In the new authentication method, kubernetes-monitor authenticates
against an existing account in snyk which has a predefined kubernetes
integration ID and token, and these are the values used in the
integration tests.")`
 …

`[59204b5](/snyk/kubernetes-monitor/pull/1275/commits/59204b5f9c9257f9dd3fb16bcd4ed5296d6ba497)`

```
In the new authentication method, kubernetes-monitor authenticates
against an existing account in snyk which has a predefined kubernetes
integration ID and token, and these are the values used in the
integration tests.
```

[![@kat1906](https://avatars.githubusercontent.com/u/30568078?s=40&v=4)](/kat1906)

`[docs: update snyk-monitor/README with serviceAccountApiToken](/snyk/kubernetes-monitor/pull/1275/commits/63fbb8be9a6e4f69ae0ae7b052c7d199a55a51df "docs: update snyk-monitor/README with serviceAccountApiToken")`

`[63fbb8b](/snyk/kubernetes-monitor/pull/1275/commits/63fbb8be9a6e4f69ae0ae7b052c7d199a55a51df)`

[![@kat1906](https://avatars.githubusercontent.com/u/30568078?s=40&v=4)](/kat1906)

`[Merge pull request](/snyk/kubernetes-monitor/pull/1275/commits/93be7784ad4048a7d4eda4537cb3cd4e58453d75 "Merge pull request #1248 from snyk/fix/add-service-account-token-secret

[CIT-75] feat: call authenticated snyk API endpoints with token") [#1248](https://github.com/snyk/kubernetes-monitor/pull/1248) [from snyk/fix/add-service-account-token-secret](/snyk/kubernetes-monitor/pull/1275/commits/93be7784ad4048a7d4eda4537cb3cd4e58453d75 "Merge pull request #1248 from snyk/fix/add-service-account-token-secret

[CIT-75] feat: call authenticated snyk API endpoints with token")`
 …

`[93be778](/snyk/kubernetes-monitor/pull/1275/commits/93be7784ad4048a7d4eda4537cb3cd4e58453d75)`

```
[CIT-75] feat: call authenticated snyk API endpoints with token
```

 [![@kat1906](https://avatars.githubusercontent.com/u/30568078?s=40&v=4)](/kat1906)
[kat1906](/kat1906)
requested a review
from a team
as a [code owner](/snyk/kubernetes-monitor/blob/80781dd55808af5051394593e8f4b97b65b8b041/.github/CODEOWNERS#L4)
[February 28, 2023 16:58](#event-8629276521)

[![@kat1906](https://avatars.githubusercontent.com/u/30568078?s=40&v=4)](/kat1906)
[kat1906](/kat1906)
merged commit [`29a9526`](/snyk/kubernetes-monitor/commit/29a95267c91fe36ab76ee6e6e90a3bc70c3a7bf0)
into
master

[Feb 28, 2023](https://github.com/snyk/kubernetes-monitor/pull/1275#event-8629487773)

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Fsnyk%2Fkubernetes-monitor%2Fpull%2F1275)

Reviewers

No reviews

Assignees

No one assigned

Labels

None yet

Projects

None yet

Milestone

No milestone

Development

Successfully merging this pull request may close these issues.

6 participants

[![@kat1906](https://avatars.githubusercontent.com/u/30568078?s=52&v=4)](/kat1906) [![@snaftaly](https://avatars.githubusercontent.com/u/11232557?s=52&v=4)](/snaftaly) [![@mihaibuzgau](https://avatars.githubusercontent.com/u/1262576?s=52&v=4)](/mihaibuzgau) [![@ivanstanev](https://avatars.githubusercontent.com/u/16717473?s=52&v=4)](/ivanstanev) [![@shlomiSnyk](https://avatars.githubusercontent.com/u/106168748?s=52&v=4)](/shlomiSnyk) [![@minsiyang](https://avatars.githubusercontent.com/u/63360483?s=52&v=4)](/minsiyang)

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_234fd227_20250114_222739.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fsnyk%2Fkubernetes-monitor%2Fcommit%2F5b9a7821680bbfb6c4a900ab05d898ce2b2cc157)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fsnyk%2Fkubernetes-monitor%2Fcommit%2F5b9a7821680bbfb6c4a900ab05d898ce2b2cc157)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=snyk%2Fkubernetes-monitor)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[snyk](/snyk)
/
**[kubernetes-monitor](/snyk/kubernetes-monitor)**
Public

* [Notifications](/login?return_to=%2Fsnyk%2Fkubernetes-monitor) You must be signed in to change notification settings
* [Fork
  74](/login?return_to=%2Fsnyk%2Fkubernetes-monitor)
* [Star
   88](/login?return_to=%2Fsnyk%2Fkubernetes-monitor)

* [Code](/snyk/kubernetes-monitor)
* [Issues
  13](/snyk/kubernetes-monitor/issues)
* [Pull requests
  9](/snyk/kubernetes-monitor/pulls)
* [Discussions](/snyk/kubernetes-monitor/discussions)
* [Actions](/snyk/kubernetes-monitor/actions)
* [Security](/snyk/kubernetes-monitor/security)
* [Insights](/snyk/kubernetes-monitor/pulse)

Additional navigation options

* [Code](/snyk/kubernetes-monitor)
* [Issues](/snyk/kubernetes-monitor/issues)
* [Pull requests](/snyk/kubernetes-monitor/pulls)
* [Discussions](/snyk/kubernetes-monitor/discussions)
* [Actions](/snyk/kubernetes-monitor/actions)
* [Security](/snyk/kubernetes-monitor/security)
* [Insights](/snyk/kubernetes-monitor/pulse)

## Commit

[Permalink](/snyk/kubernetes-monitor/commit/5b9a7821680bbfb6c4a900ab05d898ce2b2cc157)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

feat: call authenticated snyk API endpoints with token

[Browse files](/snyk/kubernetes-monitor/tree/5b9a7821680bbfb6c4a900ab05d898ce2b2cc157)
Browse the repository at this point in the history

```
BREAKING CHANGE: use a service account API token to perform
authenticated requests to snyk API.
```

* Loading branch information

[![@minsiyang](https://avatars.githubusercontent.com/u/63360483?s=40&v=4)](/minsiyang) [![@kat1906](https://avatars.githubusercontent.com/u/30568078?s=40&v=4)](/kat1906)

[minsiyang](/snyk/kubernetes-monitor/commits?author=minsiyang "View all commits by minsiyang")
authored and
[kat1906](/snyk/kubernetes-monitor/commits?author=kat1906 "View all commits by kat1906")
committed
Feb 28, 2023

1 parent
[130c30e](/snyk/kubernetes-monitor/commit/130c30e33df1e07590dbf8eaeb0c2c78b856a6ce)

commit 5b9a782

 Show file tree

 Hide file tree

Showing
**24 changed files**
with
**111 additions**
and
**33 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* .circleci

  + .circleci/config.yml
    [config.yml](#diff-78a8a19706dbd2a4425dd72bdab0502ed7a2cef16365ab7030a5a0588927bf47)
  + config/jobs

    - .circleci/config/jobs/operator\_upgrade\_tests.yml
      [operator\_upgrade\_tests.yml](#diff-47e8af24311233bd258cdd1d1e13e9de9ac859650e5c2bb9c514e6e5590432b4)
* README.md
  [README.md](#diff-b335630551682c19a781afebcf4d07bf978fb1f8ac04c6bf87428ed5106870f5)
* config.default.json
  [config.default.json](#diff-1669c6499c5fb758041861666d700f681c236df14ca68a34a9eb3d219191b0fb)
* scripts

  + circleci-jobs

    - scripts/circleci-jobs/deploy\_to\_dev.sh
      [deploy\_to\_dev.sh](#diff-50eee5d26382a845432f63a81ff19d977a3e102225fa7a81b82de5ca82d70587)
  + scripts/local-testing.sh
    [local-testing.sh](#diff-f47b9562123a915f7423ad0a03c1415db10b57ad4ac62b154b7f7ca5b7040a22)
* snyk-monitor-deployment.yaml
  [snyk-monitor-deployment.yaml](#diff-bf7204728c6b4399fc51ae28f3548ca884042967ffab12f70fa82e98776c979a)
* snyk-operator-certified

  + snyk-operator-certified/README.md
    [README.md](#diff-c5d83550f2c778b53b148202222cc4642f7ce5b1958fc24fba963ad3f11582e7)
  + bundle/manifests

    - snyk-operator-certified/bundle/manifests/snyk-monitor.clusterserviceversion.yaml
      [snyk-monitor.clusterserviceversion.yaml](#diff-210960d26a1322c1b74abe9d4dff6f80fff9139558a3b147867a7a8670f4ef60)
  + config/manifests/bases

    - snyk-operator-certified/config/manifests/bases/snyk-monitor.clusterserviceversion.yaml
      [snyk-monitor.clusterserviceversion.yaml](#diff-c4e477c7b6b39be6882c9fb364aa23a3c55f1bece80af8f4d128261b5a712bed)
  + helm-charts/snyk-monitor/templates

    - snyk-operator-certified/helm-charts/snyk-monitor/templates/deployment.yaml
      [deployment.yaml](#diff-797e8757295f29a37680bafd653955b717c6af652ba66acc2d0daaa28be9fd82)
* snyk-operator

  + certified-operator

    - snyk-operator/certified-operator/README.md
      [README.md](#diff-e7dafef9dd47981a9c4efd531dbb5947d5bf7e5cd9f7d49255fcd4492ff1eca6)
  + deploy/olm-catalog/snyk-operator/0.0.0

    - snyk-operator/deploy/olm-catalog/snyk-operator/0.0.0/snyk-operator.v0.0.0.clusterserviceversion.yaml
      [snyk-operator.v0.0.0.clusterserviceversion.yaml](#diff-7d37d49a7ae61314abbbde90ba87e8ffa13f651a5de8a4abb1aba11530f428e8)
* src

  + common

    - src/common/config.ts
      [config.ts](#diff-9d5ba1a74fa3c1ca2e89c9b7a2c356807802c8b5be7473377ffd4d9ab348aef1)
    - src/common/types.ts
      [types.ts](#diff-5328ecb0af4d24ae2b95bb12aa89dc1feab5964c8790126d0f721dacc3a99ef9)
  + transmitter

    - src/transmitter/index.ts
      [index.ts](#diff-d40843739012d28af7cb08fc87c96ded838baa28d5a6c617d41e75d9b5402d54)
* test

  + common

    - test/common/config.spec.ts
      [config.spec.ts](#diff-96a9b6b2d3d32ad5f76aa492379239a517184b07254ebf4b6579f9b659b933ed)
  + fixtures/operator

    - test/fixtures/operator/custom-resource-k8s.yaml
      [custom-resource-k8s.yaml](#diff-1ac7b2654bbabc7fa6f2a99736667d7087e8a1dc01ab93cd774807d38333c3dd)
    - test/fixtures/operator/custom-resource.yaml
      [custom-resource.yaml](#diff-6ff1655c301177020fd0896aafba53c135d9681c5de22c178b545f4556e141c7)
  + setup

    - deployers

      * test/setup/deployers/helm-with-proxy.ts
        [helm-with-proxy.ts](#diff-5f711c2d0aa7100a348ea5428cfdeffa185fcaa1ee94366c544e6146b61841f0)
      * test/setup/deployers/helm.ts
        [helm.ts](#diff-3397478f36cfed87ce5b301ed41987b393f1624f83be76689b284b57bf0f4c11)
      * test/setup/deployers/yaml.ts
        [yaml.ts](#diff-49ea686652c1e062cc89f88920743734e9df0f431cfdad3ee95ba1e8fc05abfe)
    - test/setup/index.ts
      [index.ts](#diff-b98e2e30b93bc5eae1d6a8a49a430198f2e63228c33c5fa1193d439c28a089e6)
  + unit/data-scraper

    - test/unit/data-scraper/scrape-data.spec.ts
      [scrape-data.spec.ts](#diff-94b66bc1df6ee8f0cbbcfa300f342a3e557e9a0ea69762f02e1a3af51212c0e3)

## There are no files selected for viewing

3 changes: 2 additions & 1 deletion

3
[.circleci/config.yml](#diff-78a8a19706dbd2a4425dd72bdab0502ed7a2cef16365ab7030a5a0588927bf47 ".circleci/config.yml")

Show comments

[View file](/snyk/kubernetes-monitor/blob/5b9a7821680bbfb6c4a900ab05d898ce2b2cc157/.circleci/config.yml)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -519,7 +519,8 @@ jobs: |
|  |  |  |
|  |  | set -e |
|  |  | INTEGRATION\_ID=$(uuidgen) |
|  |  | kubectl create secret generic snyk-monitor -n snyk-monitor --from-literal=integrationId=${INTEGRATION\_ID} --from-literal=dockercfg.json={} |
|  |  | SERVICE\_ACCOUNT\_API\_TOKEN=$(uuidgen) |
|  |  | kubectl create secret generic snyk-monitor -n snyk-monitor --from-literal=integrationId=${INTEGRATION\_ID} --from-literal=serviceAccountApiToken=${SERVICE\_ACCOUNT\_API\_TOKEN} --from-literal=dockercfg.json={} |
|  |  | name: Configure snyk-monitor namespace |
|  |  | - run: |
|  |  | command: | |
| Expand Down | |  |

3 changes: 2 additions & 1 deletion

3
[.circleci/config/jobs/operator\_upgrade\_tests.yml](#diff-47e8af24311233bd258cdd1d1e13e9de9ac859650e5c2bb9c514e6e5590432b4 ".circleci/config/jobs/operator_upgrade_tests.yml")

Show comments

[View file](/snyk/kubernetes-monitor/blob/5b9a7821680bbfb6c4a900ab05d898ce2b2cc157/.circleci/config/jobs/operator_upgrade_tests.yml)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -120,7 +120,8 @@ steps: |
|  |  |  |
|  |  | set -e |
|  |  | INTEGRATION\_ID=$(uuidgen) |
|  |  | kubectl create secret generic snyk-monitor -n snyk-monitor --from-literal=integrationId=${INTEGRATION\_ID} --from-literal=dockercfg.json={} |
|  |  | SERVICE\_ACCOUNT\_API\_TOKEN=$(uuidgen) |
|  |  | kubectl create secret generic snyk-monitor -n snyk-monitor --from-literal=integrationId=${INTEGRATION\_ID} --from-literal=serviceAccountApiToken=${SERVICE\_ACCOUNT\_API\_TOKEN} --from-literal=dockercfg.json={} |
|  |  |  |
|  |  | - run: |
|  |  | name: Install Operator |
| Expand Down | |  |

2 changes: 1 addition & 1 deletion

2
[README.md](#diff-b335630551682c19a781afebcf4d07bf978fb1f8ac04c6bf87428ed5106870f5 "README.md")

Show comments

[View file](/snyk/kubernetes-monitor/blob/5b9a7821680bbfb6c4a900ab05d898ce2b2cc157/README.md)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |

| Expand Up | | @@ -10,7 +10,7 @@ A containerized application that is deployed with Helm. Monitors the security of |
|  |  | ## Prerequisites ## |
|  |  |  |
|  |  | \* 50 GiB of storage in the form of [emptyDir](https://kubernetes.io/docs/concepts/storage/volumes/#emptydir) or a [PersistentVolumeClaim](https://kubernetes.io/docs/concepts/storage/persistent-volumes/). |
|  |  | \* External internet access from the Kubernetes cluster to `kubernetes-upstream.snyk.io`. |
|  |  | \* External internet access from the Kubernetes cluster to `api.snyk.io`. |
|  |  | \* 1 CPU, 2 GiB RAM |
|  |  | \* 1 Kubernetes worker node of type `linux/amd64` - supported and tested only on the AMD64 CPU architecture |
|  |  |  |
| Expand Down | |  |

3 changes: 2 additions & 1 deletion

3
[config.default.json](#diff-1669c6499c5fb758041861666d700f681c236df14ca68a34a9eb3d219191b0fb "config.default.json")

Show comments

[View file](/snyk/kubernetes-monitor/blob/5b9a7821680bbfb6c4a900ab05d898ce2b2cc157/config.default.json)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -19,7 +19,8 @@ |
|  |  | "REQUEST\_QUEUE\_LENGTH": 2, |
|  |  | "QUEUE\_LENGTH\_LOG\_FREQUENCY\_MINUTES": 1, |
|  |  | "INTEGRATION\_ID": "", |
|  |  | "DEFAULT\_KUBERNETES\_UPSTREAM\_URL": "https://kubernetes-upstream.snyk.io", |
|  |  | "SERVICE\_ACCOUNT\_API\_TOKEN": "", |
|  |  | "DEFAULT\_KUBERNETES\_UPSTREAM\_URL": "https://api.snyk.io/v2/kubernetes-upstream", |
|  |  | "MAX\_RETRY\_BACKOFF\_DURATION\_SECONDS": 300, |
|  |  | "USE\_KEEPALIVE": true |
|  |  | } |

2 changes: 1 addition & 1 deletion

2
[scripts/circleci-jobs/deploy\_to\_dev.sh](#diff-50eee5d26382a845432f63a81ff19d977a3e102225fa7a81b82de5ca82d70587 "scripts/circleci-jobs/deploy_to_dev.sh")

Show comments

[View file](/snyk/kubernetes-monitor/blob/5b9a7821680bbfb6c4a900ab05d898ce2b2cc157/scripts/circleci-jobs/deploy_to_dev.sh)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -20,7 +20,7 @@ cp -r snyk-monitor/\* $KUBERNETES\_MONITOR\_DEPLOYER\_REPO/helm |
|  |  | # Create helm values for different envs |
|  |  | cat >$KUBERNETES\_MONITOR\_DEPLOYER\_REPO/helm/values/multi-tenant-gcp-pre-production.yaml <<EOF |
|  |  | clusterName: "Development cluster" |
|  |  | integrationApi: https://kubernetes-upstream.dev.snyk.io |
|  |  | integrationApi: "https://api.dev.snyk.io/v2/kubernetes-upstream" |
|  |  | log\_level: "DEBUG" |
|  |  | skip\_k8s\_jobs: true |
|  |  |  |
| Expand Down | |  |

7 changes: 6 additions & 1 deletion

7
[scripts/local-testing.sh](#diff-f47b9562123a915f7423ad0a03c1415db10b57ad4ac62b154b7f7ca5b7040a22 "scripts/local-testing.sh")

Show comments

[View file](/snyk/kubernetes-monitor/blob/5b9a7821680bbfb6c4a900ab05d898ce2b2cc157/scripts/local-testing.sh)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -15,10 +15,15 @@ if [ "$INTEGRATION\_ID" == "" ]; then |
|  |  | read INTEGRATION\_ID |
|  |  | fi |
|  |  |  |
|  |  | if [ "$SERVICE\_ACCOUNT\_API\_TOKEN" == "" ]; then |
|  |  | echo "Enter your service account API token: " |
|  |  | read SERVICE\_ACCOUNT\_API\_TOKEN |
|  |  | fi |
|  |  |  |
|  |  | kind delete cluster |
|  |  | kind create cluster |
|  |  | kubectl create namespace snyk-monitor |
|  |  | kubectl create secret generic snyk-monitor -n snyk-monitor --from-literal=dockercfg.json={} --from-literal=integrationId=${INTEGRATION\_ID} |
|  |  | kubectl create secret generic snyk-monitor -n snyk-monitor --from-literal=dockercfg.json={} --from-literal=integrationId=${INTEGRATION\_ID} --from-literal=serviceAccountApiToken=${SERVICE\_ACCOUNT\_API\_TOKEN} |
|  |  | helm upgrade --install snyk-monitor ./snyk-monitor --namespace snyk-monitor --set clusterName="kind localhost" --set image.tag=${LATEST\_TAG} --set integrationApi=http://${IP}:9000 |
|  |  |  |
|  |  | printf "\r\n\r\nYou can now check if the pod is running using:\r\n\tkubectl get pod -n snyk-monitor\r\n" |

5 changes: 5 additions & 0 deletions

5
[snyk-monitor-deployment.yaml](#diff-bf7204728c6b4399fc51ae28f3548ca884042967ffab12f70fa82e98776c979a "snyk-monitor-deployment.yaml")

Show comments

[View file](/snyk/kubernetes-monitor/blob/5b9a7821680bbfb6c4a900ab05d898ce2b2cc157/snyk-monitor-deployment.yaml)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -43,6 +43,11 @@ spec: |
|  |  | secretKeyRef: |
|  |  | name: snyk-monitor |
|  |  | key: integrationId |
|  |  | - name: SNYK\_SERVICE\_ACCOUNT\_API\_TOKEN |
|  |  | valueFrom: |
|  |  | secretKeyRef: |
|  |  | name: snyk-monitor |
|  |  | key: serviceAccountApiToken |
|  |  | - name: SNYK\_WATCH\_NAMESPACE |
|  |  | valueFrom: |
|  |  | configMapKeyRef: |
| Expand Down | |  |

2 changes: 1 addition & 1 deletion

2
[snyk-operator-certified/README.md](#diff-c5d83550f2c778b53b148202222cc4642f7ce5b1958fc24fba963ad3f11582e7 "snyk-operator-certified/README.md")

Show comments

[View file](/snyk/kubernetes-monitor/blob/5b9a7821680bbfb6c4a900ab05d898ce2b2cc157/snyk-operator-certified/README.md)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |

| Expand Up | | @@ -41,7 +41,7 @@ metadata: |
|  |  | name: snyk-monitor |
|  |  | namespace: snyk-monitor |
|  |  | spec: |
|  |  | integrationApi: https://kubernetes-upstream.dev.snyk.io |
|  |  | integrationApi: https://api.dev.snyk.io/v2/kubernetes-upstream |
|  |  | temporaryStorageSize: 20Gi |
|  |  | pvc: |
|  |  | enabled: true |
| Expand Down | |  |

4 changes: 2 additions & 2 deletions

4
[snyk-operator-certified/bundle/manifests/snyk-monitor.clusterserviceversion.yaml](#diff-210960d26a1322c1b74abe9d4dff6f80fff9139558a3b147867a7a8670f4ef60 "snyk-operator-certified/bundle/manifests/snyk-monitor.clusterserviceversion.yaml")

Show comments

[View file](/snyk/kubernetes-monitor/blob/5b9a7821680bbfb6c4a900ab05d898ce2b2cc157/snyk-operator-certified/bundle/manifests/snyk-monitor.clusterserviceversion.yaml)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -147,11 +147,11 @@ spec: |
|  |  |  |
|  |  | ## Prerequisites |
|  |  |  |
|  |  | To start using the Operator and the Snyk controller that it manages, you will need to create a secret containing your Snyk integrationId and Docker config file: |
|  |  | To start using the Operator and the Snyk controller that it manages, you will need to create a secret containing your Snyk integrationId, serviceAccountApiToken and Docker config file: |
|  |  |  |
|  |  | ``` |
|  |  | kubectl create namespace snyk-monitor |
|  |  | kubectl create secret generic snyk-monitor -n snyk-monitor --from-literal=dockercfg.json={} --from-literal=integrationId=${SNYK\_INTEGRATION\_ID} |
|  |  | kubectl create secret generic snyk-monitor -n snyk-monitor --from-literal=dockercfg.json={} --from-literal=integrationId=${SNYK\_INTEGRATION\_ID} --from-literal=serviceAccountApiToken=${SNYK\_SERVICE\_ACCOUNT\_API\_TOKEN} |
|  |  | ``` |
|  |  |  |
|  |  | Refer to the [Snyk documentation](https://support.snyk.io/hc/en-us/articles/360003916138-Kubernetes-integration-overview) for more details. |
| Expand Down | |  |

4 changes: 2 additions & 2 deletions

4
[snyk-operator-certified/config/manifests/bases/snyk-monitor.clusterserviceversion.yaml](#diff-c4e477c7b6b39be6882c9fb364aa23a3c55f1bece80af8f4d128261b5a712bed "snyk-operator-certified/config/manifests/bases/snyk-monitor.clusterserviceversion.yaml")

Show comments

[View file](/snyk/kubernetes-monitor/blob/5b9a7821680bbfb6c4a900ab05d898ce2b2cc157/snyk-operator-certified/config/manifests/bases/snyk-monitor.clusterserviceversion.yaml)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -129,11 +129,11 @@ spec: |
|  |  |  |
|  |  | ## Prerequisites |
|  |  |  |
|  |  | To start using the Operator and the Snyk controller that it manages, you will need to create a secret containing your Snyk integrationId and Docker config file: |
|  |  | To start using the Operator and the Snyk controller that it manages, you will need to create a secret containing your Snyk integrationId, serviceAccountApiToken and Docker config file: |
|  |  |  |
|  |  | ``` |
|  |  | kubectl create namespace snyk-monitor |
|  |  | kubectl create secret generic snyk-monitor -n snyk-monitor --from-literal=dockercfg.json={} --from-literal=integrationId=${SNYK\_INTEGRATION\_ID} |
|  |  | kubectl create secret generic snyk-monitor -n snyk-monitor --from-literal=dockercfg.json={} --from-literal=integrationId=${SNYK\_INTEGRATION\_ID} --from-literal=serviceAccountApiToken=${SNYK\_SERVICE\_ACCOUNT\_API\_TOKEN} |
|  |  | ``` |
|  |  |  |
|  |  | Refer to the [Snyk documentation](https://support.snyk.io/hc/en-us/articles/360003916138-Kubernetes-integration-overview) for more details. |
| Expand Down | |  |

5 changes: 5 additions & 0 deletions

5
[snyk-operator-certified/helm-charts/snyk-monitor/templates/deployment.yaml](#diff-797e8757295f29a37680bafd653955b717c6af652ba66acc2d0daaa28be9fd82 "snyk-operator-certified/helm-charts/snyk-monitor/templates/deployment.yaml")

Show comments

[View file](/snyk/kubernetes-monitor/blob/5b9a7821680bbfb6c4a900ab05d898ce2b2cc157/snyk-operator-certified/helm-charts/snyk-monitor/templates/deployment.yaml)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -95,6 +95,11 @@ spec: |
|  |  | secretKeyRef: |
|  |  | name: {{ .Values.monitorSecrets }} |
|  |  | key: integrationId |
|  |  | - name: SNYK\_SERVICE\_ACCOUNT\_API\_TOKEN |
|  |  | valueFrom: |
|  |  | secretKeyRef: |
|  |  | name: snyk-monitor |
|  |  | key: serviceAccountApiToken |
|  |  | - name: SNYK\_WATCH\_NAMESPACE |
|  |  | value: {{ include "snyk-monitor.scope" . }} |
|  |  | - name: SNYK\_DEPLOYMENT\_NAMESPACE |
| Expand Down | |  |

2 changes: 1 addition & 1 deletion

2
[snyk-operator/certified-operator/README.md](#diff-e7dafef9dd47981a9c4efd531dbb5947d5bf7e5cd9f7d49255fcd4492ff1eca6 "snyk-operator/certified-operator/README.md")

Show comments

[View file](/snyk/kubernetes-monitor/blob/5b9a7821680bbfb6c4a900ab05d898ce2b2cc157/snyk-operator/certified-operator/README.md)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |

| Expand Up | | @@ -40,7 +40,7 @@ metadata: |
|  |  | name: snyk-monitor |
|  |  | namespace: snyk-monitor |
|  |  | spec: |
|  |  | integrationApi: https://kubernetes-upstream.dev.snyk.io |
|  |  | integrationApi: https://api.dev.snyk.io/v2/kubernetes-upstream |
|  |  | temporaryStorageSize: 20Gi |
|  |  | pvc: |
|  |  | enabled: true |
| Expand Down | |  |

4 changes: 2 additions & 2 deletions

4
[...or/deploy/olm-catalog/snyk-operator/0.0.0/snyk-operator.v0.0.0.clusterserviceversion.yaml](#diff-7d37d49a7ae61314abbbde90ba87e8ffa13f651a5de8a4abb1aba11530f428e8 "snyk-operator/deploy/olm-catalog/snyk-operator/0.0.0/snyk-operator.v0.0.0.clusterserviceversion.yaml")

Show comments

[View file](/snyk/kubernetes-monitor/blob/5b9a7821680bbfb6c4a900ab05d898ce2b2cc157/snyk-operator/deploy/olm-catalog/snyk-operator/0.0.0/snyk-operator.v0.0.0.clusterserviceversion.yaml)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -187,11 +187,11 @@ spec: |
|  |  |  |
|  |  | ## Prerequisites |
|  |  |  |
|  |  | To start using the Operator and the Snyk controller that it manages, you will need to create a secret containing your Snyk integrationId and Docker config file: |
|  |  | To start using the Operator and the Snyk controller that it manages, you will need to create a secret containing your Snyk integrationId, serviceAccountApiToken and Docker config file: |
|  |  |  |
|  |  | ``` |
|  |  | kubectl create namespace snyk-monitor |
|  |  | kubectl create secret generic snyk-monitor -n snyk-monitor --from-literal=dockercfg.json={} --from-literal=integrationId=${SNYK\_INTEGRATION\_ID} |
|  |  | kubectl create secret generic snyk-monitor -n snyk-monitor --from-literal=dockercfg.json={} --from-literal=integrationId=${SNYK\_INTEGRATION\_ID} --from-literal=serviceAccountApiToken=${SNYK\_SERVICE\_ACCOUNT\_API\_TOKEN} |
|  |  | ``` |
|  |  |  |
|  |  | Refer to the [Snyk documentation](https://support.snyk.io/hc/en-us/articles/360003916138-Kubernetes-integration-overview) for more details. |
| Expand Down | |  |

1 change: 1 addition & 0 deletions

1
[src/common/config.ts](#diff-9d5ba1a74fa3c1ca2e89c9b7a2c356807802c8b5be7473377ffd4d9ab348aef1 "src/common/config.ts")

Show comments

[View file](/snyk/kubernetes-monitor/blob/5b9a7821680bbfb6c4a900ab05d898ce2b2cc157/src/common/config.ts)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -39,6 +39,7 @@ function getClusterName(): string { |
|  |  | config.AGENT\_ID = randomUUID(); |
|  |  |  |
|  |  | config.INTEGRATION\_ID = config.INTEGRATION\_ID.trim(); |
|  |  | config.SERVICE\_ACCOUNT\_API\_TOKEN = config.SERVICE\_ACCOUNT\_API\_TOKEN.trim(); |
|  |  | config.CLUSTER\_NAME = getClusterName(); |
|  |  | config.IMAGE\_STORAGE\_ROOT = '/var/tmp'; |
|  |  | config.POLICIES\_STORAGE\_ROOT = '/tmp/policies'; |
| Expand Down | |  |

1 change: 1 addition & 0 deletions

1
[src/common/types.ts](#diff-5328ecb0af4d24ae2b95bb12aa89dc1feab5964c8790126d0f721dacc3a99ef9 "src/common/types.ts")

Show comments

[View file](/snyk/kubernetes-monitor/blob/5b9a7821680bbfb6c4a900ab05d898ce2b2cc157/src/common/types.ts)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -19,6 +19,7 @@ export interface Config { |
|  |  | REQUEST\_QUEUE\_LENGTH: number; |
|  |  | QUEUE\_LENGTH\_LOG\_FREQUENCY\_MINUTES: number; |
|  |  | INTEGRATION\_ID: string; |
|  |  | SERVICE\_ACCOUNT\_API\_TOKEN: string; |
|  |  | DEFAULT\_KUBERNETES\_UPSTREAM\_URL: string; |
|  |  | MAX\_RETRY\_BACKOFF\_DURATION\_SECONDS: number; |
|  |  |  |
| Expand Down | |  |

55 changes: 46 additions & 9 deletions

55
[src/transmitter/index.ts](#diff-d40843739012d28af7cb08fc87c96ded838baa28d5a6c617d41e75d9b5402d54 "src/transmitter/index.ts")

Show comments

[View file](/snyk/kubernetes-monitor/blob/5b9a7821680bbfb6c4a900ab05d898ce2b2cc157/src/transmitter/index.ts)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -21,6 +21,7 @@ import { |
|  |  | import { getProxyAgent } from './proxy'; |
|  |  |  |
|  |  | import type { queueAsPromised } from 'fastq'; |
|  |  | import path from 'path'; |
|  |  |  |
|  |  | interface KubernetesUpstreamRequest { |
|  |  | method: NeedleHttpVerbs; |
| Expand All | | @@ -32,11 +33,14 @@ interface KubernetesUpstreamRequest { |
|  |  | | IDeleteWorkloadPayload |
|  |  | | IClusterMetadataPayload |
|  |  | | IRuntimeDataPayload; |
|  |  | options: NeedleOptions; |
|  |  | } |
|  |  |  |
|  |  | const upstreamUrl = |
|  |  | config.INTEGRATION\_API || config.DEFAULT\_KUBERNETES\_UPSTREAM\_URL; |
|  |  |  |
|  |  | const upstreamRequestVersion = '2023-02-10'; |
|  |  |  |
|  |  | let httpAgent = new HttpAgent({ |
|  |  | keepAlive: config.USE\_KEEPALIVE, |
|  |  | }); |
| Expand All | | @@ -55,10 +59,29 @@ function getAgent(u: string): HttpAgent { |
|  |  | const reqQueue: queueAsPromised<unknown> = fastq.promise(async function ( |
|  |  | req: KubernetesUpstreamRequest, |
|  |  | ) { |
|  |  | return await retryRequest(req.method, req.url, req.payload); |
|  |  | return await retryRequest(req.method, req.url, req.payload, req.options); |
|  |  | }, |
|  |  | config.REQUEST\_QUEUE\_LENGTH); |
|  |  |  |
|  |  | const upstreamRequestOptions = { |
|  |  | headers: { |
|  |  | Authorization: `token ${config.SERVICE\_ACCOUNT\_API\_TOKEN}`, |
|  |  | }, |
|  |  | }; |
|  |  |  |
|  |  | function constructUpstreamRequestUrl( |
|  |  | requestPath: string, |
|  |  | queryParams?: Record<string, string>, |
|  |  | ): string { |
|  |  | const requestUrl = new URL(upstreamUrl); |
|  |  | requestUrl.pathname = path.join(requestUrl.pathname, requestPath); |
|  |  | requestUrl.searchParams.set('version', upstreamRequestVersion); |
|  |  | for (const key in queryParams) { |
|  |  | requestUrl.searchParams.set(key, queryParams[key]); |
|  |  | } |
|  |  | return requestUrl.toString(); |
|  |  | } |
|  |  |  |
|  |  | export async function sendDepGraph( |
|  |  | ...payloads: IDependencyGraphPayload[] |
|  |  | ): Promise<void> { |
| Expand All | | @@ -69,8 +92,9 @@ export async function sendDepGraph( |
|  |  | try { |
|  |  | const request: KubernetesUpstreamRequest = { |
|  |  | method: 'post', |
|  |  | url: `${upstreamUrl}/api/v1/dependency-graph`, |
|  |  | url: constructUpstreamRequestUrl('/api/v1/dependency-graph'), |
|  |  | payload, |
|  |  | options: upstreamRequestOptions, |
|  |  | }; |
|  |  |  |
|  |  | const { response, attempt } = await reqQueue.push(request); |
| Expand Down  Expand Up | | @@ -100,8 +124,9 @@ export async function sendScanResults( |
|  |  | try { |
|  |  | const request: KubernetesUpstreamRequest = { |
|  |  | method: 'post', |
|  |  | url: `${upstreamUrl}/api/v1/scan-results`, |
|  |  | url: constructUpstreamRequestUrl('/api/v1/scan-results'), |
|  |  | payload, |
|  |  | options: upstreamRequestOptions, |
|  |  | }; |
|  |  |  |
|  |  | const { response, attempt } = await reqQueue.push(request); |
| Expand Down  Expand Up | | @@ -136,8 +161,9 @@ export async function sendWorkloadMetadata( |
|  |  |  |
|  |  | const request: KubernetesUpstreamRequest = { |
|  |  | method: 'post', |
|  |  | url: `${upstreamUrl}/api/v1/workload`, |
|  |  | url: constructUpstreamRequestUrl('/api/v1/workload'), |
|  |  | payload, |
|  |  | options: upstreamRequestOptions, |
|  |  | }; |
|  |  |  |
|  |  | const { response, attempt } = await reqQueue.push(request); |
| Expand Down  Expand Up | | @@ -172,8 +198,9 @@ export async function sendWorkloadEventsPolicy( |
|  |  |  |
|  |  | const { response, attempt } = await retryRequest( |
|  |  | 'post', |
|  |  | `${upstreamUrl}/api/v1/policy`, |
|  |  | constructUpstreamRequestUrl('/api/v1/policy'), |
|  |  | payload, |
|  |  | upstreamRequestOptions, |
|  |  | ); |
|  |  | if (!isSuccessStatusCode(response.statusCode)) { |
|  |  | throw new Error(`${response.statusCode} ${response.statusMessage}`); |
| Expand Down  Expand Up | | @@ -207,11 +234,19 @@ export async function deleteWorkload( |
|  |  | try { |
|  |  | const { workloadLocator, agentId } = payload; |
|  |  | const { userLocator, cluster, namespace, type, name } = workloadLocator; |
|  |  | const query = `userLocator=${userLocator}&cluster=${cluster}&namespace=${namespace}&type=${type}&name=${name}&agentId=${agentId}`; |
|  |  | const queryParams: Record<string, string> = { |
|  |  | userLocator, |
|  |  | cluster, |
|  |  | namespace, |
|  |  | type, |
|  |  | name, |
|  |  | agentId, |
|  |  | }; |
|  |  | const request: KubernetesUpstreamRequest = { |
|  |  | method: 'delete', |
|  |  | url: `${upstreamUrl}/api/v1/workload?${query}`, |
|  |  | url: constructUpstreamRequestUrl('api/v1/workload', queryParams), |
|  |  | payload, |
|  |  | options: upstreamRequestOptions, |
|  |  | }; |
|  |  |  |
|  |  | const { response, attempt } = await reqQueue.push(request); |
| Expand Down  Expand Up | | @@ -348,8 +383,9 @@ export async function sendClusterMetadata(): Promise<void> { |
|  |  |  |
|  |  | const request: KubernetesUpstreamRequest = { |
|  |  | method: 'post', |
|  |  | url: `${upstreamUrl}/api/v1/cluster`, |
|  |  | url: constructUpstreamRequestUrl('/api/v1/cluster'), |
|  |  | payload, |
|  |  | options: upstreamRequestOptions, |
|  |  | }; |
|  |  |  |
|  |  | const { response, attempt } = await reqQueue.push(request); |
| Expand Down  Expand Up | | @@ -394,8 +430,9 @@ export async function sendRuntimeData( |
|  |  |  |
|  |  | const request: KubernetesUpstreamRequest = { |
|  |  | method: 'post', |
|  |  | url: `${upstreamUrl}/api/v1/runtime-results`, |
|  |  | url: constructUpstreamRequestUrl('/api/v1/runtime-results'), |
|  |  | payload, |
|  |  | options: upstreamRequestOptions, |
|  |  | }; |
|  |  |  |
|  |  | const { response, attempt } = await reqQueue.push(request); |
| Expand Down | |  |

5 changes: 4 additions & 1 deletion

5
[test/common/config.spec.ts](#diff-96a9b6b2d3d32ad5f76aa492379239a517184b07254ebf4b6579f9b659b933ed "test/common/config.spec.ts")

Show comments

[View file](/snyk/kubernetes-monitor/blob/5b9a7821680bbfb6c4a900ab05d898ce2b2cc157/test/common/config.spec.ts)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -1,8 +1,10 @@ |
|  |  | describe('extractNamespaceName()', () => { |
|  |  | const apiToken = '46766a0a-ed0b-4e91-84c8-ea1c827f2a73'; |
|  |  | beforeEach(() => { |
|  |  | jest.resetModules(); |
|  |  | process.env.SNYK\_SYSDIG\_ENDPOINT = 'https://api/v1/images/'; |
|  |  | process.env.SNYK\_SYSDIG\_TOKEN = '1432gtrhtrw32raf'; |
|  |  | process.env.SNYK\_SERVICE\_ACCOUNT\_API\_TOKEN = apiToken; |
|  |  | }); |
|  |  |  |
|  |  | afterEach(() => { |
| Expand Down  Expand Up | | @@ -68,6 +70,7 @@ describe('extractNamespaceName()', () => { |
|  |  | const { config } = require('../../src/common/config'); |
|  |  | expect(config.AGENT\_ID).toEqual(expect.any(String)); |
|  |  | expect(config.INTEGRATION\_ID).toEqual(expect.any(String)); |
|  |  | expect(config.SERVICE\_ACCOUNT\_API\_TOKEN).toEqual(apiToken); |
|  |  | expect(config.CLUSTER\_NAME).toEqual('Default cluster'); |
|  |  | expect(config.IMAGE\_STORAGE\_ROOT).toEqual('/var/tmp'); |
|  |  | expect(config.EXCLUDED\_NAMESPACES).toBeNull(); |
| Expand All | | @@ -76,7 +79,7 @@ describe('extractNamespaceName()', () => { |
|  |  | expect(config.NO\_PROXY).toBeUndefined(); |
|  |  | expect(config.USE\_KEEPALIVE).toEqual(true); |
|  |  | expect(config.SKIP\_K8S\_JOBS).toEqual(false); |
|  |  | expect(config.WORKERS\_COUNT).toEqual(10); |
|  |  | expect(config.WORKERS\_COUNT).toEqual(5); |
|  |  | expect(config.SKOPEO\_COMPRESSION\_LEVEL).toEqual(6); |
|  |  | expect(config.SYSDIG\_ENDPOINT).toEqual('https://api/v1/images/'); |
|  |  | expect(config.SYSDIG\_TOKEN).toEqual('1432gtrhtrw32raf'); |
| Expand Down | |  |

2 changes: 1 addition & 1 deletion

2
[test/fixtures/operator/custom-resource-k8s.yaml](#diff-1ac7b2654bbabc7fa6f2a99736667d7087e8a1dc01ab93cd774807d38333c3dd "test/fixtures/operator/custom-resource-k8s.yaml")

Show comments

[View file](/snyk/kubernetes-monitor/blob/5b9a7821680bbfb6c4a900ab05d898ce2b2cc157/test/fixtures/operator/custom-resource-k8s.yaml)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -4,7 +4,7 @@ metadata: |
|  |  | name: snyk-monitor |
|  |  | namespace: marketplace |
|  |  | spec: |
|  |  | integrationApi: https://kubernetes-upstream.dev.snyk.io |
|  |  | integrationApi: https://api.dev.snyk.io/v2/kubernetes-upstream |
|  |  | temporaryStorageSize: 20Gi |
|  |  | clusterName: "" |
|  |  | pvc: |
| Expand Down | |  |

2 changes: 1 addition & 1 deletion

2
[test/fixtures/operator/custom-resource.yaml](#diff-6ff1655c301177020fd0896aafba53c135d9681c5de22c178b545f4556e141c7 "test/fixtures/operator/custom-resource.yaml")

Show comments

[View file](/snyk/kubernetes-monitor/blob/5b9a7821680bbfb6c4a900ab05d898ce2b2cc157/test/fixtures/operator/custom-resource.yaml)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -4,7 +4,7 @@ metadata: |
|  |  | name: snyk-monitor |
|  |  | namespace: snyk-monitor |
|  |  | spec: |
|  |  | integrationApi: https://kubernetes-upstream.dev.snyk.io |
|  |  | integrationApi: https://api.dev.snyk.io/v2/kubernetes-upstream |
|  |  | temporaryStorageSize: 20Gi |
|  |  | clusterName: "" |
|  |  | pvc: |
| Expand Down | |  |

2 changes: 1 addition & 1 deletion

2
[test/setup/deployers/helm-with-proxy.ts](#diff-5f711c2d0aa7100a348ea5428cfdeffa185fcaa1ee94366c544e6146b61841f0 "test/setup/deployers/helm-with-proxy.ts")

Show comments

[View file](/snyk/kubernetes-monitor/blob/5b9a7821680bbfb6c4a900ab05d898ce2b2cc157/test/setup/deployers/helm-with-proxy.ts)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -37,7 +37,7 @@ async function deployKubernetesMonitor( |
|  |  | `--set image.repository=${imageName} ` + |
|  |  | `--set image.tag=${imageTag} ` + |
|  |  | `--set image.pullPolicy=${imagePullPolicy} ` + |
|  |  | '--set integrationApi=https://kubernetes-upstream.dev.snyk.io ' + |
|  |  | '--set integrationApi=https://api.dev.snyk.io/v2/kubernetes-upstream ' + |
|  |  | `--set clusterName=${deployOptions.clusterName} ` + |
|  |  | '--set https\_proxy=http://forwarding-proxy:8080', |
|  |  | ); |
| Expand Down | |  |

2 changes: 1 addition & 1 deletion

2
[test/setup/deployers/helm.ts](#diff-3397478f36cfed87ce5b301ed41987b393f1624f83be76689b284b57bf0f4c11 "test/setup/deployers/helm.ts")

Show comments

[View file](/snyk/kubernetes-monitor/blob/5b9a7821680bbfb6c4a900ab05d898ce2b2cc157/test/setup/deployers/helm.ts)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -30,7 +30,7 @@ async function deployKubernetesMonitor( |
|  |  | `--set image.repository=${imageName} ` + |
|  |  | `--set image.tag=${imageTag} ` + |
|  |  | `--set image.pullPolicy=${imagePullPolicy} ` + |
|  |  | '--set integrationApi=https://kubernetes-upstream.dev.snyk.io ' + |
|  |  | '--set integrationApi=https://api.dev.snyk.io/v2/kubernetes-upstream ' + |
|  |  | `--set clusterName=${deployOptions.clusterName} ` + |
|  |  | '--set nodeSelector."kubernetes\\.io/os"=linux ' + |
|  |  | '--set pvc.enabled=true ' + |
| Expand Down | |  |

2 changes: 1 addition & 1 deletion

2
[test/setup/deployers/yaml.ts](#diff-49ea686652c1e062cc89f88920743734e9df0f431cfdad3ee95ba1e8fc05abfe "test/setup/deployers/yaml.ts")

Show comments

[View file](/snyk/kubernetes-monitor/blob/5b9a7821680bbfb6c4a900ab05d898ce2b2cc157/test/setup/deployers/yaml.ts)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -47,7 +47,7 @@ function createTestYamlDeployment( |
|  |  | const envVar = container.env.find( |
|  |  | (env) => env.name === 'SNYK\_INTEGRATION\_API', |
|  |  | ); |
|  |  | envVar.value = 'https://kubernetes-upstream.dev.snyk.io'; |
|  |  | envVar.value = 'https://api.dev.snyk.io/v2/kubernetes-upstream'; |
|  |  | delete envVar.valueFrom; |
|  |  |  |
|  |  | if (clusterName) { |
| Expand Down | |  |

 Loading

Oops, something went wrong.
 Retry

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `5b9a782`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fsnyk%2Fkubernetes-monitor%2Fcommit%2F5b9a7821680bbfb6c4a900ab05d898ce2b2cc157) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_1ede2170_20250114_222734.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fsnyk%2Fkubernetes-monitor)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fsnyk%2Fkubernetes-monitor)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E&source=header-repo&source_repo=snyk%2Fkubernetes-monitor)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[snyk](/snyk)
/
**[kubernetes-monitor](/snyk/kubernetes-monitor)**
Public

* [Notifications](/login?return_to=%2Fsnyk%2Fkubernetes-monitor) You must be signed in to change notification settings
* [Fork
  74](/login?return_to=%2Fsnyk%2Fkubernetes-monitor)
* [Star
   88](/login?return_to=%2Fsnyk%2Fkubernetes-monitor)

Use Snyk to find and fix vulnerabilities in your Kubernetes workloads

[docs.snyk.io/products/snyk-container/image-scanning-library/kubernetes-workload-and-image-scanning/kubernetes-integration-overview](https://docs.snyk.io/products/snyk-container/image-scanning-library/kubernetes-workload-and-image-scanning/kubernetes-integration-overview "https://docs.snyk.io/products/snyk-container/image-scanning-library/kubernetes-workload-and-image-scanning/kubernetes-integration-overview")

### License

[View license](/snyk/kubernetes-monitor/blob/staging/LICENSE)

[88
stars](/snyk/kubernetes-monitor/stargazers) [74
forks](/snyk/kubernetes-monitor/forks) [Branches](/snyk/kubernetes-monitor/branches) [Tags](/snyk/kubernetes-monitor/tags) [Activity](/snyk/kubernetes-monitor/activity)
 [Star](/login?return_to=%2Fsnyk%2Fkubernetes-monitor)

 [Notifications](/login?return_to=%2Fsnyk%2Fkubernetes-monitor) You must be signed in to change notification settings

* [Code](/snyk/kubernetes-monitor)
* [Issues
  13](/snyk/kubernetes-monitor/issues)
* [Pull requests
  9](/snyk/kubernetes-monitor/pulls)
* [Discussions](/snyk/kubernetes-monitor/discussions)
* [Actions](/snyk/kubernetes-monitor/actions)
* [Security](/snyk/kubernetes-monitor/security)
* [Insights](/snyk/kubernetes-monitor/pulse)

Additional navigation options

* [Code](/snyk/kubernetes-monitor)
* [Issues](/snyk/kubernetes-monitor/issues)
* [Pull requests](/snyk/kubernetes-monitor/pulls)
* [Discussions](/snyk/kubernetes-monitor/discussions)
* [Actions](/snyk/kubernetes-monitor/actions)
* [Security](/snyk/kubernetes-monitor/security)
* [Insights](/snyk/kubernetes-monitor/pulse)

# snyk/kubernetes-monitor

    staging[Branches](/snyk/kubernetes-monitor/branches)[Tags](/snyk/kubernetes-monitor/tags)Go to fileCode
## Folders and files

| Name | | Name | Last commit message | Last commit date |
| --- | --- | --- | --- | --- |
| Latest commit History[2,025 Commits](/snyk/kubernetes-monitor/commits/staging/) | | |
| [.circleci](/snyk/kubernetes-monitor/tree/staging/.circleci ".circleci") | | [.circleci](/snyk/kubernetes-monitor/tree/staging/.circleci ".circleci") |  |  |
| [.github](/snyk/kubernetes-monitor/tree/staging/.github ".github") | | [.github](/snyk/kubernetes-monitor/tree/staging/.github ".github") |  |  |
| [bin](/snyk/kubernetes-monitor/tree/staging/bin "bin") | | [bin](/snyk/kubernetes-monitor/tree/staging/bin "bin") |  |  |
| [scripts](/snyk/kubernetes-monitor/tree/staging/scripts "scripts") | | [scripts](/snyk/kubernetes-monitor/tree/staging/scripts "scripts") |  |  |
| [snyk-monitor](/snyk/kubernetes-monitor/tree/staging/snyk-monitor "snyk-monitor") | | [snyk-monitor](/snyk/kubernetes-monitor/tree/staging/snyk-monitor "snyk-monitor") |  |  |
| [src](/snyk/kubernetes-monitor/tree/staging/src "src") | | [src](/snyk/kubernetes-monitor/tree/staging/src "src") |  |  |
| [test](/snyk/kubernetes-monitor/tree/staging/test "test") | | [test](/snyk/kubernetes-monitor/tree/staging/test "test") |  |  |
| [.commitlintrc.json](/snyk/kubernetes-monitor/blob/staging/.commitlintrc.json ".commitlintrc.json") | | [.commitlintrc.json](/snyk/kubernetes-monitor/blob/staging/.commitlintrc.json ".commitlintrc.json") |  |  |
| [.dockerignore](/snyk/kubernetes-monitor/blob/staging/.dockerignore ".dockerignore") | | [.dockerignore](/snyk/kubernetes-monitor/blob/staging/.dockerignore ".dockerignore") |  |  |
| [.eslintrc.json](/snyk/kubernetes-monitor/blob/staging/.eslintrc.json ".eslintrc.json") | | [.eslintrc.json](/snyk/kubernetes-monitor/blob/staging/.eslintrc.json ".eslintrc.json") |  |  |
| [.gitignore](/snyk/kubernetes-monitor/blob/staging/.gitignore ".gitignore") | | [.gitignore](/snyk/kubernetes-monitor/blob/staging/.gitignore ".gitignore") |  |  |
| [.gitleaksignore](/snyk/kubernetes-monitor/blob/staging/.gitleaksignore ".gitleaksignore") | | [.gitleaksignore](/snyk/kubernetes-monitor/blob/staging/.gitleaksignore ".gitleaksignore") |  |  |
| [.nvmrc](/snyk/kubernetes-monitor/blob/staging/.nvmrc ".nvmrc") | | [.nvmrc](/snyk/kubernetes-monitor/blob/staging/.nvmrc ".nvmrc") |  |  |
| [.pre-commit-config.yaml](/snyk/kubernetes-monitor/blob/staging/.pre-commit-config.yaml ".pre-commit-config.yaml") | | [.pre-commit-config.yaml](/snyk/kubernetes-monitor/blob/staging/.pre-commit-config.yaml ".pre-commit-config.yaml") |  |  |
| [.prettierignore](/snyk/kubernetes-monitor/blob/staging/.prettierignore ".prettierignore") | | [.prettierignore](/snyk/kubernetes-monitor/blob/staging/.prettierignore ".prettierignore") |  |  |
| [.prettierrc.json](/snyk/kubernetes-monitor/blob/staging/.prettierrc.json ".prettierrc.json") | | [.prettierrc.json](/snyk/kubernetes-monitor/blob/staging/.prettierrc.json ".prettierrc.json") |  |  |
| [.snyk](/snyk/kubernetes-monitor/blob/staging/.snyk ".snyk") | | [.snyk](/snyk/kubernetes-monitor/blob/staging/.snyk ".snyk") |  |  |
| [.tool-versions](/snyk/kubernetes-monitor/blob/staging/.tool-versions ".tool-versions") | | [.tool-versions](/snyk/kubernetes-monitor/blob/staging/.tool-versions ".tool-versions") |  |  |
| [CODE\_OF\_CONDUCT.md](/snyk/kubernetes-monitor/blob/staging/CODE_OF_CONDUCT.md "CODE_OF_CONDUCT.md") | | [CODE\_OF\_CONDUCT.md](/snyk/kubernetes-monitor/blob/staging/CODE_OF_CONDUCT.md "CODE_OF_CONDUCT.md") |  |  |
| [CONTRIBUTING.md](/snyk/kubernetes-monitor/blob/staging/CONTRIBUTING.md "CONTRIBUTING.md") | | [CONTRIBUTING.md](/snyk/kubernetes-monitor/blob/staging/CONTRIBUTING.md "CONTRIBUTING.md") |  |  |
| [Dockerfile](/snyk/kubernetes-monitor/blob/staging/Dockerfile "Dockerfile") | | [Dockerfile](/snyk/kubernetes-monitor/blob/staging/Dockerfile "Dockerfile") |  |  |
| [Dockerfile.ubi9](/snyk/kubernetes-monitor/blob/staging/Dockerfile.ubi9 "Dockerfile.ubi9") | | [Dockerfile.ubi9](/snyk/kubernetes-monitor/blob/staging/Dockerfile.ubi9 "Dockerfile.ubi9") |  |  |
| [LICENSE](/snyk/kubernetes-monitor/blob/staging/LICENSE "LICENSE") | | [LICENSE](/snyk/kubernetes-monitor/blob/staging/LICENSE "LICENSE") |  |  |
| [README.md](/snyk/kubernetes-monitor/blob/staging/README.md "README.md") | | [README.md](/snyk/kubernetes-monitor/blob/staging/README.md "README.md") |  |  |
| [Tiltfile](/snyk/kubernetes-monitor/blob/staging/Tiltfile "Tiltfile") | | [Tiltfile](/snyk/kubernetes-monitor/blob/staging/Tiltfile "Tiltfile") |  |  |
| [catalog-info.yaml](/snyk/kubernetes-monitor/blob/staging/catalog-info.yaml "catalog-info.yaml") | | [catalog-info.yaml](/snyk/kubernetes-monitor/blob/staging/catalog-info.yaml "catalog-info.yaml") |  |  |
| [config.default.json](/snyk/kubernetes-monitor/blob/staging/config.default.json "config.default.json") | | [config.default.json](/snyk/kubernetes-monitor/blob/staging/config.default.json "config.default.json") |  |  |
| [jest-environment-fail-fast.ts](/snyk/kubernetes-monitor/blob/staging/jest-environment-fail-fast.ts "jest-environment-fail-fast.ts") | | [jest-environment-fail-fast.ts](/snyk/kubernetes-monitor/blob/staging/jest-environment-fail-fast.ts "jest-environment-fail-fast.ts") |  |  |
| [jest.config.js](/snyk/kubernetes-monitor/blob/staging/jest.config.js "jest.config.js") | | [jest.config.js](/snyk/kubernetes-monitor/blob/staging/jest.config.js "jest.config.js") |  |  |
| [package-lock.json](/snyk/kubernetes-monitor/blob/staging/package-lock.json "package-lock.json") | | [package-lock.json](/snyk/kubernetes-monitor/blob/staging/package-lock.json "package-lock.json") |  |  |
| [package.json](/snyk/kubernetes-monitor/blob/staging/package.json "package.json") | | [package.json](/snyk/kubernetes-monitor/blob/staging/package.json "package.json") |  |  |
| [scc.txt](/snyk/kubernetes-monitor/blob/staging/scc.txt "scc.txt") | | [scc.txt](/snyk/kubernetes-monitor/blob/staging/scc.txt "scc.txt") |  |  |
| [snyk-monitor-cluster-permissions.yaml](/snyk/kubernetes-monitor/blob/staging/snyk-monitor-cluster-permissions.yaml "snyk-monitor-cluster-permissions.yaml") | | [snyk-monitor-cluster-permissions.yaml](/snyk/kubernetes-monitor/blob/staging/snyk-monitor-cluster-permissions.yaml "snyk-monitor-cluster-permissions.yaml") |  |  |
| [snyk-monitor-deployment.yaml](/snyk/kubernetes-monitor/blob/staging/snyk-monitor-deployment.yaml "snyk-monitor-deployment.yaml") | | [snyk-monitor-deployment.yaml](/snyk/kubernetes-monitor/blob/staging/snyk-monitor-deployment.yaml "snyk-monitor-deployment.yaml") |  |  |
| [snyk-monitor-namespaced-permissions.yaml](/snyk/kubernetes-monitor/blob/staging/snyk-monitor-namespaced-permissions.yaml "snyk-monitor-namespaced-permissions.yaml") | | [snyk-monitor-namespaced-permissions.yaml](/snyk/kubernetes-monitor/blob/staging/snyk-monitor-namespaced-permissions.yaml "snyk-monitor-namespaced-permissions.yaml") |  |  |
| [tsconfig.json](/snyk/kubernetes-monitor/blob/staging/tsconfig.json "tsconfig.json") | | [tsconfig.json](/snyk/kubernetes-monitor/blob/staging/tsconfig.json "tsconfig.json") |  |  |
| View all files | | |

## Repository files navigation

* README
* Code of conduct
* License

[![Known Vulnerabilities](https://camo.githubusercontent.com/bec19c161600d9d80bd7f656ebb64b07ad5db0ddae7fe74dd85b8894f6fe5d89/68747470733a2f2f736e796b2e696f2f746573742f6769746875622f736e796b2f6b756265726e657465732d6d6f6e69746f722f62616467652e737667)](https://snyk.io/test/github/snyk/kubernetes-monitor)

# snyk/kubernetes-monitor

## Summary

A containerized application that is deployed with Helm. Monitors the security of a Kubernetes cluster by analyzing container images.

## Prerequisites

* 50 GiB of storage in the form of [emptyDir](https://kubernetes.io/docs/concepts/storage/volumes/#emptydir) or a [PersistentVolumeClaim](https://kubernetes.io/docs/concepts/storage/persistent-volumes/).
* External internet access from the Kubernetes cluster to `api.snyk.io`.
* 1 CPU, 2 GiB RAM
* 1 Kubernetes worker node of type `linux/amd64` - supported and tested only on the AMD64 CPU architecture

Supported Kubernetes distributions:

* Any *Generally Available* Kubernetes Certified distribution, for example: GKE, AKS, EKS, OCP.

Tested with the following [Security Context Constraint](/snyk/kubernetes-monitor/blob/staging/scc.txt) on OCP.

## Installation with Helm

Please refer to the [Helm chart installation instructions](/snyk/kubernetes-monitor/blob/staging/snyk-monitor/README.md).

## Documentation

For detailed documentation and support, please refer to the [Snyk Kubernetes integration documentation](https://docs.snyk.io/products/snyk-container/kubernetes-workload-and-image-scanning).

## About

Use Snyk to find and fix vulnerabilities in your Kubernetes workloads

[docs.snyk.io/products/snyk-container/image-scanning-library/kubernetes-workload-and-image-scanning/kubernetes-integration-overview](https://docs.snyk.io/products/snyk-container/image-scanning-library/kubernetes-workload-and-image-scanning/kubernetes-integration-overview "https://docs.snyk.io/products/snyk-container/image-scanning-library/kubernetes-workload-and-image-scanning/kubernetes-integration-overview")

### Resources

[Readme](#readme-ov-file)
### License

[View license](#License-1-ov-file)
### Code of conduct

[Code of conduct](#coc-ov-file)

[Activity](/snyk/kubernetes-monitor/activity)
[Custom properties](/snyk/kubernetes-monitor/custom-properties)
### Stars

[**88**
stars](/snyk/kubernetes-monitor/stargazers)
### Watchers

[**93**
watching](/snyk/kubernetes-monitor/watchers)
### Forks

[**74**
forks](/snyk/kubernetes-monitor/forks)
[Report repository](/contact/report-content?content_url=https%3A%2F%2Fgithub.com%2Fsnyk%2Fkubernetes-monitor&report=snyk+%28user%29)

## [Releases 428](/snyk/kubernetes-monitor/releases)

[v2.16.8
Latest

Nov 29, 2024](/snyk/kubernetes-monitor/releases/tag/v2.16.8)
[+ 427 releases](/snyk/kubernetes-monitor/releases)

## [Packages 0](/orgs/snyk/packages?repo_name=kubernetes-monitor)

No packages published

## [Contributors 53](/snyk/kubernetes-monitor/graphs/contributors)

[+ 39 contributors](/snyk/kubernetes-monitor/graphs/contributors)

## Languages

* [TypeScript
  94.0%](/snyk/kubernetes-monitor/search?l=typescript)
* [Shell
  3.2%](/snyk/kubernetes-monitor/search?l=shell)
* [Python
  1.4%](/snyk/kubernetes-monitor/search?l=python)
* [Dockerfile
  0.8%](/snyk/kubernetes-monitor/search?l=dockerfile)
* [Mustache
  0.2%](/snyk/kubernetes-monitor/search?l=mustache)
* [JavaScript
  0.2%](/snyk/kubernetes-monitor/search?l=javascript)
* [Starlark
  0.2%](/snyk/kubernetes-monitor/search?l=starlark)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


