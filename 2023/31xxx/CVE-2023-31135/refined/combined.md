=== Content from github.com_d8a27278_20250114_200446.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fhypermodeinc%2Fdgraph%2Fsecurity%2Fadvisories%2FGHSA-92wq-q9pq-gw47)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fhypermodeinc%2Fdgraph%2Fsecurity%2Fadvisories%2FGHSA-92wq-q9pq-gw47)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Frepos%2Fadvisories%2Fshow&source=header-repo&source_repo=hypermodeinc%2Fdgraph)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[hypermodeinc](/hypermodeinc)
/
**[dgraph](/hypermodeinc/dgraph)**
Public

* [Notifications](/login?return_to=%2Fhypermodeinc%2Fdgraph) You must be signed in to change notification settings
* [Fork
  1.5k](/login?return_to=%2Fhypermodeinc%2Fdgraph)
* [Star
   20.6k](/login?return_to=%2Fhypermodeinc%2Fdgraph)

* [Code](/hypermodeinc/dgraph)
* [Issues
  16](/hypermodeinc/dgraph/issues)
* [Pull requests
  8](/hypermodeinc/dgraph/pulls)
* [Actions](/hypermodeinc/dgraph/actions)
* [Security](/hypermodeinc/dgraph/security)
* [Insights](/hypermodeinc/dgraph/pulse)

Additional navigation options

* [Code](/hypermodeinc/dgraph)
* [Issues](/hypermodeinc/dgraph/issues)
* [Pull requests](/hypermodeinc/dgraph/pulls)
* [Actions](/hypermodeinc/dgraph/actions)
* [Security](/hypermodeinc/dgraph/security)
* [Insights](/hypermodeinc/dgraph/pulse)

# Dgraph Audit Log Encryption Vulnerability

Low

[skrdgraph](/skrdgraph)
published
GHSA-92wq-q9pq-gw47
May 17, 2023

## Package

gomod

Dgraph
([Go](/advisories?query=ecosystem%3Ago))

## Affected versions

< v23.0.0

## Patched versions

v23.0.0

## Description

### Impact

Existing Dgraph audit logs are vulnerable to brute force attacks due to nonce collisions. All audit logs generated by versions of Dgraph <v23.0.0 are affected.

### Patches

This issue was patched in [#8323](https://github.com/hypermodeinc/dgraph/pull/8323). Dgraph users should upgrade to v23.0.0.

### Workarounds

Store existing audit logs in a secure location. For extra security, encrypt using a tool like `gpg`.

### References

See [#8323](https://github.com/hypermodeinc/dgraph/pull/8323) for more context on the vulnerability.

### Severity

Low

### CVE ID

CVE-2023-31135

### Weaknesses

No CWEs

### Credits

* [![@HakuPiku](https://avatars.githubusercontent.com/u/34951444?s=40&v=4)](/HakuPiku)
  [HakuPiku](/HakuPiku)
  Reporter
* [![@joshua-goldstein](https://avatars.githubusercontent.com/u/92491720?s=40&v=4)](/joshua-goldstein)
  [joshua-goldstein](/joshua-goldstein)
  Remediation developer
* [![@skrdgraph](https://avatars.githubusercontent.com/u/108091997?s=40&v=4)](/skrdgraph)
  [skrdgraph](/skrdgraph)
  Remediation reviewer

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from en.wikipedia.org_bad31bb2_20250114_200442.html ===
[Jump to content](#bodyContent)

Main menu

Main menu
move to sidebar
hide

Navigation

* [Main page](/wiki/Main_Page "Visit the main page [z]")
* [Contents](/wiki/Wikipedia%3AContents "Guides to browsing Wikipedia")
* [Current events](/wiki/Portal%3ACurrent_events "Articles related to current events")
* [Random article](/wiki/Special%3ARandom "Visit a randomly selected article [x]")
* [About Wikipedia](/wiki/Wikipedia%3AAbout "Learn about Wikipedia and how it works")
* [Contact us](//en.wikipedia.org/wiki/Wikipedia%3AContact_us "How to contact Wikipedia")

Contribute

* [Help](/wiki/Help%3AContents "Guidance on how to use and edit Wikipedia")
* [Learn to edit](/wiki/Help%3AIntroduction "Learn how to edit Wikipedia")
* [Community portal](/wiki/Wikipedia%3ACommunity_portal "The hub for editors")
* [Recent changes](/wiki/Special%3ARecentChanges "A list of recent changes to Wikipedia [r]")
* [Upload file](/wiki/Wikipedia%3AFile_upload_wizard "Add images or other media for use on Wikipedia")

[![](/static/images/icons/wikipedia.png)
![Wikipedia](/static/images/mobile/copyright/wikipedia-wordmark-en.svg)
![The Free Encyclopedia](/static/images/mobile/copyright/wikipedia-tagline-en.svg)](/wiki/Main_Page)

[Search](/wiki/Special%3ASearch "Search Wikipedia [f]")

Search

Appearance

* [Donate](https://donate.wikimedia.org/?wmf_source=donate&wmf_medium=sidebar&wmf_campaign=en.wikipedia.org&uselang=en)
* [Create account](/w/index.php?title=Special:CreateAccount&returnto=Cryptographic+nonce "You are encouraged to create an account and log in; however, it is not mandatory")
* [Log in](/w/index.php?title=Special:UserLogin&returnto=Cryptographic+nonce "You're encouraged to log in; however, it's not mandatory. [o]")

Personal tools

* [Donate](https://donate.wikimedia.org/?wmf_source=donate&wmf_medium=sidebar&wmf_campaign=en.wikipedia.org&uselang=en)
* [Create account](/w/index.php?title=Special:CreateAccount&returnto=Cryptographic+nonce "You are encouraged to create an account and log in; however, it is not mandatory")
* [Log in](/w/index.php?title=Special:UserLogin&returnto=Cryptographic+nonce "You're encouraged to log in; however, it's not mandatory. [o]")

Pages for logged out editors [learn more](/wiki/Help%3AIntroduction)

* [Contributions](/wiki/Special%3AMyContributions "A list of edits made from this IP address [y]")
* [Talk](/wiki/Special%3AMyTalk "Discussion about edits from this IP address [n]")

## Contents

move to sidebar
hide

* (Top)
* [1
  Definition](#Definition)
* [2
  Usage](#Usage)

  Toggle Usage subsection
  + [2.1
    Authentication](#Authentication)
  + [2.2
    Initialization vectors](#Initialization_vectors)
  + [2.3
    Hashing](#Hashing)
* [3
  See also](#See_also)
* [4
  References](#References)
* [5
  External links](#External_links)

Toggle the table of contents

# Cryptographic nonce

16 languages

* [العربية](https://ar.wikipedia.org/wiki/%D8%A7%D9%84%D8%B1%D9%82%D9%85_%D8%A7%D9%84%D8%AE%D8%A7%D8%B5 "الرقم الخاص – Arabic")
* [閩南語 / Bân-lâm-gú](https://zh-min-nan.wikipedia.org/wiki/Nonce "Nonce – Minnan")
* [Català](https://ca.wikipedia.org/wiki/Nonce_%28criptografia%29 "Nonce (criptografia) – Catalan")
* [Čeština](https://cs.wikipedia.org/wiki/Kryptografick%C3%A1_nonce "Kryptografická nonce – Czech")
* [Deutsch](https://de.wikipedia.org/wiki/Nonce "Nonce – German")
* [Español](https://es.wikipedia.org/wiki/Nonce "Nonce – Spanish")
* [فارسی](https://fa.wikipedia.org/wiki/%D8%B1%D9%85%D8%B2%D9%86%DA%AF%D8%A7%D8%B1%DB%8C_%D9%86%D8%A7%D9%86%D8%B3 "رمزنگاری نانس – Persian")
* [Français](https://fr.wikipedia.org/wiki/Nonce_%28cryptographie%29 "Nonce (cryptographie) – French")
* [Italiano](https://it.wikipedia.org/wiki/Nonce "Nonce – Italian")
* [Latviešu](https://lv.wikipedia.org/wiki/Vienreiz%C4%93jais_kods "Vienreizējais kods – Latvian")
* [日本語](https://ja.wikipedia.org/wiki/%E3%83%8E%E3%83%B3%E3%82%B9 "ノンス – Japanese")
* [Português](https://pt.wikipedia.org/wiki/Nonce "Nonce – Portuguese")
* [Русский](https://ru.wikipedia.org/wiki/Nonce "Nonce – Russian")
* [Українська](https://uk.wikipedia.org/wiki/%D0%9A%D1%80%D0%B8%D0%BF%D1%82%D0%BE%D0%B3%D1%80%D0%B0%D1%84%D1%96%D1%87%D0%BD%D0%B8%D0%B9_%D0%BD%D0%BE%D0%BD%D1%81 "Криптографічний нонс – Ukrainian")
* [粵語](https://zh-yue.wikipedia.org/wiki/Nonce "Nonce – Cantonese")
* [中文](https://zh.wikipedia.org/wiki/Nonce "Nonce – Chinese")

[Edit links](https://www.wikidata.org/wiki/Special%3AEntityPage/Q1749235#sitelinks-wikipedia "Edit interlanguage links")

* [Article](/wiki/Cryptographic_nonce "View the content page [c]")
* [Talk](/wiki/Talk%3ACryptographic_nonce "Discuss improvements to the content page [t]")

English

* [Read](/wiki/Cryptographic_nonce)
* [Edit](/w/index.php?title=Cryptographic_nonce&action=edit "Edit this page [e]")
* [View history](/w/index.php?title=Cryptographic_nonce&action=history "Past revisions of this page [h]")

Tools

Tools
move to sidebar
hide

Actions

* [Read](/wiki/Cryptographic_nonce)
* [Edit](/w/index.php?title=Cryptographic_nonce&action=edit "Edit this page [e]")
* [View history](/w/index.php?title=Cryptographic_nonce&action=history)

General

* [What links here](/wiki/Special%3AWhatLinksHere/Cryptographic_nonce "List of all English Wikipedia pages containing links to this page [j]")
* [Related changes](/wiki/Special%3ARecentChangesLinked/Cryptographic_nonce "Recent changes in pages linked from this page [k]")
* [Upload file](/wiki/Wikipedia%3AFile_Upload_Wizard "Upload files [u]")
* [Special pages](/wiki/Special%3ASpecialPages "A list of all special pages [q]")
* [Permanent link](/w/index.php?title=Cryptographic_nonce&oldid=1263754811 "Permanent link to this revision of this page")
* [Page information](/w/index.php?title=Cryptographic_nonce&action=info "More information about this page")
* [Cite this page](/w/index.php?title=Special:CiteThisPage&page=Cryptographic_nonce&id=1263754811&wpFormIdentifier=titleform "Information on how to cite this page")
* [Get shortened URL](/w/index.php?title=Special:UrlShortener&url=https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FCryptographic_nonce)
* [Download QR code](/w/index.php?title=Special:QrCode&url=https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FCryptographic_nonce)

Print/export

* [Download as PDF](/w/index.php?title=Special:DownloadAsPdf&page=Cryptographic_nonce&action=show-download-screen "Download this page as a PDF file")
* [Printable version](/w/index.php?title=Cryptographic_nonce&printable=yes "Printable version of this page [p]")

In other projects

* [Wikidata item](https://www.wikidata.org/wiki/Special%3AEntityPage/Q1749235 "Structured data on this page hosted by Wikidata [g]")

Appearance
move to sidebar
hide

From Wikipedia, the free encyclopedia

Concept in cryptography

|  | This article **needs additional citations for [verification](/wiki/Wikipedia%3AVerifiability "Wikipedia:Verifiability")**. Relevant discussion may be found on the [talk page](/wiki/Talk%3ACryptographic_nonce#Citations_Lacking "Talk:Cryptographic nonce"). Please help [improve this article](/wiki/Special%3AEditPage/Cryptographic_nonce "Special:EditPage/Cryptographic nonce") by [adding citations to reliable sources](/wiki/Help%3AReferencing_for_beginners "Help:Referencing for beginners"). Unsourced material may be challenged and removed.*Find sources:* ["Cryptographic nonce"](https://www.google.com/search?as_eq=wikipedia&q=%22Cryptographic+nonce%22) – [news](https://www.google.com/search?tbm=nws&q=%22Cryptographic+nonce%22+-wikipedia&tbs=ar:1) **·** [newspapers](https://www.google.com/search?&q=%22Cryptographic+nonce%22&tbs=bkt:s&tbm=bks) **·** [books](https://www.google.com/search?tbs=bks:1&q=%22Cryptographic+nonce%22+-wikipedia) **·** [scholar](https://scholar.google.com/scholar?q=%22Cryptographic+nonce%22) **·** [JSTOR](https://www.jstor.org/action/doBasicSearch?Query=%22Cryptographic+nonce%22&acc=on&wc=on) *(November 2013)* *([Learn how and when to remove this message](/wiki/Help%3AMaintenance_template_removal "Help:Maintenance template removal"))* |
| --- | --- |

[![](//upload.wikimedia.org/wikipedia/commons/thumb/4/4f/Nonce-cnonce-uml.svg/220px-Nonce-cnonce-uml.svg.png)](/wiki/File%3ANonce-cnonce-uml.svg)

Typical client–server communication during a nonce-based [authentication](/wiki/Authentication "Authentication") process including both a server nonce and a client nonce

In [cryptography](/wiki/Cryptography "Cryptography"), a **nonce** is an arbitrary number that can be used just once in a cryptographic communication.[[1]](#cite_note-1) It is often a [random](/wiki/Randomness "Randomness") or [pseudo-random](/wiki/Pseudorandomness "Pseudorandomness") number issued in an [authentication protocol](/wiki/Authentication_protocol "Authentication protocol") to ensure that each communication session is unique, and therefore that old communications cannot be reused in [replay attacks](/wiki/Replay_attack "Replay attack"). Nonces can also be useful as [initialization vectors](/wiki/Initialization_vector "Initialization vector") and in [cryptographic hash functions](/wiki/Cryptographic_hash_functions "Cryptographic hash functions").

## Definition

[[edit](/w/index.php?title=Cryptographic_nonce&action=edit&section=1 "Edit section: Definition")]

A nonce is an arbitrary number used only once in a cryptographic communication, in the spirit of a [nonce word](/wiki/Nonce_word "Nonce word"). They are often [random](/wiki/Randomness "Randomness") or [pseudo-random](/wiki/Pseudo-random "Pseudo-random") numbers. Many nonces also include a [timestamp](/wiki/Timestamp "Timestamp") to ensure exact timeliness, though this requires [clock synchronisation](/wiki/Clock_synchronisation "Clock synchronisation") between organisations. The addition of a client nonce ("**cnonce**") helps to improve the security in some ways as implemented in [digest access authentication](/wiki/Digest_access_authentication "Digest access authentication"). To ensure that a nonce is used only once, it should be time-variant (including a suitably fine-grained timestamp in its value), or generated with enough random bits to ensure an insignificantly low chance of repeating a previously generated value. Some authors define pseudo-randomness (or unpredictability) as a requirement for a nonce.[[2]](#cite_note-2)

Nonce is a word dating back to Middle English for something only used once or temporarily (often with the construction "for the nonce"). It descends from the construction "then anes" ("the one [purpose]").[[3]](#cite_note-ODE-3) The term might also be derived from "number used only once".[[4]](#cite_note-4) In Britain the term may be avoided as "nonce" in modern [British English](/wiki/British_English "British English") means a paedophile.[[3]](#cite_note-ODE-3)[[5]](#cite_note-5)

## Usage

[[edit](/w/index.php?title=Cryptographic_nonce&action=edit&section=2 "Edit section: Usage")]
### Authentication

[[edit](/w/index.php?title=Cryptographic_nonce&action=edit&section=3 "Edit section: Authentication")]

[Authentication protocols](/wiki/Authentication_protocol "Authentication protocol") may use nonces to ensure that old communications cannot be reused in [replay attacks](/wiki/Replay_attack "Replay attack"). For instance, nonces are used in [HTTP](/wiki/HTTP "HTTP") [digest access authentication](/wiki/Digest_access_authentication "Digest access authentication") to calculate an [MD5](/wiki/MD5 "MD5") digest of the [password](/wiki/Password "Password"). The nonces are different each time the 401 authentication challenge [response code](/wiki/List_of_HTTP_status_codes "List of HTTP status codes") is presented, thus making [replay attacks](/wiki/Replay_attack "Replay attack") virtually impossible. The scenario of ordering products over the Internet can provide an example of the usefulness of nonces in replay attacks. An attacker could take the encrypted information and—without needing to decrypt—could continue to send a particular order to the supplier, thereby ordering products over and over again under the same name and purchase information. The nonce is used to give 'originality' to a given message so that if the company receives any other orders from the same person with the same nonce, it will discard those as invalid orders.

A nonce may be used to ensure security for a [stream cipher](/wiki/Stream_cipher "Stream cipher"). Where the same key is used for more than one message and then a different nonce is used to ensure that the [keystream](/wiki/Keystream "Keystream") is different for different messages encrypted with that key; often the message number is used.

Secret nonce values are used by the [Lamport signature](/wiki/Lamport_signature "Lamport signature") scheme as a signer-side secret which can be selectively revealed for comparison to public hashes for signature creation and verification.

### Initialization vectors

[[edit](/w/index.php?title=Cryptographic_nonce&action=edit&section=4 "Edit section: Initialization vectors")]

[Initialization vectors](/wiki/Initialization_vector "Initialization vector") may be referred to as nonces, as they are typically random or pseudo-random.

### Hashing

[[edit](/w/index.php?title=Cryptographic_nonce&action=edit&section=5 "Edit section: Hashing")]

Nonces are used in [proof-of-work systems](/wiki/Proof-of-work_system "Proof-of-work system") to vary the input to a [cryptographic hash function](/wiki/Cryptographic_hash_function "Cryptographic hash function") so as to obtain a hash for a certain input that fulfils certain arbitrary conditions. In doing so, it becomes far more difficult to create a "desirable" hash than to verify it, shifting the burden of work onto one side of a transaction or system. For example, proof of work, using hash functions, was considered as a means to combat [email spam](/wiki/Email_spam "Email spam") by forcing email senders to find a hash value for the email (which included a timestamp to prevent pre-computation of useful hashes for later use) that had an arbitrary number of leading zeroes, by hashing the same input with a large number of values until a "desirable" hash was obtained.

Similarly, the [Bitcoin](/wiki/Bitcoin "Bitcoin") [blockchain](/wiki/Blockchain "Blockchain") hashing algorithm can be tuned to an arbitrary difficulty by changing the required minimum/maximum value of the hash so that the number of bitcoins awarded for new blocks does not increase linearly with increased network computation power as new users join. This is likewise achieved by forcing Bitcoin miners to add nonce values to the value being hashed to change the hash algorithm output. As cryptographic hash algorithms cannot easily be predicted based on their inputs, this makes the act of blockchain hashing and the possibility of being awarded bitcoins something of a lottery, where the first "miner" to find a nonce that delivers a desirable hash is awarded bitcoins.

## See also

[[edit](/w/index.php?title=Cryptographic_nonce&action=edit&section=6 "Edit section: See also")]

* [Key stretching](/wiki/Key_stretching "Key stretching")
* [Salt (cryptography)](/wiki/Salt_%28cryptography%29 "Salt (cryptography)")
* [Nonce word](/wiki/Nonce_word "Nonce word")

## References

[[edit](/w/index.php?title=Cryptographic_nonce&action=edit&section=7 "Edit section: References")]

1. **[^](#cite_ref-1)** ["nonce - Glossary | CSRC"](https://csrc.nist.gov/glossary/term/nonce). *csrc.nist.gov*. [National Institute of Standards and Technology](/wiki/National_Institute_of_Standards_and_Technology "National Institute of Standards and Technology"). Retrieved 2021-10-24.
2. **[^](#cite_ref-2)** Rogaway, P. (2004). ["Nonce-Based Symmetric Encryption"](http://www.cs.ucdavis.edu/~rogaway/papers/nonce.pdf) (PDF). In Bimal Roy; Willi Meier (eds.). *Fast Software Encryption*. Lecture Notes in Computer Science. Vol. 3017. pp. 348–358. [doi](/wiki/Doi_%28identifier%29 "Doi (identifier)"):[10.1007/978-3-540-25937-4\_22](https://doi.org/10.1007/978-3-540-25937-4_22). [ISBN](/wiki/ISBN_%28identifier%29 "ISBN (identifier)") [978-3-540-25937-4](/wiki/Special%3ABookSources/978-3-540-25937-4 "Special:BookSources/978-3-540-25937-4").
3. ^ [***a***](#cite_ref-ODE_3-0) [***b***](#cite_ref-ODE_3-1) *Oxford Dictionary of English [version included with macOS]*. Oxford University Press. 2021. Middle English: from then anes 'the one (purpose') (from then, obsolete oblique form of the + ane 'one' + -s), altered by wrong division
4. **[^](#cite_ref-4)** Needham, Roger M.; Schroeder, Michael D. (1978-12-01). ["Using encryption for authentication in large networks of computers"](https://dl.acm.org/doi/10.1145/359657.359659). *Communications of the ACM*. **21** (12): 993–999. [doi](/wiki/Doi_%28identifier%29 "Doi (identifier)"):[10.1145/359657.359659](https://doi.org/10.1145/359657.359659). [ISSN](/wiki/ISSN_%28identifier%29 "ISSN (identifier)") [0001-0782](https://search.worldcat.org/issn/0001-0782).
5. **[^](#cite_ref-5)** ["nonce"](https://en.wiktionary.org/w/index.php?title=nonce&oldid=78766197), *Wiktionary, the free dictionary*, 2024-04-06, retrieved 2024-04-15

## External links

[[edit](/w/index.php?title=Cryptographic_nonce&action=edit&section=8 "Edit section: External links")]

* [RFC](/wiki/RFC_%28identifier%29 "RFC (identifier)") [2617](https://datatracker.ietf.org/doc/html/rfc2617) – HTTP Authentication: Basic and Digest Access Authentication
* [RFC](/wiki/RFC_%28identifier%29 "RFC (identifier)") [3540](https://datatracker.ietf.org/doc/html/rfc3540) – Robust Explicit Congestion Notification (ECN) Signaling with Nonces
* [RFC](/wiki/RFC_%28identifier%29 "RFC (identifier)") [4418](https://datatracker.ietf.org/doc/html/rfc4418) – UMAC: Message Authentication Code using Universal Hashing
* [Web Services Security](http://docs.oasis-open.org/wss/2004/01/)

![](https://login.wikimedia.org/wiki/Special:CentralAutoLogin/start?useformat=desktop&type=1x1&usesul3=0)
Retrieved from "<https://en.wikipedia.org/w/index.php?title=Cryptographic_nonce&oldid=1263754811>"
[Category](/wiki/Help%3ACategory "Help:Category"):

* [Cryptography](/wiki/Category%3ACryptography "Category:Cryptography")
Hidden categories:

* [Articles with short description](/wiki/Category%3AArticles_with_short_description "Category:Articles with short description")
* [Short description is different from Wikidata](/wiki/Category%3AShort_description_is_different_from_Wikidata "Category:Short description is different from Wikidata")
* [Articles needing additional references from November 2013](/wiki/Category%3AArticles_needing_additional_references_from_November_2013 "Category:Articles needing additional references from November 2013")
* [All articles needing additional references](/wiki/Category%3AAll_articles_needing_additional_references "Category:All articles needing additional references")

* This page was last edited on 18 December 2024, at 12:47 (UTC).
* Text is available under the [Creative Commons Attribution-ShareAlike 4.0 License](/wiki/Wikipedia%3AText_of_the_Creative_Commons_Attribution-ShareAlike_4.0_International_License "Wikipedia:Text of the Creative Commons Attribution-ShareAlike 4.0 International License");
  additional terms may apply. By using this site, you agree to the [Terms of Use](https://foundation.wikimedia.org/wiki/Special%3AMyLanguage/Policy%3ATerms_of_Use "foundation:Special:MyLanguage/Policy:Terms of Use") and [Privacy Policy](https://foundation.wikimedia.org/wiki/Special%3AMyLanguage/Policy%3APrivacy_policy "foundation:Special:MyLanguage/Policy:Privacy policy"). Wikipedia® is a registered trademark of the [Wikimedia Foundation, Inc.](https://wikimediafoundation.org/), a non-profit organization.

* [Privacy policy](https://foundation.wikimedia.org/wiki/Special%3AMyLanguage/Policy%3APrivacy_policy)
* [About Wikipedia](/wiki/Wikipedia%3AAbout)
* [Disclaimers](/wiki/Wikipedia%3AGeneral_disclaimer)
* [Contact Wikipedia](//en.wikipedia.org/wiki/Wikipedia%3AContact_us)
* [Code of Conduct](https://foundation.wikimedia.org/wiki/Special%3AMyLanguage/Policy%3AUniversal_Code_of_Conduct)
* [Developers](https://developer.wikimedia.org)
* [Statistics](https://stats.wikimedia.org/#/en.wikipedia.org)
* [Cookie statement](https://foundation.wikimedia.org/wiki/Special%3AMyLanguage/Policy%3ACookie_statement)
* [Mobile view](//en.m.wikipedia.org/w/index.php?title=Cryptographic_nonce&mobileaction=toggle_view_mobile)

* [![Wikimedia Foundation](/static/images/footer/wikimedia-button.svg)](https://wikimediafoundation.org/)
* [![Powered by MediaWiki](/w/resources/assets/poweredby_mediawiki.svg)](https://www.mediawiki.org/)



=== Content from github.com_f640ec47_20250114_200446.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fhypermodeinc%2Fdgraph%2Fpull%2F8323)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fhypermodeinc%2Fdgraph%2Fpull%2F8323)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fpull_requests_fragments%2Fpull_request_layout&source=header-repo&source_repo=hypermodeinc%2Fdgraph)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[hypermodeinc](/hypermodeinc)
/
**[dgraph](/hypermodeinc/dgraph)**
Public

* [Notifications](/login?return_to=%2Fhypermodeinc%2Fdgraph) You must be signed in to change notification settings
* [Fork
  1.5k](/login?return_to=%2Fhypermodeinc%2Fdgraph)
* [Star
   20.6k](/login?return_to=%2Fhypermodeinc%2Fdgraph)

* [Code](/hypermodeinc/dgraph)
* [Issues
  16](/hypermodeinc/dgraph/issues)
* [Pull requests
  8](/hypermodeinc/dgraph/pulls)
* [Actions](/hypermodeinc/dgraph/actions)
* [Security](/hypermodeinc/dgraph/security)
* [Insights](/hypermodeinc/dgraph/pulse)

Additional navigation options

* [Code](/hypermodeinc/dgraph)
* [Issues](/hypermodeinc/dgraph/issues)
* [Pull requests](/hypermodeinc/dgraph/pulls)
* [Actions](/hypermodeinc/dgraph/actions)
* [Security](/hypermodeinc/dgraph/security)
* [Insights](/hypermodeinc/dgraph/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fhypermodeinc%2Fdgraph%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fhypermodeinc%2Fdgraph%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# security(logging): fix aes implementation in audit logging #8323

 Merged

[joshua-goldstein](/joshua-goldstein)
merged 66 commits into
[main](/hypermodeinc/dgraph/tree/main "hypermodeinc/dgraph:main")
from
[joshua/fix-logger](/hypermodeinc/dgraph/tree/joshua/fix-logger "hypermodeinc/dgraph:joshua/fix-logger")

Mar 30, 2023

 Merged

# [security(logging): fix aes implementation in audit logging](#top) #8323

[joshua-goldstein](/joshua-goldstein)
merged 66 commits into
[main](/hypermodeinc/dgraph/tree/main "hypermodeinc/dgraph:main")
from
[joshua/fix-logger](/hypermodeinc/dgraph/tree/joshua/fix-logger "hypermodeinc/dgraph:joshua/fix-logger")

Mar 30, 2023

[Conversation
97](/hypermodeinc/dgraph/pull/8323)
[Commits
66](/hypermodeinc/dgraph/pull/8323/commits)
[Checks
0](/hypermodeinc/dgraph/pull/8323/checks)
[Files changed](/hypermodeinc/dgraph/pull/8323/files)

## Conversation

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

[![joshua-goldstein](https://avatars.githubusercontent.com/u/92491720?s=60&v=4)](/joshua-goldstein)

Copy link

Contributor

### @joshua-goldstein **[joshua-goldstein](/joshua-goldstein)** commented [Sep 20, 2022](#issue-1380117673) • edited Loading

## Background

Audit logging is an enterprise feature with an option for encryption using AES. An AES cipher has three ingredients: a private key, an iv (or nonce), and plaintext. The nonce is public but it must be unique.

## Problem

Currently we use a [16]byte nonce. The first 12 bytes come from a baseIv which is initialized when an audit log is created. The last 4 bytes come from the length of the log line being encrypted. This is problematic because two log lines will often have the same length, so due to these collisions we are reusing the same nonce many times. AES requires a unique nonce and without a unique nonce it is trivial to break. Many thanks to [@HakuPiku](https://github.com/HakuPiku) for pointing this out to us.

## Solution

Use crypto/rand to generate a unique nonce every time we encrypt a log line. Previously we used what was essentially a 16 byte header (12 byte baseIv and 4 byte length of line). We now use a [20] byte header, consisting of a unique nonce (16 bytes) and length of line (4 bytes).

## Remarks

* For audit logging, *x/log\_writer.go* controls all the audit logging (i.e., writing) while *ee/audit/run\_ee.go* does all the decrypting. There are other encryption/decryption tools (in testutil, e.g.) that are used for other purposes (e.g., exports).
* Customers may have old audit logs that will have to be decrypted using the deprecated method. Now the decrypt method will determine whether the audit log is old or new and use the appropriate scheme.
* This PR also adds several integration tests to check if we can appropriately encrypt and decrypt audit logs (previously we had no integration tests for this, only a small unit test)
* We also add tests to check if an audit log in the old format can be decrypted correctly. This is the reason there is an `.enc` file checked into the PR.
* Finally we add an extra unit test to verify that encrypted audit logs can be truncated and still decrypted successfully (up to the line that was truncated)

## References

* <https://en.wikipedia.org/wiki/Block_cipher_mode_of_operation>
* <https://pkg.go.dev/crypto/cipher#example-NewCTR>

Sorry, something went wrong.

All reactions

[![@joshua-goldstein](https://avatars.githubusercontent.com/u/92491720?s=40&u=8296c3268dfa1e0085fc8e7842a039d31ee646e7&v=4)](/joshua-goldstein)
[joshua-goldstein](/joshua-goldstein)
self-assigned this
[Sep 20, 2022](#event-7426352659)

[![@joshua-goldstein](https://avatars.githubusercontent.com/u/92491720?s=40&u=8296c3268dfa1e0085fc8e7842a039d31ee646e7&v=4)](/joshua-goldstein)
[joshua-goldstein](/joshua-goldstein)
added
the
[area/security](/hypermodeinc/dgraph/labels/area/security)
Security related issues
label
[Sep 20, 2022](#event-7426353073)

[![@coveralls](https://avatars.githubusercontent.com/u/2354108?s=80&v=4)](/coveralls)

Copy link

### **[coveralls](/coveralls)** commented [Sep 21, 2022](#issuecomment-1253129608)

| [Coverage Status](https://coveralls.io/builds/52635049)  Coverage decreased (-0.05%) to 37.046% when pulling **[8c42c19](https://github.com/hypermodeinc/dgraph/commit/8c42c192679ed9a7cea29eff49c3b86139c6ffb6) on joshua/fix-logger** into **[b69b8e5](https://github.com/hypermodeinc/dgraph/commit/b69b8e51882fcfead02be63b0304e64ea75aa6ac) on main**. |
| --- |

All reactions

Sorry, something went wrong.

[![HakuPiku](https://avatars.githubusercontent.com/u/34951444?s=60&v=4)](/HakuPiku)

**[HakuPiku](/HakuPiku)**
reviewed
[Sep 21, 2022](#pullrequestreview-1115482889)

 [View reviewed changes](/hypermodeinc/dgraph/pull/8323/files)

Copy link

### @HakuPiku **[HakuPiku](/HakuPiku)** left a comment

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

I can see that a unique nonce is generated for every log line and the fix seems correct.

Sorry, something went wrong.

All reactions

 [![@joshua-goldstein](https://avatars.githubusercontent.com/u/92491720?s=40&u=8296c3268dfa1e0085fc8e7842a039d31ee646e7&v=4)](/joshua-goldstein)
[joshua-goldstein](/joshua-goldstein)
[force-pushed](/hypermodeinc/dgraph/compare/e1d674f62d291fae6e8d210fbf9ad03daae7e9d6..a80c6437644caa39973a2ddccbab841eb18cc9ba)
the
main

branch
from
[`e1d674f`](/hypermodeinc/dgraph/commit/e1d674f62d291fae6e8d210fbf9ad03daae7e9d6) to
[`a80c643`](/hypermodeinc/dgraph/commit/a80c6437644caa39973a2ddccbab841eb18cc9ba)  [Compare](/hypermodeinc/dgraph/compare/e1d674f62d291fae6e8d210fbf9ad03daae7e9d6..a80c6437644caa39973a2ddccbab841eb18cc9ba)
[October 14, 2022 18:54](#event-7592708868)

[![@HakuPiku](https://avatars.githubusercontent.com/u/34951444?s=80&u=843bea46ef1b9879b3cababb0adc1eba7637fcd5&v=4)](/HakuPiku)

Copy link

### **[HakuPiku](/HakuPiku)** commented [Nov 19, 2022](#issuecomment-1320817335)

| Any updates on when this will be merged and a security advisory created? |
| --- |

All reactions

Sorry, something went wrong.

 [joshua-goldstein](/joshua-goldstein)
added 13 commits
[February 17, 2023 09:08](#commits-pushed-3f5fb30)

[![@joshua-goldstein](https://avatars.githubusercontent.com/u/92491720?s=40&v=4)](/joshua-goldstein)

`[push changes to branch](/hypermodeinc/dgraph/pull/8323/commits/3f5fb301ccb19e98113c1aad73cf8c354ccefb02 "push changes to branch")`

`[3f5fb30](/hypermodeinc/dgraph/pull/8323/commits/3f5fb301ccb19e98113c1aad73cf8c354ccefb02)`

[![@joshua-goldstein](https://avatars.githubusercontent.com/u/92491720?s=40&v=4)](/joshua-goldstein)

`[update log_writer to fix aes issue](/hypermodeinc/dgraph/pull/8323/commits/d2d06ca14507ef6bc203a820c259d0eb06d4f6d0 "update log_writer to fix aes issue")`

`[d2d06ca](/hypermodeinc/dgraph/pull/8323/commits/d2d06ca14507ef6bc203a820c259d0eb06d4f6d0)`

[![@joshua-goldstein](https://avatars.githubusercontent.com/u/92491720?s=40&v=4)](/joshua-goldstein)

`[update docker-compose.yml in contrib/local-test to use encrypted audi…](/hypermodeinc/dgraph/pull/8323/commits/cc0f613f6e47d93a0f3a58b2b26e62448fd7af90 "update docker-compose.yml in contrib/local-test to use encrypted audit logs")`
 …

`[cc0f613](/hypermodeinc/dgraph/pull/8323/commits/cc0f613f6e47d93a0f3a58b2b26e62448fd7af90)`

```
…t logs
```

[![@joshua-goldstein](https://avatars.githubusercontent.com/u/92491720?s=40&v=4)](/joshua-goldstein)

`[update run_ee.go to decrypt updated audit logs](/hypermodeinc/dgraph/pull/8323/commits/14308ee966956b58eb0e3e2fdb6981c7f2238687 "update run_ee.go to decrypt updated audit logs")`

`[14308ee](/hypermodeinc/dgraph/pull/8323/commits/14308ee966956b58eb0e3e2fdb6981c7f2238687)`

[![@joshua-goldstein](https://avatars.githubusercontent.com/u/92491720?s=40&v=4)](/joshua-goldstein)

`[revert x/logger.go](/hypermodeinc/dgraph/pull/8323/commits/77a3ca3642ef445d367e7b0f36f8d502f1317746 "revert x/logger.go")`

`[77a3ca3](/hypermodeinc/dgraph/pull/8323/commits/77a3ca3642ef445d367e7b0f36f8d502f1317746)`

[![@joshua-goldstein](https://avatars.githubusercontent.com/u/92491720?s=40&v=4)](/joshua-goldstein)

`[dgraph/dgraph:local was not getting tagged](/hypermodeinc/dgraph/pull/8323/commits/b80723fca5c20bed3ce0ee6b36afe9e5105052da "dgraph/dgraph:local was not getting tagged")`

`[b80723f](/hypermodeinc/dgraph/pull/8323/commits/b80723fca5c20bed3ce0ee6b36afe9e5105052da)`

[![@joshua-goldstein](https://avatars.githubusercontent.com/u/92491720?s=40&v=4)](/joshua-goldstein)

`[revert test message in audit_ee.go](/hypermodeinc/dgraph/pull/8323/commits/f2721b00720ac75fd57f0a61c17ffafca1f8101e "revert test message in audit_ee.go")`

`[f2721b0](/hypermodeinc/dgraph/pull/8323/commits/f2721b00720ac75fd57f0a61c17ffafca1f8101e)`

[![@joshua-goldstein](https://avatars.githubusercontent.com/u/92491720?s=40&v=4)](/joshua-goldstein)

`[changes to log_writer.go](/hypermodeinc/dgraph/pull/8323/commits/709ed5b28eb18c5ce6caaa375650abd804324de2 "changes to log_writer.go")`

`[709ed5b](/hypermodeinc/dgraph/pull/8323/commits/709ed5b28eb18c5ce6caaa375650abd804324de2)`

[![@joshua-goldstein](https://avatars.githubusercontent.com/u/92491720?s=40&v=4)](/joshua-goldstein)

`[modify run_ee.go](/hypermodeinc/dgraph/pull/8323/commits/3fdd06bb93d19a3598d96d0b8fd56749959d3fda "modify run_ee.go")`

`[3fdd06b](/hypermodeinc/dgraph/pull/8323/commits/3fdd06bb93d19a3598d96d0b8fd56749959d3fda)`

[![@joshua-goldstein](https://avatars.githubusercontent.com/u/92491720?s=40&v=4)](/joshua-goldstein)

`[update log writer test](/hypermodeinc/dgraph/pull/8323/commits/f075085794c22c80f4f6d922619627fdc707c5f8 "update log writer test")`

`[f075085](/hypermodeinc/dgraph/pull/8323/commits/f075085794c22c80f4f6d922619627fdc707c5f8)`

[![@joshua-goldstein](https://avatars.githubusercontent.com/u/92491720?s=40&v=4)](/joshua-goldstein)

`[update log writer test](/hypermodeinc/dgraph/pull/8323/commits/18ec9c3248bb43c543213eaaeaf542b3c8131cbd "update log writer test")`

`[18ec9c3](/hypermodeinc/dgraph/pull/8323/commits/18ec9c3248bb43c543213eaaeaf542b3c8131cbd)`

[![@joshua-goldstein](https://avatars.githubusercontent.com/u/92491720?s=40&v=4)](/joshua-goldstein)

`[revert changes to Makefile](/hypermodeinc/dgraph/pull/8323/commits/d5a8081bf28e985501f3145a66f6b8efbae2766e "revert changes to Makefile")`

`[d5a8081](/hypermodeinc/dgraph/pull/8323/commits/d5a8081bf28e985501f3145a66f6b8efbae2766e)`

[![@joshua-goldstein](https://avatars.githubusercontent.com/u/92491720?s=40&v=4)](/joshua-goldstein)

`[update comment](/hypermodeinc/dgraph/pull/8323/commits/d05989b4267bbc4b4c1150e17c2c59fc3595aaaa "update comment")`

`[d05989b](/hypermodeinc/dgraph/pull/8323/commits/d05989b4267bbc4b4c1150e17c2c59fc3595aaaa)`

 [![@joshua-goldstein](https://avatars.githubusercontent.com/u/92491720?s=40&u=8296c3268dfa1e0085fc8e7842a039d31ee646e7&v=4)](/joshua-goldstein)
[joshua-goldstein](/joshua-goldstein)
[force-pushed](/hypermodeinc/dgraph/compare/8c42c192679ed9a7cea29eff49c3b86139c6ffb6..d05989b4267bbc4b4c1150e17c2c59fc3595aaaa)
the
joshua/fix-logger

branch
from
[`8c42c19`](/hypermodeinc/dgraph/commit/8c42c192679ed9a7cea29eff49c3b86139c6ffb6) to
[`d05989b`](/hypermodeinc/dgraph/commit/d05989b4267bbc4b4c1150e17c2c59fc3595aaaa)  [Compare](/hypermodeinc/dgraph/compare/8c42c192679ed9a7cea29eff49c3b86139c6ffb6..d05989b4267bbc4b4c1150e17c2c59fc3595aaaa)
[February 17, 2023 15:16](#event-8548210243)

 [joshua-goldstein](/joshua-goldstein)
added 10 commits
[February 22, 2023 23:07](#commits-pushed-d6d81e1)

[![@joshua-goldstein](https://avatars.githubusercontent.com/u/92491720?s=40&v=4)](/joshua-goldstein)

`[rebase changes from main](/hypermodeinc/dgraph/pull/8323/commits/d6d81e1715ed2955dd53f67c57854b79b9113639 "rebase changes from main")`

`[d6d81e1](/hypermodeinc/dgraph/pull/8323/commits/d6d81e1715ed2955dd53f67c57854b79b9113639)`

[![@joshua-goldstein](https://avatars.githubusercontent.com/u/92491720?s=40&v=4)](/joshua-goldstein)

`[add old functions as deprecated](/hypermodeinc/dgraph/pull/8323/commits/9c25f5c896e75dcf099cec1649df9a52e48dc04a "add old functions as deprecated")`

`[9c25f5c](/hypermodeinc/dgraph/pull/8323/commits/9c25f5c896e75dcf099cec1649df9a52e48dc04a)`

[![@joshua-goldstein](https://avatars.githubusercontent.com/u/92491720?s=40&v=4)](/joshua-goldstein)

`[refactor](/hypermodeinc/dgraph/pull/8323/commits/9e596ae4a2e3c900715b671782ffebd786af80be "refactor")`

`[9e596ae](/hypermodeinc/dgraph/pull/8323/commits/9e596ae4a2e3c900715b671782ffebd786af80be)`

[![@joshua-goldstein](https://avatars.githubusercontent.com/u/92491720?s=40&v=4)](/joshua-goldstein)

`[minor comments](/hypermodeinc/dgraph/pull/8323/commits/97cc6d6a69bd53e89d471731745d1d269cae0c82 "minor comments")`

`[97cc6d6](/hypermodeinc/dgraph/pull/8323/commits/97cc6d6a69bd53e89d471731745d1d269cae0c82)`

[![@joshua-goldstein](https://avatars.githubusercontent.com/u/92491720?s=40&v=4)](/joshua-goldstein)

`[remove todo](/hypermodeinc/dgraph/pull/8323/commits/c9c53c129a01e78ebb36e87e86e468f53be351cc "remove todo")`

`[c9c53c1](/hypermodeinc/dgraph/pull/8323/commits/c9c53c129a01e78ebb36e87e86e468f53be351cc)`

[![@joshua-goldstein](https://avatars.githubusercontent.com/u/92491720?s=40&v=4)](/joshua-goldstein)

`[refactoring](/hypermodeinc/dgraph/pull/8323/commits/354db495d1a1f0b5321ea10da9bced7798426aef "refactoring")`

`[354db49](/hypermodeinc/dgraph/pull/8323/commits/354db495d1a1f0b5321ea10da9bced7798426aef)`

[![@joshua-goldstein](https://avatars.githubusercontent.com/u/92491720?s=40&v=4)](/joshua-goldstein)

`[add todo](/hypermodeinc/dgraph/pull/8323/commits/ea7d8d77a4542476419d23df993b911262190658 "add todo")`

`[ea7d8d7](/hypermodeinc/dgraph/pull/8323/commits/ea7d8d77a4542476419d23df993b911262190658)`

[![@joshua-goldstein](https://avatars.githubusercontent.com/u/92491720?s=40&v=4)](/joshua-goldstein)

`[test file](/hypermodeinc/dgraph/pull/8323/commits/28638413a234dcfc5e26e285b59c6ee7faa5f31c "test file")`

`[2863841](/hypermodeinc/dgraph/pull/8323/commits/28638413a234dcfc5e26e285b59c6ee7faa5f31c)`

[![@joshua-goldstein](https://avatars.githubusercontent.com/u/92491720?s=40&v=4)](/joshua-goldstein)

`[audit run fix](/hypermodeinc/dgraph/pull/8323/commits/349e7dc44788aa26366ca10fb5e69df7d9acd6ae "audit run fix")`

`[349e7dc](/hypermodeinc/dgraph/pull/8323/commits/349e7dc44788aa26366ca10fb5e69df7d9acd6ae)`

[![@joshua-goldstein](https://avatars.githubusercontent.com/u/92491720?s=40&v=4)](/joshua-goldstein)

`[formatting](/hypermodeinc/dgraph/pull/8323/commits/f95d0e29a76fe8a0cc7ee211b54be09a25310250 "formatting")`

`[f95d0e2](/hypermodeinc/dgraph/pull/8323/commits/f95d0e29a76fe8a0cc7ee211b54be09a25310250)`

38 hidden items

Load more…

[![mangalaman93](https://avatars.githubusercontent.com/u/2542340?s=60&v=4)](/mangalaman93)

**[mangalaman93](/mangalaman93)**
requested changes
[Mar 16, 2023](#pullrequestreview-1343008732)

 [View reviewed changes](/hypermodeinc/dgraph/pull/8323/files/1bd2bd0831fc8652d91b454339817c106e8cf769)

Copy link

Member

### @mangalaman93 **[mangalaman93](/mangalaman93)** left a comment

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

I think we should consider writing more robust functions and test. This needs more work.

Sorry, something went wrong.

All reactions

[ee/audit/run\_ee.go](/hypermodeinc/dgraph/pull/8323/files/1bd2bd0831fc8652d91b454339817c106e8cf769#diff-736b3973fa3094e04dc1d4337241d573db835acc2e8c7bf9b9c392e79d142d8c)
Outdated

Show resolved

Hide resolved

[ee/audit/run\_ee.go](/hypermodeinc/dgraph/pull/8323/files/1bd2bd0831fc8652d91b454339817c106e8cf769#diff-736b3973fa3094e04dc1d4337241d573db835acc2e8c7bf9b9c392e79d142d8c)
Outdated

Show resolved

Hide resolved

[ee/audit/run\_ee.go](/hypermodeinc/dgraph/pull/8323/files/1bd2bd0831fc8652d91b454339817c106e8cf769#diff-736b3973fa3094e04dc1d4337241d573db835acc2e8c7bf9b9c392e79d142d8c)
Outdated

Show resolved

Hide resolved

[ee/audit/run\_ee.go](/hypermodeinc/dgraph/pull/8323/files/1bd2bd0831fc8652d91b454339817c106e8cf769#diff-736b3973fa3094e04dc1d4337241d573db835acc2e8c7bf9b9c392e79d142d8c)
Outdated

Show resolved

Hide resolved

[ee/audit/run\_ee.go](/hypermodeinc/dgraph/pull/8323/files/18c0933675617d92ec5279fce6623626a55ab9e6#diff-736b3973fa3094e04dc1d4337241d573db835acc2e8c7bf9b9c392e79d142d8c)
Outdated

|  |  | text := make([]byte, len(x.VerificationText)) |
| --- | --- | --- |
|  |  | stream := cipher.NewCTR(block, iv) |
|  |  | stream.XORKeyStream(text, t) |
|  |  | if string(text) != x.VerificationText { |

Copy link

Member

### @mangalaman93 **[mangalaman93](/mangalaman93)** [Mar 16, 2023](#discussion_r1138844714)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

I didn't realize that byte array/slice can't be declared as a constant. This article has a few ideas <https://blog.boot.dev/golang/golang-constant-maps-slices/>. I don't mind if we declare a function that returns the constant value. I think it is useful to avoid a allocation that converts byte slice to string.

Sorry, something went wrong.

All reactions

5 hidden conversations

Load more…

[ee/audit/run\_ee.go](/hypermodeinc/dgraph/pull/8323/files/1bd2bd0831fc8652d91b454339817c106e8cf769#diff-736b3973fa3094e04dc1d4337241d573db835acc2e8c7bf9b9c392e79d142d8c)

Show resolved

Hide resolved

[ee/audit/run\_ee.go](/hypermodeinc/dgraph/pull/8323/files/1bd2bd0831fc8652d91b454339817c106e8cf769#diff-736b3973fa3094e04dc1d4337241d573db835acc2e8c7bf9b9c392e79d142d8c)

Show resolved

Hide resolved

[ee/audit/run\_ee.go](/hypermodeinc/dgraph/pull/8323/files/1bd2bd0831fc8652d91b454339817c106e8cf769#diff-736b3973fa3094e04dc1d4337241d573db835acc2e8c7bf9b9c392e79d142d8c)

Show resolved

Hide resolved

[ee/audit/run\_ee.go](/hypermodeinc/dgraph/pull/8323/files/1bd2bd0831fc8652d91b454339817c106e8cf769#diff-736b3973fa3094e04dc1d4337241d573db835acc2e8c7bf9b9c392e79d142d8c)

Show resolved

Hide resolved

[ee/audit/run\_ee.go](/hypermodeinc/dgraph/pull/8323/files/1bd2bd0831fc8652d91b454339817c106e8cf769#diff-736b3973fa3094e04dc1d4337241d573db835acc2e8c7bf9b9c392e79d142d8c)

Show resolved

Hide resolved

 Joshua Goldstein
added 2 commits
[March 16, 2023 22:38](#commits-pushed-b0bbaf1)

`[use bytes read, and add breaks](/hypermodeinc/dgraph/pull/8323/commits/b0bbaf1cdcb823412c9e42ccab3f05bea2c5d780 "use bytes read, and add breaks")`

`[b0bbaf1](/hypermodeinc/dgraph/pull/8323/commits/b0bbaf1cdcb823412c9e42ccab3f05bea2c5d780)`

`[remove comments](/hypermodeinc/dgraph/pull/8323/commits/eb275cdd652e5cf84e1afa50413a458985073808 "remove comments")`

`[eb275cd](/hypermodeinc/dgraph/pull/8323/commits/eb275cdd652e5cf84e1afa50413a458985073808)`

[![@joshua-goldstein](https://avatars.githubusercontent.com/u/92491720?s=80&u=8296c3268dfa1e0085fc8e7842a039d31ee646e7&v=4)](/joshua-goldstein)

Copy link

Contributor

Author

### **[joshua-goldstein](/joshua-goldstein)** commented [Mar 17, 2023](#issuecomment-1473087344)

| I think we should consider writing more robust functions and test. This needs more work.  I have already added 4 integration tests, and we have a unit test to check basic parsing. What additional tests are necessary? |
| --- |

All reactions

Sorry, something went wrong.

[![@joshua-goldstein](https://avatars.githubusercontent.com/u/92491720?s=80&u=8296c3268dfa1e0085fc8e7842a039d31ee646e7&v=4)](/joshua-goldstein)

Copy link

Contributor

Author

### **[joshua-goldstein](/joshua-goldstein)** commented [Mar 17, 2023](#issuecomment-1473093975)

| I didn't realize that byte array/slice can't be declared as a constant. This article has a few ideas <https://blog.boot.dev/golang/golang-constant-maps-slices/>. I don't mind if we declare a function that returns the constant value. I think it is useful to avoid a allocation that converts byte slice to string.  What is the purpose of this? We are doing exactly one allocation per log file (default ~200 mb), so this is not a memory issue? |
| --- |

All reactions

Sorry, something went wrong.

 Joshua Goldstein
added 9 commits
[March 17, 2023 15:56](#commits-pushed-d227b13)

`[add decrypt function to use io.readat](/hypermodeinc/dgraph/pull/8323/commits/d227b13633bd780dc8d60841633691bc4f7173e7 "add decrypt function to use io.readat")`

`[d227b13](/hypermodeinc/dgraph/pull/8323/commits/d227b13633bd780dc8d60841633691bc4f7173e7)`

`[add unit test for decrypt](/hypermodeinc/dgraph/pull/8323/commits/2f7cffab2d8bf4aa2b56d38066b35915d064b723 "add unit test for decrypt")`

`[2f7cffa](/hypermodeinc/dgraph/pull/8323/commits/2f7cffab2d8bf4aa2b56d38066b35915d064b723)`

`[add more error message wrappers](/hypermodeinc/dgraph/pull/8323/commits/a91c3f8bc3e99e35ec1b477efa85c03e40a870dc "add more error message wrappers")`

`[a91c3f8](/hypermodeinc/dgraph/pull/8323/commits/a91c3f8bc3e99e35ec1b477efa85c03e40a870dc)`

`[prepare truncate test](/hypermodeinc/dgraph/pull/8323/commits/01cd7165b8ec14476d62fc9a90c6ad5fe59d9322 "prepare truncate test")`

`[01cd716](/hypermodeinc/dgraph/pull/8323/commits/01cd7165b8ec14476d62fc9a90c6ad5fe59d9322)`

`[add truncate test](/hypermodeinc/dgraph/pull/8323/commits/91bafdc189a6faca07ae64a036a3592dbed77cd5 "add truncate test")`

`[91bafdc](/hypermodeinc/dgraph/pull/8323/commits/91bafdc189a6faca07ae64a036a3592dbed77cd5)`

`[add testutil/audit directory](/hypermodeinc/dgraph/pull/8323/commits/75a10702a2d6998e3f1a5ae0e2d5ce3b80ddd2eb "add testutil/audit directory")`

`[75a1070](/hypermodeinc/dgraph/pull/8323/commits/75a10702a2d6998e3f1a5ae0e2d5ce3b80ddd2eb)`

`[use verifyLogs from testutil/audit](/hypermodeinc/dgraph/pull/8323/commits/a74dd584fa993980a3b77f2c7c94cf8b4d410fa1 "use verifyLogs from testutil/audit")`

`[a74dd58](/hypermodeinc/dgraph/pull/8323/commits/a74dd584fa993980a3b77f2c7c94cf8b4d410fa1)`

`[rename testutil/audit to testutil/testaudit](/hypermodeinc/dgraph/pull/8323/commits/4a7e37f9f8b2b068fcb6fe4034a98519a7941c4c "rename testutil/audit to testutil/testaudit")`

`[4a7e37f](/hypermodeinc/dgraph/pull/8323/commits/4a7e37f9f8b2b068fcb6fe4034a98519a7941c4c)`

`[satisfy errcheck linter](/hypermodeinc/dgraph/pull/8323/commits/b36a9b577d33b944b73af24144748f02df71564b "satisfy errcheck linter")`

`[b36a9b5](/hypermodeinc/dgraph/pull/8323/commits/b36a9b577d33b944b73af24144748f02df71564b)`

[![joshua-goldstein](https://avatars.githubusercontent.com/u/92491720?s=60&v=4)](/joshua-goldstein)

**[joshua-goldstein](/joshua-goldstein)**
commented
[Mar 21, 2023](#pullrequestreview-1349752313)

 [View reviewed changes](/hypermodeinc/dgraph/pull/8323/files/b36a9b577d33b944b73af24144748f02df71564b)

[testutil/testaudit/audit.go](/hypermodeinc/dgraph/pull/8323/files/b36a9b577d33b944b73af24144748f02df71564b#diff-c69e0caed5ff81692de513df448ee66ba64ad5d2dc5cb9c7a25e67e24d116ba9)

Show resolved

Hide resolved

[![@joshua-goldstein](https://avatars.githubusercontent.com/u/92491720?s=80&u=8296c3268dfa1e0085fc8e7842a039d31ee646e7&v=4)](/joshua-goldstein)

Copy link

Contributor

Author

### **[joshua-goldstein](/joshua-goldstein)** commented [Mar 21, 2023](#issuecomment-1477325892)

| The scope of this PR is now much larger than originally intended. This PR now introduces:   * Four new integration tests for encrypted audit logging in `systest/audit_encrypted/audit_test.go`, two of which verify that encrypted audit logs can be encrypted, and two that verify that deprecated audit logs can be decrypted * One new unit test in `ee/audit/run_ee_test.go` to verify that truncating an encrypted audit log does not cause the decrypt process to panic * A modified unit test to decrypt using the new audit log format   This PR also does some minor refactoring to the code. |
| --- |

All reactions

Sorry, something went wrong.

 Joshua Goldstein
added 3 commits
[March 21, 2023 01:09](#commits-pushed-cbc434c)

`[more error checks](/hypermodeinc/dgraph/pull/8323/commits/cbc434c154c7897774012573e95dd97af2f5e036 "more error checks")`

`[cbc434c](/hypermodeinc/dgraph/pull/8323/commits/cbc434c154c7897774012573e95dd97af2f5e036)`

`[error check](/hypermodeinc/dgraph/pull/8323/commits/4b7c5bace8de9047120605092c5b2f1bf8562a67 "error check")`

`[4b7c5ba](/hypermodeinc/dgraph/pull/8323/commits/4b7c5bace8de9047120605092c5b2f1bf8562a67)`

`[cannot truncate higher than 790](/hypermodeinc/dgraph/pull/8323/commits/6264fe10e48ab5cf69e86f5445651afd34a1731d "cannot truncate higher than 790")`

`[6264fe1](/hypermodeinc/dgraph/pull/8323/commits/6264fe10e48ab5cf69e86f5445651afd34a1731d)`

[![mangalaman93](https://avatars.githubusercontent.com/u/2542340?s=60&v=4)](/mangalaman93)

**[mangalaman93](/mangalaman93)**
requested changes
[Mar 21, 2023](#pullrequestreview-1351284147)

 [View reviewed changes](/hypermodeinc/dgraph/pull/8323/files/6264fe10e48ab5cf69e86f5445651afd34a1731d)

Copy link

Member

### @mangalaman93 **[mangalaman93](/mangalaman93)** left a comment

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

Did a quick review for now. I will review it again tomorrow.

Sorry, something went wrong.

All reactions

[ee/audit/run\_ee.go](/hypermodeinc/dgraph/pull/8323/files/6264fe10e48ab5cf69e86f5445651afd34a1731d#diff-736b3973fa3094e04dc1d4337241d573db835acc2e8c7bf9b9c392e79d142d8c)
Outdated

Show resolved

Hide resolved

[ee/audit/run\_ee.go](/hypermodeinc/dgraph/pull/8323/files/6264fe10e48ab5cf69e86f5445651afd34a1731d#diff-736b3973fa3094e04dc1d4337241d573db835acc2e8c7bf9b9c392e79d142d8c)
Outdated

Show resolved

Hide resolved

[ee/audit/run\_ee.go](/hypermodeinc/dgraph/pull/8323/files/6264fe10e48ab5cf69e86f5445651afd34a1731d#diff-736b3973fa3094e04dc1d4337241d573db835acc2e8c7bf9b9c392e79d142d8c)
Outdated

Show resolved

Hide resolved

[ee/audit/run\_ee.go](/hypermodeinc/dgraph/pull/8323/files/6264fe10e48ab5cf69e86f5445651afd34a1731d#diff-736b3973fa3094e04dc1d4337241d573db835acc2e8c7bf9b9c392e79d142d8c)

Show resolved

Hide resolved

[ee/audit/run\_ee\_test.go](/hypermodeinc/dgraph/pull/8323/files/6264fe10e48ab5cf69e86f5445651afd34a1731d#diff-1fe25aa289abc01cba54b89670f18dd431c0eaebb2c0891d6a126e8b4cd960fe)
Outdated

Show resolved

Hide resolved

[ee/audit/run\_ee\_test.go](/hypermodeinc/dgraph/pull/8323/files/6264fe10e48ab5cf69e86f5445651afd34a1731d#diff-1fe25aa289abc01cba54b89670f18dd431c0eaebb2c0891d6a126e8b4cd960fe)

Show resolved

Hide resolved

[ee/audit/run\_ee\_test.go](/hypermodeinc/dgraph/pull/8323/files/6264fe10e48ab5cf69e86f5445651afd34a1731d#diff-1fe25aa289abc01cba54b89670f18dd431c0eaebb2c0891d6a126e8b4cd960fe)
Outdated

Show resolved

Hide resolved

[testutil/testaudit/audit.go](/hypermodeinc/dgraph/pull/8323/files/b36a9b577d33b944b73af24144748f02df71564b#diff-c69e0caed5ff81692de513df448ee66ba64ad5d2dc5cb9c7a25e67e24d116ba9)

Show resolved

Hide resolved

[testutil/testaudit/docker-compose.yml](/hypermodeinc/dgraph/pull/8323/files/6264fe10e48ab5cf69e86f5445651afd34a1731d#diff-9d8d4bfff00d1aebf8b5e0609c171b0092f22800cd9928b946c69fa2eddacfc6)

Show resolved

Hide resolved

[x/log\_writer.go](/hypermodeinc/dgraph/pull/8323/files/6264fe10e48ab5cf69e86f5445651afd34a1731d#diff-c42fc8d17187b9f7bae2a3712dc6412474fd89de951229d9c81a41d5f84174be)

Show resolved

Hide resolved

 Joshua Goldstein
added 2 commits
[March 22, 2023 18:24](#commits-pushed-15e6cba)

`[nits](/hypermodeinc/dgraph/pull/8323/commits/15e6cba0967233592ee82f44b563318f5b248209 "nits")`

`[15e6cba](/hypermodeinc/dgraph/pull/8323/commits/15e6cba0967233592ee82f44b563318f5b248209)`

`[use require](/hypermodeinc/dgraph/pull/8323/commits/dc07b7c5d14611f7b32a7c11d7a18e8e32046c84 "use require")`

`[dc07b7c](/hypermodeinc/dgraph/pull/8323/commits/dc07b7c5d14611f7b32a7c11d7a18e8e32046c84)`

[![mangalaman93](https://avatars.githubusercontent.com/u/2542340?s=60&v=4)](/mangalaman93)

**[mangalaman93](/mangalaman93)**
previously approved these changes
[Mar 23, 2023](#pullrequestreview-1353803838)

 [View reviewed changes](/hypermodeinc/dgraph/pull/8323/files/dc07b7c5d14611f7b32a7c11d7a18e8e32046c84)

[ee/zero\_audit\_0\_1.log.enc](/hypermodeinc/dgraph/pull/8323/files/dc07b7c5d14611f7b32a7c11d7a18e8e32046c84#diff-2aa69dc31b5fa858651a0ce2c76b463d6571c5906ee38faeb05c31123e458c53)
Outdated

Show resolved

Hide resolved

`[remove extra file](/hypermodeinc/dgraph/pull/8323/commits/4e5ba7fc95e915225c6353a00dd9c65e9ca7860b "remove extra file")`

`[4e5ba7f](/hypermodeinc/dgraph/pull/8323/commits/4e5ba7fc95e915225c6353a00dd9c65e9ca7860b)`

 [![@joshua-goldstein](https://avatars.githubusercontent.com/u/92491720?s=40&u=8296c3268dfa1e0085fc8e7842a039d31ee646e7&v=4)](/joshua-goldstein)
[joshua-goldstein](/joshua-goldstein)
dismissed
[mangalaman93](/mangalaman93)’s [stale review](#pullrequestreview-1353803838)
via
`[4e5ba7f](/hypermodeinc/dgraph/commit/4e5ba7fc95e915225c6353a00dd9c65e9ca7860b)`
[March 23, 2023 16:19](#event-8829526733)

[![mangalaman93](https://avatars.githubusercontent.com/u/2542340?s=60&v=4)](/mangalaman93)

**[mangalaman93](/mangalaman93)**
approved these changes
[Mar 27, 2023](#pullrequestreview-1359718244)

 [View reviewed changes](/hypermodeinc/dgraph/pull/8323/files/4e5ba7fc95e915225c6353a00dd9c65e9ca7860b)

[![skrdgraph](https://avatars.githubusercontent.com/u/108091997?s=60&v=4)](/skrdgraph)

**[skrdgraph](/skrdgraph)**
approved these changes
[Mar 30, 2023](#pullrequestreview-1365975536)

 [View reviewed changes](/hypermodeinc/dgraph/pull/8323/files/4e5ba7fc95e915225c6353a00dd9c65e9ca7860b)

[![@joshua-goldstein](https://avatars.githubusercontent.com/u/92491720?s=40&u=8296c3268dfa1e0085fc8e7842a039d31ee646e7&v=4)](/joshua-goldstein)
[joshua-goldstein](/joshua-goldstein)
merged commit [`9e723ad`](/hypermodeinc/dgraph/commit/9e723adfd3ddc2a1c9feda6c352ea35acc923bfd)
into
main

[Mar 30, 2023](https://github.com/hypermodeinc/dgraph/pull/8323#event-8892643516)

 [![@joshua-goldstein](https://avatars.githubusercontent.com/u/92491720?s=40&u=8296c3268dfa1e0085fc8e7842a039d31ee646e7&v=4)](/joshua-goldstein)
[joshua-goldstein](/joshua-goldstein)
deleted the
joshua/fix-logger

branch
[March 30, 2023 23:16](#event-8892643636)

[![@GoVulnBot](https://avatars.githubusercontent.com/u/96493708?s=40&v=4)](/GoVulnBot)
[GoVulnBot](/GoVulnBot)
mentioned this pull request
[May 17, 2023](#ref-issue-1714495519)

[x/vulndb: potential Go vuln in github.com/dgraph-io/dgraph: CVE-2023-31135
golang/vulndb#1781](/golang/vulndb/issues/1781)

Closed

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Fhypermodeinc%2Fdgraph%2Fpull%2F8323)

Reviewers

[![@HakuPiku](https://avatars.githubusercontent.com/u/34951444?s=40&v=4)](/HakuPiku) [HakuPiku](/HakuPiku)

HakuPiku left review comments

[![@skrdgraph](https://avatars.githubusercontent.com/u/108091997?s=40&v=4)](/skrdgraph) [skrdgraph](/skrdgraph)

skrdgraph approved these changes

[![@mangalaman93](https://avatars.githubusercontent.com/u/2542340?s=40&v=4)](/mangalaman93) [mangalaman93](/mangalaman93)

mangalaman93 approved these changes

[![@akon-dey](https://avatars.githubusercontent.com/u/1030940?s=40&v=4)](/akon-dey) [akon-dey](/akon-dey)

 Awaiting requested review from akon-dey

[![@darkn3rd](https://avatars.githubusercontent.com/u/7537882?s=40&v=4)](/darkn3rd) [darkn3rd](/darkn3rd)

 Awaiting requested review from darkn3rd

[![@meghalims](https://avatars.githubusercontent.com/u/83975647?s=40&v=4)](/meghalims) [meghalims](/meghalims)

 Awaiting requested review from meghalims

[![@matthewmcneely](https://avatars.githubusercontent.com/u/1376853?s=40&v=4)](/matthewmcneely) [matthewmcneely](/matthewmcneely)

 Awaiting requested review from matthewmcneely

[![@billprovince](https://avatars.githubusercontent.com/u/22082594?s=40&v=4)](/billprovince) [billprovince](/billprovince)

 Awaiting requested review from billprovince

[![@harshil-goel](https://avatars.githubusercontent.com/u/54325286?s=40&v=4)](/harshil-goel) [harshil-goel](/harshil-goel)

 Awaiting requested review from harshil-goel

Assignees

[![@joshua-goldstein](https://avatars.githubusercontent.com/u/92491720?s=40&v=4)](/joshua-goldstein) [joshua-goldstein](/joshua-goldstein)

Labels

[area/security](/hypermodeinc/dgraph/labels/area/security)
Security related issues
[dgraph](/hypermodeinc/dgraph/labels/dgraph)
Issue or PR created by an internal Dgraph contributor.

Milestone

No milestone

Development

Successfully merging this pull request may close these issues.

6 participants

[![@joshua-goldstein](https://avatars.githubusercontent.com/u/92491720?s=52&v=4)](/joshua-goldstein) [![@coveralls](https://avatars.githubusercontent.com/u/2354108?s=52&v=4)](/coveralls) [![@HakuPiku](https://avatars.githubusercontent.com/u/34951444?s=52&v=4)](/HakuPiku) [![@mangalaman93](https://avatars.githubusercontent.com/u/2542340?s=52&v=4)](/mangalaman93) [![@skrdgraph](https://avatars.githubusercontent.com/u/108091997?s=52&v=4)](/skrdgraph) [![@MichelDiz](https://avatars.githubusercontent.com/u/6570955?s=52&v=4)](/MichelDiz)

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


