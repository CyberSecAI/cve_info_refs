=== Content from github.com_b6ad1354_20250115_100256.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fopenlink%2Fvirtuoso-opensource%2Fissues%2F1117)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fopenlink%2Fvirtuoso-opensource%2Fissues%2F1117)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=openlink%2Fvirtuoso-opensource)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[openlink](/openlink)
/
**[virtuoso-opensource](/openlink/virtuoso-opensource)**
Public

* [Notifications](/login?return_to=%2Fopenlink%2Fvirtuoso-opensource) You must be signed in to change notification settings
* [Fork
  211](/login?return_to=%2Fopenlink%2Fvirtuoso-opensource)
* [Star
   878](/login?return_to=%2Fopenlink%2Fvirtuoso-opensource)

* [Code](/openlink/virtuoso-opensource)
* [Issues
  611](/openlink/virtuoso-opensource/issues)
* [Pull requests
  18](/openlink/virtuoso-opensource/pulls)
* [Actions](/openlink/virtuoso-opensource/actions)
* [Projects
  0](/openlink/virtuoso-opensource/projects)
* [Security](/openlink/virtuoso-opensource/security)
* [Insights](/openlink/virtuoso-opensource/pulse)

Additional navigation options

* [Code](/openlink/virtuoso-opensource)
* [Issues](/openlink/virtuoso-opensource/issues)
* [Pull requests](/openlink/virtuoso-opensource/pulls)
* [Actions](/openlink/virtuoso-opensource/actions)
* [Projects](/openlink/virtuoso-opensource/projects)
* [Security](/openlink/virtuoso-opensource/security)
* [Insights](/openlink/virtuoso-opensource/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fopenlink%2Fvirtuoso-opensource%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fopenlink%2Fvirtuoso-opensource%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# virtuoso \*crashed\* after running a SELECT statement #1117

Closed

[fuboat](/fuboat) opened this issue
Apr 10, 2023
· 2 comments

Closed

# [virtuoso \*crashed\* after running a SELECT statement](#top) #1117

[fuboat](/fuboat) opened this issue
Apr 10, 2023
· 2 comments

Assignees
[![@pkleef](https://avatars.githubusercontent.com/u/1565864?s=40&v=4)](/pkleef)

## Comments

[![@fuboat](https://avatars.githubusercontent.com/u/16066116?s=80&v=4)](/fuboat)

Copy link

### **[fuboat](/fuboat)** commented [Apr 10, 2023](#issue-1661128936) • edited Loading

| Description When running the following statement on an empty virtuoso-opensource database, the database just crashed:  ``` SELECT table_name as name, 'TABLE' as type, '' as parentname FROM information_schema.tables UNION  SELECT column_name as name, data_type as type, table_name as parentname FROM information_schema.columns ``` The Way to Reproduce Just running the following command to reproduce the crash:  ``` docker run --name virtdb -itd --env DBA_PASSWORD=dba openlink/virtuoso-opensource-7:7.2.9 # start virtuoso through docker sleep 10 # wait the server starting echo "SELECT 1;" | docker exec -i virtdb isql 1111 dba # check whether the simple query works # The command to crash virtuoso  echo "SELECT table_name as name, 'TABLE' as type, '' as parentname FROM information_schema.tables UNION SELECT column_name as name, data_type as type, table_name as parentname FROM information_schema.columns;" | docker exec -i virtdb isql 1111 dba ```  the output in shell:  ``` OpenLink Virtuoso Interactive SQL (Virtuoso) Version 07.20.3236 as of Feb 27 2023 Type HELP; for help and EXIT; to exit. Connected to OpenLink Virtuoso Driver: 07.20.3236 OpenLink Virtuoso ODBC Driver SQL>  *** Error 08S01: [Virtuoso Driver]CL065: Lost connection to server at line 1 of Top-Level: SELECT table_name as name, 'TABLE' as type, '' as parentname FROM information_schema.tables UNION SELECT column_name as name, data_type as type, table_name as parentname FROM information_schema.columns  ```  You can see the error "Lost connection to server", and the container is stopped due to the abnormal exit of the virtuoso instance. Backtrace The backtrace when crash is as follow. I compiled virtuoso-opensource 7.2.9 with debug mode to get it.  ``` Thread 8 "virtuoso-t" received signal SIGSEGV, Segmentation fault. [Switching to Thread 0x7fffdfdb4700 (LWP 1440941)] 0x00000000005533b6 in mp_box_deserialize_string (mp=0x7fffc806bfc0,      text=0xe34ce1f37a6c3a64 <error: Cannot access memory at address 0xe34ce1f37a6c3a64>, opt_len=2147483647, offset=0) at regist.c:292 292       switch ((dtp_t)text[0]) (gdb) bt #0  0x00000000005533b6 in mp_box_deserialize_string (mp=0x7fffc806bfc0,      text=0xe34ce1f37a6c3a64 <error: Cannot access memory at address 0xe34ce1f37a6c3a64>, opt_len=2147483647, offset=0) at regist.c:292 #1  0x0000000000427b34 in cha_box_col (cha=0x7fffec416108, ha=0x7fffc8025bf0, row=0x7fffec424720 "k9\241\220(\230\310\r", inx=3)     at chash.c:2320 #2  0x00000000004253f1 in chash_to_memcache (inst=0x7fffc802b2f8, tree=0x7fffc802a158, ha=0x7fffc8025bf0) at chash.c:2364 #3  0x00000000004278e4 in setp_chash_distinct (setp=0x7fffc8025970, inst=0x7fffc802b2f8) at chash.c:2292 #4  0x0000000000593df7 in setp_node_run (setp=0x7fffc8025970, inst=0x7fffc802b2f8, state=0x7fffc802b2f8, print_blobs=0) at sort.c:385 #5  0x00000000005948c7 in setp_node_input (setp=0x7fffc8025970, inst=0x7fffc802b2f8, state=0x7fffc802b2f8) at sort.c:606 #6  0x00000000006bb4e3 in qn_input (xx=0x7fffc8025970, inst=0x7fffc802b2f8, state=0x7fffc802b2f8) at sqlrun.c:982 #7  0x00000000006bb74a in qn_send_output (src=0x7fffc8024ae0, state=0x7fffc802b2f8) at sqlrun.c:1028 #8  0x000000000042b6f8 in hash_source_chash_input (hs=0x7fffc8024ae0, inst=0x7fffc802b2f8, state=0x7fffc802b2f8) at chash.c:3233 #9  0x00000000004d268c in hash_source_input (hs=0x7fffc8024ae0, qst=0x7fffc802b2f8, qst_cont=0x7fffc802b2f8) at hash.c:2613 #10 0x00000000006bb4e3 in qn_input (xx=0x7fffc8024ae0, inst=0x7fffc802b2f8, state=0x7fffc802b2f8) at sqlrun.c:982 #11 0x00000000006bb8e6 in qn_ts_send_output (src=0x7fffc8024400, state=0x7fffc802b2f8, after_join_test=0x0) at sqlrun.c:1059 #12 0x00000000006bf39f in table_source_input (ts=0x7fffc8024400, inst=0x7fffc802b2f8, state=0x7fffc802b2f8) at sqlrun.c:1991 #13 0x00000000006bb4e3 in qn_input (xx=0x7fffc8024400, inst=0x7fffc802b2f8, state=0x7fffc802b2f8) at sqlrun.c:982 #14 0x00000000006bb8e6 in qn_ts_send_output (src=0x7fffc80235b0, state=0x7fffc802b2f8, after_join_test=0x0) at sqlrun.c:1059 #15 0x00000000006bf39f in table_source_input (ts=0x7fffc80235b0, inst=0x7fffc802b2f8, state=0x7fffc802b2f8) at sqlrun.c:1991 #16 0x00000000006bb4e3 in qn_input (xx=0x7fffc80235b0, inst=0x7fffc802b2f8, state=0x7fffc802b2f8) at sqlrun.c:982 #17 0x0000000000594e55 in union_node_input (un=0x7fffc800f5d0, inst=0x7fffc802b2f8, state=0x7fffc802b2f8) at sort.c:672 #18 0x000000000066c60f in qr_resume_pending_nodes (subq=0x7fffc8020680, inst=0x7fffc802b2f8) at sqlintrp.c:1185 #19 0x000000000066c923 in subq_next (subq=0x7fffc8020680, inst=0x7fffc802b2f8, cr_state=2) at sqlintrp.c:1243 #20 0x000000000070e52c in subq_node_vec_input (sqs=0x7fffc801dbc0, inst=0x7fffc802b2f8, state=0x0) at sqlvnode.c:702 #21 0x0000000000594a8b in subq_node_input (sqs=0x7fffc801dbc0, inst=0x7fffc802b2f8, state=0x7fffc802b2f8) at sort.c:691 #22 0x00000000006bb4e3 in qn_input (xx=0x7fffc801dbc0, inst=0x7fffc802b2f8, state=0x7fffc802b2f8) at sqlrun.c:982 #23 0x00000000006bb74a in qn_send_output (src=0x7fffc80202b0, state=0x7fffc802b2f8) at sqlrun.c:1028 #24 0x0000000000439b1a in chash_fill_input (fref=0x7fffc80202b0, inst=0x7fffc802b2f8, state=0x7fffc802b2f8) at chash.c:6013 #25 0x00000000004d3c05 in hash_fill_node_input (fref=0x7fffc80202b0, inst=0x7fffc802b2f8, qst=0x7fffc802b2f8) at hash.c:3253 #26 0x00000000006bb4e3 in qn_input (xx=0x7fffc80202b0, inst=0x7fffc802b2f8, state=0x7fffc802b2f8) at sqlrun.c:982 #27 0x00000000006bb74a in qn_send_output (src=0x7fffc8027e30, state=0x7fffc802b2f8) at sqlrun.c:1028 #28 0x000000000070e189 in set_ctr_vec_input (sctr=0x7fffc8027e30, inst=0x7fffc802b2f8, state=0x7fffc802b2f8) at sqlvnode.c:632 #29 0x0000000000596fb4 in set_ctr_input (sctr=0x7fffc8027e30, inst=0x7fffc802b2f8, state=0x7fffc802b2f8) at sort.c:1319 #30 0x00000000006bb4e3 in qn_input (xx=0x7fffc8027e30, inst=0x7fffc802b2f8, state=0x7fffc802b2f8) at sqlrun.c:982 #31 0x00000000006c791e in qr_exec (cli=0x7fffc8000e30, qr=0x7fffc801a380, caller=0x2, cr_name=0x7fffc802bdf8 "s1111_1_0", stmt=0x7fffc8018b30,      lc_ret=0x0, parms=0x7fffd4021de8, opts=0x7fffd4021f08, named_params=0) at sqlrun.c:4344 #32 0x00000000006d1f5b in sf_sql_execute (stmt_id=0x7fffd4021e08 "s1111_1_0", text=0x72e2658 "\320\b", cursor_name=0x7fffd4021ec8 "s1111_1_0",      params=0x7fffd4021ea8, current_ofs=0x7fffd4021dc8, options=0x7fffd4021f08) at sqlsrv.c:2006 #33 0x00000000006d26fe in sf_sql_execute_w (stmt_id=0x7fffd4021e08 "s1111_1_0", text=0x72e2658 "\320\b",      cursor_name=0x7fffd4021ec8 "s1111_1_0", params=0x7fffd4021ea8, current_ofs=0x7fffd4021dc8, options=0x7fffd4021f08) at sqlsrv.c:2049 #34 0x00000000006d9620 in sf_sql_execute_wrapper (args=0x7fffdfdb3e30) at sqlsrv.c:3995 #35 0x0000000000b777f6 in future_wrapper (ignore=0x0) at Dkernel.c:1171 #36 0x0000000000b7da94 in _thread_boot (arg=0x7fffd4011370) at sched_pthread.c:296 #37 0x00007ffff7c3a609 in start_thread (arg=<optimized out>) at pthread_create.c:477 --Type <RET> for more, q to quit, c to continue without paging-- #38 0x00007ffff7a0a133 in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:95  ``` |
| --- |
| The text was updated successfully, but these errors were encountered: |

All reactions

[![@HughWilliams](https://avatars.githubusercontent.com/u/4868081?s=80&u=9c8581722b3e2a9b019db97e86a096c8b6b9f9fb&v=4)](/HughWilliams)

Copy link

Collaborator

### **[HughWilliams](/HughWilliams)** commented [Apr 10, 2023](#issuecomment-1502214279)

| We are looking into this issue ... |
| --- |

All reactions

Sorry, something went wrong.

[![@pkleef](https://avatars.githubusercontent.com/u/1565864?s=40&v=4)](/pkleef)
[pkleef](/pkleef)
self-assigned this
[Apr 12, 2023](#event-8985714877)

[![@TallTed](https://avatars.githubusercontent.com/u/2559602?s=80&v=4)](/TallTed)

Copy link

Collaborator

### **[TallTed](/TallTed)** commented [Apr 14, 2023](#issuecomment-1508977828)

| So it doesn't go unsaid --  [@fuboat](https://github.com/fuboat), THANK YOU for all [these bug reports](https://github.com/openlink/virtuoso-opensource/issues?q=+is%3Aissue+author%3Afuboat+)! The detailed recreation guidance is particularly helpful! |
| --- |

All reactions

Sorry, something went wrong.

[![@pkleef](https://avatars.githubusercontent.com/u/1565864?s=40&v=4)](/pkleef)
[pkleef](/pkleef)
closed this as [completed](/openlink/virtuoso-opensource/issues?q=is%3Aissue+is%3Aclosed+archived%3Afalse+reason%3Acompleted)
in
`[7c488ae](/openlink/virtuoso-opensource/commit/7c488ae70803b208a94bf12fee792195caddbf7d)`
[Apr 17, 2023](#event-9021913184)

[pkleef](/pkleef)
pushed a commit
that referenced
this issue
[Jun 7, 2023](#ref-commit-562dc5e)
[![@v7fasttrack](https://avatars.githubusercontent.com/u/6672344?s=40&v=4)](/v7fasttrack) [![@pkleef](https://avatars.githubusercontent.com/u/1565864?s=40&v=4)](/pkleef)

`[Fixed compare only up to cha key parts (](/openlink/virtuoso-opensource/commit/562dc5e97dc16ae43ce51793871eb1a97a90e233 "Fixed compare only up to cha key parts (fixes #1117)")[fixes](/openlink/virtuoso-opensource/commit/562dc5e97dc16ae43ce51793871eb1a97a90e233 "Fixed compare only up to cha key parts (fixes #1117)") [#1117](https://github.com/openlink/virtuoso-opensource/issues/1117)[)](/openlink/virtuoso-opensource/commit/562dc5e97dc16ae43ce51793871eb1a97a90e233 "Fixed compare only up to cha key parts (fixes #1117)")`

`[562dc5e](/openlink/virtuoso-opensource/commit/562dc5e97dc16ae43ce51793871eb1a97a90e233)`

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Fopenlink%2Fvirtuoso-opensource%2Fissues%2F1117)

Assignees

[![@pkleef](https://avatars.githubusercontent.com/u/1565864?s=40&v=4)](/pkleef) [pkleef](/pkleef)

Labels

None yet

Projects

None yet

Milestone

No milestone

Development

No branches or pull requests

4 participants

[![@pkleef](https://avatars.githubusercontent.com/u/1565864?s=52&v=4)](/pkleef) [![@TallTed](https://avatars.githubusercontent.com/u/2559602?s=52&v=4)](/TallTed) [![@HughWilliams](https://avatars.githubusercontent.com/u/4868081?s=52&v=4)](/HughWilliams) [![@fuboat](https://avatars.githubusercontent.com/u/16066116?s=52&v=4)](/fuboat)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


