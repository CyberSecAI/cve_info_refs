=== Content from lists.fedoraproject.org_22e49603_20250114_183159.html ===


[![Fedora Mailing-Lists](/static/logo-hyperkitty-fedora.png)](/archives/ "Fedora Mailing-Lists")

[Sign In](/accounts/login/?next=/archives/list/package-announce%40lists.fedoraproject.org/message/FU2FGUXXK6TMV6R52VRECLC6XCSQQISY/)
[Sign Up](/accounts/signup/?next=/archives/list/package-announce%40lists.fedoraproject.org/message/FU2FGUXXK6TMV6R52VRECLC6XCSQQISY/)

* [Sign In](/accounts/login/?next=/archives/list/package-announce%40lists.fedoraproject.org/message/FU2FGUXXK6TMV6R52VRECLC6XCSQQISY/)
* [Sign Up](/accounts/signup/?next=/archives/list/package-announce%40lists.fedoraproject.org/message/FU2FGUXXK6TMV6R52VRECLC6XCSQQISY/)

* [Manage this list](/admin/lists/package-announce.lists.fedoraproject.org/)

×
#### Keyboard Shortcuts

### Thread View

* `j`: Next unread message
* `k`: Previous unread message
* `j a`: Jump to all threads* `j l`: Jump to MailingList overview

### 2025

* [January](/archives/list/package-announce%40lists.fedoraproject.org/2025/1/)

### 2024

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2024/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2024/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2024/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2024/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2024/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2024/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2024/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2024/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2024/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2024/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2024/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2024/1/)

### 2023

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2023/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2023/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2023/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2023/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2023/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2023/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2023/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2023/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2023/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2023/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2023/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2023/1/)

### 2022

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2022/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2022/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2022/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2022/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2022/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2022/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2022/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2022/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2022/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2022/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2022/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2022/1/)

### 2021

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2021/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2021/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2021/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2021/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2021/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2021/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2021/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2021/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2021/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2021/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2021/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2021/1/)

### 2020

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2020/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2020/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2020/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2020/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2020/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2020/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2020/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2020/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2020/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2020/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2020/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2020/1/)

### 2019

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2019/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2019/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2019/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2019/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2019/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2019/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2019/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2019/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2019/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2019/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2019/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2019/1/)

### 2018

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2018/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2018/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2018/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2018/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2018/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2018/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2018/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2018/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2018/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2018/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2018/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2018/1/)

### 2017

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2017/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2017/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2017/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2017/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2017/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2017/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2017/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2017/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2017/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2017/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2017/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2017/1/)

### 2016

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2016/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2016/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2016/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2016/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2016/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2016/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2016/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2016/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2016/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2016/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2016/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2016/1/)

### 2015

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2015/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2015/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2015/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2015/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2015/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2015/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2015/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2015/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2015/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2015/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2015/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2015/1/)

### 2014

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2014/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2014/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2014/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2014/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2014/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2014/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2014/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2014/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2014/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2014/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2014/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2014/1/)

### 2013

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2013/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2013/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2013/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2013/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2013/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2013/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2013/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2013/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2013/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2013/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2013/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2013/1/)

### 2012

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2012/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2012/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2012/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2012/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2012/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2012/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2012/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2012/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2012/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2012/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2012/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2012/1/)

### 2011

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2011/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2011/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2011/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2011/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2011/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2011/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2011/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2011/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2011/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2011/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2011/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2011/1/)

### 2010

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2010/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2010/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2010/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2010/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2010/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2010/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2010/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2010/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2010/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2010/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2010/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2010/1/)

### 2009

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2009/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2009/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2009/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2009/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2009/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2009/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2009/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2009/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2009/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2009/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2009/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2009/1/)

### 2008

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2008/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2008/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2008/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2008/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2008/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2008/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2008/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2008/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2008/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2008/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2008/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2008/1/)

### 2007

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2007/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2007/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2007/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2007/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2007/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2007/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2007/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2007/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2007/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2007/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2007/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2007/1/)

### 2006

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2006/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2006/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2006/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2006/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2006/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2006/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2006/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2006/5/)

[List overview](/archives/list/package-announce%40lists.fedoraproject.org/)

[Download](/archives/list/package-announce%40lists.fedoraproject.org/export/package-announce%40lists.fedoraproject.org-FU2FGUXXK6TMV6R52VRECLC6XCSQQISY.mbox.gz?message=FU2FGUXXK6TMV6R52VRECLC6XCSQQISY "This message in gzipped mbox format")

[thread](/archives/list/package-announce%40lists.fedoraproject.org/thread/FU2FGUXXK6TMV6R52VRECLC6XCSQQISY/#FU2FGUXXK6TMV6R52VRECLC6XCSQQISY)

# [SECURITY] Fedora 40 Update: php-oojs-oojs-ui-0.48.1-1.fc40

![](https://seccdn.libravatar.org/avatar/be256568dfce45c1862b55e6cf3f2726.jpg?s=120&d=retro&r=g)

[updates＠fedoraproject.org](/archives/users/3d8bb2e4c1d843beb492d4f8a7c44761/ "See the profile for updates＠fedoraproject.org")

10 May
2024

10 May
'24

9:32 p.m.

--------------------------------------------------------------------------------
Fedora Update Notification
FEDORA-2024-2c564b942d
2024-05-11 01:29:32.567764
--------------------------------------------------------------------------------

Name : php-oojs-oojs-ui
Product : Fedora 40
Version : 0.48.1
Release : 1.fc40
URL : <http://www.mediawiki.org/wiki/OOjs_UI>
Summary : Object-Oriented JavaScript ��� User Interface
Description :
OOjs UI (Object-Oriented JavaScript ��� User Interface) is a library that allows
developers to rapidly create front-end web applications that operate
consistently across a multitude of browsers.

--------------------------------------------------------------------------------
Update Information:

<https://www.mediawiki.org/wiki/Release_notes/1.41>
--------------------------------------------------------------------------------
ChangeLog:

\* Fri May 3 2024 Michael Cronenworth mike@cchtml.com - 0.48.1-1
- version update
\* Thu Jan 25 2024 Fedora Release Engineering releng@fedoraproject.org - 0.46.3-3
- Rebuilt for <https://fedoraproject.org/wiki/Fedora_40_Mass_Rebuild>
\* Sun Jan 21 2024 Fedora Release Engineering releng@fedoraproject.org - 0.46.3-2
- Rebuilt for <https://fedoraproject.org/wiki/Fedora_40_Mass_Rebuild>
--------------------------------------------------------------------------------
References:

[ 1 ] Bug #2240808 - CVE-2023-3550 mediawiki: stored XSS leads to privilege escalation [fedora-all]
<https://bugzilla.redhat.com/show_bug.cgi?id=2240808>
[ 2 ] Bug #2241397 - mediawiki-1.41.1 is available
<https://bugzilla.redhat.com/show_bug.cgi?id=2241397>
[ 3 ] Bug #2247804 - CVE-2023-45360 mediawiki: XSS in youhavenewmessagesmanyusers and youhavenewmessages i18n messages [fedora-all]
<https://bugzilla.redhat.com/show_bug.cgi?id=2247804>
[ 4 ] Bug #2247806 - CVE-2023-45362 mediawiki: diff-multi-sameuser ("X intermediate revisions by the same user not shown") ignores username suppression [fedora-all]
<https://bugzilla.redhat.com/show_bug.cgi?id=2247806>
[ 5 ] Bug #2255583 - CVE-2023-51704 mediawiki: group-.\*-member messages are not properly escaped on Special:log/rights [fedora-all]
<https://bugzilla.redhat.com/show_bug.cgi?id=2255583>
[ 6 ] Bug #2261492 - php-oojs-oojs-ui: FTBFS in Fedora rawhide/f40
<https://bugzilla.redhat.com/show_bug.cgi?id=2261492>
[ 7 ] Bug #2278773 - mediawiki: XSS in edit summary parser [fedora-all]
<https://bugzilla.redhat.com/show_bug.cgi?id=2278773>
[ 8 ] Bug #2278774 - mediawiki: denial of service via GET request to Special:MovePage [fedora-all]
<https://bugzilla.redhat.com/show_bug.cgi?id=2278774>
[ 9 ] Bug #2279230 - CVE-2024-34507 mediawiki: cross-site scripting [fedora-all]
<https://bugzilla.redhat.com/show_bug.cgi?id=2279230>
[ 10 ] Bug #2279232 - CVE-2024-34506 mediawiki: denial of service [fedora-all]
<https://bugzilla.redhat.com/show_bug.cgi?id=2279232>
[ 11 ] Bug #2279234 - CVE-2024-34500 mediawiki: XSS through interface message in UnlinkedWikibase [fedora-all]
<https://bugzilla.redhat.com/show_bug.cgi?id=2279234>
[ 12 ] Bug #2279239 - CVE-2024-34502 mediawiki: MergeLexemes makes edits on GET requests without edit tokens [fedora-all]
<https://bugzilla.redhat.com/show_bug.cgi?id=2279239>
--------------------------------------------------------------------------------

This update can be installed with the "dnf" update program. Use
su -c 'dnf upgrade --advisory FEDORA-2024-2c564b942d' at the command
line. For more information, refer to the dnf documentation available at
<http://dnf.readthedocs.io/en/latest/command_ref.html#upgrade-command-label>

All packages are signed with the Fedora Project GPG key. More details on the
GPG keys used by the Fedora Project can be found at
<https://fedoraproject.org/keys>
--------------------------------------------------------------------------------

[0](#like "You must be logged-in to vote.")
[0](#dislike "You must be logged-in to vote.")

Reply

[Back to the thread](/archives/list/package-announce%40lists.fedoraproject.org/thread/FU2FGUXXK6TMV6R52VRECLC6XCSQQISY/#FU2FGUXXK6TMV6R52VRECLC6XCSQQISY)

[Back to the list](/archives/list/package-announce%40lists.fedoraproject.org/)

Powered by [HyperKitty](http://hyperkitty.readthedocs.org) version 1.3.7.



=== Content from lists.debian.org_1c3e264d_20250114_183158.html ===


---

[[Date Prev](msg00026.html)][[Date Next](msg00028.html)]
[[Thread Prev](msg00026.html)][[Thread Next](msg00028.html)]
[[Date Index](maillist.html#00027)]
[[Thread Index](threads.html#00027)]

# [SECURITY] [DLA 3671-1] mediawiki security update

---

* *To*: debian-lts-announce@lists.debian.org
* *Subject*: [SECURITY] [DLA 3671-1] mediawiki security update
* *From*: Guilhem Moulin <guilhem@debian.org>
* *Date*: Tue, 28 Nov 2023 12:46:19 +0100
* *Message-id*: <[[🔎]](/msgid-search/ZWXTC1Xr4p2y-EBj%40debian.org) [ZWXTC1Xr4p2y-EBj@debian.org](msg00027.html)>
* *Mail-followup-to*: debian-lts-announce@lists.debian.org
* *Reply-to*: debian-lts@lists.debian.org

---

```
-------------------------------------------------------------------------
Debian LTS Advisory DLA-3671-1                debian-lts@lists.debian.org
<https://www.debian.org/lts/security/>                       Guilhem Moulin
November 28, 2023                             <https://wiki.debian.org/LTS>
-------------------------------------------------------------------------

Package        : mediawiki
Version        : 1:1.31.16-1+deb10u7
CVE ID         : CVE-2023-3550 CVE-2023-45362 CVE-2023-45363

Multiple vulnerabilities were found in mediawiki, a website engine for
collaborative work, that could lead to information disclosure, privilege
escalation, or denial of service.

CVE-2023-3550

    Carlos Bello reported a stored cross-site scripting (XSS)
    vulnerability when uploading crafted XML file to Special:Upload,
    which can lead to privilege escalation.  (However .xml file uploads
    are not allowed in the default configuration.)

CVE-2023-45362

    Tobias Frei discovered that diff-multi-sameuser (“X intermediate
    revisions by the same user not shown”) ignores username suppression,
    which can lead to information leak.

CVE-2023-45363

    It was discovered that querying pages redirected to other variants
    with `redirects` and `converttitles` parameters set would cause
    a denial of service (unbounded loop and RequestTimeoutException).

For Debian 10 buster, these problems have been fixed in version
1:1.31.16-1+deb10u7.

We recommend that you upgrade your mediawiki packages.

For the detailed security status of mediawiki please refer to
its security tracker page at:
<https://security-tracker.debian.org/tracker/mediawiki>

Further information about Debian LTS security advisories, how to apply
these updates to your system and frequently asked questions can be
found at: <https://wiki.debian.org/LTS>

```

**Attachment:
[signature.asc](pgpyVY__cCptR.pgp)**

*Description:* PGP signature

---



=== Content from phabricator.wikimedia.org_8a1566f3_20250114_183200.html ===
Page Menu[HomePhabricator](/)

* SearchConfigure Global Search

[Log In](https://phabricator.wikimedia.org/auth/start/?next=%2FT341529)[Create Task](/maniphest/task/edit/nocreate/) [Maniphest](/maniphest/)  T341529
# CVE-2023-45362: diff-multi-sameuser ("X intermediate revisions by the same user not shown") ignores username suppressionClosed, Resolved[Public](/policy/explain/PHID-TASK-n7yg62tv2hxbiklukssg/view/)SecurityActions

* [Edit Task](/maniphest/task/edit/341529/)
* Edit Related Tasks...
* [Create Subtask](/maniphest/task/subtask/341529/)
* [Edit Parent Tasks](/search/rel/task.has-parent/PHID-TASK-n7yg62tv2hxbiklukssg/)
* [Edit Subtasks](/search/rel/task.has-subtask/PHID-TASK-n7yg62tv2hxbiklukssg/)
* [Merge Duplicates In](/search/rel/task.merge-in/PHID-TASK-n7yg62tv2hxbiklukssg/)
* [Close As Duplicate](/search/rel/task.close-as-duplicate/PHID-TASK-n7yg62tv2hxbiklukssg/)
* Edit Related Objects...
* [Edit Commits](/search/rel/task.has-commit/PHID-TASK-n7yg62tv2hxbiklukssg/)
* [Edit Mocks](/search/rel/task.has-mock/PHID-TASK-n7yg62tv2hxbiklukssg/)
* Subscribe
* [Mute Notifications](/subscriptions/mute/PHID-TASK-n7yg62tv2hxbiklukssg/)
* [Protect as security issue](/wmf/escalate-task/341529/)
* [Award Token](/token/give/PHID-TASK-n7yg62tv2hxbiklukssg/)
* [Flag For Later](/flag/edit/PHID-TASK-n7yg62tv2hxbiklukssg/)

Assigned To

|  | [Mstyles](/p/Mstyles/) |
| --- | --- |

Authored By

|  | [ToBeFree](/p/ToBeFree/) |
| --- | --- |
| Jul 10 2023, 9:34 PM2023-07-10 21:34:43 (UTC+0) |

Tags

* [Security-Team](/tag/security-team/) [(Watching)](/project/board/1179/)
* [Security](/tag/security/)
* [MediaWiki-Revision-deletion](/tag/mediawiki-revision-deletion/) [(Backlog)](/project/board/337/)
* [MediaWiki-Page-diffs](/tag/mediawiki-page-diffs/) [(Backlog)](/project/board/149/)
* [Vuln-Infoleak](/tag/vuln-infoleak/)
* [SecTeam-Processed](/tag/secteam-processed/) [(Completed)](/project/board/5180/)
* [MW-1.35-release](/tag/mw-1.35-release/) [(Blocker)](/project/board/4035/)
* [MW-1.39-release](/tag/mw-1.39-release/) [(Blocker)](/project/board/5694/)
* [MW-1.40-release](/tag/mw-1.40-release/) [(Blocker)](/project/board/6139/)
Referenced FilesNoneSubscribers

|  | [Aklapper](/p/Aklapper/) |
| --- | --- |

|  | [Barkeep49](/p/Barkeep49/) |
| --- | --- |

|  | [gerritbot](/p/gerritbot/) |
| --- | --- |

|  | [matmarex](/p/matmarex/) |
| --- | --- |

|  | [MusikAnimal](/p/MusikAnimal/) |
| --- | --- |

|  | [Reedy](/p/Reedy/) |
| --- | --- |

|  | [sbassett](/p/sbassett/) |
| --- | --- |

|  | [ToBeFree](/p/ToBeFree/) |
| --- | --- |

# Description

diff-multi-sameuser ("X intermediate revisions by the same user not shown") ignores username suppression (information leak).

Reproduction:

* Edit a page (diff 1)
* Edit the page again (diff 2)
* Edit the page again (diff 3)
* Edit the page again (diff 4)
* oversight/suppress diff 2's and 3's usernames from the revision history
* open the revision history, select diff 1 and 4 for comparison
* diff-multi-sameuser is displayed, leaking this information

Works on enwiki, tested at <https://en.wikipedia.org/w/index.php?title=User%3AMusikAnimal%2Fsandbox&diff=1164068997&oldid=1114423881> . MusikAnimal has been looking for, and may have found, something else they'll then probably be reporting separately.

# Details

Risk Rating Medium Author Affiliation Wikimedia Communities

|  | Subject | Repo | Branch | Lines +/- |
| --- | --- | --- | --- | --- |
|  | [SECURITY: DifferenceEngine: hide diff-multi-sameuser message for supressed revisions](https://gerrit.wikimedia.org/r/c/961955) | [mediawiki/core](https://gerrit.wikimedia.org/r/plugins/gitiles/mediawiki/core) | [master](https://gerrit.wikimedia.org/r/plugins/gitiles/mediawiki/core/%2B/master) | +11 -1 |
|  | [SECURITY: DifferenceEngine: hide diff-multi-sameuser message for supressed revisions](https://gerrit.wikimedia.org/r/c/961935) | [mediawiki/core](https://gerrit.wikimedia.org/r/plugins/gitiles/mediawiki/core) | [REL1\_35](https://gerrit.wikimedia.org/r/plugins/gitiles/mediawiki/core/%2B/REL1_35) | +11 -1 |
|  | [SECURITY: DifferenceEngine: hide diff-multi-sameuser message for supressed revisions](https://gerrit.wikimedia.org/r/c/961948) | [mediawiki/core](https://gerrit.wikimedia.org/r/plugins/gitiles/mediawiki/core) | [REL1\_40](https://gerrit.wikimedia.org/r/plugins/gitiles/mediawiki/core/%2B/REL1_40) | +11 -1 |
|  | [SECURITY: DifferenceEngine: hide diff-multi-sameuser message for supressed revisions](https://gerrit.wikimedia.org/r/c/961941) | [mediawiki/core](https://gerrit.wikimedia.org/r/plugins/gitiles/mediawiki/core) | [REL1\_39](https://gerrit.wikimedia.org/r/plugins/gitiles/mediawiki/core/%2B/REL1_39) | +11 -1 |

[Customize query in gerrit](https://gerrit.wikimedia.org/r/#/q/bug:T341529)
# Related ObjectsSearch...

* Task Graph
* Mentions

|  |  | Status | Subtype | Assigned | Task |
| --- | --- | --- | --- | --- | --- |
|  |  | Resolved |  | [Reedy](/p/Reedy/) | T340864 [Release MediaWiki 1.35.12/1.39.5/1.40.1](/T340864) |
|  |  |  |  |  | Restricted Task |
|  |  | Resolved | Security | [Mstyles](/p/Mstyles/) | T341529 [CVE-2023-45362: diff-multi-sameuser ("X intermediate revisions by the same user not shown") ignores username suppression](/T341529) |

Mentioned In [T277920: Deleted revisions are not counted when viewing a diff](/T277920) Mentioned Here [T277920: Deleted revisions are not counted when viewing a diff](/T277920)
[T340864: Release MediaWiki 1.35.12/1.39.5/1.40.1](/T340864)
### Event Timeline

[ToBeFree](/p/ToBeFree/) created this task.[Jul 10 2023, 9:34 PM2023-07-10 21:34:43 (UTC+0)](#9003463)Restricted Application added a subscriber: [Aklapper](/p/Aklapper/).  · [View Herald Transcript](/herald/transcript/5454613/)[Jul 10 2023, 9:34 PM2023-07-10 21:34:44 (UTC+0)](#9003473)[ToBeFree](/p/ToBeFree/) updated the task description. [(Show Details)](/transactions/detail/PHID-XACT-TASK-7z5dnqs72x7fhyt/)[Jul 10 2023, 9:44 PM2023-07-10 21:44:15 (UTC+0)](#9003499)[ToBeFree](/p/ToBeFree/) added subscribers: [MusikAnimal](/p/MusikAnimal/), [Barkeep49](/p/Barkeep49/).[MusikAnimal](/p/MusikAnimal/) added a project: [MediaWiki-Revision-deletion](/tag/mediawiki-revision-deletion/).[Jul 10 2023, 9:58 PM2023-07-10 21:58:53 (UTC+0)](#9003542)[MusikAnimal](/p/MusikAnimal/) added a project: [MediaWiki-Page-diffs](/tag/mediawiki-page-diffs/).[sbassett](/p/sbassett/) subscribed.[Jul 18 2023, 6:14 PM2023-07-18 18:14:49 (UTC+0)](#9024916)[sbassett](/p/sbassett/) assigned this task to [Mstyles](/p/Mstyles/).[Jul 18 2023, 6:18 PM2023-07-18 18:18:17 (UTC+0)](#9024934)[sbassett](/p/sbassett/) added a comment.Edited · [Jul 18 2023, 9:02 PM2023-07-18 21:02:30 (UTC+0)](#9025775)Comment Actions

Chatting with [@Mstyles](/p/Mstyles/) a bit, the issue seems to be from the counts being generated [here within DifferenceEngine.php](https://github.com/wikimedia/mediawiki/blob/bb40716bdae550b946c0c566407a410e31b6332e/includes/diff/DifferenceEngine.php#L1737-L1755), which is calling [countRevisionsBetween](https://github.com/wikimedia/mediawiki/blob/bb40716bdae550b946c0c566407a410e31b6332e/includes/Revision/RevisionStore.php#L3304-L3359) and [getAuthorsBetween](https://github.com/wikimedia/mediawiki/blob/bb40716bdae550b946c0c566407a410e31b6332e/includes/Revision/RevisionStore.php#L3193-L3268). $nEdits should likely be decremented for each revision where the user was suppressed. This might involve refactoring this a bit to instead use getRevisionIdsBetween and getRevisionById to check for whether the relevant user for the revision was suppressed or not.

[sbassett](/p/sbassett/) changed the task status from Open to In Progress.[Jul 18 2023, 9:02 PM2023-07-18 21:02:53 (UTC+0)](#9025776)[sbassett](/p/sbassett/) triaged this task as Medium priority.[sbassett](/p/sbassett/) moved this task from [Incoming](/project/board/1179/) to [In Progress](/project/board/1179/) on the [Security-Team](/tag/security-team/) board.[sbassett](/p/sbassett/) added a project: [Vuln-Infoleak](/tag/vuln-infoleak/).[sbassett](/p/sbassett/) added a project: [SecTeam-Processed](/tag/secteam-processed/).[Jul 18 2023, 9:20 PM2023-07-18 21:20:34 (UTC+0)](#9025857)[Mstyles](/p/Mstyles/) added a comment.[Aug 5 2023, 3:58 AM2023-08-05 03:58:43 (UTC+0)](#9071090)Comment Actions
```
From 2aefcccb125c3edab8b7f89d063a1e860540666e Mon Sep 17 00:00:00 2001
From: Maryum Styles <mstyles@wikimedia.org>
Date: Fri, 4 Aug 2023 20:47:35 -0700
Subject: [PATCH] DifferentEngine: hide diff-multi-sameuser message for
 supressed revisions

if username has been suppressed then diff-multi-sameuser message will not be displayed

Bug: T341529
---
 includes/diff/DifferenceEngine.php | 12 +++++++++++-
 1 file changed, 11 insertions(+), 1 deletion(-)

diff --git a/includes/diff/DifferenceEngine.php b/includes/diff/DifferenceEngine.php
index 9349186191..4cd48bf361 100644
--- a/includes/diff/DifferenceEngine.php
+++ b/includes/diff/DifferenceEngine.php
@@ -1734,12 +1734,22 @@ class DifferenceEngine extends ContextSource {

 		// Don't show the notice if too many rows must be scanned
 		// @todo show some special message for that case
-		$nEdits = $this->revisionStore->countRevisionsBetween(
+		$nEdits = 0;
+		$revisionIdList = $this->revisionStore->getRevisionIdsBetween(
 			$this->mNewPage->getArticleID(),
 			$oldRevRecord,
 			$newRevRecord,
 			1000
 		);
+		// only count revisions that are visible
+		if ( count( $revisionIdList ) > 0 ) {
+			foreach ( $revisionIdList as $revisionId ) {
+				$revision = $this->revisionStore->getRevisionById( $revisionId );
+				if ( $revision->getVisibility() == 0 ) {
+					$nEdits++;
+				}
+			}
+		}
 		if ( $nEdits > 0 && $nEdits <= 1000 ) {
 			// Use an invalid username to get the wiki's default gender (as fallback)
 			$newRevUserForGender = '[HIDDEN]';
--
2.40.0
```

I left out the suppression check since that is per user and not per revision. I tested, and any revisions that have been suppressed will not show the message, and revisions that are not suppressed will show the message. I think even if a user has suppression right, the suppressed revisions still should not show up for the diff-multi-sameuser message.

[sbassett](/p/sbassett/) added a comment.[Aug 8 2023, 10:30 PM2023-08-08 22:30:06 (UTC+0)](#9078888)Comment Actions

CR-1 for the above patch:

1. Subject should use [SECURITY] or SECURITY: as opposed to just [PATCH]
2. Subject should state "DifferenceEngine" as opposed to "DifferentEngine"
3. I'm not quite certain the subject and commit message describe what should be happening for the fix. We *do* want to display the diff-multi-sameuser message (and [the other two similar messages](https://github.com/wikimedia/mediawiki/blob/e9da71ed5fbc605334b6c5791490d3779b22a18f/languages/i18n/qqq.json#L1271-L1273)), we just want to reduce the edit count if a user for a given revision is suppress-deleted, for any performer or viewer who **does not** have appropriate rights.
4. The patch is very close, but after testing locally, the following conditional should be changed from:

```
if ( $revision->getVisibility() == 0 ) {
    $nEdits++;
}
```

to:

```
if ( $revision->getUser( RevisionRecord::FOR_THIS_USER, $this->getAuthority() ) ) {
    $nEdits++;
}
```

That way we deal with the specific issue of the whether or not the user was suppress-deleted for the revision and if the performer has the appropriate suppress rights to view such information (via testing either the truthy UserIdentity or falsey null returned by RevisionRecord->getUser).

One last note is that the [right](https://www.mediawiki.org/wiki/Manual%3AUser_rights) that gets checked for this is deletedhistory not viewsuppressed as I'd originally assumed. At least according to the relevant portions of [RevisionRecord->getUser](https://github.com/wikimedia/mediawiki/blob/e9da71ed5fbc605334b6c5791490d3779b22a18f/includes/Revision/RevisionRecord.php#L409) and [RevisionRecord::userCanBitfield](https://github.com/wikimedia/mediawiki/blob/e9da71ed5fbc605334b6c5791490d3779b22a18f/includes/Revision/RevisionRecord.php#L549-L556).

[Mstyles](/p/Mstyles/) added a comment.[Aug 10 2023, 8:25 PM2023-08-10 20:25:24 (UTC+0)](#9085311)Comment Actions

[@sbassett](/p/sbassett/) thank you for the feedbacks and links! I've updated the patch as seen below

```
From 547015b1dd66e7309def288943b4694b91f2a4eb Mon Sep 17 00:00:00 2001
From: Maryum Styles <mstyles@wikimedia.org>
Date: Fri, 4 Aug 2023 20:47:35 -0700
Subject: [SECURITY] DifferenceEngine: hide diff-multi-sameuser message for
 supressed revisions

reduce the edit count if a user for a given revision is suppress-deleted

Bug: T341529
---
 includes/diff/DifferenceEngine.php | 12 +++++++++++-
 1 file changed, 11 insertions(+), 1 deletion(-)

diff --git a/includes/diff/DifferenceEngine.php b/includes/diff/DifferenceEngine.php
index 9349186191..3ffdb780d2 100644
--- a/includes/diff/DifferenceEngine.php
+++ b/includes/diff/DifferenceEngine.php
@@ -1734,12 +1734,22 @@ class DifferenceEngine extends ContextSource {

 		// Don't show the notice if too many rows must be scanned
 		// @todo show some special message for that case
-		$nEdits = $this->revisionStore->countRevisionsBetween(
+		$nEdits = 0;
+		$revisionIdList = $this->revisionStore->getRevisionIdsBetween(
 			$this->mNewPage->getArticleID(),
 			$oldRevRecord,
 			$newRevRecord,
 			1000
 		);
+		// only count revisions that are visible
+		if ( count( $revisionIdList ) > 0 ) {
+			foreach ( $revisionIdList as $revisionId ) {
+				$revision = $this->revisionStore->getRevisionById( $revisionId );
+				if ( $revision->getUser( RevisionRecord::FOR_THIS_USER, $this->getAuthority() ) ) {
+					$nEdits++;
+				}
+			}
+		}
 		if ( $nEdits > 0 && $nEdits <= 1000 ) {
 			// Use an invalid username to get the wiki's default gender (as fallback)
 			$newRevUserForGender = '[HIDDEN]';
--
2.40.0
```
[sbassett](/p/sbassett/) added a comment.[Aug 10 2023, 8:34 PM2023-08-10 20:34:02 (UTC+0)](#9085317)Comment Actions

Ok, I think we should likely use SECURITY: instead of [SECURITY] since the latter doesn't play nicely in git log, etc. Sorry about that, I thought either would've been fine.

Anyhow, after that, CR+2 for security deployment. We can maybe polish this up and add a test during release.

[Mstyles](/p/Mstyles/) added a comment.[Aug 10 2023, 10:30 PM2023-08-10 22:30:32 (UTC+0)](#9085594)Comment Actions

[@sbassett](/p/sbassett/) I didn't see too many examples of tests that had suppressed revisions but I would be more than happy to work on a test for this. I'll deploy this on Monday with the subject updated as below.

```
From 547015b1dd66e7309def288943b4694b91f2a4eb Mon Sep 17 00:00:00 2001
From: Maryum Styles <mstyles@wikimedia.org>
Date: Fri, 4 Aug 2023 20:47:35 -0700
Subject: SECURITY: DifferenceEngine: hide diff-multi-sameuser message for
 supressed revisions

reduce the edit count if a user for a given revision is suppress-deleted

Bug: T341529
---
 includes/diff/DifferenceEngine.php | 12 +++++++++++-
 1 file changed, 11 insertions(+), 1 deletion(-)

diff --git a/includes/diff/DifferenceEngine.php b/includes/diff/DifferenceEngine.php
index 9349186191..3ffdb780d2 100644
--- a/includes/diff/DifferenceEngine.php
+++ b/includes/diff/DifferenceEngine.php
@@ -1734,12 +1734,22 @@ class DifferenceEngine extends ContextSource {

 		// Don't show the notice if too many rows must be scanned
 		// @todo show some special message for that case
-		$nEdits = $this->revisionStore->countRevisionsBetween(
+		$nEdits = 0;
+		$revisionIdList = $this->revisionStore->getRevisionIdsBetween(
 			$this->mNewPage->getArticleID(),
 			$oldRevRecord,
 			$newRevRecord,
 			1000
 		);
+		// only count revisions that are visible
+		if ( count( $revisionIdList ) > 0 ) {
+			foreach ( $revisionIdList as $revisionId ) {
+				$revision = $this->revisionStore->getRevisionById( $revisionId );
+				if ( $revision->getUser( RevisionRecord::FOR_THIS_USER, $this->getAuthority() ) ) {
+					$nEdits++;
+				}
+			}
+		}
 		if ( $nEdits > 0 && $nEdits <= 1000 ) {
 			// Use an invalid username to get the wiki's default gender (as fallback)
 			$newRevUserForGender = '[HIDDEN]';
--
2.40.0
```
[Mstyles](/p/Mstyles/) moved this task from [In Progress](/project/board/1179/) to [Security Patch To Deploy](/project/board/1179/) on the [Security-Team](/tag/security-team/) board.[Aug 10 2023, 10:32 PM2023-08-10 22:32:07 (UTC+0)](#9085597)[sbassett](/p/sbassett/) added a comment.[Aug 11 2023, 2:52 PM2023-08-11 14:52:27 (UTC+0)](#9086941)Comment Actions
> In [T341529#9085594](/T341529#9085594), [@Mstyles](/p/Mstyles/) wrote:
>
> [@sbassett](/p/sbassett/) I didn't see too many examples of tests that had suppressed revisions but I would be more than happy to work on a test for this. I'll deploy this on Monday with the subject updated as below.

Yes, tests definitely aren't necessary to get a security patch deployed. But we can look into adding them when this eventually gets backported during the next security release ([T340864](/T340864)).

[Mstyles](/p/Mstyles/) moved this task from [Security Patch To Deploy](/project/board/1179/) to [Waiting](/project/board/1179/) on the [Security-Team](/tag/security-team/) board.[Aug 14 2023, 9:38 PM2023-08-14 21:38:12 (UTC+0)](#9091602)Comment Actions
> In [T341529#9085594](/T341529#9085594), [@Mstyles](/p/Mstyles/) wrote:
>
> [@sbassett](/p/sbassett/) I didn't see too many examples of tests that had suppressed revisions but I would be more than happy to work on a test for this. I'll deploy this on Monday with the subject updated as below.
>
> ```
> From 547015b1dd66e7309def288943b4694b91f2a4eb Mon Sep 17 00:00:00 2001
> From: Maryum Styles <mstyles@wikimedia.org>
> Date: Fri, 4 Aug 2023 20:47:35 -0700
> Subject: SECURITY: DifferenceEngine: hide diff-multi-sameuser message for
>  supressed revisions
>
> reduce the edit count if a user for a given revision is suppress-deleted
>
> Bug: T341529
> ---
>  includes/diff/DifferenceEngine.php | 12 +++++++++++-
>  1 file changed, 11 insertions(+), 1 deletion(-)
>
> diff --git a/includes/diff/DifferenceEngine.php b/includes/diff/DifferenceEngine.php
> index 9349186191..3ffdb780d2 100644
> --- a/includes/diff/DifferenceEngine.php
> +++ b/includes/diff/DifferenceEngine.php
> @@ -1734,12 +1734,22 @@ class DifferenceEngine extends ContextSource {
>
>  		// Don't show the notice if too many rows must be scanned
>  		// @todo show some special message for that case
> -		$nEdits = $this->revisionStore->countRevisionsBetween(
> +		$nEdits = 0;
> +		$revisionIdList = $this->revisionStore->getRevisionIdsBetween(
>  			$this->mNewPage->getArticleID(),
>  			$oldRevRecord,
>  			$newRevRecord,
>  			1000
>  		);
> +		// only count revisions that are visible
> +		if ( count( $revisionIdList ) > 0 ) {
> +			foreach ( $revisionIdList as $revisionId ) {
> +				$revision = $this->revisionStore->getRevisionById( $revisionId );
> +				if ( $revision->getUser( RevisionRecord::FOR_THIS_USER, $this->getAuthority() ) ) {
> +					$nEdits++;
> +				}
> +			}
> +		}
>  		if ( $nEdits > 0 && $nEdits <= 1000 ) {
>  			// Use an invalid username to get the wiki's default gender (as fallback)
>  			$newRevUserForGender = '[HIDDEN]';
> --
> 2.40.0
> ```

[deployed](https://sal.toolforge.org/log/lcn59YkBhuQtenzv1b0P)

[Mstyles](/p/Mstyles/) added a parent task: Restricted Task.[Aug 14 2023, 9:39 PM2023-08-14 21:39:04 (UTC+0)](#9091605)[Mstyles](/p/Mstyles/) moved this task from [Waiting](/project/board/1179/) to [Watching](/project/board/1179/) on the [Security-Team](/tag/security-team/) board.[Aug 14 2023, 9:41 PM2023-08-14 21:41:39 (UTC+0)](#9091613)[Reedy](/p/Reedy/) added projects: [MW-1.35-release](/tag/mw-1.35-release/), [MW-1.39-release](/tag/mw-1.39-release/), [MW-1.40-release](/tag/mw-1.40-release/).[Sep 27 2023, 10:46 AM2023-09-27 10:46:44 (UTC+0)](#9202599)[Reedy](/p/Reedy/) added a subscriber: [gerritbot](/p/gerritbot/).[Sep 27 2023, 12:09 PM2023-09-27 12:09:43 (UTC+0)](#9202856)

[Reedy](/p/Reedy/) closed this task as Resolved.[Sep 27 2023, 12:27 PM2023-09-27 12:27:54 (UTC+0)](#9202979)[Reedy](/p/Reedy/) subscribed.Comment Actions

Patch applies cleanly to REL1\_35/REL1\_39/REL1\_40/master.

Closing for ease of tracking!

[gerritbot](/p/gerritbot/) added a comment.[Sep 28 2023, 11:29 PM2023-09-28 23:29:33 (UTC+0)](#9208992)Comment Actions

Change 961935 had a related patch set uploaded (by Reedy; author: Mstyles):

[mediawiki/core@REL1\_35] SECURITY: DifferenceEngine: hide diff-multi-sameuser message for supressed revisions

<https://gerrit.wikimedia.org/r/961935>

[gerritbot](/p/gerritbot/) added a project: [Patch-For-Review](/tag/patch-for-review/).[Sep 28 2023, 11:29 PM2023-09-28 23:29:38 (UTC+0)](#9208993)Comment Actions

Change 961941 had a related patch set uploaded (by Reedy; author: Mstyles):

[mediawiki/core@REL1\_39] SECURITY: DifferenceEngine: hide diff-multi-sameuser message for supressed revisions

<https://gerrit.wikimedia.org/r/961941>

[gerritbot](/p/gerritbot/) added a comment.[Sep 28 2023, 11:31 PM2023-09-28 23:31:25 (UTC+0)](#9209007)Comment Actions

Change 961948 had a related patch set uploaded (by Reedy; author: Mstyles):

[mediawiki/core@REL1\_40] SECURITY: DifferenceEngine: hide diff-multi-sameuser message for supressed revisions

<https://gerrit.wikimedia.org/r/961948>

[gerritbot](/p/gerritbot/) added a comment.[Sep 28 2023, 11:32 PM2023-09-28 23:32:37 (UTC+0)](#9209014)Comment Actions

Change 961955 had a related patch set uploaded (by Reedy; author: Mstyles):

[mediawiki/core@master] SECURITY: DifferenceEngine: hide diff-multi-sameuser message for supressed revisions

<https://gerrit.wikimedia.org/r/961955>

[gerritbot](/p/gerritbot/) added a comment.[Sep 28 2023, 11:50 PM2023-09-28 23:50:32 (UTC+0)](#9209052)Comment Actions

Change 961941 **merged** by jenkins-bot:

[mediawiki/core@REL1\_39] SECURITY: DifferenceEngine: hide diff-multi-sameuser message for supressed revisions

<https://gerrit.wikimedia.org/r/961941>

[gerritbot](/p/gerritbot/) added a comment.[Sep 29 2023, 12:10 AM2023-09-29 00:10:49 (UTC+0)](#9209104)Comment Actions

Change 961948 **merged** by jenkins-bot:

[mediawiki/core@REL1\_40] SECURITY: DifferenceEngine: hide diff-multi-sameuser message for supressed revisions

<https://gerrit.wikimedia.org/r/961948>

[gerritbot](/p/gerritbot/) added a comment.[Sep 29 2023, 12:20 AM2023-09-29 00:20:57 (UTC+0)](#9209109)Comment Actions

Change 961935 **merged** by Jforrester:

[mediawiki/core@REL1\_35] SECURITY: DifferenceEngine: hide diff-multi-sameuser message for supressed revisions

<https://gerrit.wikimedia.org/r/961935>

[gerritbot](/p/gerritbot/) added a comment.[Sep 29 2023, 12:40 AM2023-09-29 00:40:29 (UTC+0)](#9209168)Comment Actions

Change 961955 **merged** by jenkins-bot:

[mediawiki/core@master] SECURITY: DifferenceEngine: hide diff-multi-sameuser message for supressed revisions

<https://gerrit.wikimedia.org/r/961955>

[Reedy](/p/Reedy/) renamed this task from diff-multi-sameuser ("X intermediate revisions by the same user not shown") ignores username suppression to CVE-2023-45362: diff-multi-sameuser ("X intermediate revisions by the same user not shown") ignores username suppression.[Oct 9 2023, 1:31 PM2023-10-09 13:31:08 (UTC+0)](#9235556)[sbassett](/p/sbassett/) changed Author Affiliation from N/A to Wikimedia Communities.[Oct 12 2023, 7:32 PM2023-10-12 19:32:37 (UTC+0)](#9247692)[sbassett](/p/sbassett/) changed the visibility from "[Custom Policy](/transactions/old/PHID-XACT-TASK-e55yxsrgl2sunfr/)" to "Public (No Login Required)".[sbassett](/p/sbassett/) changed the edit policy from "[Custom Policy](/transactions/old/PHID-XACT-TASK-qpo5owlefzm7d5s/)" to "All Users".[sbassett](/p/sbassett/) changed Risk Rating from N/A to Medium.[Maintenance\_bot](/p/Maintenance_bot/) removed a project: [Patch-For-Review](/tag/patch-for-review/).[Oct 12 2023, 8:11 PM2023-10-12 20:11:02 (UTC+0)](#9247793)[matmarex](/p/matmarex/) mentioned this in [T277920: Deleted revisions are not counted when viewing a diff](/T277920).[Nov 29 2024, 10:38 PM2024-11-29 22:38:56 (UTC+0)](#10368812)[matmarex](/p/matmarex/) subscribed.[Nov 29 2024, 10:50 PM2024-11-29 22:50:15 (UTC+0)](#10368816)Comment Actions

I think this bug report may have been a misunderstanding. The diff-multi-sameuser messages does not ignore username suppression, but it ignores all revisions with suppressed usernames.

Going back to the original reproduction steps, you will get the same behavior (message saying "2 intermediate revisions by the same user not shown") when the suppressed diffs (2 and 3) are created by the same user as diff 1, or by different users. It is not leaking the authors of those diffs, it's just not counting their authors. This problem is better described in the comment I just wrote on bug [T277920](/T277920).

You also get the same behavior in both cases today if you revert the security patch from this task (this may not have been the case when it was written, I didn't check).

Content licensed under Creative Commons Attribution-ShareAlike (CC BY-SA) 4.0 unless otherwise noted; code licensed under GNU General Public License (GPL) 2.0 or later and other open source licenses. By using this site, you agree to the Terms of Use, Privacy Policy, and Code of Conduct. · [Wikimedia Foundation](https://wikimediafoundation.org/) · [Privacy Policy](https://foundation.wikimedia.org/wiki/Special%3AMyLanguage/Policy%3ANon-wiki_privacy_policy) · [Code of Conduct](https://www.mediawiki.org/wiki/Special%3AMyLanguage/Code_of_Conduct) · [Terms of Use](https://foundation.wikimedia.org/wiki/Special%3AMyLanguage/Policy%3ATerms_of_Use/Phabricator) · [Disclaimer](https://foundation.wikimedia.org/wiki/Special%3AMyLanguage/Policy%3AGeneral_disclaimer) · [CC-BY-SA](https://creativecommons.org/licenses/by-sa/4.0/) · [GPL](https://www.gnu.org/licenses/old-licenses/gpl-2.0.html) · [Credits](https://www.mediawiki.org/wiki/Phabricator/Credits)
