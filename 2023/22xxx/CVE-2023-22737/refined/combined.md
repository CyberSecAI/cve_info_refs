=== Content from github.com_fcf12066_20250114_182333.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fwireapp%2Fwire-server%2Fcommit%2F494a6881f5895d4ed9e5d011455242be0d5e6223)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fwireapp%2Fwire-server%2Fcommit%2F494a6881f5895d4ed9e5d011455242be0d5e6223)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=wireapp%2Fwire-server)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[wireapp](/wireapp)
/
**[wire-server](/wireapp/wire-server)**
Public

* [Notifications](/login?return_to=%2Fwireapp%2Fwire-server) You must be signed in to change notification settings
* [Fork
  325](/login?return_to=%2Fwireapp%2Fwire-server)
* [Star
   2.6k](/login?return_to=%2Fwireapp%2Fwire-server)

* [Code](/wireapp/wire-server)
* [Issues
  44](/wireapp/wire-server/issues)
* [Pull requests
  94](/wireapp/wire-server/pulls)
* [Discussions](/wireapp/wire-server/discussions)
* [Actions](/wireapp/wire-server/actions)
* [Security](/wireapp/wire-server/security)
* [Insights](/wireapp/wire-server/pulse)

Additional navigation options

* [Code](/wireapp/wire-server)
* [Issues](/wireapp/wire-server/issues)
* [Pull requests](/wireapp/wire-server/pulls)
* [Discussions](/wireapp/wire-server/discussions)
* [Actions](/wireapp/wire-server/actions)
* [Security](/wireapp/wire-server/security)
* [Insights](/wireapp/wire-server/pulse)

## Commit

[Permalink](/wireapp/wire-server/commit/494a6881f5895d4ed9e5d011455242be0d5e6223)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

[SQSERVICES-1801] Prevent dead bots in database ([#2870](https://github.com/wireapp/wire-server/pull/2870))

[Browse files](/wireapp/wire-server/tree/494a6881f5895d4ed9e5d011455242be0d5e6223)
Browse the repository at this point in the history

* Loading branch information

[![@battermann](https://avatars.githubusercontent.com/u/3968185?s=40&v=4)](/battermann)

[battermann](/wireapp/wire-server/commits?author=battermann "View all commits by battermann")
committed
Dec 9, 2022

1 parent
[a2bf533](/wireapp/wire-server/commit/a2bf5332378fbed3e1ff606f468c86e5248fb536)

commit 494a688

 Show file tree

 Hide file tree

Showing
**5 changed files**
with
**101 additions**
and
**6 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* changelog.d/3-bug-fixes

  + changelog.d/3-bug-fixes/pr-2870
    [pr-2870](#diff-e2722de31171c2635e0b2a6a88c55d79ee1189d44550d4f1cbef95b898d1a816)
* services

  + brig

    - src/Brig/Provider

      * services/brig/src/Brig/Provider/API.hs
        [API.hs](#diff-ac06f5535fd62c012cf3ae1dc77b40d754e6efd5dbd5b4827e19c251d17b85e1)
    - test/integration/API

      * services/brig/test/integration/API/Provider.hs
        [Provider.hs](#diff-88279fd1a7a2a1fbf23a5571dc97629d245fbf20ab938eb80518c120ebc7171f)
      * Team

        + services/brig/test/integration/API/Team/Util.hs
          [Util.hs](#diff-1febeec488f220678b1f110143ae66ee4dec8d66bbe4d63e0a0d5d6d9c83d413)
  + galley/src/Galley/API

    - services/galley/src/Galley/API/Update.hs
      [Update.hs](#diff-259be1b8909f30421ab02e60765d6e90ae68426b95c3aa8303c57945dc84dd37)

## There are no files selected for viewing

1 change: 1 addition & 0 deletions

1
[changelog.d/3-bug-fixes/pr-2870](#diff-e2722de31171c2635e0b2a6a88c55d79ee1189d44550d4f1cbef95b898d1a816 "changelog.d/3-bug-fixes/pr-2870")

Show comments

[View file](/wireapp/wire-server/blob/494a6881f5895d4ed9e5d011455242be0d5e6223/changelog.d/3-bug-fixes/pr-2870)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -0,0 +1 @@ |
|  |  | Prevention of storing unnecessary data in the database if adding a bot to a conversation fails. |

19 changes: 19 additions & 0 deletions

19
[services/brig/src/Brig/Provider/API.hs](#diff-ac06f5535fd62c012cf3ae1dc77b40d754e6efd5dbd5b4827e19c251d17b85e1 "services/brig/src/Brig/Provider/API.hs")

Show comments

[View file](/wireapp/wire-server/blob/494a6881f5895d4ed9e5d011455242be0d5e6223/services/brig/src/Brig/Provider/API.hs)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -898,6 +898,14 @@ addBot zuid zcon cid add = do |
|  |  | let sid = addBotService add |
|  |  | -- Get the conversation and check preconditions |
|  |  | cnv <- lift (liftSem $ GalleyProvider.getConv zuid cid) >>= maybeConvNotFound |
|  |  | -- Check that the user is a conversation admin and therefore is allowed to add a bot to this conversation. |
|  |  | -- Note that this precondition is also checked in the internal galley API, |
|  |  | -- but by having this check here we prevent any (useless) data to be written to the database |
|  |  | -- as well as the unnecessary creation of the bot via the external service API call. |
|  |  | -- However, in case we refine the roles model in the future, this check might not be granular enough. |
|  |  | -- In that case we should rather do an internal call to galley to check for the correct permissions. |
|  |  | -- Also see `removeBot` for a similar check. |
|  |  | guardConvAdmin cnv |
|  |  | let mems = cnvMembers cnv |
|  |  | unless (cnvType cnv == RegularConv) $ |
|  |  | throwStd invalidConv |
| Expand Down  Expand Up | | @@ -974,6 +982,12 @@ removeBot :: Members '[GalleyProvider] r => UserId -> ConnId -> ConvId -> BotId |
|  |  | removeBot zusr zcon cid bid = do |
|  |  | -- Get the conversation and check preconditions |
|  |  | cnv <- lift (liftSem $ GalleyProvider.getConv zusr cid) >>= maybeConvNotFound |
|  |  | -- Check that the user is a conversation admin and therefore is allowed to remove a bot from the conversation. |
|  |  | -- Note that this precondition is also checked in the internal galley API. |
|  |  | -- However, in case we refine the roles model in the future, this check might not be granular enough. |
|  |  | -- In that case we should rather do an internal call to galley to check for the correct permissions. |
|  |  | -- Also see `addBot` for a similar check. |
|  |  | guardConvAdmin cnv |
|  |  | let mems = cnvMembers cnv |
|  |  | unless (cnvType cnv == RegularConv) $ |
|  |  | throwStd invalidConv |
| Expand All | | @@ -985,6 +999,11 @@ removeBot zusr zcon cid bid = do |
|  |  | Just \_ -> do |
|  |  | lift $ Public.RemoveBotResponse <$$> wrapHttpClient (deleteBot zusr (Just zcon) bid cid) |
|  |  |  |
|  |  | guardConvAdmin :: Conversation -> ExceptT Error (AppT r) () |
|  |  | guardConvAdmin conv = do |
|  |  | let selfMember = cmSelf . cnvMembers $ conv |
|  |  | unless (memConvRoleName selfMember == roleNameWireAdmin) $ throwStd accessDenied |
|  |  |  |
|  |  | -------------------------------------------------------------------------------- |
|  |  | -- Bot API |
|  |  |  |
| Expand Down | |  |

50 changes: 50 additions & 0 deletions

50
[services/brig/test/integration/API/Provider.hs](#diff-88279fd1a7a2a1fbf23a5571dc97629d245fbf20ab938eb80518c120ebc7171f "services/brig/test/integration/API/Provider.hs")

Show comments

[View file](/wireapp/wire-server/blob/494a6881f5895d4ed9e5d011455242be0d5e6223/services/brig/test/integration/API/Provider.hs)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -148,6 +148,7 @@ tests dom conf p db b c g = do |
|  |  | testGroup |
|  |  | "bot-teams" |
|  |  | [ test p "add-remove" $ testAddRemoveBotTeam conf db b g c, |
|  |  | test p "add-remove-access-denied-for-non-conv-admin" $ testNonConvAdminCannotAddRemoveBot conf db b g, |
|  |  | test p "team-only" $ testBotTeamOnlyConv conf db b g c, |
|  |  | test p "message" $ testMessageBotTeam conf db b g c, |
|  |  | test p "delete conv" $ testDeleteConvBotTeam conf db b g c, |
| Expand Down  Expand Up | | @@ -566,6 +567,30 @@ testAddBotBlocked config db brig galley = withTestService config db brig defServ |
|  |  | const 403 === statusCode |
|  |  | const (Just "access-denied") === fmap Error.label . responseJsonMaybe |
|  |  |  |
|  |  | testNonConvAdminCannotAddRemoveBot :: Config -> DB.ClientState -> Brig -> Galley -> Http () |
|  |  | testNonConvAdminCannotAddRemoveBot config db brig galley = withTestService config db brig defServiceApp $ \sref \_buf -> do |
|  |  | let pid = sref ^. serviceRefProvider |
|  |  | let sid = sref ^. serviceRefId |
|  |  | (ownerId, tid) <- Team.createUserWithTeam brig |
|  |  | member <- Team.createTeamMember brig galley ownerId tid fullPermissions |
|  |  | let memberId = userId member |
|  |  | whitelistService brig ownerId tid pid sid |
|  |  | cid <- Team.createTeamConvWithRole roleNameWireMember galley tid ownerId [memberId] Nothing |
|  |  | addBot brig memberId pid sid cid !!! do |
|  |  | const 403 === statusCode |
|  |  | const (Just "access-denied") === fmap Error.label . responseJsonMaybe |
|  |  | rs <- responseJsonError =<< addBot brig ownerId pid sid cid <!! const 201 === statusCode |
|  |  | let bid = rsAddBotId rs |
|  |  | buid = botUserId bid |
|  |  | getUser brig ownerId buid !!! const 200 === statusCode |
|  |  | removeBot brig memberId cid bid !!! do |
|  |  | const 403 === statusCode |
|  |  | const (Just "access-denied") === fmap Error.label . responseJsonMaybe |
|  |  | -- also check the internal galley API |
|  |  | removeBotInternal galley memberId cid bid !!! do |
|  |  | const 403 === statusCode |
|  |  | const (Just "action-denied") === fmap Error.label . responseJsonMaybe |
|  |  |  |
|  |  | testGetBotConvBlocked :: Config -> DB.ClientState -> Brig -> Galley -> Cannon -> Http () |
|  |  | testGetBotConvBlocked config db brig galley cannon = withTestService config db brig defServiceApp $ \sref buf -> do |
|  |  | (user1, userId -> u2, \_, tid, cid, pid, sid) <- prepareBotUsersTeam brig galley sref |
| Expand Down  Expand Up | | @@ -1305,6 +1330,31 @@ removeBot brig uid cid bid = |
|  |  | . header "Z-User" (toByteString' uid) |
|  |  | . header "Z-Connection" "conn" |
|  |  |  |
|  |  | data RemoveBot = RemoveBot |
|  |  | { \_rmBotConv :: !ConvId, |
|  |  | \_rmBotId :: !BotId |
|  |  | } |
|  |  |  |
|  |  | instance ToJSON RemoveBot where |
|  |  | toJSON a = |
|  |  | object |
|  |  | [ "conversation" .= \_rmBotConv a, |
|  |  | "bot" .= \_rmBotId a |
|  |  | ] |
|  |  |  |
|  |  | removeBotInternal :: |
|  |  | Galley -> |
|  |  | UserId -> |
|  |  | ConvId -> |
|  |  | BotId -> |
|  |  | Http ResponseLBS |
|  |  | removeBotInternal galley uid cid bid = |
|  |  | delete $ |
|  |  | galley |
|  |  | . paths ["i", "bots"] |
|  |  | . header "Z-User" (toByteString' uid) |
|  |  | . Bilge.json (RemoveBot cid bid) |
|  |  |  |
|  |  | createConv :: |
|  |  | Galley -> |
|  |  | UserId -> |
| Expand Down | |  |

18 changes: 16 additions & 2 deletions

18
[services/brig/test/integration/API/Team/Util.hs](#diff-1febeec488f220678b1f110143ae66ee4dec8d66bbe4d63e0a0d5d6d9c83d413 "services/brig/test/integration/API/Team/Util.hs")

Show comments

[View file](/wireapp/wire-server/blob/494a6881f5895d4ed9e5d011455242be0d5e6223/services/brig/test/integration/API/Team/Util.hs)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -214,10 +214,24 @@ updatePermissions from tid (to, perm) galley = |
|  |  | changeMember = Member.mkNewTeamMember to perm Nothing |
|  |  |  |
|  |  | createTeamConv :: HasCallStack => Galley -> TeamId -> UserId -> [UserId] -> Maybe Milliseconds -> Http ConvId |
|  |  | createTeamConv g tid u us mtimer = do |
|  |  | createTeamConv = createTeamConvWithRole roleNameWireAdmin |
|  |  |  |
|  |  | createTeamConvWithRole :: HasCallStack => RoleName -> Galley -> TeamId -> UserId -> [UserId] -> Maybe Milliseconds -> Http ConvId |
|  |  | createTeamConvWithRole role g tid u us mtimer = do |
|  |  | let tinfo = Just $ ConvTeamInfo tid |
|  |  | let conv = |
|  |  | NewConv us [] Nothing (Set.fromList []) Nothing tinfo mtimer Nothing roleNameWireAdmin ProtocolProteusTag Nothing |
|  |  | NewConv |
|  |  | us |
|  |  | [] |
|  |  | Nothing |
|  |  | (Set.fromList []) |
|  |  | Nothing |
|  |  | tinfo |
|  |  | mtimer |
|  |  | Nothing |
|  |  | role |
|  |  | ProtocolProteusTag |
|  |  | Nothing |
|  |  | r <- |
|  |  | post |
|  |  | ( g |
| Expand Down | |  |

19 changes: 15 additions & 4 deletions

19
[services/galley/src/Galley/API/Update.hs](#diff-259be1b8909f30421ab02e60765d6e90ae68426b95c3aa8303c57945dc84dd37 "services/galley/src/Galley/API/Update.hs")

Show comments

[View file](/wireapp/wire-server/blob/494a6881f5895d4ed9e5d011455242be0d5e6223/services/galley/src/Galley/API/Update.hs)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -1571,6 +1571,8 @@ addBot lusr zcon b = do |
|  |  | unless (tUnqualified lusr `isMember` users) $ throwS @'ConvNotFound |
|  |  | ensureGroupConversation c |
|  |  | self <- getSelfMemberFromLocals (tUnqualified lusr) users |
|  |  | -- Note that in brig from where this internal handler is called, we additionally check for conversation admin role. |
|  |  | -- Remember to change this if we ever want to allow non admins to add bots. |
|  |  | ensureActionAllowed SAddConversationMember self |
|  |  | unless (any ((== b ^. addBotId) . botMemId) bots) $ do |
|  |  | let botId = qualifyAs lusr (botUserId (b ^. addBotId)) |
| Expand All | | @@ -1587,7 +1589,8 @@ rmBotH :: |
|  |  | Input (Local ()), |
|  |  | Input UTCTime, |
|  |  | MemberStore, |
|  |  | WaiRoutes |
|  |  | WaiRoutes, |
|  |  | ErrorS ('ActionDenied 'RemoveConversationMember) |
|  |  | ] |
|  |  | r => |
|  |  | UserId ::: Maybe ConnId ::: JsonRequest RemoveBot -> |
| Expand All | | @@ -1605,7 +1608,8 @@ rmBot :: |
|  |  | ExternalAccess, |
|  |  | GundeckAccess, |
|  |  | Input UTCTime, |
|  |  | MemberStore |
|  |  | MemberStore, |
|  |  | ErrorS ('ActionDenied 'RemoveConversationMember) |
|  |  | ] |
|  |  | r => |
|  |  | Local UserId -> |
| Expand All | | @@ -1615,10 +1619,17 @@ rmBot :: |
|  |  | rmBot lusr zcon b = do |
|  |  | c <- |
|  |  | E.getConversation (b ^. rmBotConv) >>= noteS @'ConvNotFound |
|  |  | let lcnv = qualifyAs lusr (Data.convId c) |
|  |  | let (bots, users) = localBotsAndUsers (Data.convLocalMembers c) |
|  |  | unless (tUnqualified lusr `isMember` Data.convLocalMembers c) $ |
|  |  | throwS @'ConvNotFound |
|  |  | let (bots, users) = localBotsAndUsers (Data.convLocalMembers c) |
|  |  | -- A bot can remove itself (which will internally be triggered when a service is deleted), |
|  |  | -- otherwise we have to check for the correct permissions |
|  |  | unless (botUserId (b ^. rmBotId) == tUnqualified lusr) $ do |
|  |  | -- Note that in brig from where this internal handler is called, we additionally check for conversation admin role. |
|  |  | -- Remember to change this if we ever want to allow non admins to remove bots. |
|  |  | self <- getSelfMemberFromLocals (tUnqualified lusr) users |
|  |  | ensureActionAllowed SRemoveConversationMember self |
|  |  | let lcnv = qualifyAs lusr (Data.convId c) |
|  |  | if not (any ((== b ^. rmBotId) . botMemId) bots) |
|  |  | then pure Unchanged |
|  |  | else do |
| Expand Down | |  |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `494a688`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fwireapp%2Fwire-server%2Fcommit%2F494a6881f5895d4ed9e5d011455242be0d5e6223) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_292d346d_20250114_182337.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fwireapp%2Fwire-server%2Fsecurity%2Fadvisories%2FGHSA-xmjc-c6w3-pcp4)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fwireapp%2Fwire-server%2Fsecurity%2Fadvisories%2FGHSA-xmjc-c6w3-pcp4)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Frepos%2Fadvisories%2Fshow&source=header-repo&source_repo=wireapp%2Fwire-server)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[wireapp](/wireapp)
/
**[wire-server](/wireapp/wire-server)**
Public

* [Notifications](/login?return_to=%2Fwireapp%2Fwire-server) You must be signed in to change notification settings
* [Fork
  325](/login?return_to=%2Fwireapp%2Fwire-server)
* [Star
   2.6k](/login?return_to=%2Fwireapp%2Fwire-server)

* [Code](/wireapp/wire-server)
* [Issues
  44](/wireapp/wire-server/issues)
* [Pull requests
  94](/wireapp/wire-server/pulls)
* [Discussions](/wireapp/wire-server/discussions)
* [Actions](/wireapp/wire-server/actions)
* [Security](/wireapp/wire-server/security)
* [Insights](/wireapp/wire-server/pulse)

Additional navigation options

* [Code](/wireapp/wire-server)
* [Issues](/wireapp/wire-server/issues)
* [Pull requests](/wireapp/wire-server/pulls)
* [Discussions](/wireapp/wire-server/discussions)
* [Actions](/wireapp/wire-server/actions)
* [Security](/wireapp/wire-server/security)
* [Insights](/wireapp/wire-server/pulse)

# Unauthorized removal of Bots from Conversations

Moderate

[comawill](/comawill)
published
GHSA-xmjc-c6w3-pcp4
Jan 26, 2023

## Package

wire-server
(wire)

## Affected versions

<= 2022-11-03

## Patched versions

>= 2022-12-09 or >=4.29.0

## Description

### Impact

Due to a missing permissions check, every member of a Conversation can remove a Bot from this Conversation.

Only Conversation admins should be able to remove Bots, regular Conversations are not allowed to do so.

### Patches

* The issue is fixed in wire-server 2022-12-09 and is already deployed on all Wire managed services.
* On-premise instances of wire-server need to be updated to 2022-12-09/Chart 4.29.0, so that their backends are no longer affected.

### Workarounds

* No workarounds known

### For more information

If you have any questions or comments about this advisory feel free to email us at vulnerability-report@wire.com

### Severity

Moderate

6.5

# CVSS overall score

 This score calculates overall vulnerability severity from 0 to 10 and is based on the Common Vulnerability Scoring System (CVSS).

 / 10

#### CVSS v3 base metrics

Attack vector
Network

Attack complexity
Low

Privileges required
Low

User interaction
None

Scope
Unchanged

Confidentiality
None

Integrity
None

Availability
High

Learn more about base metrics

# CVSS v3 base metrics

Attack vector:
More severe the more the remote (logically and physically) an attacker can be in order to exploit the vulnerability.

Attack complexity:
More severe for the least complex attacks.

Privileges required:
More severe if no privileges are required.

User interaction:
More severe when no user interaction is required.

Scope:
More severe when a scope change occurs, e.g. one vulnerable component impacts resources in components beyond its security scope.

Confidentiality:
More severe when loss of data confidentiality is highest, measuring the level of data access available to an unauthorized user.

Integrity:
More severe when loss of data integrity is the highest, measuring the consequence of data modification possible by an unauthorized user.

Availability:
More severe when the loss of impacted component availability is highest.

CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:U/C:N/I:N/A:H

### CVE ID

CVE-2023-22737

### Weaknesses

[CWE-280](/advisories?query=cwe%3A280)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_a10b939b_20250114_182336.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fwireapp%2Fwire-server%2Fpull%2F2870)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fwireapp%2Fwire-server%2Fpull%2F2870)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fpull_requests_fragments%2Fpull_request_layout&source=header-repo&source_repo=wireapp%2Fwire-server)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[wireapp](/wireapp)
/
**[wire-server](/wireapp/wire-server)**
Public

* [Notifications](/login?return_to=%2Fwireapp%2Fwire-server) You must be signed in to change notification settings
* [Fork
  325](/login?return_to=%2Fwireapp%2Fwire-server)
* [Star
   2.6k](/login?return_to=%2Fwireapp%2Fwire-server)

* [Code](/wireapp/wire-server)
* [Issues
  44](/wireapp/wire-server/issues)
* [Pull requests
  94](/wireapp/wire-server/pulls)
* [Discussions](/wireapp/wire-server/discussions)
* [Actions](/wireapp/wire-server/actions)
* [Security](/wireapp/wire-server/security)
* [Insights](/wireapp/wire-server/pulse)

Additional navigation options

* [Code](/wireapp/wire-server)
* [Issues](/wireapp/wire-server/issues)
* [Pull requests](/wireapp/wire-server/pulls)
* [Discussions](/wireapp/wire-server/discussions)
* [Actions](/wireapp/wire-server/actions)
* [Security](/wireapp/wire-server/security)
* [Insights](/wireapp/wire-server/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fwireapp%2Fwire-server%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fwireapp%2Fwire-server%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# [SQSERVICES-1801] Prevent dead bots in database #2870

 Merged

[battermann](/battermann)
merged 3 commits into
[develop](/wireapp/wire-server/tree/develop "wireapp/wire-server:develop")
from
[SQSERVICES-1801-prevent-dead-bots-in-database](/wireapp/wire-server/tree/SQSERVICES-1801-prevent-dead-bots-in-database "wireapp/wire-server:SQSERVICES-1801-prevent-dead-bots-in-database")

Nov 25, 2022

 Merged

# [[SQSERVICES-1801] Prevent dead bots in database](#top) #2870

[battermann](/battermann)
merged 3 commits into
[develop](/wireapp/wire-server/tree/develop "wireapp/wire-server:develop")
from
[SQSERVICES-1801-prevent-dead-bots-in-database](/wireapp/wire-server/tree/SQSERVICES-1801-prevent-dead-bots-in-database "wireapp/wire-server:SQSERVICES-1801-prevent-dead-bots-in-database")

Nov 25, 2022

[Conversation
1](/wireapp/wire-server/pull/2870)
[Commits
3](/wireapp/wire-server/pull/2870/commits)
[Checks
0](/wireapp/wire-server/pull/2870/checks)
[Files changed](/wireapp/wire-server/pull/2870/files)

## Conversation

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

[![battermann](https://avatars.githubusercontent.com/u/3968185?s=60&v=4)](/battermann)

Copy link

Contributor

### @battermann **[battermann](/battermann)** commented [Nov 25, 2022](#issue-1464312186) • edited by fisx Loading

<https://wearezeta.atlassian.net/browse/SQSERVICES-1801>

## Checklist

* Add a new entry in an appropriate subdirectory of `changelog.d`
* Read and follow the [PR guidelines](https://docs.wire.com/developer/developer/pr-guidelines.html)

Sorry, something went wrong.

All reactions

[![@battermann](https://avatars.githubusercontent.com/u/3968185?s=40&v=4)](/battermann)

`[prevent dead bots in database](/wireapp/wire-server/pull/2870/commits/c5517f738f0435854e192a90e6ce7c3e3fbe9c7a "prevent dead bots in database")`

`[c5517f7](/wireapp/wire-server/pull/2870/commits/c5517f738f0435854e192a90e6ce7c3e3fbe9c7a)`

 [![@battermann](https://avatars.githubusercontent.com/u/3968185?s=40&u=f8d2d1b6a6ef3b55a8065a7f7f854a801cc90235&v=4)](/battermann)
[battermann](/battermann)
temporarily deployed
to
cachix
[November 25, 2022 10:10](#event-7891654722)
Inactive

 [![@battermann](https://avatars.githubusercontent.com/u/3968185?s=40&u=f8d2d1b6a6ef3b55a8065a7f7f854a801cc90235&v=4)](/battermann)
[battermann](/battermann)
temporarily deployed
to
cachix
[November 25, 2022 10:10](#event-7891654978)
Inactive

[![@zebot](https://avatars.githubusercontent.com/u/6795539?s=40&v=4)](/zebot)
[zebot](/zebot)
added
the
[ok-to-test](/wireapp/wire-server/labels/ok-to-test)
Approved for running tests in CI, overrides not-ok-to-test if both labels exist
label
[Nov 25, 2022](#event-7891678343)

[![@battermann](https://avatars.githubusercontent.com/u/3968185?s=40&v=4)](/battermann)

`[changelog](/wireapp/wire-server/pull/2870/commits/af8d0d0ff520cc03d20b0ce4b86c2babad7d868c "changelog")`

`[af8d0d0](/wireapp/wire-server/pull/2870/commits/af8d0d0ff520cc03d20b0ce4b86c2babad7d868c)`

 [![@battermann](https://avatars.githubusercontent.com/u/3968185?s=40&u=f8d2d1b6a6ef3b55a8065a7f7f854a801cc90235&v=4)](/battermann)
[battermann](/battermann)
temporarily deployed
to
cachix
[November 25, 2022 10:18](#event-7891734198)
Inactive

 [![@battermann](https://avatars.githubusercontent.com/u/3968185?s=40&u=f8d2d1b6a6ef3b55a8065a7f7f854a801cc90235&v=4)](/battermann)
[battermann](/battermann)
temporarily deployed
to
cachix
[November 25, 2022 10:18](#event-7891734310)
Inactive

 [![@battermann](https://avatars.githubusercontent.com/u/3968185?s=40&u=f8d2d1b6a6ef3b55a8065a7f7f854a801cc90235&v=4)](/battermann)
[battermann](/battermann)
requested a review
from [fisx](/fisx)
[November 25, 2022 10:18](#event-7891734907)

[![fisx](https://avatars.githubusercontent.com/u/10210727?s=60&v=4)](/fisx)

**[fisx](/fisx)**
approved these changes
[Nov 25, 2022](#pullrequestreview-1194165539)

 [View reviewed changes](/wireapp/wire-server/pull/2870/files/af8d0d0ff520cc03d20b0ce4b86c2babad7d868c)

[changelog.d/3-bug-fixes/pr-2870](/wireapp/wire-server/pull/2870/files/af8d0d0ff520cc03d20b0ce4b86c2babad7d868c#diff-e2722de31171c2635e0b2a6a88c55d79ee1189d44550d4f1cbef95b898d1a816)
Outdated

Show resolved

Hide resolved

[![@battermann](https://avatars.githubusercontent.com/u/3968185?s=40&u=f8d2d1b6a6ef3b55a8065a7f7f854a801cc90235&v=4)](/battermann)
[battermann](/battermann)
changed the title
~~prevent dead bots in database~~
[SQSERVICES-1801] Prevent dead bots in database
[Nov 25, 2022](#event-7891902389)

[![@battermann](https://avatars.githubusercontent.com/u/3968185?s=40&v=4)](/battermann) [![@fisx](https://avatars.githubusercontent.com/u/10210727?s=40&v=4)](/fisx)

`[Update changelog.d/3-bug-fixes/pr-2870](/wireapp/wire-server/pull/2870/commits/cedfa5177ffe9b639104259ed77862d110f3009c "Update changelog.d/3-bug-fixes/pr-2870

Co-authored-by: fisx <mf@zerobuzz.net>")`
 …

`[cedfa51](/wireapp/wire-server/pull/2870/commits/cedfa5177ffe9b639104259ed77862d110f3009c)`

```
Co-authored-by: fisx <mf@zerobuzz.net>
```

 [![@battermann](https://avatars.githubusercontent.com/u/3968185?s=40&u=f8d2d1b6a6ef3b55a8065a7f7f854a801cc90235&v=4)](/battermann)
[battermann](/battermann)
temporarily deployed
to
cachix
[November 25, 2022 10:39](#event-7891904053)
Inactive

 [![@battermann](https://avatars.githubusercontent.com/u/3968185?s=40&u=f8d2d1b6a6ef3b55a8065a7f7f854a801cc90235&v=4)](/battermann)
[battermann](/battermann)
temporarily deployed
to
cachix
[November 25, 2022 10:39](#event-7891904150)
Inactive

[![@battermann](https://avatars.githubusercontent.com/u/3968185?s=40&u=f8d2d1b6a6ef3b55a8065a7f7f854a801cc90235&v=4)](/battermann)
[battermann](/battermann)
merged commit [`74f86a6`](/wireapp/wire-server/commit/74f86a6b75737878c4fb0bd03a80f75438d47d85)
into
develop

[Nov 25, 2022](https://github.com/wireapp/wire-server/pull/2870#event-7892478325)

 [![@battermann](https://avatars.githubusercontent.com/u/3968185?s=40&u=f8d2d1b6a6ef3b55a8065a7f7f854a801cc90235&v=4)](/battermann)
[battermann](/battermann)
deleted the
SQSERVICES-1801-prevent-dead-bots-in-database

branch
[November 25, 2022 11:36](#event-7892478393)

This was referenced Nov 25, 2022

[Release 2022-11-25 - (expected chart version 4.27.0)
#2871](/wireapp/wire-server/pull/2871)
 Closed

[Release 2022-11-29 - (expected chart version 4.27.0)
#2880](/wireapp/wire-server/pull/2880)
 Closed

[Release 2022-11-30 - (expected chart version 4.27.0)
#2883](/wireapp/wire-server/pull/2883)
 Closed

[Release 2022-12-01 - (expected chart version 4.27.0)
#2891](/wireapp/wire-server/pull/2891)
 Merged

[Release 2022-12-01 - (expected chart version 4.28.0)
#2894](/wireapp/wire-server/pull/2894)
 Merged

[battermann](/battermann)
added a commit
that referenced
this pull request
[Dec 9, 2022](#ref-commit-ebfb8e5)
[![@battermann](https://avatars.githubusercontent.com/u/3968185?s=40&u=f8d2d1b6a6ef3b55a8065a7f7f854a801cc90235&v=4)](/battermann)

`[[SQSERVICES-1801] Prevent dead bots in database (](/wireapp/wire-server/commit/ebfb8e5c8e84499c207c032b01bbc127a40fb378 "[SQSERVICES-1801] Prevent dead bots in database (#2870)")[#2870](https://github.com/wireapp/wire-server/pull/2870)[)](/wireapp/wire-server/commit/ebfb8e5c8e84499c207c032b01bbc127a40fb378 "[SQSERVICES-1801] Prevent dead bots in database (#2870)")`

`[ebfb8e5](/wireapp/wire-server/commit/ebfb8e5c8e84499c207c032b01bbc127a40fb378)`

[battermann](/battermann)
added a commit
that referenced
this pull request
[Dec 9, 2022](#ref-commit-494a688)
[![@battermann](https://avatars.githubusercontent.com/u/3968185?s=40&u=f8d2d1b6a6ef3b55a8065a7f7f854a801cc90235&v=4)](/battermann)

`[[SQSERVICES-1801] Prevent dead bots in database (](/wireapp/wire-server/commit/494a6881f5895d4ed9e5d011455242be0d5e6223 "[SQSERVICES-1801] Prevent dead bots in database (#2870)")[#2870](https://github.com/wireapp/wire-server/pull/2870)[)](/wireapp/wire-server/commit/494a6881f5895d4ed9e5d011455242be0d5e6223 "[SQSERVICES-1801] Prevent dead bots in database (#2870)")`

`[494a688](/wireapp/wire-server/commit/494a6881f5895d4ed9e5d011455242be0d5e6223)`

[![@battermann](https://avatars.githubusercontent.com/u/3968185?s=40&u=f8d2d1b6a6ef3b55a8065a7f7f854a801cc90235&v=4)](/battermann)
[battermann](/battermann)
mentioned this pull request
[Dec 9, 2022](#ref-pullrequest-1486621168)

[Release 2022-12-09 - (expected chart version 4.29.0)
#2917](/wireapp/wire-server/pull/2917)
 Merged

[![@zebot](https://avatars.githubusercontent.com/u/6795539?s=40&v=4)](/zebot)
[zebot](/zebot)
mentioned this pull request
[Jan 12, 2023](#ref-pullrequest-1530555330)

[Release 2023-01-12 - (expected chart version 4.30.0)
#2977](/wireapp/wire-server/pull/2977)
 Merged

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Fwireapp%2Fwire-server%2Fpull%2F2870)

Reviewers

[![@fisx](https://avatars.githubusercontent.com/u/10210727?s=40&v=4)](/fisx) [fisx](/fisx)

fisx approved these changes

Assignees

No one assigned

Labels

[ok-to-test](/wireapp/wire-server/labels/ok-to-test)
Approved for running tests in CI, overrides not-ok-to-test if both labels exist

Projects

None yet

Milestone

No milestone

Development

Successfully merging this pull request may close these issues.

3 participants

[![@battermann](https://avatars.githubusercontent.com/u/3968185?s=52&v=4)](/battermann) [![@fisx](https://avatars.githubusercontent.com/u/10210727?s=52&v=4)](/fisx) [![@zebot](https://avatars.githubusercontent.com/u/6795539?s=52&v=4)](/zebot)

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_f909d881_20250114_182337.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fwireapp%2Fwire-server%2Freleases%2Ftag%2Fv2022-12-09)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fwireapp%2Fwire-server%2Freleases%2Ftag%2Fv2022-12-09)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Freleases%2Fshow&source=header-repo&source_repo=wireapp%2Fwire-server)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[wireapp](/wireapp)
/
**[wire-server](/wireapp/wire-server)**
Public

* [Notifications](/login?return_to=%2Fwireapp%2Fwire-server) You must be signed in to change notification settings
* [Fork
  325](/login?return_to=%2Fwireapp%2Fwire-server)
* [Star
   2.6k](/login?return_to=%2Fwireapp%2Fwire-server)

* [Code](/wireapp/wire-server/tree/v2022-12-09)
* [Issues
  44](/wireapp/wire-server/issues)
* [Pull requests
  94](/wireapp/wire-server/pulls)
* [Discussions](/wireapp/wire-server/discussions)
* [Actions](/wireapp/wire-server/actions)
* [Security](/wireapp/wire-server/security)
* [Insights](/wireapp/wire-server/pulse)

Additional navigation options

* [Code](/wireapp/wire-server/tree/v2022-12-09)
* [Issues](/wireapp/wire-server/issues)
* [Pull requests](/wireapp/wire-server/pulls)
* [Discussions](/wireapp/wire-server/discussions)
* [Actions](/wireapp/wire-server/actions)
* [Security](/wireapp/wire-server/security)
* [Insights](/wireapp/wire-server/pulse)

1. [Releases](/wireapp/wire-server/releases)
2. [v2022-12-09](/wireapp/wire-server/releases/tag/v2022-12-09)

# 2022-12-09 (Chart Release 4.29.0)

 Compare

Choose a tag to compare

Could not load tags

Nothing to show

[{{ refName }}
default](/wireapp/wire-server/compare/%7B%7B%20urlEncodedRefName%20%7D%7D...v2022-12-09)

 Loading

[View all tags](/wireapp/wire-server/tags)

![@battermann](https://avatars.githubusercontent.com/u/3968185?s=40&v=4)
[battermann](/battermann)
released this
12 Dec 14:42

·
[1584 commits](/wireapp/wire-server/compare/v2022-12-09...master)
to master
since this release

[v2022-12-09](/wireapp/wire-server/tree/v2022-12-09)

[`6ed493a`](/wireapp/wire-server/commit/6ed493a4ab3c676eaf29ff0e44e5bf816b0bdc9c)

This commit was created on GitHub.com and signed with GitHub’s **verified signature**.
The key has expired.

GPG key ID: 4AEE18F83AFDEB23
Expired

[Learn about vigilant mode](https://docs.github.com/github/authenticating-to-github/displaying-verification-statuses-for-all-of-your-commits).

## Bug fixes and other updates

* Prevention of storing unnecessary data in the database if adding a bot to a conversation fails. ([#2870](https://github.com/wireapp/wire-server/pull/2870))

## Internal changes

* bump nginx-module-vts from v0.1.15 to v0.2.1 ([#2827](https://github.com/wireapp/wire-server/pull/2827))
* Build nginz and nginz\_disco docker images using nix ([#2796](https://github.com/wireapp/wire-server/pull/2796))

 Assets
2

 Loading

All reactions

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


