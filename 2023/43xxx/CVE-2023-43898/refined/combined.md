=== Content from github.com_0007d552_20250114_224810.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fnothings%2Fstb%2Fpull%2F1454)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fnothings%2Fstb%2Fpull%2F1454)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fpull_requests_fragments%2Fpull_request_layout&source=header-repo&source_repo=nothings%2Fstb)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[nothings](/nothings)
/
**[stb](/nothings/stb)**
Public

* [Notifications](/login?return_to=%2Fnothings%2Fstb) You must be signed in to change notification settings
* [Fork
  7.8k](/login?return_to=%2Fnothings%2Fstb)
* [Star
   27.6k](/login?return_to=%2Fnothings%2Fstb)

* [Code](/nothings/stb)
* [Issues
  159](/nothings/stb/issues)
* [Pull requests
  131](/nothings/stb/pulls)
* [Discussions](/nothings/stb/discussions)
* [Actions](/nothings/stb/actions)
* [Projects
  0](/nothings/stb/projects)
* [Security](/nothings/stb/security)
* [Insights](/nothings/stb/pulse)

Additional navigation options

* [Code](/nothings/stb)
* [Issues](/nothings/stb/issues)
* [Pull requests](/nothings/stb/pulls)
* [Discussions](/nothings/stb/discussions)
* [Actions](/nothings/stb/actions)
* [Projects](/nothings/stb/projects)
* [Security](/nothings/stb/security)
* [Insights](/nothings/stb/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fnothings%2Fstb%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fnothings%2Fstb%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# Fixes null pointer dereference in https://github.com/nothings/stb/issues/1452 #1454

 Open

[NBickford-NV](/NBickford-NV)
wants to merge
1
commit into
[nothings:master](/nothings/stb/tree/master "nothings/stb:master")
*base:*
master

Choose a base branch

Branches
Tags

Could not load branches

Branch not found: **{{ refName }}**

 Loading

{{ refName }}
default

Could not load tags

Nothing to show

{{ refName }}
default

 Loading

### Are you sure you want to change the base?

Some commits from the old base branch may be removed from the timeline,
and old review comments may become outdated.

 Loading

Change base

from
[NBickford-NV:pic-nullptr-deref](/NBickford-NV/stb/tree/pic-nullptr-deref "NBickford-NV/stb:pic-nullptr-deref")

 Open

# [Fixes null pointer dereference in https://github.com/nothings/stb/issues/1452](#top) #1454

[NBickford-NV](/NBickford-NV)
wants to merge
1
commit into
[nothings:master](/nothings/stb/tree/master "nothings/stb:master")
from
[NBickford-NV:pic-nullptr-deref](/NBickford-NV/stb/tree/pic-nullptr-deref "NBickford-NV/stb:pic-nullptr-deref")

[Conversation
10](/nothings/stb/pull/1454)
[Commits
1](/nothings/stb/pull/1454/commits)
[Checks
0](/nothings/stb/pull/1454/checks)
[Files changed](/nothings/stb/pull/1454/files)

## Conversation

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

[![NBickford-NV](https://avatars.githubusercontent.com/u/57467222?s=60&v=4)](/NBickford-NV)

Copy link

Contributor

### @NBickford-NV **[NBickford-NV](/NBickford-NV)** commented [Feb 25, 2023](#issue-1599706744)

Hi stb maintainers!

I just saw issue [#1452](https://github.com/nothings/stb/issues/1452), and put together this pull request to fix it. When stbi\_\_pic\_load\_core returns `NULL`, this code now frees the allocated image and returns 0 immediately, instead of passing a null pointer to `stbi__convert_format()`.

Thanks!

Sorry, something went wrong.

 ❤️
1
 musicinmybrain reacted with heart emoji

All reactions

* ❤️
  1 reaction

[![@NBickford-NV](https://avatars.githubusercontent.com/u/57467222?s=40&v=4)](/NBickford-NV)

`[Fix nullptr dereference when a PIC file causes stbi__pic_load_core to…](/nothings/stb/pull/1454/commits/4e58258d8c434111fe2e8f1146ae0a72b0e8c554 "Fix nullptr dereference when a PIC file causes stbi__pic_load_core to return 0, and the requested number of components to stbi_load_from_memory is not 0 or 4")`
 …

`[4e58258](/nothings/stb/pull/1454/commits/4e58258d8c434111fe2e8f1146ae0a72b0e8c554)`

```
… return 0, and the requested number of components to stbi_load_from_memory is not 0 or 4
```

[![@musicinmybrain](https://avatars.githubusercontent.com/u/6898909?s=80&u=9010312053e7141383b9bdf538036c7f37fbaba0&v=4)](/musicinmybrain)

Copy link

### **[musicinmybrain](/musicinmybrain)** commented [Feb 25, 2023](#issuecomment-1445132579)

| Thank you! I have [just applied this](https://src.fedoraproject.org/rpms/stb/c/b0c5c6bad2626e09418c21252a87707fd08d3481?branch=rawhide) as a downstream patch in Fedora Linux. |
| --- |

All reactions

Sorry, something went wrong.

[![@NBickford-NV](https://avatars.githubusercontent.com/u/57467222?s=80&u=cc49d45a2b3221c14c6740499aa97346a44b400a&v=4)](/NBickford-NV)

Copy link

Contributor

Author

### **[NBickford-NV](/NBickford-NV)** commented [Feb 25, 2023](#issuecomment-1445134245)

| That's amazingly fast, thank you Ben! (I figured I'd send you an email later this morning since I remember you saw and applied the earlier stb\_image patches, but you beat me to it!) |
| --- |

All reactions

Sorry, something went wrong.

[sezero](/sezero)
added a commit
to libsdl-org/SDL\_image
that referenced
this pull request
[Feb 25, 2023](#ref-commit-d372c87)
[![@sezero](https://avatars.githubusercontent.com/u/4222725?s=40&v=4)](/sezero)

`[stb_image.h: NULL ptr dereference fix by Neil Bickford from mainstream:](/libsdl-org/SDL_image/commit/d372c870c37ad93fc26252b534f03b9b06f00ad9 "stb_image.h: NULL ptr dereference fix by Neil Bickford from mainstream:

Mainstream pull requests:
https://github.com/nothings/stb/pull/1454
Related mainstream issue tickets:
https://github.com/nothings/stb/issues/1452")`
…

`[d372c87](/libsdl-org/SDL_image/commit/d372c870c37ad93fc26252b534f03b9b06f00ad9)`

```
Mainstream pull requests:
[nothings/stb#1454](https://github.com/nothings/stb/pull/1454)
Related mainstream issue tickets:
[nothings/stb#1452](https://github.com/nothings/stb/issues/1452)
```

[sezero](/sezero)
added a commit
to libsdl-org/SDL\_image
that referenced
this pull request
[Feb 25, 2023](#ref-commit-bae8e45)
[![@sezero](https://avatars.githubusercontent.com/u/4222725?s=40&v=4)](/sezero)

`[stb_image.h: NULL ptr dereference fix by Neil Bickford from mainstream:](/libsdl-org/SDL_image/commit/bae8e45787d1ec2b90a69544ec9462420e9d8ee7 "stb_image.h: NULL ptr dereference fix by Neil Bickford from mainstream:

Mainstream pull requests:
https://github.com/nothings/stb/pull/1454
Related mainstream issue tickets:
https://github.com/nothings/stb/issues/1452")`
…

`[bae8e45](/libsdl-org/SDL_image/commit/bae8e45787d1ec2b90a69544ec9462420e9d8ee7)`

```
Mainstream pull requests:
[nothings/stb#1454](https://github.com/nothings/stb/pull/1454)
Related mainstream issue tickets:
[nothings/stb#1452](https://github.com/nothings/stb/issues/1452)
```

[![@cocoa-xu](https://avatars.githubusercontent.com/u/89497197?s=40&v=4)](/cocoa-xu)
[cocoa-xu](/cocoa-xu)
mentioned this pull request
[Mar 18, 2023](#ref-pullrequest-1630698979)

[fix: null pointer dereference
elixir-nx/stb\_image#29](/elixir-nx/stb_image/pull/29)
 Merged

[![@8573](https://avatars.githubusercontent.com/u/3662816?s=40&v=4)](/8573)
[8573](/8573)
mentioned this pull request
[Mar 19, 2023](#ref-issue-1631083747)

[Mitigate risk of losing vulnerability fix #102?
servo/rust-stb-image#103](/servo/rust-stb-image/issues/103)

Open

[NBickford-NV](/NBickford-NV)
added a commit
to NBickford-NV/tinygltf
that referenced
this pull request
[Mar 29, 2023](#ref-commit-af4456b)
[![@NBickford-NV](https://avatars.githubusercontent.com/u/57467222?s=40&u=cc49d45a2b3221c14c6740499aa97346a44b400a&v=4)](/NBickford-NV)

`[stb_image: Apply](/NBickford-NV/tinygltf/commit/af4456ba68aa39ba2b41a01ad06de3b4b8ce2e87 "stb_image: Apply https://github.com/nothings/stb/pull/1454") [nothings/stb#1454](https://github.com/nothings/stb/pull/1454)`

`[af4456b](/NBickford-NV/tinygltf/commit/af4456ba68aa39ba2b41a01ad06de3b4b8ce2e87)`

[![@NBickford-NV](https://avatars.githubusercontent.com/u/57467222?s=40&u=cc49d45a2b3221c14c6740499aa97346a44b400a&v=4)](/NBickford-NV)
[NBickford-NV](/NBickford-NV)
mentioned this pull request
[Mar 29, 2023](#ref-pullrequest-1646372423)

[Updates stb\_image and stb\_image\_write
syoyo/tinygltf#409](/syoyo/tinygltf/pull/409)
 Merged

[![@NBickford-NV](https://avatars.githubusercontent.com/u/57467222?s=40&u=cc49d45a2b3221c14c6740499aa97346a44b400a&v=4)](/NBickford-NV)
[NBickford-NV](/NBickford-NV)
mentioned this pull request
[Oct 4, 2023](#ref-issue-1926382243)

[NULL pointer derefence in PIC loading (CVE-2023-43898)
#1521](/nothings/stb/issues/1521)

Open

[![@NBickford-NV](https://avatars.githubusercontent.com/u/57467222?s=80&u=cc49d45a2b3221c14c6740499aa97346a44b400a&v=4)](/NBickford-NV)

Copy link

Contributor

Author

### **[NBickford-NV](/NBickford-NV)** commented [Oct 4, 2023](#issuecomment-1747097243)

| Tracking CVE numbers: this is a patch for <https://nvd.nist.gov/vuln/detail/CVE-2023-43898> (([#1521](https://github.com/nothings/stb/issues/1521)). |
| --- |

All reactions

Sorry, something went wrong.

[![@JarLob](https://avatars.githubusercontent.com/u/26652396?s=40&v=4)](/JarLob)
[JarLob](/JarLob)
mentioned this pull request
[Oct 19, 2023](#ref-pullrequest-1952383282)

[Fix Null pointer dereference in stbi\_\_convert\_format
#1547](/nothings/stb/pull/1547)
 Closed

[![@NBickford-NV](https://avatars.githubusercontent.com/u/57467222?s=80&u=cc49d45a2b3221c14c6740499aa97346a44b400a&v=4)](/NBickford-NV)

Copy link

Contributor

Author

### **[NBickford-NV](/NBickford-NV)** commented [Jan 9, 2025](#issuecomment-2581233368)

| Looks like this is also a patch for <https://nvd.nist.gov/vuln/detail/CVE-2021-45340>, which is how this bug appeared in libsixel (see [libsixel/libsixel#73](https://github.com/libsixel/libsixel/issues/73) and [#1736](https://github.com/nothings/stb/pull/1736)). |
| --- |

All reactions

Sorry, something went wrong.

[![@musicinmybrain](https://avatars.githubusercontent.com/u/6898909?s=80&u=9010312053e7141383b9bdf538036c7f37fbaba0&v=4)](/musicinmybrain)

Copy link

### **[musicinmybrain](/musicinmybrain)** commented [Jan 9, 2025](#issuecomment-2581246926)

| [@NBickford-NV](https://github.com/NBickford-NV) You’ve studied this code more deeply than I am likely to have time to. Do you think [#1736](https://github.com/nothings/stb/pull/1736) is a wise change *in addition to* this PR? Is it easy enough to prove that there is nowhere else that `stbi__convert_format` could end up being called with a null `data` pointer? |
| --- |

All reactions

Sorry, something went wrong.

[![@NBickford-NV](https://avatars.githubusercontent.com/u/57467222?s=80&u=cc49d45a2b3221c14c6740499aa97346a44b400a&v=4)](/NBickford-NV)

Copy link

Contributor

Author

### **[NBickford-NV](/NBickford-NV)** commented [Jan 9, 2025](#issuecomment-2581308033) • edited Loading

| [@musicinmybrain](https://github.com/musicinmybrain) Turns out, that's a really good question! I tried proving this and failed at `stbi__load_gif_main`. [#1736](https://github.com/nothings/stb/pull/1736) also protects against that. So while [#1454](https://github.com/nothings/stb/pull/1454) fixes one bug, [#1736](https://github.com/nothings/stb/pull/1736) is a more general solution.  My attempted proof that this is the only place where `stbi__convert_format` could be called with a null `data` pointer is below. This fails in case 6.   * `stbi__convert_format` is called in 8 places:   1. In `stbi__do_png`, can `(unsigned char *)result` be `NULL`? If it's `NULL`, then `p->out` is `NULL`. That means `z->out` in `stbi__parse_png()` was `NULL` and `stbi__parse_png()` returned a non-zero value. There's a few things that could write to `z->out`:      a. `stbi__create_png_image`; if it left `a->out` `NULL`, then it failed (so `stbi__parse_png()` returns 0) -- so this can't happen.      b. `stbi__expand_png_palette`; this only sets `a->out` if it fails (so `stbi__parse_png()` returns 0) -- so this can't happen.      c. So `result` can't be `NULL`.   2. In `stbi__bmp_load`, can `out` be `NULL`? Control only reaches `stbi__convert_format` there if it doesn't exit at `if (!out) return stbi__errpuc("outofmem", "Out of memory");`, so this can't happen.   3. In `stbi__tga_load`, `tga_data` can't be null due to a null check after allocation, like in `stbi__bmp_load`.   4. In `stbi__psd_load`, `out` can't be null due to a null check after allocation, like in `stbi__bmp_load`.   5. In `stbi__pic_load`, it used to be that `result` could be 0 if `stbi__pic_load_core` failed; this PR patches that. Since `stbi__pic_load_core` doesn't modify the `result` pointer itself (although it isn't passed in as an `stbi_uc* const`), `result` can only be null if it was null before `stbi__pic_load_core`. That can't happen because of the null check after the call to `stbi__malloc_mad3`.   6. In `stbi__load_gif_main`, can `out` be null? This might be possible; we have to pass `stbi__gif_test`, but then have `stbi__gif_load_next` return either `0` (error) or `s` (end of animated gif). That's probably possible to do; make a file that starts with `GIF8[79]a` and then has a corrupt first frame.   7. In `stbi__gif_load`, `u` can't be null because control's guarded by an `if(u)` check.   8. In `stbi__pnm_load`, `out` can't be null due to a null check after allocation, like in `stbi__bmp_load`. |
| --- |

 ❤️
2
 musicinmybrain and hzeller reacted with heart emoji

All reactions

* ❤️
  2 reactions

Sorry, something went wrong.

[![@NBickford-NV](https://avatars.githubusercontent.com/u/57467222?s=80&u=cc49d45a2b3221c14c6740499aa97346a44b400a&v=4)](/NBickford-NV)

Copy link

Contributor

Author

### **[NBickford-NV](/NBickford-NV)** commented [Jan 10, 2025](#issuecomment-2581519216) • edited Loading

| Okay, after deeper analysis, I think case 6 might be OK after all, but it's complex.  `stbi__convert_format` only crashes if `out` is null and both the width and height are greater than 0; if at least one is 0, it never reads from the source pointer. In `stbi__load_gif_main`, the width is `layers * g.w`, but `layers` is only nonzero if `u` is non-null at least once. And if `u` is non-null at least once, then control reaches `out = (stbi_uc*)stbi__malloc( layers * stride );` and then the `if (!out)` check.  That is: if `out` is null, then `layers` must be 0, and so there's no crash. If `layers` were nonzero, then `out` would be a non-null pointer.  I had a go at reproducing this, and if you run the following code you'll notice that execution enters `stbi__convert_format` with a null pointer, but then doesn't crash because `layers` is 0. It leaves `x` and `y` uninitialized, though, and the only clue the `image` pointer isn't valid is that `z` is 0.  So, because that proof's nontrivial, it's probably a good idea to have [#1736](https://github.com/nothings/stb/pull/1736) as well!  ``` #include "stb_image.h"  #include <stdlib.h>  int test_1454_gif() { 	const stbi_uc data[] = { 'G', 'I', 'F', '8', '9', 'a', // Magic number 		1, 0, 1, 0, // Width and height 		0, 0, 0}; // flags, bgindex, ratio 	int size = (int)sizeof(data);  	int *delays = NULL; 	int x, y, z, comp; 	stbi_uc* image = stbi_load_gif_from_memory( 		(const stbi_uc*)data, size, 		&delays, 		&x, &y, &z, 		&comp, 3);  	if (image) 	{ 		stbi_image_free(image); 	}  	if (delays) 	{ 		stbi_image_free(delays); 	} 	 	return EXIT_SUCCESS; } ``` |
| --- |

All reactions

Sorry, something went wrong.

[NBickford-NV](/NBickford-NV)
added a commit
to NBickford-NV/stb
that referenced
this pull request
[Jan 10, 2025](#ref-commit-2b7b082)
[![@NBickford-NV](https://avatars.githubusercontent.com/u/57467222?s=40&u=cc49d45a2b3221c14c6740499aa97346a44b400a&v=4)](/NBickford-NV)

`[Add stb_image regression test for attempted PoC in](/NBickford-NV/stb/commit/2b7b0824b26297840a245dbb503c880f2d26ee68 "Add stb_image regression test for attempted PoC in https://github.com/nothings/stb/pull/1454#issuecomment-2581519216") [nothings#1454 (com…](https://github.com/nothings/stb/pull/1454#issuecomment-2581519216)`
…

`[2b7b082](/NBickford-NV/stb/commit/2b7b0824b26297840a245dbb503c880f2d26ee68)`

```
[…ment)](https://github.com/nothings/stb/pull/1454#issuecomment-2581519216)
```

[![@musicinmybrain](https://avatars.githubusercontent.com/u/6898909?s=80&u=9010312053e7141383b9bdf538036c7f37fbaba0&v=4)](/musicinmybrain)

Copy link

### **[musicinmybrain](/musicinmybrain)** commented [Jan 10, 2025](#issuecomment-2582989760)

| Thank you for that very detailed analysis! I’m shipping [#1736](https://github.com/nothings/stb/pull/1736) as an additional downstream patch in Fedora’s [`stb` package](https://src.fedoraproject.org/rpms/stb) and referencing this discussion. |
| --- |

All reactions

Sorry, something went wrong.

[![@hzeller](https://avatars.githubusercontent.com/u/140937?s=80&v=4)](/hzeller)

Copy link

### **[hzeller](/hzeller)** commented [Jan 10, 2025](#issuecomment-2583284958)

| Given the analysis, I wonder how we get [@nothings](https://github.com/nothings) attention to get both this [#1454](https://github.com/nothings/stb/pull/1454) and [#1736](https://github.com/nothings/stb/pull/1736) merged to fix a whole class of bugs.  They are also sufficiently trivial that the review is simple. |
| --- |

All reactions

Sorry, something went wrong.

[![@nothings](https://avatars.githubusercontent.com/u/7525026?s=80&u=a23ba3a549fff291e35446cb32c8979bd29be6c9&v=4)](/nothings)

Copy link

Owner

### **[nothings](/nothings)** commented [Jan 10, 2025](#issuecomment-2583342971)

| Given the analysis, I wonder how we get [@nothings](https://github.com/nothings) attention  I read every email I get, and I get an email for every comment in the repo. It's just a matter of me committing the time to a release cycle. |
| --- |

 ❤️
2
 hzeller and NBickford-NV reacted with heart emoji

All reactions

* ❤️
  2 reactions

Sorry, something went wrong.

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Fnothings%2Fstb%2Fpull%2F1454)

Reviewers

No reviews

Assignees

No one assigned

Labels

None yet

Projects

None yet

Milestone

No milestone

Development

Successfully merging this pull request may close these issues.

4 participants

[![@NBickford-NV](https://avatars.githubusercontent.com/u/57467222?s=52&v=4)](/NBickford-NV) [![@musicinmybrain](https://avatars.githubusercontent.com/u/6898909?s=52&v=4)](/musicinmybrain) [![@hzeller](https://avatars.githubusercontent.com/u/140937?s=52&v=4)](/hzeller) [![@nothings](https://avatars.githubusercontent.com/u/7525026?s=52&v=4)](/nothings)

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_d3487bc3_20250115_201843.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fpeccc%2Fnull-stb)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fpeccc%2Fnull-stb)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E&source=header-repo&source_repo=peccc%2Fnull-stb)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[peccc](/peccc)
/
**[null-stb](/peccc/null-stb)**
Public

* [Notifications](/login?return_to=%2Fpeccc%2Fnull-stb) You must be signed in to change notification settings
* [Fork
  0](/login?return_to=%2Fpeccc%2Fnull-stb)
* [Star
   0](/login?return_to=%2Fpeccc%2Fnull-stb)

[0
stars](/peccc/null-stb/stargazers) [0
forks](/peccc/null-stb/forks) [Branches](/peccc/null-stb/branches) [Tags](/peccc/null-stb/tags) [Activity](/peccc/null-stb/activity)
 [Star](/login?return_to=%2Fpeccc%2Fnull-stb)

 [Notifications](/login?return_to=%2Fpeccc%2Fnull-stb) You must be signed in to change notification settings

* [Code](/peccc/null-stb)
* [Issues
  0](/peccc/null-stb/issues)
* [Pull requests
  0](/peccc/null-stb/pulls)
* [Actions](/peccc/null-stb/actions)
* [Projects
  0](/peccc/null-stb/projects)
* [Security](/peccc/null-stb/security)
* [Insights](/peccc/null-stb/pulse)

Additional navigation options

* [Code](/peccc/null-stb)
* [Issues](/peccc/null-stb/issues)
* [Pull requests](/peccc/null-stb/pulls)
* [Actions](/peccc/null-stb/actions)
* [Projects](/peccc/null-stb/projects)
* [Security](/peccc/null-stb/security)
* [Insights](/peccc/null-stb/pulse)

# peccc/null-stb

    main[Branches](/peccc/null-stb/branches)[Tags](/peccc/null-stb/tags)Go to fileCode
## Folders and files

| Name | | Name | Last commit message | Last commit date |
| --- | --- | --- | --- | --- |
| Latest commit History[10 Commits](/peccc/null-stb/commits/main/) | | |
| [image](/peccc/null-stb/tree/main/image "image") | | [image](/peccc/null-stb/tree/main/image "image") |  |  |
| [null\_example](/peccc/null-stb/tree/main/null_example "null_example") | | [null\_example](/peccc/null-stb/tree/main/null_example "null_example") |  |  |
| [README.md](/peccc/null-stb/blob/main/README.md "README.md") | | [README.md](/peccc/null-stb/blob/main/README.md "README.md") |  |  |
| View all files | | |

## Repository files navigation

* README
## Null Pointer Dereference vulnerability in nothings/stb

​ Nothings/stb, an image processing library, has a **Null Pointer Dereference** vulnerability in the stbi\_\_convert\_format function, stb\_image.h 2.28(<https://github.com/nothings/stb/blob/master/stb_image.h>). This function is called in stbi\_\_pic\_load and is used to parse files in the pic image format. And stbi\_\_pic\_load is called by stbi\_load\_from\_memory.

### Vulnerability causes

```
static void *stbi__pic_load(stbi__context *s,int *px,int *py,int *comp,int req_comp, stbi__result_info *ri)
{
   stbi_uc *result;
   int i, x,y, internal_comp;
   STBI_NOTUSED(ri);

   if (!comp) comp = &internal_comp;

   for (i=0; i<92; ++i)
      stbi__get8(s);

   x = stbi__get16be(s);
   y = stbi__get16be(s);

   if (y > STBI_MAX_DIMENSIONS) return stbi__errpuc("too large","Very large image (corrupt?)");
   if (x > STBI_MAX_DIMENSIONS) return stbi__errpuc("too large","Very large image (corrupt?)");

   if (stbi__at_eof(s))  return stbi__errpuc("bad file","file too short (pic header)");
   if (!stbi__mad3sizes_valid(x, y, 4, 0)) return stbi__errpuc("too large", "PIC image too large to decode");

   stbi__get32be(s); //skip `ratio'
   stbi__get16be(s); //skip `fields'
   stbi__get16be(s); //skip `pad'

   // intermediate buffer is RGBA
   result = (stbi_uc *) stbi__malloc_mad3(x, y, 4, 0);
   if (!result) return stbi__errpuc("outofmem", "Out of memory");
   memset(result, 0xff, x*y*4);

   if (!stbi__pic_load_core(s,x,y,comp, result)) {
      STBI_FREE(result);
      result=0;
   }
   *px = x;
   *py = y;
   if (req_comp == 0) req_comp = *comp;
   result=stbi__convert_format(result,4,req_comp,x,y);

   return result;
}
```

​ We can see that the "**result**" variable is assigned NULL after STBI\_FREE and is used again by stbi\_\_convert\_format.

```
static unsigned char *stbi__convert_format(unsigned char *data, int img_n, int req_comp, unsigned int x, unsigned int y)
{
   int i,j;
   unsigned char *good;

   if (req_comp == img_n) return data;
   STBI_ASSERT(req_comp >= 1 && req_comp <= 4);

   good = (unsigned char *) stbi__malloc_mad3(req_comp, x, y, 0);
   if (good == NULL) {
      STBI_FREE(data);
      return stbi__errpuc("outofmem", "Out of memory");
   }

   for (j=0; j < (int) y; ++j) {
      unsigned char *src  = data + j * x * img_n   ;
      unsigned char *dest = good + j * x * req_comp;

      #define STBI__COMBO(a,b)  ((a)*8+(b))
      #define STBI__CASE(a,b)   case STBI__COMBO(a,b): for(i=x-1; i >= 0; --i, src += a, dest += b)
      // convert source image with img_n components to one with req_comp components;
      // avoid switch per pixel, so use switch per scanline and massive macros
      switch (STBI__COMBO(img_n, req_comp)) {
         STBI__CASE(1,2) { dest[0]=src[0]; dest[1]=255;                                     } break;
         STBI__CASE(1,3) { dest[0]=dest[1]=dest[2]=src[0];                                  } break;
         STBI__CASE(1,4) { dest[0]=dest[1]=dest[2]=src[0]; dest[3]=255;                     } break;
         STBI__CASE(2,1) { dest[0]=src[0];                                                  } break;
         STBI__CASE(2,3) { dest[0]=dest[1]=dest[2]=src[0];                                  } break;
         STBI__CASE(2,4) { dest[0]=dest[1]=dest[2]=src[0]; dest[3]=src[1];                  } break;
         STBI__CASE(3,4) { dest[0]=src[0];dest[1]=src[1];dest[2]=src[2];dest[3]=255;        } break;
         STBI__CASE(3,1) { dest[0]=stbi__compute_y(src[0],src[1],src[2]);                   } break;
         STBI__CASE(3,2) { dest[0]=stbi__compute_y(src[0],src[1],src[2]); dest[1] = 255;    } break;
         STBI__CASE(4,1) { dest[0]=stbi__compute_y(src[0],src[1],src[2]);                   } break;
         STBI__CASE(4,2) { dest[0]=stbi__compute_y(src[0],src[1],src[2]); dest[1] = src[3]; } break;
         STBI__CASE(4,3) { dest[0]=src[0];dest[1]=src[1];dest[2]=src[2];                    } break;
         default: STBI_ASSERT(0); STBI_FREE(data); STBI_FREE(good); return stbi__errpuc("unsupported", "Unsupported format conversion");
      }
      #undef STBI__CASE
   }

   STBI_FREE(data);
   return good;
}
```

​ The "**result**" variable will be used again as the "**data**" variable inside stbi\_\_convert\_format, when the "**data**" variable is already a null pointer, and using it again will result in a null pointer dereference.

### Vulnerability reproduce

​ The environment is shown below.

[![image-20230919222702892.png](https://github.com/peccc/null-stb/raw/main/image/image-20230919222702892.png)](https://github.com/peccc/null-stb/blob/main/image/image-20230919222702892.png)

​ In the "null\_example" folder, use the following command.

```
./build.sh
```

​ or

```
./example sample
```

[![image-20230919175732420.png](https://github.com/peccc/null-stb/raw/main/image/image-20230919175732420.png)](https://github.com/peccc/null-stb/blob/main/image/image-20230919175732420.png)

​ We can see the "core dumped".

### Impact

Denial of service attack

[![image-20230919175104321.png](https://github.com/peccc/null-stb/raw/main/image/image-20230919175104321.png)](https://github.com/peccc/null-stb/blob/main/image/image-20230919175104321.png)

​ Here the "**result**" variable is assigned as a null pointer.

[![image-20230919175243072.png](https://github.com/peccc/null-stb/raw/main/image/image-20230919175243072.png)](https://github.com/peccc/null-stb/blob/main/image/image-20230919175243072.png)

​ Here the null pointer is used as the base address, at which point an error occurs.

## About

No description, website, or topics provided.
### Resources

[Readme](#readme-ov-file)

[Activity](/peccc/null-stb/activity)
### Stars

[**0**
stars](/peccc/null-stb/stargazers)
### Watchers

[**1**
watching](/peccc/null-stb/watchers)
### Forks

[**0**
forks](/peccc/null-stb/forks)
[Report repository](/contact/report-content?content_url=https%3A%2F%2Fgithub.com%2Fpeccc%2Fnull-stb&report=peccc+%28user%29)

## [Releases](/peccc/null-stb/releases)

No releases published

## [Packages 0](/users/peccc/packages?repo_name=null-stb)

No packages published

## Languages

* [C
  100.0%](/peccc/null-stb/search?l=c)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from avatars.githubusercontent.com_c6782d67_20250115_201841.html ===
�PNG

   
IHDR   (   (   ���m  #IDATx���i�%Wy���v������{�g�L�π�`0��0��F����D��� )�ED��D� q��%�KX��ز���
�g�����o�]��v�DUױ0c�(%��J]U�9���������BX�b~�Z�&�As��ja�ˆj��K��;���6��u�S7���(ݕT�>����'�'�w���G��M�ۏ]S3�gr�Q�T��'N���v�|�ɝ�������U\_4���T�����5�i�N����3�֩o|�o-�K����g>��s|�{��@������/PxaB����y�WZ��(�|յ8i:��+?t\_��Gv[�1HB��t�vٱG�w/�-Y�������}�x�ԨJ0%:�H��h��h
������q�Ҧ̝\_i�Pk�\_`�2����w�攧������!EvH�6��)M'?��w�O]we%�Ѩ$)�����F�$V&���\0iT-!M9���[\_ #�{��e��׼1טG�\*��%��(:��H���km\���.O�l���S,H�!8�'gk�jU�mh�Ė�7�&����xM�BȲ]�{��i""�����c��C�D(�ŵ���\��\�+f�\��J�-#eh�-�;
˒T� :/ɹ�¸�kL�w���=\*L������U�@H��TR8q.�2:�C���׌��
���/���m���8���31�A M��~�Z'�a����9���;ص�8��h#DZ,ZE�7�=N\_h㬘4;��f�����k-XZ�S)Y��VWc�c�Z$�W.��� ����<�}�ް��]م�\�V���7�qׇ�L��(�DL�^�㶺�P��W|�M~�T���y� !�4?y��q��+�S-�0�W�ܱ�wG�1�2Zk���\_���6����9�K&�1�b����%h4h��s߿���J�^?�ko��c�6>���^3��[�s���p6���=>�^�z^�ي�b��J4��
�,�F�LZt}M���WYZ D��qO'^m��
�%�������w�:|�ɑ�Os���]�G�bZ�=���b�=3.�i���2���̌��Ͼ���\�u/$Ғ{�5)�����J ��d�}w�o�o����+�J�3ˣ�J� �{1�vĩ�]�{d��� �+D��E-1���F�����0l��=�;1�
g�g�����k�.���ۏM}�ǧ>��{,�!�IHᥖ�I�ι�zl���p����|3��(d�^��I"�����'��O��($���'�gռ�K?����۸�U�s�C\_��g���F0�XI��L�<��N/fy}��'���.�����밪�H�Ű�."D�O$\*@�q�'X��v?˱��j؜�����ߎU;��ao屯�.���D����f߷�߶����D
=�� "b�H!ӻա�֦�6�՛��V>kL��5@d&�Z�h���A�QL�<�%�v
e����QTwvR��=�ww���{�]ǯ��t/��[)T��� �������[0�:B� �]�r�H��Zc���]��wv��,�C��q�4�î��8y5��G�����^��oB�՗��kv���0:iZ�h,�Cb/B�"��c�&�B �@�H3��Ű��L�aZ�u=i�$�������y��o��m�avV�=e�"25Pw�2��O�x뙯�3�z�S4F�oRQ�O�q�'���7�D� )K8�(��Lnt�{����U��Q�\�y�8��d֗O��,i!-�Yb��C��
I�u�p{�[#�l��pJ5�0����3�V���Kމ#I?�v��7�Jg���lm���Av��F<8A�{Wƾ4r���z�0�;\CQC��ádH��kͳ$a�@�0��%M�9(O�QF\_ ��/�,��?J{n����%Ư�pg Iq���Cq���)�d/�4�l��$\*�ga�I�N¬5���/w@z����s��h8D^@e������L���\_j�)�'Ww1�Q�(�[�⭵���z`�YA���\*���X���n&�"��(+�$�:��~R� +�2��=T�N`8iN�jE���R�\_]~��k\_P�;vd�a7h-�O����U�B3ga�:VD�3����Qt:���/�9��0�dF�}��%�����4M�j��й���O󖌀��v�\*W9���^6�H+wu��>"��0<�JEQ�b],��t,�ʬ�{~�ۍa�:2�I���U~�8��\_{a�A+��9L'B�2�x
�������!F�ʢ$
㊗1��ط�c͇�=��#�y'��I&;V!���3�ƾq�j����#h��0K"=����Q�Gv�j�X��m�e����ranS��0Yǩ��'\*�kyP�<���~ۉj��;�^��O�DW�eya�v�c�0��i��L�AD�0����Z�;o)02�d��0Rx��]������� ���9N��FQ�a���%�`���ذL̢��/����V�����/��J�$��2�QB��2&ӗ�Ф@
Kbm��?����5��%4꒵-ΜmR����uXZ���4���X�\*�$Q��슛���v�������鋭n�L����>��
V���Y1���.�Aa���é��c��ܛ��7����K�<��T��4an�B��qH�$2g!��Z�^��C�pG˘�E�b����~�e&�iG���(�o~c�n3`s3d�|ĩ��۬o
X�h6.6)NTq'j��e�b.M���"qu�{���'����Ԫ.�
�E�$��+�g��"N�@��c��Ɲ�P�a���G/;Y��}\*o�jc�a|O���)r�5%���\*W��qT��B��F;�zL#���Q~\*-\*�2˱�^e�4�O�s�̀��iwC>~��E$mLR&Ӎvֳ�[O]���Z~?�'W�z�O�k���"c#N� \_�(�S>�Y��5��WV�/n3m�kkL���� oJ�iA�P���2���#vk5�\_���6�n�T�]�3;8�C] �p��{�3Xp��c76޶ݒ4�afS�^��FH�1�0�?W��C���
�5���þf�@��W�!���d>��@�ࠂ��`ް��X��T����.�����c4Ҵ;]�hw���'��8>�� ���M�8�ݜ�̤�ܬK�nS\*��γo\_�o�ؠ�)�e���6!m���L�=5ib�af��}�K�h����u�\*�=��7p
�G[��/q��W�6�T�M�mj�|n�{F���)����J���9������p~�s�(b�$�g\*ʦI�2��K���aNFS{,jV�.w�Y���S�:n6�'Z?y@Ӥo{�\�EI�X��.C\_�����\*c�\0��
��;���/]Dmn�G�96�4���O}S2�a^J�5�I�(�Ym�\���=�/��R�%��r����5�[�������7"VW.��8�B��O�Y\����J�bv��q$�c�6ӳ6?����r��e
��n=��$cU�8^x��G�D+���x���R|>���T �+���k�6�b�0)rhme���u�씍eJ���݋��$ozC�Z���X经�rc�ξR��iR4��6� ���0!���0�+6� ;�،"bx�W>YН�g�ګ\*c��N?�FP�&�Gەؖ$
���\b����q���|��\_+o��Û,<�+4l��m��Gý(fy0��6� \_)�\*�:�
N�x|�Ƒۏ.�rJ&��I�nQ(Y(E�3pi�[b�
DZ�fZ@�V|�f�����>�Z�� �9��4È� d+�Ċ��Y��ٌ��0Hg����  ��"�R˃.h�    IEND�B`�

=== Content from avatars.githubusercontent.com_a87c4fee_20250115_201843.html ===
�PNG

   
IHDR  �  �   �.�b  �IDATx��ױ��@���Zh�
i�B6"��\*�Y��^�'!�������� p��H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���]:��[����+^v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� �c��Ou\�� Ϸ��� �����H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A����^��=^bc���������6{o�o,� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�2Ƹ��q��>˾n7\��H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���HX��7 ���� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$���  ��w"�3���    IEND�B`�

=== Content from rustsec.org_a1cf3b61_20250115_201844.html ===


RUSTSEC-2023-0021: stb\_image: NULL pointer dereference in `stb\_image` › RustSec Advisory Database

#

[About](/)
[Advisories](/advisories/)
[Report Vulnerabilities](/contributing.html)

[History](https://github.com/RustSec/advisory-db/commits/main/crates/stb_image/RUSTSEC-2023-0021.md) ⋅
[Edit](https://github.com/RustSec/advisory-db/edit/main/crates/stb_image/RUSTSEC-2023-0021.md) ⋅
[JSON (OSV)](https://api.osv.dev/v1/vulns/RUSTSEC-2023-0021)

# RUSTSEC-2023-0021

NULL pointer dereference in `stb_image`

Reported
March 19, 2023

Issued
March 19, 2023

(last modified: July 15, 2023)

Package
[stb\_image](/packages/stb_image.html)
([crates.io](https://crates.io/crates/stb_image))

Type
Vulnerability

Categories

* [memory-corruption](/categories/memory-corruption.html)

Keywords
[#NULL-pointer-dereference](/keywords/NULL-pointer-dereference.html)

Aliases

* [GHSA-ppjr-267j-5p9x](https://github.com/advisories/GHSA-ppjr-267j-5p9x)

References

* <https://github.com/servo/rust-stb-image/pull/102>

Patched

* `>=0.2.5`

### Description

A bug in error handling in the `stb_image` C library could cause a NULL pointer dereference when attempting to load an invalid or unsupported image file. This is fixed in version 0.2.5 and later of the `stb_image` Rust crate, by patching the C code to correctly handle NULL pointers.

Thank you to GitHub user 0xdd96 for finding and fixing this vulnerability.

Advisory available under [CC0-1.0](https://spdx.org/licenses/CC0-1.0.html)
license.



=== Content from github.com_8fa76fa2_20250114_224808.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fnothings%2Fstb%2Fissues%2F1452)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fnothings%2Fstb%2Fissues%2F1452)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=nothings%2Fstb)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[nothings](/nothings)
/
**[stb](/nothings/stb)**
Public

* [Notifications](/login?return_to=%2Fnothings%2Fstb) You must be signed in to change notification settings
* [Fork
  7.8k](/login?return_to=%2Fnothings%2Fstb)
* [Star
   27.6k](/login?return_to=%2Fnothings%2Fstb)

* [Code](/nothings/stb)
* [Issues
  159](/nothings/stb/issues)
* [Pull requests
  131](/nothings/stb/pulls)
* [Discussions](/nothings/stb/discussions)
* [Actions](/nothings/stb/actions)
* [Projects
  0](/nothings/stb/projects)
* [Security](/nothings/stb/security)
* [Insights](/nothings/stb/pulse)

Additional navigation options

* [Code](/nothings/stb)
* [Issues](/nothings/stb/issues)
* [Pull requests](/nothings/stb/pulls)
* [Discussions](/nothings/stb/discussions)
* [Actions](/nothings/stb/actions)
* [Projects](/nothings/stb/projects)
* [Security](/nothings/stb/security)
* [Insights](/nothings/stb/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fnothings%2Fstb%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fnothings%2Fstb%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# NULL pointer dereference in the stb\_image.h #1452

Open

[0xdd96](/0xdd96) opened this issue
Feb 21, 2023
· 1 comment

Open

# [NULL pointer dereference in the stb\_image.h](#top) #1452

[0xdd96](/0xdd96) opened this issue
Feb 21, 2023
· 1 comment

Labels
[1 stb\_image](/nothings/stb/labels/1%20stb_image)
[2 bug](/nothings/stb/labels/2%20bug)

## Comments

[![@0xdd96](https://avatars.githubusercontent.com/u/24778335?s=80&v=4)](/0xdd96)

Copy link

### **[0xdd96](/0xdd96)** commented [Feb 21, 2023](#issue-1593103519)

| I discovered a [null pointer dereference](https://github.com/libsixel/libsixel/issues/73) vulnerability in the [stb\_image.h](https://github.com/libsixel/libsixel/blob/490ec15087e37d8e1395e4dbfb99fc543c5bae5d/src/stb_image.h#L6446-L6458) of libsixel, which also exists in this project.  Specifically, if the `stbi__pic_load_core` function returns 0 (line 6528), `result` will be released (line 6529) and set to 0 (line 6530). This null pointer will be dereferenced in `stbi__convert_format`, which would crash the application.     [stb/stb\_image.h](https://github.com/nothings/stb/blob/5736b15f7ea0ffb08dd38af21067c314d6a3aae9/stb_image.h#L6523-L6535)  Lines 6523 to 6535 in [5736b15](/nothings/stb/commit/5736b15f7ea0ffb08dd38af21067c314d6a3aae9)   |  | // intermediate buffer is RGBA | | --- | --- | |  | result = (stbi\_uc \*) stbi\_\_malloc\_mad3(x, y, 4, 0); | |  | if (!result) return stbi\_\_errpuc("outofmem", "Out of memory"); | |  | memset(result, 0xff, x\*y\*4); | |  |  | |  | if (!stbi\_\_pic\_load\_core(s,x,y,comp, result)) { | |  | STBI\_FREE(result); | |  | result=0; | |  | } | |  | \*px = x; | |  | \*py = y; | |  | if (req\_comp == 0) req\_comp = \*comp; | |  | result=stbi\_\_convert\_format(result,4,req\_comp,x,y); | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| The text was updated successfully, but these errors were encountered: |

 👍
3
 lionlai1989, Sanmaireddy, and NBickford-NV reacted with thumbs up emoji

All reactions

* 👍
  3 reactions

This was referenced Feb 25, 2023

[Fixes null pointer dereference in https://github.com/nothings/stb/issues/1452
#1454](/nothings/stb/pull/1454)
 Open

[Adds small valid .pic file to fuzzer seed corpus; varies req\_comp when fuzz-testing
#1455](/nothings/stb/pull/1455)
 Open

[sezero](/sezero)
added a commit
to libsdl-org/SDL\_image
that referenced
this issue
[Feb 25, 2023](#ref-commit-d372c87)
[![@sezero](https://avatars.githubusercontent.com/u/4222725?s=40&v=4)](/sezero)

`[stb_image.h: NULL ptr dereference fix by Neil Bickford from mainstream:](/libsdl-org/SDL_image/commit/d372c870c37ad93fc26252b534f03b9b06f00ad9 "stb_image.h: NULL ptr dereference fix by Neil Bickford from mainstream:

Mainstream pull requests:
https://github.com/nothings/stb/pull/1454
Related mainstream issue tickets:
https://github.com/nothings/stb/issues/1452")`
…

`[d372c87](/libsdl-org/SDL_image/commit/d372c870c37ad93fc26252b534f03b9b06f00ad9)`

```
Mainstream pull requests:
[nothings/stb#1454](https://github.com/nothings/stb/pull/1454)
Related mainstream issue tickets:
[nothings/stb#1452](https://github.com/nothings/stb/issues/1452)
```

[sezero](/sezero)
added a commit
to libsdl-org/SDL\_image
that referenced
this issue
[Feb 25, 2023](#ref-commit-bae8e45)
[![@sezero](https://avatars.githubusercontent.com/u/4222725?s=40&v=4)](/sezero)

`[stb_image.h: NULL ptr dereference fix by Neil Bickford from mainstream:](/libsdl-org/SDL_image/commit/bae8e45787d1ec2b90a69544ec9462420e9d8ee7 "stb_image.h: NULL ptr dereference fix by Neil Bickford from mainstream:

Mainstream pull requests:
https://github.com/nothings/stb/pull/1454
Related mainstream issue tickets:
https://github.com/nothings/stb/issues/1452")`
…

`[bae8e45](/libsdl-org/SDL_image/commit/bae8e45787d1ec2b90a69544ec9462420e9d8ee7)`

```
Mainstream pull requests:
[nothings/stb#1454](https://github.com/nothings/stb/pull/1454)
Related mainstream issue tickets:
[nothings/stb#1452](https://github.com/nothings/stb/issues/1452)
```

[![@rygorous](https://avatars.githubusercontent.com/u/1077496?s=40&v=4)](/rygorous)
[rygorous](/rygorous)
added
[2 bug](/nothings/stb/labels/2%20bug)
[1 stb\_image](/nothings/stb/labels/1%20stb_image)
labels
[Mar 6, 2023](#event-8669195790)

[![@cocoa-xu](https://avatars.githubusercontent.com/u/89497197?s=40&v=4)](/cocoa-xu)
[cocoa-xu](/cocoa-xu)
mentioned this issue
[Mar 18, 2023](#ref-pullrequest-1630698979)

[fix: null pointer dereference
elixir-nx/stb\_image#29](/elixir-nx/stb_image/pull/29)
 Merged

[![@0xdd96](https://avatars.githubusercontent.com/u/24778335?s=40&v=4)](/0xdd96)
[0xdd96](/0xdd96)
mentioned this issue
[Mar 19, 2023](#ref-pullrequest-1630927566)

[fix null pointer dereference in stb\_image.h
servo/rust-stb-image#102](/servo/rust-stb-image/pull/102)
 Merged

[U2FsdGVkX1](/U2FsdGVkX1)
pushed a commit
to fedora-riscv/usd
that referenced
this issue
[Aug 12, 2023](#ref-commit-8930f44)
[![@musicinmybrain](https://avatars.githubusercontent.com/u/6898909?s=40&u=9010312053e7141383b9bdf538036c7f37fbaba0&v=4)](/musicinmybrain)

`[Update minimum stb_image versions](/fedora-riscv/usd/commit/8930f44c55d59fd12a7265b4b1978818a2105b80 "Update minimum stb_image versions

Ensure we have a fix for null pointer dereference bug
https://github.com/nothings/stb/issues/1452.")`
…

`[8930f44](/fedora-riscv/usd/commit/8930f44c55d59fd12a7265b4b1978818a2105b80)`

```
Ensure we have a fix for null pointer dereference bug
[nothings/stb#1452](https://github.com/nothings/stb/issues/1452).
```

[U2FsdGVkX1](/U2FsdGVkX1)
pushed a commit
to fedora-riscv/usd
that referenced
this issue
[Aug 12, 2023](#ref-commit-fec1893)
[![@musicinmybrain](https://avatars.githubusercontent.com/u/6898909?s=40&u=9010312053e7141383b9bdf538036c7f37fbaba0&v=4)](/musicinmybrain)

`[Update minimum stb_image versions](/fedora-riscv/usd/commit/fec1893bb0c98fc8a878223bb0da98008d457bf1 "Update minimum stb_image versions

Ensure we have a fix for null pointer dereference bug
https://github.com/nothings/stb/issues/1452.")`
…

`[fec1893](/fedora-riscv/usd/commit/fec1893bb0c98fc8a878223bb0da98008d457bf1)`

```
Ensure we have a fix for null pointer dereference bug
[nothings/stb#1452](https://github.com/nothings/stb/issues/1452).
```

[U2FsdGVkX1](/U2FsdGVkX1)
pushed a commit
to fedora-riscv/stb
that referenced
this issue
[Aug 12, 2023](#ref-commit-f31cbe6)
[![@musicinmybrain](https://avatars.githubusercontent.com/u/6898909?s=40&u=9010312053e7141383b9bdf538036c7f37fbaba0&v=4)](/musicinmybrain)

`[Fix null pointer dereference in stb_image](/fedora-riscv/stb/commit/f31cbe63f31cdcf90f0395f7761a848b7e011141 "Fix null pointer dereference in stb_image

https://github.com/nothings/stb/issues/1452")`
…

`[f31cbe6](/fedora-riscv/stb/commit/f31cbe63f31cdcf90f0395f7761a848b7e011141)`

```
[nothings/stb#1452](https://github.com/nothings/stb/issues/1452)
```

[U2FsdGVkX1](/U2FsdGVkX1)
pushed a commit
to fedora-riscv/stb
that referenced
this issue
[Aug 12, 2023](#ref-commit-c1ec87b)
[![@musicinmybrain](https://avatars.githubusercontent.com/u/6898909?s=40&u=9010312053e7141383b9bdf538036c7f37fbaba0&v=4)](/musicinmybrain)

`[Fix null pointer dereference in stb_image](/fedora-riscv/stb/commit/c1ec87bb3ce31b6478807f26fc9bfb9389ab7462 "Fix null pointer dereference in stb_image

https://github.com/nothings/stb/issues/1452")`
…

`[c1ec87b](/fedora-riscv/stb/commit/c1ec87bb3ce31b6478807f26fc9bfb9389ab7462)`

```
[nothings/stb#1452](https://github.com/nothings/stb/issues/1452)
```

[U2FsdGVkX1](/U2FsdGVkX1)
pushed a commit
to fedora-riscv/stb
that referenced
this issue
[Aug 12, 2023](#ref-commit-524c326)
[![@musicinmybrain](https://avatars.githubusercontent.com/u/6898909?s=40&u=9010312053e7141383b9bdf538036c7f37fbaba0&v=4)](/musicinmybrain)

`[Fix null pointer dereference in stb_image](/fedora-riscv/stb/commit/524c326e9e85f83cfa7de12056ed6f540a720dba "Fix null pointer dereference in stb_image

https://github.com/nothings/stb/issues/1452")`
…

`[524c326](/fedora-riscv/stb/commit/524c326e9e85f83cfa7de12056ed6f540a720dba)`

```
[nothings/stb#1452](https://github.com/nothings/stb/issues/1452)
```

[U2FsdGVkX1](/U2FsdGVkX1)
pushed a commit
to fedora-riscv/stb
that referenced
this issue
[Aug 12, 2023](#ref-commit-2c15832)
[![@musicinmybrain](https://avatars.githubusercontent.com/u/6898909?s=40&u=9010312053e7141383b9bdf538036c7f37fbaba0&v=4)](/musicinmybrain)

`[Fix null pointer dereference in stb_image](/fedora-riscv/stb/commit/2c1583288ee3df0ae9a14bce89ebf542136ff4de "Fix null pointer dereference in stb_image

https://github.com/nothings/stb/issues/1452")`
…

`[2c15832](/fedora-riscv/stb/commit/2c1583288ee3df0ae9a14bce89ebf542136ff4de)`

```
[nothings/stb#1452](https://github.com/nothings/stb/issues/1452)
```

[U2FsdGVkX1](/U2FsdGVkX1)
pushed a commit
to fedora-riscv/stb
that referenced
this issue
[Aug 12, 2023](#ref-commit-0096ab2)
[![@musicinmybrain](https://avatars.githubusercontent.com/u/6898909?s=40&u=9010312053e7141383b9bdf538036c7f37fbaba0&v=4)](/musicinmybrain)

`[Fix null pointer dereference in stb_image](/fedora-riscv/stb/commit/0096ab26f9fe2b0fb7dfc2d1c4860757133fd9eb "Fix null pointer dereference in stb_image

https://github.com/nothings/stb/issues/1452")`
…

`[0096ab2](/fedora-riscv/stb/commit/0096ab26f9fe2b0fb7dfc2d1c4860757133fd9eb)`

```
[nothings/stb#1452](https://github.com/nothings/stb/issues/1452)
```

[![@NBickford-NV](https://avatars.githubusercontent.com/u/57467222?s=40&u=cc49d45a2b3221c14c6740499aa97346a44b400a&v=4)](/NBickford-NV)
[NBickford-NV](/NBickford-NV)
mentioned this issue
[Oct 4, 2023](#ref-issue-1926382243)

[NULL pointer derefence in PIC loading (CVE-2023-43898)
#1521](/nothings/stb/issues/1521)

Open

[![@NBickford-NV](https://avatars.githubusercontent.com/u/57467222?s=80&u=cc49d45a2b3221c14c6740499aa97346a44b400a&v=4)](/NBickford-NV)

Copy link

Contributor

### **[NBickford-NV](/NBickford-NV)** commented [Oct 4, 2023](#issuecomment-1747096757)

| Tracking CVE numbers: this is <https://nvd.nist.gov/vuln/detail/CVE-2023-43898> (([#1521](https://github.com/nothings/stb/issues/1521)), and its equivalent in Servo's Rust port is <https://rustsec.org/advisories/RUSTSEC-2023-0021.html>. |
| --- |

All reactions

Sorry, something went wrong.

[![@hzeller](https://avatars.githubusercontent.com/u/140937?s=40&v=4)](/hzeller)
[hzeller](/hzeller)
mentioned this issue
[Jan 10, 2025](#ref-pullrequest-2778349648)

[Fix root-cause of CVE-2021-45340 : dereference of NULL ptr.
#1736](/nothings/stb/pull/1736)
 Open

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Fnothings%2Fstb%2Fissues%2F1452)

Assignees

No one assigned

Labels

[1 stb\_image](/nothings/stb/labels/1%20stb_image)
[2 bug](/nothings/stb/labels/2%20bug)

Projects

None yet

Milestone

No milestone

Development

No branches or pull requests

3 participants

[![@rygorous](https://avatars.githubusercontent.com/u/1077496?s=52&v=4)](/rygorous) [![@0xdd96](https://avatars.githubusercontent.com/u/24778335?s=52&v=4)](/0xdd96) [![@NBickford-NV](https://avatars.githubusercontent.com/u/57467222?s=52&v=4)](/NBickford-NV)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_12d2842e_20250115_201844.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fnothings%2Fstb%2Fissues%2F1521)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fnothings%2Fstb%2Fissues%2F1521)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=nothings%2Fstb)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[nothings](/nothings)
/
**[stb](/nothings/stb)**
Public

* [Notifications](/login?return_to=%2Fnothings%2Fstb) You must be signed in to change notification settings
* [Fork
  7.8k](/login?return_to=%2Fnothings%2Fstb)
* [Star
   27.6k](/login?return_to=%2Fnothings%2Fstb)

* [Code](/nothings/stb)
* [Issues
  159](/nothings/stb/issues)
* [Pull requests
  131](/nothings/stb/pulls)
* [Discussions](/nothings/stb/discussions)
* [Actions](/nothings/stb/actions)
* [Projects
  0](/nothings/stb/projects)
* [Security](/nothings/stb/security)
* [Insights](/nothings/stb/pulse)

Additional navigation options

* [Code](/nothings/stb)
* [Issues](/nothings/stb/issues)
* [Pull requests](/nothings/stb/pulls)
* [Discussions](/nothings/stb/discussions)
* [Actions](/nothings/stb/actions)
* [Projects](/nothings/stb/projects)
* [Security](/nothings/stb/security)
* [Insights](/nothings/stb/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fnothings%2Fstb%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fnothings%2Fstb%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# NULL pointer derefence in PIC loading (CVE-2023-43898) #1521

Open

[mmuehlenhoff](/mmuehlenhoff) opened this issue
Oct 4, 2023
· 3 comments

Open

# [NULL pointer derefence in PIC loading (CVE-2023-43898)](#top) #1521

[mmuehlenhoff](/mmuehlenhoff) opened this issue
Oct 4, 2023
· 3 comments

## Comments

[![@mmuehlenhoff](https://avatars.githubusercontent.com/u/13075410?s=80&v=4)](/mmuehlenhoff)

Copy link

### **[mmuehlenhoff](/mmuehlenhoff)** commented [Oct 4, 2023](#issue-1926382243)

| This appeared in the CVE feed updates, apparently someone requested a CVE ID (<https://www.cve.org/CVERecord?id=CVE-2023-43898>) for <https://github.com/peccc/null-stb>, but failed to actually report it to you... |
| --- |
| The text was updated successfully, but these errors were encountered: |

All reactions

[![@NBickford-NV](https://avatars.githubusercontent.com/u/57467222?s=80&u=cc49d45a2b3221c14c6740499aa97346a44b400a&v=4)](/NBickford-NV)

Copy link

Contributor

### **[NBickford-NV](/NBickford-NV)** commented [Oct 4, 2023](#issuecomment-1747090319)

| I'm going to link this issue with the original report in [#1452](https://github.com/nothings/stb/issues/1452) and the patch in [#1454](https://github.com/nothings/stb/pull/1454) - thanks! |
| --- |

All reactions

Sorry, something went wrong.

This was referenced Oct 4, 2023

[NULL pointer dereference in the stb\_image.h
#1452](/nothings/stb/issues/1452)

Open

[Fixes null pointer dereference in https://github.com/nothings/stb/issues/1452
#1454](/nothings/stb/pull/1454)
 Open

[![@tom-seddon](https://avatars.githubusercontent.com/u/1269020?s=80&u=a4029532e407fb0532ff5409dc862645e7041b8d&v=4)](/tom-seddon)

Copy link

### **[tom-seddon](/tom-seddon)** commented [Oct 13, 2023](#issuecomment-1760625527)

| Googling suggests the PIC support's main current purpose is to allow automated fuzzers to find new ways to make stb\_image crash. I can't imagine anybody still needs to do anything with the early-2000s-era Maya assets from Sega that prompted me to cobble this stuff together in the first place - so maybe it's time to take this code out back and send it to a farm upstate?  --Tom |
| --- |

All reactions

Sorry, something went wrong.

[![@tom-seddon](https://avatars.githubusercontent.com/u/1269020?s=80&u=a4029532e407fb0532ff5409dc862645e7041b8d&v=4)](/tom-seddon)

Copy link

### **[tom-seddon](/tom-seddon)** commented [Oct 13, 2023](#issuecomment-1760632179)

| If nobody is using this code, it needs to be removed.  If anybody is using it, let's remove it anyway - they can switch to using PNG instead.  I can do a PR if there is any interest.  --Tom |
| --- |

All reactions

Sorry, something went wrong.

[![@JarLob](https://avatars.githubusercontent.com/u/26652396?s=40&v=4)](/JarLob)
[JarLob](/JarLob)
mentioned this issue
[Oct 19, 2023](#ref-issue-1952380574)

[Null pointer dereference in `stbi__convert_format` (`GHSL-2023-149`)
#1546](/nothings/stb/issues/1546)

Open

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Fnothings%2Fstb%2Fissues%2F1521)

Assignees

No one assigned

Labels

None yet

Projects

None yet

Milestone

No milestone

Development

No branches or pull requests

3 participants

[![@tom-seddon](https://avatars.githubusercontent.com/u/1269020?s=52&v=4)](/tom-seddon) [![@mmuehlenhoff](https://avatars.githubusercontent.com/u/13075410?s=52&v=4)](/mmuehlenhoff) [![@NBickford-NV](https://avatars.githubusercontent.com/u/57467222?s=52&v=4)](/NBickford-NV)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from avatars.githubusercontent.com_7d61dcab_20250115_201844.html ===
���� �  

 $.' ",#(7),01444'9=82<.342 
2!!22222222222222222222222222222222222222222222222222��  P P" ���          
   } !1AQa"q2���#B��R��$3br�
%&'()\*456789:CDEFGHIJSTUVWXYZcdefghijstuvwxyz�������������������������������������������������������������������������       
  w !1AQaq"2�B���� #3R�br�
$4�%�&'()\*56789:CDEFGHIJSTUVWXYZcdefghijstuvwxyz��������������������������������������������������������������������������   ? �oYZ��'��M����D�(�ڠ���#2J@Z͓ē�\3��8��S�ө5��j<�Usa Bpf@,����Ƽ� W.�|������
��
f�a�A#��һ�,s�m���:A�
w��+���Ѯ.3��ÿ5����e��T�rY��8���O��+%����S�ğV[R�&�$%��Q���j���G�{f\_��?��]E�j�h��\*3R�<��
g��nW�RI���G��R}
קM��\*V��F\��ָ���؊�lG�A�뵘\i�����r�0���LNke��Ҿw\*�ө�I�a/�fx%� Yo�(;��6�l2��?�4�#`7c��� �
�${}x�\_9E��&)�1FO��񨭭��`�͸t'{P�� f�G\*��²�Z�ݓV�����J�Ҵ��b��$�0d[΂��;Ա����'�K��KH �a�%y���4l=��"L\_'��BG�.mR�rA}���K����T��G�^^СLz�ٞ�E����c�j+=��4do\ek؊W<�&eG#��� �B�<�PF؏x�7Њ�qr���Ԕ�������:��,�8���PĊ�ѓPk��Y3��Њ�$�!��x�q��}������j���LKG���
�NM�xY�j����^m�闈�m.�#�=G�y{��6ȑ��
��ѕ�H��f��R���B;�~��3��O=zV6q�}\*��.f����6�}>|��y�&��$(2�W=s<�Z�d���\*�%�H�FGj�[9�[��-<�+=�kM^���5��g2n`r\*:���b��A��t�3�=u{rp�
Nڬ(��<�\ž�!�'&���W�2)�R���,��Ck��j��[
�L���?�[�Ҡ�N��k��4�lAi��8���q����)F�G�Bc?���\*�:Ҳ�"���@j���qq�W�C�M��]fŋ�-��ce?w���ɸ�HG��c��I��m��q�� ������97��� |�����fg(\�k�ǐ����n���\*:�k��>�I�����B+�c�$7D�����R�]H�L˶�'P�qV�נ��#S"ˑ��5�X|>��{r��V$�����B�lc m�[F=�?SG:.0��j~"��l����I�b��Kܾ���f=ʓ����0��"@=��6�i6O�����E�n��
