=== Content from github.com_c754e7b3_20250115_113226.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fadvisories%2FGHSA-pwpq-84p4-86mx)

**CVE-2023-34204**

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fadvisories%2FGHSA-pwpq-84p4-86mx)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2Fadvisories%2F%3Cid%3E&source=header)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

1. [GitHub Advisory Database](/advisories)
2. [Unreviewed](/advisories?query=type%3Aunreviewed)
3. [CVE-2023-34204](/advisories/GHSA-pwpq-84p4-86mx)

## imapsync through 2.229 uses predictable paths under /tmp...

Moderate severity

Unreviewed

Published
May 30, 2023
to the GitHub Advisory Database
•
Updated Apr 4, 2024

## Package

No package listed—
[Suggest a package](/advisories/GHSA-pwpq-84p4-86mx/improve)

## Affected versions

Unknown

## Patched versions

Unknown

## Description

imapsync through 2.229 uses predictable paths under /tmp and /var/tmp in its default mode of operation. Both of these are typically world-writable, and thus (for example) an attacker can modify imapsync's cache and overwrite files belonging to the user who runs it.

### References

* <https://nvd.nist.gov/vuln/detail/CVE-2023-34204>
* [imapsync/imapsync#399](https://github.com/imapsync/imapsync/issues/399)

Published by the [National Vulnerability Database](https://nvd.nist.gov/vuln/detail/CVE-2023-34204)
May 30, 2023

Published to the GitHub Advisory Database
May 30, 2023

Last updated
Apr 4, 2024

### Severity

Moderate

6.5

# CVSS overall score

 This score calculates overall vulnerability severity from 0 to 10 and is based on the Common Vulnerability Scoring System (CVSS).

 / 10

#### CVSS v3 base metrics

Attack vector
Network

Attack complexity
Low

Privileges required
None

User interaction
Required

Scope
Unchanged

Confidentiality
None

Integrity
High

Availability
None

Learn more about base metrics

# CVSS v3 base metrics

Attack vector:
More severe the more the remote (logically and physically) an attacker can be in order to exploit the vulnerability.

Attack complexity:
More severe for the least complex attacks.

Privileges required:
More severe if no privileges are required.

User interaction:
More severe when no user interaction is required.

Scope:
More severe when a scope change occurs, e.g. one vulnerable component impacts resources in components beyond its security scope.

Confidentiality:
More severe when loss of data confidentiality is highest, measuring the level of data access available to an unauthorized user.

Integrity:
More severe when loss of data integrity is the highest, measuring the consequence of data modification possible by an unauthorized user.

Availability:
More severe when the loss of impacted component availability is highest.

CVSS:3.1/AV:N/AC:L/PR:N/UI:R/S:U/C:N/I:H/A:N

### [EPSS score](https://www.first.org/epss/user-guide)

0.063%
 (29th percentile)

### Weaknesses

[CWE-59](/advisories?query=cwe%3A59)

### CVE ID

CVE-2023-34204

### GHSA ID

GHSA-pwpq-84p4-86mx

### Source code

No known source code

Dependabot alerts are not supported on this advisory because it does not have a package from a supported ecosystem with an affected and fixed version.

[Learn more about GitHub language support](https://docs.github.com/get-started/learning-about-github/github-language-support#about-supported-languages)

 Loading

Checking history

See something to contribute?
[Suggest improvements for this vulnerability](/advisories/GHSA-pwpq-84p4-86mx/improve).

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_534d0bb6_20250114_185018.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fimapsync%2Fimapsync%2Fissues%2F399)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fimapsync%2Fimapsync%2Fissues%2F399)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=imapsync%2Fimapsync)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[imapsync](/imapsync)
/
**[imapsync](/imapsync/imapsync)**
Public

* [Notifications](/login?return_to=%2Fimapsync%2Fimapsync) You must be signed in to change notification settings
* [Fork
  478](/login?return_to=%2Fimapsync%2Fimapsync)
* [Star
   3.4k](/login?return_to=%2Fimapsync%2Fimapsync)

* [Code](/imapsync/imapsync)
* [Issues
  167](/imapsync/imapsync/issues)
* [Pull requests
  10](/imapsync/imapsync/pulls)
* [Discussions](/imapsync/imapsync/discussions)
* [Actions](/imapsync/imapsync/actions)
* [Projects
  0](/imapsync/imapsync/projects)
* [Wiki](/imapsync/imapsync/wiki)
* [Security](/imapsync/imapsync/security)
* [Insights](/imapsync/imapsync/pulse)

Additional navigation options

* [Code](/imapsync/imapsync)
* [Issues](/imapsync/imapsync/issues)
* [Pull requests](/imapsync/imapsync/pulls)
* [Discussions](/imapsync/imapsync/discussions)
* [Actions](/imapsync/imapsync/actions)
* [Projects](/imapsync/imapsync/projects)
* [Wiki](/imapsync/imapsync/wiki)
* [Security](/imapsync/imapsync/security)
* [Insights](/imapsync/imapsync/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fimapsync%2Fimapsync%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fimapsync%2Fimapsync%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# Secure /tmp usage #399

Open

[orlitzky](/orlitzky) opened this issue
May 23, 2023
· 10 comments

Open

# [Secure /tmp usage](#top) #399

[orlitzky](/orlitzky) opened this issue
May 23, 2023
· 10 comments

Assignees
[![@gilleslamiral](https://avatars.githubusercontent.com/u/3310469?s=40&v=4)](/gilleslamiral)

Labels
[pidfile](/imapsync/imapsync/labels/pidfile)
[Security](/imapsync/imapsync/labels/Security)

## Comments

[![@orlitzky](https://avatars.githubusercontent.com/u/1432135?s=80&v=4)](/orlitzky)

Copy link

### **[orlitzky](/orlitzky)** commented [May 23, 2023](#issue-1722261616)

| I was running imapsync recently and noticed this flag description,  ```   --pidfile      str  : The file where imapsync pid is written,                         it can be dirname/filename complete path.                         The default name is imapsync.pid in tmpdir.  ```  This was a red flag because using predictable filenames under `/tmp` is a well-known source of vulnerabilities: <https://owasp.org/www-community/vulnerabilities/Insecure_Temporary_File>  In this case, I verified that (with the default options), imapsync can be tricked into overwriting files belonging to other users. The simplest proof-of-concept uses a symlink. Newer linux distributions enable a sysctl to protect against this specific attack, but the example should still work on a vanilla kernel or on other UNIX systems, and more complicated attacks (not involving a symlink) are possible.  If you're on linux, start by ensuring that the aforementioned sysctl is disabled:  ``` root # sysctl fs.protected_symlinks=0  ```  Now, as a normal user, create a symlink from `/tmp/imapsync.pid` to `/etc/passwd`:  ``` mjo $ ln -s /etc/passwd /tmp/imapsync.pid  ```  This works because `/tmp` is world-writable. Anyone can create a file, directory, or symlink at that location before imapsync tries to use it. Now, run imapsync as root:  ``` root # imapsync <whatever>  ```  You'll find that `/etc/passwd`, belonging to root, has essentially been deleted by the unprivileged user. Most file operations will follow a symlink, and in this case, the PID file was written to `/etc/passwd`.  The fundamental issue is that `/tmp` is world-writable by design which leads to all sorts of exploits like this. There are a lot of complicated and clever workarounds needed to make using `/tmp` (or `/var/tmp`) secure. In C, there are standard functions like `mkstemp()` that will create a temporary file securely. I'm not much of a perl programmer, but I believe File::Temp does the same thing in perl.  The `imapsync_cache` directory has the same issue; I can create it before you run imapsync and then I'm allowed to modify your cache. And while I haven't tried it, I would expect that `$CGI_TMPDIR_TOP` and `$CGI_HASHFILE` have a similar fate. |
| --- |
| The text was updated successfully, but these errors were encountered: |

All reactions

[![@gilleslamiral](https://avatars.githubusercontent.com/u/3310469?s=80&u=15053e510675cdcb634383aba89da3d12c6f709e&v=4)](/gilleslamiral)

Copy link

Member

### **[gilleslamiral](/gilleslamiral)** commented [May 24, 2023](#issuecomment-1560987402)

| root # imapsync whatever You'll find that /etc/passwd, belonging to root, has essentially been deleted by the unprivileged user.  No. In this case, /etc/passwd, belonging to root, has essentially been deleted by root himself.  Show me an example with an unprivileged user. |
| --- |

All reactions

Sorry, something went wrong.

[![@gilleslamiral](https://avatars.githubusercontent.com/u/3310469?s=40&u=15053e510675cdcb634383aba89da3d12c6f709e&v=4)](/gilleslamiral)
[gilleslamiral](/gilleslamiral)
self-assigned this
[May 24, 2023](#event-9326826675)

[![@gilleslamiral](https://avatars.githubusercontent.com/u/3310469?s=40&u=15053e510675cdcb634383aba89da3d12c6f709e&v=4)](/gilleslamiral)
[gilleslamiral](/gilleslamiral)
added
[pidfile](/imapsync/imapsync/labels/pidfile)
[Security](/imapsync/imapsync/labels/Security)
labels
[May 24, 2023](#event-9326828900)

[![@orlitzky](https://avatars.githubusercontent.com/u/1432135?s=80&v=4)](/orlitzky)

Copy link

Author

### **[orlitzky](/orlitzky)** commented [May 24, 2023](#issuecomment-1561116190)

| It has *literally* been deleted by root himself, but the same can be said about any security exploit:   1. User visits a malicious website 2. The website exploits a buffer overflow in the browser 3. The exploit installs ransomware and encrypts all of the user's files 4. The user has installed the ransomware himself, so there's no problem?   I used "essentially" because, from root's perspective, all he has done is run imapsync normally, and one of his files was deleted without his knowledge. The attacker has leveraged imapsync in this case to do something that he normally wouldn't be able to do (delete `/etc/passwd`).  For a second proof of concept, create `/tmp/imapsync_cache` as one unprivileged user and make it world-writable. As another unprivileged user, run imapsync. While it's running, the first user can change the permissions on the cache, because he owns the directory that it lives in. Afterwards, the first user can change or delete the second user's cache files. |
| --- |

All reactions

Sorry, something went wrong.

[![@gilleslamiral](https://avatars.githubusercontent.com/u/3310469?s=80&u=15053e510675cdcb634383aba89da3d12c6f709e&v=4)](/gilleslamiral)

Copy link

Member

### **[gilleslamiral](/gilleslamiral)** commented [May 30, 2023](#issuecomment-1568477923)

| You verified that with root privileges, imapsync can be tricked into overwriting files belonging to other users. Well, I don't have to verify that with root privileges, any command can be tricked into overwriting files belonging to other users, or doing infinite nasty things to any user, root included.   * Give me an example tested without root privileges. * Give me a safer solution to the following need: find a default writable directory for a user where pieces of information from previous runs are stored and can be retrieved. |
| --- |

All reactions

Sorry, something went wrong.

[![@orlitzky](https://avatars.githubusercontent.com/u/1432135?s=80&v=4)](/orlitzky)

Copy link

Author

### **[orlitzky](/orlitzky)** commented [May 30, 2023](#issuecomment-1568546408)

| You verified that with root privileges, imapsync can be tricked into overwriting files belonging to other users.  It's tricked *by another user* into overwriting files that belong to root.  Well, I don't have to verify that with root privileges, any command can be tricked into overwriting files belonging to other users, or doing infinite nasty things to any user, root included.  That may be true in a very general sense, but the important details here are that (1) the unprivileged user gets to choose a file, belonging to root, to delete; and (2) root hasn't done anything else "wrong," all he did was run imapsync normally.  Give me an example tested without root privileges.  You can repeat the same example as an unprivileged user. I only chose root because it's the worst-case scenario and obviously unprivileged users should not be able to overwrite `/etc/passwd` (which breaks the machine). Here's an example that works on my machine:   1. User `apache` creates a symlink from `/tmp/imapsync.pid` to `/home/mjo/.ssh/github` 2. I run imapsync as my normal user account, mjo 3. My github SSH key is deleted   This allows websites (often managed by third parties -- I work at a hosting company) to delete the admin's SSH keys.  Give me a safer solution to the following need: find a default writable directory for a user where pieces of information from previous runs are stored and can be retrieved.  A location under `$HOME` should do the trick. The [XDG specification](https://specifications.freedesktop.org/basedir-spec/basedir-spec-latest.html) says,  The `$XDG_STATE_HOME` contains state data that should persist between (application) restarts, but that is not important or portable enough to the user that it should be stored in `$XDG_DATA_HOME`. It may contain:   * actions history (logs, history, recently used files, …) * current state of the application that can be reused on a restart (view, layout, open files, undo history, …)  I think that sounds about right? |
| --- |

All reactions

Sorry, something went wrong.

[![@gilleslamiral](https://avatars.githubusercontent.com/u/3310469?s=80&u=15053e510675cdcb634383aba89da3d12c6f709e&v=4)](/gilleslamiral)

Copy link

Member

### **[gilleslamiral](/gilleslamiral)** commented [May 31, 2023](#issuecomment-1569850303)

| Ok, it sounds right.  User `apache` has usually no writable `$HOME`, for safety reasons.  The funny part is that I use: `$sync->{ tmpdir } ||= File::Spec->tmpdir( ) ;`  So feel free to also report the issue to Perl designers.  ``` perldoc File::Spec ...     tmpdir       Returns a string representation of the first writable directory from a       list of possible temporary directories. Returns the current directory if       no writable temporary directories are found. The list of directories       checked depends on the platform; e.g. File::Spec::Unix checks       $ENV{TMPDIR} (unless taint is on) and /tmp.            $tmpdir = File::Spec->tmpdir();  ```  I updated <https://imapsync.lamiral.info/TODO>  ``` ... SUGGESTED 2023_05_23 by Michael Orlitzky Change default tmpdir location to $HOME/tmp/ or $HOME/ https://github.com/imapsync/imapsync/issues/399  ``` |
| --- |

All reactions

Sorry, something went wrong.

[![@orlitzky](https://avatars.githubusercontent.com/u/1432135?s=80&v=4)](/orlitzky)

Copy link

Author

### **[orlitzky](/orlitzky)** commented [May 31, 2023](#issuecomment-1571098394)

| Great, thank you.  The funny part is that I use: `$sync->{ tmpdir } ||= File::Spec->tmpdir( ) ;`  So feel free to also report the issue to Perl designers.  Hm, there should at least be a warning in the documentation for that function. These `/tmp` vulnerabilities have been around forever, and it's pretty stupid that programmers still have easy access to vulnerable functions. If you want to hear a good joke, read `man 3 mktemp`:  ``` DESCRIPTION        Never use this function; see BUGS. ...  BUGS        Never  use  mktemp().   Some  implementations follow 4.3BSD and replace        XXXXXX by the current process ID and a single letter, so that  at  most        26  different  names  can be returned.  Since on the one hand the names        are easy to guess, and on the other hand there is a race between  test‐        ing whether the name exists and opening the file, every use of mktemp()        is a security risk.  The race is avoided by mkstemp(3) and mkdtemp(3).  ```  Change default tmpdir location to $HOME/tmp/ or $HOME/  To share a top-level location with other apps, you could try `$XDG_STATE_HOME` and default to `$HOME/.local/state` if `$XDG_STATE_HOME` is unset. But anywhere under `$HOME` should be safe; that's the important part. Thanks again! |
| --- |

All reactions

Sorry, something went wrong.

[![@gilleslamiral](https://avatars.githubusercontent.com/u/3310469?s=80&u=15053e510675cdcb634383aba89da3d12c6f709e&v=4)](/gilleslamiral)

Copy link

Member

### **[gilleslamiral](/gilleslamiral)** commented [Jun 5, 2023](#issuecomment-1576397733)

| How about using /tmp/imapsync-UID/ where UID is the Unix user identifier? |
| --- |

All reactions

Sorry, something went wrong.

[![@orlitzky](https://avatars.githubusercontent.com/u/1432135?s=80&v=4)](/orlitzky)

Copy link

Author

### **[orlitzky](/orlitzky)** commented [Jun 5, 2023](#issuecomment-1576698923)

| How about using /tmp/imapsync-UID/ where UID is the Unix user identifier?  I don't think it helps much because the user ids on a machine are all predictable as well. I can create `/tmp/imapsync-0` through `/tmp/imapsync-65535` almost as easily as I can create `/tmp/imapsync_cache`. Then it doesn't matter which UID executes imapsync, because I control all of the possible directories. |
| --- |

All reactions

Sorry, something went wrong.

[![@ml632](https://avatars.githubusercontent.com/u/80626442?s=40&v=4)](/ml632)
[ml632](/ml632)
mentioned this issue
[Aug 26, 2023](#ref-issue-1868074308)

[Option --tmpdir ignored in Docker context?
#413](/imapsync/imapsync/issues/413)

Open

[![@bmatthewshea](https://avatars.githubusercontent.com/u/984097?s=80&v=4)](/bmatthewshea)

Copy link

### **[bmatthewshea](/bmatthewshea)** commented [Dec 4, 2023](#issuecomment-1839091750) • edited Loading

| There is no Linux "standard" for a $HOME based ./tmp directory location afaik, but you might consider using `$HOME/.local/tmp` as I have noticed '.local' in a given users home area being used more and more for user based data (as opposed to system data). Especially for Debian/Ubuntu (since that's what I tend to use). I am sure "$HOME/tmp" will work fine, though, with that said. See: <https://unix.stackexchange.com/a/313001/186861> and others.. |
| --- |

All reactions

Sorry, something went wrong.

[![@gilleslamiral](https://avatars.githubusercontent.com/u/3310469?s=80&u=15053e510675cdcb634383aba89da3d12c6f709e&v=4)](/gilleslamiral)

Copy link

Member

### **[gilleslamiral](/gilleslamiral)** commented [Dec 4, 2023](#issuecomment-1839640533)

| Here is the current tmpdir. It is "User defined or $HOME/tmp if $HOME defined or current directory"  ``` sub tmpdir {         my $mysync = shift @ARG ;                  if ( ! defined( $mysync ) )          {                 return( './' ) ;         }         elsif ( defined( $mysync->{ tmpdir } ) )         {                 return( $mysync->{ tmpdir } ) ;         }         elsif ( defined( $ENV{ 'HOME' } ) )         {                 return( $ENV{ 'HOME' } . '/tmp' ) ;         }         else         {                 return( './' ) ;         }                  return ; }  ``` |
| --- |

All reactions

Sorry, something went wrong.

[netbsd-srcmastr](/netbsd-srcmastr)
pushed a commit
to NetBSD/pkgsrc
that referenced
this issue
[Aug 15, 2024](#ref-commit-6c12191)

`[imapsync: update to 2.264](/NetBSD/pkgsrc/commit/6c12191d56e5b958149b292182cafec9a357eb8b "imapsync: update to 2.264

* Dependencies added: Perl module Digest::SHA
* Dependencies removed: Perl module IO::Socket::INET6
* Enhancement: It is now possible to check login with one side. Example:
  imapsync --host1 test1.lamiral.info --user1 test1 --password1 secret1
* Enhancement: Office365 OAUTH2 modern authentication supported with an external
  script.
* Bug fix: Reread oauth2 files upon disconnections.
* Bug fix: Options --password1 and --password2 are no longer required when
  --oauthaccesstoken1 and --oauthaccesstoken2 are used, respectively.
* Bug fix: Options --user1 and --user2 are no longer required when --oauthdirect1
  and --oauthdirect2 are used, respectively.
* Refactoring: 2065 unit tests.
* Refactoring: 200 functionnal tests.
* Security: Changed the default temporary directory. Now, the temporary directory
  taken from --tmpdir or $HOME/tmp or current directory, in order if defined
  (instead of /tmp on Linux) CVE-2023-34204
  See https://nvd.nist.gov/vuln/detail/CVE-2023-34204
  and also https://github.com/imapsync/imapsync/issues/399
  I did not change the default tmpdir in the CGI context because
  /var/tmp/imapsync_hash is written only if it doesn't exist and
  /var/tmp/imapsync_cgi/ is created under the supervision of an admin. And I am
  lazy to change all my hosts for now.
* Portability: removed \"use IO::Socket::INET6 ;\"
* CGI context: CGI context. Exit with a \"503 Service Unavailable\" when no disk
  space is available.
* CGI context: Now the logfile name can only be composed with characters a-zA-Z0-9_-")`
…

`[6c12191](/NetBSD/pkgsrc/commit/6c12191d56e5b958149b292182cafec9a357eb8b)`

```
* Dependencies added: Perl module Digest::SHA
* Dependencies removed: Perl module IO::Socket::INET6
* Enhancement: It is now possible to check login with one side. Example:
  imapsync --host1 test1.lamiral.info --user1 test1 --password1 secret1
* Enhancement: Office365 OAUTH2 modern authentication supported with an external
  script.
* Bug fix: Reread oauth2 files upon disconnections.
* Bug fix: Options --password1 and --password2 are no longer required when
  --oauthaccesstoken1 and --oauthaccesstoken2 are used, respectively.
* Bug fix: Options --user1 and --user2 are no longer required when --oauthdirect1
  and --oauthdirect2 are used, respectively.
* Refactoring: 2065 unit tests.
* Refactoring: 200 functionnal tests.
* Security: Changed the default temporary directory. Now, the temporary directory
  taken from --tmpdir or $HOME/tmp or current directory, in order if defined
  (instead of /tmp on Linux) [CVE-2023-34204](https://github.com/advisories/GHSA-pwpq-84p4-86mx "CVE-2023-34204")
  See <https://nvd.nist.gov/vuln/detail/CVE-2023-34204>
  and also [imapsync/imapsync#399](https://github.com/imapsync/imapsync/issues/399)
  I did not change the default tmpdir in the CGI context because
  /var/tmp/imapsync_hash is written only if it doesn't exist and
  /var/tmp/imapsync_cgi/ is created under the supervision of an admin. And I am
  lazy to change all my hosts for now.
* Portability: removed "use IO::Socket::INET6 ;"
* CGI context: CGI context. Exit with a "503 Service Unavailable" when no disk
  space is available.
* CGI context: Now the logfile name can only be composed with characters a-zA-Z0-9_-
```

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Fimapsync%2Fimapsync%2Fissues%2F399)

Assignees

[![@gilleslamiral](https://avatars.githubusercontent.com/u/3310469?s=40&v=4)](/gilleslamiral) [gilleslamiral](/gilleslamiral)

Labels

[pidfile](/imapsync/imapsync/labels/pidfile)
[Security](/imapsync/imapsync/labels/Security)

Projects

None yet

Milestone

No milestone

Development

No branches or pull requests

3 participants

[![@bmatthewshea](https://avatars.githubusercontent.com/u/984097?s=52&v=4)](/bmatthewshea) [![@orlitzky](https://avatars.githubusercontent.com/u/1432135?s=52&v=4)](/orlitzky) [![@gilleslamiral](https://avatars.githubusercontent.com/u/3310469?s=52&v=4)](/gilleslamiral)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


